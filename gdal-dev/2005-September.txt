From wsacul at gmail.com  Thu Sep  1 00:03:21 2005
From: wsacul at gmail.com (wsacul)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Re: gdal_translate with onearth png
In-Reply-To: <20050901141037.6d3ad686.hamish_nospam@yahoo.com>
References: <17f672c60508311130a367202@mail.gmail.com>
	<20050901141037.6d3ad686.hamish_nospam@yahoo.com>
Message-ID: <17f672c605083121037c480165@mail.gmail.com>

I was more interested in textures, but I have that end covered (by
writing a script to pull them down from onearth).

Any elevation data that I can get into osgdem
(http://www.openscenegraph.org/index.php?page=UserGuides.Osgdem) is
useful, but the important thing for me is to be able to manage the
level of detail- I want to get low-res data for stuff I'll only see
from a distance and high-res for the things I want to be able to fly
by.  Osgdem can handle integrating it all together if it has a loader
for the format.

-lucasw

On 9/1/05, Hamish <hamish_nospam@yahoo.com> wrote:
> > I'd like to take elevation data from the onearth server and convert it
> > to a geotiff.
> 
> If you are primarily interested in elevation, may I suggest trying the
> ETOPO5 or ETOPO2 datasets?
> 
> see  http://grass.itc.it/newsletter/GRASSNews_vol1.pdf
> 
> 
> Hamish
>


From ari.jolma at tkk.fi  Thu Sep  1 01:20:31 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] swig/perl
In-Reply-To: <43165D31.2020900@ku.edu>
References: <s31431bd.099@co5.dnr.state.mn.us> <43162BA4.4000802@tkk.fi>
	<43165D31.2020900@ku.edu>
Message-ID: <43168F9F.3060707@tkk.fi>

Kevin Ruland kirjoitti:

>Congratulations Ari!
>
>Perl should be able to do the tostring argin pretty easily since it
>takes any object and "string-ifies" it.
>
>IF_FALSE_RETURN_NONE should also be pretty easy since Perl has a very
>nice sense of none.
>  
>

I just couldn't figure out quickly enough what was supposed to happen 
and these didn't look very important ;) And I've always had problems 
with the fundamental questions like this "what is it that is none?" and 
"should this one be mortal or not?". :)

>>saying there are two _wrap_GetDriverCount's, the other is of course
>>from OGR. If I fix that by hand (edit ogr_wrap.cpp by hand) it
>>compiles. I don't know how to control the naming of the _wrap
>>function, %rename does not seem to do that. 
>>

You don't have any idea how to fix this? I'd like to have the first 
version I send to compile & run a test. If not otherwise, then with some 
kludge like: "fixit.pl ogr_wrap.cpp" in the Makefile.

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From support at geoimage.fr  Thu Sep  1 05:54:15 2005
From: support at geoimage.fr (=?iso-8859-1?Q?Fr=E9d=E9ric_Trastour?=)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] GDAL 1.3.0 on Solaris 2.7
References: <0a7b01c5ae4c$0fc392b0$0a01a8c0@pili>
	<931f8ea9050831103060e3b4f9@mail.gmail.com>
Message-ID: <0b8e01c5aedb$1d38a6d0$0a01a8c0@pili>


Thanks for your answers.

>> Hello,
>>
>> I am trying to build GDAL 1.3.0 on Solaris 2.7 - sparc - gcc 3.3.2
>>
>> After basic build, using built-in librairies (tiff, jpeg, ...), and external
>> hdf4, xerces and sqlite.
>>
>> Now I'am trying to add GEOS and ECW support.
>>
>>     - GEOS : What version of GEOS is supported ? is 2.1.4 OK ?

>Fr?d?ric,

>GEOS 2.0.x or 2.1.x should work.

OK, 2.1.4 is OK.

>>     - ECW : I have downloaded the SDK :
>>             ECW JPEG 2000 SDK Source Distribution
>>             Version 3.2 Beta 1
>>             Date : 11 June 2005
>>      and compiled it, but It doesn't work...the example programs hang
(infinite
>> loop over yield)
>>      Does anyone has successfully  compiled the SDK on Solaris ?

>I can't say that I have tried it myself on Solaris, but there are some
>thread-lock-up issues in the POSIX logic that *might* affect Solaris.
>You ought to look through the ECW SDK Forums at ermapper.com and
>look for patches by Bill.  Or, if you can wait, hold out for 3.2 final (or 3.3
>I think they plan to call it).

>Good luck,


After applying Bill's patch and trying some other changes, the problem
is not solved. I have posted a bug report to ermapper...

In order to get at least decompression for ecw, I have downloaded
the "ECW Decompression SDK For Solaris" (precompiled).

The examples of this distribution compile and are working.

So, I am trying to compile GDAL 1.3.0 with this distribution but
this doesn't seem easy :(
GDAL 1.3.0 includes support for JP2 and write support for ECW and this
can't be desactived via buid directive.

Perhaps can I use an older version of the ECW driver ?  Any idea about
which version of GDAL I can extract an old readonly ECW driver ?

Best regards,
Fr?d?ric.
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bill at binko.net  Thu Sep  1 15:23:51 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
In-Reply-To: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11232F@uc-exh-2.liunet.edu>
References: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11232F@uc-exh-2.liunet.edu>
Message-ID: <Pine.LNX.4.58.0509011521540.26276@fastcat.binko.net>


I have also unfortunately found a different hanging situation as I tried 
to build low-res overviews for my ECW set.  Worse, it is hanging at 100% 
CPU!

I will try to see if I can get to the bottom of it, but right now I'm very 
interested in getting this conversion done, so I need to babysit it.

Tom, does this mesh with any bugs that are fixed in your new version 
(which we're anxious for)?

Bill

On Wed, 31 Aug 2005, James Browne wrote:

> Bill,
>      Yes,I tried versions with it and without it. (and thanks for that work) It doesn't seem to even get that far in the code. In a day or two I will have the time to double check to see if I just did something dumb, or otherwise, to step through the code more closely. 
>                         Jim
> 
> 
> -----Original Message-----
> From: Bill Binko [mailto:bill@binko.net]
> Sent: Tue 8/30/2005 8:42 PM
> To: James Browne
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
>  
> Have you applied my patch?
> 
> I know I said that compiling with -g should solve it, but you might try 
> the patch as well.
> 
> Bill
> 
> On Tue, 30 Aug 2005, James Browne wrote:
> 
> > Hi all,
> > 
> > After a few tweaks and tries, the latest ECW SDK 3.2 beta is building nicely and GDAL 1.3 builds against it.
> > 
> > However, now it hangs every time, even compiled as debug. It seems to hang at the first spawn.
> > 
> > I am running a dual Pentium 2.6G box with Debian Sarge as the OS. Is anyone else trying to run this on a Linux based SMP, and is that making threading break?
> > 
> > I will not have time to study this more for a few days. Any ideas will be appreciated greatly.
> > 
> >     Thanks
> >                     Jim
> > 
> > 
> > I tested using both gdal_translate and gdalinfo and the debugging output was the same:
> > 
> > GNU gdb 6.3-debian
> > Copyright 2004 Free Software Foundation, Inc.
> > GDB is free software, covered by the GNU General Public License, and you are
> > welcome to change it and/or distribute copies of it under certain conditions.
> > Type "show copying" to see the conditions.
> > There is absolutely no warranty for GDB.  Type "show warranty" for details.
> > This GDB was configured as "i386-linux"...Using host libthread_db library "/lib/libthread_db.so.1".
> > 
> > (gdb) run --debug ON April1994_raw.ecw
> > Starting program: /usr/local/bin/gdalinfo --debug ON /home/samba/basemap/images/4_94coast/2foot_as_1ft_ecw/April1994_raw.ecw
> > [Thread debugging using libthread_db enabled]
> > [New Thread 16384 (LWP 12685)]
> > [New Thread 32769 (LWP 12686)]
> > 
> > Program received signal SIGSEGV, Segmentation fault.
> > [Switching to Thread 32769 (LWP 12686)]
> > 0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> > (gdb) bt
> > #0  0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> > #1  0x40589c18 in __pthread_manager () from /lib/libpthread.so.0
> > #2  0x40589d57 in __pthread_manager_event () from /lib/libpthread.so.0
> > #3  0x40bf992a in clone () from /lib/libc.so.6
> > (gdb) s
> > Single stepping until exit from function pthread_handle_create,
> > which has no line number information.
> > 
> > <CTR-C>
> > 
> > Program received signal SIGINT, Interrupt.
> > [Switching to Thread 16384 (LWP 12685)]
> > 0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> > (gdb) bt
> > #0  0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> > #1  0x4058c3c8 in __pthread_wait_for_restart_signal () from /lib/libpthread.so.0
> > #2  0x4058bc42 in pthread_create@@GLIBC_2.1 () from /lib/libpthread.so.0
> > #3  0x40c7b2c0 in NCSThreadSpawn (pThread=0x407c4c84, pFunc=0x40c74b74 <CNCSThread::ThreadFunc(void*)>, pData=0x407c4c80,
> >     bCreateSuspended=0) at ../../thread.c:390
> > #4  0x40c74d6f in CNCSThread::Spawn (this=0x407c4c80, pData=0x0, bCreateSuspended=false) at ../../NCSThread.cpp:52
> > #5  0x406d0d79 in CNCSJP2FileView (this=0x80534d8) at ../../../NCSJP2/NCSJP2FileView.cpp:52
> > #6  0x4068ccc3 in CNCSFile (this=0x80534d8) at ../../NCSFile.cpp:57
> > #7  0x400f6d86 in ECWDataset::Open () from /usr/local/lib/libgdal.so.1
> > #8  0x400f6c0c in ECWDataset::OpenECW () from /usr/local/lib/libgdal.so.1
> > #9  0x401b432f in GDALOpen () from /usr/local/lib/libgdal.so.1
> > #10 0x08049951 in main ()
> > 
> > 
> > $ gdal-config --formats
> > gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis rmf rik bsb ecw jpeg2000 hdf4 gif jpeg png
> > $ gdal-config --version
> > 1.3.0
> > 
> > 
> >   
> > 
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> > 
> 
>   
> 
> 

From bill at binko.net  Thu Sep  1 15:40:39 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
In-Reply-To: <Pine.LNX.4.58.0509011521540.26276@fastcat.binko.net>
References: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11232F@uc-exh-2.liunet.edu>
	<Pine.LNX.4.58.0509011521540.26276@fastcat.binko.net>
Message-ID: <Pine.LNX.4.58.0509011539590.27858@fastcat.binko.net>


On Thu, 1 Sep 2005, Bill Binko wrote:

> 
> I have also unfortunately found a different hanging situation as I tried 
> to build low-res overviews for my ECW set.  Worse, it is hanging at 100% 
> CPU!
> 
> I will try to see if I can get to the bottom of it, but right now I'm very 
> interested in getting this conversion done, so I need to babysit it.

Here is a stack trace.  Unfortunately, I do not have a debug version ready 
to go:
#0  0x407bda12 in NCScbmReadFileBlockLocal_ECW () from /usr/lib/libNCSEcw.so
#1  0x407d3ed3 in NCScbmReadFileBlockLocal () from /usr/lib/libNCSEcw.so
#2  0x407bc93b in NCScbmGetCacheBlock () from /usr/lib/libNCSEcw.so
#3  0x407bcc9f in NCScbmFileViewRequestBlocks () from /usr/lib/libNCSEcw.so
#4  0x407bd3aa in NCScbmSetFileViewEx_ECW () from /usr/lib/libNCSEcw.so
#5  0x407f3f32 in CNCSJP2FileView::SetView () from /usr/lib/libNCSEcw.so
#6  0x402b8614 in ECWDataset::IRasterIO () from /usr/lib/libgdal.so.1
#7  0x40362542 in GDALDataset::RasterIO () from /usr/lib/libgdal.so.1
#8  0x40362673 in GDALDatasetRasterIO () from /usr/lib/libgdal.so.1
#9  0x4038fddb in GDALWarpOperation::WarpRegionToBuffer () from /usr/lib/libgdal.so.1
#10 0x40390704 in GDALWarpOperation::WarpRegion () from /usr/lib/libgdal.so.1
#11 0x40390a46 in GDALWarpOperation::ChunkAndWarpImage () from /usr/lib/libgdal.so.1
#12 0x0804a859 in main ()

> 
> Tom, does this mesh with any bugs that are fixed in your new version 
> (which we're anxious for)?
> 
> Bill
> 
> On Wed, 31 Aug 2005, James Browne wrote:
> 
> > Bill,
> >      Yes,I tried versions with it and without it. (and thanks for that work) It doesn't seem to even get that far in the code. In a day or two I will have the time to double check to see if I just did something dumb, or otherwise, to step through the code more closely. 
> >                         Jim
> > 
> > 
> > -----Original Message-----
> > From: Bill Binko [mailto:bill@binko.net]
> > Sent: Tue 8/30/2005 8:42 PM
> > To: James Browne
> > Cc: gdal-dev@lists.maptools.org
> > Subject: Re: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
> >  
> > Have you applied my patch?
> > 
> > I know I said that compiling with -g should solve it, but you might try 
> > the patch as well.
> > 
> > Bill
> > 
> > On Tue, 30 Aug 2005, James Browne wrote:
> > 
> > > Hi all,
> > > 
> > > After a few tweaks and tries, the latest ECW SDK 3.2 beta is building nicely and GDAL 1.3 builds against it.
> > > 
> > > However, now it hangs every time, even compiled as debug. It seems to hang at the first spawn.
> > > 
> > > I am running a dual Pentium 2.6G box with Debian Sarge as the OS. Is anyone else trying to run this on a Linux based SMP, and is that making threading break?
> > > 
> > > I will not have time to study this more for a few days. Any ideas will be appreciated greatly.
> > > 
> > >     Thanks
> > >                     Jim
> > > 
> > > 
> > > I tested using both gdal_translate and gdalinfo and the debugging output was the same:
> > > 
> > > GNU gdb 6.3-debian
> > > Copyright 2004 Free Software Foundation, Inc.
> > > GDB is free software, covered by the GNU General Public License, and you are
> > > welcome to change it and/or distribute copies of it under certain conditions.
> > > Type "show copying" to see the conditions.
> > > There is absolutely no warranty for GDB.  Type "show warranty" for details.
> > > This GDB was configured as "i386-linux"...Using host libthread_db library "/lib/libthread_db.so.1".
> > > 
> > > (gdb) run --debug ON April1994_raw.ecw
> > > Starting program: /usr/local/bin/gdalinfo --debug ON /home/samba/basemap/images/4_94coast/2foot_as_1ft_ecw/April1994_raw.ecw
> > > [Thread debugging using libthread_db enabled]
> > > [New Thread 16384 (LWP 12685)]
> > > [New Thread 32769 (LWP 12686)]
> > > 
> > > Program received signal SIGSEGV, Segmentation fault.
> > > [Switching to Thread 32769 (LWP 12686)]
> > > 0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> > > (gdb) bt
> > > #0  0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> > > #1  0x40589c18 in __pthread_manager () from /lib/libpthread.so.0
> > > #2  0x40589d57 in __pthread_manager_event () from /lib/libpthread.so.0
> > > #3  0x40bf992a in clone () from /lib/libc.so.6
> > > (gdb) s
> > > Single stepping until exit from function pthread_handle_create,
> > > which has no line number information.
> > > 
> > > <CTR-C>
> > > 
> > > Program received signal SIGINT, Interrupt.
> > > [Switching to Thread 16384 (LWP 12685)]
> > > 0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> > > (gdb) bt
> > > #0  0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> > > #1  0x4058c3c8 in __pthread_wait_for_restart_signal () from /lib/libpthread.so.0
> > > #2  0x4058bc42 in pthread_create@@GLIBC_2.1 () from /lib/libpthread.so.0
> > > #3  0x40c7b2c0 in NCSThreadSpawn (pThread=0x407c4c84, pFunc=0x40c74b74 <CNCSThread::ThreadFunc(void*)>, pData=0x407c4c80,
> > >     bCreateSuspended=0) at ../../thread.c:390
> > > #4  0x40c74d6f in CNCSThread::Spawn (this=0x407c4c80, pData=0x0, bCreateSuspended=false) at ../../NCSThread.cpp:52
> > > #5  0x406d0d79 in CNCSJP2FileView (this=0x80534d8) at ../../../NCSJP2/NCSJP2FileView.cpp:52
> > > #6  0x4068ccc3 in CNCSFile (this=0x80534d8) at ../../NCSFile.cpp:57
> > > #7  0x400f6d86 in ECWDataset::Open () from /usr/local/lib/libgdal.so.1
> > > #8  0x400f6c0c in ECWDataset::OpenECW () from /usr/local/lib/libgdal.so.1
> > > #9  0x401b432f in GDALOpen () from /usr/local/lib/libgdal.so.1
> > > #10 0x08049951 in main ()
> > > 
> > > 
> > > $ gdal-config --formats
> > > gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis rmf rik bsb ecw jpeg2000 hdf4 gif jpeg png
> > > $ gdal-config --version
> > > 1.3.0
> > > 
> > > 
> > >   
> > > 
> > > _______________________________________________
> > > Gdal-dev mailing list
> > > Gdal-dev@lists.maptools.org
> > > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > > 
> > > 
> > 
> >   
> > 
> > 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From werchowyna at epf.pl  Thu Sep  1 16:15:53 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdalwarp doesn't honour my GCPs
Message-ID: <016301c5af32$f9677620$95e41d3e@eustahiush>

Dear All,

I have a tif+tfw file. It's georeferencing is *very* loose, so I added 118
GCPs *[1] and tried to gdalwarp it, using these GCPs, to correct the
georeferencing. However, gdalwarp outputs a clone of input file instead of
warping *[2]. You can see that corner coordinates of input and output are
identical, in spite of GCPs present in the input... What's wrong (with me?)?

If my input file with GCPs is needed for investigation, grab it here:
http://www.biol.uni.wroc.pl/sieczka/udostepnione/prochowice_z5_gdtr.tif.tar.bz2
(9,9 MB).

Thanks for any hints!

Cheers,
Maciek

[1]

[trawiarz@quercus ~]$ gdal_translate `cat GCPs.txt` prochowice_z5_gimp.tif
prochowice_z5_gdtr.tif
Input file size is 3334, 5568
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 6: SetColorTable() not supported for this dataset.

#     ^
#     |
#     that's another thing, I've filled a bug report on that today

[trawiarz@quercus ~]$ gdalinfo prochowice_z5_gdtr.tif
Driver: GTiff/GeoTIFF
Size is 3334, 5568
Coordinate System is `'
Origin = (5592805.032917,5686085.775819)
Pixel Size = (2.11666667,-2.11666667)
GCP Projection =
GCP[  0]: Id=1, Info=
          (5.594e+06,5.675e+06) -> (5.594e+06,5.675e+06,0)
GCP[  1]: Id=2, Info=
          (5.595e+06,5.67498e+06) -> (5.595e+06,5.675e+06,0)
GCP[  2]: Id=3, Info=
          (5.596e+06,5.67497e+06) -> (5.596e+06,5.675e+06,0)
GCP[  3]: Id=4, Info=
          (5.597e+06,5.67495e+06) -> (5.597e+06,5.675e+06,0)
GCP[  4]: Id=5, Info=
          (5.598e+06,5.67494e+06) -> (5.598e+06,5.675e+06,0)
GCP[  5]: Id=6, Info=
          (5.59901e+06,5.67492e+06) -> (5.599e+06,5.675e+06,0)
GCP[  6]: Id=7, Info=
          (5.59402e+06,5.676e+06) -> (5.594e+06,5.676e+06,0)
GCP[  7]: Id=8, Info=
          (5.59502e+06,5.67598e+06) -> (5.595e+06,5.676e+06,0)
GCP[  8]: Id=9, Info=
          (5.59602e+06,5.67597e+06) -> (5.596e+06,5.676e+06,0)
GCP[  9]: Id=10, Info=
          (5.59702e+06,5.67595e+06) -> (5.597e+06,5.676e+06,0)
GCP[ 10]: Id=11, Info=
          (5.59802e+06,5.67593e+06) -> (5.598e+06,5.676e+06,0)
GCP[ 11]: Id=12, Info=
          (5.59902e+06,5.67592e+06) -> (5.599e+06,5.676e+06,0)
GCP[ 12]: Id=13, Info=
          (5.59403e+06,5.677e+06) -> (5.594e+06,5.677e+06,0)
GCP[ 13]: Id=14, Info=
          (5.59503e+06,5.67698e+06) -> (5.595e+06,5.677e+06,0)
GCP[ 14]: Id=15, Info=
          (5.59604e+06,5.67696e+06) -> (5.596e+06,5.677e+06,0)
GCP[ 15]: Id=16, Info=
          (5.59704e+06,5.67695e+06) -> (5.597e+06,5.677e+06,0)
GCP[ 16]: Id=17, Info=
          (5.59804e+06,5.67693e+06) -> (5.598e+06,5.677e+06,0)
GCP[ 17]: Id=18, Info=
          (5.59904e+06,5.67692e+06) -> (5.599e+06,5.677e+06,0)
GCP[ 18]: Id=19, Info=
          (5.59405e+06,5.67799e+06) -> (5.594e+06,5.678e+06,0)
GCP[ 19]: Id=20, Info=
          (5.59505e+06,5.67798e+06) -> (5.595e+06,5.678e+06,0)
GCP[ 20]: Id=21, Info=
          (5.59605e+06,5.67796e+06) -> (5.596e+06,5.678e+06,0)
GCP[ 21]: Id=22, Info=
          (5.59706e+06,5.67795e+06) -> (5.597e+06,5.678e+06,0)
GCP[ 22]: Id=23, Info=
          (5.59805e+06,5.67793e+06) -> (5.598e+06,5.678e+06,0)
GCP[ 23]: Id=24, Info=
          (5.59906e+06,5.67791e+06) -> (5.599e+06,5.678e+06,0)
GCP[ 24]: Id=25, Info=
          (5.59406e+06,5.67899e+06) -> (5.594e+06,5.679e+06,0)
GCP[ 25]: Id=26, Info=
          (5.59507e+06,5.67897e+06) -> (5.595e+06,5.679e+06,0)
GCP[ 26]: Id=27, Info=
          (5.59607e+06,5.67896e+06) -> (5.596e+06,5.679e+06,0)
GCP[ 27]: Id=28, Info=
          (5.59707e+06,5.67894e+06) -> (5.597e+06,5.679e+06,0)
GCP[ 28]: Id=29, Info=
          (5.59807e+06,5.67892e+06) -> (5.598e+06,5.679e+06,0)
GCP[ 29]: Id=30, Info=
          (5.59908e+06,5.67891e+06) -> (5.599e+06,5.679e+06,0)
GCP[ 30]: Id=31, Info=
          (5.59408e+06,5.67998e+06) -> (5.594e+06,5.68e+06,0)
GCP[ 31]: Id=32, Info=
          (5.59508e+06,5.67996e+06) -> (5.595e+06,5.68e+06,0)
GCP[ 32]: Id=33, Info=
          (5.59608e+06,5.67994e+06) -> (5.596e+06,5.68e+06,0)
GCP[ 33]: Id=34, Info=
          (5.59709e+06,5.67993e+06) -> (5.597e+06,5.68e+06,0)
GCP[ 34]: Id=35, Info=
          (5.59809e+06,5.67991e+06) -> (5.598e+06,5.68e+06,0)
GCP[ 35]: Id=36, Info=
          (5.59909e+06,5.6799e+06) -> (5.599e+06,5.68e+06,0)
GCP[ 36]: Id=37, Info=
          (5.59409e+06,5.68098e+06) -> (5.594e+06,5.681e+06,0)
GCP[ 37]: Id=38, Info=
          (5.5951e+06,5.68096e+06) -> (5.595e+06,5.681e+06,0)
GCP[ 38]: Id=39, Info=
          (5.5961e+06,5.68094e+06) -> (5.596e+06,5.681e+06,0)
GCP[ 39]: Id=40, Info=
          (5.5971e+06,5.68092e+06) -> (5.597e+06,5.681e+06,0)
GCP[ 40]: Id=41, Info=
          (5.5981e+06,5.68091e+06) -> (5.598e+06,5.681e+06,0)
GCP[ 41]: Id=42, Info=
          (5.59911e+06,5.68089e+06) -> (5.599e+06,5.681e+06,0)
GCP[ 42]: Id=43, Info=
          (5.59411e+06,5.68197e+06) -> (5.594e+06,5.682e+06,0)
GCP[ 43]: Id=44, Info=
          (5.59511e+06,5.68196e+06) -> (5.595e+06,5.682e+06,0)
GCP[ 44]: Id=45, Info=
          (5.59611e+06,5.68194e+06) -> (5.596e+06,5.682e+06,0)
GCP[ 45]: Id=46, Info=
          (5.59712e+06,5.68192e+06) -> (5.597e+06,5.682e+06,0)
GCP[ 46]: Id=47, Info=
          (5.59812e+06,5.6819e+06) -> (5.598e+06,5.682e+06,0)
GCP[ 47]: Id=48, Info=
          (5.59912e+06,5.68189e+06) -> (5.599e+06,5.682e+06,0)
GCP[ 48]: Id=49, Info=
          (5.59412e+06,5.68297e+06) -> (5.594e+06,5.683e+06,0)
GCP[ 49]: Id=50, Info=
          (5.59513e+06,5.68296e+06) -> (5.595e+06,5.683e+06,0)
GCP[ 50]: Id=51, Info=
          (5.59613e+06,5.68294e+06) -> (5.596e+06,5.683e+06,0)
GCP[ 51]: Id=52, Info=
          (5.59713e+06,5.68292e+06) -> (5.597e+06,5.683e+06,0)
GCP[ 52]: Id=53, Info=
          (5.59813e+06,5.6829e+06) -> (5.598e+06,5.683e+06,0)
GCP[ 53]: Id=54, Info=
          (5.59914e+06,5.68289e+06) -> (5.599e+06,5.683e+06,0)
GCP[ 54]: Id=55, Info=
          (5.59414e+06,5.68397e+06) -> (5.594e+06,5.684e+06,0)
GCP[ 55]: Id=56, Info=
          (5.59514e+06,5.68395e+06) -> (5.595e+06,5.684e+06,0)
GCP[ 56]: Id=57, Info=
          (5.59614e+06,5.68394e+06) -> (5.596e+06,5.684e+06,0)
GCP[ 57]: Id=58, Info=
          (5.59715e+06,5.68392e+06) -> (5.597e+06,5.684e+06,0)
GCP[ 58]: Id=59, Info=
          (5.59815e+06,5.6839e+06) -> (5.598e+06,5.684e+06,0)
GCP[ 59]: Id=60, Info=
          (5.59915e+06,5.68389e+06) -> (5.599e+06,5.684e+06,0)
GCP[ 60]: Id=61, Info=
          (5.59415e+06,5.68497e+06) -> (5.594e+06,5.685e+06,0)
GCP[ 61]: Id=62, Info=
          (5.59516e+06,5.68495e+06) -> (5.595e+06,5.685e+06,0)
GCP[ 62]: Id=63, Info=
          (5.59616e+06,5.68493e+06) -> (5.596e+06,5.685e+06,0)
GCP[ 63]: Id=64, Info=
          (5.59716e+06,5.68492e+06) -> (5.597e+06,5.685e+06,0)
GCP[ 64]: Id=65, Info=
          (5.59816e+06,5.6849e+06) -> (5.598e+06,5.685e+06,0)
GCP[ 65]: Id=66, Info=
          (5.59917e+06,5.68489e+06) -> (5.599e+06,5.685e+06,0)
GCP[ 66]: Id=67, Info=
          (5.59318e+06,5.67462e+06) -> (5.59318e+06,5.6746e+06,0)
GCP[ 67]: Id=68, Info=
          (5.59314e+06,5.6857e+06) -> (5.59298e+06,5.68572e+06,0)
GCP[ 68]: Id=69, Info=
          (5.59399e+06,5.67462e+06) -> (5.594e+06,5.67461e+06,0)
GCP[ 69]: Id=70, Info=
          (5.595e+06,5.67462e+06) -> (5.595e+06,5.67463e+06,0)
GCP[ 70]: Id=71, Info=
          (5.596e+06,5.67463e+06) -> (5.596e+06,5.67465e+06,0)
GCP[ 71]: Id=72, Info=
          (5.597e+06,5.67463e+06) -> (5.597e+06,5.67467e+06,0)
GCP[ 72]: Id=73, Info=
          (5.598e+06,5.67463e+06) -> (5.598e+06,5.67469e+06,0)
GCP[ 73]: Id=74, Info=
          (5.599e+06,5.67464e+06) -> (5.599e+06,5.67471e+06,0)
GCP[ 74]: Id=75, Info=
          (5.59966e+06,5.67464e+06) -> (5.59966e+06,5.67472e+06,0)
GCP[ 75]: Id=76, Info=
          (5.59965e+06,5.6747e+06) -> (5.59965e+06,5.67479e+06,0)
GCP[ 76]: Id=77, Info=
          (5.59318e+06,5.67501e+06) -> (5.59317e+06,5.675e+06,0)
GCP[ 77]: Id=78, Info=
          (5.59965e+06,5.67491e+06) -> (5.59964e+06,5.675e+06,0)
GCP[ 78]: Id=79, Info=
          (5.59963e+06,5.6757e+06) -> (5.59961e+06,5.67579e+06,0)
GCP[ 79]: Id=80, Info=
          (5.59317e+06,5.67601e+06) -> (5.59316e+06,5.676e+06,0)
GCP[ 80]: Id=81, Info=
          (5.59963e+06,5.67591e+06) -> (5.5996e+06,5.676e+06,0)
GCP[ 81]: Id=82, Info=
          (5.59961e+06,5.6767e+06) -> (5.59957e+06,5.67679e+06,0)
GCP[ 82]: Id=83, Info=
          (5.59317e+06,5.67701e+06) -> (5.59314e+06,5.677e+06,0)
GCP[ 83]: Id=84, Info=
          (5.5996e+06,5.67691e+06) -> (5.59956e+06,5.677e+06,0)
GCP[ 84]: Id=85, Info=
          (5.59959e+06,5.67769e+06) -> (5.59953e+06,5.67779e+06,0)
GCP[ 85]: Id=86, Info=
          (5.59317e+06,5.67801e+06) -> (5.59312e+06,5.678e+06,0)
GCP[ 86]: Id=87, Info=
          (5.59958e+06,5.6779e+06) -> (5.59952e+06,5.678e+06,0)
GCP[ 87]: Id=88, Info=
          (5.59956e+06,5.67869e+06) -> (5.59949e+06,5.67879e+06,0)
GCP[ 88]: Id=89, Info=
          (5.59317e+06,5.679e+06) -> (5.5931e+06,5.679e+06,0)
GCP[ 89]: Id=90, Info=
          (5.59956e+06,5.6789e+06) -> (5.59948e+06,5.679e+06,0)
GCP[ 90]: Id=91, Info=
          (5.59954e+06,5.67968e+06) -> (5.59945e+06,5.67978e+06,0)
GCP[ 91]: Id=92, Info=
          (5.59316e+06,5.68e+06) -> (5.59308e+06,5.68e+06,0)
GCP[ 92]: Id=93, Info=
          (5.59953e+06,5.67989e+06) -> (5.59944e+06,5.68e+06,0)
GCP[ 93]: Id=94, Info=
          (5.59951e+06,5.68067e+06) -> (5.59941e+06,5.68078e+06,0)
GCP[ 94]: Id=95, Info=
          (5.59316e+06,5.68099e+06) -> (5.59306e+06,5.681e+06,0)
GCP[ 95]: Id=96, Info=
          (5.59951e+06,5.68089e+06) -> (5.5994e+06,5.681e+06,0)
GCP[ 96]: Id=97, Info=
          (5.59949e+06,5.68167e+06) -> (5.59937e+06,5.68178e+06,0)
GCP[ 97]: Id=98, Info=
          (5.59316e+06,5.68199e+06) -> (5.59305e+06,5.682e+06,0)
GCP[ 98]: Id=99, Info=
          (5.59948e+06,5.68189e+06) -> (5.59936e+06,5.682e+06,0)
GCP[ 99]: Id=100, Info=
          (5.59946e+06,5.68267e+06) -> (5.59933e+06,5.68278e+06,0)
GCP[100]: Id=101, Info=
          (5.59315e+06,5.68299e+06) -> (5.59303e+06,5.683e+06,0)
GCP[101]: Id=102, Info=
          (5.59945e+06,5.68288e+06) -> (5.59932e+06,5.683e+06,0)
GCP[102]: Id=103, Info=
          (5.59944e+06,5.68367e+06) -> (5.59929e+06,5.68378e+06,0)
GCP[103]: Id=104, Info=
          (5.59315e+06,5.68399e+06) -> (5.59301e+06,5.684e+06,0)
GCP[104]: Id=105, Info=
          (5.59943e+06,5.68388e+06) -> (5.59928e+06,5.684e+06,0)
GCP[105]: Id=106, Info=
          (5.59941e+06,5.68467e+06) -> (5.59924e+06,5.68478e+06,0)
GCP[106]: Id=107, Info=
          (5.59315e+06,5.68498e+06) -> (5.59299e+06,5.685e+06,0)
GCP[107]: Id=108, Info=
          (5.59315e+06,5.68498e+06) -> (5.593e+06,5.685e+06,0)
GCP[108]: Id=109, Info=
          (5.5994e+06,5.68488e+06) -> (5.59924e+06,5.685e+06,0)
GCP[109]: Id=110, Info=
          (5.59316e+06,5.6857e+06) -> (5.593e+06,5.68572e+06,0)
GCP[110]: Id=111, Info=
          (5.59417e+06,5.68571e+06) -> (5.594e+06,5.68574e+06,0)
GCP[111]: Id=112, Info=
          (5.59517e+06,5.68571e+06) -> (5.595e+06,5.68576e+06,0)
GCP[112]: Id=113, Info=
          (5.59617e+06,5.68571e+06) -> (5.596e+06,5.68578e+06,0)
GCP[113]: Id=114, Info=
          (5.59938e+06,5.68572e+06) -> (5.5992e+06,5.68584e+06,0)
GCP[114]: Id=115, Info=
          (5.59938e+06,5.68566e+06) -> (5.5992e+06,5.68578e+06,0)
GCP[115]: Id=116, Info=
          (5.59717e+06,5.68571e+06) -> (5.597e+06,5.6858e+06,0)
GCP[116]: Id=117, Info=
          (5.59817e+06,5.68571e+06) -> (5.598e+06,5.68582e+06,0)
GCP[117]: Id=118, Info=
          (5.59918e+06,5.68572e+06) -> (5.599e+06,5.68583e+06,0)
Metadata:
  TIFFTAG_DOCUMENTNAME=/home/trawiarz/prochowice_z5.tif
  TIFFTAG_XRESOLUTION=300
  TIFFTAG_YRESOLUTION=300
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  ( 5592805.033, 5686085.776)
Lower Left  ( 5592805.033, 5674300.176)
Upper Right ( 5599862.000, 5686085.776)
Lower Right ( 5599862.000, 5674300.176)
Center      ( 5596333.516, 5680192.976)
Band 1 Block=3334x2 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
  <snip>



[2]

[trawiarz@quercus ~]$ gdalwarp prochowice_z5_gdtr.tif
prochowice_z5_gdtr_gdwr.tif
Creating output file that is 3334P x 5568L.
:0...10...20...30...40...50...60...70...80...90...100 - done.

[trawiarz@quercus ~]$ gdalinfo prochowice_z5_gdtr_gdwr.tif
Driver: GTiff/GeoTIFF
Size is 3334, 5568
Coordinate System is `'
Origin = (5592805.032917,5686085.775819)
Pixel Size = (2.11666667,-2.11666667)
Corner Coordinates:
Upper Left  ( 5592805.033, 5686085.776)
Lower Left  ( 5592805.033, 5674300.176)
Upper Right ( 5599862.000, 5686085.776)
Lower Right ( 5599862.000, 5674300.176)
Center      ( 5596333.516, 5680192.976)
Band 1 Block=3334x2 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
  <snip>


From chrisg at biology.usu.edu  Thu Sep  1 17:31:05 2005
From: chrisg at biology.usu.edu (Chris Garrard)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] error creating gtiff
Message-ID: <B89F79C2B2CCFD4D9183A60092A975360725BC@bioserver.biology.usu.edu>

Hi,

I just compiled GDAL 1.3.0 on a Solaris 10 (sparc) box.  I used the
internal versions of libtiff, geotiff, etc, because it forced me to
(couldn't find the headers for external versions, even though they were
there).  Now I'm trying to use gdal_translate to create some geotiffs,
and it's failing.  I've tested a few other output types, and they work
fine.  Here's the message I'm getting:

earth2#  gdal_translate -of gtiff test.img test.tif
Input file size is 1599, 1817
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 4: `test.tif' not recognised as a supported file format.

ERROR 4: `test.tif' not recognised as a supported file format.

It actually creates a file of about the right size, but nothing will
open it.  Anyone have any ideas?

Thanks,
Chris


From Ken.Boss at dnr.state.mn.us  Thu Sep  1 18:39:10 2005
From: Ken.Boss at dnr.state.mn.us (Ken Boss)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] error creating gtiff
Message-ID: <s3173ce7.070@co5.dnr.state.mn.us>

>>> "Chris Garrard" <chrisg@biology.usu.edu> 9/1/2005 4:31 PM >>>
Hi,

I just compiled GDAL 1.3.0 on a Solaris 10 (sparc) box.  I used the
internal versions of libtiff, geotiff, etc, because it forced me to
(couldn't find the headers for external versions, even though they were
there).  Now I'm trying to use gdal_translate to create some geotiffs,
and it's failing.  I've tested a few other output types, and they work
fine.  Here's the message I'm getting:

earth2#  gdal_translate -of gtiff test.img test.tif
Input file size is 1599, 1817
0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 4: `test.tif' not recognised as a supported file format.

ERROR 4: `test.tif' not recognised as a supported file format.

It actually creates a file of about the right size, but nothing will
open it.  Anyone have any ideas?

Thanks,
Chris

*---------------------------------------------------------------------------------------

Chris--

I recently battled the exact same problem on a Solaris 8 sparc box, though I was intentionally trying to use the internal versions of libtiff/libgeotiff.  I ripped some hair out trying to find potentially conflicting tiff libs on the system, but to no avail.  

In the end I built and installed libtiff-3.7.3, then ran the GDAL configure script setting the --with-libtiff option to the location of the libtiff-3.7.3 install.  I had to manually add -I/path/to/libtiff/include to the CPPFLAGS line in GDALmake.opt before I could finally get it to build. That did the trick, though I'm still mystified as to what was going on in the first place.

HTH,

--Ken





From bill at binko.net  Fri Sep  2 02:06:28 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
In-Reply-To: <Pine.LNX.4.58.0509011539590.27858@fastcat.binko.net>
References: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11232F@uc-exh-2.liunet.edu>
	<Pine.LNX.4.58.0509011521540.26276@fastcat.binko.net>
	<Pine.LNX.4.58.0509011539590.27858@fastcat.binko.net>
Message-ID: <Pine.LNX.4.58.0509020139020.21151@fastcat.binko.net>


James, 

I have put together a collection of three fixes into a patch that might
get you through this.  Each one has reduced my hanging issues 
considerably, and I am now seeing my conversions progress.  There might be 
more, but for now I'm working.

I've included it below.  You can apply it with 
patch -p1 < patch.file
in your top-level ecw directory or 
patch -p2 < patch.file
from your Source directory.

I hope this helps.

Bill

diff -rc orig/Source/C/NCSEcw/NCSEcw/ncscbm.c ecw32beta/Source/C/NCSEcw/NCSEcw/ncscbm.c
*** orig/Source/C/NCSEcw/NCSEcw/ncscbm.c	2005-06-11 18:27:06.000000000 -0400
--- ecw32beta/Source/C/NCSEcw/NCSEcw/ncscbm.c	2005-09-01 18:27:39.762737634 -0400
***************
*** 1181,1189 ****
  	if(NCScbmGetFileBlockSizeLocal(pNCSFile, nBlock, &length, &offset)) {
  		QmfLevelStruct	*pTopQmf = pNCSFile->pTopQmf;		// we always go relative to the top level
  		UINT32  nPaddedLength = 1;
! 
! 		while(nPaddedLength < length) {
! 			nPaddedLength *= 2;
  		}
  		*pBlockLength = length;
  
--- 1181,1194 ----
  	if(NCScbmGetFileBlockSizeLocal(pNCSFile, nBlock, &length, &offset)) {
  		QmfLevelStruct	*pTopQmf = pNCSFile->pTopQmf;		// we always go relative to the top level
  		UINT32  nPaddedLength = 1;
! 		
! 		if (length %4 == 0) //on a word boundary
! 		{
! 			nPaddedLength = length;
! 		}
! 		else
! 		{
! 			nPaddedLength = (((int)(length/4)) + 1) *4;
  		}
  		*pBlockLength = length;
  
diff -rc orig/Source/C/NCSEcw/NCSEcw/NCSEcw.cpp ecw32beta/Source/C/NCSEcw/NCSEcw/NCSEcw.cpp
*** orig/Source/C/NCSEcw/NCSEcw/NCSEcw.cpp	2005-06-11 18:27:06.000000000 -0400
--- ecw32beta/Source/C/NCSEcw/NCSEcw/NCSEcw.cpp	2005-09-02 01:47:48.858287669 -0400
***************
*** 1019,1025 ****
  				NCSEcwStatsDecrement(&pNCSEcwInfo->pStatistics->nUnpackedBlocksCacheSize, pNextCachedBlock->nUnpackedECWBlockLength);
  				NCSEcwStatsUnLock();
  			}
! 			pNextCachedBlock = pNextCachedBlock->pNextCachedBlock;
  		}
  	}
  
--- 1019,1036 ----
  				NCSEcwStatsDecrement(&pNCSEcwInfo->pStatistics->nUnpackedBlocksCacheSize, pNextCachedBlock->nUnpackedECWBlockLength);
  				NCSEcwStatsUnLock();
  			}
! 			if (pNextCachedBlock == pNextCachedBlock->pNextCachedBlock)
! 			  {
! 			    /*Get rid of simple self-cycles here*/
! 			    pNextCachedBlock = NULL;
! 			  }
! 			else
! 			  {
! 			    /*And prevent bigger problems here*/
! 			    NCSFileCachedBlock *prevBlock = pNextCachedBlock;
! 			    pNextCachedBlock = pNextCachedBlock->pNextCachedBlock;
! 			    prevBlock->pNextCachedBlock = NULL; 
! 			  }
  		}
  	}
  
diff -rc orig/Source/C/NCSUtil/thread.c ecw32beta/Source/C/NCSUtil/thread.c
*** orig/Source/C/NCSUtil/thread.c	2005-05-24 09:37:20.000000000 -0400
--- ecw32beta/Source/C/NCSUtil/thread.c	2005-09-02 01:44:59.110019686 -0400
***************
*** 202,207 ****
--- 202,210 ----
  		NCSThreadInfo *pThreadInfo = (NCSThreadInfo*)NCSMalloc(sizeof(NCSThreadInfo), TRUE);
  
  		NCSMutexBegin(&mMutex);
+ 
+ 		pThreadInfo->bThreadRunning = FALSE; 
+ 
  		pThreadInfo->tid = tidNextTID++;
  		NCSMutexEnd(&mMutex);
  
***************
*** 271,276 ****
--- 274,282 ----
  	if( pThreadInfo ) {
  
  		NCSMutexBegin(&mMutex);
+ 
+ 		pThreadInfo->bThreadRunning = FALSE; 
+ 
  		pThreadInfo->tid = tidNextTID++;
  		NCSMutexEnd(&mMutex);
  
***************
*** 356,361 ****
--- 362,370 ----
  	NCSThreadInfo *pThreadInfo = (NCSThreadInfo*)NCSMalloc(sizeof(NCSThreadInfo), TRUE);
  
  	NCSMutexBegin(&mMutex);
+ 
+ 	pThreadInfo->bThreadRunning = FALSE; 
+ 
  	pThreadInfo->tid = tidNextTID++;
  	NCSMutexEnd(&mMutex);
  

From mn at blominfo.dk  Fri Sep  2 06:03:09 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Merging really large images to one huge
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E1DD@kernen.blomkbh.dk>

Hi there

 

I'm trying to merge some large tiles (~5gb) to one big image (~30gb)
using gdal_merge.py, before I can compile it to ECW.

Here is what happens, when only merging just two of the tiles:

 

D:\>python "c:\Program Files\FWTools0.9.9\bin\gdal_merge.py" -o 6220.tif
6220_1.tif 6220_2.tif

Traceback (most recent call last):

  File "c:\Program Files\FWTools0.9.9\bin\gdal_merge.py", line 468, in ?

    fi.copy_into( t_fh, band, band, nodata )

  File "c:\Program Files\FWTools0.9.9\bin\gdal_merge.py", line 285, in
copy_into

    nodata_arg )

  File "c:\Program Files\FWTools0.9.9\bin\gdal_merge.py", line 118, in
raster_copy

    t_xsize, t_ysize, t_band.DataType )

  File "C:\PROGRA~1\FWTOOL~1.9\pymod\gdal.py", line 845, in ReadRaster

    buf_xsize, buf_ysize,buf_type)

MemoryError

 

The tiles are spatially adjacent.

 

Any ideas are appreciated.

 

Best regards

/Morten Nielsen

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050902/fabfebab/attachment.html
From dem at acri-st.fr  Fri Sep  2 06:44:33 2005
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] New Resampling Algorithm
Message-ID: <6.1.1.1.0.20050902093021.024525d8@pop3>

Hi,

I want to implement an utility to reduce resolution of an image by 
averaging all input pixels contributing to one output pixel,
and I need use exactly the real contribution of each input pixel (may be a 
part of it if it is at the border of the input computed window 
corresponding to the output pixel coverage).

I've taken a look on the GDAL Warp API and the GDALWarpKernel class, to 
know if I can implement this as another resampling algorithm, as bilinear 
or bicubic,
but I'm not clear about the input pixels contribution : can I know in the 
resampling algorithm what are inputs pixels corresponding to one output 
pixel and how they contribute ?
I understand the density concept (float * 
GDALWarpKernel::pafUnifiedSrcDensity) is related to this, but not for one 
pixel, it is for all the chunk, isn't it ?

Do you think I can/should implement this algorithm as another resampling 
algorithm of the Warp API, or I've to develop a specific tool ? (note 
reprojection in't essential for me)


Thanks in advance for help,

Julien


From James.Browne at liu.edu  Fri Sep  2 09:59:54 2005
From: James.Browne at liu.edu (James Browne)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
Message-ID: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C112334@uc-exh-2.liunet.edu>

Bill,
  Thanks! I'll try them and get back to you. I should have a chance to dive into this later today and over the weekend.
                 Jim


-----Original Message-----
From: Bill Binko [mailto:bill@binko.net]
Sent: Fri 9/2/2005 2:06 AM
To: James Browne; Tom Lynch
Cc: GDAL Developer List
Subject: RE: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
 

James, 

I have put together a collection of three fixes into a patch that might
get you through this.  Each one has reduced my hanging issues 
considerably, and I am now seeing my conversions progress.  There might be 
more, but for now I'm working.

I've included it below.  You can apply it with 
patch -p1 < patch.file
in your top-level ecw directory or 
patch -p2 < patch.file
from your Source directory.

I hope this helps.

Bill

diff -rc orig/Source/C/NCSEcw/NCSEcw/ncscbm.c ecw32beta/Source/C/NCSEcw/NCSEcw/ncscbm.c
*** orig/Source/C/NCSEcw/NCSEcw/ncscbm.c	2005-06-11 18:27:06.000000000 -0400
--- ecw32beta/Source/C/NCSEcw/NCSEcw/ncscbm.c	2005-09-01 18:27:39.762737634 -0400
***************
*** 1181,1189 ****
  	if(NCScbmGetFileBlockSizeLocal(pNCSFile, nBlock, &length, &offset)) {
  		QmfLevelStruct	*pTopQmf = pNCSFile->pTopQmf;		// we always go relative to the top level
  		UINT32  nPaddedLength = 1;
! 
! 		while(nPaddedLength < length) {
! 			nPaddedLength *= 2;
  		}
  		*pBlockLength = length;
  
--- 1181,1194 ----
  	if(NCScbmGetFileBlockSizeLocal(pNCSFile, nBlock, &length, &offset)) {
  		QmfLevelStruct	*pTopQmf = pNCSFile->pTopQmf;		// we always go relative to the top level
  		UINT32  nPaddedLength = 1;
! 		
! 		if (length %4 == 0) //on a word boundary
! 		{
! 			nPaddedLength = length;
! 		}
! 		else
! 		{
! 			nPaddedLength = (((int)(length/4)) + 1) *4;
  		}
  		*pBlockLength = length;
  
diff -rc orig/Source/C/NCSEcw/NCSEcw/NCSEcw.cpp ecw32beta/Source/C/NCSEcw/NCSEcw/NCSEcw.cpp
*** orig/Source/C/NCSEcw/NCSEcw/NCSEcw.cpp	2005-06-11 18:27:06.000000000 -0400
--- ecw32beta/Source/C/NCSEcw/NCSEcw/NCSEcw.cpp	2005-09-02 01:47:48.858287669 -0400
***************
*** 1019,1025 ****
  				NCSEcwStatsDecrement(&pNCSEcwInfo->pStatistics->nUnpackedBlocksCacheSize, pNextCachedBlock->nUnpackedECWBlockLength);
  				NCSEcwStatsUnLock();
  			}
! 			pNextCachedBlock = pNextCachedBlock->pNextCachedBlock;
  		}
  	}
  
--- 1019,1036 ----
  				NCSEcwStatsDecrement(&pNCSEcwInfo->pStatistics->nUnpackedBlocksCacheSize, pNextCachedBlock->nUnpackedECWBlockLength);
  				NCSEcwStatsUnLock();
  			}
! 			if (pNextCachedBlock == pNextCachedBlock->pNextCachedBlock)
! 			  {
! 			    /*Get rid of simple self-cycles here*/
! 			    pNextCachedBlock = NULL;
! 			  }
! 			else
! 			  {
! 			    /*And prevent bigger problems here*/
! 			    NCSFileCachedBlock *prevBlock = pNextCachedBlock;
! 			    pNextCachedBlock = pNextCachedBlock->pNextCachedBlock;
! 			    prevBlock->pNextCachedBlock = NULL; 
! 			  }
  		}
  	}
  
diff -rc orig/Source/C/NCSUtil/thread.c ecw32beta/Source/C/NCSUtil/thread.c
*** orig/Source/C/NCSUtil/thread.c	2005-05-24 09:37:20.000000000 -0400
--- ecw32beta/Source/C/NCSUtil/thread.c	2005-09-02 01:44:59.110019686 -0400
***************
*** 202,207 ****
--- 202,210 ----
  		NCSThreadInfo *pThreadInfo = (NCSThreadInfo*)NCSMalloc(sizeof(NCSThreadInfo), TRUE);
  
  		NCSMutexBegin(&mMutex);
+ 
+ 		pThreadInfo->bThreadRunning = FALSE; 
+ 
  		pThreadInfo->tid = tidNextTID++;
  		NCSMutexEnd(&mMutex);
  
***************
*** 271,276 ****
--- 274,282 ----
  	if( pThreadInfo ) {
  
  		NCSMutexBegin(&mMutex);
+ 
+ 		pThreadInfo->bThreadRunning = FALSE; 
+ 
  		pThreadInfo->tid = tidNextTID++;
  		NCSMutexEnd(&mMutex);
  
***************
*** 356,361 ****
--- 362,370 ----
  	NCSThreadInfo *pThreadInfo = (NCSThreadInfo*)NCSMalloc(sizeof(NCSThreadInfo), TRUE);
  
  	NCSMutexBegin(&mMutex);
+ 
+ 	pThreadInfo->bThreadRunning = FALSE; 
+ 
  	pThreadInfo->tid = tidNextTID++;
  	NCSMutexEnd(&mMutex);
  

 


From Ken.Boss at dnr.state.mn.us  Fri Sep  2 10:34:57 2005
From: Ken.Boss at dnr.state.mn.us (Ken Boss)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Merging really large images to one huge
Message-ID: <s3181cd6.075@co5.dnr.state.mn.us>

>>> "Morten Nielsen" <mn@blominfo.dk> 9/2/2005 5:03 AM >>>
Hi there

I'm trying to merge some large tiles (~5gb) to one big image (~30gb)
using gdal_merge.py, before I can compile it to ECW.
Here is what happens, when only merging just two of the tiles:

 D:\>python "c:\Program Files\FWTools0.9.9\bin\gdal_merge.py" -o 6220.tif
6220_1.tif 6220_2.tif
Traceback (most recent call last):
  File "c:\Program Files\FWTools0.9.9\bin\gdal_merge.py", line 468, in ?
    fi.copy_into( t_fh, band, band, nodata )
  File "c:\Program Files\FWTools0.9.9\bin\gdal_merge.py", line 285, in
copy_into
    nodata_arg )
  File "c:\Program Files\FWTools0.9.9\bin\gdal_merge.py", line 118, in
raster_copy
    t_xsize, t_ysize, t_band.DataType )
  File "C:\PROGRA~1\FWTOOL~1.9\pymod\gdal.py", line 845, in ReadRaster
    buf_xsize, buf_ysize,buf_type)
MemoryError
 
The tiles are spatially adjacent.
 
Any ideas are appreciated.

Best regards
/Morten Nielsen

*------------------------------------------------------------------------------

Morten--

I think the problem here is that gdal_merge.py reads the entirety of each input file into memory before writing it to the output file.  Frank has recently added a -createonly switch to gdal_merge that will simply initialize the output file, allowing you to then employ the gdalwarp utility to mosaic your inputs into that output file.  See http://lists.maptools.org/pipermail/gdal-dev/2005-August/006221.html.

Another approach might be to skip the physical mosaicking of your inputs altogether, creating a VRT file to describe the mosaic instead, and then using that as input to gdal_translate to create your .ecw output.  I have successfully used this approach to create ~175000x225000 RGB ecw mosaics, but trying to push much beyond that has led to memory errors as well.

Gabriel Ebner posted a modified version of gdal_merge that will output VRT files a while back.  You can find it at http://lists.maptools.org/pipermail/gdal-dev/2005-May/005691.html.

HTH,

--Ken Boss
  MN DNR Forestry




From mn at blominfo.dk  Fri Sep  2 11:24:59 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Merging really large images to one huge
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E216@kernen.blomkbh.dk>

>I think the problem here is that gdal_merge.py reads the entirety of
each 
>input file into memory before writing it to the output file.  Frank has

>recently added a -createonly switch to gdal_merge that will simply 
>initialize the output file, allowing you to then employ the gdalwarp 
>utility to mosaic your inputs into that output file.  See
>http://lists.maptools.org/pipermail/gdal-dev/2005-August/006221.html.

So... what you're saying is that if I just have small input files, it
will work? I could just split them up in smaller pieces and merge these
together?

Best regards
/Morten




From frank.glandorf at gmail.com  Fri Sep  2 11:52:50 2005
From: frank.glandorf at gmail.com (Frank Glandorf)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] seamlessly joining USGS quadrangle tiffs
Message-ID: <43187552.1080309@gmail.com>

Thanks for the info about the missing .dll files. At risk of violating 
someone's copyright, I added them to the zip file containing the 
executables. I'll confess that beyond cygwin and mktools I know little 
about Windows programming.  I thought that using the -Bstatic link 
option would free the programs from shared object dependency but 
obviously not.

The source files should be the first couple links off, the following 
page. If not let me know.

http://members.iglou.com/glandorf/aetools/

The lack of support for scales 100k and 250k is just personal bias. I 
don't use them. It shouldn't be difficult to add support either by 
adding command line options or some hueristic which guesses the scale.

-Frank


From Ken.Boss at dnr.state.mn.us  Fri Sep  2 12:15:24 2005
From: Ken.Boss at dnr.state.mn.us (Ken Boss)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Merging really large images to one huge
Message-ID: <s3183472.022@co5.dnr.state.mn.us>

>>> "Morten Nielsen" <mn@blominfo.dk> 9/2/2005 10:24:59 AM >>>
>I think the problem here is that gdal_merge.py reads the entirety of
each 
>input file into memory before writing it to the output file.  Frank has

>recently added a -createonly switch to gdal_merge that will simply 
>initialize the output file, allowing you to then employ the gdalwarp 
>utility to mosaic your inputs into that output file.  See
>http://lists.maptools.org/pipermail/gdal-dev/2005-August/006221.html.

So... what you're saying is that if I just have small input files, it
will work? I could just split them up in smaller pieces and merge these
together?

Best regards
/Morten

---------------------------------------------------------

Morten--

I would expect that approach to work.  As long as your input files can fit one-at-a-time into system RAM, you wouldn't need to bother with the -createonly switch and gdalwarp, you should be able to just use gdal_merge.py as you had originally intended.

Cheers,

--Ken



From chrisg at biology.usu.edu  Fri Sep  2 18:45:02 2005
From: chrisg at biology.usu.edu (Chris Garrard)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] error creating gtiff
Message-ID: <B89F79C2B2CCFD4D9183A60092A975360725CD@bioserver.biology.usu.edu>

Thanks, Ken, but I still can't get it to work.  I did get it to build
using the external libtiff 3.7.3 by changing GDALmake.opt, but I'm still
getting the same error when I try to create a geotiff.

I tried building version 1.2.6 and it compiled fine, but it doesn't
work, either.  So then I tried version 1.1.9, because that's what we had
installed on our old machine, and it seems to work fine.  I'd still like
to get a newer version working, but at least we're up and running for
now...

Chris

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ken Boss
> Sent: Thursday, September 01, 2005 3:39 PM
> To: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] error creating gtiff
> 
> >>> "Chris Garrard" <chrisg@biology.usu.edu> 9/1/2005 4:31 PM >>>
> Hi,
> 
> I just compiled GDAL 1.3.0 on a Solaris 10 (sparc) box.  I used the
> internal versions of libtiff, geotiff, etc, because it forced me to
> (couldn't find the headers for external versions, even though 
> they were
> there).  Now I'm trying to use gdal_translate to create some geotiffs,
> and it's failing.  I've tested a few other output types, and they work
> fine.  Here's the message I'm getting:
> 
> earth2#  gdal_translate -of gtiff test.img test.tif
> Input file size is 1599, 1817
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 4: `test.tif' not recognised as a supported file format.
> 
> ERROR 4: `test.tif' not recognised as a supported file format.
> 
> It actually creates a file of about the right size, but nothing will
> open it.  Anyone have any ideas?
> 
> Thanks,
> Chris
> 
> *-------------------------------------------------------------
> --------------------------
> 
> Chris--
> 
> I recently battled the exact same problem on a Solaris 8 
> sparc box, though I was intentionally trying to use the 
> internal versions of libtiff/libgeotiff.  I ripped some hair 
> out trying to find potentially conflicting tiff libs on the 
> system, but to no avail.  
> 
> In the end I built and installed libtiff-3.7.3, then ran the 
> GDAL configure script setting the --with-libtiff option to 
> the location of the libtiff-3.7.3 install.  I had to manually 
> add -I/path/to/libtiff/include to the CPPFLAGS line in 
> GDALmake.opt before I could finally get it to build. That did 
> the trick, though I'm still mystified as to what was going on 
> in the first place.
> 
> HTH,
> 
> --Ken
> 
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From stsyo3lwdia4 at vexcel.com  Fri Sep  2 19:27:13 2005
From: stsyo3lwdia4 at vexcel.com (Steve Soule)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Changing How GDAL Reports Errors
Message-ID: <4318DFD1.4070601@vexcel.com>

I'm posting this to the gdal-dev list to see what people think of
the possibility of changing how GDAL reports errors.

Currently, GDAL uses a mixture of four error reporting mechanisms:

1.  Many functions return an error code indicating that an error
occurred.  This error code is nothing more than a flag that indicates
whether or not an error occurred.  Checking this error flag is the
primary way of determining whether an operation succeeded or failed.

2.  More detailed information about errors is stored in
thread-local global variables that are accessed with the functions
CPLGetLastErrorNo, CPLGetLastErrorType, and CPLGetLastErrorMsg.
The "error type" is usually CE_Failure.  The "error number" is one
of a small number of codes such as CPLE_OutOfMemory or CPLE_FileIO.
The "error message" contains the real information about where the
error occurred and what it means.

3.  When an error occurs--before control is returned to the
caller--an error handler function is called.  This error handler
function is set with CPLSetErrorHandler.  The default error handler
CPLDefaultErrorHandler prints the error message to stderr.  Two other
error handler functions provided by GDAL are CPLQuietErrorHandler
and CPLLoggingErrorHandler.  The actions that can be taken in the
error handler function are very limited; in particular, you can't
translate the error into a thrown exception.  So you have little
choice but to pick one of the three provided error handler functions.
The error handler mechanism requires thread-local storage.

4.  For some errors, rather than use the normal mixture of the above
three techniques, GDAL throws an exception, usually std::bad_alloc.

For warnings, only the error handler function is used.  So if you want
to do anything other than print warnings to stderr, send them to a
log file, or ignore them, you have to write your own error handler
function that stores warnings in a thread-local global buffer, and
check the buffer when control returns to the caller.

GDAL also has "fatal" errors that never return control to the caller.
These errors are always reported to the error handler, but no matter
what the error handler does with them, the program is aborted.

I propose to change this error reporting mechanism to the following
mechanism:

The C and C++ APIs would have different error reporting mechanisms,
and the warning reporting mechanism would be different from the error
reporting mechanism.

The C++ API would throw exceptions.  Except for std::bad_alloc for
memory allocation errors, it would only throw exceptions of type
"CPLErrorRecord", which would be a data structure containing
the information currently returned by CPLGetLastErrorNo,
CPLGetLastErrorType, and CPLGetLastErrorMsg.

The C API would use just the "return an error code" mechanism.
Every C API function that can fail would be modified to take an extra
parameter, a pointer to a "CPLErrorRecord".  If an error occurs,
the error record would indicate it and have complete information
about the error.

Warnings would be stored in a "CPLWarningRecord" data structure.
Any API function that could emit a warning would have an extra
parameter added, which would be a pointer to a "CPLWarningRecord"
object.

"Fatal" errors are bad, but unavoidable in some circumstances.
These would be converted to exceptions whereever possible.  If there
are any fatal errors that can't be converted to exceptions, they
would just call abort directly (which is what "assert" does).

(I'm not committed to the details of the above mechanism.  A different
mechanism would be acceptable to me if it had the same advantages
over the current mechanism.)

This error reporting mechanism would have the following advantages
over the existing mechanism:

1.  For languages such as C++ that have exception handling, dealing
with errors would be much easier for the standard reasons:

1.a.  Exceptions can't be silently ignored.  This makes exceptions
less error-prone than other mechanisms:  the programmer can not,
through accident or laziness, fail to deal with an exception.

1.b.  Exceptions propagate automatically.  Exceptions need only be
caught and handled in the appropriate place, which could be just one
place for the entire program.  With error codes, every function call
that can return an error code must have that error code checked,
and possibly propagated to the caller.

1.c.  Exception handling removes error handling and recovery from the
main line of control flow.  With error codes, error handling must be
interspersed with the code that executes in the absence of errors.
With exceptions, error handling is done is separate blocks of code.
This makes the code better organized, easier to read, and simpler.

1.d.  Exceptions can be used to report errors even in functions that
can't return an error code, such as operators and constructors.

For more on why exceptions are generally better than the other known
methods of reporting errors, see "C++ Coding Standards" item 72 or
"The C++ Programming Language, special 3rd edition", section 14.1.

2.  I don't know much about GDAL's interfaces to other languages such
as Python, but I think it's likely that for those language bindings
that use SWIG, exception-based error handling is much easier to
implement and use than GDAL's current mechanism.

3.  For languages such as C that don't have exception handling,
returning error codes is the best known way of reporting errors.
Reporting errors using a "CPLErrorRecord" data structure is simpler
than the current mechanism because all information about the error is
in one place.  Also, it's easier to deal with just one mechanism (error
codes) rather than a mixture of three mechanisms.  (Errors reported
using the fourth current mechanism will cause a C program to crash.)

4.  The current mechanism relies heavily on thread-local storage.
This is an advanced threading technique that has poor support on many
current OSs, including Windows.

5.  In the current mechanism, it is very difficult to do anything
with warnings other than send them to stderr or a log file.
This is unacceptable for programs with a graphical user interface.
Explicitly passing in a pointer to a record in which to store warnings
would make it easy to do anything with warnings.

6.  Using exception handling internally would simplify GDAL's guts.
GDAL would be more robust and maintainable.  The reasons are the same
as for reason 1 above.

Here are the costs of making this change that I can see:

1.  Any C or C++ client code would need to be changed.  However,
the changes would be minor, and would generally tend to improve the
quality of the client code.  I don't know if client code in other
languages such as Python would need to change; I doubt it.

2.  It would need to be implemented.  I would be willing to do this
work.  I believe the implementation can be organized into a sequence
of minor changes, so that (hopefully) at no time will GDAL be in a
"broken" state.  The biggest "break" would consist of flipping a
switch to turn exceptions on.

Does anyone see any other costs worth mentioning?  Does anyone feel
that either of these costs is a show-stopper?  Does anyone see any
changes they would like to make to the proposed new mechanism?


From bill at binko.net  Fri Sep  2 21:33:45 2005
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Changing How GDAL Reports Errors
In-Reply-To: <4318DFD1.4070601@vexcel.com>
References: <4318DFD1.4070601@vexcel.com>
Message-ID: <Pine.LNX.4.58.0509021942480.4730@fastcat.binko.net>

On Fri, 2 Sep 2005, Steve Soule wrote:

> I'm posting this to the gdal-dev list to see what people think of
> the possibility of changing how GDAL reports errors.

I'd like to start with a warning: Frank W. is on vacation and may not 
reply for some time.  I would be very careful to not move on this until he 
gets back and has time to respond.  In fact, I think waiting until he's 
back and reposting this might not be a bad idea.

That being said, I have a few comments.

1) Your benefits about exception handling are well founded, and I agree.  
If a refactor of this takes place, making the C++ mechanism very similar 
to what you have below makes sense.

2) Making it easier to write effective Error Handlers may be valuable, and 
should not introduce any backward incompatibilities.

3) The places where you've found the code throws exceptions (and blows up
C code) should obviously be fixed.  I believe most would agree that this 
is a bug and not a flaw in the design.

However, I would not discount the drawback of "C/C++ client code would 
need to be changed."  I have watched a similar debate on IRC about how 
reference counting is managed, and I agree with Frank that a stable API is 
a very (very) valuable commodity.  That is doubly true with an abstraction 
layer such as GDAL.  People expect a stable target so that they are 
insulated from the various versions of the various libraries beneath GDAL.

Luckily, if you personally value elegance over API stability, you don't
have to agree with Frank's decision (if he doesn't want to disrupt client
code).  As I said during that ref-counting debate, there are a great many 
options open to you given how Frank has licensed this code.

Personally, I am not aware of the problems with thread-locality on 
Windows.  I'd be curious to see what problems you're seeing in that area, 
as my primary platform is Linux, but I'll need to be porting eventually.

Finally, I might suggest a small change to your suggestions that might
make them more palatable on the C side.  Instead of adding parameters for
Errors and Warnings, you might consider simply returning a pointer to a
structure with the errors or warnings if an error occurs, and a NULL value
if they don't.  That will allow code that looks like this:

if (someCallThatReturnsZeroOnFailure(param1, param2) != 0)
{
  handleFailure();
}

to have very little structural change and still have the ability to get 
the benefits of your changes.  It requires a choice on how to do 
allocation, etc., but requires smaller changes in the API.

I hope this helps,

Bill


From ari.jolma at tkk.fi  Mon Sep  5 02:00:54 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Accessing polygon data through the scripting interface
Message-ID: <431BDF16.2050306@tkk.fi>

Hello,

I saw some discussion on this subject earlier on this list 
(http://lists.maptools.org/pipermail/gdal-dev/2005-February/005109.html) 
but I think it's still impossible(?) to access the polygon data (rings 
and then vertices) through the scripting interface.

I see that the OO interface for scripting languages is done using the C 
(not C++) api (ogr_api.h etc). The interface is rewritten into C++ in 
ogr.i but without subclasses of OGRGeometry like OGRPolygon. Some of the 
subclass methods are written into the C API but not all. Shouldn't also 
the OGRPolygon methods Get*Ring be wrapped into OGRGeometry? In fact I 
tried this and with these in place one is able to do things like this 
(in Perl but the small changes I had to make were not Perl specific):

$geom = $feature->GetGeometryRef();
$ring = $geom->GetExteriorRing(); # assuming geom is polygon...
$ring->GetX(10);

Methods GetPoint(int) and GetPoints would be useful also.

These may be implemented in ogr_api.cpp (then they are available in the 
C interface) or in ogr.i. GetPoint(int) is in ogr_api.cpp but not in ogr.i.

Ari


From vincent at ecovla.nl  Mon Sep  5 02:46:45 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdalwarp doesn't honour my GCPs
In-Reply-To: <016301c5af32$f9677620$95e41d3e@eustahiush>
References: <016301c5af32$f9677620$95e41d3e@eustahiush>
Message-ID: <431BE9D5.9030700@ecovla.nl>

Maciek Sieczka wrote:
> Dear All,
> 
> I have a tif+tfw file. It's georeferencing is *very* loose, so I added 118
> GCPs *[1] and tried to gdalwarp it, using these GCPs, to correct the
> georeferencing. However, gdalwarp outputs a clone of input file instead of
> warping *[2]. You can see that corner coordinates of input and output are
> identical, in spite of GCPs present in the input... What's wrong (with
> me?)?

Maciek,

have you tried it without the tfw file? The presence of a tfw file might
well get in the way of your gcp's, as the tfw file already gives your
image its corner points. I'd say, rename your tfw file to .tfw.bak or
something, and try gdalwarp again.

Good luck,
Vincent.

> 
> If my input file with GCPs is needed for investigation, grab it here:
> http://www.biol.uni.wroc.pl/sieczka/udostepnione/prochowice_z5_gdtr.tif.tar.bz2
> 
> (9,9 MB).
> 
> Thanks for any hints!
> 
> Cheers,
> Maciek
> 
> [1]
> 
> [trawiarz@quercus ~]$ gdal_translate `cat GCPs.txt` prochowice_z5_gimp.tif
> prochowice_z5_gdtr.tif
> Input file size is 3334, 5568
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 6: SetColorTable() not supported for this dataset.
> 
> #     ^
> #     |
> #     that's another thing, I've filled a bug report on that today
> 
> [trawiarz@quercus ~]$ gdalinfo prochowice_z5_gdtr.tif
> Driver: GTiff/GeoTIFF
> Size is 3334, 5568
> Coordinate System is `'
> Origin = (5592805.032917,5686085.775819)
> Pixel Size = (2.11666667,-2.11666667)
> GCP Projection =
> GCP[  0]: Id=1, Info=
>          (5.594e+06,5.675e+06) -> (5.594e+06,5.675e+06,0)
> GCP[  1]: Id=2, Info=
>          (5.595e+06,5.67498e+06) -> (5.595e+06,5.675e+06,0)
> GCP[  2]: Id=3, Info=
>          (5.596e+06,5.67497e+06) -> (5.596e+06,5.675e+06,0)
> GCP[  3]: Id=4, Info=
>          (5.597e+06,5.67495e+06) -> (5.597e+06,5.675e+06,0)
> GCP[  4]: Id=5, Info=
>          (5.598e+06,5.67494e+06) -> (5.598e+06,5.675e+06,0)
> GCP[  5]: Id=6, Info=
>          (5.59901e+06,5.67492e+06) -> (5.599e+06,5.675e+06,0)
> GCP[  6]: Id=7, Info=
>          (5.59402e+06,5.676e+06) -> (5.594e+06,5.676e+06,0)
> GCP[  7]: Id=8, Info=
>          (5.59502e+06,5.67598e+06) -> (5.595e+06,5.676e+06,0)
> GCP[  8]: Id=9, Info=
>          (5.59602e+06,5.67597e+06) -> (5.596e+06,5.676e+06,0)
> GCP[  9]: Id=10, Info=
>          (5.59702e+06,5.67595e+06) -> (5.597e+06,5.676e+06,0)
> GCP[ 10]: Id=11, Info=
>          (5.59802e+06,5.67593e+06) -> (5.598e+06,5.676e+06,0)
> GCP[ 11]: Id=12, Info=
>          (5.59902e+06,5.67592e+06) -> (5.599e+06,5.676e+06,0)
> GCP[ 12]: Id=13, Info=
>          (5.59403e+06,5.677e+06) -> (5.594e+06,5.677e+06,0)
> GCP[ 13]: Id=14, Info=
>          (5.59503e+06,5.67698e+06) -> (5.595e+06,5.677e+06,0)
> GCP[ 14]: Id=15, Info=
>          (5.59604e+06,5.67696e+06) -> (5.596e+06,5.677e+06,0)
> GCP[ 15]: Id=16, Info=
>          (5.59704e+06,5.67695e+06) -> (5.597e+06,5.677e+06,0)
> GCP[ 16]: Id=17, Info=
>          (5.59804e+06,5.67693e+06) -> (5.598e+06,5.677e+06,0)
> GCP[ 17]: Id=18, Info=
>          (5.59904e+06,5.67692e+06) -> (5.599e+06,5.677e+06,0)
> GCP[ 18]: Id=19, Info=
>          (5.59405e+06,5.67799e+06) -> (5.594e+06,5.678e+06,0)
> GCP[ 19]: Id=20, Info=
>          (5.59505e+06,5.67798e+06) -> (5.595e+06,5.678e+06,0)
> GCP[ 20]: Id=21, Info=
>          (5.59605e+06,5.67796e+06) -> (5.596e+06,5.678e+06,0)
> GCP[ 21]: Id=22, Info=
>          (5.59706e+06,5.67795e+06) -> (5.597e+06,5.678e+06,0)
> GCP[ 22]: Id=23, Info=
>          (5.59805e+06,5.67793e+06) -> (5.598e+06,5.678e+06,0)
> GCP[ 23]: Id=24, Info=
>          (5.59906e+06,5.67791e+06) -> (5.599e+06,5.678e+06,0)
> GCP[ 24]: Id=25, Info=
>          (5.59406e+06,5.67899e+06) -> (5.594e+06,5.679e+06,0)
> GCP[ 25]: Id=26, Info=
>          (5.59507e+06,5.67897e+06) -> (5.595e+06,5.679e+06,0)
> GCP[ 26]: Id=27, Info=
>          (5.59607e+06,5.67896e+06) -> (5.596e+06,5.679e+06,0)
> GCP[ 27]: Id=28, Info=
>          (5.59707e+06,5.67894e+06) -> (5.597e+06,5.679e+06,0)
> GCP[ 28]: Id=29, Info=
>          (5.59807e+06,5.67892e+06) -> (5.598e+06,5.679e+06,0)
> GCP[ 29]: Id=30, Info=
>          (5.59908e+06,5.67891e+06) -> (5.599e+06,5.679e+06,0)
> GCP[ 30]: Id=31, Info=
>          (5.59408e+06,5.67998e+06) -> (5.594e+06,5.68e+06,0)
> GCP[ 31]: Id=32, Info=
>          (5.59508e+06,5.67996e+06) -> (5.595e+06,5.68e+06,0)
> GCP[ 32]: Id=33, Info=
>          (5.59608e+06,5.67994e+06) -> (5.596e+06,5.68e+06,0)
> GCP[ 33]: Id=34, Info=
>          (5.59709e+06,5.67993e+06) -> (5.597e+06,5.68e+06,0)
> GCP[ 34]: Id=35, Info=
>          (5.59809e+06,5.67991e+06) -> (5.598e+06,5.68e+06,0)
> GCP[ 35]: Id=36, Info=
>          (5.59909e+06,5.6799e+06) -> (5.599e+06,5.68e+06,0)
> GCP[ 36]: Id=37, Info=
>          (5.59409e+06,5.68098e+06) -> (5.594e+06,5.681e+06,0)
> GCP[ 37]: Id=38, Info=
>          (5.5951e+06,5.68096e+06) -> (5.595e+06,5.681e+06,0)
> GCP[ 38]: Id=39, Info=
>          (5.5961e+06,5.68094e+06) -> (5.596e+06,5.681e+06,0)
> GCP[ 39]: Id=40, Info=
>          (5.5971e+06,5.68092e+06) -> (5.597e+06,5.681e+06,0)
> GCP[ 40]: Id=41, Info=
>          (5.5981e+06,5.68091e+06) -> (5.598e+06,5.681e+06,0)
> GCP[ 41]: Id=42, Info=
>          (5.59911e+06,5.68089e+06) -> (5.599e+06,5.681e+06,0)
> GCP[ 42]: Id=43, Info=
>          (5.59411e+06,5.68197e+06) -> (5.594e+06,5.682e+06,0)
> GCP[ 43]: Id=44, Info=
>          (5.59511e+06,5.68196e+06) -> (5.595e+06,5.682e+06,0)
> GCP[ 44]: Id=45, Info=
>          (5.59611e+06,5.68194e+06) -> (5.596e+06,5.682e+06,0)
> GCP[ 45]: Id=46, Info=
>          (5.59712e+06,5.68192e+06) -> (5.597e+06,5.682e+06,0)
> GCP[ 46]: Id=47, Info=
>          (5.59812e+06,5.6819e+06) -> (5.598e+06,5.682e+06,0)
> GCP[ 47]: Id=48, Info=
>          (5.59912e+06,5.68189e+06) -> (5.599e+06,5.682e+06,0)
> GCP[ 48]: Id=49, Info=
>          (5.59412e+06,5.68297e+06) -> (5.594e+06,5.683e+06,0)
> GCP[ 49]: Id=50, Info=
>          (5.59513e+06,5.68296e+06) -> (5.595e+06,5.683e+06,0)
> GCP[ 50]: Id=51, Info=
>          (5.59613e+06,5.68294e+06) -> (5.596e+06,5.683e+06,0)
> GCP[ 51]: Id=52, Info=
>          (5.59713e+06,5.68292e+06) -> (5.597e+06,5.683e+06,0)
> GCP[ 52]: Id=53, Info=
>          (5.59813e+06,5.6829e+06) -> (5.598e+06,5.683e+06,0)
> GCP[ 53]: Id=54, Info=
>          (5.59914e+06,5.68289e+06) -> (5.599e+06,5.683e+06,0)
> GCP[ 54]: Id=55, Info=
>          (5.59414e+06,5.68397e+06) -> (5.594e+06,5.684e+06,0)
> GCP[ 55]: Id=56, Info=
>          (5.59514e+06,5.68395e+06) -> (5.595e+06,5.684e+06,0)
> GCP[ 56]: Id=57, Info=
>          (5.59614e+06,5.68394e+06) -> (5.596e+06,5.684e+06,0)
> GCP[ 57]: Id=58, Info=
>          (5.59715e+06,5.68392e+06) -> (5.597e+06,5.684e+06,0)
> GCP[ 58]: Id=59, Info=
>          (5.59815e+06,5.6839e+06) -> (5.598e+06,5.684e+06,0)
> GCP[ 59]: Id=60, Info=
>          (5.59915e+06,5.68389e+06) -> (5.599e+06,5.684e+06,0)
> GCP[ 60]: Id=61, Info=
>          (5.59415e+06,5.68497e+06) -> (5.594e+06,5.685e+06,0)
> GCP[ 61]: Id=62, Info=
>          (5.59516e+06,5.68495e+06) -> (5.595e+06,5.685e+06,0)
> GCP[ 62]: Id=63, Info=
>          (5.59616e+06,5.68493e+06) -> (5.596e+06,5.685e+06,0)
> GCP[ 63]: Id=64, Info=
>          (5.59716e+06,5.68492e+06) -> (5.597e+06,5.685e+06,0)
> GCP[ 64]: Id=65, Info=
>          (5.59816e+06,5.6849e+06) -> (5.598e+06,5.685e+06,0)
> GCP[ 65]: Id=66, Info=
>          (5.59917e+06,5.68489e+06) -> (5.599e+06,5.685e+06,0)
> GCP[ 66]: Id=67, Info=
>          (5.59318e+06,5.67462e+06) -> (5.59318e+06,5.6746e+06,0)
> GCP[ 67]: Id=68, Info=
>          (5.59314e+06,5.6857e+06) -> (5.59298e+06,5.68572e+06,0)
> GCP[ 68]: Id=69, Info=
>          (5.59399e+06,5.67462e+06) -> (5.594e+06,5.67461e+06,0)
> GCP[ 69]: Id=70, Info=
>          (5.595e+06,5.67462e+06) -> (5.595e+06,5.67463e+06,0)
> GCP[ 70]: Id=71, Info=
>          (5.596e+06,5.67463e+06) -> (5.596e+06,5.67465e+06,0)
> GCP[ 71]: Id=72, Info=
>          (5.597e+06,5.67463e+06) -> (5.597e+06,5.67467e+06,0)
> GCP[ 72]: Id=73, Info=
>          (5.598e+06,5.67463e+06) -> (5.598e+06,5.67469e+06,0)
> GCP[ 73]: Id=74, Info=
>          (5.599e+06,5.67464e+06) -> (5.599e+06,5.67471e+06,0)
> GCP[ 74]: Id=75, Info=
>          (5.59966e+06,5.67464e+06) -> (5.59966e+06,5.67472e+06,0)
> GCP[ 75]: Id=76, Info=
>          (5.59965e+06,5.6747e+06) -> (5.59965e+06,5.67479e+06,0)
> GCP[ 76]: Id=77, Info=
>          (5.59318e+06,5.67501e+06) -> (5.59317e+06,5.675e+06,0)
> GCP[ 77]: Id=78, Info=
>          (5.59965e+06,5.67491e+06) -> (5.59964e+06,5.675e+06,0)
> GCP[ 78]: Id=79, Info=
>          (5.59963e+06,5.6757e+06) -> (5.59961e+06,5.67579e+06,0)
> GCP[ 79]: Id=80, Info=
>          (5.59317e+06,5.67601e+06) -> (5.59316e+06,5.676e+06,0)
> GCP[ 80]: Id=81, Info=
>          (5.59963e+06,5.67591e+06) -> (5.5996e+06,5.676e+06,0)
> GCP[ 81]: Id=82, Info=
>          (5.59961e+06,5.6767e+06) -> (5.59957e+06,5.67679e+06,0)
> GCP[ 82]: Id=83, Info=
>          (5.59317e+06,5.67701e+06) -> (5.59314e+06,5.677e+06,0)
> GCP[ 83]: Id=84, Info=
>          (5.5996e+06,5.67691e+06) -> (5.59956e+06,5.677e+06,0)
> GCP[ 84]: Id=85, Info=
>          (5.59959e+06,5.67769e+06) -> (5.59953e+06,5.67779e+06,0)
> GCP[ 85]: Id=86, Info=
>          (5.59317e+06,5.67801e+06) -> (5.59312e+06,5.678e+06,0)
> GCP[ 86]: Id=87, Info=
>          (5.59958e+06,5.6779e+06) -> (5.59952e+06,5.678e+06,0)
> GCP[ 87]: Id=88, Info=
>          (5.59956e+06,5.67869e+06) -> (5.59949e+06,5.67879e+06,0)
> GCP[ 88]: Id=89, Info=
>          (5.59317e+06,5.679e+06) -> (5.5931e+06,5.679e+06,0)
> GCP[ 89]: Id=90, Info=
>          (5.59956e+06,5.6789e+06) -> (5.59948e+06,5.679e+06,0)
> GCP[ 90]: Id=91, Info=
>          (5.59954e+06,5.67968e+06) -> (5.59945e+06,5.67978e+06,0)
> GCP[ 91]: Id=92, Info=
>          (5.59316e+06,5.68e+06) -> (5.59308e+06,5.68e+06,0)
> GCP[ 92]: Id=93, Info=
>          (5.59953e+06,5.67989e+06) -> (5.59944e+06,5.68e+06,0)
> GCP[ 93]: Id=94, Info=
>          (5.59951e+06,5.68067e+06) -> (5.59941e+06,5.68078e+06,0)
> GCP[ 94]: Id=95, Info=
>          (5.59316e+06,5.68099e+06) -> (5.59306e+06,5.681e+06,0)
> GCP[ 95]: Id=96, Info=
>          (5.59951e+06,5.68089e+06) -> (5.5994e+06,5.681e+06,0)
> GCP[ 96]: Id=97, Info=
>          (5.59949e+06,5.68167e+06) -> (5.59937e+06,5.68178e+06,0)
> GCP[ 97]: Id=98, Info=
>          (5.59316e+06,5.68199e+06) -> (5.59305e+06,5.682e+06,0)
> GCP[ 98]: Id=99, Info=
>          (5.59948e+06,5.68189e+06) -> (5.59936e+06,5.682e+06,0)
> GCP[ 99]: Id=100, Info=
>          (5.59946e+06,5.68267e+06) -> (5.59933e+06,5.68278e+06,0)
> GCP[100]: Id=101, Info=
>          (5.59315e+06,5.68299e+06) -> (5.59303e+06,5.683e+06,0)
> GCP[101]: Id=102, Info=
>          (5.59945e+06,5.68288e+06) -> (5.59932e+06,5.683e+06,0)
> GCP[102]: Id=103, Info=
>          (5.59944e+06,5.68367e+06) -> (5.59929e+06,5.68378e+06,0)
> GCP[103]: Id=104, Info=
>          (5.59315e+06,5.68399e+06) -> (5.59301e+06,5.684e+06,0)
> GCP[104]: Id=105, Info=
>          (5.59943e+06,5.68388e+06) -> (5.59928e+06,5.684e+06,0)
> GCP[105]: Id=106, Info=
>          (5.59941e+06,5.68467e+06) -> (5.59924e+06,5.68478e+06,0)
> GCP[106]: Id=107, Info=
>          (5.59315e+06,5.68498e+06) -> (5.59299e+06,5.685e+06,0)
> GCP[107]: Id=108, Info=
>          (5.59315e+06,5.68498e+06) -> (5.593e+06,5.685e+06,0)
> GCP[108]: Id=109, Info=
>          (5.5994e+06,5.68488e+06) -> (5.59924e+06,5.685e+06,0)
> GCP[109]: Id=110, Info=
>          (5.59316e+06,5.6857e+06) -> (5.593e+06,5.68572e+06,0)
> GCP[110]: Id=111, Info=
>          (5.59417e+06,5.68571e+06) -> (5.594e+06,5.68574e+06,0)
> GCP[111]: Id=112, Info=
>          (5.59517e+06,5.68571e+06) -> (5.595e+06,5.68576e+06,0)
> GCP[112]: Id=113, Info=
>          (5.59617e+06,5.68571e+06) -> (5.596e+06,5.68578e+06,0)
> GCP[113]: Id=114, Info=
>          (5.59938e+06,5.68572e+06) -> (5.5992e+06,5.68584e+06,0)
> GCP[114]: Id=115, Info=
>          (5.59938e+06,5.68566e+06) -> (5.5992e+06,5.68578e+06,0)
> GCP[115]: Id=116, Info=
>          (5.59717e+06,5.68571e+06) -> (5.597e+06,5.6858e+06,0)
> GCP[116]: Id=117, Info=
>          (5.59817e+06,5.68571e+06) -> (5.598e+06,5.68582e+06,0)
> GCP[117]: Id=118, Info=
>          (5.59918e+06,5.68572e+06) -> (5.599e+06,5.68583e+06,0)
> Metadata:
>  TIFFTAG_DOCUMENTNAME=/home/trawiarz/prochowice_z5.tif
>  TIFFTAG_XRESOLUTION=300
>  TIFFTAG_YRESOLUTION=300
>  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Corner Coordinates:
> Upper Left  ( 5592805.033, 5686085.776)
> Lower Left  ( 5592805.033, 5674300.176)
> Upper Right ( 5599862.000, 5686085.776)
> Lower Right ( 5599862.000, 5674300.176)
> Center      ( 5596333.516, 5680192.976)
> Band 1 Block=3334x2 Type=Byte, ColorInterp=Palette
>  Color Table (RGB with 256 entries)
>  <snip>
> 
> 
> 
> [2]
> 
> [trawiarz@quercus ~]$ gdalwarp prochowice_z5_gdtr.tif
> prochowice_z5_gdtr_gdwr.tif
> Creating output file that is 3334P x 5568L.
> :0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> [trawiarz@quercus ~]$ gdalinfo prochowice_z5_gdtr_gdwr.tif
> Driver: GTiff/GeoTIFF
> Size is 3334, 5568
> Coordinate System is `'
> Origin = (5592805.032917,5686085.775819)
> Pixel Size = (2.11666667,-2.11666667)
> Corner Coordinates:
> Upper Left  ( 5592805.033, 5686085.776)
> Lower Left  ( 5592805.033, 5674300.176)
> Upper Right ( 5599862.000, 5686085.776)
> Lower Right ( 5599862.000, 5674300.176)
> Center      ( 5596333.516, 5680192.976)
> Band 1 Block=3334x2 Type=Byte, ColorInterp=Palette
>  Color Table (RGB with 256 entries)
>  <snip>
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From ben at vterrain.org  Mon Sep  5 05:23:01 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Bogus OGRSpatialReference should cause error, right?
Message-ID: <200509050923.j859N8Sj011183@duke.maptools.org>


I spent a bit of time this evening tracking down a problem with
OGRSpatialReference objects.  It turns out that
OGRCreateCoordinateTransformation will accept them even when they contain no
CRS at all, i.e. poRoot=NULL.  It would have shortened my debugging time if
OGRCreateCoordinateTransformation had returned an error and refused to
transform.  Instead, it returns a bogus transform which gives strange
results.

-Ben


From strk at keybit.net  Mon Sep  5 08:51:04 2005
From: strk at keybit.net (strk)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] reprojecting expedia (gpsdrive) maps
Message-ID: <20050905125104.GA84763@keybit.net>

Hi everybody.
I've been having headackes on how to reproject
expedia maps (those downloaded by gpsdrive).

For the maps all I know is center coordinates (in degrees)
and a fantomatic "scale" value whose meaning is not
straight-forward for me to understand.

My idea is to reproject those map to an arbitrary projection,
ideally a common one to make them all visible on gis application
(longlat?).

It seems that what I initially need is a worldfile accompaining
the source images, then a value to use for -s_srs of gdalwarp, is
this correct so far ?

Did anyone have to do with expedia maps before, and is he willing
to help me ?

Thanks in advance

--strk;

From fwarmerdam at gmail.com  Mon Sep  5 16:46:12 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Bogus OGRSpatialReference should cause error, right?
In-Reply-To: <200509050923.j859N8Sj011183@duke.maptools.org>
References: <200509050923.j859N8Sj011183@duke.maptools.org>
Message-ID: <931f8ea90509051346476d943d@mail.gmail.com>

On 9/5/05, Ben Discoe <ben@vterrain.org> wrote:
> 
> I spent a bit of time this evening tracking down a problem with
> OGRSpatialReference objects.  It turns out that
> OGRCreateCoordinateTransformation will accept them even when they contain no
> CRS at all, i.e. poRoot=NULL.  It would have shortened my debugging time if
> OGRCreateCoordinateTransformation had returned an error and refused to
> transform.  Instead, it returns a bogus transform which gives strange
> results.

Ben,

I concur.  I have tightened up error checking in the exportToProj4()
and OGRProj4CT::Initialize() methods. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Sep  5 16:51:18 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdalwarp doesn't honour my GCPs
In-Reply-To: <431BE9D5.9030700@ecovla.nl>
References: <016301c5af32$f9677620$95e41d3e@eustahiush>
	<431BE9D5.9030700@ecovla.nl>
Message-ID: <931f8ea905090513516992c9a4@mail.gmail.com>

On 9/5/05, Vincent Schut <vincent@ecovla.nl> wrote:
> Maciek,
> 
> have you tried it without the tfw file? The presence of a tfw file might
> well get in the way of your gcp's, as the tfw file already gives your
> image its corner points. I'd say, rename your tfw file to .tfw.bak or
> something, and try gdalwarp again.
>

Maciek / Vincent,

I would concur.  As long as gdalwarp finds a geotransform (whether 
from a .tfw or whatever) it won't use the GCPs. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Martin.Spott at mgras.net  Mon Sep  5 16:54:09 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de> <dddb1j$1eii$1@osprey.mgras.de>
	<ddgctn$10qi$1@osprey.mgras.de>
Message-ID: <dfib9h$1298$1@osprey.mgras.de>

Hello, I wrote:

> I made a small test by importing three layers, first without trailing
> dots and a second time with dots. I compared the database dumps of both
> and they don't even differ by a single character,

Now I'm facing different trouble. Importing VMAP0 data into the
PostGIS-DB with 'ogr2ogr' from GDAL-1.2.6 works excellent - in most
cases, but in some cases it completely fails. Some chunks of data are
simply missing.
I'm quite confused because I evaluated the returncode of 'ogr2ogr'
after each run and I always got a "0". Apparently the method of
checking the returncode is not an appropriate measure to verify the
succes of 'ogr2ogr'. Can anyone suggest an alternative method except
the one that consist of a visual check of every chunk that got
transferred by 'ogr2ogr' ?

Thanks,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From fwarmerdam at gmail.com  Mon Sep  5 16:57:37 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Accessing polygon data through the scripting interface
In-Reply-To: <431BDF16.2050306@tkk.fi>
References: <431BDF16.2050306@tkk.fi>
Message-ID: <931f8ea90509051357595f8c28@mail.gmail.com>

On 9/5/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Hello,
> 
> I saw some discussion on this subject earlier on this list
> (http://lists.maptools.org/pipermail/gdal-dev/2005-February/005109.html)
> but I think it's still impossible(?) to access the polygon data (rings
> and then vertices) through the scripting interface.
> 
> I see that the OO interface for scripting languages is done using the C
> (not C++) api (ogr_api.h etc). The interface is rewritten into C++ in
> ogr.i but without subclasses of OGRGeometry like OGRPolygon. Some of the
> subclass methods are written into the C API but not all. Shouldn't also
> the OGRPolygon methods Get*Ring be wrapped into OGRGeometry? In fact I
> tried this and with these in place one is able to do things like this
> (in Perl but the small changes I had to make were not Perl specific):
> 
> $geom = $feature->GetGeometryRef();
> $ring = $geom->GetExteriorRing(); # assuming geom is polygon...
> $ring->GetX(10);
> 
> Methods GetPoint(int) and GetPoints would be useful also.
> 
> These may be implemented in ogr_api.cpp (then they are available in the
> C interface) or in ogr.i. GetPoint(int) is in ogr_api.cpp but not in ogr.i.

Ari,

Access to the various kinds of geometry is available through the
ogr.Geometry class in Python.  The "trick" is that the explicit
geometry classes are not directly modelled.  Instead a geometry
is a container of sub-geometries and/or a list of points.  So a
simple OGRPolygon object would translate as an ogr.Geometry
with a bunch of sub-geometries (the rings), and each ring would
have a bunch of points. 

In python sub-geometries are grabbed with the GetGeometryRef(int)
method, and the points with GetX(int), GetY(int) and GetZ(int).  Use
GetPointCount() and GetGeometryCount() to find how many of each
are available (they are actually always mutually exclusive). 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Sep  5 17:23:18 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Changing How GDAL Reports Errors
In-Reply-To: <4318DFD1.4070601@vexcel.com>
References: <4318DFD1.4070601@vexcel.com>
Message-ID: <931f8ea905090514237b75f9be@mail.gmail.com>

On 9/2/05, Steve Soule <stsyo3lwdia4@vexcel.com> wrote:
> 4.  For some errors, rather than use the normal mixture of the above
> three techniques, GDAL throws an exception, usually std::bad_alloc.

Steve,

As Bill suggests, code throwing exceptions and not trapping them
are in violation of the design.  Does "new" throw std::bad_alloc
if the allocation fails?  I have generally taken the view that if a small
allocation fails in GDAL it will just "fall over and die" (ie. a fatal error).
I prefer this to trying hard to handle all possible small memory allocations.
So, I am inclined to do nothing to trap out-of-memory errors in the new
operator.  

For other exceptions in drivers such as the OPeNDAP driver, I have
tried to add a big try block around the code and translate exceptions
into a legal CPL style error. 
 
> GDAL also has "fatal" errors that never return control to the caller.
> These errors are always reported to the error handler, but no matter
> what the error handler does with them, the program is aborted.

Well, technically you could throw an exception in fatal errors, or
use setjmp/longjmp to get out of the error handler.  However, no 
reasonable unwinding code exists so things would be left in an 
indeterminate state. 
 
> 1.  Any C or C++ client code would need to be changed.  However,
> the changes would be minor, and would generally tend to improve the
> quality of the client code.  I don't know if client code in other
> languages such as Python would need to change; I doubt it.

...

> Does anyone see any other costs worth mentioning?  Does anyone feel
> that either of these costs is a show-stopper?  Does anyone see any
> changes they would like to make to the proposed new mechanism?

A strong case can be made that GDAL should have been built
with exceptions for error handling in the first place.  However, it
was not, and I find it hard to conceive of accepting the disturbance
to the API required to convert to using exceptions everywhere.  

As GDAL dictator-in-chief, I will respectfully turn down the proposed
changes in the main GDAL codestream.  

I am interested in improvements that could be made in the existing error
handling without significant API turmoil. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Sep  5 17:41:18 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
In-Reply-To: <dfib9h$1298$1@osprey.mgras.de>
References: <ddb00j$13ak$1@osprey.mgras.de> <dddb1j$1eii$1@osprey.mgras.de>
	<ddgctn$10qi$1@osprey.mgras.de> <dfib9h$1298$1@osprey.mgras.de>
Message-ID: <931f8ea9050905144150e7ab04@mail.gmail.com>

On 9/5/05, Martin Spott <Martin.Spott@mgras.net> wrote:
> Now I'm facing different trouble. Importing VMAP0 data into the
> PostGIS-DB with 'ogr2ogr' from GDAL-1.2.6 works excellent - in most
> cases, but in some cases it completely fails. Some chunks of data are
> simply missing.
> I'm quite confused because I evaluated the returncode of 'ogr2ogr'
> after each run and I always got a "0". Apparently the method of
> checking the returncode is not an appropriate measure to verify the
> succes of 'ogr2ogr'. Can anyone suggest an alternative method except
> the one that consist of a visual check of every chunk that got
> transferred by 'ogr2ogr' ?

Martin,

Ogr2ogr does attempt to return non-zero fails in case of failure. 
However, it is a bit sloppy about testing for errors and in some
cases forgiving of errors. 

Are you getting an error message output?  If not, it may be that
the VRF driver doesn't even realize it is doing something wrong.  
Does it fail the same way always for chunks that fail?  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Martin.Spott at mgras.net  Tue Sep  6 01:35:00 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de> <dddb1j$1eii$1@osprey.mgras.de>
	<931f8ea9050905144150e7ab04@mail.gmail.com>
Message-ID: <dfj9q3$1366$1@osprey.mgras.de>

Hello Frank - man, you are really busy making 'your' users happy !

Frank Warmerdam wrote:

> Are you getting an error message output?  If not, it may be that
> the VRF driver doesn't even realize it is doing something wrong.  
> Does it fail the same way always for chunks that fail?  

Actually I'm selecting 30 different VMAP0 layers and import each of
them from every of the four VMAP0 datasets. After the import was done I
made an export from the PostGIS-DB into one shapefile for each layer
and by watching these in QGIS I realized that the north-american part
was missing from three layers.
I was seeing a similar effect when I forgot to provide the required
login information for the PostGIS-DB to 'ogr2ogr', which then failed
with returncode "0" as well. I didn't get any error message at all.

The process I'm doing here is a bit long-winded and takes a few hours
until I can tell if the failure is reproducible.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From Martin.Spott at mgras.net  Tue Sep  6 03:40:48 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de> <dddb1j$1eii$1@osprey.mgras.de>
	<931f8ea9050905144150e7ab04@mail.gmail.com>
Message-ID: <dfjh60$1352$1@osprey.mgras.de>

Frank Warmerdam wrote:

> Are you getting an error message output?  If not, it may be that
> the VRF driver doesn't even realize it is doing something wrong.  

This could actually be the case: The v0noa is the only one of the four
datasets that contains uppercase letters - but apparently this affects
only a minority of the layers. I'll change that and redo the test.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From graziano.giuliani at poste.it  Tue Sep  6 04:58:05 2005
From: graziano.giuliani at poste.it (graziano.giuliani)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] MSG Interface
Message-ID: <IME0WT$EC2E9AE1D0D4343D7572A8B01AE32A44@poste.it>

Hi guys, 
great work with MSG interface. It's not simple to have it 
compiled, but I managed. As I written "yet another interface to  
HRIT" (http://meteosatlib.sourceforge.net), I have had to 
compile on my Linux box the Eumetsat Wavelet decompression 
library. 
Reading on Your docs, I found an invitation to post-in any 
modification needed on a *nix box for that library, so here I add 
a little patch and the script I use to compile the libraries. 
 
Many thanks ! 
 
? ? ? ? ? ? ? ? ? Graziano. 
 
--  
Universe, n.: 
????????The problem. 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: =?iso-8859-1?Q?patch=5FEUMETSAT.gz?=
Type: application/x-gzip
Size: 4862 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050906/49fb8848/iso-8859-1Qpatch5FEUMETSAT.tgz
-------------- next part --------------
A non-text attachment was scrubbed...
Name: =?iso-8859-1?Q?PublicDecompWT.sh?=
Type: application/x-shellscript
Size: 1242 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050906/49fb8848/iso-8859-1QPublicDecompWT.bin
From fwarmerdam at gmail.com  Tue Sep  6 11:26:43 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] New Resampling Algorithm
In-Reply-To: <6.1.1.1.0.20050902093021.024525d8@pop3>
References: <6.1.1.1.0.20050902093021.024525d8@pop3>
Message-ID: <931f8ea9050906082638f99b5b@mail.gmail.com>

On 9/2/05, Julien Demaria <dem@acri-st.fr> wrote:
> Hi,
> 
> I want to implement an utility to reduce resolution of an image by
> averaging all input pixels contributing to one output pixel,
> and I need use exactly the real contribution of each input pixel (may be a
> part of it if it is at the border of the input computed window
> corresponding to the output pixel coverage).
> 
> I've taken a look on the GDAL Warp API and the GDALWarpKernel class, to
> know if I can implement this as another resampling algorithm, as bilinear
> or bicubic,
> but I'm not clear about the input pixels contribution : can I know in the
> resampling algorithm what are inputs pixels corresponding to one output
> pixel and how they contribute ?

Julien, 

I think it would be pretty hard to implement support for averaging all
contributing pixels in the Warp API.  I think for simple downsampling 
of images, you would be better off using gdaladdo which already 
supports averaged downsampling.  You may need to do a bit of fiddling
to isolate the resulting downsampled overview.  If the format is TIFF making
the file read-only will result in the overview being written to a separate
file. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Peter.Nagy at vexcel.com  Tue Sep  6 11:53:56 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Changing How GDAL Reports Errors
In-Reply-To: <4318DFD1.4070601@vexcel.com>
References: <4318DFD1.4070601@vexcel.com>
Message-ID: <Pine.CYG.4.58.0509060915400.3880@Thwack>


It's always nice to avoid API modifications that require changes to code,
like adding a pointer to an error structure for c function calls.

Here's a possible alternative.  How about, functions return a non-zero
value to indicate an error occurred, so existing code can continue to
check for error-or-not status.  Behind the scenes, though, each function
could call something like CPLGenerateError to create an error of a
particular type and message, which would add it to a list, and return the
list index - which would be the return value for the failed function.
Therefore, any calling function that wants more information about why a
function call failed could call something like CPLGetErrorType(ret_val) or
CPLGetErrorMsg(ret_val).

Maybe this would also be easier to make thread safe, and if you plug in a
GUI to report errors to the user it would have access to errors from all
threads - wouldn't it?

Just a thought.  I've only touched the surface of GDAL and could be way
off base, but I've ported enough code to know it's usually advisable to
make things as backward compatible as possible.

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================



From fwarmerdam at gmail.com  Tue Sep  6 12:05:21 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdal_translate with onearth png
In-Reply-To: <17f672c60508311130a367202@mail.gmail.com>
References: <17f672c60508311130a367202@mail.gmail.com>
Message-ID: <931f8ea9050906090560b487b5@mail.gmail.com>

On 8/31/05, wsacul <wsacul@gmail.com> wrote:
> I'd like to take elevation data from the onearth server and convert it
> to a geotiff.
> 
> Here's a server request:
> 
> http://onearth.jpl.nasa.gov/browse.cgi?wms_server=wms.cgi&layers=worldwind_dem&srs=EPSG:4326&width=1000&height=1000&bbox=-120,30,-90,60&format=image/png&styles=feet_short_int&zoom=
> 
> I save the image and attempt to process it with gdal_translate:
> 
> gdal_translate -of GTIFF -a_ullr -120 15 -90 45 test.png test.tif
> 
> (at this point, gdal 1.3.0 on gentoo complains "option -a_ullr
> incomplete, or not recognized", but the same thing in cygwin with
> 1.3.0.0b1 processes the image fine)

Lucasw, 

I would suspect that you aren't really using GDAL 1.3.0 on Gentoo
if you get that message.  The -a_ullr option was added well before
1.3.0 release so perhaps you are accidentally picking up an old
version of gdal_translate. 

> gdal_translate has worked fine for me with making image geotiffs, but
> now that I want to make an elevation geotiff what do I need to do?  Is
> there a different tool I should be using?

I see the resulting PNG is 16bit and should translate into a 16bit
GeoTIFF just fine.  Without knowing more about how you want to 
use it downstream, I think you should be fine. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Tue Sep  6 12:12:42 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Changing How GDAL Reports Errors
In-Reply-To: <Pine.CYG.4.58.0509060915400.3880@Thwack>
References: <4318DFD1.4070601@vexcel.com>
	<Pine.CYG.4.58.0509060915400.3880@Thwack>
Message-ID: <931f8ea9050906091245b840f4@mail.gmail.com>

On 9/6/05, Pete Nagy <Peter.Nagy@vexcel.com> wrote:
> 
> It's always nice to avoid API modifications that require changes to code,
> like adding a pointer to an error structure for c function calls.
> 
> Here's a possible alternative.  How about, functions return a non-zero
> value to indicate an error occurred, so existing code can continue to
> check for error-or-not status.  Behind the scenes, though, each function
> could call something like CPLGenerateError to create an error of a
> particular type and message, which would add it to a list, and return the
> list index - which would be the return value for the failed function.
> Therefore, any calling function that wants more information about why a
> function call failed could call something like CPLGetErrorType(ret_val) or
> CPLGetErrorMsg(ret_val).

Peter,

Errors are internally posted using CPLError(), and applications can
push a handler callback to "stack up" errors in a list if desired.  The
only aspect of what you currently propose that is not addressed is
having the API functions return explicit error indices but I'm not
sure in what contexts that would be particularly useful.  After any
given call it is possible to get the last error message if an error
occured. 
 
> Maybe this would also be easier to make thread safe, and if you plug in a
> GUI to report errors to the user it would have access to errors from all
> threads - wouldn't it?

Currently each thread only has access to it's own errors, but an 
application error handler can always push them through to some
central application error list if needed, along with the thread of
origin. 
 
Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From wsacul at gmail.com  Tue Sep  6 12:22:37 2005
From: wsacul at gmail.com (wsacul)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdal_translate with onearth png
In-Reply-To: <931f8ea9050906090560b487b5@mail.gmail.com>
References: <17f672c60508311130a367202@mail.gmail.com>
	<931f8ea9050906090560b487b5@mail.gmail.com>
Message-ID: <17f672c605090609227b580889@mail.gmail.com>

> > gdal_translate has worked fine for me with making image geotiffs, but
> > now that I want to make an elevation geotiff what do I need to do?  Is
> > there a different tool I should be using?
> 
> I see the resulting PNG is 16bit and should translate into a 16bit
> GeoTIFF just fine.  Without knowing more about how you want to
> use it downstream, I think you should be fine.
> 
> Best regards,
> --

I guess I need to read up on the geotiff format- I'm assuming that a
satellite visual spectrum image turned into a geotiff and elevation
data turned into a geotiff were quite different and would require
different command line options in gdal_translate- perhaps they are not
and I just need to make sure I use them correctly downstream.  I'm
using osgdem, so for that instance I would specify the geotiff with -d
rather than -t.

Thanks,

lucasw


From fwarmerdam at gmail.com  Tue Sep  6 15:04:16 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] gdal_translate with onearth png
In-Reply-To: <17f672c605090609227b580889@mail.gmail.com>
References: <17f672c60508311130a367202@mail.gmail.com>
	<931f8ea9050906090560b487b5@mail.gmail.com>
	<17f672c605090609227b580889@mail.gmail.com>
Message-ID: <931f8ea9050906120473c5a0a4@mail.gmail.com>

On 9/6/05, wsacul <wsacul@gmail.com> wrote:
> I guess I need to read up on the geotiff format- I'm assuming that a
> satellite visual spectrum image turned into a geotiff and elevation
> data turned into a geotiff were quite different and would require
> different command line options in gdal_translate- perhaps they are not
> and I just need to make sure I use them correctly downstream.  I'm
> using osgdem, so for that instance I would specify the geotiff with -d
> rather than -t.

Lucasw, 

The formats aren't all that different.  Gdal_translate will know
to generate a 16bit GeoTIFF because the input PNG is 16bit. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From support at geoimage.fr  Wed Sep  7 06:55:31 2005
From: support at geoimage.fr (=?iso-8859-1?Q?Fr=E9d=E9ric_Trastour?=)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Problem with Gtiff creation on Solaris
Message-ID: <039c01c5b39a$aae7f170$0a01a8c0@pili>

Hello,

I can't generate valid Tiff Files with gdal_translate (GDAL 1.3.0 configured
with the internal TIFF and GeoTIFF libraries).

I have seen similar messages on the list, but no solution...

A file is generated but not recognised by any application.

If I examine the output file and compare it to the valid output of a working
1.1.9 gdal release, it seems
that the file doesn't have a valid "magic number" (first bytes of the files).

I have traced an execution into ddd and I think that :
    - A correct header in written first to the file - in TIFFOpenClient,
    - Then image data are written to the beginning of the file ( overwritting
the good header ).
      In my example (1x1 pixel gray image) this happens in TIFFAppendToStrip
called by TIFFFlush
      in GTiffCreateCopy.
      I don't know why, but the call to TIFFSeekFile(...SEEK_END) in
tif_write:677 retuns 0 instead
     of the amount of data already written the file, so the image data are
written at pos 0 and overwrite
     the header.

I can't understand why the SeekFile returns 0 as it occurs after a write
operation. I have not seen any
other operations which may change the current position ( but I am probably
missing something...).

Does this configuration 1.3.0 with internal libraries works on other systems (
linux, windows ) ?
In a first time I suspected something related to byte ordering or large file
support.

Any ideas or comments appreciated.

Fr?d?ric.

Sorry for my english probably full of syntax errors...

_________________________________________________________________
Fr?d?ric Trastour - SpacEyes - dev@spaceyes.fr


From ari.jolma at tkk.fi  Wed Sep  7 08:34:40 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Transforming an ogr layer
Message-ID: <431EDE60.1090404@tkk.fi>

Through some experimentation I managed to transform a layer (sorry, Perl 
code, but should not be much different from Python)

# the layer I'm going to tranform does not have a spatial reference
$osr_from = new osr::SpatialReference;
$osr_from->SetWellKnownGeogCS('WGS84');
$osr_to = new osr::SpatialReference;
$osr_to->ImportFromEPSG(3035);
$ct = new osr::CoordinateTransformation($osr_from,$osr_to);

# working in this directory
$datasource = ogr::Open('/home/ajolma/proj/clime/lakes/',1);

if ($datasource) {

    # existing layer, a shapefile of polygons, one datafield
    $layer = $datasource->GetLayerByName('lakes');

    # a new layer, similar but new spatial reference
    $new_layer = 
$datasource->CreateLayer('lakes_t',$osr_to,$ogr::wkbPolygon);

    for $i (0..$layer->GetFeatureCount()-1) {

       # this sequence was a bit hard to get right...
        $feature = $layer->GetFeature($i);
        $geom = $feature->GetGeometryRef();
        $geom->Transform($ct);
        $new_layer->CreateFeature($feature);

    }
   
    # save, this is needed
    $new_layer->SyncToDisk;
}

Works fine for the vertices but the "name" field is lost from the 
feature and instead there is a new one FID of type Real with seemingly 
integer value. How do I make the feature not loose its existing field?

I'm sending this to the list also in the hope of generating some 
documentation :)

Ari
 

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From fwarmerdam at gmail.com  Wed Sep  7 09:30:26 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Transforming an ogr layer
In-Reply-To: <431EDE60.1090404@tkk.fi>
References: <431EDE60.1090404@tkk.fi>
Message-ID: <931f8ea905090706302ab6d11f@mail.gmail.com>

On 9/7/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Works fine for the vertices but the "name" field is lost from the
> feature and instead there is a new one FID of type Real with seemingly
> integer value. How do I make the feature not loose its existing field?

Ari, 

The perl bindings are looking good!

You need to explicitly create all the desired fields on the
new layer.  In python this looks something like:

shp_layer = shp_ds.CreateLayer( 'out', geom_type = ogr.wkbPolygon,
                                srs = nad83 )

src_defn = poly_layer.GetLayerDefn()
poly_field_count = src_defn.GetFieldCount()

for fld_index in range(poly_field_count):
    src_fd = src_defn.GetFieldDefn( fld_index )
    
    fd = ogr.FieldDefn( src_fd.GetName(), src_fd.GetType() )
    fd.SetWidth( src_fd.GetWidth() )
    fd.SetPrecision( src_fd.GetPrecision() )
    shp_layer.CreateField( fd )

Actually, in retrospect, there is no compelling reason to create
a new field definition, you can use the original one with
CreateField(), so this can likely be shortened to:

shp_layer = shp_ds.CreateLayer( 'out', geom_type = ogr.wkbPolygon,
                                srs = nad83 )

src_defn = poly_layer.GetLayerDefn()
poly_field_count = src_defn.GetFieldCount()

for fld_index in range(poly_field_count):
    src_fd = src_defn.GetFieldDefn( fld_index )
    shp_layer.CreateField( src_fd )

The "FID" field is only created on shapefiles if no other
fields are created.  There seems to be a need for at
least one field in the .dbf file for a shapefile dataset to 
be valid.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bartvde at xs4all.nl  Wed Sep  7 12:34:46 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] creating a line shapefile from a point shapefile
Message-ID: <op.swqqz8hvmjfraz@bart.lan>

Hi list,

is it possible to create a line shapefile from a point shapefile using a  
group by clause on one or more attributes?

Does anyone have a script out there?

Thanks in advance.

Best regards,
Bart

-- 
Using Opera's revolutionary e-mail client: http://www.opera.com/mail/

From ari.jolma at tkk.fi  Wed Sep  7 14:00:44 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Transforming an ogr layer
In-Reply-To: <931f8ea905090706302ab6d11f@mail.gmail.com>
References: <431EDE60.1090404@tkk.fi>
	<931f8ea905090706302ab6d11f@mail.gmail.com>
Message-ID: <431F2ACC.7060607@tkk.fi>

Frank Warmerdam kirjoitti:

>The perl bindings are looking good!
>  
>

they could also look much more Perlish.. Perl hackers are lazy typists..

>You need to explicitly create all the desired fields on the
>new layer.  In python this looks something like:
>  
>

Thanks, the final tutorial code is below.

Ari

# note: this code requires the CVS version of Sept. 7. 2005
use osr;
use ogr;

# the layer I'm going to tranform does not have a spatial reference 
attached to it
# so we need to create one for the sr in which it is now and one for the 
target sr

$osr_from = new osr::SpatialReference;
$osr_from->SetWellKnownGeogCS('WGS84');
$osr_to = new osr::SpatialReference;
$osr_to->ImportFromEPSG(3035);
$ct = new osr::CoordinateTransformation($osr_from,$osr_to);

# we are working in the directory /home/gis/data
# the "1" means that we plan to update the datasource
$datasource = ogr::Open('/home/gis/data/',1);

if ($datasource) {

   # open the existing layer
   $layer = $datasource->GetLayerByName('lakes');

   $feature = $layer->GetFeature(0) or die "the layer is empty";
   $geom = $feature->GetGeometryRef();
   $geom_type = $geom->GetGeometryType();

   # a new, transformed layer, similar but with the new spatial reference
   $new_layer = $datasource->CreateLayer('lakes_t', $osr_to, $geom_type);

   # copy the data model (data itself is copied automatically)
   $layer_defn = $layer->GetLayerDefn();
   for $i (0..$layer_defn->GetFieldCount()-1) {
      $new_layer->CreateField($layer_defn->GetFieldDefn($i));
   }

   # transform all features
   for $i (0..$layer->GetFeatureCount()-1) {

       $feature = $layer->GetFeature($i);
       # $geom may contain geometries etc. but there is only one root 
geometry in a feature
       $geom = $feature->GetGeometryRef();
       # the actual transformation
       $geom->Transform($ct);
       # insert into the new layer
       $new_layer->CreateFeature($feature);

   }
   
   # make sure the new layer is saved to disk
   $new_layer->SyncToDisk;
}


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From hamish_nospam at yahoo.com  Wed Sep  7 20:37:19 2005
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Fw: [GRASSLIST:8201] MrSID and incorporating the .sdw
 info into resulting GeoTiff.
Message-ID: <20050908123719.126b0caa.hamish_nospam@yahoo.com>

Fwd from the GRASS users' list re. gdal_translate.


Begin forwarded message:

Date: Wed, 07 Sep 2005 17:46:00 -0600
From: Craig Aumann <caumann@ualberta.ca>
To: GRASS Mailing List <GRASSLIST@baylor.edu>
Subject: [GRASSLIST:8201] MrSID and incorporating the .sdw info into resulting GeoTiff.


I have a bunch of .sid files that I am converting to GeoTiffs.   How
does one incorporate the spatial location information in their
associated .sdw file into the associate .tiff file? 


Here's what I am doing:

mrsiddecode -i FILE.sid -o FILE.tif -of tifg    
    
## Use the code for NAD27, Zone 12
## contained in EPSG file: /usr/share/proj/epsg
    
gdal_translate -of GTIFF -a_srs '+init=epsg:26712' \
	FILE.tif FILE.NAD27.tif

But when I do a gdalinfo, it is clear that the information in the .sdw
file has not been used (the "file.sdw" is given below): 

gdalinfo file.tif
Driver: GTiff/GeoTIFF
Size is 9168, 9168
Coordinate System is:
PROJCS["NAD27 / UTM zone 12N",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.9786982138982,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0],
        UNIT["degree (supplier to define
representation)",0.01745329251994328],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-111],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26712"]]
Origin = (-0.500000,9167.500000)
Pixel Size = (1.00000000,-1.00000000)
Corner Coordinates:
Upper Left  (      -0.500,    9167.500) (115d29'19.33"W,  0d 4'57.69"N)
Lower Left  (  -0.5000000,  -0.5000000) (115d29'19.32"W,  0d 0'0.02"S)
Upper Right (    9167.500,    9167.500) (115d24'23.63"W,  0d 4'57.72"N)
Lower Right (    9167.500,      -0.500) (115d24'23.61"W,  0d 0'0.02"S)
Center      (    4583.500,    4583.500) (115d26'51.47"W,  0d 2'28.84"N)


----------------------------------------------

The associated .sdw file is:
             1.200000000000000
             0.000000000000000
             0.000000000000000
            -1.200000000000000
        492501.000000000000000
       6243621.000000000000000






From hina192002 at yahoo.com  Sun Sep  4 02:22:52 2005
From: hina192002 at yahoo.com (hina arif)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] how to read tiff 
Message-ID: <20050904062252.76910.qmail@web54306.mail.yahoo.com>

hi 
i am new to GDAL and i want to know that how can i u GDAL for reading tiff i have seen internal tiffs header files used by maptools for reading tiff but how can i use  tiff functions for reading headers and other files info   using GDAL  kindly help soon
thankx 

		
---------------------------------
Yahoo! Mail
 Stay connected, organized, and protected. Take the tour
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050903/963ef624/attachment.html
From hina192002 at yahoo.com  Sun Sep  4 02:15:18 2005
From: hina192002 at yahoo.com (hina arif)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] reading tiff 
Message-ID: <20050904061518.76210.qmail@web54306.mail.yahoo.com>

hi 
i am new to GDAL and i want to know that how GDAL reads tiff using internal tiff headers can anybody tell me how can i use GDAL functions,API's to read from internal tiffs 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050903/4baa144a/attachment.html
From bfraser at geoanalytic.com  Thu Sep  8 11:43:21 2005
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] TIFF with JPEG compression on Win32
References: <430F3744.000003.03872@BMSTU-HOME>
Message-ID: <08f601c5b48c$0a8c38b0$160002c0@shark>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 2421 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050908/2a3a0a84/attachment.jpe
From fwarmerdam at gmail.com  Thu Sep  8 11:46:25 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] reading tiff
In-Reply-To: <20050904061518.76210.qmail@web54306.mail.yahoo.com>
References: <20050904061518.76210.qmail@web54306.mail.yahoo.com>
Message-ID: <931f8ea905090808467fceda4e@mail.gmail.com>

On 9/4/05, hina arif <hina192002@yahoo.com> wrote:
> hi 
> i am new to GDAL and i want to know that how GDAL reads tiff using internal
> tiff headers can anybody tell me how can i use GDAL functions,API's to read
> from internal tiffs 

Hina, 

I'm not too sure what you mean by "internal tiffs".  Are you talking
about reading in-memory TIFF images? 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Thu Sep  8 11:55:40 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] TIFF with JPEG compression on Win32
In-Reply-To: <430F3744.000003.03872@BMSTU-HOME>
References: <430F3744.000003.03872@BMSTU-HOME>
Message-ID: <931f8ea9050908085522c0aee3@mail.gmail.com>

On 8/26/05, remedius <remedius@mail.ru> wrote:
>         
>   
>   
>  Hi! 
> I have the same problem: 
>  ERROR 1: JPEGLib:JPEG parameter struct mismatch: library thinks size is 
> > 376, caller expects 360
> do you know how to escape this problem. I have read that we can change jconfig.h file, but how we should do this in a proper way. Please, I need your help!
> remedius@mail.ru

Hi,

My normal hack to resolve this problem is to change the following code
in tif_jpeg.c:

/* Define "boolean" as unsigned char, not int, per Windows custom. */
#if defined(WIN32)
# ifndef __RPCNDR_H__            /* don't conflict if rpcndr.h already read */
   typedef unsigned char boolean;
# endif
# define HAVE_BOOLEAN            /* prevent jmorecfg.h from redefining it */
#endif

To this:

/* Define "boolean" as unsigned char, not int, per Windows custom. */
#define boolean int
#define HAVE_BOOLEAN


The core of the problem is that some include files define boolean
differently, but it is very important to have a consistent size for it 
in the jpeg structure regardless of whether you are in the tiff code
or libjpeg itself. 

Hopefully one of the future changes to libjpeg will be to get rid of
use of this generic boolean type in favor of something unlikely
to suffer from conflicts. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From support at geoimage.fr  Thu Sep  8 12:17:31 2005
From: support at geoimage.fr (=?iso-8859-1?Q?Fr=E9d=E9ric_Trastour?=)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Problem of creation with Gtiff driver on Solaris
Message-ID: <05cb01c5b490$d0893370$0a01a8c0@pili>

Hello,

I am trying to find why GDAL 1.3.0 with the internal libtiff on Solaris doesn't
create valid GEOtiff.

Here is a trace (some printfs added in tif_vsi.c) of a gdal_translate execution:

GDAL/GEO: GEODataset::Open :im1x1.geo
GDAL: GDALOpen(im1x1.geo) succeeds as GEO.
Input file size is 1, 1
0.TIFFOpen FILENAME=im11.TIF, MODE=w+b --> FILE=fe437c64
tiffReadProc FILE=fe437c64, BUF=2d000, SIZE=8 -->0 [POS=0]
** tiffWriteProc FILE=fe437c64, BUF=2d000, SIZE=8 -->8 [POS=-8184] // A 'tell'
just after the write returns -8184 instead of 8 !
100 - done.
** tiffSeekProc FILE=fe437c64, OFFSET=0, WHENCE=SEEK_END --> 0 // 0 instead of 8
tiffWriteProc FILE=fe437c64, BUF=4af00, SIZE=1 -->1 [POS=1]
tiffSeekProc FILE=fe437c64, OFFSET=0, WHENCE=SEEK_END --> 1
tiffSeekProc FILE=fe437c64, OFFSET=4, WHENCE=SEEK_SET --> 4
tiffWriteProc FILE=fe437c64, BUF=ffb8dc5c, SIZE=4 -->4 [POS=8]
tiffSeekProc FILE=fe437c64, OFFSET=164, WHENCE=SEEK_SET --> 164
tiffSeekProc FILE=fe437c64, OFFSET=164, WHENCE=SEEK_SET --> 164
tiffWriteProc FILE=fe437c64, BUF=2f110, SIZE=128 -->128 [POS=292]
tiffSeekProc FILE=fe437c64, OFFSET=2, WHENCE=SEEK_SET --> 2
tiffWriteProc FILE=fe437c64, BUF=ffb8dcd6, SIZE=2 -->2 [POS=4]
tiffWriteProc FILE=fe437c64, BUF=4af00, SIZE=156 -->156 [POS=160]
tiffWriteProc FILE=fe437c64, BUF=ffb8dcd0, SIZE=4 -->4 [POS=164]
tiffCloseProc FILE=fe437c64

ERROR 4: `im11.TIF' not recognised as a supported file format.
ERROR 4: `im11.TIF' not recognised as a supported file format.

GDAL: GDALDeregister_GTiff() called.

As you can see there are two strange results (marked with **).
Any ideas about that ?

Does it work on any other unix platforms ?

Thanks
Fr?d?ric.
_________________________________________________________________
Fr?d?ric Trastour - SpacEyes - dev@spaceyes.fr


From fwarmerdam at gmail.com  Thu Sep  8 13:24:25 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Problem of creation with Gtiff driver on Solaris
In-Reply-To: <05cb01c5b490$d0893370$0a01a8c0@pili>
References: <05cb01c5b490$d0893370$0a01a8c0@pili>
Message-ID: <931f8ea9050908102460933d28@mail.gmail.com>

On 9/8/05, Fr?d?ric Trastour <support@geoimage.fr> wrote:
> Hello,
> 
> I am trying to find why GDAL 1.3.0 with the internal libtiff on Solaris doesn't
> create valid GEOtiff.
> 

Fr?d?ric,

Several years ago I applied the following patch to libtiff's tif_open.c. 
It was recently removed as there seemed to be no sensible reason
for it, and we though that modern Solaris surely would not still
have such a problem (assuming I had diagnosed it correctly in the
first place).  I am now suspecting that was a mistake. 

Try the patch (adding TIFFSeekFile(tif,0,SEEK_SET) before the
WriteOK call and see if that helps. 

warmerda@gdal2200[108]% cvs diff -r1.5 -r1.6 tif_open.c
Index: tif_open.c
===================================================================
RCS file: /cvs/maptools/cvsroot/libtiff/libtiff/tif_open.c,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -r1.5 -r1.6
--- tif_open.c  30 Sep 2000 04:18:55 -0000      1.5
+++ tif_open.c  20 Jul 2001 02:22:46 -0000      1.6
@@ -1,4 +1,4 @@
-/* $Header: /cvs/maptools/cvsroot/libtiff/libtiff/tif_open.c,v 1.5
2000/09/30 04:18:55 warmerda Exp $ */
+/* $Header: /cvs/maptools/cvsroot/libtiff/libtiff/tif_open.c,v 1.6
2001/07/20 02:22:46 warmerda Exp $ */
 
 /*
  * Copyright (c) 1988-1997 Sam Leffler
@@ -285,6 +285,15 @@
                if (tif->tif_flags & TIFF_SWAB)
                        TIFFSwabShort(&tif->tif_header.tiff_version);
                tif->tif_header.tiff_diroff = 0;        /* filled in later */
+
+                /*
+                 * This seek shouldn't be necessary, but I have had some
+                 * crazy problems with a failed fseek() on Solaris leaving
+                 * the current file pointer out of whack when an fwrite()
+                 * is done. 
+                 */
+                TIFFSeekFile( tif, 0, SEEK_SET );
+
                if (!WriteOK(tif, &tif->tif_header, sizeof (TIFFHeader))) {
                        TIFFError(name, "Error writing TIFF header");
                        goto bad;




> Here is a trace (some printfs added in tif_vsi.c) of a gdal_translate execution:
> 
> GDAL/GEO: GEODataset::Open :im1x1.geo
> GDAL: GDALOpen(im1x1.geo) succeeds as GEO.
> Input file size is 1, 1
> 0.TIFFOpen FILENAME=im11.TIF, MODE=w+b --> FILE=fe437c64
> tiffReadProc FILE=fe437c64, BUF=2d000, SIZE=8 -->0 [POS=0]
> ** tiffWriteProc FILE=fe437c64, BUF=2d000, SIZE=8 -->8 [POS=-8184] // A 'tell'
> just after the write returns -8184 instead of 8 !
> 100 - done.
> ** tiffSeekProc FILE=fe437c64, OFFSET=0, WHENCE=SEEK_END --> 0 // 0 instead of 8
> tiffWriteProc FILE=fe437c64, BUF=4af00, SIZE=1 -->1 [POS=1]
> tiffSeekProc FILE=fe437c64, OFFSET=0, WHENCE=SEEK_END --> 1
> tiffSeekProc FILE=fe437c64, OFFSET=4, WHENCE=SEEK_SET --> 4
> tiffWriteProc FILE=fe437c64, BUF=ffb8dc5c, SIZE=4 -->4 [POS=8]
> tiffSeekProc FILE=fe437c64, OFFSET=164, WHENCE=SEEK_SET --> 164
> tiffSeekProc FILE=fe437c64, OFFSET=164, WHENCE=SEEK_SET --> 164
> tiffWriteProc FILE=fe437c64, BUF=2f110, SIZE=128 -->128 [POS=292]
> tiffSeekProc FILE=fe437c64, OFFSET=2, WHENCE=SEEK_SET --> 2
> tiffWriteProc FILE=fe437c64, BUF=ffb8dcd6, SIZE=2 -->2 [POS=4]
> tiffWriteProc FILE=fe437c64, BUF=4af00, SIZE=156 -->156 [POS=160]
> tiffWriteProc FILE=fe437c64, BUF=ffb8dcd0, SIZE=4 -->4 [POS=164]
> tiffCloseProc FILE=fe437c64
> 
> ERROR 4: `im11.TIF' not recognised as a supported file format.
> ERROR 4: `im11.TIF' not recognised as a supported file format.
> 
> GDAL: GDALDeregister_GTiff() called.
> 
> As you can see there are two strange results (marked with **).
> Any ideas about that ?
> 
> Does it work on any other unix platforms ?
> 
> Thanks
> Fr?d?ric.
> _________________________________________________________________
> Fr?d?ric Trastour - SpacEyes - dev@spaceyes.fr
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Thu Sep  8 13:54:58 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] creating a line shapefile from a point shapefile
In-Reply-To: <op.swqqz8hvmjfraz@bart.lan>
References: <op.swqqz8hvmjfraz@bart.lan>
Message-ID: <931f8ea90509081054707355e4@mail.gmail.com>

On 9/7/05, Bart van den Eijnden <bartvde@xs4all.nl> wrote:
> Hi list,
> 
> is it possible to create a line shapefile from a point shapefile using a
> group by clause on one or more attributes?
> 
> Does anyone have a script out there?

Bart,

Note that OGR SQL does not support the GROUP BY clause.

For files that aren't too terribly large, this could be implemented in 
a python script.  I say not too large, since it will more-or-less end up
holding everything in memory during processing. 

How do you intend to decide what order to take the points to 
form them into linestrings?  Ordered by order of occurance?  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From archer at eskimo.com  Thu Sep  8 14:11:57 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Linking problem
Message-ID: <Pine.SUN.4.58.0509081111420.761@eskimo.com>


Just had an interesting linking problem.  This is with the CVS GDAL,
plus using separate libshp, libproj, and libgeotiff in our app as
well (not using the gdal interface for those cases).

Using libgeotiff-1.1.5, libshp-1.0.1, libproj.0.4.2.

"-lgdal" was earlier than the other libraries on the link line.

GDAL's configure decided to use its internal geotiff library because
it failed to find TIFFGetTagListCount in the TIFF library
(libtiff-3.5.7 is on this system).

So... To make a long story short Xastir was using the header files
for the older libtiff and libgeotiff but linking in the library code
from GDAL's internal libraries instead.

This caused all of the GTIFProj4FromLatLong() calls in our code to
fail.

Best way to fix this?  Temporarily we moved "-lgdal" to the end of
our link line.  This solved the problem, but of course could cause
others.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From Martin.Spott at mgras.net  Thu Sep  8 14:23:48 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:44 2007
Subject: [Gdal-dev] Importing VMAP0 into PostGIS database;
References: <ddb00j$13ak$1@osprey.mgras.de> <dddb1j$1eii$1@osprey.mgras.de>
	<dfjh60$1352$1@osprey.mgras.de>
Message-ID: <dfpvjk$sl8$1@osprey.mgras.de>

Martin Spott wrote:

> This could actually be the case: The v0noa is the only one of the four
> datasets that contains uppercase letters - but apparently this affects
> only a minority of the layers. I'll change that and redo the test.

This _was_ the case. I did all my previous tests with the european
part of the VMAP0 dataset and didn't expect that the nomenclatura would
differ among the four chunks.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From archer at eskimo.com  Thu Sep  8 15:42:46 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Linking problem
In-Reply-To: <Pine.SUN.4.58.0509081111420.761@eskimo.com>
References: <Pine.SUN.4.58.0509081111420.761@eskimo.com>
Message-ID: <Pine.SUN.4.58.0509081236350.761@eskimo.com>

On Thu, 8 Sep 2005, Curt, WE7U wrote:

> Just had an interesting linking problem.  This is with the CVS GDAL,
> plus using separate libshp, libproj, and libgeotiff in our app as
> well (not using the gdal interface for those cases).
>
> Using libgeotiff-1.1.5, libshp-1.0.1, libproj.0.4.2.
>
> "-lgdal" was earlier than the other libraries on the link line.
>
> GDAL's configure decided to use its internal geotiff library because
> it failed to find TIFFGetTagListCount in the TIFF library
> (libtiff-3.5.7 is on this system).
>
> So... To make a long story short Xastir was using the header files
> for the older libtiff and libgeotiff but linking in the library code
> from GDAL's internal libraries instead.
>
> This caused all of the GTIFProj4FromLatLong() calls in our code to
> fail.
>
> Best way to fix this?  Temporarily we moved "-lgdal" to the end of
> our link line.  This solved the problem, but of course could cause
> others.

What should we be looking to do long-term?  Switch to using GDAL's
interface exclusively instead of libproj + shapelib + libgeotiff +
gdal?  We started out using shapelib/libproj/libgeotiff years ago.
GDAL is a relatively new addition to our project.

I assume that the libproj/shapelib/libgeotiff API's are not visible
from GDAL, correct, so we'll have to use GDAL + OGR API's
exclusively in that case?

If so it'll take us quite a while to get there, plus we have a bunch
of optimizations/customizations in our shapefile and geotiff drawing
code that we'll have to carefully convert.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From fwarmerdam at gmail.com  Thu Sep  8 16:10:58 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Linking problem
In-Reply-To: <Pine.SUN.4.58.0509081236350.761@eskimo.com>
References: <Pine.SUN.4.58.0509081111420.761@eskimo.com>
	<Pine.SUN.4.58.0509081236350.761@eskimo.com>
Message-ID: <931f8ea905090813106f690b53@mail.gmail.com>

On 9/8/05, Curt, WE7U <archer@eskimo.com> wrote:
> On Thu, 8 Sep 2005, Curt, WE7U wrote:
> > Best way to fix this?  Temporarily we moved "-lgdal" to the end of
> > our link line.  This solved the problem, but of course could cause
> > others.
> 
> What should we be looking to do long-term?  Switch to using GDAL's
> interface exclusively instead of libproj + shapelib + libgeotiff +
> gdal?  We started out using shapelib/libproj/libgeotiff years ago.
> GDAL is a relatively new addition to our project.
> 
> I assume that the libproj/shapelib/libgeotiff API's are not visible
> from GDAL, correct, so we'll have to use GDAL + OGR API's
> exclusively in that case?
> 
> If so it'll take us quite a while to get there, plus we have a bunch
> of optimizations/customizations in our shapefile and geotiff drawing
> code that we'll have to carefully convert.

Curt, 

Well, more obvious solution in the short term is to ensure that
external versions of libtiff, and libgeotiff are used by GDAL even
if it means upgrading to more recent versions.  It may well make
building somewhat of a hassle, as you might not be able to use
the system version of libtiff for instance. 

In the long term, I would encourage you to use GDAL for all your
raster needs (at least replacing tiff/geotiff).  If you run into particular
issues that you find you currently need direct access for, perhaps
I can help.  

OGR will have some extra overhead over using shapelib directly.
I don't know if this is a big factor or not. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From eric.sokolowsky at gsfc.nasa.gov  Thu Sep  8 17:33:08 2005
From: eric.sokolowsky at gsfc.nasa.gov (Eric Sokolowsky)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] gdalwarp and -dstalpha
Message-ID: <Pine.LNX.4.61.0509081726270.26009@svsmail.gsfc.nasa.gov>

I have experienced a strange (in my mind) problem with gdalwarp and the
-dstalpha option. When I use this option on a couple of particular images
that are reported as RGBA tiff files it turns them to grayscale. I am 
using gdal 1.2.5, but the same results seemed to occur with gdal 1.2.6.
If the source image is RGB (no alpha) the output image is RGBA, as I
expect. Is this normal/expected behavior? It would make more sense to me
to have "-dstalpha" always add an alpha channel if it is not there, and
to have a separate option "-dstnoalpha" to remove the alpha channel if
present, instead of "-dstalpha" toggle the alpha, if this is the intended
behavior.

From fwarmerdam at gmail.com  Thu Sep  8 18:41:53 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] gdalwarp and -dstalpha
In-Reply-To: <Pine.LNX.4.61.0509081726270.26009@svsmail.gsfc.nasa.gov>
References: <Pine.LNX.4.61.0509081726270.26009@svsmail.gsfc.nasa.gov>
Message-ID: <931f8ea9050908154133dcb4e6@mail.gmail.com>

On 9/8/05, Eric Sokolowsky <eric.sokolowsky@gsfc.nasa.gov> wrote:
> I have experienced a strange (in my mind) problem with gdalwarp and the
> -dstalpha option. When I use this option on a couple of particular images
> that are reported as RGBA tiff files it turns them to grayscale. I am
> using gdal 1.2.5, but the same results seemed to occur with gdal 1.2.6.
> If the source image is RGB (no alpha) the output image is RGBA, as I
> expect. Is this normal/expected behavior? It would make more sense to me
> to have "-dstalpha" always add an alpha channel if it is not there, and
> to have a separate option "-dstnoalpha" to remove the alpha channel if
> present, instead of "-dstalpha" toggle the alpha, if this is the intended
> behavior.

Eric,

-dstalpha should use an existing alpha channel if there already is
one on the destination file.  I just tried using gdalwarp to on an RGBA
input file with -dstalpha and the output was also RGBA. 

Perhaps this was fixed since 1.2.6 (now a bit antique), or perhaps
there is something special about your situation. 

The -dstalpha is not intended to toggle presence of an alpha channel.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cgt at navicon.dk  Fri Sep  9 04:57:05 2005
From: cgt at navicon.dk (Christian G. Tveen)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
Message-ID: <43214E61.70606@navicon.dk>

Hi,

I have a number of very fine grained shape files. Is it possible to have 
gdal in some way downsample these files to be more usable for overview 
purposes ?

Best regards Christian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3695 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050909/e74a0e20/smime.bin
From matej.dular at realis.si  Fri Sep  9 08:21:13 2005
From: matej.dular at realis.si (Matej Dular)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] 16 color TIFFs; buffering
Message-ID: <002701c5b538$f86f0ab0$6800000a@wsmatej>

Hello! I'm using GDAL for some months now so more or less I am still a newbi. I have two technical questions and hope you don't mind sending them in one single mail.

1. TIFFs: If a TIFF image is saved with an indexed palette of 256 colors, GDAL handels it as such (1 band, 256 color palette). But if a TIFF image is saved with an idexed palette of only 16 colors, GDAL handels it as 4 band RGB (unindexed!) color image. This seems strange to me, isn't it?

2. Buffering. GDAL bufferizes image data while reading it by RasterIO so next reading of same image blocks is quite faster than the first one. I'm asking myself is there any way (and any sense) to disable buffering to improve GDAL performance when no repeated reading of the same image is planed? I only have to read an image grid at once and that's it. Buffering seems like an activity that is not really needed in such a case, and could theoretically slow down the task.

Thanx!

Matej
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050909/ca438984/attachment.html
From fwarmerdam at gmail.com  Fri Sep  9 09:06:35 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] 16 color TIFFs; buffering
In-Reply-To: <002701c5b538$f86f0ab0$6800000a@wsmatej>
References: <002701c5b538$f86f0ab0$6800000a@wsmatej>
Message-ID: <931f8ea905090906063cb43c24@mail.gmail.com>

On 9/9/05, Matej Dular <matej.dular@realis.si> wrote:
>  
> Hello! I'm using GDAL for some months now so more or less I am still a
> newbi. I have two technical questions and hope you don't mind sending them
> in one single mail. 
>   
> 1. TIFFs: If a TIFF image is saved with an indexed palette of 256 colors,
> GDAL handels it as such (1 band, 256 color palette). But if a TIFF image is
> saved with an idexed palette of only 16 colors, GDAL handels it as 4 band
> RGB (unindexed!) color image. This seems strange to me, isn't it? 

Matej, 

I think you will find that GDAL 1.3.0 no longer internally converts 16 color
images (4 bit) to RGBA format.  If you are using something older, you 
should upgrade to get this improvement.  In fact, in 1.3.0 GDAL supports
essentially all bit pixels (1, 2, 3, 4, ..13, 14, 15, 16).  Of course the
odd sized bands are still represented as the next higher supported type. 
   
> 2. Buffering. GDAL bufferizes image data while reading it by RasterIO so
> next reading of same image blocks is quite faster than the first one. I'm
> asking myself is there any way (and any sense) to disable buffering to
> improve GDAL performance when no repeated reading of the same image is
> planed? I only have to read an image grid at once and that's it. Buffering
> seems like an activity that is not really needed in such a case, and could
> theoretically slow down the task. 

In theory you can use the ReadBlock() method on the band in C++ to
skip past all the GDAL level buffering.  However, for some drivers this
may result in other problems.  My suggestion for optimum performance
is to use RasterIO() but to read on block boundaries, and to configure
the cache size to be modest (5MB would likely be plenty) to avoid
tieing up extra memory in the GDAL level cache. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From route at cae.com  Fri Sep  9 12:04:38 2005
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Gtiff with a lot of channels
Message-ID: <62FC3C78EB032A4DB2AD05F964E931F631EB89@caemex02.caecorp.cae.com>

Dear mailing list,

I would like to create Gtiff images with a number of channels > 10.
Is this possible with GDAL, or does GDAL or the GeoTiff format limits
the number of channels ?

Thanks in advance,

Stephane


From fwarmerdam at gmail.com  Fri Sep  9 22:06:22 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Gtiff with a lot of channels
In-Reply-To: <62FC3C78EB032A4DB2AD05F964E931F631EB89@caemex02.caecorp.cae.com>
References: <62FC3C78EB032A4DB2AD05F964E931F631EB89@caemex02.caecorp.cae.com>
Message-ID: <931f8ea90509091906530f2645@mail.gmail.com>

On 9/9/05, Stephane Routelous <route@cae.com> wrote:
> Dear mailing list,
> 
> I would like to create Gtiff images with a number of channels > 10.
> Is this possible with GDAL, or does GDAL or the GeoTiff format limits
> the number of channels ?

Stephane, 

There should be no problem with up to hundreds of bands in a
TIFF file.  Well, there may be some performance degredation.  
I haven't tried thousands of channels.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Fri Sep  9 22:16:29 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
In-Reply-To: <43214E61.70606@navicon.dk>
References: <43214E61.70606@navicon.dk>
Message-ID: <931f8ea90509091916277b33a7@mail.gmail.com>

On 9/9/05, Christian G. Tveen <cgt@navicon.dk> wrote:
> Hi,
> 
> I have a number of very fine grained shape files. Is it possible to have
> gdal in some way downsample these files to be more usable for overview
> purposes ?

Christian, 

No, there is no support for geometric simplification in OGR.  I
just checked GEOS's API documentation and I don't see anything
there either.  I think I have heard there is something in PostGIS
for generalization but I didn't check into it. 

I do think a "textbook" geometry simplification algorithm would be an
asset to GEOS, and I would be willing to expose it in some fashion
through ogr if it were available. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Sat Sep 10 00:53:43 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C055@mailman.san.com>

I agree.  It would be nice to be able to render fewer points when my map
is zoomed way out.  I think arcmap does that kind of thing.  How does a
geometry simplification algorithm work?  Does it look for linear
patterns in the geometry and then somehow eliminate points based on some
sort of angle/distance tolerance?

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Friday, September 09, 2005 8:16 PM
To: Christian G. Tveen
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] downsampling shapefiles ?


On 9/9/05, Christian G. Tveen <cgt@navicon.dk> wrote:
> Hi,
> 
> I have a number of very fine grained shape files. Is it possible to 
> have gdal in some way downsample these files to be more usable for 
> overview purposes ?

Christian, 

No, there is no support for geometric simplification in OGR.  I just
checked GEOS's API documentation and I don't see anything there either.
I think I have heard there is something in PostGIS for generalization
but I didn't check into it. 

I do think a "textbook" geometry simplification algorithm would be an
asset to GEOS, and I would be willing to expose it in some fashion
through ogr if it were available. 

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From James.Browne at liu.edu  Sat Sep 10 01:21:26 2005
From: James.Browne at liu.edu (James Browne)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
Message-ID: <D9F1E2EBB6EB2C4B9F92A72D2547AF4C11234A@uc-exh-2.liunet.edu>

Hi all,

   I am still trying to understand why the ECW SDK 3.2 hangs 100% on my SMP linux box. I am testing it with gdalinfo (ver 1.3.0.0) in an attempt to minimize the code used. I am testing versions that are patched with your corrections, unpatched, and a version with some additional changes I wish I could test and submit if I can get past this. The behavior is the same for all. 

   I have traced my problem to the CNCSJP2FileView::CNCSJP2FileView constructor. One thread starts when the library is loaded and then seems to run this constructor twice, but without triggering sm_Views.Spawn(). Perhaps the second one is the inherited version in CNCSJP2FileView::CNCSJP2FileViewVector. When gdalinfo makes its request to open the file, it runs a third time and triggers sm_Views.Spawn(). The second thread seems to get to __pthread_manager() then __pthread_handle_create() but at that point the first thread dies with a SISSEGV segmentation fault. The program is then hung with a suspended thread waiting for a signal from a thread that died.     

  Maybe someone more familiar with the logic of the code can spot the problem faster than I can, although I am still looking. If it is a configuration problem, I can't see what it could be. Everything seems to compile and link fine and gdalinfo works on other file types.

  Thanks for all the effort.
                                  Jim


-----Original Message-----
From: Bill Binko [mailto:bill@binko.net]
Sent: Thu 9/1/2005 3:23 PM
To: James Browne; Tom Lynch
Cc: GDAL Developer List
Subject: RE: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
 

I have also unfortunately found a different hanging situation as I tried 
to build low-res overviews for my ECW set.  Worse, it is hanging at 100% 
CPU!

I will try to see if I can get to the bottom of it, but right now I'm very 
interested in getting this conversion done, so I need to babysit it.

Tom, does this mesh with any bugs that are fixed in your new version 
(which we're anxious for)?

Bill

On Wed, 31 Aug 2005, James Browne wrote:

> Bill,
>      Yes,I tried versions with it and without it. (and thanks for that work) It doesn't seem to even get that far in the code. In a day or two I will have the time to double check to see if I just did something dumb, or otherwise, to step through the code more closely. 
>                         Jim
> 
> 
> -----Original Message-----
> From: Bill Binko [mailto:bill@binko.net]
> Sent: Tue 8/30/2005 8:42 PM
> To: James Browne
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] ECW Still hanging -  is running on SMP a problem?
>  
> Have you applied my patch?
> 
> I know I said that compiling with -g should solve it, but you might try 
> the patch as well.
> 
> Bill
> 
> On Tue, 30 Aug 2005, James Browne wrote:
> 
> > Hi all,
> > 
> > After a few tweaks and tries, the latest ECW SDK 3.2 beta is building nicely and GDAL 1.3 builds against it.
> > 
> > However, now it hangs every time, even compiled as debug. It seems to hang at the first spawn.
> > 
> > I am running a dual Pentium 2.6G box with Debian Sarge as the OS. Is anyone else trying to run this on a Linux based SMP, and is that making threading break?
> > 
> > I will not have time to study this more for a few days. Any ideas will be appreciated greatly.
> > 
> >     Thanks
> >                     Jim
> > 
> > 
> > I tested using both gdal_translate and gdalinfo and the debugging output was the same:
> > 
> > GNU gdb 6.3-debian
> > Copyright 2004 Free Software Foundation, Inc.
> > GDB is free software, covered by the GNU General Public License, and you are
> > welcome to change it and/or distribute copies of it under certain conditions.
> > Type "show copying" to see the conditions.
> > There is absolutely no warranty for GDB.  Type "show warranty" for details.
> > This GDB was configured as "i386-linux"...Using host libthread_db library "/lib/libthread_db.so.1".
> > 
> > (gdb) run --debug ON April1994_raw.ecw
> > Starting program: /usr/local/bin/gdalinfo --debug ON /home/samba/basemap/images/4_94coast/2foot_as_1ft_ecw/April1994_raw.ecw
> > [Thread debugging using libthread_db enabled]
> > [New Thread 16384 (LWP 12685)]
> > [New Thread 32769 (LWP 12686)]
> > 
> > Program received signal SIGSEGV, Segmentation fault.
> > [Switching to Thread 32769 (LWP 12686)]
> > 0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> > (gdb) bt
> > #0  0x4058a150 in pthread_handle_create () from /lib/libpthread.so.0
> > #1  0x40589c18 in __pthread_manager () from /lib/libpthread.so.0
> > #2  0x40589d57 in __pthread_manager_event () from /lib/libpthread.so.0
> > #3  0x40bf992a in clone () from /lib/libc.so.6
> > (gdb) s
> > Single stepping until exit from function pthread_handle_create,
> > which has no line number information.
> > 
> > <CTR-C>
> > 
> > Program received signal SIGINT, Interrupt.
> > [Switching to Thread 16384 (LWP 12685)]
> > 0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> > (gdb) bt
> > #0  0x4058c604 in __pthread_sigsuspend () from /lib/libpthread.so.0
> > #1  0x4058c3c8 in __pthread_wait_for_restart_signal () from /lib/libpthread.so.0
> > #2  0x4058bc42 in pthread_create@@GLIBC_2.1 () from /lib/libpthread.so.0
> > #3  0x40c7b2c0 in NCSThreadSpawn (pThread=0x407c4c84, pFunc=0x40c74b74 <CNCSThread::ThreadFunc(void*)>, pData=0x407c4c80,
> >     bCreateSuspended=0) at ../../thread.c:390
> > #4  0x40c74d6f in CNCSThread::Spawn (this=0x407c4c80, pData=0x0, bCreateSuspended=false) at ../../NCSThread.cpp:52
> > #5  0x406d0d79 in CNCSJP2FileView (this=0x80534d8) at ../../../NCSJP2/NCSJP2FileView.cpp:52
> > #6  0x4068ccc3 in CNCSFile (this=0x80534d8) at ../../NCSFile.cpp:57
> > #7  0x400f6d86 in ECWDataset::Open () from /usr/local/lib/libgdal.so.1
> > #8  0x400f6c0c in ECWDataset::OpenECW () from /usr/local/lib/libgdal.so.1
> > #9  0x401b432f in GDALOpen () from /usr/local/lib/libgdal.so.1
> > #10 0x08049951 in main ()
> > 
> > 
> > $ gdal-config --formats
> > gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis rmf rik bsb ecw jpeg2000 hdf4 gif jpeg png
> > $ gdal-config --version
> > 1.3.0
> > 
> > 
> >   
> > 
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> > 
> 
>   
> 
> 

 


From ari.jolma at tkk.fi  Sat Sep 10 04:11:44 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C055@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C055@mailman.san.com>
Message-ID: <43229540.1030101@tkk.fi>

Chapman, Martin kirjoitti:

>I agree.  It would be nice to be able to render fewer points when my map
>is zoomed way out.  I think arcmap does that kind of thing.  How does a
>geometry simplification algorithm work?  Does it look for linear
>patterns in the geometry and then somehow eliminate points based on some
>sort of angle/distance tolerance?
>  
>

This might be one of the best available proprietary technologies: 
http://www.idevio.com/ravegeoinfo.htm

It is interesting that there is no references on this website. I made a 
quick search for these algorithms and this quote is telling: "There 
exists many different approaches and plenty of methods." (Andujar. 1999 
Geometry simplifacation.) and this is just for curve simplification. For 
curve simplification I glanced at this: "Near-Linear Time Approximation 
Algorithms for Curve Simplification in Two and Three Dimensions. by 
Agarwal et al 2002." and it is difficult for me to understand quickly 
what is the principle but the algorithm is there and it has been 
implemented at least by this guy: http://www.cs.duke.edu/~wys/curvesimp/

I think the first question to ask is: precompute the simple geometries 
or compute them in real-time? The problem is also not just point 
elimination, for example you might want to collapse several linestrings 
or polygons into one linestring or polygon. But I see the need when I 
look at how slowly large vector datasets are rendered.

Ari

>Martin
>
>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
>Warmerdam
>Sent: Friday, September 09, 2005 8:16 PM
>To: Christian G. Tveen
>Cc: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] downsampling shapefiles ?
>
>
>On 9/9/05, Christian G. Tveen <cgt@navicon.dk> wrote:
>  
>
>>Hi,
>>
>>I have a number of very fine grained shape files. Is it possible to 
>>have gdal in some way downsample these files to be more usable for 
>>overview purposes ?
>>    
>>
>
>Christian, 
>
>No, there is no support for geometric simplification in OGR.  I just
>checked GEOS's API documentation and I don't see anything there either.
>I think I have heard there is something in PostGIS for generalization
>but I didn't check into it. 
>
>I do think a "textbook" geometry simplification algorithm would be an
>asset to GEOS, and I would be willing to expose it in some fashion
>through ogr if it were available. 
>
>Best regards,
>  
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From schuyler at nocat.net  Sat Sep 10 12:08:17 2005
From: schuyler at nocat.net (Schuyler Erle)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
In-Reply-To: <931f8ea90509091916277b33a7@mail.gmail.com>
References: <43214E61.70606@navicon.dk>
	<931f8ea90509091916277b33a7@mail.gmail.com>
Message-ID: <20050910160817.GE27726@vishnu.tridity.org>

* On  9-Sep-2005 at  7:19PM PDT, Frank Warmerdam said:
> On 9/9/05, Christian G. Tveen <cgt@navicon.dk> wrote:
> > 
> > I have a number of very fine grained shape files. Is it possible to have
> > gdal in some way downsample these files to be more usable for overview
> > purposes ?
> 
> I do think a "textbook" geometry simplification algorithm would be an
> asset to GEOS, and I would be willing to expose it in some fashion
> through ogr if it were available. 

I've been thinking about this myself -- I implemented Douglas-Peucker
simplification in OGR + Python, and it was pretty slow.

I note that ogr2ogr could act as a command-line "filter" for vector
layers. Frank, how do you feel about the idea of having a plugin
architecture for ogr2ogr, so that a user could (say) specify a -plugin
option on the command line that dynamically loads an .so file at run
time. The plugin library would have hooks to parse command-line
options, and to take an OGR geometry from the input layer and have the
opportunity to return a different OGR geometry to be written to the
output layer? Line simplification is one possible use for this; vector
warping is another (which may not be that common of an operation, but
it is one I've had to contend with in the not-too-distant past)... I'm
sure we can collectively think of others.

SDE

From fwarmerdam at gmail.com  Sat Sep 10 12:28:00 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
In-Reply-To: <20050910160817.GE27726@vishnu.tridity.org>
References: <43214E61.70606@navicon.dk>
	<931f8ea90509091916277b33a7@mail.gmail.com>
	<20050910160817.GE27726@vishnu.tridity.org>
Message-ID: <931f8ea905091009285bad173b@mail.gmail.com>

On 9/10/05, Schuyler Erle <schuyler@nocat.net> wrote:
> I've been thinking about this myself -- I implemented Douglas-Peucker
> simplification in OGR + Python, and it was pretty slow.
> 
> I note that ogr2ogr could act as a command-line "filter" for vector
> layers. Frank, how do you feel about the idea of having a plugin
> architecture for ogr2ogr, so that a user could (say) specify a -plugin
> option on the command line that dynamically loads an .so file at run
> time. The plugin library would have hooks to parse command-line
> options, and to take an OGR geometry from the input layer and have the
> opportunity to return a different OGR geometry to be written to the
> output layer? Line simplification is one possible use for this; vector
> warping is another (which may not be that common of an operation, but
> it is one I've had to contend with in the not-too-distant past)... I'm
> sure we can collectively think of others.

Schuyler,

I don't think I would want to implement a plugin architecture for
ogr2ogr itself.  It is just a (not very pretty) utility.  What might have
better leverage is doing something similar for the OGR VRT format.
So an OGR VRT datasource could include a pointer to an external
plugin shared library that could apply various kinds of processing
to the features going through the VRT.  

You could do this now by implementing a new format driver as
a plugin, but then you are stuck implementing alot of extra driver
logic.  A VRT plugin might be much simplified.  Just a function
that receives OGRFeature's and can morph the feature or geometry
as it wishes, possible removing or returning multiple features. 

Nevertheless, I think it would be better to build some broadly useful
functions (like generlization) directly into OGR. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From strk at keybit.net  Sat Sep 10 16:20:17 2005
From: strk at keybit.net (strk)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
In-Reply-To: <931f8ea90509091916277b33a7@mail.gmail.com>
References: <43214E61.70606@navicon.dk>
	<931f8ea90509091916277b33a7@mail.gmail.com>
Message-ID: <20050910202017.GA36797@keybit.net>

On Fri, Sep 09, 2005 at 10:16:29PM -0400, Frank Warmerdam wrote:
> On 9/9/05, Christian G. Tveen <cgt@navicon.dk> wrote:
> > Hi,
> > 
> > I have a number of very fine grained shape files. Is it possible to have
> > gdal in some way downsample these files to be more usable for overview
> > purposes ?
> 
> Christian, 
> 
> No, there is no support for geometric simplification in OGR.  I
> just checked GEOS's API documentation and I don't see anything
> there either.  I think I have heard there is something in PostGIS
> for generalization but I didn't check into it. 

The simplify() PostGIS function implements the Douglas-Peuker
line simplification algorithm.

--strk;

From fwarmerdam at gmail.com  Sun Sep 11 14:40:21 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Virtualized IO Changes
Message-ID: <931f8ea905091111401167791a@mail.gmail.com>

Folks,

I am in the middle of substantial changes to the VSI (Virtual System
Interface) layer of GDAL so that I can read and write from non-filesystem
objects.  

While this is under constructions, GDAL CVS may be somewhat unstable.

The main objective of the new virtualization is to allow reading and writing
a variety of file formats to/from memory buffers.   The current approach
is to treat the "large file" API (ie. VSIFReadL, VSIFOpenL, etc) as
virtualizable.  New filesystem handlers can be installed with particular
subtrees of the filesystem.  Currently /vsimem/* is "owned" by the 
memory handler, and everything else is owned by the win32 or
unix stdio handler. 

One consequence of this change is that only file formats that exclusively
use the large file API for file access will be virtualizable.  I will be
modifying some of the drivers to do this as needed. 

Let me know if anyone runs into problems, or is interested in utilizing
this new feature. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dmorissette at dmsolutions.ca  Sun Sep 11 23:01:13 2005
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
In-Reply-To: <931f8ea905091009285bad173b@mail.gmail.com>
References: <43214E61.70606@navicon.dk>	<931f8ea90509091916277b33a7@mail.gmail.com>	<20050910160817.GE27726@vishnu.tridity.org>
	<931f8ea905091009285bad173b@mail.gmail.com>
Message-ID: <4324EF79.4@dmsolutions.ca>

Frank Warmerdam wrote:
> 
> Nevertheless, I think it would be better to build some broadly useful
> functions (like generlization) directly into OGR. 
> 

FWIW, I quickly hacked a LineString downsampling function into a local 
copy of ogr2ogr a few days ago. I have attached a patch file that can be 
applied to a recent copy of ogr2ogr.cpp if anyone wants to try it. Add 
"-gen_tol <value>" to the OGR2OGR command to enable downsampling to the 
specified tolerance (specified in the same units as the coordinates of 
your data).

This code is still untested and is not ready to officially integrate in 
OGR because it supports only LineStrings (other geometry types are left 
untouched) and the function should probably be moved to the 
OGRGeometryFactory class. Use at your own risk.

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogr2ogr_generalize.patch
Type: text/x-patch
Size: 5347 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050911/ec929a64/ogr2ogr_generalize.bin
From mn at blominfo.dk  Mon Sep 12 04:49:37 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Adding GCPs on-the-fly
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E522@kernen.blomkbh.dk>

Is it possible to specify GCPs in gdalwarp without the need to first add
them using gdal_translate ? I would like to skip the intermediate
"GCP'ed" file needed for this.

 

Best regards

/Morten

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050912/dc0555ef/attachment.html
From support at geoimage.fr  Mon Sep 12 05:19:51 2005
From: support at geoimage.fr (=?iso-8859-1?Q?Fr=E9d=E9ric_Trastour?=)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Problem of creation with Gtiff driver on Solaris
References: <05cb01c5b490$d0893370$0a01a8c0@pili>
	<931f8ea9050908102460933d28@mail.gmail.com>
Message-ID: <0a5b01c5b77b$21a7c270$0a01a8c0@pili>

Hello Franck,

>>
>>Try the patch (adding TIFFSeekFile(tif,0,SEEK_SET) before the
>>WriteOK call and see if that helps.
>>

Thanks a lot, this solves the problem.

It's really strange anyway and It's not very reassuring to see that simple file
access may be broken on Solaris. There are probably tons of similar code
in other drivers...

>>
>>It was recently removed as there seemed to be no sensible reason
>>for it, and we though that modern Solaris surely would not still
>>have such a problem (assuming I had diagnosed it correctly in the
>>first place).  I am now suspecting that was a mistake.
>>

I think the problem is not solved on Solaris 10 as a user has posted a similar
mail to GDAL list on 1st september.

Perhaps you may consider to reinsert this patch into libtiff for next releases.

Thanks again,

Fr?d?ric.
_________________________________________________________________
Fr?d?ric Trastour - GEOIMAGE - dev@geoimage.fr
----- Original Message ----- 
From: "Frank Warmerdam" <fwarmerdam@gmail.com>
To: "Fr?d?ric Trastour" <support@geoimage.fr>
Cc: <gdal-dev@lists.maptools.org>; "TIFF" <tiff@lists.maptools.org>
Sent: Thursday, September 08, 2005 7:24 PM
Subject: Re: [Gdal-dev] Problem of creation with Gtiff driver on Solaris


On 9/8/05, Fr?d?ric Trastour <support@geoimage.fr> wrote:
> Hello,
>
> I am trying to find why GDAL 1.3.0 with the internal libtiff on Solaris
doesn't
> create valid GEOtiff.
>

Fr?d?ric,

Several years ago I applied the following patch to libtiff's tif_open.c.
It was recently removed as there seemed to be no sensible reason
for it, and we though that modern Solaris surely would not still
have such a problem (assuming I had diagnosed it correctly in the
first place).  I am now suspecting that was a mistake.

Try the patch (adding TIFFSeekFile(tif,0,SEEK_SET) before the
WriteOK call and see if that helps.

warmerda@gdal2200[108]% cvs diff -r1.5 -r1.6 tif_open.c
Index: tif_open.c
===================================================================
RCS file: /cvs/maptools/cvsroot/libtiff/libtiff/tif_open.c,v
retrieving revision 1.5
retrieving revision 1.6
diff -u -r1.5 -r1.6
--- tif_open.c  30 Sep 2000 04:18:55 -0000      1.5
+++ tif_open.c  20 Jul 2001 02:22:46 -0000      1.6
@@ -1,4 +1,4 @@
-/* $Header: /cvs/maptools/cvsroot/libtiff/libtiff/tif_open.c,v 1.5
2000/09/30 04:18:55 warmerda Exp $ */
+/* $Header: /cvs/maptools/cvsroot/libtiff/libtiff/tif_open.c,v 1.6
2001/07/20 02:22:46 warmerda Exp $ */

 /*
  * Copyright (c) 1988-1997 Sam Leffler
@@ -285,6 +285,15 @@
                if (tif->tif_flags & TIFF_SWAB)
                        TIFFSwabShort(&tif->tif_header.tiff_version);
                tif->tif_header.tiff_diroff = 0;        /* filled in later */
+
+                /*
+                 * This seek shouldn't be necessary, but I have had some
+                 * crazy problems with a failed fseek() on Solaris leaving
+                 * the current file pointer out of whack when an fwrite()
+                 * is done.
+                 */
+                TIFFSeekFile( tif, 0, SEEK_SET );
+
                if (!WriteOK(tif, &tif->tif_header, sizeof (TIFFHeader))) {
                        TIFFError(name, "Error writing TIFF header");
                        goto bad;




> Here is a trace (some printfs added in tif_vsi.c) of a gdal_translate
execution:
>
> GDAL/GEO: GEODataset::Open :im1x1.geo
> GDAL: GDALOpen(im1x1.geo) succeeds as GEO.
> Input file size is 1, 1
> 0.TIFFOpen FILENAME=im11.TIF, MODE=w+b --> FILE=fe437c64
> tiffReadProc FILE=fe437c64, BUF=2d000, SIZE=8 -->0 [POS=0]
> ** tiffWriteProc FILE=fe437c64, BUF=2d000, SIZE=8 -->8 [POS=-8184] // A 'tell'
> just after the write returns -8184 instead of 8 !
> 100 - done.
> ** tiffSeekProc FILE=fe437c64, OFFSET=0, WHENCE=SEEK_END --> 0 // 0 instead of
8
> tiffWriteProc FILE=fe437c64, BUF=4af00, SIZE=1 -->1 [POS=1]
> tiffSeekProc FILE=fe437c64, OFFSET=0, WHENCE=SEEK_END --> 1
> tiffSeekProc FILE=fe437c64, OFFSET=4, WHENCE=SEEK_SET --> 4
> tiffWriteProc FILE=fe437c64, BUF=ffb8dc5c, SIZE=4 -->4 [POS=8]
> tiffSeekProc FILE=fe437c64, OFFSET=164, WHENCE=SEEK_SET --> 164
> tiffSeekProc FILE=fe437c64, OFFSET=164, WHENCE=SEEK_SET --> 164
> tiffWriteProc FILE=fe437c64, BUF=2f110, SIZE=128 -->128 [POS=292]
> tiffSeekProc FILE=fe437c64, OFFSET=2, WHENCE=SEEK_SET --> 2
> tiffWriteProc FILE=fe437c64, BUF=ffb8dcd6, SIZE=2 -->2 [POS=4]
> tiffWriteProc FILE=fe437c64, BUF=4af00, SIZE=156 -->156 [POS=160]
> tiffWriteProc FILE=fe437c64, BUF=ffb8dcd0, SIZE=4 -->4 [POS=164]
> tiffCloseProc FILE=fe437c64
>
> ERROR 4: `im11.TIF' not recognised as a supported file format.
> ERROR 4: `im11.TIF' not recognised as a supported file format.
>
> GDAL: GDALDeregister_GTiff() called.
>
> As you can see there are two strange results (marked with **).
> Any ideas about that ?
>
> Does it work on any other unix platforms ?
>
> Thanks
> Fr?d?ric.
> _________________________________________________________________
> Fr?d?ric Trastour - SpacEyes - dev@spaceyes.fr
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Sep 12 09:47:33 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Problem of creation with Gtiff driver on Solaris
In-Reply-To: <0a5b01c5b77b$21a7c270$0a01a8c0@pili>
References: <05cb01c5b490$d0893370$0a01a8c0@pili>
	<931f8ea9050908102460933d28@mail.gmail.com>
	<0a5b01c5b77b$21a7c270$0a01a8c0@pili>
Message-ID: <931f8ea905091206474a87cc2d@mail.gmail.com>

On 9/12/05, Fr?d?ric Trastour <support@geoimage.fr> wrote:
> Hello Franck,
> 
> >>
> >>Try the patch (adding TIFFSeekFile(tif,0,SEEK_SET) before the
> >>WriteOK call and see if that helps.
> >>
> 
> Thanks a lot, this solves the problem.
> 
> It's really strange anyway and It's not very reassuring to see that simple file
> access may be broken on Solaris. There are probably tons of similar code
> in other drivers...

Fr?d?ric,

Ed Grissom informed me that:

>Not sure if this has *any* bearing at all, but the doc for "fopen" for some
>STD_C_LIBs says that if you open a file for modify ("+"), then you must
>fseek (or fflush?)  between any freads and fwrites.  I believe that for some
>systems, this is not strictly necessary, but for others it is.

Thus, it may be that the Solaris stdio isn't broken, it just chooses to make
things difficult while staying within the specification.  I don't know how many
other parts of the library may be affected but this is the one that has bitten
us in the past.  

I think the seek was removed in the past because it made it difficult for
someone to implement stream oriented access to TIFF files though I am not
very sure about that aspect.  In any event, I think I had better re-introduce
the seek in the core code till we work out more details. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Mon Sep 12 09:56:50 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Adding GCPs on-the-fly
In-Reply-To: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E522@kernen.blomkbh.dk>
References: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E522@kernen.blomkbh.dk>
Message-ID: <931f8ea905091206564add2d56@mail.gmail.com>

On 9/12/05, Morten Nielsen <mn@blominfo.dk> wrote:
>  
> Is it possible to specify GCPs in gdalwarp without the need to first add
> them using gdal_translate ? I would like to skip the intermediate "GCP'ed"
> file needed for this. 

Morten, 

There is no commandline switches for this in gdalwarp, but you could
create an intermediate .vrt file and add the gcps to that.  This would
avoid extra work copying the image data.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Mon Sep 12 10:41:16 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] segfault in SHPCreateObject
Message-ID: <4325938C.1060404@tkk.fi>

Any ideas why this segfaults:

my $fd = new ogr::FeatureDefn;
my $f = new ogr::Feature($fd);
my $g = new ogr::Geometry($ogr::wkbPolygon);
my $r = new ogr::Geometry($ogr::wkbLinearRing);
do this many times:        $r->AddPoint($lon,$lat);
$g->AddGeometry($r);
$g->CloseRings;
$f->SetGeometry($g);
$layer->CreateFeature($f);

layer should be ok, I probably need something more into those new's?

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From fwarmerdam at gmail.com  Mon Sep 12 11:11:04 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] segfault in SHPCreateObject
In-Reply-To: <4325938C.1060404@tkk.fi>
References: <4325938C.1060404@tkk.fi>
Message-ID: <931f8ea90509120811aaf46f@mail.gmail.com>

On 9/12/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Any ideas why this segfaults:
> 
> my $fd = new ogr::FeatureDefn;
> my $f = new ogr::Feature($fd);
> my $g = new ogr::Geometry($ogr::wkbPolygon);
> my $r = new ogr::Geometry($ogr::wkbLinearRing);
> do this many times:        $r->AddPoint($lon,$lat);
> $g->AddGeometry($r);
> $g->CloseRings;
> $f->SetGeometry($g);
> $layer->CreateFeature($f);
> 
> layer should be ok, I probably need something more into those new's?

Ari,

When creating a feature you intend to write out to a layer with
CreateFeature(), you should use the featuredefn from that layer
for the feature.   It should be very rare that you need to create
your own freestanding OGRFeatureDefn objects. 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Peter.Nagy at vexcel.com  Mon Sep 12 13:00:21 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] downsampling shapefiles ?
In-Reply-To: <931f8ea905091009285bad173b@mail.gmail.com>
References: <43214E61.70606@navicon.dk>
	<931f8ea90509091916277b33a7@mail.gmail.com>
	<20050910160817.GE27726@vishnu.tridity.org>
	<931f8ea905091009285bad173b@mail.gmail.com>
Message-ID: <Pine.CYG.4.58.0509121047540.1708@Thwack>


I wrote a DP-like algorithm in c that also ensures the results do not
cross or have spurs, which for speed required a grid of polygon edges so
that only a subset of edges needed to be checked for the crossing
condition.  It also would have been nice to make sure that neighboring
polygons with shared edges could have been generalized together to
preserve the edge, so that snapping afterwards would not be needed, but I
did not go that far.  It would be a nice feature though if neighboring
countries retained nice borders after simplification!  Something to think
about if someone adds this - maybe I will some day but I'm booked now.

Cheers,

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


On Sat, 10 Sep 2005, Frank Warmerdam wrote:

> On 9/10/05, Schuyler Erle <schuyler@nocat.net> wrote:
> > I've been thinking about this myself -- I implemented Douglas-Peucker
> > simplification in OGR + Python, and it was pretty slow.
> >
> > I note that ogr2ogr could act as a command-line "filter" for vector
> > layers. Frank, how do you feel about the idea of having a plugin
> > architecture for ogr2ogr, so that a user could (say) specify a -plugin
> > option on the command line that dynamically loads an .so file at run
> > time. The plugin library would have hooks to parse command-line
> > options, and to take an OGR geometry from the input layer and have the
> > opportunity to return a different OGR geometry to be written to the
> > output layer? Line simplification is one possible use for this; vector
> > warping is another (which may not be that common of an operation, but
> > it is one I've had to contend with in the not-too-distant past)... I'm
> > sure we can collectively think of others.
>
> Schuyler,
>
> I don't think I would want to implement a plugin architecture for
> ogr2ogr itself.  It is just a (not very pretty) utility.  What might have
> better leverage is doing something similar for the OGR VRT format.
> So an OGR VRT datasource could include a pointer to an external
> plugin shared library that could apply various kinds of processing
> to the features going through the VRT.
>
> You could do this now by implementing a new format driver as
> a plugin, but then you are stuck implementing alot of extra driver
> logic.  A VRT plugin might be much simplified.  Just a function
> that receives OGRFeature's and can morph the feature or geometry
> as it wishes, possible removing or returning multiple features.
>
> Nevertheless, I think it would be better to build some broadly useful
> functions (like generlization) directly into OGR.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From holl at gdf-hannover.de  Mon Sep 12 10:30:00 2005
From: holl at gdf-hannover.de (Stephan Holl)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] [ANNOUNCE]: English GDF Hannover GRASS GIS tutorial,
 Version 1.2 released
Message-ID: <20050912163000.54b7f542@localhost>

Dear FOSS GIS users,

[sorry for crossposting]

GDF Hannover is proud to present the English translation of the
well-known German GRASS GIS Tutorial version 1.2.

The book covers an introduction to the Free Geographic Information
System GRASS 6.0. It extends the available literature about GRASS 6 
by aspects of installation and practical usage and offers up to date
material for the use of the latest GRASS developments at the time of
writing.

The document focuses on the new vector functionalities, network
analysis, database management systems (DBMS) and the new graphical
user interface (GUI). A section about the interaction with Quantum GIS
as graphical user interface is also included.

It is released under GNU/FDL and available from:

	http://www.gdf-hannover.de/literature

Best regards

Your GDF Hannover

-- 
GDF Hannover - Solutions for spatial data analysis and remote sensing
Hannover Office      -     Mengendamm 16d      -     D-30177 Hannover
Internet: www.gdf-hannover.de      -      Email: holl@gdf-hannover.de
Phone : ++49-(0)511.39088507       -        Fax: ++49-(0)511.39088508

From edward at sidefx.com  Mon Sep 12 11:46:51 2005
From: edward at sidefx.com (Edward Lam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Tiff] Re: [Gdal-dev] Problem of creation with Gtiff driver on
	Solaris
In-Reply-To: <931f8ea905091206474a87cc2d@mail.gmail.com>
References: <05cb01c5b490$d0893370$0a01a8c0@pili>	<931f8ea9050908102460933d28@mail.gmail.com>	<0a5b01c5b77b$21a7c270$0a01a8c0@pili>
	<931f8ea905091206474a87cc2d@mail.gmail.com>
Message-ID: <4325A2EB.8050700@sidefx.com>

Frank Warmerdam wrote:
> I think the seek was removed in the past because it made it difficult for
> someone to implement stream oriented access to TIFF files though I am not
> very sure about that aspect.  In any event, I think I had better re-introduce
> the seek in the core code till we work out more details. 

Ah, now this makes more sense. In bug #756, no one mentioned why this was 
necessary. It makes it more difficult for stream-oriented but I believe 
tif_stream now allows seeking even with strstreams.

-edward

From marco_vieira at uk2.net  Mon Sep 12 19:51:03 2005
From: marco_vieira at uk2.net (Marco Vieira)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] gdal memory load
Message-ID: <37466.200.169.121.246.1126569063.squirrel@maxproxy9.uk2net.com>

Hi list.
 I perceived that mapserver was not freeing memory after requests then i
tested the memory load in some situations and noticed that this only
happen in with raster databases (with gdal procedures). I tried than the
same with gdalwarp command and got the same.
My test:
gdalwarp -s_srs +proj=tmerc +ellps=intl +k_0=0.9996 +x_0=500000
+y_0=10000000 +lat_0=0 +lon_0=-45 -t_srs +proj=latlong +ellps=WGS84
foo.tif foobar.tif

(foo.tif has 597M)

free command before gdalwarp:
             total       used       free     shared    buffers     cached
Mem:        906736     194520     712216          0      10520      98032
-/+ buffers/cache:      85968     820768
Swap:      2249060          0    2249060
----------
free during gdalwarp:
             total       used       free     shared    buffers     cached
Mem:        906736     902752       3984          0       1364     746280
-/+ buffers/cache:     155108     751628
Swap:      2249060        716    2248344
----------
free after gdalwarp:
             total       used       free     shared    buffers     cached
Mem:        906736     845860      60876          0       1052     751748
-/+ buffers/cache:      93060     813676
Swap:      2249060        716    2248344

How can I flush memory cached by gdal lib (specially after mapserver
requests)?

my system:
gdal 1.3.0
geos 1.1.4
mapserv 4.6.1
Linux 2.6.8-2-386 (debian)
gcc 4.0.1

Thanks.

Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net

From fwarmerdam at gmail.com  Mon Sep 12 22:43:05 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] gdal memory load
In-Reply-To: <37466.200.169.121.246.1126569063.squirrel@maxproxy9.uk2net.com>
References: <37466.200.169.121.246.1126569063.squirrel@maxproxy9.uk2net.com>
Message-ID: <931f8ea9050912194356002f03@mail.gmail.com>

On 9/12/05, Marco Vieira <marco_vieira@uk2.net> wrote:
> free command before gdalwarp:
>              total       used       free     shared    buffers     cached
> Mem:        906736     194520     712216          0      10520      98032
> -/+ buffers/cache:      85968     820768
> Swap:      2249060          0    2249060
> ----------
> free during gdalwarp:
>              total       used       free     shared    buffers     cached
> Mem:        906736     902752       3984          0       1364     746280
> -/+ buffers/cache:     155108     751628
> Swap:      2249060        716    2248344
> ----------
> free after gdalwarp:
>              total       used       free     shared    buffers     cached
> Mem:        906736     845860      60876          0       1052     751748
> -/+ buffers/cache:      93060     813676
> Swap:      2249060        716    2248344
> 
> How can I flush memory cached by gdal lib (specially after mapserver
> requests)?

Marco,

I am not aware of significant memory leaks in GDAL and in any event,
once an application finishes all memory used by the process is returned 
to the operating system.  I am no whiz at understanding the output of
the free command, but I read the above as indicating that "cached" went
from 98032 to 751748.  It seems to me that gdalwarp accessed files on disk
and the operating system has kept these in cached in RAM after the 
program finished.  This does not seem like a problem at all. 

For instance, I got this free report on my system.
warmerda@gdal2200[253]% free
             total       used       free     shared    buffers     cached
Mem:       1036816     542456     494360          0        252      66812
-/+ buffers/cache:     475392     561424
Swap:      1228964      46768    1182196

I then ran the command "cp gtopo.tif gtopo2.tif" and then free again and
got:
             total       used       free     shared    buffers     cached
Mem:       1036816     649464     387352          0        372     173564
-/+ buffers/cache:     475528     561288
Swap:      1228964      46764    1182200

As you can see the "cached" number when up quite a bit, but the
free number when down.  That is just because the operating system 
kept gtopo.tif and gtopo2.tif in it's RAM cache.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Tue Sep 13 01:41:43 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] segfault in SHPCreateObject
In-Reply-To: <4325938C.1060404@tkk.fi>
References: <4325938C.1060404@tkk.fi>
Message-ID: <43266697.5020204@tkk.fi>

Back to this.. there were a couple of things which were sorted out in 
IRC yesterday, there is the fact that it segfaulted, which is a policy 
issue perhaps, the policy could be "one should not be able to produce a 
seg fault by a scripting interface". Does that sound reasonable?

The issue here is that if a crippled polygon (into which no ring has 
been put, i.e. the $g->AddGeometry($r); is missing from below -- as it 
was because it silently failed) is given to SHPWriteOGRObject it seg 
faults. This is because it uses getNumInteriorRings()+1 as the nRings, 
thus implicitly assuming ExteriorRing exists. SHPWriteOGRObject could 
also return "corrupt data" in this case.

Ari

Ari Jolma kirjoitti:

> Any ideas why this segfaults:
>
> my $fd = new ogr::FeatureDefn;
> my $f = new ogr::Feature($fd);
> my $g = new ogr::Geometry($ogr::wkbPolygon);
> my $r = new ogr::Geometry($ogr::wkbLinearRing);
> do this many times:        $r->AddPoint($lon,$lat);
> $g->AddGeometry($r);
> $g->CloseRings;
> $f->SetGeometry($g);
> $layer->CreateFeature($f);
>
> layer should be ok, I probably need something more into those new's?
>
> Ari
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Tue Sep 13 03:51:29 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] segfault in SHPCreateObject
In-Reply-To: <931f8ea90509120811aaf46f@mail.gmail.com>
References: <4325938C.1060404@tkk.fi> <931f8ea90509120811aaf46f@mail.gmail.com>
Message-ID: <43268501.2070807@tkk.fi>

Frank Warmerdam wrote:

>When creating a feature you intend to write out to a layer with
>CreateFeature(), you should use the featuredefn from that layer
>for the feature.   It should be very rare that you need to create
>your own freestanding OGRFeatureDefn objects. 
>  
>

Sorry for making multiple threads but my thunderbird tends to classify 
gdal-dev as junk and I did not notice this before.

Ok, but that was not the source of the segfault I think. In this case 
the layer is a brand new, just constructed. So the correct (?) way to 
create a new layer  is to:

create layer
CreateFields into the layer
featuredefn = layer.GetLayerDefn
use this featuredefn for all features which are CreateFeature'd into the 
layer

Ari


From fwarmerdam at gmail.com  Tue Sep 13 10:22:35 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] segfault in SHPCreateObject
In-Reply-To: <43268501.2070807@tkk.fi>
References: <4325938C.1060404@tkk.fi> <931f8ea90509120811aaf46f@mail.gmail.com>
	<43268501.2070807@tkk.fi>
Message-ID: <931f8ea90509130722726a0d95@mail.gmail.com>

On 9/13/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Sorry for making multiple threads but my thunderbird tends to classify
> gdal-dev as junk and I did not notice this before.

Ari,

/me expresses shock that gdal-dev would be considered junk!
 
> Ok, but that was not the source of the segfault I think. In this case
> the layer is a brand new, just constructed. So the correct (?) way to
> create a new layer  is to:
> 
> create layer
> CreateFields into the layer
> featuredefn = layer.GetLayerDefn
> use this featuredefn for all features which are CreateFeature'd into the
> layer

This is the correct sequence.   

I do think that OGR ought to do some more run-time
checking that features use the right featuredefn.  
If you point out particular cases that don't currently I 
will look into it.

Unfortunately, due to the OGR architecture where 
methods such as CreateFeature() are directly overridden
by the format specific classes it is hard to check 
pre-conditions without incorporating the code into all
the driver implementations.  I could put some extra
checking in the C cover functions which would help
applications using the C interface (and all the swig bindings). 
Perhaps that would be a better angle.
 
Unfortunately that leaves us in the case where the C++
interface becomes uniquely dangerous. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Tue Sep 13 11:08:54 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] segfault in SHPCreateObject
In-Reply-To: <931f8ea90509130722726a0d95@mail.gmail.com>
References: <4325938C.1060404@tkk.fi> <931f8ea90509120811aaf46f@mail.gmail.com>
	<43268501.2070807@tkk.fi>
	<931f8ea90509130722726a0d95@mail.gmail.com>
Message-ID: <4326EB86.2050103@tkk.fi>

Frank Warmerdam kirjoitti:

>I do think that OGR ought to do some more run-time
>checking ...
>it is hard to check 
>pre-conditions without incorporating the code into all
>the driver implementations.  I could put some extra
>checking in the C cover functions which would help
>applications using the C interface (and all the swig bindings). 
>Perhaps that would be a better angle.
> 
>Unfortunately that leaves us in the case where the C++
>interface becomes uniquely dangerous. 
>  
>

The question was whether "one should not be able to produce a seg fault 
by a scripting interface" sounded reasonable. I guess that's of course 
also up to the binding developers to put more shields. I'm very 
interested in having bullet proof code in the sense that the (stupid) 
end user hacking the script just shouldn't be able to blow up to whole 
thing. That's because I'm giving the end user a CLI where to hack in his 
stupid code, and they will do that since they are often students in my 
case. Cryptic error messages are always better than segfaults. But as 
said, there are many paths.

Ari


From fwarmerdam at gmail.com  Tue Sep 13 11:17:03 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] segfault in SHPCreateObject
In-Reply-To: <4326EB86.2050103@tkk.fi>
References: <4325938C.1060404@tkk.fi> <931f8ea90509120811aaf46f@mail.gmail.com>
	<43268501.2070807@tkk.fi> <931f8ea90509130722726a0d95@mail.gmail.com>
	<4326EB86.2050103@tkk.fi>
Message-ID: <931f8ea905091308171518016@mail.gmail.com>

On 9/13/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> The question was whether "one should not be able to produce a seg fault
> by a scripting interface" sounded reasonable.

Ari, 

I think it is over ambitious in the case of GDAL and OGR
to expect to achieve the above goal.  However, I would like
to try and make it somewhat hard to produce a segfault
from the scripting interface. 

> I guess that's of course
> also up to the binding developers to put more shields. I'm very
> interested in having bullet proof code in the sense that the (stupid)
> end user hacking the script just shouldn't be able to blow up to whole
> thing. That's because I'm giving the end user a CLI where to hack in his
> stupid code, and they will do that since they are often students in my
> case. Cryptic error messages are always better than segfaults. But as
> said, there are many paths.

I understand the rationale, I just think it may be over ambitious.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From thomw00 at yahoo.com  Tue Sep 13 11:32:05 2005
From: thomw00 at yahoo.com (Thomas Windholz)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] ogr2ogr -sql output lost geometry
Message-ID: <20050913153205.77107.qmail@web42102.mail.yahoo.com>

All,
 
I used ogr2ogr to export a point layer from postgres/postgis into a shapefile ... everything worked fine (I can open it and load/view locations). Then I used a basic SQL statement (-sql "SELECT * FROM ksamples WHERE chloroph=108") and all geometry was lost (cannot load locations), yet ksamples.dbf table is returned ok (only the records having chloroph=108 are in the dbf table).

 
Originally I tried to use gdal (ogr), specifically poDS->ExecuteSQL(...) to retrieve spatial locations based on a joined non-spatial table's attribute information.
 
pszSQLStatement = "SELECT * FROM test INNER JOIN ksample ON test.c_id = ksample.chloroph WHERE something = 467";
poResultSet = poDS->ExecuteSQL( pszSQLStatement, NULL, NULL );
 
The poResultSet had not spatial attributes, but all the non-spatial values were ok. First, since I am new to gdal and postgis (I am -was- from the ESRI world) I thought it was just my portion of the code ... but as mentioned above ogr2ogr does the same?
 
I noticed in the archives of April 05 someone posting a similar issue ... but no solutions that I could find.
 
Using: FWTools0.9.8, PostgreSQL 1.2.1, PostGIS 1.0.2
 
Any help/hints are appreciated.
 
Thanks,
Thomas
 


		
---------------------------------
Yahoo! for Good
 Click here to donate to the Hurricane Katrina relief effort. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050913/47087cbb/attachment.html
From ari.jolma at tkk.fi  Tue Sep 13 17:19:33 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Testing creating and opening raster datasets
Message-ID: <43274265.3080505@tkk.fi>

Hi, below is an output from my test script for gdal.pm. It goes through 
all available drivers and all announced datatypes, and creates a dataset 
and then opens it and checks if the size is ok. Looks good, only minor 
issues:

- What does the "unsupported combination.." mean and how to detect it 
before creating a dataset?
- ENVI hdr reports that it can create "UInt32Float32" datatypes, this is 
a bug in envidataset.cpp:1375.
- Atlantis MFF2 (HKV) Raster announces that it can create datasets of 
more types than it actually can.
- It takes a bit of guessing (I hard coded that into the test script) 
what filename to give to the Open function to make it succeed. Is the 
extension available somewhere in the metadata? (sorry, too lazy to look 
now).

Ari

--->  Virtual Raster
Byte: ok (only create)
Int16: ok (only create)
UInt16: ok (only create)
Int32: ok (only create)
UInt32: ok (only create)
Float32: ok (only create)
Float64: ok (only create)
CInt16: ok (only create)
CInt32: ok (only create)
CFloat32: ok (only create)
CFloat64: ok (only create)

--->  GeoTIFF
Byte: ok
UInt16: ok
Int16: ok
UInt32: ok
Int32: ok
Float32: ok
Float64: ok
CInt16: ok
CInt32: ok
CFloat32: ok
CFloat64: ok

--->  National Imagery Transmission Format
Byte: ok
UInt16: ok
Int16: ok
UInt32: ok
Int32: ok
Float32: ok
CFloat32: not ok (create failed)
Unsupported combination of PVTYPE(C) and NBPP(64).
CFloat64: not ok (create failed)
Unsupported combination of PVTYPE(C) and NBPP(12).

--->  Erdas Imagine Images (.img)
Byte: ok
Int16: ok
UInt16: ok
Int32: ok
UInt32: ok
Float32: ok
Float64: ok
CFloat32: ok
CFloat64: ok

--->  ELAS
Byte: ok
Float32: ok
Float64: ok

--->  In Memory Raster
Byte: ok (only create)
Int16: ok (only create)
UInt16: ok (only create)
Int32: ok (only create)
UInt32: ok (only create)
Float32: ok (only create)
Float64: ok (only create)
CInt16: ok (only create)
CInt32: ok (only create)
CFloat32: ok (only create)
CFloat64: ok (only create)

--->  MS Windows Device Independent Bitmap
Byte: ok

--->  PCIDSK Database File
Byte: ok
UInt16: ok
Int16: ok
Float32: ok

--->  ILWIS Raster Map
Byte: ok
Int16: ok
Int32: ok
Float64: ok

--->  Portable Pixmap Format (netpbm)
Byte: ok
UInt16: ok

--->  ENVI .hdr Labelled
Byte: ok
Int16: ok
UInt16: ok
Int32: ok
UInt32Float32: not ok (create failed silently)
Float64: ok
CFloat32: ok
CFloat64: ok

--->  ESRI .hdr Labelled
Byte: ok
Int16: ok
UInt16: ok
Float32: ok

--->  PCI .aux Labelled
Byte: ok
Int16: ok
UInt16: ok
Float32: ok

--->  Atlantis MFF Raster
Byte: ok
UInt16: ok
Float32: ok
CInt16: ok
CFloat32: ok

--->  Atlantis MFF2 (HKV) Raster
Byte: ok
Int16: ok
UInt16: ok
Int32: not ok (create failed)
Attempt to create HKV file with currently unsupported data type (Int32).
UInt32: not ok (create failed)
Attempt to create HKV file with currently unsupported data type (UInt32).
CInt16: ok
CInt32: ok
Float32: ok
Float64: not ok (create failed)
Attempt to create HKV file with currently unsupported data type (Float64).
CFloat32: ok
CFloat64: not ok (create failed)
Attempt to create HKV file with currently unsupported data type (CFloat64).

--->  VTP .bt (Binary Terrain) 1.3 Format
Int16: ok
Int32: ok
Float32: ok

--->  Image Data and Analysis

--->  Raster Matrix Format
Byte: ok


From fwarmerdam at gmail.com  Tue Sep 13 21:16:33 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Testing creating and opening raster datasets
In-Reply-To: <43274265.3080505@tkk.fi>
References: <43274265.3080505@tkk.fi>
Message-ID: <931f8ea905091318166f886264@mail.gmail.com>

On 9/13/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> - What does the "unsupported combination.." mean and how to detect it
> before creating a dataset?

Ari,

There are cases where particular combinations of pixel 
data type and band number are not supported.   However,
in the NITF driver case, I think I just never implemented proper
creation support for complex data types.  I have removed these
from the format list till I have time to implement and test them
properly.

> - ENVI hdr reports that it can create "UInt32Float32" datatypes, this is
> a bug in envidataset.cpp:1375.

Fixed.

> - Atlantis MFF2 (HKV) Raster announces that it can create datasets of
> more types than it actually can.

I'll leave this to Gillian to address. 

> - It takes a bit of guessing (I hard coded that into the test script)
> what filename to give to the Open function to make it succeed. Is the
> extension available somewhere in the metadata? (sorry, too lazy to look
> now).

Where there is a clearly preferred extension for a format, 
it is set in the driver metadata like this:
        poDriver->SetMetadataItem( GDAL_DMD_EXTENSION, "ntf" );

For some formats there is no obvious preferred extension.  In some
cases it may just be that there is no metadata definition of it when
there ought to be. 

I would add that while I try to declare enough information in the
driver metadata to allow deciding what options are supported by
what formats, I have not been completely successful.  To some 
extent the user still ends up having to read the format docs for
odd situations. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From awaxman at speakeasy.net  Tue Sep 13 20:11:25 2005
From: awaxman at speakeasy.net (Andy Waxman)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Rubbersheeting with gdalwarp?
Message-ID: <FMEEIGALJENHJBGOODOIMEEECJAA.awaxman@speakeasy.net>

Hello all,
I am reading through the doc for the gdal utilities and I am a little
confused.  I want to use the thin plate spline warper to rubbersheet an
unreferenced scanned map to a landsat image with control.  Right now I am
collecting of tie points.
My understanding is that I use gdal_translate to embed those tie points into
the scanned map, but how do I use gdalwarp to force the resample?
Thanks,
Andy


From fwarmerdam at gmail.com  Tue Sep 13 22:41:24 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Rubbersheeting with gdalwarp?
In-Reply-To: <FMEEIGALJENHJBGOODOIMEEECJAA.awaxman@speakeasy.net>
References: <FMEEIGALJENHJBGOODOIMEEECJAA.awaxman@speakeasy.net>
Message-ID: <931f8ea9050913194142df3ebc@mail.gmail.com>

On 9/13/05, Andy Waxman <awaxman@speakeasy.net> wrote:
> Hello all,
> I am reading through the doc for the gdal utilities and I am a little
> confused.  I want to use the thin plate spline warper to rubbersheet an
> unreferenced scanned map to a landsat image with control.  Right now I am
> collecting of tie points.
> My understanding is that I use gdal_translate to embed those tie points into
> the scanned map, but how do I use gdalwarp to force the resample?

Andy,

If your source image has no geotransform, then gdalwarp
should look for control points to use.  You can supply them
on the commandline with the -gcp option I believe. 

So do something like:
 
 gdalwarp -tps -gcp ... -gcp .. -gcp ... in.tif out.tif

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Tue Sep 13 22:52:55 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] ogr2ogr -sql output lost geometry
In-Reply-To: <20050913153205.77107.qmail@web42102.mail.yahoo.com>
References: <20050913153205.77107.qmail@web42102.mail.yahoo.com>
Message-ID: <931f8ea905091319525fa77372@mail.gmail.com>

On 9/13/05, Thomas Windholz <thomw00@yahoo.com> wrote:
>  
> All, 
>   
>  
> I used ogr2ogr to export a point layer from
> postgres/postgis into a shapefile ... everything worked
> fine (I can open it and load/view locations). Then I used a basic SQL
> statement (-sql "SELECT * FROM ksamples WHERE chloroph=108") and all
> geometry was lost (cannot load locations), yet ksamples.dbf table is
> returned ok (only the records having chloroph=108 are in the dbf table). 
>   
> Originally I tried to use gdal (ogr), specifically poDS->ExecuteSQL(...) to
> retrieve spatial locations based on a joined non-spatial table's attribute
> information. 
>   
> pszSQLStatement = "SELECT * FROM test INNER JOIN ksample ON test.c_id =
> ksample.chloroph WHERE something = 467"; 
> poResultSet = poDS->ExecuteSQL( pszSQLStatement, NULL, NULL ); 
>   
> The poResultSet had not spatial attributes, but all the non-spatial values
> were ok. First, since I am new to gdal and postgis (I am -was- from the ESRI
> world) I thought it was just my portion of the code ... but as mentioned
> above ogr2ogr does the same? 
>   
> I noticed in the archives of April 05 someone posting a similar issue ...
> but no solutions that I could find. 
>   
> Using: FWTools0.9.8, PostgreSQL 1.2.1, PostGIS 1.0.2 

Thomas, 

There were substantial fixes made to the Postgres driver shortly
before GDAL 1.3.0 was release (august).  One major fix was
related to capturing geometries from SELECT statements for
PostGIS 1.0+ databases.  

I would suggest testing with FWTools 0.9.9 which should include
these fixes.

I'm not to clear whether the join you referenced was evaluated
against a PostGIS database, or again shapefiles.  If PostGIS
then the problem is likely the one fixed in 0.9.9.  If shapefiles, 
please be aware that spatial data from the joined table is discarded.
If none of that explains your issue then please restate, possibly 
with some test data. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mn at blominfo.dk  Wed Sep 14 10:58:09 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Rotating images
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E6A6@kernen.blomkbh.dk>

I am looking for a fast way to rotate an image just by adding the
Orientation tag (274) to a tiff. My images are jpeg-compressed and tiled
tiffs, so I'd rather not do a new recompression of the data.

 

Is there an easy way of adding the tag using any of the GDAL commandline
tools? (or any other way of rotating the images without recompression)

I only need to rotate the images either 90, 180 or 270 degrees.

 

Best regards

/Morten

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050914/f32f6396/attachment.html
From fwarmerdam at gmail.com  Wed Sep 14 12:19:13 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Rotating images
In-Reply-To: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E6A6@kernen.blomkbh.dk>
References: <D0B3429CEB2C4A4C82F2E412CD5DB9C664E6A6@kernen.blomkbh.dk>
Message-ID: <931f8ea905091409194a5fa449@mail.gmail.com>

On 9/14/05, Morten Nielsen <mn@blominfo.dk> wrote:
>  
>  
> 
> I am looking for a fast way to rotate an image just by adding the
> Orientation tag (274) to a tiff. My images are jpeg-compressed and tiled
> tiffs, so I'd rather not do a new recompression of the data. 
> 
>   
> 
> Is there an easy way of adding the tag using any of the GDAL commandline
> tools? (or any other way of rotating the images without recompression) 
> 
> I only need to rotate the images either 90, 180 or 270 degrees. 

Morten, 

The tiffset utility is intended to allow setting individual tags in an 
existing TIFF file.  I'm not sure if it supports orientation but it could
be easily adapted to do so.  Note that I think tiffset ends up writing
a new directory and losing the space for the old one.  But at least
it avoids rewriting the image data. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Thu Sep 15 02:26:20 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] References and scripting language bindings
Message-ID: <4329140C.7010000@tkk.fi>

Hi, this problem was discussed on IRC yesterday but I'm slow to 
understand, so I try to describe the problem again and think about a 
solution.

The problem is that if you do something like

layer = datasource.Open('data').GetLayerByIndex(0)
print layer.Name

this will cause a problem if the scripting language has deleted the 
datasource (and the layer with it). This is  because it was just a 
temporary variable. I first thought that layer should be undefined on 
the 2nd line. But this is analogous to the case if you create a 
reference to a variable and there scripting languages typically do not 
delete the variable until the referencing variable is not used anymore 
(it goes out of scope for example).

The datasource class (and many other classes) in OGR has similar 
reference count system. Thus I think we should use them in the scripting 
language bindings. I.e. do not destroy a datasource object if it has 
references to it. In GetLayerByIndex increment the reference count. In a 
layer object make a note which datasource object it needs and decrement 
the count of that when the layer object it destroyed.

Is this difficult to implement in swig? The problem seems to be where to 
put the link to the parent (e.g. the datasource handle for the layer 
object)? It has to be done while still in the C wrapper.

I don't know how all this works in Java which has a different kind of 
garbage collection system.

Ari


From kruland at ku.edu  Thu Sep 15 07:04:40 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] References and scripting language bindings
In-Reply-To: <4329140C.7010000@tkk.fi>
References: <4329140C.7010000@tkk.fi>
Message-ID: <43295548.6030001@ku.edu>

Ari,

You understand perfectly.

The solution you propose is also correct.  But it needs to be done "all
the way down" to support longer chains of calls:

f = ogr.Open('data').GetLayerByIndex(0).GetFeature(0)

It seems that everybody down the stack will need to know the root
datasource.

This does pose some interesting problems though, right now,
GetLayerByIndex() does not return an object owned by the script (ie, not
a %newobject).  It will need to return a new object which has some
control over a dataset pointer.  etc.

It will be a little piece of work.

Also, I'm hearing there is a similar situation in the FeatureDefn &
FieldDefn objects.

Kevin

Ari Jolma wrote:

> Hi, this problem was discussed on IRC yesterday but I'm slow to
> understand, so I try to describe the problem again and think about a
> solution.
>
> The problem is that if you do something like
>
> layer = datasource.Open('data').GetLayerByIndex(0)
> print layer.Name
>
> this will cause a problem if the scripting language has deleted the
> datasource (and the layer with it). This is  because it was just a
> temporary variable. I first thought that layer should be undefined on
> the 2nd line. But this is analogous to the case if you create a
> reference to a variable and there scripting languages typically do not
> delete the variable until the referencing variable is not used anymore
> (it goes out of scope for example).
>
> The datasource class (and many other classes) in OGR has similar
> reference count system. Thus I think we should use them in the
> scripting language bindings. I.e. do not destroy a datasource object
> if it has references to it. In GetLayerByIndex increment the reference
> count. In a layer object make a note which datasource object it needs
> and decrement the count of that when the layer object it destroyed.
>
> Is this difficult to implement in swig? The problem seems to be where
> to put the link to the parent (e.g. the datasource handle for the
> layer object)? It has to be done while still in the C wrapper.
>
> I don't know how all this works in Java which has a different kind of
> garbage collection system.
>
> Ari
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Thu Sep 15 10:17:46 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] References and scripting language bindings
In-Reply-To: <4329140C.7010000@tkk.fi>
References: <4329140C.7010000@tkk.fi>
Message-ID: <931f8ea9050915071724f8a388@mail.gmail.com>

On 9/15/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Hi, this problem was discussed on IRC yesterday but I'm slow to
> understand, so I try to describe the problem again and think about a
> solution.
> 
> The problem is that if you do something like
> 
> layer = datasource.Open('data').GetLayerByIndex(0)
> print layer.Name

Ari,

To clarify for the list the problem you point out has 
existed in the Python OGR bindings (and for that matter
in the GDAL bindings) as long as they have existed.  The
requirement so far has been for the script writer to keep
a reference to the datasource until they are done using 
objects owned by the datasource such as layers (or bands
in GDAL's case). 

While this is not a terrible onerous requirement, it does violate
the reasonable expectation of the scripter, and introduces an
easy way to cause unexpected crashes which is undesirable. 

So, the "safe" version of your code would be:

ds = ogr.Open("data")
layer = layer.GetLayerByIndex(0)
... do stuff with layer

ds = None  
l
Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From hina192002 at yahoo.com  Thu Sep 15 06:21:16 2005
From: hina192002 at yahoo.com (hina arif)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] how 2 read tiff
Message-ID: <20050915102116.96585.qmail@web54301.mail.yahoo.com>

i want 2 know that how can i read a tiff file using GDAL  would there be a  need of using internal libtiff or only GDAL functions will work 

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050915/0510a235/attachment.html
From warmerdam at pobox.com  Thu Sep 15 18:16:34 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Re: urgent help needed
In-Reply-To: <20050915215950.26114.qmail@web54302.mail.yahoo.com>
References: <931f8ea9050915081126bab335@mail.gmail.com>
	<20050915215950.26114.qmail@web54302.mail.yahoo.com>
Message-ID: <931f8ea9050915151671b2e5c8@mail.gmail.com>

On 9/15/05, hina arif <hina192002@yahoo.com> wrote:
>  
>  
> 
> hi i need help once again same is the way i am  working on .i mean the way i
> read the file is almost same but the problem is that when i read a file
> using GetRasterCount() it says that the file has only one band and then i
> read like that 
> 
> poBand->GetBlockSize(&nBlockXSize,&nBlockYSize);//resolution
> 
>  
> 
> pabyData = (GByte
> *)CPLMalloc(nBlockXSize*nBlockYSize*nBand*sizeof(GByte));//heap
> memory 
> 
> if(pabyData==NULL) error 
> 
>  
> 
> for(int i=0;i<poBand->GetBand();++i) 
> 
> e=poBand->ReadBlock(i,i,pabyData); 
> 


Hina,

You should not generally be using the ReadBlock() method. It
is mainly intended for low level applications.  

 > or i used  readIO like this 
> 
> e=poBand->RasterIO(GF_Read, 0,0,nBlockXSize,
> 0,pabyData,nBlockXSize,0,GDT_Byte,0,0); 
> 
> if i use value other than 0 an error comes and i think i am reading a band
> located at location 0,0 the first and only one 
> my file is of resolution 24810,784200 and its an black and white map image
> file 
> 
> sorry but i need ur assistance that what is an error in the code   

That is a large file!  Was there a particular reason you were trying
to read based on the block size?  The block size is basically the size
of a chunk in the file.  If you wanted to read just the first block you could
do that 

  poBand->RasterIO( GF_Read, 0, 0, nBlockXSize, nBlockYSize, 
                              pabyData, nBlockXSize, nBlockYSize,
GDT_Byte, 0, 0 );
 

I'm not sure which zero you were referring to changing .. there are several.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mateusz at loskot.net  Fri Sep 16 04:45:51 2005
From: mateusz at loskot.net (=?utf-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Windows CE port of GDAL - work started
Message-ID: <000101c5ba9b$0d568b80$9d01a8c0@taxussi.com.pl>

Hi,

I'd like to announce that I started to port GDAL/OGR to Windows CE.
Company I work for - Taxus SI Ltd. (www.taxussi.com.pl) - has decided to 
move our mapping libraries for Windows and Windows CE to use GDAL/OGR.
We started to work on port of GDAL/OGR to be able to 
compile it with eMbedded Visual C++ (evc4) and use it on Windows CE-based
operating systems.
Mainly, I'm involved in this porting project. 
There is also my colleague - Krzysztof - from my company 
but he will do part-time work on this port, management mainly.

The Roadmap of my work

1.   First, my aim is to compile CPL port library using evc4 compiler and do some tests on Windows CE based devices.
2.   Port OGR part of GDAL to Windows CE with at least Shapelib as data format.
2.1. Write some test application - Shapefile viewer - based on OGR for Windows CE.
3.   Port other useful vector formats of OGR.
4.   Port GDAL with raster formats to Windows CE.

Note: 
Point 3 and 4 are planned to future work.
Vector support is now most important for me, 
because company I work for needs it in short time (October-November).

As I talk to Frank Warmerdam, next week, or two I will send him my code of OGR port to Windows CE.
Then we do some review and correct my code (online).
After Frank will like my port he move it to the official CVS repositiory.
...and Windows CE port of GDAL/ORG will live together with official version.
That should be helpful to track new changes to GDAL/OGR and add it to the Windows CE port.

My and my company I work for idea is to publish all changes we will release.
Then everyone who is interested in using and/or contributing to the Windows CE port
is strongly welcome.
So, we are doing first step alone, after that it will by available for everyone.

State of the work

Yesterday, I managed to compile CPL from MITAB project using evc4 without any errors, only a few warnings.
OGR in MITAB is cutted-down version, so I decided to start with this one as potentially simplier to work with.
Today, I'm merging my CPL-from-MITAB changes to official CPL version, included in GDAL.
Next week, I'm on a 3-days bussines trip (starting from Wednesday) so, 
I have only Monday and Tuesday to work on OGR port.
But I believe that till the end of September I will release Windows CE port and send it to Frank for review.

I'm curious if anyone is interested in GDAL/OGR port for Windows CE.

My casual thoughts

On my huge TODO list I have also to try to compile GDAL/OGR with
Intel(R) C++ Compiler for Windows* CE. I have only evaluation version of this compiler
so if someone has a license and could help me to test my port, please give me a note.

I think I will follow Frank Warmerdam's roadmap and suggestions, as he is a project leader.
My company I work for has no plans to develop our own GDAL/OGR version separated from official source tree.


All suggestions and ideas are welcome!

Best regards

-- 
Mateusz ?oskot
mateusz at loskot dot net



From ar at navpoch.com  Fri Sep 16 05:15:26 2005
From: ar at navpoch.com (Alain Rist)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Windows CE port of GDAL - work started
In-Reply-To: <000101c5ba9b$0d568b80$9d01a8c0@taxussi.com.pl>
Message-ID: <000d01c5ba9f$2d8f7570$0602a8c0@AlainMobile>

Hi Mateusz,
 
I am VERY interested.
 
How do you intend to deal with the Unicode issues ?
 
cheers,
AR



-----Message d'origine-----
De : gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] De la part de Mateusz Loskot
Envoy? : vendredi 16 septembre 2005 10:46
? : gdal-dev@lists.maptools.org
Objet : [Gdal-dev] Windows CE port of GDAL - work started


Hi,

I'd like to announce that I started to port GDAL/OGR to Windows CE.
Company I work for - Taxus SI Ltd. (www.taxussi.com.pl) - has decided to
move our mapping libraries for Windows and Windows CE to use GDAL/OGR.
We started to work on port of GDAL/OGR to be able to
compile it with eMbedded Visual C++ (evc4) and use it on Windows CE-based
operating systems.
Mainly, I'm involved in this porting project.
There is also my colleague - Krzysztof - from my company
but he will do part-time work on this port, management mainly.

The Roadmap of my work

1.   First, my aim is to compile CPL port library using evc4 compiler and do some tests on Windows CE based devices.
2.   Port OGR part of GDAL to Windows CE with at least Shapelib as data format.
2.1. Write some test application - Shapefile viewer - based on OGR for Windows CE.
3.   Port other useful vector formats of OGR.
4.   Port GDAL with raster formats to Windows CE.

Note:
Point 3 and 4 are planned to future work.
Vector support is now most important for me,
because company I work for needs it in short time (October-November).

As I talk to Frank Warmerdam, next week, or two I will send him my code of OGR port to Windows CE.
Then we do some review and correct my code (online).
After Frank will like my port he move it to the official CVS repositiory.
...and Windows CE port of GDAL/ORG will live together with official version.
That should be helpful to track new changes to GDAL/OGR and add it to the Windows CE port.

My and my company I work for idea is to publish all changes we will release.
Then everyone who is interested in using and/or contributing to the Windows CE port
is strongly welcome.
So, we are doing first step alone, after that it will by available for everyone.

State of the work

Yesterday, I managed to compile CPL from MITAB project using evc4 without any errors, only a few warnings.
OGR in MITAB is cutted-down version, so I decided to start with this one as potentially simplier to work with.
Today, I'm merging my CPL-from-MITAB changes to official CPL version, included in GDAL.
Next week, I'm on a 3-days bussines trip (starting from Wednesday) so,
I have only Monday and Tuesday to work on OGR port.
But I believe that till the end of September I will release Windows CE port and send it to Frank for review.

I'm curious if anyone is interested in GDAL/OGR port for Windows CE.

My casual thoughts

On my huge TODO list I have also to try to compile GDAL/OGR with
Intel(R) C++ Compiler for Windows* CE. I have only evaluation version of this compiler
so if someone has a license and could help me to test my port, please give me a note.

I think I will follow Frank Warmerdam's roadmap and suggestions, as he is a project leader.
My company I work for has no plans to develop our own GDAL/OGR version separated from official source tree.


All suggestions and ideas are welcome!

Best regards

--
Mateusz ?oskot
mateusz at loskot dot net


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050916/6a0e5c9c/attachment.html
From mateusz at loskot.net  Fri Sep 16 05:43:14 2005
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Windows CE port of GDAL - work started
In-Reply-To: <000d01c5ba9f$2d8f7570$0602a8c0@AlainMobile>
Message-ID: <001301c5baa3$120e9bb0$9d01a8c0@taxussi.com.pl>


> -----Original Message-----
> From: Alain Rist [mailto:ar@navpoch.com] 
> Sent: Friday, September 16, 2005 11:15 AM
> To: 'Mateusz Loskot'; gdal-dev@lists.maptools.org
> Subject: {Definitely Spam?} RE : [Gdal-dev] Windows CE port of GDAL - work started
> 
> 
> Hi Mateusz,
> 
> I am VERY interested.
> 
> How do you intend to deal with the Unicode issues ?
> 

Hi Alain,

Yes, Unicode is a problem (or beneficial).
I talked to Frank about how I should solve Unicode problem.
We decided that GDAL/OGR interface shouldn't be changed to Unicode-like interface,
but Unicode will be wrapped inside the library.
Not very clear? I thought so.
Let's take some example.

CPLGetSymbol function from cplgetsymbol.cpp file.
This function calls LoadLibrary from Win32 API.
LoadLibrary is a typedef of LoadLibraryA or LoadLibraryW, depending on that you
are compiling with UNICODE support or not.
For Windows CE you always compile software with UNICODE support.
So, in our example, LoadLibraryW will be called in place of LoadLibrary call.
W - means wide-char version, A - means ANSI character set.
How I handle such CPLGetSymbol function?
Simply, I wrap LoadLibrary call in CPLGetSymbol with #ifdef...#endif and for Windows CE version and
I do ANSI->Unicode conversion (string with library path in our example) then I call LoadLibrary -> LoadLibraryW.

Summary
All ANSI char-based API of GDAL/OGR won't be changed (const char* won't be changed to const wchar_t*).
So, client application will use chars not wide-chars and (what is certainly a problem) has to convert
Unicode strings to char-strings (certainly, not all strings) while passing strings to GDAL/OGR API.

Simple, I follow the same approach as in Shapelib and sqlite for Windows CE.
It seems it works well on Windows CE and there are not many confusions working with such ports.


It is simple and not very genius, so if anyone has better solution, please give me a note.

-- 
Mateusz ?oskot
mateusz at loskot dot net



From potts at cfl.rr.com  Fri Sep 16 09:04:34 2005
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <001301c5baa3$120e9bb0$9d01a8c0@taxussi.com.pl>
References: <001301c5baa3$120e9bb0$9d01a8c0@taxussi.com.pl>
Message-ID: <FCC752AB-0D60-4919-98AE-2BDBAC9B9CC7@cfl.rr.com>

Hello Frank/All:


I was told that you have added imagine overview building both  
creating internal overview and for creating a .rrd file.  I didn't  
see an option string added that could specify either method.  What is  
the generic interface to create either option for imagine output files.

Thank you in advance for any help


Take care

Garrett

From warmerdam at pobox.com  Fri Sep 16 09:23:11 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Windows CE port of GDAL - work started
In-Reply-To: <000101c5ba9b$0d568b80$9d01a8c0@taxussi.com.pl>
References: <000101c5ba9b$0d568b80$9d01a8c0@taxussi.com.pl>
Message-ID: <931f8ea9050916062372a600e@mail.gmail.com>

On 9/16/05, Mateusz ?oskot <mateusz@loskot.net> wrote:
> Hi,
> 
> I'd like to announce that I started to port GDAL/OGR to Windows CE.

Mateusz, 

I am quite pleased that you will be doing this work on a wince port. 
Is there a simple macro we will always define to know we are on
the wince platform?  I was thinking perhaps that we would
define WIN32 (as we do now on normal windows builds) and the
WINCE macro.  So any special cases for wince could be #ifdef'ed
accordingly. 

I will provide CVS commit access but I shall try to produce a 
GDAL 1.3.1 release in the next week or so, before we start
committing WinCE related changes.   There are some important
new features and bug fixes I would like to get out before we 
potentially destabilize things again. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Sep 16 10:36:50 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <FCC752AB-0D60-4919-98AE-2BDBAC9B9CC7@cfl.rr.com>
References: <001301c5baa3$120e9bb0$9d01a8c0@taxussi.com.pl>
	<FCC752AB-0D60-4919-98AE-2BDBAC9B9CC7@cfl.rr.com>
Message-ID: <931f8ea9050916073635d92bcb@mail.gmail.com>

On 9/16/05, Garrett Potts <potts@cfl.rr.com> wrote:
> Hello Frank/All:
> 
> I was told that you have added imagine overview building both
> creating internal overview and for creating a .rrd file.  I didn't
> see an option string added that could specify either method.  What is
> the generic interface to create either option for imagine output files.

Garrett, 

By default now gdaladdo on .img file will create Imagine style
overviews instead of a GDAL .ovr file (TIFF).  By default they are
created in the .img file unless they will be too big in which case
a spill file (.ige) is created.

If you set the HFA_USE_RRD configuration option to YES then 
an external .rrd file will be used for the overviews instead of 
putting them right in the .img file.  Unfortunately, I did not include
an "options list" in the BuildOverviews() methods in GDAL so there
is no way to pass options like this into the overview building method.
And options passed to the original file creation are not preserved 
to the point that overviews are build (which is not part of file creation). 

Config values can be set as environment variables, on the command
line with the --config switch, or in C using the CPLSetConfigOption()
function. 

eg. 

setenv HFA_USE_RRD=YES

or

gdaladdo --config HFA_USE_RRD YES abc.img

or

CPLSetConfigOption( "HFA_USE_RRD", "YES" );
...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From potts at cfl.rr.com  Fri Sep 16 11:20:42 2005
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <931f8ea9050916073635d92bcb@mail.gmail.com>
References: <001301c5baa3$120e9bb0$9d01a8c0@taxussi.com.pl>
	<FCC752AB-0D60-4919-98AE-2BDBAC9B9CC7@cfl.rr.com>
	<931f8ea9050916073635d92bcb@mail.gmail.com>
Message-ID: <560A7D46-708A-413C-9FFE-E8C7D75A0894@cfl.rr.com>

Hello FRank:

Thank you for the response.  I'll take a look at the option HFA_USE_RRD

Take care

Garrett
On Sep 16, 2005, at 10:36 AM, Frank Warmerdam wrote:

> On 9/16/05, Garrett Potts <potts@cfl.rr.com> wrote:
>
>> Hello Frank/All:
>>
>> I was told that you have added imagine overview building both
>> creating internal overview and for creating a .rrd file.  I didn't
>> see an option string added that could specify either method.  What is
>> the generic interface to create either option for imagine output  
>> files.
>>
>
> Garrett,
>
> By default now gdaladdo on .img file will create Imagine style
> overviews instead of a GDAL .ovr file (TIFF).  By default they are
> created in the .img file unless they will be too big in which case
> a spill file (.ige) is created.
>
> If you set the HFA_USE_RRD configuration option to YES then
> an external .rrd file will be used for the overviews instead of
> putting them right in the .img file.  Unfortunately, I did not include
> an "options list" in the BuildOverviews() methods in GDAL so there
> is no way to pass options like this into the overview building method.
> And options passed to the original file creation are not preserved
> to the point that overviews are build (which is not part of file  
> creation).
>
> Config values can be set as environment variables, on the command
> line with the --config switch, or in C using the CPLSetConfigOption()
> function.
>
> eg.
>
> setenv HFA_USE_RRD=YES
>
> or
>
> gdaladdo --config HFA_USE_RRD YES abc.img
>
> or
>
> CPLSetConfigOption( "HFA_USE_RRD", "YES" );
> ...
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>


From MChapman at sanz.com  Fri Sep 16 11:49:31 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C061@mailman.san.com>

Frank,

Can you add a new method that lets you specify the overview format type
(like void SetPyramidFormat(int nFormatTypeId); or something)?  That
would be really handy. :)

Best regards,
Martin

P.S. GDAL Rules.

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Friday, September 16, 2005 8:37 AM
To: Garrett Potts
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Imagine overviews option


On 9/16/05, Garrett Potts <potts@cfl.rr.com> wrote:
> Hello Frank/All:
> 
> I was told that you have added imagine overview building both creating

> internal overview and for creating a .rrd file.  I didn't see an 
> option string added that could specify either method.  What is the 
> generic interface to create either option for imagine output files.

Garrett, 

By default now gdaladdo on .img file will create Imagine style overviews
instead of a GDAL .ovr file (TIFF).  By default they are created in the
.img file unless they will be too big in which case a spill file (.ige)
is created.

If you set the HFA_USE_RRD configuration option to YES then 
an external .rrd file will be used for the overviews instead of 
putting them right in the .img file.  Unfortunately, I did not include
an "options list" in the BuildOverviews() methods in GDAL so there is no
way to pass options like this into the overview building method. And
options passed to the original file creation are not preserved 
to the point that overviews are build (which is not part of file
creation). 

Config values can be set as environment variables, on the command line
with the --config switch, or in C using the CPLSetConfigOption()
function. 

eg. 

setenv HFA_USE_RRD=YES

or

gdaladdo --config HFA_USE_RRD YES abc.img

or

CPLSetConfigOption( "HFA_USE_RRD", "YES" );
...

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Sep 16 12:24:25 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C061@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C061@mailman.san.com>
Message-ID: <931f8ea905091609244b62ed96@mail.gmail.com>

On 9/16/05, Chapman, Martin <MChapman@sanz.com> wrote:
> Frank,
> 
> Can you add a new method that lets you specify the overview format type
> (like void SetPyramidFormat(int nFormatTypeId); or something)?  That
> would be really handy. :)

Martin,

I gather you are suggesting this be a method on the GDALDataset?  
I am pretty hesitant to add new virtual methods on the GDALDataset
unless I think they are really important to the data / access model. 

The CPLSetConfigOption() provides a mechanism to control it, but not
in a dataset specific manner.  Were you wanting to be able to request
particular datasets to use one kind of overviews, and particular others
to use a different kind of overviews?  

I think I might be better off extending the BuildOverview method to 
include an options list.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From potts at cfl.rr.com  Fri Sep 16 12:42:35 2005
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <931f8ea905091609244b62ed96@mail.gmail.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C061@mailman.san.com>
	<931f8ea905091609244b62ed96@mail.gmail.com>
Message-ID: <E50B1B89-92A8-4410-97F2-13D4D73F3460@cfl.rr.com>

Hello FRank and others:

Actually it seems if anything were to be added it would be best to  
add it to the XML option string for the hfa dataset???
I am not sure if frank likes this or not but this would give a  
generic way, without changing any current interfaces, of specifying  
writer specific overview dataset creation options.

   <Option name='HFA_USE_RRD' type='boolean' description='Use  
external rrd file for overview building, default NO'/>

Not sure if this is what the create options was intended?  If not  
then maybe some other metadata NAME could be added for the HFA  
specific way of creating an overview?


Take care

Garrett

On Sep 16, 2005, at 12:24 PM, Frank Warmerdam wrote:

> On 9/16/05, Chapman, Martin <MChapman@sanz.com> wrote:
>
>> Frank,
>>
>> Can you add a new method that lets you specify the overview format  
>> type
>> (like void SetPyramidFormat(int nFormatTypeId); or something)?  That
>> would be really handy. :)
>>
>
> Martin,
>
> I gather you are suggesting this be a method on the GDALDataset?
> I am pretty hesitant to add new virtual methods on the GDALDataset
> unless I think they are really important to the data / access model.
>
> The CPLSetConfigOption() provides a mechanism to control it, but not
> in a dataset specific manner.  Were you wanting to be able to request
> particular datasets to use one kind of overviews, and particular  
> others
> to use a different kind of overviews?
>
> I think I might be better off extending the BuildOverview method to
> include an options list.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From potts at cfl.rr.com  Fri Sep 16 12:45:06 2005
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <931f8ea905091609244b62ed96@mail.gmail.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C061@mailman.san.com>
	<931f8ea905091609244b62ed96@mail.gmail.com>
Message-ID: <580F149E-F65F-4E8D-889C-DF5A01AE298A@cfl.rr.com>

Hello Frank:

>
> The CPLSetConfigOption() provides a mechanism to control it, but not


Just added this to the GDAL plugin and it works great :)


Take care

Garrett


From warmerdam at pobox.com  Fri Sep 16 12:57:15 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <E50B1B89-92A8-4410-97F2-13D4D73F3460@cfl.rr.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C061@mailman.san.com>
	<931f8ea905091609244b62ed96@mail.gmail.com>
	<E50B1B89-92A8-4410-97F2-13D4D73F3460@cfl.rr.com>
Message-ID: <931f8ea90509160957c3e9564@mail.gmail.com>

On 9/16/05, Garrett Potts <potts@cfl.rr.com> wrote:
> Hello FRank and others:
> 
> Actually it seems if anything were to be added it would be best to
> add it to the XML option string for the hfa dataset???
> I am not sure if frank likes this or not but this would give a
> generic way, without changing any current interfaces, of specifying
> writer specific overview dataset creation options.
> 
>    <Option name='HFA_USE_RRD' type='boolean' description='Use
> external rrd file for overview building, default NO'/>
> 
> Not sure if this is what the create options was intended?  If not
> then maybe some other metadata NAME could be added for the HFA
> specific way of creating an overview?

Garrett, 

The problem is that creation options are for information needed when
creating the .img file.  But creating overviews is not part of the Create()
or CreateCopy() methods.  It is a separate operation that might be
never be done, might be done later, or might be done in a separate
process run. 

If I were to allow this to be passed into the Create() method, then I 
would have to figure out somewhere in the .img file to stash this
preference so that I could find it again later when it is time to create
overviews.   That is possible, but it seems ... messy.  And it would not
extend well to other formats where I cannot just add arbitrary data
in the format. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Fri Sep 16 13:06:24 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C062@mailman.san.com>

Frank,

I don't care about specific datasets using different overview formats.
So, if I understand correctly, I can use the CPLSetConfigOption()
function to swap between pyramid formats?  If that works, then that
would suit my needs.  Is that correct?  Is there any documentation on
how to use the rrd format on the gdal website?

Martin

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Friday, September 16, 2005 10:24 AM
To: Chapman, Martin
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Imagine overviews option


On 9/16/05, Chapman, Martin <MChapman@sanz.com> wrote:
> Frank,
> 
> Can you add a new method that lets you specify the overview format 
> type (like void SetPyramidFormat(int nFormatTypeId); or something)?  
> That would be really handy. :)

Martin,

I gather you are suggesting this be a method on the GDALDataset?  
I am pretty hesitant to add new virtual methods on the GDALDataset
unless I think they are really important to the data / access model. 

The CPLSetConfigOption() provides a mechanism to control it, but not in
a dataset specific manner.  Were you wanting to be able to request
particular datasets to use one kind of overviews, and particular others
to use a different kind of overviews?  

I think I might be better off extending the BuildOverview method to 
include an options list.  

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Sep 16 13:16:39 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C062@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C062@mailman.san.com>
Message-ID: <931f8ea90509161016650f447f@mail.gmail.com>

On 9/16/05, Chapman, Martin <MChapman@sanz.com> wrote:
> Frank,
> 
> I don't care about specific datasets using different overview formats.
> So, if I understand correctly, I can use the CPLSetConfigOption()
> function to swap between pyramid formats?  If that works, then that
> would suit my needs.  Is that correct?  

Martin,

Yes, that is correct.

> Is there any documentation on
> how to use the rrd format on the gdal website?

The HFA_USE_RRD config option is now subtly mentioned near the
bottom of:

 http://www.gdal.org/frmt_hfa.html


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Peter.Nagy at vexcel.com  Fri Sep 16 13:18:42 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
Message-ID: <Pine.CYG.4.58.0509161114270.584@Thwack>


I'm trying to build gdal using mingw and cygwin on windows, but I get a
configure error:

checking where python Makefiles are... found
checking Python makefile... C:\Python24/lib/python2.4/config/Makefile
missing, python disabled.

I try to use prebuilt windows binaries whenever possible, and did not
build python myself.  Does anyone have any hints on getting gdal to
build with the least amount of effort?  If I just download the python
source and find this Makefile that gdal seems to be looking for, would
this be sufficient?

Thanks for any advice,

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


From potts at cfl.rr.com  Fri Sep 16 13:26:40 2005
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <931f8ea90509160957c3e9564@mail.gmail.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C061@mailman.san.com>
	<931f8ea905091609244b62ed96@mail.gmail.com>
	<E50B1B89-92A8-4410-97F2-13D4D73F3460@cfl.rr.com>
	<931f8ea90509160957c3e9564@mail.gmail.com>
Message-ID: <651FA619-F7B0-4E32-AC03-C16D6196A26C@cfl.rr.com>

Hello FRank:

Understood. Thank you for the information.


Take care

Garrett
On Sep 16, 2005, at 12:57 PM, Frank Warmerdam wrote:

> On 9/16/05, Garrett Potts <potts@cfl.rr.com> wrote:
>
>> Hello FRank and others:
>>
>> Actually it seems if anything were to be added it would be best to
>> add it to the XML option string for the hfa dataset???
>> I am not sure if frank likes this or not but this would give a
>> generic way, without changing any current interfaces, of specifying
>> writer specific overview dataset creation options.
>>
>>    <Option name='HFA_USE_RRD' type='boolean' description='Use
>> external rrd file for overview building, default NO'/>
>>
>> Not sure if this is what the create options was intended?  If not
>> then maybe some other metadata NAME could be added for the HFA
>> specific way of creating an overview?
>>
>
> Garrett,
>
> The problem is that creation options are for information needed when
> creating the .img file.  But creating overviews is not part of the  
> Create()
> or CreateCopy() methods.  It is a separate operation that might be
> never be done, might be done later, or might be done in a separate
> process run.
>
> If I were to allow this to be passed into the Create() method, then I
> would have to figure out somewhere in the .img file to stash this
> preference so that I could find it again later when it is time to  
> create
> overviews.   That is possible, but it seems ... messy.  And it  
> would not
> extend well to other formats where I cannot just add arbitrary data
> in the format.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>


From eric.sokolowsky at gsfc.nasa.gov  Fri Sep 16 13:40:47 2005
From: eric.sokolowsky at gsfc.nasa.gov (Eric Sokolowsky)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
In-Reply-To: <Pine.CYG.4.58.0509161114270.584@Thwack>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
Message-ID: <Pine.LNX.4.61.0509161339460.25209@svsmail.gsfc.nasa.gov>

On Fri, 16 Sep 2005, Pete Nagy wrote:

>
> I'm trying to build gdal using mingw and cygwin on windows, but I get a
> configure error:
>
> checking where python Makefiles are... found
> checking Python makefile... C:\Python24/lib/python2.4/config/Makefile
> missing, python disabled.
>
> I try to use prebuilt windows binaries whenever possible, and did not
> build python myself.  Does anyone have any hints on getting gdal to
> build with the least amount of effort?  If I just download the python
> source and find this Makefile that gdal seems to be looking for, would
> this be sufficient?

If you don't require python, just use --without-python as an option
to configure. I do this for my builds on Linux, because we don't need
to use gdal from python.

From Ken.Boss at dnr.state.mn.us  Fri Sep 16 14:35:40 2005
From: Ken.Boss at dnr.state.mn.us (Ken Boss)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
Message-ID: <s32aca40.047@co5.dnr.state.mn.us>

>>> Frank Warmerdam <warmerdam@pobox.com> 9/16/2005 11:24:25 AM >>>
>On 9/16/05, Chapman, Martin <MChapman@sanz.com> wrote:
>> Frank,
>> 
>> Can you add a new method that lets you specify the overview format type
>> (like void SetPyramidFormat(int nFormatTypeId); or something)?  That
>> would be really handy. :)
>
>Martin,
>
>I gather you are suggesting this be a method on the GDALDataset?  
>I am pretty hesitant to add new virtual methods on the GDALDataset
>unless I think they are really important to the data / access model. 
>
>The CPLSetConfigOption() provides a mechanism to control it, but not
>in a dataset specific manner.  Were you wanting to be able to request
>particular datasets to use one kind of overviews, and particular others
>to use a different kind of overviews?  
>
>I think I might be better off extending the BuildOverview method to 
>include an options list.  
>

Frank et al--

Erdas Imagine itself supports the creation and use of .rrd files alongside any raster format that Imagine supports.  I think GDAL/Imagine users would benefit from an  overview type selection mechanism that is not tied to a particular raster file format, perhaps by extending the BuildOverviews method as you've suggested.

--Ken Boss
  MN DNR Forestry





From warmerdam at pobox.com  Fri Sep 16 14:46:23 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
In-Reply-To: <s32aca40.048@co5.dnr.state.mn.us>
References: <s32aca40.048@co5.dnr.state.mn.us>
Message-ID: <931f8ea905091611464169a9a3@mail.gmail.com>

On 9/16/05, Ken Boss <Ken.Boss@dnr.state.mn.us> wrote:
> Frank et al--
> 
> Erdas Imagine itself supports the creation and use of .rrd files alongside any raster format that Imagine supports.  I think GDAL/Imagine users would benefit from an  overview type selection mechanism that is not tied to a particular raster file format, perhaps by extending the BuildOverviews method as you've suggested.

Ken,

In fact, it seems that Peng feels the same, and is holding my nose
to the grindstone on my long ago promise to supporting reading and
writing Imagine/ArcGIS compatible .aux/.rrd files.  I will now return
to my work on gdaldefaultoverview.cpp to try and handle the 
.ovr / .rrd dicotomy gracefully.   This capability *will* be in the
GDAL/OGR 1.3.1 release. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Fri Sep 16 15:48:28 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Imagine overviews option
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C064@mailman.san.com>

Frank,

Cool, you are the man.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Friday, September 16, 2005 12:46 PM
To: Ken Boss
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Imagine overviews option


On 9/16/05, Ken Boss <Ken.Boss@dnr.state.mn.us> wrote:
> Frank et al--
> 
> Erdas Imagine itself supports the creation and use of .rrd files 
> alongside any raster format that Imagine supports.  I think 
> GDAL/Imagine users would benefit from an  overview type selection 
> mechanism that is not tied to a particular raster file format, perhaps

> by extending the BuildOverviews method as you've suggested.

Ken,

In fact, it seems that Peng feels the same, and is holding my nose to
the grindstone on my long ago promise to supporting reading and writing
Imagine/ArcGIS compatible .aux/.rrd files.  I will now return to my work
on gdaldefaultoverview.cpp to try and handle the 
.ovr / .rrd dicotomy gracefully.   This capability *will* be in the
GDAL/OGR 1.3.1 release. 

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From jochen at IngenieurTeam2.com  Fri Sep 16 16:26:42 2005
From: jochen at IngenieurTeam2.com (jochen@IngenieurTeam2.com)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGR ODBC problem
Message-ID: <B22CB3C0AAE8D411871E00104B49EEF02E8075@NT40AL>

Hello list,
this is my first mail to this list. So please ignore it if it has more noise
than signal.
I use OGR with mapserver to query a MS sql server. This works well and
helped me
a lot. THANKS. A while ago I profiled the connection and it gave some table
column
fetching noise but I ignored this. Because the performance was ok. Today I
saw this again and I remembered the query of geometry_columns. Looking in
the code (I love open source) adding this table from postgis to mssql and -
same problem. Perhaps the column geometry_type should be called type.
I googled the archived list searched the buglist and found only same column
swop 
in another source file. If this is an interesting patch for you, used it on
the
other side excuse me.

Best regards, thanks for bringing up this stuff,
Jochen

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogrodbcdatasource.cpp.patch
Type: application/octet-stream
Size: 740 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050916/cfc7f777/ogrodbcdatasource.cpp.obj
From Peter.Nagy at vexcel.com  Fri Sep 16 16:58:50 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
In-Reply-To: <Pine.LNX.4.61.0509161339460.25209@svsmail.gsfc.nasa.gov>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<Pine.LNX.4.61.0509161339460.25209@svsmail.gsfc.nasa.gov>
Message-ID: <Pine.CYG.4.58.0509161316240.584@Thwack>


Thanks Eric, but I do need python.  I'm trying to make some OpenEV
enhancements, and OpenEV uses gdal with python.

I just found a pyMinGW site
http://jove.prohosting.com/iwave/ipython/pyMinGW.html
which says that

"This project is for those who, armed with the fact that Python is itself
an open source project, have many a time asked that Python support an open
source compiler on the Windows platform."

I have found myself asking this question about project after project, as
I try to build things like vtk or openev dependencies using mingw and
cygwin.  Sigh.

Maybe I'll just make this change in linux and try to persuade Frank that
it should be added to gdal, and then just use the next windows binary
(compiled using the preferred(?!) VC)!

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


On Fri, 16 Sep 2005, Eric Sokolowsky wrote:

> On Fri, 16 Sep 2005, Pete Nagy wrote:
>
> >
> > I'm trying to build gdal using mingw and cygwin on windows, but I get a
> > configure error:
> >
> > checking where python Makefiles are... found
> > checking Python makefile... C:\Python24/lib/python2.4/config/Makefile
> > missing, python disabled.
> >
> > I try to use prebuilt windows binaries whenever possible, and did not
> > build python myself.  Does anyone have any hints on getting gdal to
> > build with the least amount of effort?  If I just download the python
> > source and find this Makefile that gdal seems to be looking for, would
> > this be sufficient?
>
> If you don't require python, just use --without-python as an option
> to configure. I do this for my builds on Linux, because we don't need
> to use gdal from python.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Fri Sep 16 17:03:53 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGR ODBC problem
In-Reply-To: <B22CB3C0AAE8D411871E00104B49EEF02E8075@NT40AL>
References: <B22CB3C0AAE8D411871E00104B49EEF02E8075@NT40AL>
Message-ID: <931f8ea905091614033b4d94f7@mail.gmail.com>

On 9/16/05, jochen@ingenieurteam2.com <jochen@ingenieurteam2.com> wrote:
> Hello list,
> this is my first mail to this list. So please ignore it if it has more noise
> than signal.
> I use OGR with mapserver to query a MS sql server. This works well and
> helped me
> a lot. THANKS. A while ago I profiled the connection and it gave some table
> column
> fetching noise but I ignored this. Because the performance was ok. Today I
> saw this again and I remembered the query of geometry_columns. Looking in
> the code (I love open source) adding this table from postgis to mssql and -
> same problem. Perhaps the column geometry_type should be called type.
> I googled the archived list searched the buglist and found only same column
> swop
> in another source file. If this is an interesting patch for you, used it on
> the
> other side excuse me.

Jochen,

I am hesittant to apply it because I am not sure which layout is "right"
according to the OGC spec, and because it will break things for folks
who have working setups.  But I have at least added a note in the 
drv_odbc.html file describing the columns needed in the 
geometry_columns table.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From starged at videotron.ca  Fri Sep 16 17:36:09 2005
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
In-Reply-To: <Pine.CYG.4.58.0509161114270.584@Thwack>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
Message-ID: <432B3AC9.3060504@videotron.ca>

Hi Pete,

Pete Nagy wrote:
> I'm trying to build gdal using mingw and cygwin on windows, but I get a
> configure error:
> 
> checking where python Makefiles are... found
> checking Python makefile... C:\Python24/lib/python2.4/config/Makefile
> missing, python disabled.

When I was building GDAL on MinGW, the only way I could get the Python support was by compiling
the gdal module separately. I was using Dev-Cpp and made a makefile that did the job.

I attached it so you (and other folks who may need it) can use it as a base to write your own
makefile.

Hope this helps.
--
Mario B.
-------------- next part --------------
# Project: gdalpython
# Makefile created by Dev-C++ 4.9.8.7

CPP  = g++.exe
CC   = gcc.exe
WINDRES = windres.exe
RES  = 
OBJ  = numpydataset.o gdalnumeric.o gdal_wrap.o $(RES)
LINKOBJ  = numpydataset.o gdalnumeric.o gdal_wrap.o $(RES)
LIBS = -mwindows -L../ -lgdal12 -L../../python23/libs -lpython23
INCS = -I../../python23/include -I/local/include
CXXINCS = -I../../python23/include -I/local/include
BIN  = _gdal.dll
CXXFLAGS = $(CXXINCS) -DHAVE_NUMPY -w -O2
CFLAGS = $(INCS) -DHAVE_NUMPY -w -O2

.PHONY: all all-before all-after clean clean-custom

all: all-before _gdal.dll all-after


clean: clean-custom
	rm -f $(OBJ) $(BIN)

DLLWRAP=g++ -shared
DEFFILE=_gdal.def
STATICLIB=lib_gdal.a

$(BIN): $(LINKOBJ)
	$(DLLWRAP) -Wl,$(DEFFILE) -Wl,-out-implib,$(STATICLIB) $(LINKOBJ) $(LIBS) -o $(BIN)

numpydataset.o: numpydataset.cpp
	$(CPP) -c numpydataset.cpp -o numpydataset.o $(CXXFLAGS)

gdalnumeric.o: gdalnumeric.cpp
	$(CPP) -c gdalnumeric.cpp -o gdalnumeric.o $(CXXFLAGS)

gdal_wrap.o: gdal_wrap.c
	$(CC) -c gdal_wrap.c -o gdal_wrap.o $(CFLAGS)
From Peter.Nagy at vexcel.com  Fri Sep 16 17:34:04 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
In-Reply-To: <Pine.CYG.4.58.0509161316240.584@Thwack>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<Pine.LNX.4.61.0509161339460.25209@svsmail.gsfc.nasa.gov>
	<Pine.CYG.4.58.0509161316240.584@Thwack>
Message-ID: <Pine.CYG.4.58.0509161519010.584@Thwack>


P.S. -

My apologies to all who have been helpful answering my questions on this
very topic the first time I tried this.  I very much appreciate those
earlier comments (Norman).  I'd like to become a configure, pkg-config and
mingw guru someday and make all this stuff easier.

Cheers,

-> Pete

From starged at videotron.ca  Fri Sep 16 17:42:41 2005
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
In-Reply-To: <Pine.CYG.4.58.0509161519010.584@Thwack>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<Pine.LNX.4.61.0509161339460.25209@svsmail.gsfc.nasa.gov>
	<Pine.CYG.4.58.0509161316240.584@Thwack>
	<Pine.CYG.4.58.0509161519010.584@Thwack>
Message-ID: <432B3C51.1060203@videotron.ca>

Hi Pete and list,

Pete Nagy wrote:
> P.S. -
> 
> My apologies to all who have been helpful answering my questions on this
> very topic the first time I tried this.  I very much appreciate those
> earlier comments (Norman).

Seems Norman beat me to the punch once again :)

But where are those earlier comments? I didn't get that...
--
Mario B.

From Peter.Nagy at vexcel.com  Fri Sep 16 17:59:38 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
In-Reply-To: <432B3AC9.3060504@videotron.ca>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<432B3AC9.3060504@videotron.ca>
Message-ID: <Pine.CYG.4.58.0509161540460.584@Thwack>


Thanks Mario.

Actually, as you know I have been thinking about this stuff in the context
of packaging up OpenEV for GTK2, which we cannot do until I can clean up
the build process.  I guess I would like to take advantage of as many
precompiled windows binaries for all of the dependencies, like gtk and
gdal, and at the same time provide mingw cygwin windows build capability,
since that's what I'm using.  If someone wants to use openev with their
own modified gdal driver, I guess they just need to jump through the hoops
at the time, if they use mingw.  I'm just thinking it would be nice if
every one of these packages could 'configure' + 'make install' and work.
Oh well.

By the way, Norman's advice came to me last December.  Cheers,

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


On Fri, 16 Sep 2005, Mario Beauchamp wrote:

> Hi Pete,
>
> Pete Nagy wrote:
> > I'm trying to build gdal using mingw and cygwin on windows, but I get a
> > configure error:
> >
> > checking where python Makefiles are... found
> > checking Python makefile... C:\Python24/lib/python2.4/config/Makefile
> > missing, python disabled.
>
> When I was building GDAL on MinGW, the only way I could get the Python support was by compiling
> the gdal module separately. I was using Dev-Cpp and made a makefile that did the job.
>
> I attached it so you (and other folks who may need it) can use it as a base to write your own
> makefile.
>
> Hope this helps.
> --
> Mario B.
>

From warmerdam at pobox.com  Fri Sep 16 18:00:36 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
In-Reply-To: <Pine.CYG.4.58.0509161316240.584@Thwack>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<Pine.LNX.4.61.0509161339460.25209@svsmail.gsfc.nasa.gov>
	<Pine.CYG.4.58.0509161316240.584@Thwack>
Message-ID: <931f8ea905091615006a431024@mail.gmail.com>

On 9/16/05, Pete Nagy <Peter.Nagy@vexcel.com> wrote:
> 
> Thanks Eric, but I do need python.  I'm trying to make some OpenEV
> enhancements, and OpenEV uses gdal with python.
> 
> I just found a pyMinGW site
> http://jove.prohosting.com/iwave/ipython/pyMinGW.html
> which says that
> 
> "This project is for those who, armed with the fact that Python is itself
> an open source project, have many a time asked that Python support an open
> source compiler on the Windows platform."
> 
> I have found myself asking this question about project after project, as
> I try to build things like vtk or openev dependencies using mingw and
> cygwin.  Sigh.
> 
> Maybe I'll just make this change in linux and try to persuade Frank that
> it should be added to gdal, and then just use the next windows binary
> (compiled using the preferred(?!) VC)!

Pete,

You can always configure --without-python and then fixup the 
GDALmake.opt file manually.  It will require some fiddling though.

I would add that supporting two development environments 
(unix-like, and win32) is already a substantial effort.  Asking for
support to build something half way between, where it is hard to
get the unix build environment to work properly (as in this case) 
is a stretch. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From vdharan2001 at gmail.com  Sat Sep 17 09:28:50 2005
From: vdharan2001 at gmail.com (Vidhiyadharan Nadarajah)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Query a Point- Need help 
Message-ID: <FJEAJLIJBMFCHFKGDAGKIEAPCAAA.vdharan2001@gmail.com>

Hi,
Iam building an application using OGR for a vehicle tracking system. Iam
able to plot the vehicles on the map. Iam using shape files and I have
polygon(boundries) and line(road) layers. I want to find out the current
location(Area name and Road Name)of the vehicle using the
coordinates(lat,long) of the vehicle. How can i do this?. Can any one
suggest me a method to do this.?

Best Regards,
vdharan



From perrygeo at gmail.com  Sun Sep 18 01:50:00 2005
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
Message-ID: <5383fa5e0509172250125d3313@mail.gmail.com>

Hi folks,

I'm new to the list so I'll just introduce myself real quick. I've been 
doing GIS and cartography for 4 years at Humboldt State University as a 
Natural Resources major and, although it's not my background per se, I've 
been getting heavily into programming these past few months. Most of my web 
mapping stuff is PHP/Mapscript but I've begun really like python/OGR/GDAL 
for doing my data processing.

Anyways, I've run into a bit of an issue with the OGRGeometry::Distance 
method. Check out the following script:

import ogr
# Create some test geometries
wkt = 'POINT(1 1)'
g1 = ogr.CreateGeometryFromWkt(wkt)
wkt = 'POINT(2 1)'
g2 = ogr.CreateGeometryFromWkt(wkt)

b = g1.Buffer(2)
# Works fine so we know geos is enabled

d = g1.Distance(g2)
# fails ... "Attribute Error: Geometry instance has no attribute 'Distance'"

According to the docs at
http://gdal.maptools.org/ogr/classOGRGeometry.htmlthis should work,
right? Or have there been recent changes that break this
method? Are there any updated docs anywhere? I'm using gdal 1.3.0 packaged 
with FWTools 0.9.9 on ubuntu linux.

Thanks for helping me out.

-- 
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050917/2d4cf9c3/attachment.html
From warmerdam at pobox.com  Sun Sep 18 11:27:11 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <5383fa5e0509172250125d3313@mail.gmail.com>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
Message-ID: <931f8ea905091808272eef4c4b@mail.gmail.com>

On 9/18/05, Matthew Perry <perrygeo@gmail.com> wrote:
> Hi folks,
>  
>    I'm new to the list so I'll just introduce myself real quick. I've been
> doing GIS and cartography for 4 years at Humboldt State University as a
> Natural Resources major and, although it's not my background per se, I've
> been getting heavily into programming these past few months. Most of my web
> mapping stuff is PHP/Mapscript but I've begun really like python/OGR/GDAL
> for doing my data processing.
>  
>    Anyways, I've run into a bit of an issue with the OGRGeometry::Distance
> method. Check out the following script:
>  
>      import ogr
>      # Create some test geometries
>      wkt = 'POINT(1 1)'
>      g1 = ogr.CreateGeometryFromWkt(wkt)
>      wkt = 'POINT(2 1)'
>      g2 = ogr.CreateGeometryFromWkt(wkt)
>  
>      b = g1.Buffer(2)
>      # Works fine so we know geos is enabled
>   
>      d = g1.Distance(g2)
>      # fails ... "Attribute Error: Geometry instance has no attribute
> 'Distance'"
> 
>  According to the docs at
> http://gdal.maptools.org/ogr/classOGRGeometry.html this
> should work, right? Or have there been recent changes that break this
> method? Are there any updated docs anywhere? I'm using gdal 1.3.0 packaged
> with FWTools 0.9.9 on ubuntu linux.

Matt,

I'm afraid the Distance method didn't make it into the OGR Python bindings
for some reason. 

I have added it in CVS. 

It turns out all that was missing was the wrapper method so you can just add
the Distance method in FWTools0.9.9/pymod/ogr.py near the bottom.  
Something like:

    def SymmetricDifference( self, other ):
        geom = _gdal.OGR_G_SymmetricDifference( self._o, other._o )
        if geom is not None and geom != 'NULL':
            return Geometry( obj = geom, thisown = 1 )
        else:
            return None
        
    def Distance( self, other ):
        return _gdal.OGR_G_Distance( self._o, other._o )

def BuildPolygonFromEdges( edges, bBestEffort=0, bAutoClose=0, Tolerance=0 ):
    _o = _gdal.OGRBuildPolygonFromEdges( edges._o, bBestEffort, bAutoClose,
                                         Tolerance )
    if _o is not None and _o != 'NULL':
        return Geometry( obj = _o, thisown = 1 )
    else:
        return None;

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From schuyler at nocat.net  Sun Sep 18 12:37:53 2005
From: schuyler at nocat.net (Schuyler Erle)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <5383fa5e0509172250125d3313@mail.gmail.com>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
Message-ID: <20050918163752.GA27726@vishnu.tridity.org>

* On 17-Sep-2005 at 10:53PM PDT, Matthew Perry said:
> 
> According to the docs at
> http://gdal.maptools.org/ogr/classOGRGeometry.htmlthis should work,
> right? Or have there been recent changes that break this
> method? Are there any updated docs anywhere? I'm using gdal 1.3.0 packaged 
> with FWTools 0.9.9 on ubuntu linux.

I think this is an oversight in the current OGR bindings for Python. I
fixed this locally by copying and pasting another function in ogr.py
and renaming the function and the function it calls internally. I
forgot, however, to send patches back to Frank. (Oops. Don't be a bad
F/OSS user like me, OK?) :-)

SDE

From hobu at iastate.edu  Sun Sep 18 13:54:02 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <5383fa5e0509172250125d3313@mail.gmail.com>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
Message-ID: <p06200701bf5359b16ad0@[192.168.11.4]>

Matthew,

It is just an oversight that the Python OGR.Geometry.Distance 
function is not implemented in ogr.py.  It *is* in the wrapper 
though.  Here is what I do to get a Distance function.  I usually put 
it after all of my imports at the top.

try:
     ogr.Geometry.Distance
except AttributeError:
     def Distance(self, other):
         dist = _gdal.OGR_G_Distance(self._o, other._o);
         return dist
     ogr.Geometry.Distance = Distance


Howard


At 10:50 PM -0700 9/17/05, Matthew Perry wrote:
>Hi folks,
>
>   I'm new to the list so I'll just introduce myself real quick. I've 
>been doing GIS and cartography for 4 years at Humboldt State 
>University as a Natural Resources major and, although it's not my 
>background per se, I've been getting heavily into programming these 
>past few months. Most of my web mapping stuff is PHP/Mapscript but 
>I've begun really like python/OGR/GDAL for doing my data processing.
>
>   Anyways, I've run into a bit of an issue with the 
>OGRGeometry::Distance method. Check out the following script:
>
>     import ogr
>     # Create some test geometries
>     wkt = 'POINT(1 1)'
>     g1 = ogr.CreateGeometryFromWkt(wkt)
>     wkt = 'POINT(2 1)'
>     g2 = ogr.CreateGeometryFromWkt(wkt)
>
>     b = g1.Buffer(2)
>     # Works fine so we know geos is enabled
>
>     d = g1.Distance(g2)
>     # fails ... "Attribute Error: Geometry instance has no attribute 
>'Distance'"
>
>According to the docs at 
><http://gdal.maptools.org/ogr/classOGRGeometry.html>http://gdal.maptools.org/ogr/classOGRGeometry.html 
>this should work, right? Or have there been recent changes that 
>break this method? Are there any updated docs anywhere? I'm using 
>gdal 1.3.0 packaged with FWTools 0.9.9 on ubuntu linux.
>
>Thanks for helping me out.
>
>--
>Matt Perry
><mailto:perrygeo@gmail.com>perrygeo@gmail.com
><http://www.perrygeo.net>http://www.perrygeo.net
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050918/b038759e/attachment.html
From tim at linfiniti.com  Sun Sep 18 19:16:26 2005
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] GetNextFeature error handling
Message-ID: <200509190016.32909.tim@linfiniti.com>

Hi

Im trying to file away an outstanding bug in QGIS:

http://sourceforge.net/tracker/index.php?func=detail&aid=1211058&group_id=55820&atid=478378

If you look at the stack trace that the original poster kindly provided, you 
will notice that the problem occurs in OGRShapeLayer::GetNextFeature (). Of 
course the real cause of the problem is that the user has an invalid 
shapefile (there is inconsistency with the number of points compared to the 
number of dbf recs). 

My question is, is there any way to gracefully trap this error?

I tested on gdal 1.2.6 btw

Many thanks

Tim Sutton

-- 
"The mind once expanded to the dimensions of larger ideas never returns to its 
original dimensions." 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050919/f4be414e/attachment.bin
From perrygeo at gmail.com  Sun Sep 18 19:28:50 2005
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <931f8ea905091808272eef4c4b@mail.gmail.com>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
	<931f8ea905091808272eef4c4b@mail.gmail.com>
Message-ID: <5383fa5e05091816282ad8e674@mail.gmail.com>

Frank, Howard and Schuyler and all,

On 9/18/05, Frank Warmerdam <warmerdam@pobox.com> wrote:
> 
> 
> I'm afraid the Distance method didn't make it into the OGR Python bindings
> 

Thanks for your all your suggestions. I added the Distance function to 
ogr.py as Frank suggested. The try/except block suggested by Howard is a 
really good idea since it will ensure backwards compatibility.

So as I was going through the methods of the Geometry class, I noticed that 
there were a bunch of them (GetPointCount, GetX, GetY, GetZ, SetPoint, 
AddPoint, more?) that aren't documented in the official OGRGeometry docs. 
Are the python bindings that significantly different than the C++ methods? 
If so, It might be worth considering using a tool like epydoc to create 
GDAL/OGR documentation specifically for python. I'd be willing to head this 
up if there were significant interest in doing so.

-- 
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050918/7d351584/attachment.html
From warmerdam at pobox.com  Sun Sep 18 19:44:53 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <5383fa5e05091816282ad8e674@mail.gmail.com>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
	<931f8ea905091808272eef4c4b@mail.gmail.com>
	<5383fa5e05091816282ad8e674@mail.gmail.com>
Message-ID: <931f8ea905091816445f5820b2@mail.gmail.com>

On 9/18/05, Matthew Perry <perrygeo@gmail.com> wrote:
>    So as I was going through the methods of the Geometry class, I noticed
> that there were a bunch of them (GetPointCount, GetX, GetY, GetZ, SetPoint,
> AddPoint, more?) that aren't documented in the official OGRGeometry docs. 
> Are the python bindings that significantly different than the C++ methods?
> If so, It might be worth considering using a tool like epydoc to create
> GDAL/OGR documentation specifically for python. I'd be willing to head this
> up if there were significant interest in doing so.

Matt,

The Python (and other swig bindings) use the "simplified" C API 
for accessing geometry.  The downside to this is it doesn't match the
C++ API well and isn't really properly documented.  It would nice
to have some generic docs that would explain this for all the swig
interfaces to OGR Geometries.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sun Sep 18 19:51:19 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] GetNextFeature error handling
In-Reply-To: <200509190016.32909.tim@linfiniti.com>
References: <200509190016.32909.tim@linfiniti.com>
Message-ID: <931f8ea9050918165195daff@mail.gmail.com>

On 9/18/05, Tim Sutton <tim@linfiniti.com> wrote:
> Hi
> 
> Im trying to file away an outstanding bug in QGIS:
> 
> http://sourceforge.net/tracker/index.php?func=detail&aid=1211058&group_id=55820&atid=478378
> 
> If you look at the stack trace that the original poster kindly provided, you
> will notice that the problem occurs in OGRShapeLayer::GetNextFeature (). Of
> course the real cause of the problem is that the user has an invalid
> shapefile (there is inconsistency with the number of points compared to the
> number of dbf recs).
> 
> My question is, is there any way to gracefully trap this error?
> 
> I tested on gdal 1.2.6 btw

Tim, 

I tried the bad shapefile from the bug report with the current ogrinfo and
it just emits an error message but doesn't crash.  I did apply a patch to 
OGR when this problem was discussed a week or two ago (on IRC?), so 
that may be why I don't get a crash.

By the way, it looks like the dbf has no fields. 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From starged at videotron.ca  Mon Sep 19 00:26:01 2005
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] mingw build
In-Reply-To: <Pine.CYG.4.58.0509161540460.584@Thwack>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<432B3AC9.3060504@videotron.ca>
	<Pine.CYG.4.58.0509161540460.584@Thwack>
Message-ID: <432E3DD9.8090509@videotron.ca>

Hi Pete,

Pete Nagy wrote:
> Thanks Mario.
> 
> Actually, as you know I have been thinking about this stuff in the context
> of packaging up OpenEV for GTK2, which we cannot do until I can clean up
> the build process.

I thought so...

> I'm just thinking it would be nice if
> every one of these packages could 'configure' + 'make install' and work.
> Oh well.

I guess the only solution is to hack the configure script itself... but this is definitely not
my turf :)

> By the way, Norman's advice came to me last December.

Ah... it's just that sometimes I see replies to posts I didn't receive and thought it was the
case again.

Cheers,
--
Mario B.

From ari.jolma at tkk.fi  Mon Sep 19 02:16:12 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <931f8ea905091816445f5820b2@mail.gmail.com>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
	<931f8ea905091808272eef4c4b@mail.gmail.com>
	<5383fa5e05091816282ad8e674@mail.gmail.com>
	<931f8ea905091816445f5820b2@mail.gmail.com>
Message-ID: <432E57AC.40105@tkk.fi>

Frank Warmerdam kirjoitti:

>On 9/18/05, Matthew Perry <perrygeo@gmail.com> wrote:
>  
>
>>   So as I was going through the methods of the Geometry class, I noticed
>>that there were a bunch of them (GetPointCount, GetX, GetY, GetZ, SetPoint,
>>AddPoint, more?) that aren't documented in the official OGRGeometry docs. 
>>Are the python bindings that significantly different than the C++ methods?
>>If so, It might be worth considering using a tool like epydoc to create
>>GDAL/OGR documentation specifically for python. I'd be willing to head this
>>up if there were significant interest in doing so.
>>    
>>
>
>Matt,
>
>The Python (and other swig bindings) use the "simplified" C API 
>for accessing geometry.  The downside to this is it doesn't match the
>C++ API well and isn't really properly documented.  It would nice
>to have some generic docs that would explain this for all the swig
>interfaces to OGR Geometries.
>  
>

It might be confusing to document the "intermediate" C/C++ API, which is 
between GDAL C++ and the swig-based language bindings, if that's what 
you mean. I mean from the users' point of view. However, all the 
swig-based language interfaces should be as similar as possible (or at 
least implement the common base), but I'm not sure if their docs can be 
based on some common meta information. Matthew, I wrote initial docs for 
the swig/Perl bindings, they at least list all existing methods, I don't 
know if they are on the cvs yet. Frank, thinking about this, I may want 
a cvs commit rights to update and maintain these docs.

Frank mentioned somewhere that the files in cvs can be seen on the web 
but I didn't find a link on gdal.maptools.org?

Ari

>Best regards,
>  
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From perrygeo at gmail.com  Mon Sep 19 05:01:01 2005
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <432E57AC.40105@tkk.fi>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
	<931f8ea905091808272eef4c4b@mail.gmail.com>
	<5383fa5e05091816282ad8e674@mail.gmail.com>
	<931f8ea905091816445f5820b2@mail.gmail.com> <432E57AC.40105@tkk.fi>
Message-ID: <5383fa5e05091902014c2c8818@mail.gmail.com>

Ari,

On 9/18/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> 
> It might be confusing to document the "intermediate" C/C++ API, which is
> between GDAL C++ and the swig-based language bindings, if that's what
> you mean. I mean from the users' point of view.


I agree. I think the C++ and the C methods are already documented 
seperately. What we really need is docs for the swig interface. 

However, all the
> swig-based language interfaces should be as similar as possible (or at
> least implement the common base), but I'm not sure if their docs can be
> based on some common meta information. Matthew, I wrote initial docs for
> the swig/Perl bindings, they at least list all existing methods, 


Wow. I didn't even know there were ogr/perl bindings! That's OK for me since 
looking at Perl code makes my head hurt ;-) Are they available anywhere? How 
did you generate these docs? 

I was thinking of an automated method to regenerate the docs every time the 
bindings changed. Python offers a very simple way to do this with the epydoc 
module. You document the classes directly in the code itself using their 
basic epytext markup:

def Distance( self, other ):
'''
Returns the minimum distance between this geometry and another.
@type other: OGR.Geometry
@param other: Geometry to calculate distance to.
@rtype: float
@return: Distance between Geometries
'''
return _gdal.OGR_G_Distance( self._o, other._o )

Then run one command to generate the docs:

epydoc -o /www/ogr_docs/ ogr

And you have complete class documentation. I've posted the example at 
http://perrygeo.net/ogr_docs/index.html . Of course the 
OGR.Geometry.Distance method was the only one I documented so it looks a 
little sparse but you get the idea. 

This technique would be acceptable IF all the swig interfaces were kept in 
sync with the Python version. 

Are there similar/better methods out there for maintaing perl docs? It seems 
that a solution where we maintain the class documentation in the code itself 
would be preferable to maintaining a separate document but this may be my 
inexperience talking.

Any thoughts?
-- 
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050919/bfcc7ea8/attachment.html
From ari.jolma at tkk.fi  Mon Sep 19 05:53:53 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <5383fa5e05091902014c2c8818@mail.gmail.com>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
	<931f8ea905091808272eef4c4b@mail.gmail.com>
	<5383fa5e05091816282ad8e674@mail.gmail.com>
	<931f8ea905091816445f5820b2@mail.gmail.com> <432E57AC.40105@tkk.fi>
	<5383fa5e05091902014c2c8818@mail.gmail.com>
Message-ID: <432E8AB1.1000605@tkk.fi>

Matthew Perry wrote:

>
> Wow. I didn't even know there were ogr/perl bindings! That's OK for me 
> since looking at Perl code makes my head hurt ;-) Are they available 
> anywhere? How did you generate these docs?

well, looking at Python code makes my heart cry ;-)

temporarily at: http://map.hut.fi/gdal-perl/

these docs are hand-made pods (well, I used some throw-away scripts to 
make the skeleton), converted to HTML with pod2html

>
> I was thinking of an automated method to regenerate the docs every 
> time the bindings changed. Python offers a very simple way to do this 
> with the epydoc module. You document the classes directly in the code 
> itself using their basic epytext markup:


With Perl you can add docs to a module similarly and when the module is 
installed, the doc is automagically available as a man page. With swig 
though, it seems that the pod has to written into a separate file.

>
> And you have complete class documentation. I've posted the example at 
> http://perrygeo.net/ogr_docs/index.html . Of course the 
> OGR.Geometry.Distance method was the only one I documented so it looks 
> a little sparse but you get the idea.


ok, nice, similar to what javadoc does (but frames...grr), the pod2html 
is a bit old-fashioned but I don't know of anything more modern, I use 
the man pages or code usually

>
> This technique would be acceptable IF all the swig interfaces were 
> kept in sync with the Python version.


I'm missing parameter types in the methods, for example in Perl, the 
CopyLayer method's param options is a reference to a list of strings, 
and that is not obvious from that doc. That kind of info is necessary 
for the programmer (scripter).

>
> Are there similar/better methods out there for maintaing perl docs? It 
> seems that a solution where we maintain the class documentation in the 
> code itself would be preferable to maintaining a separate document but 
> this may be my inexperience talking.


I like the idea of having the doc right next to the code and am 
disappointed because swig does not seem to allow that in the case of 
Perl. In this case we, however, would be best of having the docs in the 
swig interface files (ogr.i etc), but they would need to be written in 
language-independent way. I'm not sure if that's doable.

Ari

>
> Any thoughts?
> -- 
> Matt Perry
> perrygeo@gmail.com <mailto:perrygeo@gmail.com>
> http://www.perrygeo.net 



-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Mon Sep 19 09:38:30 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] OGRGeometry::Distance
In-Reply-To: <432E57AC.40105@tkk.fi>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
	<931f8ea905091808272eef4c4b@mail.gmail.com>
	<5383fa5e05091816282ad8e674@mail.gmail.com>
	<931f8ea905091816445f5820b2@mail.gmail.com> <432E57AC.40105@tkk.fi>
Message-ID: <931f8ea9050919063855cb02ed@mail.gmail.com>

On 9/19/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> It might be confusing to document the "intermediate" C/C++ API, which is
> between GDAL C++ and the swig-based language bindings, if that's what
> you mean. I mean from the users' point of view. However, all the
> swig-based language interfaces should be as similar as possible (or at
> least implement the common base), but I'm not sure if their docs can be
> based on some common meta information. Matthew, I wrote initial docs for
> the swig/Perl bindings, they at least list all existing methods, I don't
> know if they are on the cvs yet. Frank, thinking about this, I may want
> a cvs commit rights to update and maintain these docs.
> 
> Frank mentioned somewhere that the files in cvs can be seen on the web
> but I didn't find a link on gdal.maptools.org?

Ari, 

The current CVS source code (well updated at least daily)
can be found at:

  http://www.gdal.org/srctree/

On the general issue of script bindings, I find it hard to imagine
that we have the manpower and dicipline to keep several different
sets of language bindings up to date.   

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Mon Sep 19 13:25:28 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Build error with GRASS vector in GCC 3.3 but not GCC 4
Message-ID: <B5472D10-13F4-4ED3-82E7-92B7955A818D@kyngchaos.com>

I'm trying to add GRASS vector support to GDAL/OGR.  It works on Mac  
OS 10.4 with GCC 4.  But with Mac OS 10.3/GCC 3.3 I have a problem  
with ogrgrasslayer.cpp:

  cp ../o/.libs/ogrgrassdatasource.o ../o/ogrgrassdatasource.o
/bin/sh ../../../libtool --mode=compile g++ -Wall  -I/Users/Shared/ 
src/grass/grass-6.0.1z/dist.powerpc-apple-darwin7.8.0/include   - 
DUSE_CPL -DGRASS_GISBASE=\"/usr/local/gislibs\" -I.. -I../.. -I/usr/ 
local/gislibs/include -I../../../port -I../../../gcore -I../../../alg  
-I../../../ogr -I../../../ogr/ogrsf_frmts -I../../../port -I/usr/ 
local/graphicslibs -I/usr/local/graphicslibs/include -I/usr/local/ 
graphicslibs -I/usr/local/graphicslibs/include -I/usr/local/ 
graphicslibs -I/usr/local/graphicslibs/include -I/usr/local/gislibs/ 
include -I/usr/local/graphicslibs/include -I/usr/local/graphicslibs - 
I/usr/local/graphicslibs/include -I/Users/Shared/src/netcdf/ 
netcdf-3.6.0-p1 -I/Users/Shared/src/netcdf/netcdf-3.6.0-p1/include -I/ 
usr/local/gislibs -I/usr/local/gislibs/include  -c -o ../o/ 
ogrgrasslayer.o ogrgrasslayer.cpp
  g++ -Wall -I/Users/Shared/src/grass/grass-6.0.1z/dist.powerpc-apple- 
darwin7.8.0/include -DUSE_CPL -DGRASS_GISBASE=\"/usr/local/gislibs\" - 
I.. -I../.. -I/usr/local/gislibs/include -I../../../port -I../../../ 
gcore -I../../../alg -I../../../ogr -I../../../ogr/ogrsf_frmts - 
I../../../port -I/usr/local/graphicslibs -I/usr/local/graphicslibs/ 
include -I/usr/local/graphicslibs -I/usr/local/graphicslibs/include - 
I/usr/local/graphicslibs -I/usr/local/graphicslibs/include -I/usr/ 
local/gislibs/include -I/usr/local/graphicslibs/include -I/usr/local/ 
graphicslibs -I/usr/local/graphicslibs/include -I/Users/Shared/src/ 
netcdf/netcdf-3.6.0-p1 -I/Users/Shared/src/netcdf/netcdf-3.6.0-p1/ 
include -I/usr/local/gislibs -I/usr/local/gislibs/include -c  
ogrgrasslayer.cpp  -fno-common -DPIC -o ../o/.libs/ogrgrasslayer.o
ogrgrasslayer.cpp: In constructor `OGRGRASSLayer::OGRGRASSLayer(int,  
Map_info*)
    ':
ogrgrasslayer.cpp:210: error: `GPJ_grass_to_wkt' undeclared (first  
use this
    function)
ogrgrasslayer.cpp:210: error: (Each undeclared identifier is reported  
only once
    for each function it appears in.)
make[3]: *** [../o/ogrgrasslayer.o] Error 1
make[2]: *** [grass-target] Error 2
make[1]: *** [sublibs] Error 2
make: *** [ogr-target] Error 2


It's odd because it's not complaining that it can't find gprojects.h  
(where GPJ_grass_to_wkt is defined).

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin

From thomw00 at yahoo.com  Mon Sep 19 14:30:26 2005
From: thomw00 at yahoo.com (Thomas Windholz)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Numerical differences ogr -sql versus postreSQL
Message-ID: <20050919183027.87065.qmail@web42102.mail.yahoo.com>


Numerical differences in, for example, buffer:

 

I noticed numerical differences between an sql statement through the ogr library versus directly through postgreSQL (I thought the sqlexecute goes through?). Has anyone noticed these differences as well? In the following dataset these numerical differences produce sort of ears that are equal to the radius of the buffer (so not really negligible and quite visible).

 

Here is an example (other number combinations are less visible, but still produce errors):

 

Buffer of Point(3.0 -3.7) results:

 

C:\Program Files\FWTools0.9.9>ogr2ogr -f "ESRI Shapefile" -sql "SELECT buffer(Ge

omFromText('POINT(3.0 -3.7)'), 1.0,4)" buffer.shp "PG:user=postgres password=xxx 

dbname=xxx host=localhost port=5432"

 

In numbers:

4.0000000000000000,-3.6999999999999957

3.9238604590292496,-4.0820349338195641

3.6289817765446712,-4.2508567811706746

3.3826834323961990,-4.6238413855257363

3.0000000000437552,-4.7000000000000002

2.6173153755938636,-4.6238413855600982

2.2928932188610727,-4.2508567812341678

2.0761204675187801,-4.0820349339023796

2.0000000000000000,-3.7000000000716033

2.0761204674499845,-2.0673165677282341 
 ear 1 
 should be around 2.07.., -3.06..

2.2928932187340854,-2.9928932188928199

2.6173153754279466,-2.7761192754430666

2.9999999998653095,-2.6999999999999957

3.3826834322302819,-2.7761192753399788

3.6289817810754332,-2.9928932187023385

3.9238604586694903,-2.0673165674793625 
 ear 2 
 should be around 3.92.., -3.06..

4.0000000000000000,-3.6999999998204118

4.0000000000000000,-3.6999999999999957

 

Initially, I thought this might be a PostGIS or Geos issue, so I tested the same sql 

statement directly in PostgreSQL using:

 

SELECT AsText(buffer(GeomFromText('POINT(3.0 -3.7)'), 1.0,4))

 

"POLYGON((

4 -3.7

3.92387953251558 -4.08268343235472

3.70710678120242 -4.40710678117067

3.3826834323962   -4.6238795324984

3.0000000000449   -4.7

2.61731656768676 -4.62387953253276

2.29289321886107 -4.40710678123417

2.07612046751878 -4.08268343243768

2                              -3.70000000008979

2.07612046745006 -3.31731656772824

2.29289321873409 -2.99289321889282

2.61731656752084 -2.77612046753596

2.99999999986531 -2.7

3.38268343223028 -2.77612046743287

3.70710678107543 -2.99289321870234

3.92387953244686 -3.31731656747936

4                              -3.69999999982041

4                              -3.7

))"

 

The PostGIS buffer function did not reproduce the ears on the buffer. Also, 

overall there are some differences between the datasets created through ogr2ogr 

versus directly in PostgreSQL. The shapefile is not really an issue since I also tested reading the results directly through ogr ...

 

...any hints/help is appreciated!

 

Thanks,

Thomas

 


		
---------------------------------
Yahoo! for Good
 Click here to donate to the Hurricane Katrina relief effort. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050919/c2f437e2/attachment.html
From warmerdam at pobox.com  Mon Sep 19 15:53:31 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Numerical differences ogr -sql versus postreSQL
In-Reply-To: <20050919183027.87065.qmail@web42102.mail.yahoo.com>
References: <20050919183027.87065.qmail@web42102.mail.yahoo.com>
Message-ID: <931f8ea905091912533248fd04@mail.gmail.com>

On 9/19/05, Thomas Windholz <thomw00@yahoo.com> wrote:
>  
> 
> Numerical differences in, for example, buffer: 
> 
>   
> 
> I noticed numerical differences between an sql statement through the ogr
> library versus directly through postgreSQL (I thought the sqlexecute goes
> through?). Has anyone noticed these differences as well? In the following
> dataset these numerical differences produce sort of ears that are equal to
> the radius of the buffer (so not really negligible and quite visible). 

Thomas,

I see what you mean, but I have no idea why this is happening. 
The buffering is happening in PostGIS in both cases.  I have no
idea why some points are altered when read back through OGR.
I don't think I have a geos enabled PostGIS setup here so I can't
easily test the same thing myself. 

If you are in a position to do so, I would suggest stepping through 
the OGR code.   In particular, I suspect should break in 
gdal/ogr/ogrsf_frmts/pg/ogrpglayer.cpp in the RecordToFeature()
method.  There is a spot in a block commented as "Handle PostGIS
geometry" that either calls HEXToGeometry() or createFromWkt().
If it goes through the createFromWkt() it would be interesting to 
see if the Wkt it gets is corrupt already.  However, I suspect it will
got through the HEXToGeometry() method which is pretty new and
might a bug of some sort.   The HEXToGeometry() method is pretty
new, and used (I think) only for user sql requests. 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Mon Sep 19 23:28:27 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Build error with GRASS vector in GCC 3.3 but not GCC 4
In-Reply-To: <B5472D10-13F4-4ED3-82E7-92B7955A818D@kyngchaos.com>
References: <B5472D10-13F4-4ED3-82E7-92B7955A818D@kyngchaos.com>
Message-ID: <52A3C3A8-B71A-4B2F-9F6D-D71248A4155F@kyngchaos.com>

I got it - it seems that the definition of GPJ_grass_to_wkt in the  
GRASS headers depends on GRASS being built with OGR support.  I was  
building a trimmed down GRASS just for GDAL/OGR to get the libraries,  
leaving out everything I could, including GDAL.  For some odd reason  
I didn't have a problem with that in Mac OS 10.4/GCC 4.

Rebuilt GRASS for both, jsut to be sure.  All OK now so far.


On Sep 19, 2005, at 12:25 PM, William Kyngesburye wrote:

> I'm trying to add GRASS vector support to GDAL/OGR.  It works on  
> Mac OS 10.4 with GCC 4.  But with Mac OS 10.3/GCC 3.3 I have a  
> problem with ogrgrasslayer.cpp:
>
>  cp ../o/.libs/ogrgrassdatasource.o ../o/ogrgrassdatasource.o
> /bin/sh ../../../libtool --mode=compile g++ -Wall  -I/Users/Shared/ 
> src/grass/grass-6.0.1z/dist.powerpc-apple-darwin7.8.0/include   - 
> DUSE_CPL -DGRASS_GISBASE=\"/usr/local/gislibs\" -I.. -I../.. -I/usr/ 
> local/gislibs/include -I../../../port -I../../../gcore -I../../../ 
> alg -I../../../ogr -I../../../ogr/ogrsf_frmts -I../../../port -I/ 
> usr/local/graphicslibs -I/usr/local/graphicslibs/include -I/usr/ 
> local/graphicslibs -I/usr/local/graphicslibs/include -I/usr/local/ 
> graphicslibs -I/usr/local/graphicslibs/include -I/usr/local/gislibs/ 
> include -I/usr/local/graphicslibs/include -I/usr/local/graphicslibs  
> -I/usr/local/graphicslibs/include -I/Users/Shared/src/netcdf/ 
> netcdf-3.6.0-p1 -I/Users/Shared/src/netcdf/netcdf-3.6.0-p1/include - 
> I/usr/local/gislibs -I/usr/local/gislibs/include  -c -o ../o/ 
> ogrgrasslayer.o ogrgrasslayer.cpp
>  g++ -Wall -I/Users/Shared/src/grass/grass-6.0.1z/dist.powerpc- 
> apple-darwin7.8.0/include -DUSE_CPL -DGRASS_GISBASE=\"/usr/local/ 
> gislibs\" -I.. -I../.. -I/usr/local/gislibs/include -I../../../port  
> -I../../../gcore -I../../../alg -I../../../ogr -I../../../ogr/ 
> ogrsf_frmts -I../../../port -I/usr/local/graphicslibs -I/usr/local/ 
> graphicslibs/include -I/usr/local/graphicslibs -I/usr/local/ 
> graphicslibs/include -I/usr/local/graphicslibs -I/usr/local/ 
> graphicslibs/include -I/usr/local/gislibs/include -I/usr/local/ 
> graphicslibs/include -I/usr/local/graphicslibs -I/usr/local/ 
> graphicslibs/include -I/Users/Shared/src/netcdf/netcdf-3.6.0-p1 -I/ 
> Users/Shared/src/netcdf/netcdf-3.6.0-p1/include -I/usr/local/ 
> gislibs -I/usr/local/gislibs/include -c ogrgrasslayer.cpp  -fno- 
> common -DPIC -o ../o/.libs/ogrgrasslayer.o
> ogrgrasslayer.cpp: In constructor `OGRGRASSLayer::OGRGRASSLayer 
> (int, Map_info*)
>    ':
> ogrgrasslayer.cpp:210: error: `GPJ_grass_to_wkt' undeclared (first  
> use this
>    function)
> ogrgrasslayer.cpp:210: error: (Each undeclared identifier is  
> reported only once
>    for each function it appears in.)
> make[3]: *** [../o/ogrgrasslayer.o] Error 1
> make[2]: *** [grass-target] Error 2
> make[1]: *** [sublibs] Error 2
> make: *** [ogr-target] Error 2
>
>
> It's odd because it's not complaining that it can't find  
> gprojects.h (where GPJ_grass_to_wkt is defined).
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
>
> "Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
> does that remind me of?  Ah, yes - life."
>
> - Marvin
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro

From quengzi at gmail.com  Tue Sep 20 00:42:22 2005
From: quengzi at gmail.com (quengzi_gmail)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] bil file format
Message-ID: <432f9335.31a454bf.7179.ffffe5c0@mx.gmail.com>

Hello!

         Where can I get the bil file format documents?

         Would you send me a sample file,

Thanks !

 

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050920/52d7e761/attachment.html
From warmerdam at pobox.com  Tue Sep 20 01:38:11 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] bil file format
In-Reply-To: <432f9335.31a454bf.7179.ffffe5c0@mx.gmail.com>
References: <432f9335.31a454bf.7179.ffffe5c0@mx.gmail.com>
Message-ID: <931f8ea905091922386bdb32e7@mail.gmail.com>

On 9/20/05, quengzi_gmail <quengzi@gmail.com> wrote:
>  
> Hello! 
> 
>          Where can I get the bil file format documents? 
> 
>          Would you send me a sample file, 

Quengzi,

>From ESRI.  I don't know whether they actually have a 
document, or if it is effectively defined-by-example.  I have
certainly just been working according to examples.  Despite
some quirks this pretty straight forward. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tflynch at gmail.com  Tue Sep 20 01:52:00 2005
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK 3.3 - status update
Message-ID: <c39b2a6505091922521661cae9@mail.gmail.com>

Hi all,

Given it's of interest to the GDAL community I thought I would send
through an update on progress with the latest work on the ECW JPEG
2000 SDK.

We are currently in testing on a new release of the source code
distribution, which will be given the version number 3.3.

The main goals of this distribution have been improved stability and
performance, and ease of installation, compilation and use on
platforms other than Windows.  This has seen the introduction of a
build superstructure based on the GNU tools autoconf, automake and
libtool, which will lead to a "configure; make install" build+use
procedure.  The endpoint of this process being to make life easier for
projects such as GDAL.

We will continue to maintain project files for Visual Studio versions
6.0 and 7.1 on Windows, and the Qmake-generated make files that were
previously included in the beta of version 3.2.

The build documentation will be updated significantly, with new
content detailing any remaining "gotchas", requirements, and
procedure.

I would like to thank members of the GDAL community for their feedback
and their reporting of issues they've noticed on this list,
particularly Frank (of course) and also Bill Binko, who has spent a
long time looking at some issues.

Changes to be included:

- GNU autotools build, tested on Linux, Solaris and Mac OS X
- Builds for both a single static library, and for shared libraries
- Sample SDK code integrated into the build system
- Fixes to some threading problems on Linux
- Fix to a bug in the ECW Huffman coder on big-endian hardware
- Changes to the caching subsystem to improve performance consistency
- Corrected and improved API and build documentation

The current cut of the distribution still has some issues relating to
the build and to portability that we consider to be show stoppers,
which is why it has not yet been made publically available.  But if
you think that the items mentioned above may help you with a problem
you've noticed in the older cuts, please feel free to contact me to
obtain copy of the code as it stands.

I have already had some useful feedback on it from some GDAL users,
and now is as good a time as there is to ensure that any problems you
have get fixed in the new distribution.

I realise that my responses to some of the recent problems that have
been noted with various versions of the SDK have been a little few and
far between, but I will be endeavouring to be more prompt in future,
and also to keep you all updated on the state of our work on a fairly
regular basis.

Thanks,


-- 
Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com


From Silke.Reimer at intevation.de  Tue Sep 20 11:02:01 2005
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] Fedora 4 Package
Message-ID: <20050920150201.GA13833@intevation.de>


Hallo!

I wanted to inform you about a fedora package of gdal which I build
yesterday. I have placed in our FTP-Server ([1] or [2]). You will
find specfile, srpm and rpms in the corresponding subdirectories. Please
inform me if you experience any problem with those packages.

I try to get it officially into fedora extras. For those who are
interested in the progress please have a look on the corresponding
bugzilla entry [3].

If you think that this is useful you can of course  add the
gdal.spec to the CVS.

Many greetings,

	Silke

[1] http://ftp.gwdg.de/pub/misc/freegis/intevation/
[2] http://ftp.intevation.de/freegis/fedora/4/
[3] https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=168719





-- 
Intevation GmbH

Georgstrasse 4                    49074 Osnabr?ck, Germany
http://intevation.de              http://intevation.de/~silke
FreeGIS.org                       http://freegis.org/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050920/b330371b/attachment.bin
From bartvde at xs4all.nl  Tue Sep 20 13:59:04 2005
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] building MrSID SDK on Linux
In-Reply-To: <432E57AC.40105@tkk.fi>
References: <5383fa5e0509172250125d3313@mail.gmail.com>	<931f8ea905091808272eef4c4b@mail.gmail.com>	<5383fa5e05091816282ad8e674@mail.gmail.com>	<931f8ea905091816445f5820b2@mail.gmail.com>
	<432E57AC.40105@tkk.fi>
Message-ID: <43304DE8.6000507@xs4all.nl>

Hi list,

can anybody share any of their experiences with building GDAL against a MrSID SDK on Linux (Red Hat Enterprise 3). Is it difficult, does it take a lot of time?

Is it true that GDAL has to be compiled with the same g++/gcc version as the MrSID SDK library? We are using 
gcc/g++ 3.2.3-24.

Best regards,
Bart


From kruland at ku.edu  Tue Sep 20 14:17:44 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
Message-ID: <43305248.1040802@ku.edu>


Frank,

Hopefully you know where I'm comming from right now....  memory control
in script land.  I am unfortunately confused a little.  There are some
methods which I'd like to have clarification on.

Feature::GetGeometryRef
Feature::SetGeometry
Feature::SetGeometryDirectly

Geometry::GetGeometryRef
Geometry::AddGeometryDirectly
Geometry::AddGeometry

I roughly understand the difference between SetGeometry and
SetGeometryDirectly in the latter assumes ownership of the Geometry*
argument and the former executes some clone process.

Is this additional complexity required in scripts?  Can we get by with
only SetGeometry?

What is Geometry::GetGeometryRef()?  How would it be used?

Charlie indicates the Geometry object returned by
Feature::GetGeometryRef is owned by the the Feature object.  Would it be
ok to change this from it's current implementation:

return OGR_F_GetGeometryRef(self)

To a method which returns a clone whos memory is managed by the script,

OGRGeometryH g = OGR_F_GetGeometryRef(self)
return OGR_G_Clone( g );

What about the two different versions of AddGeometry?

Thanks a bunch.

kevin

From warmerdam at pobox.com  Tue Sep 20 14:19:22 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] building MrSID SDK on Linux
In-Reply-To: <43304DE8.6000507@xs4all.nl>
References: <5383fa5e0509172250125d3313@mail.gmail.com>
	<931f8ea905091808272eef4c4b@mail.gmail.com>
	<5383fa5e05091816282ad8e674@mail.gmail.com>
	<931f8ea905091816445f5820b2@mail.gmail.com> <432E57AC.40105@tkk.fi>
	<43304DE8.6000507@xs4all.nl>
Message-ID: <931f8ea90509201119482032e9@mail.gmail.com>

On 9/20/05, Bart van den Eijnden <bartvde@xs4all.nl> wrote:
> Hi list,
> 
> can anybody share any of their experiences with building GDAL against a MrSID SDK on Linux (Red Hat Enterprise 3). Is it difficult, does it take a lot of time?
> 
> Is it true that GDAL has to be compiled with the same g++/gcc version as the MrSID SDK library? We are using
> gcc/g++ 3.2.3-24.

Bart, 

I am pretty sure there is a 3.2.3 compatible version of
the DSDK posted on the develop.lizardtech.com web site.
But yes, you do need a gcc for the same version of gcc
as you are using, at least roughly.  to some extent (as
Bill has noted before) you can work around some difference
by linking in more than one c++ support library but that gets
messy.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Sep 20 14:44:20 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:45 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <43305248.1040802@ku.edu>
References: <43305248.1040802@ku.edu>
Message-ID: <931f8ea9050920114411f3efe4@mail.gmail.com>

On 9/20/05, Kevin Ruland <kruland@ku.edu> wrote:
> 
> Frank,
> 
> Hopefully you know where I'm comming from right now....  memory control
> in script land.  I am unfortunately confused a little.  There are some
> methods which I'd like to have clarification on.
> 
> Feature::GetGeometryRef
> Feature::SetGeometry
> Feature::SetGeometryDirectly
> 
> Geometry::GetGeometryRef
> Geometry::AddGeometryDirectly
> Geometry::AddGeometry
> 
> I roughly understand the difference between SetGeometry and
> SetGeometryDirectly in the latter assumes ownership of the Geometry*
> argument and the former executes some clone process.

Kevin, 

Right. 

> Is this additional complexity required in scripts?  Can we get by with
> only SetGeometry?

That is potentially sacrificing significant performance, but if you
can't see a practical way to void it, then so be it.  

> What is Geometry::GetGeometryRef()?  How would it be used?

This method returns a subgeometry if the geometry is a container.
 
> Charlie indicates the Geometry object returned by
> Feature::GetGeometryRef is owned by the the Feature object.  Would it be
> ok to change this from it's current implementation:
> 
> return OGR_F_GetGeometryRef(self)
> 
> To a method which returns a clone whos memory is managed by the script,
> 
> OGRGeometryH g = OGR_F_GetGeometryRef(self)
> return OGR_G_Clone( g );

With the understanding that you are potentially adding quite
a bit of runtime cost, I suppose this would be acceptable, but
if practical I would prefer to keep the current approach.
 
> What about the two different versions of AddGeometry?

Likewise.  We could settle for just AddGeometry(), but there
is a non-trivial cost in some applications. 

Scripting languages like python are not particularly slow, 
and it is quite practical to process large volumns of data
with it.  But if you force lots of extra object copying you 
will make it difficult to write efficient python scripts for
some applications.  The same would apply to other languages
I would imagine. 

In the old python interface we carried around a flag indicating
whether a given object reference "owned" that object or
not.  At least this was done for stuff like geometries.  Is
there a reason that approach cannot be generalized?  

In the past, I have opted to keep the scripting interface pretty
close to the underlying C++ library for the most part; however, 
I am willing to defer to the you and others doing the majority
of the swig interface work if you prefer to emphasise safety
over performance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Tue Sep 20 15:27:51 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <931f8ea9050920114411f3efe4@mail.gmail.com>
References: <43305248.1040802@ku.edu>
	<931f8ea9050920114411f3efe4@mail.gmail.com>
Message-ID: <433062B7.1020300@tkk.fi>

I think the script writer understands the difference between "a geometry 
as a part of something" and "a separate geometry object". The first one 
goes away when the something goes away and second one is there as long 
as the variable is. In our example:

geometry = dataset.getlayer.getgeometry

The temporary layer is always part of something but the geometry becomes 
a separate object because of the assignment. At least in Perl you can 
detect this situation and instantiate a new geometry as a copy of the 
temporary reference which exists for a while. If you have

dataset.getlayer.getgeometry.do_something_with_a_geometry

Then the do_something_with_a_geometry will work on the temporary reference.

I have lots of functions like this in my Geo::Raster that can be used as 
"in-place" or "make-a-copy".

I hope this helps.

Ari


Frank Warmerdam kirjoitti:

>On 9/20/05, Kevin Ruland <kruland@ku.edu> wrote:
>  
>
>>Frank,
>>
>>Hopefully you know where I'm comming from right now....  memory control
>>in script land.  I am unfortunately confused a little.  There are some
>>methods which I'd like to have clarification on.
>>
>>Feature::GetGeometryRef
>>Feature::SetGeometry
>>Feature::SetGeometryDirectly
>>
>>Geometry::GetGeometryRef
>>Geometry::AddGeometryDirectly
>>Geometry::AddGeometry
>>
>>I roughly understand the difference between SetGeometry and
>>SetGeometryDirectly in the latter assumes ownership of the Geometry*
>>argument and the former executes some clone process.
>>    
>>
>
>Kevin, 
>
>Right. 
>
>  
>
>>Is this additional complexity required in scripts?  Can we get by with
>>only SetGeometry?
>>    
>>
>
>That is potentially sacrificing significant performance, but if you
>can't see a practical way to void it, then so be it.  
>
>  
>
>>What is Geometry::GetGeometryRef()?  How would it be used?
>>    
>>
>
>This method returns a subgeometry if the geometry is a container.
> 
>  
>
>>Charlie indicates the Geometry object returned by
>>Feature::GetGeometryRef is owned by the the Feature object.  Would it be
>>ok to change this from it's current implementation:
>>
>>return OGR_F_GetGeometryRef(self)
>>
>>To a method which returns a clone whos memory is managed by the script,
>>
>>OGRGeometryH g = OGR_F_GetGeometryRef(self)
>>return OGR_G_Clone( g );
>>    
>>
>
>With the understanding that you are potentially adding quite
>a bit of runtime cost, I suppose this would be acceptable, but
>if practical I would prefer to keep the current approach.
> 
>  
>
>>What about the two different versions of AddGeometry?
>>    
>>
>
>Likewise.  We could settle for just AddGeometry(), but there
>is a non-trivial cost in some applications. 
>
>Scripting languages like python are not particularly slow, 
>and it is quite practical to process large volumns of data
>with it.  But if you force lots of extra object copying you 
>will make it difficult to write efficient python scripts for
>some applications.  The same would apply to other languages
>I would imagine. 
>
>In the old python interface we carried around a flag indicating
>whether a given object reference "owned" that object or
>not.  At least this was done for stuff like geometries.  Is
>there a reason that approach cannot be generalized?  
>
>In the past, I have opted to keep the scripting interface pretty
>close to the underlying C++ library for the most part; however, 
>I am willing to defer to the you and others doing the majority
>of the swig interface work if you prefer to emphasise safety
>over performance.
>
>Best regards,
>  
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From kruland at ku.edu  Tue Sep 20 18:58:27 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <931f8ea9050920114411f3efe4@mail.gmail.com>
References: <43305248.1040802@ku.edu>
	<931f8ea9050920114411f3efe4@mail.gmail.com>
Message-ID: <43309413.6030008@ku.edu>

Frank,

You are right, performance is important particularly for scripts.  I for
one am quite guilty of whipping up bad one-off code to spin through
thousands of datasets.  It would be good if these could be made efficient.

I'd like to discuss the potential problems to making life easy for
scripters.  The problem with Geometry is we really have three different
kinds of geometry - those owned by nobody, those owned by Features,
those owned by Geometries. (please correct me)

Feature::GetGeometryRef()
Geometry::GetGeometryRef()

And it's owner is either a Feature or Geometry depend on how you got a
hold of it.  You get Geometries which are not owned by anybody by doing:

Geometry::Clone()

There is probably a pure constructor for Geometry as well.

Let's bundle these handles together like this:

struct GeometryGuy {
  OGRFeatureH parentFeature;
  OGRGeometryH parentGeometry;
  OGRGeometryH me;
}

Now there are a bunch of functions which fall into two categories:

Those which make copies:

Feature::SetGeometry()
Geometry::AddGeometry()

Those which assume ownership:

Feature::SetGeometryDirectly()
Geometry::AddGeometryDirectly()

And all the Geometry member functions which operate correctly
reguardless of ownership.

It seems, if the script bindings operate on the GeometryGuy (instead of
OGRGeometryH), we can drop the distinction between the SetGeometry &
SetGeometryDirectly and have the wrapper function determine which method
to envoke.  Of course, the method is determined by which of the parent*
pointers is populated.

I believe a strategy like this would hide the troubles of passing the
wrong kind of Geometry into the wrong method, and at the same time
provide for maximum efficiency.  Yes there would be code overhead to
provide the safety -- extra tests, more complex implementation of
constructors (Clone etc).

Also instead of using OGRFeatureH, we would have to add some reference
counting for the handle in order to allow for chained calls.

Kevin



From warmerdam at pobox.com  Tue Sep 20 20:09:09 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <43309413.6030008@ku.edu>
References: <43305248.1040802@ku.edu>
	<931f8ea9050920114411f3efe4@mail.gmail.com> <43309413.6030008@ku.edu>
Message-ID: <931f8ea905092017095440df89@mail.gmail.com>

On 9/20/05, Kevin Ruland <kruland@ku.edu> wrote:
> It seems, if the script bindings operate on the GeometryGuy (instead of
> OGRGeometryH), we can drop the distinction between the SetGeometry &
> SetGeometryDirectly and have the wrapper function determine which method
> to envoke.  Of course, the method is determined by which of the parent*
> pointers is populated.

Kevin,

I don't really see that this is practical.  Even if we have a "free"
geometry we don't know that we ought to use SetGeometryDirectly()
since we don't know whether the script will continue to use the
geometry reference later. 
 
> I believe a strategy like this would hide the troubles of passing the
> wrong kind of Geometry into the wrong method, and at the same time
> provide for maximum efficiency.  Yes there would be code overhead to
> provide the safety -- extra tests, more complex implementation of
> constructors (Clone etc).
 
> Also instead of using OGRFeatureH, we would have to add some reference
> counting for the handle in order to allow for chained calls.

I am depressed by this whole concept of bending over backward
to support chaining.  I seems wrong to do all this backward referencing
of objects and I feel like it will one day make us all sorry.  

However, I leave it in your hands. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From kruland at ku.edu  Tue Sep 20 20:51:39 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <931f8ea905092017095440df89@mail.gmail.com>
References: <43305248.1040802@ku.edu>	
	<931f8ea9050920114411f3efe4@mail.gmail.com>
	<43309413.6030008@ku.edu>
	<931f8ea905092017095440df89@mail.gmail.com>
Message-ID: <4330AE9B.8060309@ku.edu>


>Kevin,
>
>I don't really see that this is practical.  Even if we have a "free"
>geometry we don't know that we ought to use SetGeometryDirectly()
>since we don't know whether the script will continue to use the
>geometry reference later. 
> 
>  
>

Frank,

Ah another complexity, a single free geometry can only be the argument 
of one *Directly call.  This stuff is certainly not easy.

>I am depressed by this whole concept of bending over backward
>to support chaining.  I seems wrong to do all this backward referencing
>of objects and I feel like it will one day make us all sorry.  
>
>  
>
I can't say that I too am depressed ... a better description would be 
"frustrated," although I completely sympathize with your feelings.  It 
seems the more friendly we try to make it the more complex its going to 
become and eventually the bindings will become soooo complex that only I 
can maintain them.  In which case you're actually worse off than before :)

The current swig bindings have some short falls but I do believe they 
are fairly useable provided the developer follow the guidelines of the 
underlying C++ library.  The rules in a nutshell are:

1) you must maintain a handle to the Datasource as long as you are using 
objects from it (with some exceptions such as XXX).  If the Datsource is 
destroyed, developer pays for all damages.
2) Geometries returned by GetGeometryRef() become stale when its parent 
dies.
3)  FieldDefn must have their parent FeatureDefn alive.

I might have these wrong - the whole situation is rather confusing to me.

The only thing which is certainly a problem are bindings for gc 
languages.  Even if the developer maintains good habits, the gc might 
still collect the trash in the wrong order.  There are a couple of ways 
to mitigate this:  We could adopt a "no-fail" destructor strategy.  That 
is ensure that under no circumstances will destructors being called in 
the wrong order cause troubles.  Quite frankly I don't know how this can 
be done.   The other is to have Charlie implement his "backreference in 
script-lang" swig hook for Ruby.  His typemap is both ingenous and 
devious at the same time and hence has quite a bit of beauty.  My 
biggest object to it was it doesn't solve the problem for all 
languages.  But if we can sick out our chins and state in large 
commanding voices, "There are no problems in python," then we don't have 
a problem to solve.

>However, I leave it in your hands. 
>
>  
>
I appreciate the confidence.  My preferred solution at this time is to 
deny the problem in python and perl and php and lua and require the 
developer to follow the C api usage.  And have Charlie mix up his wicked 
potion of chicken bones and tea leaves and fix Ruby.

But I do defer to Your Honorable +/-1.

Kevin



From warmerdam at pobox.com  Tue Sep 20 21:06:20 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <4330AE9B.8060309@ku.edu>
References: <43305248.1040802@ku.edu>
	<931f8ea9050920114411f3efe4@mail.gmail.com> <43309413.6030008@ku.edu>
	<931f8ea905092017095440df89@mail.gmail.com> <4330AE9B.8060309@ku.edu>
Message-ID: <931f8ea90509201806737a2a10@mail.gmail.com>

On 9/20/05, Kevin Ruland <kruland@ku.edu> wrote:
> The current swig bindings have some short falls but I do believe they
> are fairly useable provided the developer follow the guidelines of the
> underlying C++ library.  The rules in a nutshell are:
> 
> 1) you must maintain a handle to the Datasource as long as you are using
> objects from it (with some exceptions such as XXX).  If the Datsource is
> destroyed, developer pays for all damages.
> 2) Geometries returned by GetGeometryRef() become stale when its parent
> dies.
> 3)  FieldDefn must have their parent FeatureDefn alive.
> 
> I might have these wrong - the whole situation is rather confusing to me.

Kevin, 

I believe your summary is correct. 
 
> The only thing which is certainly a problem are bindings for gc
> languages.  Even if the developer maintains good habits, the gc might
> still collect the trash in the wrong order.

I'm not sure why it matters what order things are destroyed in as
long as you hold a reference to things till you are done with them. 

>  There are a couple of ways
> to mitigate this:  We could adopt a "no-fail" destructor strategy.  That
> is ensure that under no circumstances will destructors being called in
> the wrong order cause troubles.  Quite frankly I don't know how this can
> be done.   

Perhaps you could clarify where we have problems with gc 
languages.  I *feel* this isn't a problem, because language
variables that reference objects should not need to do anything
at all for objects they don't own.  So, for instance, a reference
to a geometry that is owned by some other object does not need
to do any work at all in it's destructor other than check it's
"owned" flag.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Sep 20 21:20:01 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGRFeatureDefn and OGRSpatialReference Reference
	Counting Semantics Now Honoured
Message-ID: <931f8ea905092018201bf36517@mail.gmail.com>

Folks,

In the past most OGR drivers were very callous about destroying
their own OGRFeatureDefn's and OGRSpatialReferences despite the
fact that these classes have reference counting semantics. 

The net outcome of this was that it was impossible, for instance, to 
keep an OGRFeature alive after the corresponding layer had been
destroyed because the OGRLayer would go and destroy the OGRFeatureDefn
it shared with the feature even though the feature still had a reference on it.

I have gone through all the drivers in CVS and tried to fix this up.  The
test suite passes and I did indepth tests of many drivers with ogrinfo
and valgrind to verify things were being cleaned up properly, but I do
think the OGR should be considered a bit unstable at this time.   So
caveat emptor or be careful or something like that. 

Let me know if you run into problems. 

This should fix at least one class of problems coming up in the script
bindings. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From kruland at ku.edu  Tue Sep 20 21:34:52 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <931f8ea90509201806737a2a10@mail.gmail.com>
References: <43305248.1040802@ku.edu>	
	<931f8ea9050920114411f3efe4@mail.gmail.com>
	<43309413.6030008@ku.edu>	
	<931f8ea905092017095440df89@mail.gmail.com>
	<4330AE9B.8060309@ku.edu>
	<931f8ea90509201806737a2a10@mail.gmail.com>
Message-ID: <4330B8BC.5010704@ku.edu>


>Perhaps you could clarify where we have problems with gc 
>languages.  I *feel* this isn't a problem, because language
>variables that reference objects should not need to do anything
>at all for objects they don't own.  So, for instance, a reference
>to a geometry that is owned by some other object does not need
>to do any work at all in it's destructor other than check it's
>"owned" flag.  
>
>  
>

Frank,


I had had this nice beautiful description of the nasties complete with 
alusions to the dispicable state of US politics, but after reading 
through the ogr.i code, I wonder if the original source of the problem 
is really my bug in the ogr.i interface description

I see that r1.35 of ogr.i on 8/22 I checked in a change which added 
%newobject to both Layer.GetFeature and Layer.GetNextFeature.  Recall 
that %newobject tells the script that it owns the returned pointer and 
will call the destructor (which is OGR_F_Destroy()).

Could this be the source of the original angst?  It probably isn't 
because chained calls still wont work because you'll end up with a 
dangling reference.  However, it probably does fix my percieved gc 
problem between layer and feature.

Unless Charlie can tell me otherwise, I don't think there is a potential 
gc problem between Datasource and Layer anymore.  The destructors for 
layer are noops so they should be able to succeed after calling the 
datasource destructor.  This is of course dependent on the assumption 
that the datasource reference is maintained during the lifetime of the 
layer.  Charlie has pointed to problems between FeatureDefn and 
FieldDefn, but you have already assumed ownership of this.

I think it would be useful for my sanity if you could walk through ogr.i 
and look at the various methods which create or consume pointers.  Any 
function which returns a pointer owned by the script needs to have 
%newobject.  Any function which assumes ownership of a pointer needs to 
have a DISOWN typemap.  I see that Layer has things like SetFeature and 
CreateFeature, I suspect they should be using DISOWN, but hey what do I 
know.

Alas, I thought it was just last week when I apologized for blowing up a 
very similar issue over FieldDefn (cf. r1.41).

Kevin

From cfis at interserv.com  Wed Sep 21 02:11:53 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: GetGeometryRef in scripts
In-Reply-To: <931f8ea90509201806737a2a10@mail.gmail.com>
References: <43305248.1040802@ku.edu>	<931f8ea9050920114411f3efe4@mail.gmail.com>
	<43309413.6030008@ku.edu>	<931f8ea905092017095440df89@mail.gmail.com>
	<4330AE9B.8060309@ku.edu>
	<931f8ea90509201806737a2a10@mail.gmail.com>
Message-ID: <4330F9A9.8040906@interserv.com>

> I'm not sure why it matters what order things are destroyed in as
> long as you hold a reference to things till you are done with them. 

Yes, agreed.  As long as you hold the a reference to the parent object 
you are fine.

For example (feature owns geometry):

    feature = layer.get_next_feature
    geom = feature.get_geom_refn

    <do stuff with geom>

    // release top level feature
    feature = nil

The one issue could be the chaining issue that's been brought up:

geom = layer.get_next_feature.get_geom_refn

If the dynamic language decides to gc the feature on you during the 
expression then you have a problem.  But I would be surprised if any 
language actually does this - I would think you are safe within a single 
expression.  But I haven't checked.

IMHO I would vote to go down this route instead of implementing lots of 
complicated reference counting C++ wrappers.  Both because it will be 
really hard to get right, and second, if we start making copies of 
everything I worry about performance.

Charlie



> 
>>  There are a couple of ways
>> to mitigate this:  We could adopt a "no-fail" destructor strategy.  That
>> is ensure that under no circumstances will destructors being called in
>> the wrong order cause troubles.  Quite frankly I don't know how this can
>> be done.   
> 
> Perhaps you could clarify where we have problems with gc 
> languages.  I *feel* this isn't a problem, because language
> variables that reference objects should not need to do anything
> at all for objects they don't own.  So, for instance, a reference
> to a geometry that is owned by some other object does not need
> to do any work at all in it's destructor other than check it's
> "owned" flag.  
> 
> Best regards,



From cfis at interserv.com  Wed Sep 21 02:19:26 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: GetGeometryRef in scripts
In-Reply-To: <4330B8BC.5010704@ku.edu>
References: <43305248.1040802@ku.edu>		<931f8ea9050920114411f3efe4@mail.gmail.com>	<43309413.6030008@ku.edu>		<931f8ea905092017095440df89@mail.gmail.com>	<4330AE9B.8060309@ku.edu>	<931f8ea90509201806737a2a10@mail.gmail.com>
	<4330B8BC.5010704@ku.edu>
Message-ID: <4330FB6E.2060601@interserv.com>

> I see that r1.35 of ogr.i on 8/22 I checked in a change which added 
> %newobject to both Layer.GetFeature and Layer.GetNextFeature.  Recall 
> that %newobject tells the script that it owns the returned pointer and 
> will call the destructor (which is OGR_F_Destroy()).

Yes, this is correct.  These features are new and thus must be owned by 
the dynamic language.

> Could this be the source of the original angst?  It probably isn't 
> because chained calls still wont work because you'll end up with a 
> dangling reference.  However, it probably does fix my percieved gc 
> problem between layer and feature.

Not quite sure what you mean - but you could be running into the 
FeatureDefn ref count issue.  That causes all sorts of strange errors 
when it happens.


> Unless Charlie can tell me otherwise, I don't think there is a potential 
> gc problem between Datasource and Layer anymore...This is of course dependent on the assumption
> that the datasource reference is maintained during the lifetime of the 
> layer. 

Yes, agreed.

> I think it would be useful for my sanity if you could walk through ogr.i 
> and look at the various methods which create or consume pointers.  Any 
> function which returns a pointer owned by the script needs to have 
> %newobject.  Any function which assumes ownership of a pointer needs to 
> have a DISOWN typemap.  I see that Layer has things like SetFeature and 
> CreateFeature, I suspect they should be using DISOWN, but hey what do I 
> know.

I've gone through the OGR api fairly closely (i.e., traced each method 
with a debugger) and think what we have now is correct.  By that, I mean 
we have %newobject where we should, we have %disown where we should, and 
we have identified methods that return child objects that the dynamic 
language must let go off before their parents are freed.  However, it 
would be a good idea for someone to double check.

As far as setfeature and createfeature, they both clone the features 
that they work on.  So no, they should not use disown.

Charlie


From ari.jolma at tkk.fi  Wed Sep 21 02:18:58 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <4330B8BC.5010704@ku.edu>
References: <43305248.1040802@ku.edu>
	<931f8ea9050920114411f3efe4@mail.gmail.com>
	<43309413.6030008@ku.edu>
	<931f8ea905092017095440df89@mail.gmail.com>
	<4330AE9B.8060309@ku.edu>
	<931f8ea90509201806737a2a10@mail.gmail.com>
	<4330B8BC.5010704@ku.edu>
Message-ID: <4330FB52.7020500@tkk.fi>

Let me theoretize a bit on this subject, because it confuses me, when 
you (seem) to be talking about specific cases. I'd like to see a very 
short list of rules, and then think what should happen in each case.

First, in my previous post, forget about Perl be able to detect, but 
remember the principles, that we ought to be able to do in-place 
manipulation of objects (for speed) but also be able to take an object 
from its container and have it although the container goes away.

An object must know about its' container, so that when the object is 
really destroyed, the destructor needs to check the container, and 
destroy also it, if it isn't referenced by anybody else.

When a container is really destroyed, all the objects that it contains, 
are also destroyed. If an object, which is thus being destroyed, is 
referenced by somebody, then it must clone itself and continue living.

Am I missing something? Isn't this all about objects, references to 
objects and their containers? And the about when an object or container 
is really destroyed. There aren't that many possible cases and it 
shouldn't be impossible to look at each case and decide what happens. 
And, is there a difference between an object and a container? A 
container is just an object which owns another object?

If you give an object to a container, it could always be just by 
reference. If the original owning variable goes out of scope, the object 
reference in the container must clone the real object and become also a 
real. We can give it explicitly by value to avoid cloning, though.

I don't see it impossible to implement this in the thin C/C++ layer 
between scripts and GDAL. As far as I understand the only important 
missing piece is the link from an object to its container. That's also a 
rule: an object can be (owned) in only one container.

The variables in the script are always just references to the actual 
objects under the hood. The engine below must take care that the correct 
objects exist. It is difficult because we're just responding to messages 
(like in GUI programming) and do not have complete control.

Ah, maybe this is enough for now ;)

Ari


Kevin Ruland kirjoitti:

>
>> Perhaps you could clarify where we have problems with gc languages.  
>> I *feel* this isn't a problem, because language
>> variables that reference objects should not need to do anything
>> at all for objects they don't own.  So, for instance, a reference
>> to a geometry that is owned by some other object does not need
>> to do any work at all in it's destructor other than check it's
>> "owned" flag. 
>>  
>>
>
> Frank,
>
>
> I had had this nice beautiful description of the nasties complete with 
> alusions to the dispicable state of US politics, but after reading 
> through the ogr.i code, I wonder if the original source of the problem 
> is really my bug in the ogr.i interface description
>
> I see that r1.35 of ogr.i on 8/22 I checked in a change which added 
> %newobject to both Layer.GetFeature and Layer.GetNextFeature.  Recall 
> that %newobject tells the script that it owns the returned pointer and 
> will call the destructor (which is OGR_F_Destroy()).
>
> Could this be the source of the original angst?  It probably isn't 
> because chained calls still wont work because you'll end up with a 
> dangling reference.  However, it probably does fix my percieved gc 
> problem between layer and feature.
>
> Unless Charlie can tell me otherwise, I don't think there is a 
> potential gc problem between Datasource and Layer anymore.  The 
> destructors for layer are noops so they should be able to succeed 
> after calling the datasource destructor.  This is of course dependent 
> on the assumption that the datasource reference is maintained during 
> the lifetime of the layer.  Charlie has pointed to problems between 
> FeatureDefn and FieldDefn, but you have already assumed ownership of 
> this.
>
> I think it would be useful for my sanity if you could walk through 
> ogr.i and look at the various methods which create or consume 
> pointers.  Any function which returns a pointer owned by the script 
> needs to have %newobject.  Any function which assumes ownership of a 
> pointer needs to have a DISOWN typemap.  I see that Layer has things 
> like SetFeature and CreateFeature, I suspect they should be using 
> DISOWN, but hey what do I know.
>
> Alas, I thought it was just last week when I apologized for blowing up 
> a very similar issue over FieldDefn (cf. r1.41).
>
> Kevin
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From cfis at interserv.com  Wed Sep 21 02:42:57 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: GetGeometryRef in scripts
In-Reply-To: <4330FB52.7020500@tkk.fi>
References: <43305248.1040802@ku.edu>	<931f8ea9050920114411f3efe4@mail.gmail.com>	<43309413.6030008@ku.edu>	<931f8ea905092017095440df89@mail.gmail.com>	<4330AE9B.8060309@ku.edu>	<931f8ea90509201806737a2a10@mail.gmail.com>	<4330B8BC.5010704@ku.edu>
	<4330FB52.7020500@tkk.fi>
Message-ID: <433100F1.7050504@interserv.com>

> An object must know about its' container, so that when the object is 
> really destroyed, the destructor needs to check the container, and 
> destroy also it, if it isn't referenced by anybody else.

In OGR an object does not know its container.

> When a container is really destroyed, all the objects that it contains, 
> are also destroyed. If an object, which is thus being destroyed, is 
> referenced by somebody, then it must clone itself and continue living.

The other way to look at this, and I think a simpler way, is that you 
must not use an object once it has been destroyed by its container 
(because the container was destroyed).  Thus the discussion centers 
around how you keep the container alive.  Is it up to the script writer 
(by holding references)?  Or is there something that we can do in the 
SWIG interface to help out?   The two possibilities that have been 
discussed are reference counting (complex) and having the child 
scripting object have a reference to its parent (simple, leverages the 
languages garbage collector, but does not work for all languages).

> I don't see it impossible to implement this in the thin C/C++ layer 
> between scripts and GDAL. As far as I understand the only important 
> missing piece is the link from an object to its container. 

There is no such link and thus this would require either an extensive 
rewrite of OGR or a whole lot of complicated code in the SWIG binding. 
And in the end, I don't see what you gain from it but slower code 
because I think there will be edge cases where you can subvert this 
layer and get in trouble.  Better to keep things simpler.

 > That's also a rule: an object can be (owned) in only one container.

Already true.

> The variables in the script are always just references to the actual 
> objects under the hood. The engine below must take care that the correct 
> objects exist. It is difficult because we're just responding to messages 
> (like in GUI programming) and do not have complete control.

I actually think the better approach is use the garbage collector of the 
scripting language (i.e., how to keep the container alive as discussed 
above).  Otherwise we end up with memory managed in 3 places - the 
scripting language, the wrapper code, and GDAL/OGR.  Its already hard 
enough in 2 places!

Charlie


> Kevin Ruland kirjoitti:
> 
>>
>>> Perhaps you could clarify where we have problems with gc languages.  
>>> I *feel* this isn't a problem, because language
>>> variables that reference objects should not need to do anything
>>> at all for objects they don't own.  So, for instance, a reference
>>> to a geometry that is owned by some other object does not need
>>> to do any work at all in it's destructor other than check it's
>>> "owned" flag.  
>>>
>>
>> Frank,
>>
>>
>> I had had this nice beautiful description of the nasties complete with 
>> alusions to the dispicable state of US politics, but after reading 
>> through the ogr.i code, I wonder if the original source of the problem 
>> is really my bug in the ogr.i interface description
>>
>> I see that r1.35 of ogr.i on 8/22 I checked in a change which added 
>> %newobject to both Layer.GetFeature and Layer.GetNextFeature.  Recall 
>> that %newobject tells the script that it owns the returned pointer and 
>> will call the destructor (which is OGR_F_Destroy()).
>>
>> Could this be the source of the original angst?  It probably isn't 
>> because chained calls still wont work because you'll end up with a 
>> dangling reference.  However, it probably does fix my percieved gc 
>> problem between layer and feature.
>>
>> Unless Charlie can tell me otherwise, I don't think there is a 
>> potential gc problem between Datasource and Layer anymore.  The 
>> destructors for layer are noops so they should be able to succeed 
>> after calling the datasource destructor.  This is of course dependent 
>> on the assumption that the datasource reference is maintained during 
>> the lifetime of the layer.  Charlie has pointed to problems between 
>> FeatureDefn and FieldDefn, but you have already assumed ownership of 
>> this.
>>
>> I think it would be useful for my sanity if you could walk through 
>> ogr.i and look at the various methods which create or consume 
>> pointers.  Any function which returns a pointer owned by the script 
>> needs to have %newobject.  Any function which assumes ownership of a 
>> pointer needs to have a DISOWN typemap.  I see that Layer has things 
>> like SetFeature and CreateFeature, I suspect they should be using 
>> DISOWN, but hey what do I know.
>>
>> Alas, I thought it was just last week when I apologized for blowing up 
>> a very similar issue over FieldDefn (cf. r1.41).
>>
>> Kevin
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 
> 



From cfis at interserv.com  Wed Sep 21 03:46:58 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: OGRFeatureDefn and OGRSpatialReference Reference
 Counting Semantics Now Honoured
In-Reply-To: <931f8ea905092018201bf36517@mail.gmail.com>
References: <931f8ea905092018201bf36517@mail.gmail.com>
Message-ID: <43310FF2.9030508@interserv.com>

Thanks Frank - this will make the script bindings much more stable and
easier to work with.

I've tested the changes using the Ruby unit tests that I did to check 
for this problem and they now all work!

Charlie


Frank Warmerdam wrote:
> Folks,
> 
> In the past most OGR drivers were very callous about destroying
> their own OGRFeatureDefn's and OGRSpatialReferences despite the
> fact that these classes have reference counting semantics. 
> 
> The net outcome of this was that it was impossible, for instance, to 
> keep an OGRFeature alive after the corresponding layer had been
> destroyed because the OGRLayer would go and destroy the OGRFeatureDefn
> it shared with the feature even though the feature still had a reference on it.
> 
> I have gone through all the drivers in CVS and tried to fix this up.  The
> test suite passes and I did indepth tests of many drivers with ogrinfo
> and valgrind to verify things were being cleaned up properly, but I do
> think the OGR should be considered a bit unstable at this time.   So
> caveat emptor or be careful or something like that. 
> 
> Let me know if you run into problems. 
> 
> This should fix at least one class of problems coming up in the script
> bindings. 
> 
> Best regards,



From cfis at interserv.com  Wed Sep 21 04:28:06 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGR Close Datasource?
Message-ID: <43311996.1040605@interserv.com>

Wondering if it would make sense to introduce the concept of "closing" a
datasource to the OGR API as a distinct thing from "destroying" a data
source object?

I bring this up because I run into a problem with a test script in Ruby:

1.  Create temporary csv data source
2.  Do some stuff to it
3.  At the end of the test, delete the temporary data source

Pseudo code:

driver = Ogr.get_driver_by_name('CSV')
ds_name = "tempds"
ds = driver.open(ds_name)
...
ds = nil
GC.start     <- Try to gc the ds object here
driver.delete_data_source(ds_name)  <- Delete the data source

Before deleting the temporary data source, the ds object must be
destroyed (because it has the temporary data source open).  This means
that the test is reliant on the garbage collector deleting the ds
object.  Depending on the dynamic language, this may or may not work.

Thus it would be handy to have a "close" method on a datasource.  The
one gottcha I see is that once you've closed a datasource you can't use
it anymore.  Also, you would need to make sure the destructor of the
object doesn't try to close the datasource a second time.

Charlie


From ari.jolma at tkk.fi  Wed Sep 21 04:36:00 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: GetGeometryRef in scripts
In-Reply-To: <433100F1.7050504@interserv.com>
References: <43305248.1040802@ku.edu>
	<931f8ea9050920114411f3efe4@mail.gmail.com>
	<43309413.6030008@ku.edu>
	<931f8ea905092017095440df89@mail.gmail.com>
	<4330AE9B.8060309@ku.edu>
	<931f8ea90509201806737a2a10@mail.gmail.com>
	<4330B8BC.5010704@ku.edu> <4330FB52.7020500@tkk.fi>
	<433100F1.7050504@interserv.com>
Message-ID: <43311B70.9080209@tkk.fi>

Charlie Savage wrote:

>> An object must know about its' container, so that when the object is 
>> really destroyed, the destructor needs to check the container, and 
>> destroy also it, if it isn't referenced by anybody else.
>
>
> In OGR an object does not know its container.


Yes, and that I see as the missing piece. But I'm willing to live 
without it.

> I actually think the better approach is use the garbage collector of 
> the scripting language (i.e., how to keep the container alive as 
> discussed above).


Those languages which rely on reference counting in gc, can't handle a 
case where a container, which is kept alive by increasing its reference 
count, is not referenced by any variable -- it just does not get deleted 
at all, thus in

lyr = datasource("xx").getlayer

the anonymous datasource object does not get deleted if lyr is a working 
reference to its part.

Either lyr has to become a stale variable so that it is noticeable in 
the variable (and its subsequent use can be blocked automatically), or 
something in lyr has to know that the anonymous datasource object is its 
parent, i.e., have a pointer to it (see above).

Ari


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Wed Sep 21 05:32:48 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGR Close Datasource?
In-Reply-To: <43311996.1040605@interserv.com>
References: <43311996.1040605@interserv.com>
Message-ID: <433128C0.8090009@tkk.fi>

Charlie Savage wrote:

> Wondering if it would make sense to introduce the concept of "closing" a
> datasource to the OGR API as a distinct thing from "destroying" a data
> source object?
>
> I bring this up because I run into a problem with a test script in Ruby:


What is the problem you run into? When I run this test code with Perl 
bindings, the delete data source -method deletes the datasource (the 
directory on hard disk) in both cases, whether datasource object still 
exists or is deleted.

However, the datasource object seems at least somewhat operational after 
the DeleteDataSource, it reports its name for example without an error.

Ari

>
> 1.  Create temporary csv data source
> 2.  Do some stuff to it
> 3.  At the end of the test, delete the temporary data source
>
> Pseudo code:
>
> driver = Ogr.get_driver_by_name('CSV')
> ds_name = "tempds"
> ds = driver.open(ds_name)
> ...
> ds = nil
> GC.start     <- Try to gc the ds object here
> driver.delete_data_source(ds_name)  <- Delete the data source
>
> Before deleting the temporary data source, the ds object must be
> destroyed (because it has the temporary data source open).  This means
> that the test is reliant on the garbage collector deleting the ds
> object.  Depending on the dynamic language, this may or may not work.
>
> Thus it would be handy to have a "close" method on a datasource.  The
> one gottcha I see is that once you've closed a datasource you can't use
> it anymore.  Also, you would need to make sure the destructor of the
> object doesn't try to close the datasource a second time.
>
> Charlie
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From Silke.Reimer at intevation.de  Wed Sep 21 06:34:50 2005
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Python OGR an Windows
Message-ID: <20050921103450.GD19379@intevation.de>


Hallo!

I looked for a binary version of the python bindings for ogr on
windows. All I found was FWTools which is of course great but far to
big for my machine where I would like to install those python
bindings.

I am not too keen to compile gdal/ogr on windows for myself (I once
did this with mapserver but I have to admit that I feel more
comfortable with GNU/Linux). Hence I would like to know whether
somebody has alread a windows binary or windows installer fulfilling
my needs?

Greetings,

        Silke

-- 
Intevation GmbH

Georgstrasse 4                    49074 Osnabr?ck, Germany
http://intevation.de              http://intevation.de/~silke
FreeGIS.org                       http://freegis.org/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050921/4f0bd255/attachment.bin
From warmerdam at pobox.com  Wed Sep 21 09:35:56 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGR Close Datasource?
In-Reply-To: <43311996.1040605@interserv.com>
References: <43311996.1040605@interserv.com>
Message-ID: <931f8ea9050921063556a6368d@mail.gmail.com>

On 9/21/05, Charlie Savage <cfis@interserv.com> wrote:
> Wondering if it would make sense to introduce the concept of "closing" a
> datasource to the OGR API as a distinct thing from "destroying" a data
> source object?
>
> I bring this up because I run into a problem with a test script in Ruby:
>
> 1.  Create temporary csv data source
> 2.  Do some stuff to it
> 3.  At the end of the test, delete the temporary data source

Charlie,

I am guessing that you want an explicit concept of Close() on the
C++ OGRDataSource object, is that right?  That is, close the datasource
regardless of how many references exist on it.  The problem I have with
this is that closing in all the drivers is currently accomplished in the
datasource destructors and so it would be a bit job to change all the
drivers to a separate Close() method.  Especially since then ideally
the datasource object would gracefully error out in case of accesses
to a closed data source.

So, I am against changing the core to include a Close() method.

However, I don't mind adding a Close() method in ogr.i that just
decrements the datasource reference count, and destroys it if
it has dropped to zero.  The downside of this approach is that any
other variables referring to the datasource that haven't been garbage
collected will still have a reference and hold open the datasource.

Sorry...

PS. In answer to Ari's point, on unix the Destroy method may have
unlinked files for a datasource but if they are still open they aren't
really deleted.  Behavior is different on win32 where unlinking an
in use file will fail.  Generally speaking you should not have a datasource
open when destroying it as results are undefined.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Sep 21 09:50:16 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GetGeometryRef in scripts
In-Reply-To: <4330FB52.7020500@tkk.fi>
References: <43305248.1040802@ku.edu>
	<931f8ea9050920114411f3efe4@mail.gmail.com> <43309413.6030008@ku.edu>
	<931f8ea905092017095440df89@mail.gmail.com> <4330AE9B.8060309@ku.edu>
	<931f8ea90509201806737a2a10@mail.gmail.com> <4330B8BC.5010704@ku.edu>
	<4330FB52.7020500@tkk.fi>
Message-ID: <931f8ea90509210650370f972@mail.gmail.com>

On 9/21/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Am I missing something? Isn't this all about objects, references to
> objects and their containers? And the about when an object or container
> is really destroyed. There aren't that many possible cases and it
> shouldn't be impossible to look at each case and decide what happens.
> And, is there a difference between an object and a container? A
> container is just an object which owns another object?

Ari,

You express some desirable rules (such as if you hold a reference
to a member of a container and the container is destroyed, the member
should be copied to keep the reference valid) but I just feel that these
rules are not practical to support because the underlying OGR
objects provide no help.

For instance, OGRFeatureDefn, OGRSpatialReference and
OGRDataSource are all referenced counted in C++.  So we can
ensure that any direct scripting variable referencing them takes
a reference.  However OGRLayer, and OGRGeometry are not
reference counted, and it is very difficult to give them full
object semantics as you wish.

Charlie says:
> There is no such link and thus this would require either an extensive
> rewrite of OGR or a whole lot of complicated code in the SWIG binding.
> And in the end, I don't see what you gain from it but slower code
> because I think there will be edge cases where you can subvert this
> layer and get in trouble.  Better to keep things simpler.

I agree with this.  Attempt to build huge amounts of reference
holding logic into the swig interface is likely to make things so
complicated that I am unable to touch the swig stuff anymore.
Better to keep things simple and understandable.

I realize this leaves scripters in the position of having to follow
some conventions and risk crashes if they don't.  This is
unfortunate and indicates an imperfect packaging but it is really
because the underlying library was not designed for the kind of
use you wish.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Sep 21 10:28:30 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Fedora 4 Package
In-Reply-To: <20050920150201.GA13833@intevation.de>
References: <20050920150201.GA13833@intevation.de>
Message-ID: <931f8ea905092107283e332875@mail.gmail.com>

On 9/20/05, Silke Reimer <Silke.Reimer@intevation.de> wrote:
>
> Hallo!
>
> I wanted to inform you about a fedora package of gdal which I build
> yesterday. I have placed in our FTP-Server ([1] or [2]). You will
> find specfile, srpm and rpms in the corresponding subdirectories. Please
> inform me if you experience any problem with those packages.
>
> I try to get it officially into fedora extras. For those who are
> interested in the progress please have a look on the corresponding
> bugzilla entry [3].
>
> If you think that this is useful you can of course  add the
> gdal.spec to the CVS.

Silke,

Cool, thanks!  I have mirrored the gdal related components at:

 http://www.gdal.org/dl/fc4-rpms

I have committed the spec file in gdal cvs.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cpadwick at digitalglobe.com  Wed Sep 21 11:28:00 2005
From: cpadwick at digitalglobe.com (Chris Padwick)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] large files in gdal
Message-ID: <48E4232189A41343B805843CE27B6EFF150D78@COMAIL02.digitalglobe.com>

Hi,

 

 

 

I'm trying to process some large files with GDAL and running into
problems.  When I process them with gdalinfo I get the error "filename"
is not recognized as a supported file format.  The files are in ENVI
format, readable by ENVI, and gdalinfo shows the ENVI driver present
when I run gdalinfo -formats.

 

 

 

I've tried a few times with different file sizes and found that it works
if the file size is 350 MB, but fails at larger sizes like 8GB.  I
haven't tried anything in between yet.  I thought that the limit was
based on the file system as discussed here:
http://www.remotesensing.org/gdal/gdal_building.html#largefiles

 

So I was expecting 16 GB to be the limit.  I'm running Fedora linux
2.4.21-20.ELsmp.  I've also tried it under SGI and found the same
problem.  Is there an inherent limit on the ENVI driver?  Any ideas?

 

 

 

Thanks,

 

 

 

Chris

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050921/1dc8e788/attachment.html
From cfis at interserv.com  Wed Sep 21 12:23:49 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: OGR Close Datasource?
In-Reply-To: <433128C0.8090009@tkk.fi>
References: <43311996.1040605@interserv.com> <433128C0.8090009@tkk.fi>
Message-ID: <43318915.5020009@interserv.com>

> 
> What is the problem you run into? When I run this test code with Perl 
> bindings, the delete data source -method deletes the datasource (the 
> directory on hard disk) in both cases, whether datasource object still 
> exists or is deleted.

What OS are you running?  On Windows XP it doesn't work because the csv 
file is still in use by the open data source, thus you can't delete it.

Charlie


>>
>> 1.  Create temporary csv data source
>> 2.  Do some stuff to it
>> 3.  At the end of the test, delete the temporary data source
>>
>> Pseudo code:
>>
>> driver = Ogr.get_driver_by_name('CSV')
>> ds_name = "tempds"
>> ds = driver.open(ds_name)
>> ...
>> ds = nil
>> GC.start     <- Try to gc the ds object here
>> driver.delete_data_source(ds_name)  <- Delete the data source
>>
>> Before deleting the temporary data source, the ds object must be
>> destroyed (because it has the temporary data source open).  This means
>> that the test is reliant on the garbage collector deleting the ds
>> object.  Depending on the dynamic language, this may or may not work.
>>
>> Thus it would be handy to have a "close" method on a datasource.  The
>> one gottcha I see is that once you've closed a datasource you can't use
>> it anymore.  Also, you would need to make sure the destructor of the
>> object doesn't try to close the datasource a second time.
>>
>> Charlie
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 
> 



From cfis at interserv.com  Wed Sep 21 12:25:40 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: OGR Close Datasource?
In-Reply-To: <931f8ea9050921063556a6368d@mail.gmail.com>
References: <43311996.1040605@interserv.com>
	<931f8ea9050921063556a6368d@mail.gmail.com>
Message-ID: <43318984.6040406@interserv.com>

No problem, thought I'd ask though.  I don't think its worth doing in 
the SWIG bindings because you end up with two reference counts - one in 
SWIG and one for shared datasources in OGR.  Not sure how much this 
problem would actually occur in real life.

Charlie

Frank Warmerdam wrote:
> On 9/21/05, Charlie Savage <cfis@interserv.com> wrote:
>> Wondering if it would make sense to introduce the concept of "closing" a
>> datasource to the OGR API as a distinct thing from "destroying" a data
>> source object?
>>
>> I bring this up because I run into a problem with a test script in Ruby:
>>
>> 1.  Create temporary csv data source
>> 2.  Do some stuff to it
>> 3.  At the end of the test, delete the temporary data source
> 
> Charlie,
> 
> I am guessing that you want an explicit concept of Close() on the
> C++ OGRDataSource object, is that right?  That is, close the datasource
> regardless of how many references exist on it.  The problem I have with
> this is that closing in all the drivers is currently accomplished in the
> datasource destructors and so it would be a bit job to change all the
> drivers to a separate Close() method.  Especially since then ideally
> the datasource object would gracefully error out in case of accesses
> to a closed data source.
> 
> So, I am against changing the core to include a Close() method.
> 
> However, I don't mind adding a Close() method in ogr.i that just
> decrements the datasource reference count, and destroys it if
> it has dropped to zero.  The downside of this approach is that any
> other variables referring to the datasource that haven't been garbage
> collected will still have a reference and hold open the datasource.
> 
> Sorry...
> 
> PS. In answer to Ari's point, on unix the Destroy method may have
> unlinked files for a datasource but if they are still open they aren't
> really deleted.  Behavior is different on win32 where unlinking an
> in use file will fail.  Generally speaking you should not have a datasource
> open when destroying it as results are undefined.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Sep 21 12:25:50 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] large files in gdal
In-Reply-To: <48E4232189A41343B805843CE27B6EFF150D78@COMAIL02.digitalglobe.com>
References: <48E4232189A41343B805843CE27B6EFF150D78@COMAIL02.digitalglobe.com>
Message-ID: <931f8ea905092109251697905f@mail.gmail.com>

On 9/21/05, Chris Padwick <cpadwick@digitalglobe.com> wrote:
> I'm trying to process some large files with GDAL and running into problems.
> When I process them with gdalinfo I get the error "filename" is not
> recognized as a supported file format.  The files are in ENVI format,
> readable by ENVI, and gdalinfo shows the ENVI driver present when I run
> gdalinfo ?formats.

>
> I've tried a few times with different file sizes and found that it works if
> the file size is 350 MB, but fails at larger sizes like 8GB.  I haven't
> tried anything in between yet.  I thought that the limit was based on the
> file system as discussed here:
> http://www.remotesensing.org/gdal/gdal_building.html#largefiles
>
>
> So I was expecting 16 GB to be the limit.  I'm running Fedora linux
> 2.4.21-20.ELsmp.  I've also tried it under SGI and found the same problem.
> Is there an inherent limit on the ENVI driver?  Any ideas?

Chris,

I have confirmed this problem and committed a fix.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bigfoot at main-task.com  Wed Sep 21 13:27:00 2005
From: bigfoot at main-task.com (=?ISO-8859-1?Q?Vladimir_Guzm=E1n?=)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Problem building gdal 64bits
Message-ID: <433197E4.3010100@main-task.com>

Hello.
I've got a problem building gdal.
I have an Athlon 64 machine.
When compiling, I've got the following error:

/usr/lib/libstdc++.so: could not read symbols: File in wrong format

My configure is:
./configure \
--with-libz=/usr \
--with-png=/usr \
--with-libtiff=internal \
--with-geotiff=internal \
--with-jpeg=/usr \
--without-grass \
--without-jasper \
--without-python \
--with-oci=/local/oracle/product/10.1.0

Thanks a lot in advance,

-- 
Vladimir Ilich Guzm?n R.
------------------------
http://maintask.com



From atompkins at fastmail.fm  Wed Sep 21 08:17:02 2005
From: atompkins at fastmail.fm (Andy Tompkins)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] MrSID dataset
In-Reply-To: <1127241884.31528.243356790@webmail.messagingengine.com>
References: <1127241884.31528.243356790@webmail.messagingengine.com>
Message-ID: <1127305022.6602.243416802@webmail.messagingengine.com>

I have just started using GDAL and I have a question about the MrSID
dataset.

I find that I get a black line drawn down the left and bottom sides of
the image after decoding the file with dataset->RasterIO().  I believe
that I have found a fix for this problem.

change MrSIDDataset::IRasterIO(), line 761 from:
    nZoomMag * 2 < (dfZoomMag + 0.1) && iOverview < nOverviewCount;
to
    nZoomMag * 2 < dfZoomMag && iOverview < nOverviewCount;

and change MrSIDDataset::IRasterIO(), lines 772, and 773 from:
    nTmpXSize = (int) floor( nXSize / (double) nZoomMag + 0.99 );
    nTmpYSize = (int) floor( nYSize / (double) nZoomMag + 0.99 );
to
    nTmpXSize = (int) floor( nXSize / (double) nZoomMag );
    nTmpYSize = (int) floor( nYSize / (double) nZoomMag );

This seems to fix the problem.  I guess I am wondering if I have missed
something and/or if there is a better/correct way to fix my problem? 
Also, if
this is a good/correct fix, how does this change get into
GDAL?

Thank you in advance,
  Andy Tompkins

From bigfoot at main-task.com  Wed Sep 21 13:21:29 2005
From: bigfoot at main-task.com (=?ISO-8859-1?Q?Vladimir_Guzm=E1n?=)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Problem building gdal 64bits
Message-ID: <43319699.7040502@main-task.com>

Hello.
I've got a problem building gdal.
I have an Athlon 64 machine.
When compiling, I've got the following error:

/usr/lib/libstdc++.so: could not read symbols: File in wrong format

My configure is:
./configure \
--with-libz=/usr \
--with-png=/usr \
--with-libtiff=internal \
--with-geotiff=internal \
--with-jpeg=/usr \
--without-grass \
--without-jasper \
--without-python \
--with-oci=/local/oracle/product/10.1.0

Thanks a lot in advance,

-- 
Vladimir Ilich Guzm?n R.
------------------------
http://maintask.com 


From kmckelvey at lizardtech.com  Wed Sep 21 18:25:53 2005
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] MrSID dataset
Message-ID: <C5B740D9CEC9284A84B767BBD1DAA846D550D4@sea-srv-ms2.lizardtech.com>

 
Andy,

The MrSID formats decode natively only at "octave" (integral
power-of-two) zoom-levels, in other words 1:1, 4:1, 16:1, et cetera.  It
looks like the logic in MrSIDDataset::IRasterIO() is doing two things:
  1. deciding which octave to decode (since it may be given a non-octave
zoom-level)
  2. translating the given pixel coords into that octave
Then the octave decode is resampled to fulfill the original zoom-level
requested.

So my question is whether you can take just one or the other of your
changes to fix the problem?  The first fudge-factor (0.1) is
manipulating the octave decision and the second fudge-factor (0.99)
looks like it is manipulating the rounding in the pixel translation.
I'm guessing you can fix your problem with just the second change.

As for whether it is the "right" change, well, someone probably put that
fudge-factor in there because they were seeing black lines of their own,
and if you take it out, theirs will come back.  The right change
involves using the LizardTech classes and methods to do zoom and
coordinate calculations.

I recently began rewriting MrSIDDataset for speed and code correctness,
and I'll make sure to address this issue while I'm in there.  You may
have to wait a few weeks though since this work is competing with other
tasks.

Cheers,
Kirk


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Andy Tompkins
Sent: Wednesday, September 21, 2005 5:17 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] MrSID dataset

I have just started using GDAL and I have a question about the MrSID
dataset.

I find that I get a black line drawn down the left and bottom sides of
the image after decoding the file with dataset->RasterIO().  I believe
that I have found a fix for this problem.

change MrSIDDataset::IRasterIO(), line 761 from:
    nZoomMag * 2 < (dfZoomMag + 0.1) && iOverview < nOverviewCount; to
    nZoomMag * 2 < dfZoomMag && iOverview < nOverviewCount;

and change MrSIDDataset::IRasterIO(), lines 772, and 773 from:
    nTmpXSize = (int) floor( nXSize / (double) nZoomMag + 0.99 );
    nTmpYSize = (int) floor( nYSize / (double) nZoomMag + 0.99 ); to
    nTmpXSize = (int) floor( nXSize / (double) nZoomMag );
    nTmpYSize = (int) floor( nYSize / (double) nZoomMag );

This seems to fix the problem.  I guess I am wondering if I have missed
something and/or if there is a better/correct way to fix my problem? 
Also, if
this is a good/correct fix, how does this change get into GDAL?

Thank you in advance,
  Andy Tompkins
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From jhhal at wmdata.com  Thu Sep 22 03:57:26 2005
From: jhhal at wmdata.com (Hallgren Johan E)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Maps in PDA
Message-ID: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>

Hello

 

I have been working with MapServer for publishing maps on the internet for a while. As an old ESRI fan, that work with Opensource has been a grate experience for me. I'm still stucked into the Microsoft world but beside that everything work fine. Now I'm looking at way to show maps in a PDA (PocketPC/WindowsCE). My first idea was to use MapServer because the wrapper I have used is the csharp/SWIG option and it could also be used to build a Windows app just as I want. The problem is that I don't think it can run on a PocketPC without recompile everything. My next issue was to figure out how difficult it could be to recompile MS and all is parts to the PDA environment, and my answer was that it's difficult. Beside that I don't know if the MapServer solution for displaying maps in a PDA is optimal, I think the aim with MapServer was to create maps on the internet and not running as a single desktop app.

 

Next I found the work Mateusz ?oskot is doing to porting GDAL to the Windows CE environment, that's great. Could GDAL be the solution for me? It raises some new questions:

 

*         It's not my dream to build logic for symbology and classification. Is there any support for symbology and classification in GDAL?

*         Are there other options for my PDA issue I havent't found yet?

*         Is it possible to compile MapServer for Windows CE?

 

Any ideas/answers are welcome

 

Regards

Johan

___________________________________


Johan Hallgren


 

WM-data

Pelle Bergs backe 3

Box 1938, 791 19 Falun

Tel: 023-844 65 (int: +46-2384465)

Mobil: 070-588 44 28 (int: +46-705884428)

johan.e.hallgren@wmdata.com <BLOCKED::mailto:johan.e.hallgren@wmdata.com> 

http://www.wmdata.se <BLOCKED::/exchweb/bin/redir.asp?URL=http://www.wmdata.se/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050922/b03cd065/attachment.html
From warmerdam at pobox.com  Thu Sep 22 09:37:43 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Maps in PDA
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
Message-ID: <931f8ea905092206373f015e41@mail.gmail.com>

On 9/22/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
> The problem is that I don't think it can run on
> a PocketPC without recompile everything. My next issue was to figure out how
> difficult it could be to recompile MS and all is parts to the PDA
> environment, and my answer was that it's difficult. Beside that I don't know
> if the MapServer solution for displaying maps in a PDA is optimal, I think
> the aim with MapServer was to create maps on the internet and not
> running as a single desktop app.

Johan,

I know there are a few folks who use MapServer as the rendering
core for desktop display, though it is quite a bit of work to repurpose
it that way.  But the bigger issue is that porting MapServer and all
it's dependencies to WinCE is likely to be a substantial job.   The
work Mateusz is doing on GDAL should be helpful, but that still leaves
alot of libraries (GD, and freetype at a minumum) plus MapServer
that would need to be ported to WinCE.  Not a small task I think.

> Next I found the work Mateusz ?oskot is doing to porting GDAL to the Windows
> CE environment, that's great. Could GDAL be the solution for me? It raises
> some new questions:

Well, GDAL would give you a mechanism for reading raster and
vector data.

> ?         It's not my dream to build logic for symbology and classification.
> Is there any support for symbology and classification in GDAL?

No, GDAL and OGR do not address presentation rendering,
symbology, etc.

> ?         Are there other options for my PDA issue I havent't found yet?

I'm afraid I don't know what is available for WinCE or other PDAs.
I would suggest you do some google searches for available toolkits.

> ?         Is it possible to compile MapServer for Windows CE?

Beyond the effort to port these things to WinCE, the othe issue
to keep in mind is that MapServer and supporting libraries are not
necessarily designed for the tight memory conditions of a PDA.
Something designed with the PDA environment in mind is likely to
be less resource intensive.

Hopefully others will have more useful suggestions than me!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rsignell at usgs.gov  Thu Sep 22 10:43:11 2005
From: rsignell at usgs.gov (Rich Signell)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Maps in PDA
In-Reply-To: <931f8ea905092206373f015e41@mail.gmail.com>
References: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
	<931f8ea905092206373f015e41@mail.gmail.com>
Message-ID: <4332C2FF.40804@usgs.gov>

Gdal gang,

Here's a WMS client that works on any Java capable (MIDP 1.0/CLDC 1.0) cell 
phone or PDA

http://www.skylab-mobilesystems.com/en/products/j2me_wms_client.html

-Rich

Frank Warmerdam wrote:
> On 9/22/05, Hallgren Johan E <jhhal@wmdata.com> wrote:
> 
>>The problem is that I don't think it can run on
>>a PocketPC without recompile everything. My next issue was to figure out how
>>difficult it could be to recompile MS and all is parts to the PDA
>>environment, and my answer was that it's difficult. Beside that I don't know
>>if the MapServer solution for displaying maps in a PDA is optimal, I think
>>the aim with MapServer was to create maps on the internet and not
>>running as a single desktop app.
> 
> 
> Johan,
> 
> I know there are a few folks who use MapServer as the rendering
> core for desktop display, though it is quite a bit of work to repurpose
> it that way.  But the bigger issue is that porting MapServer and all
> it's dependencies to WinCE is likely to be a substantial job.   The
> work Mateusz is doing on GDAL should be helpful, but that still leaves
> alot of libraries (GD, and freetype at a minumum) plus MapServer
> that would need to be ported to WinCE.  Not a small task I think.
> 
> 
>>Next I found the work Mateusz ?oskot is doing to porting GDAL to the Windows
>>CE environment, that's great. Could GDAL be the solution for me? It raises
>>some new questions:
> 
> 
> Well, GDAL would give you a mechanism for reading raster and
> vector data.
> 
> 
>>?         It's not my dream to build logic for symbology and classification.
>>Is there any support for symbology and classification in GDAL?
> 
> 
> No, GDAL and OGR do not address presentation rendering,
> symbology, etc.
> 
> 
>>?         Are there other options for my PDA issue I havent't found yet?
> 
> 
> I'm afraid I don't know what is available for WinCE or other PDAs.
> I would suggest you do some google searches for available toolkits.
> 
> 
>>?         Is it possible to compile MapServer for Windows CE?
> 
> 
> Beyond the effort to port these things to WinCE, the othe issue
> to keep in mind is that MapServer and supporting libraries are not
> necessarily designed for the tight memory conditions of a PDA.
> Something designed with the PDA environment in mind is likely to
> be less resource intensive.
> 
> Hopefully others will have more useful suggestions than me!
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 
Richard P. Signell
U.S. Geological Survey       Phone: (508) 457-2229
384 Woods Hole Road          Fax:   (508) 457-2310
Woods Hole, MA  02543-1598

From atompkins at fastmail.fm  Thu Sep 22 11:08:37 2005
From: atompkins at fastmail.fm (Andy Tompkins)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: MrSID dataset
Message-ID: <1127401717.18770.243520736@webmail.messagingengine.com>

> Andy,
> 
> The MrSID formats decode natively only at "octave" (integral
> power-of-two) zoom-levels, in other words 1:1, 4:1, 16:1, et cetera.  It
> looks like the logic in MrSIDDataset::IRasterIO() is doing two things:
>  1. deciding which octave to decode (since it may be given a non-octave
> zoom-level)
>  2. translating the given pixel coords into that octave
> Then the octave decode is resampled to fulfill the original zoom-level
> requested.
> 
> So my question is whether you can take just one or the other of your
> changes to fix the problem?  The first fudge-factor (0.1) is
> manipulating the octave decision and the second fudge-factor (0.99)
> looks like it is manipulating the rounding in the pixel translation.
> I'm guessing you can fix your problem with just the second change.
> 
> As for whether it is the "right" change, well, someone probably put that
> fudge-factor in there because they were seeing black lines of their own,
> and if you take it out, theirs will come back.  The right change
> involves using the LizardTech classes and methods to do zoom and
> coordinate calculations.
> 
> I recently began rewriting MrSIDDataset for speed and code correctness,
> and I'll make sure to address this issue while I'm in there.  You may
> have to wait a few weeks though since this work is competing with other
> tasks.
> 
> Cheers,
> Kirk
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Andy Tompkins
> Sent: Wednesday, September 21, 2005 5:17 AM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] MrSID dataset
> 
> I have just started using GDAL and I have a question about the MrSID
> dataset.
> 
> I find that I get a black line drawn down the left and bottom sides of
> the image after decoding the file with dataset->RasterIO().  I believe
> that I have found a fix for this problem.
> 
> change MrSIDDataset::IRasterIO(), line 761 from:
>    nZoomMag * 2 < (dfZoomMag + 0.1) && iOverview < nOverviewCount; to
>    nZoomMag * 2 < dfZoomMag && iOverview < nOverviewCount;
> 
> and change MrSIDDataset::IRasterIO(), lines 772, and 773 from:
>    nTmpXSize = (int) floor( nXSize / (double) nZoomMag + 0.99 );
>    nTmpYSize = (int) floor( nYSize / (double) nZoomMag + 0.99 ); to
>    nTmpXSize = (int) floor( nXSize / (double) nZoomMag );
>    nTmpYSize = (int) floor( nYSize / (double) nZoomMag );
> 
> This seems to fix the problem.  I guess I am wondering if I have missed
> something and/or if there is a better/correct way to fix my problem? 
> Also, if
> this is a good/correct fix, how does this change get into GDAL?
> 
> Thank you in advance,
>  Andy Tompkins
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

Kirk,

Thank you for replying with such good information.  You are correct,
just 
changing the second fudge-factor (0.99 - for the rounding in the pixel 
translation) fixes my problem.  I look forward you your rewrite of the 
MrSIDDataset!

Thanks again,
  Andy. 

From Peter.Nagy at vexcel.com  Thu Sep 22 13:45:39 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] mingw build, MSVCR71.DLL problem
In-Reply-To: <432E3DD9.8090509@videotron.ca>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<432B3AC9.3060504@videotron.ca>
	<Pine.CYG.4.58.0509161540460.584@Thwack>
	<432E3DD9.8090509@videotron.ca>
Message-ID: <Pine.CYG.4.58.0509221108340.2568@Thwack>


Hello again ->

  I was able to build gdal fairly easily with mingw, but I have a python
module problem.

  On the mingw build, it is very close to working out of the box.  The
HAVE_BOOLEAN in jmorecfg.h is defined though boolean is not (see earlier
posts), and I had to use --without-pg.  --without-python was not necessary
because configure set it up that way anyway, where the mingw procedure for
python is to run:
  python setup.py build --force --compiler=mingw32 and
  python setup.py install --force
I had to use Norman Vine's setup.py as posted to the list instead of the
one provided with gdal, with the addition of os.path.join("alg") in the
INCLUDE_DIRS.

  OK, so after that, everything builds fine.  I can use gdal.dll in c++
programs, and when I open this dll in Dependency Walker everything is fine
(it depends on MSVCRT.DLL).  However, when I try to import gdal in python,
I get the error 'The procedure entry point _ctype could not be located in
the dynamic link library msvcr71.dll'.  If I open _gdal.pyd it shows that
it depends on MSVCR71.DLL, and everything comes up green except for refs
to _ctype.  Other web posts show similar problems, where it was mentioned
that MSVCR71.DLL does not have the _ctype array for use by the 'is' macros
(like isspace), so I tried to #undef all of these macros in cpl_port.h
after #include <ctype.h>, to force use of functions instead of macros, to
no avail.

  My question is, can anyone explain the use of msvcr71.dll with gdal?
This is a newer dependency; I just needed to grab it when I went to 1.2.6.
Why is it needed instead of msvcrt.dll?  Any ideas why the gdal.dll does
not have this dependency, and the python module does?  Any ideas of
workarounds?

  Thanks,

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================

From warmerdam at pobox.com  Thu Sep 22 14:02:48 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] mingw build, MSVCR71.DLL problem
In-Reply-To: <Pine.CYG.4.58.0509221108340.2568@Thwack>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<432B3AC9.3060504@videotron.ca>
	<Pine.CYG.4.58.0509161540460.584@Thwack>
	<432E3DD9.8090509@videotron.ca>
	<Pine.CYG.4.58.0509221108340.2568@Thwack>
Message-ID: <931f8ea905092211026131d839@mail.gmail.com>

On 9/22/05, Pete Nagy <Peter.Nagy@vexcel.com> wrote:
>   My question is, can anyone explain the use of msvcr71.dll with gdal?
> This is a newer dependency; I just needed to grab it when I went to 1.2.6.
> Why is it needed instead of msvcrt.dll?  Any ideas why the gdal.dll does
> not have this dependency, and the python module does?  Any ideas of
> workarounds?

Peter,

My understanding is that MSVCR71.DLL is what is used by
Visual Studio.NET built applications and that Python 2.4 binaries
are now normally built this way.  Is it possible that switching to Python
2.4 actually introduced this requirement?

I don't know a good solution, though switching back to Python 2.3
would likely help.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Thu Sep 22 15:10:52 2005
From: cfis at interserv.com (Charles F. I. Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] PostGis layers
Message-ID: <433301BC.1000906@interserv.com>

Hi everyone - working with OGR and PostGis.

When OGR opens a Postgis enabled database, it finds its layers via this 
query (I added the select g.f_table_name part to show a problem below):

SELECT c.relname, g.f_table_name FROM pg_class c, geometry_columns g
WHERE (c.relkind in ('r','v') AND c.relname !~ '^pg'
AND c.relname ~ g.f_table_name)

I've pasted the results of this query below.  Note that the 
polygoncorrections and polgyoneconomics layer show up twice!  This is 
caused by this part of the query:

AND c.relname ~ g.f_table_name)

Shouldn't it be a direct match without a regular expression, like this:

AND c.relname = g.f_table_name)


Charlie


"altname";"altname"
"arealandmarks";"arealandmarks"
"arealandmarks";"landmarks"
"completechain";"completechain"
"entitynames";"entitynames"
"featureids";"featureids"
"idhistory";"idhistory"
"landmarks";"landmarks"
"overunder";"overunder"
"pip";"pip"
"polychainlink";"polychainlink"
"polygon";"polygon"
"polygoncorrections";"polygon"
"polygoncorrections";"polygoncorrections"
"polygoneconomic";"polygon"
"polygoneconomic";"polygoneconomic"
"tlidrange";"tlidrange"
"zerocellid";"zerocellid"
"zipcodes";"zipcodes"
"zipplus4";"zipplus4"


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 2781 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050922/558b1050/smime.bin
From warmerdam at pobox.com  Thu Sep 22 15:29:34 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] PostGis layers
In-Reply-To: <433301BC.1000906@interserv.com>
References: <433301BC.1000906@interserv.com>
Message-ID: <931f8ea905092212292a8cf662@mail.gmail.com>

On 9/22/05, Charles F. I. Savage <cfis@interserv.com> wrote:
> Hi everyone - working with OGR and PostGis.
>
> When OGR opens a Postgis enabled database, it finds its layers via this
> query (I added the select g.f_table_name part to show a problem below):
>
> SELECT c.relname, g.f_table_name FROM pg_class c, geometry_columns g
> WHERE (c.relkind in ('r','v') AND c.relname !~ '^pg'
> AND c.relname ~ g.f_table_name)
>
> I've pasted the results of this query below.  Note that the
> polygoncorrections and polgyoneconomics layer show up twice!  This is
> caused by this part of the query:
>
> AND c.relname ~ g.f_table_name)
>
> Shouldn't it be a direct match without a regular expression, like this:
>
> AND c.relname = g.f_table_name)

Charlie,

I believe you are corrected.  I have committed this change.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Peter.Nagy at vexcel.com  Thu Sep 22 15:46:00 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] mingw build, MSVCR71.DLL problem
In-Reply-To: <931f8ea905092211026131d839@mail.gmail.com>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<432B3AC9.3060504@videotron.ca>
	<Pine.CYG.4.58.0509161540460.584@Thwack>
	<432E3DD9.8090509@videotron.ca>
	<Pine.CYG.4.58.0509221108340.2568@Thwack>
	<931f8ea905092211026131d839@mail.gmail.com>
Message-ID: <Pine.CYG.4.58.0509221338000.2568@Thwack>


Hi Frank ->

  It may be that python 2.4.x had something to do with it; I've seen
postings of similar problems with other packages.  Thanks.

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


On Thu, 22 Sep 2005, Frank Warmerdam wrote:

> On 9/22/05, Pete Nagy <Peter.Nagy@vexcel.com> wrote:
> >   My question is, can anyone explain the use of msvcr71.dll with gdal?
> > This is a newer dependency; I just needed to grab it when I went to 1.2.6.
> > Why is it needed instead of msvcrt.dll?  Any ideas why the gdal.dll does
> > not have this dependency, and the python module does?  Any ideas of
> > workarounds?
>
> Peter,
>
> My understanding is that MSVCR71.DLL is what is used by
> Visual Studio.NET built applications and that Python 2.4 binaries
> are now normally built this way.  Is it possible that switching to Python
> 2.4 actually introduced this requirement?
>
> I don't know a good solution, though switching back to Python 2.3
> would likely help.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From hamish_nospam at yahoo.com  Thu Sep 22 19:28:19 2005
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Maps in PDA
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
Message-ID: <20050923112819.49046ed0.hamish_nospam@yahoo.com>

> Are there other options for my PDA issue I havent't found yet?


no really for wince, but checkitout:

http://www.pygps.org

http://grass.ibiblio.org/platforms/grasshandheld.html



Hamish

From jhhal at wmdata.com  Fri Sep 23 05:58:12 2005
From: jhhal at wmdata.com (Hallgren Johan E)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Maps in PDA
Message-ID: <D93CFEAA72FA764885CC1FDA94A1D89CE91CA1@WMRI000166.corp.wmdata.net>

Frank and other, thanks for your time.

 

We will probably wait for the GDAL work with WinCE and then see if we
can do anything from that. Indeed 

the issue is interesting. I look forward for the next version, if you
need any help while testing; I'm willing to 

do my best.

 

Regards

Johan

___________________________________


Johan Hallgren


 

WM-data

Pelle Bergs backe 3

Box 1938, 791 19 Falun

Tel: 023-844 65 (int: +46-2384465)

Mobil: 070-588 44 28 (int: +46-705884428)

johan.e.hallgren@wmdata.com
<BLOCKED::mailto:johan.e.hallgren@wmdata.com> 

http://www.wmdata.se
<BLOCKED::/exchweb/bin/redir.asp?URL=http://www.wmdata.se/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050923/ba3e55d1/attachment.html
From oss-dev at rambler.ru  Fri Sep 23 08:47:16 2005
From: oss-dev at rambler.ru (Oleg Semykin)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] PostGis layers
In-Reply-To: <931f8ea905092212292a8cf662@mail.gmail.com>
References: <433301BC.1000906@interserv.com>
	<931f8ea905092212292a8cf662@mail.gmail.com>
Message-ID: <4333F954.1020002@rambler.ru>

Frank Warmerdam wrote:

> On 9/22/05, Charles F. I. Savage <cfis@interserv.com> wrote:
>  
>
>> Hi everyone - working with OGR and PostGis.
>>
>> When OGR opens a Postgis enabled database, it finds its layers via this
>> query (I added the select g.f_table_name part to show a problem below):
>>
>> SELECT c.relname, g.f_table_name FROM pg_class c, geometry_columns g
>> WHERE (c.relkind in ('r','v') AND c.relname !~ '^pg'
>> AND c.relname ~ g.f_table_name)
>>
>> I've pasted the results of this query below.  Note that the
>> polygoncorrections and polgyoneconomics layer show up twice!  This is
>> caused by this part of the query:
>>
>> AND c.relname ~ g.f_table_name)
>>
>> Shouldn't it be a direct match without a regular expression, like this:
>>
>> AND c.relname = g.f_table_name)
>>   
>
>
> Charlie,
>
> I believe you are corrected.  I have committed this change.
>
> Best regards,
> -- 
> ---------------------------------------+-------------------------------------- 
>
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>  
>

Hi, Frank

But what about older PostreSQL 7.X version support:

"Unable to identify an operator '=' for types 'name' and 'varchar'
You will have to retype this query using an explicit cast"

See: http://lists.maptools.org/pipermail/gdal-dev/2005-August/006098.html



From warmerdam at pobox.com  Fri Sep 23 10:08:25 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] PostGis layers
In-Reply-To: <4333F954.1020002@rambler.ru>
References: <433301BC.1000906@interserv.com>
	<931f8ea905092212292a8cf662@mail.gmail.com>
	<4333F954.1020002@rambler.ru>
Message-ID: <931f8ea905092307087745e386@mail.gmail.com>

On 9/23/05, Oleg Semykin <oss-dev@rambler.ru> wrote:
> Hi, Frank
>
> But what about older PostreSQL 7.X version support:
>
> "Unable to identify an operator '=' for types 'name' and 'varchar'
> You will have to retype this query using an explicit cast"
>
> See: http://lists.maptools.org/pipermail/gdal-dev/2005-August/006098.html

Oleg,

Doh!   Is there a way of explicitly casting that will work fine on old
and newer without having to use the ~ operator?  How about:

 select c.relname from pg_class c, geometry_columns g where (c.relkind
in ('r','v') AND c.relname !~ '^pg' AND c.relname::text =
g.f_table_name::text);

That seems to work on my 7.1 database and my 8.x database.  I'll
commit that.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Peter.Nagy at vexcel.com  Fri Sep 23 19:12:01 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] mingw build, MSVCR71.DLL problem
In-Reply-To: <931f8ea905092211026131d839@mail.gmail.com>
References: <Pine.CYG.4.58.0509161114270.584@Thwack>
	<432B3AC9.3060504@videotron.ca>
	<Pine.CYG.4.58.0509161540460.584@Thwack>
	<432E3DD9.8090509@videotron.ca>
	<Pine.CYG.4.58.0509221108340.2568@Thwack>
	<931f8ea905092211026131d839@mail.gmail.com>
Message-ID: <Pine.CYG.4.58.0509231704240.3508@Thwack>


Thanks to those who sent me replies on this.  As Frank said this has to do
with how the python binaries were built, and for anyone needing help with
this type of problem there is some discussion at:
http://jove.prohosting.com/iwave/ipython/issues.html

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


On Thu, 22 Sep 2005, Frank Warmerdam wrote:

> On 9/22/05, Pete Nagy <Peter.Nagy@vexcel.com> wrote:
> >   My question is, can anyone explain the use of msvcr71.dll with gdal?
> > This is a newer dependency; I just needed to grab it when I went to 1.2.6.
> > Why is it needed instead of msvcrt.dll?  Any ideas why the gdal.dll does
> > not have this dependency, and the python module does?  Any ideas of
> > workarounds?
>
> Peter,
>
> My understanding is that MSVCR71.DLL is what is used by
> Visual Studio.NET built applications and that Python 2.4 binaries
> are now normally built this way.  Is it possible that switching to Python
> 2.4 actually introduced this requirement?
>
> I don't know a good solution, though switching back to Python 2.3
> would likely help.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From ari.jolma at tkk.fi  Sat Sep 24 12:57:12 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] cpl_config.h
Message-ID: <43358568.7020308@tkk.fi>

Hi,

I find it a bit problematic that gdal installs configure generated 
cpl_config,h into public include dir. I use autoconf also for libral and 
do the same, so when I say #include "ogr_api.h" in libral, I get a lot 
of warnings because of constants are redefined.

Problem with my ral_config.h is that there are some things which are 
needed by _the header files_, so I have to have it.

Googling gave me this: 
http://www.andamooka.org/reader.pl?pgid=autobookautobook_97 which I 
should probably read carefully.

How do other projects, which use both autoconf and gdal manage this? 
Should gdal stop installing cpl_config?

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mateusz at loskot.net  Sat Sep 24 16:07:27 2005
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Maps in PDA
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
Message-ID: <4335B1FF.5080808@loskot.net>

Hi,

Hallgren Johan E napisa?(a):
> 
> [..]
 > Now I?m looking at way to show maps in
> a PDA (PocketPC/WindowsCE).

Are you a programmer?
If you are, I'd recommend you to write your own control/wingow
to display maps.

> My first idea was to use MapServer because 
> the wrapper I have used is the csharp/SWIG option and it could also be 
> used to build a Windows app just as I want. The problem is that I don?t 
> think it can run on a PocketPC without recompile everything. 

Yes, "big" Windows is now the same as Windows CE.
Another problem is with compiler. Microsoft provides now eVC++4.0 based 
on VC++ 6.0 with many cutted off libraries. So, there is lack of many
libraries/headers from C runtime or C++ STL.
That makes porting work not trivial.

 > My next
> issue was to figure out how difficult it could be to recompile MS and 
> all is parts to the PDA environment, and my answer was that it?s 
> difficult. 

That's right.

 > Beside that I don?t know if the MapServer solution for
> displaying maps in a PDA is optimal, I think the aim with MapServer was 
> to create maps on the internet and not running as a single desktop app.


Yes.
I'mnot a MapServer guru, but I don't think it would fit on Windows CE 
devices well.

> Next I found the work /Mateusz ?oskot/ is doing to porting GDAL to the 
> Windows CE environment, that?s great. Could GDAL be the solution for me? 

Yes, I'm trying to finish port of the OGR (vectors) to Windows CE.
Next, I will port my company's applications from our own not-complete 
Open GIS implementation to OGR. So, OGR will be act as a data provider 
and Open GIS Simple Feature architecture.
Next, you need to write code responsible for renderiing (displaying) 
maps (overlays) in application window (GUI).
Now, I use common Win32 GDI API and it works well, I don't think you 
will need OpenGL or GAPI (Game API - DirectX-like engine).

> It raises some new questions:
> 
>  
> 
> ?         It?s not my dream to build logic for symbology and 
> classification. Is there any support for symbology and classification in 
> GDAL?

That's what I'm saying. You will have to implement it yourself.

> ?         Are there other options for my PDA issue I havent?t found yet?

What kind of maps do you need?
What kind of GIS functionality do you need?

You can buy commercial component like MapACE or something from TatukGIS 
but I'm sure it won't work together with GDAL/OGR.

> ?         Is it possible to compile MapServer for Windows CE?

Currently, I believe it will be a very hard work.
But in a few months Visual Studio 2005 will be released then you will
need modern C++ compiler for Windwos CE platform.
I believe this compiler will make it possible and easier to compile 
portable code running today on Win32 and Unix'es.
I think together with VS2005 Microsoft will provide many C/C++ libraries 
missing in eVC++4.0.

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net


From ben at vterrain.org  Sat Sep 24 16:08:55 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Link to NTF info?
Message-ID: <200509242008.j8OK8x5h015101@duke.maptools.org>

On the page:
	http://www.gdal.org/ogr/drv_ntf.html
the link "General UK NTF Information" points to:
	http://gdal.velocet.ca/projects/ntf/index.html
Which doesn't seem to be there.

I'm reading elevation grids from NTF using OGR.  It is a bit strange to use
OGR for rasters, but OGR is the one with NTF support.  It works great but i
am wondering if the elevation inside an NTF is always integer or not.  OGR
returns all values as doubles, but in the NTF files i've seen, the values
are always whole numbers.

Thanks,
Ben



From warmerdam at pobox.com  Sat Sep 24 16:42:42 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Link to NTF info?
In-Reply-To: <200509242008.j8OK8x5h015101@duke.maptools.org>
References: <200509242008.j8OK8x5h015101@duke.maptools.org>
Message-ID: <931f8ea905092413426ac99558@mail.gmail.com>

On 9/24/05, Ben Discoe <ben@vterrain.org> wrote:
> On the page:
>         http://www.gdal.org/ogr/drv_ntf.html
> the link "General UK NTF Information" points to:
>         http://gdal.velocet.ca/projects/ntf/index.html
> Which doesn't seem to be there.

Ben,

Fixed.  It should now be:

  http://home.gdal.org/projects/ntf/index.html

> I'm reading elevation grids from NTF using OGR.  It is a bit strange to use
> OGR for rasters, but OGR is the one with NTF support.  It works great but i
> am wondering if the elevation inside an NTF is always integer or not.  OGR
> returns all values as doubles, but in the NTF files i've seen, the values
> are always whole numbers.

The format supports non-integer values (integer in the file,
but with a scale and offset), but I'm not sure if distributed
datasets have non-integer values or not.

NTF DEM support is in OGR because the client (Safe
Software) at that time wanted to represent DEMs as
alot of point features.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Sun Sep 25 13:45:22 2005
From: cfis at interserv.com (Charles F. I. Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: PostGis layers
In-Reply-To: <433301BC.1000906@interserv.com>
References: <433301BC.1000906@interserv.com>
Message-ID: <4336E232.7010600@interserv.com>

I suppose its worth mentioning that this still leaves the problem of
having the same table name in two different schemas - say I have a table
called completechain in a tiger_2004 schema and one in a tiger_2002
schema.  I know that there is already a bug about postgresql schemas,
but no fix yet.

I think there is an argument that the layer name should not be
"completechain" but instead should be "tiger_2004.completechain" or
"tiger_2002.completechain" or the default "public.completechain."

Otherwise, if I write dataSource.getLayerByName("completechain") then
what happens?  I get the first layer named "completechain" I'd guess but
obviously that's not a very good solution.

I think you could probably make this backward compatible by tacking on
"public." to a layer name when a user calles getLayerName without
specifying a schema.  Thus dataSource.getLayerByName("completechain")
becomes dataSource.getLayerByName("public.completechain").

An alternative approach is to set the "search_path" when ogr logs into
postgresql (as mentioned in the bug report), but I don't see how that
can solve the problem of the same table name in multiple schemas.


Thanks,

Charlie




Charles F. I. Savage wrote:
> Hi everyone - working with OGR and PostGis.
> 
> When OGR opens a Postgis enabled database, it finds its layers via this 
> query (I added the select g.f_table_name part to show a problem below):
> 
> SELECT c.relname, g.f_table_name FROM pg_class c, geometry_columns g
> WHERE (c.relkind in ('r','v') AND c.relname !~ '^pg'
> AND c.relname ~ g.f_table_name)
> 
> I've pasted the results of this query below.  Note that the 
> polygoncorrections and polgyoneconomics layer show up twice!  This is 
> caused by this part of the query:
> 
> AND c.relname ~ g.f_table_name)
> 
> Shouldn't it be a direct match without a regular expression, like this:
> 
> AND c.relname = g.f_table_name)
> 
> 
> Charlie
> 
> 
> "altname";"altname"
> "arealandmarks";"arealandmarks"
> "arealandmarks";"landmarks"
> "completechain";"completechain"
> "entitynames";"entitynames"
> "featureids";"featureids"
> "idhistory";"idhistory"
> "landmarks";"landmarks"
> "overunder";"overunder"
> "pip";"pip"
> "polychainlink";"polychainlink"
> "polygon";"polygon"
> "polygoncorrections";"polygon"
> "polygoncorrections";"polygoncorrections"
> "polygoneconomic";"polygon"
> "polygoneconomic";"polygoneconomic"
> "tlidrange";"tlidrange"
> "zerocellid";"zerocellid"
> "zipcodes";"zipcodes"
> "zipplus4";"zipplus4"
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 2781 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050925/da6cd238/smime.bin
From cfis at interserv.com  Sun Sep 25 23:59:12 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: Maps in PDA
In-Reply-To: <931f8ea905092206373f015e41@mail.gmail.com>
References: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
	<931f8ea905092206373f015e41@mail.gmail.com>
Message-ID: <43377210.80806@interserv.com>

Hi Frank,

Quick question on process/protocol when you get a chance (no rush).

I found a fairly severe bug in the postgresql driver, but quite a simple 
one to fix (see http://bugzilla.remotesensing.org/show_bug.cgi?id=939).

I would be happy to commit a fix, and modify/run postgresql unit tests 
to verify the fix, but I'm not sure what sort of review process you like 
to use with GDAL/OGR.  So just wondering how you like to run things.

Charlie





From warmerdam at pobox.com  Mon Sep 26 00:15:20 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: Maps in PDA
In-Reply-To: <43377210.80806@interserv.com>
References: <D93CFEAA72FA764885CC1FDA94A1D89CE30794@WMRI000166.corp.wmdata.net>
	<931f8ea905092206373f015e41@mail.gmail.com>
	<43377210.80806@interserv.com>
Message-ID: <931f8ea905092521152ccbd4e8@mail.gmail.com>

On 9/25/05, Charlie Savage <cfis@interserv.com> wrote:
> Hi Frank,
>
> Quick question on process/protocol when you get a chance (no rush).
>
> I found a fairly severe bug in the postgresql driver, but quite a simple
> one to fix (see http://bugzilla.remotesensing.org/show_bug.cgi?id=939).
>
> I would be happy to commit a fix, and modify/run postgresql unit tests
> to verify the fix, but I'm not sure what sort of review process you like
> to use with GDAL/OGR.  So just wondering how you like to run things.

Charlie,

Please feel free to fix this.  You are welcome to fix such
obvious bugs with no questionable consequence to the fix
in CVS.  If you are at all uncertain about your solution you
ought to drop me a note afterwards so I can look it over.

Stuff like the schema support in the driver requires (I think)
a bit more discussion before you commit any solution.

On review I'm pleased to see that bug 939 isn't one of the
bugs I have ignored for months.  I was thinking I ought to
have fixed that when it first cross my desk but I see it is only
20 minutes old or less.

PS. this doesn't really have anything to do with "Maps in PDA"
does it?

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Sep 26 00:38:32 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] SWIG and CSharp
Message-ID: <931f8ea905092521384f4add5f@mail.gmail.com>

Kevin,

I have plunged into the world of SWIG, and with my choice of
CSharp I seem to have picked the deep end. :-)

I spent some time this weekend playing with calling GDAL from
C# as part of my long delayed committment to actually help a
bit on the SWIG wrappers - and to figure out what we can do from
.net languages.

I have made a few modest changes:
 o csharp makefile.vc now set the right -dllimport name.
    Before the dll name being searched for was "gdal.dll"
    instead of "gdal_gdal_wrap.dll".

 o the makefile now builds the c# proxy classes with debug
   so I can get a bit more visibility into what is happening.  It
   would be cool if I could debug right through the PInvokes into
   the DLL but I haven't figured out how to do that.

 o I have implemented typemaps for "double *" and "double arg[ANY]"
    that seem good enough that stuff like GetGeoTransform(),
    and SetGeoTransform() are now working.  I just map it to a double[]
    in c#.  Currently I don't think this distinguishes the case where a
    pointer to a single double is used to return values so there may be
    more work to do.   Also, there is no array size checking, so if
    the app passes too small a c# array memory will get corrupted.

 o I am working on passing buffers for ReadRaster() and WriteRaster().
    I have the WriteRaster case on the dataset working (I think) with
    the following magic:

%typemap(ctype)  (int buf_len, char *buf_string) "int, char *"
%typemap(imtype) (int buf_len, char *buf_string) "int buf_len, byte[]"
%typemap(cstype) (int buf_len, char *buf_string) "byte[]"
%typemap(csin)   (int buf_len, char *buf_string) "$csinput.Length, $csinput"

    I have used the specific names of the arguments in the hope to
    restrict it to the case of buffers with a length being passed in to
    stuff like WriteRaster().  This now applies to Dataset.WriteRaster(),
    but not too Band.WriteRaster().  Would it be ok for me to change
    Band.i to use the exact same argument names for buf_len and buf_string
    as Dataset.i?   I forsee some other specific naming conventions being
    needed for some other cases that I want to handle pretty specially  in
    c#.  Other than obvious special names like argin and argout how much
    dependence is there on argument names in the .i files?

There are still lots of mappings left to do, but I would like to at least
get the point where I can do various GDAL operations, and then review
OGR after that.

I have been able to open datasets, get back stuff like their size,
projection and now geotransform.  I haven't gotten much further than
that.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Mon Sep 26 04:15:04 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] SWIG and CSharp
In-Reply-To: <931f8ea905092521384f4add5f@mail.gmail.com>
References: <931f8ea905092521384f4add5f@mail.gmail.com>
Message-ID: <4337AE08.1000006@tkk.fi>

Frank Warmerdam wrote:

>    but not too Band.WriteRaster().  Would it be ok for me to change
>    Band.i to use the exact same argument names for buf_len and buf_string
>    as Dataset.i?   I forsee some other specific naming conventions being
>    needed for some other cases that I want to handle pretty specially  in
>    c#.  Other than obvious special names like argin and argout how much
>    dependence is there on argument names in the .i files?
>  
>

Nothing I believe. Typemaps are written for _type_ patterns. argin and 
argout in typemaps are just conventions. I may be wrong of course. 
Kevin, please correct me if I am.

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From kruland at ku.edu  Mon Sep 26 10:02:41 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Re: SWIG and CSharp
In-Reply-To: <931f8ea905092521384f4add5f@mail.gmail.com>
References: <931f8ea905092521384f4add5f@mail.gmail.com>
Message-ID: <4337FF81.8010401@ku.edu>


Frank,

Welcome to the club!

Frank Warmerdam wrote:

>Kevin,
>
>I have plunged into the world of SWIG, and with my choice of
>CSharp I seem to have picked the deep end. :-)
>
>  
>
Yes, it's very deep.  There is a new SWIG 1.3.26rc1 out right now.  It
was cut from cvs a couple of days ago (Saturday, I think).  In any case
there have been changes to C# in 1.3.26 which might prove useful.  In
particular, they've fixed the naming of the setter/getter functions for
the member variables so we can remove the renamed setters/getters from
the gdal_cshap.i file.  What I mean, they use the same naming as the
python and the other generators.

My understanding of C# is it should be relatively easy to make these
typemaps because you don't have to do a bunch of magic to converts lists
to/from arrays etc.

> o I have implemented typemaps for "double *" and "double arg[ANY]"
>    that seem good enough that stuff like GetGeoTransform(),
>    and SetGeoTransform() are now working.  I just map it to a double[]
>    in c#.  Currently I don't think this distinguishes the case where a
>    pointer to a single double is used to return values so there may be
>    more work to do.   Also, there is no array size checking, so if
>    the app passes too small a c# array memory will get corrupted.
>
>  
>
There is a distinction made in the typemaps for return arguments and for
arrays. These are used for output arguments:

%typemap(in,numinputs=0) (double argout[ANY])
%typemap(argout) (double argout[ANY])

%typemaps(in,numinputs=0) (double *argout[ANY])
%typemaps(argout) (double *argout[ANY])
%typemap(freearg) (double *argout[ANY])

The grouping is intentional.  The 'in,numinputs=0' piece is used at the
top of the wrapper, the 'argout' is used to convert the returned value
from the wrapped method into whatever is really returned by the wrapper,
the 'freearg' is used to release memory allocated by the
'in,numinputs=0' typemap.

This one is used for input:

%typemap(in) (double argin[ANY])

These typemaps will match functions which have this kind of signature:

void funcout( double argout[14] )
void funcpout( double *argout[7] )
void funin( double argin[3] )

etc.  In particular, it requires the argument to be a fixed sized array.

There is only one typemap used for arbitrary double * parameters:

%typemap(xxx) (double *argout)

In the python bindings, we used the 'double *OUTPUT' typemap which comes
from the typemaps.i library.

There may or may not be a way to catch the small array problem.  In the
wrappers for the [ANY] types, you have access to the size required in
$dim0 (or $1_dim0 if you have more than one argument).  However, I don't
know if you have access to the size sent in from C#.

> o I am working on passing buffers for ReadRaster() and WriteRaster().
>    I have the WriteRaster case on the dataset working (I think) with
>    the following magic:
>
>%typemap(ctype)  (int buf_len, char *buf_string) "int, char *"
>%typemap(imtype) (int buf_len, char *buf_string) "int buf_len, byte[]"
>%typemap(cstype) (int buf_len, char *buf_string) "byte[]"
>%typemap(csin)   (int buf_len, char *buf_string) "$csinput.Length, $csinput"
>
>    I have used the specific names of the arguments in the hope to
>    restrict it to the case of buffers with a length being passed in to
>    stuff like WriteRaster().  This now applies to Dataset.WriteRaster(),
>    but not too Band.WriteRaster().  Would it be ok for me to change
>    Band.i to use the exact same argument names for buf_len and buf_string
>    as Dataset.i?   I forsee some other specific naming conventions being
>    needed for some other cases that I want to handle pretty specially  in
>    c#.  Other than obvious special names like argin and argout how much
>    dependence is there on argument names in the .i files?
>
>  
>
I think in your follow-up email you touched on this.  We used named
typemaps and use the %apply/%clear to make sure the proper typemap is
applied to each function.  I think was a reasonable solution which
provides complete control over which typemaps get applied although it is
a little more cumbersome.  You need to follow the typemap argument names
outlined in the README.typemaps file.  Those argument names are used in
the %apply commands.

I don't really know what the special c# typemaps are.  Here you've used
'ctype', 'imtype', 'cstype', 'csin'.  They are particular to C# wrapper
generation.  I hope they get used along with the 'in', 'out', 'argout'
typemaps when we use %apply.

>There are still lots of mappings left to do, but I would like to at least
>get the point where I can do various GDAL operations, and then review
>OGR after that.
>
>I have been able to open datasets, get back stuff like their size,
>projection and now geotransform.  I haven't gotten much further than
>that.
>
>  
>
That's further than before :)  One small step....

Kevin

From kruland at ku.edu  Mon Sep 26 10:15:04 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] SWIG and CSharp
In-Reply-To: <4337AE08.1000006@tkk.fi>
References: <931f8ea905092521384f4add5f@mail.gmail.com>
	<4337AE08.1000006@tkk.fi>
Message-ID: <43380268.1090906@ku.edu>


Ari Jolma wrote:

> Frank Warmerdam wrote:
>
>>    but not too Band.WriteRaster().  Would it be ok for me to change
>>    Band.i to use the exact same argument names for buf_len and
>> buf_string
>>    as Dataset.i?   I forsee some other specific naming conventions being
>>    needed for some other cases that I want to handle pretty
>> specially  in
>>    c#.  Other than obvious special names like argin and argout how much
>>    dependence is there on argument names in the .i files?
>>  
>>
>
> Nothing I believe. Typemaps are written for _type_ patterns. argin and
> argout in typemaps are just conventions. I may be wrong of course.
> Kevin, please correct me if I am.
>
> Ari
>

Ari,

it works like this:

If you specify argument names in the typemap, then the typemap selection
process will match argument names in the wrapped functions.  If you
don't specify argument names in the typemap, then they are not used in
selection process.  Here's a simple example:

%typemap(in) (int specialname) "/* Using specialname */"
%typemap(in) (int) "/* Using general typemap */"

void func1( int avariable );
void func2( int specialname);

This will use the "general typemap" for argument 1 (avariable) of func1
and will use "specialname typemap" for argument 1 (specialname) of func2.

All of the typemaps which we've defined have argument names.  This
prevents them from being used unless they are intended.   There are many
times when we force a typemap to be used by using the %apply directive.

%apply (int specialname) { (int differentname) };
void func3 (int differentname);
%clear (int differentname);

This will use the "specialname" typemap for argument 1 of func3.  We use
%clear immediately afterwards, because %apply is global and will be used
from that point on otherwise.  Again, this is to prevent mis application
of typemaps.

There are problems with the "out" typemaps because returned values do
not have names in C delcs.  We've used two different tricks to get these
to apply correctly.  The latest is to leverage the fact that most
returned values are CPLErr or OGRErr which even though they are ints are
treated as different types in SWIG.  These typemaps actually apply globally.

Kevin

From ari.jolma at tkk.fi  Mon Sep 26 10:33:41 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] SWIG and CSharp
In-Reply-To: <43380268.1090906@ku.edu>
References: <931f8ea905092521384f4add5f@mail.gmail.com>
	<4337AE08.1000006@tkk.fi> <43380268.1090906@ku.edu>
Message-ID: <433806C5.7040209@tkk.fi>

Kevin Ruland wrote:

>it works like this:
>
>If you specify argument names in the typemap, then the typemap selection
>process will match argument names in the wrapped functions.  If you
>don't specify argument names in the typemap, then they are not used in
>selection process.  Here's a simple example:
>
>%typemap(in) (int specialname) "/* Using specialname */"
>%typemap(in) (int) "/* Using general typemap */"
>  
>

ok, thanks for this, then they argument names matter very much, actually 
it seems that it is easy to introduce strange bugs just by rename...

then I could write all those "undef not accepted" typemaps (given that 
the argument names are different), which I already though was not possible

And I thought I almost had figured swig out...

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From fniles at mitre.org  Mon Sep 26 19:51:39 2005
From: fniles at mitre.org (Rick Niles)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Status of GDAL in Fedora Extras?
Message-ID: <1127778699.10996.105.camel@gnupooh.mitre.org>

Now that Red Hat has really pushed a lot of stuff in to Extras (e.g.
octave) and people have gotten serious about doing Extras packages. I
really think GDAL should be in there.  All the traffic on the mailing
lists says there's some dependency conflict between GRASS and GDAL and
then they just gave up.

Can I motivate anyone with the ability and the authority to actually do
something about this to spend a little time solving this silly issue?  I
really think GDAL would benefit from having an easy install for Fedora
users.

Also, I see that the current Fedora Core 4 RPMs depend on installing an
old version of Postgres.  What's the deal there?  Can that be fixed?

Of course, maybe I'm way off and a solution is gonna happen "Real Soon
Now".  Or perhaps, this is a sensitive subject and I've just opened up a
can o' worms.

Anyone here know the status of such things?

Thanks,
Rick Niles.



From warmerdam at pobox.com  Mon Sep 26 21:24:23 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Status of GDAL in Fedora Extras?
In-Reply-To: <1127778699.10996.105.camel@gnupooh.mitre.org>
References: <1127778699.10996.105.camel@gnupooh.mitre.org>
Message-ID: <931f8ea905092618245ab8ea84@mail.gmail.com>

On 9/26/05, Rick Niles <fniles@mitre.org> wrote:
> Now that Red Hat has really pushed a lot of stuff in to Extras (e.g.
> octave) and people have gotten serious about doing Extras packages. I
> really think GDAL should be in there.  All the traffic on the mailing
> lists says there's some dependency conflict between GRASS and GDAL and
> then they just gave up.
>
> Can I motivate anyone with the ability and the authority to actually do
> something about this to spend a little time solving this silly issue?  I
> really think GDAL would benefit from having an easy install for Fedora
> users.
>
> Also, I see that the current Fedora Core 4 RPMs depend on installing an
> old version of Postgres.  What's the deal there?  Can that be fixed?
>
> Of course, maybe I'm way off and a solution is gonna happen "Real Soon
> Now".  Or perhaps, this is a sensitive subject and I've just opened up a
> can o' worms.
>
> Anyone here know the status of such things?

Rick,

I'm not aware of any comprehensive effort to maintain
proper Fedora compatible RPMs for GDAL though Silke
did just release some, and there are older ones at
mappinghacks.org (com?).

The problem with GRASS and GDAL was solved as part of the
Debian GIS effort and revolves around building the GDAL
GRASS driver as a separate package using the plugin API.
Presumably a similar approach would be advisable for Fedora.

>From my point of view, I am confused by the sheer variety of
RPM based systems which all have varying inconsistencies
with each other.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Silke.Reimer at intevation.de  Tue Sep 27 02:32:24 2005
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Status of GDAL in Fedora Extras?
In-Reply-To: <1127778699.10996.105.camel@gnupooh.mitre.org>
References: <1127778699.10996.105.camel@gnupooh.mitre.org>
Message-ID: <20050927063224.GD27955@intevation.de>

On Mon, Sep 26, 2005 at 07:51:39PM -0400, Rick Niles wrote:
> Now that Red Hat has really pushed a lot of stuff in to Extras (e.g.
> octave) and people have gotten serious about doing Extras packages. I
> really think GDAL should be in there.  All the traffic on the mailing
> lists says there's some dependency conflict between GRASS and GDAL and
> then they just gave up.
> 
> Can I motivate anyone with the ability and the authority to actually do
> something about this to spend a little time solving this silly issue?  I
> really think GDAL would benefit from having an easy install for Fedora
> users.

As I already tried to explain in the thread one year ago this can
only be solved by packaging the grassgdal-plugin in a seperate
package. It happens that I will build a new grass package for FC4
together with this plugin within the next few weeks (hopefully
already this week).

> 
> Also, I see that the current Fedora Core 4 RPMs depend on installing an
> old version of Postgres.  What's the deal there?  Can that be fixed?

Do you the package on [1]? I built this package with the current
Fedora postgresql-devel package. Or did I miss something?

> 
> Of course, maybe I'm way off and a solution is gonna happen "Real Soon
> Now".  Or perhaps, this is a sensitive subject and I've just opened up a
> can o' worms.
> 
> Anyone here know the status of such things?

Yes, I do :-) Just one week ago I submitted a request for package
review to Fedora Extras. Look at the corresponding bug report [2] to
see its status. There have been made a few comments on my pacakge.
I still have to react to last one. I will hopefully have some time
to do so this week.

In the meantime I am waiting for a reviewer. There a about 60
packages before it's the turn on my package[3]. If you are
interested in the progress of this package you could just add
yourself to the Cc of this bug.

Many greetings,

	Silke


[1] http://ftp.intevation.de/freegis/fedora/4/
[2] https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=168719
[3] https://bugzilla.redhat.com/bugzilla/buglist.cgi?cmdtype=runnamed&namedcmd=Package%20Review

> 
> Thanks,
> Rick Niles.
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 
Intevation GmbH

Georgstrasse 4                    49074 Osnabr?ck, Germany
http://intevation.de              http://intevation.de/~silke
FreeGIS.org                       http://freegis.org/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050927/c8670066/attachment.bin
From richard.greenwood at gmail.com  Tue Sep 27 10:17:20 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Access window out of range
Message-ID: <ae9185aa0509270717755d057b@mail.gmail.com>

Using gdalwarp to patch one tiff into another tiif, I am getting a lot
of errors like:
  ERROR 5: Access window out of range in RasterIO().  Requested
    (0,13398) of size 0x0 on raster of 12900x12120.
Searching the list I found a few referrences to "Access window out of
range" errors, but I could not get a sense of where to start looking
to isoltae the problem. It seems to related to the use of:
  -srcalpha
I am trying to use an alhpa channel to mask nodata areas.
If I patch an rgb image into an rgb image it's okay.
If I patch an rgba into an rgba, it's okay, but the aplha channel is ignored.
If I patch an rgba into an rgba using -srcalpha I get " Access window
out of range".

Any insight?

Thanks,
Rich

--
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From find_all at hotmail.com  Tue Sep 27 10:40:57 2005
From: find_all at hotmail.com (Josepo Urrutia)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Latitude view thinner than it should be
Message-ID: <BAY103-F31E1895A21663BA44658B7F48A0@phx.gbl>

First of all, thanks for this awesome library ( it saved me a lot of hard 
work and time ;-) ).

The bad news are that I've some "little" question about the use of the 
library (stupid newbee question surely), that I'd post in different threads.

Let's start with the first one:

Using the GDAL/OGR library I've manage to import a S-57 map into a 
OGRDataSource, that is used to get access to the diferent OGRLayers and 
OGRFeatures.

With this information I visualize the map onto the screen.

To get access to the lat/lon data of the map (the initial and final latitude 
and longitude) I do a search to all the OGRFeatures and ORGGeometry of those 
features to look for the maximum and minimum. Is there a more direct way to 
get this inf.?

Then to calculate the pixel on the screen that represents a position I use 
this simple formule:

	// Knowing the initial/final lon and the screen weigth
	// we calculate the number of screen pixel for 1 longitude grade
	pixel_per_lon_grade=(winw/(lon_end-lon_ini));

	// lat_data and lon_data is the position we want to transform
	// pixel_y and pixel_x is the resulting screen position
	pixel_y=(lat_ini-lat_data)*pixel_per_lon_grade;
	pixel_x=(lon_ini-lon_data)*pixel_per_lon_grade;

The problems of using this formule is that the latitude view gets thinner 
than it should be.

Obviously I'm forgetting something important (I told you I was a newbee with 
topographical maps, didn't I?), any ideas or suggestions?


I'm using GDAL/OGR 1.3.0 on a RHEL 4 system.



From find_all at hotmail.com  Tue Sep 27 10:52:17 2005
From: find_all at hotmail.com (Josepo Urrutia)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Save a map from a OGRDataSource
Message-ID: <BAY103-F2C5AD2E083C26D50F2745F48A0@phx.gbl>


I want to program a topographical map editor using the GDAL/ORG library, I 
create a OGRDataSource with the ORGLayers and OGRFeatures that represent the 
map.

The problem is that I haven't been able to found a way to save this 
OGRDataSource into a topographical map on disk.

Which is the proper way to save a map with GDAL/OGR ?


I'm using GDAL/OGR 1.3.0 on a RHEL 4 system.



From warmerdam at pobox.com  Tue Sep 27 11:53:51 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Save a map from a OGRDataSource
In-Reply-To: <BAY103-F2C5AD2E083C26D50F2745F48A0@phx.gbl>
References: <BAY103-F2C5AD2E083C26D50F2745F48A0@phx.gbl>
Message-ID: <931f8ea9050927085351b295c3@mail.gmail.com>

On 9/27/05, Josepo Urrutia <find_all@hotmail.com> wrote:
>
> I want to program a topographical map editor using the GDAL/ORG library, I
> create a OGRDataSource with the ORGLayers and OGRFeatures that represent the
> map.
>
> The problem is that I haven't been able to found a way to save this
> OGRDataSource into a topographical map on disk.
>
> Which is the proper way to save a map with GDAL/OGR ?

Josepo,

I'm afraid you will need to tell my a bit about what you mean by saving
into "a topological map on disk".   At first I thought you meant a raster
rendering of the data but that wouldn't be very topological.

I would note that:
 o OGR (and GDAL) does not including rendering vector to raster
    capability.  In general you would need to use something built on top
    of OGR for this.  Something like Mapserver for instance.

 o OGR does not "understand" topology.  In some case topology
    relationships are preserved in attributes (such as for the Arc/info
    Binary Coverage driver) but that doesn't mean that OGR understands
    or can take particular advantage of it.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Sep 27 12:13:03 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Latitude view thinner than it should be
In-Reply-To: <BAY103-F31E1895A21663BA44658B7F48A0@phx.gbl>
References: <BAY103-F31E1895A21663BA44658B7F48A0@phx.gbl>
Message-ID: <931f8ea90509270913489f0f9b@mail.gmail.com>

On 9/27/05, Josepo Urrutia <find_all@hotmail.com> wrote:
> Using the GDAL/OGR library I've manage to import a S-57 map into a
> OGRDataSource, that is used to get access to the diferent OGRLayers and
> OGRFeatures.
>
> With this information I visualize the map onto the screen.
>
> To get access to the lat/lon data of the map (the initial and final latitude
> and longitude) I do a search to all the OGRFeatures and ORGGeometry of those
> features to look for the maximum and minimum. Is there a more direct way to
> get this inf.?

Josepo,

You can call OGRLayer::GetExtent() to fetch a layer extent.   In the
case of S-57 it still has to iterate over everything to get the extents but
at least it seems to do it at a lower level and should be somewhat faster.

> Then to calculate the pixel on the screen that represents a position I use
> this simple formule:
>
>         // Knowing the initial/final lon and the screen weigth
>         // we calculate the number of screen pixel for 1 longitude grade
>         pixel_per_lon_grade=(winw/(lon_end-lon_ini));
>
>         // lat_data and lon_data is the position we want to transform
>         // pixel_y and pixel_x is the resulting screen position
>         pixel_y=(lat_ini-lat_data)*pixel_per_lon_grade;
>         pixel_x=(lon_ini-lon_data)*pixel_per_lon_grade;
>
> The problems of using this formule is that the latitude view gets thinner
> than it should be.
>
> Obviously I'm forgetting something important (I told you I was a newbee with
> topographical maps, didn't I?), any ideas or suggestions?

The problem is that if you use direct lat/lon values to map on screen,
you will suffer increasing distortion as your move away from the
equator. If you look at globe you will see that one of the lat/long
grid boxes is squarish near the equator, but tall and thin near the poles.

The normal solution to see maps with reasonable local display is to
convert into a projected coordinate system, such as UTM.   Alternatively
you could hack an approximation of this by using a different pixel
size for lat and lon directions and compute the sizes based on your general
latitude.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Sep 27 12:19:54 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Access window out of range
In-Reply-To: <ae9185aa0509270717755d057b@mail.gmail.com>
References: <ae9185aa0509270717755d057b@mail.gmail.com>
Message-ID: <931f8ea905092709194cb31422@mail.gmail.com>

On 9/27/05, Richard Greenwood <richard.greenwood@gmail.com> wrote:
> Using gdalwarp to patch one tiff into another tiif, I am getting a lot
> of errors like:
>   ERROR 5: Access window out of range in RasterIO().  Requested
>     (0,13398) of size 0x0 on raster of 12900x12120.
> Searching the list I found a few referrences to "Access window out of
> range" errors, but I could not get a sense of where to start looking
> to isoltae the problem. It seems to related to the use of:
>   -srcalpha
> I am trying to use an alhpa channel to mask nodata areas.
> If I patch an rgb image into an rgb image it's okay.
> If I patch an rgba into an rgba, it's okay, but the aplha channel is ignored.
> If I patch an rgba into an rgba using -srcalpha I get " Access window
> out of range".

Rich,

What resampling kernel are you using?  What version of GDAL?
I vaguely recall at least one fix for a problem like this during
the summer, and there have been some fixes related to alpha handling
even quite recently.  You might want to see if the same problem happens
with FWTools 1.0.0a1.

If it still happens there, then I would appreciate a bug report with data to
demonstrate.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From find_all at hotmail.com  Tue Sep 27 12:33:42 2005
From: find_all at hotmail.com (Josepo Urrutia)
Date: Wed Nov 21 11:49:46 2007
Subject: FW: Re: [Gdal-dev] Save a map from a OGRDataSource
Message-ID: <BAY103-F16CBEA67F645BE35C89F5AF48A0@phx.gbl>



My idea is to use S-57 format to save a map that I've in a
OGRDataSource class.


>From: Frank Warmerdam <warmerdam@pobox.com>
>Reply-To: Frank Warmerdam <warmerdam@pobox.com>
>To: Josepo Urrutia <find_all@hotmail.com>
>CC: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] Save a map from a OGRDataSource
>Date: Tue, 27 Sep 2005 11:53:51 -0400
>
>On 9/27/05, Josepo Urrutia <find_all@hotmail.com> wrote:
> >
> > I want to program a topographical map editor using the GDAL/ORG library, 
>I
> > create a OGRDataSource with the ORGLayers and OGRFeatures that represent 
>the
> > map.
> >
> > The problem is that I haven't been able to found a way to save this
> > OGRDataSource into a topographical map on disk.
> >
> > Which is the proper way to save a map with GDAL/OGR ?
>
>Josepo,
>
>I'm afraid you will need to tell my a bit about what you mean by saving
>into "a topological map on disk".   At first I thought you meant a raster
>rendering of the data but that wouldn't be very topological.
>
>I would note that:
>  o OGR (and GDAL) does not including rendering vector to raster
>     capability.  In general you would need to use something built on top
>     of OGR for this.  Something like Mapserver for instance.
>
>  o OGR does not "understand" topology.  In some case topology
>     relationships are preserved in attributes (such as for the Arc/info
>     Binary Coverage driver) but that doesn't mean that OGR understands
>     or can take particular advantage of it.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, 
>warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Tue Sep 27 12:59:11 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: FW: Re: [Gdal-dev] Save a map from a OGRDataSource
In-Reply-To: <BAY103-F16CBEA67F645BE35C89F5AF48A0@phx.gbl>
References: <BAY103-F16CBEA67F645BE35C89F5AF48A0@phx.gbl>
Message-ID: <931f8ea90509270959b985941@mail.gmail.com>

On 9/27/05, Josepo Urrutia <find_all@hotmail.com> wrote:
>
>
> My idea is to use S-57 format to save a map that I've in a
> OGRDataSource class.

Josepo,

So you have data in an OGRDataSource from some format (not necessarily
S-57) and you want to save it out to S-57 format?  That is a very messy
and unsafe thing to do because OGR's S-57 writing support is very
dependent on having the exact S-57 data model already preprepared.

If you want to see how to use OGR to write data out to a format OGR
supports for creation, look through ogr2ogr.cpp, or better yet read through
the "Write to OGR" part of the API tutorial at:

  http://www.gdal.org/ogr/ogr_apitut.html

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ari.jolma at tkk.fi  Tue Sep 27 13:51:00 2005
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Numerical problems with geometries in MapInfo Files
Message-ID: <43398684.8010100@tkk.fi>

Hello,

I have geom.AddPoint and respective geom.GetX, geom.GetY method calls in 
my test code (swig/perl API). I make point, line and polygon geometries. 
I create the geometry, save it on disk, open it, and read it. Currently 
I'm testing only Shapefiles and MapInfo files. All is well with 
shapefles but with mapinfo files the returned values seem to differ from 
those saved often. For example a point (1,1) is returned as (0.99, 
1.005). What could be the reason for this, does anybody have any ideas?

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Tue Sep 27 14:06:29 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Numerical problems with geometries in MapInfo Files
In-Reply-To: <43398684.8010100@tkk.fi>
References: <43398684.8010100@tkk.fi>
Message-ID: <931f8ea905092711061eff9b4a@mail.gmail.com>

On 9/27/05, Ari Jolma <ari.jolma@tkk.fi> wrote:
> Hello,
>
> I have geom.AddPoint and respective geom.GetX, geom.GetY method calls in
> my test code (swig/perl API). I make point, line and polygon geometries.
> I create the geometry, save it on disk, open it, and read it. Currently
> I'm testing only Shapefiles and MapInfo files. All is well with
> shapefles but with mapinfo files the returned values seem to differ from
> those saved often. For example a point (1,1) is returned as (0.99,
> 1.005). What could be the reason for this, does anybody have any ideas?

Ari,

The Mapinfo TAB format does not support true floating point values for
geometry locations.  Instead 32bit integers are used, and an extents
and resolution need to be determined.  I suspect you are seeing the
precision issues that this causes.  There are different decisions made
in MITAB about the extents and resolution based on the coordinate
system passed in on layer creation.

You might want to read over the MapInfo TAB driver page for more info
at:

  http://www.gdal.org/ogr/drv_mitab.html

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From richard.greenwood at gmail.com  Tue Sep 27 14:35:34 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Access window out of range
In-Reply-To: <931f8ea905092709194cb31422@mail.gmail.com>
References: <ae9185aa0509270717755d057b@mail.gmail.com>
	<931f8ea905092709194cb31422@mail.gmail.com>
Message-ID: <ae9185aa050927113521da2753@mail.gmail.com>

On 9/27/05, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 9/27/05, Richard Greenwood <richard.greenwood@gmail.com> wrote:
> > Using gdalwarp to patch one tiff into another tiif, I am getting a lot
> > of errors like:
> >   ERROR 5: Access window out of range in RasterIO().  Requested
> >     (0,13398) of size 0x0 on raster of 12900x12120.
> > Searching the list I found a few referrences to "Access window out of
> > range" errors, but I could not get a sense of where to start looking
> > to isoltae the problem. It seems to related to the use of:
> >   -srcalpha
> > I am trying to use an alhpa channel to mask nodata areas.
> > If I patch an rgb image into an rgb image it's okay.
> > If I patch an rgba into an rgba, it's okay, but the aplha channel is ignored.
> > If I patch an rgba into an rgba using -srcalpha I get " Access window
> > out of range".
>
> Rich,
>
> What resampling kernel are you using?

I do not know. I am not familiar with the resampling kernel, how would
I determine what I am using? I am working strictly with TIFFs. And the
error does seem dependent on cell size. For example: I can patch a 1
foot/pixel image into a 1 meter/pixel image without error. However if
I use gdal_translate to convert the destination image from 1
meter/pixel to 1 foot/pixel, then it fails.

> What version of GDAL?

Primarily 1.3.0.0b1 from FWTools 0.9.9. I also did a bit of testing
with GDAL 1.25 with same errors. Just installed FWTools 1.0.0a1, same
errors.

> If it still happens there, then I would appreciate a bug report with data to
> demonstrate.

I'll work on that, unfortunately the imagery is quite large so I would
like to isolate it a little on my end if possible.

As always, thank you very much for your help and prompt reply.

Rich

--
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From warmerdam at pobox.com  Tue Sep 27 14:41:45 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Access window out of range
In-Reply-To: <ae9185aa050927113521da2753@mail.gmail.com>
References: <ae9185aa0509270717755d057b@mail.gmail.com>
	<931f8ea905092709194cb31422@mail.gmail.com>
	<ae9185aa050927113521da2753@mail.gmail.com>
Message-ID: <931f8ea9050927114112860a24@mail.gmail.com>

On 9/27/05, Richard Greenwood <richard.greenwood@gmail.com> wrote:
> > What resampling kernel are you using?
>
> I do not know. I am not familiar with the resampling kernel, how would
> I determine what I am using?

Rich,

By default you would be using nearest neighbour.  The "-rb", "-rn", and "-rc"
switches control resampling kernel.

>  I am working strictly with TIFFs. And the
> error does seem dependent on cell size. For example: I can patch a 1
> foot/pixel image into a 1 meter/pixel image without error. However if
> I use gdal_translate to convert the destination image from 1
> meter/pixel to 1 foot/pixel, then it fails.
>
> > What version of GDAL?
>
> Primarily 1.3.0.0b1 from FWTools 0.9.9. I also did a bit of testing
> with GDAL 1.25 with same errors. Just installed FWTools 1.0.0a1, same
> errors.

OK, that is very current.

> > If it still happens there, then I would appreciate a bug report with data to
> > demonstrate.
>
> I'll work on that, unfortunately the imagery is quite large so I would
> like to isolate it a little on my end if possible.

Sounds good.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From richard.greenwood at gmail.com  Tue Sep 27 15:18:58 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Access window out of range
In-Reply-To: <931f8ea9050927114112860a24@mail.gmail.com>
References: <ae9185aa0509270717755d057b@mail.gmail.com>
	<931f8ea905092709194cb31422@mail.gmail.com>
	<ae9185aa050927113521da2753@mail.gmail.com>
	<931f8ea9050927114112860a24@mail.gmail.com>
Message-ID: <ae9185aa0509271218214c0cad@mail.gmail.com>

On 9/27/05, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 9/27/05, Richard Greenwood <richard.greenwood@gmail.com> wrote:
> > > What resampling kernel are you using?
> >
> > I do not know. I am not familiar with the resampling kernel, how would
> > I determine what I am using?
>
> Rich,
>
> By default you would be using nearest neighbour.  The "-rb", "-rn", and "-rc"
> switches control resampling kernel.

I tried all four: -rn, -rb. -rc, -rcs, all failed at apparently the
same point with identical message:
ERROR 5: Access window out of range in RasterIO().  Requested
(0,13398) of size 0x0 on raster of 12900x12120.


--
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com


From stde at statoil.com  Mon Sep 26 20:18:43 2005
From: stde at statoil.com (Sturla Denstad)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Error while loading shared libraries: libgdal.1.1.so
Message-ID: <OF4365EF70.395D9F38-ONC1257089.00019ACF@statoil.com>

e de du ?ystein  - i usa???

sturla - i nordsj?en

-------------------------------------------------------------------
The information contained in this message may be CONFIDENTIAL and is
intended for the addressee only. Any unauthorised use, dissemination of the
information or copying of this message is prohibited. If you are not the
addressee, please notify the sender immediately by return e-mail and delete
this message.
Thank you.



From holl at gdf-hannover.de  Wed Sep 28 11:05:36 2005
From: holl at gdf-hannover.de (Stephan Holl)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] [ANNOUNCE]: New GRASS 6 Translation Repository
Message-ID: <20050928170536.40eeefce@localhost>

Dear FOSS GIS users,

[sorry for crossposting]

GDF Hannover provides a new Translation Repository for the GRASS 6
Tutorial!

As you may know, we publish tutorials on GRASS GIS under terms of the
GNU FDL (GNU Free Document License) for years. Translations into Czech
by Jachym Cepicky and English by Kerstin Holl are available to the user
community since a few months. 

Within the last weeks we were asked by many GRASS users from all over
the world, that they would like to translate the current tutorial into
Spanish and Italian. For this reason we now established a new
Translation Repository[1] based on subversion.  

	http://www.gdf-hannover.de/translation

We hope this is a further step to increase the popularity of GRASS GIS.
If you feel like supporting this portal, we would be pleased to
integrate you or your money to the portal. Further languages could be
added as well. 

We are running a mailinglist on which further information will be posted
to. If you are interested in contributing to the project please
subscribe[2] to this list to be up-to-date.

best wishes, 
	
	GDF Hannover


[1] http://www.gdf-hannover.de/translation
[2] https://www.gdf-hannover.de/mailman/listinfo/gdf-translation

-- 
GDF Hannover - Solutions for spatial data analysis and remote sensing
Hannover Office      -     Mengendamm 16d      -     D-30177 Hannover
Internet: www.gdf-hannover.de      -      Email: holl@gdf-hannover.de
Phone : ++49-(0)511.39088507       -        Fax: ++49-(0)511.39088508

From Todd.Southen at bentley.com  Wed Sep 28 14:02:42 2005
From: Todd.Southen at bentley.com (Todd.Southen@bentley.com)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGR support of E00
Message-ID: <EE8C2D034A022444B87B1332B3978105032F5AD2@extonpo1.bentley.com>

Maybe I'm missing something, but it doesn't look like OGR can open an
E00 file directly.  Is this true?  If so, are there any plans to support
this in the future?  I notice in ogrregisterall.cpp that there's a
commented out line:

//    RegisterOGRE00();

It would be great if this was in the works!

Thanks,
Todd.


From perrygeo at gmail.com  Wed Sep 28 17:19:16 2005
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGR support of E00
In-Reply-To: <EE8C2D034A022444B87B1332B3978105032F5AD2@extonpo1.bentley.com>
References: <EE8C2D034A022444B87B1332B3978105032F5AD2@extonpo1.bentley.com>
Message-ID: <5383fa5e05092814191a6c21d6@mail.gmail.com>

Todd,

On 9/28/05, Todd.Southen@bentley.com <Todd.Southen@bentley.com> wrote:
>
> Maybe I'm missing something, but it doesn't look like OGR can open an
> E00 file directly. Is this true?
>

I don't think GDAL/OGR supports E00 directly. If you're dealing with vector
data you can use the AVCE00 library for that:

http://avce00.maptools.org/avce00/index.html

The "avcimport" command will allow you to convert an E00 to an ArcInfo
Coverage which can be read by OGR. It works reasonably well (although I've
had some rare cases when it failed to create a valid coverage).

I can't really speak to whether or not direct E00 support is planned for the
future.

Hope this helps,
--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050928/117ce7ec/attachment.html
From warmerdam at pobox.com  Wed Sep 28 17:20:53 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGR support of E00
In-Reply-To: <EE8C2D034A022444B87B1332B3978105032F5AD2@extonpo1.bentley.com>
References: <EE8C2D034A022444B87B1332B3978105032F5AD2@extonpo1.bentley.com>
Message-ID: <931f8ea90509281420e38ea5@mail.gmail.com>

On 9/28/05, Todd.Southen@bentley.com <Todd.Southen@bentley.com> wrote:
> Maybe I'm missing something, but it doesn't look like OGR can open an
> E00 file directly.  Is this true?  If so, are there any plans to support
> this in the future?  I notice in ogrregisterall.cpp that there's a
> commented out line:
>
> //    RegisterOGRE00();
>
> It would be great if this was in the works!

Todd,

The AVCE00 library used to read Arc/Info binary coverages can also
support E00 files; however, at the time the OGR driver was implemented
only binary coverages were considered critical for the client so the E00
support was never done.  There are some issues with implementing E00
files due to the sequential nature of them.  The AVC (binary coverage)
support was easier since we can easily request any feature in the files
without worrying about seeking around in a text file which can be tricky.

Of course, if Bentley would like to fund E00 support, I would be happy to
deal with those issues!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tylermitchell at shaw.ca  Wed Sep 28 18:16:19 2005
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGR support of E00
Message-ID: <77112337714b8e.7714b8e7711233@shaw.ca>

> Maybe I'm missing something, but it doesn't look like OGR can open an
> E00 file directly.  Is this true?  If so, are there any plans to 
> supportthis in the future?

Further to Frank's comments, at the time, we were only interested in OGR support for data layers that we wanted to serve up with MapServer.  Because the performance of an E00 driver, as far as I know, would be fairly poor in a real-time environment - it wasn't that important for us.  So we stuck with binary coverages since that was our main data source anyway.  

That said, I also agree that it would be nice to have an E00 driver for those who are converting data directly to other (more efficient) formats.

Tyler


From Todd.Southen at bentley.com  Thu Sep 29 10:21:29 2005
From: Todd.Southen at bentley.com (Todd.Southen@bentley.com)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] OGR support of E00
Message-ID: <EE8C2D034A022444B87B1332B3978105032F628B@extonpo1.bentley.com>

Thanks to everyone for their responses.

Bentley has existing code for reading E00 files so we'll have to assess
our customer needs and go from there.  We could integrate this code into
OGR, but unfortunately I don't think Bentley would release it as public
domain.

Regards,
Todd.

-----Original Message-----
From: Tyler Mitchell [mailto:tylermitchell@shaw.ca] 
Sent: Wednesday, September 28, 2005 5:16 PM
To: Todd Southen - Consultant
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] OGR support of E00

> Maybe I'm missing something, but it doesn't look like OGR can open an 
> E00 file directly.  Is this true?  If so, are there any plans to 
> supportthis in the future?

Further to Frank's comments, at the time, we were only interested in OGR
support for data layers that we wanted to serve up with MapServer.
Because the performance of an E00 driver, as far as I know, would be
fairly poor in a real-time environment - it wasn't that important for
us.  So we stuck with binary coverages since that was our main data
source anyway.  

That said, I also agree that it would be nice to have an E00 driver for
those who are converting data directly to other (more efficient)
formats.

Tyler



From rayg at daylongraphics.com  Thu Sep 29 17:00:23 2005
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Dataset questions
Message-ID: <433C55E7.5050206@daylongraphics.com>

My apologies if these issues are covered in a FAQ somewhere. I looked 
but couldn't find anything related.

I was wondering how to identify elevation rasterbands -- should I
just iterate through all the channels available in a file, and
treat the first one to return CV_Undefined for
CGDALRasterBand::GetColorInterpretation() as the elevation block? I 
could ask the user which band (in a multichannel file) to load, but want 
the app to automatically handle cases where only a single elevation 
channel exists.

CGDALRasterBand::GetRasterDataType() returns the pixel
datatype such as int vs. float, but I was wondering if there
was a method to return the band's meaning, like elevation vs.
color vs. mask etc.

Ray

From matt.wilkie at gov.yk.ca  Thu Sep 29 17:18:19 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] settting ecw quality
Message-ID: <433C5A1B.6000201@gov.yk.ca>

Hi All,

Using gdal_translate how does one configure ECW output by desired 
quality rather than desired compression ratio? e.g instead of saying 
"-co TARGET=50%" say "-co QUALITY=90%"

thanks!

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From warmerdam at pobox.com  Thu Sep 29 17:20:09 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Dataset questions
In-Reply-To: <433C55E7.5050206@daylongraphics.com>
References: <433C55E7.5050206@daylongraphics.com>
Message-ID: <931f8ea905092914204dcff732@mail.gmail.com>

On 9/29/05, Ray Gardener <rayg@daylongraphics.com> wrote:
> My apologies if these issues are covered in a FAQ somewhere. I looked
> but couldn't find anything related.
>
> I was wondering how to identify elevation rasterbands -- should I
> just iterate through all the channels available in a file, and
> treat the first one to return CV_Undefined for
> CGDALRasterBand::GetColorInterpretation() as the elevation block? I
> could ask the user which band (in a multichannel file) to load, but want
> the app to automatically handle cases where only a single elevation
> channel exists.
>
> CGDALRasterBand::GetRasterDataType() returns the pixel
> datatype such as int vs. float, but I was wondering if there
> was a method to return the band's meaning, like elevation vs.
> color vs. mask etc.

Ray,

In general you would need to ask the user which is an elevation
band, as from many file formats it is impossible for me to know if
the data is elevation or something else.   Even for formats where I
do know (such as DEM formats!) I don't have any real way for an
application to determine it.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Sep 29 17:34:11 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] settting ecw quality
In-Reply-To: <433C5A1B.6000201@gov.yk.ca>
References: <433C5A1B.6000201@gov.yk.ca>
Message-ID: <931f8ea9050929143419afc293@mail.gmail.com>

On 9/29/05, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> Hi All,
>
> Using gdal_translate how does one configure ECW output by desired
> quality rather than desired compression ratio? e.g instead of saying
> "-co TARGET=50%" say "-co QUALITY=90%"

Matt,

What does a quality of 90% mean?

In any event, TARGET is the only control over compression quality
for the ECW driver.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sforde at lizardtech.com  Thu Sep 29 17:43:48 2005
From: sforde at lizardtech.com (Sean Forde)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GDALWarpOperation::WarpRegion
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD123B35A2@sea-srv-ms3.lizardtech.com>


The prototype for this function is:

CPLErr WarpRegion(int nDstXOff, int nDstYOff, int nDstXSize, int
nDstYSize, 			int nSrcXOff=0, int nSrcYOff=0, int
nSrcXSize=0, int nSrcYSize=0)


Are all these parameters to this function in pixel space? That is, if I
have spatial coordinates to start with, must I convert them to pixel
space in order to call this function correctly?

Many thanks,

	-Sean

Sean Forde


From warmerdam at pobox.com  Thu Sep 29 20:06:09 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GDALWarpOperation::WarpRegion
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD123B35A2@sea-srv-ms3.lizardtech.com>
References: <DBEC881B4E22D1449F5FAC530E1ADD123B35A2@sea-srv-ms3.lizardtech.com>
Message-ID: <931f8ea90509291706396cc0b0@mail.gmail.com>

On 9/29/05, Sean Forde <sforde@lizardtech.com> wrote:
>
> The prototype for this function is:
>
> CPLErr WarpRegion(int nDstXOff, int nDstYOff, int nDstXSize, int
> nDstYSize,                      int nSrcXOff=0, int nSrcYOff=0, int
> nSrcXSize=0, int nSrcYSize=0)
>
> Are all these parameters to this function in pixel space? That is, if I
> have spatial coordinates to start with, must I convert them to pixel
> space in order to call this function correctly?

Sean,

The "Dst" values are in pixel space on the destination image, and
the "Src" values are in source image pixel/line coordinates.

Note that normally you would not call WarpRegion(), instead
using ChunkAndWarpImage() which will split the overall region
into more appropriate sized sub-chunks.

If you choose to manage the GDALWarpOperation directly, and
don't want to operate on the whole destination image you will need
to select subwindows in pixel coordinates.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bclay at ball.com  Fri Sep 30 08:23:35 2005
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GML support
Message-ID: <C482FF98AE985A47B8C982FD429C9E344F2669@daytonmsg2k3.AERO.BALL.COM>

 

While working on a task to convert ESRI shape files to ASCII then back
to binary I noticed there is support in GDAL for converting the geometry
to GML.  I did not see anything to convert the feature data to GML did I
miss something or is it not available yet?

 

I am currently working with version 1.20.  I know there are later
versions but I use several different packages and had stop upgrading
every time a new release came out for code stability reasons.

 

Is there more GML support in the current version?

 

Has anyone written a shape to GML and GML to shape application yet?

 

Bruce

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050930/b566d94f/attachment.html
From bclay at ball.com  Fri Sep 30 09:51:41 2005
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] Blue Marble TFW files
Message-ID: <C482FF98AE985A47B8C982FD429C9E344F266A@daytonmsg2k3.AERO.BALL.COM>

Sorry about the cross post.  These are the most likely user groups that
would have the files

 

Does anyone have the TFW files that go with the Blue Marble
land_shallow_topo_east.tif and land_shallow_topo_west.tif images so we
can geo register the images.  They seem to be plain tiff images rather
than geotiff images.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050930/ac6ec882/attachment.html
From warmerdam at pobox.com  Fri Sep 30 10:12:44 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GML support
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E344F2669@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E344F2669@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <931f8ea90509300712y5f86c792xb81b4c4e4ca4bc85@mail.gmail.com>

On 9/30/05, Clay, Bruce <bclay@ball.com> wrote:
>
> While working on a task to convert ESRI shape files to ASCII then back to
> binary I noticed there is support in GDAL for converting the geometry to
> GML.  I did not see anything to convert the feature data to GML did I miss
> something or is it not available yet?
>
>
>
> I am currently working with version 1.20.  I know there are later versions
> but I use several different packages and had stop upgrading every time a new
> release came out for code stability reasons.
>
> Is there more GML support in the current version?
>
> Has anyone written a shape to GML and GML to shape application yet?
>

Bruce,

If appropriate built (Xerces is required for GML reading) you can use
ogr2ogr to convert to and from GML format.  There is no "single feature"
translator capability available in the OGR API in the same sense that it
supports GML geometries currently.

There have been substantial advances in GML support since 1.2.0;
however, you could like do preliminary testing with that.   But don't
start reporting problems unless you upgrade. :-)

I would add that the OGR GML support is somewhat half-assed.  It
would not get the Ron-Lake-Schema-Aware-Award-Of-Excellence,
thats for sure.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mlogan at mail.arc.nasa.gov  Fri Sep 30 12:04:31 2005
From: mlogan at mail.arc.nasa.gov (Mike Logan)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] How does one remove Overviews?
Message-ID: <6AF2A8E4-A771-4E0E-9D28-C4215CC3908A@mail.arc.nasa.gov>

This has come up a couple times for me..
I generated overviews in my files for OSG's  osgdem software and
  didn't like the results due to the black border bleeding into the
  final imagery.

Is there a program to remove the overviews and just leave the
  original data (in a geotiff)?

thanks,
ml



Michael Logan
QSS Group,Inc / NASA Ames Research Center
Task Lead / Visual Cueing & Simulation
Visualization Engineer / Adaptive Control Technologies
MS 262-6, Moffett Field, CA, 94035  (650)-604-4494


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050930/ac616f72/attachment.html
From warmerdam at pobox.com  Fri Sep 30 12:41:00 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] How does one remove Overviews?
In-Reply-To: <6AF2A8E4-A771-4E0E-9D28-C4215CC3908A@mail.arc.nasa.gov>
References: <6AF2A8E4-A771-4E0E-9D28-C4215CC3908A@mail.arc.nasa.gov>
Message-ID: <931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>

On 9/30/05, Mike Logan <mlogan@mail.arc.nasa.gov> wrote:
> This has come up a couple times for me..
> I generated overviews in my files for OSG's  osgdem software and
>  didn't like the results due to the black border bleeding into the
>  final imagery.
>
> Is there a program to remove the overviews and just leave the
>  original data (in a geotiff)?

Mike,

There is no mechanism available to remove overviews from an image.
However, you can just "gdal_translate" the file to a new file and the
new file should be similar to the original but not have the overviews.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mlogan at mail.arc.nasa.gov  Fri Sep 30 13:33:29 2005
From: mlogan at mail.arc.nasa.gov (Mike Logan)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] How does one remove Overviews?
In-Reply-To: <931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>
References: <6AF2A8E4-A771-4E0E-9D28-C4215CC3908A@mail.arc.nasa.gov>
	<931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>
Message-ID: <75F805B9-1730-4168-AE55-CB54614CB678@mail.arc.nasa.gov>


On Sep 30, 2005, at 9:41 AM, Frank Warmerdam wrote:
>  the new file should be similar to the original but not have the  
> overviews.
>

"similar" ???  8-)

thanks, it working.

ml


Michael Logan
QSS Group,Inc / NASA Ames Research Center
Task Lead / Visual Cueing & Simulation
Visualization Engineer / Adaptive Control Technologies


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050930/bc49f6dd/attachment.html
From warmerdam at pobox.com  Fri Sep 30 14:01:03 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] How does one remove Overviews?
In-Reply-To: <75F805B9-1730-4168-AE55-CB54614CB678@mail.arc.nasa.gov>
References: <6AF2A8E4-A771-4E0E-9D28-C4215CC3908A@mail.arc.nasa.gov>
	<931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>
	<75F805B9-1730-4168-AE55-CB54614CB678@mail.arc.nasa.gov>
Message-ID: <931f8ea90509301101l352a148co5d99834aa80c170c@mail.gmail.com>

On 9/30/05, Mike Logan <mlogan@mail.arc.nasa.gov> wrote:
>
>
> On Sep 30, 2005, at 9:41 AM, Frank Warmerdam wrote:
>  the new file should be similar to the original but not have the overviews.
>
>
> "similar" ???  8-)

Mike,

A variety of things can change since gdal_translate does not try to
preserve aspects of the original file that are not part of the GDAL
data model.  So for instance, if the input file was tiled, the output
file would be stripped unless you explicitly request stripped since
the GeoTIFF writer defaults to stripped.

Likewise, the coordinate system is normallized internally into WKT
format and then converted back to geotiff format.  So lots of little
things could be changed around, but the output file should be
*essentially* the same.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Sep 30 14:34:03 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 1 Available
Message-ID: <931f8ea90509301134w122322f3h584b46bd97642222@mail.gmail.com>

Folks,

I have cut an alpha for the 1.3.1 release.  It is available at:

  http://www.gdal.og/dl/gdal-1.3.1a1.tar.gz
  http://www.gdal.org/dl/gdal131a1.zip

If I hear no serious problems I hope to cut the final release
in a day or two, so test it if you care!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From marco_vieira at uk2.net  Fri Sep 30 15:31:07 2005
From: marco_vieira at uk2.net (Marco Vieira)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] How does one remove Overviews?
In-Reply-To: <931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>
References: <6AF2A8E4-A771-4E0E-9D28-C4215CC3908A@mail.arc.nasa.gov>
	<931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>
Message-ID: <61823.200.169.121.246.1128108667.squirrel@maxproxy5.uk2net.com>


> However, you can just "gdal_translate" the file to a new file and the
> new file should be similar to the original but not have the overviews.

I use a little variance of Homme Zwaagstra's gdalsplit.cpp that use
AddSimpleSource method to copy RasterBand and split file after I created
overviews with gdaladdo command. How can I know if my overviews are
preserved?

Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net

From marco_vieira at uk2.net  Fri Sep 30 15:31:32 2005
From: marco_vieira at uk2.net (Marco Vieira)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] How does one remove Overviews?
In-Reply-To: <931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>
References: <6AF2A8E4-A771-4E0E-9D28-C4215CC3908A@mail.arc.nasa.gov>
	<931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>
Message-ID: <61823.200.169.121.246.1128108692.squirrel@maxproxy5.uk2net.com>


> However, you can just "gdal_translate" the file to a new file and the
> new file should be similar to the original but not have the overviews.

I use a little variance of Homme Zwaagstra's gdalsplit.cpp that use
AddSimpleSource method to copy RasterBand and split file after I created
overviews with gdaladdo command. How can I know if my overviews are
preserved?

Marco Vieira.
Fone:    + 55 21 9499-6800
marco_vieira@uk2.net

From warmerdam at pobox.com  Fri Sep 30 15:46:27 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] How does one remove Overviews?
In-Reply-To: <61823.200.169.121.246.1128108667.squirrel@maxproxy5.uk2net.com>
References: <6AF2A8E4-A771-4E0E-9D28-C4215CC3908A@mail.arc.nasa.gov>
	<931f8ea90509300941y50cfb29fmd8eaae7036e2e833@mail.gmail.com>
	<61823.200.169.121.246.1128108667.squirrel@maxproxy5.uk2net.com>
Message-ID: <931f8ea90509301246y73229dj22fde49f9bd91570@mail.gmail.com>

On 9/30/05, Marco Vieira <marco_vieira@uk2.net> wrote:
>
> > However, you can just "gdal_translate" the file to a new file and the
> > new file should be similar to the original but not have the overviews.
>
> I use a little variance of Homme Zwaagstra's gdalsplit.cpp that use
> AddSimpleSource method to copy RasterBand and split file after I created
> overviews with gdaladdo command. How can I know if my overviews are
> preserved?

Marco,

Run gdalinfo on the resulting file, and if it has overviews they will
be reported.  I don't see how they could be preserved though unless
you are doing some deep voodoo.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Sep 30 17:31:26 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:46 2007
Subject: [Gdal-dev] GDAL 1.3.1 Alpha 2 Released
Message-ID: <931f8ea90509301431r104a408ds2339a702112780d9@mail.gmail.com>

Folks,

Yes, surely the fastest release turn around in GDAL history.  I have
produced a new release at:
  http://www.gdal.org/dl/gdal-1.3.1a2.tar.gz
  http://www.gdal.org/dl/gdal131a2.zip

This fixes:
 o Problems with pcrasterutils.cpp on VStudio 2003 (and possibly
    some unix compilers).
 o Incorporates fixes for GRASS projection support.
 o A fix for the postgis driver that affected geometries read by
    by user supplied SQL.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


