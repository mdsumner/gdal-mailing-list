From even.rouault at spatialys.com  Tue Jan  2 03:56:36 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 2 Jan 2024 12:56:36 +0100
Subject: [gdal-dev] GDAL 3.8.3 RC1 is available, and motion to approve it
Message-ID: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>

Hi,

I have prepared an advanced-of-time GDAL/OGR 3.8.3 release candidate, mostly
to fix a 3.8.0 regression that has been reported lately
(https://github.com/OSGeo/gdal/issues/8998), that causes content of boolean
fields in GeoPackage or FlatGeobuf datasets to be incorrectly read when 
using
the ArrowArray interface, for example when used as source datasets in 
ogr2ogr
workflows.

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.8.3/gdal383rc1.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.8.3RC1/NEWS.md

Motion: adopt 3.8.3 RC1 as final 3.8.3 release

Starting with my +1,

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Tue Jan  2 04:14:09 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 2 Jan 2024 13:14:09 +0100
Subject: [gdal-dev] COG via HTTP POST
Message-ID: <CADRrdKvusz8UsaHyVMGLXN+zR8+7Q=sg-qQVVGDb9hMNAZSD=A@mail.gmail.com>

Hi

Does it make any sense to provide COG via HTTP POST method?
If I understand correctly, the "magic" of downloading only what is needed
from the server is done with HTTP Range requests. But I am not sure if that
works in POST method (it does work in GET method, when enabled ;).
In case it could work with POST, I do not know how to tell GDAL or QGIS to
use a POST method.

Why am I asking this? the CNIG (Natial Center of Geographic Information in
Spain) is doing it.
https://centrodedescargas.cnig.es/CentroDescargas/index.jsp The link is
just the starting point. Unfortunately they do not provide link to the
final page where you can download the files (yes, ugly).

So for now I have to download the full file, and do whatever I want later.

Thanks
Javier
.___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/cedd5d7b/attachment.htm>

From j1 at jimenezshaw.com  Tue Jan  2 04:22:00 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 2 Jan 2024 13:22:00 +0100
Subject: [gdal-dev] GDAL 3.8.3 RC1 is available, and motion to approve it
In-Reply-To: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
References: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
Message-ID: <CADRrdKtF+dGX0JiB75dLD3SwQiOvi96969MEAzLuasnubygodQ@mail.gmail.com>

+1 Javier

On Tue, 2 Jan 2024, 12:56 Even Rouault via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I have prepared an advanced-of-time GDAL/OGR 3.8.3 release candidate,
> mostly
> to fix a 3.8.0 regression that has been reported lately
> (https://github.com/OSGeo/gdal/issues/8998), that causes content of
> boolean
> fields in GeoPackage or FlatGeobuf datasets to be incorrectly read when
> using
> the ArrowArray interface, for example when used as source datasets in
> ogr2ogr
> workflows.
>
> Pick up an archive among the following ones (by ascending size):
>
>    https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.xz
>    https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.gz
>    https://download.osgeo.org/gdal/3.8.3/gdal383rc1.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.tar.gz
>    https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.zip
>
> The NEWS file is here:
>
>    https://github.com/OSGeo/gdal/blob/v3.8.3RC1/NEWS.md
>
> Motion: adopt 3.8.3 RC1 as final 3.8.3 release
>
> Starting with my +1,
>
> Best regards,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/4928e12e/attachment.htm>

From even.rouault at spatialys.com  Tue Jan  2 04:39:45 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 2 Jan 2024 13:39:45 +0100
Subject: [gdal-dev] COG via HTTP POST
In-Reply-To: <CADRrdKvusz8UsaHyVMGLXN+zR8+7Q=sg-qQVVGDb9hMNAZSD=A@mail.gmail.com>
References: <CADRrdKvusz8UsaHyVMGLXN+zR8+7Q=sg-qQVVGDb9hMNAZSD=A@mail.gmail.com>
Message-ID: <d6946b88-f82c-4cee-a3c5-56cd0e479897@spatialys.com>

Javier,

According to https://httpwg.org/specs/rfc7233.html#header.range , HTTP 
Range requests only apply to GET requests.? So COGs delivered through 
POST can indeed only be usable after full download.

BTW, someone should ask CNIG to include GeoTIFF SRS tags. At least, for 
file 
pnt_sentinel2_2020_invierno_mosaico_islas_canarias_b843_hu28_8bits.tif 
which has only ModelTiepointTag and ModelPixelScaleTag geotiff keys 
giving the geospatial extent, but no CRS keys.

Even

Le 02/01/2024 ? 13:14, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi
>
> Does it make any sense to provide COG via HTTP POST method?
> If I understand correctly, the "magic" of downloading only what is 
> needed from the server is done with HTTP Range requests. But I am not 
> sure if that works in POST method (it does work in GET method, when 
> enabled ;).
> In case it could work with POST, I do not know how to tell GDAL or 
> QGIS to use a POST method.
>
> Why am I asking this? the CNIG (Natial Center of Geographic 
> Information in Spain) is doing it.
> https://centrodedescargas.cnig.es/CentroDescargas/index.jsp The link 
> is just the starting point. Unfortunately they do not provide link to 
> the final page where you can download the files (yes, ugly).
>
> So for now I have to download the full file, and do whatever I want later.
>
> Thanks
> Javier
> .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/94ae3cae/attachment.htm>

From j1 at jimenezshaw.com  Tue Jan  2 04:43:59 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 2 Jan 2024 13:43:59 +0100
Subject: [gdal-dev] COG via HTTP POST
In-Reply-To: <d6946b88-f82c-4cee-a3c5-56cd0e479897@spatialys.com>
References: <CADRrdKvusz8UsaHyVMGLXN+zR8+7Q=sg-qQVVGDb9hMNAZSD=A@mail.gmail.com>
 <d6946b88-f82c-4cee-a3c5-56cd0e479897@spatialys.com>
Message-ID: <CADRrdKtWswA+eokeQwtQWDuVmhjAD641SGOZ8WDk=fbQKot9Xg@mail.gmail.com>

Thanks Even.

I will tell them about the missing SRS

On Tue, 2 Jan 2024, 13:39 Even Rouault, <even.rouault at spatialys.com> wrote:

> Javier,
>
> According to https://httpwg.org/specs/rfc7233.html#header.range , HTTP
> Range requests only apply to GET requests.  So COGs delivered through POST
> can indeed only be usable after full download.
>
> BTW, someone should ask CNIG to include GeoTIFF SRS tags. At least, for
> file pnt_sentinel2_2020_invierno_mosaico_islas_canarias_b843_hu28_8bits.tif
> which has only ModelTiepointTag and ModelPixelScaleTag geotiff keys giving
> the geospatial extent, but no CRS keys.
>
> Even
> Le 02/01/2024 ? 13:14, Javier Jimenez Shaw via gdal-dev a ?crit :
>
> Hi
>
> Does it make any sense to provide COG via HTTP POST method?
> If I understand correctly, the "magic" of downloading only what is needed
> from the server is done with HTTP Range requests. But I am not sure if that
> works in POST method (it does work in GET method, when enabled ;).
> In case it could work with POST, I do not know how to tell GDAL or QGIS to
> use a POST method.
>
> Why am I asking this? the CNIG (Natial Center of Geographic Information in
> Spain) is doing it.
> https://centrodedescargas.cnig.es/CentroDescargas/index.jsp The link is
> just the starting point. Unfortunately they do not provide link to the
> final page where you can download the files (yes, ugly).
>
> So for now I have to download the full file, and do whatever I want later.
>
> Thanks
> Javier
> .___ ._ ..._ .. . ._.  .___ .. __ . _. . __..  ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/8627e23b/attachment.htm>

From leo.fuhrmann.lgln at icloud.com  Tue Jan  2 06:09:23 2024
From: leo.fuhrmann.lgln at icloud.com (leo.fuhrmann.lgln at icloud.com)
Date: Tue, 2 Jan 2024 15:09:23 +0100
Subject: [gdal-dev] Error when importing GeoPackage into PostgreSQL database
 ("Worker thread task has not expected m_iStartShapeId value")
Message-ID: <A0357B4D-4DFB-4070-86F4-EB7975C4140F@icloud.com>

Hi,

I?m using ogr2ogr 3.8.2 to import a (layer of a) GeoPackage into a PostGIS database:

```
ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX user=XX password=XX? <path/to/gpkg.gpkg> <layer>
```

However, I?m seeing an error in the logs that I cannot sort out (see mail subject and/or logs below). Despite the error, the data gets written to the database, yet I?m worried that something is messed up along the way.

Using the official docker image to execute the command (from a MacBook with M1 Pro) works without an error. Then again, using a cloud service (IBM Code Engine in this case) with the official image also throws the error. I tried with different image versions but found no difference.

I tried to track down the error and found https://github.com/OSGeo/gdal/blob/1df855eb676e17278c337e9b14774d1bb298df90/ogr/ogrsf_frmts/gpkg/ogrgeopackagetablelayer.cpp#L8352

The comment suggests that I might have messed with GetNextFeature(), but I?m sure I haven?t.

Can someone help me to make sense of this error? I?m sorry to say that I can?t share the GeoPackage at the moment.

Thanks, Leo



Here are the logs:

GPKG: GeoPackage v1.2.0
GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x14c053e00) succeeds as GPKG.
GDAL: GDALDriver::Create(PostgreSQL,PG:dbname=XX host=XX port=XX user=XX password=XX
PG: Client encoding: 'UTF8'
PG: PostGIS schema: 'public'
PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit'
PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
PG: Could not retrieve table oid for <layer>
GDALVectorTranslate: Using FID=fid and -preserve_fid
PG: Could not retrieve table oid for <layer>
OGR2OGR: Using WriteArrowBatch()
GPKG: GeoPackage v1.2.0
GPKG: GeoPackage v1.2.0
GPKG: GeoPackage v1.2.0
ERROR 1: Worker thread task has not expected m_iStartShapeId value
PG: PQputCopyEnd()
GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x14c053e00)
GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX this=0x14b721fb0)
GDAL: In GDALDestroy - unloading GDAL shared library.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/3eca1d4d/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Jan  2 06:57:58 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 2 Jan 2024 15:57:58 +0100
Subject: [gdal-dev] Error when importing GeoPackage into PostgreSQL
 database ("Worker thread task has not expected m_iStartShapeId value")
In-Reply-To: <A0357B4D-4DFB-4070-86F4-EB7975C4140F@icloud.com>
References: <A0357B4D-4DFB-4070-86F4-EB7975C4140F@icloud.com>
Message-ID: <59127943-bf99-4792-99da-47759c14bcff@spatialys.com>

Leo,

could you provide your GeoPackage file and the layer you're converting ? 
(privately possibly)

Even

Le 02/01/2024 ? 15:09, Leo Fuhrmann via gdal-dev a ?crit?:
> Hi,
>
> I?m using ogr2ogr 3.8.2 to import a (layer of a) GeoPackage into a 
> PostGIS database:
>
> ```
>
> ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX user=XX 
> password=XX??<path/to/gpkg.gpkg> <layer>
>
> ```
>
> However, I?m seeing an error in the logs that I cannot sort out (see 
> mail subject and/or logs below). Despite the error, the data gets 
> written to the database, yet I?m worried that something is messed up 
> along the way.
>
> Using the official docker image to execute the command (from a MacBook 
> with M1 Pro) works without an error. Then again, using a cloud service 
> (IBM Code Engine in this case) with the official image also throws the 
> error. I tried with different image versions but found no difference.
>
> I tried to track down the error and found 
> https://github.com/OSGeo/gdal/blob/1df855eb676e17278c337e9b14774d1bb298df90/ogr/ogrsf_frmts/gpkg/ogrgeopackagetablelayer.cpp#L8352
>
> The comment suggests that I might have messed with GetNextFeature(), 
> but I?m sure I haven?t.
>
> Can someone help me to make sense of this error? I?m sorry to say that 
> I can?t share the GeoPackage at the moment.
>
> Thanks, Leo
>
>
>
> Here are the logs:
>
> GPKG: GeoPackage v1.2.0
>
> GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x14c053e00) succeeds as GPKG.
>
> GDAL: GDALDriver::Create(PostgreSQL,PG:dbname=XX host=XX port=XX 
> user=XX password=XX
>
> PG: Client encoding: 'UTF8'
>
> PG: PostGIS schema: 'public'
>
> PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 
> 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 
> 10.2.1-6) 10.2.1 20210110, 64-bit'
>
> PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
>
> PG: Could not retrieve table oid for <layer>
>
> GDALVectorTranslate: Using FID=fid and -preserve_fid
>
> PG: Could not retrieve table oid for <layer>
>
> OGR2OGR: Using WriteArrowBatch()
>
> GPKG: GeoPackage v1.2.0
>
> GPKG: GeoPackage v1.2.0
>
> GPKG: GeoPackage v1.2.0
>
> ERROR 1: Worker thread task has not expected m_iStartShapeId value
>
> PG: PQputCopyEnd()
>
> GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x14c053e00)
>
> GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX 
> this=0x14b721fb0)
>
> GDAL: In GDALDestroy - unloading GDAL shared library.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/4ae09521/attachment.htm>

From leo.fuhrmann.lgln at icloud.com  Tue Jan  2 07:42:09 2024
From: leo.fuhrmann.lgln at icloud.com (leo.fuhrmann.lgln at icloud.com)
Date: Tue, 2 Jan 2024 16:42:09 +0100
Subject: [gdal-dev] Error when importing GeoPackage into PostgreSQL
 database ("Worker thread task has not expected m_iStartShapeId value")
In-Reply-To: <59127943-bf99-4792-99da-47759c14bcff@spatialys.com>
References: <A0357B4D-4DFB-4070-86F4-EB7975C4140F@icloud.com>
 <59127943-bf99-4792-99da-47759c14bcff@spatialys.com>
Message-ID: <0F025424-2100-40A7-8445-2DA44A43B8EF@icloud.com>

Unfortunately, I?m not allowed to share the GeoPackage at the moment. I will get back to you as soon as I have permission or managed to reduce the dataset accordingly.

In the meantime, I found out, that the Error is not raised, if I use e. g. the `-where` or `-sql` statement. Here is a command that doesn?t produce an error, with the logs at the bottom:

```
ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX user=XX password=XX? <path/to/gpkg.gpkg> -where "1" <layer>
```

Logs:

GPKG: GeoPackage v1.2.0
GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x13a83b400) succeeds as GPKG.
PG: Client encoding: 'UTF8'
PG: PostGIS schema: 'public'
PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit'
PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
GDAL: GDALOpen(PG:dbname=XX host=XX port=XX user=XX password=XX this=0x13a631ee0) succeeds as PostgreSQL.
GPKG: Filter: 1
PG: Could not retrieve table oid for <layer>
GDALVectorTranslate: Using FID=fid and -preserve_fid
PG: Could not retrieve table oid for <layer>
OGR2OGR: Using WriteArrowBatch()
PG: PQputCopyEnd()
GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x13a83b400)
GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX this=0x13a631ee0)
GDAL: In GDALDestroy - unloading GDAL shared library.


> On Jan 2, 2024, at 15:57, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Leo,
> 
> could you provide your GeoPackage file and the layer you're converting ? (privately possibly)
> 
> Even
> 
> Le 02/01/2024 ? 15:09, Leo Fuhrmann via gdal-dev a ?crit :
>> Hi,
>> 
>> I?m using ogr2ogr 3.8.2 to import a (layer of a) GeoPackage into a PostGIS database:
>> 
>> ```
>> ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX user=XX password=XX? <path/to/gpkg.gpkg> <layer>
>> ```
>> 
>> However, I?m seeing an error in the logs that I cannot sort out (see mail subject and/or logs below). Despite the error, the data gets written to the database, yet I?m worried that something is messed up along the way.
>> 
>> Using the official docker image to execute the command (from a MacBook with M1 Pro) works without an error. Then again, using a cloud service (IBM Code Engine in this case) with the official image also throws the error. I tried with different image versions but found no difference.
>> 
>> I tried to track down the error and found https://github.com/OSGeo/gdal/blob/1df855eb676e17278c337e9b14774d1bb298df90/ogr/ogrsf_frmts/gpkg/ogrgeopackagetablelayer.cpp#L8352
>> 
>> The comment suggests that I might have messed with GetNextFeature(), but I?m sure I haven?t.
>> 
>> Can someone help me to make sense of this error? I?m sorry to say that I can?t share the GeoPackage at the moment.
>> 
>> Thanks, Leo
>> 
>> 
>> 
>> Here are the logs:
>> 
>> GPKG: GeoPackage v1.2.0
>> GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x14c053e00) succeeds as GPKG.
>> GDAL: GDALDriver::Create(PostgreSQL,PG:dbname=XX host=XX port=XX user=XX password=XX
>> PG: Client encoding: 'UTF8'
>> PG: PostGIS schema: 'public'
>> PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit'
>> PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
>> PG: Could not retrieve table oid for <layer>
>> GDALVectorTranslate: Using FID=fid and -preserve_fid
>> PG: Could not retrieve table oid for <layer>
>> OGR2OGR: Using WriteArrowBatch()
>> GPKG: GeoPackage v1.2.0
>> GPKG: GeoPackage v1.2.0
>> GPKG: GeoPackage v1.2.0
>> ERROR 1: Worker thread task has not expected m_iStartShapeId value
>> PG: PQputCopyEnd()
>> GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x14c053e00)
>> GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX this=0x14b721fb0)
>> GDAL: In GDALDestroy - unloading GDAL shared library.
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com <http://www.spatialys.com/>
> My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/12781260/attachment-0001.htm>

From even.rouault at spatialys.com  Wed Jan  3 06:04:39 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Jan 2024 15:04:39 +0100
Subject: [gdal-dev] Error when importing GeoPackage into PostgreSQL
 database ("Worker thread task has not expected m_iStartShapeId value")
In-Reply-To: <0F025424-2100-40A7-8445-2DA44A43B8EF@icloud.com>
References: <A0357B4D-4DFB-4070-86F4-EB7975C4140F@icloud.com>
 <59127943-bf99-4792-99da-47759c14bcff@spatialys.com>
 <0F025424-2100-40A7-8445-2DA44A43B8EF@icloud.com>
Message-ID: <6616d487-589f-4a7b-b172-1a49d663a85b@spatialys.com>

OK, I'm submitting https://github.com/OSGeo/gdal/pull/9018 to disable 
the multi-threaded mode by default, as I want to have reliable working 
in the 3.8.3 release ASAP. But I'm still interested in having that issue 
diagnose, to potentially re-enable multi-threading later. In 3.8.3, 
multi-threading in the ArrowArray interface of the GPKG driver will be 
opt-in through the newly added OGR_GPKG_NUM_THREADS configuration option 
/ environment variable.

Even

Le 02/01/2024 ? 16:42, leo.fuhrmann.lgln at icloud.com a ?crit?:
> Unfortunately, I?m not allowed to share the GeoPackage at the moment. 
> I will get back to you as soon as I have permission or managed to 
> reduce the dataset accordingly.
>
> In the meantime, I found out, that the Error is not raised, if I use 
> e. g. the `-where` or `-sql` statement. Here is a command that doesn?t 
> produce an error, with the logs at the bottom:
>
> ```
> ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX user=XX 
> password=XX??<path/to/gpkg.gpkg> -where "1" <layer>
> ```
>
> Logs:
>
> GPKG: GeoPackage v1.2.0
>
> GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x13a83b400) succeeds as GPKG.
>
> PG: Client encoding: 'UTF8'
>
> PG: PostGIS schema: 'public'
>
> PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 
> 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 
> 10.2.1-6) 10.2.1 20210110, 64-bit'
>
> PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
>
> GDAL: GDALOpen(PG:dbname=XX host=XX port=XX user=XX password=XX 
> this=0x13a631ee0) succeeds as PostgreSQL.
>
> GPKG: Filter: 1
>
> PG: Could not retrieve table oid for <layer>
>
> GDALVectorTranslate: Using FID=fid and -preserve_fid
>
> PG: Could not retrieve table oid for <layer>
>
> OGR2OGR: Using WriteArrowBatch()
>
> PG: PQputCopyEnd()
>
> GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x13a83b400)
>
> GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX 
> this=0x13a631ee0)
>
> GDAL: In GDALDestroy - unloading GDAL shared library.
>
>
>
>> On Jan 2, 2024, at 15:57, Even Rouault <even.rouault at spatialys.com> 
>> wrote:
>>
>> Leo,
>>
>> could you provide your GeoPackage file and the layer you're 
>> converting ? (privately possibly)
>>
>> Even
>>
>> Le 02/01/2024 ? 15:09, Leo Fuhrmann via gdal-dev a ?crit?:
>>> Hi,
>>>
>>> I?m using ogr2ogr 3.8.2 to import a (layer of a) GeoPackage into a 
>>> PostGIS database:
>>>
>>> ```
>>> ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX 
>>> user=XX password=XX??<path/to/gpkg.gpkg> <layer>
>>> ```
>>>
>>> However, I?m seeing an error in the logs that I cannot sort out (see 
>>> mail subject and/or logs below). Despite the error, the data gets 
>>> written to the database, yet I?m worried that something is messed up 
>>> along the way.
>>>
>>> Using the official docker image to execute the command (from a 
>>> MacBook with M1 Pro) works without an error. Then again, using a 
>>> cloud service (IBM Code Engine in this case) with the official image 
>>> also throws the error. I tried with different image versions but 
>>> found no difference.
>>>
>>> I tried to track down the error and found 
>>> https://github.com/OSGeo/gdal/blob/1df855eb676e17278c337e9b14774d1bb298df90/ogr/ogrsf_frmts/gpkg/ogrgeopackagetablelayer.cpp#L8352
>>>
>>> The comment suggests that I might have messed with GetNextFeature(), 
>>> but I?m sure I haven?t.
>>>
>>> Can someone help me to make sense of this error? I?m sorry to say 
>>> that I can?t share the GeoPackage at the moment.
>>>
>>> Thanks, Leo
>>>
>>>
>>>
>>> Here are the logs:
>>>
>>> GPKG: GeoPackage v1.2.0
>>> GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x14c053e00) succeeds as GPKG.
>>> GDAL: GDALDriver::Create(PostgreSQL,PG:dbname=XX host=XX port=XX 
>>> user=XX password=XX
>>> PG: Client encoding: 'UTF8'
>>> PG: PostGIS schema: 'public'
>>> PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 
>>> 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 
>>> 10.2.1-6) 10.2.1 20210110, 64-bit'
>>> PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
>>> PG: Could not retrieve table oid for <layer>
>>> GDALVectorTranslate: Using FID=fid and -preserve_fid
>>> PG: Could not retrieve table oid for <layer>
>>> OGR2OGR: Using WriteArrowBatch()
>>> GPKG: GeoPackage v1.2.0
>>> GPKG: GeoPackage v1.2.0
>>> GPKG: GeoPackage v1.2.0
>>> ERROR 1: Worker thread task has not expected m_iStartShapeId value
>>> PG: PQputCopyEnd()
>>> GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x14c053e00)
>>> GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX 
>>> this=0x14b721fb0)
>>> GDAL: In GDALDestroy - unloading GDAL shared library.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240103/81384d2f/attachment-0001.htm>

From even.rouault at spatialys.com  Wed Jan  3 12:46:08 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 3 Jan 2024 21:46:08 +0100
Subject: [gdal-dev] GDAL 3.8.3 RC2 is available,
 and motion to approve it (Re:  GDAL 3.8.3 RC1 is available,
 and motion to approve it)
In-Reply-To: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
References: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
Message-ID: <2ac69a88-5da1-40b0-bebd-97935c71e93a@spatialys.com>

Hi,

I've issued a 2nd release candidate for 3.8.3 with the following 
additional fixes:
- ogr2ogr: do not use ArrowArray interface if -clipsrc, -clipdst, -gcp 
or wrapdateline are specified (#9013)
- GPKG driver: disable by default multi-threaded ArrowArray interface. 
Make it opt-in with the OGR_GPKG_NUM_THREADS config option (cf 
https://github.com/OSGeo/gdal/pull/9018)
- fix build with sqlite 3.36.x (#9021)

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc2.tar.xz
 ? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.8.3/gdal383rc2.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc2.zip

The NEWS file is here:

 ?? https://github.com/OSGeo/gdal/blob/v3.8.3RC2/NEWS.md

~~~~

Retracting previous motion to approve RC1, and replacing it with:

Motion: adopt 3.8.3 RC2 as final 3.8.3 release

Starting with my +1,

~~~~~

Even

Le 02/01/2024 ? 12:56, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> I have prepared an advanced-of-time GDAL/OGR 3.8.3 release candidate, 
> mostly
> to fix a 3.8.0 regression that has been reported lately
> (https://github.com/OSGeo/gdal/issues/8998), that causes content of 
> boolean
> fields in GeoPackage or FlatGeobuf datasets to be incorrectly read 
> when using
> the ArrowArray interface, for example when used as source datasets in 
> ogr2ogr
> workflows.
>
> Pick up an archive among the following ones (by ascending size):
>
> ? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.xz
> ? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.8.3/gdal383rc1.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.zip
>
> The NEWS file is here:
>
> ? https://github.com/OSGeo/gdal/blob/v3.8.3RC1/NEWS.md
>
> Motion: adopt 3.8.3 RC1 as final 3.8.3 release
>
> Starting with my +1,
>
> Best regards,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Wed Jan  3 13:06:02 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 3 Jan 2024 22:06:02 +0100
Subject: [gdal-dev] GDAL 3.8.3 RC2 is available,
 and motion to approve it (Re: GDAL 3.8.3 RC1 is available,
 and motion to approve it)
In-Reply-To: <2ac69a88-5da1-40b0-bebd-97935c71e93a@spatialys.com>
References: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
 <2ac69a88-5da1-40b0-bebd-97935c71e93a@spatialys.com>
Message-ID: <CADRrdKuRn8cNKPM219JQtMrfOFrjAoAfaRRiAwvuJ+2CO1_3ug@mail.gmail.com>

+1 Javier

On Wed, 3 Jan 2024, 21:46 Even Rouault via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I've issued a 2nd release candidate for 3.8.3 with the following
> additional fixes:
> - ogr2ogr: do not use ArrowArray interface if -clipsrc, -clipdst, -gcp
> or wrapdateline are specified (#9013)
> - GPKG driver: disable by default multi-threaded ArrowArray interface.
> Make it opt-in with the OGR_GPKG_NUM_THREADS config option (cf
> https://github.com/OSGeo/gdal/pull/9018)
> - fix build with sqlite 3.36.x (#9021)
>
> Pick up an archive among the following ones (by ascending size):
>
>    https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc2.tar.xz
>    https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc2.tar.gz
>    https://download.osgeo.org/gdal/3.8.3/gdal383rc2.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc2.tar.gz
>    https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc2.zip
>
> The NEWS file is here:
>
>     https://github.com/OSGeo/gdal/blob/v3.8.3RC2/NEWS.md
>
> ~~~~
>
> Retracting previous motion to approve RC1, and replacing it with:
>
> Motion: adopt 3.8.3 RC2 as final 3.8.3 release
>
> Starting with my +1,
>
> ~~~~~
>
> Even
>
> Le 02/01/2024 ? 12:56, Even Rouault via gdal-dev a ?crit :
> > Hi,
> >
> > I have prepared an advanced-of-time GDAL/OGR 3.8.3 release candidate,
> > mostly
> > to fix a 3.8.0 regression that has been reported lately
> > (https://github.com/OSGeo/gdal/issues/8998), that causes content of
> > boolean
> > fields in GeoPackage or FlatGeobuf datasets to be incorrectly read
> > when using
> > the ArrowArray interface, for example when used as source datasets in
> > ogr2ogr
> > workflows.
> >
> > Pick up an archive among the following ones (by ascending size):
> >
> >   https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.xz
> >   https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.gz
> >   https://download.osgeo.org/gdal/3.8.3/gdal383rc1.zip
> >
> > A snapshot of the gdalautotest suite is also available:
> >
> > https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.tar.gz
> >   https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.zip
> >
> > The NEWS file is here:
> >
> >   https://github.com/OSGeo/gdal/blob/v3.8.3RC1/NEWS.md
> >
> > Motion: adopt 3.8.3 RC1 as final 3.8.3 release
> >
> > Starting with my +1,
> >
> > Best regards,
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240103/9891d310/attachment.htm>

From mkorver at amazon.com  Wed Jan  3 13:16:09 2024
From: mkorver at amazon.com (Korver, Mark)
Date: Wed, 3 Jan 2024 21:16:09 +0000
Subject: [gdal-dev] COG via HTTP POST
Message-ID: <7E1ABC6F-81D1-4C5F-8614-3A00E28D9885@amazon.com>

Hi Javier,
A POST url to COG content only makes sense if the intent is to support full download of the file.
POST is normally for adding/updating data. 
I took a quick look and yes no way to directly access the COGs other than use the search UI and get a list.

We see this many times, the good news is that they are formatted as COGs, but the value prop of COGs, being able to use them directly via range-gets is not there. We are hoping to make this easier for our public sector customers this year by simplifying STAC deployments on top serverless.

I did notice that download UI is very slow to load but the WMTS service used by the Viewer tool is performant.
https://www.ign.es/wmts/pnoa-ma?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=OI.OrthoimageCoverage&STYLE=default&FORMAT=image/jpeg&TILEMATRIXSET=EPSG:4326&TILEMATRIX=EPSG:4326:18&TILEROW=77554&TILECOL=257526

Depending on what you are looking to do, it might actually be faster to use GDAL or GDAL tools via QGIS to point a the relevant data using the WMTS service and output COG.
Of course you would lose any meta data in the source COGS. WMS I did not try.

Mark

Date: Tue, 2 Jan 2024 13:14:09 +0100
From: Javier Jimenez Shaw <j1 at jimenezshaw.com <mailto:j1 at jimenezshaw.com>>
To: gdal dev <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>>
Subject: [gdal-dev] COG via HTTP POST
Message-ID:
<CADRrdKvusz8UsaHyVMGLXN+zR8+7Q=sg-qQVVGDb9hMNAZSD=A at mail.gmail.com <mailto:A at mail.gmail.com>>
Content-Type: text/plain; charset="utf-8"


Hi


Does it make any sense to provide COG via HTTP POST method?
If I understand correctly, the "magic" of downloading only what is needed
from the server is done with HTTP Range requests. But I am not sure if that
works in POST method (it does work in GET method, when enabled ;).
In case it could work with POST, I do not know how to tell GDAL or QGIS to
use a POST method.


Why am I asking this? the CNIG (Natial Center of Geographic Information in
Spain) is doing it.
https://centrodedescargas.cnig.es/CentroDescargas/index.jsp <https://centrodedescargas.cnig.es/CentroDescargas/index.jsp> The link is
just the starting point. Unfortunately they do not provide link to the
final page where you can download the files (yes, ugly).


So for now I have to download the full file, and do whatever I want later.


Thanks
Javier
.___ ._ ..._ .. . ._. .___ .. __ . _. . __.. ... .... ._ .__
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/cedd5d7b/attachment-0001.htm> <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/cedd5d7b/attachment-0001.htm&gt;>


------------------------------


Message: 3
Date: Tue, 2 Jan 2024 13:22:00 +0100
From: Javier Jimenez Shaw <j1 at jimenezshaw.com <mailto:j1 at jimenezshaw.com>>
To: Even Rouault <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>>
Cc: gdal dev <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] GDAL 3.8.3 RC1 is available, and motion to
approve it
Message-ID:
<CADRrdKtF+dGX0JiB75dLD3SwQiOvi96969MEAzLuasnubygodQ at mail.gmail.com <mailto:CADRrdKtF+dGX0JiB75dLD3SwQiOvi96969MEAzLuasnubygodQ at mail.gmail.com>>
Content-Type: text/plain; charset="utf-8"


+1 Javier


On Tue, 2 Jan 2024, 12:56 Even Rouault via gdal-dev, <
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>> wrote:


> Hi,
>
> I have prepared an advanced-of-time GDAL/OGR 3.8.3 release candidate,
> mostly
> to fix a 3.8.0 regression that has been reported lately
> (https://github.com/OSGeo/gdal/issues/8998 <https://github.com/OSGeo/gdal/issues/8998>), that causes content of
> boolean
> fields in GeoPackage or FlatGeobuf datasets to be incorrectly read when
> using
> the ArrowArray interface, for example when used as source datasets in
> ogr2ogr
> workflows.
>
> Pick up an archive among the following ones (by ascending size):
>
> https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.xz <https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.xz>
> https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.gz <https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc1.tar.gz>
> https://download.osgeo.org/gdal/3.8.3/gdal383rc1.zip <https://download.osgeo.org/gdal/3.8.3/gdal383rc1.zip>
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.tar.gz <https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.tar.gz>
> https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.zip <https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc1.zip>
>
> The NEWS file is here:
>
> https://github.com/OSGeo/gdal/blob/v3.8.3RC1/NEWS.md <https://github.com/OSGeo/gdal/blob/v3.8.3RC1/NEWS.md>
>
> Motion: adopt 3.8.3 RC1 as final 3.8.3 release
>
> Starting with my +1,
>
> Best regards,
>
> Even
>
> --
> http://www.spatialys.com <http://www.spatialys.com>
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/4928e12e/attachment-0001.htm> <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/4928e12e/attachment-0001.htm&gt;>


------------------------------


Message: 4
Date: Tue, 2 Jan 2024 13:39:45 +0100
From: Even Rouault <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>>
To: Javier Jimenez Shaw <j1 at jimenezshaw.com <mailto:j1 at jimenezshaw.com>>, gdal dev
<gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] COG via HTTP POST
Message-ID: <d6946b88-f82c-4cee-a3c5-56cd0e479897 at spatialys.com <mailto:d6946b88-f82c-4cee-a3c5-56cd0e479897 at spatialys.com>>
Content-Type: text/plain; charset="utf-8"; Format="flowed"


Javier,


According to https://httpwg.org/specs/rfc7233.html#header.range <https://httpwg.org/specs/rfc7233.html#header.range> , HTTP
Range requests only apply to GET requests.? So COGs delivered through
POST can indeed only be usable after full download.


BTW, someone should ask CNIG to include GeoTIFF SRS tags. At least, for
file
pnt_sentinel2_2020_invierno_mosaico_islas_canarias_b843_hu28_8bits.tif
which has only ModelTiepointTag and ModelPixelScaleTag geotiff keys
giving the geospatial extent, but no CRS keys.


Even


Le 02/01/2024 ? 13:14, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi
>
> Does it make any sense to provide COG via HTTP POST method?
> If I understand correctly, the "magic" of downloading only what is
> needed from the server is done with HTTP Range requests. But I am not
> sure if that works in POST method (it does work in GET method, when
> enabled ;).
> In case it could work with POST, I do not know how to tell GDAL or
> QGIS to use a POST method.
>
> Why am I asking this? the CNIG (Natial Center of Geographic
> Information in Spain) is doing it.
> https://centrodedescargas.cnig.es/CentroDescargas/index.jsp <https://centrodedescargas.cnig.es/CentroDescargas/index.jsp> The link
> is just the starting point. Unfortunately they do not provide link to
> the final page where you can download the files (yes, ugly).
>
> So for now I have to download the full file, and do whatever I want later.
>
> Thanks
> Javier
> .___ ._ ..._ .. . ._.? .___ .. __ . _. . __..? ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>


--
http://www.spatialys.com <http://www.spatialys.com>
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/94ae3cae/attachment-0001.htm> <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/94ae3cae/attachment-0001.htm&gt;>


------------------------------


Message: 5
Date: Tue, 2 Jan 2024 13:43:59 +0100
From: Javier Jimenez Shaw <j1 at jimenezshaw.com <mailto:j1 at jimenezshaw.com>>
To: Even Rouault <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>>
Cc: gdal dev <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] COG via HTTP POST
Message-ID:
<CADRrdKtWswA+eokeQwtQWDuVmhjAD641SGOZ8WDk=fbQKot9Xg at mail.gmail.com <mailto:fbQKot9Xg at mail.gmail.com>>
Content-Type: text/plain; charset="utf-8"


Thanks Even.


I will tell them about the missing SRS


On Tue, 2 Jan 2024, 13:39 Even Rouault, <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:


> Javier,
>
> According to https://httpwg.org/specs/rfc7233.html#header.range <https://httpwg.org/specs/rfc7233.html#header.range> , HTTP
> Range requests only apply to GET requests. So COGs delivered through POST
> can indeed only be usable after full download.
>
> BTW, someone should ask CNIG to include GeoTIFF SRS tags. At least, for
> file pnt_sentinel2_2020_invierno_mosaico_islas_canarias_b843_hu28_8bits.tif
> which has only ModelTiepointTag and ModelPixelScaleTag geotiff keys giving
> the geospatial extent, but no CRS keys.
>
> Even
> Le 02/01/2024 ? 13:14, Javier Jimenez Shaw via gdal-dev a ?crit :
>
> Hi
>
> Does it make any sense to provide COG via HTTP POST method?
> If I understand correctly, the "magic" of downloading only what is needed
> from the server is done with HTTP Range requests. But I am not sure if that
> works in POST method (it does work in GET method, when enabled ;).
> In case it could work with POST, I do not know how to tell GDAL or QGIS to
> use a POST method.
>
> Why am I asking this? the CNIG (Natial Center of Geographic Information in
> Spain) is doing it.
> https://centrodedescargas.cnig.es/CentroDescargas/index.jsp <https://centrodedescargas.cnig.es/CentroDescargas/index.jsp> The link is
> just the starting point. Unfortunately they do not provide link to the
> final page where you can download the files (yes, ugly).
>
> So for now I have to download the full file, and do whatever I want later.
>
> Thanks
> Javier
> .___ ._ ..._ .. . ._. .___ .. __ . _. . __.. ... .... ._ .__
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orgh <mailto:listgdal-dev at lists.osgeo.orgh>ttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com <http://www.spatialys.com>
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/8627e23b/attachment-0001.htm> <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/8627e23b/attachment-0001.htm&gt;>


------------------------------


Message: 6
Date: Tue, 2 Jan 2024 15:09:23 +0100
From: leo.fuhrmann.lgln at icloud.com <mailto:leo.fuhrmann.lgln at icloud.com>
To: gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Error when importing GeoPackage into PostgreSQL
database ("Worker thread task has not expected m_iStartShapeId value")
Message-ID: <A0357B4D-4DFB-4070-86F4-EB7975C4140F at icloud.com <mailto:A0357B4D-4DFB-4070-86F4-EB7975C4140F at icloud.com>>
Content-Type: text/plain; charset="utf-8"


Hi,


I?m using ogr2ogr 3.8.2 to import a (layer of a) GeoPackage into a PostGIS database:


```
ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX user=XX password=XX? <path/to/gpkg.gpkg> <layer>
```


However, I?m seeing an error in the logs that I cannot sort out (see mail subject and/or logs below). Despite the error, the data gets written to the database, yet I?m worried that something is messed up along the way.


Using the official docker image to execute the command (from a MacBook with M1 Pro) works without an error. Then again, using a cloud service (IBM Code Engine in this case) with the official image also throws the error. I tried with different image versions but found no difference.


I tried to track down the error and found https://github.com/OSGeo/gdal/blob/1df855eb676e17278c337e9b14774d1bb298df90/ogr/ogrsf_frmts/gpkg/ogrgeopackagetablelayer.cpp#L8352 <https://github.com/OSGeo/gdal/blob/1df855eb676e17278c337e9b14774d1bb298df90/ogr/ogrsf_frmts/gpkg/ogrgeopackagetablelayer.cpp#L8352>


The comment suggests that I might have messed with GetNextFeature(), but I?m sure I haven?t.


Can someone help me to make sense of this error? I?m sorry to say that I can?t share the GeoPackage at the moment.


Thanks, Leo






Here are the logs:


GPKG: GeoPackage v1.2.0
GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x14c053e00) succeeds as GPKG.
GDAL: GDALDriver::Create(PostgreSQL,PG:dbname=XX host=XX port=XX user=XX password=XX
PG: Client encoding: 'UTF8'
PG: PostGIS schema: 'public'
PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit'
PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
PG: Could not retrieve table oid for <layer>
GDALVectorTranslate: Using FID=fid and -preserve_fid
PG: Could not retrieve table oid for <layer>
OGR2OGR: Using WriteArrowBatch()
GPKG: GeoPackage v1.2.0
GPKG: GeoPackage v1.2.0
GPKG: GeoPackage v1.2.0
ERROR 1: Worker thread task has not expected m_iStartShapeId value
PG: PQputCopyEnd()
GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x14c053e00)
GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX this=0x14b721fb0)
GDAL: In GDALDestroy - unloading GDAL shared library.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/3eca1d4d/attachment.htm> <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240102/3eca1d4d/attachment.htm&gt;>


------------------------------


Subject: Digest Footer


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>




------------------------------


End of gdal-dev Digest, Vol 236, Issue 1
****************************************




From jukka.rahkonen at maanmittauslaitos.fi  Wed Jan  3 14:28:49 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 3 Jan 2024 22:28:49 +0000
Subject: [gdal-dev] GDAL 3.8.3 RC2 is available,
 and motion to approve it (Re:  GDAL 3.8.3 RC1 is available,
 and motion to approve it)
In-Reply-To: <2ac69a88-5da1-40b0-bebd-97935c71e93a@spatialys.com>
References: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
 <2ac69a88-5da1-40b0-bebd-97935c71e93a@spatialys.com>
Message-ID: <DB9PR09MB6887FE8ACFAB14BAFCABE8B9FD60A@DB9PR09MB6887.eurprd09.prod.outlook.com>

+1 

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: keskiviikko 3. tammikuuta 2024 22.46
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] GDAL 3.8.3 RC2 is available, and motion to approve it (Re: GDAL 3.8.3 RC1 is available, and motion to approve it)

Hi,

I've issued a 2nd release candidate for 3.8.3 with the following additional fixes:

...
Retracting previous motion to approve RC1, and replacing it with:

Motion: adopt 3.8.3 RC2 as final 3.8.3 release

Starting with my +1,

~~~~~

Even


From leo.fuhrmann.lgln at icloud.com  Thu Jan  4 02:47:46 2024
From: leo.fuhrmann.lgln at icloud.com (leo.fuhrmann.lgln at icloud.com)
Date: Thu, 4 Jan 2024 11:47:46 +0100
Subject: [gdal-dev] Error when importing GeoPackage into PostgreSQL
 database ("Worker thread task has not expected m_iStartShapeId value")
In-Reply-To: <6616d487-589f-4a7b-b172-1a49d663a85b@spatialys.com>
References: <A0357B4D-4DFB-4070-86F4-EB7975C4140F@icloud.com>
 <59127943-bf99-4792-99da-47759c14bcff@spatialys.com>
 <0F025424-2100-40A7-8445-2DA44A43B8EF@icloud.com>
 <6616d487-589f-4a7b-b172-1a49d663a85b@spatialys.com>
Message-ID: <73DD8449-2CDB-4E65-8D2B-D23C68C3A4DC@icloud.com>

Thank you for the quick responses. I have written a comment on the pull request you supplied in your last message with an example GeoPackage.

Leo

> On Jan 3, 2024, at 15:04, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> OK, I'm submitting https://github.com/OSGeo/gdal/pull/9018 to disable the multi-threaded mode by default, as I want to have reliable working in the 3.8.3 release ASAP. But I'm still interested in having that issue diagnose, to potentially re-enable multi-threading later. In 3.8.3, multi-threading in the ArrowArray interface of the GPKG driver will be opt-in through the newly added OGR_GPKG_NUM_THREADS configuration option / environment variable.
> 
> Even
> 
> Le 02/01/2024 ? 16:42, leo.fuhrmann.lgln at icloud.com <mailto:leo.fuhrmann.lgln at icloud.com> a ?crit :
>> Unfortunately, I?m not allowed to share the GeoPackage at the moment. I will get back to you as soon as I have permission or managed to reduce the dataset accordingly.
>> 
>> In the meantime, I found out, that the Error is not raised, if I use e. g. the `-where` or `-sql` statement. Here is a command that doesn?t produce an error, with the logs at the bottom:
>> 
>> ```
>> ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX user=XX password=XX? <path/to/gpkg.gpkg> -where "1" <layer>
>> ```
>> 
>> Logs:
>> 
>> GPKG: GeoPackage v1.2.0
>> GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x13a83b400) succeeds as GPKG.
>> PG: Client encoding: 'UTF8'
>> PG: PostGIS schema: 'public'
>> PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit'
>> PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
>> GDAL: GDALOpen(PG:dbname=XX host=XX port=XX user=XX password=XX this=0x13a631ee0) succeeds as PostgreSQL.
>> GPKG: Filter: 1
>> PG: Could not retrieve table oid for <layer>
>> GDALVectorTranslate: Using FID=fid and -preserve_fid
>> PG: Could not retrieve table oid for <layer>
>> OGR2OGR: Using WriteArrowBatch()
>> PG: PQputCopyEnd()
>> GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x13a83b400)
>> GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX this=0x13a631ee0)
>> GDAL: In GDALDestroy - unloading GDAL shared library.
>> 
>> 
>>> On Jan 2, 2024, at 15:57, Even Rouault <even.rouault at spatialys.com> <mailto:even.rouault at spatialys.com> wrote:
>>> 
>>> Leo,
>>> 
>>> could you provide your GeoPackage file and the layer you're converting ? (privately possibly)
>>> 
>>> Even
>>> 
>>> Le 02/01/2024 ? 15:09, Leo Fuhrmann via gdal-dev a ?crit :
>>>> Hi,
>>>> 
>>>> I?m using ogr2ogr 3.8.2 to import a (layer of a) GeoPackage into a PostGIS database:
>>>> 
>>>> ```
>>>> ogr2ogr --debug ON -f PostgreSQL "PG:dbname=XX host=XX port=XX user=XX password=XX? <path/to/gpkg.gpkg> <layer>
>>>> ```
>>>> 
>>>> However, I?m seeing an error in the logs that I cannot sort out (see mail subject and/or logs below). Despite the error, the data gets written to the database, yet I?m worried that something is messed up along the way.
>>>> 
>>>> Using the official docker image to execute the command (from a MacBook with M1 Pro) works without an error. Then again, using a cloud service (IBM Code Engine in this case) with the official image also throws the error. I tried with different image versions but found no difference.
>>>> 
>>>> I tried to track down the error and found https://github.com/OSGeo/gdal/blob/1df855eb676e17278c337e9b14774d1bb298df90/ogr/ogrsf_frmts/gpkg/ogrgeopackagetablelayer.cpp#L8352
>>>> 
>>>> The comment suggests that I might have messed with GetNextFeature(), but I?m sure I haven?t.
>>>> 
>>>> Can someone help me to make sense of this error? I?m sorry to say that I can?t share the GeoPackage at the moment.
>>>> 
>>>> Thanks, Leo
>>>> 
>>>> 
>>>> 
>>>> Here are the logs:
>>>> 
>>>> GPKG: GeoPackage v1.2.0
>>>> GDAL: GDALOpen(<path/to/gpkg.gpkg>, this=0x14c053e00) succeeds as GPKG.
>>>> GDAL: GDALDriver::Create(PostgreSQL,PG:dbname=XX host=XX port=XX user=XX password=XX
>>>> PG: Client encoding: 'UTF8'
>>>> PG: PostGIS schema: 'public'
>>>> PG: PostgreSQL version string : 'PostgreSQL 16.1 (Debian 16.1-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit'
>>>> PG: PostGIS version string : '3.4 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
>>>> PG: Could not retrieve table oid for <layer>
>>>> GDALVectorTranslate: Using FID=fid and -preserve_fid
>>>> PG: Could not retrieve table oid for <layer>
>>>> OGR2OGR: Using WriteArrowBatch()
>>>> GPKG: GeoPackage v1.2.0
>>>> GPKG: GeoPackage v1.2.0
>>>> GPKG: GeoPackage v1.2.0
>>>> ERROR 1: Worker thread task has not expected m_iStartShapeId value
>>>> PG: PQputCopyEnd()
>>>> GDAL: GDALClose(<path/to/gpkg.gpkg>, this=0x14c053e00)
>>>> GDAL: GDALClose(PG:dbname=XX host=XX port=XX user=XX password=XX this=0x14b721fb0)
>>>> GDAL: In GDALDestroy - unloading GDAL shared library.
>>>> 
>>>> 
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> -- 
>>> http://www.spatialys.com <http://www.spatialys.com/>
>>> My software is free, but my time generally not.
>> 
> -- 
> http://www.spatialys.com <http://www.spatialys.com/>
> My software is free, but my time generally not.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240104/e77e7a8e/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Jan  4 10:32:24 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 4 Jan 2024 19:32:24 +0100
Subject: [gdal-dev] GDAL 3.8.3 RC3 is available,
 and motion to approve it (Re:  GDAL 3.8.3 RC1 is available,
 and motion to approve it)
In-Reply-To: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
References: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
Message-ID: <336bac2d-ea9c-436d-b772-c5a8cb8077a7@spatialys.com>

Hi,

A third (and hopefully final) release candidate for 3.8.3 with the 
following additional fixes on top of RC2:
- re-enable multi-threaded ArrowArray interface in GPKG driver now that 
the issue has been reproduced and fixed 
(https://github.com/OSGeo/gdal/pull/9026)
- Internal libjson: resync random_seed.c with upstream, and use 
getrandom() implementation when available (#9024)
- Fix build of optional utility gdal2ogr

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc3.tar.xz
 ? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc3.tar.gz
 ? https://download.osgeo.org/gdal/3.8.3/gdal383rc3.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc3.tar.gz
 ? https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc3.zip

The NEWS file is here:

 ?? https://github.com/OSGeo/gdal/blob/v3.8.3RC3/NEWS.md

~~~~

Retracting previous motion to approve RC2, and replacing it with:

Motion: adopt 3.8.3 RC3 as final 3.8.3 release

Starting with my +1,

~~~~~

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Thu Jan  4 11:10:34 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 4 Jan 2024 20:10:34 +0100
Subject: [gdal-dev] GDAL 3.8.3 RC3 is available,
 and motion to approve it (Re: GDAL 3.8.3 RC1 is available,
 and motion to approve it)
In-Reply-To: <336bac2d-ea9c-436d-b772-c5a8cb8077a7@spatialys.com>
References: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
 <336bac2d-ea9c-436d-b772-c5a8cb8077a7@spatialys.com>
Message-ID: <CADRrdKtUrNaYs8USUYwWqMi_Cez13tzYEe_xYY0EqJgNB=_=mw@mail.gmail.com>

+1 Javier

On Thu, 4 Jan 2024, 19:32 Even Rouault via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> A third (and hopefully final) release candidate for 3.8.3 with the
> following additional fixes on top of RC2:
> - re-enable multi-threaded ArrowArray interface in GPKG driver now that
> the issue has been reproduced and fixed
> (https://github.com/OSGeo/gdal/pull/9026)
> - Internal libjson: resync random_seed.c with upstream, and use
> getrandom() implementation when available (#9024)
> - Fix build of optional utility gdal2ogr
>
> Pick up an archive among the following ones (by ascending size):
>
>    https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc3.tar.xz
>    https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc3.tar.gz
>    https://download.osgeo.org/gdal/3.8.3/gdal383rc3.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc3.tar.gz
>    https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc3.zip
>
> The NEWS file is here:
>
>     https://github.com/OSGeo/gdal/blob/v3.8.3RC3/NEWS.md
>
> ~~~~
>
> Retracting previous motion to approve RC2, and replacing it with:
>
> Motion: adopt 3.8.3 RC3 as final 3.8.3 release
>
> Starting with my +1,
>
> ~~~~~
>
> Even
>
> --
>
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240104/1c576cb6/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan  4 12:59:50 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 4 Jan 2024 20:59:50 +0000
Subject: [gdal-dev] GDAL 3.8.3 RC3 is available,
 and motion to approve it (Re: GDAL 3.8.3 RC1 is available,
 and motion to approve it)
In-Reply-To: <CADRrdKtUrNaYs8USUYwWqMi_Cez13tzYEe_xYY0EqJgNB=_=mw@mail.gmail.com>
References: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
 <336bac2d-ea9c-436d-b772-c5a8cb8077a7@spatialys.com>
 <CADRrdKtUrNaYs8USUYwWqMi_Cez13tzYEe_xYY0EqJgNB=_=mw@mail.gmail.com>
Message-ID: <DB9PR09MB6887A24ED835DB9450D8A34AFD672@DB9PR09MB6887.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Javier Jimenez Shaw via gdal-dev
L?hetetty: torstai 4. tammikuuta 2024 21.11
Vastaanottaja: Even Rouault <even.rouault at spatialys.com>
Kopio: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] GDAL 3.8.3 RC3 is available, and motion to approve it (Re: GDAL 3.8.3 RC1 is available, and motion to approve it)

+1 Javier

On Thu, 4 Jan 2024, 19:32 Even Rouault via gdal-dev, <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Hi,

A third (and hopefully final) release candidate for 3.8.3 with the
following additional fixes on top of RC2:
- re-enable multi-threaded ArrowArray interface in GPKG driver now that
the issue has been reproduced and fixed
(https://github.com/OSGeo/gdal/pull/9026)
- Internal libjson: resync random_seed.c with upstream, and use
getrandom() implementation when available (#9024)
- Fix build of optional utility gdal2ogr

Pick up an archive among the following ones (by ascending size):

   https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc3.tar.xz
   https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc3.tar.gz
   https://download.osgeo.org/gdal/3.8.3/gdal383rc3.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc3.tar.gz
   https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc3.zip

The NEWS file is here:

    https://github.com/OSGeo/gdal/blob/v3.8.3RC3/NEWS.md

~~~~

Retracting previous motion to approve RC2, and replacing it with:

Motion: adopt 3.8.3 RC3 as final 3.8.3 release

Starting with my +1,

~~~~~

Even

--

http://www.spatialys.com<http://www.spatialys.com/>
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240104/767569cf/attachment.htm>

From howard at hobu.co  Thu Jan  4 15:04:02 2024
From: howard at hobu.co (Howard Butler)
Date: Thu, 4 Jan 2024 17:04:02 -0600
Subject: [gdal-dev] GDAL 3.8.3 RC3 is available,
 and motion to approve it (Re: GDAL 3.8.3 RC1 is available,
 and motion to approve it)
In-Reply-To: <DB9PR09MB6887A24ED835DB9450D8A34AFD672@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <538688e4-07ea-47ea-9532-c84e35f47c87@spatialys.com>
 <336bac2d-ea9c-436d-b772-c5a8cb8077a7@spatialys.com>
 <CADRrdKtUrNaYs8USUYwWqMi_Cez13tzYEe_xYY0EqJgNB=_=mw@mail.gmail.com>
 <DB9PR09MB6887A24ED835DB9450D8A34AFD672@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <7805ECA9-0954-4A0A-A5A0-BC3C2F646D03@hobu.co>

+1

> On Jan 4, 2024, at 2:59?PM, Rahkonen Jukka via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> +1
>  
> -Jukka Rahkonen-
>  
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org <mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Javier Jimenez Shaw via gdal-dev
> L?hetetty: torstai 4. tammikuuta 2024 21.11
> Vastaanottaja: Even Rouault <even.rouault at spatialys.com>
> Kopio: gdal dev <gdal-dev at lists.osgeo.org>
> Aihe: Re: [gdal-dev] GDAL 3.8.3 RC3 is available, and motion to approve it (Re: GDAL 3.8.3 RC1 is available, and motion to approve it)
>  
> +1 Javier
>  
> On Thu, 4 Jan 2024, 19:32 Even Rouault via gdal-dev, <gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>> wrote:
> Hi,
> 
> A third (and hopefully final) release candidate for 3.8.3 with the 
> following additional fixes on top of RC2:
> - re-enable multi-threaded ArrowArray interface in GPKG driver now that 
> the issue has been reproduced and fixed 
> (https://github.com/OSGeo/gdal/pull/9026)
> - Internal libjson: resync random_seed.c with upstream, and use 
> getrandom() implementation when available (#9024)
> - Fix build of optional utility gdal2ogr
> 
> Pick up an archive among the following ones (by ascending size):
> 
>    https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc3.tar.xz
>    https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3rc3.tar.gz
>    https://download.osgeo.org/gdal/3.8.3/gdal383rc3.zip
> 
> A snapshot of the gdalautotest suite is also available:
> 
> https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc3.tar.gz
>    https://download.osgeo.org/gdal/3.8.3/gdalautotest-3.8.3rc3.zip
> 
> The NEWS file is here:
> 
>     https://github.com/OSGeo/gdal/blob/v3.8.3RC3/NEWS.md
> 
> ~~~~
> 
> Retracting previous motion to approve RC2, and replacing it with:
> 
> Motion: adopt 3.8.3 RC3 as final 3.8.3 release
> 
> Starting with my +1,
> 
> ~~~~~
> 
> Even
> 
> -- 
> 
> http://www.spatialys.com <http://www.spatialys.com/>
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240104/bb9b68b3/attachment-0001.htm>

From ml at patify.dev  Fri Jan  5 10:23:13 2024
From: ml at patify.dev (Cosme Benito)
Date: Fri, 05 Jan 2024 18:23:13 +0000
Subject: [gdal-dev] Best way to add Oracle Spatial (OCI) support in Debian
 12?
Message-ID: <d-xPmWLyM3Dz3b14lEse8ABOjN-IxuMd_vrk7_nqOfS3HarcKmdYC-6FCDt_ckETkUx4CryvFei_148aTydtKiu3Lr6jNfTJfWIF0UQUtrI=@patify.dev>

Hi everyone,

I have installed gdal through the debian repositories using the "sudo apt-get install -y gdal-bin gdal-data gdal-plugins" and everything is working great out of the box.

I have been having a hard time adding support for Oracle Spatial (OCI). In windows this was very easy, installing the GDAL oracle plugin and the instant client was enough. I can't seem to find the oracle plugin available in Linux.

Search engines seem to suggest that compiling from source is the way to go but I was wondering if there is a more "plugin" approach.

Thank you,
Cosme Benito
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240105/2bc135c4/attachment.htm>

From a.pau at creaf.uab.cat  Sat Jan  6 13:32:28 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Sat, 6 Jan 2024 21:32:28 +0000
Subject: [gdal-dev] Where to fins my own files
Message-ID: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi,
Happy New 2024 to everyone who celebrates it!

I am programming a driver and in some point I need to read a file that contains some information (and it's better to keep this in a file than in c code) about the Horizontal Reference System.
I have this file here: "GDAL\ogr\ogrsf_frmts\miramon", but when coding I don't know how to get to this folder.

There is any method to open a file (using VSIFOpenL(), for instance) in THIS specific directory? Can I use "GDAL\ogr\ogrsd_frmts\miramon" like that?

If not, where can I put this file to be found when executing the code? And how to write this path in the code?

Thanks in advance!!



Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat> | http://blog.creaf.cat
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/44204c15/attachment-0003.jpg>

From sean.gillies at gmail.com  Sat Jan  6 16:59:52 2024
From: sean.gillies at gmail.com (Sean Gillies)
Date: Sat, 6 Jan 2024 17:59:52 -0700
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>

Happy New Year to you too, Abel.

Other drivers, such as PCI and NITF,  include some files in the data
directory.  See  https://github.com/OSGeo/gdal/tree/master/data.
Distributions generally copy these to $prefix/share/gdal on unix-like
systems. I'm not aware of a practice of copying data out of a driver's
directory to that same location, though it's probably possible with Cmake.
Your driver's own directory won't necessarily exist on a system where you
install GDAL.

For datum files, have you checked whether they already exist in the PROJ
project?

On Sat, Jan 6, 2024, 2:32?PM Abel Pau via gdal-dev <gdal-dev at lists.osgeo.org>
wrote:

> Hi,
>
> Happy New 2024 to everyone who celebrates it!
>
>
>
> I am programming a driver and in some point I need to read a file that
> contains some information (and it?s better to keep this in a file than in c
> code) about the Horizontal Reference System.
>
> I have this file here: ?GDAL\ogr\ogrsf_frmts\miramon?, but when coding I
> don?t know how to get to this folder.
>
>
>
> There is any method to open a file (using VSIFOpenL(), for instance) in
> THIS specific directory? Can I use ?GDAL\ogr\ogrsd_frmts\miramon? like that?
>
> If not, where can I put this file to be found when executing the code? And
> how to write this path in the code?
>
> Thanks in advance!!
>
>
>
>
>
>
>
> *Abel Pau Garcia*
>
> *GIS developer*
>
> [image: https://www.creaf.cat/sites/default/files/creaf-signature.png]
>
> *a.pau at creaf.uab.cat* <a.pau at creaf.uab.cat>
>
> *Let's chat on Teams!*
> <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
> *Tel. +34 934814277*
>
> [image: https://www.creaf.cat/sites/default/files/so-en-signature.png]
>
> [image:
> https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]
> <https://twitter.com/CREAF_ecologia>[image:
> https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]
> <https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[image:
> https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]
> <https://www.youtube.com/c/creafecologia>[image:
> https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]
> <https://www.instagram.com/CREAF_ecologia/>
>
> *www.creaf.cat* <http://www.creaf.cat>* | **http://blog.creaf.cat*
> <http://blog.creaf.cat>
>
> [image: https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
>
> CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)
>
>
> Before printing this electronic message, think about the environment.
>
> [image: http://www.creaf.uab.cat/_signatura/line.gif]
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/208cf693/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240106/208cf693/attachment.png>

From even.rouault at spatialys.com  Sun Jan  7 03:20:16 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 7 Jan 2024 12:20:16 +0100
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>
Message-ID: <02de8899-3841-4fa5-a293-ba31fabeeda4@spatialys.com>

Yes, the practice for a resource file is:

- put it under data/

- add it to the GDAL_DATA_FILES variable on top level gdal.cmake file

- use CPLFindFile("gdal", "your.file") to get its path

Le 07/01/2024 ? 01:59, Sean Gillies via gdal-dev a ?crit?:
> Happy?New Year to you too, Abel.
>
> Other drivers, such as PCI and NITF,? include some files in the data 
> directory.? See https://github.com/OSGeo/gdal/tree/master/data. 
> Distributions generally copy these to $prefix/share/gdal on unix-like 
> systems. I'm not aware of a practice of copying data out of a driver's 
> directory to that same location, though it's probably possible with 
> Cmake. Your driver's own directory won't necessarily exist on a system 
> where you install GDAL.
>
> For datum files, have you checked whether they already?exist in the 
> PROJ project?
>
> On Sat, Jan 6, 2024, 2:32?PM Abel Pau via gdal-dev 
> <gdal-dev at lists.osgeo.org> wrote:
>
>     Hi,
>
>     Happy New 2024 to everyone who celebrates it!
>
>     I am programming a driver and in some point I need to read a file
>     that contains some information (and it?s better to keep this in a
>     file than in c code) about the Horizontal Reference System.
>
>     I have this file here: ?GDAL\ogr\ogrsf_frmts\miramon?, but when
>     coding I don?t know how to get to this folder.
>
>     There is any method to open a file (using VSIFOpenL(), for
>     instance) in THIS specific directory? Can I use
>     ?GDAL\ogr\ogrsd_frmts\miramon? like that?
>
>     If not, where can I put this file to be found when executing the
>     code? And how to write this path in the code?
>
>     Thanks in advance!!
>
>     *Abel Pau Garcia*
>
>     *GIS developer*
>
>     	
>
>     https://www.creaf.cat/sites/default/files/creaf-signature.png
>
>     *a.pau at creaf.uab.cat* <mailto:a.pau at creaf.uab.cat>
>
>     *Let's chat on Teams!*
>     <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
>     *Tel. +34 934814277*
>
>     	
>
>     https://www.creaf.cat/sites/default/files/so-en-signature.png
>
>     https://www.creaf.cat/sites/default/files/twitter-icon-signature.png
>     <https://twitter.com/CREAF_ecologia>https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png
>     <https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>https://www.creaf.cat/sites/default/files/youtube-icon-signature.png
>     <https://www.youtube.com/c/creafecologia>https://www.creaf.cat/sites/default/files/instagram-icon-signature.png
>     <https://www.instagram.com/CREAF_ecologia/>
>
>     *www.creaf.cat* <http://www.creaf.cat>*| **http://blog.creaf.cat*
>     <http://blog.creaf.cat>
>
>     	
>
>     https://www.creaf.cat/sites/default/files/uab_logo_signatura.png
>
>     CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)
>
>
>     Before printing this electronic message, think about the environment.
>
>     http://www.creaf.uab.cat/_signatura/line.gif
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240107/5703293a/attachment-0001.htm>

From a.pau at creaf.uab.cat  Sun Jan  7 12:59:50 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Sun, 7 Jan 2024 20:59:50 +0000
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <02de8899-3841-4fa5-a293-ba31fabeeda4@spatialys.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>
 <02de8899-3841-4fa5-a293-ba31fabeeda4@spatialys.com>
Message-ID: <PAXPR07MB7775A2923F0BA6798DB8D931A2642@PAXPR07MB7775.eurprd07.prod.outlook.com>

Thanks for your answers.

When I call aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.dbf");
NULL pointer is obtained and I think I know why. When debuging there are 2 FinderLocations:
The first one is ?D:\GitHub-repository\GDAL\data;? (note thar there is a ?;? at the end).
When tries to compose with MM_m_idofic.dbf (the file copied in ?data? folder) I obtain: ?D:\GitHub-repository\GDAL\data;\MM_m_idofic.dbf?

So, debugging more ERROR_PATH_NOT_FOUND is returned. And I think that ?;? is the problem, isn?t it?

Has any sense all I am saying? Or I have something wrong anywhere? Thanks!!

Sean,
> For datum files, have you checked whether they already exist in the PROJ project?
This MM_m_idofic.dbf file is a table of synonyms between the internal SRH identifiers of MiraMon and the EPSG you all know.
So, it?s only a help to find the EPSG of a MiraMon layer when translatinc a MiraMon layer to another.

Thanks you all and I keep waiting for any help about the misterious ?;?.



De: Even Rouault <even.rouault at spatialys.com>
Enviado el: diumenge, 7 de gener de 2024 12:20
Para: Sean Gillies <sean.gillies at gmail.com>; Abel Pau <a.pau at creaf.uab.cat>
CC: gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Where to fins my own files


Yes, the practice for a resource file is:

- put it under data/

- add it to the GDAL_DATA_FILES variable on top level gdal.cmake file

- use CPLFindFile("gdal", "your.file") to get its path
Le 07/01/2024 ? 01:59, Sean Gillies via gdal-dev a ?crit :
Happy New Year to you too, Abel.

Other drivers, such as PCI and NITF,  include some files in the data directory.  See  https://github.com/OSGeo/gdal/tree/master/data. Distributions generally copy these to $prefix/share/gdal on unix-like systems. I'm not aware of a practice of copying data out of a driver's directory to that same location, though it's probably possible with Cmake. Your driver's own directory won't necessarily exist on a system where you install GDAL.

For datum files, have you checked whether they already exist in the PROJ project?
On Sat, Jan 6, 2024, 2:32?PM Abel Pau via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Hi,
Happy New 2024 to everyone who celebrates it!

I am programming a driver and in some point I need to read a file that contains some information (and it?s better to keep this in a file than in c code) about the Horizontal Reference System.
I have this file here: ?GDAL\ogr\ogrsf_frmts\miramon?, but when coding I don?t know how to get to this folder.

There is any method to open a file (using VSIFOpenL(), for instance) in THIS specific directory? Can I use ?GDAL\ogr\ogrsd_frmts\miramon? like that?

If not, where can I put this file to be found when executing the code? And how to write this path in the code?

Thanks in advance!!



Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat> | http://blog.creaf.cat
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240107/176eeff0/attachment-0001.htm>

From even.rouault at spatialys.com  Sun Jan  7 13:06:06 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 7 Jan 2024 22:06:06 +0100
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <PAXPR07MB7775A2923F0BA6798DB8D931A2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>
 <02de8899-3841-4fa5-a293-ba31fabeeda4@spatialys.com>
 <PAXPR07MB7775A2923F0BA6798DB8D931A2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <9fa575fb-e3e7-48eb-a822-4f1c5b789279@spatialys.com>


Le 07/01/2024 ? 21:59, Abel Pau a ?crit?:
>
> Thanks for your answers.
>
> When I call aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.dbf");
>
> NULL pointer is obtained and I think I know why. When debuging there 
> are 2 FinderLocations:
>
> The first one is ?D:\GitHub-repository\GDAL\data;? (note thar there is 
> a ?;? at the end).
>
Is the GDAL_DATA environment variable set in your environment ? If so, 
just remove the trailing ';' . GDAL_DATA doesn't support multiple paths

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240107/52bdae67/attachment.htm>

From a.pau at creaf.uab.cat  Sun Jan  7 13:06:53 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Sun, 7 Jan 2024 21:06:53 +0000
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <9fa575fb-e3e7-48eb-a822-4f1c5b789279@spatialys.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>
 <02de8899-3841-4fa5-a293-ba31fabeeda4@spatialys.com>
 <PAXPR07MB7775A2923F0BA6798DB8D931A2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9fa575fb-e3e7-48eb-a822-4f1c5b789279@spatialys.com>
Message-ID: <PAXPR07MB77756F8EBAB51A6A4C5A484CA2642@PAXPR07MB7775.eurprd07.prod.outlook.com>

Yes, it?s just what I found now!!
Thanks a lot Even! It works now!!

De: Even Rouault <even.rouault at spatialys.com>
Enviado el: diumenge, 7 de gener de 2024 22:06
Para: Abel Pau <a.pau at creaf.uab.cat>; Sean Gillies <sean.gillies at gmail.com>
CC: gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Where to fins my own files



Le 07/01/2024 ? 21:59, Abel Pau a ?crit :
Thanks for your answers.

When I call aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.dbf");
NULL pointer is obtained and I think I know why. When debuging there are 2 FinderLocations:
The first one is ?D:\GitHub-repository\GDAL\data;? (note thar there is a ?;? at the end).

Is the GDAL_DATA environment variable set in your environment ? If so, just remove the trailing ';' . GDAL_DATA doesn't support multiple paths

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240107/6fcf6bc4/attachment.htm>

From philippe.ghesquiere at airbus.com  Mon Jan  8 02:57:11 2024
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Mon, 8 Jan 2024 11:57:11 +0100
Subject: [gdal-dev] gdaladdo does not "respect" GPKG tile matrix
Message-ID: <CAAes_OFKmP9wqN+6wrMN3cHwyLmo_jSdEJjaKzukX5siFJB9bw@mail.gmail.com>

Dear all,
 A while ago, I opened a ticket which is still opened (
https://github.com/OSGeo/gdal/issues/3853). I recently  bumped into this
bug with some new data, and I think I tracked the origin.


*1) Generate a test image :*
gdal_create -of GTIFF -co COMPRESS=LZW -a_srs epsg:4326 -a_ullr -180 90 180
-90 -burn 128 -outsize 2048 1024 worldwide.tif

*2) Convert to GPKG :*
 gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad worldwide.tif
worldwide_no_pyramid.gpkg

The GPKG tile matrix is as expected :
sqlite3 -header -column worldwide_no_pyramid.gpkg "SELECT rowid,* FROM
gpkg_tile_matrix  ;"
rowid  table_name            zoom_level  matrix_width  matrix_height
 tile_width  tile_height  pixel_x_size  pixel_y_size
-----  --------------------  ----------  ------------  -------------
 ----------  -----------  ------------  ------------
1      worldwide_no_pyramid  0           2             1              256
      256          0.703125      0.703125
2      worldwide_no_pyramid  1           4             2              256
      256          0.3515625     0.3515625
3      worldwide_no_pyramid  2           8             4              256
      256          0.17578125    0.17578125

*3) Compute a default pyramid:*
cp worldwide_no_pyramid.gpkg worldwide_default_pyramid.gpkg
gdaladdo worldwide_default_pyramid.gpkg

The GPKG tile matrix is no longer the expected one (InspireCRS84Quad
InspireCRS84Quad) :
sqlite3 -header -column worldwide_default_pyramid.gpkg  "SELECT rowid,*
FROM gpkg_tile_matrix  ;"
rowid  table_name            zoom_level  matrix_width  matrix_height
 tile_width  tile_height  pixel_x_size  pixel_y_size
-----  --------------------  ----------  ------------  -------------
 ----------  -----------  ------------  ------------
1      worldwide_no_pyramid  1           2             1              256
      256          0.703125      0.703125
2      worldwide_no_pyramid  2           4             2              256
      256          0.3515625     0.3515625
3      worldwide_no_pyramid  3           8             4              256
      256          0.17578125    0.17578125
4      worldwide_no_pyramid  0           1             1              256
      256          1.40625       1.40625

*4) Compute a manual pyramid:*
cp worldwide_no_pyramid.gpkg worldwide_manual_pyramid.gpkg
gdaladdo worldwide_manual_pyramid.gpkg 2 4

The GPKG tile matrix is still as expected (InspireCRS84Quad
InspireCRS84Quad) :
sqlite3 -header -column worldwide_manual_pyramid.gpkg  "SELECT rowid,* FROM
gpkg_tile_matrix  ;"
rowid  table_name            zoom_level  matrix_width  matrix_height
 tile_width  tile_height  pixel_x_size  pixel_y_size
-----  --------------------  ----------  ------------  -------------
 ----------  -----------  ------------  ------------
1      worldwide_no_pyramid  0           2             1              256
      256          0.703125      0.703125
2      worldwide_no_pyramid  1           4             2              256
      256          0.3515625     0.3515625
3      worldwide_no_pyramid  2           8             4              256
      256          0.17578125    0.17578125

*5) Compute a "Weird" pyramid:*
In this test, I generate too many levels in the pyramid on purpose :
cp worldwide_no_pyramid.gpkg worldwide_manual_weird_pyramid.gpkg
gdaladdo worldwide_manual_weird_pyramid.gpkg 2 4 8

The GPKG tile matrix is exactly the same as in
worldwide_default_pyramid.gpkg :
sqlite3 -header -column worldwide_manual_weird_pyramid.gpkg  "SELECT
rowid,* FROM gpkg_tile_matrix  ;"
rowid  table_name            zoom_level  matrix_width  matrix_height
 tile_width  tile_height  pixel_x_size  pixel_y_size
-----  --------------------  ----------  ------------  -------------
 ----------  -----------  ------------  ------------
1      worldwide_no_pyramid  1           2             1              256
      256          0.703125      0.703125
2      worldwide_no_pyramid  2           4             2              256
      256          0.3515625     0.3515625
3      worldwide_no_pyramid  3           8             4              256
      256          0.17578125    0.17578125
4      worldwide_no_pyramid  0           1             1              256
      256          1.40625       1.40625

*6) Conclusion *
The default power-of-two factor list is computed in gdaladdo.cpp. At this
point, the algorithm is not aware of some GPKG limitations.

I found two workarounds :

   - specify explicitly all zoom levels
   - add minsize option. The minimum size has to be twice the tile_height /
   tile_width : -minsize 512

Shouldn't we have a specific check for GPKG while computing the pyramid ?
For example by deriving the virtual method BuildOverviews() for GPKG ?

Philippe
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240108/8bde7d40/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Jan  8 04:07:49 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Jan 2024 13:07:49 +0100
Subject: [gdal-dev] gdaladdo does not "respect" GPKG tile matrix
In-Reply-To: <CAAes_OFKmP9wqN+6wrMN3cHwyLmo_jSdEJjaKzukX5siFJB9bw@mail.gmail.com>
References: <CAAes_OFKmP9wqN+6wrMN3cHwyLmo_jSdEJjaKzukX5siFJB9bw@mail.gmail.com>
Message-ID: <0097f73a-4bee-4162-96e5-e24a11fbfa85@spatialys.com>

Hi Philippe,

I no longer reproduce the below issues nor 
https://github.com/OSGeo/gdal/issues/3853 with gdaladdo without explicit 
level with GDAL master 3.9dev. This is due to improvement 
https://github.com/OSGeo/gdal/commit/d178b03e3db that reuse existing 
overview levels when they are declared by the dataset. Which is the case 
for a GeoPackage created with a tiling_scheme and with unpopulated levels.

The only case now where the tiling scheme might no longer be respected 
is if the user specifies an overview level beyond the base one, or some 
"weird" factor like 3. But as it is the user that requests that, I don't 
think we should do anything for that case.

Even

Le 08/01/2024 ? 11:57, Philippe Ghesquiere via gdal-dev a ?crit?:
> Dear all,
> ?A while ago, I opened?a ticket which is still 
> opened?(https://github.com/OSGeo/gdal/issues/3853). I recently? bumped 
> into this bug with some new data, and I think I tracked the origin.
>
>
> _1) Generate a test image :_
> gdal_create -of GTIFF -co COMPRESS=LZW -a_srs epsg:4326 -a_ullr -180 
> 90 180 -90 -burn 128 -outsize 2048 1024 worldwide.tif
>
> _2) Convert to GPKG :_
> ?gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad 
> worldwide.tif worldwide_no_pyramid.gpkg
>
> The GPKG tile matrix is as expected :
> sqlite3 -header -column worldwide_no_pyramid.gpkg "SELECT rowid,* FROM 
> gpkg_tile_matrix ?;"
> rowid ?table_name ? ? ? ? ? ?zoom_level ?matrix_width ?matrix_height 
> ?tile_width ?tile_height ?pixel_x_size ?pixel_y_size
> ----- ?-------------------- ?---------- ?------------ ?------------- 
> ?---------- ?----------- ?------------ ?------------
> 1 ? ? ?worldwide_no_pyramid ?0 ? ? ? ? ? 2 ? ? ? ? ? ? 1 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.703125 ? ? ?0.703125
> 2 ? ? ?worldwide_no_pyramid ?1 ? ? ? ? ? 4 ? ? ? ? ? ? 2 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.3515625 ? ? 0.3515625
> 3 ? ? ?worldwide_no_pyramid ?2 ? ? ? ? ? 8 ? ? ? ? ? ? 4 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.17578125 ? ?0.17578125
>
> _3) Compute a default pyramid:_
> cp worldwide_no_pyramid.gpkg worldwide_default_pyramid.gpkg
> gdaladdo worldwide_default_pyramid.gpkg
>
> The GPKG tile matrix is no longer the expected one (InspireCRS84Quad 
> InspireCRS84Quad) :
> sqlite3 -header -column worldwide_default_pyramid.gpkg ?"SELECT 
> rowid,* FROM gpkg_tile_matrix ?;"
> rowid ?table_name ? ? ? ? ? ?zoom_level ?matrix_width ?matrix_height 
> ?tile_width ?tile_height ?pixel_x_size ?pixel_y_size
> ----- ?-------------------- ?---------- ?------------ ?------------- 
> ?---------- ?----------- ?------------ ?------------
> 1 ? ? ?worldwide_no_pyramid ?1 ? ? ? ? ? 2 ? ? ? ? ? ? 1 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.703125 ? ? ?0.703125
> 2 ? ? ?worldwide_no_pyramid ?2 ? ? ? ? ? 4 ? ? ? ? ? ? 2 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.3515625 ? ? 0.3515625
> 3 ? ? ?worldwide_no_pyramid ?3 ? ? ? ? ? 8 ? ? ? ? ? ? 4 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.17578125 ? ?0.17578125
> 4 ? ? ?worldwide_no_pyramid ?0 ? ? ? ? ? 1 ? ? ? ? ? ? 1 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?1.40625 ? ? ? 1.40625
>
> _4) Compute a manual pyramid:_
> cp worldwide_no_pyramid.gpkg worldwide_manual_pyramid.gpkg
> gdaladdo worldwide_manual_pyramid.gpkg 2 4
>
> The GPKG tile matrix is still as expected (InspireCRS84Quad 
> InspireCRS84Quad) :
> sqlite3 -header -column worldwide_manual_pyramid.gpkg ?"SELECT rowid,* 
> FROM gpkg_tile_matrix ?;"
> rowid ?table_name ? ? ? ? ? ?zoom_level ?matrix_width ?matrix_height 
> ?tile_width ?tile_height ?pixel_x_size ?pixel_y_size
> ----- ?-------------------- ?---------- ?------------ ?------------- 
> ?---------- ?----------- ?------------ ?------------
> 1 ? ? ?worldwide_no_pyramid ?0 ? ? ? ? ? 2 ? ? ? ? ? ? 1 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.703125 ? ? ?0.703125
> 2 ? ? ?worldwide_no_pyramid ?1 ? ? ? ? ? 4 ? ? ? ? ? ? 2 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.3515625 ? ? 0.3515625
> 3 ? ? ?worldwide_no_pyramid ?2 ? ? ? ? ? 8 ? ? ? ? ? ? 4 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.17578125 ? ?0.17578125
>
> _5) Compute a "Weird" pyramid:_
> In this test, I generate too many levels in the pyramid on purpose :
> cp worldwide_no_pyramid.gpkg worldwide_manual_weird_pyramid.gpkg
> gdaladdo worldwide_manual_weird_pyramid.gpkg 2 4 8
>
> The GPKG tile matrix is exactly the same as in 
> worldwide_default_pyramid.gpkg :
> sqlite3 -header -column worldwide_manual_weird_pyramid.gpkg ?"SELECT 
> rowid,* FROM gpkg_tile_matrix ?;"
> rowid ?table_name ? ? ? ? ? ?zoom_level ?matrix_width ?matrix_height 
> ?tile_width ?tile_height ?pixel_x_size ?pixel_y_size
> ----- ?-------------------- ?---------- ?------------ ?------------- 
> ?---------- ?----------- ?------------ ?------------
> 1 ? ? ?worldwide_no_pyramid ?1 ? ? ? ? ? 2 ? ? ? ? ? ? 1 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.703125 ? ? ?0.703125
> 2 ? ? ?worldwide_no_pyramid ?2 ? ? ? ? ? 4 ? ? ? ? ? ? 2 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.3515625 ? ? 0.3515625
> 3 ? ? ?worldwide_no_pyramid ?3 ? ? ? ? ? 8 ? ? ? ? ? ? 4 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?0.17578125 ? ?0.17578125
> 4 ? ? ?worldwide_no_pyramid ?0 ? ? ? ? ? 1 ? ? ? ? ? ? 1 ? ? ? ?256 ? 
> ? ? ? 256 ? ? ? ? ?1.40625 ? ? ? 1.40625
>
> _6) Conclusion _
> The default power-of-two factor list is computed in gdaladdo.cpp. At 
> this point, the algorithm is not aware of some GPKG limitations.
>
> I found two workarounds :
>
>   * specify explicitly all zoom levels
>   * add minsize option. The minimum size has to be twice the
>     tile_height / tile_width : -minsize 512
>
> Shouldn't we have a specific check for GPKG while computing the 
> pyramid ? For example by deriving the virtual method BuildOverviews() 
> for GPKG ?
>
> Philippe
>
> The information in this e-mail is confidential. The contents may not 
> be disclosed or used by anyone other than the addressee. Access to 
> this e-mail by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus 
> immediately and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or 
> completeness of this e-mail as it has been sent over public networks. 
> If you have any concerns over the content of this message or its 
> Accuracy or Integrity, please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated 
> virus scanning software but you should take whatever measures you deem 
> to be appropriate to ensure that this message and any attachments are 
> virus free.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240108/89411a94/attachment.htm>

From philippe.ghesquiere at airbus.com  Mon Jan  8 05:24:19 2024
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Mon, 8 Jan 2024 14:24:19 +0100
Subject: [gdal-dev] gdaladdo does not "respect" GPKG tile matrix
In-Reply-To: <0097f73a-4bee-4162-96e5-e24a11fbfa85@spatialys.com>
References: <CAAes_OFKmP9wqN+6wrMN3cHwyLmo_jSdEJjaKzukX5siFJB9bw@mail.gmail.com>
 <0097f73a-4bee-4162-96e5-e24a11fbfa85@spatialys.com>
Message-ID: <CAAes_OG9ZECOcvP0qz83L2npP8t67B6WOh2jA4-uuWm=2Kv7mg@mail.gmail.com>

Hi Even,

This is great news ! I will check it out as soon as I can.
Thanks
Philippe

On Mon, Jan 8, 2024 at 1:07?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Philippe,
>
> I no longer reproduce the below issues nor
> https://github.com/OSGeo/gdal/issues/3853 with gdaladdo without explicit
> level with GDAL master 3.9dev. This is due to improvement
> https://github.com/OSGeo/gdal/commit/d178b03e3db that reuse existing
> overview levels when they are declared by the dataset. Which is the case
> for a GeoPackage created with a tiling_scheme and with unpopulated levels.
>
> The only case now where the tiling scheme might no longer be respected is
> if the user specifies an overview level beyond the base one, or some
> "weird" factor like 3. But as it is the user that requests that, I don't
> think we should do anything for that case.
>
> Even
> Le 08/01/2024 ? 11:57, Philippe Ghesquiere via gdal-dev a ?crit :
>
> Dear all,
>  A while ago, I opened a ticket which is still opened (
> https://github.com/OSGeo/gdal/issues/3853). I recently  bumped into this
> bug with some new data, and I think I tracked the origin.
>
>
> *1) Generate a test image :*
> gdal_create -of GTIFF -co COMPRESS=LZW -a_srs epsg:4326 -a_ullr -180 90
> 180 -90 -burn 128 -outsize 2048 1024 worldwide.tif
>
> *2) Convert to GPKG :*
>  gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad worldwide.tif
> worldwide_no_pyramid.gpkg
>
> The GPKG tile matrix is as expected :
> sqlite3 -header -column worldwide_no_pyramid.gpkg "SELECT rowid,* FROM
> gpkg_tile_matrix  ;"
> rowid  table_name            zoom_level  matrix_width  matrix_height
>  tile_width  tile_height  pixel_x_size  pixel_y_size
> -----  --------------------  ----------  ------------  -------------
>  ----------  -----------  ------------  ------------
> 1      worldwide_no_pyramid  0           2             1              256
>         256          0.703125      0.703125
> 2      worldwide_no_pyramid  1           4             2              256
>         256          0.3515625     0.3515625
> 3      worldwide_no_pyramid  2           8             4              256
>         256          0.17578125    0.17578125
>
> *3) Compute a default pyramid:*
> cp worldwide_no_pyramid.gpkg worldwide_default_pyramid.gpkg
> gdaladdo worldwide_default_pyramid.gpkg
>
> The GPKG tile matrix is no longer the expected one (InspireCRS84Quad
> InspireCRS84Quad) :
> sqlite3 -header -column worldwide_default_pyramid.gpkg  "SELECT rowid,*
> FROM gpkg_tile_matrix  ;"
> rowid  table_name            zoom_level  matrix_width  matrix_height
>  tile_width  tile_height  pixel_x_size  pixel_y_size
> -----  --------------------  ----------  ------------  -------------
>  ----------  -----------  ------------  ------------
> 1      worldwide_no_pyramid  1           2             1              256
>         256          0.703125      0.703125
> 2      worldwide_no_pyramid  2           4             2              256
>         256          0.3515625     0.3515625
> 3      worldwide_no_pyramid  3           8             4              256
>         256          0.17578125    0.17578125
> 4      worldwide_no_pyramid  0           1             1              256
>         256          1.40625       1.40625
>
> *4) Compute a manual pyramid:*
> cp worldwide_no_pyramid.gpkg worldwide_manual_pyramid.gpkg
> gdaladdo worldwide_manual_pyramid.gpkg 2 4
>
> The GPKG tile matrix is still as expected (InspireCRS84Quad
> InspireCRS84Quad) :
> sqlite3 -header -column worldwide_manual_pyramid.gpkg  "SELECT rowid,*
> FROM gpkg_tile_matrix  ;"
> rowid  table_name            zoom_level  matrix_width  matrix_height
>  tile_width  tile_height  pixel_x_size  pixel_y_size
> -----  --------------------  ----------  ------------  -------------
>  ----------  -----------  ------------  ------------
> 1      worldwide_no_pyramid  0           2             1              256
>         256          0.703125      0.703125
> 2      worldwide_no_pyramid  1           4             2              256
>         256          0.3515625     0.3515625
> 3      worldwide_no_pyramid  2           8             4              256
>         256          0.17578125    0.17578125
>
> *5) Compute a "Weird" pyramid:*
> In this test, I generate too many levels in the pyramid on purpose :
> cp worldwide_no_pyramid.gpkg worldwide_manual_weird_pyramid.gpkg
> gdaladdo worldwide_manual_weird_pyramid.gpkg 2 4 8
>
> The GPKG tile matrix is exactly the same as in
> worldwide_default_pyramid.gpkg :
> sqlite3 -header -column worldwide_manual_weird_pyramid.gpkg  "SELECT
> rowid,* FROM gpkg_tile_matrix  ;"
> rowid  table_name            zoom_level  matrix_width  matrix_height
>  tile_width  tile_height  pixel_x_size  pixel_y_size
> -----  --------------------  ----------  ------------  -------------
>  ----------  -----------  ------------  ------------
> 1      worldwide_no_pyramid  1           2             1              256
>         256          0.703125      0.703125
> 2      worldwide_no_pyramid  2           4             2              256
>         256          0.3515625     0.3515625
> 3      worldwide_no_pyramid  3           8             4              256
>         256          0.17578125    0.17578125
> 4      worldwide_no_pyramid  0           1             1              256
>         256          1.40625       1.40625
>
> *6) Conclusion *
> The default power-of-two factor list is computed in gdaladdo.cpp. At this
> point, the algorithm is not aware of some GPKG limitations.
>
> I found two workarounds :
>
>    - specify explicitly all zoom levels
>    - add minsize option. The minimum size has to be twice the tile_height
>    / tile_width : -minsize 512
>
> Shouldn't we have a specific check for GPKG while computing the pyramid ?
> For example by deriving the virtual method BuildOverviews() for GPKG ?
>
> Philippe
>
> The information in this e-mail is confidential. The contents may not be
> disclosed or used by anyone other than the addressee. Access to this e-mail
> by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus immediately
> and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or completeness
> of this e-mail as it has been sent over public networks. If you have any
> concerns over the content of this message or its Accuracy or Integrity,
> please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated virus
> scanning software but you should take whatever measures you deem to be
> appropriate to ensure that this message and any attachments are virus free.
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240108/8719573f/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Jan  8 12:20:28 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 8 Jan 2024 21:20:28 +0100
Subject: [gdal-dev] GDAL 3.83 is released
Message-ID: <907abc25-d355-4133-89fe-d4b3e7b817ca@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the
release of the GDAL/OGR 3.8.3 bug fix version.

Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.8.3/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3.tar.xz
 ??? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3.tar.xz.md5
 ??? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3.tar.xz.sig

or

 ??? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3.tar.gz
 ??? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3.tar.gz.md5
 ??? https://download.osgeo.org/gdal/3.8.3/gdal-3.8.3.tar.gz.sig

or

 ??? https://download.osgeo.org/gdal/3.8.3/gdal383.zip
 ??? https://download.osgeo.org/gdal/3.8.3/gdal383.zip.md5
 ??? https://download.osgeo.org/gdal/3.8.3/gdal383.zip.sig

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Jan  9 04:13:02 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Jan 2024 13:13:02 +0100
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <PAXPR07MB77756F8EBAB51A6A4C5A484CA2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>
 <02de8899-3841-4fa5-a293-ba31fabeeda4@spatialys.com>
 <PAXPR07MB7775A2923F0BA6798DB8D931A2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9fa575fb-e3e7-48eb-a822-4f1c5b789279@spatialys.com>
 <PAXPR07MB77756F8EBAB51A6A4C5A484CA2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <29874058-684f-40d1-ab31-8d2b776f7351@spatialys.com>

Actually thinking that if your intent is to upstream the driver at some 
point, a CSV resource file would be better than a DBF one, because CSV 
is text (whereas DBF is somehow binary, or at least not directly 
editable), which makes it more appropriate for review & editing.

Le 07/01/2024 ? 22:06, Abel Pau a ?crit?:
>
> Yes, it?s just what I found now!!
>
> Thanks a lot Even! It works now!!
>
> *De:*Even Rouault <even.rouault at spatialys.com>
> *Enviado el:* diumenge, 7 de gener de 2024 22:06
> *Para:* Abel Pau <a.pau at creaf.uab.cat>; Sean Gillies 
> <sean.gillies at gmail.com>
> *CC:* gdal dev <gdal-dev at lists.osgeo.org>
> *Asunto:* Re: [gdal-dev] Where to fins my own files
>
> Le 07/01/2024 ? 21:59, Abel Pau a ?crit?:
>
>     Thanks for your answers.
>
>     When I call aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.dbf");
>
>     NULL pointer is obtained and I think I know why. When debuging
>     there are 2 FinderLocations:
>
>     The first one is ?D:\GitHub-repository\GDAL\data;? (note thar
>     there is a ?;? at the end).
>
> Is the GDAL_DATA environment variable set in your environment ? If so, 
> just remove the trailing ';' . GDAL_DATA doesn't support multiple paths
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/946b548b/attachment.htm>

From a.pau at creaf.uab.cat  Tue Jan  9 05:06:30 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Tue, 9 Jan 2024 13:06:30 +0000
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <29874058-684f-40d1-ab31-8d2b776f7351@spatialys.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>
 <02de8899-3841-4fa5-a293-ba31fabeeda4@spatialys.com>
 <PAXPR07MB7775A2923F0BA6798DB8D931A2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9fa575fb-e3e7-48eb-a822-4f1c5b789279@spatialys.com>
 <PAXPR07MB77756F8EBAB51A6A4C5A484CA2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <29874058-684f-40d1-ab31-8d2b776f7351@spatialys.com>
Message-ID: <PAXPR07MB777537CE2BD892616F785BA1A26A2@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi Even,

sure, as you need. We are used to the DBF format; our structure comprises one file for the geographic component, another for metadata, and a DBF for non-geographic attribute data. We have the capability to edit it using a dedicated editor. However, I acknowledge that it might be more beneficial for everyone not to use this format for a file that may require editing if necessary. Given that our objective is to integrate the Vector MiraMon driver (we are finalizing details and more details), we are open to making this change.

Thank you for bringing that to my attention.

By the way, we not only have the vector format I mentioned but also a raster format.

We are in the final stages of developing the vector driver, and afterward, we will start work on the raster driver. I believe the optimal approach is to submit the vector driver first. This way, we can learn from any potential mistakes in the vector part and apply the necessary corrections directly to the raster part. What are your thoughts?

Best regards,
Abel



De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dimarts, 9 de gener de 2024 13:13
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: gdal dev <gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Where to fins my own files


Actually thinking that if your intent is to upstream the driver at some point, a CSV resource file would be better than a DBF one, because CSV is text (whereas DBF is somehow binary, or at least not directly editable), which makes it more appropriate for review & editing.
Le 07/01/2024 ? 22:06, Abel Pau a ?crit :
Yes, it?s just what I found now!!
Thanks a lot Even! It works now!!

De: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Enviado el: diumenge, 7 de gener de 2024 22:06
Para: Abel Pau <a.pau at creaf.uab.cat><mailto:a.pau at creaf.uab.cat>; Sean Gillies <sean.gillies at gmail.com><mailto:sean.gillies at gmail.com>
CC: gdal dev <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Where to fins my own files



Le 07/01/2024 ? 21:59, Abel Pau a ?crit :
Thanks for your answers.

When I call aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.dbf");
NULL pointer is obtained and I think I know why. When debuging there are 2 FinderLocations:
The first one is ?D:\GitHub-repository\GDAL\data;? (note thar there is a ?;? at the end).

Is the GDAL_DATA environment variable set in your environment ? If so, just remove the trailing ';' . GDAL_DATA doesn't support multiple paths

--

http://www.spatialys.com

My software is free, but my time generally not.

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/3e0c1960/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Jan  9 05:28:52 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Jan 2024 14:28:52 +0100
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <PAXPR07MB777537CE2BD892616F785BA1A26A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CAOodmJra_6e6mQ6MZbUc-5V=Sa6KLX99SyeXk1fr=Q7VuetdkA@mail.gmail.com>
 <02de8899-3841-4fa5-a293-ba31fabeeda4@spatialys.com>
 <PAXPR07MB7775A2923F0BA6798DB8D931A2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9fa575fb-e3e7-48eb-a822-4f1c5b789279@spatialys.com>
 <PAXPR07MB77756F8EBAB51A6A4C5A484CA2642@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <29874058-684f-40d1-ab31-8d2b776f7351@spatialys.com>
 <PAXPR07MB777537CE2BD892616F785BA1A26A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <2c5cd542-4818-4d42-abce-e1f80c9029cf@spatialys.com>

> We are in the final stages of developing the vector driver, and 
> afterward, we will start work on the raster driver. I believe the 
> optimal approach is to submit the vector driver first. This way, we 
> can learn from any potential mistakes in the vector part and apply the 
> necessary corrections directly to the raster part. What are your thoughts?
>
Yes, starting with one driver first is a good idea

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/235c3268/attachment.htm>

From Vedran.Mornar at fer.hr  Tue Jan  9 07:10:50 2024
From: Vedran.Mornar at fer.hr (Vedran Mornar)
Date: Tue, 9 Jan 2024 15:10:50 +0000
Subject: [gdal-dev] How to publish a C# GDAL project to Linux?
Message-ID: <DU0PR08MB9052F5EDAE16F53C3C8B20AE966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>

Hi,

Need help on publishing a C# GDAL project to a Linux server.

The problem is described here:

https://stackoverflow.com/questions/77757959/how-to-publish-c-sharp-gdal-project-to-debian

Any help would be appreciated.

Sincerely,

Vedran


 Prof. Vedran Mornar, PhD
[cid:image001.jpg at 01DA4316.693455F0]
[cid:image002.png at 01DA4316.693455F0]
Croatian Academy of Engineering
President
https://www.hatz.hr/en
 Full professor
 Department of Applied Computing
 https://www.fer.unizg.hr/en/vedran.mornar



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/a56ac61e/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 7790 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/a56ac61e/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 10861 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/a56ac61e/attachment-0001.png>

From watson at sierracmp.com  Tue Jan  9 07:52:20 2024
From: watson at sierracmp.com (George Watson)
Date: Tue, 9 Jan 2024 08:52:20 -0700 (MST)
Subject: [gdal-dev] How to publish a C# GDAL project to Linux?
In-Reply-To: <DU0PR08MB9052F5EDAE16F53C3C8B20AE966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>
References: <DU0PR08MB9052F5EDAE16F53C3C8B20AE966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>
Message-ID: <1749589512.4024819.1704815540952@webmail-oxcs.networksolutionsemail.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/879e7c02/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 7790 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/879e7c02/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 10861 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/879e7c02/attachment-0001.png>

From runette at gmail.com  Tue Jan  9 08:20:01 2024
From: runette at gmail.com (Paul Harwood)
Date: Tue, 9 Jan 2024 16:20:01 +0000
Subject: [gdal-dev] How to publish a C# GDAL project to Linux?
In-Reply-To: <1749589512.4024819.1704815540952@webmail-oxcs.networksolutionsemail.com>
References: <DU0PR08MB9052F5EDAE16F53C3C8B20AE966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>
 <1749589512.4024819.1704815540952@webmail-oxcs.networksolutionsemail.com>
Message-ID: <CAE8nN5MfE=6-AwHPqwECob-ncM5VmD6xM6uZr9qof_NT28tx3w@mail.gmail.com>

Also responded on SO

On Tue, 9 Jan 2024 at 15:57, George Watson via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Answered on SO (no pun intended).
>
> George K. Watson
> Stuff-doer
> Maxar
>
> On 01/09/2024 8:10 AM MST Vedran Mornar via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>
>
> Hi,
>
>
>
> Need help on publishing a C# GDAL project to a Linux server.
>
>
>
> The problem is described here:
>
>
>
>
> https://stackoverflow.com/questions/77757959/how-to-publish-c-sharp-gdal-project-to-debian
>
>
>
> Any help would be appreciated.
>
>
>
> Sincerely,
>
>
> Vedran
>
>
>
>
>
>  Prof. Vedran Mornar, PhD
>
> Croatian Academy of Engineering
>
> President
>
> https://www.hatz.hr/en
>
>  Full professor
>
>  Department of Applied Computing
>
>  https://www.fer.unizg.hr/en/vedran.mornar
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/6c753432/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 7790 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/6c753432/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 10861 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/6c753432/attachment-0001.png>

From Vedran.Mornar at fer.hr  Tue Jan  9 09:25:39 2024
From: Vedran.Mornar at fer.hr (Vedran Mornar)
Date: Tue, 9 Jan 2024 17:25:39 +0000
Subject: [gdal-dev] How to publish a C# GDAL project to Linux?
In-Reply-To: <CAE8nN5MfE=6-AwHPqwECob-ncM5VmD6xM6uZr9qof_NT28tx3w@mail.gmail.com>
References: <DU0PR08MB9052F5EDAE16F53C3C8B20AE966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>
 <1749589512.4024819.1704815540952@webmail-oxcs.networksolutionsemail.com>
 <CAE8nN5MfE=6-AwHPqwECob-ncM5VmD6xM6uZr9qof_NT28tx3w@mail.gmail.com>
Message-ID: <DU0PR08MB9052D385CE8CF2D9B7371754966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>

Tnx, MaxRev solution works. Commented on SO.

Vedran

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Paul Harwood via gdal-dev
Sent: Tuesday, January 9, 2024 5:20 PM
To: George Watson <watson at sierracmp.com>
Cc: Vedran Mornar via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] How to publish a C# GDAL project to Linux?

Also responded on SO

On Tue, 9 Jan 2024 at 15:57, George Watson via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Answered on SO (no pun intended).

George K. Watson
Stuff-doer
Maxar
On 01/09/2024 8:10 AM MST Vedran Mornar via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:


Hi,

Need help on publishing a C# GDAL project to a Linux server.

The problem is described here:

https://stackoverflow.com/questions/77757959/how-to-publish-c-sharp-gdal-project-to-debian

Any help would be appreciated.

Sincerely,

Vedran


 Prof. Vedran Mornar, PhD
[cid:image001.jpg at 01DA4329.3E716570]
[cid:image002.png at 01DA4329.3E716570]
Croatian Academy of Engineering
President
https://www.hatz.hr/en
 Full professor
 Department of Applied Computing
 https://www.fer.unizg.hr/en/vedran.mornar



_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/0457068d/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 7790 bytes
Desc: image001.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/0457068d/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 10861 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/0457068d/attachment-0001.png>

From runette at gmail.com  Tue Jan  9 09:28:33 2024
From: runette at gmail.com (Paul Harwood)
Date: Tue, 9 Jan 2024 17:28:33 +0000
Subject: [gdal-dev] How to publish a C# GDAL project to Linux?
In-Reply-To: <DU0PR08MB9052D385CE8CF2D9B7371754966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>
References: <DU0PR08MB9052F5EDAE16F53C3C8B20AE966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>
 <1749589512.4024819.1704815540952@webmail-oxcs.networksolutionsemail.com>
 <CAE8nN5MfE=6-AwHPqwECob-ncM5VmD6xM6uZr9qof_NT28tx3w@mail.gmail.com>
 <DU0PR08MB9052D385CE8CF2D9B7371754966A2@DU0PR08MB9052.eurprd08.prod.outlook.com>
Message-ID: <CAE8nN5MDRGJYpBAASLDcH-tffnjc-gKaxqzyWhCG_iNUL5FiGg@mail.gmail.com>

?

Paul Harwood reacted via Gmail
<https://www.google.com/gmail/about/?utm_source=gmail-in-product&utm_medium=et&utm_campaign=emojireactionemail#app>

On Tue, 9 Jan 2024 at 17:25, Vedran Mornar <Vedran.Mornar at fer.hr> wrote:

> Tnx, MaxRev solution works. Commented on SO.
>
>
>
> Vedran
>
>
>
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> * On Behalf Of *Paul
> Harwood via gdal-dev
> *Sent:* Tuesday, January 9, 2024 5:20 PM
> *To:* George Watson <watson at sierracmp.com>
> *Cc:* Vedran Mornar via gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] How to publish a C# GDAL project to Linux?
>
>
>
> Also responded on SO
>
>
>
> On Tue, 9 Jan 2024 at 15:57, George Watson via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
> Answered on SO (no pun intended).
>
>
>
> George K. Watson
>
> Stuff-doer
>
> Maxar
>
> On 01/09/2024 8:10 AM MST Vedran Mornar via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>
>
>
>
> Hi,
>
>
>
> Need help on publishing a C# GDAL project to a Linux server.
>
>
>
> The problem is described here:
>
>
>
>
> https://stackoverflow.com/questions/77757959/how-to-publish-c-sharp-gdal-project-to-debian
>
>
>
> Any help would be appreciated.
>
>
>
> Sincerely,
>
>
> Vedran
>
>
>
>
>
>  Prof. Vedran Mornar, PhD
>
> Croatian Academy of Engineering
>
> President
>
> https://www.hatz.hr/en
>
>  Full professor
>
>  Department of Applied Computing
>
>  https://www.fer.unizg.hr/en/vedran.mornar
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: text/vnd.google.email-reaction+json
Size: 37 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/4318b373/attachment-0001.bin>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/4318b373/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.jpg
Type: image/jpeg
Size: 7790 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/4318b373/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 10861 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/4318b373/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 10861 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/4318b373/attachment-0003.png>

From fitch at astraea.io  Tue Jan  9 10:45:40 2024
From: fitch at astraea.io (Fitch, Simeon)
Date: Tue, 9 Jan 2024 13:45:40 -0500
Subject: [gdal-dev] Is source Dataset array to `GDALWarp` mutable?
Message-ID: <CAAsstvEDSfbm8jPazNGvBA7+WOKbE+-_Ge+W04aS=G7tS=j=aA@mail.gmail.com>

I have a question about the mutability of the `pahSrcDS` argument to
`GDALWarp`.

The `GDALWarp` function has the following signature:

```
GDALDatasetH GDALWarp(const char *pszDest, GDALDatasetH hDstDS, int
nSrcCount,
                      GDALDatasetH *pahSrcDS,
                      const GDALWarpAppOptions *psOptionsIn, int
*pbUsageError)
```
Source:
https://github.com/OSGeo/gdal/blob/895e9fbd63b2aa22471f4f8c69efd5ba4e700e9c/apps/gdalwarp_lib.cpp#L1379-L1381

I was curious to see that `pahSrcDS` was not `const GDALDatasetH *pahSrcDS`
or `const GDALDatasetH * const pahSrcDS`.

What mutability and ownership conclusions should I draw from it (if any)?

* Might the `GDALWarp` mutate the array and/or the pointed Datasets?
* Is it correct to assume the caller maintains ownership of the elements of
`pahSrcDS`?

Thanks, and kind regards,

Simeon

-- 
Simeon Fitch
Co-founder & CTO
Astraea, Inc.

-- 
The content of this email is intended for the person or entity to which it 
is addressed only. This email may contain confidential information. If you 
are not the person to whom this message is addressed, be aware that any 
use, reproduction, or distribution of this message is strictly prohibited. 
If you received this in error, please contact the sender and immediately 
delete this email and any attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/68d3a580/attachment.htm>

From even.rouault at spatialys.com  Tue Jan  9 10:53:32 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Jan 2024 19:53:32 +0100
Subject: [gdal-dev] Is source Dataset array to `GDALWarp` mutable?
In-Reply-To: <CAAsstvEDSfbm8jPazNGvBA7+WOKbE+-_Ge+W04aS=G7tS=j=aA@mail.gmail.com>
References: <CAAsstvEDSfbm8jPazNGvBA7+WOKbE+-_Ge+W04aS=G7tS=j=aA@mail.gmail.com>
Message-ID: <5c70ae30-7a76-43ae-bde0-079ff9e7427f@spatialys.com>


Le 09/01/2024 ? 19:45, Fitch, Simeon via gdal-dev a ?crit?:
> I have a question about the mutability of the `pahSrcDS` argument to 
> `GDALWarp`.
>
> The `GDALWarp` function has the following signature:
>
> ```
> GDALDatasetH GDALWarp(const char *pszDest, GDALDatasetH hDstDS, int 
> nSrcCount,
> ? ? ? ? ? ? ? ? ? ? ? GDALDatasetH *pahSrcDS,
> ? ? ? ? ? ? ? ? ? ? ? const GDALWarpAppOptions *psOptionsIn, int 
> *pbUsageError)
> ```
> Source: 
> https://github.com/OSGeo/gdal/blob/895e9fbd63b2aa22471f4f8c69efd5ba4e700e9c/apps/gdalwarp_lib.cpp#L1379-L1381
>
> I was curious to see that `pahSrcDS` was not `const GDALDatasetH 
> *pahSrcDS` or `const GDALDatasetH * const pahSrcDS`.
>
> What mutability and ownership conclusions should I draw from it (if any)?
>
> * Might the `GDALWarp` mutate the array and/or the pointed Datasets?
No. The const correctness could have indeed be done better (although a 
reason for that is that in C, a? "T**" is not implicitly cast as "const 
T* const*", contrary to C++)
> * Is it correct to assume the caller maintains ownership of the 
> elements of `pahSrcDS`?

Yes

Note that if the output format is VRT, then the return VRT dataset will 
reference the input dataset handle (a single one is allowed in that 
case). Hence, in that particular case (works also in the general case), 
you should close first the output dataset and then source dataset(s), as 
done by gdalwarp_bin.cpp

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/569a40d6/attachment.htm>

From even.rouault at spatialys.com  Tue Jan  9 11:25:59 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 9 Jan 2024 20:25:59 +0100
Subject: [gdal-dev] Is source Dataset array to `GDALWarp` mutable?
In-Reply-To: <5c70ae30-7a76-43ae-bde0-079ff9e7427f@spatialys.com>
References: <CAAsstvEDSfbm8jPazNGvBA7+WOKbE+-_Ge+W04aS=G7tS=j=aA@mail.gmail.com>
 <5c70ae30-7a76-43ae-bde0-079ff9e7427f@spatialys.com>
Message-ID: <b7c6a2d3-1581-415c-a2dc-0674656f1527@spatialys.com>


https://github.com/OSGeo/gdal/pull/9045 will clarify it for posterity

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240109/4f3ee065/attachment.htm>

From fitch at astraea.io  Wed Jan 10 06:58:01 2024
From: fitch at astraea.io (Fitch, Simeon)
Date: Wed, 10 Jan 2024 09:58:01 -0500
Subject: [gdal-dev] Is source Dataset array to `GDALWarp` mutable?
In-Reply-To: <b7c6a2d3-1581-415c-a2dc-0674656f1527@spatialys.com>
References: <CAAsstvEDSfbm8jPazNGvBA7+WOKbE+-_Ge+W04aS=G7tS=j=aA@mail.gmail.com>
 <5c70ae30-7a76-43ae-bde0-079ff9e7427f@spatialys.com>
 <b7c6a2d3-1581-415c-a2dc-0674656f1527@spatialys.com>
Message-ID: <CAAsstvE69VKPRLmqma9mf_P9kRoFyEKaXBPYzsMGbS9JvhQOuw@mail.gmail.com>

Even,

Thanks so much for the helpful information. I know the updated docs (and
tests!!!) will help others as well.

Simepno

On Tue, Jan 9, 2024 at 2:26?PM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

>
> https://github.com/OSGeo/gdal/pull/9045 will clarify it for posterity
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-- 
The content of this email is intended for the person or entity to which it 
is addressed only. This email may contain confidential information. If you 
are not the person to whom this message is addressed, be aware that any 
use, reproduction, or distribution of this message is strictly prohibited. 
If you received this in error, please contact the sender and immediately 
delete this email and any attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/bd5336f1/attachment.htm>

From jesse.r.meyer at nasa.gov  Wed Jan 10 09:44:26 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 10 Jan 2024 17:44:26 +0000
Subject: [gdal-dev] Lack of srs importFromESRI integer function
Message-ID: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>

Hi,

Our team has moved away from providing geographic / projected CRS codes as strings and prefer using integers where possible.  However, in the C++ API, I only see an integer based importFromEPSG function, which doesn?t appear to accept ESRI codes (crs not found error message).  We?re targeting an Albers projection which is distinguished by an ESRI integer.

Curiously, the proj database doesn?t seem to make this distinction ? the table column is simply ?code? and I can find the projection row manually, alongside EPSG projections.

Can such a function be provided by the API (if it doesn?t already exist ? I couldn?t find it ? there are no integer overloads of importFromESRI)?

Please advise -- thanks,
Jesse
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/1eb106e5/attachment.htm>

From even.rouault at spatialys.com  Wed Jan 10 09:48:37 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Jan 2024 18:48:37 +0100
Subject: [gdal-dev] Lack of srs importFromESRI integer function
In-Reply-To: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>
References: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>
Message-ID: <99fa1115-571b-4f4d-b8b9-f3b8cd475880@spatialys.com>

Jesse,

You can use SetFromUserInput("ESRI:XXXX")? . ImportFromEPSG(code) more 
or less does SetFromUserInput("EPSG:{code}")

Even

Le 10/01/2024 ? 18:44, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev a ?crit?:
>
> Hi,
>
> Our team has moved away from providing geographic / projected CRS 
> codes as strings and prefer using integers where possible.? However, 
> in the C++ API, I only see an integer based importFromEPSG function, 
> which doesn?t appear to accept ESRI codes (crs not found error 
> message).? We?re targeting an Albers projection which is distinguished 
> by an ESRI integer.
>
> Curiously, the proj database doesn?t seem to make this distinction ? 
> the table column is simply ?code? and I can find the projection row 
> manually, alongside EPSG projections.
>
> Can such a function be provided by the API (if it doesn?t already 
> exist ? I couldn?t find it ? there are no integer overloads of 
> importFromESRI)?
>
> Please advise -- thanks,
>
> Jesse
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/2e3029db/attachment.htm>

From jesse.r.meyer at nasa.gov  Wed Jan 10 09:52:20 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 10 Jan 2024 17:52:20 +0000
Subject: [gdal-dev] [EXTERNAL] Re: Lack of srs importFromESRI integer
 function
In-Reply-To: <99fa1115-571b-4f4d-b8b9-f3b8cd475880@spatialys.com>
References: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>
 <99fa1115-571b-4f4d-b8b9-f3b8cd475880@spatialys.com>
Message-ID: <A2BF824D-FF61-47B6-AB50-B9FA150DF032@ndc.nasa.gov>

Thanks Even, we?ll try that.

Are there any known integer values that ESRI and EPSG conflate?  If not, it would be convenient to simply pass in an integer to a single API function and be done with it.

Jesse

From: Even Rouault <even.rouault at spatialys.com>
Date: Wednesday, January 10, 2024 at 12:48?PM
To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: [gdal-dev] Lack of srs importFromESRI integer function

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.



Jesse,

You can use SetFromUserInput("ESRI:XXXX")  . ImportFromEPSG(code) more or less does SetFromUserInput("EPSG:{code}")

Even
Le 10/01/2024 ? 18:44, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev a ?crit :
Hi,

Our team has moved away from providing geographic / projected CRS codes as strings and prefer using integers where possible.  However, in the C++ API, I only see an integer based importFromEPSG function, which doesn?t appear to accept ESRI codes (crs not found error message).  We?re targeting an Albers projection which is distinguished by an ESRI integer.

Curiously, the proj database doesn?t seem to make this distinction ? the table column is simply ?code? and I can find the projection row manually, alongside EPSG projections.

Can such a function be provided by the API (if it doesn?t already exist ? I couldn?t find it ? there are no integer overloads of importFromESRI)?

Please advise -- thanks,
Jesse



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/65dac8d6/attachment-0001.htm>

From even.rouault at spatialys.com  Wed Jan 10 10:01:01 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Jan 2024 19:01:01 +0100
Subject: [gdal-dev] [EXTERNAL] Re: Lack of srs importFromESRI integer
 function
In-Reply-To: <A2BF824D-FF61-47B6-AB50-B9FA150DF032@ndc.nasa.gov>
References: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>
 <99fa1115-571b-4f4d-b8b9-f3b8cd475880@spatialys.com>
 <A2BF824D-FF61-47B6-AB50-B9FA150DF032@ndc.nasa.gov>
Message-ID: <b1899d8f-c470-450a-baf9-96549a317439@spatialys.com>


Le 10/01/2024 ? 18:52, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] a ?crit?:
>
> Thanks Even, we?ll try that.
>
> Are there any known integer values that ESRI and EPSG conflate?? If 
> not, it would be convenient to simply pass in an integer to a single 
> API function and be done with it.
>
I believe not. Codes in the [1,32767] range should lead to equivalent 
definitions under both authorities. But when they are really the same, 
to save space and confusion to users, they are not imported under the 
ESRI authority and are only available under the EPSG ones. So codes in 
the [1,32767] under the ESRI authorities are basically for CRS names 
that are slightly different spelled by ESRI (but otherwise with a 
definition compatible of the EPSG one). There are also very ancient 
deprecated CRS that were imported from EPSG, but were deprecated by EPSG 
so long ago that they are not in the EPSG database anymore (like 
https://spatialreference.org/ref/esri/31491/).

But there's no only EPSG and ESRI in life :-) The IAU authority for 
example uses numeric code in the ranges of what could be used by EPSG or 
ESRI.

So it is really the tuple (authority_name,code) that conveys a primary key.

> Jesse
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> *Date: *Wednesday, January 10, 2024 at 12:48?PM
> *To: *"Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS 
> INC]" <jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org" 
> <gdal-dev at lists.osgeo.org>
> *Subject: *[EXTERNAL] Re: [gdal-dev] Lack of srs importFromESRI 
> integer function
>
> *CAUTION:*This email originated from outside of NASA.? Please take 
> care when clicking links or opening attachments. Use the "Report 
> Message" button to report suspicious messages to the NASA?SOC.
>
>
>
> Jesse,
>
> You can use SetFromUserInput("ESRI:XXXX")? . ImportFromEPSG(code) more 
> or less does SetFromUserInput("EPSG:{code}")
>
> Even
>
> Le 10/01/2024 ? 18:44, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS 
> AND APPLICATIONS INC] via gdal-dev a ?crit?:
>
>     Hi,
>
>     Our team has moved away from providing geographic / projected CRS
>     codes as strings and prefer using integers where possible.?
>     However, in the C++ API, I only see an integer based
>     importFromEPSG function, which doesn?t appear to accept ESRI codes
>     (crs not found error message).? We?re targeting an Albers
>     projection which is distinguished by an ESRI integer.
>
>     Curiously, the proj database doesn?t seem to make this distinction
>     ? the table column is simply ?code? and I can find the projection
>     row manually, alongside EPSG projections.
>
>     Can such a function be provided by the API (if it doesn?t already
>     exist ? I couldn?t find it ? there are no integer overloads of
>     importFromESRI)?
>
>     Please advise -- thanks,
>
>     Jesse
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/7e4bb288/attachment.htm>

From jesse.r.meyer at nasa.gov  Wed Jan 10 10:06:43 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 10 Jan 2024 18:06:43 +0000
Subject: [gdal-dev] [EXTERNAL] Re: Lack of srs importFromESRI integer
 function
In-Reply-To: <b1899d8f-c470-450a-baf9-96549a317439@spatialys.com>
References: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>
 <99fa1115-571b-4f4d-b8b9-f3b8cd475880@spatialys.com>
 <A2BF824D-FF61-47B6-AB50-B9FA150DF032@ndc.nasa.gov>
 <b1899d8f-c470-450a-baf9-96549a317439@spatialys.com>
Message-ID: <7ABFF7BC-0023-4DAF-8FF6-9B0AE19342DF@ndc.nasa.gov>

Thanks for the helpful background, Even.

Jesse

From: Even Rouault <even.rouault at spatialys.com>
Date: Wednesday, January 10, 2024 at 1:01?PM
To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [EXTERNAL] Re: [gdal-dev] Lack of srs importFromESRI integer function

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.




Le 10/01/2024 ? 18:52, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] a ?crit :
Thanks Even, we?ll try that.

Are there any known integer values that ESRI and EPSG conflate?  If not, it would be convenient to simply pass in an integer to a single API function and be done with it.

I believe not. Codes in the [1,32767] range should lead to equivalent definitions under both authorities. But when they are really the same, to save space and confusion to users, they are not imported under the ESRI authority and are only available under the EPSG ones. So codes in the [1,32767] under the ESRI authorities are basically for CRS names that are slightly different spelled by ESRI (but otherwise with a definition compatible of the EPSG one). There are also very ancient deprecated CRS that were imported from EPSG, but were deprecated by EPSG so long ago that they are not in the EPSG database anymore (like https://spatialreference.org/ref/esri/31491/).

But there's no only EPSG and ESRI in life :-) The IAU authority for example uses numeric code in the ranges of what could be used by EPSG or ESRI.

So it is really the tuple (authority_name,code) that conveys a primary key.

Jesse

From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Date: Wednesday, January 10, 2024 at 12:48?PM
To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov><mailto:jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org"<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: [gdal-dev] Lack of srs importFromESRI integer function

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.




Jesse,

You can use SetFromUserInput("ESRI:XXXX")  . ImportFromEPSG(code) more or less does SetFromUserInput("EPSG:{code}")

Even
Le 10/01/2024 ? 18:44, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev a ?crit :
Hi,

Our team has moved away from providing geographic / projected CRS codes as strings and prefer using integers where possible.  However, in the C++ API, I only see an integer based importFromEPSG function, which doesn?t appear to accept ESRI codes (crs not found error message).  We?re targeting an Albers projection which is distinguished by an ESRI integer.

Curiously, the proj database doesn?t seem to make this distinction ? the table column is simply ?code? and I can find the projection row manually, alongside EPSG projections.

Can such a function be provided by the API (if it doesn?t already exist ? I couldn?t find it ? there are no integer overloads of importFromESRI)?

Please advise -- thanks,
Jesse




_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/2e1be34e/attachment-0001.htm>

From j1 at jimenezshaw.com  Wed Jan 10 10:54:47 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 10 Jan 2024 19:54:47 +0100
Subject: [gdal-dev] [EXTERNAL] Re: Lack of srs importFromESRI integer
 function
In-Reply-To: <b1899d8f-c470-450a-baf9-96549a317439@spatialys.com>
References: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>
 <99fa1115-571b-4f4d-b8b9-f3b8cd475880@spatialys.com>
 <A2BF824D-FF61-47B6-AB50-B9FA150DF032@ndc.nasa.gov>
 <b1899d8f-c470-450a-baf9-96549a317439@spatialys.com>
Message-ID: <CADRrdKtban2bk=HPN_9haEopNpcw21gmiETrs-P7ju=jVxRDhg@mail.gmail.com>

This is the discussion I have with my colleagues every time (but with
EPSG). The wanted to use an integer, and I ask them again and again to use
a better notation like "EPSG:{code}". The method that Even mentions,
SetFromUserInput, works with "EPSG:code", with "ESRI:code", with a WKT,
with a PROJJSON, etc. It makes the management of the CRS much easier. When
you need something more complicated than an ESRI code, if your API is only
ready for an integer value... you have a lot of things to refactor (months
of work, I can tell you).

Technically ESRI and EPSG there are overlapping. As you can see in this
link there are some non-deprecated ESRI codes below 33000:
https://crs-explorer.proj.org/?ignoreWorld=false&allowDeprecated=false&authorities=ESRI&activeTypes=PROJECTED_CRS,GEOGRAPHIC_2D_CRS,GEOGRAPHIC_3D_CRS,GEOCENTRIC_CRS,GEODETIC_CRS,VERTICAL_CRS,COMPOUND_CRS&map=osm

And many more if you "Allow deprecated".

On Wed, 10 Jan 2024 at 19:01, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

>
> Le 10/01/2024 ? 18:52, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND
> APPLICATIONS INC] a ?crit :
>
> Thanks Even, we?ll try that.
>
>
>
> Are there any known integer values that ESRI and EPSG conflate?  If not,
> it would be convenient to simply pass in an integer to a single API
> function and be done with it.
>
> I believe not. Codes in the [1,32767] range should lead to equivalent
> definitions under both authorities. But when they are really the same, to
> save space and confusion to users, they are not imported under the ESRI
> authority and are only available under the EPSG ones. So codes in the
> [1,32767] under the ESRI authorities are basically for CRS names that are
> slightly different spelled by ESRI (but otherwise with a definition
> compatible of the EPSG one). There are also very ancient deprecated CRS
> that were imported from EPSG, but were deprecated by EPSG so long ago that
> they are not in the EPSG database anymore (like
> https://spatialreference.org/ref/esri/31491/).
>
> But there's no only EPSG and ESRI in life :-) The IAU authority for
> example uses numeric code in the ranges of what could be used by EPSG or
> ESRI.
>
> So it is really the tuple (authority_name,code) that conveys a primary key.
>
>
>
> Jesse
>
>
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> <even.rouault at spatialys.com>
> *Date: *Wednesday, January 10, 2024 at 12:48?PM
> *To: *"Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS
> INC]" <jesse.r.meyer at nasa.gov> <jesse.r.meyer at nasa.gov>,
> "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> <gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org>
> *Subject: *[EXTERNAL] Re: [gdal-dev] Lack of srs importFromESRI integer
> function
>
>
>
> *CAUTION:* This email originated from outside of NASA.  Please take care
> when clicking links or opening attachments.  Use the "Report Message"
> button to report suspicious messages to the NASA SOC.
>
>
>
> Jesse,
>
> You can use SetFromUserInput("ESRI:XXXX")  . ImportFromEPSG(code) more or
> less does SetFromUserInput("EPSG:{code}")
>
> Even
>
> Le 10/01/2024 ? 18:44, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND
> APPLICATIONS INC] via gdal-dev a ?crit :
>
> Hi,
>
>
>
> Our team has moved away from providing geographic / projected CRS codes as
> strings and prefer using integers where possible.  However, in the C++ API,
> I only see an integer based importFromEPSG function, which doesn?t appear
> to accept ESRI codes (crs not found error message).  We?re targeting an
> Albers projection which is distinguished by an ESRI integer.
>
>
>
> Curiously, the proj database doesn?t seem to make this distinction ? the
> table column is simply ?code? and I can find the projection row manually,
> alongside EPSG projections.
>
>
>
> Can such a function be provided by the API (if it doesn?t already exist ?
> I couldn?t find it ? there are no integer overloads of importFromESRI)?
>
>
>
> Please advise -- thanks,
>
> Jesse
>
>
>
> _______________________________________________
>
> gdal-dev mailing list
>
> gdal-dev at lists.osgeo.org
>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
>
> http://www.spatialys.com
>
> My software is free, but my time generally not.
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/53952fea/attachment.htm>

From jesse.r.meyer at nasa.gov  Wed Jan 10 11:46:17 2024
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 10 Jan 2024 19:46:17 +0000
Subject: [gdal-dev] [EXTERNAL] Re: Lack of srs importFromESRI integer
 function
In-Reply-To: <CADRrdKtban2bk=HPN_9haEopNpcw21gmiETrs-P7ju=jVxRDhg@mail.gmail.com>
References: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>
 <99fa1115-571b-4f4d-b8b9-f3b8cd475880@spatialys.com>
 <A2BF824D-FF61-47B6-AB50-B9FA150DF032@ndc.nasa.gov>
 <b1899d8f-c470-450a-baf9-96549a317439@spatialys.com>
 <CADRrdKtban2bk=HPN_9haEopNpcw21gmiETrs-P7ju=jVxRDhg@mail.gmail.com>
Message-ID: <4B865371-EF3F-43EA-8E1C-753161E14840@ndc.nasa.gov>

To be clear, I wasn?t advocating for less functionality.  I wanted more!  We know what our constraints are, and we?ve had significant issues in the past with slightly different projection related strings producing surprisingly different outputs.  Keying off a single value simplifies a tremendous amount for us, with a slight loss in generality and increase in error modes.

For now, the logic resembles:
Crs_string = ?EPSG:{crs_code}?
If crs_code > 32767:
    Crs_string = ?ESRI:{crs_code}?

SetFromUserInput(crs_string)

The lack of such a function implied that there were overloaded values between the authorities (and perhaps, there were more than 2).

Jesse

From: Javier Jimenez Shaw <j1 at jimenezshaw.com>
Date: Wednesday, January 10, 2024 at 1:55?PM
To: Even Rouault <even.rouault at spatialys.com>
Cc: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] [EXTERNAL] Re: Lack of srs importFromESRI integer function

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


This is the discussion I have with my colleagues every time (but with EPSG). The wanted to use an integer, and I ask them again and again to use a better notation like "EPSG:{code}". The method that Even mentions, SetFromUserInput, works with "EPSG:code", with "ESRI:code", with a WKT, with a PROJJSON, etc. It makes the management of the CRS much easier. When you need something more complicated than an ESRI code, if your API is only ready for an integer value... you have a lot of things to refactor (months of work, I can tell you).

Technically ESRI and EPSG there are overlapping. As you can see in this link there are some non-deprecated ESRI codes below 33000:
https://crs-explorer.proj.org/?ignoreWorld=false&allowDeprecated=false&authorities=ESRI&activeTypes=PROJECTED_CRS,GEOGRAPHIC_2D_CRS,GEOGRAPHIC_3D_CRS,GEOCENTRIC_CRS,GEODETIC_CRS,VERTICAL_CRS,COMPOUND_CRS&map=osm

And many more if you "Allow deprecated".

On Wed, 10 Jan 2024 at 19:01, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:


Le 10/01/2024 ? 18:52, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] a ?crit :
Thanks Even, we?ll try that.

Are there any known integer values that ESRI and EPSG conflate?  If not, it would be convenient to simply pass in an integer to a single API function and be done with it.

I believe not. Codes in the [1,32767] range should lead to equivalent definitions under both authorities. But when they are really the same, to save space and confusion to users, they are not imported under the ESRI authority and are only available under the EPSG ones. So codes in the [1,32767] under the ESRI authorities are basically for CRS names that are slightly different spelled by ESRI (but otherwise with a definition compatible of the EPSG one). There are also very ancient deprecated CRS that were imported from EPSG, but were deprecated by EPSG so long ago that they are not in the EPSG database anymore (like https://spatialreference.org/ref/esri/31491/).

But there's no only EPSG and ESRI in life :-) The IAU authority for example uses numeric code in the ranges of what could be used by EPSG or ESRI.

So it is really the tuple (authority_name,code) that conveys a primary key.

Jesse

From: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>
Date: Wednesday, January 10, 2024 at 12:48?PM
To: "Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC]" <jesse.r.meyer at nasa.gov><mailto:jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org"<mailto:gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org><mailto:gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: [gdal-dev] Lack of srs importFromESRI integer function

CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


Jesse,

You can use SetFromUserInput("ESRI:XXXX")  . ImportFromEPSG(code) more or less does SetFromUserInput("EPSG:{code}")

Even
Le 10/01/2024 ? 18:44, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev a ?crit :
Hi,

Our team has moved away from providing geographic / projected CRS codes as strings and prefer using integers where possible.  However, in the C++ API, I only see an integer based importFromEPSG function, which doesn?t appear to accept ESRI codes (crs not found error message).  We?re targeting an Albers projection which is distinguished by an ESRI integer.

Curiously, the proj database doesn?t seem to make this distinction ? the table column is simply ?code? and I can find the projection row manually, alongside EPSG projections.

Can such a function be provided by the API (if it doesn?t already exist ? I couldn?t find it ? there are no integer overloads of importFromESRI)?

Please advise -- thanks,
Jesse


_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/16a4730d/attachment-0001.htm>

From ni_hao88 at hotmail.com  Wed Jan 10 14:19:32 2024
From: ni_hao88 at hotmail.com (ni hao)
Date: Wed, 10 Jan 2024 22:19:32 +0000
Subject: [gdal-dev] gdal_merge -of format
Message-ID: <DM5PR02MB3862C4BB3B18718F54AF64BEF1692@DM5PR02MB3862.namprd02.prod.outlook.com>

Hi list,



question about: gdal_merge -of format

  besides GTiff, what other formats can I specify? May I specify USGS DEM format?





Thank you,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240110/0f0b268a/attachment.htm>

From andrew at aitchison.me.uk  Thu Jan 11 02:00:04 2024
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 11 Jan 2024 10:00:04 +0000 (GMT)
Subject: [gdal-dev] gdal_merge -of format
In-Reply-To: <DM5PR02MB3862C4BB3B18718F54AF64BEF1692@DM5PR02MB3862.namprd02.prod.outlook.com>
References: <DM5PR02MB3862C4BB3B18718F54AF64BEF1692@DM5PR02MB3862.namprd02.prod.outlook.com>
Message-ID: <19dee09a-5c9f-68e2-b787-1e8c213f610b@aitchison.me.uk>

On Wed, 10 Jan 2024, ni hao via gdal-dev wrote:

> Hi list,
>
>
>
> question about: gdal_merge -of format
>
>  besides GTiff, what other formats can I specify? May I specify USGS DEM format?

Look in the output of
 	gdalinfo --formats
any raster format with rw for read-write can be used.

# gdalinfo --formats | egrep USGSDEM
   USGSDEM -raster- (rwv): USGS Optional ASCII DEM (and CDED)

- so, yes you can use USGSDEM.

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From mandeepsinghkalra at gmail.com  Fri Jan 12 02:53:50 2024
From: mandeepsinghkalra at gmail.com (Mandeep Singh)
Date: Fri, 12 Jan 2024 16:23:50 +0530
Subject: [gdal-dev] Issue with OGR Brush Styling for PDF Generation
Message-ID: <CAAho42amopZG4JT_hu0ykK8otBBr+JX6a4=67AntGYWa5NvMcA@mail.gmail.com>

Hi,

I am facing challenges in using the OGR Brush symbols for PDF generation
and only the default styling seems to be working. It seems the
id:"ogr-brush-n" is not considered.

[image: image.png]


GDAL version is  3.2.2


Can anyone provide any feedback ?


Regards
Mandeep
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240112/40f46cf2/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 58178 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240112/40f46cf2/attachment-0001.png>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jan 12 05:39:22 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 12 Jan 2024 13:39:22 +0000
Subject: [gdal-dev] Nearblack and the datatype of the output
Message-ID: <DB9PR09MB68878CD80B259876FA931759FD6F2@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Do I understand right that the raster drivers like the GTiff driver do not have a creation option for the datatype? Most utilities like gdal_translate, gdalwarp, and gdal_create have the -ot option, but there are couple of utilities that don't even it might make sense. For example nearblack can only create float32 output from float32 input and user cannot do anything for that.

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240112/94192e80/attachment.htm>

From even.rouault at spatialys.com  Fri Jan 12 08:05:14 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Jan 2024 17:05:14 +0100
Subject: [gdal-dev] Nearblack and the datatype of the output
In-Reply-To: <DB9PR09MB68878CD80B259876FA931759FD6F2@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <DB9PR09MB68878CD80B259876FA931759FD6F2@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <818cadb6-7274-4bc6-aef8-ff95d12f94d7@spatialys.com>

Jukka,

nearblack is quite a special case. The doc says "The processing is all 
done in 8bit (Bytes)." , so it only properly works on Byte datasets.. If 
you provide any other data type, the values will be clamped to [0,255]. 
And when creating an output file, it will always be Byte.

The data type is not technically a "creation option" (in the sense of 
the -co option). It is an argument of the GDALDriver::Create() function 
(which takes creation options as well)

Even

Le 12/01/2024 ? 14:39, Rahkonen Jukka via gdal-dev a ?crit?:
>
> Hi,
>
> Do I understand right that the raster drivers like the GTiff driver do 
> not have a creation option for the datatype? Most utilities like 
> gdal_translate, gdalwarp, and gdal_create have the -ot option, but 
> there are couple of utilities that don?t even it might make sense. For 
> example nearblack can only create float32 output from float32 input 
> and user cannot do anything for that.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240112/86b9ffa7/attachment.htm>

From even.rouault at spatialys.com  Fri Jan 12 08:08:33 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Jan 2024 17:08:33 +0100
Subject: [gdal-dev] Issue with OGR Brush Styling for PDF Generation
In-Reply-To: <CAAho42amopZG4JT_hu0ykK8otBBr+JX6a4=67AntGYWa5NvMcA@mail.gmail.com>
References: <CAAho42amopZG4JT_hu0ykK8otBBr+JX6a4=67AntGYWa5NvMcA@mail.gmail.com>
Message-ID: <23955e74-9f5a-458e-baab-ec2468452947@spatialys.com>

Hi,

as documented in 
https://gdal.org/drivers/vector/pdf.html#feature-style-support, styling 
support in the PDF driver is very limited, and doesn't include the brush 
type. For things not supported, you'd better use a more advanced 
rendering engine that can output PDF, like QGIS or MapServer

Even

Le 12/01/2024 ? 11:53, Mandeep Singh via gdal-dev a ?crit?:
> Hi,
>
> I am facing challenges in using the OGR Brush symbols for PDF 
> generation and only the default styling seems to be working. It seems 
> the id:"ogr-brush-n" is not considered.
>
> image.png
>
>
> GDAL version is? 3.2.2
>
>
> Can anyone provide any feedback ?
>
>
> Regards
> Mandeep
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240112/5aa2c65a/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 58178 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240112/5aa2c65a/attachment-0001.png>

From knudsen.thomas at gmail.com  Fri Jan 12 08:52:00 2024
From: knudsen.thomas at gmail.com (Thomas Knudsen)
Date: Fri, 12 Jan 2024 17:52:00 +0100
Subject: [gdal-dev] [EXTERNAL] Re: Lack of srs importFromESRI integer
 function
In-Reply-To: <4B865371-EF3F-43EA-8E1C-753161E14840@ndc.nasa.gov>
References: <3CA6C436-8EE7-40DE-9067-7E4F009B16BC@ndc.nasa.gov>
 <99fa1115-571b-4f4d-b8b9-f3b8cd475880@spatialys.com>
 <A2BF824D-FF61-47B6-AB50-B9FA150DF032@ndc.nasa.gov>
 <b1899d8f-c470-450a-baf9-96549a317439@spatialys.com>
 <CADRrdKtban2bk=HPN_9haEopNpcw21gmiETrs-P7ju=jVxRDhg@mail.gmail.com>
 <4B865371-EF3F-43EA-8E1C-753161E14840@ndc.nasa.gov>
Message-ID: <CAH0YoEN-sreJCqzEUY_7BvxoKqVSXeSYAegcStPFCYJt8ADaoA@mail.gmail.com>

In the DK registry we used descriptive names, rather than numbers to refer
to the transformations taking legacy systems to ETRS89. Essentially these
transformations amounted to CRS definitions. Is it safe to assume a
"crs_code" is strictly numeric?

Den ons. 10. jan. 2024 kl. 20.46 skrev Meyer, Jesse R. (GSFC-618.0)[SCIENCE
SYSTEMS AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org>:

> To be clear, I wasn?t advocating for less functionality.  I wanted more!
> We know what our constraints are, and we?ve had significant issues in the
> past with slightly different projection related strings producing
> surprisingly different outputs.  Keying off a single value simplifies a
> tremendous amount for us, with a slight loss in generality and increase in
> error modes.
>
>
>
> For now, the logic resembles:
>
> Crs_string = ?EPSG:{crs_code}?
>
> If crs_code > 32767:
>
>     Crs_string = ?ESRI:{crs_code}?
>
>
>
> SetFromUserInput(crs_string)
>
>
>
> The lack of such a function implied that there were overloaded values
> between the authorities (and perhaps, there were more than 2).
>
>
>
> Jesse
>
>
>
> *From: *Javier Jimenez Shaw <j1 at jimenezshaw.com>
> *Date: *Wednesday, January 10, 2024 at 1:55?PM
> *To: *Even Rouault <even.rouault at spatialys.com>
> *Cc: *"Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS
> INC]" <jesse.r.meyer at nasa.gov>, "gdal-dev at lists.osgeo.org" <
> gdal-dev at lists.osgeo.org>
> *Subject: *Re: [gdal-dev] [EXTERNAL] Re: Lack of srs importFromESRI
> integer function
>
>
>
> *CAUTION:* This email originated from outside of NASA.  Please take care
> when clicking links or opening attachments.  Use the "Report Message"
> button to report suspicious messages to the NASA SOC.
>
>
>
> This is the discussion I have with my colleagues every time (but with
> EPSG). The wanted to use an integer, and I ask them again and again to use
> a better notation like "EPSG:{code}". The method that Even mentions,
> SetFromUserInput, works with "EPSG:code", with "ESRI:code", with a WKT,
> with a PROJJSON, etc. It makes the management of the CRS much easier. When
> you need something more complicated than an ESRI code, if your API is only
> ready for an integer value... you have a lot of things to refactor (months
> of work, I can tell you).
>
>
>
> Technically ESRI and EPSG there are overlapping. As you can see in this
> link there are some non-deprecated ESRI codes below 33000:
>
>
> https://crs-explorer.proj.org/?ignoreWorld=false&allowDeprecated=false&authorities=ESRI&activeTypes=PROJECTED_CRS,GEOGRAPHIC_2D_CRS,GEOGRAPHIC_3D_CRS,GEOCENTRIC_CRS,GEODETIC_CRS,VERTICAL_CRS,COMPOUND_CRS&map=osm
>
>
>
> And many more if you "Allow deprecated".
>
>
>
> On Wed, 10 Jan 2024 at 19:01, Even Rouault via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>
>
> Le 10/01/2024 ? 18:52, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND
> APPLICATIONS INC] a ?crit :
>
> Thanks Even, we?ll try that.
>
>
>
> Are there any known integer values that ESRI and EPSG conflate?  If not,
> it would be convenient to simply pass in an integer to a single API
> function and be done with it.
>
> I believe not. Codes in the [1,32767] range should lead to equivalent
> definitions under both authorities. But when they are really the same, to
> save space and confusion to users, they are not imported under the ESRI
> authority and are only available under the EPSG ones. So codes in the
> [1,32767] under the ESRI authorities are basically for CRS names that are
> slightly different spelled by ESRI (but otherwise with a definition
> compatible of the EPSG one). There are also very ancient deprecated CRS
> that were imported from EPSG, but were deprecated by EPSG so long ago that
> they are not in the EPSG database anymore (like
> https://spatialreference.org/ref/esri/31491/).
>
> But there's no only EPSG and ESRI in life :-) The IAU authority for
> example uses numeric code in the ranges of what could be used by EPSG or
> ESRI.
>
> So it is really the tuple (authority_name,code) that conveys a primary key.
>
>
>
> Jesse
>
>
>
> *From: *Even Rouault <even.rouault at spatialys.com>
> <even.rouault at spatialys.com>
> *Date: *Wednesday, January 10, 2024 at 12:48?PM
> *To: *"Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS
> INC]" <jesse.r.meyer at nasa.gov> <jesse.r.meyer at nasa.gov>,
> "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> <gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org>
> *Subject: *[EXTERNAL] Re: [gdal-dev] Lack of srs importFromESRI integer
> function
>
>
>
> *CAUTION:* This email originated from outside of NASA.  Please take care
> when clicking links or opening attachments.  Use the "Report Message"
> button to report suspicious messages to the NASA SOC.
>
>
>
> Jesse,
>
> You can use SetFromUserInput("ESRI:XXXX")  . ImportFromEPSG(code) more or
> less does SetFromUserInput("EPSG:{code}")
>
> Even
>
> Le 10/01/2024 ? 18:44, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND
> APPLICATIONS INC] via gdal-dev a ?crit :
>
> Hi,
>
>
>
> Our team has moved away from providing geographic / projected CRS codes as
> strings and prefer using integers where possible.  However, in the C++ API,
> I only see an integer based importFromEPSG function, which doesn?t appear
> to accept ESRI codes (crs not found error message).  We?re targeting an
> Albers projection which is distinguished by an ESRI integer.
>
>
>
> Curiously, the proj database doesn?t seem to make this distinction ? the
> table column is simply ?code? and I can find the projection row manually,
> alongside EPSG projections.
>
>
>
> Can such a function be provided by the API (if it doesn?t already exist ?
> I couldn?t find it ? there are no integer overloads of importFromESRI)?
>
>
>
> Please advise -- thanks,
>
> Jesse
>
>
>
> _______________________________________________
>
> gdal-dev mailing list
>
> gdal-dev at lists.osgeo.org
>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
>
> http://www.spatialys.com
>
> My software is free, but my time generally not.
>
> --
>
> http://www.spatialys.com
>
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240112/ab6e019a/attachment.htm>

From ni_hao88 at hotmail.com  Fri Jan 12 11:51:51 2024
From: ni_hao88 at hotmail.com (ni hao)
Date: Fri, 12 Jan 2024 19:51:51 +0000
Subject: [gdal-dev] gdal_merge -of format
In-Reply-To: <19dee09a-5c9f-68e2-b787-1e8c213f610b@aitchison.me.uk>
References: <DM5PR02MB3862C4BB3B18718F54AF64BEF1692@DM5PR02MB3862.namprd02.prod.outlook.com>
 <19dee09a-5c9f-68e2-b787-1e8c213f610b@aitchison.me.uk>
Message-ID: <DM5PR02MB3862366A29F9FAEFE838BE4BF16F2@DM5PR02MB3862.namprd02.prod.outlook.com>

Thank you Andrew!
________________________________
From: Andrew C Aitchison <andrew at aitchison.me.uk>
Sent: January 11, 2024 6:00 AM
To: ni hao <ni_hao88 at hotmail.com>
Cc: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] gdal_merge -of format

On Wed, 10 Jan 2024, ni hao via gdal-dev wrote:

> Hi list,
>
>
>
> question about: gdal_merge -of format
>
>  besides GTiff, what other formats can I specify? May I specify USGS DEM format?

Look in the output of
         gdalinfo --formats
any raster format with rw for read-write can be used.

# gdalinfo --formats | egrep USGSDEM
   USGSDEM -raster- (rwv): USGS Optional ASCII DEM (and CDED)

- so, yes you can use USGSDEM.

--
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240112/674e82ae/attachment-0001.htm>

From bdezonia at gmail.com  Sat Jan 13 14:58:48 2024
From: bdezonia at gmail.com (Barry DeZonia)
Date: Sat, 13 Jan 2024 16:58:48 -0600
Subject: [gdal-dev] opening images via a URI
Message-ID: <CAKcvfuSGPOt9UDVOuO28qi-1YjwG6bQ4kA4inFPEV2dxBg3N4w@mail.gmail.com>

Hey all,

I am in a position where a library I am developing would benefit if gdal
could open an image that lives on the web. I guess maybe it's a VSI thing?
Anyhow I am wondering how I could extend the Java API to open things given
a Java URI. It could delegate to the C/C++ VSI code after manipulating the
URI as needed. Does anyone think this is feasible? Are there good examples
of how the VSI stuff works that I could refer to?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240113/e80a64fb/attachment.htm>

From schwehr at gmail.com  Sat Jan 13 16:29:46 2024
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sat, 13 Jan 2024 16:29:46 -0800
Subject: [gdal-dev] opening images via a URI
In-Reply-To: <CAKcvfuSGPOt9UDVOuO28qi-1YjwG6bQ4kA4inFPEV2dxBg3N4w@mail.gmail.com>
References: <CAKcvfuSGPOt9UDVOuO28qi-1YjwG6bQ4kA4inFPEV2dxBg3N4w@mail.gmail.com>
Message-ID: <CACmBxyvE5T_O44YXtXaUtfiLB1LXXxidfbXM164=VpEmpz0erw@mail.gmail.com>

See vsicurl and the other network drivers for things more specific
like /vsis3/, /vsigs/, /vsiaz/, /vsioss/ or /vsiswift/

https://gdal.org/user/virtual_file_systems.html#vsicurl-http-https-ftp-files-random-access

On Sat, Jan 13, 2024 at 2:59?PM Barry DeZonia via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hey all,
>
> I am in a position where a library I am developing would benefit if gdal
> could open an image that lives on the web. I guess maybe it's a VSI thing?
> Anyhow I am wondering how I could extend the Java API to open things given
> a Java URI. It could delegate to the C/C++ VSI code after manipulating the
> URI as needed. Does anyone think this is feasible? Are there good examples
> of how the VSI stuff works that I could refer to?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240113/2f1c8c8d/attachment.htm>

From mandeepsinghkalra at gmail.com  Mon Jan 15 00:36:04 2024
From: mandeepsinghkalra at gmail.com (Mandeep Singh)
Date: Mon, 15 Jan 2024 14:06:04 +0530
Subject: [gdal-dev] Issue with OGR Brush Styling for PDF Generation
In-Reply-To: <23955e74-9f5a-458e-baab-ec2468452947@spatialys.com>
References: <CAAho42amopZG4JT_hu0ykK8otBBr+JX6a4=67AntGYWa5NvMcA@mail.gmail.com>
 <23955e74-9f5a-458e-baab-ec2468452947@spatialys.com>
Message-ID: <CAAho42bTAKmiUN4WC6+auRJ5rJsUPMiEtO7+hs0Ss9PSuq+NFg@mail.gmail.com>

Thanks Even.

Unfortunately i can't use these engines as i am trying to build it
independently.

Is there any way using GDAL i can convert a polygon shape file to a
patterned area like ogr-brush5 ?
Which can then be added on PDF as a vector/raster ?



Regards
Mandeep

On Fri, Jan 12, 2024 at 9:38?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> as documented in
> https://gdal.org/drivers/vector/pdf.html#feature-style-support, styling
> support in the PDF driver is very limited, and doesn't include the brush
> type. For things not supported, you'd better use a more advanced rendering
> engine that can output PDF, like QGIS or MapServer
>
> Even
> Le 12/01/2024 ? 11:53, Mandeep Singh via gdal-dev a ?crit :
>
> Hi,
>
> I am facing challenges in using the OGR Brush symbols for PDF generation
> and only the default styling seems to be working. It seems the
> id:"ogr-brush-n" is not considered.
>
> [image: image.png]
>
>
> GDAL version is  3.2.2
>
>
> Can anyone provide any feedback ?
>
>
> Regards
> Mandeep
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240115/9b7739eb/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image.png
Type: image/png
Size: 58178 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240115/9b7739eb/attachment-0001.png>

From info at dariusgoergen.com  Mon Jan 15 02:47:53 2024
From: info at dariusgoergen.com (=?UTF-8?Q?Darius_A=2E_G=C3=B6rgen?=)
Date: Mon, 15 Jan 2024 11:47:53 +0100
Subject: [gdal-dev] STACIT driver seems to return only a subset of all
 matches
Message-ID: <35cebe70-1ed1-4155-8342-6f18af80614d@dariusgoergen.com>

Hi everyone,

I am trying to use the STACIT driver under GDAL 3.8.2 to access some 
Sentinel-2 data on MPC.
However, it seems that using the driver returns only a part of all 
matching items to my query.

For example, if I issue:

```
gdalinfo -json 
"STACIT:\"https://planetarycomputer.microsoft.com/api/stac/v1/search?collections=sentinel-2-l2a&bbox=-71,18,-70.5,18.5&datetime=2019-01-01T00:00:00%2F2019-01-31T00:00:00\"":asset=B03 
 >> gdal_output.json

jq '.files | length' gdal_output.json

```

I get an output value of 4.

Where as:

```
wget -q -O stac_output.json 
"https://planetarycomputer.microsoft.com/api/stac/v1/search?collections=sentinel-2-l2a&bbox=-71,18,-70.5,18.5&datetime=2019-01-01T00:00:00%2F2019-01-31T00:00:00"

jq '.features | length' stac_output.json

```

delivers and output of 36.

So it seems that some of the matching items are not caught by the STACIT 
driver?
Any advise?

Best,

Darius.

From even.rouault at spatialys.com  Mon Jan 15 04:18:29 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Jan 2024 13:18:29 +0100
Subject: [gdal-dev] STACIT driver seems to return only a subset of all
 matches
In-Reply-To: <35cebe70-1ed1-4155-8342-6f18af80614d@dariusgoergen.com>
References: <35cebe70-1ed1-4155-8342-6f18af80614d@dariusgoergen.com>
Message-ID: <0d641a9d-fb23-4f38-bbfb-118621ea824a@spatialys.com>

Hi,

the STACIT driver has logic to remove the items that are overlapped by 
others, to keep only those participating effectively to the mosaic.

Even

Le 15/01/2024 ? 11:47, Darius A. G?rgen via gdal-dev a ?crit?:
> Hi everyone,
>
> I am trying to use the STACIT driver under GDAL 3.8.2 to access some 
> Sentinel-2 data on MPC.
> However, it seems that using the driver returns only a part of all 
> matching items to my query.
>
> For example, if I issue:
>
> ```
> gdalinfo -json 
> "STACIT:\"https://planetarycomputer.microsoft.com/api/stac/v1/search?collections=sentinel-2-l2a&bbox=-71,18,-70.5,18.5&datetime=2019-01-01T00:00:00%2F2019-01-31T00:00:00\"":asset=B03 
> >> gdal_output.json
>
> jq '.files | length' gdal_output.json
>
> ```
>
> I get an output value of 4.
>
> Where as:
>
> ```
> wget -q -O stac_output.json 
> "https://planetarycomputer.microsoft.com/api/stac/v1/search?collections=sentinel-2-l2a&bbox=-71,18,-70.5,18.5&datetime=2019-01-01T00:00:00%2F2019-01-31T00:00:00"
>
> jq '.features | length' stac_output.json
>
> ```
>
> delivers and output of 36.
>
> So it seems that some of the matching items are not caught by the 
> STACIT driver?
> Any advise?
>
> Best,
>
> Darius.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From info at dariusgoergen.com  Mon Jan 15 05:05:14 2024
From: info at dariusgoergen.com (=?UTF-8?Q?Darius_A=2E_G=C3=B6rgen?=)
Date: Mon, 15 Jan 2024 14:05:14 +0100
Subject: [gdal-dev] STACIT driver seems to return only a subset of all
 matches
In-Reply-To: <0d641a9d-fb23-4f38-bbfb-118621ea824a@spatialys.com>
References: <35cebe70-1ed1-4155-8342-6f18af80614d@dariusgoergen.com>
 <0d641a9d-fb23-4f38-bbfb-118621ea824a@spatialys.com>
Message-ID: <1b79c1de-b165-45e9-b330-d0c6430f214c@dariusgoergen.com>

Thanks, that actually makes sense, if the aim of the driver is to create 
a mosaic. It was not totally clear to me how overlapping tiles would be 
handled reading the docs. So, I understand it is a "last-items-first" 
approach until the whole area-of-interest has effectively been covered?

On 15.01.24 13:18, Even Rouault wrote:
> Hi,
> 
> the STACIT driver has logic to remove the items that are overlapped by 
> others, to keep only those participating effectively to the mosaic.
> 
> Even
> 
> Le 15/01/2024 ? 11:47, Darius A. G?rgen via gdal-dev a ?crit?:
>> Hi everyone,
>>
>> I am trying to use the STACIT driver under GDAL 3.8.2 to access some 
>> Sentinel-2 data on MPC.
>> However, it seems that using the driver returns only a part of all 
>> matching items to my query.
>>
>> For example, if I issue:
>>
>> ```
>> gdalinfo -json 
>> "STACIT:\"https://planetarycomputer.microsoft.com/api/stac/v1/search?collections=sentinel-2-l2a&bbox=-71,18,-70.5,18.5&datetime=2019-01-01T00:00:00%2F2019-01-31T00:00:00\"":asset=B03 >> gdal_output.json
>>
>> jq '.files | length' gdal_output.json
>>
>> ```
>>
>> I get an output value of 4.
>>
>> Where as:
>>
>> ```
>> wget -q -O stac_output.json 
>> "https://planetarycomputer.microsoft.com/api/stac/v1/search?collections=sentinel-2-l2a&bbox=-71,18,-70.5,18.5&datetime=2019-01-01T00:00:00%2F2019-01-31T00:00:00"
>>
>> jq '.features | length' stac_output.json
>>
>> ```
>>
>> delivers and output of 36.
>>
>> So it seems that some of the matching items are not caught by the 
>> STACIT driver?
>> Any advise?
>>
>> Best,
>>
>> Darius.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

-- 
Darius A. G?rgen (M.Sc. Physical Geography)

Spatial Data Science | Remote Sensing | ML | Open Source

Mobile:  (+49)163-1999524
E-Mail:  info at dariusgoergen.com
Address: Am Linsenberg 5 | 55131 Mainz | Germany

From even.rouault at spatialys.com  Mon Jan 15 05:17:34 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 15 Jan 2024 14:17:34 +0100
Subject: [gdal-dev] STACIT driver seems to return only a subset of all
 matches
In-Reply-To: <1b79c1de-b165-45e9-b330-d0c6430f214c@dariusgoergen.com>
References: <35cebe70-1ed1-4155-8342-6f18af80614d@dariusgoergen.com>
 <0d641a9d-fb23-4f38-bbfb-118621ea824a@spatialys.com>
 <1b79c1de-b165-45e9-b330-d0c6430f214c@dariusgoergen.com>
Message-ID: <52f4bdf9-60ef-47f4-be4c-e1f916ddd868@spatialys.com>


Le 15/01/2024 ? 14:05, Darius A. G?rgen a ?crit?:
> Thanks, that actually makes sense, if the aim of the driver is to 
> create a mosaic. It was not totally clear to me how overlapping tiles 
> would be handled reading the docs. So, I understand it is a 
> "last-items-first" approach until the whole area-of-interest has 
> effectively been covered?

yes. https://github.com/OSGeo/gdal/pull/9078 should help clarify for 
future readers


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Jan 16 07:38:05 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Jan 2024 16:38:05 +0100
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <0227aa2e-ada7-4878-a57d-35dc36c69521@spatialys.com>

Hi,

actually the below question made me reconsider the current monolithic 
approach how data files are store in the source tree, to a cleaner one 
where each driver stores its potential data files in a specifc 
subdirectory and is responsible to install them (still in 
$prefix/share/gdal) : https://github.com/OSGeo/gdal/pull/9087 . This 
improves relating data files to the driver that need them.

This has no impact on the installed artifacts. Note that when working 
with a development build, GDAL_DATA should now point to 
${top_build_dir}/data, and no longer to ${top_source_dir}/data.

Even

Le 06/01/2024 ? 22:32, Abel Pau via gdal-dev a ?crit?:
>
> Hi,
>
> Happy New 2024 to everyone who celebrates it!
>
> I am programming a driver and in some point I need to read a file that 
> contains some information (and it?s better to keep this in a file than 
> in c code) about the Horizontal Reference System.
>
> I have this file here: ?GDAL\ogr\ogrsf_frmts\miramon?, but when coding 
> I don?t know how to get to this folder.
>
> There is any method to open a file (using VSIFOpenL(), for instance) 
> in THIS specific directory? Can I use ?GDAL\ogr\ogrsd_frmts\miramon? 
> like that?
>
> If not, where can I put this file to be found when executing the code? 
> And how to write this path in the code?
>
> Thanks in advance!!
>
> *Abel Pau Garcia*
>
> *GIS developer*
>
> 	
>
> https://www.creaf.cat/sites/default/files/creaf-signature.png
>
> *a.pau at creaf.uab.cat* <mailto:a.pau at creaf.uab.cat>
>
> *Let's chat on Teams!* 
> <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
> *Tel. +34 934814277*
>
> 	
>
> https://www.creaf.cat/sites/default/files/so-en-signature.png
>
> https://www.creaf.cat/sites/default/files/twitter-icon-signature.png 
> <https://twitter.com/CREAF_ecologia>https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png 
> <https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>https://www.creaf.cat/sites/default/files/youtube-icon-signature.png 
> <https://www.youtube.com/c/creafecologia>https://www.creaf.cat/sites/default/files/instagram-icon-signature.png 
> <https://www.instagram.com/CREAF_ecologia/>
>
> *www.creaf.cat* <http://www.creaf.cat>*| **http://blog.creaf.cat* 
> <http://blog.creaf.cat>
>
> 	
>
> https://www.creaf.cat/sites/default/files/uab_logo_signatura.png
>
> CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)
>
>
> Before printing this electronic message, think about the environment.
>
> http://www.creaf.uab.cat/_signatura/line.gif
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/f86d331d/attachment-0003.jpg>

From eric.r.patton at pm.me  Tue Jan 16 08:20:40 2024
From: eric.r.patton at pm.me (Eric Patton)
Date: Tue, 16 Jan 2024 16:20:40 +0000
Subject: [gdal-dev] Error building GDAL 3.8.3: Installed GEOS not found
 during build
Message-ID: <6AdhA-1ymaDfPzWfC6MPavMd76ojJGF17z3wzQBuXg963Hfna6SDiqP0OwdQHmQKtDjWS5PwxW8H2hhFAAoWqMbRWd76jZNYYvcvVbSOsHU=@pm.me>

I am running into an error while building gdal 3.8.3 from source - it seems GEOS (version 3.12.1) is not being found during the build, despite that fact it was completely installed from source with no errors. I'm using LInux Mint 20.3.

# GDAL build commands used:

$ cmake -DCMAKE_BUILD_TYPE=Release ..
(No obvious errors in output, GEOS seems to be located):

-- The following RECOMMENDED packages have been found:
* GEOS
Geometry Engine - Open Source (GDAL core dependency)

$ cmake --build .
<snip>
[ 95%] Built target gcore_mdreader
CMakeFiles/GDAL.dir/build.make:2687: *** target pattern contains no '%'. Stop.
make[1]: *** [CMakeFiles/Makefile2:5005: CMakeFiles/GDAL.dir/all] Error 2
make: *** [Makefile:141: all] Error 2

# Line 2687 of /usr/local/gdal-3.8.3/build/CMakefiles/GDAL.dir:
libgdal.so.34.3.8.3: GEOS::geos_c-NOTFOUND

# But that's strange:
$ which geos-config
/usr/local/bin/geos-config

$ geos-config --version
3.12.1

# Location of GEOS include dir:

$ cd /usr
$ find . -name "geos_c.h"

./local/geos-3.12.1/_build/capi/geos_c.h
./local/include/geos_c.h

# Location of GEOS_LIBRARY:

$ cd /usr
$ find . -name "*libgeos_c*"

./local/lib/libgeos_c.so.1
./local/lib/libgeos_c.so.1.18.1
./local/lib/libgeos_c.so
./local/geos-3.12.1/_build/lib/libgeos_c.so.1
./local/geos-3.12.1/_build/lib/libgeos_c.so.1.18.1
./local/geos-3.12.1/_build/lib/libgeos_c.so

$ uname -a:

Linux FieldBathy 5.15.0-91-generic #101~20.04.1-Ubuntu SMP Thu Nov 16 14:22:28 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
Please let me know if there's anything else I can post to help diagnose the error, thanks.

--
Eric Patton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/38cffe9b/attachment.htm>

From even.rouault at spatialys.com  Tue Jan 16 08:23:29 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 16 Jan 2024 17:23:29 +0100
Subject: [gdal-dev] Error building GDAL 3.8.3: Installed GEOS not found
 during build
In-Reply-To: <6AdhA-1ymaDfPzWfC6MPavMd76ojJGF17z3wzQBuXg963Hfna6SDiqP0OwdQHmQKtDjWS5PwxW8H2hhFAAoWqMbRWd76jZNYYvcvVbSOsHU=@pm.me>
References: <6AdhA-1ymaDfPzWfC6MPavMd76ojJGF17z3wzQBuXg963Hfna6SDiqP0OwdQHmQKtDjWS5PwxW8H2hhFAAoWqMbRWd76jZNYYvcvVbSOsHU=@pm.me>
Message-ID: <2e47bc84-75d7-4df6-b26b-05c5c11a5436@spatialys.com>

Eric,

What is the output of "grep -i GEOS CMakeCache.txt" ?

Also retry with?? cmake .. "-UGEOS*"? to make sure any potential old 
GEOS variables are reset

Even

Le 16/01/2024 ? 17:20, Eric Patton via gdal-dev a ?crit?:
> I am running into an error while building gdal 3.8.3 from source - it 
> seems GEOS (version 3.12.1) is not being found during the build, 
> despite that fact it was completely installed from source with no 
> errors. I'm using LInux Mint 20.3.
>
> # GDAL build commands used:
>
> $ cmake -DCMAKE_BUILD_TYPE=Release ..
> (No obvious errors in output, GEOS seems to be located):
>
> -- The following RECOMMENDED packages have been found:
> * GEOS
> ? ?Geometry Engine - Open Source (GDAL core dependency)
>
> $ cmake --build .
> <snip>
> [ 95%] Built target gcore_mdreader
> CMakeFiles/GDAL.dir/build.make:2687: *** target pattern contains no 
> '%'. ?Stop.
> make[1]: *** [CMakeFiles/Makefile2:5005: CMakeFiles/GDAL.dir/all] Error 2
> make: *** [Makefile:141: all] Error 2
>
> # Line 2687 of /usr/local/gdal-3.8.3/build/CMakefiles/GDAL.dir:
> libgdal.so.34.3.8.3: GEOS::geos_c-NOTFOUND
>
> # But that's strange:
> $ which geos-config
> /usr/local/bin/geos-config
>
> $ geos-config --version
> 3.12.1
>
> # Location of GEOS include dir:
>
> $ cd /usr
> $ find . -name "geos_c.h"
>
> ./local/geos-3.12.1/_build/capi/geos_c.h
> ./local/include/geos_c.h
>
> # Location of GEOS_LIBRARY:
>
> $ cd /usr
> $ find . -name "*libgeos_c*"
>
> ./local/lib/libgeos_c.so.1
> ./local/lib/libgeos_c.so.1.18.1
> ./local/lib/libgeos_c.so
> ./local/geos-3.12.1/_build/lib/libgeos_c.so.1
> ./local/geos-3.12.1/_build/lib/libgeos_c.so.1.18.1
> ./local/geos-3.12.1/_build/lib/libgeos_c.so
>
> $ uname -a:
>
> Linux FieldBathy 5.15.0-91-generic #101~20.04.1-Ubuntu SMP Thu Nov 16 
> 14:22:28 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
>
> Please let me know if there's anything else I can post to help 
> diagnose the error, thanks.
>
> --
> Eric Patton
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/18f0cd59/attachment.htm>

From variablestarlight at gmail.com  Tue Jan 16 08:29:35 2024
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=C3=A1n_De_Angelis?=)
Date: Tue, 16 Jan 2024 17:29:35 +0100
Subject: [gdal-dev] source layer names in ogrmerge?
Message-ID: <9654ca55-ddc3-4f2e-8239-139db9a380af@gmail.com>

Hi!

I have a bunch of GML files all structured in the same way and each one 
having several layers. I want to merge these files into one large file 
using one and the same layer in each file. I thought about using 
ogrmerge.py, but I cannot see if and in that case how to specify the 
source layer name. Does it support such a feature?

Thanks in advance

H.


From variablestarlight at gmail.com  Tue Jan 16 09:13:11 2024
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=C3=A1n_De_Angelis?=)
Date: Tue, 16 Jan 2024 18:13:11 +0100
Subject: [gdal-dev] source layer names in ogrmerge?
In-Reply-To: <9654ca55-ddc3-4f2e-8239-139db9a380af@gmail.com>
References: <9654ca55-ddc3-4f2e-8239-139db9a380af@gmail.com>
Message-ID: <CAFSWWyq_7XC-BSU-UvHM=6XprOR2KnQOZuCWV+L5fRUn3Oai-g@mail.gmail.com>

Please disregard the previous message, as I already solved the problem in
another way.

Den tis 16 jan. 2024 17:29Hern?n De Angelis <variablestarlight at gmail.com>
skrev:

> Hi!
>
> I have a bunch of GML files all structured in the same way and each one
> having several layers. I want to merge these files into one large file
> using one and the same layer in each file. I thought about using
> ogrmerge.py, but I cannot see if and in that case how to specify the
> source layer name. Does it support such a feature?
>
> Thanks in advance
>
> H.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/28501b93/attachment.htm>

From eric.r.patton at pm.me  Tue Jan 16 09:20:48 2024
From: eric.r.patton at pm.me (Eric Patton)
Date: Tue, 16 Jan 2024 17:20:48 +0000
Subject: [gdal-dev] Error building GDAL 3.8.3: Installed GEOS not found
 during build
In-Reply-To: <2e47bc84-75d7-4df6-b26b-05c5c11a5436@spatialys.com>
References: <6AdhA-1ymaDfPzWfC6MPavMd76ojJGF17z3wzQBuXg963Hfna6SDiqP0OwdQHmQKtDjWS5PwxW8H2hhFAAoWqMbRWd76jZNYYvcvVbSOsHU=@pm.me>
 <2e47bc84-75d7-4df6-b26b-05c5c11a5436@spatialys.com>
Message-ID: <L0LpriXLt9C-qslbcfcioj8ubUgb3VLpLa5bpd7Smad4Szoam5wa0Di1cI9pJA_Xn3I5Hpj6mmD5cboqKNhFTW2-llz6tL3wQMvqeYDBw64=@pm.me>

Hi Evan,

I tried running 'cmake .. "-UGEOS*"' followed by 'cmake --build .', but received the same error:

CMakeFiles/GDAL.dir/build.make:2687: *** target pattern contains no '%'. Stop.
make[1]: *** [CMakeFiles/Makefile2:5005: CMakeFiles/GDAL.dir/all] Error 2make: *** [Makefile:141: all] Error 2

$ grep -i GEOS CMakeCache.txt
//Config file name for GEOS
GDAL_CHECK_PACKAGE_GEOS_NAMES:STRING=GEOS
//Target name candidates for GEOS
GDAL_CHECK_PACKAGE_GEOS_TARGETS:STRING=GEOS::geos_c;GEOS::GEOS
//Set ON to build Geospatial PDF format
//Set ON to use GEOS
GDAL_USE_GEOS:BOOL=ON
//The directory containing a CMake configuration file for GEOS.
GEOS_DIR:PATH=/usr/local/geos-3.12.1/cmake
pkgcfg_lib_PC_SPATIALITE_geos_c:FILEPATH=/usr/local/lib/libgeos_c.so
//ADVANCED property for variable: GDAL_CHECK_PACKAGE_GEOS_NAMES
GDAL_CHECK_PACKAGE_GEOS_NAMES-ADVANCED:INTERNAL=1
//ADVANCED property for variable: GDAL_CHECK_PACKAGE_GEOS_TARGETS
GDAL_CHECK_PACKAGE_GEOS_TARGETS-ADVANCED:INTERNAL=1
PC_SPATIALITE_LDFLAGS:INTERNAL=-lspatialite;-lminizip;-lrttopo;-lfreexl;-lproj;-lsqlite3;-lz;-lsqlite3;-lgeos_c;-lxml2;-lm
PC_SPATIALITE_LIBRARIES:INTERNAL=spatialite;minizip;rttopo;freexl;proj;sqlite3;z;sqlite3;geos_c;xml2;m
PC_SPATIALITE_STATIC_LDFLAGS:INTERNAL=-lspatialite;-lminizip;-lrttopo;-lfreexl;-lproj;-lsqlite3;-lz;-lsqlite3;-lgeos_c;-lxml2;-lm
PC_SPATIALITE_STATIC_LIBRARIES:INTERNAL=spatialite;minizip;rttopo;freexl;proj;sqlite3;z;sqlite3;geos_c;xml2;m
//ADVANCED property for variable: pkgcfg_lib_PC_SPATIALITE_geos_cpkgcfg_lib_PC_SPATIALITE_geos_c-ADVANCED:INTERNAL=1

Thanks,

~ Eric.

On Tuesday, 16 January 2024 at 12:23, Even Rouault <even.rouault at spatialys.com> wrote:

> Eric,
>
> What is the output of "grep -i GEOS CMakeCache.txt" ?
>
> Also retry with cmake .. "-UGEOS*" to make sure any potential old GEOS variables are reset
>
> Even
>
> Le 16/01/2024 ? 17:20, Eric Patton via gdal-dev a ?crit :
>
>> I am running into an error while building gdal 3.8.3 from source - it seems GEOS (version 3.12.1) is not being found during the build, despite that fact it was completely installed from source with no errors. I'm using LInux Mint 20.3.
>>
>> # GDAL build commands used:
>>
>> $ cmake -DCMAKE_BUILD_TYPE=Release ..
>> (No obvious errors in output, GEOS seems to be located):
>>
>> -- The following RECOMMENDED packages have been found:
>> * GEOS
>> Geometry Engine - Open Source (GDAL core dependency)
>>
>> $ cmake --build .
>> <snip>
>> [ 95%] Built target gcore_mdreader
>> CMakeFiles/GDAL.dir/build.make:2687: *** target pattern contains no '%'. Stop.
>> make[1]: *** [CMakeFiles/Makefile2:5005: CMakeFiles/GDAL.dir/all] Error 2
>> make: *** [Makefile:141: all] Error 2
>>
>> # Line 2687 of /usr/local/gdal-3.8.3/build/CMakefiles/GDAL.dir:
>> libgdal.so.34.3.8.3: GEOS::geos_c-NOTFOUND
>>
>> # But that's strange:
>> $ which geos-config
>> /usr/local/bin/geos-config
>>
>> $ geos-config --version
>> 3.12.1
>>
>> # Location of GEOS include dir:
>>
>> $ cd /usr
>> $ find . -name "geos_c.h"
>>
>> ./local/geos-3.12.1/_build/capi/geos_c.h
>> ./local/include/geos_c.h
>>
>> # Location of GEOS_LIBRARY:
>>
>> $ cd /usr
>> $ find . -name "*libgeos_c*"
>>
>> ./local/lib/libgeos_c.so.1
>> ./local/lib/libgeos_c.so.1.18.1
>> ./local/lib/libgeos_c.so
>> ./local/geos-3.12.1/_build/lib/libgeos_c.so.1
>> ./local/geos-3.12.1/_build/lib/libgeos_c.so.1.18.1
>> ./local/geos-3.12.1/_build/lib/libgeos_c.so
>>
>> $ uname -a:
>>
>> Linux FieldBathy 5.15.0-91-generic #101~20.04.1-Ubuntu SMP Thu Nov 16 14:22:28 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux
>> Please let me know if there's anything else I can post to help diagnose the error, thanks.
>>
>> --
>> Eric Patton
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240116/de79671a/attachment-0001.htm>

From nagyrobi_r at yahoo.com  Wed Jan 17 02:52:45 2024
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Wed, 17 Jan 2024 10:52:45 +0000 (UTC)
Subject: [gdal-dev] Using VSIMEM properly
References: <1171814317.1418564.1705488765698.ref@mail.yahoo.com>
Message-ID: <1171814317.1418564.1705488765698@mail.yahoo.com>



Hi all!

Maybe i am not using this tool properly. I am want to read the contents of a WFS service into an in memory sqlite database. Then i want to add a second table to it name it filter from a geojson, do an SQL query on the two tables, and write the result into a Postgresql database, this only using command line tools.

I ran this first, and no error




ogr2ogr -f "SQLite" /vsimem/temp.sqlite WFS:"http://localhost:8080/geoserver/wfs"?ne:buildings -nln buildings -dsco SPATIALITE=YES -lco SPATIAL_INDEX=YES -nlt POLYGON

i ran this secondly and no error.




ogr2ogr -f "SQLite" -update -append /vsimem/temp.sqlite area_json.json -nln filter -dsco SPATIALITE=YES -lco SPATIAL_INDEX=YES

But then i tried: ogrinfo /vsimem/temp.sqlite i get ogrinfo failed - unable to open '/vsimem/temp.sqlite'.

And this was what i tried to do further on, but not working due to the reason above.



ogr2ogr PG:"dbname='postgres' host='172.17.0.2' port='5432' user='working_user' password='working_password'" -lco GEOMETRY_NAME=geom 
-lco GEOM_TYPE=geometry -lco SCHEMA=geospatial /vsimem/temp.sqlite  -sql "Select * from buildings join filter on st_intersects(buildings.geom,filter.geom)" -nln buildings_result -nlt polygon


Any ideas what i am using wrong, or how could i do this properly?




Kind regards,

Robert N
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/aa143e7f/attachment.htm>

From lnicola at dend.ro  Wed Jan 17 02:59:02 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Wed, 17 Jan 2024 12:59:02 +0200
Subject: [gdal-dev] Using VSIMEM properly
In-Reply-To: <1171814317.1418564.1705488765698@mail.yahoo.com>
References: <1171814317.1418564.1705488765698.ref@mail.yahoo.com>
 <1171814317.1418564.1705488765698@mail.yahoo.com>
Message-ID: <fe6ee80c-ad74-4871-bd33-97092617ce5e@betaapp.fastmail.com>

Hi Robert,

The contents of /vsimem/ is only stored in memory and goes away when your application quits. You should use a real file instead, or something like a Python script that calls gdal.VectorTranslate.

Laurentiu

On Wed, Jan 17, 2024, at 12:52, nagyrobi_r--- via gdal-dev wrote:
> 
> Hi all!
> 
> Maybe i am not using this tool properly. I am want to read the contents of a WFS service into an in memory sqlite database. Then i want to add a second table to it name it filter from a geojson, do an SQL query on the two tables, and write the result into a Postgresql database, this only using command line tools.
> 
> I ran this first, and no error
> 
> 
> 
> ogr2ogr -f "SQLite" /vsimem/temp.sqlite WFS:"http://localhost:8080/geoserver/wfs" ne:buildings -nln buildings -dsco SPATIALITE=YES -lco SPATIAL_INDEX=YES -nlt POLYGON
> 
> i ran this secondly and no error.
> 
> 
> 
> ogr2ogr -f "SQLite" -update -append /vsimem/temp.sqlite area_json.json -nln filter -dsco SPATIALITE=YES -lco SPATIAL_INDEX=YES
> 
> But then i tried: ogrinfo /vsimem/temp.sqlite i get ogrinfo failed - unable to open '/vsimem/temp.sqlite'.
> 
> And this was what i tried to do further on, but not working due to the reason above.
> 
> 
> 
> `ogr2ogr PG:"dbname='``postgres``' host='172.17.0.``2``' port='5432' user='working_user' password='working_password'" -``lco GEOMETRY_NAME=geom`` 
> -``lco GEOM_TYPE=geometry`` -lco SCHEMA=geospatial /vsimem/temp.sqlite  -sql "Select * from buildings join filter on st_intersects(buildings.geom,filter.geom)" -nln buildings_result -nlt polygon`
> 
> 
> Any ideas what i am using wrong, or how could i do this properly?
> 
> 
> 
> Kind regards,
> 
> Robert N
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/0a281d7a/attachment.htm>

From nagyrobi_r at yahoo.com  Wed Jan 17 04:00:34 2024
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Wed, 17 Jan 2024 12:00:34 +0000 (UTC)
Subject: [gdal-dev] Using VSIMEM properly
In-Reply-To: <fe6ee80c-ad74-4871-bd33-97092617ce5e@betaapp.fastmail.com>
References: <1171814317.1418564.1705488765698.ref@mail.yahoo.com>
 <1171814317.1418564.1705488765698@mail.yahoo.com>
 <fe6ee80c-ad74-4871-bd33-97092617ce5e@betaapp.fastmail.com>
Message-ID: <1903679457.1430198.1705492834551@mail.yahoo.com>

Hei Lauren?iu! Thank you for yor email!?Is there a way to pipe these operations or do anything fancy to be able to sit outside of a programming environment??
Cu respect,Robert Nagy

Sent from Yahoo Mail on Android 
 
  On Wed, Jan 17, 2024 at 11:59 AM, Lauren?iu Nicola via gdal-dev<gdal-dev at lists.osgeo.org> wrote:   _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/43510de5/attachment-0001.htm>

From lnicola at dend.ro  Wed Jan 17 04:35:07 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Wed, 17 Jan 2024 14:35:07 +0200
Subject: [gdal-dev] Using VSIMEM properly
In-Reply-To: <1903679457.1430198.1705492834551@mail.yahoo.com>
References: <1171814317.1418564.1705488765698.ref@mail.yahoo.com>
 <1171814317.1418564.1705488765698@mail.yahoo.com>
 <fe6ee80c-ad74-4871-bd33-97092617ce5e@betaapp.fastmail.com>
 <1903679457.1430198.1705492834551@mail.yahoo.com>
Message-ID: <35c8a3e3-70f4-478c-a421-4b1c41e83749@betaapp.fastmail.com>

Hei :-),

Nope, I think those are the only options:
 ? save the output into a (real) file
 ? keep using vsimem, but chain the operations while the app is still running
Do you have any particular reason to use vsimem?

Laurentiu

On Wed, Jan 17, 2024, at 14:00, nagyrobi_r at yahoo.com wrote:
> Hei Lauren?iu! Thank you for yor email! 
> Is there a way to pipe these operations or do anything fancy to be able to sit outside of a programming environment? 
> 
> Cu respect,
> Robert Nagy
> 
> Sent from Yahoo Mail on Android <https://mail.onelink.me/107872968?pid=nativeplacement&c=Global_Acquisition_YMktg_315_Internal_EmailSignature&af_sub1=Acquisition&af_sub2=Global_YMktg&af_sub3=&af_sub4=100000604&af_sub5=EmailSignature__Static_>
> 
>> On Wed, Jan 17, 2024 at 11:59 AM, Lauren?iu Nicola via gdal-dev
>> <gdal-dev at lists.osgeo.org> wrote:
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/f6746a61/attachment.htm>

From nagyrobi_r at yahoo.com  Wed Jan 17 05:51:00 2024
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Wed, 17 Jan 2024 13:51:00 +0000 (UTC)
Subject: [gdal-dev] Using VSIMEM properly
In-Reply-To: <35c8a3e3-70f4-478c-a421-4b1c41e83749@betaapp.fastmail.com>
References: <1171814317.1418564.1705488765698.ref@mail.yahoo.com>
 <1171814317.1418564.1705488765698@mail.yahoo.com>
 <fe6ee80c-ad74-4871-bd33-97092617ce5e@betaapp.fastmail.com>
 <1903679457.1430198.1705492834551@mail.yahoo.com>
 <35c8a3e3-70f4-478c-a421-4b1c41e83749@betaapp.fastmail.com>
Message-ID: <914867174.1446527.1705499460721@mail.yahoo.com>

Technically in want to save time by not saving to disk. That is one of the main reasons that i want to save in memory.?I tried chaning them using pipes but didnt work.?
Cu respect,?Robert Nagy

Sent from Yahoo Mail on Android 
 
  On Wed, Jan 17, 2024 at 1:35 PM, Lauren?iu Nicola<lnicola at dend.ro> wrote:   
Hei :-),

Nope, I think those are the only options:
   
   - save the output into a (real) file   

   - keep using vsimem, but chain the operations while the app is still running   

Do you have any particular reason to use vsimem?

Laurentiu

On Wed, Jan 17, 2024, at 14:00,?nagyrobi_r at yahoo.com wrote:

Hei Lauren?iu! Thank you for yor email!?
Is there a way to pipe these operations or do anything fancy to be able to sit outside of a programming environment??

Cu respect,
Robert Nagy

Sent from Yahoo Mail on Android


On Wed, Jan 17, 2024 at 11:59 AM, Lauren?iu Nicola via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev



  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/5c17eecf/attachment.htm>

From lnicola at dend.ro  Wed Jan 17 06:34:29 2024
From: lnicola at dend.ro (=?UTF-8?Q?Lauren=C8=9Biu_Nicola?=)
Date: Wed, 17 Jan 2024 16:34:29 +0200
Subject: [gdal-dev] Using VSIMEM properly
In-Reply-To: <914867174.1446527.1705499460721@mail.yahoo.com>
References: <1171814317.1418564.1705488765698.ref@mail.yahoo.com>
 <1171814317.1418564.1705488765698@mail.yahoo.com>
 <fe6ee80c-ad74-4871-bd33-97092617ce5e@betaapp.fastmail.com>
 <1903679457.1430198.1705492834551@mail.yahoo.com>
 <35c8a3e3-70f4-478c-a421-4b1c41e83749@betaapp.fastmail.com>
 <914867174.1446527.1705499460721@mail.yahoo.com>
Message-ID: <d1d92f29-6a1d-4790-ac9b-528618c786f0@betaapp.fastmail.com>

A pipe might prevent you from creating a spatial index, right?

I didn't test it, but another method would be to use a join (you can query multiple data sources in the same ogr2ogr invocation, https://gdal.org/user/ogr_sql_dialect.html#joins), but they are pretty limited and you might lose the spatial index.

If you just want to make it faster, https://gdal.org/drivers/vector/sqlite.html#target-drivers-vector-sqlite-performance-hints can also be pretty useful.

Laurentiu

On Wed, Jan 17, 2024, at 15:51, nagyrobi_r at yahoo.com wrote:
> Technically in want to save time by not saving to disk. That is one of the main reasons that i want to save in memory. 
> I tried chaning them using pipes but didnt work. 
> 
> Cu respect, 
> Robert Nagy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/996b62f8/attachment.htm>

From a.pau at creaf.uab.cat  Wed Jan 17 06:50:46 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Wed, 17 Jan 2024 14:50:46 +0000
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <0227aa2e-ada7-4878-a57d-35dc36c69521@spatialys.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <0227aa2e-ada7-4878-a57d-35dc36c69521@spatialys.com>
Message-ID: <PAXPR07MB7775FF92CFD60E317CD31D80A2722@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi,
ok Even,

so, as my driver is not already online I have to do some changes at this part of the code, don?t I?

At this moment I have the file in the folder GDAL\data (my GDAL_DATA environment variable).
I call it like that.
aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.csv");

Do I have to move the file to somewhere? where?
Sorry cause it?s difficult for me imagine what to do.

Thanks




De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dimarts, 16 de gener de 2024 16:38
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Where to fins my own files


Hi,

actually the below question made me reconsider the current monolithic approach how data files are store in the source tree, to a cleaner one where each driver stores its potential data files in a specifc subdirectory and is responsible to install them (still in $prefix/share/gdal) :  https://github.com/OSGeo/gdal/pull/9087 . This improves relating data files to the driver that need them.

This has no impact on the installed artifacts. Note that when working with a development build, GDAL_DATA should now point to ${top_build_dir}/data, and no longer to ${top_source_dir}/data.

Even
Le 06/01/2024 ? 22:32, Abel Pau via gdal-dev a ?crit :
Hi,
Happy New 2024 to everyone who celebrates it!

I am programming a driver and in some point I need to read a file that contains some information (and it?s better to keep this in a file than in c code) about the Horizontal Reference System.
I have this file here: ?GDAL\ogr\ogrsf_frmts\miramon?, but when coding I don?t know how to get to this folder.

There is any method to open a file (using VSIFOpenL(), for instance) in THIS specific directory? Can I use ?GDAL\ogr\ogrsd_frmts\miramon? like that?

If not, where can I put this file to be found when executing the code? And how to write this path in the code?

Thanks in advance!!



Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat> | http://blog.creaf.cat
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.






_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/b66dc156/attachment-0003.jpg>

From nagyrobi_r at yahoo.com  Wed Jan 17 07:26:34 2024
From: nagyrobi_r at yahoo.com (nagyrobi_r at yahoo.com)
Date: Wed, 17 Jan 2024 15:26:34 +0000 (UTC)
Subject: [gdal-dev] Using VSIMEM properly
In-Reply-To: <d1d92f29-6a1d-4790-ac9b-528618c786f0@betaapp.fastmail.com>
References: <1171814317.1418564.1705488765698.ref@mail.yahoo.com>
 <1171814317.1418564.1705488765698@mail.yahoo.com>
 <fe6ee80c-ad74-4871-bd33-97092617ce5e@betaapp.fastmail.com>
 <1903679457.1430198.1705492834551@mail.yahoo.com>
 <35c8a3e3-70f4-478c-a421-4b1c41e83749@betaapp.fastmail.com>
 <914867174.1446527.1705499460721@mail.yahoo.com>
 <d1d92f29-6a1d-4790-ac9b-528618c786f0@betaapp.fastmail.com>
Message-ID: <2125068894.1473623.1705505194206@mail.yahoo.com>

Thanks for the tips Lauren?iu.?
O zi fain?,?Robert Nagy?

Sent from Yahoo Mail on Android 
 
  On Wed, Jan 17, 2024 at 3:34 PM, Lauren?iu Nicola<lnicola at dend.ro> wrote:   
A pipe might prevent you from creating a spatial index, right?

I didn't test it, but another method would be to use a join (you can query multiple data sources in the same ogr2ogr invocation, https://gdal.org/user/ogr_sql_dialect.html#joins), but they are pretty limited and you might lose the spatial index.

If you just want to make it faster, https://gdal.org/drivers/vector/sqlite.html#target-drivers-vector-sqlite-performance-hints can also be pretty useful.

Laurentiu

On Wed, Jan 17, 2024, at 15:51,?nagyrobi_r at yahoo.com wrote:

Technically in want to save time by not saving to disk. That is one of the main reasons that i want to save in memory.?
I tried chaning them using pipes but didnt work.?

Cu respect,?
Robert Nagy


  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/1c6b07df/attachment.htm>

From even.rouault at spatialys.com  Wed Jan 17 08:12:41 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Jan 2024 17:12:41 +0100
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <PAXPR07MB7775FF92CFD60E317CD31D80A2722@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <0227aa2e-ada7-4878-a57d-35dc36c69521@spatialys.com>
 <PAXPR07MB7775FF92CFD60E317CD31D80A2722@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <9054dbe3-96b7-463d-a82a-39f6f1eefcef@spatialys.com>

Abel,

Le 17/01/2024 ? 15:50, Abel Pau a ?crit?:
>
> Hi,
>
> ok Even,
>
> so, as my driver is not already online I have to do some changes at 
> this part of the code, don?t I?
>
> At this moment I have the file in the folder GDAL\data (my GDAL_DATA 
> environment variable).
>
> I call it like that.
>
> aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.csv");
>
> Do I have to move the file to somewhere? where?
>
I've merged the PR, so you can rebase on top of latest master

No change required in your .cpp file

The only change is to move the resource file into a data/ subdirectory 
within your ogr/ogrsf_frmts/XXXX driver directory

and add in ogr/ogrsf_frmts/XXX/CMakeLists.txt


set(GDAL_DATA_FILES
 ??? ${CMAKE_CURRENT_SOURCE_DIR}/data/MM_m_idofic.csv
)
set_property(
 ? TARGET ${GDAL_LIB_TARGET_NAME}
 ? APPEND
 ? PROPERTY RESOURCE "${GDAL_DATA_FILES}")

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/4a5ff787/attachment.htm>

From glen.rice at noaa.gov  Wed Jan 17 11:20:41 2024
From: glen.rice at noaa.gov (Glen Rice - NOAA Federal)
Date: Wed, 17 Jan 2024 14:20:41 -0500
Subject: [gdal-dev] How to use geokey CoordinateEpochGeoKey in Geotiff from
 Python
Message-ID: <CAGm0ZKdFgWQ3t7ZdHUr2idj5ndvokZ87xgyLZfaj3bW3a6V2sg@mail.gmail.com>

Hello,

We are trying to create geotiffs from Python and specify an epoch for a
dynamic CRS.  Is there a way to do this from python or a command line
utility?

We see the pull request adding CoordinateEpochGeoKey (5120) and expect I
could print the information from gdalinfo if I had an example file.  If we
were in C/C++ then we could use libgeotiff and GTIFKeyGet( ).  However we
are in Python and we don't see how to write either
the CoordinateEpochGeoKey, or even a generic geokey, into a geotiff.

For reference we looked at the following links:
https://gdal.org/user/coordinate_epoch.html
https://github.com/opengeospatial/geotiff/issues/78
https://github.com/opengeospatial/geotiff/pull/99
https://github.com/OSGeo/libgeotiff/blob/master/libgeotiff/geokeys.inc

Thanks for any help,
Glen and Barry

-- 
Glen Rice
National Bathymetric Source
Hydrographic Systems and Technology Branch
Office of Coast Survey / Coast Survey Development Laboratory
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/f09f3b34/attachment.htm>

From even.rouault at spatialys.com  Wed Jan 17 11:40:25 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Jan 2024 20:40:25 +0100
Subject: [gdal-dev] How to use geokey CoordinateEpochGeoKey in Geotiff
 from Python
In-Reply-To: <CAGm0ZKdFgWQ3t7ZdHUr2idj5ndvokZ87xgyLZfaj3bW3a6V2sg@mail.gmail.com>
References: <CAGm0ZKdFgWQ3t7ZdHUr2idj5ndvokZ87xgyLZfaj3bW3a6V2sg@mail.gmail.com>
Message-ID: <632e9ac0-e68b-4f09-b213-be1ec8cdc83b@spatialys.com>

Hi,

cf test_tiff_write_coordinate_epoch() in 
https://github.com/OSGeo/gdal/blob/3a9541d19f2df52f1e66dacfa33878531a5f2c58/autotest/gcore/tiff_write.py#L9575

On the command line you might use: gdal_translate in.tif out.tif 
-a_coord_epoch XXXX.YYY

Even

Le 17/01/2024 ? 20:20, Glen Rice - NOAA Federal via gdal-dev a ?crit?:
> Hello,
>
> We are trying to create geotiffs from Python and specify an epoch for 
> a dynamic CRS.? Is there a way to do this from?python or a command 
> line utility?
>
> We see the pull request adding CoordinateEpochGeoKey (5120) and expect 
> I could print the information from gdalinfo if I had an example file.? 
> If we were in C/C++ then we could use libgeotiff and GTIFKeyGet( ).? 
> However we are in Python and we don't see how to write either 
> the?CoordinateEpochGeoKey, or even a generic geokey, into a geotiff.
>
> For reference we looked at the following links:
> https://gdal.org/user/coordinate_epoch.html
> https://github.com/opengeospatial/geotiff/issues/78
> https://github.com/opengeospatial/geotiff/pull/99
> https://github.com/OSGeo/libgeotiff/blob/master/libgeotiff/geokeys.inc
>
> Thanks for any help,
> Glen and Barry
>
> -- 
> Glen Rice
> National Bathymetric Source
> Hydrographic Systems and Technology Branch
> Office of Coast Survey / Coast Survey Development Laboratory
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240117/ad3fe60e/attachment-0001.htm>

From philippe.ghesquiere at airbus.com  Thu Jan 18 05:22:05 2024
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Thu, 18 Jan 2024 14:22:05 +0100
Subject: [gdal-dev] GPKG raster creation : error with too small resolution
Message-ID: <CAAes_OG-jGYV_HVL5FcM6T1yTDuydbTS9iA6pbp=2VJmPeLM_g@mail.gmail.com>

Dear all,

I just had an error while converting an image to GPKG. This image has a
very small resolution and gdal_translate pops up an error message.

*Test image :*
gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255
-burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000000
1000002 1000002 1mm.tif

*Conversion to GPKG :*
gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad -co
ZOOM_LEVEL_STRATEGY=UPPER 1mm.tif 1mm.gpkg
Input file size is 2000, 2000
ERROR 1: Could not find an appropriate zoom level

*Analysis*
The error is due to  ogrgeopackagedatasource.cpp
<https://github.com/OSGeo/gdal/blob/master/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp#L3169>
(line
3169), and it does make sense : the zoom level is too high (Z>25).

However, wouldn't it be possible to modify gdal_translate behavior ?
For example, we could :

   - let GDAL compute the appropriate zoom level : -co
   ZOOM_LEVEL_STRATEGY=AUTO/LOWER/UPPER,
   - optionally specify a maximum zoom level : -co MAX_ZOOM_LEVEL=18

What do you think ?

Philippe
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/1b1c8a5b/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan 18 05:42:35 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 18 Jan 2024 13:42:35 +0000
Subject: [gdal-dev] GPKG raster creation : error with too small
 resolution
In-Reply-To: <CAAes_OG-jGYV_HVL5FcM6T1yTDuydbTS9iA6pbp=2VJmPeLM_g@mail.gmail.com>
References: <CAAes_OG-jGYV_HVL5FcM6T1yTDuydbTS9iA6pbp=2VJmPeLM_g@mail.gmail.com>
Message-ID: <DB9PR09MB6887F253E756049D55A8778BFD712@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Can you imagine using a custom tiling schema instead of the world-wide InspireCRS84Quad? These commands work

gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255 -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000002 1000002 1000000 1mm.tif

gdal_translate -of GPKG  1mm.tif 1mm.gpkg

Notice the fixed ullr for making the image north-up.

-Jukka Rahkonen-



gdal_translate -of GPKG  1mm.tif 1mm.gpkg
Input file size is 2000, 2000
0ERROR 6: Only north-up non rotated geotransform supported
..ERROR 1: Raster table 1mm not correctly initialized due to missing call to SetGeoTransform()

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Philippe Ghesquiere via gdal-dev
L?hetetty: torstai 18. tammikuuta 2024 15.22
Vastaanottaja: gdal-dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] GPKG raster creation : error with too small resolution


Dear all,

I just had an error while converting an image to GPKG. This image has a very small resolution and gdal_translate pops up an error message.

Test image :
gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255 -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000000 1000002 1000002 1mm.tif

Conversion to GPKG :
gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad -co ZOOM_LEVEL_STRATEGY=UPPER 1mm.tif 1mm.gpkg
Input file size is 2000, 2000
ERROR 1: Could not find an appropriate zoom level

Analysis
The error is due to  ogrgeopackagedatasource.cpp<https://github.com/OSGeo/gdal/blob/master/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp#L3169> (line 3169), and it does make sense : the zoom level is too high (Z>25).

However, wouldn't it be possible to modify gdal_translate behavior ?
For example, we could :

  *   let GDAL compute the appropriate zoom level : -co ZOOM_LEVEL_STRATEGY=AUTO/LOWER/UPPER,
  *   optionally specify a maximum zoom level : -co MAX_ZOOM_LEVEL=18
What do you think ?

Philippe

The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/d40f53a7/attachment.htm>

From MTP at NIRAS.DK  Thu Jan 18 05:42:57 2024
From: MTP at NIRAS.DK (Michael Tjener Pallesen (MTP))
Date: Thu, 18 Jan 2024 13:42:57 +0000
Subject: [gdal-dev] Using GDAL (MaxRev.GDAL) to write TAB files with mixed
 geometry
Message-ID: <AS1PR07MB861531CB387F49FB68C71E81D5712@AS1PR07MB8615.eurprd07.prod.outlook.com>

Hi

I'm migrating from calling native MiTAB operations for exporting features to a MapInfo TAB file to using GDAL and the MapInfo driver. I'm using C# and MaxRev.Gdal.Core package (and MaxRev.Gdal.WindowsRuntime.Minimal)
https://github.com/MaxRev-Dev/gdal.netcore

But when I try to export features that has geometry collections with mixed geometry types, GDAL creates multiple features in the TAB file.

If I try a feature with a collection of polygons, all is good too.. 1 feature with 2 polygons.

My old code calling MiTAB directly works fine.

Simple code showing the issue

{
        // Register the OGR library
        Ogr.RegisterAll();

        // Create a new MapInfo Tab file
        DataSource ds = Ogr.GetDriverByName("MapInfo File").CreateDataSource(@"c:\temp\playground.tab", null);

        // Create a layer
        Layer layer = ds.CreateLayer("layer", null, wkbGeometryType.wkbUnknown, null);

        // Create a feature
        Feature feature = new Feature(layer.GetLayerDefn());

        // Create a MultiGeometry
        Geometry multiGeometry = new Geometry(wkbGeometryType.wkbGeometryCollection);


        // Add polygons and polylines to the MultiGeometry
        Geometry polygonGeometry = Geometry.CreateFromWkt("POLYGON ((0 0, 0 1, 1 1, 1 0, 0 0))");
        Geometry polylineGeometry = Geometry.CreateFromWkt("LINESTRING (2 0, 3 0, 3 1, 2 1)");

        multiGeometry.AddGeometry(polygonGeometry);
        multiGeometry.AddGeometry(polylineGeometry);

        // Set the MultiGeometry as the feature's geometry
        feature.SetGeometryDirectly(multiGeometry);

        // Create the feature in the layer
        layer.CreateFeature(feature);

        // Cleanup
        feature.Dispose();
        ds.Dispose();
}

I have asked this question on gis.stackexchange too which lead to this mail. Here a user tried the same simple test without using MaxRev's version and came to the same result.

https://gis.stackexchange.com/questions/474496/using-gdal-maxrev-gdal-to-write-tab-files-with-mixed-geometry


Med venlig hilsen

Michael Tjener Pallesen
Softwareudvikler

[cid:image001.png at 01DA4A1C.9FB4D8E0]

Ceres All? 3
8000 Aarhus C
Denmark
www.niras.dk<https://www.niras.dk/?utm_campaign=e-mail-signatur&utm_source=internal&utm_medium=e-mail&utm_content=e-mail-signatur-dk>

M: +45 3085 0906
L: +45 8732 5808
T: +45 8732 3232
E: mtp at niras.dk<mailto:mtp at niras.dk>

F?lg os p?:
[cid:image002.jpg at 01DA4A1C.9FB4D8E0]<https://www.linkedin.com/company/niras/mycompany/verification/>  [cid:image003.jpg at 01DA4A1C.9FB4D8E0] <https://www.facebook.com/NIRASGroup>

[cid:image004.png at 01DA4A1C.9FB4D8E0]

Denne e-mail kan indeholde fortrolige oplysninger. Hvis du fejlagtigt har
modtaget denne, kontakt venligst afsenderen ?jeblikkeligt og slet mailen
samt eventuelle bilag. Kopier ikke denne mail, og undlad at dele dens
indhold med tredje part. Tak. NIRAS' h?ndtering af personlig information
st?r beskrevet i vores privatlivspolitik.<https://www.niras.dk/privacy-policy/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/2bde494a/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 4432 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/2bde494a/attachment-0002.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 940 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/2bde494a/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.jpg
Type: image/jpeg
Size: 887 bytes
Desc: image003.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/2bde494a/attachment-0003.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 3798 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/2bde494a/attachment-0003.png>

From philippe.ghesquiere at airbus.com  Thu Jan 18 06:05:50 2024
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Thu, 18 Jan 2024 15:05:50 +0100
Subject: [gdal-dev] GPKG raster creation : error with too small
 resolution
In-Reply-To: <DB9PR09MB6887F253E756049D55A8778BFD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <CAAes_OG-jGYV_HVL5FcM6T1yTDuydbTS9iA6pbp=2VJmPeLM_g@mail.gmail.com>
 <DB9PR09MB6887F253E756049D55A8778BFD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <CAAes_OFS1PWODWCWsu_Jrzj-yQh4o1a1ihOLp9VGh=yU18zRiw@mail.gmail.com>

Hi Jukka,

I have no choice but to use the standard InspireCRS84Quad tiling grid.

Thanks for the "-a_ullr fix"

Philippe


On Thu, Jan 18, 2024 at 2:42?PM Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
>
>
> Can you imagine using a custom tiling schema instead of the world-wide
> InspireCRS84Quad? These commands work
>
> gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255
> -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000002
> 1000002 1000000 1mm.tif
>
> gdal_translate -of GPKG  1mm.tif 1mm.gpkg
>
> Notice the fixed ullr for making the image north-up.
>
>
>
> -Jukka Rahkonen-
>
>
>
> gdal_translate -of GPKG  1mm.tif 1mm.gpkg
>
> Input file size is 2000, 2000
>
> 0ERROR 6: Only north-up non rotated geotransform supported
>
> ..ERROR 1: Raster table 1mm not correctly initialized due to missing call
> to SetGeoTransform()
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Philippe
> Ghesquiere via gdal-dev
> *L?hetetty:* torstai 18. tammikuuta 2024 15.22
> *Vastaanottaja:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Aihe:* [gdal-dev] GPKG raster creation : error with too small resolution
>
>
>
>
>
> Dear all,
>
> I just had an error while converting an image to GPKG. This image has a
> very small resolution and gdal_translate pops up an error message.
>
> *Test image :*
> gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255
> -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000000
> 1000002 1000002 1mm.tif
>
> *Conversion to GPKG :*
> gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad -co
> ZOOM_LEVEL_STRATEGY=UPPER 1mm.tif 1mm.gpkg
> Input file size is 2000, 2000
> ERROR 1: Could not find an appropriate zoom level
>
> *Analysis*
>
> The error is due to  ogrgeopackagedatasource.cpp
> <https://github.com/OSGeo/gdal/blob/master/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp#L3169> (line
> 3169), and it does make sense : the zoom level is too high (Z>25).
>
>
>
> However, wouldn't it be possible to modify gdal_translate behavior ?
>
> For example, we could :
>
>    - let GDAL compute the appropriate zoom level : -co
>    ZOOM_LEVEL_STRATEGY=AUTO/LOWER/UPPER,
>    - optionally specify a maximum zoom level : -co MAX_ZOOM_LEVEL=18
>
> What do you think ?
>
>
>
> Philippe
>
>
>
> The information in this e-mail is confidential. The contents may not be
> disclosed or used by anyone other than the addressee. Access to this e-mail
> by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus immediately
> and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or completeness
> of this e-mail as it has been sent over public networks. If you have any
> concerns over the content of this message or its Accuracy or Integrity,
> please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated virus
> scanning software but you should take whatever measures you deem to be
> appropriate to ensure that this message and any attachments are virus free.
>
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/ead10134/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan 18 06:35:54 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 18 Jan 2024 14:35:54 +0000
Subject: [gdal-dev] GPKG raster creation : error with too small
 resolution
In-Reply-To: <CAAes_OFS1PWODWCWsu_Jrzj-yQh4o1a1ihOLp9VGh=yU18zRiw@mail.gmail.com>
References: <CAAes_OG-jGYV_HVL5FcM6T1yTDuydbTS9iA6pbp=2VJmPeLM_g@mail.gmail.com>
 <DB9PR09MB6887F253E756049D55A8778BFD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAAes_OFS1PWODWCWsu_Jrzj-yQh4o1a1ihOLp9VGh=yU18zRiw@mail.gmail.com>
Message-ID: <DB9PR09MB6887AC9FB67AB80EA90B72D0FD712@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

I am not sure how standard the level 25 is for the InspireCRS84Quad, the INSPIRE technical guidance stops at 17. But I believe that you know your own use case and have considered also that EPSG:3857 at 1 mm resolution is good for you.

The number of tiles at level 25 is 2^50= 1.1259E+15. TileCol and TileRow would get rather large numbers but I suppose that it is not an issue.

-Jukka Rahkonen-

L?hett?j?: Philippe Ghesquiere <philippe.ghesquiere at airbus.com>
L?hetetty: torstai 18. tammikuuta 2024 16.06
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] GPKG raster creation : error with too small resolution

Hi Jukka,

I have no choice but to use the standard InspireCRS84Quad tiling grid.

Thanks for the "-a_ullr fix"

Philippe


On Thu, Jan 18, 2024 at 2:42?PM Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Can you imagine using a custom tiling schema instead of the world-wide InspireCRS84Quad? These commands work

gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255 -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000002 1000002 1000000 1mm.tif

gdal_translate -of GPKG  1mm.tif 1mm.gpkg

Notice the fixed ullr for making the image north-up.

-Jukka Rahkonen-



gdal_translate -of GPKG  1mm.tif 1mm.gpkg
Input file size is 2000, 2000
0ERROR 6: Only north-up non rotated geotransform supported
..ERROR 1: Raster table 1mm not correctly initialized due to missing call to SetGeoTransform()

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Philippe Ghesquiere via gdal-dev
L?hetetty: torstai 18. tammikuuta 2024 15.22
Vastaanottaja: gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Aihe: [gdal-dev] GPKG raster creation : error with too small resolution


Dear all,

I just had an error while converting an image to GPKG. This image has a very small resolution and gdal_translate pops up an error message.

Test image :
gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255 -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000000 1000002 1000002 1mm.tif

Conversion to GPKG :
gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad -co ZOOM_LEVEL_STRATEGY=UPPER 1mm.tif 1mm.gpkg
Input file size is 2000, 2000
ERROR 1: Could not find an appropriate zoom level

Analysis
The error is due to  ogrgeopackagedatasource.cpp<https://github.com/OSGeo/gdal/blob/master/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp#L3169> (line 3169), and it does make sense : the zoom level is too high (Z>25).

However, wouldn't it be possible to modify gdal_translate behavior ?
For example, we could :

  *   let GDAL compute the appropriate zoom level : -co ZOOM_LEVEL_STRATEGY=AUTO/LOWER/UPPER,
  *   optionally specify a maximum zoom level : -co MAX_ZOOM_LEVEL=18
What do you think ?

Philippe

The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/bcea96b6/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Jan 18 06:47:59 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Jan 2024 15:47:59 +0100
Subject: [gdal-dev] GPKG raster creation : error with too small
 resolution
In-Reply-To: <DB9PR09MB6887AC9FB67AB80EA90B72D0FD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <CAAes_OG-jGYV_HVL5FcM6T1yTDuydbTS9iA6pbp=2VJmPeLM_g@mail.gmail.com>
 <DB9PR09MB6887F253E756049D55A8778BFD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAAes_OFS1PWODWCWsu_Jrzj-yQh4o1a1ihOLp9VGh=yU18zRiw@mail.gmail.com>
 <DB9PR09MB6887AC9FB67AB80EA90B72D0FD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <0010ccea-d6d9-4a6c-94f3-f90229bf7842@spatialys.com>

cf improvement https://github.com/OSGeo/gdal/pull/9101

https://docs.ogc.org/is/17-083r2/17-083r2.html#76 mentions "TileMatrices 
for more detailed scales is possible if they follow the same pattern."? 
. The current limitation to 25 was to make some computations easier, but 
supporting up to 30 (or 29 when MatrixWidth=2 at zoom level = 0) is now 
possible.

Le 18/01/2024 ? 15:35, Rahkonen Jukka via gdal-dev a ?crit?:
>
> Hi,
>
> I am not sure how standard the level 25 is for the InspireCRS84Quad, 
> the INSPIRE technical guidance stops at 17. But I believe that you 
> know your own use case and have considered also that EPSG:3857 at 1 mm 
> resolution is good for you.
>
> The number of tiles at level 25 is 2^50=1.1259E+15. TileCol and 
> TileRow would get rather large numbers but I suppose that it is not an 
> issue.
>
> -Jukka Rahkonen-
>
> *L?hett?j?:* Philippe Ghesquiere <philippe.ghesquiere at airbus.com>
> *L?hetetty:* torstai 18. tammikuuta 2024 16.06
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Aihe:* Re: [gdal-dev] GPKG raster creation : error with too small 
> resolution
>
> Hi Jukka,
>
> I have no choice but to use the standard InspireCRS84Quad tiling grid.
>
> Thanks for the "-a_ullr fix"
>
> Philippe
>
> On Thu, Jan 18, 2024 at 2:42?PM Rahkonen Jukka 
> <jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
>     Hi,
>
>     Can you imagine using a custom tiling schema instead of the
>     world-wide InspireCRS84Quad? These commands work
>
>     gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000
>     -burn 255 -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631
>     -a_ullr 1000000 1000002 1000002 1000000 1mm.tif
>
>     gdal_translate -of GPKG? 1mm.tif 1mm.gpkg
>
>     Notice the fixed ullr for making the image north-up.
>
>     -Jukka Rahkonen-
>
>
>
>     gdal_translate -of GPKG? 1mm.tif 1mm.gpkg
>
>     Input file size is 2000, 2000
>
>     0ERROR 6: Only north-up non rotated geotransform supported
>
>     ..ERROR 1: Raster table 1mm not correctly initialized due to
>     missing call to SetGeoTransform()
>
>     *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta
>     *Philippe Ghesquiere via gdal-dev
>     *L?hetetty:* torstai 18. tammikuuta 2024 15.22
>     *Vastaanottaja:* gdal-dev <gdal-dev at lists.osgeo.org>
>     *Aihe:* [gdal-dev] GPKG raster creation : error with too small
>     resolution
>
>     Dear all,
>
>     I just had an error while converting an image to GPKG. This image
>     has a very small resolution and gdal_translate pops up an error
>     message.
>
>     _Test image :_
>     gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000
>     -burn 255 -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631
>     -a_ullr 1000000 1000000 1000002 1000002 1mm.tif
>
>     _Conversion to GPKG :_
>     gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad -co
>     ZOOM_LEVEL_STRATEGY=UPPER 1mm.tif 1mm.gpkg
>     Input file size is 2000, 2000
>     ERROR 1: Could not find an appropriate zoom level
>
>     _Analysis_
>
>     The error is due to ogrgeopackagedatasource.cpp
>     <https://github.com/OSGeo/gdal/blob/master/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp#L3169>?(line
>     3169), and it does make sense : the zoom level is too high (Z>25).
>
>     However, wouldn't it be possible to modify gdal_translate behavior ?
>
>     For example, we could :
>
>       * let GDAL compute the appropriate zoom level : -co
>         ZOOM_LEVEL_STRATEGY=AUTO/LOWER/UPPER,
>       * optionally?specify a maximum zoom level : -co MAX_ZOOM_LEVEL=18
>
>     What do you think ?
>
>     Philippe
>
>     The information in this e-mail is confidential. The contents may
>     not be disclosed or used by anyone other than the addressee.
>     Access to this e-mail by anyone else is unauthorised.
>     If you are not the intended recipient, please notify Airbus
>     immediately and delete this e-mail.
>     Airbus cannot accept any responsibility for the accuracy or
>     completeness of this e-mail as it has been sent over public
>     networks. If you have any concerns over the content of this
>     message or its Accuracy or Integrity, please contact Airbus
>     immediately.
>     All outgoing e-mails from Airbus are checked using regularly
>     updated virus scanning software but you should take whatever
>     measures you deem to be appropriate to ensure that this message
>     and any attachments are virus free.
>
> The information in this e-mail is confidential. The contents may not 
> be disclosed or used by anyone other than the addressee. Access to 
> this e-mail by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus 
> immediately and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or 
> completeness of this e-mail as it has been sent over public networks. 
> If you have any concerns over the content of this message or its 
> Accuracy or Integrity, please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated 
> virus scanning software but you should take whatever measures you deem 
> to be appropriate to ensure that this message and any attachments are 
> virus free.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/50de3761/attachment.htm>

From philippe.ghesquiere at airbus.com  Thu Jan 18 06:48:40 2024
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Thu, 18 Jan 2024 15:48:40 +0100
Subject: [gdal-dev] GPKG raster creation : error with too small
 resolution
In-Reply-To: <DB9PR09MB6887AC9FB67AB80EA90B72D0FD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <CAAes_OG-jGYV_HVL5FcM6T1yTDuydbTS9iA6pbp=2VJmPeLM_g@mail.gmail.com>
 <DB9PR09MB6887F253E756049D55A8778BFD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAAes_OFS1PWODWCWsu_Jrzj-yQh4o1a1ihOLp9VGh=yU18zRiw@mail.gmail.com>
 <DB9PR09MB6887AC9FB67AB80EA90B72D0FD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <CAAes_OE9QPrL0UCuvPa=Dy58_A93EQBxveywRsrueHbh0oh_xg@mail.gmail.com>

I agree with the standard limit of  the InspireCRS84Quad grid.
That's why I was wondering if we could deal with this weird image like :
gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad -co
ZOOM_LEVEL_STRATEGY=UPPER *-co MAX_ZOOM_LEVEL=17* 1mm.tif 1mm.gpkg

In this particular case, the GPKG will stop at ZoomLevel=17
Philippe

On Thu, Jan 18, 2024 at 3:36?PM Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
>
>
> I am not sure how standard the level 25 is for the InspireCRS84Quad, the
> INSPIRE technical guidance stops at 17. But I believe that you know your
> own use case and have considered also that EPSG:3857 at 1 mm resolution is
> good for you.
>
> The number of tiles at level 25 is 2^50= 1.1259E+15. TileCol and TileRow
> would get rather large numbers but I suppose that it is not an issue.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* Philippe Ghesquiere <philippe.ghesquiere at airbus.com>
> *L?hetetty:* torstai 18. tammikuuta 2024 16.06
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Aihe:* Re: [gdal-dev] GPKG raster creation : error with too small
> resolution
>
>
>
> Hi Jukka,
>
>
>
> I have no choice but to use the standard InspireCRS84Quad tiling grid.
>
>
>
> Thanks for the "-a_ullr fix"
>
>
>
> Philippe
>
>
>
>
>
> On Thu, Jan 18, 2024 at 2:42?PM Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
> Hi,
>
>
>
> Can you imagine using a custom tiling schema instead of the world-wide
> InspireCRS84Quad? These commands work
>
> gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255
> -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000002
> 1000002 1000000 1mm.tif
>
> gdal_translate -of GPKG  1mm.tif 1mm.gpkg
>
> Notice the fixed ullr for making the image north-up.
>
>
>
> -Jukka Rahkonen-
>
>
>
> gdal_translate -of GPKG  1mm.tif 1mm.gpkg
>
> Input file size is 2000, 2000
>
> 0ERROR 6: Only north-up non rotated geotransform supported
>
> ..ERROR 1: Raster table 1mm not correctly initialized due to missing call
> to SetGeoTransform()
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Philippe
> Ghesquiere via gdal-dev
> *L?hetetty:* torstai 18. tammikuuta 2024 15.22
> *Vastaanottaja:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Aihe:* [gdal-dev] GPKG raster creation : error with too small resolution
>
>
>
>
>
> Dear all,
>
> I just had an error while converting an image to GPKG. This image has a
> very small resolution and gdal_translate pops up an error message.
>
> *Test image :*
> gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255
> -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000000
> 1000002 1000002 1mm.tif
>
> *Conversion to GPKG :*
> gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad -co
> ZOOM_LEVEL_STRATEGY=UPPER 1mm.tif 1mm.gpkg
> Input file size is 2000, 2000
> ERROR 1: Could not find an appropriate zoom level
>
> *Analysis*
>
> The error is due to  ogrgeopackagedatasource.cpp
> <https://github.com/OSGeo/gdal/blob/master/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp#L3169> (line
> 3169), and it does make sense : the zoom level is too high (Z>25).
>
>
>
> However, wouldn't it be possible to modify gdal_translate behavior ?
>
> For example, we could :
>
>    - let GDAL compute the appropriate zoom level : -co
>    ZOOM_LEVEL_STRATEGY=AUTO/LOWER/UPPER,
>    - optionally specify a maximum zoom level : -co MAX_ZOOM_LEVEL=18
>
> What do you think ?
>
>
>
> Philippe
>
>
>
> The information in this e-mail is confidential. The contents may not be
> disclosed or used by anyone other than the addressee. Access to this e-mail
> by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus immediately
> and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or completeness
> of this e-mail as it has been sent over public networks. If you have any
> concerns over the content of this message or its Accuracy or Integrity,
> please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated virus
> scanning software but you should take whatever measures you deem to be
> appropriate to ensure that this message and any attachments are virus free.
>
> The information in this e-mail is confidential. The contents may not be
> disclosed or used by anyone other than the addressee. Access to this e-mail
> by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus immediately
> and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or completeness
> of this e-mail as it has been sent over public networks. If you have any
> concerns over the content of this message or its Accuracy or Integrity,
> please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated virus
> scanning software but you should take whatever measures you deem to be
> appropriate to ensure that this message and any attachments are virus free.
>
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/570851ec/attachment-0001.htm>

From philippe.ghesquiere at airbus.com  Thu Jan 18 06:58:07 2024
From: philippe.ghesquiere at airbus.com (Philippe Ghesquiere)
Date: Thu, 18 Jan 2024 15:58:07 +0100
Subject: [gdal-dev] GPKG raster creation : error with too small
 resolution
In-Reply-To: <0010ccea-d6d9-4a6c-94f3-f90229bf7842@spatialys.com>
References: <CAAes_OG-jGYV_HVL5FcM6T1yTDuydbTS9iA6pbp=2VJmPeLM_g@mail.gmail.com>
 <DB9PR09MB6887F253E756049D55A8778BFD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAAes_OFS1PWODWCWsu_Jrzj-yQh4o1a1ihOLp9VGh=yU18zRiw@mail.gmail.com>
 <DB9PR09MB6887AC9FB67AB80EA90B72D0FD712@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <0010ccea-d6d9-4a6c-94f3-f90229bf7842@spatialys.com>
Message-ID: <CAAes_OEOL79NFATYt=c7S5q4QDXrWP0OW83xQxmpBQDKP1LYYQ@mail.gmail.com>

Thanks Even :-)


On Thu, Jan 18, 2024 at 3:48?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> cf improvement https://github.com/OSGeo/gdal/pull/9101
>
> https://docs.ogc.org/is/17-083r2/17-083r2.html#76 mentions "TileMatrices
> for more detailed scales is possible if they follow the same pattern."  .
> The current limitation to 25 was to make some computations easier, but
> supporting up to 30 (or 29 when MatrixWidth=2 at zoom level = 0) is now
> possible.
> Le 18/01/2024 ? 15:35, Rahkonen Jukka via gdal-dev a ?crit :
>
> Hi,
>
>
>
> I am not sure how standard the level 25 is for the InspireCRS84Quad, the
> INSPIRE technical guidance stops at 17. But I believe that you know your
> own use case and have considered also that EPSG:3857 at 1 mm resolution is
> good for you.
>
> The number of tiles at level 25 is 2^50= 1.1259E+15. TileCol and TileRow
> would get rather large numbers but I suppose that it is not an issue.
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* Philippe Ghesquiere <philippe.ghesquiere at airbus.com>
> <philippe.ghesquiere at airbus.com>
> *L?hetetty:* torstai 18. tammikuuta 2024 16.06
> *Vastaanottaja:* Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> <jukka.rahkonen at maanmittauslaitos.fi>
> *Kopio:* gdal-dev <gdal-dev at lists.osgeo.org> <gdal-dev at lists.osgeo.org>
> *Aihe:* Re: [gdal-dev] GPKG raster creation : error with too small
> resolution
>
>
>
> Hi Jukka,
>
>
>
> I have no choice but to use the standard InspireCRS84Quad tiling grid.
>
>
>
> Thanks for the "-a_ullr fix"
>
>
>
> Philippe
>
>
>
>
>
> On Thu, Jan 18, 2024 at 2:42?PM Rahkonen Jukka <
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
> Hi,
>
>
>
> Can you imagine using a custom tiling schema instead of the world-wide
> InspireCRS84Quad? These commands work
>
> gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255
> -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000002
> 1000002 1000000 1mm.tif
>
> gdal_translate -of GPKG  1mm.tif 1mm.gpkg
>
> Notice the fixed ullr for making the image north-up.
>
>
>
> -Jukka Rahkonen-
>
>
>
> gdal_translate -of GPKG  1mm.tif 1mm.gpkg
>
> Input file size is 2000, 2000
>
> 0ERROR 6: Only north-up non rotated geotransform supported
>
> ..ERROR 1: Raster table 1mm not correctly initialized due to missing call
> to SetGeoTransform()
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *Philippe
> Ghesquiere via gdal-dev
> *L?hetetty:* torstai 18. tammikuuta 2024 15.22
> *Vastaanottaja:* gdal-dev <gdal-dev at lists.osgeo.org>
> *Aihe:* [gdal-dev] GPKG raster creation : error with too small resolution
>
>
>
>
>
> Dear all,
>
> I just had an error while converting an image to GPKG. This image has a
> very small resolution and gdal_translate pops up an error message.
>
> *Test image :*
> gdal_create -of GTiff -co COMPRESS=DEFLATE -outsize 2000 2000 -burn 255
> -burn 0 -burn 0 -bands 3 -ot Byte -a_srs epsg:32631 -a_ullr 1000000 1000000
> 1000002 1000002 1mm.tif
>
> *Conversion to GPKG :*
> gdal_translate -of GPKG -co TILING_SCHEME=InspireCRS84Quad -co
> ZOOM_LEVEL_STRATEGY=UPPER 1mm.tif 1mm.gpkg
> Input file size is 2000, 2000
> ERROR 1: Could not find an appropriate zoom level
>
> *Analysis*
>
> The error is due to  ogrgeopackagedatasource.cpp
> <https://github.com/OSGeo/gdal/blob/master/ogr/ogrsf_frmts/gpkg/ogrgeopackagedatasource.cpp#L3169> (line
> 3169), and it does make sense : the zoom level is too high (Z>25).
>
>
>
> However, wouldn't it be possible to modify gdal_translate behavior ?
>
> For example, we could :
>
>    - let GDAL compute the appropriate zoom level : -co
>    ZOOM_LEVEL_STRATEGY=AUTO/LOWER/UPPER,
>    - optionally specify a maximum zoom level : -co MAX_ZOOM_LEVEL=18
>
> What do you think ?
>
>
>
> Philippe
>
>
>
> The information in this e-mail is confidential. The contents may not be
> disclosed or used by anyone other than the addressee. Access to this e-mail
> by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus immediately
> and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or completeness
> of this e-mail as it has been sent over public networks. If you have any
> concerns over the content of this message or its Accuracy or Integrity,
> please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated virus
> scanning software but you should take whatever measures you deem to be
> appropriate to ensure that this message and any attachments are virus free.
>
> The information in this e-mail is confidential. The contents may not be
> disclosed or used by anyone other than the addressee. Access to this e-mail
> by anyone else is unauthorised.
> If you are not the intended recipient, please notify Airbus immediately
> and delete this e-mail.
> Airbus cannot accept any responsibility for the accuracy or completeness
> of this e-mail as it has been sent over public networks. If you have any
> concerns over the content of this message or its Accuracy or Integrity,
> please contact Airbus immediately.
> All outgoing e-mails from Airbus are checked using regularly updated virus
> scanning software but you should take whatever measures you deem to be
> appropriate to ensure that this message and any attachments are virus free.
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
The information in this e-mail is confidential. The contents may not be disclosed or used by anyone other than the addressee. Access to this e-mail by anyone else is unauthorised.
If you are not the intended recipient, please notify Airbus immediately and delete this e-mail.
Airbus cannot accept any responsibility for the accuracy or completeness of this e-mail as it has been sent over public networks. If you have any concerns over the content of this message or its Accuracy or Integrity, please contact Airbus immediately.
All outgoing e-mails from Airbus are checked using regularly updated virus scanning software but you should take whatever measures you deem to be appropriate to ensure that this message and any attachments are virus free.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/a009c20b/attachment-0001.htm>

From a.pau at creaf.uab.cat  Thu Jan 18 12:12:46 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 18 Jan 2024 20:12:46 +0000
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <9054dbe3-96b7-463d-a82a-39f6f1eefcef@spatialys.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <0227aa2e-ada7-4878-a57d-35dc36c69521@spatialys.com>
 <PAXPR07MB7775FF92CFD60E317CD31D80A2722@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9054dbe3-96b7-463d-a82a-39f6f1eefcef@spatialys.com>
Message-ID: <PAXPR07MB777583031470250A95ECDBE4A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>

Even,
thanks a lot.

I moved the file to {my GitHubDir}\GDAL\ogr\ogrsf_frmts\miramon\data\MM_m_idofic.csv
I changed my CMakeLists.txt  (see it below) as you indicated. And I deleted from gdal.cmake than now has only 5 files in there)
I rebased, deleted my gdal\build directory created the project again and built this.

An when I debug it seems that CPLFindFile("gdal", "MM_m_idofic.csv"); returns NULL. If I see inside it has only one locator and it seems that should be more, now...

I am missing something?

The CMakeLists
add_gdal_driver(
  TARGET ogr_MiraMon
  SOURCES ogrmiramondatasource.cpp ogrmiramondriver.cpp ogrmiramonlayer.cpp mm_wrlayr.c mm_gdal_functions.c mmrdlayr.c
  BUILTIN)
gdal_standard_includes(ogr_MiraMon)
target_include_directories(ogr_MiraMon PRIVATE $<TARGET_PROPERTY:ogrsf_generic,SOURCE_DIR>)

set(GDAL_DATA_FILES
    ${CMAKE_CURRENT_SOURCE_DIR}/data/MM_m_idofic.csv
)
set_property(
  TARGET ${GDAL_LIB_TARGET_NAME}
  APPEND
  PROPERTY RESOURCE "${GDAL_DATA_FILES}")

Thanks again


De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dimecres, 17 de gener de 2024 17:13
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Where to fins my own files


Abel,
Le 17/01/2024 ? 15:50, Abel Pau a ?crit :
Hi,
ok Even,

so, as my driver is not already online I have to do some changes at this part of the code, don?t I?

At this moment I have the file in the folder GDAL\data (my GDAL_DATA environment variable).
I call it like that.
aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.csv");

Do I have to move the file to somewhere? where?

I've merged the PR, so you can rebase on top of latest master

No change required in your .cpp file

The only change is to move the resource file into a data/ subdirectory within your ogr/ogrsf_frmts/XXXX driver directory

and add in ogr/ogrsf_frmts/XXX/CMakeLists.txt

set(GDAL_DATA_FILES
    ${CMAKE_CURRENT_SOURCE_DIR}/data/MM_m_idofic.csv
)
set_property(
  TARGET ${GDAL_LIB_TARGET_NAME}
  APPEND
  PROPERTY RESOURCE "${GDAL_DATA_FILES}")

Even



--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/4eb31a01/attachment.htm>

From a.pau at creaf.uab.cat  Thu Jan 18 12:16:32 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 18 Jan 2024 20:16:32 +0000
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <PAXPR07MB777583031470250A95ECDBE4A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <0227aa2e-ada7-4878-a57d-35dc36c69521@spatialys.com>
 <PAXPR07MB7775FF92CFD60E317CD31D80A2722@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9054dbe3-96b7-463d-a82a-39f6f1eefcef@spatialys.com>
 <PAXPR07MB777583031470250A95ECDBE4A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <PAXPR07MB77758AAFEDC1F17C79B40E30A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>

After all that process if I search for the file in all gdal it appears twice:
d:\GitHub-repository\gdal\ogr\ogrsf_frmts\miramon\data\MM_m_idofic.csv <-- OK; where it is...

And here, with all other data files. It is correct?
d:\GitHub-repository\gdal\build\data\MM_m_idofic.csv

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau via gdal-dev
Enviado el: dijous, 18 de gener de 2024 21:13
Para: Even Rouault <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Where to fins my own files

Even,
thanks a lot.

I moved the file to {my GitHubDir}\GDAL\ogr\ogrsf_frmts\miramon\data\MM_m_idofic.csv
I changed my CMakeLists.txt  (see it below) as you indicated. And I deleted from gdal.cmake than now has only 5 files in there)
I rebased, deleted my gdal\build directory created the project again and built this.

An when I debug it seems that CPLFindFile("gdal", "MM_m_idofic.csv"); returns NULL. If I see inside it has only one locator and it seems that should be more, now...

I am missing something?

The CMakeLists
add_gdal_driver(
  TARGET ogr_MiraMon
  SOURCES ogrmiramondatasource.cpp ogrmiramondriver.cpp ogrmiramonlayer.cpp mm_wrlayr.c mm_gdal_functions.c mmrdlayr.c
  BUILTIN)
gdal_standard_includes(ogr_MiraMon)
target_include_directories(ogr_MiraMon PRIVATE $<TARGET_PROPERTY:ogrsf_generic,SOURCE_DIR>)

set(GDAL_DATA_FILES
    ${CMAKE_CURRENT_SOURCE_DIR}/data/MM_m_idofic.csv
)
set_property(
  TARGET ${GDAL_LIB_TARGET_NAME}
  APPEND
  PROPERTY RESOURCE "${GDAL_DATA_FILES}")

Thanks again


De: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Enviado el: dimecres, 17 de gener de 2024 17:13
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Where to fins my own files


Abel,
Le 17/01/2024 ? 15:50, Abel Pau a ?crit :
Hi,
ok Even,

so, as my driver is not already online I have to do some changes at this part of the code, don?t I?

At this moment I have the file in the folder GDAL\data (my GDAL_DATA environment variable).
I call it like that.
aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.csv");

Do I have to move the file to somewhere? where?

I've merged the PR, so you can rebase on top of latest master

No change required in your .cpp file

The only change is to move the resource file into a data/ subdirectory within your ogr/ogrsf_frmts/XXXX driver directory

and add in ogr/ogrsf_frmts/XXX/CMakeLists.txt

set(GDAL_DATA_FILES
    ${CMAKE_CURRENT_SOURCE_DIR}/data/MM_m_idofic.csv
)
set_property(
  TARGET ${GDAL_LIB_TARGET_NAME}
  APPEND
  PROPERTY RESOURCE "${GDAL_DATA_FILES}")

Even


--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/ff4d792a/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Jan 18 12:20:54 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Jan 2024 21:20:54 +0100
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <PAXPR07MB77758AAFEDC1F17C79B40E30A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <0227aa2e-ada7-4878-a57d-35dc36c69521@spatialys.com>
 <PAXPR07MB7775FF92CFD60E317CD31D80A2722@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9054dbe3-96b7-463d-a82a-39f6f1eefcef@spatialys.com>
 <PAXPR07MB777583031470250A95ECDBE4A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <PAXPR07MB77758AAFEDC1F17C79B40E30A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <e320e86d-a52e-4690-af78-4852e92f3145@spatialys.com>


Le 18/01/2024 ? 21:16, Abel Pau a ?crit?:
>
> After all that process if I search for the file in all gdal it appears 
> twice:
>
> d:\GitHub-repository\gdal\ogr\ogrsf_frmts\miramon\data\MM_m_idofic.csv 
> <-- OK; where it is...
>
Yes, this is the location of the source file, as stored in the git 
repository and in release source tarballs.
>
> And here, with all other data files. It is correct?
>
> d:\GitHub-repository\gdal\build\data\MM_m_idofic.csv
>
Yes, build artifact copied from source location by the logic at 
https://github.com/OSGeo/gdal/blob/a090314330026333eba534d50f74499ffee76d63/gdal.cmake#L671

As I mentioned yesterday, for development builds, you should change your 
GDAL_DATA env var now to point to d:\GitHub-repository\gdal\build\data

Even

> *De:*gdal-dev <gdal-dev-bounces at lists.osgeo.org> *En nombre de *Abel 
> Pau via gdal-dev
> *Enviado el:* dijous, 18 de gener de 2024 21:13
> *Para:* Even Rouault <even.rouault at spatialys.com>; 
> gdal-dev at lists.osgeo.org
> *Asunto:* Re: [gdal-dev] Where to fins my own files
>
> Even,
>
> thanks a lot.
>
> I moved the file to {my 
> GitHubDir}\GDAL\ogr\ogrsf_frmts\miramon\data\MM_m_idofic.csv
>
> I changed my CMakeLists.txt ?(see it below) as you indicated. And I 
> deleted from gdal.cmake than now has only 5 files in there)
>
> I rebased, deleted my gdal\build directory created the project again 
> and built this.
>
> An when I debug it seems that CPLFindFile("gdal", 
> "MM_m_idofic.csv");returns NULL. If I see inside it has only one 
> locator and it seems that should be more, now...
>
> I am missing something?
>
> The CMakeLists
>
> add_gdal_driver(
>
> TARGETogr_MiraMon
>
> SOURCESogrmiramondatasource.cpp ogrmiramondriver.cpp 
> ogrmiramonlayer.cpp mm_wrlayr.c mm_gdal_functions.c mmrdlayr.c
>
> BUILTIN)
>
> gdal_standard_includes(ogr_MiraMon)
>
> target_include_directories(ogr_MiraMon 
> PRIVATE$<TARGET_PROPERTY:ogrsf_generic,SOURCE_DIR>)
>
> set(GDAL_DATA_FILES
>
> *${CMAKE_CURRENT_SOURCE_DIR}*/data/MM_m_idofic.csv
>
> )
>
> set_property(
>
> TARGET*${GDAL_LIB_TARGET_NAME}*
>
> APPEND
>
> PROPERTY RESOURCE"*${GDAL_DATA_FILES}*")
>
> Thanks again
>
> *De:*Even Rouault <even.rouault at spatialys.com>
> *Enviado el:* dimecres, 17 de gener de 2024 17:13
> *Para:* Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
> *Asunto:* Re: [gdal-dev] Where to fins my own files
>
> Abel,
>
> Le 17/01/2024 ? 15:50, Abel Pau a ?crit?:
>
>     Hi,
>
>     ok Even,
>
>     so, as my driver is not already online I have to do some changes
>     at this part of the code, don?t I?
>
>     At this moment I have the file in the folder GDAL\data (my
>     GDAL_DATA environment variable).
>
>     I call it like that.
>
>     aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.csv");
>
>     Do I have to move the file to somewhere? where?
>
> I've merged the PR, so you can rebase on top of latest master
>
> No change required in your .cpp file
>
> The only change is to move the resource file into a data/ subdirectory 
> within your ogr/ogrsf_frmts/XXXX driver directory
>
> and add in ogr/ogrsf_frmts/XXX/CMakeLists.txt
>
>
> set(GDAL_DATA_FILES
> ??? ${CMAKE_CURRENT_SOURCE_DIR}/data/MM_m_idofic.csv
> )
> set_property(
> ? TARGET ${GDAL_LIB_TARGET_NAME}
> ? APPEND
> ? PROPERTY RESOURCE "${GDAL_DATA_FILES}")
>
> Even
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/fc382704/attachment.htm>

From a.pau at creaf.uab.cat  Thu Jan 18 12:22:38 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 18 Jan 2024 20:22:38 +0000
Subject: [gdal-dev] Where to fins my own files
In-Reply-To: <e320e86d-a52e-4690-af78-4852e92f3145@spatialys.com>
References: <PAXPR07MB7775CF2C053A2D40777C0FEAA2652@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <0227aa2e-ada7-4878-a57d-35dc36c69521@spatialys.com>
 <PAXPR07MB7775FF92CFD60E317CD31D80A2722@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9054dbe3-96b7-463d-a82a-39f6f1eefcef@spatialys.com>
 <PAXPR07MB777583031470250A95ECDBE4A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <PAXPR07MB77758AAFEDC1F17C79B40E30A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <e320e86d-a52e-4690-af78-4852e92f3145@spatialys.com>
Message-ID: <PAXPR07MB77752FDBCFB7681B1A7B7595A2712@PAXPR07MB7775.eurprd07.prod.outlook.com>

Even, you are absolutely right.
I just realized it now.
Thanks, It works now!


De: Even Rouault <even.rouault at spatialys.com>
Enviado el: dijous, 18 de gener de 2024 21:21
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Where to fins my own files



Le 18/01/2024 ? 21:16, Abel Pau a ?crit :
After all that process if I search for the file in all gdal it appears twice:
d:\GitHub-repository\gdal\ogr\ogrsf_frmts\miramon\data\MM_m_idofic.csv <-- OK; where it is...
Yes, this is the location of the source file, as stored in the git repository and in release source tarballs.


And here, with all other data files. It is correct?
d:\GitHub-repository\gdal\build\data\MM_m_idofic.csv

Yes, build artifact copied from source location by the logic at https://github.com/OSGeo/gdal/blob/a090314330026333eba534d50f74499ffee76d63/gdal.cmake#L671

As I mentioned yesterday, for development builds, you should change your GDAL_DATA env var now to point to d:\GitHub-repository\gdal\build\data

Even

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org><mailto:gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau via gdal-dev
Enviado el: dijous, 18 de gener de 2024 21:13
Para: Even Rouault <even.rouault at spatialys.com><mailto:even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Where to fins my own files

Even,
thanks a lot.

I moved the file to {my GitHubDir}\GDAL\ogr\ogrsf_frmts\miramon\data\MM_m_idofic.csv
I changed my CMakeLists.txt  (see it below) as you indicated. And I deleted from gdal.cmake than now has only 5 files in there)
I rebased, deleted my gdal\build directory created the project again and built this.

An when I debug it seems that CPLFindFile("gdal", "MM_m_idofic.csv"); returns NULL. If I see inside it has only one locator and it seems that should be more, now...

I am missing something?

The CMakeLists
add_gdal_driver(
  TARGET ogr_MiraMon
  SOURCES ogrmiramondatasource.cpp ogrmiramondriver.cpp ogrmiramonlayer.cpp mm_wrlayr.c mm_gdal_functions.c mmrdlayr.c
  BUILTIN)
gdal_standard_includes(ogr_MiraMon)
target_include_directories(ogr_MiraMon PRIVATE $<TARGET_PROPERTY:ogrsf_generic,SOURCE_DIR>)

set(GDAL_DATA_FILES
    ${CMAKE_CURRENT_SOURCE_DIR}/data/MM_m_idofic.csv
)
set_property(
  TARGET ${GDAL_LIB_TARGET_NAME}
  APPEND
  PROPERTY RESOURCE "${GDAL_DATA_FILES}")

Thanks again


De: Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>>
Enviado el: dimecres, 17 de gener de 2024 17:13
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Where to fins my own files


Abel,
Le 17/01/2024 ? 15:50, Abel Pau a ?crit :
Hi,
ok Even,

so, as my driver is not already online I have to do some changes at this part of the code, don?t I?

At this moment I have the file in the folder GDAL\data (my GDAL_DATA environment variable).
I call it like that.
aMMIDDBFFile=CPLFindFile("gdal", "MM_m_idofic.csv");

Do I have to move the file to somewhere? where?

I've merged the PR, so you can rebase on top of latest master

No change required in your .cpp file

The only change is to move the resource file into a data/ subdirectory within your ogr/ogrsf_frmts/XXXX driver directory

and add in ogr/ogrsf_frmts/XXX/CMakeLists.txt

set(GDAL_DATA_FILES
    ${CMAKE_CURRENT_SOURCE_DIR}/data/MM_m_idofic.csv
)
set_property(
  TARGET ${GDAL_LIB_TARGET_NAME}
  APPEND
  PROPERTY RESOURCE "${GDAL_DATA_FILES}")

Even


--

http://www.spatialys.com

My software is free, but my time generally not.

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240118/1b309db7/attachment-0001.htm>

From a.neumann at carto.net  Fri Jan 19 02:36:39 2024
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 19 Jan 2024 11:36:39 +0100
Subject: [gdal-dev] gdal2tiles custom tms configuration not found
Message-ID: <9af5f5c18f82c575b16bd5ff01c5b3d2@carto.net>



Hi,

I would like to use gdal2tiles with a custom tms profile file. I 
prepared the json file attached in this mail and put this json file in 
the /usr/share/gdal folder, there there are already other such files, 
e.g. from New Zealand or Antartica.

However, when I try to use this custon tms config, gdal2tiles tells me 
it can't find this profile. Here is my command I used:

gdal2tiles.py -p 2056_28 -z 16 -w openlayers -t "Swiss Hillshading 
Grayscale" -r cubic -s EPSG:2056 -a 0.0 -e -n 
lv_16_switzerland_hillshading_small-scale_swissalti3d-srtm_100m_jpeg.tif 
tiles

Do I need to register the custom TMS config json file somewhere in 
addition to copying it to the /usr/share/gdal directory?

Thank you for your help!

Andreas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/c3dd3b5c/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: tms_Swisstopo_2056_28.json
Type: application/json
Size: 8711 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/c3dd3b5c/attachment.json>

From a.neumann at carto.net  Fri Jan 19 03:03:11 2024
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 19 Jan 2024 12:03:11 +0100
Subject: [gdal-dev] gdal2tiles custom tms configuration not found
In-Reply-To: <9af5f5c18f82c575b16bd5ff01c5b3d2@carto.net>
References: <9af5f5c18f82c575b16bd5ff01c5b3d2@carto.net>
Message-ID: <2da898b858f74de2a3aa329624f5366b@carto.net>



Hi,

Just found 
https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/gdal2tiles.py#L272 
where it seems to look for all files following the naming scheme 
"tms_*.json". Therefore I don't know why my custom tms configuration 
files is not found - any ideas?

My custom tms json file also has an identifier set to '2056_28'.

Here is the error message I get:
gdal2tiles.py: error: option -p: invalid choice: '2056_28' (choose from 
'mercator', 'geodetic', 'raster', 'LINZAntarticaMapTilegrid', 'APSTILE')

Andreas

On 2024-01-19 11:36, Andreas Neumann via gdal-dev wrote:

> Hi,
> 
> I would like to use gdal2tiles with a custom tms profile file. I 
> prepared the json file attached in this mail and put this json file in 
> the /usr/share/gdal folder, there there are already other such files, 
> e.g. from New Zealand or Antartica.
> 
> However, when I try to use this custon tms config, gdal2tiles tells me 
> it can't find this profile. Here is my command I used:
> 
> gdal2tiles.py -p 2056_28 -z 16 -w openlayers -t "Swiss Hillshading 
> Grayscale" -r cubic -s EPSG:2056 -a 0.0 -e -n 
> lv_16_switzerland_hillshading_small-scale_swissalti3d-srtm_100m_jpeg.tif 
> tiles
> 
> Do I need to register the custom TMS config json file somewhere in 
> addition to copying it to the /usr/share/gdal directory?
> 
> Thank you for your help!
> 
> Andreas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/cce4f356/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jan 19 03:23:33 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 19 Jan 2024 11:23:33 +0000
Subject: [gdal-dev] gdal2tiles custom tms configuration not found
In-Reply-To: <2da898b858f74de2a3aa329624f5366b@carto.net>
References: <9af5f5c18f82c575b16bd5ff01c5b3d2@carto.net>
 <2da898b858f74de2a3aa329624f5366b@carto.net>
Message-ID: <DB9PR09MB688776A4919F5FDB01749DA0FD702@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Support has been added in https://github.com/OSGeo/gdal/pull/2757/files and PR seems to include some tests.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Andreas Neumann via gdal-dev
L?hetetty: perjantai 19. tammikuuta 2024 13.03
Vastaanottaja: Andreas Neumann <a.neumann at carto.net>
Kopio: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] gdal2tiles custom tms configuration not found


Hi,

Just found https://github.com/OSGeo/gdal/blob/master/swig/python/gdal-utils/osgeo_utils/gdal2tiles.py#L272 where it seems to look for all files following the naming scheme "tms_*.json". Therefore I don't know why my custom tms configuration files is not found - any ideas?

My custom tms json file also has an identifier set to '2056_28'.

Here is the error message I get:
gdal2tiles.py: error: option -p: invalid choice: '2056_28' (choose from 'mercator', 'geodetic', 'raster', 'LINZAntarticaMapTilegrid', 'APSTILE')

Andreas



On 2024-01-19 11:36, Andreas Neumann via gdal-dev wrote:

Hi,

I would like to use gdal2tiles with a custom tms profile file. I prepared the json file attached in this mail and put this json file in the /usr/share/gdal folder, there there are already other such files, e.g. from New Zealand or Antartica.

However, when I try to use this custon tms config, gdal2tiles tells me it can't find this profile. Here is my command I used:

gdal2tiles.py -p 2056_28 -z 16 -w openlayers -t "Swiss Hillshading Grayscale" -r cubic -s EPSG:2056 -a 0.0 -e -n lv_16_switzerland_hillshading_small-scale_swissalti3d-srtm_100m_jpeg.tif tiles

Do I need to register the custom TMS config json file somewhere in addition to copying it to the /usr/share/gdal directory?

Thank you for your help!

Andreas

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/2fb868ed/attachment-0001.htm>

From even.rouault at spatialys.com  Fri Jan 19 04:08:00 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Jan 2024 13:08:00 +0100
Subject: [gdal-dev] gdal2tiles custom tms configuration not found
In-Reply-To: <9af5f5c18f82c575b16bd5ff01c5b3d2@carto.net>
References: <9af5f5c18f82c575b16bd5ff01c5b3d2@carto.net>
Message-ID: <9ffe2f5e-f321-4324-b006-0757d5f20c85@spatialys.com>

Andreas,

the reason is that the resolution of some consecutive levels in your 
custom TMS files is not varying by a factor of 2, which gdal2tiles 
doesn't support at the moment (debug message just added in master to 
help diagnose)

Even

Le 19/01/2024 ? 11:36, Andreas Neumann via gdal-dev a ?crit?:
>
> Hi,
>
> I would like to use gdal2tiles with a custom tms profile file. I 
> prepared the json file attached in this mail and put this json file in 
> the /usr/share/gdal folder, there there are already other such files, 
> e.g. from New Zealand or Antartica.
>
> However, when I try to use this custon tms config, gdal2tiles tells me 
> it can't find this profile. Here is my command I used:
>
> gdal2tiles.py -p 2056_28 -z 16 -w openlayers -t "Swiss Hillshading 
> Grayscale" -r cubic -s EPSG:2056 -a 0.0 -e -n 
> lv_16_switzerland_hillshading_small-scale_swissalti3d-srtm_100m_jpeg.tif 
> tiles
>
> Do I need to register the custom TMS config json file somewhere in 
> addition to copying it to the /usr/share/gdal directory?
>
> Thank you for your help!
>
> Andreas
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From a.neumann at carto.net  Fri Jan 19 04:21:58 2024
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri, 19 Jan 2024 13:21:58 +0100
Subject: [gdal-dev] gdal2tiles custom tms configuration not found
In-Reply-To: <9ffe2f5e-f321-4324-b006-0757d5f20c85@spatialys.com>
References: <9af5f5c18f82c575b16bd5ff01c5b3d2@carto.net>
 <9ffe2f5e-f321-4324-b006-0757d5f20c85@spatialys.com>
Message-ID: <6ea251b5dceb681724ea202c5c5cadbf@carto.net>



Hi Even,

Thank you - that explains it. I will probably switch to some other tools 
then - maybe MapProxy. I wanted to use this custom tms configuration 
from Swisstopo - to stay compatible with their web services.

Thank you for adding a better error output!

Andreas

On 2024-01-19 13:08, Even Rouault wrote:

> Andreas,
> 
> the reason is that the resolution of some consecutive levels in your 
> custom TMS files is not varying by a factor of 2, which gdal2tiles 
> doesn't support at the moment (debug message just added in master to 
> help diagnose)
> 
> Even
> 
> Le 19/01/2024 ? 11:36, Andreas Neumann via gdal-dev a ?crit :
> 
>> Hi,
>> 
>> I would like to use gdal2tiles with a custom tms profile file. I 
>> prepared the json file attached in this mail and put this json file in 
>> the /usr/share/gdal folder, there there are already other such files, 
>> e.g. from New Zealand or Antartica.
>> 
>> However, when I try to use this custon tms config, gdal2tiles tells me 
>> it can't find this profile. Here is my command I used:
>> 
>> gdal2tiles.py -p 2056_28 -z 16 -w openlayers -t "Swiss Hillshading 
>> Grayscale" -r cubic -s EPSG:2056 -a 0.0 -e -n 
>> lv_16_switzerland_hillshading_small-scale_swissalti3d-srtm_100m_jpeg.tif 
>> tiles
>> 
>> Do I need to register the custom TMS config json file somewhere in 
>> addition to copying it to the /usr/share/gdal directory?
>> 
>> Thank you for your help!
>> 
>> Andreas
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/f13da1c9/attachment.htm>

From a.pau at creaf.uab.cat  Fri Jan 19 07:54:06 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 19 Jan 2024 15:54:06 +0000
Subject: [gdal-dev] Fields of type List to simple fields with N times the
 feature?
Message-ID: <PAXPR07MB777523F635DC737A9CAC177CA2702@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hello,

we have tried to generate some layers from MiraMon to SHP, KML, or GPKG, and we have noticed that they do not support "List" field cases. They give a warning like: "The output driver does not seem to natively support IntegerList type for field "XX".

It could be interesting if a driver could output a feature with "List" type fields as the same feature repeated as many times as the elements in the List, if the user requests it (via -lco). This would be beneficial to avoid losing elements from fields that are of type List.

The current implementation generates an IntegerList, but this modification could be done.

As we want to export the information somehow, even if it's not perfect, we are wondering which of these solutions we can apply:
1. (preferable) export N objects, each with a single attribute, not as an "IntegerList" but as N "Integer/Float, etc" objects.
2. export a single object with a single attribute (which could be chosen with a -lco).

However, we are wondering how we should handle the GetFeatureCount() function in case 1 (from the above).
And we also wonder how to handle the GetNextRawFeature() function. Since this function can indicate that it has returned more than one element (in case 1).

Thanks for taking it in consideration.


Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat> | http://blog.creaf.cat
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/525a15de/attachment-0003.jpg>

From even.rouault at spatialys.com  Fri Jan 19 08:09:16 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Jan 2024 17:09:16 +0100
Subject: [gdal-dev] Fields of type List to simple fields with N times
 the feature?
In-Reply-To: <PAXPR07MB777523F635DC737A9CAC177CA2702@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB777523F635DC737A9CAC177CA2702@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <b7ce4180-5e29-42cd-ba42-0f5ba84d22bd@spatialys.com>


Le 19/01/2024 ? 16:54, Abel Pau via gdal-dev a ?crit?:
>
> Hello,
>
> we have tried to generate some layers from MiraMon to SHP, KML, or 
> GPKG, and we have noticed that they do not support "List" field cases. 
> They give a warning like: "The output driver does not seem to natively 
> support IntegerList type for field ?XX?.
>
> It could be interesting if a driver could output a feature with "List" 
> type fields as the same feature repeated as many times as the elements 
> in the List, if the user requests it (via ?lco). This would be 
> beneficial to avoid losing elements from fields that are of type List.
>
> The current implementation generates an IntegerList, but this 
> modification could be done.
>
> As we want to export the information somehow, even if it's not 
> perfect, we are wondering which of these solutions we can apply:
>
> 1. (preferable) export N objects, each with a single attribute, not as 
> an "IntegerList" but as N "Integer/Float, etc" objects.
>
> 2. export a single object with a single attribute (which could be 
> chosen with a -lco).
>
> However, we are wondering how we should handle the GetFeatureCount() 
> function in case 1 (from the above).
>
> And we also wonder how to handle the GetNextRawFeature() function. 
> Since this function can indicate that it has returned more than one 
> element (in case 1).
>
Don't complicate your driver. This is just a usage issue of ogr2ogr. As 
hinted by it, you need to pass for example -mapFieldType 
IntegerList=String to ask ogr2ogr to transform IntegerLst fields into string


$ cat test.json
{
"type": "FeatureCollection",
"name": "test",
"features": [
{ "type": "Feature", "properties": { "id": 1, "attr": [2,3] }, 
"geometry": null }
]
}

$ ogr2ogr out.shp test.json -mapFieldType IntegerList=String

$ ogrinfo out.shp -al -q

Layer name: out
Metadata:
 ? DBF_DATE_LAST_UPDATE=2024-01-19
OGRFeature(out):0
 ? id (Integer) = 1
 ? attr (String) = (2:2,3)

Even

> Thanks for taking it in consideration.
>
> *Abel Pau Garcia*
>
> *GIS developer*
>
> 	
>
> https://www.creaf.cat/sites/default/files/creaf-signature.png
>
> *a.pau at creaf.uab.cat* <mailto:a.pau at creaf.uab.cat>
>
> *Let's chat on Teams!* 
> <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
> *Tel. +34 934814277*
>
> 	
>
> https://www.creaf.cat/sites/default/files/so-en-signature.png
>
> https://www.creaf.cat/sites/default/files/twitter-icon-signature.png 
> <https://twitter.com/CREAF_ecologia>https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png 
> <https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>https://www.creaf.cat/sites/default/files/youtube-icon-signature.png 
> <https://www.youtube.com/c/creafecologia>https://www.creaf.cat/sites/default/files/instagram-icon-signature.png 
> <https://www.instagram.com/CREAF_ecologia/>
>
> *www.creaf.cat* <http://www.creaf.cat>*| **http://blog.creaf.cat* 
> <http://blog.creaf.cat>
>
> 	
>
> https://www.creaf.cat/sites/default/files/uab_logo_signatura.png
>
> CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)
>
>
> Before printing this electronic message, think about the environment.
>
> http://www.creaf.uab.cat/_signatura/line.gif
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/72d8f55b/attachment-0003.jpg>

From even.rouault at spatialys.com  Fri Jan 19 08:15:41 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Jan 2024 17:15:41 +0100
Subject: [gdal-dev] Fields of type List to simple fields with N times
 the feature?
In-Reply-To: <b7ce4180-5e29-42cd-ba42-0f5ba84d22bd@spatialys.com>
References: <PAXPR07MB777523F635DC737A9CAC177CA2702@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <b7ce4180-5e29-42cd-ba42-0f5ba84d22bd@spatialys.com>
Message-ID: <ef4f83b6-64e9-4f7b-8a4f-b482112700c2@spatialys.com>

Actually, an alternative would be that you type your list fields with 
type=OFTString and subtype=OFSTJSon, and emit a serialized JSON array 
(``[1,2]``). This is probably more in the spirit of nowadays uses, and 
that should make all output drivers happy (at worse they won't 
understand the JSON hint)

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/ae2850e9/attachment.htm>

From robert.coup at koordinates.com  Fri Jan 19 08:40:28 2024
From: robert.coup at koordinates.com (Robert Coup)
Date: Fri, 19 Jan 2024 16:40:28 +0000
Subject: [gdal-dev] Convert alpha to nodata?
Message-ID: <CAFLLRpJuMq6cUQSjeAc=Xf0NCtUXKKj5AUpUvnpie075u5kTLQ@mail.gmail.com>

Maybe it's just Friday, but I could use a pointer here :-)

My input raster is a RGBA byte image, where the alpha channel value is 0 or
255 (ie: effectively a mask). The output is ideally a VRT file, RGB with
Int16 data type, using nodata=-1.

So I want to convert the alpha channel to a nodata value.

The alpha/nodata/mask/band options to translate/warp haven't got me very
far, neither has hand-crafting various UseMaskBand/MaskBand elements in a
VRT.

I can do it to concrete tif files with something like this, repeating for
R,G,B and merge the output bands together, but it's a lot of processing.

  gdal_calc.py -A src.tif -B src.tif \
    --outfile out_b1.tif --co TILED=YES --type=Int16 --NoDataValue=-1 \
    --A_band=1 --B_band=4 --calc="where(B >= 128, A, -1)"

I feel like I'm probably missing a simpler path? (Which I will definitely
add to an Examples section somewhere)

Thanks,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240119/94c1614b/attachment.htm>

From even.rouault at spatialys.com  Fri Jan 19 09:32:38 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Jan 2024 18:32:38 +0100
Subject: [gdal-dev] Convert alpha to nodata?
In-Reply-To: <CAFLLRpJuMq6cUQSjeAc=Xf0NCtUXKKj5AUpUvnpie075u5kTLQ@mail.gmail.com>
References: <CAFLLRpJuMq6cUQSjeAc=Xf0NCtUXKKj5AUpUvnpie075u5kTLQ@mail.gmail.com>
Message-ID: <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>

Hi Rob,

I can't think an easy way of doing what you want.

Well, you can definitely do that using a VRT Python pixel function, that 
would essentially do your --calc expression

Cf 
https://gdal.org/drivers/raster/vrt.html#using-derived-bands-with-pixel-functions-in-python

The example of 
https://gdal.org/drivers/raster/vrt.html#vrt-that-adds-2-or-more-rasters 
is probably the closest starting point. (you can add <SourceBand> to the 
<SimpleSource>'s to specify bands 1 and 4)

A nice exercice for (Pythonist) contributors would be to add a -f VRT 
capability to gdal_calc.py that would essentially automate the writing 
of such VRT using Python pixel functions. Just saying...

Even

Le 19/01/2024 ? 17:40, Robert Coup via gdal-dev a ?crit?:
> Maybe it's just Friday, but I could use a pointer here :-)
>
> My input raster is a RGBA byte image, where the alpha channel value is 
> 0 or 255 (ie: effectively a mask). The output is ideally a VRT file, 
> RGB with Int16 data type, using nodata=-1.
>
> So I want to convert the alpha channel to a nodata value.
>
> The alpha/nodata/mask/band options to translate/warp haven't got me 
> very far, neither has hand-crafting various UseMaskBand/MaskBand 
> elements in a VRT.
>
> I can do it to concrete tif files with something like this, 
> repeating?for R,G,B and merge the output bands together, but it's a 
> lot of processing.
>
> ? gdal_calc.py -A src.tif -B src.tif \
> ? ? --outfile out_b1.tif --co TILED=YES --type=Int16 --NoDataValue=-1 \
> ? ? --A_band=1 --B_band=4 --calc="where(B >= 128, A, -1)"
>
> I feel like?I'm probably missing a simpler path? (Which I will 
> definitely add to an Examples section somewhere)
>
> Thanks,
>
> Rob :)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Sat Jan 20 10:42:58 2024
From: public at postholer.com (Scott)
Date: Sat, 20 Jan 2024 10:42:58 -0800
Subject: [gdal-dev] Convert alpha to nodata?
In-Reply-To: <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>
References: <CAFLLRpJuMq6cUQSjeAc=Xf0NCtUXKKj5AUpUvnpie075u5kTLQ@mail.gmail.com>
 <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>
Message-ID: <a9422956-3dd2-45ba-adc0-f19296fcd2b7@postholer.com>

+10

I'll buy them a 12 pack of their favorite micro-brew.

On 1/19/24 09:32, Even Rouault via gdal-dev wrote:
> A nice exercice for (Pythonist) contributors would be to add a -f VRT 
> capability to gdal_calc.py that would essentially automate the writing 
> of such VRT using Python pixel functions. Just saying...

From robert.coup at koordinates.com  Mon Jan 22 05:26:46 2024
From: robert.coup at koordinates.com (Robert Coup)
Date: Mon, 22 Jan 2024 13:26:46 +0000
Subject: [gdal-dev] Convert alpha to nodata?
In-Reply-To: <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>
References: <CAFLLRpJuMq6cUQSjeAc=Xf0NCtUXKKj5AUpUvnpie075u5kTLQ@mail.gmail.com>
 <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>
Message-ID: <CAFLLRpL3z_WMG1RQL3B4gEwsM3DSJS_xpP_eBNhJM6zFyYqy8A@mail.gmail.com>

Hi Even,

Thanks for your reply!

On Fri, 19 Jan 2024 at 17:32, Even Rouault <even.rouault at spatialys.com>
wrote:

> I can't think an easy way of doing what you want.
>

Is there a functional gap? *Conceptually* it feels to me like
VRTRasterBand.ComplexSource.UseMaskBand should "mark" a pixel to be
nodata-equivalent (NaN?), and then VRTRasterBand.NoDataValue should "write"
the nodata-marked pixels with the value.

<VRTDataset ...>
  ...
  <VRTRasterBand dataType="Int16" band="1">
    <NoDataValue>-1</NoDataValue>
    <ComplexSource>
      <SourceFilename>in.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <UseMaskBand>true</UseMaskBand>
      ...
    </ComplexSource>
    ...
  </VRTRasterBand>


But maybe that's not how it's modelled inside?


> Well, you can definitely do that using a VRT Python pixel function, that
> would essentially do your --calc expression
>

Thanks for confirming it's possible, I'll have a play.

>From what I can see the python pixel functions are only called once,
use numpy and (IIUC) vectorised CPU operations... would that make it
faster/comparable to one of the C pixel functions that's doing a naive
array loop over rows & columns?


> A nice exercice for (Pythonist) contributors would be to add a -f VRT
> capability to gdal_calc.py that would essentially automate the writing
> of such VRT using Python pixel functions. Just saying...


*adds to a long list of nice exercises*

Thanks

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/3fcb7d6a/attachment.htm>

From even.rouault at spatialys.com  Mon Jan 22 05:38:33 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jan 2024 14:38:33 +0100
Subject: [gdal-dev] Convert alpha to nodata?
In-Reply-To: <CAFLLRpL3z_WMG1RQL3B4gEwsM3DSJS_xpP_eBNhJM6zFyYqy8A@mail.gmail.com>
References: <CAFLLRpJuMq6cUQSjeAc=Xf0NCtUXKKj5AUpUvnpie075u5kTLQ@mail.gmail.com>
 <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>
 <CAFLLRpL3z_WMG1RQL3B4gEwsM3DSJS_xpP_eBNhJM6zFyYqy8A@mail.gmail.com>
Message-ID: <bb233d36-aa36-4b01-9b1d-4f4165a3df68@spatialys.com>


Le 22/01/2024 ? 14:26, Robert Coup a ?crit?:
> Hi Even,
>
> Thanks for your reply!
>
> On Fri, 19 Jan 2024 at 17:32, Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     I can't think an easy way of doing what you want.
>
>
> Is there a functional gap? /Conceptually/?it feels to me like 
> VRTRasterBand.ComplexSource.UseMaskBand should "mark" a pixel to be 
> nodata-equivalent (NaN?), and then VRTRasterBand.NoDataValue should 
> "write" the nodata-marked pixels with the value.
>
>     <VRTDataset ...>
>     ? ...
>     ? <VRTRasterBand dataType="Int16" band="1">
>     <NoDataValue>-1</NoDataValue>
>     ? ? <ComplexSource>
>     <SourceFilename>in.tif</SourceFilename>
>     <SourceBand>1</SourceBand>
>     <UseMaskBand>true</UseMaskBand>
>     ? ? ? ...
>     ? ? </ComplexSource>
>     ? ? ...
>     ? </VRTRasterBand>
>
>
> But maybe that's not how it's modelled inside?

The above declaration literally tells "use the mask band of band 1 of 
in.tif and expose it as a Int16 band whose nodatavalue metadata is set 
to -1".? So no "intelligent" things like remapping the values of band 1 
to either their native value or -1 depending on the value of the mask band.

>
>
>     Well, you can definitely do that using a VRT Python pixel
>     function, that
>     would essentially do your --calc expression
>
>
> Thanks for confirming it's possible, I'll have a play.
>
> From what I can see the python pixel functions are only called once,
Not sure what you mean by "called once". Well, they are called each time 
IRasterIO() is called on the VRT band. So if you request 1x1 pixel at a 
time, that's not going to be fast. But if you work on reasonably large 
blocks, the setup cost of going through Python should be amortized.
> use?numpy and (IIUC) vectorised CPU operations...

Not totally sure what numpy does internally, but there shouldn't be any 
measurable difference between a gdal_calc.py and the equivalent formula 
put as a VRT Python pixel function.


> would that make it faster/comparable to one of the C pixel?functions 
> that's doing a naive array loop?over rows & columns?
Potentially... That said if you'd want to use that in a multithreaded 
application to read several VRTs from concurrent threads, then you'd hit 
the Python GIL, so that wouldn't scale well (although it might 
potentially be released by numpy when it goes to native code, so maybe 
that's not so bad). But for single threaded, there's indeed the 
potential that numpy based might be faster than the "naive" C pixel 
functions.
>
>
>     A nice exercice for (Pythonist) contributors would be to add a -f VRT
>     capability to gdal_calc.py that would essentially automate the
>     writing
>     of such VRT using Python pixel functions. Just saying...
>
>
> *adds to a long list of nice exercises*

Ah ah, this was actually a proposal to the wider audience. I'm sure 
there are lots of people looking for ideas for a first nice contribution 
to GDAL :-)

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/5258b5a4/attachment.htm>

From wilcok36 at hotmail.com  Mon Jan 22 08:33:02 2024
From: wilcok36 at hotmail.com (Wilco K)
Date: Mon, 22 Jan 2024 16:33:02 +0000
Subject: [gdal-dev] warp issue: Source and target ellipsoid do not belong to
 the same celestial body
Message-ID: <PRAPR10MB5275537E57ED10BBEBD2829ADF752@PRAPR10MB5275.EURPRD10.PROD.OUTLOOK.COM>

Hi,

these 2 lines work with GDAL 2.2.3, but not with GDAL 3.5.0 anymore.

gdal_translate -of GTiff -a_nodata 65535 -a_srs "+proj=stere +lat_0=90 +lon_0=0 +lat_ts=60 +a=6378.14 +b=6356.75 +x_0=0 y_0=0" -a_ullr 0.0, -3649.9792, 700.000, -4414.9792 "HDF5:\"RAD_NL25_RAC_03H_202401220800.h5\"://image1/image_data" "test-translate.tif"

gdalwarp -t_srs EPSG:4326 -dstnodata 65535 -of GTiff "test-translate.tif" "test-warp.tif"


Error:
ERROR 1: PROJ: proj_create_operations: Source and target ellipsoid do not belong to the same celestial body
ERROR 6: Cannot find coordinate operations from `PROJCRS["unknown",BASEGEOGCRS["unknown",DATUM["unknown",ELLIPSOID["unknown",6378.14,298.183263207102,LENGTHUNIT["metre",1,ID["EPSG",9001]]]],PRIMEM["Reference meridian",0,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]]],CONVERSION["Polar Stereographic (variant B)",METHOD["Polar Stereographic (variant B)",ID["EPSG",9829]],PARAMETER["Latitude of standard parallel",60,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8832]],PARAMETER["Longitude of origin",0,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8833]],PARAMETER["False easting",0,LENGTHUNIT["metre",1],ID["EPSG",8806]],PARAMETER["False northing",0,LENGTHUNIT["metre",1],ID["EPSG",8807]]],CS[Cartesian,2],AXIS["(E)",south,MERIDIAN[90,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],ORDER[1],LENGTHUNIT["metre",1]],AXIS["(N)",south,MERIDIAN[180,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],ORDER[2],LENGTHUNIT["metre",1]]]' to `EPSG:4326'


But when the +a and +b in the gdal_translate call are changed, gdalwarp does work:
gdal_translate -of GTiff -a_nodata 65535 -a_srs "+proj=stere +lat_0=90 +lon_0=0 +lat_ts=60 +a=6378140 +b=6356750 +x_0=0 +y_0=0" -a_ullr 0 -3649999.11191775 700000.903671186 -4415003.88199764 "HDF5:\"RAD_NL25_RAC_03H_202401220800.h5\"://image1/image_data" "test-translate.tif"

What is the problem?








-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/f7ed11fb/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Jan 22 08:39:36 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jan 2024 17:39:36 +0100
Subject: [gdal-dev] warp issue: Source and target ellipsoid do not
 belong to the same celestial body
In-Reply-To: <PRAPR10MB5275537E57ED10BBEBD2829ADF752@PRAPR10MB5275.EURPRD10.PROD.OUTLOOK.COM>
References: <PRAPR10MB5275537E57ED10BBEBD2829ADF752@PRAPR10MB5275.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <07901b35-313f-4066-a09f-6513a560d917@spatialys.com>


Le 22/01/2024 ? 17:33, Wilco K via gdal-dev a ?crit?:
> Hi,
>
> these 2 lines work with GDAL 2.2.3, but not with GDAL 3.5.0 anymore.
>
> gdal_translate -of GTiff -a_nodata 65535 -a_srs "+proj=stere +lat_0=90 
> +lon_0=0 +lat_ts=60 +a=6378.14 +b=6356.75 +x_0=0 y_0=0" -a_ullr 0.0, 
> -3649.9792, 700.000, -4414.9792 
> "HDF5:\"RAD_NL25_RAC_03H_202401220800.h5\"://image1/image_data" 
> "test-translate.tif"
>
> gdalwarp -t_srs EPSG:4326 -dstnodata 65535 -of GTiff 
> "test-translate.tif" "test-warp.tif"
>
>
> Error:
> ERROR 1: PROJ: proj_create_operations: Source and target ellipsoid do 
> not belong to the same celestial body
> ERROR 6: Cannot find coordinate operations from 
> `PROJCRS["unknown",BASEGEOGCRS["unknown",DATUM["unknown",ELLIPSOID["unknown",6378.14,298.183263207102,LENGTHUNIT["metre",1,ID["EPSG",9001]]]],PRIMEM["Reference 
> meridian",0,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]]],CONVERSION["Polar 
> Stereographic (variant B)",METHOD["Polar Stereographic (variant 
> B)",ID["EPSG",9829]],PARAMETER["Latitude of standard 
> parallel",60,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8832]],PARAMETER["Longitude 
> of 
> origin",0,ANGLEUNIT["degree",0.0174532925199433],ID["EPSG",8833]],PARAMETER["False 
> easting",0,LENGTHUNIT["metre",1],ID["EPSG",8806]],PARAMETER["False 
> northing",0,LENGTHUNIT["metre",1],ID["EPSG",8807]]],CS[Cartesian,2],AXIS["(E)",south,MERIDIAN[90,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],ORDER[1],LENGTHUNIT["metre",1]],AXIS["(N)",south,MERIDIAN[180,ANGLEUNIT["degree",0.0174532925199433,ID["EPSG",9122]]],ORDER[2],LENGTHUNIT["metre",1]]]' 
> to `EPSG:4326'
>
>
> But when the +a and +b in the gdal_translate call are changed, 
> gdalwarp does work:
> gdal_translate -of GTiff -a_nodata 65535 -a_srs "+proj=stere +lat_0=90 
> +lon_0=0 +lat_ts=60 +a=6378140 +b=6356750 +x_0=0 +y_0=0" -a_ullr 0 
> -3649999.11191775 700000.903671186 -4415003.88199764 
> "HDF5:\"RAD_NL25_RAC_03H_202401220800.h5\"://image1/image_data" 
> "test-translate.tif"
>
> What is the problem?

The value of the +a and +b parameters must be in metres, not in km. So 
you add to cheat also on the geotransform. But if datum transformations 
had to be done the fact that you transform between an ellipsoid of ~ 
6000 meters to one of ~ 6000 km wouldn't work well... It probably sort 
of worked because datum transformation was skipped, but the new 
behaviour which checks that the shape of the source and target ellipsoid 
isn't too different is definitely saner and will avoid potential 
reprojection errors

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/e276e0e0/attachment.htm>

From aborruso at gmail.com  Mon Jan 22 08:53:56 2024
From: aborruso at gmail.com (andy)
Date: Mon, 22 Jan 2024 17:53:56 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
Message-ID: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>

Hi,
I have four tif input files, these have 3 bands RGB and are JPEG compressed.
No null data set.

My goal is to mosaic these and then warp the mosaic.

I start it with:

gdalbuildvrt mosaic.vrt file1.tif  file2.tif  file3.tif  file4.tif

Then I warp the mosaic:

gdalwarp -dstalpha -of vrt -overwrite -s_srs EPSG:32632 -t_srs EPSG:7791
mosaic.vrt warped.vrt

Then I run

gdal_translate -b 1 -b 2 -b 3 -b 4 -co BIGTIFF=YES -co COMPRESS=DEFLATE -co
ALPHA=YES -co TILED=YES -co NUM_THREADS=ALL_CPUS  warped.vrt  output.tif

The final tiff file has black edges.
What's wrong with my procedure? How to avoid this?

Thank you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/c113fe4b/attachment.htm>

From even.rouault at spatialys.com  Mon Jan 22 08:56:05 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jan 2024 17:56:05 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
Message-ID: <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>


Le 22/01/2024 ? 17:53, andy via gdal-dev a ?crit?:
> Hi,
> I have four tif input files, these have 3 bands RGB and are JPEG 
> compressed.
> No null data set.
>
> My goal is to mosaic these and then warp the mosaic.
>
> I start it with:
>
> gdalbuildvrt mosaic.vrt file1.tif file2.tif file3.tif file4.tif

Try adding a -addalpha so that the mosaic.vrt is created with an alpha 
band which equals to 0 in gaps between your source tiles. The rest of 
your procedure should be fine

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/25cf1ac5/attachment.htm>

From aborruso at gmail.com  Mon Jan 22 09:09:59 2024
From: aborruso at gmail.com (andy)
Date: Mon, 22 Jan 2024 18:09:59 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
Message-ID: <CAHEdGZP+JOG_aS+TvDve6jT9LA8WX4z4uzZOrATkocEahx5feA@mail.gmail.com>

Hi Even,
and thank you, I have the same result.

Do I must remove jpeg compression in gdaladdo?

Best regards




-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/f6347c69/attachment.htm>

From even.rouault at spatialys.com  Mon Jan 22 09:35:07 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Jan 2024 18:35:07 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <CAHEdGZP+JOG_aS+TvDve6jT9LA8WX4z4uzZOrATkocEahx5feA@mail.gmail.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZP+JOG_aS+TvDve6jT9LA8WX4z4uzZOrATkocEahx5feA@mail.gmail.com>
Message-ID: <95ef645f-61c9-4b28-8b39-57900f9e5492@spatialys.com>

ah I missed your sources were JPEG compressed. Do they have padding 
around them? If so, you might need to use nearblack to compute a mask band

Le 22/01/2024 ? 18:09, andy a ?crit?:
> Hi Even,
> and thank you, I have the same result.
>
> Do I must remove jpeg compression?in gdaladdo?
>
> Best regards
>
>
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/9e7eb110/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jan 22 11:04:00 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Mon, 22 Jan 2024 19:04:00 +0000
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
Message-ID: <DB9PR09MB688754DC4CCBD4D179F4B89FFD752@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Could you add a small image to show how the result looks like? I fear my imagination may be inaccurate.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta andy via gdal-dev
L?hetetty: maanantai 22. tammikuuta 2024 18.54
Vastaanottaja: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Non able to manage properly vitual file, warping and black edges

Hi,
I have four tif input files, these have 3 bands RGB and are JPEG compressed.
No null data set.

My goal is to mosaic these and then warp the mosaic.

I start it with:

gdalbuildvrt mosaic.vrt file1.tif  file2.tif  file3.tif  file4.tif

Then I warp the mosaic:

gdalwarp -dstalpha -of vrt -overwrite -s_srs EPSG:32632 -t_srs EPSG:7791 mosaic.vrt warped.vrt

Then I run

gdal_translate -b 1 -b 2 -b 3 -b 4 -co BIGTIFF=YES -co COMPRESS=DEFLATE -co ALPHA=YES -co TILED=YES -co NUM_THREADS=ALL_CPUS  warped.vrt  output.tif

The final tiff file has black edges.
What's wrong with my procedure? How to avoid this?

Thank you

--
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all'inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240122/03a9e541/attachment.htm>

From aborruso at gmail.com  Mon Jan 22 23:56:40 2024
From: aborruso at gmail.com (andy)
Date: Tue, 23 Jan 2024 08:56:40 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
Message-ID: <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>

Hi Even
first of all, thank you very much.
I was tired yesterday. I realize this, because this morning I created a new
script starting from scratch and everything seems to be working.
Yesterday I was probably looking at the wrong output folder (I am stupid as
well as tired).

It this way it works:

gdalbuildvrt -addalpha mosaic.vrt mylist

gdalwarp -dstalpha -of vrt -overwrite -s_srs EPSG:32632 -t_srs
EPSG:7791 mosaic.vrt warp.vrt

gdal_translate -b 1 -b 2 -b 3 -b 4 -co BIGTIFF=YES -co COMPRESS=JPEG -co
PHOTOMETRIC=RGB -co ALPHA=YES -co JPEG_QUALITY=75 -co TILED=YES -co
NUM_THREADS=ALL_CPUS warp.vrt output.tif

But I need another piece of advice.
Using alpha transparency, with the 4 bands, I cannot use PHOTOMETRIC=YCBCR,
and I used PHOTOMETRIC=RGB.
This way the compression is a little less effective.

Is there anything comparable, in terms of compression effectiveness, when
using alpha transparency and JPEG compression?
Should I change the type of compression?

Thank you,

Andrea

>

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/3cd342ab/attachment.htm>

From even.rouault at spatialys.com  Tue Jan 23 04:00:14 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jan 2024 13:00:14 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
Message-ID: <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>


>
> But I need another piece of advice.
> Using alpha transparency, with the 4 bands, I cannot use 
> PHOTOMETRIC=YCBCR, and I used PHOTOMETRIC=RGB.
> This way the compression is a little less effective.
>
> Is there anything comparable, in terms of compression effectiveness, 
> when using alpha transparency and JPEG compression?
> Should I change the type of compression?

require to create a mask band from the 4th band of the input by changing 
-b 4 to -mask 4, removing -co ALPHA=YES, and then you can ask YCbCr

gdal_translate -b 1 -b 2 -b 3 -mask 4 -co BIGTIFF=YES -co COMPRESS=JPEG 
-co PHOTOMETRIC=YCBCR -co JPEG_QUALITY=75 -co TILED=YES -co 
NUM_THREADS=ALL_CPUS?warp.vrt output.tif

Note: if you use the COG driver it will do that automatically for you:

gdal_translate -of COG -co BIGTIFF=YES -co COMPRESS=JPEG -co 
NUM_THREADS=ALL_CPUS?warp.vrt output.tif

>
> Thank you,
>
> Andrea
>
>
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/0ef12c0c/attachment.htm>

From aborruso at gmail.com  Tue Jan 23 04:38:26 2024
From: aborruso at gmail.com (andy)
Date: Tue, 23 Jan 2024 13:38:26 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
 <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>
Message-ID: <CAHEdGZOW0DD6niAN7wTi5WQmcKir4oY0d3tYDnE-RwE2LhbCQA@mail.gmail.com>

Hi Even,
the COG is a much simpler command, it keeps everything in a little bit, but
it is much slower than the more verbose procedure I wrote.
So I ruled it out.

Thank you very much for the information you gave me, valuable

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/9db88b51/attachment.htm>

From even.rouault at spatialys.com  Tue Jan 23 04:41:17 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jan 2024 13:41:17 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <CAHEdGZOW0DD6niAN7wTi5WQmcKir4oY0d3tYDnE-RwE2LhbCQA@mail.gmail.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
 <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>
 <CAHEdGZOW0DD6niAN7wTi5WQmcKir4oY0d3tYDnE-RwE2LhbCQA@mail.gmail.com>
Message-ID: <fcdcdec9-f247-4f2b-962f-00f33b6145c9@spatialys.com>


Le 23/01/2024 ? 13:38, andy a ?crit?:
> Hi Even,
> the COG is a much simpler command, it keeps everything in a little 
> bit, but it is much slower than the more verbose procedure I wrote.
> So I ruled it out.
because it creates the overviews. You can disable creating them with -co 
OVERVIEWS=NO
>
> Thank you very much for the information you gave me, valuable
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/04ef1f68/attachment.htm>

From aborruso at gmail.com  Tue Jan 23 04:45:08 2024
From: aborruso at gmail.com (andy)
Date: Tue, 23 Jan 2024 13:45:08 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <fcdcdec9-f247-4f2b-962f-00f33b6145c9@spatialys.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
 <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>
 <CAHEdGZOW0DD6niAN7wTi5WQmcKir4oY0d3tYDnE-RwE2LhbCQA@mail.gmail.com>
 <fcdcdec9-f247-4f2b-962f-00f33b6145c9@spatialys.com>
Message-ID: <CAHEdGZPNAYmC=TkpVvi9doxdLH+hHtUS9GeTEdwKuLgiHqhiMw@mail.gmail.com>

Hi Even,

because it creates the overviews. You can disable creating them with -co
> OVERVIEWS=NO
>

Sorry, but I didn't write down my whole procedure.
After gdal_translate, I run

gdaladdo --config GDAL_NUM_THREADS ALL_CPUS --config BIGTIFF_OVERVIEW YES
--config INTERLEAVE_OVERVIEW PIXEL -r average input.tif

And the time difference is huge.
Later I will write it down for you precisely.

Thank you

>

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/7e9627a5/attachment-0001.htm>

From aborruso at gmail.com  Tue Jan 23 05:45:13 2024
From: aborruso at gmail.com (andy)
Date: Tue, 23 Jan 2024 14:45:13 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <CAHEdGZPNAYmC=TkpVvi9doxdLH+hHtUS9GeTEdwKuLgiHqhiMw@mail.gmail.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
 <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>
 <CAHEdGZOW0DD6niAN7wTi5WQmcKir4oY0d3tYDnE-RwE2LhbCQA@mail.gmail.com>
 <fcdcdec9-f247-4f2b-962f-00f33b6145c9@spatialys.com>
 <CAHEdGZPNAYmC=TkpVvi9doxdLH+hHtUS9GeTEdwKuLgiHqhiMw@mail.gmail.com>
Message-ID: <CAHEdGZMFBfpXmEjGeP4S8xMFQ7qDAvuK47r74TjNbVPB2KmDVA@mail.gmail.com>

Even,
the verbose process lasts 24 minutes, the COG process lasts 36 minutes.
There is a 50% difference.

Best regards


-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/5982cdd5/attachment.htm>

From even.rouault at spatialys.com  Tue Jan 23 05:59:53 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jan 2024 14:59:53 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <CAHEdGZMFBfpXmEjGeP4S8xMFQ7qDAvuK47r74TjNbVPB2KmDVA@mail.gmail.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
 <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>
 <CAHEdGZOW0DD6niAN7wTi5WQmcKir4oY0d3tYDnE-RwE2LhbCQA@mail.gmail.com>
 <fcdcdec9-f247-4f2b-962f-00f33b6145c9@spatialys.com>
 <CAHEdGZPNAYmC=TkpVvi9doxdLH+hHtUS9GeTEdwKuLgiHqhiMw@mail.gmail.com>
 <CAHEdGZMFBfpXmEjGeP4S8xMFQ7qDAvuK47r74TjNbVPB2KmDVA@mail.gmail.com>
Message-ID: <cd89fd05-35ee-4520-a191-db051e96e272@spatialys.com>

Perhaps due to a difference in the overview resampling method. The COG 
driver uses cubic by default. Perhaps try adding -co RESAMPLING=AVERAGE 
to compare compareable things.

Le 23/01/2024 ? 14:45, andy a ?crit?:
> Even,
> the verbose process lasts 24 minutes, the COG process lasts 36 minutes.
> There is a 50% difference.
>
> Best regards
>
>
> -- 
> ___________________
>
> Andrea Borruso
> website: https://medium.com/tantotanto
> 38? 7' 48" N, 13? 21' 9" E, EPSG:4326
> ___________________
>
> "cercare e saper riconoscere chi e cosa,
> ?in mezzo all?inferno, non ? inferno,
> e farlo durare, e dargli spazio"
>
> Italo Calvino

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/ea21a1dc/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 23 06:03:10 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 23 Jan 2024 14:03:10 +0000
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <CAHEdGZMFBfpXmEjGeP4S8xMFQ7qDAvuK47r74TjNbVPB2KmDVA@mail.gmail.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
 <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>
 <CAHEdGZOW0DD6niAN7wTi5WQmcKir4oY0d3tYDnE-RwE2LhbCQA@mail.gmail.com>
 <fcdcdec9-f247-4f2b-962f-00f33b6145c9@spatialys.com>
 <CAHEdGZPNAYmC=TkpVvi9doxdLH+hHtUS9GeTEdwKuLgiHqhiMw@mail.gmail.com>
 <CAHEdGZMFBfpXmEjGeP4S8xMFQ7qDAvuK47r74TjNbVPB2KmDVA@mail.gmail.com>
Message-ID: <DB9PR09MB688727DB9BF050B3BD7651E3FD742@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Please try to imagine that you are a stranger that might volunteer to help by running similar commands with same kind of imagery. Imagine a list of information and commands that you would need to know before you can do that. Then please share that information with us.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta andy via gdal-dev
L?hetetty: tiistai 23. tammikuuta 2024 15.45
Vastaanottaja: Even Rouault <even.rouault at spatialys.com>
Kopio: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Non able to manage properly vitual file, warping and black edges

Even,
the verbose process lasts 24 minutes, the COG process lasts 36 minutes.
There is a 50% difference.

Best regards


--
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all'inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/769a022b/attachment.htm>

From aborruso at gmail.com  Tue Jan 23 07:38:50 2024
From: aborruso at gmail.com (andy)
Date: Tue, 23 Jan 2024 16:38:50 +0100
Subject: [gdal-dev] Non able to manage properly vitual file,
 warping and black edges
In-Reply-To: <cd89fd05-35ee-4520-a191-db051e96e272@spatialys.com>
References: <CAHEdGZNThBPxWjar4m6VE7cpfUi27U4tjODiY8BksdZXiCihKw@mail.gmail.com>
 <d1468dd9-3735-4b89-9cc2-40687fe6709c@spatialys.com>
 <CAHEdGZMQLNDekbz5qQ64oifw8vW2ZhUVrkRty6VHq3Uc-dgfKg@mail.gmail.com>
 <47b34a78-8752-49eb-9895-134ac9f70ee7@spatialys.com>
 <CAHEdGZOW0DD6niAN7wTi5WQmcKir4oY0d3tYDnE-RwE2LhbCQA@mail.gmail.com>
 <fcdcdec9-f247-4f2b-962f-00f33b6145c9@spatialys.com>
 <CAHEdGZPNAYmC=TkpVvi9doxdLH+hHtUS9GeTEdwKuLgiHqhiMw@mail.gmail.com>
 <CAHEdGZMFBfpXmEjGeP4S8xMFQ7qDAvuK47r74TjNbVPB2KmDVA@mail.gmail.com>
 <cd89fd05-35ee-4520-a191-db051e96e272@spatialys.com>
Message-ID: <CAHEdGZOWWs-hvb7T2F2A3QNNtGfg3WrX879A+=HHWOsA5u-wzw@mail.gmail.com>

Hi Even,

On Tue, 23 Jan 2024 at 14:59, Even Rouault <even.rouault at spatialys.com>
wrote:

> Perhaps due to a difference in the overview resampling method. The COG
> driver uses cubic by default. Perhaps try adding -co RESAMPLING=AVERAGE to
> compare compareable things.
>

using  -co RESAMPLING=AVERAGE the total time is 30 minutes.

Jukka, in the next few days I will answer your question.


Thank you to all of you

-- 
___________________

Andrea Borruso
website: https://medium.com/tantotanto
38? 7' 48" N, 13? 21' 9" E, EPSG:4326
___________________

"cercare e saper riconoscere chi e cosa,
 in mezzo all?inferno, non ? inferno,
e farlo durare, e dargli spazio"

Italo Calvino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/daf45a2c/attachment-0001.htm>

From lefsky at gmail.com  Tue Jan 23 09:00:34 2024
From: lefsky at gmail.com (lefsky at gmail.com)
Date: Tue, 23 Jan 2024 10:00:34 -0700
Subject: [gdal-dev] Layerstack multiple images,
 of different extents and variable number of bands
Message-ID: <CAPryQ-MfONKTi5o_3wMgxiFU8Dr5NkeJumvEKk09VHM06QC81A@mail.gmail.com>

I've been incorporating gdal into my processing pipelines and have a
question about a feature.

I need to be able to layer stack multiple images with different extents and
varying numbers of bands, usually exceeding 1. I haven't been able to find
a single command to do this in gdal. Am I missing something? If there is no
such feature, has anyone developed a script out there that can robustly do
all of those things (i.e. with checking for violation of assumptions about
files and error handling)?

Michael

-- 
Michael Lefsky (He/His)
Home Location: HVHF+GH
Cell: 970-980-9036
http://www.researcherid.com/rid/A-7224-2009

*?for being prematurely, and worse, intuitively right ? there?s a heavy
price. But for being wrong ? no, not so long as you?re wrong in a pack."
Gary Brecher / Portis*

*I acknowledge that I live and work on stolen land. This is the land of the
Cheyenne, Arapaho, Ute, and Ocheithi Sakowin people. To learn more about
these nations, please visit;
http://www.utemountainutetribe.com/
http://www.cheyennenation.com/
https://cheyenneandarapaho-nsn.gov/
https://native-land.ca/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/256b1aba/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 23 11:13:53 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 23 Jan 2024 19:13:53 +0000
Subject: [gdal-dev] Layerstack multiple images,
 of different extents and variable number of bands
In-Reply-To: <CAPryQ-MfONKTi5o_3wMgxiFU8Dr5NkeJumvEKk09VHM06QC81A@mail.gmail.com>
References: <CAPryQ-MfONKTi5o_3wMgxiFU8Dr5NkeJumvEKk09VHM06QC81A@mail.gmail.com>
Message-ID: <AS5PR09MB689713FE46DDAB70CFCDD0E2FD742@AS5PR09MB6897.eurprd09.prod.outlook.com>

Hi,

Please clarify what is the desired result.  A multiband image that covers the union of extents of all the input images, with a number of bands that is the sum of bands in all the inputs or what?

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta lefsky--- via gdal-dev
L?hetetty: tiistai 23. tammikuuta 2024 19.01
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Layerstack multiple images, of different extents and variable number of bands

I've been incorporating gdal into my processing pipelines and have a question about a feature.

I need to be able to layer stack multiple images with different extents and varying numbers of bands, usually exceeding 1. I haven't been able to find a single command to do this in gdal. Am I missing something? If there is no such feature, has anyone developed a script out there that can robustly do all of those things (i.e. with checking for violation of assumptions about files and error handling)?

Michael

--
Michael Lefsky (He/His)
Home Location: HVHF+GH
Cell: 970-980-9036
http://www.researcherid.com/rid/A-7224-2009

"for being prematurely, and worse, intuitively right - there's a heavy price. But for being wrong - no, not so long as you're wrong in a pack." Gary Brecher / Portis

*I acknowledge that I live and work on stolen land. This is the land of the Cheyenne, Arapaho, Ute, and Ocheithi Sakowin people. To learn more about these nations, please visit;
http://www.utemountainutetribe.com/
http://www.cheyennenation.com/
https://cheyenneandarapaho-nsn.gov/
https://native-land.ca/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/ce97681d/attachment.htm>

From lefsky at gmail.com  Tue Jan 23 11:50:37 2024
From: lefsky at gmail.com (lefsky at gmail.com)
Date: Tue, 23 Jan 2024 12:50:37 -0700
Subject: [gdal-dev] Layerstack multiple images,
 of different extents and variable number of bands
In-Reply-To: <AS5PR09MB689713FE46DDAB70CFCDD0E2FD742@AS5PR09MB6897.eurprd09.prod.outlook.com>
References: <CAPryQ-MfONKTi5o_3wMgxiFU8Dr5NkeJumvEKk09VHM06QC81A@mail.gmail.com>
 <AS5PR09MB689713FE46DDAB70CFCDD0E2FD742@AS5PR09MB6897.eurprd09.prod.outlook.com>
Message-ID: <CAPryQ-M32oqtL9nMfxrhAv1-zJQ5T9C7_rqfAcxK_AXJ6sOyaQ@mail.gmail.com>

You've interpreted that correctly.

On Tue, Jan 23, 2024 at 12:13?PM Rahkonen Jukka <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
>
>
> Please clarify what is the desired result.  A multiband image that covers
> the union of extents of all the input images, with a number of bands that
> is the sum of bands in all the inputs or what?
>
>
>
> -Jukka Rahkonen-
>
>
>
> *L?hett?j?:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta *lefsky---
> via gdal-dev
> *L?hetetty:* tiistai 23. tammikuuta 2024 19.01
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] Layerstack multiple images, of different extents and
> variable number of bands
>
>
>
> I've been incorporating gdal into my processing pipelines and have a
> question about a feature.
>
>
>
> I need to be able to layer stack multiple images with different extents
> and varying numbers of bands, usually exceeding 1. I haven't been able to
> find a single command to do this in gdal. Am I missing something? If there
> is no such feature, has anyone developed a script out there that can
> robustly do all of those things (i.e. with checking for violation of
> assumptions about files and error handling)?
>
>
>
> Michael
>
>
>
> --
>
> Michael Lefsky (He/His)
>
> Home Location: HVHF+GH
>
> Cell: 970-980-9036
>
> http://www.researcherid.com/rid/A-7224-2009
>
>
>
> *?for being prematurely, and worse, intuitively right ? there?s a heavy
> price. But for being wrong ? no, not so long as you?re wrong in a pack."
> Gary Brecher / Portis*
>
>
>
> *I acknowledge that I live and work on stolen land. This is the land of
> the Cheyenne, Arapaho, Ute, and Ocheithi Sakowin people. To learn more
> about these nations, please visit;
>
> http://www.utemountainutetribe.com/
>
> http://www.cheyennenation.com/
>
> https://cheyenneandarapaho-nsn.gov/
>
> https://native-land.ca/
>
>
>


-- 
Michael Lefsky (He/His)
Home Location: HVHF+GH
Cell: 970-980-9036
http://www.researcherid.com/rid/A-7224-2009

*?for being prematurely, and worse, intuitively right ? there?s a heavy
price. But for being wrong ? no, not so long as you?re wrong in a pack."
Gary Brecher / Portis*

*I acknowledge that I live and work on stolen land. This is the land of the
Cheyenne, Arapaho, Ute, and Ocheithi Sakowin people. To learn more about
these nations, please visit;
http://www.utemountainutetribe.com/
http://www.cheyennenation.com/
https://cheyenneandarapaho-nsn.gov/
https://native-land.ca/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/75f7f8eb/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 23 11:56:13 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 23 Jan 2024 19:56:13 +0000
Subject: [gdal-dev] Layerstack multiple images,
 of different extents and variable number of bands
In-Reply-To: <CAPryQ-M32oqtL9nMfxrhAv1-zJQ5T9C7_rqfAcxK_AXJ6sOyaQ@mail.gmail.com>
References: <CAPryQ-MfONKTi5o_3wMgxiFU8Dr5NkeJumvEKk09VHM06QC81A@mail.gmail.com>
 <AS5PR09MB689713FE46DDAB70CFCDD0E2FD742@AS5PR09MB6897.eurprd09.prod.outlook.com>
 <CAPryQ-M32oqtL9nMfxrhAv1-zJQ5T9C7_rqfAcxK_AXJ6sOyaQ@mail.gmail.com>
Message-ID: <AS5PR09MB6897FA966703046633710650FD742@AS5PR09MB6897.eurprd09.prod.outlook.com>

Hi,

I recommend to study gdalbuildvrt https://gdal.org/programs/gdalbuildvrt.html and consider if it might be good for you with the -separate option.

-Jukka Rahkonen-

L?hett?j?: lefsky at gmail.com <lefsky at gmail.com>
L?hetetty: tiistai 23. tammikuuta 2024 21.51
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] Layerstack multiple images, of different extents and variable number of bands

You've interpreted that correctly.

On Tue, Jan 23, 2024 at 12:13?PM Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Please clarify what is the desired result.  A multiband image that covers the union of extents of all the input images, with a number of bands that is the sum of bands in all the inputs or what?

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta lefsky--- via gdal-dev
L?hetetty: tiistai 23. tammikuuta 2024 19.01
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Layerstack multiple images, of different extents and variable number of bands

I've been incorporating gdal into my processing pipelines and have a question about a feature.

I need to be able to layer stack multiple images with different extents and varying numbers of bands, usually exceeding 1. I haven't been able to find a single command to do this in gdal. Am I missing something? If there is no such feature, has anyone developed a script out there that can robustly do all of those things (i.e. with checking for violation of assumptions about files and error handling)?

Michael

--
Michael Lefsky (He/His)
Home Location: HVHF+GH
Cell: 970-980-9036
http://www.researcherid.com/rid/A-7224-2009

?for being prematurely, and worse, intuitively right ? there?s a heavy price. But for being wrong ? no, not so long as you?re wrong in a pack." Gary Brecher / Portis

*I acknowledge that I live and work on stolen land. This is the land of the Cheyenne, Arapaho, Ute, and Ocheithi Sakowin people. To learn more about these nations, please visit;
http://www.utemountainutetribe.com/
http://www.cheyennenation.com/
https://cheyenneandarapaho-nsn.gov/
https://native-land.ca/



--
Michael Lefsky (He/His)
Home Location: HVHF+GH
Cell: 970-980-9036
http://www.researcherid.com/rid/A-7224-2009

?for being prematurely, and worse, intuitively right ? there?s a heavy price. But for being wrong ? no, not so long as you?re wrong in a pack." Gary Brecher / Portis

*I acknowledge that I live and work on stolen land. This is the land of the Cheyenne, Arapaho, Ute, and Ocheithi Sakowin people. To learn more about these nations, please visit;
http://www.utemountainutetribe.com/
http://www.cheyennenation.com/
https://cheyenneandarapaho-nsn.gov/
https://native-land.ca/

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/3252993d/attachment.htm>

From wilcok36 at hotmail.com  Tue Jan 23 11:56:59 2024
From: wilcok36 at hotmail.com (Wilco K)
Date: Tue, 23 Jan 2024 19:56:59 +0000
Subject: [gdal-dev] units=km not working
Message-ID: <PRAPR10MB5275D700F4E4EEAFB3AED51ADF742@PRAPR10MB5275.EURPRD10.PROD.OUTLOOK.COM>

Hi,

why is units=km not working?

gdaltransform -s_srs EPSG:4326 -t_srs "+proj=stere +lat_0=90 +lon_0=0 +lat_ts=60 +a=6378.14 +b=6356.75 +x_0=0 +y_0=0 +units=km"

The following error is returned:
ERROR 1: PROJ: proj_create_operations: Source and target ellipsoid do not belong to the same celestial body


Converting +a and +b to meters and it does works:
gdaltransform -s_srs EPSG:4326 -t_srs "+proj=stere +lat_0=90 +lon_0=0 +lat_ts=60 +a=6378140 +b=6356750 +x_0=0 +y_0=0"


Any ideas?

Wilco



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/e8e4a7e5/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Jan 23 12:11:20 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Jan 2024 21:11:20 +0100
Subject: [gdal-dev] units=km not working
In-Reply-To: <PRAPR10MB5275D700F4E4EEAFB3AED51ADF742@PRAPR10MB5275.EURPRD10.PROD.OUTLOOK.COM>
References: <PRAPR10MB5275D700F4E4EEAFB3AED51ADF742@PRAPR10MB5275.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <8d7f293d-f814-4675-bbf7-ee04102c4d76@spatialys.com>


Le 23/01/2024 ? 20:56, Wilco K via gdal-dev a ?crit?:
> Hi,
>
> why is *units=km*?not working?
> *
> *
> *gdaltransform -s_srs EPSG:4326 -t_srs "+proj=stere +lat_0=90 +lon_0=0 
> +lat_ts=60 +a=6378.14 +b=6356.75 +x_0=0 +y_0=0 **+units=km" *
>
> The following error is returned:
> ERROR 1: PROJ: proj_create_operations: Source and target ellipsoid do 
> not belong to the same celestial body
>
>
> Converting +a and +b to meters and it does works:
> *gdaltransform -s_srs EPSG:4326 -t_srs "+proj=stere +lat_0=90 +lon_0=0 
> +lat_ts=60 +a=6378140 +b=6356750 +x_0=0 +y_0=0"*
>
>
> Any ideas?

Cf https://proj.org/en/9.3/usage/projections.html#units : "Horizontal 
coordinate system units can be specified using the |+units| keyword 
[...] Note that this does /not/ affect the units of linear parameters 
such as |+x_0| or |+y_0| which should always be specified in meters." .? 
This also applies to the +a and +b parameters. Doc enhancement filed in 
https://github.com/OSGeo/PROJ/pull/4010


When you specify +units=km, it just means that you wish the output 
projected coordinates are expressed in km. But this doesn't affect the 
units of any linear parameters of the projection definition.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/7c35aba7/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 23 12:14:21 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 23 Jan 2024 20:14:21 +0000
Subject: [gdal-dev] units=km not working
In-Reply-To: <PRAPR10MB5275D700F4E4EEAFB3AED51ADF742@PRAPR10MB5275.EURPRD10.PROD.OUTLOOK.COM>
References: <PRAPR10MB5275D700F4E4EEAFB3AED51ADF742@PRAPR10MB5275.EURPRD10.PROD.OUTLOOK.COM>
Message-ID: <AS5PR09MB6897FCEB91FED2A0B7E08FE3FD742@AS5PR09MB6897.eurprd09.prod.outlook.com>

Hi,

Because the units mean the units of the projected coordinates. An example:
https://epsg.io/map#srs=3067-1149&x=295545.168414&y=6836388.322477&z=4&layer=streets
Here x and y are in meters: "+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs +type=crs".

By changing the the units into kilometers the x value would change into 295.545168414 any y into 6836.388322477 but that does not change the size of the Earth.

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Wilco K via gdal-dev
L?hetetty: tiistai 23. tammikuuta 2024 21.57
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] units=km not working

Hi,

why is units=km not working?

gdaltransform -s_srs EPSG:4326 -t_srs "+proj=stere +lat_0=90 +lon_0=0 +lat_ts=60 +a=6378.14 +b=6356.75 +x_0=0 +y_0=0 +units=km"

The following error is returned:
ERROR 1: PROJ: proj_create_operations: Source and target ellipsoid do not belong to the same celestial body

Converting +a and +b to meters and it does works:
gdaltransform -s_srs EPSG:4326 -t_srs "+proj=stere +lat_0=90 +lon_0=0 +lat_ts=60 +a=6378140 +b=6356750 +x_0=0 +y_0=0"

Any ideas?

Wilco



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240123/ca557780/attachment.htm>

From even.rouault at spatialys.com  Tue Jan 23 18:27:19 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Jan 2024 03:27:19 +0100
Subject: [gdal-dev] Convert alpha to nodata?
In-Reply-To: <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>
References: <CAFLLRpJuMq6cUQSjeAc=Xf0NCtUXKKj5AUpUvnpie075u5kTLQ@mail.gmail.com>
 <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>
Message-ID: <f1edb5ea-1670-4665-a0aa-00d33fc9890c@spatialys.com>

Rob,

https://github.com/OSGeo/gdal/pull/9128 should do what you wish. As 
usual, the hardest part is the naming of options...

Even

Le 19/01/2024 ? 18:32, Even Rouault via gdal-dev a ?crit?:
> Hi Rob,
>
> I can't think an easy way of doing what you want.
>
> Well, you can definitely do that using a VRT Python pixel function, 
> that would essentially do your --calc expression
>
> Cf 
> https://gdal.org/drivers/raster/vrt.html#using-derived-bands-with-pixel-functions-in-python
>
> The example of 
> https://gdal.org/drivers/raster/vrt.html#vrt-that-adds-2-or-more-rasters 
> is probably the closest starting point. (you can add <SourceBand> to 
> the <SimpleSource>'s to specify bands 1 and 4)
>
> A nice exercice for (Pythonist) contributors would be to add a -f VRT 
> capability to gdal_calc.py that would essentially automate the writing 
> of such VRT using Python pixel functions. Just saying...
>
> Even
>
> Le 19/01/2024 ? 17:40, Robert Coup via gdal-dev a ?crit?:
>> Maybe it's just Friday, but I could use a pointer here :-)
>>
>> My input raster is a RGBA byte image, where the alpha channel value 
>> is 0 or 255 (ie: effectively a mask). The output is ideally a VRT 
>> file, RGB with Int16 data type, using nodata=-1.
>>
>> So I want to convert the alpha channel to a nodata value.
>>
>> The alpha/nodata/mask/band options to translate/warp haven't got me 
>> very far, neither has hand-crafting various UseMaskBand/MaskBand 
>> elements in a VRT.
>>
>> I can do it to concrete tif files with something like this, 
>> repeating?for R,G,B and merge the output bands together, but it's a 
>> lot of processing.
>>
>> ? gdal_calc.py -A src.tif -B src.tif \
>> ? ? --outfile out_b1.tif --co TILED=YES --type=Int16 --NoDataValue=-1 \
>> ? ? --A_band=1 --B_band=4 --calc="where(B >= 128, A, -1)"
>>
>> I feel like?I'm probably missing a simpler path? (Which I will 
>> definitely add to an Examples section somewhere)
>>
>> Thanks,
>>
>> Rob :)
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mirza.nawandish at haritaevi.com  Wed Jan 24 05:12:31 2024
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Wed, 24 Jan 2024 16:12:31 +0300
Subject: [gdal-dev] Inquiry about Elevation Values in DXF Conversion using
 ogr2ogr
Message-ID: <282451706101868@mail.yandex.com.tr>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240124/8eee0957/attachment-0001.htm>

From a.pau at creaf.uab.cat  Wed Jan 24 06:02:43 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Wed, 24 Jan 2024 14:02:43 +0000
Subject: [gdal-dev] Inquiry about Elevation Values in DXF Conversion
 using ogr2ogr
In-Reply-To: <282451706101868@mail.yandex.com.tr>
References: <282451706101868@mail.yandex.com.tr>
Message-ID: <PAXPR07MB7775049065C6659F212C0384A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi,

can you send us the file but not attached because it?s not allowed too much size in attachments.

Have you converted to another format to see if it?s a matter of KML or it?s general?
I?ll try to convert to MiraMon to test the elevations.

Thanks

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Shahrukh Mirza Nawandish via gdal-dev
Enviado el: dimecres, 24 de gener de 2024 14:13
Para: gdal-dev at lists.osgeo.org
Asunto: [gdal-dev] Inquiry about Elevation Values in DXF Conversion using ogr2ogr

Dear GDAL Team,

I hope this email finds you well. I'm encountering an issue when converting GeoJSON or KML files to DXF using ogr2ogr?specifically, the generated DXF file assigns a uniform elevation to all coordinates.

Your assistance in resolving this matter is highly appreciated.

Thank you,

--
Sayg?lar?mla / Kind Regards

Shahrukh Mirza NAWANDISH
Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems
Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist
Bilgisayar Programc?s? / Computer Programmer MCA
[https://www.haritaevi.com/wp-content/uploads/2023/10/Hevi100.png]<https://www.haritaevi.com/en/>
T:+90 312 266 66 98
M:+90 538 519 72 67
 E:mirza.nawandish at haritaevi.com
?: Ankara-Istanbul-Bucharest<https://www.haritaevi.com/en/about-us/contact>
www.haritaevi.com<http://www.haritaevi.com/>
www.obstacleanalyze.com<http://www.obstacleanalyze.com/>
www.aixm.haritaevi.com<https://aixm.haritaevi.com/>
www.aerodatamarket.com<http://www.aerodatamarket.com/>
[https://avatars.mds.yandex.net/get-mail-signature/2434044/d24bf65965f2be07edc47ff3c25b0348/orig]<https://www.instagram.com/haritaevi/?hl=tr>[https://avatars.mds.yandex.net/get-mail-signature/200369/c75763261eac7fb671922d147573080b/orig]<https://www.linkedin.com/company/haritaevi-havac%C4%B1l%C4%B1k-m%C3%BChendislik-a-%C5%9F/>[https://avatars.mds.yandex.net/get-mail-signature/2434044/1cd6e615d44979bf9b0d6b0ea9c47182/orig]<https://twitter.com/haritaevi>[https://avatars.mds.yandex.net/get-mail-signature/232821/ec6941b191f27730d3a5f92fd846beb4/orig]<https://www.youtube.com/channel/UCZHA_PmyMLg__KOfNgOLJYg?view_as=subscriber>[https://avatars.mds.yandex.net/get-mail-signature/232821/0545b2da2dc9f49f532774615ec45e51/orig]<https://www.facebook.com/haritaevi/>[https://www.haritaevi.com/wp-content/uploads/2022/02/disclaimer_1.png]<https://www.haritaevi.com/disclaimer> [https://avatars.mds.yandex.net/get-mail-signature/2434044/58c47a3a908e28fdb209656734002f36/orig] <https://fidic.org/> [https://avatars.mds.yandex.net/get-mail-signature/2423644/1ccfc2184635533811e43aeeae4bf6c1/orig] <https://www.efcanet.org/> [https://avatars.mds.yandex.net/get-mail-signature/2423644/405b95fb41fb8db77dcee35ff542f333/orig] <https://www.haritaevi.com/en/about-us/quality-policy> [https://avatars.mds.yandex.net/get-mail-signature/1539903/c89e02562564f32028015473ea475742/orig] <https://www.haritaevi.com/en/about-us/information-security-policy>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240124/0560a4a8/attachment-0001.htm>

From mirza.nawandish at haritaevi.com  Wed Jan 24 06:19:01 2024
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Wed, 24 Jan 2024 17:19:01 +0300
Subject: [gdal-dev] Inquiry about Elevation Values in DXF Conversion
 using ogr2ogr
In-Reply-To: <PAXPR07MB7775049065C6659F212C0384A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <282451706101868@mail.yandex.com.tr>
 <PAXPR07MB7775049065C6659F212C0384A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <987771706105669@mail.yandex.com.tr>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240124/767f4334/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: HKNW.kml
Type: text/xml
Size: 2307 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240124/767f4334/attachment-0001.xml>

From a.pau at creaf.uab.cat  Wed Jan 24 07:15:53 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Wed, 24 Jan 2024 15:15:53 +0000
Subject: [gdal-dev] Inquiry about Elevation Values in DXF Conversion
 using ogr2ogr
In-Reply-To: <987771706105669@mail.yandex.com.tr>
References: <282451706101868@mail.yandex.com.tr>
 <PAXPR07MB7775049065C6659F212C0384A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <987771706105669@mail.yandex.com.tr>
Message-ID: <PAXPR07MB7775DB1B9B0AE8C6F1ABAD18A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>

HI,
I?ve checked that your file is correct but for some reason DXF does not get this capacity of variable elevation.
Sorry for not being more helpful.

Exporting with QGis also doesn?t work.

Perhaps is a matter of the format itself. Have you tried with other files and did it worked sometime?

De: Shahrukh Mirza Nawandish <mirza.nawandish at haritaevi.com>
Enviado el: dimecres, 24 de gener de 2024 15:19
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] Inquiry about Elevation Values in DXF Conversion using ogr2ogr

Hi,

Thank you for your prompt response. I'm attaching the data file to this email for your convenience.


Appreciate your assistance.

24.01.2024, 17:02, "Abel Pau" <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>:

Hi,



can you send us the file but not attached because it?s not allowed too much size in attachments.



Have you converted to another format to see if it?s a matter of KML or it?s general?

I?ll try to convert to MiraMon to test the elevations.



Thanks



De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Shahrukh Mirza Nawandish via gdal-dev
Enviado el: dimecres, 24 de gener de 2024 14:13
Para: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: [gdal-dev] Inquiry about Elevation Values in DXF Conversion using ogr2ogr



Dear GDAL Team,



I hope this email finds you well. I'm encountering an issue when converting GeoJSON or KML files to DXF using ogr2ogr?specifically, the generated DXF file assigns a uniform elevation to all coordinates.



Your assistance in resolving this matter is highly appreciated.



Thank you,



--

Sayg?lar?mla / Kind Regards



Shahrukh Mirza NAWANDISH

Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems

Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist

Bilgisayar Programc?s? / Computer Programmer MCA

[https://www.haritaevi.com/wp-content/uploads/2023/10/Hevi100.png]<https://www.haritaevi.com/en/>

T:+90 312 266 66 98

M:+90 538 519 72 67

 E:mirza.nawandish at haritaevi.com<mailto:mirza.nawandish at haritaevi.com>

?: Ankara-Istanbul-Bucharest<https://www.haritaevi.com/en/about-us/contact>

www.haritaevi.com<http://www.haritaevi.com/>

www.obstacleanalyze.com<http://www.obstacleanalyze.com/>

www.aixm.haritaevi.com<https://aixm.haritaevi.com/>

www.aerodatamarket.com<http://www.aerodatamarket.com/>

[https://avatars.mds.yandex.net/get-mail-signature/2434044/d24bf65965f2be07edc47ff3c25b0348/orig]<https://www.instagram.com/haritaevi/?hl=tr>[https://avatars.mds.yandex.net/get-mail-signature/200369/c75763261eac7fb671922d147573080b/orig]<https://www.linkedin.com/company/haritaevi-havac%C4%B1l%C4%B1k-m%C3%BChendislik-a-%C5%9F/>[https://avatars.mds.yandex.net/get-mail-signature/2434044/1cd6e615d44979bf9b0d6b0ea9c47182/orig]<https://twitter.com/haritaevi>[https://avatars.mds.yandex.net/get-mail-signature/232821/ec6941b191f27730d3a5f92fd846beb4/orig]<https://www.youtube.com/channel/UCZHA_PmyMLg__KOfNgOLJYg?view_as=subscriber>[https://avatars.mds.yandex.net/get-mail-signature/232821/0545b2da2dc9f49f532774615ec45e51/orig]<https://www.facebook.com/haritaevi/>[https://www.haritaevi.com/wp-content/uploads/2022/02/disclaimer_1.png]<https://www.haritaevi.com/disclaimer> [https://avatars.mds.yandex.net/get-mail-signature/2434044/58c47a3a908e28fdb209656734002f36/orig] <https://fidic.org/> [https://avatars.mds.yandex.net/get-mail-signature/2423644/1ccfc2184635533811e43aeeae4bf6c1/orig] <https://www.efcanet.org/> [https://avatars.mds.yandex.net/get-mail-signature/2423644/405b95fb41fb8db77dcee35ff542f333/orig] <https://www.haritaevi.com/en/about-us/quality-policy> [https://avatars.mds.yandex.net/get-mail-signature/1539903/c89e02562564f32028015473ea475742/orig] <https://www.haritaevi.com/en/about-us/information-security-policy>




--
Sayg?lar?mla / Kind Regards

Shahrukh Mirza NAWANDISH
Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems
Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist
Bilgisayar Programc?s? / Computer Programmer MCA
Cumhuriyetimizin 100. Y?l? Kutlu Olsun
Happy 100th Anniversary of Our Republic.
[https://www.haritaevi.com/wp-content/uploads/2023/10/Hevi100.png]<https://www.haritaevi.com/en/>
T:+90 312 266 66 98
M:+90 538 519 72 67
 E:mirza.nawandish at haritaevi.com
?: Ankara-Istanbul-Bucharest<https://www.haritaevi.com/en/about-us/contact>
www.haritaevi.com<http://www.haritaevi.com/>
www.obstacleanalyze.com<http://www.obstacleanalyze.com/>
www.aixm.haritaevi.com<https://aixm.haritaevi.com/>
www.aerodatamarket.com<http://www.aerodatamarket.com/>
[https://avatars.mds.yandex.net/get-mail-signature/2434044/d24bf65965f2be07edc47ff3c25b0348/orig]<https://www.instagram.com/haritaevi/?hl=tr>[https://avatars.mds.yandex.net/get-mail-signature/200369/c75763261eac7fb671922d147573080b/orig]<https://www.linkedin.com/company/haritaevi-havac%C4%B1l%C4%B1k-m%C3%BChendislik-a-%C5%9F/>[https://avatars.mds.yandex.net/get-mail-signature/2434044/1cd6e615d44979bf9b0d6b0ea9c47182/orig]<https://twitter.com/haritaevi>[https://avatars.mds.yandex.net/get-mail-signature/232821/ec6941b191f27730d3a5f92fd846beb4/orig]<https://www.youtube.com/channel/UCZHA_PmyMLg__KOfNgOLJYg?view_as=subscriber>[https://avatars.mds.yandex.net/get-mail-signature/232821/0545b2da2dc9f49f532774615ec45e51/orig]<https://www.facebook.com/haritaevi/>[https://www.haritaevi.com/wp-content/uploads/2022/02/disclaimer_1.png]<https://www.haritaevi.com/disclaimer> [https://avatars.mds.yandex.net/get-mail-signature/2434044/58c47a3a908e28fdb209656734002f36/orig] <https://fidic.org/> [https://avatars.mds.yandex.net/get-mail-signature/2423644/1ccfc2184635533811e43aeeae4bf6c1/orig] <https://www.efcanet.org/> [https://avatars.mds.yandex.net/get-mail-signature/2423644/405b95fb41fb8db77dcee35ff542f333/orig] <https://www.haritaevi.com/en/about-us/quality-policy> [https://avatars.mds.yandex.net/get-mail-signature/1539903/c89e02562564f32028015473ea475742/orig] <https://www.haritaevi.com/en/about-us/information-security-policy>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240124/f7b4efce/attachment-0001.htm>

From j1 at jimenezshaw.com  Wed Jan 24 07:46:57 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 24 Jan 2024 16:46:57 +0100
Subject: [gdal-dev] Inquiry about Elevation Values in DXF Conversion
 using ogr2ogr
In-Reply-To: <PAXPR07MB7775DB1B9B0AE8C6F1ABAD18A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <282451706101868@mail.yandex.com.tr>
 <PAXPR07MB7775049065C6659F212C0384A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <987771706105669@mail.yandex.com.tr>
 <PAXPR07MB7775DB1B9B0AE8C6F1ABAD18A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <CADRrdKtqo0Afbwp6w=fd6KwgQqJ7fHCy+w8=7axnaGBQLO6NDA@mail.gmail.com>

If I remember correctly, DXF does not support multipolygons with different
elevations.

On Wed, 24 Jan 2024 at 16:15, Abel Pau via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> HI,
>
> I?ve checked that your file is correct but for some reason DXF does not
> get this capacity of variable elevation.
>
> Sorry for not being more helpful.
>
>
>
> Exporting with QGis also doesn?t work.
>
>
>
> Perhaps is a matter of the format itself. Have you tried with other files
> and did it worked sometime?
>
>
>
> *De:* Shahrukh Mirza Nawandish <mirza.nawandish at haritaevi.com>
> *Enviado el:* dimecres, 24 de gener de 2024 15:19
> *Para:* Abel Pau <a.pau at creaf.uab.cat>
> *CC:* gdal-dev at lists.osgeo.org
> *Asunto:* Re: [gdal-dev] Inquiry about Elevation Values in DXF Conversion
> using ogr2ogr
>
>
>
> Hi,
>
>
>
> Thank you for your prompt response. I'm attaching the data file to this
> email for your convenience.
>
>
>
>
>
> Appreciate your assistance.
>
>
>
> 24.01.2024, 17:02, "Abel Pau" <a.pau at creaf.uab.cat>:
>
> Hi,
>
>
>
> can you send us the file but not attached because it?s not allowed too
> much size in attachments.
>
>
>
> Have you converted to another format to see if it?s a matter of KML or
> it?s general?
>
> I?ll try to convert to MiraMon to test the elevations.
>
>
>
> Thanks
>
>
>
> *De:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> *En nombre de *Shahrukh
> Mirza Nawandish via gdal-dev
> *Enviado el:* dimecres, 24 de gener de 2024 14:13
> *Para:* gdal-dev at lists.osgeo.org
> *Asunto:* [gdal-dev] Inquiry about Elevation Values in DXF Conversion
> using ogr2ogr
>
>
>
> Dear GDAL Team,
>
>
>
> I hope this email finds you well. I'm encountering an issue when
> converting GeoJSON or KML files to DXF using ogr2ogr?specifically, the
> generated DXF file assigns a uniform elevation to all coordinates.
>
>
>
> Your assistance in resolving this matter is highly appreciated.
>
>
>
> Thank you,
>
>
>
> --
>
> Sayg?lar?mla / Kind Regards
>
>
>
> *Shahrukh Mirza NAWANDISH*
>
> Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems
>
> Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist
>
> Bilgisayar Programc?s? / Computer Programmer MCA
>
> <https://www.haritaevi.com/en/>
>
> *T:*+90 312 266 66 98
>
> *M**:*+90 538 519 72 67
>
> * E:*mirza.nawandish at haritaevi.com
>
> *?**:* Ankara-Istanbul-Bucharest
> <https://www.haritaevi.com/en/about-us/contact>
>
> *www.haritaevi.com <http://www.haritaevi.com/>*
>
> *www.obstacleanalyze.com <http://www.obstacleanalyze.com/>*
>
> *www.aixm.haritaevi.com <https://aixm.haritaevi.com/>*
>
> *www.aerodatamarket.com <http://www.aerodatamarket.com/>*
>
> <https://www.instagram.com/haritaevi/?hl=tr>
> <https://www.linkedin.com/company/haritaevi-havac%C4%B1l%C4%B1k-m%C3%BChendislik-a-%C5%9F/>
> <https://twitter.com/haritaevi>
> <https://www.youtube.com/channel/UCZHA_PmyMLg__KOfNgOLJYg?view_as=subscriber>
> <https://www.facebook.com/haritaevi/>
> <https://www.haritaevi.com/disclaimer>  <https://fidic.org/>
> <https://www.efcanet.org/>
> <https://www.haritaevi.com/en/about-us/quality-policy>
> <https://www.haritaevi.com/en/about-us/information-security-policy>
>
>
>
>
>
>
>
> --
>
> Sayg?lar?mla / Kind Regards
>
>
>
> *Shahrukh Mirza NAWANDISH*
>
> Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems
>
> Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist
>
> Bilgisayar Programc?s? / Computer Programmer MCA
>
> Cumhuriyetimizin 100. Y?l? Kutlu Olsun
>
> Happy 100th Anniversary of Our Republic.
>
> <https://www.haritaevi.com/en/>
>
> *T:*+90 312 266 66 98
>
> *M**:*+90 538 519 72 67
>
> * E:*mirza.nawandish at haritaevi.com
>
> *?**:* Ankara-Istanbul-Bucharest
> <https://www.haritaevi.com/en/about-us/contact>
>
> *www.haritaevi.com <http://www.haritaevi.com/>*
>
> *www.obstacleanalyze.com <http://www.obstacleanalyze.com/>*
>
> *www.aixm.haritaevi.com <https://aixm.haritaevi.com/>*
>
> *www.aerodatamarket.com <http://www.aerodatamarket.com/>*
>
> <https://www.instagram.com/haritaevi/?hl=tr>
> <https://www.linkedin.com/company/haritaevi-havac%C4%B1l%C4%B1k-m%C3%BChendislik-a-%C5%9F/>
> <https://twitter.com/haritaevi>
> <https://www.youtube.com/channel/UCZHA_PmyMLg__KOfNgOLJYg?view_as=subscriber>
> <https://www.facebook.com/haritaevi/>
> <https://www.haritaevi.com/disclaimer>  <https://fidic.org/>
> <https://www.efcanet.org/>
> <https://www.haritaevi.com/en/about-us/quality-policy>
> <https://www.haritaevi.com/en/about-us/information-security-policy>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240124/8498a9a4/attachment-0001.htm>

From mirza.nawandish at haritaevi.com  Wed Jan 24 07:58:34 2024
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Wed, 24 Jan 2024 18:58:34 +0300
Subject: [gdal-dev] Inquiry about Elevation Values in DXF Conversion
 using ogr2ogr
In-Reply-To: <CADRrdKtqo0Afbwp6w=fd6KwgQqJ7fHCy+w8=7axnaGBQLO6NDA@mail.gmail.com>
References: <282451706101868@mail.yandex.com.tr>
 <PAXPR07MB7775049065C6659F212C0384A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <987771706105669@mail.yandex.com.tr>
 <PAXPR07MB7775DB1B9B0AE8C6F1ABAD18A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CADRrdKtqo0Afbwp6w=fd6KwgQqJ7fHCy+w8=7axnaGBQLO6NDA@mail.gmail.com>
Message-ID: <839101706111558@mail.yandex.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240124/aa819ef9/attachment-0001.htm>

From AThomas at thinkspatial.com.au  Wed Jan 24 18:43:08 2024
From: AThomas at thinkspatial.com.au (Alan Thomas)
Date: Thu, 25 Jan 2024 02:43:08 +0000
Subject: [gdal-dev] Inquiry about Elevation Values in DXF Conversion
 using ogr2ogr
In-Reply-To: <839101706111558@mail.yandex.com>
References: <282451706101868@mail.yandex.com.tr>
 <PAXPR07MB7775049065C6659F212C0384A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <987771706105669@mail.yandex.com.tr>
 <PAXPR07MB7775DB1B9B0AE8C6F1ABAD18A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CADRrdKtqo0Afbwp6w=fd6KwgQqJ7fHCy+w8=7axnaGBQLO6NDA@mail.gmail.com>
 <839101706111558@mail.yandex.com>
Message-ID: <SYBPR01MB8011FA89EC9145515DCB45F8E07A2@SYBPR01MB8011.ausprd01.prod.outlook.com>

Hi Shahrukh,

Have you tried using the DXF_WRITE_HATCH configuration option documented https://gdal.org/drivers/vector/dxf.html?

For me, the following command creates a DXF that includes the elevations of individual vertices on the linestring:

ogr2ogr HKNW.dxf HKNW.kml --config DXF_WRITE_HATCH FALSE

This is a common pain point for users of the DXF driver. We might need to improve this part of the documentation, or consider changing the default value of DXF_WRITE_HATCH from TRUE to FALSE.

Regards,
Alan Thomas

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Shahrukh Mirza Nawandish via gdal-dev
Sent: Thursday, January 25, 2024 2:59 AM
To: Javier Jimenez Shaw <j1 at jimenezshaw.com>; Abel Pau <a.pau at creaf.uab.cat>
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Inquiry about Elevation Values in DXF Conversion using ogr2ogr

Hi,

Thank you for your feedback. I appreciate your efforts in troubleshooting. When using Global Mapper and MicroStation, the elevation values were correctly preserved in the DXF conversion, while GDAL and QGIS didn?t.

24.01.2024, 18:47, "Javier Jimenez Shaw" <j1 at jimenezshaw.com<mailto:j1 at jimenezshaw.com>>:
If I remember correctly, DXF does not support multipolygons with different elevations.

On Wed, 24 Jan 2024 at 16:15, Abel Pau via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:

HI,

I?ve checked that your file is correct but for some reason DXF does not get this capacity of variable elevation.

Sorry for not being more helpful.



Exporting with QGis also doesn?t work.



Perhaps is a matter of the format itself. Have you tried with other files and did it worked sometime?



De: Shahrukh Mirza Nawandish <mirza.nawandish at haritaevi.com<mailto:mirza.nawandish at haritaevi.com>>
Enviado el: dimecres, 24 de gener de 2024 15:19
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>
CC: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] Inquiry about Elevation Values in DXF Conversion using ogr2ogr



Hi,



Thank you for your prompt response. I'm attaching the data file to this email for your convenience.





Appreciate your assistance.



24.01.2024, 17:02, "Abel Pau" <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>:

Hi,



can you send us the file but not attached because it?s not allowed too much size in attachments.



Have you converted to another format to see if it?s a matter of KML or it?s general?

I?ll try to convert to MiraMon to test the elevations.



Thanks



De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Shahrukh Mirza Nawandish via gdal-dev
Enviado el: dimecres, 24 de gener de 2024 14:13
Para: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: [gdal-dev] Inquiry about Elevation Values in DXF Conversion using ogr2ogr



Dear GDAL Team,



I hope this email finds you well. I'm encountering an issue when converting GeoJSON or KML files to DXF using ogr2ogr?specifically, the generated DXF file assigns a uniform elevation to all coordinates.



Your assistance in resolving this matter is highly appreciated.



Thank you,



--

Sayg?lar?mla / Kind Regards



Shahrukh Mirza NAWANDISH

Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems

Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist

Bilgisayar Programc?s? / Computer Programmer MCA

T:+90 312 266 66 98<https://www.haritaevi.com/en/>

M:+90 538 519 72 67<https://www.haritaevi.com/en/>

 E:mirza.nawandish at haritaevi.com<https://www.haritaevi.com/en/>

?: Ankara-Istanbul-Bucharest<https://www.haritaevi.com/en/>

www.haritaevi.com<https://www.haritaevi.com/en/>

www.obstacleanalyze.com<https://www.haritaevi.com/en/>

www.aixm.haritaevi.com<https://www.haritaevi.com/en/>

www.aerodatamarket.com<https://www.haritaevi.com/en/>

 <https://www.haritaevi.com/en/>







--

Sayg?lar?mla / Kind Regards



Shahrukh Mirza NAWANDISH

Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems

Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist

Bilgisayar Programc?s? / Computer Programmer MCA

Cumhuriyetimizin 100. Y?l? Kutlu Olsun

Happy 100th Anniversary of Our Republic.

<https://www.haritaevi.com/en/>

T:+90 312 266 66 98

M:+90 538 519 72 67

 E:mirza.nawandish at haritaevi.com<mailto:mirza.nawandish at haritaevi.com>

?: Ankara-Istanbul-Bucharest<https://www.haritaevi.com/en/about-us/contact>

www.haritaevi.com<http://www.haritaevi.com/>

www.obstacleanalyze.com<http://www.obstacleanalyze.com/>

www.aixm.haritaevi.com<https://aixm.haritaevi.com/>

www.aerodatamarket.com<http://www.aerodatamarket.com/>

 <https://www.instagram.com/haritaevi/?hl=tr>


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
Sayg?lar?mla / Kind Regards

Shahrukh Mirza NAWANDISH
Havac?l?k Bilgi Sistemleri / Aeronautical Information Systems
Yaz?l?m Geli?tirme Uzm. Yrd. / Software Development Assist. Specialist
Bilgisayar Programc?s? / Computer Programmer MCA
Cumhuriyetimizin 100. Y?l? Kutlu Olsun
Happy 100th Anniversary of Our Republic.
[https://www.haritaevi.com/wp-content/uploads/2023/10/Hevi100.png]<https://www.haritaevi.com/en/>
T:+90 312 266 66 98
M:+90 538 519 72 67
 E:mirza.nawandish at haritaevi.com
?: Ankara-Istanbul-Bucharest<https://www.haritaevi.com/en/about-us/contact>
www.haritaevi.com<http://www.haritaevi.com/>
www.obstacleanalyze.com<http://www.obstacleanalyze.com/>
www.aixm.haritaevi.com<https://aixm.haritaevi.com/>
www.aerodatamarket.com<http://www.aerodatamarket.com/>
[https://avatars.mds.yandex.net/get-mail-signature/2434044/d24bf65965f2be07edc47ff3c25b0348/orig]<https://www.instagram.com/haritaevi/?hl=tr>[https://avatars.mds.yandex.net/get-mail-signature/200369/c75763261eac7fb671922d147573080b/orig]<https://www.linkedin.com/company/haritaevi-havac%C4%B1l%C4%B1k-m%C3%BChendislik-a-%C5%9F/>[https://avatars.mds.yandex.net/get-mail-signature/2434044/1cd6e615d44979bf9b0d6b0ea9c47182/orig]<https://twitter.com/haritaevi>[https://avatars.mds.yandex.net/get-mail-signature/232821/ec6941b191f27730d3a5f92fd846beb4/orig]<https://www.youtube.com/channel/UCZHA_PmyMLg__KOfNgOLJYg?view_as=subscriber>[https://avatars.mds.yandex.net/get-mail-signature/232821/0545b2da2dc9f49f532774615ec45e51/orig]<https://www.facebook.com/haritaevi/>[https://www.haritaevi.com/wp-content/uploads/2022/02/disclaimer_1.png]<https://www.haritaevi.com/disclaimer> [https://avatars.mds.yandex.net/get-mail-signature/2434044/58c47a3a908e28fdb209656734002f36/orig] <https://fidic.org/> [https://avatars.mds.yandex.net/get-mail-signature/2423644/1ccfc2184635533811e43aeeae4bf6c1/orig] <https://www.efcanet.org/> [https://avatars.mds.yandex.net/get-mail-signature/2423644/405b95fb41fb8db77dcee35ff542f333/orig] <https://www.haritaevi.com/en/about-us/quality-policy> [https://avatars.mds.yandex.net/get-mail-signature/1539903/c89e02562564f32028015473ea475742/orig] <https://www.haritaevi.com/en/about-us/information-security-policy>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/e1cc9956/attachment-0001.htm>

From dshean at uw.edu  Wed Jan 24 19:41:20 2024
From: dshean at uw.edu (David Shean)
Date: Wed, 24 Jan 2024 19:41:20 -0800
Subject: [gdal-dev] How to use geokey CoordinateEpochGeoKey in Geotiff
 from Python
In-Reply-To: <632e9ac0-e68b-4f09-b213-be1ec8cdc83b@spatialys.com>
References: <CAGm0ZKdFgWQ3t7ZdHUr2idj5ndvokZ87xgyLZfaj3bW3a6V2sg@mail.gmail.com>
 <632e9ac0-e68b-4f09-b213-be1ec8cdc83b@spatialys.com>
Message-ID: <4A608C3B-74A3-4C9A-A8B4-C9280D6253F4@uw.edu>

Hi Even,
Thanks for the pointer to this resource, and for working to support this important functionality.  
Would it make sense to add the -a_coord_epoch option to gdal_edit.py, so users can directly update the GeoTiff header for a dataset with known epoch?
-David



--
David Shean
Civil and Environmental Engineering
University of Washington
https://www.ce.washington.edu/facultyfinder/david-shean? <https://www.ce.washington.edu/facultyfinder/david-shean>

201 More Hall, Box 352700
3760 E. Stevens Way NE
Seattle, WA 98195-2700
Office: (206) 543-3105, Wilcox Hall 265
Pronouns: he, him, his

> On Jan 17, 2024, at 11:40?AM, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> Hi,
> 
> cf test_tiff_write_coordinate_epoch() in https://github.com/OSGeo/gdal/blob/3a9541d19f2df52f1e66dacfa33878531a5f2c58/autotest/gcore/tiff_write.py#L9575
> 
> On the command line you might use: gdal_translate in.tif out.tif -a_coord_epoch XXXX.YYY
> 
> Even
> 
> Le 17/01/2024 ? 20:20, Glen Rice - NOAA Federal via gdal-dev a ?crit :
>> Hello,
>> 
>> We are trying to create geotiffs from Python and specify an epoch for a dynamic CRS.  Is there a way to do this from python or a command line utility?
>> 
>> We see the pull request adding CoordinateEpochGeoKey (5120) and expect I could print the information from gdalinfo if I had an example file.  If we were in C/C++ then we could use libgeotiff and GTIFKeyGet( ).  However we are in Python and we don't see how to write either the CoordinateEpochGeoKey, or even a generic geokey, into a geotiff.
>> 
>> For reference we looked at the following links:
>> https://gdal.org/user/coordinate_epoch.html
>> https://github.com/opengeospatial/geotiff/issues/78
>> https://github.com/opengeospatial/geotiff/pull/99
>> https://github.com/OSGeo/libgeotiff/blob/master/libgeotiff/geokeys.inc
>> 
>> Thanks for any help,
>> Glen and Barry
>> 
>> --
>> Glen Rice
>> National Bathymetric Source
>> Hydrographic Systems and Technology Branch
>> Office of Coast Survey / Coast Survey Development Laboratory
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com <http://www.spatialys.com/>
> My software is free, but my time generally not.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240124/a2e27b33/attachment.htm>

From mirza.nawandish at haritaevi.com  Wed Jan 24 22:02:13 2024
From: mirza.nawandish at haritaevi.com (Shahrukh Mirza Nawandish)
Date: Thu, 25 Jan 2024 09:02:13 +0300
Subject: [gdal-dev] Inquiry about Elevation Values in DXF Conversion
 using ogr2ogr
In-Reply-To: <SYBPR01MB8011FA89EC9145515DCB45F8E07A2@SYBPR01MB8011.ausprd01.prod.outlook.com>
References: <282451706101868@mail.yandex.com.tr>
 <PAXPR07MB7775049065C6659F212C0384A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <987771706105669@mail.yandex.com.tr>
 <PAXPR07MB7775DB1B9B0AE8C6F1ABAD18A27B2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <CADRrdKtqo0Afbwp6w=fd6KwgQqJ7fHCy+w8=7axnaGBQLO6NDA@mail.gmail.com>
 <839101706111558@mail.yandex.com>
 <SYBPR01MB8011FA89EC9145515DCB45F8E07A2@SYBPR01MB8011.ausprd01.prod.outlook.com>
Message-ID: <308071706161752@mail.yandex.com.tr>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/0a7add72/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: HKNW.kml
Type: text/xml
Size: 2307 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/0a7add72/attachment-0001.xml>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: HKNW_geographic.dgn
Type: application/octet-stream
Size: 2374 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/0a7add72/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: HKNW_Strip_3D_Epsg4326.json
Type: application/json
Size: 1435 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/0a7add72/attachment-0001.json>

From mdsumner at gmail.com  Wed Jan 24 22:28:19 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 25 Jan 2024 17:28:19 +1100
Subject: [gdal-dev] Layerstack multiple images,
 of different extents and variable number of bands
In-Reply-To: <CAPryQ-MfONKTi5o_3wMgxiFU8Dr5NkeJumvEKk09VHM06QC81A@mail.gmail.com>
References: <CAPryQ-MfONKTi5o_3wMgxiFU8Dr5NkeJumvEKk09VHM06QC81A@mail.gmail.com>
Message-ID: <CAAcGz9_V2bxqqXtQa4W_npZ9tNj6Qg9j3gEEhbqabN4tWOmB6w@mail.gmail.com>

I would start with

gdalwarp <all your sources/files> out.tif

set -ts to something small at first to get a visual like -ts 1024 0   (the
y zero means the aspect ratio is figured out sanely from the x size  - with
no arguments you get best-preserving grid from all resolved inputs - set
some or 3 of -t_srs -tr -te -ts for a specific grid spec).

Just make sure the file with the largest number of bands is first in the
input list (separated by spaces), if actual data overlaps in matching
sequential bands last-in wins (IIUC).

Cheers, Mike









On Wed, Jan 24, 2024 at 4:02?AM lefsky--- via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> I've been incorporating gdal into my processing pipelines and have a
> question about a feature.
>
> I need to be able to layer stack multiple images with different extents
> and varying numbers of bands, usually exceeding 1. I haven't been able to
> find a single command to do this in gdal. Am I missing something? If there
> is no such feature, has anyone developed a script out there that can
> robustly do all of those things (i.e. with checking for violation of
> assumptions about files and error handling)?
>
> Michael
>
> --
> Michael Lefsky (He/His)
> Home Location: HVHF+GH
> Cell: 970-980-9036
> http://www.researcherid.com/rid/A-7224-2009
>
> *?for being prematurely, and worse, intuitively right ? there?s a heavy
> price. But for being wrong ? no, not so long as you?re wrong in a pack."
> Gary Brecher / Portis*
>
> *I acknowledge that I live and work on stolen land. This is the land of
> the Cheyenne, Arapaho, Ute, and Ocheithi Sakowin people. To learn more
> about these nations, please visit;
> http://www.utemountainutetribe.com/
> http://www.cheyennenation.com/
> https://cheyenneandarapaho-nsn.gov/
> https://native-land.ca/
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/289739ec/attachment.htm>

From robert.coup at koordinates.com  Thu Jan 25 03:21:00 2024
From: robert.coup at koordinates.com (Robert Coup)
Date: Thu, 25 Jan 2024 11:21:00 +0000
Subject: [gdal-dev] Convert alpha to nodata?
In-Reply-To: <f1edb5ea-1670-4665-a0aa-00d33fc9890c@spatialys.com>
References: <CAFLLRpJuMq6cUQSjeAc=Xf0NCtUXKKj5AUpUvnpie075u5kTLQ@mail.gmail.com>
 <435d2934-6daf-4aab-99c1-2a789c5700bb@spatialys.com>
 <f1edb5ea-1670-4665-a0aa-00d33fc9890c@spatialys.com>
Message-ID: <CAFLLRpL6+Z7v6NU46UV=G2=7+RAL2NyFQVGsCQz1cXJHTOa9eA@mail.gmail.com>

On Wed, 24 Jan 2024 at 02:27, Even Rouault <even.rouault at spatialys.com> wrote:
>
> https://github.com/OSGeo/gdal/pull/9128 should do what you wish. As
> usual, the hardest part is the naming of options...

Wow! I'll try and review it in the next few days.

Rob :)

From guasqui at actgate.com  Thu Jan 25 03:34:27 2024
From: guasqui at actgate.com (Pierluigi Guasqui)
Date: Thu, 25 Jan 2024 12:34:27 +0100
Subject: [gdal-dev] Bad values when reading GCPs from a VRT file with
 gdalinfo in GDAL 3.8.3
Message-ID: <CAJNYLRLgO10D25ndDVXydD=+tgoPOAR14Djs4BENi78Zocbecg@mail.gmail.com>

Dear GDAL team,

I am using GDAL version 3.8.3 and I am trying to extract GCPs values with
gdalinfo tool from a VRT file (attached).

As you can see by looking at the VRT file with a text editor GCP XYZ values
are infinite values. When I read GCPs from the attached VRT file with
gdalinfo (latest version GDAL v. 3.8.3) I am getting all zeros:

GCP[  0]: Id=0, Info=
          (0,0) -> (0,0,0)

Instead, if I use gdalinfo (GDAL v. 3.6.3) I am getting the correct values:

GCP[  0]: Id=0, Info=
          (0,0) -> (inf,inf,-inf)

Is this a bug with GDAL 3.8.3?

Thank you for your help!

-- 
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/0ed05ccf/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: earth.jpg
Type: image/jpeg
Size: 18635 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/0ed05ccf/attachment-0001.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: earth.vrt
Type: application/octet-stream
Size: 2394 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/0ed05ccf/attachment-0001.obj>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan 25 03:44:35 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 25 Jan 2024 11:44:35 +0000
Subject: [gdal-dev] Bad values when reading GCPs from a VRT file with
 gdalinfo in GDAL 3.8.3
In-Reply-To: <CAJNYLRLgO10D25ndDVXydD=+tgoPOAR14Djs4BENi78Zocbecg@mail.gmail.com>
References: <CAJNYLRLgO10D25ndDVXydD=+tgoPOAR14Djs4BENi78Zocbecg@mail.gmail.com>
Message-ID: <DB9PR09MB6887F4A70FE48F088DF411A6FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Out of curiosity, what is the purpose of using inf or -inf as values? Is it to use them as placeholders telling that you do not know yet what the georeferenced coordinates of the ground control points are?

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Pierluigi Guasqui via gdal-dev
L?hetetty: torstai 25. tammikuuta 2024 13.34
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Bad values when reading GCPs from a VRT file with gdalinfo in GDAL 3.8.3

Dear GDAL team,

I am using GDAL version 3.8.3 and I am trying to extract GCPs values with gdalinfo tool from a VRT file (attached).

As you can see by looking at the VRT file with a text editor GCP XYZ values are infinite values. When I read GCPs from the attached VRT file with gdalinfo (latest version GDAL v. 3.8.3) I am getting all zeros:

GCP[  0]: Id=0, Info=
          (0,0) -> (0,0,0)

Instead, if I use gdalinfo (GDAL v. 3.6.3) I am getting the correct values:

GCP[  0]: Id=0, Info=
          (0,0) -> (inf,inf,-inf)

Is this a bug with GDAL 3.8.3?

Thank you for your help!

--
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com<http://www.actgate.com/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/ec946af2/attachment.htm>

From even.rouault at spatialys.com  Thu Jan 25 03:47:41 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jan 2024 12:47:41 +0100
Subject: [gdal-dev] How to use geokey CoordinateEpochGeoKey in Geotiff
 from Python
In-Reply-To: <4A608C3B-74A3-4C9A-A8B4-C9280D6253F4@uw.edu>
References: <CAGm0ZKdFgWQ3t7ZdHUr2idj5ndvokZ87xgyLZfaj3bW3a6V2sg@mail.gmail.com>
 <632e9ac0-e68b-4f09-b213-be1ec8cdc83b@spatialys.com>
 <4A608C3B-74A3-4C9A-A8B4-C9280D6253F4@uw.edu>
Message-ID: <11f5639e-3780-48c4-b1ac-a44cd761be73@spatialys.com>


Le 25/01/2024 ? 04:41, David Shean a ?crit?:
> Hi Even,
> Thanks for the pointer to this resource, and for working to support 
> this important functionality.
> Would it make sense to add the -a_coord_epoch option to gdal_edit.py, 
> so users can directly update the GeoTiff header for a dataset with 
> known epoch?
That could indeed be an appropriate addition. Contribution welcome
> -David
>
>
>
> --
> David Shean
> Civil and Environmental Engineering
> University of Washington
> https://www.ce.washington.edu/facultyfinder/david-shean 
> <https://www.ce.washington.edu/facultyfinder/david-shean>
>
> 201 More Hall, Box 352700
> 3760 E. Stevens Way NE
> Seattle, WA 98195-2700
> Office: (206) 543-3105, Wilcox Hall 265
> Pronouns: he, him, his
>
>> On Jan 17, 2024, at 11:40?AM, Even Rouault via gdal-dev 
>> <gdal-dev at lists.osgeo.org> wrote:
>>
>> Hi,
>>
>> cf test_tiff_write_coordinate_epoch() in 
>> https://github.com/OSGeo/gdal/blob/3a9541d19f2df52f1e66dacfa33878531a5f2c58/autotest/gcore/tiff_write.py#L9575
>>
>> On the command line you might use: gdal_translate in.tif out.tif 
>> -a_coord_epoch XXXX.YYY
>>
>> Even
>>
>> Le 17/01/2024 ? 20:20, Glen Rice - NOAA Federal via gdal-dev a ?crit?:
>>> Hello,
>>>
>>> We are trying to create geotiffs from Python and specify an epoch 
>>> for a dynamic CRS.? Is there a way to do this from?python or a 
>>> command line utility?
>>>
>>> We see the pull request adding CoordinateEpochGeoKey (5120) and 
>>> expect I could print the information from gdalinfo if I had an 
>>> example file.? If we were in C/C++ then we could use libgeotiff and 
>>> GTIFKeyGet( ).? However we are in Python and we don't see how to 
>>> write either the?CoordinateEpochGeoKey, or even a generic geokey, 
>>> into a geotiff.
>>>
>>> For reference we looked at the following links:
>>> https://gdal.org/user/coordinate_epoch.html
>>> https://github.com/opengeospatial/geotiff/issues/78
>>> https://github.com/opengeospatial/geotiff/pull/99
>>> https://github.com/OSGeo/libgeotiff/blob/master/libgeotiff/geokeys.inc
>>>
>>> Thanks for any help,
>>> Glen and Barry
>>>
>>> -- 
>>> Glen Rice
>>> National Bathymetric Source
>>> Hydrographic Systems and Technology Branch
>>> Office of Coast Survey / Coast Survey Development Laboratory
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b1ff0b39/attachment.htm>

From even.rouault at spatialys.com  Thu Jan 25 04:21:48 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jan 2024 13:21:48 +0100
Subject: [gdal-dev] Bad values when reading GCPs from a VRT file with
 gdalinfo in GDAL 3.8.3
In-Reply-To: <CAJNYLRLgO10D25ndDVXydD=+tgoPOAR14Djs4BENi78Zocbecg@mail.gmail.com>
References: <CAJNYLRLgO10D25ndDVXydD=+tgoPOAR14Djs4BENi78Zocbecg@mail.gmail.com>
Message-ID: <5891b51f-4d66-4e8d-b926-b033004365ca@spatialys.com>

Hi,

will be fixed per https://github.com/OSGeo/gdal/pull/9136 . As a 
workaround, you can spell them "inf" or "-inf" lowercase

Even

Le 25/01/2024 ? 12:34, Pierluigi Guasqui via gdal-dev a ?crit?:
> Dear GDAL team,
>
> I am using GDAL version 3.8.3 and I am trying to extract GCPs values 
> with gdalinfo tool from a VRT file (attached).
>
> As you can see by looking at the VRT file with a text editor GCP XYZ 
> values are infinite values. When I read GCPs from the attached VRT 
> file with gdalinfo (latest version GDAL v. 3.8.3) I am getting all zeros:
>
> GCP[ ?0]: Id=0, Info=
> ? ? ? ? ? (0,0) -> (0,0,0)
>
> Instead, if I use gdalinfo (GDAL v. 3.6.3) I am getting the correct 
> values:
>
> GCP[ ?0]: Id=0, Info=
> ? ? ? ? ? (0,0) -> (inf,inf,-inf)
>
> Is this a bug with GDAL 3.8.3?
>
> Thank you for your help!
>
> -- 
> Pierluigi Guasqui
> Software Engineer
>
> Applied Coherent Technology Corporation (ACT)
> www.actgate.com <http://www.actgate.com>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/ef3b293b/attachment-0001.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan 25 04:24:54 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 25 Jan 2024 12:24:54 +0000
Subject: [gdal-dev] Bad values when reading GCPs from a VRT file with
 gdalinfo in GDAL 3.8.3
In-Reply-To: <CAJNYLRL-436jZxEChXgxyQMgwGPvDKqnKrFpuXOE56PpWfcOdA@mail.gmail.com>
References: <CAJNYLRLgO10D25ndDVXydD=+tgoPOAR14Djs4BENi78Zocbecg@mail.gmail.com>
 <DB9PR09MB6887F4A70FE48F088DF411A6FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAJNYLRL-436jZxEChXgxyQMgwGPvDKqnKrFpuXOE56PpWfcOdA@mail.gmail.com>
Message-ID: <DB9PR09MB68876CB5DE7DF3FC7C0253FBFD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

I guessed so. Is that your own invention or is it documented somewhere that undefined GCPs should be marked that way by using INF? I ask because if it is something that should be reliable then I may have use for that feature in the future.

Problem may be limited to vrt. This test seems to pass

gdal_translate -gcp 0 0 inf inf test.tif inftest.tif

gdalinfo inftest.tif
?
GCP[  0]: Id=1, Info=
          (0,0) -> (inf,inf,0)

-Jukka Rahkonen-

L?hett?j?: Pierluigi Guasqui <guasqui at actgate.com>
L?hetetty: torstai 25. tammikuuta 2024 14.16
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] Bad values when reading GCPs from a VRT file with gdalinfo in GDAL 3.8.3

Hello Jukka,

in general using infinite values is to mark undefined or invalid GCPs.

Pierluigi

On Thu, Jan 25, 2024 at 12:44?PM Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Out of curiosity, what is the purpose of using inf or -inf as values? Is it to use them as placeholders telling that you do not know yet what the georeferenced coordinates of the ground control points are?

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Pierluigi Guasqui via gdal-dev
L?hetetty: torstai 25. tammikuuta 2024 13.34
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Bad values when reading GCPs from a VRT file with gdalinfo in GDAL 3.8.3

Dear GDAL team,

I am using GDAL version 3.8.3 and I am trying to extract GCPs values with gdalinfo tool from a VRT file (attached).

As you can see by looking at the VRT file with a text editor GCP XYZ values are infinite values. When I read GCPs from the attached VRT file with gdalinfo (latest version GDAL v. 3.8.3) I am getting all zeros:

GCP[  0]: Id=0, Info=
          (0,0) -> (0,0,0)

Instead, if I use gdalinfo (GDAL v. 3.6.3) I am getting the correct values:

GCP[  0]: Id=0, Info=
          (0,0) -> (inf,inf,-inf)

Is this a bug with GDAL 3.8.3?

Thank you for your help!

--
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com<http://www.actgate.com/>


--
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com<http://www.actgate.com/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/284bab2e/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan 25 05:37:14 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 25 Jan 2024 13:37:14 +0000
Subject: [gdal-dev] Bad values when reading GCPs from a VRT file with
 gdalinfo in GDAL 3.8.3
In-Reply-To: <CAJNYLR++HjvwEkAANOCBTi5VHa0b-BOdMg1RE6G1+2OQk3+hSg@mail.gmail.com>
References: <CAJNYLRLgO10D25ndDVXydD=+tgoPOAR14Djs4BENi78Zocbecg@mail.gmail.com>
 <DB9PR09MB6887F4A70FE48F088DF411A6FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAJNYLRL-436jZxEChXgxyQMgwGPvDKqnKrFpuXOE56PpWfcOdA@mail.gmail.com>
 <DB9PR09MB68876CB5DE7DF3FC7C0253FBFD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAJNYLR++HjvwEkAANOCBTi5VHa0b-BOdMg1RE6G1+2OQk3+hSg@mail.gmail.com>
Message-ID: <DB9PR09MB6887A5127AD258884E4C7B32FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Certainly, consistent behavior is expected but I did not notice that your VRT was created with GDAL.
I edited your vrt a bit:
<GCP Id="0" Pixel="0.0000" Line="0.0000" X="FIN" Y="FIN" Z="-FIN" />
and with gdalinfo I seem to get still the same
GCP[  0]: Id=0, Info=
          (0,0) -> (0,0,0)

And I tried also this:
gdal_translate -gcp 0 0 fin fin test.tif inftest.tif

gdalinfo inftest.tif
GCP[  0]: Id=1, Info=
          (0,0) -> (0,0,0)

Now perhaps GDAL could inform that ?FIN? and ?fin? are not valid double values, but on the other hand, I think that I have also some influence on the wrong behavior. But the issue with INF/inf seems to be fixed now by Even.

-Jukka Rahkonen-

L?hett?j?: Pierluigi Guasqui <guasqui at actgate.com>
L?hetetty: torstai 25. tammikuuta 2024 15.04
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] Bad values when reading GCPs from a VRT file with gdalinfo in GDAL 3.8.3

Jukka,

it is not documented but I expect GDAL to be consistent with itself. If I set GCP (0, 0, inf, inf, -inf) with GDAL I would expect to read the same values with GDAL.

Pierluigi

On Thu, Jan 25, 2024 at 1:24?PM Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

I guessed so. Is that your own invention or is it documented somewhere that undefined GCPs should be marked that way by using INF? I ask because if it is something that should be reliable then I may have use for that feature in the future.

Problem may be limited to vrt. This test seems to pass
gdal_translate -gcp 0 0 inf inf test.tif inftest.tif

gdalinfo inftest.tif
?
GCP[  0]: Id=1, Info=
          (0,0) -> (inf,inf,0)

-Jukka Rahkonen-

L?hett?j?: Pierluigi Guasqui <guasqui at actgate.com<mailto:guasqui at actgate.com>>
L?hetetty: torstai 25. tammikuuta 2024 14.16
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Aihe: Re: [gdal-dev] Bad values when reading GCPs from a VRT file with gdalinfo in GDAL 3.8.3

Hello Jukka,

in general using infinite values is to mark undefined or invalid GCPs.

Pierluigi

On Thu, Jan 25, 2024 at 12:44?PM Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

Out of curiosity, what is the purpose of using inf or -inf as values? Is it to use them as placeholders telling that you do not know yet what the georeferenced coordinates of the ground control points are?

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Pierluigi Guasqui via gdal-dev
L?hetetty: torstai 25. tammikuuta 2024 13.34
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Bad values when reading GCPs from a VRT file with gdalinfo in GDAL 3.8.3

Dear GDAL team,

I am using GDAL version 3.8.3 and I am trying to extract GCPs values with gdalinfo tool from a VRT file (attached).

As you can see by looking at the VRT file with a text editor GCP XYZ values are infinite values. When I read GCPs from the attached VRT file with gdalinfo (latest version GDAL v. 3.8.3) I am getting all zeros:

GCP[  0]: Id=0, Info=
          (0,0) -> (0,0,0)

Instead, if I use gdalinfo (GDAL v. 3.6.3) I am getting the correct values:

GCP[  0]: Id=0, Info=
          (0,0) -> (inf,inf,-inf)

Is this a bug with GDAL 3.8.3?

Thank you for your help!

--
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com<http://www.actgate.com/>


--
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com<http://www.actgate.com/>


--
Pierluigi Guasqui
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com<http://www.actgate.com/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/f2298a00/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Jan 25 05:52:53 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jan 2024 14:52:53 +0100
Subject: [gdal-dev] Bad values when reading GCPs from a VRT file with
 gdalinfo in GDAL 3.8.3
In-Reply-To: <DB9PR09MB6887A5127AD258884E4C7B32FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <CAJNYLRLgO10D25ndDVXydD=+tgoPOAR14Djs4BENi78Zocbecg@mail.gmail.com>
 <DB9PR09MB6887F4A70FE48F088DF411A6FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAJNYLRL-436jZxEChXgxyQMgwGPvDKqnKrFpuXOE56PpWfcOdA@mail.gmail.com>
 <DB9PR09MB68876CB5DE7DF3FC7C0253FBFD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <CAJNYLR++HjvwEkAANOCBTi5VHa0b-BOdMg1RE6G1+2OQk3+hSg@mail.gmail.com>
 <DB9PR09MB6887A5127AD258884E4C7B32FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <71854791-1eb3-4e29-854e-2c6163676a8d@spatialys.com>

> Now perhaps GDAL could inform that ?FIN? and ?fin? are not valid 
> double values, but on the other hand, I think that I have also some 
> influence on the wrong behavior.
>
Validation of values added in https://github.com/OSGeo/gdal/pull/9138

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/fd5274f9/attachment.htm>

From Marian.Hadri at rib-software.com  Thu Jan 25 05:57:45 2024
From: Marian.Hadri at rib-software.com (=?iso-8859-1?Q?Mari=E1n_Hadri?=)
Date: Thu, 25 Jan 2024 13:57:45 +0000
Subject: [gdal-dev] help
Message-ID: <VE1PR01MB61581F8AEF9EDACB46D9DF10AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>

Hi,

I'm trying to build the GDAL dll and lib files, so GDAL can be used for linker and includes in an other C++ project. We're needing to upgrade from GDAL 3.2.2 to 3.8.3. I try to create project file for VS 2019. In GDAL 3.2.2 was for that purpose used "generate_vcxproj.bat", which was in root directory. Now, this file is no there anymore. For that reason I try to do it with CMake program. But when I did it from cmd as " cmake -G "Visual Studio 16 2019" " or directly from Cmake, I got an error messages like this ...

CMake Error at C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:230 (message):
  Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR) (Required is at least version "6.0")

Call Stack (most recent call first):
  C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:600 (_FPHSA_FAILURE_MESSAGE)
  cmake/modules/packages/FindPROJ.cmake:57 (find_package_handle_standard_args)
  cmake/helpers/CheckDependentLibraries.cmake:378 (find_package)
  gdal.cmake:265 (include)
  CMakeLists.txt:246 (include)

>From my point of view, it seems, that this is most important "Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR)
(Required is at least version "6.0")". Where and how I have to set that ? If I put that as Environment variables in CMake program like
PROJ_INCLUDE_DIR = -IC:\OSGeo4W\include
PROJ_LIBRARY = C:\OSGeo4W\lib
it did not work.

Marian Hadri


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/9512d179/attachment.htm>

From kirk.waters at noaa.gov  Thu Jan 25 06:24:40 2024
From: kirk.waters at noaa.gov (Kirk Waters - NOAA Federal)
Date: Thu, 25 Jan 2024 09:24:40 -0500
Subject: [gdal-dev] false easting and northing units
Message-ID: <CADm=QrRrCDKREw+cKtjUb13zzd-EHjbtLZDz_5L6jVqYwaOeTA@mail.gmail.com>

Hi,
I've run across an odd issue with GeoTIFFS using custom projections written
by GDAL and their interpretation in ArcPro. The specific case is doing a
projection for Michigan State Plane North using U.S. survey feet. [insert
embarrassing tale of another US agency wanting to always use survey feet
regardless of state legislation or that the federal government has been
officially metric for a long time]. For a file that should land in the
Michigan upper peninsula, ArcPro puts it in New Zealand. It appears the
issue is that Arc is interpreting the false easting as meters instead of
survey feet. If I do a define projection in ArcPro and make a custom
projection, it lands in the right place.

I used an old listgeo from the geotiff library to look at the tags both in
the original file and a copy that had define projection applied to see what
was different. They looked essentially the same, including having the same
value for the false easting. However, the Arc version had an extra tag
(3059) that wasn't in the GDAL produced one. An internet search turned up this
13-year old GDAL issue <https://trac.osgeo.org/gdal/ticket/3901>. If I
understand it correctly, a bug in GDAL was found that always used meters
for the false easting and northing. In addition to fixing that, a tag
(3059) was added to indicate this was fixed so software could differentiate
broken GDAL output from new output. It looks like Arc is looking for this
tag and if it's not there, false easting is assumed to be meters.

A few questions, assuming I interpreted that issue correctly:
1) Why is gdal not adding that 3059 tag? (GDAL command used is below)
2) If it's only supposed to be relevant to GDAL written files, why is Arc
writing it?
3) How do I get GDAL to add the tag?

Command used in file creation:
gdal_translate -a_srs 'COMPD_CS[PROJCS["NAD83 / Michigan
North",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",47.08333333333334],PARAMETER["standard_parallel_2",45.48333333333333],PARAMETER["latitude_of_origin",44.78333333333333],PARAMETER["central_meridian",-87],PARAMETER["false_easting",26246666.6666667],PARAMETER["false_northing",0],UNIT["US
survey
foot",0.304800609601219],AXIS["X",EAST],AXIS["Y",NORTH]],VERTCRS["NAVD88
height (ftUS)",  VDATUM["North American Vertical Datum 1988"],
 CS[vertical,1],  AXIS["gravity-related height (H)",up],  LENGTHUNIT["US
survey foot",0.304800609601], ID["EPSG",6360]]]' -co TILED=YES -co
COMPRESS=DEFLATE -co PREDICTOR=3 -co BIGTIFF=IF_SAFER input.tif output.tif

Kirk Waters, PhD
NOAA Office for Coastal Management
Applied Sciences Program
coast.noaa.gov/digitalcoast
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/76e6397e/attachment-0001.htm>

From a.pau at creaf.uab.cat  Thu Jan 25 06:58:02 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 25 Jan 2024 14:58:02 +0000
Subject: [gdal-dev] help
In-Reply-To: <VE1PR01MB61581F8AEF9EDACB46D9DF10AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>
References: <VE1PR01MB61581F8AEF9EDACB46D9DF10AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>
Message-ID: <PAXPR07MB77757B8FCACCAEDEAA0CD04EA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi,.
I have in my windows environment variables (not in any other place) this one:

PROJ_LIB = C:\dev\vcpkg\vcpkg\buildtrees\proj\x64-windows-rel\data
Attached I send what is in this folder.

I think it could be the cause of the problem, but I'm not an expert.
Luck and tell us if I solve anything :)


De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Mari?n Hadri via gdal-dev
Enviado el: dijous, 25 de gener de 2024 14:58
Para: gdal-dev at lists.osgeo.org
Asunto: [gdal-dev] help

Hi,

I'm trying to build the GDAL dll and lib files, so GDAL can be used for linker and includes in an other C++ project. We're needing to upgrade from GDAL 3.2.2 to 3.8.3. I try to create project file for VS 2019. In GDAL 3.2.2 was for that purpose used "generate_vcxproj.bat", which was in root directory. Now, this file is no there anymore. For that reason I try to do it with CMake program. But when I did it from cmd as " cmake -G "Visual Studio 16 2019" " or directly from Cmake, I got an error messages like this ...

CMake Error at C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:230 (message):
  Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR) (Required is at least version "6.0")

Call Stack (most recent call first):
  C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:600 (_FPHSA_FAILURE_MESSAGE)
  cmake/modules/packages/FindPROJ.cmake:57 (find_package_handle_standard_args)
  cmake/helpers/CheckDependentLibraries.cmake:378 (find_package)
  gdal.cmake:265 (include)
  CMakeLists.txt:246 (include)

>From my point of view, it seems, that this is most important "Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR)
(Required is at least version "6.0")". Where and how I have to set that ? If I put that as Environment variables in CMake program like
PROJ_INCLUDE_DIR = -IC:\OSGeo4W\include
PROJ_LIBRARY = C:\OSGeo4W\lib
it did not work.

Marian Hadri



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/858d0630/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: env_var.png
Type: image/png
Size: 31891 bytes
Desc: env_var.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/858d0630/attachment-0001.png>

From a.pau at creaf.uab.cat  Thu Jan 25 07:00:22 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 25 Jan 2024 15:00:22 +0000
Subject: [gdal-dev] help
In-Reply-To: <PAXPR07MB77757B8FCACCAEDEAA0CD04EA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <VE1PR01MB61581F8AEF9EDACB46D9DF10AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>
 <PAXPR07MB77757B8FCACCAEDEAA0CD04EA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <PAXPR07MB7775F991F7ECCDF4FD2A3B04A27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>

I forgot to tell that I used vcpkg to install dependences
and I build the project with this line
cmake -B D:\GitHub-repository\GDAL\build -S . -DCMAKE_TOOLCHAIN_FILE=C:/dev/vcpkg/vcpkg/scripts/buildsystems/vcpkg.cmake

(from cmd in here: D:\GitHub-repository\GDAL)

and I compile the project it with this one:
cmake --build D:\GitHub-repository\GDAL\build

I hope being helpful

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org> En nombre de Abel Pau via gdal-dev
Enviado el: dijous, 25 de gener de 2024 15:58
Para: Mari?n Hadri <Marian.Hadri at rib-software.com>
CC: gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] help

Hi,.
I have in my windows environment variables (not in any other place) this one:

PROJ_LIB = C:\dev\vcpkg\vcpkg\buildtrees\proj\x64-windows-rel\data
Attached I send what is in this folder.

I think it could be the cause of the problem, but I'm not an expert.
Luck and tell us if I solve anything :)


De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Mari?n Hadri via gdal-dev
Enviado el: dijous, 25 de gener de 2024 14:58
Para: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: [gdal-dev] help

Hi,

I'm trying to build the GDAL dll and lib files, so GDAL can be used for linker and includes in an other C++ project. We're needing to upgrade from GDAL 3.2.2 to 3.8.3. I try to create project file for VS 2019. In GDAL 3.2.2 was for that purpose used "generate_vcxproj.bat", which was in root directory. Now, this file is no there anymore. For that reason I try to do it with CMake program. But when I did it from cmd as " cmake -G "Visual Studio 16 2019" " or directly from Cmake, I got an error messages like this ...

CMake Error at C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:230 (message):
  Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR) (Required is at least version "6.0")

Call Stack (most recent call first):
  C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:600 (_FPHSA_FAILURE_MESSAGE)
  cmake/modules/packages/FindPROJ.cmake:57 (find_package_handle_standard_args)
  cmake/helpers/CheckDependentLibraries.cmake:378 (find_package)
  gdal.cmake:265 (include)
  CMakeLists.txt:246 (include)

>From my point of view, it seems, that this is most important "Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR)
(Required is at least version "6.0")". Where and how I have to set that ? If I put that as Environment variables in CMake program like
PROJ_INCLUDE_DIR = -IC:\OSGeo4W\include
PROJ_LIBRARY = C:\OSGeo4W\lib
it did not work.

Marian Hadri



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/e06b6fdc/attachment.htm>

From even.rouault at spatialys.com  Thu Jan 25 07:17:58 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jan 2024 16:17:58 +0100
Subject: [gdal-dev] false easting and northing units
In-Reply-To: <CADm=QrRrCDKREw+cKtjUb13zzd-EHjbtLZDz_5L6jVqYwaOeTA@mail.gmail.com>
References: <CADm=QrRrCDKREw+cKtjUb13zzd-EHjbtLZDz_5L6jVqYwaOeTA@mail.gmail.com>
Message-ID: <df708021-cb93-4787-960c-a22aacea707e@spatialys.com>

Kirk,

this is a complicated story indeed... What changed since 
https://trac.osgeo.org/gdal/changeset/31405 is that OGC GeoTIFF 1.1 was 
published, which mostly fixes issues with vertical CRS, which your CRS 
uses. So by default GDAL 3.1 or later, when seeing a CompoundCRS write 
it as GeoTIFF 1.1, and this new GeoTIFF version was the opportunity to 
remove writing the ProjLinearUnitsInterpCorrectGeoKey=3059 hack, since 
using GeoTIFF 1.1 is a way to indicate that you're implementing 
correctly the standard.

If you force writing GeoTIFF 1.0 by adding -co GEOTIFF_VERSION=1.0, GDAL 
will write the?ProjLinearUnitsInterpCorrectGeoKey when needed, and 
listgeo will show the "Unknown-3059 (Short,1): Unknown-1" geotiff key.

To know if a Geotiff is 1.0 or 1.1 with listgeo , look at the 
Key_Revision in the 3rd line which will be 1.0 or 1.1

So I assume ArcPro doesn't specifically implement 1.1. Either they 
implement GeoTIFF themselves, or they use GDAL < 3.1 that hasn't GeoTIFF 
1.1 explicit support

Even

Le 25/01/2024 ? 15:24, Kirk Waters - NOAA Federal via gdal-dev a ?crit?:
> Hi,
> I've run across an odd issue with GeoTIFFS using custom projections 
> written by GDAL and their interpretation in ArcPro. The specific case 
> is doing a projection for Michigan State Plane North using U.S.?survey 
> feet. [insert embarrassing?tale of another US agency wanting to always 
> use survey?feet regardless of state legislation or that the federal 
> government has been officially?metric for a long time]. For a file 
> that should land in the Michigan upper peninsula, ArcPro puts it in 
> New Zealand. It appears the issue is that Arc is interpreting the 
> false easting as meters instead of survey feet. If I do a define 
> projection in ArcPro and make a custom projection, it lands in the 
> right place.
>
> I used an old listgeo from the geotiff library to look at the tags 
> both in the original file and a copy that had define projection 
> applied to see what was different. They looked essentially the same, 
> including having the same value for the false easting. However, the 
> Arc version had an extra tag (3059) that wasn't in the GDAL produced 
> one. An internet search turned up this 13-year old GDAL issue 
> <https://trac.osgeo.org/gdal/ticket/3901>. If I understand it 
> correctly, a bug in GDAL was found that always used meters for the 
> false easting and northing. In addition to fixing that, a tag (3059) 
> was added to indicate this was fixed so software could differentiate 
> broken GDAL output from new output. It looks like Arc is looking for 
> this tag and if it's?not there, false easting is assumed to be meters.
>
> A few questions, assuming I interpreted that issue correctly:
> 1) Why is gdal not adding that 3059 tag? (GDAL command used is below)
> 2) If it's only supposed to be relevant to GDAL written files, why is 
> Arc writing it?
> 3) How do I get GDAL to add the tag?
>
> Command used in file creation:
> gdal_translate -a_srs 'COMPD_CS[PROJCS["NAD83 / Michigan 
> North",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS 
> 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",47.08333333333334],PARAMETER["standard_parallel_2",45.48333333333333],PARAMETER["latitude_of_origin",44.78333333333333],PARAMETER["central_meridian",-87],PARAMETER["false_easting",26246666.6666667],PARAMETER["false_northing",0],UNIT["US 
> survey 
> foot",0.304800609601219],AXIS["X",EAST],AXIS["Y",NORTH]],VERTCRS["NAVD88 
> height (ftUS)", ?VDATUM["North American Vertical Datum 1988"], 
> ?CS[vertical,1], ?AXIS["gravity-related height (H)",up], 
> ?LENGTHUNIT["US survey foot",0.304800609601], ID["EPSG",6360]]]' -co 
> TILED=YES -co COMPRESS=DEFLATE -co PREDICTOR=3 -co BIGTIFF=IF_SAFER 
> input.tif output.tif
>
> Kirk Waters, PhD
> NOAA Office for Coastal Management
> Applied Sciences Program
> coast.noaa.gov/digitalcoast <http://coast.noaa.gov/digitalcoast>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/4f06effa/attachment-0001.htm>

From Marian.Hadri at rib-software.com  Thu Jan 25 07:18:49 2024
From: Marian.Hadri at rib-software.com (=?iso-8859-1?Q?Mari=E1n_Hadri?=)
Date: Thu, 25 Jan 2024 15:18:49 +0000
Subject: [gdal-dev] help
In-Reply-To: <PAXPR07MB7775F991F7ECCDF4FD2A3B04A27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <VE1PR01MB61581F8AEF9EDACB46D9DF10AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>
 <PAXPR07MB77757B8FCACCAEDEAA0CD04EA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <PAXPR07MB7775F991F7ECCDF4FD2A3B04A27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <48499498-3770-4078-90d7-69df32361922.a21746e6-f41a-4c75-8352-8c032b712c3f.1fc2a2cf-ab59-4da3-9d1a-dfc9d19b1341@emailsignatures365.codetwo.com>
Message-ID: <VE1PR01MB615872E1BC42FFE25278E058AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>

Hi,
no, it did not help. Btw. I downloaded GDAL 3.8.3  project from https://gdal.org/download.html to directory
C:\Dev\gdal-3.8.3 and PROJ project with use of OSGeo4W<https://trac.osgeo.org/osgeo4w/> software distribution to directory C:\OSGeo4W.
My include directory for PROJ is C:\OSGeo4W\include and lib directory is C:\OSGeo4W\lib.
I simply try to use CMake for creating project file for VS2019 with command "cmake -G "Visual Studio 16 2019"", but
I got these errors ...



Mari?n Hadri  Developer


E-Mail  Marian.Hadri at rib-software.com


Telefon  +49(711)7873-339


[cid:blue-line_d40935b2-037b-4887-8d74-19a11bd1363f.png]


RIB Software GmbH | Vaihinger Str. 151, 70567 Stuttgart, Germany

Sitz Stuttgart. Amtsgericht Stuttgart HRB 783426. Gesch?ftsf?hrer: Ren? Wolf, Tobias Hamacher.


<https://www.rib-software.com/news-termine/fachtage/bauwirtschaftstag-2023><https://www.rib-software.com/news-termine/messen-und-kongresse/messe-intergeo-2023>[cid:bannersignatur_c8faa565-c355-4095-afdd-b1abeba6cc25.jpg]<https://www.rib-software.com/home><https://www.rib-software.com/><https://www.rib-software.com/news-termine/messen-und-kongresse/messe-intergeo-2023><https://www.rib-software.com/news-termine/fachtage/bauwirtschaftstag-2023>


<https://www.rib-software.com/>RIB Webseite<https://www.rib-software.com/home> | <https://www.linkedin.com/company/rib-software> LinkedIn Profil<https://www.linkedin.com/company/rib-software>


Bitte denken Sie an die Umwelt, bevor Sie diese E-Mail ausdrucken.

DISCLAMER: Der Inhalt dieser E-Mail ist vertraulich. Falls Sie nicht der angegebene Empf?nger sind oder falls diese E-Mail irrt?mlich an Sie adressiert wurde, verst?ndigen Sie bitte umgehend den Absender. Danach l?schen Sie bitte diese E-Mail. Das unerlaubte Benutzen, Kopieren sowie die unbefugte ?bermittlung sind nicht gestattet. RIB nimmt den Datenschutz sehr ernst. Mehr zu unseren Datenschutzgrunds?tzen finden Sie hier: https://www.rib-software.com/group/datenschutzerklaerung/



Von: Abel Pau <a.pau at creaf.uab.cat>
Gesendet: Thursday, January 25, 2024 16:00
An: Mari?n Hadri <Marian.Hadri at rib-software.com>
Cc: gdal-dev at lists.osgeo.org
Betreff: RE: help


[External email: Use caution with links and attachments]

________________________________


I forgot to tell that I used vcpkg to install dependences
and I build the project with this line
cmake -B D:\GitHub-repository\GDAL\build -S . -DCMAKE_TOOLCHAIN_FILE=C:/dev/vcpkg/vcpkg/scripts/buildsystems/vcpkg.cmake

(from cmd in here: D:\GitHub-repository\GDAL)

and I compile the project it with this one:
cmake --build D:\GitHub-repository\GDAL\build

I hope being helpful

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Abel Pau via gdal-dev
Enviado el: dijous, 25 de gener de 2024 15:58
Para: Mari?n Hadri <Marian.Hadri at rib-software.com<mailto:Marian.Hadri at rib-software.com>>
CC: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] help

Hi,.
I have in my windows environment variables (not in any other place) this one:

PROJ_LIB = C:\dev\vcpkg\vcpkg\buildtrees\proj\x64-windows-rel\data
Attached I send what is in this folder.

I think it could be the cause of the problem, but I'm not an expert.
Luck and tell us if I solve anything :)


De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Mari?n Hadri via gdal-dev
Enviado el: dijous, 25 de gener de 2024 14:58
Para: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: [gdal-dev] help

Hi,

I'm trying to build the GDAL dll and lib files, so GDAL can be used for linker and includes in an other C++ project. We're needing to upgrade from GDAL 3.2.2 to 3.8.3. I try to create project file for VS 2019. In GDAL 3.2.2 was for that purpose used "generate_vcxproj.bat", which was in root directory. Now, this file is no there anymore. For that reason I try to do it with CMake program. But when I did it from cmd as " cmake -G "Visual Studio 16 2019" " or directly from Cmake, I got an error messages like this ...

CMake Error at C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:230 (message):
  Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR) (Required is at least version "6.0")

Call Stack (most recent call first):
  C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:600 (_FPHSA_FAILURE_MESSAGE)
  cmake/modules/packages/FindPROJ.cmake:57 (find_package_handle_standard_args)
  cmake/helpers/CheckDependentLibraries.cmake:378 (find_package)
  gdal.cmake:265 (include)
  CMakeLists.txt:246 (include)

>From my point of view, it seems, that this is most important "Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR)
(Required is at least version "6.0")". Where and how I have to set that ? If I put that as Environment variables in CMake program like
PROJ_INCLUDE_DIR = -IC:\OSGeo4W\include
PROJ_LIBRARY = C:\OSGeo4W\lib
it did not work.

Marian Hadri



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b9415d52/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: blue-line_d40935b2-037b-4887-8d74-19a11bd1363f.png
Type: image/png
Size: 137 bytes
Desc: blue-line_d40935b2-037b-4887-8d74-19a11bd1363f.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b9415d52/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bannersignatur_c8faa565-c355-4095-afdd-b1abeba6cc25.jpg
Type: image/jpeg
Size: 23283 bytes
Desc: bannersignatur_c8faa565-c355-4095-afdd-b1abeba6cc25.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b9415d52/attachment-0001.jpg>

From a.pau at creaf.uab.cat  Thu Jan 25 07:20:50 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 25 Jan 2024 15:20:50 +0000
Subject: [gdal-dev] help
In-Reply-To: <VE1PR01MB615872E1BC42FFE25278E058AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>
References: <VE1PR01MB61581F8AEF9EDACB46D9DF10AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>
 <PAXPR07MB77757B8FCACCAEDEAA0CD04EA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <PAXPR07MB7775F991F7ECCDF4FD2A3B04A27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <48499498-3770-4078-90d7-69df32361922.a21746e6-f41a-4c75-8352-8c032b712c3f.1fc2a2cf-ab59-4da3-9d1a-dfc9d19b1341@emailsignatures365.codetwo.com>
 <VE1PR01MB615872E1BC42FFE25278E058AE7A2@VE1PR01MB6158.eurprd01.prod.exchangelabs.com>
Message-ID: <PAXPR07MB7775A3746F3880ECEC57743DA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>

Oh, sorry :(
Some time ago I tried with OSGeo4W<https://trac.osgeo.org/osgeo4w/> but finally I used vcpkg and it worked.
If anybody can give you the solution you can try that one.
Sorry again

De: Mari?n Hadri <Marian.Hadri at rib-software.com>
Enviado el: dijous, 25 de gener de 2024 16:19
Para: Abel Pau <a.pau at creaf.uab.cat>
CC: gdal-dev at lists.osgeo.org
Asunto: AW: help

Hi,
no, it did not help. Btw. I downloaded GDAL 3.8.3  project from https://gdal.org/download.html to directory
C:\Dev\gdal-3.8.3 and PROJ project with use of OSGeo4W<https://trac.osgeo.org/osgeo4w/> software distribution to directory C:\OSGeo4W.
My include directory for PROJ is C:\OSGeo4W\include and lib directory is C:\OSGeo4W\lib.
I simply try to use CMake for creating project file for VS2019 with command "cmake -G "Visual Studio 16 2019"", but
I got these errors ...



Mari?n Hadri  Developer

E-Mail  Marian.Hadri at rib-software.com<mailto:Marian.Hadri at rib-software.com>

Telefon  +49(711)7873-339



RIB Software GmbH | Vaihinger Str. 151, 70567 Stuttgart, Germany

Sitz Stuttgart. Amtsgericht Stuttgart HRB 783426. Gesch?ftsf?hrer: Ren? Wolf, Tobias Hamacher.

[Banner Signatur.jpg]<https://www.rib-software.com/home>

RIB Webseite<https://www.rib-software.com/home> | LinkedIn Profil<https://www.linkedin.com/company/rib-software>
Bitte denken Sie an die Umwelt, bevor Sie diese E-Mail ausdrucken.

DISCLAMER: Der Inhalt dieser E-Mail ist vertraulich. Falls Sie nicht der angegebene Empf?nger sind oder falls diese E-Mail irrt?mlich an Sie adressiert wurde, verst?ndigen Sie bitte umgehend den Absender. Danach l?schen Sie bitte diese E-Mail. Das unerlaubte Benutzen, Kopieren sowie die unbefugte ?bermittlung sind nicht gestattet. RIB nimmt den Datenschutz sehr ernst. Mehr zu unseren Datenschutzgrunds?tzen finden Sie hier: https://www.rib-software.com/group/datenschutzerklaerung/


Von: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>
Gesendet: Thursday, January 25, 2024 16:00
An: Mari?n Hadri <Marian.Hadri at rib-software.com<mailto:Marian.Hadri at rib-software.com>>
Cc: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Betreff: RE: help


[External email: Use caution with links and attachments]

________________________________


I forgot to tell that I used vcpkg to install dependences
and I build the project with this line
cmake -B D:\GitHub-repository\GDAL\build -S . -DCMAKE_TOOLCHAIN_FILE=C:/dev/vcpkg/vcpkg/scripts/buildsystems/vcpkg.cmake

(from cmd in here: D:\GitHub-repository\GDAL)

and I compile the project it with this one:
cmake --build D:\GitHub-repository\GDAL\build

I hope being helpful

De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Abel Pau via gdal-dev
Enviado el: dijous, 25 de gener de 2024 15:58
Para: Mari?n Hadri <Marian.Hadri at rib-software.com<mailto:Marian.Hadri at rib-software.com>>
CC: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: [gdal-dev] help

Hi,.
I have in my windows environment variables (not in any other place) this one:

PROJ_LIB = C:\dev\vcpkg\vcpkg\buildtrees\proj\x64-windows-rel\data
Attached I send what is in this folder.

I think it could be the cause of the problem, but I'm not an expert.
Luck and tell us if I solve anything :)


De: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> En nombre de Mari?n Hadri via gdal-dev
Enviado el: dijous, 25 de gener de 2024 14:58
Para: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: [gdal-dev] help

Hi,

I'm trying to build the GDAL dll and lib files, so GDAL can be used for linker and includes in an other C++ project. We're needing to upgrade from GDAL 3.2.2 to 3.8.3. I try to create project file for VS 2019. In GDAL 3.2.2 was for that purpose used "generate_vcxproj.bat", which was in root directory. Now, this file is no there anymore. For that reason I try to do it with CMake program. But when I did it from cmd as " cmake -G "Visual Studio 16 2019" " or directly from Cmake, I got an error messages like this ...

CMake Error at C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:230 (message):
  Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR) (Required is at least version "6.0")

Call Stack (most recent call first):
  C:/Program Files/CMake/share/cmake-3.28/Modules/FindPackageHandleStandardArgs.cmake:600 (_FPHSA_FAILURE_MESSAGE)
  cmake/modules/packages/FindPROJ.cmake:57 (find_package_handle_standard_args)
  cmake/helpers/CheckDependentLibraries.cmake:378 (find_package)
  gdal.cmake:265 (include)
  CMakeLists.txt:246 (include)

>From my point of view, it seems, that this is most important "Could NOT find PROJ (missing: PROJ_LIBRARY PROJ_INCLUDE_DIR)
(Required is at least version "6.0")". Where and how I have to set that ? If I put that as Environment variables in CMake program like
PROJ_INCLUDE_DIR = -IC:\OSGeo4W\include
PROJ_LIBRARY = C:\OSGeo4W\lib
it did not work.

Marian Hadri



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/bc1be7a9/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 137 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/bc1be7a9/attachment-0001.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 23283 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/bc1be7a9/attachment-0001.jpg>

From even.rouault at spatialys.com  Thu Jan 25 07:47:28 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jan 2024 16:47:28 +0100
Subject: [gdal-dev] false easting and northing units
In-Reply-To: <df708021-cb93-4787-960c-a22aacea707e@spatialys.com>
References: <CADm=QrRrCDKREw+cKtjUb13zzd-EHjbtLZDz_5L6jVqYwaOeTA@mail.gmail.com>
 <df708021-cb93-4787-960c-a22aacea707e@spatialys.com>
Message-ID: <31c25246-cf83-4a16-9c5a-022fa0a52ffb@spatialys.com>

Kirk,

perhaps you could try using -a_srs EPSG:26988+6360 instead of a full 
WKT. That way GDAL will *not* write the projected parameter definitions, 
but just reference the horizontal and vertical CRS codes:

Geotiff_Information:
 ?? Version: 1
 ?? Key_Revision: 1.1
 ?? Tagged_Information:
 ????? ModelTiepointTag (2,3):
 ???????? 0???????????????? 0???????????????? 0
 ???????? 440720??????????? 3751320?????????? 0
 ????? ModelPixelScaleTag (1,3):
 ???????? 60??????????????? 60??????????????? 1
 ????? End_Of_Tags.
 ?? Keyed_Information:
 ????? GTModelTypeGeoKey (Short,1): ModelTypeProjected
 ????? GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
 ????? GTCitationGeoKey (Ascii,46): "NAD83 / Michigan North + NAVD88 
height (ftUS)"
 ????? ProjectedCSTypeGeoKey (Short,1): PCS_NAD83_Michigan_North
 ????? VerticalCSTypeGeoKey (Short,1): Code-6360 (NAVD88 height (ftUS))
 ????? End_Of_Keys.
 ?? End_Of_Geotiff.

Even

Le 25/01/2024 ? 16:17, Even Rouault via gdal-dev a ?crit?:
>
> Kirk,
>
> this is a complicated story indeed... What changed since 
> https://trac.osgeo.org/gdal/changeset/31405 is that OGC GeoTIFF 1.1 
> was published, which mostly fixes issues with vertical CRS, which your 
> CRS uses. So by default GDAL 3.1 or later, when seeing a CompoundCRS 
> write it as GeoTIFF 1.1, and this new GeoTIFF version was the 
> opportunity to remove writing the 
> ProjLinearUnitsInterpCorrectGeoKey=3059 hack, since using GeoTIFF 1.1 
> is a way to indicate that you're implementing correctly the standard.
>
> If you force writing GeoTIFF 1.0 by adding -co GEOTIFF_VERSION=1.0, 
> GDAL will write the?ProjLinearUnitsInterpCorrectGeoKey when needed, 
> and listgeo will show the "Unknown-3059 (Short,1): Unknown-1" geotiff key.
>
> To know if a Geotiff is 1.0 or 1.1 with listgeo , look at the 
> Key_Revision in the 3rd line which will be 1.0 or 1.1
>
> So I assume ArcPro doesn't specifically implement 1.1. Either they 
> implement GeoTIFF themselves, or they use GDAL < 3.1 that hasn't 
> GeoTIFF 1.1 explicit support
>
> Even
>
> Le 25/01/2024 ? 15:24, Kirk Waters - NOAA Federal via gdal-dev a ?crit?:
>> Hi,
>> I've run across an odd issue with GeoTIFFS using custom projections 
>> written by GDAL and their interpretation in ArcPro. The specific case 
>> is doing a projection for Michigan State Plane North using 
>> U.S.?survey feet. [insert embarrassing?tale of another US agency 
>> wanting to always use survey?feet regardless of state legislation or 
>> that the federal government has been officially?metric for a long 
>> time]. For a file that should land in the Michigan upper peninsula, 
>> ArcPro puts it in New Zealand. It appears the issue is that Arc is 
>> interpreting the false easting as meters instead of survey feet. If I 
>> do a define projection in ArcPro and make a custom projection, it 
>> lands in the right place.
>>
>> I used an old listgeo from the geotiff library to look at the tags 
>> both in the original file and a copy that had define projection 
>> applied to see what was different. They looked essentially the same, 
>> including having the same value for the false easting. However, the 
>> Arc version had an extra tag (3059) that wasn't in the GDAL produced 
>> one. An internet search turned up this 13-year old GDAL issue 
>> <https://trac.osgeo.org/gdal/ticket/3901>. If I understand it 
>> correctly, a bug in GDAL was found that always used meters for the 
>> false easting and northing. In addition to fixing that, a tag (3059) 
>> was added to indicate this was fixed so software could differentiate 
>> broken GDAL output from new output. It looks like Arc is looking for 
>> this tag and if it's?not there, false easting is assumed to be meters.
>>
>> A few questions, assuming I interpreted that issue correctly:
>> 1) Why is gdal not adding that 3059 tag? (GDAL command used is below)
>> 2) If it's only supposed to be relevant to GDAL written files, why is 
>> Arc writing it?
>> 3) How do I get GDAL to add the tag?
>>
>> Command used in file creation:
>> gdal_translate -a_srs 'COMPD_CS[PROJCS["NAD83 / Michigan 
>> North",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS 
>> 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",47.08333333333334],PARAMETER["standard_parallel_2",45.48333333333333],PARAMETER["latitude_of_origin",44.78333333333333],PARAMETER["central_meridian",-87],PARAMETER["false_easting",26246666.6666667],PARAMETER["false_northing",0],UNIT["US 
>> survey 
>> foot",0.304800609601219],AXIS["X",EAST],AXIS["Y",NORTH]],VERTCRS["NAVD88 
>> height (ftUS)", ?VDATUM["North American Vertical Datum 1988"], 
>> ?CS[vertical,1], ?AXIS["gravity-related height (H)",up], 
>> ?LENGTHUNIT["US survey foot",0.304800609601], ID["EPSG",6360]]]' -co 
>> TILED=YES -co COMPRESS=DEFLATE -co PREDICTOR=3 -co BIGTIFF=IF_SAFER 
>> input.tif output.tif
>>
>> Kirk Waters, PhD
>> NOAA Office for Coastal Management
>> Applied Sciences Program
>> coast.noaa.gov/digitalcoast <http://coast.noaa.gov/digitalcoast>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/1c5ee8d8/attachment.htm>

From kirk.waters at noaa.gov  Thu Jan 25 08:08:10 2024
From: kirk.waters at noaa.gov (Kirk Waters - NOAA Federal)
Date: Thu, 25 Jan 2024 11:08:10 -0500
Subject: [gdal-dev] false easting and northing units
In-Reply-To: <31c25246-cf83-4a16-9c5a-022fa0a52ffb@spatialys.com>
References: <CADm=QrRrCDKREw+cKtjUb13zzd-EHjbtLZDz_5L6jVqYwaOeTA@mail.gmail.com>
 <df708021-cb93-4787-960c-a22aacea707e@spatialys.com>
 <31c25246-cf83-4a16-9c5a-022fa0a52ffb@spatialys.com>
Message-ID: <CADm=QrQ7UVL2ez-Geeb9nK-HHcbF6dG2oADsupLM6==BbfP+Eg@mail.gmail.com>

Even,
Thanks for the explanation and tips. I'm not clear on how setting to 26988
(Michigan North meters) would help. If I do a gdal_translate with that, it
shows as being in New Zealand, just as Arc had done. It would certainly
make lots more sense to actually put the data in a standard projection that
has an EPSG code (meters or international feet), but that gets back to the
embarrassing tale. It may well be that I'll have to force GeoTiff 1.0. I
think there are other software packages that haven't caught up. Even when
they do catch up, I've come across people running 15 year old CAD software
and complaining about the DXF version GDAL produces.

Thanks to the whole team for the work you do to maintain GDAL.

Kirk


On Thu, Jan 25, 2024 at 10:47?AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Kirk,
>
> perhaps you could try using -a_srs EPSG:26988+6360 instead of a full WKT.
> That way GDAL will *not* write the projected parameter definitions, but
> just reference the horizontal and vertical CRS codes:
>
> Geotiff_Information:
>    Version: 1
>    Key_Revision: 1.1
>    Tagged_Information:
>       ModelTiepointTag (2,3):
>          0                 0                 0
>          440720            3751320           0
>       ModelPixelScaleTag (1,3):
>          60                60                1
>       End_Of_Tags.
>    Keyed_Information:
>       GTModelTypeGeoKey (Short,1): ModelTypeProjected
>       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
>       GTCitationGeoKey (Ascii,46): "NAD83 / Michigan North + NAVD88 height
> (ftUS)"
>       ProjectedCSTypeGeoKey (Short,1): PCS_NAD83_Michigan_North
>       VerticalCSTypeGeoKey (Short,1): Code-6360 (NAVD88 height (ftUS))
>       End_Of_Keys.
>    End_Of_Geotiff.
>
> Even
> Le 25/01/2024 ? 16:17, Even Rouault via gdal-dev a ?crit :
>
> Kirk,
>
> this is a complicated story indeed... What changed since
> https://trac.osgeo.org/gdal/changeset/31405 is that OGC GeoTIFF 1.1 was
> published, which mostly fixes issues with vertical CRS, which your CRS
> uses. So by default GDAL 3.1 or later, when seeing a CompoundCRS write it
> as GeoTIFF 1.1, and this new GeoTIFF version was the opportunity to remove
> writing the ProjLinearUnitsInterpCorrectGeoKey=3059 hack, since using
> GeoTIFF 1.1 is a way to indicate that you're implementing correctly the
> standard.
>
> If you force writing GeoTIFF 1.0 by adding -co GEOTIFF_VERSION=1.0, GDAL
> will write the ProjLinearUnitsInterpCorrectGeoKey when needed, and listgeo
> will show the "Unknown-3059 (Short,1): Unknown-1" geotiff key.
>
> To know if a Geotiff is 1.0 or 1.1 with listgeo , look at the Key_Revision
> in the 3rd line which will be 1.0 or 1.1
>
> So I assume ArcPro doesn't specifically implement 1.1. Either they
> implement GeoTIFF themselves, or they use GDAL < 3.1 that hasn't GeoTIFF
> 1.1 explicit support
>
> Even
> Le 25/01/2024 ? 15:24, Kirk Waters - NOAA Federal via gdal-dev a ?crit :
>
> Hi,
> I've run across an odd issue with GeoTIFFS using custom projections
> written by GDAL and their interpretation in ArcPro. The specific case is
> doing a projection for Michigan State Plane North using U.S. survey feet.
> [insert embarrassing tale of another US agency wanting to always use
> survey feet regardless of state legislation or that the federal government
> has been officially metric for a long time]. For a file that should land in
> the Michigan upper peninsula, ArcPro puts it in New Zealand. It appears the
> issue is that Arc is interpreting the false easting as meters instead of
> survey feet. If I do a define projection in ArcPro and make a custom
> projection, it lands in the right place.
>
> I used an old listgeo from the geotiff library to look at the tags both in
> the original file and a copy that had define projection applied to see what
> was different. They looked essentially the same, including having the same
> value for the false easting. However, the Arc version had an extra tag
> (3059) that wasn't in the GDAL produced one. An internet search turned up this
> 13-year old GDAL issue <https://trac.osgeo.org/gdal/ticket/3901>. If I
> understand it correctly, a bug in GDAL was found that always used meters
> for the false easting and northing. In addition to fixing that, a tag
> (3059) was added to indicate this was fixed so software could differentiate
> broken GDAL output from new output. It looks like Arc is looking for this
> tag and if it's not there, false easting is assumed to be meters.
>
> A few questions, assuming I interpreted that issue correctly:
> 1) Why is gdal not adding that 3059 tag? (GDAL command used is below)
> 2) If it's only supposed to be relevant to GDAL written files, why is Arc
> writing it?
> 3) How do I get GDAL to add the tag?
>
> Command used in file creation:
> gdal_translate -a_srs 'COMPD_CS[PROJCS["NAD83 / Michigan
> North",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
> 1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",47.08333333333334],PARAMETER["standard_parallel_2",45.48333333333333],PARAMETER["latitude_of_origin",44.78333333333333],PARAMETER["central_meridian",-87],PARAMETER["false_easting",26246666.6666667],PARAMETER["false_northing",0],UNIT["US
> survey
> foot",0.304800609601219],AXIS["X",EAST],AXIS["Y",NORTH]],VERTCRS["NAVD88
> height (ftUS)",  VDATUM["North American Vertical Datum 1988"],
>  CS[vertical,1],  AXIS["gravity-related height (H)",up],  LENGTHUNIT["US
> survey foot",0.304800609601], ID["EPSG",6360]]]' -co TILED=YES -co
> COMPRESS=DEFLATE -co PREDICTOR=3 -co BIGTIFF=IF_SAFER input.tif output.tif
>
> Kirk Waters, PhD
> NOAA Office for Coastal Management
> Applied Sciences Program
> coast.noaa.gov/digitalcoast
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/1fe23b04/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Jan 25 08:18:14 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jan 2024 17:18:14 +0100
Subject: [gdal-dev] false easting and northing units
In-Reply-To: <CADm=QrQ7UVL2ez-Geeb9nK-HHcbF6dG2oADsupLM6==BbfP+Eg@mail.gmail.com>
References: <CADm=QrRrCDKREw+cKtjUb13zzd-EHjbtLZDz_5L6jVqYwaOeTA@mail.gmail.com>
 <df708021-cb93-4787-960c-a22aacea707e@spatialys.com>
 <31c25246-cf83-4a16-9c5a-022fa0a52ffb@spatialys.com>
 <CADm=QrQ7UVL2ez-Geeb9nK-HHcbF6dG2oADsupLM6==BbfP+Eg@mail.gmail.com>
Message-ID: <e0eaf9ec-bf2e-4914-a655-665bcbaac7d0@spatialys.com>


Le 25/01/2024 ? 17:08, Kirk Waters - NOAA Federal a ?crit?:
> Even,
> Thanks for the explanation and tips. I'm not clear on how setting to 
> 26988 (Michigan North meters) would help.
Hopefully forcing 1.0 will fix the issue.

ah, I didn't realize that the "NAD83 / Michigan North" in your WKT was 
*not* official EPSG:26988. I'd strongly suggest you modify your WKT to 
use "NAD83 / Michigan North (ftuS)" instead to avoid any confusion!

Actually your WKT is a bit weird as it lacks the name of the CompoundCRS 
(quite surprise that PROJ manages to parse it) before the PROJCS[]. Try 
the following instead

COMPD_CS["NAD83 / Michigan North (ftUS) + NAVD88 height 
(ftUS)",PROJCS["NAD83 / Michigan North 
(ftUS)",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS 
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",47.0833333333333],PARAMETER["standard_parallel_2",45.4833333333333],PARAMETER["latitude_of_origin",44.7833333333333],PARAMETER["central_meridian",-87],PARAMETER["false_easting",26246666.6666667],PARAMETER["false_northing",0],UNIT["US 
survey 
foot",0.304800609601219],AXIS["X",EAST],AXIS["Y",NORTH]],VERT_CS["NAVD88 
height (ftUS)",VERT_DATUM["North American Vertical Datum 
1988",2005],UNIT["US survey 
foot",0.304800609601219],AXIS["Gravity-related 
height",UP],AUTHORITY["EPSG","6360"]]]

By itself, that will not improve the interoperability, but at least 
things will be better labelled, with a GTCitationGeoKey (Ascii,53): 
"NAD83 / Michigan North (ftUS) + NAVD88 height (ftUS)"

Even


> If I do a gdal_translate with that, it shows as being in New Zealand, 
> just as Arc had done. It would certainly make lots more sense to 
> actually?put the data in a standard projection that has an EPSG code 
> (meters or international feet), but that gets back to the embarrassing 
> tale. It may well be that I'll have to force GeoTiff 1.0. I think 
> there are other software packages that haven't caught up. Even when 
> they do catch up, I've come across people running 15 year old CAD 
> software and complaining about the DXF version GDAL produces.
>
> Thanks to the whole team for the work you do to maintain GDAL.
>
> Kirk
>
>
> On Thu, Jan 25, 2024 at 10:47?AM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>     Kirk,
>
>     perhaps you could try using -a_srs EPSG:26988+6360 instead of a
>     full WKT. That way GDAL will *not* write the projected parameter
>     definitions, but just reference the horizontal and vertical CRS codes:
>
>     Geotiff_Information:
>     ?? Version: 1
>     ?? Key_Revision: 1.1
>     ?? Tagged_Information:
>     ????? ModelTiepointTag (2,3):
>     ???????? 0???????????????? 0 0
>     ???????? 440720??????????? 3751320 0
>     ????? ModelPixelScaleTag (1,3):
>     ???????? 60??????????????? 60 1
>     ????? End_Of_Tags.
>     ?? Keyed_Information:
>     ????? GTModelTypeGeoKey (Short,1): ModelTypeProjected
>     ????? GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
>     ????? GTCitationGeoKey (Ascii,46): "NAD83 / Michigan North +
>     NAVD88 height (ftUS)"
>     ????? ProjectedCSTypeGeoKey (Short,1): PCS_NAD83_Michigan_North
>     ????? VerticalCSTypeGeoKey (Short,1): Code-6360 (NAVD88 height (ftUS))
>     ????? End_Of_Keys.
>     ?? End_Of_Geotiff.
>
>     Even
>
>     Le 25/01/2024 ? 16:17, Even Rouault via gdal-dev a ?crit?:
>>
>>     Kirk,
>>
>>     this is a complicated story indeed... What changed since
>>     https://trac.osgeo.org/gdal/changeset/31405 is that OGC GeoTIFF
>>     1.1 was published, which mostly fixes issues with vertical CRS,
>>     which your CRS uses. So by default GDAL 3.1 or later, when seeing
>>     a CompoundCRS write it as GeoTIFF 1.1, and this new GeoTIFF
>>     version was the opportunity to remove writing the
>>     ProjLinearUnitsInterpCorrectGeoKey=3059 hack, since using GeoTIFF
>>     1.1 is a way to indicate that you're implementing correctly the
>>     standard.
>>
>>     If you force writing GeoTIFF 1.0 by adding -co
>>     GEOTIFF_VERSION=1.0, GDAL will write
>>     the?ProjLinearUnitsInterpCorrectGeoKey when needed, and listgeo
>>     will show the "Unknown-3059 (Short,1): Unknown-1" geotiff key.
>>
>>     To know if a Geotiff is 1.0 or 1.1 with listgeo , look at the
>>     Key_Revision in the 3rd line which will be 1.0 or 1.1
>>
>>     So I assume ArcPro doesn't specifically implement 1.1. Either
>>     they implement GeoTIFF themselves, or they use GDAL < 3.1 that
>>     hasn't GeoTIFF 1.1 explicit support
>>
>>     Even
>>
>>     Le 25/01/2024 ? 15:24, Kirk Waters - NOAA Federal via gdal-dev a
>>     ?crit?:
>>>     Hi,
>>>     I've run across an odd issue with GeoTIFFS using custom
>>>     projections written by GDAL and their interpretation in ArcPro.
>>>     The specific case is doing a projection for Michigan State Plane
>>>     North using U.S.?survey feet. [insert embarrassing?tale of
>>>     another US agency wanting to always use survey?feet regardless
>>>     of state legislation or that the federal government has been
>>>     officially?metric for a long time]. For a file that should land
>>>     in the Michigan upper peninsula, ArcPro puts it in New Zealand.
>>>     It appears the issue is that Arc is interpreting the false
>>>     easting as meters instead of survey feet. If I do a define
>>>     projection in ArcPro and make a custom projection, it lands in
>>>     the right place.
>>>
>>>     I used an old listgeo from the geotiff library to look at the
>>>     tags both in the original file and a copy that had define
>>>     projection applied to see what was different. They looked
>>>     essentially the same, including having the same value for the
>>>     false easting. However, the Arc version had an extra tag (3059)
>>>     that wasn't in the GDAL produced one. An internet search turned
>>>     up this 13-year old GDAL issue
>>>     <https://trac.osgeo.org/gdal/ticket/3901>. If I understand it
>>>     correctly, a bug in GDAL was found that always used meters for
>>>     the false easting and northing. In addition to fixing that, a
>>>     tag (3059) was added to indicate this was fixed so software
>>>     could differentiate broken GDAL output from new output. It looks
>>>     like Arc is looking for this tag and if it's?not there, false
>>>     easting is assumed to be meters.
>>>
>>>     A few questions, assuming I interpreted that issue correctly:
>>>     1) Why is gdal not adding that 3059 tag? (GDAL command used is
>>>     below)
>>>     2) If it's only supposed to be relevant to GDAL written files,
>>>     why is Arc writing it?
>>>     3) How do I get GDAL to add the tag?
>>>
>>>     Command used in file creation:
>>>     gdal_translate -a_srs 'COMPD_CS[PROJCS["NAD83 / Michigan
>>>     North",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
>>>     1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",47.08333333333334],PARAMETER["standard_parallel_2",45.48333333333333],PARAMETER["latitude_of_origin",44.78333333333333],PARAMETER["central_meridian",-87],PARAMETER["false_easting",26246666.6666667],PARAMETER["false_northing",0],UNIT["US
>>>     survey
>>>     foot",0.304800609601219],AXIS["X",EAST],AXIS["Y",NORTH]],VERTCRS["NAVD88
>>>     height (ftUS)", ?VDATUM["North American Vertical Datum 1988"],
>>>     ?CS[vertical,1], ?AXIS["gravity-related height (H)",up],
>>>     ?LENGTHUNIT["US survey foot",0.304800609601], ID["EPSG",6360]]]'
>>>     -co TILED=YES -co COMPRESS=DEFLATE -co PREDICTOR=3 -co
>>>     BIGTIFF=IF_SAFER input.tif output.tif
>>>
>>>     Kirk Waters, PhD
>>>     NOAA Office for Coastal Management
>>>     Applied Sciences Program
>>>     coast.noaa.gov/digitalcoast <http://coast.noaa.gov/digitalcoast>
>>>
>>>
>>>
>>>     _______________________________________________
>>>     gdal-dev mailing list
>>>     gdal-dev at lists.osgeo.org
>>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     -- 
>>     http://www.spatialys.com
>>     My software is free, but my time generally not.
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org
>>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b548e45d/attachment.htm>

From a.pau at creaf.uab.cat  Thu Jan 25 09:07:03 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Thu, 25 Jan 2024 17:07:03 +0000
Subject: [gdal-dev] vector NODATA for Z values?
Message-ID: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi,
there is any value in GDAL for VECTORS that indicates that a concrete value of a Z is not known (z nodata value)?
I couldn't find it anywhere.

In MiraMon format we use one concrete number documented in our format pdf (-1.0E+300) an in the driver it's planned to translate it to the same number. I could translate it to the one I am asking. And the same for detecting nodata Z and translate them to -1.0E+300 when reading another format.

Thanks!


Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat> | http://blog.creaf.cat
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a83e8417/attachment-0003.jpg>

From even.rouault at spatialys.com  Thu Jan 25 09:23:15 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Jan 2024 18:23:15 +0100
Subject: [gdal-dev] vector NODATA for Z values?
In-Reply-To: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <150f8c5c-8e85-4b2d-b16b-d0193feccde2@spatialys.com>

Hi,

good question. To the best of my knowledge, in the official WKT / WKB 
spec, it is a "everything or nothing" logic. Either all the vertices 
have a well defined Z value and then you use?LINESTRING Z,?POLYGON Z, 
etc.. Or none of them have, and you use the 2D versions: LINESTRING, 
POLYGON, etc.

I believe QGIS has standardized using not-a-number NaN number for that 
purpose, but officially, you can't export that to WKT... That said, for 
the sake of interoperability with QGIS or other software using NaN, the 
OGR WKT importer and exporter also supports its:

$ python -c "from osgeo import ogr; g = ogr.CreateGeometryFromWkt('POINT 
Z (1 2 nan)'); print(g.ExportToIsoWkt())"
POINT Z (1 2 nan)

but I'm not sure if I'd recommend using that convention. I can imagine 
exporting NaN to some formats could produce invalid content.

The good old shapefile uses a similar convention to the -1e300 trick you 
propose. 
https://www.esri.com/content/dam/esrisites/sitecore-archive/Files/Pdfs/library/whitepapers/pdfs/shapefile.pdf 
, page 2 : "Any floating point number smaller than ?10^38 is considered 
by a shapefile reader to represent a "no data" value"

Even

Le 25/01/2024 ? 18:07, Abel Pau via gdal-dev a ?crit?:
>
> Hi,
>
> there is any value in GDAL for VECTORS that indicates that a concrete 
> value of a Z is not known (z nodata value)?
>
> I couldn?t find it anywhere.
>
> In MiraMon format we use one concrete number documented in our format 
> pdf (-1.0E+300) an in the driver it?s planned to translate it to the 
> same number. I could translate it to the one I am asking. And the same 
> for detecting nodata Z and translate them to -1.0E+300 when reading 
> another format.
>
> Thanks!
>
> *Abel Pau Garcia*
>
> *GIS developer*
>
> 	
>
> https://www.creaf.cat/sites/default/files/creaf-signature.png
>
> *a.pau at creaf.uab.cat* <mailto:a.pau at creaf.uab.cat>
>
> *Let's chat on Teams!* 
> <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
> *Tel. +34 934814277*
>
> 	
>
> https://www.creaf.cat/sites/default/files/so-en-signature.png
>
> https://www.creaf.cat/sites/default/files/twitter-icon-signature.png 
> <https://twitter.com/CREAF_ecologia>https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png 
> <https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>https://www.creaf.cat/sites/default/files/youtube-icon-signature.png 
> <https://www.youtube.com/c/creafecologia>https://www.creaf.cat/sites/default/files/instagram-icon-signature.png 
> <https://www.instagram.com/CREAF_ecologia/>
>
> *www.creaf.cat* <http://www.creaf.cat>*| **http://blog.creaf.cat* 
> <http://blog.creaf.cat>
>
> 	
>
> https://www.creaf.cat/sites/default/files/uab_logo_signatura.png
>
> CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)
>
>
> Before printing this electronic message, think about the environment.
>
> http://www.creaf.uab.cat/_signatura/line.gif
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/a4b773dc/attachment-0003.jpg>

From j1 at jimenezshaw.com  Thu Jan 25 09:24:55 2024
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 25 Jan 2024 18:24:55 +0100
Subject: [gdal-dev] vector NODATA for Z values?
In-Reply-To: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <CADRrdKu3E4hS-_8NQdOJsx=8dcaybKbcSN+_GQjORzAp51mW6w@mail.gmail.com>

What about NaN?

On Thu, 25 Jan 2024, 18:07 Abel Pau via gdal-dev, <gdal-dev at lists.osgeo.org>
wrote:

> Hi,
>
> there is any value in GDAL for VECTORS that indicates that a concrete
> value of a Z is not known (z nodata value)?
>
> I couldn?t find it anywhere.
>
>
>
> In MiraMon format we use one concrete number documented in our format pdf (
> -1.0E+300) an in the driver it?s planned to translate it to the same
> number. I could translate it to the one I am asking. And the same for
> detecting nodata Z and translate them to -1.0E+300 when reading another
> format.
>
>
>
> Thanks!
>
>
>
>
>
> *Abel Pau Garcia*
>
> *GIS developer*
>
> [image: https://www.creaf.cat/sites/default/files/creaf-signature.png]
>
> *a.pau at creaf.uab.cat* <a.pau at creaf.uab.cat>
>
> *Let's chat on Teams!*
> <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
> *Tel. +34 934814277*
>
> [image: https://www.creaf.cat/sites/default/files/so-en-signature.png]
>
> [image:
> https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]
> <https://twitter.com/CREAF_ecologia>[image:
> https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]
> <https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[image:
> https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]
> <https://www.youtube.com/c/creafecologia>[image:
> https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]
> <https://www.instagram.com/CREAF_ecologia/>
>
> *www.creaf.cat* <http://www.creaf.cat>* | **http://blog.creaf.cat*
> <http://blog.creaf.cat>
>
> [image: https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
>
> CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)
>
>
> Before printing this electronic message, think about the environment.
>
> [image: http://www.creaf.uab.cat/_signatura/line.gif]
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0012.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0003.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/b94a9eea/attachment-0013.png>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan 25 09:26:41 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 25 Jan 2024 17:26:41 +0000
Subject: [gdal-dev] vector NODATA for Z values?
In-Reply-To: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

I think that it depends on the file format. Rather often it is set to zero but I have seen NaN in many places. However, shapefiles explicitly denies NaN

"...Positive infinity, negative infinity, and Not-a-Number (NaN) values are not allowed in shapefiles. Nevertheless, shapefiles support the concept of "no data" values, but they are currently used only for measures. Any floating point number smaller than -1038 is considered by a shapefile reader to represent a "no data" value.

With the SQLite dialect it is possible to select the value but NaN is not accepted.
Can be tested with
ogrinfo -dialect SQLite -sql "select CastToXYZ(ST_GeomFromText('POINT (1 2)'),3)" point.json

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Abel Pau via gdal-dev
L?hetetty: torstai 25. tammikuuta 2024 19.07
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] vector NODATA for Z values?

Hi,
there is any value in GDAL for VECTORS that indicates that a concrete value of a Z is not known (z nodata value)?
I couldn't find it anywhere.

In MiraMon format we use one concrete number documented in our format pdf (-1.0E+300) an in the driver it's planned to translate it to the same number. I could translate it to the one I am asking. And the same for detecting nodata Z and translate them to -1.0E+300 when reading another format.

Thanks!


Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat/> | http://blog.creaf.cat<http://blog.creaf.cat/>
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240125/253040e1/attachment-0003.jpg>

From gdt at lexort.com  Thu Jan 25 16:10:01 2024
From: gdt at lexort.com (Greg Troxel)
Date: Thu, 25 Jan 2024 19:10:01 -0500
Subject: [gdal-dev] false easting and northing units
In-Reply-To: <CADm=QrQ7UVL2ez-Geeb9nK-HHcbF6dG2oADsupLM6==BbfP+Eg@mail.gmail.com>
 (Kirk Waters's message of "Thu, 25 Jan 2024 11:08:10 -0500")
References: <CADm=QrRrCDKREw+cKtjUb13zzd-EHjbtLZDz_5L6jVqYwaOeTA@mail.gmail.com>
 <df708021-cb93-4787-960c-a22aacea707e@spatialys.com>
 <31c25246-cf83-4a16-9c5a-022fa0a52ffb@spatialys.com>
 <CADm=QrQ7UVL2ez-Geeb9nK-HHcbF6dG2oADsupLM6==BbfP+Eg@mail.gmail.com>
Message-ID: <rmio7d9eyzq.fsf@s1.lexort.com>

Kirk Waters - NOAA Federal via gdal-dev <gdal-dev at lists.osgeo.org>
writes:

> Thanks for the explanation and tips. I'm not clear on how setting to 26988
> (Michigan North meters) would help. If I do a gdal_translate with that, it
> shows as being in New Zealand, just as Arc had done. It would certainly
> make lots more sense to actually put the data in a standard projection that
> has an EPSG code (meters or international feet), but that gets back to the
> embarrassing tale. It may well be that I'll have to force GeoTiff 1.0. I
> think there are other software packages that haven't caught up. Even when
> they do catch up, I've come across people running 15 year old CAD software
> and complaining about the DXF version GDAL produces.
>
> Thanks to the whole team for the work you do to maintain GDAL.

Have you filed a bug with ESRI?  I realize that through no fault of your
own you are in a bit of an Alice In Wonderland situation where

  customers and government pay lots of money to ESRI

  same use GDAL for free

  you know that when reporting bugs and asking questions to GDAL you'll
  likely get answers

  everybody says that proprietary software is great because it is
  supported

  somehow, people don't report bugs and have high normative expectations
  for fixes from proprietary software

but in this case it seems that ESRI is wrong to be applying a workaround
for an old bug for geotiff 1.1, and that it should be fixed.   I would
expect people have a support contract, can report the bug, and should
therefore expect a micro release with a bugfix in say 30 days?  That
would be fast for open source, but I would have higher expectations for
software people are paying for.

From a.pau at creaf.uab.cat  Fri Jan 26 01:59:22 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 26 Jan 2024 09:59:22 +0000
Subject: [gdal-dev] vector NODATA for Z values?
In-Reply-To: <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>

Hi again,
I understand...

Perhaps an option could be using something like -lco Z_NODATA_VALUE_DST="X" to translate NODATA  from origin to this value X (NaN, 0, or whatever it may be). The driver can offer this number instead of the own NODATA and the user can know that the X value in destination will mean NODATA.

On the other hand, a user could also specify -lco Z_NODATA_VALUE_SRC="Y" so that a driver can identify a value considered NODATA in the source and translate it to the own NODATA value (or the one specified by the first parameter (if it exists)).

Is this too complicated? Are there any repercussions that I'm not seeing?
Thanks.




De: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
Enviado el: dijous, 25 de gener de 2024 18:27
Para: Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
Asunto: Re: vector NODATA for Z values?

Hi,

I think that it depends on the file format. Rather often it is set to zero but I have seen NaN in many places. However, shapefiles explicitly denies NaN

"...Positive infinity, negative infinity, and Not-a-Number (NaN) values are not allowed in shapefiles. Nevertheless, shapefiles support the concept of "no data" values, but they are currently used only for measures. Any floating point number smaller than -1038 is considered by a shapefile reader to represent a "no data" value.

With the SQLite dialect it is possible to select the value but NaN is not accepted.
Can be tested with
ogrinfo -dialect SQLite -sql "select CastToXYZ(ST_GeomFromText('POINT (1 2)'),3)" point.json

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Abel Pau via gdal-dev
L?hetetty: torstai 25. tammikuuta 2024 19.07
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] vector NODATA for Z values?

Hi,
there is any value in GDAL for VECTORS that indicates that a concrete value of a Z is not known (z nodata value)?
I couldn't find it anywhere.

In MiraMon format we use one concrete number documented in our format pdf (-1.0E+300) an in the driver it's planned to translate it to the same number. I could translate it to the one I am asking. And the same for detecting nodata Z and translate them to -1.0E+300 when reading another format.

Thanks!


Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat/> | http://blog.creaf.cat<http://blog.creaf.cat/>
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/a8ad5b34/attachment-0003.jpg>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jan 26 03:06:24 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 26 Jan 2024 11:06:24 +0000
Subject: [gdal-dev] vector NODATA for Z values?
In-Reply-To: <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <DB9PR09MB68871E500D35E517E9C14A54FD792@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

I do understand the use case and we use such nodata-Z in some of our datasets. For example, in our densified contour lines where the computed densification points get Z-value -9999. We prefer to use the nodata value because we cannot guarantee that the interpolated Z would match with the ground truth.
However, none of the 3D programs that I know can handle such data correctly, despite the one that we have written ourselves.

I somehow think that I do not like the nodata values in Z at all. It is a misuse of XYZ coordinates which should define the location in 3D space. I think that nobody is planning to support nodata in X and Y. How is it possible to compute the volume of some 3D solid if Z-values are unknown? Z that may be unknown is rather a measure than a Z-coordinate.  Or maybe even an attribute instead of a coordinate. On the other hand, I recognize that nodata-Z can be useful because anything better and standardized exists yet. OGC to the rescue?

-Jukka Rahkonen-

L?hett?j?: Abel Pau <a.pau at creaf.uab.cat>
L?hetetty: perjantai 26. tammikuuta 2024 11.59
Vastaanottaja: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev at lists.osgeo.org
Aihe: RE: vector NODATA for Z values?

Hi again,
I understand...

Perhaps an option could be using something like -lco Z_NODATA_VALUE_DST="X" to translate NODATA  from origin to this value X (NaN, 0, or whatever it may be). The driver can offer this number instead of the own NODATA and the user can know that the X value in destination will mean NODATA.

On the other hand, a user could also specify -lco Z_NODATA_VALUE_SRC="Y" so that a driver can identify a value considered NODATA in the source and translate it to the own NODATA value (or the one specified by the first parameter (if it exists)).

Is this too complicated? Are there any repercussions that I'm not seeing?
Thanks.




De: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>>
Enviado el: dijous, 25 de gener de 2024 18:27
Para: Abel Pau <a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: vector NODATA for Z values?

Hi,

I think that it depends on the file format. Rather often it is set to zero but I have seen NaN in many places. However, shapefiles explicitly denies NaN

"...Positive infinity, negative infinity, and Not-a-Number (NaN) values are not allowed in shapefiles. Nevertheless, shapefiles support the concept of "no data" values, but they are currently used only for measures. Any floating point number smaller than -1038 is considered by a shapefile reader to represent a "no data" value.

With the SQLite dialect it is possible to select the value but NaN is not accepted.
Can be tested with
ogrinfo -dialect SQLite -sql "select CastToXYZ(ST_GeomFromText('POINT (1 2)'),3)" point.json

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Abel Pau via gdal-dev
L?hetetty: torstai 25. tammikuuta 2024 19.07
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] vector NODATA for Z values?

Hi,
there is any value in GDAL for VECTORS that indicates that a concrete value of a Z is not known (z nodata value)?
I couldn't find it anywhere.

In MiraMon format we use one concrete number documented in our format pdf (-1.0E+300) an in the driver it's planned to translate it to the same number. I could translate it to the one I am asking. And the same for detecting nodata Z and translate them to -1.0E+300 when reading another format.

Thanks!


Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat/> | http://blog.creaf.cat<http://blog.creaf.cat/>
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/c442322f/attachment-0003.jpg>

From even.rouault at spatialys.com  Fri Jan 26 03:17:01 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Jan 2024 12:17:01 +0100
Subject: [gdal-dev] vector NODATA for Z values?
In-Reply-To: <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <9a1bac4d-5e59-4602-b838-abd1f8adaeac@spatialys.com>

Hi,

IMHO, I would not complicate the driver for that. Such options would 
actually be quite generic, and if we wanted to implement them, they 
would probably better be implemented as options of ogr2ogr (but should 
be done separately from your driver submission)

Even

Le 26/01/2024 ? 10:59, Abel Pau via gdal-dev a ?crit?:
>
> Hi again,
>
> I understand...
>
> Perhaps an option could be using something like *-lco 
> Z_NODATA_VALUE_DST="X"* to translate NODATA ?from origin to this value 
> X (NaN, 0, or whatever it may be). The driver can offer this number 
> instead of the own NODATA and the user can know that the X value in 
> destination will mean NODATA.
>
> On the other hand, a user could also specify *-lco 
> Z_NODATA_VALUE_SRC="Y"* so that a driver can identify a value 
> considered NODATA in the source and translate it to the own NODATA 
> value (or the one specified by the first parameter (if it exists)).
>
> Is this too complicated? Are there any repercussions that I'm not seeing?
>
> Thanks.
>
> *De:*Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>
> *Enviado el:* dijous, 25 de gener de 2024 18:27
> *Para:* Abel Pau <a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org
> *Asunto:* Re: vector NODATA for Z values?
>
> Hi,
>
> I think that it depends on the file format. Rather often it is set to 
> zero but I have seen NaN in many places. However, shapefiles 
> explicitly denies NaN
>
> ??Positive infinity, negative infinity, and Not-a-Number (NaN) values 
> are not allowed in shapefiles. Nevertheless, shapefiles support the 
> concept of "no data" values, but they are currently used only for 
> measures. Any floating point number smaller than ?1038 is considered 
> by a shapefile reader to represent a "no data" value.
>
> With the SQLite dialect it is possible to select the value but NaN is 
> not accepted.
> Can be tested with
> ogrinfo -dialect SQLite -sql "select CastToXYZ(ST_GeomFromText('POINT 
> (1 2)'),3)" point.json
>
> -Jukka Rahkonen-
>
> *L?hett?j?:*gdal-dev <gdal-dev-bounces at lists.osgeo.org> *Puolesta 
> *Abel Pau via gdal-dev
> *L?hetetty:* torstai 25. tammikuuta 2024 19.07
> *Vastaanottaja:* gdal-dev at lists.osgeo.org
> *Aihe:* [gdal-dev] vector NODATA for Z values?
>
> Hi,
>
> there is any value in GDAL for VECTORS that indicates that a concrete 
> value of a Z is not known (z nodata value)?
>
> I couldn?t find it anywhere.
>
> In MiraMon format we use one concrete number documented in our format 
> pdf (-1.0E+300) an in the driver it?s planned to translate it to the 
> same number. I could translate it to the one I am asking. And the same 
> for detecting nodata Z and translate them to -1.0E+300 when reading 
> another format.
>
> Thanks!
>
> *Abel Pau Garcia*
>
> *GIS developer*
>
> 	
>
> https://www.creaf.cat/sites/default/files/creaf-signature.png
>
> *a.pau at creaf.uab.cat* <mailto:a.pau at creaf.uab.cat>
>
> *Let's chat on Teams!* 
> <https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
>
> *Tel. +34 934814277*
>
> 	
>
> https://www.creaf.cat/sites/default/files/so-en-signature.png
>
> https://www.creaf.cat/sites/default/files/twitter-icon-signature.png 
> <https://twitter.com/CREAF_ecologia>https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png 
> <https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>https://www.creaf.cat/sites/default/files/youtube-icon-signature.png 
> <https://www.youtube.com/c/creafecologia>https://www.creaf.cat/sites/default/files/instagram-icon-signature.png 
> <https://www.instagram.com/CREAF_ecologia/>
>
> *www.creaf.cat* <http://www.creaf.cat/>*| **http://blog.creaf.cat* 
> <http://blog.creaf.cat/>
>
> 	
>
> https://www.creaf.cat/sites/default/files/uab_logo_signatura.png
>
> CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)
>
>
> Before printing this electronic message, think about the environment.
>
> http://www.creaf.uab.cat/_signatura/line.gif
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/d62a622c/attachment-0003.jpg>

From even.rouault at spatialys.com  Fri Jan 26 03:19:40 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Jan 2024 12:19:40 +0100
Subject: [gdal-dev] Virtual Raster Tile Index (VRTTI) driver,
 and associated gdaltindex improvements
In-Reply-To: <abdbd4f2-38d7-45c5-9f79-a72c0fbfddcb@spatialys.com>
References: <abdbd4f2-38d7-45c5-9f79-a72c0fbfddcb@spatialys.com>
Message-ID: <4367a9c2-084f-4e30-a39e-d379d5a06b06@spatialys.com>

Hi,

the driver has recently landed into GDAL master, renamed as GTI: 
https://gdal.org/drivers/raster/gti.html

Can be tested using 
https://gdal.org/download.html#gdal-master-conda-builds , the refreshed 
ghcr.io/osgeo/gdal Docker image, or other nightly builds of GDAL master

Even

Le 20/12/2023 ? 19:33, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> For those not actively following github tickets & PR, I just want to 
> point to a new pending major functionality to improve management of 
> virtual mosaics with a very large number of tiles/sources (> tens of 
> thousands of tiles), by referencing them as features of a vector layer 
> (typically created by gdaltindex), instead of a XML file as in 
> traditional VRT, augmented with additional metadata.
>
> More details in https://github.com/OSGeo/gdal/pull/8983 (and in 
> initial ticket in https://github.com/OSGeo/gdal/issues/8861)
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From a.pau at creaf.uab.cat  Fri Jan 26 03:53:52 2024
From: a.pau at creaf.uab.cat (Abel Pau)
Date: Fri, 26 Jan 2024 11:53:52 +0000
Subject: [gdal-dev] vector NODATA for Z values?
In-Reply-To: <9a1bac4d-5e59-4602-b838-abd1f8adaeac@spatialys.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9a1bac4d-5e59-4602-b838-abd1f8adaeac@spatialys.com>
Message-ID: <PAXPR07MB7775D043BA5B740D4AA373F1A2792@PAXPR07MB7775.eurprd07.prod.outlook.com>

Perfect then!
I leave at it is and we?ll see.

De: Even Rouault <even.rouault at spatialys.com>
Enviado el: divendres, 26 de gener de 2024 12:17
Para: Abel Pau <a.pau at creaf.uab.cat>; Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] vector NODATA for Z values?


Hi,

IMHO, I would not complicate the driver for that. Such options would actually be quite generic, and if we wanted to implement them, they would probably better be implemented as options of ogr2ogr (but should be done separately from your driver submission)

Even
Le 26/01/2024 ? 10:59, Abel Pau via gdal-dev a ?crit :
Hi again,
I understand...

Perhaps an option could be using something like -lco Z_NODATA_VALUE_DST="X" to translate NODATA  from origin to this value X (NaN, 0, or whatever it may be). The driver can offer this number instead of the own NODATA and the user can know that the X value in destination will mean NODATA.

On the other hand, a user could also specify -lco Z_NODATA_VALUE_SRC="Y" so that a driver can identify a value considered NODATA in the source and translate it to the own NODATA value (or the one specified by the first parameter (if it exists)).

Is this too complicated? Are there any repercussions that I'm not seeing?
Thanks.




De: Rahkonen Jukka <jukka.rahkonen at maanmittauslaitos.fi><mailto:jukka.rahkonen at maanmittauslaitos.fi>
Enviado el: dijous, 25 de gener de 2024 18:27
Para: Abel Pau <a.pau at creaf.uab.cat><mailto:a.pau at creaf.uab.cat>; gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Asunto: Re: vector NODATA for Z values?

Hi,

I think that it depends on the file format. Rather often it is set to zero but I have seen NaN in many places. However, shapefiles explicitly denies NaN

??Positive infinity, negative infinity, and Not-a-Number (NaN) values are not allowed in shapefiles. Nevertheless, shapefiles support the concept of "no data" values, but they are currently used only for measures. Any floating point number smaller than ?1038 is considered by a shapefile reader to represent a "no data" value.

With the SQLite dialect it is possible to select the value but NaN is not accepted.
Can be tested with
ogrinfo -dialect SQLite -sql "select CastToXYZ(ST_GeomFromText('POINT (1 2)'),3)" point.json

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> Puolesta Abel Pau via gdal-dev
L?hetetty: torstai 25. tammikuuta 2024 19.07
Vastaanottaja: gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] vector NODATA for Z values?

Hi,
there is any value in GDAL for VECTORS that indicates that a concrete value of a Z is not known (z nodata value)?
I couldn?t find it anywhere.

In MiraMon format we use one concrete number documented in our format pdf (-1.0E+300) an in the driver it?s planned to translate it to the same number. I could translate it to the one I am asking. And the same for detecting nodata Z and translate them to -1.0E+300 when reading another format.

Thanks!


Abel Pau Garcia
GIS developer
[https://www.creaf.cat/sites/default/files/creaf-signature.png]
a.pau at creaf.uab.cat<mailto:a.pau at creaf.uab.cat>
Let's chat on Teams!<https://teams.microsoft.com/l/chat/0/0?users=a.pau at creaf.uab.cat>
Tel. +34 934814277
[https://www.creaf.cat/sites/default/files/so-en-signature.png]
[https://www.creaf.cat/sites/default/files/twitter-icon-signature.png]<https://twitter.com/CREAF_ecologia>[https://www.creaf.cat/sites/default/files/linkedin-icon-signature.png]<https://www.linkedin.com/company/1363052?trk=tyah&trkInfo=clickedVertical:company,clickedEntityId:1363052,idx:2-1-2,tarId:1465807877789,tas:creaf>[https://www.creaf.cat/sites/default/files/youtube-icon-signature.png]<https://www.youtube.com/c/creafecologia>[https://www.creaf.cat/sites/default/files/instagram-icon-signature.png]<https://www.instagram.com/CREAF_ecologia/>
www.creaf.cat<http://www.creaf.cat/> | http://blog.creaf.cat<http://blog.creaf.cat/>
[https://www.creaf.cat/sites/default/files/uab_logo_signatura.png]
CREAF. Campus UAB. Edifici C. 08193 Bellaterra (Barcelona)

Before printing this electronic message, think about the environment.






_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0001.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 3657 bytes
Desc: image001.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.png
Type: image/png
Size: 2547 bytes
Desc: image002.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0007.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image003.png
Type: image/png
Size: 505 bytes
Desc: image003.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0008.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.png
Type: image/png
Size: 446 bytes
Desc: image004.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0009.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image005.png
Type: image/png
Size: 553 bytes
Desc: image005.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0010.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.png
Type: image/png
Size: 582 bytes
Desc: image006.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0011.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image007.jpg
Type: image/jpeg
Size: 2208 bytes
Desc: image007.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0002.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.jpg
Type: image/jpeg
Size: 1111 bytes
Desc: image008.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240126/b2c3cebd/attachment-0003.jpg>

From public at postholer.com  Sun Jan 28 23:29:56 2024
From: public at postholer.com (Scott)
Date: Sun, 28 Jan 2024 23:29:56 -0800
Subject: [gdal-dev] Passing Python PixelFunctionArguments or kwargs from
 command line?
In-Reply-To: <PAXPR07MB7775D043BA5B740D4AA373F1A2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9a1bac4d-5e59-4602-b838-abd1f8adaeac@spatialys.com>
 <PAXPR07MB7775D043BA5B740D4AA373F1A2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
Message-ID: <c8ea4825-5893-49f3-b2cd-273f87e18d6a@postholer.com>

With a python pixel function in a .vrt file, is it possible to pass 
values from the command line?

Example:
gdal_translate ... -lco PixelFunctionArguments=? or -lco -kwargs=?

Basically I want to change the 'min' and 'max' values on the command line:
<PixelFunctionArguments min="0" max="100" />

Thanks!
Scott


From even.rouault at spatialys.com  Mon Jan 29 02:54:50 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Jan 2024 11:54:50 +0100
Subject: [gdal-dev] Passing Python PixelFunctionArguments or kwargs from
 command line?
In-Reply-To: <c8ea4825-5893-49f3-b2cd-273f87e18d6a@postholer.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9a1bac4d-5e59-4602-b838-abd1f8adaeac@spatialys.com>
 <PAXPR07MB7775D043BA5B740D4AA373F1A2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <c8ea4825-5893-49f3-b2cd-273f87e18d6a@postholer.com>
Message-ID: <a8b5dba8-c9ed-4d5f-9db0-24e6b32c13f0@spatialys.com>

Hi,

no, the values of pixel function arguments are hardcoded in the VRT.?? 
If someone wanted to implement what you mention, that should rather be 
done as open option (-oo) of the VRT driver

Even

Le 29/01/2024 ? 08:29, Scott via gdal-dev a ?crit?:
> With a python pixel function in a .vrt file, is it possible to pass 
> values from the command line?
>
> Example:
> gdal_translate ... -lco PixelFunctionArguments=? or -lco -kwargs=?
>
> Basically I want to change the 'min' and 'max' values on the command 
> line:
> <PixelFunctionArguments min="0" max="100" />
>
> Thanks!
> Scott
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Mon Jan 29 10:20:50 2024
From: public at postholer.com (Scott)
Date: Mon, 29 Jan 2024 10:20:50 -0800
Subject: [gdal-dev] Passing Python PixelFunctionArguments or kwargs from
 command line?
In-Reply-To: <a8b5dba8-c9ed-4d5f-9db0-24e6b32c13f0@spatialys.com>
References: <PAXPR07MB77759BB261A858F98C2883BDA27A2@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <DB9PR09MB688790805C852B26139B1244FD7A2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <PAXPR07MB77755FDBC2A7D4373DB1B58EA2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <9a1bac4d-5e59-4602-b838-abd1f8adaeac@spatialys.com>
 <PAXPR07MB7775D043BA5B740D4AA373F1A2792@PAXPR07MB7775.eurprd07.prod.outlook.com>
 <c8ea4825-5893-49f3-b2cd-273f87e18d6a@postholer.com>
 <a8b5dba8-c9ed-4d5f-9db0-24e6b32c13f0@spatialys.com>
Message-ID: <28144665-7014-4d91-bd13-c60dd43882cf@postholer.com>

Thanks Even!

To re-iterate the value of passing arguments, here's a use case:

Say I have 20 years of climate data, 2001-2020, 1 raster per year. Using 
gdalbuildvrt I create a .vrt with all those rasters in chronological order.

Now say I want to stat a range of years, such as:

gdal_translate ... -oo PixelFunctionArguments="startYear=2012" -oo 
PixelFunctionArguments="endYear=2015"

In my .vrt python pixel function I might have something like this:

    stIdx = startYear - 2001
    endIdx = endYear - 2001
    ...
    np.someMethod(ar_in[stIdx:endIdx])


This would truly make VRT's dynamic. Instead of a temporal set of 
rasters, it could be a mix of elevation and land type. You get the idea.

Right now, it's easy enough to have the .vrt act as a template and do 
substitution with desired values. Passing arguments would make it very, 
very clean.

Thanks!
Scott

On 1/29/24 02:54, Even Rouault via gdal-dev wrote:
> Hi,
> 
> no, the values of pixel function arguments are hardcoded in the VRT. If 
> someone wanted to implement what you mention, that should rather be done 
> as open option (-oo) of the VRT driver
> 
> Even
> 
> Le 29/01/2024 ? 08:29, Scott via gdal-dev a ?crit?:
>> With a python pixel function in a .vrt file, is it possible to pass 
>> values from the command line?
>>
>> Example:
>> gdal_translate ... -lco PixelFunctionArguments=? or -lco -kwargs=?
>>
>> Basically I want to change the 'min' and 'max' values on the command 
>> line:
>> <PixelFunctionArguments min="0" max="100" />
>>
>> Thanks!
>> Scott
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From howard at hobu.co  Mon Jan 29 10:42:40 2024
From: howard at hobu.co (Howard Butler)
Date: Mon, 29 Jan 2024 12:42:40 -0600
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <2BAF8607-689A-4F17-A46D-E835780F08C5@hobu.co>

Howard Butler, Even Rouault, Dan Baston, Sean Gilles, Javier Jiminez Shaw, and Alessandro Pasotti held the monthly GDAL Maintainers Meeting on 11/23/2023. The following items were discussed and reported upon:

Fundraising update
----------------------------

Annual renewals are now going out to sponsors, so if you are a coordinator of GDAL funding in your organization, please be on the lookout for them. 

Maintenance activities update
------------------------------------------

Dan

No activity this month

Alessandro

* Add GetExtent3D "fast" implementation for GeoJSON 
* GDAL Raster Tile Index driver review. Find out more at https://gdal.org/drivers/raster/gti.html

Even

* 3.8.3 Bugfix release. See https://github.com/OSGeo/gdal/blob/v3.8.3/NEWS.md for release notes
* Added CodeQL analyzer via GitHub Actions. It identified nearly 300 issues, though almost all of them were false positives or unconcerning.
* Submitted GDAL to the OpenSSF for a security scorecard. It initially ranked 5.8/10, and Even completed actions to improve its score such as providing PR submissions to CodeQL. It currently ranks 9.0/10.0, with the item most contributing to its slightly reduced score being the need for more code and PR reviews (we need more PR reviews from GDAL collaborators!) See https://securityscorecards.dev/viewer/?uri=github.com/OSGeo/gdal for details on the score. 

Javier

* Javier refactored https://spatialreference.org. It now loads very fast, it is statically generated, and it is open source software that users can deploy in their own environments. Thanks again Javier!

Sean

* Sean added GitHub Actions that listen to the GDAL release tag and fire and runs rasterio's tests when a GDAL release is issued. 
* Sean added exception chaining in rasterio and this prompted a discussion about lack of enthusiasm for changing any of GDAL's error handling behaviors.

Translation Discussion

Alessandro began a discussion about the need to add language translation of open options for drivers, how the project could go about managing them. Discussion evolved to covering translation of contextual error messages and the challenge of maintaining and providing that. No action was to be taken at this time, but if this is a topic that's interesting to you, please chime in on the mailing list or in a ticket.

The next GDAL Maintainers Meeting is 02/22/2024 at 9:00 EDT. Any PSC members are welcome to join by reaching out to me for an invite.

Howard

From rayg at daylongraphics.com  Mon Jan 29 20:43:30 2024
From: rayg at daylongraphics.com (Ray at Daylon)
Date: Mon, 29 Jan 2024 20:43:30 -0800
Subject: [gdal-dev] Lost error messages
In-Reply-To: <2BAF8607-689A-4F17-A46D-E835780F08C5@hobu.co>
References: <2BAF8607-689A-4F17-A46D-E835780F08C5@hobu.co>
Message-ID: <e3af4336-6294-434e-a5c7-15cfd6721813@daylongraphics.com>

I was tracing through the TIGER/Line OGR driver and noticed that
it calls OGRTigerDataSource::Open with the bTestOpen parameter
set to TRUE, causing that function to skip calling CPLError
and only return FALSE if an error happens.

This causes an interesting situation: an app can have the TIGER driver 
fail, but not be told why. Calling CPLGetLastErrorXXX doesn't help 
because no error condition was formally reported.

Is there a reason why bTestOpen is set to TRUE? Shouldn't
full error reporting be the default? If this parameter is
important, shouldn't it be part of the driver API so an app
can set it to get errors described?

Curious,
Ray Gardener


From even.rouault at spatialys.com  Tue Jan 30 03:26:09 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Jan 2024 12:26:09 +0100
Subject: [gdal-dev] Lost error messages
In-Reply-To: <e3af4336-6294-434e-a5c7-15cfd6721813@daylongraphics.com>
References: <2BAF8607-689A-4F17-A46D-E835780F08C5@hobu.co>
 <e3af4336-6294-434e-a5c7-15cfd6721813@daylongraphics.com>
Message-ID: <ab43c24e-31fb-4700-8c42-35c2cb578d9f@spatialys.com>

Ray,

Le 30/01/2024 ? 05:43, Ray at Daylon via gdal-dev a ?crit?:
> I was tracing through the TIGER/Line OGR driver and noticed that
> it calls OGRTigerDataSource::Open with the bTestOpen parameter
> set to TRUE, causing that function to skip calling CPLError
> and only return FALSE if an error happens.
>
> This causes an interesting situation: an app can have the TIGER driver 
> fail, but not be told why. Calling CPLGetLastErrorXXX doesn't help 
> because no error condition was formally reported.
>
> Is there a reason why bTestOpen is set to TRUE? Shouldn't
> full error reporting be the default? If this parameter is
> important, shouldn't it be part of the driver API so an app
> can set it to get errors described?

I presume this is mostly a copy&paste pattern borrowed from the 
Shapefile driver. Basically the reason to be silent in most situations 
is that the Tiger driver opens a directory, and there's no easy way to 
know in advance if a directory belongs to the Tiger driver, or the 
Shapefile one, or the MITAB one, or etc.. than iterating over its files 
and checking if they have? extensions that look like a Tiger dataset. So 
failure of finding such file shouldn't trigger a verbose error, 
otherwise this would prevent other drivers to also try checking if they 
recognize the content of the directory.

And congratulations: you're the first user in recent times I'm aware of 
to have interest in that driver ;-) Or perhaps that was just accidental?

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From mdsumner at gmail.com  Tue Jan 30 03:31:01 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 30 Jan 2024 22:31:01 +1100
Subject: [gdal-dev] Virtual Raster Tile Index (VRTTI) driver,
 and associated gdaltindex improvements
In-Reply-To: <4367a9c2-084f-4e30-a39e-d379d5a06b06@spatialys.com>
References: <abdbd4f2-38d7-45c5-9f79-a72c0fbfddcb@spatialys.com>
 <4367a9c2-084f-4e30-a39e-d379d5a06b06@spatialys.com>
Message-ID: <CAAcGz9_OBkQ-ZdnN-RWD2r9xTVQ8nv5ds=qk4MpATzgjO7+M5w@mail.gmail.com>

awesome, thanks Even I'm having fun with this one.

For anyone interested I created Python to parse the OpenTopography COP90
VRT (I have to wget it locally as I don't know how to hit the URL for the
xml yet).

https://github.com/mdsumner/cog-example/blob/1ca74f3baffe69830180031ddabcbbc569816150/gti/cop90.py

(I'm using the DstRect to get efficient extent polygon of each tif without
opening them).

This writes a cop90.shp which can be GTI'd via

gdalinfo GTI:/vsicurl/
https://github.com/mdsumner/cog-example/raw/main/gti/cop90.shp

(seems I didn't get the SRS attached correctly).

I also have an R script in there for COP30 that I did previously to
FlatGeoBuf, I couldn't get FlatGeoBuf to work from Python and don't know
why.

If there's any pythonic-idiomatic advice on my code I'm very interested,
slowly I'll try to use this to do the same in C++.  If there's a faster way
to get these extents with GDAL I'm also keen to hear, thanks!

Cheers, Mike

On Fri, Jan 26, 2024 at 10:19?PM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> the driver has recently landed into GDAL master, renamed as GTI:
> https://gdal.org/drivers/raster/gti.html
>
> Can be tested using
> https://gdal.org/download.html#gdal-master-conda-builds , the refreshed
> ghcr.io/osgeo/gdal Docker image, or other nightly builds of GDAL master
>
> Even
>
> Le 20/12/2023 ? 19:33, Even Rouault via gdal-dev a ?crit :
> > Hi,
> >
> > For those not actively following github tickets & PR, I just want to
> > point to a new pending major functionality to improve management of
> > virtual mosaics with a very large number of tiles/sources (> tens of
> > thousands of tiles), by referencing them as features of a vector layer
> > (typically created by gdaltindex), instead of a XML file as in
> > traditional VRT, augmented with additional metadata.
> >
> > More details in https://github.com/OSGeo/gdal/pull/8983 (and in
> > initial ticket in https://github.com/OSGeo/gdal/issues/8861)
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240130/13691a36/attachment.htm>

From even.rouault at spatialys.com  Tue Jan 30 03:46:42 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Jan 2024 12:46:42 +0100
Subject: [gdal-dev] Virtual Raster Tile Index (VRTTI) driver,
 and associated gdaltindex improvements
In-Reply-To: <CAAcGz9_OBkQ-ZdnN-RWD2r9xTVQ8nv5ds=qk4MpATzgjO7+M5w@mail.gmail.com>
References: <abdbd4f2-38d7-45c5-9f79-a72c0fbfddcb@spatialys.com>
 <4367a9c2-084f-4e30-a39e-d379d5a06b06@spatialys.com>
 <CAAcGz9_OBkQ-ZdnN-RWD2r9xTVQ8nv5ds=qk4MpATzgjO7+M5w@mail.gmail.com>
Message-ID: <3f239767-0f8e-4d5c-a3d0-e63d9bb234ad@spatialys.com>

Michael,

You need to attach the CRS at layer creation time with:

layer = ds.CreateLayer(layer_name, geom_type=ogr.wkbPolygon, srs=sr)

Setting it with featureDefn.GetGeomFieldDefn(0).SetSpatialRef() is 
illegal. Now that 
https://gdal.org/development/rfc/rfc97_feature_and_fielddefn_sealing.html 
has been implemented, you should have got an error... (assuming you run 
your script with recent GDAL master)

from osgeo import ogr
ogr.UseExceptions()
ds = ogr.GetDriverByName('ESRI Shapefile').CreateDataSource('/tmp/foo.shp')
lyr = ds.CreateLayer('foo')
from osgeo import osr
sr = osr.SpatialReference()
sr.SetFromUserInput("OGC:CRS84")
featureDefn = lyr.GetLayerDefn()
featureDefn.GetGeomFieldDefn(0).SetSpatialRef(sr)
Traceback (most recent call last):
 ? File "<stdin>", line 1, in <module>
 ? File "/home/even/gdal/gdal/build_cmake/swig/python/osgeo/ogr.py", 
line 6017, in SetSpatialRef
 ??? return _ogr.GeomFieldDefn_SetSpatialRef(self, *args)
RuntimeError: OGRGeomFieldDefn::SetSpatialRef() not allowed on a sealed 
object

I can't think of a reason why your script wouldn't work with a 
FlatGeoBuf output (did you get an error message?), which would be much 
better, as you could also attach the XRES, YRES, BANDCOUNT, etc. 
metadata items that would help the GTI driver avoid probing one of the 
tiles.

Even

Le 30/01/2024 ? 12:31, Michael Sumner a ?crit?:
> awesome, thanks Even I'm having fun with this one.
>
> For anyone interested I created Python to parse the OpenTopography 
> COP90 VRT (I have to wget it locally as I don't know how to hit the 
> URL for the xml yet).
>
> https://github.com/mdsumner/cog-example/blob/1ca74f3baffe69830180031ddabcbbc569816150/gti/cop90.py
>
> (I'm using the DstRect to get efficient extent polygon of each tif 
> without opening them).
>
> This writes a cop90.shp which can be GTI'd via
>
> gdalinfo 
> GTI:/vsicurl/https://github.com/mdsumner/cog-example/raw/main/gti/cop90.shp
>
> (seems I didn't get the SRS attached correctly).
>
> I also have an R script in there for COP30 that I did previously to 
> FlatGeoBuf, I couldn't get FlatGeoBuf to work from Python and don't 
> know why.
>
> If there's any pythonic-idiomatic advice on my code I'm very 
> interested, slowly I'll try to use this to do the same in C++.? If 
> there's a faster way to get these extents with GDAL I'm also keen to 
> hear, thanks!
>
> Cheers, Mike
>
> On Fri, Jan 26, 2024 at 10:19?PM Even Rouault via gdal-dev 
> <gdal-dev at lists.osgeo.org> wrote:
>
>     Hi,
>
>     the driver has recently landed into GDAL master, renamed as GTI:
>     https://gdal.org/drivers/raster/gti.html
>
>     Can be tested using
>     https://gdal.org/download.html#gdal-master-conda-builds , the
>     refreshed
>     ghcr.io/osgeo/gdal <http://ghcr.io/osgeo/gdal> Docker image, or
>     other nightly builds of GDAL master
>
>     Even
>
>     Le 20/12/2023 ? 19:33, Even Rouault via gdal-dev a ?crit?:
>     > Hi,
>     >
>     > For those not actively following github tickets & PR, I just
>     want to
>     > point to a new pending major functionality to improve management of
>     > virtual mosaics with a very large number of tiles/sources (>
>     tens of
>     > thousands of tiles), by referencing them as features of a vector
>     layer
>     > (typically created by gdaltindex), instead of a XML file as in
>     > traditional VRT, augmented with additional metadata.
>     >
>     > More details in https://github.com/OSGeo/gdal/pull/8983 (and in
>     > initial ticket in https://github.com/OSGeo/gdal/issues/8861)
>     >
>     > Even
>     >
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240130/2b0e010e/attachment-0001.htm>

From mdsumner at gmail.com  Tue Jan 30 03:54:36 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Tue, 30 Jan 2024 22:54:36 +1100
Subject: [gdal-dev] Virtual Raster Tile Index (VRTTI) driver,
 and associated gdaltindex improvements
In-Reply-To: <3f239767-0f8e-4d5c-a3d0-e63d9bb234ad@spatialys.com>
References: <abdbd4f2-38d7-45c5-9f79-a72c0fbfddcb@spatialys.com>
 <4367a9c2-084f-4e30-a39e-d379d5a06b06@spatialys.com>
 <CAAcGz9_OBkQ-ZdnN-RWD2r9xTVQ8nv5ds=qk4MpATzgjO7+M5w@mail.gmail.com>
 <3f239767-0f8e-4d5c-a3d0-e63d9bb234ad@spatialys.com>
Message-ID: <CAAcGz9_3JhsFcf=jvC3yivmuHMd7+W4q=zEZu4oUpUM-rYU=Mw@mail.gmail.com>

ah thanks, all very helpful - no it's not done with master (for various
reasons), I'll follow up with details if relevant, mostly I was just
excited to get a useable workflow for the entire process.

Cheers, Mike

On Tue, 30 Jan 2024, 22:46 Even Rouault, <even.rouault at spatialys.com> wrote:

> Michael,
>
> You need to attach the CRS at layer creation time with:
>
> layer = ds.CreateLayer(layer_name, geom_type=ogr.wkbPolygon, srs=sr)
>
> Setting it with featureDefn.GetGeomFieldDefn(0).SetSpatialRef() is
> illegal. Now that
> https://gdal.org/development/rfc/rfc97_feature_and_fielddefn_sealing.html
> has been implemented, you should have got an error... (assuming you run
> your script with recent GDAL master)
>
> from osgeo import ogr
> ogr.UseExceptions()
> ds = ogr.GetDriverByName('ESRI Shapefile').CreateDataSource('/tmp/foo.shp')
> lyr = ds.CreateLayer('foo')
> from osgeo import osr
> sr = osr.SpatialReference()
> sr.SetFromUserInput("OGC:CRS84")
> featureDefn = lyr.GetLayerDefn()
> featureDefn.GetGeomFieldDefn(0).SetSpatialRef(sr)
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
>   File "/home/even/gdal/gdal/build_cmake/swig/python/osgeo/ogr.py", line
> 6017, in SetSpatialRef
>     return _ogr.GeomFieldDefn_SetSpatialRef(self, *args)
> RuntimeError: OGRGeomFieldDefn::SetSpatialRef() not allowed on a sealed
> object
>
> I can't think of a reason why your script wouldn't work with a FlatGeoBuf
> output (did you get an error message?), which would be much better, as you
> could also attach the XRES, YRES, BANDCOUNT, etc. metadata items that would
> help the GTI driver avoid probing one of the tiles.
>
> Even
> Le 30/01/2024 ? 12:31, Michael Sumner a ?crit :
>
> awesome, thanks Even I'm having fun with this one.
>
> For anyone interested I created Python to parse the OpenTopography COP90
> VRT (I have to wget it locally as I don't know how to hit the URL for the
> xml yet).
>
>
> https://github.com/mdsumner/cog-example/blob/1ca74f3baffe69830180031ddabcbbc569816150/gti/cop90.py
>
> (I'm using the DstRect to get efficient extent polygon of each tif without
> opening them).
>
> This writes a cop90.shp which can be GTI'd via
>
> gdalinfo GTI:/vsicurl/
> https://github.com/mdsumner/cog-example/raw/main/gti/cop90.shp
>
> (seems I didn't get the SRS attached correctly).
>
> I also have an R script in there for COP30 that I did previously to
> FlatGeoBuf, I couldn't get FlatGeoBuf to work from Python and don't know
> why.
>
> If there's any pythonic-idiomatic advice on my code I'm very interested,
> slowly I'll try to use this to do the same in C++.  If there's a faster way
> to get these extents with GDAL I'm also keen to hear, thanks!
>
> Cheers, Mike
>
> On Fri, Jan 26, 2024 at 10:19?PM Even Rouault via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Hi,
>>
>> the driver has recently landed into GDAL master, renamed as GTI:
>> https://gdal.org/drivers/raster/gti.html
>>
>> Can be tested using
>> https://gdal.org/download.html#gdal-master-conda-builds , the refreshed
>> ghcr.io/osgeo/gdal Docker image, or other nightly builds of GDAL master
>>
>> Even
>>
>> Le 20/12/2023 ? 19:33, Even Rouault via gdal-dev a ?crit :
>> > Hi,
>> >
>> > For those not actively following github tickets & PR, I just want to
>> > point to a new pending major functionality to improve management of
>> > virtual mosaics with a very large number of tiles/sources (> tens of
>> > thousands of tiles), by referencing them as features of a vector layer
>> > (typically created by gdaltindex), instead of a XML file as in
>> > traditional VRT, augmented with additional metadata.
>> >
>> > More details in https://github.com/OSGeo/gdal/pull/8983 (and in
>> > initial ticket in https://github.com/OSGeo/gdal/issues/8861)
>> >
>> > Even
>> >
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240130/fa96e778/attachment.htm>

From even.rouault at spatialys.com  Tue Jan 30 03:57:48 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Jan 2024 12:57:48 +0100
Subject: [gdal-dev] Virtual Raster Tile Index (VRTTI) driver,
 and associated gdaltindex improvements
In-Reply-To: <3f239767-0f8e-4d5c-a3d0-e63d9bb234ad@spatialys.com>
References: <abdbd4f2-38d7-45c5-9f79-a72c0fbfddcb@spatialys.com>
 <4367a9c2-084f-4e30-a39e-d379d5a06b06@spatialys.com>
 <CAAcGz9_OBkQ-ZdnN-RWD2r9xTVQ8nv5ds=qk4MpATzgjO7+M5w@mail.gmail.com>
 <3f239767-0f8e-4d5c-a3d0-e63d9bb234ad@spatialys.com>
Message-ID: <8126a938-3f24-4376-beb1-c702561c3a53@spatialys.com>


> as you could also attach the XRES, YRES, BANDCOUNT, etc. metadata 
> items that would help the GTI driver avoid probing one of the tiles.
>
PS: OGRLayer::SetMetadataItem(key, value) only works on FlatGeoBuf and 
GPKG drivers with latest master as well

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240130/4dc8fce1/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Jan 30 07:09:00 2024
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 30 Jan 2024 15:09:00 +0000
Subject: [gdal-dev] Is there any RHEL repo for relatively new GDAL versions?
Message-ID: <DB9PR09MB6887E163666FFD1B96BD79E2FD7D2@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

The newest GDAL in the official RHEL repo is 3.4.3, released 2022-04-22. There used to be GDAL 3.7 available from the PostgreSQL repo https://yum.postgresql.org/repopackages/ and we have been using that, but the version was removed recently. Some other user was unhappy as well and created a bug
Bug #7943: Providers missing from pgdg-common for GDAL 3.7 (RHEL/CentOS/AlmaLinux 8) - PostgreSQL YUM Repository - Redmine - PostgreSQL community<https://redmine.postgresql.org/issues/7943>

That user got this feedback:
"Why did you install GDAL 3.7? The packages are in the repo, but they were never required by any released GIS suite. I even removed them from git a couple of weeks ago:
https://git.postgresql.org/gitweb/?p=pgrpms.git;a=commitdiff;h=059f17f664ab093af35389dc7ec7b62c5a9f3fe2
Commit comment: gdal35 and gdal37: Remove from the repo. Not used in any packages.

By our agency's IT policy compiling GDAL by ourselves is not possible. Can anyone suggest other acceptable means for getting at least GDAL 3.7 for RHEL 8?

-Jukka Rahkonen-



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240130/2fe6d1cf/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Jan 30 07:50:07 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Jan 2024 16:50:07 +0100
Subject: [gdal-dev] Is there any RHEL repo for relatively new GDAL
 versions?
In-Reply-To: <DB9PR09MB6887E163666FFD1B96BD79E2FD7D2@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <DB9PR09MB6887E163666FFD1B96BD79E2FD7D2@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <30ecbe68-674f-47c3-8ba4-5d3313d69242@spatialys.com>

Hi Jukka,

this is a unfortunate move. You may have to create a custom package, 
possibly inspired from src.rpm from recent Fedora 
(https://src.fedoraproject.org/rpms/gdal). I see Markus Neteler did one 
for GDAL 3.0.4 for RHEL 7 in 
https://copr.fedorainfracloud.org/coprs/neteler/GDAL/

Or I assume that you may install it also from conda-forge. I believe 
their Linux binaries should run on RHEL 8.

Actually, quickly checking with AlmaLinux 8, a free clone of RHEL 8:

# docker run --rm -it almalinux:8

# dnf install wget
# wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
# sh Miniconda3-latest-Linux-x86_64.sh?? # answer to default questions 
with [Enter]
# source /root/miniconda3/bin/activate
# conda install -c conda-forge gdal
# gdalinfo --version
GDAL 3.8.3, released 2024/01/04

Or if you only use command line utilities, use Docker images

PS: IT policies are weird. It is paradoxical to trust more an outside 
source for binaries rather than building your own from source...

Even

Le 30/01/2024 ? 16:09, Rahkonen Jukka via gdal-dev a ?crit?:
>
> Hi,
>
> The newest GDAL in the official RHEL repo is 3.4.3, released 
> 2022-04-22. There used to be GDAL 3.7 available from the PostgreSQL 
> repo https://yum.postgresql.org/repopackages/ and we have been using 
> that, but the version was removed recently. Some other user was 
> unhappy as well and created a bug
>
> Bug #7943: Providers missing from pgdg-common for GDAL 3.7 
> (RHEL/CentOS/AlmaLinux 8) - PostgreSQL YUM Repository - Redmine - 
> PostgreSQL community <https://redmine.postgresql.org/issues/7943>
>
> That user got this feedback:
> ?Why did you install GDAL 3.7? The packages are in the repo, but they 
> were never required by any released GIS suite. I even removed them 
> from git a couple of weeks ago:
> https://git.postgresql.org/gitweb/?p=pgrpms.git;a=commitdiff;h=059f17f664ab093af35389dc7ec7b62c5a9f3fe2 
> <https://git.postgresql.org/gitweb/?p=pgrpms.git;a=commitdiff;h=059f17f664ab093af35389dc7ec7b62c5a9f3fe2>
> Commit comment: gdal35 and gdal37: Remove from the repo. Not used in 
> any packages.
>
> By our agency?s IT policy compiling GDAL by ourselves is not possible. 
> Can anyone suggest other acceptable means for getting at least GDAL 
> 3.7 for RHEL 8?
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240130/4fc93453/attachment.htm>

From neteler at osgeo.org  Tue Jan 30 13:51:24 2024
From: neteler at osgeo.org (Markus Neteler)
Date: Tue, 30 Jan 2024 22:51:24 +0100
Subject: [gdal-dev] Is there any RHEL repo for relatively new GDAL
 versions?
In-Reply-To: <30ecbe68-674f-47c3-8ba4-5d3313d69242@spatialys.com>
References: <DB9PR09MB6887E163666FFD1B96BD79E2FD7D2@DB9PR09MB6887.eurprd09.prod.outlook.com>
 <30ecbe68-674f-47c3-8ba4-5d3313d69242@spatialys.com>
Message-ID: <CALFmHhtV+kcmxtppTG2Mdy50L936PBjH0eRGaMuWhFamaoOBrQ@mail.gmail.com>

Hi Jukka,

On Tue, Jan 30, 2024 at 4:50?PM Even Rouault via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> Hi Jukka,
>
> this is a unfortunate move. You may have to create a custom package, possibly inspired from src.rpm from recent Fedora (https://src.fedoraproject.org/rpms/gdal).

I was about to send this link but Even was faster :-)

> I see Markus Neteler did one for GDAL 3.0.4 for RHEL 7 in https://copr.fedorainfracloud.org/coprs/neteler/GDAL/

I can (try to) build a fresher version in COPR.

[...]
> By our agency?s IT policy compiling GDAL by ourselves is not possible. Can anyone suggest other acceptable means for getting at least GDAL 3.7 for RHEL 8?

Let me try to compile it.

Best,
Markus

-- 
Markus Neteler, PhD
https://www.mundialis.de - company
https://grass.osgeo.org - FOSS
https://neteler.org - blog & freelancing

From mdsumner at gmail.com  Tue Jan 30 16:37:28 2024
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed, 31 Jan 2024 11:37:28 +1100
Subject: [gdal-dev] Virtual Raster Tile Index (VRTTI) driver,
 and associated gdaltindex improvements
In-Reply-To: <8126a938-3f24-4376-beb1-c702561c3a53@spatialys.com>
References: <abdbd4f2-38d7-45c5-9f79-a72c0fbfddcb@spatialys.com>
 <4367a9c2-084f-4e30-a39e-d379d5a06b06@spatialys.com>
 <CAAcGz9_OBkQ-ZdnN-RWD2r9xTVQ8nv5ds=qk4MpATzgjO7+M5w@mail.gmail.com>
 <3f239767-0f8e-4d5c-a3d0-e63d9bb234ad@spatialys.com>
 <8126a938-3f24-4376-beb1-c702561c3a53@spatialys.com>
Message-ID: <CAAcGz9_qY_u_hOMxuGhkMSHGecptZzooVj-G3feFk-vFLWW=gA@mail.gmail.com>

just to follow up, I got it all working in latest GDAL:

script at

https://github.com/mdsumner/cog-example/blob/main/gti/cop90.py

creates dsn

/vsicurl/https://github.com/mdsumner/cog-example/raw/main/gti/cop90.gti.fgb

which works nicely, thanks!

Cheers, Mike



On Tue, Jan 30, 2024 at 10:57?PM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> as you could also attach the XRES, YRES, BANDCOUNT, etc. metadata items
> that would help the GTI driver avoid probing one of the tiles.
>
> PS: OGRLayer::SetMetadataItem(key, value) only works on FlatGeoBuf and
> GPKG drivers with latest master as well
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Michael Sumner
Software and Database Engineer
Australian Antarctic Division
Hobart, Australia
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/9d24eff7/attachment.htm>

From even.rouault at spatialys.com  Tue Jan 30 17:17:00 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Jan 2024 02:17:00 +0100
Subject: [gdal-dev] Virtual Raster Tile Index (VRTTI) driver,
 and associated gdaltindex improvements
In-Reply-To: <CAAcGz9_qY_u_hOMxuGhkMSHGecptZzooVj-G3feFk-vFLWW=gA@mail.gmail.com>
References: <abdbd4f2-38d7-45c5-9f79-a72c0fbfddcb@spatialys.com>
 <4367a9c2-084f-4e30-a39e-d379d5a06b06@spatialys.com>
 <CAAcGz9_OBkQ-ZdnN-RWD2r9xTVQ8nv5ds=qk4MpATzgjO7+M5w@mail.gmail.com>
 <3f239767-0f8e-4d5c-a3d0-e63d9bb234ad@spatialys.com>
 <8126a938-3f24-4376-beb1-c702561c3a53@spatialys.com>
 <CAAcGz9_qY_u_hOMxuGhkMSHGecptZzooVj-G3feFk-vFLWW=gA@mail.gmail.com>
Message-ID: <27b2763f-bd0e-4e02-8ffc-7f13f33f63d2@spatialys.com>

Hint: use EPSG:4326 for the SRS of the .gti.fgb, because this is the SRS 
of the tiles.? The GTI driver isn't smart enough to figure out that 
OGC:CRS84 ~= EPSG:4326, and thus a rather dummy on-the-fly warping is done.

Le 31/01/2024 ? 01:37, Michael Sumner a ?crit?:
> just to follow up, I got it all working in latest GDAL:
>
> script at
>
> https://github.com/mdsumner/cog-example/blob/main/gti/cop90.py
>
> creates dsn
>
> /vsicurl/https://github.com/mdsumner/cog-example/raw/main/gti/cop90.gti.fgb
>
> which works nicely, thanks!
>
> Cheers, Mike
>
>
>
> On Tue, Jan 30, 2024 at 10:57?PM Even Rouault 
> <even.rouault at spatialys.com> wrote:
>
>
>>     as you could also attach the XRES, YRES, BANDCOUNT, etc. metadata
>>     items that would help the GTI driver avoid probing one of the tiles.
>>
>     PS: OGRLayer::SetMetadataItem(key, value) only works on FlatGeoBuf
>     and GPKG drivers with latest master as well
>
>     -- 
>     http://www.spatialys.com
>     My software is free, but my time generally not.
>
>
>
> -- 
> Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> Hobart, Australia
> e-mail: mdsumner at gmail.com

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/4887083d/attachment.htm>

From rayg at daylongraphics.com  Tue Jan 30 18:44:38 2024
From: rayg at daylongraphics.com (Ray at Daylon)
Date: Tue, 30 Jan 2024 18:44:38 -0800
Subject: [gdal-dev] Lost error messages
In-Reply-To: <ab43c24e-31fb-4700-8c42-35c2cb578d9f@spatialys.com>
References: <2BAF8607-689A-4F17-A46D-E835780F08C5@hobu.co>
 <e3af4336-6294-434e-a5c7-15cfd6721813@daylongraphics.com>
 <ab43c24e-31fb-4700-8c42-35c2cb578d9f@spatialys.com>
Message-ID: <35e023ae-067a-49a3-952b-54c12f6ae89e@daylongraphics.com>

Evan,

On 1/30/2024 3:26 AM, Even Rouault wrote:
> Ray,
> 
> Le 30/01/2024 ? 05:43, Ray at Daylon via gdal-dev a ?crit?:
>> I was tracing through the TIGER/Line OGR driver and noticed that
>> it calls OGRTigerDataSource::Open with the bTestOpen parameter
>> set to TRUE, causing that function to skip calling CPLError
>> and only return FALSE if an error happens.
>>
>> This causes an interesting situation: an app can have the TIGER driver 
>> fail, but not be told why. Calling CPLGetLastErrorXXX doesn't help 
>> because no error condition was formally reported.
>>
>> Is there a reason why bTestOpen is set to TRUE? Shouldn't
>> full error reporting be the default? If this parameter is
>> important, shouldn't it be part of the driver API so an app
>> can set it to get errors described?
> 
> I presume this is mostly a copy&paste pattern borrowed from the 
> Shapefile driver. Basically the reason to be silent in most situations 
> is that the Tiger driver opens a directory, and there's no easy way to 
> know in advance if a directory belongs to the Tiger driver, or the 
> Shapefile one, or the MITAB one, or etc.. than iterating over its files 
> and checking if they have? extensions that look like a Tiger dataset. So 
> failure of finding such file shouldn't trigger a verbose error, 
> otherwise this would prevent other drivers to also try checking if they 
> recognize the content of the directory.
> 
> And congratulations: you're the first user in recent times I'm aware of 
> to have interest in that driver ;-) Or perhaps that was just accidental?
> 
> Even
> 
Thanks. My interest was that TIGER is a supported format in Leveller, so 
I need to ensure the user experience for error reporting is valid. What 
happened was that when Leveller starts, it loads up some UI textures 
that are in TIFF format, but because those files have unsorted tags, the 
TIFF driver calls CPLError with a warning about unsorted TIFF directories.

Then, when one goes to import a TIGER dataset and there's a read error, 
the TIGER driver returns FALSE w/o calling CPLError, and Leveller calls 
CPLGetLastError which returns the earlier TIFF warning, which is of 
course of no help at this point. If the TIFF textures had been okay, 
then there'd be no error text at all, which would be equally unhelpful.

 From what you explained, it seems like the TIGER (and NTF) dataset open 
logic tried to solve a problem at the wrong place -- it is nice to have 
apps that can try different drivers to figure out a dataset format on 
their own, but the driver shouldn't hide error messages on the app's 
behalf, and it shouldn't output error messages (to console, e.g.) on its 
behalf either. The latter can be fixed using the existing hook API, but 
the message hiding still needs to be addressed. Maybe add a "Hide errors 
when opening" driver API and default it to true in the TIGER and NTF 
drivers to preserve the existing behavior?

(There may be other drivers with the same problem; I haven't had time to 
do an exhaustive check).

Ray

From even.rouault at spatialys.com  Wed Jan 31 01:39:41 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Jan 2024 10:39:41 +0100
Subject: [gdal-dev] Lost error messages
In-Reply-To: <35e023ae-067a-49a3-952b-54c12f6ae89e@daylongraphics.com>
References: <2BAF8607-689A-4F17-A46D-E835780F08C5@hobu.co>
 <e3af4336-6294-434e-a5c7-15cfd6721813@daylongraphics.com>
 <ab43c24e-31fb-4700-8c42-35c2cb578d9f@spatialys.com>
 <35e023ae-067a-49a3-952b-54c12f6ae89e@daylongraphics.com>
Message-ID: <19215634-7c05-42ba-8e19-a6335e844a50@spatialys.com>

Ray,
>>
> Thanks. My interest was that TIGER is a supported format in Leveller, 
> so I need to ensure the user experience for error reporting is valid.
And are there really real TIGER users :-)? AFAICS this format is for an 
antiquated version of TIGER datasets that is no longer produced.

>
> Then, when one goes to import a TIGER dataset and there's a read error,
Where exactly? Perhaps something missing to add.
> the TIGER driver returns FALSE w/o calling CPLError, and Leveller 
> calls CPLGetLastError which returns the earlier TIFF warning, which is 
> of course of no help at this point. If the TIFF textures had been 
> okay, then there'd be no error text at all, which would be equally 
> unhelpful.

I don't understand the connection between the GeoTIFF driver and the 
TIGER one. They shouldn't be probed together as one is for raster, and 
the other one vector.

And each time GDALOpenEx() is called it starts with a CPLErrorReset()

>
> From what you explained, it seems like the TIGER (and NTF) dataset 
> open logic tried to solve a problem at the wrong place -- it is nice 
> to have apps that can try different drivers to figure out a dataset 
> format on their own, but the driver shouldn't hide error messages on 
> the app's behalf, and it shouldn't output error messages (to console, 
> e.g.) on its behalf either. The latter can be fixed using the existing 
> hook API, but the message hiding still needs to be addressed. Maybe 
> add a "Hide errors when opening" driver API and default it to true in 
> the TIGER and NTF drivers to preserve the existing behavior?

A new option would be odd. The best probably would be that you come with 
a reproducer, and a PR to address the missing error message

Even



-- 
http://www.spatialys.com
My software is free, but my time generally not.


From zrh at aaaaasoft.com  Wed Jan 31 03:28:00 2024
From: zrh at aaaaasoft.com (zrh)
Date: Wed, 31 Jan 2024 19:28:00 +0800
Subject: [gdal-dev] When use GDALInfo.exe to open a large size BMP file,
 Error 4 comes
Message-ID: <202401311927549520559@aaaaasoft.com>

Hi, everyone,

I have 2 BMP files, huge size:

The first one:

E:\w8.bmp,   size=12,884,901,942 bytes

the file header:
42 4D 00 00 00 00 00 00 00 00 36 00 00 00 28 00 00 00 00 00 01 00 00 00 01 00 01 00 18 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

The second one:

E:\w9.bmp, size=51,438,944,310 bytes

the file header:
42 4D 00 00 00 00 00 00 00 00 36 00 00 00 28 00 00 00 00 FF 01 00 00 00 02 00 01 00 18 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00

My problem is:

When I run Gdalinfo.exe:


C:\OSGeo4W\bin>gdalinfo E:\w8.bmp
ERROR 4: `E:\w8.bmp' not recognized as a supported file format.
gdalinfo failed - unable to open 'E:\w8.bmp'.

But E:\w9.bmp is OK.

Why? Please help!

Best regards,



--------------



zrh



From even.rouault at spatialys.com  Wed Jan 31 03:42:10 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Jan 2024 12:42:10 +0100
Subject: [gdal-dev] When use GDALInfo.exe to open a large size BMP file,
 Error 4 comes
In-Reply-To: <202401311927549520559@aaaaasoft.com>
References: <202401311927549520559@aaaaasoft.com>
Message-ID: <23d2893c-a21c-4139-8f83-fd5256ebe776@spatialys.com>

Hi,

nothing suspicious from a quick look, but I must confess I'm not 
BMP-header-decoding-from-hex-string fluent, so I might have missed 
something. It would help if you could extract the first kilobyte of the 
file and attach it

Even

Le 31/01/2024 ? 12:28, zrh via gdal-dev a ?crit?:
> Hi, everyone,
>
> I have 2 BMP files, huge size:
>
> The first one:
>
> E:\w8.bmp,   size=12,884,901,942 bytes
>
> the file header:
> 42 4D 00 00 00 00 00 00 00 00 36 00 00 00 28 00 00 00 00 00 01 00 00 00 01 00 01 00 18 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
>
> The second one:
>
> E:\w9.bmp, size=51,438,944,310 bytes
>
> the file header:
> 42 4D 00 00 00 00 00 00 00 00 36 00 00 00 28 00 00 00 00 FF 01 00 00 00 02 00 01 00 18 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
>
> My problem is:
>
> When I run Gdalinfo.exe:
>
>
> C:\OSGeo4W\bin>gdalinfo E:\w8.bmp
> ERROR 4: `E:\w8.bmp' not recognized as a supported file format.
> gdalinfo failed - unable to open 'E:\w8.bmp'.
>
> But E:\w9.bmp is OK.
>
> Why? Please help!
>
> Best regards,
>
>
>
> --------------
>
>
>
> zrh
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Wed Jan 31 08:13:08 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Jan 2024 17:13:08 +0100
Subject: [gdal-dev] When use GDALInfo.exe to open a large size BMP file,
 Error 4 comes
In-Reply-To: <202401311927549520559@aaaaasoft.com>
References: <202401311927549520559@aaaaasoft.com>
Message-ID: <8fbd003f-ff41-45e3-8ac4-de57bc9980e1@spatialys.com>

Issue confirmed (actual file was needed) and fix queued in 
https://github.com/OSGeo/gdal/pull/9168

Even

Le 31/01/2024 ? 12:28, zrh via gdal-dev a ?crit?:
> Hi, everyone,
>
> I have 2 BMP files, huge size:
>
> The first one:
>
> E:\w8.bmp,   size=12,884,901,942 bytes
>
> the file header:
> 42 4D 00 00 00 00 00 00 00 00 36 00 00 00 28 00 00 00 00 00 01 00 00 00 01 00 01 00 18 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
>
> The second one:
>
> E:\w9.bmp, size=51,438,944,310 bytes
>
> the file header:
> 42 4D 00 00 00 00 00 00 00 00 36 00 00 00 28 00 00 00 00 FF 01 00 00 00 02 00 01 00 18 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
>
> My problem is:
>
> When I run Gdalinfo.exe:
>
>
> C:\OSGeo4W\bin>gdalinfo E:\w8.bmp
> ERROR 4: `E:\w8.bmp' not recognized as a supported file format.
> gdalinfo failed - unable to open 'E:\w8.bmp'.
>
> But E:\w9.bmp is OK.
>
> Why? Please help!
>
> Best regards,
>
>
>
> --------------
>
>
>
> zrh
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From ni_hao88 at hotmail.com  Wed Jan 31 09:03:46 2024
From: ni_hao88 at hotmail.com (ni hao)
Date: Wed, 31 Jan 2024 17:03:46 +0000
Subject: [gdal-dev] gdal_merge with jython
Message-ID: <DM5PR02MB3862DB3891443C699225F612F17C2@DM5PR02MB3862.namprd02.prod.outlook.com>

Dear list,

I am using Java to call gdal_merge(), but having troubles.
Are there examples or tips?

Thank you!

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/1614b586/attachment.htm>

From Matt.Wilkie at yukon.ca  Wed Jan 31 11:22:57 2024
From: Matt.Wilkie at yukon.ca (Matt.Wilkie)
Date: Wed, 31 Jan 2024 19:22:57 +0000
Subject: [gdal-dev] Unknown projection
Message-ID: <YT3PR01MB559058A7367D86E3984848FA877C2@YT3PR01MB5590.CANPRD01.PROD.OUTLOOK.COM>

Hello gdal,

I have a collection of aerial photos for which neither gdal nor arc pro recognize the projection. To my eye the .prj files look ok. Attached txt is gdalinfo v3.8.0 report along with the .prj. I manually formatted the below for readability:

PROJCS["UTM_07N",
    GEOGCS["NAD83-CSRS Epoch 2006 (7 Param+Vel)",
        DATUM["NAD83-CSRS Epoch 2006 (7 Param+Vel)",
            SPHEROID["GRS 80", 6378137,298.2572221010002],
            TOWGS84[1.0026,-1.9083,-0.5165, 1.288877171229702e-07, 8.998141921392988e-09, 5.376098909823645e-08, -1.18e-09]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]
        ],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-141],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metres",1]
    ]

Thanks!
Matt Wilkie
Geomatics Developer & Administrator
Environment | Technology, Innovation and Mapping
T 867-667-8133 | Yukon.ca<http://yukon.ca/>
Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/bc95fb4f/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 047_0001.prj
Type: application/octet-stream
Size: 534 bytes
Desc: 047_0001.prj
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/bc95fb4f/attachment.obj>
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: 047_0001.txt
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/bc95fb4f/attachment.txt>

From even.rouault at spatialys.com  Wed Jan 31 11:54:30 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Jan 2024 20:54:30 +0100
Subject: [gdal-dev] Unknown projection
In-Reply-To: <YT3PR01MB559058A7367D86E3984848FA877C2@YT3PR01MB5590.CANPRD01.PROD.OUTLOOK.COM>
References: <YT3PR01MB559058A7367D86E3984848FA877C2@YT3PR01MB5590.CANPRD01.PROD.OUTLOOK.COM>
Message-ID: <2b58cfbe-b292-4b16-a3fc-bfdaa232a383@spatialys.com>

Matt,

surprisingly or not, the GTiff driver doesn't try to get the SRS from a 
.prj side car file.

So just do

gdal_edit.py 047_0001.tif -a_srs "$(cat 047_0001.prj)"

Even

Le 31/01/2024 ? 20:22, Matt.Wilkie via gdal-dev a ?crit?:
>
> Hello gdal,
>
> I have a collection of aerial photos for which neither gdal nor arc 
> pro recognize the projection. To my eye the .prj files look ok. 
> Attached txt is gdalinfo v3.8.0 report along with the .prj. I manually 
> formatted the below for readability:
>
> PROJCS["UTM_07N",
>
> ??? GEOGCS["NAD83-CSRS Epoch 2006 (7 Param+Vel)",
>
> ??????? DATUM["NAD83-CSRS Epoch 2006 (7 Param+Vel)",
>
> ??????????? SPHEROID["GRS 80", 6378137,298.2572221010002],
>
> ??????????? TOWGS84[1.0026,-1.9083,-0.5165, 1.288877171229702e-07, 
> 8.998141921392988e-09, 5.376098909823645e-08, -1.18e-09]],
>
> ??????? PRIMEM["Greenwich",0],
>
> ??????? UNIT["degree",0.0174532925199433]
>
> ??????? ],
>
> ??? PROJECTION["Transverse_Mercator"],
>
> ??? PARAMETER["latitude_of_origin",0],
>
> ??? PARAMETER["central_meridian",-141],
>
> ??? PARAMETER["scale_factor",0.9996],
>
> ??? PARAMETER["false_easting",500000],
>
> ??? PARAMETER["false_northing",0],
>
> ??? UNIT["metres",1]
>
> ??? ]
>
> Thanks!
>
> *Matt Wilkie*
>
> Geomatics Developer & Administrator
>
> Environment | Technology, Innovation and Mapping
>
> T 867-667-8133 | _Yukon.ca <http://yukon.ca/>_
>
> /Hours: 08:30-16:30, Mon-Wed: Office, Thu: Remote, Fri: Away./
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/4010b83e/attachment-0001.htm>

From fitch at astraea.io  Wed Jan 31 12:38:53 2024
From: fitch at astraea.io (Fitch, Simeon)
Date: Wed, 31 Jan 2024 15:38:53 -0500
Subject: [gdal-dev] GDALWarpOptions vs GDALWarpAppOptions
Message-ID: <CAAsstvEbfAQUKjNf2NWc7+m4fguzyZvdsaZWVX8GoCGt05Q15w@mail.gmail.com>

I'm on the `georust/gdal` bindings team, working on the warp routines, and
trying to understand the relationship between GDALWarpOptions vs
GDALWarpAppOptions.

I'm not seeing any way to create a GDALWarpOptions from a
GDALWarpAppOptions or vice versa. Are functions needing GDALWarpOptions in
a completely different universe from ones needing GDALWarpAppOptions?

GDALWarpOptions seems clear, with requisite C functions for
manipulating it, whereas GDALWarpAppOptions seems to only accept key/value
pairs via GDALWarpAppOptionsSetWarpOption, which seems quite limiting.

I was hoping to provide users a single entry point for specifying warp
options, but wanted some expert advice before going down a dead end.

Thanks!

Simeon

-- 
Simeon Fitch
Co-founder & CTO
Astraea, Inc.

-- 
The content of this email is intended for the person or entity to which it 
is addressed only. This email may contain confidential information. If you 
are not the person to whom this message is addressed, be aware that any 
use, reproduction, or distribution of this message is strictly prohibited. 
If you received this in error, please contact the sender and immediately 
delete this email and any attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/d643036b/attachment.htm>

From even.rouault at spatialys.com  Wed Jan 31 12:52:22 2024
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Jan 2024 21:52:22 +0100
Subject: [gdal-dev] GDALWarpOptions vs GDALWarpAppOptions
In-Reply-To: <CAAsstvEbfAQUKjNf2NWc7+m4fguzyZvdsaZWVX8GoCGt05Q15w@mail.gmail.com>
References: <CAAsstvEbfAQUKjNf2NWc7+m4fguzyZvdsaZWVX8GoCGt05Q15w@mail.gmail.com>
Message-ID: <9006e50c-39c7-4bf6-9485-d5a80609c37b@spatialys.com>

Simeon,

Le 31/01/2024 ? 21:38, Fitch, Simeon via gdal-dev a ?crit?:
> I'm on the `georust/gdal` bindings team, working on the warp routines, 
> and trying to understand the relationship between?GDALWarpOptions vs 
> GDALWarpAppOptions.
>
> I'm not seeing any way to create a GDALWarpOptions from a 
> GDALWarpAppOptions or vice versa. Are functions needing 
> GDALWarpOptions in a completely different universe from ones 
> needing?GDALWarpAppOptions?

Yes. GDALWarpOptions is for the lower level API from gdalwarper.h


> GDALWarpOptions seems clear, with requisite C functions for 
> manipulating?it, whereas?GDALWarpAppOptions seems to only accept 
> key/value pairs via?GDALWarpAppOptionsSetWarpOption, which seems quite 
> limiting.

GDALWarpAppOptions is for the higher level gdalwarp C API. Actually most 
of the options are to be provided through the papszArgv parameter of the 
GDALWarpAppOptionsNew() function.? I'm not sure to remember why the 
GDALWarpAppOptionsSetWarpOption() function was added, since it is 
redundant to passing "-wo", "{KEY}={VALUE}" as papszArgv values.

I recognize that key/value pairs or strings are admittedly not super 
structured, but they are easily extensible in a way that is compatible 
of a stable C API/ABI.


>
> I was hoping to provide users a single entry point for specifying?warp 
> options, but wanted some expert?advice before going?down a dead end.

I guess both API could be mapped.? GDALWarp() is probably easier for 
most users as it combines different low level methods, like calling 
GDALSuggestedWarpOutput2() to find the target extent and resolution, 
creating the new dataset, etc. If you look at gdalwarp_lib.cpp, you'll 
find there are lots of heuristics there.

Nothing prevents you to provide a more Rustacean API than the 
string-based one of GDALWarp(). The Python bindings for examples provide 
a way of providing the options as keyword options:


WarpOptions(options=None, format=None, srcBands=None, dstBands=None, 
outputBounds=None, outputBoundsSRS=None, xRes=None, yRes=None, 
targetAlignedPixels=False, width=0, height=0, srcSRS=None, dstSRS=None, 
coordinateOperation=None, srcAlpha=None, dstAlpha=False, 
warpOptions=None, errorThreshold=None, warpMemoryLimit=None, 
creationOptions=None, outputType=0, workingType=0, resampleAlg=None, 
srcNodata=None, dstNodata=None, multithread=False, tps=False, rpc=False, 
geoloc=False, polynomialOrder=None, transformerOptions=None, 
cutlineDSName=None, cutlineLayer=None, cutlineWhere=None, 
cutlineSQL=None, cutlineBlend=None, cropToCutline=False, 
copyMetadata=True, metadataConflictValue=None, 
setColorInterpretation=False, overviewLevel='AUTO', callback=None, 
callback_data=None)
 ??? Create a WarpOptions() object that can be passed to gdal.Warp()

 ??? Parameters
 ??? ----------
 ??? options:
 ??????? can be be an array of strings, a string or let empty and filled 
from other keywords.
 ??? format:
 ??????? output format ("GTiff", etc...)
 ??? srcBands:
 ??????? list of source band numbers (between 1 and the number of input 
bands)
 ??? dstBands:
 ??????? list of output band numbers
 ??? outputBounds:
 ??????? output bounds as (minX, minY, maxX, maxY) in target SRS
 ??? outputBoundsSRS:
 ??????? SRS in which output bounds are expressed, in the case they are 
not expressed in dstSRS
 ??? xRes:
 ??????? output resolution in target SRS
 ??? yRes:
 ??????? output resolution in target SRS
 ??? targetAlignedPixels:
 ??????? whether to force output bounds to be multiple of output resolution
 ??? width:
 ??????? width of the output raster in pixel
 ??? height:
 ??????? height of the output raster in pixel
 ??? srcSRS:
 ??????? source SRS
 ??? dstSRS:
 ??????? output SRS
 ??? coordinateOperation:
 ??????? coordinate operation as a PROJ string or WKT string
 ??? srcAlpha:
 ??????? whether to force the last band of the input dataset to be 
considered as an alpha band.
 ??????? If set to False, source alpha warping will be disabled.
 ??? dstAlpha:
 ??????? whether to force the creation of an output alpha band
 ??? outputType:
 ??????? output type (gdalconst.GDT_Byte, etc...)
 ??? workingType:
 ??????? working type (gdalconst.GDT_Byte, etc...)
 ??? warpOptions:
 ??????? list or dict of warping options
 ??? errorThreshold:
 ??????? error threshold for approximation transformer (in pixels)
 ??? warpMemoryLimit:
 ??????? size of working buffer in MB
 ??? resampleAlg:
 ??????? resampling mode
 ??? creationOptions:
 ??????? list or dict of creation options
 ??? srcNodata:
 ??????? source nodata value(s)
 ??? dstNodata:
 ??????? output nodata value(s)
 ??? multithread:
 ??????? whether to multithread computation and I/O operations
 ??? tps:
 ??????? whether to use Thin Plate Spline GCP transformer
 ??? rpc:
 ??????? whether to use RPC transformer
 ??? geoloc:
 ??????? whether to use GeoLocation array transformer
 ??? polynomialOrder:
 ??????? order of polynomial GCP interpolation
 ??? transformerOptions:
 ??????? list or dict of transformer options
 ??? cutlineDSName:
 ??????? cutline dataset name
 ??? cutlineLayer:
 ??????? cutline layer name
 ??? cutlineWhere:
 ??????? cutline WHERE clause
 ??? cutlineSQL:
 ??????? cutline SQL statement
 ??? cutlineBlend:
 ??????? cutline blend distance in pixels
 ??? cropToCutline:
 ??????? whether to use cutline extent for output bounds
 ??? copyMetadata:
 ??????? whether to copy source metadata
 ??? metadataConflictValue:
 ??????? metadata data conflict value
 ??? setColorInterpretation:
 ??????? whether to force color interpretation of input bands to output 
bands
 ??? overviewLevel:
 ??????? To specify which overview level of source files must be used
 ??? callback:
 ??????? callback method
 ??? callback_data:
 ??????? user data for callback


Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/298bdc1b/attachment.htm>

From fitch at astraea.io  Wed Jan 31 13:04:46 2024
From: fitch at astraea.io (Fitch, Simeon)
Date: Wed, 31 Jan 2024 16:04:46 -0500
Subject: [gdal-dev] GDALWarpOptions vs GDALWarpAppOptions
In-Reply-To: <9006e50c-39c7-4bf6-9485-d5a80609c37b@spatialys.com>
References: <CAAsstvEbfAQUKjNf2NWc7+m4fguzyZvdsaZWVX8GoCGt05Q15w@mail.gmail.com>
 <9006e50c-39c7-4bf6-9485-d5a80609c37b@spatialys.com>
Message-ID: <CAAsstvG9_aCZGbK9D-n-U5somQGz6jW_E+zfokjg8asYn0PSpQ@mail.gmail.com>

Super helpful. I was incorrectly thinking of `GDALWarp` as the lower-level
entrypoint that the other warper calls used, which is where I got confused.
Sounds like `GDALWarp` is basically the entrypoint for the `gdalwarp`
executable, hence the string-oriented API. I should go back and study the
C++ code again.

I'll check out the pythonic binding for further inspiration.

Simeon

On Wed, Jan 31, 2024 at 3:52?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Simeon,
> Le 31/01/2024 ? 21:38, Fitch, Simeon via gdal-dev a ?crit :
>
> I'm on the `georust/gdal` bindings team, working on the warp routines, and
> trying to understand the relationship between GDALWarpOptions vs
> GDALWarpAppOptions.
>
> I'm not seeing any way to create a GDALWarpOptions from a
> GDALWarpAppOptions or vice versa. Are functions needing GDALWarpOptions in
> a completely different universe from ones needing GDALWarpAppOptions?
>
> Yes. GDALWarpOptions is for the lower level API from gdalwarper.h
>
> GDALWarpOptions seems clear, with requisite C functions for
> manipulating it, whereas GDALWarpAppOptions seems to only accept key/value
> pairs via GDALWarpAppOptionsSetWarpOption, which seems quite limiting.
>
> GDALWarpAppOptions is for the higher level gdalwarp C API. Actually most
> of the options are to be provided through the papszArgv parameter of the
> GDALWarpAppOptionsNew() function.  I'm not sure to remember why the
> GDALWarpAppOptionsSetWarpOption() function was added, since it is redundant
> to passing "-wo", "{KEY}={VALUE}" as papszArgv values.
>
> I recognize that key/value pairs or strings are admittedly not super
> structured, but they are easily extensible in a way that is compatible of a
> stable C API/ABI.
>
>
> I was hoping to provide users a single entry point for specifying warp
> options, but wanted some expert advice before going down a dead end.
>
> I guess both API could be mapped.  GDALWarp() is probably easier for most
> users as it combines different low level methods, like calling
> GDALSuggestedWarpOutput2() to find the target extent and resolution,
> creating the new dataset, etc. If you look at gdalwarp_lib.cpp, you'll find
> there are lots of heuristics there.
>
> Nothing prevents you to provide a more Rustacean API than the
> string-based one of GDALWarp(). The Python bindings for examples provide a
> way of providing the options as keyword options:
>
>
> WarpOptions(options=None, format=None, srcBands=None, dstBands=None,
> outputBounds=None, outputBoundsSRS=None, xRes=None, yRes=None,
> targetAlignedPixels=False, width=0, height=0, srcSRS=None, dstSRS=None,
> coordinateOperation=None, srcAlpha=None, dstAlpha=False, warpOptions=None,
> errorThreshold=None, warpMemoryLimit=None, creationOptions=None,
> outputType=0, workingType=0, resampleAlg=None, srcNodata=None,
> dstNodata=None, multithread=False, tps=False, rpc=False, geoloc=False,
> polynomialOrder=None, transformerOptions=None, cutlineDSName=None,
> cutlineLayer=None, cutlineWhere=None, cutlineSQL=None, cutlineBlend=None,
> cropToCutline=False, copyMetadata=True, metadataConflictValue=None,
> setColorInterpretation=False, overviewLevel='AUTO', callback=None,
> callback_data=None)
>     Create a WarpOptions() object that can be passed to gdal.Warp()
>
>     Parameters
>     ----------
>     options:
>         can be be an array of strings, a string or let empty and filled
> from other keywords.
>     format:
>         output format ("GTiff", etc...)
>     srcBands:
>         list of source band numbers (between 1 and the number of input
> bands)
>     dstBands:
>         list of output band numbers
>     outputBounds:
>         output bounds as (minX, minY, maxX, maxY) in target SRS
>     outputBoundsSRS:
>         SRS in which output bounds are expressed, in the case they are not
> expressed in dstSRS
>     xRes:
>         output resolution in target SRS
>     yRes:
>         output resolution in target SRS
>     targetAlignedPixels:
>         whether to force output bounds to be multiple of output resolution
>     width:
>         width of the output raster in pixel
>     height:
>         height of the output raster in pixel
>     srcSRS:
>         source SRS
>     dstSRS:
>         output SRS
>     coordinateOperation:
>         coordinate operation as a PROJ string or WKT string
>     srcAlpha:
>         whether to force the last band of the input dataset to be
> considered as an alpha band.
>         If set to False, source alpha warping will be disabled.
>     dstAlpha:
>         whether to force the creation of an output alpha band
>     outputType:
>         output type (gdalconst.GDT_Byte, etc...)
>     workingType:
>         working type (gdalconst.GDT_Byte, etc...)
>     warpOptions:
>         list or dict of warping options
>     errorThreshold:
>         error threshold for approximation transformer (in pixels)
>     warpMemoryLimit:
>         size of working buffer in MB
>     resampleAlg:
>         resampling mode
>     creationOptions:
>         list or dict of creation options
>     srcNodata:
>         source nodata value(s)
>     dstNodata:
>         output nodata value(s)
>     multithread:
>         whether to multithread computation and I/O operations
>     tps:
>         whether to use Thin Plate Spline GCP transformer
>     rpc:
>         whether to use RPC transformer
>     geoloc:
>         whether to use GeoLocation array transformer
>     polynomialOrder:
>         order of polynomial GCP interpolation
>     transformerOptions:
>         list or dict of transformer options
>     cutlineDSName:
>         cutline dataset name
>     cutlineLayer:
>         cutline layer name
>     cutlineWhere:
>         cutline WHERE clause
>     cutlineSQL:
>         cutline SQL statement
>     cutlineBlend:
>         cutline blend distance in pixels
>     cropToCutline:
>         whether to use cutline extent for output bounds
>     copyMetadata:
>         whether to copy source metadata
>     metadataConflictValue:
>         metadata data conflict value
>     setColorInterpretation:
>         whether to force color interpretation of input bands to output
> bands
>     overviewLevel:
>         To specify which overview level of source files must be used
>     callback:
>         callback method
>     callback_data:
>         user data for callback
>
>
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
The content of this email is intended for the person or entity to which it 
is addressed only. This email may contain confidential information. If you 
are not the person to whom this message is addressed, be aware that any 
use, reproduction, or distribution of this message is strictly prohibited. 
If you received this in error, please contact the sender and immediately 
delete this email and any attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/29238af1/attachment-0001.htm>

From tfuruya6 at gatech.edu  Wed Jan 31 15:53:18 2024
From: tfuruya6 at gatech.edu (Furuya, Takahiro)
Date: Wed, 31 Jan 2024 23:53:18 +0000
Subject: [gdal-dev] gdal_translate shifted values
Message-ID: <5EDBFA8B-1209-40E6-B81F-96B86487EFE7@gatech.edu>

Hi gdal-dev, I am Takahiro, a student who is using gdal_translate.
I have an issue with gdal_translate and would like to ask a question.
I used gdal_translate to transform a NCEP GRIB file (downloadable from https://data.eol.ucar.edu/cgi-bin/codiac/fgr_form/id=21.093, or attached to this email) to GeoTiff, and compare those 2 data formats. The command I used is
>gdal_translate -of GTiff st4_pr.2017092016.01h st4_pr.2017092016.01h.tif

(The GRIB file I used was st4_pr.2017092016.01h, which can be downloaded from the above link by specifying ?Begin Date/Time? to ?20170920?/?15:00:00?  and ?End Date/Time? to ?20170920?/?15:59:59?.)

Then I read the 2 data files in R and checked if the original value at a certain grid cell in the GRIB file remained at the same grid cell in the GeoTiff file, but the value was shifted by 6 rows (the value I checked was 9.75 [mm/hour] that was stored in index [100,86] in the original GRIB file, but it was shifted to [106,86] in the GeoTiff file).

You can see the Python script used for reading the original GRIB file here: https://bpa.st/ZNOSI
The R script used for checking the tif-translated data: https://bpa.st/WZLSY

The version of gdal_translate I used is 3.0.2.
Is this a known issue of gdal_translate? Or is this issue not supposed to happen (is this the mistake of my side?)?

Best regards,
Takahiro



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/9d0857be/attachment.htm>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: st4_pr.2017092016.01h
Type: application/octet-stream
Size: 10174 bytes
Desc: st4_pr.2017092016.01h
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20240131/9d0857be/attachment.obj>

From public at postholer.com  Wed Jan 31 16:02:25 2024
From: public at postholer.com (Scott)
Date: Wed, 31 Jan 2024 16:02:25 -0800
Subject: [gdal-dev] gdal_translate shifted values
In-Reply-To: <5EDBFA8B-1209-40E6-B81F-96B86487EFE7@gatech.edu>
References: <5EDBFA8B-1209-40E6-B81F-96B86487EFE7@gatech.edu>
Message-ID: <2687d05b-093a-4592-ac3f-9634257562b2@postholer.com>

I'd check both files *before* all the processing. Something like:

gdallocationinfo -l_srs EPSG:4326 gribFile -110 40

gdallocationinfo -l_srs EPSG:4326 tiffFile -110 40

That will tell narrow it down.



On 1/31/24 15:53, Furuya, Takahiro via gdal-dev wrote:
> Hi gdal-dev, I am Takahiro, a student who is using gdal_translate.
> I have an issue with gdal_translate and would like to ask a question.
> I used gdal_translate to transform a NCEP GRIB file (downloadable from 
> https://data.eol.ucar.edu/cgi-bin/codiac/fgr_form/id=21.093 
> <https://data.eol.ucar.edu/cgi-bin/codiac/fgr_form/id=21.093>, or 
> attached to this email) to GeoTiff, and compare those 2 data formats. 
> The command I used is
>  >gdal_translate -of GTiff st4_pr.2017092016.01h st4_pr.2017092016.01h.tif
> 
> (The GRIB file I used was?st4_pr.2017092016.01h, which can be downloaded 
> from the above link by specifying ?Begin Date/Time? to 
> ?20170920?/?15:00:00? ?and ?End Date/Time? to ?20170920?/?15:59:59?.)
> 
> Then I read the 2 data files in R and checked if the original value at a 
> certain grid cell in the GRIB file remained at the same grid cell in the 
> GeoTiff file, but the value was shifted by 6 rows (the value I checked 
> was 9.75 [mm/hour] that was stored in index [100,86] in the original 
> GRIB file, but it was shifted to [106,86] in the GeoTiff file).
> 
> You can see the Python script used for reading the original GRIB file 
> here: https://bpa.st/ZNOSI <https://bpa.st/ZNOSI>
> The R script used for checking the tif-translated data: 
> https://bpa.st/WZLSY <https://bpa.st/WZLSY>
> 
> The version of gdal_translate I used is 3.0.2.
> Is this a known issue of gdal_translate? Or is this issue not supposed 
> to happen (is this the mistake of my side?)?
> 
> Best regards,
> Takahiro
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

