From ari.jolma at gmail.com  Thu Dec  1 02:09:41 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Dec  1 03:23:20 2011
Subject: [gdal-dev] Re: Add an option to allow opening datasets/datasources
 from SWIG bindings even in case of error ?
In-Reply-To: <201111302120.46446.even.rouault@mines-paris.org>
References: <201111302120.46446.even.rouault@mines-paris.org>
Message-ID: <4ED72835.80205@gmail.com>

On 11/30/2011 10:20 PM, Even Rouault wrote:
>
> Hi SWIG binding users/devs,
>
> Any opinion on http://trac.osgeo.org/gdal/ticket/4360 ?
>
> """After the changes done in 
> http://trac.osgeo.org/gdal/changeset/11529 / 
> http://trac.osgeo.org/gdal/ticket/1635 , any CE_Failure error emitted 
> by CPLError() in the Open() method of GDAL and OGR drivers, and not 
> cleared, will cause the swig bindings to return a null dataset, even 
> if the driver returned a valid one.
>
> Sometimes those errors are not critical, and users regularly complain 
> (last occurrence is 
>  http://lists.osgeo.org/pipermail/gdal-dev/2011-November/030960.html 
> <http://lists.osgeo.org/pipermail/gdal-dev/2011-November/030960.html> 
> ) that they can open them successfully with C/C++ API, but not from 
> Java/Python/etc, so I'd suggest the following patch that adds a 
> bIgnoreErrors option, that if turned on will reset the error flag in 
> the case discussed here. By default, the new option is not turned on. """
>

GDAL has warnings, failures and fatal errors. I don't know the 
semantical error between a failure and a fatal error and they are 
treated the same in the bindings. Also at least in Perl there are only 
tools for warnings and (fatal) errors. Is this a case of a failure but 
not a fatal error and the sign is that the returned value is ok but 
there is a failure state. Maybe we should convert the failure into a 
warning in such a case? I guess that would be my suggestion.

I usually think about these from the point of view of somebody using a 
GUI and I don't see a checkbox in open vector dataset dialog box for 
"ignore errors".

I'm concerned about the viability of the returned dataset object - it is 
ok if the user is warned and given a not perfect object, but it is not 
ok to return an object, which may lead to core dumps or other bad things.

Ari

> Best regards,
>
> Even
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/08bda66a/attachment.html
From wroberts at csir.co.za  Thu Dec  1 04:03:16 2011
From: wroberts at csir.co.za (Wesley Roberts)
Date: Thu Dec  1 05:24:37 2011
Subject: [gdal-dev] Support for MISR data processing.
Message-ID: <4ED75EF40200007300036F78@pta-emo.csir.co.za>

Dear gdal-dev,

I have some MISR hdf data downloaded from the following website (http://eosweb.larc.nasa.gov/PRODOCS/misr/table_misr.html). I have tried to use gdal to access the hdf data using techniques similar to other hdf data sources (MODIS - NDVI and ET). gdalinfo is able to read the contents of the data file in much the same way as it does with MODIS data products. See below, however when I use gdal_translate to extract my data set of interest the result is incorrect. The command executes as per normal and writes a data set to my disk, however when I look at the result in QGIS I see that the image is flippped to the left (north now faces west) and that the data is jumbled (white noise). The command I am using is below. Any help on extracting MISR data blocks is greatly appreciated.

Many thanks,
Wesley



###################################################gdal_translate###################################################

gdal_translate -of GTiff "HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrrad" output.tif

###################################################gdalinfo###################################################
gdalinfo MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf 

Driver: HDF4/Hierarchical Data Format Release 4
Files: MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.13
  Path_number=174
  AGP_version_id=2
  DID_version_id=4
  Number_blocks=180
  Ocean_blocks_size=180
  Ocean_blocks.count=50
  Ocean_blocks.numbers=5, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 174, 175, 176, 177, 178, 179, 180, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  SOM_parameters.som_ellipsoid.a=6378137
  SOM_parameters.som_ellipsoid.e2=0.006694348
  SOM_parameters.som_orbit.aprime=1
  SOM_parameters.som_orbit.eprime=1
  SOM_parameters.som_orbit.gama=1
  SOM_parameters.som_orbit.nrev=233
  SOM_parameters.som_orbit.ro=7078040.8
  SOM_parameters.som_orbit.i=1.71572532628785
  SOM_parameters.som_orbit.P2P1=0.0686666666666667
  SOM_parameters.som_orbit.lambda0=-2.43535567370853
  Origin_block.ulc.x=7460750
  Origin_block.ulc.y=527450
  Origin_block.lrc.x=7601550
  Origin_block.lrc.y=1090650
  Start_block=117
  End block=118
  Cam_mode=1
  Num_local_modes=0
  Local_mode_site_name=
  Orbit_QA=0
  coremetadata=


############################################LOTS of Metadata Removed##################################################################


Subdatasets:
  SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrrad
  SUBDATASET_1_DESC=[180x8x32x4] NormBlkSfcIrrad RegParamsLnd (32-bit floating-point)
  SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrradUnc
  SUBDATASET_2_DESC=[180x8x32x4] NormBlkSfcIrradUnc RegParamsLnd (32-bit floating-point)
  SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:BOABihemAlb
  SUBDATASET_3_DESC=[180x8x32x4] BOABihemAlb RegParamsLnd (32-bit floating-point)
  SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:BOABihemAlbUnc
  SUBDATASET_4_DESC=[180x8x32x4] BOABihemAlbUnc RegParamsLnd (32-bit floating-point)
  SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrOptDepth
  SUBDATASET_5_DESC=[180x8x32] RegSfcRetrOptDepth RegParamsLnd (32-bit floating-point)
  SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrOptDepthUnc
  SUBDATASET_6_DESC=[180x8x32] RegSfcRetrOptDepthUnc RegParamsLnd (32-bit floating-point)
  SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrMixture
  SUBDATASET_7_DESC=[180x8x32] RegSfcRetrMixture RegParamsLnd (8-bit unsigned integer)
  SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrAlgTypeFlag
  SUBDATASET_8_DESC=[180x8x32] RegSfcRetrAlgTypeFlag RegParamsLnd (8-bit unsigned integer)
  SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:LandQA
  SUBDATASET_9_DESC=[180x8x32] LandQA RegParamsLnd (8-bit unsigned integer)
  SUBDATASET_10_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:SolZenAng
  SUBDATASET_10_DESC=[180x8x32] SolZenAng RegParamsLnd (32-bit floating-point)
  SUBDATASET_11_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:ViewZenAng
  SUBDATASET_11_DESC=[180x8x32x9] ViewZenAng RegParamsLnd (32-bit floating-point)
  SUBDATASET_12_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RelViewCamAziAng
  SUBDATASET_12_DESC=[180x8x32x9] RelViewCamAziAng RegParamsLnd (32-bit floating-point)
  SUBDATASET_13_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:ScatterAng
  SUBDATASET_13_DESC=[180x8x32x9] ScatterAng RegParamsLnd (32-bit floating-point)
  SUBDATASET_14_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:GlitterAng
  SUBDATASET_14_DESC=[180x8x32x9] GlitterAng RegParamsLnd (32-bit floating-point)
  SUBDATASET_15_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandHDRF
  SUBDATASET_15_DESC=[180x128x512x4x9] LandHDRF SubregParamsLnd (16-bit unsigned integer)
  SUBDATASET_16_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandHDRFUnc
  SUBDATASET_16_DESC=[180x128x512x4x9] LandHDRFUnc SubregParamsLnd (16-bit unsigned integer)
  SUBDATASET_17_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:RDQI
  SUBDATASET_17_DESC=[180x128x512x4x9] RDQI SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_18_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBHR
  SUBDATASET_18_DESC=[180x128x512x4] LandBHR SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_19_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBHRRelUnc
  SUBDATASET_19_DESC=[180x128x512x4] LandBHRRelUnc SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_20_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBRF
  SUBDATASET_20_DESC=[180x128x512x4x9] LandBRF SubregParamsLnd (16-bit unsigned integer)
  SUBDATASET_21_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandDHR
  SUBDATASET_21_DESC=[180x128x512x4] LandDHR SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_22_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam1
  SUBDATASET_22_DESC=[180x128x512x4] BRFModParam1 SubregParamsLnd (16-bit unsigned integer)
  SUBDATASET_23_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam2
  SUBDATASET_23_DESC=[180x128x512x4] BRFModParam2 SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_24_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam3
  SUBDATASET_24_DESC=[180x128x512x4] BRFModParam3 SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_25_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModFitResid
  SUBDATASET_25_DESC=[180x128x512x4] BRFModFitResid SubregParamsLnd (16-bit unsigned integer)
  SUBDATASET_26_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:NDVI
  SUBDATASET_26_DESC=[180x128x512] NDVI SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_27_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BiomeBestEstimate
  SUBDATASET_27_DESC=[180x128x512] BiomeBestEstimate SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_28_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BiomeBestEstimateQA
  SUBDATASET_28_DESC=[180x128x512] BiomeBestEstimateQA SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_29_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIBestEstimate
  SUBDATASET_29_DESC=[180x128x512] LAIBestEstimate SubregParamsLnd (32-bit floating-point)
  SUBDATASET_30_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIBestEstimateQA
  SUBDATASET_30_DESC=[180x128x512] LAIBestEstimateQA SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_31_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:FPARBestEstimate
  SUBDATASET_31_DESC=[180x128x512] FPARBestEstimate SubregParamsLnd (32-bit floating-point)
  SUBDATASET_32_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BHRPAR
  SUBDATASET_32_DESC=[180x128x512] BHRPAR SubregParamsLnd (32-bit floating-point)
  SUBDATASET_33_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:DHRPAR
  SUBDATASET_33_DESC=[180x128x512] DHRPAR SubregParamsLnd (32-bit floating-point)
  SUBDATASET_34_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIMean1
  SUBDATASET_34_DESC=[180x128x512x6] LAIMean1 SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_35_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIDelta1
  SUBDATASET_35_DESC=[180x128x512x6] LAIDelta1 SubregParamsLnd (32-bit floating-point)
  SUBDATASET_36_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAINumGoodFit1
  SUBDATASET_36_DESC=[180x128x512x6] LAINumGoodFit1 SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_37_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIMean2
  SUBDATASET_37_DESC=[180x128x512x6] LAIMean2 SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_38_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIDelta2
  SUBDATASET_38_DESC=[180x128x512x6] LAIDelta2 SubregParamsLnd (32-bit floating-point)
  SUBDATASET_39_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAINumGoodFit2
  SUBDATASET_39_DESC=[180x128x512x6] LAINumGoodFit2 SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_40_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIQA
  SUBDATASET_40_DESC=[180x128x512x6] LAIQA SubregParamsLnd (8-bit unsigned integer)
  SUBDATASET_41_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:SubrVar
  SUBDATASET_41_DESC=[180x128x512x4] SubrVar SubregParamsLnd (8-bit unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


-- 
This message is subject to the CSIR's copyright terms and conditions, e-mail legal notice, and implemented Open Document Format (ODF) standard. 
The full disclaimer details can be found at http://www.csir.co.za/disclaimer.html.

This message has been scanned for viruses and dangerous content by MailScanner, 
and is believed to be clean.

From even.rouault at mines-paris.org  Thu Dec  1 04:29:54 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec  1 05:50:55 2011
Subject: [gdal-dev] Re: Add an option to allow opening datasets/datasources
	from SWIG bindings even in case of error ?
In-Reply-To: <4ED72835.80205@gmail.com>
References: <201111302120.46446.even.rouault@mines-paris.org>
	<4ED72835.80205@gmail.com>
Message-ID: <1322731794.4ed74912b4625@imp.free.fr>

Selon Ari Jolma <ari.jolma@gmail.com>:

> On 11/30/2011 10:20 PM, Even Rouault wrote:
> >
> > Hi SWIG binding users/devs,
> >
> > Any opinion on http://trac.osgeo.org/gdal/ticket/4360 ?
> >
> > """After the changes done in
> > http://trac.osgeo.org/gdal/changeset/11529 /
> > http://trac.osgeo.org/gdal/ticket/1635 , any CE_Failure error emitted
> > by CPLError() in the Open() method of GDAL and OGR drivers, and not
> > cleared, will cause the swig bindings to return a null dataset, even
> > if the driver returned a valid one.
> >
> > Sometimes those errors are not critical, and users regularly complain
> > (last occurrence is
> >  http://lists.osgeo.org/pipermail/gdal-dev/2011-November/030960.html
> > <http://lists.osgeo.org/pipermail/gdal-dev/2011-November/030960.html>
> > ) that they can open them successfully with C/C++ API, but not from
> > Java/Python/etc, so I'd suggest the following patch that adds a
> > bIgnoreErrors option, that if turned on will reset the error flag in
> > the case discussed here. By default, the new option is not turned on. """
> >
>
> GDAL has warnings, failures and fatal errors. I don't know the
> semantical error between a failure and a fatal error and they are
> treated the same in the bindings.

Fatal errors are... fatal. They will result in an abort(). They are only emitted
in a few places, like the CPLMalloc() routine that is guaranteed to return a
non-NULL pointer... or abort. So it is only designed for very small allocs. For
big allocs, VSIMalloc() should be used and the caller should handle gracefully a
NULL pointer.

So remains the difference between a warning and a failure. I'm not sure there's
really a perfect way of discriminate them.

Also at least in Perl there are only
> tools for warnings and (fatal) errors. Is this a case of a failure but
> not a fatal error and the sign is that the returned value is ok but
> there is a failure state. Maybe we should convert the failure into a
> warning in such a case? I guess that would be my suggestion.

Yes, the issue is that there are hundreds if not thousands places where errors
can be emitted, and depending on the context, an error can be just a warning or
an error... For example, if the projection info is in another file than the main
data file, you can have I/O / permissions problems that prevent you from reading
that projection info, so an error will likely be emitted, but the driver is
generally resilient to those errors and will return a valid object, even if
projection info is missing.

>
> I usually think about these from the point of view of somebody using a
> GUI and I don't see a checkbox in open vector dataset dialog box for
> "ignore errors".

Yes, I agree that's unlikely. That's just about giving the capability to the
user (well, developer) to have the level of control needed. The issue now is
that there is no way from Java/Python/etc. to open those datasets/datasources
when a CE_Failure is emitted.

Another way I've imagined to avoid the bIgnoreError flag is to link with the
gdal.UseExceptions()/DontUseExceptions() methods that are at least found in
Python and Java bindings, which control if errors are turned into Python/Java
exceptions. One could imagine that in the DontUseExceptions() mode, the check
for CE_Failure done in the swig wrapper is completely skipped. However I'm not
sure if it exists for the C# or Perl bindings. Currently there's a
bUseExceptions global variable in swig/include/python/python_exceptions.i or
swig/include/java/java_exceptions.i

>
> I'm concerned about the viability of the returned dataset object - it is
> ok if the user is warned and given a not perfect object, but it is not
> ok to return an object, which may lead to core dumps or other bad things.

Drivers should return a NULL object in that case. The C/C++ utilities in GDAL
only check if the pointer is NULL or non-NULL. They don't check the error flag.

Even

From chaitanya.ch at gmail.com  Thu Dec  1 04:38:24 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Dec  1 05:59:50 2011
Subject: [gdal-dev] Support for MISR data processing.
In-Reply-To: <4ED75EF40200007300036F78@pta-emo.csir.co.za>
References: <4ED75EF40200007300036F78@pta-emo.csir.co.za>
Message-ID: <CAMKgpOb3ng9d2rGHaCDBPtqvtB4iUZ=vtEduvP7-f53+osWCAg@mail.gmail.com>

Wesley,

Can you provide the exact link for the dataset or a page containing the
link?

On Thu, Dec 1, 2011 at 2:33 PM, Wesley Roberts <wroberts@csir.co.za> wrote:

> Dear gdal-dev,
>
> I have some MISR hdf data downloaded from the following website (
> http://eosweb.larc.nasa.gov/PRODOCS/misr/table_misr.html). I have tried
> to use gdal to access the hdf data using techniques similar to other hdf
> data sources (MODIS - NDVI and ET). gdalinfo is able to read the contents
> of the data file in much the same way as it does with MODIS data products.
> See below, however when I use gdal_translate to extract my data set of
> interest the result is incorrect. The command executes as per normal and
> writes a data set to my disk, however when I look at the result in QGIS I
> see that the image is flippped to the left (north now faces west) and that
> the data is jumbled (white noise). The command I am using is below. Any
> help on extracting MISR data blocks is greatly appreciated.
>
> Many thanks,
> Wesley
>
>
>
>
> ###################################################gdal_translate###################################################
>
> gdal_translate -of GTiff
> "HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrrad"
> output.tif
>
>
> ###################################################gdalinfo###################################################
> gdalinfo MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf
>
> Driver: HDF4/Hierarchical Data Format Release 4
> Files: MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>  HDFEOSVersion=HDFEOS_V2.13
>  Path_number=174
>  AGP_version_id=2
>  DID_version_id=4
>  Number_blocks=180
>  Ocean_blocks_size=180
>  Ocean_blocks.count=50
>  Ocean_blocks.numbers=5, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
> 21, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132,
> 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 174,
> 175, 176, 177, 178, 179, 180, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
>  SOM_parameters.som_ellipsoid.a=6378137
>  SOM_parameters.som_ellipsoid.e2=0.006694348
>  SOM_parameters.som_orbit.aprime=1
>  SOM_parameters.som_orbit.eprime=1
>  SOM_parameters.som_orbit.gama=1
>  SOM_parameters.som_orbit.nrev=233
>  SOM_parameters.som_orbit.ro=7078040.8
>  SOM_parameters.som_orbit.i=1.71572532628785
>  SOM_parameters.som_orbit.P2P1=0.0686666666666667
>  SOM_parameters.som_orbit.lambda0=-2.43535567370853
>  Origin_block.ulc.x=7460750
>  Origin_block.ulc.y=527450
>  Origin_block.lrc.x=7601550
>  Origin_block.lrc.y=1090650
>  Start_block=117
>  End block=118
>  Cam_mode=1
>  Num_local_modes=0
>  Local_mode_site_name=
>  Orbit_QA=0
>  coremetadata=
>
>
> ############################################LOTS of Metadata
> Removed##################################################################
>
>
> Subdatasets:
>
>  SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrrad
>  SUBDATASET_1_DESC=[180x8x32x4] NormBlkSfcIrrad RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrradUnc
>  SUBDATASET_2_DESC=[180x8x32x4] NormBlkSfcIrradUnc RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:BOABihemAlb
>  SUBDATASET_3_DESC=[180x8x32x4] BOABihemAlb RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:BOABihemAlbUnc
>  SUBDATASET_4_DESC=[180x8x32x4] BOABihemAlbUnc RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrOptDepth
>  SUBDATASET_5_DESC=[180x8x32] RegSfcRetrOptDepth RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrOptDepthUnc
>  SUBDATASET_6_DESC=[180x8x32] RegSfcRetrOptDepthUnc RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrMixture
>  SUBDATASET_7_DESC=[180x8x32] RegSfcRetrMixture RegParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrAlgTypeFlag
>  SUBDATASET_8_DESC=[180x8x32] RegSfcRetrAlgTypeFlag RegParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:LandQA
>  SUBDATASET_9_DESC=[180x8x32] LandQA RegParamsLnd (8-bit unsigned integer)
>
>  SUBDATASET_10_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:SolZenAng
>  SUBDATASET_10_DESC=[180x8x32] SolZenAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_11_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:ViewZenAng
>  SUBDATASET_11_DESC=[180x8x32x9] ViewZenAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_12_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RelViewCamAziAng
>  SUBDATASET_12_DESC=[180x8x32x9] RelViewCamAziAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_13_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:ScatterAng
>  SUBDATASET_13_DESC=[180x8x32x9] ScatterAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_14_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:GlitterAng
>  SUBDATASET_14_DESC=[180x8x32x9] GlitterAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_15_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandHDRF
>  SUBDATASET_15_DESC=[180x128x512x4x9] LandHDRF SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_16_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandHDRFUnc
>  SUBDATASET_16_DESC=[180x128x512x4x9] LandHDRFUnc SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_17_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:RDQI
>  SUBDATASET_17_DESC=[180x128x512x4x9] RDQI SubregParamsLnd (8-bit unsigned
> integer)
>
>  SUBDATASET_18_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBHR
>  SUBDATASET_18_DESC=[180x128x512x4] LandBHR SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_19_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBHRRelUnc
>  SUBDATASET_19_DESC=[180x128x512x4] LandBHRRelUnc SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_20_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBRF
>  SUBDATASET_20_DESC=[180x128x512x4x9] LandBRF SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_21_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandDHR
>  SUBDATASET_21_DESC=[180x128x512x4] LandDHR SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_22_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam1
>  SUBDATASET_22_DESC=[180x128x512x4] BRFModParam1 SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_23_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam2
>  SUBDATASET_23_DESC=[180x128x512x4] BRFModParam2 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_24_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam3
>  SUBDATASET_24_DESC=[180x128x512x4] BRFModParam3 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_25_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModFitResid
>  SUBDATASET_25_DESC=[180x128x512x4] BRFModFitResid SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_26_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:NDVI
>  SUBDATASET_26_DESC=[180x128x512] NDVI SubregParamsLnd (8-bit unsigned
> integer)
>
>  SUBDATASET_27_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BiomeBestEstimate
>  SUBDATASET_27_DESC=[180x128x512] BiomeBestEstimate SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_28_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BiomeBestEstimateQA
>  SUBDATASET_28_DESC=[180x128x512] BiomeBestEstimateQA SubregParamsLnd
> (8-bit unsigned integer)
>
>  SUBDATASET_29_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIBestEstimate
>  SUBDATASET_29_DESC=[180x128x512] LAIBestEstimate SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_30_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIBestEstimateQA
>  SUBDATASET_30_DESC=[180x128x512] LAIBestEstimateQA SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_31_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:FPARBestEstimate
>  SUBDATASET_31_DESC=[180x128x512] FPARBestEstimate SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_32_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BHRPAR
>  SUBDATASET_32_DESC=[180x128x512] BHRPAR SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_33_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:DHRPAR
>  SUBDATASET_33_DESC=[180x128x512] DHRPAR SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_34_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIMean1
>  SUBDATASET_34_DESC=[180x128x512x6] LAIMean1 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_35_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIDelta1
>  SUBDATASET_35_DESC=[180x128x512x6] LAIDelta1 SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_36_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAINumGoodFit1
>  SUBDATASET_36_DESC=[180x128x512x6] LAINumGoodFit1 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_37_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIMean2
>  SUBDATASET_37_DESC=[180x128x512x6] LAIMean2 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_38_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIDelta2
>  SUBDATASET_38_DESC=[180x128x512x6] LAIDelta2 SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_39_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAINumGoodFit2
>  SUBDATASET_39_DESC=[180x128x512x6] LAINumGoodFit2 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_40_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIQA
>  SUBDATASET_40_DESC=[180x128x512x6] LAIQA SubregParamsLnd (8-bit unsigned
> integer)
>
>  SUBDATASET_41_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:SubrVar
>  SUBDATASET_41_DESC=[180x128x512x4] SubrVar SubregParamsLnd (8-bit
> unsigned integer)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
>
>
> --
> This message is subject to the CSIR's copyright terms and conditions,
> e-mail legal notice, and implemented Open Document Format (ODF) standard.
> The full disclaimer details can be found at
> http://www.csir.co.za/disclaimer.html.
>
> This message has been scanned for viruses and dangerous content by
> MailScanner,
> and is believed to be clean.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/a730c0bc/attachment.html
From ari.jolma at gmail.com  Thu Dec  1 05:03:21 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Dec  1 06:26:52 2011
Subject: [gdal-dev] Re: Add an option to allow opening datasets/datasources
 from SWIG bindings even in case of error ?
In-Reply-To: <1322731794.4ed74912b4625@imp.free.fr>
References: <201111302120.46446.even.rouault@mines-paris.org>
	<4ED72835.80205@gmail.com> <1322731794.4ed74912b4625@imp.free.fr>
Message-ID: <4ED750E9.2060901@gmail.com>

On 12/01/2011 11:29 AM, Even Rouault wrote:
> Fatal errors are... fatal. They will result in an abort(). They are only emitted
> in a few places, like the CPLMalloc() routine that is guaranteed to return a
> non-NULL pointer... or abort. So it is only designed for very small allocs. For
> big allocs, VSIMalloc() should be used and the caller should handle gracefully a
> NULL pointer.

I don't want my GUI app never to abort. I want to be able to catch *all* 
errors. But that's irrelevant in this case.

> Also at least in Perl there are only
>> tools for warnings and (fatal) errors. Is this a case of a failure but
>> not a fatal error and the sign is that the returned value is ok but
>> there is a failure state. Maybe we should convert the failure into a
>> warning in such a case? I guess that would be my suggestion.
> Yes, the issue is that there are hundreds if not thousands places where errors
> can be emitted, and depending on the context, an error can be just a warning or
> an error... For example, if the projection info is in another file than the main
> data file, you can have I/O / permissions problems that prevent you from reading
> that projection info, so an error will likely be emitted, but the driver is
> generally resilient to those errors and will return a valid object, even if
> projection info is missing.

But is there a way to test for failure state and convert it into a 
warning? I don't mean changing anything in GDAL itself, only add some 
clever code into the bindings? Clearing the failure state is possible, 
could we fetch the error message and raise a warning?



>
> Yes, I agree that's unlikely. That's just about giving the capability to the
> user (well, developer) to have the level of control needed. The issue now is
> that there is no way from Java/Python/etc. to open those datasets/datasources
> when a CE_Failure is emitted.
>
> Another way I've imagined to avoid the bIgnoreError flag is to link with the
> gdal.UseExceptions()/DontUseExceptions() methods that are at least found in
> Python and Java bindings, which control if errors are turned into Python/Java
> exceptions. One could imagine that in the DontUseExceptions() mode, the check
> for CE_Failure done in the swig wrapper is completely skipped. However I'm not
> sure if it exists for the C# or Perl bindings. Currently there's a
> bUseExceptions global variable in swig/include/python/python_exceptions.i or
> swig/include/java/java_exceptions.i

That sounds too heavy to me. I don't like the global variable there, 
which leads to problems with threads at least. It exists in Perl 
bindings but it feels very much like a hack.

Ari

From schut at sarvision.nl  Thu Dec  1 05:11:57 2011
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Dec  1 06:35:15 2011
Subject: [gdal-dev] Covert MODIS Land Temperatures Sinusoidal to Lat Lon
In-Reply-To: <4ED66498.4090607@cpi.com>
References: <4ED64085.1060408@cpi.com> <4ED64B16.7070409@sarvision.nl>
	<4ED66498.4090607@cpi.com>
Message-ID: <4ED752ED.3040305@sarvision.nl>

On 11/30/2011 06:15 PM, elliott wrote:
> Thanks for the quick response.  I have a follow up question on how to 
> read this converted data using a python script.  Is there a way to use 
> ReadRaster or ReadDataArray to retrieve the temperature data?
The  converted file should be a geotiff by default, so yes, you should 
be able to use gdal's python bindings to read that data. As you will be 
able to read the original data, if you have hdf4 support compiled in 
your build of gdal.
Please refer to the gdal documentation ('python api') for how to read 
data, and/or have a look at the example python scripts coming with 
gdal's source.
Note (I suppose the original data is hdf4, as are 'my' modis data) that 
you can only convert 1 subdataset ('sds') at a time. Refer to gdal's 
hdf4 format documentation (website, supported formats, search for hdf4) 
for how to find and refer to the subdataset name.

Last: please CC your replies to the list too (or just send to the list, 
no need to send to my private address too). Others might know more and 
want to reply, or might learn from it. And it will appear in internet 
searches after some time.

Best,
Vincent.
>
> On 11/30/2011 10:26 AM, Vincent Schut wrote:
>> On 11/30/2011 03:41 PM, elliott wrote:
>>> Hello,
>>>
>>> I have been searching for a way to convert the MODIS Land 
>>> Temperature data that is in a sinusoidal projection into WSG84 
>>> lat/lon but have not found any definitive answers.
>>>
>>> Any help would be greatly appreciated.
>>
>> I've been using this gdalwarp line, though for modis land spectral 
>> data and not temperature:
>>
>> gdalwarp -s_srs '+proj=sinu +R=6371007.181 +nadgrids=@null +wktext' 
>> -t_srs EPSG:4326 -srcnodata 0 -dstnodata 0 -r cubic -co "TILED=YES" 
>> -co "TFW=YES"  ${INFILE} ${OUTFILE}
>>
>> nb it's from a bash script so change the INFILE and OUTFILE stuff, 
>> and if you want to you can remove the -co tiled and tfw creation 
>> options.
>> ymmv.
>>
>> Vincent.
>>
>>>
>>> Thanks!
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From wroberts at csir.co.za  Thu Dec  1 05:25:17 2011
From: wroberts at csir.co.za (Wesley Roberts)
Date: Thu Dec  1 06:49:48 2011
Subject: [gdal-dev] Support for MISR data processing.
In-Reply-To: <CAMKgpOb3ng9d2rGHaCDBPtqvtB4iUZ=vtEduvP7-f53+osWCAg@mail.gmail.com>
References: <4ED75EF40200007300036F78@pta-emo.csir.co.za>
	<CAMKgpOb3ng9d2rGHaCDBPtqvtB4iUZ=vtEduvP7-f53+osWCAg@mail.gmail.com>
Message-ID: <4ED7722D0200007300036F8F@pta-emo.csir.co.za>

Unfortunately not, it is a level 2 land surface product downloaded from the site below. 

I have several data sets whose size is well below 5 MB. I could email you one of them off-list if you like?

W.

>>> Chaitanya kumar CH <chaitanya.ch@gmail.com> 01/12/2011 11:38 >>>
Wesley,

Can you provide the exact link for the dataset or a page containing the
link?

On Thu, Dec 1, 2011 at 2:33 PM, Wesley Roberts <wroberts@csir.co.za> wrote:

> Dear gdal-dev,
>
> I have some MISR hdf data downloaded from the following website (
> http://eosweb.larc.nasa.gov/PRODOCS/misr/table_misr.html). I have tried
> to use gdal to access the hdf data using techniques similar to other hdf
> data sources (MODIS - NDVI and ET). gdalinfo is able to read the contents
> of the data file in much the same way as it does with MODIS data products.
> See below, however when I use gdal_translate to extract my data set of
> interest the result is incorrect. The command executes as per normal and
> writes a data set to my disk, however when I look at the result in QGIS I
> see that the image is flippped to the left (north now faces west) and that
> the data is jumbled (white noise). The command I am using is below. Any
> help on extracting MISR data blocks is greatly appreciated.
>
> Many thanks,
> Wesley
>
>
>
>
> ###################################################gdal_translate###################################################
>
> gdal_translate -of GTiff
> "HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrrad"
> output.tif
>
>
> ###################################################gdalinfo###################################################
> gdalinfo MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf
>
> Driver: HDF4/Hierarchical Data Format Release 4
> Files: MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf
> Size is 512, 512
> Coordinate System is `'
> Metadata:
>  HDFEOSVersion=HDFEOS_V2.13
>  Path_number=174
>  AGP_version_id=2
>  DID_version_id=4
>  Number_blocks=180
>  Ocean_blocks_size=180
>  Ocean_blocks.count=50
>  Ocean_blocks.numbers=5, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
> 21, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132,
> 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 174,
> 175, 176, 177, 178, 179, 180, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
>  SOM_parameters.som_ellipsoid.a=6378137
>  SOM_parameters.som_ellipsoid.e2=0.006694348
>  SOM_parameters.som_orbit.aprime=1
>  SOM_parameters.som_orbit.eprime=1
>  SOM_parameters.som_orbit.gama=1
>  SOM_parameters.som_orbit.nrev=233
>  SOM_parameters.som_orbit.ro=7078040.8
>  SOM_parameters.som_orbit.i=1.71572532628785
>  SOM_parameters.som_orbit.P2P1=0.0686666666666667
>  SOM_parameters.som_orbit.lambda0=-2.43535567370853
>  Origin_block.ulc.x=7460750
>  Origin_block.ulc.y=527450
>  Origin_block.lrc.x=7601550
>  Origin_block.lrc.y=1090650
>  Start_block=117
>  End block=118
>  Cam_mode=1
>  Num_local_modes=0
>  Local_mode_site_name=
>  Orbit_QA=0
>  coremetadata=
>
>
> ############################################LOTS of Metadata
> Removed##################################################################
>
>
> Subdatasets:
>
>  SUBDATASET_1_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrrad
>  SUBDATASET_1_DESC=[180x8x32x4] NormBlkSfcIrrad RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:NormBlkSfcIrradUnc
>  SUBDATASET_2_DESC=[180x8x32x4] NormBlkSfcIrradUnc RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:BOABihemAlb
>  SUBDATASET_3_DESC=[180x8x32x4] BOABihemAlb RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:BOABihemAlbUnc
>  SUBDATASET_4_DESC=[180x8x32x4] BOABihemAlbUnc RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_5_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrOptDepth
>  SUBDATASET_5_DESC=[180x8x32] RegSfcRetrOptDepth RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_6_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrOptDepthUnc
>  SUBDATASET_6_DESC=[180x8x32] RegSfcRetrOptDepthUnc RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_7_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrMixture
>  SUBDATASET_7_DESC=[180x8x32] RegSfcRetrMixture RegParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_8_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RegSfcRetrAlgTypeFlag
>  SUBDATASET_8_DESC=[180x8x32] RegSfcRetrAlgTypeFlag RegParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_9_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:LandQA
>  SUBDATASET_9_DESC=[180x8x32] LandQA RegParamsLnd (8-bit unsigned integer)
>
>  SUBDATASET_10_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:SolZenAng
>  SUBDATASET_10_DESC=[180x8x32] SolZenAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_11_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:ViewZenAng
>  SUBDATASET_11_DESC=[180x8x32x9] ViewZenAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_12_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:RelViewCamAziAng
>  SUBDATASET_12_DESC=[180x8x32x9] RelViewCamAziAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_13_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:ScatterAng
>  SUBDATASET_13_DESC=[180x8x32x9] ScatterAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_14_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":RegParamsLnd:GlitterAng
>  SUBDATASET_14_DESC=[180x8x32x9] GlitterAng RegParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_15_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandHDRF
>  SUBDATASET_15_DESC=[180x128x512x4x9] LandHDRF SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_16_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandHDRFUnc
>  SUBDATASET_16_DESC=[180x128x512x4x9] LandHDRFUnc SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_17_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:RDQI
>  SUBDATASET_17_DESC=[180x128x512x4x9] RDQI SubregParamsLnd (8-bit unsigned
> integer)
>
>  SUBDATASET_18_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBHR
>  SUBDATASET_18_DESC=[180x128x512x4] LandBHR SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_19_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBHRRelUnc
>  SUBDATASET_19_DESC=[180x128x512x4] LandBHRRelUnc SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_20_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandBRF
>  SUBDATASET_20_DESC=[180x128x512x4x9] LandBRF SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_21_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LandDHR
>  SUBDATASET_21_DESC=[180x128x512x4] LandDHR SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_22_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam1
>  SUBDATASET_22_DESC=[180x128x512x4] BRFModParam1 SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_23_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam2
>  SUBDATASET_23_DESC=[180x128x512x4] BRFModParam2 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_24_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModParam3
>  SUBDATASET_24_DESC=[180x128x512x4] BRFModParam3 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_25_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BRFModFitResid
>  SUBDATASET_25_DESC=[180x128x512x4] BRFModFitResid SubregParamsLnd (16-bit
> unsigned integer)
>
>  SUBDATASET_26_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:NDVI
>  SUBDATASET_26_DESC=[180x128x512] NDVI SubregParamsLnd (8-bit unsigned
> integer)
>
>  SUBDATASET_27_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BiomeBestEstimate
>  SUBDATASET_27_DESC=[180x128x512] BiomeBestEstimate SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_28_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BiomeBestEstimateQA
>  SUBDATASET_28_DESC=[180x128x512] BiomeBestEstimateQA SubregParamsLnd
> (8-bit unsigned integer)
>
>  SUBDATASET_29_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIBestEstimate
>  SUBDATASET_29_DESC=[180x128x512] LAIBestEstimate SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_30_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIBestEstimateQA
>  SUBDATASET_30_DESC=[180x128x512] LAIBestEstimateQA SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_31_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:FPARBestEstimate
>  SUBDATASET_31_DESC=[180x128x512] FPARBestEstimate SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_32_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:BHRPAR
>  SUBDATASET_32_DESC=[180x128x512] BHRPAR SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_33_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:DHRPAR
>  SUBDATASET_33_DESC=[180x128x512] DHRPAR SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_34_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIMean1
>  SUBDATASET_34_DESC=[180x128x512x6] LAIMean1 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_35_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIDelta1
>  SUBDATASET_35_DESC=[180x128x512x6] LAIDelta1 SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_36_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAINumGoodFit1
>  SUBDATASET_36_DESC=[180x128x512x6] LAINumGoodFit1 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_37_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIMean2
>  SUBDATASET_37_DESC=[180x128x512x6] LAIMean2 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_38_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIDelta2
>  SUBDATASET_38_DESC=[180x128x512x6] LAIDelta2 SubregParamsLnd (32-bit
> floating-point)
>
>  SUBDATASET_39_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAINumGoodFit2
>  SUBDATASET_39_DESC=[180x128x512x6] LAINumGoodFit2 SubregParamsLnd (8-bit
> unsigned integer)
>
>  SUBDATASET_40_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:LAIQA
>  SUBDATASET_40_DESC=[180x128x512x6] LAIQA SubregParamsLnd (8-bit unsigned
> integer)
>
>  SUBDATASET_41_NAME=HDF4_EOS:EOS_GRID:"MISR_AM1_AS_LAND_P174_O001092_F07_0022.b117-118.hdf":SubregParamsLnd:SubrVar
>  SUBDATASET_41_DESC=[180x128x512x4] SubrVar SubregParamsLnd (8-bit
> unsigned integer)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
>
>
> --
> This message is subject to the CSIR's copyright terms and conditions,
> e-mail legal notice, and implemented Open Document Format (ODF) standard.
> The full disclaimer details can be found at
> http://www.csir.co.za/disclaimer.html.
>
> This message has been scanned for viruses and dangerous content by
> MailScanner,
> and is believed to be clean.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-- 
This message is subject to the CSIR's copyright terms and conditions, e-mail legal notice, and implemented Open Document Format (ODF) standard. 
The full disclaimer details can be found at http://www.csir.co.za/disclaimer.html.

This message has been scanned for viruses and dangerous content by MailScanner, 
and is believed to be clean.

From Anne.Brookes at jbaconsulting.com  Thu Dec  1 05:36:12 2011
From: Anne.Brookes at jbaconsulting.com (Anne Brookes)
Date: Thu Dec  1 07:01:49 2011
Subject: [gdal-dev] Difference in output using gdal_translate from FWTools
 shell and cmd window
Message-ID: <5503C113FD3EF745927F96031B470A0B74C9871183@mail-jba1.jbanorthwest.co.uk>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: imagea52157.png@0b641363.58fb4337
Type: image/png
Size: 3957 bytes
Desc: imagea52157.png@0b641363.58fb4337
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/26818773/imagea52157.png0b641363-0001.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: imageb7288b.png@04236f77.d2b04ae4
Type: image/png
Size: 1495 bytes
Desc: imageb7288b.png@04236f77.d2b04ae4
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/26818773/imageb7288b.png04236f77-0001.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image840d25.png@a2776b7f.c5f34cb4
Type: image/png
Size: 1841 bytes
Desc: image840d25.png@a2776b7f.c5f34cb4
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/26818773/image840d25.pnga2776b7f-0001.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image98f3a8.png@fecc7dc0.dc434408
Type: image/png
Size: 1859 bytes
Desc: image98f3a8.png@fecc7dc0.dc434408
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/26818773/image98f3a8.pngfecc7dc0-0001.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image8ba6f0.png@b44205ef.33e84574
Type: image/png
Size: 1455 bytes
Desc: image8ba6f0.png@b44205ef.33e84574
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/26818773/image8ba6f0.pngb44205ef-0001.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image836b39.png@13d0faf1.51b34be6
Type: image/png
Size: 1743 bytes
Desc: image836b39.png@13d0faf1.51b34be6
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/26818773/image836b39.png13d0faf1-0001.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: imagea20f2e.png@e453a025.69b74420
Type: image/png
Size: 2668 bytes
Desc: imagea20f2e.png@e453a025.69b74420
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111201/26818773/imagea20f2e.pnge453a025-0001.png
From brfr at metrico.lu  Thu Dec  1 05:59:41 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Thu Dec  1 07:25:17 2011
Subject: [gdal-dev] Difference in output using gdal_translate from FWTools
	shell and cmd window
In-Reply-To: <5503C113FD3EF745927F96031B470A0B74C9871183@mail-jba1.jbanorthwest.co.uk>
References: <5503C113FD3EF745927F96031B470A0B74C9871183@mail-jba1.jbanorthwest.co.uk>
Message-ID: <4ED75E1D.9040404@metrico.lu>

Hi,

are you sure that the same libraries (proj, epsg et. al.) are available 
under both cirumstances? Do you have access to proj and epsg codes in 
plain cmd?
That's where I would start to investigate ...

btw. I think the osgeo4w package is more recent than the fwtools build, 
so might also have a look at that one


Frank

Am 01.12.2011 11:36, schrieb Anne Brookes:
> Hello,
> When I run gdalinfo and gdal_translate commands from the FWTools Shell (on Windows) the output is different to when I run the same commands from an ordinary cmd window (or from a python script). The difference is in the PROJCS, DATUM and SPHEROID metadata.
>
> Here is the (correct) output from the FWTools shell command window:
> C:\Program Files\FWTools2.0.4>gdalinfo : C:\JFLOW8\testgdal\D108787.tif
>
> Driver: GTiff/GeoTIFF
> Files: C:\JFLOW8\testgdal\D108787.tif
> Size is 597, 597
> Coordinate System is:
> PROJCS["ETRS89 / ETRS-LAEA",
>      GEOGCS["ETRS89",
>          DATUM["European_Terrestrial_Reference_System_1989",
>              SPHEROID["GRS 1980",6378137,298.2572221010002,
>                  AUTHORITY["EPSG","7019"]],
>              AUTHORITY["EPSG","6258"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4258"]],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","3035"]]
> Origin = (4039990.000000000000000,2950770.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 4039990.000, 2950770.000)
> Lower Left  ( 4039990.000, 2944800.000)
> Upper Right ( 4045960.000, 2950770.000)
> Lower Right ( 4045960.000, 2944800.000)
> Center      ( 4042975.000, 2947785.000)
> Band 1 Block=597x3 Type=Float32, ColorInterp=Gray
>    NoData Value=-9999
>
>
> And here is the output from the cmd window :
> C:\Document and Settings\jflownw>  " C:\Program Files\FWTools2.0.4\bin\gdalinfo" C:\JFLOW8\testgdal\D108787.tif
>
> Driver: GTiff/GeoTIFF
> Files: C:\JFLOW8\testgdal\D108787.tif
> Size is 597, 597
> Coordinate System is:
> PROJCS["unnamed",
>      GEOGCS["ETRS89",
>          DATUM["unknown",
>              SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433]],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","3035"]]
> Origin = (4039990.000000000000000,2950770.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 4039990.000, 2950770.000)
> Lower Left  ( 4039990.000, 2944800.000)
> Upper Right ( 4045960.000, 2950770.000)
> Lower Right ( 4045960.000, 2944800.000)
> Center      ( 4042975.000, 2947785.000)
> Band 1 Block=597x3 Type=Float32, ColorInterp=Gray
>    NoData Value=-9999
>
> Please can anyone tell me why this is happening and what I need to do to be able to get the full DATUM and SPHEROID metadata when running the GDAL commands from outside of the FWTools shell, eg. from a python script or another cmd window?
> I have been puzzling over this for a while and it is now becoming quite urgent.
> Thanks
> Anne Brookes
> Senior Analyst
>
>
>
>
>
>
>
> [cid:imagea52157.png@0b641363.58fb4337]<http://www.jbaconsulting.com/>
>
>
> South Barn
> Broughton Hall
> Skipton
> North Yorkshire
> BD23 3AE
> T: +44 (0)1756 799919 F: 0845 8627772
>
>
> The JBA Family
>
> [cid:imageb7288b.png@04236f77.d2b04ae4]<http://www.jbagroup.co.uk/>   [cid:image840d25.png@a2776b7f.c5f34cb4]<http://www.jbarisk.com/>    [cid:image98f3a8.png@fecc7dc0.dc434408]<http://www.jbaenergy.com/>    [cid:image8ba6f0.png@b44205ef.33e84574]<http://www.jbatrust.org/>
> www.jbaconsulting.com<http://www.jbaconsulting.com/>
>
>
>
>
>
> This email is covered by JBA Consulting's email disclaimer<http://www.jbaconsulting.com/disclaimer>   JBA Consulting is the trading name of Jeremy Benn Associates Limited, registered in England, company number 03246693, South Barn, Broughton Hall, Skipton, North Yorkshire, BD23 3AE.
>
>
> [cid:image836b39.png@13d0faf1.51b34be6]<http://www.jbaconsulting.com/nce-winner-2010>   [cid:imagea20f2e.png@e453a025.69b74420]<http://twitter.com/JBAConsulting>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From Anne.Brookes at jbaconsulting.com  Thu Dec  1 06:21:09 2011
From: Anne.Brookes at jbaconsulting.com (Anne Brookes)
Date: Thu Dec  1 07:55:28 2011
Subject: [gdal-dev] Difference in output using gdal_translate from
	FWTools	shell and cmd window
In-Reply-To: <4ED75E1D.9040404@metrico.lu>
References: <5503C113FD3EF745927F96031B470A0B74C9871183@mail-jba1.jbanorthwest.co.uk>
	<4ED75E1D.9040404@metrico.lu>
Message-ID: <5503C113FD3EF745927F96031B470A0B74C98711C8@mail-jba1.jbanorthwest.co.uk>

Hi,
Thx for your reply.  I'm not entirely sure what you mean about access to the proj and epsg libraries.  proj does seem to be a command that can be run from any cmd window.
I have checked for the existence of pcs.csv and there seem to be numerous versions (also pcs.override.csv) in various locations, including my FWTools2.0.4\data; under my GRASS6.4 installation folders and under ArcGIS installation folders.  I have tried running the gdalinfo commands both with a GDAL_DATA environment variable (pointing to FWTools2.0.4\data) and without this env variable but it didn't seem to make any difference.

What proj and epsg libraries are used by gdal and where should they be?
Thanks,
Anne

Anne Brookes
Senior Analyst





http://www.jbaconsulting.com/
South Barn
Broughton Hall
Skipton
North Yorkshire
BD23 3AE
T: +44 (0)1756 799919 F: 0845 8627772
The JBA Family
http://www.jbagroup.co.uk/ http://www.jbarisk.com/ http://www.jbaenergy.com/ http://www.jbatrust.org/ http://www.jbaconsulting.com/

This email is covered by JBA Consulting's http://www.jbaconsulting.com/disclaimer JBA Consulting is the trading name of Jeremy Benn Associates Limited, registered in England, company number 03246693, South Barn, Broughton Hall, Skipton, North Yorkshire, BD23 3AE.
http://www.jbaconsulting.com/nce-winner-2010  http://twitter.com/JBAConsulting





From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Broniewski
Sent: 01 December 2011 11:00
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Difference in output using gdal_translate from FWTools shell and cmd window

Hi,

are you sure that the same libraries (proj, epsg et. al.) are available
under both cirumstances? Do you have access to proj and epsg codes in
plain cmd?
That's where I would start to investigate ...

btw. I think the osgeo4w package is more recent than the fwtools build,
so might also have a look at that one


Frank

Am 01.12.2011 11:36, schrieb Anne Brookes:
> Hello,
> When I run gdalinfo and gdal_translate commands from the FWTools Shell (on Windows) the output is different to when I run the same commands from an ordinary cmd window (or from a python script). The difference is in the PROJCS, DATUM and SPHEROID metadata.
>
> Here is the (correct) output from the FWTools shell command window:
> C:\Program Files\FWTools2.0.4>gdalinfo : C:\JFLOW8\testgdal\D108787.tif
>
> Driver: GTiff/GeoTIFF
> Files: C:\JFLOW8\testgdal\D108787.tif
> Size is 597, 597
> Coordinate System is:
> PROJCS["ETRS89 / ETRS-LAEA",
>      GEOGCS["ETRS89",
>          DATUM["European_Terrestrial_Reference_System_1989",
>              SPHEROID["GRS 1980",6378137,298.2572221010002,
>                  AUTHORITY["EPSG","7019"]],
>              AUTHORITY["EPSG","6258"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4258"]],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","3035"]]
> Origin = (4039990.000000000000000,2950770.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 4039990.000, 2950770.000)
> Lower Left  ( 4039990.000, 2944800.000)
> Upper Right ( 4045960.000, 2950770.000)
> Lower Right ( 4045960.000, 2944800.000)
> Center      ( 4042975.000, 2947785.000)
> Band 1 Block=597x3 Type=Float32, ColorInterp=Gray
>    NoData Value=-9999
>
>
> And here is the output from the cmd window :
> C:\Document and Settings\jflownw>  " C:\Program Files\FWTools2.0.4\bin\gdalinfo" C:\JFLOW8\testgdal\D108787.tif
>
> Driver: GTiff/GeoTIFF
> Files: C:\JFLOW8\testgdal\D108787.tif
> Size is 597, 597
> Coordinate System is:
> PROJCS["unnamed",
>      GEOGCS["ETRS89",
>          DATUM["unknown",
>              SPHEROID["unretrievable - using WGS84",6378137,298.257223563]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433]],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","3035"]]
> Origin = (4039990.000000000000000,2950770.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Metadata:
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 4039990.000, 2950770.000)
> Lower Left  ( 4039990.000, 2944800.000)
> Upper Right ( 4045960.000, 2950770.000)
> Lower Right ( 4045960.000, 2944800.000)
> Center      ( 4042975.000, 2947785.000)
> Band 1 Block=597x3 Type=Float32, ColorInterp=Gray
>    NoData Value=-9999
>
> Please can anyone tell me why this is happening and what I need to do to be able to get the full DATUM and SPHEROID metadata when running the GDAL commands from outside of the FWTools shell, eg. from a python script or another cmd window?
> I have been puzzling over this for a while and it is now becoming quite urgent.
> Thanks
> Anne Brookes
> Senior Analyst
>
>
>
>
>
>
>
> [cid:imagea52157.png@0b641363.58fb4337]<http://www.jbaconsulting.com/>
>
>
> South Barn
> Broughton Hall
> Skipton
> North Yorkshire
> BD23 3AE
> T: +44 (0)1756 799919 F: 0845 8627772
>
>
> The JBA Family
>
> [cid:imageb7288b.png@04236f77.d2b04ae4]<http://www.jbagroup.co.uk/>   [cid:image840d25.png@a2776b7f.c5f34cb4]<http://www.jbarisk.com/>    [cid:image98f3a8.png@fecc7dc0.dc434408]<http://www.jbaenergy.com/>    [cid:image8ba6f0.png@b44205ef.33e84574]<http://www.jbatrust.org/>
> www.jbaconsulting.com<http://www.jbaconsulting.com/>
>
>
>
>
>
> This email is covered by JBA Consulting's email disclaimer<http://www.jbaconsulting.com/disclaimer>   JBA Consulting is the trading name of Jeremy Benn Associates Limited, registered in England, company number 03246693, South Barn, Broughton Hall, Skipton, North Yorkshire, BD23 3AE.
>
>
> [cid:image836b39.png@13d0faf1.51b34be6]<http://www.jbaconsulting.com/nce-winner-2010>   [cid:imagea20f2e.png@e453a025.69b74420]<http://twitter.com/JBAConsulting>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


--
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Thu Dec  1 13:48:27 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Dec  1 15:39:57 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
Message-ID: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>

Hi all,

As an ongoing effort to improve ESRI .prj file compatibility, I am
respectfully calling all users and devs to help in providing or
pointing to existing .prj files (in ESRI WKT format).

Specifically, I am working on improving support for TOWGS84 parameter
which is absent from ESRI .prj files , but there are probably other
things that need fixing also.
See this bug: http://trac.osgeo.org/gdal/ticket/4345 [reprojection
using ESRI .prj files is not accurate - missing TOWGS84]

Anyone who has experienced similar issues are encouraged to add
information to that bug report, or create a new one if they experience
other compatibility problems with ESRI WKT.

A related issue is how to find EPSG codes for GEOGCS, PROJCS and other
items (such as DATUM and SPHEROID) from incomplete WKT (such as ESRI
WKT).
Any hints and example files related to that are also welcome.


Regards,
Etienne
From etourigny.dev at gmail.com  Thu Dec  1 14:05:24 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu Dec  1 15:57:46 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
In-Reply-To: <4ED7CE63.3080808@squeakycode.net>
References: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
	<4ED7CE63.3080808@squeakycode.net>
Message-ID: <CA+TxYvN3N+QXGhZzb0Tm70SELLcB-kzn=nSRGzBhKzkxTtuYNg@mail.gmail.com>

Andy (and all),

no problem for dups, I'll quickly go through them all.  Yes please
send me a zip file.

Etienne

On Thu, Dec 1, 2011 at 4:58 PM, Andy Colson <andy@squeakycode.net> wrote:
> On 12/1/2011 12:48 PM, Etienne Tourigny wrote:
>>
>> Hi all,
>>
>> As an ongoing effort to improve ESRI .prj file compatibility, I am
>> respectfully calling all users and devs to help in providing or
>> pointing to existing .prj files (in ESRI WKT format).
>
>
> I have 2,400 .prj files, but most of them are probably the same. Most of
> them are NAD 83 Iowa North/South. ?Have some Minnesota, Dakota's and
> Illinois too.
>
> May not be easy to get a distinct list, care if you get dups? ?Want me to
> zip them up and email em?
>
> -Andy
From andy at squeakycode.net  Thu Dec  1 13:58:43 2011
From: andy at squeakycode.net (Andy Colson)
Date: Thu Dec  1 16:00:58 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
In-Reply-To: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
References: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
Message-ID: <4ED7CE63.3080808@squeakycode.net>

On 12/1/2011 12:48 PM, Etienne Tourigny wrote:
> Hi all,
>
> As an ongoing effort to improve ESRI .prj file compatibility, I am
> respectfully calling all users and devs to help in providing or
> pointing to existing .prj files (in ESRI WKT format).

I have 2,400 .prj files, but most of them are probably the same. Most of 
them are NAD 83 Iowa North/South.  Have some Minnesota, Dakota's and 
Illinois too.

May not be easy to get a distinct list, care if you get dups?  Want me 
to zip them up and email em?

-Andy
From even.rouault at mines-paris.org  Thu Dec  1 14:41:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec  1 16:36:36 2011
Subject: [gdal-dev] Re: Add an option to allow opening datasets/datasources
	from SWIG bindings even in case of error ?
In-Reply-To: <4ED750E9.2060901@gmail.com>
References: <201111302120.46446.even.rouault@mines-paris.org>
	<1322731794.4ed74912b4625@imp.free.fr> <4ED750E9.2060901@gmail.com>
Message-ID: <201112012041.56632.even.rouault@mines-paris.org>

Le jeudi 01 d?cembre 2011 11:03:21, Ari Jolma a ?crit :
> On 12/01/2011 11:29 AM, Even Rouault wrote:
> > Fatal errors are... fatal. They will result in an abort(). They are only
> > emitted in a few places, like the CPLMalloc() routine that is guaranteed
> > to return a non-NULL pointer... or abort. So it is only designed for
> > very small allocs. For big allocs, VSIMalloc() should be used and the
> > caller should handle gracefully a NULL pointer.
> 
> I don't want my GUI app never to abort. I want to be able to catch *all*
> errors. But that's irrelevant in this case.

Sure. However I doubt you will encounter a CE_Fatal error in normal 
situations. If a CPLMalloc(10) fails, this would be the sign of something bad 
elsewhere, like a continuous memory leak, ...
I'm not aware of users complaining about that behaviour of GDAL. Perhaps they 
will dare now ;-)

> 
> But is there a way to test for failure state and convert it into a
> warning? I don't mean changing anything in GDAL itself, only add some
> clever code into the bindings? Clearing the failure state is possible,
> could we fetch the error message and raise a warning?

Something like :

char* pszLastErrorMsg = CPLStrdup(CPLGetLastErrorMsg());
CPLError(CE_Warning, CPLGetLastErrorNo(), "%s", pszLastErrorMsg);
CPLFree(pszLastErrorMsg);

However it won't undo the last CE_Failure emitted. It will re-emit it as a 
CE_Warning.

Perhaps we need a CPLSetLastErrorType() to override the error type. A bit 
hackish however.

> 
> > Yes, I agree that's unlikely. That's just about giving the capability to
> > the user (well, developer) to have the level of control needed. The
> > issue now is that there is no way from Java/Python/etc. to open those
> > datasets/datasources when a CE_Failure is emitted.
> > 
> > Another way I've imagined to avoid the bIgnoreError flag is to link with
> > the gdal.UseExceptions()/DontUseExceptions() methods that are at least
> > found in Python and Java bindings, which control if errors are turned
> > into Python/Java exceptions. One could imagine that in the
> > DontUseExceptions() mode, the check for CE_Failure done in the swig
> > wrapper is completely skipped. However I'm not sure if it exists for the
> > C# or Perl bindings. Currently there's a bUseExceptions global variable
> > in swig/include/python/python_exceptions.i or
> > swig/include/java/java_exceptions.i
> 
> That sounds too heavy to me. I don't like the global variable there,
> which leads to problems with threads at least. It exists in Perl
> bindings but it feels very much like a hack.

Yes, although in practise, I'd suppose that it is used as a one-time setting 
at the beginning of your application : either your app is designed to test for 
return codes, or it expects exceptions. But a mix of the two behaviour in 
different threads seems unlikely.
From Martin.Daly at cadcorp.com  Thu Dec  1 15:05:55 2011
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Thu Dec  1 17:17:39 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
In-Reply-To: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
References: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
Message-ID: <11A8567A97B15648846060F5CD818EB8C62B55138D@DEV001EX.Dev.cadcorp.net>

> As an ongoing effort to improve ESRI .prj file compatibility, I am respectfully
> calling all users and devs to help in providing or pointing to existing .prj files
> (in ESRI WKT format).

http://help.arcgis.com/en/arcims/10.0/mainhelp/mergedProjects/ArcXMLGuide/elements/gcs.htm
http://help.arcgis.com/en/arcims/10.0/mainhelp/mergedProjects/ArcXMLGuide/elements/pcs.htm
http://help.arcgis.com/en/arcims/10.0/mainhelp/mergedProjects/ArcXMLGuide/elements/dattrans.htm

Martin


********************************************************************************************************************
Cadcorp is a trading name of Computer Aided Development Corporation Limited; registered in England;
number: 1955756. Registered office : Sterling Court, Norton Road, Stevenage, Herts SG1 2JY

This email is confidential and may be privileged and should not be used, read
or copied by anyone who is not the original intended recipient. If you have
received this email in error please inform the sender and delete it from
your mailbox or any other storage mechanism. Unless specifically stated,
nothing in this email constitutes an offer by Cadcorp and Cadcorp does not
warrant that any information contained in this email is accurate.
Cadcorp cannot accept liability for any statements made which are clearly the
sender's own and not expressly made on behalf of Cadcorp or one of its agents.
Please rely on your own virus check. No responsibility is taken by Cadcorp
for any damage arising out of any bug or virus infection.
********************************************************************************************************************

From warmerdam at pobox.com  Fri Dec  2 01:29:48 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec  2 04:00:19 2011
Subject: [gdal-dev] Re: Add an option to allow opening
	datasets/datasources from SWIG bindings even in case of error ?
In-Reply-To: <201112012041.56632.even.rouault@mines-paris.org>
References: <201111302120.46446.even.rouault@mines-paris.org>
	<1322731794.4ed74912b4625@imp.free.fr> <4ED750E9.2060901@gmail.com>
	<201112012041.56632.even.rouault@mines-paris.org>
Message-ID: <4ED8705C.5040803@pobox.com>


>> But is there a way to test for failure state and convert it into a
>> warning? I don't mean changing anything in GDAL itself, only add some
>> clever code into the bindings? Clearing the failure state is possible,
>> could we fetch the error message and raise a warning?

Folks,

For reference, I believe the bindings should behave specially
for GDALOpen and OGROpen and that they ought to *not* through
an exception even if an error was set as long as the function
returns a non-NULL pointer.

Unfortunately I find the bindings logic challenging at times,
and I don't want to step on the toes of the bindings maintainers,
so I have not tried to apply my approach.

I agree with the poster who suggesting having an "ignore errors"
flag for open isn't a great solution.  It just further complicates
something that doesn't really need to be complicated.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From Konstantin.Baumann at autodesk.com  Fri Dec  2 04:07:41 2011
From: Konstantin.Baumann at autodesk.com (Konstantin Baumann)
Date: Fri Dec  2 06:48:36 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
Message-ID: <CE66632AE1610940A559DB5756F262AB21B7ED@005-TK5MPN1-012.MGDADSK.autodesk.com>

Hi Etienne,

maybe you could also use the ESRI WKTs from: http://spatialreference.org/
e.g.: http://spatialreference.org/ref/epsg/4326/esriwkt/

Kosta

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Etienne Tourigny
> Sent: Thursday, December 01, 2011 7:48 PM
> To: gdal-dev
> Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for testing
> 
> Hi all,
> 
> As an ongoing effort to improve ESRI .prj file compatibility, I am respectfully
> calling all users and devs to help in providing or pointing to existing .prj files
> (in ESRI WKT format).
> 
> Specifically, I am working on improving support for TOWGS84 parameter
> which is absent from ESRI .prj files , but there are probably other things that
> need fixing also.
> See this bug: http://trac.osgeo.org/gdal/ticket/4345 [reprojection using ESRI
> .prj files is not accurate - missing TOWGS84]
> 
> Anyone who has experienced similar issues are encouraged to add
> information to that bug report, or create a new one if they experience other
> compatibility problems with ESRI WKT.
> 
> A related issue is how to find EPSG codes for GEOGCS, PROJCS and other
> items (such as DATUM and SPHEROID) from incomplete WKT (such as ESRI
> WKT).
> Any hints and example files related to that are also welcome.
> 
> 
> Regards,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Fri Dec  2 04:52:00 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Dec  2 07:33:34 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
In-Reply-To: <00a301ccb0d1$ae9f4a30$0bddde90$@gmail.com>
References: <00a301ccb0d1$ae9f4a30$0bddde90$@gmail.com>
Message-ID: <CA+TxYvN1s_zkoTooUBZWOxyj=G6+ECFGv_nUO4Y3eK=D6=p+1Q@mail.gmail.com>

According to the about page, GDAL and proj.4 are used to generate the
database, so it would be of limited use in this case (as the ESRI .prj
files are generated by GDAL).

However, it seems that there are some "User-defined (called sr-org)"
definitions that might not be related to GDAL?

http://spatialreference.org/about/

On Fri, Dec 2, 2011 at 7:06 AM, Konstantin Baumann
<kosta.baumann@googlemail.com> wrote:
> Hi Etienne,
>
> maybe you could also use the ESRI WKTs from: http://spatialreference.org/
> e.g.: http://spatialreference.org/ref/epsg/4326/esriwkt/
>
> Kosta
>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
>> bounces@lists.osgeo.org] On Behalf Of Etienne Tourigny
>> Sent: Thursday, December 01, 2011 7:48 PM
>> To: gdal-dev
>> Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
> testing
>>
>> Hi all,
>>
>> As an ongoing effort to improve ESRI .prj file compatibility, I am
> respectfully
>> calling all users and devs to help in providing or pointing to existing
> .prj files
>> (in ESRI WKT format).
>>
>> Specifically, I am working on improving support for TOWGS84 parameter
>> which is absent from ESRI .prj files , but there are probably other things
> that
>> need fixing also.
>> See this bug: http://trac.osgeo.org/gdal/ticket/4345 [reprojection using
> ESRI
>> .prj files is not accurate - missing TOWGS84]
>>
>> Anyone who has experienced similar issues are encouraged to add
>> information to that bug report, or create a new one if they experience
> other
>> compatibility problems with ESRI WKT.
>>
>> A related issue is how to find EPSG codes for GEOGCS, PROJCS and other
>> items (such as DATUM and SPHEROID) from incomplete WKT (such as ESRI
>> WKT).
>> Any hints and example files related to that are also welcome.
>>
>>
>> Regards,
>> Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From heidegg at hotmail.com  Fri Dec  2 05:38:31 2011
From: heidegg at hotmail.com (Roger Phillips)
Date: Fri Dec  2 08:23:36 2011
Subject: [gdal-dev] Gdal_translate + Google + Wgs84
In-Reply-To: <SNT111-W3576166F22D671E5F34250AAB60@phx.gbl>
References: <SNT111-W3576166F22D671E5F34250AAB60@phx.gbl>
Message-ID: <SNT111-W338751FE69D41B74BB5F81AAB60@phx.gbl>


Hello folks,

I'm a beginner with Gdal and I have a question:

Say,
 I have a rectangular tile defined in WGS84 coordinates using longitude 
and latitude. I want to receive this file from google for the respective
 rect. However, as far as I know, google uses mercator coordinates in 
its maps so the image will be distorted. Currently, I'm experimenting 
with this call:

gdal_translate frmt_wms_googlemaps_tms.xml out.tif -projwin -12712685  66
56748 -12679290 6621294 -outsize 1% 1%

What do I have to change on this call so it will give me an undistorted image in WGS84?

Thanks a lot!

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111202/ae01218f/attachment-0001.html
From etourigny.dev at gmail.com  Fri Dec  2 06:38:11 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Dec  2 09:25:21 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
In-Reply-To: <11A8567A97B15648846060F5CD818EB8C62B55138D@DEV001EX.Dev.cadcorp.net>
References: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
	<11A8567A97B15648846060F5CD818EB8C62B55138D@DEV001EX.Dev.cadcorp.net>
Message-ID: <CA+TxYvMZVLjuRjaM9J6zPdVMof43r4h4UWMyEWx2ELcgzC9KCw@mail.gmail.com>

Martin, thanks for this reference!

It seems that the dattrans.htm file contains datum transformations
used by ESRI, with a number of methods.

Would it make any sense to use that information (using a new derived
.csv file) to add TOWGS84 parameters to ESRI WKT definitions, instead
of using the ones defined in gcs.csv?


For example:

this one matches the TOWGS84 that GDAL uses for EPSG:4618
GEOGTRAN["SAD_1969_To_WGS_1984_1",GEOGCS["GCS_South_American_1969",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Truncated",6378160.0,298.25]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],METHOD["Geocentric_Translation"],PARAMETER["X_Axis_Translation",-57.0],PARAMETER["Y_Axis_Translation",1.0],PARAMETER["Z_Axis_Translation",-41.0]]

EOGTRAN["RT90_To_WGS_1984_2",GEOGCS["GCS_RT_1990",DATUM["D_RT_1990",SPHEROID["Bessel_1841",6377397.155,299.1528128]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],METHOD["Coordinate_Frame"],PARAMETER["X_Axis_Translation",414.1],PARAMETER["Y_Axis_Translation",41.3],PARAMETER["Z_Axis_Translation",603.1],PARAMETER["X_Axis_Rotation",0.855],PARAMETER["Y_Axis_Rotation",-2.141],PARAMETER["Z_Axis_Rotation",7.023],PARAMETER["Scale_Difference",0.0]]

GEOGTRAN["Palestine_1923_To_WGS_1984_1",GEOGCS["GCS_Palestine_1923",DATUM["D_Palestine_1923",SPHEROID["Clarke_1880_Benoit",6378300.79,293.466234571]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],METHOD["Position_Vector"],PARAMETER["X_Axis_Translation",-275.7224],PARAMETER["Y_Axis_Translation",94.7824],PARAMETER["Z_Axis_Translation",340.8944],PARAMETER["X_Axis_Rotation",-8.001],PARAMETER["Y_Axis_Rotation",-4.42],PARAMETER["Z_Axis_Rotation",-11.821],PARAMETER["Scale_Difference",1.0]]

GEOGTRAN["Anguilla_1957_To_WGS_1984_1",GEOGCS["GCS_Anguilla_1957",DATUM["D_Anguilla_1957",SPHEROID["Clarke_1880_RGS",6378249.145,293.465]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],METHOD["Geographic_2D_Offset"],PARAMETER["Longitude_Offset",4.4],PARAMETER["Latitude_Offset",-18.0]]



On Thu, Dec 1, 2011 at 6:05 PM, Martin Daly <Martin.Daly@cadcorp.com> wrote:
>> As an ongoing effort to improve ESRI .prj file compatibility, I am respectfully
>> calling all users and devs to help in providing or pointing to existing .prj files
>> (in ESRI WKT format).
>
> http://help.arcgis.com/en/arcims/10.0/mainhelp/mergedProjects/ArcXMLGuide/elements/gcs.htm
> http://help.arcgis.com/en/arcims/10.0/mainhelp/mergedProjects/ArcXMLGuide/elements/pcs.htm
> http://help.arcgis.com/en/arcims/10.0/mainhelp/mergedProjects/ArcXMLGuide/elements/dattrans.htm
>
> Martin
>
>
> ********************************************************************************************************************
> Cadcorp is a trading name of Computer Aided Development Corporation Limited; registered in England;
> number: 1955756. Registered office : Sterling Court, Norton Road, Stevenage, Herts SG1 2JY
>
> This email is confidential and may be privileged and should not be used, read
> or copied by anyone who is not the original intended recipient. If you have
> received this email in error please inform the sender and delete it from
> your mailbox or any other storage mechanism. Unless specifically stated,
> nothing in this email constitutes an offer by Cadcorp and Cadcorp does not
> warrant that any information contained in this email is accurate.
> Cadcorp cannot accept liability for any statements made which are clearly the
> sender's own and not expressly made on behalf of Cadcorp or one of its agents.
> Please rely on your own virus check. No responsibility is taken by Cadcorp
> for any damage arising out of any bug or virus infection.
> ********************************************************************************************************************
>
From etourigny.dev at gmail.com  Fri Dec  2 08:31:13 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Dec  2 11:24:40 2011
Subject: [gdal-dev] GTiff format does not preserve WKT EXTENSION nodes?
Message-ID: <CA+TxYvMg_Tv9TWiGZD5Fjto6zYsz+gqUBq-ucy3tjG8yBhaLQg@mail.gmail.com>

Hi all,

I have been trying to override the MODIS WKT definition (derived from
the source HDF4 files using gdal_translate), which apparently is not
sufficient for correct transformations.
The correct srs is  '+proj=sinu +R=6371007.181 +nadgrids=@null
+wktext', whereas the one stored in GTiff files is '+proj=sinu
+lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181 +units=m +no_defs
'

I tried to override the projection ref with gdal_translate, but the
resulting file (in GTiff format) does not keep the EXTENSION nodes.

Examples below.

Is this a limitation of GTiff format that cannot be fixed?  Is there
another format (except VRT) that can keep EXTENSION nodes?
The workaround is to override the SRS with -s_srs='...' when a
transformation is needed, but it would be better if the file itself
could store that information.

thanks,
Etienne

$ gdal_translate  -a_srs '+proj=sinu +R=6371007.181 +nadgrids=@null
+wktext' MCD12Q1.IGBP.h11v07.2002.tif tmp2.tif

$ gdalsrsinfo tmp2.tif

PROJ.4 : '+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181
+b=6371007.181 +units=m +no_defs '

OGC WKT :
PROJCS["unnamed",
    GEOGCS["unnamed ellipse",
        DATUM["unknown",
            SPHEROID["unnamed",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]

which is the same(almost) as the input file:

$ gdalsrsinfo MCD12Q1.IGBP.h11v07.2002.tif

PROJ.4 : '+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181
+b=6371007.181 +units=m +no_defs '

OGC WKT :
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["Not_specified_based_on_custom_spheroid",
            SPHEROID["Custom spheroid",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]



However, using vrt format shows that gdal_translate does set the
output srs correctly:

$ gdal_translate -of vrt -co COMPRESS=DEFLATE -a_nodata 255 -a_srs
'+proj=sinu +R=6371007.181 +nadgrids=@null +wktext'
MCD12Q1.IGBP.h11v07.2002.tif tmp2.vrt
$ gdalsrsinfo tmp2.vrt

PROJ.4 : '+proj=sinu +R=6371007.181 +nadgrids=@null +wktext'

OGC WKT :
PROJCS["unnamed",
    GEOGCS["unnamed ellipse",
        DATUM["unknown",
            SPHEROID["unnamed",6371007.181,0],
            EXTENSION["PROJ4_GRIDS","@null"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    EXTENSION["PROJ4","+proj=sinu +R=6371007.181 +nadgrids=@null +wktext"]]


For reference here is how I generate the GTiff from HDF4 files (similar to
From chaitanya.ch at gmail.com  Fri Dec  2 09:22:01 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Dec  2 12:17:50 2011
Subject: [gdal-dev] Gdal_translate + Google + Wgs84
In-Reply-To: <SNT111-W338751FE69D41B74BB5F81AAB60@phx.gbl>
References: <SNT111-W3576166F22D671E5F34250AAB60@phx.gbl>
	<SNT111-W338751FE69D41B74BB5F81AAB60@phx.gbl>
Message-ID: <CAMKgpOasGVH1y67i+wdwnSW8joHZYz+25YaNvJSC=f0_Mj5+kw@mail.gmail.com>

Roger,

Use gdalwarp instead. Set the -t_srs option to EPSG:4326
Extents can be set using -te
Since the projection is changing, specifying the size in percentage of the
original is not possible. You can use -tr or -ts for this.
Also, note the order of the arguments for filenames.

On Fri, Dec 2, 2011 at 4:08 PM, Roger Phillips <heidegg@hotmail.com> wrote:

>  Hello folks,
>
> I'm a beginner with Gdal and I have a question:
>
> Say, I have a rectangular tile defined in WGS84 coordinates using
> longitude and latitude. I want to receive this file from google for the
> respective rect. However, as far as I know, google uses mercator
> coordinates in its maps so the image will be distorted. Currently, I'm
> experimenting with this call:
>
> gdal_translate frmt_wms_googlemaps_tms.xml out.tif -projwin -12712685  66
> 56748 -12679290 6621294 -outsize 1% 1%
>
> What do I have to change on this call so it will give me an undistorted
> image in WGS84?
>
> Thanks a lot!
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111202/c5b3f4bb/attachment.html
From traviskirstine at gmail.com  Fri Dec  2 10:35:45 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri Dec  2 13:35:41 2011
Subject: [gdal-dev] Gdal_translate + Google + Wgs84
In-Reply-To: <CAMKgpOasGVH1y67i+wdwnSW8joHZYz+25YaNvJSC=f0_Mj5+kw@mail.gmail.com>
References: <SNT111-W3576166F22D671E5F34250AAB60@phx.gbl>
	<SNT111-W338751FE69D41B74BB5F81AAB60@phx.gbl>
	<CAMKgpOasGVH1y67i+wdwnSW8joHZYz+25YaNvJSC=f0_Mj5+kw@mail.gmail.com>
Message-ID: <CALtm4h0KeCnvD9s8ap_Tgo96-Hxr8VgByuAhTT0MiT9eeVVksg@mail.gmail.com>

Roger,

It appears that you are attempting to use the GDAL TMS driver to
convert Google Maps Data into a Geotiff, this would be a violation of
the Google Maps Terms and Conditions:

http://www.google.com/intl/en_ALL/help/terms_local.html

Regards



On 2 December 2011 09:22, Chaitanya kumar CH <chaitanya.ch@gmail.com> wrote:
> Roger,
>
> Use gdalwarp instead. Set the -t_srs option to EPSG:4326
> Extents can be set using -te
> Since the projection is changing, specifying the size in percentage of the
> original is not possible. You can use -tr or -ts for this.
> Also, note the order of the arguments for filenames.
>
> On Fri, Dec 2, 2011 at 4:08 PM, Roger Phillips <heidegg@hotmail.com> wrote:
>>
>> Hello folks,
>>
>> I'm a beginner with Gdal and I have a question:
>>
>> Say, I have a rectangular tile defined in WGS84 coordinates using
>> longitude and latitude. I want to receive this file from google for the
>> respective rect. However, as far as I know, google uses mercator coordinates
>> in its maps so the image will be distorted. Currently, I'm experimenting
>> with this call:
>>
>> gdal_translate frmt_wms_googlemaps_tms.xml out.tif -projwin -12712685? 66
>> 56748 -12679290 6621294 -outsize 1% 1%
>>
>> What do I have to change on this call so it will give me an undistorted
>> image in WGS84?
>>
>> Thanks a lot!
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Martin.Daly at cadcorp.com  Fri Dec  2 11:00:00 2011
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Fri Dec  2 14:00:32 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
In-Reply-To: <CA+TxYvMZVLjuRjaM9J6zPdVMof43r4h4UWMyEWx2ELcgzC9KCw@mail.gmail.com>
References: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
	<11A8567A97B15648846060F5CD818EB8C62B55138D@DEV001EX.Dev.cadcorp.net>
	<CA+TxYvMZVLjuRjaM9J6zPdVMof43r4h4UWMyEWx2ELcgzC9KCw@mail.gmail.com>
Message-ID: <11A8567A97B15648846060F5CD818EB8C62B55138F@DEV001EX.Dev.cadcorp.net>

> Martin, thanks for this reference!
> 
> It seems that the dattrans.htm file contains datum transformations used
> by ESRI, with a number of methods.
> 
> Would it make any sense to use that information (using a new derived
> .csv file) to add TOWGS84 parameters to ESRI WKT definitions, instead
> of using the ones defined in gcs.csv?

I couldn't really say; it would depend on what you are trying to achieve.

However, it is my understanding that you are safe in assuming that *if* the WKT matches one of these standard ones, *and* the ESRI code matches an EPSG one, that the EPSG definition is being used (or at least intended). *If* I am right then you should be able to use the GDAL definition directly, instead of trying to morph one to the other.

Martin


********************************************************************************************************************
Cadcorp is a trading name of Computer Aided Development Corporation Limited; registered in England;
number: 1955756. Registered office : Sterling Court, Norton Road, Stevenage, Herts SG1 2JY

This email is confidential and may be privileged and should not be used, read
or copied by anyone who is not the original intended recipient. If you have
received this email in error please inform the sender and delete it from
your mailbox or any other storage mechanism. Unless specifically stated,
nothing in this email constitutes an offer by Cadcorp and Cadcorp does not
warrant that any information contained in this email is accurate.
Cadcorp cannot accept liability for any statements made which are clearly the
sender's own and not expressly made on behalf of Cadcorp or one of its agents.
Please rely on your own virus check. No responsibility is taken by Cadcorp
for any damage arising out of any bug or virus infection.
********************************************************************************************************************

From etourigny.dev at gmail.com  Fri Dec  2 11:25:00 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri Dec  2 14:27:30 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
In-Reply-To: <11A8567A97B15648846060F5CD818EB8C62B55138F@DEV001EX.Dev.cadcorp.net>
References: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
	<11A8567A97B15648846060F5CD818EB8C62B55138D@DEV001EX.Dev.cadcorp.net>
	<CA+TxYvMZVLjuRjaM9J6zPdVMof43r4h4UWMyEWx2ELcgzC9KCw@mail.gmail.com>
	<11A8567A97B15648846060F5CD818EB8C62B55138F@DEV001EX.Dev.cadcorp.net>
Message-ID: <CA+TxYvNrkYNx1FO4OAx8qXFKjxBpxiOT+0FnJQoEkB9fEuRLUA@mail.gmail.com>

On Fri, Dec 2, 2011 at 2:00 PM, Martin Daly <Martin.Daly@cadcorp.com> wrote:
>> Martin, thanks for this reference!
>>
>> It seems that the dattrans.htm file contains datum transformations used
>> by ESRI, with a number of methods.
>>
>> Would it make any sense to use that information (using a new derived
>> .csv file) to add TOWGS84 parameters to ESRI WKT definitions, instead
>> of using the ones defined in gcs.csv?
>
> I couldn't really say; it would depend on what you are trying to achieve.
>
> However, it is my understanding that you are safe in assuming that *if* the WKT matches one of these standard ones, *and* the ESRI code matches an EPSG one, that the EPSG definition is being used (or at least intended). *If* I am right then you should be able to use the GDAL definition directly, instead of trying to morph one to the other.

I'm not sure I understand.  " one of these standard ones" refers to
the WKT definitions by ESRI?  In that case, we could compare the given
WKT (in .prj file), and lookup the associated ESRI code, matching it
to EPSG code.

Are you suggesting that we could use the GDAL definition (as derived
from importFromEPSG()), without doing the morphFromESRI in this case?

>
> Martin
>
>
> ********************************************************************************************************************
> Cadcorp is a trading name of Computer Aided Development Corporation Limited; registered in England;
> number: 1955756. Registered office : Sterling Court, Norton Road, Stevenage, Herts SG1 2JY
>
> This email is confidential and may be privileged and should not be used, read
> or copied by anyone who is not the original intended recipient. If you have
> received this email in error please inform the sender and delete it from
> your mailbox or any other storage mechanism. Unless specifically stated,
> nothing in this email constitutes an offer by Cadcorp and Cadcorp does not
> warrant that any information contained in this email is accurate.
> Cadcorp cannot accept liability for any statements made which are clearly the
> sender's own and not expressly made on behalf of Cadcorp or one of its agents.
> Please rely on your own virus check. No responsibility is taken by Cadcorp
> for any damage arising out of any bug or virus infection.
> ********************************************************************************************************************
>
From Martin.Daly at cadcorp.com  Fri Dec  2 11:40:17 2011
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Fri Dec  2 14:43:02 2011
Subject: [gdal-dev] Call to users and devs - ESRI .prj files needed for
	testing
In-Reply-To: <CA+TxYvNrkYNx1FO4OAx8qXFKjxBpxiOT+0FnJQoEkB9fEuRLUA@mail.gmail.com>
References: <CA+TxYvNnssayTWFSb0vfMmpaeLwop1M8_+qb0GxeO45DQ6j3sw@mail.gmail.com>
	<11A8567A97B15648846060F5CD818EB8C62B55138D@DEV001EX.Dev.cadcorp.net>
	<CA+TxYvMZVLjuRjaM9J6zPdVMof43r4h4UWMyEWx2ELcgzC9KCw@mail.gmail.com>
	<11A8567A97B15648846060F5CD818EB8C62B55138F@DEV001EX.Dev.cadcorp.net>
	<CA+TxYvNrkYNx1FO4OAx8qXFKjxBpxiOT+0FnJQoEkB9fEuRLUA@mail.gmail.com>
Message-ID: <11A8567A97B15648846060F5CD818EB8C62B551391@DEV001EX.Dev.cadcorp.net>

> I'm not sure I understand.  " one of these standard ones" refers to the
> WKT definitions by ESRI?  In that case, we could compare the given WKT
> (in .prj file), and lookup the associated ESRI code, matching it to
> EPSG code.

Correct.

> Are you suggesting that we could use the GDAL definition (as derived
> from importFromEPSG()), without doing the morphFromESRI in this case?

Correct again.

Martin


********************************************************************************************************************
Cadcorp is a trading name of Computer Aided Development Corporation Limited; registered in England;
number: 1955756. Registered office : Sterling Court, Norton Road, Stevenage, Herts SG1 2JY

This email is confidential and may be privileged and should not be used, read
or copied by anyone who is not the original intended recipient. If you have
received this email in error please inform the sender and delete it from
your mailbox or any other storage mechanism. Unless specifically stated,
nothing in this email constitutes an offer by Cadcorp and Cadcorp does not
warrant that any information contained in this email is accurate.
Cadcorp cannot accept liability for any statements made which are clearly the
sender's own and not expressly made on behalf of Cadcorp or one of its agents.
Please rely on your own virus check. No responsibility is taken by Cadcorp
for any damage arising out of any bug or virus infection.
********************************************************************************************************************

From warmerdam at pobox.com  Fri Dec  2 12:06:45 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec  2 15:11:35 2011
Subject: [gdal-dev] GTiff format does not preserve WKT EXTENSION nodes?
In-Reply-To: <CA+TxYvMg_Tv9TWiGZD5Fjto6zYsz+gqUBq-ucy3tjG8yBhaLQg@mail.gmail.com>
References: <CA+TxYvMg_Tv9TWiGZD5Fjto6zYsz+gqUBq-ucy3tjG8yBhaLQg@mail.gmail.com>
Message-ID: <4ED905A5.3060401@pobox.com>

On 11-12-02 05:31 AM, Etienne Tourigny wrote:
> Hi all,
>
> I have been trying to override the MODIS WKT definition (derived from
> the source HDF4 files using gdal_translate), which apparently is not
> sufficient for correct transformations.
> The correct srs is  '+proj=sinu +R=6371007.181 +nadgrids=@null
> +wktext', whereas the one stored in GTiff files is '+proj=sinu
> +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=6371007.181 +units=m +no_defs
> '
>
> I tried to override the projection ref with gdal_translate, but the
> resulting file (in GTiff format) does not keep the EXTENSION nodes.
>
> Examples below.
>
> Is this a limitation of GTiff format that cannot be fixed?  Is there
> another format (except VRT) that can keep EXTENSION nodes?
> The workaround is to override the SRS with -s_srs='...' when a
> transformation is needed, but it would be better if the file itself
> could store that information.

Etienne,

Most of the raster formats with their own way of representing coordinate
systems will not support extension nodes and will tend to be somewhat
lossy in other aspects of the coordinate system as well.  Any format that
is completely dependent on .aux.xml files for the coordinate system (like
png, jpeg, etc) will preserve it.

It seems like their ought to be a way to force GeoTIFF to write and use the
.aux.xml instead of internal tags so as to preserve the full SRS definition
but nothing immediately comes to mind.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From ealpert at digitalglobe.com  Fri Dec  2 16:19:36 2011
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri Dec  2 19:43:29 2011
Subject: [gdal-dev] GDAL Ruby Bindings
In-Reply-To: <89ADC47B-59E4-4B70-BCDD-7BEA7368DF09@gmail.com>
References: <89ADC47B-59E4-4B70-BCDD-7BEA7368DF09@gmail.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330853A6FF@COMAIL01.digitalglobe.com>

Does anyone know if this made it into 1.8.1? The bug is closed but my
ruby compile with swig 2.04 is still failing.

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jim Klassen
Sent: Thursday, March 17, 2011 8:21 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] GDAL Ruby Bindings

 

This message has been archived. View the original item
<https://cosev.digitalglobe.com/EnterpriseVault/ViewMessage.asp?VaultId=
1A1EA27771AEC4B4884E8701F0A6D75C11110000cosev.digitalglobe.com&SavesetId
=204000000000000~201103171421260000~1~E6D07C89FD89426CAE8E6731D75C89B> 

I have updated the Ruby bindings so that they will build against Ruby
1.9 and the changes are in trunk.  I am looking for people to test and
give me feedback.   If it works well for people, the changes may make it
into a 1.8.x release.

Details are available at the following URLs:

http://trac.osgeo.org/gdal/wiki/GdalOgrInRuby

http://trac.osgeo.org/gdal/ticket/3999

Jim Klassen_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 5138 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111202/7916c739/attachment-0001.bin
From even.rouault at mines-paris.org  Fri Dec  2 16:31:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec  2 19:50:50 2011
Subject: [gdal-dev] GDAL Ruby Bindings
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB2330853A6FF@COMAIL01.digitalglobe.com>
References: <89ADC47B-59E4-4B70-BCDD-7BEA7368DF09@gmail.com>
	<8B319E5A30FF4A48BE7EEAAF609DB2330853A6FF@COMAIL01.digitalglobe.com>
Message-ID: <201112022231.29303.even.rouault@mines-paris.org>

Le vendredi 02 d?cembre 2011 22:19:36, Ethan Alpert a ?crit :
> Does anyone know if this made it into 1.8.1? The bug is closed but my
> ruby compile with swig 2.04 is still failing.

According to the comments in the ticket, this was pushed in the developement 
version (1.9.0dev), but not backported in 1.8 branch.

> 
> 
> 
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jim Klassen
> Sent: Thursday, March 17, 2011 8:21 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] GDAL Ruby Bindings
> 
> 
> 
> This message has been archived. View the original item
> <https://cosev.digitalglobe.com/EnterpriseVault/ViewMessage.asp?VaultId=
> 1A1EA27771AEC4B4884E8701F0A6D75C11110000cosev.digitalglobe.com&SavesetId
> =204000000000000~201103171421260000~1~E6D07C89FD89426CAE8E6731D75C89B>
> 
> I have updated the Ruby bindings so that they will build against Ruby
> 1.9 and the changes are in trunk.  I am looking for people to test and
> give me feedback.   If it works well for people, the changes may make it
> into a 1.8.x release.
> 
> Details are available at the following URLs:
> 
> http://trac.osgeo.org/gdal/wiki/GdalOgrInRuby
> 
> http://trac.osgeo.org/gdal/ticket/3999
> 
> Jim Klassen_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> This electronic communication and any attachments may contain confidential
> and proprietary information of DigitalGlobe, Inc. If you are not the
> intended recipient, or an agent or employee responsible for delivering
> this communication to the intended recipient, or if you have received this
> communication in error, please do not print, copy, retransmit, disseminate
> or otherwise use the information. Please indicate to the sender that you
> have received this communication in error, and delete the copy you
> received. DigitalGlobe reserves the right to monitor any electronic
> communication sent or received by its employees, agents or
> representatives.
From ealpert at digitalglobe.com  Fri Dec  2 16:35:57 2011
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri Dec  2 19:55:27 2011
Subject: [gdal-dev] GDAL Ruby Bindings
In-Reply-To: <201112022231.29303.even.rouault@mines-paris.org>
References: <89ADC47B-59E4-4B70-BCDD-7BEA7368DF09@gmail.com>
	<8B319E5A30FF4A48BE7EEAAF609DB2330853A6FF@COMAIL01.digitalglobe.com>
	<201112022231.29303.even.rouault@mines-paris.org>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330853A719@COMAIL01.digitalglobe.com>

Thanks that's what I just discovered. I applied the patches to 1.8.1 and now have successfully built ruby bindings for 1.8.1

-e

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Friday, December 02, 2011 2:31 PM
To: gdal-dev@lists.osgeo.org
Cc: Ethan Alpert; Jim Klassen
Subject: Re: [gdal-dev] GDAL Ruby Bindings

Le vendredi 02 d?cembre 2011 22:19:36, Ethan Alpert a ?crit :
> Does anyone know if this made it into 1.8.1? The bug is closed but my
> ruby compile with swig 2.04 is still failing.

According to the comments in the ticket, this was pushed in the developement 
version (1.9.0dev), but not backported in 1.8 branch.

> 
> 
> 
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jim Klassen
> Sent: Thursday, March 17, 2011 8:21 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] GDAL Ruby Bindings
> 
> 
> 
> This message has been archived. View the original item
> <https://cosev.digitalglobe.com/EnterpriseVault/ViewMessage.asp?VaultId=
> 1A1EA27771AEC4B4884E8701F0A6D75C11110000cosev.digitalglobe.com&SavesetId
> =204000000000000~201103171421260000~1~E6D07C89FD89426CAE8E6731D75C89B>
> 
> I have updated the Ruby bindings so that they will build against Ruby
> 1.9 and the changes are in trunk.  I am looking for people to test and
> give me feedback.   If it works well for people, the changes may make it
> into a 1.8.x release.
> 
> Details are available at the following URLs:
> 
> http://trac.osgeo.org/gdal/wiki/GdalOgrInRuby
> 
> http://trac.osgeo.org/gdal/ticket/3999
> 
> Jim Klassen_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> This electronic communication and any attachments may contain confidential
> and proprietary information of DigitalGlobe, Inc. If you are not the
> intended recipient, or an agent or employee responsible for delivering
> this communication to the intended recipient, or if you have received this
> communication in error, please do not print, copy, retransmit, disseminate
> or otherwise use the information. Please indicate to the sender that you
> have received this communication in error, and delete the copy you
> received. DigitalGlobe reserves the right to monitor any electronic
> communication sent or received by its employees, agents or
> representatives.

This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

From JARED.RUBIN at saic.com  Fri Dec  2 16:46:29 2011
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Fri Dec  2 20:22:53 2011
Subject: [gdal-dev] how to get gis layer information from GeoPDF (e.g.
 retrieve building polygon coordinates)
Message-ID: <CAFE9545.4342%jared.rubin@saic.com>

I am looking at a few sample GeoPDF files in acrobat reader.
For example to retrieve the Parcel lot features from the Town of OakVille
example 
http://acrobatusers.com/gallery/geospatial

Is this layer information available from the gdal pdf driver.
I have successfully built the gdal trunk using podofo and have run gdalinfo
on this file
Also is this available with the python binding
Thanks
Jared




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111202/fbb3f037/attachment.html
From even.rouault at mines-paris.org  Fri Dec  2 17:14:23 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec  2 20:35:58 2011
Subject: [gdal-dev] how to get gis layer information from GeoPDF (e.g.
	retrieve building polygon coordinates)
In-Reply-To: <CAFE9545.4342%jared.rubin@saic.com>
References: <CAFE9545.4342%jared.rubin@saic.com>
Message-ID: <201112022314.23525.even.rouault@mines-paris.org>

Le vendredi 02 d?cembre 2011 22:46:29, Jared Rubin a ?crit :
> I am looking at a few sample GeoPDF files in acrobat reader.
> For example to retrieve the Parcel lot features from the Town of OakVille
> example
> http://acrobatusers.com/gallery/geospatial
> 
> Is this layer information available from the gdal pdf driver.
> I have successfully built the gdal trunk using podofo and have run gdalinfo
> on this file

The driver will rasterize the whole layers at once. You cannot render one 
layer in particular, and there's no support for retrieving the coordinates of 
vector features.

> Also is this available with the python binding

Yes, but with the above limits

> Thanks
> Jared
From JARED.RUBIN at saic.com  Fri Dec  2 17:19:10 2011
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Fri Dec  2 20:41:28 2011
Subject: [gdal-dev] how to get gis layer information from GeoPDF (e.g.
	retrieve building polygon coordinates)
In-Reply-To: <201112022314.23525.even.rouault@mines-paris.org>
Message-ID: <CAFE9CEE.4346%jared.rubin@saic.com>

Even,
Would it be possible to do an ogr driver to get the vector features (I guess
similar to shape files? Or maybe update the pdf driver to dump  each
indivual vector feature into gdal metadata?
I'm not too familiar with GeoPDF, I just have seen how Adobe allows for
selection of specific vectors/objects/etc.

thanks
Jared


On 12/2/11 3:14 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:

> Le vendredi 02 d?cembre 2011 22:46:29, Jared Rubin a ?crit :
>> I am looking at a few sample GeoPDF files in acrobat reader.
>> For example to retrieve the Parcel lot features from the Town of OakVille
>> example
>> http://acrobatusers.com/gallery/geospatial
>> 
>> Is this layer information available from the gdal pdf driver.
>> I have successfully built the gdal trunk using podofo and have run gdalinfo
>> on this file
> 
> The driver will rasterize the whole layers at once. You cannot render one
> layer in particular, and there's no support for retrieving the coordinates of
> vector features.
> 
>> Also is this available with the python binding
> 
> Yes, but with the above limits
> 
>> Thanks
>> Jared

From warmerdam at pobox.com  Fri Dec  2 17:30:04 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec  2 20:52:19 2011
Subject: [gdal-dev] how to get gis layer information from GeoPDF (e.g.
	retrieve building polygon coordinates)
In-Reply-To: <CAFE9CEE.4346%jared.rubin@saic.com>
References: <201112022314.23525.even.rouault@mines-paris.org>
	<CAFE9CEE.4346%jared.rubin@saic.com>
Message-ID: <CA+YzLBczyYPOH=OxuShGjhG=yT8CB7qtnwop+Fm7j7bmK5C9JQ@mail.gmail.com>

Jared,

I looked into the Poppler library a while ago and decided it was
possible to use it in a way that would allow extracting features
at the vector level from GeoPDF.  However, it also looked to be
quite a complex task and it would be capturing vector drawing
primitives which might not be 1:1 with the GIS features used to
produce the pdf.   I'm thinking 2-3 months work to do a decent
job of an OGR GeoPDF driver and even at that it would not be
returning nice GIS features - just gis objects with some attributes
about the draw style.

Best regards,


On Fri, Dec 2, 2011 at 2:19 PM, Jared Rubin <JARED.RUBIN@saic.com> wrote:
> Even,
> Would it be possible to do an ogr driver to get the vector features (I guess
> similar to shape files? Or maybe update the pdf driver to dump ?each
> indivual vector feature into gdal metadata?
> I'm not too familiar with GeoPDF, I just have seen how Adobe allows for
> selection of specific vectors/objects/etc.
>
> thanks
> Jared
>
>
> On 12/2/11 3:14 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:
>
>> Le vendredi 02 d?cembre 2011 22:46:29, Jared Rubin a ?crit :
>>> I am looking at a few sample GeoPDF files in acrobat reader.
>>> For example to retrieve the Parcel lot features from the Town of OakVille
>>> example
>>> http://acrobatusers.com/gallery/geospatial
>>>
>>> Is this layer information available from the gdal pdf driver.
>>> I have successfully built the gdal trunk using podofo and have run gdalinfo
>>> on this file
>>
>> The driver will rasterize the whole layers at once. You cannot render one
>> layer in particular, and there's no support for retrieving the coordinates of
>> vector features.
>>
>>> Also is this available with the python binding
>>
>> Yes, but with the above limits
>>
>>> Thanks
>>> Jared
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From JARED.RUBIN at saic.com  Fri Dec  2 17:36:40 2011
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Fri Dec  2 20:59:44 2011
Subject: [gdal-dev] how to get gis layer information from GeoPDF (e.g.
	retrieve building polygon coordinates)
In-Reply-To: <CA+YzLBczyYPOH=OxuShGjhG=yT8CB7qtnwop+Fm7j7bmK5C9JQ@mail.gmail.com>
Message-ID: <CAFEA108.4349%jared.rubin@saic.com>

I believe I also have access to corresponding  files of my GeoPDF samples in
ESRI Personal GeoDatabase .mdb  format.
So maybe I am better off just trying to use GDAL's ESRI database driver.
thanks
Jared


On 12/2/11 3:30 PM, "Frank Warmerdam" <warmerdam@pobox.com> wrote:

> Jared,
> 
> I looked into the Poppler library a while ago and decided it was
> possible to use it in a way that would allow extracting features
> at the vector level from GeoPDF.  However, it also looked to be
> quite a complex task and it would be capturing vector drawing
> primitives which might not be 1:1 with the GIS features used to
> produce the pdf.   I'm thinking 2-3 months work to do a decent
> job of an OGR GeoPDF driver and even at that it would not be
> returning nice GIS features - just gis objects with some attributes
> about the draw style.
> 
> Best regards,
> 
> 
> On Fri, Dec 2, 2011 at 2:19 PM, Jared Rubin <JARED.RUBIN@saic.com> wrote:
>> Even,
>> Would it be possible to do an ogr driver to get the vector features (I guess
>> similar to shape files? Or maybe update the pdf driver to dump ?each
>> indivual vector feature into gdal metadata?
>> I'm not too familiar with GeoPDF, I just have seen how Adobe allows for
>> selection of specific vectors/objects/etc.
>> 
>> thanks
>> Jared
>> 
>> 
>> On 12/2/11 3:14 PM, "Even Rouault" <even.rouault@mines-paris.org> wrote:
>> 
>>> Le vendredi 02 d?cembre 2011 22:46:29, Jared Rubin a ?crit :
>>>> I am looking at a few sample GeoPDF files in acrobat reader.
>>>> For example to retrieve the Parcel lot features from the Town of OakVille
>>>> example
>>>> http://acrobatusers.com/gallery/geospatial
>>>> 
>>>> Is this layer information available from the gdal pdf driver.
>>>> I have successfully built the gdal trunk using podofo and have run gdalinfo
>>>> on this file
>>> 
>>> The driver will rasterize the whole layers at once. You cannot render one
>>> layer in particular, and there's no support for retrieving the coordinates
>>> of
>>> vector features.
>>> 
>>>> Also is this available with the python binding
>>> 
>>> Yes, but with the above limits
>>> 
>>>> Thanks
>>>> Jared
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

From even.rouault at mines-paris.org  Fri Dec  2 17:37:26 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec  2 21:00:09 2011
Subject: [gdal-dev] how to get gis layer information from GeoPDF (e.g.
	retrieve building polygon coordinates)
In-Reply-To: <CAFE9CEE.4346%jared.rubin@saic.com>
References: <CAFE9CEE.4346%jared.rubin@saic.com>
Message-ID: <201112022337.26853.even.rouault@mines-paris.org>

Le vendredi 02 d?cembre 2011 23:19:10, Jared Rubin a ?crit :
> Even,
> Would it be possible to do an ogr driver to get the vector features (I
> guess similar to shape files? Or maybe update the pdf driver to dump  each
> indivual vector feature into gdal metadata?

A OGR driver would perhaps be possible. I haven't studied the question 
however. And I presume it would represent a significant effort as it would 
involve parsing and interpretating the PDF vector stream. Currently, all the 
hard work of rasterizing the PDF content is delegated to the poppler library.
From bfraser at geoanalytic.com  Fri Dec  2 17:41:13 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Dec  2 21:04:11 2011
Subject: [gdal-dev] how to get gis layer information from GeoPDF (e.g.
	retrieve building polygon coordinates)
In-Reply-To: <201112022337.26853.even.rouault@mines-paris.org>
References: <CAFE9CEE.4346%jared.rubin@saic.com>
	<201112022337.26853.even.rouault@mines-paris.org>
Message-ID: <4ED95409.1060005@geoanalytic.com>

I wonder if it would be possible to leverage pstoedit 
(http://www.pstoedit.net/)?  I've used it with Ghostview to extract PDF 
vectors to DXF (with no georeferencing of course) with varying success.

Best Regards,
Brent Fraser


On 12/2/2011 3:37 PM, Even Rouault wrote:
> Le vendredi 02 d?cembre 2011 23:19:10, Jared Rubin a ?crit :
>> Even,
>> Would it be possible to do an ogr driver to get the vector features (I
>> guess similar to shape files? Or maybe update the pdf driver to dump  each
>> indivual vector feature into gdal metadata?
> A OGR driver would perhaps be possible. I haven't studied the question
> however. And I presume it would represent a significant effort as it would
> involve parsing and interpretating the PDF vector stream. Currently, all the
> hard work of rasterizing the PDF content is delegated to the poppler library.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From Christopher.Pouliot at state.mn.us  Mon Dec  5 09:50:42 2011
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Mon Dec  5 17:04:10 2011
Subject: [gdal-dev] Editing KML files using ogr_csharp.dll
Message-ID: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>

Hello All,

I have a C# application that uses OGR_CSHARP.DLL to read/write KML files.  I'm able to read from KML files fine.  I'm able to create a new KML file and write to it fine.  I am unable, however, to open a KML file to edit.  I'd like to be able to append a new layer (folder) onto an existing KML file.  I've tried both of the following code snippets:

//This returns NULL
OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);


//This returns NULL
DataSource ds = Ogr.Open("c:\\temp\\mykml.kml", 1);


I'm able to use this code to edit File Geodatabases and Shapefiles but not KML.



Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?


Thanks,

Chris

Chris Pouliot
GIS Application Developer
Minnesota Department of Natural Resources
christopher.pouliot@state.mn.us
(651) 259-5491

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111205/826c961d/attachment.html
From KShannon at gcs-research.com  Mon Dec  5 10:54:15 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Mon Dec  5 17:54:26 2011
Subject: [gdal-dev] RE: Editing KML files using ogr_csharp.dll
In-Reply-To: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
References: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B933E43D8A@MAIL.gcs-research.net>

Chris,

I don' know OGR very well, but I see a few issues.  I also am not sure about the c# bindings, I believe they are pretty complete though.

'''OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);'''

Open() opens existing files, you need to use driver->CreateDatasource() to create datasets.  Open() opens files for editing.  If mykml.kml exists, use Open().

see http://gdal.org/ogr/ogr_apitut.html for information on using OGR to read/write data

'''Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?'''

See http://gdal.org/ogr/drv_kml.html for this, it appears to be possible.

There is also the libkml driver: http://gdal.org/ogr/drv_libkml.html

kss

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Pouliot, Christopher (DNR)
Sent: Monday, December 05, 2011 7:51 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Editing KML files using ogr_csharp.dll

Hello All,

I have a C# application that uses OGR_CSHARP.DLL to read/write KML files.  I'm able to read from KML files fine.  I'm able to create a new KML file and write to it fine.  I am unable, however, to open a KML file to edit.  I'd like to be able to append a new layer (folder) onto an existing KML file.  I've tried both of the following code snippets:

//This returns NULL
OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);


//This returns NULL
DataSource ds = Ogr.Open("c:\\temp\\mykml.kml", 1);


I'm able to use this code to edit File Geodatabases and Shapefiles but not KML.



Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?


Thanks,

Chris

Chris Pouliot
GIS Application Developer
Minnesota Department of Natural Resources
christopher.pouliot@state.mn.us<mailto:christopher.pouliot@state.mn.us>
(651) 259-5491

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111205/85e1e640/attachment.html
From rush at winkey.org  Mon Dec  5 10:48:03 2011
From: rush at winkey.org (Brian Case)
Date: Mon Dec  5 17:55:15 2011
Subject: [gdal-dev] Editing KML files using ogr_csharp.dll
In-Reply-To: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
References: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
Message-ID: <1323100083.10218.3.camel@octopi>

Chris,

Have you tried the libkml driver?

http://www.gdal.org/ogr/drv_libkml.html


Brian


On Mon, 2011-12-05 at 14:50 +0000, Pouliot, Christopher (DNR) wrote:
> Hello All,
> 
>  
> 
> I have a C# application that uses OGR_CSHARP.DLL to read/write KML
> files.  I?m able to read from KML files fine.  I?m able to create a
> new KML file and write to it fine.  I am unable, however, to open a
> KML file to edit.  I?d like to be able to append a new layer (folder)
> onto an existing KML file.  I?ve tried both of the following code
> snippets:
> 
>  
> 
> //This returns NULL
> 
> OSGeo.OGR.Driver drv = Ogr.GetDriverByName(?KML?);
> 
> DataSource ds = drv.Open(?c:\\temp\\mykml.kml?, 1);
> 
>  
> 
>  
> 
> //This returns NULL
> 
> DataSource ds = Ogr.Open(?c:\\temp\\mykml.kml?, 1);
> 
>  
> 
>  
> 
> I?m able to use this code to edit File Geodatabases and Shapefiles but
> not KML.
> 
>  
> 
>  
> 
>  
> 
> Also, when creating a KML file from scratch is there a way to map the
> Name and Description fields to my existing fields so that the Name and
> Description appear in Google Earth?
> 
>  
> 
>  
> 
> Thanks,
> 
>                
> 
> Chris
> 
>  
> 
> Chris Pouliot
> GIS Application Developer
> Minnesota Department of Natural Resources
> christopher.pouliot@state.mn.us
> (651) 259-5491
> 
>  
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Christopher.Pouliot at state.mn.us  Mon Dec  5 11:03:56 2011
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Mon Dec  5 18:05:07 2011
Subject: [gdal-dev] RE: Editing KML files using ogr_csharp.dll
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B933E43D8A@MAIL.gcs-research.net>
References: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
	<2DD24CD6225DC04C81CF12523261F4B933E43D8A@MAIL.gcs-research.net>
Message-ID: <074A014435F2E543B1FD97E729C76E4D0504AB@055-CH1MPN1-012.055d.mgd.msft.net>

Thanks for the response Kyle.

  I do use the CreateDataSource() to create a new KML.  But am unable to open an existing KML for editing using the Open() code I specified below.

Chris

From: Kyle Shannon [mailto:KShannon@gcs-research.com]
Sent: Monday, December 05, 2011 9:54 AM
To: Pouliot, Christopher (DNR); gdal-dev@lists.osgeo.org
Subject: RE: Editing KML files using ogr_csharp.dll

Chris,

I don' know OGR very well, but I see a few issues.  I also am not sure about the c# bindings, I believe they are pretty complete though.

'''OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);'''

Open() opens existing files, you need to use driver->CreateDatasource() to create datasets.  Open() opens files for editing.  If mykml.kml exists, use Open().

see http://gdal.org/ogr/ogr_apitut.html for information on using OGR to read/write data

'''Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?'''

See http://gdal.org/ogr/drv_kml.html for this, it appears to be possible.

There is also the libkml driver: http://gdal.org/ogr/drv_libkml.html

kss

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Pouliot, Christopher (DNR)
Sent: Monday, December 05, 2011 7:51 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Editing KML files using ogr_csharp.dll

Hello All,

I have a C# application that uses OGR_CSHARP.DLL to read/write KML files.  I'm able to read from KML files fine.  I'm able to create a new KML file and write to it fine.  I am unable, however, to open a KML file to edit.  I'd like to be able to append a new layer (folder) onto an existing KML file.  I've tried both of the following code snippets:

//This returns NULL
OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);


//This returns NULL
DataSource ds = Ogr.Open("c:\\temp\\mykml.kml", 1);


I'm able to use this code to edit File Geodatabases and Shapefiles but not KML.



Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?


Thanks,

Chris

Chris Pouliot
GIS Application Developer
Minnesota Department of Natural Resources
christopher.pouliot@state.mn.us<mailto:christopher.pouliot@state.mn.us>
(651) 259-5491


This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and delete the original message.   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111205/198389e5/attachment-0001.html
From KShannon at gcs-research.com  Mon Dec  5 11:08:33 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Mon Dec  5 18:09:39 2011
Subject: [gdal-dev] RE: Editing KML files using ogr_csharp.dll
In-Reply-To: <074A014435F2E543B1FD97E729C76E4D0504AB@055-CH1MPN1-012.055d.mgd.msft.net>
References: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
	<2DD24CD6225DC04C81CF12523261F4B933E43D8A@MAIL.gcs-research.net>
	<074A014435F2E543B1FD97E729C76E4D0504AB@055-CH1MPN1-012.055d.mgd.msft.net>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B933E43DB5@MAIL.gcs-research.net>

Can you report your gdal version and where you got it from?  Is it from gisinternals.com/sdk, or did you build it yourself?

From: Pouliot, Christopher (DNR) [mailto:Christopher.Pouliot@state.mn.us]
Sent: Monday, December 05, 2011 9:04 AM
To: Kyle Shannon; gdal-dev@lists.osgeo.org
Subject: RE: Editing KML files using ogr_csharp.dll

Thanks for the response Kyle.

  I do use the CreateDataSource() to create a new KML.  But am unable to open an existing KML for editing using the Open() code I specified below.

Chris

From: Kyle Shannon [mailto:KShannon@gcs-research.com]
Sent: Monday, December 05, 2011 9:54 AM
To: Pouliot, Christopher (DNR); gdal-dev@lists.osgeo.org
Subject: RE: Editing KML files using ogr_csharp.dll

Chris,

I don' know OGR very well, but I see a few issues.  I also am not sure about the c# bindings, I believe they are pretty complete though.

'''OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);'''

Open() opens existing files, you need to use driver->CreateDatasource() to create datasets.  Open() opens files for editing.  If mykml.kml exists, use Open().

see http://gdal.org/ogr/ogr_apitut.html for information on using OGR to read/write data

'''Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?'''

See http://gdal.org/ogr/drv_kml.html for this, it appears to be possible.

There is also the libkml driver: http://gdal.org/ogr/drv_libkml.html

kss

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Pouliot, Christopher (DNR)
Sent: Monday, December 05, 2011 7:51 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Editing KML files using ogr_csharp.dll

Hello All,

I have a C# application that uses OGR_CSHARP.DLL to read/write KML files.  I'm able to read from KML files fine.  I'm able to create a new KML file and write to it fine.  I am unable, however, to open a KML file to edit.  I'd like to be able to append a new layer (folder) onto an existing KML file.  I've tried both of the following code snippets:

//This returns NULL
OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);


//This returns NULL
DataSource ds = Ogr.Open("c:\\temp\\mykml.kml", 1);


I'm able to use this code to edit File Geodatabases and Shapefiles but not KML.



Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?


Thanks,

Chris

Chris Pouliot
GIS Application Developer
Minnesota Department of Natural Resources
christopher.pouliot@state.mn.us<mailto:christopher.pouliot@state.mn.us>
(651) 259-5491


This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and delete the original message.   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111205/d390fb2d/attachment.html
From even.rouault at mines-paris.org  Mon Dec  5 11:36:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  5 18:38:12 2011
Subject: [gdal-dev] RE: Editing KML files using ogr_csharp.dll
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B933E43DB5@MAIL.gcs-research.net>
References: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
	<2DD24CD6225DC04C81CF12523261F4B933E43D8A@MAIL.gcs-research.net>
	<074A014435F2E543B1FD97E729C76E4D0504AB@055-CH1MPN1-012.055d.mgd.msft.net>
	<2DD24CD6225DC04C81CF12523261F4B933E43DB5@MAIL.gcs-research.net>
Message-ID: <1323102965.4edcf2f502374@webmail.free.fr>

Selon Kyle Shannon <KShannon@gcs-research.com>:

> Can you report your gdal version and where you got it from?  Is it from
> gisinternals.com/sdk, or did you build it yourself?

The old KML driver only supports appending features to a file it has just
created. It can't work on an existing KML file that is re-opened afterwards,
since the driver only writes new lines at the end of the file (and you cannot
write after the ending </kml> marker ...)

The new LIBKML driver uses a in-memory DOM, so it is likely a better candidate
for updating KML files, but I haven't checked if it works indeed for that use
case.

>
> From: Pouliot, Christopher (DNR) [mailto:Christopher.Pouliot@state.mn.us]
> Sent: Monday, December 05, 2011 9:04 AM
> To: Kyle Shannon; gdal-dev@lists.osgeo.org
> Subject: RE: Editing KML files using ogr_csharp.dll
>
> Thanks for the response Kyle.
>
>   I do use the CreateDataSource() to create a new KML.  But am unable to open
> an existing KML for editing using the Open() code I specified below.
>
> Chris
>
> From: Kyle Shannon [mailto:KShannon@gcs-research.com]
> Sent: Monday, December 05, 2011 9:54 AM
> To: Pouliot, Christopher (DNR); gdal-dev@lists.osgeo.org
> Subject: RE: Editing KML files using ogr_csharp.dll
>
> Chris,
>
> I don' know OGR very well, but I see a few issues.  I also am not sure about
> the c# bindings, I believe they are pretty complete though.
>
> '''OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
> DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);'''
>
> Open() opens existing files, you need to use driver->CreateDatasource() to
> create datasets.  Open() opens files for editing.  If mykml.kml exists, use
> Open().
>
> see http://gdal.org/ogr/ogr_apitut.html for information on using OGR to
> read/write data
>
> '''Also, when creating a KML file from scratch is there a way to map the Name
> and Description fields to my existing fields so that the Name and Description
> appear in Google Earth?'''
>
> See http://gdal.org/ogr/drv_kml.html for this, it appears to be possible.
>
> There is also the libkml driver: http://gdal.org/ogr/drv_libkml.html
>
> kss
>
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Pouliot, Christopher
> (DNR)
> Sent: Monday, December 05, 2011 7:51 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Editing KML files using ogr_csharp.dll
>
> Hello All,
>
> I have a C# application that uses OGR_CSHARP.DLL to read/write KML files.
> I'm able to read from KML files fine.  I'm able to create a new KML file and
> write to it fine.  I am unable, however, to open a KML file to edit.  I'd
> like to be able to append a new layer (folder) onto an existing KML file.
> I've tried both of the following code snippets:
>
> //This returns NULL
> OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
> DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);
>
>
> //This returns NULL
> DataSource ds = Ogr.Open("c:\\temp\\mykml.kml", 1);
>
>
> I'm able to use this code to edit File Geodatabases and Shapefiles but not
> KML.
>
>
>
> Also, when creating a KML file from scratch is there a way to map the Name
> and Description fields to my existing fields so that the Name and Description
> appear in Google Earth?
>
>
> Thanks,
>
> Chris
>
> Chris Pouliot
> GIS Application Developer
> Minnesota Department of Natural Resources
> christopher.pouliot@state.mn.us<mailto:christopher.pouliot@state.mn.us>
> (651) 259-5491
>
>
> This email message is for the sole use of the intended recipient(s) and may
> contain confidential and privileged information. Any unauthorized review,
> use, disclosure or distribution is prohibited. If you are not the intended
> recipient, please contact the sender by reply email and delete the original
> message.
>


From Christopher.Pouliot at state.mn.us  Mon Dec  5 11:21:09 2011
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Mon Dec  5 18:38:24 2011
Subject: [gdal-dev] RE: Editing KML files using ogr_csharp.dll
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B933E43DB5@MAIL.gcs-research.net>
References: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
	<2DD24CD6225DC04C81CF12523261F4B933E43D8A@MAIL.gcs-research.net>
	<074A014435F2E543B1FD97E729C76E4D0504AB@055-CH1MPN1-012.055d.mgd.msft.net>
	<2DD24CD6225DC04C81CF12523261F4B933E43DB5@MAIL.gcs-research.net>
Message-ID: <074A014435F2E543B1FD97E729C76E4D0504D0@055-CH1MPN1-012.055d.mgd.msft.net>

Yes, I'm using the development version (1.9) from gisinternals.com/sdk.

I need this version because I'm taking advantage of its ability to read/write File Geodatabases.


From: Kyle Shannon [mailto:KShannon@gcs-research.com]
Sent: Monday, December 05, 2011 10:09 AM
To: Pouliot, Christopher (DNR); gdal-dev@lists.osgeo.org
Subject: RE: Editing KML files using ogr_csharp.dll

Can you report your gdal version and where you got it from?  Is it from gisinternals.com/sdk, or did you build it yourself?

From: Pouliot, Christopher (DNR) [mailto:Christopher.Pouliot@state.mn.us]
Sent: Monday, December 05, 2011 9:04 AM
To: Kyle Shannon; gdal-dev@lists.osgeo.org
Subject: RE: Editing KML files using ogr_csharp.dll

Thanks for the response Kyle.

  I do use the CreateDataSource() to create a new KML.  But am unable to open an existing KML for editing using the Open() code I specified below.

Chris

From: Kyle Shannon [mailto:KShannon@gcs-research.com]
Sent: Monday, December 05, 2011 9:54 AM
To: Pouliot, Christopher (DNR); gdal-dev@lists.osgeo.org
Subject: RE: Editing KML files using ogr_csharp.dll

Chris,

I don' know OGR very well, but I see a few issues.  I also am not sure about the c# bindings, I believe they are pretty complete though.

'''OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);'''

Open() opens existing files, you need to use driver->CreateDatasource() to create datasets.  Open() opens files for editing.  If mykml.kml exists, use Open().

see http://gdal.org/ogr/ogr_apitut.html for information on using OGR to read/write data

'''Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?'''

See http://gdal.org/ogr/drv_kml.html for this, it appears to be possible.

There is also the libkml driver: http://gdal.org/ogr/drv_libkml.html

kss

From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Pouliot, Christopher (DNR)
Sent: Monday, December 05, 2011 7:51 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Editing KML files using ogr_csharp.dll

Hello All,

I have a C# application that uses OGR_CSHARP.DLL to read/write KML files.  I'm able to read from KML files fine.  I'm able to create a new KML file and write to it fine.  I am unable, however, to open a KML file to edit.  I'd like to be able to append a new layer (folder) onto an existing KML file.  I've tried both of the following code snippets:

//This returns NULL
OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);


//This returns NULL
DataSource ds = Ogr.Open("c:\\temp\\mykml.kml", 1);


I'm able to use this code to edit File Geodatabases and Shapefiles but not KML.



Also, when creating a KML file from scratch is there a way to map the Name and Description fields to my existing fields so that the Name and Description appear in Google Earth?


Thanks,

Chris

Chris Pouliot
GIS Application Developer
Minnesota Department of Natural Resources
christopher.pouliot@state.mn.us<mailto:christopher.pouliot@state.mn.us>
(651) 259-5491


This email message is for the sole use of the intended recipient(s) and may contain confidential and privileged information. Any unauthorized review, use, disclosure or distribution is prohibited. If you are not the intended recipient, please contact the sender by reply email and delete the original message.   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111205/fbd09946/attachment-0001.html
From even.rouault at mines-paris.org  Mon Dec  5 15:28:55 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  5 22:43:47 2011
Subject: [gdal-dev] Finally, a blog...
Message-ID: <201112052128.55262.even.rouault@mines-paris.org>

Hi,

I have finally decided to create a blog at http://erouault.blogspot.com (also 
aggregated at http://planet.osgeo.org ) that will likely be mostly about GDAL.

The first post is about accessing the new Global Multi-resolution Terrain 
Elevation Data 2010 with /vsicurl and VRT technologies. 

Best regards,

Even
From yjacolin at free.fr  Mon Dec  5 15:36:40 2011
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Mon Dec  5 22:52:11 2011
Subject: [gdal-dev] Finally, a blog...
In-Reply-To: <201112052128.55262.even.rouault@mines-paris.org>
References: <201112052128.55262.even.rouault@mines-paris.org>
Message-ID: <201112052136.41009.yjacolin@free.fr>

Le lundi 5 d?cembre 2011 21:28:55, Even Rouault a ?crit :
> Hi,
> 
> I have finally decided to create a blog at http://erouault.blogspot.com
> (also aggregated at http://planet.osgeo.org ) that will likely be mostly
> about GDAL.
> 
> The first post is about accessing the new Global Multi-resolution Terrain
> Elevation Data 2010 with /vsicurl and VRT technologies.
> 
> Best regards,

Even,

Happy to read your blog :)

Y.
-- 
Yves Jacolin
From luzhenyu1981 at gmail.com  Mon Dec  5 15:51:43 2011
From: luzhenyu1981 at gmail.com (Zhenyu Lu)
Date: Mon Dec  5 23:07:58 2011
Subject: [gdal-dev] Finally, a blog...
In-Reply-To: <201112052128.55262.even.rouault@mines-paris.org>
References: <201112052128.55262.even.rouault@mines-paris.org>
Message-ID: <CA+VK+OBH7d2ddAMJDAGbfBvMMh33gPzNBw0-9VJ1hU2H70pv8g@mail.gmail.com>

Hi Even,

Finally have a great place to learn from.
Thank you a million...

Zhenyu

2011/12/5 Even Rouault <even.rouault@mines-paris.org>

> Hi,
>
> I have finally decided to create a blog at http://erouault.blogspot.com(also
> aggregated at http://planet.osgeo.org ) that will likely be mostly about
> GDAL.
>
> The first post is about accessing the new Global Multi-resolution Terrain
> Elevation Data 2010 with /vsicurl and VRT technologies.
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Zhenyu Lu
SUNY-ESF
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111205/04239ae9/attachment.html
From sroeckelein at gmail.com  Mon Dec  5 16:50:16 2011
From: sroeckelein at gmail.com (=?ISO-8859-1?Q?Stefan_R=F6ckelein?=)
Date: Tue Dec  6 00:09:31 2011
Subject: [gdal-dev] Enhancements to ORG DXF Driver
Message-ID: <CAD39jTk4-hzFuVzE7jNf59dvtyrmsEn3XEKRuJgt6bN6gEdaZA@mail.gmail.com>

Hi all,

I am using GDAL/OGR since about one year for the viewing of DXF files in
two different programs. Since then I have added some enhancements in the
DXF driver of OGR. Because it is very tedious to change all the
enhancements all the time a new version of GDAL is out and because I want
to contribute my enhancements to the community I have opened a ticket with
all my enhancements:

http://trac.osgeo.org/gdal/ticket/4369

A little bit about myself. As a civil engineer and I have worked a lot with
AutoCAD. A few years ago I changed changed my occupation and started
working as a self employed software developer. At the moment I'm also about
to finish a Master's degree in Geodesy and Geoinformation Science in
Berlin. Therefore, in the future I might have more contributions for
GDAL/OGR.

Stefan R?ckelein
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111205/74cd9cf1/attachment.html
From a.neumann at carto.net  Tue Dec  6 02:41:44 2011
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue Dec  6 10:34:32 2011
Subject: [gdal-dev] Enhancements to ORG DXF Driver
In-Reply-To: <CAD39jTk4-hzFuVzE7jNf59dvtyrmsEn3XEKRuJgt6bN6gEdaZA@mail.gmail.com>
References: <CAD39jTk4-hzFuVzE7jNf59dvtyrmsEn3XEKRuJgt6bN6gEdaZA@mail.gmail.com>
Message-ID: <154ac46694706d9b797afe11e3b932e8@carto.net>

 Hi Stefan,

 I am not a developer, but only a user that has to deal with DXF export 
 and import from time to time.

 From a user perspective I would like to see this included - thank you 
 for taking the time to document and write the patch!

 Andreas

 On Mon, 5 Dec 2011 22:50:16 +0100, Stefan R?ckelein wrote:
> Hi all,
>
> I am using GDAL/OGR since about one year for the viewing of DXF files
> in two different programs. Since then I have added some enhancements
> in the DXF driver of OGR. Because it is very tedious to change all 
> the
> enhancements all the time a new version of GDAL is out and because I
> want to contribute my enhancements to the community I have opened a
> ticket with all my enhancements:
>
> http://trac.osgeo.org/gdal/ticket/4369 [1]
>
> A little bit about myself. As a civil engineer and I have worked a 
> lot
> with AutoCAD. A few years ago I changed changed my occupation and
> started working as a self employed software developer. At the moment
> I'm also about to finish a Master's degree in Geodesy and
> Geoinformation Science in Berlin. Therefore, in the future I might
> have more contributions for GDAL/OGR.
>
> Stefan R?ckelein
>
>
> Links:
> ------
> [1] http://trac.osgeo.org/gdal/ticket/4369

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From suithedoc at arcor.de  Tue Dec  6 05:08:55 2011
From: suithedoc at arcor.de (dennis)
Date: Tue Dec  6 13:09:41 2011
Subject: [gdal-dev] Compile GDAL with swig(Java) on MAC OS X
Message-ID: <4EDDE9B7.7040201@arcor.de>

Hi all,

I have a question about compiling gdal.
I want to write a program in java with gdal and I want to compile gdal 
in a way, so that the user can use the already compiled lib.

What I did so far is, changing the java.opt and this.
gdal:$ ./configure
gdal:$ make
gdal:$ cd swig/java
gdal:$ ./make

This works well so far, but the libgdaljni.dylib is directly linked to 
libgdal in the base Folder. So, if copy my program to another location, 
I will get a UnsatisfiedLinkError.

Interestingly, I've done it once. the libgdaljni.dylib was much 
bigger(~16mb) and it worked without dependency problems.
Unfortunately I have no idea how I did it !

I hope I could express myself well, I'm no expert in terms of compiling.

MfG
sui
From even.rouault at mines-paris.org  Tue Dec  6 05:40:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec  6 13:43:22 2011
Subject: [gdal-dev] Compile GDAL with swig(Java) on MAC OS X
In-Reply-To: <4EDDE9B7.7040201@arcor.de>
References: <4EDDE9B7.7040201@arcor.de>
Message-ID: <1323168051.4eddf1338610a@webmail.free.fr>

Dennis,

>
> This works well so far, but the libgdaljni.dylib is directly linked to
> libgdal in the base Folder. So, if copy my program to another location,
> I will get a UnsatisfiedLinkError.

Yes, both libs must be accessible through the java.library.path property (or in
a system library directory, or in LD_LIBRARY_PATH if this works on MacOSX)

>
> Interestingly, I've done it once. the libgdaljni.dylib was much
> bigger(~16mb) and it worked without dependency problems.
> Unfortunately I have no idea how I did it !

Sounds like your libgdaljni.dylib was linked against a static version
of libgdal.

Best regards,

Even
From Christopher.Pouliot at state.mn.us  Tue Dec  6 06:53:57 2011
From: Christopher.Pouliot at state.mn.us (Pouliot, Christopher (DNR))
Date: Tue Dec  6 15:00:39 2011
Subject: [gdal-dev] RE: Editing KML files using ogr_csharp.dll
In-Reply-To: <1323102965.4edcf2f502374@webmail.free.fr>
References: <074A014435F2E543B1FD97E729C76E4D05047B@055-CH1MPN1-012.055d.mgd.msft.net>
	<2DD24CD6225DC04C81CF12523261F4B933E43D8A@MAIL.gcs-research.net>
	<074A014435F2E543B1FD97E729C76E4D0504AB@055-CH1MPN1-012.055d.mgd.msft.net>
	<2DD24CD6225DC04C81CF12523261F4B933E43DB5@MAIL.gcs-research.net>
	<1323102965.4edcf2f502374@webmail.free.fr>
Message-ID: <074A014435F2E543B1FD97E729C76E4D050AF4@055-CH1MPN1-012.055d.mgd.msft.net>

Ok, thanks.  I'll have to check that out.

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Monday, December 05, 2011 10:36 AM
To: Kyle Shannon
Cc: Pouliot, Christopher (DNR); gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] RE: Editing KML files using ogr_csharp.dll

Selon Kyle Shannon <KShannon@gcs-research.com>:

> Can you report your gdal version and where you got it from?  Is it from
> gisinternals.com/sdk, or did you build it yourself?

The old KML driver only supports appending features to a file it has just
created. It can't work on an existing KML file that is re-opened afterwards,
since the driver only writes new lines at the end of the file (and you cannot
write after the ending </kml> marker ...)

The new LIBKML driver uses a in-memory DOM, so it is likely a better candidate
for updating KML files, but I haven't checked if it works indeed for that use
case.

>
> From: Pouliot, Christopher (DNR) [mailto:Christopher.Pouliot@state.mn.us]
> Sent: Monday, December 05, 2011 9:04 AM
> To: Kyle Shannon; gdal-dev@lists.osgeo.org
> Subject: RE: Editing KML files using ogr_csharp.dll
>
> Thanks for the response Kyle.
>
>   I do use the CreateDataSource() to create a new KML.  But am unable to open
> an existing KML for editing using the Open() code I specified below.
>
> Chris
>
> From: Kyle Shannon [mailto:KShannon@gcs-research.com]
> Sent: Monday, December 05, 2011 9:54 AM
> To: Pouliot, Christopher (DNR); gdal-dev@lists.osgeo.org
> Subject: RE: Editing KML files using ogr_csharp.dll
>
> Chris,
>
> I don' know OGR very well, but I see a few issues.  I also am not sure about
> the c# bindings, I believe they are pretty complete though.
>
> '''OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
> DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);'''
>
> Open() opens existing files, you need to use driver->CreateDatasource() to
> create datasets.  Open() opens files for editing.  If mykml.kml exists, use
> Open().
>
> see http://gdal.org/ogr/ogr_apitut.html for information on using OGR to
> read/write data
>
> '''Also, when creating a KML file from scratch is there a way to map the Name
> and Description fields to my existing fields so that the Name and Description
> appear in Google Earth?'''
>
> See http://gdal.org/ogr/drv_kml.html for this, it appears to be possible.
>
> There is also the libkml driver: http://gdal.org/ogr/drv_libkml.html
>
> kss
>
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Pouliot, Christopher
> (DNR)
> Sent: Monday, December 05, 2011 7:51 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Editing KML files using ogr_csharp.dll
>
> Hello All,
>
> I have a C# application that uses OGR_CSHARP.DLL to read/write KML files.
> I'm able to read from KML files fine.  I'm able to create a new KML file and
> write to it fine.  I am unable, however, to open a KML file to edit.  I'd
> like to be able to append a new layer (folder) onto an existing KML file.
> I've tried both of the following code snippets:
>
> //This returns NULL
> OSGeo.OGR.Driver drv = Ogr.GetDriverByName("KML");
> DataSource ds = drv.Open("c:\\temp\\mykml.kml", 1);
>
>
> //This returns NULL
> DataSource ds = Ogr.Open("c:\\temp\\mykml.kml", 1);
>
>
> I'm able to use this code to edit File Geodatabases and Shapefiles but not
> KML.
>
>
>
> Also, when creating a KML file from scratch is there a way to map the Name
> and Description fields to my existing fields so that the Name and Description
> appear in Google Earth?
>
>
> Thanks,
>
> Chris
>
> Chris Pouliot
> GIS Application Developer
> Minnesota Department of Natural Resources
> christopher.pouliot@state.mn.us<mailto:christopher.pouliot@state.mn.us>
> (651) 259-5491
>
>
> This email message is for the sole use of the intended recipient(s) and may
> contain confidential and privileged information. Any unauthorized review,
> use, disclosure or distribution is prohibited. If you are not the intended
> recipient, please contact the sender by reply email and delete the original
> message.
>




From a.furieri at lqt.it  Tue Dec  6 07:37:37 2011
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Tue Dec  6 16:08:39 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files
Message-ID: <20111206122717.M56144@lqt.it>

Hi All,

I'm here to submit to your attention an alternative gml:xlink 
resolving method (GML driver) I've implemented for Tuscany Region.


Tuscany Region context and requirements:
========================================
Their brand new official vector cartography is fully 
topology-based, and GML is the main format adopted 
as primary source / long term storage.
Any possible alternative source (SHP, Spatial DBMS such 
as PostGIS and SpatiaLite) will be later derived from such 
primary GML files.
And ogr2ogr is the main tool currently used to transfer data 
between different sources.

the whole regional cartography consist in several
dozens of huge GML files (> 2GB each one), and each
single GML file contains about an hundredth layers
and many tenths of ancillary data tables (some million
features per single GML file).
the complete GML schema is formally defined by an accurate
but really complex XSD; actually a very ramified one, 
because it's widely based on <xs:include> elements.


Critical issues found in current ogr2org:
=========================================
enabling GML_SKIP_RESOLVE_ELEMS NONE effectively
support xlink:href resolution. 

a) anyway, as the official doc honestly recognizes 
  "the resolution algorithm is not optimised for 
  large files. For files with more than a couple of 
  thousand xlink:href tags, the process can go beyond 
  a few minutes".
  For real-world GML files (some million xlink:href 
  occurrences) Tuscany Region actually measured discouraging 
  timings (well in excess of 24 hours per single GML file).

b) and a physical size limitation exists: the current 
  implementation for GML_SKIP_RESOLVE_ELEMS NONE builds 
  a memory-based GML node-tree, used for xlink:href 
  resolution.
  This practically means that no GML file bigger than
  1GB (approx.) could never be successfully parsed at all,
  simply because the address space available for 32-bit
  sw forbids to allocate so much RAM as required by this 
  intensively memory-based method.


The proposed GML_SKIP_RESOLVE_ELEMS HUGE alternative:
=====================================================
I've carefully evaluated an alternative strategy 
allowing to skip all the above critical issues, but
still preserving absolutely untouched the main core 
of the current GML implementation.

The unique bottleneck I identified simply was using
a memory-based GML node-tree.
So I started developing an alternative method uniquely
focused on xlink:href resolution, not at all requiring to 
use huge memory allocations, and possibly offering enhanced
efficiency and better performances when parsing huge GML files.

Please note well:
- GML_SKIP_RESOLVE_ELEMS NONE still supports the previous
  xlink:href resolution method exactely as before
- GML_SKIP_RESOLVE_ELEMS HUGE activates the new alternative
  resolution method
- any other facet of the GML driver is left completely
  untouched; the difference between NONE and HUGE methods
  simply is in xlink:href resolution and in xxx.resolved.gml 
  output generation.

Main design:
- using a temporary DB (SQLite) for xlink:href resolution
- then outputting an xxxx.resolved.gml file, exactly
  as the old NONE method does

Advantages:
- a DBMS is the tool of excellence for massive relational
  pairs resolution (JOIN): any DBMS surely is carefully 
  optimized for this specific task, there is no need to reinvent 
  the wheel yet another time.
- this method is completely file-system-based; a very low 
  memory footprint is required, even when processing impressively
  huge GML files 
- SQLite is absolutely simple and light-weighted (and doesn't 
  requires any installation/configuration at all).
- an auxiliary SQLite DB-file can be used in the simplest way exactly 
  as it was a trivial temporary file of a more conventional type.
- SQLite already is included between GDAL/OGR dependencies, no
  further complexity and/or dependencies are introduced.


Testing and measured timings:
=============================
- the current GML_SKIP_RESOLVE_ELEMS NONE method was
  unable to open any GML file bigger than approx. 1GB 
  (insufficient memory)
- the alternative GML_SKIP_RESOLVE_ELEMS HUGE method is
  able to successfully parse GML files as big as approx. 
  3GB (there is no theoretically imposed size limit; simply 
  we had no sample bigger than this to test)
- the old method required 24+ hours to resolved a medium
  sized GML file.
- the new SQLite-based method requires about 1 hour to resolve 
  a huge 3GB GML file (containing million+ xlink:href pairs).


Implementation details:
=======================
some further configuration options are available when
GML_SKIP_RESOLVE_ELEMS HUGE is set:

- if GML_HUGE_TEMPFILE YES is set, the SQLite DB-file used 
  to resolve xlink:href / gml:id relations will be immediately
  removed as no longer required (i.e. once xxxx.resolved.gml
  output has been generated).
  usually this auxiliary DB-file is a huge file too, and is 
  completely useless once the resolved file has already been 
  generated. removing it from the file-system strongly helps 
  to save a lot of precious disk space when processing many 
  really huge GML files one after the other.
- if GML_HUGE_SQLITE_UNSAFE YES is set, the auxiliary SQLite DB-file 
  will be configured so to enable any possible performance boost. 
  This includes disabling at all the support for transactions: 
  an intrinsically unsafe option (unable to recover the DB after
  a fatal system crash), but absolutely harmless in this specific 
  case (this simply is a temporary file, we'll recreate it again 
  from scratch next time). 

And finally a GML_GFS_TEMPLATE path_to_template.gfs option was
introduced supporting GML_SKIP_RESOLVE_ELEMS HUGE

Rationale for GML_GFS_TEMPLATE:
-------------------------------
- the current OGR GML implementation attempts to 'sniff' the
  data layout; this practically means that subsequent runs
  of ogr2ogr will easily guess different layouts for the
  same class/layer (some attributes are optional, many
  alphanumeric keys will be wrongly recognized as integers ...).
  and this one is a painful issue when you have to import 
  many dozens distinct GML files into the same DBMS [-append]
- the current XSD support is insufficient, because it doesn't
  allows to download XSD via URL, and because it doesn't supports
  <xs:include> directives.
- the current GFS support is fairly adequate, once you've
  carefully hand-written a GFS file exactly corresponding to 
  your complex XSD schema. 
  allowing to unconditionally select the same GFS file for many 
  subsequent import runs surely makes your life easiest, and 
  ensures a strongly consistent data layout to be used everywhere.

 
Proposed patch:
===============
not too much complex, after all ... please see the attached 
svn diff and source:

a) -/ogr/ogrsf_frmts/gml/hugefileresolver.cpp
   full implementation of GML_SKIP_RESOLVE_ELEMS HUGE
   and related options (mainly SQLite handling stuff)

b) -/ogr/ogrsf_frmts/gml/gmlreader.h
   -/ogr/ogrsf_frmts/gml/gmlreaderp.h
   -/ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp
   changing few C++ class definitions and implementing
   GML_SKIP_RESOLVE_ELEMS HUGE activation
   
c) -/ogr/ogrsf_frmts/gml/GNUmakefile
   building hugefileresolver.cpp

d) -/ogr/ogrsf_frmts/gml/drv_gml.html
   updated documentation

e) -/ogr/ogrsf_frmts/nas/nasreaderp.h
   -/ogr/ogrsf_frmts/nas/nasreader.cpp
   simply few formal changes for C++ class definitions so 
   to maintain full compatibility with GML base module.

thanks for your attention and consideration,
Sandro Furieri

-------------- next part --------------
A non-text attachment was scrubbed...
Name: gml_hugefile_patch.zip
Type: application/x-zip-compressed
Size: 16531 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111206/a14d1034/gml_hugefile_patch-0001.bin
From even.rouault at mines-paris.org  Tue Dec  6 10:10:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec  6 18:28:25 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files
In-Reply-To: <20111206122717.M56144@lqt.it>
References: <20111206122717.M56144@lqt.it>
Message-ID: <1323184249.4ede3079e1a55@webmail.free.fr>

Hi Sandro,

> I'm here to submit to your attention an alternative gml:xlink
> resolving method (GML driver) I've implemented for Tuscany Region.
>

As usual, very in-depth analysis and high quality patch.

Here are my comments :

  * #include "sqlite3.h" in ogr/ogrsf_frmts/gml/gmlreaderp.h is not appropriate
in that file, and should be only found in hugefileresolver.cpp. SQLite is a very
common dependency in most GDAL/OGR builds, but not a compulsory one. So some
adjustements will be needed in the GNUmakefile/makefile.vc to detect if sqlite
dependency is really available before trying to build hugefileresolver.cpp and
calling it from ogrgmldatasource.cpp

  * Did you consider just using the OGR API to abstract the access to the
temporary database, instead of directly using sqlite API ? This would allow to
use other DB backends, such as postgresql for example. Not a strong objection
however to justify reworking your patch. (A nice side-effect of it would be
that there would make build integration easy)

  * GML_GFS_TEMPLATE config option is general purpose, and could be made also
available even when xlink:href resolving is not asked.

  * I feel you could completely remove the GML_HUGE_SQLITE_UNSAFE config option,
and decide it to be TRUE. I don't see any reason why one would want to have
recovery guarantees for a temporary file. If the process is interrupted, I
suppose that the full resolving must be starting again and the temp file will be
recreated : correct ?

  * Same for GML_HUGE_TEMPFILE. Why would one want to keep the temporary sqlite
DB ? Or perhaps keep it undocumented for just debugging purposes, and make it
default to YES.

  * A bit correlated with the above : the use of int* pbOutIsTempFile in
hugeFileResolver() is confusing, because (contrary to the resolvexlinks.cpp
case) it is not used as an output parameter, but as an input one. And I am not
certain it only does what is documented (i.e. deleting the temporary .sqlite). I
somehow feel it will also delete the .resolved.gml file. See
GRGMLDataSource::~OGRGMLDataSource(). Perhaps I'm just confused...
My understanding of how resolvexlinks.cpp works is the following one : if for
some reason, we cannot create a .resolved.gml file in the same directory as the
.gml, we'll try to generate a temporary file somewhere else, in which case
ResolveXlinks() will set *pbOutIsTempFile  to TRUE, so that the destructor of
OGRGMLDataSource() can clean it when no longer used.

  * I'm wondering if the HUGE resolver could be automatically selected
if the GML file is bigger than a threshold ( 100 MB ? ) (and if sqlite is
available of course). The naming GML_SKIP_RESOLVE_ELEMS=HUGE sounds a bit
awckward to select a resolving algorithm and not very consistant with the
current allowed values (ALL / NONE / commma separated values), but I also find
the current logic a bit twisted too (GML_SKIP_RESOLVE_ELEMS=NONE means resolving
all elements...).

  * In hugefileresolver.cpp, I think that the hand-parsing of XML is unnecessary
in gmlHugeFileCheckXrefs(). The only caller of gmlHugeFileCheckXrefs() does a
gmlText = CPLSerializeXMLTree((CPLXMLNode *)pszNode) just before. Why not just
exploring the nodes through the CPLXMLNode objects ? This would be much cleaner
and robust (in case the XML serialization changes a bit), and likely a bit
faster too.

  * There might be security issues due to the use of char XXX[1024]. I see quite
a few strcpy() with no size checking. I'd suggest using CPLStrlcpy().

  * A few naming inconsistencies. The z in papszGeomList =
poFeature->GetGeometryList()  should be removed because no strings are used.
Same for pszNode = papszGeomList[i].

  * At line 1793 of hugefileresolver.cpp, VSIFPrintfL ( fp, "     
<%s>\%s</%s>\n",
--> the \ before %s looks wrong. And I see no use of XML escaping for the value
of the attribute
(use CPLEscapeString())

  * I see special cases for GML topology geometries in your code. Do you have
small GML samples that illustrate that and could be used for regression testing
?

Please open a ticket on GDAL Trac.

You mentionned the limitations of the XSD parser. That could be an interesting
area for improvements... Downloading XSD via URLs or supporting <xs:include>
doesn't look the more difficult part. The real challenge is dealing with complex
schema (complex being everything that doesn't fit into the Simple Feature Model
of "flat" attributes).

Best regards,

Even
From woklist at kyngchaos.com  Tue Dec  6 10:24:04 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue Dec  6 19:39:40 2011
Subject: [gdal-dev] Compile GDAL with swig(Java) on MAC OS X
In-Reply-To: <1323168051.4eddf1338610a@webmail.free.fr>
References: <4EDDE9B7.7040201@arcor.de>
	<1323168051.4eddf1338610a@webmail.free.fr>
Message-ID: <0930E3F4-823C-432F-BE99-062F837CFE25@kyngchaos.com>

On Dec 6, 2011, at 4:40 AM, Even Rouault wrote:

> Dennis,
> 
>> 
>> This works well so far, but the libgdaljni.dylib is directly linked to
>> libgdal in the base Folder. So, if copy my program to another location,
>> I will get a UnsatisfiedLinkError.
> 
> Yes, both libs must be accessible through the java.library.path property (or in
> a system library directory, or in LD_LIBRARY_PATH if this works on MacOSX)
> 
It's DYLD_LIBRARY_PATH on OS X.

But, that's the way OS X linking works - the full path to the library is coded into the binary.  If you don't want to mess with DYLD_LIBRARY_PATH or java.library.path, you can use install_name_tool to change where it looks for GDAL.  You need to run otool on the jni library first to see where it's currently looking for gdal.

otool -L /path/to/libgdaljni.dylib

[copy path to libgdal.dylib]

install_name_tool -change /current/path/to/libgdal.dylib /new/path/to/libgdal.dylib /path/to/libgdaljni.dylib


I thought I had instructions to add the java interface to my GDAL framework, but that was for Mapserver.  An interesting test would be to compile GDAL + plus java as you've done (make sure it's v1.8.1), then instead of relinking it to a different libgdal location, relink it to my GDAL framework binary:

install_name_tool -change /current/path/to/libgdal.dylib /Library/Frameworks/GDAL.framework/Versions/1.8/GDAL /path/to/libgdaljni.dylib

Success depends on if the java compilation hardwires in configured formats (bad) or depends on the GDAL library for that info (good), and if the support folder path is compiled in (bad) or it gets it from the GDAL library (good).

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying, fighting, and all for things that the beasts of the jungle would not deign to possess - money to purchase the effeminate pleasures of weaklings.  And yet withal bound down by silly customs that make them slaves to their unhappy lot while firm in the belief that they be the lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From jgomezdans at gmail.com  Tue Dec  6 12:52:17 2011
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Dec  6 12:56:59 2011
Subject: [gdal-dev] gdalbuilvrt and multiband files
Message-ID: <CAMWde5rN_nTOBvn-DJn-YcSWZX+TnvzCW5U_m46=w4u-VUOcig@mail.gmail.com>

Hi,

I'm trying to build a VRT file out of a number of multiband files using
gdalbuildvrt. Let's say I have N 7-band files, and I want build 7 N-band
files (i.e., I want to stack all the bands in the same dataset). I have
accomplished this thus far by having a prior step that creates a VRT for
each individual band, and I then stack them using gdalbuildvrt -separate.
However, i was wondering whether there's any more direct way of doing this?
I guess that one way would be to build the XML file directly, but I was
keen in finding some "shell-fu" way!

Thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111206/a7d071dc/attachment.html
From even.rouault at mines-paris.org  Tue Dec  6 13:43:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec  6 13:50:11 2011
Subject: [gdal-dev] gdalbuilvrt and multiband files
In-Reply-To: <CAMWde5rN_nTOBvn-DJn-YcSWZX+TnvzCW5U_m46=w4u-VUOcig@mail.gmail.com>
References: <CAMWde5rN_nTOBvn-DJn-YcSWZX+TnvzCW5U_m46=w4u-VUOcig@mail.gmail.com>
Message-ID: <201112061943.00793.even.rouault@mines-paris.org>

Le mardi 06 d?cembre 2011 18:52:17, Jose Gomez-Dans a ?crit :
> Hi,
> 
> I'm trying to build a VRT file out of a number of multiband files using
> gdalbuildvrt. Let's say I have N 7-band files, and I want build 7 N-band
> files (i.e., I want to stack all the bands in the same dataset). I have
> accomplished this thus far by having a prior step that creates a VRT for
> each individual band, and I then stack them using gdalbuildvrt -separate.

That's what I would have suggested to you if you didn't find it by yourself ;-)

> However, i was wondering whether there's any more direct way of doing this?

Not that I'm aware of. This becomes quite a specialized task, so it seems 
difficult to imagine a direct approach and a syntax to do that.

> I guess that one way would be to build the XML file directly,

Yes, I would recommend that.

> 
> Thanks!
> Jose
From marlam at marlam.de  Tue Dec  6 15:08:21 2011
From: marlam at marlam.de (Martin Lambers)
Date: Tue Dec  6 15:30:41 2011
Subject: [gdal-dev] gdalbuilvrt and multiband files
In-Reply-To: <CAMWde5rN_nTOBvn-DJn-YcSWZX+TnvzCW5U_m46=w4u-VUOcig@mail.gmail.com>
References: <CAMWde5rN_nTOBvn-DJn-YcSWZX+TnvzCW5U_m46=w4u-VUOcig@mail.gmail.com>
Message-ID: <20111206210821.4830e73c@spadowski.lambers.home>

Hi Jose!

On Tue, 6 Dec 2011 17:52:17 +0000, Jose Gomez-Dans wrote:
> I'm trying to build a VRT file out of a number of multiband files
> using gdalbuildvrt. Let's say I have N 7-band files, and I want build
> 7 N-band files (i.e., I want to stack all the bands in the same
> dataset). I have accomplished this thus far by having a prior step
> that creates a VRT for each individual band, and I then stack them
> using gdalbuildvrt -separate. However, i was wondering whether
> there's any more direct way of doing this? I guess that one way would
> be to build the XML file directly, but I was keen in finding some
> "shell-fu" way!

This might be slightly offtopic, but if you are using the latest GDAL
from svn, you could try the brand new GTA driver to store your files
in GTA format. Then you can use the gta tool, which was made for
exactly this kind of generic array data manipulation:

# loop over 7 bands, called 'components' in GTA
for j in `seq 0 6`; do
  # loop over N input files "in*.gta"
  for i in `seq 1 N`; do
    # extract the current component into its own file
    gta component-extract -k $j < in$i.gta > tmp$i.gta
  done
  # merge the extracted components into the output file
  gta component-merge tmp*.gta > out$j.gta
  rm tmp*.gta
done

Not a pure GDAL solution, but plenty of shell-fu :)

Martin
From etourigny.dev at gmail.com  Tue Dec  6 15:25:37 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Dec  6 15:39:02 2011
Subject: [gdal-dev] gdalbuilvrt and multiband files
In-Reply-To: <20111206210821.4830e73c@spadowski.lambers.home>
References: <CAMWde5rN_nTOBvn-DJn-YcSWZX+TnvzCW5U_m46=w4u-VUOcig@mail.gmail.com>
	<20111206210821.4830e73c@spadowski.lambers.home>
Message-ID: <CA+TxYvMJE4qEarOj_mka5me-B_hERaeopZa-ewAG04=VFvHTfg@mail.gmail.com>

The idea looks pretty cool!

just curious: what happens to georeferencing data (projection and GT)
and metadata when converting to (and from) GTA format?  What is the
status of metadata support in the GDAL driver?

Etienne

On Tue, Dec 6, 2011 at 6:08 PM, Martin Lambers <marlam@marlam.de> wrote:
> Hi Jose!
>
> On Tue, 6 Dec 2011 17:52:17 +0000, Jose Gomez-Dans wrote:
>> I'm trying to build a VRT file out of a number of multiband files
>> using gdalbuildvrt. Let's say I have N 7-band files, and I want build
>> 7 N-band files (i.e., I want to stack all the bands in the same
>> dataset). I have accomplished this thus far by having a prior step
>> that creates a VRT for each individual band, and I then stack them
>> using gdalbuildvrt -separate. However, i was wondering whether
>> there's any more direct way of doing this? I guess that one way would
>> be to build the XML file directly, but I was keen in finding some
>> "shell-fu" way!
>
> This might be slightly offtopic, but if you are using the latest GDAL
> from svn, you could try the brand new GTA driver to store your files
> in GTA format. Then you can use the gta tool, which was made for
> exactly this kind of generic array data manipulation:
>
> # loop over 7 bands, called 'components' in GTA
> for j in `seq 0 6`; do
> ?# loop over N input files "in*.gta"
> ?for i in `seq 1 N`; do
> ? ?# extract the current component into its own file
> ? ?gta component-extract -k $j < in$i.gta > tmp$i.gta
> ?done
> ?# merge the extracted components into the output file
> ?gta component-merge tmp*.gta > out$j.gta
> ?rm tmp*.gta
> done
>
> Not a pure GDAL solution, but plenty of shell-fu :)
>
> Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From marlam at marlam.de  Tue Dec  6 16:17:32 2011
From: marlam at marlam.de (Martin Lambers)
Date: Tue Dec  6 16:34:07 2011
Subject: [gdal-dev] gdalbuilvrt and multiband files
In-Reply-To: <CA+TxYvMJE4qEarOj_mka5me-B_hERaeopZa-ewAG04=VFvHTfg@mail.gmail.com>
References: <CAMWde5rN_nTOBvn-DJn-YcSWZX+TnvzCW5U_m46=w4u-VUOcig@mail.gmail.com>
	<20111206210821.4830e73c@spadowski.lambers.home>
	<CA+TxYvMJE4qEarOj_mka5me-B_hERaeopZa-ewAG04=VFvHTfg@mail.gmail.com>
Message-ID: <20111206221732.29af2214@spadowski.lambers.home>

The GTA driver supports all GDAL metadata, including projection etc. It
is stored in GTA tags. The gta tool will not touch it (unless you tell
it to by using the 'gta tag' command or edit it in the GUI). So in
this example the metadata ending up in the out*.gta files should be
the same as in the in*.gta files.

Martin


On Tue, 6 Dec 2011 18:25:37 -0200, Etienne Tourigny wrote:
> The idea looks pretty cool!
> 
> just curious: what happens to georeferencing data (projection and GT)
> and metadata when converting to (and from) GTA format?  What is the
> status of metadata support in the GDAL driver?
> 
> Etienne
> 
> On Tue, Dec 6, 2011 at 6:08 PM, Martin Lambers <marlam@marlam.de>
> wrote:
> > Hi Jose!
> >
> > On Tue, 6 Dec 2011 17:52:17 +0000, Jose Gomez-Dans wrote:
> >> I'm trying to build a VRT file out of a number of multiband files
> >> using gdalbuildvrt. Let's say I have N 7-band files, and I want
> >> build 7 N-band files (i.e., I want to stack all the bands in the
> >> same dataset). I have accomplished this thus far by having a prior
> >> step that creates a VRT for each individual band, and I then stack
> >> them using gdalbuildvrt -separate. However, i was wondering whether
> >> there's any more direct way of doing this? I guess that one way
> >> would be to build the XML file directly, but I was keen in finding
> >> some "shell-fu" way!
> >
> > This might be slightly offtopic, but if you are using the latest
> > GDAL from svn, you could try the brand new GTA driver to store your
> > files in GTA format. Then you can use the gta tool, which was made
> > for exactly this kind of generic array data manipulation:
> >
> > # loop over 7 bands, called 'components' in GTA
> > for j in `seq 0 6`; do
> > ?# loop over N input files "in*.gta"
> > ?for i in `seq 1 N`; do
> > ? ?# extract the current component into its own file
> > ? ?gta component-extract -k $j < in$i.gta > tmp$i.gta
> > ?done
> > ?# merge the extracted components into the output file
> > ?gta component-merge tmp*.gta > out$j.gta
> > ?rm tmp*.gta
> > done
> >
> > Not a pure GDAL solution, but plenty of shell-fu :)
> >
> > Martin
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Tue Dec  6 16:59:44 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Dec  6 17:18:23 2011
Subject: [gdal-dev] how to combine overlapping rasters?
Message-ID: <CA+TxYvP6GGF8MCeM=KQ5Q9XyG1CLpD_Q_hf+rQgscTrE9m+A8A@mail.gmail.com>

Hi all.

I am trying to combine 2 overlapping rasters into a single raster.
Specifically, I have a raster for land cover types covering South
America and another one for Brazil.

I want the values from the Brazil map to overlap the values from the
South American map.
To complicate things further, the Brazil map has some holes (no data
inside the map), which I would like to be set from the South America
map.

Can this be done with gdal utilities or Gis, or do I need to write a
python script?
I thought of doing some tricks to the Brazil map and create a band
from which I could set nodata values in South America map, and
then using gdalwarp (combining the modified South America map and the
Brazil map), does that make sense?

Posted sample jpg+jpw files at
http://www.openclimgeo.org/pub/maps/

A related question: How can I effectively mask (mark as nodata) raster
pixels inside a polygon?  For example, I would like to set the pixels
of the South American map to nodata inside the political boundaries of
Brazil, from a shapefile.
This is the *reverse* of clipping a raster based on a a polygon (like
gdalwarp -cutline -crop_to_cutline  does)

Thanks,
Etienne
From rush at winkey.org  Tue Dec  6 17:08:08 2011
From: rush at winkey.org (Brian Case)
Date: Tue Dec  6 17:27:24 2011
Subject: [gdal-dev] how to combine overlapping rasters?
In-Reply-To: <CA+TxYvP6GGF8MCeM=KQ5Q9XyG1CLpD_Q_hf+rQgscTrE9m+A8A@mail.gmail.com>
References: <CA+TxYvP6GGF8MCeM=KQ5Q9XyG1CLpD_Q_hf+rQgscTrE9m+A8A@mail.gmail.com>
Message-ID: <1323209288.17433.7.camel@octopi>

Etienne

if they overlap your limited to one of 2 options to mosaic

gdalwarp or mapserver

to get what ones are on top with gdalwarp i would imagine you would just
need to play with the order on the command line.

Brian


On Tue, 2011-12-06 at 19:59 -0200, Etienne Tourigny wrote:
> Hi all.
> 
> I am trying to combine 2 overlapping rasters into a single raster.
> Specifically, I have a raster for land cover types covering South
> America and another one for Brazil.
> 
> I want the values from the Brazil map to overlap the values from the
> South American map.
> To complicate things further, the Brazil map has some holes (no data
> inside the map), which I would like to be set from the South America
> map.
> 
> Can this be done with gdal utilities or Gis, or do I need to write a
> python script?
> I thought of doing some tricks to the Brazil map and create a band
> from which I could set nodata values in South America map, and
> then using gdalwarp (combining the modified South America map and the
> Brazil map), does that make sense?
> 
> Posted sample jpg+jpw files at
> http://www.openclimgeo.org/pub/maps/
> 
> A related question: How can I effectively mask (mark as nodata) raster
> pixels inside a polygon?  For example, I would like to set the pixels
> of the South American map to nodata inside the political boundaries of
> Brazil, from a shapefile.
> This is the *reverse* of clipping a raster based on a a polygon (like
> gdalwarp -cutline -crop_to_cutline  does)
> 
> Thanks,
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From rush at winkey.org  Tue Dec  6 17:13:44 2011
From: rush at winkey.org (Brian Case)
Date: Tue Dec  6 17:33:19 2011
Subject: [gdal-dev] how to combine overlapping rasters?
In-Reply-To: <CA+TxYvP6GGF8MCeM=KQ5Q9XyG1CLpD_Q_hf+rQgscTrE9m+A8A@mail.gmail.com>
References: <CA+TxYvP6GGF8MCeM=KQ5Q9XyG1CLpD_Q_hf+rQgscTrE9m+A8A@mail.gmail.com>
Message-ID: <1323209624.17433.9.camel@octopi>

Etienne

you can gdal_rasterise the polys into a alpha band, then add your alpha
band to your image in a vrt.

Brian


On Tue, 2011-12-06 at 19:59 -0200, Etienne Tourigny wrote:
> 
> A related question: How can I effectively mask (mark as nodata) raster
> pixels inside a polygon?  For example, I would like to set the pixels
> of the South American map to nodata inside the political boundaries of
> Brazil, from a shapefile. 

From jgomezdans at gmail.com  Tue Dec  6 17:36:03 2011
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Tue Dec  6 17:56:47 2011
Subject: [gdal-dev] gdalbuilvrt and multiband files
In-Reply-To: <20111206210821.4830e73c@spadowski.lambers.home>
References: <CAMWde5rN_nTOBvn-DJn-YcSWZX+TnvzCW5U_m46=w4u-VUOcig@mail.gmail.com>
	<20111206210821.4830e73c@spadowski.lambers.home>
Message-ID: <CAMWde5p1akmysEGfQorRKY86s+9On0hvKkpMt8m-aWbquxE5Rw@mail.gmail.com>

Hi

On 6 December 2011 20:08, Martin Lambers <marlam@marlam.de> wrote:

> Hi Jose!
> This might be slightly offtopic, but if you are using the latest GDAL
> from svn, you could try the brand new GTA driver to store your files
> in GTA format. Then you can use the gta tool, which was made for
> exactly this kind of generic array data manipulation:
>
> This looks interesting, but the whole point of using the VRTs is to
facilitate accessing zipped up files transparently and save disk space. It
is quite nice to be able to just dump all the zipfiles somewhere, spend
10min creating a few VRTs and being able to access the data straight away
from python. However gta-tool reminds me of the HIPS library, back in the
day! :) I shall definitely keep an eye on this, but for the time being,
putting together XML files is the solution to my problem

Thanks!

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111206/26da3735/attachment-0001.html
From etourigny.dev at gmail.com  Wed Dec  7 07:37:09 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Dec  7 08:44:19 2011
Subject: [gdal-dev] how to combine overlapping rasters?
In-Reply-To: <1323209288.17433.7.camel@octopi>
References: <CA+TxYvP6GGF8MCeM=KQ5Q9XyG1CLpD_Q_hf+rQgscTrE9m+A8A@mail.gmail.com>
	<1323209288.17433.7.camel@octopi>
Message-ID: <CA+TxYvMCL2MaAu_hyxrpcSeh+cn6XQfxpuTibuSEe0JBOinG2A@mail.gmail.com>

On Tue, Dec 6, 2011 at 8:08 PM, Brian Case <rush@winkey.org> wrote:
> Etienne
>
> if they overlap your limited to one of 2 options to mosaic
>
> gdalwarp or mapserver
>
> to get what ones are on top with gdalwarp i would imagine you would just
> need to play with the order on the command line.

Thanks you are right!

I used the top layer as the last input argument to gdalwarp, and the
result is as expected.

I had tried the opposite and only got one layer in the output (the
south american map).

>
> Brian
>
>
> On Tue, 2011-12-06 at 19:59 -0200, Etienne Tourigny wrote:
>> Hi all.
>>
>> I am trying to combine 2 overlapping rasters into a single raster.
>> Specifically, I have a raster for land cover types covering South
>> America and another one for Brazil.
>>
>> I want the values from the Brazil map to overlap the values from the
>> South American map.
>> To complicate things further, the Brazil map has some holes (no data
>> inside the map), which I would like to be set from the South America
>> map.
>>
>> Can this be done with gdal utilities or Gis, or do I need to write a
>> python script?
>> I thought of doing some tricks to the Brazil map and create a band
>> from which I could set nodata values in South America map, and
>> then using gdalwarp (combining the modified South America map and the
>> Brazil map), does that make sense?
>>
>> Posted sample jpg+jpw files at
>> http://www.openclimgeo.org/pub/maps/
>>
>> A related question: How can I effectively mask (mark as nodata) raster
>> pixels inside a polygon? ?For example, I would like to set the pixels
>> of the South American map to nodata inside the political boundaries of
>> Brazil, from a shapefile.
>> This is the *reverse* of clipping a raster based on a a polygon (like
>> gdalwarp -cutline -crop_to_cutline ?does)
>>
>> Thanks,
>> Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
From KShannon at gcs-research.com  Wed Dec  7 14:17:39 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Wed Dec  7 15:46:58 2011
Subject: [gdal-dev] -unscale issue with multiband vrt
Message-ID: <2DD24CD6225DC04C81CF12523261F4B933E44084@MAIL.gcs-research.net>

Hi All,
I am running into an issue with unscaling a multiband raster.  I am creating a vrt from 5 xyz datasets.  I use the following command:

gdalbuildvrt -separate -srcnodata -9999 mmi.vrt csv\*

3 of the 5 rasters are of the lower 48 states of the US, the other 2 are only the western half.  gdalbuildvrt works good, and pads the eastern half of the US with nodata values of -9999 for the western rasters.  I have to scale all of the bands, so I edit the vrt and add <Scale>100</Scale> to each VRTRasterBand

This displays correctly in gdalinfo:

C:\Users\k\Desktop\mmi_tmp\vrt_test>gdalinfo -stats -nomd mmi.vrt
Driver: VRT/Virtual Raster
Files: mmi.vrt
       csv\2008.WUS.Xpgv.537.2475
       csv\2008.WUS.Xpgv.537.475
       csv\UShazard.20081231.pga.10pc50
       csv\UShazard.20081231.pga.2pc50
       csv\UShazard.20081231.pga.5pc50
Size is 1201, 509
Coordinate System is `'
Origin = (-125.025000000000010,50.024999999999999)
Pixel Size = (0.050000000000000,-0.050000000000000)
Corner Coordinates:
Upper Left  (-125.0250000,  50.0250000)
Lower Left  (-125.0250000,  24.5750000)
Upper Right ( -64.9750000,  50.0250000)
Lower Right ( -64.9750000,  24.5750000)
Center      ( -95.0000000,  37.3000000)
Band 1 Block=128x128 Type=Float32, ColorInterp=Undefined
  Min=0.100 Max=200.000
  Minimum=0.100, Maximum=200.000, Mean=10.363, StdDev=16.347
  NoData Value=-9999
  Offset: 0,   Scale:100
Band 2 Block=128x128 Type=Float32, ColorInterp=Undefined
  Min=0.100 Max=123.982
  Minimum=0.100, Maximum=123.982, Mean=4.866, StdDev=8.152
  NoData Value=-9999
  Offset: 0,   Scale:100
Band 3 Block=128x128 Type=Float32, ColorInterp=Undefined
  Min=0.005 Max=1.110
  Minimum=0.005, Maximum=1.110, Mean=0.041, StdDev=0.064
  NoData Value=-9999
  Offset: 0,   Scale:100
Band 4 Block=128x128 Type=Float32, ColorInterp=Undefined
  Min=0.005 Max=2.037
  Minimum=0.005, Maximum=2.037, Mean=0.103, StdDev=0.150
  NoData Value=-9999
  Offset: 0,   Scale:100
Band 5 Block=128x128 Type=Float32, ColorInterp=Undefined
  Min=0.005 Max=1.346
  Minimum=0.005, Maximum=1.346, Mean=0.063, StdDev=0.097
  NoData Value=-9999
  Offset: 0,   Scale:100

When I unscale the raster, the Full US bands do fine, but the no data value for the Western US Bands isn't respected and the nodata values are changed.  Am I missing something in my vrt?  Any thoughts.

C:\Users\k\Desktop\mmi_tmp\vrt_test>gdal_translate -unscale mmi.vrt mmi.tif
Input file size is 1201, 509
0...10...20...30...40...50...60...70...80...90...100 - done.

C:\Users\k\Desktop\mmi_tmp\vrt_test>gdalinfo -nomd -stats mmi.tif
Driver: GTiff/GeoTIFF
Files: mmi.tif
Size is 1201, 509
Coordinate System is `'
Origin = (-125.025000000000010,50.024999999999999)
Pixel Size = (0.050000000000000,-0.050000000000000)
Corner Coordinates:
Upper Left  (-125.0250000,  50.0250000)
Lower Left  (-125.0250000,  24.5750000)
Upper Right ( -64.9750000,  50.0250000)
Lower Right ( -64.9750000,  24.5750000)
Center      ( -95.0000000,  37.3000000)
Band 1 Block=1201x1 Type=Float32, ColorInterp=Gray
  Minimum=-999900.000, Maximum=20000.000, Mean=-582357.045, StdDev=493551.313
  NoData Value=-9999
Band 2 Block=1201x1 Type=Float32, ColorInterp=Undefined
  Minimum=-999900.000, Maximum=12398.200, Mean=-582586.370, StdDev=493279.394
  NoData Value=-9999
Band 3 Block=1201x1 Type=Float32, ColorInterp=Undefined
  Minimum=0.500, Maximum=111.030, Mean=4.092, StdDev=6.447
  NoData Value=-9999
Band 4 Block=1201x1 Type=Float32, ColorInterp=Undefined
  Minimum=0.500, Maximum=203.720, Mean=10.284, StdDev=14.961
  NoData Value=-9999
Band 5 Block=1201x1 Type=Float32, ColorInterp=Undefined
  Minimum=0.500, Maximum=134.630, Mean=6.273, StdDev=9.686
  NoData Value=-9999



Kyle Shannon
Senior Software Engineer
GCS Research
Office 406-532-3254 * Direct 406-541-3276
kshannon@gcs-research.com<mailto:kshannon@gcs-research.com> * www.gcs-research.com<http://www.gcs-research.com/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111207/d0704961/attachment.html
From even.rouault at mines-paris.org  Wed Dec  7 16:02:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec  7 17:37:29 2011
Subject: [gdal-dev] -unscale issue with multiband vrt
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B933E44084@MAIL.gcs-research.net>
References: <2DD24CD6225DC04C81CF12523261F4B933E44084@MAIL.gcs-research.net>
Message-ID: <201112072202.51961.even.rouault@mines-paris.org>

Le mercredi 07 d?cembre 2011 20:17:39, Kyle Shannon a ?crit :

I think you are in fact exactly running in the issue of #3085.

It is difficult to know for sure without having the data under my eyes, but I'm 
going to guess one more time ;-)

So my guess it that before -unscale, your band 1 et 2 have pixels whose value 
match the nodata value of -9999. And they are not taken into account in the 
minimum/maximum value computation, which is appropriate.

After -unscale - that doesn't do special for nodata values - , those values of 
-9999 are multiplied by 100, hence the -999900 as the new minimum value for 
band 1 and 2. For other bands the minimum value after unscale is the minimum 
value before unscale * 100.

So all in all the behaviour is just consistant for all bands, but not the one 
you expect.


> Hi All,
> I am running into an issue with unscaling a multiband raster.  I am
> creating a vrt from 5 xyz datasets.  I use the following command:
> 
> gdalbuildvrt -separate -srcnodata -9999 mmi.vrt csv\*
> 
> 3 of the 5 rasters are of the lower 48 states of the US, the other 2 are
> only the western half.  gdalbuildvrt works good, and pads the eastern half
> of the US with nodata values of -9999 for the western rasters.  I have to
> scale all of the bands, so I edit the vrt and add <Scale>100</Scale> to
> each VRTRasterBand
> 
> This displays correctly in gdalinfo:
> 
> C:\Users\k\Desktop\mmi_tmp\vrt_test>gdalinfo -stats -nomd mmi.vrt
> Driver: VRT/Virtual Raster
> Files: mmi.vrt
>        csv\2008.WUS.Xpgv.537.2475
>        csv\2008.WUS.Xpgv.537.475
>        csv\UShazard.20081231.pga.10pc50
>        csv\UShazard.20081231.pga.2pc50
>        csv\UShazard.20081231.pga.5pc50
> Size is 1201, 509
> Coordinate System is `'
> Origin = (-125.025000000000010,50.024999999999999)
> Pixel Size = (0.050000000000000,-0.050000000000000)
> Corner Coordinates:
> Upper Left  (-125.0250000,  50.0250000)
> Lower Left  (-125.0250000,  24.5750000)
> Upper Right ( -64.9750000,  50.0250000)
> Lower Right ( -64.9750000,  24.5750000)
> Center      ( -95.0000000,  37.3000000)
> Band 1 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.100 Max=200.000
>   Minimum=0.100, Maximum=200.000, Mean=10.363, StdDev=16.347
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> Band 2 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.100 Max=123.982
>   Minimum=0.100, Maximum=123.982, Mean=4.866, StdDev=8.152
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> Band 3 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.005 Max=1.110
>   Minimum=0.005, Maximum=1.110, Mean=0.041, StdDev=0.064
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> Band 4 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.005 Max=2.037
>   Minimum=0.005, Maximum=2.037, Mean=0.103, StdDev=0.150
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> Band 5 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.005 Max=1.346
>   Minimum=0.005, Maximum=1.346, Mean=0.063, StdDev=0.097
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> 
> When I unscale the raster, the Full US bands do fine, but the no data value
> for the Western US Bands isn't respected and the nodata values are
> changed.  Am I missing something in my vrt?  Any thoughts.
> 
> C:\Users\k\Desktop\mmi_tmp\vrt_test>gdal_translate -unscale mmi.vrt mmi.tif
> Input file size is 1201, 509
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> C:\Users\k\Desktop\mmi_tmp\vrt_test>gdalinfo -nomd -stats mmi.tif
> Driver: GTiff/GeoTIFF
> Files: mmi.tif
> Size is 1201, 509
> Coordinate System is `'
> Origin = (-125.025000000000010,50.024999999999999)
> Pixel Size = (0.050000000000000,-0.050000000000000)
> Corner Coordinates:
> Upper Left  (-125.0250000,  50.0250000)
> Lower Left  (-125.0250000,  24.5750000)
> Upper Right ( -64.9750000,  50.0250000)
> Lower Right ( -64.9750000,  24.5750000)
> Center      ( -95.0000000,  37.3000000)
> Band 1 Block=1201x1 Type=Float32, ColorInterp=Gray
>   Minimum=-999900.000, Maximum=20000.000, Mean=-582357.045,
> StdDev=493551.313 NoData Value=-9999
> Band 2 Block=1201x1 Type=Float32, ColorInterp=Undefined
>   Minimum=-999900.000, Maximum=12398.200, Mean=-582586.370,
> StdDev=493279.394 NoData Value=-9999
> Band 3 Block=1201x1 Type=Float32, ColorInterp=Undefined
>   Minimum=0.500, Maximum=111.030, Mean=4.092, StdDev=6.447
>   NoData Value=-9999
> Band 4 Block=1201x1 Type=Float32, ColorInterp=Undefined
>   Minimum=0.500, Maximum=203.720, Mean=10.284, StdDev=14.961
>   NoData Value=-9999
> Band 5 Block=1201x1 Type=Float32, ColorInterp=Undefined
>   Minimum=0.500, Maximum=134.630, Mean=6.273, StdDev=9.686
>   NoData Value=-9999
> 
> 
> 
> Kyle Shannon
> Senior Software Engineer
> GCS Research
> Office 406-532-3254 * Direct 406-541-3276
> kshannon@gcs-research.com<mailto:kshannon@gcs-research.com> *
> www.gcs-research.com<http://www.gcs-research.com/>
From KShannon at gcs-research.com  Wed Dec  7 16:16:59 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Wed Dec  7 17:52:45 2011
Subject: [gdal-dev] -unscale issue with multiband vrt
In-Reply-To: <201112072202.51961.even.rouault@mines-paris.org>
References: <2DD24CD6225DC04C81CF12523261F4B933E44084@MAIL.gcs-research.net>
	<201112072202.51961.even.rouault@mines-paris.org>
Message-ID: <2DD24CD6225DC04C81CF12523261F4B933E440AD@MAIL.gcs-research.net>

Your correct Even.  I thought I had nodata values in the other bands, but I didn't, I introduce those later in processing.  Thanks again.  Good guessing.

kss

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Wednesday, December 07, 2011 2:03 PM
To: gdal-dev@lists.osgeo.org
Cc: Kyle Shannon
Subject: Re: [gdal-dev] -unscale issue with multiband vrt

Le mercredi 07 d?cembre 2011 20:17:39, Kyle Shannon a ?crit :

I think you are in fact exactly running in the issue of #3085.

It is difficult to know for sure without having the data under my eyes, but I'm going to guess one more time ;-)

So my guess it that before -unscale, your band 1 et 2 have pixels whose value match the nodata value of -9999. And they are not taken into account in the minimum/maximum value computation, which is appropriate.

After -unscale - that doesn't do special for nodata values - , those values of
-9999 are multiplied by 100, hence the -999900 as the new minimum value for band 1 and 2. For other bands the minimum value after unscale is the minimum value before unscale * 100.

So all in all the behaviour is just consistant for all bands, but not the one you expect.


> Hi All,
> I am running into an issue with unscaling a multiband raster.  I am
> creating a vrt from 5 xyz datasets.  I use the following command:
> 
> gdalbuildvrt -separate -srcnodata -9999 mmi.vrt csv\*
> 
> 3 of the 5 rasters are of the lower 48 states of the US, the other 2 are
> only the western half.  gdalbuildvrt works good, and pads the eastern half
> of the US with nodata values of -9999 for the western rasters.  I have to
> scale all of the bands, so I edit the vrt and add <Scale>100</Scale> to
> each VRTRasterBand
> 
> This displays correctly in gdalinfo:
> 
> C:\Users\k\Desktop\mmi_tmp\vrt_test>gdalinfo -stats -nomd mmi.vrt
> Driver: VRT/Virtual Raster
> Files: mmi.vrt
>        csv\2008.WUS.Xpgv.537.2475
>        csv\2008.WUS.Xpgv.537.475
>        csv\UShazard.20081231.pga.10pc50
>        csv\UShazard.20081231.pga.2pc50
>        csv\UShazard.20081231.pga.5pc50
> Size is 1201, 509
> Coordinate System is `'
> Origin = (-125.025000000000010,50.024999999999999)
> Pixel Size = (0.050000000000000,-0.050000000000000)
> Corner Coordinates:
> Upper Left  (-125.0250000,  50.0250000)
> Lower Left  (-125.0250000,  24.5750000)
> Upper Right ( -64.9750000,  50.0250000)
> Lower Right ( -64.9750000,  24.5750000)
> Center      ( -95.0000000,  37.3000000)
> Band 1 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.100 Max=200.000
>   Minimum=0.100, Maximum=200.000, Mean=10.363, StdDev=16.347
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> Band 2 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.100 Max=123.982
>   Minimum=0.100, Maximum=123.982, Mean=4.866, StdDev=8.152
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> Band 3 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.005 Max=1.110
>   Minimum=0.005, Maximum=1.110, Mean=0.041, StdDev=0.064
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> Band 4 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.005 Max=2.037
>   Minimum=0.005, Maximum=2.037, Mean=0.103, StdDev=0.150
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> Band 5 Block=128x128 Type=Float32, ColorInterp=Undefined
>   Min=0.005 Max=1.346
>   Minimum=0.005, Maximum=1.346, Mean=0.063, StdDev=0.097
>   NoData Value=-9999
>   Offset: 0,   Scale:100
> 
> When I unscale the raster, the Full US bands do fine, but the no data value
> for the Western US Bands isn't respected and the nodata values are
> changed.  Am I missing something in my vrt?  Any thoughts.
> 
> C:\Users\k\Desktop\mmi_tmp\vrt_test>gdal_translate -unscale mmi.vrt mmi.tif
> Input file size is 1201, 509
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> C:\Users\k\Desktop\mmi_tmp\vrt_test>gdalinfo -nomd -stats mmi.tif
> Driver: GTiff/GeoTIFF
> Files: mmi.tif
> Size is 1201, 509
> Coordinate System is `'
> Origin = (-125.025000000000010,50.024999999999999)
> Pixel Size = (0.050000000000000,-0.050000000000000)
> Corner Coordinates:
> Upper Left  (-125.0250000,  50.0250000)
> Lower Left  (-125.0250000,  24.5750000)
> Upper Right ( -64.9750000,  50.0250000)
> Lower Right ( -64.9750000,  24.5750000)
> Center      ( -95.0000000,  37.3000000)
> Band 1 Block=1201x1 Type=Float32, ColorInterp=Gray
>   Minimum=-999900.000, Maximum=20000.000, Mean=-582357.045,
> StdDev=493551.313 NoData Value=-9999
> Band 2 Block=1201x1 Type=Float32, ColorInterp=Undefined
>   Minimum=-999900.000, Maximum=12398.200, Mean=-582586.370,
> StdDev=493279.394 NoData Value=-9999
> Band 3 Block=1201x1 Type=Float32, ColorInterp=Undefined
>   Minimum=0.500, Maximum=111.030, Mean=4.092, StdDev=6.447
>   NoData Value=-9999
> Band 4 Block=1201x1 Type=Float32, ColorInterp=Undefined
>   Minimum=0.500, Maximum=203.720, Mean=10.284, StdDev=14.961
>   NoData Value=-9999
> Band 5 Block=1201x1 Type=Float32, ColorInterp=Undefined
>   Minimum=0.500, Maximum=134.630, Mean=6.273, StdDev=9.686
>   NoData Value=-9999
> 
> 
> 
> Kyle Shannon
> Senior Software Engineer
> GCS Research
> Office 406-532-3254 * Direct 406-541-3276
> kshannon@gcs-research.com<mailto:kshannon@gcs-research.com> *
> www.gcs-research.com<http://www.gcs-research.com/>
From KShannon at gcs-research.com  Wed Dec  7 19:08:11 2011
From: KShannon at gcs-research.com (Kyle Shannon)
Date: Wed Dec  7 21:08:15 2011
Subject: [gdal-dev] invert option for rasterize in python bindings
Message-ID: <2DD24CD6225DC04C81CF12523261F4B933E440C2@MAIL.gcs-research.net>

Is the -i (invert burn) option available through gdal.RasterizeLayer()?  I can't find the documentation.

Kyle Shannon
Senior Software Engineer
GCS Research
Office 406-532-3254 * Direct 406-541-3276
kshannon@gcs-research.com<mailto:kshannon@gcs-research.com> * www.gcs-research.com<http://www.gcs-research.com/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111208/134672d6/attachment.html
From chaitanya.ch at gmail.com  Wed Dec  7 22:58:32 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Dec  8 00:56:23 2011
Subject: [gdal-dev] invert option for rasterize in python bindings
In-Reply-To: <2DD24CD6225DC04C81CF12523261F4B933E440C2@MAIL.gcs-research.net>
References: <2DD24CD6225DC04C81CF12523261F4B933E440C2@MAIL.gcs-research.net>
Message-ID: <CAMKgpOZ+q1bo3du3w+DJ954=32fMOewQZXYyYK=Q6e-nJ9cJ6A@mail.gmail.com>

Kyle,

This option is not available through the algorithm. It is implemented by
the gdal_rasterize utility[1] by creating a ring that is just outside the
extents of the output raster.

Python's gdal.RasterizeLayer() takes the same arguments as
GDALRasterizeLayers() [2].

[1]: http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_rasterize.cpp
[2]: http://www.gdal.org/gdal__alg_8h.html#dfe5e5d287d6c184aab03acbfa567cb1

On Thu, Dec 8, 2011 at 5:38 AM, Kyle Shannon <KShannon@gcs-research.com>wrote:

>  Is the ?i (invert burn) option available through gdal.RasterizeLayer()?
> I can?t find the documentation.****
>
> ** **
>
> *Kyle Shannon*
> Senior Software Engineer****
>
> *GCS Research***
>
> Office 406-532-3254 ? Direct 406-541-3276****
>
> kshannon@gcs-research.com ? *www.gcs-research.com** *
>
> ** **
>
> This email message is for the sole use of the intended recipient(s) and
> may contain confidential and privileged information. Any unauthorized
> review, use, disclosure or distribution is prohibited. If you are not the
> intended recipient, please contact the sender by reply email and delete the
> original message.   ??
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111208/59d12f25/attachment.html
From alexandre.herbreteau at gmail.com  Thu Dec  8 04:57:38 2011
From: alexandre.herbreteau at gmail.com (Alexandre Herbreteau)
Date: Thu Dec  8 07:23:44 2011
Subject: [gdal-dev] Unable to link gdal : CPLCreateOrAcquireMutex reference
	not found
Message-ID: <CAKF0tmR+d1KWpxrqEc7kwW+Ly2CbUScjOf7kdHxsOkyomcjXGQ@mail.gmail.com>

Hi,

I've downloaded the latest GDAL source code by i'm unable to produce a
library. It is due to a link error : "undefined reference to
`CPLCreateOrAcquireMutex"

I'm using Mingw with gcc 4.5.2. Here is what I do :

Unzip, go to Gdal root directory, and run configure:
- This generate a file cpl_config.h (under "port" directory) with this
option :
#define CPL_MULTIPROC_PTHREAD 1

It seems to be very strange because this flag prevents the function
CPLCreateOrAcquireMutex to be declared in the cpl_multiproc.cpp file.
Actually, here is the file structure :

/******* FIRST PART DEFINITION *************/
#ifndef CPL_MULTIPROC_PTHREAD
   int CPLCreateOrAcquireMutex( void **phMutex, double dfWaitInSeconds ) {
.... }
#endif

.....


/******* SECOND PART DEFINITION *************/
#if defined(CPL_MULTIPROC_STUB)
  .....
#elif defined(CPL_MULTIPROC_WIN32)
  ....
#elif defined(CPL_MULTIPROC_PTHREAD)
   int CPLCreateOrAcquireMutex( void **phMutex, double dfWaitInSeconds ) {
...... }
#endif

And CPLCreateOrAcquireMutex is used in CPLMutexHolder (which is not under
precompilation directive, so it is compiled whenever CPL_MULTIPROC_STUB,
CPL_MULTIPROC_WIN32 or CPL_MULTIPROC_PTHREAD are defined or not).

So, defining CPLCreateOrAcquireMutex seems to be absolutly necessary but in
this case it cannot work because both CPL_MULTIPROC_WIN32 and
CPL_MULTIPROC_PTHREAD are defined..... :
- CPL_MULTIPROC_WIN32 is defined in cpl_multiproc.h file :
      #if defined(WIN32) && !defined(CPL_MULTIPROC_STUB)
             #  define CPL_MULTIPROC_WIN32
      #endif
- CPL_MULTIPROC_PTHREAD is defined in cpl_config.h, generated file, as I've
already explained before....

The result :
   1) In the FIRST PART DEFINITION, code int CPLCreateOrAcquireMutex(  ....
is not build due to preprocessing directives,
   2) In the SECOND PART DEFINITION, the code after "#elif
defined(CPL_MULTIPROC_WIN32)" is compiled, and " int
CPLCreateOrAcquireMutex(..." is not build too....
   3) To conclude, this code is not available for the calling function.

It is quite strange that nobody already reported this problem, because
compiling GDAL with CPL_MULTIPROC_PTHREAD support and under WIN32 is
something really usual !!!!

What is wrong, please, with my way of doing ?

Thanks a lot for your answer.

Alexandre.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111208/f80e7862/attachment-0001.html
From GTisher at sydneyplus.com  Fri Dec  9 13:33:34 2011
From: GTisher at sydneyplus.com (Gordon Tisher)
Date: Fri Dec  9 17:40:24 2011
Subject: [gdal-dev] ogr2ogr 1.9 gml3.2 output and multisurface
Message-ID: <48A859955EE6304BA0327A9BE307BCA7EA08F4@earth.corp.sydneyplus.com>

Hi,

I have a question regarding GML3.2 output from ogr2ogr in GDAL 1.9 (from
a daily build from a few days ago).  I have a sample shapefile (found at
http://www.vdstech.com/mapdata/canada.zip) that I've tried to convert to
GML 3.2 using the command "ogr2ogr -f GML canada.xml canada.shp -dsco
FORMAT=GML3.2".

When I try to validate the resulting file (using xerces via the oXygen
editor, as well as the .NET xml schema libraries) there are a couple of
problems:

 - The XML file sometimes includes the element gml:MultiSurface in the
element ogr:geometryProperty, which the XML 3.2.1 schema does not allow,
as ogr:geometryProperty is defined in the generated XSD file to be of
type gml:SurfacePropertyType, which only allows elements in the
substitution group gml:AbstractSurface.  gml:MultiSurface is not in that
group.

 - Inside the gml:MultiSurface elements, the individual gml:Polygon
elements do not have id attributes, which xerces complains about.

Perhaps the type of the generated gml:geometryProperty element should be
gml:GeometryPropertyType, which allows child elements of anything in the
gml:AbstractGeometry substitution group, and contains all the other
attributes that are found in gml:SurfacePropertyType.

Am I missing something here?

Thanks,

-- 
Gordon Tisher                                   gtisher@sydneyplus.com
Software Engineer                                      +1 604-278-9161
SydneyPLUS             5138 - 13562 Maycrest Way, Richmond, BC V6V 2J7


From even.rouault at mines-paris.org  Fri Dec  9 14:00:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec  9 18:07:37 2011
Subject: [gdal-dev] ogr2ogr 1.9 gml3.2 output and multisurface
In-Reply-To: <48A859955EE6304BA0327A9BE307BCA7EA08F4@earth.corp.sydneyplus.com>
References: <48A859955EE6304BA0327A9BE307BCA7EA08F4@earth.corp.sydneyplus.com>
Message-ID: <201112092000.04791.even.rouault@mines-paris.org>

Gordon,

> Hi,
> 
> I have a question regarding GML3.2 output from ogr2ogr in GDAL 1.9 (from
> a daily build from a few days ago).  I have a sample shapefile (found at
> http://www.vdstech.com/mapdata/canada.zip) that I've tried to convert to
> GML 3.2 using the command "ogr2ogr -f GML canada.xml canada.shp -dsco
> FORMAT=GML3.2".

Thanks for your testing and reporting.

> 
> When I try to validate the resulting file (using xerces via the oXygen
> editor, as well as the .NET xml schema libraries) there are a couple of
> problems:
> 
>  - The XML file sometimes includes the element gml:MultiSurface in the
> element ogr:geometryProperty, which the XML 3.2.1 schema does not allow,
> as ogr:geometryProperty is defined in the generated XSD file to be of
> type gml:SurfacePropertyType, which only allows elements in the
> substitution group gml:AbstractSurface.  gml:MultiSurface is not in that
> group.

Ok, that's in fact a problem with the behaviour of the shapefile driver that is 
used as a source. In shapefiles, there's no way to know in advance (without 
iterating over all the geometries!) if the geometries are POLYGON or 
MULTIPOLYGON. Currently (and this has been the case over the last 10 years 
;-)), the shapefile driver advertizes the layer to be of type POLYGON, but 
features with MULTIPOLYGON geometries can be reported... (That's an issue for 
conversion to other drivers, like Postgis too. Perhaps we should just force 
translation of geometries of shapefile polygon layers as MULTIPOLYGON and then 
advertize the layer as being MULTIPOLYGON.)

The XSD declaration is based on the declared layer type, hence 
gml:SurfacePropertyType .

This can be solved by 2 similar solutions. Add -nlt MULTIPOLYGON to your 
ogr2ogr command line to force conversion of simple polygons to multipolygons. 
Or add -nlt GEOMETRY so that the target layer is just advertized as being of 
type wkbUnknown, which will be translated as a gml:GeometryPropertyType in the 
XSD.

> 
>  - Inside the gml:MultiSurface elements, the individual gml:Polygon
> elements do not have id attributes, which xerces complains about.

That was a real bug. Just fixed by r23502.

Best regards,

Even

From GTisher at sydneyplus.com  Fri Dec  9 14:21:50 2011
From: GTisher at sydneyplus.com (Gordon Tisher)
Date: Fri Dec  9 18:30:14 2011
Subject: [gdal-dev] ogr2ogr 1.9 gml3.2 output and multisurface
In-Reply-To: <201112092000.04791.even.rouault@mines-paris.org>
References: <48A859955EE6304BA0327A9BE307BCA7EA08F4@corp.earth.sydneyplus.com>
	<201112092000.04791.even.rouault@mines-paris.org>
Message-ID: <48A859955EE6304BA0327A9BE307BCA7EA090A@earth.corp.sydneyplus.com>

Thanks Even, using -nlt GEOMETRY works great for my application.

> This can be solved by 2 similar solutions. Add -nlt MULTIPOLYGON to
> your ogr2ogr command line to force conversion of simple polygons to
> multipolygons.
> Or add -nlt GEOMETRY so that the target layer is just advertized as
> being of type wkbUnknown, which will be translated as a
> gml:GeometryPropertyType in the XSD.
From supportlists at qlands.com  Fri Dec  9 18:45:41 2011
From: supportlists at qlands.com (SupportLists)
Date: Fri Dec  9 23:40:58 2011
Subject: [gdal-dev] Classification and combination with GDAL?
Message-ID: <4EE29DA5.9090505@qlands.com>

Hi,

I need to perform classification and combination of three ascii grids. 
This means for example:

1. Separate the data of each cell in the grid among three classes
     Layer1 Classes: A1,B1,C1
     Layer2 Classes: A2,B2,C2
     Layer3 Classes: A3,B3,C3

2. Then Combine the three classified grids into one so each cell has a 
combination of the 27 possible.
     Cell 1: A1A2A3
     Cell 2: A1B2A3
     ....
     Cell max: C3C2C1.

3. Assign a color to each combination and generate a final GeoTIFF.

How if possible can I do this with GDAL?

Many thanks,
Carlos.

From chaitanya.ch at gmail.com  Fri Dec  9 23:10:45 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Dec 10 03:47:33 2011
Subject: [gdal-dev] Classification and combination with GDAL?
In-Reply-To: <4EE29DA5.9090505@qlands.com>
References: <4EE29DA5.9090505@qlands.com>
Message-ID: <CAMKgpObOsTOnkuGRfaSGcyyHoNFnmXJu8BwC5CkcdYeBL+ioVA@mail.gmail.com>

Carlos,

This is a specialized case.
You can do this programatically by using 'derived bands' in the VRT
format[1].

It could be a lot easier to do this using a desktop GIS application like
QuantamGIS [2]. QuantamGIS has a raster calculator utility that can do a
lot of arithmetic operations like this.

[1]: http://www.gdal.org/gdal_vrttut.html
[2]: http://www.qgis.org/

On Sat, Dec 10, 2011 at 5:15 AM, SupportLists <supportlists@qlands.com>wrote:

> Hi,
>
> I need to perform classification and combination of three ascii grids.
> This means for example:
>
> 1. Separate the data of each cell in the grid among three classes
>    Layer1 Classes: A1,B1,C1
>    Layer2 Classes: A2,B2,C2
>    Layer3 Classes: A3,B3,C3
>
> 2. Then Combine the three classified grids into one so each cell has a
> combination of the 27 possible.
>    Cell 1: A1A2A3
>    Cell 2: A1B2A3
>    ....
>    Cell max: C3C2C1.
>
> 3. Assign a color to each combination and generate a final GeoTIFF.
>
> How if possible can I do this with GDAL?
>
> Many thanks,
> Carlos.
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111210/829ed80f/attachment.html
From jctoney at yahoo.com  Sat Dec 10 13:46:53 2011
From: jctoney at yahoo.com (Chris Toney)
Date: Sat Dec 10 19:15:15 2011
Subject: [gdal-dev] Classification and combination with GDAL?
In-Reply-To: <20111210170017.6DB2DE00C1D@lists.osgeo.org>
References: <20111210170017.6DB2DE00C1D@lists.osgeo.org>
Message-ID: <1323542813.2850.YahooMailNeo@web161004.mail.bf1.yahoo.com>



Carlos,
I have a "gdal_combine" utility written in C++ that finds the unique combinations, assigns a combination ID that can be written into the cells of an output raster, and also writes a csv table with the IDs, values of original variables they represent, and their pixel counts. The input rasters must all have the same extent and cell size. I'll be happy to send the source or post it somewhere if it might be helpful.

Chris

>------------------------------
>
>Date: Sat, 10 Dec 2011 02:45:41 +0300
>From: SupportLists <supportlists@qlands.com>
>Subject: [gdal-dev] Classification and combination with GDAL?
>To: gdal-dev <gdal-dev@lists.osgeo.org>
>Message-ID: <4EE29DA5.9090505@qlands.com>
>Content-Type: text/plain; charset=ISO-8859-1; format=flowed
>
>Hi,
>
>I need to perform classification and combination of three ascii grids. 
>This means for example:
>
>1. Separate the data of each cell in the grid among three classes
>? ???Layer1 Classes: A1,B1,C1
>? ???Layer2 Classes: A2,B2,C2
>? ???Layer3 Classes: A3,B3,C3
>
>2. Then Combine the three classified grids into one so each cell has a 
>combination of the 27 possible.
>? ???Cell 1: A1A2A3
>? ???Cell 2: A1B2A3
>? ???....
>? ???Cell max: C3C2C1.
>
>3. Assign a color to each combination and generate a final GeoTIFF.
>
>How if possible can I do this with GDAL?
>
>Many thanks,
>Carlos.
>
>
>
From a.furieri at lqt.it  Sun Dec 11 08:14:23 2011
From: a.furieri at lqt.it (Alessandro Furieri)
Date: Sun Dec 11 14:41:46 2011
Subject: [gdal-dev] SQLite/SpatiaLite slowness in OGR
Message-ID: <4EE4ACAF.3080008@lqt.it>

Hi,

I noticed that ogr2ogr is unnecessarily slow while
accessing really huge SpatiaLite datasources;
the 'standard' default settings aren't always
the most appropriate to get best performance.

- inserting many rows [hundredth thousand or
   even millions] in the same table/layer is a
   really slow process.
   the reason accounting for such slowness is
   to be identified on too much frequent COMMITs,
   this causing a noticeable performance degradation.

   the -gt arg [group features per transaction]
   is set to a 200 value by default; simply setting
   an explicit -gt 1024 will actually ensure a
   performance boost of 3X
   and defining a bigger value, i.e. -gt 65536,
   can ensure a performance boost of 4X

   this performance-related issue isn't referenced at
   all in the current OGR documentation; may be adding
   a short note could be really useful for many users.


- usually SQLite adopts a very small internal page cache:
   the default setting is 2000 pages (this corresponding
   to only 20MB of RAM allocation).

   under many circumstances defining a bigger internal
   cache (e.g. 512MB, or even 1GB) helps a lot while
   heavily accessing some really huge DB-file.
   this is most notably true when a Spatial Index is
   involved.

   introducing a configuration option GML_SQLITE_CACHE_MB xx
   will allow users to flexibly configure an appropriate
   internal Page Cache.

Please, consider adopting the suggested patch.

bye Sandro
-------------- next part --------------
A non-text attachment was scrubbed...
Name: sqlite-cache.zip
Type: application/octet-stream
Size: 1899 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111211/94fc6d68/sqlite-cache.obj
From even.rouault at mines-paris.org  Sun Dec 11 10:33:58 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec 11 17:09:26 2011
Subject: [gdal-dev] SQLite/SpatiaLite slowness in OGR
In-Reply-To: <4EE4ACAF.3080008@lqt.it>
References: <4EE4ACAF.3080008@lqt.it>
Message-ID: <201112111633.58375.even.rouault@mines-paris.org>

Hi Sandro,

I'm OK with your patch. I guess that the name of the GML_SQLITE_CACHE_MB config 
option must come from your work with your previous GML patch, but I'd suggest 
to rename it to OGR_SQLITE_CACHE as it is more general. Are you OK with that ? 
I'll also add a note in ogr2ogr man page about the -gt option, moving part of 
your proposed doc in it.

By the way, you didn't react to my comments on your GML patch. Perhaps you are 
working on a revised patch ?

Best regards,

Even

> Hi,
> 
> I noticed that ogr2ogr is unnecessarily slow while
> accessing really huge SpatiaLite datasources;
> the 'standard' default settings aren't always
> the most appropriate to get best performance.
> 
> - inserting many rows [hundredth thousand or
>    even millions] in the same table/layer is a
>    really slow process.
>    the reason accounting for such slowness is
>    to be identified on too much frequent COMMITs,
>    this causing a noticeable performance degradation.
> 
>    the -gt arg [group features per transaction]
>    is set to a 200 value by default; simply setting
>    an explicit -gt 1024 will actually ensure a
>    performance boost of 3X
>    and defining a bigger value, i.e. -gt 65536,
>    can ensure a performance boost of 4X
> 
>    this performance-related issue isn't referenced at
>    all in the current OGR documentation; may be adding
>    a short note could be really useful for many users.
> 
> 
> - usually SQLite adopts a very small internal page cache:
>    the default setting is 2000 pages (this corresponding
>    to only 20MB of RAM allocation).
> 
>    under many circumstances defining a bigger internal
>    cache (e.g. 512MB, or even 1GB) helps a lot while
>    heavily accessing some really huge DB-file.
>    this is most notably true when a Spatial Index is
>    involved.
> 
>    introducing a configuration option GML_SQLITE_CACHE_MB xx
>    will allow users to flexibly configure an appropriate
>    internal Page Cache.
> 
> Please, consider adopting the suggested patch.
> 
> bye Sandro
From a.furieri at lqt.it  Sun Dec 11 11:09:06 2011
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Sun Dec 11 17:46:19 2011
Subject: [gdal-dev] SQLite/SpatiaLite slowness in OGR
In-Reply-To: <201112111633.58375.even.rouault@mines-paris.org>
References: <4EE4ACAF.3080008@lqt.it>
	<201112111633.58375.even.rouault@mines-paris.org>
Message-ID: <20111211160219.M66368@lqt.it>

On Sun, 11 Dec 2011 16:33:58 +0100, Even Rouault wrote
> Hi Sandro,
> 
> I'm OK with your patch. I guess that the name of the 
> GML_SQLITE_CACHE_MB config option must come from your work with your 
> previous GML patch, but I'd suggest to rename it to OGR_SQLITE_CACHE 
> as it is more general. Are you OK with that ? 

all right, that's fine for me

> I'll also add a note in ogr2ogr man page about the -gt option, 
> moving part of your proposed doc in it.
> 

really good

> By the way, you didn't react to my comments on your GML patch. 
> Perhaps you are working on a revised patch ?
> 

oh yes, you guessed this ;-)
I hope to be able to ship you a strongly revised
GML patch ASAP

just a quick preview: following your wise suggestions 
about extensively using CPLXMLNode as far as possible, 
I've introduced some further optimization and strongly
simplified the temporary SQL support.

and now a 3GB GML file ise succesfully  parsed in
about half an hour (50% less than before)

bye Sandro


From even.rouault at mines-paris.org  Sun Dec 11 12:15:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec 11 18:56:59 2011
Subject: [gdal-dev] SQLite/SpatiaLite slowness in OGR
In-Reply-To: <20111211160219.M66368@lqt.it>
References: <4EE4ACAF.3080008@lqt.it>
	<201112111633.58375.even.rouault@mines-paris.org>
	<20111211160219.M66368@lqt.it>
Message-ID: <201112111815.48897.even.rouault@mines-paris.org>

Le dimanche 11 d?cembre 2011 17:09:06, a.furieri@lqt.it a ?crit :
> On Sun, 11 Dec 2011 16:33:58 +0100, Even Rouault wrote
> 
> > Hi Sandro,
> > 
> > I'm OK with your patch. I guess that the name of the
> > GML_SQLITE_CACHE_MB config option must come from your work with your
> > previous GML patch, but I'd suggest to rename it to OGR_SQLITE_CACHE
> > as it is more general. Are you OK with that ?
> 
> all right, that's fine for me
> 
> > I'll also add a note in ogr2ogr man page about the -gt option,
> > moving part of your proposed doc in it.
> 
> really good

Commited in r23528 and in r23529.

> 
> > By the way, you didn't react to my comments on your GML patch.
> > Perhaps you are working on a revised patch ?
> 
> oh yes, you guessed this ;-)
> I hope to be able to ship you a strongly revised
> GML patch ASAP
> 
> just a quick preview: following your wise suggestions
> about extensively using CPLXMLNode as far as possible,
> I've introduced some further optimization and strongly
> simplified the temporary SQL support.
> 
> and now a 3GB GML file ise succesfully  parsed in
> about half an hour (50% less than before)

Great !

> 
> bye Sandro
From xiaodong.zhang2 at und.edu  Sun Dec 11 17:22:51 2011
From: xiaodong.zhang2 at und.edu (Xiaodong Zhang)
Date: Mon Dec 12 01:13:49 2011
Subject: [gdal-dev] image operation over areas defined by a shapefile
Message-ID: <4EE52D3B.1080805@und.edu>

Hi Gdal experts,

First of all, happy holiday to all of you. Gdal-dev is really a 
wonderful learning platform (at least for me).

I'm wondering if someone has done something like this and would like to 
share the experience. Say, I have an image, e.g. NDVI, and a shapefile 
define one or more areas (polygons) with the image. How to calculate the 
statistics for each area, for example, the mean value of NDVI within 
each polygon.

Thanks
Xiaodong

-- 
Xiaodong Zhang, Ph. D
Associate Professor
Earth System Science and Policy
University of North Dakota
Tel: (701) 777-6087
http://www.und.edu/instruct/zhang
http://www.und.edu/instruct/zhang

From perrygeo at gmail.com  Mon Dec 12 01:48:47 2011
From: perrygeo at gmail.com (Matt Perry)
Date: Mon Dec 12 09:14:43 2011
Subject: [gdal-dev] image operation over areas defined by a shapefile
In-Reply-To: <4EE52D3B.1080805@und.edu>
References: <4EE52D3B.1080805@und.edu>
Message-ID: <CAG-GLBPz08hCuQrOeYgSz5eXgdag56zdVXKW9H8rxDeHs+kt8w@mail.gmail.com>

Hi Xiaodong,

On Sun, Dec 11, 2011 at 2:22 PM, Xiaodong Zhang <xiaodong.zhang2@und.edu> wrote:
> I'm wondering if someone has done something like this and would like to
> share the experience. Say, I have an image, e.g. NDVI, and a shapefile
> define one or more areas (polygons) with the image. How to calculate the
> statistics for each area, for example, the mean value of NDVI within each
> polygon.

You'll see this operation referred to as "zonal statistics". GDAL has
no utilities to do this directly but there are several open source
implementations that do:

- QGIS has a "Zonal Statistics" plugin
- GRASS has this capability in the r.statistics module
- R has a zonal() function
- starspan is a GDAL-based application specifically for zonal stats.

Any of the above might suite your needs depending on your desired
workflow and programming environment.

Good luck,
-- 
???`?.?. , . .???`?.. ><((((?>`?.??.???`?.?.???`?...?><((((?>
"The best way to predict the future is to invent it."? -- Alan Kay
Matthew T. Perry
http://www.perrygeo.net
http://viedevelo.wordpress.com
From a.furieri at lqt.it  Mon Dec 12 06:18:16 2011
From: a.furieri at lqt.it (Alessandro Furieri)
Date: Mon Dec 12 13:58:59 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files (1)
In-Reply-To: <1323184249.4ede3079e1a55@webmail.free.fr>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
Message-ID: <4EE5E2F8.9000308@lqt.it>

Hi Even,

we have many points to be discussed; so for the
sake of clarity I'll split my reply in two distinct
parts:
- code changes (the patch itself)
- interesting but hard to be implemented suggestions
   and other minor detail facets.
this one is my reply about the patch main core.


 > * #include "sqlite3.h" in ogr/ogrsf_frmts/gml/gmlreaderp.h
 > is not appropriate in that file, and should be only found
 > in hugefileresolver.cpp. SQLite is a very common dependency
 > in most GDAL/OGR builds, but not a compulsory one.
 > So some adjustments will be needed in the GNUmakefile/makefile.vc
 > to detect if sqlite dependency is really available before
 > trying to build hugefileresolver.cpp and calling it from
 > ogrgmldatasource.cpp
 >

all right: I've implemented your suggestion.
now you can built OGR even when libsqlite isn't available
at all; and in this case a "fake" implementation for few
methods will simply report an error (missing SQLite support)

I hope to have fixed both GNUmakefile and makefile.vc;
anyway a careful check from you surely is welcome.


 > * GML_GFS_TEMPLATE config option is general purpose, and could
 > be made also available even when xlink:href resolving is not asked.
 >

nice: the HUGE resolver internally managed the TEMPLATE related stuff.
now I've added two further classes [GFSTemplateList and GFSTempalteItem]
and a new method [PrescanForTemplate] allowing to make TEMPLATE usage
available even when the HUGE resolver isn't actually invoked.


 > * I feel you could completely remove the GML_HUGE_SQLITE_UNSAFE
 > config option, and decide it to be TRUE. I don't see any reason
 > why one would want to have recovery guarantees for a temporary file.
 > If the process is interrupted, I suppose that the full resolving
 > must be starting again and the temp file will be recreated : correct ?
 >

absolutely correct: I've completely removed GML_HUGE_SQLITE_UNSAFE;
now this one is unconditionally the default implementation.


 > * Same for GML_HUGE_TEMPFILE. Why would one want to keep the
 > temporary sqlite DB ? Or perhaps keep it undocumented for just
 > debugging purposes, and make it default to YES.
 >

now GML_HUGE_TEMPFILE simply is an undocumented debug option;
and the default setting is YES


 > * A bit correlated with the above : the use of int* pbOutIsTempFile
 > in hugeFileResolver() is confusing, because (contrary to the
 > resolvexlinks.cpp case) it is not used as an output parameter, but
 > as an input one
 >

all right, I've corrected this.


 > * In hugefileresolver.cpp, I think that the hand-parsing of XML is
 > unnecessary in gmlHugeFileCheckXrefs(). The only caller of
 > gmlHugeFileCheckXrefs() does a gmlText = 
CPLSerializeXMLTree((CPLXMLNode *)pszNode)
 > just before. Why not just exploring the nodes through the CPLXMLNode
 > objects ? This would be much cleaner and robust (in case the XML
 > serialization changes a bit), and likely a bit faster too.
 >

accepted: I've completely refactored my code attempting to use
as far as possible CPLXMLNode and its methods.
and effectively now the code is strongly simplified and better
arranged (and I hope too, much more robust and stable).

As an interesting side effect, this deep code refactoring
caused many further simplifications and optimizations to
be applied at SQL level; and the 'final' implementation
is about 50% faster than the previous one.


 > * There might be security issues due to the use of char XXX[1024].
 > I see quite a few strcpy() with no size checking. I'd suggest using
 > CPLStrlcpy().
 >

even better than this: I've carefully removed any fixed-size
buffer, using CPLString objects instead.


 > * A few naming inconsistencies. The z in papszGeomList =
 > poFeature->GetGeometryList()  should be removed because no
 > strings are used. Same for pszNode = papszGeomList[i].
 >

really sorry for this :-D
just a short consideration: I'm not at all a fan of the so-called
Hungarian naming convention (sincerely, I hate it).
AFAIK this is widely used on Microsoft own code, and GDAL/OGR is
the first open source project I've ever seen extensively using
Hungarian.
Please, be patient and tolerant about this ... I've surely
put many 'wrong' names here and there, simply because I'm
completely not accustomed to used such coding style. ;-)


 > * At line 1793 of hugefileresolver.cpp, VSIFPrintfL ( fp,
 > " <%s>\%s</%s>\n", --> the \ before %s looks wrong.
 >

sorry for this typo: many thanks to you for noticing it


 > And I see no use of XML escaping for the value of the attribute
 > (use CPLEscapeString())
 >

nice suggestion: accepted

---
Please see the attached zipfile containing the latest
version of the proposed patch

bye Sandro
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gml-huge-patch-2.zip
Type: application/octet-stream
Size: 18127 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111212/58bf0e88/gml-huge-patch-2-0001.obj
From a.furieri at lqt.it  Mon Dec 12 06:20:15 2011
From: a.furieri at lqt.it (Alessandro Furieri)
Date: Mon Dec 12 14:01:03 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files (2)
In-Reply-To: <1323184249.4ede3079e1a55@webmail.free.fr>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
Message-ID: <4EE5E36F.3030408@lqt.it>

take #2: now I'll reply to few interesting but hard to
be implemented suggestions and other minor detail
facets.


 > * Did you consider just using the OGR API to abstract
 > the access to the temporary database, instead of directly
 > using sqlite API ? This would allow to use other DB backends,
 > such as postgresql for example. Not a strong objection however
 > to justify reworking your patch. (A nice side-effect of it
 > would be that there would make build integration easy)
 >

surely a nice and smart design choice from a general
architecture point of view.
anyway, I can easily foresee many practical issues:
a) SQLite isn't client-server: and a whole DB simply
    is a trivial file. this allows to handle a temp-DB
    exactly as if it was a plain ordinary temp-file.
b) any other DBMS is client-server: this requires to
    define a rather complex connection string (several
    further arguments to be passed to ogr2ogr)
c) using a temp-DB allows to ignore at all any concern
    about already existing tables [for sure, the temp-DB
    just created is empty].
    the same cannot be safely assumed on other DBMS; and
    this easily means many further code functions to be
    implemented.
    it obviously depends on the actual DBMS target, but
    as a general case we'll surely consider to use some
    purposely set SCHEMA: and this will add some further
    complexity.
d) all this considered, directly using the SQLite own API
    surely is much more simple and easy (and probably, much
    more efficient: SQLite, when carefully optimized, is
    damnely fast)


 > * I'm wondering if the HUGE resolver could be automatically
 > selected if the GML file is bigger than a threshold ( 100 MB ? )
 > (and if sqlite is available of course).
 >

interesting enough: for now I suppose that supporting an
explicit algorithm selection surely is useful for testing
and debugging purposes.
anyway, adopting a heuristic size threshold is a nice idea
to be considered in the future;.and implementing this seems
quite easy and painless.


 > The naming GML_SKIP_RESOLVE_ELEMS=HUGE sounds a bit awckward to
 > select a resolving algorithm and not very consistant with the current
 > allowed values (ALL / NONE / commma separated values), but I also
 > find the current logic a bit twisted too (GML_SKIP_RESOLVE_ELEMS=NONE
 > means resolving all elements...).
 >

don't tell me :-D
defining GML_SKIP_RESOLVE_ELEMS=NONE to activate the resolver
is absolutely counter-intuitive.
Honestly, I've introduced GML_SKIP_RESOLVE_ELEMS=HUGE simply
because I'm a very lazy people, no other reason than this ;-)
I completely agree with you; any different name for these
GML-related args surely will be better and clearer than the
currently implemented ones.


 > * I see special cases for GML topology geometries in your code.
 > Do you have small GML samples that illustrate that and could be
 > used for regression testing ?
 >

surely yes: I've asked Andrea Peri (Tuscany Region).
He can supply several test samples in the next days


 > Please open a ticket on GDAL Trac. You mentionned the limitations
 > of the XSD parser. That could be an interesting area for improvements...
 > Downloading XSD via URLs or supporting <xs:include> doesn't look the
 > more difficult part. The real challenge is dealing with complex schema
 > (complex being everything that doesn't fit into the Simple Feature Model
 > of "flat" attributes).
 >

see above: I've asked Andrea Peri to cooperate; he's the
XSD guru, not me ;-)
we'll surely come again about this topic on the next days
(once we'll complete the internal testing stage)

bye Sandro



From even.rouault at mines-paris.org  Mon Dec 12 12:15:07 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec 12 20:15:45 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files (1)
In-Reply-To: <4EE5E2F8.9000308@lqt.it>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
Message-ID: <201112121815.07228.even.rouault@mines-paris.org>

> ---
> Please see the attached zipfile containing the latest
> version of the proposed patch

Integrated in svn with a few changes. See 
http://trac.osgeo.org/gdal/ticket/4380#comment:1 for the details. Please test 
that I haven't caused regressions.

> 
> bye Sandro
From sigfrido at tiscali.it  Mon Dec 12 12:55:04 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Mon Dec 12 20:57:46 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <201112121815.07228.even.rouault@mines-paris.org>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
Message-ID: <1323712504.2209.105.camel@GOLEM>

Hi All,

I'm using ogr2ogr to load a shapefile into an already existing empty
PostGIS table, which has a primary key constraint on an integer column.

All the row in the shapefile contain valid unique values for the PK
column, but when loading the shape with 

ogr2ogr -append -update -a_srs EPSG:3003 -f 'PostgreSQL' "PG:host=$HOST
dbname=$DATABASE user=$USER active_schema=$SCHEMA"
"$PATH_IN_SHP/$SHP_FERMATE" -nlt Polygon  -nln t_cmi_fermate

I get the following error:

ERROR 1: INSERT command for new feature failed.
ERROR:  null value in column "id_fermata" violates not-null constraint

I also tried the --config PG_USE_COPY YES, and I get:
ERROR 1: COPY statement failed.

I figured out that when ogr2ogr/PG finds a primary key, it assumes that
it is an autoinc or serial column and does not provide the values from
the source dataset for the INSERT or COPY instruction.

If i drop the PK constraint from PostGIS, and reissue the ogr2ogr
command, the shape gets loaded with no errors. So a temporary workaround
is to drop the PK constraint, load data and re-create the constraint.

Is this the expected behaviour?

I must add that I did the same on a SQLite/Spatialite DB, and data got
loaded without raising this error.

Thank you for your attention

Sig



_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From chaitanya.ch at gmail.com  Mon Dec 12 13:42:15 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Dec 12 21:47:33 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <1323712504.2209.105.camel@GOLEM>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<1323712504.2209.105.camel@GOLEM>
Message-ID: <CAMKgpOaq8TfhS3vjZTS+EGBAqCm75_jmDQQ0nGjnp0C6sUKD3A@mail.gmail.com>

Sig,

Can you check if the fid column names match?

On Mon, Dec 12, 2011 at 11:25 PM, Luca Sigfrido Percich <sigfrido@tiscali.it
> wrote:

> Hi All,
>
> I'm using ogr2ogr to load a shapefile into an already existing empty
> PostGIS table, which has a primary key constraint on an integer column.
>
> All the row in the shapefile contain valid unique values for the PK
> column, but when loading the shape with
>
> ogr2ogr -append -update -a_srs EPSG:3003 -f 'PostgreSQL' "PG:host=$HOST
> dbname=$DATABASE user=$USER active_schema=$SCHEMA"
> "$PATH_IN_SHP/$SHP_FERMATE" -nlt Polygon  -nln t_cmi_fermate
>
> I get the following error:
>
> ERROR 1: INSERT command for new feature failed.
> ERROR:  null value in column "id_fermata" violates not-null constraint
>
> I also tried the --config PG_USE_COPY YES, and I get:
> ERROR 1: COPY statement failed.
>
> I figured out that when ogr2ogr/PG finds a primary key, it assumes that
> it is an autoinc or serial column and does not provide the values from
> the source dataset for the INSERT or COPY instruction.
>
> If i drop the PK constraint from PostGIS, and reissue the ogr2ogr
> command, the shape gets loaded with no errors. So a temporary workaround
> is to drop the PK constraint, load data and re-create the constraint.
>
> Is this the expected behaviour?
>
> I must add that I did the same on a SQLite/Spatialite DB, and data got
> loaded without raising this error.
>
> Thank you for your attention
>
> Sig
>
>
>
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e
> confidenziali. Il loro utilizzo e' consentito esclusivamente al
> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
> legislazione europea (Direttiva 2002/58/CE).
>
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e
> confidenziali. Il loro utilizzo e' consentito esclusivamente al
> destinatario del messaggio, per le finalit? indicate nel messaggio stesso.
> Qualora Lei non fosse la persona a cui il presente messaggio ? destinato,
> La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o
> stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente.
> Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
> legislazione europea (Direttiva 2002/58/CE).
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/9ddf151a/attachment.html
From sigfrido at tiscali.it  Mon Dec 12 17:13:00 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Tue Dec 13 01:36:19 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <CAMKgpOaq8TfhS3vjZTS+EGBAqCm75_jmDQQ0nGjnp0C6sUKD3A@mail.gmail.com>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr> <4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<1323712504.2209.105.camel@GOLEM>
	<CAMKgpOaq8TfhS3vjZTS+EGBAqCm75_jmDQQ0nGjnp0C6sUKD3A@mail.gmail.com>
Message-ID: <1323727980.2231.32.camel@GOLEM>


Hi Chaitanya,

I've made several tests, here are the results (the shapefile has a
id_arco integer field which is the true primary key):

1. ogr2ogr -overwrite (re)creates the table and adds a
  ogc_fid serial NOT NULL primary key
and the original PK field ("id_arco") is being correctly populated

2. ogr2ogr -overwrite --config PGSQL_OGR_FID id_arco
has no effect, ogc_fid is still being created along with id_arco

3. on existing PG table with id_arco integer primary key,
ogr2ogr -append -update 

with or without --config PGSQL_OGR_FID id_arco
gives again the error:

ERROR 1: INSERT command for new feature failed.
ERROR:  null value in column "id_arco" violates not-null constraint

Command: INSERT INTO "t_cmi_archi" ("geom" , "id_fermata", "id_ferma0")
VALUES (

As you can see, the column "id_arco" does not appear in the insert.

4. on existing PG table, with an additional column
fake_id serial primary key
ogr2ogr -append -update works, and the original PK field ("id_arco") is
being correctly populated

It is clear that the PostGIS driver automatically adds a OGC_FID serial
primary key when (re)creating the layer, but can only work with already
existing tables/primary keys if the PK values are generated by the
server.

Moreover it is not clear how and if the configuration option
PGSQL_OGR_FID works.

Many thanks,

Sig


Il giorno mar, 13/12/2011 alle 00.12 +0530, Chaitanya kumar CH ha
scritto:
> Sig,
> 
> Can you check if the fid column names match?
> 
> On Mon, Dec 12, 2011 at 11:25 PM, Luca Sigfrido Percich
> <sigfrido@tiscali.it> wrote:
>         Hi All,
>         
>         I'm using ogr2ogr to load a shapefile into an already existing
>         empty
>         PostGIS table, which has a primary key constraint on an
>         integer column.
>         
>         All the row in the shapefile contain valid unique values for
>         the PK
>         column, but when loading the shape with
>         
>         ogr2ogr -append -update -a_srs EPSG:3003 -f 'PostgreSQL'
>         "PG:host=$HOST
>         dbname=$DATABASE user=$USER active_schema=$SCHEMA"
>         "$PATH_IN_SHP/$SHP_FERMATE" -nlt Polygon  -nln t_cmi_fermate
>         
>         I get the following error:
>         
>         ERROR 1: INSERT command for new feature failed.
>         ERROR:  null value in column "id_fermata" violates not-null
>         constraint
>         
>         I also tried the --config PG_USE_COPY YES, and I get:
>         ERROR 1: COPY statement failed.
>         
>         I figured out that when ogr2ogr/PG finds a primary key, it
>         assumes that
>         it is an autoinc or serial column and does not provide the
>         values from
>         the source dataset for the INSERT or COPY instruction.
>         
>         If i drop the PK constraint from PostGIS, and reissue the
>         ogr2ogr
>         command, the shape gets loaded with no errors. So a temporary
>         workaround
>         is to drop the PK constraint, load data and re-create the
>         constraint.
>         
>         Is this the expected behaviour?
>         
>         I must add that I did the same on a SQLite/Spatialite DB, and
>         data got
>         loaded without raising this error.
>         
>         Thank you for your attention
>         
>         Sig
>         
>         
>         
>         _____________
>         PRIVACY
>         Le informazioni contenute in questo messaggio sono riservate e
>         confidenziali. Il loro utilizzo e' consentito esclusivamente
>         al destinatario del messaggio, per le finalit? indicate nel
>         messaggio stesso. Qualora Lei non fosse la persona a cui il
>         presente messaggio ? destinato, La invitiamo ad eliminarlo dal
>         Suo Sistema e a distruggere le varie copie o stampe, dandone
>         gentilmente comunicazione all?indirizzo mail del mittente.
>         Ogni utilizzo improprio e' contrario ai principi del D.lgs
>         196/03 e alla legislazione europea (Direttiva 2002/58/CE).
>         
>         PRIVACY
>         Le informazioni contenute in questo messaggio sono riservate e
>         confidenziali. Il loro utilizzo e' consentito esclusivamente
>         al destinatario del messaggio, per le finalit? indicate nel
>         messaggio stesso. Qualora Lei non fosse la persona a cui il
>         presente messaggio ? destinato, La invitiamo ad eliminarlo dal
>         Suo Sistema e a distruggere le varie copie o stampe, dandone
>         gentilmente comunicazione all?indirizzo mail del mittente.
>         Ogni utilizzo improprio e' contrario ai principi del D.lgs
>         196/03 e alla legislazione europea (Direttiva 2002/58/CE).
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E

From chaitanya.ch at gmail.com  Mon Dec 12 23:36:00 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Dec 13 08:14:27 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <1323727980.2231.32.camel@GOLEM>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<1323712504.2209.105.camel@GOLEM>
	<CAMKgpOaq8TfhS3vjZTS+EGBAqCm75_jmDQQ0nGjnp0C6sUKD3A@mail.gmail.com>
	<1323727980.2231.32.camel@GOLEM>
Message-ID: <CAMKgpOb2ZNUUyQipLZpJ5QccL6h3LEt=59L0OBng-Z0t8ukx0w@mail.gmail.com>

Sig,

The configuration option PGSQL_OGR_FID is only used for reading a postgis
table. Use the creation option FID to specify the FID column to create.
Also check that the primary key column in the postgis table is of type
serial and not just integer.

On Tue, Dec 13, 2011 at 3:43 AM, Luca Sigfrido Percich
<sigfrido@tiscali.it>wrote:

>
> Hi Chaitanya,
>
> I've made several tests, here are the results (the shapefile has a
> id_arco integer field which is the true primary key):
>
> 1. ogr2ogr -overwrite (re)creates the table and adds a
>  ogc_fid serial NOT NULL primary key
> and the original PK field ("id_arco") is being correctly populated
>
> 2. ogr2ogr -overwrite --config PGSQL_OGR_FID id_arco
> has no effect, ogc_fid is still being created along with id_arco
>
> 3. on existing PG table with id_arco integer primary key,
> ogr2ogr -append -update
>
> with or without --config PGSQL_OGR_FID id_arco
> gives again the error:
>
> ERROR 1: INSERT command for new feature failed.
> ERROR:  null value in column "id_arco" violates not-null constraint
>
> Command: INSERT INTO "t_cmi_archi" ("geom" , "id_fermata", "id_ferma0")
> VALUES (
>
> As you can see, the column "id_arco" does not appear in the insert.
>
> 4. on existing PG table, with an additional column
> fake_id serial primary key
> ogr2ogr -append -update works, and the original PK field ("id_arco") is
> being correctly populated
>
> It is clear that the PostGIS driver automatically adds a OGC_FID serial
> primary key when (re)creating the layer, but can only work with already
> existing tables/primary keys if the PK values are generated by the
> server.
>
> Moreover it is not clear how and if the configuration option
> PGSQL_OGR_FID works.
>
> Many thanks,
>
> Sig
>
>
> Il giorno mar, 13/12/2011 alle 00.12 +0530, Chaitanya kumar CH ha
> scritto:
> > Sig,
> >
> > Can you check if the fid column names match?
> >
> > On Mon, Dec 12, 2011 at 11:25 PM, Luca Sigfrido Percich
> > <sigfrido@tiscali.it> wrote:
> >         Hi All,
> >
> >         I'm using ogr2ogr to load a shapefile into an already existing
> >         empty
> >         PostGIS table, which has a primary key constraint on an
> >         integer column.
> >
> >         All the row in the shapefile contain valid unique values for
> >         the PK
> >         column, but when loading the shape with
> >
> >         ogr2ogr -append -update -a_srs EPSG:3003 -f 'PostgreSQL'
> >         "PG:host=$HOST
> >         dbname=$DATABASE user=$USER active_schema=$SCHEMA"
> >         "$PATH_IN_SHP/$SHP_FERMATE" -nlt Polygon  -nln t_cmi_fermate
> >
> >         I get the following error:
> >
> >         ERROR 1: INSERT command for new feature failed.
> >         ERROR:  null value in column "id_fermata" violates not-null
> >         constraint
> >
> >         I also tried the --config PG_USE_COPY YES, and I get:
> >         ERROR 1: COPY statement failed.
> >
> >         I figured out that when ogr2ogr/PG finds a primary key, it
> >         assumes that
> >         it is an autoinc or serial column and does not provide the
> >         values from
> >         the source dataset for the INSERT or COPY instruction.
> >
> >         If i drop the PK constraint from PostGIS, and reissue the
> >         ogr2ogr
> >         command, the shape gets loaded with no errors. So a temporary
> >         workaround
> >         is to drop the PK constraint, load data and re-create the
> >         constraint.
> >
> >         Is this the expected behaviour?
> >
> >         I must add that I did the same on a SQLite/Spatialite DB, and
> >         data got
> >         loaded without raising this error.
> >
> >         Thank you for your attention
> >
> >         Sig
> >
> >
> >
> >         _____________
> >         PRIVACY
> >         Le informazioni contenute in questo messaggio sono riservate e
> >         confidenziali. Il loro utilizzo e' consentito esclusivamente
> >         al destinatario del messaggio, per le finalit? indicate nel
> >         messaggio stesso. Qualora Lei non fosse la persona a cui il
> >         presente messaggio ? destinato, La invitiamo ad eliminarlo dal
> >         Suo Sistema e a distruggere le varie copie o stampe, dandone
> >         gentilmente comunicazione all?indirizzo mail del mittente.
> >         Ogni utilizzo improprio e' contrario ai principi del D.lgs
> >         196/03 e alla legislazione europea (Direttiva 2002/58/CE).
> >
> >         PRIVACY
> >         Le informazioni contenute in questo messaggio sono riservate e
> >         confidenziali. Il loro utilizzo e' consentito esclusivamente
> >         al destinatario del messaggio, per le finalit? indicate nel
> >         messaggio stesso. Qualora Lei non fosse la persona a cui il
> >         presente messaggio ? destinato, La invitiamo ad eliminarlo dal
> >         Suo Sistema e a distruggere le varie copie o stampe, dandone
> >         gentilmente comunicazione all?indirizzo mail del mittente.
> >         Ogni utilizzo improprio e' contrario ai principi del D.lgs
> >         196/03 e alla legislazione europea (Direttiva 2002/58/CE).
> >         _______________________________________________
> >         gdal-dev mailing list
> >         gdal-dev@lists.osgeo.org
> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/67abd75e/attachment-0001.html
From manoj.bist1 at gmail.com  Tue Dec 13 01:32:25 2011
From: manoj.bist1 at gmail.com (Manoj Bist)
Date: Tue Dec 13 10:17:33 2011
Subject: [gdal-dev] ogr2ogr -append problem with 1.8.x, works with 1.7.2
Message-ID: <CAGC+Sx6K89t8pJC8+rj_HhkBUUDtVwyUqtumYaEu0kLYiEKi+g@mail.gmail.com>

I need help in figuring out why ogr2ogr is failing to import data into the
same layer in append mode.
I am trying to import in PostGres S57 ENCs by using ogr2ogr.  Following
commands failed for me in version 1.8.1 and 1.8.0.
I have an old ubuntu machine which has gdal version 1.7.2, the command
succeeds there for importing all ENCs.

$ogr2ogr -append -update -f  "PostgreSQL" PG:dbname=marine
ENC_ROOT/US4AK26M/US4AK26M.000
ERROR 1: Layer dsid already exists, CreateLayer failed.
Use the layer creation option OVERWRITE=YES to replace it.
ERROR 1: Terminating translation prematurely after failed
translation of layer DSID (use -skipfailures to skip errors)


Thanks,
MB
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111212/90e78ec3/attachment.html
From a.furieri at lqt.it  Tue Dec 13 04:51:38 2011
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Tue Dec 13 13:48:17 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files (1)
In-Reply-To: <201112121815.07228.even.rouault@mines-paris.org>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
Message-ID: <20111213095032.M75537@lqt.it>

On Mon, 12 Dec 2011 18:15:07 +0100, Even Rouault wrote
> > ---
> > Please see the attached zipfile containing the latest
> > version of the proposed patch
> 
> Integrated in svn with a few changes. See 
> http://trac.osgeo.org/gdal/ticket/4380#comment:1 for the details. 
> Please test that I haven't caused regressions.
> 

Hi Even,

thanks a lot for committing my proposed patch
into the SVN.

I've found a single regression; please see the 
attached gml-regression.diff file.

Comment:
========
pChild->pItem->gmlText does actually contain a very
complex GML fragment (complete Edge definition), 
looking more or less like this:
---------------------------------------
<Edge gml:id="Edge_35_110631">
  <directedNode orientation="-">
    <Node gml:id="Node_1_12918040" />
  </directedNode>
  <directedNode>
    <Node gml:id="Node_1_12918079" />
  </directedNode>
  <curveProperty>
    <LineString srsName="urn:ogc:def:crs:EPSG:3003">
      <posList srsDimension="2">
        1656238.08 4694143.96 1656260.36 4694138.56
      </posList>
    </LineString>
  </curveProperty>
</Edge>
---------------------------------------

Using CPLCreateXMLNode(psNewNode, CXT_Text, ...)
is not at all appropriate in this case, because this 
isn't GML TEXT, it's a complex GML fragment representing
a full tree of GML nodes (many different types).

Attempting to add a single GML TEXT node will simply
cause heavy GML corruption, because any "<" will
be masked as "&lt;" and so on ...

by Sandro
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gml-regression.zip
Type: application/x-zip-compressed
Size: 436 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/cb189951/gml-regression.bin
From even.rouault at mines-paris.org  Tue Dec 13 05:40:01 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 13 14:39:18 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files (1)
In-Reply-To: <20111213095032.M75537@lqt.it>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<20111213095032.M75537@lqt.it>
Message-ID: <1323772801.4ee72b8135f76@imp.free.fr>

Selon a.furieri@lqt.it:

> On Mon, 12 Dec 2011 18:15:07 +0100, Even Rouault wrote
> > > ---
> > > Please see the attached zipfile containing the latest
> > > version of the proposed patch
> >
> > Integrated in svn with a few changes. See
> > http://trac.osgeo.org/gdal/ticket/4380#comment:1 for the details.
> > Please test that I haven't caused regressions.
> >
>
> Hi Even,
>
> thanks a lot for committing my proposed patch
> into the SVN.
>
> I've found a single regression; please see the
> attached gml-regression.diff file.
>
> Comment:
> ========
> pChild->pItem->gmlText does actually contain a very
> complex GML fragment (complete Edge definition),
> looking more or less like this:
> ---------------------------------------
> <Edge gml:id="Edge_35_110631">
>   <directedNode orientation="-">
>     <Node gml:id="Node_1_12918040" />
>   </directedNode>
>   <directedNode>
>     <Node gml:id="Node_1_12918079" />
>   </directedNode>
>   <curveProperty>
>     <LineString srsName="urn:ogc:def:crs:EPSG:3003">
>       <posList srsDimension="2">
>         1656238.08 4694143.96 1656260.36 4694138.56
>       </posList>
>     </LineString>
>   </curveProperty>
> </Edge>
> ---------------------------------------
>
> Using CPLCreateXMLNode(psNewNode, CXT_Text, ...)
> is not at all appropriate in this case, because this
> isn't GML TEXT, it's a complex GML fragment representing
> a full tree of GML nodes (many different types).
>
> Attempting to add a single GML TEXT node will simply
> cause heavy GML corruption, because any "<" will
> be masked as "&lt;" and so on ...

ok, applied in r23562. I thought it was indeed a single text content, not
complex GML content.

Having sample data to add regression will be needed.

What do you think about the xlink1.gml that I mention in the ticket ? Is it
valid to have xlink:href to other documents ?

>
> by Sandro
>




From sigfrido at tiscali.it  Tue Dec 13 06:43:30 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Tue Dec 13 15:46:15 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <CAMKgpOb2ZNUUyQipLZpJ5QccL6h3LEt=59L0OBng-Z0t8ukx0w@mail.gmail.com>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<1323712504.2209.105.camel@GOLEM>
	<CAMKgpOaq8TfhS3vjZTS+EGBAqCm75_jmDQQ0nGjnp0C6sUKD3A@mail.gmail.com>
	<1323727980.2231.32.camel@GOLEM>
	<CAMKgpOb2ZNUUyQipLZpJ5QccL6h3LEt=59L0OBng-Z0t8ukx0w@mail.gmail.com>
Message-ID: <1323776610.2181.49.camel@GOLEM>


Hi Chaitanya,

I understand, thank you. Those options are not relevant because I'm
appending to an existing PostGIS table.

Summing up: currently it is not possible to append rows to a PostGIS
table if this table has a primary key which is not incremented
server-side, because the values of the primary key column are not copied
from the source dataset into the postGIS PK column.
I tried also with the -sql option including the pk column, with no luck.

Is this the expected behaviour? IMHO all the (selected) columns from the
source dataset should be copied in to the destination, leaving to the
server the task of eventually complaining about duplicate or malformed
keys.

Moreover, this does not happen with SQLite, where all the columns get
copied regardless they are part of a PK constraint, so at least it's an
inconsistency. 

I will file a bug for this.

Thank you again

Sig

Il giorno mar, 13/12/2011 alle 10.06 +0530, Chaitanya kumar CH ha
scritto:
> Sig,
> 
> The configuration option PGSQL_OGR_FID is only used for reading a
> postgis table. Use the creation option FID to specify the FID column
> to create.
> Also check that the primary key column in the postgis table is of type
> serial and not just integer.


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From yjacolin at free.fr  Tue Dec 13 06:20:07 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Dec 13 16:01:28 2011
Subject: [gdal-dev] VRT file from NetCDF
Message-ID: <201112131220.07481.yjacolin@free.fr>

Hello, 

I am trying to create vrt files from netcdf files using only one subdataset. 
FYI, the second step will be to create a vrt file with two bandes linked to two 
subdataset.

I am using a first vrt file for begining created from a tif file as template. The 
vrt file using tif file is working correctly. The tiff file has been created by 
gdal_translate from the netcdf file.

If I try to open the vrt file linked to netcdf file in QGIS no data is dispaly, 
values are null for all the dataset. QGIS medatada says "no data value".

Any idea?

Thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From even.rouault at mines-paris.org  Tue Dec 13 07:01:24 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 13 16:04:59 2011
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <201112131220.07481.yjacolin@free.fr>
References: <201112131220.07481.yjacolin@free.fr>
Message-ID: <1323777684.4ee73e94b9862@webmail.free.fr>

Selon Yves Jacolin <yjacolin@free.fr>:

> Hello,
>
> I am trying to create vrt files from netcdf files using only one subdataset.
> FYI, the second step will be to create a vrt file with two bandes linked to
> two
> subdataset.
>
> I am using a first vrt file for begining created from a tif file as template.
> The
> vrt file using tif file is working correctly. The tiff file has been created
> by
> gdal_translate from the netcdf file.
>
> If I try to open the vrt file linked to netcdf file in QGIS no data is
> dispaly,
> values are null for all the dataset. QGIS medatada says "no data value".
>
> Any idea?

Yves,

did you try to create the VRT with "gdal_translate -of VRT netCDF:xxxxx
netcdf.vrt" and see if it shows up correctly in QGIS (it should...). ? Then you
can compare with the VRT you've created at hand.

Even
From yjacolin at free.fr  Tue Dec 13 07:05:41 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Dec 13 16:17:15 2011
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <1323777684.4ee73e94b9862@webmail.free.fr>
References: <201112131220.07481.yjacolin@free.fr>
	<1323777684.4ee73e94b9862@webmail.free.fr>
Message-ID: <201112131305.41769.yjacolin@free.fr>

Le mardi 13 d?cembre 2011 13:01:24, Even Rouault a ?crit :
> Selon Yves Jacolin <yjacolin@free.fr>:
> > Hello,
> > 
> > I am trying to create vrt files from netcdf files using only one
> > subdataset. FYI, the second step will be to create a vrt file with two
> > bandes linked to two
> > subdataset.
> > 
> > I am using a first vrt file for begining created from a tif file as
> > template. The
> > vrt file using tif file is working correctly. The tiff file has been
> > created by
> > gdal_translate from the netcdf file.
> > 
> > If I try to open the vrt file linked to netcdf file in QGIS no data is
> > dispaly,
> > values are null for all the dataset. QGIS medatada says "no data value".
> > 
> > Any idea?
> 
> Yves,
> 
> did you try to create the VRT with "gdal_translate -of VRT netCDF:xxxxx
> netcdf.vrt" and see if it shows up correctly in QGIS (it should...). ? Then
> you can compare with the VRT you've created at hand.
> 
Even,

Just a note: I did not really create the vrt file by hand as I used one made 
with gdalbuildvrt. I only changed "sourceFilename".

I tried the -separate flag and converted the vrt file in tiff. All is working as 
espected. However the vrt file is not readable correctly by QGIS. I just saw 
that QGIS was an old release (1.4 !) so I am going to upgrade it.

More soon :)

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From even.rouault at mines-paris.org  Tue Dec 13 07:18:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 13 16:22:35 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <1323776610.2181.49.camel@GOLEM>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<1323712504.2209.105.camel@GOLEM>
	<CAMKgpOaq8TfhS3vjZTS+EGBAqCm75_jmDQQ0nGjnp0C6sUKD3A@mail.gmail.com>
	<1323727980.2231.32.camel@GOLEM>
	<CAMKgpOb2ZNUUyQipLZpJ5QccL6h3LEt=59L0OBng-Z0t8ukx0w@mail.gmail.com>
	<1323776610.2181.49.camel@GOLEM>
Message-ID: <1323778686.4ee7427e26576@webmail.free.fr>

Selon Luca Sigfrido Percich <sigfrido@tiscali.it>:

>
> Hi Chaitanya,
>
> I understand, thank you. Those options are not relevant because I'm
> appending to an existing PostGIS table.
>
> Summing up: currently it is not possible to append rows to a PostGIS
> table if this table has a primary key which is not incremented
> server-side, because the values of the primary key column are not copied
> from the source dataset into the postGIS PK column.
> I tried also with the -sql option including the pk column, with no luck.

Yes, when the driver detects a PK column, it considers it as the FID column,
which is a particular column, different from the regular columns. So it will be
ommited in the INSERT statements, unless the feature to be inserted as a FID
value set. Which is not the case by default when using ogr2ogr.

I'd suggest you to try to add the -preserve_fid option to ogr2ogr.

>
> Is this the expected behaviour? IMHO all the (selected) columns from the
> source dataset should be copied in to the destination, leaving to the
> server the task of eventually complaining about duplicate or malformed
> keys.
>
> Moreover, this does not happen with SQLite, where all the columns get
> copied regardless they are part of a PK constraint, so at least it's an
> inconsistency.

Looking at the code (in trunk), it isn't obvious that the PG and SQLite driver
would behave differently, but I haven't actually tried, and if you are not using
trunk, it is possible that there have been changes that might have altered the
behaviour w.r.t older GDAL/OGR versions.

>
> I will file a bug for this.
>
> Thank you again
>
> Sig
>
> Il giorno mar, 13/12/2011 alle 10.06 +0530, Chaitanya kumar CH ha
> scritto:
> > Sig,
> >
> > The configuration option PGSQL_OGR_FID is only used for reading a
> > postgis table. Use the creation option FID to specify the FID column
> > to create.
> > Also check that the primary key column in the postgis table is of type
> > serial and not just integer.
>
>
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali.
> Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio,
> per le finalit?? indicate nel messaggio stesso. Qualora Lei non fosse la
> persona a cui il presente messaggio ?? destinato, La invitiamo ad eliminarlo
> dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente
> comunicazione all???indirizzo mail del mittente. Ogni utilizzo improprio e'
> contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva
> 2002/58/CE).
>
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e confidenziali.
> Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio,
> per le finalit?? indicate nel messaggio stesso. Qualora Lei non fosse la
> persona a cui il presente messaggio ?? destinato, La invitiamo ad eliminarlo
> dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente
> comunicazione all???indirizzo mail del mittente. Ogni utilizzo improprio e'
> contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva
> 2002/58/CE).
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From yjacolin at free.fr  Tue Dec 13 07:21:41 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Dec 13 16:28:08 2011
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <1323777684.4ee73e94b9862@webmail.free.fr>
References: <201112131220.07481.yjacolin@free.fr>
	<1323777684.4ee73e94b9862@webmail.free.fr>
Message-ID: <201112131321.41470.yjacolin@free.fr>

Le mardi 13 d?cembre 2011 13:01:24, Even Rouault a ?crit :
> Selon Yves Jacolin <yjacolin@free.fr>:
> > Hello,
> > 
> > I am trying to create vrt files from netcdf files using only one
> > subdataset. FYI, the second step will be to create a vrt file with two
> > bandes linked to two
> > subdataset.
> > 
> > I am using a first vrt file for begining created from a tif file as
> > template. The
> > vrt file using tif file is working correctly. The tiff file has been
> > created by
> > gdal_translate from the netcdf file.
> > 
> > If I try to open the vrt file linked to netcdf file in QGIS no data is
> > dispaly,
> > values are null for all the dataset. QGIS medatada says "no data value".
> > 
> > Any idea?
> 
> Yves,
> 
> did you try to create the VRT with "gdal_translate -of VRT netCDF:xxxxx
> netcdf.vrt" and see if it shows up correctly in QGIS (it should...). ? Then
> you can compare with the VRT you've created at hand.
> 
Even,

I tested and compared both files and they are similar (except that with 
gdal_translate I have Metadata tags). Both are not working in QGIS: no value 
in dataset! Translating into GTIFF is working but I want to keep vrt files to 
working on them with MapServer.

I can send you netcdf and vrt file if you want to test it.

Thanks,

Y.
-- 
Yves Jacolin

http://yjacolin.gloobe.org
From etourigny.dev at gmail.com  Tue Dec 13 07:33:53 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Dec 13 16:38:59 2011
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <201112131321.41470.yjacolin@free.fr>
References: <201112131220.07481.yjacolin@free.fr>
	<1323777684.4ee73e94b9862@webmail.free.fr>
	<201112131321.41470.yjacolin@free.fr>
Message-ID: <CA+TxYvPTh6cJgpDa8G6+FLZ__EiZXRCfHVv2cTCLz10CHPXB7A@mail.gmail.com>

Yves, just out of curiosity, which gdal version are you using?  You
might consider trying the dev version (1.9) as the netcdf driver has a
quite a few fixes.

Please also send me the netcdf and vrt file (or post them somewhere).

Etienne

On Tue, Dec 13, 2011 at 10:21 AM, Yves Jacolin <yjacolin@free.fr> wrote:
> Le mardi 13 d?cembre 2011 13:01:24, Even Rouault a ?crit :
>> Selon Yves Jacolin <yjacolin@free.fr>:
>> > Hello,
>> >
>> > I am trying to create vrt files from netcdf files using only one
>> > subdataset. FYI, the second step will be to create a vrt file with two
>> > bandes linked to two
>> > subdataset.
>> >
>> > I am using a first vrt file for begining created from a tif file as
>> > template. The
>> > vrt file using tif file is working correctly. The tiff file has been
>> > created by
>> > gdal_translate from the netcdf file.
>> >
>> > If I try to open the vrt file linked to netcdf file in QGIS no data is
>> > dispaly,
>> > values are null for all the dataset. QGIS medatada says "no data value".
>> >
>> > Any idea?
>>
>> Yves,
>>
>> did you try to create the VRT with "gdal_translate -of VRT netCDF:xxxxx
>> netcdf.vrt" and see if it shows up correctly in QGIS (it should...). ? Then
>> you can compare with the VRT you've created at hand.
>>
> Even,
>
> I tested and compared both files and they are similar (except that with
> gdal_translate I have Metadata tags). Both are not working in QGIS: no value
> in dataset! Translating into GTIFF is working but I want to keep vrt files to
> working on them with MapServer.
>
> I can send you netcdf and vrt file if you want to test it.
>
> Thanks,
>
> Y.
> --
> Yves Jacolin
>
> http://yjacolin.gloobe.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From sigfrido at tiscali.it  Tue Dec 13 07:53:07 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Tue Dec 13 16:59:46 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <1323778686.4ee7427e26576@webmail.free.fr>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<1323712504.2209.105.camel@GOLEM>
	<CAMKgpOaq8TfhS3vjZTS+EGBAqCm75_jmDQQ0nGjnp0C6sUKD3A@mail.gmail.com>
	<1323727980.2231.32.camel@GOLEM>
	<CAMKgpOb2ZNUUyQipLZpJ5QccL6h3LEt=59L0OBng-Z0t8ukx0w@mail.gmail.com>
	<1323776610.2181.49.camel@GOLEM>
	<1323778686.4ee7427e26576@webmail.free.fr>
Message-ID: <1323780787.4071.23.camel@GOLEM>


Even,

Il giorno mar, 13/12/2011 alle 13.18 +0100, Even Rouault ha scritto:
> Selon Luca Sigfrido Percich <sigfrido@tiscali.it>:

> Yes, when the driver detects a PK column, it considers it as the FID column,
> which is a particular column, different from the regular columns. So it will be
> ommited in the INSERT statements, unless the feature to be inserted as a FID
> value set. Which is not the case by default when using ogr2ogr.
> 
> I'd suggest you to try to add the -preserve_fid option to ogr2ogr.

thank you, I missed the -preserve_fid option which is listed at the
beginning of the documentation page in http://www.gdal.org/ogr2ogr.html,
but is not further documented, so please add the description to the
docpage.

With -preserve_fid the shapefile is being loaded with no errors; but the
values 0,1,2...n are inserted in the existing integer PK column: 0 in
the first row, 1 in the second and so on. So it seems that this option
ignores the PK values from the shapefile, too.

Following your explanation, I tried, to no avail, to tell OGR that my
column id is the FID, with
-sql "select id as FID, name, ogr_geometry from test_pk_data"
(tried also ogr_fid and ogc_fid aliases)

> Looking at the code (in trunk), it isn't obvious that the PG and SQLite driver
> would behave differently, but I haven't actually tried, and if you are not using
> trunk, it is possible that there have been changes that might have altered the
> behaviour w.r.t older GDAL/OGR versions.

Actually I'm compiling from trunk. I tested with a SQLite table with PK,
and the shapefile gets loaded with no complains.

I will send you a gz file with test shapefile and PG/SQLite SQL scripts.

I'm waiting your advice to file the bug.

Thanks again

Sig


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From yjacolin at free.fr  Tue Dec 13 09:37:24 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Dec 13 19:00:59 2011
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <CA+TxYvPTh6cJgpDa8G6+FLZ__EiZXRCfHVv2cTCLz10CHPXB7A@mail.gmail.com>
References: <201112131220.07481.yjacolin@free.fr>
	<201112131321.41470.yjacolin@free.fr>
	<CA+TxYvPTh6cJgpDa8G6+FLZ__EiZXRCfHVv2cTCLz10CHPXB7A@mail.gmail.com>
Message-ID: <201112131537.49460.yjacolin@free.fr>

Hello,

I have no enought time to find the reason of the issue but I think the problem 
come from QGIS which can't classify raster data correctly. Or I am wrong 
somewhere.

Anyway, I finally successfully worked on my NetCDF data using gdalbuildvrt and 
-separate flag.

Thanks again both of you,

Y.
Le mardi 13 d?cembre 2011 13:33:53, Etienne Tourigny a ?crit :
> Yves, just out of curiosity, which gdal version are you using?  You
> might consider trying the dev version (1.9) as the netcdf driver has a
> quite a few fixes.
> 
> Please also send me the netcdf and vrt file (or post them somewhere).
> 
> Etienne
> 
> On Tue, Dec 13, 2011 at 10:21 AM, Yves Jacolin <yjacolin@free.fr> wrote:
> > Le mardi 13 d?cembre 2011 13:01:24, Even Rouault a ?crit :
> >> Selon Yves Jacolin <yjacolin@free.fr>:
> >> > Hello,
> >> > 
> >> > I am trying to create vrt files from netcdf files using only one
> >> > subdataset. FYI, the second step will be to create a vrt file with two
> >> > bandes linked to two
> >> > subdataset.
> >> > 
> >> > I am using a first vrt file for begining created from a tif file as
> >> > template. The
> >> > vrt file using tif file is working correctly. The tiff file has been
> >> > created by
> >> > gdal_translate from the netcdf file.
> >> > 
> >> > If I try to open the vrt file linked to netcdf file in QGIS no data is
> >> > dispaly,
> >> > values are null for all the dataset. QGIS medatada says "no data
> >> > value".
> >> > 
> >> > Any idea?
> >> 
> >> Yves,
> >> 
> >> did you try to create the VRT with "gdal_translate -of VRT netCDF:xxxxx
> >> netcdf.vrt" and see if it shows up correctly in QGIS (it should...). ?
> >> Then you can compare with the VRT you've created at hand.
> > 
> > Even,
> > 
> > I tested and compared both files and they are similar (except that with
> > gdal_translate I have Metadata tags). Both are not working in QGIS: no
> > value in dataset! Translating into GTIFF is working but I want to keep
> > vrt files to working on them with MapServer.
> > 
> > I can send you netcdf and vrt file if you want to test it.
> > 
> > Thanks,
> > 
> > Y.
> > --
> > Yves Jacolin
> > 
> > http://yjacolin.gloobe.org
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin

http://yjacolin.gloobe.org
From yjacolin at free.fr  Tue Dec 13 10:22:21 2011
From: yjacolin at free.fr (Yves Jacolin)
Date: Tue Dec 13 19:48:25 2011
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <201112131537.49460.yjacolin@free.fr>
References: <201112131220.07481.yjacolin@free.fr>
	<CA+TxYvPTh6cJgpDa8G6+FLZ__EiZXRCfHVv2cTCLz10CHPXB7A@mail.gmail.com>
	<201112131537.49460.yjacolin@free.fr>
Message-ID: <201112131622.46743.yjacolin@free.fr>

Hello,

Etienne asked some question offlist so I investigate.

gdal create relatif path by default (I don't see a flag to change this). 
MapServer and QGIS don't like this.

After changing relatif path to absolute path both are working correctly.

Thanks,

Y.

Le mardi 13 d?cembre 2011 15:37:24, Yves Jacolin a ?crit :
> Hello,
> 
> I have no enought time to find the reason of the issue but I think the
> problem come from QGIS which can't classify raster data correctly. Or I am
> wrong somewhere.
> 
> Anyway, I finally successfully worked on my NetCDF data using gdalbuildvrt
> and -separate flag.
> 
> Thanks again both of you,
> 
> Y.
> 
> Le mardi 13 d?cembre 2011 13:33:53, Etienne Tourigny a ?crit :
> > Yves, just out of curiosity, which gdal version are you using?  You
> > might consider trying the dev version (1.9) as the netcdf driver has a
> > quite a few fixes.
> > 
> > Please also send me the netcdf and vrt file (or post them somewhere).
> > 
> > Etienne
> > 
> > On Tue, Dec 13, 2011 at 10:21 AM, Yves Jacolin <yjacolin@free.fr> wrote:
> > > Le mardi 13 d?cembre 2011 13:01:24, Even Rouault a ?crit :
> > >> Selon Yves Jacolin <yjacolin@free.fr>:
> > >> > Hello,
> > >> > 
> > >> > I am trying to create vrt files from netcdf files using only one
> > >> > subdataset. FYI, the second step will be to create a vrt file with
> > >> > two bandes linked to two
> > >> > subdataset.
> > >> > 
> > >> > I am using a first vrt file for begining created from a tif file as
> > >> > template. The
> > >> > vrt file using tif file is working correctly. The tiff file has been
> > >> > created by
> > >> > gdal_translate from the netcdf file.
> > >> > 
> > >> > If I try to open the vrt file linked to netcdf file in QGIS no data
> > >> > is dispaly,
> > >> > values are null for all the dataset. QGIS medatada says "no data
> > >> > value".
> > >> > 
> > >> > Any idea?
> > >> 
> > >> Yves,
> > >> 
> > >> did you try to create the VRT with "gdal_translate -of VRT
> > >> netCDF:xxxxx netcdf.vrt" and see if it shows up correctly in QGIS (it
> > >> should...). ? Then you can compare with the VRT you've created at
> > >> hand.
> > > 
> > > Even,
> > > 
> > > I tested and compared both files and they are similar (except that with
> > > gdal_translate I have Metadata tags). Both are not working in QGIS: no
> > > value in dataset! Translating into GTIFF is working but I want to keep
> > > vrt files to working on them with MapServer.
> > > 
> > > I can send you netcdf and vrt file if you want to test it.
> > > 
> > > Thanks,
> > > 
> > > Y.
> > > --
> > > Yves Jacolin
> > > 
> > > http://yjacolin.gloobe.org
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin

http://yjacolin.gloobe.org
From even.rouault at mines-paris.org  Tue Dec 13 10:57:26 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 13 20:14:15 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <1323780787.4071.23.camel@GOLEM>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<1323712504.2209.105.camel@GOLEM>
	<CAMKgpOaq8TfhS3vjZTS+EGBAqCm75_jmDQQ0nGjnp0C6sUKD3A@mail.gmail.com>
	<1323727980.2231.32.camel@GOLEM>
	<CAMKgpOb2ZNUUyQipLZpJ5QccL6h3LEt=59L0OBng-Z0t8ukx0w@mail.gmail.com>
	<1323776610.2181.49.camel@GOLEM>
	<1323778686.4ee7427e26576@webmail.free.fr>
	<1323780787.4071.23.camel@GOLEM>
Message-ID: <1323791846.4ee775e69abcd@webmail.free.fr>

Selon Luca Sigfrido Percich <sigfrido@tiscali.it>:

>
> Even,
>
> Il giorno mar, 13/12/2011 alle 13.18 +0100, Even Rouault ha scritto:
> > Selon Luca Sigfrido Percich <sigfrido@tiscali.it>:
>
> > Yes, when the driver detects a PK column, it considers it as the FID
> column,
> > which is a particular column, different from the regular columns. So it
> will be
> > ommited in the INSERT statements, unless the feature to be inserted as a
> FID
> > value set. Which is not the case by default when using ogr2ogr.
> >
> > I'd suggest you to try to add the -preserve_fid option to ogr2ogr.
>
> thank you, I missed the -preserve_fid option which is listed at the
> beginning of the documentation page in http://www.gdal.org/ogr2ogr.html,
> but is not further documented, so please add the description to the
> docpage.
>
> With -preserve_fid the shapefile is being loaded with no errors; but the
> values 0,1,2...n are inserted in the existing integer PK column: 0 in
> the first row, 1 in the second and so on. So it seems that this option
> ignores the PK values from the shapefile, too.

It will use as FID the value reported by ogrinfo on the shapefile :

OGRFeature(xxx):FID
  FIELD1 (type) = value

This is in fact the record number in the shapefile, and not a value of a
particular column in the DBF.

>
> Following your explanation, I tried, to no avail, to tell OGR that my
> column id is the FID, with
> -sql "select id as FID, name, ogr_geometry from test_pk_data"
> (tried also ogr_fid and ogc_fid aliases)

No, it is useless to try something like that. You cannot change which column is
considered as the FID column.

>
> > Looking at the code (in trunk), it isn't obvious that the PG and SQLite
> driver
> > would behave differently, but I haven't actually tried, and if you are not
> using
> > trunk, it is possible that there have been changes that might have altered
> the
> > behaviour w.r.t older GDAL/OGR versions.
>
> Actually I'm compiling from trunk. I tested with a SQLite table with PK,
> and the shapefile gets loaded with no complains.

I guess that SQLite must use the _rowid_ as its PK, and so your column is
considered as a regular column.

>
> I will send you a gz file with test shapefile and PG/SQLite SQL scripts.

That will help understand better certainly. Make sure to provide the exact SQL
definition of the tables where you want to insert the data and the command lines
used.

Not sure what can be done to "fix" the behaviour you observe. For the moment,
I've no better suggestion than the workaround you found by dropping temporarily
the PK constraint. Perhaps a configuration option the PG driver could be created
to tell "expose the column you consider to be the PK as being the OGR FID column
as a regular column". Or perhaps it could be autodetected if the PK column is
detected as not being automatically incremented.

>
> I'm waiting your advice to file the bug.
>
> Thanks again
>
> Sig
>
>


From even.rouault at mines-paris.org  Tue Dec 13 11:37:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 13 20:55:59 2011
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <201112131622.46743.yjacolin@free.fr>
References: <201112131220.07481.yjacolin@free.fr>
	<CA+TxYvPTh6cJgpDa8G6+FLZ__EiZXRCfHVv2cTCLz10CHPXB7A@mail.gmail.com>
	<201112131537.49460.yjacolin@free.fr>
	<201112131622.46743.yjacolin@free.fr>
Message-ID: <1323794231.4ee77f371a36e@imp.free.fr>

Selon Yves Jacolin <yjacolin@free.fr>:

> Hello,
>
> Etienne asked some question offlist so I investigate.
>
> gdal create relatif path by default (I don't see a flag to change this).
> MapServer and QGIS don't like this.

MapServer and QGIS don't even know the content of the VRT, so the problem is
more complex than that.

If you pass a relative path to gdalbuildvrt or gdal_translate -of VRT, a
relative path will be written. In which case the VRT driver should be able to
recompute the full path given the location of the .vrt.
On the contrary, if you pass an absolute path, it will be store as absolute.

The issue here is likely with netCDF subdatasets, where the connexion string is
not a file, but something like "netCDF:xxxx:a_filename", that the VRT driver
cannot interpret. In that case, the resolution of relative filenames will not
work. So I'd suggest you to use "netCDF:xxx:full_filename" to avoid those
issues. Or you must be sure that the current directory of MapServer and QGIS is
the directory of the .VRT, but you cannot always guarantee this.

>
> After changing relatif path to absolute path both are working correctly.
>
> Thanks,
From etourigny.dev at gmail.com  Tue Dec 13 11:50:04 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Dec 13 21:09:21 2011
Subject: [gdal-dev] VRT file from NetCDF
In-Reply-To: <1323794231.4ee77f371a36e@imp.free.fr>
References: <201112131220.07481.yjacolin@free.fr>
	<CA+TxYvPTh6cJgpDa8G6+FLZ__EiZXRCfHVv2cTCLz10CHPXB7A@mail.gmail.com>
	<201112131537.49460.yjacolin@free.fr>
	<201112131622.46743.yjacolin@free.fr>
	<1323794231.4ee77f371a36e@imp.free.fr>
Message-ID: <CA+TxYvMSzYzQ-=QyF-64x0j2YS31gv63hYLNxzvwHmWN-qjMLQ@mail.gmail.com>

Yves, I tried the vrt and netcdf file you supplied and I got the same
problem if I started QGIS from another directory (than where the VRT
file is stored), but it worked if I was in the same directory.

However, gdalinfo -stats tmp4.vrt worked fine from another
directory... I can't understand why gdalinfo succeed where QGIS does
not, they are using the same driver!

Even's suggestion does make sense: use the full path in VRT files,
especially if using mapserver or QGIS.

Etienne


On Tue, Dec 13, 2011 at 2:37 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Selon Yves Jacolin <yjacolin@free.fr>:
>
>> Hello,
>>
>> Etienne asked some question offlist so I investigate.
>>
>> gdal create relatif path by default (I don't see a flag to change this).
>> MapServer and QGIS don't like this.
>
> MapServer and QGIS don't even know the content of the VRT, so the problem is
> more complex than that.
>
> If you pass a relative path to gdalbuildvrt or gdal_translate -of VRT, a
> relative path will be written. In which case the VRT driver should be able to
> recompute the full path given the location of the .vrt.
> On the contrary, if you pass an absolute path, it will be store as absolute.
>
> The issue here is likely with netCDF subdatasets, where the connexion string is
> not a file, but something like "netCDF:xxxx:a_filename", that the VRT driver
> cannot interpret. In that case, the resolution of relative filenames will not
> work. So I'd suggest you to use "netCDF:xxx:full_filename" to avoid those
> issues. Or you must be sure that the current directory of MapServer and QGIS is
> the directory of the .VRT, but you cannot always guarantee this.
>
>>
>> After changing relatif path to absolute path both are working correctly.
>>
>> Thanks,
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Tue Dec 13 13:05:31 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue Dec 13 22:29:13 2011
Subject: [gdal-dev] Announcing significant changs to the netcdf driver
Message-ID: <CA+TxYvMxVs_7GQ4XT+M7NC69T=v26zWeBf=AJ+ocNJiDnfv6uA@mail.gmail.com>

Hi all

I have committed in the last few weeks a number of improvements to the
netcdf driver in trunk (1.9).

I would appreciate if users of the driver would try the latest version
(via svn or nightlies) and see if there are any bugs or regressions
and perhaps give some suggestions and feedback.
You can answer here and/or add to http://trac.osgeo.org/gdal/ticket/4294

I would like to add many of these fixes and features to the stable 1.8
series, but new features cannot be added there without explicit
permission of the PSC or an RFC (as per RFC 3).
If anyone would wish that to happen, please express yourself!

The user docs have been updated (section Driver Improvements)
http://www.gdal.org/frmt_netcdf.html

Highlights are:

- Added support for NC2, NC4 and NC4C file types for reading and
writing, and HDF4 for reading. See NetCDF File Format for details.
- Improved support for CF-1.5 projected and geographic SRS reading and writing
- Improvements to metadata (global and variable) handling
- Added simple progress indicator
- Added support for DEFLATE compression (reading and writing) and szip
(reading) - requires NetCDF-4 support
- Added support for valid_range/valid_min/valid_max
- Proper handling of signed/unsigned byte data
- Added support for Create() function - enables to use netcdf directly
with gdalwarp

Regards,
Etienne
From Michael.Smith at maine.gov  Tue Dec 13 13:58:34 2011
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Tue Dec 13 23:25:28 2011
Subject: [gdal-dev] GeoPDF translation
Message-ID: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 8626 bytes
Desc: icons_tiny.jpg
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/18dfa640/attachment.jpe
From even.rouault at mines-paris.org  Tue Dec 13 14:02:47 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 13 23:30:06 2011
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <201112132002.47816.even.rouault@mines-paris.org>

> 
> Is there some argument that would specify the dpi at which the GeoPDF
> were rendered before conversion to GeoTIFF?  I don't see anything like
> that in the docs or the list archives.

Oh! Did you check http://gdal.org/frmt_pdf.html ? If so, check again ;-)

> 
> BTW if you haven't checked out the historic topos they are great, going
> back to the 1880s for Maine.  What fun!
> 
> My ultimate goal is to have a seamless mosaic WMS of the old topos for
> Maine.
> 
> *****************
> Michael Smith
> State GIS Manager, Maine Office of GIS, Maine OIT
> Board Member, Maine GeoLibrary
> Board Member, Maine GIS Users Group
> State Rep, National States Geographic Information Council
> 
> 
> 
> State House Station 174
> 264 Civic Center Drive
> Augusta, ME 04333-0174
> (207) 215-5530
> 
> 69 o 47' 49.5"W   44 o 20' 54.5"N
From even.rouault at mines-paris.org  Tue Dec 13 14:03:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 13 23:30:50 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <1323784060.4071.47.camel@GOLEM>
References: <20111206122717.M56144@lqt.it>
	<1323778686.4ee7427e26576@webmail.free.fr>
	<1323784060.4071.47.camel@GOLEM>
Message-ID: <201112132003.28532.even.rouault@mines-paris.org>

Le mardi 13 d?cembre 2011 14:47:40, Luca Sigfrido Percich a ?crit :
> Even,
> 
> I did again the test with spatialite, and discovered that it behaves
> like Postgres, except it works also if you don't specify -preserve_fid,
> in which case the inserted fids are generated starting from 1. That's
> why I din't realize it was not inserting the values from my shape
> (initially the IDs were 1..5, now I changed to 105..109).
> 
> With the -preserve_fid option, spatialite too starts generating fids
> from 0.
> 
> Is there a way to tell OGR that ID is the FID?

Yes, I've finally found how to do it without changing any line of code. Here 
come the power of the OGR VRT driver...

1) Fetch http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2vrt.py
2) Generate a templatpython ogr2vrt.py test_pk_data.shp test_pk_data.vrt
3) Edit test_pk_data.vrt to add a <FID> element that points to the ID column 
of your shapefile and remove/comment the <Field name="id"> element :

<OGRVRTDataSource>
  <OGRVRTLayer name="test_pk_data">
    <SrcDataSource relativeToVRT="0" 
shared="1">test_pk_data.shp</SrcDataSource>
    <SrcLayer>test_pk_data</SrcLayer>
    <GeometryType>wkbPoint</GeometryType>
    <LayerSRS>PROJCS[&quot;Monte_Mario_Italy_zone_1&quot;,GEOGCS[&quot;GCS_Monte 
Mario&quot;,DATUM[&quot;Monte_Mario&quot;,SPHEROID[&quot;International_1924&quot;,6378388,297]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;Degree&quot;,0.017453292519943295]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,9],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,1500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;Meter&quot;,1]]</LayerSRS>
    <FID>id</FID>
    <!--<Field name="id" type="Integer" src="id" width="10"/>-->
    <Field name="name" type="String" src="name" width="50"/>
  </OGRVRTLayer>
</OGRVRTDataSource>

4) ogr2ogr -update -append pg:dbname=XXXX test_pk_data.vrt -preserve_fid 

Enjoy !

I've also added a short comment about the -preserve_fid option in ogr2ogr 
manual.


Even
From bfraser at geoanalytic.com  Tue Dec 13 14:04:30 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Dec 13 23:31:28 2011
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <4EE7A1BE.60608@geoanalytic.com>

Michael,

   GDAL's PDF format page says you can use the GDAL_PDF_DPI config option...

Best Regards,
Brent Fraser


On 12/13/2011 11:58 AM, Smith, Michael wrote:
> I am trying to convert the historic USGS topo maps (GeoPDFs) into 
> GeoTIFFs  with GDAL 1.8 .  A very straightforward thing to do is
> gdal_translate in.pdf out.tiff
> This works fine but the TIFF looks as if the PDF was exported at 
> 150dpi, which is a pretty crappy resolution.  Using something else 
> (like PDFCreator and printing to a TIFF), the USGS GeoPDFs can be 
> exported at higher resolutions, but then of course you lose the 
> georeferencing.  So I have GDAL which keeps the georeferencing but 
> only seems to like 150dpi, and then a zillion other solutions which 
> allow 300 dpi or 600 dpi, but have no georeferencing.
> I did try gdalwarp -tr 5 5 for example (which would roughly be 
> equivalent to one of these maps at 300dpi), but it is clear that it is 
> still rendering the PDF at 150dpi and then generating a 5-meter TIFF - 
> looks no different really than the default output with gdal_translate.
> Is there some argument that would specify the dpi at which the GeoPDF 
> were rendered before conversion to GeoTIFF?  I don't see anything like 
> that in the docs or the list archives.
> BTW if you haven't checked out the historic topos they are great, 
> going back to the 1880s for Maine.  What fun!
> My ultimate goal is to have a seamless mosaic WMS of the old topos for 
> Maine.
> *****************
> Michael Smith
> State GIS Manager, Maine Office of GIS, Maine OIT
> Board Member, Maine GeoLibrary
> Board Member, Maine GIS Users Group
> State Rep, National States Geographic Information Council
>
> icons
>
> State House Station 174
> 264 Civic Center Drive
> Augusta, ME 04333-0174
> (207) 215-5530
>
> 69 ^o 47' 49.5"W   44 ^o 20' 54.5"N
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
Skipped content of type multipart/related
From jdmorgan at unca.edu  Tue Dec 13 14:11:43 2011
From: jdmorgan at unca.edu (jdmorgan)
Date: Tue Dec 13 23:39:19 2011
Subject: [gdal-dev] editor that color codes mapfile syntax?
Message-ID: <4EE7A36F.2040307@gmail.com>

Hello,
I was wondering if anyone knows of an editor that color codes mapfile 
syntax?  I use notepad++ currently for python, but it would be great to 
have sytax coloring for .map files.

Thanks,

-- 
JDM Morgan @ NEMAC

From shadow at dementia.org  Tue Dec 13 14:13:44 2011
From: shadow at dementia.org (Derrick Brashear)
Date: Tue Dec 13 23:41:11 2011
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <CAMHoRJic0gOVDdbP2N4wx1yHrjGHhv786w5-EZa0FTFu3SjoOA@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 8626 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/b21943b4/attachment-0001.jpe
From Michael.Smith at maine.gov  Tue Dec 13 14:15:35 2011
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Tue Dec 13 23:43:13 2011
Subject: [gdal-dev] editor that color codes mapfile syntax?
In-Reply-To: <4EE7A36F.2040307@gmail.com>
References: <4EE7A36F.2040307@gmail.com>
Message-ID: <4EFF8BB964547748A07CA32961810C041BD7D6A2@SOM-TEAQASMAIL1.som.w2k.state.me.us>

http://sites.google.com/site/gianpierocampanella/files 


*****************
Michael Smith
State GIS Manager, Maine Office of GIS, Maine OIT
Board Member, Maine GeoLibrary
Board Member, Maine GIS Users Group
State Rep, National States Geographic Information Council

| MEGIS | GeoLibrary | MEGUG | NSGIC |

State House Station 174
264 Civic Center Drive
Augusta, ME 04333-0174
(207) 215-5530

69 o 47' 49.5"W   44 o 20' 54.5"N 



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of jdmorgan
Sent: Tuesday, December 13, 2011 2:12 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] editor that color codes mapfile syntax?

Hello,
I was wondering if anyone knows of an editor that color codes mapfile 
syntax?  I use notepad++ currently for python, but it would be great to 
have sytax coloring for .map files.

Thanks,

-- 
JDM Morgan @ NEMAC

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From lists at hilboll.de  Tue Dec 13 14:15:44 2011
From: lists at hilboll.de (Andreas H.)
Date: Tue Dec 13 23:50:08 2011
Subject: [gdal-dev] Announcing significant changs to the netcdf driver
In-Reply-To: <CA+TxYvMxVs_7GQ4XT+M7NC69T=v26zWeBf=AJ+ocNJiDnfv6uA@mail.gmail.com>
References: <CA+TxYvMxVs_7GQ4XT+M7NC69T=v26zWeBf=AJ+ocNJiDnfv6uA@mail.gmail.com>
Message-ID: <4EE7A460.3050303@hilboll.de>

> I would like to add many of these fixes and features to the stable 1.8
> series, but new features cannot be added there without explicit
> permission of the PSC or an RFC (as per RFC 3).
> If anyone would wish that to happen, please express yourself!

That sounds great to me. I certainly wish this to happen. Is this enough
expressing myself, or should I express myself somewhere/somehow different?

Cheers,
Andreas.
From shadow at dementia.org  Tue Dec 13 14:45:28 2011
From: shadow at dementia.org (Derrick Brashear)
Date: Wed Dec 14 00:14:45 2011
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <CAMHoRJic0gOVDdbP2N4wx1yHrjGHhv786w5-EZa0FTFu3SjoOA@mail.gmail.com>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<CAMHoRJic0gOVDdbP2N4wx1yHrjGHhv786w5-EZa0FTFu3SjoOA@mail.gmail.com>
Message-ID: <CAMHoRJjKCLv9U39uuL5xvqQpyucD7NzMsF35i6Pdi_A+hE56Zg@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 8626 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/d04b7ca4/attachment.jpe
From lists at hilboll.de  Tue Dec 13 14:52:43 2011
From: lists at hilboll.de (Andreas H.)
Date: Wed Dec 14 00:22:41 2011
Subject: [gdal-dev] re-gridding to a coarser grid
Message-ID: <4EE7AD0B.1040207@hilboll.de>

Hi,

let's say I have a GeoTIFF file with a global grid in a 30 arc-second
resolution. Which would be the appropriate GDAL command to spatially
down-sample this file to say 0.125??

Thanks for your insight,
Andreas.
From Michael.Smith at maine.gov  Tue Dec 13 15:18:51 2011
From: Michael.Smith at maine.gov (Smith, Michael)
Date: Wed Dec 14 00:50:09 2011
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <CAMHoRJjKCLv9U39uuL5xvqQpyucD7NzMsF35i6Pdi_A+hE56Zg@mail.gmail.com>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us><CAMHoRJic0gOVDdbP2N4wx1yHrjGHhv786w5-EZa0FTFu3SjoOA@mail.gmail.com>
	<CAMHoRJjKCLv9U39uuL5xvqQpyucD7NzMsF35i6Pdi_A+hE56Zg@mail.gmail.com>
Message-ID: <4EFF8BB964547748A07CA32961810C041BD7D6A6@SOM-TEAQASMAIL1.som.w2k.state.me.us>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 8626 bytes
Desc: icons_tiny.jpg
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/6a359a24/attachment.jpe
From even.rouault at mines-paris.org  Tue Dec 13 15:22:47 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 14 00:54:47 2011
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <4EFF8BB964547748A07CA32961810C041BD7D6A6@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<CAMHoRJjKCLv9U39uuL5xvqQpyucD7NzMsF35i6Pdi_A+hE56Zg@mail.gmail.com>
	<4EFF8BB964547748A07CA32961810C041BD7D6A6@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <201112132122.47768.even.rouault@mines-paris.org>

Le mardi 13 d?cembre 2011 21:18:51, Smith, Michael a ?crit :
> Thanks to those of you who pointed out the obvious -co "GDAL_PDF_DPI"
> which I somehow overlooked in the online docs.  RTFM right...
> 
> That said, I ran a test script using that CO and GDAL yields a warning
> message and then makes the export at 150dpi anyway.
> 
> gdal_translate -co "GDAL_PDF_DPI=300" -co "TFW=YES" addison.pdf
> addison.tif
> 
> This is returned:
> Warning 6: Driver GTiff does not support GDAL_PDF_DPI creation option
> 
> and then GDAL goes ahead and translates the PDF to GTIFF using the
> default 150dpi.

Yes,  GDAL_PDF_DPI is not a creation option of the GTiff driver, but a 
configuration option of the PDF driver.

Configuration options are specified with "--config optionname optionvalue" (note 
: space between name and value, not '=' character)

So : 

gdal_translate --config GDAL_PDF_DPI 300 -co "TFW=YES" addison.pdf addison.tif
From traviskirstine at gmail.com  Tue Dec 13 15:25:27 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Wed Dec 14 00:56:51 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <4EE7AD0B.1040207@hilboll.de>
References: <4EE7AD0B.1040207@hilboll.de>
Message-ID: <CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>

Andreas,

gdalwarp can be used to resample images using the -tr flag or -ts flag.

For example resample 1m image to 10m using cubic resampling and
"target resolution'

gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif

You may have an issue determining the output resolution as I believe
the resolution will be in decimal degrees rather than arc-seconds.

Regards

On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
> Hi,
>
> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
> resolution. Which would be the appropriate GDAL command to spatially
> down-sample this file to say 0.125??
>
> Thanks for your insight,
> Andreas.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From a.furieri at lqt.it  Tue Dec 13 15:44:00 2011
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Wed Dec 14 01:16:31 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files (1)
In-Reply-To: <1323772801.4ee72b8135f76@imp.free.fr>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<20111213095032.M75537@lqt.it>
	<1323772801.4ee72b8135f76@imp.free.fr>
Message-ID: <20111213203403.M56587@lqt.it>

On Tue, 13 Dec 2011 11:40:01 +0100, Even Rouault wrote
> Having sample data to add regression will be needed.
> 

please see the attached GML-Topo sample


> What do you think about the xlink1.gml that I mention in the ticket 
> ? Is it valid to have xlink:href to other documents ?
> 

I've asked this question to Andrea Peri (my personal GML guru)

YES, this one is an option fully supported by GML:
xlink:href="#id_123"
xlink:href="other_file.gml#id_123"
xlink:href="http://www.acme.com/other_file.gml#id_123"

any of the above notations is legal; the referenced
object may live in the same file, in a different
file, or in some URL

Andrea told me that the current Tuscany Region
implementation relies on the simplest "all itemes 
on the same file" layout.
but may well be that in ther near future they'll
consider useful adopting a more sophisticated
layout (e.g. all <Edge> items in one file,
and any related <Face> in a different file ...)

bye Sandro 


From a.furieri at lqt.it  Tue Dec 13 15:49:22 2011
From: a.furieri at lqt.it (a.furieri@lqt.it)
Date: Wed Dec 14 01:22:09 2011
Subject: [gdal-dev] Proposed patch for HUGE GML files (1)
In-Reply-To: <20111213203403.M56587@lqt.it>
References: <20111206122717.M56144@lqt.it>
	<1323184249.4ede3079e1a55@webmail.free.fr>
	<4EE5E2F8.9000308@lqt.it>
	<201112121815.07228.even.rouault@mines-paris.org>
	<20111213095032.M75537@lqt.it>
	<1323772801.4ee72b8135f76@imp.free.fr>
	<20111213203403.M56587@lqt.it>
Message-ID: <20111213204719.M9587@lqt.it>

On Tue, 13 Dec 2011 21:44:00 +0100, a.furieri wrote
> please see the attached GML-Topo sample
> 

sorry, I've forgot to attach the GML-Topo sample 
in my previous post :-D

bye Sandro
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GmlTopo-sample.zip
Type: application/x-zip-compressed
Size: 1864 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/a8804d5e/GmlTopo-sample-0001.bin
From etourigny.dev at gmail.com  Tue Dec 13 15:57:33 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Dec 14 01:30:50 2011
Subject: [gdal-dev] Announcing significant changs to the netcdf driver
In-Reply-To: <4EE7A460.3050303@hilboll.de>
References: <CA+TxYvMxVs_7GQ4XT+M7NC69T=v26zWeBf=AJ+ocNJiDnfv6uA@mail.gmail.com>
	<4EE7A460.3050303@hilboll.de>
Message-ID: <CA+TxYvO5hXv30WUSKmDjhw6rURJRF93CyOWPkQK7Vy9PzeTMJg@mail.gmail.com>

It would be nice to know which feature(s) or fix(es) you would like to
be implemented in the stable branch.

On Tue, Dec 13, 2011 at 5:15 PM, Andreas H. <lists@hilboll.de> wrote:
>> I would like to add many of these fixes and features to the stable 1.8
>> series, but new features cannot be added there without explicit
>> permission of the PSC or an RFC (as per RFC 3).
>> If anyone would wish that to happen, please express yourself!
>
> That sounds great to me. I certainly wish this to happen. Is this enough
> expressing myself, or should I express myself somewhere/somehow different?
>
> Cheers,
> Andreas.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jdmorgan at unca.edu  Tue Dec 13 17:03:59 2011
From: jdmorgan at unca.edu (jdm)
Date: Wed Dec 14 02:41:11 2011
Subject: [gdal-dev] editor that color codes mapfile syntax?
In-Reply-To: <4EFF8BB964547748A07CA32961810C041BD7D6A2@SOM-TEAQASMAIL1.som.w2k.state.me.us>
References: <4EE7A36F.2040307@gmail.com>
	<4EFF8BB964547748A07CA32961810C041BD7D6A2@SOM-TEAQASMAIL1.som.w2k.state.me.us>
Message-ID: <4EE7CBCF.4020108@gmail.com>

Thanks Michael,

This is a great little utility.

Cheers,
Derek

On 12/13/2011 2:15 PM, Smith, Michael wrote:
> http://sites.google.com/site/gianpierocampanella/files
>
>
> *****************
> Michael Smith
> State GIS Manager, Maine Office of GIS, Maine OIT
> Board Member, Maine GeoLibrary
> Board Member, Maine GIS Users Group
> State Rep, National States Geographic Information Council
>
> | MEGIS | GeoLibrary | MEGUG | NSGIC |
>
> State House Station 174
> 264 Civic Center Drive
> Augusta, ME 04333-0174
> (207) 215-5530
>
> 69 o 47' 49.5"W   44 o 20' 54.5"N
>
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of jdmorgan
> Sent: Tuesday, December 13, 2011 2:12 PM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] editor that color codes mapfile syntax?
>
> Hello,
> I was wondering if anyone knows of an editor that color codes mapfile
> syntax?  I use notepad++ currently for python, but it would be great to
> have sytax coloring for .map files.
>
> Thanks,
>

From hsumanto at vpac.org  Tue Dec 13 17:54:30 2011
From: hsumanto at vpac.org (Hendy Sumanto)
Date: Wed Dec 14 03:42:21 2011
Subject: [gdal-dev] Announcing significant changs to the netcdf driver
In-Reply-To: <CA+TxYvMxVs_7GQ4XT+M7NC69T=v26zWeBf=AJ+ocNJiDnfv6uA@mail.gmail.com>
Message-ID: <1374576551.2031.1323816870424.JavaMail.root@mail.vpac.org>

>>I have committed in the last few weeks a number of improvements to the
>>netcdf driver in trunk (1.9).
Well done, Etienne. Thanks for all the work.

>>I would appreciate if users of the driver would try the latest version
>>(via svn or nightlies) and see if there are any bugs or regressions
>>and perhaps give some suggestions and feedback.
I will be giving the latest version a try and test some of the highlights.

>>I would like to add many of these fixes and features to the stable 1.8
>>series, but new features cannot be added there without explicit
>>permission of the PSC or an RFC (as per RFC 3).
>>If anyone would wish that to happen, please express yourself!
>>Highlights are:
>>- Added support for NC2, NC4 and NC4C file types for reading and
>>  writing, and HDF4 for reading. See NetCDF File Format for details.
>>- Improved support for CF-1.5 projected and geographic SRS reading and writing
>>- Improvements to metadata (global and variable) handling
>>- Added simple progress indicator
>>- Added support for DEFLATE compression (reading and writing) and szip
>>  (reading) - requires NetCDF-4 support
>>- Added support for valid_range/valid_min/valid_max
>>- Proper handling of signed/unsigned byte data
>>- Added support for Create() function - enables to use netcdf directly
>>  with gdalwarp
They all are good improvements to the current driver so it would be good to see all of them
to make their to the stable version.

Thanks,

Hendy
From eadam at co.lincoln.or.us  Tue Dec 13 19:40:46 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Wed Dec 14 05:26:01 2011
Subject: [gdal-dev] editor that color codes mapfile syntax?
In-Reply-To: <4EE7CBCF.4020108@gmail.com>
References: <4EE7A36F.2040307@gmail.com>
	<4EFF8BB964547748A07CA32961810C041BD7D6A2@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<4EE7CBCF.4020108@gmail.com>
Message-ID: <CACqBkM82T=rZejOMG-f=inKS-p=v+=pzew5s779AhGOvPz3j0A@mail.gmail.com>

There is also a plugin for scite (http://www.scintilla.org/SciTE.html).

This link for the MapServer plug in is dead but you can still find it
on archive.org

http://ms.gis.umn.edu:8081/ms_plone/docs/link
http://web.archive.org/web/20100913161428/http://ms.gis.umn.edu:8081/ms_plone/docs/link

You will need to edit the SciTEGlobal.properties file to enable it.
I've attached the map.properties  as well.

Bests, Eli

PS. you might notice that this is slightly out of date and thus
probably doesn't have full MapServer 6.0 syntax highlighting.



On Tue, Dec 13, 2011 at 2:03 PM, jdm <jdmorgan@unca.edu> wrote:
> Thanks Michael,
>
> This is a great little utility.
>
> Cheers,
> Derek
>
>
> On 12/13/2011 2:15 PM, Smith, Michael wrote:
>>
>> http://sites.google.com/site/gianpierocampanella/files
>>
>>
>> *****************
>> Michael Smith
>> State GIS Manager, Maine Office of GIS, Maine OIT
>> Board Member, Maine GeoLibrary
>> Board Member, Maine GIS Users Group
>> State Rep, National States Geographic Information Council
>>
>> | MEGIS | GeoLibrary | MEGUG | NSGIC |
>>
>> State House Station 174
>> 264 Civic Center Drive
>> Augusta, ME 04333-0174
>> (207) 215-5530
>>
>> 69 o 47' 49.5"W ? 44 o 20' 54.5"N
>>
>>
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of jdmorgan
>> Sent: Tuesday, December 13, 2011 2:12 PM
>> To: gdal-dev@lists.osgeo.org
>> Subject: [gdal-dev] editor that color codes mapfile syntax?
>>
>> Hello,
>> I was wondering if anyone knows of an editor that color codes mapfile
>> syntax? ?I use notepad++ currently for python, but it would be great to
>> have sytax coloring for .map files.
>>
>> Thanks,
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: map.properties
Type: application/octet-stream
Size: 7861 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111213/238be83e/map.obj
From jluis at ualg.pt  Tue Dec 13 19:48:36 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Dec 14 05:34:38 2011
Subject: [gdal-dev] build issue on OSX
Message-ID: <4EE7F264.4030402@ualg.pt>

Hi,

It's been a while (well, a couple of months) since I built on OSX but I 
only did a svn update and I now get these linking errors

....stall_name  /usr/local/lib/libgdal.1.dylib -compatibility_version 17 
-current_version 17.0 -Wl,-single_module
ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon' 
following -L not a directory
Undefined symbols:
   "HFAEntry::FindChildren(char const*, char const*)", referenced from:
       _HFAGetIGEFilename in hfaopen.o
       _HFARenameReferences in hfaopen.o
       _HFARenameReferences in hfaopen.o
       _HFARenameReferences in hfaopen.o
      (maybe you meant: HFAEntry::FindChildren(char const*, char const*, 
int))
ld: symbol(s) not found

Joaquim
From sigfrido at tiscali.it  Tue Dec 13 19:52:57 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Wed Dec 14 05:39:01 2011
Subject: [gdal-dev] Inserting into PostGIS table with primary key using
	ogr2ogr
In-Reply-To: <201112132003.28532.even.rouault@mines-paris.org>
References: <20111206122717.M56144@lqt.it>
	<1323778686.4ee7427e26576@webmail.free.fr>
	<1323784060.4071.47.camel@GOLEM>
	<201112132003.28532.even.rouault@mines-paris.org>
Message-ID: <1323823977.2201.4.camel@GOLEM>

Thank you very much, Even. Apart from solving the problem, you're (as
always) opening new horizons to me :)

I'll test your solution tomorrow.

All the best!

Sig



Il giorno mar, 13/12/2011 alle 20.03 +0100, Even Rouault ha scritto:
> Le mardi 13 d?cembre 2011 14:47:40, Luca Sigfrido Percich a ?crit :

> Yes, I've finally found how to do it without changing any line of code. Here 
> come the power of the OGR VRT driver...
> 
> 1) Fetch http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2vrt.py
> 2) Generate a templatpython ogr2vrt.py test_pk_data.shp test_pk_data.vrt
> 3) Edit test_pk_data.vrt to add a <FID> element that points to the ID column 
> of your shapefile and remove/comment the <Field name="id"> element :
> 
> <OGRVRTDataSource>
>   <OGRVRTLayer name="test_pk_data">
>     <SrcDataSource relativeToVRT="0" 
> shared="1">test_pk_data.shp</SrcDataSource>
>     <SrcLayer>test_pk_data</SrcLayer>
>     <GeometryType>wkbPoint</GeometryType>
>     <LayerSRS>PROJCS[&quot;Monte_Mario_Italy_zone_1&quot;,GEOGCS[&quot;GCS_Monte 
> Mario&quot;,DATUM[&quot;Monte_Mario&quot;,SPHEROID[&quot;International_1924&quot;,6378388,297]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;Degree&quot;,0.017453292519943295]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,9],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,1500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;Meter&quot;,1]]</LayerSRS>
>     <FID>id</FID>
>     <!--<Field name="id" type="Integer" src="id" width="10"/>-->
>     <Field name="name" type="String" src="name" width="50"/>
>   </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> 4) ogr2ogr -update -append pg:dbname=XXXX test_pk_data.vrt -preserve_fid 
> 
> Enjoy !
> 
> I've also added a short comment about the -preserve_fid option in ogr2ogr 
> manual.
> 
> 
> Even

From mrxonx at hotmail.com  Tue Dec 13 23:00:18 2011
From: mrxonx at hotmail.com (mrxonx@hotmail.com)
Date: Wed Dec 14 09:04:35 2011
Subject: [gdal-dev] Patch for s57reader.cpp
In-Reply-To: <COL110-W121B63258852C1DF0FFE15D1DA0@phx.gbl>
References: <3C951F86A458CD4EBA86837EDC115AE87B2148@massenet.hitt.home>,
	<4CE2CD9A.6090402@pobox.com>, <4EB42EAD.8050303@hotmail.com>,
	<CA+TxYvOYsP-PkphTH83NTX3-DuomXgDkLPUFLo+jMiuxO5moTg@mail.gmail.com>
	<COL110-W121B63258852C1DF0FFE15D1DA0@phx.gbl>
Message-ID: <4EE81F52.1010408@hotmail.com>

Looks like the patch has been applied - thanks!

Test chart is found in current UKHO data set, chart GB327200 (St. Helena).
It's not a free data set, so I can't attach a copy, but UKHO should be
willing to provide one free of charge, if requested, for test purposes.

M S wrote:
>
> > Date: Fri, 4 Nov 2011 16:54:09 -0200
> > Subject: Re: [gdal-dev] Patch for s57reader.cpp
> > From: etourigny.dev@gmail.com
> > To: mrxonx@hotmail.com
> > CC: gdal-dev@lists.osgeo.org
> >
> > Dear Mike,
> >
> > Please add this to a relevant ticket, or create one and add it there.
> >
> > http://trac.osgeo.org/gdal/report
> >
> > thanks, Etienne
> >
> > On Fri, Nov 4, 2011 at 4:27 PM, <mrxonx@hotmail.com> wrote:
> > > Dear all,
> > >
> > > Included is a patch for s57reader.cpp that properly applies
> updates for
> > > certain types of charts.
> > >
> > > The essence of this patch is that SG2D field may not be present in
> > > original record, and must be added if update is trying to insert SG2D
> > > fields.
> > >
> > > The patch was made against our modified version of OGR, so line
> numbers
> > > likely do not match and certain function signatures may need to be
> > > updated. If you'd like to apply it - make sure it goes in the
> > > S57Reader::ApplyRecordUpdate.
> > >
> > > Best,
> > > --
> > > Mike
> > >
> > >
> > >
> > > Index: s57reader.cpp
> > > ===================================================================
> > > --- s57reader.cpp       (revision 0000)
> > > +++ s57reader.cpp       (working copy)
> > > @@ -2635,16 +2635,30 @@
> > >         /* If we don't have SG2D, check for SG3D */
> > >         if( poDstSG2D == NULL )
> > >         {
> > > -            poSrcSG2D = poUpdate->FindField("SG3D");
> > >             poDstSG2D = poTarget->FindField("SG3D");
> > > +            if (poDstSG2D != NULL) {
> > > +               poSrcSG2D = poUpdate->FindField("SG3D");
> > > +            }
> > >         }
> > >
> > > -        if( (poSrcSG2D == NULL && nCCUI != 2) || poDstSG2D == NULL )
> > > +        if( (poSrcSG2D == NULL && nCCUI != 2) || (poDstSG2D ==
> NULL && nCCUI != 1) )
> > >         {
> > >             CPLAssert( FALSE );
> > >             return FALSE;
> > >         }
> > >
> > > +        if (poDstSG2D == NULL) {
> > > +        
>  poTarget->AddField(poTarget->GetModule()->FindFieldDefn("SG2D"));
> > > +          poDstSG2D = poTarget->FindField("SG2D");
> > > +          if (poDstSG2D == NULL) {
> > > +            CPLAssert( FALSE );
> > > +            return FALSE;
> > > +          }
> > > +
> > > +          // Delete null default data that was created
> > > +          poTarget->SetFieldRaw( poDstSG2D, 0, NULL, 0 );
> > > +        }
> > > +
> > >         nCoordSize = poDstSG2D->GetFieldDefn()->GetFixedWidth();
> > >
> > >         if( nCCUI == 1 ) /* INSERT */
> > >
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Wed Dec 14 02:01:43 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 14 12:08:28 2011
Subject: [gdal-dev] build issue on OSX
In-Reply-To: <4EE7F264.4030402@ualg.pt>
References: <4EE7F264.4030402@ualg.pt>
Message-ID: <201112140801.43564.even.rouault@mines-paris.org>

Le mercredi 14 d?cembre 2011 01:48:36, Joaquim Luis a ?crit :
> Hi,
> 
> It's been a while (well, a couple of months) since I built on OSX but I
> only did a svn update and I now get these linking errors
> 
> ....stall_name  /usr/local/lib/libgdal.1.dylib -compatibility_version 17
> -current_version 17.0 -Wl,-single_module
> ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon'
> following -L not a directory
> Undefined symbols:
>    "HFAEntry::FindChildren(char const*, char const*)", referenced from:
>        _HFAGetIGEFilename in hfaopen.o
>        _HFARenameReferences in hfaopen.o
>        _HFARenameReferences in hfaopen.o
>        _HFARenameReferences in hfaopen.o
>       (maybe you meant: HFAEntry::FindChildren(char const*, char const*,
> int))
> ld: symbol(s) not found

Did you 'make clean' before 'make' ? Sounds like you didn't. The 
FindChildren() has an extra optional argument now.

> 
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Wed Dec 14 02:03:51 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 14 12:10:01 2011
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
Message-ID: <4EE84A57.1080005@pobox.com>

Motion: The GDAL PSC authorizes funding up to US$525 to pay entrance fees
to the Islandwood Code Sprint for Brian Case.

-----

Brian (aka winkey) has done lots of work in recent years on and with
GDAL/OGR.  Most notably he has developed the libkml based OGR KML driver.

Brian lives relatively near the Islandwood sprint and would arrange to get
himself there and other ancillary costs.  We would just be paying the
entrace fees (which also implicitly covers housing and food).  Information
on the Islandwood Sprint (successor to the Toronto, NYC and Montreal sprints
of recent years) is available at:

   http://wiki.osgeo.org/wiki/IslandWood_Code_Sprint_2012

I'm afraid I haven't done a detailed financial review of GDAL/OGR project
funds but I think we have in excess of $10K in reserve so this is a modest
expenditure, and I think can serve the community building goals of the project
well.  I think we should also be open to similar support for other substantial
contributors to GDAL/OGR who don't have corporate travel support, who would
like to attend the sprint, and who would be able to get themselves there.
However, that is not explicitly covered by this motion.

--

I'll start with +1 Frank.

PS. I'd love to make a new batch of GDAL project tshirts in the coming
year if someone is up to organizing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From warmerdam at pobox.com  Wed Dec 14 02:31:22 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 14 12:39:09 2011
Subject: [gdal-dev] 1.9 Release Process
Message-ID: <4EE850CA.2070903@pobox.com>

Folks,

I would like to have a GDAL/OGR 1.9 release by the end of this year,
ideally before Christmas.  We have not formalized a release process
for the project, but I'd like to follow the approach of past years.
This basically consists of a few beta releases, followed by a release
candidate when things seem to be in good shape.  The release candidates
would be voted on by the PSC before becoming official.

Anyone with significant work they would like to accomplish before 1.9.0
should reply to this thread with information on the planned work.

Barring objections, I'll plan on a Beta 1 this weekend.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From even.rouault at mines-paris.org  Wed Dec 14 04:22:54 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 14 14:37:45 2011
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <4EE84A57.1080005@pobox.com>
References: <4EE84A57.1080005@pobox.com>
Message-ID: <1323854574.4ee86aee06469@webmail.free.fr>

Selon Frank Warmerdam <warmerdam@pobox.com>:

> Motion: The GDAL PSC authorizes funding up to US$525 to pay entrance fees
> to the Islandwood Code Sprint for Brian Case.

+1

Even
From jluis at ualg.pt  Wed Dec 14 07:25:13 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Dec 14 07:26:20 2011
Subject: [gdal-dev] build issue on OSX
In-Reply-To: <201112140801.43564.even.rouault@mines-paris.org>
References: <4EE7F264.4030402@ualg.pt>
	<201112140801.43564.even.rouault@mines-paris.org>
Message-ID: <4EE895A9.5010408@ualg.pt>

On 14-12-2011 07:01, Even Rouault wrote:
> Le mercredi 14 d?cembre 2011 01:48:36, Joaquim Luis a ?crit :
>> Hi,
>>
>> It's been a while (well, a couple of months) since I built on OSX but I
>> only did a svn update and I now get these linking errors
>>
>> ....stall_name  /usr/local/lib/libgdal.1.dylib -compatibility_version 17
>> -current_version 17.0 -Wl,-single_module
>> ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon'
>> following -L not a directory
>> Undefined symbols:
>>     "HFAEntry::FindChildren(char const*, char const*)", referenced from:
>>         _HFAGetIGEFilename in hfaopen.o
>>         _HFARenameReferences in hfaopen.o
>>         _HFARenameReferences in hfaopen.o
>>         _HFARenameReferences in hfaopen.o
>>        (maybe you meant: HFAEntry::FindChildren(char const*, char const*,
>> int))
>> ld: symbol(s) not found

> Did you 'make clean' before 'make' ? Sounds like you didn't. The
> FindChildren() has an extra optional argument now.

Apparently I hadn't (I try to keep the habit of 'make install' 
immediately followed by 'make clean') because it worked after doing it.
Thanks

Joaquim
From szekerest at gmail.com  Wed Dec 14 07:32:12 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Dec 14 07:32:45 2011
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <4EE84A57.1080005@pobox.com>
References: <4EE84A57.1080005@pobox.com>
Message-ID: <CACALY+RJDzN0_br4_wDSTLgL8HNf0hFqx2BAccj0Y_RmyVFLgQ@mail.gmail.com>

+1

Tamas



2011/12/14 Frank Warmerdam <warmerdam@pobox.com>

> Motion: The GDAL PSC authorizes funding up to US$525 to pay entrance fees
> to the Islandwood Code Sprint for Brian Case.
>
> -----
>
> Brian (aka winkey) has done lots of work in recent years on and with
> GDAL/OGR.  Most notably he has developed the libkml based OGR KML driver.
>
> Brian lives relatively near the Islandwood sprint and would arrange to get
> himself there and other ancillary costs.  We would just be paying the
> entrace fees (which also implicitly covers housing and food).  Information
> on the Islandwood Sprint (successor to the Toronto, NYC and Montreal
> sprints
> of recent years) is available at:
>
>  http://wiki.osgeo.org/wiki/**IslandWood_Code_Sprint_2012<http://wiki.osgeo.org/wiki/IslandWood_Code_Sprint_2012>
>
> I'm afraid I haven't done a detailed financial review of GDAL/OGR project
> funds but I think we have in excess of $10K in reserve so this is a modest
> expenditure, and I think can serve the community building goals of the
> project
> well.  I think we should also be open to similar support for other
> substantial
> contributors to GDAL/OGR who don't have corporate travel support, who would
> like to attend the sprint, and who would be able to get themselves there.
> However, that is not explicitly covered by this motion.
>
> --
>
> I'll start with +1 Frank.
>
> PS. I'd love to make a new batch of GDAL project tshirts in the coming
> year if someone is up to organizing.
>
> Best regards,
> --
> ------------------------------**---------+--------------------**
> ------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111214/05a15b82/attachment.html
From lists at hilboll.de  Wed Dec 14 07:37:30 2011
From: lists at hilboll.de (Andreas H.)
Date: Wed Dec 14 07:38:19 2011
Subject: [gdal-dev] Which is the way to handle altitude layers within one
	file?
Message-ID: <924ad7c483eec53b5775f41e3f02fc34.squirrel@srv2.s4y.tournesol-consulting.eu>

Hi,

the subject basically says it. What would be the way to go if I want to
store multiple altitude layers within a file? The grid contains 64
latitudes, 128 longitudes, and 60 altitude levels. How do I need to create
the file in order to be able to use tools like gdalwarp to modify the
data/grid?

thanks for your insight,
Andreas.

From lists at hilboll.de  Wed Dec 14 08:26:00 2011
From: lists at hilboll.de (Andreas H.)
Date: Wed Dec 14 08:26:18 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
References: <4EE7AD0B.1040207@hilboll.de>
	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
Message-ID: <9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>

Travis,

thanks for your answer!

Regarding the resampling methods: Do they all just interpolate the data? I
mean, when downsampling, usually I would use mean() or something similar
to fill the new (coarser) grid cells. Doas gdalwarp actually do this and
I'm not able to understand the documentation, or is it different?

Thanks again!
Andreas.


> Andreas,
>
> gdalwarp can be used to resample images using the -tr flag or -ts flag.
>
> For example resample 1m image to 10m using cubic resampling and
> "target resolution'
>
> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
>
> You may have an issue determining the output resolution as I believe
> the resolution will be in decimal degrees rather than arc-seconds.
>
> Regards
>
> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
>> Hi,
>>
>> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
>> resolution. Which would be the appropriate GDAL command to spatially
>> down-sample this file to say 0.125??
>>
>> Thanks for your insight,
>> Andreas.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From hobu.inc at gmail.com  Wed Dec 14 08:56:00 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Dec 14 08:56:12 2011
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <CACALY+RJDzN0_br4_wDSTLgL8HNf0hFqx2BAccj0Y_RmyVFLgQ@mail.gmail.com>
References: <4EE84A57.1080005@pobox.com>
	<CACALY+RJDzN0_br4_wDSTLgL8HNf0hFqx2BAccj0Y_RmyVFLgQ@mail.gmail.com>
Message-ID: <FE27F899-BF30-43F4-80B5-F6A3D658FD43@gmail.com>

+1 

Howard

On Dec 14, 2011, at 6:32 AM, Tamas Szekeres wrote:

> +1
> 
> Tamas
> 
> 
> 
> 2011/12/14 Frank Warmerdam <warmerdam@pobox.com>
> Motion: The GDAL PSC authorizes funding up to US$525 to pay entrance fees
> to the Islandwood Code Sprint for Brian Case.
> 
> -----
> 
> Brian (aka winkey) has done lots of work in recent years on and with
> GDAL/OGR.  Most notably he has developed the libkml based OGR KML driver.
> 
> Brian lives relatively near the Islandwood sprint and would arrange to get
> himself there and other ancillary costs.  We would just be paying the
> entrace fees (which also implicitly covers housing and food).  Information
> on the Islandwood Sprint (successor to the Toronto, NYC and Montreal sprints
> of recent years) is available at:
> 
>  http://wiki.osgeo.org/wiki/IslandWood_Code_Sprint_2012
> 
> I'm afraid I haven't done a detailed financial review of GDAL/OGR project
> funds but I think we have in excess of $10K in reserve so this is a modest
> expenditure, and I think can serve the community building goals of the project
> well.  I think we should also be open to similar support for other substantial
> contributors to GDAL/OGR who don't have corporate travel support, who would
> like to attend the sprint, and who would be able to get themselves there.
> However, that is not explicitly covered by this motion.
> 
> --
> 
> I'll start with +1 Frank.
> 
> PS. I'd love to make a new batch of GDAL project tshirts in the coming
> year if someone is up to organizing.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lists at hilboll.de  Wed Dec 14 09:03:24 2011
From: lists at hilboll.de (Andreas H.)
Date: Wed Dec 14 09:03:56 2011
Subject: [gdal-dev] Newbie question about gdal_grid for 3d data
Message-ID: <dae094f19c47d9f7304659e17c72f010.squirrel@srv2.s4y.tournesol-consulting.eu>

Hi again,

another question which shows I'm just starting to see if GDAL can actually
make my life easier :)

I'm working with atmospheric trace gas profiles, so one data"point"
consists of latitude, longitude (point or polygon, whichever is easier)
and many vertical layers, say 60 floating point values. I ultimately want
to create a global 1?x1? grid where all data"points" are put into and
averaged.

While I can see that gdal_grid will probably do the job, I cannot see a)
how exactly and, more importantly, b) in which format I should prepare the
input files. I'm preparing the data with some home-grown Python scripts,
and I'm quite familiar with HDF and NC formats ...

Thanks for your insight!
Andreas.

From traviskirstine at gmail.com  Wed Dec 14 10:35:57 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Wed Dec 14 10:36:30 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
References: <4EE7AD0B.1040207@hilboll.de>
	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
	<9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
Message-ID: <CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>

Andreas,

Yes gdalwarp support various resampling methods

To use different resampling methods use the -r flag followed by the method

eg

gdalwarp -r near ..............
gdalwarp -r bilinear .............

etc...




On 14 December 2011 08:26, Andreas H. <lists@hilboll.de> wrote:
> Travis,
>
> thanks for your answer!
>
> Regarding the resampling methods: Do they all just interpolate the data? I
> mean, when downsampling, usually I would use mean() or something similar
> to fill the new (coarser) grid cells. Doas gdalwarp actually do this and
> I'm not able to understand the documentation, or is it different?
>
> Thanks again!
> Andreas.
>
>
>> Andreas,
>>
>> gdalwarp can be used to resample images using the -tr flag or -ts flag.
>>
>> For example resample 1m image to 10m using cubic resampling and
>> "target resolution'
>>
>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
>>
>> You may have an issue determining the output resolution as I believe
>> the resolution will be in decimal degrees rather than arc-seconds.
>>
>> Regards
>>
>> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
>>> Hi,
>>>
>>> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
>>> resolution. Which would be the appropriate GDAL command to spatially
>>> down-sample this file to say 0.125??
>>>
>>> Thanks for your insight,
>>> Andreas.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From rush at winkey.org  Wed Dec 14 10:50:33 2011
From: rush at winkey.org (Brian Case)
Date: Wed Dec 14 10:51:14 2011
Subject: [gdal-dev] Newbie question about gdal_grid for 3d data
In-Reply-To: <dae094f19c47d9f7304659e17c72f010.squirrel@srv2.s4y.tournesol-consulting.eu>
References: <dae094f19c47d9f7304659e17c72f010.squirrel@srv2.s4y.tournesol-consulting.eu>
Message-ID: <1323877833.7834.27.camel@octopi>

Andreas,

There are no vector drivers for hdf and nc. take a look here
http://www.gdal.org/ogr/ogr_formats.html

As an alternative to gdal_grid you can use GMT's blockmean, blockmedian,
or blockmode. then use GMT's surface http://www.soest.hawaii.edu/gmt5/


On Wed, 2011-12-14 at 15:03 +0100, Andreas H. wrote:
> Hi again,
> 
> another question which shows I'm just starting to see if GDAL can actually
> make my life easier :)
> 
> I'm working with atmospheric trace gas profiles, so one data"point"
> consists of latitude, longitude (point or polygon, whichever is easier)
> and many vertical layers, say 60 floating point values. I ultimately want
> to create a global 1?x1? grid where all data"points" are put into and
> averaged.
> 
> While I can see that gdal_grid will probably do the job, I cannot see a)
> how exactly and, more importantly, b) in which format I should prepare the
> input files. I'm preparing the data with some home-grown Python scripts,
> and I'm quite familiar with HDF and NC formats ...
> 
> Thanks for your insight!
> Andreas.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From dmorissette at mapgears.com  Wed Dec 14 10:45:38 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Dec 14 10:52:10 2011
Subject: [gdal-dev] Motion: Authorize Islandwood Funding for Brian Case
In-Reply-To: <4EE84A57.1080005@pobox.com>
References: <4EE84A57.1080005@pobox.com>
Message-ID: <4EE8C4A2.8080500@mapgears.com>

On 11-12-14 2:03 AM, Frank Warmerdam wrote:
> Motion: The GDAL PSC authorizes funding up to US$525 to pay entrance fees
> to the Islandwood Code Sprint for Brian Case.
>

+1

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From rush at winkey.org  Wed Dec 14 11:43:42 2011
From: rush at winkey.org (Brian Case)
Date: Wed Dec 14 11:43:55 2011
Subject: [gdal-dev] Which is the way to handle altitude layers within
	one file?
In-Reply-To: <924ad7c483eec53b5775f41e3f02fc34.squirrel@srv2.s4y.tournesol-consulting.eu>
References: <924ad7c483eec53b5775f41e3f02fc34.squirrel@srv2.s4y.tournesol-consulting.eu>
Message-ID: <1323881022.7834.34.camel@octopi>

Andreas,

you can use gdal to read grib, hdf, and netcdf files built this way.
take a look at the format pages for those formats.
http://www.gdal.org/formats_list.html

note: gdal requires all the "bands" or subdatasets to be the same size

if you find yourself needing to put multiple files together use
gdalbuildvrt -separate then gdal_translate

On Wed, 2011-12-14 at 13:37 +0100, Andreas H. wrote:
> 
> the subject basically says it. What would be the way to go if I want
> to
> store multiple altitude layers within a file? The grid contains 64
> latitudes, 128 longitudes, and 60 altitude levels. How do I need to
> create
> the file in order to be able to use tools like gdalwarp to modify the
> data/grid? 

From lists at hilboll.de  Wed Dec 14 13:32:32 2011
From: lists at hilboll.de (Andreas H.)
Date: Wed Dec 14 13:32:53 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>
References: <4EE7AD0B.1040207@hilboll.de>
	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
	<9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
	<CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>
Message-ID: <4EE8EBC0.9070409@hilboll.de>

Travis,

yes, thanks, I had already found that in the documentation. I'm just
wondering what e.g. 'bilinear' means when I go from a fine to a coarse
grid? If GDAL works in terms of "nodes", then I would assume 'bilinear'
means interpolation, which in turn would be a very different result from
working in terms of "cells" and then taking e.g. the average of all
"old" cells in the "new" grid.

I hope you see my problem / question.

Thanks for you insight,
Andreas.

Am 14.12.2011 16:35, schrieb Travis Kirstine:
> Andreas,
> 
> Yes gdalwarp support various resampling methods
> 
> To use different resampling methods use the -r flag followed by the method
> 
> eg
> 
> gdalwarp -r near ..............
> gdalwarp -r bilinear .............
> 
> etc...
> 
> 
> 
> 
> On 14 December 2011 08:26, Andreas H. <lists@hilboll.de> wrote:
>> Travis,
>>
>> thanks for your answer!
>>
>> Regarding the resampling methods: Do they all just interpolate the data? I
>> mean, when downsampling, usually I would use mean() or something similar
>> to fill the new (coarser) grid cells. Doas gdalwarp actually do this and
>> I'm not able to understand the documentation, or is it different?
>>
>> Thanks again!
>> Andreas.
>>
>>
>>> Andreas,
>>>
>>> gdalwarp can be used to resample images using the -tr flag or -ts flag.
>>>
>>> For example resample 1m image to 10m using cubic resampling and
>>> "target resolution'
>>>
>>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
>>>
>>> You may have an issue determining the output resolution as I believe
>>> the resolution will be in decimal degrees rather than arc-seconds.
>>>
>>> Regards
>>>
>>> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
>>>> Hi,
>>>>
>>>> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
>>>> resolution. Which would be the appropriate GDAL command to spatially
>>>> down-sample this file to say 0.125??
>>>>
>>>> Thanks for your insight,
>>>> Andreas.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From alexander.bruy at gmail.com  Wed Dec 14 14:03:48 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Wed Dec 14 14:04:14 2011
Subject: [gdal-dev] gdal2tiles crashes on some rasters
Message-ID: <CALuHMPAfWy_-7dWkHq8483afDGTOU3=_YNQVTO1sq-TsiA=z+Q@mail.gmail.com>

Hi all,

I have troubles using gdal2tiles. When I try to generate tiles from raster
it fails with error

Generating Base Tiles:
ERROR 5: Illegal values for buffer size
ERROR 5: Illegal values for buffer size
Traceback (most recent call last):
  File "/usr/bin/gdal2tiles.py", line 2241, in <module>
    gdal2tiles.process()
  File "/usr/bin/gdal2tiles.py", line 478, in process
    self.generate_base_tiles()
  File "/usr/bin/gdal2tiles.py", line 1276, in generate_base_tiles
    dsquery.WriteRaster(wx, wy, wxsize, wysize, data,
band_list=list(range(1,self.dataBandsCount+1)))
  File "/usr/lib/python2.6/site-packages/GDAL-1.8.1-py2.6-linux-i686.egg/osgeo/gdal.py",
line 746, in WriteRaster
    buf_pixel_space, buf_line_space, buf_band_space )
TypeError: not a string

Here is my command
gdal2tiles.py -z '8-14' --srcnodata=0 merc_SHL_tmv.tif ./output

gdalinfo reports that raster georeferenced

Coordinate System is:
PROJCS["WGS 84 / UTM zone 54N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",141],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32654"]]

When I set input CRS in gdal2tiles command and try again same error appears.
Also I try to warp input raster to Google Mercator using this command

gdalwarp -t_srs '+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
+lon_0=0.0 +x_0=0.0
+y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs' SHL_tmv.tif
merc_SHL_tmv.tif

and generate tiles from reprojected image. Same result.
But for some other raster after reprojecting with same command gdal2tiles works.
Any ideas what is wrong?

Thanks
-- 
Alexander Bruy
From patrick.wright at boeing.com  Wed Dec 14 15:19:49 2011
From: patrick.wright at boeing.com (Wright, Patrick)
Date: Wed Dec 14 15:35:00 2011
Subject: [gdal-dev] (no subject)
Message-ID: <27F5AFAE9A09AB48BD34CF14B4DE9B23157C2E49C7@XCH-SW-08V.sw.nos.boeing.com>

A non-text attachment was scrubbed...
Name: smime.p7m
Type: application/x-pkcs7-mime
Size: 17428 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111214/e243f2f8/smime.bin
From etourigny.dev at gmail.com  Wed Dec 14 16:36:40 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Dec 14 16:37:04 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>
References: <4EE7AD0B.1040207@hilboll.de>
	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
	<9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
	<CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>
Message-ID: <CA+TxYvNf1T9c6UXanijoKqi3gk1oVa-ZFnfB72ubFoEMwYtFeA@mail.gmail.com>

The only option that you do *not* have is "mode" (the dominant value),
which can be useful in the case of categorical (integer) data.  That
question has been answered here:

http://www.osgeo.org/pipermail/gdal-dev/2011-August/029692.html

On Wed, Dec 14, 2011 at 1:35 PM, Travis Kirstine
<traviskirstine@gmail.com> wrote:
> Andreas,
>
> Yes gdalwarp support various resampling methods
>
> To use different resampling methods use the -r flag followed by the method
>
> eg
>
> gdalwarp -r near ..............
> gdalwarp -r bilinear .............
>
> etc...
>
>
>
>
> On 14 December 2011 08:26, Andreas H. <lists@hilboll.de> wrote:
>> Travis,
>>
>> thanks for your answer!
>>
>> Regarding the resampling methods: Do they all just interpolate the data? I
>> mean, when downsampling, usually I would use mean() or something similar
>> to fill the new (coarser) grid cells. Doas gdalwarp actually do this and
>> I'm not able to understand the documentation, or is it different?
>>
>> Thanks again!
>> Andreas.
>>
>>
>>> Andreas,
>>>
>>> gdalwarp can be used to resample images using the -tr flag or -ts flag.
>>>
>>> For example resample 1m image to 10m using cubic resampling and
>>> "target resolution'
>>>
>>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
>>>
>>> You may have an issue determining the output resolution as I believe
>>> the resolution will be in decimal degrees rather than arc-seconds.
>>>
>>> Regards
>>>
>>> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
>>>> Hi,
>>>>
>>>> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
>>>> resolution. Which would be the appropriate GDAL command to spatially
>>>> down-sample this file to say 0.125??
>>>>
>>>> Thanks for your insight,
>>>> Andreas.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Wed Dec 14 16:40:05 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Dec 14 16:40:44 2011
Subject: [gdal-dev] build issue on OSX
In-Reply-To: <4EE895A9.5010408@ualg.pt>
References: <4EE7F264.4030402@ualg.pt>
	<201112140801.43564.even.rouault@mines-paris.org>
	<4EE895A9.5010408@ualg.pt>
Message-ID: <CA+TxYvML5ZDQ+oH9Q_-7=s=JF=MVJOFgfaXrsHf0-VNgB9kDsw@mail.gmail.com>

I'd say the best habit is to 'make clean' after a significant 'svn
update', or if something is funny after a minor svn update.

cheers
Etienne

On Wed, Dec 14, 2011 at 10:25 AM, Joaquim Luis <jluis@ualg.pt> wrote:
> On 14-12-2011 07:01, Even Rouault wrote:
>>
>> Le mercredi 14 d?cembre 2011 01:48:36, Joaquim Luis a ?crit :
>>>
>>> Hi,
>>>
>>> It's been a while (well, a couple of months) since I built on OSX but I
>>> only did a svn update and I now get these linking errors
>>>
>>> ....stall_name ?/usr/local/lib/libgdal.1.dylib -compatibility_version 17
>>> -current_version 17.0 -Wl,-single_module
>>> ld: warning: path '/System/Library/Frameworks/Carbon.framework/Carbon'
>>> following -L not a directory
>>> Undefined symbols:
>>> ? ?"HFAEntry::FindChildren(char const*, char const*)", referenced from:
>>> ? ? ? ?_HFAGetIGEFilename in hfaopen.o
>>> ? ? ? ?_HFARenameReferences in hfaopen.o
>>> ? ? ? ?_HFARenameReferences in hfaopen.o
>>> ? ? ? ?_HFARenameReferences in hfaopen.o
>>> ? ? ? (maybe you meant: HFAEntry::FindChildren(char const*, char const*,
>>> int))
>>> ld: symbol(s) not found
>
>
>> Did you 'make clean' before 'make' ? Sounds like you didn't. The
>> FindChildren() has an extra optional argument now.
>
>
> Apparently I hadn't (I try to keep the habit of 'make install' immediately
> followed by 'make clean') because it worked after doing it.
> Thanks
>
>
> Joaquim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From etourigny.dev at gmail.com  Wed Dec 14 16:53:58 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Dec 14 16:54:30 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <4EE850CA.2070903@pobox.com>
References: <4EE850CA.2070903@pobox.com>
Message-ID: <CA+TxYvMAe22H=TZk3cKQA3xgcuLHDdtYppmgKP8etnvT929-4Q@mail.gmail.com>

Frank, I have 2 issues I would like to address before 1.9 is released.

1) The ability to save the gdal commandline string and access it later.

This is useful for the netcdf 'history' metadata, and consistent with
all other software that manipulates netcdf files.  Suggested patch
adds 2 functions to gdal.h (only one is really needed) and modifies
GDALGeneralCmdLineProcessor() slightly (because that is where the
commandline is processed).

Details and small patch are in bug #4297.


2) Fixes to importFromESRI - bugs #4345 and #4378

I have committed a fix  to trunk (r23542) and it is optional, using a
Configuration Option to be activated.
It tries to fix missing parts of ESRI WKT (like TOWGS84 parameters and
DATUM and GEOGCS EPSG codes).
I would like to see if we can turn it on by default (at least for
DATUM and TOWGS84).


regards,
Etienne

On Wed, Dec 14, 2011 at 5:31 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Folks,
>
> I would like to have a GDAL/OGR 1.9 release by the end of this year,
> ideally before Christmas. ?We have not formalized a release process
> for the project, but I'd like to follow the approach of past years.
> This basically consists of a few beta releases, followed by a release
> candidate when things seem to be in good shape. ?The release candidates
> would be voted on by the PSC before becoming official.
>
> Anyone with significant work they would like to accomplish before 1.9.0
> should reply to this thread with information on the planned work.
>
> Barring objections, I'll plan on a Beta 1 this weekend.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/warmerda
> and watch the world go round - Rush ? ?| Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Wed Dec 14 17:02:29 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Dec 14 17:02:39 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <CA+TxYvNf1T9c6UXanijoKqi3gk1oVa-ZFnfB72ubFoEMwYtFeA@mail.gmail.com>
References: <4EE7AD0B.1040207@hilboll.de>
	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
	<9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
	<CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>
	<CA+TxYvNf1T9c6UXanijoKqi3gk1oVa-ZFnfB72ubFoEMwYtFeA@mail.gmail.com>
Message-ID: <CAMKgpOY0_kTazchv2A91Fk3RKVNDJCNV=gRzo4oX6qftT+ab7w@mail.gmail.com>

Hi,

gdaladdo [1] provides some more interpolation methods. It is designed
specifically for down-sampling.
To create a new GeoTIFF, use it with the -ro option and the levels set to
2,4,8 and 15.
The value 15 makes sure you get an overview at 1/15 th of the original
resolution.

[1]: http://www.gdal.org/gdaladdo.html

On Thu, Dec 15, 2011 at 3:06 AM, Etienne Tourigny
<etourigny.dev@gmail.com>wrote:

> The only option that you do *not* have is "mode" (the dominant value),
> which can be useful in the case of categorical (integer) data.  That
> question has been answered here:
>
> http://www.osgeo.org/pipermail/gdal-dev/2011-August/029692.html
>
> On Wed, Dec 14, 2011 at 1:35 PM, Travis Kirstine
> <traviskirstine@gmail.com> wrote:
> > Andreas,
> >
> > Yes gdalwarp support various resampling methods
> >
> > To use different resampling methods use the -r flag followed by the
> method
> >
> > eg
> >
> > gdalwarp -r near ..............
> > gdalwarp -r bilinear .............
> >
> > etc...
> >
> >
> >
> >
> > On 14 December 2011 08:26, Andreas H. <lists@hilboll.de> wrote:
> >> Travis,
> >>
> >> thanks for your answer!
> >>
> >> Regarding the resampling methods: Do they all just interpolate the
> data? I
> >> mean, when downsampling, usually I would use mean() or something similar
> >> to fill the new (coarser) grid cells. Doas gdalwarp actually do this and
> >> I'm not able to understand the documentation, or is it different?
> >>
> >> Thanks again!
> >> Andreas.
> >>
> >>
> >>> Andreas,
> >>>
> >>> gdalwarp can be used to resample images using the -tr flag or -ts flag.
> >>>
> >>> For example resample 1m image to 10m using cubic resampling and
> >>> "target resolution'
> >>>
> >>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
> >>>
> >>> You may have an issue determining the output resolution as I believe
> >>> the resolution will be in decimal degrees rather than arc-seconds.
> >>>
> >>> Regards
> >>>
> >>> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
> >>>> Hi,
> >>>>
> >>>> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
> >>>> resolution. Which would be the appropriate GDAL command to spatially
> >>>> down-sample this file to say 0.125??
> >>>>
> >>>> Thanks for your insight,
> >>>> Andreas.
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/8652524b/attachment.html
From yehil at rafael.co.il  Thu Dec 15 01:21:30 2011
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu Dec 15 01:23:41 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <4EE850CA.2070903@pobox.com>
References: <4EE850CA.2070903@pobox.com>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0A28E1699EE@MAILBOXSERVER.rf.local>


Hi

Is Ticket #4340<http://trac.osgeo.org/gdal/ticket/4340> going to be addressed before the 1.9 release?



Thanks

Yehiyam



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Wednesday, December 14, 2011 9:31 AM
To: gdal-dev
Subject: [gdal-dev] 1.9 Release Process



Folks,



I would like to have a GDAL/OGR 1.9 release by the end of this year,

ideally before Christmas.  We have not formalized a release process

for the project, but I'd like to follow the approach of past years.

This basically consists of a few beta releases, followed by a release

candidate when things seem to be in good shape.  The release candidates

would be voted on by the PSC before becoming official.



Anyone with significant work they would like to accomplish before 1.9.0

should reply to this thread with information on the planned work.



Barring objections, I'll plan on a Beta 1 this weekend.



Best regards,

--

---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com

light and sound - activate the windows | http://pobox.com/warmerda

and watch the world go round - Rush    | Geospatial Software Developer



_______________________________________________

gdal-dev mailing list

gdal-dev@lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev

**********************************************************************************************
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. 
(hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may 
constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not 
the intended recipient, you should contact us immediately and thereafter delete this message from your 
system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this 
message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, 
please notify us immediately by e-mail mailto:lawraf@rafael.co.il and completely delete or destroy any and all 
electronic or other copies of the original message and any attachments thereof.
**********************************************************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/aff027ef/attachment-0001.html
From skyhisi at gmail.com  Thu Dec 15 06:11:46 2011
From: skyhisi at gmail.com (Silas Parker)
Date: Thu Dec 15 06:11:52 2011
Subject: [gdal-dev] GDAL 1.9 Status
Message-ID: <CAPB+iVd8=eyLf4EPZm7WGdv=gbfS+s3Cehd56L3UYtHNweYwdA@mail.gmail.com>

Hello,

Is there any rough estimate on when GDAL/OGR 1.9 will be released ?

Thanks,
Silas
From alexander.bruy at gmail.com  Thu Dec 15 06:21:15 2011
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu Dec 15 06:21:59 2011
Subject: [gdal-dev] GDAL 1.9 Status
In-Reply-To: <CAPB+iVd8=eyLf4EPZm7WGdv=gbfS+s3Cehd56L3UYtHNweYwdA@mail.gmail.com>
References: <CAPB+iVd8=eyLf4EPZm7WGdv=gbfS+s3Cehd56L3UYtHNweYwdA@mail.gmail.com>
Message-ID: <CALuHMPAbFUi4gFq6kO8TZeaSbpZGcSnWxot_3R_VPMm5xhdmXA@mail.gmail.com>

See here http://osgeo-org.1803224.n2.nabble.com/gdal-dev-1-9-Release-Process-td7092665.html

2011/12/15 Silas Parker <skyhisi@gmail.com>:
> Hello,
>
> Is there any rough estimate on when GDAL/OGR 1.9 will be released ?
>
> Thanks,
> Silas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Alexander Bruy
From meryemvrl at gmail.com  Thu Dec 15 06:49:49 2011
From: meryemvrl at gmail.com (mrym)
Date: Thu Dec 15 06:50:19 2011
Subject: [gdal-dev] Re: Runtime error on executing "OGRRegisterAll()"
	function.
In-Reply-To: <4B661D80.2090008@loskot.net>
References: <1264426245484-4453903.post@n2.nabble.com>
	<4B5EE128.3020806@loskot.net>
	<1264596958438-4466974.post@n2.nabble.com>
	<4B60E27B.40704@loskot.net> <4B661D80.2090008@loskot.net>
Message-ID: <1323949789335-7096855.post@n2.nabble.com>

Hi,
This has started happening to me also. When i call any function from gdal
library i get this error:
"Unhandled exception at 0x7264082a (msvcr90d.dll) in test.exe: 0xC0000005:
Access violation reading location 0x6973762f."
Error happens at iosfwd file at this function

    static int __CLRCALL_OR_CDECL compare(_In_count_(_Count) const _Elem
*_First1, _In_count_(_Count)
    const _Elem *_First2, size_t _Count){
        	// compare [_First1, _First1 + _Count) with [_First2, ...)
                //  _DEBUG_POINTER(_First1);
                //  _DEBUG_POINTER(_First2);
	        return (::memcmp(_First1, _First2, _Count));        
<----------------i get error at this line
    }
I also built gdal with /MDd option but i still get this error. Any help will
be appreciated. Thanks in advance..

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Runtime-error-on-executing-OGRRegisterAll-function-tp4453903p7096855.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From lists at hilboll.de  Thu Dec 15 08:00:50 2011
From: lists at hilboll.de (Andreas H.)
Date: Thu Dec 15 08:01:02 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <B9DCB987-A958-4CD2-B3E1-D3E74C38643F@gmail.com>
References: <4EE7AD0B.1040207@hilboll.de>
	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
	<9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
	<CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>
	<4EE8EBC0.9070409@hilboll.de>
	<B9DCB987-A958-4CD2-B3E1-D3E74C38643F@gmail.com>
Message-ID: <5423e6e09b70ff44f314e2b92c5b6b24.squirrel@srv2.s4y.tournesol-consulting.eu>

Joaquim,

> nearneighbor is not really a good thing to use. Grid it with surface.

What do you mean by "grid it with surface"? In my GDAL (1.8.1), I only
have the following choices:

   Available resampling methods:
       near (default), bilinear, cubic, cubicspline, lanczos.

thanks for your insight,

Andreas.

>
> Joaquim
>
> Sent from my iPadiola
>
> On 14/12/2011, at 18:32, "Andreas H." <lists@hilboll.de> wrote:
>
>> Travis,
>>
>> yes, thanks, I had already found that in the documentation. I'm just
>> wondering what e.g. 'bilinear' means when I go from a fine to a coarse
>> grid? If GDAL works in terms of "nodes", then I would assume 'bilinear'
>> means interpolation, which in turn would be a very different result from
>> working in terms of "cells" and then taking e.g. the average of all
>> "old" cells in the "new" grid.
>>
>> I hope you see my problem / question.
>>
>> Thanks for you insight,
>> Andreas.
>>
>> Am 14.12.2011 16:35, schrieb Travis Kirstine:
>>> Andreas,
>>>
>>> Yes gdalwarp support various resampling methods
>>>
>>> To use different resampling methods use the -r flag followed by the
>>> method
>>>
>>> eg
>>>
>>> gdalwarp -r near ..............
>>> gdalwarp -r bilinear .............
>>>
>>> etc...
>>>
>>>
>>>
>>>
>>> On 14 December 2011 08:26, Andreas H. <lists@hilboll.de> wrote:
>>>> Travis,
>>>>
>>>> thanks for your answer!
>>>>
>>>> Regarding the resampling methods: Do they all just interpolate the
>>>> data? I
>>>> mean, when downsampling, usually I would use mean() or something
>>>> similar
>>>> to fill the new (coarser) grid cells. Doas gdalwarp actually do this
>>>> and
>>>> I'm not able to understand the documentation, or is it different?
>>>>
>>>> Thanks again!
>>>> Andreas.
>>>>
>>>>
>>>>> Andreas,
>>>>>
>>>>> gdalwarp can be used to resample images using the -tr flag or -ts
>>>>> flag.
>>>>>
>>>>> For example resample 1m image to 10m using cubic resampling and
>>>>> "target resolution'
>>>>>
>>>>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
>>>>>
>>>>> You may have an issue determining the output resolution as I believe
>>>>> the resolution will be in decimal degrees rather than arc-seconds.
>>>>>
>>>>> Regards
>>>>>
>>>>> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
>>>>>> Hi,
>>>>>>
>>>>>> let's say I have a GeoTIFF file with a global grid in a 30
>>>>>> arc-second
>>>>>> resolution. Which would be the appropriate GDAL command to spatially
>>>>>> down-sample this file to say 0.125??
>>>>>>
>>>>>> Thanks for your insight,
>>>>>> Andreas.
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>


From knutfrodesoppel at hotmail.com  Thu Dec 15 09:47:47 2011
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Thu Dec 15 09:48:21 2011
Subject: [gdal-dev] Warping onto an image with only GCPs
Message-ID: <jcd1aj$vil$1@dough.gmane.org>

Hi,

Hr?bjartur ?orsteinsson explained to me a near-hidden feature of GDAL, 
namely to reproject one image onto the coverage of another.

Given two images:
imageA.tiff
imageB.tiff

Then an empty image can be created from image A with e.g.
$ gdal_translate -ot Float32 -scale 0 0 999 999 -a_nodata 999 
imageA.tiff domainA.tiff

And then imageB can be warped onto the extent of this image simply with:
$ gdalwarp imageB.tiff domainA.tiff

domainA.tiff will then contain the data from imageB, exactly co-located 
with imageA.

The problem is that this only works when imageA contains a geotransform, 
and not when it contains only GCPs.


So my question is:
Is there any workaround to warp data from one image onto another image 
which is geolocated by GCPs only?



With the -to option of gdalwarp it is possible to pass some parameters 
to GDALCreateGenImgProjTransformer2(). In the documentation of this 
function I find the following option:

"METHOD: may have a value which is one of GEOTRANSFORM, GCP_POLYNOMIAL, 
GCP_TPS, GEOLOC_ARRAY, RPC to force only one geolocation method to be 
considered on the source dataset."
http://www.gdal.org/gdal__alg_8h.html#94cd172f78dbc41d6f407d662914f2e3

But there is no corresponding option to force use of GCP_POLYNOMIAL for 
the *destination* dataset. I guess this is a bad sign?


Thank you for any help!
Knut-Frode

From mateusz at loskot.net  Thu Dec 15 09:54:34 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Dec 15 09:55:14 2011
Subject: [gdal-dev] Re: Runtime error on executing "OGRRegisterAll()"
	function.
In-Reply-To: <1323949789335-7096855.post@n2.nabble.com>
References: <1264426245484-4453903.post@n2.nabble.com>
	<4B5EE128.3020806@loskot.net>
	<1264596958438-4466974.post@n2.nabble.com>
	<4B60E27B.40704@loskot.net> <4B661D80.2090008@loskot.net>
	<1323949789335-7096855.post@n2.nabble.com>
Message-ID: <CABUeae81dcd1qje4Mysd_Q-=b=uJOJ8v7VRPqNeEWKojr_5Y_g@mail.gmail.com>

On 15 December 2011 11:49, mrym <meryemvrl@gmail.com> wrote:
> Hi,
> This has started happening to me also. When i call any function from gdal
> library i get this error:
> "Unhandled exception at 0x7264082a (msvcr90d.dll) in test.exe: 0xC0000005:
> Access violation reading location 0x6973762f."
> Error happens at iosfwd file at this function
>
> ? ?static int __CLRCALL_OR_CDECL compare(_In_count_(_Count) const _Elem
> *_First1, _In_count_(_Count)
> ? ?const _Elem *_First2, size_t _Count){
> ? ? ? ? ? ? ? ?// compare [_First1, _First1 + _Count) with [_First2, ...)
> ? ? ? ? ? ? ? ?// ?_DEBUG_POINTER(_First1);
> ? ? ? ? ? ? ? ?// ?_DEBUG_POINTER(_First2);
> ? ? ? ? ? ? ? ?return (::memcmp(_First1, _First2, _Count));
> <----------------i get error at this line
> ? ?}

I'm suspicious it is crashing near std::map and the crash is due to
mixed variants of C/C++ runt-ime indeed.

It would be good if you can post a minimal complete test program crashing
with this error and don't forget to add compilation flags you used to build it.

#include <.<your headers here..>
int main()
{
your code here
}

> I also built gdal with /MDd option but i still get this error. Any help will
> be appreciated. Thanks in advance..

Did you just changed flags and build or was it clean and complete *rebuild*?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From meryemvrl at gmail.com  Thu Dec 15 10:33:02 2011
From: meryemvrl at gmail.com (mrym)
Date: Thu Dec 15 10:33:24 2011
Subject: [gdal-dev] Re: Runtime error on executing "OGRRegisterAll()"
	function.
In-Reply-To: <CABUeae81dcd1qje4Mysd_Q-=b=uJOJ8v7VRPqNeEWKojr_5Y_g@mail.gmail.com>
References: <1264426245484-4453903.post@n2.nabble.com>
	<4B5EE128.3020806@loskot.net>
	<1264596958438-4466974.post@n2.nabble.com>
	<4B60E27B.40704@loskot.net> <4B661D80.2090008@loskot.net>
	<1323949789335-7096855.post@n2.nabble.com>
	<CABUeae81dcd1qje4Mysd_Q-=b=uJOJ8v7VRPqNeEWKojr_5Y_g@mail.gmail.com>
Message-ID: <1323963182037-7097491.post@n2.nabble.com>

Here is my command line:

/Od /I "E:\BELGIS\gdal-1.7.2\libecwj2-3.3\Source\include" /I
"C:\mrym\warmerda\bld\include" /D "WIN32" /D "_DEBUG" /D "_WINDOWS" /D
"_USRDLL" /D "BELGDAL_EXPORTS" /D "_WINDLL" /D "_UNICODE" /D "UNICODE" /Gm
/EHsc /RTC1 /MDd /Fo"Debug\\" /Fd"Debug\vc90.pdb" /W3 /nologo /c /ZI /Gd /TP
/errorReport:prompt

*Here is my test code:*

   #include <iostream>
   #include <windows.h>
   #include <tchar.h>

   typedef void (*ProjectPointCall)();

   int main(){
      set_PGdal_ProjType_In _set_PGdal_ProjType_In;
      set_PGdal_ProjType_Out _set_PGdal_ProjType_Out;
      ProjectPointCall _ProjectPointCall;
      HINSTANCE hInstLibrary = LoadLibrary(_T("belGdal.dll"));

      if (hInstLibrary){
	  _ProjectPointCall=(ProjectPointCall)GetProcAddress(hInstLibrary,
"ProjectPointCall");	       
	  _ProjectPointCall();
	  FreeLibrary(hInstLibrary);
      }
      else{
        std::cout << "DLL Failed To Load!" << std::endl;
       }
  
      return 0;
   }

*This is _ProjectPointCall():*

   void __cdecl ProjectPointCall(){
	double *aXOut= new double; 
	double *aYOut= new double; 
        Gdal_ProjectPoint( 0.0,  0.0, p_ProjType_In, p_ProjType_Out,  aXOut,
aYOut );
   }

*p_ProjType_In, p_ProjType_Out are static variables.

This is Gdal_ProjectPoint function:*

   bool __stdcall Gdal_ProjectPoint(double aXIn, double aYIn, const
PGdal_ProjType aProjIn, const      
   PGdal_ProjType  aProjOut, double* aXOut, double* aYOut ){

       bool changeProjSrc, changeProjDest;
       int datumCount = g_EPSGDatums.GetSize();
       GDALAllRegister();
       if(datumCount == 0)
          SetupEPSGDatums();
       ....
    }

When i debug it i get error at  GDALAllRegister(). I've tried debugging
other functions in my dll and all gdal function calls gave me the same
error. 

And i have changed flags and built it in this way
  
   nmake -f makefile.vc clean
   nmake -f makefile.vc MSVC_VER=1500 DEBUG=1
   nmake /f makefile.vc install
   nmake /f makefile.vc devinstall 

Thanks a lot.. 

  




--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Runtime-error-on-executing-OGRRegisterAll-function-tp4453903p7097491.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mather.stephen at gmail.com  Thu Dec 15 11:49:35 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Thu Dec 15 11:49:57 2011
Subject: [gdal-dev] Slope in gdaldem
Message-ID: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>

Hi All,
      A colleague tipped me off to an article in Forestry Source entitled
"When GIS Slope Isn't What You Think" showing differences between field
measured slope values and GIS results.  The differences can be
substantial.  The short and long of it is that local hydrologic slope is
closer to what's used in the field by foresters than the integrated slope
from either Horn or Zevenbergen-Thorne.
      And so, I have a feature request.  I would like to add hydrologic
slope to gdaldem.  This is max local slope rather than integrated 9 cell
slope like the existing code:

The existing code for Horn, e.g. is:

    dx = ((afWin[0] + afWin[3] + afWin[3] + afWin[6]) -
          (afWin[2] + afWin[5] + afWin[5] + afWin[8]))/psData->ewres;

    dy = ((afWin[6] + afWin[7] + afWin[7] + afWin[8]) -
          (afWin[0] + afWin[1] + afWin[1] + afWin[2]))/psData->nsres;

I'd like something more like this (adapted from roughness):

float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)
{
    // Hydrologic Slope is the max
    //  local slope btw center cell and adjacent cells

    float pafLocalMax = afWin[0];

    for ( int k = 1; k < 9; k++)
    {
        if (afWin[k] > pafLocalMax)
        {
            pafLocalMax=afWin[k];
        }
    }
    return pafLocalMax - afWin[4];
}

Any critques?  Reasons to not add?

Best,
Steve

Stephen Mather
GIS Manager
Cleveland Metroparks
4101 Fulton Pkwy
Cleveland, OH
44144
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/37cf78d2/attachment.html
From mateusz at loskot.net  Thu Dec 15 12:08:58 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu Dec 15 12:09:30 2011
Subject: [gdal-dev] Re: Runtime error on executing "OGRRegisterAll()"
	function.
In-Reply-To: <1323963182037-7097491.post@n2.nabble.com>
References: <1264426245484-4453903.post@n2.nabble.com>
	<4B5EE128.3020806@loskot.net>
	<1264596958438-4466974.post@n2.nabble.com>
	<4B60E27B.40704@loskot.net> <4B661D80.2090008@loskot.net>
	<1323949789335-7096855.post@n2.nabble.com>
	<CABUeae81dcd1qje4Mysd_Q-=b=uJOJ8v7VRPqNeEWKojr_5Y_g@mail.gmail.com>
	<1323963182037-7097491.post@n2.nabble.com>
Message-ID: <CABUeae8KWWFvnZdd1atqR+0bnC6uGMYcpVtb_U8deLwOooo+Tw@mail.gmail.com>

On 15 December 2011 15:33, mrym <meryemvrl@gmail.com> wrote:
> And i have changed flags and built it in this way
>
> ? nmake -f makefile.vc clean
> ? nmake -f makefile.vc MSVC_VER=1500 DEBUG=1

Edit nmake.opt
In "debug" version of OPTFLAGS flags, replace /MD with /MDd
Rebuild GDAL
Rebuild your library and program.
Check if it .helps.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From mladen-g at distributel.net  Thu Dec 15 12:08:26 2011
From: mladen-g at distributel.net (mladen-g@distributel.net)
Date: Thu Dec 15 12:14:34 2011
Subject: [gdal-dev] gdal_translate to TIFF -- color mismatch
Message-ID: <20111215100826.1956482r80r4k5my@webmail.distributel.net>

Hi all,

I am trying to use gdal_translate to convert a .grd file  
(Northwood/VerticalMapper format) to TIFF.  However, the colors in the  
translated file don't seem to be interpolated correctly based on the  
color scheme, for values near the end of the range.

Here is a link to the original GRD, as well as the exported TIFFs  
(small download, only 200K):   
http://dl.dropbox.com/u/53500018/GdalQuestion.zip

The GdalTranslateExport.tif file was produced with the command
"gdal_translate -b 1 -b 2 -b 3  
C:\source\Ottawa_east_DEM30m_trim_copy.grd  
C:\temp\GdalTranslateExport.tif".

Notice the top and bottom areas of the image:  they are yellow.  For  
comparison, take a look at the NativeExport.tif file in the same  
package.  The top and bottom areas are orange, as they should be.  The  
NativeExport.tif file was produced by Pitney Bowes MapInfo.

Here is the color scheme for the GRD:   
http://www.smugmug.com/photos/i-bRZ879w/0/X3/i-bRZ879w-X3.jpg

Notice that the thresholds are "70" for yellow, and "161" for orange.   
Well, the values at the top and bottom are in the high 130s/low 140s.   
So they should be interpolated close to orange, not yellow.  Therefore  
the NativeExport.tif is correct, and the gdal_translate export is  
incorrect.

I have also tried changing the thresholds, and as soon as I change the  
orange threshold to be below the maximum actual value in the GRD  
(let's say 144), the gdal_translate export shows the orange shades.

So, it seems there might be a bug in gdal_translate where color values  
are not interpolated correctly for thresholds that fall outside of the  
range of actual values?  Or is there a way to make gdal_translate  
behave the way that I want with some different command line options?

Regards,
Mladen Gavrilovic

P.S.  For convenience, here is a gallery with the TIFFs converted to  
JPEG (difference is still obvious), and the color scheme:   
http://smu.gs/vMEemF

P.P.S  Version of GDAL is 1.8.1

----------------------------------------------------------------
This message was sent using Distributel Webmail.
Ce message a ?t? envoy? ? partir de la Messagerie Web Distributel.


From bmcrae at tnc.org  Thu Dec 15 12:21:11 2011
From: bmcrae at tnc.org (bhmcrae)
Date: Thu Dec 15 12:21:34 2011
Subject: [gdal-dev] extra spaces when writing to AAIGRID format
Message-ID: <1323969671860-7097852.post@n2.nabble.com>

Hi,

I'm having problems with GDAL inserting leading spaces when writing from a
numpy array to ESRI ASCII Grid format.

The problem occurs whenever there are integers in the array (even though the
array itself is floating point).

E.g., if I try to write a 3x3 grid that ArcGIS can read, it needs to look
something like this:

ncols        3
nrows        3
xllcorner    100.000000000000
yllcorner    100.000000000000
cellsize     0.000010000000
1.00000000000000000 1.4809201955795288 1.4809201955795288 
0.11773009598255157 0.15476560592651367 0.86710774898529053 
0.17429724335670471 0.76037305593490601 10.00000000000000

Instead, the ascii file written by GDAL looks like this (which can't be read
by ArcGIS because of extra leading spaces in the first line of the data):


ncols        5
nrows        5
xllcorner    100.000000000000
yllcorner    100.000000000000
cellsize     0.000010000000
      1 1.4809201955795288 1.4809201955795288 
 0.25947147607803345 0.71342569589614868 2.8101832866668701 
 0.11773009598255157 0.15476560592651367 0.86710774898529053 
 0.17429724335670471 0.76037305593490601     10 0.74458205699920654 

Here is the code I have been trying to use:

format = "MEM"
driver = gdal.GetDriverByName( format )      
dst_ds = driver.Create( file, len(data[0]), len(data),1,gdal.GDT_Float32)
dst_ds.SetGeoTransform([xllcorner, cellsize, 0, ull, 0, cellsize])
dst_ds.GetRasterBand(1).WriteArray(data)
format = 'AAIGrid'
driver = gdal.GetDriverByName(format)
dst_ds_new = driver.CreateCopy(file, dst_ds) 
dst_ds = None


I've seen this problem on various versions of python going back at least 3
years, so have relied on the much slower numpy.savetxt command instead of
using GDAL.

Any thoughts on how to make this work?

Thanks!
Brad







--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/extra-spaces-when-writing-to-AAIGRID-format-tp7097852p7097852.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rush at winkey.org  Thu Dec 15 12:23:05 2011
From: rush at winkey.org (Brian Case)
Date: Thu Dec 15 12:23:41 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <5423e6e09b70ff44f314e2b92c5b6b24.squirrel@srv2.s4y.tournesol-consulting.eu>
References: <4EE7AD0B.1040207@hilboll.de>
	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
	<9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
	<CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>
	<4EE8EBC0.9070409@hilboll.de>
	<B9DCB987-A958-4CD2-B3E1-D3E74C38643F@gmail.com>
	<5423e6e09b70ff44f314e2b92c5b6b24.squirrel@srv2.s4y.tournesol-consulting.eu>
Message-ID: <1323969785.4947.1.camel@octopi>

Andreas

I think thats referring to my suggestion of GMT to do part of the work






On Thu, 2011-12-15 at 14:00 +0100, Andreas H. wrote:
> Joaquim,
> 
> > nearneighbor is not really a good thing to use. Grid it with surface.
> 
> What do you mean by "grid it with surface"? In my GDAL (1.8.1), I only
> have the following choices:
> 
>    Available resampling methods:
>        near (default), bilinear, cubic, cubicspline, lanczos.
> 
> thanks for your insight,
> 
> Andreas.
> 
> >
> > Joaquim
> >
> > Sent from my iPadiola
> >
> > On 14/12/2011, at 18:32, "Andreas H." <lists@hilboll.de> wrote:
> >
> >> Travis,
> >>
> >> yes, thanks, I had already found that in the documentation. I'm just
> >> wondering what e.g. 'bilinear' means when I go from a fine to a coarse
> >> grid? If GDAL works in terms of "nodes", then I would assume 'bilinear'
> >> means interpolation, which in turn would be a very different result from
> >> working in terms of "cells" and then taking e.g. the average of all
> >> "old" cells in the "new" grid.
> >>
> >> I hope you see my problem / question.
> >>
> >> Thanks for you insight,
> >> Andreas.
> >>
> >> Am 14.12.2011 16:35, schrieb Travis Kirstine:
> >>> Andreas,
> >>>
> >>> Yes gdalwarp support various resampling methods
> >>>
> >>> To use different resampling methods use the -r flag followed by the
> >>> method
> >>>
> >>> eg
> >>>
> >>> gdalwarp -r near ..............
> >>> gdalwarp -r bilinear .............
> >>>
> >>> etc...
> >>>
> >>>
> >>>
> >>>
> >>> On 14 December 2011 08:26, Andreas H. <lists@hilboll.de> wrote:
> >>>> Travis,
> >>>>
> >>>> thanks for your answer!
> >>>>
> >>>> Regarding the resampling methods: Do they all just interpolate the
> >>>> data? I
> >>>> mean, when downsampling, usually I would use mean() or something
> >>>> similar
> >>>> to fill the new (coarser) grid cells. Doas gdalwarp actually do this
> >>>> and
> >>>> I'm not able to understand the documentation, or is it different?
> >>>>
> >>>> Thanks again!
> >>>> Andreas.
> >>>>
> >>>>
> >>>>> Andreas,
> >>>>>
> >>>>> gdalwarp can be used to resample images using the -tr flag or -ts
> >>>>> flag.
> >>>>>
> >>>>> For example resample 1m image to 10m using cubic resampling and
> >>>>> "target resolution'
> >>>>>
> >>>>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
> >>>>>
> >>>>> You may have an issue determining the output resolution as I believe
> >>>>> the resolution will be in decimal degrees rather than arc-seconds.
> >>>>>
> >>>>> Regards
> >>>>>
> >>>>> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
> >>>>>> Hi,
> >>>>>>
> >>>>>> let's say I have a GeoTIFF file with a global grid in a 30
> >>>>>> arc-second
> >>>>>> resolution. Which would be the appropriate GDAL command to spatially
> >>>>>> down-sample this file to say 0.125??
> >>>>>>
> >>>>>> Thanks for your insight,
> >>>>>> Andreas.
> >>>>>> _______________________________________________
> >>>>>> gdal-dev mailing list
> >>>>>> gdal-dev@lists.osgeo.org
> >>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>>>
> >>>>
> >>>>
> >>>> _______________________________________________
> >>>> gdal-dev mailing list
> >>>> gdal-dev@lists.osgeo.org
> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jluis at ualg.pt  Thu Dec 15 12:57:25 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Dec 15 12:58:23 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <1323969785.4947.1.camel@octopi>
References: <4EE7AD0B.1040207@hilboll.de>	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>	<9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>	<CALtm4h38WuW8QimZD5fonLkWONB+TG6rvf-_qoo5SVzDcF5HLA@mail.gmail.com>	<4EE8EBC0.9070409@hilboll.de>	<B9DCB987-A958-4CD2-B3E1-D3E74C38643F@gmail.com>	<5423e6e09b70ff44f314e2b92c5b6b24.squirrel@srv2.s4y.tournesol-consulting.eu>
	<1323969785.4947.1.camel@octopi>
Message-ID: <4EEA3505.1030909@ualg.pt>

Sorry for the noise that I introduced by mixing the GDAL and GMT's 
lists. I already replied to Andreas only because I though my message 
went only to him, but since it didn't here is a copy of it.

Joaquim

"
Andreas,
I'm very sorry but I sent that message to you by mistake as it was meant 
as a reply to another question in the GMT list. But since we are at it, 
your case is also probably better suite for GMT than GDAL. In GMT you 
have 'grdsample' to resample your grid or, if you really want to do 
things the correct way to avoid aliasing since you are going from high 
to lower resolution, 'grdfilter'.
Note that with GMT5 built with GDAL support you can read you grid 
directly but you are more limited on output formats (mostly netCDF).
"


> Andreas
>
> I think thats referring to my suggestion of GMT to do part of the work
>
>
>
>
>
>
> On Thu, 2011-12-15 at 14:00 +0100, Andreas H. wrote:
>> Joaquim,
>>
>>> nearneighbor is not really a good thing to use. Grid it with surface.
>> What do you mean by "grid it with surface"? In my GDAL (1.8.1), I only
>> have the following choices:
>>
>>     Available resampling methods:
>>         near (default), bilinear, cubic, cubicspline, lanczos.
>>
>> thanks for your insight,
>>
>> Andreas.
>>
>>> Joaquim
>>>
>>> Sent from my iPadiola
>>>
>>> On 14/12/2011, at 18:32, "Andreas H."<lists@hilboll.de>  wrote:
>>>
>>>> Travis,
>>>>
>>>> yes, thanks, I had already found that in the documentation. I'm just
>>>> wondering what e.g. 'bilinear' means when I go from a fine to a coarse
>>>> grid? If GDAL works in terms of "nodes", then I would assume 'bilinear'
>>>> means interpolation, which in turn would be a very different result from
>>>> working in terms of "cells" and then taking e.g. the average of all
>>>> "old" cells in the "new" grid.
>>>>
>>>> I hope you see my problem / question.
>>>>
>>>> Thanks for you insight,
>>>> Andreas.
>>>>
>>>> Am 14.12.2011 16:35, schrieb Travis Kirstine:
>>>>> Andreas,
>>>>>
>>>>> Yes gdalwarp support various resampling methods
>>>>>
>>>>> To use different resampling methods use the -r flag followed by the
>>>>> method
>>>>>
>>>>> eg
>>>>>
>>>>> gdalwarp -r near ..............
>>>>> gdalwarp -r bilinear .............
>>>>>
>>>>> etc...
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> On 14 December 2011 08:26, Andreas H.<lists@hilboll.de>  wrote:
>>>>>> Travis,
>>>>>>
>>>>>> thanks for your answer!
>>>>>>
>>>>>> Regarding the resampling methods: Do they all just interpolate the
>>>>>> data? I
>>>>>> mean, when downsampling, usually I would use mean() or something
>>>>>> similar
>>>>>> to fill the new (coarser) grid cells. Doas gdalwarp actually do this
>>>>>> and
>>>>>> I'm not able to understand the documentation, or is it different?
>>>>>>
>>>>>> Thanks again!
>>>>>> Andreas.
>>>>>>
>>>>>>
>>>>>>> Andreas,
>>>>>>>
>>>>>>> gdalwarp can be used to resample images using the -tr flag or -ts
>>>>>>> flag.
>>>>>>>
>>>>>>> For example resample 1m image to 10m using cubic resampling and
>>>>>>> "target resolution'
>>>>>>>
>>>>>>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
>>>>>>>
>>>>>>> You may have an issue determining the output resolution as I believe
>>>>>>> the resolution will be in decimal degrees rather than arc-seconds.
>>>>>>>
>>>>>>> Regards
>>>>>>>
>>>>>>> On 13 December 2011 14:52, Andreas H.<lists@hilboll.de>  wrote:
>>>>>>>> Hi,
>>>>>>>>
>>>>>>>> let's say I have a GeoTIFF file with a global grid in a 30
>>>>>>>> arc-second
>>>>>>>> resolution. Which would be the appropriate GDAL command to spatially
>>>>>>>> down-sample this file to say 0.125??
>>>>>>>>
>>>>>>>> Thanks for your insight,
>>>>>>>> Andreas.
>>>>>>>> _______________________________________________
>>>>>>>> gdal-dev mailing list
>>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From tkeitt at gmail.com  Thu Dec 15 13:16:17 2011
From: tkeitt at gmail.com (Tim Keitt)
Date: Thu Dec 15 13:17:09 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
References: <4EE7AD0B.1040207@hilboll.de>
	<CALtm4h1NdZWmkTx6+3D+6Soe9Hsd9EpnvEZFrk=xFOYuZeA4ZA@mail.gmail.com>
	<9b16e72fc448a9b6dac8649e9c41b178.squirrel@srv2.s4y.tournesol-consulting.eu>
Message-ID: <CANnL8gqfdU85raY27GaWPsR=hisOs7dYAmjQ1s__VZ0ZXyAMZw@mail.gmail.com>

If you need complete control, and your data are not too massive in
number, I have had good results pushing pixel coordinates as points
into postgis and then using spatial queries to aggregate in various
ways (eg averages a hexagonal grid). It seems round-about, but it
works. I've actually done it on some pretty massive grids.

THK

On Wed, Dec 14, 2011 at 7:26 AM, Andreas H. <lists@hilboll.de> wrote:
> Travis,
>
> thanks for your answer!
>
> Regarding the resampling methods: Do they all just interpolate the data? I
> mean, when downsampling, usually I would use mean() or something similar
> to fill the new (coarser) grid cells. Doas gdalwarp actually do this and
> I'm not able to understand the documentation, or is it different?
>
> Thanks again!
> Andreas.
>
>
>> Andreas,
>>
>> gdalwarp can be used to resample images using the -tr flag or -ts flag.
>>
>> For example resample 1m image to 10m using cubic resampling and
>> "target resolution'
>>
>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
>>
>> You may have an issue determining the output resolution as I believe
>> the resolution will be in decimal degrees rather than arc-seconds.
>>
>> Regards
>>
>> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
>>> Hi,
>>>
>>> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
>>> resolution. Which would be the appropriate GDAL command to spatially
>>> down-sample this file to say 0.125??
>>>
>>> Thanks for your insight,
>>> Andreas.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Timothy H. Keitt
http://www.keittlab.org/
From mather.stephen at gmail.com  Thu Dec 15 13:29:31 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Thu Dec 15 13:29:39 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>
Message-ID: <CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>

I already see a flaw-- the function should be more like:

float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)
{
    // Hydrologic Slope is the max
    //  local slope btw center cell and adjacent cells

    const double radiansToDegrees = 180.0 / M_PI;
    GDALSlopeAlgData* psData = (GDALSlopeAlgData*)pData;

    float pafLocalMax = afWin[0];

    for ( int k = 1; k < 9; k++)
    {
        if (afWin[k] > pafLocalMax)
        {
            pafLocalMax=afWin[k];
        }
    }
    return atan(sqrt(pafLocalMax - afWin[4]) / (2*psData->scale)) *
radiansToDegrees;
}



On Thu, Dec 15, 2011 at 11:49 AM, Stephen Mather
<mather.stephen@gmail.com>wrote:

> Hi All,
>       A colleague tipped me off to an article in Forestry Source entitled
> "When GIS Slope Isn't What You Think" showing differences between field
> measured slope values and GIS results.  The differences can be
> substantial.  The short and long of it is that local hydrologic slope is
> closer to what's used in the field by foresters than the integrated slope
> from either Horn or Zevenbergen-Thorne.
>       And so, I have a feature request.  I would like to add hydrologic
> slope to gdaldem.  This is max local slope rather than integrated 9 cell
> slope like the existing code:
>
> The existing code for Horn, e.g. is:
>
>     dx = ((afWin[0] + afWin[3] + afWin[3] + afWin[6]) -
>           (afWin[2] + afWin[5] + afWin[5] + afWin[8]))/psData->ewres;
>
>     dy = ((afWin[6] + afWin[7] + afWin[7] + afWin[8]) -
>           (afWin[0] + afWin[1] + afWin[1] + afWin[2]))/psData->nsres;
>
> I'd like something more like this (adapted from roughness):
>
> float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)
> {
>     // Hydrologic Slope is the max
>     //  local slope btw center cell and adjacent cells
>
>     float pafLocalMax = afWin[0];
>
>     for ( int k = 1; k < 9; k++)
>     {
>         if (afWin[k] > pafLocalMax)
>         {
>             pafLocalMax=afWin[k];
>         }
>     }
>     return pafLocalMax - afWin[4];
> }
>
> Any critques?  Reasons to not add?
>
> Best,
> Steve
>
> Stephen Mather
> GIS Manager
> Cleveland Metroparks
> 4101 Fulton Pkwy
> Cleveland, OH
> 44144
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/3a8e530a/attachment-0001.html
From mather.stephen at gmail.com  Thu Dec 15 13:35:19 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Thu Dec 15 13:35:43 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>
	<CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>
Message-ID: <CAPkJWLXTfjqw3xe75=tQAFFNgLBB+UGaEf0mSt9jSL_GFpQCJQ@mail.gmail.com>

Apologies for the flurry, one more change:

float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)
{
    // Hydrologic Slope is the max
    //  local slope btw center cell and adjacent cells

    const double radiansToDegrees = 180.0 / M_PI;
    GDALSlopeAlgData* psData = (GDALSlopeAlgData*)pData;
    double key;

    float pafLocalMax = afWin[0];

    for ( int k = 1; k < 9; k++)
    {
        if (afWin[k] > pafLocalMax)
        {
            pafLocalMax=afWin[k];
        }
    }

    key = pafLocalMax - afWin[4];

    if (psData->slopeFormat == 1)
        return (float) (atan(sqrt(key) / (2*psData->scale)) *
radiansToDegrees);
    else
        return (float) (100*(sqrt(key) / (2*psData->scale)));
}

Best,
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/621c54d7/attachment.html
From perrygeo at gmail.com  Thu Dec 15 13:45:59 2011
From: perrygeo at gmail.com (Matt Perry)
Date: Thu Dec 15 13:46:11 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>
	<CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>
Message-ID: <CAG-GLBNeObVbNOe_tJEEvs1t1Nqm8Son-j13AnKKLa8tb-waDw@mail.gmail.com>

Stephen,


It'd be great to see local hydrologic slope in gdaldem.

I've seen a similar discrepancy between "field" slope and most
GIS-derived slopes. The local max hydrologic slope seems to correspond
much better to our perceived slope on the ground. The integrated slope
used in most GIS, however, better matches the overall planar slope
over a large extent. So they both have their place depending on scale;
local hydrologic max slope for the micro, integrated planar slope for
the macro.

However, I don't think the algorithm that you describe below will
work. It's currently looking for the *maximum* local elevation and
computing slope to the center cell. Instead it should calculate the
slope in the direction of hydrologic flow; i.e. the slope from the
center cell to surrounding cell with the *minimum* elevation.


- matt

On Thu, Dec 15, 2011 at 10:29 AM, Stephen Mather
<mather.stephen@gmail.com> wrote:
> I already see a flaw-- the function should be more like:
>
>
> float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)
> {
> ??? // Hydrologic Slope is the max
> ??? //? local slope btw center cell and adjacent cells
>
> ??? const double radiansToDegrees = 180.0 / M_PI;
> ??? GDALSlopeAlgData* psData = (GDALSlopeAlgData*)pData;
>
> ??? float pafLocalMax = afWin[0];
>
> ??? for ( int k = 1; k < 9; k++)
> ??? {
> ??????? if (afWin[k] > pafLocalMax)
> ??????? {
> ??????????? pafLocalMax=afWin[k];
> ??????? }
> ??? }
> ??? return atan(sqrt(pafLocalMax - afWin[4]) / (2*psData->scale)) *
> radiansToDegrees;
>
> }
>
>
>
> On Thu, Dec 15, 2011 at 11:49 AM, Stephen Mather <mather.stephen@gmail.com>
> wrote:
>>
>> Hi All,
>> ????? A colleague tipped me off to an article in Forestry Source entitled
>> "When GIS Slope Isn't What You Think" showing differences between field
>> measured slope values and GIS results.? The differences can be substantial.
>> The short and long of it is that local hydrologic slope is closer to what's
>> used in the field by foresters than the integrated slope from either Horn or
>> Zevenbergen-Thorne.
>> ????? And so, I have a feature request.? I would like to add hydrologic
>> slope to gdaldem.? This is max local slope rather than integrated 9 cell
>> slope like the existing code:
>>
>> The existing code for Horn, e.g. is:
>>
>> ??? dx = ((afWin[0] + afWin[3] + afWin[3] + afWin[6]) -
>> ????????? (afWin[2] + afWin[5] + afWin[5] + afWin[8]))/psData->ewres;
>>
>> ??? dy = ((afWin[6] + afWin[7] + afWin[7] + afWin[8]) -
>> ????????? (afWin[0] + afWin[1] + afWin[1] + afWin[2]))/psData->nsres;
>>
>> I'd like something more like this (adapted from roughness):
>>
>> float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)
>> {
>> ??? // Hydrologic Slope is the max
>> ??? //? local slope btw center cell and adjacent cells
>>
>> ??? float pafLocalMax = afWin[0];
>>
>> ??? for ( int k = 1; k < 9; k++)
>> ??? {
>> ??????? if (afWin[k] > pafLocalMax)
>> ??????? {
>> ??????????? pafLocalMax=afWin[k];
>> ??????? }
>> ??? }
>> ??? return pafLocalMax - afWin[4];
>> }
>>
>> Any critques?? Reasons to not add?
>>
>> Best,
>> Steve
>>
>> Stephen Mather
>> GIS Manager
>> Cleveland Metroparks
>> 4101 Fulton Pkwy
>> Cleveland, OH
>> 44144
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
???`?.?. , . .???`?.. ><((((?>`?.??.???`?.?.???`?...?><((((?>
"The best way to predict the future is to invent it."? -- Alan Kay
Matthew T. Perry
http://www.perrygeo.net
http://viedevelo.wordpress.com
From Doug_Newcomb at fws.gov  Thu Dec 15 13:39:09 2011
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Thu Dec 15 13:59:27 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <CANnL8gqfdU85raY27GaWPsR=hisOs7dYAmjQ1s__VZ0ZXyAMZw@mail.gmail.com>
Message-ID: <OFD8ADB6D4.156F114A-ON85257967.0064CB0B-85257967.00667634@fws.gov>

For what it's worth,

What do you consider large and what kind of method for downscaling you 
wish to use?

  I do this in GRASS using the r.neighbors command, 
http://grass.fbk.eu/grass64/manuals/html64_user/r.neighbors.html.   I've 
done an averaging method to convert a 20 ft elevation grid  ( statewide 
coverage)  of approximately 7 billion cells to an averaged 60 ft grid ( 
777 million cells)  by performing a 3x3 neighbor hood analysis  on the 20 
ft grid, setting the GRASS workspace resolution to 60 ft and multiplying 
the 20ft grid created by the  3x3 neighborhood analysis by 1 to create a 
new grid (
http://grass.fbk.eu/grass64/manuals/html64_user/r.mapcalculator.html)   . 
GRASS will take the value of the center averaged 20 ft cell in the 60ft 
block as the value of the cell in the new 60 ft raster. 

options for r.neigbors calculations are : 
average,median,mode,minimum,maximum,range,stddev,sum,variance,diversity,interspersion 



Doug


Doug Newcomb 
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the 
official policy of the U.S.Fish and Wildlife Service or Dept. of the 
Interior.   Life is too short for undocumented, proprietary data formats.



Tim Keitt <tkeitt@gmail.com> 
Sent by: gdal-dev-bounces@lists.osgeo.org
12/15/2011 01:17 PM

To
"Andreas H." <lists@hilboll.de>
cc
gdal-dev@lists.osgeo.org
Subject
Re: [gdal-dev] re-gridding to a coarser grid






If you need complete control, and your data are not too massive in
number, I have had good results pushing pixel coordinates as points
into postgis and then using spatial queries to aggregate in various
ways (eg averages a hexagonal grid). It seems round-about, but it
works. I've actually done it on some pretty massive grids.

THK

On Wed, Dec 14, 2011 at 7:26 AM, Andreas H. <lists@hilboll.de> wrote:
> Travis,
>
> thanks for your answer!
>
> Regarding the resampling methods: Do they all just interpolate the data? 
I
> mean, when downsampling, usually I would use mean() or something similar
> to fill the new (coarser) grid cells. Doas gdalwarp actually do this and
> I'm not able to understand the documentation, or is it different?
>
> Thanks again!
> Andreas.
>
>
>> Andreas,
>>
>> gdalwarp can be used to resample images using the -tr flag or -ts flag.
>>
>> For example resample 1m image to 10m using cubic resampling and
>> "target resolution'
>>
>> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
>>
>> You may have an issue determining the output resolution as I believe
>> the resolution will be in decimal degrees rather than arc-seconds.
>>
>> Regards
>>
>> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
>>> Hi,
>>>
>>> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
>>> resolution. Which would be the appropriate GDAL command to spatially
>>> down-sample this file to say 0.125??
>>>
>>> Thanks for your insight,
>>> Andreas.
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Timothy H. Keitt
http://www.keittlab.org/
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/364df1f6/attachment.html
From even.rouault at mines-paris.org  Thu Dec 15 14:01:12 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 15 14:01:16 2011
Subject: [gdal-dev] extra spaces when writing to AAIGRID format
In-Reply-To: <1323969671860-7097852.post@n2.nabble.com>
References: <1323969671860-7097852.post@n2.nabble.com>
Message-ID: <201112152001.12437.even.rouault@mines-paris.org>

Le jeudi 15 d?cembre 2011 18:21:11, bhmcrae a ?crit :
> Hi,
> 
> I'm having problems with GDAL inserting leading spaces when writing from a
> numpy array to ESRI ASCII Grid format.
> 
> The problem occurs whenever there are integers in the array (even though
> the array itself is floating point).
> 
> E.g., if I try to write a 3x3 grid that ArcGIS can read, it needs to look
> something like this:
> 
> ncols        3
> nrows        3
> xllcorner    100.000000000000
> yllcorner    100.000000000000
> cellsize     0.000010000000
> 1.00000000000000000 1.4809201955795288 1.4809201955795288
> 0.11773009598255157 0.15476560592651367 0.86710774898529053
> 0.17429724335670471 0.76037305593490601 10.00000000000000
> 
> Instead, the ascii file written by GDAL looks like this (which can't be
> read by ArcGIS because of extra leading spaces in the first line of the
> data):
> 
> 
> ncols        5
> nrows        5
> xllcorner    100.000000000000
> yllcorner    100.000000000000
> cellsize     0.000010000000
>       1 1.4809201955795288 1.4809201955795288
>  0.25947147607803345 0.71342569589614868 2.8101832866668701
>  0.11773009598255157 0.15476560592651367 0.86710774898529053
>  0.17429724335670471 0.76037305593490601     10 0.74458205699920654
> 
> Here is the code I have been trying to use:
> 
> format = "MEM"
> driver = gdal.GetDriverByName( format )
> dst_ds = driver.Create( file, len(data[0]), len(data),1,gdal.GDT_Float32)
> dst_ds.SetGeoTransform([xllcorner, cellsize, 0, ull, 0, cellsize])
> dst_ds.GetRasterBand(1).WriteArray(data)
> format = 'AAIGrid'
> driver = gdal.GetDriverByName(format)
> dst_ds_new = driver.CreateCopy(file, dst_ds)
> dst_ds = None
> 
> 
> I've seen this problem on various versions of python going back at least 3
> years, so have relied on the much slower numpy.savetxt command instead of
> using GDAL.
> 
> Any thoughts on how to make this work?

Brad,

What iI can say for sure is that it is not related at all with which Python 
version you are using. This is specific to the AAIGRD driver. You would get the 
same results with gdal_translate.

It would be great if you could identify more precisely the cause for the 
failed opening. Is it :
1) the presence of spaces at the beginning of lines (the first number of the 
line being an integer or a float),
2) the presence of spaces at the beginning of lines starting with an integer,
3) integer values not being written as floating point numbers

For 1), 2) and 3), I've attached test1.asc, test2.asc and test3.asc that 
should test the hypothesis. I've also attached test0.asc for reference, which 
is the example that was generated by ArcGIS, and that I've altered to generate 
the other files. Could you open those files with ArcGIS and report which ones 
work ?

And what is the ArcGIS version you are using ?

Do other ArcGIS users that happen to read that thread have met similar issues 
?

Best regards,

Even
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test0.asc
Type: application/pgp-keys
Size: 294 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/e821eb4d/test0.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test1.asc
Type: application/pgp-keys
Size: 297 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/e821eb4d/test1.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test2.asc
Type: application/pgp-keys
Size: 279 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/e821eb4d/test2.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test3.asc
Type: application/pgp-keys
Size: 276 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/e821eb4d/test3.bin
From eadam at co.lincoln.or.us  Thu Dec 15 14:34:34 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Thu Dec 15 14:34:51 2011
Subject: [gdal-dev] extra spaces when writing to AAIGRID format
In-Reply-To: <1323969671860-7097852.post@n2.nabble.com>
References: <1323969671860-7097852.post@n2.nabble.com>
Message-ID: <CACqBkM80U26SFyv3e1me7y+44C-+uA14fx_C3s7BYd0Hu5yxWQ@mail.gmail.com>

Brad,

> E.g., if I try to write a 3x3 grid that ArcGIS can read, it needs to look
> something like this:
>
> ncols ? ? ? ?3
> nrows ? ? ? ?3
> xllcorner ? ?100.000000000000
> yllcorner ? ?100.000000000000
> cellsize ? ? 0.000010000000
> 1.00000000000000000 1.4809201955795288 1.4809201955795288
> 0.11773009598255157 0.15476560592651367 0.86710774898529053
> 0.17429724335670471 0.76037305593490601 10.00000000000000
>
> Instead, the ascii file written by GDAL looks like this (which can't be read
> by ArcGIS because of extra leading spaces in the first line of the data):

What is the ArcGIS error?  I tried these files on ArcMap 9.3 and 10.0
and had no issues that I realized.  (to display in a meaningful
manner, I had to change the symbology which required the calculation
of statistics in ArcGIS.  I also changed the cellsize to .1 so I could
more easily examine the pixels and values.)

Below looks like a 3x4 grid that is labeled as 5x5 but even that
worked for me in ArcGIS (didn't throw error but values were not where
'expected').

>
>
> ncols ? ? ? ?5
> nrows ? ? ? ?5
> xllcorner ? ?100.000000000000
> yllcorner ? ?100.000000000000
> cellsize ? ? 0.000010000000
> ? ? ?1 1.4809201955795288 1.4809201955795288
> ?0.25947147607803345 0.71342569589614868 2.8101832866668701
> ?0.11773009598255157 0.15476560592651367 0.86710774898529053
> ?0.17429724335670471 0.76037305593490601 ? ? 10 0.74458205699920654
>

All 4 of of Even's files worked for me too.

HTH, Eli
From even.rouault at mines-paris.org  Thu Dec 15 14:48:10 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 15 14:48:13 2011
Subject: [gdal-dev] gdal_translate to TIFF -- color mismatch
In-Reply-To: <20111215100826.1956482r80r4k5my@webmail.distributel.net>
References: <20111215100826.1956482r80r4k5my@webmail.distributel.net>
Message-ID: <201112152048.10143.even.rouault@mines-paris.org>

Le jeudi 15 d?cembre 2011 18:08:26, mladen-g@distributel.net a ?crit :
> Hi all,
> 
> I am trying to use gdal_translate to convert a .grd file
> (Northwood/VerticalMapper format) to TIFF.  However, the colors in the
> translated file don't seem to be interpolated correctly based on the
> color scheme, for values near the end of the range.
> 
> Here is a link to the original GRD, as well as the exported TIFFs
> (small download, only 200K):
> http://dl.dropbox.com/u/53500018/GdalQuestion.zip
> 
> The GdalTranslateExport.tif file was produced with the command
> "gdal_translate -b 1 -b 2 -b 3
> C:\source\Ottawa_east_DEM30m_trim_copy.grd
> C:\temp\GdalTranslateExport.tif".
> 
> Notice the top and bottom areas of the image:  they are yellow.  For
> comparison, take a look at the NativeExport.tif file in the same
> package.  The top and bottom areas are orange, as they should be.  The
> NativeExport.tif file was produced by Pitney Bowes MapInfo.
> 
> Here is the color scheme for the GRD:
> http://www.smugmug.com/photos/i-bRZ879w/0/X3/i-bRZ879w-X3.jpg
> 
> Notice that the thresholds are "70" for yellow, and "161" for orange.
> Well, the values at the top and bottom are in the high 130s/low 140s.
> So they should be interpolated close to orange, not yellow.  Therefore
> the NativeExport.tif is correct, and the gdal_translate export is
> incorrect.
> 
> I have also tried changing the thresholds, and as soon as I change the
> orange threshold to be below the maximum actual value in the GRD
> (let's say 144), the gdal_translate export shows the orange shades.

Good analysis. There was indeed a bug in the way the end of the color palette 
is interpolated if the maximum z value is below a threshold of the color 
scheme. See http://trac.osgeo.org/gdal/ticket/4395 for the fix (a simple typo)

> 
> So, it seems there might be a bug in gdal_translate where color values
> are not interpolated correctly for thresholds that fall outside of the
> range of actual values?  Or is there a way to make gdal_translate
> behave the way that I want with some different command line options?
> 
> Regards,
> Mladen Gavrilovic
> 
> P.S.  For convenience, here is a gallery with the TIFFs converted to
> JPEG (difference is still obvious), and the color scheme:
> http://smu.gs/vMEemF
> 
> P.P.S  Version of GDAL is 1.8.1
> 
> ----------------------------------------------------------------
> This message was sent using Distributel Webmail.
> Ce message a ?t? envoy? ? partir de la Messagerie Web Distributel.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From bmcrae at TNC.ORG  Thu Dec 15 14:46:00 2011
From: bmcrae at TNC.ORG (Brad McRae)
Date: Thu Dec 15 14:57:17 2011
Subject: [gdal-dev] extra spaces when writing to AAIGRID format
In-Reply-To: <201112152001.12437.even.rouault@mines-paris.org>
References: <1323969671860-7097852.post@n2.nabble.com>
	<201112152001.12437.even.rouault@mines-paris.org>
Message-ID: <CAP_bYexuTzvW1z3pazcasOA=B1mqFBuxt=AVY59jLDyD+XJ5Lg@mail.gmail.com>

Hi Even and Eli,

Thanks much for your responses.  As soon as I sent that email I
realized I might eat my words on the inability to open the ASCII grids
in ArcMap.  This problem did crop up when we released a version of our
code that used GDAL a few years back.  A user reported intermittent
errors reading grids that our code exported.  Since then, I have
assumed that we must fix the writing behavior of our GDAL code.

But, I was able to open the files you sent in ArcMap 10 (as well as
the grid example that I sent out).  So it is not always a problem.
Moreover, it may not be a problem at all with the latest versions of
ArcGIS- the old problem may have even been on ArcView 3.x.  We'll do
some further testing and decide whether it seems risky at all.

Thanks again,
Brad


On Thu, Dec 15, 2011 at 11:01 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le jeudi 15 d?cembre 2011 18:21:11, bhmcrae a ?crit :
>> Hi,
>>
>> I'm having problems with GDAL inserting leading spaces when writing from a
>> numpy array to ESRI ASCII Grid format.
>>
>> The problem occurs whenever there are integers in the array (even though
>> the array itself is floating point).
>>
>> E.g., if I try to write a 3x3 grid that ArcGIS can read, it needs to look
>> something like this:
>>
>> ncols ? ? ? ?3
>> nrows ? ? ? ?3
>> xllcorner ? ?100.000000000000
>> yllcorner ? ?100.000000000000
>> cellsize ? ? 0.000010000000
>> 1.00000000000000000 1.4809201955795288 1.4809201955795288
>> 0.11773009598255157 0.15476560592651367 0.86710774898529053
>> 0.17429724335670471 0.76037305593490601 10.00000000000000
>>
>> Instead, the ascii file written by GDAL looks like this (which can't be
>> read by ArcGIS because of extra leading spaces in the first line of the
>> data):
>>
>>
>> ncols ? ? ? ?5
>> nrows ? ? ? ?5
>> xllcorner ? ?100.000000000000
>> yllcorner ? ?100.000000000000
>> cellsize ? ? 0.000010000000
>> ? ? ? 1 1.4809201955795288 1.4809201955795288
>> ?0.25947147607803345 0.71342569589614868 2.8101832866668701
>> ?0.11773009598255157 0.15476560592651367 0.86710774898529053
>> ?0.17429724335670471 0.76037305593490601 ? ? 10 0.74458205699920654
>>
>> Here is the code I have been trying to use:
>>
>> format = "MEM"
>> driver = gdal.GetDriverByName( format )
>> dst_ds = driver.Create( file, len(data[0]), len(data),1,gdal.GDT_Float32)
>> dst_ds.SetGeoTransform([xllcorner, cellsize, 0, ull, 0, cellsize])
>> dst_ds.GetRasterBand(1).WriteArray(data)
>> format = 'AAIGrid'
>> driver = gdal.GetDriverByName(format)
>> dst_ds_new = driver.CreateCopy(file, dst_ds)
>> dst_ds = None
>>
>>
>> I've seen this problem on various versions of python going back at least 3
>> years, so have relied on the much slower numpy.savetxt command instead of
>> using GDAL.
>>
>> Any thoughts on how to make this work?
>
> Brad,
>
> What iI can say for sure is that it is not related at all with which Python
> version you are using. This is specific to the AAIGRD driver. You would get the
> same results with gdal_translate.
>
> It would be great if you could identify more precisely the cause for the
> failed opening. Is it :
> 1) the presence of spaces at the beginning of lines (the first number of the
> line being an integer or a float),
> 2) the presence of spaces at the beginning of lines starting with an integer,
> 3) integer values not being written as floating point numbers
>
> For 1), 2) and 3), I've attached test1.asc, test2.asc and test3.asc that
> should test the hypothesis. I've also attached test0.asc for reference, which
> is the example that was generated by ArcGIS, and that I've altered to generate
> the other files. Could you open those files with ArcGIS and report which ones
> work ?
>
> And what is the ArcGIS version you are using ?
>
> Do other ArcGIS users that happen to read that thread have met similar issues
> ?
>
> Best regards,
>
> Even



-- 
------------------------------------------------------------------------------
Brad McRae
The Nature Conservancy
1917 1st Avenue
Seattle, WA 98101
Cell: 541-223-1170
Office: 206-436-6206
Fax: 206-343-5608
email: bmcrae@tnc.org
http://www.nceas.ucsb.edu/~mcrae/
From mather.stephen at gmail.com  Thu Dec 15 15:44:10 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Thu Dec 15 15:45:00 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <CAG-GLBNeObVbNOe_tJEEvs1t1Nqm8Son-j13AnKKLa8tb-waDw@mail.gmail.com>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>
	<CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>
	<CAG-GLBNeObVbNOe_tJEEvs1t1Nqm8Son-j13AnKKLa8tb-waDw@mail.gmail.com>
Message-ID: <CAPkJWLX_fjvHdUsNm7oOzYnS2fO7-aJBq7C9YPustWh+6dYfog@mail.gmail.com>

I agree both have their place.  Sometimes we get a more consistent or more
interesting answer from our analyses than from our field measurements.

As to the approach, I agree with your assessment, I was thinking
backwards-- one caveat-- how best to handle local minima?  Insert a null?
I'm afraid I don't know how this is normally handled.

Steve


On Thu, Dec 15, 2011 at 1:45 PM, Matt Perry <perrygeo@gmail.com> wrote:

> Stephen,
>
>
> It'd be great to see local hydrologic slope in gdaldem.
>
> I've seen a similar discrepancy between "field" slope and most
> GIS-derived slopes. The local max hydrologic slope seems to correspond
> much better to our perceived slope on the ground. The integrated slope
> used in most GIS, however, better matches the overall planar slope
> over a large extent. So they both have their place depending on scale;
> local hydrologic max slope for the micro, integrated planar slope for
> the macro.
>
> However, I don't think the algorithm that you describe below will
> work. It's currently looking for the *maximum* local elevation and
> computing slope to the center cell. Instead it should calculate the
> slope in the direction of hydrologic flow; i.e. the slope from the
> center cell to surrounding cell with the *minimum* elevation.
>
>
> - matt
>
> On Thu, Dec 15, 2011 at 10:29 AM, Stephen Mather
> <mather.stephen@gmail.com> wrote:
> > I already see a flaw-- the function should be more like:
> >
> >
> > float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void*
> pData)
> > {
> >     // Hydrologic Slope is the max
> >     //  local slope btw center cell and adjacent cells
> >
> >     const double radiansToDegrees = 180.0 / M_PI;
> >     GDALSlopeAlgData* psData = (GDALSlopeAlgData*)pData;
> >
> >     float pafLocalMax = afWin[0];
> >
> >     for ( int k = 1; k < 9; k++)
> >     {
> >         if (afWin[k] > pafLocalMax)
> >         {
> >             pafLocalMax=afWin[k];
> >         }
> >     }
> >     return atan(sqrt(pafLocalMax - afWin[4]) / (2*psData->scale)) *
> > radiansToDegrees;
> >
> > }
> >
> >
> >
> > On Thu, Dec 15, 2011 at 11:49 AM, Stephen Mather <
> mather.stephen@gmail.com>
> > wrote:
> >>
> >> Hi All,
> >>       A colleague tipped me off to an article in Forestry Source
> entitled
> >> "When GIS Slope Isn't What You Think" showing differences between field
> >> measured slope values and GIS results.  The differences can be
> substantial.
> >> The short and long of it is that local hydrologic slope is closer to
> what's
> >> used in the field by foresters than the integrated slope from either
> Horn or
> >> Zevenbergen-Thorne.
> >>       And so, I have a feature request.  I would like to add hydrologic
> >> slope to gdaldem.  This is max local slope rather than integrated 9 cell
> >> slope like the existing code:
> >>
> >> The existing code for Horn, e.g. is:
> >>
> >>     dx = ((afWin[0] + afWin[3] + afWin[3] + afWin[6]) -
> >>           (afWin[2] + afWin[5] + afWin[5] + afWin[8]))/psData->ewres;
> >>
> >>     dy = ((afWin[6] + afWin[7] + afWin[7] + afWin[8]) -
> >>           (afWin[0] + afWin[1] + afWin[1] + afWin[2]))/psData->nsres;
> >>
> >> I'd like something more like this (adapted from roughness):
> >>
> >> float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void*
> pData)
> >> {
> >>     // Hydrologic Slope is the max
> >>     //  local slope btw center cell and adjacent cells
> >>
> >>     float pafLocalMax = afWin[0];
> >>
> >>     for ( int k = 1; k < 9; k++)
> >>     {
> >>         if (afWin[k] > pafLocalMax)
> >>         {
> >>             pafLocalMax=afWin[k];
> >>         }
> >>     }
> >>     return pafLocalMax - afWin[4];
> >> }
> >>
> >> Any critques?  Reasons to not add?
> >>
> >> Best,
> >> Steve
> >>
> >> Stephen Mather
> >> GIS Manager
> >> Cleveland Metroparks
> >> 4101 Fulton Pkwy
> >> Cleveland, OH
> >> 44144
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> ???`?.?. , . .???`?.. ><((((?>`?.??.???`?.?.???`?...?><((((?>
> "The best way to predict the future is to invent it."  -- Alan Kay
> Matthew T. Perry
> http://www.perrygeo.net
> http://viedevelo.wordpress.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/ed07524a/attachment.html
From mike.omalley at nextcentury.com  Thu Dec 15 15:50:55 2011
From: mike.omalley at nextcentury.com (Mike O'Malley)
Date: Thu Dec 15 15:52:22 2011
Subject: [gdal-dev] gdal_translate and TIFF resolutions(?)
Message-ID: <8EDBE3F4D9261F4A90677FB13B9CCEBC0287C27C@ws2.hq.nextcentury.com>

Hi,

   I'm using gdal_translate to chip out TIFFs from a NITF using the
command line:

gdal_translate -ot Int32 -of Gtiff  -strict  -outsize 3000 3000 -srcwin
0 0 3000 3000 c:\data\image.ntf c:\data\output_image.tiff

 

   Tiffinfo (which throws an error) has a problem with the resolution
field- the x and y resolutions seem to be unset.  Irfanview will display
the image, but also shows the resolution to be blank.  When I modify the
resolution within Irfanview, I'm able to load the image using any app-
paint.net, photoshop, MS Paint, programmatically with OpenCV, etc.

   How can I force gdal_translate to set that resolution field?  I'm not
a TIFF expert, but it seems like it would be a standard field if
tiffinfo throws an error when it's not populated.

 

   Thanks,

                Mike

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/d163a561/attachment.html
From tkeitt at gmail.com  Thu Dec 15 15:54:20 2011
From: tkeitt at gmail.com (Tim Keitt)
Date: Thu Dec 15 15:55:36 2011
Subject: [gdal-dev] re-gridding to a coarser grid
In-Reply-To: <OFD8ADB6D4.156F114A-ON85257967.0064CB0B-85257967.00667634@fws.gov>
References: <CANnL8gqfdU85raY27GaWPsR=hisOs7dYAmjQ1s__VZ0ZXyAMZw@mail.gmail.com>
	<OFD8ADB6D4.156F114A-ON85257967.0064CB0B-85257967.00667634@fws.gov>
Message-ID: <CANnL8gqghgQRBCdGgUTCKV7NkO5p1bqyhoADCzejtrzP1XgrXA@mail.gmail.com>

Sometimes I think GRASS can do anything...

In my case I was using a 1km equal area grid over North and South America
and needed to implement an interpolation scheme not pre-packaged anywhere I
had looked, so I worked with large tables of points. Not highly recommended
unless you have other things to do while you wait.

THK

On Thu, Dec 15, 2011 at 12:39 PM, <Doug_Newcomb@fws.gov> wrote:

>
> For what it's worth,
>
> What do you consider large and what kind of method for downscaling you
> wish to use?
>
>   I do this in GRASS using the r.neighbors command, http://grass.fbk.eu/grass64/manuals/html64_user/r.neighbors.html.
>   I've done an averaging method to convert a 20 ft elevation grid  (
> statewide coverage)  of approximately 7 billion cells to an averaged 60 ft
> grid ( 777 million cells)  by performing a 3x3 neighbor hood analysis  on
> the 20 ft grid, setting the GRASS workspace resolution to 60 ft and
> multiplying the 20ft grid created by the  3x3 neighborhood analysis by 1 to
> create a new grid (<http://grass.fbk.eu/grass64/manuals/html64_user/r.neighbors.html>http://grass.fbk.eu/grass64/manuals/html64_user/r.mapcalculator.html)
>   .  GRASS will take the value of the center averaged 20 ft cell in the
> 60ft block as the value of the cell in the new 60 ft raster.
> <http://grass.fbk.eu/grass64/manuals/html64_user/r.mapcalculator.html>
>
> options for r.neigbors calculations are :
>  average,median,mode,minimum,maximum,range,stddev,sum,variance,diversity,interspersion
>
>
>
> Doug
>
>
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb@fws.gov
>
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of the
> Interior.   Life is too short for undocumented, proprietary data formats.
>
>
>  *Tim Keitt <tkeitt@gmail.com>*
> Sent by: gdal-dev-bounces@lists.osgeo.org
>
> 12/15/2011 01:17 PM
>   To
> "Andreas H." <lists@hilboll.de>
> cc
> gdal-dev@lists.osgeo.org
> Subject
> Re: [gdal-dev] re-gridding to a coarser grid
>
>
>
>
> If you need complete control, and your data are not too massive in
> number, I have had good results pushing pixel coordinates as points
> into postgis and then using spatial queries to aggregate in various
> ways (eg averages a hexagonal grid). It seems round-about, but it
> works. I've actually done it on some pretty massive grids.
>
> THK
>
> On Wed, Dec 14, 2011 at 7:26 AM, Andreas H. <lists@hilboll.de> wrote:
> > Travis,
> >
> > thanks for your answer!
> >
> > Regarding the resampling methods: Do they all just interpolate the data?
> I
> > mean, when downsampling, usually I would use mean() or something similar
> > to fill the new (coarser) grid cells. Doas gdalwarp actually do this and
> > I'm not able to understand the documentation, or is it different?
> >
> > Thanks again!
> > Andreas.
> >
> >
> >> Andreas,
> >>
> >> gdalwarp can be used to resample images using the -tr flag or -ts flag.
> >>
> >> For example resample 1m image to 10m using cubic resampling and
> >> "target resolution'
> >>
> >> gdalwarp -r cubic -tr 10 10 input_1m.tif output_10m.tif
> >>
> >> You may have an issue determining the output resolution as I believe
> >> the resolution will be in decimal degrees rather than arc-seconds.
> >>
> >> Regards
> >>
> >> On 13 December 2011 14:52, Andreas H. <lists@hilboll.de> wrote:
> >>> Hi,
> >>>
> >>> let's say I have a GeoTIFF file with a global grid in a 30 arc-second
> >>> resolution. Which would be the appropriate GDAL command to spatially
> >>> down-sample this file to say 0.125??
> >>>
> >>> Thanks for your insight,
> >>> Andreas.
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Timothy H. Keitt
>  <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
> http://www.keittlab.org/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
>  <http://www.keittlab.org/>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


-- 
Timothy H. Keitt
http://www.keittlab.org/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/2bcbd912/attachment-0001.html
From warmerdam at pobox.com  Thu Dec 15 16:26:00 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 15 16:26:39 2011
Subject: [gdal-dev] gdal_translate and TIFF resolutions(?)
In-Reply-To: <8EDBE3F4D9261F4A90677FB13B9CCEBC0287C27C@ws2.hq.nextcentury.com>
References: <8EDBE3F4D9261F4A90677FB13B9CCEBC0287C27C@ws2.hq.nextcentury.com>
Message-ID: <CA+YzLBer7h0HLeuYK9ub+Wz1hRKHCfNagxsS-vfgZhsH1OyXqQ@mail.gmail.com>

Mike,

Can you provide the output of tiffinfo, and tiffdump on the
file produced by gdal_translate?  GDAL does have support
for setting the resolution fields if particular source metadata
is provided but normally that metadata is not available and
no resolution fields should be written at all.

I'd also like to know what version of gdal you are using.

Best regards,
Frank

On Thu, Dec 15, 2011 at 12:50 PM, Mike O'Malley
<mike.omalley@nextcentury.com> wrote:
> Hi,
>
> ?? I?m using gdal_translate to chip out TIFFs from a NITF using the command
> line:
>
> gdal_translate -ot Int32 -of Gtiff? -strict? -outsize 3000 3000 ?srcwin 0 0
> 3000 3000 c:\data\image.ntf c:\data\output_image.tiff
>
>
>
> ?? Tiffinfo (which throws an error) has a problem with the resolution field-
> the x and y resolutions seem to be unset.? Irfanview will display the image,
> but also shows the resolution to be blank.? When I modify the resolution
> within Irfanview, I?m able to load the image using any app- paint.net,
> photoshop, MS Paint, programmatically with OpenCV, etc.
>
> ?? How can I force gdal_translate to set that resolution field?? I?m not a
> TIFF expert, but it seems like it would be a standard field if tiffinfo
> throws an error when it?s not populated.
>
>
>
> ?? Thanks,
>
> ??????????????? Mike
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Thu Dec 15 16:58:11 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 15 16:58:48 2011
Subject: Fwd: [gdal-dev] gdal_translate and TIFF resolutions(?)
In-Reply-To: <CA+YzLBdUT1+wj2CBap5d-YBvUejbnEbNG=6h_M1jfCVEqswNpw@mail.gmail.com>
References: <8EDBE3F4D9261F4A90677FB13B9CCEBC0287C27C@ws2.hq.nextcentury.com>
	<CA+YzLBer7h0HLeuYK9ub+Wz1hRKHCfNagxsS-vfgZhsH1OyXqQ@mail.gmail.com>
	<8EDBE3F4D9261F4A90677FB13B9CCEBC0287C29B@ws2.hq.nextcentury.com>
	<CA+YzLBdUT1+wj2CBap5d-YBvUejbnEbNG=6h_M1jfCVEqswNpw@mail.gmail.com>
Message-ID: <CA+YzLBfbmdH0yRPLdBnb2V32CfPTeXDaPR+ESQiPcJeG8A8-6A@mail.gmail.com>

Forwarding private response back to the group.

---------- Forwarded message ----------
From: Frank Warmerdam <warmerdam@pobox.com>
Date: Thu, Dec 15, 2011 at 1:56 PM
Subject: Re: [gdal-dev] gdal_translate and TIFF resolutions(?)
To: Mike O'Malley <mike.omalley@nextcentury.com>


On Thu, Dec 15, 2011 at 1:41 PM, Mike O'Malley
<mike.omalley@nextcentury.com> wrote:
> Frank,
> ? Sure thing! ?I've attached the output from tiffinfo and tiffdump. ?Tiffinfo noted a few unknown fields with high numeric tags (34k-ish), but I don't know that those are relevant.
> ? I'm using GDAL 1.8.1. ?What source metadata does GDAL require to set the resolution fields? ?I don't have control over the NITFs, but if there's some way I can inject that metadata into the process I'd be happy to look into it. ?Or after the process, for that matter.


Mike,

The tiffinfo messages about unknown tags are not serious.
Looking at the generated file I don't see any problems with it
as far as resolution goes. ?It just doesn't have any resolution
tags at all which is perfectly legitimate. ? If some apps can't
consume files without resolution set then I think they are
the issue.

However, you can set it yourself like:

gdal_translate ... \
?-mo TIFFTAG_XRESOLUTION=80 \
?-mo TIFFTAG_YRESOLUTION=80 \
?-mo TIFFTAG_RESOLUTIONUNIT=2

#define ? ? RESUNIT_NONE ? ? ? ? ? ? ? ?1 ? ? ? /* no meaningful units */
#define ? ? RESUNIT_INCH ? ? ? ? ? ? ? ?2 ? ? ? /* english */
#define ? ? RESUNIT_CENTIMETER ? ? ? ? ?3 ? ? ? /* metric */

The above would be 80 dpi. ?The tags are mentioned
in the GeoTIFF driver docs though I don't believe it is
specific about the interpretation of the resolution units.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mladen-g at distributel.net  Thu Dec 15 17:32:14 2011
From: mladen-g at distributel.net (mladen-g@distributel.net)
Date: Thu Dec 15 17:32:28 2011
Subject: [gdal-dev] gdal_translate to TIFF -- color mismatch
In-Reply-To: <201112152048.10143.even.rouault@mines-paris.org>
References: <20111215100826.1956482r80r4k5my@webmail.distributel.net>
	<201112152048.10143.even.rouault@mines-paris.org>
Message-ID: <20111215153214.31462ar0o4fwkrqm@webmail.distributel.net>

Wow, that was fast.  Thanks!

I see that the fix is in 1.8.2... Do you know will this be a separate  
release or will the fixes be merged into 1.9.0?  I ask because I see  
some recent discussions suggesting that 1.9.0 may be released by the  
end of the year.

Thanks again for the quick response,
Mladen


Quoting Even Rouault <even.rouault@mines-paris.org>:

> Le jeudi 15 d?cembre 2011 18:08:26, mladen-g@distributel.net a ?crit :
>> Hi all,
>>
>> I am trying to use gdal_translate to convert a .grd file
>> (Northwood/VerticalMapper format) to TIFF.  However, the colors in the
>> translated file don't seem to be interpolated correctly based on the
>> color scheme, for values near the end of the range.
>>
>> Here is a link to the original GRD, as well as the exported TIFFs
>> (small download, only 200K):
>> http://dl.dropbox.com/u/53500018/GdalQuestion.zip
>>
>> The GdalTranslateExport.tif file was produced with the command
>> "gdal_translate -b 1 -b 2 -b 3
>> C:\source\Ottawa_east_DEM30m_trim_copy.grd
>> C:\temp\GdalTranslateExport.tif".
>>
>> Notice the top and bottom areas of the image:  they are yellow.  For
>> comparison, take a look at the NativeExport.tif file in the same
>> package.  The top and bottom areas are orange, as they should be.  The
>> NativeExport.tif file was produced by Pitney Bowes MapInfo.
>>
>> Here is the color scheme for the GRD:
>> http://www.smugmug.com/photos/i-bRZ879w/0/X3/i-bRZ879w-X3.jpg
>>
>> Notice that the thresholds are "70" for yellow, and "161" for orange.
>> Well, the values at the top and bottom are in the high 130s/low 140s.
>> So they should be interpolated close to orange, not yellow.  Therefore
>> the NativeExport.tif is correct, and the gdal_translate export is
>> incorrect.
>>
>> I have also tried changing the thresholds, and as soon as I change the
>> orange threshold to be below the maximum actual value in the GRD
>> (let's say 144), the gdal_translate export shows the orange shades.
>
> Good analysis. There was indeed a bug in the way the end of the color palette
> is interpolated if the maximum z value is below a threshold of the color
> scheme. See http://trac.osgeo.org/gdal/ticket/4395 for the fix (a  
> simple typo)
>
>>
>> So, it seems there might be a bug in gdal_translate where color values
>> are not interpolated correctly for thresholds that fall outside of the
>> range of actual values?  Or is there a way to make gdal_translate
>> behave the way that I want with some different command line options?
>>
>> Regards,
>> Mladen Gavrilovic
>>
>> P.S.  For convenience, here is a gallery with the TIFFs converted to
>> JPEG (difference is still obvious), and the color scheme:
>> http://smu.gs/vMEemF
>>
>> P.P.S  Version of GDAL is 1.8.1
>>
>> ----------------------------------------------------------------
>> This message was sent using Distributel Webmail.
>> Ce message a ?t? envoy? ? partir de la Messagerie Web Distributel.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



----------------------------------------------------------------
This message was sent using Distributel Webmail.
Ce message a ?t? envoy? ? partir de la Messagerie Web Distributel.


From even.rouault at mines-paris.org  Thu Dec 15 17:41:10 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 15 17:42:02 2011
Subject: [gdal-dev] gdal_translate to TIFF -- color mismatch
In-Reply-To: <20111215153214.31462ar0o4fwkrqm@webmail.distributel.net>
References: <20111215100826.1956482r80r4k5my@webmail.distributel.net>
	<201112152048.10143.even.rouault@mines-paris.org>
	<20111215153214.31462ar0o4fwkrqm@webmail.distributel.net>
Message-ID: <201112152341.10768.even.rouault@mines-paris.org>

Le jeudi 15 d?cembre 2011 23:32:14, mladen-g@distributel.net a ?crit :
> Wow, that was fast.  Thanks!
> 
> I see that the fix is in 1.8.2... Do you know will this be a separate
> release or will the fixes be merged into 1.9.0?  I ask because I see
> some recent discussions suggesting that 1.9.0 may be released by the
> end of the year.

The fix also went to trunk (1.9.0) of course (*). And 1.9.0 will likely be 
released before 1.8.2 indeed.

(*) Trac has no way to specify multiple target milestones, so I tend to 
indicate the milestone corresponding to the stable branch if it has been 
applied there too. The general rule being that all fixes that go to the stable 
branch go to trunk too.
From mather.stephen at gmail.com  Thu Dec 15 21:49:09 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Thu Dec 15 21:49:16 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <CAPkJWLX_fjvHdUsNm7oOzYnS2fO7-aJBq7C9YPustWh+6dYfog@mail.gmail.com>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>
	<CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>
	<CAG-GLBNeObVbNOe_tJEEvs1t1Nqm8Son-j13AnKKLa8tb-waDw@mail.gmail.com>
	<CAPkJWLX_fjvHdUsNm7oOzYnS2fO7-aJBq7C9YPustWh+6dYfog@mail.gmail.com>
Message-ID: <CAPkJWLWo2QNoHqDMqY6Oxa3-FnXc4TL8dY_X5DJntr-6FN_m8A@mail.gmail.com>

Here's what I've settled on.  Let me know your thoughts.  The algorithm now
correctly calculates angle to lowest nearby point.  If it's a local minima,
it instead calculates angle to the nearest high point, which will be a
negative number, so if the user wants to nullify these or use them in
additional processing steps they can.  How does adding code to gdal work?

Best,
Steve

float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)

{
    // Hydrologic Slope is the max
    //  local slope btw center cell and adjacent cells

    const double radiansToDegrees = 180.0 / M_PI;
    GDALSlopeAlgData* psData = (GDALSlopeAlgData*)pData;
                double key;

    float pafLocalMin = afWin[0];
     float pafLocalMax = afWin[0];

    for ( int k = 1; k < 9; k++)
    {
        if (afWin[k] < pafLocalMin)
        {
            pafLocalMin=afWin[k];
        }

        if (afWin[k] > pafLocalMax)
        {
            pafLocalMax=afWin[k];
        }

    }

    key = afWin[4] - pafLocalMin;

    if (key < 0)
     {
        key = afWin[4] - pafLocalMax;
     }

    if (psData->slopeFormat == 1)
        return (float) (atan(sqrt(key) / (2*psData->scale)) *
radiansToDegrees);
    else
        return (float) (100*(sqrt(key) / (2*psData->scale)));
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/b587f230/attachment.html
From jluis at ualg.pt  Thu Dec 15 22:05:09 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Dec 15 22:27:04 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <CAPkJWLWo2QNoHqDMqY6Oxa3-FnXc4TL8dY_X5DJntr-6FN_m8A@mail.gmail.com>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>	<CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>	<CAG-GLBNeObVbNOe_tJEEvs1t1Nqm8Son-j13AnKKLa8tb-waDw@mail.gmail.com>	<CAPkJWLX_fjvHdUsNm7oOzYnS2fO7-aJBq7C9YPustWh+6dYfog@mail.gmail.com>
	<CAPkJWLWo2QNoHqDMqY6Oxa3-FnXc4TL8dY_X5DJntr-6FN_m8A@mail.gmail.com>
Message-ID: <4EEAB565.5000100@ualg.pt>


>
>     float pafLocalMin = afWin[0];
>      float pafLocalMax = afWin[0];
>
>     for ( int k = 1; k < 9; k++)
>     {
>         if (afWin[k] < pafLocalMin)
>         {
>             pafLocalMin=afWin[k];
>         }
>
>         if (afWin[k] > pafLocalMax)
>         {
>             pafLocalMax=afWin[k];
>         }
>
>     }
>

>     key = afWin[4] - pafLocalMin;
>
>     if (key < 0)
>      {
>         key = afWin[4] - pafLocalMax;
>      }
>

Stephen

'key' can never be negative because pafLocalMin is computed from 'afWin' 
alone. The min val it can have is 0, when the minimum value is the 
central node itself.

Joaquim
From mather.stephen at gmail.com  Thu Dec 15 22:31:41 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Thu Dec 15 22:38:54 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <4EEAB565.5000100@ualg.pt>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>
	<CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>
	<CAG-GLBNeObVbNOe_tJEEvs1t1Nqm8Son-j13AnKKLa8tb-waDw@mail.gmail.com>
	<CAPkJWLX_fjvHdUsNm7oOzYnS2fO7-aJBq7C9YPustWh+6dYfog@mail.gmail.com>
	<CAPkJWLWo2QNoHqDMqY6Oxa3-FnXc4TL8dY_X5DJntr-6FN_m8A@mail.gmail.com>
	<4EEAB565.5000100@ualg.pt>
Message-ID: <CAPkJWLVS_yCts6S_2beOkUMAtkyy4PRD8-ji_gPc_Z-XkB-nLQ@mail.gmail.com>

Hmm.  I don't follow?  The revision would be this:

float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)

{
    // Hydrologic Slope is the max
    //  local slope btw center cell and adjacent cells

    const double radiansToDegrees = 180.0 / M_PI;
    GDALSlopeAlgData* psData = (GDALSlopeAlgData*)pData;
                double key;

    float pafLocalMin = afWin[0];
     float pafLocalMax = afWin[0];

    for ( int k = 1; k < 9; k++)
    {
        if (afWin[k] < pafLocalMin)
        {
            pafLocalMin=afWin[k];
        }

        if (afWin[k] > pafLocalMax)
        {
            pafLocalMax=afWin[k];
        }
    }

    key = afWin[4] - pafLocalMin;

    if (psData->slopeFormat == 1)
        return (float) (atan(sqrt(key) / (2*psData->scale)) *
radiansToDegrees);
    else
        return (float) (100*(sqrt(key) / (2*psData->scale)));
}

But, clearly I'm not understanding something about the window.

Steve

On Thu, Dec 15, 2011 at 10:05 PM, Joaquim Luis <jluis@ualg.pt> wrote:

>
>
>>    float pafLocalMin = afWin[0];
>>     float pafLocalMax = afWin[0];
>>
>>    for ( int k = 1; k < 9; k++)
>>    {
>>        if (afWin[k] < pafLocalMin)
>>        {
>>            pafLocalMin=afWin[k];
>>        }
>>
>>        if (afWin[k] > pafLocalMax)
>>        {
>>            pafLocalMax=afWin[k];
>>        }
>>
>>    }
>>
>>
>     key = afWin[4] - pafLocalMin;
>>
>>    if (key < 0)
>>     {
>>        key = afWin[4] - pafLocalMax;
>>     }
>>
>>
> Stephen
>
> 'key' can never be negative because pafLocalMin is computed from 'afWin'
> alone. The min val it can have is 0, when the minimum value is the central
> node itself.
>
> Joaquim
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111215/6219f8bf/attachment-0001.html
From jluis at ualg.pt  Thu Dec 15 22:51:10 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Dec 15 22:51:23 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <CAPkJWLVS_yCts6S_2beOkUMAtkyy4PRD8-ji_gPc_Z-XkB-nLQ@mail.gmail.com>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>	<CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>	<CAG-GLBNeObVbNOe_tJEEvs1t1Nqm8Son-j13AnKKLa8tb-waDw@mail.gmail.com>	<CAPkJWLX_fjvHdUsNm7oOzYnS2fO7-aJBq7C9YPustWh+6dYfog@mail.gmail.com>	<CAPkJWLWo2QNoHqDMqY6Oxa3-FnXc4TL8dY_X5DJntr-6FN_m8A@mail.gmail.com>	<4EEAB565.5000100@ualg.pt>
	<CAPkJWLVS_yCts6S_2beOkUMAtkyy4PRD8-ji_gPc_Z-XkB-nLQ@mail.gmail.com>
Message-ID: <4EEAC02E.3070000@ualg.pt>

On 16-12-2011 03:31, Stephen Mather wrote:
> Hmm.  I don't follow?  The revision would be this:
>
> float GDALSlopeHydroAlg (float* afWin, float fDstNoDataValue, void* pData)
>
> {
>     // Hydrologic Slope is the max
>     //  local slope btw center cell and adjacent cells
>
>     const double radiansToDegrees = 180.0 / M_PI;
>     GDALSlopeAlgData* psData = (GDALSlopeAlgData*)pData;
>                 double key;
>
>     float pafLocalMin = afWin[0];
>      float pafLocalMax = afWin[0];
>
>     for ( int k = 1; k < 9; k++)
>     {
>         if (afWin[k] < pafLocalMin)
>         {
>             pafLocalMin=afWin[k];
>         }
>
>         if (afWin[k] > pafLocalMax)
>         {
>             pafLocalMax=afWin[k];
>         }
>     }
>
>     key = afWin[4] - pafLocalMin;
>
>     if (psData->slopeFormat == 1)
>         return (float) (atan(sqrt(key) / (2*psData->scale)) * 
> radiansToDegrees);
>     else
>         return (float) (100*(sqrt(key) / (2*psData->scale)));
> }
>
> But, clearly I'm not understanding something about the window.
>

Steve, there are more things I do not understand either. What is 
'psData->scale'? Is it the grid cell size?
So, if 'pafLocalMin' is on one of the 4 corners the distance is not cell 
size (let's call it DX) but instead sqrt(DX*DX + DX*DX).
And what if data is in geogs? Than DX is clearly different from DY and 
changes with latitude. You need to take that into account to compute the 
slope.

Joaquim
From mather.stephen at gmail.com  Fri Dec 16 00:05:55 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Fri Dec 16 00:06:02 2011
Subject: [gdal-dev] Re: Slope in gdaldem
In-Reply-To: <4EEAC02E.3070000@ualg.pt>
References: <CAPkJWLVW3LijznSgS+HNXqzZzB=KGDv179PoOtBZAAi3DqChnA@mail.gmail.com>
	<CAPkJWLWjoo64bBM5302ZZ6Djmcu6AJyGsoObT+krB+MwQ83S0Q@mail.gmail.com>
	<CAG-GLBNeObVbNOe_tJEEvs1t1Nqm8Son-j13AnKKLa8tb-waDw@mail.gmail.com>
	<CAPkJWLX_fjvHdUsNm7oOzYnS2fO7-aJBq7C9YPustWh+6dYfog@mail.gmail.com>
	<CAPkJWLWo2QNoHqDMqY6Oxa3-FnXc4TL8dY_X5DJntr-6FN_m8A@mail.gmail.com>
	<4EEAB565.5000100@ualg.pt>
	<CAPkJWLVS_yCts6S_2beOkUMAtkyy4PRD8-ji_gPc_Z-XkB-nLQ@mail.gmail.com>
	<4EEAC02E.3070000@ualg.pt>
Message-ID: <CAPkJWLU2Jh-sjemsg8_rOcu6H5P+PqRBPFcw+S9FAThGBkkAMw@mail.gmail.com>

>
> Steve, there are more things I do not understand either. What is
> 'psData->scale'? Is it the grid cell size?
> So, if 'pafLocalMin' is on one of the 4 corners the distance is not cell
> size (let's call it DX) but instead sqrt(DX*DX + DX*DX).
> And what if data is in geogs? Than DX is clearly different from DY and
> changes with latitude. You need to take that into account to compute the
> slope.
>
>
:)  I don't plan to refactor this for non-planar coordinate systems.  That
is beyond my skills.  AFAIK, none of the gdaldem code would be appropriate
to run on lat lon-- which is probably something which would be good to
address, since many global datasets default to that, but I can barely read
c++, let along do that level of refactoring.  Of course, if I'm wrong in
how I'm reading the source for the existing gdaldem code, and it does deal
with non-planar cases, I'll adapt that code for this use case.

As to corners and sqrt(2), I'll take another look through tomorrow.  In the
likely case that you're right, I was sloppy in adapting the roughness index
for this purpose and will have to take those distances into account.  This
will of course change the metric by which the lowest nearby point is
determined, because of how distance will affect the factor of slope.

And so, my 10 minute solution takes much longer in the end... .

Best,
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111216/ff0d2cbc/attachment.html
From meryemvrl at gmail.com  Fri Dec 16 02:56:16 2011
From: meryemvrl at gmail.com (mrym)
Date: Fri Dec 16 02:56:25 2011
Subject: [gdal-dev] Re: Runtime error on executing "OGRRegisterAll()"
	function.
In-Reply-To: <CABUeae8KWWFvnZdd1atqR+0bnC6uGMYcpVtb_U8deLwOooo+Tw@mail.gmail.com>
References: <1264426245484-4453903.post@n2.nabble.com>
	<4B5EE128.3020806@loskot.net>
	<1264596958438-4466974.post@n2.nabble.com>
	<4B60E27B.40704@loskot.net> <4B661D80.2090008@loskot.net>
	<1323949789335-7096855.post@n2.nabble.com>
	<CABUeae81dcd1qje4Mysd_Q-=b=uJOJ8v7VRPqNeEWKojr_5Y_g@mail.gmail.com>
	<1323963182037-7097491.post@n2.nabble.com>
	<CABUeae8KWWFvnZdd1atqR+0bnC6uGMYcpVtb_U8deLwOooo+Tw@mail.gmail.com>
Message-ID: <1324022176062-7099963.post@n2.nabble.com>

Thanks. I've done things you have written, but it's still same.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Runtime-error-on-executing-OGRRegisterAll-function-tp4453903p7099963.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From skyhisi at gmail.com  Fri Dec 16 06:21:01 2011
From: skyhisi at gmail.com (Silas Parker)
Date: Fri Dec 16 06:21:29 2011
Subject: [gdal-dev] OGR PG Driver 1.8 to 1.9 undocumented functionality
 change (bug?) with ExecuteSQL/GetSpatialRef
Message-ID: <CAPB+iVdkjs+sS2XDdJUQB06ZFtWBq6eBLGQ4-Q8Td1wVvLX_8g@mail.gmail.com>

Hello,

I've found that the behaviour of the PG (Postgres/Postgis) driver has
changed between 1.8 and 1.9 in ExecuteSQL that isn't listed in the
NEWS file.

The Spatial reference system of a SQL query can not be obtained (using
GetSpatialRef) if the SQL query starts with white-space.

This may be a bug, or an undocumented change in functionality!

I am testing with trunk SVN rev 23573, on Ubuntu 10.04.

The problem can be reproduced using ogrinfo, although I first observed
this in a different application.

In version 1.8.0:

$ ogrinfo --version
GDAL 1.8.0, released 2011/01/12

$ ogrinfo -ro -so -sql " SELECT * FROM codepoint" "PG:dbname=geocoder
user=postgres password=postgres"
INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
      using driver `PostgreSQL' successful.

Layer name: sql_statement
Geometry: Unknown (any)
Feature Count: 1689582
Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
Layer SRS WKT:
PROJCS["OSGB 1936 / British National Grid",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646,
                AUTHORITY["EPSG","7001"]],
            AUTHORITY["EPSG","6277"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4277"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    AUTHORITY["EPSG","27700"],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH]]
FID Column = ogc_fid
Geometry Column = wkb_geometry
postcode: String (0.0)
countryc: String (0.0)
countyc: String (0.0)
districtc: String (0.0)
wardc: String (0.0)
nhsregionc: String (0.0)
nhsareac: String (0.0)
countrys: String (0.0)
countys: String (0.0)
districts: String (0.0)
wards: String (0.0)
nhsregions: String (0.0)
nhsareas: String (0.0)


In version 1.9:

$ ogrinfo --version
GDAL 1.9dev, released 2011/01/18

$ ogrinfo -ro -so -sql " SELECT * FROM codepoint" "PG:dbname=geocoder
user=postgres password=postgres"
INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
      using driver `PostgreSQL' successful.

Layer name: sql_statement
Geometry: Unknown (any)
Feature Count: 1689582
Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
Layer SRS WKT:
(unknown)
postcode: String (0.0)
countryc: String (0.0)
countyc: String (0.0)
districtc: String (0.0)
wardc: String (0.0)
nhsregionc: String (0.0)
nhsareac: String (0.0)
countrys: String (0.0)
countys: String (0.0)
districts: String (0.0)
wards: String (0.0)
nhsregions: String (0.0)
nhsareas: String (0.0)

Thanks,

Silas
From even.rouault at mines-paris.org  Fri Dec 16 07:40:28 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 16 07:41:15 2011
Subject: [gdal-dev] OGR PG Driver 1.8 to 1.9 undocumented functionality
	change (bug?) with ExecuteSQL/GetSpatialRef
In-Reply-To: <CAPB+iVdkjs+sS2XDdJUQB06ZFtWBq6eBLGQ4-Q8Td1wVvLX_8g@mail.gmail.com>
References: <CAPB+iVdkjs+sS2XDdJUQB06ZFtWBq6eBLGQ4-Q8Td1wVvLX_8g@mail.gmail.com>
Message-ID: <1324039228.4eeb3c3ce5f90@webmail.free.fr>

Selon Silas Parker <skyhisi@gmail.com>:

> Hello,
>
> I've found that the behaviour of the PG (Postgres/Postgis) driver has
> changed between 1.8 and 1.9 in ExecuteSQL that isn't listed in the
> NEWS file.
>
> The Spatial reference system of a SQL query can not be obtained (using
> GetSpatialRef) if the SQL query starts with white-space.
>
> This may be a bug, or an undocumented change in functionality!

At first sight, it would look rather to be a bug than a desired change. Could
you test if the following works with 1.8.0 and svn head ?

ogrinfo -ro -so -sql "PG:dbname=geocoder user=postgres password=postgres"
codepoint works

It could be also usefull if you could attach the result of those commands with
"--debug on" added on the command line.

>
> I am testing with trunk SVN rev 23573, on Ubuntu 10.04.
>
> The problem can be reproduced using ogrinfo, although I first observed
> this in a different application.
>
> In version 1.8.0:
>
> $ ogrinfo --version
> GDAL 1.8.0, released 2011/01/12
>
> $ ogrinfo -ro -so -sql " SELECT * FROM codepoint" "PG:dbname=geocoder
> user=postgres password=postgres"
> INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
>       using driver `PostgreSQL' successful.
>
> Layer name: sql_statement
> Geometry: Unknown (any)
> Feature Count: 1689582
> Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
> Layer SRS WKT:
> PROJCS["OSGB 1936 / British National Grid",
>     GEOGCS["OSGB 1936",
>         DATUM["OSGB_1936",
>             SPHEROID["Airy 1830",6377563.396,299.3249646,
>                 AUTHORITY["EPSG","7001"]],
>             AUTHORITY["EPSG","6277"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.01745329251994328,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4277"]],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",49],
>     PARAMETER["central_meridian",-2],
>     PARAMETER["scale_factor",0.9996012717],
>     PARAMETER["false_easting",400000],
>     PARAMETER["false_northing",-100000],
>     AUTHORITY["EPSG","27700"],
>     AXIS["Easting",EAST],
>     AXIS["Northing",NORTH]]
> FID Column = ogc_fid
> Geometry Column = wkb_geometry
> postcode: String (0.0)
> countryc: String (0.0)
> countyc: String (0.0)
> districtc: String (0.0)
> wardc: String (0.0)
> nhsregionc: String (0.0)
> nhsareac: String (0.0)
> countrys: String (0.0)
> countys: String (0.0)
> districts: String (0.0)
> wards: String (0.0)
> nhsregions: String (0.0)
> nhsareas: String (0.0)
>
>
> In version 1.9:
>
> $ ogrinfo --version
> GDAL 1.9dev, released 2011/01/18
>
> $ ogrinfo -ro -so -sql " SELECT * FROM codepoint" "PG:dbname=geocoder
> user=postgres password=postgres"
> INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
>       using driver `PostgreSQL' successful.
>
> Layer name: sql_statement
> Geometry: Unknown (any)
> Feature Count: 1689582
> Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
> Layer SRS WKT:
> (unknown)
> postcode: String (0.0)
> countryc: String (0.0)
> countyc: String (0.0)
> districtc: String (0.0)
> wardc: String (0.0)
> nhsregionc: String (0.0)
> nhsareac: String (0.0)
> countrys: String (0.0)
> countys: String (0.0)
> districts: String (0.0)
> wards: String (0.0)
> nhsregions: String (0.0)
> nhsareas: String (0.0)
>
> Thanks,
>
> Silas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From skyhisi at gmail.com  Fri Dec 16 08:18:16 2011
From: skyhisi at gmail.com (Silas Parker)
Date: Fri Dec 16 08:18:29 2011
Subject: [gdal-dev] OGR PG Driver 1.8 to 1.9 undocumented functionality
	change (bug?) with ExecuteSQL/GetSpatialRef
In-Reply-To: <1324039228.4eeb3c3ce5f90@webmail.free.fr>
References: <CAPB+iVdkjs+sS2XDdJUQB06ZFtWBq6eBLGQ4-Q8Td1wVvLX_8g@mail.gmail.com>
	<1324039228.4eeb3c3ce5f90@webmail.free.fr>
Message-ID: <CAPB+iVcOzqJryK58v=sN5mp3BXpcgLUj=xwnv120DCgQeKS3Wg@mail.gmail.com>

Hi,

I've updated my GDAL 1.9 build to SVN rev 23580 which is currently the
head revision.

I then ran the new commands and the previous set with the debug flag on.

The standard (not SQL) based command works fine, the SQL with a space
at the beginning still fails, SQL with no space at the beginning works
fine.

On GDAL 1.8:

$ ogrinfo -ro -so --debug on "PG:dbname=geocoder user=postgres
password=postgres" codepoint works

PG: DBName="geocoder"
PG: PostgreSQL version string : 'PostgreSQL 8.4.9 on
x86_64-pc-linux-gnu, compiled by GCC gcc-4.4.real (Ubuntu
4.4.3-4ubuntu5) 4.4.3, 64-bit'
PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
PG: Layer 'codepoint' geometry type: POINT:Point, Dim=2
OGR: OGROpen(PG:dbname=geocoder user=postgres
password=postgres/0xbaa520) succeeded as PostgreSQL.
INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
      using driver `PostgreSQL' successful.
OGR: GetLayerCount() = 1

PG: Primary key name (FID): ogc_fid
PG: Using column 'ogc_fid' as FID for table 'codepoint'

Layer name: codepoint
Geometry: Point
Feature Count: 1689582
Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
Layer SRS WKT:
PROJCS["OSGB 1936 / British National Grid",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646,
                AUTHORITY["EPSG","7001"]],
            AUTHORITY["EPSG","6277"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4277"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    AUTHORITY["EPSG","27700"],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH]]
FID Column = ogc_fid
Geometry Column = wkb_geometry
countyc: String (0.0)
wardc: String (0.0)
countryc: String (0.0)
countys: String (0.0)
postcode: String (0.0)
districtc: String (0.0)
wards: String (0.0)
districts: String (0.0)
nhsareas: String (0.0)
countrys: String (0.0)
nhsregions: String (0.0)
nhsareac: String (0.0)
nhsregionc: String (0.0)
ERROR 1: No field definitions found for 'works', is it a table?
FAILURE: Couldn't fetch requested layer works!
GDAL: In GDALDestroy - unloading GDAL shared library.


In GDAL 1.9:
$ ogrinfo -ro -so --debug on "PG:dbname=geocoder user=postgres
password=postgres" codepoint works
PG: DBName="geocoder"
PG: PostgreSQL version string : 'PostgreSQL 8.4.9 on
x86_64-pc-linux-gnu, compiled by GCC gcc-4.4.real (Ubuntu
4.4.3-4ubuntu5) 4.4.3, 64-bit'
PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
PG: Layer 'codepoint' geometry type: POINT:Point, Dim=2
OGR: OGROpen(PG:dbname=geocoder user=postgres
password=postgres/0x827500) succeeded as PostgreSQL.
INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
      using driver `PostgreSQL' successful.
OGR: GetLayerCount() = 1

PG: Primary key name (FID): ogc_fid
PG: Using column 'ogc_fid' as FID for table 'codepoint'

Layer name: codepoint
Geometry: Point
Feature Count: 1689582
Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
Layer SRS WKT:
PROJCS["OSGB 1936 / British National Grid",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646,
                AUTHORITY["EPSG","7001"]],
            AUTHORITY["EPSG","6277"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4277"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    AUTHORITY["EPSG","27700"],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH]]
FID Column = ogc_fid
Geometry Column = wkb_geometry
postcode: String (0.0)
countryc: String (0.0)
countyc: String (0.0)
districtc: String (0.0)
wardc: String (0.0)
nhsregionc: String (0.0)
nhsareac: String (0.0)
countrys: String (0.0)
countys: String (0.0)
districts: String (0.0)
wards: String (0.0)
nhsregions: String (0.0)
nhsareas: String (0.0)
ERROR 1: No field definitions found for 'works', is it a table?
FAILURE: Couldn't fetch requested layer works!
GDAL: In GDALDestroy - unloading GDAL shared library.

The original SQL queries with the debug flag:

In GDAL 1.8

$ ogrinfo -ro -so --debug on -sql " SELECT * FROM codepoint"
"PG:dbname=geocoder user=postgres password=postgres"PG:
DBName="geocoder"
PG: PostgreSQL version string : 'PostgreSQL 8.4.9 on
x86_64-pc-linux-gnu, compiled by GCC gcc-4.4.real (Ubuntu
4.4.3-4ubuntu5) 4.4.3, 64-bit'
PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
PG: Layer 'codepoint' geometry type: POINT:Point, Dim=2
OGR: OGROpen(PG:dbname=geocoder user=postgres
password=postgres/0x1d27520) succeeded as PostgreSQL.
INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
      using driver `PostgreSQL' successful.
PG: Command Results Tuples = 1689582

Layer name: sql_statement
Geometry: Unknown (any)
Feature Count: 1689582
Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
Layer SRS WKT:
PROJCS["OSGB 1936 / British National Grid",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646,
                AUTHORITY["EPSG","7001"]],
            AUTHORITY["EPSG","6277"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4277"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    AUTHORITY["EPSG","27700"],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH]]
FID Column = ogc_fid
Geometry Column = wkb_geometry
postcode: String (0.0)
countryc: String (0.0)
countyc: String (0.0)
districtc: String (0.0)
wardc: String (0.0)
nhsregionc: String (0.0)
nhsareac: String (0.0)
countrys: String (0.0)
countys: String (0.0)
districts: String (0.0)
wards: String (0.0)
nhsregions: String (0.0)
nhsareas: String (0.0)
OGR: GetLayerCount() = 1

In GDAL 1.9

$ ogrinfo -ro -so --debug on -sql " SELECT * FROM codepoint"
"PG:dbname=geocoder user=postgres password=postgres"
PG: DBName="geocoder"
PG: PostgreSQL version string : 'PostgreSQL 8.4.9 on
x86_64-pc-linux-gnu, compiled by GCC gcc-4.4.real (Ubuntu
4.4.3-4ubuntu5) 4.4.3, 64-bit'
PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
PG: Layer 'codepoint' geometry type: POINT:Point, Dim=2
OGR: OGROpen(PG:dbname=geocoder user=postgres
password=postgres/0x25724e0) succeeded as PostgreSQL.
INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
      using driver `PostgreSQL' successful.
PG: Command Results Tuples = 1689582
PG: 1689582 features read on layer 'sql_statement'.

Layer name: sql_statement
Geometry: Unknown (any)
Feature Count: 1689582
Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
Layer SRS WKT:
(unknown)
postcode: String (0.0)
countryc: String (0.0)
countyc: String (0.0)
districtc: String (0.0)
wardc: String (0.0)
nhsregionc: String (0.0)
nhsareac: String (0.0)
countrys: String (0.0)
countys: String (0.0)
districts: String (0.0)
wards: String (0.0)
nhsregions: String (0.0)
nhsareas: String (0.0)
Mem: 3379164 features read on layer 'sql_statement'.
OGR: GetLayerCount() = 1

Between 1.8 and 1.9 I notice that quite a bit of code has changed in
ogrpgdatasource.cpp OGRPGDataSource::ExecuteSQL starting on line 2289.
I don't know the code well enough to know if this change is
significant.

Thanks,
Silas

On 16 December 2011 12:40, Even Rouault <even.rouault@mines-paris.org> wrote:
> Selon Silas Parker <skyhisi@gmail.com>:
>
>> Hello,
>>
>> I've found that the behaviour of the PG (Postgres/Postgis) driver has
>> changed between 1.8 and 1.9 in ExecuteSQL that isn't listed in the
>> NEWS file.
>>
>> The Spatial reference system of a SQL query can not be obtained (using
>> GetSpatialRef) if the SQL query starts with white-space.
>>
>> This may be a bug, or an undocumented change in functionality!
>
> At first sight, it would look rather to be a bug than a desired change. Could
> you test if the following works with 1.8.0 and svn head ?
>
> ogrinfo -ro -so -sql "PG:dbname=geocoder user=postgres password=postgres"
> codepoint works
>
> It could be also usefull if you could attach the result of those commands with
> "--debug on" added on the command line.
>
>>
>> I am testing with trunk SVN rev 23573, on Ubuntu 10.04.
>>
>> The problem can be reproduced using ogrinfo, although I first observed
>> this in a different application.
>>
>> In version 1.8.0:
>>
>> $ ogrinfo --version
>> GDAL 1.8.0, released 2011/01/12
>>
>> $ ogrinfo -ro -so -sql " SELECT * FROM codepoint" "PG:dbname=geocoder
>> user=postgres password=postgres"
>> INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
>> ? ? ? using driver `PostgreSQL' successful.
>>
>> Layer name: sql_statement
>> Geometry: Unknown (any)
>> Feature Count: 1689582
>> Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
>> Layer SRS WKT:
>> PROJCS["OSGB 1936 / British National Grid",
>> ? ? GEOGCS["OSGB 1936",
>> ? ? ? ? DATUM["OSGB_1936",
>> ? ? ? ? ? ? SPHEROID["Airy 1830",6377563.396,299.3249646,
>> ? ? ? ? ? ? ? ? AUTHORITY["EPSG","7001"]],
>> ? ? ? ? ? ? AUTHORITY["EPSG","6277"]],
>> ? ? ? ? PRIMEM["Greenwich",0,
>> ? ? ? ? ? ? AUTHORITY["EPSG","8901"]],
>> ? ? ? ? UNIT["degree",0.01745329251994328,
>> ? ? ? ? ? ? AUTHORITY["EPSG","9122"]],
>> ? ? ? ? AUTHORITY["EPSG","4277"]],
>> ? ? UNIT["metre",1,
>> ? ? ? ? AUTHORITY["EPSG","9001"]],
>> ? ? PROJECTION["Transverse_Mercator"],
>> ? ? PARAMETER["latitude_of_origin",49],
>> ? ? PARAMETER["central_meridian",-2],
>> ? ? PARAMETER["scale_factor",0.9996012717],
>> ? ? PARAMETER["false_easting",400000],
>> ? ? PARAMETER["false_northing",-100000],
>> ? ? AUTHORITY["EPSG","27700"],
>> ? ? AXIS["Easting",EAST],
>> ? ? AXIS["Northing",NORTH]]
>> FID Column = ogc_fid
>> Geometry Column = wkb_geometry
>> postcode: String (0.0)
>> countryc: String (0.0)
>> countyc: String (0.0)
>> districtc: String (0.0)
>> wardc: String (0.0)
>> nhsregionc: String (0.0)
>> nhsareac: String (0.0)
>> countrys: String (0.0)
>> countys: String (0.0)
>> districts: String (0.0)
>> wards: String (0.0)
>> nhsregions: String (0.0)
>> nhsareas: String (0.0)
>>
>>
>> In version 1.9:
>>
>> $ ogrinfo --version
>> GDAL 1.9dev, released 2011/01/18
>>
>> $ ogrinfo -ro -so -sql " SELECT * FROM codepoint" "PG:dbname=geocoder
>> user=postgres password=postgres"
>> INFO: Open of `PG:dbname=geocoder user=postgres password=postgres'
>> ? ? ? using driver `PostgreSQL' successful.
>>
>> Layer name: sql_statement
>> Geometry: Unknown (any)
>> Feature Count: 1689582
>> Extent: (63215.000000, 8195.000000) - (655448.000000, 1213660.000000)
>> Layer SRS WKT:
>> (unknown)
>> postcode: String (0.0)
>> countryc: String (0.0)
>> countyc: String (0.0)
>> districtc: String (0.0)
>> wardc: String (0.0)
>> nhsregionc: String (0.0)
>> nhsareac: String (0.0)
>> countrys: String (0.0)
>> countys: String (0.0)
>> districts: String (0.0)
>> wards: String (0.0)
>> nhsregions: String (0.0)
>> nhsareas: String (0.0)
>>
>> Thanks,
>>
>> Silas
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
From pi_ml at sourcepole.com  Fri Dec 16 09:48:30 2011
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Fri Dec 16 09:48:43 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <4EE850CA.2070903@pobox.com>
References: <4EE850CA.2070903@pobox.com>
Message-ID: <201112161548.30722.pi_ml@sourcepole.com>

Hi Frank, all

Am Mittwoch, 14. Dezember 2011, um 08.31:22 schrieb Frank Warmerdam:
> Folks,
> 
> I would like to have a GDAL/OGR 1.9 release by the end of this year,
> ideally before Christmas.  We have not formalized a release process
> for the project, but I'd like to follow the approach of past years.
> This basically consists of a few beta releases, followed by a release
> candidate when things seem to be in good shape.  The release candidates
> would be voted on by the PSC before becoming official.
> 
> Anyone with significant work they would like to accomplish before 1.9.0
> should reply to this thread with information on the planned work.

I've created a patch adding read support for shapefile measure values:
http://trac.osgeo.org/gdal/ticket/2374
If someone could review the patch, I would like to include it in trunk for the 
1.9.0 release.
We're contracted to add shapefile measure value support in QGIS. And this 
enhancement gives QGIS the possibility to handle XYM geometries.

I'm also working on enhancements for the Interlis drivers, but the status 
isn't good enough for a release.

Regards
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com
From anton.korosov at nersc.no  Fri Dec 16 09:56:20 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Fri Dec 16 10:01:33 2011
Subject: [gdal-dev] Warping onto an image with only GCPs
In-Reply-To: <jcd1aj$vil$1@dough.gmane.org>
References: <jcd1aj$vil$1@dough.gmane.org>
Message-ID: <4EEB5C14.8020705@nersc.no>

Hi!

I'm not sure but probably my question is related to the one below.
I'm trying to mosaic one MODIS images onto another with GDAL:

gdal_translate 
HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MYD021KM.A2011228.0925.005.2011229003113.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB 
-b 1 /data/modis1.tif

gdal_translate 
HDF4_EOS:EOS_SWATH:"/Data/sat/GDAL_test/MOD021KM.A2011229.1125.005.2011229195243.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB 
-b 1 /data/modis2.tif

gdalwarp modis1.tif modis2.tif

Bu the results looks weird - the first image is on top of the second one 
but it is very small, distorted and in the top-left corner (though they 
cover approximately the same area).

Do I understand right that such operation would work only when the 
target image georeference is defined by GeoTransform and not by GCPs?

Can I also ask if it is a big work to include ability of GDAL to warp 
onto grid with GCPs (or RPC or geolocation array) ? And if it is planned 
in some future?

Thank you!
Anton

On 12/15/2011 03:47 PM, Knut-Frode Dagestad wrote:
> Hi,
>
> Hr?bjartur ?orsteinsson explained to me a near-hidden feature of GDAL,
> namely to reproject one image onto the coverage of another.
>
> Given two images:
> imageA.tiff
> imageB.tiff
>
> Then an empty image can be created from image A with e.g.
> $ gdal_translate -ot Float32 -scale 0 0 999 999 -a_nodata 999
> imageA.tiff domainA.tiff
>
> And then imageB can be warped onto the extent of this image simply with:
> $ gdalwarp imageB.tiff domainA.tiff
>
> domainA.tiff will then contain the data from imageB, exactly co-located
> with imageA.
>
> The problem is that this only works when imageA contains a geotransform,
> and not when it contains only GCPs.
>
>
> So my question is:
> Is there any workaround to warp data from one image onto another image
> which is geolocated by GCPs only?
>
>
>
> With the -to option of gdalwarp it is possible to pass some parameters
> to GDALCreateGenImgProjTransformer2(). In the documentation of this
> function I find the following option:
>
> "METHOD: may have a value which is one of GEOTRANSFORM, GCP_POLYNOMIAL,
> GCP_TPS, GEOLOC_ARRAY, RPC to force only one geolocation method to be
> considered on the source dataset."
> http://www.gdal.org/gdal__alg_8h.html#94cd172f78dbc41d6f407d662914f2e3
>
> But there is no corresponding option to force use of GCP_POLYNOMIAL for
> the *destination* dataset. I guess this is a bad sign?
>
>
> Thank you for any help!
> Knut-Frode
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From j.l.h.hartmann at uva.nl  Fri Dec 16 10:32:57 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Dec 16 11:30:04 2011
Subject: [gdal-dev] Warping without shear
In-Reply-To: <1323854574.4ee86aee06469@webmail.free.fr>
References: <4EE84A57.1080005@pobox.com>
	<1323854574.4ee86aee06469@webmail.free.fr>
Message-ID: <4EEB64A9.1080806@uva.nl>

Hi all,

Is it possible to do a first order GCP-warp *without* shearing? I have a 
rectangular scan with very imprecise control points, and I want it 
georeferenced without any distortion. With a first order gdalwarp I get 
back a map in the form of a parallellogram. Is there a way to get back 
the original rectangular form? Control points will be way off, of 
course, but I am interested in the original forms of the mapped items.

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111216/fe50819c/attachment.html
From even.rouault at mines-paris.org  Fri Dec 16 12:17:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 16 12:18:11 2011
Subject: [gdal-dev] OGR PG Driver 1.8 to 1.9 undocumented functionality
	change (bug?) with ExecuteSQL/GetSpatialRef
In-Reply-To: <CAPB+iVcOzqJryK58v=sN5mp3BXpcgLUj=xwnv120DCgQeKS3Wg@mail.gmail.com>
References: <CAPB+iVdkjs+sS2XDdJUQB06ZFtWBq6eBLGQ4-Q8Td1wVvLX_8g@mail.gmail.com>
	<1324039228.4eeb3c3ce5f90@webmail.free.fr>
	<CAPB+iVcOzqJryK58v=sN5mp3BXpcgLUj=xwnv120DCgQeKS3Wg@mail.gmail.com>
Message-ID: <201112161817.52497.even.rouault@mines-paris.org>

Le vendredi 16 d?cembre 2011 14:18:16, Silas Parker a ?crit :
> Hi,
> 
> I've updated my GDAL 1.9 build to SVN rev 23580 which is currently the
> head revision.
> 
> I then ran the new commands and the previous set with the debug flag on.
> 
> The standard (not SQL) based command works fine, the SQL with a space
> at the beginning still fails, SQL with no space at the beginning works
> fine.

Yes, that was indeed due to leading spaces and an unwanted side-effect of a 
recent change. Fixed in r23581. Thanks for reporting.
From jluis at ualg.pt  Fri Dec 16 12:25:48 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Dec 16 12:26:41 2011
Subject: [gdal-dev] Warping without shear
In-Reply-To: <4EEB64A9.1080806@uva.nl>
References: <4EE84A57.1080005@pobox.com>	<1323854574.4ee86aee06469@webmail.free.fr>
	<4EEB64A9.1080806@uva.nl>
Message-ID: <4EEB7F1C.5080001@ualg.pt>

On 16-12-2011 15:32, Jan Hartmann wrote:
> Hi all,
>
> Is it possible to do a first order GCP-warp *without* shearing? I have 
> a rectangular scan with very imprecise control points, and I want it 
> georeferenced without any distortion. With a first order gdalwarp I 
> get back a map in the form of a parallellogram. Is there a way to get 
> back the original rectangular form? Control points will be way off, of 
> course, but I am interested in the original forms of the mapped items.
>

Jan,

What you want is to apply a transformation called (at least on the 
Matlab parlance) "Linear conformal" which an afine transform but without 
the the shear terms. Mirone has it implemented and if your image has the 
GCPS embedded the operation is really simple.

Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111216/08342253/attachment.html
From Roger.Bivand at nhh.no  Fri Dec 16 12:47:11 2011
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Dec 16 12:50:21 2011
Subject: [gdal-dev] 
	OGR shapefile driver, field numerical scientific notation
Message-ID: <alpine.LRH.2.00.1112161829280.20029@reclus.nhh.no>

Hi,

I've been contacted off-list by users of OGR and shapelib compiled into R 
packages. They report recent ESRI shapefiles apparently writing very small 
floating point numbers in "e" format, which can be read but not be written 
with shapelib or the ESRI shapefile driver. The numbers were generated by 
computation on field values, some of which could be smaller than 1e-20. 
Their suggested resolution was to edit line 1347-8 in:

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/shape/dbfopen.c

  sprintf( szFormat, "%%%d.%df",
                    nWidth, psDBF->panFieldDecimals[iField] );


to accommodate a possible scientific notation. I did ask for example 
files, but they are content to use a locally modified shapelib.

Does anyone have access to ArcGIS to see what ends up in the DBF file, and 
thus create a test case? It seems that the function reading the DBF in 
shapelib and the OGR driver works OK, but what the value cannot be written 
out again. I can confirm from R that the value written out in the OGR 
driver for 1e-20 is read in again as 0. If a test case can be constructed, 
I'd be willing to file a bug/wish report and help see what could be done. 
I realise that ESRI are probably stretching what may be put into a DBF, 
but if they are doing this, it might be reasonable to do the same.

Best wishes,

Roger

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From warmerdam at pobox.com  Fri Dec 16 13:17:25 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 16 13:18:27 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <CA+TxYvMAe22H=TZk3cKQA3xgcuLHDdtYppmgKP8etnvT929-4Q@mail.gmail.com>
References: <4EE850CA.2070903@pobox.com>
	<CA+TxYvMAe22H=TZk3cKQA3xgcuLHDdtYppmgKP8etnvT929-4Q@mail.gmail.com>
Message-ID: <CA+YzLBcfk0Wc8cMMXSYLH7WNUF_YUd7KAct7w20t7yMRd==JfQ@mail.gmail.com>

On Wed, Dec 14, 2011 at 1:53 PM, Etienne Tourigny
<etourigny.dev@gmail.com> wrote:
> Frank, I have 2 issues I would like to address before 1.9 is released.
>
> 1) The ability to save the gdal commandline string and access it later.
>
> This is useful for the netcdf 'history' metadata, and consistent with
> all other software that manipulates netcdf files. ?Suggested patch
> adds 2 functions to gdal.h (only one is really needed) and modifies
> GDALGeneralCmdLineProcessor() slightly (because that is where the
> commandline is processed).
>
> Details and small patch are in bug #4297.

Etienne,

I am ambivalent about this extension to GDAL behavior.  Note
that GDALGeneralCmdLineProcessor() is sometimes used by
broader applications where it is not appropriate to record the
commandline in dataset metadata.  Imagine if someone had
launched OpenEV with a database connection string that included
userids and passwords and then during their session they saved
a result to a netcdf files and it ended up capturing their session
commandline?

> 2) Fixes to importFromESRI - bugs #4345 and #4378
>
> I have committed a fix ?to trunk (r23542) and it is optional, using a
> Configuration Option to be activated.
> It tries to fix missing parts of ESRI WKT (like TOWGS84 parameters and
> DATUM and GEOGCS EPSG codes).
> I would like to see if we can turn it on by default (at least for
> DATUM and TOWGS84).

I am terrified of this whole area of work, and have just tried
to keep away from it so I won't be responsible if it causes
problems.  I hope you will take a low risk approach to this
to minimize problems in 1.9.   I hope you are also cooperating
with ESRI staff to avoid to much conflict with their efforts.  They
have done a lot of work to try and improved the morph from/to
ESRI format and I'd hate to see that badly broken in 1.9.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Fri Dec 16 13:20:55 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 16 13:21:09 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <201112161548.30722.pi_ml@sourcepole.com>
References: <4EE850CA.2070903@pobox.com>
	<201112161548.30722.pi_ml@sourcepole.com>
Message-ID: <CA+YzLBcD1FSmBj6eJ2n_FMC1OUxG5kZnycFb9O8uFpDikwhvdA@mail.gmail.com>

Pirmin,

I have made a note to myself to look into this ticket tonight.

Best regards,

On Fri, Dec 16, 2011 at 6:48 AM, Pirmin Kalberer <pi_ml@sourcepole.com> wrote:
> Hi Frank, all
>
> Am Mittwoch, 14. Dezember 2011, um 08.31:22 schrieb Frank Warmerdam:
>> Folks,
>>
>> I would like to have a GDAL/OGR 1.9 release by the end of this year,
>> ideally before Christmas. ?We have not formalized a release process
>> for the project, but I'd like to follow the approach of past years.
>> This basically consists of a few beta releases, followed by a release
>> candidate when things seem to be in good shape. ?The release candidates
>> would be voted on by the PSC before becoming official.
>>
>> Anyone with significant work they would like to accomplish before 1.9.0
>> should reply to this thread with information on the planned work.
>
> I've created a patch adding read support for shapefile measure values:
> http://trac.osgeo.org/gdal/ticket/2374
> If someone could review the patch, I would like to include it in trunk for the
> 1.9.0 release.
> We're contracted to add shapefile measure value support in QGIS. And this
> enhancement gives QGIS the possibility to handle XYM geometries.
>
> I'm also working on enhancements for the Interlis drivers, but the status
> isn't good enough for a release.
>
> Regards
> Pirmin
>
> --
> Pirmin Kalberer
> Sourcepole ?- ?Linux & Open Source Solutions
> http://www.sourcepole.com



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From skyhisi at gmail.com  Fri Dec 16 13:45:08 2011
From: skyhisi at gmail.com (Silas Parker)
Date: Fri Dec 16 13:45:52 2011
Subject: [gdal-dev] OGR PG Driver 1.8 to 1.9 undocumented functionality
	change (bug?) with ExecuteSQL/GetSpatialRef
In-Reply-To: <201112161817.52497.even.rouault@mines-paris.org>
References: <CAPB+iVdkjs+sS2XDdJUQB06ZFtWBq6eBLGQ4-Q8Td1wVvLX_8g@mail.gmail.com>
	<1324039228.4eeb3c3ce5f90@webmail.free.fr>
	<CAPB+iVcOzqJryK58v=sN5mp3BXpcgLUj=xwnv120DCgQeKS3Wg@mail.gmail.com>
	<201112161817.52497.even.rouault@mines-paris.org>
Message-ID: <CAPB+iVeGj0CPNwkOoS_h35Asi5JbEuTx=nG5uHpCMPmhzE-mzg@mail.gmail.com>

On 16 December 2011 17:17, Even Rouault <even.rouault@mines-paris.org> wrote:
> Le vendredi 16 d?cembre 2011 14:18:16, Silas Parker a ?crit :
>> Hi,
>>
>> I've updated my GDAL 1.9 build to SVN rev 23580 which is currently the
>> head revision.
>>
>> I then ran the new commands and the previous set with the debug flag on.
>>
>> The standard (not SQL) based command works fine, the SQL with a space
>> at the beginning still fails, SQL with no space at the beginning works
>> fine.
>
> Yes, that was indeed due to leading spaces and an unwanted side-effect of a
> recent change. Fixed in r23581. Thanks for reporting.

Thank you for fixing this.

Silas
From j.l.h.hartmann at uva.nl  Fri Dec 16 13:50:10 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Dec 16 13:50:25 2011
Subject: [gdal-dev] Warping without shear
In-Reply-To: <4EEB7F1C.5080001@ualg.pt>
References: <4EE84A57.1080005@pobox.com>	<1323854574.4ee86aee06469@webmail.free.fr>
	<4EEB64A9.1080806@uva.nl> <4EEB7F1C.5080001@ualg.pt>
Message-ID: <4EEB92E2.5000305@uva.nl>

On 16-12-2011 18:25, Joaquim Luis wrote:
> Jan,
>
> What you want is to apply a transformation called (at least on the 
> Matlab parlance) "Linear conformal" which an afine transform but 
> without the the shear terms. Mirone has it implemented and if your 
> image has the GCPS embedded the operation is really simple.
Thanks Joaquim, that's exactly what I meant. How can I use Mirone's 
implementation?

Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111216/785f86f6/attachment.html
From jluis at ualg.pt  Fri Dec 16 14:21:17 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Dec 16 14:21:46 2011
Subject: [gdal-dev] Warping without shear
In-Reply-To: <4EEB92E2.5000305@uva.nl>
References: <4EE84A57.1080005@pobox.com>	<1323854574.4ee86aee06469@webmail.free.fr>
	<4EEB64A9.1080806@uva.nl> <4EEB7F1C.5080001@ualg.pt>
	<4EEB92E2.5000305@uva.nl>
Message-ID: <4EEB9A2D.6000107@ualg.pt>

On 16-12-2011 18:50, Jan Hartmann wrote:
> On 16-12-2011 18:25, Joaquim Luis wrote:
>> Jan,
>>
>> What you want is to apply a transformation called (at least on the 
>> Matlab parlance) "Linear conformal" which an afine transform but 
>> without the the shear terms. Mirone has it implemented and if your 
>> image has the GCPS embedded the operation is really simple.
> Thanks Joaquim, that's exactly what I meant. How can I use Mirone's 
> implementation?

See the manual for example at (the program comes with a .chm version 
too). Expand the "Image->Register Image" entry

http://w3.ualg.pt/~jluis/mirone_/files/DrawGCPoints2.html

the above link is from an old-to-be-updated page. For program download 
use w3.ualg.pt/~jluis/mirone

Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111216/7c0e6c9b/attachment-0001.html
From even.rouault at mines-paris.org  Fri Dec 16 15:04:13 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 16 15:04:41 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <201112161548.30722.pi_ml@sourcepole.com>
References: <4EE850CA.2070903@pobox.com>
	<201112161548.30722.pi_ml@sourcepole.com>
Message-ID: <201112162104.13514.even.rouault@mines-paris.org>

Le vendredi 16 d?cembre 2011 15:48:30, Pirmin Kalberer a ?crit :
> Hi Frank, all
> 
> Am Mittwoch, 14. Dezember 2011, um 08.31:22 schrieb Frank Warmerdam:
> > Folks,
> > 
> > I would like to have a GDAL/OGR 1.9 release by the end of this year,
> > ideally before Christmas.  We have not formalized a release process
> > for the project, but I'd like to follow the approach of past years.
> > This basically consists of a few beta releases, followed by a release
> > candidate when things seem to be in good shape.  The release candidates
> > would be voted on by the PSC before becoming official.
> > 
> > Anyone with significant work they would like to accomplish before 1.9.0
> > should reply to this thread with information on the planned work.
> 
> I've created a patch adding read support for shapefile measure values:
> http://trac.osgeo.org/gdal/ticket/2374
> If someone could review the patch, I would like to include it in trunk for
> the 1.9.0 release.

Pirmin,

I see you just report the M coordinate as the Z coordinate. I feel that the 
approach proposed is a bit hackish... There should be a way for the user to 
know if it is M or Z that he gets. IMHO, the right approach would be to 
implement proper M support in OGR Geometry classes, and that the Shapefile 
driver uses a specific method to set M values. I see there's explicit M support 
in the OGC OpenGIS Implementation Specification for Geographic information - 
Simple feature access - Part 1: Common architecture 

That will require more work...

Best regards,

Even 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111216/89e5d1e3/attachment.html
From rjpawley at shaw.ca  Fri Dec 16 16:14:38 2011
From: rjpawley at shaw.ca (Bob Pawley)
Date: Fri Dec 16 16:15:15 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
Message-ID: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>

I have imported a dxf file into Postgis using the following command line -

set DXF_INLINE_BLOCKS=FALSE&set DXF_MERGE_BLOCK_GEOMETRIES=FALSE&set PGCLIENTENCODING=LATIN1&&ogr2ogr -f "PostgreSQL" PG:"host=localhost user=postgres dbname=dbname password=pass"  W_Works.dxf -nln Import_PID -overwrite ?skipfailures 

All geometries are intact.

However, the text is part of the Linestring layer and not in the text column 
of the Postgresql table.

Is this to be expected?

Is there some way of screening out the text as text and point geometry?

Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111216/aff7342e/attachment.html
From pbrosson2006 at free.fr  Fri Dec 16 18:12:44 2011
From: pbrosson2006 at free.fr (philippe brosson)
Date: Fri Dec 16 18:20:22 2011
Subject: [gdal-dev] Mac OS X tiger Drag & Drop GDAL
Message-ID: <DE352268-6D6F-4F6B-A77B-541AFA7AEB9C@free.fr>


Thanks to GDAL developers and William Kyngesburye's  help (http:// 
www.kyngchaos.com/software:frameworks), i could build a standalone  
GUI for gdal_translate and gdalinfo for Macintosh PPC Mac OS X Tiger  
(10.4)
It is a drag & drop application for converting a JPEG map into an IGN  
Geoportail , DATUM=RGF93, PROJ=GEOPORTALFXX ECW map. Reverse  
conversion ECW to JPEG is also possible.
The only requirement is to have a script file containing the  
coordinates of the upper and lower corner of the map, and that this  
script be in the same directory as the JPEG map file.
I would like to share  this software (in a dmg file) for free by  
posting on my website or any place. ERMapper license for libecwj2 is  
extremely complex and i do not understand what is allowed and what is  
not. Do you think that this would be legal?

More details on the software:
There are 3 applications:
1/
Jpeg2ECW_geoRef.app  which contains gdal_translate, gdalinfo and the  
4 libraries libgdal.1.dylib, libNCSCnet.0.dylib,libNCSEcw. 
0.dylib,libNCSUtil.0.dylib
and a script running gdal_translate $1 $1.ecw
Another script file containing the coordinates of the upper and lower  
corners of the map,

2/
ECW2JPEG.app  which contains gdal_translate, and the 4 libraries  
libgdal.1.dylib, libNCSCnet.0.dylib,libNCSEcw.0.dylib,libNCSUtil.0.dylib
and a script running gdal_translate  $1 $1.JPEG

3/
GDAL_Info.app  which contains gdalinfo, and the 4 libraries libgdal. 
1.dylib, libNCSCnet.0.dylib,libNCSEcw.0.dylib,libNCSUtil.0.dylib
and a script running  gdalinfo  $1

gdal_translate and gdalinfo are the standard command line binaries

These drag & drop Mac OS X Application have been created thanks to  
Open source Platypus developer tool by Sveinbjorn Thordarson
This is a very clever and easy to use tool.

Regards,
philippe
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111217/0781c33c/attachment.html
From mateusz at loskot.net  Fri Dec 16 18:25:07 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Fri Dec 16 18:25:31 2011
Subject: [gdal-dev] Re: Runtime error on executing "OGRRegisterAll()"
	function.
In-Reply-To: <1324022176062-7099963.post@n2.nabble.com>
References: <1264426245484-4453903.post@n2.nabble.com>
	<4B5EE128.3020806@loskot.net>
	<1264596958438-4466974.post@n2.nabble.com>
	<4B60E27B.40704@loskot.net> <4B661D80.2090008@loskot.net>
	<1323949789335-7096855.post@n2.nabble.com>
	<CABUeae81dcd1qje4Mysd_Q-=b=uJOJ8v7VRPqNeEWKojr_5Y_g@mail.gmail.com>
	<1323963182037-7097491.post@n2.nabble.com>
	<CABUeae8KWWFvnZdd1atqR+0bnC6uGMYcpVtb_U8deLwOooo+Tw@mail.gmail.com>
	<1324022176062-7099963.post@n2.nabble.com>
Message-ID: <CABUeae84SPS51SpSh6MLa2dfOZZORBy6-1XQj_60ptQknq8qyQ@mail.gmail.com>

On 16 December 2011 07:56, mrym <meryemvrl@gmail.com> wrote:
> Thanks. I've done things you have written, but it's still same.

It is hard to judge what is wrong there.
It smells like memory corruption, memory allocations passed
boundaries of modules, mixed C/C++ run-times.
(see GDAL FAQ for links which may be helpful).

In such cases, I usually find GDAL crashing around VSI system:
http://trac.osgeo.org/gdal/browser/trunk/gdal/port/cpl_vsil.cpp
during cleanup, when std::map tree is cleared and deallocated.
In most cases, it was related to mixed C/C++ run-times.

Try dumpbin GDAL binaries and your DLLs to verify what run-time
modules are really linked
dumpbin /all gdal19.dll | find /i "msvc"
etc.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From j.l.h.hartmann at uva.nl  Sat Dec 17 05:14:26 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Dec 17 05:14:03 2011
Subject: [gdal-dev] Warping without shear
In-Reply-To: <4EEB9A2D.6000107@ualg.pt>
References: <4EE84A57.1080005@pobox.com>	<1323854574.4ee86aee06469@webmail.free.fr>
	<4EEB64A9.1080806@uva.nl> <4EEB7F1C.5080001@ualg.pt>
	<4EEB92E2.5000305@uva.nl> <4EEB9A2D.6000107@ualg.pt>
Message-ID: <4EEC6B82.9090901@uva.nl>

Ah, Mirone is a Matlab based graphical interface to Gdal, that uses 
Matlab routines for warping in addition to Gdal. What I am looking for 
is a command-line tool to warp an image without any shearing. Ideally in 
the form of an option to Gdal. Is this possible, or can it be made? It 
wouldn't be too difficult to adapt the -order 1 flag so as to leave out 
the shearing.

Jan

On 12/16/2011 08:21 PM, Joaquim Luis wrote:
> On 16-12-2011 18:50, Jan Hartmann wrote:
>> On 16-12-2011 18:25, Joaquim Luis wrote:
>>> Jan,
>>>
>>> What you want is to apply a transformation called (at least on the 
>>> Matlab parlance) "Linear conformal" which an afine transform but 
>>> without the the shear terms. Mirone has it implemented and if your 
>>> image has the GCPS embedded the operation is really simple.
>> Thanks Joaquim, that's exactly what I meant. How can I use Mirone's 
>> implementation?
>
> See the manual for example at (the program comes with a .chm version 
> too). Expand the "Image->Register Image" entry
>
> http://w3.ualg.pt/~jluis/mirone_/files/DrawGCPoints2.html
>
> the above link is from an old-to-be-updated page. For program download 
> use w3.ualg.pt/~jluis/mirone
>
> Joaquim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111217/a918a5c6/attachment-0001.html
From nezmar at tutok.sk  Sat Dec 17 07:38:16 2011
From: nezmar at tutok.sk (Marian Krivos)
Date: Sat Dec 17 06:45:39 2011
Subject: [gdal-dev] Bug in GDALGetRasterSampleOverview
Message-ID: <4EEC8D38.8080500@tutok.sk>

Hello,

current implementation of GDALGetRasterSampleOverview() don't work
properly for big rasters
over 2GB because of integer overflow.

Solutions is replace int for unsigned long at the price of API/ABI broke.

best regards
Marian Krivos
From even.rouault at mines-paris.org  Sat Dec 17 06:57:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 17 06:57:16 2011
Subject: [gdal-dev] Bug in GDALGetRasterSampleOverview
In-Reply-To: <4EEC8D38.8080500@tutok.sk>
References: <4EEC8D38.8080500@tutok.sk>
Message-ID: <201112171257.07106.even.rouault@mines-paris.org>

Le samedi 17 d?cembre 2011 13:38:16, Marian Krivos a ?crit :
> Hello,
> 
> current implementation of GDALGetRasterSampleOverview() don't work
> properly for big rasters
> over 2GB because of integer overflow.
> 
> Solutions is replace int for unsigned long at the price of API/ABI broke.

Something you might want to add in 
http://trac.osgeo.org/gdal/wiki/GDAL20Changes

Actually, GIntBig which is guaranteed to be 64bits even on 32bit platform 
would be better.

But for now, you can pretty much copy&paste the current implementation. It is 
just a few lines long and only uses methods available in public API.

> 
> best regards
> Marian Krivos
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mateusz at loskot.net  Sat Dec 17 09:30:09 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Sat Dec 17 09:30:14 2011
Subject: [gdal-dev] Bug in GDALGetRasterSampleOverview
In-Reply-To: <201112171257.07106.even.rouault@mines-paris.org>
References: <4EEC8D38.8080500@tutok.sk>
	<201112171257.07106.even.rouault@mines-paris.org>
Message-ID: <CABUeae_mocNF=09JuxDm3Bp89-vMS9UX50uyKXCVcvNJM2Snsw@mail.gmail.com>

On 17 December 2011 11:57, Even Rouault <even.rouault@mines-paris.org> wrote:
> Le samedi 17 d?cembre 2011 13:38:16, Marian Krivos a ?crit :
>> Hello,
>>
>> current implementation of GDALGetRasterSampleOverview() don't work
>> properly for big rasters
>> over 2GB because of integer overflow.
>>
>> Solutions is replace int for unsigned long at the price of API/ABI broke.
>
> Something you might want to add in
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes
>
> Actually, GIntBig which is guaranteed to be 64bits even on 32bit platform
> would be better.

Even,

If you consider changing int to GIntBig in GDAL 2.0, perhaps you could
consider  to change it to more appropriate types for any raster-space
calculations. Neither int, nor GIntBig is a correct memsize-type [1]
It is not about size of memsize-type, but also about type.
It is not about size, but about size and type.
I can't see benefits of reinventing memsize-types and using custom types
when C and C++ has been equipped with memsize types for long time now.

Please, consider switching to correct memsize-types
once and for good: ptrdiff_t and size_t.
I'm willing to help in implementing such switch.

[1] http://www.viva64.com/en/l/0013/

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From warmerdam at pobox.com  Sat Dec 17 10:51:35 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Dec 17 10:51:59 2011
Subject: [gdal-dev] Bug in GDALGetRasterSampleOverview
In-Reply-To: <4EEC8D38.8080500@tutok.sk>
References: <4EEC8D38.8080500@tutok.sk>
Message-ID: <4EECBA87.5060100@pobox.com>

On 11-12-17 04:38 AM, Marian Krivos wrote:
> Hello,
>
> current implementation of GDALGetRasterSampleOverview() don't work
> properly for big rasters
> over 2GB because of integer overflow.

Marian,

I mildly dispute this.  It is just that you can't express a desire to find
an overview with more than 2 billion pixels in it.  The raster itself can
be arbitrarily large.  I would claim it is not a common case at all to want
to do random sampling (this function primarily is used by
GDALGetRandomRasterSample()) of more than two billion samples and return it
in a simple array.  If you want very dense sampling you should be using some
sort of streaming process.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

From pi_ml at sourcepole.com  Sat Dec 17 12:40:02 2011
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Sat Dec 17 12:40:46 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <201112162104.13514.even.rouault@mines-paris.org>
References: <4EE850CA.2070903@pobox.com>
	<201112161548.30722.pi_ml@sourcepole.com>
	<201112162104.13514.even.rouault@mines-paris.org>
Message-ID: <1836496.bfrTWSjMFs@polarwind2>

Am Freitag, 16. Dezember 2011, 21.04:13 schrieb Even Rouault:
> Le vendredi 16 d?cembre 2011 15:48:30, Pirmin Kalberer a ?crit :
> > Hi Frank, all
> > 
> > Am Mittwoch, 14. Dezember 2011, um 08.31:22 schrieb Frank Warmerdam:
> > > Folks,
> > > 
> > > I would like to have a GDAL/OGR 1.9 release by the end of this year,
> > > ideally before Christmas.  We have not formalized a release process
> > > for the project, but I'd like to follow the approach of past years.
> > > This basically consists of a few beta releases, followed by a
> > > release
> > > candidate when things seem to be in good shape.  The release
> > > candidates
> > > would be voted on by the PSC before becoming official.
> > > 
> > > Anyone with significant work they would like to accomplish before
> > > 1.9.0
> > > should reply to this thread with information on the planned work.
> > 
> > I've created a patch adding read support for shapefile measure values:
> > http://trac.osgeo.org/gdal/ticket/2374
> > If someone could review the patch, I would like to include it in trunk
> > for the 1.9.0 release.
> 
> Pirmin,
> 
> I see you just report the M coordinate as the Z coordinate. I feel that the
> approach proposed is a bit hackish... There should be a way for the user to
> know if it is M or Z that he gets. IMHO, the right approach would be to
> implement proper M support in OGR Geometry classes, and that the Shapefile
> driver uses a specific method to set M values. I see there's explicit M
> support in the OGC OpenGIS Implementation Specification for Geographic
> information - Simple feature access - Part 1: Common architecture

Hi Even,

Would be nice to have full support for XYM and XYZM geometries. I don't know 
how much work it would require. This minimalistic support for XYM geometries 
was discussed a few times in the last years and it's better than nothing IMHO.
Talking about extending the internal OGR data model, support for multiple 
geometries in a layer would have much higher priority for me...

Regards
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

From lauri.kajan at gmail.com  Mon Dec 19 02:01:04 2011
From: lauri.kajan at gmail.com (Lauri Kajan)
Date: Mon Dec 19 02:01:33 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <1836496.bfrTWSjMFs@polarwind2>
References: <4EE850CA.2070903@pobox.com>
	<201112161548.30722.pi_ml@sourcepole.com>
	<201112162104.13514.even.rouault@mines-paris.org>
	<1836496.bfrTWSjMFs@polarwind2>
Message-ID: <CAKWoFMLy6o2AQfYd9xCPbb=+kPfsmDCPBiyh5dGnBpiFGM3yMw@mail.gmail.com>

Hi all,

I would be more than happy if there was xyzm support in OGR. But I
thought this won't happen until we decide to implement OGC Simple
Feature Access 1.2 specification.
Now ogr implements Simple Feature 1.1 that does not support M-values
or even Z-coordinates.

It would be nice to see this in GDAL 2.0

-Lauri



On Sat, Dec 17, 2011 at 7:40 PM, Pirmin Kalberer <pi_ml@sourcepole.com> wrote:
> Am Freitag, 16. Dezember 2011, 21.04:13 schrieb Even Rouault:
>> Le vendredi 16 d?cembre 2011 15:48:30, Pirmin Kalberer a ?crit :
>> > Hi Frank, all
>> >
>> > Am Mittwoch, 14. Dezember 2011, um 08.31:22 schrieb Frank Warmerdam:
>> > > Folks,
>> > >
>> > > I would like to have a GDAL/OGR 1.9 release by the end of this year,
>> > > ideally before Christmas. ?We have not formalized a release process
>> > > for the project, but I'd like to follow the approach of past years.
>> > > This basically consists of a few beta releases, followed by a
>> > > release
>> > > candidate when things seem to be in good shape. ?The release
>> > > candidates
>> > > would be voted on by the PSC before becoming official.
>> > >
>> > > Anyone with significant work they would like to accomplish before
>> > > 1.9.0
>> > > should reply to this thread with information on the planned work.
>> >
>> > I've created a patch adding read support for shapefile measure values:
>> > http://trac.osgeo.org/gdal/ticket/2374
>> > If someone could review the patch, I would like to include it in trunk
>> > for the 1.9.0 release.
>>
>> Pirmin,
>>
>> I see you just report the M coordinate as the Z coordinate. I feel that the
>> approach proposed is a bit hackish... There should be a way for the user to
>> know if it is M or Z that he gets. IMHO, the right approach would be to
>> implement proper M support in OGR Geometry classes, and that the Shapefile
>> driver uses a specific method to set M values. I see there's explicit M
>> support in the OGC OpenGIS Implementation Specification for Geographic
>> information - Simple feature access - Part 1: Common architecture
>
> Hi Even,
>
> Would be nice to have full support for XYM and XYZM geometries. I don't know
> how much work it would require. This minimalistic support for XYM geometries
> was discussed a few times in the last years and it's better than nothing IMHO.
> Talking about extending the internal OGR data model, support for multiple
> geometries in a layer would have much higher priority for me...
>
> Regards
> Pirmin
>
> --
> Pirmin Kalberer
> Sourcepole ?- ?Linux & Open Source Solutions
> http://www.sourcepole.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Ralf.Suhr at itc-halle.de  Mon Dec 19 03:58:31 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Mon Dec 19 03:59:57 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
Message-ID: <201112190958.31190.Ralf.Suhr@itc-halle.de>

Hi Bob,

the dxf driver writes to tables "entities" and "blocks". You have to 
dereference the block layer yourself.

SELECT Translate( Scale( Rotate((Dump(b.wkb_geometry)).geom, e.blockangle / 
180 * PI()), e.blockscale[1], e.blockscale[2]), ST_X(e.wkb_geometry), 
ST_Y(e.wkb_geometry)) AS wkb_geometry,
  CASE WHEN b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS 
ogr_style,
  e.layer,
  e.linetype,
  e.subclasses,
  b.text
FROM entities e
  INNER JOIN
  blocks b USING (blockname);

Sometimes you have blocks with world coordinates and no connection in 
entities.
SELECT (Dump(b.wkb_geometry)).geom AS wkb_geometry,
  b.ogr_style,
  b.layer,
  b.linetype,
  b.subclasses,
  b.text
FROM blocks b
WHERE blockname NOT IN
  (
    SELECT DISTINCT blockname
    FROM entities
    WHERE blockname IS NOT NULL
  );

Some newer DXF Formats can have features in paper space. This is now not 
supported by ogr2ogr.


Gr
Ralf

On Freitag 16 Dezember 2011 22:14:38 Bob Pawley wrote:
> I have imported a dxf file into Postgis using the following command line -
> 
> set DXF_INLINE_BLOCKS=FALSE&set DXF_MERGE_BLOCK_GEOMETRIES=FALSE&set
> PGCLIENTENCODING=LATIN1&&ogr2ogr -f "PostgreSQL" PG:"host=localhost
> user=postgres dbname=dbname password=pass"  W_Works.dxf -nln Import_PID
> -overwrite ?skipfailures
> 
> All geometries are intact.
> 
> However, the text is part of the Linestring layer and not in the text
> column of the Postgresql table.
> 
> Is this to be expected?
> 
> Is there some way of screening out the text as text and point geometry?
> 
> Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111219/623db32e/attachment.html
From brfr at metrico.lu  Mon Dec 19 05:02:13 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Mon Dec 19 05:02:43 2011
Subject: [gdal-dev] [python] OGR feature to GeoJSON TypeError
Message-ID: <4EEF0BA5.9060107@metrico.lu>

Hi,

There seems to be a problem with the feature export to GeoJSON. I 
created a small example:

Python 2.6.6 (r266:84292, Dec 26 2010, 22:31:48)
[GCC 4.4.5] on linux2
Type "help", "copyright", "credits" or "license" for more information.
 >>> import os
 >>> from osgeo import ogr
 >>> ds = ogr.Open(os.path.join(os.getcwd(), 'points.shp'))
 >>> ds
<osgeo.ogr.DataSource; proxy of <Swig Object of type 
'OGRDataSourceShadow *' at 0x7ff61b905a50> >
 >>> for i in xrange(ds.GetLayerCount()):
...     layer = ds.GetLayer(i)
...     f = layer.GetNextFeature()
...     while f:
...             fj = f.ExportToJson()
...             f = layer.GetNextFeature()
...
Traceback (most recent call last):
   File "<stdin>", line 5, in <module>
   File "/usr/lib/python2.6/dist-packages/osgeo/ogr.py", line 2399, in 
ExportToJson
     'geometry': self.GetGeometryRef().ExportToJson(as_object=True),
TypeError: ExportToJson() got an unexpected keyword argument 'as_object'
 >>> from osgeo import gdal
 >>> gdal.VersionInfo()
'1730'
 >>>

Maybe it's only my rather old gdal version and this is already fixed, 
but I thought I mention this better

HTH

Frank

-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From even.rouault at mines-paris.org  Mon Dec 19 05:54:58 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec 19 05:55:11 2011
Subject: [gdal-dev] [python] OGR feature to GeoJSON TypeError
In-Reply-To: <4EEF0BA5.9060107@metrico.lu>
References: <4EEF0BA5.9060107@metrico.lu>
Message-ID: <1324292098.4eef180248dc7@webmail.free.fr>

Frank

Should be fixed in GDAL 1.8.0. See http://trac.osgeo.org/gdal/ticket/3870

Best regards,

Even
From brfr at metrico.lu  Mon Dec 19 07:21:54 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Mon Dec 19 07:22:33 2011
Subject: [gdal-dev] [python] OGR feature to GeoJSON TypeError
In-Reply-To: <1324292098.4eef180248dc7@webmail.free.fr>
References: <4EEF0BA5.9060107@metrico.lu>
	<1324292098.4eef180248dc7@webmail.free.fr>
Message-ID: <4EEF2C62.6070703@metrico.lu>

Thanks Even,

I really should find a way to use a more recent version of gdal on my 
debian system. My only concern is to break package compatibility for 
other software that relies on the debian-version of gdal. Looks like a 
holiday project to find out how to do this :-)

Frank

Am 19.12.2011 11:54, schrieb Even Rouault:
> Frank
>
> Should be fixed in GDAL 1.8.0. See http://trac.osgeo.org/gdal/ticket/3870
>
> Best regards,
>
> Even
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From jukka.rahkonen at mmmtike.fi  Mon Dec 19 07:57:05 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Dec 19 07:57:30 2011
Subject: [gdal-dev] WFS driver, ogrinfo and GetFeature
Message-ID: <loom.20111219T132542-893@post.gmane.org>

Hi,

If user wants to read a summary of a certain WFS feature type with a command like

ogrinfo -ro -so WFS:http://server.com/wfs ns:typeName 

GDAL seems to send then four separate commands:

First:
SERVICE=WFS&REQUEST=GetCapabilities&ACCEPTVERSIONS=1.1.0,1.0.0
Second:
SERVICE=WFS&VERSION=1.1.0&REQUEST=DescribeFeatureType&TYPENAME=[list of all the
typenames in the whole service]
Third:
SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=ns:typeName&RESULTTYPE=hits
Fourth:
SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=ns:typeName

Questions:
- Why to send DescribeFeatureType for all the feature types when user is only
interested in the named one "ns:typeName"? 
- Is is necessary to send the fourth request and read the whole layer from the
service? I guess it is because GDAL wants to see the real geometries so it can
calculate correct extents for the layer but it can be quite a heavy load for the
WFS server.

In fact the following line leads to an ultimate query "get everything that
exists in the WFS service"

orginfo -al -so WFS:http://server.com/wfs

This will make one by one full GetFeatures for all the feature types in the
whole service. My service has 55 feature types and many of them has more than
million features and ogrinfo will probably fail if my server won't fail earlier
with sending a few gigabytes of GML. I consider it a little bit dangerous that
users can send such requests accidentally. I think that at least users should
especially do something before GDAL would create the fourth request, the plain
GetFeature.

-Jukka Rahkonen-


From chaitanya.ch at gmail.com  Mon Dec 19 08:40:06 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Dec 19 08:40:10 2011
Subject: [gdal-dev] Re: error by starting gdal_merge.bat (win7,
	fwtools 2.4.7)
In-Reply-To: <4EEF38AC.4010702@tappenbeck.net>
References: <4ED3AEE3.9060203@widemann.de>
	<CAMKgpOb48GhN0tRKGZqaw6BHiYCgpeO2jGsAiqRYAOC=e_4k2g@mail.gmail.com>
	<4EEF38AC.4010702@tappenbeck.net>
Message-ID: <CAMKgpOZUBKKnrRzYVRPbph99T5nxSZOm3VJDdqJ7hojmgGoKTw@mail.gmail.com>

Jan,

That package contains minimalist executables. It does not contain the
pythin scripts. Use OSGeo4W to install it.

On Mon, Dec 19, 2011 at 6:44 PM, Jan Tappenbeck <osm@tappenbeck.net> wrote:

>
>
> HI !
>
> i download http://download.osgeo.org/**gdal/win32/1.6/**
> gdalwin32exe160.zip<http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip>- but i did not found gdal_merge here ?
>
> is this the wrong package ?
>
> regards Jan :-)
>
> Am 28.11.2011 18:53, schrieb Chaitanya kumar CH:
>
>> Jan,
>>
>> A problem like this could be caused by any number of reasons.
>> FWTools-2.4.7 for windows is pretty outdated. It's better to uninstall
>> it and use the binaries from OSGeo4W [1].
>> See if the error is resolved when using it.
>>
>> [1]: http://trac.osgeo.org/gdal/**wiki/DownloadingGdalBinaries#**OSGeo4W<http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries#OSGeo4W>
>>
>> On Mon, Nov 28, 2011 at 9:25 PM, Jan Tappenbeck <tappenbeck@widemann.de
>> <mailto:tappenbeck@widemann.de**>> wrote:
>>
>>
>>
>>      Hi !
>>
>>    i try to start a gdal_merge by win7 64 bit and the fwtools 2.4.7
>>
>>    gdal_merge.bat -ul_lr 2601660.7343  5477349.8203  2607572.5742
>>      5475273.3574 -of GTiff -o %output%_number.tif %input%
>>
>>    but i get the message
>>
>>
>>    C:\Program Files (x86)\FWTools2.4.7>echo off
>>    Traceback (most recent call last):
>>      File "C:\PROGRA~2\FWTOOL~1.7\bin\__**gdal_merge.py", line 463, in ?
>>        sys.exit(main())
>>      File "C:\PROGRA~2\FWTOOL~1.7\bin\__**gdal_merge.py", line 433, in
>> main
>>
>>        if quiet == 0 and verbose == 0:
>>    UnboundLocalError: local variable 'quiet' referenced before assignment
>>    C:\Program Files (x86)\FWTools2.4.7>
>>
>>    could everyone tell me the reason for this message ?
>>
>>    reagards Jan :-)
>>
>>    ______________________________**___________________
>>    gdal-dev mailing list
>>    gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.**org<gdal-dev@lists.osgeo.org>
>> >
>>    http://lists.osgeo.org/__**mailman/listinfo/gdal-dev<http://lists.osgeo.org/__mailman/listinfo/gdal-dev>
>>
>>    <http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>> >
>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>>
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111219/a1fdec66/attachment.html
From jrepetto at free.fr  Mon Dec 19 08:53:12 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Dec 19 08:53:47 2011
Subject: [gdal-dev] error by starting gdal_merge.bat (win7, fwtools 2.4.7)
In-Reply-To: <4ED3AEE3.9060203@widemann.de>
References: <4ED3AEE3.9060203@widemann.de>
Message-ID: <4EEF41C8.9000601@free.fr>

Le 28/11/2011 16:55, Jan Tappenbeck a ?crit :
>
>
> Hi !
>
> i try to start a gdal_merge by win7 64 bit and the fwtools 2.4.7
>
> gdal_merge.bat -ul_lr 2601660.7343 5477349.8203 2607572.5742
> 5475273.3574 -of GTiff -o %output%_number.tif %input%
>

Hi,

gdal_merge.py is only an example program to show how to use the Python API.
To merge files, you should use gdalwarp.

Jean-Claude

From even.rouault at mines-paris.org  Mon Dec 19 08:55:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec 19 08:56:01 2011
Subject: [gdal-dev] WFS driver, ogrinfo and GetFeature
In-Reply-To: <loom.20111219T132542-893@post.gmane.org>
References: <loom.20111219T132542-893@post.gmane.org>
Message-ID: <1324302949.4eef4265ab204@webmail.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>:

> Hi,
>
> If user wants to read a summary of a certain WFS feature type with a command
> like
>
> ogrinfo -ro -so WFS:http://server.com/wfs ns:typeName
>
> GDAL seems to send then four separate commands:
>
> First:
> SERVICE=WFS&REQUEST=GetCapabilities&ACCEPTVERSIONS=1.1.0,1.0.0
> Second:
> SERVICE=WFS&VERSION=1.1.0&REQUEST=DescribeFeatureType&TYPENAME=[list of all
> the
> typenames in the whole service]
> Third:
>
SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=ns:typeName&RESULTTYPE=hits
> Fourth:
> SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=ns:typeName
>
> Questions:
> - Why to send DescribeFeatureType for all the feature types when user is only
> interested in the named one "ns:typeName"?

This an optimization for the case where you want to read several layers. I've
observed that the cost of a DescribeFeatureType request with N feature types is
generally significantly cheaper than the cost of N request with one feature
type. Of course, there are situations like the above where you don't win. But
you cannot always win, right ? (and the WFS driver cannot know that ogrinfo will
only request one layer)

> - Is is necessary to send the fourth request and read the whole layer from
> the
> service? I guess it is because GDAL wants to see the real geometries so it
> can
> calculate correct extents for the layer but it can be quite a heavy load for
> the
> WFS server.

Correct, this is necessary to get the extent.

>
> In fact the following line leads to an ultimate query "get everything that
> exists in the WFS service"
>
> orginfo -al -so WFS:http://server.com/wfs
>
> This will make one by one full GetFeatures for all the feature types in the
> whole service. My service has 55 feature types and many of them has more than
> million features and ogrinfo will probably fail if my server won't fail
> earlier
> with sending a few gigabytes of GML. I consider it a little bit dangerous
> that
> users can send such requests accidentally. I think that at least users should
> especially do something before GDAL would create the fourth request, the
> plain
> GetFeature.

Not much can be done : there's no way to make interact the user with the driver
and ogrinfo doesn't know which requests are expensive or not. Perhaps one could
have a cheaper implementation of GetExtent() based on what is in the
GetCapabilities response. But AFAIR, you only get the bounding box in
latitude/longitude, even if the default SRS is something else. One could try to
reproject the lat/long bounding box into the target SRS, but that might be
inaccurate in some cases, not to say plainly wrong (consider UTM zone 60, polar
projections, etc...). Even in the case where the SRS is EPSG:4326, I've avoided
to use the advertized bounding box because of uncertainty about what the
coordinate order should be, and how WFS servers have understood or misunderstood
the spec (see ticket http://trac.osgeo.org/gdal/ticket/4041 for more details).

In the meantime, you could just comment the line in ogrinfo that calls
GetExtent().

>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From tappenbeck at widemann.de  Mon Dec 19 09:27:59 2011
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Mon Dec 19 09:28:15 2011
Subject: [gdal-dev] Re: error by starting gdal_merge.bat (win7,
	fwtools 2.4.7)
In-Reply-To: <CAMKgpOZUBKKnrRzYVRPbph99T5nxSZOm3VJDdqJ7hojmgGoKTw@mail.gmail.com>
References: <4ED3AEE3.9060203@widemann.de>	<CAMKgpOb48GhN0tRKGZqaw6BHiYCgpeO2jGsAiqRYAOC=e_4k2g@mail.gmail.com>	<4EEF38AC.4010702@tappenbeck.net>
	<CAMKgpOZUBKKnrRzYVRPbph99T5nxSZOm3VJDdqJ7hojmgGoKTw@mail.gmail.com>
Message-ID: <4EEF49EF.1010203@widemann.de>

  hi !

thanks for answer.

but for OSGeo4W i only found the web-installer and our web-line is very 
small so the installer died.

i did not found a downloadfile - can you help me again ?

reagards Jan  :-)

Am 19.12.2011 14:40, schrieb Chaitanya kumar CH:
> Jan,
>
> That package contains minimalist executables. It does not contain the 
> pythin scripts. Use OSGeo4W to install it.
>
> On Mon, Dec 19, 2011 at 6:44 PM, Jan Tappenbeck <osm@tappenbeck.net 
> <mailto:osm@tappenbeck.net>> wrote:
>
>
>
>     HI !
>
>     i download
>     http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip - but
>     i did not found gdal_merge here ?
>
>     is this the wrong package ?
>
>     regards Jan :-)
>
>     Am 28.11.2011 18:53, schrieb Chaitanya kumar CH:
>
>         Jan,
>
>         A problem like this could be caused by any number of reasons.
>         FWTools-2.4.7 for windows is pretty outdated. It's better to
>         uninstall
>         it and use the binaries from OSGeo4W [1].
>         See if the error is resolved when using it.
>
>         [1]:
>         http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries#OSGeo4W
>
>         On Mon, Nov 28, 2011 at 9:25 PM, Jan Tappenbeck
>         <tappenbeck@widemann.de <mailto:tappenbeck@widemann.de>
>         <mailto:tappenbeck@widemann.de
>         <mailto:tappenbeck@widemann.de>>> wrote:
>
>
>
>              Hi !
>
>            i try to start a gdal_merge by win7 64 bit and the fwtools
>         2.4.7
>
>            gdal_merge.bat -ul_lr 2601660.7343  5477349.8203  2607572.5742
>              5475273.3574 -of GTiff -o %output%_number.tif %input%
>
>            but i get the message
>
>
>            C:\Program Files (x86)\FWTools2.4.7>echo off
>            Traceback (most recent call last):
>              File "C:\PROGRA~2\FWTOOL~1.7\bin\__gdal_merge.py", line
>         463, in ?
>                sys.exit(main())
>              File "C:\PROGRA~2\FWTOOL~1.7\bin\__gdal_merge.py", line
>         433, in main
>
>                if quiet == 0 and verbose == 0:
>            UnboundLocalError: local variable 'quiet' referenced before
>         assignment
>            C:\Program Files (x86)\FWTools2.4.7>
>
>            could everyone tell me the reason for this message ?
>
>            reagards Jan :-)
>
>            _________________________________________________
>            gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         <mailto:gdal-dev@lists.osgeo.org
>         <mailto:gdal-dev@lists.osgeo.org>>
>         http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>
>         <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
>
>         --
>         Best regards,
>         Chaitanya kumar CH.
>
>         +91-9494447584 <tel:%2B91-9494447584>
>         17.2416N 80.1426E
>
>
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


-- 

Freundliche Gr??e
i.A. Jan Tappenbeck

Dipl. Vermessungsingenieur
CAD-Systemberater&  AutoCAD-Support

Widemann Systeme GmbH
CAD- und GIS-Systemhaus
Wiesbaden ? Hamburg ? M?nchen ? D?sseldorf

Ackermannstra?e 21, 22087 Hamburg
Fon: 040 / 229477-22
Fax: 040 / 229477-29 	
tappenbeck@widemann.de    www.widemann.de

Sitz der Gesellschaft: Wiesbaden, Amtsgericht Wiesbaden HRB 23345

Zu jedem Produkt das passende Forum unter http://www.widemann.de/wisysforen/


Widemann Systeme - aktuell:

geosi.DE - Vermessungssoftware ...
... f?r Stra?enbau, Bauwesen, ....

- weitere Infos unter:
http://www.widemann.de/produkte/geoside/geosi.htm


Diese E-Mail enth?lt vertrauliche oder rechtlich gesch?tzte Informationen.
Wenn Sie nicht der beabsichtigte Empf?nger sind, informieren Sie bitte
sofort den Absender und l?schen Sie diese E-Mail. Das unbefugte Kopieren
dieser E-Mail oder die unbefugte Weitergabe der enthaltenen Informationen
ist nicht gestattet.

The information contained in this message is confidential or protected by
law. If you are not the intended recipient, please contact the sender and
delete this message. Any unauthorised copying of this message or unauthorised
distribution of the information contained herein is prohibited.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111219/17f302ed/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Mon Dec 19 09:32:46 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Dec 19 09:33:36 2011
Subject: [gdal-dev] Re: WFS driver, ogrinfo and GetFeature
References: <loom.20111219T132542-893@post.gmane.org>
	<1324302949.4eef4265ab204@webmail.free.fr>
Message-ID: <loom.20111219T150758-329@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

....
> > This will make one by one full GetFeatures for all the feature types in the
> > whole service. My service has 55 feature types and many of them has more than
> > million features and ogrinfo will probably fail if my server won't fail
> > earlier
> > with sending a few gigabytes of GML. I consider it a little bit dangerous
> > that
> > users can send such requests accidentally. I think that at least 
> > users should
> > especially do something before GDAL would create the fourth request
> >, the
> > plain
> > GetFeature.
> 
> Not much can be done : there's no way to make interact the user with 
> the driver and ogrinfo doesn't know which requests are expensive 
> or not. Perhaps one could have a cheaper implementation of 
> GetExtent() based on what is in the GetCapabilities response. 
> But AFAIR, you only get the bounding box in latitude/longitude,
> even if the default SRS is something else. One could try to
> reproject the lat/long bounding box into the target SRS, but that 
> might be inaccurate in some cases, not to say plainly wrong (consider
> UTM zone 60, polar projections, etc...). Even in the case where the 
> SRS is EPSG:4326, I've avoided to use the advertized bounding box 
> because of uncertainty about what the coordinate order should be, 
> and how WFS servers have understood or misunderstood
> the spec (see ticket http://trac.osgeo.org/gdal/ticket/4041 for 
> more details).
> 
> In the meantime, you could just comment the line in ogrinfo that calls
> GetExtent().

I am thinking as a WFS server admin and I cannot comment out the line 
from those who are possibly using our services with GDAL. I am  not 
causing so much trouble for myself :) 

I have set maxFeatures to 100000 on the server side. It will mean that the
accurate extents method of gdal will calculate them for the first 100000
features and with our layers which are spatially ordered the result will 
be much more wrong than if using and reprojecting the advertised extents.

I would say that if WFS 1.1.0 server is answering for the first 
resulttype=hits query that there are 100000 features to come then ogrinfo 
should be able to know that it could be expensive to get them all with 
the next resulttype=features request. 

I have been thinking that WFS developers should never test anything 
against WFS feature types containing less than one million polygons. 
Testing against World boundaries does not show the whole picture.

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Mon Dec 19 11:11:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec 19 11:12:57 2011
Subject: [gdal-dev] Re: WFS driver, ogrinfo and GetFeature
In-Reply-To: <loom.20111219T150758-329@post.gmane.org>
References: <loom.20111219T132542-893@post.gmane.org>
	<1324302949.4eef4265ab204@webmail.free.fr>
	<loom.20111219T150758-329@post.gmane.org>
Message-ID: <1324311113.4eef624966281@imp.free.fr>

>
> I am thinking as a WFS server admin and I cannot comment out the line
> from those who are possibly using our services with GDAL. I am  not
> causing so much trouble for myself :)
>
> I have set maxFeatures to 100000 on the server side. It will mean that the
> accurate extents method of gdal will calculate them for the first 100000
> features and with our layers which are spatially ordered the result will
> be much more wrong than if using and reprojecting the advertised extents.
>
> I would say that if WFS 1.1.0 server is answering for the first
> resulttype=hits query that there are 100000 features to come then ogrinfo
> should be able to know that it could be expensive to get them all with
> the next resulttype=features request.
>
> I have been thinking that WFS developers should never test anything
> against WFS feature types containing less than one million polygons.
> Testing against World boundaries does not show the whole picture.

Is your server available from the web ? If so, I could have a look on how the
advertized extent could be used. Ah, and what WFS server and which version of it
are you using ?

I'm thinking that we could try to use the advertized extent by default, and if
needed, the user could define an environment variable to have the extent
computed on all features. That way, the default behaviour would be more
reasonable.
From rjpawley at shaw.ca  Mon Dec 19 11:21:58 2011
From: rjpawley at shaw.ca (Bob Pawley)
Date: Mon Dec 19 11:22:22 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <201112190958.31190.Ralf.Suhr@itc-halle.de>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
	<201112190958.31190.Ralf.Suhr@itc-halle.de>
Message-ID: <8AC2D92E8D5A40C3A39D3CA7437242CC@BobPC>

Thanks Ralf

So far, I haven?t been able to populate the block columns unless I use a DXF file which has been exploded before saving.

In all of my searching, I have not come across your suggestion of dereferencing the block. Can you point me to some documentation?

Bob


From: Ralf Suhr 
Sent: Monday, December 19, 2011 12:58 AM
To: gdal-dev@lists.osgeo.org 
Cc: Bob Pawley 
Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

Hi Bob,



the dxf driver writes to tables "entities" and "blocks". You have to dereference the block layer yourself.



SELECT Translate( Scale( Rotate((Dump(b.wkb_geometry)).geom, e.blockangle / 180 * PI()), e.blockscale[1], e.blockscale[2]), ST_X(e.wkb_geometry), ST_Y(e.wkb_geometry)) AS wkb_geometry,

CASE WHEN b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS ogr_style,

e.layer,

e.linetype,

e.subclasses,

b.text

FROM entities e

INNER JOIN

blocks b USING (blockname);



Sometimes you have blocks with world coordinates and no connection in entities.

SELECT (Dump(b.wkb_geometry)).geom AS wkb_geometry,

b.ogr_style,

b.layer,

b.linetype,

b.subclasses,

b.text

FROM blocks b

WHERE blockname NOT IN

(

SELECT DISTINCT blockname

FROM entities

WHERE blockname IS NOT NULL

);



Some newer DXF Formats can have features in paper space. This is now not supported by ogr2ogr.





Gr

Ralf



On Freitag 16 Dezember 2011 22:14:38 Bob Pawley wrote:

> I have imported a dxf file into Postgis using the following command line -

> 

> set DXF_INLINE_BLOCKS=FALSE&set DXF_MERGE_BLOCK_GEOMETRIES=FALSE&set

> PGCLIENTENCODING=LATIN1&&ogr2ogr -f "PostgreSQL" PG:"host=localhost

> user=postgres dbname=dbname password=pass" W_Works.dxf -nln Import_PID

> -overwrite ?skipfailures

> 

> All geometries are intact.

> 

> However, the text is part of the Linestring layer and not in the text

> column of the Postgresql table.

> 

> Is this to be expected?

> 

> Is there some way of screening out the text as text and point geometry?

> 

> Bob


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111219/1a5f4458/attachment.html
From Ralf.Suhr at itc-halle.de  Mon Dec 19 11:52:20 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Mon Dec 19 11:53:02 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <8AC2D92E8D5A40C3A39D3CA7437242CC@BobPC>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
	<201112190958.31190.Ralf.Suhr@itc-halle.de>
	<8AC2D92E8D5A40C3A39D3CA7437242CC@BobPC>
Message-ID: <201112191752.21075.Ralf.Suhr@itc-halle.de>

http://www.gdal.org/ogr/drv_dxf.html

Does ogrinfo print out the "blocks" layer?
ogrinfo --config DXF_INLINE_BLOCKS FALSE File.dxf 
INFO: Open of `File.dxf'
      using driver `DXF' successful.
1: blocks
2: entities

To see what can be imported by ogr use a dxfviewer that display only the model 
space. I have tested ogr with dxf version up to AC1018 without problems except 
the paper space.


Gr
Ralf

On Montag 19 Dezember 2011 17:21:58 Bob Pawley wrote:
> Thanks Ralf
> 
> So far, I haven?t been able to populate the block columns unless I use a
> DXF file which has been exploded before saving.
> 
> In all of my searching, I have not come across your suggestion of
> dereferencing the block. Can you point me to some documentation?
> 
> Bob
> 
> 
> From: Ralf Suhr
> Sent: Monday, December 19, 2011 12:58 AM
> To: gdal-dev@lists.osgeo.org
> Cc: Bob Pawley
> Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr
> 
> Hi Bob,
> 
> 
> 
> the dxf driver writes to tables "entities" and "blocks". You have to
> dereference the block layer yourself.
> 
> 
> 
> SELECT Translate( Scale( Rotate((Dump(b.wkb_geometry)).geom, e.blockangle /
> 180 * PI()), e.blockscale[1], e.blockscale[2]), ST_X(e.wkb_geometry),
> ST_Y(e.wkb_geometry)) AS wkb_geometry,
> 
> CASE WHEN b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS
> ogr_style,
> 
> e.layer,
> 
> e.linetype,
> 
> e.subclasses,
> 
> b.text
> 
> FROM entities e
> 
> INNER JOIN
> 
> blocks b USING (blockname);
> 
> 
> 
> Sometimes you have blocks with world coordinates and no connection in
> entities.
> 
> SELECT (Dump(b.wkb_geometry)).geom AS wkb_geometry,
> 
> b.ogr_style,
> 
> b.layer,
> 
> b.linetype,
> 
> b.subclasses,
> 
> b.text
> 
> FROM blocks b
> 
> WHERE blockname NOT IN
> 
> (
> 
> SELECT DISTINCT blockname
> 
> FROM entities
> 
> WHERE blockname IS NOT NULL
> 
> );
> 
> 
> 
> Some newer DXF Formats can have features in paper space. This is now not
> supported by ogr2ogr.
> 
> 
> 
> 
> 
> Gr
> 
> Ralf
> 
> On Freitag 16 Dezember 2011 22:14:38 Bob Pawley wrote:
> > I have imported a dxf file into Postgis using the following command line
> > -
> > 
> > 
> > 
> > set DXF_INLINE_BLOCKS=FALSE&set DXF_MERGE_BLOCK_GEOMETRIES=FALSE&set
> > 
> > PGCLIENTENCODING=LATIN1&&ogr2ogr -f "PostgreSQL" PG:"host=localhost
> > 
> > user=postgres dbname=dbname password=pass" W_Works.dxf -nln Import_PID
> > 
> > -overwrite ?skipfailures
> > 
> > 
> > 
> > All geometries are intact.
> > 
> > 
> > 
> > However, the text is part of the Linestring layer and not in the text
> > 
> > column of the Postgresql table.
> > 
> > 
> > 
> > Is this to be expected?
> > 
> > 
> > 
> > Is there some way of screening out the text as text and point geometry?
> > 
> > 
> > 
> > Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111219/60186d1e/attachment-0001.html
From Dave.DeHaan at sybase.com  Mon Dec 19 13:23:50 2011
From: Dave.DeHaan at sybase.com (Dave.DeHaan@sybase.com)
Date: Mon Dec 19 13:50:24 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <4EE850CA.2070903@pobox.com>
References: <4EE850CA.2070903@pobox.com>
Message-ID: <OFF0BFB47C.6B35C267-ON8525796B.0059BCAA-8525796B.0065104F@sybase.com>

Hello Frank and other GDAL/OGR devs,

I announced on this list a couple months back that I would have a co-op
student writing an OGR driver for SQL Anywhere 12.  The driver is now
complete, and over the last few weeks we've been performing
application-level testing with ogr2ogr, MapServer, and QGIS.  Everything
appears to work smoothly.

The timing of this GDAL/OGR 1.9 release caught us a bit by surprise, but we
have everything ready for submission as a TRAC patch except for our
employer's legal consent to release our code under the X11/MIT License.
Assuming we obtain the requisite permission for contribution within the
next day or so, is it still possible to get this new driver into 1.9?

We will do our best to get the approved fast-tracked and our code submitted
as a TRAC patch shortly.  It would help if the OGR community could give us
some indication of whether or not it is feasible to get this included in
1.9.

Thanks!
Dave DeHaan

PS - We would strongly prefer that the SQL Anywhere driver be compiled in
by default.  To facilitate this, we have structured our driver so that
everything necessary to compile it can be contributed to the project.  Our
patch would include a few interface licensed under Apache v2.0 (since that
is how they were released previously), but the terms of that license are
very similar to X11/MIT.

----
David E. DeHaan
SQL Anywhere Query Processing team
Sybase, an SAP Company


                                                                                                               
  From:       Frank Warmerdam <warmerdam@pobox.com>                                                            
                                                                                                               
  To:         gdal-dev <gdal-dev@lists.osgeo.org>                                                              
                                                                                                               
  Date:       12/14/2011 02:32 AM                                                                              
                                                                                                               
  Subject:    [gdal-dev] 1.9 Release Process                                                                   
                                                                                                               
  Sent by:    <gdal-dev-bounces@lists.osgeo.org>                                                               
                                                                                                               





Folks,

I would like to have a GDAL/OGR 1.9 release by the end of this year,
ideally before Christmas.  We have not formalized a release process
for the project, but I'd like to follow the approach of past years.
This basically consists of a few beta releases, followed by a release
candidate when things seem to be in good shape.  The release candidates
would be voted on by the PSC before becoming official.

Anyone with significant work they would like to accomplish before 1.9.0
should reply to this thread with information on the planned work.

Barring objections, I'll plan on a Beta 1 this weekend.

Best regards,
--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/warmerda
and watch the world go round - Rush    | Geospatial Software Developer

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




From jukka.rahkonen at mmmtike.fi  Mon Dec 19 14:04:58 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Dec 19 14:05:20 2011
Subject: [gdal-dev] Re: WFS driver, ogrinfo and GetFeature
References: <loom.20111219T132542-893@post.gmane.org>
	<1324302949.4eef4265ab204@webmail.free.fr>
	<loom.20111219T150758-329@post.gmane.org>
	<1324311113.4eef624966281@imp.free.fr>
Message-ID: <loom.20111219T194404-54@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> >
> > I am thinking as a WFS server admin and I cannot comment out the line
> > from those who are possibly using our services with GDAL. I am  not
> > causing so much trouble for myself :)
> >
> > I have set maxFeatures to 100000 on the server side. It will mean that the
> > accurate extents method of gdal will calculate them for the first 100000
> > features and with our layers which are spatially ordered the result will
> > be much more wrong than if using and reprojecting the advertised extents.
> >
> > I would say that if WFS 1.1.0 server is answering for the first
> > resulttype=hits query that there are 100000 features to come then ogrinfo
> > should be able to know that it could be expensive to get them all with
> > the next resulttype=features request.
> >
> > I have been thinking that WFS developers should never test anything
> > against WFS feature types containing less than one million polygons.
> > Testing against World boundaries does not show the whole picture.
> 
> Is your server available from the web ? If so, I could have a look on how 
the
> advertized extent could be used. Ah, and what WFS server and which version
 of it
> are you using ?
> 
> I'm thinking that we could try to use the advertized extent by default, 
and if
> needed, the user could define an environment variable to have the extent
> computed on all features. That way, the default behaviour would be more
> reasonable.
> 

I sent the server url as a private mail. Afterwards it came into my mind that
for counting the exact extents it would be enough to select just the geometry
property and not all the attributes. That would save a lot of traffic with
attribute rich feature types. Or does DGAL want to read all the attributes too
and resolve the schema that way instead of using schema returned by
DescribeFeatureType? GDAL does not necessarily understand the latter if it is
presenting some odd application schema.

On the other hand, if gdal makes a full GetFeature when checking the extents of
the layer, as a server admin I would love to see it to cache the result in some
disk cache, Spatialite database or whatever instead of making the same total
GetFeature later. 

-Jukka Rahkonen-

From warmerdam at pobox.com  Mon Dec 19 16:04:48 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 19 16:05:31 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <OFF0BFB47C.6B35C267-ON8525796B.0059BCAA-8525796B.0065104F@sybase.com>
References: <4EE850CA.2070903@pobox.com>
	<OFF0BFB47C.6B35C267-ON8525796B.0059BCAA-8525796B.0065104F@sybase.com>
Message-ID: <CA+YzLBc-a1s-Fb==vnsCAu_q7FJr+==pshAbw=NPDOrgRmdkFA@mail.gmail.com>

Dave,

If this does not make it into Beta1, then it should still make Beta2.  I
hope to produce Beta1 by the end of day today.

It will be wonderful if SQL Anywhere support can be built in by
default.

Best regards,
Frank

On Mon, Dec 19, 2011 at 10:23 AM,  <Dave.DeHaan@sybase.com> wrote:
> Hello Frank and other GDAL/OGR devs,
>
> I announced on this list a couple months back that I would have a co-op
> student writing an OGR driver for SQL Anywhere 12. ?The driver is now
> complete, and over the last few weeks we've been performing
> application-level testing with ogr2ogr, MapServer, and QGIS. ?Everything
> appears to work smoothly.
>
> The timing of this GDAL/OGR 1.9 release caught us a bit by surprise, but we
> have everything ready for submission as a TRAC patch except for our
> employer's legal consent to release our code under the X11/MIT License.
> Assuming we obtain the requisite permission for contribution within the
> next day or so, is it still possible to get this new driver into 1.9?
>
> We will do our best to get the approved fast-tracked and our code submitted
> as a TRAC patch shortly. ?It would help if the OGR community could give us
> some indication of whether or not it is feasible to get this included in
> 1.9.
>
> Thanks!
> Dave DeHaan
>
> PS - We would strongly prefer that the SQL Anywhere driver be compiled in
> by default. ?To facilitate this, we have structured our driver so that
> everything necessary to compile it can be contributed to the project. ?Our
> patch would include a few interface licensed under Apache v2.0 (since that
> is how they were released previously), but the terms of that license are
> very similar to X11/MIT.
>
> ----
> David E. DeHaan
> SQL Anywhere Query Processing team
> Sybase, an SAP Company
>
>
>
> ?From: ? ? ? Frank Warmerdam <warmerdam@pobox.com>
>
> ?To: ? ? ? ? gdal-dev <gdal-dev@lists.osgeo.org>
>
> ?Date: ? ? ? 12/14/2011 02:32 AM
>
> ?Subject: ? ?[gdal-dev] 1.9 Release Process
>
> ?Sent by: ? ?<gdal-dev-bounces@lists.osgeo.org>
>
>
>
>
>
>
> Folks,
>
> I would like to have a GDAL/OGR 1.9 release by the end of this year,
> ideally before Christmas. ?We have not formalized a release process
> for the project, but I'd like to follow the approach of past years.
> This basically consists of a few beta releases, followed by a release
> candidate when things seem to be in good shape. ?The release candidates
> would be voted on by the PSC before becoming official.
>
> Anyone with significant work they would like to accomplish before 1.9.0
> should reply to this thread with information on the planned work.
>
> Barring objections, I'll plan on a Beta 1 this weekend.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
>
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/warmerda
> and watch the world go round - Rush ? ?| Geospatial Software Developer
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Mon Dec 19 16:06:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 19 16:07:22 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <CAKWoFMLy6o2AQfYd9xCPbb=+kPfsmDCPBiyh5dGnBpiFGM3yMw@mail.gmail.com>
References: <4EE850CA.2070903@pobox.com>
	<201112161548.30722.pi_ml@sourcepole.com>
	<201112162104.13514.even.rouault@mines-paris.org>
	<1836496.bfrTWSjMFs@polarwind2>
	<CAKWoFMLy6o2AQfYd9xCPbb=+kPfsmDCPBiyh5dGnBpiFGM3yMw@mail.gmail.com>
Message-ID: <CA+YzLBd+M797qwb6RN-eoN2H=-q_s4YfN5UkGGxw3+quUcyGXQ@mail.gmail.com>

On Sun, Dec 18, 2011 at 11:01 PM, Lauri Kajan <lauri.kajan@gmail.com> wrote:
> Hi all,
>
> I would be more than happy if there was xyzm support in OGR. But I
> thought this won't happen until we decide to implement OGC Simple
> Feature Access 1.2 specification.
> Now ogr implements Simple Feature 1.1 that does not support M-values
> or even Z-coordinates.

Folks,

For reference I have incorporated Pirmin's patch to support
reading XYM shapefiles as XYZ.  Comprehensive XYZM
geometry support would be an interesting objective for GDAL/OGR
2.0.

I also fixed the JP2KAK overview bug mentioned in this thread.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From etourigny.dev at gmail.com  Mon Dec 19 16:13:54 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon Dec 19 16:14:16 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <CA+YzLBc-a1s-Fb==vnsCAu_q7FJr+==pshAbw=NPDOrgRmdkFA@mail.gmail.com>
References: <4EE850CA.2070903@pobox.com>
	<OFF0BFB47C.6B35C267-ON8525796B.0059BCAA-8525796B.0065104F@sybase.com>
	<CA+YzLBc-a1s-Fb==vnsCAu_q7FJr+==pshAbw=NPDOrgRmdkFA@mail.gmail.com>
Message-ID: <CA+TxYvMeH5dmZsK44MKuNjbFcW6htwEDA4DLS6M-j3jKvP456A@mail.gmail.com>

Frank,

is there any "code freeze" policy right now? I have a few bugs to
resolve in the netcdf driver (thanks to Kyle's comments).

regards,
Etienne

On Mon, Dec 19, 2011 at 7:04 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Dave,
>
> If this does not make it into Beta1, then it should still make Beta2. ?I
> hope to produce Beta1 by the end of day today.
>
> It will be wonderful if SQL Anywhere support can be built in by
> default.
>
> Best regards,
> Frank
>
> On Mon, Dec 19, 2011 at 10:23 AM, ?<Dave.DeHaan@sybase.com> wrote:
>> Hello Frank and other GDAL/OGR devs,
>>
>> I announced on this list a couple months back that I would have a co-op
>> student writing an OGR driver for SQL Anywhere 12. ?The driver is now
>> complete, and over the last few weeks we've been performing
>> application-level testing with ogr2ogr, MapServer, and QGIS. ?Everything
>> appears to work smoothly.
>>
>> The timing of this GDAL/OGR 1.9 release caught us a bit by surprise, but we
>> have everything ready for submission as a TRAC patch except for our
>> employer's legal consent to release our code under the X11/MIT License.
>> Assuming we obtain the requisite permission for contribution within the
>> next day or so, is it still possible to get this new driver into 1.9?
>>
>> We will do our best to get the approved fast-tracked and our code submitted
>> as a TRAC patch shortly. ?It would help if the OGR community could give us
>> some indication of whether or not it is feasible to get this included in
>> 1.9.
>>
>> Thanks!
>> Dave DeHaan
>>
>> PS - We would strongly prefer that the SQL Anywhere driver be compiled in
>> by default. ?To facilitate this, we have structured our driver so that
>> everything necessary to compile it can be contributed to the project. ?Our
>> patch would include a few interface licensed under Apache v2.0 (since that
>> is how they were released previously), but the terms of that license are
>> very similar to X11/MIT.
>>
>> ----
>> David E. DeHaan
>> SQL Anywhere Query Processing team
>> Sybase, an SAP Company
>>
>>
>>
>> ?From: ? ? ? Frank Warmerdam <warmerdam@pobox.com>
>>
>> ?To: ? ? ? ? gdal-dev <gdal-dev@lists.osgeo.org>
>>
>> ?Date: ? ? ? 12/14/2011 02:32 AM
>>
>> ?Subject: ? ?[gdal-dev] 1.9 Release Process
>>
>> ?Sent by: ? ?<gdal-dev-bounces@lists.osgeo.org>
>>
>>
>>
>>
>>
>>
>> Folks,
>>
>> I would like to have a GDAL/OGR 1.9 release by the end of this year,
>> ideally before Christmas. ?We have not formalized a release process
>> for the project, but I'd like to follow the approach of past years.
>> This basically consists of a few beta releases, followed by a release
>> candidate when things seem to be in good shape. ?The release candidates
>> would be voted on by the PSC before becoming official.
>>
>> Anyone with significant work they would like to accomplish before 1.9.0
>> should reply to this thread with information on the planned work.
>>
>> Barring objections, I'll plan on a Beta 1 this weekend.
>>
>> Best regards,
>> --
>> ---------------------------------------+--------------------------------------
>>
>> I set the clouds in motion - turn up ? | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/warmerda
>> and watch the world go round - Rush ? ?| Geospatial Software Developer
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From oliver.bgr at googlemail.com  Mon Dec 19 16:14:52 2011
From: oliver.bgr at googlemail.com (Oliver Burger)
Date: Mon Dec 19 16:15:35 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <CA+YzLBd+M797qwb6RN-eoN2H=-q_s4YfN5UkGGxw3+quUcyGXQ@mail.gmail.com>
References: <4EE850CA.2070903@pobox.com>
	<CAKWoFMLy6o2AQfYd9xCPbb=+kPfsmDCPBiyh5dGnBpiFGM3yMw@mail.gmail.com>
	<CA+YzLBd+M797qwb6RN-eoN2H=-q_s4YfN5UkGGxw3+quUcyGXQ@mail.gmail.com>
Message-ID: <4605005.efyS1bU0WL@localhost>

Hi,

I know, you are only talking about a beta1 right now, but as package 
maintainer at Mageia, I would be interested to know if there will be any 
bigger api changes, making it difficult to build apps linking against libgdal.

By the way, do you have any roadmap for gdal-1.9?

Thanks,

Oliver
From warmerdam at pobox.com  Mon Dec 19 16:24:37 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 19 16:24:47 2011
Subject: [gdal-dev] 1.9 Release Process
In-Reply-To: <4605005.efyS1bU0WL@localhost>
References: <4EE850CA.2070903@pobox.com>
	<CAKWoFMLy6o2AQfYd9xCPbb=+kPfsmDCPBiyh5dGnBpiFGM3yMw@mail.gmail.com>
	<CA+YzLBd+M797qwb6RN-eoN2H=-q_s4YfN5UkGGxw3+quUcyGXQ@mail.gmail.com>
	<4605005.efyS1bU0WL@localhost>
Message-ID: <CA+YzLBfRapVafrTHvAE-T81pfPLmLVcFp94dGH_5UCc4qC5xRQ@mail.gmail.com>

On Mon, Dec 19, 2011 at 1:14 PM, Oliver Burger
<oliver.bgr@googlemail.com> wrote:
> Hi,
>
> I know, you are only talking about a beta1 right now, but as package
> maintainer at Mageia, I would be interested to know if there will be any
> bigger api changes, making it difficult to build apps linking against libgdal.

Oliver,

I do not anticipate any GDAL/OGR ABI changes from now to release,
though it is possible.  If they occur we will call them out.

> By the way, do you have any roadmap for gdal-1.9?

No, not really.  There will be a NEWS file for the release.  1.9
has essentially been an incremental release.  New drivers, fixes,
improvements and few underlying improvements (ie. VSI).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Mon Dec 19 21:21:46 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 19 21:22:26 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
Message-ID: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>

Folks,

I have prepared a first cut for the 1.9.0 release (Beta 1).  Source code
and the autotest suite can be found at:

  http://download.osgeo.org/gdal/gdal-1.9.0b1.tar.gz
  http://download.osgeo.org/gdal/gdal190b1.zip
  http://download.osgeo.org/gdal/gdalautotest-1.9.0b1.tar.gz

NEWS can be found at:

  http://trac.osgeo.org/gdal/wiki/Release/1.9.0-News

Feedback is very welcome.  I hope to have a second beta in 3-4 days.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From brfr at metrico.lu  Tue Dec 20 04:53:44 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Tue Dec 20 04:54:31 2011
Subject: [gdal-dev] [python] CopyDataSource question
Message-ID: <4EF05B28.1070605@metrico.lu>

Hi,

I have (again) a question concerning the Driver.CopyDataSource() method 
using OGR Python bindings

I've written some code that copies a datasource to another format, using 
a target driver and its CopyDataSource() method. This works fine for 
GDAL version 1.7.3, but fails under 1.8.0. Failing means that the 
CopyDataSource call is made but never finishes. It just sits there and 
does nothing. This is however related to *my code*, and *not* an OGR 
error. Doing the task with OGR classes directly works. But I wonder why 
my script runs fine on one system but not on the other.

I have some sample test data with which I test my code. The sample is a 
point shapefile and I copy it to GeoJSON, GML and KML formats. The 
GeoJSON still works, but the GML test fails, and KML also.

So my question (at last ;-)): What could make the CopyDataSource fail 
with GML and KML, but succeed with GeoJSON? And make it completely 
succeed under GDAL 1.7.3?

Looking at ogr2ogr.py, CopyDataSource is never used there. Am I abusing 
CopyDataSource? Is it the right tool to copy a datasource to a new format?

I know my question is a bit like reading in a crystal ball, but I hope 
my description rings a bell somewhere. Since CopyDataSource just sits 
there and does nothing and needs to be terminated I lack something I can 
investigate in.

Many thanks

Frank

PS
Source code can be seen here:
https://bitbucket.org/frankbroniewski/geoactions/

-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From even.rouault at mines-paris.org  Tue Dec 20 05:18:13 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 20 05:18:35 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
In-Reply-To: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
References: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
Message-ID: <1324376293.4ef060e5b7b01@imp.free.fr>

Hi,

There seems to be a permission problem when accessing to :

http://download.osgeo.org/gdal/gdalautotest-1.9.0b1.tar.gz
http://download.osgeo.org/gdal/gdalautotest-1.9.0b1.zip

Best regards,

Even
From even.rouault at mines-paris.org  Tue Dec 20 07:16:50 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 20 07:17:10 2011
Subject: [gdal-dev] [python] CopyDataSource question
In-Reply-To: <4EF05B28.1070605@metrico.lu>
References: <4EF05B28.1070605@metrico.lu>
Message-ID: <1324383410.4ef07cb2509bb@imp.free.fr>

Frank,

> Hi,
>
> I have (again) a question concerning the Driver.CopyDataSource() method
> using OGR Python bindings
>
> I've written some code that copies a datasource to another format, using
> a target driver and its CopyDataSource() method. This works fine for
> GDAL version 1.7.3, but fails under 1.8.0. Failing means that the
> CopyDataSource call is made but never finishes. It just sits there and
> does nothing. This is however related to *my code*, and *not* an OGR
> error.

Reading your further explanations, it is difficult to know if it's a problem in
your code, or in OGR.

> Doing the task with OGR classes directly works.

What do you mean by "with OGR classes" ? Do you mean when not using
CopyDataSource() ?

> But I wonder why
> my script runs fine on one system but not on the other.

One system with 1.7.3 and the other with 1.8.0 ?

>
> I have some sample test data with which I test my code. The sample is a
> point shapefile and I copy it to GeoJSON, GML and KML formats. The
> GeoJSON still works, but the GML test fails, and KML also.
>
> So my question (at last ;-)): What could make the CopyDataSource fail
> with GML and KML, but succeed with GeoJSON? And make it completely
> succeed under GDAL 1.7.3?

That stalling in CopyDataSource() doesn't sound good. I've no ready-made
explanation for this. Would you be able to create a minimalistic standalone
python script of just a few lines of code (not your entire python code), with
associated test data, that can be used to replicate the issue ?

Which OS do you use ? Did you compile GDAL by yourself or do you use a binary
distribution ?

Provided you have a version of the GDAL librairy with debugging symbols, you
could try attaching a debugger to the process and observe what happens step by
step in CopyDataSource().

>
> Looking at ogr2ogr.py, CopyDataSource is never used there.

Yes, ogr2ogr offer more options and can do more advanced transformations than
CopyDataSource() can do, so it needs control at the layer and feature level.

> Am I abusing
> CopyDataSource? Is it the right tool to copy a datasource to a new format?

CopyDataSource() is very basic, but it should work for what it is supposed to
do, and not block forever.

Best ragards,

Even

From SSchantz at BfS.de  Tue Dec 20 07:21:10 2011
From: SSchantz at BfS.de (Stefan Schantz)
Date: Tue Dec 20 07:27:35 2011
Subject: [gdal-dev] how to use the filter option -where within an mysql
	request?
Message-ID: <4EF07DB6.5060206@BfS.de>

Hi,
I don't understand the usage of the filter option "-where" of ogrinfo.

If I try the following statement , it works and I get 1678 hits:

ogrinfo -ro -so 
MYSQL:onmon,host=10.130.63.11,user=user,password=user,port=3306,tables=result_current 
-sql "SELECT result_current.value AS wert, result_current.end_measure, 
locality.geom FROM result_current JOIN locality ON 
result_current.locality_code = locality.locality_code where end_measure 
= '2011-12-20'"

MySQL: table result_current has FID column nuclide.
OGR: ...
       using driver `MySQL' successful.

Layer name: sql_statement
Geometry: Point
Feature Count: 1678
Extent: (6.041560, 47.398590) - (15.026700, 54.889580)
Layer SRS WKT:
GEOGCS["GCS_WGS_1984",
     DATUM["WGS_1984",
         SPHEROID["WGS_1984",6378137,298.257223563]],
     PRIMEM["Greenwich",0],
     UNIT["Degree",0.017453292519943295]]
Geometry Column = geom
wert: Real (21.6)
end_measure: DateTime (0.0)
MySQL: 3356 features read on layer 'sql_statement'.
OGR: GetLayerCount() = 1

If I do the same with the filter option "-where", i got some errors and 
no hits:

ogrinfo -ro -so 
MYSQL:onmon,host=10.130.63.11,user=readonly,password=readonly,port=3306,tables=result_current 
-sql "SELECT result_current.value AS wert, result_current.end_measure, 
locality.geom FROM result_current JOIN locality ON 
result_current.locality_code = locality.locality_code where end_measure 
= '2011-12-20'" -where "end_measure = '2011-12-20'"

MySQL: table result_current has FID column nuclide.
OGR: ...
       using driver `MySQL' successful.

Layer name: sql_statement
Geometry: Point
OGRFeatureQuery: Illegal operation (3) on list or binary field.
...
Feature Count: 0
OGRFeatureQuery: Illegal operation (3) on list or binary field.
...
Layer SRS WKT:
GEOGCS["GCS_WGS_1984",
     DATUM["WGS_1984",
         SPHEROID["WGS_1984",6378137,298.257223563]],
     PRIMEM["Greenwich",0],
     UNIT["Degree",0.017453292519943295]]
Geometry Column = geom
wert: Real (21.6)
end_measure: DateTime (0.0)
MySQL: 3356 features read on layer 'sql_statement'.
OGR: GetLayerCount() = 1

Also if I remove the "where"- clause in the sql-statement, i get the 
same result.
So I wonder how to use the "-where"  filter option in ogrinfo.
The dokumentation is not so clear.

Thanks for help!

regards,
Stefan
From even.rouault at mines-paris.org  Tue Dec 20 07:50:42 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 20 07:51:09 2011
Subject: [gdal-dev] how to use the filter option -where within an mysql
	request?
In-Reply-To: <4EF07DB6.5060206@BfS.de>
References: <4EF07DB6.5060206@BfS.de>
Message-ID: <1324385442.4ef084a248ca0@imp.free.fr>

Stefan,

Please always mention the GDAL/OGR version you are using in your reports. It
will save the readers from figuring out from the error message that you must use
GDAL 1.7.x or an earlier version.

The -where "end_measure = '2011-12-20'" clause doesn't work in GDAL 1.7.x or
earlier because the code didn't support comparison on DateTime fields (the error
message mentions list of binary fields, but DateTime fields too)

I've done a quick test on GDAL 1.9.0beta1 and you can use comparisons on date,
but they seem to be string based. And you have to respect the format of the
string serialization used by OGR. In your case, it would be -where "end_measure
= '2011/12/20  0:00:00'"

However, there's no advantage of using -where when you already use -sql. The
-sql is directly forwarded to the SQL engine of the RDBMS (when the OGR driver
is the one of a RDBMS of course), so it will run faster than -where which,
depending on situations, can be evaluated on OGR side.
- On a layer which is already the result of -sql, the -where clause is always
evaluated on OGR side, after the evaluation of -sql
- If the layer is directly a table name, then the -where clause is generally
forwarded to the server. (It might depend on the OGR driver however).

So, as a rule of thumb, you can remember that there's no point in using both
-sql and -where.

Best regards,

Even
From SSchantz at BfS.de  Tue Dec 20 08:25:36 2011
From: SSchantz at BfS.de (Stefan Schantz)
Date: Tue Dec 20 08:26:27 2011
Subject: [gdal-dev] how to use the filter option -where within an mysql
	request?
In-Reply-To: <1324385442.4ef084a248ca0@imp.free.fr>
References: <4EF07DB6.5060206@BfS.de> <1324385442.4ef084a248ca0@imp.free.fr>
Message-ID: <4EF08CD0.1060900@BfS.de>

Even,
thank  you for the quick reponse.
My OGR-Version is "GDAL 1.7.2, released 2010/04/23", so it explains the 
errors.

My main issue is, that I want to set up a WMS-Time with UMN 
Mapserver/OGR/MySQL and I couldn't get it work, because I didn't get any 
datas.
For testing reasons I tried it with ogrinfo and got these errors. I 
thought, that the parameter "FILTER" in the mapfile uses perhaps the 
option "where" in ogr.
So I have to try, whether it works , if I recompile the mapserver with a 
newer GDAL version.
Thank you!

Best regards to France,
Stefan


Am 20.12.2011 13:50, schrieb Even Rouault:
> Stefan,
>
> Please always mention the GDAL/OGR version you are using in your reports. It
> will save the readers from figuring out from the error message that you must use
> GDAL 1.7.x or an earlier version.
>
> The -where "end_measure = '2011-12-20'" clause doesn't work in GDAL 1.7.x or
> earlier because the code didn't support comparison on DateTime fields (the error
> message mentions list of binary fields, but DateTime fields too)
>
> I've done a quick test on GDAL 1.9.0beta1 and you can use comparisons on date,
> but they seem to be string based. And you have to respect the format of the
> string serialization used by OGR. In your case, it would be -where "end_measure
> = '2011/12/20  0:00:00'"
>
> However, there's no advantage of using -where when you already use -sql. The
> -sql is directly forwarded to the SQL engine of the RDBMS (when the OGR driver
> is the one of a RDBMS of course), so it will run faster than -where which,
> depending on situations, can be evaluated on OGR side.
> - On a layer which is already the result of -sql, the -where clause is always
> evaluated on OGR side, after the evaluation of -sql
> - If the layer is directly a table name, then the -where clause is generally
> forwarded to the server. (It might depend on the OGR driver however).
>
> So, as a rule of thumb, you can remember that there's no point in using both
> -sql and -where.
>
> Best regards,
>
> Even
>
From brfr at metrico.lu  Tue Dec 20 08:33:26 2011
From: brfr at metrico.lu (Frank Broniewski)
Date: Tue Dec 20 08:33:26 2011
Subject: [gdal-dev] [python] CopyDataSource question
In-Reply-To: <1324383410.4ef07cb2509bb@imp.free.fr>
References: <4EF05B28.1070605@metrico.lu>
	<1324383410.4ef07cb2509bb@imp.free.fr>
Message-ID: <4EF08EA6.4050002@metrico.lu>

I am sorry that I was not precise enough in my previous email. On my 
development system (Debian 6, Python 2.6, gdal 1.7.3) my scripts work as 
expected. My server (Ubuntu 8.04, Python 2.5, gdal 1.8.0) has the 
problems running the test. On both systems I am using package 
repositories, though on Ubuntu it is the non official UbuntuGIS repo.

Using the OGR API directly, that means without my wrapper functions and 
classes, I can successfully use CopyDataSource() on both systems.
So the issue lies within the manner how I use the OGR API. I will need 
to find out the differences between the OGR-only approach and mine but 
that will probably take a while. After that I can hopefully provide a 
not working test code with data.

Concerning the debugging: How can I find out if my gdal version comes 
with the debugging symbols?

Many thanks

Frank


Am 20.12.2011 13:16, schrieb Even Rouault:
> Frank,
>
>> Hi,
>>
>> I have (again) a question concerning the Driver.CopyDataSource() method
>> using OGR Python bindings
>>
>> I've written some code that copies a datasource to another format, using
>> a target driver and its CopyDataSource() method. This works fine for
>> GDAL version 1.7.3, but fails under 1.8.0. Failing means that the
>> CopyDataSource call is made but never finishes. It just sits there and
>> does nothing. This is however related to *my code*, and *not* an OGR
>> error.
>
> Reading your further explanations, it is difficult to know if it's a problem in
> your code, or in OGR.
>
>> Doing the task with OGR classes directly works.
>
> What do you mean by "with OGR classes" ? Do you mean when not using
> CopyDataSource() ?
>
>> But I wonder why
>> my script runs fine on one system but not on the other.
>
> One system with 1.7.3 and the other with 1.8.0 ?
>
>>
>> I have some sample test data with which I test my code. The sample is a
>> point shapefile and I copy it to GeoJSON, GML and KML formats. The
>> GeoJSON still works, but the GML test fails, and KML also.
>>
>> So my question (at last ;-)): What could make the CopyDataSource fail
>> with GML and KML, but succeed with GeoJSON? And make it completely
>> succeed under GDAL 1.7.3?
>
> That stalling in CopyDataSource() doesn't sound good. I've no ready-made
> explanation for this. Would you be able to create a minimalistic standalone
> python script of just a few lines of code (not your entire python code), with
> associated test data, that can be used to replicate the issue ?
>
> Which OS do you use ? Did you compile GDAL by yourself or do you use a binary
> distribution ?
>
> Provided you have a version of the GDAL librairy with debugging symbols, you
> could try attaching a debugger to the process and observe what happens step by
> step in CopyDataSource().
>
>>
>> Looking at ogr2ogr.py, CopyDataSource is never used there.
>
> Yes, ogr2ogr offer more options and can do more advanced transformations than
> CopyDataSource() can do, so it needs control at the layer and feature level.
>
>> Am I abusing
>> CopyDataSource? Is it the right tool to copy a datasource to a new format?
>
> CopyDataSource() is very basic, but it should work for what it is supposed to
> do, and not block forever.
>
> Best ragards,
>
> Even
>
>


-- 
Frank BRONIEWSKI

METRICO s.? r.l.
g?om?tres
technologies d'information g?ographique
rue des Romains 36
L-5433 NIEDERDONVEN

t?l.: +352 26 74 94 - 28
fax.: +352 26 74 94 99
http://www.metrico.lu
From SSchantz at BfS.de  Tue Dec 20 09:08:25 2011
From: SSchantz at BfS.de (Stefan Schantz)
Date: Tue Dec 20 09:09:09 2011
Subject: [gdal-dev] how to use the filter option -where within an mysql
	request?
In-Reply-To: <1324385442.4ef084a248ca0@imp.free.fr>
References: <4EF07DB6.5060206@BfS.de> <1324385442.4ef084a248ca0@imp.free.fr>
Message-ID: <4EF096D9.401@BfS.de>

Hi again,
I 've tried it now with
ogrinfo --version
GDAL 1.8.0, released 2011/01/12

but with the same negative result:

without any filter, I get results like

OGRFeature(sql_statement):1677
   value (Real) =             99.215000
   end_measure (DateTime) = 2011/12/20  0:00:00
   POINT (8.64381981 50.6018486)

with the filter option "-where"
ogrinfo -ro 
MYSQL:onmon,host=10.130.63.11,user=user,password=pasword,port=3306,tables=result_current 
-SQL "SELECT value, end_measure,locality.geom from result_current JOIN 
locality on result_current.locality_code =locality.locality_code" -where 
"end_measure = '2011/12/20 0:00:00'"

I didn't get any hits.

Any idea?

Best regards,
Stefan


Am 20.12.2011 13:50, schrieb Even Rouault:
> Stefan,
>
> Please always mention the GDAL/OGR version you are using in your reports. It
> will save the readers from figuring out from the error message that you must use
> GDAL 1.7.x or an earlier version.
>
> The -where "end_measure = '2011-12-20'" clause doesn't work in GDAL 1.7.x or
> earlier because the code didn't support comparison on DateTime fields (the error
> message mentions list of binary fields, but DateTime fields too)
>
> I've done a quick test on GDAL 1.9.0beta1 and you can use comparisons on date,
> but they seem to be string based. And you have to respect the format of the
> string serialization used by OGR. In your case, it would be -where "end_measure
> = '2011/12/20  0:00:00'"
>
> However, there's no advantage of using -where when you already use -sql. The
> -sql is directly forwarded to the SQL engine of the RDBMS (when the OGR driver
> is the one of a RDBMS of course), so it will run faster than -where which,
> depending on situations, can be evaluated on OGR side.
> - On a layer which is already the result of -sql, the -where clause is always
> evaluated on OGR side, after the evaluation of -sql
> - If the layer is directly a table name, then the -where clause is generally
> forwarded to the server. (It might depend on the OGR driver however).
>
> So, as a rule of thumb, you can remember that there's no point in using both
> -sql and -where.
>
> Best regards,
>
> Even
>
From mather.stephen at gmail.com  Tue Dec 20 10:11:30 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Tue Dec 20 10:12:07 2011
Subject: [gdal-dev] How to-- gdal_calc.py
Message-ID: <CAPkJWLXt_aYKkzVcgao-rK6xXkS1C_761VTSuAbq7VpEMRDxGQ@mail.gmail.com>

Hi All,
      Is there any casting (for lack of a better word) needed when using
gdal_calc to take, e.g. a series of 16-bit images and perform float
functions against them?

Best,
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111220/c32a757e/attachment.html
From traviskirstine at gmail.com  Tue Dec 20 10:24:34 2011
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue Dec 20 10:25:09 2011
Subject: [gdal-dev] How to-- gdal_calc.py
In-Reply-To: <CAPkJWLXt_aYKkzVcgao-rK6xXkS1C_761VTSuAbq7VpEMRDxGQ@mail.gmail.com>
References: <CAPkJWLXt_aYKkzVcgao-rK6xXkS1C_761VTSuAbq7VpEMRDxGQ@mail.gmail.com>
Message-ID: <CALtm4h2wjZ1MDJ05z+vRh7kU4yqtu2rgzFpdH3S5yizFcxc8hQ@mail.gmail.com>

Stephen,

I haven't used the gdal_calc tool but if you use python you can easily
convert the image bands to a set of numpy arrays and use all the
great numpy functions.

See the val_repl.py  sample to convert a image to a numpy array(s)
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_repl.py

Numpy Stuff:
http://www.scipy.org/Numpy_Example_List#head-7eb5ca476fca411db1db64bc024b7c0c94e42143

Regards


On 20 December 2011 10:11, Stephen Mather <mather.stephen@gmail.com> wrote:
> Hi All,
> ????? Is there any casting (for lack of a better word) needed when using
> gdal_calc to take, e.g. a series of 16-bit images and perform float
> functions against them?
>
> Best,
> Steve
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Dec 20 10:58:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 20 10:59:55 2011
Subject: [gdal-dev] how to use the filter option -where within an mysql
	request?
In-Reply-To: <4EF096D9.401@BfS.de>
References: <4EF07DB6.5060206@BfS.de> <1324385442.4ef084a248ca0@imp.free.fr>
	<4EF096D9.401@BfS.de>
Message-ID: <1324396733.4ef0b0bd1bda9@imp.free.fr>

Selon Stefan Schantz <SSchantz@BfS.de>:

> Hi again,
> I 've tried it now with
> ogrinfo --version
> GDAL 1.8.0, released 2011/01/12
>
> but with the same negative result:
>
> without any filter, I get results like
>
> OGRFeature(sql_statement):1677
>    value (Real) =             99.215000
>    end_measure (DateTime) = 2011/12/20  0:00:00
>    POINT (8.64381981 50.6018486)
>
> with the filter option "-where"
> ogrinfo -ro
>
MYSQL:onmon,host=10.130.63.11,user=user,password=pasword,port=3306,tables=result_current
> -SQL "SELECT value, end_measure,locality.geom from result_current JOIN
> locality on result_current.locality_code =locality.locality_code" -where
> "end_measure = '2011/12/20 0:00:00'"
>
> I didn't get any hits.
>
> Any idea?

Perhaps, there's 2 spaces between 2011/12/20 and 0:00:00 in the output of
ogrinfo, whereas there's only one in your where clause... Yes, the matching is
strictly string based...

>
> Best regards,
> Stefan
>
>
> Am 20.12.2011 13:50, schrieb Even Rouault:
> > Stefan,
> >
> > Please always mention the GDAL/OGR version you are using in your reports.
> It
> > will save the readers from figuring out from the error message that you
> must use
> > GDAL 1.7.x or an earlier version.
> >
> > The -where "end_measure = '2011-12-20'" clause doesn't work in GDAL 1.7.x
> or
> > earlier because the code didn't support comparison on DateTime fields (the
> error
> > message mentions list of binary fields, but DateTime fields too)
> >
> > I've done a quick test on GDAL 1.9.0beta1 and you can use comparisons on
> date,
> > but they seem to be string based. And you have to respect the format of the
> > string serialization used by OGR. In your case, it would be -where
> "end_measure
> > = '2011/12/20  0:00:00'"
> >
> > However, there's no advantage of using -where when you already use -sql.
> The
> > -sql is directly forwarded to the SQL engine of the RDBMS (when the OGR
> driver
> > is the one of a RDBMS of course), so it will run faster than -where which,
> > depending on situations, can be evaluated on OGR side.
> > - On a layer which is already the result of -sql, the -where clause is
> always
> > evaluated on OGR side, after the evaluation of -sql
> > - If the layer is directly a table name, then the -where clause is
> generally
> > forwarded to the server. (It might depend on the OGR driver however).
> >
> > So, as a rule of thumb, you can remember that there's no point in using
> both
> > -sql and -where.
> >
> > Best regards,
> >
> > Even
> >
>


From SSchantz at BfS.de  Tue Dec 20 11:35:20 2011
From: SSchantz at BfS.de (Stefan Schantz)
Date: Tue Dec 20 11:35:04 2011
Subject: [gdal-dev] how to use the filter option -where within an mysql
	request?
In-Reply-To: <1324396733.4ef0b0bd1bda9@imp.free.fr>
References: <4EF07DB6.5060206@BfS.de> <1324385442.4ef084a248ca0@imp.free.fr>
	<4EF096D9.401@BfS.de> <1324396733.4ef0b0bd1bda9@imp.free.fr>
Message-ID: <4EF0B948.6030500@BfS.de>

Hello Even,
that's it. It is really strictly string based...
Thanks!
Stefan


Am 20.12.2011 16:58, schrieb Even Rouault:
> Selon Stefan Schantz<SSchantz@BfS.de>:
>
>> Hi again,
>> I 've tried it now with
>> ogrinfo --version
>> GDAL 1.8.0, released 2011/01/12
>>
>> but with the same negative result:
>>
>> without any filter, I get results like
>>
>> OGRFeature(sql_statement):1677
>>     value (Real) =             99.215000
>>     end_measure (DateTime) = 2011/12/20  0:00:00
>>     POINT (8.64381981 50.6018486)
>>
>> with the filter option "-where"
>> ogrinfo -ro
>>
> MYSQL:onmon,host=10.130.63.11,user=user,password=pasword,port=3306,tables=result_current
>> -SQL "SELECT value, end_measure,locality.geom from result_current JOIN
>> locality on result_current.locality_code =locality.locality_code" -where
>> "end_measure = '2011/12/20 0:00:00'"
>>
>> I didn't get any hits.
>>
>> Any idea?
> Perhaps, there's 2 spaces between 2011/12/20 and 0:00:00 in the output of
> ogrinfo, whereas there's only one in your where clause... Yes, the matching is
> strictly string based...
>
>> Best regards,
>> Stefan
>>
>>
>> Am 20.12.2011 13:50, schrieb Even Rouault:
>>> Stefan,
>>>
>>> Please always mention the GDAL/OGR version you are using in your reports.
>> It
>>> will save the readers from figuring out from the error message that you
>> must use
>>> GDAL 1.7.x or an earlier version.
>>>
>>> The -where "end_measure = '2011-12-20'" clause doesn't work in GDAL 1.7.x
>> or
>>> earlier because the code didn't support comparison on DateTime fields (the
>> error
>>> message mentions list of binary fields, but DateTime fields too)
>>>
>>> I've done a quick test on GDAL 1.9.0beta1 and you can use comparisons on
>> date,
>>> but they seem to be string based. And you have to respect the format of the
>>> string serialization used by OGR. In your case, it would be -where
>> "end_measure
>>> = '2011/12/20  0:00:00'"
>>>
>>> However, there's no advantage of using -where when you already use -sql.
>> The
>>> -sql is directly forwarded to the SQL engine of the RDBMS (when the OGR
>> driver
>>> is the one of a RDBMS of course), so it will run faster than -where which,
>>> depending on situations, can be evaluated on OGR side.
>>> - On a layer which is already the result of -sql, the -where clause is
>> always
>>> evaluated on OGR side, after the evaluation of -sql
>>> - If the layer is directly a table name, then the -where clause is
>> generally
>>> forwarded to the server. (It might depend on the OGR driver however).
>>>
>>> So, as a rule of thumb, you can remember that there's no point in using
>> both
>>> -sql and -where.
>>>
>>> Best regards,
>>>
>>> Even
>>>
>
>
From mather.stephen at gmail.com  Tue Dec 20 12:25:35 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Tue Dec 20 12:25:53 2011
Subject: [gdal-dev] How to-- gdal_calc.py
In-Reply-To: <CALtm4h2wjZ1MDJ05z+vRh7kU4yqtu2rgzFpdH3S5yizFcxc8hQ@mail.gmail.com>
References: <CAPkJWLXt_aYKkzVcgao-rK6xXkS1C_761VTSuAbq7VpEMRDxGQ@mail.gmail.com>
	<CALtm4h2wjZ1MDJ05z+vRh7kU4yqtu2rgzFpdH3S5yizFcxc8hQ@mail.gmail.com>
Message-ID: <CAPkJWLUwcbz4nCzyO=1L5X53zszw+FY_cegfgG8zd4t3-2oNvw@mail.gmail.com>

Thanks Travis,

Steve


On Tue, Dec 20, 2011 at 10:24 AM, Travis Kirstine
<traviskirstine@gmail.com>wrote:

> Stephen,
>
> I haven't used the gdal_calc tool but if you use python you can easily
> convert the image bands to a set of numpy arrays and use all the
> great numpy functions.
>
> See the val_repl.py  sample to convert a image to a numpy array(s)
> http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/val_repl.py
>
> Numpy Stuff:
>
> http://www.scipy.org/Numpy_Example_List#head-7eb5ca476fca411db1db64bc024b7c0c94e42143
>
> Regards
>
>
> On 20 December 2011 10:11, Stephen Mather <mather.stephen@gmail.com>
> wrote:
> > Hi All,
> >       Is there any casting (for lack of a better word) needed when using
> > gdal_calc to take, e.g. a series of 16-bit images and perform float
> > functions against them?
> >
> > Best,
> > Steve
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111220/0c9e1c03/attachment.html
From even.rouault at mines-paris.org  Tue Dec 20 15:29:27 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 20 15:29:56 2011
Subject: [gdal-dev] [python] CopyDataSource question
In-Reply-To: <4EF08EA6.4050002@metrico.lu>
References: <4EF05B28.1070605@metrico.lu>
	<1324383410.4ef07cb2509bb@imp.free.fr>
	<4EF08EA6.4050002@metrico.lu>
Message-ID: <201112202129.27375.even.rouault@mines-paris.org>

Le mardi 20 d?cembre 2011 14:33:26, Frank Broniewski a ?crit :
> I am sorry that I was not precise enough in my previous email. On my
> development system (Debian 6, Python 2.6, gdal 1.7.3) my scripts work as
> expected. My server (Ubuntu 8.04, Python 2.5, gdal 1.8.0) has the
> problems running the test. On both systems I am using package
> repositories, though on Ubuntu it is the non official UbuntuGIS repo.
> 
> Using the OGR API directly, that means without my wrapper functions and
> classes, I can successfully use CopyDataSource() on both systems.
> So the issue lies within the manner how I use the OGR API. I will need
> to find out the differences between the OGR-only approach and mine but
> that will probably take a while. After that I can hopefully provide a
> not working test code with data.

Hum, perhaps you are  running into one of the gotchas listed (non exhaustive 
list) in : http://trac.osgeo.org/gdal/wiki/PythonGotchas

But I'd be surprised that you don't see the same behaviour with 1.7.3 or 
1.8.0. The objet lifecycle management hasn't evolved that much during the last 
decade ;-)

> 
> Concerning the debugging: How can I find out if my gdal version comes
> with the debugging symbols?

Distro versions generally don't go with debugging symbols. There might be 
additional packages with debug symbols, but I'm not sure on Debian based 
systems. Otherwise, you'd better compile a version by yourself. Trying GDAL 
1.9.0beta1 might be a usefull exercice ;-)

> 
> Many thanks
> 
> Frank
> 
> Am 20.12.2011 13:16, schrieb Even Rouault:
> > Frank,
> > 
> >> Hi,
> >> 
> >> I have (again) a question concerning the Driver.CopyDataSource() method
> >> using OGR Python bindings
> >> 
> >> I've written some code that copies a datasource to another format, using
> >> a target driver and its CopyDataSource() method. This works fine for
> >> GDAL version 1.7.3, but fails under 1.8.0. Failing means that the
> >> CopyDataSource call is made but never finishes. It just sits there and
> >> does nothing. This is however related to *my code*, and *not* an OGR
> >> error.
> > 
> > Reading your further explanations, it is difficult to know if it's a
> > problem in your code, or in OGR.
> > 
> >> Doing the task with OGR classes directly works.
> > 
> > What do you mean by "with OGR classes" ? Do you mean when not using
> > CopyDataSource() ?
> > 
> >> But I wonder why
> >> my script runs fine on one system but not on the other.
> > 
> > One system with 1.7.3 and the other with 1.8.0 ?
> > 
> >> I have some sample test data with which I test my code. The sample is a
> >> point shapefile and I copy it to GeoJSON, GML and KML formats. The
> >> GeoJSON still works, but the GML test fails, and KML also.
> >> 
> >> So my question (at last ;-)): What could make the CopyDataSource fail
> >> with GML and KML, but succeed with GeoJSON? And make it completely
> >> succeed under GDAL 1.7.3?
> > 
> > That stalling in CopyDataSource() doesn't sound good. I've no ready-made
> > explanation for this. Would you be able to create a minimalistic
> > standalone python script of just a few lines of code (not your entire
> > python code), with associated test data, that can be used to replicate
> > the issue ?
> > 
> > Which OS do you use ? Did you compile GDAL by yourself or do you use a
> > binary distribution ?
> > 
> > Provided you have a version of the GDAL librairy with debugging symbols,
> > you could try attaching a debugger to the process and observe what
> > happens step by step in CopyDataSource().
> > 
> >> Looking at ogr2ogr.py, CopyDataSource is never used there.
> > 
> > Yes, ogr2ogr offer more options and can do more advanced transformations
> > than CopyDataSource() can do, so it needs control at the layer and
> > feature level.
> > 
> >> Am I abusing
> >> CopyDataSource? Is it the right tool to copy a datasource to a new
> >> format?
> > 
> > CopyDataSource() is very basic, but it should work for what it is
> > supposed to do, and not block forever.
> > 
> > Best ragards,
> > 
> > Even
From rjpawley at shaw.ca  Tue Dec 20 16:30:20 2011
From: rjpawley at shaw.ca (Bob Pawley)
Date: Tue Dec 20 16:30:49 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <201112191752.21075.Ralf.Suhr@itc-halle.de>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
	<201112190958.31190.Ralf.Suhr@itc-halle.de>
	<8AC2D92E8D5A40C3A39D3CA7437242CC@BobPC>
	<201112191752.21075.Ralf.Suhr@itc-halle.de>
Message-ID: <7EC79663A65E497B8F2096A9D3B6A480@BobPC>

When I run 
ogrinfo --config DXF_INLINE_BLOCKS FALSE W_Works.dxf 

    it results in this message

Open of `W_Works.dxf'
      using driver `DXF' successful.
1: blocks
2: entities

And I?m using DraftSight as a drawing viewer.All of the information I want is on the model, but it still won?t import unless I explode the dxf file before saving.

I did try running your suggested sql command. I got an error ?Undefined function ?Dump? used.

I also used the sql suggestion as a trigger function on the import table. Neither blocks nor entities were recognized.

Bob

From: Ralf Suhr 
Sent: Monday, December 19, 2011 8:52 AM
To: Bob Pawley 
Cc: gdal-dev@lists.osgeo.org 
Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

http://www.gdal.org/ogr/drv_dxf.html



Does ogrinfo print out the "blocks" layer?

ogrinfo --config DXF_INLINE_BLOCKS FALSE File.dxf 

INFO: Open of `File.dxf'

using driver `DXF' successful.

1: blocks

2: entities



To see what can be imported by ogr use a dxfviewer that display only the model space. I have tested ogr with dxf version up to AC1018 without problems except the paper space.





Gr

Ralf



On Montag 19 Dezember 2011 17:21:58 Bob Pawley wrote:

> Thanks Ralf

> 

> So far, I haven?t been able to populate the block columns unless I use a

> DXF file which has been exploded before saving.

> 

> In all of my searching, I have not come across your suggestion of

> dereferencing the block. Can you point me to some documentation?

> 

> Bob

> 

> 

> From: Ralf Suhr

> Sent: Monday, December 19, 2011 12:58 AM

> To: gdal-dev@lists.osgeo.org

> Cc: Bob Pawley

> Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

> 

> Hi Bob,

> 

> 

> 

> the dxf driver writes to tables "entities" and "blocks". You have to

> dereference the block layer yourself.

> 

> 

> 

> SELECT Translate( Scale( Rotate((Dump(b.wkb_geometry)).geom, e.blockangle /

> 180 * PI()), e.blockscale[1], e.blockscale[2]), ST_X(e.wkb_geometry),

> ST_Y(e.wkb_geometry)) AS wkb_geometry,

> 

> CASE WHEN b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS

> ogr_style,

> 

> e.layer,

> 

> e.linetype,

> 

> e.subclasses,

> 

> b.text

> 

> FROM entities e

> 

> INNER JOIN

> 

> blocks b USING (blockname);

> 

> 

> 

> Sometimes you have blocks with world coordinates and no connection in

> entities.

> 

> SELECT (Dump(b.wkb_geometry)).geom AS wkb_geometry,

> 

> b.ogr_style,

> 

> b.layer,

> 

> b.linetype,

> 

> b.subclasses,

> 

> b.text

> 

> FROM blocks b

> 

> WHERE blockname NOT IN

> 

> (

> 

> SELECT DISTINCT blockname

> 

> FROM entities

> 

> WHERE blockname IS NOT NULL

> 

> );

> 

> 

> 

> Some newer DXF Formats can have features in paper space. This is now not

> supported by ogr2ogr.

> 

> 

> 

> 

> 

> Gr

> 

> Ralf

> 

> On Freitag 16 Dezember 2011 22:14:38 Bob Pawley wrote:

> > I have imported a dxf file into Postgis using the following command line

> > -

> > 

> > 

> > 

> > set DXF_INLINE_BLOCKS=FALSE&set DXF_MERGE_BLOCK_GEOMETRIES=FALSE&set

> > 

> > PGCLIENTENCODING=LATIN1&&ogr2ogr -f "PostgreSQL" PG:"host=localhost

> > 

> > user=postgres dbname=dbname password=pass" W_Works.dxf -nln Import_PID

> > 

> > -overwrite ?skipfailures

> > 

> > 

> > 

> > All geometries are intact.

> > 

> > 

> > 

> > However, the text is part of the Linestring layer and not in the text

> > 

> > column of the Postgresql table.

> > 

> > 

> > 

> > Is this to be expected?

> > 

> > 

> > 

> > Is there some way of screening out the text as text and point geometry?

> > 

> > 

> > 

> > Bob


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111220/7bbf9828/attachment-0001.html
From rajjad at gmail.com  Wed Dec 21 05:43:44 2011
From: rajjad at gmail.com (Imran Rajjad)
Date: Wed Dec 21 05:44:36 2011
Subject: [gdal-dev] loading oracle table as layer
Message-ID: <CADz3VuVMQaT=VUORiv+tKoaicuwOzm1RtQjY3BVvQPOfLtceSQ@mail.gmail.com>

Hi list,

I have an oracle table with a SDO_Geometry column, is it possible to access
this table using gdal/java and do transactions like insertion and modifying
features, since this table is used by a gis server and to make changes I
have to go through a long process . I check the layer class in Gdal
javadocs, there is no sign of creating a layer from oracle.

regards,
Imran

-- 
I.R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111221/c0d92eaf/attachment.html
From rbaatz at gmail.com  Wed Dec 21 06:13:14 2011
From: rbaatz at gmail.com (RolandB)
Date: Wed Dec 21 06:14:02 2011
Subject: [gdal-dev] GDAL interpolation of Gtiff / ESRI polygon.shp
Message-ID: <1324465994840-7114807.post@n2.nabble.com>

Dear users,

I want use gdal for some file transformation.
Any help in solving the issue is greatly appreciated by me! It would
be great if one of you have solved already this problem or knows how to do
so.

By gdal_rasterize I did create a Gtiff raster from a ESRI Polygon shapefile.
This is successful. I have worked with the Gtiff successful later on with
$user>: gdal_translate -of netCDF ./tmp/output.tif ./tmp/output2.nc
Still some commands do not work. I'm looking forward for replies.


Where is the GTiff driver in the list below???
And what is the output layer of the Gtiff file? I tried "1", "Band1",
"band". No file opening with any band.

So here are the commands and the error messages:

First:

*$user>: * gdal_rasterize -a kennummer -init 0 -l Bk50_rur_wgs -te 5.93
50.39 6.74722 51.22886 -ts 59 94 -ot Int32 ./Input/bk50_rur_wgs.shp
./tmp/output.tif
0...10...20...30...40...50...60...70...80...90...100 - done.

*$user>: *gdal_grid -a invdist:power=2.0:smoothing=1.0 -ot Int32 -txe
50.39 51.22886 -tye 5.93 6.74722 -outsize 59 94 -l Band1
./tmp/output.tif ./tmp/newout.tif
Unable to open input datasource "./tmp/output.tif".

*$user>:* "gdalinfo ./tmp/output.tif"

Driver: GTiff/GeoTIFF
Files: ./tmp/output.tif
Size is 59, 94
Coordinate System is:
GEOGCS["WGS 84",
  DATUM["WGS_1984",
      SPHEROID["WGS 84",6378137,298.257223563,
          AUTHORITY["EPSG","7030"]],
      AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0],
  UNIT["degree",0.0174532925199433],
  AUTHORITY["EPSG","4326"]]
Origin = (5.930000000000000,51.228859999999997)
Pixel Size = (0.013851186440678,-0.008924042553191)
Metadata:
 AREA_OR_POINT=Area
Image Structure Metadata:
 INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   5.9300000,  51.2288600)
Lower Left  (   5.9300000,  50.3900000)
Upper Right (   6.7472200,  51.2288600)
Lower Right (   6.7472200,  50.3900000)
Center      (   6.3386100,  50.8094300)
Band 1 Block=59x34 Type=Int32, ColorInterp=Gray


*$user>: *"ogrinfo ./tmp/output.tif"
FAILURE:
Unable to open datasource `./tmp/output.tif' with the following drivers.
 -> ESRI Shapefile
 -> MapInfo File
 -> UK .NTF
 -> SDTS
 -> TIGER
 -> S57
 -> DGN
 -> VRT
 -> REC
 -> Memory
 -> BNA
 -> CSV
 -> GML
 -> GPX
 -> KML
 -> GeoJSON
 -> GMT
 -> SQLite
 -> PostgreSQL
 -> PCIDSK
 -> XPlane
 -> AVCBin
 -> AVCE00
 -> DXF
 -> Geoconcept
 -> GeoRSS
 -> GPSTrackMaker
 -> VFK
 -> PGDump
 -> GPSBabel
 -> SUA
 -> OpenAir
 -> PDS
 -> WFS
 -> HTF
 -> AeronavFAA

*$user>:* gdal_translate -of netCDF ./tmp/output.tif ./tmp/output2.nc
Input file size is 59, 94

(This last should be done with the interpolated file, which I did not
manage so far.)

Best regards,
Roland

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-interpolation-of-Gtiff-ESRI-polygon-shp-tp7114807p7114807.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yehya_imam at yahoo.com  Wed Dec 21 07:10:39 2011
From: yehya_imam at yahoo.com (yehya imam)
Date: Wed Dec 21 07:11:14 2011
Subject: [gdal-dev] (no subject)
Message-ID: <1324469439.62823.yint-ygo-j2me@web113704.mail.gq1.yahoo.com>


.It seems to be the biggest on-line shop! It?s fantastic!  http://phbalanse.no/friends.group.php?yfs=07r3
From yjacolin at free.fr  Wed Dec 21 06:34:10 2011
From: yjacolin at free.fr (=?utf-8?B?WXZlcyBKYWNvbGlu?=)
Date: Wed Dec 21 07:14:13 2011
Subject: =?utf-8?B?UmUgOiBbZ2RhbC1kZXZdIEdEQUwgaW50ZXJwb2xhdGlvbiBvZiBHdGlmZiAvIEVT?=
	=?utf-8?B?UkkgcG9seWdvbi5zaHA=?=
Message-ID: <80.125.173.129.1324467289.28900@ns0.ovh.net>

Hello,

Ogrinfo is for vector files, use gdalinfo instead.

Regards,

Yves Jacolin

----- Reply message -----
De : "RolandB" <rbaatz@gmail.com>
Pour?: <gdal-dev@lists.osgeo.org>
Objet : [gdal-dev] GDAL interpolation of Gtiff / ESRI polygon.shp
Date : mer., d?c. 21, 2011 12:13


Dear users,

I want use gdal for some file transformation.
Any help in solving the issue is greatly appreciated by me! It would
be great if one of you have solved already this problem or knows how to do
so.

By gdal_rasterize I did create a Gtiff raster from a ESRI Polygon shapefile.
This is successful. I have worked with the Gtiff successful later on with
$user>: gdal_translate -of netCDF ./tmp/output.tif ./tmp/output2.nc
Still some commands do not work. I'm looking forward for replies.


Where is the GTiff driver in the list below???
And what is the output layer of the Gtiff file? I tried "1", "Band1",
"band". No file opening with any band.

So here are the commands and the error messages:

First:

*$user>: * gdal_rasterize -a kennummer -init 0 -l Bk50_rur_wgs -te 5.93
50.39 6.74722 51.22886 -ts 59 94 -ot Int32 ./Input/bk50_rur_wgs.shp
./tmp/output.tif
0...10...20...30...40...50...60...70...80...90...100 - done.

*$user>: *gdal_grid -a invdist:power=2.0:smoothing=1.0 -ot Int32 -txe
50.39 51.22886 -tye 5.93 6.74722 -outsize 59 94 -l Band1
./tmp/output.tif ./tmp/newout.tif
Unable to open input datasource "./tmp/output.tif".

*$user>:* "gdalinfo ./tmp/output.tif"

Driver: GTiff/GeoTIFF
Files: ./tmp/output.tif
Size is 59, 94
Coordinate System is:
GEOGCS["WGS 84",
  DATUM["WGS_1984",
      SPHEROID["WGS 84",6378137,298.257223563,
          AUTHORITY["EPSG","7030"]],
      AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0],
  UNIT["degree",0.0174532925199433],
  AUTHORITY["EPSG","4326"]]
Origin = (5.930000000000000,51.228859999999997)
Pixel Size = (0.013851186440678,-0.008924042553191)
Metadata:
 AREA_OR_POINT=Area
Image Structure Metadata:
 INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (   5.9300000,  51.2288600)
Lower Left  (   5.9300000,  50.3900000)
Upper Right (   6.7472200,  51.2288600)
Lower Right (   6.7472200,  50.3900000)
Center      (   6.3386100,  50.8094300)
Band 1 Block=59x34 Type=Int32, ColorInterp=Gray


*$user>: *"ogrinfo ./tmp/output.tif"
FAILURE:
Unable to open datasource `./tmp/output.tif' with the following drivers.
 -> ESRI Shapefile
 -> MapInfo File
 -> UK .NTF
 -> SDTS
 -> TIGER
 -> S57
 -> DGN
 -> VRT
 -> REC
 -> Memory
 -> BNA
 -> CSV
 -> GML
 -> GPX
 -> KML
 -> GeoJSON
 -> GMT
 -> SQLite
 -> PostgreSQL
 -> PCIDSK
 -> XPlane
 -> AVCBin
 -> AVCE00
 -> DXF
 -> Geoconcept
 -> GeoRSS
 -> GPSTrackMaker
 -> VFK
 -> PGDump
 -> GPSBabel
 -> SUA
 -> OpenAir
 -> PDS
 -> WFS
 -> HTF
 -> AeronavFAA

*$user>:* gdal_translate -of netCDF ./tmp/output.tif ./tmp/output2.nc
Input file size is 59, 94

(This last should be done with the interpolated file, which I did not
manage so far.)

Best regards,
Roland

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-interpolation-of-Gtiff-ESRI-polygon-shp-tp7114807p7114807.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111221/6a1bd6d7/attachment.html
From ivan.lucena at pmldnet.com  Wed Dec 21 09:09:34 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Dec 21 09:17:07 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gbG9hZGluZyBvcmFjbGUgdGFibGUgYXMgbGF5ZXI=?=
In-Reply-To: <CADz3VuVMQaT=VUORiv+tKoaicuwOzm1RtQjY3BVvQPOfLtceSQ@mail.gmail.com>
References: <CADz3VuVMQaT=VUORiv+tKoaicuwOzm1RtQjY3BVvQPOfLtceSQ@mail.gmail.com>
Message-ID: <20111221140934.27270.qmail@s466.sureserver.com>

Imran,

Does your GDAL installation has the OGR/OCI driver?

$ ogrinfo --formats
...
  -> "OCI" (read/write)
...

$ ogrinfo oci:<usr>/<pwd>

The GDAL JavaDocs does not include information about each driver but you might find documentation about the sdo_geometry (OCI) driver here: http://www.gdal.org/ogr/drv_oci.html

Regards,

Ivan

>  -------Original Message-------
>  From: Imran Rajjad <rajjad@gmail.com>
>  To: gdal-dev <gdal-dev@lists.osgeo.org>
>  Subject: [gdal-dev] loading oracle table as layer
>  Sent: Dec 21 '11 05:43
>  
>  Hi list,
>  ?
>  I have an oracle table with a SDO_Geometry column, is it possible to access
>  this table using gdal/java and do transactions like insertion and modifying
>  features, since this table is used by a gis server and to make changes I
>  have to go through a long process . I check the layer class in Gdal
>  javadocs, there is no sign of creating a layer from oracle.
>  ?
>  regards,
>  Imran
>  
>  --
>  I.R
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ksshannon at gmail.com  Wed Dec 21 11:00:48 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Dec 21 11:02:03 2011
Subject: [gdal-dev] GDAL interpolation of Gtiff / ESRI polygon.shp
In-Reply-To: <1324465994840-7114807.post@n2.nabble.com>
References: <1324465994840-7114807.post@n2.nabble.com>
Message-ID: <CAJ0mEz1p0OOa83z+84xZ=HeJXD0QzH0d5_r-1C5so7Y9VVDzYg@mail.gmail.com>

Roland,
I believe gdal_grid takes an ogr file as input and creates a raster from a
point layer.  If you just want to resample a raster, try gdalwarp, without
the warping:

kyle@local$ gdalwarp -ts 118 188 -r cubicspline coarse.tif fine.tif

where -ts is 'target size' and -r is resampling method.  See gdalwarp
documentation for info:

http://gdal.org/gdalwarp.html

also here is the gdal_grid info:

http://gdal.org/gdal_grid.html

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */



On Wed, Dec 21, 2011 at 04:13, RolandB <rbaatz@gmail.com> wrote:

> Dear users,
>
> I want use gdal for some file transformation.
> Any help in solving the issue is greatly appreciated by me! It would
> be great if one of you have solved already this problem or knows how to do
> so.
>
> By gdal_rasterize I did create a Gtiff raster from a ESRI Polygon
> shapefile.
> This is successful. I have worked with the Gtiff successful later on with
> $user>: gdal_translate -of netCDF ./tmp/output.tif ./tmp/output2.nc
> Still some commands do not work. I'm looking forward for replies.
>
>
> Where is the GTiff driver in the list below???
> And what is the output layer of the Gtiff file? I tried "1", "Band1",
> "band". No file opening with any band.
>
> So here are the commands and the error messages:
>
> First:
>
> *$user>: * gdal_rasterize -a kennummer -init 0 -l Bk50_rur_wgs -te 5.93
> 50.39 6.74722 51.22886 -ts 59 94 -ot Int32 ./Input/bk50_rur_wgs.shp
> ./tmp/output.tif
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> *$user>: *gdal_grid -a invdist:power=2.0:smoothing=1.0 -ot Int32 -txe
> 50.39 51.22886 -tye 5.93 6.74722 -outsize 59 94 -l Band1
> ./tmp/output.tif ./tmp/newout.tif
> Unable to open input datasource "./tmp/output.tif".
>
> *$user>:* "gdalinfo ./tmp/output.tif"
>
> Driver: GTiff/GeoTIFF
> Files: ./tmp/output.tif
> Size is 59, 94
> Coordinate System is:
> GEOGCS["WGS 84",
>  DATUM["WGS_1984",
>      SPHEROID["WGS 84",6378137,298.257223563,
>          AUTHORITY["EPSG","7030"]],
>      AUTHORITY["EPSG","6326"]],
>  PRIMEM["Greenwich",0],
>  UNIT["degree",0.0174532925199433],
>  AUTHORITY["EPSG","4326"]]
> Origin = (5.930000000000000,51.228859999999997)
> Pixel Size = (0.013851186440678,-0.008924042553191)
> Metadata:
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (   5.9300000,  51.2288600)
> Lower Left  (   5.9300000,  50.3900000)
> Upper Right (   6.7472200,  51.2288600)
> Lower Right (   6.7472200,  50.3900000)
> Center      (   6.3386100,  50.8094300)
> Band 1 Block=59x34 Type=Int32, ColorInterp=Gray
>
>
> *$user>: *"ogrinfo ./tmp/output.tif"
> FAILURE:
> Unable to open datasource `./tmp/output.tif' with the following drivers.
>  -> ESRI Shapefile
>  -> MapInfo File
>  -> UK .NTF
>  -> SDTS
>  -> TIGER
>  -> S57
>  -> DGN
>  -> VRT
>  -> REC
>  -> Memory
>  -> BNA
>  -> CSV
>  -> GML
>  -> GPX
>  -> KML
>  -> GeoJSON
>  -> GMT
>  -> SQLite
>  -> PostgreSQL
>  -> PCIDSK
>  -> XPlane
>  -> AVCBin
>  -> AVCE00
>  -> DXF
>  -> Geoconcept
>  -> GeoRSS
>  -> GPSTrackMaker
>  -> VFK
>  -> PGDump
>  -> GPSBabel
>  -> SUA
>  -> OpenAir
>  -> PDS
>  -> WFS
>  -> HTF
>  -> AeronavFAA
>
> *$user>:* gdal_translate -of netCDF ./tmp/output.tif ./tmp/output2.nc
> Input file size is 59, 94
>
> (This last should be done with the interpolated file, which I did not
> manage so far.)
>
> Best regards,
> Roland
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-interpolation-of-Gtiff-ESRI-polygon-shp-tp7114807p7114807.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111221/2eb09259/attachment-0001.html
From ksshannon at gmail.com  Wed Dec 21 11:39:30 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Dec 21 11:40:18 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
In-Reply-To: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
References: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
Message-ID: <CAJ0mEz3Z3DJ=RZV5gD989ipsp2KyGUkt748nwCVMP5D_gLG8mA@mail.gmail.com>

I am getting 3 failed tests, fedora 16 x64:

[kyle@localhost ~]$ uname -s -r -p -i -o
Linux 3.1.0-7.fc16.x86_64 x86_64 x86_64 GNU/Linux

[kyle@localhost gdalautotest-1.9.0]$ ./configure --enable-debug
--with-python --prefix=/home/kyle/src/gdal/beta/gdal-1.9.0b1/build

...

 ------------ Failures ------------
Script: ogr/ogr_gft.py
TEST: ogr_gft_write ... fail
Script: ogr/ogr_couchdb.py
TEST: ogr_couchdb_SetSpatialFilter ... fail
line 235: did not get expected feature count (1)
TEST: ogr_couchdb_SetSpatialFilter ... fail
line 235: did not get expected feature count (1)
----------------------------------

Test Script: pyscripts/test_gdal_sieve.py
Succeeded: 2188
Failed: 3 (0 blew exceptions)
Skipped: 673
Expected fail:13
As GDAL_RUN_SLOW_TESTS environment variable is not defined, 20 "slow" tests
have been skipped



/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */



On Mon, Dec 19, 2011 at 19:21, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Folks,
>
> I have prepared a first cut for the 1.9.0 release (Beta 1).  Source code
> and the autotest suite can be found at:
>
>  http://download.osgeo.org/gdal/gdal-1.9.0b1.tar.gz
>  http://download.osgeo.org/gdal/gdal190b1.zip
>  http://download.osgeo.org/gdal/gdalautotest-1.9.0b1.tar.gz
>
> NEWS can be found at:
>
>  http://trac.osgeo.org/gdal/wiki/Release/1.9.0-News
>
> Feedback is very welcome.  I hope to have a second beta in 3-4 days.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111221/175e506e/attachment.html
From even.rouault at mines-paris.org  Wed Dec 21 12:24:55 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 21 12:25:37 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
In-Reply-To: <CAJ0mEz3Z3DJ=RZV5gD989ipsp2KyGUkt748nwCVMP5D_gLG8mA@mail.gmail.com>
References: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
	<CAJ0mEz3Z3DJ=RZV5gD989ipsp2KyGUkt748nwCVMP5D_gLG8mA@mail.gmail.com>
Message-ID: <1324488295.4ef21667008ee@imp.free.fr>

Kyle,

Thanks for your report.

Nothing to worry particularly about :

- the gft failure is due to an authentication cookie to the test account that I
must renew regularly (~ 2 weeks). Not an ideal solution. I think I should make
that test to only report 'skip' if it fails. Or find a way to automate the
renewal.
- I somehow remember to have seen the 2 couchdb failures on builds where GDAL
was build without GEOS support ? Is it your case ?

Best regards,

Even
From ksshannon at gmail.com  Wed Dec 21 12:53:04 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Dec 21 12:53:48 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
In-Reply-To: <1324488295.4ef21667008ee@imp.free.fr>
References: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
	<CAJ0mEz3Z3DJ=RZV5gD989ipsp2KyGUkt748nwCVMP5D_gLG8mA@mail.gmail.com>
	<1324488295.4ef21667008ee@imp.free.fr>
Message-ID: <CAJ0mEz30h31oH0CV92VURhhi__EYUmfcptufz0+28a7c2ydyxw@mail.gmail.com>

>
> - the gft failure is due to an authentication cookie to the test account
> that I
>
must renew regularly (~ 2 weeks). Not an ideal solution. I think I should
> make
>
that test to only report 'skip' if it fails. Or find a way to automate the
>
renewal.
>

Sounds good.


> - I somehow remember to have seen the 2 couchdb failures on builds where
> GDAL
>
was build without GEOS support ? Is it your case ?
>

Correct, rebuilding with GEOS support, I will rerun my tests.

Thanks Even.

kss


/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */



On Wed, Dec 21, 2011 at 10:24, Even Rouault <even.rouault@mines-paris.org>wrote:

> Kyle,
>
> Thanks for your report.
>
> Nothing to worry particularly about :
>
> - the gft failure is due to an authentication cookie to the test account
> that I
> must renew regularly (~ 2 weeks). Not an ideal solution. I think I should
> make
> that test to only report 'skip' if it fails. Or find a way to automate the
> renewal.
> - I somehow remember to have seen the 2 couchdb failures on builds where
> GDAL
> was build without GEOS support ? Is it your case ?
>
> Best regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111221/82619bb5/attachment.html
From mateusz at loskot.net  Wed Dec 21 13:22:36 2011
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed Dec 21 13:23:00 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
In-Reply-To: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
References: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
Message-ID: <CABUeae_9QZf-ohpdBE0a8u1C_-knc=wKfSa9WUrKpkDWVqArMw@mail.gmail.com>

On 20 December 2011 02:21, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Folks,
>
> I have prepared a first cut for the 1.9.0 release (Beta 1). ?Source code
> and the autotest suite can be found at:
>
> ?http://download.osgeo.org/gdal/gdal190b1.zip

I have built it and quickly tested command line tools in action
using Visual Studio 2010, two configurations :
nmake /f makefile.vc MSVC_VER=1600
nmake /f makefile.vc MSVC_VER=1600 DEBUG=1

for both, WIN32 and WIN64.
All works for me.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From ksshannon at gmail.com  Wed Dec 21 13:30:45 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Dec 21 13:31:59 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
In-Reply-To: <CABUeae_9QZf-ohpdBE0a8u1C_-knc=wKfSa9WUrKpkDWVqArMw@mail.gmail.com>
References: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
	<CABUeae_9QZf-ohpdBE0a8u1C_-knc=wKfSa9WUrKpkDWVqArMw@mail.gmail.com>
Message-ID: <CAJ0mEz0hgp7m1EfeMeLth4FxYBv25EEWtWhLnYP1SwW5hBMJrQ@mail.gmail.com>

Even,

I rebuilt with GEOS support and I added podofo support as well, for fun.  I
got a failure with a bad checksum in pdf.py:

------------ Failures ------------
Script: ogr/ogr_gft.py
TEST: ogr_gft_write ... fail
Script: gdrivers/pdf.py
TEST: pdf_1 ... fail
line 164: bad checksum
----------------------------------

Test Script: pyscripts/test_gdal_sieve.py
Succeeded: 2238
Failed: 2 (0 blew exceptions)
Skipped: 624
Expected fail:13
As GDAL_RUN_SLOW_TESTS environment variable is not defined, 20 "slow" tests
have been skipped

kss

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */



2011/12/21 Mateusz ?oskot <mateusz@loskot.net>

> On 20 December 2011 02:21, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > Folks,
> >
> > I have prepared a first cut for the 1.9.0 release (Beta 1).  Source code
> > and the autotest suite can be found at:
> >
> >  http://download.osgeo.org/gdal/gdal190b1.zip
>
> I have built it and quickly tested command line tools in action
> using Visual Studio 2010, two configurations :
> nmake /f makefile.vc MSVC_VER=1600
> nmake /f makefile.vc MSVC_VER=1600 DEBUG=1
>
> for both, WIN32 and WIN64.
> All works for me.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111221/63a0b9f3/attachment.html
From even.rouault at mines-paris.org  Wed Dec 21 13:47:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 21 13:48:09 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
In-Reply-To: <CAJ0mEz0hgp7m1EfeMeLth4FxYBv25EEWtWhLnYP1SwW5hBMJrQ@mail.gmail.com>
References: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
	<CABUeae_9QZf-ohpdBE0a8u1C_-knc=wKfSa9WUrKpkDWVqArMw@mail.gmail.com>
	<CAJ0mEz0hgp7m1EfeMeLth4FxYBv25EEWtWhLnYP1SwW5hBMJrQ@mail.gmail.com>
Message-ID: <201112211947.16145.even.rouault@mines-paris.org>

Le mercredi 21 d?cembre 2011 19:30:45, Kyle Shannon a ?crit :
> Even,
> 
> I rebuilt with GEOS support 

ok I'll add a test for geos presence to skip the 2 tests if it is not 
available.

> and I added podofo support as well, for fun.  I
> got a failure with a bad checksum in pdf.py:

Can you just run pdf.py and look at the more precise error report. I believe 
it is due to missing poppler-utils ( pdftoppm namely ) that is necesserary to 
do the rasterization . See http://gdal.org/frmt_pdf.html
From ksshannon at gmail.com  Wed Dec 21 14:33:16 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Dec 21 14:34:24 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta1 Released
In-Reply-To: <201112211947.16145.even.rouault@mines-paris.org>
References: <CA+YzLBeoTH_qxQRL-XPmUxxwCxNPE2bC-mi1U40NNcAmM3F3qw@mail.gmail.com>
	<CABUeae_9QZf-ohpdBE0a8u1C_-knc=wKfSa9WUrKpkDWVqArMw@mail.gmail.com>
	<CAJ0mEz0hgp7m1EfeMeLth4FxYBv25EEWtWhLnYP1SwW5hBMJrQ@mail.gmail.com>
	<201112211947.16145.even.rouault@mines-paris.org>
Message-ID: <CAJ0mEz2Kq-MgYU-hfS5Kot9KT_uhy9Dhjw8s9Jq8=J9GQKv91A@mail.gmail.com>

I have pdftoppm:

[kyle@localhost gdrivers]$ pdftoppm -v
pdftoppm version 0.18.0
Copyright 2005-2011 The Poppler Developers - http://poppler.freedesktop.org
Copyright 1996-2004 Glyph & Cog, LLC

I can get the checksum:

[kyle@localhost gdrivers]$ gdalchksum.py data/adobe_style_geospatial.pdf
17637
17637
17637

running just the test:

[kyle@localhost gdrivers]$ python pdf.py
TEST: pdf_online_1 ... success
TEST: pdf_online_2 ... success
TEST: pdf_1 ... 16277
fail
line 164: bad checksum

Test Script: PDF
Succeeded: 2
Failed: 1 (0 blew exceptions)
Skipped: 0
Expected fail:0

Running a verbose test:

[kyle@localhost gdrivers]$ python pdf.py
TEST: pdf_online_1 ... PDF: OGC Encoding Best Practice style detected
PDF: LGIDict Version :
PDF: This is a the largest neatline for now
PDF: CTM[0] = 3.81944e-05
PDF: CTM[1] = 0
PDF: CTM[2] = 0
PDF: CTM[3] = 3.81944e-05
PDF: CTM[4] = -77.1123283333
PDF: CTM[5] = 38.8878783333
PDF: Datum = WGE
PDF: Projection.ProjectionType = GEOGRAPHIC
GDAL: GDALOpen(tmp/cache/Cherrydale_eDOQQ_1m_0_033_R1C1.pdf,
this=0x1428660) succeeds as PDF.
PDF: Running 'pdftoppm -r 150.000000 -f 1 -l 1
"tmp/cache/Cherrydale_eDOQQ_1m_0_033_R1C1.pdf" "./pdf3968087808_0"'
PNM: PNM header contains: width=621, height=544, maxval=255
GDALRaw: RawRasterBand(0x1414230,1,0x141d100,
Off=15,PixOff=3,LineOff=1863,Byte,0)

GDALRaw: RawRasterBand(0x1414230,2,0x141d100,
Off=16,PixOff=3,LineOff=1863,Byte,0)

GDALRaw: RawRasterBand(0x1414230,3,0x141d100,
Off=17,PixOff=3,LineOff=1863,Byte,0)

GDAL: GDALOpen(./pdf3968087808_0-1.ppm, this=0x1414230) succeeds as PNM.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(./pdf3968087808_0-1.ppm, this=0x1414230)
GDAL: GDALClose(tmp/cache/Cherrydale_eDOQQ_1m_0_033_R1C1.pdf,
this=0x1428660)
success
TEST: pdf_online_2 ... PDF: OGC Encoding Best Practice style detected
PDF: LGIDict Version :
PDF: This is a the largest neatline for now
PDF: CTM[0] = 3.81944e-05
PDF: CTM[1] = 0
PDF: CTM[2] = 0
PDF: CTM[3] = 3.81944e-05
PDF: CTM[4] = -77.1123283333
PDF: CTM[5] = 38.8878783333
PDF: Datum = WGE
PDF: Projection.ProjectionType = GEOGRAPHIC
GDAL: GDALOpen(PDF:1:tmp/cache/Cherrydale_eDOQQ_1m_0_033_R1C1.pdf,
this=0x1408ff0) succeeds as PDF.
GDAL: GDALClose(PDF:1:tmp/cache/Cherrydale_eDOQQ_1m_0_033_R1C1.pdf,
this=0x1408ff0)
success
TEST: pdf_1 ... PDF: Adobe ISO32000 style Geospatial PDF perhaps ?
PDF: VP length = 2
PDF: Largest BBox in VP array is element 0
PDF: Subtype = GEO
PDF: Bounds[0] = 0.000000
PDF: Bounds[1] = 1.000000
PDF: Bounds[2] = 0.000000
PDF: Bounds[3] = 0.000000
PDF: Bounds[4] = 1.000000
PDF: Bounds[5] = 0.000000
PDF: Bounds[6] = 1.000000
PDF: Bounds[7] = 1.000000
PDF: GPTS[0] = 44.205359999999998877
PDF: GPTS[1] = -65.023790000000005307
PDF: GPTS[2] = 44.535930000000000462
PDF: GPTS[3] = -65.035210000000006403
PDF: GPTS[4] = 44.544530000000001735
PDF: GPTS[5] = -64.475700000000003342
PDF: GPTS[6] = 44.213870000000000005
PDF: GPTS[7] = -64.467410000000000991
PDF: LPTS[0] = 0.000000
PDF: LPTS[1] = 1.000000
PDF: LPTS[2] = 0.000000
PDF: LPTS[3] = 0.000000
PDF: LPTS[4] = 1.000000
PDF: LPTS[5] = 0.000000
PDF: LPTS[6] = 1.000000
PDF: LPTS[7] = 1.000000
PDF: GCS.Type = PROJCS
PDF: GCS.WKT =
PROJCS["WGS_1984_UTM_Zone_20N",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-63.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]
PDF: WKT after morphFromESRI() =
PROJCS["WGS_1984_UTM_Zone_20N",GEOGCS["GCS_WGS_1984",DATUM["WGS_1984",SPHEROID["WGS_84",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-63.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0]]
OGRCT: PROJ >= 4.8.0 features enabled
OGRCT: Source: +proj=longlat +datum=WGS84 +no_defs
OGRCT: Target: +proj=utm +zone=20 +datum=WGS84 +units=m +no_defs
GDAL: GDALOpen(data/adobe_style_geospatial.pdf, this=0x1411840) succeeds as
PDF.
PDF: Running 'pdftoppm -r 200.000000 -f 1 -l 1
"data/adobe_style_geospatial.pdf" "./pdf3968087808_1"'
PNM: PNM header contains: width=1700, height=2200, maxval=255
GDALRaw: RawRasterBand(0x141b070,1,0x1374c80,
Off=17,PixOff=3,LineOff=5100,Byte,0)

GDALRaw: RawRasterBand(0x141b070,2,0x1374c80,
Off=18,PixOff=3,LineOff=5100,Byte,0)

GDALRaw: RawRasterBand(0x141b070,3,0x1374c80,
Off=19,PixOff=3,LineOff=5100,Byte,0)

GDAL: GDALOpen(./pdf3968087808_1-1.ppm, this=0x141b070) succeeds as PNM.
GDAL: GDALClose(./pdf3968087808_1-1.ppm, this=0x141b070)
16277
GDAL: GDALClose(data/adobe_style_geospatial.pdf, this=0x1411840)
fail
line 164: bad checksum

Test Script: PDF
Succeeded: 2
Failed: 1 (0 blew exceptions)
Skipped: 0
Expected fail:0

GDAL: In GDALDestroy - unloading GDAL shared library


/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */



On Wed, Dec 21, 2011 at 11:47, Even Rouault <even.rouault@mines-paris.org>wrote:

> Le mercredi 21 d?cembre 2011 19:30:45, Kyle Shannon a ?crit :
> > Even,
> >
> > I rebuilt with GEOS support
>
> ok I'll add a test for geos presence to skip the 2 tests if it is not
> available.
>
> > and I added podofo support as well, for fun.  I
> > got a failure with a bad checksum in pdf.py:
>
> Can you just run pdf.py and look at the more precise error report. I
> believe
> it is due to missing poppler-utils ( pdftoppm namely ) that is necesserary
> to
> do the rasterization . See http://gdal.org/frmt_pdf.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111221/ec3f7f8d/attachment-0001.html
From yjacolin at free.fr  Wed Dec 21 14:41:04 2011
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Wed Dec 21 14:41:34 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
Message-ID: <201112212041.04553.yjacolin@free.fr>

Hello,

I have some question about writing pixel functions with vrt files. I have a 
netcdf file with two subset named U and V.

How can I process sqrt(U^2 + V^2) using this feature with vrt file?

* do I need to create a C file and build GADL with it?
* do I need to create a C file and locate it close to vrt file?

Thanks,

Y.
-- 
Yves Jacolin
From yjacolin at free.fr  Wed Dec 21 15:32:54 2011
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Wed Dec 21 15:33:51 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <CA+YzLBdXADhyOj45wmpNBJn3+3B-UAnSvdG1kfHR_3rpMfV=yw@mail.gmail.com>
References: <201112212041.04553.yjacolin@free.fr>
	<CA+YzLBdXADhyOj45wmpNBJn3+3B-UAnSvdG1kfHR_3rpMfV=yw@mail.gmail.com>
Message-ID: <201112212132.54616.yjacolin@free.fr>

Le mercredi 21 d?cembre 2011 21:01:22, Frank Warmerdam a ?crit :
> On Wed, Dec 21, 2011 at 11:41 AM, Yves Jacolin (free) <yjacolin@free.fr> 
wrote:
> > Hello,
> > 
> > I have some question about writing pixel functions with vrt files. I have
> > a netcdf file with two subset named U and V.
> > 
> > How can I process sqrt(U^2 + V^2) using this feature with vrt file?
> > 
> > * do I need to create a C file and build GDAL with it?
> 
> Yves,
> 
> Yes - registered in a particular way.  I must confess to me
> this makes custom pixel functions of modest value.
> 
> > * do I need to create a C file and locate it close to vrt file?
Thanks Franck. This seems indeed a little bit harder to use it but this exists 
at least!

Is it possible to improve this feature by linking a file dynamicly? I don't 
know anything about this so it is just for my curiosity.

Thanks,

Y.
-- 
Yves Jacolin
From etourigny.dev at gmail.com  Wed Dec 21 15:43:32 2011
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed Dec 21 15:44:05 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <201112212132.54616.yjacolin@free.fr>
References: <201112212041.04553.yjacolin@free.fr>
	<CA+YzLBdXADhyOj45wmpNBJn3+3B-UAnSvdG1kfHR_3rpMfV=yw@mail.gmail.com>
	<201112212132.54616.yjacolin@free.fr>
Message-ID: <CA+TxYvOaUgqjY11eWa2zH8M=tH+TV5M-OxOLFs_WhFjAsWSDcw@mail.gmail.com>

Yves,

processing of netcdf files like this may be much easier using NCO
(http://nco.sourceforge.net/)

example:
ncap -s "WND=sqrt(u^2+v^2)" in.nc out.nc


Etienne

On Wed, Dec 21, 2011 at 5:32 PM, Yves Jacolin (free) <yjacolin@free.fr> wrote:
> Le mercredi 21 d?cembre 2011 21:01:22, Frank Warmerdam a ?crit :
>> On Wed, Dec 21, 2011 at 11:41 AM, Yves Jacolin (free) <yjacolin@free.fr>
> wrote:
>> > Hello,
>> >
>> > I have some question about writing pixel functions with vrt files. I have
>> > a netcdf file with two subset named U and V.
>> >
>> > How can I process sqrt(U^2 + V^2) using this feature with vrt file?
>> >
>> > * do I need to create a C file and build GDAL with it?
>>
>> Yves,
>>
>> Yes - registered in a particular way. ?I must confess to me
>> this makes custom pixel functions of modest value.
>>
>> > * do I need to create a C file and locate it close to vrt file?
> Thanks Franck. This seems indeed a little bit harder to use it but this exists
> at least!
>
> Is it possible to improve this feature by linking a file dynamicly? I don't
> know anything about this so it is just for my curiosity.
>
> Thanks,
>
> Y.
> --
> Yves Jacolin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Dec 21 15:44:14 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 21 15:45:02 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <201112212041.04553.yjacolin@free.fr>
References: <201112212041.04553.yjacolin@free.fr>
Message-ID: <201112212144.14514.even.rouault@mines-paris.org>

Le mercredi 21 d?cembre 2011 20:41:04, Yves Jacolin (free) a ?crit :
> Hello,
> 
> I have some question about writing pixel functions with vrt files. I have a
> netcdf file with two subset named U and V.
> 
> How can I process sqrt(U^2 + V^2) using this feature with vrt file?
> 
> * do I need to create a C file and build GADL with it?
> * do I need to create a C file and locate it close to vrt file?

It depends on how you want to use those pixel functions. If it is in an 
application in C/C++ that you develop and that uses GDAL, then it is sufficient 
to place the pixel function in your code and register it.

If you want the pixel functions to be usable by existing GDAL utilities or 
third-party programs using GDAL (QGIS...), then a solution is to create a 
small shared library that will be loaded as a GDAL plugin. See 
http://trac.osgeo.org/gdal/ticket/3367 that has already a few functions.

You just need to make sure that the plugin is accessible through 
GDAL_DRIVER_PATH environmenet variable. No need for it to be close to the VRT 
file.

Or you can indeed hack GDAL itself and add it and register it.

> 
> Thanks,
> 
> Y.
From yjacolin at free.fr  Wed Dec 21 15:51:57 2011
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Wed Dec 21 15:52:16 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <201112212144.14514.even.rouault@mines-paris.org>
References: <201112212041.04553.yjacolin@free.fr>
	<201112212144.14514.even.rouault@mines-paris.org>
Message-ID: <201112212151.57408.yjacolin@free.fr>

Le mercredi 21 d?cembre 2011 21:44:14, Even Rouault a ?crit :
> Le mercredi 21 d?cembre 2011 20:41:04, Yves Jacolin (free) a ?crit :
> > Hello,
> > 
> > I have some question about writing pixel functions with vrt files. I have
> > a netcdf file with two subset named U and V.
> > 
> > How can I process sqrt(U^2 + V^2) using this feature with vrt file?
> > 
> > * do I need to create a C file and build GADL with it?
> > * do I need to create a C file and locate it close to vrt file?
> 
> It depends on how you want to use those pixel functions. If it is in an
> application in C/C++ that you develop and that uses GDAL, then it is
> sufficient to place the pixel function in your code and register it.
> 
> If you want the pixel functions to be usable by existing GDAL utilities or
> third-party programs using GDAL (QGIS...), then a solution is to create a
> small shared library that will be loaded as a GDAL plugin. See
> http://trac.osgeo.org/gdal/ticket/3367 that has already a few functions.
> 
> You just need to make sure that the plugin is accessible through
> GDAL_DRIVER_PATH environmenet variable. No need for it to be close to the
> VRT file.
> 
> Or you can indeed hack GDAL itself and add it and register it.
> 
> > Thanks,
> > 
> > Y.
interesting it seems we can use Python pixel functions.

Y.
-- 
Yves Jacolin
From yjacolin at free.fr  Wed Dec 21 15:54:37 2011
From: yjacolin at free.fr (Yves Jacolin (free))
Date: Wed Dec 21 15:55:04 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <CA+TxYvOaUgqjY11eWa2zH8M=tH+TV5M-OxOLFs_WhFjAsWSDcw@mail.gmail.com>
References: <201112212041.04553.yjacolin@free.fr>
	<201112212132.54616.yjacolin@free.fr>
	<CA+TxYvOaUgqjY11eWa2zH8M=tH+TV5M-OxOLFs_WhFjAsWSDcw@mail.gmail.com>
Message-ID: <201112212154.37304.yjacolin@free.fr>

Thanks Etienne!

Y.
Le mercredi 21 d?cembre 2011 21:43:32, Etienne Tourigny a ?crit :
> Yves,
> 
> processing of netcdf files like this may be much easier using NCO
> (http://nco.sourceforge.net/)
> 
> example:
> ncap -s "WND=sqrt(u^2+v^2)" in.nc out.nc
> 
> 
> Etienne
> 
> On Wed, Dec 21, 2011 at 5:32 PM, Yves Jacolin (free) <yjacolin@free.fr> 
wrote:
> > Le mercredi 21 d?cembre 2011 21:01:22, Frank Warmerdam a ?crit :
> >> On Wed, Dec 21, 2011 at 11:41 AM, Yves Jacolin (free) <yjacolin@free.fr>
> > 
> > wrote:
> >> > Hello,
> >> > 
> >> > I have some question about writing pixel functions with vrt files. I
> >> > have a netcdf file with two subset named U and V.
> >> > 
> >> > How can I process sqrt(U^2 + V^2) using this feature with vrt file?
> >> > 
> >> > * do I need to create a C file and build GDAL with it?
> >> 
> >> Yves,
> >> 
> >> Yes - registered in a particular way.  I must confess to me
> >> this makes custom pixel functions of modest value.
> >> 
> >> > * do I need to create a C file and locate it close to vrt file?
> > 
> > Thanks Franck. This seems indeed a little bit harder to use it but this
> > exists at least!
> > 
> > Is it possible to improve this feature by linking a file dynamicly? I
> > don't know anything about this so it is just for my curiosity.
> > 
> > Thanks,
> > 
> > Y.
> > --
> > Yves Jacolin
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin
From even.rouault at mines-paris.org  Wed Dec 21 15:56:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 21 15:57:06 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <201112212151.57408.yjacolin@free.fr>
References: <201112212041.04553.yjacolin@free.fr>
	<201112212144.14514.even.rouault@mines-paris.org>
	<201112212151.57408.yjacolin@free.fr>
Message-ID: <201112212156.30020.even.rouault@mines-paris.org>

Le mercredi 21 d?cembre 2011 21:51:57, Yves Jacolin (free) a ?crit :
> Le mercredi 21 d?cembre 2011 21:44:14, Even Rouault a ?crit :
> > Le mercredi 21 d?cembre 2011 20:41:04, Yves Jacolin (free) a ?crit :
> > > Hello,
> > > 
> > > I have some question about writing pixel functions with vrt files. I
> > > have a netcdf file with two subset named U and V.
> > > 
> > > How can I process sqrt(U^2 + V^2) using this feature with vrt file?
> > > 
> > > * do I need to create a C file and build GADL with it?
> > > * do I need to create a C file and locate it close to vrt file?
> > 
> > It depends on how you want to use those pixel functions. If it is in an
> > application in C/C++ that you develop and that uses GDAL, then it is
> > sufficient to place the pixel function in your code and register it.
> > 
> > If you want the pixel functions to be usable by existing GDAL utilities
> > or third-party programs using GDAL (QGIS...), then a solution is to
> > create a small shared library that will be loaded as a GDAL plugin. See
> > http://trac.osgeo.org/gdal/ticket/3367 that has already a few functions.
> > 
> > You just need to make sure that the plugin is accessible through
> > GDAL_DRIVER_PATH environmenet variable. No need for it to be close to the
> > VRT file.
> > 
> > Or you can indeed hack GDAL itself and add it and register it.
> > 
> > > Thanks,
> > > 
> > > Y.
> 
> interesting it seems we can use Python pixel functions.

I didn't dare to mention it because it is a bit geekie. You must use ctypes to 
load libgdal and then define manually each C function used. A bit more involved 
than the use of the typical GDAL Python bindings.

> 
> Y.
From aperi2007 at gmail.com  Wed Dec 21 16:02:23 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Wed Dec 21 16:03:19 2011
Subject: [gdal-dev] How to load a regular table from splite to postgres
Message-ID: <4EF2495F.70104@gmail.com>

Hi,
I'm try-ing to load a regular table without geometry from a spatialite 
to a postgres9.1/postgis 2.0 DB.

I'm using this sintax:

ogr2ogr.exe -f "PostgreSQL" PG:"dbname='test' active_schema=gb 
schemas=gb,public host='localhost' port='5432' user='postgres' 
password='postgres' " -overwrite -lco SCHEMA=gb -lco GEOMETRY_NAME=geom 
-lco SPATIAL_INDEX=YES db.sqlite table1

where table1 is the table-name on the spatialite db that I like to write 
on the PG DB.

When I try this with the ogr2ogr

I have this error:

FAILURE: Couldn't fetch request layer 'table'

I don't understand where is the bug.

Perhaps ogr2ogr is unable to load regular table without geometry ?

Thx,

Andrea Peri


From even.rouault at mines-paris.org  Wed Dec 21 16:23:38 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 21 16:24:10 2011
Subject: [gdal-dev] How to load a regular table from splite to postgres
In-Reply-To: <4EF2495F.70104@gmail.com>
References: <4EF2495F.70104@gmail.com>
Message-ID: <201112212223.38716.even.rouault@mines-paris.org>

Le mercredi 21 d?cembre 2011 22:02:23, aperi2007 a ?crit :
> Hi,
> I'm try-ing to load a regular table without geometry from a spatialite
> to a postgres9.1/postgis 2.0 DB.
> 
> I'm using this sintax:
> 
> ogr2ogr.exe -f "PostgreSQL" PG:"dbname='test' active_schema=gb
> schemas=gb,public host='localhost' port='5432' user='postgres'
> password='postgres' " -overwrite -lco SCHEMA=gb -lco GEOMETRY_NAME=geom
> -lco SPATIAL_INDEX=YES db.sqlite table1
> 
> where table1 is the table-name on the spatialite db that I like to write
> on the PG DB.
> 
> When I try this with the ogr2ogr
> 
> I have this error:
> 
> FAILURE: Couldn't fetch request layer 'table'
> 
> I don't understand where is the bug.
> 
> Perhaps ogr2ogr is unable to load regular table without geometry ?

Not exactly. In a Postgis-enabled DB, the PG driver only lists spatial tables 
by default. To access to non spatial tables, you need to define the 
PG_LIST_ALL_TABLES configuration option to YES. See the "Layers" section of 
http://gdal.org/ogr/drv_pg_advanced.html

Ah, and you don't need all those options to specify the schema ! Just 
active_schema=gb should be enough.

> 
> Thx,
> 
> Andrea Peri
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Wed Dec 21 19:42:43 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Dec 21 19:43:20 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <CA+TxYvOaUgqjY11eWa2zH8M=tH+TV5M-OxOLFs_WhFjAsWSDcw@mail.gmail.com>
References: <201112212041.04553.yjacolin@free.fr>	<CA+YzLBdXADhyOj45wmpNBJn3+3B-UAnSvdG1kfHR_3rpMfV=yw@mail.gmail.com>	<201112212132.54616.yjacolin@free.fr>
	<CA+TxYvOaUgqjY11eWa2zH8M=tH+TV5M-OxOLFs_WhFjAsWSDcw@mail.gmail.com>
Message-ID: <4EF27D03.8000006@ualg.pt>

On 21-12-2011 20:43, Etienne Tourigny wrote:
> Yves,
>
> processing of netcdf files like this may be much easier using NCO
> (http://nco.sourceforge.net/)
>
> example:
> ncap -s "WND=sqrt(u^2+v^2)" in.nc out.nc

Or with GMT

grdmath U 2 POW V 2 POW ADD SQRT = out.nc

this, with GDAL's help, had the further advantage that will work for 
many input formats.

Joaquim


From woklist at kyngchaos.com  Wed Dec 21 19:43:51 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Dec 21 19:44:25 2011
Subject: [gdal-dev] gdal_contour and nodata values
Message-ID: <0497C2CA-B3F5-41B1-8B3D-786B738FFD04@kyngchaos.com>

Is gdal_contour supposed to do this?

I have a DEM projected from a latlong area to a conic with -dstalpha, so there are triangles of nodata around the edges.  When I run gdal_contour with intervals, I get a ring of contours around the edge of the nodata area starting from the first interval above 0 to the minimum elevation of the DEM, plus more segments along the edge for higher levels that extend to the edge:



Shouldn't gdal_contour just create contours that *stop* at nodata edges?  Like if I had created contours from the original latlong rectangle:



-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"The beast is actively interested only in now, and, as it is always now and always shall be, there is an eternity of time for the accomplishment of objects."

- the wisdom of Tarzan





-------------- next part --------------
Skipped content of type multipart/related
From rush at winkey.org  Wed Dec 21 19:45:00 2011
From: rush at winkey.org (Brian Case)
Date: Wed Dec 21 19:45:39 2011
Subject: [gdal-dev] Writing Pixel Functions with VRT
In-Reply-To: <201112212041.04553.yjacolin@free.fr>
References: <201112212041.04553.yjacolin@free.fr>
Message-ID: <1324514700.30787.41.camel@octopi>

Yves,

You need to be write a custom application to make use of
<PixelFunctionType>

If you are looking for a command line utility solution you should use
gdal_calc.py


if your end goal is to serve this data via a wms you could try the
thredds server
http://www.unidata.ucar.edu/projects/THREDDS/tech/TDS.html 

http://atmos.telascience.org:8080/thredds/wms/ncom_fukushima_agg/Fukushima_best.ncd?LAYERS=sea_water_velocity&ELEVATION=0&TIME=2011-12-17T00%3A00%3A00.000Z&TRANSPARENT=true&STYLES=vector%2Frainbow&CRS=EPSG%3A4326&COLORSCALERANGE=0%2C1&NUMCOLORBANDS=64&LOGSCALE=false&SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&EXCEPTIONS=XML&FORMAT=image%2Fpng&BBOX=135.74485290527,32.501498222351,147.25334655761,41.492508888245&WIDTH=768&HEIGHT=600

On Wed, 2011-12-21 at 20:41 +0100, Yves Jacolin (free) wrote:
> Hello,
> 
> I have some question about writing pixel functions with vrt files. I have a 
> netcdf file with two subset named U and V.
> 
> How can I process sqrt(U^2 + V^2) using this feature with vrt file?
> 
> * do I need to create a C file and build GADL with it?
> * do I need to create a C file and locate it close to vrt file?
> 
> Thanks,
> 
> Y.


From shrikant.sundaram at accenture.com  Wed Dec 21 20:49:47 2011
From: shrikant.sundaram at accenture.com (mysticraja)
Date: Wed Dec 21 20:49:54 2011
Subject: [gdal-dev] Conversion of MapInfo to GML using ogr2ogr - lat/long
	format issue
Message-ID: <1324518587049-7117273.post@n2.nabble.com>

Hi, 

I'm trying to convert a Mapinfo file (MID/MIF file) into a GML file using
ogr2ogr tool. 

I am getting the results in long/lat format but I need them in lat/long
format. 

Reading through some material on the net I set the below environment
variables as well but to no use. 

GDAL_DRIVER_PATH=C:\Program Files\GDAL\bin\gdal\plugins 
GML_CONSIDER_EPSG_AS_URN=YES 

Does someone have any tips or tricks on how to generate or convert the
coordinates into lat/long format? 

Here is the command I used. 

ogr2ogr -t_srs "EPSG:4283" -f "GML"  output.XML input.MID 

Current Output 
---- 
...<gml:coordinates>115.879512,-31.9709 115.880008,-31.970772
115.880448,-31.970646 .... 
----- 

I am using Windows Vista and  GDAL v1.8.1, released 2011/07/09 

regards

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Conversion-of-MapInfo-to-GML-using-ogr2ogr-lat-long-format-issue-tp7117273p7117273.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From yjacolin at free.fr  Thu Dec 22 01:10:02 2011
From: yjacolin at free.fr (=?utf-8?B?WXZlcyBKYWNvbGlu?=)
Date: Thu Dec 22 01:19:14 2011
Subject: =?utf-8?B?UmUgOiBbZ2RhbC1kZXZdIENvbnZlcnNpb24gb2YgTWFwSW5mbyB0byBHTUwgdXNp?=
	=?utf-8?B?bmcgb2dyMm9nciAtIGxhdC9sb25nCWZvcm1hdCBpc3N1ZQ==?=
Message-ID: <88.180.4.137.1324534240.24024@ns0.ovh.net>

Hello,

What don't you use EPSG:4326?

Y.

----- Reply message -----
De : "mysticraja" <shrikant.sundaram@accenture.com>
Pour?: <gdal-dev@lists.osgeo.org>
Objet : [gdal-dev] Conversion of MapInfo to GML using ogr2ogr - lat/long	format issue
Date : jeu., d?c. 22, 2011 02:49


Hi, 

I'm trying to convert a Mapinfo file (MID/MIF file) into a GML file using
ogr2ogr tool. 

I am getting the results in long/lat format but I need them in lat/long
format. 

Reading through some material on the net I set the below environment
variables as well but to no use. 

GDAL_DRIVER_PATH=C:\Program Files\GDAL\bin\gdal\plugins 
GML_CONSIDER_EPSG_AS_URN=YES 

Does someone have any tips or tricks on how to generate or convert the
coordinates into lat/long format? 

Here is the command I used. 

ogr2ogr -t_srs "EPSG:4283" -f "GML"  output.XML input.MID 

Current Output 
---- 
...<gml:coordinates>115.879512,-31.9709 115.880008,-31.970772
115.880448,-31.970646 .... 
----- 

I am using Windows Vista and  GDAL v1.8.1, released 2011/07/09 

regards

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Conversion-of-MapInfo-to-GML-using-ogr2ogr-lat-long-format-issue-tp7117273p7117273.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111222/2e6c1a96/attachment.html
From even.rouault at mines-paris.org  Thu Dec 22 04:09:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 22 04:10:12 2011
Subject: [gdal-dev] Conversion of MapInfo to GML using ogr2ogr - lat/long
	format issue
In-Reply-To: <1324518587049-7117273.post@n2.nabble.com>
References: <1324518587049-7117273.post@n2.nabble.com>
Message-ID: <1324544951.4ef2f3b790733@imp.free.fr>

Hi,

> I am getting the results in long/lat format but I need them in lat/long
> format.
>
> Reading through some material on the net I set the below environment
> variables as well but to no use.
>
> GDAL_DRIVER_PATH=C:Program FilesGDALbingdalplugins
> GML_CONSIDER_EPSG_AS_URN=YES

You can remove GML_CONSIDER_EPSG_AS_URN which has only an influence when reading
GML, not writing GML.

>
> Does someone have any tips or tricks on how to generate or convert the
> coordinates into lat/long format?
>
> Here is the command I used.
>
> ogr2ogr -t_srs "EPSG:4283" -f "GML"  output.XML input.MID
>
> Current Output
> ----
> ...<gml:coordinates>115.879512,-31.9709 115.880008,-31.970772
> 115.880448,-31.970646 ....
> -----

By default, the GML driver writes GML2.1 geometries, that traditionnaly didn't
honour EPSG axis ordering rules.

If you add -dsco FORMAT=GML3 , then you will have GML3 geometries, and by
default the coordinates for a SRS like EPSG:4283 will be written in lat/long
order (because the default value of the dataset creation option GML3_LONGSRS is
YES).

For more details on those 2 creations options, you can refer to
http://gdal.org/ogr/drv_gml.html

Best regards,

Even
From hrz at geodata.soton.ac.uk  Thu Dec 22 05:01:23 2011
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Thu Dec 22 05:17:19 2011
Subject: [gdal-dev] On-the-fly reprojection using the OGR VRT driver?
Message-ID: <20111222100123.GB16005@sarah.geodata.soton.ac.uk>

Hello,

I'm interested in performing on-the-fly coordinate transformations of
OGR data sources using the Virtual Format (VRT) driver. That is,
producing a file that is the vector equivalent of:

gdalwarp -of VRT -t_srs "+init=epsg:4326" input.tif transformed.vrt

I understand ogr2ogr cannot do this but am wondering if the vector
version of `transformed.vrt` can be created manually?

Having looked at the source code it looks like the answer will be no
;) - if this is the case is there be a reason not to file an
enhancement request for this functionality?

Best Regards,

Homme

-- 
Homme Zwaagstra
GeoData Institute
University of Southampton
From even.rouault at mines-paris.org  Thu Dec 22 08:27:44 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 22 08:28:42 2011
Subject: [gdal-dev] On-the-fly reprojection using the OGR VRT driver?
In-Reply-To: <20111222100123.GB16005@sarah.geodata.soton.ac.uk>
References: <20111222100123.GB16005@sarah.geodata.soton.ac.uk>
Message-ID: <1324560464.4ef3305069c17@imp.free.fr>

Selon Homme Zwaagstra <hrz@geodata.soton.ac.uk>:

> Hello,
>
> I'm interested in performing on-the-fly coordinate transformations of
> OGR data sources using the Virtual Format (VRT) driver. That is,
> producing a file that is the vector equivalent of:
>
> gdalwarp -of VRT -t_srs "+init=epsg:4326" input.tif transformed.vrt
>
> I understand ogr2ogr cannot do this but am wondering if the vector
> version of `transformed.vrt` can be created manually?

Yes, ogr2ogr -f VRT is not implemented as such. But there's a python script in
http://svn.osgeo.org/gdal/trunk/gdal/swig/python/samples/ogr2vrt.py that can
generate a VRT schema from a OGR datasource

>
> Having looked at the source code it looks like the answer will be no
> ;) - if this is the case is there be a reason not to file an
> enhancement request for this functionality?

But indeed, the OGR VRT format doesn't currently support on-the-fly
reprojection. This could certainly be implemented. I somehow remember to have
worked on a prototype for this. The tricky part was the interaction with spatial
filter or spatial extent where you must apply the reverse reprojection to the
source layer.


From max at geoinova.com  Thu Dec 22 11:09:07 2011
From: max at geoinova.com (Maksim Sestic)
Date: Thu Dec 22 11:09:33 2011
Subject: [gdal-dev] GDAL WMS - stripes offset error
Message-ID: <1324570147905-7119089.post@n2.nabble.com>

I'm experiencing strange problems with WMS driver (see attached). Here's
definition file contents:



Any idea on how to fix this? :-)



Regards,
Maksim Sestic
http://osgeo-org.1803224.n2.nabble.com/file/n7119089/wmstest.png 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-WMS-stripes-offset-error-tp7119089p7119089.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111222/2571bab6/attachment.html
From warmerdam at pobox.com  Thu Dec 22 13:40:30 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 22 13:40:55 2011
Subject: [gdal-dev] Libtiff 4.0.0 Released
Message-ID: <CA+YzLBe9BJTgg9PmmMjqVHS4AO3_gbEWezpC-C7JsiZr_tLO7A@mail.gmail.com>

Folks,

Of interest to many GeoTIFF and GDAL users, Bob Friesenhahn
has announced:

"""
At long last, libtiff 4.0.0 is finally released.  Libtiff 4.0.0 is the
successor to the libtiff 3.9.X release series.  It is intended to be
largely API compatible with the 3.9.X releases, but it is definitely
not ABI compatible so any software which plans to use it will need to
be recompiled.  With appropriate care, source code can easily compile
with both the 3.9.X releases and libtiff 4.0.0.

This release supports the BigTIFF TIFF format in which all offsets are
unsigned 64-bit, supporting huge files.  APIs which deal with tag
offsets are necessarily updated to pass 64-bit values.  I/O functions
supporting the TIFFClientOpen() interface are updated to pass 64-bit
offset values.

Please visit the libtiff page at http://www.remotesensing.org/libtiff/
to learn more about the release, or to download it.
""""

Note that GDAL's internal version of libtiff has tracked libtiff4 for several
years, and it is substantially preferred to using libtiff 3.9 which
lacks bigtiff
and many fixes of value to GDAL.  Libgeotiff should work smoothly with
libtiff 3.9.x or libtiff 4.0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From shrikant.sundaram at accenture.com  Thu Dec 22 17:45:53 2011
From: shrikant.sundaram at accenture.com (mysticraja)
Date: Thu Dec 22 17:46:26 2011
Subject: [gdal-dev] RE: Conversion of MapInfo to GML using ogr2ogr -
 lat/long format issue
In-Reply-To: <1324544951.4ef2f3b790733@imp.free.fr>
References: <1324518587049-7117273.post@n2.nabble.com>
	<1324544951.4ef2f3b790733@imp.free.fr>
Message-ID: <42FB68F2D43EA448AB4C16EEA0D70898017760D6@048-CH1MPN1-019.048d.mgd.msft.net>

Thanks Guys..

The following command helped me achieve it.

ogr2ogr -dsco FORMAT=GML3 -t_srs "EPSG:4283" -f "GML" <output.xml> <input.MID>


From: Even Rouault [via OSGeo.org] [mailto:ml-node+s1803224n7117977h45@n2.nabble.com]
Sent: Thursday, 22 December 2011 8:10 PM
To: Sundaram, Shrikant
Subject: Re: Conversion of MapInfo to GML using ogr2ogr - lat/long format issue

Hi,

> I am getting the results in long/lat format but I need them in lat/long
> format.
>
> Reading through some material on the net I set the below environment
> variables as well but to no use.
>
> GDAL_DRIVER_PATH=C:Program FilesGDALbingdalplugins
> GML_CONSIDER_EPSG_AS_URN=YES

You can remove GML_CONSIDER_EPSG_AS_URN which has only an influence when reading
GML, not writing GML.

>
> Does someone have any tips or tricks on how to generate or convert the
> coordinates into lat/long format?
>
> Here is the command I used.
>
> ogr2ogr -t_srs "EPSG:4283" -f "GML"  output.XML input.MID
>
> Current Output
> ----
> ...<gml:coordinates>115.879512,-31.9709 115.880008,-31.970772
> 115.880448,-31.970646 ....
> -----

By default, the GML driver writes GML2.1 geometries, that traditionnaly didn't
honour EPSG axis ordering rules.

If you add -dsco FORMAT=GML3 , then you will have GML3 geometries, and by
default the coordinates for a SRS like EPSG:4283 will be written in lat/long
order (because the default value of the dataset creation option GML3_LONGSRS is
YES).

For more details on those 2 creations options, you can refer to
http://gdal.org/ogr/drv_gml.html

Best regards,

Even
_______________________________________________
gdal-dev mailing list
[hidden email]</user/SendEmail.jtp?type=node&node=7117977&i=0>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1803224.n2.nabble.com/Conversion-of-MapInfo-to-GML-using-ogr2ogr-lat-long-format-issue-tp7117273p7117977.html
To unsubscribe from Conversion of MapInfo to GML using ogr2ogr - lat/long format issue, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=7117273&code=c2hyaWthbnQuc3VuZGFyYW1AYWNjZW50dXJlLmNvbXw3MTE3MjczfC03ODg4MTI0NjQ=>.
NAML<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.InstantMailNamespace&breadcrumbs=instant+emails%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>

________________________________
Subject to local law, communications with Accenture and its affiliates including telephone calls and emails (including content), may be monitored by our systems for the purposes of security and the assessment of internal compliance with Accenture policy.
______________________________________________________________________________________

www.accenture.com


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Conversion-of-MapInfo-to-GML-using-ogr2ogr-lat-long-format-issue-tp7117273p7120230.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111222/c1ce33c8/attachment.html
From mladen-g at distributel.net  Thu Dec 22 18:58:52 2011
From: mladen-g at distributel.net (mladen-g@distributel.net)
Date: Thu Dec 22 18:59:09 2011
Subject: [gdal-dev] Weird gdal2tiles performance inconsistency
Message-ID: <20111222165852.406875abxtln4sho@webmail.distributel.net>

Hi all,

I'm seeing some very strange performance from gdal2tiles on a  
particular grid, so I'm wondering if someone has an insight into why  
this is happening.

The problem is that when I tile the grid at zoom level 7, I get much  
better performance than with other zoomlevels, including lower ones (!).

The grid is this (zipped PNG, ~2.7Mb):
http://dl.dropbox.com/u/53500018/ontarioOrigSizeTrimReprojected.zip

So, let's say I run this command:
gdal2tiles.bat -w google -s EPSG:4326 -z 1-7 -v  
C:\temp\ontarioOrigSizeTrimReprojected.png
C:\temp\outputTiles

This takes about 16 seconds on my machine.

But if I replace the last line to be zoom level 1:
gdal2tiles.bat -w google -s EPSG:4326 -z 1-1 -v  
C:\temp\ontarioOrigSizeTrimReprojected.png
C:\temp\outputTiles

This takes 32 seconds, or about double the time of tiling zoomlevels  
1-7.  Note also that I've experimented with other maximum zoomlevels  
(5,6,8,9,10,11) and they all run slower than 7.

So, does anyone know Why does this strange behaviour happen on zoom  
level 7?  And is there any way to optimize the input to gdal2tiles for  
better performance?

Regards,
Mladen

----------------------------------------------------------------
This message was sent using Distributel Webmail.
Ce message a ?t? envoy? ? partir de la Messagerie Web Distributel.


From warmerdam at pobox.com  Thu Dec 22 21:01:29 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 22 21:01:53 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0 Beta2 Released
Message-ID: <CA+YzLBeCaAPPLFVNUZXOPF6v4S4but7RYgzhotccRridHpnTJg@mail.gmail.com>

Folks,

I have packaged up a second beta of GDAL/OGR 1.9.0.

    http://trac.osgeo.org/gdal/wiki/Release/1.9.0-News

    http://download.osgeo.org/gdal/gdal190b2.zip - source as a zip
    http://download.osgeo.org/gdal/gdal-1.9.0b2.tar.gz - source as .tar.gz
    http://download.osgeo.org/gdal/gdalautotest-1.9.0b2.tar.gz - test suite

I'd like to produce a release candidate early next week unless
serious problems hold us back.  Please file tickets for issues
found in the beta2.

  http://trac.osgeo.org/gdal/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ljohnson at enthought.com  Fri Dec 23 13:31:04 2011
From: ljohnson at enthought.com (Lauren Johnson)
Date: Fri Dec 23 13:39:45 2011
Subject: [gdal-dev] GDAL now inc w Enthought Python Distribution
Message-ID: <CACeon5j6yp0=9CTFyAE2KwOjip9KwxYb93w+WNr1sEuopA6f0g@mail.gmail.com>

This is a forward of Ilan Schnell's note on GDAL inclusion in the Enthought
Python Distribution (EPD). I.e. already built on win32, win64, linux, and
mac0S.

Hello,

I am pleased to announce the release of Enthought Python Distribution, EPD
version 7.2, along with its "EPD Free" counterpart.  The highlights of this
release are: the addition of GDAL and updates to over 30 packages, including
SciPy, matplotlib and IPython.  The new IPython 0.12 includes the HTML
notebook, which caused the Tornado web-server also to be added to EPD.
To see which libraries are included in the free vs. full version, please
see:

       http://www.enthought.com/products/epdlibraries.php

The complete list of additions, updates and fixes is in the change log:

       http://www.enthought.com/products/changelog.php


About EPD
---------
The Enthought Python Distribution (EPD) is a "kitchen-sink-included"
distribution of the Python programming language, including over 90
additional tools and libraries. The EPD bundle includes NumPy, SciPy,
IPython, 2D and 3D visualization tools, and many other tools.

EPD is currently available as a single-click installer for Windows XP,
Vista and 7, MacOS (10.5 and 10.6), RedHat 3, 4, 5 and 6, as well as
Solaris 10 (x86 and x86_64/amd64 on all platforms).

All versions of EPD (32 and 64-bit) are free for academic use.  An
annual subscription including installation support is available for
individual and commercial use.  Additional support options, including
customization, bug fixes and training classes are also available:

       http://www.enthought.com/products/epd_sublevels.php

- Ilan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111223/a8f1448e/attachment.html
From max at geoinova.com  Sat Dec 24 07:05:14 2011
From: max at geoinova.com (Maksim Sestic)
Date: Sat Dec 24 07:05:20 2011
Subject: [gdal-dev] Re: GDAL WMS - stripes offset error
In-Reply-To: <1324570147905-7119089.post@n2.nabble.com>
References: <1324570147905-7119089.post@n2.nabble.com>
Message-ID: <1324728314009-7123688.post@n2.nabble.com>

In addendum, I've tried it using both gdal_translate utility and GDAL C#
bindings - result stays the same. Image looks like scattered resulting image
"stripes". Width of each stripe equals to <SizeX> WMS parameter, but there's
no "distorsion" on <SizeY> axis.

Testing is being performed on Tamas' (MSVC2010 (Win32) -stable /
release-1600-gdal-1-8-mapserver-6-0) GDAL build.

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-WMS-stripes-offset-error-tp7119089p7123688.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From vadp.devl at gmail.com  Mon Dec 26 02:19:22 2011
From: vadp.devl at gmail.com (Vadim Shlyakhov)
Date: Mon Dec 26 02:19:39 2011
Subject: [gdal-dev] Weird gdal2tiles performance inconsistency
In-Reply-To: <20111222165852.406875abxtln4sho@webmail.distributel.net>
References: <20111222165852.406875abxtln4sho@webmail.distributel.net>
Message-ID: <CABJAaDfgWTdt_uH6MY1wNNrrpfOUPzXDRXqjixEm7bky4ReUzg@mail.gmail.com>

Hi Mladen,

On Fri, Dec 23, 2011 at 3:58 AM,  <mladen-g@distributel.net> wrote:
> This takes about 16 seconds on my machine.
>
...
> This takes 32 seconds, or about double the time of tiling zoomlevels 1-7.

Not really an answer to your question, but if you are about a timinig
issues for you rater processing you may give a try to gdal_tiler.py
from http://code.google.com/p/tilers-tools.

Regards
Vadim
From ramirogonzalez at suremptec.com.ar  Tue Dec 27 12:46:16 2011
From: ramirogonzalez at suremptec.com.ar (Ramiro Gonzalez)
Date: Tue Dec 27 12:46:58 2011
Subject: [gdal-dev] Using GetCapabilities to configure wms
Message-ID: <CAAb2t_=ZBd2n+5NHuAOPSMiVqdQgiYammKjJKA9d7Ba=_NPPrw@mail.gmail.com>

Hi, I'd like to configure wms services using a simplified interface.

GetCapabilities gives me the extent of the image using minX, minY, maxX and
maxY values.
Gdal wms driver requires UpperLeft and LowerRight coordinates.

In EPSG:4326 UpperLeft=(minX, maxY) and LowerRight=(maxX, minY), but I
can't use this mapping to every 'Image projection'

I'd like to know how could I hide the conversion 'min/max->ul/lr' from the
user.

Thanks
Ramiro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111227/7179981b/attachment.html
From rjpawley at shaw.ca  Tue Dec 27 13:48:33 2011
From: rjpawley at shaw.ca (Bob Pawley)
Date: Tue Dec 27 13:49:24 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <201112211030.54263.Ralf.Suhr@itc-halle.de>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
	<201112191752.21075.Ralf.Suhr@itc-halle.de>
	<7EC79663A65E497B8F2096A9D3B6A480@BobPC>
	<201112211030.54263.Ralf.Suhr@itc-halle.de>
Message-ID: <6C41C239B39F4E8B9E3A296DECF83EFD@BobPC>

Something is still not penetrating this thick skull of mine.

When I run 

ogr2ogr --config DXF_INLINE_BLOCKS FALSE  --config        DXF_MERGE_BLOCK_GEOMETRIES FALSE  -f "PostgreSQL" PG:"host=localhost user=postgres dbname=db password=pass"  W_Works.dxf -overwrite -skipfailures  -sql "SELECT ST_Translate(ST_Scale(ST_Rotate((ST_Dump(b.wkb_geometry)).geom, e.blockangle / 180 * PI()), e.blockscale[1], e.blockscale[2]), ST_X(e.wkb_geometry), ST_Y(e.wkb_geometry)) AS wkb_geometry, CASE WHEN b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS ogr_style, e.layer, e.linetype, e.subclasses, b.text FROM entities e INNER JOIN blocks b USING (blockname)" 

I get error - Undefined function `st_dump`used.

When I run a simplified version 

ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config  DXF_MERGE_BLOCK_GEOMETRIES FALSE  -f "PostgreSQL" PG:"host=localhost user=postgres dbname=db password=pass" W_Works.dxf    -overwrite -skipfailures  -sql "SELECT wkb_geometry From entities"

I get error - unrecognized field name wkb_geometry

In the last, when I substitute wkb_geometry for the blocks (name, angle, scale) or text I get no errors.

In all of the commands I`ve run, the block table remains empty.

Bob



From: Ralf Suhr 
Sent: Wednesday, December 21, 2011 1:30 AM
To: Bob Pawley 
Cc: gdal-dev@lists.osgeo.org 
Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

On Import you can't use -nln option or you run ogr2ogr to times. One for entities layer and secound for blocks. 


ogr2ogr -f postgresql -nln myentities PG:"..." W_Works.dxf entities

ogr2ogr -f postgresql -nln myblocks PG:"..." W_Works.dxf blocks


If you haven't the legacy functions import into your postgis installation you need to prefix with "ST_" Translate, Scale, Rotate and Dump.

On Dienstag 20 Dezember 2011 22:30:20 Bob Pawley wrote:

> When I run

> ogrinfo --config DXF_INLINE_BLOCKS FALSE W_Works.dxf

> 

> it results in this message

> 

> Open of `W_Works.dxf'

> using driver `DXF' successful.

> 1: blocks

> 2: entities

> 

> And I?m using DraftSight as a drawing viewer.All of the information I want

> is on the model, but it still won?t import unless I explode the dxf file

> before saving.

> 

> I did try running your suggested sql command. I got an error ?Undefined

> function ?Dump? used.

> 

> I also used the sql suggestion as a trigger function on the import table.

> Neither blocks nor entities were recognized.

> 

> Bob

> 

> From: Ralf Suhr

> Sent: Monday, December 19, 2011 8:52 AM

> To: Bob Pawley

> Cc: gdal-dev@lists.osgeo.org

> Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

> 

> http://www.gdal.org/ogr/drv_dxf.html

> 

> 

> 

> Does ogrinfo print out the "blocks" layer?

> 

> ogrinfo --config DXF_INLINE_BLOCKS FALSE File.dxf

> 

> INFO: Open of `File.dxf'

> 

> using driver `DXF' successful.

> 

> 1: blocks

> 

> 2: entities

> 

> 

> 

> To see what can be imported by ogr use a dxfviewer that display only the

> model space. I have tested ogr with dxf version up to AC1018 without

> problems except the paper space.

> 

> 

> 

> 

> 

> Gr

> 

> Ralf

> 

> On Montag 19 Dezember 2011 17:21:58 Bob Pawley wrote:

> > Thanks Ralf

> > 

> > 

> > 

> > So far, I haven?t been able to populate the block columns unless I use a

> > 

> > DXF file which has been exploded before saving.

> > 

> > 

> > 

> > In all of my searching, I have not come across your suggestion of

> > 

> > dereferencing the block. Can you point me to some documentation?

> > 

> > 

> > 

> > Bob

> > 

> > 

> > 

> > 

> > 

> > From: Ralf Suhr

> > 

> > Sent: Monday, December 19, 2011 12:58 AM

> > 

> > To: gdal-dev@lists.osgeo.org

> > 

> > Cc: Bob Pawley

> > 

> > Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

> > 

> > 

> > 

> > Hi Bob,

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > the dxf driver writes to tables "entities" and "blocks". You have to

> > 

> > dereference the block layer yourself.

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > SELECT Translate( Scale( Rotate((Dump(b.wkb_geometry)).geom, e.blockangle

> > /

> > 

> > 180 * PI()), e.blockscale[1], e.blockscale[2]), ST_X(e.wkb_geometry),

> > 

> > ST_Y(e.wkb_geometry)) AS wkb_geometry,

> > 

> > 

> > 

> > CASE WHEN b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END

> > AS

> > 

> > ogr_style,

> > 

> > 

> > 

> > e.layer,

> > 

> > 

> > 

> > e.linetype,

> > 

> > 

> > 

> > e.subclasses,

> > 

> > 

> > 

> > b.text

> > 

> > 

> > 

> > FROM entities e

> > 

> > 

> > 

> > INNER JOIN

> > 

> > 

> > 

> > blocks b USING (blockname);

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > Sometimes you have blocks with world coordinates and no connection in

> > 

> > entities.

> > 

> > 

> > 

> > SELECT (Dump(b.wkb_geometry)).geom AS wkb_geometry,

> > 

> > 

> > 

> > b.ogr_style,

> > 

> > 

> > 

> > b.layer,

> > 

> > 

> > 

> > b.linetype,

> > 

> > 

> > 

> > b.subclasses,

> > 

> > 

> > 

> > b.text

> > 

> > 

> > 

> > FROM blocks b

> > 

> > 

> > 

> > WHERE blockname NOT IN

> > 

> > 

> > 

> > (

> > 

> > 

> > 

> > SELECT DISTINCT blockname

> > 

> > 

> > 

> > FROM entities

> > 

> > 

> > 

> > WHERE blockname IS NOT NULL

> > 

> > 

> > 

> > );

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > Some newer DXF Formats can have features in paper space. This is now not

> > 

> > supported by ogr2ogr.

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > 

> > Gr

> > 

> > 

> > 

> > Ralf

> > 

> > On Freitag 16 Dezember 2011 22:14:38 Bob Pawley wrote:

> > > I have imported a dxf file into Postgis using the following command

> > > line

> > > 

> > > -

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > set DXF_INLINE_BLOCKS=FALSE&set DXF_MERGE_BLOCK_GEOMETRIES=FALSE&set

> > > 

> > > 

> > > 

> > > PGCLIENTENCODING=LATIN1&&ogr2ogr -f "PostgreSQL" PG:"host=localhost

> > > 

> > > 

> > > 

> > > user=postgres dbname=dbname password=pass" W_Works.dxf -nln Import_PID

> > > 

> > > 

> > > 

> > > -overwrite ?skipfailures

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > All geometries are intact.

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > However, the text is part of the Linestring layer and not in the text

> > > 

> > > 

> > > 

> > > column of the Postgresql table.

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > Is this to be expected?

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > Is there some way of screening out the text as text and point geometry?

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > 

> > > Bob


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111227/061e5850/attachment-0001.html
From Ralf.Suhr at itc-halle.de  Wed Dec 28 04:07:22 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Wed Dec 28 04:07:36 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <6C41C239B39F4E8B9E3A296DECF83EFD@BobPC>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
	<201112211030.54263.Ralf.Suhr@itc-halle.de>
	<6C41C239B39F4E8B9E3A296DECF83EFD@BobPC>
Message-ID: <201112281007.22754.Ralf.Suhr@itc-halle.de>

Bob, you need a gdal version 1.8 or higher.

On Dienstag 27 Dezember 2011 19:48:33 Bob Pawley wrote:
> Something is still not penetrating this thick skull of mine.
> 
> When I run
> 
> ogr2ogr --config DXF_INLINE_BLOCKS FALSE  --config       
> DXF_MERGE_BLOCK_GEOMETRIES FALSE  -f "PostgreSQL" PG:"host=localhost
> user=postgres dbname=db password=pass"  W_Works.dxf -overwrite
> -skipfailures  -sql "SELECT
> ST_Translate(ST_Scale(ST_Rotate((ST_Dump(b.wkb_geometry)).geom,
> e.blockangle / 180 * PI()), e.blockscale[1], e.blockscale[2]),
> ST_X(e.wkb_geometry), ST_Y(e.wkb_geometry)) AS wkb_geometry, CASE WHEN
> b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS
> ogr_style, e.layer, e.linetype, e.subclasses, b.text FROM entities e INNER
> JOIN blocks b USING (blockname)"
> 
> I get error - Undefined function `st_dump`used.

You can not use PostGIS functions on dxf file source.

> 
> When I run a simplified version
> 
> ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config 
> DXF_MERGE_BLOCK_GEOMETRIES FALSE  -f "PostgreSQL" PG:"host=localhost
> user=postgres dbname=db password=pass" W_Works.dxf    -overwrite
> -skipfailures  -sql "SELECT wkb_geometry From entities"
> 
> I get error - unrecognized field name wkb_geometry
> 
> In the last, when I substitute wkb_geometry for the blocks (name, angle,
> scale) or text I get no errors.
> 
> In all of the commands I`ve run, the block table remains empty.

The dxf file contains two different ogr layers.

ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config DXF_MERGE_BLOCK_GEOMETRIES 
FALSE  -f "PostgreSQL" PG:"host=localhost user=postgres dbname=db 
password=pass" W_Works.dxf entities

ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config DXF_MERGE_BLOCK_GEOMETRIES 
FALSE  -f "PostgreSQL" PG:"host=localhost user=postgres dbname=db 
password=pass" W_Works.dxf blocks

And finaly run the sqls inside the postgis database.

> 
> Bob
> 
> 
> 
> From: Ralf Suhr
> Sent: Wednesday, December 21, 2011 1:30 AM
> To: Bob Pawley
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr
> 
> On Import you can't use -nln option or you run ogr2ogr to times. One for
> entities layer and secound for blocks.
> 
> 
> ogr2ogr -f postgresql -nln myentities PG:"..." W_Works.dxf entities
> 
> ogr2ogr -f postgresql -nln myblocks PG:"..." W_Works.dxf blocks
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111228/9e3a52f8/attachment.html
From rjpawley at shaw.ca  Wed Dec 28 13:09:35 2011
From: rjpawley at shaw.ca (Bob Pawley)
Date: Wed Dec 28 13:10:27 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <201112281007.22754.Ralf.Suhr@itc-halle.de>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
	<201112211030.54263.Ralf.Suhr@itc-halle.de>
	<6C41C239B39F4E8B9E3A296DECF83EFD@BobPC>
	<201112281007.22754.Ralf.Suhr@itc-halle.de>
Message-ID: <9583D5D37B8C424D84932D8C712E2B2E@BobPC>

Thanks Ralf

I downloaded the latest development installer (http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1310-gdal-1-8-mapserver-6-0.zip) and tried your suggestion using it.

I still get an error when running the Postgresql code ?column b.ogr_style does not exist?. This is correct as neither table has, or has had, a column ogr_style.

Bob

From: Ralf Suhr 
Sent: Wednesday, December 28, 2011 1:07 AM
To: Bob Pawley 
Cc: gdal-dev@lists.osgeo.org 
Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

Bob, you need a gdal version 1.8 or higher.



On Dienstag 27 Dezember 2011 19:48:33 Bob Pawley wrote:

> Something is still not penetrating this thick skull of mine.

> 

> When I run

> 

> ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config 

> DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost

> user=postgres dbname=db password=pass" W_Works.dxf -overwrite

> -skipfailures -sql "SELECT

> ST_Translate(ST_Scale(ST_Rotate((ST_Dump(b.wkb_geometry)).geom,

> e.blockangle / 180 * PI()), e.blockscale[1], e.blockscale[2]),

> ST_X(e.wkb_geometry), ST_Y(e.wkb_geometry)) AS wkb_geometry, CASE WHEN

> b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS

> ogr_style, e.layer, e.linetype, e.subclasses, b.text FROM entities e INNER

> JOIN blocks b USING (blockname)"

> 

> I get error - Undefined function `st_dump`used.



You can not use PostGIS functions on dxf file source.



> 

> When I run a simplified version

> 

> ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config 

> DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost

> user=postgres dbname=db password=pass" W_Works.dxf -overwrite

> -skipfailures -sql "SELECT wkb_geometry From entities"

> 

> I get error - unrecognized field name wkb_geometry

> 

> In the last, when I substitute wkb_geometry for the blocks (name, angle,

> scale) or text I get no errors.

> 

> In all of the commands I`ve run, the block table remains empty.



The dxf file contains two different ogr layers.



ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost user=postgres dbname=db password=pass" W_Works.dxf entities



ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost user=postgres dbname=db password=pass" W_Works.dxf blocks



And finaly run the sqls inside the postgis database.



> 

> Bob

> 

> 

> 

> From: Ralf Suhr

> Sent: Wednesday, December 21, 2011 1:30 AM

> To: Bob Pawley

> Cc: gdal-dev@lists.osgeo.org

> Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

> 

> On Import you can't use -nln option or you run ogr2ogr to times. One for

> entities layer and secound for blocks.

> 

> 

> ogr2ogr -f postgresql -nln myentities PG:"..." W_Works.dxf entities

> 

> ogr2ogr -f postgresql -nln myblocks PG:"..." W_Works.dxf blocks

> 

> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111228/7c22a652/attachment.html
From even.rouault at mines-paris.org  Wed Dec 28 14:35:20 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 28 14:35:59 2011
Subject: [gdal-dev] Using GetCapabilities to configure wms
In-Reply-To: <CAAb2t_=ZBd2n+5NHuAOPSMiVqdQgiYammKjJKA9d7Ba=_NPPrw@mail.gmail.com>
References: <CAAb2t_=ZBd2n+5NHuAOPSMiVqdQgiYammKjJKA9d7Ba=_NPPrw@mail.gmail.com>
Message-ID: <201112282035.20453.even.rouault@mines-paris.org>

Le mardi 27 d?cembre 2011 18:46:16, Ramiro Gonzalez a ?crit :
> Hi, I'd like to configure wms services using a simplified interface.
> 
> GetCapabilities gives me the extent of the image using minX, minY, maxX and
> maxY values.
> Gdal wms driver requires UpperLeft and LowerRight coordinates.
> 
> In EPSG:4326 UpperLeft=(minX, maxY) and LowerRight=(maxX, minY), but I
> can't use this mapping to every 'Image projection'

In the context of the WMS driver, you can assume that UpperLeft=(minX, maxY) 
and LowerRight=(maxX, minY) for other projections too. The WMS driver doesn't 
particularly take into account the meaning of the SRS to issue the WMS 
requests.

Where it becomes really fun is if you use WMS 1.3.0 where axis ordering issues 
are introduced in the equation ;-)

> 
> I'd like to know how could I hide the conversion 'min/max->ul/lr' from the
> user.
> 
> Thanks
> Ramiro
From rjpawley at shaw.ca  Wed Dec 28 17:18:56 2011
From: rjpawley at shaw.ca (Bob Pawley)
Date: Wed Dec 28 17:19:14 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <201112281007.22754.Ralf.Suhr@itc-halle.de>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
	<201112211030.54263.Ralf.Suhr@itc-halle.de>
	<6C41C239B39F4E8B9E3A296DECF83EFD@BobPC>
	<201112281007.22754.Ralf.Suhr@itc-halle.de>
Message-ID: <1FFEE17D55D1481488476A9900E1E9EE@BobPC>

Hi Ralf

I managed to include ogr_styles by using the ?sql option. 

However the blocks table is still empty. There fore when I run the Postgresql script the result comes up empty.

Would it be possible for you to send me a dxf file that has worked for you, just in case the dxf I am using is structured differently. (I?m using engineering not geographic information.)

In email I have about a 3 meg limit.

Thanks.

Bob 

From: Ralf Suhr 
Sent: Wednesday, December 28, 2011 1:07 AM
To: Bob Pawley 
Cc: gdal-dev@lists.osgeo.org 
Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

Bob, you need a gdal version 1.8 or higher.



On Dienstag 27 Dezember 2011 19:48:33 Bob Pawley wrote:

> Something is still not penetrating this thick skull of mine.

> 

> When I run

> 

> ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config 

> DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost

> user=postgres dbname=db password=pass" W_Works.dxf -overwrite

> -skipfailures -sql "SELECT

> ST_Translate(ST_Scale(ST_Rotate((ST_Dump(b.wkb_geometry)).geom,

> e.blockangle / 180 * PI()), e.blockscale[1], e.blockscale[2]),

> ST_X(e.wkb_geometry), ST_Y(e.wkb_geometry)) AS wkb_geometry, CASE WHEN

> b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS

> ogr_style, e.layer, e.linetype, e.subclasses, b.text FROM entities e INNER

> JOIN blocks b USING (blockname)"

> 

> I get error - Undefined function `st_dump`used.



You can not use PostGIS functions on dxf file source.



> 

> When I run a simplified version

> 

> ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config 

> DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost

> user=postgres dbname=db password=pass" W_Works.dxf -overwrite

> -skipfailures -sql "SELECT wkb_geometry From entities"

> 

> I get error - unrecognized field name wkb_geometry

> 

> In the last, when I substitute wkb_geometry for the blocks (name, angle,

> scale) or text I get no errors.

> 

> In all of the commands I`ve run, the block table remains empty.



The dxf file contains two different ogr layers.



ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost user=postgres dbname=db password=pass" W_Works.dxf entities



ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost user=postgres dbname=db password=pass" W_Works.dxf blocks



And finaly run the sqls inside the postgis database.



> 

> Bob

> 

> 

> 

> From: Ralf Suhr

> Sent: Wednesday, December 21, 2011 1:30 AM

> To: Bob Pawley

> Cc: gdal-dev@lists.osgeo.org

> Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr

> 

> On Import you can't use -nln option or you run ogr2ogr to times. One for

> entities layer and secound for blocks.

> 

> 

> ogr2ogr -f postgresql -nln myentities PG:"..." W_Works.dxf entities

> 

> ogr2ogr -f postgresql -nln myblocks PG:"..." W_Works.dxf blocks

> 

> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111228/d632ead7/attachment-0001.html
From Ralf.Suhr at itc-halle.de  Thu Dec 29 04:46:59 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Dec 29 04:47:12 2011
Subject: [gdal-dev] DXF to Postgis using ogr2ogr
In-Reply-To: <1FFEE17D55D1481488476A9900E1E9EE@BobPC>
References: <05695F0945D74D1E8BC22EA5DAA24FAC@BobPC>
	<201112281007.22754.Ralf.Suhr@itc-halle.de>
	<1FFEE17D55D1481488476A9900E1E9EE@BobPC>
Message-ID: <201112291046.59716.Ralf.Suhr@itc-halle.de>

Hi Bob,

the dxf support in ogr is not complete. I have also some dxf files with blocks 
that can not imported by ogr.

Have you checked http://trac.osgeo.org/gdal/ticket/4369 (block reference to 
another block).

On Mittwoch 28 Dezember 2011 23:18:56 Bob Pawley wrote:
> Hi Ralf
> 
> I managed to include ogr_styles by using the ?sql option.
> 
> However the blocks table is still empty. There fore when I run the
> Postgresql script the result comes up empty.
> 
> Would it be possible for you to send me a dxf file that has worked for you,
> just in case the dxf I am using is structured differently. (I?m using
> engineering not geographic information.)
> 
> In email I have about a 3 meg limit.
> 
> Thanks.
> 
> Bob
> 
> From: Ralf Suhr
> Sent: Wednesday, December 28, 2011 1:07 AM
> To: Bob Pawley
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr
> 
> Bob, you need a gdal version 1.8 or higher.
> 
> On Dienstag 27 Dezember 2011 19:48:33 Bob Pawley wrote:
> > Something is still not penetrating this thick skull of mine.
> > 
> > 
> > 
> > When I run
> > 
> > 
> > 
> > ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config
> > 
> > DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost
> > 
> > user=postgres dbname=db password=pass" W_Works.dxf -overwrite
> > 
> > -skipfailures -sql "SELECT
> > 
> > ST_Translate(ST_Scale(ST_Rotate((ST_Dump(b.wkb_geometry)).geom,
> > 
> > e.blockangle / 180 * PI()), e.blockscale[1], e.blockscale[2]),
> > 
> > ST_X(e.wkb_geometry), ST_Y(e.wkb_geometry)) AS wkb_geometry, CASE WHEN
> > 
> > b.ogr_style IS NOT NULL THEN b.ogr_style ELSE e.ogr_style END AS
> > 
> > ogr_style, e.layer, e.linetype, e.subclasses, b.text FROM entities e
> > INNER
> > 
> > JOIN blocks b USING (blockname)"
> > 
> > 
> > 
> > I get error - Undefined function `st_dump`used.
> 
> You can not use PostGIS functions on dxf file source.
> 
> > When I run a simplified version
> > 
> > 
> > 
> > ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config
> > 
> > DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost
> > 
> > user=postgres dbname=db password=pass" W_Works.dxf -overwrite
> > 
> > -skipfailures -sql "SELECT wkb_geometry From entities"
> > 
> > 
> > 
> > I get error - unrecognized field name wkb_geometry
> > 
> > 
> > 
> > In the last, when I substitute wkb_geometry for the blocks (name, angle,
> > 
> > scale) or text I get no errors.
> > 
> > 
> > 
> > In all of the commands I`ve run, the block table remains empty.
> 
> The dxf file contains two different ogr layers.
> 
> 
> 
> ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config
> DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost
> user=postgres dbname=db password=pass" W_Works.dxf entities
> 
> 
> 
> ogr2ogr --config DXF_INLINE_BLOCKS FALSE --config
> DXF_MERGE_BLOCK_GEOMETRIES FALSE -f "PostgreSQL" PG:"host=localhost
> user=postgres dbname=db password=pass" W_Works.dxf blocks
> 
> 
> 
> And finaly run the sqls inside the postgis database.
> 
> > Bob
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > From: Ralf Suhr
> > 
> > Sent: Wednesday, December 21, 2011 1:30 AM
> > 
> > To: Bob Pawley
> > 
> > Cc: gdal-dev@lists.osgeo.org
> > 
> > Subject: Re: [gdal-dev] DXF to Postgis using ogr2ogr
> > 
> > 
> > 
> > On Import you can't use -nln option or you run ogr2ogr to times. One for
> > 
> > entities layer and secound for blocks.
> > 
> > 
> > 
> > 
> > 
> > ogr2ogr -f postgresql -nln myentities PG:"..." W_Works.dxf entities
> > 
> > 
> > 
> > ogr2ogr -f postgresql -nln myblocks PG:"..." W_Works.dxf blocks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111229/e3160c0c/attachment-0001.html
From warmerdam at pobox.com  Thu Dec 29 13:36:50 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 29 13:37:08 2011
Subject: [gdal-dev] GDAL/OGR 1.9.0RC1
Message-ID: <CA+YzLBfT2djDy+GgtfN6hvABGgyMk5Md1LU8JCNPKfi2J4sG8Q@mail.gmail.com>

Folks,

We have not had many problems with the 1.9.0 Betas
so I have prepared a final release candidate.  I would
appreciate it being tested and any problems reported promptly.
Soon I will initiate a motion to declare the release candidate
the final release and PSC members can vote on that after
doing some checks themselves.

Source Code:
  http://download.osgeo.org/gdal/gdal-1.9.0RC1.tar.gz
  http://download.osgeo.org/gdal/gdal-1.9.0RC1.tar.gz.md5
  http://download.osgeo.org/gdal/gdal190RC1.zip
  http://download.osgeo.org/gdal/gdal190RC1.zip.md5

Autotest Suite:
  http://download.osgeo.org/gdal/gdalautotest-1.9.0RC1.tar.gz

Documentation:
  http://download.osgeo.org/gdal/gdal-1.9.0doc.zip

I will note that there is now a 1.9 branch in SVN, so new
development can continue on trunk.  Any bug fixes needed
for new 1.9.0 release candidates must be applied in the 1.9
branch as well as trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From ivan.lucena at pmldnet.com  Thu Dec 29 14:15:32 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Dec 29 14:16:12 2011
Subject: [gdal-dev] bit length overflow in deflate compress
Message-ID: <20111229191532.20589.qmail@s466.sureserver.com>

Hi there,

I am getting a lot of messages like that when using deflate compression (zlib):

$ gdal_translate input.tif output.tif -co compress=deflate
Input file size is 800, 600
0...10...20...30...40...50...60...70...80...90...100 - done.

bit length overflow
code 4 bits 5->6

bit length overflow
code 16 bits 6->7

bit length overflow
code 11 bits 6->7

bit length overflow
code 5 bits 6->7
code 11 bits 6->7

bit length overflow
code 3 bits 6->7

bit length overflow
code 5 bits 5->6

bit length overflow
code 5 bits 6->7
code 12 bits 6->7

bit length overflow
code 11 bits 6->7

bit length overflow
code 12 bits 6->7

bit length overflow
code 16 bits 6->7

The input and output image has the same checksum at the end, so what is going on?

The image is RGB, GDAL is compiled for 32bits running in a win64 machine.

Regards,

Ivan


From even.rouault at mines-paris.org  Thu Dec 29 14:28:41 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 29 14:29:22 2011
Subject: [gdal-dev] bit length overflow in deflate compress
In-Reply-To: <20111229191532.20589.qmail@s466.sureserver.com>
References: <20111229191532.20589.qmail@s466.sureserver.com>
Message-ID: <201112292028.41603.even.rouault@mines-paris.org>

Le jeudi 29 d?cembre 2011 20:15:32, Ivan Lucena a ?crit :
> Hi there,
> 
> I am getting a lot of messages like that when using deflate compression
> (zlib):
> 
> $ gdal_translate input.tif output.tif -co compress=deflate
> Input file size is 800, 600
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> bit length overflow
> code 4 bits 5->6
> 
> bit length overflow
> code 16 bits 6->7
> 
> bit length overflow
> code 11 bits 6->7
> 
> bit length overflow
> code 5 bits 6->7
> code 11 bits 6->7
> 
> bit length overflow
> code 3 bits 6->7
> 
> bit length overflow
> code 5 bits 5->6
> 
> bit length overflow
> code 5 bits 6->7
> code 12 bits 6->7
> 
> bit length overflow
> code 11 bits 6->7
> 
> bit length overflow
> code 12 bits 6->7
> 
> bit length overflow
> code 16 bits 6->7
> 
> The input and output image has the same checksum at the end, so what is
> going on?

Ivan, I suppose you are using GDAL internal zlib. This error message comes 
from frmts/zlib/trees.c, and it appears it is only a debug message that is 
output if DEBUG is #define 'd (see zutil.h). On a non-debug build, the message 
shouldn't appear.

> 
> The image is RGB, GDAL is compiled for 32bits running in a win64 machine.
> 
> Regards,
> 
> Ivan
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ivan.lucena at pmldnet.com  Thu Dec 29 14:57:14 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Dec 29 14:57:35 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gYml0IGxlbmd0aCBvdmVyZmxvdyBpbiBkZWZsYXRlIGNvbXByZXNz?=
In-Reply-To: <201112292028.41603.even.rouault@mines-paris.org>
References: <20111229191532.20589.qmail@s466.sureserver.com>
	<201112292028.41603.even.rouault@mines-paris.org>
Message-ID: <20111229195715.32105.qmail@s466.sureserver.com>

Even,

I comment the DEBUG line on my nmake.local and I recompiled GDAL and the messages are gone.

Thanks.

>  -------Original Message-------
>  From: Even Rouault <even.rouault@mines-paris.org>
>  To: gdal-dev@lists.osgeo.org, Ivan Lucena <ivan.lucena@pmldnet.com>
>  Subject: Re: [gdal-dev] bit length overflow in deflate compress
>  Sent: Dec 29 '11 14:28
>  
>  Le jeudi 29 d?cembre 2011 20:15:32, Ivan Lucena a ?crit :
>  > Hi there,
>  >
>  > I am getting a lot of messages like that when using deflate compression
>  > (zlib):
>  >
>  > $ gdal_translate input.tif output.tif -co compress=deflate
>  > Input file size is 800, 600
>  > 0...10...20...30...40...50...60...70...80...90...100 - done.
>  >
>  > bit length overflow
>  > code 4 bits 5->6
>  >
>  > bit length overflow
>  > code 16 bits 6->7
>  >
>  > bit length overflow
>  > code 11 bits 6->7
>  >
>  > bit length overflow
>  > code 5 bits 6->7
>  > code 11 bits 6->7
>  >
>  > bit length overflow
>  > code 3 bits 6->7
>  >
>  > bit length overflow
>  > code 5 bits 5->6
>  >
>  > bit length overflow
>  > code 5 bits 6->7
>  > code 12 bits 6->7
>  >
>  > bit length overflow
>  > code 11 bits 6->7
>  >
>  > bit length overflow
>  > code 12 bits 6->7
>  >
>  > bit length overflow
>  > code 16 bits 6->7
>  >
>  > The input and output image has the same checksum at the end, so what is
>  > going on?
>  
>  Ivan, I suppose you are using GDAL internal zlib. This error message comes
>  from frmts/zlib/trees.c, and it appears it is only a debug message that is
>  output if DEBUG is #define 'd (see zutil.h). On a non-debug build, the message
>  shouldn't appear.
>  
>  >
>  > The image is RGB, GDAL is compiled for 32bits running in a win64 machine.
>  >
>  > Regards,
>  >
>  > Ivan
>  >
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev@lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From woklist at kyngchaos.com  Fri Dec 30 10:29:11 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri Dec 30 10:29:48 2011
Subject: [gdal-dev] gdal_contour and nodata values
In-Reply-To: <0497C2CA-B3F5-41B1-8B3D-786B738FFD04@kyngchaos.com>
References: <0497C2CA-B3F5-41B1-8B3D-786B738FFD04@kyngchaos.com>
Message-ID: <24106D87-0A69-4866-A1F5-B77D5821B0FE@kyngchaos.com>

No takers?  Maybe a bug or feature request I need to add to the tracker?  Or fixed/changed in 1.9 already?

On Dec 21, 2011, at 6:43 PM, William Kyngesburye wrote:

> Is gdal_contour supposed to do this?
> 
> I have a DEM projected from a latlong area to a conic with -dstalpha, so there are triangles of nodata around the edges.  When I run gdal_contour with intervals, I get a ring of contours around the edge of the nodata area starting from the first interval above 0 to the minimum elevation of the DEM, plus more segments along the edge for higher levels that extend to the edge:
> 
> 
> Shouldn't gdal_contour just create contours that *stop* at nodata edges?  Like if I had created contours from the original latlong rectangle:
> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no particular pleasure I shall kill every ___ I can until the war is over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of the allied nations devoted an entire year exclusively to hating the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war

-------------- next part --------------
Skipped content of type multipart/related
From even.rouault at mines-paris.org  Fri Dec 30 10:38:32 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 30 10:38:44 2011
Subject: [gdal-dev] gdal_contour and nodata values
In-Reply-To: <24106D87-0A69-4866-A1F5-B77D5821B0FE@kyngchaos.com>
References: <0497C2CA-B3F5-41B1-8B3D-786B738FFD04@kyngchaos.com>
	<24106D87-0A69-4866-A1F5-B77D5821B0FE@kyngchaos.com>
Message-ID: <201112301638.32292.even.rouault@mines-paris.org>

Le vendredi 30 d?cembre 2011 16:29:11, William Kyngesburye a ?crit :
> No takers?  Maybe a bug or feature request I need to add to the tracker? 

Please create a ticket with data to reproduce

> Or fixed/changed in 1.9 already?

I don' think so
From max at geoinova.com  Fri Dec 30 10:42:58 2011
From: max at geoinova.com (Maksim Sestic)
Date: Fri Dec 30 10:43:28 2011
Subject: [gdal-dev] Re: GDAL WMS - stripes offset error
In-Reply-To: <1324570147905-7119089.post@n2.nabble.com>
References: <1324570147905-7119089.post@n2.nabble.com>
Message-ID: <1325259778344-7138360.post@n2.nabble.com>

Sorry to bother with this issue, but should I file this as a bug?

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-WMS-stripes-offset-error-tp7119089p7138360.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Dec 30 11:37:44 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 30 11:37:50 2011
Subject: [gdal-dev] Re: GDAL WMS - stripes offset error
In-Reply-To: <1325259778344-7138360.post@n2.nabble.com>
References: <1324570147905-7119089.post@n2.nabble.com>
	<1325259778344-7138360.post@n2.nabble.com>
Message-ID: <201112301737.44833.even.rouault@mines-paris.org>

Le vendredi 30 d?cembre 2011 16:42:58, Maksim Sestic a ?crit :
> Sorry to bother with this issue, but should I file this as a bug?

Actually, I didn't see the XML definition in your first email because my email 
reader only displayed the raw text part, and not the HTML part.

Anyway... The issue is that you have inverted the UpperLeftX and LowerRightX 
values.

The following works :

<GDAL_WMS>
    <Service name="WMS">
        <Version>1.3.0</Version>
        <ServerUrl>http://grb.agiv.be/geodiensten/raadpleegdiensten/GRB/wms</ServerUrl>
        <CRS>EPSG:31370</CRS>
        <ImageFormat>image/png</ImageFormat>
        <Layers>GRB_BASISKAART</Layers>
        <Styles></Styles>
    </Service>
    <DataWindow>
        <UpperLeftX>107388.577230432</UpperLeftX>
        <UpperLeftY>187704.462304809</UpperLeftY>
        <LowerRightX>107585.617187491</LowerRightX>
        <LowerRightY>187506.656493064</LowerRightY>
        <SizeX>2076</SizeX>
        <SizeY>2124</SizeY>
    </DataWindow>

    <BlockSizeX>256</BlockSizeX>
    <BlockSizeY>256</BlockSizeY>
    <Projection>EPSG:31370</Projection>
</GDAL_WMS>

> 
> Regards,
> Maksim Sestic
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-WMS-stripes-offset-error-tp711
> 9089p7138360.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From hyling-s7 at nc.rr.com  Fri Dec 30 17:29:18 2011
From: hyling-s7 at nc.rr.com (Hua-Ying Ling)
Date: Fri Dec 30 17:29:24 2011
Subject: [gdal-dev] SQLite BLOB format of ogr2ogr
Message-ID: <CANhh0Xj3cr-Syqn3Pu1yksDAY0DvxK2eOhYBN7zOqWs+iaNbqA@mail.gmail.com>

Hi,

I can't seem to find the documentation for the SQLite Geometry BLOB format
created by ogr2ogr when I converted a Esri Shapefile to SQLite.  I'm using
the version included with FWTools247.

It doesn't seem to follow the WKB format or the SpatiaLite BLOB format.

I'd like to to keep my app very small so I'd like to parse this BLOB
without the use of library functions.

Thanks, Happy Holidays!
Hua-Ying
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111230/41ca67ee/attachment.html
From even.rouault at mines-paris.org  Fri Dec 30 17:37:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 30 17:38:18 2011
Subject: [gdal-dev] SQLite BLOB format of ogr2ogr
In-Reply-To: <CANhh0Xj3cr-Syqn3Pu1yksDAY0DvxK2eOhYBN7zOqWs+iaNbqA@mail.gmail.com>
References: <CANhh0Xj3cr-Syqn3Pu1yksDAY0DvxK2eOhYBN7zOqWs+iaNbqA@mail.gmail.com>
Message-ID: <201112302337.53688.even.rouault@mines-paris.org>

Le vendredi 30 d?cembre 2011 23:29:18, Hua-Ying Ling a ?crit :
> Hi,
> 
> I can't seem to find the documentation for the SQLite Geometry BLOB format
> created by ogr2ogr when I converted a Esri Shapefile to SQLite.  I'm using
> the version included with FWTools247.
> 
> It doesn't seem to follow the WKB format or the SpatiaLite BLOB format.

Hum, I'll suggest you to check again. The BLOB format is WKB format (unless 
you create explicitely a spatialite DB).

> 
> I'd like to to keep my app very small so I'd like to parse this BLOB
> without the use of library functions.
> 
> Thanks, Happy Holidays!
> Hua-Ying
From hyling-s7 at nc.rr.com  Fri Dec 30 18:09:50 2011
From: hyling-s7 at nc.rr.com (Hua-Ying Ling)
Date: Fri Dec 30 18:10:29 2011
Subject: [gdal-dev] SQLite BLOB format of ogr2ogr
In-Reply-To: <201112302337.53688.even.rouault@mines-paris.org>
References: <CANhh0Xj3cr-Syqn3Pu1yksDAY0DvxK2eOhYBN7zOqWs+iaNbqA@mail.gmail.com>
	<201112302337.53688.even.rouault@mines-paris.org>
Message-ID: <CANhh0XgUEbUGHOkzcUoyE=inRrRmcEairWZOfzgUzacbgqC3uw@mail.gmail.com>

On Fri, Dec 30, 2011 at 5:37 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Hum, I'll suggest you to check again. The BLOB format is WKB format (unless
> you create explicitely a spatialite DB).


The following is the SQLite data BLOB exported using the command ogr2ogr -f
"SQLite" output.sql inputFile.shp

This is a MultiPolygon data blob with 7 entities, it seems to follow the
WKB format up until byte 10:13 which should be a WKB type of value 1-7.

It isn't a spatialite BLOB format because byte 0 doesn't have a hex value
of 0x00 as specified by this document:
http://www.gaia-gis.it/spatialite-2.1/SpatiaLite-manual.html#t2.12

01 06000000 07000000 01030000

Thanks
Hua-Ying
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111230/fd46087b/attachment.html
From even.rouault at mines-paris.org  Fri Dec 30 18:20:20 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 30 18:20:42 2011
Subject: [gdal-dev] SQLite BLOB format of ogr2ogr
In-Reply-To: <CANhh0XgUEbUGHOkzcUoyE=inRrRmcEairWZOfzgUzacbgqC3uw@mail.gmail.com>
References: <CANhh0Xj3cr-Syqn3Pu1yksDAY0DvxK2eOhYBN7zOqWs+iaNbqA@mail.gmail.com>
	<201112302337.53688.even.rouault@mines-paris.org>
	<CANhh0XgUEbUGHOkzcUoyE=inRrRmcEairWZOfzgUzacbgqC3uw@mail.gmail.com>
Message-ID: <201112310020.20354.even.rouault@mines-paris.org>

Le samedi 31 d?cembre 2011 00:09:50, Hua-Ying Ling a ?crit :
> On Fri, Dec 30, 2011 at 5:37 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Hum, I'll suggest you to check again. The BLOB format is WKB format
> > (unless you create explicitely a spatialite DB).
> 
> The following is the SQLite data BLOB exported using the command ogr2ogr -f
> "SQLite" output.sql inputFile.shp
> 
> This is a MultiPolygon data blob with 7 entities, it seems to follow the
> WKB format up until byte 10:13 which should be a WKB type of value 1-7.
> 
> 01 06000000 07000000 01030000

Looks valid WKB to me. See my interpretation :

01 -> wkbNDR
06000000 -> wkbMultiPolygon
07000000 --> 7 entities
01 -> wkbNDR
030000(00) -> wkbPolygon


> 
> Thanks
> Hua-Ying
From hyling-s7 at nc.rr.com  Fri Dec 30 19:06:16 2011
From: hyling-s7 at nc.rr.com (Hua-Ying Ling)
Date: Fri Dec 30 19:06:41 2011
Subject: [gdal-dev] SQLite BLOB format of ogr2ogr
In-Reply-To: <201112310020.20354.even.rouault@mines-paris.org>
References: <CANhh0Xj3cr-Syqn3Pu1yksDAY0DvxK2eOhYBN7zOqWs+iaNbqA@mail.gmail.com>
	<201112302337.53688.even.rouault@mines-paris.org>
	<CANhh0XgUEbUGHOkzcUoyE=inRrRmcEairWZOfzgUzacbgqC3uw@mail.gmail.com>
	<201112310020.20354.even.rouault@mines-paris.org>
Message-ID: <CANhh0XiY8-vEpWba5F9GMM=Hh+11JdoxpKG5uncCaw=r0NkNSw@mail.gmail.com>

On Fri, Dec 30, 2011 at 6:20 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Looks valid WKB to me. See my interpretation :
>
> 01 -> wkbNDR
> 06000000 -> wkbMultiPolygon
> 07000000 --> 7 entities
> 01 -> wkbNDR
> 030000(00) -> wkbPolygon
>

You're right.  I didn't realize the wkbPolygon had a wkbNDR field as well.
 I was able to decode the entire BLOB correctly.  This reference is useful
for anyone else who is interested in parsing the WKB format:
http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/opt/rsbp4121.htm

Thanks for your help!
Hua-Ying
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20111230/3bf70e16/attachment.html
From aperi2007 at gmail.com  Sat Dec 31 07:18:54 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Sat Dec 31 07:19:46 2011
Subject: [gdal-dev] Export from PG to spatialite
Message-ID: <4EFEFDAE.8070507@gmail.com>

Hi,

I'm try to export from Postgres 9.1.2 with Postgis 2.0 to a spatialite 
3.0.0 version using ogr2ogr.exe.
To do this I try this sintax:

ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES 
-f "SQLite" db.sqlite -progress PG:"dbname='test' active_schema=work 
schemas=work,public host='localhost' port='5432' user='postgres' 
password='postgres' " -overwrite -lco GEOMETRY_NAME=geom -dsco 
SPATIALITE=yes -lco SPATIAL_INDEX=yes -gt 65536  -sql "select * from 
work.table1" -nln table1

Ogr2ogr regularly export it on a new created file named db.sqlite,
and create a table in it named "table1",

but this table1 don't have a geometry column named "geom" as I try ask using
-lco GEOMETRY:NAME=geom
instead has a field named "Geometry" and with "G" uppercase.
So I guess the
GEOMETRY_NAME seem don't work .

Another think I notice is that the geometry field seem to have no a 
declared geometrytype.

Infact try-ing to export table1 which has a POINT geometrytype.
After exported in the spatialite it don't has a cleared geometrytype,
and qgis is not able to open it.

I guess surely miss something parameter.

Thx,

Andrea
From even.rouault at mines-paris.org  Sat Dec 31 08:10:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 31 08:10:56 2011
Subject: [gdal-dev] Export from PG to spatialite
In-Reply-To: <4EFEFDAE.8070507@gmail.com>
References: <4EFEFDAE.8070507@gmail.com>
Message-ID: <201112311410.11328.even.rouault@mines-paris.org>

Le samedi 31 d?cembre 2011 13:18:54, vous avez ?crit :
> Hi,
> 
> I'm try to export from Postgres 9.1.2 with Postgis 2.0 to a spatialite
> 3.0.0 version using ogr2ogr.exe.
> To do this I try this sintax:
> 
> ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES
> -f "SQLite" db.sqlite -progress PG:"dbname='test' active_schema=work
> schemas=work,public host='localhost' port='5432' user='postgres'
> password='postgres' " -overwrite -lco GEOMETRY_NAME=geom -dsco
> SPATIALITE=yes -lco SPATIAL_INDEX=yes -gt 65536  -sql "select * from
> work.table1" -nln table1
> 
> Ogr2ogr regularly export it on a new created file named db.sqlite,
> and create a table in it named "table1",
> 
> but this table1 don't have a geometry column named "geom" as I try ask
> using -lco GEOMETRY:NAME=geom
> instead has a field named "Geometry" and with "G" uppercase.
> So I guess the
> GEOMETRY_NAME seem don't work .

Yes, it is expected. GEOMETRY_NAME is a layer creation option of the PG 
driver, but not of the SQLite driver. The SQLite driver has a hardcode name 
for the geometry column, which is GEOMETRY

> 
> Another think I notice is that the geometry field seem to have no a
> declared geometrytype.
> 
> Infact try-ing to export table1 which has a POINT geometrytype.
> After exported in the spatialite it don't has a cleared geometrytype,
> and qgis is not able to open it.
> 
> I guess surely miss something parameter.

This is due to the fact that you fetch the data from the PG database with a 
SQL clause, in which case the PG driver cannot guess the geometry type. You 
have 2 possibilities :
- Add "-nlt POINT" to your command line
- or replace "-sql "select * from work.table1"" by just work.table1 (or just 
table1 since your active_schema is work)

> 
> Thx,
> 
> Andrea
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From max at geoinova.com  Sat Dec 31 08:10:47 2011
From: max at geoinova.com (Maksim Sestic)
Date: Sat Dec 31 08:10:51 2011
Subject: [gdal-dev] Re: GDAL WMS - stripes offset error
In-Reply-To: <201112301737.44833.even.rouault@mines-paris.org>
References: <1324570147905-7119089.post@n2.nabble.com>
	<1325259778344-7138360.post@n2.nabble.com>
	<201112301737.44833.even.rouault@mines-paris.org>
Message-ID: <1325337047398-7140337.post@n2.nabble.com>

Hi Even,

Thanks a million for the suggestion, I simply oversaw this as I'm using
specific Envelope implementation having its Min/Max with regards to X and Y
axes (that is - I'm using LowerLeft and UpperRight coordinates).

BTW, do you have any idea whether WMS driver (in 1.8.0) supports HTTP
credentials, such as Username and Password? These params were not listed on
global WMS wiki, but they've been mentioned on Adam Nowacki's SoC page
(http://trac.osgeo.org/gdal/wiki/SoCWMSDriver).

Regards,
Maksim Sestic

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-WMS-stripes-offset-error-tp7119089p7140337.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Dec 31 08:16:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 31 08:17:01 2011
Subject: [gdal-dev] Re: GDAL WMS - stripes offset error
In-Reply-To: <1325337047398-7140337.post@n2.nabble.com>
References: <1324570147905-7119089.post@n2.nabble.com>
	<201112301737.44833.even.rouault@mines-paris.org>
	<1325337047398-7140337.post@n2.nabble.com>
Message-ID: <201112311416.51968.even.rouault@mines-paris.org>

Le samedi 31 d?cembre 2011 14:10:47, Maksim Sestic a ?crit :
> Hi Even,
> 
> Thanks a million for the suggestion, I simply oversaw this as I'm using
> specific Envelope implementation having its Min/Max with regards to X and Y
> axes (that is - I'm using LowerLeft and UpperRight coordinates).
> 
> BTW, do you have any idea whether WMS driver (in 1.8.0) supports HTTP
> credentials, such as Username and Password? These params were not listed on
> global WMS wiki, but they've been mentioned on Adam Nowacki's SoC page
> (http://trac.osgeo.org/gdal/wiki/SoCWMSDriver).

I believe you should be able to provide them by adding them in the URL such as 
:
http://user:password@host/...

> 
> Regards,
> Maksim Sestic
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-WMS-stripes-offset-error-tp711
> 9089p7140337.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From aperi2007 at gmail.com  Sat Dec 31 08:34:03 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Sat Dec 31 08:34:38 2011
Subject: [gdal-dev] Export from PG to spatialite
In-Reply-To: <201112311410.11328.even.rouault@mines-paris.org>
References: <4EFEFDAE.8070507@gmail.com>
	<201112311410.11328.even.rouault@mines-paris.org>
Message-ID: <4EFF0F4B.5050605@gmail.com>


 > driver, but not of the SQLite driver. The SQLite driver has a 
hardcode name
 > for the geometry column, which is GEOMETRY

Hi, Roualt ,
this is really clear and precious information for me.

Expecially the info on the hardcoded name in splite.
This was not really clear in the docs for sqlite/splite.

Il 31/12/2011 14:10, Even Rouault ha scritto:
> Le samedi 31 d?cembre 2011 13:18:54, vous avez ?crit :
>> Hi,
>>
>> I'm try to export from Postgres 9.1.2 with Postgis 2.0 to a spatialite
>> 3.0.0 version using ogr2ogr.exe.
>> To do this I try this sintax:
>>
>> ogr2ogr.exe --config PG_LIST_ALL_TABLES YES --config PG_SKIP_VIEWS YES
>> -f "SQLite" db.sqlite -progress PG:"dbname='test' active_schema=work
>> schemas=work,public host='localhost' port='5432' user='postgres'
>> password='postgres' " -overwrite -lco GEOMETRY_NAME=geom -dsco
>> SPATIALITE=yes -lco SPATIAL_INDEX=yes -gt 65536  -sql "select * from
>> work.table1" -nln table1
>>
>> Ogr2ogr regularly export it on a new created file named db.sqlite,
>> and create a table in it named "table1",
>>
>> but this table1 don't have a geometry column named "geom" as I try ask
>> using -lco GEOMETRY:NAME=geom
>> instead has a field named "Geometry" and with "G" uppercase.
>> So I guess the
>> GEOMETRY_NAME seem don't work .
>
> Yes, it is expected. GEOMETRY_NAME is a layer creation option of the PG
> driver, but not of the SQLite driver. The SQLite driver has a hardcode name
> for the geometry column, which is GEOMETRY
>
>>
>> Another think I notice is that the geometry field seem to have no a
>> declared geometrytype.
>>
>> Infact try-ing to export table1 which has a POINT geometrytype.
>> After exported in the spatialite it don't has a cleared geometrytype,
>> and qgis is not able to open it.
>>
>> I guess surely miss something parameter.
>
> This is due to the fact that you fetch the data from the PG database with a
> SQL clause, in which case the PG driver cannot guess the geometry type. You
> have 2 possibilities :
> - Add "-nlt POINT" to your command line
> - or replace "-sql "select * from work.table1"" by just work.table1 (or just
> table1 since your active_schema is work)
>
>>
>> Thx,
>>
>> Andrea
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Sat Dec 31 20:38:00 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Dec 31 20:38:53 2011
Subject: [gdal-dev] Motion: Promote GDAL 1.9.0RC1 as GDAL 1.9.0 Final
Message-ID: <CA+YzLBcC9kn3io4uB6ZN5zNynaUHFHSJEpHT_+rjhCW3QX131Q@mail.gmail.com>

Motion: To promote the GDAL/OGR 1.9.0RC1 release candidate as
            the final GDAL/OGR 1.9.0 release.

+1 Frank

--

I have done a wee bit of testing and the release candidate seems
solid.  Other PSC members are encouraged to test and vote.
Feedback from other users is also welcome.

Voting will remain open until at least the end of day on
Tuesday.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
