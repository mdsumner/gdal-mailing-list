From kruegerj at gmx.de  Sun Aug  1 15:26:01 2004
From: kruegerj at gmx.de (J.Krueger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Problems with writing RasterIO on WinXP
Message-ID: <410D43C9.2070701@gmx.de>

Hello,

While toying around with gdal today I encountered a strange problem:
I was familarizing myself with image calculations and basic io and 
therefore wrote a simple 'fusion' program that worked fine when running 
on a Win2k machine at work. But when I tried it on my WinXP Pro machine 
at home it suddenly started crashing as soon as it encountered the 
following instruction:

-cut-
fusionBand->RasterIO( GF_Write, 0, j, xsize, 1,
             fusionBuffer, xsize, 1, GDT_Float32,
             0, 0 );
-cut-

I tried the binary I compiled on the Win2k, but neither that nor 
binaries compiled on the WinXP machine itself work. I also tried the 1.2 
stable release of the library and the latest CVS (30th May) - without 
any differences. At work I'm a simple user with restricted rights, while 
on the XP machine I have admin rights, so it can't be a problem with the 
permissions.

Is this a known problem? I attached the source, so you may check it for 
yourself.

Jochen
-------------- next part --------------
#include <iostream>
#include <stdlib.h>
#include <gdal_priv.h>

#ifndef test
  #define test
#endif

using namespace std;

// global variable definitions
int errorvalue;
GDALDataset *highresDataset, *lowresDataset, *fusionDataset;
GDALDriver *outputDriver;

// function definitions
void rotatingCursor ();
float *analyseBuffer(float *hrBuffer, float *lrBuffer, int bsize);

int main(int argc, char *argv[])
{
    cout << "SimpleFusion Demo" << endl << endl;
    // read command line arguments
    const char* highresFilename = argv[1];
    const char* lowresFilename  = argv[2];
    const char* fusionFilename  = argv[3];
    // load highres dataset
    GDALAllRegister();
    #ifdef test
    cout << "loading highres dataset" << endl;
    #endif
    highresDataset = (GDALDataset *) GDALOpen( highresFilename, GA_ReadOnly );
    if( highresDataset == NULL ) {
        cout << endl << "can't load highresDataset" << endl;
        return 1;
    };    
    // load lowres dataset
    #ifdef test
    cout << "loading lowres dataset" << endl;
    #endif
    lowresDataset = (GDALDataset *) GDALOpen( lowresFilename, GA_ReadOnly );
    if( lowresDataset == NULL ) {
        cout << endl << "can't load lowresDataset" << endl;
        return 1;
    };    
    // get basic stats
    int maxbands = lowresDataset->GetRasterCount();
    int xsize = lowresDataset->GetRasterXSize();
    int ysize = lowresDataset->GetRasterYSize();
    #ifdef test
    cout << endl << "image size: " << xsize << "x" << ysize << "x" << maxbands << endl;
    #endif
    // create fusion dataset
    remove(fusionFilename);
    #ifdef test
    cout << endl << "creating fusion dataset" << endl;
    #endif
    char* outputFormat = "HFA";
    outputDriver = GetGDALDriverManager()->GetDriverByName(outputFormat);
    fusionDataset = outputDriver->CreateCopy( fusionFilename, lowresDataset, FALSE, 
                                    NULL, NULL, NULL );
    // load bands
    GDALRasterBand *highresBand, *lowresBand, *fusionBand;
    float *highresBuffer, *lowresBuffer, *fusionBuffer;
    #ifdef test
    cout << endl << "loading highres band" << endl;
    #endif
    highresBand = highresDataset->GetRasterBand( 1 );
    // defining bandsize
    xsize = highresBand->GetXSize();
    ysize = highresBand->GetYSize();
    // creating buffers
    int bufferSize = xsize * 1;
    highresBuffer = (float *) CPLMalloc(sizeof(float)*bufferSize);
    lowresBuffer  = (float *) CPLMalloc(sizeof(float)*bufferSize);
    fusionBuffer  = (float *) CPLMalloc(sizeof(float)*bufferSize);
    // looping through lowres bands
    int i=1;
    while (i < (maxbands+1)) {
        cout << endl << "loading lowres band " << i << endl;
        lowresBand = lowresDataset->GetRasterBand( i );
        fusionBand = fusionDataset->GetRasterBand( i );
        // looping through image lines
        cout << "Processing...  ";
        int j=0;
        while (j < (ysize)) {
            // load highres line
            highresBand->RasterIO( GF_Read, 0, j, xsize, 1, 
                              highresBuffer, xsize, 1, GDT_Float32, 
                              0, 0 );
            // load lowres line
            lowresBand->RasterIO( GF_Read, 0, j, xsize, 1, 
                              lowresBuffer, xsize, 1, GDT_Float32, 
                              0, 0 );
            // process image
            fusionBuffer = analyseBuffer(highresBuffer,lowresBuffer,bufferSize);
            rotatingCursor();
            // save fusion line
            fusionBand->RasterIO( GF_Write, 0, j, xsize, 1, 
                              fusionBuffer, xsize, 1, GDT_Float32, 
                              0, 0 );
            j += 1;
        };
        cout << "\bdone!" << endl;
        i += 1;    
    };    
}

float *analyseBuffer(float *hrBuffer, float *lrBuffer, int bsize) {
    float *fuBuffer;
    fuBuffer = (float *) CPLMalloc(sizeof(float)*bsize);
    int i=1;
    while (i <= bsize) {
        fuBuffer[i]=(hrBuffer[i] + hrBuffer[i] + lrBuffer[i]) / 3;
        i += 1;
    };    
    return fuBuffer;
}

int rotatingCursorSelector = 0;
void rotatingCursor () {
    char *symbols = "|/-\\|/-\\";
    if (rotatingCursorSelector == 8) rotatingCursorSelector = 0;
    cout << "\b" << symbols[(rotatingCursorSelector++)];
}    
From dron at ak4719.spb.edu  Sun Aug  1 10:27:45 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GeoTIFF LZW compression?
In-Reply-To: <20040730040735.GD2967@ak4719.spb.edu>
References: <000c01c475c0$b8ae7c70$959877c6@cts1149>
	<20040730040735.GD2967@ak4719.spb.edu>
Message-ID: <20040801142745.GA1320@ak4719.spb.edu>

On Fri, Jul 30, 2004 at 08:07:35AM +0400, Andrey Kiselev wrote:
> LZW code has been commited in the upstream libtiff sources and will be
> propagated to the GDAL soon. Meanwhile you can grab the libtiff
> library from the its CVS and use it instead of internal version.

Folks,

I have updated the internal libtiff version to the upstream CVS. In
particular it means that the LZW encoding can be used without any
additional efforts. Please, report any problems you encounter with new
libtiff. There are was many cleanups and improvements in the library
configuration, so it is possible that something may be broken.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From jclonts at hot.rr.com  Sun Aug  1 10:49:30 2004
From: jclonts at hot.rr.com (John Clonts)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: OpenEV Questions
References: <cef4cl$f20$1@sea.gmane.org>
	<ei7og0d1ckvp1j220ipfmte4ebbirn6ih2@4ax.com>
Message-ID: <ceivu4$pg0$1@sea.gmane.org>

Thanks Mario and Tyler for the replies.  I will take this over to the OpenEV
list...

Cheers,
John




From Michele.Sanges at otomelara.it  Mon Aug  2 04:47:56 2004
From: Michele.Sanges at otomelara.it (Sanges Michele)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GetSpatialRef() returns a NULL pointer.
Message-ID: <BDCFDAEC07D52A4ABDAC29167EA2BA6D0198974C@OTOCLEX.otomelara.it>


Hi,

I'm trying to extract the geographic (or projected) coordinates from my vector map files (an ESRI shapefile), using the OGRLayer::GetSpatialRef() class function. The problem is that this function returns a NULL pointer to an OGRSpatialReference object. Opening the same Shapefile with the OpenEV application, it shows the coordinate of any point.

My code is:

	m_pOGRDS = OGRSFDriverRegistrar::Open("./Data/demodata/airports.shp", FALSE, NULL);
	....
	....
	for (int nNumLayer = 0;  nNumLayer < m_pOGRDS->GetLayerCount(); nNumLayer++)
  	{
		OGRLayer *pOGRLayer = m_pOGRDS->GetLayer(nNumLayer);
		
		OGRSpatialReference *pOGRSR = pOGRLayer->GetSpatialRef(); // <- This function returns NULL
		printf("#######pOGRSR=%p######\n", pOGRSR);		    // <- Write pOGRSR=(nil)	
  	}

- Where am I mistaking?
- Is there another way to accomplish such operation?

Thanks.
Michele



From tylermitchell at shaw.ca  Mon Aug  2 11:24:57 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GetSpatialRef() returns a NULL pointer.
In-Reply-To: <BDCFDAEC07D52A4ABDAC29167EA2BA6D0198974C@OTOCLEX.otomelara.it>
References: <BDCFDAEC07D52A4ABDAC29167EA2BA6D0198974C@OTOCLEX.otomelara.it>
Message-ID: <200408020824.57235.tylermitchell@shaw.ca>

> 		OGRSpatialReference *pOGRSR = pOGRLayer->GetSpatialRef(); // <- This
> function returns NULL printf("#######pOGRSR=%p######\n", pOGRSR);		    //
> <- Write pOGRSR=(nil) }

Michele, do you have a projection file with your shapefile (i.e. 
airports.prj)?  SpatialRef is the spatial reference system point.  Is it the 
projection info itself you are looking for?  It didn't sound like it from 
your email.  I think you want to get at the geometries, not a spatialref.

Tyler

From StefanReisser at t-online.de  Mon Aug  2 16:10:07 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Creating JPEGs
Message-ID: <1Brj8J-1YePmy0@cmpmail00.bbul.t-online.de>

Hello,

I have a problem creating JPEGs. Does the JPEG Driver support the
Create() method?
What file do I have to include to be able to use the function
"CSLFetchBoolean( ... ) "

Kind regards,

Stefan



From Michele.Sanges at otomelara.it  Tue Aug  3 03:27:17 2004
From: Michele.Sanges at otomelara.it (Sanges Michele)
Date: Wed Nov 21 11:49:21 2007
Subject: R: [Gdal-dev] GetSpatialRef() returns a NULL pointer.
Message-ID: <BDCFDAEC07D52A4ABDAC29167EA2BA6D019A4DE3@OTOCLEX.otomelara.it>



> -----Messaggio originale-----
> Da: Tyler Mitchell [mailto:tylermitchell@shaw.ca]
> Inviato: luned? 2 agosto 2004 16.25
> A: gdal-dev@xserve.flids.com; Sanges Michele
> Oggetto: Re: [Gdal-dev] GetSpatialRef() returns a NULL pointer.
>
> Michele, do you have a projection file with your shapefile (i.e. 
> airports.prj)?  SpatialRef is the spatial reference system 
> point.  Is it the 
> projection info itself you are looking for?  It didn't sound 
> like it from 
> your email.  I think you want to get at the geometries, not a 
> spatialref.
> 
> Tyler


Tyler,
I want extract the GEOGRAPHIC (or UTM) COORDINATES from some vector map files (ESRI shapefile), which do not have the relative prj file.
I get the geometries in order to draw the different shapes (point, line, polyline, polygon...) embedded in any shapefile, but how can I get the geographic coordinates? I'm newbie in OGR, and I thought that it was made by means the SpatialRef class.

Thanks a lot.
Michele





From David.Schulze at delorme.com  Tue Aug  3 11:38:40 2004
From: David.Schulze at delorme.com (David Schulze)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] VC proj files?
Message-ID: <EAE3C16DFB15D611BF6400C00D003ABD02F5F742@nepal.delorme.com>

Does anyone have VC.NET 2003 project files for GDAL?  Make files are a
nightmare.  I've contemplated trying to create a project file myself, but I
figured if someone had already done it and was nice enough to share, that
I'd take advantage of that.

 

Thanks

David Schulze

DeLorme Mapping

Yarmouth, ME, USA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040803/28778db0/attachment.html
From StefanReisser at t-online.de  Tue Aug  3 12:19:05 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problem creating JPEG compressed TIFFs
Message-ID: <1Bs20H-0UVKNs0@filter05.bbul.t-online.de>

Hello!

When trying to create georeferenced, JPEG compressed GeoTiff images, I
get the following error:

ERROR 1: TIFFWriteEncodedStrip:q131Image.tif:
In place update to compressed TIFF images not supported.

My code works perfectly for uncompressed files. Does anyone know where
the error might be?

Kind regards,

Stefan



From ed at topozone.com  Tue Aug  3 12:58:33 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] VC proj files?
Message-ID: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CB08@ptolemy.topozone.com>

David -

I do not have any project files for you, in part because I discovered
long ago that GDAL's makefiles for Windows were excellent, and the
easiest to use of the several packages I'm dealing with.  They have been
anything BUT a nightmare for me.

If you're having a particular problem with them and would like to get
them working, please let me know.  I have found project files to be
EXTREMELY non-portable (or rather, extremely easy to make in a
non-portable way) and gave up on creating them quite a while ago.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com
-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of David Schulze
Sent: Tuesday, August 03, 2004 11:39 AM
To: gdal-dev@xserve.flids.com
Subject: [Gdal-dev] VC proj files?

Does anyone have VC.NET 2003 project files for GDAL?  Make files are a
nightmare.  I've contemplated trying to create a project file myself,
but I figured if someone had already done it and was nice enough to
share, that I'd take advantage of that.

 

Thanks

David Schulze

DeLorme Mapping

Yarmouth, ME, USA


From normanb at comsine.co.uk  Tue Aug  3 13:18:18 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] VC proj files?
In-Reply-To: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CB08@ptolemy.topozone.com>
References: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CB08@ptolemy.topozone.com>
Message-ID: <410FC8DA.6000309@comsine.co.uk>



Ed McNierney wrote:

>David -
>
>I do not have any project files for you, in part because I discovered
>long ago that GDAL's makefiles for Windows were excellent, and the
>easiest to use of the several packages I'm dealing with.  They have been
>anything BUT a nightmare for me.
>
>If you're having a particular problem with them and would like to get
>them working, please let me know.  I have found project files to be
>EXTREMELY non-portable (or rather, extremely easy to make in a
>non-portable way) and gave up on creating them quite a while ago.
>
>	- Ed
>
>Ed McNierney
>President and Chief Mapmaker
>TopoZone.com
>-----Original Message-----
>From: gdal-dev-bounces@xserve.flids.com
>[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of David Schulze
>Sent: Tuesday, August 03, 2004 11:39 AM
>To: gdal-dev@xserve.flids.com
>Subject: [Gdal-dev] VC proj files?
>
>Does anyone have VC.NET 2003 project files for GDAL?  Make files are a
>nightmare.  I've contemplated trying to create a project file myself,
>but I figured if someone had already done it and was nice enough to
>share, that I'd take advantage of that.
>
> 
>  
>
I too am having problems with VC.NET 2003 command line compiler for GDAL 
(though it isn't
a nightmare yet :-) ), the line

$(LIB):    $(OBJ)
    LIB /OUT:cpl.lib *.obj

fails.

I am not a makefile or c++ expert though, I using GDAL within Ossim 
which I am trying to build.

Thanks,

Norman Barker

From ben at vterrain.org  Tue Aug  3 17:02:19 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:21 2007
Subject: FW: [Gdal-dev] VC proj files?
Message-ID: <013101c4799d$2aa46620$f400fe0a@TOPP2>

I meant this to go the list, in case anyone else is interested.
-Ben
 
-----
From: Ben Discoe [mailto:ben@vterrain.org] 
Sent: Tuesday, August 03, 2004 4:16 PM
To: 'David Schulze'


David,
 
This is a recurring subject on the GDAL list.  You can search the list
archive to follow the discussion, or i can save you the effort and simply
point to:
  http://vterrain.org/dist/gdal_vc7.zip
 
Be advised these .sln/.vcproj files are not part of the core GDAL, and not
maintained by the GDAL folks, so they are not supported nor necessarily kept
up to date.
 
Personally, i find it much more useful to build GDAL in an IDE which lets me
browse through the source with a click or two, and switch between debug and
release builds without editing any files.
 
-Ben

-----
From: David Schulze
Sent: Tuesday, August 03, 2004 11:39 AM



Does anyone have VC.NET 2003 project files for GDAL?  Make files are a
nightmare.  I've contemplated trying to create a project file myself, but I
figured if someone had already done it and was nice enough to share, that
I'd take advantage of that.

 

Thanks

David Schulze

DeLorme Mapping

Yarmouth, ME, USA

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040803/3e2d6cb9/attachment.html
From Eric.Doenges at rcs.ei.tum.de  Wed Aug  4 01:44:42 2004
From: Eric.Doenges at rcs.ei.tum.de (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problem creating JPEG compressed TIFFs
In-Reply-To: <1Bs20H-0UVKNs0@filter05.bbul.t-online.de>
References: <1Bs20H-0UVKNs0@filter05.bbul.t-online.de>
Message-ID: <61FB90B7-E5D9-11D8-B62B-000393A3C40C@rcs.ei.tum.de>


Am 03.08.2004 um 18:19 schrieb StefanReisser@t-online.de:

> When trying to create georeferenced, JPEG compressed GeoTiff images, I
> get the following error:
>
> ERROR 1: TIFFWriteEncodedStrip:q131Image.tif:
> In place update to compressed TIFF images not supported.
>
> My code works perfectly for uncompressed files. Does anyone know where
> the error might be?

Are you creating overviews ? I encountered this problem after updating 
from
GDAL 1.1.9 when I attempted to create tiled, LZW-compressed GeoTIFFs 
with overviews.
Since I didn't really need them, I dropped the overview creation from 
my code and
everything was fine again.

Kind regards,
Eric


From javier.yebrin at ing.unitn.it  Wed Aug  4 10:05:04 2004
From: javier.yebrin at ing.unitn.it (Javier Yebrin)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Exporting GaussBoaga Grass location to ENVI format: no
	projection information
Message-ID: <200408041605.04371.javier.yebrin@ing.unitn.it>

Hi,
I've been using gdal_translate in order to export a GRASS-GIS raster file that 
has a Gauss-Boaga projection into ENVI format and the resulting ENVI header 
does'nt contain the projection information.
Notice that exporting the same raster file but stored in an UTM32 north 
location, leads to an ENVI header file with the proper projection info. so I 
guess my instalation is OK, but there is a problem in gdaltranslate trying to 
understand the GB parameters.
How can we fix this problem? (besides exporting to other formats or using the 
UTM32 projection)

GDAL version is:
GDAL 1.2.1.0, released 2004/06/23
GRASS version is:
GRASS 5.7.cvs (2004)

This is the command issued to translate from the GB location (parsed in 
different lines here for the sake of clarity):

gdal_translate -of ENVI -ot Int16 -a_srs 
'PROJCS["TransverseMercator",GEOGCS["international",DATUM["Monte_Mario",SPHEROID["international",6378388,297],TOWGS84
[-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],
PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",9],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",1500000],
PARAMETER["false_northing",0],UNIT["meter",1]]' 
/tmp/gb_reduced/javier/cellhd/M.nir 
envioutfile

And the resulting ENVI header:

ENVI
samples = 1112
lines   = 1473
bands   = 1
header offset = 0
file type = ENVI Standard
data type = 2
interleave = bsq
byte order = 0
band names = {
Band 1}

Thanks in advance,
Javier



From marco.hugentobler at autoform.ch  Wed Aug  4 10:02:48 2004
From: marco.hugentobler at autoform.ch (Marco Hugentobler)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] creating features in empty OGR layers
Message-ID: <4110EC88.4020504@autoform.ch>

Hi list,

I'd like to program a feature in qgis where a user may create empty vector
layers (e.g. shapefiles). The idea is that later features may be added by
digitizing with the mouse. The creation of the empty layer with OGR works
fine. However, when i reopen the shapefile and try to add features, 
there is a
segfault. The strange thing is that if i add a feature to the layer after
creating it, everything works ok (even reopening the file and adding more
features). Is this a bug or do i make something wrong? As i have read in the
docs that dbfs need at least one attribut, i added a dummy attribute, but it
did not help.
Below are the most important lines of code:

//create the file
OGRSFDriverH myDriverHandle = OGRGetDriverByName( mOutputFormat );
mDataSourceHandle = OGR_Dr_CreateDataSource( myDriverHandle, 
mOutputFileName,
NULL );
OGRSpatialReferenceH mySpatialReferenceSystemHandle = NULL;
QString myWKT = NULL;
mySpatialReferenceSystemHandle = OSRNewSpatialReference( myWKT );
mLayerHandle = OGR_DS_CreateLayer( mDataSourceHandle,
          "contour",
          mySpatialReferenceSystemHandle,
          mGeometryType,
          NULL );


//add a dummy attribute
OGRFieldDefnH myFieldDefinitionHandle = OGR_Fld_Create( theName, theType );
OGR_Fld_SetWidth( myFieldDefinitionHandle, theWidthInt );
OGR_Fld_SetPrecision( myFieldDefinitionHandle, thePrecisionInt );
OGR_L_CreateField( mLayerHandle, myFieldDefinitionHandle, FALSE );
OGR_Fld_Destroy( myFieldDefinitionHandle );

//adding a point feature after this then works fine:
OGRFeatureDefnH fdef=OGR_L_GetLayerDefn(mLayerHandle);
OGRFeatureH fhand= OGR_F_Create( fdef );
OGRGeometryH geometryh=OGR_G_CreateGeometry(wkbPoint);
OGR_G_AddPoint( geometryh, thePoint->x(), thePoint->y(), 0 );
OGR_F_SetGeometryDirectly(fhand, geometryh );
OGR_L_CreateFeature( mLayerHandle, fhand );
OGR_L_SyncToDisk( mLayerHandle );
OGR_F_Destroy( fhand );

//but without adding any features, it is a problem to add features when
//reopening the files:

ogrDataSource = OGRSFDriverRegistrar::Open((const char *) uri,TRUE);
ogrLayer = ogrDataSource->GetLayer(0);
ogrLayer->ResetReading();

//and this is how a point is added (which caused the segfault if no feature
//was inserted previously)

      OGRFeatureDefn* fdef=ogrLayer->GetLayerDefn();
      OGRFeature* feature=new OGRFeature(fdef);
      QGis::WKBTYPE ftype;
      memcpy(&ftype, (f->getGeometry()+1), sizeof(int));
      switch(ftype)
      ...
      case QGis::WKBPoint:
      {
      OGRPoint* p=new OGRPoint();
      p->importFromWkb(f->getGeometry(),1+sizeof(int)+2*sizeof(double));
      feature->SetGeometry(p);
      break;
      }
      ...
      ogrLayer->CreateFeature(feature);
      ogrLayer->SyncToDisk();


unfortunately, i didn't compile OGR with full debugging support, but a
backtrace says:

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 1089679968 (LWP 5241)]
0x40a22747 in DBFGetRecordCount () from /usr/local/lib/libgdal.so.1
(gdb) backtrace
#0  0x40a22747 in DBFGetRecordCount () from /usr/local/lib/libgdal.so.1
#1  0x40a810b7 in OGRShapeLayer::CreateFeature () from 
/usr/local/lib/libgdal.so.1
#2  0x40a758d3 in OGR_L_CreateFeature () from /usr/local/lib/libgdal.so.1
#3  0x415fa875 in QgsShapeFileProvider::addFeature (this=0x0, 
f=0xbfffe440) at
qgsshapefileprovider.cpp:724

the GDAL version i am using is 1.2.0

thanks in advance,
Marco



From neteler at itc.it  Wed Aug  4 12:11:35 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: [GRASSLIST:4082] BSQ import question
In-Reply-To: <20040803152036.GA21745@mail.xmission.com>
References: <20040803152036.GA21745@mail.xmission.com>
Message-ID: <20040804161135.GC23636@thuille.itc.it>

(cc GDAL list, due to potential ENVI driver issues
 ref:
 http://xserve.flids.com/pipermail/gdal-dev/2004-May/005648.html

 Sorry if you receive it twice.
)

[ The question was how to import a BSQ file into GRASS.
  I'll suggest to create an ENVI hdr file ]

On Tue, Aug 03, 2004 at 09:20:36AM -0600, C.S. Cornuelle wrote:
> Yes, I know, use i.tape.other.  :^)
>
> The problem (hopefully) is that I do not know some of the particulars
> which i.tape.other requires.  The file to import is
> 
> 	gl-latlong-1km-landcover.bsq
> from
> 	http://glcfapp.umiacs.umd.edu:8080/esdi/index.jsp

The global land cover file is at:
 ftp://ftp.glcf.umiacs.umd.edu/glcf/Global_Land_Cover/Global/gl-latlong-1km-landcover/

 Information
 Image Size: 				43200 Pixels 21600 Lines 
 Quantization:			    8-bit unsigned integer
 Output Georeferenced Units: LONG/LAT E019
 Projection:    				Geographic (geodetic)
 Earth Ellipsoid:			Sphere, rad 6370997 m 
 Upper Left Corner:			180d00'00.00" W Lon90d00'00.00" N Lat
 Lower Right Corner:			180d00'00.00" E Lon 90d00'00.00" S Lat
 Pixel Size (in Degrees):	0.00833 Lon 0.00833 Lat
 (Equivalent Deg,Min,Sec):	0d00'30.00"0d00'30.00" 
 UpLeftX:					-180 
 UpLeftY:      				90
 LoRightX:        			180
 LoRightY:      				-90


-> note the Sphere!
This is relevant for the definition of the location.
See 'gl-latlong-1km-landcover.grasslocation.txt' attachment for details.

> Some of you are probably familiar with this.  Assuming this, I
> have a few questions from GRASS 5.3.
[...]
> Any ideas?  Has anyone worked with this data set?  I'm running this on
> a linux box, if it matters.

Use r.in.gdal instead. It's way easier. You just have to generate
a BSQ ENVI header file, then import the map (find attached the file).
I hope I got that file right, following
 http://glcf.umiacs.umd.edu/data/guide/fileformat/bsq.shtml
 => RSI ENVI 3.6
    However, I didn't set bands = 14 but bands = 1

Now check with 'gdalinfo':
gdalinfo -mm gl-latlong-1km-landcover.bsq
Driver: ENVI/ENVI .hdr Labelled
Size is 43200, 21600
Coordinate System is:
LOCAL_CS["Geographic Lat/Lon",
    UNIT["Meter",1]]
Origin = (-180.000000,90.000000)
Pixel Size = (0.00833333,-0.00833333)
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000)
Lower Left  (-180.0000000, -90.0000000)
Upper Right ( 180.0000000,  90.0000000)
Lower Right ( 180.0000000, -90.0000000)
Center      (  -0.0000000,   0.0000000)
Band 1 Block=43200x1 Type=Byte, ColorInterp=Undefined
    Computed Min/Max=0.000,13.000

IMHO the projection is not detected completely by GDAL,
or should it be LOCAL_CS?

If you prefer, you can also make it a GeoTIFF file,
fixing the projection description in this moment:

gdal_translate -a_srs '+init=esri:37008' \
       gl-latlong-1km-landcover.bsq gl-latlong-1km-landcover.tif

gdalinfo -mm gl-latlong-1km-landcover.tif
Driver: GTiff/GeoTIFF
Size is 43200, 21600
Coordinate System is:
GEOGCS["unnamed ellipse",
    DATUM["unknown",
        SPHEROID["unnamed",6370997,1]],
    PRIMEM["Greenwich",0],
    UNIT[,0.0174532925199433]]
Origin = (-180.000000,90.000000)
Pixel Size = (0.00833333,-0.00833333)
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000)
Lower Left  (-180.0000000, -90.0000000)
Upper Right ( 180.0000000,  90.0000000)
Lower Right ( 180.0000000, -90.0000000)
Center      (  -0.0000000,   0.0000000)
Band 1 Block=43200x1 Type=Byte, ColorInterp=Gray
    Computed Min/Max=0.000,13.000


Then import:
(color table from
 http://glcf.umiacs.umd.edu/data/landcover/data.shtml
)

r.in.gdal in=gl-latlong-1km-landcover.tif out=gl-latlong-1km-landcover
r.colors gl-latlong-1km-landcover col=rules <<EOF
0       000 000 000
1       001 100 000
2       001 130 000
3       151 191 071
4       002 220 000
5       000 255 000
6       146 174 047
7       220 206 000
8       255 173 000
9       255 251 195
10      140 072 009
11      247 165 255
12      255 199 174
13      000 255 255
EOF

d.mon x0
d.rast.leg gl-latlong-1km-landcover

Regards

 Markus Neteler

-------------- next part --------------
ENVI
samples = 43200
lines   = 21600
bands   = 1
header offset = 0
file type = ENVI Classification
data type = 1
interleave = bsq
byte order = 0
map info = {Geographic Lat/Lon, 1.0, 1.0, -180.0, 90.0, 0.00833333333333, 0.00833333333333, sphere, units=Degrees}
band names = {
Band 1}
-------------- next part --------------
This is relevant for the definition of the 
gl-latlong-1km-landcover location.


  Please specify the coordinate system for location <sphere>
  B   Latitude-Longitude

  you wish to specify a geodetic datum for this location?(y/n) [y] y
  Please specify datum name
  Enter 'list' for the list of available datums
  or 'custom' if you wish to enter custom parameters
  Hit RETURN to cancel request
  > [nothing]

  Please specify ellipsoid name
  Enter 'list' for the list of available ellipsoids
  Hit RETURN to cancel request
  >sphere
  Radius: 6370997

  Location boundaries:
                       ====== DEFAULT REGION =======
                       | NORTH EDGE:90N_______     |
                       |                           |
            WEST EDGE  |                           |EAST EDGE
            180W______ |                           |180E______
                       | SOUTH EDGE:90S_______     |
                       =============================
           PROJECTION: 3 (Latitude-Longitude)         ZONE: 0
                             GRID RESOLUTION
                                 East-West:     0:00:30___
                               North-South:     0:00:30___
From bfraser at geoanalytic.com  Wed Aug  4 12:13:10 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] MrSID Driver v. 4.0.x overviews
References: <B78A4DC4AD9EE14FB014E9444BD2D30EF8C2B0@sea-srv-ms1.lizardtech.com>
	<20040721173250.GB11380@ak4719.spb.edu>
Message-ID: <00ff01c47a3d$f0091fa0$020002c0@SHARK>

Andrey,

  Have you made any progress with the MrSid driver reading RGB data?

To get it to compile, I had to make a small change in mrsiddataset.cpp.
Line 1216:

#include "lti_bufferData.h"

was changed to

#include "lti_sceneBuffer.h"


Also, nmake.opt, lines 110,111:

MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
  lti_dsdk.lib advapi32.lib user32.lib

were changed to:

MRSID_LIB = $(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib \
   advapi32.lib user32.lib


Thanks!
Brent Fraser

----- Original Message ----- 
From: "Andrey Kiselev" <dron@ak4719.spb.edu>
To: <gdal-dev@xserve.flids.com>
Sent: Wednesday, July 21, 2004 11:32 AM
Subject: Re: [Gdal-dev] MrSID Driver v. 4.0.x overviews


> Hi, Michael,
>
> Thank you for your comments!
>
> On Wed, Jul 21, 2004 at 09:50:13AM -0700, Michael P. Gerlek wrote:
> > > Maybe one reason is that to read an RGB image I believe each tile is
> > > decompressed 3 time, one time per component... About the same
> > > problem with the GeoTIFF driver, Frank said that we can optimize
> > > this by reading interleaved data in one pass by using the
> > > GDALDataset::RasterIO() ; maybe we can also implement this for the
> > > MrSID Driver ? Maybe we can also try to remove the memcpy in the
> > > IReadBlock function and read directly data into the GDAL buffer.
> > > (Maybe there are some optimization to do using the MrSID API
> > > differently ?)
> >
> > Yes, one scene read will decode all three bands at once (they are
> > encoded together, due to the RGB->YIQ color transform).
> >
> > I think you can easily use the GDAL buffer instead of having to
> > memcpy; the LTISceneBuffer is designed specifically for this kind of
> > thing.  What is the format/organization of the GDAL buffer?
>
> I'm not sure that we can use LTISceneBuffer directly... The buffer
> is sized to hold data for the single band, so if we read 8-bit image
> using X*Y blocks it will be X*Y bytes long. But it is not enough for
> LTISceneBuffer, because it wants to decode all image bands, so the buffer
> size should be X*Y*nBands bytes. That's why I'm using separate buffer
> created by the LTISceneBuffer and copy the date into GDAL buffer
> afterwards.
>
> Andrey
>
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From alexamici at fastwebnet.it  Wed Aug  4 15:21:25 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Exporting GaussBoaga Grass location to ENVI format: no
	projection information
In-Reply-To: <200408041605.04371.javier.yebrin@ing.unitn.it>
References: <200408041605.04371.javier.yebrin@ing.unitn.it>
Message-ID: <200408042121.25340.alexamici@fastwebnet.it>


Javier,

On Wednesday 04 August 2004 16:05, Javier Yebrin wrote:
> I've been using gdal_translate in order to export a GRASS-GIS raster file
> that has a Gauss-Boaga projection into ENVI format and the resulting ENVI
> header does'nt contain the projection information.
> Notice that exporting the same raster file but stored in an UTM32 north
> location, leads to an ENVI header file with the proper projection info. so
> I guess my instalation is OK, but there is a problem in gdaltranslate
> trying to understand the GB parameters.

you have two problems:

1 - gdal has only very limited support for writing and reading ENVI map_info 
data. last time i checked only utm32 and maybe latlong were working. Frank is 
looking into the issue, but writing a good parser for map_info is a non 
trivial task and no founding is seen on the horizon.

2 - ENVI map_info has no native representation for the GB projection. you need 
to add a custom projection with suitable data yourself.
and before you ask, yes i managed to do it, but, no, i don't remember the 
details and i don't have access to the code or the samples anymore, sorry.

cheers,
alessandro

From alexamici at fastwebnet.it  Wed Aug  4 15:21:25 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Exporting GaussBoaga Grass location to ENVI format: no
	projection information
In-Reply-To: <200408041605.04371.javier.yebrin@ing.unitn.it>
References: <200408041605.04371.javier.yebrin@ing.unitn.it>
Message-ID: <200408042121.25340.alexamici@fastwebnet.it>


Javier,

On Wednesday 04 August 2004 16:05, Javier Yebrin wrote:
> I've been using gdal_translate in order to export a GRASS-GIS raster file
> that has a Gauss-Boaga projection into ENVI format and the resulting ENVI
> header does'nt contain the projection information.
> Notice that exporting the same raster file but stored in an UTM32 north
> location, leads to an ENVI header file with the proper projection info. so
> I guess my instalation is OK, but there is a problem in gdaltranslate
> trying to understand the GB parameters.

you have two problems:

1 - gdal has only very limited support for writing and reading ENVI map_info 
data. last time i checked only utm32 and maybe latlong were working. Frank is 
looking into the issue, but writing a good parser for map_info is a non 
trivial task and no founding is seen on the horizon.

2 - ENVI map_info has no native representation for the GB projection. you need 
to add a custom projection with suitable data yourself.
and before you ask, yes i managed to do it, but, no, i don't remember the 
details and i don't have access to the code or the samples anymore, sorry.

cheers,
alessandro

From rec at geodesign.com.br  Thu Aug  5 09:02:34 2004
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] ESRI ASCII GRID File Header Info
Message-ID: <6.0.3.0.0.20040805095922.02496810@mailhost.geodesign.com.br>

Folks,

Does anyone have the specification of the header potion
of a ESRI ASCII GRID file?  How does one specify pixel
number to class name and colors?

Also, what is the file extension for this file?

Thanks,

Reinaldo


Reinaldo Escada Chohfi, Ph.D.
Diretor
GeoDesign Internacional

www.geodesign.com.br

E-mail: rec@geodesign.com.br

Intelig?ncia e Tecnologia Espacial de Ponta

Urbanismo, Estudos Ambientais, Monitoriamento Ambiental,
Geoprocessamento, GIS, Processamento de Imagens Geogr?ficas,
Sensoriamento Remoto: Imagens de Sat?lites

Compress?o de Imagens e Documentos Escanerizados

R. Vila Peralta, 42
12607-040 - Lorena - SP - Brasil

Tel./Fax: 0-XX-12-3153-5115 (Local)
              55-12-3153-5115 (Intl.)

Informa??o confidencial. N?o retransmitir sem autoriza??o.
Copyright (c) 2004 GeoDesign Internacional
Todos os direitos reservados.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040805/d32dfd0b/attachment.html
From rmmoore80 at yahoo.com  Thu Aug  5 09:26:46 2004
From: rmmoore80 at yahoo.com (Ryan Moore)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
Message-ID: <20040805132646.7222.qmail@web40206.mail.yahoo.com>

Sorry if this post got posted more than once, I'm new
to newsgroups.  I think I got it this time.

I am trying to compile GDAL with MrSID 4.0.9.713
support.  I have gdal setup in c:\gdal and mrsid setup
in c:\mrsid.  The nmake.opt file is set up to reflect
these changes and  the appropriate lines are
uncommented.  I run nmake /f makefile.vc and I get the
following error:

gdal12.dll:  fatal error LNK1120: 26 unresolved
externals
NMAKE: fatal error U1077: 'link' : return code '0x460'
Stop.

Above it is a TON of what appears to be the 26 errors.
 Is it common to get this error?  Also, is there a
precompiled binary for GDAL 1.2.1 with MrSID 4.0.9.713
somewhere?  I couldn't find it on the downloads page.

Ryan M. Moore


		
__________________________________
Do you Yahoo!?
New and Improved Yahoo! Mail - Send 10MB messages!
http://promotions.yahoo.com/new_mail 

From rmmoore80 at yahoo.com  Thu Aug  5 10:46:12 2004
From: rmmoore80 at yahoo.com (Ryan Moore)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
In-Reply-To: <011f01c47af7$985bf290$020002c0@SHARK>
Message-ID: <20040805144612.17744.qmail@web40206.mail.yahoo.com>

Ahh, our SIDs are RGB.  Any idea of an ETA on this
fix?  Our ortho layers are using TIF's and those are a
pain.

I played with it a little and got it to a point where
it says that it can not find 'lti_bufferData.h' but
after searching my entire hard drive, the file does
not seem to exist.  I even redownloaded the DSDK's
(both vc6 and vc7).  

Here is the section from my nmake.opt file referencing
MrSID files:

# Uncomment the following for MrSID support.
# You will likely require /MD and /EHsc in OPTFLAGS. 
MRSID_DIR =	c:\mrsid
#MRSID_INCLUDE = -I$(MRSID_DIR)\include
#MRSID_LIB =	/LIBPATH:$(MRSID_DIR)\lib \
#		MrSIDDecode_md.lib lt_xTrans_md.lib advapi32.lib
user32.lib
# Uncomment, if you have DSDK version 3.1.x
#MRSID_FLAGS =	-DMRSID_DSDK_VERSION_31
# Uncomment, if you have DSDK version 3.2.x
#MRSID_FLAGS =	-DMRSID_DSDK_VERSION_32
# Following suitable for the MrSID DSDK version 4.0.x.
MRSID_INCLUDE = -I$(MRSID_DIR)\include\base \
		-I$(MRSID_DIR)\include\support \
		-I$(MRSID_DIR)\include\metadata \
		-I$(MRSID_DIR)\include\mrsid_readers \
MRSID_LIB =	/LIBPATH:$(MRSID_DIR)\lib\Release_md \
		lti_dsdk.lib advapi32.lib user32.lib
MRSID_FLAGS =	-DMRSID_DSDK_VERSION_40

Ryan M. Moore

--- Brent Fraser <bfraser@geoanalytic.com> wrote:

> Ryan,
> 
>   The error(s) mean the linker can't find functions
> referenced in the code
> you are compiling.   Check the paths to the
> libraries inside your nmake.opt
> file (a less common cause of this problem is the use
> of out-dated
> libraries).
> 
>   I've successfully compiled GDAL 1.2.1 with MrSID
> 4.x DSDK (Win2k, VC++6),
> but it will not work with RGB (i.e more than one
> band) MrSID images.  I
> think Andrey and others are fixing this.
> 
> Brent Fraser
> 
> ----- Original Message ----- 
> From: "Ryan Moore" <rmmoore80@yahoo.com>
> To: <gdal-dev@xserve.flids.com>
> Sent: Thursday, August 05, 2004 7:26 AM
> Subject: [Gdal-dev] Problems compiling GDAL with
> MrSID 4.x DSDK
> 
> 
> > Sorry if this post got posted more than once, I'm
> new
> > to newsgroups.  I think I got it this time.
> >
> > I am trying to compile GDAL with MrSID 4.0.9.713
> > support.  I have gdal setup in c:\gdal and mrsid
> setup
> > in c:\mrsid.  The nmake.opt file is set up to
> reflect
> > these changes and  the appropriate lines are
> > uncommented.  I run nmake /f makefile.vc and I get
> the
> > following error:
> >
> > gdal12.dll:  fatal error LNK1120: 26 unresolved
> > externals
> > NMAKE: fatal error U1077: 'link' : return code
> '0x460'
> > Stop.
> >
> > Above it is a TON of what appears to be the 26
> errors.
> >  Is it common to get this error?  Also, is there a
> > precompiled binary for GDAL 1.2.1 with MrSID
> 4.0.9.713
> > somewhere?  I couldn't find it on the downloads
> page.
> >
> > Ryan M. Moore
> >
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > New and Improved Yahoo! Mail - Send 10MB messages!
> > http://promotions.yahoo.com/new_mail
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@xserve.flids.com
> > http://xserve.flids.com/mailman/listinfo/gdal-dev
> 
> 



		
__________________________________
Do you Yahoo!?
Yahoo! Mail Address AutoComplete - You start. We finish.
http://promotions.yahoo.com/new_mail 

From bfraser at geoanalytic.com  Thu Aug  5 10:22:10 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
References: <20040805132646.7222.qmail@web40206.mail.yahoo.com>
Message-ID: <011f01c47af7$985bf290$020002c0@SHARK>

Ryan,

  The error(s) mean the linker can't find functions referenced in the code
you are compiling.   Check the paths to the libraries inside your nmake.opt
file (a less common cause of this problem is the use of out-dated
libraries).

  I've successfully compiled GDAL 1.2.1 with MrSID 4.x DSDK (Win2k, VC++6),
but it will not work with RGB (i.e more than one band) MrSID images.  I
think Andrey and others are fixing this.

Brent Fraser

----- Original Message ----- 
From: "Ryan Moore" <rmmoore80@yahoo.com>
To: <gdal-dev@xserve.flids.com>
Sent: Thursday, August 05, 2004 7:26 AM
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK


> Sorry if this post got posted more than once, I'm new
> to newsgroups.  I think I got it this time.
>
> I am trying to compile GDAL with MrSID 4.0.9.713
> support.  I have gdal setup in c:\gdal and mrsid setup
> in c:\mrsid.  The nmake.opt file is set up to reflect
> these changes and  the appropriate lines are
> uncommented.  I run nmake /f makefile.vc and I get the
> following error:
>
> gdal12.dll:  fatal error LNK1120: 26 unresolved
> externals
> NMAKE: fatal error U1077: 'link' : return code '0x460'
> Stop.
>
> Above it is a TON of what appears to be the 26 errors.
>  Is it common to get this error?  Also, is there a
> precompiled binary for GDAL 1.2.1 with MrSID 4.0.9.713
> somewhere?  I couldn't find it on the downloads page.
>
> Ryan M. Moore
>
>
>
> __________________________________
> Do you Yahoo!?
> New and Improved Yahoo! Mail - Send 10MB messages!
> http://promotions.yahoo.com/new_mail
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From bfraser at geoanalytic.com  Thu Aug  5 11:28:39 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
References: <20040805144612.17744.qmail@web40206.mail.yahoo.com>
Message-ID: <126601c47b00$e1f51bd0$020002c0@SHARK>

Ryan,

  Here are the changes I had to make to GDAL 1.2.1:

To get it to compile, I had to make a small change in mrsiddataset.cpp.
Line 1216:

#include "lti_bufferData.h"

was changed to

#include "lti_sceneBuffer.h"


Also, nmake.opt, lines 110,111:

MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
  lti_dsdk.lib advapi32.lib user32.lib

were changed to:

MRSID_LIB = $(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib \
   advapi32.lib user32.lib

Brent
----- Original Message ----- 
From: "Ryan Moore" <rmmoore80@yahoo.com>
To: "Brent Fraser" <bfraser@geoanalytic.com>; <gdal-dev@xserve.flids.com>
Sent: Thursday, August 05, 2004 8:46 AM
Subject: Re: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK


> Ahh, our SIDs are RGB.  Any idea of an ETA on this
> fix?  Our ortho layers are using TIF's and those are a
> pain.
> 
> I played with it a little and got it to a point where
> it says that it can not find 'lti_bufferData.h' but
> after searching my entire hard drive, the file does
> not seem to exist.  I even redownloaded the DSDK's
> (both vc6 and vc7).  
> 
> Here is the section from my nmake.opt file referencing
> MrSID files:
> 
> # Uncomment the following for MrSID support.
> # You will likely require /MD and /EHsc in OPTFLAGS. 
> MRSID_DIR = c:\mrsid
> #MRSID_INCLUDE = -I$(MRSID_DIR)\include
> #MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib \
> # MrSIDDecode_md.lib lt_xTrans_md.lib advapi32.lib
> user32.lib
> # Uncomment, if you have DSDK version 3.1.x
> #MRSID_FLAGS = -DMRSID_DSDK_VERSION_31
> # Uncomment, if you have DSDK version 3.2.x
> #MRSID_FLAGS = -DMRSID_DSDK_VERSION_32
> # Following suitable for the MrSID DSDK version 4.0.x.
> MRSID_INCLUDE = -I$(MRSID_DIR)\include\base \
> -I$(MRSID_DIR)\include\support \
> -I$(MRSID_DIR)\include\metadata \
> -I$(MRSID_DIR)\include\mrsid_readers \
> MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
> lti_dsdk.lib advapi32.lib user32.lib
> MRSID_FLAGS = -DMRSID_DSDK_VERSION_40
> 
> Ryan M. Moore
> 
> --- Brent Fraser <bfraser@geoanalytic.com> wrote:
> 
> > Ryan,
> > 
> >   The error(s) mean the linker can't find functions
> > referenced in the code
> > you are compiling.   Check the paths to the
> > libraries inside your nmake.opt
> > file (a less common cause of this problem is the use
> > of out-dated
> > libraries).
> > 
> >   I've successfully compiled GDAL 1.2.1 with MrSID
> > 4.x DSDK (Win2k, VC++6),
> > but it will not work with RGB (i.e more than one
> > band) MrSID images.  I
> > think Andrey and others are fixing this.
> > 
> > Brent Fraser
> > 
> > ----- Original Message ----- 
> > From: "Ryan Moore" <rmmoore80@yahoo.com>
> > To: <gdal-dev@xserve.flids.com>
> > Sent: Thursday, August 05, 2004 7:26 AM
> > Subject: [Gdal-dev] Problems compiling GDAL with
> > MrSID 4.x DSDK
> > 
> > 
> > > Sorry if this post got posted more than once, I'm
> > new
> > > to newsgroups.  I think I got it this time.
> > >
> > > I am trying to compile GDAL with MrSID 4.0.9.713
> > > support.  I have gdal setup in c:\gdal and mrsid
> > setup
> > > in c:\mrsid.  The nmake.opt file is set up to
> > reflect
> > > these changes and  the appropriate lines are
> > > uncommented.  I run nmake /f makefile.vc and I get
> > the
> > > following error:
> > >
> > > gdal12.dll:  fatal error LNK1120: 26 unresolved
> > > externals
> > > NMAKE: fatal error U1077: 'link' : return code
> > '0x460'
> > > Stop.
> > >
> > > Above it is a TON of what appears to be the 26
> > errors.
> > >  Is it common to get this error?  Also, is there a
> > > precompiled binary for GDAL 1.2.1 with MrSID
> > 4.0.9.713
> > > somewhere?  I couldn't find it on the downloads
> > page.
> > >
> > > Ryan M. Moore
> > >
> > >
> > >
> > > __________________________________
> > > Do you Yahoo!?
> > > New and Improved Yahoo! Mail - Send 10MB messages!
> > > http://promotions.yahoo.com/new_mail
> > > _______________________________________________
> > > Gdal-dev mailing list
> > > Gdal-dev@xserve.flids.com
> > > http://xserve.flids.com/mailman/listinfo/gdal-dev
> > 
> > 
> 
> 
> 
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Mail Address AutoComplete - You start. We finish.
> http://promotions.yahoo.com/new_mail

From mpg at lizardtech.com  Thu Aug  5 11:58:15 2004
From: mpg at lizardtech.com (Michael P. Gerlek)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
Message-ID: <B78A4DC4AD9EE14FB014E9444BD2D30EF8C307@sea-srv-ms1.lizardtech.com>

The header lti_bufferData.h was renamed to lti_sceneBuffer.h between the 4.0.7 (or maybe 4.0.8) preview release and the final release, 4.0.9.  If you are using one of the preview releases, you really should upgrade.

I've been on travel for a while, but the last I recall on the RGB discussion was that the driver would probably have to do something like cache the other two bands when doing an extract, or else suffer a performance hit.  MrSID encodes RGB data as YIQ, so we can't do single-band extractions like GDAL wants...

-mpg

-----------------------------------
Michael P. Gerlek
Software Architect / MrSID team
mpg@lizardtech.com
LizardTech, a Celartem company
Seattle, Washington
----------------------------------

From rmmoore80 at yahoo.com  Thu Aug  5 12:43:07 2004
From: rmmoore80 at yahoo.com (Ryan M. Moore)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: Problems compiling GDAL with MrSID 4.x DSDK
References: <20040805144612.17744.qmail@web40206.mail.yahoo.com>
	<126601c47b00$e1f51bd0$020002c0@SHARK>
Message-ID: <ceto2t$3uj$1@sea.gmane.org>

Brent,

Ok, I made these changes and I am back to the "Unresolved externals".  This
time it is down from 29 to only 21.  The errors start with this:


Creating library gdal_i.lib and object gdal_i.exp
mrsiddataset.obj : error LNK2019: unresolved external symbol "public: float
__th
iscall LizardTech::LTIPixel::getSampleValueFloat32(unsigned short)const "
(?getS
ampleValueFloat32@LTIPixel@LizardTech@@QBEMG@Z) referenced in function
"public:
__thiscall MrSIDRasterBand::MrSIDRasterBand(class MrSIDDataset *,int)"
(??0MrSID
RasterBand@@QAE@PAVMrSIDDataset@@H@Z)

It then lists 20 more very similar to the above.  I must not be referencing
a file or set of files, but I am using close to the "default" that is
provided with gdal's source.

Did you make those modifications to the original mrsiddataset.cpp file that
came with gdal 1.2.1 or the one that someone in this newsgroup modified?

Ryan


"Brent Fraser" <bfraser@geoanalytic.com> wrote in message
news:126601c47b00$e1f51bd0$020002c0@SHARK...
> Ryan,
>
>   Here are the changes I had to make to GDAL 1.2.1:
>
> To get it to compile, I had to make a small change in mrsiddataset.cpp.
> Line 1216:
>
> #include "lti_bufferData.h"
>
> was changed to
>
> #include "lti_sceneBuffer.h"
>
>
> Also, nmake.opt, lines 110,111:
>
> MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
>   lti_dsdk.lib advapi32.lib user32.lib
>
> were changed to:
>
> MRSID_LIB = $(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib \
>    advapi32.lib user32.lib
>
> Brent




From rmmoore80 at yahoo.com  Thu Aug  5 13:14:45 2004
From: rmmoore80 at yahoo.com (Ryan M. Moore)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: Problems compiling GDAL with MrSID 4.x DSDK
References: <20040805144612.17744.qmail@web40206.mail.yahoo.com>
	<126601c47b00$e1f51bd0$020002c0@SHARK>
Message-ID: <cetpu6$92b$1@sea.gmane.org>

I got it to compile and tested the dll and it works fine. Thank you!

 My next question is, gdaltindex.exe does not like my sid files.  It says
they are not recognised as a supported dataset name.  Is this something I
will have to set up manually or perhaps a special gdaltindex that can read
*.sid files?

Ryan
"Brent Fraser" <bfraser@geoanalytic.com> wrote in message
news:126601c47b00$e1f51bd0$020002c0@SHARK...
> Ryan,
>
>   Here are the changes I had to make to GDAL 1.2.1:
>
> To get it to compile, I had to make a small change in mrsiddataset.cpp.
> Line 1216:
>
> #include "lti_bufferData.h"
>
> was changed to
>
> #include "lti_sceneBuffer.h"
>
>
> Also, nmake.opt, lines 110,111:
>
> MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
>   lti_dsdk.lib advapi32.lib user32.lib
>
> were changed to:
>
> MRSID_LIB = $(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib \
>    advapi32.lib user32.lib
>
> Brent
> ----- Original Message ----- 
> From: "Ryan Moore" <rmmoore80@yahoo.com>
> To: "Brent Fraser" <bfraser@geoanalytic.com>; <gdal-dev@xserve.flids.com>
> Sent: Thursday, August 05, 2004 8:46 AM
> Subject: Re: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
>
>
> > Ahh, our SIDs are RGB.  Any idea of an ETA on this
> > fix?  Our ortho layers are using TIF's and those are a
> > pain.
> >
> > I played with it a little and got it to a point where
> > it says that it can not find 'lti_bufferData.h' but
> > after searching my entire hard drive, the file does
> > not seem to exist.  I even redownloaded the DSDK's
> > (both vc6 and vc7).
> >
> > Here is the section from my nmake.opt file referencing
> > MrSID files:
> >
> > # Uncomment the following for MrSID support.
> > # You will likely require /MD and /EHsc in OPTFLAGS.
> > MRSID_DIR = c:\mrsid
> > #MRSID_INCLUDE = -I$(MRSID_DIR)\include
> > #MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib \
> > # MrSIDDecode_md.lib lt_xTrans_md.lib advapi32.lib
> > user32.lib
> > # Uncomment, if you have DSDK version 3.1.x
> > #MRSID_FLAGS = -DMRSID_DSDK_VERSION_31
> > # Uncomment, if you have DSDK version 3.2.x
> > #MRSID_FLAGS = -DMRSID_DSDK_VERSION_32
> > # Following suitable for the MrSID DSDK version 4.0.x.
> > MRSID_INCLUDE = -I$(MRSID_DIR)\include\base \
> > -I$(MRSID_DIR)\include\support \
> > -I$(MRSID_DIR)\include\metadata \
> > -I$(MRSID_DIR)\include\mrsid_readers \
> > MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
> > lti_dsdk.lib advapi32.lib user32.lib
> > MRSID_FLAGS = -DMRSID_DSDK_VERSION_40
> >
> > Ryan M. Moore
> >
> > --- Brent Fraser <bfraser@geoanalytic.com> wrote:
> >
> > > Ryan,
> > >
> > >   The error(s) mean the linker can't find functions
> > > referenced in the code
> > > you are compiling.   Check the paths to the
> > > libraries inside your nmake.opt
> > > file (a less common cause of this problem is the use
> > > of out-dated
> > > libraries).
> > >
> > >   I've successfully compiled GDAL 1.2.1 with MrSID
> > > 4.x DSDK (Win2k, VC++6),
> > > but it will not work with RGB (i.e more than one
> > > band) MrSID images.  I
> > > think Andrey and others are fixing this.
> > >
> > > Brent Fraser
> > >
> > > ----- Original Message ----- 
> > > From: "Ryan Moore" <rmmoore80@yahoo.com>
> > > To: <gdal-dev@xserve.flids.com>
> > > Sent: Thursday, August 05, 2004 7:26 AM
> > > Subject: [Gdal-dev] Problems compiling GDAL with
> > > MrSID 4.x DSDK
> > >
> > >
> > > > Sorry if this post got posted more than once, I'm
> > > new
> > > > to newsgroups.  I think I got it this time.
> > > >
> > > > I am trying to compile GDAL with MrSID 4.0.9.713
> > > > support.  I have gdal setup in c:\gdal and mrsid
> > > setup
> > > > in c:\mrsid.  The nmake.opt file is set up to
> > > reflect
> > > > these changes and  the appropriate lines are
> > > > uncommented.  I run nmake /f makefile.vc and I get
> > > the
> > > > following error:
> > > >
> > > > gdal12.dll:  fatal error LNK1120: 26 unresolved
> > > > externals
> > > > NMAKE: fatal error U1077: 'link' : return code
> > > '0x460'
> > > > Stop.
> > > >
> > > > Above it is a TON of what appears to be the 26
> > > errors.
> > > >  Is it common to get this error?  Also, is there a
> > > > precompiled binary for GDAL 1.2.1 with MrSID
> > > 4.0.9.713
> > > > somewhere?  I couldn't find it on the downloads
> > > page.
> > > >
> > > > Ryan M. Moore
> > > >
> > > >
> > > >
> > > > __________________________________
> > > > Do you Yahoo!?
> > > > New and Improved Yahoo! Mail - Send 10MB messages!
> > > > http://promotions.yahoo.com/new_mail
> > > > _______________________________________________
> > > > Gdal-dev mailing list
> > > > Gdal-dev@xserve.flids.com
> > > > http://xserve.flids.com/mailman/listinfo/gdal-dev
> > >
> > >
> >
> >
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > Yahoo! Mail Address AutoComplete - You start. We finish.
> > http://promotions.yahoo.com/new_mail




From bfraser at geoanalytic.com  Thu Aug  5 14:10:55 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: Problems compiling GDAL with MrSID 4.x DSDK
References: <20040805144612.17744.qmail@web40206.mail.yahoo.com><126601c47b00$e1f51bd0$020002c0@SHARK>
	<cetpu6$92b$1@sea.gmane.org>
Message-ID: <004601c47b17$8cec7ef0$020002c0@SHARK>

The edits I gave for the nmake.opt file specifies the dll version of the
MrSID DSDK, not the statically linked version.  Make sure the MrSID dlls are
in the same dir as the gdal12.dll (or somewhere in your PATH), or change
back to the statically linked version.

Brent

----- Original Message ----- 
From: "Ryan M. Moore" <rmmoore80@yahoo.com>
To: <gdal-dev@remotesensing.org>
Sent: Thursday, August 05, 2004 11:14 AM
Subject: [Gdal-dev] Re: Problems compiling GDAL with MrSID 4.x DSDK


> I got it to compile and tested the dll and it works fine. Thank you!
>
>  My next question is, gdaltindex.exe does not like my sid files.  It says
> they are not recognised as a supported dataset name.  Is this something I
> will have to set up manually or perhaps a special gdaltindex that can read
> *.sid files?
>
> Ryan
> "Brent Fraser" <bfraser@geoanalytic.com> wrote in message
> news:126601c47b00$e1f51bd0$020002c0@SHARK...
> > Ryan,
> >
> >   Here are the changes I had to make to GDAL 1.2.1:
> >
> > To get it to compile, I had to make a small change in mrsiddataset.cpp.
> > Line 1216:
> >
> > #include "lti_bufferData.h"
> >
> > was changed to
> >
> > #include "lti_sceneBuffer.h"
> >
> >
> > Also, nmake.opt, lines 110,111:
> >
> > MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
> >   lti_dsdk.lib advapi32.lib user32.lib
> >
> > were changed to:
> >
> > MRSID_LIB = $(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib \
> >    advapi32.lib user32.lib
> >
> > Brent
> > ----- Original Message ----- 
> > From: "Ryan Moore" <rmmoore80@yahoo.com>
> > To: "Brent Fraser" <bfraser@geoanalytic.com>;
<gdal-dev@xserve.flids.com>
> > Sent: Thursday, August 05, 2004 8:46 AM
> > Subject: Re: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
> >
> >
> > > Ahh, our SIDs are RGB.  Any idea of an ETA on this
> > > fix?  Our ortho layers are using TIF's and those are a
> > > pain.
> > >
> > > I played with it a little and got it to a point where
> > > it says that it can not find 'lti_bufferData.h' but
> > > after searching my entire hard drive, the file does
> > > not seem to exist.  I even redownloaded the DSDK's
> > > (both vc6 and vc7).
> > >
> > > Here is the section from my nmake.opt file referencing
> > > MrSID files:
> > >
> > > # Uncomment the following for MrSID support.
> > > # You will likely require /MD and /EHsc in OPTFLAGS.
> > > MRSID_DIR = c:\mrsid
> > > #MRSID_INCLUDE = -I$(MRSID_DIR)\include
> > > #MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib \
> > > # MrSIDDecode_md.lib lt_xTrans_md.lib advapi32.lib
> > > user32.lib
> > > # Uncomment, if you have DSDK version 3.1.x
> > > #MRSID_FLAGS = -DMRSID_DSDK_VERSION_31
> > > # Uncomment, if you have DSDK version 3.2.x
> > > #MRSID_FLAGS = -DMRSID_DSDK_VERSION_32
> > > # Following suitable for the MrSID DSDK version 4.0.x.
> > > MRSID_INCLUDE = -I$(MRSID_DIR)\include\base \
> > > -I$(MRSID_DIR)\include\support \
> > > -I$(MRSID_DIR)\include\metadata \
> > > -I$(MRSID_DIR)\include\mrsid_readers \
> > > MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
> > > lti_dsdk.lib advapi32.lib user32.lib
> > > MRSID_FLAGS = -DMRSID_DSDK_VERSION_40
> > >
> > > Ryan M. Moore
> > >
> > > --- Brent Fraser <bfraser@geoanalytic.com> wrote:
> > >
> > > > Ryan,
> > > >
> > > >   The error(s) mean the linker can't find functions
> > > > referenced in the code
> > > > you are compiling.   Check the paths to the
> > > > libraries inside your nmake.opt
> > > > file (a less common cause of this problem is the use
> > > > of out-dated
> > > > libraries).
> > > >
> > > >   I've successfully compiled GDAL 1.2.1 with MrSID
> > > > 4.x DSDK (Win2k, VC++6),
> > > > but it will not work with RGB (i.e more than one
> > > > band) MrSID images.  I
> > > > think Andrey and others are fixing this.
> > > >
> > > > Brent Fraser
> > > >
> > > > ----- Original Message ----- 
> > > > From: "Ryan Moore" <rmmoore80@yahoo.com>
> > > > To: <gdal-dev@xserve.flids.com>
> > > > Sent: Thursday, August 05, 2004 7:26 AM
> > > > Subject: [Gdal-dev] Problems compiling GDAL with
> > > > MrSID 4.x DSDK
> > > >
> > > >
> > > > > Sorry if this post got posted more than once, I'm
> > > > new
> > > > > to newsgroups.  I think I got it this time.
> > > > >
> > > > > I am trying to compile GDAL with MrSID 4.0.9.713
> > > > > support.  I have gdal setup in c:\gdal and mrsid
> > > > setup
> > > > > in c:\mrsid.  The nmake.opt file is set up to
> > > > reflect
> > > > > these changes and  the appropriate lines are
> > > > > uncommented.  I run nmake /f makefile.vc and I get
> > > > the
> > > > > following error:
> > > > >
> > > > > gdal12.dll:  fatal error LNK1120: 26 unresolved
> > > > > externals
> > > > > NMAKE: fatal error U1077: 'link' : return code
> > > > '0x460'
> > > > > Stop.
> > > > >
> > > > > Above it is a TON of what appears to be the 26
> > > > errors.
> > > > >  Is it common to get this error?  Also, is there a
> > > > > precompiled binary for GDAL 1.2.1 with MrSID
> > > > 4.0.9.713
> > > > > somewhere?  I couldn't find it on the downloads
> > > > page.
> > > > >
> > > > > Ryan M. Moore
> > > > >
> > > > >
> > > > >
> > > > > __________________________________
> > > > > Do you Yahoo!?
> > > > > New and Improved Yahoo! Mail - Send 10MB messages!
> > > > > http://promotions.yahoo.com/new_mail
> > > > > _______________________________________________
> > > > > Gdal-dev mailing list
> > > > > Gdal-dev@xserve.flids.com
> > > > > http://xserve.flids.com/mailman/listinfo/gdal-dev
> > > >
> > > >
> > >
> > >
> > >
> > >
> > > __________________________________
> > > Do you Yahoo!?
> > > Yahoo! Mail Address AutoComplete - You start. We finish.
> > > http://promotions.yahoo.com/new_mail
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From dron at ak4719.spb.edu  Thu Aug  5 15:40:00 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] VC proj files?
In-Reply-To: <410FC8DA.6000309@comsine.co.uk>
References: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CB08@ptolemy.topozone.com>
	<410FC8DA.6000309@comsine.co.uk>
Message-ID: <20040805194000.GA19069@ak4719.spb.edu>

On Tue, Aug 03, 2004 at 06:18:18PM +0100, Norman Barker wrote:
> I too am having problems with VC.NET 2003 command line compiler for
> GDAL (though it isn't a nightmare yet :-) ), the line
> 
> $(LIB):    $(OBJ)
>    LIB /OUT:cpl.lib *.obj
> 
> fails.

Norman,

Could you show the exact failure message you have got whe compiling the
package?

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From t.r.decarlo at larc.nasa.gov  Thu Aug  5 16:05:54 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problem in Ehdr (ESRI .hdr) reader
Message-ID: <003501c47b27$9d297f60$959877c6@cts1149>

I was trying to process some SRTM1 data that I got from USGS. These files
already had the .hdr, .prj, and other header files so I didn't use Markus'
script to generate the header files. 

What I found was that gdal does not recognize the UNITS field in the .prj
file and therefore incorrectly interprets the ULXMAP, ULYMAP, XDIM, and YDIM
values in the .hdr file. (Converting the files using Erdas produced
similarly bad results.) 

I'm not sure if this covers all the allowed values, but it seems that gdal
should interpret at least these:
UNITS <DD | DM | DS> 

Where DD = decimal degrees, DM = decimal minutes, and DS = decimal seconds.
(DS is the important one for me.)

I've attached the header files for one of the datasets, but the actual data
is too big to email.

I've tried looking around at the code, but I can't immediately see where all
the needed changes would occur to support this new field. Of course, I could
simply be misusing the gdal translator. If so, can you tell me how to read
these?

Thanks,
Thom


-------------- next part --------------
A non-text attachment was scrubbed...
Name: n38w112_hdrs.zip
Type: application/x-zip-compressed
Size: 732 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040805/ce5190c5/n38w112_hdrs.bin
From Silke.Reimer at intevation.de  Fri Aug  6 07:20:48 2004
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: the debian directory needs a resync (and a little
	update)
In-Reply-To: <200407312051.09036.alexamici@fastwebnet.it>
References: <200407312051.09036.alexamici@fastwebnet.it>
Message-ID: <20040806112048.GH24023@intevation.de>


Hi Alessandro,

On Sat, Jul 31, 2004 at 08:51:09PM +0200, Alessandro Amici wrote:
> 
> Silke,
> 
> the debian directory in cvs appears to lag behind the one actually distributed 
> within debian unstable.

Yes, sorry. I had lots of problems with my access to the gdal CVS. And
I still have (I begin to feel stupid because I already bothered
Frank several times with this issue. My attempts always end in 
	Fatal error, aborting.
	silke: no such user

Frank, do you have an idea what is going on?

> 
> i have a couple of small fixes to send along and the great news that libtiff 
> 3.6.1 finally found its way into sid so that we don't need to use the 
> internal copy anymore.

Can please send those fixes directly to me? I am just preparing the
new package and could included your patch immediately.

> 
> it would be nice if you could resync the gdal cvs to your up to date copy.
> 
> BTW: if you plan to release a gdal 1.2.1 package, i'd be willing to help.

Sending your patches will help a lot. Another issue is the
connection to grass (see seperate mail).

Many greeting,

	Silke

-- 
Silke Reimer

Intevation GmbH                      http://intevation.de/
FreeGIS                                http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040806/8d6d99c9/attachment.bin
From Silke.Reimer at intevation.de  Fri Aug  6 07:37:14 2004
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] gdal and libgrass
Message-ID: <20040806113714.GK24023@intevation.de>


Hallo!

As the debian maintainer of gdal I have been asked to add grass
support to the gdal library [1]. Since I didn't work with this
combination so far I investigated the situation in the archives and
gatherd the following:

1. gdal needs libgrass to connect directly to the grass raster format
2. libgrass is not yet included into the debian grass package (see [1])

Hence by now it will not be possible to include grass support to
the gdal package since not all requirements are fulfilled.

The solution could be to ask the grass maintainer to add libgrass to
his package but I am not sure whether this is useful at this stage.
As far as I understood grass support is very much better with grass
5.7 then with grass 5.0 so it seems that I should wait until grass
5.7 is in debian.

So I tend not to include grass support by now and wait until
libgrass and probably grass 5.7 are included into debian. Does this
make sense in your opinion or do you see any chance to get grass
support into the debian gdal package? 

Many thanks,

	Silke


[1] http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=248832
[2] http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=248649

-- 
Silke Reimer

Intevation GmbH                      http://intevation.de/
FreeGIS                                http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040806/994ce62f/attachment.bin
From neteler at itc.it  Fri Aug  6 07:59:39 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] gdal and libgrass
In-Reply-To: <20040806113714.GK24023@intevation.de>
References: <20040806113714.GK24023@intevation.de>
Message-ID: <20040806115939.GB13413@thuille.itc.it>

On Fri, Aug 06, 2004 at 01:37:14PM +0200, Silke Reimer wrote:
> Hallo!
> 
> As the debian maintainer of gdal I have been asked to add grass
> support to the gdal library [1]. Since I didn't work with this
> combination so far I investigated the situation in the archives and
> gatherd the following:
> 
> 1. gdal needs libgrass to connect directly to the grass raster format
> 2. libgrass is not yet included into the debian grass package (see [1])

There is another option: Radim Blazek wrote a new GDAL/GRASS driver
(see QGIS project for details). Frank considers to replace the old driver.
The new driver uses the GRASS libs directly, so the external 'libgrass'
is no longer needed then.

> Hence by now it will not be possible to include grass support to
> the gdal package since not all requirements are fulfilled.
> 
> The solution could be to ask the grass maintainer to add libgrass to
> his package but I am not sure whether this is useful at this stage.

IMHO not recommended.

> As far as I understood grass support is very much better with grass
> 5.7 then with grass 5.0 so it seems that I should wait until grass
> 5.7 is in debian.

As far as I understood the Debian grass maintainers, there will be
no GRASS 5.7 included into Debian in the near (far?) future.

> So I tend not to include grass support by now and wait until
> libgrass and probably grass 5.7 are included into debian. Does this
> make sense in your opinion

Let me vote for the GDAL/GRASS driver replacement, which might be 
faster than waiting that GRASS 5.7 reaches Debian one day. Debian
is still at GRASS 5.0(!).3 (there is also 5.3.0) but this doesn't
belong here.

Just my 0.02 Euro

 Markus


From Silke.Reimer at intevation.de  Fri Aug  6 08:32:29 2004
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] gdal and libgrass
In-Reply-To: <20040806115939.GB13413@thuille.itc.it>
References: <20040806113714.GK24023@intevation.de>
	<20040806115939.GB13413@thuille.itc.it>
Message-ID: <20040806123229.GA25320@intevation.de>

On Fri, Aug 06, 2004 at 01:59:39PM +0200, Markus Neteler wrote:
> On Fri, Aug 06, 2004 at 01:37:14PM +0200, Silke Reimer wrote:
> > Hallo!
> > 
> > As the debian maintainer of gdal I have been asked to add grass
> > support to the gdal library [1]. Since I didn't work with this
> > combination so far I investigated the situation in the archives and
> > gatherd the following:
> > 
> > 1. gdal needs libgrass to connect directly to the grass raster format
> > 2. libgrass is not yet included into the debian grass package (see [1])
> 
> There is another option: Radim Blazek wrote a new GDAL/GRASS driver
> (see QGIS project for details). Frank considers to replace the old driver.
> The new driver uses the GRASS libs directly, so the external 'libgrass'
> is no longer needed then.

OK. This seems to be a good solution. Nevertheless this means that I
will have to wait before I can include grass support into gdal,
right?

> 
> > Hence by now it will not be possible to include grass support to
> > the gdal package since not all requirements are fulfilled.
> > 
> > The solution could be to ask the grass maintainer to add libgrass to
> > his package but I am not sure whether this is useful at this stage.
> 
> IMHO not recommended.
> 
> > As far as I understood grass support is very much better with grass
> > 5.7 then with grass 5.0 so it seems that I should wait until grass
> > 5.7 is in debian.
> 
> As far as I understood the Debian grass maintainers, there will be
> no GRASS 5.7 included into Debian in the near (far?) future.
> 
> > So I tend not to include grass support by now and wait until
> > libgrass and probably grass 5.7 are included into debian. Does this
> > make sense in your opinion
> 
> Let me vote for the GDAL/GRASS driver replacement, which might be 
> faster than waiting that GRASS 5.7 reaches Debian one day. Debian
> is still at GRASS 5.0(!).3 (there is also 5.3.0) but this doesn't
> belong here.

I can not wait much longer until I build a new gdal package since
debian sarge will be freezed in short time. So appearently grass
support will not be included in debian sarge but in the debian
version which comes next.

Greetings,

	Silke

-- 
Silke Reimer

Intevation GmbH                      http://intevation.de/
FreeGIS                                http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040806/86ea980f/attachment.bin
From rec at geodesign.com.br  Fri Aug  6 14:17:38 2004
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] ESRI ASCII GRID File Header Info
Message-ID: <6.0.3.0.0.20040806151642.02439700@mailhost.geodesign.com.br>

Folks,

Does anyone have the specification of the header portion
of a ESRI ASCII GRID file?  How does one specify pixel
number to class name and colors?

Also, what is the file extension for this file?

Thanks,

Reinaldo


Reinaldo Escada Chohfi, Ph.D.
Diretor
GeoDesign Internacional

www.geodesign.com.br

E-mail: rec@geodesign.com.br

Intelig?ncia e Tecnologia Espacial de Ponta

Urbanismo, Estudos Ambientais, Monitoriamento Ambiental,
Geoprocessamento, GIS, Processamento de Imagens Geogr?ficas,
Sensoriamento Remoto: Imagens de Sat?lites

Compress?o de Imagens e Documentos Escanerizados

R. Vila Peralta, 42
12607-040 - Lorena - SP - Brasil

Tel./Fax: 0-XX-12-3153-5115 (Local)
              55-12-3153-5115 (Intl.)

Informa??o confidencial. N?o retransmitir sem autoriza??o.
Copyright (c) 2004 GeoDesign Internacional
Todos os direitos reservados.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040806/5d469936/attachment.html
From alexamici at fastwebnet.it  Fri Aug  6 14:48:45 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: the debian directory needs a resync (and a little
	update)
In-Reply-To: <20040806112048.GH24023@intevation.de>
References: <200407312051.09036.alexamici@fastwebnet.it>
	<20040806112048.GH24023@intevation.de>
Message-ID: <200408062048.45456.alexamici@fastwebnet.it>


trivial: remove stale '\'

diff -ur ../debian/gdal-1.2.0/debian/rules debian/rules
--- ../debian/gdal-1.2.0/debian/rules	2004-07-31 20:30:08.000000000 +0200
+++ debian/rules	2004-07-31 21:33:01.000000000 +0200
@@ -63,7 +63,7 @@
 	dh_installdirs
 
 	$(MAKE) install prefix=$(CURDIR)/debian/tmp/usr \
-		"INST_PYMOD=\$$(prefix)$(inst_pymod)" \
+		"INST_PYMOD=\$$(prefix)$(inst_pymod)"
 	$(MAKE) install-docs prefix=$(CURDIR)/debian/tmp/usr \
 		"INST_DOCS=\$$(prefix)/share/doc/libgdal-doc"\
 		"INST_MAN=\$$(prefix)/share/man"

From alexamici at fastwebnet.it  Fri Aug  6 14:56:50 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: the debian directory needs a resync (and a little
	update)
In-Reply-To: <20040806112048.GH24023@intevation.de>
References: <200407312051.09036.alexamici@fastwebnet.it>
	<20040806112048.GH24023@intevation.de>
Message-ID: <200408062056.50058.alexamici@fastwebnet.it>


- add support for netcdf and sqlite.
- move tiff support to external library (finally added to debian!)

diff -ur ../debian/gdal-1.2.0/debian/control debian/control
--- ../debian/gdal-1.2.0/debian/control	2004-07-31 20:30:08.000000000 +0200
+++ debian/control	2004-08-06 20:50:46.000000000 +0200
@@ -2,7 +2,7 @@
 Section: science
 Priority: extra
 Maintainer: Silke Reimer (MoinMoin) <silke@intevation.de>
-Build-Depends: debhelper (>> 4.1.25), zlib1g-dev, libcfitsio-dev, libpng12-dev, libjpeg62-dev, libungif4-dev, libhdf4g-dev, postgresql-dev, postgresql-client, libxerces21-dev, unixodbc-dev, python-dev, python-numeric, doxygen, d-shlibs
+Build-Depends: debhelper (>> 4.1.25), zlib1g-dev, libcfitsio-dev, netcdfg-dev, libtiff4-dev, libpng12-dev, libjpeg62-dev, libungif4-dev, libhdf4g-dev, postgresql-dev, postgresql-client, libxerces21-dev, unixodbc-dev, libsqlite0-dev, python-dev, python-numeric, doxygen, d-shlibs
 Standards-Version: 3.6.1
 
 Package: libgdal1
diff -ur ../debian/gdal-1.2.0/debian/rules debian/rules
--- ../debian/gdal-1.2.0/debian/rules	2004-07-31 20:30:08.000000000 +0200
+++ debian/rules	2004-07-31 21:33:01.000000000 +0200
@@ -20,9 +20,9 @@
 		--mandir=\$$\{prefix\}/share/man \
 		--with-threads \
 		--with-grass=no \
-		--with-libtiff=internal \
 		--with-geotiff=internal \
-		--with-xerces 
+		--with-xerces \
+		--with-sqlite
 
 	# Patch the generated libtool to avoid passing -rpath when linking,
 	# and to explicitly link libraries against the libraries they

From jnielsen at aero-graphics.com  Fri Aug  6 15:15:41 2004
From: jnielsen at aero-graphics.com (Jason M. Nielsen)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] ESRI ASCII GRID File Header Info
In-Reply-To: <6.0.3.0.0.20040806151642.02439700@mailhost.geodesign.com.br>
References: <6.0.3.0.0.20040806151642.02439700@mailhost.geodesign.com.br>
Message-ID: <1091819741.4113d8dd66d1d@www.agi-lan.com>

Quoting Reinaldo Escada Chohfi <rec@geodesign.com.br>:

> Folks,
> 
> Does anyone have the specification of the header portion
> of a ESRI ASCII GRID file?  How does one specify pixel
> number to class name and colors?
> 
> Also, what is the file extension for this file?
> 
> Thanks,
> 
> Reinaldo
Line #
1 Number of columns in raster
2 Number of rows in Raster
3 X coordinate of lower-left corner of file.
4 Y coordinate of the lower-left corner of file.
5 Cell size of the grid.
6 Numeric value to use as the indicator of "no data" in a pixel.
7-Elevation values.
  Starting at the top left corner of the raster.
  Space-separated numeric and proceeding from values) left to right. One line
for each row in the raster.

Example:
----------
ncols 5
nrows 4
xllcorner 1248100
yllcorner 1229750
cellsize 25
NODATA_value ?9999
661 661 670 679 691
701 702 703 703 703
703 703 702 702 702

Source of information:
British Columbia
Specifications and Guidelines for Geomatics:
Gridded Digital Elevation Model
Product Specifications
Edition: 2.0
December, 2002



From alexamici at fastwebnet.it  Fri Aug  6 15:48:35 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: the debian directory needs a resync (and a little
	update)
In-Reply-To: <200408062056.50058.alexamici@fastwebnet.it>
References: <200407312051.09036.alexamici@fastwebnet.it>
	<20040806112048.GH24023@intevation.de>
	<200408062056.50058.alexamici@fastwebnet.it>
Message-ID: <200408062148.35531.alexamici@fastwebnet.it>

On Friday 06 August 2004 20:56, Alessandro Amici wrote:
> - add support for netcdf and sqlite.
> - move tiff support to external library (finally added to debian!)

BTW:
i advocate adding netcdf support (for gmt) and using of the external tiff 
library, but i have absolutely no opinion on the sqlite support.

as a matter of fact i don't even know what it is useful for!
i added it just because i could 8-).

cheers,
alessandro

From dron at ak4719.spb.edu  Sat Aug  7 03:52:58 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Creating JPEGs
In-Reply-To: <1Brj8J-1YePmy0@cmpmail00.bbul.t-online.de>
References: <1Brj8J-1YePmy0@cmpmail00.bbul.t-online.de>
Message-ID: <20040807075258.GA9857@ak4719.spb.edu>

On Mon, Aug 02, 2004 at 10:10:07PM +0200, StefanReisser@t-online.de wrote:
> I have a problem creating JPEGs. Does the JPEG Driver support the
> Create() method?

No, only CreateCopy() method available for JPEG.

> What file do I have to include to be able to use the function
> "CSLFetchBoolean( ... ) "

You need cpl_string.h.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Sat Aug  7 04:10:33 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problem creating JPEG compressed TIFFs
In-Reply-To: <1Bs20H-0UVKNs0@filter05.bbul.t-online.de>
References: <1Bs20H-0UVKNs0@filter05.bbul.t-online.de>
Message-ID: <20040807081033.GB9857@ak4719.spb.edu>

On Tue, Aug 03, 2004 at 06:19:05PM +0200, StefanReisser@t-online.de wrote:
> When trying to create georeferenced, JPEG compressed GeoTiff images, I
> get the following error:
> 
> ERROR 1: TIFFWriteEncodedStrip:q131Image.tif:
> In place update to compressed TIFF images not supported.
> 
> My code works perfectly for uncompressed files. Does anyone know where
> the error might be?

That means exactly what is written: in place update to compressed TIFF
images is not supported. It is limitation of the libtiff library. TIFF
file consists from the bunch of small chunks: strips or tiles depending
on chosen image layout. Every chunk compressed separately, so all
chunks have a different sizes. When you want to update a part of the
already written and compressed image library should move a large part of
image, because updated chunk will have a different size. Perhaps we will
create a sort of memory management for libtiff sometime in the far
future, but not now.

So your application should write TIFF image chunk by chunk starting from
the first scanline, or just don't use compression.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Sat Aug  7 06:34:14 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
In-Reply-To: <011f01c47af7$985bf290$020002c0@SHARK>
References: <20040805132646.7222.qmail@web40206.mail.yahoo.com>
	<011f01c47af7$985bf290$020002c0@SHARK>
Message-ID: <20040807103414.GD9857@ak4719.spb.edu>

On Thu, Aug 05, 2004 at 08:22:10AM -0600, Brent Fraser wrote:
> I've successfully compiled GDAL 1.2.1 with MrSID 4.x DSDK (Win2k,
> VC++6), but it will not work with RGB (i.e more than one band) MrSID
> images.  I think Andrey and others are fixing this.

Brent,

Why do you think it doesn't work for RGB? For me it works just fine.
Could you be more detailed in this bug description?

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Sat Aug  7 06:31:31 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
In-Reply-To: <126601c47b00$e1f51bd0$020002c0@SHARK>
References: <20040805144612.17744.qmail@web40206.mail.yahoo.com>
	<126601c47b00$e1f51bd0$020002c0@SHARK>
Message-ID: <20040807103131.GC9857@ak4719.spb.edu>

On Thu, Aug 05, 2004 at 09:28:39AM -0600, Brent Fraser wrote:
>   Here are the changes I had to make to GDAL 1.2.1:
> 
> To get it to compile, I had to make a small change in mrsiddataset.cpp.
> Line 1216:
> 
> #include "lti_bufferData.h"
> 
> was changed to
> 
> #include "lti_sceneBuffer.h"
> 
> 
> Also, nmake.opt, lines 110,111:
> 
> MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
>   lti_dsdk.lib advapi32.lib user32.lib

Guys, sorry for late response, I was in the business trip during this
week.

I have committed the new version of the MrSID driver ported to the latest
DSDK. There is important bug fixed (the last strip of image was not
read), so I'm recommend updating from CVS for all users of the new MrSID
DSDK.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From neteler at itc.it  Sat Aug  7 13:19:46 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] gdal and libgrass
In-Reply-To: <20040806123229.GA25320@intevation.de>
References: <20040806113714.GK24023@intevation.de>
	<20040806115939.GB13413@thuille.itc.it>
	<20040806123229.GA25320@intevation.de>
Message-ID: <20040807171946.GA24442@thuille.itc.it>

On Fri, Aug 06, 2004 at 02:32:29PM +0200, Silke Reimer wrote:
> On Fri, Aug 06, 2004 at 01:59:39PM +0200, Markus Neteler wrote:
> > On Fri, Aug 06, 2004 at 01:37:14PM +0200, Silke Reimer wrote:
> > > 2. libgrass is not yet included into the debian grass package (see [1])
> > 
> > There is another option: Radim Blazek wrote a new GDAL/GRASS driver
> > (see QGIS project for details). Frank considers to replace the old driver.
> > The new driver uses the GRASS libs directly, so the external 'libgrass'
> > is no longer needed then.
> 
> OK. This seems to be a good solution. Nevertheless this means that I
> will have to wait before I can include grass support into gdal,
> right?
[...]
> 
> I can not wait much longer until I build a new gdal package since
> debian sarge will be freezed in short time. So appearently grass
> support will not be included in debian sarge but in the debian
> version which comes next.

How much time is left to replace the GDAL/GRASS driver to get
it into Debian? It's important also for QGIS and useful for
MapServer.
I don't know when Frank will be back, but replacing it should
not ne too much work as Radim provided diff files.

Markus


From Silke.Reimer at intevation.de  Sat Aug  7 14:00:20 2004
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] gdal and libgrass
In-Reply-To: <20040807171946.GA24442@thuille.itc.it>
References: <20040806113714.GK24023@intevation.de>
	<20040806115939.GB13413@thuille.itc.it>
	<20040806123229.GA25320@intevation.de>
	<20040807171946.GA24442@thuille.itc.it>
Message-ID: <20040807180020.GE1362@intevation.de>

On Sat, Aug 07, 2004 at 07:19:46PM +0200, Markus Neteler wrote:
> On Fri, Aug 06, 2004 at 02:32:29PM +0200, Silke Reimer wrote:
> > On Fri, Aug 06, 2004 at 01:59:39PM +0200, Markus Neteler wrote:
> > > On Fri, Aug 06, 2004 at 01:37:14PM +0200, Silke Reimer wrote:
> > > > 2. libgrass is not yet included into the debian grass package (see [1])
> > > 
> > > There is another option: Radim Blazek wrote a new GDAL/GRASS driver
> > > (see QGIS project for details). Frank considers to replace the old driver.
> > > The new driver uses the GRASS libs directly, so the external 'libgrass'
> > > is no longer needed then.
> > 
> > OK. This seems to be a good solution. Nevertheless this means that I
> > will have to wait before I can include grass support into gdal,
> > right?
> [...]
> > 
> > I can not wait much longer until I build a new gdal package since
> > debian sarge will be freezed in short time. So appearently grass
> > support will not be included in debian sarge but in the debian
> > version which comes next.
> 
> How much time is left to replace the GDAL/GRASS driver to get
> it into Debian? It's important also for QGIS and useful for
> MapServer.
> I don't know when Frank will be back, but replacing it should
> not ne too much work as Radim provided diff files.

OK. I misunderstood the situation: The patch from Radim is already
the native GRASS-driver for gdal?

Even then I hesitate to apply it for the next package update. One
reason is that the debian people have already frozen parts of sarge.
Such it becomes more difficult to get new things into sarge.

Another reason is that I don't know how stable the patch is. Perhaps
you can give me some more information about this. But I never tried
it and I don't no whether it will break other things.

My proposition: I will prepare a new gdal package today (I will do
this anyway) but without the grass-patch. When there is time
left next week I will try out the grass-patch and perhaps prepare a
new package of gdal with grass support. I am not too confident
though that this package will be into the next stable release of
debian.

Many greetings,

	Silke

-- 
Silke Reimer

Intevation GmbH                      http://intevation.de/
FreeGIS                                http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040807/8897e5db/attachment.bin
From neteler at itc.it  Sat Aug  7 15:21:03 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] OGR: AVC driver issues (E00)
Message-ID: <20040807192103.GA26503@thuille.itc.it>

Dear list members,

to update the "global" data set for GRASS I am trying to
import an E00 file. After using 'avcimport' to create 
a binary coverage, OGR seems to have troubles (was working
some month ago):

ogrinfo -summary olson ARC
Had to open data source read-only.
INFO: Open of `olson'
using driver `AVCBin' successful.

Layer name: ARC
Geometry: Line String
Feature Count: 15750
Extent: (-170128861896635013341904755760727851008.000000, -170140544564566716704068949377468596224.000000) - (0.000000, 0.000000)
Layer SRS WKT:
(unknown)
UserId: Integer (0.0)
FNODE#: Integer (0.0)
TNODE#: Integer (0.0)
LPOLY#: Integer (0.0)
RPOLY#: Integer (0.0)

The E00 file is here:
http://cdiac.ornl.gov/ftp/ndp017/olson-carbon.e00.Z
(1.2 MB)
"Major World Ecosystem Complexes Ranked by
Carbon in Live Vegetation" by Olson et al.

Subsequently v.in.ogr doesn't import the file into GRASS 5.7.

Thanks for any hints

 Markus Neteler


From dron at ak4719.spb.edu  Sat Aug  7 15:57:39 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: [GRASSLIST:4082] BSQ import question
In-Reply-To: <20040804161135.GC23636@thuille.itc.it>
References: <20040803152036.GA21745@mail.xmission.com>
	<20040804161135.GC23636@thuille.itc.it>
Message-ID: <20040807195739.GA8415@ak4719.spb.edu>

On Wed, Aug 04, 2004 at 06:11:35PM +0200, Markus Neteler wrote:
> The global land cover file is at:
>  ftp://ftp.glcf.umiacs.umd.edu/glcf/Global_Land_Cover/Global/gl-latlong-1km-landcover/
> 
>  Information
>  Image Size: 				43200 Pixels 21600 Lines 
>  Quantization:			    8-bit unsigned integer
>  Output Georeferenced Units: LONG/LAT E019
>  Projection:    				Geographic (geodetic)
>  Earth Ellipsoid:			Sphere, rad 6370997 m 
>  Upper Left Corner:			180d00'00.00" W Lon90d00'00.00" N Lat
>  Lower Right Corner:			180d00'00.00" E Lon 90d00'00.00" S Lat
>  Pixel Size (in Degrees):	0.00833 Lon 0.00833 Lat
>  (Equivalent Deg,Min,Sec):	0d00'30.00"0d00'30.00" 
>  UpLeftX:					-180 
>  UpLeftY:      				90
>  LoRightX:        			180
>  LoRightY:      				-90
> 
> 
> -> note the Sphere!
> This is relevant for the definition of the location.
> See 'gl-latlong-1km-landcover.grasslocation.txt' attachment for details.
> 
> > Some of you are probably familiar with this.  Assuming this, I
> > have a few questions from GRASS 5.3.
> [...]
> > Any ideas?  Has anyone worked with this data set?  I'm running this on
> > a linux box, if it matters.
> 
> Use r.in.gdal instead. It's way easier. You just have to generate
> a BSQ ENVI header file, then import the map (find attached the file).
> I hope I got that file right, following
>  http://glcf.umiacs.umd.edu/data/guide/fileformat/bsq.shtml
>  => RSI ENVI 3.6
>     However, I didn't set bands = 14 but bands = 1
> 
> Now check with 'gdalinfo':
> gdalinfo -mm gl-latlong-1km-landcover.bsq
> Driver: ENVI/ENVI .hdr Labelled
> Size is 43200, 21600
> Coordinate System is:
> LOCAL_CS["Geographic Lat/Lon",
>     UNIT["Meter",1]]
> Origin = (-180.000000,90.000000)
> Pixel Size = (0.00833333,-0.00833333)
> Corner Coordinates:
> Upper Left  (-180.0000000,  90.0000000)
> Lower Left  (-180.0000000, -90.0000000)
> Upper Right ( 180.0000000,  90.0000000)
> Lower Right ( 180.0000000, -90.0000000)
> Center      (  -0.0000000,   0.0000000)
> Band 1 Block=43200x1 Type=Byte, ColorInterp=Undefined
>     Computed Min/Max=0.000,13.000
> 
> IMHO the projection is not detected completely by GDAL,
> or should it be LOCAL_CS?

Markus,

I can't reproduce your result. I have the following with your .hdr file:

$ gdalinfo gl-latlong-1km-landcover.bsq 
Driver: ENVI/ENVI .hdr Labelled
Size is 43200, 21600
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.000000,90.000000)
Pixel Size = (0.00833333,-0.00833333)
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
Center      (  -0.0000000,   0.0000000) (  0d 0'0.00"W,  0d 0'0.00"N)
Band 1 Block=43200x1 Type=Byte, ColorInterp=Undefined
  Description = Band 1


Are you using the latest CVS snapshot?


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From tylermitchell at shaw.ca  Sat Aug  7 20:21:59 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] OGR: AVC driver issues (E00)
In-Reply-To: <20040807192103.GA26503@thuille.itc.it>
References: <20040807192103.GA26503@thuille.itc.it>
Message-ID: <200408071722.00257.tylermitchell@shaw.ca>

> to update the "global" data set for GRASS I am trying to
> import an E00 file. After using 'avcimport' to create
> a binary coverage, OGR seems to have troubles (was working
> some month ago):

Worked for me.  Do we need to nail down versions?

tyler:/data2/map_data/global/carbon> avcimport olson-carbon.e00 olson-carbon
tyler:/data2/map_data/global/carbon> ogrinfo olson-carbon
Had to open data source read-only.
INFO: Open of `olson-carbon'
using driver `AVCBin' successful.
1: ARC (Line String)
2: CNT (Point)
3: LAB (Point)
4: PAL (Polygon)
tyler:/data2/map_data/global/carbon> ogrinfo olson-carbon ARC -summary
Had to open data source read-only.
INFO: Open of `olson-carbon'
using driver `AVCBin' successful.

Layer name: ARC
Geometry: Line String
Feature Count: 15750
Extent: (-180.000000, -89.500000) - (179.999969, 90.499985)
Layer SRS WKT:
(unknown)
UserId: Integer (0.0)
FNODE#: Integer (0.0)
TNODE#: Integer (0.0)
LPOLY#: Integer (0.0)
RPOLY#: Integer (0.0)


On August 7, 2004 12:21 pm, Markus Neteler wrote:
> Dear list members,
>
> to update the "global" data set for GRASS I am trying to
> import an E00 file. After using 'avcimport' to create
> a binary coverage, OGR seems to have troubles (was working
> some month ago):
>
> ogrinfo -summary olson ARC
> Had to open data source read-only.
> INFO: Open of `olson'
> using driver `AVCBin' successful.
>
> Layer name: ARC
> Geometry: Line String
> Feature Count: 15750
> Extent: (-170128861896635013341904755760727851008.000000,
> -170140544564566716704068949377468596224.000000) - (0.000000, 0.000000)
> Layer SRS WKT:
> (unknown)
> UserId: Integer (0.0)
> FNODE#: Integer (0.0)
> TNODE#: Integer (0.0)
> LPOLY#: Integer (0.0)
> RPOLY#: Integer (0.0)
>
> The E00 file is here:
> http://cdiac.ornl.gov/ftp/ndp017/olson-carbon.e00.Z
> (1.2 MB)
> "Major World Ecosystem Complexes Ranked by
> Carbon in Live Vegetation" by Olson et al.
>
> Subsequently v.in.ogr doesn't import the file into GRASS 5.7.
>
> Thanks for any hints
>
>  Markus Neteler
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From StefanReisser at t-online.de  Sat Aug  7 21:48:21 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Different UTM Zones...
Message-ID: <1BtcnN-1Ji01I0@filter08.bbul.t-online.de>

Hi!

I have a huge GeoTiff image and I want to extract that part, that
perfectly matches a specific DEM file.
It's easy, as long as both the image and the DEM use the same projection
and geographic coordinate system. 

However, if the UTM zones are different, or the geographic coordinate
system is different, how can I compute the raster coordinates
of the DEM inside the GeoTiff image?

How can I convert coordinates between different UTM zones and
furthermore, how can I convert between Lat/Long and UTM coordinates?

Thanks for your help!

Stefan







From tylermitchell at shaw.ca  Sat Aug  7 23:35:51 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Different UTM Zones...
In-Reply-To: <1BtcnN-1Ji01I0@filter08.bbul.t-online.de>
References: <1BtcnN-1Ji01I0@filter08.bbul.t-online.de>
Message-ID: <200408072035.52090.tylermitchell@shaw.ca>

On August 7, 2004 06:48 pm, StefanReisser@t-online.de wrote:
> Hi!

Hi Stefan - lots of questions!  That's good :)

> I have a huge GeoTiff image and I want to extract that part, that
> perfectly matches a specific DEM file.
> It's easy, as long as both the image and the DEM use the same projection
> and geographic coordinate system.
>
> However, if the UTM zones are different, or the geographic coordinate
> system is different, how can I compute the raster coordinates
> of the DEM inside the GeoTiff image?
>
> How can I convert coordinates between different UTM zones and
> furthermore, how can I convert between Lat/Long and UTM coordinates?

A Proj4 utility called cs2cs (coordinate system 2 coordinate system) will 
probably do the trick for you, unless you want to actually reproject your 
datasets.

Get the extent of the DEM and put the pair of coordinates (one x y pair per 
line) into a text file.  Then run cs2cs with a few options to have those 
coordinates reprojected and printed to your screen.

For example:
Contents of utm.txt (easting, northing)
--------------
5500000 450000
--------------

Project from one UTM zone to another:
> cs2cs +proj=utm +zone=10 +to +proj=utm +zone=11 utm.txt
Outputs:
4649861.81      414740.36 0.00  (0.00 is elevation which I left blank)

To project from UTM to lat/long:
> cs2cs +proj=utm +zone=10 +ellps=GRS80 +to +proj=latlong utm.txt
123d41'33.592"W 49d39'1.696"N 0.000

If your file has y then x (as opposed to x then y which is default) add the 
option "-r" to the command.

So using cs2cs you should be able to get the projwin coordinates you need to 
use gdal_translate to cut out a piece of an image you are interested in.
> gdal_translate -projwin <upper left x> <upper left y> <lower right x>< lower 
right y> image1.tif clipped.tif
Will clip the area you want.

You could then, optionally reproject  from one coordinate system to another 
using gdalwarp.

Let us know if you need more help using these utilities.

Enjoy.

Tyler

From StefanReisser at t-online.de  Sun Aug  8 00:17:11 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Different UTM Zones...
Message-ID: <1Btf7P-19roUi0@filter08.bbul.t-online.de>

Hi Tyler!

At first I want to thank you for the quick response!
However, I do not want to use existing utilites, but I want to write the
code by myself and integrate it into an application.
I found some interesting information on the GDAL webpage.
Am I right, that the OGRSpatialReference and the
OGRCoordinateTransformation classes provide services both to transform
between lat/long and projected coordinates and between different
projected coordinate systems?

Thanks for your help!

Kind regards,

Stefan



From tylermitchell at shaw.ca  Sun Aug  8 00:52:43 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Different UTM Zones...
In-Reply-To: <1Btf7P-19roUi0@filter08.bbul.t-online.de>
References: <1Btf7P-19roUi0@filter08.bbul.t-online.de>
Message-ID: <200408072152.43198.tylermitchell@shaw.ca>

> At first I want to thank you for the quick response!

Any time.

> However, I do not want to use existing utilites, but I want to write the
> code by myself and integrate it into an application.
> I found some interesting information on the GDAL webpage.
> Am I right, that the OGRSpatialReference and the
> OGRCoordinateTransformation classes provide services both to transform
> between lat/long and projected coordinates and between different
> projected coordinate systems?

Well, that will work for your vector stuff anyway.  Spatial reference systems 
in general are served by GDAL's OSR class, if I recall correctly.

Tyler

From neteler at itc.it  Sun Aug  8 12:53:18 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:21 2007
Subject: [GRASSLIST:4128] Re: [Gdal-dev] Re: BSQ import question
In-Reply-To: <20040807195739.GA8415@ak4719.spb.edu>
References: <20040807195739.GA8415@ak4719.spb.edu>
Message-ID: <20040808165318.GB9286@thuille.itc.it>

On Sat, Aug 07, 2004 at 11:57:39PM +0400, Andrey Kiselev wrote:
> On Wed, Aug 04, 2004 at 06:11:35PM +0200, Markus Neteler wrote:
> > The global land cover file is at:
> >  ftp://ftp.glcf.umiacs.umd.edu/glcf/Global_Land_Cover/Global/gl-latlong-1km-landcover/
> > 
> >  Information
> >  Image Size: 				43200 Pixels 21600 Lines 
> >  Quantization:			    8-bit unsigned integer
> >  Output Georeferenced Units: LONG/LAT E019
> >  Projection:    				Geographic (geodetic)
> >  Earth Ellipsoid:			Sphere, rad 6370997 m 
> >  Upper Left Corner:			180d00'00.00" W Lon90d00'00.00" N Lat
> >  Lower Right Corner:			180d00'00.00" E Lon 90d00'00.00" S Lat
> >  Pixel Size (in Degrees):	0.00833 Lon 0.00833 Lat
> >  (Equivalent Deg,Min,Sec):	0d00'30.00"0d00'30.00" 
> >  UpLeftX:					-180 
> >  UpLeftY:      				90
> >  LoRightX:        			180
> >  LoRightY:      				-90
> > 
> > 
> > -> note the Sphere!
> > This is relevant for the definition of the location.
> > See 'gl-latlong-1km-landcover.grasslocation.txt' attachment for details.
> > 
> > > Some of you are probably familiar with this.  Assuming this, I
> > > have a few questions from GRASS 5.3.
> > [...]
> > > Any ideas?  Has anyone worked with this data set?  I'm running this on
> > > a linux box, if it matters.
> > 
> > Use r.in.gdal instead. It's way easier. You just have to generate
> > a BSQ ENVI header file, then import the map (find attached the file).
> > I hope I got that file right, following
> >  http://glcf.umiacs.umd.edu/data/guide/fileformat/bsq.shtml
> >  => RSI ENVI 3.6
> >     However, I didn't set bands = 14 but bands = 1
> > 
> > Now check with 'gdalinfo':
> > gdalinfo -mm gl-latlong-1km-landcover.bsq
> > Driver: ENVI/ENVI .hdr Labelled
> > Size is 43200, 21600
> > Coordinate System is:
> > LOCAL_CS["Geographic Lat/Lon",
> >     UNIT["Meter",1]]
> > Origin = (-180.000000,90.000000)
> > Pixel Size = (0.00833333,-0.00833333)
> > Corner Coordinates:
> > Upper Left  (-180.0000000,  90.0000000)
> > Lower Left  (-180.0000000, -90.0000000)
> > Upper Right ( 180.0000000,  90.0000000)
> > Lower Right ( 180.0000000, -90.0000000)
> > Center      (  -0.0000000,   0.0000000)
> > Band 1 Block=43200x1 Type=Byte, ColorInterp=Undefined
> >     Computed Min/Max=0.000,13.000
> > 
> > IMHO the projection is not detected completely by GDAL,
> > or should it be LOCAL_CS?
> 
> Markus,
> 
> I can't reproduce your result. I have the following with your .hdr file:
> 
> $ gdalinfo gl-latlong-1km-landcover.bsq 
> Driver: ENVI/ENVI .hdr Labelled
> Size is 43200, 21600
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AXIS["Lat",NORTH],
>     AXIS["Long",EAST],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-180.000000,90.000000)
> Pixel Size = (0.00833333,-0.00833333)
> Corner Coordinates:
> Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
> Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
> Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
> Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
> Center      (  -0.0000000,   0.0000000) (  0d 0'0.00"W,  0d 0'0.00"N)
> Band 1 Block=43200x1 Type=Byte, ColorInterp=Undefined
>   Description = Band 1
> 
> 
> Are you using the latest CVS snapshot?

Andrey,

yes: latest and greatest GDAL and PROJ4 CVS (as always).
I'll double-check and recompile from scratch, maybe
you could send me your ENVI hdr file off-list? Perhaps
an issue of caps letters?

Markus
 
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From neteler at itc.it  Sun Aug  8 13:06:11 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] gdal and libgrass
In-Reply-To: <20040807180020.GE1362@intevation.de>
References: <20040806113714.GK24023@intevation.de>
	<20040806115939.GB13413@thuille.itc.it>
	<20040806123229.GA25320@intevation.de>
	<20040807171946.GA24442@thuille.itc.it>
	<20040807180020.GE1362@intevation.de>
Message-ID: <20040808170611.GA9315@thuille.itc.it>

On Sat, Aug 07, 2004 at 08:00:20PM +0200, Silke Reimer wrote:
> On Sat, Aug 07, 2004 at 07:19:46PM +0200, Markus Neteler wrote:
> > On Fri, Aug 06, 2004 at 02:32:29PM +0200, Silke Reimer wrote:
> > > On Fri, Aug 06, 2004 at 01:59:39PM +0200, Markus Neteler wrote:
> > > > On Fri, Aug 06, 2004 at 01:37:14PM +0200, Silke Reimer wrote:
> > > > > 2. libgrass is not yet included into the debian grass package (see [1])
> > > > 
> > > > There is another option: Radim Blazek wrote a new GDAL/GRASS driver
> > > > (see QGIS project for details). Frank considers to replace the old driver.
> > > > The new driver uses the GRASS libs directly, so the external 'libgrass'
> > > > is no longer needed then.
> > > 
> > > OK. This seems to be a good solution. Nevertheless this means that I
> > > will have to wait before I can include grass support into gdal,
> > > right?
> > [...]
> > > 
> > > I can not wait much longer until I build a new gdal package since
> > > debian sarge will be freezed in short time. So appearently grass
> > > support will not be included in debian sarge but in the debian
> > > version which comes next.
> > 
> > How much time is left to replace the GDAL/GRASS driver to get
> > it into Debian? It's important also for QGIS and useful for
> > MapServer.
> > I don't know when Frank will be back, but replacing it should
> > not ne too much work as Radim provided diff files.
> 
> OK. I misunderstood the situation: The patch from Radim is already
> the native GRASS-driver for gdal?

Right.
Frank received the latest version, should be

wget http://mpa.itc.it/radim/qgis/gdal/configure.in.patch2
wget http://mpa.itc.it/radim/qgis/gdal/grassdataset.cpp3
 
> Even then I hesitate to apply it for the next package update. One
> reason is that the debian people have already frozen parts of sarge.
> Such it becomes more difficult to get new things into sarge.

No problem for me, I'm no Debian user (those might be unhappy).

> Another reason is that I don't know how stable the patch is. Perhaps
> you can give me some more information about this. But I never tried
> it and I don't no whether it will break other things.

I'm using it daily here. It's as stable as the libgrass version
(IMHO) but you may ask the author. And it's naturally way easier
to install.

> My proposition: I will prepare a new gdal package today (I will do
> this anyway) but without the grass-patch. When there is time
> left next week I will try out the grass-patch and perhaps prepare a
> new package of gdal with grass support. I am not too confident
> though that this package will be into the next stable release of
> debian.

When might it reach a stable release of debian then (just to get an
idea)? 

Markus


From neteler at itc.it  Sun Aug  8 13:09:43 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] OGR: AVC driver issues (E00)
In-Reply-To: <200408071722.00257.tylermitchell@shaw.ca>
References: <20040807192103.GA26503@thuille.itc.it>
	<200408071722.00257.tylermitchell@shaw.ca>
Message-ID: <20040808170943.GB9315@thuille.itc.it>

On Sat, Aug 07, 2004 at 05:21:59PM -0700, Tyler Mitchell wrote:
> > to update the "global" data set for GRASS I am trying to
> > import an E00 file. After using 'avcimport' to create
> > a binary coverage, OGR seems to have troubles (was working
> > some month ago):
> 
> Worked for me.  Do we need to nail down versions?

I'm using yesterday's GDAL-CVS on a Mandrake 10 box.
Recompiled from scratch.

gcc version 3.3.2 (Mandrake Linux 10.0 3.3.2-6mdk)
Linux dandre2.itc.it 2.6.3-13mdk #1 Tue May 18 18:49:17 EDT 2004 i686 unknown unknown GNU/Linux


Any tricks to get that debugged (CPL_DEBUG is not too chatty)?

> tyler:/data2/map_data/global/carbon> avcimport olson-carbon.e00 olson-carbon
> tyler:/data2/map_data/global/carbon> ogrinfo olson-carbon
> Had to open data source read-only.
> INFO: Open of `olson-carbon'
> using driver `AVCBin' successful.
> 1: ARC (Line String)
> 2: CNT (Point)
> 3: LAB (Point)
> 4: PAL (Polygon)
> tyler:/data2/map_data/global/carbon> ogrinfo olson-carbon ARC -summary
> Had to open data source read-only.
> INFO: Open of `olson-carbon'
> using driver `AVCBin' successful.
> 
> Layer name: ARC
> Geometry: Line String
> Feature Count: 15750
> Extent: (-180.000000, -89.500000) - (179.999969, 90.499985)
> Layer SRS WKT:
> (unknown)
> UserId: Integer (0.0)
> FNODE#: Integer (0.0)
> TNODE#: Integer (0.0)
> LPOLY#: Integer (0.0)
> RPOLY#: Integer (0.0)

But the integer length looks short even here.

Markus 
 
> On August 7, 2004 12:21 pm, Markus Neteler wrote:
> > Dear list members,
> >
> > to update the "global" data set for GRASS I am trying to
> > import an E00 file. After using 'avcimport' to create
> > a binary coverage, OGR seems to have troubles (was working
> > some month ago):
> >
> > ogrinfo -summary olson ARC
> > Had to open data source read-only.
> > INFO: Open of `olson'
> > using driver `AVCBin' successful.
> >
> > Layer name: ARC
> > Geometry: Line String
> > Feature Count: 15750
> > Extent: (-170128861896635013341904755760727851008.000000,
> > -170140544564566716704068949377468596224.000000) - (0.000000, 0.000000)
> > Layer SRS WKT:
> > (unknown)
> > UserId: Integer (0.0)
> > FNODE#: Integer (0.0)
> > TNODE#: Integer (0.0)
> > LPOLY#: Integer (0.0)
> > RPOLY#: Integer (0.0)
> >
> > The E00 file is here:
> > http://cdiac.ornl.gov/ftp/ndp017/olson-carbon.e00.Z
> > (1.2 MB)
> > "Major World Ecosystem Complexes Ranked by
> > Carbon in Live Vegetation" by Olson et al.
> >
> > Subsequently v.in.ogr doesn't import the file into GRASS 5.7.
> >
> > Thanks for any hints
> >
> >  Markus Neteler
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@xserve.flids.com
> > http://xserve.flids.com/mailman/listinfo/gdal-dev

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From Silke.Reimer at intevation.de  Sun Aug  8 16:31:33 2004
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] gdal and libgrass
In-Reply-To: <20040808170611.GA9315@thuille.itc.it>
References: <20040806113714.GK24023@intevation.de>
	<20040806115939.GB13413@thuille.itc.it>
	<20040806123229.GA25320@intevation.de>
	<20040807171946.GA24442@thuille.itc.it>
	<20040807180020.GE1362@intevation.de>
	<20040808170611.GA9315@thuille.itc.it>
Message-ID: <20040808203133.GE3170@intevation.de>

On Sun, Aug 08, 2004 at 07:06:11PM +0200, Markus Neteler wrote:
> > > I don't know when Frank will be back, but replacing it should
> > > not ne too much work as Radim provided diff files.
> > 
> > OK. I misunderstood the situation: The patch from Radim is already
> > the native GRASS-driver for gdal?
> 
> Right.
> Frank received the latest version, should be
> 
> wget http://mpa.itc.it/radim/qgis/gdal/configure.in.patch2
> wget http://mpa.itc.it/radim/qgis/gdal/grassdataset.cpp3

OK. When I apply these patches I don't need libgrass any more. This
is true.  But nevertheless I need some grass57 libraries on my
filesystem at compile time - and since they are not part of debian I
can't compile gdal with grass support for debian.

>  
> > Even then I hesitate to apply it for the next package update. One
> > reason is that the debian people have already frozen parts of sarge.
> > Such it becomes more difficult to get new things into sarge.
> 
> No problem for me, I'm no Debian user (those might be unhappy).
> 
> > Another reason is that I don't know how stable the patch is. Perhaps
> > you can give me some more information about this. But I never tried
> > it and I don't no whether it will break other things.
> 
> I'm using it daily here. It's as stable as the libgrass version
> (IMHO) but you may ask the author. And it's naturally way easier
> to install.
> 
> > My proposition: I will prepare a new gdal package today (I will do
> > this anyway) but without the grass-patch. When there is time
> > left next week I will try out the grass-patch and perhaps prepare a
> > new package of gdal with grass support. I am not too confident
> > though that this package will be into the next stable release of
> > debian.
> 
> When might it reach a stable release of debian then (just to get an
> idea)? 

The next stable release is planned to be in September. Considering
the above problems, grass support will probably not be in the gdal
library of sarge. The next stable release after sarge will be in one
year when the debian people are very fast. I believe though that we
will have to wait two or three years until the next stable release
will come up.

	Silke

-- 
Silke Reimer

Intevation GmbH                      http://intevation.de/
FreeGIS                                http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040808/bdfd0663/attachment.bin
From StefanReisser at t-online.de  Sun Aug  8 22:58:13 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] One more time: Merging DEMs that are in different UTM
	zones...
Message-ID: <1Bu0MX-0cX2uG0@filter08.bbul.t-online.de>

Hi!

I have one more question concerning the merging of DEM files that are in
different UTM zones.

Let's consider I have a number of DEM files that cover a huge area that
crosses some UTM zone borders.
To gather all the data, I have a huge 2D array that later on will
contain all the height information. 
The reference x point for the data is the UTM corner coordinate of the
leftmost DEM. 
That corresponds to the first column of the array (raster coordinate).

If I now want to get in the data of a DEM that is in a different UTM
zone than the leftmost DEM, is it sufficient to just
convert this DEMs UTM coordinates to the UTM coordinates of the leftmost
reference DEM and then add the data (after 
having computed the corresponding raster coordinates? Or is there a
mismatch between DEMs from different zones?
What do I have to take care of?

Thanks for your help.

Kind regards,

Stefan



From StefanReisser at t-online.de  Sun Aug  8 23:43:43 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Reading USGS ASCII DEMs
Message-ID: <1Bu14Z-06J1Xs0@cmpmail00.bbul.t-online.de>

Hi everybody!

How can I figure out what 7.5" section I am in for a given file?
Or, to put it differently, how can I get the lat/long coordinates of the
corners of the quadrangle
("real corners") in the DEM file?

Thanks a lot!

Kind regards,

Stefan



From schut at sarvision.com  Mon Aug  9 04:20:07 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] ./configure setting GEOS_INC without -I
Message-ID: <200408091020.08223.schut@sarvision.com>

Dear dev's,

when using the --with-geos switch, GEOS_INC in GDALmake.opt is set to 
'/usr/local/include'. At which my gcc segfaults because it can't find the 
file /usr/local/include... This can of course be fixed by adding '-I' before 
the '/usr/local/inclue'.

Btw, I suppose gdal's geos support is based on geos-1.0, not on current cvs 
(as they are changing API...)?
-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From Silke.Reimer at intevation.de  Mon Aug  9 04:48:58 2004
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: the debian directory needs a resync (and a little
	update)
In-Reply-To: <200408062056.50058.alexamici@fastwebnet.it>
References: <200407312051.09036.alexamici@fastwebnet.it>
	<20040806112048.GH24023@intevation.de>
	<200408062056.50058.alexamici@fastwebnet.it>
Message-ID: <20040809084858.GF3170@intevation.de>

On Fri, Aug 06, 2004 at 08:56:50PM +0200, Alessandro Amici wrote:
> 
> - add support for netcdf and sqlite.
> - move tiff support to external library (finally added to debian!)
> 
> diff -ur ../debian/gdal-1.2.0/debian/control debian/control
> --- ../debian/gdal-1.2.0/debian/control	2004-07-31 20:30:08.000000000 +0200
> +++ debian/control	2004-08-06 20:50:46.000000000 +0200
> @@ -2,7 +2,7 @@
>  Section: science
>  Priority: extra
>  Maintainer: Silke Reimer (MoinMoin) <silke@intevation.de>
> -Build-Depends: debhelper (>> 4.1.25), zlib1g-dev, libcfitsio-dev, libpng12-dev, libjpeg62-dev, libungif4-dev, libhdf4g-dev, postgresql-dev, postgresql-client, libxerces21-dev, unixodbc-dev, python-dev, python-numeric, doxygen, d-shlibs
> +Build-Depends: debhelper (>> 4.1.25), zlib1g-dev, libcfitsio-dev, netcdfg-dev, libtiff4-dev, libpng12-dev, libjpeg62-dev, libungif4-dev, libhdf4g-dev, postgresql-dev, postgresql-client, libxerces21-dev, unixodbc-dev, libsqlite0-dev, python-dev, python-numeric, doxygen, d-shlibs
>  Standards-Version: 3.6.1
>  
>  Package: libgdal1
> diff -ur ../debian/gdal-1.2.0/debian/rules debian/rules
> --- ../debian/gdal-1.2.0/debian/rules	2004-07-31 20:30:08.000000000 +0200
> +++ debian/rules	2004-07-31 21:33:01.000000000 +0200
> @@ -20,9 +20,9 @@
>  		--mandir=\$$\{prefix\}/share/man \
>  		--with-threads \
>  		--with-grass=no \
> -		--with-libtiff=internal \
>  		--with-geotiff=internal \
> -		--with-xerces 
> +		--with-xerces \
> +		--with-sqlite
>  
>  	# Patch the generated libtool to avoid passing -rpath when linking,
>  	# and to explicitly link libraries against the libraries they

Thanks Alessandro. I added all your changes. As soon as Frank is
back from vacation I will hopefully get back the possibilty to write
to CVS. Then I will check in my changes.

Many greetings,

	Silke

-- 
Silke Reimer

Intevation GmbH                      http://intevation.de/
FreeGIS                                http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040809/1e836f7c/attachment.bin
From neteler at itc.it  Mon Aug  9 07:49:53 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:21 2007
Subject: [GRASSLIST:4128] Re: [Gdal-dev] Re: BSQ import question
In-Reply-To: <20040809035610.GA4131@ak4719.spb.edu>
References: <20040807195739.GA8415@ak4719.spb.edu>
	<20040808165318.GB9286@thuille.itc.it>
	<20040808171615.GA23593@ak4719.spb.edu>
	<20040808204251.GA11395@thuille.itc.it>
	<20040809035610.GA4131@ak4719.spb.edu>
Message-ID: <20040809114953.GO14097@thuille.itc.it>

Andrey,

after completely cleanup up all GDAL and PROJ related files and
another fresh recompilation, the ENVI problem is solved.

No idea what went wrong but anyway...
The LatLong header is recognized now.

Thanks

Markus



From warmerdam at pobox.com  Mon Aug  9 10:15:46 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problem in Ehdr (ESRI .hdr) reader
In-Reply-To: <003501c47b27$9d297f60$959877c6@cts1149>
References: <003501c47b27$9d297f60$959877c6@cts1149>
Message-ID: <41178712.9070301@pobox.com>

Thom DeCarlo wrote:
> I was trying to process some SRTM1 data that I got from USGS. These files
> already had the .hdr, .prj, and other header files so I didn't use Markus'
> script to generate the header files. 
> 
> What I found was that gdal does not recognize the UNITS field in the .prj
> file and therefore incorrectly interprets the ULXMAP, ULYMAP, XDIM, and YDIM
> values in the .hdr file. (Converting the files using Erdas produced
> similarly bad results.) 
> 
> I'm not sure if this covers all the allowed values, but it seems that gdal
> should interpret at least these:
> UNITS <DD | DM | DS> 
> 
> Where DD = decimal degrees, DM = decimal minutes, and DS = decimal seconds.
> (DS is the important one for me.)
> 
> I've attached the header files for one of the datasets, but the actual data
> is too big to email.
> 
> I've tried looking around at the code, but I can't immediately see where all
> the needed changes would occur to support this new field. Of course, I could
> simply be misusing the gdal translator. If so, can you tell me how to read
> these?

Thom,

I took a quick peek at this.  The solution would appear to be for the code
for reading ESRI .prj files i gdal/ogr/ogr_srs_esri.cpp to read the units and
insert the appropriate definition for geographic coordinate systems.  However,
this will do little good for now since none of GDAL/OGR supports units other
than decimal degrees for geographic coordinates at this time.   This would be
rather a large problem to solve.

The more pragmatic workaround would be to have the ESRI .HDR driver adjust
the coordinates appropriately if they are DS or DM; however, that is a messy
and incomplete solution so I am hesitant to spend a bunch of time on it just
now.

I have stashed your .prj file and headers in my sample tree but I don't
anticipate working on the issue in the near future.  You will need to devide
the coordinate values in the .hdr file by 3600 manually.

Sorry about that, and thanks for the report.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bfraser at geoanalytic.com  Mon Aug  9 10:18:35 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
References: <20040805132646.7222.qmail@web40206.mail.yahoo.com><011f01c47af7$985bf290$020002c0@SHARK>
	<20040807103414.GD9857@ak4719.spb.edu>
Message-ID: <007401c47e1b$c1f87980$020002c0@SHARK>

Andrey,

Sorry about not supplying more info; I thought it was a known problem.

I've got Windows 2000 Service Pack 4, GDAL 1.2.1, and LizardTech's
Geo_DSDK_4.0.9.713.

When I do a gdalinfo on a single band MrSID file, it works fine.  However,
an RGB MrSID will cause gdalinfo (and the other GDAL utility programs) to
crash.  The debugger indicates a memory access problem at line 1744 of
mrsiddataset.cpp:

    for( iBand = 1; iBand <= poDS->nBands; iBand++ )
        poDS->SetBand( iBand, new MrSIDRasterBand( poDS, iBand ) );

Here's portions of my nmake.opt file:
----------------------------------------------------------------------------
-------
# Uncomment the first for an optimized build or the second for a debug
build.
#OPTFLAGS= /nologo /Ox /MD /EHsc
OPTFLAGS= /nologo /Zi /Fd$(GDAL_ROOT)\gdal.pdb  /MD /EHsc
    :
# Uncomment the following for MrSID support.
# You will likely require /MD and /EHsc in OPTFLAGS.
MRSID_DIR = C:\platforms\MrSidDecodeSDK\VC6\Geo_DSDK_4.0.9.713
#MRSID_INCLUDE = -I$(MRSID_DIR)\include
#MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib \
#  MrSIDDecode_md.lib lt_xTrans_md.lib advapi32.lib user32.lib
# Uncomment, if you have DSDK version 3.1.x
#MRSID_FLAGS = -DMRSID_DSDK_VERSION_31
# Uncomment, if you have DSDK version 3.2.x
#MRSID_FLAGS = -DMRSID_DSDK_VERSION_32

# Following suitable for the MrSID DSDK version 4.0.x.
MRSID_INCLUDE = -I$(MRSID_DIR)\include\base -I$(MRSID_DIR)\include\support \
  -I$(MRSID_DIR)\include\metadata \
  -I$(MRSID_DIR)\include\mrsid_readers \
  -I$(MRSID_DIR)\include\j2k_readers
MRSID_LIB = $(MRSID_DIR)\lib\Release_md\lti_dsdk_dll.lib \
   advapi32.lib user32.lib
MRSID_FLAGS = -DMRSID_DSDK_VERSION_40
    :
----------------------------------------------------------------------------
-------


Here's the output from mrsidinfo (the LizardTech utility):
----------------------------------------------------------------------------
-------
mrsidinfo: (c) 2003 LizardTech, Inc. All rights reserved.

basic image info:
  format:            MRSID
  width:             2356
  height:            1666
  nband:             3
  color space:       RGB
  datatype:          uint8
  dyn range min:     (natural)
  dyn range max:     (natural)
  background color:  (255, 53, 217)
  nodata color:      (0, 0, 0)
  metadata records:  22

geo coordinate info:
  X UL:              895118.376621
  Y UL:              4162705.150232
  X res:             17.225241
  Y res:             -17.219537
  X rot:             0.000000
  Y rot:             0.000000

geo points (pixel centers):
  upper left:        (895118.376621, 4162705.150232)
  upper right:       (935683.819647, 4162705.150232)
  lower left:        (895118.376621, 4134034.621460)
  lower right:       (935683.819647, 4134034.621460)
  center:            (915401.098134, 4148369.885846)

MrSID-specific image info:
  number of levels:  6
  is locked:         false
  file version:      1.0.1.

MrSID/MG2-specific image info:
  is dithered:       false
----------------------------------------------------------------------------
-------

Any help would be appreciated...

Thanks!
Brent Fraser


----- Original Message ----- 
From: "Andrey Kiselev" <dron@ak4719.spb.edu>
To: <gdal-dev@xserve.flids.com>
Sent: Saturday, August 07, 2004 4:34 AM
Subject: Re: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK


> On Thu, Aug 05, 2004 at 08:22:10AM -0600, Brent Fraser wrote:
> > I've successfully compiled GDAL 1.2.1 with MrSID 4.x DSDK (Win2k,
> > VC++6), but it will not work with RGB (i.e more than one band) MrSID
> > images.  I think Andrey and others are fixing this.
>
> Brent,
>
> Why do you think it doesn't work for RGB? For me it works just fine.
> Could you be more detailed in this bug description?
>
> Andrey
>
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From bfraser at geoanalytic.com  Mon Aug  9 11:12:01 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK
References: <20040805144612.17744.qmail@web40206.mail.yahoo.com><126601c47b00$e1f51bd0$020002c0@SHARK>
	<20040807103131.GC9857@ak4719.spb.edu>
Message-ID: <018d01c47e23$38f6f3c0$020002c0@SHARK>

Andrey,

  The RGB crashing problem still occurs with gdal-cvs-20040809

Brent

----- Original Message ----- 
From: "Andrey Kiselev" <dron@ak4719.spb.edu>
To: <gdal-dev@xserve.flids.com>
Sent: Saturday, August 07, 2004 4:31 AM
Subject: Re: [Gdal-dev] Problems compiling GDAL with MrSID 4.x DSDK


> On Thu, Aug 05, 2004 at 09:28:39AM -0600, Brent Fraser wrote:
> >   Here are the changes I had to make to GDAL 1.2.1:
> > 
> > To get it to compile, I had to make a small change in mrsiddataset.cpp.
> > Line 1216:
> > 
> > #include "lti_bufferData.h"
> > 
> > was changed to
> > 
> > #include "lti_sceneBuffer.h"
> > 
> > 
> > Also, nmake.opt, lines 110,111:
> > 
> > MRSID_LIB = /LIBPATH:$(MRSID_DIR)\lib\Release_md \
> >   lti_dsdk.lib advapi32.lib user32.lib
> 
> Guys, sorry for late response, I was in the business trip during this
> week.
> 
> I have committed the new version of the MrSID driver ported to the latest
> DSDK. There is important bug fixed (the last strip of image was not
> read), so I'm recommend updating from CVS for all users of the new MrSID
> DSDK.
> 
> Andrey
> 
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From StefanReisser at t-online.de  Mon Aug  9 11:48:25 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Getting the 7.5" Section
Message-ID: <1BuCNt-1QC1WS0@filter08.bbul.t-online.de>

Hi everybody!

How can I figure out what 7.5" section I am in for a given file?
Or, to put it differently, how can I get the lat/long coordinates of the
corners of the quadrangle
("real corners") in the DEM file?

Thanks a lot!

Kind regards,

Stefan




From StefanReisser at t-online.de  Mon Aug  9 12:27:45 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Using OGRCoordinateTransformation...
Message-ID: <1BuCzx-0gLWy00@cmpmail00.bbul.t-online.de>

Hi!

Is the proj4 library that is needed for the OGRCoordinateTransformation
included in the GDAL Library. 
Or do I have to download and install the proj4 library externally?

Thanks and kind regards,

Stefan



From debian at adkgis.org  Mon Aug  9 14:38:19 2004
From: debian at adkgis.org (Steve Halasz)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: gdal and libgrass
Message-ID: <1092076699.3639.38.camel@marcy>

Silke,

I just joined this mailing list because I saw this thread on the web.
I'm the debian maintainer of qgis, which depends on gdal. I've been
trying to get qgis's grass plugins into debian for a while. They depend
on Radim's patches for gdal, which depend on grass 5.7. I believe I am
within a week of having a suitable grass5.7 package. Hopefully Jochen
will sponsor it for me.

I also have used your gdal package as a starting point for successfully
building a version with Radim's grass patches included. I aim to provide
you with those changes when the grass package is ready. Right now
they're a little broken because I'm in the middle of things.

There is also a potential problem with circular dependencies since
grass5.7 depends on gdal and now gdal will depend on grass5.7. So far
I've been able to build in spite of this by starting with current
version of gdal, building grass5.7, and then building the new version of
gdal depending on grass5.7. But I wonder what potential there is for
trouble with this down the road.

It would be cool if this could all get into the next release. But I
suspect that most debian gis users are running testing/unstable anyway.

Thanks for packaging gdal and I'm psyched that you're keen to include
grass support.

Steve Halasz


From Silke.Reimer at intevation.de  Mon Aug  9 15:04:53 2004
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: gdal and libgrass
In-Reply-To: <1092076699.3639.38.camel@marcy>
References: <1092076699.3639.38.camel@marcy>
Message-ID: <20040809190453.GA18203@intevation.de>

Hi Steve,

On Mon, Aug 09, 2004 at 02:38:19PM -0400, Steve Halasz wrote:
> Silke,
> 
> I just joined this mailing list because I saw this thread on the web.
> I'm the debian maintainer of qgis, which depends on gdal. I've been
> trying to get qgis's grass plugins into debian for a while. They depend
> on Radim's patches for gdal, which depend on grass 5.7. I believe I am
> within a week of having a suitable grass5.7 package. Hopefully Jochen
> will sponsor it for me.

This would be really cool! Thank you very much for this effort. Are
these packages those that are available under [1]? 

> 
> I also have used your gdal package as a starting point for successfully
> building a version with Radim's grass patches included. I aim to provide
> you with those changes when the grass package is ready. 

This would be nice. BTW: Jochen just uploaded a new gdal-debian
package. The source should be availabe in a few hours. Such you can
do your diff on the actual package.

> There is also a potential problem with circular dependencies since
> grass5.7 depends on gdal and now gdal will depend on grass5.7. So far
> I've been able to build in spite of this by starting with current
> version of gdal, building grass5.7, and then building the new version of
> gdal depending on grass5.7. But I wonder what potential there is for
> trouble with this down the road.

It would be good when those resources that are necessary to build
gdal-support could be packaged into an extra package (something like
grass-dev). Thus I will not need the whole grass-pacakge to build
gdal (which seems to be overkill to me). I don't know exactly whether
this could be possible but perhaps you can think about it.

> 
> It would be cool if this could all get into the next release. But I
> suspect that most debian gis users are running testing/unstable anyway.

Yes, that's true. I think it will not be possible to get grass 5.7
into sarge since the debian people plan to freeze at August the
17th. Since you need 10 days to drop from unstable to testing it
will be nearly impossible to get grass 5.7 into sarge.

> 
> Thanks for packaging gdal and I'm psyched that you're keen to include
> grass support.

Of course I will!

Greetings,

	Silke


[1] http://bullhorn.org/debian/

-- 
Silke Reimer

Intevation GmbH                      http://intevation.de/
FreeGIS                                http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040809/ecc80cd8/attachment.bin
From debian at adkgis.org  Mon Aug  9 15:47:40 2004
From: debian at adkgis.org (Steve Halasz)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: gdal and libgrass
In-Reply-To: <20040809190453.GA18203@intevation.de>
References: <1092076699.3639.38.camel@marcy>
	<20040809190453.GA18203@intevation.de>
Message-ID: <1092080860.3639.49.camel@marcy>

Silke,

On Mon, 2004-08-09 at 15:04, Silke Reimer wrote:
> 
> This would be really cool! Thank you very much for this effort. Are
> these packages those that are available under [1]? 
...
> [1] http://bullhorn.org/debian/

Yes, although the grass package there currently does not work at all due
to some hard-coded paths. I will upload newer packages to that location
soon though.

> It would be good when those resources that are necessary to build
> gdal-support could be packaged into an extra package (something like
> grass-dev). Thus I will not need the whole grass-pacakge to build
> gdal (which seems to be overkill to me). I don't know exactly whether
> this could be possible but perhaps you can think about it.

Yes, I intend to do this. Right now I'm thinking there will be a
libgrass5.7, libgrass5.7-dev, and grass5.7. I have yet to package a
library though, so we'll see how that goes.

Regards,
Steve


From bartvde at xs4all.nl  Tue Aug 10 02:09:05 2004
From: bartvde at xs4all.nl (bartvde@xs4all.nl)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] ogrtindex - mapserver
Message-ID: <14494.212.238.227.182.1092118145.squirrel@webmail.xs4all.nl>

Hi list,

I am using ogrtindex in conjunction with Mapserver and ran into a problem.

Ogrtindex writes e.g. the following in the location attribute:

location
=====================
d:\data\myshape.shp,0
etc.

This way Mapserver won't find the quadtree index file (qix) associated
with the shapefile (as it will look for d:\data\myshape.shp,0.qix).

I have to edit the tile-index and change it into:

location
=====================
d:\data\myshape
etc.

in order to have Mapserver use the quadtree index for the data shapefiles
(note d:\data\myshape.shp does not work either).

Is there an option in ogrtindex which I am missing?

Best regards,
Bart

From doneywhite at yahoo.com  Tue Aug  3 06:00:39 2004
From: doneywhite at yahoo.com (doney)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] how to get sun zenith angle of avhrr l1b data by GDAL
Message-ID: <loom.20040803T115733-446@post.gmane.org>

AVHRR L1B data store sun zenith angles, but GDAL Data model does not include 
this kind of information. I wonder how to get sun zenith angle of avhrr l1b 
data by GDAL.

Thanks a lot!
Doney


From jirifranc at centrum.cz  Tue Aug  3 08:31:56 2004
From: jirifranc at centrum.cz (jirifranc@centrum.cz)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Reprojection
Message-ID: <20040803123202Z2331899-337+45408@mail.centrum.cz>

  Hello,

example:
I have one old.shp file in 28404 projection and I have *.map file,
where I m using 28403 global projection. I want to use ogr2ogr file
to change projection of old.shp file from 28404 to 28403, but with the
same *.shp file name.
I need only change projection in old.shp (with ogr2ogr utility),
nothing more........

Which order I must write to do this?

Thank you.

  


--------------------
Leto a sport bez zabran s jednodennimi cockami Focus Dailies! Hrajte letn?
SMS hru o pulrocni zasobu cocek Focus Dailies! V?ce na http://user.centrum.cz/redir.php?url=http://www.cz.cibavision.com




From e.naasner at teamheese.de  Thu Aug  5 05:14:42 2004
From: e.naasner at teamheese.de (Erik Naasner)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] who can add some additions to ogr? (for money)
Message-ID: <B0E73F355D82C54C86B7BC13C70D95DC23B454@thw2svr04.teamheese.de>

hello,

i need to export/ import the following formats from/to postgres/postgis server:
- MapInfo (can be done with ogr2ogr)
- DGN V8
- DXF

the ogr2ogr program does most of the things i need. 
what has to be done is:
- add DGN V8 support
- add DXF support (i know about restrictions regarding gis and dxf ...)
- something like a ping function to a file to retrieve a list of the existing attributes and
- the possibility to select some of the attribute for the import to the database

cheers,
Erik

From jirifranc at centrum.cz  Fri Aug  6 05:12:20 2004
From: jirifranc at centrum.cz (jirifranc@centrum.cz)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GeoTiff reprojection
Message-ID: <20040806091220Z2331082-706+2421@mail.centrum.cz>

Hello,
I have a *.tiff file in projection 28459 and I need change it to projection 28403. So I'm wrote this:  

# gdalwarp -s_srs EPSG:28459 -t_srs EPSG:28403 -of GTiff a290035_002.tif new.tif

and it returned me this:

ERROR 6: EPSG PCS/GCS code 28459 not found in EPSG support files.  Is this a valid
EPSG coordinate system?
ERROR 1: Translating source or target SRS failed:
EPSG:28459

But I have defined this projection in epsg file. 
# Pulkovo 1942 / Gauss-Kruger zone59
<28459> +proj=tmerc +lat_0=0 +lon_0=-9 +k=1.000000 +x_0=59500000 +y_0=0 +ellps=krass +units=m +no_defs  no_defs <>


And when I use another file (in 28402) projection and try to change projection to 28403:  
# gdalwarp -s_srs EPSG:28402 -t_srs EPSG:28403 -of GTiff a320031_002.tif new.tif

it wrote me this:

Creating output file is that 1240P x 1240L.
:0...10...20...30...40...50...60...70...80...90...100 - done.
It made *.tiff of about 6MB long. But original *.tiff have  about 235kB.   

Could You help me, with both problems?
Thanks Jiri Franc.

--------------------
Chce? po??ta?ovou hru zdarma? Jen s vysokorychlostn?m internetem GTS ADSL GAME! Nav?c modem jen za 1 K?. http://user.centrum.cz/redir.php?url=http://www.gtsdoma.cz




From junm at comsine.co.uk  Tue Aug 10 11:05:39 2004
From: junm at comsine.co.uk (Ma Jun)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] BuildOverviews
Message-ID: <380-22004821015539202@comsine.co.uk>

Dear all,

I met some problems when using the Dataset's Method: BuildOverviews.

My aim is to use it for making small image of the original one.

1. Development environment is listed below,
Language: Python
IDE: PythonWin
Operation System: WindowsXP

2. Source code:

import gdal
import gdal.gdalnumeric
from math import *
from gdal.gdalconst import *
from gdal.ogr import *
from gdal.osr import *
import numarray
import numarray.nd_image

src_dem = gdal.Open(?test.tif?) # open the tif file
result = rc_dem.BuildOverviews(resampling="NEAREST" ,overviewlist
=[10] ,callback = callback) # build the overviews
if (result == gdal.CE_Failure):
 print "failed to build overviews"

# callback function
def callback(complete, msg, data):
 print complete, msg, data


It doesn?t work. The result is gdal.CE_Failure. The message returned
by callback function is ?0.0 None?.

The test data is a Landsat TIF file. I can open the file and read all
the bands, so the file should be okay. I?ve tried some other tif
files and varied the parameters: "NEAREST", "AVERAGE", "MODE" and
[2,4,8], [2,4,8,16,32,64]. I got the same result and callback message.

Did any one meet this problem before? Could you please give me some
ideas?

Thanks a lot.

Kind regards,

Jun



From warmerdam at pobox.com  Tue Aug 10 15:20:04 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GDAL Bugzilla
Message-ID: <41191FE4.5070708@pobox.com>

Folks,

I have discovered that the old GDAL Bugzilla instance is still reachable
at http://208.24.120.44/ and I have updated the GDAL bugzilla info accordingly.
I hope to get the bugzilla.remotesensing.org link pointing at it.

So, please feel free to file bugs there again.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dron at ak4719.spb.edu  Tue Aug 10 15:19:02 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] how to get sun zenith angle of avhrr l1b data by GDAL
In-Reply-To: <loom.20040803T115733-446@post.gmane.org>
References: <loom.20040803T115733-446@post.gmane.org>
Message-ID: <20040810191902.GA4722@ak4719.spb.edu>

On Tue, Aug 03, 2004 at 10:00:39AM +0000, doney wrote:
> AVHRR L1B data store sun zenith angles, but GDAL Data model does not
> include this kind of information. I wonder how to get sun zenith angle
> of avhrr l1b data by GDAL.

I can report these data using the metadata records. I shall try to
implement this feature at the end of the week.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From route at cae.com  Wed Aug 11 15:15:53 2004
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] RGB/RGBA driver
Message-ID: <719A38AB7279D511B91900D0B7444A9E0DD1D0B5@caemsx03.cae.ca>

Before reinenting the wheel, does somebody have a RGB/RGBA driver (SGI
format) ?

Thnaks,

Stephane

From jeremy at caltech.edu  Wed Aug 11 17:21:43 2004
From: jeremy at caltech.edu (Jeremy Gillula)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GDAL As A Local Map?
Message-ID: <03b701c47fe9$3807f690$c8fea8c0@Trekmap>

I'm looking for an open-source system I can use for storing and processing map data for an autonomous robot, and I was wondering if anyone on this mailing list could tell me if GDAL is the right solution for me.  There are three big requirements that I need:
1.  Writing/reading to the map should be very fast, since the robot will be filling the map with data in real time, and will be using the map to navigate in real time
2.  The map should support storing data in UTM coordinates (which I'm pretty sure GDAL will do) but should also feature a local-representation, so that instead of having a big map of everywhere the robot might travel (which would be on the order of 200 miles), I would use a smaller higher-resolution map (maybe 100 or 200m on a side) which I can translate (in a sort of scrolling window) as the robot moves.
3.  The map has multiple layers so I can store elevation data from different sensors.
If anyone has any comments on whether or not they think I can adapt GDAL to this purpose, I would very much appreciate it.

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040811/69fb48d4/attachment.html
From tjmitchell at riverside.bc.ca  Fri Aug 13 11:05:19 2004
From: tjmitchell at riverside.bc.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GDAL As A Local Map?
In-Reply-To: <007a01c480ac$822e0200$c8fea8c0@Trekmap>
Message-ID: <OF575E5D25.E15FE270-ON88256EEF.00521521-88256EEF.0052E139@Riverside.bc.ca>

Jeremy, interesting application. 
I think you could do some great stuff with GDAL-related libraries, you 
just to pick the right data format.  I mainly familiar with 1 or 3 bands 
(what I can "normal") imagery, but I know there are certains formats 
support by GDAL that do more than that.

How much of the data that is collected will be thrown out vs. be kept for 
long periods of time?  If you do need to keep just appending to a raster, 
there are at least two options in my mind.

The easiest (though may not most performance-effective) may be to use an 
ASCII-based format that GDAL can support.  That way your sensor data can 
be streamed out pretty quickly without a lot of format concerns - and you 
wouldn't need GDAL per se to do the work. 

Alternatively you could spit out new data into a new file every so often, 
then do a merge/mosaic of it back with the old set - hence updating and 
expanding it. 

Those are the ways I'd do it and thereby avoiding the need to programming 
with GDAL but still using related utilities (at least  until I realize 
that performance is pathetic).

I assume that using the GDAL libraries you can programmatically add row 
and columns of data to existing rasters, perhaps someone else can comment 
on that approach.

Tyler

"Jeremy Gillula" <jeremy@caltech.edu> wrote on 08/12/2004 01:37:15 PM:

> The robot will use several types of sensors to generate the elevation 
data
> of its surroundings (laser range finders, stereovision systems) which it
> will then transform into UTM coordinates.  We may also add a layer where 
the
> robot uses other sensors to classify different elevations as certain 
types
> of terrain (road, rocks, plants, water, etc.)  To make path-planning 
easier
> we will probably combine this data into a "cost map" where the value of 
each
> pixel represents the "cost" of traversing that point, rather than the
> elevation.  Imagery of the robot's current map would be nice to have
> eventually, but isn't really necessary.  The real aim is to have a data
> structure that the robot can fill in with data in real time (on the 
order of
> thousands or even millions of elevation points per second) which can 
then be
> read, converted to a cost (which is an algorithm we already have) and 
then
> read again to do the path-planning.  It's not so much for human viewing 
as
> for robot-using.
> Writing such a data structure ourselves wouldn't be impossible (or that
> hard, either) - we just thought we'd see if an open source alternative
> existed first, and we liked how GDAL has the ability to support multiple
> bands of information - we're just not sure if it's fast enough or if it 
has
> the capability to somehow scroll the map as the robot moves without 
doing
> time-expensive data copying.
> 
> Does this information help any?  If not, let me know and I can go into 
more
> detail.  Thank you for your help!
> 
>  - Jeremy
> 
> ----- Original Message ----- 
> From: "Tyler Mitchell" <tjmitchell@riverside.bc.ca>
> To: "Jeremy Gillula" <jeremy@caltech.edu>
> Sent: Wednesday, August 11, 2004 4:56 PM
> Subject: Re: [Gdal-dev] GDAL As A Local Map?
> 
> 
> > Can you tell us more about the types of data the robot collects (just 
UTM
> > coordinates)?  Or is it going to need to create imagery?
> > Are you aiming to have a desktop mapping program that can show its 
current
> > location/data?
> >
> > Tell us more,
> > Tyler
> >
> > gdal-dev-bounces@xserve.flids.com wrote on 08/11/2004 02:21:43 PM:
> >
> > > I'm looking for an open-source system I can use for storing and
> > > processing map data for an autonomous robot, and I was wondering if
> > > anyone on this mailing list could tell me if GDAL is the right
> > > solution for me.  There are three big requirements that I need:
> > > 1.  Writing/reading to the map should be very fast, since the robot
> > > will be filling the map with data in real time, and will be using
> > > the map to navigate in real time
> > > 2.  The map should support storing data in UTM coordinates (which
> > > I'm pretty sure GDAL will do) but should also feature a local-
> > > representation, so that instead of having a big map of everywhere
> > > the robot might travel (which would be on the order of 200 miles), I
> > > would use a smaller higher-resolution map (maybe 100 or 200m on a
> > > side) which I can translate (in a sort of scrolling window) as the
> > > robot moves.
> > > 3.  The map has multiple layers so I can store elevation data from
> > > different sensors.
> > > If anyone has any comments on whether or not they think I can adapt
> > > GDAL to this purpose, I would very much appreciate it.
> > >
> > > Thanks!_______________________________________________
> > > Gdal-dev mailing list
> > > Gdal-dev@xserve.flids.com
> > > http://xserve.flids.com/mailman/listinfo/gdal-dev
> >
> >
> >
> 
> 


From mhanson at photon.com  Fri Aug 13 11:42:51 2004
From: mhanson at photon.com (Matthew Hanson)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Compiling under .NET
Message-ID: <004001c4814c$31b7e750$653210ac@photon.com>

Hi,

I actually got GDAL as a part of OSSIM (it currently includes GDAL v1.2) and
am trying to build it under C++ .NET.   When it gets to the GDAl part of the
build it issues the commands in the makefile as follows and the generates
the error message:

************************************
cd port
 nmake /nologo /f makefile.vc
 cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c cpl_conv.cpp
cpl_conv.cpp
cpl_conv.cpp(904) : error C3861: 'snprintf': identifier not found, even with
argument-dependent lookup
************************************

Have people successfully compile under .NET?  Perhaps I'm not properly
editing my nmake.opt file? (I did not edit it at all except of the GDAL_HOME
variable).


matt


From MChapman at sanz.com  Fri Aug 13 11:48:47 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Compiling under .NET
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFCC8@mailman.san.com>

I have built it many times in .Net.  Just follow the directions at
http://gdal.maptools.org/gdal_building.html - Building on Windows.  And
do it from the command line.  It works great.

Martin

-----Original Message-----
From: Matthew Hanson [mailto:mhanson@photon.com] 
Sent: Friday, August 13, 2004 9:43 AM
To: gdal-dev@xserve.flids.com
Subject: [Gdal-dev] Compiling under .NET


Hi,

I actually got GDAL as a part of OSSIM (it currently includes GDAL v1.2)
and
am trying to build it under C++ .NET.   When it gets to the GDAl part of
the
build it issues the commands in the makefile as follows and the
generates the error message:

************************************
cd port
 nmake /nologo /f makefile.vc
 cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c cpl_conv.cpp
cpl_conv.cpp
cpl_conv.cpp(904) : error C3861: 'snprintf': identifier not found, even
with argument-dependent lookup
************************************

Have people successfully compile under .NET?  Perhaps I'm not properly
editing my nmake.opt file? (I did not edit it at all except of the
GDAL_HOME variable).


matt

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From mhanson at photon.com  Fri Aug 13 12:20:19 2004
From: mhanson at photon.com (Matthew Hanson)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Compiling under .NET
In-Reply-To: <ED3A48B9840E594890A2BC172D11946501CFFCC8@mailman.san.com>
Message-ID: <004101c48151$6de62570$653210ac@photon.com>

I've done it this way, at the command line, but I still get the same
'snprintf' error

matt


> -----Original Message-----
> From: Chapman, Martin [mailto:MChapman@sanz.com]
> Sent: Friday, August 13, 2004 11:49 AM
> To: Matthew Hanson; gdal-dev@xserve.flids.com
> Subject: RE: [Gdal-dev] Compiling under .NET
> 
> I have built it many times in .Net.  Just follow the directions at
> http://gdal.maptools.org/gdal_building.html - Building on Windows.  And
> do it from the command line.  It works great.
> 
> Martin
> 
> -----Original Message-----
> From: Matthew Hanson [mailto:mhanson@photon.com]
> Sent: Friday, August 13, 2004 9:43 AM
> To: gdal-dev@xserve.flids.com
> Subject: [Gdal-dev] Compiling under .NET
> 
> 
> Hi,
> 
> I actually got GDAL as a part of OSSIM (it currently includes GDAL v1.2)
> and
> am trying to build it under C++ .NET.   When it gets to the GDAl part of
> the
> build it issues the commands in the makefile as follows and the
> generates the error message:
> 
> ************************************
> cd port
>  nmake /nologo /f makefile.vc
>  cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c cpl_conv.cpp
> cpl_conv.cpp
> cpl_conv.cpp(904) : error C3861: 'snprintf': identifier not found, even
> with argument-dependent lookup
> ************************************
> 
> Have people successfully compile under .NET?  Perhaps I'm not properly
> editing my nmake.opt file? (I did not edit it at all except of the
> GDAL_HOME variable).
> 
> 
> matt
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From mhanson at photon.com  Fri Aug 13 13:28:44 2004
From: mhanson at photon.com (Matthew Hanson)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Compiling under .NET
In-Reply-To: <004101c48151$6de62570$653210ac@photon.com>
Message-ID: <005201c4815a$fc9a58f0$653210ac@photon.com>

Here's some more complete info about this problem, though still unsolved:
****************************

I am trying to build OSSIM under C++ .NET.   When it gets to the GDAL part
of the build it issues the commands in the makefile as follows and the
generates the error message:

************************************
cd port
 nmake /nologo /f makefile.vc
 cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c cpl_conv.cpp
cpl_conv.cpp
cpl_conv.cpp(904) : error C3861: 'snprintf': identifier not found, even with
argument-dependent lookup
************************************

Now, in the cpl_config.h.vc file under the port dir in the GDAL distribution
you can comment out these lines as follows:

/* Define if you have the vprintf function.  */
/* 
#define HAVE_VPRINTF
#define HAVE_VSNPRINTF
#define HAVE_SNPRINTF
#define vsnprintf _vsnprintf
#define snprintf _snprintf
*/

BUT, then the Makefile complains a little further along with:

Cpl_odbc.cpp(841) : error C3861: 'vnsprintf': identifier not found, even
with argument-dependent lookup

Which doesn't seem to make sense, because I commented out that line as well
above.  But I don't understand why I wouldn't have the snprintf family of
functions anyway as they should be part of the C stdio standard library.  If
they aren't included under Windows then I would expect lots of people to
have this problem, but it doesn't seem that most people do.  Anyone else run
into this?

matt


From StefanReisser at t-online.de  Fri Aug 13 16:47:37 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Reprojection a GeoTIFF heightMap
Message-ID: <1Bvixd-1BrHSC0@filter08.bbul.t-online.de>

Hi,

when trying to reproject a heightMap from UTM 10 / WGS84 to UTM 10 /
NAD27 I get the error message:

ERROR 4: 'fileName.tif' not recognised as a supported file format.

followed by a bus error.
The heightMap itself should be fine, so I wonder where the problem might
be. Is it just not possible to convert between the different datums?

Help is appreciated!

Thanks and kind regards, 

Stefan




From wbhk at unm.edu  Fri Aug 13 12:31:44 2004
From: wbhk at unm.edu (William Hudspeth)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Assigning correct projection info to GEotiff extracted
 from MODIS 08 atmospheric HDF
Message-ID: <411CECF0.9080504@unm.edu>



Hello,

To begin with, I am trying to import MODIS08 atmospheric data files in 
HDF-EOS format with GDAL_TRANSLATE. According to the documentation and 
metadata associated with MODIS08 files, they are distributed as a 
1-degree resolution grid (hence 360 by 180 pixels in dimension) in 
Lambert Azuthimal Equal Area projection (measured in degrees). Again, 
according to the metadata in the file (using gdalinfo), latitude values 
range from -90 to 90 degrees, and longitude values range from -180 to 
180 degrees. No information is provided for dataum or ellipsoid.

I have used GDAL_TRANSLATE to successfully extract a single band (1) 
from one of the subdatasets (472) in the HDF file using the following 
command:

gdal_translate -of GTiff -b 1 -a_srs "+proj=laea +x_0=-180 +y_0=-90" 
HDF4_SDS:UNKNOWN:"MOD08_D3.A2002174.004.2003228005230.hdf":472 mod08test.tif

The output I get is as follows:

Input file size is 360, 180
0.Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
...10...20...30...40...50...60...70...80...90...100 - done

However, the problems are:

1. Using GDALINFO on the output file, no coordinate system is reported:

Driver: GTiff/GeoTIFF
Size is 360, 180
Coordinate System is ''
Corner coordinates:
Upper Left ( 0.0,  0.0)
Lower Left ( 0.0,  180.0)
Upper Right ( 360.0,  0.0)
Lower Right ( 360.0,  180.0)
Center ( 180.0, 90.0)
Band 1 Block=360X11 Type=Int16, ColorInterp=Gray

2. Looking at the file in something like ArcMap, the image looks right, 
but as seen in the output above, the lower left corner is 0,0, while it 
should be something like -180, -90.

3.  I have experimented with using different values for x_0, y_0, long_0 
and lat_0 that I use in the -a_srs argument to the gdal_translate 
call.The results summarized above are identical regardless of the values 
I use.

I would appreciate any ideas on how I can assign the correct projection 
to my output data file. I ultimately want to convert its coordinates 
back to standard geographic lat-long.

 Many thanks for considering my question. Bill



From StefanReisser at t-online.de  Fri Aug 13 17:06:57 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Reprojection of a GeoTIFF heightMap
Message-ID: <1BvjGL-2H3XRw0@filter05.bbul.t-online.de>

I am sorry, I should go to bed...

I forgot to register the drivers! Sorry!





From warmerdam at pobox.com  Fri Aug 13 20:07:30 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GeoTIFF External Overviews
Message-ID: <411D57C2.8020201@pobox.com>

Folks,

I have had a couple people (not sure who the second was) ask for the ability
to have external overview files for GeoTIFF files instead of always embedding
them inside the same file as the base image.

I have made some modifications so that if a TIFF file cannot be opened
for update access, an external .ovr file will be created and used for
overviews.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tylermitchell at shaw.ca  Fri Aug 13 21:21:55 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GeoTIFF External Overviews
In-Reply-To: <411D57C2.8020201@pobox.com>
References: <411D57C2.8020201@pobox.com>
Message-ID: <200408131821.55936.tylermitchell@shaw.ca>

> I have made some modifications so that if a TIFF file cannot be opened
> for update access, an external .ovr file will be created and used for
> overviews.

As a rule of thumb, do applications that support GeoTIFF also support 
overviews?  Is there a rule of thumb?

Tyler

From dron at ak4719.spb.edu  Sun Aug 15 06:18:38 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Assigning correct projection info to GEotiff extracted
	from MODIS 08 atmospheric HDF
In-Reply-To: <411CECF0.9080504@unm.edu>
References: <411CECF0.9080504@unm.edu>
Message-ID: <20040815101838.GA2879@ak4719.spb.edu>

On Fri, Aug 13, 2004 at 10:31:44AM -0600, William Hudspeth wrote:
> To begin with, I am trying to import MODIS08 atmospheric data files in
> HDF-EOS format with GDAL_TRANSLATE. According to the documentation and
> metadata associated with MODIS08 files, they are distributed as a
> 1-degree resolution grid (hence 360 by 180 pixels in dimension) in
> Lambert Azuthimal Equal Area projection (measured in degrees). Again,
> according to the metadata in the file (using gdalinfo), latitude
> values range from -90 to 90 degrees, and longitude values range from
> -180 to 180 degrees. No information is provided for dataum or
> ellipsoid.
> 
> I have used GDAL_TRANSLATE to successfully extract a single band (1)
> from one of the subdatasets (472) in the HDF file using the following
> command:
> 
> gdal_translate -of GTiff -b 1 -a_srs "+proj=laea +x_0=-180 +y_0=-90" 
> HDF4_SDS:UNKNOWN:"MOD08_D3.A2002174.004.2003228005230.hdf":472 mod08test.tif

William,

It looks like you are using the old HDF driver. I'm recomment to try the
new HDF code, available from the CVS. It should produce much better
results for HDF-EOS Grid datasets.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From DLowther at scigis.com  Mon Aug 16 10:52:38 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Gdal_translate Error
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E15290A@sci_pe-1.scigis.com>

Hi List,

 

We're processing some large SID images back to TIF to project. Some
images work just fine, others (most) have issues like this:

 

gdal_translate -projwin 635544.7539 3930207.3199 648110.83864
3915163.12478 h:\deqdata\oklahoma\Oklahoma.sid
h:\deqdata\oklahoma\x1_35097D4.tif -co "TFW=YES"

Input file size is 63929, 57190

Computed -srcwin 22976 35037 12566 15044 from projected window.

0.ERROR 1: Internalize failed

ERROR 1: GetBlockRef failed at X block offset 0, Y block offset

 

The SID images draw correctly in ArcGIS and AV3.3.

The SDW files seem about right (compared to an adjacent image that runs
correctly). 

 

Can someone help me understand what this means?

 

Thanks,

 

David Lowther

Senior Software Engineer

Strategic Consulting International

(405) 227-9051

dlowther@scigis.com

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040816/cb308230/attachment.html
From warmerdam at pobox.com  Mon Aug 16 11:33:04 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Gdal_translate Error
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E15290A@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E15290A@sci_pe-1.scigis.com>
Message-ID: <4120D3B0.2020603@pobox.com>

David W. Lowther wrote:
> Hi List,
> 
>  
> 
> We?re processing some large SID images back to TIF to project. Some 
> images work just fine, others (most) have issues like this:
> 
>  
> 
> gdal_translate -projwin 635544.7539 3930207.3199 648110.83864 
> 3915163.12478 h:\deqdata\oklahoma\Oklahoma.sid 
> h:\deqdata\oklahoma\x1_35097D4.tif -co "TFW=YES"
> 
> Input file size is 63929, 57190
> 
> Computed -srcwin 22976 35037 12566 15044 from projected window.
> 
> 0.ERROR 1: Internalize failed
> 
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset

David,

My guess would be that your -projwin definition touches an edge and for some
reason related to rounding or whatever the requested window ends up being a
pixel or more off the image.  This might result in an error similar to what
you see.  Can you verify if that might be it?

Altneratively, is it possible these are color images?  If so, the resulting
TIFF would be larger than 4GB and would run into some sort of problem.

PS. the error message should have included a y block offset which might have
been helpful.


Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bhudspeth at edac.unm.edu  Mon Aug 16 12:32:36 2004
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: Assigning correct projection info to GEotiff
	extracted	from MODIS 08 atmospheric HDF
References: <411CECF0.9080504@unm.edu> <20040815101838.GA2879@ak4719.spb.edu>
Message-ID: <loom.20040816T183014-281@post.gmane.org>


> William,
> 
> It looks like you are using the old HDF driver. I'm recomment to try the
> new HDF code, available from the CVS. It should produce much better
> results for HDF-EOS Grid datasets.
> 
> 						Andrey
> 


Andrey, could you please direct me to the location of the CVS to which you
refer. I am having problems locating it. 

Many thanks, Bill

****************************************




From archer at eskimo.com  Mon Aug 16 13:36:30 2004
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GeoTIFF External Overviews
In-Reply-To: <200408131821.55936.tylermitchell@shaw.ca>
References: <411D57C2.8020201@pobox.com>
	<200408131821.55936.tylermitchell@shaw.ca>
Message-ID: <Pine.SUN.4.58.0408161034470.8134@eskimo.com>

On Fri, 13 Aug 2004, Tyler Mitchell wrote:

> As a rule of thumb, do applications that support GeoTIFF also support
> overviews?  Is there a rule of thumb?

I doubt there's any rhyme or reason to it.  I work on one
open-source application that supports a very small set of geotiff
formats.  We don't support overviews.  It's not a GIS application,
but a real-time tracking application.  We don't currently see a
great need for overviews.

--
Curt, WE7U			         http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From cpurvis at asg.sc.edu  Mon Aug 16 14:14:23 2004
From: cpurvis at asg.sc.edu (Charlton Purvis)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] gdal_translate & srcwin
Message-ID: <AE6FF3A533861C41A6571F1D7DDF6F619193D2@asgnet2.asg.sc.edu>


Hi, folks:

(I've mentioned attachments in this email, but I've put them in this dir instead of on this post.  They are here:  http://nautilus.baruch.sc.edu/~cpurvis/gdal.)

Just starting to dabble w/ GDAL, and I've probably got an obscenely na?ve question for the group.

My file's info . . .

gdalinfo HDF4_EOS:EOS_GRID:"dem30ARC_E60N0.hdf":demGRID:LandWater
Driver: HDF4Image/HDF4 Dataset
Size is 14400, 10800
Coordinate System is:
GEOGCS["Unknown datum based upon the Clarke 1866 ellipsoid",
    DATUM["Not specified (based on Clarke 1866 spheroid)",
        SPHEROID["Clarke 1866",6378206.4,294.9786982138982,
            AUTHORITY["EPSG","7008"]]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (60000000.000000,0.000000)
Pixel Size = (8333.33333333,-8333.33333333)
Corner Coordinates:
Upper Left  (60000000.000,       0.000) (60000000d 0'214748364800.00"E,  0d 0'0.01"N)
Lower Left  (60000000.000,-90000000.000) (60000000d 0'214748364800.00"E,90000000d 0'322122547200.00"S)
Upper Right (180000000.000,       0.000) (180000000d 0'648540061696.00"E,  0d 0'0.01"N)
Lower Right (180000000.000,-90000000.000) (180000000d 0'648540061696.00"E,90000000d 0'322122547200.00"S)
Center      (120000000.000,-45000000.000) (120000000d 0'433791696896.00"E,45000000d 0'163208757248.00"S)
Band 1 Block=14400x1 Type=Byte, ColorInterp=Gray

If I do a straight gdal_translate of the above HDF in its entirety with a

gdal_translate -of GTiff \
  HDF4_EOS:EOS_GRID:"dem30ARC_E60N0.hdf":demGRID:LandWater \
  purvis.tif

I'll get something like the attached full_shot.png.  Not very glamorous, but so far so good.

Now what I want to do is to take a small sample of the data and produce an image.  So I was thinking that something like

gdal_translate -of GTiff \
  HDF4_EOS:EOS_GRID:"dem30ARC_E60N0.hdf":demGRI D:LandWater \
  -srcwin 7200 0 1000 1000 purvis2.tif

would give me a 1000x1000 .tif beginning at pixel 7200,0 (didn't see any units for srcwin parameters in the docs).

Well, I do get what appears to be the correct region, but why is my data 'gone', i.e. only a region w/ one value (highlighted in only red, because they all come back value = 0)?  See subsample_shot.png.

Thanks,

Charlton

 
 
 
Charlton Purvis
(803) 777-8858 : voice
(803) 777-3935 : fax
cpurvis@sc.edu
 
Baruch Institute
University of South Carolina
Columbia, SC 29208

From bhudspeth at edac.unm.edu  Mon Aug 16 15:02:43 2004
From: bhudspeth at edac.unm.edu (Bill Hudspeth)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] assigning projection to geotiff extracted from MOD08 hdf
Message-ID: <412104D3.4020202@edac.unm.edu>



Hello,

 

To begin with, I am trying to import MODIS08 atmospheric data files in 
HDF-EOS format with GDAL_TRANSLATE. According to the documentation

and metadata associated with MODIS08 files, they are distributed as a 
1-degree resolution grid (hence 360 by 180 pixels in dimension) in

Lambert Azuthimal Equal Area projection (measured in degrees). Again, 
according to the metadata in the file (using gdalinfo), latitude values 
range from -90 to 90 degrees, and longitude values range from -180 to 
180 degrees. No information is provided for dataum or ellipsoid.

 

I have used GDAL_TRANSLATE to successfully extract a single band (1) 
from one of the subdatasets (472) in the HDF file using the following 
command:

 

gdal_translate -of GTiff -b 1 -a_srs "+proj=laea +x_0=-180 +y_0=-90" 
HDF4_SDS:UNKNOWN:"MOD08_D3.A2002174.004.2003228005230.hdf":472 mod08test.tif

 

The output I get is as follows:

 

Input file size is 360, 180

0.Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.

...10...20...30...40...50...60...70...80...90...100 - done

 

However, the problems are:

 

1. Using GDALINFO on the output file, no coordinate system is reported:

 

Driver: GTiff/GeoTIFF

Size is 360, 180

Coordinate System is ''

Corner coordinates:

Upper Left ( 0.0,  0.0)

Lower Left ( 0.0,  180.0)

Upper Right ( 360.0,  0.0)

Lower Right ( 360.0,  180.0)

Center ( 180.0, 90.0)

Band 1 Block=360X11 Type=Int16, ColorInterp=Gray

 

2. Looking at the file in something like ArcMap, the image looks right, 
but as seen in the output above, the lower left corner is 0,0,

while it should be something like -180, -90.

 

3.  I have experimented with using different values for x_0, y_0, long_0 
and lat_0 that I use in the -a_srs argument to the gdal_translate 
call.The results

summarized above are identical regardless of the values I use.

 

I would appreciate any ideas on how I can assign the correct projection 
to my output data file. I ultimately want to convert its

coordinates back to standard geographic lat-long.

 

Many thanks for considering my question. Bill


From cpurvis at asg.sc.edu  Mon Aug 16 15:12:11 2004
From: cpurvis at asg.sc.edu (Charlton Purvis)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] gdal_translate & srcwin
Message-ID: <AE6FF3A533861C41A6571F1D7DDF6F619193D5@asgnet2.asg.sc.edu>

Sorry, folks, I'm a knucklehead.  My viewer was the problem.

Charlton

From dron at ak4719.spb.edu  Mon Aug 16 15:03:35 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GeoTIFF External Overviews
In-Reply-To: <200408131821.55936.tylermitchell@shaw.ca>
References: <411D57C2.8020201@pobox.com>
	<200408131821.55936.tylermitchell@shaw.ca>
Message-ID: <20040816190335.GA13060@ak4719.spb.edu>

On Fri, Aug 13, 2004 at 06:21:55PM -0700, Tyler Mitchell wrote:
> > I have made some modifications so that if a TIFF file cannot be
> > opened for update access, an external .ovr file will be created and
> > used for overviews.
> As a rule of thumb, do applications that support GeoTIFF also support
> overviews?  Is there a rule of thumb?

You can use CVS instructions at the bottom of this page:

 http://www.remotesensing.org/gdal/download.html

or download daily source snapshot from here:

 http://www.remotesensing.org/gdal/daily/

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Mon Aug 16 15:46:44 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] gdal_translate & srcwin
In-Reply-To: <AE6FF3A533861C41A6571F1D7DDF6F619193D2@asgnet2.asg.sc.edu>
References: <AE6FF3A533861C41A6571F1D7DDF6F619193D2@asgnet2.asg.sc.edu>
Message-ID: <20040816194644.GB13060@ak4719.spb.edu>

On Mon, Aug 16, 2004 at 02:14:23PM -0400, Charlton Purvis wrote:
> (I've mentioned attachments in this email, but I've put them in this
> dir instead of on this post.  They are here:
> http://nautilus.baruch.sc.edu/~cpurvis/gdal.)
> 
> Just starting to dabble w/ GDAL, and I've probably got an obscenely
> na?ve question for the group.
> 
> gdalinfo HDF4_EOS:EOS_GRID:"dem30ARC_E60N0.hdf":demGRID:LandWater
...
> Corner Coordinates:
> Upper Left  (60000000.000,       0.000) (60000000d 0'214748364800.00"E,  0d 0'0.01"N)
> Lower Left  (60000000.000,-90000000.000) (60000000d 0'214748364800.00"E,90000000d 0'322122547200.00"S)
> Upper Right (180000000.000,       0.000) (180000000d 0'648540061696.00"E,  0d 0'0.01"N)
> Lower Right (180000000.000,-90000000.000) (180000000d 0'648540061696.00"E,90000000d 0'322122547200.00"S)
> Center      (120000000.000,-45000000.000) (120000000d 0'433791696896.00"E,45000000d 0'163208757248.00"S)

Hello, Charlton,

The driver works absolutely wrong for your image and I really want to
see that dataset. Could you place it somewhere so I be able to download
it?

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Mon Aug 16 16:21:15 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] assigning projection to geotiff extracted from MOD08
	hdf
In-Reply-To: <412104D3.4020202@edac.unm.edu>
References: <412104D3.4020202@edac.unm.edu>
Message-ID: <20040816202115.GA3927@ak4719.spb.edu>

On Mon, Aug 16, 2004 at 01:02:43PM -0600, Bill Hudspeth wrote:
> To begin with, I am trying to import MODIS08 atmospheric data files in
> HDF-EOS format with GDAL_TRANSLATE. According to the documentation
> 
> and metadata associated with MODIS08 files, they are distributed as a
> 1-degree resolution grid (hence 360 by 180 pixels in dimension) in
> 
> Lambert Azuthimal Equal Area projection (measured in degrees). Again,
> according to the metadata in the file (using gdalinfo), latitude
> values range from -90 to 90 degrees, and longitude values range from
> -180 to 180 degrees. No information is provided for dataum or
> ellipsoid.
> 
> I have used GDAL_TRANSLATE to successfully extract a single band (1)
> from one of the subdatasets (472) in the HDF file using the following
> command:
> 
> gdal_translate -of GTiff -b 1 -a_srs "+proj=laea +x_0=-180 +y_0=-90" 
> HDF4_SDS:UNKNOWN:"MOD08_D3.A2002174.004.2003228005230.hdf":472 mod08test.tif

Bill,

You are using old HDF driver. Please, try the new one from the latest
snapshot and report any problems you will get.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Tue Aug 17 01:12:47 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GeoTIFF External Overviews
In-Reply-To: <20040816190335.GA13060@ak4719.spb.edu>
References: <411D57C2.8020201@pobox.com>
	<200408131821.55936.tylermitchell@shaw.ca>
	<20040816190335.GA13060@ak4719.spb.edu>
Message-ID: <20040817051247.GB7733@ak4719.spb.edu>

On Mon, Aug 16, 2004 at 11:03:35PM +0400, Andrey Kiselev wrote:
> On Fri, Aug 13, 2004 at 06:21:55PM -0700, Tyler Mitchell wrote:
> > > I have made some modifications so that if a TIFF file cannot be
> > > opened for update access, an external .ovr file will be created and
> > > used for overviews.
> > As a rule of thumb, do applications that support GeoTIFF also support
> > overviews?  Is there a rule of thumb?
> 
> You can use CVS instructions at the bottom of this page:
> 
>  http://www.remotesensing.org/gdal/download.html
> 
> or download daily source snapshot from here:
> 
>  http://www.remotesensing.org/gdal/daily/

Tyler,

I'm sorry, that wasn't answer on you question, but the incorrect
copy/pasting from another message. Links above are for Bill Hudspeth,
who asked me about CVS repository location.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Tue Aug 17 09:51:19 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GeoTIFF External Overviews
In-Reply-To: <Pine.SUN.4.58.0408161034470.8134@eskimo.com>
References: <411D57C2.8020201@pobox.com>	<200408131821.55936.tylermitchell@shaw.ca>
	<Pine.SUN.4.58.0408161034470.8134@eskimo.com>
Message-ID: <41220D57.10008@pobox.com>

Curt, WE7U wrote:
> On Fri, 13 Aug 2004, Tyler Mitchell wrote:
> 
> 
>>As a rule of thumb, do applications that support GeoTIFF also support
>>overviews?  Is there a rule of thumb?
> 
> 
> I doubt there's any rhyme or reason to it.  I work on one
> open-source application that supports a very small set of geotiff
> formats.  We don't support overviews.  It's not a GIS application,
> but a real-time tracking application.  We don't currently see a
> great need for overviews.

Tyler,

Curt is correct.  Many applications does not support TIFF overviews.  Some
applications support them but in other ways than GDAL does.  However, there
are a number of comercial applications that I believe support the same
style of overviews as GDAL including (I think) PCI, Erdas/Leica and
ESRI.

Many applications have no support for TIFF overviews of course, such as Curt's.
Of course, any that use GDAL get it for free whether they know it or not.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From StefanReisser at t-online.de  Tue Aug 17 20:32:52 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Tilting of 7.5" Digital Elevation Models
Message-ID: <1BxENo-0YeA400@cmpmail00.bbul.t-online.de>

Hello everybody!

I have a question concerning the "tilting" of the 7.5" DEM Files. Are
the DEMs within one UTM zone all tilted in the same direction?
When speaking of tilting, I mean the angle between the UTM zone's y-axis
and the meridians.

Thanks for your help!

Kind regards,

Stefan



From sylvain_duclos at yahoo.com  Tue Aug 17 21:42:55 2004
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GNUmakefile fix for OGR/GEOS
Message-ID: <20040818014255.86422.qmail@web12508.mail.yahoo.com>

Hi,

Here a simple fix to gdal/ogr/GNUmakefile

$ cvs -z3 diff -u GNUmakefile
Index: GNUmakefile
===================================================================
RCS file: /cvsroot/osrs/gdal/ogr/GNUmakefile,v
retrieving revision 1.69
diff -u -r1.69 GNUmakefile
--- GNUmakefile 30 Jul 2004 14:44:25 -0000      1.69
+++ GNUmakefile 18 Aug 2004 01:20:42 -0000
@@ -9,7 +9,7 @@
                ogr_featurestyle.h ogr_api.h
 
 ifeq ($(HAVE_GEOS),yes)
-CPPFLAGS       :=      -DHAVE_GEOS=1 $(GEOS_INC)
$(CPPFLAGS)
+CPPFLAGS       :=      -DHAVE_GEOS=1 -I$(GEOS_INC)
$(CPPFLAGS)
 endif
 
 CPPFLAGS       :=      -Iogrsf_frmts -I.
$(GDAL_INCLUDE) $(PROJ_INCLUDE) $(PROJ_FLAGS)
$(CPPFLAGS)


There is a "-I" missing before "$(GEOS_INC)". 
Without that you'll a quite intuitive g++ msg:
"cannot specify -o with -c or -S and multiple
compilations"
:-/


The build choke later because of the new GEOS
interface


/bin/sh ../libtool --mode=compile g++ -Wall  -g
-DDEBUG  -Iogrsf_frmts -I. -I../port -I../gcore
-I../ogr -I../alg   -DHAVE_GEOS=1 -I/usr/local/include
-I../port   -c -o ogrgeometry.o ogrgeometry.cpp
 g++ -Wall -g -DDEBUG -Iogrsf_frmts -I. -I../port
-I../gcore -I../ogr -I../alg -DHAVE_GEOS=1
-I/usr/local/include -I../port -c ogrgeometry.cpp 
-fPIC -DPIC -o .libs/ogrgeometry.o
ogrgeometry.cpp: In member function `virtual
geos::Geometry* 
   OGRGeometry::exportToGEOS() const':
ogrgeometry.cpp:1249: error: no matching function for
call to `geos::WKTReader
   ::WKTReader()'
/usr/local/include/geos/io.h:111: error: candidates
are: 
   geos::WKTReader::WKTReader(const geos::WKTReader&)
/usr/local/include/geos/io.h:123: error:              
  
   geos::WKTReader::WKTReader(const
geos::GeometryFactory*)
make[1]: *** [ogrgeometry.o] Error 1
make[1]: Leaving directory
`/home/loup/dev/gis/gdal/ogr'
make: *** [ogr-target] Error 2

Also the #include "geos.h" is missing at the top of
this file
(ogrgeometry.cpp.)


Thanks,

Sylvain.
PS: GEOS interface was/is changing 
(today CVS give a version of 2.0.0)



		
__________________________________
Do you Yahoo!?
Yahoo! Mail - 50x more storage than other providers!
http://promotions.yahoo.com/new_mail

From ed at topozone.com  Wed Aug 18 10:09:15 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Tilting of 7.5" Digital Elevation Models
Message-ID: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CC6B@ptolemy.topozone.com>

Stefan -

They're not tilted, they're projected.  In the UTM projection the
central meridian (for that zone) is "straight up" in the projection -
meridians to the west of it will "tilt" to the right and those to the
east will "tilt" to the left.  But they're not tilted, they're curved,
and the degree of "tilt" also depends on the latitude.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 978 251-4242   Fax: +1 978 251-1396  

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of
StefanReisser@t-online.de
Sent: Tuesday, August 17, 2004 8:33 PM
To: gdal-dev@xserve.flids.com
Subject: [Gdal-dev] Tilting of 7.5" Digital Elevation Models

Hello everybody!

I have a question concerning the "tilting" of the 7.5" DEM Files. Are
the DEMs within one UTM zone all tilted in the same direction?
When speaking of tilting, I mean the angle between the UTM zone's y-axis
and the meridians.

Thanks for your help!

Kind regards,

Stefan


_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed Aug 18 10:15:24 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GNUmakefile fix for OGR/GEOS
In-Reply-To: <20040818014255.86422.qmail@web12508.mail.yahoo.com>
References: <20040818014255.86422.qmail@web12508.mail.yahoo.com>
Message-ID: <4123647C.1030502@pobox.com>

s duclos wrote:
> Hi,
> 
> Here a simple fix to gdal/ogr/GNUmakefile
...
> 
> Sylvain.
> PS: GEOS interface was/is changing 
> (today CVS give a version of 2.0.0)

Sylvain,

I see the geos.refractions.net web site is still just showing the 1.0.0
release.  I think it might be prudent to wait for 2.0.0 to be officially
issued and then correct against that.  I did the development against an
interim CVS version which had, amoung other things, some issues with the
geos-config script.

Thanks for your feedback!

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sebastien.grignard at archivideo.com  Wed Aug 18 10:26:21 2004
From: sebastien.grignard at archivideo.com (Sebastien Grignard)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Bug fixed in ENVI driver
Message-ID: <4123670D.8010107@archivideo.com>

Hello,

I've fixed a bug in ENVI driver that happened when creating a band with 
a start offset greater that 2 Gbytes.
I've also added support for geotransform parameters on creation even if 
there are no projection information.
The included file is a diff against the current cvs.

-- 
Sebastien Grignard
R&D Developer
Archivideo
40, rue des Veyettes - 35000 Rennes FRANCE
Phone: +033 2 99 86 30 20

-------------- next part --------------
Index: envidataset.cpp
===================================================================
RCS file: /cvsroot/osrs/gdal/frmts/raw/envidataset.cpp,v
retrieving revision 1.18
diff -u -r1.18 envidataset.cpp
--- envidataset.cpp	28 Jul 2004 14:33:27 -0000	1.18
+++ envidataset.cpp	18 Aug 2004 14:20:54 -0000
@@ -389,7 +389,15 @@
 		adfGeoTransform[0], adfGeoTransform[3], adfGeoTransform[1],
 		dfPixelY, iUTMZone, pszHemisphere);
 	}
+    } else {
+      // Suppose we are in North hemisphere.
+      double dfPixelY = -adfGeoTransform[5];
+      const char* pszHemisphere = "North";
+      VSIFPrintf( fp, "map info = {Unknown, 1, 1, %f, %f, %f, %f, %d, %s}\n",
+                  adfGeoTransform[0], adfGeoTransform[3], adfGeoTransform[1],
+                  dfPixelY, 0, pszHemisphere);
     }
+    
 
     VSIFPrintf( fp, "band names = {\n" );
     for ( int i = 1; i <= nBands; i++ )
@@ -920,13 +928,13 @@
     {
         nLineOffset = nDataSize * nSamples;
         nPixelOffset = nDataSize;
-        nBandOffset = nLineOffset * nLines;
+        nBandOffset = (vsi_l_offset)nLineOffset * nLines;
     }
     else if( EQUALN(pszInterleave, "bil", 3) )
     {
         nLineOffset = nDataSize * nSamples * nBands;
         nPixelOffset = nDataSize;
-        nBandOffset = nDataSize * nSamples;
+        nBandOffset = (vsi_l_offset)nDataSize * nSamples;
     }
     else if( EQUALN(pszInterleave, "bip", 3) )
     {
From DLowther at scigis.com  Wed Aug 18 10:33:51 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Gdal_translate Error
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E152956@sci_pe-1.scigis.com>

Frank,

Here's the complete command and results:

E:\Dave\GDAL\apps>gdal_translate -projwin 635544.7539 3930207.3199
648110.83864 3915163.12478 h:\deqdata\oklahoma\Oklahoma.sid
h:\deqdata\oklahoma\x1_35097D4.tif -co "TFW=YES"
Input file size is 63929, 57190
Computed -srcwin 22976 35037 12566 15044 from projected window.
0.ERROR 1: Internalize failed
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0


Here's the SDW:

             1.000000000000000
             0.000000000000000
             0.000000000000000
            -1.000000000000000
        612568.500000000000000
       3965244.500000000000000

Can you tell if my -projwin is outside? I think it's OK.

BTW, I'd be happy to send someone a copy of this image if it would help
in debugging this situation.

Thanks,

Dave

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, August 16, 2004 10:33 AM
To: David W. Lowther
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] Gdal_translate Error

David W. Lowther wrote:
> Hi List,
> 
>  
> 
> We're processing some large SID images back to TIF to project. Some 
> images work just fine, others (most) have issues like this:
> 
>  
> 
> gdal_translate -projwin 635544.7539 3930207.3199 648110.83864 
> 3915163.12478 h:\deqdata\oklahoma\Oklahoma.sid 
> h:\deqdata\oklahoma\x1_35097D4.tif -co "TFW=YES"
> 
> Input file size is 63929, 57190
> 
> Computed -srcwin 22976 35037 12566 15044 from projected window.
> 
> 0.ERROR 1: Internalize failed
> 
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset

David,

My guess would be that your -projwin definition touches an edge and for
some
reason related to rounding or whatever the requested window ends up
being a
pixel or more off the image.  This might result in an error similar to
what
you see.  Can you verify if that might be it?

Altneratively, is it possible these are color images?  If so, the
resulting
TIFF would be larger than 4GB and would run into some sort of problem.

PS. the error message should have included a y block offset which might
have
been helpful.


Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From StefanReisser at t-online.de  Wed Aug 18 10:51:00 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Tilting of 7.5" Digital Elevation Models   
Message-ID: <1BxRmG-0gbTns0@cmpmail06.bbul.t-online.de>

Hi!

Thanks for the quick responses! I know that the DEMs are projected and
not "tilted". However, what I didn't know was, whether within one single
UTM zone, they are "tilted" in both directions. As each zone has its
central meridian, it's quite obvious that they are.
So thanks again for your help. However, I have another question
concerning the DEMs. Is there a possibility to determine the specific
7.5" section of the DEM with GDAL. That means, can I somehow get the
"real" corner coordinates?

Kind regards, 


Stefan




From neteler at itc.it  Wed Aug 18 10:56:19 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <200408181645.57074.schut@sarvision.com>
References: <20040818124634.GF24418@thuille.itc.it>
	<200408181645.57074.schut@sarvision.com>
Message-ID: <20040818145619.GL24418@thuille.itc.it>

Hi Vincent,

On Wed, Aug 18, 2004 at 04:45:56PM +0200, Vincent Schut wrote:
> Hi Markus (cc-ing the gdal list; people might be interested in this :-),
> 
> indeed gdal doesn't read any geographic info that might be in the hdr file 
> (actually I don't know if there is some...).

Using HDFLook I was able to extract from 0001_NDV.HDF
1: ( 5601 x 8177 ) PIXEL DATA
 [image]
 Set no 0: Rank: 2, 5601 x 8177
	Data set name: 'PIXEL DATA'
	Data type: 8-bit unsigned integer
 SDS attributes
	Number of attributes: 1
		valid_range:	0,  255
 Global attributes: 0 

2:[VD] (    3 x   40) NDVI : IMAGE INFORMATION
 vdata_name:      NDVI
 fieldname_list: IMAGE INFORMATION
 n_records     : 3
 interlace_mode: 0
 data_size     : 40
 VFnfields     : 1
   01[field] name: IMAGE INFORMATION (8-bit character) size: 40  order: 40
 Global attributes: 0 

3:[VD] (    2 x   40) NDVI : CALIBRATION PARAMETERS
 File size 40X2 Show size 0 -> 40 X 0 -> 2
 NDVI_COEF_A              0.004          
 NDVI_OFFSET_B            -0.1

#######
cat 0001_LOG.TXT
PRODUCT_ID                V2KRND10__20040101E
BAND_REF                  B0
QUICK_LOOK_BAND           NDV
MAP_PROJ_NAME             PLATE_CARREE_1KMG nom provisoirement egal au code
MAP_PROJ_FAMILY           UNPROJECTED
MAP_PROJ_CODE             PLATE_CARREE_1KMG
MAP_PROJ_UNIT             DEGREES
MAP_PROJ_RESOLUTION       0.0089285714
GEODETIC_SYST_NAME        WGS 1984
GEODETIC_SYST_CODE        WG84
[...]


> What I did was using a 'vgt_unzip' script,which did the following if I 
> remember well:
> - parse the .zip filename for the region and the date, and store these

So one seems to have to parse the 0001_LOG.TXT (sigh).

> - unzip the file into a temp directory (all vegetation zip files unzip in the 
> same 0001/ directory, handy that is :-/ )
> - copy the right vrt file (for that region) to this temp dir. I created vrt 
> file for the 2 regions I used, which I kept in a 'vrt_templates' dir; the vrt 
> files refer to the vgt hdr files with relative path names (a feature Frank 
> Warmerdam implemented especially for this purpose on my request), thus they 
> become meaningfull when copied to a dir with the right .hdr files.)
> - gdaltranslate this vrtfile to a geotiff file, giving the geotiff file some 
> meaningfull name like $region_$date_s10.tif or something like that
> - copy this geotiff file (if everyting went OK) to a spotveg data dir, which 
> will contain all these geotiff files in the end.
> empty and remove the temp dir.
> 
> I can't seem to find the script right now, should have it somewhere around 
> here but haven't used it for some time. But using the above guidelines you 
> should be able to write your own. Mine was not very fancy & robust, either...

OK, thanks for your insights.

Markus
 
> On Wednesday 18 August 2004 14:46, you wrote:
> > Hi Vincent,
> >
> > while digging in the GDAL archive I came across this
> > message:
> >
> >  http://xserve.flids.com/pipermail/gdal-dev/2004-March/005134.html
> >
> > Did you ever manage to read the SPOT Vegetation NDVI
> > data as available from http://free.vgt.vito.be/?
> >
> > The file of interest seems to be
> >  0001_NDV.HDF
> > but GDAL only outputs xy pixels...
> >
> > Maybe you have a receipt using VRT?
> >
> > Thanks in advance
> >
> >  Markus
> 
> -- 
> -----------------------------
>  Vincent Schut
>  SarVision B.V.
>  Wageningen, The Netherlands
>  www.sarvision.com

From ed at topozone.com  Wed Aug 18 11:04:39 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Tilting of 7.5" Digital Elevation Models   
Message-ID: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CC6E@ptolemy.topozone.com>

Stefan -

I don't think you can do that with GDAL, since ALL the data in the DEM
is "real" - even if some of it overlaps other adjacen DEMs.

I don't know what the source of your DEMS is, but look at the filename;
the bounding box is often encoded in the filename.

	- Ed
Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 978 251-4242   Fax: +1 978 251-1396  

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of
StefanReisser@t-online.de
Sent: Wednesday, August 18, 2004 10:51 AM
To: gdal-dev@xserve.flids.com
Subject: RE: [Gdal-dev] Tilting of 7.5" Digital Elevation Models 

Hi!

Thanks for the quick responses! I know that the DEMs are projected and
not "tilted". However, what I didn't know was, whether within one single
UTM zone, they are "tilted" in both directions. As each zone has its
central meridian, it's quite obvious that they are.
So thanks again for your help. However, I have another question
concerning the DEMs. Is there a possibility to determine the specific
7.5" section of the DEM with GDAL. That means, can I somehow get the
"real" corner coordinates?

Kind regards, 


Stefan



_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed Aug 18 11:06:21 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Tilting of 7.5" Digital Elevation Models
In-Reply-To: <1BxRmG-0gbTns0@cmpmail06.bbul.t-online.de>
References: <1BxRmG-0gbTns0@cmpmail06.bbul.t-online.de>
Message-ID: <4123706D.2070109@pobox.com>

StefanReisser@t-online.de wrote:
> Hi!
> 
> Thanks for the quick responses! I know that the DEMs are projected and
> not "tilted". However, what I didn't know was, whether within one single
> UTM zone, they are "tilted" in both directions. As each zone has its
> central meridian, it's quite obvious that they are.

Stefan,

Right, which way it is tilted will depend on which side of the zone
meridian you are.

> So thanks again for your help. However, I have another question
> concerning the DEMs. Is there a possibility to determine the specific
> 7.5" section of the DEM with GDAL. That means, can I somehow get the
> "real" corner coordinates?

You could work this out though it is a bit of work.  For instance, you could
take the center of the DEM, convert that to lat/long and then figure out
what 7.5" cell you are in from that.  Then convert the corners back to
UTM and to pixel/line coordinates using the geotransform.

The gdalinfo.c program (corners part) can be used a an example of how to
convert between image projected coordinates and lat/long.

The part about "figure out what 7.5" cell you are in" would be by a process
of multiplying, integer truncation, and dividing.

Of course, it would be even better if I returned additional information as
metadata that is in the USGS DEM file.  But those DEM files are so variable
I hate to add extra dependencies.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From schut at sarvision.com  Wed Aug 18 11:09:13 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <20040818145619.GL24418@thuille.itc.it>
References: <20040818124634.GF24418@thuille.itc.it>
	<200408181645.57074.schut@sarvision.com>
	<20040818145619.GL24418@thuille.itc.it>
Message-ID: <200408181709.14149.schut@sarvision.com>

On Wednesday 18 August 2004 16:56, Markus Neteler wrote:

<snip>
>
> So one seems to have to parse the 0001_LOG.TXT (sigh).

That's what I did...
Or kindly request for spot vegetation hdf tags support built into gdal :-)
Don't know it that is possible, but I would guess that there are more people 
than only you and me that use spot vegetation data, so there should be some 
user base for that.
OK, I'll do it now:
Frank, or another developer who does the hdf support in gdal, if you read 
this, could you comment on the possibility to support spot vegetation 
metadata hdf info, like projection etc.?

>
> > - unzip the file into a temp directory (all vegetation zip files unzip in
> > the same 0001/ directory, handy that is :-/ )
> > - copy the right vrt file (for that region) to this temp dir. I created
> > vrt file for the 2 regions I used, which I kept in a 'vrt_templates' dir;
> > the vrt files refer to the vgt hdr files with relative path names (a
> > feature Frank Warmerdam implemented especially for this purpose on my
> > request), thus they become meaningfull when copied to a dir with the
> > right .hdr files.) - gdaltranslate this vrtfile to a geotiff file, giving
> > the geotiff file some meaningfull name like $region_$date_s10.tif or
> > something like that - copy this geotiff file (if everyting went OK) to a
> > spotveg data dir, which will contain all these geotiff files in the end.
> > empty and remove the temp dir.
> >
> > I can't seem to find the script right now, should have it somewhere
> > around here but haven't used it for some time. But using the above
> > guidelines you should be able to write your own. Mine was not very fancy
> > & robust, either...
>
> OK, thanks for your insights.

Welcome.
>
> Markus
>
> > On Wednesday 18 August 2004 14:46, you wrote:
> > > Hi Vincent,
> > >
> > > while digging in the GDAL archive I came across this
> > > message:
> > >
> > >  http://xserve.flids.com/pipermail/gdal-dev/2004-March/005134.html
> > >
> > > Did you ever manage to read the SPOT Vegetation NDVI
> > > data as available from http://free.vgt.vito.be/?
> > >
> > > The file of interest seems to be
> > >  0001_NDV.HDF
> > > but GDAL only outputs xy pixels...
> > >
> > > Maybe you have a receipt using VRT?
> > >
> > > Thanks in advance
> > >
> > >  Markus
> >
> > --
> > -----------------------------
> >  Vincent Schut
> >  SarVision B.V.
> >  Wageningen, The Netherlands
> >  www.sarvision.com

-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From warmerdam at pobox.com  Wed Aug 18 11:39:19 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Bug fixed in ENVI driver
In-Reply-To: <4123670D.8010107@archivideo.com>
References: <4123670D.8010107@archivideo.com>
Message-ID: <41237827.7060909@pobox.com>

Sebastien Grignard wrote:
> Hello,
> 
> I've fixed a bug in ENVI driver that happened when creating a band with 
> a start offset greater that 2 Gbytes.
> I've also added support for geotransform parameters on creation even if 
> there are no projection information.
> The included file is a diff against the current cvs.

Sebastien,

Changes commited in CVS.

Thanks!

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Wed Aug 18 11:52:46 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <200408181709.14149.schut@sarvision.com>
References: <20040818124634.GF24418@thuille.itc.it>
	<200408181645.57074.schut@sarvision.com>
	<20040818145619.GL24418@thuille.itc.it>
	<200408181709.14149.schut@sarvision.com>
Message-ID: <20040818155246.GM24418@thuille.itc.it>

On Wed, Aug 18, 2004 at 05:09:13PM +0200, Vincent Schut wrote:
> On Wednesday 18 August 2004 16:56, Markus Neteler wrote:
> 
> <snip>
> >
> > So one seems to have to parse the 0001_LOG.TXT (sigh).
> 
> That's what I did...

Meanwhile I got a sort of valid VRT file constructed (manually).
Not sure yet about "Plate Caree"... I used QGIS to
overlap to VMAP0 coastline data, it matches quite well.

So here my suggestion, added the spot_vegetation_ndvi.vrt file:

gdalinfo spot_vegetation_ndvi.vrt
Driver: VRT/Virtual Raster
Size is 8177, 5601
Coordinate System is:
GEOGCS["wgs84",
    DATUM["WGS_1984",
        SPHEROID["wgs84",6378137,298.257223563],
        TOWGS84[0.000,0.000,0.000]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (-11.004464,75.044643)
Pixel Size = (0.00892857,-0.00892857)
Corner Coordinates:
Upper Left  ( -11.0044643,  75.0446433) ( 11d 0'16.07"W, 75d 2'40.72"N)
Lower Left  ( -11.0044643,  25.0357149) ( 11d 0'16.07"W, 25d 2'8.57"N)
Upper Right (  62.0044641,  75.0446433) ( 62d 0'16.07"E, 75d 2'40.72"N)
Lower Right (  62.0044641,  25.0357149) ( 62d 0'16.07"E, 25d 2'8.57"N)
Center      (  25.4999999,  50.0401791) ( 25d30'0.00"E, 50d 2'24.64"N)
Band 1 Block=128x128 Type=Byte, ColorInterp=Gray
  NoData Value=0

Does it look reasonable (I don't like the small deviation);
and there is the usual cell center vs cell corners story...

The file 0001/0001_LOG.TXT reports:
[...]
CARTO_UPPER_LEFT_X         -11.000000
CARTO_UPPER_LEFT_Y          75.000000
CARTO_UPPER_RIGHT_X         62.000000
CARTO_UPPER_RIGHT_Y         75.000000
CARTO_LOWER_RIGHT_X         62.000000
CARTO_LOWER_RIGHT_Y         25.000000
CARTO_LOWER_LEFT_X         -11.000000
CARTO_LOWER_LEFT_Y          25.000000
CARTO_CENTER_X              25.500000
CARTO_CENTER_Y              50.000000
CARTO_HEIGHT                50.000000
CARTO_WIDTH                 73.000000
GEO_UPPER_LEFT_LAT        +075.000000
GEO_UPPER_LEFT_LONG       -011.000000
GEO_UPPER_RIGHT_LAT       +075.000000
GEO_UPPER_RIGHT_LONG      +062.000000
GEO_LOWER_RIGHT_LAT       +025.000000
GEO_LOWER_RIGHT_LONG      +062.000000
GEO_LOWER_LEFT_LAT        +025.000000
GEO_LOWER_LEFT_LONG       -011.000000

I don't feel that the map in QGIS is shifted by 0.5 degree.
Mmh.

Please let know in case of errors in the VRT file.

Markus
-------------- next part --------------
<VRTDataset rasterXSize="8177" rasterYSize="5601">
  <SRS>GEOGCS[&quot;wgs84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;wgs84&quot;,6378137,298.257223563],TOWGS84[0.000,0.000,0.000]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433]]</SRS>
  <GeoTransform> -1.1004464285e+01,  8.9285714e-03,  0.0000000000000000e+00,  7.5044643285e+01,  0.0000000000000000e+00, -8.9285714e-03</GeoTransform>
  <VRTRasterBand dataType="Byte" band="1">
    <NoDataValue>0.00000000000000E+00</NoDataValue>
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename>0001/0001_NDV.HDF</SourceFilename>
      <SourceBand>1</SourceBand>
      <SrcRect xOff="0" yOff="0" xSize="8177" ySize="5601"/>
      <DstRect xOff="0" yOff="0" xSize="8177" ySize="5601"/>
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>
From schut at sarvision.com  Wed Aug 18 12:13:08 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <20040818155246.GM24418@thuille.itc.it>
References: <20040818124634.GF24418@thuille.itc.it>
	<200408181709.14149.schut@sarvision.com>
	<20040818155246.GM24418@thuille.itc.it>
Message-ID: <200408181813.09358.schut@sarvision.com>

Markus,

my first impression is that it should be correct. According to the faq 
(http://www.vgt.vito.be/faq/faq.html), vegetation coordinates refer to the 
center of a pixel, so your correction with 1/2 pixel size should be OK. 
That's exactly what I did, too.
About Plate Caree, I'm not sure either. I used a simple lat/long wgs84 
configuration which looked OK. It is however possible that better projection 
parameters exist... I know I found a small shift when comparing with MODIS 
data, but I had hard times trying to reproject these modis data from Goodes 
Homolosine with datum shift etc. to generic latlong, and I always suspected 
the shift to be a result of that, and not of bad spot vegetation projection 
parameters. Still do think that, by the way.

Vincent.

On Wednesday 18 August 2004 17:52, Markus Neteler wrote:
> On Wed, Aug 18, 2004 at 05:09:13PM +0200, Vincent Schut wrote:
> > On Wednesday 18 August 2004 16:56, Markus Neteler wrote:
> >
> > <snip>
> >
> > > So one seems to have to parse the 0001_LOG.TXT (sigh).
> >
> > That's what I did...
>
> Meanwhile I got a sort of valid VRT file constructed (manually).
> Not sure yet about "Plate Caree"... I used QGIS to
> overlap to VMAP0 coastline data, it matches quite well.
>
> So here my suggestion, added the spot_vegetation_ndvi.vrt file:
>
> gdalinfo spot_vegetation_ndvi.vrt
> Driver: VRT/Virtual Raster
> Size is 8177, 5601
> Coordinate System is:
> GEOGCS["wgs84",
>     DATUM["WGS_1984",
>         SPHEROID["wgs84",6378137,298.257223563],
>         TOWGS84[0.000,0.000,0.000]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> Origin = (-11.004464,75.044643)
> Pixel Size = (0.00892857,-0.00892857)
> Corner Coordinates:
> Upper Left  ( -11.0044643,  75.0446433) ( 11d 0'16.07"W, 75d 2'40.72"N)
> Lower Left  ( -11.0044643,  25.0357149) ( 11d 0'16.07"W, 25d 2'8.57"N)
> Upper Right (  62.0044641,  75.0446433) ( 62d 0'16.07"E, 75d 2'40.72"N)
> Lower Right (  62.0044641,  25.0357149) ( 62d 0'16.07"E, 25d 2'8.57"N)
> Center      (  25.4999999,  50.0401791) ( 25d30'0.00"E, 50d 2'24.64"N)
> Band 1 Block=128x128 Type=Byte, ColorInterp=Gray
>   NoData Value=0
>
> Does it look reasonable (I don't like the small deviation);
> and there is the usual cell center vs cell corners story...
>
> The file 0001/0001_LOG.TXT reports:
> [...]
> CARTO_UPPER_LEFT_X         -11.000000
> CARTO_UPPER_LEFT_Y          75.000000
> CARTO_UPPER_RIGHT_X         62.000000
> CARTO_UPPER_RIGHT_Y         75.000000
> CARTO_LOWER_RIGHT_X         62.000000
> CARTO_LOWER_RIGHT_Y         25.000000
> CARTO_LOWER_LEFT_X         -11.000000
> CARTO_LOWER_LEFT_Y          25.000000
> CARTO_CENTER_X              25.500000
> CARTO_CENTER_Y              50.000000
> CARTO_HEIGHT                50.000000
> CARTO_WIDTH                 73.000000
> GEO_UPPER_LEFT_LAT        +075.000000
> GEO_UPPER_LEFT_LONG       -011.000000
> GEO_UPPER_RIGHT_LAT       +075.000000
> GEO_UPPER_RIGHT_LONG      +062.000000
> GEO_LOWER_RIGHT_LAT       +025.000000
> GEO_LOWER_RIGHT_LONG      +062.000000
> GEO_LOWER_LEFT_LAT        +025.000000
> GEO_LOWER_LEFT_LONG       -011.000000
>
> I don't feel that the map in QGIS is shifted by 0.5 degree.
> Mmh.
>
> Please let know in case of errors in the VRT file.
>
> Markus

-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From DLowther at scigis.com  Wed Aug 18 12:18:31 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Gdal_translate Error
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E152959@sci_pe-1.scigis.com>

List,

After some more investigation I have found that the images that do not
work correctly have been compressed with Encoder Version 3.0.0.6:

Input filename: ortho_e1-1_ok109 [TIFF]
Output filename:
F:\1300511\DOQQ\OKLAHOMA_OK_40109_88_2003\ortho_e1-1_ok109.sid
Input image size: 10460.2 MB (10968298530 bytes)
Output file size: 216.9 MB (227481179 bytes)
Target Encoding Ratio: 50.00:1
Actual Encoding Ratio: 48.22:1
File type: GeoTIFF
Georeferencing: GeoTIFF
Encoder Version: 3.0.0.6
Output Format: MrSID Generation 2
Start Time: Thu Sep 25 15:21:05 2003 
Completion Time: Thu Sep 25 16:31:14 2003

I've got a 1.1.9 build of GDAL with the following MrSid options:

MRSID_DIR =	e:\build\win6_dsdk
MRSID_LIB =	/LIBPATH:$(MRSID_DIR)\bin\lib_md \
		MrSIDDecode_md.lib lt_xTrans_md.lib advapi32.lib
user32.lib

Do I need to recompile with a newer version to make this work?

Thanks,
Dave

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of David W. Lowther
Sent: Wednesday, August 18, 2004 9:34 AM
To: gdal-dev@xserve.flids.com
Subject: RE: [Gdal-dev] Gdal_translate Error

Frank,

Here's the complete command and results:

E:\Dave\GDAL\apps>gdal_translate -projwin 635544.7539 3930207.3199
648110.83864 3915163.12478 h:\deqdata\oklahoma\Oklahoma.sid
h:\deqdata\oklahoma\x1_35097D4.tif -co "TFW=YES"
Input file size is 63929, 57190
Computed -srcwin 22976 35037 12566 15044 from projected window.
0.ERROR 1: Internalize failed
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0


Here's the SDW:

             1.000000000000000
             0.000000000000000
             0.000000000000000
            -1.000000000000000
        612568.500000000000000
       3965244.500000000000000

Can you tell if my -projwin is outside? I think it's OK.

BTW, I'd be happy to send someone a copy of this image if it would help
in debugging this situation.

Thanks,

Dave

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, August 16, 2004 10:33 AM
To: David W. Lowther
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] Gdal_translate Error

David W. Lowther wrote:
> Hi List,
> 
>  
> 
> We're processing some large SID images back to TIF to project. Some 
> images work just fine, others (most) have issues like this:
> 
>  
> 
> gdal_translate -projwin 635544.7539 3930207.3199 648110.83864 
> 3915163.12478 h:\deqdata\oklahoma\Oklahoma.sid 
> h:\deqdata\oklahoma\x1_35097D4.tif -co "TFW=YES"
> 
> Input file size is 63929, 57190
> 
> Computed -srcwin 22976 35037 12566 15044 from projected window.
> 
> 0.ERROR 1: Internalize failed
> 
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset

David,

My guess would be that your -projwin definition touches an edge and for
some
reason related to rounding or whatever the requested window ends up
being a
pixel or more off the image.  This might result in an error similar to
what
you see.  Can you verify if that might be it?

Altneratively, is it possible these are color images?  If so, the
resulting
TIFF would be larger than 4GB and would run into some sort of problem.

PS. the error message should have included a y block offset which might
have
been helpful.


Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev


From nhv at cape.com  Wed Aug 18 12:28:35 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <200408181813.09358.schut@sarvision.com>
Message-ID: <EKEJIKAILPONGGENMBGAOEHLIHAA.nhv@cape.com>

Vincent Schut writes:
>
> About Plate Caree, I'm not sure either. I used a simple lat/long wgs84 
> configuration which looked OK. It is however possible that better projection 
> parameters exist... 

"Plate Caree" is just another name for "Equidistant Cylindrical"  Projection
i.e. linear scaling of latitudes and longitudes

In other words, all meridians and parallels are straight lines. 

HTH

Norman

From archer at eskimo.com  Wed Aug 18 12:33:26 2004
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Tilting of 7.5" Digital Elevation Models
In-Reply-To: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CC6B@ptolemy.topozone.com>
References: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CC6B@ptolemy.topozone.com>
Message-ID: <Pine.SUN.4.58.0408180931500.4897@eskimo.com>

On Wed, 18 Aug 2004, Ed McNierney wrote:

> They're not tilted, they're projected.  In the UTM projection the
> central meridian (for that zone) is "straight up" in the projection -
> meridians to the west of it will "tilt" to the right and those to the
> east will "tilt" to the left.  But they're not tilted, they're curved,
> and the degree of "tilt" also depends on the latitude.

Not only that, the bottom and top edges are curved, not straight,
and the top will be shorter than the bottom in the northern
hemisphere, opposite in the southern hemisphere.  At least if you're
trying to draw that projection onto a lat/long map screen it'll look
like that.

--
Curt, WE7U			         http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From neteler at itc.it  Wed Aug 18 12:36:27 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <EKEJIKAILPONGGENMBGAOEHLIHAA.nhv@cape.com>
References: <200408181813.09358.schut@sarvision.com>
	<EKEJIKAILPONGGENMBGAOEHLIHAA.nhv@cape.com>
Message-ID: <20040818163627.GP24418@thuille.itc.it>

On Wed, Aug 18, 2004 at 12:28:35PM -0400, Norman Vine wrote:
> Vincent Schut writes:
> >
> > About Plate Caree, I'm not sure either. I used a simple lat/long wgs84 
> > configuration which looked OK. It is however possible that better projection 
> > parameters exist... 
> 
> "Plate Caree" is just another name for "Equidistant Cylindrical"  Projection
> i.e. linear scaling of latitudes and longitudes
> 
> In other words, all meridians and parallels are straight lines. 

How should I write that as SRS OGC WKT? 
While I have addressed the wgs84 things, the projection info is somewhat
missing. So far I didn't find any example.

Thanks
 Markus

From warmerdam at pobox.com  Wed Aug 18 13:07:10 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <20040818163627.GP24418@thuille.itc.it>
References: <200408181813.09358.schut@sarvision.com>	<EKEJIKAILPONGGENMBGAOEHLIHAA.nhv@cape.com>
	<20040818163627.GP24418@thuille.itc.it>
Message-ID: <41238CBE.6010405@pobox.com>

Markus Neteler wrote:
> On Wed, Aug 18, 2004 at 12:28:35PM -0400, Norman Vine wrote:
> 
>>Vincent Schut writes:
>>
>>>About Plate Caree, I'm not sure either. I used a simple lat/long wgs84 
>>>configuration which looked OK. It is however possible that better projection 
>>>parameters exist... 
>>
>>"Plate Caree" is just another name for "Equidistant Cylindrical"  Projection
>>i.e. linear scaling of latitudes and longitudes
>>
>>In other words, all meridians and parallels are straight lines. 
> 
> 
> How should I write that as SRS OGC WKT? 
> While I have addressed the wgs84 things, the projection info is somewhat
> missing. So far I didn't find any example.

Markus,

Norman is right about Plate Caree.  It is also known as Equirectangular in
some circles.  The page I maintain about it is at:

   http://www.remotesensing.org/geotiff/proj_list/equirectangular.html

The "testepsg" program from gdal/ogr says:

warmerda@gdal2200[25]% testepsg '+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0'
...
PROJCS["unnamed",
     GEOGCS["WGS 84",
         DATUM["D_unknown",
             SPHEROID["WGS84",6378137,298.257223563]],
         PRIMEM["Greenwich",0],
         UNIT["Degree",0.017453292519943295]],
     PROJECTION["Equidistant_Cylindrical"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",0],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0]]
...

A recent update (just last week) in the VRT format driver allows use of any
"user input" for describing coordinates systems.  That means you should (with
recent CVS builds) be able to just use the PROJ.4 string to describe an SRS
if you want.  If not, just embed the WKT with all the yucky XML escaping.
Actually, come to think of it, there likely aren't any XML escapes actually
required for WKT in VRT XML though by default VRTs produced by GDAL will apply
all possible XML escape sequences .. not just the required minimum.  Now I am
getting off topic. :-)

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Wed Aug 18 15:08:10 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <41238CBE.6010405@pobox.com>
References: <200408181813.09358.schut@sarvision.com>
	<EKEJIKAILPONGGENMBGAOEHLIHAA.nhv@cape.com>
	<20040818163627.GP24418@thuille.itc.it>
	<41238CBE.6010405@pobox.com>
Message-ID: <20040818190810.GA25667@thuille.itc.it>

On Wed, Aug 18, 2004 at 01:07:10PM -0400, Frank Warmerdam wrote:
> Markus Neteler wrote:
> >On Wed, Aug 18, 2004 at 12:28:35PM -0400, Norman Vine wrote:
> >
> >>Vincent Schut writes:
> >>
> >>>About Plate Caree, I'm not sure either. I used a simple lat/long wgs84 
> >>>configuration which looked OK. It is however possible that better 
> >>>projection parameters exist... 
> >>
> >>"Plate Caree" is just another name for "Equidistant Cylindrical"  
> >>Projection
> >>i.e. linear scaling of latitudes and longitudes
> >>
> >>In other words, all meridians and parallels are straight lines. 
> >
> >
> >How should I write that as SRS OGC WKT? 
> >While I have addressed the wgs84 things, the projection info is somewhat
> >missing. So far I didn't find any example.
> 
> Markus,
> 
> Norman is right about Plate Caree.  It is also known as Equirectangular in
> some circles.  The page I maintain about it is at:
> 
>   http://www.remotesensing.org/geotiff/proj_list/equirectangular.html

No doubts (I was aware of both the name - looking into the Evenden docs
as well as the url). 
But I wasn't aware of 'testepsg' - thanks for the hint. Exactly what
I was looking for.
 
> The "testepsg" program from gdal/ogr says:
> 
> warmerda@gdal2200[25]% testepsg '+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0'
> ...
> PROJCS["unnamed",
>     GEOGCS["WGS 84",
>         DATUM["D_unknown",
>             SPHEROID["WGS84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Equidistant_Cylindrical"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",0],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0]]
> ...

[for other users a note:
   cd ogr/ ; make testepsg
compiles it 
]

> A recent update (just last week) in the VRT format driver allows use of any
> "user input" for describing coordinates systems.  That means you should 
> (with
> recent CVS builds) be able to just use the PROJ.4 string to describe an SRS
> if you want.  If not, just embed the WKT with all the yucky XML escaping.
> Actually, come to think of it, there likely aren't any XML escapes actually
> required for WKT in VRT XML though by default VRTs produced by GDAL will 
> apply
> all possible XML escape sequences .. not just the required minimum.  Now I 
> am getting off topic. :-)

..."use the PROJ.4 string to describe an SRS"... excellent!

So no more excuses to write the proper VRT file :-)

Thanks for all your helpful comments.


 Markus

From DLowther at scigis.com  Wed Aug 18 18:10:30 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] MrSID Support
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E152969@sci_pe-1.scigis.com>

Hi List,

Since Lizardtech has now made the decode functionality free
(http://developer.lizardtech.com/data/) would it be possible to include
MrSID support by default in future binary builds of GDAL?

Dave Lowther

From shadow at dementia.org  Wed Aug 18 18:17:28 2004
From: shadow at dementia.org (Derrick J Brashear)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] MrSID Support
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E152969@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E152969@sci_pe-1.scigis.com>
Message-ID: <Pine.GSO.4.61-042.0408181816580.8437@johnstown.andrew.cmu.edu>

On Wed, 18 Aug 2004, David W. Lowther wrote:

> Hi List,
>
> Since Lizardtech has now made the decode functionality free
> (http://developer.lizardtech.com/data/) would it be possible to include
> MrSID support by default in future binary builds of GDAL?

wow, Linux, Darwin, and 2 kinds of Solaris, not just Windows.

Kudos to LizardTech.


From paul-grass at stjohnspoint.co.uk  Thu Aug 19 04:37:50 2004
From: paul-grass at stjohnspoint.co.uk (Paul Kelly)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: GDAL and Spot Vegetation
In-Reply-To: <20040818221734.C00551EDBC8@xserve.flids.com>
References: <20040818221734.C00551EDBC8@xserve.flids.com>
Message-ID: <Pine.LNX.4.60.0408190930050.2421@agrippa.ukshells.co.uk>

Hello Markus

gdal-dev-request@xserve.flids.com wrote:
> ------------------------------------------------------------------------
>
> Subject:
> Re: [Gdal-dev] Re: GDAL and Spot Vegetation
> From:
> Markus Neteler <neteler@itc.it>
> Date:
> Wed, 18 Aug 2004 21:08:10 +0200
> To:
> Frank Warmerdam <warmerdam@pobox.com>
>
> To:
> Frank Warmerdam <warmerdam@pobox.com>
> CC:
> GDAL-dev list <gdal-dev@remotesensing.org>
>
>
> On Wed, Aug 18, 2004 at 01:07:10PM -0400, Frank Warmerdam wrote:
>
>[...]
>>
>>Markus,
>>
>>Norman is right about Plate Caree.  It is also known as Equirectangular 
in
>>some circles.  The page I maintain about it is at:
>>
>>  http://www.remotesensing.org/geotiff/proj_list/equirectangular.html
>
>
> No doubts (I was aware of both the name - looking into the Evenden docs
> as well as the url).
> But I wasn't aware of 'testepsg' - thanks for the hint. Exactly what
> I was looking for.

Just a little advertisement: the 'g.proj' module in GRASS 5.7 can also do 
this---and it is compiled by default. I tried:

GRASS 5.7.cvs > g.proj -w proj4='+proj=eqc +datum=wgs84'
A datum name wgs84 (WGS_1984) was specified without transformation 
parameters.
Note that the GRASS default for wgs84 is towgs84=0.000,0.000,0.000.
PROJCS["Equidistant Cylindrical (Plate Caree)",
     GEOGCS["wgs84",
         DATUM["WGS_1984",
             SPHEROID["wgs84",6378137,298.257223563]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Equirectangular"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",0],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0]]

Paul

>
>
>>The "testepsg" program from gdal/ogr says:
>>
>>warmerda@gdal2200[25]% testepsg '+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 
+y_0=0'
>>...
>>PROJCS["unnamed",
>>    GEOGCS["WGS 84",
>>        DATUM["D_unknown",
>>            SPHEROID["WGS84",6378137,298.257223563]],
>>        PRIMEM["Greenwich",0],
>>        UNIT["Degree",0.017453292519943295]],
>>    PROJECTION["Equidistant_Cylindrical"],
>>    PARAMETER["latitude_of_origin",0],
>>    PARAMETER["central_meridian",0],
>>    PARAMETER["false_easting",0],
>>    PARAMETER["false_northing",0]]
>>...
>
>
> [for other users a note:
>    cd ogr/ ; make testepsg
> compiles it
> ]
>


From halset at pvv.ntnu.no  Thu Aug 19 06:24:21 2004
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] S57 Driver: DSNM and EDTN
Message-ID: <EF49ACB0-F1C9-11D8-B61B-000A95CD827E@pvv.ntnu.no>

Hello!

I am importing s-57 data into postgis using ogr2ogr. It would be very 
nice to have the cellname, edition and perhaps update number for every 
feature. Is it doable? Where should I start?

Regards,
  - Tore.


From halset at pvv.ntnu.no  Thu Aug 19 06:25:10 2004
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] S57 driver: the second import
Message-ID: <0C718152-F1CA-11D8-B61B-000A95CD827E@pvv.ntnu.no>

Hello!

I have imported a s-57 cell into postgis using ogr2ogr, but now I want 
to import a second cell into the same database. Using the same command 
as the first time lead to this error message:

ERROR 1: Layer ACHARE already exists, CreateLayer failed.
Use the layer creation option OVERWRITE=YES to replace it.
ERROR 1: Terminating translation prematurely after failed
translation of layer ACHARE

Using -append lead to this errormessage:
FAILED: To find existing layer `BCNISD' on output dataset
         to append new features to.
Bus error

Using -update lead to this errormessage:
ERROR 1: Layer ACHARE already exists, CreateLayer failed.
Use the layer creation option OVERWRITE=YES to replace it.
ERROR 1: Terminating translation prematurely after failed
translation of layer ACHARE

Is it possible to run ogr2ogr multiple times to import different s-57 
data cells into postgis?

Regards,
  - Tore.


From DLowther at scigis.com  Thu Aug 19 08:53:27 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] gdal_translate question
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E12617B@sci_pe-1.scigis.com>

List,

When running gdal_translate with the -proj_win option the program
calculates a -src_win. I have been getting calculated src_win(s) with
negative numbers (both for offset and size). Is this supposed to happen?

Dave

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of David W. Lowther
Sent: Wednesday, August 18, 2004 5:11 PM
To: gdal-dev@xserve.flids.com
Subject: [Gdal-dev] MrSID Support

Hi List,

Since Lizardtech has now made the decode functionality free
(http://developer.lizardtech.com/data/) would it be possible to include
MrSID support by default in future binary builds of GDAL?

Dave Lowther
_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Aug 19 11:53:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] gdal_translate question
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E12617B@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E12617B@sci_pe-1.scigis.com>
Message-ID: <4124CCFE.8000602@pobox.com>

David W. Lowther wrote:
> List,
> 
> When running gdal_translate with the -proj_win option the program
> calculates a -src_win. I have been getting calculated src_win(s) with
> negative numbers (both for offset and size). Is this supposed to happen?

David,

If your projwin falls off the edge of the image this can happen.  I have
just patched gdal_translate to terminate if the window is off the image
since things cannot proceed properly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From DLowther at scigis.com  Thu Aug 19 12:39:48 2004
From: DLowther at scigis.com (David W. Lowther)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] gdal_translate question
Message-ID: <303AC30EE84CE540AB1D8484EFFC166E15297C@sci_pe-1.scigis.com>

Frank,

I'm not sure that was/is the issue.

Certainly I am not that familiar with GDAL, but I added four lines after
calculating src_win to calculate the ABS of the values, recompiled, and
it fixed my issue.

Thoughts?

Dave

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, August 19, 2004 10:54 AM
To: David W. Lowther
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] gdal_translate question

David W. Lowther wrote:
> List,
> 
> When running gdal_translate with the -proj_win option the program
> calculates a -src_win. I have been getting calculated src_win(s) with
> negative numbers (both for offset and size). Is this supposed to
happen?

David,

If your projwin falls off the edge of the image this can happen.  I have
just patched gdal_translate to terminate if the window is off the image
since things cannot proceed properly.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Aug 19 12:45:12 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] gdal_translate question
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E15297C@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E15297C@sci_pe-1.scigis.com>
Message-ID: <4124D918.40404@pobox.com>

David W. Lowther wrote:
> Frank,
> 
> I'm not sure that was/is the issue.
> 
> Certainly I am not that familiar with GDAL, but I added four lines after
> calculating src_win to calculate the ABS of the values, recompiled, and
> it fixed my issue.
> 
> Thoughts?

David,

It certainly sounds like the source window was your issue though your
fix won't give you the correct results.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From halset at pvv.ntnu.no  Thu Aug 19 13:39:42 2004
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] S57 driver: the second import
In-Reply-To: <0C718152-F1CA-11D8-B61B-000A95CD827E@pvv.ntnu.no>
References: <0C718152-F1CA-11D8-B61B-000A95CD827E@pvv.ntnu.no>
Message-ID: <C109F723-F206-11D8-885C-000A95CD827E@pvv.ntnu.no>

On Aug 19, 2004, at 12:25, Tore Halset wrote:

> Is it possible to run ogr2ogr multiple times to import different s-57 
> data cells into postgis?

Using both "-update" and "-lco OVERWRITE=YES" seem to fix the problem. 
I also upgraded gdal from version 1.2.0 to 1.2.1.

  - Tore.


From halset at pvv.ntnu.no  Thu Aug 19 15:03:37 2004
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] S57 driver: the second import
In-Reply-To: <C109F723-F206-11D8-885C-000A95CD827E@pvv.ntnu.no>
References: <0C718152-F1CA-11D8-B61B-000A95CD827E@pvv.ntnu.no>
	<C109F723-F206-11D8-885C-000A95CD827E@pvv.ntnu.no>
Message-ID: <79E12914-F212-11D8-885C-000A95CD827E@pvv.ntnu.no>


On Aug 19, 2004, at 19:39, Tore Halset wrote:

> On Aug 19, 2004, at 12:25, Tore Halset wrote:
>
>> Is it possible to run ogr2ogr multiple times to import different s-57 
>> data cells into postgis?
>
> Using both "-update" and "-lco OVERWRITE=YES" seem to fix the problem. 
> I also upgraded gdal from version 1.2.0 to 1.2.1.

Wrong!

-append -lco OVERWRITE=YES. Does not work if the cell has a layer that 
does not exist in the database.

-update -lco OVERWRITE=YES does update features in the database with 
features in the new cell. An import of a cell with some LNDARE will 
work, but some of the old LNDARE in the base disapears. Perhaps 
DSID-DSNM should have been included in the where-part of the query?

  - Tore.


From dron at ak4719.spb.edu  Thu Aug 19 15:30:12 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] MrSID Support
In-Reply-To: <303AC30EE84CE540AB1D8484EFFC166E152969@sci_pe-1.scigis.com>
References: <303AC30EE84CE540AB1D8484EFFC166E152969@sci_pe-1.scigis.com>
Message-ID: <20040819193012.GD7726@ak4719.spb.edu>

On Wed, Aug 18, 2004 at 05:10:30PM -0500, David W. Lowther wrote:
> Since Lizardtech has now made the decode functionality free
> (http://developer.lizardtech.com/data/) would it be possible to
> include MrSID support by default in future binary builds of GDAL?

I have reread the DSDK license and it seems that we can distribute
precompiled binaries after adding LizardTech copyrights and complete
EULA from the Appendix C. The latter seems to be a big overhead for
GDAL, personally I'd like to avoid that.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From shadow at dementia.org  Thu Aug 19 15:33:19 2004
From: shadow at dementia.org (Derrick J Brashear)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] MrSID Support
In-Reply-To: <20040819193012.GD7726@ak4719.spb.edu>
References: <303AC30EE84CE540AB1D8484EFFC166E152969@sci_pe-1.scigis.com>
	<20040819193012.GD7726@ak4719.spb.edu>
Message-ID: <Pine.GSO.4.61-042.0408191532590.8437@johnstown.andrew.cmu.edu>

On Thu, 19 Aug 2004, Andrey Kiselev wrote:

> On Wed, Aug 18, 2004 at 05:10:30PM -0500, David W. Lowther wrote:
>> Since Lizardtech has now made the decode functionality free
>> (http://developer.lizardtech.com/data/) would it be possible to
>> include MrSID support by default in future binary builds of GDAL?
>
> I have reread the DSDK license and it seems that we can distribute
> precompiled binaries after adding LizardTech copyrights and complete
> EULA from the Appendix C. The latter seems to be a big overhead for
> GDAL, personally I'd like to avoid that.

Support it for people who built it themselves.


From dron at ak4719.spb.edu  Thu Aug 19 16:07:12 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] MrSID Support
In-Reply-To: <Pine.GSO.4.61-042.0408191532590.8437@johnstown.andrew.cmu.edu>
References: <303AC30EE84CE540AB1D8484EFFC166E152969@sci_pe-1.scigis.com>
	<20040819193012.GD7726@ak4719.spb.edu>
	<Pine.GSO.4.61-042.0408191532590.8437@johnstown.andrew.cmu.edu>
Message-ID: <20040819200712.GA14729@ak4719.spb.edu>

On Thu, Aug 19, 2004 at 03:33:19PM -0400, Derrick J Brashear wrote:
> >>Since Lizardtech has now made the decode functionality free
> >>(http://developer.lizardtech.com/data/) would it be possible to
> >>include MrSID support by default in future binary builds of GDAL?
> >I have reread the DSDK license and it seems that we can distribute
> >precompiled binaries after adding LizardTech copyrights and complete
> >EULA from the Appendix C. The latter seems to be a big overhead for
> >GDAL, personally I'd like to avoid that.
> Support it for people who built it themselves.

But... MrSID DSDK is already supported by the GDAL for a while.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From shadow at dementia.org  Thu Aug 19 16:17:10 2004
From: shadow at dementia.org (Derrick J Brashear)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] MrSID Support
In-Reply-To: <20040819200712.GA14729@ak4719.spb.edu>
References: <303AC30EE84CE540AB1D8484EFFC166E152969@sci_pe-1.scigis.com>
	<20040819193012.GD7726@ak4719.spb.edu>
	<Pine.GSO.4.61-042.0408191532590.8437@johnstown.andrew.cmu.edu>
	<20040819200712.GA14729@ak4719.spb.edu>
Message-ID: <Pine.GSO.4.61-042.0408191616480.8437@johnstown.andrew.cmu.edu>

On Fri, 20 Aug 2004, Andrey Kiselev wrote:

> But... MrSID DSDK is already supported by the GDAL for a while.

Yup, I'm an idiot. Fresh CVS checkout is helpful. Sorry.


From warmerdam at pobox.com  Thu Aug 19 16:58:21 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] S57 driver: the second import
In-Reply-To: <79E12914-F212-11D8-885C-000A95CD827E@pvv.ntnu.no>
References: <0C718152-F1CA-11D8-B61B-000A95CD827E@pvv.ntnu.no>	<C109F723-F206-11D8-885C-000A95CD827E@pvv.ntnu.no>
	<79E12914-F212-11D8-885C-000A95CD827E@pvv.ntnu.no>
Message-ID: <4125146D.4020108@pobox.com>

Tore Halset wrote:
> 
> On Aug 19, 2004, at 19:39, Tore Halset wrote:
> 
>> On Aug 19, 2004, at 12:25, Tore Halset wrote:
>>
>>> Is it possible to run ogr2ogr multiple times to import different s-57 
>>> data cells into postgis?
>>
>>
>> Using both "-update" and "-lco OVERWRITE=YES" seem to fix the problem. 
>> I also upgraded gdal from version 1.2.0 to 1.2.1.
> 
> 
> Wrong!
> 
> -append -lco OVERWRITE=YES. Does not work if the cell has a layer that 
> does not exist in the database.
> 
> -update -lco OVERWRITE=YES does update features in the database with 
> features in the new cell. An import of a cell with some LNDARE will 
> work, but some of the old LNDARE in the base disapears. Perhaps 
> DSID-DSNM should have been included in the where-part of the query?

Tore,

Sorry for not responding sooner.

I gather you want to load several S-57 dataset into a set of tables in
PostGIS, is that right?  So, for instance, to append all the features of
a given type from the difference files into one table (ie. all ADMARE
features into one admare table).

This should be achievable ... in general by doing something like:

  ogr2ogr -skipfailures -update PG:<connectinfo> ABC.000 ADMARE

and then adding -append to append to the existing table for subsequent
calls:

  ogr2ogr -skipfailures -update -append PG:<connectinfo> DEF.000 ADMAREA

Doing it on all features classes at once may cause problems if different
.000 files have differing sets of features classes, as I think you have
experienced.  There isn't a smooth way of handling this within ogr2ogr
except for doing things one feature classes at a time manually.  You could
of course write a python script to smooth this out and it might be worth it
if you want all features classes and to process alot of files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From starged at videotron.ca  Sat Aug 21 20:20:14 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Correction to gdal_merge.py
Message-ID: <8apfi090hlfco1j50mfjkscne563fak9p4@4ax.com>

Hi all,

I noticed that the projection information was not written to the output file.

Looking at the code, it became evident why: there is no SetProjection().

So simply adding:

t_fh.SetProjection(file_infos[0].projection)

after line 404 does the trick.

Hope this is useful to someone :)
--
Mario B.

From carueda at ucdavis.edu  Sun Aug 22 20:57:07 2004
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] envi header info
Message-ID: <cgbfd3$1pa$2@sea.gmane.org>

I'm using GDAL/OGR to write some tools operating on raster (mostly Envi)
and vector (shapefile) files. So far I haven't seen any way to easily
access attributes from the envi header through the library, e.g.
wavelength values. Am I missing something? or do I have to solve
this query by other means? --thanks.
carlos



From mhanson at photon.com  Mon Aug 23 11:06:23 2004
From: mhanson at photon.com (Matthew Hanson)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] gdal12.dll
Message-ID: <004d01c48922$c1ae3750$643210ac@photon.com>

Hi,

I'm trying to add gdal12.dll as a reference in Visual Studio (.NET), but I
get a 
"Add Reference: Error adding reference to the project.'

Any other visual studio users out there?

Thanks
matt


From warmerdam at pobox.com  Mon Aug 23 11:06:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Correction to gdal_merge.py
In-Reply-To: <8apfi090hlfco1j50mfjkscne563fak9p4@4ax.com>
References: <8apfi090hlfco1j50mfjkscne563fak9p4@4ax.com>
Message-ID: <412A07E0.5070104@pobox.com>

Mario Beauchamp wrote:
> Hi all,
> 
> I noticed that the projection information was not written to the output file.
> 
> Looking at the code, it became evident why: there is no SetProjection().
> 
> So simply adding:
> 
> t_fh.SetProjection(file_infos[0].projection)
> 
> after line 404 does the trick.
> 
> Hope this is useful to someone :)

Mario,

I have applied this.

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Aug 23 11:08:51 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] envi header info
In-Reply-To: <cgbfd3$1pa$2@sea.gmane.org>
References: <cgbfd3$1pa$2@sea.gmane.org>
Message-ID: <412A0883.4030905@pobox.com>

Carlos A. Rueda wrote:
> I'm using GDAL/OGR to write some tools operating on raster (mostly Envi)
> and vector (shapefile) files. So far I haven't seen any way to easily
> access attributes from the envi header through the library, e.g.
> wavelength values. Am I missing something? or do I have to solve
> this query by other means? --thanks.
> carlos

Carlos,

Currently the ENVI driver in GDAL discards much of the stuff in the .hdr
file, keeping only the coordinate system, geotransform and image structure.
Ideally some of the other information would be returned as metadata but
currently it is not.

If you needs are quite specific you might just want to write some code to
read the .hdr file yourself to get it out.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From agramusset at geovectra.cl  Tue Aug 24 12:47:34 2004
From: agramusset at geovectra.cl (Anneli Gramusset)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Use of UTM datum?
Message-ID: <001b01c489fa$0e114a60$a601a8c0@geovectra.cl>

Hello,

I?m a new gdal user and I would like to transform GeoTiff files from latlong to UTM coordinates.
But I want to obtain the UTM coordinates with the PSAD56 (Provisional South America 1956) datum (not the WGS84 datum).

I have already tried with the utility program (gdalwarp) and also with de code (following the Warp API), but I always get the ouput in the WGS84 system...

I would be really thankful if someone could give some advices about this.

Anneli GRAMUSSET
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040824/60d1f3a2/attachment.html
From gillian.walter at atlantis-scientific.com  Tue Aug 24 14:20:34 2004
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] SAR Ceos border pixels
Message-ID: <412B86F2.5000606@atlantis-scientific.com>

Hi,

I don't know if anyone on this list knows anything about the history of 
the SAR ceos format and its variants, but just in case, here goes (I'd 
be grateful for even partial answers to any of the following questions):

I have been looking at the SAR ceos format driver after running into 
some problems with Alaska SAR Facility (ASF) data, and am a bit confused 
about how gdal is interpreting some of the fields.  I have been using 
the CEOS-SAR-CCT spec (March 1989) and ASF slightly non-ceos format spec 
(see the reference documents under 
http://www.asf.alaska.edu/sitemap.html) as reference.  In particular, 
I'm looking at the following fields of the file descriptor record of the 
imagery options file:

37 (bytes 237-244): Number of lines per data set (one channel) in the 
file (excluding border lines)
38 (bytes 245-248): Number of left border pixels per line
39 (bytes 249-256): Total number of data groups (or pixels) per line per 
SAR channel
40 (bytes 257-260): Number of right border pixels per line
41 (bytes 261-264): Number of top border lines
42 (bytes 265-268): Number of bottom border lines

My questions are:

1) What is the definition of a "border pixel" (padding, invalid data, 
etc.), and is the interpretation consistent between the different 
flavours of SAR ceos (I've looked at a few specs and haven't found any 
info on what the border pixels/lines are meant to be, except in the ASF 
MapProjectDataRecord spec which mentions "black edges", which I take to 
mean zero padding)?

2) Should border pixels be read in?  Gdal seems to use fields 37 and 39 
to determine rasterYsize and rasterXsize, which I think means that all 
pixels (including border pixels) get read in, and some lines (either 
only the valid lines, or the top border lines + (number of valid lines - 
top border lines) valid lines depending on what line offset is used for 
the first line) get read in.  Gdal reads in the top, bottom, right, left 
border pixel values, but doesn't seem to use them anywhere as far as I 
can tell.

3) When do GCP pixel/line coordinates include the border pixel/lines?  
The ASF spec indicated that GCPs in fields 68-75 of the Map projection 
record include the black edges (which I'm assuming are the border 
pixels), but that the corners in fields 18-25 of the Facility data 
record do not include black fill.  I couldn't find any mention of the 
border pixels in the GCP sections of the SAR CCT spec.

4) Are border pixels/lines often non-zero in actual data?

Thanks in advance for any feedback,

Gillian



From alexamici at fastwebnet.it  Tue Aug 24 17:28:27 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] SAR Ceos border pixels
In-Reply-To: <412B86F2.5000606@atlantis-scientific.com>
References: <412B86F2.5000606@atlantis-scientific.com>
Message-ID: <200408242328.28076.alexamici@fastwebnet.it>


Gillian,

On Tuesday 24 August 2004 20:20, Gillian Walter wrote:
> I don't know if anyone on this list knows anything about the history of
> the SAR ceos format and its variants, but just in case, here goes (I'd
> be grateful for even partial answers to any of the following questions):

if partial and not completely to the point is ok, then i'll share what i 
know... ;)

> I have been looking at the SAR ceos format driver after running into
> some problems with Alaska SAR Facility (ASF) data, and am a bit confused
> about how gdal is interpreting some of the fields.  I have been using
> the CEOS-SAR-CCT spec (March 1989) and ASF slightly non-ceos format spec
> (see the reference documents under
> http://www.asf.alaska.edu/sitemap.html) as reference.

i used heavily ERS1/2 complex SAR data produced by UK, D and I facilities and 
distributed in CEOS format. i also had a quick look at a Radarsat SAR dataset 
(i assume, you are interested in Radarsat data) that appeared to have a 
similar CEOS structure.

last time i checked the specs relative to the ERS CEOS format were located at 
http://earth1.esrin.esa.it/sarslc

> In particular, 
> I'm looking at the following fields of the file descriptor record of the
> imagery options file:
>
> 37 (bytes 237-244): Number of lines per data set (one channel) in the
> file (excluding border lines)
> 38 (bytes 245-248): Number of left border pixels per line
> 39 (bytes 249-256): Total number of data groups (or pixels) per line per
> SAR channel
> 40 (bytes 257-260): Number of right border pixels per line
> 41 (bytes 261-264): Number of top border lines
> 42 (bytes 265-268): Number of bottom border lines
>
> My questions are:
>
> 1) What is the definition of a "border pixel" (padding, invalid data,
> etc.), and is the interpretation consistent between the different
> flavours of SAR ceos (I've looked at a few specs and haven't found any
> info on what the border pixels/lines are meant to be, except in the ASF
> MapProjectDataRecord spec which mentions "black edges", which I take to
> mean zero padding)?

in my experience (100+ images) i can only recall zero padding borders.

> 2) Should border pixels be read in?  Gdal seems to use fields 37 and 39
> to determine rasterYsize and rasterXsize, which I think means that all
> pixels (including border pixels) get read in, and some lines (either
> only the valid lines, or the top border lines + (number of valid lines -
> top border lines) valid lines depending on what line offset is used for
> the first line) get read in.  Gdal reads in the top, bottom, right, left
> border pixel values, but doesn't seem to use them anywhere as far as I
> can tell.

again, from experience i'm ready to bet that gdal reads the whole image 
without any use of the 'border' metadata.

> 3) When do GCP pixel/line coordinates include the border pixel/lines?
> The ASF spec indicated that GCPs in fields 68-75 of the Map projection
> record include the black edges (which I'm assuming are the border
> pixels), but that the corners in fields 18-25 of the Facility data
> record do not include black fill.  I couldn't find any mention of the
> border pixels in the GCP sections of the SAR CCT spec.

no idea on this one.

> 4) Are border pixels/lines often non-zero in actual data?

i can only speak about ERS data, but i recall only one image with a black 
border. we fixed our tools to cope with that and we didn't care much 
afterwards. YMMV with other data sources thou.

that's all and i don't have access to the data and to the tools anymore :-(

cheers,
alessandro

From alexamici at fastwebnet.it  Tue Aug 24 17:28:27 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] SAR Ceos border pixels
In-Reply-To: <412B86F2.5000606@atlantis-scientific.com>
References: <412B86F2.5000606@atlantis-scientific.com>
Message-ID: <200408242328.28076.alexamici@fastwebnet.it>


Gillian,

On Tuesday 24 August 2004 20:20, Gillian Walter wrote:
> I don't know if anyone on this list knows anything about the history of
> the SAR ceos format and its variants, but just in case, here goes (I'd
> be grateful for even partial answers to any of the following questions):

if partial and not completely to the point is ok, then i'll share what i 
know... ;)

> I have been looking at the SAR ceos format driver after running into
> some problems with Alaska SAR Facility (ASF) data, and am a bit confused
> about how gdal is interpreting some of the fields.  I have been using
> the CEOS-SAR-CCT spec (March 1989) and ASF slightly non-ceos format spec
> (see the reference documents under
> http://www.asf.alaska.edu/sitemap.html) as reference.

i used heavily ERS1/2 complex SAR data produced by UK, D and I facilities and 
distributed in CEOS format. i also had a quick look at a Radarsat SAR dataset 
(i assume, you are interested in Radarsat data) that appeared to have a 
similar CEOS structure.

last time i checked the specs relative to the ERS CEOS format were located at 
http://earth1.esrin.esa.it/sarslc

> In particular, 
> I'm looking at the following fields of the file descriptor record of the
> imagery options file:
>
> 37 (bytes 237-244): Number of lines per data set (one channel) in the
> file (excluding border lines)
> 38 (bytes 245-248): Number of left border pixels per line
> 39 (bytes 249-256): Total number of data groups (or pixels) per line per
> SAR channel
> 40 (bytes 257-260): Number of right border pixels per line
> 41 (bytes 261-264): Number of top border lines
> 42 (bytes 265-268): Number of bottom border lines
>
> My questions are:
>
> 1) What is the definition of a "border pixel" (padding, invalid data,
> etc.), and is the interpretation consistent between the different
> flavours of SAR ceos (I've looked at a few specs and haven't found any
> info on what the border pixels/lines are meant to be, except in the ASF
> MapProjectDataRecord spec which mentions "black edges", which I take to
> mean zero padding)?

in my experience (100+ images) i can only recall zero padding borders.

> 2) Should border pixels be read in?  Gdal seems to use fields 37 and 39
> to determine rasterYsize and rasterXsize, which I think means that all
> pixels (including border pixels) get read in, and some lines (either
> only the valid lines, or the top border lines + (number of valid lines -
> top border lines) valid lines depending on what line offset is used for
> the first line) get read in.  Gdal reads in the top, bottom, right, left
> border pixel values, but doesn't seem to use them anywhere as far as I
> can tell.

again, from experience i'm ready to bet that gdal reads the whole image 
without any use of the 'border' metadata.

> 3) When do GCP pixel/line coordinates include the border pixel/lines?
> The ASF spec indicated that GCPs in fields 68-75 of the Map projection
> record include the black edges (which I'm assuming are the border
> pixels), but that the corners in fields 18-25 of the Facility data
> record do not include black fill.  I couldn't find any mention of the
> border pixels in the GCP sections of the SAR CCT spec.

no idea on this one.

> 4) Are border pixels/lines often non-zero in actual data?

i can only speak about ERS data, but i recall only one image with a black 
border. we fixed our tools to cope with that and we didn't care much 
afterwards. YMMV with other data sources thou.

that's all and i don't have access to the data and to the tools anymore :-(

cheers,
alessandro

From gbr at MICROPILOT.com  Tue Aug 24 17:53:21 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Creating GIFs, JPEGS, etc
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C253060@wilbur.MICROPILOT.COM>

Hi,

I'm succesfully loading DTED, USGS DEM and GTOPO30 DEM files.  I use
these data files to get elevation information for specific latitudes and
logitudes.

What I would like to do is display an image (BMP, GIF, JPEG) of the
elevation data in different colours.  I'm not quite sure on how to do
this properly.  Is there an 'easy' way to do this with GDAL?

Thanks,

Gerald

Ps: I have tried using CreateCopy, but I always get a full black or
white image.



    GDALDriver *tdriver = (GDALDriver *)GDALGetDriverByName("GIF") ;
    GDALDataset *tset ;

    tset = tdriver->CreateCopy("c:\\copy.gif", mDataInfo[2].dataset,
FALSE, NULL, NULL, NULL) ;
    GDALClose(tset) ;


From ben at vterrain.org  Tue Aug 24 23:16:21 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Frightening ancient libpng inside GDAL
In-Reply-To: <41001BFA.6090802@pobox.com>
Message-ID: <03b501c48a51$e587e8d0$f400fe0a@TOPP2>


I discovered this evening that GDAL has built into its CVS source tree, the
source to libpng 1.0.6.  This actually gets compiled into the GDAL library,
at least on Windows.  This is a _really_ old libpng, there have been giant
improvements, speedups, bug fixes, security fixes, etc.

The current version is 1.2.6.

Should we update the libpng that's in GDAL, or perhaps remove it instead,
making libpng an external dependency?

Thanks,
Ben


From ben at vterrain.org  Tue Aug 24 23:28:11 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Safety check needed for png read
Message-ID: <03b801c48a53$8c767a70$f400fe0a@TOPP2>


While in the png code (chasing GDAL crashes) i found that it calls libpng in
a very unsafe manner, not checking for failure.  We really need something
like this in pngdatset.cpp:

 poDS->hPNG = png_create_read_struct(...);
 if (poDS->hPNG == NULL)
 {
   int version = png_access_version_number();
   CPLError( CE_Failure, CPLE_NotSupported, 
     "The PNG driver failed to access libpng with version '%s',"
     " library is actually version '%d'.\n",
     PNG_LIBPNG_VER_STRING, version);
   delete poDS;
   return NULL;
 }

This will informatively catch the situation where the libpng libraries and
headers are out of sync, which is quite easy to get when wrangling with
library versioning issues, as i have been for the past 5 hours.

-Ben


From warmerdam at pobox.com  Wed Aug 25 09:11:56 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Creating GIFs, JPEGS, etc
In-Reply-To: <33CAB4AA6010A34FB7507C2D40C73F6C253060@wilbur.MICROPILOT.COM>
References: <33CAB4AA6010A34FB7507C2D40C73F6C253060@wilbur.MICROPILOT.COM>
Message-ID: <412C901C.2030200@pobox.com>

Gerald Brandt wrote:
> Hi,
> 
> I'm succesfully loading DTED, USGS DEM and GTOPO30 DEM files.  I use
> these data files to get elevation information for specific latitudes and
> logitudes.
> 
> What I would like to do is display an image (BMP, GIF, JPEG) of the
> elevation data in different colours.  I'm not quite sure on how to do
> this properly.  Is there an 'easy' way to do this with GDAL?

Gerald,

When producing 8bit (or 24bit) image files from elevation data, it is necessary
to scale the data to 8bit first.  From the commandline this can be done with
a command like:

   gdal_translate -of JPEG -ot Byte -scale W100N40.DEM out.jpg

You can look through gdal_translate to get an idea of how it accomplishes the
scaling.

Applying a colortable is a bit more complex.  Note that BMP and GIF support
paletted images while JPEG only supports greyscale or 24bit RGB output.  So
the approach will eventually differ a bit for these formats.   Addressing the
case of formats that support palettes (color tables), you would need to create
a GDALColorTable and initialize the entries appropriately.  Then set it on
the target raster band with SetColorTable().

However, only a limited set of formats support dynamic setting of the colortable.
It appears BMP does but I don't think GIF does.

To produce JPEG (24bit) output, you will likely be best off creating another
format, like BMP, and then using the pct2rgb.py script or equivelent to
convert to 24bit.

A number of other options exist of course.  If the image you want to work
with isn't too large you could create an in-memory image of what you want and
then use GDALCreateCopy() to write that to the desired format.

All in all, these sort of transformations require a fair amount of work
compared to simple untransformed translations.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Aug 25 09:42:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Safety check needed for png read
In-Reply-To: <03b801c48a53$8c767a70$f400fe0a@TOPP2>
References: <03b801c48a53$8c767a70$f400fe0a@TOPP2>
Message-ID: <412C9761.70503@pobox.com>

Ben Discoe wrote:
> While in the png code (chasing GDAL crashes) i found that it calls libpng in
> a very unsafe manner, not checking for failure.  We really need something
> like this in pngdatset.cpp:
> 
>  poDS->hPNG = png_create_read_struct(...);
>  if (poDS->hPNG == NULL)
>  {
>    int version = png_access_version_number();
>    CPLError( CE_Failure, CPLE_NotSupported, 
>      "The PNG driver failed to access libpng with version '%s',"
>      " library is actually version '%d'.\n",
>      PNG_LIBPNG_VER_STRING, version);
>    delete poDS;
>    return NULL;
>  }
> 
> This will informatively catch the situation where the libpng libraries and
> headers are out of sync, which is quite easy to get when wrangling with
> library versioning issues, as i have been for the past 5 hours.

Ben,

Suggested change applied.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sebastien.grignard at archivideo.com  Wed Aug 25 10:03:02 2004
From: sebastien.grignard at archivideo.com (Sebastien Grignard)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] .ovr overviews support for VRT format
Message-ID: <412C9C16.3010107@archivideo.com>

Hello.
I've seen that .ovr overviews creation was added to VRT format, but the 
produced overviews aren't used on read.
The included diff corrects this.

-- 
Sebastien Grignard
R&D Developer
Archivideo
40, rue des Veyettes - 35000 Rennes FRANCE
Phone: +033 2 99 86 30 20

-------------- next part --------------
Index: vrtsourcedrasterband.cpp
===================================================================
RCS file: /cvsroot/osrs/gdal/frmts/vrt/vrtsourcedrasterband.cpp,v
retrieving revision 1.2
diff -u -r1.2 vrtsourcedrasterband.cpp
--- vrtsourcedrasterband.cpp	11 Aug 2004 18:46:45 -0000	1.2
+++ vrtsourcedrasterband.cpp	25 Aug 2004 13:58:03 -0000
@@ -162,6 +162,19 @@
                            eBufType, nPixelSpace, nBufXSize );
         }
     }
+
+/* -------------------------------------------------------------------- */
+/*      Do we have overviews that would be appropriate to satisfy       */
+/*      this request?                                                   */
+/* -------------------------------------------------------------------- */
+    if( (nBufXSize < nXSize || nBufYSize < nYSize)
+        && GetOverviewCount() > 0 )
+      {
+        if( OverviewRasterIO( eRWFlag, nXOff, nYOff, nXSize, nYSize, 
+                              pData, nBufXSize, nBufYSize, 
+                              eBufType, nPixelSpace, nLineSpace ) == CE_None )
+          return CE_None;
+      }
     
 /* -------------------------------------------------------------------- */
 /*      Overlay each source in turn over top this.                      */
From warmerdam at pobox.com  Wed Aug 25 10:22:44 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] .ovr overviews support for VRT format
In-Reply-To: <412C9C16.3010107@archivideo.com>
References: <412C9C16.3010107@archivideo.com>
Message-ID: <412CA0B4.2090504@pobox.com>

Sebastien Grignard wrote:
> Hello.
> I've seen that .ovr overviews creation was added to VRT format, but the 
> produced overviews aren't used on read.
> The included diff corrects this.

Sebastien,

The overview support implemented does work for some instances, but not
any that go through this entry point.  Your patch seems to fix this up very
nicely!

I have applied your change in CVS.

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gillian.walter at atlantis-scientific.com  Wed Aug 25 11:06:02 2004
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Geotiff ModelPixelScaleTag
Message-ID: <412CAADA.8020309@atlantis-scientific.com>

Hi,

I have a question about the Geotiff ModelPixelScaleTag.  On page 25 of 
the Geotiff specification, there is a diagram indicating that either 
ModelPixelScaleTag and ModelTiepointTag, or ModelTransformationTag alone 
will be used to geocode an image.  However, the next page indicates that 
ModelPixelScaleTag and ModelTransformationTag are optional.  Is it valid 
to specify only the ModelTiepointTag and not ModelPixelScaleTag?  I was 
under the impression that it was, since the ModelPixelScaleTag and 
ModelTransformationTag parameters can't always accurately represent a 
dataset's geocoding (eg. slant range SAR imagery), but one of our 
customers disagrees, and I can see how the spec could be interpreted 
either way. 

Gillian



From christiandoenges at mac.com  Wed Aug 25 15:18:30 2004
From: christiandoenges at mac.com (Christian Doenges)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL
Message-ID: <loom.20040825T205418-90@post.gmane.org>

Hi,

we want to add Fugawi .JPR file support to our application. I would like to
put this into GDAL, since I guess that's where it belongs.

.JPR is an extension to ESRI worldfile, where the 6 standard lines are
followed by a set of key=value pairs. The graphics themselves can be in
BMP, TIFF, JPEG, GIF, or PNG format.

I don't think it makes sense to write a new driver for this, since all of
the different bitmap formats are all supported by other drivers. IMHO, it
would make more sense to extend GDALReadWorldFile() to see if the
additional key=value pairs are present and if so, to parse them.

The problem is that there is currently no way to have GDALReadWorldFile()
return data other than the geo transform matrix.

My suggestion is to change the interface of GDALReadWorldFile() from

int GDALReadWorldFile( const char * pszBaseFilename,
                       const char *pszExtension,
                       double *padfGeoTransform)

to

int GDALReadWorldFile( const char * pszBaseFilename,
                       const char *pszExtension,
                       GDALDataset *pDataset)

There are currently about 30 calls to GDALReadWorldFile(), so I think it's
not too hard to do.

While I'm at it, I would like to change the interface even further to be

int GDALReadWorldFile( const char * pszBaseFilename,
                       GDALDataset *pDataset,
                       const char *pszExtension,
                       ...)

where the ellipsis denotes a variable number of pszExtension parameters.
That way the number of calls can be reduced to 13 and the code will be
streamlined somewhat.

What do you think? I would really like to know if there is something that I
overlooked or if you have a better suggestion for handling this.

Best regards,
Christian
---
Christian D?nges
Use GPS data on Mac OS X! <http://www.truenav.com/>


From warmerdam at pobox.com  Wed Aug 25 15:36:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] GDAL Unofficial Private TIFF Tags
Message-ID: <412CEA5A.9030807@pobox.com>

Joris,

I promised to write an explanation of the GDAL private TIFF tags I have
been using.  I would like to stress again that these have not been allocated
by Adobe, though through no fault of theirs.  I never even asked.

I will say that I think both of these have some general utility and if there
was sufficient interest in the TIFF community I would be willing to come up with
a more generalized definition and to try and get properly allocated tags.

==================================================================================
GDAL_NODATA - 42113

Short Description:

Contains an ASCII encoded nodata or background pixel value.

Long Description:

Code: 42113
Name: GDAL_NODATA
Type: ASCII
Count: N
Default: None

Description:

In the geospatial image processing field especially (and in other fields) it is
common to use a special pixel value to mark geospatial areas for which no information
is available.  This is often called a "nodata" or "background" value.  Applications
often treat these pixels as transparent and they are often not included in spatial
statistics for the image.  Non-geospatial applications might still use the nodata
value to track a special value that should be treated as transparent since currently
TIFF palettes don't include an alpha value.

The GDAL_NODATA tag is intended to keep track of what pixel value is being
used for this background nodata value.  It is ASCII encoded so that if the pixel
value 255 was to be treated as nodata, then the tag would have the value "255".

If this tag is absent there is assume to be no nodata value in effect for the image.
If the image has more than one sample it is assumed that all samples have the same
nodata value.

This tag is currently only supported by the GDAL library.

See Also:
   GDAL Library: http://www.remotesensing.org/gdal/

==================================================================================
GDAL_METADATA - 42112

Short Description:

Holds an XML list of name=value "metadata" values about the image.   Used only
by the GDAL library.

Long Description:

Code: 42112
Name: GDAL_METADATA
Type: ASCII
Count: N
Default: None

Description:

Contains an XML fragment that looks like this example:
<GDALMetadata>
   <Item name="CEOS_LOGICAL_VOLUMNE_ID">RSAT-1-SAR-SGF</Item>
</GDALMetadata>

The <Item> names are the name of a metadata keyword, and the text contents of
the Item are it's value.  Normal XML escaping applies.  The GDALMetadata tag
may have zero or more Item sub-elements.  Generally speaking the item names
should be well behaved tokens (alpha-numeric + underscores) though that isn't
strictly enforced.  Also, normally the names are assumed to be unique.

This is an unregistered tag used only by the GDAL library and applications built
on it to hold "dataset" level Metadata about geospatial datasets.


See Also:
   GDAL Library: http://www.remotesensing.org/gdal/





-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Aug 25 15:36:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] [Tiff] GDAL Unofficial Private TIFF Tags
Message-ID: <412CEA5A.9030807@pobox.com>

Joris,

I promised to write an explanation of the GDAL private TIFF tags I have
been using.  I would like to stress again that these have not been allocated
by Adobe, though through no fault of theirs.  I never even asked.

I will say that I think both of these have some general utility and if there
was sufficient interest in the TIFF community I would be willing to come up with
a more generalized definition and to try and get properly allocated tags.

==================================================================================
GDAL_NODATA - 42113

Short Description:

Contains an ASCII encoded nodata or background pixel value.

Long Description:

Code: 42113
Name: GDAL_NODATA
Type: ASCII
Count: N
Default: None

Description:

In the geospatial image processing field especially (and in other fields) it is
common to use a special pixel value to mark geospatial areas for which no information
is available.  This is often called a "nodata" or "background" value.  Applications
often treat these pixels as transparent and they are often not included in spatial
statistics for the image.  Non-geospatial applications might still use the nodata
value to track a special value that should be treated as transparent since currently
TIFF palettes don't include an alpha value.

The GDAL_NODATA tag is intended to keep track of what pixel value is being
used for this background nodata value.  It is ASCII encoded so that if the pixel
value 255 was to be treated as nodata, then the tag would have the value "255".

If this tag is absent there is assume to be no nodata value in effect for the image.
If the image has more than one sample it is assumed that all samples have the same
nodata value.

This tag is currently only supported by the GDAL library.

See Also:
   GDAL Library: http://www.remotesensing.org/gdal/

==================================================================================
GDAL_METADATA - 42112

Short Description:

Holds an XML list of name=value "metadata" values about the image.   Used only
by the GDAL library.

Long Description:

Code: 42112
Name: GDAL_METADATA
Type: ASCII
Count: N
Default: None

Description:

Contains an XML fragment that looks like this example:
<GDALMetadata>
   <Item name="CEOS_LOGICAL_VOLUMNE_ID">RSAT-1-SAR-SGF</Item>
</GDALMetadata>

The <Item> names are the name of a metadata keyword, and the text contents of
the Item are it's value.  Normal XML escaping applies.  The GDALMetadata tag
may have zero or more Item sub-elements.  Generally speaking the item names
should be well behaved tokens (alpha-numeric + underscores) though that isn't
strictly enforced.  Also, normally the names are assumed to be unique.

This is an unregistered tag used only by the GDAL library and applications built
on it to hold "dataset" level Metadata about geospatial datasets.


See Also:
   GDAL Library: http://www.remotesensing.org/gdal/





-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Tiff mailing list
Tiff@remotesensing.org
http://xserve.flids.com/mailman/listinfo/tiff




From warmerdam at pobox.com  Wed Aug 25 16:04:21 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL
In-Reply-To: <loom.20040825T205418-90@post.gmane.org>
References: <loom.20040825T205418-90@post.gmane.org>
Message-ID: <412CF0C5.6010205@pobox.com>

Christian Doenges wrote:
> Hi,
> 
> we want to add Fugawi .JPR file support to our application. I would like to
> put this into GDAL, since I guess that's where it belongs.
> 
> .JPR is an extension to ESRI worldfile, where the 6 standard lines are
> followed by a set of key=value pairs. The graphics themselves can be in
> BMP, TIFF, JPEG, GIF, or PNG format.

> While I'm at it, I would like to change the interface even further to be
> 
> int GDALReadWorldFile( const char * pszBaseFilename,
>                        GDALDataset *pDataset,
>                        const char *pszExtension,
>                        ...)
> 
> where the ellipsis denotes a variable number of pszExtension parameters.
> That way the number of calls can be reduced to 13 and the code will be
> streamlined somewhat.
> 
> What do you think? I would really like to know if there is something that I
> overlooked or if you have a better suggestion for handling this.

Christian,

What are the name=value items in the .JPR file?  Are you planning to
apply them to the GDALDataset as metadata?   I would note that ESRI sometimes
products .wld files with a much of projection parameters right in the .wld file.
So, if you are going to read beyond the first six lines you will need to be
careful to verify what you fin are Fugawi values, and not ESRI extensions
to the world file.

I have a couple of other notes:
  o I prefer that you define a new version of GDALReadWorldFile() and just
    have the old version call into the new version with appropriate
    arguments if possible ... of possibly even duplicate the code.  It may
    be hard to get all places where GDALReadWorldFile() is used, some of
    which are in private code bases.  You might want to call the new version
    GDALReadWorldFileEx().

  o I like the idea of passing a list of extensions as a variable argument list.

  o I am nervous about having GDALReadWorldFile() try and apply it's results
    directly to a GDALDataset. For one thing, if you do this by calling the
    SetGeoTransform() methods, some of the drivers may get confused and thing
    this is the outside application calling, and that something on disk should
    be updated.  It also makes it harder to use the function for something other
    than setting information directly on a dataset.  I would suggest we stick
    with passing a GeoTransform to set, and potentially also passing a char ***
    into which a metadata list could be assigned if it is read from the
    world file.

Thus we might have:

int GDALReadWorldFileEx( const char *pszBaseFilename, double *padfGeoTransform,
                          char ***ppapszMetadata, char *pszExtention, ... );

If ppapszMetadata is NULL then we don't even try to read the metadata.

Of course this does mean that each place where it is called must take care of
integrating metadata from the .JPR file into the other dataset metadata but
that might be a task worthy of driver by driver consideration anyways.

With the given caveats it sounds like a great improvement.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ed at topozone.com  Wed Aug 25 16:27:32 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL
Message-ID: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CD19@ptolemy.topozone.com>

Christian -

I presume you have found the JPR specification at http://www.fugawi.com/docs/jprdoc.pdf

Unfortunately, the spec says that all of the fields are optional, which makes it a little tricky to accurately identify the file.  You may wish to insist that it have a filename ending in .jpr; otherwise I think you'd need to check for all the possible keys and see if any are present.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 978 251-4242   Fax: +1 978 251-1396  

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com [mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Christian Doenges
Sent: Wednesday, August 25, 2004 3:19 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL

Hi,

we want to add Fugawi .JPR file support to our application. I would like to put this into GDAL, since I guess that's where it belongs.

.JPR is an extension to ESRI worldfile, where the 6 standard lines are followed by a set of key=value pairs. The graphics themselves can be in BMP, TIFF, JPEG, GIF, or PNG format.

I don't think it makes sense to write a new driver for this, since all of the different bitmap formats are all supported by other drivers. IMHO, it would make more sense to extend GDALReadWorldFile() to see if the additional key=value pairs are present and if so, to parse them.

The problem is that there is currently no way to have GDALReadWorldFile() return data other than the geo transform matrix.

My suggestion is to change the interface of GDALReadWorldFile() from

int GDALReadWorldFile( const char * pszBaseFilename,
                       const char *pszExtension,
                       double *padfGeoTransform)

to

int GDALReadWorldFile( const char * pszBaseFilename,
                       const char *pszExtension,
                       GDALDataset *pDataset)

There are currently about 30 calls to GDALReadWorldFile(), so I think it's not too hard to do.

While I'm at it, I would like to change the interface even further to be

int GDALReadWorldFile( const char * pszBaseFilename,
                       GDALDataset *pDataset,
                       const char *pszExtension,
                       ...)

where the ellipsis denotes a variable number of pszExtension parameters.
That way the number of calls can be reduced to 13 and the code will be streamlined somewhat.

What do you think? I would really like to know if there is something that I overlooked or if you have a better suggestion for handling this.

Best regards,
Christian
---
Christian D?nges
Use GPS data on Mac OS X! <http://www.truenav.com/>

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed Aug 25 16:49:01 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL
In-Reply-To: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CD19@ptolemy.topozone.com>
References: <2A6FDD75AE04BE4A9E8C918D3C09FB0721CD19@ptolemy.topozone.com>
Message-ID: <412CFB3D.90304@pobox.com>

Ed McNierney wrote:
> Christian -
> 
> I presume you have found the JPR specification at http://www.fugawi.com/docs/jprdoc.pdf
> 
> Unfortunately, the spec says that all of the fields are optional, which makes 
 > it a little tricky to accurately identify the file.  You may wish to insist
 > that it have a filename ending in .jpr; otherwise I think you'd need to check
 > for all the possible keys and see if any are present.

Ed / Christian,

Ahh, I see.  So the .JPR file can contain the geotransform, GCPs and
SRS.  That will be a bit involved to return to the caller properly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Aug 25 16:50:23 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL
In-Reply-To: <SYLVANSERVERyoz5Bl800002321@sylvanserver.sylvanmaps.com>
References: <SYLVANSERVERyoz5Bl800002321@sylvanserver.sylvanmaps.com>
Message-ID: <412CFB8F.4010307@pobox.com>

Roger Bedell wrote:
> While we're in the vicinity,
> 
> How about the OziMap format? The ones I've seen have three tie points in
> them, and need to be warped to bring them into a projection.

Roger,

Do you have examples and/or a spec?  Is that "in the area" because OziMap
is related to Fugawi in some way?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From christiandoenges at mac.com  Wed Aug 25 17:44:55 2004
From: christiandoenges at mac.com (Christian Doenges)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL
In-Reply-To: <412CF0C5.6010205@pobox.com>
References: <loom.20040825T205418-90@post.gmane.org>
	<412CF0C5.6010205@pobox.com>
Message-ID: <00AA955C-F6E0-11D8-8C65-0003936523E0@mac.com>

On 25.08.2004, at 22:04, Frank Warmerdam wrote:
> int GDALReadWorldFileEx( const char *pszBaseFilename, double 
> *padfGeoTransform,
>                          char ***ppapszMetadata, char *pszExtention, 
> ... );
>
> If ppapszMetadata is NULL then we don't even try to read the metadata.

Frank / Ed,

I _was_ going to modify the GDALDataset directly, but I see that this 
is not such a good idea if it will break existing drivers. And you are, 
of course, right about private code bases.

Metadata is my original fall-back solution, but there are a number of 
issues with it (see below).


> Of course this does mean that each place where it is called must take 
> care of
> integrating metadata from the .JPR file into the other dataset 
> metadata but
> that might be a task worthy of driver by driver consideration anyways.

It's not an optimal solution, since I'll need to modify 5 drivers. 
Maybe I can create a single function that will do the modifications for 
all of the drivers? So the driver will do something similar to:

if (GDALReadWorldFileEx(....))
{
     GDALApplyMetataToDataset(this, papszMetadata);
}

Since the function will only need to work for BMP, TIFF, JPEG, GIF, and 
PNG, it may be possible. I'll have to look into this.


On 25.08.2004, at 22:04, Frank Warmerdam wrote:
> Ahh, I see.  So the .JPR file can contain the geotransform, GCPs and
> SRS.  That will be a bit involved to return to the caller properly.

Which is why I wanted to modify GDALDataset directly in the first 
place. ;-)

I think it will be best to define a 'standard' set of metadata for 
this. The projection could, for example, be turned into an OpenGIS WKT 
or an EPSG identifier. It would make sense to include rules such as not 
having GCPs if we have the geotransform matrix (and vice versa) so that 
the .JPR parser can reduce the complexity of the data the driver will 
have to deal with.

Having 'standard' metadata would also help with other formats that 
allow, for example, specification of useable map boundaries or insets 
into the map.


On 25.08.2004, at 22:27, Ed McNierney wrote:
> Unfortunately, the spec says that all of the fields are optional, 
> which makes it a little tricky to accurately identify the file.  You 
> may wish to insist that it have a filename ending in .jpr; otherwise I 
> think you'd need to check for all the possible keys and see if any are 
> present.

I don't know all the ESRI extensions to TFW, so I don't know if any 
conflict with the Fugawi extensions. Is there a specification?

If I can rule out conflicts, I will simply loop through the lines and 
match what I can. When I'm done, I will collect the data and cluster it 
into metadata, as outlined above.

If I can't rule out conflicts, I will insist on .jpr.

Best regards,
Christian
---
Christian D?nges
Use GPS data on Mac OS X! <http://www.truenav.com/>


From warmerdam at pobox.com  Wed Aug 25 18:08:09 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL
In-Reply-To: <00AA955C-F6E0-11D8-8C65-0003936523E0@mac.com>
References: <loom.20040825T205418-90@post.gmane.org>	<412CF0C5.6010205@pobox.com>
	<00AA955C-F6E0-11D8-8C65-0003936523E0@mac.com>
Message-ID: <412D0DC9.8010007@pobox.com>

Christian Doenges wrote:
> I don't know all the ESRI extensions to TFW, so I don't know if any 
> conflict with the Fugawi extensions. Is there a specification?
> 
> If I can rule out conflicts, I will simply loop through the lines and 
> match what I can. When I'm done, I will collect the data and cluster it 
> into metadata, as outlined above.
> 
> If I can't rule out conflicts, I will insist on .jpr.

Christian,

I am not aware of a specification.  I would suggest sticking to .jpr for now
if that is not big imposition.

On the issue of changes to each of the drivers, I think some of that is
inevitable.  For instance, some of the drivers that have never had support
for a projection before will just fall through to the default GDALDataset
GetProjectionRef() which just returns an empty string.  The default
SetProjection() would also just issue an error message and return.

Some other kinds of data, such as metadata is built into the base class and
can be set on any GDALDataset even if it hasn't made any special effort to
implement metadata methods.

While the original design decisions on my part can be questioned, the net
effect is now that you will need to look over each of the drivers you would
like to support JPR files and potentially override some of the requested
methods, and add new data items to the derived dataset class.  This has already
been done for format drivers support geotransforms from world files for instance.

Now, this task shouldn't really be too onerous but it should be kept in mind.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From roger at sylvanmaps.com  Wed Aug 25 16:38:54 2004
From: roger at sylvanmaps.com (Roger Bedell)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Adding Fugawi .JPR Support to GDAL
In-Reply-To: <412CF0C5.6010205@pobox.com>
Message-ID: <SYLVANSERVERyoz5Bl800002321@sylvanserver.sylvanmaps.com>

While we're in the vicinity,

How about the OziMap format? The ones I've seen have three tie points in
them, and need to be warped to bring them into a projection.

Roger

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Frank Warmerdam
Sent: Wednesday, August 25, 2004 2:04 PM
To: Christian Doenges
Cc: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Adding Fugawi .JPR Support to GDAL

Christian Doenges wrote:
> Hi,
> 
> we want to add Fugawi .JPR file support to our application. I would like
to
> put this into GDAL, since I guess that's where it belongs.
> 
> .JPR is an extension to ESRI worldfile, where the 6 standard lines are
> followed by a set of key=value pairs. The graphics themselves can be in
> BMP, TIFF, JPEG, GIF, or PNG format.

> While I'm at it, I would like to change the interface even further to be
> 
> int GDALReadWorldFile( const char * pszBaseFilename,
>                        GDALDataset *pDataset,
>                        const char *pszExtension,
>                        ...)
> 
> where the ellipsis denotes a variable number of pszExtension parameters.
> That way the number of calls can be reduced to 13 and the code will be
> streamlined somewhat.
> 
> What do you think? I would really like to know if there is something that
I
> overlooked or if you have a better suggestion for handling this.

Christian,

What are the name=value items in the .JPR file?  Are you planning to
apply them to the GDALDataset as metadata?   I would note that ESRI
sometimes
products .wld files with a much of projection parameters right in the .wld
file.
So, if you are going to read beyond the first six lines you will need to be
careful to verify what you fin are Fugawi values, and not ESRI extensions
to the world file.

I have a couple of other notes:
  o I prefer that you define a new version of GDALReadWorldFile() and just
    have the old version call into the new version with appropriate
    arguments if possible ... of possibly even duplicate the code.  It may
    be hard to get all places where GDALReadWorldFile() is used, some of
    which are in private code bases.  You might want to call the new version
    GDALReadWorldFileEx().

  o I like the idea of passing a list of extensions as a variable argument
list.

  o I am nervous about having GDALReadWorldFile() try and apply it's results
    directly to a GDALDataset. For one thing, if you do this by calling the
    SetGeoTransform() methods, some of the drivers may get confused and
thing
    this is the outside application calling, and that something on disk
should
    be updated.  It also makes it harder to use the function for something
other
    than setting information directly on a dataset.  I would suggest we
stick
    with passing a GeoTransform to set, and potentially also passing a char
***
    into which a metadata list could be assigned if it is read from the
    world file.

Thus we might have:

int GDALReadWorldFileEx( const char *pszBaseFilename, double
*padfGeoTransform,
                          char ***ppapszMetadata, char *pszExtention, ... );

If ppapszMetadata is NULL then we don't even try to read the metadata.

Of course this does mean that each place where it is called must take care
of
integrating metadata from the .JPR file into the other dataset metadata but
that might be a task worthy of driver by driver consideration anyways.

With the given caveats it sounds like a great improvement.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev


From robert at openscenegraph.com  Thu Aug 26 02:28:59 2004
From: robert at openscenegraph.com (robert@openscenegraph.com)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Mail Delivery (failure gdal-dev@remotesensing.org)
Message-ID: <20040826062652.8CDEC254FF6@xserve.flids.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: audio/x-wav
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040826/58cc964d/attachment.wav
From packalen at cs.joensuu.fi  Thu Aug 26 06:58:53 2004
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] ORACLE driver fails to fetch a VARCHAR2(4000) column
Message-ID: <Pine.GSO.4.58.0408261355530.24478@cs>

Hi,

I encountered some problems when trying to convert ORACLE table to some
other format by using ogr2ogr. The table has a column of type
VARCHAR2(4000). There seems to be some sort of buffer problem relating
long text fields.

When I give a command like "ogr2ogr -f "ESRI Shapefile"
out_kohteet OCI:user/passw@db KOHTEET" I get a message "ERROR 1:
ORA-01406: fetched column value was truncated in OCIStmtFetch". The
shapefile is created but it is empty. I don't actually need this
VARCHAR2(4000) column. I know that the maximum length of the string in dbf
file is 254 characters. Anyway, it doesn't help if I try to restrict the
columns fetched by using the switch "-select". It still produces the same
error code. Also the geometry type in created shapefile is not correct
('line' instead of (2D) 'point'). I assume that in this case OGR first
fetches all columns from ORACLE and then internally retsricts which
columns are written to output file. The switch -sql "SELECT attr1, attr2,
..." fetches all attributes properly but the geometry type (and actual
geometries) is still wrong ('line' instead of (2D) 'point'). I assume that
in this case -sql statement is actually passed to ORACLE because it
doesn't produce the same error code.

Software versions are:
  GDAL 1.2.1.0, released 2004/06/23
  Oracle9i Release 9.2.0.4.0

Any hints how to work around the problem?

Best regards,
Petteri

=========================================================================
Petteri Packal?n                   "There are two major products that
University of Joensuu               came out of Berkeley: LSD and UNIX.
Faculty of Forestry                 We don't believe this to be a
P.O. Box 111                        coincidence."  -- J.S. Anderson
80101 Joensuu
Finland                            "There still remains a question: Which
e-mail: packalen@cs.joensuu.fi      caused the other?"
=========================================================================


From roger at sylvanmaps.com  Thu Aug 26 11:20:20 2004
From: roger at sylvanmaps.com (Roger Bedell)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] OziExplorer MAP file
In-Reply-To: <412CFB8F.4010307@pobox.com>
Message-ID: <SYLVANSERVER8VrRQvX0000280d@sylvanserver.sylvanmaps.com>

Sorry Frank, my finger slipped and hit the send button.

I guess they are similar problems because they are both odd variants of a
world file.

Actually, perhaps you might recognize this file as something else?

OziExplorer Map Data File Version 2.1
Victoria 92B.png
D:\Victoria 92B.png
1  TIFF scale factor
NAD83,WGS 84,   0.0000,   0.0000,WGS 84
Reserved 1
Reserved 2
Magnetic Variation,,,E
Map Projection,(UTM) Universal Transverse
Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
Point01,xy,  888,  492,in, deg,    ,        ,N,    ,        ,W, grid, 10,
460000,    5410000,N
Point02,xy, 2067, 2167,in, deg,    ,        ,N,    ,        ,W, grid, 10,
510000,    5340000,N
Point03,xy, 2778, 1216,in, deg,    ,        ,N,    ,        ,W, grid, 10,
540000,    5380000,N
Point04,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,
,           ,N
Point05,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,
,           ,N
Point06,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,
,           ,N
Point07,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,
,           ,N
Point08,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,
,           ,N
Point09,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,
,           ,N
Point10,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point11,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point12,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point13,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point14,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point15,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point16,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point17,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point18,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point19,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point20,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point21,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point22,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point23,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point24,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point25,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point26,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point27,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point28,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point29,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Point30,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,
,           ,
Projection Setup,,,,,,,,,,
Map Feature = MF ; Map Comment = MC     These follow if they exist
Track File = TF      These follow if they exist
Moving Map Parameters = MM?    These follow if they exist
MM0,Yes
MMPNUM,4
MMPXY,1,105,63
MMPXY,2,3564,76
MMPXY,3,3591,2723
MMPXY,4,66,2712
MMPLL,1,-124.000128,  48.999108
MMPLL,2,-121.999775,  48.999986
MMPLL,3,-122.001165,  48.001728
MMPLL,4,-124.000025,  47.999974
MM1B,42.298414
MOP,Map Open Position,0,0
IWH,Map Image Width/Height,3657,2801

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, August 25, 2004 2:50 PM
To: Roger Bedell
Cc: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Adding Fugawi .JPR Support to GDAL

Roger Bedell wrote:
> While we're in the vicinity,
> 
> How about the OziMap format? The ones I've seen have three tie points in
> them, and need to be warped to bring them into a projection.

Roger,

Do you have examples and/or a spec?  Is that "in the area" because OziMap
is related to Fugawi in some way?

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
OziExplorer Map Data File Version 2.1
Victoria 92B.png
D:\Victoria 92B.png
1  TIFF scale factor
NAD83,WGS 84,   0.0000,   0.0000,WGS 84
Reserved 1
Reserved 2
Magnetic Variation,,,E
Map Projection,(UTM) Universal Transverse Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
Point01,xy,  888,  492,in, deg,    ,        ,N,    ,        ,W, grid, 10,     460000,    5410000,N
Point02,xy, 2067, 2167,in, deg,    ,        ,N,    ,        ,W, grid, 10,     510000,    5340000,N
Point03,xy, 2778, 1216,in, deg,    ,        ,N,    ,        ,W, grid, 10,     540000,    5380000,N
Point04,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,           ,           ,N
Point05,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,           ,           ,N
Point06,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,           ,           ,N
Point07,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,           ,           ,N
Point08,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,           ,           ,N
Point09,xy,     ,     ,in, deg,    ,        ,N,    ,        ,W, grid,   ,           ,           ,N
Point10,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point11,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point12,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point13,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point14,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point15,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point16,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point17,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point18,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point19,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point20,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point21,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point22,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point23,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point24,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point25,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point26,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point27,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point28,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point29,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point30,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Projection Setup,,,,,,,,,,
Map Feature = MF ; Map Comment = MC     These follow if they exist
Track File = TF      These follow if they exist
Moving Map Parameters = MM?    These follow if they exist
MM0,Yes
MMPNUM,4
MMPXY,1,105,63
MMPXY,2,3564,76
MMPXY,3,3591,2723
MMPXY,4,66,2712
MMPLL,1,-124.000128,  48.999108
MMPLL,2,-121.999775,  48.999986
MMPLL,3,-122.001165,  48.001728
MMPLL,4,-124.000025,  47.999974
MM1B,42.298414
MOP,Map Open Position,0,0
IWH,Map Image Width/Height,3657,2801
From warmerdam at pobox.com  Thu Aug 26 12:02:19 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: OziExplorer MAP file
In-Reply-To: <SYLVANSERVER8VrRQvX0000280d@sylvanserver.sylvanmaps.com>
References: <SYLVANSERVER8VrRQvX0000280d@sylvanserver.sylvanmaps.com>
Message-ID: <412E098B.1050009@pobox.com>

Roger Bedell wrote:
> Sorry Frank, my finger slipped and hit the send button.
> 
> I guess they are similar problems because they are both odd variants of a
> world file.
> 
> Actually, perhaps you might recognize this file as something else?

Roger,

Interesting.  Basically we are talking about a variety of external text
files that can be used to provide coordinate system, geotransform and
GCPs for a variety of raster formats.

This is different enough I would hesitate to put support in GDALReadWorldFile().

I'm not eager to dig into the ozimap myself.  It looks a bit complicated.
Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Thu Aug 26 12:44:43 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] OGRSpatialReference WKS question
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B67@mailman.san.com>

Given the well known string for a spatial reference, what is the OGR
syntax that will always return the expected node?  For example, what is
the syntax that will always return all the GEOGCS|AXIS nodes for the
following WKS?
 
PROJCS
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#PROJCS> ["OSGB 1936 / British National Grid",
        GEOGCS
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#GEOGCS> ["OSGB 1936",
            DATUM
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#DATUM> ["OSGB_1936",
                SPHEROID
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#SPHEROID> ["Airy
1830",6377563.396,299.3249646,AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","7001"]],
                TOWGS84
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#TOWGS84> [375,-111,431,0,0,0,0],
                AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","6277"]],
            PRIMEM
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#PRIMEM> ["Greenwich",0,AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","8901"]],
            UNIT
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#UNIT> ["DMSH",0.0174532925199433,AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","9108"]],
            AXIS
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AXIS> ["Lat",NORTH],
            AXIS
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AXIS> ["Long",EAST],
            AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","4277"]],
        PROJECTION
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#PROJECTION> ["Transverse_Mercator"],
        PARAMETER
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#PARAMETER> ["latitude_of_origin",49],
        PARAMETER
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#PARAMETER> ["central_meridian",-2],
        PARAMETER
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#PARAMETER> ["scale_factor",0.999601272],
        PARAMETER
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#PARAMETER> ["false_easting",400000],
        PARAMETER
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#PARAMETER> ["false_northing",-100000],
        UNIT
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#UNIT> ["metre",1,AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","9001"]],
        AXIS
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AXIS> ["E",EAST],
        AXIS
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AXIS> ["N",NORTH],
        AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","27700"]],
    VERT_CS
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#VERT_CS> ["Newlyn",
        VERT_DATUM
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#VERT_DATUM> ["Ordnance Datum Newlyn",2005,AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","5101"]],
        UNIT
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#UNIT> ["metre",1,AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","9001"]],
        AXIS
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AXIS> ["Up",UP],
        AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","5701"]],
    AUTHORITY
<http://geoapi.sourceforge.net/snapshot/javadoc/org/opengis/referencing/
doc-files/WKT.html#AUTHORITY> ["EPSG","7405"]]
 
I know I can use something like
OGRSpatialReference->GetAttrValue("UNIT", 0), but that will only return
the first UNIT child node depending on where the root is.  Does anyone
have this worked out.  Code would be much appreciated.
 
Thanks,
 
Martin Chapman
Cell 303-885-1936
Office 303-495-6300 x326
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040826/0351d326/attachment.html
From bfraser at geoanalytic.com  Thu Aug 26 12:53:10 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] ECW coordinate system definitions (and other proprietary
	definition methods)
Message-ID: <01ff01c48b8d$2b310920$020002c0@SHARK>

Frank,

   While doing some work trying to create the coordinate system definitions for MapInfo's TAB file (yuck!), I noticed that some interpretation of ERMapper's ECW coordinate systems has been done about a year ago.  Due to the current path searching setup for GDAL, it will only work if the translation file (ecw_cs.dat) is in "/usr/local/share/gdal" or the current working directory.

   I made a small change to my local copy of cpl_findfile.cpp to include the place where the PROJ data files are kept (defined by the PROJ_LIB environment variable); at line 74:

        CPLPushFinderLocation( "." );
        CPLPushFinderLocation( CPLGetConfigOption("PROJ_LIB","/proj/nad") );

  But perhaps it should also include the directory of the executable (or a "data" subdir)?  Your thoughts?

Thanks!
Brent Fraser
GeoAnalytic Inc.
Tel:(403) 213-2700
bfraser@geoanalytic.com
www.geoanalytic.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040826/7214e480/attachment.html
From warmerdam at pobox.com  Thu Aug 26 13:57:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Re: ECW coordinate system definitions (and other
 proprietary definition methods)
In-Reply-To: <01ff01c48b8d$2b310920$020002c0@SHARK>
References: <01ff01c48b8d$2b310920$020002c0@SHARK>
Message-ID: <412E24A3.4060106@pobox.com>

Brent Fraser wrote:
> Frank,
>  
>    While doing some work trying to create the coordinate system 
> definitions for MapInfo's TAB file (yuck!), I noticed that some 
> interpretation of ERMapper's ECW coordinate systems has been done about 
> a year ago.  Due to the current path searching setup for GDAL, it will 
> only work if the translation file (ecw_cs.dat) is in 
> "/usr/local/share/gdal" or the current working directory.
>  
>    I made a small change to my local copy of cpl_findfile.cpp to include 
> the place where the PROJ data files are kept (defined by the PROJ_LIB 
> environment variable); at line 74:
>  
>         CPLPushFinderLocation( "." );
>         CPLPushFinderLocation( CPLGetConfigOption("PROJ_LIB","/proj/nad") );
>   But perhaps it should also include the directory of the executable (or 
> a "data" subdir)?  Your thoughts?

Brent,

The ecw_cs.dat file should be found in the "gdal data" directory.  On unix
this defaults to /usr/local/share/gdal or ${prefix}/share/gdal if you
configure to install elsewhere.   However, you can also override the search
location for GDAL data files with the GDAL_DATA environment variable.
Programmatically the equivelent can be accomplished by calling
CPLSetConfigOptions("GDAL_DATA", "...") or by an appropriate call to
CPLPushFinderLocation() like what you have given.  But I don't particularly
think it is wise to use the PROJ_LIB variable.

We could conceivably try and set GDAL_DATA as ../data relative to the executable.
This would work in "normal" installs as well, but means we need to know where
the executable was from.  This can be arranged in the GDAL utilities but there
is no effort yet to make GDAL using programs report their argv[0].

In short, I think setting GDAL_DATA in the environment is the easiest way of
handling the issue.

NOTE: in various circumstances GDAL and OGR depend on a variety of other
files from the "gdal data" directory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gbr at MICROPILOT.com  Thu Aug 26 17:29:57 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] OGR samples
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C253064@wilbur.MICROPILOT.COM>

Hi,

I'd like to look at some samples (C/C++) on how to use OGR.
Specifically, I'd like to SHP files and plot the data.  I haven't looked
to hard, but I'm not sure how to get the data from OGR.

Gerald

From gbr at MICROPILOT.com  Thu Aug 26 17:40:17 2004
From: gbr at MICROPILOT.com (Gerald Brandt)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] OGR samples
Message-ID: <33CAB4AA6010A34FB7507C2D40C73F6C253065@wilbur.MICROPILOT.COM>

Just found an email from July 14 that may help.

> -----Original Message-----
> From: gdal-dev-bounces@xserve.flids.com 
> [mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Gerald Brandt
> Sent: Thursday, August 26, 2004 4:30 PM
> To: gdal-dev@remotesensing.org
> Subject: [Gdal-dev] OGR samples
> 
> 
> Hi,
> 
> I'd like to look at some samples (C/C++) on how to use OGR. 
> Specifically, I'd like to SHP files and plot the data.  I 
> haven't looked to hard, but I'm not sure how to get the data from OGR.
> 
> Gerald
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com 
> http://xserve.flids.com/mailman/listinfo/gdal-> dev
> 

From lists at webmapit.com.br  Thu Aug 26 20:44:05 2004
From: lists at webmapit.com.br (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] how to build GDAL with GRASS support and GRASS with GDAL
	support?
Message-ID: <412E83D5.4080109@webmapit.com.br>

"./configure" script of GDAL has --with-grass option...

but how should I do it if to build GRASS I may also have a --with-gdal 
when compiling GRASS?

what will be the right procedure? to build GRASS, after build GDAL and 
then re-build GRASS ? or is there another way?

best regards

-- 
*Eduardo Patto Kanegae*
http://www.webmapit.com.br
UIN: 303747254
Valinhos/SP/Brasil +55(19)3871-4875

Treinamento em UMN MapServer - http://www.webmapit.eti.br/ptbr/?menuoption=mapserver
F?rum MapServer Brasil - http://mapserver.cttmar.univali.br/forum

***Fim da Mensagem / End of Message ***


From MChapman at sanz.com  Fri Aug 27 02:50:10 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] OGR Spatial Reference smart pointer class
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B69@mailman.san.com>

Frank,
 
Inspired by ATL's CComPtr and memory.h's auto_ptr class I decided to write a quick smart pointer class for the OGRSpatialReference class to ensure that I was always calling Reference() and Dereference() correctly, even if an error occurs.  The attached header file (OGRPtr.h) contains a template class called OGRPtr.  The class is a smart pointer wrapper for the OGRSpatialReference class.  It overloads the appropriate pointer operators so you can use the class just like a pointer to spatial refs allocated on the heap.  Because the template class is allocated on the stack, the smart pointers destructor will always get called when it goes out of scope.  In the destructor I call Dereference() on the encapsulated pointer, thus ensuring correct memory deallocation even in the event of an error.  This works much like memory.h's auto_ptr class, which calls delete instead.  The overhead is small for the no-leak guarantee for server systems that need to run for months on end.  Here is some code snippets on how to use it:
 
#include "OGRPtr.h"
 
// does not call reference but could if you un comment the code in the destructor of OGRPtr to do so
COGRPtr< OGRSpatialReference> spSRS = new OGRSpatialReference(GetWellKnownText());
 
// then use pointer as normal
spSRS->SetProjCS("UTM 17 / WGS84");

//if you want you can return the raw pointer without calling dereference,
//otherwise Dereference always gets called when the COGRPtr class goes out of scope
return spSRS.Detach();
...
 
//there are also several other useful function and overloaded operators...
!, <, ==, *, &, ->, =, Attach(), Detach(), CopyTo(), etc...
 
 
Anyway, I thought you might want to include it as a util class or something for OGRSpatialReference because of the ref counting.  It could be expanded to work with other classes if they also use reference counting and derive from a common base class.  If not, hopefully someone will find it useful.
 
Best Reguards,
Martin Chapman
 
 
-------------- next part --------------
#ifndef OGRPtr_h
  #define OGRPtr_h

#include "gdal_priv.h"

#define OGR_OK (0x00000000L)
#define OGR_POINTER (0x00000001L)

template <class T>
class RefDeref : public T
{
public:
	long Reference();
	long Dereference();
};

template <class T>
class COGRPtrObject
{
public:
	typedef T OGRPtrClass;
	~COGRPtrObject() throw() {if (p) p->Dereference();}
	bool operator ! () const throw() {return (p == NULL);}
	bool operator < (T* pT) const throw() { return p < pT;}
	bool operator == (T* pT) const throw() {return p == pT;}
	operator T * () const throw() {return p;}
	T& operator * () const throw()
	{
		assert(p != NULL);
		return *p;
	}
	T** operator & () throw()
	{
		assert(p == NULL);
		return &p;
	}
	RefDeref<T>* operator -> () const throw()
	{
		assert(p != NULL);
		return (RefDeref<T>*)p;
	}
	void Dereference() throw()
	{
		T* pTemp = p;
		if (pTemp)
		{
			p = NULL;
			pTemp->Dereference();
		}
	}
	void Attach(T* p2) throw()
	{
		if (p) p->Dereference();
		p = p2;
	}
	T* Detach() throw()
	{
		T* pt = p;
		p = NULL;
		return pt;
	}
	long CopyTo(T** ppT) throw()
	{
		assert(ppT != NULL);
		if (ppT == NULL) return OGR_POINTER;
		*ppT = p;
		if (p) p->Reference();
		return OGR_OK;
	}
	T* p;

protected:
	COGRPtrObject() throw() {p = NULL;}
	COGRPtrObject(int nNull) throw()
	{
		assert(nNull == 0);
		(void) nNull;
		p = NULL;
	}
	COGRPtrObject(T* lp) throw()
	{
		p = lp;
		//if (p != NULL) p->Reference();
	}
};

template <class T>
class COGRPtr : public COGRPtrObject<T>
{
public:
	COGRPtr() throw() {}
	COGRPtr(int nNull) throw() : COGRPtrObject<T>(nNull) {}
	COGRPtr(T* lp) throw() : COGRPtrObject<T>(lp) {}
	COGRPtr(const COGRPtr<T>& lp) throw() : COGRPtrObject<T>(lp.p) {}
	T* operator = (T* lp) throw() {return static_cast<T*>(OGRPtrAssign((OGRSpatialReference**)&p, lp));}
	template <typename I>
	T* operator = (const COGRPtr<I>& lp) throw()
	{return static_cast<T*>(OGRPtrAssign((OGRSpatialReference**)&p, lp));}
	template <>
	T* operator = (const COGRPtr<T>& lp) throw() : COGRPtrBase<T>(lp)
	{return static_cast<T*>(OGRPtrAssign((OGRSpatialReference**)&p, lp));}
	OGRSpatialReference* OGRPtrAssign(OGRSpatialReference** pp, OGRSpatialReference* lp)
	{
		if (pp == NULL) return NULL;	
		if (lp != NULL) lp->Reference();
		if (*pp) (*pp)->Dereference();
		*pp = lp;
		return lp;
	}
};

#endif
From route at cae.com  Fri Aug 27 12:43:19 2004
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] caching of the blocks
Message-ID: <719A38AB7279D511B91900D0B7444A9E0DD1D107@caemsx03.cae.ca>

Hi,

I'm using GDALRasterBand::ReadBlock to access raster info; I cannot use
RasterIO because I need to scale the values by myself.
Is it true that the ReadBlock method does not put the blocks in cache ?
I tried to follow the code to see what's happenning, and it seems so.
Can you confirm that ?

Thanks in advance,

Stephane
http://wwww.exotk.org

From warmerdam at pobox.com  Fri Aug 27 13:14:12 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] caching of the blocks
In-Reply-To: <719A38AB7279D511B91900D0B7444A9E0DD1D107@caemsx03.cae.ca>
References: <719A38AB7279D511B91900D0B7444A9E0DD1D107@caemsx03.cae.ca>
Message-ID: <412F6BE4.4060903@pobox.com>

Stephane Routelous wrote:
> Hi,
> 
> I'm using GDALRasterBand::ReadBlock to access raster info; I cannot use
> RasterIO because I need to scale the values by myself.
> Is it true that the ReadBlock method does not put the blocks in cache ?
> I tried to follow the code to see what's happenning, and it seems so.
> Can you confirm that ?

Stephane,

I can confirm that.  ReadBlock() just does a wee bit of parameter checking
and then calls IReadBlock() at the driver specific level.  This reads into
the passed in data array but no where in this call chain is the existing
block cache used or populated.

The ReadBlock() method is essentially intended to be the most direct
way of getting data from a driver with no overhead from caching, resampling
or data type conversion.

In retrospect, I'm not sure I like this approach so well.  The fact that you
might already have the block in cache and that would be ignored is kind of
obtuse for instance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From route at cae.com  Fri Aug 27 13:28:07 2004
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] caching of the blocks
Message-ID: <719A38AB7279D511B91900D0B7444A9E0DD1D108@caemsx03.cae.ca>

Hi Frank,

Thanks a lot for your quick answer.
I need to use the ReadBlock to have the best performances, and also because
of the resampling.
I will continue to use it and implement my own cache mecanism.

Cheers,

Stephane
http://www.exotk.org


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Friday, August 27, 2004 1:14 PM
To: Stephane Routelous
Cc: 'gdal-dev@remotesensing.org'
Subject: Re: [Gdal-dev] caching of the blocks


Stephane Routelous wrote:
> Hi,
> 
> I'm using GDALRasterBand::ReadBlock to access raster info; I cannot use
> RasterIO because I need to scale the values by myself.
> Is it true that the ReadBlock method does not put the blocks in cache ?
> I tried to follow the code to see what's happenning, and it seems so.
> Can you confirm that ?

Stephane,

I can confirm that.  ReadBlock() just does a wee bit of parameter checking
and then calls IReadBlock() at the driver specific level.  This reads into
the passed in data array but no where in this call chain is the existing
block cache used or populated.

The ReadBlock() method is essentially intended to be the most direct
way of getting data from a driver with no overhead from caching, resampling
or data type conversion.

In retrospect, I'm not sure I like this approach so well.  The fact that you
might already have the block in cache and that would be ignored is kind of
obtuse for instance.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Aug 27 13:38:44 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] caching of the blocks
In-Reply-To: <719A38AB7279D511B91900D0B7444A9E0DD1D108@caemsx03.cae.ca>
References: <719A38AB7279D511B91900D0B7444A9E0DD1D108@caemsx03.cae.ca>
Message-ID: <412F71A4.90906@pobox.com>

Stephane Routelous wrote:
> Hi Frank,
> 
> Thanks a lot for your quick answer.
> I need to use the ReadBlock to have the best performances, and also because
> of the resampling.
> I will continue to use it and implement my own cache mecanism.
> 

Stephane,

Note, you can call RasterIO() at 1:1 resolution on exact block boundaries
and you will have essentially the same performance but with GDAL block
caching kicking in.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From route at cae.com  Fri Aug 27 13:58:06 2004
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] caching of the blocks
Message-ID: <719A38AB7279D511B91900D0B7444A9E0DD1D10A@caemsx03.cae.ca>

Hi Frank,

I've done a performance test for comparing RasterIO vs ReadBlock

I'm reading a big geotiff image (8100x7200)

the results are : RasterIO=8752ms ReadBlock=6776ms

Stephane

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Friday, August 27, 2004 1:39 PM
To: Stephane Routelous
Cc: 'gdal-dev@remotesensing.org'
Subject: Re: [Gdal-dev] caching of the blocks


Stephane Routelous wrote:
> Hi Frank,
> 
> Thanks a lot for your quick answer.
> I need to use the ReadBlock to have the best performances, and also
because
> of the resampling.
> I will continue to use it and implement my own cache mecanism.
> 

Stephane,

Note, you can call RasterIO() at 1:1 resolution on exact block boundaries
and you will have essentially the same performance but with GDAL block
caching kicking in.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From debian at adkgis.org  Fri Aug 27 15:35:25 2004
From: debian at adkgis.org (Steve Halasz)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] how to build GDAL with GRASS support and GRASS with
	GDAL support?
In-Reply-To: <412E83D5.4080109@webmapit.com.br>
References: <412E83D5.4080109@webmapit.com.br>
Message-ID: <1093635325.3728.13.camel@marcy>

On Thu, 2004-08-26 at 20:44, Eduardo Patto Kanegae wrote:
> "./configure" script of GDAL has --with-grass option...
> 
> but how should I do it if to build GRASS I may also have a --with-gdal 
> when compiling GRASS?
> 
> what will be the right procedure? to build GRASS, after build GDAL and 
> then re-build GRASS ? or is there another way?

Yes, that should work. I have done it by building grass against gdal
without the grass patch, and then rebuilding gdal with the patch.

Steve


From starged at videotron.ca  Sat Aug 28 21:11:23 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] OT: SRTM data now available at the GLCF
Message-ID: <dva2j01264npk07h4hbrf776tnjsivrqko@4ax.com>

Hi all,

This is a bit off-topic but since the subject of SRTM data came around recently, I thought this
would be of interest. Info at: http://glcf.umiacs.umd.edu/data/srtm/desc.shtml

This is definitely good news to me... even better is the fact that the "Finished" product will be
available next month!

Cheers.
--
Mario B.

From werchowyna at pf.pl  Mon Aug 30 16:18:07 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] python and gdal
Message-ID: <002b01c48ece$8dc4ab20$22d21d3e@podyadeck>

Hello Everybody!

I have already posted this once but haven't got a good answer. Thus I'm
trying again, maybe now You will have some time to help an amateur.

I'm still having a problem with building Gdal from source (both 1.2.1 and
the CVS snapshot). The reason is my Python configuration.

My Linux is Mandrake 9.2.

I'm configuring this way:

CPPFLAGS="-I/usr/include/python2.3/Numeric -I/usr/include/mpatrol"
CXXFLAGS="-march=athlon-xp -O2 -Wall" CFLAGS="-march=athlon-xp -O2 -Wall"
./configure

And in the config.log I get:

(...)
configure:24160: checking for python
configure:24176: found /usr/bin/python
configure:24186: result: python
configure:24202: checking where python Makefiles are
configure:24217: result: found
configure:24221: checking Python makefile
configure:24228: result: missing, python disabled.
configure:24335: checking for NumPy include files
configure:24345: result: missing
(...)
PYTHON='no'
PYTHON_CC=''
PYTHON_CFLAGS=''
PYTHON_INCLUDES=''
PYTHON_LIBS=''
PYTHON_LINK=''
PYTHON_OPT=''
PYTHON_SO=''
(...)
pyexecdir='/usr/lib/python2.3/site-packages'
pymoddir=''
pythondir='/usr/lib/python2.3/site-packages'
(...)

Frank Warmerdam once wrote that I should have
/usr/lib/python2.3/config/Makefile. But I don't have it nor even the
/usr/lib/python2.3/config/ folder (but plenty of other floders in the
/usr/lib/python2.3). And I suppose I shouldn't have the Python Makefile
because I installed all my Python bits from precompiled RPMs (like most
users do?) and none of the Python-related RPMs known to me provide a
"Makefile".

If anybody could explain it to me I would be gratefull.

Maciek


From warmerdam at pobox.com  Mon Aug 30 16:28:43 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] python and gdal
In-Reply-To: <002b01c48ece$8dc4ab20$22d21d3e@podyadeck>
References: <002b01c48ece$8dc4ab20$22d21d3e@podyadeck>
Message-ID: <41338DFB.1080800@pobox.com>

Maciek Sieczka wrote:
> Frank Warmerdam once wrote that I should have
> /usr/lib/python2.3/config/Makefile. But I don't have it nor even the
> /usr/lib/python2.3/config/ folder (but plenty of other floders in the
> /usr/lib/python2.3). And I suppose I shouldn't have the Python Makefile
> because I installed all my Python bits from precompiled RPMs (like most
> users do?) and none of the Python-related RPMs known to me provide a
> "Makefile".
> 
> If anybody could explain it to me I would be gratefull.

Maciek,

I have the /usr/lib/python2.2/config/Makefile on my redhat 8.0 system which
was installed from RPMs, so they do exist.  Do you have include files such
as /usr/include/python2.3/Python.h on your system?    If not, you are missing
some sort of development RPM you will need to build against Python.

If you can't get the configure stuff for Python to work because of the lack of
a Python makefile on your system, you can always just manually adjust the
GDALmake.opt file.  My python definitions look something like this:

PYTHON_INCLUDES = -I/usr/include/python2.2 -I/usr/include/python2.2
PYTHON_LIBS =
PYTHON_CFLAGS = -fPIC $(OPT) -DHAVE_NUMPY
PYTHON = python

and down lower:

INST_PYMOD      =       /usr/lib/python2.2/site-packages

Hopefully you can use this, just switching to "python2.3".

Build problems are surely one of my greatest frustrations with GDAL.  While
I endevour to make it easy to build, the number of packages it needs to
interact with and the staggering variety of system configurations it is
used on inevitably leads to a variety of problems, many of which I am
esentially powerless to do anything about.  In other cases I could definately
do better in the package or answering questions but being as build problems
are so unfun, and hard to diagnose/fix I often give up before digging into
the problem too deep.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bfraser at geoanalytic.com  Mon Aug 30 18:25:31 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Windows compile of GDAL 1.2.1 with HDF
Message-ID: <1abb01c48ee0$434d1480$020002c0@SHARK>


  I'm trying to compile GDAL 1.2.1 with HDF on Windows.  I notice that with 1.2.1 there's a new sub-dir of fmts/hdf4/hdf-eos, but no makefile.vc.  
  
Does anyone have a makefile.vc for that dir and one for the hdf dir?

Thanks!
Brent Fraser
GeoAnalytic Inc.
Tel:(403) 213-2700
bfraser@geoanalytic.com
www.geoanalytic.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040830/87284d08/attachment.html
From dron at ak4719.spb.edu  Mon Aug 30 23:47:38 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] python and gdal
In-Reply-To: <002b01c48ece$8dc4ab20$22d21d3e@podyadeck>
References: <002b01c48ece$8dc4ab20$22d21d3e@podyadeck>
Message-ID: <20040831034737.GA5583@ak4719.spb.edu>

On Mon, Aug 30, 2004 at 10:18:07PM +0200, Maciek Sieczka wrote:
> My Linux is Mandrake 9.2.
> I'm configuring this way:
> 
> CPPFLAGS="-I/usr/include/python2.3/Numeric -I/usr/include/mpatrol"
> CXXFLAGS="-march=athlon-xp -O2 -Wall" CFLAGS="-march=athlon-xp -O2 -Wall"
> ./configure
> 
> And in the config.log I get:
> 
> (...)
> configure:24160: checking for python
> configure:24176: found /usr/bin/python
> configure:24186: result: python
> configure:24202: checking where python Makefiles are
> configure:24217: result: found
> configure:24221: checking Python makefile
> configure:24228: result: missing, python disabled.
> configure:24335: checking for NumPy include files
> configure:24345: result: missing
> (...)
> PYTHON='no'
> PYTHON_CC=''
> PYTHON_CFLAGS=''
> PYTHON_INCLUDES=''
> PYTHON_LIBS=''
> PYTHON_LINK=''
> PYTHON_OPT=''
> PYTHON_SO=''
> (...)
> pyexecdir='/usr/lib/python2.3/site-packages'
> pymoddir=''
> pythondir='/usr/lib/python2.3/site-packages'
> (...)
> 
> Frank Warmerdam once wrote that I should have
> /usr/lib/python2.3/config/Makefile. But I don't have it nor even the
> /usr/lib/python2.3/config/ folder (but plenty of other floders in the
> /usr/lib/python2.3). And I suppose I shouldn't have the Python
> Makefile because I installed all my Python bits from precompiled RPMs
> (like most users do?) and none of the Python-related RPMs known to me
> provide a "Makefile".

On my Debian this file comes with the python-dev package. Most likely
that this is the case for your distribution too, so you should just
install "development" part of the Python.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From packalen at cs.joensuu.fi  Tue Aug 31 02:49:13 2004
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] ogr2ogr - ORACLE driver fails when fetching a
	VARCHAR2(4000) column
Message-ID: <Pine.GSO.4.58.0408310947590.20569@cs>

Hi,

I repost this because nobody has responded.

I encountered some problems when trying to convert ORACLE table to some
other format by using ogr2ogr. The table has a column of type
VARCHAR2(4000). There seems to be some sort of buffer problem relating
long text fields.

When I give a command like "ogr2ogr -f "ESRI Shapefile"
out_kohteet OCI:user/passw@db KOHTEET" I get a message "ERROR 1:
ORA-01406: fetched column value was truncated in OCIStmtFetch". The
shapefile is created but it is empty. I don't actually need this
VARCHAR2(4000) column. I know that the maximum length of the string in dbf
file is 254 characters. Anyway, it doesn't help if I try to restrict the
columns fetched by using the switch "-select". It still produces the same
error code. Also the geometry type in created shapefile is not correct
('line' instead of (2D) 'point'). I assume that in this case OGR first
fetches all columns from ORACLE and then internally retsricts which
columns are written to output file. The switch -sql "SELECT attr1, attr2,
..." fetches all attributes properly but the geometry type (and actual
geometries) is still wrong ('line' instead of (2D) 'point'). I assume that
in this case -sql statement is actually passed to ORACLE because it
doesn't produce the same error code.

Software versions are:
  GDAL 1.2.1.0, released 2004/06/23
  Oracle9i Release 9.2.0.4.0

Any hints how to work around the problem?

Best regards,
Petteri

=========================================================================
Petteri Packal?n                   "There are two major products that
University of Joensuu               came out of Berkeley: LSD and UNIX.
Faculty of Forestry                 We don't believe this to be a
P.O. Box 111                        coincidence."  -- J.S. Anderson
80101 Joensuu
Finland                            "There still remains a question: Which
e-mail: packalen@cs.joensuu.fi      caused the other?"
=========================================================================


From EZS at Syncera-ITSolutions.NL  Tue Aug 31 10:09:32 2004
From: EZS at Syncera-ITSolutions.NL (Emil Zegers)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Problem with ogrtindex from OpenEV 1.7.4_FW (May 11,
	2004)
Message-ID: <s134a2cf.073@syncera.nl>

Hello,

I have a problem using ogrtindex from OpenEV 1.7.4_FW (May 11, 2004).

When executing ogrtindex, it complains about not finding gdal11.dll in the path.

Strange because it should look for gdal12.dll?

As test I copied gdal12.dll to gdal11.dll.

Executing ogrtindex again now gives:

"Cannot find entrypoint from procedure ?getGeometryName@OGRLinearRing@@UAEPBDXZ in DLL file gdal11.dll."

Has anybody else encountered and/or solved this problem?

Best regards,

Emil Zegers


__________________
_____________________________
Per 1 september 2004 veranderen binnen onze holding drie werkmaatschappijen van naam en gaan twee bedrijfsonderdelen als zelfstandige werkmaatschappijen verder. 
Syncera is de holding voor Syncera De Straat, Syncera IT Solutions, Syncera Water, Syncera Belgium, Syncera GeoData, Syncera Legal, Syncera Leisure, Syncera Realisatie, Groundwater Technology, ProKAM en LCHG (deelneming).

Meer informatie op: HTTP://WWW.Syncera.NL

From warmerdam at pobox.com  Tue Aug 31 11:40:26 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Problem with ogrtindex from OpenEV 1.7.4_FW (May 11,
	2004)
In-Reply-To: <s134a2cf.073@syncera.nl>
References: <s134a2cf.073@syncera.nl>
Message-ID: <41349BEA.4090707@pobox.com>

Emil Zegers wrote:
> Hello,
> 
> I have a problem using ogrtindex from OpenEV 1.7.4_FW (May 11, 2004).
> 
> When executing ogrtindex, it complains about not finding gdal11.dll in the path.
> 
> Strange because it should look for gdal12.dll?
> 
> As test I copied gdal12.dll to gdal11.dll.
> 
> Executing ogrtindex again now gives:
> 
> "Cannot find entrypoint from procedure ?getGeometryName@OGRLinearRing@@UAEPBDXZ in DLL file gdal11.dll."
> 
> Has anybody else encountered and/or solved this problem?

Emil,

This was a mistake in how I was producing the OpenEV_FW releases.  This
executable wasn't updated for the last few releases.  Try the executable
at:

   http://home.gdal.org/~warmerdam/ogrtindex.exe

If that doesn't work I may need to prepare a new full OpenEV_FW release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at pf.pl  Tue Aug 31 12:14:58 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] python and gdal
References: <002b01c48ece$8dc4ab20$22d21d3e@podyadeck>
	<20040831034737.GA5583@ak4719.spb.edu>
Message-ID: <003801c48f75$e6c60820$29d21d3e@podyadeck>

From: "Andrey Kiselev" <dron@ak4719.spb.edu>
> On my Debian this file comes with the python-dev package. Most likely
> that this is the case for your distribution too, so you should just
> install "development" part of the Python.

From: "Frank Warmerdam" <warmerdam@pobox.com>
> I have the /usr/lib/python2.2/config/Makefile on my redhat 8.0 system
> which was installed from RPMs, so they do exist.

Partly my fault. I'm using a modified version of Mdk 9.2 called BlueHawk
(containing all updates and extra drivers and software when compared to a
regular Mdk 9.2). For some reason there is no python-devel included on the
installation CDs and after having installed all the Python bits available I
thought I have everything installed, which was dumb :). I found the missing
python-devel on the genuine Mandrake 9.2 CD and all is fine now.

So, today it is the first time ever when I managed to install PROJ, GDAL and
GRASS alltogether from source. Thank you all!

Maciek


From EZS at Syncera-ITSolutions.NL  Tue Aug 31 15:08:19 2004
From: EZS at Syncera-ITSolutions.NL (Emil Zegers)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Problem with ogrtindex from OpenEV 1.7.4_FW
	(May 11,2004)
Message-ID: <s134e8d1.007@syncera.nl>

Hello Frank,

I download ogrtindex.exe from http://home.gdal.org/~warmerda/ogrtindex.exe (without the -m).

Unfortunately I get another error message now:

  "The procedure entry point ?closeRings@OGRLinearRing@@UAEXXZ could not be located in the dynamic link library gdal12.dll"

Does this error not occur when compiling the current source from CVS? Then I really have to start learning how to do that.

In the meantime I hope you have the time to prepare a new openev_fw release.

As always thanks for your prompt reply and support.

Best regards,

Emil Zegers


>>> Frank Warmerdam <warmerdam@pobox.com> 08/31/04 05:40pm >>>
Emil Zegers wrote:
> Hello,
> 
> I have a problem using ogrtindex from OpenEV 1.7.4_FW (May 11, 2004).
> 
> When executing ogrtindex, it complains about not finding gdal11.dll in the path.
> 
> Strange because it should look for gdal12.dll?
> 
> As test I copied gdal12.dll to gdal11.dll.
> 
> Executing ogrtindex again now gives:
> 
> "Cannot find entrypoint from procedure ?getGeometryName@OGRLinearRing@@UAEPBDXZ in DLL file gdal11.dll."
> 
> Has anybody else encountered and/or solved this problem?

Emil,

This was a mistake in how I was producing the OpenEV_FW releases.  This
executable wasn't updated for the last few releases.  Try the executable
at:

   http://home.gdal.org/~warmerdam/ogrtindex.exe 

If that doesn't work I may need to prepare a new full OpenEV_FW release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent


__________________
_____________________________
Per 1 september 2004 veranderen binnen onze holding drie werkmaatschappijen van naam en gaan twee bedrijfsonderdelen als zelfstandige werkmaatschappijen verder. 
Syncera is de holding voor Syncera De Straat, Syncera IT Solutions, Syncera Water, Syncera Belgium, Syncera GeoData, Syncera Legal, Syncera Leisure, Syncera Realisatie, Groundwater Technology, ProKAM en LCHG (deelneming).

Meer informatie op: HTTP://WWW.Syncera.NL

From dron at ak4719.spb.edu  Tue Aug 31 15:27:25 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Windows compile of GDAL 1.2.1 with HDF
In-Reply-To: <1abb01c48ee0$434d1480$020002c0@SHARK>
References: <1abb01c48ee0$434d1480$020002c0@SHARK>
Message-ID: <20040831192724.GA25333@ak4719.spb.edu>

Hi, Brent,

On Mon, Aug 30, 2004 at 04:25:31PM -0600, Brent Fraser wrote:
>   I'm trying to compile GDAL 1.2.1 with HDF on Windows.  I notice that
>   with 1.2.1 there's a new sub-dir of fmts/hdf4/hdf-eos, but no
>   makefile.vc.  
>   
> Does anyone have a makefile.vc for that dir and one for the hdf dir?

I have added the lost makefile (thiugh, not tested under Windows).

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From bfraser at geoanalytic.com  Tue Aug 31 17:12:07 2004
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:22 2007
Subject: [Gdal-dev] Windows compile of GDAL 1.2.1 with HDF
References: <1abb01c48ee0$434d1480$020002c0@SHARK>
	<20040831192724.GA25333@ak4719.spb.edu>
Message-ID: <024b01c48f9f$2ce1bce0$020002c0@SHARK>

Andrey,

I had a couple of spare hours so I built the makefiles and did some testing
(see attached zip of makefiles and modified source).  The makefile.vc in the
hdf4 dir needs to be "enhanced" to handle the new hdf-eos sub-dir, and a new
makefile.vc needs to be created for the new hdf-eos sub-dir.

I ran into a problem with the "sleep" function referenced in EHapi.c and had
to add a couple of windows include files (wrapped in a #ifdef WIN32 to
protect our Unix developers).

It compiled, so I ran a  couple of tests with gdalinfo.  It gave reasonable
output for MODIS and ASTER image data, but crashed on ASTER DEM data (the
same DEM data works in gdal 1.1.9).

Could someone run some ASTER DEM data through a Unix version of gdal 1.2.1
to see if the problem is Windows or gdal 1.2.1?

Thanks!
Brent Fraser

----- Original Message ----- 
From: "Andrey Kiselev" <dron@ak4719.spb.edu>
To: "GDAL Dev" <gdal-dev@remotesensing.org>
Sent: Tuesday, August 31, 2004 1:27 PM
Subject: Re: [Gdal-dev] Windows compile of GDAL 1.2.1 with HDF


> Hi, Brent,
>
> On Mon, Aug 30, 2004 at 04:25:31PM -0600, Brent Fraser wrote:
> >   I'm trying to compile GDAL 1.2.1 with HDF on Windows.  I notice that
> >   with 1.2.1 there's a new sub-dir of fmts/hdf4/hdf-eos, but no
> >   makefile.vc.
> >
> > Does anyone have a makefile.vc for that dir and one for the hdf dir?
>
> I have added the lost makefile (thiugh, not tested under Windows).
>
> Andrey
>
> -- 
> Andrey V. Kiselev
> Home phone:  +7 812 5274898  ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hdf.zip
Type: application/x-zip-compressed
Size: 17956 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040831/34718d76/hdf.bin
