From awilliams at rapidmap.com.au  Wed Mar  1 00:04:40 2006
From: awilliams at rapidmap.com.au (Andrew Williams)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Defining Australian Map Grid in GDAL
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC6454397E@rmg-server03.rmg.local>

Have to apologise folks. I didn't realise it but there was a tiff world file in the directory with the image. When this is present MapImagery uses this to define the projection details.
 
The images in fact have no geotiff headers at all.
 
I will go back to basics and work my way through.
 
Sorry to bother you all. The information from Jacob Delfos will be valuable to this exercise regardless.
 

	-----Original Message----- 
	From: Delfos, Jacob [mailto:jacob.delfos@maunsell.com] 
	Sent: Wed 3/1/2006 11:02 AM 
	To: Andrew Williams 
	Cc: gdal-dev@lists.maptools.org 
	Subject: RE: [Gdal-dev] Defining Australian Map Grid in GDAL
	
	

	Andrew, 

	You have to be careful with AGD-based projections in Proj4, because the definitions that exist in Proj4 are not correct (problem with datums). I'm attaching a file with correct definitions for AGD-based projections. I have myself spent several days trying to figure out why my coordinates were up to 200m off, only to realise that Proj4 does not appear to use the AGD84 and AGD66 datum correctly.

	Just for the record: 
	AMG66 = UTM + AGD66-datum 
	AMG84 = UTM + AGD84-datum 
	MGA94 = UTM + GDA94-datum (where GDA94 can be substituted with WGS84) 

	Be careful with the acronyms. You wouldn?t be the first to start construction in the wrong spot :) 
	For your image, I guess just override the projection, and project from Latlong AGD84 (epsg:4203, bottom of file I sent) to Latlong WGS84.

	Regards, 

	Jacob 
	  

	JACOB DELFOS
	GIS ANALYST
	Maunsell Australia Pty Ltd
	629 Newcastle Street, Leederville, WA 6007 
	PO Box 81, Leederville, WA 6902 
	Western Australia 
	ABN 20 093 846 925
	
	Tel     + 61 8 9281 6185
	Fax    + 61 8 9281 6297
	jacob.delfos@maunsell.com 

	<<agd84_agd66_proj4.txt>> 

	? -----Original Message----- 
	? From: gdal-dev-bounces@lists.maptools.org 
	? [mailto:gdal-dev-bounces@lists.maptools.org <mailto:gdal-dev-bounces@lists.maptools.org> ] On Behalf Of 
	? Andrew Williams 
	? Sent: 28 February 2006 22:27 
	? To: gdal-dev@lists.maptools.org 
	? Subject: [Gdal-dev] Defining Australian Map Grid in GDAL 
	? 
	? Hello folks. 
	? I'm having trouble with a Geotiff. 
	? The scan is a topographic map sheet. The cartography and grid 
	? on the sheet is based on AMG (Australian Map Grid). It is a 
	? UTM projection based on the Australian National Spheroid, 
	? ellps=aust_SA I believe. 
	?  
	? My problem is that the GeoTiff has been georefernced as UTM 
	? ellps=GRS80 datum=WGS84 incorrectly. 
	?  
	? My intent is to gdalwarp the image to latlong WGS84. 
	?  
	? I have tried for the better part of a day to attempt to 
	? override or otherwise correct the georeferncing. Without success. 
	?  
	? I have been very successful with GDAL in the past, but this 
	? has stopped me. 
	?  
	? The problem is that I can't seem to fully define AMG "enough" 
	? to allow GDALwarp to reproject the image. It seems to default 
	? to the source as being UTM WGS84. 
	?  
	? I attempted to gdal_translate the image using the corrected 
	? definition and then gdalwarp image, but that also failed. 
	?  
	? the definition I have been using is "+proj=tmerc 
	? +ellps=aust_SA +lat_0=0 +lon_0=147 +x_0=500000 +y_0=10000000 
	? +k=0.9996 +south" 
	?  
	? regards 
	? Andrew 
	? 
	? _______________________________________________ 
	? Gdal-dev mailing list 
	? Gdal-dev@lists.maptools.org 
	? http://lists.maptools.org/mailman/listinfo/gdal-dev <http://lists.maptools.org/mailman/listinfo/gdal-dev>  
	? 



From awilliams at rapidmap.com.au  Wed Mar  1 01:22:24 2006
From: awilliams at rapidmap.com.au (Andrew Williams)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Defining Australian Map Grid in GDAL
Message-ID: <CFE1D6CAE2D44343BF58E308C1C7EC6454397F@rmg-server03.rmg.local>

OK I've narrowed it down. Jacob is correct, there is a problem handling AGD datums. With the TFW file in the same directory as the source image I've attenpted to translate the image using the following command line
 
gdalwarp -s_srs "+proj=utm +zone=55 +south +a=6378160 +rf=298.250000000055" -t_srs "+proj=latlong +datum=WGS84" -co "TFW=YES" image_in.tif image_out.tif
 
What is happening is that the system is being converted from grid to latlong but the source datum is still adopting WGS84. Therefore 200 odd metres out when computed to latlong.
 
I have checked the varios csv's such as gcs, pcs, datum and ellipsoid and the correct parameter appear to be in place.
 
The TFW only defines the top left corner of the image and the pixel dimension. Why would GDAL assume WGS84 when I have defined override parameters?
 
Do I need to take Jacob's file and insert it into one of these other csv's? Any other ideas?
 
regards
Andrew

	-----Original Message----- 
	From: Delfos, Jacob [mailto:jacob.delfos@maunsell.com] 
	Sent: Wed 3/1/2006 11:02 AM 
	To: Andrew Williams 
	Cc: gdal-dev@lists.maptools.org 
	Subject: RE: [Gdal-dev] Defining Australian Map Grid in GDAL
	
	

	Andrew, 

	You have to be careful with AGD-based projections in Proj4, because the definitions that exist in Proj4 are not correct (problem with datums). I'm attaching a file with correct definitions for AGD-based projections. I have myself spent several days trying to figure out why my coordinates were up to 200m off, only to realise that Proj4 does not appear to use the AGD84 and AGD66 datum correctly.

	Just for the record: 
	AMG66 = UTM + AGD66-datum 
	AMG84 = UTM + AGD84-datum 
	MGA94 = UTM + GDA94-datum (where GDA94 can be substituted with WGS84) 

	Be careful with the acronyms. You wouldn?t be the first to start construction in the wrong spot :) 
	For your image, I guess just override the projection, and project from Latlong AGD84 (epsg:4203, bottom of file I sent) to Latlong WGS84.

	Regards, 

	Jacob 
	  

	JACOB DELFOS
	GIS ANALYST
	Maunsell Australia Pty Ltd
	629 Newcastle Street, Leederville, WA 6007 
	PO Box 81, Leederville, WA 6902 
	Western Australia 
	ABN 20 093 846 925
	
	Tel     + 61 8 9281 6185
	Fax    + 61 8 9281 6297
	jacob.delfos@maunsell.com 

	<<agd84_agd66_proj4.txt>> 

	? -----Original Message----- 
	? From: gdal-dev-bounces@lists.maptools.org 
	? [mailto:gdal-dev-bounces@lists.maptools.org <mailto:gdal-dev-bounces@lists.maptools.org> ] On Behalf Of 
	? Andrew Williams 
	? Sent: 28 February 2006 22:27 
	? To: gdal-dev@lists.maptools.org 
	? Subject: [Gdal-dev] Defining Australian Map Grid in GDAL 
	? 
	? Hello folks. 
	? I'm having trouble with a Geotiff. 
	? The scan is a topographic map sheet. The cartography and grid 
	? on the sheet is based on AMG (Australian Map Grid). It is a 
	? UTM projection based on the Australian National Spheroid, 
	? ellps=aust_SA I believe. 
	?  
	? My problem is that the GeoTiff has been georefernced as UTM 
	? ellps=GRS80 datum=WGS84 incorrectly. 
	?  
	? My intent is to gdalwarp the image to latlong WGS84. 
	?  
	? I have tried for the better part of a day to attempt to 
	? override or otherwise correct the georeferncing. Without success. 
	?  
	? I have been very successful with GDAL in the past, but this 
	? has stopped me. 
	?  
	? The problem is that I can't seem to fully define AMG "enough" 
	? to allow GDALwarp to reproject the image. It seems to default 
	? to the source as being UTM WGS84. 
	?  
	? I attempted to gdal_translate the image using the corrected 
	? definition and then gdalwarp image, but that also failed. 
	?  
	? the definition I have been using is "+proj=tmerc 
	? +ellps=aust_SA +lat_0=0 +lon_0=147 +x_0=500000 +y_0=10000000 
	? +k=0.9996 +south" 
	?  
	? regards 
	? Andrew 
	? 
	? _______________________________________________ 
	? Gdal-dev mailing list 
	? Gdal-dev@lists.maptools.org 
	? http://lists.maptools.org/mailman/listinfo/gdal-dev <http://lists.maptools.org/mailman/listinfo/gdal-dev>  
	? 



From andrea.aime at aliceposta.it  Wed Mar  1 02:19:47 2006
From: andrea.aime at aliceposta.it (Andrea Aime)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] GMT to Geotiff, transform and recolor
In-Reply-To: <44051D53.8020407@pobox.com>
References: <44048F68.1040107@aliceposta.it> <44051D53.8020407@pobox.com>
Message-ID: <44054B13.2020203@aliceposta.it>

Andrea,
>
> I don't see any way you can do this with just gdal_translate.  As you
> note it doesn't have any support for recoloring.  You could do it by
> creating an XML VRT file with the color table in it, and then use
> gdal_translate to produce a GeoTIFF with palette from the VRT file and
> the GMT file it points to.
>
> Alternatively you could accomplish it from VB6 using the VB6 bindings
> of GDAL.
>
> Let me know if you need details on how to construct the VRT.
>
I see there is a tutorial. Cool, I'll have a look at it.
Thank you :-)

Andrea



From marrodten at hotmail.com  Wed Mar  1 03:59:25 2006
From: marrodten at hotmail.com (Martin Rodriguez)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Compiler error
Message-ID: <BAY108-F144D069798E0C8D9DDFCF3B7F40@phx.gbl>

Hello,

I 've a problem with FWTools, I develope an application for Windows using 
FWTools but now, I need to build it for Linux, my code is not the problem 
because is standard C++.

But I need use FWTools for Linux, I'm testing FWTools in Linux with an easy 
sample and I have the next problem:

[root@knoppix FWTools-linux-1.0.0a7]# gcc main.cpp -I include -L lib -o main
main.cpp: In function `int main()':
main.cpp:11: `OGRResgisterAll' undeclared (first use this function)
main.cpp:11: (Each undeclared identifier is reported only once for each 
function it appears in.)

Other functions work properly, I can crate OGRLayer or OGRPoint and access 
their methods but if I use OGRRegisterAll() or OGRSFDriverRegistrar::Open(   
) the compiler fails with the message below.

I use:
   FWTools-linux-1.0.0a7 , I've copied the forlders lib and include in my 
work folder.
   g++ (GCC) 3.2.2 (Mandrake Linux 9.1 3.2.2-3mdk)

Thank you, very much.

Mart?n Rodr?guez Tendero



From mateusz at loskot.net  Wed Mar  1 05:54:43 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Compiler error
In-Reply-To: <BAY108-F144D069798E0C8D9DDFCF3B7F40@phx.gbl>
References: <BAY108-F144D069798E0C8D9DDFCF3B7F40@phx.gbl>
Message-ID: <44057D73.8000409@loskot.net>

Martin Rodriguez wrote:
> 
> Other functions work properly, I can crate OGRLayer or OGRPoint and 
> access their methods but if I use OGRRegisterAll() or 
> OGRSFDriverRegistrar::Open(   ) the compiler fails with the message below.
> 

Are you sure you include gdal\ogr\ogrsf_frmts\ogrsf_frmts.h header?
Just as described in this tutorial:
http://www.gdal.org/ogr/ogr_apitut.html

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Mar  1 07:50:55 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Compiler error
In-Reply-To: <BAY108-F144D069798E0C8D9DDFCF3B7F40@phx.gbl>
References: <BAY108-F144D069798E0C8D9DDFCF3B7F40@phx.gbl>
Message-ID: <440598AF.4000703@pobox.com>

Martin Rodriguez wrote:
> Hello,
> 
> I 've a problem with FWTools, I develope an application for Windows 
> using FWTools but now, I need to build it for Linux, my code is not the 
> problem because is standard C++.
> 
> But I need use FWTools for Linux, I'm testing FWTools in Linux with an 
> easy sample and I have the next problem:
> 
> [root@knoppix FWTools-linux-1.0.0a7]# gcc main.cpp -I include -L lib -o 
> main
> main.cpp: In function `int main()':
> main.cpp:11: `OGRResgisterAll' undeclared (first use this function)
> main.cpp:11: (Each undeclared identifier is reported only once for each 
> function it appears in.)

Martin,

Are you sure line 11 shouldn't be calling OGRRegisterAll() instead of
OGRResgisterAll()?  I'm not sure how this would work on windows either.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jluis at ualg.pt  Wed Mar  1 09:15:31 2006
From: jluis at ualg.pt (jluis)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] GMT to Geotiff, transform and recolor
In-Reply-To: <44048F68.1040107@aliceposta.it>
References: <44048F68.1040107@aliceposta.it>
Message-ID: <4405AC83.8070003@ualg.pt>

Andrea Aime wrote:
> Hi,
> I was wondering if with GDAL I could take a GMT grid file, transform
> it into a GeoTiff, and assign a color table to the values at the same time.
> I have looked at the gdal_translate tool, but it does not seem to support
> re-coloring.
> 

Andrea,
You can try one other aproach.
Create your image in ps using gmt (grdimage, grdview). Don't use the -B
option (which plot the frame and anotations). Use ps2raster
(new in 4.1 version) to do the conversion ps->tiff. Write a .tfw file
using the output of grdinfo on the grid used to produce the ps image.
You can now use gdal_translate to convert the tiffedPS.tiff + .tfw into
a geotiff image.

Joaquim Luis

From pgao at esri.com  Wed Mar  1 12:02:38 2006
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] release date
Message-ID: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>


> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Frank Warmerdam
> Sent: Tuesday, February 07, 2006 6:32 AM
> To: Bart van den Eijnden
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] release date
> 
> On 2/7/06, Bart van den Eijnden <bartvde@xs4all.nl> wrote:
> > Hi list,
> >
> > when can we expect a new GDAL release (1.3.2?) ?
> 
> Bart,
> 
> I hadn't really planned a release date, but I am getting 
> increasing pressure to have one. :-)
> 
> I will aim to have 1.3.2 out by the end of the month.
> If possible I would like to include finished MySQL Spatial support.
> 

Any news on 1.3.2 release?


Also, I noticed there is a new IDRISI driver, and but it does not seem
to be registered.
Is it functional?

Regards,
Gao, Peng


From warmerdam at pobox.com  Wed Mar  1 12:13:43 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] release date
In-Reply-To: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>
Message-ID: <4405D647.7050607@pobox.com>

Peng Gao wrote:
> Any news on 1.3.2 release?

Gao,

No, I don't have a planned date yet.

> Also, I noticed there is a new IDRISI driver, and but it does not seem
> to be registered.
> Is it functional?

I believe it is not yet functional, but we hope to have it working soon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From jorgegarcia at guadaltel.es  Wed Mar  1 13:22:59 2006
From: jorgegarcia at guadaltel.es (=?UTF-8?B?Sm9yZ2UgR2FyY8OtYSBOYXo=?=)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] [ANN] First release of GDAL/OGR for Windows CE
In-Reply-To: <43FB92AF.2040804@loskot.net>
References: <43FB92AF.2040804@loskot.net>
Message-ID: <4405E683.50708@guadaltel.es>

I`m trying to compile GdalCE but it says me:

cpl_port.h(181) : fatal error C1083: Cannot open include file: 
'cpl_config.h': No such file or directory

This line contains:
#include "cpl_config.h"

And it's true cpl_config.h does not appear anywhere.
Thank you.
Jorge.

Mateusz ?oskot escribi?:

> Hello,
>
> After 22 weeks ;-) of the initial post
> (http://thread.gmane.org/gmane.comp.gis.gdal.devel/5025)
> I'm very glad to announce the first release of GDAL/OGR
> port for Windows CE.
>
> Two days ago I commited all files and changes to the official GDAL CVS.
>
> Here is a list of features and my comments to the current state of work.
>
>
> GDAL/OGR for Windows CE features:
> - all base OGR API and modules (port, ogr)
> - subset of OGR drivers (ogr\ogrsf_frmts): generic, mitab, shape
> - wcelibcex - extension to C library on Windows CE
>
>
> Features not included in GDAL/OGR for Windows CE:
> - in fact, this port does not include rasters support
> - GEOS has not been ported yet, so OGR for Windows CE
> compiles without GEOS support (work is in progres)
> - OGR drivers not listed in features list abov
>
>
> Untill now, I managed to build GDAL/OGR with eVC++ 4.0 and use it on 
> my device running Pocket PC 2003 (Windows CE .NET 4.2).
>
> NOTE: As you may noticed, I call this port as GDAL/OGR but, in fact, 
> currently it only includes OGR - vectors support. Simply, I hope it 
> will become more complete port of GDAL, with rasters support, in 
> future ;-)
>
>
> I'd like to thank:
> - Frank Warmerdam for GDAL/OGR and priceless support he provide me
> - Taxus SI Ltd. from Poland for their great support
> - Users from IRC #gdal channel
>
>
> How can I report a bug?
> Visit Bugzilla on http://bugzilla.remotesensing.org
> Bug Writing Guidelines:
> http://bugzilla.remotesensing.org/page.cgi?id=bug-writing.html
>
>
> How can I contribute?
> - you can build GDAL/OGR for Windows CE and report problems if any
> - you can try build/port new OGR drivers
> - you can test GDAL/OGR on different Windows CE devices
> - you can write sample applications using GDAL/OGR
> - if you have found a bug, please report i
>
>
> For building instructions and more detailes read README file in 
> gdal\wince directory from the official GDAL CVS:
> http://www.gdal.org/download.html
>
> If you have comments or questions, don't hesitate to ask me.
>
> Best regards



From mateusz at loskot.net  Wed Mar  1 13:28:46 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] [ANN] First release of GDAL/OGR for Windows CE
In-Reply-To: <4405E683.50708@guadaltel.es>
References: <43FB92AF.2040804@loskot.net> <4405E683.50708@guadaltel.es>
Message-ID: <4405E7DE.4010309@loskot.net>

Jorge Garc?a Naz wrote:
> I`m trying to compile GdalCE but it says me:

How are you building it?
Project file or nmake + makefile.evc4?
Your own project file or project file from CVS?

> cpl_port.h(181) : fatal error C1083: Cannot open include file: 
> 'cpl_config.h': No such file or directory
> 
> This line contains:
> #include "cpl_config.h"
> 
> And it's true cpl_config.h does not appear anywhere.


Simply, copy/rename port\cpl_config.h.evc4 file to
port\cpl_config.h and it should work.

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From rob at dataflowdesign.com  Wed Mar  1 13:59:04 2006
From: rob at dataflowdesign.com (rob@dataflowdesign.com)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Override geom column name in ogr PostgreSQL driver
Message-ID: <17413.61176.865929.947860@maggie.waterpathcanoe.com>


In OGR, is there a way to override the name of the wkb_geometry column
in the PostgreSQL driver? Bug 769 addresses a similar issue for
the oracle driver. But there doesn't appear to be a way in pg from
looking at the code. 

If there is a way, please let me know and I will use it. If not, I
will gladly submit a simple patch that I wrote which accepts the
following argument:

    -lco GEOM_FNAME=the_geom

Regards,
Rob

From warmerdam at pobox.com  Wed Mar  1 14:37:56 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Override geom column name in ogr PostgreSQL driver
In-Reply-To: <17413.61176.865929.947860@maggie.waterpathcanoe.com>
References: <17413.61176.865929.947860@maggie.waterpathcanoe.com>
Message-ID: <4405F814.3030702@pobox.com>

rob@dataflowdesign.com wrote:
> In OGR, is there a way to override the name of the wkb_geometry column
> in the PostgreSQL driver? Bug 769 addresses a similar issue for
> the oracle driver. But there doesn't appear to be a way in pg from
> looking at the code. 
> 
> If there is a way, please let me know and I will use it. If not, I
> will gladly submit a simple patch that I wrote which accepts the
> following argument:
> 
>     -lco GEOM_FNAME=the_geom

Rob,

Such a thing does not yet exist.  Please submit the request with the
layer creation option name GEOMETRY_NAME to match what the OCI driver
calls it.  I will modify the MySQL to also use this name.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ari.jolma at tkk.fi  Wed Mar  1 14:51:46 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Override geom column name in ogr PostgreSQL driver
In-Reply-To: <17413.61176.865929.947860@maggie.waterpathcanoe.com>
References: <17413.61176.865929.947860@maggie.waterpathcanoe.com>
Message-ID: <4405FB52.1060608@tkk.fi>

rob@dataflowdesign.com kirjoitti:
> In OGR, is there a way to override the name of the wkb_geometry column
> in the PostgreSQL driver? Bug 769 addresses a similar issue for
> the oracle driver. But there doesn't appear to be a way in pg from
> looking at the code. 
>
> If there is a way, please let me know and I will use it. If not, I
> will gladly submit a simple patch that I wrote which accepts the
> following argument:
>
>     -lco GEOM_FNAME=the_geom
>   

I thought there was no need to specify the name, i.e., OGR looks at the
schema and picks the column with geometry type. Or am I missing
something? I have tables which have differing names for the geometry
column and everything works.

Ari

> Regards,
> Rob
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From warmerdam at pobox.com  Wed Mar  1 15:33:33 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Override geom column name in ogr PostgreSQL driver
In-Reply-To: <4405FB52.1060608@tkk.fi>
References: <17413.61176.865929.947860@maggie.waterpathcanoe.com>
	<4405FB52.1060608@tkk.fi>
Message-ID: <4406051D.9060101@pobox.com>

Ari Jolma wrote:
> rob@dataflowdesign.com kirjoitti:
>> In OGR, is there a way to override the name of the wkb_geometry column
>> in the PostgreSQL driver? Bug 769 addresses a similar issue for
>> the oracle driver. But there doesn't appear to be a way in pg from
>> looking at the code.
>> If there is a way, please let me know and I will use it. If not, I
>> will gladly submit a simple patch that I wrote which accepts the
>> following argument:
>>
>>     -lco GEOM_FNAME=the_geom
>>   
> 
> I thought there was no need to specify the name, i.e., OGR looks at the
> schema and picks the column with geometry type. Or am I missing
> something? I have tables which have differing names for the geometry
> column and everything works.

Ari,

The GEOMETRY_NAME thing is for creating new tables.

You are correct that the geometry column should be automatically
recognised in existing tables.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From varaev at gmail.com  Wed Mar  1 15:10:14 2006
From: varaev at gmail.com (Ilya Varaev)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Specifying PixelIsArea vs PixelIsPoint in GDAL
Message-ID: <5d80187c0603011210t6435e6ebga0b195fd005168ca@mail.gmail.com>

Hello folks,
I wonder whether there is any way to store a tiff file with the raster
type of 'PixelIsPoint' instead of the default 'PixelIsArea'. It's
clearly possible if working directly with libgeotiff, but we are
trying to stay on the generic GDAL level (and well, it can probalby be
useful for a few other formats that support both modes). I've tried to
RTFM, but didn't find any references to this parameter.
If it's impossible to do, how safe is it to mix GDAL calls with
directly accessing format-specific features (e.g. directly modifying
tiff tags)?
SY
   Ivar


From jacob.delfos at maunsell.com  Wed Mar  1 18:48:56 2006
From: jacob.delfos at maunsell.com (Delfos, Jacob)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Defining Australian Map Grid in GDAL
Message-ID: <4997F456680DAD4DA1E042C40C463611426F9C@auper1ex002.au.aecomnet.com>

Andrew,

Theoretically, if you replace the incorrect lines in your EPSG
projection file (\proj\nad\epsg), then I believe you could do this:

gdalwarp -s_srs epsg:20255 -t_srs epsg:4326 -co "TFW=YES" image_in.tif
image_out.tif

As far as I can tell, that ought to work (and override the source
projection). There's a good chance your image does not in fact have a
datum defined, and it just defaults to WGS84.

Alternatively, you could use the parameters:

gdalwarp -s_srs "+proj=utm +zone=55 +south +a=6378160
+rf=298.250000000055
+towgs84=-129.193,-41.212,130.73,-0.246,-0.374,-0.329,-2.955 +units=m"
-t_srs "+proj=longlat +ellps=WGS84 +datum=WGS84" -co "TFW=YES"
image_in.tif image_out.tif

I'm no export on gdalwarp, so this may not work :)

Regards,

Jacob


 

> -----Original Message-----
> From: Andrew Williams [mailto:awilliams@rapidmap.com.au] 
> Sent: 1 March 2006 14:22
> To: Delfos, Jacob
> Cc: gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] Defining Australian Map Grid in GDAL
> 
> OK I've narrowed it down. Jacob is correct, there is a 
> problem handling AGD datums. With the TFW file in the same 
> directory as the source image I've attenpted to translate the 
> image using the following command line
>  
> gdalwarp -s_srs "+proj=utm +zone=55 +south +a=6378160 
> +rf=298.250000000055" -t_srs "+proj=latlong +datum=WGS84" -co 
> "TFW=YES" image_in.tif image_out.tif
>  
> What is happening is that the system is being converted from 
> grid to latlong but the source datum is still adopting WGS84. 
> Therefore 200 odd metres out when computed to latlong.
>  
> I have checked the varios csv's such as gcs, pcs, datum and 
> ellipsoid and the correct parameter appear to be in place.
>  
> The TFW only defines the top left corner of the image and the 
> pixel dimension. Why would GDAL assume WGS84 when I have 
> defined override parameters?
>  
> Do I need to take Jacob's file and insert it into one of 
> these other csv's? Any other ideas?
>  
> regards
> Andrew
> 
> 	-----Original Message----- 
> 	From: Delfos, Jacob [mailto:jacob.delfos@maunsell.com] 
> 	Sent: Wed 3/1/2006 11:02 AM 
> 	To: Andrew Williams 
> 	Cc: gdal-dev@lists.maptools.org 
> 	Subject: RE: [Gdal-dev] Defining Australian Map Grid in GDAL
> 	
> 	
> 
> 	Andrew, 
> 
> 	You have to be careful with AGD-based projections in 
> Proj4, because the definitions that exist in Proj4 are not 
> correct (problem with datums). I'm attaching a file with 
> correct definitions for AGD-based projections. I have myself 
> spent several days trying to figure out why my coordinates 
> were up to 200m off, only to realise that Proj4 does not 
> appear to use the AGD84 and AGD66 datum correctly.
> 
> 	Just for the record: 
> 	AMG66 = UTM + AGD66-datum 
> 	AMG84 = UTM + AGD84-datum 
> 	MGA94 = UTM + GDA94-datum (where GDA94 can be 
> substituted with WGS84) 
> 
> 	Be careful with the acronyms. You wouldn't be the first 
> to start construction in the wrong spot :) 
> 	For your image, I guess just override the projection, 
> and project from Latlong AGD84 (epsg:4203, bottom of file I 
> sent) to Latlong WGS84.
> 
> 	Regards, 
> 
> 	Jacob 
> 	  
> 
> 	JACOB DELFOS
> 	GIS ANALYST
> 	Maunsell Australia Pty Ltd
> 	629 Newcastle Street, Leederville, WA 6007 
> 	PO Box 81, Leederville, WA 6902 
> 	Western Australia 
> 	ABN 20 093 846 925
> 	
> 	Tel     + 61 8 9281 6185
> 	Fax    + 61 8 9281 6297
> 	jacob.delfos@maunsell.com 
> 
> 	<<agd84_agd66_proj4.txt>> 
> 
> 	> -----Original Message----- 
> 	> From: gdal-dev-bounces@lists.maptools.org 
> 	> [mailto:gdal-dev-bounces@lists.maptools.org 
> <mailto:gdal-dev-bounces@lists.maptools.org> ] On Behalf Of 
> 	> Andrew Williams 
> 	> Sent: 28 February 2006 22:27 
> 	> To: gdal-dev@lists.maptools.org 
> 	> Subject: [Gdal-dev] Defining Australian Map Grid in GDAL 
> 	> 
> 	> Hello folks. 
> 	> I'm having trouble with a Geotiff. 
> 	> The scan is a topographic map sheet. The cartography and grid 
> 	> on the sheet is based on AMG (Australian Map Grid). It is a 
> 	> UTM projection based on the Australian National Spheroid, 
> 	> ellps=aust_SA I believe. 
> 	>  
> 	> My problem is that the GeoTiff has been georefernced as UTM 
> 	> ellps=GRS80 datum=WGS84 incorrectly. 
> 	>  
> 	> My intent is to gdalwarp the image to latlong WGS84. 
> 	>  
> 	> I have tried for the better part of a day to attempt to 
> 	> override or otherwise correct the georeferncing. 
> Without success. 
> 	>  
> 	> I have been very successful with GDAL in the past, but this 
> 	> has stopped me. 
> 	>  
> 	> The problem is that I can't seem to fully define AMG "enough" 
> 	> to allow GDALwarp to reproject the image. It seems to default 
> 	> to the source as being UTM WGS84. 
> 	>  
> 	> I attempted to gdal_translate the image using the corrected 
> 	> definition and then gdalwarp image, but that also failed. 
> 	>  
> 	> the definition I have been using is "+proj=tmerc 
> 	> +ellps=aust_SA +lat_0=0 +lon_0=147 +x_0=500000 +y_0=10000000 
> 	> +k=0.9996 +south" 
> 	>  
> 	> regards 
> 	> Andrew 
> 	> 
> 	> _______________________________________________ 
> 	> Gdal-dev mailing list 
> 	> Gdal-dev@lists.maptools.org 
> 	> http://lists.maptools.org/mailman/listinfo/gdal-dev 
> <http://lists.maptools.org/mailman/listinfo/gdal-dev>  
> 	> 
> 
> 


From warmerdam at pobox.com  Wed Mar  1 18:57:27 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Specifying PixelIsArea vs PixelIsPoint in GDAL
In-Reply-To: <5d80187c0603011210t6435e6ebga0b195fd005168ca@mail.gmail.com>
References: <5d80187c0603011210t6435e6ebga0b195fd005168ca@mail.gmail.com>
Message-ID: <440634E7.6080603@pobox.com>

Ilya Varaev wrote:
> Hello folks,
> I wonder whether there is any way to store a tiff file with the raster
> type of 'PixelIsPoint' instead of the default 'PixelIsArea'. It's
> clearly possible if working directly with libgeotiff, but we are
> trying to stay on the generic GDAL level (and well, it can probalby be
> useful for a few other formats that support both modes). I've tried to
> RTFM, but didn't find any references to this parameter.
> If it's impossible to do, how safe is it to mix GDAL calls with
> directly accessing format-specific features (e.g. directly modifying
> tiff tags)?

Ilya,

Yes, if you set the metadata item on the dataset named AREA_OR_POINT
to a value of POINT it will be written as a PixelIsPoint geotiff file.

eg.


gdal_translate -mo AREA_OR_POINT=POINT utm.tif out.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Thu Mar  2 00:46:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] dgn file creation
In-Reply-To: <200603012001.32747@centrum.cz>
References: 00602281233.29629@centrum.cz> <200602281233.29629@centrum.cz>
	<4404AE9F.60601@pobox.com> <200603011921.24363@centrum.cz>
	<200603012001.32747@centrum.cz>
Message-ID: <4406869B.6070503@pobox.com>

stradivarius@centrum.cz wrote:
>  Hi Frank,
> thanks for your reply. I?m using the usual map of the world from
> http://www.cipotato.org/DIVA/data/misc/world_adm0.zip. 
> I tried to add columns with the names of types generic attributes in pg
> and exported it back to shape. If you want it is at
> http://blaunit.com/extras/mundo.zip.
 >
> ogr2ogr -select TYPE,LEVEL,COLORINDEX,WEIGHT,STYLE -f "DGN" mundo_ogr.dgn
> mundo.shp
> I have 5 times ERROR 6: CreateField() not supported by this layer.

Karel,

I was able to do the translation but had a few problems.

1) Only the first geometry in a multipolygon was being written.
    I have modified the writer so it will now write each component
    of any kind of geometry collection as essentially a distinct
    feature in the DGN file.  That means there is now a separate
    SHAPE for each island of multi-island nations.

2) The default seed file is a poor choice for lat/long coordinates.
    I used the following command to get a better origin:

   ogr2ogr -f DGN -dsco ORIGIN=-180,90,0 -dsco UOR_PER_SUB_UNIT=1000
       -dsco SUB_UNITS_PER_MASTER_UNIT=1000 out2.dgn mundo.shp

3) interior rings in polygons (ie. lakes) are ignored by the writer.
    I can't fix this (easily).  Basically there is no easy way to
    represent polygons with holes in DGN.

4) Northern Ireland is treated as part of Ireland, and not the United
    Kingdom in your source file.  That seems pretty politically dangerous!

> furthermore, Is there some possibility to link external dbase file (i.e. the very same .dbf from the shp:-) into dgn element definition?
> best regards, Karel

I do not believe there is currently any way to write database linkages
through OGR.  If you really need to do this you will basically need to
write a program directly on top of Shapelib.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From meems at soilcompany.nl  Thu Mar  2 02:02:40 2006
From: meems at soilcompany.nl (Paul Meems)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] [GDAL_Contours]Different gridcellsizes
Message-ID: <D9C8A00F-8180-4B5D-97C3-49B6F97967EF@soilcompany.nl>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>Message</TITLE>
<META http-equiv=Content-Type content="text/html; charset=us-ascii">
<META content="MSHTML 6.00.2800.1529" name=GENERATOR></HEAD>
<BODY>
<DIV><SPAN class=590033607-01032006><FONT face=Arial><FONT size=2><SPAN 
class=402375906-02032006><FONT 
color=#000000>H</FONT></SPAN>i,</FONT></FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>This is my first 
post to this list.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>I'm a member of the 
MapWindow Developing Team (<A 
href="http://www.mapwindow.org">www.mapwindow.org</A>) and MapWindow (MW) is 
using GDAL.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>One of the used 
functions of GDAL is the 'Generate Contours from Grid'.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>Regarding this 
function I have some questions.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>I want to use it to 
convert Surfer 7 gridfiles (<A 
href="http://www.goldensoftware.com">www.goldensoftware.com</A>) to shapefiles. 
Using the current GDAL_Contour function&nbsp;it is allmost working. A shapefile 
is produced but because Surfer uses different gridcellsizes for X and Y the 
created contours are shifted.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>So my question is 
can GDAL_Contour be altered so it can handle different 
gridcellsizes?</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>The difference 
between a 'normal' gridfile and a gridfile with different gridcellsizes is in 
the header:</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>A normal 
gridfile:</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2>NCOLS&nbsp;96<BR>NROWS&nbsp;83<BR>XLLCENTER&nbsp;200022.735<BR>YLLCENTER&nbsp;598252.6382<BR>CELLSIZE 
3.49626421052656<BR>NODATA_VALUE&nbsp;-99</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>A different 
gridcellsizes gridfile:</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2>NCOLS&nbsp;96<BR>NROWS&nbsp;83<BR>XLLCENTER&nbsp;200022.735<BR>YLLCENTER&nbsp;598252.6382<BR>DX&nbsp;3.49626421052656<BR>DY&nbsp;3.50804024390172<BR>NODATA_VALUE&nbsp;-99</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>Notice the DX and DY 
lines comparing with the CELLSIZE line in the equal one.<BR>The new gridobject 
in MW is handling this correctly.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial color=#0000ff size=2><SPAN 
class=402375906-02032006>I've&nbsp;made a zipfile with some sample&nbsp;data. 
It's available at <A 
href="http://bugs.mapwindow.org/show_bug.cgi?id=88">http://bugs.mapwindow.org/show_bug.cgi?id=88</A>&nbsp;</SPAN></FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>The&nbsp;zipfile 
containes a ppt-file with the gridfile overlaid with the correct contoured 
shapefile by my own function (this file, Correct_contour.shp is included as 
well) and with a shapefile (grid_with_different_gridsizes_Contour.shp, included 
as well) created by the<BR>Contour-function of MW (using the GDAL_Contour), this 
one is in red and is shifted.<BR>I also&nbsp;include two gridfiles who have the 
same data only different headers.<BR>One is with equal gridcellsizes 
(grid_with_equal_gridsizes.asc) and the other is with different gridcellsizes 
(grid_with_different_gridsizes.asc).</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>I'm just a VB6 
programmer so I hope someone of the GDAL Developing Team would look into 
it.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>When GDAL handles 
the different gridcellsizes correctly MapWindow will as 
well.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>And I would be very 
happy because the GDAL_Contour is much faster than my own VB6 function 
;)</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>Thanks in 
advanced.</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>Paul 
Meems</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial size=2>The 
Netherlands</FONT></SPAN></DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=590033607-01032006><FONT face=Arial 
size=2></FONT></SPAN>&nbsp;</DIV></BODY></HTML>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060302/41b8851e/attachment.html
From ari.jolma at tkk.fi  Thu Mar  2 03:53:05 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] latest swig/perl docs
Message-ID: <4406B271.5010206@tkk.fi>

Dear Perl users of GDAL and OGR,

I've updated the docs at http://map.hut.fi/gdal-perl/ and will keep the
latest versions of these documents here. Eventually they will get to the
CVS, GDAL distribution, and perhaps to the main GDAL website.

Comments and contributions (also material beyond these essential pieces)
are welcome. I'd also be happy to set up some live examples via mod_perl.

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From neteler at itc.it  Thu Mar  2 05:33:20 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <4405D647.7050607@pobox.com>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>
	<4405D647.7050607@pobox.com>
Message-ID: <20060302103320.GG26670@bartok.itc.it>

Frank,

I observed that the -summary flag is gone in 'ogrinfo'.
It would be VERY useful to display some metadata:

Currently:
 ogrinfo  pollo_pat.shp
 INFO: Open of `pollo_pat.shp'
 using driver `ESRI Shapefile' successful.
 1: pollo_pat (Point)

Desired:
 ogrinfo  pollo_pat.shp
 INFO: Open of `pollo_pat.shp'
 using driver `ESRI Shapefile' successful.
 Extent: (1619353.660000, 5061907.140000) - (1697751.000000, 5113358.260000)
 Layer SRS WKT:
 PROJCS["Transverse Mercator",
    GEOGCS["international",
        DATUM["Monte_Mario",
            SPHEROID["international",6378388,297],
            TOWGS84[-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1500000],
    PARAMETER["false_northing",0],
    UNIT["meter",1]]
 1: pollo_pat (Point)


I know, that things are printed when adding the layer name,
but then I get hundreds of lines (most of these info I don't
want to know):

 ogrinfo  pollo_pat.shp pollo_pat | wc -l
 291

Do you see a chance to modify the standard output?

thanks

 Markus

From warmerdam at pobox.com  Thu Mar  2 10:44:30 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <20060302103320.GG26670@bartok.itc.it>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>	<4405D647.7050607@pobox.com>
	<20060302103320.GG26670@bartok.itc.it>
Message-ID: <440712DE.9060705@pobox.com>

Markus Neteler wrote:
> Frank,
> 
> I observed that the -summary flag is gone in 'ogrinfo'.
> It would be VERY useful to display some metadata:
...
> Do you see a chance to modify the standard output?

Markus,

Sorry, the commandline processing was fixed up a bit and after
that only -so was accepted.  I didn't realize that it was once
used as -summary since I always just use -so.

I have modified the code to accept either -so or -summary for this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From neteler at itc.it  Thu Mar  2 11:49:23 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <440712DE.9060705@pobox.com>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>
	<4405D647.7050607@pobox.com> <20060302103320.GG26670@bartok.itc.it>
	<440712DE.9060705@pobox.com>
Message-ID: <20060302164923.GQ4038@bartok.itc.it>

On Thu, Mar 02, 2006 at 10:44:30AM -0500, Frank Warmerdam wrote:
> Markus Neteler wrote:
> >Frank,
> >
> >I observed that the -summary flag is gone in 'ogrinfo'.
> >It would be VERY useful to display some metadata:
> ...
> >Do you see a chance to modify the standard output?
> 
> Markus,
> 
> Sorry, the commandline processing was fixed up a bit and after
> that only -so was accepted.  I didn't realize that it was once
> used as -summary since I always just use -so.
> 
> I have modified the code to accept either -so or -summary for this.

Frank,

thanks, summary is back but not the metadata (I did make distclean):

ogrinfo /tmp/pollo_pat.shp
INFO: Open of `/tmp/pollo_pat.shp'
using driver `ESRI Shapefile' successful.
1: pollo_pat (Point)

ogrinfo -so /tmp/pollo_pat.shp
INFO: Open of `/tmp/pollo_pat.shp'
using driver `ESRI Shapefile' successful.
1: pollo_pat (Point)


ogrinfo -summary /tmp/pollo_pat.shp
INFO: Open of `/tmp/pollo_pat.shp'
using driver `ESRI Shapefile' successful.
1: pollo_pat (Point)

ls -la /tmp/pollo_pat.prj
-rw-------  1 neteler ssi 436 Feb 28 13:27 /tmp/pollo_pat.prj

In earlier days (end of last year?) also the projection
was shown which is quite important (for me).

Thanks

 markus

From warmerdam at pobox.com  Thu Mar  2 12:34:10 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <20060302164923.GQ4038@bartok.itc.it>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>	<4405D647.7050607@pobox.com>
	<20060302103320.GG26670@bartok.itc.it>	<440712DE.9060705@pobox.com>
	<20060302164923.GQ4038@bartok.itc.it>
Message-ID: <44072C92.6050000@pobox.com>

Markus Neteler wrote:
>> Frank,
> 
> thanks, summary is back but not the metadata (I did make distclean):
> 
> ogrinfo /tmp/pollo_pat.shp
> INFO: Open of `/tmp/pollo_pat.shp'
> using driver `ESRI Shapefile' successful.
> 1: pollo_pat (Point)
> 
> ogrinfo -so /tmp/pollo_pat.shp
> INFO: Open of `/tmp/pollo_pat.shp'
> using driver `ESRI Shapefile' successful.
> 1: pollo_pat (Point)
> 
> 
> ogrinfo -summary /tmp/pollo_pat.shp
> INFO: Open of `/tmp/pollo_pat.shp'
> using driver `ESRI Shapefile' successful.
> 1: pollo_pat (Point)
> 
> ls -la /tmp/pollo_pat.prj
> -rw-------  1 neteler ssi 436 Feb 28 13:27 /tmp/pollo_pat.prj
> 
> In earlier days (end of last year?) also the projection
> was shown which is quite important (for me).

Markus,

Did ogrinfo really show details about the layers with specifying
the layers to report on?  I don't recall that.

I use "ogrinfo -so -al -ro <datasourcename>" when I want a "summary only"
report of "all layers" in "readonly" mode.


Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From neteler at itc.it  Thu Mar  2 12:41:56 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <200603021114.53059.naci0002@umn.edu>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>
	<440712DE.9060705@pobox.com> <20060302164923.GQ4038@bartok.itc.it>
	<200603021114.53059.naci0002@umn.edu>
Message-ID: <20060302174156.GV4038@bartok.itc.it>

On Thu, Mar 02, 2006 at 11:14:52AM -0600, Pericles S. Nacionales wrote:
> Hi Markus, Frank,
> 
> I think what Markus wants is something like this:
> ogrinfo -so -al /tmp/pollo_pat.shp
> 
> Is that correct Markus?
 
Perry,

yes, right. Then I change my suggestion to "make it easier",
the -al step is one too much IMHO.

Markus

> 
> On Thursday 02 March 2006 10:49, Markus Neteler wrote:
> > On Thu, Mar 02, 2006 at 10:44:30AM -0500, Frank Warmerdam wrote:
> > > Markus Neteler wrote:
> > > >Frank,
> > > >
> > > >I observed that the -summary flag is gone in 'ogrinfo'.
> > > >It would be VERY useful to display some metadata:
> > >
> > > ...
> > >
> > > >Do you see a chance to modify the standard output?
> > >
> > > Markus,
> > >
> > > Sorry, the commandline processing was fixed up a bit and after
> > > that only -so was accepted.  I didn't realize that it was once
> > > used as -summary since I always just use -so.
> > >
> > > I have modified the code to accept either -so or -summary for this.
> >
> > Frank,
> >
> > thanks, summary is back but not the metadata (I did make distclean):
> >
> > ogrinfo /tmp/pollo_pat.shp
> > INFO: Open of `/tmp/pollo_pat.shp'
> > using driver `ESRI Shapefile' successful.
> > 1: pollo_pat (Point)
> >
> > ogrinfo -so /tmp/pollo_pat.shp
> > INFO: Open of `/tmp/pollo_pat.shp'
> > using driver `ESRI Shapefile' successful.
> > 1: pollo_pat (Point)
> >
> >
> > ogrinfo -summary /tmp/pollo_pat.shp
> > INFO: Open of `/tmp/pollo_pat.shp'
> > using driver `ESRI Shapefile' successful.
> > 1: pollo_pat (Point)
> >
> > ls -la /tmp/pollo_pat.prj
> > -rw-------  1 neteler ssi 436 Feb 28 13:27 /tmp/pollo_pat.prj
> >
> > In earlier days (end of last year?) also the projection
> > was shown which is quite important (for me).
> >
> > Thanks
> >
> >  markus
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> -- 
> Pericles S. Nacionales
> Conservation Biology Program
> University of Minnesota
> e-mail: naci0002@umn.edu

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From jgreenberg at arc.nasa.gov  Thu Mar  2 15:09:51 2006
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] v.in.ogr memory leak?
Message-ID: <200603022010.k22KA9RE009269@duke.maptools.org>

I was running v.in.ogr on grass61 (cygwin) on a shapefile that has a ~200mb
.shp file and a ~ 2gb .dbf file, and I watched in horror as my memory usage
his about 1.5 gb and shortly thereafter got an out-of-memory error (so the
import failed).  Have newer version of gdal/ogr solved this problem (since
I'm using cygwin, I'm hesitant to try a compile 'lest I break a currently
working grass install).

--j

--

Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Phone: 415-794-5043
AIM: jgrn3007
MSN: jgrn3007@hotmail.com




From warmerdam at pobox.com  Thu Mar  2 15:44:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] v.in.ogr memory leak?
In-Reply-To: <200603022010.k22KA9RE009269@duke.maptools.org>
References: <200603022010.k22KA9RE009269@duke.maptools.org>
Message-ID: <44075913.40709@pobox.com>

Jonathan Greenberg wrote:
> I was running v.in.ogr on grass61 (cygwin) on a shapefile that has a ~200mb
> .shp file and a ~ 2gb .dbf file, and I watched in horror as my memory usage
> his about 1.5 gb and shortly thereafter got an out-of-memory error (so the
> import failed).  Have newer version of gdal/ogr solved this problem (since
> I'm using cygwin, I'm hesitant to try a compile 'lest I break a currently
> working grass install).

Jonathan,

You seem to be assuming the leak is in OGR not v.in.ogr itself or even
the grass libraries!

You might want to try an ogr2ogr on the same file and see what happens.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From naci0002 at umn.edu  Thu Mar  2 12:14:52 2006
From: naci0002 at umn.edu (Pericles S. Nacionales)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <20060302164923.GQ4038@bartok.itc.it>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>
	<440712DE.9060705@pobox.com> <20060302164923.GQ4038@bartok.itc.it>
Message-ID: <200603021114.53059.naci0002@umn.edu>

Hi Markus, Frank,

I think what Markus wants is something like this:
ogrinfo -so -al /tmp/pollo_pat.shp

Is that correct Markus?

-Perry

On Thursday 02 March 2006 10:49, Markus Neteler wrote:
> On Thu, Mar 02, 2006 at 10:44:30AM -0500, Frank Warmerdam wrote:
> > Markus Neteler wrote:
> > >Frank,
> > >
> > >I observed that the -summary flag is gone in 'ogrinfo'.
> > >It would be VERY useful to display some metadata:
> >
> > ...
> >
> > >Do you see a chance to modify the standard output?
> >
> > Markus,
> >
> > Sorry, the commandline processing was fixed up a bit and after
> > that only -so was accepted.  I didn't realize that it was once
> > used as -summary since I always just use -so.
> >
> > I have modified the code to accept either -so or -summary for this.
>
> Frank,
>
> thanks, summary is back but not the metadata (I did make distclean):
>
> ogrinfo /tmp/pollo_pat.shp
> INFO: Open of `/tmp/pollo_pat.shp'
> using driver `ESRI Shapefile' successful.
> 1: pollo_pat (Point)
>
> ogrinfo -so /tmp/pollo_pat.shp
> INFO: Open of `/tmp/pollo_pat.shp'
> using driver `ESRI Shapefile' successful.
> 1: pollo_pat (Point)
>
>
> ogrinfo -summary /tmp/pollo_pat.shp
> INFO: Open of `/tmp/pollo_pat.shp'
> using driver `ESRI Shapefile' successful.
> 1: pollo_pat (Point)
>
> ls -la /tmp/pollo_pat.prj
> -rw-------  1 neteler ssi 436 Feb 28 13:27 /tmp/pollo_pat.prj
>
> In earlier days (end of last year?) also the projection
> was shown which is quite important (for me).
>
> Thanks
>
>  markus
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 
Pericles S. Nacionales
Conservation Biology Program
University of Minnesota
e-mail: naci0002@umn.edu

From warmerdam at pobox.com  Thu Mar  2 17:25:20 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Re: [Geo-perl] latest swig/perl docs
In-Reply-To: <4406B271.5010206@tkk.fi>
References: <4406B271.5010206@tkk.fi>
Message-ID: <440770D0.90601@pobox.com>

Ari Jolma wrote:
> Dear Perl users of GDAL and OGR,
> 
> I've updated the docs at http://map.hut.fi/gdal-perl/ and will keep the
> latest versions of these documents here. Eventually they will get to the
> CVS, GDAL distribution, and perhaps to the main GDAL website.
> 
> Comments and contributions (also material beyond these essential pieces)
> are welcome. I'd also be happy to set up some live examples via mod_perl.

Folks,

I have restructured the main GDAL page a bit to add a language binding
section, and put a link there to the perl page.

Charles, would you be interested in producing an introduction to
the Ruby bindings?

It would also be good to get status information on Java in a page, and
perhaps a better Python intro than the general API tutorial.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Thu Mar  2 23:11:51 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] [GDAL_Contours]Different gridcellsizes
In-Reply-To: <D9C8A00F-8180-4B5D-97C3-49B6F97967EF@soilcompany.nl>
References: <D9C8A00F-8180-4B5D-97C3-49B6F97967EF@soilcompany.nl>
Message-ID: <4407C207.10903@pobox.com>

Paul Meems wrote:
> Hi,
>  
> This is my first post to this list.
>  
> I'm a member of the MapWindow Developing Team (www.mapwindow.org 
> <http://www.mapwindow.org>) and MapWindow (MW) is using GDAL.
> One of the used functions of GDAL is the 'Generate Contours from Grid'.
> Regarding this function I have some questions.
>  
> I want to use it to convert Surfer 7 gridfiles (www.goldensoftware.com 
> <http://www.goldensoftware.com>) to shapefiles. Using the current 
> GDAL_Contour function it is allmost working. A shapefile is produced but 
> because Surfer uses different gridcellsizes for X and Y the created 
> contours are shifted.
> So my question is can GDAL_Contour be altered so it can handle different 
> gridcellsizes?
>  
> The difference between a 'normal' gridfile and a gridfile with different 
> gridcellsizes is in the header:
>  
> A normal gridfile:
> NCOLS 96
> NROWS 83
> XLLCENTER 200022.735
> YLLCENTER 598252.6382
> CELLSIZE 3.49626421052656
> NODATA_VALUE -99
>  
> A different gridcellsizes gridfile:
> NCOLS 96
> NROWS 83
> XLLCENTER 200022.735
> YLLCENTER 598252.6382
> DX 3.49626421052656
> DY 3.50804024390172
> NODATA_VALUE -99
>  
> Notice the DX and DY lines comparing with the CELLSIZE line in the equal 
> one.
> The new gridobject in MW is handling this correctly.

Paul,

I got the impression from your message, and the bugzilla entry at
MapWindow that the core problem was with handling of non-square pixels
in the contour algorithm.  But I tested that and it seemed fine.

What I did find was that the AAIGRID (ASCII Arc/Info Grid) driver
was not support files with DX and DY instead of CELLSIZE.   So I
corrected that in CVS.  The gdal_contour commandline utility now
generates contour lines properly for the grid_with_different_gridsizes.asc
file in your test dataset.

While looking into this, I also saw problem with the nodata handling in
your file.  It turns out -99 was an "interval level" so the contour
algorithm was altering it slightly.  This then defeated the nodata value
check.  So I modified the contour algorithm to not perturb "interval values"
that match the nodata value.

I see also that your .ASC files are floating point, but misidentified
as integer before the bunch of initial values checked are all nodata.
This has been a very long standing flaw in the AAIGRID driver.  For
now you can manually edit the .asc file and add a ".0" after the first
pixel value (ie. change -99 to -99.0) to get it recognised as a floating
point file.

I would like a better fix for this, but I'm still not sure how to avoid
having to read the whole file to see if there are any non-integer values.
And I hate having to read the whole file on open if I can avoid it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ari.jolma at tkk.fi  Fri Mar  3 02:30:52 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] vmap0 data, Feature Count 0
Message-ID: <4407F0AC.5040200@tkk.fi>

I can't fix for the problem of reading the actual vmap0 data (I see the 
header data, which says Feature Count 0 for political boundaries for 
example) with OGR. In GRASSNews vol3 Markus writes about removing 
trailing dots and changing uppercase directories to lower case but there 
aren't such in my version of vmap0 data (the lists that the shell script 
produces are empty). Any advice?

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From Lin.Zheng at erdc.usace.army.mil  Fri Mar  3 09:21:02 2006
From: Lin.Zheng at erdc.usace.army.mil (Zheng, Lin ERDC-TEC-VA)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Problem on creating a simple point shapefile with OGR
Message-ID: <45F2DA16CFC5E24ABF82E634E30B7DE3011D01EE@ERD-ML2ERD.erd.ds.usace.army.mil>

Hi All,
    I am a newbie on OGR.  I read the OGR API tutorial and tried to compile
the "writing to OGR" example with Microsoft Visual C++ 6.0, where a single
shapefile is created using OGR.  The program compiled successfully, but when
after I ran it, it returned:
                    "ERROR 1: point_out.shp is not a directory.
                     Creation of output file failed."
   I also read through the documentation on ESRI shapefile, and it
specifically said that it is possible to use one of the files (.shp, .shx or
.dbf) in a shapefile set as the dataset name.  Did I forget to add something?
Can anyone please help me?
 
        Thank you very much.
 
   Lin Zheng
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060303/5b4c1390/attachment.html
From neteler at itc.it  Fri Mar  3 09:31:38 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <44072C92.6050000@pobox.com>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>
	<4405D647.7050607@pobox.com> <20060302103320.GG26670@bartok.itc.it>
	<440712DE.9060705@pobox.com> <20060302164923.GQ4038@bartok.itc.it>
	<44072C92.6050000@pobox.com>
Message-ID: <20060303143138.GE30055@bartok.itc.it>

On Thu, Mar 02, 2006 at 12:34:10PM -0500, Frank Warmerdam wrote:
> Markus Neteler wrote:
> >>Frank,
> >
> >thanks, summary is back but not the metadata (I did make distclean):
> >
> >ogrinfo /tmp/pollo_pat.shp
> >INFO: Open of `/tmp/pollo_pat.shp'
> >using driver `ESRI Shapefile' successful.
> >1: pollo_pat (Point)
> >
> >ogrinfo -so /tmp/pollo_pat.shp
> >INFO: Open of `/tmp/pollo_pat.shp'
> >using driver `ESRI Shapefile' successful.
> >1: pollo_pat (Point)
> >
> >
> >ogrinfo -summary /tmp/pollo_pat.shp
> >INFO: Open of `/tmp/pollo_pat.shp'
> >using driver `ESRI Shapefile' successful.
> >1: pollo_pat (Point)
> >
> >ls -la /tmp/pollo_pat.prj
> >-rw-------  1 neteler ssi 436 Feb 28 13:27 /tmp/pollo_pat.prj
> >
> >In earlier days (end of last year?) also the projection
> >was shown which is quite important (for me).
> 
> Markus,
> 
> Did ogrinfo really show details about the layers with specifying
> the layers to report on?  I don't recall that.

Frank,

maybe it never did. But it should (such as gdalinfo).
 
> I use "ogrinfo -so -al -ro <datasourcename>" when I want a "summary only"
> report of "all layers" in "readonly" mode.

Yes. But it could to so without adding 3 parameters of 3 chars 
each :-) Just for user convenience, it's my wish to see the
projection metadata stuff immediately (as gdalinfo nicely
does). Is there a chance for that?

thanks

 Markus
 (sorry for insisting)


From neteler at itc.it  Fri Mar  3 09:34:38 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] vmap0 data, Feature Count 0
In-Reply-To: <4407F0AC.5040200@tkk.fi>
References: <4407F0AC.5040200@tkk.fi>
Message-ID: <20060303143438.GF30055@bartok.itc.it>

On Fri, Mar 03, 2006 at 09:30:52AM +0200, Ari Jolma wrote:
> I can't fix for the problem of reading the actual vmap0 data (I see the 
> header data, which says Feature Count 0 for political boundaries for 
> example) with OGR. In GRASSNews vol3 Markus writes about removing 
> trailing dots and changing uppercase directories to lower case but there 
> aren't such in my version of vmap0 data (the lists that the shell script 
> produces are empty). Any advice?
 
Ari,

trailing dots depend on the VMAP0 zone. These data are
not identily in their structure. Who knows why.

Please also see our erratum if my script doesn't
work for you:
 http://grass.itc.it/newsletter/GRASSNews_vol3_erratum.txt

It's also important to have a rather fresh OGDI driver,
not older than one year, if I recall correctly.

It probably also depends on the operating system.
Some are case sensitive, others not.

Markus

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From dem at acri-st.fr  Fri Mar  3 09:38:13 2006
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Problem on creating a simple point shapefile with OGR
In-Reply-To: <45F2DA16CFC5E24ABF82E634E30B7DE3011D01EE@ERD-ML2ERD.erd.ds.usace.army.mil>
References: <45F2DA16CFC5E24ABF82E634E30B7DE3011D01EE@ERD-ML2ERD.erd.ds.usace.army.mil>
Message-ID: <440854D5.3000807@acri-st.fr>

Lin,

This is a common error you get when the output file (.shp .shx and .dbf) 
already exists, remove it first and it'll works.


Julien


Zheng, Lin ERDC-TEC-VA a ?crit :
> Hi All,
>     I am a newbie on OGR.  I read the OGR API tutorial and tried to 
> compile the "writing to OGR" example with Microsoft Visual C++ 6.0, 
> where a single shapefile is created using OGR.  The program compiled 
> successfully, but when after I ran it, it returned:
>                     "ERROR 1: point_out.shp is not a directory.
>                      Creation of output file failed."
>    I also read through the documentation on ESRI shapefile, and it 
> specifically said that it is possible to use one of the files (.shp, 
> .shx or .dbf) in a shapefile set as the dataset name.  Did I forget to 
> add something?  Can anyone please help me?
>  
>         Thank you very much.
>  
>    Lin Zheng
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From Lin.Zheng at erdc.usace.army.mil  Fri Mar  3 09:45:52 2006
From: Lin.Zheng at erdc.usace.army.mil (Zheng, Lin ERDC-TEC-VA)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Problem on creating a simple point shapefile with OGR
Message-ID: <45F2DA16CFC5E24ABF82E634E30B7DE3011D01F0@ERD-ML2ERD.erd.ds.usace.army.mil>

Hi Julien,
    Thank you for your help.  I think it works now.  Will this make a
directory full of shapefiles or just a single shapefile?
    Thank you again.
 
Lin Zheng

________________________________

From: Julien Demaria [mailto:dem@acri-st.fr]
Sent: Fri 3/3/2006 8:38 AM
To: Zheng, Lin ERDC-TEC-VA
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Problem on creating a simple point shapefile with OGR



Lin,

This is a common error you get when the output file (.shp .shx and .dbf)
already exists, remove it first and it'll works.


Julien


Zheng, Lin ERDC-TEC-VA a ?crit :
> Hi All,
>     I am a newbie on OGR.  I read the OGR API tutorial and tried to
> compile the "writing to OGR" example with Microsoft Visual C++ 6.0,
> where a single shapefile is created using OGR.  The program compiled
> successfully, but when after I ran it, it returned:
>                     "ERROR 1: point_out.shp is not a directory.
>                      Creation of output file failed."
>    I also read through the documentation on ESRI shapefile, and it
> specifically said that it is possible to use one of the files (.shp,
> .shx or .dbf) in a shapefile set as the dataset name.  Did I forget to
> add something?  Can anyone please help me?
> 
>         Thank you very much.
> 
>    Lin Zheng
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060303/3889ecc6/attachment.html
From warmerdam at pobox.com  Fri Mar  3 10:19:54 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <20060303143138.GE30055@bartok.itc.it>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>	<4405D647.7050607@pobox.com>
	<20060302103320.GG26670@bartok.itc.it>	<440712DE.9060705@pobox.com>
	<20060302164923.GQ4038@bartok.itc.it>	<44072C92.6050000@pobox.com>
	<20060303143138.GE30055@bartok.itc.it>
Message-ID: <44085E9A.4090204@pobox.com>

Markus Neteler wrote:
>> I use "ogrinfo -so -al -ro <datasourcename>" when I want a "summary only"
>> report of "all layers" in "readonly" mode.
> 
> Yes. But it could to so without adding 3 parameters of 3 chars 
> each :-) Just for user convenience, it's my wish to see the
> projection metadata stuff immediately (as gdalinfo nicely
> does). Is there a chance for that?

Markus,

Well, obviously it would not be technically difficult to make "-al -so"
the default, but the summary information can be very expensive to
report since it generally requires scanning all the features twice - once
to count and once to collect the extents.  So I am not keen to do this
by default.  I'm not even keen to report the projection information
for each layer since if present it is pretty bulky, and in a dataset
with alot of layers the user would immediately be buried in many pages
of projection reports.  Likely all the same.

So, in this case my position is that I won't make the suggested change
in ogrinfo.  Of course, in the new democratic GDAL/OGR, if you can
convince the rest of the PSC I could be overridden.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From neteler at itc.it  Fri Mar  3 12:44:29 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] ogrinfo metadata output
In-Reply-To: <44085E9A.4090204@pobox.com>
References: <54808B311D66EB4E9CF4647B0DE707C20309DD8E@firewire.esri.com>
	<4405D647.7050607@pobox.com> <20060302103320.GG26670@bartok.itc.it>
	<440712DE.9060705@pobox.com> <20060302164923.GQ4038@bartok.itc.it>
	<44072C92.6050000@pobox.com> <20060303143138.GE30055@bartok.itc.it>
	<44085E9A.4090204@pobox.com>
Message-ID: <20060303174429.GB32717@bartok.itc.it>

On Fri, Mar 03, 2006 at 10:19:54AM -0500, Frank Warmerdam wrote:
> Markus Neteler wrote:
> >>I use "ogrinfo -so -al -ro <datasourcename>" when I want a "summary only"
> >>report of "all layers" in "readonly" mode.
> >
> >Yes. But it could to so without adding 3 parameters of 3 chars 
> >each :-) Just for user convenience, it's my wish to see the
> >projection metadata stuff immediately (as gdalinfo nicely
> >does). Is there a chance for that?
> 
> Markus,
> 
> Well, obviously it would not be technically difficult to make "-al -so"
> the default, but the summary information can be very expensive to
> report since it generally requires scanning all the features twice - once
> to count and once to collect the extents.  So I am not keen to do this
> by default.  I'm not even keen to report the projection information
> for each layer since if present it is pretty bulky, and in a dataset
> with alot of layers the user would immediately be buried in many pages
> of projection reports.  Likely all the same.
> 
> So, in this case my position is that I won't make the suggested change
> in ogrinfo.  Of course, in the new democratic GDAL/OGR, if you can
> convince the rest of the PSC I could be overridden.

Frank,

accepted! Thanks for the explanation.

Best,
 Markus

From warmerdam at pobox.com  Fri Mar  3 14:56:31 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] locale handling in GDAL
Message-ID: <44089F6F.3050304@pobox.com>

Folks,

Peng Gao has pointed out that GDAL can fall over rather ungracefully if
used in a locale with odd numeric formatting rules, such as many European
locales.

For instance, in the Danish locale printf( "%g\n", 1.234) will produce
"1,234".  This causes no end of problems in all sorts of GDAL code that
depends on sprintf() producing particular formatting for writing to disk
files.  We also assume that atoi(), scanf, etc will work properly on
"normal" values such as 1.234.

In normal use, the GDAL programs are run in the C locale, and we get the
normal expected handling of numbers in text.  However, if an application
calling GDAL calls setlocale() with a non "C" locale, we can run into the
problems.  This has been encountered before in OpenEV, but I just had
OpenEV force the numeric locale to "C" since I didn't understand aspects of
the issue.   However, I can't force this non-solution on applications that
take internationalization more seriously.

I have done some experiments and found I can temporarily force the "C"
locale within GDAL itself.  I implemented this using a small class
declared in cpl_conv.h called CPLLocaleC.  When created, objects of this
class will force LC_NUMERIC to C.  When destroyed they will restore the
original locale setting.   This makes it easy and pretty safe to force
C locale within selected scopes.

I have introduced it's use into GDALOpen, GDALCreate, GDALCreateCopy and
GDALClose.  *Most* parsing and formatting for disk access takes place in
these functions and this gets things working better in many cases.  However,
it is far from comprehensive.   I could try and push this same mechanism
through the whole GDAL API, but I'm not really sure how expensive the
setlocale() call is and it would be a lot of work.

So, for now, I am asking for feedback on how others feel about this issue.

BTW, I have also introduced a --locale commandlnie option in the GDAL
standard command line option process for easier testing of locale issues.
You should be able now to do something like:

gdalinfo --debug off --locale Danish varminghede.jpg
GDAL: AutoSkipDriver(JP2KAK)
Driver: JPEG/JPEG JFIF
Size is 822, 733
Coordinate System is:
PROJCS["UTM Zone 32, Northern Hemisphere",
     GEOGCS["European 1950",
         DATUM["European 1950",
             SPHEROID["International 1909",6378388,297.0000000284045],
             TOWGS84[-87,-98,-121,0,0,0,0]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",9],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["Meter",1]]
Origin = (-0,500000,0,500000)
Pixel Size = (1,00000000,-1,00000000)
Corner Coordinates:
Upper Left  (  -0,5000000,   0,5000000)
Lower Left  (      -0,500,    -732,500)
Upper Right (     821,500,       0,500)
Lower Right (     821,500,    -732,500)
Center      (     410,500,    -366,000)
Band 1 Block=822x1 Type=Byte, ColorInterp=Red
   Metadata:
     LAYER_TYPE=athematic
Band 2 Block=822x1 Type=Byte, ColorInterp=Green
   Metadata:
     LAYER_TYPE=athematic
Band 3 Block=822x1 Type=Byte, ColorInterp=Blue
   Metadata:
     LAYER_TYPE=athematic

Note that the mainline's reporting of coordinates with a comma instead
of the decimal.  But the WKT coordinate system is formatted in a portable
rather than locale specific fashion.

Hmm, I see the reprojection part of gdalinfo didn't work, likely
because the reprojection code was not invoked within the modified
functions and so could not parse the WKT properly.  Interesting
demonstration of how it isn't trivial to catch all important entry points.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From hendrik at gracesolutions.co.za  Fri Mar  3 07:05:01 2006
From: hendrik at gracesolutions.co.za (Vimes)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] GDAL - OCI Oracle driver on windows
Message-ID: <3219864.post@talk.nabble.com>


Hi, my name is Hendrik.

I want tp compile GDAL to include the ORACLE spatial driver (on XP with
ORACLE 10g).

I have modified the nmake.opt file to include the following :

ORACLE_HOME = C:\oracle\product\10.1.0\db_1

!IFDEF ORACLE_HOME
OCI_LIB =	C:\oracle\product\10.1.0\db_1\OCI\lib\MSVC\ociw32.lib \
		C:\oracle\product\10.1.0\db_1\OCI\lib\MSVC\oci.lib
!ENDIF

Biut still I get the error "Unable to open datasource" (followed by a list
of knwon drivers).

Am I missing something to register the ORACLE driver in gdal ?

Please help.

Thanks
Hendrik

--
View this message in context: http://www.nabble.com/GDAL---OCI-Oracle-driver-on-windows-t1217326.html#a3219864
Sent from the GDAL - Dev forum at Nabble.com.


From warmerdam at pobox.com  Fri Mar  3 17:48:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] GDAL - OCI Oracle driver on windows
In-Reply-To: <3219864.post@talk.nabble.com>
References: <3219864.post@talk.nabble.com>
Message-ID: <4408C7A3.9030309@pobox.com>

Vimes wrote:
> Hi, my name is Hendrik.
> 
> I want tp compile GDAL to include the ORACLE spatial driver (on XP with
> ORACLE 10g).
> 
> I have modified the nmake.opt file to include the following :
> 
> ORACLE_HOME = C:\oracle\product\10.1.0\db_1
> 
> !IFDEF ORACLE_HOME
> OCI_LIB =	C:\oracle\product\10.1.0\db_1\OCI\lib\MSVC\ociw32.lib \
> 		C:\oracle\product\10.1.0\db_1\OCI\lib\MSVC\oci.lib
> !ENDIF
> 
> Biut still I get the error "Unable to open datasource" (followed by a list
> of knwon drivers).
> 
> Am I missing something to register the ORACLE driver in gdal ?

Hendrik,

Did you do a clean build after this change?

Does "ogrinfo --formats" list OCI?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From iotc at 3i.co.za  Fri Mar  3 22:10:11 2006
From: iotc at 3i.co.za (Rob Cairns)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] [GDAL_Contours]Different gridcellsizes 
Message-ID: <01C63F39.26E70D40.iotc@3i.co.za>

Hi Frank and Paul

I hope you don't mind me chipping in on this discussion. I am also 
currently using the gdal_contour function via MapWindow and it is a 
fantastic utility. However, from previous correspondence with Paul on the 
MapWindow forum, we noticed that gdal seems to push the contour up and to 
the right of the cell. The attached hypothetical ASCII grid and picture 
will show what I mean. In the picture, the blue line is where I would 
expect the contour to be and the red line is where gdal actually draws the 
contour - on the top and right of the cells with the value of the contour 
elevation. I wondered if this was a bug or whether I'm missing something 
the function "saddles" between elevations.

Regards Rob


 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/x-zip-compressed
Size: 10856 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060304/6ed34eb0/attachment.bin
From ben at vterrain.org  Sat Mar  4 04:40:37 2006
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] locale handling in GDAL
In-Reply-To: <44089F6F.3050304@pobox.com>
Message-ID: <017d01c63f6f$b187e1f0$9b02a8c0@DellWork>

> -----Original Message-----
> From: Frank Warmerdam
> 
> Peng Gao has pointed out that GDAL can fall over rather 
> ungracefully if used in a locale with odd numeric formatting 
> rules, such as many European locales.
> 
> For instance, in the Danish locale printf( "%g\n", 1.234) 
> will produce "1,234"

Indeed; in fact, the issue is not just internal to GDAL, but also in user
code built on it, which e.g. might call atof on a field value returned by
OGR.  So developers should be aware that they need to consider it this
themselves, not just expect a library to take care of it for them.

OGRSpatialReference is especially sensitive.  Nearly every method will fail
badly with Euro locale, as they atof/ftoa heavily.

> [...] I implemented this using a small 
> class declared in cpl_conv.h called CPLLocaleC.  When 
> created, objects of this class will force LC_NUMERIC to C.  
> When destroyed they will restore the
> original locale setting.

Interesting, i did the same thing years ago (VTP's is called LocaleWrap) and
declare it in each scope which calls GDAL/OGR, as needed.

> I have introduced it's use into GDALOpen, GDALCreate, 
> GDALCreateCopy and GDALClose.  *Most* parsing and formatting 
> for disk access takes place in these functions

If you want to get serious about this, OGRSpatialReference would be the next
place to look.  Otherwise, you could just expose and document CPLLocaleC so
that developers can take on the responsibility themselves.  That way they
can minimize the overhead.

> BTW, I have also introduced a --locale commandlnie option in 
> the GDAL standard command line option process

Interesting, i did the same thing a while back with a -locale=xx command
line option :)

-Ben


From cfis at interserv.com  Sat Mar  4 05:00:22 2006
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Re: [Geo-perl] latest swig/perl docs
In-Reply-To: <440770D0.90601@pobox.com>
References: <4406B271.5010206@tkk.fi> <440770D0.90601@pobox.com>
Message-ID: <44096536.7060807@interserv.com>

Sure.  Might take me a couple weeks to get to....working on a deadline 
at the moment.  Feel free to bug me if you need it sooner.


Charlie


Frank Warmerdam wrote:
> Ari Jolma wrote:
>> Dear Perl users of GDAL and OGR,
>>
>> I've updated the docs at http://map.hut.fi/gdal-perl/ and will keep the
>> latest versions of these documents here. Eventually they will get to the
>> CVS, GDAL distribution, and perhaps to the main GDAL website.
>>
>> Comments and contributions (also material beyond these essential pieces)
>> are welcome. I'd also be happy to set up some live examples via mod_perl.
> 
> Folks,
> 
> I have restructured the main GDAL page a bit to add a language binding
> section, and put a link there to the perl page.
> 
> Charles, would you be interested in producing an introduction to
> the Ruby bindings?
> 
> It would also be good to get status information on Java in a page, and
> perhaps a better Python intro than the general API tutorial.
> 
> Best regards,



From cfis at interserv.com  Sat Mar  4 05:04:57 2006
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Re: ruby examples?
In-Reply-To: <43F515FD.2080609@nature.berkeley.edu>
References: <20060216212058.98862.qmail@web30708.mail.mud.yahoo.com>
	<43F515FD.2080609@nature.berkeley.edu>
Message-ID: <44096649.8030504@interserv.com>

Hi guys,

Let me know what issues you run into on the GDAL side since its not well 
tested (actually, its not tested at all!).  If you have the time (or 
anyone else out there), extending the test suite for GDAL would be 
great.  All I've been doing is porting the Python Unit tests to Ruby - 
its pretty easy, just a bit time consuming.  Anyway, I'd be happy to get 
any updated tests checked in and any issues that they turn up fixed.

On the other hand, the OGR and OSR bindings should work well and are 
well tested.

Thanks,

Charlie

Ken-ichi wrote:
> Ah, awesome.  I didn't know about gdalautotest, but, like you said, 
> plenty of goodies.  For the record and for future Ruby nubies like 
> myself, opening a GDAL dataset looks something like this:
> 
> require 'gdal/gdal'
> dataset = Gdal::Gdal.open('filename.ext')
> 
> I haven't done much else with it yet, but I'll probably be back to 
> report any major problems I have.
> 
> Thanks again!
> 
> Ken-ichi Ueda
> Kelly Research and Outreach Lab (http://kellylab.berkeley.edu)
> University of California, Berkeley
> Environmental Science, Policy, and Management
> Berkeley, CA 94720
> tel: 510.642.8322
> fax: 510.642.1477
> e-mail: kueda@nature.berkeley.edu
> 
> 
> 
> s duclos wrote:
>> Hi Ken-ichi,
>>
>> This answer from  Charlie Savage
>> got me started:
>>
>> http://lists.maptools.org/pipermail/gdal-dev/2005-December/007362.html
>>
>>
>>
>> Sylvain.
>>
>> --- Ken-ichi <kueda@nature.berkeley.edu> wrote:
>>
>>  
>>> Hi all.
>>> I'm trying to figure out how to use the Ruby
>>> bindings in GDAL, but I can't seem to find any examples out there for 
>>> even
>>> the most basic things, like setting all the constants.  The GDAL
>>> API Tutorial on gdal.org seems to have great docs for C, C++, and
>>> Python, but nothing for Ruby.  Can anyone provide some basic examples of
>>> how to open a file, etc?  I've gotten about as far as
>>>
>>> require 'gdal/gdal'
>>> require 'gdal/gdalconst'
>>>
>>> but that's about it.
>>>
>>> -- 
>>> Ken-ichi Ueda
>>> Kelly Research and Outreach Lab
>>> (http://kellylab.berkeley.edu)
>>> University of California, Berkeley
>>> Environmental Science, Policy, and Management
>>> Berkeley, CA 94720
>>> tel: 510.642.8322
>>> fax: 510.642.1477
>>> e-mail: kueda@nature.berkeley.edu
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>
>>>     
>>
>>
>> __________________________________________________
>> Do You Yahoo!?
>> Tired of spam?  Yahoo! Mail has the best spam protection around 
>> http://mail.yahoo.com   



From iotc at 3i.co.za  Sat Mar  4 09:07:42 2006
From: iotc at 3i.co.za (Rob Cairns)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] [GDAL_Contours]Different gridcellsizes
Message-ID: <01C63F95.B65664B0.iotc@3i.co.za>

Hi Paul and Frank

Please scrap my previous email. The problem I described (where the contour 
appears to be shifted) - is in the MapWindow interface to Gdal, not in the 
GdalContour function at all. My apologies.

Best Regards
Rob

From rob at dataflowdesign.com  Sun Mar  5 16:17:19 2006
From: rob at dataflowdesign.com (rob@dataflowdesign.com)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Set attribute fields with constants from command line in
	ogr2ogr
Message-ID: <17419.21855.809063.346372@maggie.waterpathcanoe.com>

I am using ogr to load SDTS files into Postgresql with postgis. Is
there a way that I can set a field to a constant value in all rows
inserted during a single ogr2ogr execution?

For example, my output RIVERS table contains a field called
UNIQUE_LOAD_ID (as well as geometry and other attributes).
I want to be able to set UNIQUE_LOAD_ID = some constant defined on
the command line for all river features loaded from the SDTS
file. This could also be a date/timestamp, username, file name, etc.

Regards,
Rob

From warmerdam at pobox.com  Sun Mar  5 19:51:51 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Set attribute fields with constants from command line
	in	ogr2ogr
In-Reply-To: <17419.21855.809063.346372@maggie.waterpathcanoe.com>
References: <17419.21855.809063.346372@maggie.waterpathcanoe.com>
Message-ID: <440B87A7.4020906@pobox.com>

rob@dataflowdesign.com wrote:
> I am using ogr to load SDTS files into Postgresql with postgis. Is
> there a way that I can set a field to a constant value in all rows
> inserted during a single ogr2ogr execution?
> 
> For example, my output RIVERS table contains a field called
> UNIQUE_LOAD_ID (as well as geometry and other attributes).
> I want to be able to set UNIQUE_LOAD_ID = some constant defined on
> the command line for all river features loaded from the SDTS
> file. This could also be a date/timestamp, username, file name, etc.

Rob,

I cannot think of any way to accomplish this with ogr2ogr except for
using a temporary table, and some SQL to copy it into the main table
with the extra value.

But you could do it directly with a special program, or python/perl/etc
script that uses OGR.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From gallus.riegger at gmx.de  Mon Mar  6 05:11:05 2006
From: gallus.riegger at gmx.de (gallus)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] gdal-grass-1.3.1
Message-ID: <3259493.post@talk.nabble.com>


Hi,

I have installed grass6.0.1 and gdal 1.2.6.

then I tried to compile gdal-grass-1.3.1, but failed:

make
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include
-I/usr/lib/grass/include   -c -o grass57dataset.o grass57dataset.cpp
g++ -shared  grass57dataset.o -L/usr/lib/grass/lib -lgrass_I -lgrass_vask
-lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -lgrass_vect
-L/usr/lib -lgdal  -o gdal_GRASS.so
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include
-I/usr/lib/grass/include   -c -o ogrgrassdriver.o ogrgrassdriver.cpp
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include
-I/usr/lib/grass/include   -c -o ogrgrassdatasource.o ogrgrassdatasource.cpp
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include
-I/usr/lib/grass/include   -c -o ogrgrasslayer.o ogrgrasslayer.cpp
ogrgrasslayer.cpp: In destructor ?virtual OGRGRASSLayer::~OGRGRASSLayer()?:
ogrgrasslayer.cpp:240: Error: ?class OGRFeatureDefn? have no element called
?Release?
ogrgrasslayer.cpp:242: Error: ?class OGRSpatialReference? hhave no element
called ?Release?
make: *** [ogrgrasslayer.o] Error 1


With ./configure I had now problems:
/configure --with-gdal=/usr/bin/gdal-config --with-grass=/usr/lib/grass
checking for gcc... gcc

checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for g++ -shared ... yes
user supplied gdal-config (/usr/bin/gdal-config)
using /usr/lib/gdalplugins as GDAL shared library autoload directory
checking for G_asprintf in -lgrass_gis... yes
configure: creating ./config.status
config.status: creating Makefile


Thanks,

Uwe
--
View this message in context: http://www.nabble.com/gdal-grass-1.3.1-t1232397.html#a3259493
Sent from the GDAL - Dev forum at Nabble.com.



From warmerdam at pobox.com  Mon Mar  6 08:28:54 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] gdal-grass-1.3.1
In-Reply-To: <3259493.post@talk.nabble.com>
References: <3259493.post@talk.nabble.com>
Message-ID: <440C3916.9040700@pobox.com>

gallus wrote:
> Hi,
> 
> I have installed grass6.0.1 and gdal 1.2.6.
> 
> then I tried to compile gdal-grass-1.3.1, but failed:
> 
> make
> g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include
> -I/usr/lib/grass/include   -c -o grass57dataset.o grass57dataset.cpp
> g++ -shared  grass57dataset.o -L/usr/lib/grass/lib -lgrass_I -lgrass_vask
> -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -lgrass_vect
> -L/usr/lib -lgdal  -o gdal_GRASS.so
> g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include
> -I/usr/lib/grass/include   -c -o ogrgrassdriver.o ogrgrassdriver.cpp
> g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include
> -I/usr/lib/grass/include   -c -o ogrgrassdatasource.o ogrgrassdatasource.cpp
> g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include
> -I/usr/lib/grass/include   -c -o ogrgrasslayer.o ogrgrasslayer.cpp
> ogrgrasslayer.cpp: In destructor ?virtual OGRGRASSLayer::~OGRGRASSLayer()?:
> ogrgrasslayer.cpp:240: Error: ?class OGRFeatureDefn? have no element called
> ?Release?
> ogrgrasslayer.cpp:242: Error: ?class OGRSpatialReference? hhave no element
> called ?Release?
> make: *** [ogrgrasslayer.o] Error 1
> 
> 
> With ./configure I had now problems:
> /configure --with-gdal=/usr/bin/gdal-config --with-grass=/usr/lib/grass
> checking for gcc... gcc

Gallus,

The gdal-grass 1.3.1 driver is for GDAL 1.3.1 though it likely would also
work fine with GDAL 1.3.0 or GDAL-CVS.  However, it should not be expected
to work with GDAL 1.2.6.

I would add there is a gdal-grass-1.3.1.2 release out now that fixes a
few build quirks.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dburken at comcast.net  Mon Mar  6 10:36:40 2006
From: dburken at comcast.net (David Burken)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] gdal configure problem
In-Reply-To: <440C3916.9040700@pobox.com>
References: <3259493.post@talk.nabble.com> <440C3916.9040700@pobox.com>
Message-ID: <440C5708.4090605@comcast.net>

Hi Frank,

Just fyi, these are two things that I have to do every time I get a 
configure update:

First I'm on:
mercury$ cat /etc/redhat-release
Fedora Core release 4 (Stentz)
mercury$ g++ -v
gcc version 4.0.2

NOTE my libtiff and geotiff are from cvs and installed in my 
"/usr/local/ossim" sandbox (--prefix=/usr/local/ossim):

./configure --without-libtool --with-kakadu=/work/drb/kakadu/v5_1-00315N 
--with-geos=no --with-odbc=no --with-libtiff=/usr/local/ossim 
--with-geotiff=/usr/local/ossim --prefix=/usr/local/ossim

Gives:
checking for XTIFFClientOpen in -lgeotiff... no
configure: error: We require at least GeoTIFF 1.2.1. Consider using the 
one supplied with GDAL

My geotiff installed in /usr/local/ossim is from cvs...

Second:
After commenting out the check in configure.in and doing autoconf the 
configure works...

Then:
make[2]: Entering directory `/mnthdb1/work/drb/gdal/frmts/gtiff'
g++ -Wall -fPIC -O2   -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts  -DOGR_ENABLED -c -o ../o/geotiff.o geotiff.cpp
geotiff.cpp:136:21: error: xtiffio.h: No such file or directory
geotiff.cpp:137:21: error: geotiff.h: No such file or directory


In GDALmake.opt:
CPPFLAGS has /usr/local/ossim/include

However it is not used.  I have to add to:
GDAL_INCLUDE...

Take care,
Dave



From takubo at saruga-tondara.net  Mon Mar  6 12:00:32 2006
From: takubo at saruga-tondara.net (Akio Takubo)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] Re: ruby examples?
In-Reply-To: <44096649.8030504@interserv.com>
References: <20060216212058.98862.qmail@web30708.mail.mud.yahoo.com>
	<43F515FD.2080609@nature.berkeley.edu>
	<44096649.8030504@interserv.com>
Message-ID: <20060307020032.a46bda74.takubo@saruga-tondara.net>

Dear list,

 I'm new to Gdal ruby binding and playing with it. I tried to write 
reading part of Gdal tutorial's example in ruby(please see attached file).
 As writing ruby's tutorial, I found two questions(problems?).

 1. No way for releasing dataset?
 When using C++ or C, we can release dataset easily by calling destructor 
or GdalClose(). In ruby binding, is there a way to release dataset 
expect for exiting script?

 2. variable aruguments
 Some method has variable arguments example for Gdal::Gdal::Band#read_raster, 
I think. But I can't pass optional arguments at all. I called read_raster 
like python's example. 
 band.read_raster(0, 0, band.xsize(), 1, band.xsize(), 1)
But I got following error.
 in `read_raster': in method 'ReadRaster', argument 8 of type 'int *' (TypeError)
My syntax is wrong? or gdal/ruby's issue?

 Now I'm using cvs snapshot(2006-02-18). If newer version has some improvement 
or modification, I'll try it.

Thanks,

On Sat, 04 Mar 2006 03:04:57 -0700
Charlie Savage <cfis@interserv.com> wrote:

> Hi guys,
> 
> Let me know what issues you run into on the GDAL side since its not well 
> tested (actually, its not tested at all!).  If you have the time (or 
> anyone else out there), extending the test suite for GDAL would be 
> great.  All I've been doing is porting the Python Unit tests to Ruby - 
> its pretty easy, just a bit time consuming.  Anyway, I'd be happy to get 
> any updated tests checked in and any issues that they turn up fixed.
> 
> On the other hand, the OGR and OSR bindings should work well and are 
> well tested.
> 
> Thanks,
> 
> Charlie
> 
> Ken-ichi wrote:
> > Ah, awesome.  I didn't know about gdalautotest, but, like you said, 
> > plenty of goodies.  For the record and for future Ruby nubies like 
> > myself, opening a GDAL dataset looks something like this:
> > 
> > require 'gdal/gdal'
> > dataset = Gdal::Gdal.open('filename.ext')
> > 
> > I haven't done much else with it yet, but I'll probably be back to 
> > report any major problems I have.
> > 
> > Thanks again!
> > 
> > Ken-ichi Ueda
> > Kelly Research and Outreach Lab (http://kellylab.berkeley.edu)
> > University of California, Berkeley
> > Environmental Science, Policy, and Management
> > Berkeley, CA 94720
> > tel: 510.642.8322
> > fax: 510.642.1477
> > e-mail: kueda@nature.berkeley.edu
> > 
> > 
> > 
> > s duclos wrote:
> >> Hi Ken-ichi,
> >>
> >> This answer from  Charlie Savage
> >> got me started:
> >>
> >> http://lists.maptools.org/pipermail/gdal-dev/2005-December/007362.html
> >>
> >>
> >>
> >> Sylvain.
> >>
> >> --- Ken-ichi <kueda@nature.berkeley.edu> wrote:
> >>
> >>  
> >>> Hi all.
> >>> I'm trying to figure out how to use the Ruby
> >>> bindings in GDAL, but I can't seem to find any examples out there for 
> >>> even
> >>> the most basic things, like setting all the constants.  The GDAL
> >>> API Tutorial on gdal.org seems to have great docs for C, C++, and
> >>> Python, but nothing for Ruby.  Can anyone provide some basic examples of
> >>> how to open a file, etc?  I've gotten about as far as
> >>>
> >>> require 'gdal/gdal'
> >>> require 'gdal/gdalconst'
> >>>
> >>> but that's about it.
> >>>
> >>> -- 
> >>> Ken-ichi Ueda
> >>> Kelly Research and Outreach Lab
> >>> (http://kellylab.berkeley.edu)
> >>> University of California, Berkeley
> >>> Environmental Science, Policy, and Management
> >>> Berkeley, CA 94720
> >>> tel: 510.642.8322
> >>> fax: 510.642.1477
> >>> e-mail: kueda@nature.berkeley.edu
> >>>
> >>> _______________________________________________
> >>> Gdal-dev mailing list
> >>> Gdal-dev@lists.maptools.org
> >>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> >>>
> >>>     
> >>
> >>
> >> __________________________________________________
> >> Do You Yahoo!?
> >> Tired of spam?  Yahoo! Mail has the best spam protection around 
> >> http://mail.yahoo.com   
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

-- 
    Akio Takubo    from Tokyo, Japan
	takubo@saruga-tondara.net
===================================================


-------------- next part --------------
A non-text attachment was scrubbed...
Name: tutorial.rb
Type: application/octet-stream
Size: 1356 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060307/d1f7f77e/tutorial.obj
From kmckelvey at lizardtech.com  Mon Mar  6 13:12:49 2006
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] locale handling in GDAL
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD128BB16E@sea-srv-ms3.lizardtech.com>

For our SDK and apps, we too are using a scoped locale-changing object
similar to what Frank describes.  In every method or function where we
call a GDAL function or create a GDAL object we are overriding the
locale.

This has not been our preferred solution since this policy would have
had to be integrated into our coding practices if future wkt-parsing
problems were to be avoided.  So that is one vote in favor of GDAL
setting the locale internally.

On the other hand, we have gotten bitten with similar workarounds in the
past.  When using setlocale() in tight loops performance would go
through the floor; apparently it is not a cheap operation.  So if GDAL
sets locale internally then I have no way to mitigate the performance
issues that will come up from calling GDAL functions in tight loops.  So
that is one vote against GDAL setting the locale internally.

Ideally GDAL would *not* fiddle with the locale.  Instead it would only
use locale-sensitive functions when dealing with strings that are in the
locale (mainly user input and output), and "something else" when dealing
with strings that are well-defined and not locale-specific (viz. WKT).
But what is that "something else"?  An atof() replacement would be
doable (if tedious), but printf() would be a major pain to replace...

-Kirk


> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ben Discoe
> Sent: Saturday, March 04, 2006 1:41 AM
> To: 'gdal-dev'
> Subject: RE: [Gdal-dev] locale handling in GDAL
> 
> > -----Original Message-----
> > From: Frank Warmerdam
> > 
> > Peng Gao has pointed out that GDAL can fall over rather 
> ungracefully 
> > if used in a locale with odd numeric formatting rules, such as many 
> > European locales.
> > 
> > For instance, in the Danish locale printf( "%g\n", 1.234) 
> will produce 
> > "1,234"
> 
> Indeed; in fact, the issue is not just internal to GDAL, but 
> also in user code built on it, which e.g. might call atof on 
> a field value returned by OGR.  So developers should be aware 
> that they need to consider it this themselves, not just 
> expect a library to take care of it for them.
> 
> OGRSpatialReference is especially sensitive.  Nearly every 
> method will fail badly with Euro locale, as they atof/ftoa heavily.
> 
> > [...] I implemented this using a small class declared in cpl_conv.h 
> > called CPLLocaleC.  When created, objects of this class will force 
> > LC_NUMERIC to C.
> > When destroyed they will restore the
> > original locale setting.
> 
> Interesting, i did the same thing years ago (VTP's is called 
> LocaleWrap) and declare it in each scope which calls 
> GDAL/OGR, as needed.
> 
> > I have introduced it's use into GDALOpen, GDALCreate, 
> GDALCreateCopy 
> > and GDALClose.  *Most* parsing and formatting for disk access takes 
> > place in these functions
> 
> If you want to get serious about this, OGRSpatialReference 
> would be the next place to look.  Otherwise, you could just 
> expose and document CPLLocaleC so that developers can take on 
> the responsibility themselves.  That way they can minimize 
> the overhead.
> 
> > BTW, I have also introduced a --locale commandlnie option 
> in the GDAL 
> > standard command line option process
> 
> Interesting, i did the same thing a while back with a 
> -locale=xx command line option :)
> 
> -Ben
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From warmerdam at pobox.com  Mon Mar  6 13:56:46 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] locale handling in GDAL
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD128BB16E@sea-srv-ms3.lizardtech.com>
References: <DBEC881B4E22D1449F5FAC530E1ADD128BB16E@sea-srv-ms3.lizardtech.com>
Message-ID: <440C85EE.4090805@pobox.com>

Kirk McKelvey wrote:
> This has not been our preferred solution since this policy would have
> had to be integrated into our coding practices if future wkt-parsing
> problems were to be avoided.  So that is one vote in favor of GDAL
> setting the locale internally.
 >
> On the other hand, we have gotten bitten with similar workarounds in the
> past.  When using setlocale() in tight loops performance would go
> through the floor; apparently it is not a cheap operation.  So if GDAL
> sets locale internally then I have no way to mitigate the performance
> issues that will come up from calling GDAL functions in tight loops.  So
> that is one vote against GDAL setting the locale internally.

Kirk,

Right.  While I hadn't done any tests, I was also concerned that performance
would be substantially affected.  Your indication that setlocale() is
a fairly expensive operations is very useful to know.

I did a quick test on Linux and a program that calls setlocale() with
a value that doesn't result in a change 1000000 times takes roughly
1/20th of a second.  Doing the same in a way that results in a change
takes most of a second.  So changing locale is far from free, though
in the common case that things are already in the C locale it would
apparently not take very long.

I can't test on windows just now as my daughter is watching movies. :-)

> Ideally GDAL would *not* fiddle with the locale.  Instead it would only
> use locale-sensitive functions when dealing with strings that are in the
> locale (mainly user input and output), and "something else" when dealing
> with strings that are well-defined and not locale-specific (viz. WKT).
> But what is that "something else"?  An atof() replacement would be
> doable (if tedious), but printf() would be a major pain to replace...

Indeed, I am not aware of standard non-locale sensitive conversion
functions and alot of code is predicated on sprintf and related.

I have tried implementing something like sprintf() before and it is
hard to do in an efficient (much less correct) manner.  How does other
software handle this?  It must come up all the time!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From bpederse at gmail.com  Mon Mar  6 14:08:12 2006
From: bpederse at gmail.com (Brent Pedersen)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] python - get projection from a file
Message-ID: <e183a99d0603061108t71ee84ccr50404c1cb5cc3ec9@mail.gmail.com>

hi, i'd like to be able to have a user upload a file (.shapefile for now). i
want to then use python/gdal to get the projection information associated
with that file. where do i start?

i have ogr.Open(filename) and the simple stuff like that, but how do i get
the projection? i am having trouble seeing how ogr fits in with stuff like
osr.SpatialReference.ImportFromESRI ...

thanks for any pointers,
-brent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060306/244f365a/attachment.html
From rayg at daylongraphics.com  Mon Mar  6 14:24:04 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] locale handling in GDAL
In-Reply-To: <440C85EE.4090805@pobox.com>
References: <DBEC881B4E22D1449F5FAC530E1ADD128BB16E@sea-srv-ms3.lizardtech.com>
	<440C85EE.4090805@pobox.com>
Message-ID: <440C8C54.9080206@daylongraphics.com>

> I have tried implementing something like sprintf() before and it is
> hard to do in an efficient (much less correct) manner.  How does other
> software handle this?  It must come up all the time!

The job might not be as hard as canonical sprintf() if GDAL is only 
using a subset of the possible features (e.g., printing only strings, 
chars, ints and floats).

Another way is to use printf/sprintf only for strings, and make your own 
printing routines that return strings. This complicates the call syntax 
but can be implemented easier. e.g.:

char* printnum(int n, char* psz)
{
    // go through digits of n and place into psz.
}

void foo(int n)
{
    char sz[30];
    sprintf(pszMsg, "Answer is: %s", printnum(n, sz));
}


Ray

From ari.jolma at tkk.fi  Mon Mar  6 15:03:20 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] python - get projection from a file
In-Reply-To: <e183a99d0603061108t71ee84ccr50404c1cb5cc3ec9@mail.gmail.com>
References: <e183a99d0603061108t71ee84ccr50404c1cb5cc3ec9@mail.gmail.com>
Message-ID: <440C9588.3090200@tkk.fi>

Brent Pedersen kirjoitti:
> hi, i'd like to be able to have a user upload a file (.shapefile for 
> now). i want to then use python/gdal to get the projection information 
> associated with that file. where do i start?
>
> i have ogr.Open(filename) and the simple stuff like that, but how do i 
> get the projection? i am having trouble seeing how ogr fits in with 
> stuff like osr.SpatialReference.ImportFromESRI ...

This is Perl but the interface should be rather similar in Python:

$o = ogr::Open("file.shp");
$l = $o->GetLayerByIndex(0);
$s = $l->GetSpatialRef;
$w = $s->ExportToPrettyWkt;
print "$w\n";

I hope this helps.

Ari

>
> thanks for any pointers,
> -brent
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From perrygeo at gmail.com  Mon Mar  6 15:11:21 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] python - get projection from a file
In-Reply-To: <e183a99d0603061108t71ee84ccr50404c1cb5cc3ec9@mail.gmail.com>
References: <e183a99d0603061108t71ee84ccr50404c1cb5cc3ec9@mail.gmail.com>
Message-ID: <5383fa5e0603061211x1b9edca5m5ff82ceb08080c2b@mail.gmail.com>

Brent,

 Once you open the dataset, you have to get the layer then the spatial
reference for the layer. From there you can export the spatial
reference to a variety of formats as needed (the "exportTo*" methods
at http://gdal.maptools.org/ogr/classOGRSpatialReference.html)

>>> import ogr
>>> ds = ogr.Open('ca_counties.shp')
>>> layer = ds.GetLayer()
>>> sr = layer.GetSpatialRef()
>>> sr
<osr.SpatialReference instance at 0xb7b5510c>
>>> sr.ExportToProj4()
'+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 +b=6370997
+units=m +no_defs '
>>> sr.ExportToWkt()
'PROJCS["US National Atlas Equal Area",GEOGCS["Unspecified datum based
upon the GRS 1980 Authalic
Sphere",DATUM["Not_specified_based_on_GRS_1980_Authalic_Sphere",SPHEROID["GRS_1980_Authalic_Sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["latitude_of_center",45],PARAMETER["longitude_of_center",-100],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]'

- matt

On 3/6/06, Brent Pedersen <bpederse@gmail.com> wrote:
> hi, i'd like to be able to have a user upload a file (.shapefile for now). i
> want to then use python/gdal to get the projection information associated
> with that file. where do i start?
>
> i have ogr.Open(filename) and the simple stuff like that, but how do i get
> the projection? i am having trouble seeing how ogr fits in with stuff like
> osr.SpatialReference.ImportFromESRI ...
>
> thanks for any pointers,
> -brent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net


From Peter.Nagy at vexcel.com  Mon Mar  6 16:09:32 2006
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] locale handling in GDAL
In-Reply-To: <440C8C54.9080206@daylongraphics.com>
References: <DBEC881B4E22D1449F5FAC530E1ADD128BB16E@sea-srv-ms3.lizardtech.com>
	<440C85EE.4090805@pobox.com> <440C8C54.9080206@daylongraphics.com>
Message-ID: <Pine.CYG.4.58.0603061356040.4088@Thwack>


Eew, yuck, isn't there some way to avoid locale hacks like a sprintf
workaround?  That kind of thing is really hard for someone new to the code
to grok, will probably be a source of bugs as people forget to use the
workaround, is ugly, etc.

There was some talk a while back about more multithreading improvements to
gdal.  How about killing both birds, where the calls the program makes
won't be sensitive to locale, and the threads that do the work will use
c locale?  Don't know if threads can have their own locale or if there'd
have to be interprocess stuff going on, but a multithreaded solution that
can distribute work to processes on other machines might be the best
anyway.  Just a thought.  Cheers,

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


On Mon, 6 Mar 2006, Ray Gardener wrote:

> > I have tried implementing something like sprintf() before and it is
> > hard to do in an efficient (much less correct) manner.  How does other
> > software handle this?  It must come up all the time!
>
> The job might not be as hard as canonical sprintf() if GDAL is only
> using a subset of the possible features (e.g., printing only strings,
> chars, ints and floats).
>
> Another way is to use printf/sprintf only for strings, and make your own
> printing routines that return strings. This complicates the call syntax
> but can be implemented easier. e.g.:
>
> char* printnum(int n, char* psz)
> {
>     // go through digits of n and place into psz.
> }
>
> void foo(int n)
> {
>     char sz[30];
>     sprintf(pszMsg, "Answer is: %s", printnum(n, sz));
> }
>
>
> Ray
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From bpederse at gmail.com  Mon Mar  6 17:24:50 2006
From: bpederse at gmail.com (Brent Pedersen)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] python - get projection from a file
In-Reply-To: <5383fa5e0603061211x1b9edca5m5ff82ceb08080c2b@mail.gmail.com>
References: <e183a99d0603061108t71ee84ccr50404c1cb5cc3ec9@mail.gmail.com>
	<5383fa5e0603061211x1b9edca5m5ff82ceb08080c2b@mail.gmail.com>
Message-ID: <e183a99d0603061424g2b801f5bjde6b3218fca448b5@mail.gmail.com>

hi, thanks to all who replied, i'm familiar with the command-line tools from
gdal and ogr, just getting used to this API.  plus, i'm just switching from
perl to python to take advantage of the greater number of GIS libs.
for future reference (and in case anyone has pointers on how to improve this
code) here's a script that will read a point file translate it into long/lat
projection and print out the new points and one Attirbute column ('ATTRIB'
in this case).

#!/usr/bin/python -w

import gdal
import osr
import ogr

fd = ogr.Open('treetrail.shp');
lyr = fd.GetLayer(0);
osrs = lyr.GetSpatialRef();

latlong = osr.SpatialReference();
latlong.ImportFromProj4('+proj=longlat +ellps=GRS80 +datum=NAD83 +no_defs');
#print latlong.ExportToProj4();

transform = osr.CoordinateTransformation(osrs,latlong)

nlayers = lyr.GetFeatureCount();
i = 0

field_of_interest = 'ATTRIB';

for i in range(0,nlayers - 1):
    feat = lyr.GetNextFeature()

    info = feat.GetField(field_of_interest)
    fgeom = feat.GetGeometryRef()

    x = fgeom.GetX()
    y = fgeom.GetY()

    # must be a way to use TransformPoints() ...
    [tx,ty,z] = transform.TransformPoint(x,y);
    print "%f,%f,%s" % (tx,ty,info)




On 3/6/06, Matthew Perry <perrygeo@gmail.com> wrote:
>
> Brent,
>
> Once you open the dataset, you have to get the layer then the spatial
> reference for the layer. From there you can export the spatial
> reference to a variety of formats as needed (the "exportTo*" methods
> at http://gdal.maptools.org/ogr/classOGRSpatialReference.html)
>
> >>> import ogr
> >>> ds = ogr.Open('ca_counties.shp')
> >>> layer = ds.GetLayer()
> >>> sr = layer.GetSpatialRef()
> >>> sr
> <osr.SpatialReference instance at 0xb7b5510c>
> >>> sr.ExportToProj4()
> '+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 +b=6370997
> +units=m +no_defs '
> >>> sr.ExportToWkt()
> 'PROJCS["US National Atlas Equal Area",GEOGCS["Unspecified datum based
> upon the GRS 1980 Authalic
>
> Sphere",DATUM["Not_specified_based_on_GRS_1980_Authalic_Sphere",SPHEROID["GRS_1980_Authalic_Sphere",6370997,0]],PRIMEM["Greenwich",0],UNIT["Degree",
> 0.017453292519943295
> ]],PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["latitude_of_center",45],PARAMETER["longitude_of_center",-100],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["Meter",1]]'
>
> - matt
>
> On 3/6/06, Brent Pedersen <bpederse@gmail.com> wrote:
> > hi, i'd like to be able to have a user upload a file (.shapefile for
> now). i
> > want to then use python/gdal to get the projection information
> associated
> > with that file. where do i start?
> >
> > i have ogr.Open(filename) and the simple stuff like that, but how do i
> get
> > the projection? i am having trouble seeing how ogr fits in with stuff
> like
> > osr.SpatialReference.ImportFromESRI ...
> >
> > thanks for any pointers,
> > -brent
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> >
>
>
> --
> Matt Perry
> perrygeo@gmail.com
> http://www.perrygeo.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060306/8386d5b7/attachment.html
From warmerdam at pobox.com  Mon Mar  6 17:32:59 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] locale handling in GDAL
In-Reply-To: <Pine.CYG.4.58.0603061356040.4088@Thwack>
References: <DBEC881B4E22D1449F5FAC530E1ADD128BB16E@sea-srv-ms3.lizardtech.com>	<440C85EE.4090805@pobox.com>
	<440C8C54.9080206@daylongraphics.com>
	<Pine.CYG.4.58.0603061356040.4088@Thwack>
Message-ID: <440CB89B.30602@pobox.com>

Pete Nagy wrote:
> Eew, yuck, isn't there some way to avoid locale hacks like a sprintf
> workaround?  That kind of thing is really hard for someone new to the code
> to grok, will probably be a source of bugs as people forget to use the
> workaround, is ugly, etc.
> 
> There was some talk a while back about more multithreading improvements to
> gdal.  How about killing both birds, where the calls the program makes
> won't be sensitive to locale, and the threads that do the work will use
> c locale?  Don't know if threads can have their own locale or if there'd
> have to be interprocess stuff going on, but a multithreaded solution that
> can distribute work to processes on other machines might be the best
> anyway.  Just a thought.  Cheers,

Pete,

Well, I agree that using a custom sprintf() and atof() is going to make it
hard to use external sublibraries (ie libgeotiff, PROJ.4, etc), and will be
hard to enforce on casual contributors.

However, having all calls into GDAL turn them over to another thread to
maintain a distinct environment seems like ... overkill.  I for one, just
hate trying to debug multithreaded libraries (like the ECW library).  Such
an approach would generally complicate things.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From gallus.riegger at gmx.de  Mon Mar  6 05:00:36 2006
From: gallus.riegger at gmx.de (gallus.riegger@gmx.de)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] gdal-grass-1.3.1 issue
Message-ID: <19050970.221141639236290.JavaMail.nabble@talk.nabble.com>

Hi,

I tried to compile gdal-grass-1.3., but failed.

I have installed:
-grass 6.0.1
-gdal  1.2.6

 make
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include -I/usr/lib/grass/include   -c -o grass57dataset.o grass57dataset.cpp
g++ -shared  grass57dataset.o -L/usr/lib/grass/lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -lgrass_vect -L/usr/lib -lgdal  -o gdal_GRASS.so
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include -I/usr/lib/grass/include   -c -o ogrgrassdriver.o ogrgrassdriver.cpp
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include -I/usr/lib/grass/include   -c -o ogrgrassdatasource.o ogrgrassdatasource.cpp
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/lib/grass\" -I/usr/include -I/usr/lib/grass/include   -c -o ogrgrasslayer.o ogrgrasslayer.cpp
ogrgrasslayer.cpp: In destructor ?virtual OGRGRASSLayer::~OGRGRASSLayer()?:
ogrgrasslayer.cpp:240: Error: ?class OGRFeatureDefn? have no element called ?Release?
ogrgrasslayer.cpp:242: Error: ?class OGRSpatialReference? hhave no element called ?Release?
make: *** [ogrgrasslayer.o] Error 1


I have ow problems with the ./configure:
./configure --with-gdal=/usr/bin/gdal-config --with-grass=/usr/lib/grass

checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for g++ -shared ... yes
user supplied gdal-config (/usr/bin/gdal-config)
using /usr/lib/gdalplugins as GDAL shared library autoload directory
checking for G_asprintf in -lgrass_gis... yes
configure: creating ./config.status
config.status: creating Makefile


Thanks,
Uwe


From jubileia at gmx.de  Mon Mar  6 08:25:25 2006
From: jubileia at gmx.de (Franziska Beuchelt)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] RIK driver
Message-ID: <440C3845.9000401@gmx.de>

Huhu Daniel,

ist schwer mit Dir Kontakt aufzunehmen...
mal gucken ob du auf irgendeine der mails antwortest :p

Ich hoffe, du kennst mich noch?!

Gr??
Franzi aus Wuppertal :p

From rayg at daylongraphics.com  Mon Mar  6 21:00:33 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] locale handling in GDAL
In-Reply-To: <Pine.CYG.4.58.0603061356040.4088@Thwack>
References: <DBEC881B4E22D1449F5FAC530E1ADD128BB16E@sea-srv-ms3.lizardtech.com>
	<440C85EE.4090805@pobox.com> <440C8C54.9080206@daylongraphics.com>
	<Pine.CYG.4.58.0603061356040.4088@Thwack>
Message-ID: <440CE941.4040903@daylongraphics.com>

Well, I'm happy to write an sprintf() equivalent. I did one a few years 
ago and it didn't take long at all.

Ray


Pete Nagy wrote:
> Eew, yuck, isn't there some way to avoid locale hacks like a sprintf
> workaround?  That kind of thing is really hard for someone new to the code
> to grok, will probably be a source of bugs as people forget to use the
> workaround, is ugly, etc.
> 
> There was some talk a while back about more multithreading improvements to
> gdal.  How about killing both birds, where the calls the program makes
> won't be sensitive to locale, and the threads that do the work will use
> c locale?  Don't know if threads can have their own locale or if there'd
> have to be interprocess stuff going on, but a multithreaded solution that
> can distribute work to processes on other machines might be the best
> anyway.  Just a thought.  Cheers,


From ari.jolma at tkk.fi  Tue Mar  7 01:46:08 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] python - get projection from a file
In-Reply-To: <e183a99d0603061424g2b801f5bjde6b3218fca448b5@mail.gmail.com>
References: <e183a99d0603061108t71ee84ccr50404c1cb5cc3ec9@mail.gmail.com>
	<5383fa5e0603061211x1b9edca5m5ff82ceb08080c2b@mail.gmail.com>
	<e183a99d0603061424g2b801f5bjde6b3218fca448b5@mail.gmail.com>
Message-ID: <440D2C30.4060102@tkk.fi>

Brent Pedersen kirjoitti:
> plus, i'm just switching from perl to python to take advantage of the
> greater number of GIS libs.

As someone who is interested in the usability of Perl in geoinformatics,
I'd like to ask you to elaborate this a bit. What libs are you
especially missing?

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From bpederse at gmail.com  Tue Mar  7 11:19:36 2006
From: bpederse at gmail.com (Brent Pedersen)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] python - get projection from a file
In-Reply-To: <440D2C30.4060102@tkk.fi>
References: <e183a99d0603061108t71ee84ccr50404c1cb5cc3ec9@mail.gmail.com>
	<5383fa5e0603061211x1b9edca5m5ff82ceb08080c2b@mail.gmail.com>
	<e183a99d0603061424g2b801f5bjde6b3218fca448b5@mail.gmail.com>
	<440D2C30.4060102@tkk.fi>
Message-ID: <e183a99d0603070819v20530f91j6e0b7a29fad90d0a@mail.gmail.com>

hi ari,
perl is my first choice in general projects, there's nothing to compete with
cpan. however, with projects like gdal, openEV, python cartographics
library, i get the feeling that there's just more GIS stuff going on in
python--i'll go where there's support. (though the answer to my python q
with a perl example sorta negates that...)
oh and even the arc9 python api sweetens the deal.
libs: well mapserver for one. it's swigged, yes but not many Q's on the
mapserver list for perl mapscript. i use php for that becuase of the support
though i'd switch to python for that as well. just compare the number of
scripts in the examples directory for python and perl in your mapserver
source...
-brent

On 3/6/06, Ari Jolma <ari.jolma@tkk.fi> wrote:
>
> Brent Pedersen kirjoitti:
> > plus, i'm just switching from perl to python to take advantage of the
> > greater number of GIS libs.
>
> As someone who is interested in the usability of Perl in geoinformatics,
> I'd like to ask you to elaborate this a bit. What libs are you
> especially missing?
>
> Ari
>
> --
> Prof. Ari Jolma
> Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
> Teknillinen Korkeakoulu / Helsinki University of Technology
> tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
> Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060307/8e69a32e/attachment.html
From t.r.decarlo at larc.nasa.gov  Tue Mar  7 17:21:55 2006
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <025901c64235$8ad829c0$959877c6@cts1149>

I've set up my PostGIS-enabled PostgreSQL database and created a dataset
called "spatial". I have several shapefiles that I want to load into a
single layer. I found the instructions on the gdal website but when I
specify a layername at the end of the ogr2ogr command it quietly fails. That
is, no messages of any kind either at the command line nor in the pgsql
logfile. If I don't specify a layername the command works just fine.

Are there known problems with this function? I'm using PostGIS 1.1.0 and
PostgreSQL 8.1.1 on RHEL3.

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
             Who is General Failure
         and why is he reading my disk?




From kueda at nature.berkeley.edu  Tue Mar  7 17:40:06 2006
From: kueda at nature.berkeley.edu (Ken-ichi)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] rgb2pct.py error on geotiff from gdal_merge.py
Message-ID: <440E0BC6.4020404@nature.berkeley.edu>

Hi all,

I'm having a problem that seems similar to bugs 329 and 975.  When I 
create a GeoTIFF using

/usr/local/bin/gdal_merge.py -ps 5 5 -o test_mosaic.tif_tmp *_tmprgb

and try to reduce to pseudocolor like

/usr/local/bin/rgb2pct.py test_mosaic.tif_tmp test_mosaic.tif

I get a whole slew of errors like this:

ERROR 1: IReadBlock failed at X offset 0, Y offset 5031
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 5031
ERROR 1: test_mosaic.tif_tmp:0: Invalid strip byte count, strip 133707
ERROR 1: TIFFReadEncodedStrip() failed.

The copy of GDAL I have installed in /usr/local/ is version 1.3.1.  
Here's the gdalinfo on the mosaic

Driver: GTiff/GeoTIFF
Size is 14698, 64338
Coordinate System is:
PROJCS["IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.10.1.6 $ $Date: 2003/10/17 16:36:51EDT $
Projection Name = Albers Conical Equal Ar",
    GEOGCS["NAD27",
        DATUM["North_American_Datum_1927",
            SPHEROID["Clarke 1866",6378206.4,294.9786982138982,
                AUTHORITY["EPSG","7008"]],
            AUTHORITY["EPSG","6267"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4267"]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["standard_parallel_1",34],
    PARAMETER["standard_parallel_2",40.5],
    PARAMETER["latitude_of_center",0],
    PARAMETER["longitude_of_center",-120],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",-4000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-69368.500000,0.000000)
Pixel Size = (5.00000000,-5.00000000)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  -69368.500,       0.000) (120d47'28.12"W, 38d 0'55.45"N)
Lower Left  (  -69368.500, -321690.000) (120d45'42.02"W, 35d 7'14.26"N)
Upper Right (    4121.500,       0.000) (119d57'10.78"W, 38d 1'4.79"N)
Lower Right (    4121.500, -321690.000) (119d57'17.08"W, 35d 7'23.26"N)
Center      (  -32623.500, -160845.000) (120d21'54.05"W, 36d34'13.50"N)
Band 1 Block=14698x1 Type=Byte, ColorInterp=Red
Band 2 Block=14698x1 Type=Byte, ColorInterp=Green
Band 3 Block=14698x1 Type=Byte, ColorInterp=Blue



Any thoughts, advice?  Or is this a bug?

-- 
Ken-ichi Ueda
Kelly Research and Outreach Lab (http://kellylab.berkeley.edu)
University of California, Berkeley
Environmental Science, Policy, and Management
Berkeley, CA 94720
tel: 510.642.8322
fax: 510.642.1477
e-mail: kueda@nature.berkeley.edu


From ealpert at digitalglobe.com  Tue Mar  7 17:55:15 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23344C94C@COMAIL01.digitalglobe.com>


Are you trying to load the shapefiles? If so post your command line.


Should be something like:

Ogr2ogr -f PostgresSQL "PG:dbname=<dbname>" your_shapefile.shp -nln
layer

There are many creation options -lco's you may want to use but it would
be helpful to know what command line you used as well as what version of
GDAL.

One important thing is to makesure you have granted your database user
permissions to modify the postgis geometry_columns table. But you'd get
an error if that happened.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Tuesday, March 07, 2006 3:22 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

I've set up my PostGIS-enabled PostgreSQL database and created a dataset
called "spatial". I have several shapefiles that I want to load into a
single layer. I found the instructions on the gdal website but when I
specify a layername at the end of the ogr2ogr command it quietly fails.
That
is, no messages of any kind either at the command line nor in the pgsql
logfile. If I don't specify a layername the command works just fine.

Are there known problems with this function? I'm using PostGIS 1.1.0 and
PostgreSQL 8.1.1 on RHEL3.

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
             Who is General Failure
         and why is he reading my disk?



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Tue Mar  7 18:07:04 2006
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:01 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C39C@mailman.san.com>

Thom,

Also, you will have to modify ogr2ogr to pass the PG8: connection prefix
instead of PG:.  When I look at the old code I don't know how it ever
worked.  Basically because the PG: prefix was never being stripped off
the connect string before being passed to the PG driver, and the PG
driver doesn't like the PG: prefix.  Maybe in pre 8.x versions I would
ignore the prefix.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Tuesday, March 07, 2006 3:22 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

I've set up my PostGIS-enabled PostgreSQL database and created a dataset
called "spatial". I have several shapefiles that I want to load into a
single layer. I found the instructions on the gdal website but when I
specify a layername at the end of the ogr2ogr command it quietly fails.
That
is, no messages of any kind either at the command line nor in the pgsql
logfile. If I don't specify a layername the command works just fine.

Are there known problems with this function? I'm using PostGIS 1.1.0 and
PostgreSQL 8.1.1 on RHEL3.

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
             Who is General Failure
         and why is he reading my disk?



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ealpert at digitalglobe.com  Tue Mar  7 18:33:19 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23344C959@COMAIL01.digitalglobe.com>


Actually you need PGB:  NOT PG8: 

I just dumped and inserted data using the CVS version of ogr with
postgres 8.1.3 and postgis 1.1.1

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Chapman,
Martin
Sent: Tuesday, March 07, 2006 4:07 PM
To: Thom DeCarlo; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

Thom,

Also, you will have to modify ogr2ogr to pass the PG8: connection prefix
instead of PG:.  When I look at the old code I don't know how it ever
worked.  Basically because the PG: prefix was never being stripped off
the connect string before being passed to the PG driver, and the PG
driver doesn't like the PG: prefix.  Maybe in pre 8.x versions I would
ignore the prefix.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Tuesday, March 07, 2006 3:22 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

I've set up my PostGIS-enabled PostgreSQL database and created a dataset
called "spatial". I have several shapefiles that I want to load into a
single layer. I found the instructions on the gdal website but when I
specify a layername at the end of the ogr2ogr command it quietly fails.
That
is, no messages of any kind either at the command line nor in the pgsql
logfile. If I don't specify a layername the command works just fine.

Are there known problems with this function? I'm using PostGIS 1.1.0 and
PostgreSQL 8.1.1 on RHEL3.

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
             Who is General Failure
         and why is he reading my disk?



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ealpert at digitalglobe.com  Tue Mar  7 18:39:43 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23344C95B@COMAIL01.digitalglobe.com>


You know what I suggest using shp2pgsql with psql -f to load data and
psql to create the indexes. You're just going to run into problems
because the ogr PG driver doesn't set the SRID.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Tuesday, March 07, 2006 3:22 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

I've set up my PostGIS-enabled PostgreSQL database and created a dataset
called "spatial". I have several shapefiles that I want to load into a
single layer. I found the instructions on the gdal website but when I
specify a layername at the end of the ogr2ogr command it quietly fails.
That
is, no messages of any kind either at the command line nor in the pgsql
logfile. If I don't specify a layername the command works just fine.

Are there known problems with this function? I'm using PostGIS 1.1.0 and
PostgreSQL 8.1.1 on RHEL3.

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
             Who is General Failure
         and why is he reading my disk?



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Tue Mar  7 18:50:21 2006
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C39D@mailman.san.com>

Ethan,

You missed my email before which has an attachment.  I had to modify the
driver code to get it to work with 8.x.  I added a new connection prefix
for 8.x connects called PG8:.  The mailing server stopped the
attachment.  Here is what I wrote:

Thom,

I had problems with 8.1 as well.  I made mods to the attached file to
get it to work.  Your connection string for pg 8.x should be PG8: to
connect correctly.  Look at the open method to see my changes.  

Martin

-----Original Message-----
From: Ethan Alpert [mailto:ealpert@digitalglobe.com] 
Sent: Tuesday, March 07, 2006 4:33 PM
To: Chapman, Martin; Thom DeCarlo; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...


Actually you need PGB:  NOT PG8: 

I just dumped and inserted data using the CVS version of ogr with
postgres 8.1.3 and postgis 1.1.1

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Chapman,
Martin
Sent: Tuesday, March 07, 2006 4:07 PM
To: Thom DeCarlo; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

Thom,

Also, you will have to modify ogr2ogr to pass the PG8: connection prefix
instead of PG:.  When I look at the old code I don't know how it ever
worked.  Basically because the PG: prefix was never being stripped off
the connect string before being passed to the PG driver, and the PG
driver doesn't like the PG: prefix.  Maybe in pre 8.x versions I would
ignore the prefix.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Tuesday, March 07, 2006 3:22 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

I've set up my PostGIS-enabled PostgreSQL database and created a dataset
called "spatial". I have several shapefiles that I want to load into a
single layer. I found the instructions on the gdal website but when I
specify a layername at the end of the ogr2ogr command it quietly fails.
That
is, no messages of any kind either at the command line nor in the pgsql
logfile. If I don't specify a layername the command works just fine.

Are there known problems with this function? I'm using PostGIS 1.1.0 and
PostgreSQL 8.1.1 on RHEL3.

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
             Who is General Failure
         and why is he reading my disk?



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Tue Mar  7 19:13:10 2006
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C39E@mailman.san.com>

I pointed that out to Frank a week or two ago and I think it's fixed in
the daily version now.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ethan Alpert
Sent: Tuesday, March 07, 2006 4:40 PM
To: Thom DeCarlo; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...


You know what I suggest using shp2pgsql with psql -f to load data and
psql to create the indexes. You're just going to run into problems
because the ogr PG driver doesn't set the SRID.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Tuesday, March 07, 2006 3:22 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

I've set up my PostGIS-enabled PostgreSQL database and created a dataset
called "spatial". I have several shapefiles that I want to load into a
single layer. I found the instructions on the gdal website but when I
specify a layername at the end of the ogr2ogr command it quietly fails.
That
is, no messages of any kind either at the command line nor in the pgsql
logfile. If I don't specify a layername the command works just fine.

Are there known problems with this function? I'm using PostGIS 1.1.0 and
PostgreSQL 8.1.1 on RHEL3.

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
             Who is General Failure
         and why is he reading my disk?



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Mar  7 20:44:53 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C39E@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C39E@mailman.san.com>
Message-ID: <440E3715.7020002@pobox.com>

Chapman, Martin wrote:
> I pointed that out to Frank a week or two ago and I think it's fixed in
> the daily version now.

Martin / Ethan / Thom,

Umm ... I'm not sure if this is one I've fixed (though I did fix something
vaguely similar for MySQL Spatial).  I know I have a few outstanding issues
from Martin in my inbox.  Hopefully I'll get back to them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From bnagesh at nio.org  Wed Mar  8 01:09:01 2006
From: bnagesh at nio.org (Nagesh Bhatkar)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] gdal-1.3.1 installation: gdal-config, gdal_translate,
 gdalinfo all show different versions
Message-ID: <440E74FD.2030706@nio.org>

Dear GDAL Users,
I installed gdal-1.3.1 on mandriva 2006,
now i get the following

gdal-config --version
1.3.1
which  gdal-config
/usr/local/bin/gdal-config

gdal_translate --version
GDAL 1.2.6.0, released 2005/03/13
which gdal_translate
/usr/local/bin/gdal_translate

gdalinfo --version
GDAL 1.2.6.0, released 2005/03/13
which gdalinfo
/usr/local/bin/gdalinfo

Looking above one can notice that there may be more than one version of gdal
installed on the system , which i think is not the case because after 
slocate
i dont find any gdal 1.2.6 on my system

If i want to remove all existing installations (if any) of the gdal library,
what are the steps i need to follow. So that i can install the new version
fresh.


Kindly help.


Nagesh Bhatkar
National Institute of Oceanography
India- Goa



From Martin.Spott at mgras.net  Wed Mar  8 04:16:02 2006
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
References: <025901c64235$8ad829c0$959877c6@cts1149>
Message-ID: <dum7ci$ses$1@osprey.mgras.de>

"Thom DeCarlo" wrote:
> I've set up my PostGIS-enabled PostgreSQL database and created a dataset
> called "spatial". I have several shapefiles that I want to load into a
> single layer. I found the instructions on the gdal website but when I
> specify a layername at the end of the ogr2ogr command it quietly fails.

May I suggest the following:
1.) Create tables with constraints and indices from a hand-made SQL
    script.
2.) Convert the shapefiles into SQL with 'shp2pgsql' for a _temporary_
    table, pipe this into 'psql'. Using 'shp2pgsql' over 'ogr2ogr' has
    the advantage that you can specify a SRID (useful for Mapserver and
    such).
3.) Select only the columns that you actually need from the temporary
    table into the work table. Depending on the source of your
    shapefiles they might specify attributes/DB-columns that you never
    expected.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From bnagesh at nio.org  Wed Mar  8 04:25:32 2006
From: bnagesh at nio.org (Nagesh Bhatkar)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] gdal-1.3.1 installation: gdal-config, gdal_translate, 
	gdalinfo all show different versions
In-Reply-To: <440E74FD.2030706@nio.org>
References: <440E74FD.2030706@nio.org>
Message-ID: <440EA30C.9000205@nio.org>

Hello Gdal Users,

I used  the following command:
urmpe gdal
to remove any versions of gdal installed in the system.
That solved my problem.

Regards
Nagesh




Nagesh Bhatkar wrote:

> Dear GDAL Users,
> I installed gdal-1.3.1 on mandriva 2006,
> now i get the following
>
> gdal-config --version
> 1.3.1
> which  gdal-config
> /usr/local/bin/gdal-config
>
> gdal_translate --version
> GDAL 1.2.6.0, released 2005/03/13
> which gdal_translate
> /usr/local/bin/gdal_translate
>
> gdalinfo --version
> GDAL 1.2.6.0, released 2005/03/13
> which gdalinfo
> /usr/local/bin/gdalinfo
>
> Looking above one can notice that there may be more than one version 
> of gdal
> installed on the system , which i think is not the case because after 
> slocate
> i dont find any gdal 1.2.6 on my system
>
> If i want to remove all existing installations (if any) of the gdal 
> library,
> what are the steps i need to follow. So that i can install the new 
> version
> fresh.
>
>
> Kindly help.
>
>
> Nagesh Bhatkar
> National Institute of Oceanography
> India- Goa
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


From bartvde at xs4all.nl  Wed Mar  8 05:02:45 2006
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] tiff errors on gdaladdo
Message-ID: <9619.145.50.39.8.1141812165.squirrel@webmail.xs4all.nl>

Hi list,

we are trying to build overviews using gdaladdo but are running into errors:

0...10...20...30...40...50...Warning 1: 765/b765-1924.tif:PackBitsDecode:
discarding 2 bytes to avoid buffer overrun
60..Warning 1: 765/b765-1924.tif:PackBitsDecode: discarding 2 bytes to
avoid buffer overrun
ERROR 1: 765/b765-1924.tif:PackBitsDecode: Not enough data for scanline 128
ERROR 1: TIFFReadEncodedTile() failed.
.70...80...ERROR 1: 765/b765-1924.tif:PackBitsDecode: Not enough data for
scanline 1920
ERROR 1: TIFFReadEncodedTile() failed.
ERROR 1: IReadBlock failed at X offset 15, Y offset 9
ERROR 1: GetBlockRef failed at X block offset 15, Y block offset 9
90.ERROR 1: 765/b765-1924.tif:PackBitsDecode: Not enough data for scanline
1920
ERROR 1: TIFFReadEncodedTile() failed.
..ERROR 1: 765/b765-1924.tif:PackBitsDecode: Not enough data for scanline
1920
ERROR 1: TIFFReadEncodedTile() failed.
ERROR 1: IReadBlock failed at X offset 15, Y offset 9
ERROR 1: GetBlockRef failed at X block offset 15, Y block offset 9
ERROR 1: 765/b765-1924.tif:PackBitsDecode: Not enough data for scanline 128
ERROR 1: TIFFReadEncodedTile() failed.
ERROR 1: IReadBlock failed at X offset 1, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 0
ERROR 1: 765/b765-1924.tif:PackBitsDecode: Not enough data for scanline 128
ERROR 1: TIFFReadEncodedTile() failed.

Is this solveable? Or is it a problem of the source tiff files?

Best regards,
Bart


From warmerdam at pobox.com  Wed Mar  8 08:29:43 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] gdal-1.3.1 installation: gdal-config, gdal_translate, 
	gdalinfo all show different versions
In-Reply-To: <440E74FD.2030706@nio.org>
References: <440E74FD.2030706@nio.org>
Message-ID: <440EDC47.5020400@pobox.com>

Nagesh Bhatkar wrote:
> Dear GDAL Users,
> I installed gdal-1.3.1 on mandriva 2006,
> now i get the following
> 
> gdal-config --version
> 1.3.1
> which  gdal-config
> /usr/local/bin/gdal-config
> 
> gdal_translate --version
> GDAL 1.2.6.0, released 2005/03/13
> which gdal_translate
> /usr/local/bin/gdal_translate
...
> If i want to remove all existing installations (if any) of the gdal 
> library,
> what are the steps i need to follow. So that i can install the new version
> fresh.

Nagesh,

The difference between gdal-config and gdal_translate or gdalinfo is that
gdal-config is reporting the version burned into the "mainline" (the
file /usr/local/bin/gdal-config) while the others are reporting the
version in the shared library (libgdal.so).  So, presumably what is
happening is a different shared library is being picked up and used.
Like /usr/lib/libgdal.so.

You can find out what shared libraries are being used with the ldd
command.

eg.
ldd /usr/local/bin/gdalinfo

How to remove all existing installations depends on how they were installed.
You might want to do "locate libgdal" to find installed versions of the
library.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Wed Mar  8 09:51:01 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] rgb2pct.py error on geotiff from gdal_merge.py
In-Reply-To: <440E0BC6.4020404@nature.berkeley.edu>
References: <440E0BC6.4020404@nature.berkeley.edu>
Message-ID: <440EEF55.90604@pobox.com>

Ken-ichi wrote:
> Hi all,
> 
> I'm having a problem that seems similar to bugs 329 and 975.  When I 
> create a GeoTIFF using
> 
> /usr/local/bin/gdal_merge.py -ps 5 5 -o test_mosaic.tif_tmp *_tmprgb
> 
> and try to reduce to pseudocolor like
> 
> /usr/local/bin/rgb2pct.py test_mosaic.tif_tmp test_mosaic.tif
> 
> I get a whole slew of errors like this:
> 
> ERROR 1: IReadBlock failed at X offset 0, Y offset 5031
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 5031
> ERROR 1: test_mosaic.tif_tmp:0: Invalid strip byte count, strip 133707
> ERROR 1: TIFFReadEncodedStrip() failed.
...
> Any thoughts, advice?  Or is this a bug?


Ken-ichi,

I think this is likely bug 975, which is fixed in CVS.  Try upgrading
to GDAL-cvs (or a nightly snapshot), and try rgb2pct.py again.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ealpert at digitalglobe.com  Wed Mar  8 12:17:47 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23344C9C9@COMAIL01.digitalglobe.com>



I'm running CVS from March 1 and OGR does not have any option to set
SRID but it does manage to create a constraint that the SRID should be
-1.

-e

-----Original Message-----
From: Chapman, Martin [mailto:MChapman@sanz.com] 
Sent: Tuesday, March 07, 2006 5:13 PM
To: Ethan Alpert; Thom DeCarlo; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

I pointed that out to Frank a week or two ago and I think it's fixed in
the daily version now.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ethan Alpert
Sent: Tuesday, March 07, 2006 4:40 PM
To: Thom DeCarlo; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...


You know what I suggest using shp2pgsql with psql -f to load data and
psql to create the indexes. You're just going to run into problems
because the ogr PG driver doesn't set the SRID.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Tuesday, March 07, 2006 3:22 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

I've set up my PostGIS-enabled PostgreSQL database and created a dataset
called "spatial". I have several shapefiles that I want to load into a
single layer. I found the instructions on the gdal website but when I
specify a layername at the end of the ogr2ogr command it quietly fails.
That
is, no messages of any kind either at the command line nor in the pgsql
logfile. If I don't specify a layername the command works just fine.

Are there known problems with this function? I'm using PostGIS 1.1.0 and
PostgreSQL 8.1.1 on RHEL3.

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
             Who is General Failure
         and why is he reading my disk?



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From matt.wilkie at gov.yk.ca  Wed Mar  8 12:25:14 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] change gdal_merge resampling?
Message-ID: <440F137A.8090608@gov.yk.ca>

Hi List,

How can I set what resampling algorithm gdal_merge uses? (I want 
bilinear instead of nearest neighbour)

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From ILucena at clarku.edu  Wed Mar  8 13:07:13 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Delphi
Message-ID: <6FD7C9DB26540B42A1207C69BF92D455C333F8@Iris.ad.clarku.edu>

Hi all,

 

I am writing a Delphi Import Unit around the "GDAL C API" and I want to
know if someone else is doing the same thing, so we can share the
effort, define some naming convention and things like that.

 

Thanks,

 

Ivan

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060308/7ca5fcb5/attachment.html
From dem at acri-st.fr  Wed Mar  8 13:08:11 2006
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Compressed and tiled HDF4
Message-ID: <440F1D8B.1050909@acri-st.fr>

Hi,

Does anyone have experience with internally GZIP compressed HDF4 files 
(in SDS format) with or without chunks (tiles) using GDAL ?
I've just tested it and read a GZIP HDF4 seems to be very very very 
longer than raw HDF.
I've compared performances with HDF tool hrepack which allows to 
recompress and rechunk an HDF file. hdrepack has very good performances.

I know GDAL driver use a row as default block size for HDF4, maybe it's 
the reason ? but I tried with GZIP HDF file with one row per tile and it 
doesn't change anything...

In fact I just want to know if it's possible to (easily?) resolve this 
problem or if there is a no-end hidden issue ; we have to know if HDF 
compressed files is a good choice for internal use products or not...


Thanks in advance,

Julien

From warmerdam at pobox.com  Wed Mar  8 13:20:13 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] change gdal_merge resampling?
In-Reply-To: <440F137A.8090608@gov.yk.ca>
References: <440F137A.8090608@gov.yk.ca>
Message-ID: <440F205D.9070404@pobox.com>

Matt Wilkie wrote:
> Hi List,
> 
> How can I set what resampling algorithm gdal_merge uses? (I want 
> bilinear instead of nearest neighbour)

Matt,

No, gdal_merge does not support different resampling kernels.  You
would need to use gdalwarp for that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From matt.wilkie at gov.yk.ca  Wed Mar  8 13:22:48 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] change gdal_merge resampling?
In-Reply-To: <440F205D.9070404@pobox.com>
References: <440F137A.8090608@gov.yk.ca> <440F205D.9070404@pobox.com>
Message-ID: <440F20F8.8010008@gov.yk.ca>

Frank Warmerdam wrote:
> Matt Wilkie wrote:
>> Hi List,
>>
>> How can I set what resampling algorithm gdal_merge uses? (I want 
>> bilinear instead of nearest neighbour)
> 
> Matt,
> 
> No, gdal_merge does not support different resampling kernels.  You
> would need to use gdalwarp for that.

Oh, okay, thanks.

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From t.r.decarlo at larc.nasa.gov  Wed Mar  8 15:32:13 2006
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23344C94C@COMAIL01.digitalglobe.com>
Message-ID: <02c901c642ef$620af4e0$959877c6@cts1149>

Ethan (and everybody else...),
It looks like you folks have already hashed out all of my problems. ;-) I
think the *real* problem is that I'm trying to learn SQL, PostgreSQL,
PostGIS, MapServer, and Apache all in one swell foop. 

That said... I was trying to load the shapefiles into a PostgreSQL database
using the ogr2ogr command. I was blindly following the examples given on the
PostgreSQL page of the gdal.org site. (http://www.gdal.org/ogr/drv_pg.html)
The example there says:

% ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
     -lco OVERWRITE=yes CompleteChain
% ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
     CompleteChain

Unfortunately, as you show in your example, the commands should actually
look like this:

% ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
     -lco OVERWRITE=yes -nln CompleteChain
                        ^^^^
% ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
     -nln CompleteChain
     ^^^^

When I add the "-nln" the new lay is properly created and appended. This
error is duplicated on the PostGIS OGR Wiki page
http://postgis.refractions.net/support/wiki/index.php?OGR%20Examples

Now if I can just figure out what you mean by that "SRID" thingy....

Thom

--
Thom DeCarlo
-------------------------------------------------------
     That Which Does Not Kill Me
       Can Still Hurt Really Bad.

> -----Original Message-----
> From: Ethan Alpert [mailto:ealpert@digitalglobe.com]
> Sent: Tuesday, March 07, 2006 5:55 PM
> To: Thom DeCarlo; gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> 
> Are you trying to load the shapefiles? If so post your command line.
> 
> 
> Should be something like:
> 
> Ogr2ogr -f PostgresSQL "PG:dbname=<dbname>" your_shapefile.shp -nln
> layer
> 
> There are many creation options -lco's you may want to use but it would
> be helpful to know what command line you used as well as what version of
> GDAL.
> 
> One important thing is to makesure you have granted your database user
> permissions to modify the postgis geometry_columns table. But you'd get
> an error if that happened.
> 
> -e
> 
> -----Original Message-----
> From: Thom DeCarlo
> Sent: Tuesday, March 07, 2006 3:22 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> I've set up my PostGIS-enabled PostgreSQL database and created a dataset
> called "spatial". I have several shapefiles that I want to load into a
> single layer. I found the instructions on the gdal website but when I
> specify a layername at the end of the ogr2ogr command it quietly fails.
> That
> is, no messages of any kind either at the command line nor in the pgsql
> logfile. If I don't specify a layername the command works just fine.
> 
> Are there known problems with this function? I'm using PostGIS 1.1.0 and
> PostgreSQL 8.1.1 on RHEL3.
> 
> Thanks,
> Thom
> 
> --
> Thom DeCarlo
> -------------------------------------------------------
>              Who is General Failure
>          and why is he reading my disk?
> 
> 




From MChapman at sanz.com  Wed Mar  8 15:55:04 2006
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C3A8@mailman.san.com>

Ethan,

Cool, that was probably my problem as well.  I will try your command
line.

Martin 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Wednesday, March 08, 2006 1:32 PM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

Ethan (and everybody else...),
It looks like you folks have already hashed out all of my problems. ;-)
I think the *real* problem is that I'm trying to learn SQL, PostgreSQL,
PostGIS, MapServer, and Apache all in one swell foop. 

That said... I was trying to load the shapefiles into a PostgreSQL
database using the ogr2ogr command. I was blindly following the examples
given on the PostgreSQL page of the gdal.org site.
(http://www.gdal.org/ogr/drv_pg.html)
The example there says:

% ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
     -lco OVERWRITE=yes CompleteChain
% ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
     CompleteChain

Unfortunately, as you show in your example, the commands should actually
look like this:

% ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
     -lco OVERWRITE=yes -nln CompleteChain
                        ^^^^
% ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
     -nln CompleteChain
     ^^^^

When I add the "-nln" the new lay is properly created and appended. This
error is duplicated on the PostGIS OGR Wiki page
http://postgis.refractions.net/support/wiki/index.php?OGR%20Examples

Now if I can just figure out what you mean by that "SRID" thingy....

Thom

--
Thom DeCarlo
-------------------------------------------------------
     That Which Does Not Kill Me
       Can Still Hurt Really Bad.

> -----Original Message-----
> From: Ethan Alpert [mailto:ealpert@digitalglobe.com]
> Sent: Tuesday, March 07, 2006 5:55 PM
> To: Thom DeCarlo; gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> 
> Are you trying to load the shapefiles? If so post your command line.
> 
> 
> Should be something like:
> 
> Ogr2ogr -f PostgresSQL "PG:dbname=<dbname>" your_shapefile.shp -nln 
> layer
> 
> There are many creation options -lco's you may want to use but it 
> would be helpful to know what command line you used as well as what 
> version of GDAL.
> 
> One important thing is to makesure you have granted your database user

> permissions to modify the postgis geometry_columns table. But you'd 
> get an error if that happened.
> 
> -e
> 
> -----Original Message-----
> From: Thom DeCarlo
> Sent: Tuesday, March 07, 2006 3:22 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> I've set up my PostGIS-enabled PostgreSQL database and created a 
> dataset called "spatial". I have several shapefiles that I want to 
> load into a single layer. I found the instructions on the gdal website

> but when I specify a layername at the end of the ogr2ogr command it
quietly fails.
> That
> is, no messages of any kind either at the command line nor in the 
> pgsql logfile. If I don't specify a layername the command works just
fine.
> 
> Are there known problems with this function? I'm using PostGIS 1.1.0 
> and PostgreSQL 8.1.1 on RHEL3.
> 
> Thanks,
> Thom
> 
> --
> Thom DeCarlo
> -------------------------------------------------------
>              Who is General Failure
>          and why is he reading my disk?
> 
> 



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ealpert at digitalglobe.com  Wed Mar  8 16:01:49 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23344CA11@COMAIL01.digitalglobe.com>



SRID == Spatial Reference ID

It defines the coordinate system and projection of your data. Once you
get to the mapserver part you'll really need to understand it to get
maps displayed or to do spatial operations on your data like intersect,
etc...

There is a mapserver user list: MAPSERVER-USERS@LISTS.UMN.EDU

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Wednesday, March 08, 2006 1:32 PM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

Ethan (and everybody else...),
It looks like you folks have already hashed out all of my problems. ;-)
I
think the *real* problem is that I'm trying to learn SQL, PostgreSQL,
PostGIS, MapServer, and Apache all in one swell foop. 

That said... I was trying to load the shapefiles into a PostgreSQL
database
using the ogr2ogr command. I was blindly following the examples given on
the
PostgreSQL page of the gdal.org site.
(http://www.gdal.org/ogr/drv_pg.html)
The example there says:

% ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
     -lco OVERWRITE=yes CompleteChain
% ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
     CompleteChain

Unfortunately, as you show in your example, the commands should actually
look like this:

% ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
     -lco OVERWRITE=yes -nln CompleteChain
                        ^^^^
% ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
     -nln CompleteChain
     ^^^^

When I add the "-nln" the new lay is properly created and appended. This
error is duplicated on the PostGIS OGR Wiki page
http://postgis.refractions.net/support/wiki/index.php?OGR%20Examples

Now if I can just figure out what you mean by that "SRID" thingy....

Thom

--
Thom DeCarlo
-------------------------------------------------------
     That Which Does Not Kill Me
       Can Still Hurt Really Bad.

> -----Original Message-----
> From: Ethan Alpert [mailto:ealpert@digitalglobe.com]
> Sent: Tuesday, March 07, 2006 5:55 PM
> To: Thom DeCarlo; gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> 
> Are you trying to load the shapefiles? If so post your command line.
> 
> 
> Should be something like:
> 
> Ogr2ogr -f PostgresSQL "PG:dbname=<dbname>" your_shapefile.shp -nln
> layer
> 
> There are many creation options -lco's you may want to use but it
would
> be helpful to know what command line you used as well as what version
of
> GDAL.
> 
> One important thing is to makesure you have granted your database user
> permissions to modify the postgis geometry_columns table. But you'd
get
> an error if that happened.
> 
> -e
> 
> -----Original Message-----
> From: Thom DeCarlo
> Sent: Tuesday, March 07, 2006 3:22 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> I've set up my PostGIS-enabled PostgreSQL database and created a
dataset
> called "spatial". I have several shapefiles that I want to load into a
> single layer. I found the instructions on the gdal website but when I
> specify a layername at the end of the ogr2ogr command it quietly
fails.
> That
> is, no messages of any kind either at the command line nor in the
pgsql
> logfile. If I don't specify a layername the command works just fine.
> 
> Are there known problems with this function? I'm using PostGIS 1.1.0
and
> PostgreSQL 8.1.1 on RHEL3.
> 
> Thanks,
> Thom
> 
> --
> Thom DeCarlo
> -------------------------------------------------------
>              Who is General Failure
>          and why is he reading my disk?
> 
> 



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mlepage at pyxisinnovation.com  Wed Mar  8 16:31:58 2006
From: mlepage at pyxisinnovation.com (Marc A. Lepage)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDALColorEntry? GDT_CInt16?
Message-ID: <00c601c642f7$ba9db1d0$1b00a8c0@PyxisInnovation.local>

After reading the docs, I remain confused about the exact types (and
ranges) of data in a few cases.
 
A GDALColorEntry has 4 shorts representing (e.g.) R, G, B, A. Are they
storing values from 0-255, or 0-32767? (I am assuming they are signed.)
When I get a value (say c1 representing red), how should I be reading
its value?
 
For complex GDALDataType GDT_CInt16, is that a single 16-bit quantity
which is to be read as two 8-bit quantities? Or is it two 16-bit
quantities? Are they signed or unsigned?
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 268.2.0/276 - Release Date: 3/7/2006
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060308/53e0e5ec/attachment.html
From warmerdam at pobox.com  Wed Mar  8 16:56:04 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDALColorEntry? GDT_CInt16?
In-Reply-To: <00c601c642f7$ba9db1d0$1b00a8c0@PyxisInnovation.local>
References: <00c601c642f7$ba9db1d0$1b00a8c0@PyxisInnovation.local>
Message-ID: <440F52F4.7080105@pobox.com>

Marc A. Lepage wrote:
> After reading the docs, I remain confused about the exact types (and 
> ranges) of data in a few cases.
> 
>  
> 
> A GDALColorEntry has 4 shorts representing (e.g.) R, G, B, A. Are they 
> storing values from 0-255, or 0-32767? (I am assuming they are signed.) 
> When I get a value (say c1 representing red), how should I be reading 
> its value?

Marc,

The red, green, blue and alpha values are in the range 0 to 255.  A
short type was used because I was concerned that some color models
needed a larger type.  However, not having pursued other color models
it hasn't been an issue.

> For complex GDALDataType GDT_CInt16, is that a single 16-bit quantity 
> which is to be read as two 8-bit quantities? Or is it two 16-bit 
> quantities? Are they signed or unsigned?

GDT_CInt16 consists of two 16bit values, one for the "real" and one
for the "imaginary" component.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From Colin.Gowens at co.fulton.ga.us  Wed Mar  8 17:26:38 2006
From: Colin.Gowens at co.fulton.ga.us (Gowens, Colin)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <A988EE66EFE6AD4F9513B5D49EE1477C0485520B@fcgctex02.co.fulton.ga.us>


Thom,

When you select the geometry of a record in PostGIS with SQL it will
show the SRID.  An SRID = -1 is the default "nothing is defined", so you
will need to set the SRID using the setsrid() function in PostGIS.  EPSG
codes are accepted.  Also, there may be a table in the Public schema
(geometry_columns on our install) that holds the SRIDs for all of the
geo_tables in the db.  If this is the case, then each geo_table will
need to be "registered" using a register_geometry_table() function. 


Colin Gowens
Geographic Information Systems
Fulton County, Georgia
email:  colin.gowens@co.fulton.ga.us

-----Original Message-----
From: "Ethan Alpert" <ealpert@digitalglobe.com>
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
To: "Thom DeCarlo" <t.r.decarlo@larc.nasa.gov>,
	<gdal-dev@lists.maptools.org>
Message-ID:
	
<8B319E5A30FF4A48BE7EEAAF609DB23344CA11@COMAIL01.digitalglobe.com>
Content-Type: text/plain;	charset="us-ascii"



SRID == Spatial Reference ID

It defines the coordinate system and projection of your data. Once you
get to the mapserver part you'll really need to understand it to get
maps displayed or to do spatial operations on your data like intersect,
etc...

There is a mapserver user list: MAPSERVER-USERS@LISTS.UMN.EDU

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Wednesday, March 08, 2006 1:32 PM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

Ethan (and everybody else...),
It looks like you folks have already hashed out all of my problems. ;-)
I
think the *real* problem is that I'm trying to learn SQL, PostgreSQL,
PostGIS, MapServer, and Apache all in one swell foop. 

That said... I was trying to load the shapefiles into a PostgreSQL
database
using the ogr2ogr command. I was blindly following the examples given on
the
PostgreSQL page of the gdal.org site.
(http://www.gdal.org/ogr/drv_pg.html)
The example there says:

% ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
     -lco OVERWRITE=yes CompleteChain
% ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
     CompleteChain

Unfortunately, as you show in your example, the commands should actually
look like this:

% ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
     -lco OVERWRITE=yes -nln CompleteChain
                        ^^^^
% ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
     -nln CompleteChain
     ^^^^

When I add the "-nln" the new lay is properly created and appended. This
error is duplicated on the PostGIS OGR Wiki page
http://postgis.refractions.net/support/wiki/index.php?OGR%20Examples

Now if I can just figure out what you mean by that "SRID" thingy....

Thom

--
Thom DeCarlo
-------------------------------------------------------
     That Which Does Not Kill Me
       Can Still Hurt Really Bad.

> -----Original Message-----
> From: Ethan Alpert [mailto:ealpert@digitalglobe.com]
> Sent: Tuesday, March 07, 2006 5:55 PM
> To: Thom DeCarlo; gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> 
> Are you trying to load the shapefiles? If so post your command line.
> 
> 
> Should be something like:
> 
> Ogr2ogr -f PostgresSQL "PG:dbname=<dbname>" your_shapefile.shp -nln
> layer
> 
> There are many creation options -lco's you may want to use but it
would
> be helpful to know what command line you used as well as what version
of
> GDAL.
> 
> One important thing is to makesure you have granted your database user
> permissions to modify the postgis geometry_columns table. But you'd
get
> an error if that happened.
> 
> -e
> 
> -----Original Message-----
> From: Thom DeCarlo
> Sent: Tuesday, March 07, 2006 3:22 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> I've set up my PostGIS-enabled PostgreSQL database and created a
dataset
> called "spatial". I have several shapefiles that I want to load into a
> single layer. I found the instructions on the gdal website but when I
> specify a layername at the end of the ogr2ogr command it quietly
fails.
> That
> is, no messages of any kind either at the command line nor in the
pgsql
> logfile. If I don't specify a layername the command works just fine.
> 
> Are there known problems with this function? I'm using PostGIS 1.1.0
and
> PostgreSQL 8.1.1 on RHEL3.
> 
> Thanks,
> Thom
> 
> --
> Thom DeCarlo
> -------------------------------------------------------
>              Who is General Failure
>          and why is he reading my disk?
> 
> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060308/c831b588/attachment.html
From mateusz at loskot.net  Wed Mar  8 17:41:40 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Re: [FWTools] GEOS on windows
In-Reply-To: <440EF438.5040208@pobox.com>
References: <9a8f0670603080621i14070a10hcfa5fbfd59d359bc@mail.gmail.com>
	<440EF438.5040208@pobox.com>
Message-ID: <440F5DA4.5070405@loskot.net>

Frank Warmerdam wrote:
> Chris Somerlot wrote:
> 
>> Do I understand correctly from this post
>> (http://article.gmane.org/gmane.comp.gis.gdal.devel/5429/match=geos+windows) 
>>
>> that GEOS is now being compiled into the windows version of FWTools? I
>> am using FWTools 1.0.0a7 and OGR is throwing the following error when
>> I use the geometry.Distance() funtion from python:
>>
>> ERROR 6: GEOS C API does not include DistanceOp.
> 
> 
> Chris,
> 
> I believe this occurs because the distance operation is (or at least
> was) not exposed from the GEOS C API.

Hi Guys,

 From about a week, I'm building GEOS 3.0.0 CVS a few times every day.
Recently, I started to build OGR (CVS) with GEOS 3.0.0 so I encountered 
a few issues I had to resolve.
The biggest change in GEOS that can be noticed is the reorganization of 
namespaces, new namespaces have been added.
So, some classes have moved as well.

Also, strk is working on splitting huge headers with into smaller, to 
not to include e.g. geos/geom.h in every file -> this shot cut down 
compilation time.

I'm trying to keep GEOS' makefile.vc synchronized with current changes 
strk is making. So, generally, makefile.vc is working but there are some 
issues possible in next days (e.g. movements in files) ;-)

Those are only a few changes that have taken place.

You can track GEOS progres bugs/fixes here:
http://postgis.refractions.net/bugs/index.php

So, if someone is interested in fixed up-to-date OGR for GEOS 3.0.0, 
please give me a not. I can provide version.
I'm not going to commit those changes to GDAL CVS because I'm not sure 
if OGR should integrate with GEOS 3.0.0 at this moment.
Or maybe there is dedicated branch of OGR for GEOS 3.0.0.
Frank: Is there any?

BTW, I'm building GEOS/OGR with VC++ 8.0, so I can provide VC++ 
solution/project files if anyone is interested.

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From mlepage at pyxisinnovation.com  Wed Mar  8 17:58:32 2006
From: mlepage at pyxisinnovation.com (Marc A. Lepage)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDALColorEntry? GDT_CInt16?
In-Reply-To: <440F52F4.7080105@pobox.com>
Message-ID: <00d501c64303$d28ac330$1b00a8c0@PyxisInnovation.local>

Thanks Frank!

Just to clarify, the CInt16 type is two signed 16-bit shorts? So each
has a range of -32768 to 32767? Or are they also 0 to 255?

-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
Warmerdam
Sent: Wednesday, March 08, 2006 4:56 PM
To: Marc A. Lepage
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] GDALColorEntry? GDT_CInt16?

Marc A. Lepage wrote:
> After reading the docs, I remain confused about the exact types (and 
> ranges) of data in a few cases.
> 
>  
> 
> A GDALColorEntry has 4 shorts representing (e.g.) R, G, B, A. Are they

> storing values from 0-255, or 0-32767? (I am assuming they are
signed.) 
> When I get a value (say c1 representing red), how should I be reading 
> its value?

Marc,

The red, green, blue and alpha values are in the range 0 to 255.  A
short type was used because I was concerned that some color models
needed a larger type.  However, not having pursued other color models
it hasn't been an issue.

> For complex GDALDataType GDT_CInt16, is that a single 16-bit quantity 
> which is to be read as two 8-bit quantities? Or is it two 16-bit 
> quantities? Are they signed or unsigned?

GDT_CInt16 consists of two 16bit values, one for the "real" and one
for the "imaginary" component.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF,
http://osgeo.org

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 268.2.0/276 - Release Date: 3/7/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 268.2.0/276 - Release Date: 3/7/2006
 


From warmerdam at pobox.com  Wed Mar  8 18:47:45 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDALColorEntry? GDT_CInt16?
In-Reply-To: <00d501c64303$d28ac330$1b00a8c0@PyxisInnovation.local>
References: <00d501c64303$d28ac330$1b00a8c0@PyxisInnovation.local>
Message-ID: <440F6D21.6020904@pobox.com>

Marc A. Lepage wrote:
> Thanks Frank!
> 
> Just to clarify, the CInt16 type is two signed 16-bit shorts? So each
> has a range of -32768 to 32767? Or are they also 0 to 255?

Marc,

That is correct.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Wed Mar  8 19:29:41 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Contributor Agreement
Message-ID: <440F76F5.1080605@pobox.com>

GDAL Contributors,

As part of the formalization process in GDAL joining OSGeo, it is anticipated
that all committers for OSGeo projects, including GDAL, will need to sign
a "contributor agreement".

I would appreciate it if all developers who are currently GDAL committers,
or who might be interested in becoming a GDAL committer could review the
proposed CLA (individual contributor license agreement) and/or the
CCLA (Corporate Contributor License Agreement) at:

   http://wiki.osgeo.org/index.php/Contributor_Agreement

Anyone providing contributions strictly on their own time would sign
the CLA while anyone doing so as part of work for an organization would
need to sign the CCLA.

So, please comment on whether you would have any personal issues with the
agreement, and if applicable also whether your employer would have any
issues with the CCLA.

Feedback can be directed to gdal-dev or back directly to me.

The CLA/CCLA is one step on the road to "incubation", or migration of the
project into OSGeo.  Those interested in the OSGeo incubation process can
visit:

   http://incubator.osgeo.org/

I am acting as GDAL/OGR representative to the OSGeo incubator (as well as
chairing the Incubator).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From MChapman at sanz.com  Wed Mar  8 21:29:26 2006
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Contributor Agreement
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C3AD@mailman.san.com>

Frank,
 
Where and how do we send the signed agreement?

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Wednesday, March 08, 2006 5:30 PM
To: gdal-dev
Subject: [Gdal-dev] Contributor Agreement

GDAL Contributors,

As part of the formalization process in GDAL joining OSGeo, it is
anticipated that all committers for OSGeo projects, including GDAL, will
need to sign a "contributor agreement".

I would appreciate it if all developers who are currently GDAL
committers, or who might be interested in becoming a GDAL committer
could review the proposed CLA (individual contributor license agreement)
and/or the CCLA (Corporate Contributor License Agreement) at:

   http://wiki.osgeo.org/index.php/Contributor_Agreement

Anyone providing contributions strictly on their own time would sign the
CLA while anyone doing so as part of work for an organization would need
to sign the CCLA.

So, please comment on whether you would have any personal issues with
the agreement, and if applicable also whether your employer would have
any issues with the CCLA.

Feedback can be directed to gdal-dev or back directly to me.

The CLA/CCLA is one step on the road to "incubation", or migration of
the project into OSGeo.  Those interested in the OSGeo incubation
process can
visit:

   http://incubator.osgeo.org/

I am acting as GDAL/OGR representative to the OSGeo incubator (as well
as chairing the Incubator).

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF,
http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Mar  8 21:55:59 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Contributor Agreement
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C3AD@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946502F9C3AD@mailman.san.com>
Message-ID: <440F993F.3090307@pobox.com>

Chapman, Martin wrote:
> Frank,
>  
> Where and how do we send the signed agreement?

Martin,

It is still just "draft", and is likely to change.  For now we are
just soliciting feedback on whether it would be acceptable, and suggestions
for changes.  We it is finalized the agreements would presumably be faxed
to the OSGeo world headquarters megaplex.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From MChapman at sanz.com  Wed Mar  8 22:36:28 2006
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Contributor Agreement
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C3AE@mailman.san.com>

Frank,

Ok, thanks for the info.  By the way did you get a chance to look at the
demo I sent?

Martin 

-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
Warmerdam
Sent: Wednesday, March 08, 2006 7:56 PM
To: Chapman, Martin
Cc: gdal-dev
Subject: Re: [Gdal-dev] Contributor Agreement

Chapman, Martin wrote:
> Frank,
>  
> Where and how do we send the signed agreement?

Martin,

It is still just "draft", and is likely to change.  For now we are just
soliciting feedback on whether it would be acceptable, and suggestions
for changes.  We it is finalized the agreements would presumably be
faxed to the OSGeo world headquarters megaplex.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF,
http://osgeo.org



From bnagesh at nio.org  Wed Mar  8 23:02:49 2006
From: bnagesh at nio.org (Nagesh Bhatkar)
Date: Wed Nov 21 11:50:02 2007
Subject: ***POSSIBLE SPAM*** Re: [Gdal-dev] gdal-1.3.1 installation:
	gdal-config, gdal_translate, gdalinfo all show different versions
In-Reply-To: <440EDC47.5020400@pobox.com>
References: <440E74FD.2030706@nio.org> <440EDC47.5020400@pobox.com>
Message-ID: <440FA8E9.8050402@nio.org>

Hey Franks,
Thanks for sharing that information about 
gdal-config,gdal_translate,gdalinfo.
I used urpme gdal which solved my problem.and if this situation arises 
again
i will try out what you suggested.
Thanking you,


Regards

Nagesh



Frank Warmerdam wrote:

> Nagesh Bhatkar wrote:
>
>> Dear GDAL Users,
>> I installed gdal-1.3.1 on mandriva 2006,
>> now i get the following
>>
>> gdal-config --version
>> 1.3.1
>> which  gdal-config
>> /usr/local/bin/gdal-config
>>
>> gdal_translate --version
>> GDAL 1.2.6.0, released 2005/03/13
>> which gdal_translate
>> /usr/local/bin/gdal_translate
>
> ...
>
>> If i want to remove all existing installations (if any) of the gdal 
>> library,
>> what are the steps i need to follow. So that i can install the new 
>> version
>> fresh.
>
>
> Nagesh,
>
> The difference between gdal-config and gdal_translate or gdalinfo is that
> gdal-config is reporting the version burned into the "mainline" (the
> file /usr/local/bin/gdal-config) while the others are reporting the
> version in the shared library (libgdal.so).  So, presumably what is
> happening is a different shared library is being picked up and used.
> Like /usr/lib/libgdal.so.
>
> You can find out what shared libraries are being used with the ldd
> command.
>
> eg.
> ldd /usr/local/bin/gdalinfo
>
> How to remove all existing installations depends on how they were 
> installed.
> You might want to do "locate libgdal" to find installed versions of the
> library.
>
> Best regards,



From s_jubeh at yahoo.com  Thu Mar  9 03:20:34 2006
From: s_jubeh at yahoo.com (salah jubeh)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Link error
Message-ID: <20060309082034.63293.qmail@web52702.mail.yahoo.com>

Hi guys
  I am trying to compile GDAL with HDF support , i edit the nmake file but i got this link error massage
  
  LINK : fatal error LNK1104: cannot open file 'HD421m.lib'
		
---------------------------------
 Yahoo! Mail
 Use Photomail to share photos without annoying attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060309/2325ad0d/attachment.html
From pieter.bekaert at incgeo.be  Thu Mar  9 03:36:28 2006
From: pieter.bekaert at incgeo.be (Pieter Bekaert)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] OGRSpatialReference: delete/Dereference crashes under MS
	Visual Studio (GDAL 1.3.1)
Message-ID: <1141893388.16456.6.camel@mickey.incgeo>

While porting some code to Visual Studio, the following problem has
occurred:

Deleting (or dereferencing when the counter == 1) in our setup causes an
exception to be thrown. This happens even with the following trivial
piece of code:
...
{
	OGRSpatialReference* ogrsr = new OGRSpatialReference();
	delete ogrsr;
}

I searched the bug list but didn't find anything relevant.

We started from gdal131.zip and tried it with Visual Studio 2003.

Any suggestions?

Pieter


From lists at b-open-solutions.it  Thu Mar  9 04:23:51 2006
From: lists at b-open-solutions.it (Alessandro Amici)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Contributor Agreement
In-Reply-To: <440F76F5.1080605@pobox.com>
References: <440F76F5.1080605@pobox.com>
Message-ID: <200603091023.51176.lists@b-open-solutions.it>


Frank,

Alle 01:29, gioved? 9 marzo 2006, Frank Warmerdam ha scritto:
> As part of the formalization process in GDAL joining OSGeo, it is
> anticipated that all committers for OSGeo projects, including GDAL,
> will need to sign a "contributor agreement".

do you need (or just appretiate) former contributors/committers to sign 
the agreement as well?

if so i would gladly find the time to look at it.

cheers,
alessandro

-- 
B-Open Solutions srl - http://www.bopen.it/


From neteler at itc.it  Thu Mar  9 06:04:19 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
Message-ID: <20060309110419.GM27026@bartok.itc.it>

Hi,

when converting the
  Landscan Global Population 2000 Database
from
  http://www.fao.org/geonetwork/srv/en/metadata.show?id=1261

which is
  504K    ./info
  167M    ./pop2000
big, a resulting IMG file becomes:
  3.5G    pop2000.ige
  8.0K    pop2000.img
which is pretty much more (for free :-)

I used to convert
 gdal_translate -of HFA pop2000 pop2000.img

Here the gdalinfo output:

gdalinfo -mm pop2000
Driver: AIG/Arc/Info Binary Grid
Size is 43200, 21120
Coordinate System is `'
Origin = (-180.000000,86.000000)
Pixel Size = (0.00833333,-0.00833333)
Corner Coordinates:
Upper Left  (-180.0000000,  86.0000000)
Lower Left  (-180.0000000, -90.0000000)
Upper Right ( 180.0000000,  86.0000000)
Lower Right ( 180.0000000, -90.0000000)
Center      (  -0.0000000,  -2.0000000)
Band 1 Block=256x4 Type=Int32, ColorInterp=Undefined
  Min=0.000 Max=159004.000   Computed Min/Max=0.000,159004.000
  NoData Value=-2.14748e+09

gdalinfo -mm pop2000.img
Driver: HFA/Erdas Imagine Images (.img)
Size is 43200, 21120
Coordinate System is:
LOCAL_CS["Unknown",
    UNIT["meters",1]]
Origin = (-180.000000,86.000000)
Pixel Size = (0.00833333,-0.00833333)
Corner Coordinates:
Upper Left  (-180.0000000,  86.0000000)
Lower Left  (-180.0000000, -90.0000000)
Upper Right ( 180.0000000,  86.0000000)
Lower Right ( 180.0000000, -90.0000000)
Center      (  -0.0000000,  -2.0000000)
Band 1 Block=64x64 Type=Int32, ColorInterp=Undefined
  Description = Layer_1
    Computed Min/Max=-2147483647.000,159004.000
  Metadata:
    LAYER_TYPE=athematic

Apparently the NoData isn't passed to IMG.
Is the created IMG file probably uncompressed
which leads to this big file size?

Best regards

 Markus


From s_jubeh at yahoo.com  Thu Mar  9 07:16:48 2006
From: s_jubeh at yahoo.com (salah jubeh)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDAL + Link Error 
Message-ID: <20060309121648.79851.qmail@web52710.mail.yahoo.com>

Hello Guys
   
  I have downloaded HDF distribution from their web site the distribution seems to be built by VC7 , the distribution has two folders debug and release.
   
  I tried to build gdal with HDF support but it failed it give me a link error.
  I have edited gdal  nmake.opt to specify the hdf location folder , i specefy it like this
   
  # Uncomment the following and update to enable NCSA HDF Release 4 support.
  HDF4_DIR = C:\projects\42r1-win\release
  HDF4_LIB = /LIBPATH:$(HDF4_DIR)\lib Ws2_32.lib
   
  why i get the link error 
   
  LINK : fatal error LNK1104: cannot open file 'HD421m.lib'
   
  I checked this file and it is exist in 
  C:\projects\42r1-win\release\dll
   
  Also what is Ws2_32.lib i have nothing like this in the HDF distribution folder.
   
  Regards

		
---------------------------------
Yahoo! Mail
Bring photos to life! New PhotoMail  makes sharing a breeze. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060309/56504ff0/attachment.html
From ari.jolma at tkk.fi  Thu Mar  9 08:47:41 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Some documentation
Message-ID: <441031FD.7070504@tkk.fi>

I wrote some documentation on the software I've developed. I boldly gave
it the title "Perl for geoinformatics".

This is perhaps a bit off-topic for gdal-dev, but the software rests on
its solid foundation (and its bit shaky Swig/Perl interface) and,
judging myself, shows some nifty tools.

The page is http://map.hut.fi/PerlForGeoinformatics/ and no, it is not a
wiki, it just uses a css stolen from a wiki site. It is one page (7
pages printed) but it has links to other files on http://map.hut.fi/
such as the man pages of the gdal module and other modules like
Geo::Raster, Gtk2::Ex::Geo. I also included the screenshots of the
dialog boxes I recently developed for Gtk2::Ex::Geo. I think this
dialog: http://map.hut.fi/PerlForGeoinformatics/OGROpen.png could be
especially interesting for OGR users. It's documented in the main page.

Since I finally got something written, I'm thinking this is something
I'll build on. I mean that this seems to be a better start for what I
tried to produce for the freegisbook.

Cheers,

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From warmerdam at pobox.com  Thu Mar  9 08:50:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDAL + Link Error
In-Reply-To: <20060309121648.79851.qmail@web52710.mail.yahoo.com>
References: <20060309121648.79851.qmail@web52710.mail.yahoo.com>
Message-ID: <4410328D.6090006@pobox.com>

salah jubeh wrote:
> I have edited gdal  nmake.opt to specify the hdf location folder , i 
> specefy it like this
>  
> # Uncomment the following and update to enable NCSA HDF Release 4 support.
> HDF4_DIR = C:\projects\42r1-win\release
> HDF4_LIB = /LIBPATH:$(HDF4_DIR)\lib Ws2_32.lib
>  
> why i get the link error
>  
> LINK : fatal error LNK1104: cannot open file 'HD421m.lib'
>  
> I checked this file and it is exist in
> C:\projects\42r1-win\release\dll

Salah,

I would suggest you change to something like:

HDF4_DIR = C:\projects\42r1-win
HDF4_LIB = /LIBPATH:$(HDF4_DIR)\release\dll Ws2_32.lib

It seems the NCSA has changed the layout of their distributed
binaries.

> Also what is Ws2_32.! lib i have nothing like this in the HDF 
> distribution folder.

It is a Microsoft library.  I can't recall what it does, though you
could check in google.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Thu Mar  9 09:14:28 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
In-Reply-To: <20060309110419.GM27026@bartok.itc.it>
References: <20060309110419.GM27026@bartok.itc.it>
Message-ID: <44103844.1000209@pobox.com>

Markus Neteler wrote:
> Hi,
> 
> when converting the
>   Landscan Global Population 2000 Database
> from
>   http://www.fao.org/geonetwork/srv/en/metadata.show?id=1261
> 
> which is
>   504K    ./info
>   167M    ./pop2000
> big, a resulting IMG file becomes:
>   3.5G    pop2000.ige
>   8.0K    pop2000.img
> which is pretty much more (for free :-)
...
> Apparently the NoData isn't passed to IMG.
> Is the created IMG file probably uncompressed
> which leads to this big file size?

Markus,

Just yesterday I came to the realization that there is no "nodata"
support in the Erdas Imagine driver, and in fact, I have no idea how
nodata values are represented in .img (HFA).  If anyone has a modest
sized .img file with properly nodata values I would appreciate a
copy so I can investigate.

On the size issue, arc/info binary grids use various compression
techniques and it is clear that in this case they are quite effective.
By default imagine files are uncompressed.

You might want to try the COMPRESSED option for the HFA driver.  It
was contributed, and I haven't used it much, but it enables a simple
compression type in the imagine format.

eg.

gdal_translate -co COMPRESSED=YES in out

If the imagine driver determines an "ige spill file" is needed it
is possible that the compression will not work.  Let me know if
there are problems.  You might also test on a section of the file to
verify that compression does work for smaller datasets.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Thu Mar  9 09:39:45 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] OGRSpatialReference: delete/Dereference crashes under
	MS	Visual Studio (GDAL 1.3.1)
In-Reply-To: <1141893388.16456.6.camel@mickey.incgeo>
References: <1141893388.16456.6.camel@mickey.incgeo>
Message-ID: <44103E31.1040000@pobox.com>

Pieter Bekaert wrote:
> While porting some code to Visual Studio, the following problem has
> occurred:
> 
> Deleting (or dereferencing when the counter == 1) in our setup causes an
> exception to be thrown. This happens even with the following trivial
> piece of code:
> ...
> {
> 	OGRSpatialReference* ogrsr = new OGRSpatialReference();
> 	delete ogrsr;
> }
> 
> I searched the bug list but didn't find anything relevant.
> 
> We started from gdal131.zip and tried it with Visual Studio 2003.
> 
> Any suggestions?

Pieter,

Do you know if you are using the same heap for your application code,
and OGR in this case?  For instance, are both compiled with /MD to
us MSVCRT.DLL (or modern equivelent)?

If not, then I suspect the problem relates to cross-heap issues.  The
solution would either be to use the C API instead of the C++ API or
to use alternate methods to create and destroy at least.

eg.
	OGRSpatialReference *ogrsrs = (OGRSpatialReference *)
                         OSRNewSpatialReference( NULL );

         ...

         OGRDestroySpatialReference( ogrsrs );

I realize it doesn't help anything, but at this point I would also
like to say that it is a *great* frustration to me that Microsoft
continues to propagate this whole "heap per DLL" paradyme which makes
it very hard to port C++ libraries from platforms compliant with the
C++ language standard.

I try to be platform agnostic, but windows consistently makes my life
a misery!

/me breathes deeply, and steps off the soapbox.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From t.r.decarlo at larc.nasa.gov  Thu Mar  9 09:41:15 2006
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
In-Reply-To: <20060309110419.GM27026@bartok.itc.it>
Message-ID: <034b01c64387$859e0710$959877c6@cts1149>

Markus,
The IMG format doesn't support the concept of "NODATA", and by default does
not use compression. It does support ESRI-style run length encoding, but I
haven't seen it used much. You might do better converting to geotiff which
supports LZW compression and Frank has extended it to support a NODATA tag.

--
Thom DeCarlo
------------------------------------------------------
           Experience is a wonderful thing
It allows you to recognize a mistake when you make it again.

> -----Original Message-----
> From: Markus Neteler
> Sent: Thursday, March 09, 2006 6:04 AM
> To: GDAL-dev list
> Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
> 
> Hi,
> 
> when converting the
>   Landscan Global Population 2000 Database
> from
>   http://www.fao.org/geonetwork/srv/en/metadata.show?id=1261
> 
[snip]
> 
> Apparently the NoData isn't passed to IMG.
> Is the created IMG file probably uncompressed
> which leads to this big file size?
> 
> Best regards
> 
>  Markus
> 



From mlepage at pyxisinnovation.com  Thu Mar  9 10:26:53 2006
From: mlepage at pyxisinnovation.com (Marc A. Lepage)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDALColorEntry? GDT_CInt16?
In-Reply-To: <440F6D21.6020904@pobox.com>
Message-ID: <00e901c6438d$e522ca30$1b00a8c0@PyxisInnovation.local>


> > Just to clarify, the CInt16 type is two signed 16-bit shorts? So
each
> > has a range of -32768 to 32767? Or are they also 0 to 255?
> 
> That is correct.
 
So two signed 16-bit -32768 to 32767 shorts
(and not two shorts storing 0 to 255).

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 268.2.1/277 - Release Date: 3/8/2006
 


From mirza at seznam.cz  Thu Mar  9 10:30:53 2006
From: mirza at seznam.cz (mirza)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr MID/MIF append
Message-ID: <44104A2D.3080306@seznam.cz>

Hello,

I have problem trying to convert multiple shape files to single MID/MIF. 
Every time I run:

ogr2ogr -append -dsco APPEND=YES -lco APPEND=YES -f "MapInfo File" 
test.mif my_shape.shp

it creates new mid/mif (rewrites old one).

Any help?

Mirza

From s_jubeh at yahoo.com  Thu Mar  9 10:58:10 2006
From: s_jubeh at yahoo.com (salah jubeh)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDAL + Link Error
In-Reply-To: <4410328D.6090006@pobox.com>
Message-ID: <20060309155810.17763.qmail@web52701.mail.yahoo.com>

Hello 
  
 I couldn't build gdal with the new release , i have  solve the link error , but after that i get many error "unresolved  external ...", also i compared the structure of the two versions the  are much different.
  
 I used older version which is HDF41r5 ,  the code compiled but you have to copy 4 lib library to gdal home which  are hd415.lib, hm415.lib, hd415m.lib, hm415m.lib

Frank Warmerdam <warmerdam@pobox.com> wrote:  salah jubeh wrote:
> I have edited gdal  nmake.opt to specify the hdf location folder , i 
> specefy it like this
>  
> # Uncomment the following and update to enable NCSA HDF Release 4 support.
> HDF4_DIR = C:\projects\42r1-win\release
> HDF4_LIB = /LIBPATH:$(HDF4_DIR)\lib Ws2_32.lib
>  
> why i get the link error
>  
> LINK : fatal error LNK1104: cannot open file 'HD421m.lib'
>  
> I checked this file and it is exist in
> C:\projects\42r1-win\release\dll

Salah,

I would suggest you change to something like:

HDF4_DIR = C:\projects\42r1-win
HDF4_LIB = /LIBPATH:$(HDF4_DIR)\release\dll Ws2_32.lib

It seems the NCSA has changed the layout of their distributed
binaries.

> Also what is Ws2_32.! lib i have nothing like this in the HDF 
> distribution folder.

It is a Microsoft library.  I can't recall what it does, though you
could check in google.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



		
---------------------------------
 Yahoo! Mail
 Use Photomail to share photos without annoying attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060309/5e2e4229/attachment.html
From jluis at ualg.pt  Thu Mar  9 11:02:19 2006
From: jluis at ualg.pt (jluis)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Re: Hdf +gdal
In-Reply-To: <20060309123753.51072.qmail@web52702.mail.yahoo.com>
References: <20060309123753.51072.qmail@web52702.mail.yahoo.com>
Message-ID: <4410518B.6080905@ualg.pt>

salah jubeh wrote:
> Dear Joaquim Luis
>  
> Did you solve the issue of building gdal with HDF support i have the 
> same problem
>  

Salah,
I should have left a note somewhere on what I have donne, but I didn't.
The HDF42r1 directory has two directories with libraries
'lib' and 'dll'
What I did was copy the libraries, that the compiler was complaining of not
finding, from one of those subdirectories to the other.
It was pedestrian, but it worked.

I ended up with this content
lib:
hd421.lib       hd421m.lib      hm421m.dll
hd421m.dll      hm421.lib       hm421m.lib

dll:
hd421m.dll      hd421m.lib      hm421m.dll      hm421m.lib

Joaquim Luis

From packalen at cs.joensuu.fi  Thu Mar  9 11:40:42 2006
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
In-Reply-To: <034b01c64387$859e0710$959877c6@cts1149>
References: <034b01c64387$859e0710$959877c6@cts1149>
Message-ID: <Pine.GSO.4.61.0603091837500.23173@cs.joensuu.fi>

Hi,

More clarification about this IMAGINE nodata issue. IMAGINE prefers the 
term BACKGROUND. It isn't strictly "notada" as we understand the concept. 
Often zero is used as background value but it cannot be defined in 
IMG-file (at least I haven't found such a functionality in 10+ years). 
Many dialogs has an option "Ignore Zero in Stats" which serves a kind of 
surrogate to nodata functionality. Some import dialogs allows user to 
select whether "nodata" is converted to zero or e.g. minimum value of the 
current datatype.

Best regards
Petteri

================================
Petteri Packal?n 
University of Joensuu 
Faculty of Forestry 
P.O. Box 111 
80101 Joensuu
Finland 
e-mail: packalen@cs.joensuu.fi 
================================


On Thu, 9 Mar 2006, Thom DeCarlo wrote:

> Markus,
> The IMG format doesn't support the concept of "NODATA", and by default does
> not use compression. It does support ESRI-style run length encoding, but I
> haven't seen it used much. You might do better converting to geotiff which
> supports LZW compression and Frank has extended it to support a NODATA tag.
>
> --
> Thom DeCarlo
> ------------------------------------------------------
>           Experience is a wonderful thing
> It allows you to recognize a mistake when you make it again.
>
>> -----Original Message-----
>> From: Markus Neteler
>> Sent: Thursday, March 09, 2006 6:04 AM
>> To: GDAL-dev list
>> Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
>>
>> Hi,
>>
>> when converting the
>>   Landscan Global Population 2000 Database
>> from
>>   http://www.fao.org/geonetwork/srv/en/metadata.show?id=1261
>>
> [snip]
>>
>> Apparently the NoData isn't passed to IMG.
>> Is the created IMG file probably uncompressed
>> which leads to this big file size?
>>
>> Best regards
>>
>>  Markus
>>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Thu Mar  9 11:45:09 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr MID/MIF append
In-Reply-To: <44104A2D.3080306@seznam.cz>
References: <44104A2D.3080306@seznam.cz>
Message-ID: <44105B95.5070406@pobox.com>

mirza wrote:
> Hello,
> 
> I have problem trying to convert multiple shape files to single MID/MIF. 
> Every time I run:
> 
> ogr2ogr -append -dsco APPEND=YES -lco APPEND=YES -f "MapInfo File" 
> test.mif my_shape.shp
> 
> it creates new mid/mif (rewrites old one).

Mirza,

The MID/MIF driver does not support append.  The TAB driver doesn't
seem to support update to an existing file (ie. append) either.

You will pretty much need to append all your data into one big
shapefile and then translate to mapinfo format.

BTW, I think you might want to use -update and -append options.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Thu Mar  9 11:47:16 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDALColorEntry? GDT_CInt16?
In-Reply-To: <00e901c6438d$e522ca30$1b00a8c0@PyxisInnovation.local>
References: <00e901c6438d$e522ca30$1b00a8c0@PyxisInnovation.local>
Message-ID: <44105C14.3020609@pobox.com>

Marc A. Lepage wrote:
>>> Just to clarify, the CInt16 type is two signed 16-bit shorts? So
> each
>>> has a range of -32768 to 32767? Or are they also 0 to 255?
>> That is correct.
>  
> So two signed 16-bit -32768 to 32767 shorts
> (and not two shorts storing 0 to 255).

yes, two signed 16-bit -32768 to 32767 shorts.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mirza at seznam.cz  Thu Mar  9 12:00:10 2006
From: mirza at seznam.cz (mirza)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr MID/MIF append
In-Reply-To: <44105B95.5070406@pobox.com>
References: <44104A2D.3080306@seznam.cz> <44105B95.5070406@pobox.com>
Message-ID: <44105F1A.4070008@seznam.cz>

Frank Warmerdam wrote:
> You will pretty much need to append all your data into one big
> shapefile and then translate to mapinfo format.

That solves my problem, thanks.

Mirza

From t.r.decarlo at larc.nasa.gov  Thu Mar  9 12:18:51 2006
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23344CA11@COMAIL01.digitalglobe.com>
Message-ID: <036d01c6439d$897a7bf0$959877c6@cts1149>

Ethan,
So... if I have a shapefile that uses a latlong/WGS84 projection whose EPSG
is 4326, then I use "shp2pgsql -s 4326 ...."?

Oh, goody.... another email list. I think that will make an even dozen. 

Thanks,
Thom

OBTW, Frank... did you see my comment that the postgresql driver
documentation page has a mistake in it?

--
Thom DeCarlo
---------------------------------------------------------
      Given sufficient time and money, all things are possible.
  In lieu of time and money, caffeine and aspirin may also work.


> -----Original Message-----
> From: Ethan Alpert
> Sent: Wednesday, March 08, 2006 4:02 PM
> To: Thom DeCarlo; gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> 
> 
> SRID == Spatial Reference ID
> 
> It defines the coordinate system and projection of your data. Once you
> get to the mapserver part you'll really need to understand it to get
> maps displayed or to do spatial operations on your data like intersect,
> etc...
> 
> There is a mapserver user list: MAPSERVER-USERS@LISTS.UMN.EDU
> 
> -e
> 
> -----Original Message-----
> From: Thom DeCarlo
> Sent: Wednesday, March 08, 2006 1:32 PM
> To: gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> Ethan (and everybody else...),
> It looks like you folks have already hashed out all of my problems. ;-)
> I
> think the *real* problem is that I'm trying to learn SQL, PostgreSQL,
> PostGIS, MapServer, and Apache all in one swell foop.
> 
> That said... I was trying to load the shapefiles into a PostgreSQL
> database
> using the ogr2ogr command. I was blindly following the examples given on
> the
> PostgreSQL page of the gdal.org site.
> (http://www.gdal.org/ogr/drv_pg.html)
> The example there says:
> 
> % ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
>      -lco OVERWRITE=yes CompleteChain
> % ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
>      CompleteChain
> 
> Unfortunately, as you show in your example, the commands should actually
> look like this:
> 
> % ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
>      -lco OVERWRITE=yes -nln CompleteChain
>                         ^^^^
> % ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio \
>      -nln CompleteChain
>      ^^^^
> 
> When I add the "-nln" the new lay is properly created and appended. This
> error is duplicated on the PostGIS OGR Wiki page
> http://postgis.refractions.net/support/wiki/index.php?OGR%20Examples
> 
> Now if I can just figure out what you mean by that "SRID" thingy....
> 
> Thom
> 
> --
> Thom DeCarlo
> -------------------------------------------------------
>      That Which Does Not Kill Me
>        Can Still Hurt Really Bad.
> 
> > -----Original Message-----
> > From: Ethan Alpert
> > Sent: Tuesday, March 07, 2006 5:55 PM
> > To: Thom DeCarlo; gdal-dev@lists.maptools.org
> > Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> >
> >
> > Are you trying to load the shapefiles? If so post your command line.
> >
> >
> > Should be something like:
> >
> > Ogr2ogr -f PostgresSQL "PG:dbname=<dbname>" your_shapefile.shp -nln
> > layer
> >
> > There are many creation options -lco's you may want to use but it
> would
> > be helpful to know what command line you used as well as what version
> of
> > GDAL.
> >
> > One important thing is to makesure you have granted your database user
> > permissions to modify the postgis geometry_columns table. But you'd
> get
> > an error if that happened.
> >
> > -e
> >
> > -----Original Message-----
> > From: Thom DeCarlo
> > Sent: Tuesday, March 07, 2006 3:22 PM
> > To: gdal-dev@lists.maptools.org
> > Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> >
> > I've set up my PostGIS-enabled PostgreSQL database and created a
> dataset
> > called "spatial". I have several shapefiles that I want to load into a
> > single layer. I found the instructions on the gdal website but when I
> > specify a layername at the end of the ogr2ogr command it quietly
> fails.
> > That
> > is, no messages of any kind either at the command line nor in the
> pgsql
> > logfile. If I don't specify a layername the command works just fine.
> >
> > Are there known problems with this function? I'm using PostGIS 1.1.0
> and
> > PostgreSQL 8.1.1 on RHEL3.
> >
> > Thanks,
> > Thom
> >
> > --
> > Thom DeCarlo
> > -------------------------------------------------------
> >              Who is General Failure
> >          and why is he reading my disk?
> >
> >



From neteler at itc.it  Thu Mar  9 12:41:21 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
In-Reply-To: <034b01c64387$859e0710$959877c6@cts1149>
References: <20060309110419.GM27026@bartok.itc.it>
	<034b01c64387$859e0710$959877c6@cts1149>
Message-ID: <20060309174121.GF27767@bartok.itc.it>

Thanks, Frank and Thom,

 I'll try.

Markus

On Thu, Mar 09, 2006 at 09:41:15AM -0500, Thom DeCarlo wrote:
> Markus,
> The IMG format doesn't support the concept of "NODATA", and by default does
> not use compression. It does support ESRI-style run length encoding, but I
> haven't seen it used much. You might do better converting to geotiff which
> supports LZW compression and Frank has extended it to support a NODATA tag.
> 
> --
> Thom DeCarlo
> ------------------------------------------------------
>            Experience is a wonderful thing
> It allows you to recognize a mistake when you make it again.
> 
> > -----Original Message-----
> > From: Markus Neteler
> > Sent: Thursday, March 09, 2006 6:04 AM
> > To: GDAL-dev list
> > Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
> > 
> > Hi,
> > 
> > when converting the
> >   Landscan Global Population 2000 Database
> > from
> >   http://www.fao.org/geonetwork/srv/en/metadata.show?id=1261
> > 
> [snip]
> > 
> > Apparently the NoData isn't passed to IMG.
> > Is the created IMG file probably uncompressed
> > which leads to this big file size?
> > 
> > Best regards
> > 
> >  Markus
> > 
> 
> 
> 

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From warmerdam at pobox.com  Thu Mar  9 12:45:52 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
In-Reply-To: <Pine.GSO.4.61.0603091837500.23173@cs.joensuu.fi>
References: <034b01c64387$859e0710$959877c6@cts1149>
	<Pine.GSO.4.61.0603091837500.23173@cs.joensuu.fi>
Message-ID: <441069D0.7020600@pobox.com>

Petteri Packalen wrote:
> Hi,
> 
> More clarification about this IMAGINE nodata issue. IMAGINE prefers the 
> term BACKGROUND. It isn't strictly "notada" as we understand the 
> concept. Often zero is used as background value but it cannot be defined 
> in IMG-file (at least I haven't found such a functionality in 10+ 
> years). Many dialogs has an option "Ignore Zero in Stats" which serves a 
> kind of surrogate to nodata functionality. Some import dialogs allows 
> user to select whether "nodata" is converted to zero or e.g. minimum 
> value of the current datatype.

Petteri,

That helps explain why I haven't run into it before.  Here I thought I
was just being stupid.

Peng Gao kindly sent me an example .img file which my .img dumper
shows as having this node:

     Eimg_NonInitializedValue(Eimg_NonInitializedValue) @ 1334574 + 21 @ 1334702
     + valueBD = 1x1 basedata of type 3

The 1x1 basedata is presumably the nodata value (0).

I will add support for this for nodata but I haven't noticed this before,
so I would suspect it is either relatively new, or perhaps still not
extensively used in Imagine.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ealpert at digitalglobe.com  Thu Mar  9 15:26:33 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23344CADB@COMAIL01.digitalglobe.com>


Yep -s 4326 That'll do it. Make sure you have granted select priv's on
spatial_ref_sys and read/write priv's to your user for geometry_columns
and you should be good to go.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Thom DeCarlo
Sent: Thursday, March 09, 2006 10:19 AM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...

Ethan,
So... if I have a shapefile that uses a latlong/WGS84 projection whose
EPSG
is 4326, then I use "shp2pgsql -s 4326 ...."?

Oh, goody.... another email list. I think that will make an even dozen. 

Thanks,
Thom

OBTW, Frank... did you see my comment that the postgresql driver
documentation page has a mistake in it?

--
Thom DeCarlo
---------------------------------------------------------
      Given sufficient time and money, all things are possible.
  In lieu of time and money, caffeine and aspirin may also work.


> -----Original Message-----
> From: Ethan Alpert
> Sent: Wednesday, March 08, 2006 4:02 PM
> To: Thom DeCarlo; gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> 
> 
> SRID == Spatial Reference ID
> 
> It defines the coordinate system and projection of your data. Once you
> get to the mapserver part you'll really need to understand it to get
> maps displayed or to do spatial operations on your data like
intersect,
> etc...
> 
> There is a mapserver user list: MAPSERVER-USERS@LISTS.UMN.EDU
> 
> -e
> 
> -----Original Message-----
> From: Thom DeCarlo
> Sent: Wednesday, March 08, 2006 1:32 PM
> To: gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> 
> Ethan (and everybody else...),
> It looks like you folks have already hashed out all of my problems.
;-)
> I
> think the *real* problem is that I'm trying to learn SQL, PostgreSQL,
> PostGIS, MapServer, and Apache all in one swell foop.
> 
> That said... I was trying to load the shapefiles into a PostgreSQL
> database
> using the ogr2ogr command. I was blindly following the examples given
on
> the
> PostgreSQL page of the gdal.org site.
> (http://www.gdal.org/ogr/drv_pg.html)
> The example there says:
> 
> % ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
>      -lco OVERWRITE=yes CompleteChain
> % ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio
\
>      CompleteChain
> 
> Unfortunately, as you show in your example, the commands should
actually
> look like this:
> 
> % ogr2ogr -f PostgreSQL PG:dbname=warmerda tiger_michigan \
>      -lco OVERWRITE=yes -nln CompleteChain
>                         ^^^^
> % ogr2ogr -update -append -f PostgreSQL PG:dbname=warmerda tiger_ohio
\
>      -nln CompleteChain
>      ^^^^
> 
> When I add the "-nln" the new lay is properly created and appended.
This
> error is duplicated on the PostGIS OGR Wiki page
> http://postgis.refractions.net/support/wiki/index.php?OGR%20Examples
> 
> Now if I can just figure out what you mean by that "SRID" thingy....
> 
> Thom
> 
> --
> Thom DeCarlo
> -------------------------------------------------------
>      That Which Does Not Kill Me
>        Can Still Hurt Really Bad.
> 
> > -----Original Message-----
> > From: Ethan Alpert
> > Sent: Tuesday, March 07, 2006 5:55 PM
> > To: Thom DeCarlo; gdal-dev@lists.maptools.org
> > Subject: RE: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> >
> >
> > Are you trying to load the shapefiles? If so post your command line.
> >
> >
> > Should be something like:
> >
> > Ogr2ogr -f PostgresSQL "PG:dbname=<dbname>" your_shapefile.shp -nln
> > layer
> >
> > There are many creation options -lco's you may want to use but it
> would
> > be helpful to know what command line you used as well as what
version
> of
> > GDAL.
> >
> > One important thing is to makesure you have granted your database
user
> > permissions to modify the postgis geometry_columns table. But you'd
> get
> > an error if that happened.
> >
> > -e
> >
> > -----Original Message-----
> > From: Thom DeCarlo
> > Sent: Tuesday, March 07, 2006 3:22 PM
> > To: gdal-dev@lists.maptools.org
> > Subject: [Gdal-dev] problem with ogr2ogr -f PostgreSQL...
> >
> > I've set up my PostGIS-enabled PostgreSQL database and created a
> dataset
> > called "spatial". I have several shapefiles that I want to load into
a
> > single layer. I found the instructions on the gdal website but when
I
> > specify a layername at the end of the ogr2ogr command it quietly
> fails.
> > That
> > is, no messages of any kind either at the command line nor in the
> pgsql
> > logfile. If I don't specify a layername the command works just fine.
> >
> > Are there known problems with this function? I'm using PostGIS 1.1.0
> and
> > PostgreSQL 8.1.1 on RHEL3.
> >
> > Thanks,
> > Thom
> >
> > --
> > Thom DeCarlo
> > -------------------------------------------------------
> >              Who is General Failure
> >          and why is he reading my disk?
> >
> >


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From s_jubeh at yahoo.com  Thu Mar  9 15:47:40 2006
From: s_jubeh at yahoo.com (salah jubeh)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDAL_TRANSLATE Problem
Message-ID: <20060309204740.68050.qmail@web52709.mail.yahoo.com>

Hello Guys
   
  I used GDAL_translate to translate from geotiff format to HDF format and again to geotiff format.
   
  imgae.tif---->image.hdf---->image2.tif
   
  I checked the  HDF file it contains all meta data like projection , transformation matrix, and another tags. also i checked the image2.tif the result was not good no geographical coordinate, system no transformation matrix.
   
  I was able to compile GDAL with two HDF library versions "HDF41r5 and 42r1-win" but the result was the same.
   
  also i did another test i convert the HDF to ASCII file
   
  image.hdf----->imag.asc
   
  the result was good i get the correct coordinate and cellsize
   
  what is the problem here is it from gtiff driver or from HDF driver and how can it be fixed
   
   
   

		
---------------------------------
Yahoo! Mail
Bring photos to life! New PhotoMail  makes sharing a breeze. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060309/0eca7af9/attachment.html
From archer at eskimo.com  Thu Mar  9 17:03:42 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Another gdal_translate problem
In-Reply-To: <20060309204740.68050.qmail@web52709.mail.yahoo.com>
References: <20060309204740.68050.qmail@web52709.mail.yahoo.com>
Message-ID: <Pine.SUN.4.58.0603091400420.12513@eskimo.com>


I'm having a problem with the latest release or the latest CVS on
SuSE 10, perhaps because of the switch to the gcc-4 compiler?
Here's the latest CVS:


> gdal_translate -a_srs EPSG:26910 48121a7_ne_1989.tif ../48121a7_ne_1989-geo.tif
Input file size is 5364, 7620
0...10...20...30...40...50...60...70...80...90...100 - done.
*** glibc detected *** double free or corruption (fasttop):
0x0806a5d8 ***
Aborted (core dumped)


> gdb gdal_translate core
...
Loaded symbols for /usr/lib/libkrb5support.so.0
#0  0xffffe410 in __kernel_vsyscall ()
(gdb) where
#0  0xffffe410 in __kernel_vsyscall ()
#1  0x4060e541 in raise () from /lib/tls/libc.so.6
#2  0x4060fdbb in abort () from /lib/tls/libc.so.6
#3  0x406448b5 in __libc_message () from /lib/tls/libc.so.6
#4  0x4064a842 in malloc_printerr () from /lib/tls/libc.so.6
#5  0x4064b1f4 in free () from /lib/tls/libc.so.6
#6  0x403fa48d in _TIFFfree () from /usr/lib/libtiff.so.3
#7  0x403d0600 in TIFFGetConfiguredCODECs () from
/usr/lib/libtiff.so.3
#8  0x403d151d in _TIFFsetDoubleArray () from /usr/lib/libtiff.so.3
#9  0x403d1d18 in TIFFVSetField () from /usr/lib/libtiff.so.3
#10 0x403d1dde in TIFFSetField () from /usr/lib/libtiff.so.3
#11 0x400d08ab in WriteMDMetadata () from
/usr/local/lib/libgdal.so.1
#12 0x400d099a in GTiffDataset::WriteMetadata () from
/usr/local/lib/libgdal.so.1
#13 0x400d0e14 in GTiffDataset::~GTiffDataset () from
/usr/local/lib/libgdal.so.1
#14 0x4016111d in GDALClose () from /usr/local/lib/libgdal.so.1
#15 0x0804accc in ProxyMain ()
#16 0x405fbea0 in __libc_start_main () from /lib/tls/libc.so.6
#17 0x08049721 in _start () at start.S:119
(gdb)


--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From warmerdam at pobox.com  Thu Mar  9 17:46:46 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Another gdal_translate problem
In-Reply-To: <Pine.SUN.4.58.0603091400420.12513@eskimo.com>
References: <20060309204740.68050.qmail@web52709.mail.yahoo.com>
	<Pine.SUN.4.58.0603091400420.12513@eskimo.com>
Message-ID: <4410B056.9060305@pobox.com>

Curt, WE7U wrote:
> I'm having a problem with the latest release or the latest CVS on
> SuSE 10, perhaps because of the switch to the gcc-4 compiler?
> Here's the latest CVS:
> 
> 
>> gdal_translate -a_srs EPSG:26910 48121a7_ne_1989.tif ../48121a7_ne_1989-geo.tif
> Input file size is 5364, 7620
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> *** glibc detected *** double free or corruption (fasttop):
> 0x0806a5d8 ***
> Aborted (core dumped)

Curt,

I suspect this is related to an old libtiff.  Could you try either
building GDAL with the internal libtiff, or building and installing the
latest published libtiff?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From archer at eskimo.com  Thu Mar  9 18:08:06 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Another gdal_translate problem
In-Reply-To: <4410B056.9060305@pobox.com>
References: <20060309204740.68050.qmail@web52709.mail.yahoo.com>
	<Pine.SUN.4.58.0603091400420.12513@eskimo.com>
	<4410B056.9060305@pobox.com>
Message-ID: <Pine.SUN.4.58.0603091449520.12513@eskimo.com>

On Thu, 9 Mar 2006, Frank Warmerdam wrote:

> I suspect this is related to an old libtiff.  Could you try either
> building GDAL with the internal libtiff, or building and installing the
> latest published libtiff?

What I have in there seems pretty new:

> rpm -q -a |grep tiff
libtiff-devel-3.7.3-2
tiff-3.7.3-2
libtiff-3.7.3-2


Tried this with gdal-1.3.0:

./configure --without-mysql ----with-libtiff=internal

It blew up:

../.libs/libgdal.so: undefined reference to `gtCSVReadParseLine'
../.libs/libgdal.so: undefined reference to `gtCPLError'
../.libs/libgdal.so: undefined reference to `gtCPLCalloc'
../.libs/libgdal.so: undefined reference to `gtCSLCount'
../.libs/libgdal.so: undefined reference to `gtCSVFilename'
../.libs/libgdal.so: undefined reference to `gtCPLMalloc'
../.libs/libgdal.so: undefined reference to `gtCSLDestroy'
../.libs/libgdal.so: undefined reference to `gtCPLStrdup'


Trying this now:

./configure --without-mysql --with-libz=internal --with-png=internal \
--with-jpeg=internal --with-geotiff=internal --with-libtiff=internal \
--with-gif=internal

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From archer at eskimo.com  Thu Mar  9 18:32:21 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Another gdal_translate problem
In-Reply-To: <Pine.SUN.4.58.0603091449520.12513@eskimo.com>
References: <20060309204740.68050.qmail@web52709.mail.yahoo.com>
	<Pine.SUN.4.58.0603091400420.12513@eskimo.com>
	<4410B056.9060305@pobox.com>
	<Pine.SUN.4.58.0603091449520.12513@eskimo.com>
Message-ID: <Pine.SUN.4.58.0603091531580.12513@eskimo.com>

On Thu, 9 Mar 2006, Curt, WE7U wrote:

> Trying this now:
>
> ./configure --without-mysql --with-libz=internal --with-png=internal \
> --with-jpeg=internal --with-geotiff=internal --with-libtiff=internal \
> --with-gif=internal

Still broken in the same manner.  I'll try with CVS version again
tomorrow.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From s_jubeh at yahoo.com  Fri Mar 10 04:15:29 2006
From: s_jubeh at yahoo.com (salah jubeh)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDAL_TRANSLATE Problem
In-Reply-To: <20060309204740.68050.qmail@web52709.mail.yahoo.com>
Message-ID: <20060310091529.10227.qmail@web52714.mail.yahoo.com>

Hello guys
   
  I checked the images with gdalinfo it gives me this result below but i tried two programs to open this image which are arcgis9.1 and Erdas both of them gave me that there is no coordinates, and projection system. yesterday i posted the first message because i checked the coordinates by using Erdas . 
   
  still there is a  problem here which is software compatapility.
   
   
    Projection=PROJCS["IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.10.1.6 $ $Date: 2003/10/17 16:36:51EDT $
Projection Name = Transverse Mercator
Uni",GEOGCS["IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.10.1.6 $ $Date: 2003/10/17 16:36:51EDT $
Unable to match Ellipsoid (Datum) to a Ge",DATUM["unknown",SPHEROID["unnamed",63
78137,298.2572220960423]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433
]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER
["central_meridian",24],PARAMETER["scale_factor",0.9996],PARAMETER["false_eastin
g",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]
]]
Corner Coordinates:
Upper Left  (  477701.231, 3928005.706)
Lower Left  (  477701.231, 3927667.467)
Upper Right (  478094.457, 3928005.706)
Lower Right (  478094.457, 3927667.467)
Center      (  477897.844, 3927836.587)
Band 1 Block=615x6 Type=UInt16, ColorInterp=Gray

Hello Guys
     
  I used GDAL_translate to translate from geotiff format to HDF format and again to geotiff format.
   
  imgae.tif---->image.hdf---->image2.tif
   
  I checked the  HDF file it contains all meta data like projection , transformation matrix, and another tags. also i checked the image2.tif the result was not good no geographical coordinate, system no transformation matrix.
   
  I was able to compile GDAL with two HDF library versions "HDF41r5 and 42r1-win" but the result was the same.
   
  also i did another test i convert the HDF to ASCII file
   
  image.hdf----->imag.asc
   
  the result was good i get the correct coordinate and cellsize
   
  what is the problem here is it from gtiff driver or from HDF dri! ver and how can it be fixed
   
   
   
    
---------------------------------
  Yahoo! Mail
Bring photos to life! New PhotoMail makes sharing a breeze. _______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


			
---------------------------------
 Yahoo! Mail
 Use Photomail to share photos without annoying attachments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060310/36fdfc32/attachment.html
From mirza at seznam.cz  Fri Mar 10 06:02:54 2006
From: mirza at seznam.cz (mirza)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr: double -> integer conversion problem
Message-ID: <44115CDE.4040005@seznam.cz>

Hello,

When I try to convert shapefile to mid/mif using ogr2ogr, some double 
values are converted to (overflowed) integers. For example, value 
14420300000144 in shapefile is converted to -1500011687 in .mid file. I 
submitted bug to MITAB project but same bug occurred when converting to 
CSV so maybe it is more general. Any idea?

mirza


From neteler at itc.it  Fri Mar 10 08:16:18 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
In-Reply-To: <20060309174121.GF27767@bartok.itc.it>
References: <20060309110419.GM27026@bartok.itc.it>
	<034b01c64387$859e0710$959877c6@cts1149>
	<20060309174121.GF27767@bartok.itc.it>
Message-ID: <20060310131618.GA14718@bartok.itc.it>

So, here my report:

 gdal_translate -of HFA -co COMPRESSED=YES pop2000 pop2000.img

 du -h pop2000.*
 3.5G    pop2000.ige
 8.0K    pop2000.img

 gdal_translate -co COMPRESS=DEFLATE pop2000 pop2000.tif
 du -h pop2000.*
 92.0M    pop2000.tif

Clear decision :-)

Markus

On Thu, Mar 09, 2006 at 06:41:21PM +0100, Markus Neteler wrote:
> Thanks, Frank and Thom,
> 
>  I'll try.
> 
> Markus
> 
> On Thu, Mar 09, 2006 at 09:41:15AM -0500, Thom DeCarlo wrote:
> > Markus,
> > The IMG format doesn't support the concept of "NODATA", and by default does
> > not use compression. It does support ESRI-style run length encoding, but I
> > haven't seen it used much. You might do better converting to geotiff which
> > supports LZW compression and Frank has extended it to support a NODATA tag.
> > 
> > --
> > Thom DeCarlo
> > ------------------------------------------------------
> >            Experience is a wonderful thing
> > It allows you to recognize a mistake when you make it again.
> > 
> > > -----Original Message-----
> > > From: Markus Neteler
> > > Sent: Thursday, March 09, 2006 6:04 AM
> > > To: GDAL-dev list
> > > Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
> > > 
> > > Hi,
> > > 
> > > when converting the
> > >   Landscan Global Population 2000 Database
> > > from
> > >   http://www.fao.org/geonetwork/srv/en/metadata.show?id=1261
> > > 
> > [snip]
> > > 
> > > Apparently the NoData isn't passed to IMG.
> > > Is the created IMG file probably uncompressed
> > > which leads to this big file size?
> > > 
> > > Best regards
> > > 
> > >  Markus
> > > 
> > 
> > 
> > 
> 
> -- 
> Markus Neteler     <neteler itc it>       http://mpa.itc.it
> ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
> MPBA - Predictive Models for Biol. & Environ. Data Analysis
> Via Sommarive, 18        -       38050 Povo (Trento), Italy

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From warmerdam at pobox.com  Fri Mar 10 08:48:26 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr: double -> integer conversion problem
In-Reply-To: <44115CDE.4040005@seznam.cz>
References: <44115CDE.4040005@seznam.cz>
Message-ID: <441183AA.9030705@pobox.com>

mirza wrote:
> Hello,
> 
> When I try to convert shapefile to mid/mif using ogr2ogr, some double 
> values are converted to (overflowed) integers. For example, value 
> 14420300000144 in shapefile is converted to -1500011687 in .mid file. I 
> submitted bug to MITAB project but same bug occurred when converting to 
> CSV so maybe it is more general. Any idea?

Mirza,

This is an issue with the Shapefile driver.  The problem is deciding how to
handle integer fields that are so wide they might not fit in a 32bit integer.
My decision some time ago was to pretend that these are doubles rather than
deal with adding some sort of 64bit integer type to shapelib.

This decision is at the base of the problems.

You can file a bug against the OGR shapefile driver or even shapelib
itself, but I haven't yet figured out what to do about it.

Note that OGR's integer field is a 4byte integer so there is no way to
represent large integers in OGR.

Ugg.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From t.r.decarlo at larc.nasa.gov  Fri Mar 10 08:51:08 2006
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
In-Reply-To: <20060310131618.GA14718@bartok.itc.it>
Message-ID: <03b001c64449$af4f77c0$959877c6@cts1149>

COMPRESS doesn't seem to be very good. Try again with:

gdal_translate -co COMPRESS=LZW pop2000 pop2000.tif

And I also make my tiff file tiled for faster access, so I add "-co
TILED=YES"

--
Thom DeCarlo
-------------------------------------------------------
        Confidence is the feeling you get 
    before you fully understand the situation.

> -----Original Message-----
> From: Markus Neteler
> Sent: Friday, March 10, 2006 8:16 AM
> To: 'GDAL-dev list'
> Subject: Re: [Gdal-dev] ArcGrid to IMG conversion: huge file
> 
> So, here my report:
> 
>  gdal_translate -of HFA -co COMPRESSED=YES pop2000 pop2000.img
> 
>  du -h pop2000.*
>  3.5G    pop2000.ige
>  8.0K    pop2000.img
> 
>  gdal_translate -co COMPRESS=DEFLATE pop2000 pop2000.tif
>  du -h pop2000.*
>  92.0M    pop2000.tif
> 
> Clear decision :-)
> 
> Markus
> 
> On Thu, Mar 09, 2006 at 06:41:21PM +0100, Markus Neteler wrote:
> > Thanks, Frank and Thom,
> >
> >  I'll try.
> >
> > Markus
> >
> > On Thu, Mar 09, 2006 at 09:41:15AM -0500, Thom DeCarlo wrote:
> > > Markus,
> > > The IMG format doesn't support the concept of "NODATA", and by default
> does
> > > not use compression. It does support ESRI-style run length encoding,
> but I
> > > haven't seen it used much. You might do better converting to geotiff
> which
> > > supports LZW compression and Frank has extended it to support a NODATA
> tag.
> > >
> > > --
> > > Thom DeCarlo
> > > ------------------------------------------------------
> > >            Experience is a wonderful thing
> > > It allows you to recognize a mistake when you make it again.
> > >
> > > > -----Original Message-----
> > > > From: Markus Neteler
> > > > Sent: Thursday, March 09, 2006 6:04 AM
> > > > To: GDAL-dev list
> > > > Subject: [Gdal-dev] ArcGrid to IMG conversion: huge file
> > > >
> > > > Hi,
> > > >
> > > > when converting the
> > > >   Landscan Global Population 2000 Database
> > > > from
> > > >   http://www.fao.org/geonetwork/srv/en/metadata.show?id=1261
> > > >
> > > [snip]
> > > >
> > > > Apparently the NoData isn't passed to IMG.
> > > > Is the created IMG file probably uncompressed
> > > > which leads to this big file size?
> > > >
> > > > Best regards
> > > >
> > > >  Markus
> > > >
> > >
> > >
> > >
> >
> > --
> > Markus Neteler     <neteler itc it>       http://mpa.itc.it
> > ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
> > MPBA - Predictive Models for Biol. & Environ. Data Analysis
> > Via Sommarive, 18        -       38050 Povo (Trento), Italy
> 
> --
> Markus Neteler     <neteler itc it>       http://mpa.itc.it
> ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
> MPBA - Predictive Models for Biol. & Environ. Data Analysis
> Via Sommarive, 18        -       38050 Povo (Trento), Italy
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From mirza at seznam.cz  Fri Mar 10 10:30:32 2006
From: mirza at seznam.cz (mirza)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr: double -> integer conversion problem
In-Reply-To: <441183AA.9030705@pobox.com>
References: <44115CDE.4040005@seznam.cz> <441183AA.9030705@pobox.com>
Message-ID: <44119B98.2030204@seznam.cz>

Frank Warmerdam wrote:
> My decision some time ago was to pretend that these are doubles rather than
> deal with adding some sort of 64bit integer type to shapelib.
> 

Frank,

I think it should be converted to int64 because many big data providers 
(like TeleAtlas) uses this for element ID and if you handle it as double 
you get something like 1.22434E15, which is not nice ID at all. Of 
course, it is possible to tweak how double is formated but it is more 
complex then simply converting it to int64.

I created shp2mif utility today to deal with this (if anyone needs it I 
can send it, it is only row converter, no coord. sys. transfers).

Regards,

Mirza

From lorenzo.moretti at bologna.enea.it  Fri Mar 10 10:48:27 2006
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK 3.3 RC2 now online
In-Reply-To: <c39b2a650602090754u43fbbcf6q961a064d6eb0f83f@mail.gmail.com>
References: <c39b2a650602080228s6a42dbbek90c8a70709f938d0@mail.gmail.com>
	<CFDF0CD5-14DE-4F75-B1B3-9A11AFFA2622@kyngchaos.com>
	<c39b2a650602090753r576fe1eflff2be0532c08347d@mail.gmail.com>
	<c39b2a650602090754u43fbbcf6q961a064d6eb0f83f@mail.gmail.com>
Message-ID: <a06230903c0374a2c321a@[192.107.62.86]>

Hi Tom and William

>On 2/9/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
>
>     Rats.  Still not working on Mac OS X.  Trace/BPT Trap error.  This is
>     on 10.4/GCC 4 and 10.3/GCC 3.3 (at least I finally got it to build on
>     10.3).  Built with the Gnu configure method, static libecwj2, dynamic
>     libNCS* trio.  I even tried the examples this time, thinking GDAL
>     might be causing problems.
>
>     Was this one of the major problems you mentioned?  Or are you still
>     working on the Mac OS X issue?  Do you have any idea yet what the
>     cause is?
>
>William,


>Sounds like it.  I have seen that error during compressions on
>MacOS X.   MacOS X has some known oddities in its POSIX threads
>support, my current theory is that is breaking some assumptions made
>by our portable threading code.  I have already had to do a couple of
>evil things in there to make decompression support work correctly.

Yes
Now it's only possible to build a static lib (libecwj2.a) and other shared.
I have built examples binaries: decompression examples (DECWExample1, 
DECWExample2, DECWExample4) work, compression examples (CECWExample1, 
CECWExample2, CECWExample3, CECWExample5) go to error: Trace/BT Trap.
I think that for viewing ecw format this is sufficient.

After I have tested gdal with the static lib only (libecwj2.a) 
without libNCS*: I have changed in configure (line 25233):
-  elif test -r $with_ecw/lib/libecwj2.dylib ; then
+  elif test -r $with_ecw/lib/libecwj2.a ; then
and I have tested gdal.
It builds all and at the last there is an error:
ld: /usr/local/lib/libecwj2.a(______lib_libecwj2_a-file.o) illegal 
reference to symbol: _FSFindFolder defined in indirectly referenced 
dynamic library 
/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
/usr/bin/libtool: internal link edit command failed
make[1]: *** [libgdal.la] Error 1
make: *** [check-lib] Error 2

It has a conflict with CarbonCore framework in a specific module.

>
>The Qmake files included in the build are expected to be deprecated in
>future releases, but it's reasonably certain building with them
>wouldn't fix this issue in any case.
>
>Unfortunately, I will be offline for most of next week, and at this
>point I can't give you an ETA on a fix.  It is on my agenda, because
>most of the serious issues that have occurred with libecwj2 group
>around the portable threading code.  It may be in need of more drastic
>changes than the hacks that have occurred up to this point :-)
>
>If you are interested in investigating and possibly fixing the problem
>yourself, check out the files
>
>$LIBECWJ2/Source/C/NCSUtil/thread.c
>$LIBECWJ2/Source/C/NCSUtil/mutex.c
>
>My first thought was that a reimplementation for MacOS X in terms of
>Carbon multiprocessing services or mach threads might be in order.
>


Question: is it a problem in libecwj2 or in GDAL?

Bye


-- 
__________________________________________________________________________
||      Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|  ENEA prot/idr          Web: http://wwwamb.bologna.enea.it/    
||   |  via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (ris.)
~~~~~~  40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
ENEA - Ente Nazionale per le Nuove Tecnologie, l'Energia e l'Ambiente
ENEA - The Italian Agency for New Technologies, Energy and the Environment
__________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060310/5afdab92/attachment.html
From warmerdam at pobox.com  Fri Mar 10 13:40:51 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr: double -> integer conversion problem
In-Reply-To: <44119B98.2030204@seznam.cz>
References: <44115CDE.4040005@seznam.cz> <441183AA.9030705@pobox.com>
	<44119B98.2030204@seznam.cz>
Message-ID: <4411C833.5010507@pobox.com>

mirza wrote:
> Frank Warmerdam wrote:
>> My decision some time ago was to pretend that these are doubles rather 
>> than
>> deal with adding some sort of 64bit integer type to shapelib.
>>
> 
> Frank,
> 
> I think it should be converted to int64 because many big data providers 
> (like TeleAtlas) uses this for element ID and if you handle it as double 
> you get something like 1.22434E15, which is not nice ID at all. Of 
> course, it is possible to tweak how double is formated but it is more 
> complex then simply converting it to int64.
> 
> I created shp2mif utility today to deal with this (if anyone needs it I 
> can send it, it is only row converter, no coord. sys. transfers).

Mirza,

Well, I agree that OGR *ought* to support 64 bit integer values as field
attributes.  What is less clear is when or how that will occur.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From condit at sdsc.edu  Fri Mar 10 13:45:23 2006
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] DODS and GDAL and Windows
Message-ID: <845AADAC1106E44996327D62097E4C6B8A9B8D@et.ad.sdsc.edu>

I'm trying to move DODS data into a more usable format using
gdal_translate, but am having some troubles.  I've got the latest GDAL
from CVS - and libDAP installed on my Windows 2k3 machine.  I updated
the nmake to include the appropriate references to PTHREAD and CURL.  I
created the makefile.vc for DODS.  Everything builds and links.

C:\develop\gdal>apps\gdalinfo "http://queequeg.marine.rutgers.
edu:9876/dodsC/expprod.nc.ascii?export_production.export_production[0][y
][x]"
Warning 1: I connected to the URL but could not get a DAP 3.x version
string
from the server.  I will continue to connect but access may fail.
Assertion failed: OK(), file ..\Error.cc, line 320

This application has requested the Runtime to terminate it in an unusual
way.
Please contact the application's support team for more information.

I stepped through with the debugger, and this crash is coming from here:
Dodsdataset2.cpp:1237
DODSDataset *poDODS = dynamic_cast<DODSDataset *>(poDS);

1) This should work on Windows, right?
2) Am I referencing the data source incorrectly?
3) Any thoughts?

Thanks!

Chris


From archer at eskimo.com  Fri Mar 10 16:01:52 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Another gdal_translate problem (fwd)
Message-ID: <Pine.SUN.4.58.0603101300320.22986@eskimo.com>


Forwarding this to the list so that people will know that the
problem was solved.  Might help someone else with the same sorts of
problems.

---------- Forwarded message ----------
Date: Fri, 10 Mar 2006 12:35:31 -0800 (PST)
From: "Curt, WE7U" <archer@eskimo.com>
To: Frank Warmerdam <warmerdam@pobox.com>
Cc: "Curt Mills, WE7U" <archer@eskimo.com>
Subject: Re: [Gdal-dev] Another gdal_translate problem

On Fri, 10 Mar 2006, Frank Warmerdam wrote:

> Sorry, I'm not too sure how to address this though I haven't really gone
> through all the cases you reported in detail.  Did you try not using
> the internal libgeotiff so the GTIFProj4ToLatLong only exists in one place?
> I think I'm talking you in circles.
>
> I *think* you may need the most recently available libtiff, and libgeotiff
> built and installed (and all others stripped away), and then GDAL built to
> use those.
>
> The original problem you reported sounded like one fixed in libtiff something
> like a year ago - so you would likely need libtiff 3.8.0.

Once again, you're right.  I kind'a cheated this time 'cuz I
couldn't get a 3.8.0 RPM that would load on this system, and
couldn't just remove the 3.7.3 version because darned-near
everything depends on that lib.

I snagged the sources and compiled them to the standard place
(/usr/local).  I ran gdal_translate and it worked this time.  Ran
ldd against gdal_translate and it is using the /usr/local copy of
libtiff in preference to the RPM-installed older version.  Hopefully
it preferred the include files from the newer version as well.

Xastir is now compiled with shapelib/proj/libgeotiff/libgdal
support, and it is displaying UTM-coordinate DOQQ's just fine now.

> ldd /usr/local/bin/xastir | grep -i tiff
        libtiff.so.3 => /usr/local/lib/libtiff.so.3 (0x409d2000)
        libgeotiff.so => /usr/local/lib/libgeotiff.so (0x40c6a000)

So it is using the new libtiff as well.

Thanks for your help!  I'll add the libtiff-3.8.0 dependency to our
docs in the GDAL section.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From jdjohnso at google.com  Fri Mar 10 19:18:21 2006
From: jdjohnso at google.com (John Johnson)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] gdal warp code silently skipping datum shift
Message-ID: <d0b0f8b0603101618n2681c963r2714fc48d47badde@mail.google.com>

Occasionally I run across a raster file whose projection uses a datum that
has more than one transform to WGS84. Britain's 'OSGB 1936' is a great
example. Because the EPSG database has multiple transforms, GDAL's
data/gcs.csv file doesn't get populated with the transform value - it is
ambiguous after all.

But here's the bad part. If I warp from from a projection using the 'OSGB
1936' datum to a projection using 'WGS84', no shift happens. But no error is
generated either. So I get an incomplete warp and the image ends up being
misalligned (normally by less that a few hundred meters). When I notice
this, I can go back and add a TOWGS84 clause to the DATUM section our my SRS
and redo the warp to get the correct alignment.

So here's my question. Is there any way that GDAL can detect that it
"should" be doing a datum shift, but is missing the necessary parameters? If
so it could fail to warp wather than silently producing a bad warp. Looking
at the data structres in data/gcs.csv I'm not sure there is currently enough
information to distinguish between a datum that doesn't need to be shifted
and one that needs to but is missing the necessary parameters.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060310/dc445dd6/attachment.html
From mrc78a at yahoo.it  Sun Mar 12 06:17:03 2006
From: mrc78a at yahoo.it (marco)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr:floating point exception
Message-ID: <4414032F.1020203@yahoo.it>

Hi  all
I have a problem with ogr2ogr and ogrinfo, I build gdal on slackware 
linux 10.2 with 2.4 kernel an it works fine.
When I've upgraded my kernel version to 2.6 ,the result executing 
ogrinfo or ogr2ogr is:floating point exception.
I try to rebuild gdal under 2.6 kernel but it's the same.
Can someone help me?
thanks.

Marco

		
___________________________________ 
Yahoo! Messenger with Voice: chiama da PC a telefono a tariffe esclusive 
http://it.messenger.yahoo.com

From archer at eskimo.com  Sun Mar 12 15:44:36 2006
From: archer at eskimo.com (Curt Mills)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr2ogr:floating point exception
In-Reply-To: <4414032F.1020203@yahoo.it>
References: <4414032F.1020203@yahoo.it>
Message-ID: <Pine.LNX.4.58.0603121241490.4803@wapiti.we7u.net>

On Sun, 12 Mar 2006, marco wrote:

> I have a problem with ogr2ogr and ogrinfo, I build gdal on slackware linux
> 10.2 with 2.4 kernel an it works fine.
> When I've upgraded my kernel version to 2.6 ,the result executing ogrinfo or
> ogr2ogr is:floating point exception.
> I try to rebuild gdal under 2.6 kernel but it's the same.

I've seen this problem recently with an SuSE-10 installed gcc-4.xx
pre-release compiler and it went away by getting rid of some of the
compiler flags in CFLAGS, or by updating the compiler to a later
version.  I doubt that's your problem, but I figured I should
mention it.  The compiler identified itself with gcc-4.02
pre-release or something similar.

-- 
Curt, WE7U.				archer at eskimo dot com
http://www.eskimo.com/~archer
  Lotto:  A tax on people who are bad at math. - unknown
Windows:  Microsoft's tax on computer illiterates. - WE7U.
The world DOES revolve around me:  I picked the coordinate system!"

From amills at frogtech.com.au  Sun Mar 12 20:47:50 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Beginner problem - can't load DLL
Message-ID: <3371071.post@talk.nabble.com>


 I'm trying to write a fairly simple program that will extract the data from
an Erdas Imagine file into an ASCII file. Normally I'd use the Arc software
for something like this but in this case I have to make a standalone program
that can be handed around freely. After some searching I found GDAL which I
can use to read the Imagine format.

 My first problem struck when I began looking at the supported languages.
I'm mainly familiar with VB .NET and Java - but the former seems to be
unsupported and the latter has no documentation. I looked at the tutorial
and it seemed that learning a bit of Python would be the simplest solution. 

 I've installed the ActivePython IDE and FWTools so I should have all I
need. I changed the registry setting for the PythonPath to include
c:\Program Files\FWTools1.0.0a7\pymod so it should have access to the Python
libraries.

 However, when I give it this command: 

 import gdal

 I get the following error:

 Traceback (most recent call last):
  File
"C:\Python24\Lib\site-packages\pythonwin\pywin\framework\scriptutils.py",
line 310, in RunScript
    exec codeObject in __main__.__dict__
  File "C:\Frogtech\testScript.py", line 1, in ?
    import gdal
  File "C:\Python24\lib\gdal.py", line 191, in ?
ImportError: DLL load failed: The specified module could not be found.

 The _gdal.dll file is in the same directory as gdal.py so I'm not sure why
it can't load it. I'm a beginner when it comes to Python and GDAL so I might
have missed a step when setting up or something. Any ideas?

 Alternately, if someone can give me some pointers on how to run GDAL from
Java I'd be very appreciative.
--
View this message in context: http://www.nabble.com/Beginner-problem---can%27t-load-DLL-t1270110.html#a3371071
Sent from the GDAL - Dev forum at Nabble.com.


From perrygeo at gmail.com  Sun Mar 12 21:27:04 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Beginner problem - can't load DLL
In-Reply-To: <3371071.post@talk.nabble.com>
References: <3371071.post@talk.nabble.com>
Message-ID: <5383fa5e0603121827r7f7629fbo6f60aedcb58ddba@mail.gmail.com>

On 3/12/06, Holywhippet <amills@frogtech.com.au> wrote:
>  I'm trying to write a fairly simple program that will extract the data from
> an Erdas Imagine file into an ASCII file. Normally I'd use the Arc software
> for something like this but in this case I have to make a standalone program
> that can be handed around freely. After some searching I found GDAL which I
> can use to read the Imagine format.

If you just need a utility to convert from ERDAS to a standard ArcInfo
ASCII Grid, you can use the gdal_translate program
(http://gdal.maptools.org/gdal_translate.html) that comes with
FWTools. The command would be something like:

gdal_translate -of "AAIGrid" input.img output.asc

But if you need to customize the output, you can turn to the
GDAL/python solution.

>  However, when I give it this command:
>
>  import gdal
>
>  I get the following error:
>
>  Traceback (most recent call last):
>   File
> "C:\Python24\Lib\site-packages\pythonwin\pywin\framework\scriptutils.py",
> line 310, in RunScript
>     exec codeObject in __main__.__dict__
>   File "C:\Frogtech\testScript.py", line 1, in ?
>     import gdal
>   File "C:\Python24\lib\gdal.py", line 191, in ?
> ImportError: DLL load failed: The specified module could not be found.
>

Looks like your IDE is trying to run the system's version of Python.
FWTools comes with it's own version of Python and installs the GDAL
libs there. You'll probably need to set up your IDE to work with that
version somehow.

--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net


From amills at frogtech.com.au  Sun Mar 12 21:52:52 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Beginner problem - can't load DLL
In-Reply-To: <5383fa5e0603121827r7f7629fbo6f60aedcb58ddba@mail.gmail.com>
References: <3371071.post@talk.nabble.com>
	<5383fa5e0603121827r7f7629fbo6f60aedcb58ddba@mail.gmail.com>
Message-ID: <3371564.post@talk.nabble.com>


 OK, thanks. That seemed to be the problem.
--
View this message in context: http://www.nabble.com/Beginner-problem---can%27t-load-DLL-t1270110.html#a3371564
Sent from the GDAL - Dev forum at Nabble.com.


From neteler at itc.it  Mon Mar 13 05:40:40 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] gdalwarp and NO DATA propagation
Message-ID: <20060313104040.GD6568@bartok.itc.it>

Frank, all

I continued to play with the population data set.
I needed to extract parts of Europe from this world
map and to reproject to LCC. Doing so, I observed
an potential problem with NO DATA propagation. The
known NO DATA value get's interpolated by gdalwarp:

# original data:
gdalinfo pop2000
Driver: AIG/Arc/Info Binary Grid
...
Band 1 Block=256x4 Type=Int32, ColorInterp=Undefined
  Min=0.000 Max=159004.000
  NoData Value=-2.14748e+09


# extract and warp to LCC
 gdalwarp -co COMPRESS=DEFLATE -s_srs epsg:4326 \
          -t_srs epsg:3034 -te 3278500 831250 5067000 2427000 \
          -tr 1000 1000 -rcs pop2000 pop2000_lcc.tif


#verifiction
 gdalinfo -mm pop2000_lcc.tif
 Driver: GTiff/GeoTIFF
 Size is 1789, 1596
 Coordinate System is:
 PROJCS["ETRS89 / ETRS-LCC",
 ...
 Band 1 Block=1789x1 Type=Int32, ColorInterp=Gray
    Computed Min/Max=-2147483647.000,39776.000

-> no more no data value

I discovered it after import into GRASS where no data
was more or less impossible to re-apply:

GRASS 6.1.cvs (eu_lcc):~ > r.info -r pop2000_landscan
min=-2147483647
max=39776
GRASS 6.1.cvs (eu_lcc):~ > r.null pop2000_landscan set=-2147483647
Writing new data for [pop2000_landscan]...  100%

GRASS 6.1.cvs (eu_lcc):~ > r.info -r pop2000_landscan
min=-2147483646
max=39776
GRASS 6.1.cvs (eu_lcc):~ > r.null pop2000_landscan set=-2147483646
Writing new data for [pop2000_landscan]...  100%

GRASS 6.1.cvs (eu_lcc):~ > r.info -r pop2000_landscan
min=-2147483645
max=39776

... and so forth.

Would it be possible to let known NO DATA values automatically 
survive the gdalwarp process? I searched in the archives if this
was already asked but didn't find the answer :-)

Thanks

 Markus

From holl at gdf-hannover.de  Mon Mar 13 06:09:15 2006
From: holl at gdf-hannover.de (Stephan Holl)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] v.in.ogr behaviour
Message-ID: <20060313120915.2f9e791c@bambule.gdf-hannover.de>

Dear list,

[sorry for crossposting, but perhaps this is interesting for the
GDAL-folks as well]

I am working with GRASS6_CVS and Oracle 9i which is compiled into
GDAL/OGR 1.3.1. Everything works if the tables in Oracle are owned by
the given user. 
v.in.ogr reports the available layers as follows:
v.in.ogr -l dsn="OCI:owneroftables/pw@OCI" layer=DATA1 out=data1
Data source contains 2 layers:
DATA1, DATA2

Removing the -l-switch imports the data nicly and creates dataset data1
inside GRASS.

When I create another oracle-user with only
SELECT-privileges on that table, the tables inside Oracle are shown like
this:

v.in.ogr -l dsn="OCI:readonlyuser/pw@OCI" layer=OWNEROFTABLES.DATA1
out=data1
Data source contains 2 layers:
OWNEROFTABLES.DATA1, OWNEROFTABLES.DATA2

Trying to import now, this results in a Segmentation fault.
v.in.ogr dsn="OCI:readonlyuser/pw@OCI" layer=OWNEROFTABLES.DATA1
out=data1

So I assume the dot between user and table produces this?! Perhaps
anybody can give me a hint where to look at.

Using ogr2ogr works with both users and exports e.g. a shapefile
correct.

Thanks in advance for any pointers.

	Stephan


-- 
GDF Hannover - Solutions for spatial data analysis and remote sensing
Hannover Office      -     Mengendamm 16d      -     D-30177 Hannover
Internet: www.gdf-hannover.de      -      Email: holl@gdf-hannover.de
Phone : ++49-(0)511.39088507       -        Fax: ++49-(0)511.39088508

From ari.jolma at tkk.fi  Mon Mar 13 10:37:55 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] why does shape datasource count lone dbf files as layers?
Message-ID: <441591D3.1090209@tkk.fi>

I have data in shapefiles, which use dynamic segmentation. Thus (I 
believe) there are lone DBF files in the directory, which contain the 
"dynamic" data.

Why does ogrshapedatasource.cpp:306-320 count these files as layers? The 
source code speaks about "without apparent associated shapefiles", in my 
case there are simply no associated shapefiles. The datasource is later 
unusable since the respective SHP files are not available and the 
program ends in error. I need to manually put these DBF files aside to 
be able to open the real layers.

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From condit at sdsc.edu  Mon Mar 13 13:37:44 2006
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] DODS and GDAL and Windows
Message-ID: <845AADAC1106E44996327D62097E4C6B8A9C93@et.ad.sdsc.edu>

Is DODS/opendap still supported in gdal?  
Given the following DDS, is this the correct way to access?
"http://queequeg.marine.rutgers.edu:9876/dodsC/expprod.nc.dds"
Dataset {
    Float64 lat[lat = 1024];
    Float64 lon[lon = 2048];
    Float64 time[time = 64];
    Grid {
     ARRAY:
        Float32 export_production[time = 64][lat = 1024][lon = 2048];
     MAPS:
        Float64 time[time = 64];
        Float64 lat[lat = 1024];
        Float64 lon[lon = 2048];
    } export_production;
    Grid {
     ARRAY:
        Int16 pp_mask[lat = 1024][lon = 2048];
     MAPS:
        Float64 lat[lat = 1024];
        Float64 lon[lon = 2048];
    } pp_mask;
} expprod.nc;

http://queequeg.marine.rutgers.edu:9876/dodsC/expprod.nc?export_producti
on.export_production[0][y][x]


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Christopher
Condit
Sent: Friday, March 10, 2006 10:45 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] DODS and GDAL and Windows

I'm trying to move DODS data into a more usable format using
gdal_translate, but am having some troubles.  I've got the latest GDAL
from CVS - and libDAP installed on my Windows 2k3 machine.  I updated
the nmake to include the appropriate references to PTHREAD and CURL.  I
created the makefile.vc for DODS.  Everything builds and links.

C:\develop\gdal>apps\gdalinfo "http://queequeg.marine.rutgers.
edu:9876/dodsC/expprod.nc.ascii?export_production.export_production[0][y
][x]"
Warning 1: I connected to the URL but could not get a DAP 3.x version
string
from the server.  I will continue to connect but access may fail.
Assertion failed: OK(), file ..\Error.cc, line 320

This application has requested the Runtime to terminate it in an unusual
way.
Please contact the application's support team for more information.

I stepped through with the debugger, and this crash is coming from here:
Dodsdataset2.cpp:1237
DODSDataset *poDODS = dynamic_cast<DODSDataset *>(poDS);

1) This should work on Windows, right?
2) Am I referencing the data source incorrectly?
3) Any thoughts?

Thanks!

Chris

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Mon Mar 13 16:17:07 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] why does shape datasource count lone dbf files as
	layers?
In-Reply-To: <441591D3.1090209@tkk.fi>
References: <441591D3.1090209@tkk.fi>
Message-ID: <4415E153.5060405@tkk.fi>

Ari Jolma kirjoitti:
> I have data in shapefiles, which use dynamic segmentation. Thus (I 
> believe) there are lone DBF files in the directory, which contain the 
> "dynamic" data.
>
> Why does ogrshapedatasource.cpp:306-320 count these files as layers? 
> The source code speaks about "without apparent associated shapefiles", 
> in my case there are simply no associated shapefiles. The datasource 
> is later unusable since the respective SHP files are not available and 
> the program ends in error. I need to manually put these DBF files 
> aside to be able to open the real layers.

To answer myself: this is a problem in the Swig interface. The error is 
not supposed to be an error that is reported to the user, but it is 
because it is there. The problem is in cpl_exceptions.i, which does not 
work (at least) in this case. I don't know how to fix it right away. 
Kevin, Charlie: this is probably also a bug in Python and Ruby 
interfaces. The %exception should not just blindly test eclass but test 
the return value from the function.

Ari

>
> Ari
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From amills at frogtech.com.au  Mon Mar 13 20:00:08 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Can't get NoDataValue for dataset
Message-ID: <3389193.post@talk.nabble.com>


 I'm writing a simple program to extract the data values for each location in
a raster. As part of this though, I don't want to output the No Data Values.
For some reason though, Gdal won't give me the No Data Value. When I call
the GetNoDataValue function (in Python) in the Band class it returns None. I
tried calling the GDALGetRasterNoDataValue function directly and it returns
-10000000000.0 for the NDV and -941860_int_p for the success fiag. The
actual NDV is -3.402823E+38.

 All the datasets I've been working with are Erdas Imagine type.

--
View this message in context: http://www.nabble.com/Can%27t-get-NoDataValue-for-dataset-t1276146.html#a3389193
Sent from the GDAL - Dev forum at Nabble.com.


From condit at sdsc.edu  Mon Mar 13 20:08:30 2006
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Raster Flipping
Message-ID: <845AADAC1106E44996327D62097E4C6B8A9CED@et.ad.sdsc.edu>

Is there a way to flip a raster image along the horizontal axis using
GDAL (s.t. -y goes to y, and y goes to -y)?


From amills at frogtech.com.au  Mon Mar 13 20:00:08 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Can't get NoDataValue for dataset
Message-ID: <3389193.post@talk.nabble.com>


 I'm writing a simple program to extract the data values for each location in
a raster. As part of this though, I don't want to output the No Data Values.
For some reason though, Gdal won't give me the No Data Value. When I call
the GetNoDataValue function (in Python) in the Band class it returns None. I
tried calling the GDALGetRasterNoDataValue function directly and it returns
-10000000000.0 for the NDV and -941860_int_p for the success fiag. The
actual NDV is -3.402823E+38.

 All the datasets I've been working with are Erdas Imagine type.

--
View this message in context: http://www.nabble.com/Can%27t-get-NoDataValue-for-dataset-t1276146.html#a3389193
Sent from the GDAL - Dev forum at Nabble.com.


From warmerdam at pobox.com  Mon Mar 13 23:04:30 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Raster Flipping
In-Reply-To: <845AADAC1106E44996327D62097E4C6B8A9CED@et.ad.sdsc.edu>
References: <845AADAC1106E44996327D62097E4C6B8A9CED@et.ad.sdsc.edu>
Message-ID: <441640CE.5020507@pobox.com>

Christopher Condit wrote:
> Is there a way to flip a raster image along the horizontal axis using
> GDAL (s.t. -y goes to y, and y goes to -y)?

Christopher,

There is no especially easy way to y-flip rasters with GDAL utilities.
I can be done reasonably easily in a script.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Tue Mar 14 09:27:27 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Can't get NoDataValue for dataset
In-Reply-To: <3389193.post@talk.nabble.com>
References: <3389193.post@talk.nabble.com>
Message-ID: <4416D2CF.8010508@pobox.com>

Holywhippet wrote:
>  I'm writing a simple program to extract the data values for each location in
> a raster. As part of this though, I don't want to output the No Data Values.
> For some reason though, Gdal won't give me the No Data Value. When I call
> the GetNoDataValue function (in Python) in the Band class it returns None. I
> tried calling the GDALGetRasterNoDataValue function directly and it returns
> -10000000000.0 for the NDV and -941860_int_p for the success fiag. The
> actual NDV is -3.402823E+38.
> 
>  All the datasets I've been working with are Erdas Imagine type.

Holy Whippet,

-10000000000 is the default nodata value returned for drivers that do not
implement the method.  The "-941860_int_p" is the pointer to the successflag.
You would need to dereference it to know whether things succeeded.

But the very fact that you are getting None back is how the Python interface
indicates there was no value found.

As was discussed just recently on this list (with you?) the GDAL Imagine
driver did not support reading or writing nodata values.  Very recently
(a couple days ago) reading nodata values in the form they are produced by
RDO (the ArcGIS raster data objects component?) was added but unless you
upgraded to CVS or a recently nightly snapshot you won't have that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From Silke.Reimer at intevation.de  Tue Mar 14 10:19:57 2006
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Fedora Core 5 packages
Message-ID: <20060314151957.GK17664@intevation.de>


Hallo!

As some of you might already have seen on osgeo-discuss I have just
finished a few RPM-packages for Fedora Core 5.  I have placed them
on our FTP-Server and they will be available through the
FreeGIS-mirror [1] on gwdg.de probably tomorrow.

The following packages have been packaged and basically tested:
gdal: version 1.3.1. 
      I made a review request for gdal on Fedora Extra. It can be
      followed on [2].
grass: version 6.0.2
gdalgrass: grass Plugin for gdal, version 1.3.1
postgis: 1.1.1
      I made a review request for gdal on Fedora Extra. It can be
      followed on [3].
qgis: 0.7.4

Please give those packages a try and sent me any comments. I am
especially interested if you experience any problems in working with
the gdalgrass-plugin. It seems to work for me but I might have
overseen something. The same holds for the more sophisticated
modules in grass.

It might be useful to sent a private copy of your answers to me
since I don't read all lists on a daily base.

Many greetings,

    Silke

[1] http://ftp.gwdg.de/pub/misc/freegis/intevation/freegis/fedora/5/
[2] https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=168719
[3] https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=171040

-- 
Silke Reimer   : www.intevation.de/~silke | GISpatcher: www.gispatcher.de
Intevation GmbH: www.intevation.de        | Thuban    : thuban.intevation.org
Georgstr.4     : 49074 Osnabr?ck          | FreeGIS   : www.freegis.org
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Digital signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060314/ac4f8b0f/attachment.bin
From amills at frogtech.com.au  Tue Mar 14 16:22:23 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Can't get NoDataValue for dataset
In-Reply-To: <4416D2CF.8010508@pobox.com>
References: <3389193.post@talk.nabble.com> <4416D2CF.8010508@pobox.com>
Message-ID: <3405347.post@talk.nabble.com>


 Thanks for the reply. I managed to work around the problem anyway - I just
got the Raster statistics and ignored everything out of range.
--
View this message in context: http://www.nabble.com/Can%27t-get-NoDataValue-for-dataset-t1276146.html#a3405347
Sent from the GDAL - Dev forum at Nabble.com.


From Luc.VanAsch at vlm.be  Wed Mar 15 03:05:27 2006
From: Luc.VanAsch at vlm.be (Luc Van Asch)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDAL and Intergraph .cmp files
Message-ID: <A1B26E8B68B7AA4AAE69CF1CAEDAC7147CB287@aocsrv11.vlm.be>

Dear List,
 
We are using Integraph software (Geomedia, Orthopro...) in our
organization.
Intergraph uses by default a compressed raster file format for it's
raster data (extension .cmp).
 
Does anyone knows if there's have been done some work to support this
format in de GDAL 
environment?
 
Thank you all in advance for any tips or help,
 
Luc
_______________________________________________ 
Luc Van Asch 
Informaticus 
Lijn Geografische Data Infrastructuur - Faciliteiten 

VLM-Ondersteunend Centrum GIS Vlaanderen 
Gebroeders Van Eyckstraat 16
9000 Gent
Alg. tel: 09/261.52.00
Direct tel: 09/261.52.15 
Mobile: 0499/258025 
fax: 09/261.52.99 
Mailto:luc.vanasch@vlm.be <blocked::blocked::mailto:luc.vanasch@vlm.be>

http://www.gisvlaanderen.be
<blocked::blocked::http://www.gisvlaanderen.be/>  

 

 



*** DISCLAIMER ***De inhoud van onze e-mails en hun toegevoegde bestanden zijn vertrouwelijk en alleen bestemd voor het gebruik door de geadresseerde personen. Indien U per vergissing e-mails ontvangt, gelieve deze e-mails en hun toegevoegde bestanden te vernietigen. Kopieren, verdelen of ander gebruik, onder welke vorm ook, van de inhouden en van de toegevoegde bestanden, is ten strengste verboden. De inhoud van de e-mails en de toegevoegde bestanden zijn afkomstig van de auteur en verbindt niet noodzakelijk de VLM tenzij dit bevestigd wordt d.m.v. een terzake geldig ondertekend document van de VLM. 
Wij bevestigen dat de e-mails en hun toegevoegde bestanden zijn gecontroleerd op computervirussen wat niet garandeert dat ze volledig vrij zijn van computervirussen. 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060315/06a3624a/attachment.html
From holl at gdf-hannover.de  Wed Mar 15 03:37:26 2006
From: holl at gdf-hannover.de (Stephan Holl)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Re: [GRASS5] v.in.ogr behaviour
In-Reply-To: <20060313120915.2f9e791c@bambule.gdf-hannover.de>
References: <20060313120915.2f9e791c@bambule.gdf-hannover.de>
Message-ID: <20060315093726.592de411@bambule.gdf-hannover.de>

Hello Lists,

[crosspost again]

On Mon, 13 Mar 2006 12:09:15 +0100 Stephan Holl <holl@gdf-hannover.de>
wrote:

> Dear list,
> 
> [sorry for crossposting, but perhaps this is interesting for the
> GDAL-folks as well]
> 
> I am working with GRASS6_CVS and Oracle 9i which is compiled into
> GDAL/OGR 1.3.1. Everything works if the tables in Oracle are owned by
> the given user. 
> v.in.ogr reports the available layers as follows:
> v.in.ogr -l dsn="OCI:owneroftables/pw@OCI" layer=DATA1 out=data1
> Data source contains 2 layers:
> DATA1, DATA2
> 
> Removing the -l-switch imports the data nicly and creates dataset
> data1 inside GRASS.
> 
> When I create another oracle-user with only
> SELECT-privileges on that table, the tables inside Oracle are shown
> like this:
> 
> v.in.ogr -l dsn="OCI:readonlyuser/pw@OCI" layer=OWNEROFTABLES.DATA1
> out=data1
> Data source contains 2 layers:
> OWNEROFTABLES.DATA1, OWNEROFTABLES.DATA2
> 
> Trying to import now, this results in a Segmentation fault.
> v.in.ogr dsn="OCI:readonlyuser/pw@OCI" layer=OWNEROFTABLES.DATA1
> out=data1
> 
> So I assume the dot between user and table produces this?! Perhaps
> anybody can give me a hint where to look at.
> 
> Using ogr2ogr works with both users and exports e.g. a shapefile
> correct.
> 
> Thanks in advance for any pointers.

Apparently noone has stumbled over this I will provide as much
information for the developers. 
I have created a full gdb backtrace[1] of the segfault. But again, I do
not know where to dig into the problem since I do know what is going on
there...

Thank you for having a look what might go wrong here.

Best regards

	Stephan

[1] http://www.gdf-hannover.de/holl/tmp/v.in.ogr_bt-full.txt

-- 
GDF Hannover - Solutions for spatial data analysis and remote sensing
Hannover Office      -     Mengendamm 16d      -     D-30177 Hannover
Internet: www.gdf-hannover.de      -      Email: holl@gdf-hannover.de
Phone : ++49-(0)511.39088507       -        Fax: ++49-(0)511.39088508

From Dorit.Gross at fao.org  Wed Mar 15 04:14:20 2006
From: Dorit.Gross at fao.org (Gross, Dorit (SDRN))
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
Message-ID: <5290E77B1FE2FE40B82AA54158825F0602EF5000@hqosex01.fao.org>

Dear list,

I use gdaladdo to add overviews to a GeoTiff and receive following error
message:

/usr/local/gislibs/bin/gdaladdo -r average --config COMPRESS_OVERVIEW LZW
/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif 2 4 8 16 32 64 128
0.Warning 1:
TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
"StripByteCounts" field, ignoring and calculating from imagelength Warning 1:
TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
"StripByteCounts" field, ignoring and calculating from imagelength
..10...20...30...40...50...60...70...80...90..Warning 1:
TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
"StripByteCounts" field, ignoring and calculating from imagelength Warning 1:
TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
"StripByteCounts" field, ignoring and calculating from imagelength ERROR 1:
/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode: Not enough
data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 4
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4 ERROR 1:
/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode: Not enough
data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.

...

Any ideas what could be the problem and how it could be solved?

We use the latest GIS Libs for Mac OS X Panther (2.2.1) including GDAL/OGR
v1.3.1 downloaded from Kyng Chaos.

Many thanks for your help,

Dorit

From andrew at andrewlarcombe.co.uk  Wed Mar 15 07:27:39 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] PHP Binddings... (resent)
Message-ID: <4418083B.5060701@andrewlarcombe.co.uk>

Hi there,

Mandriva Linux 2006
SWIG 1.3.24
gcc 4.0.1
PHP 5.0.4 from source
GDAL 1.3.1 from source


I'm trying to compile GDAL & OGR with the php bindings so that I'm able
to read shp and wml data directly through php. I ran configure
--with-php , however the build process is producing the following errors:

l2ogrgeometry.o
ranlib .libs/libgdal.a
creating libgdal.la
(cd .libs && rm -f libgdal.la && ln -s ../libgdal.la libgdal.la)
make[1]: Leaving directory `/usr/local/src/gdal-1.3.1'
(cd swig; make build)
make[1]: Entering directory `/usr/local/src/gdal-1.3.1/swig'
for dir in php ; do (cd $dir; make build ); done
make[2]: Entering directory `/usr/local/src/gdal-1.3.1/swig/php'
g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config
--includes` -fpic -c gdal_wrap.cpp
gdal_wrap.cpp:853: error: 'zend_property_reference' was not declared in
this scope
gdal_wrap.cpp:853: error: 'property_reference' was not declared in this
scope
gdal_wrap.cpp:853: error: expected primary-expression before '*' token
gdal_wrap.cpp:853: error: 'value' was not declared in this scope
gdal_wrap.cpp:853: error: initializer expression list treated as
compound expression
gdal_wrap.cpp:854: error: 'zend_property_reference' was not declared in
this scope
gdal_wrap.cpp:854: error: 'property_reference' was not declared in this
scope
gdal_wrap.cpp:854: error: expected primary-expression before '*' token
gdal_wrap.cpp:854: error: 'value' was not declared in this scope
gdal_wrap.cpp:854: error: initializer expression list treated as
compound expression
gdal_wrap.cpp:855: error: 'zend_property_reference' was not declared in
this scope
gdal_wrap.cpp:855: error: 'property_reference' was not declared in this
scope
gdal_wrap.cpp:856: error: 'zend_property_reference' was not declared in
this scope
gdal_wrap.cpp:856: error: 'property_reference' was not declared in this
scope
gdal_wrap.cpp:856: error: expected primary-expression before '*' token
gdal_wrap.cpp:856: error: 'value' was not declared in this scope
gdal_wrap.cpp:856: error: initializer expression list treated as
compound expression

...continues similarly for many lines...
gdal_wrap.cpp:6962: error: invalid conversion from 'int' to
'_zend_function*'
gdal_wrap.cpp:6966: error: cannot convert 'pval' to '_zend_function*' in
assignment
gdal_wrap.cpp:6966: error: invalid conversion from 'int' to
'_zend_function*'
gdal_wrap.cpp:6970: error: cannot convert 'pval' to '_zend_function*' in
assignment
gdal_wrap.cpp:6970: error: invalid conversion from 'int' to
'_zend_function*'
gdal_wrap.cpp:6974: error: cannot convert 'pval' to '_zend_function*' in
assignment
gdal_wrap.cpp:6974: error: invalid conversion from 'int' to
'_zend_function*'
make[2]: *** [gdal_wrap.o] Error 1
make[2]: Leaving directory `/usr/local/src/gdal-1.3.1/swig/php'
make[1]: *** [build] Error 2
make[1]: Leaving directory `/usr/local/src/gdal-1.3.1/swig'
make: *** [swig-target] Error 2


Any ideas what the problem is/how to fix it?

Regards,

Andrew

From bartvde at xs4all.nl  Wed Mar 15 08:54:17 2006
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] MySQL ovf
Message-ID: <21357.145.50.39.8.1142430857.squirrel@webmail.xs4all.nl>

Hi list,

we built GDAL (early january CVS) against the MySQL client (5.0). But both
Mapserver and ogrinfo crash:

[bart@hades OGC_UMN_services]$ ogrinfo
MYSQL:calamaris,user=root,password=******,port=3306,host=test.rws
Segmentation fault

We are on RHE 3.

Is this configuration known to work?

Best regards,
Bart


From hobu at iastate.edu  Wed Mar 15 09:26:18 2006
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] MySQL ovf
In-Reply-To: <21357.145.50.39.8.1142430857.squirrel@webmail.xs4all.nl>
References: <21357.145.50.39.8.1142430857.squirrel@webmail.xs4all.nl>
Message-ID: <p0620070ac03dd380dee5@[192.168.11.4]>

Around the early January time frame was when I was making a mess of 
the MySQL driver.  Things are in much better shape now.  Can you 
update and let me know if you are still having problems?

At 2:54 PM +0100 3/15/06, Bart van den Eijnden wrote:
>Hi list,
>
>we built GDAL (early january CVS) against the MySQL client (5.0). But both
>Mapserver and ogrinfo crash:
>
>[bart@hades OGC_UMN_services]$ ogrinfo
>MYSQL:calamaris,user=root,password=******,port=3306,host=test.rws
>Segmentation fault
>
>We are on RHE 3.
>
>Is this configuration known to work?
>
>Best regards,
>Bart
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Mar 15 10:03:02 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] MySQL ovf
In-Reply-To: <21357.145.50.39.8.1142430857.squirrel@webmail.xs4all.nl>
References: <21357.145.50.39.8.1142430857.squirrel@webmail.xs4all.nl>
Message-ID: <44182CA6.6090800@pobox.com>

Bart van den Eijnden wrote:
> Hi list,
> 
> we built GDAL (early january CVS) against the MySQL client (5.0). But both
> Mapserver and ogrinfo crash:
> 
> [bart@hades OGC_UMN_services]$ ogrinfo
> MYSQL:calamaris,user=root,password=******,port=3306,host=test.rws
> Segmentation fault
> 
> We are on RHE 3.
> 
> Is this configuration known to work?

Bart,

You might want to try again against against current CVS.  In January
the mysql spatial work was very much in flux, and there were times when
the cvs code would crash against a plain mysql database without a
geometyr_columns table and such.

So, I would say that mysql support was known to be unstable during
January.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Wed Mar 15 10:08:19 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] PHP Binddings... (resent)
In-Reply-To: <4418083B.5060701@andrewlarcombe.co.uk>
References: <4418083B.5060701@andrewlarcombe.co.uk>
Message-ID: <44182DE3.6030400@pobox.com>

Andrew Larcombe wrote:
> Hi there,
> 
> Mandriva Linux 2006
> SWIG 1.3.24
> gcc 4.0.1
> PHP 5.0.4 from source
> GDAL 1.3.1 from source
> 
> 
> I'm trying to compile GDAL & OGR with the php bindings so that I'm able
> to read shp and wml data directly through php. I ran configure
> --with-php , however the build process is producing the following errors:
> 
...
> Any ideas what the problem is/how to fix it?

Andrew,

My understanding is that the SWIG based PHP bindings for GDAL/OGR are
incomplete and unsupported at this time.  Unless you are a developer willing
to put substantial effort into them, I would discourage their use.

There are also some hand crafted PHP bindings for just OGR developed by
DM Solutions for a client of theirs.  I don't have too much familiarity
with it, but you can find it at:

   http://dl.maptools.org/dl/php_ogr/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From andrew at andrewlarcombe.co.uk  Wed Mar 15 10:28:19 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] PHP Binddings... (resent)
In-Reply-To: <44182DE3.6030400@pobox.com>
References: <4418083B.5060701@andrewlarcombe.co.uk>
	<44182DE3.6030400@pobox.com>
Message-ID: <44183293.4070408@andrewlarcombe.co.uk>

Frank Warmerdam wrote:
> My understanding is that the SWIG based PHP bindings for GDAL/OGR are
> incomplete and unsupported at this time.  Unless you are a developer 
> willing
> to put substantial effort into them, I would discourage their use.
> 
> There are also some hand crafted PHP bindings for just OGR developed by
> DM Solutions for a client of theirs.  I don't have too much familiarity
> with it, but you can find it at:
> 
>   http://dl.maptools.org/dl/php_ogr/

Frank,

Thanks for that. I'll investigate both avenues and report back.

Cheers,

Andrew


From warmerdam at pobox.com  Wed Mar 15 11:31:39 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
In-Reply-To: <5290E77B1FE2FE40B82AA54158825F0602EF5000@hqosex01.fao.org>
References: <5290E77B1FE2FE40B82AA54158825F0602EF5000@hqosex01.fao.org>
Message-ID: <4418416B.8060806@pobox.com>

Gross, Dorit (SDRN) wrote:
> Dear list,
> 
> I use gdaladdo to add overviews to a GeoTiff and receive following error
> message:
> 
> /usr/local/gislibs/bin/gdaladdo -r average --config COMPRESS_OVERVIEW LZW
> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif 2 4 8 16 32 64 128
> 0.Warning 1:
> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
> "StripByteCounts" field, ignoring and calculating from imagelength Warning 1:
> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
> "StripByteCounts" field, ignoring and calculating from imagelength
> ..10...20...30...40...50...60...70...80...90..Warning 1:
> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
> "StripByteCounts" field, ignoring and calculating from imagelength Warning 1:
> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
> "StripByteCounts" field, ignoring and calculating from imagelength ERROR 1:
> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode: Not enough
> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
> 
> ERROR 1: IReadBlock failed at X offset 0, Y offset 4
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4 ERROR 1:
> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode: Not enough
> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
> 
> ...
> 
> Any ideas what could be the problem and how it could be solved?
> 
> We use the latest GIS Libs for Mac OS X Panther (2.2.1) including GDAL/OGR
> v1.3.1 downloaded from Kyng Chaos.

Dorit,

It *sounds* like the input file may be corrupt in some sense.  Was it
generated with libtiff?  Can you make the original file available for
me to look at?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Wed Mar 15 11:35:22 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] GDAL and Intergraph .cmp files
In-Reply-To: <A1B26E8B68B7AA4AAE69CF1CAEDAC7147CB287@aocsrv11.vlm.be>
References: <A1B26E8B68B7AA4AAE69CF1CAEDAC7147CB287@aocsrv11.vlm.be>
Message-ID: <4418424A.4030703@pobox.com>

Luc Van Asch wrote:
> Dear List,
>  
> We are using Integraph software (Geomedia, Orthopro...) in our organization.
> Intergraph uses by default a compressed raster file format for it's 
> raster data (extension .cmp).
>  
> Does anyone knows if there's have been done some work to support this 
> format in de GDAL
> environment?

Luc,

There is currently no support for Intergraph Raster Format in GDAL.  This
comes in many variations, some of which are sometimes known as "COT" format.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From andrew at andrewlarcombe.co.uk  Wed Mar 15 06:14:32 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] PHP Binddings...
In-Reply-To: <200602021018.28810.fx.gamoy@geomatika.fr>
References: <200602021018.28810.fx.gamoy@geomatika.fr>
Message-ID: <4417F718.6010308@andrewlarcombe.co.uk>

Hi there,

Mandriva Linux 2006
SWIG 1.3.24
gcc 4.0.1
PHP 5.0.4 from source
GDAL 1.3.1 from source


I'm trying to compile GDAL & OGR with the php bindings so that I'm able 
to read shp and wml data directly through php. I ran configure 
--with-php , however the build process is producing the following errors:

l2ogrgeometry.o
ranlib .libs/libgdal.a
creating libgdal.la
(cd .libs && rm -f libgdal.la && ln -s ../libgdal.la libgdal.la)
make[1]: Leaving directory `/usr/local/src/gdal-1.3.1'
(cd swig; make build)
make[1]: Entering directory `/usr/local/src/gdal-1.3.1/swig'
for dir in php ; do (cd $dir; make build ); done
make[2]: Entering directory `/usr/local/src/gdal-1.3.1/swig/php'
g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config 
--includes` -fpic -c gdal_wrap.cpp
gdal_wrap.cpp:853: error: 'zend_property_reference' was not declared in 
this scope
gdal_wrap.cpp:853: error: 'property_reference' was not declared in this 
scope
gdal_wrap.cpp:853: error: expected primary-expression before '*' token
gdal_wrap.cpp:853: error: 'value' was not declared in this scope
gdal_wrap.cpp:853: error: initializer expression list treated as 
compound expression
gdal_wrap.cpp:854: error: 'zend_property_reference' was not declared in 
this scope
gdal_wrap.cpp:854: error: 'property_reference' was not declared in this 
scope
gdal_wrap.cpp:854: error: expected primary-expression before '*' token
gdal_wrap.cpp:854: error: 'value' was not declared in this scope
gdal_wrap.cpp:854: error: initializer expression list treated as 
compound expression
gdal_wrap.cpp:855: error: 'zend_property_reference' was not declared in 
this scope
gdal_wrap.cpp:855: error: 'property_reference' was not declared in this 
scope
gdal_wrap.cpp:856: error: 'zend_property_reference' was not declared in 
this scope
gdal_wrap.cpp:856: error: 'property_reference' was not declared in this 
scope
gdal_wrap.cpp:856: error: expected primary-expression before '*' token
gdal_wrap.cpp:856: error: 'value' was not declared in this scope
gdal_wrap.cpp:856: error: initializer expression list treated as 
compound expression

...continues similarly for many lines...
gdal_wrap.cpp:6962: error: invalid conversion from 'int' to 
'_zend_function*'
gdal_wrap.cpp:6966: error: cannot convert 'pval' to '_zend_function*' in 
assignment
gdal_wrap.cpp:6966: error: invalid conversion from 'int' to 
'_zend_function*'
gdal_wrap.cpp:6970: error: cannot convert 'pval' to '_zend_function*' in 
assignment
gdal_wrap.cpp:6970: error: invalid conversion from 'int' to 
'_zend_function*'
gdal_wrap.cpp:6974: error: cannot convert 'pval' to '_zend_function*' in 
assignment
gdal_wrap.cpp:6974: error: invalid conversion from 'int' to 
'_zend_function*'
make[2]: *** [gdal_wrap.o] Error 1
make[2]: Leaving directory `/usr/local/src/gdal-1.3.1/swig/php'
make[1]: *** [build] Error 2
make[1]: Leaving directory `/usr/local/src/gdal-1.3.1/swig'
make: *** [swig-target] Error 2


Any ideas what the problem is/how to fix it?

Regards,

Andrew

From Russell.Moffitt at noaa.gov  Mon Mar 13 17:52:37 2006
From: Russell.Moffitt at noaa.gov (Russell Moffitt)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] opendap config for gdal
Message-ID: <4415F7B5.3000809@noaa.gov>

I had trouble building GDAL with opendap/dods support using the standard
configure script.  The configure script was setting the include
directory to be dods-root/include/dap.  On my system, opendap put its
include files at dods-root/include/libdap by default.  Since configure
is already looking for the dap-config executable to get the proper
libraries for linking, it should probably get the -cflags from there,
too.  Here's what I did to change the configure script to work for me. 
It's really simple, but I thought I'd pass it on.
Aloha,
Russ

(around line 25808):

    DODS_LIB=$with_dods_root/lib
    DODS_INC="-I$with_dods_root/include -I$with_dods_root/include/dap"
    DODS_BIN=$with_dods_root/bin

        if test -x $DODS_BIN/opendap-config ; then
            LIBS="$LIBS `$DODS_BIN/opendap-config --libs`"
        DODS_INC="$DODS_INC `$DODS_BIN/opendap-config --cflags`"
    elif test -x $DODS_BIN/dap-config ; then
            LIBS="$LIBS `$DODS_BIN/dap-config --libs`"
        DODS_INC="$DODS_INC `$DODS_BIN/dap-config --cflags`"
    else
            LIBS="$LIBS -L$DODS_LIB -ldap++ -lpthread -lrx"

From haoboy at gmail.com  Wed Mar 15 23:44:55 2006
From: haoboy at gmail.com (Haobo Yu)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] image tile question
Message-ID: <1142484295.28848.18.camel@merc-l>

Hi,

I'm new to this list, please pardon my ignorance.

I have several image files (in GeoTIFF) about 10000x10000 pixels each,
and I'd like to serve it through MapServer.  Because of its size, I'm
thinking that it might help if I cut it to smaller tiles.  While
searching in this list's archive, I found that the main relevant theme
was to build a tiled GeoTIFF file to break long scanlines, but I didn't
find discussion about how to cut a big GeoTIFF to smaller pieces while
providing correct georeference information to each smaller file.  If I
understand it correctly: without correct georeference, gdaltindex will
not work.

My questions are:

(1) Should I be concerned about cutting a GeoTIFF file to smaller
pieces?  I can think of reasons that finding image blocks inside a TIFF
can be faster than finding one image in a directory of 3000 files.  But
in reality, is a big tiled GeoTIFF file good enough to be served through
a MapServer?  

(2) If I need to create smaller tile images, is there a good tool/script
to cut a large GeoTIFF file?  I don't mind writing one, but didn't want
to reinvent the wheel, either.

Thank you very much.

- Haobo



From warmerdam at pobox.com  Thu Mar 16 00:18:14 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] image tile question
In-Reply-To: <1142484295.28848.18.camel@merc-l>
References: <1142484295.28848.18.camel@merc-l>
Message-ID: <4418F516.1020307@pobox.com>

Haobo Yu wrote:
> Hi,
> 
> I'm new to this list, please pardon my ignorance.
> 
> I have several image files (in GeoTIFF) about 10000x10000 pixels each,
> and I'd like to serve it through MapServer.  Because of its size, I'm
> thinking that it might help if I cut it to smaller tiles.  While
> searching in this list's archive, I found that the main relevant theme
> was to build a tiled GeoTIFF file to break long scanlines, but I didn't
> find discussion about how to cut a big GeoTIFF to smaller pieces while
> providing correct georeference information to each smaller file.  If I
> understand it correctly: without correct georeference, gdaltindex will
> not work.
> 
> My questions are:
> 
> (1) Should I be concerned about cutting a GeoTIFF file to smaller
> pieces?  I can think of reasons that finding image blocks inside a TIFF
> can be faster than finding one image in a directory of 3000 files.  But
> in reality, is a big tiled GeoTIFF file good enough to be served through
> a MapServer?  

Haobo,

My general advice would be to use internal GeoTIFF tiling, and build
overviews.  For example:

gdal_translate -co TILED=YES old.tif new_tiled.tif
gdaladdo new_tiled.tif 2 4 8 16 32 64 128

This format should work quite efficiently with MapServer in many
use patterns, and is easy to manage.  Luckily 10K x 10K especially large
though it is substantial.

> (2) If I need to create smaller tile images, is there a good tool/script
> to cut a large GeoTIFF file?  I don't mind writing one, but didn't want
> to reinvent the wheel, either.

I'm not aware of a script, but you can use the gdal_translate to cut
out a chunk of an image, assigning appropriate georeferencing.

For instance:

gdal_translate -srcwin 0 0 2000 2000 in.tif out_0_0.tif
gdal_translate -srcwin 2000 0 2000 2000 in.tif out_1_0.tif
...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From haoboy at gmail.com  Thu Mar 16 01:00:11 2006
From: haoboy at gmail.com (Haobo Yu)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] image tile question
In-Reply-To: <4418F516.1020307@pobox.com>
References: <1142484295.28848.18.camel@merc-l>  <4418F516.1020307@pobox.com>
Message-ID: <1142488811.28848.30.camel@merc-l>

Frank,

I'll try it out.  To me, internal GeoTIFF tiling is a much more elegant
solution than cutting an image to pieces.  I'm glad that I don't have to
do the latter.

Thanks so much for your quick reply and clear instruction.

(And I have been enjoying your gdal a lot.  It's a marvel to me that you
have thin-plate transform built-in!)

Best,
Haobo

> My general advice would be to use internal GeoTIFF tiling, and build
> overviews.  For example:
> 
> gdal_translate -co TILED=YES old.tif new_tiled.tif
> gdaladdo new_tiled.tif 2 4 8 16 32 64 128
> 
> This format should work quite efficiently with MapServer in many
> use patterns, and is easy to manage.  Luckily 10K x 10K especially large
> though it is substantial.
> 
> > (2) If I need to create smaller tile images, is there a good tool/script
> > to cut a large GeoTIFF file?  I don't mind writing one, but didn't want
> > to reinvent the wheel, either.
> 
> I'm not aware of a script, but you can use the gdal_translate to cut
> out a chunk of an image, assigning appropriate georeferencing.
> 
> For instance:
> 
> gdal_translate -srcwin 0 0 2000 2000 in.tif out_0_0.tif
> gdal_translate -srcwin 2000 0 2000 2000 in.tif out_1_0.tif
> ...
> 
> Best regards,


From Dorit.Gross at fao.org  Thu Mar 16 03:30:04 2006
From: Dorit.Gross at fao.org (Gross, Dorit (SDRN))
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
Message-ID: <5290E77B1FE2FE40B82AA54158825F0601F2C8FA@hqosex01.fao.org>

Hi Frank, 

The original file is a SPOT VGT HDF that was converted into GeoTiff using
gdal_translate. The overviews are added just in the next step. The script was
running before the upgrade of GIS Libs. I tried the script for different SPOT
files after the upgrade but receive now the same error message for all of
them. 

I can provide you an image. Please let me know where it can be uploaded to.

Regards,
Dorit


-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
Warmerdam
Sent: 15 March 2006 17:32
To: Gross, Dorit (SDRN)
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther


Gross, Dorit (SDRN) wrote:
> Dear list,
> 
> I use gdaladdo to add overviews to a GeoTiff and receive following 
> error
> message:
> 
> /usr/local/gislibs/bin/gdaladdo -r average --config COMPRESS_OVERVIEW 
> LZW /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif 2 4 8 16 32 64 
> 128 0.Warning 1:
> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: 
> Wrong "StripByteCounts" field, ignoring and calculating from 
> imagelength Warning 1:
> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
> "StripByteCounts" field, ignoring and calculating from imagelength
> ..10...20...30...40...50...60...70...80...90..Warning 1:
> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
> "StripByteCounts" field, ignoring and calculating from imagelength Warning
1:
> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif: Wrong
> "StripByteCounts" field, ignoring and calculating from imagelength ERROR 1:
> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode: Not
enough
> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
> 
> ERROR 1: IReadBlock failed at X offset 0, Y offset 4
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4 
> ERROR 1:
> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode: Not
enough
> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
> 
> ...
> 
> Any ideas what could be the problem and how it could be solved?
> 
> We use the latest GIS Libs for Mac OS X Panther (2.2.1) including 
> GDAL/OGR v1.3.1 downloaded from Kyng Chaos.

Dorit,

It *sounds* like the input file may be corrupt in some sense.  Was it
generated with libtiff?  Can you make the original file available for me to
look at?

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dpinte at itae.be  Thu Mar 16 06:47:53 2006
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr and shapefiles trhough CVS
Message-ID: <1142509673.8431.20.camel@geru-itae>

Hi,

I have a multi-plaform project working with openev and gdal/ogr.

Test files are in my CVS repository and seems to be broken when updated
on the Windows platform. They have been commited with -ko argument but
it doesn't change anything.

Here is the output of ogrinfo :

On Linux (Debian/Sid gdal 1.3.1) :  

did@geru-itae:~/Documents/ucl/alert/python/alert/test/scenario2$ ogrinfo
polygones.shp
INFO: Open of `polygones.shp'
using driver `ESRI Shapefile' successful.
1: polygones (Polygon)


On Windows (XP with FWtools 1.0.9a - gdal 1.3.1 ):

C:\Program Files\FWTools1.0.0a9\bin>ogrinfo d:\ALERT\python\alert\test
\scenario2\polygones.shp
ERROR 1: Record count in .shp header is -12, which seems
unreasonable.  Assuming header is corrupt.
ERROR 1: Record count in .shp header is -12, which seems
unreasonable.  Assuming header is corrupt.
FAILURE:
Unable to open datasource `d:\ALERT\python\alert\test\scenario2
\polygones.shp' w
ith the following drivers.
  -> ESRI Shapefile
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> MapInfo File
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> Interlis 1
  -> Interlis 2
  -> SQLite
  -> ODBC
  -> PGeo
  -> OGDI
  -> PostgreSQL
  -> MySQL


How can I solve this problem ? 

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060316/b3534e2d/attachment.bin
From wolfgang.qual at gmx.net  Thu Mar 16 08:01:55 2006
From: wolfgang.qual at gmx.net (wqual)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Using geo::GDAL:
Message-ID: <200603161401.55984.wolfgang.qual@gmx.net>

Hi list,
I would like to write a small script in perl which should extract some 
information (like color tables, number of categories) of my GRASS raster 
file.

I installed the module geo::GDAL from [1],

my $data = 
Geo::GDAL::Open("/home/wqual/grassdata/spearfish60/PERMANENT/cellhd/aspect", 
GA_ReadOnly);
use Data::Dumper; 
print Dumper($data);

But everything I get is:

$VAR1 = bless( do{\(my $o = 136387672)}, 'Geo::GDAL::Dataset' );

Afterwards, I tried this: 
my $colors = $data->GetRasterColorTable;
use Data::Dumper; 
print Dumper($colors);

But I receive the following error message: "Can't locate object method 
"GetRasterColorTable" via package "Geo::GDAL::Dataset" at Dateiauslesen.pl 
line 36.

Hmm. I just do not know how to use this module for my purpose. Any ideas?


Best regards,

Wolfgang

[1] http://search.cpan.org/~sderle/Geo-GDAL-0.11/GDAL.pm

From ari.jolma at tkk.fi  Thu Mar 16 08:37:16 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] Using geo::GDAL:
In-Reply-To: <200603161401.55984.wolfgang.qual@gmx.net>
References: <200603161401.55984.wolfgang.qual@gmx.net>
Message-ID: <44196A0C.9070500@tkk.fi>

Disclaimers first: My answer may not be useful since I've got no
experience reading GRASS datasets with GDAL, and I'm going to write
about the swig-based Perl interface to GDAL.

use gdal;
$dataset = gdal::Open('grassraster');
$band = $dataset->GetRasterBand(1);
$colortable = $band->GetRasterColorTable;
for $i (0..$colortable->GetCount-1) { # I assume, or then 1..
	@color = $colortable->GetColorEntryAsRGB($i);
	print "$i @color\n";
}

other general information is a bit more difficult since the swig
interface does not seem to have methods like $band->GetStatistics etc.

what we have is here (poorly documented, good docs are here:
http://www.gdal.org/classGDALRasterBand.html)
http://map.hut.fi/gdal-perl/gdal.pod.html#gdal__band

it looks like you currently have to scan through the raster with
ReadRaster method to get the categories for example

Ari

wqual kirjoitti:
> Hi list,
> I would like to write a small script in perl which should extract some 
> information (like color tables, number of categories) of my GRASS raster 
> file.
> 
> I installed the module geo::GDAL from [1],
> 
> my $data = 
> Geo::GDAL::Open("/home/wqual/grassdata/spearfish60/PERMANENT/cellhd/aspect", 
> GA_ReadOnly);
> use Data::Dumper; 
> print Dumper($data);
> 
> But everything I get is:
> 
> $VAR1 = bless( do{\(my $o = 136387672)}, 'Geo::GDAL::Dataset' );
> 
> Afterwards, I tried this: 
> my $colors = $data->GetRasterColorTable;
> use Data::Dumper; 
> print Dumper($colors);
> 
> But I receive the following error message: "Can't locate object method 
> "GetRasterColorTable" via package "Geo::GDAL::Dataset" at Dateiauslesen.pl 
> line 36.
> 
> Hmm. I just do not know how to use this module for my purpose. Any ideas?
> 
> 
> Best regards,
> 
> Wolfgang
> 
> [1] http://search.cpan.org/~sderle/Geo-GDAL-0.11/GDAL.pm
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From warmerdam at pobox.com  Thu Mar 16 08:41:16 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr and shapefiles trhough CVS
In-Reply-To: <1142509673.8431.20.camel@geru-itae>
References: <1142509673.8431.20.camel@geru-itae>
Message-ID: <44196AFC.2090908@pobox.com>

Didrik Pinte wrote:
> Hi,
> 
> I have a multi-plaform project working with openev and gdal/ogr.
> 
> Test files are in my CVS repository and seems to be broken when updated
> on the Windows platform. They have been commited with -ko argument but
> it doesn't change anything.

Didrik,

When storing binary files in CVS you should also set the -kb flag or
else CVS may try and apply DOS/unix text conversion on the fly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From bartvde at xs4all.nl  Thu Mar 16 09:08:37 2006
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] MySQL ovf broken?
Message-ID: <19831.145.50.39.8.1142518117.squirrel@webmail.xs4all.nl>

Hi list,

to come back to our yesterday reported issue.

We have tried with current GDAL CVS, and still get a segmentation
violation. Reverting back to GDAL 1.3.1 makes everything work fine.

Using current CVS it does work through ODBC.

Best regards,
Bart


From dpinte at itae.be  Thu Mar 16 09:20:41 2006
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:02 2007
Subject: [Gdal-dev] ogr and shapefiles trhough CVS
In-Reply-To: <44196AFC.2090908@pobox.com>
References: <1142509673.8431.20.camel@geru-itae> <44196AFC.2090908@pobox.com>
Message-ID: <1142518841.8431.35.camel@geru-itae>

Le jeudi 16 mars 2006 ? 08:41 -0500, Frank Warmerdam a ?crit :
> Didrik Pinte wrote:
> > Hi,
> > 
> > I have a multi-plaform project working with openev and gdal/ogr.
> > 
> > Test files are in my CVS repository and seems to be broken when updated
> > on the Windows platform. They have been commited with -ko argument but
> > it doesn't change anything.
> 
> Didrik,
> 
> When storing binary files in CVS you should also set the -kb flag or
> else CVS may try and apply DOS/unix text conversion on the fly.
> 
> Best regards,

Hi Frank,

I've deleted the files from the repositories, then add them with -kb and
-ko but the problem stays.

I've tried the following : copy by scp the files from the same directory
on the linux laptop to the windows one --> ogrinfo works well. It's
definitely a problem of CVS but wich one ...

Sorry for polluting gdal-dev with such question.

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060316/6eae3b22/attachment.bin
From woklist at kyngchaos.com  Thu Mar 16 09:49:48 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
In-Reply-To: <5290E77B1FE2FE40B82AA54158825F0601F2C8FA@hqosex01.fao.org>
References: <5290E77B1FE2FE40B82AA54158825F0601F2C8FA@hqosex01.fao.org>
Message-ID: <2B847E36-8FF4-4AC9-B3DE-47198086173D@kyngchaos.com>

What about other TIFFs?

I'd like to get the image also so I can check my GIS Libs builds.   
I'll try some of my own TIFFs also.  There may a problem with my  
distribution.


On Mar 16, 2006, at 2:30 AM, Gross, Dorit (SDRN) wrote:

> Hi Frank,
>
> The original file is a SPOT VGT HDF that was converted into GeoTiff  
> using
> gdal_translate. The overviews are added just in the next step. The  
> script was
> running before the upgrade of GIS Libs. I tried the script for  
> different SPOT
> files after the upgrade but receive now the same error message for  
> all of
> them.
>
> I can provide you an image. Please let me know where it can be  
> uploaded to.
>
> Regards,
> Dorit
>
>
> -----Original Message-----
> From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
> Warmerdam
> Sent: 15 March 2006 17:32
> To: Gross, Dorit (SDRN)
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
>
>
> Gross, Dorit (SDRN) wrote:
>> Dear list,
>>
>> I use gdaladdo to add overviews to a GeoTiff and receive following
>> error
>> message:
>>
>> /usr/local/gislibs/bin/gdaladdo -r average --config COMPRESS_OVERVIEW
>> LZW /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif 2 4 8 16 32 64
>> 128 0.Warning 1:
>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:
>> Wrong "StripByteCounts" field, ignoring and calculating from
>> imagelength Warning 1:
>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/ 
>> dv06031_wrld.tif: Wrong
>> "StripByteCounts" field, ignoring and calculating from imagelength
>> ..10...20...30...40...50...60...70...80...90..Warning 1:
>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/ 
>> dv06031_wrld.tif: Wrong
>> "StripByteCounts" field, ignoring and calculating from imagelength  
>> Warning
> 1:
>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/ 
>> dv06031_wrld.tif: Wrong
>> "StripByteCounts" field, ignoring and calculating from imagelength  
>> ERROR 1:
>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode:  
>> Not
> enough
>> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 4
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4
>> ERROR 1:
>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode:  
>> Not
> enough
>> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
>>
>> ...
>>
>> Any ideas what could be the problem and how it could be solved?
>>
>> We use the latest GIS Libs for Mac OS X Panther (2.2.1) including
>> GDAL/OGR v1.3.1 downloaded from Kyng Chaos.
>
> Dorit,
>
> It *sounds* like the input file may be corrupt in some sense.  Was it
> generated with libtiff?  Can you make the original file available  
> for me to
> look at?
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGF, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe


From warmerdam at pobox.com  Thu Mar 16 10:06:00 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] MySQL ovf broken?
In-Reply-To: <19831.145.50.39.8.1142518117.squirrel@webmail.xs4all.nl>
References: <19831.145.50.39.8.1142518117.squirrel@webmail.xs4all.nl>
Message-ID: <44197ED8.6090802@pobox.com>

Bart van den Eijnden wrote:
> Hi list,
> 
> to come back to our yesterday reported issue.
> 
> We have tried with current GDAL CVS, and still get a segmentation
> violation. Reverting back to GDAL 1.3.1 makes everything work fine.
> 
> Using current CVS it does work through ODBC.

Bart,

OK, can you file a bug report on how we can reproduce this?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From Dorit.Gross at fao.org  Thu Mar 16 10:35:14 2006
From: Dorit.Gross at fao.org (Gross, Dorit (SDRN))
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
Message-ID: <5290E77B1FE2FE40B82AA54158825F0601F2C8FB@hqosex01.fao.org>

Just tried with a GeoTiff generated long time ago from a MODIS HDF (used the
MODIS Reprojection Tool then) and it causes the same error. Will provide you
and Frank with a data set to test.

Regards,
Dorit

-----Original Message-----
From: William Kyngesburye [mailto:woklist@kyngchaos.com] 
Sent: 16 March 2006 15:50
To: gdal-dev@lists.maptools.org
Cc: Gross, Dorit (SDRN)
Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther


What about other TIFFs?

I'd like to get the image also so I can check my GIS Libs builds.   
I'll try some of my own TIFFs also.  There may a problem with my  
distribution.


On Mar 16, 2006, at 2:30 AM, Gross, Dorit (SDRN) wrote:

> Hi Frank,
>
> The original file is a SPOT VGT HDF that was converted into GeoTiff
> using
> gdal_translate. The overviews are added just in the next step. The  
> script was
> running before the upgrade of GIS Libs. I tried the script for  
> different SPOT
> files after the upgrade but receive now the same error message for  
> all of
> them.
>
> I can provide you an image. Please let me know where it can be
> uploaded to.
>
> Regards,
> Dorit
>
>
> -----Original Message-----
> From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] On Behalf Of Frank 
> Warmerdam
> Sent: 15 March 2006 17:32
> To: Gross, Dorit (SDRN)
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
>
>
> Gross, Dorit (SDRN) wrote:
>> Dear list,
>>
>> I use gdaladdo to add overviews to a GeoTiff and receive following 
>> error
>> message:
>>
>> /usr/local/gislibs/bin/gdaladdo -r average --config COMPRESS_OVERVIEW 
>> LZW /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif 2 4 8 16 32 64 
>> 128 0.Warning 1:
>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:
>> Wrong "StripByteCounts" field, ignoring and calculating from 
>> imagelength Warning 1: 
>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>> dv06031_wrld.tif: Wrong
>> "StripByteCounts" field, ignoring and calculating from imagelength 
>> ..10...20...30...40...50...60...70...80...90..Warning 1: 
>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>> dv06031_wrld.tif: Wrong
>> "StripByteCounts" field, ignoring and calculating from imagelength
>> Warning
> 1:
>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>> dv06031_wrld.tif: Wrong
>> "StripByteCounts" field, ignoring and calculating from imagelength  
>> ERROR 1:
>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode:  
>> Not
> enough
>> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 4
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4 
>> ERROR 1:
>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode:
>> Not
> enough
>> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
>>
>> ...
>>
>> Any ideas what could be the problem and how it could be solved?
>>
>> We use the latest GIS Libs for Mac OS X Panther (2.2.1) including 
>> GDAL/OGR v1.3.1 downloaded from Kyng Chaos.
>
> Dorit,
>
> It *sounds* like the input file may be corrupt in some sense.  Was it 
> generated with libtiff?  Can you make the original file available
> for me to
> look at?
>
> Best regards,
> --
> --------------------------------------- 
> +--------------------------------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGF, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos@kyngchaos.com> http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe


From bartvde at xs4all.nl  Thu Mar 16 11:00:56 2006
From: bartvde at xs4all.nl (Bart van den Eijnden)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] MySQL ovf broken?
In-Reply-To: <44197ED8.6090802@pobox.com>
References: <19831.145.50.39.8.1142518117.squirrel@webmail.xs4all.nl>
	<44197ED8.6090802@pobox.com>
Message-ID: <11798.145.50.39.8.1142524856.squirrel@webmail.xs4all.nl>

Hi Frank,

I have opened up bug 1122 for this:

http://bugzilla.remotesensing.org/show_bug.cgi?id=1122

Let me know if you need more info.

Best regards,
Bart

> Bart van den Eijnden wrote:
>> Hi list,
>>
>> to come back to our yesterday reported issue.
>>
>> We have tried with current GDAL CVS, and still get a segmentation
>> violation. Reverting back to GDAL 1.3.1 makes everything work fine.
>>
>> Using current CVS it does work through ODBC.
>
> Bart,
>
> OK, can you file a bug report on how we can reproduce this?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGF, http://osgeo.org
>
>



From condit at sdsc.edu  Fri Mar 17 01:34:47 2006
From: condit at sdsc.edu (Christopher Condit)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] DODS and GDAL and Windows
Message-ID: <845AADAC1106E44996327D62097E4C6B8A9F0C@et.ad.sdsc.edu>

Ah - I found the problem.  If anyone wants to build this on windows be
sure compile with the /GR flag - for those dynamic_casts.  I can submit
my win32 makefile if there's any interest.  

The images also come in flipped across the x axis, but that's easy to
repair.  Also, gdal_translate occasionally crashes, but I haven't pinned
down and exact steps to reproduce.  

-----Original Message-----
From: James Gallagher [mailto:jhrg@mac.com] 
Sent: Thursday, March 16, 2006 11:33 AM
To: Christopher Condit
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] DODS and GDAL and Windows


On Mar 13, 2006, at 11:37 AM, Christopher Condit wrote:

> Is DODS/opendap still supported in gdal?
> Given the following DDS, is this the correct way to access?
> "http://queequeg.marine.rutgers.edu:9876/dodsC/expprod.nc.dds"
> Dataset {
>     Float64 lat[lat = 1024];
>     Float64 lon[lon = 2048];
>     Float64 time[time = 64];
>     Grid {
>      ARRAY:
>         Float32 export_production[time = 64][lat = 1024][lon = 2048];
>      MAPS:
>         Float64 time[time = 64];
>         Float64 lat[lat = 1024];
>         Float64 lon[lon = 2048];
>     } export_production;
>     Grid {
>      ARRAY:
>         Int16 pp_mask[lat = 1024][lon = 2048];
>      MAPS:
>         Float64 lat[lat = 1024];
>         Float64 lon[lon = 2048];
>     } pp_mask;
> } expprod.nc;
>
> http://queequeg.marine.rutgers.edu:9876/dodsC/expprod.nc? 
> export_producti
> on.export_production[0][y][x]

This looks fine to me. What version of libdap are you using?

James
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Christopher
> Condit
> Sent: Friday, March 10, 2006 10:45 AM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] DODS and GDAL and Windows
>
> I'm trying to move DODS data into a more usable format using
> gdal_translate, but am having some troubles.  I've got the latest GDAL
> from CVS - and libDAP installed on my Windows 2k3 machine.  I updated
> the nmake to include the appropriate references to PTHREAD and  
> CURL.  I
> created the makefile.vc for DODS.  Everything builds and links.
>
> C:\develop\gdal>apps\gdalinfo "http://queequeg.marine.rutgers.
> edu:9876/dodsC/expprod.nc.ascii?export_production.export_production 
> [0][y
> ][x]"
> Warning 1: I connected to the URL but could not get a DAP 3.x version
> string
> from the server.  I will continue to connect but access may fail.
> Assertion failed: OK(), file ..\Error.cc, line 320
>
> This application has requested the Runtime to terminate it in an  
> unusual
> way.
> Please contact the application's support team for more information.
>
> I stepped through with the debugger, and this crash is coming from  
> here:
> Dodsdataset2.cpp:1237
> DODSDataset *poDODS = dynamic_cast<DODSDataset *>(poDS);
>
> 1) This should work on Windows, right?
> 2) Am I referencing the data source incorrectly?
> 3) Any thoughts?
>
> Thanks!
>
> Chris
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

--
James Gallagher                jgallagher at opendap.org
OPeNDAP, Inc                   406.723.8663



From wolfgang.qual at gmx.net  Fri Mar 17 06:35:44 2006
From: wolfgang.qual at gmx.net (wqual)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Using geo::GDAL: [solved!]
In-Reply-To: <44196A0C.9070500@tkk.fi>
References: <200603161401.55984.wolfgang.qual@gmx.net>
	<44196A0C.9070500@tkk.fi>
Message-ID: <200603171235.45232.wolfgang.qual@gmx.net>

Hi Ari,
many thanks very for your advice. I first had to install gdal-Swig-Perl on my 
Debian machine [1]

1) get the source package of libgdal:
apt-get -b source libgdal1

2)install gdal-swig-perl
cd gdal-1.3.1/

cd swig/perl/
make generate
make build

3) create debian-package with checkinstall:
checkinstall

Afterwards, I tested your proposed script (with little modifications) - and it 
worked! 

use gdal;
my $dataset = 
gdal::Open('/home/wqual/grassdata/spearfish60/PERMANENT/cellhd/landcover.30m');
my $band = $dataset->GetRasterBand(1);
my $colortable = $band->GetRasterColorTable;
my $i;
my @color;
for $i (0..$colortable->GetCount-1) { # I assume, or then 1..
        @color = $colortable->GetColorEntryAsRGB($i);
        print "$i @color\n";
}

Result:
wqual@standalone:~/xmltest$ perl script_swig.pl
0 0 0 0 0
1 0 0 0 0
2 0 0 0 0
3 0 0 0 0
4 0 0 0 0
5 0 0 0 0
6 0 0 0 0
7 0 0 0 0
8 0 0 0 0
9 0 0 0 0
10 0 0 0 0
11 0 0 255 255
12 25 20 230 255
13 51 40 204 255
14 76 61 179 255
15 102 81 153 255
[a.s.f.]

Best regards,

Wolfgang

[1] http://map.hut.fi/gdal-perl/

Am Donnerstag 16 M?rz 2006 pH:37:14 nachmittags/abends schrieb Ari Jolma:
> Disclaimers first: My answer may not be useful since I've got no
> experience reading GRASS datasets with GDAL, and I'm going to write
> about the swig-based Perl interface to GDAL.
>
> use gdal;
> $dataset = gdal::Open('grassraster');
> $band = $dataset->GetRasterBand(1);
> $colortable = $band->GetRasterColorTable;
> for $i (0..$colortable->GetCount-1) { # I assume, or then 1..
> 	@color = $colortable->GetColorEntryAsRGB($i);
> 	print "$i @color\n";
> }
>
> other general information is a bit more difficult since the swig
> interface does not seem to have methods like $band->GetStatistics etc.
>
> what we have is here (poorly documented, good docs are here:
> http://www.gdal.org/classGDALRasterBand.html)
> http://map.hut.fi/gdal-perl/gdal.pod.html#gdal__band
>
> it looks like you currently have to scan through the raster with
> ReadRaster method to get the categories for example
>
> Ari
>
> wqual kirjoitti:
> > Hi list,
> > I would like to write a small script in perl which should extract some
> > information (like color tables, number of categories) of my GRASS raster
> > file.
> >
> > I installed the module geo::GDAL from [1],
> >
> > my $data =
> > Geo::GDAL::Open("/home/wqual/grassdata/spearfish60/PERMANENT/cellhd/aspec
> >t", GA_ReadOnly);
> > use Data::Dumper;
> > print Dumper($data);
> >
> > But everything I get is:
> >
> > $VAR1 = bless( do{\(my $o = 136387672)}, 'Geo::GDAL::Dataset' );
> >
> > Afterwards, I tried this:
> > my $colors = $data->GetRasterColorTable;
> > use Data::Dumper;
> > print Dumper($colors);
> >
> > But I receive the following error message: "Can't locate object method
> > "GetRasterColorTable" via package "Geo::GDAL::Dataset" at
> > Dateiauslesen.pl line 36.
> >
> > Hmm. I just do not know how to use this module for my purpose. Any ideas?
> >
> >
> > Best regards,
> >
> > Wolfgang
> >
> > [1] http://search.cpan.org/~sderle/Geo-GDAL-0.11/GDAL.pm
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev


From jhrg at mac.com  Thu Mar 16 14:32:49 2006
From: jhrg at mac.com (James Gallagher)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] DODS and GDAL and Windows
In-Reply-To: <845AADAC1106E44996327D62097E4C6B8A9C93@et.ad.sdsc.edu>
References: <845AADAC1106E44996327D62097E4C6B8A9C93@et.ad.sdsc.edu>
Message-ID: <C6CA8CE6-7675-4947-B2A0-D2DA20A18BD5@mac.com>


On Mar 13, 2006, at 11:37 AM, Christopher Condit wrote:

> Is DODS/opendap still supported in gdal?
> Given the following DDS, is this the correct way to access?
> "http://queequeg.marine.rutgers.edu:9876/dodsC/expprod.nc.dds"
> Dataset {
>     Float64 lat[lat = 1024];
>     Float64 lon[lon = 2048];
>     Float64 time[time = 64];
>     Grid {
>      ARRAY:
>         Float32 export_production[time = 64][lat = 1024][lon = 2048];
>      MAPS:
>         Float64 time[time = 64];
>         Float64 lat[lat = 1024];
>         Float64 lon[lon = 2048];
>     } export_production;
>     Grid {
>      ARRAY:
>         Int16 pp_mask[lat = 1024][lon = 2048];
>      MAPS:
>         Float64 lat[lat = 1024];
>         Float64 lon[lon = 2048];
>     } pp_mask;
> } expprod.nc;
>
> http://queequeg.marine.rutgers.edu:9876/dodsC/expprod.nc? 
> export_producti
> on.export_production[0][y][x]

This looks fine to me. What version of libdap are you using?

James
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Christopher
> Condit
> Sent: Friday, March 10, 2006 10:45 AM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] DODS and GDAL and Windows
>
> I'm trying to move DODS data into a more usable format using
> gdal_translate, but am having some troubles.  I've got the latest GDAL
> from CVS - and libDAP installed on my Windows 2k3 machine.  I updated
> the nmake to include the appropriate references to PTHREAD and  
> CURL.  I
> created the makefile.vc for DODS.  Everything builds and links.
>
> C:\develop\gdal>apps\gdalinfo "http://queequeg.marine.rutgers.
> edu:9876/dodsC/expprod.nc.ascii?export_production.export_production 
> [0][y
> ][x]"
> Warning 1: I connected to the URL but could not get a DAP 3.x version
> string
> from the server.  I will continue to connect but access may fail.
> Assertion failed: OK(), file ..\Error.cc, line 320
>
> This application has requested the Runtime to terminate it in an  
> unusual
> way.
> Please contact the application's support team for more information.
>
> I stepped through with the debugger, and this crash is coming from  
> here:
> Dodsdataset2.cpp:1237
> DODSDataset *poDODS = dynamic_cast<DODSDataset *>(poDS);
>
> 1) This should work on Windows, right?
> 2) Am I referencing the data source incorrectly?
> 3) Any thoughts?
>
> Thanks!
>
> Chris
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

--
James Gallagher                jgallagher at opendap.org
OPeNDAP, Inc                   406.723.8663


From schuyler at nocat.net  Fri Mar 17 10:49:33 2006
From: schuyler at nocat.net (Schuyler Erle)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Using geo::GDAL:
In-Reply-To: <200603161401.55984.wolfgang.qual@gmx.net>
References: <200603161401.55984.wolfgang.qual@gmx.net>
Message-ID: <20060317154933.GZ22521@vishnu.tridity.org>

* On 16-Mar-2006 at  5:04AM PST, wqual said:
> 
> I installed the module geo::GDAL from [1],

Now that gdal-swig-perl exists, I would say that Geo::GDAL is
deprecated. I should see about removing it from the CPAN. Thanks for
the reminder.

SDE

From warmerdam at pobox.com  Fri Mar 17 13:46:23 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdal warp code silently skipping datum shift
In-Reply-To: <d0b0f8b0603101618n2681c963r2714fc48d47badde@mail.google.com>
References: <d0b0f8b0603101618n2681c963r2714fc48d47badde@mail.google.com>
Message-ID: <441B03FF.3090104@pobox.com>

John Johnson wrote:
> So here's my question. Is there any way that GDAL can detect that it 
> "should" be doing a datum shift, but is missing the necessary 
> parameters? If so it could fail to warp wather than silently producing a 
> bad warp. Looking at the data structres in data/gcs.csv I'm not sure 
> there is currently enough information to distinguish between a datum 
> that doesn't need to be shifted and one that needs to but is missing the 
> necessary parameters.

John,

Any datum completely missing a TOWGS84 clause, and not the specially
handled NAD27 datums using grid shift files would be considered lacking
datum shift information and could be flagged accordingly.   However,
I would be very hesitant to have gdalwarp just fail for these cases.
It might be better to have it issue a warning in these cases.

Internally what I imagine I would do is:
  1) Are the input and output the same datum?  (based on datum EPSG code,
     or lacking that the datum name).  If so, assume ok.

  2) Translate both coordinate systems to PROJ.4  Do both have datum
     information (ie. +towgs84 or +nadgrids= clauses)  If so, assume
     ok.

  3) A change of datum seems to be happening, but there is no apparent
     datum shift info, issue a warning.

Potentially I could accomplish this in the OGRCreateCoordinateTransformation()
function.  Possibly adding a flag indicating if missing datum shifts should
be:
  - handled as currently (quietly convert just based on ellipsoid)
  - issue a warning.
  - terminate with a failure.

Ideally I would also like to come up with a way of identifying
transformations where multiple datum shift strategies are avalable
and selecting one.  But that would require more substantial efforts.

If you would like to file a bug report on this issue, I can try and queue
up a work item.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From jdjohnso at google.com  Fri Mar 17 14:09:51 2006
From: jdjohnso at google.com (John Johnson)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdal warp code silently skipping datum shift
In-Reply-To: <441B03FF.3090104@pobox.com>
References: <d0b0f8b0603101618n2681c963r2714fc48d47badde@mail.google.com>
	<441B03FF.3090104@pobox.com>
Message-ID: <d0b0f8b0603171109p61121772j40827176db09c41@mail.google.com>

> Potentially I could accomplish this in the
> OGRCreateCoordinateTransformation()
> function.  Possibly adding a flag indicating if missing datum shifts
> should
> be:
>   - handled as currently (quietly convert just based on ellipsoid)


I understand your desire to be able to preserve existing functionality, but
would this approach ever give correct results?

 If you would like to file a bug report on this issue, I can try and queue
> up a work item.
>

Will do.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060317/09450dd2/attachment.html
From warmerdam at pobox.com  Fri Mar 17 14:28:18 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdal warp code silently skipping datum shift
In-Reply-To: <d0b0f8b0603171109p61121772j40827176db09c41@mail.google.com>
References: <d0b0f8b0603101618n2681c963r2714fc48d47badde@mail.google.com>	
	<441B03FF.3090104@pobox.com>
	<d0b0f8b0603171109p61121772j40827176db09c41@mail.google.com>
Message-ID: <441B0DD2.2040101@pobox.com>

John Johnson wrote:
> 
>     Potentially I could accomplish this in the
>     OGRCreateCoordinateTransformation()
>     function.  Possibly adding a flag indicating if missing datum shifts
>     should
>     be:
>       - handled as currently (quietly convert just based on ellipsoid)
> 
> 
> I understand your desire to be able to preserve existing functionality, 
> but would this approach ever give correct results?

John,

Well, it depends.  It might be that the datums are quite similar, or that
the error would be in acceptable tolerances for an application.  For instance,
many modern datums are reasonably close to WGS84.  And some applications,
such as world mapping could care less about datum shift differences.

>      If you would like to file a bug report on this issue, I can try and
>     queue
>     up a work item.
> 
> 
> Will do.

Thanks,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From bfraser at geoanalytic.com  Fri Mar 17 14:31:26 2006
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdal warp code silently skipping datum shift
References: <d0b0f8b0603101618n2681c963r2714fc48d47badde@mail.google.com>
	<441B03FF.3090104@pobox.com>
Message-ID: <032501c649f9$61b53df0$160002c0@shark>

Frank,

  I'd love to see a message (from proj? gdal?) to indicate which method (and
which grid file if applicable) the tool was using to resolve the difference
in datums.  It would take away a lot of the worry when using proj/gdal to do
datum conversions based on NTv2, etc.

Brent Fraser

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: "John Johnson" <jdjohnso@google.com>
Cc: <gdal-dev@lists.maptools.org>
Sent: Friday, March 17, 2006 11:46 AM
Subject: Re: [Gdal-dev] gdal warp code silently skipping datum shift


> John Johnson wrote:
> > So here's my question. Is there any way that GDAL can detect that it
> > "should" be doing a datum shift, but is missing the necessary
> > parameters? If so it could fail to warp wather than silently producing a
> > bad warp. Looking at the data structres in data/gcs.csv I'm not sure
> > there is currently enough information to distinguish between a datum
> > that doesn't need to be shifted and one that needs to but is missing the
> > necessary parameters.
>
> John,
>
> Any datum completely missing a TOWGS84 clause, and not the specially
> handled NAD27 datums using grid shift files would be considered lacking
> datum shift information and could be flagged accordingly.   However,
> I would be very hesitant to have gdalwarp just fail for these cases.
> It might be better to have it issue a warning in these cases.
>
> Internally what I imagine I would do is:
>   1) Are the input and output the same datum?  (based on datum EPSG code,
>      or lacking that the datum name).  If so, assume ok.
>
>   2) Translate both coordinate systems to PROJ.4  Do both have datum
>      information (ie. +towgs84 or +nadgrids= clauses)  If so, assume
>      ok.
>
>   3) A change of datum seems to be happening, but there is no apparent
>      datum shift info, issue a warning.
>
> Potentially I could accomplish this in the
OGRCreateCoordinateTransformation()
> function.  Possibly adding a flag indicating if missing datum shifts
should
> be:
>   - handled as currently (quietly convert just based on ellipsoid)
>   - issue a warning.
>   - terminate with a failure.
>
> Ideally I would also like to come up with a way of identifying
> transformations where multiple datum shift strategies are avalable
> and selecting one.  But that would require more substantial efforts.
>
> If you would like to file a bug report on this issue, I can try and queue
> up a work item.
>
> Best regards,
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGF, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Mar 17 14:49:34 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdal warp code silently skipping datum shift
In-Reply-To: <032501c649f9$61b53df0$160002c0@shark>
References: <d0b0f8b0603101618n2681c963r2714fc48d47badde@mail.google.com>
	<441B03FF.3090104@pobox.com> <032501c649f9$61b53df0$160002c0@shark>
Message-ID: <441B12CE.1060806@pobox.com>

Brent Fraser wrote:
> Frank,
> 
>   I'd love to see a message (from proj? gdal?) to indicate which method (and
> which grid file if applicable) the tool was using to resolve the difference
> in datums.  It would take away a lot of the worry when using proj/gdal to do
> datum conversions based on NTv2, etc.

Brent,

I hadn't actually contemplated reporting which grid shift file is used.
In fact, in a single call to pj_transform(), it is possible for multiple
grid shift files to get used depending on where the points happen to fall.

But we could at least report which PROJ.4 clauses (towgs84 or nadgrids)
is being used for the source and destination coordinate system.  Perhaps
PROJ.4 could be extended with a function to report the mechanisms used
for a give sample point.  This would be a fair amount of work though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From woklist at kyngchaos.com  Sun Mar 19 13:14:48 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] format plugins
Message-ID: <3ABF1C13-A0F2-4B5D-83C2-C00B8DDDA57D@kyngchaos.com>

How simple is it to build formats as GDAL plugins instead of embedded  
in the main library? (like the GRASS plugin)

I would like to build some of the existing problematic formats as  
plugins, so they are more easily added to a binary distribution.   
This would inlcude formats with restrictive licenses like MrSID, and  
others with problematic support on different versions of an OS (ie  
MrSID, DODS, ECW, other C++-based on Mac OS X Panther vs Tiger).

I don't need all the gorey details of the driver API and implementing  
it, since the formats exist, I just need the configure/make part.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe


From gdal-dev at ostertag.name  Sun Mar 19 15:42:42 2006
From: gdal-dev at ostertag.name (Joerg Ostertag)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Example gdal.m4/configure.ac for GDAL
Message-ID: <200603192142.42990.gdal-dev@ostertag.name>

Hi,

I like to include the GDAL library into the GPSDrive project. I'm not sure how 
I should define the dependency to GDAL as an autoconf dependency.
Is there any good example how to do this. Maybe a gdal.m4 or an example 
snippet of configure.ac?

Thanks 

Joerg

-- 

http://www.ostertag.name/

From gdal-dev at ostertag.name  Mon Mar 20 01:49:53 2006
From: gdal-dev at ostertag.name (Joerg Ostertag)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Fwd: [ gpsdrive ] Building gdal Suse rpm
Message-ID: <200603200749.58457.gdal-dev@ostertag.name>

This might be of interest to some of you.

> Andreas Schneider <mail@cynapses.org> wrote
> I've created a suse gdal rpm today without a problem. Maybe it will help 
> someone :) 

./configure \
 --prefix=/usr \
 --with-png=internal \
 --with-jpeg=internal \
 --with-gif=internal \
 --with-geotiff=internal \
 --with-libtiff=internal \
 --with-pymodir=/usr/include/python \
 --with-pg=no \
 --with-netcdf=no \
 --with-mrsid=no \
 --with-hdf4=no \
 --with-sqlite=no \
 --with-mysql=no \
 --with-odbc=no \
 --with-jasper=no \
 --with-grass=no \
 --with-libgrass=no \
 --with-ogdi=no \
 --with-xerces=no \
 --with-geos=no
-------------- next part --------------
An embedded message was scrubbed...
From: Andreas Schneider <mail@cynapses.org>
Subject: Re: [ gpsdrive ] gpsdrive and gdal.... going crazy...
Date: Mon, 20 Mar 2006 00:58:07 +0100
Size: 4299
Url: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060320/8f92c7bb/attachment.mht
From vdharan2001 at gmail.com  Thu Mar 16 19:41:42 2006
From: vdharan2001 at gmail.com (Vidhiyadharan Nadarajah)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
Message-ID: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>

Hi,

Iam a begineer in this field. I have been using OGR for the past 6 months.
I have built a windows application (using VC++) which is runing perfectly
fine in WIN2K.
I have built this application based on the sample provided in the OGR
Tutorial (http://gdal.maptools.org/ogr/ogr_apitut.html). Reading a point
layer is alone described in the tutorial and i have added some code for
reading the polygon layer.
My problem is the same application crashes in WinXP. The function
"poLayer->GetNextFeature()" throws an exception in winXP.Iam unable to find
the exact exception.

I have compiled GDAL1.3.0 and PROJ4 and linking the DLL in my application.
Please find below the piece of code that Iam using. Please help me to find
out the mistake that Iam doing. I can also send the VC++ workspace and the
shape file, if it is needed for finding out the problem.


#include "stdafx.h"
#include "ogrsf_frmts.h"

int main()
{

    OGRRegisterAll();
    OGRDataSource       *poDS;
    poDS = OGRSFDriverRegistrar::Open( "C:\ind.shp", FALSE );
    if( poDS == NULL )
    {
        printf( "Open failed.\n%s" );
        exit( 1 );
    }

    OGRLayer  *poLayer;
    poLayer = poDS->GetLayerByName( "india_ds" );
    OGRFeature *poFeature;
    poLayer->ResetReading();
    while( (poFeature = poLayer->GetNextFeature()) != NULL )
    {
        OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
        int iField;

        for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
        {
            OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );

            if( poFieldDefn->GetType() == OFTInteger )
                printf( "%d,", poFeature->GetFieldAsInteger( iField ) );
            else if( poFieldDefn->GetType() == OFTReal )
                printf( "%.3f,", poFeature->GetFieldAsDouble(iField) );
            else if( poFieldDefn->GetType() == OFTString )
                printf( "%s,", poFeature->GetFieldAsString(iField) );
            else
                printf( "%s,", poFeature->GetFieldAsString(iField) );
        }

        OGRGeometry *poGeometry;
        poGeometry = poFeature->GetGeometryRef();

        if( poGeometry != NULL
            && wkbFlatten(poGeometry->getGeometryType()) == wkbPoint )
        {
            OGRPoint *poPoint = (OGRPoint *) poGeometry;

            printf( "%.3f,%.3f\n", poPoint->getX(), poPoint->getY() );
        }
        else
        {
            printf( "no point geometry\n" );
        }


        if( poGeometry != NULL
            && wkbFlatten(poGeometry->getGeometryType()) == wkbPolygon )
        {
 			OGRPolygon *poPolygon = (OGRPolygon *)poGeometry ;
			OGRLinearRing *poLinearRing ;
			poLinearRing = poPolygon->getExteriorRing();
			OGRPoint *poPoint = (OGRPoint *) poGeometry;

			int i2 ;
			int i3  = poLinearRing->getNumPoints();
			for(i2=0;i2<i3;i2++){
				poLinearRing->getPoint(i2,poPoint);
				printf( "%.3f,%.3f\n", poPoint->getX(), poPoint->getY() );
			}
        }
        else
        {
            printf( "no polygon geometry\n" );
        }

    //OGRFeature::DestroyFeature( poFeature );
    }
	OGRFeature::DestroyFeature( poFeature );
    OGRDataSource::DestroyDataSource( poDS );
	return 0;
}

Best Regards,
N.Vidhiyadharan



--
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.12/266 - Release Date: 21/02/2006


From mateusz at loskot.net  Mon Mar 20 07:30:23 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
In-Reply-To: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>
References: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>
Message-ID: <441EA05F.2000503@loskot.net>

Vidhiyadharan Nadarajah wrote:
> Hi,
> 
> Iam a begineer in this field. I have been using OGR for the past 6 months.
> I have built a windows application (using VC++) which is runing perfectly
> fine in WIN2K.
> I have built this application based on the sample provided in the OGR
> Tutorial (http://gdal.maptools.org/ogr/ogr_apitut.html). Reading a point
> layer is alone described in the tutorial and i have added some code for
> reading the polygon layer.
> My problem is the same application crashes in WinXP. The function
> "poLayer->GetNextFeature()" throws an exception in winXP.Iam unable to find
> the exact exception.
> 
> I have compiled GDAL1.3.0 and PROJ4 and linking the DLL in my application.
> Please find below the piece of code that Iam using. Please help me to find
> out the mistake that Iam doing. I can also send the VC++ workspace and the
> shape file, if it is needed for finding out the problem.
> 
> 
> #include "stdafx.h"
> #include "ogrsf_frmts.h"
> 
> int main()
> {
> 
>     OGRRegisterAll();
>     OGRDataSource       *poDS;
>     poDS = OGRSFDriverRegistrar::Open( "C:\ind.shp", FALSE );
>     if( poDS == NULL )
>     {
>         printf( "Open failed.\n%s" );
>         exit( 1 );
>     }
> 
>     OGRLayer  *poLayer;
>     poLayer = poDS->GetLayerByName( "india_ds" );
^^^^^^^^^^^^^^^^^^^^^^^^^

I'd supose here you are getting null pointer.
Add simple test if poLayer is a null pointer:

     if (NULL == poLayer)
     {
         printf("Layer not found\n");
         OGRDataSource::DestroyDataSource(poDS);
         return -1;
     }

And you will see if this is a problem.

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From Tom.Kralidis at ec.gc.ca  Mon Mar 20 08:24:45 2006
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] ogr2ogr SetAttributeFilter error
Message-ID: <2576812186CDD411BF1500508B6DCE950DB33085@ecnwri1.ontario.int.ec.gc.ca>


Hi,

Using:

OS: Linux
GDAL/OGR: 1.2.6
proj: 4.4.9

We're trying to create a GML document from a .ovf file:

$ cat ./rtwl.ovf

<OGRVRTDataSource>
  <OGRVRTLayer name="rtwl">
    <SrcDataSource>ODBC:foo/foo@foodb</SrcDataSource>
    <SrcSQL>select * from RMRWL</SrcSQL>
    <GeometryType>wkbPoint</GeometryType>
    <LayerSRS>WGS84</LayerSRS>
    <GeometryField encoding="PointFromColumns" x="value"
y="accesstype"/>
  </OGRVRTLayer>
</OGRVRTDataSource>

$ ogr2ogr_cmd -f GML rtwl.gml rtwl.ovf

...and get the following error message:

ERROR 1: SetAttributeFilter() not supported on ExecuteSQL() results.

...it appears that the GML document is output the way we expect it, but
I'm not sure what the above error message means.

Any help would be appreciated.  Especially if it doesn't involve
(immediately) upgrading :)

Thanks

..Tom



From ari.jolma at tkk.fi  Mon Mar 20 08:33:18 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
In-Reply-To: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>
References: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>
Message-ID: <441EAF1E.5040009@tkk.fi>

Vidhiyadharan Nadarajah kirjoitti:
> My problem is the same application crashes in WinXP. The function
> "poLayer->GetNextFeature()" throws an exception in winXP.Iam unable to find
> the exact exception.
...
> 
>     poLayer->ResetReading();
>     while( (poFeature = poLayer->GetNextFeature()) != NULL )
>     {
>     //OGRFeature::DestroyFeature( poFeature );
>     }
> 	OGRFeature::DestroyFeature( poFeature );
>     OGRDataSource::DestroyDataSource( poDS );
> 	return 0;

You should call DestroyFeature( poFeature ) within the loop. I just
looked at similar code of mine and I had also commented out
DestroyFeature, probably because of crashes. I tried removing it now and
there is no problem, I'm using the latest from CVS.

I don't see any reason for the crash. If you can reproduce the crash,
try adding some print statements or debug otherwise to see when the
crash happens. You could also try with the latest GDAL.

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From vdharan2001 at gmail.com  Mon Mar 20 08:42:47 2006
From: vdharan2001 at gmail.com (vdharan nadra)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
Message-ID: <d29760880603200542q1562815bg3710cd4c4b17ff38@mail.gmail.com>

Dear Mateusz ?oskot,
Thanks for your suggestion.But I have made a mistake while pasting my code .
The actual code is as follows and it still has the problem running in XP. I
have also added the check for NULL layer as you have suggested. In XP i get
the output of "printf( "%.3f,%.3f\n", poPoint->getX(), poPoint->getY() );"
for few polygons and then the application crashes.

Best Regards,
N.Vidhiyadharan


#include "stdafx.h"
#include "ogrsf_frmts.h"


int main()

{

 OGRRegisterAll();
    OGRDataSource       *poDS;
    poDS = OGRSFDriverRegistrar::Open( "F:\\india\\india_ds.shp", FALSE );
    if( poDS == NULL )
    {
        printf( "Open failed.\n%s" );
        exit( 1 );
    }

    OGRLayer  *poLayer;
    poLayer = poDS->GetLayerByName( "india_ds" );
    OGRFeature *poFeature;
    poLayer->ResetReading();
 if (NULL == poLayer)
  {
   printf("Layer not found\n");
   OGRDataSource::DestroyDataSource(poDS);
   return -1;
 }
    while( (poFeature = poLayer->GetNextFeature()) != NULL )
    {
        OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
        int iField;

        for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
        {
            OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );

            if( poFieldDefn->GetType() == OFTInteger )
                printf( "%d,", poFeature->GetFieldAsInteger( iField ) );
            else if( poFieldDefn->GetType() == OFTReal )
                printf( "%.3f,", poFeature->GetFieldAsDouble(iField) );
            else if( poFieldDefn->GetType() == OFTString )
                printf( "%s,", poFeature->GetFieldAsString(iField) );
            else
                printf( "%s,", poFeature->GetFieldAsString(iField) );
        }

        OGRGeometry *poGeometry;
        poGeometry = poFeature->GetGeometryRef();

        if( poGeometry != NULL
            && wkbFlatten(poGeometry->getGeometryType()) == wkbPoint )
        {
            OGRPoint *poPoint = (OGRPoint *) poGeometry;

            printf( "%.3f,%.3f\n", poPoint->getX(), poPoint->getY() );
        }
        else
        {
            printf( "no point geometry\n" );
        }


        if( poGeometry != NULL
            && wkbFlatten(poGeometry->getGeometryType()) == wkbPolygon )
        {
    OGRPolygon *poPolygon = (OGRPolygon *)poGeometry ;
   OGRLinearRing *poLinearRing ;
   poLinearRing = poPolygon->getExteriorRing();
   OGRPoint *poPoint = (OGRPoint *) poGeometry;

   int i2 ;
   int i3  = poLinearRing->getNumPoints();
   for(i2=0;i2<i3;i2++){
    poLinearRing->getPoint(i2,poPoint);
    printf( "%.3f,%.3f\n", poPoint->getX(), poPoint->getY() );
   }
        }
        else
        {
            printf( "no polygon geometry\n" );
        }

    //OGRFeature::DestroyFeature( poFeature );
    }
 OGRFeature::DestroyFeature( poFeature );
    OGRDataSource::DestroyDataSource( poDS );
 return 0;
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060320/803ecb4b/attachment.html
From michael.paul at tao.es  Mon Mar 20 08:41:36 2006
From: michael.paul at tao.es (Paul, Michael)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] SDE driver crashes in Windows
Message-ID: <F351B61A81F4F54F92740EA8B510C2B103BB3509@ESGDASMA5VX0014.ib.gedas.vwg>

Hi,
 
I have obtained the SDE driver from latest CVS snapshot and compiled on
Windows with VC8 (Visual Studio 2005). 
 
As I am accessing the GDAL dll from C# I had to make some additional steps,
which are not necessary when compiling with earlier versions of Visual C++:
- nmake /f makefile.vc
- mt /manifest gdal13.dll.manifest /outputresource:gdal13.dll;#2
(this is new to VS 2005)
- cd ogr/ogrsf_formats/sde
- nmake /f makefile.vc ogr_SDE.dll
- mt /manifest ogr_SDE.dll.manifest /outputresource:ogr_SDE.dll;#2
(this is new to VS 2005)
 
Thanks to MS, VC8 automatically generates a .manifest file for all DLLs
generated by GDAL makefiles (I suppose this will apply to almost any
existing makefiles ...). And thanks to MS, this additional .manifest file is
useless for C# environments and must be included as resource with ID 2.
Without that people will obtain a fine DllNotFoundException from .Net ("the
specified module could not be found" or sth.) AND from C++ apps linking to
GDAL dll. 
 
Now, my really problem: using the new SDE driver already everything is
working, except access to date fields. Currently I am obtaining a Win32
exception, after that the application is terminated automatically by vcrt.
The error occurs within the following line ogrsdelayer.cpp ( line 799):
strftime( szDate, sizeof(szDate), "%T %m/%d/%Y", &sDateVal );

 

I have debugged and sDateVal seems to contain valid data (Mar. 15th of
2004):

tm_sec=0
tm_min=0
tm_hour=0
tm_mday=15
tm_mon=2
tm_year=104
tm_wday=1
tm_yday=75
tm_isdst=-1

In other cases, many of these date errors are having to do with regional
settings. I am not an expert in C++, but looking at the following URL I did
not see any mention to the %T format string (may be it is only defined in
UNIX systems?):
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vclib/html/
_crt_strftime.2c_.wcsftime.asp
<http://msdn.microsoft.com/library/default.asp?url=/library/en-us/vclib/html
/_crt_strftime.2c_.wcsftime.asp> 

For the moment, I thought a classic sprintf may help:

sprintf(szDate, "%02i:%02i:%02i
%02i/%02i/%i",sDateVal.tm_hour,sDateVal.tm_min,sDateVal.tm_sec,sDateVal.tm_m
day,sDateVal.tm_mon,sDateVal.tm_year+1900); //here the '2' is the precision

With this change, at least a call to GetNextFeature() does not crash.

Regards.
 
Michael

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060320/4c8e9d48/attachment.html
From wonder.sk at gmail.com  Fri Mar 17 14:13:28 2006
From: wonder.sk at gmail.com (Martin Dobias)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] delete features in shapefiles
Message-ID: <e8e7199c0603171113q364ad02bh3cdf3fe5900d730c@mail.gmail.com>

Hi,

On page http://www.gdal.org/ogr/drv_shapefile.html I have read following:

"The OGR shapefile driver supports rewriting existing shapes in a
shapefile as well as deleting shapes."

But TestCapability() for shapefile layer doesn't report that deletion
of features is supported, I also couldn't find it in implementation.
Is the documentation wrong?

Bye,
Martin Dobias


From a.amici at bopen.it  Sun Mar 19 17:39:38 2006
From: a.amici at bopen.it (Alessandro Amici)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Example gdal.m4/configure.ac for GDAL
In-Reply-To: <200603192142.42990.gdal-dev@ostertag.name>
References: <200603192142.42990.gdal-dev@ostertag.name>
Message-ID: <200603192339.38819.a.amici@bopen.it>


Joerg,

On Sunday 19 March 2006 21:42, Joerg Ostertag wrote:
> I like to include the GDAL library into the GPSDrive project. I'm not sure
> how I should define the dependency to GDAL as an autoconf dependency.
> Is there any good example how to do this. Maybe a gdal.m4 or an example
> snippet of configure.ac?

i didn't look too closely but, for example, QGIS has an AQ_CHECK_GDAL macro 
and other goodies at:
http://cvs.sourceforge.net/viewcvs.py/*checkout*/qgis/qgis/acinclude.m4

cheers,
alessandro

--
B-Open Solutions srl - http://www.bopen.it/

From abunn at whrc.org  Mon Mar 20 15:05:11 2006
From: abunn at whrc.org (Andy Bunn)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Animation?
In-Reply-To: <200603192339.38819.a.amici@bopen.it>
Message-ID: <NEBBIPHDAMMOKDKPOFFIIEAPECAA.abunn@whrc.org>

List: Any way to animate a flipbook of GeoTifs to an AVI on windows?

Thanks in advance.
-Andy
~~~~~~~~~~~~~~~~~~

Given a directory with:
abunn@AndysD600 /cygdrive/y/PRISM/daily_adj/tmax_clipped_proj
$ ls | head
tmax_20040101.tif
tmax_20040102.tif
tmax_20040103.tif
tmax_20040104.tif
tmax_20040105.tif
tmax_20040106.tif
tmax_20040107.tif
tmax_20040108.tif
tmax_20040109.tif
tmax_20040110.tif

where each of 365 tiffs is nice and small at 133kb:

abunn@AndysD600 /cygdrive/y/PRISM/daily_adj/tmax_clipped_proj
$ gdalinfo tmax_20040101.tif
Driver: GTiff/GeoTIFF
Size is 180, 180
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-74.000000,48.000000)
Pixel Size = (0.04166700,-0.04166700)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  ( -74.0000000,  48.0000000) ( 74d 0'0.00"W, 48d 0'0.00"N)
Lower Left  ( -74.0000000,  40.4999400) ( 74d 0'0.00"W, 40d29'59.78"N)
Upper Right ( -66.4999400,  48.0000000) ( 66d29'59.78"W, 48d 0'0.00"N)
Lower Right ( -66.4999400,  40.4999400) ( 66d29'59.78"W, 40d29'59.78"N)
Center      ( -70.2499700,  44.2499700) ( 70d14'59.89"W, 44d14'59.89"N)
Band 1 Block=180x11 Type=Float32, ColorInterp=Gray



From nbarker at rsinc.com  Mon Mar 20 15:46:38 2006
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Animation?
References: <NEBBIPHDAMMOKDKPOFFIIEAPECAA.abunn@whrc.org>
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E8140531@bath.uk.rsinc.com>

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org on behalf of Andy Bunn
Sent: Mon 20/03/2006 20:05
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Animation?
 
List: Any way to animate a flipbook of GeoTifs to an AVI on windows?

Thanks in advance.
-Andy
~~~~~~~~~~~~~~~~~~

Given a directory with:
abunn@AndysD600 /cygdrive/y/PRISM/daily_adj/tmax_clipped_proj
$ ls | head
tmax_20040101.tif
tmax_20040102.tif
tmax_20040103.tif
tmax_20040104.tif
tmax_20040105.tif
tmax_20040106.tif
tmax_20040107.tif
tmax_20040108.tif
tmax_20040109.tif
tmax_20040110.tif

where each of 365 tiffs is nice and small at 133kb:
<snip>

Hi,

we have just done this using MapServer WCS / GDAL on the server side, and IDL on the client side (though you could use Java / Python) any temporal OGC client.

The fact that you have got 16 bit data precludes using normal AVI software, also you will want to do frame interpolation for a smooth effect.

We used the temporal dimension of OGC WCS (implemented in MapServer) to serve the tifs, and then created an OGC temporal WCS client, I believe there are quite a few around in addition to ours.

Full details of serving temporal data is here anyway 

http://mapserver.gis.umn.edu/docs/howto/WCSServerFormatHowTo

and a list of OGC WCS clients that were developed for GALEON (some commercial some not, most supporting temporal animation) is here

http://galeon-wcs.jot.com/WikiHome

Hope this helps,

Norman
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060320/2013ff4f/attachment.html
From rec at geodesign.com.br  Mon Mar 20 15:54:52 2006
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Print JPEGs in Batch
Message-ID: <6.2.1.2.0.20060320175300.01ce5498@mailhost.geodesign.com.br>

Hello List,

Does anybody know the location of a utility to batch print JPEG files?

Thanks in advance.

Reinaldo
rec@geodesign.com.br
www.geodesign.com.br



From dpinte at itae.be  Mon Mar 20 15:57:08 2006
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Animation?
In-Reply-To: <NEBBIPHDAMMOKDKPOFFIIEAPECAA.abunn@whrc.org>
References: <NEBBIPHDAMMOKDKPOFFIIEAPECAA.abunn@whrc.org>
Message-ID: <1142888229.29609.40.camel@geru-itae>

Le lundi 20 mars 2006 ? 15:05 -0500, Andy Bunn a ?crit :
> List: Any way to animate a flipbook of GeoTifs to an AVI on windows?


I've done that using mplayer embedded in a Python script with outputs of
MapServer. I can provide some information about the script if you think
you can use it.

I did not use GeoTiff files but png. It won't change anything with tiff
files except if you need them to be recentered or ...

Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060320/e08caa31/attachment.bin
From Julie.Tittler at operamail.com  Mon Mar 20 16:15:02 2006
From: Julie.Tittler at operamail.com (Julie Tittler)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] ECW Support
Message-ID: <op.s6qdbcig1w502r@sojourner>

I would like to enable ECW support in gdal for use in GRASS. I'm using  
CYGWIN. Is there a way to enable this support without rebuilding GDAL? If  
not, how do I know which version of GDAL source to use with my version of  
GRASS? Do I need to recompile GRASS as well, or can I just compile GDAL?  
Are there directions on how to enable ECW support somewhere? I have a  
deadline to deliver some ECW files tomorrow, so any help you can provide  
would be greatly appreciated.

Thank you,
Julie Tittler

From Julie.Tittler at operamail.com  Mon Mar 20 16:23:59 2006
From: Julie.Tittler at operamail.com (Julie Tittler)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] ECW more questions?
Message-ID: <op.s6qdp91n1w502r@sojourner>

Which ERMapper libraries do you need? There are multiple libraries on  
their site: Compression/Decompression, ERMapper SDK Library, other?

Thank you,
Julie Tittler

From woklist at kyngchaos.com  Mon Mar 20 18:17:38 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Mac OS X installers Panther vs Tiger
Message-ID: <B3820FC3-CEB3-409A-B987-03C51C674D75@kyngchaos.com>

Sorry for the cross-post.

I'm working on some ideas on simplifying my Mac OS X installers.   
Currently I make the Panther and Tiger versions as separate binaries  
on separate Macs.  This provides full developer usability on both  
systems for other software to use (qgis, grass, ...) but is quite a  
chore to maintain.

I have a poll on my site for options I'm looking at - varying degrees  
of Panther support and simplicity for me.  Current Mac users (users  
and developers) of my installers, and would-be users, please give a  
vote on where I should go with this.

<http://www.kyngchaos.com/>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From woklist at kyngchaos.com  Mon Mar 20 19:03:21 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
In-Reply-To: <5290E77B1FE2FE40B82AA54158825F0601F2C904@hqosex01.fao.org>
References: <5290E77B1FE2FE40B82AA54158825F0601F2C904@hqosex01.fao.org>
Message-ID: <464A155B-3614-48AD-BC7D-E63597895734@kyngchaos.com>

First, as far as libtiff or gdal+libtiff goes, I think LZW  
compression is OK.  I use gdal_translate to create LZW compressed  
TIFFs a lot, including as I write this.  So there is something going  
on in either gdaladdo or the overview functions in libgdal.

Here is a Mac OS X crash report for part of the gdaladdo problem.

One odd thing I notice in this thread trail: it looks like it's  
coming out of the JPEG 2000 driver.


Date/Time:      2006-03-16 12:39:37.551 -0600
OS Version:     10.4.5 (Build 8H14)
Report Version: 4

Command: gdaladdo
Path:    /usr/local/gislibs/bin/gdaladdo
Parent:  bash [15756]

Version: ??? (???)

PID:    15882
Thread: 0

Exception:  EXC_BAD_ACCESS (0x0001)
Codes:      KERN_PROTECTION_FAILURE (0x0002) at 0x00000810

Thread 0 Crashed:
0   <<00000000>> 	0xffff862c __bzero + 44 (cpu_capabilities.h:187)
1   libtiff.3.dylib 	0x0072f30c LZWPreDecode + 284 (icplusplus.c:28)
2   libtiff.3.dylib 	0x00737f38 TIFFReadEncodedTile + 140  
(icplusplus.c:28)
3   libgdal.1.dylib 	0x01059f18 GTiffRasterBand::IReadBlock(int, int,  
void*) + 296 (icplusplus.c:28)
4   libgdal.1.dylib 	0x010f7824 GDALRasterBand::GetLockedBlockRef 
(int, int, int) + 256 (jpeg2000dataset.cpp:1188)
5   libgdal.1.dylib 	0x010fbb14 GDALRasterBand::IRasterIO(GDALRWFlag,  
int, int, int, int, void*, int, int, GDALDataType, int, int) + 984  
(jpeg2000dataset.cpp:1188)
6   libgdal.1.dylib 	0x010f9cb0 GDALRegenerateOverviews + 1036  
(jpeg2000dataset.cpp:1188)
7   libgdal.1.dylib 	0x010f9b24 GDALRegenerateOverviews + 640  
(jpeg2000dataset.cpp:1188)
8   libgdal.1.dylib 	0x0105c400 GTiffDataset::IBuildOverviews(char  
const*, int, int*, int, int*, int (*)(double, char const*, void*),  
void*) + 1748 (icplusplus.c:28)
9   libgdal.1.dylib 	0x010ec6d8 GDALDataset::BuildOverviews(char  
const*, int, int*, int, int*, int (*)(double, char const*, void*),  
void*) + 188 (jpeg2000dataset.cpp:1188)
10  gdaladdo        	0x00002830 main + 332 (crt.c:355)
11  gdaladdo        	0x00001f10 _start + 340 (crt.c:272)
12  gdaladdo        	0x00001db8 start + 60


With average_mp resampling I get a seg fault and the thread trail now  
ends with

0   libtiff.3.dylib 	0x0072fd94 cl_hash + 52 (icplusplus.c:28)
1   libtiff.3.dylib 	0x0072fe78 LZWPreEncode + 152 (icplusplus.c:28)
2   libtiff.3.dylib 	0x0073a50c TIFFWriteEncodedTile + 404  
(icplusplus.c:28)
3   libgdal.1.dylib 	0x01059cf8 GTiffRasterBand::IWriteBlock(int,  
int, void*) + 156 (icplusplus.c:28)
4   libgdal.1.dylib 	0x010f71bc GDALRasterBand::FlushBlock(int, int)  
+ 300 (jpeg2000dataset.cpp:1188)
5   libgdal.1.dylib 	0x010f7250 GDALRasterBand::FlushCache() + 80  
(jpeg2000dataset.cpp:1188)
6   libgdal.1.dylib 	0x010fa650 GDALRegenerateOverviews + 3500  
(jpeg2000dataset.cpp:1188)
...


Here is a table of tests I've done so far:

(* Dorit's used to work here)
the 10.3.9 tests are without any security updates

                    orig               compress             levels
TIFF       color  compress  Mac OS X     OV     resample     OK      
error
------------------------------------------
SPOT       grey    none
                              10.3.6/GDAL 1.2.6/TIFF 3.7.3
                                        default   nearest    2..128
                                         (none)   average    2..128
                                        LZW(?)    nearest    2..128    
but 'LZW' compression ignored
                            * 10.3.6/GDAL 1.3.0/TIFF 3.7.3
                                        default   average    2..128
                              10.3.9/GDAL 1.3.0/TIFF 3.7.3
                                        default   average    2..128
                              10.3.9/GDAL 1.3.1/TIFF 3.8.0
                                        default   nearest    2,4       
StripByteCounts warnings always
                                                                       b 
lock errors at lvl 8
                                                  average    2,4       
StripByteCounts warnings always
                                                                       b 
lock errors at lvl 8
                              10.4.5/GDAL 1.3.0/TIFF 3.7.3
                                don't have a clean Tiger system  
available yet to test
                              10.4.5/GDAL 1.3.1/TIFF 3.8.1
                                        default   nearest    2,4       
StripByteCounts warnings always
                                                                       b 
lock errors at lvl 8
                                                  average    2,4       
StripByteCounts warnings always
                                                                       b 
lock errors at lvl 8

small      color   LZW
                              10.3.6/GDAL 1.2.6/TIFF 3.7.3
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                                        none(?)   nearest    2..128    
but 'none' compression is ignored
                                        none(?)   average    2         
bus error at lvl 4
                            * 10.3.6/GDAL 1.3.0/TIFF 3.7.3
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                              10.3.9/GDAL 1.3.0/TIFF 3.7.3
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                              10.3.9/GDAL 1.3.1/TIFF 3.8.0
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                              10.4.5/GDAL 1.3.0/TIFF 3.7.3
                                don't have a clean Tiger system  
available yet to test
                              10.4.5/GDAL 1.3.1/TIFF 3.8.1
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                                                  average_mp  
2         seg fault at lvl 4
                                        none(?)   nearest    2..128    
but 'none' compression is ignored


So, I see a couple problems going on.  These bus errors and seg  
faults seem to have something to do with the resampling method used.   
Maybe combined with LZW compression, average resampling starts to choke.

Then the StripByteCounts warnings and block errors start happening  
with libtiff 3.8.0.

gdaladdo seems to ignore the compress overview option and use the  
same compression as the original file always.  So this option is  
pointless.


Dorit, are you sure that the errors are the same when you went back  
to GIS/Graphics Libs 1.5.2?  Was that on the same old system?  Or the  
new 10.3.9 system?  If you want to install the older packages over  
newer ones, I'm not sure the installers overwrite a newer  
installation correctly.  To be sure, try deleting the /Library/ 
Receipts for them, and then deleting /usr/local/baselibs, /usr/local/ 
gislibs and /usr/local/graphicslibs, then reinstall the old versions.


On Mar 20, 2006, at 4:17 AM, Gross, Dorit (SDRN) wrote:

> Hi William,
>
> Our previous versions were GIS Libs 1.5.2 and Graphic Libs 1.5.2 but
> strangely they gernerate the same error now.
>
> Might it be also related to the update of our system? We updated  
> last week
> and made the last security updates today. We run now system version  
> Mac OS X
> Server 10.3.9 (7W98). I tested today another time ... trying to add  
> overviews
> with the old and the new GIS Libs with the result that I receive  
> the same
> error message for both tests.
>
> Does it help?
>
> Dorit
>
>
>
>
>
> -----Original Message-----
> From: William Kyngesburye [mailto:kyngchaos@kyngchaos.com]
> Sent: 16 March 2006 19:54
> To: Gross, Dorit (SDRN)
> Cc: Frank Warmerdam
> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
>
>
> I get the same problem with your geotiff, on both Panther and Tiger.
> A Panther build problem was one possibility.
>
> What were the previous GIS Libs and Graphics Libs versions that
> worked?  At least between this version and the next recent release,
> updates include libtiff 3.8.0 from 3.7.4 and geotiff CVS 2006/1/8
> from 1.2.2.  I'm in the middle of some more updates, and tried the
> tests below with libtiff 3.8.1/geotiff 1.2.3 also with the same  
> results.
>
> I also have the problem with one of my own old greyscale geotiffs
> converted from TIFF with geotifcp.  And with a color plain TIFF, not
> a geotiff.
>
> More problems with other options and files used:
>
> - a smaller color TIFF which is cropped (5000x5000) from the color
> tiff above: same problem, but it makes more progress.
>
> - same cropped tiff, but only level 2 overview: OK
>
> - same cropped tiff, level 2 & 4 overviews: bus error at 30%
>
> - full size color tiff, only level 2 overview: makes it to 100% -
> done, but give a final Wrong "StripByteCounts" field warning at the
> end.  Photoshop opens it, but I don't know how I can verify the
> overview.
>
> - your spot tiff, only level 2 & 4 overviews: initial Wrong
> "StripByteCounts" field warning, but completes.  Opens in Photoshop.
> I get the block errors when I add the level 8 overview.
>
>
> So, it seems the Wrong "StripByteCounts" field warnings are harmless,
> it's the block errors that are the problem.
>
>
> On Mar 16, 2006, at 9:35 AM, Gross, Dorit (SDRN) wrote:
>
>> Just tried with a GeoTiff generated long time ago from a MODIS HDF
>> (used the
>> MODIS Reprojection Tool then) and it causes the same error. Will
>> provide you
>> and Frank with a data set to test.
>>
>> Regards,
>> Dorit
>>
>> -----Original Message-----
>> From: William Kyngesburye [mailto:woklist@kyngchaos.com]
>> Sent: 16 March 2006 15:50
>> To: gdal-dev@lists.maptools.org
>> Cc: Gross, Dorit (SDRN)
>> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
>>
>>
>> What about other TIFFs?
>>
>> I'd like to get the image also so I can check my GIS Libs builds.  
>> I'll
>> try some of my own TIFFs also.  There may a problem with my
>> distribution.
>>
>>
>> On Mar 16, 2006, at 2:30 AM, Gross, Dorit (SDRN) wrote:
>>
>>> Hi Frank,
>>>
>>> The original file is a SPOT VGT HDF that was converted into GeoTiff
>>> using gdal_translate. The overviews are added just in the next step.
>>> The script was
>>> running before the upgrade of GIS Libs. I tried the script for
>>> different SPOT
>>> files after the upgrade but receive now the same error message for
>>> all of
>>> them.
>>>
>>> I can provide you an image. Please let me know where it can be
>>> uploaded to.
>>>
>>> Regards,
>>> Dorit
>>>
>>>
>>> -----Original Message-----
>>> From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] On Behalf Of
>>> Frank
>>> Warmerdam
>>> Sent: 15 March 2006 17:32
>>> To: Gross, Dorit (SDRN)
>>> Cc: gdal-dev@lists.maptools.org
>>> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
>>>
>>>
>>> Gross, Dorit (SDRN) wrote:
>>>> Dear list,
>>>>
>>>> I use gdaladdo to add overviews to a GeoTiff and receive following
>>>> error
>>>> message:
>>>>
>>>> /usr/local/gislibs/bin/gdaladdo -r average --config
>>>> COMPRESS_OVERVIEW
>>>> LZW /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif 2 4 8 16
>>>> 32 64
>>>> 128 0.Warning 1:
>>>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>>>> dv06031_wrld.tif:
>>>> Wrong "StripByteCounts" field, ignoring and calculating from
>>>> imagelength Warning 1:
>>>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>>>> dv06031_wrld.tif: Wrong
>>>> "StripByteCounts" field, ignoring and calculating from imagelength
>>>> ..10...20...30...40...50...60...70...80...90..Warning 1:
>>>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>>>> dv06031_wrld.tif: Wrong
>>>> "StripByteCounts" field, ignoring and calculating from imagelength
>>>> Warning
>>> 1:
>>>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>>>> dv06031_wrld.tif: Wrong
>>>> "StripByteCounts" field, ignoring and calculating from imagelength
>>>> ERROR 1:
>>>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode:
>>>> Not
>>> enough
>>>> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
>>>>
>>>> ERROR 1: IReadBlock failed at X offset 0, Y offset 4
>>>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4
>>>> ERROR 1:
>>>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode:
>>>> Not
>>> enough
>>>> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
>>>>
>>>> ...
>>>>
>>>> Any ideas what could be the problem and how it could be solved?
>>>>
>>>> We use the latest GIS Libs for Mac OS X Panther (2.2.1) including
>>>> GDAL/OGR v1.3.1 downloaded from Kyng Chaos.
>>>
>>> Dorit,
>>>
>>> It *sounds* like the input file may be corrupt in some sense.   
>>> Was it
>>> generated with libtiff?  Can you make the original file available  
>>> for
>>> me to look at?
>>>
>>> Best regards,
>>> --
>>> ---------------------------------------
>>> +--------------------------------
>>> ---------------------------------------+------
>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | President OSGF, http://
>>> osgeo.org
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>> -----
>> William Kyngesburye <kyngchaos@kyngchaos.com> http://
>> www.kyngchaos.com/
>>
>> "This is a question about the past, is it? ... How can I tell that  
>> the
>> past isn't a fiction designed to account for the discrepancy between
>> my immediate physical sensations and my state of mind?"
>>
>> - The Ruler of the Universe
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com> http:// 
> www.kyngchaos.com/
>
> First Pogril: Why is life like sticking your head in a bucket filled
> with hyena offal?
> Second Pogril: I don't know.  Why IS life like sticking your head in
> a bucket filled with hyena offal?
> First Pogril: I don't know either.  Wretched, isn't it?
>
> -HitchHiker's Guide to the Galaxy
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in  
a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy


From amills at frogtech.com.au  Mon Mar 20 22:53:09 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Any tips for VB .NET?
Message-ID: <3506881.post@talk.nabble.com>


 I'd like to try and use GDAL from withing VB .NET if I can. In theory I can
use "Declare Function" to link to the GDAL dll. However, I tried calling
GDALOpen and assigning the output to a generic Object. I get an error saying
the function value can't be returned as a variant. I'm not sure if this path
is possible in general. Has anyone gotten GDAL to run using VB .NET?
--
View this message in context: http://www.nabble.com/Any-tips-for-VB-.NET--t1315468.html#a3506881
Sent from the GDAL - Dev forum at Nabble.com.


From dpinte at itae.be  Tue Mar 21 03:16:44 2006
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Animation?
In-Reply-To: <5ac301f5ac36f7.5ac36f75ac301f@shaw.ca>
References: <5ac301f5ac36f7.5ac36f75ac301f@shaw.ca>
Message-ID: <1142929004.5068.13.camel@geru-itae>

Le lundi 20 mars 2006 ? 15:24 -0800, Tyler Mitchell a ?crit :
> Didrik,
> I'd love to hear more about how you did the Python, Mplayer animation bit.  Sounds really interesting.  I can't quite wrap my head around MPlayer, but am very familiar with python - so I'd love to see what you did.
> 
> Tyler

That was pretty easy in fact. 

My need was to create a movie using pictures created by MapServer (a
moving tank during an agricultural season). I've used python mapscript
to pilot mapserver and create png output pictures. Then a really really
simple call to mplayer does the trick and build a beautiful movie.

Here is the extract used to build the movie :

def createMovie(basePath,path):
        '''
        Create a movie using all the pictures stored in the basePath
(png files). The movie is compressed using Microsoft codec msmpeg4v2 in
order to be readable on windows computers. The frames per second are
fixed at 1. 
	TODO : 	- use popen to redirect stdout and stderr
		- make a second pass for better compression/quality
        '''

        try:
                os.system('/usr/bin/mencoder "mf://%s/00*.png" -mf
type=png:fps=1  -ovc lavc -lavcopts vcodec=msmpeg4v2:vpass=1:$opt
-nosound -o %s '% (basePath,path))
        except:
                log.error("Error during movie creation")
                return False
        return os.path.exists(path)

Pretty easy ;-)

I did it on a Linux computer but it's obvious that it can be done on a
Windows computer with a full mplayer installation.

Didrik

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060321/6dfd089f/attachment.bin
From gdalakkineni at gmail.com  Tue Mar 21 03:58:38 2006
From: gdalakkineni at gmail.com (Vijay Akkineni)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Conversion of NDF Image to GeoTiff
Message-ID: <29557df30603210058g1adb935dh40e6bdfa439de1f3@mail.gmail.com>

Hi Guys,

                 I have got NLAPS image with seven bands in it . the image
are in the format xyz.H1,xyz.HI,xyz.I0,xyz.I1,xyz.I2,xyz.I3,xyz.I4,xyz.I5,
xyz.I6 . Can u help me in converting these to GeoTiff Format .

How to use Gdal_translate to achieve this . My Images are in utm wgs84
format . i want them in GCS wgs84 and geotiff format .

Thanks,
Vijay Akkineni.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060321/80a263fc/attachment.html
From szekerest at gmail.com  Tue Mar 21 04:26:58 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Any tips for VB .NET?
In-Reply-To: <3506881.post@talk.nabble.com>
References: <3506881.post@talk.nabble.com>
Message-ID: <f3b73b7d0603210126j3d12c77ch@mail.gmail.com>

You could use the SWIG C# binding
or Morten's C# wrapper classes

http://www.iter.dk/blog.aspx?id=35

It must be noted that SWIG C# binding is currently uncomplete and not
thoroughly tested.

Tamas


2006/3/21, Holywhippet <amills@frogtech.com.au>:
>
>  I'd like to try and use GDAL from withing VB .NET if I can. In theory I can
> use "Declare Function" to link to the GDAL dll. However, I tried calling
> GDALOpen and assigning the output to a generic Object. I get an error saying
> the function value can't be returned as a variant. I'm not sure if this path
> is possible in general. Has anyone gotten GDAL to run using VB .NET?
> --
> View this message in context: http://www.nabble.com/Any-tips-for-VB-.NET--t1315468.html#a3506881
> Sent from the GDAL - Dev forum at Nabble.com.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From michael.paul at tao.es  Tue Mar 21 05:31:12 2006
From: michael.paul at tao.es (Paul, Michael)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Any tips for VB .NET?
Message-ID: <F351B61A81F4F54F92740EA8B510C2B103BE2065@ESGDASMA5VX0014.ib.gedas.vwg>

 
Hi,

I think that there at least three possibilities to access GDAL from witin
VB.Net:
- you may reference the wrapper assembly DLLs generated by the GDAL SWIG
interfaces, these SWIG interfaces are included within the GDAL sources.
Instead of having to declare functions to access native code, these wrapper
exposes classes to any .Net language (C#, VB.Net, Delphi, ..). If you are
new to SWIG and .Net this may be the hard way to follow,
- there also exists a less official GDAL wrapper implemented in C#, Simon
Perkins published a few months ago a Visual Studio solution, which is ready
to be used (including VB.Net). I think it is called gdal_csharp. It also
exposes .Net classes, which are wrapping the GDAL C API,
- if you prefer so, you may also declare yourself all the necessary function
calls within VB.Net to access the C API. What I have done to know correct
syntax is invoking Lutz Roeder's Reflector upon the compiled wrapper IL
code. Output is stated at the end of message. I've not tested the output,
but it seems OK.



Both SWIG wrappers and C# wrapper are less tested and functional incomplete.
Nevertheless, for most things you'll want to do from within VB.Net it will a
good starting point.

Kind Regards,
 
Michael.

=============================================
Reflector output:

Friend Class InterOp
      ' Methods
      Shared Sub New()
      Public Sub New()
      Friend Shared Function CPLGetLastErrorMsg() As String
      <DllImport("gdal_fw.dll", EntryPoint:="CPLGetLastErrorMsg")> _
      Private Shared Function CPLGetLastErrorMsgExt() As IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Sub GDALAllRegister()
      <DllImport("gdal_fw.dll")> _
      Friend Shared Sub GDALClose(ByVal hDriver As HandleRef)
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALCreate(ByVal hDriver As HandleRef,
<MarshalAs(UnmanagedType.LPStr)> ByVal filename As String, ByVal width As
Integer, ByVal height As Integer, ByVal nBands As Integer, ByVal type As
DataType, ByVal options As HandleRef) As IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALCreateCopy(ByVal hDriver As HandleRef,
<MarshalAs(UnmanagedType.LPStr)> ByVal filename As String, ByVal hDataset As
HandleRef, ByVal bStrict As Integer, ByVal options As HandleRef, ByVal
progressFn As HandleRef, ByVal progressData As HandleRef) As IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Sub GDALDestroyDriverManager()
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetAccess(ByVal hDataset As HandleRef) As
Integer
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetDatasetDriver(ByVal hDataset As
HandleRef) As IntPtr
      <DllImport("gdal_fw.dll", EntryPoint:="GDALGetDriverShortName",
CharSet:=CharSet.Ansi)> _
      Private Shared Function GDALGetDatasetDriverExt(ByVal hDataset As
HandleRef) As IntPtr
      Friend Shared Function GDALGetDescription(ByVal hDriver As HandleRef)
As String
      <DllImport("gdal_fw.dll", EntryPoint:="GDALGetDescription",
CharSet:=CharSet.Ansi)> _
      Private Shared Function GDALGetDescriptionExt(ByVal hDriver As
HandleRef) As IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetDriver(ByVal iDriver As Integer) As
IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function
GDALGetDriverByName(<MarshalAs(UnmanagedType.LPStr)> ByVal pszName As
String) As IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetDriverCount() As Integer
      Friend Shared Function GDALGetDriverLongName(ByVal hDriver As
HandleRef) As String
      <DllImport("gdal_fw.dll", EntryPoint:="GDALGetDriverLongName",
CharSet:=CharSet.Ansi)> _
      Private Shared Function GDALGetDriverLongNameExt(ByVal hDriver As
HandleRef) As IntPtr
      Friend Shared Function GDALGetDriverShortName(ByVal hDriver As
HandleRef) As String
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetGeoTransform(ByVal hDataset As
HandleRef, <In, Out> ByVal Transform As Double()) As CPLErr
      Friend Shared Function GDALGetMetadata(ByVal hDataset As HandleRef,
ByVal domain As String) As Dictionary(Of String, String)
      <DllImport("gdal_fw.dll", EntryPoint:="GDALGetMetadata")> _
      Private Shared Function GDALGetMetadataExt(ByVal hDataset As
HandleRef, <MarshalAs(UnmanagedType.LPStr)> ByVal domain As String) As
IntPtr
      Friend Shared Function GDALGetMetadataItem(ByVal hDataset As
HandleRef, ByVal key As String, ByVal domain As String) As String
      <DllImport("gdal_fw.dll", EntryPoint:="GDALGetMetadataItem")> _
      Private Shared Function GDALGetMetadataItemExt(ByVal hDataset As
HandleRef, <MarshalAs(UnmanagedType.LPStr)> ByVal key As String,
<MarshalAs(UnmanagedType.LPStr)> ByVal domain As String) As IntPtr
      Friend Shared Function GDALGetProjectionRef(ByVal hDataset As
HandleRef) As String
      <DllImport("gdal_fw.dll", EntryPoint:="GDALGetProjectionRef",
CharSet:=CharSet.Ansi)> _
      Private Shared Function GDALGetProjectionRefExt(ByVal hDataset As
HandleRef) As IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetRasterBand(ByVal hDataset As HandleRef,
ByVal index As Integer) As IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetRasterColorInterpretation(ByVal hBand As
HandleRef) As Integer
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetRasterCount(ByVal hDataset As HandleRef)
As Integer
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetRasterXSize(ByVal hDataset As HandleRef)
As Integer
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALGetRasterYSize(ByVal hDataset As HandleRef)
As Integer
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALOpen(<MarshalAs(UnmanagedType.LPStr)> ByVal
pszFilename As String, ByVal eAccess As Access) As IntPtr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALRasterIO(ByVal hBand As HandleRef, ByVal
flag As RWFlag, ByVal xOff As Integer, ByVal yOff As Integer, ByVal xSize As
Integer, ByVal ySize As Integer, ByVal data As IntPtr, ByVal bufXSize As
Integer, ByVal bufYSize As Integer, ByVal type As DataType, ByVal
pixelStride As Integer, ByVal lineStride As Integer) As CPLErr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Function GDALSetGeoTransform(ByVal hDataset As
HandleRef, <In, Out> ByVal Transform As Double()) As CPLErr
      <DllImport("gdal_fw.dll")> _
      Friend Shared Sub GDALSetMetadataItem(ByVal hDataset As HandleRef,
<MarshalAs(UnmanagedType.LPStr)> ByVal key As String,
<MarshalAs(UnmanagedType.LPStr)> ByVal value As String,
<MarshalAs(UnmanagedType.LPStr)> ByVal domain As String)

      ' Fields
      Private Const gdalDll As String = "gdal_fw.dll"
End Class


-----Mensaje original-----
De: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] En nombre de Holywhippet
Enviado el: martes, 21 de marzo de 2006 4:53
Para: gdal-dev@lists.maptools.org
Asunto: [Gdal-dev] Any tips for VB .NET?


 I'd like to try and use GDAL from withing VB .NET if I can. In theory I can
use "Declare Function" to link to the GDAL dll. However, I tried calling
GDALOpen and assigning the output to a generic Object. I get an error saying
the function value can't be returned as a variant. I'm not sure if this path
is possible in general. Has anyone gotten GDAL to run using VB .NET?
--
View this message in context:
http://www.nabble.com/Any-tips-for-VB-.NET--t1315468.html#a3506881
Sent from the GDAL - Dev forum at Nabble.com.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

From vdharan2001 at gmail.com  Fri Mar 17 18:29:25 2006
From: vdharan2001 at gmail.com (Vidhiyadharan Nadarajah)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] RE:OGR:GetNextFeature() throws exception in WINXP
In-Reply-To: <441EAF1E.5040009@tkk.fi>
Message-ID: <FJEAJLIJBMFCHFKGDAGKOEBCCBAA.vdharan2001@gmail.com>

> Vidhiyadharan Nadarajah kirjoitti:
>> My problem is the same application crashes in WinXP. The function
>> "poLayer->GetNextFeature()" throws an exception in winXP.Iam unable to
find
>> the exact exception.
>...
>>
>>     poLayer->ResetReading();
>>     while( (poFeature = poLayer->GetNextFeature()) != NULL )
>>     {
>>     //OGRFeature::DestroyFeature( poFeature );
>>     }
>> 	OGRFeature::DestroyFeature( poFeature );
>>     OGRDataSource::DestroyDataSource( poDS );
>> 	return 0;

>You should call DestroyFeature( poFeature ) within the loop. I just
>looked at similar code of mine and I had also commented out
>DestroyFeature, probably because of crashes. I tried removing it now and
>there is no problem, I'm using the latest from CVS.
>
>I don't see any reason for the crash. If you can reproduce the crash,
>try adding some print statements or debug otherwise to see when the
>crash happens. You could also try with the latest GDAL.
> Ari

Ari,
I have downloaded the latest source and tested the same application. But
again the application crashes when i do Destroy feature inside the loop.
If i put it outside the loop, the application dosen't crash in win2k but
crashes in WINXP.
I have added some debug print and the crash happens when the
GetNextFeature() is being called.
I want to make the application run in WINXP.

Best Regards,
N.Vidhiyadharan
--
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.12/266 - Release Date: 21/02/2006


From mateusz at loskot.net  Tue Mar 21 06:19:44 2006
From: mateusz at loskot.net (=?ISO-8859-2?Q?Mateusz_=A3oskot?=)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
In-Reply-To: <d29760880603200542q1562815bg3710cd4c4b17ff38@mail.gmail.com>
References: <d29760880603200542q1562815bg3710cd4c4b17ff38@mail.gmail.com>
Message-ID: <441FE150.3080602@loskot.net>

vdharan nadra wrote:
> Dear Mateusz ?oskot,
> Thanks for your suggestion.But I have made a mistake while pasting my 
> code . The actual code is as follows and it still has the problem 
> running in XP. I have also added the check for NULL layer as you have 
> suggested. In XP i get the output of "printf( "%.3f,%.3f\n", 
> poPoint->getX(), poPoint->getY() );" for few polygons and then the 
> application crashes.
 > [...]

Is this possible for you to give us your shapefile you are
using with this code?
If it is, please publish it somewhere to download.
It would help much.

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From nf10 at hotmail.com  Tue Mar 21 07:24:25 2006
From: nf10 at hotmail.com (Jeff L.)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Overviews questions
Message-ID: <BAY108-F24F3F997D208E87507D530C6D80@phx.gbl>

Hi,

I have few questions about overviews in GDAL as I'm trying to understand 
them. My current understanding of overviews in GDAL is that their are stored 
as an auxiliary 'geotiff' file with an .ovr extension or an Erdas .rrd file.

My question is really how a band know that has overviews generated for it 
and how the bands overviews are stored in a tiff file ? is there any 
assumption about the order ?
example: overview1_ band 1, overview2_band1,...overview1_band2, 
overview2_band2.... ?

Let say I have a bitmap of three band (RGB) and I want to generate overview 
levels 2, 4, 6 and 8 for band 2 only. Once this done and I open my bitmap 
(through the code), during the open operation, an .ovr file will be searched 
and found. How we know from the .ovr (tiff) that the overviews there are 
those of band2 ? If one can explain how bands overviews are linked to their 
original bands it will be much appreciated.

Also, is there any details about the overviews storage within a Tiff, are 
they simply bands or have a different storage mechanism ?

Thanks for any insight on this.

Jeff



From vdharan2001 at gmail.com  Mon Mar 20 21:38:06 2006
From: vdharan2001 at gmail.com (Vidhiyadharan Nadarajah)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
In-Reply-To: <441FE150.3080602@loskot.net>
Message-ID: <FJEAJLIJBMFCHFKGDAGKGEBECBAA.vdharan2001@gmail.com>


You can down load the shape files from the following link
http://vdharan.741.com/india_ds.dbf
http://vdharan.741.com/india_ds.shp
http://vdharan.741.com/india_ds.shx

Best Regards,
N.Vidhiyadharan

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org]On Behalf Of Mateusz ?oskot
Sent: Tuesday, March 21, 2006 4:50 PM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP


vdharan nadra wrote:
> Dear Mateusz ?oskot,
> Thanks for your suggestion.But I have made a mistake while pasting my
> code . The actual code is as follows and it still has the problem
> running in XP. I have also added the check for NULL layer as you have
> suggested. In XP i get the output of "printf( "%.3f,%.3f\n",
> poPoint->getX(), poPoint->getY() );" for few polygons and then the
> application crashes.
 > [...]

Is this possible for you to give us your shapefile you are
using with this code?
If it is, please publish it somewhere to download.
It would help much.

Cheers
--
Mateusz ?oskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev
--
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.12/266 - Release Date: 21/02/2006

--
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.12/266 - Release Date: 21/02/2006


From abunn at whrc.org  Tue Mar 21 09:23:14 2006
From: abunn at whrc.org (Andy Bunn)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Animation?
In-Reply-To: <1142929004.5068.13.camel@geru-itae>
Message-ID: <NEBBIPHDAMMOKDKPOFFIGEBMECAA.abunn@whrc.org>

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org]On Behalf Of Didrik Pinte
> Sent: Tuesday, March 21, 2006 3:17 AM
> To: gdal-dev
> Subject: Re: [Gdal-dev] Animation?
>
>
> Le lundi 20 mars 2006 ? 15:24 -0800, Tyler Mitchell a ?crit :
> > Didrik,
> > I'd love to hear more about how you did the Python, Mplayer
> animation bit.  Sounds really interesting.  I can't quite wrap my
> head around MPlayer, but am very familiar with python - so I'd
> love to see what you did.
> >
> > Tyler
>
> That was pretty easy in fact.
>
> My need was to create a movie using pictures created by MapServer (a
> moving tank during an agricultural season). I've used python mapscript
> to pilot mapserver and create png output pictures. Then a really really
> simple call to mplayer does the trick and build a beautiful movie.
>
> Here is the extract used to build the movie :
>
> def createMovie(basePath,path):
>         '''
>         Create a movie using all the pictures stored in the basePath
> (png files). The movie is compressed using Microsoft codec msmpeg4v2 in
> order to be readable on windows computers. The frames per second are
> fixed at 1.
> 	TODO : 	- use popen to redirect stdout and stderr
> 		- make a second pass for better compression/quality
>         '''
>
>         try:
>                 os.system('/usr/bin/mencoder "mf://%s/00*.png" -mf
> type=png:fps=1  -ovc lavc -lavcopts vcodec=msmpeg4v2:vpass=1:$opt
> -nosound -o %s '% (basePath,path))
>         except:
>                 log.error("Error during movie creation")
>                 return False
>         return os.path.exists(path)
>
> Pretty easy ;-)
>
> I did it on a Linux computer but it's obvious that it can be done on a
> Windows computer with a full mplayer installation.
>
> Didrik
>

Thanks all for the tips. I've ended up doing this in R via the Rgdal
bindings. This made the most sense since my image analysis was being done
this way also.

-Andy


From Dorit.Gross at fao.org  Tue Mar 21 09:35:33 2006
From: Dorit.Gross at fao.org (Gross, Dorit (SDRN))
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
Message-ID: <5290E77B1FE2FE40B82AA54158825F0601F2C909@hqosex01.fao.org>

William, 

Thank you very much for the many tests!

I now removed the LZW compression and limited the overview levels to 2 and 4.
I receive the StripByteCounts warnings as you do, but the process runs till
the end anyway.

In reference to our system: We had made a backup of the previous GIS and
Graphic Libs (1.5.2) and I tested with those ones on the updated system. In
this setup the old Libs generate exactly the same errors as the new ones.
Unfortunately, we cannot move back to the previous Mac OS X system version
(also not for testing). So for the time being we can calculate overvies up to
level 4, however a solution for the new Mac version would just be great.

Looking forward to hearing from you,
Dorit




-----Original Message-----
From: William Kyngesburye [mailto:woklist@kyngchaos.com] 
Sent: 21 March 2006 01:03
To: gdal-dev@lists.maptools.org
Cc: Frank Warmerdam; Gross, Dorit (SDRN)
Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther


First, as far as libtiff or gdal+libtiff goes, I think LZW  
compression is OK.  I use gdal_translate to create LZW compressed  
TIFFs a lot, including as I write this.  So there is something going  
on in either gdaladdo or the overview functions in libgdal.

Here is a Mac OS X crash report for part of the gdaladdo problem.

One odd thing I notice in this thread trail: it looks like it's  
coming out of the JPEG 2000 driver.


Date/Time:      2006-03-16 12:39:37.551 -0600
OS Version:     10.4.5 (Build 8H14)
Report Version: 4

Command: gdaladdo
Path:    /usr/local/gislibs/bin/gdaladdo
Parent:  bash [15756]

Version: ??? (???)

PID:    15882
Thread: 0

Exception:  EXC_BAD_ACCESS (0x0001)
Codes:      KERN_PROTECTION_FAILURE (0x0002) at 0x00000810

Thread 0 Crashed:
0   <<00000000>> 	0xffff862c __bzero + 44 (cpu_capabilities.h:187)
1   libtiff.3.dylib 	0x0072f30c LZWPreDecode + 284 (icplusplus.c:28)
2   libtiff.3.dylib 	0x00737f38 TIFFReadEncodedTile + 140  
(icplusplus.c:28)
3   libgdal.1.dylib 	0x01059f18 GTiffRasterBand::IReadBlock(int, int,  
void*) + 296 (icplusplus.c:28)
4   libgdal.1.dylib 	0x010f7824 GDALRasterBand::GetLockedBlockRef 
(int, int, int) + 256 (jpeg2000dataset.cpp:1188)
5   libgdal.1.dylib 	0x010fbb14 GDALRasterBand::IRasterIO(GDALRWFlag,  
int, int, int, int, void*, int, int, GDALDataType, int, int) + 984  
(jpeg2000dataset.cpp:1188)
6   libgdal.1.dylib 	0x010f9cb0 GDALRegenerateOverviews + 1036  
(jpeg2000dataset.cpp:1188)
7   libgdal.1.dylib 	0x010f9b24 GDALRegenerateOverviews + 640  
(jpeg2000dataset.cpp:1188)
8   libgdal.1.dylib 	0x0105c400 GTiffDataset::IBuildOverviews(char  
const*, int, int*, int, int*, int (*)(double, char const*, void*),  
void*) + 1748 (icplusplus.c:28)
9   libgdal.1.dylib 	0x010ec6d8 GDALDataset::BuildOverviews(char  
const*, int, int*, int, int*, int (*)(double, char const*, void*),  
void*) + 188 (jpeg2000dataset.cpp:1188)
10  gdaladdo        	0x00002830 main + 332 (crt.c:355)
11  gdaladdo        	0x00001f10 _start + 340 (crt.c:272)
12  gdaladdo        	0x00001db8 start + 60


With average_mp resampling I get a seg fault and the thread trail now  
ends with

0   libtiff.3.dylib 	0x0072fd94 cl_hash + 52 (icplusplus.c:28)
1   libtiff.3.dylib 	0x0072fe78 LZWPreEncode + 152 (icplusplus.c:28)
2   libtiff.3.dylib 	0x0073a50c TIFFWriteEncodedTile + 404  
(icplusplus.c:28)
3   libgdal.1.dylib 	0x01059cf8 GTiffRasterBand::IWriteBlock(int,  
int, void*) + 156 (icplusplus.c:28)
4   libgdal.1.dylib 	0x010f71bc GDALRasterBand::FlushBlock(int, int)  
+ 300 (jpeg2000dataset.cpp:1188)
5   libgdal.1.dylib 	0x010f7250 GDALRasterBand::FlushCache() + 80  
(jpeg2000dataset.cpp:1188)
6   libgdal.1.dylib 	0x010fa650 GDALRegenerateOverviews + 3500  
(jpeg2000dataset.cpp:1188)
...


Here is a table of tests I've done so far:

(* Dorit's used to work here)
the 10.3.9 tests are without any security updates

                    orig               compress             levels
TIFF       color  compress  Mac OS X     OV     resample     OK      
error
------------------------------------------
SPOT       grey    none
                              10.3.6/GDAL 1.2.6/TIFF 3.7.3
                                        default   nearest    2..128
                                         (none)   average    2..128
                                        LZW(?)    nearest    2..128    
but 'LZW' compression ignored
                            * 10.3.6/GDAL 1.3.0/TIFF 3.7.3
                                        default   average    2..128
                              10.3.9/GDAL 1.3.0/TIFF 3.7.3
                                        default   average    2..128
                              10.3.9/GDAL 1.3.1/TIFF 3.8.0
                                        default   nearest    2,4       
StripByteCounts warnings always
                                                                       b 
lock errors at lvl 8
                                                  average    2,4       
StripByteCounts warnings always
                                                                       b 
lock errors at lvl 8
                              10.4.5/GDAL 1.3.0/TIFF 3.7.3
                                don't have a clean Tiger system  
available yet to test
                              10.4.5/GDAL 1.3.1/TIFF 3.8.1
                                        default   nearest    2,4       
StripByteCounts warnings always
                                                                       b 
lock errors at lvl 8
                                                  average    2,4       
StripByteCounts warnings always
                                                                       b 
lock errors at lvl 8

small      color   LZW
                              10.3.6/GDAL 1.2.6/TIFF 3.7.3
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                                        none(?)   nearest    2..128    
but 'none' compression is ignored
                                        none(?)   average    2         
bus error at lvl 4
                            * 10.3.6/GDAL 1.3.0/TIFF 3.7.3
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                              10.3.9/GDAL 1.3.0/TIFF 3.7.3
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                              10.3.9/GDAL 1.3.1/TIFF 3.8.0
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                              10.4.5/GDAL 1.3.0/TIFF 3.7.3
                                don't have a clean Tiger system  
available yet to test
                              10.4.5/GDAL 1.3.1/TIFF 3.8.1
                                        default   nearest    2..128
                                         (LZW)    average    2         
bus error at lvl 4
                                                  average_mp  
2         seg fault at lvl 4
                                        none(?)   nearest    2..128    
but 'none' compression is ignored


So, I see a couple problems going on.  These bus errors and seg  
faults seem to have something to do with the resampling method used.   
Maybe combined with LZW compression, average resampling starts to choke.

Then the StripByteCounts warnings and block errors start happening  
with libtiff 3.8.0.

gdaladdo seems to ignore the compress overview option and use the  
same compression as the original file always.  So this option is  
pointless.


Dorit, are you sure that the errors are the same when you went back  
to GIS/Graphics Libs 1.5.2?  Was that on the same old system?  Or the  
new 10.3.9 system?  If you want to install the older packages over  
newer ones, I'm not sure the installers overwrite a newer  
installation correctly.  To be sure, try deleting the /Library/ 
Receipts for them, and then deleting /usr/local/baselibs, /usr/local/ 
gislibs and /usr/local/graphicslibs, then reinstall the old versions.


On Mar 20, 2006, at 4:17 AM, Gross, Dorit (SDRN) wrote:

> Hi William,
>
> Our previous versions were GIS Libs 1.5.2 and Graphic Libs 1.5.2 but 
> strangely they gernerate the same error now.
>
> Might it be also related to the update of our system? We updated
> last week
> and made the last security updates today. We run now system version  
> Mac OS X
> Server 10.3.9 (7W98). I tested today another time ... trying to add  
> overviews
> with the old and the new GIS Libs with the result that I receive  
> the same
> error message for both tests.
>
> Does it help?
>
> Dorit
>
>
>
>
>
> -----Original Message-----
> From: William Kyngesburye [mailto:kyngchaos@kyngchaos.com]
> Sent: 16 March 2006 19:54
> To: Gross, Dorit (SDRN)
> Cc: Frank Warmerdam
> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
>
>
> I get the same problem with your geotiff, on both Panther and Tiger. A 
> Panther build problem was one possibility.
>
> What were the previous GIS Libs and Graphics Libs versions that 
> worked?  At least between this version and the next recent release, 
> updates include libtiff 3.8.0 from 3.7.4 and geotiff CVS 2006/1/8 from 
> 1.2.2.  I'm in the middle of some more updates, and tried the tests 
> below with libtiff 3.8.1/geotiff 1.2.3 also with the same
> results.
>
> I also have the problem with one of my own old greyscale geotiffs 
> converted from TIFF with geotifcp.  And with a color plain TIFF, not a 
> geotiff.
>
> More problems with other options and files used:
>
> - a smaller color TIFF which is cropped (5000x5000) from the color 
> tiff above: same problem, but it makes more progress.
>
> - same cropped tiff, but only level 2 overview: OK
>
> - same cropped tiff, level 2 & 4 overviews: bus error at 30%
>
> - full size color tiff, only level 2 overview: makes it to 100% - 
> done, but give a final Wrong "StripByteCounts" field warning at the 
> end.  Photoshop opens it, but I don't know how I can verify the 
> overview.
>
> - your spot tiff, only level 2 & 4 overviews: initial Wrong 
> "StripByteCounts" field warning, but completes.  Opens in Photoshop. I 
> get the block errors when I add the level 8 overview.
>
>
> So, it seems the Wrong "StripByteCounts" field warnings are harmless, 
> it's the block errors that are the problem.
>
>
> On Mar 16, 2006, at 9:35 AM, Gross, Dorit (SDRN) wrote:
>
>> Just tried with a GeoTiff generated long time ago from a MODIS HDF 
>> (used the MODIS Reprojection Tool then) and it causes the same error. 
>> Will provide you
>> and Frank with a data set to test.
>>
>> Regards,
>> Dorit
>>
>> -----Original Message-----
>> From: William Kyngesburye [mailto:woklist@kyngchaos.com]
>> Sent: 16 March 2006 15:50
>> To: gdal-dev@lists.maptools.org
>> Cc: Gross, Dorit (SDRN)
>> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
>>
>>
>> What about other TIFFs?
>>
>> I'd like to get the image also so I can check my GIS Libs builds.
>> I'll
>> try some of my own TIFFs also.  There may a problem with my
>> distribution.
>>
>>
>> On Mar 16, 2006, at 2:30 AM, Gross, Dorit (SDRN) wrote:
>>
>>> Hi Frank,
>>>
>>> The original file is a SPOT VGT HDF that was converted into GeoTiff 
>>> using gdal_translate. The overviews are added just in the next step. 
>>> The script was running before the upgrade of GIS Libs. I tried the 
>>> script for different SPOT
>>> files after the upgrade but receive now the same error message for
>>> all of
>>> them.
>>>
>>> I can provide you an image. Please let me know where it can be 
>>> uploaded to.
>>>
>>> Regards,
>>> Dorit
>>>
>>>
>>> -----Original Message-----
>>> From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] On Behalf Of 
>>> Frank Warmerdam
>>> Sent: 15 March 2006 17:32
>>> To: Gross, Dorit (SDRN)
>>> Cc: gdal-dev@lists.maptools.org
>>> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
>>>
>>>
>>> Gross, Dorit (SDRN) wrote:
>>>> Dear list,
>>>>
>>>> I use gdaladdo to add overviews to a GeoTiff and receive following 
>>>> error
>>>> message:
>>>>
>>>> /usr/local/gislibs/bin/gdaladdo -r average --config 
>>>> COMPRESS_OVERVIEW LZW 
>>>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif 2 4 8 16 32 64
>>>> 128 0.Warning 1:
>>>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>>>> dv06031_wrld.tif:
>>>> Wrong "StripByteCounts" field, ignoring and calculating from
>>>> imagelength Warning 1:
>>>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>>>> dv06031_wrld.tif: Wrong
>>>> "StripByteCounts" field, ignoring and calculating from imagelength
>>>> ..10...20...30...40...50...60...70...80...90..Warning 1:
>>>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>>>> dv06031_wrld.tif: Wrong
>>>> "StripByteCounts" field, ignoring and calculating from imagelength
>>>> Warning
>>> 1:
>>>> TIFFReadDirectory:/Artemis/public/spot-veg/ndv/2006/
>>>> dv06031_wrld.tif: Wrong
>>>> "StripByteCounts" field, ignoring and calculating from imagelength 
>>>> ERROR 1:
>>>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode:
>>>> Not
>>> enough
>>>> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
>>>>
>>>> ERROR 1: IReadBlock failed at X offset 0, Y offset 4
>>>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 4 
>>>> ERROR 1:
>>>> /Artemis/public/spot-veg/ndv/2006/dv06031_wrld.tif:DumpModeDecode:
>>>> Not
>>> enough
>>>> data for scanline 0 ERROR 1: TIFFReadEncodedTile() failed.
>>>>
>>>> ...
>>>>
>>>> Any ideas what could be the problem and how it could be solved?
>>>>
>>>> We use the latest GIS Libs for Mac OS X Panther (2.2.1) including 
>>>> GDAL/OGR v1.3.1 downloaded from Kyng Chaos.
>>>
>>> Dorit,
>>>
>>> It *sounds* like the input file may be corrupt in some sense.   
>>> Was it
>>> generated with libtiff?  Can you make the original file available
>>> for
>>> me to look at?
>>>
>>> Best regards,
>>> --
>>> ---------------------------------------
>>> +--------------------------------
>>> ---------------------------------------+------
>>> I set the clouds in motion - turn up   | Frank Warmerdam,
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | President OSGF, http://
>>> osgeo.org
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org 
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>> -----
>> William Kyngesburye <kyngchaos@kyngchaos.com> http:// 
>> www.kyngchaos.com/
>>
>> "This is a question about the past, is it? ... How can I tell that
>> the
>> past isn't a fiction designed to account for the discrepancy between
>> my immediate physical sensations and my state of mind?"
>>
>> - The Ruler of the Universe
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org 
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com> http://
> www.kyngchaos.com/
>
> First Pogril: Why is life like sticking your head in a bucket filled 
> with hyena offal? Second Pogril: I don't know.  Why IS life like 
> sticking your head in a bucket filled with hyena offal?
> First Pogril: I don't know either.  Wretched, isn't it?
>
> -HitchHiker's Guide to the Galaxy
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com> http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in  
a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy


From warmerdam at pobox.com  Tue Mar 21 10:26:34 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Overviews questions
In-Reply-To: <BAY108-F24F3F997D208E87507D530C6D80@phx.gbl>
References: <BAY108-F24F3F997D208E87507D530C6D80@phx.gbl>
Message-ID: <44201B2A.1030600@pobox.com>

Jeff L. wrote:
> Hi,
> 
> I have few questions about overviews in GDAL as I'm trying to understand 
> them. My current understanding of overviews in GDAL is that their are 
> stored as an auxiliary 'geotiff' file with an .ovr extension or an Erdas 
> .rrd file.

Jeff,

This is generally correct.   Some formats also have their own internal
overviews (TIFF can, ECW, JPEG2000, MrSID).

> My question is really how a band know that has overviews generated for 
> it and how the bands overviews are stored in a tiff file ? is there any 
> assumption about the order ?
> example: overview1_ band 1, overview2_band1,...overview1_band2, 
> overview2_band2.... ?

If the base file has three bands, then each image in the overview TIFF
file should have exactly 3 bands (samples).  So each "image directory" in
the .ovr file will be an overview level for all bands of the image.

There is no required order of the overview levels.  If you ran the command
"gdaladdo 2 8 4" then the overviews in the .ovr file would get generated
in that order.

> Let say I have a bitmap of three band (RGB) and I want to generate 
> overview levels 2, 4, 6 and 8 for band 2 only. Once this done and I open 
> my bitmap (through the code), during the open operation, an .ovr file 
> will be searched and found. How we know from the .ovr (tiff) that the 
> overviews there are those of band2 ? If one can explain how bands 
> overviews are linked to their original bands it will be much appreciated.

You can't generate overviews only for one band if the overview format
is TIFF.  I believe you can if the overview format is .rrd (Erdas Imagine).

> Also, is there any details about the overviews storage within a Tiff, 
> are they simply bands or have a different storage mechanism ?

It is a normal image, but the overview image directories in a
TIFF file will have the "Subfile Type" set to reduced-resolution
image.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mateusz at loskot.net  Tue Mar 21 10:57:10 2006
From: mateusz at loskot.net (=?ISO-8859-2?Q?Mateusz_=A3oskot?=)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
In-Reply-To: <FJEAJLIJBMFCHFKGDAGKGEBECBAA.vdharan2001@gmail.com>
References: <FJEAJLIJBMFCHFKGDAGKGEBECBAA.vdharan2001@gmail.com>
Message-ID: <44202256.5020600@loskot.net>

Vidhiyadharan Nadarajah wrote:
> You can down load the shape files from the following link
> http://vdharan.741.com/india_ds.dbf
> http://vdharan.741.com/india_ds.shp
> http://vdharan.741.com/india_ds.shx
> 

Hi,
I think I've found the problem.
Your code also gave me exceptions and your program crashed.
I tested with GDAL 1.3.0, compiled using VC++ 2005.

Simply, you've used OGR API incorrectly.
So, here is working version with my fixes, please read big comments 
marked with my nickname "mloskot".


//////////////////////////////////////////////////////////////////////////////
#include <ogrsf_frmts.h>

int main()
{

     OGRRegisterAll();
     OGRDataSource* poDS = NULL;
     poDS = 
OGRSFDriverRegistrar::Open("D:\\download\\india\\india_ds.shp", FALSE);
     if( poDS == NULL )
     {
     	printf( "Open failed.\n%s" );
     	exit( 1 );
     }

     OGRLayer* poLayer = NULL;
     poLayer = poDS->GetLayerByName( "india_ds" );
     OGRFeature *poFeature;
     poLayer->ResetReading();
     if (NULL == poLayer)
     {
     	printf("Layer not found\n");
     	OGRDataSource::DestroyDataSource(poDS);
     	return -1;
     }

     while( (poFeature = poLayer->GetNextFeature()) != NULL )
     {
         long fid = poFeature->GetFID();
	printf("==================================\n");
	printf("FID: %d\n", fid);		

	OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
	if (NULL == poFDefn)
	{
	    // mloskot: HANDLE THIS ERROR AS YOU WISH
	    printf("\nEEERRROOORRR!\n");
	    return 0;
	}

	for(int iField = 0; iField < poFDefn->GetFieldCount(); iField++)
	{
	    OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );
	    if( poFieldDefn->GetType() == OFTInteger )
		printf( "%d,", poFeature->GetFieldAsInteger( iField ) );
	    else if( poFieldDefn->GetType() == OFTReal )
		printf( "%.3f,", poFeature->GetFieldAsDouble(iField) );
	    else if( poFieldDefn->GetType() == OFTString )
		printf( "%s,", poFeature->GetFieldAsString(iField) );
	    else
		printf( "%s,", poFeature->GetFieldAsString(iField) );
	}

	OGRGeometry *poGeometry = NULL;
     	poGeometry = poFeature->GetGeometryRef();
	if( poGeometry == NULL)
	{
	   printf("NULL GEOMETRY!!!\n");
	}
	else
	{
	    if (wkbFlatten(poGeometry->getGeometryType()) == wkbPolygon)
	    {
		// mloskot: I'D CHECK THOSE POINTERS AGAINST NULL
		OGRPolygon *poPolygon = (OGRPolygon *)poGeometry ;
		OGRLinearRing *poLinearRing = poPolygon->getExteriorRing();
		
		// mloskot:
		// WHAT IS THIS CAST FOR???
		// This line causes your problems
		//OGRPoint *poPoint = (OGRPoint *) poGeometry;

		for(int pi = 0; pi < poLinearRing->getNumPoints(); pi++)
		{
		    // mloskot:
		    OGRPoint point; // CAN NOT BE NULL
		    // getPoint expects allocated OGRPoint objec to will with coordinates
		    poLinearRing->getPoint(pi, &point);
		    printf( "%.3f,%.3f\n", point.getX(), point.getY() );
		}
	    }
	    else
	    {
		printf( "no polygon geometry\n" );
	    }
	}
     }
     printf("\n\n");

     OGRFeature::DestroyFeature( poFeature );
     OGRDataSource::DestroyDataSource( poDS );
     return 0;
}
//////////////////////////////////////////////////////////////////////////////

Good Luck!
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Mar 21 11:03:40 2006
From: mateusz at loskot.net (=?ISO-8859-2?Q?Mateusz_=A3oskot?=)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
In-Reply-To: <44202256.5020600@loskot.net>
References: <FJEAJLIJBMFCHFKGDAGKGEBECBAA.vdharan2001@gmail.com>
	<44202256.5020600@loskot.net>
Message-ID: <442023DC.8060902@loskot.net>


Mateusz ?oskot wrote:
>         for(int pi = 0; pi < poLinearRing->getNumPoints(); pi++)
>         {
>             // mloskot:
>             OGRPoint point; // CAN NOT BE NULL
>             // getPoint expects allocated OGRPoint objec to will with coordinates
------------------------------------------------------^^^^^^^^^^^^^^^^^^^^^^

Small typo.
It should be "object to fill with coordinates"

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From nf10 at hotmail.com  Tue Mar 21 11:07:54 2006
From: nf10 at hotmail.com (Jeff L.)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Overviews questions
In-Reply-To: <44201B2A.1030600@pobox.com>
Message-ID: <BAY108-F373408E256D71971FE2DDC6D80@phx.gbl>

Thanks Frank for your response and your insights.

So one need to build overviews for all the bands if the used overview format 
is tiff: Ok.

I'm still a bit unclear about the internal storage of the overviews within a 
tiff. You mentioned that an overview .ovr file is a 'normal' image. Does is 
have any 'normal' bands (full resolution) or only reduced resolutions ? Can 
you please explain ? (If i run a 'gdalinfo' on an .ovr it stated that it has 
one band with attached overviews).

Once an .ovr file is created and the base file (.bmp for instance) is opened 
programmatically, there is a check for the .ovr file existence. If the .ovr 
is found how we get the overview count (number of overviews) for each band ? 
(Will it be the same for all the bands ?) Is it stored with the .ovr or we 
deduce it (example: base dataset has 3 bands and the .ovr has 12 'bands' --> 
12/3 : 4 overviews for each band ?).

Last question: how the overviews are stored within the tiff ? From your 
response I understood
that there will a be a set of 'images' within the tiff. Every image 
correspond to an overview level and has all the bands. To simplify the 
picture, this would look like:

image1:
  overview level 1 for band1
  overview level 1 for band2
  overview level 1 for band3
  .... overview level 1 for last band

image2:
overview level 2 for band1
overview level 2 for band2
overview level 2 for band3
.....

Where level 1 can be 2, 4, 6 or any even number

Please correct if this schema is not correct.

Sorry about asking many questions as I'm trying to understand the details 
about 'overviews' within GDAL.

Thanks

Jeff





>From: Frank Warmerdam <warmerdam@pobox.com>
>To: "Jeff L." <nf10@hotmail.com>
>CC: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] Overviews questions
>Date: Tue, 21 Mar 2006 10:26:34 -0500
>
>Jeff L. wrote:
>>Hi,
>>
>>I have few questions about overviews in GDAL as I'm trying to understand 
>>them. My current understanding of overviews in GDAL is that their are 
>>stored as an auxiliary 'geotiff' file with an .ovr extension or an Erdas 
>>.rrd file.
>
>Jeff,
>
>This is generally correct.   Some formats also have their own internal
>overviews (TIFF can, ECW, JPEG2000, MrSID).
>
>>My question is really how a band know that has overviews generated for it 
>>and how the bands overviews are stored in a tiff file ? is there any 
>>assumption about the order ?
>>example: overview1_ band 1, overview2_band1,...overview1_band2, 
>>overview2_band2.... ?
>
>If the base file has three bands, then each image in the overview TIFF
>file should have exactly 3 bands (samples).  So each "image directory" in
>the .ovr file will be an overview level for all bands of the image.
>
>There is no required order of the overview levels.  If you ran the command
>"gdaladdo 2 8 4" then the overviews in the .ovr file would get generated
>in that order.
>
>>Let say I have a bitmap of three band (RGB) and I want to generate 
>>overview levels 2, 4, 6 and 8 for band 2 only. Once this done and I open 
>>my bitmap (through the code), during the open operation, an .ovr file will 
>>be searched and found. How we know from the .ovr (tiff) that the overviews 
>>there are those of band2 ? If one can explain how bands overviews are 
>>linked to their original bands it will be much appreciated.
>
>You can't generate overviews only for one band if the overview format
>is TIFF.  I believe you can if the overview format is .rrd (Erdas Imagine).
>
>>Also, is there any details about the overviews storage within a Tiff, are 
>>they simply bands or have a different storage mechanism ?
>
>It is a normal image, but the overview image directories in a
>TIFF file will have the "Subfile Type" set to reduced-resolution
>image.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, 
>warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | President OSGF, http://osgeo.org
>



From list67 at netscape.net  Tue Mar 21 11:20:29 2006
From: list67 at netscape.net (list67@netscape.net)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] VRT file creation from multiple geotiff files
Message-ID: <44154192.01CBF44B.00066B75@netscape.net>

Hi.  I have many geotiff files.  I think that they are all the same projection and resolution.  They are all either adjacent or overlap each other.  I'd like for GDAL to treat them as a single dataset.  My current method for accomplishing this is to run gdal_merge and create a single .img file, and then pass that filename to GDAL.

Is there a more immediate method?  For example, could all the geotiffs be referenced by a single .vrt file?  If so, is there a program that can generate that .vrt file?

Thank you for your time.

    Mike

__________________________________________________________________
Switch to Netscape Internet Service.
As low as $9.95 a month -- Sign up today at http://isp.netscape.com/register

Netscape. Just the Net You Need.

New! Netscape Toolbar for Internet Explorer
Search from anywhere on the Web and block those annoying pop-ups.
Download now at http://channels.netscape.com/ns/search/install.jsp

From warmerdam at pobox.com  Tue Mar 21 11:21:20 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Overviews questions
In-Reply-To: <BAY108-F373408E256D71971FE2DDC6D80@phx.gbl>
References: <BAY108-F373408E256D71971FE2DDC6D80@phx.gbl>
Message-ID: <44202800.1060505@pobox.com>

Jeff L. wrote:
> Thanks Frank for your response and your insights.
> 
> So one need to build overviews for all the bands if the used overview 
> format is tiff: Ok.
> 
> I'm still a bit unclear about the internal storage of the overviews 
> within a tiff. You mentioned that an overview .ovr file is a 'normal' 
> image. Does is have any 'normal' bands (full resolution) or only reduced 
> resolutions ? Can you please explain ? (If i run a 'gdalinfo' on an .ovr 
> it stated that it has one band with attached overviews).

Jeff,

In the .ovr file all image directories will be marked as reduced
resolution images.  But if you were to run gdal tools on it they will
treat the first encountered image as the "base full res image" I think.

I would encourage you to run "tiffinfo" on the .ovr file to see it's
structure in more detail.

> Once an .ovr file is created and the base file (.bmp for instance) is 
> opened programmatically, there is a check for the .ovr file existence. 
> If the .ovr is found how we get the overview count (number of overviews) 
> for each band ? (Will it be the same for all the bands ?) Is it stored 
> with the .ovr or we deduce it (example: base dataset has 3 bands and the 
> .ovr has 12 'bands' --> 12/3 : 4 overviews for each band ?).

Through the GDAL API you would call GetOverviewCount() on the GDALRasterBand
to find out how many overviews there are available, and GetOverview(int)
to fetch them.  If the overviews are stored in TIFF format, all bands
will have the same number of overviews.

> Last question: how the overviews are stored within the tiff ? From your 
> response I understood
> that there will a be a set of 'images' within the tiff. Every image 
> correspond to an overview level and has all the bands. To simplify the 
> picture, this would look like:
> 
> image1:
>  overview level 1 for band1
>  overview level 1 for band2
>  overview level 1 for band3
>  .... overview level 1 for last band
> 
> image2:
> overview level 2 for band1
> overview level 2 for band2
> overview level 2 for band3
> .....
> 
> Where level 1 can be 2, 4, 6 or any even number
> 
> Please correct if this schema is not correct.
> 
> Sorry about asking many questions as I'm trying to understand the 
> details about 'overviews' within GDAL.

chmod a-w base.tif
gdaladdo base.tif 2 4
warmerda@gdal2200[160]% ls -l base*
-r--r--r--  1 warmerda users 787570 Mar 21 11:19 base.tif
-rw-r--r--  1 warmerda users 246236 Mar 21 11:20 base.tif.ovr
tiffinfo base.tif.ovr
TIFF Directory at offset 0x8 (8)
   Subfile Type: reduced-resolution image (1 = 0x1)
   Image Width: 256 Image Length: 256
   Tile Width: 128 Tile Length: 128
   Bits/Sample: 8
   Sample Format: unsigned integer
   Compression Scheme: None
   Photometric Interpretation: RGB color
   Samples/Pixel: 3
   Planar Configuration: separate image planes
TIFF Directory at offset 0x116 (278)
   Subfile Type: reduced-resolution image (1 = 0x1)
   Image Width: 128 Image Length: 128
   Tile Width: 128 Tile Length: 128
   Bits/Sample: 8
   Sample Format: unsigned integer
   Compression Scheme: None
   Photometric Interpretation: RGB color
   Samples/Pixel: 3
   Planar Configuration: separate image planes


So, there are two overview levels, so there are two "image directories".
Each image directory has 3 bands (samples/pixel:3).

Hopefully this makes it more clear.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From nf10 at hotmail.com  Tue Mar 21 11:31:44 2006
From: nf10 at hotmail.com (Jeff L.)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Overviews questions
In-Reply-To: <44202800.1060505@pobox.com>
Message-ID: <BAY108-F31B72F3B8C5FC4BFBFF269C6D80@phx.gbl>

Thank you very much Frank. Things are clear now.

Jeff


>From: Frank Warmerdam <warmerdam@pobox.com>
>To: "Jeff L." <nf10@hotmail.com>
>CC: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] Overviews questions
>Date: Tue, 21 Mar 2006 11:21:20 -0500
>
>Jeff L. wrote:
>>Thanks Frank for your response and your insights.
>>
>>So one need to build overviews for all the bands if the used overview 
>>format is tiff: Ok.
>>
>>I'm still a bit unclear about the internal storage of the overviews within 
>>a tiff. You mentioned that an overview .ovr file is a 'normal' image. Does 
>>is have any 'normal' bands (full resolution) or only reduced resolutions ? 
>>Can you please explain ? (If i run a 'gdalinfo' on an .ovr it stated that 
>>it has one band with attached overviews).
>
>Jeff,
>
>In the .ovr file all image directories will be marked as reduced
>resolution images.  But if you were to run gdal tools on it they will
>treat the first encountered image as the "base full res image" I think.
>
>I would encourage you to run "tiffinfo" on the .ovr file to see it's
>structure in more detail.
>
>>Once an .ovr file is created and the base file (.bmp for instance) is 
>>opened programmatically, there is a check for the .ovr file existence. If 
>>the .ovr is found how we get the overview count (number of overviews) for 
>>each band ? (Will it be the same for all the bands ?) Is it stored with 
>>the .ovr or we deduce it (example: base dataset has 3 bands and the .ovr 
>>has 12 'bands' --> 12/3 : 4 overviews for each band ?).
>
>Through the GDAL API you would call GetOverviewCount() on the 
>GDALRasterBand
>to find out how many overviews there are available, and GetOverview(int)
>to fetch them.  If the overviews are stored in TIFF format, all bands
>will have the same number of overviews.
>
>>Last question: how the overviews are stored within the tiff ? From your 
>>response I understood
>>that there will a be a set of 'images' within the tiff. Every image 
>>correspond to an overview level and has all the bands. To simplify the 
>>picture, this would look like:
>>
>>image1:
>>  overview level 1 for band1
>>  overview level 1 for band2
>>  overview level 1 for band3
>>  .... overview level 1 for last band
>>
>>image2:
>>overview level 2 for band1
>>overview level 2 for band2
>>overview level 2 for band3
>>.....
>>
>>Where level 1 can be 2, 4, 6 or any even number
>>
>>Please correct if this schema is not correct.
>>
>>Sorry about asking many questions as I'm trying to understand the details 
>>about 'overviews' within GDAL.
>
>chmod a-w base.tif
>gdaladdo base.tif 2 4
>warmerda@gdal2200[160]% ls -l base*
>-r--r--r--  1 warmerda users 787570 Mar 21 11:19 base.tif
>-rw-r--r--  1 warmerda users 246236 Mar 21 11:20 base.tif.ovr
>tiffinfo base.tif.ovr
>TIFF Directory at offset 0x8 (8)
>   Subfile Type: reduced-resolution image (1 = 0x1)
>   Image Width: 256 Image Length: 256
>   Tile Width: 128 Tile Length: 128
>   Bits/Sample: 8
>   Sample Format: unsigned integer
>   Compression Scheme: None
>   Photometric Interpretation: RGB color
>   Samples/Pixel: 3
>   Planar Configuration: separate image planes
>TIFF Directory at offset 0x116 (278)
>   Subfile Type: reduced-resolution image (1 = 0x1)
>   Image Width: 128 Image Length: 128
>   Tile Width: 128 Tile Length: 128
>   Bits/Sample: 8
>   Sample Format: unsigned integer
>   Compression Scheme: None
>   Photometric Interpretation: RGB color
>   Samples/Pixel: 3
>   Planar Configuration: separate image planes
>
>
>So, there are two overview levels, so there are two "image directories".
>Each image directory has 3 bands (samples/pixel:3).
>
>Hopefully this makes it more clear.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, 
>warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | President OSGF, http://osgeo.org
>



From warmerdam at pobox.com  Tue Mar 21 12:34:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] VRT file creation from multiple geotiff files
In-Reply-To: <44154192.01CBF44B.00066B75@netscape.net>
References: <44154192.01CBF44B.00066B75@netscape.net>
Message-ID: <4420390B.5070806@pobox.com>

list67@netscape.net wrote:
> Hi.  I have many geotiff files.  I think that they are all the same projection 
 > and resolution.  They are all either adjacent or overlap each other.  I'd
 > like for GDAL to treat them as a single dataset.  My current method for
 > accomplishing this is to run gdal_merge and create a single .img file, and 
then
 > pass that filename to GDAL.
> 
> Is there a more immediate method?  For example, could all the geotiffs be 
 > referenced by a single .vrt file?

Yes, this can be done, but the VRT mechanism isn't necessarily going
to scale up well to alot of individual files.  10's would be ok.
100's might not be ok.

 > If so, is there a program that can generate that .vrt file?

No, unfortunately not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From dkleiner at cmf.nrl.navy.mil  Tue Mar 21 12:56:51 2006
From: dkleiner at cmf.nrl.navy.mil (Dardo D Kleiner - CONTRACTOR)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] VRT file creation from multiple geotiff files 
In-Reply-To: <4420390B.5070806@pobox.com> 
References: <44154192.01CBF44B.00066B75@netscape.net>
	<4420390B.5070806@pobox.com>
Message-ID: <200603211756.k2LHupYP011361@gene.cmf.nrl.navy.mil>

Here is a simple program I use to create a .vrt mosaic
from either a file listing source images or a directory
containing source images.  Might have some rounding problems
in bounds computation, but works pretty well generally...

http://www.cmf.nrl.navy.mil/ccs/project/public/DC/web/projects/vrtmosaic

Obligatory disclaimer: public domain - no guarantees of anything...

-- 
Dardo D. Kleiner
Connection Machine Facility, Center for Computational Sciences
Naval Research Laboratory (Washington, DC)
dkleiner@cmf.nrl.navy.mil -- 202.404.7019 


From Tom.Kralidis at ec.gc.ca  Tue Mar 21 13:00:25 2006
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] ogr2ogr SetAttributeFilter error
Message-ID: <2576812186CDD411BF1500508B6DCE950DB331B9@ecnwri1.ontario.int.ec.gc.ca>


Hi,

Any thoughts on this one?

Thanks

..Tom


> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Kralidis,Tom [Burlington]
> Sent: Monday, March 20, 2006 8:25 AM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] ogr2ogr SetAttributeFilter error
> 
> 
> 
> Hi,
> 
> Using:
> 
> OS: Linux
> GDAL/OGR: 1.2.6
> proj: 4.4.9
> 
> We're trying to create a GML document from a .ovf file:
> 
> $ cat ./rtwl.ovf
> 
> <OGRVRTDataSource>
>   <OGRVRTLayer name="rtwl">
>     <SrcDataSource>ODBC:foo/foo@foodb</SrcDataSource>
>     <SrcSQL>select * from RMRWL</SrcSQL>
>     <GeometryType>wkbPoint</GeometryType>
>     <LayerSRS>WGS84</LayerSRS>
>     <GeometryField encoding="PointFromColumns" x="value" 
> y="accesstype"/>
>   </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> $ ogr2ogr_cmd -f GML rtwl.gml rtwl.ovf
> 
> ...and get the following error message:
> 
> ERROR 1: SetAttributeFilter() not supported on ExecuteSQL() results.
> 
> ...it appears that the GML document is output the way we 
> expect it, but I'm not sure what the above error message means.
> 
> Any help would be appreciated.  Especially if it doesn't involve
> (immediately) upgrading :)
> 
> Thanks
> 
> ..Tom
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From daniel.victoria at gmail.com  Tue Mar 21 13:10:24 2006
From: daniel.victoria at gmail.com (Daniel Victoria)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Gdal and NetCDF...
Message-ID: <e7d9427f0603211010i54e064efhd56129b2684a618b@mail.gmail.com>

Hi all,

I have a very simple python program that subsets and converts the CRU
0.5 degrees time series data in a NetCDF format following COARDS
conventions - hopefully -

Now, I want to convert this NetCDF to TIFF using gdal and import it to
GRASS. When I ask my program to subset the CRU data from 10 to 30
degrees latitude it will get 41 cells from 10.25 to 30.25 (I'm using
cell centers). This means that the data spans from 10 (south edge) to
30.5 (north edge), with 41 cells, which equals 0.5 degrees resolution.

Now, when I do a gdalinfo on the NetCDF file I get a resolution of
0.4878 (equals 20 degrees / 41 cells).

Could someone point me to what I'm doing wrong? Is this a feature/bug?
I'm using GDAL provided by the FWTools-linux-1.0.0a7

I'm attaching the information on the NetCDF file (ncdump and gdalinfo)

Thanks a bunch
Daniel

----- ncdump output -----

netcdf saida {
dimensions:
        X = 41 ;
        Y = 41 ;
        T = 12 ;
variables:
        double Y(Y) ;
                Y:long_name = "Latitude" ;
                Y:units = "degrees_north" ;
        double X(X) ;
                X:long_name = "Longitude" ;
                X:units = "degrees_east" ;
        short T(T) ;
                T:long_name = "Months" ;
                T:units = "months since 1981-01-01" ;
        short pre(T, Y, X) ;
                pre:long_name = "Precipitation" ;
                pre:units = "mm" ;
                pre:scale_factor = 0.1 ;
                pre:missing_value = -9990 ;

// global attributes:
                :Conventions = "COARDS" ;
                :history = "Tyndall Centre grim file created on 13.01.2004 at 14
:28 by Dr. Tim Mitchel" ;
                :production = "CRU TS 2.1 converted to NetCDF by Daniel" ;
data:

 Y = 30.25, 29.75, 29.25, 28.75, 28.25, 27.75, 27.25, 26.75, 26.25, 25.75,
    25.25, 24.75, 24.25, 23.75, 23.25, 22.75, 22.25, 21.75, 21.25, 20.75,
    20.25, 19.75, 19.25, 18.75, 18.25, 17.75, 17.25, 16.75, 16.25, 15.75,
    15.25, 14.75, 14.25, 13.75, 13.25, 12.75, 12.25, 11.75, 11.25, 10.75,
    10.25 ;

 X = 75.25, 75.75, 76.25, 76.75, 77.25, 77.75, 78.25, 78.75, 79.25, 79.75,
    80.25, 80.75, 81.25, 81.75, 82.25, 82.75, 83.25, 83.75, 84.25, 84.75,
    85.25, 85.75, 86.25, 86.75, 87.25, 87.75, 88.25, 88.75, 89.25, 89.75,
    90.25, 90.75, 91.25, 91.75, 92.25, 92.75, 93.25, 93.75, 94.25, 94.75,
    95.25 ;

 T = 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 ;

<snip> file values...


------ GDAL info output --------
Driver: netCDF/network Common Data Format
Size is 41, 41
Coordinate System is `'
Origin = (75.250000,30.250000)
Pixel Size = (0.48780488,-0.48780488)
Metadata:
  NC_GLOBAL#Conventions=COARDS
  NC_GLOBAL#history=Tyndall Centre grim file created on 13.01.2004 at 14:28 by D
r. Tim Mitchel
  NC_GLOBAL#production=CRU TS 2.1 converted to NetCDF by Daniel
  pre#long_name=Precipitation
  pre#units=mm
  pre#scale_factor=0.1
  pre#missing_value=-9990
  X#long_name=Longitude
  X#units=degrees_east
  Y#long_name=Latitude
  Y#units=degrees_north
  T#long_name=Months
  T#units=months since 1981-01-01
Corner Coordinates:
Upper Left  (  75.2500000,  30.2500000)
Lower Left  (  75.2500000,  10.2500000)
Upper Right (  95.2500000,  30.2500000)
Lower Right (  95.2500000,  10.2500000)
Center      (  85.2500000,  20.2500000)

<snip> band information...


From warmerdam at pobox.com  Tue Mar 21 13:55:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] ogr2ogr SetAttributeFilter error
In-Reply-To: <2576812186CDD411BF1500508B6DCE950DB331B9@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE950DB331B9@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <44204C09.4030009@pobox.com>

Kralidis,Tom [Burlington] wrote:
>> We're trying to create a GML document from a .ovf file:
>>
>> $ cat ./rtwl.ovf
>>
>> <OGRVRTDataSource>
>>   <OGRVRTLayer name="rtwl">
>>     <SrcDataSource>ODBC:foo/foo@foodb</SrcDataSource>
>>     <SrcSQL>select * from RMRWL</SrcSQL>
>>     <GeometryType>wkbPoint</GeometryType>
>>     <LayerSRS>WGS84</LayerSRS>
>>     <GeometryField encoding="PointFromColumns" x="value" 
>> y="accesstype"/>
>>   </OGRVRTLayer>
>> </OGRVRTDataSource>
>>
>> $ ogr2ogr_cmd -f GML rtwl.gml rtwl.ovf
>>
>> ...and get the following error message:
>>
>> ERROR 1: SetAttributeFilter() not supported on ExecuteSQL() results.
>>
>> ...it appears that the GML document is output the way we 
>> expect it, but I'm not sure what the above error message means.
>>
>> Any help would be appreciated.  Especially if it doesn't involve
>> (immediately) upgrading :)

Tom,

The ODBC driver was reporting an error if any call was made to
SetAttributeFilter() on the results of an ExecuteSQL().  The VRT
driver was attempting to clear the attribute filter.  I have modified
the ODBC (and PGeo and SQLite) drivers in CVS to not report this error
if a NULL query is set.

In your case the error message can be ignored.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From potts at cfl.rr.com  Tue Mar 21 14:12:12 2006
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Percent complete and jpeg driver
In-Reply-To: <44204C09.4030009@pobox.com>
References: <2576812186CDD411BF1500508B6DCE950DB331B9@ecnwri1.ontario.int.ec.gc.ca>
	<44204C09.4030009@pobox.com>
Message-ID: <07DDA79A-E352-413E-8945-1AF7BB7E6CB3@cfl.rr.com>

Hello All:

I am using the progress function and have abort support.  When  
aborting I return a value of 0 from the progress function and this  
does stop GDAL CreateCopy from executing further.  For the jpeg  
driver it calls exit internally since it was not able to read enough  
data.  Is there a way to trap this through GDAL so it doesn't call  
exit but instead errors out gracefully?


Take care

Garrett

From warmerdam at pobox.com  Tue Mar 21 14:47:45 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Percent complete and jpeg driver
In-Reply-To: <07DDA79A-E352-413E-8945-1AF7BB7E6CB3@cfl.rr.com>
References: <2576812186CDD411BF1500508B6DCE950DB331B9@ecnwri1.ontario.int.ec.gc.ca>	<44204C09.4030009@pobox.com>
	<07DDA79A-E352-413E-8945-1AF7BB7E6CB3@cfl.rr.com>
Message-ID: <44205861.2080504@pobox.com>

Garrett Potts wrote:
> Hello All:
> 
> I am using the progress function and have abort support.  When aborting 
> I return a value of 0 from the progress function and this does stop GDAL 
> CreateCopy from executing further.  For the jpeg driver it calls exit 
> internally since it was not able to read enough data.  Is there a way to 
> trap this through GDAL so it doesn't call exit but instead errors out 
> gracefully?

Garrett,

I have corrected the CreateCopy() in jpgdataset.cpp to *not* call
jpeg_finish_compress() if any sort of error (including user termination)
occurs and now interruption should cleanup and return gracefully.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From potts at cfl.rr.com  Tue Mar 21 14:53:07 2006
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Percent complete and jpeg driver
In-Reply-To: <44205861.2080504@pobox.com>
References: <2576812186CDD411BF1500508B6DCE950DB331B9@ecnwri1.ontario.int.ec.gc.ca>
	<44204C09.4030009@pobox.com>
	<07DDA79A-E352-413E-8945-1AF7BB7E6CB3@cfl.rr.com>
	<44205861.2080504@pobox.com>
Message-ID: <8BF86647-502A-4965-A423-6E65C58F3C22@cfl.rr.com>

Hello Frank:

Just updated the jpeg driver and tested the abort and it works great  
now.  Thank you again.

Take care

Garrett

On Mar 21, 2006, at 2:47 PM, Frank Warmerdam wrote:

> Garrett Potts wrote:
>> Hello All:
>> I am using the progress function and have abort support.  When  
>> aborting I return a value of 0 from the progress function and this  
>> does stop GDAL CreateCopy from executing further.  For the jpeg  
>> driver it calls exit internally since it was not able to read  
>> enough data.  Is there a way to trap this through GDAL so it  
>> doesn't call exit but instead errors out gracefully?
>
> Garrett,
>
> I have corrected the CreateCopy() in jpgdataset.cpp to *not* call
> jpeg_finish_compress() if any sort of error (including user  
> termination)
> occurs and now interruption should cleanup and return gracefully.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGF, http:// 
> osgeo.org


From tbeckman at usgs.gov  Tue Mar 21 15:50:37 2006
From: tbeckman at usgs.gov (Tim Beckmann)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Mishandled "pixel is point" in geotiff
In-Reply-To: <44204C09.4030009@pobox.com>
Message-ID: <OF485E312C.1D5F814D-ON86257138.00725B71-86257138.00727B01@usgs.gov>

Hi all (and Frank),

I sent an email to the list a few weeks ago about geotiff files with the 
"Pixel is point" option not being handled properly by gdal.  I only 
received a reply from one person off the list stating that it was a known 
problem. 

I did figure out how to pass the "-mo AREA_OR_POINT=POINT" parameter to 
gdal_translate to tell it to include the pixel is point indication in the 
output geotiff file.  So, my command line looks like:

        gdal_translate -mo AREA_OR_POINT=POINT -co INTERLEAVE=PIXEL \
                -a_srs "+proj=utm +zone=15 +datum=WGS84"  \
                -a_ullr 753600 3462900 801900 3260100 \
                'HDF4_SDS:UNKNOWN:"EO1H0220392005002110P0_HDF.L1T":0' 
testit_b001.tif

This results in the geotiff file properly indicating "pixel is point". 
However, the reported pixel size is incorrect.  It is being calculated 
incorrectly from the provided corners like it was still "pixel is area" 
(so instead of being 30 meters, it is just a little less than 30 meters). 
The hack at the bottom of the email works around it by rescaling the pixel 
size for the "pixel is point" case.  But it doesn't do anything for 
properly fixing the issue throughout gdal... (but it looks like the "pixel 
is point" support itself is a hack...)

Tim


diff -u -r1.157 geotiff.cpp
--- geotiff.cpp 17 Feb 2006 15:46:06 -0000      1.157
+++ geotiff.cpp 21 Mar 2006 20:40:41 -0000
@@ -3786,6 +3786,20 @@
                 adfPixelScale[1] = fabs(adfGeoTransform[5]);
                 adfPixelScale[2] = 0.0;
 
+                /* if the metadata indicates the image is using "Pixel is
+                   point", scale the pixel size since it has been 
calculated
+                   incorrectly.  This is not the proper way to fix it, 
but it
+                   takes more knowledge to find the correct place to fix 
it */
+                if( poSrcDS->GetMetadataItem( GDALMD_AREA_OR_POINT )
+                    && 
EQUAL(poSrcDS->GetMetadataItem(GDALMD_AREA_OR_POINT),
+                                GDALMD_AOP_POINT) )
+                {
+                    int nRasterXSize = poSrcDS->GetRasterXSize();
+                    int nRasterYSize = poSrcDS->GetRasterYSize();
+                    adfPixelScale[0] *= 
(double)nRasterXSize/(nRasterXSize - 1);
+                    adfPixelScale[1] *= 
(double)nRasterYSize/(nRasterYSize - 1);
+                }
+
                 TIFFSetField( hTIFF, TIFFTAG_GEOPIXELSCALE, 3, 
adfPixelScale );
 
                 adfTiePoints[0] = 0.0;
--------------------------------------------------------------------------
Tim Beckmann
Software Project Lead
Science Applications International Corporation (SAIC)
Contractor to the USGS/EROS
Sioux Falls, SD 57198
605-594-2521    Phone
605-594-6940    Fax
tbeckman@usgs.gov


From warmerdam at pobox.com  Tue Mar 21 16:28:36 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Mishandled "pixel is point" in geotiff
In-Reply-To: <OF485E312C.1D5F814D-ON86257138.00725B71-86257138.00727B01@usgs.gov>
References: <OF485E312C.1D5F814D-ON86257138.00725B71-86257138.00727B01@usgs.gov>
Message-ID: <44207004.9010907@pobox.com>

Tim Beckmann wrote:
> Hi all (and Frank),
> 
> I sent an email to the list a few weeks ago about geotiff files with the 
> "Pixel is point" option not being handled properly by gdal.  I only 
> received a reply from one person off the list stating that it was a known 
> problem. 
> 
> I did figure out how to pass the "-mo AREA_OR_POINT=POINT" parameter to 
> gdal_translate to tell it to include the pixel is point indication in the 
> output geotiff file.  So, my command line looks like:
> 
>         gdal_translate -mo AREA_OR_POINT=POINT -co INTERLEAVE=PIXEL \
>                 -a_srs "+proj=utm +zone=15 +datum=WGS84"  \
>                 -a_ullr 753600 3462900 801900 3260100 \
>                 'HDF4_SDS:UNKNOWN:"EO1H0220392005002110P0_HDF.L1T":0' 
> testit_b001.tif
> 
> This results in the geotiff file properly indicating "pixel is point". 
> However, the reported pixel size is incorrect.  It is being calculated 
> incorrectly from the provided corners like it was still "pixel is area" 
> (so instead of being 30 meters, it is just a little less than 30 meters). 
> The hack at the bottom of the email works around it by rescaling the pixel 
> size for the "pixel is point" case.  But it doesn't do anything for 
> properly fixing the issue throughout gdal... (but it looks like the "pixel 
> is point" support itself is a hack...)

Tim,

I'm not completely out of denial about PixelIsPoint.  At some point I will
finally cave in and fix it, but it will need to be addressed in a variety
of places in the software.  In the meantime you need to specify -a_ullr based
on the implicit pixel-is-area assumption of GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From tbeckman at usgs.gov  Tue Mar 21 16:48:38 2006
From: tbeckman at usgs.gov (Tim Beckmann)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Mishandled "pixel is point" in geotiff
In-Reply-To: <44207004.9010907@pobox.com>
Message-ID: <OFE5F7DDF9.60617DFB-ON86257138.0076B567-86257138.0077CB19@usgs.gov>

Frank,

I understand.  I went through the same denial and some confusion several 
years ago when I first ran into the issue.

Unfortunately, feeding the -a_ullr parameter corner points based on 
pixel-is-area results in an output file only works properly if you want 
the output geotiff to be pixel-is-area.  We typically create geotiff files 
using pixel-is-point and don't really have the freedom to change that. So, 
I'll probably have to maintain my little hack separately until you "cave 
in and fix it" ;).

I guess another option might be to change things to feed it pixel-is-area 
corner points and change the hack to instead adjust the ModelTiePointTag 
values written by 0.5 pixels if the pixel-is-point metadata tag is set.  I 
think that would allow the rest of gdal to work as expected, but still 
produce an output geotiff with accurate data for the pixel-is-point case. 
(probably wouldn't work for reading that geotiff back into gdal though). 
If you wanted to include something like that in gdal, I could be convinced 
to create a patch for it.  Not a complete solution by any means, but 
perhaps a step in the right direction.

Thanks
Tim

--------------------------------------------------------------------------
Tim Beckmann
Software Project Lead
Science Applications International Corporation (SAIC)
Contractor to the USGS/EROS
Sioux Falls, SD 57198
605-594-2521    Phone
605-594-6940    Fax
tbeckman@usgs.gov




Frank Warmerdam <warmerdam@pobox.com> 
Sent by: Frank Warmerdam <fwarmerdam@gmail.com>
03/21/2006 03:28 PM

To
Tim Beckmann <tbeckman@usgs.gov>
cc
gdal-dev@lists.maptools.org
Subject
Re: [Gdal-dev] Mishandled "pixel is point" in geotiff






Tim Beckmann wrote:
> Hi all (and Frank),
> 
> I sent an email to the list a few weeks ago about geotiff files with the 

> "Pixel is point" option not being handled properly by gdal.  I only 
> received a reply from one person off the list stating that it was a 
known 
> problem. 
> 
> I did figure out how to pass the "-mo AREA_OR_POINT=POINT" parameter to 
> gdal_translate to tell it to include the pixel is point indication in 
the 
> output geotiff file.  So, my command line looks like:
> 
>         gdal_translate -mo AREA_OR_POINT=POINT -co INTERLEAVE=PIXEL \
>                 -a_srs "+proj=utm +zone=15 +datum=WGS84"  \
>                 -a_ullr 753600 3462900 801900 3260100 \
>                 'HDF4_SDS:UNKNOWN:"EO1H0220392005002110P0_HDF.L1T":0' 
> testit_b001.tif
> 
> This results in the geotiff file properly indicating "pixel is point". 
> However, the reported pixel size is incorrect.  It is being calculated 
> incorrectly from the provided corners like it was still "pixel is area" 
> (so instead of being 30 meters, it is just a little less than 30 
meters). 
> The hack at the bottom of the email works around it by rescaling the 
pixel 
> size for the "pixel is point" case.  But it doesn't do anything for 
> properly fixing the issue throughout gdal... (but it looks like the 
"pixel 
> is point" support itself is a hack...)

Tim,

I'm not completely out of denial about PixelIsPoint.  At some point I will
finally cave in and fix it, but it will need to be addressed in a variety
of places in the software.  In the meantime you need to specify -a_ullr 
based
on the implicit pixel-is-area assumption of GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From gillian.walter at vexcel.com  Mon Mar 20 19:32:52 2006
From: gillian.walter at vexcel.com (Gillian Walter)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problem with gdalnumeric.SaveArray
Message-ID: <441F49B4.8050109@vexcel.com>

Hi,

I have been running into a problem with gdalnumeric.SaveArray in the 
latest version of GDAL (using Fedora core 3 Linux, building GDAL from 
current CVS with Python 2.3.5 and Numeric 23.0) and I'm wondering if 
there's some sort of referencing issue.  If I enter the following 
commands in the Python shell, I get a core dump:

import Numeric
import gdalnumeric
arr=Numeric.array([[5.3,1,2],[6,7,8]]).astype(Numeric.Float32)
arr # print array
gdalnumeric.SaveArray(arr,'/home/gwalter/junk.tif')
arr # try to print array again- Segfaults instead of printing


But, if I separate the SaveArray out into its component commands:

import Numeric
import gdalnumeric
import gdal
dr = gdal.GetDriverByName("GTiff")
arr=Numeric.array([[5.3,1,2],[6,7,8]]).astype(Numeric.Float32)
arr # print array
ds=gdalnumeric.OpenArray(arr)
dr.CreateCopy('/home/gwalter/junk2.tif',ds)
arr # try to print array again

the print works fine.  I am wondering about referencing problems because 
  replacing:

ds=gdalnumeric.OpenArray(arr)
dr.CreateCopy('/home/gwalter/junk2.tif',ds)

with

dr.CreateCopy('/home/gwalter/junk2.tif',OpenArray(arr))

causes a segfault at the next array print.  Also, if you don't replace 
the two calls with one, but delete ds, the next array print will segfault.

I did not have this problem in an older version of gdal; I'm not sure 
when it crept in (I've been largely using a pre-PAM version of gdal). 
Is anyone else able to reproduce this problem?


Gillian



From c.negriarnoldi at mondogis.net  Tue Mar 21 07:43:16 2006
From: c.negriarnoldi at mondogis.net (Cristina Negri Arnoldi)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problem about black frame around a raster ...
Message-ID: <003901c64ce5$069a8710$0b04a8c0@MONDOGIS.mondogis.net>

  Hello,

  I have a question about the GDALWarp usage:

  after the transfer of raster image (gray scale orthophoto) from one coordinate system to another (Gauss Boaga - UMT ED50) around the orthophoto it appears a black frame that remain and create visualization problems when I proceed with the mosaic of many orthophoto.

  How can I resolve this problem ? There is in GDALWarp a way (options) to render this black frame transparent during the process of coordinate system transformation ? And what is the write sintax ?

  Waiting for your answer ...

  Thank you !



  Cristina Negri Arnoldi 
  Area GIS
  e-mail: c.negriarnoldi@mondogis.net
  MondoGIS s.r.l.
  Via Edoardo D'Onofrio, 166
  00155 - Roma
  tel. +39  06 40801106 - fax +39  06 40801123
   
  il sito della rivista: www.mondogis.it
  il portale del GIS: www.geoesplora.net
  le banche dati: www.geodati.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060321/6d54892d/attachment.html
From richard.matsunaga at waypointinfo.com  Tue Mar 21 16:04:37 2006
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problem creating MapInfo tab files using C# (via the C
	API)
Message-ID: <002601c64d2b$104aae20$6c01a8c0@Maddog>

Hi all,
 
I've been building a C# wrapper for OGR (following on the good work on a
GDAL wrapper by Sy Perkins) and am very new to OGR development.
 
Everything was going swimmingly until I tried to write to a MapInfo tab
file. Basically, I am trying to write multiple layers, each with some number
of polygon objects. All my fields are being written correctly. But for some
reason, only the 2nd layer that I create is good. If I create only one
layer, it is corrupt. All layers other than the 2nd layer are corrupt.
 
How do I define corrupt? The files open in MapInfo, but the polygons have
invalid coordinates and certain actions within MapInfo cause crashes (such
as Export). The fields are all correct. If you check the projection in table
maintenance, MapInfo cannot find the projection for all layers except the
2nd.
 
After beating my head against the wall for a day or so, I started to explore
other data source types. ESRI shape files open correctly in MapInfo. I then
noticed that the MapInfo driver can be used to create MID/MIF files instead
of tab files. Using this option gave me correct results once imported into
MapInfo.
 
Is there anything that I could be doing wrong to cause this type of
behaviour? If not, then there must be something wrong with the C API, since
the exact same program was built using C++ and it was able to create MapInfo
tab files correctly.
 
I have noticed some strange behaviour with the Spatial Reference methods. If
I create a single Spatial Reference object (handle in the C API) and use it
to create all the layers in the same program as above, none of the layers
are valid. If I create a new Spatial Reference object for each new layer, I
get the above behaviour (where only the 2nd layer is valid). Since the OSR
methods in the C API are not properly documented that I could find, are
there any known issues with this area that might be causing these problems?
 
Thanks,
Richard
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060321/13031402/attachment.html
From richard.matsunaga at waypointinfo.com  Tue Mar 21 16:08:10 2006
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problem creating MapInfo tab files using C# (via the C
	API)
Message-ID: <002b01c64d2b$8f38bab0$6c01a8c0@Maddog>

Hi all,
 
I've been building a C# wrapper for OGR (following on the good work on a
GDAL wrapper by Sy Perkins) and am very new to OGR development.
 
Everything was going swimmingly until I tried to write to a MapInfo tab
file. Basically, I am trying to write multiple layers, each with some number
of polygon objects. All my fields are being written correctly. But for some
reason, only the 2nd layer that I create is good. If I create only one
layer, it is corrupt. All layers other than the 2nd layer are corrupt.
 
How do I define corrupt? The files open in MapInfo, but the polygons have
invalid coordinates and certain actions within MapInfo cause crashes (such
as Export). The fields are all correct. If you check the projection in table
maintenance, MapInfo cannot find the projection for all layers except the
2nd.
 
After beating my head against the wall for a day or so, I started to explore
other data source types. ESRI shape files open correctly in MapInfo. I then
noticed that the MapInfo driver can be used to create MID/MIF files instead
of tab files. Using this option gave me correct results once imported into
MapInfo.
 
Is there anything that I could be doing wrong to cause this type of
behaviour? If not, then there must be something wrong with the C API, since
the exact same program was built using C++ and it was able to create MapInfo
tab files correctly.
 
I have noticed some strange behaviour with the Spatial Reference methods. If
I create a single Spatial Reference object (handle in the C API) and use it
to create all the layers in the same program as above, none of the layers
are valid. If I create a new Spatial Reference object for each new layer, I
get the above behaviour (where only the 2nd layer is valid). Since the OSR
methods in the C API are not properly documented that I could find, are
there any known issues with this area that might be causing these problems?
 
Thanks,
Richard
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060321/f6ad705c/attachment.html
From warmerdam at pobox.com  Tue Mar 21 17:41:20 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problem creating MapInfo tab files using C# (via the
	C	API)
In-Reply-To: <002601c64d2b$104aae20$6c01a8c0@Maddog>
References: <002601c64d2b$104aae20$6c01a8c0@Maddog>
Message-ID: <44208110.8080704@pobox.com>

Richard Matsunaga wrote:
> Hi all,
>  
> I've been building a C# wrapper for OGR (following on the good work on a 
> GDAL wrapper by Sy Perkins) and am very new to OGR development.
>  
> Everything was going swimmingly until I tried to write to a MapInfo tab 
> file. Basically, I am trying to write multiple layers, each with some 
> number of polygon objects. All my fields are being written correctly. 
> But for some reason, only the 2nd layer that I create is good. If I 
> create only one layer, it is corrupt. All layers other than the 2nd 
> layer are corrupt.
>  
> How do I define corrupt? The files open in MapInfo, but the polygons 
> have invalid coordinates and certain actions within MapInfo cause 
> crashes (such as Export). The fields are all correct. If you check the 
> projection in table maintenance, MapInfo cannot find the projection for 
> all layers except the 2nd.

Richard,

This might be worth taking up on the mitab list - this issue sounds vaguely
familiar.  I wonder if it might already have been fixed. Are you using
GDAL CVS?

If you can boil down a small C program that demonstrates the problem that
would be helpful.  I don't have any mapinfo software myself though, so it
is hard for me to test files that cause it problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From amills at frogtech.com.au  Tue Mar 21 19:51:07 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] RE: Any tips for VB .NET?
In-Reply-To: <F351B61A81F4F54F92740EA8B510C2B103BE2065@ESGDASMA5VX0014.ib.gedas.vwg>
References: <3506881.post@talk.nabble.com>
	<f3b73b7d0603210126j3d12c77ch@mail.gmail.com>
	<F351B61A81F4F54F92740EA8B510C2B103BE2065@ESGDASMA5VX0014.ib.gedas.vwg>
Message-ID: <3524371.post@talk.nabble.com>


 Thanks, this comes very close to solving my problem. I basically just want
to extract the data from a Raster for the time being. At the end of my
message is the code I've written in VB .NET. It all works ok up to the
GDALRasterIO part. At that point everything falls apart. I'm not sure what
kind of variable to send in for the data or how to initialise it. I'm not
100% proficient in .NET so I'm not sure if I'm overlooking something
obvious. When it fails it tells me : "Object reference not set to an
instance of an object." so I'm guessing I'm not initialising the data
variable correctly or something.  Any ideas?




Imports System.IO
Imports System.Runtime.InteropServices

Module mainModule
    Sub main()
        Dim tool As New ExtractRaster
        tool.RunExtract()
        ' tool.Convert()
    End Sub
End Module
Public Class ExtractRaster
    Declare Function SetWindowLong Lib "USER32.DLL" Alias "SetWindowLongA"
(ByVal hwnd As Integer, ByVal attr As Integer, ByVal lVal As Integer) As
Integer
    '  Declare Function GDALOpen Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Function GDALGetRasterBand Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Sub GDALAllRegister Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" Alias "GDALGetRasterBand" ()
    '  Declare Function GDALGetRasterXSize Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Function GDALGetRasterYSize Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    ' Declare Function GDALReadRaster Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    <DllImport("gdal_fw.dll", EntryPoint:="CPLGetLastErrorMsg")> _
          Private Shared Function CPLGetLastErrorMsgExt() As IntPtr
    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALOpen(<MarshalAs(UnmanagedType.LPStr)> ByVal
pszFilename As String, ByVal eAccess As Integer) As IntPtr
    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterXSize(ByVal hDataset As IntPtr) As
Integer

    End Function
    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterYSize(ByVal hDataset As IntPtr) As
Integer

    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Sub GDALAllRegister()

    End Sub
    <DllImport("gdal_fw.dll")> _
    Friend Shared Sub GDALClose(ByVal hDriver As IntPtr)

    End Sub

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterBand(ByVal hDataset As IntPtr, ByVal
index As Integer) As IntPtr

    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALRasterIO(ByVal hBand As IntPtr, ByVal _
    flag As Integer, ByVal xOff As Integer, ByVal yOff As Integer, ByVal
xSize As _
    Integer, ByVal ySize As Integer, ByVal data As IntPtr, ByVal bufXSize As
_
    Integer, ByVal bufYSize As Integer, ByVal type As Integer, ByVal _
    pixelStride As Integer, ByVal lineStride As Integer) As IntPtr

    End Function

    ' Fields
    Private Const gdalDll As String = "gdal_fw.dll"

    Public Sub RunExtract()
        Try
            
            GDALAllRegister()
            Dim raster As IntPtr = GDALOpen("c:\FrogTech\seabed_g.img", 0)
            Dim rasBand As IntPtr = GDALGetRasterBand(raster, 1)
            Dim xSize As Integer = GDALGetRasterXSize(raster)
            Dim ySize As Integer = GDALGetRasterYSize(raster)
            MsgBox(xSize & "  " & ySize)
            ' Dim rBand As String = GDALReadRaster(rasBand, 0, 0, xSize,
ySize, xSize, ySize, 6)
            Dim rasData As String = New String(" "c, xSize & ySize) 'IntPtr
' 
            Dim errResult As IntPtr = GDALRasterIO(rasBand, 0, 0, 0, xSize,
ySize, New IntPtr(rasData.GetHashCode), xSize, ySize, 6, 0, 0)
            ' MsgBox(rBand)
            GDALClose(raster)
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try


    End Sub
End Class
--
View this message in context: http://www.nabble.com/Any-tips-for-VB-.NET--t1315468.html#a3524371
Sent from the GDAL - Dev forum at Nabble.com.


From amills at frogtech.com.au  Tue Mar 21 19:51:07 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] RE: Any tips for VB .NET?
In-Reply-To: <F351B61A81F4F54F92740EA8B510C2B103BE2065@ESGDASMA5VX0014.ib.gedas.vwg>
References: <3506881.post@talk.nabble.com>
	<f3b73b7d0603210126j3d12c77ch@mail.gmail.com>
	<F351B61A81F4F54F92740EA8B510C2B103BE2065@ESGDASMA5VX0014.ib.gedas.vwg>
Message-ID: <3524371.post@talk.nabble.com>


 Thanks, this comes very close to solving my problem. I basically just want
to extract the data from a Raster for the time being. At the end of my
message is the code I've written in VB .NET. It all works ok up to the
GDALRasterIO part. At that point everything falls apart. I'm not sure what
kind of variable to send in for the data or how to initialise it. I'm not
100% proficient in .NET so I'm not sure if I'm overlooking something
obvious. When it fails it tells me : "Object reference not set to an
instance of an object." so I'm guessing I'm not initialising the data
variable correctly or something. I'm not sure if I declared the function
correctly though since it returned the CPLERR type. I've changed all the
HandleRef types to IntPtr as well Any ideas?




Imports System.IO
Imports System.Runtime.InteropServices

Module mainModule
    Sub main()
        Dim tool As New ExtractRaster
        tool.RunExtract()
        ' tool.Convert()
    End Sub
End Module
Public Class ExtractRaster
    Declare Function SetWindowLong Lib "USER32.DLL" Alias "SetWindowLongA"
(ByVal hwnd As Integer, ByVal attr As Integer, ByVal lVal As Integer) As
Integer
    '  Declare Function GDALOpen Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Function GDALGetRasterBand Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Sub GDALAllRegister Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" Alias "GDALGetRasterBand" ()
    '  Declare Function GDALGetRasterXSize Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Function GDALGetRasterYSize Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    ' Declare Function GDALReadRaster Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    <DllImport("gdal_fw.dll", EntryPoint:="CPLGetLastErrorMsg")> _
          Private Shared Function CPLGetLastErrorMsgExt() As IntPtr
    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALOpen(<MarshalAs(UnmanagedType.LPStr)> ByVal
pszFilename As String, ByVal eAccess As Integer) As IntPtr
    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterXSize(ByVal hDataset As IntPtr) As
Integer

    End Function
    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterYSize(ByVal hDataset As IntPtr) As
Integer

    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Sub GDALAllRegister()

    End Sub
    <DllImport("gdal_fw.dll")> _
    Friend Shared Sub GDALClose(ByVal hDriver As IntPtr)

    End Sub

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterBand(ByVal hDataset As IntPtr, ByVal
index As Integer) As IntPtr

    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALRasterIO(ByVal hBand As IntPtr, ByVal _
    flag As Integer, ByVal xOff As Integer, ByVal yOff As Integer, ByVal
xSize As _
    Integer, ByVal ySize As Integer, ByVal data As IntPtr, ByVal bufXSize As
_
    Integer, ByVal bufYSize As Integer, ByVal type As Integer, ByVal _
    pixelStride As Integer, ByVal lineStride As Integer) As IntPtr

    End Function

    ' Fields
    Private Const gdalDll As String = "gdal_fw.dll"

    Public Sub RunExtract()
        Try
            
            GDALAllRegister()
            Dim raster As IntPtr = GDALOpen("c:\FrogTech\seabed_g.img", 0)
            Dim rasBand As IntPtr = GDALGetRasterBand(raster, 1)
            Dim xSize As Integer = GDALGetRasterXSize(raster)
            Dim ySize As Integer = GDALGetRasterYSize(raster)
            MsgBox(xSize & "  " & ySize)
            ' Dim rBand As String = GDALReadRaster(rasBand, 0, 0, xSize,
ySize, xSize, ySize, 6)
            Dim rasData As String = New String(" "c, xSize & ySize) 'IntPtr
' 
            Dim errResult As IntPtr = GDALRasterIO(rasBand, 0, 0, 0, xSize,
ySize, New IntPtr(rasData.GetHashCode), xSize, ySize, 6, 0, 0)
            ' MsgBox(rBand)
            GDALClose(raster)
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try


    End Sub
End Class
--
View this message in context: http://www.nabble.com/Any-tips-for-VB-.NET--t1315468.html#a3524371
Sent from the GDAL - Dev forum at Nabble.com.


From warmerdam at pobox.com  Tue Mar 21 21:10:22 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] format plugins
In-Reply-To: <3ABF1C13-A0F2-4B5D-83C2-C00B8DDDA57D@kyngchaos.com>
References: <3ABF1C13-A0F2-4B5D-83C2-C00B8DDDA57D@kyngchaos.com>
Message-ID: <4420B20E.9070405@pobox.com>

William Kyngesburye wrote:
> How simple is it to build formats as GDAL plugins instead of embedded in 
> the main library? (like the GRASS plugin)
> 
> I would like to build some of the existing problematic formats as 
> plugins, so they are more easily added to a binary distribution.  This 
> would inlcude formats with restrictive licenses like MrSID, and others 
> with problematic support on different versions of an OS (ie MrSID, DODS, 
> ECW, other C++-based on Mac OS X Panther vs Tiger).
> 
> I don't need all the gorey details of the driver API and implementing 
> it, since the formats exist, I just need the configure/make part.

William,

There is no configure or makefile support for building any GDAL drivers
as plugins except for the GRASS driver.  But basically, you just compile
the local driver code and link it against libgdal.so (or libgdal.dylib)
and produce a shared library with a particular name.  For instance, for
the ECW driver the file would be called gdal_ECW.so (or gdal_ECW.dylib)
and it would need to be installed in $prefix/lib/gdalplugins.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From emiliomayorga at gmail.com  Wed Mar 22 01:04:52 2006
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] using ogr2ogr to create pt shp file from dbf w/ lat-lon
	fields
Message-ID: <b0d146420603212204p521acf57ua4476e3908af41d4@mail.gmail.com>

I have a polygon shape file that has lat & lon fields for the centroid
(the polygons are simple rectangles). I'd like to write a simple batch
process to read those lat-lon fields and create a point shape file
that also includes all the other attributes. I'd like to keep this as
simple as possible, so I figured I could use ogr2ogr.

It sounds like I need to set up a Virtual Spatial Data file. The
"Virtual Spatial Data (ODBC/OVF)" MapServer document says that I could
use an ODBC connection after setting up a DSN. I have unixODBC
installed on a RedHat server, but I don't see a dbf/dbase driver, and
I can't find one either in the unixODBC home page.

Alternatively, I could try to export the dbf to a text file (say,
csv), using something like the dbflist utility (part of the dbf2info
utilities; I've never used them, but I assume I can set them up!). The
MapServer document seems to imply that I could then set up an OVF to
link directly to flat text files without an ODBC DSN, but I can't find
any examples; I only see ODBC examples.

Any advice on what's the easiest approach to accomplish this? Thanks!

-Emilio Mayorga


From vdharan2001 at gmail.com  Tue Mar 21 15:09:59 2006
From: vdharan2001 at gmail.com (Vidhiyadharan Nadarajah)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGR:GetNextFeature() throws exception in WINXP
In-Reply-To: <44202256.5020600@loskot.net>
Message-ID: <FJEAJLIJBMFCHFKGDAGKGEBJCBAA.vdharan2001@gmail.com>


Mateusz ?oskot wrote:
>I think I've found the problem.
>Your code also gave me exceptions and your program crashed.
>I tested with GDAL 1.3.0, compiled using VC++ 2005.

>Simply, you've used OGR API incorrectly.
>So, here is working version with my fixes, please read big comments
>marked with my nickname "mloskot".

Thanks a lot for the bug fix. I have tested with the changes that you have
mentioned and it is working fine in both WIN2k & XP.

Best Regards,
N.Vidhiyadharan



--
Internal Virus Database is out-of-date.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.15.12/266 - Release Date: 21/02/2006


From michael.paul at tao.es  Wed Mar 22 02:54:58 2006
From: michael.paul at tao.es (Paul, Michael)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] RE: Any tips for VB .NET?
Message-ID: <F351B61A81F4F54F92740EA8B510C2B103C0B4FD@ESGDASMA5VX0014.ib.gedas.vwg>

Hi,

I only managed to get this GDALRasterIO to function with types Byte and
Float32. You have passed a data type 6 to this function, which is equivalent
to GDalDataType.Float32 (see http://gdal.maptools.org/gdal_8h.html). But
your code is passing a string, this shouldn't work it think. 
You may do something like this:

Public Sub RunExtract()
        Try
            
            GDALAllRegister()
            Dim raster As IntPtr = GDALOpen("c:\FrogTech\seabed_g.img", 0)
		If (raster = IntPtr.Zero) Then ' throw exception or similar
            Dim rasBand As IntPtr = GDALGetRasterBand(raster, 1)
		If (rasBand = IntPtr.Zero) Then ' throw exception or similar
            Dim xSize As Integer = GDALGetRasterXSize(raster)
            Dim ySize As Integer = GDALGetRasterYSize(raster)
            MsgBox(xSize & "  " & ySize)
            ' allocate some memory and get its address
		Dim dataPointer As IntPtr =   Marshal.AllocHGlobal(xSize *
ySize) 
            Dim errResult As IntPtr = GDALRasterIO(rasBand, 0, 0, 0, xSize,
ySize, New IntPtr(rasData.GetHashCode), xSize, ySize, 1, 0, 0)
		' use Marshal.ReadByte(dataPointer, offset) to read data
		Marshal.FreeHGlobal(dataPointer)
            ' MsgBox(rBand)
            GDALClose(raster)
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try


    End Sub


Hope this helps.

Regards,
 
Michael.


-----Mensaje original-----
De: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] En nombre de Holywhippet
Enviado el: mi?rcoles, 22 de marzo de 2006 1:51
Para: gdal-dev@lists.maptools.org
Asunto: [Gdal-dev] RE: Any tips for VB .NET?


 Thanks, this comes very close to solving my problem. I basically just want
to extract the data from a Raster for the time being. At the end of my
message is the code I've written in VB .NET. It all works ok up to the
GDALRasterIO part. At that point everything falls apart. I'm not sure what
kind of variable to send in for the data or how to initialise it. I'm not
100% proficient in .NET so I'm not sure if I'm overlooking something
obvious. When it fails it tells me : "Object reference not set to an
instance of an object." so I'm guessing I'm not initialising the data
variable correctly or something.  Any ideas?




Imports System.IO
Imports System.Runtime.InteropServices

Module mainModule
    Sub main()
        Dim tool As New ExtractRaster
        tool.RunExtract()
        ' tool.Convert()
    End Sub
End Module
Public Class ExtractRaster
    Declare Function SetWindowLong Lib "USER32.DLL" Alias "SetWindowLongA"
(ByVal hwnd As Integer, ByVal attr As Integer, ByVal lVal As Integer) As
Integer
    '  Declare Function GDALOpen Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Function GDALGetRasterBand Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Sub GDALAllRegister Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" Alias "GDALGetRasterBand" ()
    '  Declare Function GDALGetRasterXSize Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    '  Declare Function GDALGetRasterYSize Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    ' Declare Function GDALReadRaster Lib "C:\Program
Files\FWTools1.0.0a7\bin\gdal_fw.dll" ()
    <DllImport("gdal_fw.dll", EntryPoint:="CPLGetLastErrorMsg")> _
          Private Shared Function CPLGetLastErrorMsgExt() As IntPtr
    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALOpen(<MarshalAs(UnmanagedType.LPStr)> ByVal
pszFilename As String, ByVal eAccess As Integer) As IntPtr
    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterXSize(ByVal hDataset As IntPtr) As
Integer

    End Function
    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterYSize(ByVal hDataset As IntPtr) As
Integer

    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Sub GDALAllRegister()

    End Sub
    <DllImport("gdal_fw.dll")> _
    Friend Shared Sub GDALClose(ByVal hDriver As IntPtr)

    End Sub

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALGetRasterBand(ByVal hDataset As IntPtr, ByVal
index As Integer) As IntPtr

    End Function

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALRasterIO(ByVal hBand As IntPtr, ByVal _
    flag As Integer, ByVal xOff As Integer, ByVal yOff As Integer, ByVal
xSize As _
    Integer, ByVal ySize As Integer, ByVal data As IntPtr, ByVal bufXSize As
_
    Integer, ByVal bufYSize As Integer, ByVal type As Integer, ByVal _
    pixelStride As Integer, ByVal lineStride As Integer) As IntPtr

    End Function

    ' Fields
    Private Const gdalDll As String = "gdal_fw.dll"

    Public Sub RunExtract()
        Try
            
            GDALAllRegister()
            Dim raster As IntPtr = GDALOpen("c:\FrogTech\seabed_g.img", 0)
            Dim rasBand As IntPtr = GDALGetRasterBand(raster, 1)
            Dim xSize As Integer = GDALGetRasterXSize(raster)
            Dim ySize As Integer = GDALGetRasterYSize(raster)
            MsgBox(xSize & "  " & ySize)
            ' Dim rBand As String = GDALReadRaster(rasBand, 0, 0, xSize,
ySize, xSize, ySize, 6)
            Dim rasData As String = New String(" "c, xSize & ySize) 'IntPtr
' 
            Dim errResult As IntPtr = GDALRasterIO(rasBand, 0, 0, 0, xSize,
ySize, New IntPtr(rasData.GetHashCode), xSize, ySize, 6, 0, 0)
            ' MsgBox(rBand)
            GDALClose(raster)
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try


    End Sub
End Class
--
View this message in context:
http://www.nabble.com/Any-tips-for-VB-.NET--t1315468.html#a3524371
Sent from the GDAL - Dev forum at Nabble.com.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From Jeroen.Ticheler at fao.org  Wed Mar 22 03:45:13 2006
From: Jeroen.Ticheler at fao.org (Jeroen Ticheler)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Mac OS X installers Panther vs Tiger
In-Reply-To: <B3820FC3-CEB3-409A-B987-03C51C674D75@kyngchaos.com>
References: <B3820FC3-CEB3-409A-B987-03C51C674D75@kyngchaos.com>
Message-ID: <228BFBD2-1379-414B-B106-405E923EDF54@fao.org>

Hi William and others!
First of all, we really appreciate your work on providing binaries  
VERY much!! Being the source of the uproar :-( I feel I need to make  
a small note on the poll as it stands. I see that the majority would  
like to see Tiger only binaries. I would like to see a second poll,  
or feedback on who is running XServe with Panther or Tiger? Or are  
most of us running MapServer on desktop/laptop macs? We run the  
binaries on an XServe with Panther, and the last thing I would like  
to go through at this stage is to upgrade the OS to Tiger just  
because of this. The server runs smoothly ever since we have it and  
its a kind of a nightmare for me to have to upgrade or start  
compiling the stuff myself :-( (I run Tiger on my PowerBook).
I hope a Panther run/Tiger dev can be a reasonable compromise!?
Ciao,
Jeroen

On Mar 21, 2006, at 12:17 AM, William Kyngesburye wrote:

> Sorry for the cross-post.
>
> I'm working on some ideas on simplifying my Mac OS X installers.   
> Currently I make the Panther and Tiger versions as separate  
> binaries on separate Macs.  This provides full developer usability  
> on both systems for other software to use (qgis, grass, ...) but is  
> quite a chore to maintain.
>
> I have a poll on my site for options I'm looking at - varying  
> degrees of Panther support and simplicity for me.  Current Mac  
> users (users and developers) of my installers, and would-be users,  
> please give a vote on where I should go with this.
>
> <http://www.kyngchaos.com/>
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
>
> Theory of the Universe
>
> There is a theory which states that if ever anyone discovers  
> exactly what the universe is for and why it is here, it will  
> instantly disappear and be replaced by something even more  
> bizarrely inexplicable.  There is another theory which states that  
> this has already happened.
>
> -Hitchhiker's Guide to the Galaxy 2nd season intro
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From radim.blazek at gmail.com  Wed Mar 22 07:08:43 2006
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] OGRShapeDriver::CreateDataSource
Message-ID: <340505ef0603220408j32bb4693m2021ef1abead031d@mail.gmail.com>

OGRShapeDriver::CreateDataSource tests first if the
given datasource exists and if it is a directory and then
if it has shp/dbf extension.
It fails if a datasource name has shp extension (file)
and the file already exists.
I think that the test order should be reverted,
first check extension and then according to result test file or dir.

Does a solution exist to overwrite existing file specified as DSN
with current version of OGR?

Radim


From RMcCulley at county24.com  Wed Mar 22 11:58:39 2006
From: RMcCulley at county24.com (Rob McCulley)
Date: Wed Nov 21 11:50:03 2007
Subject: FW: [Gdal-dev] OGRGeometry::Contains speed issue
Message-ID: <1E095D48112D90428817CB417AECDB620829A3@vermilion.county24.local>

After more than a month, I finally managed to get back to this script.  I thought I would give you all a recap.

I couldn't use the bounding boxes as an initial step because the bounding box of the AOI is the same as the whole area.

>From my testing, I determined that there is very little penalty from the centroid operation.  I did all of my initial testing on one of the 76 initial shapefiles to make the times a little more reasonable.  The one file ran for 22.4 minutes with the centroid operation in place.  When I removed the centroid operation, it ran for 21.3 minutes.  Not much of penalty.  If I removed the contains operation from the script, the one file ran for about 25 seconds.

The problem was with the complexity of the AOI shapefile itself.  It was a very detailed polygon, with four donut holes (also complex) in it.  What I did was create a generalized polygon within the AOI, which caught about 80% of the polygons within the AOI, then I created I generalized polygon outside of the AOI which eliminated about 80% of the polygons outside of the AOI.  For both of these I ignored the donut holes.  Any of the polygons not figured on the first two passes were then compared against the actual AOI boundary, again with the donut holes removed.  After it was all done, any polygons that were within the AOI were compared to polygons representing the donut holes.  When I ran this on the one file for testing, it took about 40 seconds.  Much better than 20 minutes.

All in all, it works pretty well.  The script now completes on all 76 shapefiles in about 45 minutes instead of 17 hours.

The lesson here is that the complexity of the polygon in the contains operation is very important to the speed of the operation.

Thanks for the help Frank and Sean.  I've now added a couple of more steps to the script, and now in one step and about an hour of processing time, I can perform what use to take the better part of a day for me.

Rob McCulley


-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com]On Behalf Of
Frank Warmerdam
Sent: Wednesday, February 08, 2006 2:07 PM
To: Rob McCulley
Cc: Gdal (E-mail)
Subject: Re: [Gdal-dev] OGRGeometry::Contains speed issue


On 2/8/06, Rob McCulley <RMcCulley@county24.com> wrote:
> Hi all,
>
> I've got a python script that runs through a bunch of shapefiles, performs an OGRGeometry::Transform on them, adds a couple of attributes, and merges them all into one final shapefile.  All told it opens 76 shapefiles containing a total of ~18,000 polygons.  It performs this in about 10 minutes.
>
> My area of interest is an irregular area which contains ~16,000 of the polygons. I added in a couple of lines to the script to check if the polygon was in the aoi, and set an attribute accordingly:
>
> point = newGeom.Centroid()
> aoiTest = aoiGeom.Contains(point)
> if aoiTest == 1:
>         aoiVal = 1
> else:
>         aoiVal = 0
>
> There shouldn't ever be a situation where a polygon will cross the aoi boundary, but I use a centroid for the Contains, just in case it isn't perfect.
>
> The problem I'm having is this makes things a lot slower.  The first run through after adding those lines of code was ~17 hours (At the end the script outputs the run time in seconds).  For my purposes, 17 hours is too long.  I know that the aoi polygon is quite complex (~4000 vertices), and that probably slows things down a bit, but that much?  Am I missing something, or is there a better way of doing this?

Rob,

It might be nice to determine if the it is the Contains
operation, or the Centroid which is expensive. I suspect
it is the contains, but I'm not sure.

It might make sense to setup a much similar, but slightly
smaller AOI and first do the contains test against that.
Then do the test against the whole AOI if the item isn't
trivially contained in the simplified AOI.  That should reduce
the cost of the Contains operation alot.

But we you really need to do is preserve the spatial index
thingy that GEOS computes internally for the AOI from
test to test.  There is no way to do that through OGR.
In fact, I don't know how to do it directly with GEOS either
but I gather it is possible with some degree of fiddling.

Various other hacky solutions which roughly boil down to
maintaining your own course spatial index could also be
applied but will substantially complicate your script.

Modulo this particular issue, I am pleased that ogr and python
was useful for this fairly interesting application.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Wed Mar 22 12:59:59 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
In-Reply-To: <5290E77B1FE2FE40B82AA54158825F0601F2C909@hqosex01.fao.org>
References: <5290E77B1FE2FE40B82AA54158825F0601F2C909@hqosex01.fao.org>
Message-ID: <0586B5D5-182F-4982-88D5-571CEE3447C7@kyngchaos.com>

Poking around some more today.

- Wrong "StripByteCounts" - looks like that comes from a new  
validation check in libtiff 3.8.0 (you should not get this warning in  
3.7.4).  So, that spot tif may really be corrupt.  The SPOT tif you  
made available, was that converted with the previous version of GIS  
Libs when it seemed to work?

I converted the HDF with the new versions (libtiff 3.8.1/GDAL 1.3.1)  
and gdaladdo did not give these warnings.  In fact, I didn't get any  
block errors either.  At least, up to level 32 overview.  As soon as  
I add level 64, I get StripByteCounts warnings AND block errors, and  
it's right away, BTW, not when it gets to the point of doing lvl 64.

When I add the average resampling, the StripByteCounts warnings  
always come up and the block errors start at lvl 8.  But the block  
errors only display when it gets to processing that level.  Just like  
my previous tests with the old SPOT tiff.


Still clueless why the LZW compression is causing bus errors and seg  
faults in some cases.


Any ideas yet, Frank?

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From dmorissette at mapgears.com  Wed Mar 22 13:01:02 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problem creating MapInfo tab files using C# (via the
	C	API)
In-Reply-To: <44208110.8080704@pobox.com>
References: <002601c64d2b$104aae20$6c01a8c0@Maddog>
	<44208110.8080704@pobox.com>
Message-ID: <442190DE.4040007@mapgears.com>

Frank Warmerdam wrote:
> 
> This might be worth taking up on the mitab list - this issue sounds vaguely
> familiar.  I wonder if it might already have been fixed. Are you using
> GDAL CVS?
> 

Frank,

Are you thinking of the problem with the #ifdef MITAB_AFFINE_PARAMS in 
MITAB that causes unreadable files?
http://bugzilla.maptools.org/show_bug.cgi?id=1319

Richard: perhaps you could try recompiling GDAL after adding 
-DMITAB_AFFINE_PARAMS to the CPPFLAGS variable in GDALmake.opt and let 
us know if that solves the issue.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From John.C.Cartwright at noaa.gov  Wed Mar 22 13:36:39 2006
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] raster query
Message-ID: <44219937.1010606@noaa.gov>

Hello All,

does anyone know of a existing gdal tool for querying a raster?  I'd 
like to get the raster value from a file for a given coordinate.

Thanks!

-- john

From dpinte at itae.be  Wed Mar 22 15:46:52 2006
From: dpinte at itae.be (Didrik Pinte)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] raster query
In-Reply-To: <44219937.1010606@noaa.gov>
References: <44219937.1010606@noaa.gov>
Message-ID: <1143060413.7715.10.camel@geru-itae>

Le mercredi 22 mars 2006 ? 11:36 -0700, John Cartwright a ?crit :
> Hello All,
> 
> does anyone know of a existing gdal tool for querying a raster?  I'd 
> like to get the raster value from a file for a given coordinate.
> 
> Thanks!
> 
> -- john

Hi John,

Have a look at this :
http://www.remotesensing.org/gdal/classGDALRasterBand.html and
especially the ReadRasterIO.

This is useful : http://www.remotesensing.org/gdal/gdal_tutorial.html
(Read raster data part)

--
Didrik
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 191 bytes
Desc: Ceci est une partie de message
	=?ISO-8859-1?Q?num=E9riquement?= =?ISO-8859-1?Q?_sign=E9e?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060322/7ee31d1f/attachment.bin
From bryan at geomega.com  Wed Mar 22 15:44:25 2006
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] raster query
In-Reply-To: <44219937.1010606@noaa.gov>
References: <44219937.1010606@noaa.gov>
Message-ID: <4421B729.3060208@geomega.com>

John,

I'm attaching a Python routine that queries a given band of a gdal 
raster at a given x and y and returns the interpolated value.  You'll 
have to modify it a bit if you want the value of the raster without 
interpolation.

I just updated it to work with rasters that have different cell size in 
i and j.  Hope it works and helps.

Bryan

Bryan Keith
GIS Specialist
Geomega, Inc.
Boulder, CO, USA

John Cartwright wrote:
> Hello All,
>
> does anyone know of a existing gdal tool for querying a raster?  I'd 
> like to get the raster value from a file for a given coordinate.
>
> Thanks!
>
> -- john
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
def PointValue(dataset, intBand, dblX, dblY):
  #this routine returns the cellvalue on the band at (dblX, dblY) using bilinear interpolation
  band = dataset.GetRasterBand(intBand)
  dblNDV = band.GetNoDataValue()
  lngXCount = band.XSize
  lngYCount = band.YSize
  geotransform = dataset.GetGeoTransform()
  dblXMin = geotransform[0]
  dblYMax = geotransform[3]
  dblCellSizeX = geotransform[1]
	dblCellSizeY = geotransform[5]
  dblXLoc = (dblX - dblXMin) / dblCellSizeX
  lngXLoc = int(dblXLoc)
  dblYLoc = (dblYMax - dblY) / dblCellSizeY
  lngYLoc = int(dblYLoc)
  if ((dblXLoc < 0.5) or (dblXLoc > lngXCount - 0.5) or (dblYLoc < 0.5) or \
    (dblYLoc > lngYCount - 0.5)):
    return dblNDV
  if ((dblXLoc - lngXLoc) < 0.5):
    lngXLoc = lngXLoc - 1
  if ((dblYLoc - lngYLoc) < 0.5):
    lngYLoc = lngYLoc - 1
  dblXPercent = ((dblXLoc - lngXLoc) + 0.5) - (int((dblXLoc - lngXLoc) + 0.5))
  dblYPercent = ((dblYLoc - lngYLoc) + 0.5) - (int((dblYLoc - lngYLoc) + 0.5))
  strRaster = band.ReadRaster(lngXLoc,lngYLoc,2,2,2,2,GDT_Float32)
  dblValue = struct.unpack('f' * 4,strRaster)
  if ((dblValue[0] == dblNDV) or (dblValue[1] == dblNDV) or (dblValue[2] == dblNDV) \
    or (dblValue[3] == dblNDV)):
    return dblNDV
  dblX1 = dblValue[0] + ((dblValue[1] - dblValue[0]) * dblXPercent)
  dblX2 = dblValue[2] + ((dblValue[3] - dblValue[2]) * dblXPercent)
  dblValue = ((dblX2 - dblX1) * dblYPercent) + dblX1
  #print dblX, dblY, dblValue
  return dblValue
From jgreenberg at arc.nasa.gov  Wed Mar 22 15:56:12 2006
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] raster query
In-Reply-To: <44219937.1010606@noaa.gov>
Message-ID: <200603222056.k2MKuqoE007809@duke.maptools.org>

Check out starspan: starspan.casil.ucdavis.edu

--j

--

Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Phone: 415-794-5043
AIM: jgrn3007
MSN: jgrn3007@hotmail.com

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of John Cartwright
Sent: Wednesday, March 22, 2006 10:37 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] raster query

Hello All,

does anyone know of a existing gdal tool for querying a raster?  I'd 
like to get the raster value from a file for a given coordinate.

Thanks!

-- john
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From julienfiore at gmail.com  Wed Mar 22 11:52:44 2006
From: julienfiore at gmail.com (Julien Fiore)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] CreateCopy does not copy the NoData value info
Message-ID: <442180df.0a09e558.7e02.1002@mx.gmail.com>


Dear gdal users,

I'm using Python and gdal to process raster data.
I open the input raster (an Arc/Info Binary Grid (.adf)) and use driver.CreateCopy to
create the output raster (a GeoTIFF). Everything works except that the resulting GeoTIFF
is not aware of the NoData value, which was specified in the input file. I tried to
specify it with the SetNoDataValue command but it does not change anything.

Do you know how to resolve this problem ? 
Any help would be very welcome.

Julien


From ILucena at clarku.edu  Wed Mar 22 17:15:49 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] One band Jpeg with color table
Message-ID: <6FD7C9DB26540B42A1207C69BF92D455C33748@Iris.ad.clarku.edu>

Hi There,

Maybe it's because I am new here, so my questions could be silly.

But f you have a single band byte image with color table and you want to
export to a jpeg color result, for visualization purpose only, you need
to create a RGB version of your image and then convert it to jpeg,
because jpeg single band are greyscale only
(http://www.gdal.org/frmt_jpeg.html).

How to do that in the GDAL C API?

Thanks in advance,

Ivan Lucena


From amills at frogtech.com.au  Wed Mar 22 20:04:03 2006
From: amills at frogtech.com.au (Holywhippet)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] RE: RE: Any tips for VB .NET?
In-Reply-To: <F351B61A81F4F54F92740EA8B510C2B103C0B4FD@ESGDASMA5VX0014.ib.gedas.vwg>
References: <3506881.post@talk.nabble.com>
	<f3b73b7d0603210126j3d12c77ch@mail.gmail.com>
	<F351B61A81F4F54F92740EA8B510C2B103BE2065@ESGDASMA5VX0014.ib.gedas.vwg>
	<3524371.post@talk.nabble.com>
	<F351B61A81F4F54F92740EA8B510C2B103C0B4FD@ESGDASMA5VX0014.ib.gedas.vwg>
Message-ID: <3544547.post@talk.nabble.com>


 Thanks again. I actually found a simpler way of making it work. If I declare
the function like this:

    <DllImport("gdal_fw.dll")> _
    Friend Shared Function GDALRasterIO(ByVal hBand As IntPtr, ByVal _
    flag As Integer, ByVal xOff As Integer, ByVal yOff As Integer, ByVal
xSize As _
    Integer, ByVal ySize As Integer, ByVal data As Single(), ByVal bufXSize
As _
    Integer, ByVal bufYSize As Integer, ByVal type As Integer, ByVal _
    pixelStride As Integer, ByVal lineStride As Integer) As IntPtr

    End Function

 And just pass in an array of singles for the data field it works ok.

 This might not work for rasters with a different pixel value type though
but it's a start. 

 Thanks again.
--
View this message in context: http://www.nabble.com/Any-tips-for-VB-.NET--t1315468.html#a3544547
Sent from the GDAL - Dev forum at Nabble.com.


From warmerdam at pobox.com  Wed Mar 22 21:29:36 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] One band Jpeg with color table
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D455C33748@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D455C33748@Iris.ad.clarku.edu>
Message-ID: <44220810.7000908@pobox.com>

Ivan Lucena wrote:
> Hi There,
> 
> Maybe it's because I am new here, so my questions could be silly.
> 
> But f you have a single band byte image with color table and you want to
> export to a jpeg color result, for visualization purpose only, you need
> to create a RGB version of your image and then convert it to jpeg,
> because jpeg single band are greyscale only
> (http://www.gdal.org/frmt_jpeg.html).
> 
> How to do that in the GDAL C API?

Ivan,

There is no built in support for this operation.  You basically need to do
it for yourself "in code" if you are using the library.  For commandline
purposes there is an existing pct2rgb.py script that can be used.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From rompenb at unbc.ca  Wed Mar 22 23:16:56 2006
From: rompenb at unbc.ca (rompenb@unbc.ca)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problems with PostGIS and Shapefile interface
Message-ID: <35716.142.207.92.118.1143087416.squirrel@webmail.unbc.ca>

Hi, I've been having major difficulties in programming with the OGR API.  
Currently I'm attempting to write a program that reads features from a
PostGIS database and writes them to an ESRI Shapefile.   The following
strange problems are occurring:

1) When I read a feature from the PostGIS database, both of the following
statements
   currentfeat->GetGeometryRef()->getGeometryType()
   loadlayer->GetLayerDefn()->GetGeomType()
return 0, or 'wkbUnknown', when according to currentfeat->DumpReadable()
all the features in the database table are multipolygons.

2)OGRGeometryFactory::forceToPolygon() isn't working.   According to the
following code,
   currentfeat->DumpReadable(dumpfile);
   destfeat->SetGeometryDirectly(
            OGRGeometryFactory::forceToPolygon(destfeat->StealGeometry()));
   destfeat->DumpReadable(dumpfile);
the geometry remains in multipolygon format.   destfeat previously had its
geometry created via OGRFeature::SetFrom().

3)When I re-read the shapefile following translation, using
OGRFeature::DumpReadable() again, the features appear as a mixture of
polygons and multipolygons.

If anyone has any suggestions, they would be greatly appreciated.

Thank you for your time.

Ben


From warmerdam at pobox.com  Wed Mar 22 23:56:46 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problems with PostGIS and Shapefile interface
In-Reply-To: <35716.142.207.92.118.1143087416.squirrel@webmail.unbc.ca>
References: <35716.142.207.92.118.1143087416.squirrel@webmail.unbc.ca>
Message-ID: <44222A8E.7060607@pobox.com>

rompenb@unbc.ca wrote:
> Hi, I've been having major difficulties in programming with the OGR API.  
> Currently I'm attempting to write a program that reads features from a
> PostGIS database and writes them to an ESRI Shapefile.   The following
> strange problems are occurring:
> 
> 1) When I read a feature from the PostGIS database, both of the following
> statements
>    currentfeat->GetGeometryRef()->getGeometryType()
>    loadlayer->GetLayerDefn()->GetGeomType()
> return 0, or 'wkbUnknown', when according to currentfeat->DumpReadable()
> all the features in the database table are multipolygons.

Ben,

It is common for GetLayerDefn()->GetGeomType() to return wkbUnknown.  It
just means the driver doesn't know for sure what geometry types will occur
in this layer.

I can't think of any circumstance under which getGeometryType() on a
geometry could return wkbUnknown.  If this is reproducable, there is
an issue that should be investigated.

> 2)OGRGeometryFactory::forceToPolygon() isn't working.   According to the
> following code,
>    currentfeat->DumpReadable(dumpfile);
>    destfeat->SetGeometryDirectly(
>             OGRGeometryFactory::forceToPolygon(destfeat->StealGeometry()));
>    destfeat->DumpReadable(dumpfile);
> the geometry remains in multipolygon format.   destfeat previously had its
> geometry created via OGRFeature::SetFrom().

Your approach looks fine.  I don't know why this is happening.  If you can
boil down an example please file a bug report on this issue.

> 3)When I re-read the shapefile following translation, using
> OGRFeature::DumpReadable() again, the features appear as a mixture of
> polygons and multipolygons.

The Shapefile does not store a distinction between polygons and
multipolygons.  Which is to be created is deduced by analysing the
geometric relationship of the rings.  This could easily result in
a multipolygon written to shapefiles coming back as a polygon.

It is also quite plausible that the shapefile reading code in OGR
may be mis-classifying some things as polygon vs. multipolygon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From richard at waypointinfo.com  Thu Mar 23 11:26:19 2006
From: richard at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Problem creating MapInfo tab files using C# (via the
	C	API)
In-Reply-To: <442190DE.4040007@mapgears.com>
Message-ID: <000901c64e96$841075d0$0202fea9@Maddog>

 
After hours of struggling to compile in Visual Studio 2005, I may have to go
back to VSC++ 6. Does anyone have updated instructions on how to get GDAL
building in the latest Visual Studio?

I continue to experience odd behaviour when using the MapInfo driver. On the
suggestion of a list member, I ran ogrinfo on two of my layers - a working
one and a corrupt one. There was nothing amiss according to ogrinfo. All
features are contained within the extents and there are no other differences
reported (I assume the -al switch is the most detailed version of the
outputs?).

Now when I try to create the MapInfo datasource, I get a .NET exception
indicating memory corruption. If I try to open it again (immediately in the
next line of code), it will work. This only happens with the MapInfo driver,
although I haven't tried many drivers.

I also generated ESRI Shapefile outputs, then used ogr2ogr to convert to
MapInfo tab format. This is the strange part: the same MI files were corrupt
as when I directly write them from my code. There's obviously something in
there that MapInfo doesn't like.

I then tried ogr2ogr from ESRI Shapefiles generated by a C++ version of my
app and those were all correct.

Richard


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Daniel Morissette

Frank Warmerdam wrote:
> 
> This might be worth taking up on the mitab list - this issue sounds 
> vaguely familiar.  I wonder if it might already have been fixed. Are 
> you using GDAL CVS?
> 

Frank,

Are you thinking of the problem with the #ifdef MITAB_AFFINE_PARAMS in MITAB
that causes unreadable files?
http://bugzilla.maptools.org/show_bug.cgi?id=1319

Richard: perhaps you could try recompiling GDAL after adding
-DMITAB_AFFINE_PARAMS to the CPPFLAGS variable in GDALmake.opt and let us
know if that solves the issue.

Daniel
--
Daniel Morissette
http://www.mapgears.com/
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From rec at geodesign.com.br  Thu Mar 23 12:15:29 2006
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Printing JPEGs in Batch
Message-ID: <6.2.1.2.0.20060323141506.01cb33a0@mailhost.geodesign.com.br>

Hello List,

Does anybody know the location of a utility to batch print JPEG files?

Thanks in advance.

Reinaldo
rec@geodesign.com.br
www.geodesign.com.br

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060323/a77ea5bc/attachment.html
From pgao at esri.com  Thu Mar 23 12:15:13 2006
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Support for JPEG compressed NITF?
Message-ID: <54808B311D66EB4E9CF4647B0DE707C20309DE45@firewire.esri.com>

Hi List,

I know GDAL doesn't support NITF images with JPEG compression, and there
is
an effort to add the support. What's the current status?

Best regards,
Gao, Peng


From rviancos at gmail.com  Thu Mar 23 12:19:29 2006
From: rviancos at gmail.com (=?ISO-8859-1?Q?Ren=E9_F._Viancos_S.?=)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] KML with OGR
Message-ID: <842c1e660603230919l53486bf9k@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: GML2KML.xslt
Type: application/octet-stream
Size: 15542 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060323/657ee6b8/GML2KML.obj
From warmerdam at pobox.com  Thu Mar 23 13:16:43 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] KML with OGR
In-Reply-To: <842c1e660603230919l53486bf9k@mail.gmail.com>
References: <842c1e660603230919l53486bf9k@mail.gmail.com>
Message-ID: <4422E60B.8060402@pobox.com>

Ren? F. Viancos S. wrote:
> Hi list, i'm a user of ORG, and i need to get KML files from some data 
> source supported by OGR.
> 
> have you consider the support of KML Files in future versions ?

Rene,

The idea has certainly come up a number of times, but it isn't on my
priority list at this time.  I would certainly entertain a contributed
GML driver for OGR if someone wanted to implement it.

  > i have tryed to translate GML files to KML with xsltproc and some xsll
> files from internet, but the GML files generated by ogr2ogr is not well 
> parsed.
> 
> In the atach file you can see the xslt file that i have used for.

I'm not very xslt literate, so I have no advice.  If you can identify
particular deficiencies in OGR generated GML I may be able to fix them.
There have already been a few fixes since 1.3.1.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From menviel at hawaii.edu  Thu Mar 23 14:00:38 2006
From: menviel at hawaii.edu (Laurie C G Menviel)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] make error
Message-ID: <f63b95e44f4cb.442263b6@hawaii.edu>

Hi,
I am trying to install gdal on a linux machine.
I ran the configure script similingly without problems but when I run make I get the following error:

GNUmakefile:44: warning: overriding commands for target `libgdal.la'
GNUmakefile:40: warning: ignoring old commands for target `libgdal.la'
(cd port; make)
make[1]: Entering directory `/usr/bin/gdal/port'
/bin/sh ../libtool --mode=compile g++ -Wall  -O2   -I../port  -c -o cpl_conv.o cpl_conv.cpp
 g++ -Wall -O2 -I../port -c cpl_conv.cpp  -fPIC -DPIC -o .libs/cpl_conv.o
In file included from cpl_conv.cpp:173:
cpl_string.h:198: string: No such file or directory
make[1]: *** [cpl_conv.o] Error 1
make[1]: Leaving directory `/usr/bin/gdal/port'
make: *** [port-target] Error 2

Any idea on how to make this work would be really appreciated.
Thanks
laurie

From emiliomayorga at gmail.com  Thu Mar 23 14:47:10 2006
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] Re: Gdal and NetCDF...
Message-ID: <b0d146420603231147h406d82dcu67a79df793bc4cce@mail.gmail.com>

Oi Daniel!

Good to see you here. I don't have an answer for you (I've never used
the GDAL bindings for netcdf, although I do have a lot of experience
with netcdf), but I found this recent thread in the FWTools list that
refers to exactly the same problem. The poster was using OpenEV to
access a netcdf file, but OpenEV must use the same GDAL code to access
netcdf files.
http://lists.maptools.org/pipermail/fwtools/2006-February/000279.html

Maybe Frank has looked into the problem more closely, recently?

Good luck,

-Emilio


> From: "Daniel Victoria" <daniel.victoria@gmail.com>
> To: gdal-dev@lists.maptools.org
> Date: Tue, 21 Mar 2006 15:10:24 -0300
> Subject: [Gdal-dev] Gdal and NetCDF...
> Hi all,
>
> I have a very simple python program that subsets and converts the CRU
> 0.5 degrees time series data in a NetCDF format following COARDS
> conventions - hopefully -
>
> Now, I want to convert this NetCDF to TIFF using gdal and import it to
> GRASS. When I ask my program to subset the CRU data from 10 to 30
> degrees latitude it will get 41 cells from 10.25 to 30.25 (I'm using
> cell centers). This means that the data spans from 10 (south edge) to
> 30.5 (north edge), with 41 cells, which equals 0.5 degrees resolution.
>
> Now, when I do a gdalinfo on the NetCDF file I get a resolution of
> 0.4878 (equals 20 degrees / 41 cells).
>
> Could someone point me to what I'm doing wrong? Is this a feature/bug?
> I'm using GDAL provided by the FWTools-linux-1.0.0a7
>
> I'm attaching the information on the NetCDF file (ncdump and gdalinfo)
>
> Thanks a bunch
> Daniel
>
> ----- ncdump output -----
>
> netcdf saida {
> dimensions:
>         X = 41 ;
>         Y = 41 ;
>         T = 12 ;
> variables:
>         double Y(Y) ;
>                 Y:long_name = "Latitude" ;
>                 Y:units = "degrees_north" ;
>         double X(X) ;
>                 X:long_name = "Longitude" ;
>                 X:units = "degrees_east" ;
>         short T(T) ;
>                 T:long_name = "Months" ;
>                 T:units = "months since 1981-01-01" ;
>         short pre(T, Y, X) ;
>                 pre:long_name = "Precipitation" ;
>                 pre:units = "mm" ;
>                 pre:scale_factor = 0.1 ;
>                 pre:missing_value = -9990 ;
>
> // global attributes:
>                 :Conventions = "COARDS" ;
>                 :history = "Tyndall Centre grim file created on 13.01.2004 at 14
> :28 by Dr. Tim Mitchel" ;
>                 :production = "CRU TS 2.1 converted to NetCDF by Daniel" ;
> data:
>
>  Y = 30.25, 29.75, 29.25, 28.75, 28.25, 27.75, 27.25, 26.75, 26.25, 25.75,
>     25.25, 24.75, 24.25, 23.75, 23.25, 22.75, 22.25, 21.75, 21.25, 20.75,
>     20.25, 19.75, 19.25, 18.75, 18.25, 17.75, 17.25, 16.75, 16.25, 15.75,
>     15.25, 14.75, 14.25, 13.75, 13.25, 12.75, 12.25, 11.75, 11.25, 10.75,
>     10.25 ;
>
>  X = 75.25, 75.75, 76.25, 76.75, 77.25, 77.75, 78.25, 78.75, 79.25, 79.75,
>     80.25, 80.75, 81.25, 81.75, 82.25, 82.75, 83.25, 83.75, 84.25, 84.75,
>     85.25, 85.75, 86.25, 86.75, 87.25, 87.75, 88.25, 88.75, 89.25, 89.75,
>     90.25, 90.75, 91.25, 91.75, 92.25, 92.75, 93.25, 93.75, 94.25, 94.75,
>     95.25 ;
>
>  T = 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 ;
>
> <snip> file values...
>
>
> ------ GDAL info output --------
> Driver: netCDF/network Common Data Format
> Size is 41, 41
> Coordinate System is `'
> Origin = (75.250000,30.250000)
> Pixel Size = (0.48780488,-0.48780488)
> Metadata:
>   NC_GLOBAL#Conventions=COARDS
>   NC_GLOBAL#history=Tyndall Centre grim file created on 13.01.2004 at 14:28 by D
> r. Tim Mitchel
>   NC_GLOBAL#production=CRU TS 2.1 converted to NetCDF by Daniel
>   pre#long_name=Precipitation
>   pre#units=mm
>   pre#scale_factor=0.1
>   pre#missing_value=-9990
>   X#long_name=Longitude
>   X#units=degrees_east
>   Y#long_name=Latitude
>   Y#units=degrees_north
>   T#long_name=Months
>   T#units=months since 1981-01-01
> Corner Coordinates:
> Upper Left  (  75.2500000,  30.2500000)
> Lower Left  (  75.2500000,  10.2500000)
> Upper Right (  95.2500000,  30.2500000)
> Lower Right (  95.2500000,  10.2500000)
> Center      (  85.2500000,  20.2500000)
>
> <snip> band information...


From warmerdam at pobox.com  Thu Mar 23 14:53:42 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:03 2007
Subject: [Gdal-dev] make error
In-Reply-To: <f63b95e44f4cb.442263b6@hawaii.edu>
References: <f63b95e44f4cb.442263b6@hawaii.edu>
Message-ID: <4422FCC6.1020907@pobox.com>

Laurie C G Menviel wrote:
> Hi,
> I am trying to install gdal on a linux machine.
> I ran the configure script similingly without problems but when I run make I get the following error:
> 
> GNUmakefile:44: warning: overriding commands for target `libgdal.la'
> GNUmakefile:40: warning: ignoring old commands for target `libgdal.la'
> (cd port; make)
> make[1]: Entering directory `/usr/bin/gdal/port'
> /bin/sh ../libtool --mode=compile g++ -Wall  -O2   -I../port  -c -o cpl_conv.o cpl_conv.cpp
>  g++ -Wall -O2 -I../port -c cpl_conv.cpp  -fPIC -DPIC -o .libs/cpl_conv.o
> In file included from cpl_conv.cpp:173:
> cpl_string.h:198: string: No such file or directory
> make[1]: *** [cpl_conv.o] Error 1
> make[1]: Leaving directory `/usr/bin/gdal/port'
> make: *** [port-target] Error 2

Laurie,

It seems you are missing the C++ include files that should come with the
compiler.  I don't know why exactly, but presumably there is some GNU C++
package that you can install that will provide them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From daniel112b at gmail.com  Thu Mar 23 15:17:06 2006
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Overviews for DTED
In-Reply-To: <962626470603230655l7223d32bq52a1e01cf173b193@mail.gmail.com>
References: <962626470603230655l7223d32bq52a1e01cf173b193@mail.gmail.com>
Message-ID: <962626470603231217l1fe5e5f0saf0d744e1a144ec0@mail.gmail.com>

Hello,

It seems like the DTED driver doesn't support overviews is there a reason
for that? I did a quick test and added:

    poDS->oOvManager.Initialize( poDS, poOpenInfo->pszFilename );

to DTEDDataset::Open and it seems to work. I just tried it on a single file
tough.

Regards,
  Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060323/f86802da/attachment.html
From emiliomayorga at gmail.com  Thu Mar 23 15:42:28 2006
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Gdal and NetCDF...
In-Reply-To: <e7d9427f0603231157v42de7e25kb2565ebe896cf775@mail.gmail.com>
References: <b0d146420603231147h406d82dcu67a79df793bc4cce@mail.gmail.com>
	<e7d9427f0603231157v42de7e25kb2565ebe896cf775@mail.gmail.com>
Message-ID: <b0d146420603231242u2446ae1eica474788bc14a98e@mail.gmail.com>

---------- Forwarded message ----------
From: Daniel Victoria <daniel.victoria@gmail.com>
Date: Mar 23, 2006 11:57 AM
Subject: Re: Gdal and NetCDF...
To: Emilio Mayorga <emiliomayorga@gmail.com>


Hi Emilio,

I think I solved it. The nc file stores the cell centers so, when GDAL
calculates the resolution it divides the distance between the cell
centers by the number of cells. This leaves half of the first and last
cell outside. Something like this

|---X---|- - - - - - - |---X---|
It will calculate from X to X.

But reading some messages on the list I saw that there is a - a_ullr
switch in GDAL. I used that to force the correct dimensions and now I
can convert NetCDF to GTiff with no problem.

One thing tough. I could not get GDAL to compile with NetCDF support
so I'm using the GDAL supplied with FWTools

Cheers
Daniel

On 3/23/06, Emilio Mayorga <emiliomayorga@gmail.com> wrote:
> Oi Daniel!
>
> Good to see you here. I don't have an answer for you (I've never used
> the GDAL bindings for netcdf, although I do have a lot of experience
> with netcdf), but I found this recent thread in the FWTools list that
> refers to exactly the same problem. The poster was using OpenEV to
> access a netcdf file, but OpenEV must use the same GDAL code to access
> netcdf files.
> http://lists.maptools.org/pipermail/fwtools/2006-February/000279.html
>
> Maybe Frank has looked into the problem more closely, recently?
>
> Good luck,
>
> -Emilio
>
>
> > From: "Daniel Victoria" <daniel.victoria@gmail.com>
> > To: gdal-dev@lists.maptools.org
> > Date: Tue, 21 Mar 2006 15:10:24 -0300
> > Subject: [Gdal-dev] Gdal and NetCDF...
> > Hi all,
> >
> > I have a very simple python program that subsets and converts the CRU
> > 0.5 degrees time series data in a NetCDF format following COARDS
> > conventions - hopefully -
> >
> > Now, I want to convert this NetCDF to TIFF using gdal and import it to
> > GRASS. When I ask my program to subset the CRU data from 10 to 30
> > degrees latitude it will get 41 cells from 10.25 to 30.25 (I'm using
> > cell centers). This means that the data spans from 10 (south edge) to
> > 30.5 (north edge), with 41 cells, which equals 0.5 degrees resolution.
> >
> > Now, when I do a gdalinfo on the NetCDF file I get a resolution of
> > 0.4878 (equals 20 degrees / 41 cells).
> >
> > Could someone point me to what I'm doing wrong? Is this a feature/bug?
> > I'm using GDAL provided by the FWTools-linux-1.0.0a7
> >
> > I'm attaching the information on the NetCDF file (ncdump and gdalinfo)
> >
> > Thanks a bunch
> > Daniel
> >
> > ----- ncdump output -----
> >
> > netcdf saida {
> > dimensions:
> >         X = 41 ;
> >         Y = 41 ;
> >         T = 12 ;
> > variables:
> >         double Y(Y) ;
> >                 Y:long_name = "Latitude" ;
> >                 Y:units = "degrees_north" ;
> >         double X(X) ;
> >                 X:long_name = "Longitude" ;
> >                 X:units = "degrees_east" ;
> >         short T(T) ;
> >                 T:long_name = "Months" ;
> >                 T:units = "months since 1981-01-01" ;
> >         short pre(T, Y, X) ;
> >                 pre:long_name = "Precipitation" ;
> >                 pre:units = "mm" ;
> >                 pre:scale_factor = 0.1 ;
> >                 pre:missing_value = -9990 ;
> >
> > // global attributes:
> >                 :Conventions = "COARDS" ;
> >                 :history = "Tyndall Centre grim file created on 13.01.2004 at 14
> > :28 by Dr. Tim Mitchel" ;
> >                 :production = "CRU TS 2.1 converted to NetCDF by Daniel" ;
> > data:
> >
> >  Y = 30.25, 29.75, 29.25, 28.75, 28.25, 27.75, 27.25, 26.75, 26.25, 25.75,
> >     25.25, 24.75, 24.25, 23.75, 23.25, 22.75, 22.25, 21.75, 21.25, 20.75,
> >     20.25, 19.75, 19.25, 18.75, 18.25, 17.75, 17.25, 16.75, 16.25, 15.75,
> >     15.25, 14.75, 14.25, 13.75, 13.25, 12.75, 12.25, 11.75, 11.25, 10.75,
> >     10.25 ;
> >
> >  X = 75.25, 75.75, 76.25, 76.75, 77.25, 77.75, 78.25, 78.75, 79.25, 79.75,
> >     80.25, 80.75, 81.25, 81.75, 82.25, 82.75, 83.25, 83.75, 84.25, 84.75,
> >     85.25, 85.75, 86.25, 86.75, 87.25, 87.75, 88.25, 88.75, 89.25, 89.75,
> >     90.25, 90.75, 91.25, 91.75, 92.25, 92.75, 93.25, 93.75, 94.25, 94.75,
> >     95.25 ;
> >
> >  T = 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 ;
> >
> > <snip> file values...
> >
> >
> > ------ GDAL info output --------
> > Driver: netCDF/network Common Data Format
> > Size is 41, 41
> > Coordinate System is `'
> > Origin = (75.250000,30.250000)
> > Pixel Size = (0.48780488,-0.48780488)
> > Metadata:
> >   NC_GLOBAL#Conventions=COARDS
> >   NC_GLOBAL#history=Tyndall Centre grim file created on 13.01.2004 at 14:28 by D
> > r. Tim Mitchel
> >   NC_GLOBAL#production=CRU TS 2.1 converted to NetCDF by Daniel
> >   pre#long_name=Precipitation
> >   pre#units=mm
> >   pre#scale_factor=0.1
> >   pre#missing_value=-9990
> >   X#long_name=Longitude
> >   X#units=degrees_east
> >   Y#long_name=Latitude
> >   Y#units=degrees_north
> >   T#long_name=Months
> >   T#units=months since 1981-01-01
> > Corner Coordinates:
> > Upper Left  (  75.2500000,  30.2500000)
> > Lower Left  (  75.2500000,  10.2500000)
> > Upper Right (  95.2500000,  30.2500000)
> > Lower Right (  95.2500000,  10.2500000)
> > Center      (  85.2500000,  20.2500000)
> >
> > <snip> band information...
>


From agerretsen at nlr.nl  Fri Mar 24 05:39:11 2006
From: agerretsen at nlr.nl (Gerretsen, A.)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Crash with Difference function
Message-ID: <BD1E017E319BDA46B6E4E8885A0F485906981A@exchange1a.nlr.nl>

Hi,

I have made a tool that uses the OGRGeometry::Difference function to subtract geometries from each other. The geometries
to subtract are read from shapefiles. On some shapefiles the tool works fine, but on others the Difference function
crashes (and the tool stops).

Does anybody know on what kind of geometries the Difference function crashes? I have tried to look at the number of
points, number of interior rings, etc. But I can not find a logic in why some crash, while others work fine. Any
information on this would be very welcome.

Thanks,
Arno


From radim.blazek at gmail.com  Fri Mar 24 07:39:55 2006
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Postgres schema
Message-ID: <340505ef0603240439n37ac20cdxd90d2fc19bb5c03@mail.gmail.com>

PostGIS driver still does not support schemas?

Radim


From julienfiore at gmail.com  Fri Mar 24 08:04:33 2006
From: julienfiore at gmail.com (Julien Fiore)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] CreateCopy does not copy the NoData value info
Message-ID: <4423ee68.04678bde.40d5.32c2@mx.gmail.com>


Dear gdal users,

I'm using Python and gdal to process raster data.
I open the input raster (an Arc/Info Binary Grid (.adf)) and use driver.CreateCopy to
create the output raster (a GeoTIFF). Everything works except that the resulting GeoTIFF
is not aware of the NoData value, which was specified in the input file. I tried to
specify it with the band.SetNoDataValue command but it does not change anything.

Do you know how to resolve this problem ? 
Any help would be very welcome.

Julien


From warmerdam at pobox.com  Fri Mar 24 10:27:28 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Crash with Difference function
In-Reply-To: <BD1E017E319BDA46B6E4E8885A0F485906981A@exchange1a.nlr.nl>
References: <BD1E017E319BDA46B6E4E8885A0F485906981A@exchange1a.nlr.nl>
Message-ID: <44240FE0.8020902@pobox.com>

Gerretsen, A. wrote:
> Hi,
> 
> I have made a tool that uses the OGRGeometry::Difference function to subtract geometries from each other. The geometries
> to subtract are read from shapefiles. On some shapefiles the tool works fine, but on others the Difference function
> crashes (and the tool stops).
> 
> Does anybody know on what kind of geometries the Difference function crashes? I have tried to look at the number of
> points, number of interior rings, etc. But I can not find a logic in why some crash, while others work fine. Any
> information on this would be very welcome.

Arno,

Well, of course this function is supposed to be robust.  So if you can
isolate an example that crashes things and submit it via bugzilla I will
try it, and pass it upstream to the GEOS maintainer if I can reproduce it
(and determine it isn't an OGR problem).  In any bug report please include
information on what build (or source) you are using for GDAL/OGR *and*
GEOS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Fri Mar 24 10:45:24 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] CreateCopy does not copy the NoData value info
In-Reply-To: <4423ee68.04678bde.40d5.32c2@mx.gmail.com>
References: <4423ee68.04678bde.40d5.32c2@mx.gmail.com>
Message-ID: <44241414.1060202@pobox.com>

Julien Fiore wrote:
> Dear gdal users,
> 
> I'm using Python and gdal to process raster data.
> I open the input raster (an Arc/Info Binary Grid (.adf)) and use driver.CreateCopy to
> create the output raster (a GeoTIFF). Everything works except that the resulting GeoTIFF
> is not aware of the NoData value, which was specified in the input file. I tried to
> specify it with the band.SetNoDataValue command but it does not change anything.
> 
> Do you know how to resolve this problem ? 
> Any help would be very welcome.

Julien,

I tried a translation from Arc/Info Binary Grid to GeoTIFF just now and it
preserved the nodata value.  How did you verify that the nodata value was
missing in the GeoTIFF?  What version of GDAL are you using?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From julienfiore at gmail.com  Fri Mar 24 11:17:53 2006
From: julienfiore at gmail.com (Julien Fiore)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] CreateCopy does not copy the NoData value info
In-Reply-To: <44241414.1060202@pobox.com>
Message-ID: <44241bb7.38482b3e.0f70.ffffe565@mx.gmail.com>

Frank,

Sorry, my question was incomplete. The NoData value is converted into the new geotiff, I
checked it with band.GetNoDataValue(). The problem is that ESRI ArcGIS 9.0 does not
recognize the NoData value. When I look at the geotiff properties in ArcCatalog, the
NoData field is empty. Is it an ArcGIS bug ?

Julien


-----Message d'origine-----
De : Frank Warmerdam [mailto:fwarmerdam@gmail.com] De la part de Frank Warmerdam
Envoy? : vendredi, 24. mars 2006 16:45
? : Julien Fiore
Cc : gdal-dev@lists.maptools.org
Objet : Re: [Gdal-dev] CreateCopy does not copy the NoData value info

Julien Fiore wrote:
> Dear gdal users,
> 
> I'm using Python and gdal to process raster data.
> I open the input raster (an Arc/Info Binary Grid (.adf)) and use 
> driver.CreateCopy to create the output raster (a GeoTIFF). Everything 
> works except that the resulting GeoTIFF is not aware of the NoData 
> value, which was specified in the input file. I tried to specify it with the
band.SetNoDataValue command but it does not change anything.
> 
> Do you know how to resolve this problem ? 
> Any help would be very welcome.

Julien,

I tried a translation from Arc/Info Binary Grid to GeoTIFF just now and it preserved the
nodata value.  How did you verify that the nodata value was missing in the GeoTIFF?  What
version of GDAL are you using?

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org



From assefa at dmsolutions.ca  Fri Mar 24 11:24:50 2006
From: assefa at dmsolutions.ca (Yewondwossen Assefa)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] ogr plugins builds on windows
Message-ID: <44241D52.8060903@dmsolutions.ca>

Hi There,

  Context : trying to build oracle as a plugin

   What are the main reasons to having a plugin.bat (eg for oci build) 
instead of having a plugin taget in the makefiles that could be called 
if OCI_PLUGIN flag is set ?  Mrsid makefiles seem to work with a plugin 
target although I don't think that the dll is built automatically based 
on the plugin flag.

  Thanks



-- 
----------------------------------------------------------------
Assefa Yewondwossen
Software Analyst

Email: assefa@dmsolutions.ca
http://www.dmsolutions.ca/

Phone: (613) 565-5056 (ext 14)
Fax:   (613) 565-0925
----------------------------------------------------------------



From warmerdam at pobox.com  Fri Mar 24 11:51:34 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] CreateCopy does not copy the NoData value info
In-Reply-To: <44241bb7.38482b3e.0f70.ffffe565@mx.gmail.com>
References: <44241bb7.38482b3e.0f70.ffffe565@mx.gmail.com>
Message-ID: <44242396.5040302@pobox.com>

Julien Fiore wrote:
> Frank,
> 
> Sorry, my question was incomplete. The NoData value is converted into the new geotiff, I
> checked it with band.GetNoDataValue(). The problem is that ESRI ArcGIS 9.0 does not
> recognize the NoData value. When I look at the geotiff properties in ArcCatalog, the
> NoData field is empty. Is it an ArcGIS bug ?

Julien,

The reason is that there is no standard way of storing NODATA values in
GeoTIFF.  I think you would need to have an Erdas Imagine .aux file with
the nodata value stored in it for ArcGIS to recognise it.  GDAL uses a
non-standard tag in the GeoTIFF file to hold the nodata.  It is possible
that ArcGIS could add support for this some day.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From kgrootendorst at baird.com  Fri Mar 24 12:05:28 2006
From: kgrootendorst at baird.com (kgrootendorst@baird.com)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] gdalwarp custom reprojections
Message-ID: <OFA87DE71E.34E3EFF2-ON8525713B.005D55C5-8525713B.005DABBA@baird.com>

Listers,
First, I'm new to the list - is there anyway to search the list postings? 
I don't want to be 'that guy' who posts a question that's been posted a 
million times before...

Second, I'm trying to reproject a tif image using gdalwarp.  Specially, 
from UTM Zone 21N WGS 84 (epsg:32621) to Barbados National Grid 
(epsg:21292).  I used the following code in  FWTools1.0.0a5:    gdalwarp 
-s_srs epsg:32621 -t_srs epsg:21292 -co "TFW=YES" d:\Barbados\QB2005w.tif 
d:\Barbados\QB2005w_BNG.tif

 I suspect that I may need to do a custom transformation using x, y, z 
shift values (I have these values).  Is there any way to include these 
parameters in my gdalwarp code above?

Thanks.

Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060324/dd36960d/attachment.html
From warmerdam at pobox.com  Fri Mar 24 14:24:18 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] gdalwarp custom reprojections
In-Reply-To: <OFA87DE71E.34E3EFF2-ON8525713B.005D55C5-8525713B.005DABBA@baird.com>
References: <OFA87DE71E.34E3EFF2-ON8525713B.005D55C5-8525713B.005DABBA@baird.com>
Message-ID: <44244762.6080502@pobox.com>

kgrootendorst@baird.com wrote:
> 
> Listers,
> First, I'm new to the list - is there anyway to search the list 
> postings?  I don't want to be 'that guy' who posts a question that's 
> been posted a million times before...
> 
> Second, I'm trying to reproject a tif image using gdalwarp.  Specially, 
> from UTM Zone 21N WGS 84 (epsg:32621) to Barbados National Grid 
> (epsg:21292).  I used the following code in  FWTools1.0.0a5:    gdalwarp 
> -s_srs epsg:32621 -t_srs epsg:21292 -co "TFW=YES" 
> d:\Barbados\QB2005w.tif d:\Barbados\QB2005w_BNG.tif
> 
>  I suspect that I may need to do a custom transformation using x, y, z 
> shift values (I have these values).  Is there any way to include these 
> parameters in my gdalwarp code above?

Kevin,

It looks like my current definition for EPSG:21292 is:

   +proj=tmerc +lat_0=13.17638888888889 +lon_0=-59.55972222222222
           +k=0.999999 +x_0=30000 +y_0=75000 +ellps=clrk80
           +towgs84=31.95,300.99,419.19,0,0,0,0 +units=m +no_defs

If the provided towgs84 values seem inappropriate you can given the
explicit PROJ.4 string you would like on the commandline.

eg.

gdalwarp -s_srs epsg:32621 -t_srs '+proj=tmerc ... +towgs84=yourvalues ...' ...

Just make sure you use the whole definition from above, replacing the
+towgs84= section with your values.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From warmerdam at pobox.com  Fri Mar 24 14:28:07 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] ogr plugins builds on windows
In-Reply-To: <44241D52.8060903@dmsolutions.ca>
References: <44241D52.8060903@dmsolutions.ca>
Message-ID: <44244847.9040002@pobox.com>

Yewondwossen Assefa wrote:
> Hi There,
> 
>  Context : trying to build oracle as a plugin
> 
>   What are the main reasons to having a plugin.bat (eg for oci build) 
> instead of having a plugin taget in the makefiles that could be called 
> if OCI_PLUGIN flag is set ?  Mrsid makefiles seem to work with a plugin 
> target although I don't think that the dll is built automatically based 
> on the plugin flag.

Assefa,

I was going to say that this plugin.bat thing must have been introduced
by Howard, but to my surprise I see I did it!   Yes, it could be incorporated
into the makefile.vc, but it would mean that some sort of check would need
to be added to not build OCI support into the GDAL DLL if it is being
built as a plugin.  For MRSID this was accomplished with a MRSID_PLUGIN
macro in nmake.opt, and a check for it in gdal/frmts/makefile.vc.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From jgreenberg at arc.nasa.gov  Sat Mar 25 17:35:55 2006
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Batch export from a directory?
Message-ID: <200603252236.k2PMaLvv026251@duke.maptools.org>

Is there a way to select a directory and batch export using gdal all
workable image files to a single output format (modifying the extension as
necessary?)

-j

--

Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Phone: 415-794-5043
AIM: jgrn3007
MSN: jgrn3007@hotmail.com




From lxnyce at gmail.com  Sat Mar 25 18:35:22 2006
From: lxnyce at gmail.com (Lennox Antoine)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Batch export from a directory?
In-Reply-To: <200603252236.k2PMaLvv026251@duke.maptools.org>
References: <200603252236.k2PMaLvv026251@duke.maptools.org>
Message-ID: <82c245aa0603251535j63c891e3nee6f3b5b256c64c7@mail.gmail.com>

You can try : http://www.lennoxgis.com/

Use the 0.8 stable release as 0.9 series updates the GDAL library
which seems to break some things (I haven't tracked them down yet).

Start GeoPaint by double clicking on it under the GIS folder. Drag and
drop your files from windows explorer onto the canvas or using the
open icon and batch select them. Wait for all of them to finish
opening.

Bring up the layer tree (second icon on toolbar), highlight all the
images you want to export. Make sure they are highlighted, don't just
use the folder (fixed in 9.0+). Right click on them and select export.
Pick an output format and directory along with overviews if you want
them. Thats all the options I exposed unfortunately, so its only good
for RGB imagery currently. If you need any other formats or options,
let me know so I can add that functionality.

Hit ok and your batch job will kickoff. Pretty easy I think. Anyways
for those waiting on a new release, I have some eye popping stuff
coming out real soon along with a dumbed down viewer version.

-Lennox

On 3/25/06, Jonathan Greenberg <jgreenberg@arc.nasa.gov> wrote:
> Is there a way to select a directory and batch export using gdal all
> workable image files to a single output format (modifying the extension as
> necessary?)
>
> -j
>
> --
>
> Jonathan A. Greenberg, PhD
> NRC Research Associate
> NASA Ames Research Center
> MS 242-4
> Moffett Field, CA 94035-1000
> Phone: 415-794-5043
> AIM: jgrn3007
> MSN: jgrn3007@hotmail.com
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From perrygeo at gmail.com  Sat Mar 25 20:05:18 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Batch export from a directory?
In-Reply-To: <200603252236.k2PMaLvv026251@duke.maptools.org>
References: <200603252236.k2PMaLvv026251@duke.maptools.org>
Message-ID: <5383fa5e0603251705p6222f9f7iccc7929e6f73b674@mail.gmail.com>

Jonathan,


On 3/25/06, Jonathan Greenberg <jgreenberg@arc.nasa.gov> wrote:
> Is there a way to select a directory and batch export using gdal all
> workable image files to a single output format (modifying the extension as
> necessary?)
>

 If you're using a bash shell, you might try a script along these lines:

====================
outputdir=/home/newdata
inputdir=/home/data

cd $inputdir
for raster in *; do

  gdalinfo $raster

  # If gdalinfo returned exit code 0,
  # we can assume its a valid raster image
  if [ $? = 0 ]; then

    # Assume the file prefix is everything before the first '.'
    prefix=` echo $raster | sed 's/\..*//'`

    # use gdal_translate to convert to ERDAS Imagine format
    gdal_translate -of "HFA" $raster ${outputdir}/${prefix}.img

  fi
done
=====================



--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net


From danilosanchi at virgilio.it  Sun Mar 26 09:36:04 2006
From: danilosanchi at virgilio.it (Danilo Sanchi)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] OGRGeometry::Distance()
Message-ID: <000e01c650e2$9cc38c90$0214a8c0@Phantom>

Hi,
Could you say me if is possible to use the method Distance() of OGR geometry class at this moment? How can do to run it?
I understand that this method use the GEOS library to run, but OGR at now do not include the Geos version that implement this functionallity correctly.

Thak for the help,

                        Danilo Sanchi (Italy)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060326/a39acf43/attachment.html
From warmerdam at pobox.com  Sun Mar 26 23:13:21 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] OGRGeometry::Distance()
In-Reply-To: <000e01c650e2$9cc38c90$0214a8c0@Phantom>
References: <000e01c650e2$9cc38c90$0214a8c0@Phantom>
Message-ID: <44276661.2050506@pobox.com>

Danilo Sanchi wrote:
> Hi,
> Could you say me if is possible to use the method Distance() of OGR 
> geometry class at this moment? How can do to run it?
> I understand that this method use the GEOS library to run, but OGR at 
> now do not include the Geos version that implement this functionallity 
> correctly.

Danilo,

When GDAL is built against the GEOS C API it does not currently
provide the Distance operation since the original version of the C API
did not include this.

If you are currently using the GEOS C API and would prefer to use the C++
API of GEOS to enable distance support, you can modify the line in the
gdal/GDALmake.opt file that says "HAVE_GEOS = c_api" to read instead
"HAVE_GEOS = yes".  (this is for unix or linux).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From rayg at daylongraphics.com  Mon Mar 27 01:50:57 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Terragen driver
In-Reply-To: <44276661.2050506@pobox.com>
References: <000e01c650e2$9cc38c90$0214a8c0@Phantom>
	<44276661.2050506@pobox.com>
Message-ID: <44278B51.6000103@daylongraphics.com>

Hi all,

A driver for GDAL that reads Terragen heightfields is available at

http://www.daylongraphics.com/products/leveller/download/gdal_driver_terragen.zip

Writing (i.e., the Create() call) is still in progress.

Ray Gardener
Daylon Graphics Ltd.




From daniel112b at gmail.com  Mon Mar 27 07:28:02 2006
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Overviews for DTED
Message-ID: <962626470603270428k4b8dc557pab0a5aba996c3bf4@mail.gmail.com>

It seems like the DTED driver doesn't support overviews is there a
reason for that? I did a quick test and added:

    poDS->oOvManager.Initialize( poDS, poOpenInfo->pszFilename );

to DTEDDataset::Open and it seems to work. I just tried it on a single
file though.

Regards,
  Daniel


From Dorit.Gross at fao.org  Mon Mar 27 08:23:55 2006
From: Dorit.Gross at fao.org (Gross, Dorit (SDRN))
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
Message-ID: <5290E77B1FE2FE40B82AA54158825F0601F2C912@hqosex01.fao.org>

Dear William,
Please excuse my late reply!

> -----Original Message-----
> From: William Kyngesburye [mailto:woklist@kyngchaos.com] 
> Sent: 22 March 2006 19:00
> To: gdal-dev@lists.maptools.org
> Cc: Gross, Dorit (SDRN); Frank Warmerdam
> Subject: Re: [Gdal-dev] gdaladdo problems on an Mac OS X Panther
> 
> 
> Poking around some more today.
> 
> - Wrong "StripByteCounts" - looks like that comes from a new  
> validation check in libtiff 3.8.0 (you should not get this 
> warning in  
> 3.7.4).  So, that spot tif may really be corrupt.  The SPOT tif you  
> made available, was that converted with the previous version of GIS  
> Libs when it seemed to work?

No, the SPOT tif was generated already with the new version. Would it make
sense to provide you with an image converted with the previous version? It
would be with overviews then.

> 
> I converted the HDF with the new versions (libtiff 3.8.1/GDAL 1.3.1)  
> and gdaladdo did not give these warnings.  In fact, I didn't get any  
> block errors either.  At least, up to level 32 overview.  As soon as  
> I add level 64, I get StripByteCounts warnings AND block errors, and  
> it's right away, BTW, not when it gets to the point of doing lvl 64.
> 

We use libtiff 3.8.0 that came with the Graphics Libs 2.2. We saw that
version 2.3 is available on your web page for Tiger, but if I am not mistaken
it is still the old version for Panther. I am sure there will be an upate,
but can you indicate already when it might be available to download? 

Many thanks!
Dorit


> When I add the average resampling, the StripByteCounts warnings  
> always come up and the block errors start at lvl 8.  But the block  
> errors only display when it gets to processing that level.  
> Just like  
> my previous tests with the old SPOT tiff.
> 
> 
> Still clueless why the LZW compression is causing bus errors and seg  
> faults in some cases.
> 
> 
> Any ideas yet, Frank?
> 
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com> 
> http://www.kyngchaos.com/
> 
> Theory of the Universe
> 
> There is a theory which states that if ever anyone discovers exactly  
> what the universe is for and why it is here, it will instantly  
> disappear and be replaced by something even more bizarrely  
> inexplicable.  There is another theory which states that this has  
> already happened.
> 
> -Hitchhiker's Guide to the Galaxy 2nd season intro
> 
> 

From ILucena at clarku.edu  Mon Mar 27 09:26:22 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Batch export from a directory?
Message-ID: <6FD7C9DB26540B42A1207C69BF92D455C33852@Iris.ad.clarku.edu>

Hi Jonathan,

As far as I can remember from the Science Data Processing Workshops, you
guys don't use Windows quite often at Greenbelt, but just in case you
are using Windows, you can open the Command Prompt and time this DOS
instruction:

C:\Data > for %i in (*.tif) do gdal_translate -of hfa %i %~ni.img

For more info type:

C:\Data > help for

Ivan Lucena


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matthew Perry
Sent: Saturday, March 25, 2006 8:05 PM
To: Jonathan Greenberg
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Batch export from a directory?

Jonathan,


On 3/25/06, Jonathan Greenberg <jgreenberg@arc.nasa.gov> wrote:
> Is there a way to select a directory and batch export using gdal all
> workable image files to a single output format (modifying the
extension as
> necessary?)
>

 If you're using a bash shell, you might try a script along these lines:

====================
outputdir=/home/newdata
inputdir=/home/data

cd $inputdir
for raster in *; do

  gdalinfo $raster

  # If gdalinfo returned exit code 0,
  # we can assume its a valid raster image
  if [ $? = 0 ]; then

    # Assume the file prefix is everything before the first '.'
    prefix=` echo $raster | sed 's/\..*//'`

    # use gdal_translate to convert to ERDAS Imagine format
    gdal_translate -of "HFA" $raster ${outputdir}/${prefix}.img

  fi
done
=====================



--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From sgillies at frii.com  Mon Mar 27 09:32:46 2006
From: sgillies at frii.com (Sean Gillies)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] OGRGeometry::Distance()
In-Reply-To: <44276661.2050506@pobox.com>
References: <000e01c650e2$9cc38c90$0214a8c0@Phantom>
	<44276661.2050506@pobox.com>
Message-ID: <7CB60429-1B2B-4154-97E8-307955FC2D79@frii.com>

On Mar 26, 2006, at 9:13 PM, Frank Warmerdam wrote:

> Danilo Sanchi wrote:
>> Hi,
>> Could you say me if is possible to use the method Distance() of  
>> OGR geometry class at this moment? How can do to run it?
>> I understand that this method use the GEOS library to run, but OGR  
>> at now do not include the Geos version that implement this  
>> functionallity correctly.
>
> Danilo,
>
> When GDAL is built against the GEOS C API it does not currently
> provide the Distance operation since the original version of the C API
> did not include this.
>
> If you are currently using the GEOS C API and would prefer to use  
> the C++
> API of GEOS to enable distance support, you can modify the line in the
> gdal/GDALmake.opt file that says "HAVE_GEOS = c_api" to read instead
> "HAVE_GEOS = yes".  (this is for unix or linux).
>
> Best regards,

FYI, I've added distance to the GEOS C API in CVS, and it will be out  
in the 2.2.2 release.

Sean

---
Sean Gillies
http://zcologia.com




From warmerdam at pobox.com  Mon Mar 27 09:53:30 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Overviews for DTED
In-Reply-To: <962626470603270428k4b8dc557pab0a5aba996c3bf4@mail.gmail.com>
References: <962626470603270428k4b8dc557pab0a5aba996c3bf4@mail.gmail.com>
Message-ID: <4427FC6A.4010904@pobox.com>

Daniel wrote:
> It seems like the DTED driver doesn't support overviews is there a
> reason for that? I did a quick test and added:
> 
>     poDS->oOvManager.Initialize( poDS, poOpenInfo->pszFilename );
> 
> to DTEDDataset::Open and it seems to work. I just tried it on a single
> file though.

Daniel,

I don't see any problem with this, so I have added it in CVS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From upendra_gis at yahoo.com  Mon Mar 27 18:03:06 2006
From: upendra_gis at yahoo.com (Upendra)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] gdalwarp with MEM format
Message-ID: <20060327230306.14659.qmail@web30007.mail.mud.yahoo.com>

Hello,
  I am new to GDAL API. Could anyone help give me some
hint on this? In "GDAL FAQ" section in the GDAL
homepage, one of the questions is:
  Why won't gdalwarp or gdal_merge write to most
formats?

And in the answer, I see the following statement:

 "When you encounter this problem it is generally a
good idea to first write the result to GeoTIFF format,
and then translate to the desired target format."

Is it possible to write the data first to MEM format
instead of GeoTIFF format and then translate to the
desired target format? Could there be any problems?
That way I don't have to write to the disk.

Regards,
Upendra





__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From warmerdam at pobox.com  Mon Mar 27 21:28:58 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] gdalwarp with MEM format
In-Reply-To: <20060327230306.14659.qmail@web30007.mail.mud.yahoo.com>
References: <20060327230306.14659.qmail@web30007.mail.mud.yahoo.com>
Message-ID: <44289F6A.7010200@pobox.com>

Upendra wrote:
> Hello,
>   I am new to GDAL API. Could anyone help give me some
> hint on this? In "GDAL FAQ" section in the GDAL
> homepage, one of the questions is:
>   Why won't gdalwarp or gdal_merge write to most
> formats?
> 
> And in the answer, I see the following statement:
> 
>  "When you encounter this problem it is generally a
> good idea to first write the result to GeoTIFF format,
> and then translate to the desired target format."
> 
> Is it possible to write the data first to MEM format
> instead of GeoTIFF format and then translate to the
> desired target format? Could there be any problems?
> That way I don't have to write to the disk.

Upendra,

Well, the comment was mostly written for users of the
gdalwarp commandline program.  With it there is no option
to write to MEM, and then to the output file.

But if you are using the API, then yes, as long as the output image
isn't impractically large you could write it to MEM format and then
pass that to CreateCopy() to write to disk in the desired output format.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From Christian.Ratliff at delorme.com  Tue Mar 28 07:40:18 2006
From: Christian.Ratliff at delorme.com (Christian Ratliff)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Problem creating MapInfo tab files using C# (via
	theC	API)
Message-ID: <AE33BBD284E832478242F2E6AABA1E1B01401C9B@franklin.earth.delorme.com>


  I was able to build under VC 2003 (7.1) without a problem.

christian
DeLorme

-----Original Message-----
From: Richard Matsunaga [mailto:richard@waypointinfo.com] 
Sent: Thursday, March 23, 2006 11:26 AM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] Problem creating MapInfo tab files using C# (via
theC API)

 
After hours of struggling to compile in Visual Studio 2005, I may have
to go back to VSC++ 6. Does anyone have updated instructions on how to
get GDAL building in the latest Visual Studio?

I continue to experience odd behaviour when using the MapInfo driver. On
the suggestion of a list member, I ran ogrinfo on two of my layers - a
working one and a corrupt one. There was nothing amiss according to
ogrinfo. All features are contained within the extents and there are no
other differences reported (I assume the -al switch is the most detailed
version of the outputs?).

Now when I try to create the MapInfo datasource, I get a .NET exception
indicating memory corruption. If I try to open it again (immediately in
the next line of code), it will work. This only happens with the MapInfo
driver, although I haven't tried many drivers.

I also generated ESRI Shapefile outputs, then used ogr2ogr to convert to
MapInfo tab format. This is the strange part: the same MI files were
corrupt as when I directly write them from my code. There's obviously
something in there that MapInfo doesn't like.

I then tried ogr2ogr from ESRI Shapefiles generated by a C++ version of
my app and those were all correct.

Richard


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Daniel
Morissette

Frank Warmerdam wrote:
> 
> This might be worth taking up on the mitab list - this issue sounds 
> vaguely familiar.  I wonder if it might already have been fixed. Are 
> you using GDAL CVS?
> 

Frank,

Are you thinking of the problem with the #ifdef MITAB_AFFINE_PARAMS in
MITAB that causes unreadable files?
http://bugzilla.maptools.org/show_bug.cgi?id=1319

Richard: perhaps you could try recompiling GDAL after adding
-DMITAB_AFFINE_PARAMS to the CPPFLAGS variable in GDALmake.opt and let
us know if that solves the issue.

Daniel
--
Daniel Morissette
http://www.mapgears.com/
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From r.beck at m4com.de  Tue Mar 28 09:03:10 2006
From: r.beck at m4com.de (Reiner Beck)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Bug in OGDI Driver when accessing tiles (FAILURE: 1: End
	of selection)
Message-ID: <4429421E.7040907@m4com.de>

(2nd try - the first one went to gdal-dev@remotesensing.org - sorry if 
you receive this twice)

Hello List,

there seems to be a bug in the OGDI driver when accessing tiles which 
are directly "under" the previously fetched tile.

Here's what I do:
- The driver is a RPF dataset and the sub-dataset used is a Matrix layer.
  This is a layer with a colortable, not the RGB Image layer.
- The error does only occur for single band access.
- I read the image data tile by tile using the 
GDALRasterBand::RasterIO() method.
- For example, the Image Size is 6144x3072, Tile Size is 256x256, No of 
Tiles is 24x12.
- For internal reasons, the tiles are fetched somewhat randomly.
- The error occurs only in case a tile is read, followed by a read to a 
tile which is directly
  under the previously read tile.

Example:
First tile to read is [3, 7]:

This results in calls to:
  poBand->RasterIO(GF_Read, 768, 1792, 256, 256, poinerToMyBuffer, 256, 
256, 1, 1, 256);

and GDAL internal to
  OGDIRasterBand::EstablishAccess(768, 1792, 256, 256, 256, 256);

Let's assume this works.


Next tile to read is [3, 8]:

This results in calls to:
  poBand->RasterIO(GF_Read, 768, 2048, 256, 256, poinerToMyBuffer, 256, 
256, 1, 1, 256)
and GDAL internal to
  OGDIRasterBand::EstablishAccess(768, 2048, 256, 256, 256, 256);

In this case, the method EstablishAccess() will not call 
cln_SelectRegion() and the read will fail with an error 1 "End of 
selection". This happens in the OGDI RPF driver, function 
dyn_getNextObjectRaster(). However, I think the error is in the GDAL part.


Workaround:
In case the if statement in EstablishAccess() is commented out (not the 
body of the statement), it works:
/*
/if( poODS->nCurrentIndex == -1 / / || ABS(sWin.west - 
poODS->sCurrentBounds.west) > 0.0001 / / || ABS(sWin.east - 
poODS->sCurrentBounds.east) > 0.0001 / / || ABS(sWin.north - 
(poODS->sCurrentBounds.north - poODS->nCurrentIndex * 
poODS->sCurrentBounds.ns_res)) > dfNSTolerance / / || 
ABS(sWin.ew_res/poODS->sCurrentBounds.ew_res - 1.0) > 0.0001/ / || 
ABS(sWin.ns_res - poODS->sCurrentBounds.ns_res) > dfNSTolerance )/ /
*/
Not sure if this is the best solution though ...


Version:
gdal 1.2.6 and ogdi 3.1.4. However, the affected code seems to be 
identical to the most recent versions (checked against gdal 1.3.1 and 
ogdi 3.1.5).

Cheers
Reiner



From andrew at andrewlarcombe.co.uk  Tue Mar 28 09:56:27 2006
From: andrew at andrewlarcombe.co.uk (Andrew Larcombe)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] PHP Bindings... (resent)
In-Reply-To: <44183293.4070408@andrewlarcombe.co.uk>
References: <4418083B.5060701@andrewlarcombe.co.uk>	<44182DE3.6030400@pobox.com>
	<44183293.4070408@andrewlarcombe.co.uk>
Message-ID: <44294E9B.4010501@andrewlarcombe.co.uk>

Andrew Larcombe wrote:
> Frank Warmerdam wrote:
>> My understanding is that the SWIG based PHP bindings for GDAL/OGR are
>> incomplete and unsupported at this time.  Unless you are a developer 
>> willing
>> to put substantial effort into them, I would discourage their use.
>>
>> There are also some hand crafted PHP bindings for just OGR developed by
>> DM Solutions for a client of theirs.  I don't have too much familiarity
>> with it, but you can find it at:
>>
>>   http://dl.maptools.org/dl/php_ogr/
> 
> Frank,
> 
> Thanks for that. I'll investigate both avenues and report back.

As promised, a brief update for the archive:

The DM Solututions php_ogr extension works really well, although it only 
contains the functionality found in the ogr_api.h. This is great for 
reading and writing of data sources, AFAICT it is not possible to do 
arbitrary coordinate transformations of geometries.

In order to do this I'll either have to port the necessary functionality 
from ogr_srs_api.h, or find an alternative projection library that can 
be used within PHP, possibly PROJ.4?


Regards,

Andrew Larcombe
andrew@andrewlarcombe.co.uk

From warmerdam at pobox.com  Tue Mar 28 10:03:20 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Bug in OGDI Driver when accessing tiles (FAILURE:
	1: End	of selection)
In-Reply-To: <4429421E.7040907@m4com.de>
References: <4429421E.7040907@m4com.de>
Message-ID: <44295038.5070502@pobox.com>

Reiner Beck wrote:
> (2nd try - the first one went to gdal-dev@remotesensing.org - sorry if 
> you receive this twice)
> 
> Hello List,
> 
> there seems to be a bug in the OGDI driver when accessing tiles which 
> are directly "under" the previously fetched tile.
> 
> Here's what I do:
> - The driver is a RPF dataset and the sub-dataset used is a Matrix layer.
>  This is a layer with a colortable, not the RGB Image layer.
> - The error does only occur for single band access.
> - I read the image data tile by tile using the 
> GDALRasterBand::RasterIO() method.
> - For example, the Image Size is 6144x3072, Tile Size is 256x256, No of 
> Tiles is 24x12.
> - For internal reasons, the tiles are fetched somewhat randomly.
> - The error occurs only in case a tile is read, followed by a read to a 
> tile which is directly
>  under the previously read tile.
> 
> Example:
> First tile to read is [3, 7]:
> 
> This results in calls to:
>  poBand->RasterIO(GF_Read, 768, 1792, 256, 256, poinerToMyBuffer, 256, 
> 256, 1, 1, 256);
> 
> and GDAL internal to
>  OGDIRasterBand::EstablishAccess(768, 1792, 256, 256, 256, 256);
> 
> Let's assume this works.
> 
> 
> Next tile to read is [3, 8]:
> 
> This results in calls to:
>  poBand->RasterIO(GF_Read, 768, 2048, 256, 256, poinerToMyBuffer, 256, 
> 256, 1, 1, 256)
> and GDAL internal to
>  OGDIRasterBand::EstablishAccess(768, 2048, 256, 256, 256, 256);
> 
> In this case, the method EstablishAccess() will not call 
> cln_SelectRegion() and the read will fail with an error 1 "End of 
> selection". This happens in the OGDI RPF driver, function 
> dyn_getNextObjectRaster(). However, I think the error is in the GDAL part.
> 
> 
> Workaround:
> In case the if statement in EstablishAccess() is commented out (not the 
> body of the statement), it works:
> /*
> /if( poODS->nCurrentIndex == -1 / / || ABS(sWin.west - 
> poODS->sCurrentBounds.west) > 0.0001 / / || ABS(sWin.east - 
> poODS->sCurrentBounds.east) > 0.0001 / / || ABS(sWin.north - 
> (poODS->sCurrentBounds.north - poODS->nCurrentIndex * 
> poODS->sCurrentBounds.ns_res)) > dfNSTolerance / / || 
> ABS(sWin.ew_res/poODS->sCurrentBounds.ew_res - 1.0) > 0.0001/ / || 
> ABS(sWin.ns_res - poODS->sCurrentBounds.ns_res) > dfNSTolerance )/ /
> */
> Not sure if this is the best solution though ...

Reiner,

I am going to apply the following patch.  I think this will avoid
resetting the window in some cases, but *will* reset it if the
"current index" isn't pointing to the first line of the window.
Could you try this and verify it fixes your problem?

diff -u -r1.20 ogdidataset.cpp
--- ogdidataset.cpp     2 Dec 2004 20:31:03 -0000       1.20
+++ ogdidataset.cpp     28 Mar 2006 15:00:25 -0000
@@ -489,7 +489,7 @@
          dfNSTolerance = sWin.ns_res * 0.001;
      }

-    if( poODS->nCurrentIndex == -1
+    if( poODS->nCurrentIndex != 0
          || ABS(sWin.west - poODS->sCurrentBounds.west) > 0.0001
          || ABS(sWin.east - poODS->sCurrentBounds.east) > 0.0001
          || ABS(sWin.north - (poODS->sCurrentBounds.north - 
poODS->nCurrentIndex * poODS->sCurrentBounds.ns_res)) > dfNSTolerance


I don't really have test scripts in place for OGDI so I am always
nervous about making changes in this old code.  It seems to me there is
substantial opportunities for optimization in the OGDI driver, especially
for the common case of a program reading the whole source from top to
bottom in a bunch of 1 scanline rasterio requests.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From r.beck at m4com.de  Tue Mar 28 11:10:48 2006
From: r.beck at m4com.de (Reiner Beck)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Bug in OGDI Driver when accessing tiles (FAILURE:
	1: End	of selection)
In-Reply-To: <44295038.5070502@pobox.com>
References: <4429421E.7040907@m4com.de> <44295038.5070502@pobox.com>
Message-ID: <44296008.6040606@m4com.de>

Frank,
> I am going to apply the following patch.  I think this will avoid
> resetting the window in some cases, but *will* reset it if the
> "current index" isn't pointing to the first line of the window.
> Could you try this and verify it fixes your problem?
thank you that fixes it. I tested both the Matrix and the Image case.
>
> I don't really have test scripts in place for OGDI so I am always
> nervous about making changes in this old code.  It seems to me there is
> substantial opportunities for optimization in the OGDI driver, especially
> for the common case of a program reading the whole source from top to
> bottom in a bunch of 1 scanline rasterio requests.
Well, looking at the amount of fopen/close in the RPF driver for the 
different image parts, there is certainly a heavy impact on how one 
accesses the data. In my case I have to do it always on a tile basis 
(normally 256x256 pixel chunks). As I stated in my previous post, the 
order in which the tiles are accessed are "a bit random". This is to 
speed up processing on my side.
However, I could re-order each request to access the tiles in a 
different order, for example start with the first row of tiles and so on.

Do you think it would speed up the reading process if I re-order the 
tile requests?

BTW, do you know how the NITF files in a CADRG dataset are compressed?

Cheers
Reiner


From warmerdam at pobox.com  Tue Mar 28 11:33:19 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Bug in OGDI Driver when accessing tiles (FAILURE:
	1: End	of selection)
In-Reply-To: <44296008.6040606@m4com.de>
References: <4429421E.7040907@m4com.de> <44295038.5070502@pobox.com>
	<44296008.6040606@m4com.de>
Message-ID: <4429654F.7010609@pobox.com>

Reiner Beck wrote:
> Well, looking at the amount of fopen/close in the RPF driver for the 
> different image parts, there is certainly a heavy impact on how one 
> accesses the data. In my case I have to do it always on a tile basis 
> (normally 256x256 pixel chunks). As I stated in my previous post, the 
> order in which the tiles are accessed are "a bit random". This is to 
> speed up processing on my side.
> However, I could re-order each request to access the tiles in a 
> different order, for example start with the first row of tiles and so on.

Reiner,

I haven't analysed it carefully, but I am not aware of any sigificant win
from careful ordering of tile requests.  I think requesting bigger tiles
would likely help if it could be accomplished in your context.

> Do you think it would speed up the reading process if I re-order the 
> tile requests?
> 
> BTW, do you know how the NITF files in a CADRG dataset are compressed?

Yes, they use the VQ compression as far as I know.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From s_jubeh at yahoo.com  Tue Mar 28 15:22:40 2006
From: s_jubeh at yahoo.com (salah jubeh)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Proximity maps
Message-ID: <20060328202240.11799.qmail@web52708.mail.yahoo.com>

Hi
   
  I want to create proximity maps from shape files ,  Can any one help please

		
---------------------------------
Yahoo! Messenger with Voice. Make PC-to-Phone Calls to the US (and 30+ countries) for 2?/min or less.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060328/12fbd0a8/attachment.html
From miscx at spray.se  Wed Mar 29 06:41:36 2006
From: miscx at spray.se (Mikael =?ISO-8859-1?Q?Schr=F6der?=)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Error compiling gdal with MrSid support in ubuntu linux
Message-ID: <1143632496.11618.11.camel@localhost.localdomain>

Hello 
I have been trying to add support for MrSid (but also ecw) to the
libgdal1c2(a) package in ubuntu breezy (I have also tried to compile
directly from source).
But I get the following error message:

In file included
from /usr/local/MrSid_GeoExpressSDK/include/support/lt_types.h:28,
                 from mrsiddataset.cpp:117:
/usr/local/MrSid_GeoExpressSDK/include/support/lt_platform.h:61:8:
error: #error PLATFORM ERROR: Unsupported version of GCC
make[3]: *** [../o/mrsiddataset.o] Error 1
make[3]: Leaving directory
`/home/micke/source/gdal_dpkg_t4/gdal-1.2.6/frmts/mrsid'
make[2]: *** [mrsid-install-obj] Error 2
make[2]: Leaving directory
`/home/micke/source/gdal_dpkg_t4/gdal-1.2.6/frmts'
make[1]: *** [frmts-target] Error 2
make[1]: Leaving directory `/home/micke/source/gdal_dpkg_t4/gdal-1.2.6'
make: *** [build-stamp] Error 2

I have installed gcc 3.2.3 from Warty and downloaded the corresponding
dsdk from Lizardtech's developer-site. 
Before i run dpkg I execute (as root):
$ export PATH=/usr/bin/gcc-3.2:$PATH CC=/usr/bin/gcc-3.2           
$ PATH=/usr/bin/gcc-3.2:$PATH CC=/usr/bin/gcc-3.2 dpkg-buildpackage -us
-uc -rfakeroot

I have also linked gcc to gcc-3.2 in /usr/bin
What am i doing wrong?

/Regards Mikael
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060329/7f00746a/attachment.html
From warmerdam at pobox.com  Wed Mar 29 09:37:56 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Error compiling gdal with MrSid support in ubuntu linux
In-Reply-To: <1143632496.11618.11.camel@localhost.localdomain>
References: <1143632496.11618.11.camel@localhost.localdomain>
Message-ID: <442A9BC4.9080900@pobox.com>

Mikael Schr?der wrote:
> Hello
> I have been trying to add support for MrSid (but also ecw) to the 
> libgdal1c2(a) package in ubuntu breezy (I have also tried to compile 
> directly from source).
> But I get the following error message:
> 
> In file included from 
> /usr/local/MrSid_GeoExpressSDK/include/support/lt_types.h:28,
>                  from mrsiddataset.cpp:117:
> /usr/local/MrSid_GeoExpressSDK/include/support/lt_platform.h:61:8: 
> error: #error PLATFORM ERROR: Unsupported version of GCC
> make[3]: *** [../o/mrsiddataset.o] Error 1
> make[3]: Leaving directory 
> `/home/micke/source/gdal_dpkg_t4/gdal-1.2.6/frmts/mrsid'
> make[2]: *** [mrsid-install-obj] Error 2
> make[2]: Leaving directory 
> `/home/micke/source/gdal_dpkg_t4/gdal-1.2.6/frmts'
> make[1]: *** [frmts-target] Error 2
> make[1]: Leaving directory `/home/micke/source/gdal_dpkg_t4/gdal-1.2.6'
> make: *** [build-stamp] Error 2
> 
> I have installed gcc 3.2.3 from Warty and downloaded the corresponding 
> dsdk from Lizardtech's developer-site.
> Before i run dpkg I execute (as root):
> $ export PATH=/usr/bin/gcc-3.2:$PATH CC=/usr/bin/gcc-3.2          
> $ PATH=/usr/bin/gcc-3.2:$PATH CC=/usr/bin/gcc-3.2 dpkg-buildpackage -us 
> -uc -rfakeroot
> 
> I have also linked gcc to gcc-3.2 in /usr/bin
> What am i doing wrong?

Mikael,

I don't know what dpkg does, but I would guess it is somehow not honouring
your environment.  lt_platforms.h checks for gcc 2 and 3, so I would assume
things are still picking up gcc 4 for some reason.

You might trying setting CXX instead of (or in addition to) CC since this
is a c++ project.

I trust any package you build would only be for internal use, right?  There
are non-trivial requirements to redistribute Lizardtech libraries (even if
you are putting it in non-free).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From richard at waypointinfo.com  Wed Mar 29 10:52:06 2006
From: richard at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Problem creating MapInfo tab files using C# (via the
	C	API)
In-Reply-To: <442190DE.4040007@mapgears.com>
Message-ID: <000c01c65348$bb474a40$cc01a8c0@Maddog>

 
Daniel,

I was finally able to try this out. It did indeed fix my problem. My MapInfo
files are now valid. Any way we can get this fix into the main release?

On a side note: the command line build doesn't work in VS.NET 2005. I had to
install 2003 to get the build working.

Cheers,
Richard

-----Original Message-----
From: Daniel Morissette [mailto:dmorissette@mapgears.com] 
Sent: March 22, 2006 1:01 PM
To: gdal-dev@lists.maptools.org
Cc: Richard Matsunaga
Subject: Re: [Gdal-dev] Problem creating MapInfo tab files using C# (via the
C API)

Frank Warmerdam wrote:
> 
> This might be worth taking up on the mitab list - this issue sounds 
> vaguely familiar.  I wonder if it might already have been fixed. Are 
> you using GDAL CVS?
> 

Frank,

Are you thinking of the problem with the #ifdef MITAB_AFFINE_PARAMS in MITAB
that causes unreadable files?
http://bugzilla.maptools.org/show_bug.cgi?id=1319

Richard: perhaps you could try recompiling GDAL after adding
-DMITAB_AFFINE_PARAMS to the CPPFLAGS variable in GDALmake.opt and let us
know if that solves the issue.

Daniel
--
Daniel Morissette
http://www.mapgears.com/



From warmerdam at pobox.com  Wed Mar 29 11:26:51 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] FOSS4G 2006 Conference
Message-ID: <442AB54B.7040000@pobox.com>

Folks,

I am including the announcement for the FOSS4G conference
this September.  From my point of view this is *the*
conference for GDAL for the year, and I hope to meeting lots
of folks interested in GDAL/OGR there.   I am not currently
planning to present any workshops but I do hope to do a
presentation or two on GDAL/OGR and related technologies.

I am interested in feedback from the community on what they
would like to see presented and accomplished at the conference.
I would be interested in a BOF (Birds of a Feather) session
or something similar if the community was interested.

--

FOSS4G2006, the international conference addressing
geospatial data technologies developed by or of
relevance to the Open  Source community, will be held
September 12-15th, 2006 in Lausanne,  Switzerland. The
conference will bring together all the  Free and Open
Source Software for Geoinformatics (FOSS4G)
communities.  The conference incorporates the OSGIS
Conference, Mapserver User Meeting,  GRASS Users
Conference, Java oriented FOSS4G and EOGEO Workshops
with  the intent to be broadly inclusive.

Lausanne, Switzerland will host  the conference, making
it the first time many of these groups will  meet in
Europe. A committee is working to design a program with
elements  that will interest participants from the
novice to the expert. The  conference strives to build
on the successes and enthusiasm generated  by previous,
related meetings.

Important dates to note (dates are approximate and
subject to change):

   April 15, 2006	Workshop submission deadline

   June 30, 2006		Presentation submission deadline


   April 15, 2006	Final registration opening
			(pre-registration is open)

   June 30, 2006		Early registration deadline

We strongly encourage making your room reservation
early as September is still high season for tourism in
Lausanne.

For more information, registration and/or submit a
contribution, please visit the conference website at
	http://www.foss4g2006.org

Take advantage of the opportunity FOSS4G2006 offers to
network with fellow geospatial data professionals,
renewing old  acquaintances and making new ones. Hope
to see you there!

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From richard at waypointinfo.com  Wed Mar 29 11:35:22 2006
From: richard at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Another problem with MapInfo driver?
Message-ID: <000d01c6534e$c69d7440$cc01a8c0@Maddog>

Visual Studio .NET 2005 doesn't like what is happening with the OGR MapInfo
driver. In debug mode, the first time that I try to create a datasource it
always fails. Sometimes, if I try again immediately (i.e. in the catch()) it
will succeed. The exception message is:
 
System.AccessViolationException occurred
  Message="Attempted to read or write protected memory. This is often an
indication that other memory is corrupt."
  Source="GDALWrapper"
  StackTrace:
       at GDALWrapper.OGR.OgrInterop.OGR_Dr_CreateDataSource(HandleRef
hDriver, String pszName, String[]& papszOptions)
       at GDALWrapper.OGR.OgrDriver.CreateDataSource(String folderName,
List`1 options) in
D:\Code\online_tracking\ONAT\GDALWrapper\OGR\OgrDriver.cs:line 62

If I compile the OGR C# wrapper project in Release mode, it works more
consistently, but still always fails the first time.
 
This does not happen with CSV, ESRI drivers in debug or release.
 
Running the executable outside the IDE works fine as well.
 
My test code is very simple. Any thoughts or suggestions are welcome.
 
 
public class OgrTest
{
    //private string driverName = "CSV";
    //private string driverName = "ESRI Shapefile";
    private string driverName = "MapInfo File";
    private List<string> driverOptions = new List<string>();
    private string folderName = @"D:\temp\simpletest";
 
    public void Test()
    {
        OgrDriver.OgrRegisterAll();
 
        OgrDriver driver = OgrDriver.GetDriverByName(driverName);
        if (driver == null)
        {
            throw new ArgumentOutOfRangeException(driverName + " driver not
available.");
        }
 
        driverOptions.Add(string.Empty);
        OgrDataSource dataSource = driver.CreateDataSource(folderName,
driverOptions);
        if (dataSource == null)
        {
            throw new ArgumentException("Output folder creation failed.");
        }
        dataSource.Release();
    }
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060329/d859f9e7/attachment.html
From ari.jolma at tkk.fi  Wed Mar 29 12:35:50 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] FOSS4G 2006 Conference
In-Reply-To: <442AB54B.7040000@pobox.com>
References: <442AB54B.7040000@pobox.com>
Message-ID: <442AC576.2010704@tkk.fi>

Frank Warmerdam kirjoitti:
>  Folks,
>
>  I am including the announcement for the FOSS4G conference this
>  September.  From my point of view this is *the* conference for GDAL
>  for the year, and I hope to meeting lots of folks interested in
>  GDAL/OGR there.   I am not currently planning to present any
>  workshops but I do hope to do a presentation or two on GDAL/OGR and
>  related technologies.
>
>  I am interested in feedback from the community on what they would
>  like to see presented and accomplished at the conference. I would be
>  interested in a BOF (Birds of a Feather) session or something similar
>  if the community was interested.


I am going to attend the conference. I am of course interested in a 
GDAL/OGR Swig BoF, or workshop or something that really digs in into the 
matter -- I understand that "workshop" in the announcement means in fact 
something I understand as tutorials, as workshops were in Minneapolis.

I am also interested in a BoF or something where the topic would be 
using WCS and WFS as a datasource for GDAL and OGR (or developing such 
drivers).

Ari


>
>  --
>
>  FOSS4G2006, the international conference addressing geospatial data
>  technologies developed by or of relevance to the Open  Source
>  community, will be held September 12-15th, 2006 in Lausanne,
>  Switzerland. The conference will bring together all the  Free and
>  Open Source Software for Geoinformatics (FOSS4G) communities.  The
>  conference incorporates the OSGIS Conference, Mapserver User Meeting,
>  GRASS Users Conference, Java oriented FOSS4G and EOGEO Workshops
>  with the intent to be broadly inclusive.
>
>  Lausanne, Switzerland will host  the conference, making it the first
>  time many of these groups will  meet in Europe. A committee is
>  working to design a program with elements  that will interest
>  participants from the novice to the expert. The  conference strives
>  to build on the successes and enthusiasm generated  by previous,
>  related meetings.
>
>  Important dates to note (dates are approximate and subject to
>  change):
>
>  April 15, 2006    Workshop submission deadline
>
>  June 30, 2006        Presentation submission deadline
>
>
>  April 15, 2006    Final registration opening (pre-registration is
>  open)
>
>  June 30, 2006        Early registration deadline
>
>  We strongly encourage making your room reservation early as September
>  is still high season for tourism in Lausanne.
>
>  For more information, registration and/or submit a contribution,
>  please visit the conference website at http://www.foss4g2006.org
>
>  Take advantage of the opportunity FOSS4G2006 offers to network with
>  fellow geospatial data professionals, renewing old  acquaintances and
>  making new ones. Hope to see you there!
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Wed Mar 29 12:53:48 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] FOSS4G 2006 Conference
In-Reply-To: <442AC576.2010704@tkk.fi>
References: <442AB54B.7040000@pobox.com> <442AC576.2010704@tkk.fi>
Message-ID: <442AC9AC.3040906@pobox.com>

Ari Jolma wrote:
> I am going to attend the conference. I am of course interested in a 
> GDAL/OGR Swig BoF, or workshop or something that really digs in into the 
> matter -- I understand that "workshop" in the announcement means in fact 
> something I understand as tutorials, as workshops were in Minneapolis.

Ari,

Right, workshops in foss4g terminology are half day "on the computer"
tutorials.  I did a couple workshops at the Ottawa conference and they
are a huge amount of work to prepare - and those were shorter.  So I'm
leery about trying to do a workshop, and in the context of GDAL/OGR
Also I'm not sure what exactly I would do the workshop on.  Aiming at
internal developers?  Developers using GDAL?  Users using the command
line tools?  Users script via the various scripting interfaces?

I did a presentation last year that was basically hints and tricks for
processing data with the GDAL commandline tools, and that was well
received.  But it would be, I think, a stretch to extend that to a
half day workshop.

> I am also interested in a BoF or something where the topic would be 
> using WCS and WFS as a datasource for GDAL and OGR (or developing such 
> drivers).

Well, this would certainly be an interesting topic for discussion.  WCS
is rather a natural match for GDAL and I have had a vague intention to
make GDAL able to act as a WCS client for a long time.  But I never had a
compelling enough reason to actually make me do it.  WFS, especially
WFS-T, would be possible with OGR but I think for the time being it
would be better to improve GML support before trying that.  It might
make sense to do it for the simplified GML profile (GML3L0?  GML For Simple
Features?).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ari.jolma at tkk.fi  Wed Mar 29 14:31:15 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] FOSS4G 2006 Conference
In-Reply-To: <442AC9AC.3040906@pobox.com>
References: <442AB54B.7040000@pobox.com> <442AC576.2010704@tkk.fi>
	<442AC9AC.3040906@pobox.com>
Message-ID: <442AE083.6070907@tkk.fi>

Frank Warmerdam kirjoitti:
>
> Right, workshops in foss4g terminology are half day "on the computer"
> tutorials.  I did a couple workshops at the Ottawa conference and they
> are a huge amount of work to prepare - and those were shorter.  

eh, I'm not sure if my message was clear, I'm not so interested in 
attending a GDAL/OGR FOSS4G workshop; although I might be interested in 
helping with such a workshop in the topic of GDAL/OGR Swig if someone 
wants to suggest such -- I think that would also directly help me in my 
teaching at TKK

But definitely a GDAL/OGR developer BoF is interesting to me.


> Well, this would certainly be an interesting topic for discussion.  WCS
> is rather a natural match for GDAL and I have had a vague intention to
> make GDAL able to act as a WCS client for a long time.  But I never had a
> compelling enough reason to actually make me do it.  

If I find money that I can use for this purpose, I could give you the 
reason ;-) BTW, what would be the price tag on something like this?

> WFS, especially
> WFS-T, would be possible with OGR but I think for the time being it
> would be better to improve GML support before trying that.  It might
> make sense to do it for the simplified GML profile (GML3L0?  GML For 
> Simple
> Features?).

This is a topic that I would be interested in attending a workshop. My 
practical knowledge on WFS or GML is rather slim.

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Wed Mar 29 14:47:21 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] FOSS4G 2006 Conference
In-Reply-To: <442AE083.6070907@tkk.fi>
References: <442AB54B.7040000@pobox.com> <442AC576.2010704@tkk.fi>
	<442AC9AC.3040906@pobox.com> <442AE083.6070907@tkk.fi>
Message-ID: <442AE449.8070107@pobox.com>

Ari Jolma wrote:
> Frank Warmerdam kirjoitti:
>>
>> Right, workshops in foss4g terminology are half day "on the computer"
>> tutorials.  I did a couple workshops at the Ottawa conference and they
>> are a huge amount of work to prepare - and those were shorter.  
> 
> eh, I'm not sure if my message was clear, I'm not so interested in 
> attending a GDAL/OGR FOSS4G workshop; although I might be interested in 
> helping with such a workshop in the topic of GDAL/OGR Swig if someone 
> wants to suggest such -- I think that would also directly help me in my 
> teaching at TKK

Ari,

Well, if you were interested in leading a Geo-perl workshop, I
might be persuaded to assist.  But I'm pretty leery about primary
responsibility.  :-)  It would certainly give me an excuse to get
familiar with perl, my limited perl skills being pretty rusty.

>> Well, this would certainly be an interesting topic for discussion.  WCS
>> is rather a natural match for GDAL and I have had a vague intention to
>> make GDAL able to act as a WCS client for a long time.  But I never had a
>> compelling enough reason to actually make me do it.  
> 
> If I find money that I can use for this purpose, I could give you the 
> reason ;-) BTW, what would be the price tag on something like this?

Well, it depends.  If you had deep pockets and wanted to be sure I did a
good job, I would say $6K+ USD.  But a proof of concept could be done for
$2K USD.

>> WFS, especially
>> WFS-T, would be possible with OGR but I think for the time being it
>> would be better to improve GML support before trying that.  It might
>> make sense to do it for the simplified GML profile (GML3L0?  GML For 
>> Simple
>> Features?).
> 
> This is a topic that I would be interested in attending a workshop. My 
> practical knowledge on WFS or GML is rather slim.

In past years there has been a "setting up OGC services" workshop, I think
oriented to doing so with MapServer mainly.  I don't think there is anything
like an indepth GML workshop on the table.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mlepage at pyxisinnovation.com  Wed Mar 29 15:54:18 2006
From: mlepage at pyxisinnovation.com (Marc A. Lepage)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Identifying spatial data files?
Message-ID: <005801c65372$f275c760$1b00a8c0@PyxisInnovation.local>

Is there a program or library which will allow me to identify an
arbitrary file containing spatial data that I might have? Perhaps also
supply some useful info about the file (telling me what?s in it)?
 
Something similar to Unix ?file? command (which uses magic numbers) or
ImageMagick?s ?identify? command (for images).

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.385 / Virus Database: 268.3.3/296 - Release Date: 3/29/2006
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060329/118add2f/attachment.html
From fwarmerdam at gmail.com  Wed Mar 29 16:53:19 2006
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Identifying spatial data files?
In-Reply-To: <005801c65372$f275c760$1b00a8c0@PyxisInnovation.local>
References: <005801c65372$f275c760$1b00a8c0@PyxisInnovation.local>
Message-ID: <442B01CF.1050608@pobox.com>

Marc A. Lepage wrote:
> Is there a program or library which will allow me to identify an 
> arbitrary file containing spatial data that I might have? Perhaps also 
> supply some useful info about the file (telling me what?s in it)?
> 
> Something similar to Unix ?file? command (which uses magic numbers) or 
> ImageMagick?s ?identify? command (for images).

Marc,

Well, there are gdalinfo and ogrinfo but they are certainly broader
than file and identify, and of course are limited to formats supported
by GDAL and OGR respectively.  Note that file does support some raster and
vector formats but produces very limited detail.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From mlepage at pyxisinnovation.com  Wed Mar 29 17:24:34 2006
From: mlepage at pyxisinnovation.com (Marc A. Lepage)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Identifying spatial data files?
In-Reply-To: <82c245aa0603291404m270507earf4747577d8d100ed@mail.gmail.com>
Message-ID: <006201c6537f$8ea46bd0$1b00a8c0@PyxisInnovation.local>

I'm interested in something a bit more general than GDAL.

For example, I want to be able to programmatically examine a file and
then decide which program/library is best to open and read that file's
spatial data (maybe GDAL, maybe something else).

So I want to be able to just quickly inspect a file and say "oh this is
GRD98 so I'll send it off to this GRD98 driver for reading" or "oh this
is a GeoTiff so I'll send it off to GDAL for reading". Then I send it
off to that driver/library for full opening and reading.

I can't just assume the file's type by extension since it can be
ambiguous.

I could write all this identification code myself, but I figure it's
already done by someone.

Are there MIME types for all these various spatial data files?


-----Original Message-----
From: Lennox Antoine [mailto:lxnyce@gmail.com] 
Sent: Wednesday, March 29, 2006 5:04 PM
To: Marc A. Lepage
Subject: Re: [Gdal-dev] Identifying spatial data files?

If working on windows, I can whip something up graphically pretty
quickly. It sounds like good functionality to have.

-Lennox

On 3/29/06, Marc A. Lepage <mlepage@pyxisinnovation.com> wrote:
>
>
>
> Is there a program or library which will allow me to identify an
arbitrary
> file containing spatial data that I might have? Perhaps also supply
some
> useful info about the file (telling me what's in it)?
>
>
>
> Something similar to Unix "file" command (which uses magic numbers) or
> ImageMagick's "identify" command (for images).
>
>
> --
>  No virus found in this outgoing message.
>  Checked by AVG Free Edition.
>  Version: 7.1.385 / Virus Database: 268.3.3/296 - Release Date:
3/29/2006
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.385 / Virus Database: 268.3.3/296 - Release Date: 3/29/2006
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.385 / Virus Database: 268.3.3/296 - Release Date: 3/29/2006
 


From ealpert at digitalglobe.com  Wed Mar 29 18:14:43 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Problem creating MapInfo tab files using C# (via
	theC	API)
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23354B8CF@COMAIL01.digitalglobe.com>


Frank, this sounds like the problem I had with perl/swig where I needed
to undef the output datasource variable in order for the driver to
properly flush the file.

Sorry if I'm coming into the conversation late but this sounds very much
like the problem.

-e



-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Tuesday, March 21, 2006 3:41 PM
To: Richard Matsunaga
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Problem creating MapInfo tab files using C# (via
theC API)

Richard Matsunaga wrote:
> Hi all,
>  
> I've been building a C# wrapper for OGR (following on the good work on
a 
> GDAL wrapper by Sy Perkins) and am very new to OGR development.
>  
> Everything was going swimmingly until I tried to write to a MapInfo
tab 
> file. Basically, I am trying to write multiple layers, each with some 
> number of polygon objects. All my fields are being written correctly. 
> But for some reason, only the 2nd layer that I create is good. If I 
> create only one layer, it is corrupt. All layers other than the 2nd 
> layer are corrupt.
>  
> How do I define corrupt? The files open in MapInfo, but the polygons 
> have invalid coordinates and certain actions within MapInfo cause 
> crashes (such as Export). The fields are all correct. If you check the

> projection in table maintenance, MapInfo cannot find the projection
for 
> all layers except the 2nd.

Richard,

This might be worth taking up on the mitab list - this issue sounds
vaguely
familiar.  I wonder if it might already have been fixed. Are you using
GDAL CVS?

If you can boil down a small C program that demonstrates the problem
that
would be helpful.  I don't have any mapinfo software myself though, so
it
is hard for me to test files that cause it problems.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF,
http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From craig.miller at spatialminds.com  Wed Mar 29 20:19:04 2006
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] RE: [postgis-users] Adding to Spatial Ref Sys table
In-Reply-To: <442B2F93.1040502@pobox.com>
Message-ID: <000e01c65397$efa59090$0201a8c0@vaio>

Note:  This thread started on the postgis list.  I moved it here since this
tangent is gdal specific.

Frank,

It appears the the pg driver uses the wkt definition primarily in the
FetchSRSId method.  It would be trivial to just add the proj definition
along with the wkt definition in this section.  I'll take a look at it
tomorrow, add it, and submit the code along with the bug.

Thanks for the quick reply btw.  :-)
Craig

 

-----Original Message-----
From: postgis-users-bounces@postgis.refractions.net
[mailto:postgis-users-bounces@postgis.refractions.net] On Behalf Of Frank
Warmerdam
Sent: Wednesday, March 29, 2006 5:09 PM
To: PostGIS Users Discussion
Subject: Re: [postgis-users] Adding to Spatial Ref Sys table

Craig Miller wrote:
> What is the "correct" way to add SRS definitions to the 
> spatial_ref_sys table.
> 
> I noticed that ogr only inserts the srid and srtext fields.  Are the 
> other fields required?  If they aren't required what is the proj4text 
> field used for.  Does it just improve performance by removing the need 
> to determine the
> proj4 string from the wkt string on the fly?

Craig,

As far as I know the WKT is just informative, and the proj4text is what is
actually used.  The OGR PG driver should be inserting the proj4text.
Without it the SRS creation option in the OGR PG driver is basically
useless.

If you file a bug on this, I'll try and get it fixed.

> I'm assuming that by populating the auth_name and auth_srid columns 
> that I can essentially define a "shortcut" to my any new definitions 
> that are created.  E.g. I could specify SPATIALMINDS as the authority, 
> and start numbering SRS definitions at 1 and refer to it as 
> SPATIALMINDS:1 just like I refer to EPSG:4329 in various places.

My take on this is that you should leave the auth_name and auth_srid blank
if the coordinate system isn't from EPSG or another standard authoritative
source.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org

_______________________________________________
postgis-users mailing list
postgis-users@postgis.refractions.net
http://postgis.refractions.net/mailman/listinfo/postgis-users



From warmerdam at pobox.com  Wed Mar 29 20:45:31 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] RE: [postgis-users] Adding to Spatial Ref Sys table
In-Reply-To: <000e01c65397$efa59090$0201a8c0@vaio>
References: <000e01c65397$efa59090$0201a8c0@vaio>
Message-ID: <442B383B.6060107@pobox.com>

Craig Miller wrote:
> Note:  This thread started on the postgis list.  I moved it here since this
> tangent is gdal specific.
>
> Frank,
> 
> It appears the the pg driver uses the wkt definition primarily in the
> FetchSRSId method.  It would be trivial to just add the proj definition
> along with the wkt definition in this section.  I'll take a look at it
> tomorrow, add it, and submit the code along with the bug.

Even better!

You are correct that the WKT as it is, can still be of use to OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From ari.jolma at tkk.fi  Thu Mar 30 00:52:14 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Re: Geo::Raster Perl Module
In-Reply-To: <442B0CC7.5000109@email.arizona.edu>
References: <442B0CC7.5000109@email.arizona.edu>
Message-ID: <442B720E.8060708@tkk.fi>

Averill Cate, Jr. kirjoitti:
> Hi,
>
> Sorry to bother you with this type of question, but I am really 
> interesting in trying the perl Geo::Raster module.  I am running 
> cygwin under Windox XP Pro.  When I try to run perl on Makefile.PL I 
> only get the following message:
>
> "Following required modules are missing: gdalconst gdal"
>
> I've spent quite a bit of time trying to figure out how to get gdal 
> and/or gdalconst install.  Do you know of any detailed instruction on 
> how to fix this problem?   Thank you for your time.

Yes, Geo::Raster needs gdal and libral, and libral needs GDAL. I believe 
there must be people (on these cc'd lists) that have installed GDAL and 
also its Swig bindings on Cygwin. I believe there must be general 
information about how to install Perl modules on Cygwin but I don't know 
if there is specific information for these libraries available on the 
net. I'd be happy to post such.

Regards,

Ari Jolma

>
> A. Cate
>


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From nbarker at rsinc.com  Thu Mar 30 08:22:26 2006
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] gdal_translate image grow
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E8131802@bath.uk.rsinc.com>

Hi,

 

I am using gdal_translate as the 'engine' behind mod_python as a very
simple WMS (so that I can prototype a few ideas before putting them into
MapServer), everything works fine until I specify a BBOX such that the
extents are outside that of the requested image.  This corresponds to
the -projwin option of gdal_translate, executing this I then get an
error "-srcwin falls outside of raster size".

 

Is there a way to grow the output image and fill in the missing data?

 

So for example

 

gdal_translate -not_strict -OF PNG -a_nodata 0 -projwin -180 90 180 -90
-outsize 836 654 inputimage outputimage

 

would give an output image with world extents, and somewhere in this
image would be the inputimage

 

Alternatively is there a way to do this with the python bindings or any
other utility.  I like gdal_translate since it does the conversion and
sampling in one go!

 

thanks 

 

Norman

 

 

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Luc Van Asch
Sent: Wednesday, March 15, 2006 8:05 AM
To: gdal-dev@lists.maptools.org
Cc: Ouns Kissiyar; Joeri Robbrecht; Bart Cosyn
Subject: [Gdal-dev] GDAL and Intergraph .cmp files

 

Dear List,

 

We are using Integraph software (Geomedia, Orthopro...) in our
organization.

Intergraph uses by default a compressed raster file format for it's
raster data (extension .cmp).

 

Does anyone knows if there's have been done some work to support this
format in de GDAL 

environment?

 

Thank you all in advance for any tips or help,

 

Luc

_______________________________________________ 
Luc Van Asch 
Informaticus 
Lijn Geografische Data Infrastructuur - Faciliteiten 

VLM-Ondersteunend Centrum GIS Vlaanderen 
Gebroeders Van Eyckstraat 16
9000 Gent
Alg. tel: 09/261.52.00
Direct tel: 09/261.52.15 
Mobile: 0499/258025 
fax: 09/261.52.99 
Mailto:luc.vanasch@vlm.be <blocked::blocked::mailto:luc.vanasch@vlm.be>

http://www.gisvlaanderen.be
<blocked::blocked::http://www.gisvlaanderen.be/>  

 

 

-------------------------------------------------------------
VLM disclaimer :
http://www.vlm.be/Help/disclaimer.htm

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060330/6e22d17b/attachment.html
From warmerdam at pobox.com  Thu Mar 30 09:10:58 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] gdal_translate image grow
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E8131802@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E8131802@bath.uk.rsinc.com>
Message-ID: <442BE6F2.7090309@pobox.com>

Norman Barker wrote:
> Hi,
>
> I am using gdal_translate as the ?engine? behind mod_python as a very 
> simple WMS (so that I can prototype a few ideas before putting them into 
> MapServer), everything works fine until I specify a BBOX such that the 
> extents are outside that of the requested image.  This corresponds to 
> the ?projwin option of gdal_translate, executing this I then get an 
> error ??srcwin falls outside of raster size?.
> 
> Is there a way to grow the output image and fill in the missing data?
> 
> So for example  
> 
> gdal_translate -not_strict -OF PNG -a_nodata 0 -projwin -180 90 180 -90 
> -outsize 836 654 inputimage outputimage
> 
> would give an output image with world extents, and somewhere in this 
> image would be the inputimage
> 
> Alternatively is there a way to do this with the python bindings or any 
> other utility.  I like gdal_translate since it does the conversion and 
> sampling in one go!

Norman,

If you were willing to limit yourself to directly creatable formats,
you could use gdalwarp to do this.  It supports an output file with a
larger region than the input.  Alternatively a few modifications could
be made to gdal_translate to support a projwin (or srcwin) that is larger
than the source.

Another approach would be for you to prepare a VRT file as input to
gdal_translate in your VRT script that has the characteristics you want
relative to the original file.  When you subwindow or do other such
transformations in gdal_translate it actually creates a "VRT" image of
the desired output file and uses that for input to translation.  To get
an idea what these VRTs look like you can even do a gdal_translate to
VRT format and you will get the VRT skeleton it created.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From zhang at aero.und.edu  Thu Mar 30 13:34:21 2006
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] pixel spacing of gdal2xyz.py
Message-ID: <442C24AD.6060705@aero.und.edu>

Dear list members,

I need your help!

I'm using gdal2xyz.py to extract data from Landsat images into an ASCII 
file in a format of x, y, data1, data2, ...
The requirement is to output longitude (as x) and latitude (as y) and 
the original image is in non-geographic projection (e.g., Lambert, UTM, 
etc). What I did was to
1) use gdal utility to convert the image into geographic project (lat 
and lon)
2) run gdal2xyz.py to extract the data.

The problem I'm having is that the pixel spacing is not 30 m by 30 m (x 
spacing shorter than and y spacing larger than 30 m). The original image 
pixel size is 30x30 and the grid data extracted using ArcGIS is also 
30x30. My questions are 1) what could be wrong; and 2) are there other 
better ways of doing this

Thanks
Xiaodong

-- 
____________________________________________

Xiaodong Zhang
Department of Earth System Science & Policy
Clifford Hall, Box 9011
University of North Dakota
Grand Forks, ND 58202-9011
Tel. (701)777-6087 | Fax. (701)777-2940
E-mail: zhang@aero.und.edu
_____________________________________________


From miscx at spray.se  Thu Mar 30 14:49:54 2006
From: miscx at spray.se (Mikael =?ISO-8859-1?Q?Schr=F6der?=)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Error compiling gdal with MrSid support in ubuntu linux
In-Reply-To: <442A9BC4.9080900@pobox.com>
References: <1143632496.11618.11.camel@localhost.localdomain>
	<442A9BC4.9080900@pobox.com>
Message-ID: <1143748194.11161.44.camel@localhost.localdomain>

Hi Frank (sorry for double posting, i missed the cc to the gdal-list)
Thank you for your tip regarding CXX. After some googling I found the
right packages to back it up. 
I installed the following packages (from warty):
cpp-3.2_3.2.3-9_i386.deb
g++-3.2_3.2.3-9_i386.deb
gcc-3.2-base_3.2.3-9_i386.deb
gcc-3.2_3.2.3-9_i386.deb
libstdc++5-dev_3.2.3-9_i386.deb

And after that used the following two commands to execute the right
version of the compiler:
$ export CXX=/usr/bin/g++-3.2 PATH=/usr/bin/gcc-3.2:$PATH
CC=/usr/bin/gcc-3.2 
$ CXX=/usr/bin/g++-3.2 PATH=/usr/bin/gcc-3.2:$PATH CC=/usr/bin/gcc-3.2
dpkg-buildpackage -us -uc -rfakeroot

This worked out fine but I found that I also needed to  compile
"libgeos" withe the same compiler, to get "libgdal" with ogr working.
Unfortunately I did not manage to compile gdal with both MrSid and ECW
with gcc 3.2. So I disabled ECW for now... (any tips on this?)
When everything was compiled and installed I run:
$ gdalinfo --formats     to se if my newly installed packages were
functioning. Unfortunately I got the same error message as before the
installation, as me and the wrong one as root (se below). So I suppose
that my previous cvs-source-compiled "gdal" that I manage to install but
never got functioning is now somehow disturbing my system.
It seems my system is not responding on the gdal-package installation,
so how do I disable / uninstall my previously cvs-source-compiled and
installed "gdal" ?
I found no: "make uninstall". Or how do I change the system settings so
it will use my now correct libgdal-package instead of the source
compiled one?
Below you find my current system's response to "gdalinfo --formats" both
as me and as root (with the new MrSid enabled libgdal-package installed
and "active"). 
Lots of questions.... 
/Best Regards, Mikael

-----------------alt 1 --me------------------------------
micke@ubuntu32:~$ gdalinfo --formats
*** glibc detected *** malloc(): memory corruption: 0x080621e8 ***
Interrupted (SIGABRT)

-------------------alt 2 --root --------------------------
root@ubuntu32:~# gdalinfo --formats
Supported Formats:
  VRT (rw+): Virtual Raster
  GTiff (rw+): GeoTIFF
  NITF (rw+): National Imagery Transmission Format
  HFA (rw+): Erdas Imagine Images (.img)
  SAR_CEOS (ro): CEOS SAR Image
  CEOS (ro): CEOS Image
  ELAS (rw+): ELAS
  AIG (ro): Arc/Info Binary Grid
  AAIGrid (rw): Arc/Info ASCII Grid
  SDTS (ro): SDTS Raster
  DTED (rw): DTED Elevation Raster
  PNG (rw): Portable Network Graphics
  JPEG (rw): JPEG JFIF
  MEM (rw+): In Memory Raster
  JDEM (ro): Japanese DEM (.mem)
  GIF (rw): Graphics Interchange Format (.gif)
  ESAT (ro): Envisat Image Format
  FITS (rw+): Flexible Image Transport System
  BSB (ro): Maptech BSB Nautical Charts
  XPM (rw): X11 PixMap Format
  BMP (rw+): MS Windows Device Independent Bitmap
  AirSAR (ro): AirSAR Polarimetric Image
  RS2 (ro): RadarSat 2 XML Product
  PCIDSK (rw+): PCIDSK Database File
  PCRaster (rw): PCRaster Raster File
  ILWIS (rw+): ILWIS Raster Map
  RIK (ro): Swedish Grid RIK (.rik)
  SGI (ro): SGI Image File Format 1.0
  Leveller (ro): Leveller heightfield
  GMT (rw): GMT NetCDF Grid Format
  netCDF (ro): network Common Data Format
  HDF4 (ro): Hierarchical Data Format Release 4
  HDF4Image (rw+): HDF4 Dataset
  PNM (rw+): Portable Pixmap Format (netpbm)
  DOQ1 (ro): USGS DOQ (Old Style)
  DOQ2 (ro): USGS DOQ (New Style)
  ENVI (rw+): ENVI .hdr Labelled
  EHdr (rw+): ESRI .hdr Labelled
  PAux (rw+): PCI .aux Labelled
  MFF (rw+): Vexcel MFF Raster
  MFF2 (rw+): Vexcel MFF2 (HKV) Raster
  FujiBAS (ro): Fuji BAS Scanner Image
  GSC (ro): GSC Geogrid
  FAST (ro): EOSAT FAST Format
  BT (rw+): VTP .bt (Binary Terrain) 1.3 Format
  LAN (ro): Erdas .LAN/.GIS
  CPG (ro): Convair PolGASP
  IDA (rw+): Image Data and Analysis
  NDF (ro): NLAPS Data Format
  DIPEx (ro): DIPEx
  JPEG2000 (rw): JPEG-2000 part 1 (ISO/IEC 15444-1)
  L1B (ro): NOAA Polar Orbiter Level 1b Data Set
  FIT (rw): FIT Image
  RMF (rw+): Raster Matrix Format
  USGSDEM (rw): USGS Optional ASCII DEM (and CDED)
  GXF (ro): GeoSoft Grid Exchange Format
  GRASS (ro): GRASS Database Rasters (5.7+)


ons 2006-03-29 klockan 09:37 -0500 skrev Frank Warmerdam:


> Mikael,
> 
> I don't know what dpkg does, but I would guess it is somehow not honouring
> your environment.  lt_platforms.h checks for gcc 2 and 3, so I would assume
> things are still picking up gcc 4 for some reason.
> 
> You might trying setting CXX instead of (or in addition to) CC since this
> is a c++ project.
> 
> I trust any package you build would only be for internal use, right?  There
> are non-trivial requirements to redistribute Lizardtech libraries (even if
> you are putting it in non-free).
> 
> Best regards,



ons 2006-03-29 klockan 09:37 -0500 skrev Frank Warmerdam:

> Mikael Schr?der wrote:
> > Hello
> > I have been trying to add support for MrSid (but also ecw) to the 
> > libgdal1c2(a) package in ubuntu breezy (I have also tried to compile 
> > directly from source).
> > But I get the following error message:
> > 
> > In file included from 
> > /usr/local/MrSid_GeoExpressSDK/include/support/lt_types.h:28,
> >                  from mrsiddataset.cpp:117:
> > /usr/local/MrSid_GeoExpressSDK/include/support/lt_platform.h:61:8: 
> > error: #error PLATFORM ERROR: Unsupported version of GCC
> > make[3]: *** [../o/mrsiddataset.o] Error 1
> > make[3]: Leaving directory 
> > `/home/micke/source/gdal_dpkg_t4/gdal-1.2.6/frmts/mrsid'
> > make[2]: *** [mrsid-install-obj] Error 2
> > make[2]: Leaving directory 
> > `/home/micke/source/gdal_dpkg_t4/gdal-1.2.6/frmts'
> > make[1]: *** [frmts-target] Error 2
> > make[1]: Leaving directory `/home/micke/source/gdal_dpkg_t4/gdal-1.2.6'
> > make: *** [build-stamp] Error 2
> > 
> > I have installed gcc 3.2.3 from Warty and downloaded the corresponding 
> > dsdk from Lizardtech's developer-site.
> > Before i run dpkg I execute (as root):
> > $ export PATH=/usr/bin/gcc-3.2:$PATH CC=/usr/bin/gcc-3.2          
> > $ PATH=/usr/bin/gcc-3.2:$PATH CC=/usr/bin/gcc-3.2 dpkg-buildpackage -us 
> > -uc -rfakeroot
> > 
> > I have also linked gcc to gcc-3.2 in /usr/bin
> > What am i doing wrong?
> 


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060330/cf64f982/attachment.html
From diegowald at yahoo.com.ar  Thu Mar 30 15:42:50 2006
From: diegowald at yahoo.com.ar (Diego Ignacio Wald)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] GDAL and wxWidgets
Message-ID: <013c01c6543a$84b1a9b0$0201a8c0@toronto>

Hi all,

I am starting to study gdal and I would like to get some help regarding drawing images and vectors using wxwidgets library. 

Does anybody have some experience regarding this? Where can I get documentation about this?

Thanks in advance for your help.

Regards,

Diego Wald
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060330/62e0e338/attachment.html
From ILucena at clarku.edu  Thu Mar 30 15:54:59 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] GDAL and wxWidgets
Message-ID: <6FD7C9DB26540B42A1207C69BF92D455C339FA@Iris.ad.clarku.edu>

Diego,

 

wxWindows is now wxWidgets (www.wxwidgets.org).

 

I worked it wxWindows a long time ago (1995 I guess) and it is great. 

 

It is a good choice for portable C/C++ development and I am planning to
take a look in the latest version as soon as possible.

 

The drawing functions resembles a lot XWindows and the Motif Toolkit, it
probably has changed a lot. Do not mistake it with the Windows versions
of Motif. It's better.

 

The good news is that you can also use the Python extension and BOA, the
IDE.

 

Good luck,

 

Lucena

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Diego Ignacio
Wald
Sent: Thursday, March 30, 2006 3:43 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] GDAL and wxWidgets

 

Hi all,

 

I am starting to study gdal and I would like to get some help regarding
drawing images and vectors using wxwidgets library. 

 

Does anybody have some experience regarding this? Where can I get
documentation about this?

 

Thanks in advance for your help.

 

Regards,

 

Diego Wald

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060330/bbf581ae/attachment.html
From warmerdam at pobox.com  Thu Mar 30 16:47:38 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Error compiling gdal with MrSid support in ubuntu linux
In-Reply-To: <1143748194.11161.44.camel@localhost.localdomain>
References: <1143632496.11618.11.camel@localhost.localdomain>	
	<442A9BC4.9080900@pobox.com>
	<1143748194.11161.44.camel@localhost.localdomain>
Message-ID: <442C51FA.8040106@pobox.com>

Mikael Schr?der wrote:
> This worked out fine but I found that I also needed to  compile 
> "libgeos" withe the same compiler, to get "libgdal" with ogr working.

Mikael,

Right, GEOS and other C++ packages will all need to be compiled with
roughly the same version of gcc.

> Unfortunately I did not manage to compile gdal with both MrSid and ECW 
> with gcc 3.2. So I disabled ECW for now... (any tips on this?)

Well, I've built the ECW SDK with gcc 3.2 without problems, so you
will need to be more specific if you need help.

> When everything was compiled and installed I run:
> $ gdalinfo --formats     to se if my newly installed packages were 
> functioning. Unfortunately I got the same error message as before the 
> installation, as me and the wrong one as root (se below). So I suppose 
> that my previous cvs-source-compiled "gdal" that I manage to install but 
> never got functioning is now somehow disturbing my system.
> It seems my system is not responding on the gdal-package installation, 
> so how do I disable / uninstall my previously cvs-source-compiled and 
> installed "gdal" ?
> I found no: "make uninstall". Or how do I change the system settings so 
> it will use my now correct libgdal-package instead of the source 
> compiled one?

You would basically need to remove it manually or install over it.

eg.
rm /usr/local/lib/libgdal*

> Below you find my current system's response to "gdalinfo --formats" both 
> as me and as root (with the new MrSid enabled libgdal-package installed 
> and "active").
> Lots of questions....

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From miscx at spray.se  Thu Mar 30 17:04:52 2006
From: miscx at spray.se (Mikael =?ISO-8859-1?Q?Schr=F6der?=)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Error compiling gdal with MrSid support in ubuntu linux
In-Reply-To: <442C51FA.8040106@pobox.com>
References: <1143632496.11618.11.camel@localhost.localdomain>
	<442A9BC4.9080900@pobox.com>
	<1143748194.11161.44.camel@localhost.localdomain>
	<442C51FA.8040106@pobox.com>
Message-ID: <1143756292.24990.7.camel@localhost.localdomain>

Perfekt!
Thank you!!! It finally worked! 
I will give the ecw-problem a try another day/night... (now that I got
MrSid working) 
With "other C++ packages" you refer only to packages that depend upon
libgeos/libgdal right. like Qgis, mapserver etc.
What about PostGIS ??
/Best Regards, Mikael

tor 2006-03-30 klockan 16:47 -0500 skrev Frank Warmerdam:

> Mikael Schr?der wrote:
> > This worked out fine but I found that I also needed to  compile 
> > "libgeos" withe the same compiler, to get "libgdal" with ogr working.
> 
> Mikael,
> 
> Right, GEOS and other C++ packages will all need to be compiled with
> roughly the same version of gcc.
> 
> > Unfortunately I did not manage to compile gdal with both MrSid and ECW 
> > with gcc 3.2. So I disabled ECW for now... (any tips on this?)
> 
> Well, I've built the ECW SDK with gcc 3.2 without problems, so you
> will need to be more specific if you need help.
> 
> > When everything was compiled and installed I run:
> > $ gdalinfo --formats     to se if my newly installed packages were 
> > functioning. Unfortunately I got the same error message as before the 
> > installation, as me and the wrong one as root (se below). So I suppose 
> > that my previous cvs-source-compiled "gdal" that I manage to install but 
> > never got functioning is now somehow disturbing my system.
> > It seems my system is not responding on the gdal-package installation, 
> > so how do I disable / uninstall my previously cvs-source-compiled and 
> > installed "gdal" ?
> > I found no: "make uninstall". Or how do I change the system settings so 
> > it will use my now correct libgdal-package instead of the source 
> > compiled one?
> 
> You would basically need to remove it manually or install over it.
> 
> eg.
> rm /usr/local/lib/libgdal*
> 
> > Below you find my current system's response to "gdalinfo --formats" both 
> > as me and as root (with the new MrSid enabled libgdal-package installed 
> > and "active").
> > Lots of questions....
> 
> Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060331/43dda1e9/attachment.html
From warmerdam at pobox.com  Thu Mar 30 17:09:20 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Error compiling gdal with MrSid support in ubuntu linux
In-Reply-To: <1143756292.24990.7.camel@localhost.localdomain>
References: <1143632496.11618.11.camel@localhost.localdomain>	
	<442A9BC4.9080900@pobox.com>	
	<1143748194.11161.44.camel@localhost.localdomain>	
	<442C51FA.8040106@pobox.com>
	<1143756292.24990.7.camel@localhost.localdomain>
Message-ID: <442C5710.5000906@pobox.com>

Mikael Schr?der wrote:
> Perfekt!
> Thank you!!! It finally worked!
> I will give the ecw-problem a try another day/night... (now that I got 
> MrSid working)
> With "other C++ packages" you refer only to packages that depend upon 
> libgeos/libgdal right. like Qgis, mapserver etc.
> What about PostGIS ??

Mikael,

I meant any other library for which GDAL, mapserver, etc use a C++
interface.  In your context the obvious candidates are mrsid, ecw, geos,
gdal/ogr, mapserver and gqis.  But there might be other packages that could
be an issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


From miscx at spray.se  Thu Mar 30 17:42:49 2006
From: miscx at spray.se (Mikael =?ISO-8859-1?Q?Schr=F6der?=)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] Error compiling gdal with MrSid support in ubuntu linux
In-Reply-To: <442C5710.5000906@pobox.com>
References: <1143632496.11618.11.camel@localhost.localdomain>
	<442A9BC4.9080900@pobox.com>
	<1143748194.11161.44.camel@localhost.localdomain>
	<442C51FA.8040106@pobox.com>
	<1143756292.24990.7.camel@localhost.localdomain>
	<442C5710.5000906@pobox.com>
Message-ID: <1143758569.24990.10.camel@localhost.localdomain>

Ok, Thank you once more Frank!
/Best Regards, Mikael


tor 2006-03-30 klockan 17:09 -0500 skrev Frank Warmerdam:

> Mikael Schr?der wrote:
> > Perfekt!
> > Thank you!!! It finally worked!
> > I will give the ecw-problem a try another day/night... (now that I got 
> > MrSid working)
> > With "other C++ packages" you refer only to packages that depend upon 
> > libgeos/libgdal right. like Qgis, mapserver etc.
> > What about PostGIS ??
> 
> Mikael,
> 
> I meant any other library for which GDAL, mapserver, etc use a C++
> interface.  In your context the obvious candidates are mrsid, ecw, geos,
> gdal/ogr, mapserver and gqis.  But there might be other packages that could
> be an issue.
> 
> Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060331/66236d7e/attachment.html
From Kevin.Mote at pnl.gov  Fri Mar 31 22:44:07 2006
From: Kevin.Mote at pnl.gov (Mote, Kevin D)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] SetStatePlane newbie question
Message-ID: <CD9B340B507DD644AD45EF6B1B17F6DC046E0F2C@pnlmse26.pnl.gov>

 
I'm new to OGR/GDAL. I've been tasked with creating a simple module that
will transform State Plane coordinates to lat/lon.
 
This code is my first stab at it:

	#include <gdal.h>
	#include <gdal_priv.h> 
	#include <ogr_api.h>
	#include <ogr_spatialref.h>

	//Perform our inverse conversion:
	OGRSpatialReference sourceSRS;
	OGRSpatialReference destinationSRS;
	OGRCoordinateTransformation* pTransform;

	OGRErr err;
	err = sourceSRS.SetStatePlane(3102, true);
	ASSERT( err == OGRERR_NONE );
	err = destinationSRS.SetWellKnownGeogCS("WGS84"); 
	ASSERT( err == OGRERR_NONE );

	pTransform =
OGRCreateCoordinateTransformation(&sourceSRS,&destinationSRS);
	if (pTransform != NULL) 
	{
		double x = (double)x_value;	//values from elsewhere
		double y = (double)y_value;
		OGRErr err = pTransform->Transform(1, &x, &y, NULL);
		if (err != OGRERR_NONE)
			TRACE("%s\n", CPLGetLastErrorMsg());
		
		TRACE("Transform Result: %f %f  \n", x, y);
		delete pTransform;    
	}


Problem: The SetStatePlane() call is returning an error code of 6
(OGRERR_FAILURE).
What am I doing wrong? (I'm sure there's a number of things!)

Thanks in advance for any advice you might have!

Kevin 
Starlight Development Team, 
Computational & Information Sciences Directorate, 
Pacific Northwest National Laboratory 
(509) 372-4113 




From warmerdam at pobox.com  Fri Mar 31 23:20:09 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:04 2007
Subject: [Gdal-dev] SetStatePlane newbie question
In-Reply-To: <CD9B340B507DD644AD45EF6B1B17F6DC046E0F2C@pnlmse26.pnl.gov>
References: <CD9B340B507DD644AD45EF6B1B17F6DC046E0F2C@pnlmse26.pnl.gov>
Message-ID: <442DFF79.8000202@pobox.com>

Mote, Kevin D wrote:
>  
> I'm new to OGR/GDAL. I've been tasked with creating a simple module that
> will transform State Plane coordinates to lat/lon.
>  
> This code is my first stab at it:
> 
> 	#include <gdal.h>
> 	#include <gdal_priv.h> 
> 	#include <ogr_api.h>
> 	#include <ogr_spatialref.h>
> 
> 	//Perform our inverse conversion:
> 	OGRSpatialReference sourceSRS;
> 	OGRSpatialReference destinationSRS;
> 	OGRCoordinateTransformation* pTransform;
> 
> 	OGRErr err;
> 	err = sourceSRS.SetStatePlane(3102, true);
...
> Problem: The SetStatePlane() call is returning an error code of 6
> (OGRERR_FAILURE).
> What am I doing wrong? (I'm sure there's a number of things!)

Kevin,

The code looks fine on quick inspection.   I suspect there is a
problem finding the EPSG and other support files.  The GDAL_DATA
environment is normally used to accomplish this and it should
point to the directory containing files like pcs.csv, and
stateplane.csv.

You can also set this within the code itself if you need to.
One way would be the CPLSetConfigOption("GDAL_DATA","/usr/local/share/gdal")
for instance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGF, http://osgeo.org


