From Moses.Gone at t-systems.com  Tue Apr  1 00:31:13 2014
From: Moses.Gone at t-systems.com (Moses.Gone at t-systems.com)
Date: Tue, 1 Apr 2014 09:31:13 +0200
Subject: [gdal-dev] Weird issue when running gdaltranslate
Message-ID: <2D55B4FBCD59D045AC382D3F65435B790385CDDAE6E0@HE101453.emea1.cds.t-internal.com>

Hi everyone,
I am getting this weird error when I try to convert a vrt to a tif.

Some context: We are tiling a set of tifs(in a list file). First we generate a vrt from the list. Then we assign a projection on the generated vrt using gdaltranslate. We then clip the output using gdalwarp applying a clipping at the same time to the desired BBOX(This is achieved using the -te option). In the warp operation we also specify the target SRS(using the -t_srs option). Lastly we tile using our customized gdal_retile.py. All is fine with the projection and clipping, but the resultant tiles are empty-no data just white images.

So I tried to backtrack my steps, to check at what point is the data being lost. Generation of the VRT works fine. However, performing gdaltranslate to assign the source SRS on the VRT result into this error:

bash-2.05$ gdal_translate -of GTiff ffm_dtk200_wdd.vrt test.tif
Input file size is 2147483647, 2147483647
0ERROR 1: GTiffCreateCopy():No space for strip arrays
ERROR 1: MissingRequired:TIFF directory is missing required "StripOffsets" field
ERROR 1: MissingRequired:TIFF directory is missing required "StripOffsets" field

I tried to also convert to AAIGrid format, thinking that something is wrong converting to Tiff, but also got this error:

bash-2.05$ gdal_translate -of  AAIGrid ffm_dtk200_wdd.vrt test3
Input file size is 2147483647, 2147483647
0ERROR 1: CPLMalloc(-4): Silly size requested.

ERROR 1: ffm_dtk200_wdd.vrt, band 1: The buffer into which the data should be read is null
Segmentation Fault

Other tiling jobs following a similar method, with different source data works fine though. Could the problem be with the data? If so how comes it worked before?

Regards,
Moses

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140401/65511f32/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Apr  1 04:08:23 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 1 Apr 2014 11:08:23 +0000 (UTC)
Subject: [gdal-dev] Weird issue when running gdaltranslate
References: <2D55B4FBCD59D045AC382D3F65435B790385CDDAE6E0@HE101453.emea1.cds.t-internal.com>
Message-ID: <loom.20140401T125757-154@post.gmane.org>

 <Moses.Gone <at> t-systems.com> writes:

> 
> 
> 
> Hi everyone,
> I am getting this weird error when I try to convert a vrt to a tif. 
> ?
> Some context: We are tiling a set of tifs(in a list file). First we
generate a vrt from the list. Then we assign a projection on the generated
vrt using gdaltranslate. We then clip the output using gdalwarp applying a
clipping at the same time to the desired
> BBOX(This is achieved using the ?te option). In the warp operation we also
specify the target SRS(using the ?t_srs option). Lastly we tile using our
customized gdal_retile.py. All is fine with the projection and clipping, but
the resultant tiles are empty-no
> data just white images.
> ?
> So I tried to backtrack my steps, to check at what point is the data being
lost. Generation of the VRT works fine. However, performing gdaltranslate to
assign the source SRS on the VRT result into this error:
> ?
> bash-2.05$ gdal_translate -of GTiff ffm_dtk200_wdd.vrt test.tif
> Input file size is 2147483647, 2147483647
> 0ERROR 1: GTiffCreateCopy():No space for strip arrays
> ERROR 1: MissingRequired:TIFF directory is missing required "StripOffsets"
field
> ERROR 1: MissingRequired:TIFF directory is missing required "StripOffsets"
field
> ?
> I tried to also convert to AAIGrid format, thinking that something is
wrong converting to Tiff, but also got this error:
> ?
> bash-2.05$ gdal_translate -of? AAIGrid ffm_dtk200_wdd.vrt test3
> Input file size is 2147483647, 2147483647
> 0ERROR 1: CPLMalloc(-4): Silly size requested.
> ?
> ERROR 1: ffm_dtk200_wdd.vrt, band 1: The buffer into which the data should
be read is null
> Segmentation Fault
> ?
> Other tiling jobs following a similar method, with different source data
works fine though. Could the problem be with the data? If so how comes it
worked before?

Hi,

Perhaps adding -co BIGTIFF could help. Much better though would be better to
skip the whole step of creating a temporary tiff file because it is slow and
unnecessary.

Use buildvrt with -a_srs and resulting vrt contains projection. Even if it
is missing you should be able to tell it directly for gdalwarp as 

gdalwarp -s_srs epsg:xxx -t_srs epsg:yyyy -te .... input.vrt output.tif


-Jukka Rahkonen-


From even.rouault at mines-paris.org  Tue Apr  1 04:57:30 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 01 Apr 2014 13:57:30 +0200
Subject: [gdal-dev] Weird issue when running gdaltranslate
In-Reply-To: <loom.20140401T125757-154@post.gmane.org>
References: <2D55B4FBCD59D045AC382D3F65435B790385CDDAE6E0@HE101453.emea1.cds.t-internal.com>
	<loom.20140401T125757-154@post.gmane.org>
Message-ID: <1396353450.533aa9aa9e0c5@imp.free.fr>

Moses,

Hum, your VRT is 2147483647 x 2147483647 large, which is the largest possible
raster that GDAL can handle in theory ! Something must have gone seriously wrong
when building it. I suspect that some input files have weird or inconsistant
georeferencing causing the extent to go to those crazy values.
The GeoTIFF driver fails gracefully with that. Whereas the AAIGRID driver
crashes.
But the original issue is really in your VRT file.

Even

>  <Moses.Gone <at> t-systems.com> writes:
>
> >
> >
> >
> > Hi everyone,
> > I am getting this weird error when I try to convert a vrt to a tif.
> > ??
> > Some context: We are tiling a set of tifs(in a list file). First we
> generate a vrt from the list. Then we assign a projection on the generated
> vrt using gdaltranslate. We then clip the output using gdalwarp applying a
> clipping at the same time to the desired
> > BBOX(This is achieved using the ???te option). In the warp operation we
> also
> specify the target SRS(using the ???t_srs option). Lastly we tile using our
> customized gdal_retile.py. All is fine with the projection and clipping, but
> the resultant tiles are empty-no
> > data just white images.
> > ??
> > So I tried to backtrack my steps, to check at what point is the data being
> lost. Generation of the VRT works fine. However, performing gdaltranslate to
> assign the source SRS on the VRT result into this error:
> > ??
> > bash-2.05$ gdal_translate -of GTiff ffm_dtk200_wdd.vrt test.tif
> > Input file size is 2147483647, 2147483647
> > 0ERROR 1: GTiffCreateCopy():No space for strip arrays
> > ERROR 1: MissingRequired:TIFF directory is missing required "StripOffsets"
> field
> > ERROR 1: MissingRequired:TIFF directory is missing required "StripOffsets"
> field
> > ??
> > I tried to also convert to AAIGrid format, thinking that something is
> wrong converting to Tiff, but also got this error:
> > ??
> > bash-2.05$ gdal_translate -of?? AAIGrid ffm_dtk200_wdd.vrt test3
> > Input file size is 2147483647, 2147483647
> > 0ERROR 1: CPLMalloc(-4): Silly size requested.
> > ??
> > ERROR 1: ffm_dtk200_wdd.vrt, band 1: The buffer into which the data should
> be read is null
> > Segmentation Fault
> > ??
> > Other tiling jobs following a similar method, with different source data
> works fine though. Could the problem be with the data? If so how comes it
> worked before?
>
> Hi,
>
> Perhaps adding -co BIGTIFF could help. Much better though would be better to
> skip the whole step of creating a temporary tiff file because it is slow and
> unnecessary.
>
> Use buildvrt with -a_srs and resulting vrt contains projection. Even if it
> is missing you should be able to tell it directly for gdalwarp as
>
> gdalwarp -s_srs epsg:xxx -t_srs epsg:yyyy -te .... input.vrt output.tif
>
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From doug_newcomb at fws.gov  Tue Apr  1 05:26:58 2014
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Tue, 1 Apr 2014 08:26:58 -0400
Subject: [gdal-dev] Weird issue when running gdaltranslate
In-Reply-To: <1396353450.533aa9aa9e0c5@imp.free.fr>
References: <2D55B4FBCD59D045AC382D3F65435B790385CDDAE6E0@HE101453.emea1.cds.t-internal.com>
	<loom.20140401T125757-154@post.gmane.org>
	<1396353450.533aa9aa9e0c5@imp.free.fr>
Message-ID: <CALQGVr1Lv-xuJEa5ACs3tbtW8Tk7d2Q5PHoxR16JkWqFoc=gWQ@mail.gmail.com>

On Tue, Apr 1, 2014 at 7:57 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Moses,
>
> Hum, your VRT is 2147483647 x 2147483647 large, which is the largest
> possible
> raster that GDAL can handle in theory ! Something must have gone seriously
> wrong
>
> That would be more than enough pixel range to cover the earth with 15cm
resolution imagery.  Glad to know gdal scales that far!

Doug




>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140401/9f3584fd/attachment.html>

From even.rouault at mines-paris.org  Tue Apr  1 05:35:04 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 01 Apr 2014 14:35:04 +0200
Subject: [gdal-dev] Weird issue when running gdaltranslate
In-Reply-To: <CALQGVr1Lv-xuJEa5ACs3tbtW8Tk7d2Q5PHoxR16JkWqFoc=gWQ@mail.gmail.com>
References: <2D55B4FBCD59D045AC382D3F65435B790385CDDAE6E0@HE101453.emea1.cds.t-internal.com>
	<loom.20140401T125757-154@post.gmane.org>
	<1396353450.533aa9aa9e0c5@imp.free.fr>
	<CALQGVr1Lv-xuJEa5ACs3tbtW8Tk7d2Q5PHoxR16JkWqFoc=gWQ@mail.gmail.com>
Message-ID: <1396355704.533ab278cd6d3@imp.free.fr>

Selon "Newcomb, Doug" <doug_newcomb at fws.gov>:

> On Tue, Apr 1, 2014 at 7:57 AM, Even Rouault
> <even.rouault at mines-paris.org>wrote:
>
> > Moses,
> >
> > Hum, your VRT is 2147483647 x 2147483647 large, which is the largest
> > possible
> > raster that GDAL can handle in theory ! Something must have gone seriously
> > wrong
> >
> > That would be more than enough pixel range to cover the earth with 15cm
> resolution imagery.  Glad to know gdal scales that far!

But I think that for GDAL 2.0, it could be wise to upgrade to 64 bit integers to
express image dimensions and windows, for example to cover the case of a WMS or
WMTS server with potential world extent at medium resolution, and very high
resolution in some areas with < 15 cm accuracy, which is no longer something
theoretical.
We would have issues for now with the current design of the block cache due to a
really high number of potential blocks in such a huge raster, but that's an
internal detail, and I think Tamas had a patch to improve that.

>
> Doug
>
>
>
>
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov
>
---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the
> official policy of the U.S.Fish and Wildlife Service or Dept. of the
> Interior.   Life is too short for undocumented, proprietary data formats.
>



From traviskirstine at gmail.com  Tue Apr  1 05:51:28 2014
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue, 1 Apr 2014 08:51:28 -0400
Subject: [gdal-dev] Weird issue when running gdaltranslate
In-Reply-To: <2D55B4FBCD59D045AC382D3F65435B790385CDDAE6E0@HE101453.emea1.cds.t-internal.com>
References: <2D55B4FBCD59D045AC382D3F65435B790385CDDAE6E0@HE101453.emea1.cds.t-internal.com>
Message-ID: <CALtm4h1xOWFv8S5ydPdw8TPoVbyN2CFE0vFzHTCX4-XJvEz+Gw@mail.gmail.com>

I think something is wrong in you vrt file.  The number of pixels seems
extremely high 2147483647 x 2147483647.  This would result in a huge
geotiff ~ 4611686014132420609 bytes.  A regular geotiff is limited to 4 GB
in size.  This can be increased with Big Tiff support.


On 1 April 2014 03:31, <Moses.Gone at t-systems.com> wrote:

>  Hi everyone,
> I am getting this weird error when I try to convert a vrt to a tif.
>
> Some context: We are tiling a set of tifs(in a list file). First we
> generate a vrt from the list. Then we assign a projection on the generated
> vrt using gdaltranslate. We then clip the output using gdalwarp applying a
> clipping at the same time to the desired BBOX(This is achieved using the
> -te option). In the warp operation we also specify the target SRS(using the
> -t_srs option). Lastly we tile using our customized gdal_retile.py. All is
> fine with the projection and clipping, but the resultant tiles are empty-no
> data just white images.
>
> So I tried to backtrack my steps, to check at what point is the data being
> lost. Generation of the VRT works fine. However, performing gdaltranslate
> to assign the source SRS on the VRT result into this error:
>
> bash-2.05$ gdal_translate -of GTiff ffm_dtk200_wdd.vrt test.tif
> Input file size is 2147483647, 2147483647
> 0ERROR 1: GTiffCreateCopy():No space for strip arrays
> ERROR 1: MissingRequired:TIFF directory is missing required "StripOffsets"
> field
> ERROR 1: MissingRequired:TIFF directory is missing required "StripOffsets"
> field
>
> I tried to also convert to AAIGrid format, thinking that something is
> wrong converting to Tiff, but also got this error:
>
> bash-2.05$ gdal_translate -of  AAIGrid ffm_dtk200_wdd.vrt test3
> Input file size is 2147483647, 2147483647
> 0ERROR 1: CPLMalloc(-4): Silly size requested.
>
> ERROR 1: ffm_dtk200_wdd.vrt, band 1: The buffer into which the data should
> be read is null
> Segmentation Fault
>
> Other tiling jobs following a similar method, with different source data
> works fine though. Could the problem be with the data? If so how comes it
> worked before?
>
> Regards,
> Moses
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140401/8bc602ac/attachment.html>

From dodobasic at gmail.com  Tue Apr  1 10:26:09 2014
From: dodobasic at gmail.com (=?UTF-8?B?RHJhxb5lbiBPZG9iYcWhacSH?=)
Date: Tue, 01 Apr 2014 19:26:09 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using Python
 bindings to read OSM PBF file
Message-ID: <533AF6B1.1010804@gmail.com>

Hi all,

I've been successfully reading OSM PBF files using GDAL Python bindings, even
files larger than 5Gb. I did have to use OGR_INTERLEAVED_READING=YES and
OSM_USE_CUSTOM_INDEXING=NO, but eventually OSM PBF is read and I can extract data.

If I use osmconvert [0] and osmfilter [1] to preprocess data, Python script
complains that OSM_USE_CUSTOM_INDEXING is not used. In the debug output, it will
report that OSM_USE_CUSTOM_INDEXING is used...

"""
Tue Apr  1 19:04:56 2014: Shape: DBF Codepage = UTF-8 for /tmp/out/world1.shp
Tue Apr  1 19:04:56 2014: Shape: Treating as encoding 'UTF-8'.
Tue Apr  1 19:04:57 2014: OSM: Using SQLite indexing for points
Tue Apr  1 19:04:57 2014: OGR: OGROpen(/go_video/admin-levels.pbf/0x1d4a570)
succeeded as OSM.
Tue Apr  1 19:04:57 2014: CPLError: 'admin_level' not recognised as an available
field.
ERROR 1: 'admin_level' not recognised as an available field.
Tue Apr  1 19:04:57 2014: CPLError: 'admin_level' not recognised as an available
field.
ERROR 1: 'admin_level' not recognised as an available field.
Tue Apr  1 19:04:57 2014: CPLError: 'admin_level' not recognised as an available
field.
ERROR 1: 'admin_level' not recognised as an available field.
Tue Apr  1 19:04:57 2014: OSM: OGR_INTERLEAVED_READING = 1
Tue Apr  1 19:04:57 2014: CPLError: 'admin_level' not recognised as an available
field.
ERROR 1: 'admin_level' not recognised as an available field.
Tue Apr  1 19:04:57 2014: OSM: Got bounds : minx=-180.000000, miny=-90.000000,
maxx=180.000000, maxy=90.000000
Tue Apr  1 19:04:57 2014: OSM: For layer points, new max size is 128
Tue Apr  1 19:04:57 2014: OSM: For layer points, new max size is 320
Tue Apr  1 19:04:57 2014: OSM: For layer points, new max size is 608
Tue Apr  1 19:04:57 2014: OSM: For layer points, new max size is 1040
Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 1688
Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 2660
Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 4118
Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 6305
Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 9585
Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 14505
Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 21885
Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 32955
Tue Apr  1 19:05:01 2014: OSM: all_tags/other_tags field truncated for feature
249399339
Tue Apr  1 19:05:01 2014: OSM: For layer points, new max size is 49560
Tue Apr  1 19:05:03 2014: OSM: For layer points, new max size is 74468
Tue Apr  1 19:05:06 2014: OSM: /vsimem/osm_importer/osm_temp_0x1d4a570.sqlite
too big for RAM. Transfering it onto disk in /tmp/osm_tmp1067730688_0
Tue Apr  1 19:05:20 2014: OSM: For layer points, new max size is 111830
Tue Apr  1 19:05:26 2014: CPLError: Too many features have accumulated in points
layer. Use OGR_INTERLEAVED_READING=YES mode
ERROR 1: Too many features have accumulated in points layer. Use
OGR_INTERLEAVED_READING=YES mode
Tue Apr  1 19:05:26 2014: OGR:
ReleaseDataSource(/go_video/admin-levels.pbf/0x1d4a570) on unshared datasource!
Deleting directly.
Tue Apr  1 19:05:26 2014: OSM: Number of bytes read in file : 143840051
Tue Apr  1 19:05:26 2014: OGR: ReleaseDataSource(/tmp/out/world1.shp/0x19a93d0)
on unshared datasource!
Deleting directly.
Tue Apr  1 19:05:26 2014: GDAL: In GDALDestroy - unloading GDAL shared library.
"""

However, using ogr2ogr utility on the command line works like a charm. If I
convert PBF->OSM, script will work, but exported data is missing some of the
features. I can provide test data and the script if required.

Thank you,

Dra?en


[0] https://wiki.openstreetmap.org/wiki/Osmconvert
[1] https://wiki.openstreetmap.org/wiki/Osmfilter

From etourigny.dev at gmail.com  Tue Apr  1 11:30:51 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 1 Apr 2014 15:30:51 -0300
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <201403312103.00978.even.rouault@mines-paris.org>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
	<201403312103.00978.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvPjq09m94aeNbMib3aHpe=sj=yP0EVXj4FuVz0aKM-DnA@mail.gmail.com>

On Mon, Mar 31, 2014 at 4:03 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Hi Etienne,
>
> Thanks for your ideas.
>
> > Hi all,
> >
> > I have a few suggestions for gdal 2.0, based on my personal experience in
> > learning to use, enhance and maintain gdal/ogr code.
> >
> > - replace cpl/csl/string/xml code with a mainstream, modern
> cross-platform
> > toolkit such as QT, boost, etc.
>
> QT is certainly a dependency we wouldn't want to draw. Too big for some
> embededded usage, and it would make GDAL to be practially bound by the
> LGPL.
> I guess standard C++ libraries classes, or perhaps boost, should do the job
> for what you mention below.
>

In light of this QT is not a candidate, but on the other hand standard c++
library classes only deal with containers right?
Are there any cross-platfform, convenience classes? I'm thinking along the
lines of things like file paths, xml and csv file reading/writing support.


>
> >
> > While cpl/csl classes are robust and "do the job", they are not well
> > documented and not very intuitive for a new gdal coder. This is from my
> > personal experience, some may not agree.
> > They are also not used outside gdal, as such do not benefit from
> > enhancements as other toolkits.
>
> Well, at least, MapServer uses a few CPL functions : CPL minixml,
> CPLMalloc/CPLFree, CPLReadDir, CPLFormFilename, CPLGetFilename,
> CSLInsertString, etc..
>

I don't know much about MapServer, but it seems that GDAL is an optional
dependency. Could the CPL code be decoupled from GDAL as an external? Would
it make sense or just too much a hassle?


>
> > The drawback is that some data/methods would not be easily available in c
> > and other bindings. Also it might not be available for all platforms.
> > Existing code would still be able to use cpl/csl code but be deprecated
> > until a given release.
> >
> >
> > - upgrade/migrate gdal support file (files in .csv format such as
> gcs.csv)
> > reading to use containers (e.g. hash maps) instead of reading the
> relevant
> > .csv files every time
> >
> > Current reading of gdal support files is sub-optimal as any query for
> > support data requires reading the relevant support file(s). It would be
> > more efficient to read these once and cache into a container (such as
> hash
> > map). This could be done using a cross-platform toolkit mentioned
> earlier.
>
> Another option would be to use a .sqlite database with proper indices.
> SQLite
> would become a runtime requirement, but I don't think that would be a big
> problem.
>

.sqlite wouls be more compact, but not as easy to edit.


>
> >
> >
> > - modify metadata treatment to be able to store/retrieve data in formats
> > other than strings (e.g. floats, doubles, boolean), and query the actual
> > type of a given metadata item.
> >
> > Currently there is no way to know if a given metadata item represents an
> > integer, float, double (or string).
> >
> > In the netcdf driver, I overcame this limitation in 2 ways:
> > 1) parsing the value to test if it is an int, float or double
> (potentially
> > error-prone)
> > 2) add an extra metadata item to specify the type of the data represented
> > (cumbersome and non-standard)
> >
> > My suggestion would be to be able to store metadata value along with its
> > data type (default string as previously). This would require some kind of
> > container for internal representation (e.g. in qt: QMap<QString,
> QVariant>)
> > and a way to represent this on file (as .aux.xml or otherwise in files
> that
> > support metadata) such as gtiff. Values could be stored as strings to
> avoid
> > big/little endian conversion problems. Data type could be stored in a
> > (hidden) metadata domain, one item for each "real" metadata key.
>
> Interesting idea.
>
> Well, we need coders now ;-)
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140401/20002790/attachment.html>

From etourigny.dev at gmail.com  Tue Apr  1 11:36:25 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 1 Apr 2014 15:36:25 -0300
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <5339C3FF.7010408@gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
	<201403312103.00978.even.rouault@mines-paris.org>
	<5339C3FF.7010408@gmail.com>
Message-ID: <CA+TxYvN8Sx-uCtmS+2=_dDVnF_Z_HHYhoQc29FO5TaXZNULhrw@mail.gmail.com>

The 2 objections I have with json are :

- it is so verbose that editing by hand is not as easy as .csv
- the xml tags make file size much larger than .csv files, unless they
would be stored in a compressed file (gzip)

On the other hand, who messes with theses files on a regular basis anyway?

It seems like a nice idea. In what ways would it be better than Even's
suggestion to use sqlite?


On Mon, Mar 31, 2014 at 4:37 PM, Dmitriy Baryshnikov
<bishop.dev at gmail.com>wrote:

>  Hi,
>
> I think the JSON format is good for metadata storing and representation.
> JSON support to store string, digits, bool, dates, etc. Write such data and
> read such data from files.
> But need good library or set of classes to work with it in memory
> representation.
> For example I like  wxJSON - it support to get value by name or iterate
> values by index.
>
> int majorVer = root["wxWidgets"]["Version"]["Major"].AsInt <http://wxcode.sourceforge.net/docs/wxjson/classwxJSONValue.html#9223209e7eea4dd4d668869b69560acb>();
>
>
> root["wxWidgets"]["Authors"][0] = "J. Smart";
> root["wxWidgets"]["Authors"][1] = "V. Zeitling";
> root["wxWidgets"]["Authors"][2] = "R. Roebling";
>
>
> It consist only 3 files (json reader, json writer and json value).
>
> It seems to me that json-c library is more complicated. Unfortunately
> wxJSON cannot be used in GDAL as it have bindings to wxWidgets library, but
> the approach is interesting. By the way wxWidgets have more democratic
> license instead of qt.
>
> Best regards,
>     Dmitry
>
> 31.03.2014 23:03, Even Rouault ?????:
>
> Hi Etienne,
>
> Thanks for your ideas.
>
>
>  Hi all,
>
> I have a few suggestions for gdal 2.0, based on my personal experience in
> learning to use, enhance and maintain gdal/ogr code.
>
> - replace cpl/csl/string/xml code with a mainstream, modern cross-platform
> toolkit such as QT, boost, etc.
>
>  QT is certainly a dependency we wouldn't want to draw. Too big for some
> embededded usage, and it would make GDAL to be practially bound by the LGPL.
> I guess standard C++ libraries classes, or perhaps boost, should do the job
> for what you mention below.
>
>
>  While cpl/csl classes are robust and "do the job", they are not well
> documented and not very intuitive for a new gdal coder. This is from my
> personal experience, some may not agree.
> They are also not used outside gdal, as such do not benefit from
> enhancements as other toolkits.
>
>  Well, at least, MapServer uses a few CPL functions : CPL minixml,
> CPLMalloc/CPLFree, CPLReadDir, CPLFormFilename, CPLGetFilename,
> CSLInsertString, etc..
>
>
>  The drawback is that some data/methods would not be easily available in c
> and other bindings. Also it might not be available for all platforms.
> Existing code would still be able to use cpl/csl code but be deprecated
> until a given release.
>
>
> - upgrade/migrate gdal support file (files in .csv format such as gcs.csv)
> reading to use containers (e.g. hash maps) instead of reading the relevant
> .csv files every time
>
> Current reading of gdal support files is sub-optimal as any query for
> support data requires reading the relevant support file(s). It would be
> more efficient to read these once and cache into a container (such as hash
> map). This could be done using a cross-platform toolkit mentioned earlier.
>
>  Another option would be to use a .sqlite database with proper indices. SQLite
> would become a runtime requirement, but I don't think that would be a big
> problem.
>
>
>
> - modify metadata treatment to be able to store/retrieve data in formats
> other than strings (e.g. floats, doubles, boolean), and query the actual
> type of a given metadata item.
>
> Currently there is no way to know if a given metadata item represents an
> integer, float, double (or string).
>
> In the netcdf driver, I overcame this limitation in 2 ways:
> 1) parsing the value to test if it is an int, float or double (potentially
> error-prone)
> 2) add an extra metadata item to specify the type of the data represented
> (cumbersome and non-standard)
>
> My suggestion would be to be able to store metadata value along with its
> data type (default string as previously). This would require some kind of
> container for internal representation (e.g. in qt: QMap<QString, QVariant>)
> and a way to represent this on file (as .aux.xml or otherwise in files that
> support metadata) such as gtiff. Values could be stored as strings to avoid
> big/little endian conversion problems. Data type could be stored in a
> (hidden) metadata domain, one item for each "real" metadata key.
>
>  Interesting idea.
>
> Well, we need coders now ;-)
>
> Even
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140401/488ac701/attachment.html>

From dave.dehaan at sap.com  Tue Apr  1 12:49:59 2014
From: dave.dehaan at sap.com (DeHaan, Dave)
Date: Tue, 1 Apr 2014 19:49:59 +0000
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <1395783436.5331f70c554f1@imp.free.fr>
References: <1395783436.5331f70c554f1@imp.free.fr>
Message-ID: <4BCB480CFC693741AB7B875E0BC3A2B5886B7B9A@DEWDFEMB19C.global.corp.sap>

Hello Even,

I would like to contribute an OGR driver for SAP SQL Anywhere.  We have had this code in-house at SAP for some time, but I just received permission to contribute it to the GDAL project.

Unfortunately, it may be several days before we have a patch ready to contribute .  If we do not get the patch contributed+reviewed+committed before you issue beta-1, is there still a possibility of making it into the release of 1.11?

Thanks,
Dave DeHaan

---
HANA Platform Data Management
SAP Canada
 

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault
Sent: Tuesday, March 25, 2014 5:37 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] GDAL 1.11 release plan

Hi,

GDAL 1.10 was released about one year ago, so it is time to think about the next
release. I think we should just call it 1.11 given that there are no major
architectural changes (although there have been non trivial changes in RAT
management and for multiple geometry field support, but that only impacts core &
drivers), and the C API and ABI is still preserved (for those who have looked at
the other thread, my experiments on unification are *not* in trunk). For the
details, I have initiated the preliminary NEWS :
http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
There are some mentions to 2.0 in the documentation of new features, but I'll
end up fixing them to reflect the 1.11 numbering.

I think we are in a good shape to start the beta phase soon. If people have
features or bug fixes almost ready that they'd like to be in 1.11, please speak
up now. Otherwise I suggest issuing a beta-1 at the end of next week, give it a
week for testing, and depending on the outcome, issue a beta-2, or just try
RC-1. Unless someone volunteers (the process is fairly well documented in
HOWTO-RELEASE), I can be release manager for 1.11.

Any opinion about that plan ?

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From woklist at kyngchaos.com  Tue Apr  1 13:14:11 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Tue, 1 Apr 2014 15:14:11 -0500
Subject: [gdal-dev] alpha mask to data value
Message-ID: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>

I've wrestled with various nodata issues in the past, now it's hitting me again...

I'm using Photoshop to delete collars on scanned maps, creating an alpha mask.  GDAL has no problem with this.  What I want to do is merge maps together (after rectification), then set any remaining nodata areas to white, RGB 255,255,255.  Just dropping the extra alpha band doesn't work because nodata is set to 0,0,0, which is black.  The a_nodata option in gdal_translate just defines what existing value in the data is nodata.

I tried using gdalwarp with the -dstnodata option which should set nodata values in the output to a specific value, but it carries along the alpha band and ignores dstnodata.

  gdalwarp -dstnodata "255 255 255" in.tif out.tif
  Processing input file in.tif.
  Using band 4 of source image as alpha.
  Using band 4 of destination image as alpha.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From kyle at pobox.com  Tue Apr  1 13:57:38 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 1 Apr 2014 14:57:38 -0600
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <CA+TxYvN8Sx-uCtmS+2=_dDVnF_Z_HHYhoQc29FO5TaXZNULhrw@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
	<201403312103.00978.even.rouault@mines-paris.org>
	<5339C3FF.7010408@gmail.com>
	<CA+TxYvN8Sx-uCtmS+2=_dDVnF_Z_HHYhoQc29FO5TaXZNULhrw@mail.gmail.com>
Message-ID: <CAJ0mEz0hCOJPEOd7BXmtVUO+gkdbJgbT_4ocRvkrQCsKEOnOxg@mail.gmail.com>

On Tue, Apr 1, 2014 at 12:36 PM, Etienne Tourigny
<etourigny.dev at gmail.com> wrote:
> The 2 objections I have with json are :
>
> - it is so verbose that editing by hand is not as easy as .csv
> - the xml tags make file size much larger than .csv files, unless they would
> be stored in a compressed file (gzip)
>
> On the other hand, who messes with theses files on a regular basis anyway?
>
> It seems like a nice idea. In what ways would it be better than Even's
> suggestion to use sqlite?
>
>
> On Mon, Mar 31, 2014 at 4:37 PM, Dmitriy Baryshnikov <bishop.dev at gmail.com>
> wrote:
>>
>> Hi,
>>
>> I think the JSON format is good for metadata storing and representation.
>> JSON support to store string, digits, bool, dates, etc. Write such data and
>> read such data from files.
>> But need good library or set of classes to work with it in memory
>> representation.
>> For example I like  wxJSON - it support to get value by name or iterate
>> values by index.
>>
>> int majorVer = root["wxWidgets"]["Version"]["Major"].AsInt();
>>
>>
>> root["wxWidgets"]["Authors"][0] = "J. Smart";
>> root["wxWidgets"]["Authors"][1] = "V. Zeitling";
>> root["wxWidgets"]["Authors"][2] = "R. Roebling";
>>
>>
>> It consist only 3 files (json reader, json writer and json value).
>>
>> It seems to me that json-c library is more complicated. Unfortunately
>> wxJSON cannot be used in GDAL as it have bindings to wxWidgets library, but
>> the approach is interesting. By the way wxWidgets have more democratic
>> license instead of qt.
>>
>> Best regards,
>>     Dmitry
>>
>> 31.03.2014 23:03, Even Rouault ?????:
>>
>> Hi Etienne,
>>
>> Thanks for your ideas.
>>
>> Hi all,
>>
>> I have a few suggestions for gdal 2.0, based on my personal experience in
>> learning to use, enhance and maintain gdal/ogr code.
>>
>> - replace cpl/csl/string/xml code with a mainstream, modern cross-platform
>> toolkit such as QT, boost, etc.
>>
>> QT is certainly a dependency we wouldn't want to draw. Too big for some
>> embededded usage, and it would make GDAL to be practially bound by the
>> LGPL.
>> I guess standard C++ libraries classes, or perhaps boost, should do the
>> job
>> for what you mention below.
>>
>> While cpl/csl classes are robust and "do the job", they are not well
>> documented and not very intuitive for a new gdal coder. This is from my
>> personal experience, some may not agree.
>> They are also not used outside gdal, as such do not benefit from
>> enhancements as other toolkits.
>>
>> Well, at least, MapServer uses a few CPL functions : CPL minixml,
>> CPLMalloc/CPLFree, CPLReadDir, CPLFormFilename, CPLGetFilename,
>> CSLInsertString, etc..
>>
>> The drawback is that some data/methods would not be easily available in c
>> and other bindings. Also it might not be available for all platforms.
>> Existing code would still be able to use cpl/csl code but be deprecated
>> until a given release.
>>
>>
>> - upgrade/migrate gdal support file (files in .csv format such as gcs.csv)
>> reading to use containers (e.g. hash maps) instead of reading the relevant
>> .csv files every time
>>
>> Current reading of gdal support files is sub-optimal as any query for
>> support data requires reading the relevant support file(s). It would be
>> more efficient to read these once and cache into a container (such as hash
>> map). This could be done using a cross-platform toolkit mentioned earlier.
>>
>> Another option would be to use a .sqlite database with proper indices.
>> SQLite
>> would become a runtime requirement, but I don't think that would be a big
>> problem.
>>
>> - modify metadata treatment to be able to store/retrieve data in formats
>> other than strings (e.g. floats, doubles, boolean), and query the actual
>> type of a given metadata item.
>>
>> Currently there is no way to know if a given metadata item represents an
>> integer, float, double (or string).
>>
>> In the netcdf driver, I overcame this limitation in 2 ways:
>> 1) parsing the value to test if it is an int, float or double (potentially
>> error-prone)
>> 2) add an extra metadata item to specify the type of the data represented
>> (cumbersome and non-standard)
>>
>> My suggestion would be to be able to store metadata value along with its
>> data type (default string as previously). This would require some kind of
>> container for internal representation (e.g. in qt: QMap<QString,
>> QVariant>)
>> and a way to represent this on file (as .aux.xml or otherwise in files
>> that
>> support metadata) such as gtiff. Values could be stored as strings to
>> avoid
>> big/little endian conversion problems. Data type could be stored in a
>> (hidden) metadata domain, one item for each "real" metadata key.
>>
>> Interesting idea.
>>
>> Well, we need coders now ;-)
>>
>> Even
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

What problem are we trying to solve exactly?  Is CPL* thought to be
buggy because it isn't exposed to the wild?  As far as the csv and
support files, is it a performance issue we are trying to solve?.  Is
the metadata system insufficient for some purposes?  It may be in
Etienne's case, due to typing, but are there other examples?  I'm just
curious.  Thanks.

-- 
Kyle

From Bob.Moskovitz at conservation.ca.gov  Tue Apr  1 17:20:54 2014
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob@DOC)
Date: Wed, 2 Apr 2014 00:20:54 +0000
Subject: [gdal-dev] Set max value of "1.#IO" in Geotiff to nodata
Message-ID: <60358EDE3281814C993C0519A6DD0F1904053D3F@057-SN2MPN1-062.057d.mgd.msft.net>

Hello gdal,



I have a set of geotiffs that have a strange max (infinity?) values that I would like to set to nodata.  These originally were netcdf files.  With the current of gdal in OSGEO4W, gdalinfo reports:



gdalinfo -mm pola_cascadiad_sift2_maxspeed.tif

Driver: GTiff/GeoTIFF

Files: pola_cascadiad_sift2_maxspeed.tif

Size is 1810, 1100

Coordinate System is:

GEOGCS["WGS 84",

    DATUM["WGS_1984",

        SPHEROID["WGS 84",6378137,298.257223563,

            AUTHORITY["EPSG","7030"]],

        AUTHORITY["EPSG","6326"]],

    PRIMEM["Greenwich",0],

    UNIT["degree",0.0174532925199433],

    AUTHORITY["EPSG","4326"]]

Origin = (-118.302500000118700,33.779999999966194)

Pixel Size = (0.000092592592580,-0.000092592592587)

Metadata:

  AREA_OR_POINT=Area

Image Structure Metadata:

  INTERLEAVE=BAND

Corner Coordinates:

Upper Left  (-118.3025000,  33.7800000) (118d18' 9.00"W, 33d46'48.00"N)

Lower Left  (-118.3025000,  33.6781481) (118d18' 9.00"W, 33d40'41.33"N)

Upper Right (-118.1349074,  33.7800000) (118d 8' 5.67"W, 33d46'48.00"N)

Lower Right (-118.1349074,  33.6781481) (118d 8' 5.67"W, 33d40'41.33"N)

Center      (-118.2187037,  33.7290741) (118d13' 7.33"W, 33d43'44.67"N)

Band 1 Block=1810x1 Type=Float64, ColorInterp=Gray

    Computed Min/Max=0.000,1.#IO



I've been converting the geotiff to AAIGrids and replace all "1.#INF" to my nodata value, but I'm hoping that there is an easier way to do this with GDAL.



Thanks in advance,

Bob



Robert Moskovitz
California Geological Survey
Seismic Hazards Zonation Program


CONFIDENTIALITY NOTICE: This communication is intended only for the use of the individual or entity to which it is addressed. This message contains information from the State of California, California Geological Survey, which may be privileged, confidential and exempt from disclosure under applicable law, including the Electronic Communications Privacy Act. If the reader of this communication is not the intended recipient, you are hereby notified that any dissemination, distribution, or copying of this communication is strictly prohibited.







-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140402/8fda3bc5/attachment-0001.html>

From jomeder at ihug.co.nz  Tue Apr  1 20:59:13 2014
From: jomeder at ihug.co.nz (Jo Meder)
Date: Wed, 2 Apr 2014 16:59:13 +1300
Subject: [gdal-dev] GDALCopyWords question
Message-ID: <C54734AB-956B-49B0-8F33-C871EE81FF8B@ihug.co.nz>

Hi,

I'm not getting the results I'm expecting using GDALCopy Words() and I was wondering if someone might have some insight into where I'm going wrong. I'm reading data from a raster block by block. I read the block data into an array. I'm calling GDALCopyWords() like this:

GDALCopyWords( srcBuffer, srcDataType, srcPixelIndex, &srcValue, GDT_Byte, 0, 1 );

where:

srcBuffer is the array containing the block data
srcDataType is the data type from the raster band
srcPixelIndex is the offset from the start of srcBuffer of the pixel I'm interested in
srcValue is the value of the pixel

I'm reading a single pixel at a time, hence the dest pixel offset of 0 and word count of 1.

When I use GDALCopyWords() like this on an indexed image I find that each block seems to take on the value of the first pixel in the block. For example if the first pixel of the block is 128 then I get 128 for all other pixels in the block. 

If I index directly into my srcBuffer array then I get the expected values i.e.

if ( srcDataType == GDT_Byte )
{
    srcValue = srcBuffer[ srcPixelIndex ];
}

so I know that the correct data is in the buffer and that the calculations for srcPixelIndex are correct.

Regards,

Jo Meder



From chaitanya.ch at gmail.com  Wed Apr  2 01:54:49 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 2 Apr 2014 14:24:49 +0530
Subject: [gdal-dev] alpha mask to data value
In-Reply-To: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
References: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
Message-ID: <CAMKgpOYf-T0M6dXi7njUBeLcNHL4DBHt1YfYC_a1khN1=cu2rw@mail.gmail.com>

William,

Try gdalwarp after removing the mask band. If that didn't work try
gdal_merge.py with -init set to 255.


On Wed, Apr 2, 2014 at 1:44 AM, William Kyngesburye
<woklist at kyngchaos.com>wrote:

> I've wrestled with various nodata issues in the past, now it's hitting me
> again...
>
> I'm using Photoshop to delete collars on scanned maps, creating an alpha
> mask.  GDAL has no problem with this.  What I want to do is merge maps
> together (after rectification), then set any remaining nodata areas to
> white, RGB 255,255,255.  Just dropping the extra alpha band doesn't work
> because nodata is set to 0,0,0, which is black.  The a_nodata option in
> gdal_translate just defines what existing value in the data is nodata.
>
> I tried using gdalwarp with the -dstnodata option which should set nodata
> values in the output to a specific value, but it carries along the alpha
> band and ignores dstnodata.
>
>   gdalwarp -dstnodata "255 255 255" in.tif out.tif
>   Processing input file in.tif.
>   Using band 4 of source image as alpha.
>   Using band 4 of destination image as alpha.
>
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> First Pogril: Why is life like sticking your head in a bucket filled with
> hyena offal?
> Second Pogril: I don't know.  Why IS life like sticking your head in a
> bucket filled with hyena offal?
> First Pogril: I don't know either.  Wretched, isn't it?
>
> -HitchHiker's Guide to the Galaxy
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140402/bf3a331a/attachment.html>

From woklist at kyngchaos.com  Wed Apr  2 07:23:40 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed, 2 Apr 2014 09:23:40 -0500
Subject: [gdal-dev] alpha mask to data value
In-Reply-To: <CAMKgpOYf-T0M6dXi7njUBeLcNHL4DBHt1YfYC_a1khN1=cu2rw@mail.gmail.com>
References: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
	<CAMKgpOYf-T0M6dXi7njUBeLcNHL4DBHt1YfYC_a1khN1=cu2rw@mail.gmail.com>
Message-ID: <CC299307-3479-4A01-9913-2A14843D2AF8@kyngchaos.com>

On Apr 2, 2014, at 3:54 AM, Chaitanya kumar CH <chaitanya.ch at gmail.com> wrote:

> William,
> 
> Try gdalwarp after removing the mask band.

Removing the mask band is what I want, but also keeping the nodata values AND changing them to 255.  If I remove the mask nodata is set to 0, but there may be actual black pixels in the real data that will then become nodata when restoring and changing nodata values.  I could take more time in PS and change all black to 1,1,1.  I'm already changing white to 254.254,254 so it doesn't become nodata at some point (though it doesn't matter so much because it will become white in the end anyways).

So far, I have a messy, but working, process:

PS to clear collar - alpha mask
QGIS rectify - copy GDAL commands, alter them to create a tfw, and run manually
PS to flatten rectified tiff so nodata = white (PS destroys georeferencing, but it's safe in tfw)
gdal_translate to assign nodata and projection (needed anyways because QGIS rectifier doesn't assign projection, it's broken)
merge into vrt

> If that didn't work try gdal_merge.py with -init set to 255.
> 
My experience with gdal_merge.py in the past is either it's slower than making a vrt and translating that to geotiff, and it has memory problems with many and/or large rasters because it assembles the raster in memory.

> 
> On Wed, Apr 2, 2014 at 1:44 AM, William Kyngesburye <woklist at kyngchaos.com> wrote:
> I've wrestled with various nodata issues in the past, now it's hitting me again...
> 
> I'm using Photoshop to delete collars on scanned maps, creating an alpha mask.  GDAL has no problem with this.  What I want to do is merge maps together (after rectification), then set any remaining nodata areas to white, RGB 255,255,255.  Just dropping the extra alpha band doesn't work because nodata is set to 0,0,0, which is black.  The a_nodata option in gdal_translate just defines what existing value in the data is nodata.
> 
> I tried using gdalwarp with the -dstnodata option which should set nodata values in the output to a specific value, but it carries along the alpha band and ignores dstnodata.
> 
>   gdalwarp -dstnodata "255 255 255" in.tif out.tif
>   Processing input file in.tif.
>   Using band 4 of source image as alpha.
>   Using band 4 of destination image as alpha.
> 
> 

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.



From even.rouault at mines-paris.org  Wed Apr  2 08:34:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Apr 2014 17:34:32 +0200
Subject: [gdal-dev] GDAL 1.11 release plan
In-Reply-To: <4BCB480CFC693741AB7B875E0BC3A2B5886B7B9A@DEWDFEMB19C.global.corp.sap>
References: <1395783436.5331f70c554f1@imp.free.fr>
	<4BCB480CFC693741AB7B875E0BC3A2B5886B7B9A@DEWDFEMB19C.global.corp.sap>
Message-ID: <201404021734.32396.even.rouault@mines-paris.org>

Le mardi 01 avril 2014 21:49:59, DeHaan, Dave a ?crit :
> Hello Even,
> 
> I would like to contribute an OGR driver for SAP SQL Anywhere.  We have had
> this code in-house at SAP for some time, but I just received permission to
> contribute it to the GDAL project.
> 
> Unfortunately, it may be several days before we have a patch ready to
> contribute .  If we do not get the patch contributed+reviewed+committed
> before you issue beta-1, is there still a possibility of making it into
> the release of 1.11?

Yes, that might be doable if it is ready before RC1. But it would be usefull 
if you could submit a preliminary version of the patch for a quick review of 
us.

Even

> 
> Thanks,
> Dave DeHaan
> 
> ---
> HANA Platform Data Management
> SAP Canada
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault Sent:
> Tuesday, March 25, 2014 5:37 PM
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] GDAL 1.11 release plan
> 
> Hi,
> 
> GDAL 1.10 was released about one year ago, so it is time to think about the
> next release. I think we should just call it 1.11 given that there are no
> major architectural changes (although there have been non trivial changes
> in RAT management and for multiple geometry field support, but that only
> impacts core & drivers), and the C API and ABI is still preserved (for
> those who have looked at the other thread, my experiments on unification
> are *not* in trunk). For the details, I have initiated the preliminary
> NEWS :
> http://trac.osgeo.org/gdal/export/27091/trunk/gdal/NEWS (*)
> There are some mentions to 2.0 in the documentation of new features, but
> I'll end up fixing them to reflect the 1.11 numbering.
> 
> I think we are in a good shape to start the beta phase soon. If people have
> features or bug fixes almost ready that they'd like to be in 1.11, please
> speak up now. Otherwise I suggest issuing a beta-1 at the end of next
> week, give it a week for testing, and depending on the outcome, issue a
> beta-2, or just try RC-1. Unless someone volunteers (the process is fairly
> well documented in HOWTO-RELEASE), I can be release manager for 1.11.
> 
> Any opinion about that plan ?
> 
> Best regards,
> 
> Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Apr  2 11:24:36 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Apr 2014 20:24:36 +0200
Subject: [gdal-dev] GDALCopyWords question
In-Reply-To: <C54734AB-956B-49B0-8F33-C871EE81FF8B@ihug.co.nz>
References: <C54734AB-956B-49B0-8F33-C871EE81FF8B@ihug.co.nz>
Message-ID: <201404022024.36576.even.rouault@mines-paris.org>

Jo,

you could use GDALRasterIO() that would do the conversion for you.

I think the error in your call to GDALCopyWords() is srcPixelIndex. This 
parameter is supposed to be the number of bytes between 2 values of the source 
buffer, but not the offset of the first value. So you should likely use :

GDALCopyWords( srcBuffer + srcPixelIndex, srcDataType, 0, &srcValue, GDT_Byte, 
0, 1 );

assuming that srcBuffer is a pointer to the srcDataType type and not a char*

Even

> Hi,
> 
> I'm not getting the results I'm expecting using GDALCopy Words() and I was
> wondering if someone might have some insight into where I'm going wrong.
> I'm reading data from a raster block by block. I read the block data into
> an array. I'm calling GDALCopyWords() like this:
> 
> GDALCopyWords( srcBuffer, srcDataType, srcPixelIndex, &srcValue, GDT_Byte,
> 0, 1 );
> 
> where:
> 
> srcBuffer is the array containing the block data
> srcDataType is the data type from the raster band
> srcPixelIndex is the offset from the start of srcBuffer of the pixel I'm
> interested in srcValue is the value of the pixel
> 
> I'm reading a single pixel at a time, hence the dest pixel offset of 0 and
> word count of 1.
> 
> When I use GDALCopyWords() like this on an indexed image I find that each
> block seems to take on the value of the first pixel in the block. For
> example if the first pixel of the block is 128 then I get 128 for all
> other pixels in the block.
> 
> If I index directly into my srcBuffer array then I get the expected values
> i.e.
> 
> if ( srcDataType == GDT_Byte )
> {
>     srcValue = srcBuffer[ srcPixelIndex ];
> }
> 
> so I know that the correct data is in the buffer and that the calculations
> for srcPixelIndex are correct.
> 
> Regards,
> 
> Jo Meder
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Apr  2 11:29:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Apr 2014 20:29:32 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
	Python bindings to read OSM PBF file
In-Reply-To: <533AF6B1.1010804@gmail.com>
References: <533AF6B1.1010804@gmail.com>
Message-ID: <201404022029.32880.even.rouault@mines-paris.org>

Le mardi 01 avril 2014 19:26:09, Dra?en Odoba?i? a ?crit :
> Hi all,
> 
> I've been successfully reading OSM PBF files using GDAL Python bindings,
> even files larger than 5Gb. I did have to use OGR_INTERLEAVED_READING=YES
> and OSM_USE_CUSTOM_INDEXING=NO, but eventually OSM PBF is read and I can
> extract data.

Generally, you shouldn't have to mess with OSM_USE_CUSTOM_INDEXING.

As far as OGR_INTERLEAVED_READING=YES is concerned, it is not sufficient to 
define the environmenent variable. I invite you to read again "Interleaved 
reading" in http://gdal.org/ogr/drv_osm.html. The sample C++ code (ported to 
Python) must be used *exactly*.  I really mean it. That's what ogr2ogr does 
with OSM data.

> 
> If I use osmconvert [0] and osmfilter [1] to preprocess data, Python script
> complains that OSM_USE_CUSTOM_INDEXING is not used. In the debug output, it
> will report that OSM_USE_CUSTOM_INDEXING is used...
> 
> """
> Tue Apr  1 19:04:56 2014: Shape: DBF Codepage = UTF-8 for
> /tmp/out/world1.shp Tue Apr  1 19:04:56 2014: Shape: Treating as encoding
> 'UTF-8'.
> Tue Apr  1 19:04:57 2014: OSM: Using SQLite indexing for points
> Tue Apr  1 19:04:57 2014: OGR:
> OGROpen(/go_video/admin-levels.pbf/0x1d4a570) succeeded as OSM.
> Tue Apr  1 19:04:57 2014: CPLError: 'admin_level' not recognised as an
> available field.
> ERROR 1: 'admin_level' not recognised as an available field.
> Tue Apr  1 19:04:57 2014: CPLError: 'admin_level' not recognised as an
> available field.
> ERROR 1: 'admin_level' not recognised as an available field.
> Tue Apr  1 19:04:57 2014: CPLError: 'admin_level' not recognised as an
> available field.
> ERROR 1: 'admin_level' not recognised as an available field.
> Tue Apr  1 19:04:57 2014: OSM: OGR_INTERLEAVED_READING = 1
> Tue Apr  1 19:04:57 2014: CPLError: 'admin_level' not recognised as an
> available field.
> ERROR 1: 'admin_level' not recognised as an available field.
> Tue Apr  1 19:04:57 2014: OSM: Got bounds : minx=-180.000000,
> miny=-90.000000, maxx=180.000000, maxy=90.000000
> Tue Apr  1 19:04:57 2014: OSM: For layer points, new max size is 128
> Tue Apr  1 19:04:57 2014: OSM: For layer points, new max size is 320
> Tue Apr  1 19:04:57 2014: OSM: For layer points, new max size is 608
> Tue Apr  1 19:04:57 2014: OSM: For layer points, new max size is 1040
> Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 1688
> Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 2660
> Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 4118
> Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 6305
> Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 9585
> Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 14505
> Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 21885
> Tue Apr  1 19:04:58 2014: OSM: For layer points, new max size is 32955
> Tue Apr  1 19:05:01 2014: OSM: all_tags/other_tags field truncated for
> feature 249399339
> Tue Apr  1 19:05:01 2014: OSM: For layer points, new max size is 49560
> Tue Apr  1 19:05:03 2014: OSM: For layer points, new max size is 74468
> Tue Apr  1 19:05:06 2014: OSM:
> /vsimem/osm_importer/osm_temp_0x1d4a570.sqlite too big for RAM.
> Transfering it onto disk in /tmp/osm_tmp1067730688_0 Tue Apr  1 19:05:20
> 2014: OSM: For layer points, new max size is 111830 Tue Apr  1 19:05:26
> 2014: CPLError: Too many features have accumulated in points layer. Use
> OGR_INTERLEAVED_READING=YES mode
> ERROR 1: Too many features have accumulated in points layer. Use
> OGR_INTERLEAVED_READING=YES mode
> Tue Apr  1 19:05:26 2014: OGR:
> ReleaseDataSource(/go_video/admin-levels.pbf/0x1d4a570) on unshared
> datasource! Deleting directly.
> Tue Apr  1 19:05:26 2014: OSM: Number of bytes read in file : 143840051
> Tue Apr  1 19:05:26 2014: OGR:
> ReleaseDataSource(/tmp/out/world1.shp/0x19a93d0) on unshared datasource!
> Deleting directly.
> Tue Apr  1 19:05:26 2014: GDAL: In GDALDestroy - unloading GDAL shared
> library. """
> 
> However, using ogr2ogr utility on the command line works like a charm. If I
> convert PBF->OSM, script will work, but exported data is missing some of
> the features. I can provide test data and the script if required.
> 
> Thank you,
> 
> Dra?en
> 
> 
> [0] https://wiki.openstreetmap.org/wiki/Osmconvert
> [1] https://wiki.openstreetmap.org/wiki/Osmfilter
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Apr  2 11:32:51 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Apr 2014 20:32:51 +0200
Subject: [gdal-dev] Set max value of "1.#IO" in Geotiff to nodata
In-Reply-To: <60358EDE3281814C993C0519A6DD0F1904053D3F@057-SN2MPN1-062.057d.mgd.msft.net>
References: <60358EDE3281814C993C0519A6DD0F1904053D3F@057-SN2MPN1-062.057d.mgd.msft.net>
Message-ID: <201404022032.51742.even.rouault@mines-paris.org>

Le mercredi 02 avril 2014 02:20:54, Moskovitz, Bob at DOC a ?crit :
> Hello gdal,
> 
> 
> 
> I have a set of geotiffs that have a strange max (infinity?) values that I
> would like to set to nodata.  These originally were netcdf files.  With
> the current of gdal in OSGEO4W, gdalinfo reports:
> 
> 
> 
> gdalinfo -mm pola_cascadiad_sift2_maxspeed.tif
> 
> Driver: GTiff/GeoTIFF
> 
> Files: pola_cascadiad_sift2_maxspeed.tif
> 
> Size is 1810, 1100
> 
> Coordinate System is:
> 
> GEOGCS["WGS 84",
> 
>     DATUM["WGS_1984",
> 
>         SPHEROID["WGS 84",6378137,298.257223563,
> 
>             AUTHORITY["EPSG","7030"]],
> 
>         AUTHORITY["EPSG","6326"]],
> 
>     PRIMEM["Greenwich",0],
> 
>     UNIT["degree",0.0174532925199433],
> 
>     AUTHORITY["EPSG","4326"]]
> 
> Origin = (-118.302500000118700,33.779999999966194)
> 
> Pixel Size = (0.000092592592580,-0.000092592592587)
> 
> Metadata:
> 
>   AREA_OR_POINT=Area
> 
> Image Structure Metadata:
> 
>   INTERLEAVE=BAND
> 
> Corner Coordinates:
> 
> Upper Left  (-118.3025000,  33.7800000) (118d18' 9.00"W, 33d46'48.00"N)
> 
> Lower Left  (-118.3025000,  33.6781481) (118d18' 9.00"W, 33d40'41.33"N)
> 
> Upper Right (-118.1349074,  33.7800000) (118d 8' 5.67"W, 33d46'48.00"N)
> 
> Lower Right (-118.1349074,  33.6781481) (118d 8' 5.67"W, 33d40'41.33"N)
> 
> Center      (-118.2187037,  33.7290741) (118d13' 7.33"W, 33d43'44.67"N)
> 
> Band 1 Block=1810x1 Type=Float64, ColorInterp=Gray
> 
>     Computed Min/Max=0.000,1.#IO
> 
> 
> 
> I've been converting the geotiff to AAIGrids and replace all "1.#INF" to my
> nodata value, but I'm hoping that there is an easier way to do this with
> GDAL.

With GDAL 1.10, you should be able to specify "-a_nodata inf".  But I'm not 
completely sure if 1.#IO is the represnetation of infinity. Might be a not-a-
number ?

> 
> 
> 
> Thanks in advance,
> 
> Bob
> 
> 
> 
> Robert Moskovitz
> California Geological Survey
> Seismic Hazards Zonation Program
> 
> 
> CONFIDENTIALITY NOTICE: This communication is intended only for the use of
> the individual or entity to which it is addressed. This message contains
> information from the State of California, California Geological Survey,
> which may be privileged, confidential and exempt from disclosure under
> applicable law, including the Electronic Communications Privacy Act. If
> the reader of this communication is not the intended recipient, you are
> hereby notified that any dissemination, distribution, or copying of this
> communication is strictly prohibited.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From sean at mapbox.com  Wed Apr  2 11:56:10 2014
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 02 Apr 2014 12:56:10 -0600
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
 Python bindings to read OSM PBF file
In-Reply-To: <201404022029.32880.even.rouault@mines-paris.org>
References: <533AF6B1.1010804@gmail.com>
	<201404022029.32880.even.rouault@mines-paris.org>
Message-ID: <533C5D4A.4020009@mapbox.com>

On 4/2/14, 12:29 PM, Even Rouault wrote:
> Le mardi 01 avril 2014 19:26:09, Dra?en Odoba?i? a ?crit :
>> Hi all,
>>
>> I've been successfully reading OSM PBF files using GDAL Python bindings,
>> even files larger than 5Gb. I did have to use OGR_INTERLEAVED_READING=YES
>> and OSM_USE_CUSTOM_INDEXING=NO, but eventually OSM PBF is read and I can
>> extract data.
>
> Generally, you shouldn't have to mess with OSM_USE_CUSTOM_INDEXING.
>
> As far as OGR_INTERLEAVED_READING=YES is concerned, it is not sufficient to
> define the environmenent variable. I invite you to read again "Interleaved
> reading" in http://gdal.org/ogr/drv_osm.html. The sample C++ code (ported to
> Python) must be used *exactly*.  I really mean it. That's what ogr2ogr does
> with OSM data.

Even,

Related question: are there cases where local configuration options are 
not sufficient and environment variables must be used instead? Can we 
(should we?) always rely on the configuration options set in a program?

-- 
Sean Gillies
sean at mapbox.com

From even.rouault at mines-paris.org  Wed Apr  2 12:03:45 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Apr 2014 21:03:45 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
	Python bindings to read OSM PBF file
In-Reply-To: <533C5D4A.4020009@mapbox.com>
References: <533AF6B1.1010804@gmail.com>
	<201404022029.32880.even.rouault@mines-paris.org>
	<533C5D4A.4020009@mapbox.com>
Message-ID: <201404022103.45989.even.rouault@mines-paris.org>

Le mercredi 02 avril 2014 20:56:10, Sean Gillies a ?crit :
> On 4/2/14, 12:29 PM, Even Rouault wrote:
> > Le mardi 01 avril 2014 19:26:09, Dra?en Odoba?i? a ?crit :
> >> Hi all,
> >> 
> >> I've been successfully reading OSM PBF files using GDAL Python bindings,
> >> even files larger than 5Gb. I did have to use
> >> OGR_INTERLEAVED_READING=YES and OSM_USE_CUSTOM_INDEXING=NO, but
> >> eventually OSM PBF is read and I can extract data.
> > 
> > Generally, you shouldn't have to mess with OSM_USE_CUSTOM_INDEXING.
> > 
> > As far as OGR_INTERLEAVED_READING=YES is concerned, it is not sufficient
> > to define the environmenent variable. I invite you to read again
> > "Interleaved reading" in http://gdal.org/ogr/drv_osm.html. The sample
> > C++ code (ported to Python) must be used *exactly*.  I really mean it.
> > That's what ogr2ogr does with OSM data.
> 
> Even,
> 
> Related question: are there cases where local configuration options are
> not sufficient and environment variables must be used instead? Can we
> (should we?) always rely on the configuration options set in a program?

I'm not sure to understand your question. You can either set an environmenet  
variable with the OS mechanisms, or use the GDAL SetConfigOption() API. Both 
will have same effect on GDAL behaviour.

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From sean at mapbox.com  Wed Apr  2 12:17:17 2014
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 02 Apr 2014 13:17:17 -0600
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
 Python bindings to read OSM PBF file
In-Reply-To: <201404022103.45989.even.rouault@mines-paris.org>
References: <533AF6B1.1010804@gmail.com>
	<201404022029.32880.even.rouault@mines-paris.org>
	<533C5D4A.4020009@mapbox.com>
	<201404022103.45989.even.rouault@mines-paris.org>
Message-ID: <533C623D.9010909@mapbox.com>

On 4/2/14, 1:03 PM, Even Rouault wrote:
> Le mercredi 02 avril 2014 20:56:10, Sean Gillies a ?crit :
>> On 4/2/14, 12:29 PM, Even Rouault wrote:
>>> Le mardi 01 avril 2014 19:26:09, Dra?en Odoba?i? a ?crit :
>>>> Hi all,
>>>>
>>>> I've been successfully reading OSM PBF files using GDAL Python bindings,
>>>> even files larger than 5Gb. I did have to use
>>>> OGR_INTERLEAVED_READING=YES and OSM_USE_CUSTOM_INDEXING=NO, but
>>>> eventually OSM PBF is read and I can extract data.
>>>
>>> Generally, you shouldn't have to mess with OSM_USE_CUSTOM_INDEXING.
>>>
>>> As far as OGR_INTERLEAVED_READING=YES is concerned, it is not sufficient
>>> to define the environmenent variable. I invite you to read again
>>> "Interleaved reading" in http://gdal.org/ogr/drv_osm.html. The sample
>>> C++ code (ported to Python) must be used *exactly*.  I really mean it.
>>> That's what ogr2ogr does with OSM data.
>>
>> Even,
>>
>> Related question: are there cases where local configuration options are
>> not sufficient and environment variables must be used instead? Can we
>> (should we?) always rely on the configuration options set in a program?
>
> I'm not sure to understand your question. You can either set an environmenet
> variable with the OS mechanisms, or use the GDAL SetConfigOption() API. Both
> will have same effect on GDAL behaviour.

Ah, it was me that misread what you wrote in the previous email. Same 
effect was my understanding. Thanks and sorry for the noise.

-- 
Sean Gillies
sean at mapbox.com

From Bob.Moskovitz at conservation.ca.gov  Wed Apr  2 12:18:15 2014
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob@DOC)
Date: Wed, 2 Apr 2014 19:18:15 +0000
Subject: [gdal-dev] Set max value of "1.#IO" in Geotiff to nodata
In-Reply-To: <201404022032.51742.even.rouault@mines-paris.org>
References: <60358EDE3281814C993C0519A6DD0F1904053D3F@057-SN2MPN1-062.057d.mgd.msft.net>
	<201404022032.51742.even.rouault@mines-paris.org>
Message-ID: <60358EDE3281814C993C0519A6DD0F190405AE80@057-SN2MPN1-063.057d.mgd.msft.net>

I've never seen "1.#IO" for max, but it is interesting that when this geotif was converted to an AAIGrids, it contained "1.#INF".  So this led me to conclude that I'm dealing with infinity.  I'll try what you using "-a_nodata inf" when I get the chance.

-Bob

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org] 
Sent: Wednesday, April 02, 2014 11:33 AM
To: gdal-dev at lists.osgeo.org
Cc: Moskovitz, Bob at DOC
Subject: Re: [gdal-dev] Set max value of "1.#IO" in Geotiff to nodata

Le mercredi 02 avril 2014 02:20:54, Moskovitz, Bob at DOC a ?crit :
> Hello gdal,
> 
> 
> 
> I have a set of geotiffs that have a strange max (infinity?) values 
> that I would like to set to nodata.  These originally were netcdf 
> files.  With the current of gdal in OSGEO4W, gdalinfo reports:
> 
> 
> 
> gdalinfo -mm pola_cascadiad_sift2_maxspeed.tif
> 
> Driver: GTiff/GeoTIFF
> 
> Files: pola_cascadiad_sift2_maxspeed.tif
> 
> Size is 1810, 1100
> 
> Coordinate System is:
> 
> GEOGCS["WGS 84",
> 
>     DATUM["WGS_1984",
> 
>         SPHEROID["WGS 84",6378137,298.257223563,
> 
>             AUTHORITY["EPSG","7030"]],
> 
>         AUTHORITY["EPSG","6326"]],
> 
>     PRIMEM["Greenwich",0],
> 
>     UNIT["degree",0.0174532925199433],
> 
>     AUTHORITY["EPSG","4326"]]
> 
> Origin = (-118.302500000118700,33.779999999966194)
> 
> Pixel Size = (0.000092592592580,-0.000092592592587)
> 
> Metadata:
> 
>   AREA_OR_POINT=Area
> 
> Image Structure Metadata:
> 
>   INTERLEAVE=BAND
> 
> Corner Coordinates:
> 
> Upper Left  (-118.3025000,  33.7800000) (118d18' 9.00"W, 
> 33d46'48.00"N)
> 
> Lower Left  (-118.3025000,  33.6781481) (118d18' 9.00"W, 
> 33d40'41.33"N)
> 
> Upper Right (-118.1349074,  33.7800000) (118d 8' 5.67"W, 
> 33d46'48.00"N)
> 
> Lower Right (-118.1349074,  33.6781481) (118d 8' 5.67"W, 
> 33d40'41.33"N)
> 
> Center      (-118.2187037,  33.7290741) (118d13' 7.33"W, 33d43'44.67"N)
> 
> Band 1 Block=1810x1 Type=Float64, ColorInterp=Gray
> 
>     Computed Min/Max=0.000,1.#IO
> 
> 
> 
> I've been converting the geotiff to AAIGrids and replace all "1.#INF" 
> to my nodata value, but I'm hoping that there is an easier way to do 
> this with GDAL.

With GDAL 1.10, you should be able to specify "-a_nodata inf".  But I'm not completely sure if 1.#IO is the represnetation of infinity. Might be a not-a- number ?

> 
> 
> 
> Thanks in advance,
> 
> Bob
> 
> 
> 
> Robert Moskovitz
> California Geological Survey
> Seismic Hazards Zonation Program
> 
> 
> CONFIDENTIALITY NOTICE: This communication is intended only for the 
> use of the individual or entity to which it is addressed. This message 
> contains information from the State of California, California 
> Geological Survey, which may be privileged, confidential and exempt 
> from disclosure under applicable law, including the Electronic 
> Communications Privacy Act. If the reader of this communication is not 
> the intended recipient, you are hereby notified that any 
> dissemination, distribution, or copying of this communication is strictly prohibited.

--
Geospatial professional services
http://even.rouault.free.fr/services.html


From dodobasic at gmail.com  Wed Apr  2 12:21:14 2014
From: dodobasic at gmail.com (=?UTF-8?B?RHJhxb5lbiBPZG9iYcWhacSH?=)
Date: Wed, 02 Apr 2014 21:21:14 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
 Python bindings to read OSM PBF file
In-Reply-To: <201404022029.32880.even.rouault@mines-paris.org>
References: <533AF6B1.1010804@gmail.com>
	<201404022029.32880.even.rouault@mines-paris.org>
Message-ID: <533C632A.3070605@gmail.com>

On 02.04.2014 20:29, Even Rouault wrote:
> Le mardi 01 avril 2014 19:26:09, Dra?en Odoba?i? a ?crit :
>> Hi all,
>>
>> I've been successfully reading OSM PBF files using GDAL Python bindings,
>> even files larger than 5Gb. I did have to use OGR_INTERLEAVED_READING=YES
>> and OSM_USE_CUSTOM_INDEXING=NO, but eventually OSM PBF is read and I can
>> extract data.
> 
> Generally, you shouldn't have to mess with OSM_USE_CUSTOM_INDEXING.
> 
> As far as OGR_INTERLEAVED_READING=YES is concerned, it is not sufficient to 
> define the environmenent variable. I invite you to read again "Interleaved 
> reading" in http://gdal.org/ogr/drv_osm.html. The sample C++ code (ported to 
> Python) must be used *exactly*.  I really mean it. That's what ogr2ogr does 
> with OSM data.
> 

Hi Even,

this is the Python code that implements interleaved reading, which is more or
less copied from the c++ example in the docs:

"""
# prepare for the layer/feature iteration
nLayerCount = ds.GetLayerCount()
thereIsDataInLayer = True

while thereIsDataInLayer:
    thereIsDataInLayer = False

    # read data from layers using OGR_INTERLEAVED_READING method
    for iLayer in xrange(nLayerCount):
        lyr = ds.GetLayer(iLayer)

        # read next Feature
        feat = lyr.GetNextFeature()
        while(feat is not None):
            # continue reading features from this layer
            thereIsDataInLayer = True

            # do something with the feature
            # save_feature(feat)

            # force feature removal - required for INTERLEAVED_READING
            feat.Destroy()
            # get the next feature
            feat = lyr.GetNextFeature()
"""

I had no issues when reading large PBF files using this method. For the large
files, without OSM_USE_CUSTOM_INDEXING=NO I got lots of "Cannot read node ..."
error messages, and I'm not sure why. Basically I stumbled onto
OSM_USE_CUSTOM_INDEXING=NO which seems to help. However, in this case custom
indexing has no effect, script still fails to extract data.

Is there anything else I could try ?

Dra?en

From even.rouault at mines-paris.org  Wed Apr  2 12:38:28 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Apr 2014 21:38:28 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
	Python bindings to read OSM PBF file
In-Reply-To: <533C632A.3070605@gmail.com>
References: <533AF6B1.1010804@gmail.com>
	<201404022029.32880.even.rouault@mines-paris.org>
	<533C632A.3070605@gmail.com>
Message-ID: <201404022138.28707.even.rouault@mines-paris.org>

Le mercredi 02 avril 2014 21:21:14, Dra?en Odoba?i? a ?crit :
> On 02.04.2014 20:29, Even Rouault wrote:
> > Le mardi 01 avril 2014 19:26:09, Dra?en Odoba?i? a ?crit :
> >> Hi all,
> >> 
> >> I've been successfully reading OSM PBF files using GDAL Python bindings,
> >> even files larger than 5Gb. I did have to use
> >> OGR_INTERLEAVED_READING=YES and OSM_USE_CUSTOM_INDEXING=NO, but
> >> eventually OSM PBF is read and I can extract data.
> > 
> > Generally, you shouldn't have to mess with OSM_USE_CUSTOM_INDEXING.
> > 
> > As far as OGR_INTERLEAVED_READING=YES is concerned, it is not sufficient
> > to define the environmenent variable. I invite you to read again
> > "Interleaved reading" in http://gdal.org/ogr/drv_osm.html. The sample
> > C++ code (ported to Python) must be used *exactly*.  I really mean it.
> > That's what ogr2ogr does with OSM data.
> 
> Hi Even,
> 
> this is the Python code that implements interleaved reading, which is more
> or less copied from the c++ example in the docs:
> 
> """
> # prepare for the layer/feature iteration
> nLayerCount = ds.GetLayerCount()
> thereIsDataInLayer = True
> 
> while thereIsDataInLayer:
>     thereIsDataInLayer = False
> 
>     # read data from layers using OGR_INTERLEAVED_READING method
>     for iLayer in xrange(nLayerCount):
>         lyr = ds.GetLayer(iLayer)
> 
>         # read next Feature
>         feat = lyr.GetNextFeature()
>         while(feat is not None):
>             # continue reading features from this layer
>             thereIsDataInLayer = True
> 
>             # do something with the feature
>             # save_feature(feat)
> 
>             # force feature removal - required for INTERLEAVED_READING
>             feat.Destroy()
>             # get the next feature
>             feat = lyr.GetNextFeature()
> """
> 

That looks fine.

> I had no issues when reading large PBF files using this method. For the
> large files, without OSM_USE_CUSTOM_INDEXING=NO I got lots of "Cannot read
> node ..." error messages, and I'm not sure why. Basically I stumbled onto
> OSM_USE_CUSTOM_INDEXING=NO which seems to help. However, in this case
> custom indexing has no effect, script still fails to extract data.

Hum, there might be a bug in custom indexing that you've hit. What is the PBF 
file you are converting ?

And to be sure to understand: when setting OSM_USE_CUSTOM_INDEXING=NO, the 
conversion works ?

> 
> Is there anything else I could try ?
> 
> Dra?en

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From dodobasic at gmail.com  Wed Apr  2 12:45:23 2014
From: dodobasic at gmail.com (=?UTF-8?B?RHJhxb5lbiBPZG9iYcWhacSH?=)
Date: Wed, 02 Apr 2014 21:45:23 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
 Python bindings to read OSM PBF file
In-Reply-To: <201404022138.28707.even.rouault@mines-paris.org>
References: <533AF6B1.1010804@gmail.com>
	<201404022029.32880.even.rouault@mines-paris.org>
	<533C632A.3070605@gmail.com>
	<201404022138.28707.even.rouault@mines-paris.org>
Message-ID: <533C68D3.4030406@gmail.com>

On 02.04.2014 21:38, Even Rouault wrote:
>> I had no issues when reading large PBF files using this method. For the
>> large files, without OSM_USE_CUSTOM_INDEXING=NO I got lots of "Cannot read
>> node ..." error messages, and I'm not sure why. Basically I stumbled onto
>> OSM_USE_CUSTOM_INDEXING=NO which seems to help. However, in this case
>> custom indexing has no effect, script still fails to extract data.
> 
> Hum, there might be a bug in custom indexing that you've hit. What is the PBF 
> file you are converting ?
> 
> And to be sure to understand: when setting OSM_USE_CUSTOM_INDEXING=NO, the 
> conversion works ?
> 

Yes, converting http://download.geofabrik.de/north-america-latest.osm.pbf
(5.9G), works only with manually overridden OSM_USE_CUSTOM_INDEXING=NO

File http://download.geofabrik.de/asia-latest.osm.pbf (2.6G) worked with default
settings (OSM_USE_CUSTOM_INDEXING=YES)


From even.rouault at mines-paris.org  Wed Apr  2 14:33:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Apr 2014 23:33:47 +0200
Subject: [gdal-dev] alpha mask to data value
In-Reply-To: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
References: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
Message-ID: <201404022333.47535.even.rouault@mines-paris.org>

Le mardi 01 avril 2014 22:14:11, William Kyngesburye a ?crit :
> I've wrestled with various nodata issues in the past, now it's hitting me
> again...
> 
> I'm using Photoshop to delete collars on scanned maps, creating an alpha
> mask.  GDAL has no problem with this.  What I want to do is merge maps
> together (after rectification), then set any remaining nodata areas to
> white, RGB 255,255,255.  Just dropping the extra alpha band doesn't work
> because nodata is set to 0,0,0, which is black.  The a_nodata option in
> gdal_translate just defines what existing value in the data is nodata.
> 
> I tried using gdalwarp with the -dstnodata option which should set nodata
> values in the output to a specific value, but it carries along the alpha
> band and ignores dstnodata.
> 
>   gdalwarp -dstnodata "255 255 255" in.tif out.tif
>   Processing input file in.tif.
>   Using band 4 of source image as alpha.
>   Using band 4 of destination image as alpha.

You can perhaps try adding  -wo INIT_DEST="255,255,255,0"

> 
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> First Pogril: Why is life like sticking your head in a bucket filled with
> hyena offal? Second Pogril: I don't know.  Why IS life like sticking your
> head in a bucket filled with hyena offal? First Pogril: I don't know
> either.  Wretched, isn't it?
> -HitchHiker's Guide to the Galaxy
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From woklist at kyngchaos.com  Wed Apr  2 16:10:39 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed, 2 Apr 2014 18:10:39 -0500
Subject: [gdal-dev] alpha mask to data value
In-Reply-To: <201404022333.47535.even.rouault@mines-paris.org>
References: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
	<201404022333.47535.even.rouault@mines-paris.org>
Message-ID: <5E3DBBD2-0FA7-4AF7-A30B-0F915C43C33D@kyngchaos.com>

On Apr 2, 2014, at 4:33 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le mardi 01 avril 2014 22:14:11, William Kyngesburye a ?crit :
>> I've wrestled with various nodata issues in the past, now it's hitting me
>> again...
>> 
>> I'm using Photoshop to delete collars on scanned maps, creating an alpha
>> mask.  GDAL has no problem with this.  What I want to do is merge maps
>> together (after rectification), then set any remaining nodata areas to
>> white, RGB 255,255,255.  Just dropping the extra alpha band doesn't work
>> because nodata is set to 0,0,0, which is black.  The a_nodata option in
>> gdal_translate just defines what existing value in the data is nodata.
>> 
>> I tried using gdalwarp with the -dstnodata option which should set nodata
>> values in the output to a specific value, but it carries along the alpha
>> band and ignores dstnodata.
>> 
>>  gdalwarp -dstnodata "255 255 255" in.tif out.tif
>>  Processing input file in.tif.
>>  Using band 4 of source image as alpha.
>>  Using band 4 of destination image as alpha.
> 
> You can perhaps try adding  -wo INIT_DEST="255,255,255,0"


That appears to work, though not immediately.  The raster has 255 in the nodata areas, but it's not until I strip out the alpha band with gdal_translate that it shows.

Now I see an odd artifact, or maybe bug somewhere - with nodata values in an RGB image, if any one or two of the bands for a pixel are 255 while the other bands are not, the pixel as a whole is treated as nodata when displaying in QGIS.  Though identifying such a pixel will show nodata for just the band(s) that are 255.  Photoshop has no concept of nodata values, so it displays correctly (and with white for fully nodata pixels).

I think this explains another issue I saw at one point when I had ovelap when merging 2 rasters: the pixels of the top raster covered the pixels of the lower at the band level, which caused the band of the lower to show through when the upper band was 255, and resulted in a wild color mix. ie:

result 127 127 127 (grey) but should have been 255 127 127
        ^
upper  255 127 127 (pink)
        ^
lower  127 127 127 (grey)

I think I'll save the nodata flattening to white until the end, after merging.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy



From rgourrat at ag-carto.fr  Thu Apr  3 03:02:11 2014
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Thu, 3 Apr 2014 10:02:11 +0000
Subject: [gdal-dev] ogrinfo 1.10 with oracle view is failing
In-Reply-To: <BLU173-W338A91BE51CFC9F31C597790630@phx.gbl>
References: <A47F1026-7796-4683-9AF7-FA55B7EFDED7@ag-carto.fr>
	<BLU173-W338A91BE51CFC9F31C597790630@phx.gbl>
Message-ID: <238B1E1830D86F46B3F030D491793D60038635A3@EXC2010.aditu.fr>

Thanks Ivan,

You attired my attention about ogr2ogr is case sensitive and Oracle Too

So when I write my viewname UPCASE it's running !

Cordialement

R?my Gourrat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140403/2cd1af28/attachment.html>

From zoltans at geograph.co.za  Thu Apr  3 03:34:25 2014
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Thu, 03 Apr 2014 12:34:25 +0200
Subject: [gdal-dev] gdal website available?
Message-ID: <533D3931.4000803@geograph.co.za>

Hi All,
I haven't been able to get to www.gdal.org for the last few hours.

Anyone else having that issue - or do I start looking for issues my side?

TIA,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================


From rgourrat at ag-carto.fr  Thu Apr  3 03:42:03 2014
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Thu, 3 Apr 2014 10:42:03 +0000
Subject: [gdal-dev] [gdal 1.10] ogr2ogr ora-04043 object does not exist with
 spatial views in another schema of the connected user
Message-ID: <238B1E1830D86F46B3F030D491793D6003863800@EXC2010.aditu.fr>

Hi,

my Oracle user connected had the "SELECT ANY TABLE" privilege so when I execute ogr2ogr to generate shp,
before to write the shape, ogr2ogr try to describe spatial View and table in each schema.

It's very long to generate a small shape because for each spatial view of another schema of the connected user
I have this message "ERROR 1: ORA-04043: object <the schema name>.<the spatial view name>   does not exist
 in OCIDescribeAny", we have a lot of spatial views in different schemas...

but It seems that I have a issue with the views of another schemas,
not tables and not views of the current schema (connected user).

Does I forget a privilege on my Oracle User ? a describe privilege that I don't know ?

Is there a switch to force ogr2ogr to use USER_SDO_GEOM_METADATA ?

When i drop the "SELECT ANY TABLE" to the Oracle User,

I have not this message and it's fast again.

Debug On, first I see that ogr2ogr list every table and every view with this request, (I put interline to optimize lisibility)

OCI: Userid=****, Password=****, Database=****
OCI: Prepare(ALTER SESSION SET NLS_DATE_FORMAT='YYYY/MM/DD'         NLS_TIME_FORMAT='HH24:MI:SS' NLS_TIME_TZ_FORMAT='HH24:MI:SS TZHTZM'         NLS_TIMESTAMP_FORMAT='YYYY/MM/DD HH24:MI:SS'         NLS_TIMESTAMP_TZ_FORMAT='YYYY/MM/DD HH24:MI:SS TZHTZM')

OCI: Prepare(SELECT TABLE_NAME, OWNER FROM ALL_SDO_GEOM_METADATA)

ERROR 1: ORA-04043: object ORA_URBA.V_AGRI_EXPLOITATION does not exist in OCIDescribeAny
OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u,  TABLE(u.diminfo) t WHERE u.table_name = 'V_AGRI_EXPLOITATION' AND u.column_name = 'GEOMETRY')
OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME = UPPER('V_AGRI_EXPLOITATION') AND COLUMN_NAME = UPPER('GEOMETRY') AND OWNER = 'ORA_URBA')

ERROR 1: ORA-04043: object ORA_URBA.V_AGRI_EXPLOITATION_EXPLOITANT does not exist in OCIDescribeAny
OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u,  TABLE(u.diminfo) t WHERE u.table_name = 'V_AGRI_EXPLOITATION_EXPLOITANT' AND u.column_name = 'GEOMETRY')
OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME = UPPER('V_AGRI_EXPLOITATION_EXPLOITANT') AND COLUMN_NAME = UPPER('GEOMETRY') AND OWNER = 'ORA_URBA')

ERROR 1: ORA-04043: object ORA_URBA.V_AGRI_EXPLOITATION_PERIMETRE does not exist in OCIDescribeAny
OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u,  TABLE(u.diminfo) t WHERE u.table_name = 'V_AGRI_EXPLOITATION_PERIMETRE' AND u.column_name = 'GEOMETRY')
OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME = UPPER('V_AGRI_EXPLOITATION_PERIMETRE') AND COLUMN_NAME = UPPER('GEOMETRY') AND OWNER = 'ORA_URBA')
ERROR 1: ORA-04043: object ORA_URBA.V_AGRI_PAC_ILOT does not exist in OCIDescribeAny

Thanks for your help

R?my Gourrat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140403/39ff2901/attachment.html>

From Stefan.Blumentrath at nina.no  Thu Apr  3 03:51:09 2014
From: Stefan.Blumentrath at nina.no (Blumentrath, Stefan)
Date: Thu, 3 Apr 2014 10:51:09 +0000
Subject: [gdal-dev] gdal website available?
In-Reply-To: <533D3931.4000803@geograph.co.za>
References: <533D3931.4000803@geograph.co.za>
Message-ID: <2C5F82DA3EE3E449BD473075F2C290BF98FE566D@NINSRV05.nina.no>

Hi,

Citing Markus Neteler from the GRASS-dev list:

"due to some unexpected and unknown event on the virtual machine hosting http://grass.osgeo.org (also GDAL and other projects), our main site is currently down [1]. Since it is night in the US (the server is in Oregon), it may take a bit more to get it back online. We do not manage to connect remotely at time.

Please use a mirror site for the time being"

Cheers
Stefan

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Zoltan Szecsei
Sent: 3. april 2014 12:34
To: gdal-dev
Subject: [gdal-dev] gdal website available?

Hi All,
I haven't been able to get to www.gdal.org for the last few hours.

Anyone else having that issue - or do I start looking for issues my side?

TIA,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From yehil at rafael.co.il  Thu Apr  3 03:37:15 2014
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Thu, 3 Apr 2014 13:37:15 +0300
Subject: [gdal-dev] gdal website available?
In-Reply-To: <533D3931.4000803@geograph.co.za>
References: <533D3931.4000803@geograph.co.za>
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0E52311E73A@MAILBOXSERVER.rf.local>

Also down from here.

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Zoltan Szecsei
Sent: Thursday, April 03, 2014 13:34
To: gdal-dev
Subject: [gdal-dev] gdal website available?

Hi All,
I haven't been able to get to www.gdal.org for the last few hours.

Anyone else having that issue - or do I start looking for issues my side?

TIA,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
GIS and Photogrammetric Services

P.O. Box 7, Muizenberg 7950, South Africa.

Mobile: +27-83-6004028
Fax:    +27-86-6115323     www.geograph.co.za
===========================================

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.

From kansal.k at gmail.com  Thu Apr  3 04:43:31 2014
From: kansal.k at gmail.com (Kshitij Kansal)
Date: Thu, 3 Apr 2014 17:13:31 +0530
Subject: [gdal-dev] gdal website available?
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0E52311E73A@MAILBOXSERVER.rf.local>
References: <533D3931.4000803@geograph.co.za>
	<C5D1974ECA44D2429ECBC64B967C34C0E52311E73A@MAILBOXSERVER.rf.local>
Message-ID: <CAKTWcSk6AFZ4sqXZYSHAazBuuNWSpWk3ii4XzREAUD+qQy0e6Q@mail.gmail.com>

Not working for me either ...

Kshitij Kansal

Lab For Spatial Informatics,

IIIT Hyderabad



On Thu, Apr 3, 2014 at 4:07 PM, Livneh Yehiyam <yehil at rafael.co.il> wrote:

> Also down from here.
>
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] On Behalf Of Zoltan Szecsei
> Sent: Thursday, April 03, 2014 13:34
> To: gdal-dev
> Subject: [gdal-dev] gdal website available?
>
> Hi All,
> I haven't been able to get to www.gdal.org for the last few hours.
>
> Anyone else having that issue - or do I start looking for issues my side?
>
> TIA,
> Zoltan
>
>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> GIS and Photogrammetric Services
>
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> Mobile: +27-83-6004028
> Fax:    +27-86-6115323     www.geograph.co.za
> ===========================================
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ________________________________________
>
> This message (including any attachments) issued by RAFAEL- ADVANCED
> DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential
> information intended for a specific individual and purpose, may constitute
> information that is privileged or confidential or otherwise protected from
> disclosure. If you are not the intended recipient, you should contact us
> immediately and thereafter delete this message from your system. You are
> hereby notified that any disclosure, copying, dissemination, distribution
> or forwarding of this message, or the taking of any action based on it, is
> strictly prohibited. If you have received this e-mail in error, please
> notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely
> delete or destroy any and all electronic or other copies of the original
> message and any attachments thereof.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140403/66e9b653/attachment.html>

From etourigny.dev at gmail.com  Thu Apr  3 07:22:58 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 3 Apr 2014 11:22:58 -0300
Subject: [gdal-dev] Misc. subjects : OSGeo Vienna code sprint,
 release plans, GDAL 2.0
In-Reply-To: <CAJ0mEz0hCOJPEOd7BXmtVUO+gkdbJgbT_4ocRvkrQCsKEOnOxg@mail.gmail.com>
References: <201402132214.20518.even.rouault@mines-paris.org>
	<CA+TxYvMJz5387ng5k5Ew0gm6VGJ1cfJj+bhu84=4F-wXd2hJCw@mail.gmail.com>
	<201403312103.00978.even.rouault@mines-paris.org>
	<5339C3FF.7010408@gmail.com>
	<CA+TxYvN8Sx-uCtmS+2=_dDVnF_Z_HHYhoQc29FO5TaXZNULhrw@mail.gmail.com>
	<CAJ0mEz0hCOJPEOd7BXmtVUO+gkdbJgbT_4ocRvkrQCsKEOnOxg@mail.gmail.com>
Message-ID: <CA+TxYvP8oie=bU57oDdwt23pz=0mcNLRpfkMPD94rGu0p--Xwg@mail.gmail.com>

On Tue, Apr 1, 2014 at 5:57 PM, Kyle Shannon <kyle at pobox.com> wrote:

> On Tue, Apr 1, 2014 at 12:36 PM, Etienne Tourigny
> <etourigny.dev at gmail.com> wrote:
> > The 2 objections I have with json are :
> >
> > - it is so verbose that editing by hand is not as easy as .csv
> > - the xml tags make file size much larger than .csv files, unless they
> would
> > be stored in a compressed file (gzip)
> >
> > On the other hand, who messes with theses files on a regular basis
> anyway?
> >
> > It seems like a nice idea. In what ways would it be better than Even's
> > suggestion to use sqlite?
> >
> >
> > On Mon, Mar 31, 2014 at 4:37 PM, Dmitriy Baryshnikov <
> bishop.dev at gmail.com>
> > wrote:
> >>
> >> Hi,
> >>
> >> I think the JSON format is good for metadata storing and representation.
> >> JSON support to store string, digits, bool, dates, etc. Write such data
> and
> >> read such data from files.
> >> But need good library or set of classes to work with it in memory
> >> representation.
> >> For example I like  wxJSON - it support to get value by name or iterate
> >> values by index.
> >>
> >> int majorVer = root["wxWidgets"]["Version"]["Major"].AsInt();
> >>
> >>
> >> root["wxWidgets"]["Authors"][0] = "J. Smart";
> >> root["wxWidgets"]["Authors"][1] = "V. Zeitling";
> >> root["wxWidgets"]["Authors"][2] = "R. Roebling";
> >>
> >>
> >> It consist only 3 files (json reader, json writer and json value).
> >>
> >> It seems to me that json-c library is more complicated. Unfortunately
> >> wxJSON cannot be used in GDAL as it have bindings to wxWidgets library,
> but
> >> the approach is interesting. By the way wxWidgets have more democratic
> >> license instead of qt.
> >>
> >> Best regards,
> >>     Dmitry
> >>
> >> 31.03.2014 23:03, Even Rouault ?????:
> >>
> >> Hi Etienne,
> >>
> >> Thanks for your ideas.
> >>
> >> Hi all,
> >>
> >> I have a few suggestions for gdal 2.0, based on my personal experience
> in
> >> learning to use, enhance and maintain gdal/ogr code.
> >>
> >> - replace cpl/csl/string/xml code with a mainstream, modern
> cross-platform
> >> toolkit such as QT, boost, etc.
> >>
> >> QT is certainly a dependency we wouldn't want to draw. Too big for some
> >> embededded usage, and it would make GDAL to be practially bound by the
> >> LGPL.
> >> I guess standard C++ libraries classes, or perhaps boost, should do the
> >> job
> >> for what you mention below.
> >>
> >> While cpl/csl classes are robust and "do the job", they are not well
> >> documented and not very intuitive for a new gdal coder. This is from my
> >> personal experience, some may not agree.
> >> They are also not used outside gdal, as such do not benefit from
> >> enhancements as other toolkits.
> >>
> >> Well, at least, MapServer uses a few CPL functions : CPL minixml,
> >> CPLMalloc/CPLFree, CPLReadDir, CPLFormFilename, CPLGetFilename,
> >> CSLInsertString, etc..
> >>
> >> The drawback is that some data/methods would not be easily available in
> c
> >> and other bindings. Also it might not be available for all platforms.
> >> Existing code would still be able to use cpl/csl code but be deprecated
> >> until a given release.
> >>
> >>
> >> - upgrade/migrate gdal support file (files in .csv format such as
> gcs.csv)
> >> reading to use containers (e.g. hash maps) instead of reading the
> relevant
> >> .csv files every time
> >>
> >> Current reading of gdal support files is sub-optimal as any query for
> >> support data requires reading the relevant support file(s). It would be
> >> more efficient to read these once and cache into a container (such as
> hash
> >> map). This could be done using a cross-platform toolkit mentioned
> earlier.
> >>
> >> Another option would be to use a .sqlite database with proper indices.
> >> SQLite
> >> would become a runtime requirement, but I don't think that would be a
> big
> >> problem.
> >>
> >> - modify metadata treatment to be able to store/retrieve data in formats
> >> other than strings (e.g. floats, doubles, boolean), and query the actual
> >> type of a given metadata item.
> >>
> >> Currently there is no way to know if a given metadata item represents an
> >> integer, float, double (or string).
> >>
> >> In the netcdf driver, I overcame this limitation in 2 ways:
> >> 1) parsing the value to test if it is an int, float or double
> (potentially
> >> error-prone)
> >> 2) add an extra metadata item to specify the type of the data
> represented
> >> (cumbersome and non-standard)
> >>
> >> My suggestion would be to be able to store metadata value along with its
> >> data type (default string as previously). This would require some kind
> of
> >> container for internal representation (e.g. in qt: QMap<QString,
> >> QVariant>)
> >> and a way to represent this on file (as .aux.xml or otherwise in files
> >> that
> >> support metadata) such as gtiff. Values could be stored as strings to
> >> avoid
> >> big/little endian conversion problems. Data type could be stored in a
> >> (hidden) metadata domain, one item for each "real" metadata key.
> >>
> >> Interesting idea.
> >>
> >> Well, we need coders now ;-)
> >>
> >> Even
> >>
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> What problem are we trying to solve exactly?  Is CPL* thought to be
> buggy because it isn't exposed to the wild?


I thought that gdal 2.0 could be a good occasion to upgrade/modernize some
of the legacy code in gdal, which is a bit hard to learn for newcomers and
not that well documented.


> As far as the csv and
> support files, is it a performance issue we are trying to solve?.


Although I don't have any benchmarks to support this, I perceive that the
way the .csv reading is handled is not very efficient. I recall reading
some comments in the code that this should be fixed, but that never
happened.


> Is
> the metadata system insufficient for some purposes?  It may be in
> Etienne's case, due to typing, but are there other examples?  I'm just
> curious.  Thanks.
>

I find that having metadata values as strings can be limiting and can
induce errors an inaccuracies due to rounding.

But again - these are merely suggestions - I think things work well as they
are but could need some improvements and modernizing/standardization.

cheers
Etienne


>
> --
> Kyle
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140403/f7629c1d/attachment-0001.html>

From nicolas.simon at spw.wallonie.be  Thu Apr  3 07:52:19 2014
From: nicolas.simon at spw.wallonie.be (SIMON Nicolas)
Date: Thu, 3 Apr 2014 14:52:19 +0000
Subject: [gdal-dev] [gdal 1.10] ogr2ogr ora-04043 object does not exist
 with spatial views in another schema of the connected user
In-Reply-To: <238B1E1830D86F46B3F030D491793D6003863800@EXC2010.aditu.fr>
References: <238B1E1830D86F46B3F030D491793D6003863800@EXC2010.aditu.fr>
Message-ID: <F02D54DF5576D84C86C23A39A792DC7E1E8E7E1B@se0008v.wallonie.intra>

R?my,
One way to overcome delay is to add view name (or table name) in the command line.
Doing so will prevent you for scanning tables in the DB.

ogrinfo OCI:USR/PWD at INSTANCE:V_AGRI_EXPLOITATION

Nicolas

De : gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de R?my GOURRAT
Envoy? : jeudi 3 avril 2014 12:42
? : gdal-dev at lists.osgeo.org
Objet : [gdal-dev] [gdal 1.10] ogr2ogr ora-04043 object does not exist with spatial views in another schema of the connected user

Hi,

my Oracle user connected had the "SELECT ANY TABLE" privilege so when I execute ogr2ogr to generate shp,
before to write the shape, ogr2ogr try to describe spatial View and table in each schema.

It's very long to generate a small shape because for each spatial view of another schema of the connected user
I have this message "ERROR 1: ORA-04043: object <the schema name>.<the spatial view name>   does not exist
 in OCIDescribeAny", we have a lot of spatial views in different schemas...

but It seems that I have a issue with the views of another schemas,
not tables and not views of the current schema (connected user).

Does I forget a privilege on my Oracle User ? a describe privilege that I don't know ?

Is there a switch to force ogr2ogr to use USER_SDO_GEOM_METADATA ?

When i drop the "SELECT ANY TABLE" to the Oracle User,

I have not this message and it's fast again.

Debug On, first I see that ogr2ogr list every table and every view with this request, (I put interline to optimize lisibility)

OCI: Userid=****, Password=****, Database=****
OCI: Prepare(ALTER SESSION SET NLS_DATE_FORMAT='YYYY/MM/DD'         NLS_TIME_FORMAT='HH24:MI:SS' NLS_TIME_TZ_FORMAT='HH24:MI:SS TZHTZM'         NLS_TIMESTAMP_FORMAT='YYYY/MM/DD HH24:MI:SS'         NLS_TIMESTAMP_TZ_FORMAT='YYYY/MM/DD HH24:MI:SS TZHTZM')

OCI: Prepare(SELECT TABLE_NAME, OWNER FROM ALL_SDO_GEOM_METADATA)

ERROR 1: ORA-04043: object ORA_URBA.V_AGRI_EXPLOITATION does not exist in OCIDescribeAny
OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u,  TABLE(u.diminfo) t WHERE u.table_name = 'V_AGRI_EXPLOITATION' AND u.column_name = 'GEOMETRY')
OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME = UPPER('V_AGRI_EXPLOITATION') AND COLUMN_NAME = UPPER('GEOMETRY') AND OWNER = 'ORA_URBA')

ERROR 1: ORA-04043: object ORA_URBA.V_AGRI_EXPLOITATION_EXPLOITANT does not exist in OCIDescribeAny
OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u,  TABLE(u.diminfo) t WHERE u.table_name = 'V_AGRI_EXPLOITATION_EXPLOITANT' AND u.column_name = 'GEOMETRY')
OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME = UPPER('V_AGRI_EXPLOITATION_EXPLOITANT') AND COLUMN_NAME = UPPER('GEOMETRY') AND OWNER = 'ORA_URBA')

ERROR 1: ORA-04043: object ORA_URBA.V_AGRI_EXPLOITATION_PERIMETRE does not exist in OCIDescribeAny
OCI: Prepare(SELECT COUNT(*) FROM ALL_SDO_GEOM_METADATA u,  TABLE(u.diminfo) t WHERE u.table_name = 'V_AGRI_EXPLOITATION_PERIMETRE' AND u.column_name = 'GEOMETRY')
OCI: Prepare(SELECT SRID FROM ALL_SDO_GEOM_METADATA WHERE TABLE_NAME = UPPER('V_AGRI_EXPLOITATION_PERIMETRE') AND COLUMN_NAME = UPPER('GEOMETRY') AND OWNER = 'ORA_URBA')
ERROR 1: ORA-04043: object ORA_URBA.V_AGRI_PAC_ILOT does not exist in OCIDescribeAny

Thanks for your help

R?my Gourrat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140403/42c797ce/attachment.html>

From jomeder at ihug.co.nz  Thu Apr  3 11:42:14 2014
From: jomeder at ihug.co.nz (Jo Meder)
Date: Fri, 4 Apr 2014 07:42:14 +1300
Subject: [gdal-dev] GDALCopyWords question
In-Reply-To: <201404022024.36576.even.rouault@mines-paris.org>
References: <C54734AB-956B-49B0-8F33-C871EE81FF8B@ihug.co.nz>
	<201404022024.36576.even.rouault@mines-paris.org>
Message-ID: <A27DDE16-ADB4-446A-BC2B-45BC63031EA8@ihug.co.nz>

Hi Even,

On 3/04/2014, at 7:24 AM, Even Rouault wrote:

> you could use GDALRasterIO() that would do the conversion for you.

I was using that but changed to ReadBlock() to read files by blocks. It looks like I could use GDALRasterIO() for that but it seems a bit less straightforward.

> I think the error in your call to GDALCopyWords() is srcPixelIndex. This 
> parameter is supposed to be the number of bytes between 2 values of the source 
> buffer, but not the offset of the first value. So you should likely use :
> 
> GDALCopyWords( srcBuffer + srcPixelIndex, srcDataType, 0, &srcValue, GDT_Byte, 
> 0, 1 );

I did think to try that not long after posting my message, and it's working nicely now. The pixel offset values are more like stride values than offsets, to my mind anyway. Thanks for confirming the behaviour.

Regards,

Jo Meder

From even.rouault at mines-paris.org  Thu Apr  3 11:49:11 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 3 Apr 2014 20:49:11 +0200
Subject: [gdal-dev] GDALCopyWords question
In-Reply-To: <A27DDE16-ADB4-446A-BC2B-45BC63031EA8@ihug.co.nz>
References: <C54734AB-956B-49B0-8F33-C871EE81FF8B@ihug.co.nz>
	<201404022024.36576.even.rouault@mines-paris.org>
	<A27DDE16-ADB4-446A-BC2B-45BC63031EA8@ihug.co.nz>
Message-ID: <201404032049.11218.even.rouault@mines-paris.org>

Jo,

> The pixel offset values are more like stride values than
> offsets, to my mind anyway. Thanks for confirming the behaviour.

They are stride values indeed. I've just fixed the parameter name and 
documentation to make that clear.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Apr  3 14:29:04 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 3 Apr 2014 23:29:04 +0200
Subject: [gdal-dev] alpha mask to data value
In-Reply-To: <018CAA05-10E9-4113-B413-DBA7392011B1@kyngchaos.com>
References: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
	<5E3DBBD2-0FA7-4AF7-A30B-0F915C43C33D@kyngchaos.com>
	<018CAA05-10E9-4113-B413-DBA7392011B1@kyngchaos.com>
Message-ID: <201404032329.04437.even.rouault@mines-paris.org>

Le jeudi 03 avril 2014 23:22:17, William Kyngesburye a ?crit :
> On Apr 2, 2014, at 6:10 PM, William Kyngesburye <woklist at kyngchaos.com> 
wrote:
> > On Apr 2, 2014, at 4:33 PM, Even Rouault <even.rouault at mines-paris.org> 
wrote:
> >> Le mardi 01 avril 2014 22:14:11, William Kyngesburye a ?crit :
> >>> I've wrestled with various nodata issues in the past, now it's hitting
> >>> me again...
> >>> 
> >>> I'm using Photoshop to delete collars on scanned maps, creating an
> >>> alpha mask.  GDAL has no problem with this.  What I want to do is
> >>> merge maps together (after rectification), then set any remaining
> >>> nodata areas to white, RGB 255,255,255.  Just dropping the extra alpha
> >>> band doesn't work because nodata is set to 0,0,0, which is black.  The
> >>> a_nodata option in gdal_translate just defines what existing value in
> >>> the data is nodata.
> >>> 
> >>> I tried using gdalwarp with the -dstnodata option which should set
> >>> nodata values in the output to a specific value, but it carries along
> >>> the alpha band and ignores dstnodata.
> >>> 
> >>> gdalwarp -dstnodata "255 255 255" in.tif out.tif
> >>> Processing input file in.tif.
> >>> Using band 4 of source image as alpha.
> >>> Using band 4 of destination image as alpha.
> >> 
> >> You can perhaps try adding  -wo INIT_DEST="255,255,255,0"
> > 
> > That appears to work, though not immediately.  The raster has 255 in the
> > nodata areas, but it's not until I strip out the alpha band with
> > gdal_translate that it shows.
> > 
> > Now I see an odd artifact, or maybe bug somewhere - with nodata values in
> > an RGB image, if any one or two of the bands for a pixel are 255 while
> > the other bands are not, the pixel as a whole is treated as nodata when
> > displaying in QGIS.  Though identifying such a pixel will show nodata
> > for just the band(s) that are 255.  Photoshop has no concept of nodata
> > values, so it displays correctly (and with white for fully nodata
> > pixels).
> > 
> > I think this explains another issue I saw at one point when I had ovelap
> > when merging 2 rasters: the pixels of the top raster covered the pixels
> > of the lower at the band level, which caused the band of the lower to
> > show through when the upper band was 255, and resulted in a wild color
> > mix. ie:
> > 
> > result 127 127 127 (grey) but should have been 255 127 127
> > 
> >        ^
> > 
> > upper  255 127 127 (pink)
> > 
> >        ^
> > 
> > lower  127 127 127 (grey)
> > 
> > I think I'll save the nodata flattening to white until the end, after
> > merging.
> 
> Well, now I'm running into another problem I had previously, which is also
> why I wanted change the alpha mask to a nodata value: I can't get a vrt to
> recognize the alpha bands as nodata.
> 
> If I use a simple gdalbuildvrt with a collection of images with alpha
> masks, gdal tells me:
> 
> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=128x128 Type=Byte, ColorInterp=Alpha
> 
> Which looks correct.  But displaying in QGIS I get an alpha mask with the
> overlap areas null.
> 
> Same if I gdal_translate that to geotiff, (photoshop checkered background):
> 
> 
> 
> I tried changing the alpha band in the vrt to a mask band as described in
> the vrt tutorial docs
> 
>   <MaskBand>
>     <VRTRasterBand dataType="Byte">
>       <SimpleSource>
>       <SourceBand>mask,1</SourceBand>
>       ...
>       </SimpleSource>
>     </VRTRasterBand>
>   </MaskBand>
> 
> and then there is no mask/nodata at all.  Though converting to geotif gives
> me an extra .msk file.
> 
> also tried for the mask band:
> 
>       <SourceBand>4</SourceBand>
> 
> with same results.

Yes, (regular) VRT does not do any blending. The last file in the list takes 
precedence over the previous one in case of overlapping.
gdalwarp is the solution for that (or warped VRT).

You may want to try -wo UNIFIED_SRC_NODATA=YES as a gdalwarp option so that 
only the "255 255 255" triplet is considered as the nodata value.

Extract from code (I would have pointed to the html doc if the server wasn't 
out of service for now ):

 * - UNIFIED_SRC_NODATA=YES/[NO]: By default nodata masking values considered
 * independently for each band.  However, sometimes it is desired to treat all
 * bands as nodata if and only if, all bands match the corresponding nodata
 * values.  To get this behavior set this option to YES. 

> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> All generalizations are dangerous, even this one.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From etourigny.dev at gmail.com  Thu Apr  3 14:56:40 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 3 Apr 2014 18:56:40 -0300
Subject: [gdal-dev] alpha mask to data value
In-Reply-To: <5E3DBBD2-0FA7-4AF7-A30B-0F915C43C33D@kyngchaos.com>
References: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
	<201404022333.47535.even.rouault@mines-paris.org>
	<5E3DBBD2-0FA7-4AF7-A30B-0F915C43C33D@kyngchaos.com>
Message-ID: <CA+TxYvMgL2c7STwk7m-4Wb_R7DEAizR3D2XeUF20NXG2GvN9jA@mail.gmail.com>

On Wed, Apr 2, 2014 at 8:10 PM, William Kyngesburye
<woklist at kyngchaos.com>wrote:

> On Apr 2, 2014, at 4:33 PM, Even Rouault <even.rouault at mines-paris.org>
> wrote:
>
> > Le mardi 01 avril 2014 22:14:11, William Kyngesburye a ?crit :
> >> I've wrestled with various nodata issues in the past, now it's hitting
> me
> >> again...
> >>
> >> I'm using Photoshop to delete collars on scanned maps, creating an alpha
> >> mask.  GDAL has no problem with this.  What I want to do is merge maps
> >> together (after rectification), then set any remaining nodata areas to
> >> white, RGB 255,255,255.  Just dropping the extra alpha band doesn't work
> >> because nodata is set to 0,0,0, which is black.  The a_nodata option in
> >> gdal_translate just defines what existing value in the data is nodata.
> >>
> >> I tried using gdalwarp with the -dstnodata option which should set
> nodata
> >> values in the output to a specific value, but it carries along the alpha
> >> band and ignores dstnodata.
> >>
> >>  gdalwarp -dstnodata "255 255 255" in.tif out.tif
> >>  Processing input file in.tif.
> >>  Using band 4 of source image as alpha.
> >>  Using band 4 of destination image as alpha.
> >
> > You can perhaps try adding  -wo INIT_DEST="255,255,255,0"
>
>
> That appears to work, though not immediately.  The raster has 255 in the
> nodata areas, but it's not until I strip out the alpha band with
> gdal_translate that it shows.
>
> Now I see an odd artifact, or maybe bug somewhere - with nodata values in
> an RGB image, if any one or two of the bands for a pixel are 255 while the
> other bands are not, the pixel as a whole is treated as nodata when
> displaying in QGIS.


you may wish to file a bug report in the QGIS tracker (if there is none
yet).


> Though identifying such a pixel will show nodata for just the band(s) that
> are 255.  Photoshop has no concept of nodata values, so it displays
> correctly (and with white for fully nodata pixels).
>
> I think this explains another issue I saw at one point when I had ovelap
> when merging 2 rasters: the pixels of the top raster covered the pixels of
> the lower at the band level, which caused the band of the lower to show
> through when the upper band was 255, and resulted in a wild color mix. ie:
>
> result 127 127 127 (grey) but should have been 255 127 127
>         ^
> upper  255 127 127 (pink)
>         ^
> lower  127 127 127 (grey)
>
> I think I'll save the nodata flattening to white until the end, after
> merging.
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> Earth: "Mostly harmless"
>
> - revised entry in the HitchHiker's Guide to the Galaxy
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140403/51aadcd2/attachment.html>

From jukka.rahkonen at mmmtike.fi  Fri Apr  4 04:16:59 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 4 Apr 2014 11:16:59 +0000 (UTC)
Subject: [gdal-dev] Map generalization competition
Message-ID: <loom.20140404T131433-20@post.gmane.org>

Hi,

I noticed that there is a map generalization competition going on if someone
gets interested
http://mypages.iit.edu/~xzhang22/GISCUP2014/index.php

-Jukka Rahkonen-


From woklist at kyngchaos.com  Fri Apr  4 07:08:47 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri, 4 Apr 2014 09:08:47 -0500
Subject: [gdal-dev] alpha mask to data value
In-Reply-To: <201404032329.04437.even.rouault@mines-paris.org>
References: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
	<5E3DBBD2-0FA7-4AF7-A30B-0F915C43C33D@kyngchaos.com>
	<018CAA05-10E9-4113-B413-DBA7392011B1@kyngchaos.com>
	<201404032329.04437.even.rouault@mines-paris.org>
Message-ID: <B17E11BC-1F5B-4C17-A215-7587F7FAE9E0@kyngchaos.com>

On Apr 3, 2014, at 4:29 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le jeudi 03 avril 2014 23:22:17, William Kyngesburye a ?crit :
>> On Apr 2, 2014, at 6:10 PM, William Kyngesburye <woklist at kyngchaos.com> 
> wrote:
>>> 
>>> I think this explains another issue I saw at one point when I had ovelap
>>> when merging 2 rasters: the pixels of the top raster covered the pixels
>>> of the lower at the band level, which caused the band of the lower to
>>> show through when the upper band was 255, and resulted in a wild color
>>> mix. ie:
>>> 
>>> result 127 127 127 (grey) but should have been 255 127 127
>>>      ^
>>> upper  255 127 127 (pink)
>>>       ^
>>> lower  127 127 127 (grey)
>>> 
>>> I think I'll save the nodata flattening to white until the end, after
>>> merging.
>> 
>> Well, now I'm running into another problem I had previously, which is also
>> why I wanted change the alpha mask to a nodata value: I can't get a vrt to
>> recognize the alpha bands as nodata.
>> 
>> If I use a simple gdalbuildvrt with a collection of images with alpha
>> masks, gdal tells me:
>> 
>> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>>  Mask Flags: PER_DATASET ALPHA
>> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>>  Mask Flags: PER_DATASET ALPHA
>> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>>  Mask Flags: PER_DATASET ALPHA
>> Band 4 Block=128x128 Type=Byte, ColorInterp=Alpha
>> 
>> Which looks correct.  But displaying in QGIS I get an alpha mask with the
>> overlap areas null.
>> 
>> Same if I gdal_translate that to geotiff, (photoshop checkered background):
>> 
>> 
>> 
>> I tried changing the alpha band in the vrt to a mask band as described in
>> the vrt tutorial docs
>> 
>>  <MaskBand>
>>    <VRTRasterBand dataType="Byte">
>>      <SimpleSource>
>>      <SourceBand>mask,1</SourceBand>
>>      ...
>>      </SimpleSource>
>>    </VRTRasterBand>
>>  </MaskBand>
>> 
>> and then there is no mask/nodata at all.  Though converting to geotif gives
>> me an extra .msk file.
>> 
>> also tried for the mask band:
>> 
>>      <SourceBand>4</SourceBand>
>> 
>> with same results.
> 
> Yes, (regular) VRT does not do any blending. The last file in the list takes 
> precedence over the previous one in case of overlapping.
> gdalwarp is the solution for that (or warped VRT).
> 
> You may want to try -wo UNIFIED_SRC_NODATA=YES as a gdalwarp option so that 
> only the "255 255 255" triplet is considered as the nodata value.
> 
> Extract from code (I would have pointed to the html doc if the server wasn't 
> out of service for now ):
> 
> * - UNIFIED_SRC_NODATA=YES/[NO]: By default nodata masking values considered
> * independently for each band.  However, sometimes it is desired to treat all
> * bands as nodata if and only if, all bands match the corresponding nodata
> * values.  To get this behavior set this option to YES. 


 -wo UNIFIED_SRC_NODATA=YES works on a nodata value vrt.  So I do all the work (clean, rectify, project) with alpha-masked tifs, then convert to nodata values for the the vrt (because it doesn't like alpha masks), back to alpha mask tif for the whole merged image using the UNIFIED_SRC_NODATA and INIT_DEST options, then strip out the alpha band to get a white background.  phwew!

It stills seems like there is something wrong with a vrt and alpha nodata bands.  I understand how it overlays each source over the previous ones.  So, it should take into account the nodata mask in what form it is for a source, then overlay the remaining pixels on the full image.  This is what it does when the sources have nodata values.  But when the sources have alpha nodata masks (if I leave the generated vrt alone and don't change it to a MaskBand), it appears to instead combine the alpha bands and data bands separately and apply the merged alpha band to the merged data bands.

Is this normal (and why)?  Or a bug?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From david.tran at hsr.ch  Fri Apr  4 07:31:12 2014
From: david.tran at hsr.ch (David Tran)
Date: Fri, 4 Apr 2014 16:31:12 +0200
Subject: [gdal-dev] DEFECT --without-libtool, somebody else?
Message-ID: <533EC230.2090907@hsr.ch>

Hi to everybody

I just tried to compile gdal (>=1.9.2) with --without-libtool flag and 
it shows me with ./configure --without-libtool that it is not included 
with a "no", but "make" ends sometime later with an ERROR.

Is there a fix or would somebody mind to verify the bug?

Cheers
David

From even.rouault at mines-paris.org  Fri Apr  4 08:48:28 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 04 Apr 2014 17:48:28 +0200
Subject: [gdal-dev] DEFECT --without-libtool, somebody else?
In-Reply-To: <533EC230.2090907@hsr.ch>
References: <533EC230.2090907@hsr.ch>
Message-ID: <1396626508.533ed44c634b1@imp.free.fr>

What is the text or the error ?

> Hi to everybody
>
> I just tried to compile gdal (>=1.9.2) with --without-libtool flag and
> it shows me with ./configure --without-libtool that it is not included
> with a "no", but "make" ends sometime later with an ERROR.
>
> Is there a fix or would somebody mind to verify the bug?
>
> Cheers
> David
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From david.tran at hsr.ch  Fri Apr  4 09:26:42 2014
From: david.tran at hsr.ch (David Tran)
Date: Fri, 4 Apr 2014 18:26:42 +0200
Subject: [gdal-dev] DEFECT --without-libtool, somebody else?
In-Reply-To: <1396626508.533ed44c634b1@imp.free.fr>
References: <533EC230.2090907@hsr.ch> <1396626508.533ed44c634b1@imp.free.fr>
Message-ID: <533EDD42.8050009@hsr.ch>

> /bin/sh: /mingw/bin/ar: Bad file number
> make[1]: *** [/home/David/gdal-1.10.1/libgdal.a] Error 126
> make[1]: Leaving directory `/home/David/gdal-1.10.1'
> make: *** [check-lib] Error 2


-------- Original Message  --------
Subject: Re: [gdal-dev] DEFECT --without-libtool, somebody else?
From: Even Rouault <even.rouault at mines-paris.org>
To: David Tran <david.tran at hsr.ch>
Date: Friday, 4. April 2014 17:48:28

> What is the text or the error ?
>
>> Hi to everybody
>>
>> I just tried to compile gdal (>=1.9.2) with --without-libtool flag and
>> it shows me with ./configure --without-libtool that it is not included
>> with a "no", but "make" ends sometime later with an ERROR.
>>
>> Is there a fix or would somebody mind to verify the bug?
>>
>> Cheers
>> David
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
>

From even.rouault at mines-paris.org  Fri Apr  4 10:44:05 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 4 Apr 2014 19:44:05 +0200
Subject: [gdal-dev] DEFECT --without-libtool, somebody else?
In-Reply-To: <533EDD42.8050009@hsr.ch>
References: <533EC230.2090907@hsr.ch> <1396626508.533ed44c634b1@imp.free.fr>
	<533EDD42.8050009@hsr.ch>
Message-ID: <201404041944.05902.even.rouault@mines-paris.org>

Le vendredi 04 avril 2014 18:26:42, David Tran a ?crit :
> > /bin/sh: /mingw/bin/ar: Bad file number
> > make[1]: *** [/home/David/gdal-1.10.1/libgdal.a] Error 126
> > make[1]: Leaving directory `/home/David/gdal-1.10.1'
> > make: *** [check-lib] Error 2

oh mingw... Well it is probably a bad idea to try --without-libtool on a mingw 
build.

> 
> -------- Original Message  --------
> Subject: Re: [gdal-dev] DEFECT --without-libtool, somebody else?
> From: Even Rouault <even.rouault at mines-paris.org>
> To: David Tran <david.tran at hsr.ch>
> Date: Friday, 4. April 2014 17:48:28
> 
> > What is the text or the error ?
> > 
> >> Hi to everybody
> >> 
> >> I just tried to compile gdal (>=1.9.2) with --without-libtool flag and
> >> it shows me with ./configure --without-libtool that it is not included
> >> with a "no", but "make" ends sometime later with an ERROR.
> >> 
> >> Is there a fix or would somebody mind to verify the bug?
> >> 
> >> Cheers
> >> David
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Fri Apr  4 12:43:52 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 4 Apr 2014 21:43:52 +0200
Subject: [gdal-dev] alpha mask to data value
In-Reply-To: <B17E11BC-1F5B-4C17-A215-7587F7FAE9E0@kyngchaos.com>
References: <14ECC850-A076-48B3-BA7E-F7E176983FC2@kyngchaos.com>
	<201404032329.04437.even.rouault@mines-paris.org>
	<B17E11BC-1F5B-4C17-A215-7587F7FAE9E0@kyngchaos.com>
Message-ID: <201404042143.52948.even.rouault@mines-paris.org>

Le vendredi 04 avril 2014 16:08:47, William Kyngesburye a ?crit :
> On Apr 3, 2014, at 4:29 PM, Even Rouault <even.rouault at mines-paris.org> 
wrote:
> > Le jeudi 03 avril 2014 23:22:17, William Kyngesburye a ?crit :
> >> On Apr 2, 2014, at 6:10 PM, William Kyngesburye <woklist at kyngchaos.com>
> > 
> > wrote:
> >>> I think this explains another issue I saw at one point when I had
> >>> ovelap when merging 2 rasters: the pixels of the top raster covered
> >>> the pixels of the lower at the band level, which caused the band of
> >>> the lower to show through when the upper band was 255, and resulted in
> >>> a wild color mix. ie:
> >>> 
> >>> result 127 127 127 (grey) but should have been 255 127 127
> >>> 
> >>>      ^
> >>> 
> >>> upper  255 127 127 (pink)
> >>> 
> >>>       ^
> >>> 
> >>> lower  127 127 127 (grey)
> >>> 
> >>> I think I'll save the nodata flattening to white until the end, after
> >>> merging.
> >> 
> >> Well, now I'm running into another problem I had previously, which is
> >> also why I wanted change the alpha mask to a nodata value: I can't get
> >> a vrt to recognize the alpha bands as nodata.
> >> 
> >> If I use a simple gdalbuildvrt with a collection of images with alpha
> >> masks, gdal tells me:
> >> 
> >> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
> >> 
> >>  Mask Flags: PER_DATASET ALPHA
> >> 
> >> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
> >> 
> >>  Mask Flags: PER_DATASET ALPHA
> >> 
> >> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
> >> 
> >>  Mask Flags: PER_DATASET ALPHA
> >> 
> >> Band 4 Block=128x128 Type=Byte, ColorInterp=Alpha
> >> 
> >> Which looks correct.  But displaying in QGIS I get an alpha mask with
> >> the overlap areas null.
> >> 
> >> Same if I gdal_translate that to geotiff, (photoshop checkered
> >> background):
> >> 
> >> 
> >> 
> >> I tried changing the alpha band in the vrt to a mask band as described
> >> in the vrt tutorial docs
> >> 
> >>  <MaskBand>
> >>  
> >>    <VRTRasterBand dataType="Byte">
> >>    
> >>      <SimpleSource>
> >>      <SourceBand>mask,1</SourceBand>
> >>      ...
> >>      </SimpleSource>
> >>    
> >>    </VRTRasterBand>
> >>  
> >>  </MaskBand>
> >> 
> >> and then there is no mask/nodata at all.  Though converting to geotif
> >> gives me an extra .msk file.
> >> 
> >> also tried for the mask band:
> >>      <SourceBand>4</SourceBand>
> >> 
> >> with same results.
> > 
> > Yes, (regular) VRT does not do any blending. The last file in the list
> > takes precedence over the previous one in case of overlapping.
> > gdalwarp is the solution for that (or warped VRT).
> > 
> > You may want to try -wo UNIFIED_SRC_NODATA=YES as a gdalwarp option so
> > that only the "255 255 255" triplet is considered as the nodata value.
> > 
> > Extract from code (I would have pointed to the html doc if the server
> > wasn't out of service for now ):
> > 
> > * - UNIFIED_SRC_NODATA=YES/[NO]: By default nodata masking values
> > considered * independently for each band.  However, sometimes it is
> > desired to treat all * bands as nodata if and only if, all bands match
> > the corresponding nodata * values.  To get this behavior set this option
> > to YES.
> 
>  -wo UNIFIED_SRC_NODATA=YES works on a nodata value vrt.  So I do all the
> work (clean, rectify, project) with alpha-masked tifs, then convert to
> nodata values for the the vrt (because it doesn't like alpha masks), back
> to alpha mask tif for the whole merged image using the UNIFIED_SRC_NODATA
> and INIT_DEST options, then strip out the alpha band to get a white
> background.  phwew!

Hum, I confess I've not followed all your attempts and may have confused 
nodata and alpha. But I think that gdalwarp + INIT_DEST should normally do the 
job.

> 
> It stills seems like there is something wrong with a vrt and alpha nodata
> bands.  I understand how it overlays each source over the previous ones. 
> So, it should take into account the nodata mask in what form it is for a
> source, then overlay the remaining pixels on the full image.  This is what
> it does when the sources have nodata values.  But when the sources have
> alpha nodata masks (if I leave the generated vrt alone and don't change it
> to a MaskBand), it appears to instead combine the alpha bands and data
> bands separately and apply the merged alpha band to the merged data bands.
> 
> Is this normal (and why)?  Or a bug?

Normal in the sense that what you observe is the consequence of the code ;-)

There's specific code to deal with nodata values when overlaying sources in the 
VRT band, but no for alpha currently. I'm not sure if there are use cases 
where the current behaviour would make sense. If not, then it could likely be 
fixed. If there are use cases for the current behaviour, an option in the VRT 
could select the intended behaviour.

> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
> 
> - Marvin

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Fri Apr  4 13:19:48 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 4 Apr 2014 22:19:48 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
Message-ID: <201404042219.48550.even.rouault@mines-paris.org>

Hi,

I have prepared a GDAL/OGR 1.11.0 first beta release. The source archives can 
be found at :

  http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.gz
  http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.xz
  http://download.osgeo.org/gdal/1.11.0/gdal1110beta1.zip

The NEWS for the release can be found at the top of:

  http://svn.osgeo.org/gdal/trunk/gdal/NEWS

As usual, you are warmly invited to test and report (ideally with patches) 
anything that must be fixed before the release : http://trac.osgeo.org/gdal/

There will be perhaps another beta, but if things go smoothly, the next step 
will be RC1 (let's say end of next week).

Note: due to the current unavailability of gdal.org, which is the machine on 
which releases are usually prepared, I've created the snapshot on my PC. 
Hopefully this will have no consequence on the above archives.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From dave.dehaan at sap.com  Sat Apr  5 00:22:33 2014
From: dave.dehaan at sap.com (DeHaan, Dave)
Date: Sat, 5 Apr 2014 07:22:33 +0000
Subject: [gdal-dev] OGR SQLAnywhere driver
Message-ID: <4BCB480CFC693741AB7B875E0BC3A2B5886B8782@DEWDFEMB19C.global.corp.sap>

Hello,

I recently mentioned on gdal-dev that we would like to contribute an OGR driver for SAP SQL Anywhere.  I have opened ticket 5430 http://trac.osgeo.org/gdal/ticket/5430 to track this.  A patch file is attached to the ticket.



My apologies for not getting this uploaded before the 1.11.0 first beta was prepared.  We would certainly like to get this into 1.11.0 RC1 if at all possible (sorry for the tight timeline).



Best regards,

Dave DeHaan


Dr. David DeHaan
PI HANA Plat DM
SAP Canada
445 Wes Graham Way
Waterloo, ON N2L 6R2, Canada
T (519) 883-6487
F (519) 747-4971
E dave.dehaan at sap.com<mailto:dave.dehaan at sap.com>
<www.sap.com<http://www.sap.com>>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140405/60097f18/attachment.html>

From even.rouault at mines-paris.org  Sat Apr  5 02:23:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Apr 2014 11:23:43 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
	Python bindings to read OSM PBF file
In-Reply-To: <533C68D3.4030406@gmail.com>
References: <533AF6B1.1010804@gmail.com>
	<201404022138.28707.even.rouault@mines-paris.org>
	<533C68D3.4030406@gmail.com>
Message-ID: <201404051123.43725.even.rouault@mines-paris.org>

Le mercredi 02 avril 2014 21:45:23, Dra?en Odoba?i? a ?crit :
> On 02.04.2014 21:38, Even Rouault wrote:
> >> I had no issues when reading large PBF files using this method. For the
> >> large files, without OSM_USE_CUSTOM_INDEXING=NO I got lots of "Cannot
> >> read node ..." error messages, and I'm not sure why. Basically I
> >> stumbled onto OSM_USE_CUSTOM_INDEXING=NO which seems to help. However,
> >> in this case custom indexing has no effect, script still fails to
> >> extract data.
> > 
> > Hum, there might be a bug in custom indexing that you've hit. What is the
> > PBF file you are converting ?
> > 
> > And to be sure to understand: when setting OSM_USE_CUSTOM_INDEXING=NO,
> > the conversion works ?
> 
> Yes, converting http://download.geofabrik.de/north-america-latest.osm.pbf
> (5.9G), works only with manually overridden OSM_USE_CUSTOM_INDEXING=NO

Dra?en,

I've successfully converted the north-america-latest.osm.pbf with GDAL 
1.11beta1 (Linux 64bit system) without having to override 
OSM_USE_CUSTOM_INDEXING. But the code of the OSM driver hasn't changed 
significantly w.r.t. 1.10 so I'm not sure why you get an error...

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From sfkeller at gmail.com  Sat Apr  5 03:17:16 2014
From: sfkeller at gmail.com (Stefan Keller)
Date: Sat, 5 Apr 2014 12:17:16 +0200
Subject: [gdal-dev] Considerations around WFS layer and ArcGIS REST API
	Connector Plugin
Message-ID: <CAFcOn2-ptNKJSrS9TfZd5uBptc4xsEYp7phxNnmQgwYab1jv0g@mail.gmail.com>

Hi Devs,

Tobias and I are working on the "ArcGIS REST API Connector Plugin" which
reads WFS- and WMTS-alike services (called Feature Service and Map Service)
from ArcGIS Online or ArcGIS Server 10.x. Let's call this a connection of
type "ArcGIS Layer", which creates a vector layer (in memory).

1. When entering a new WFS Layer connection and loading it as a new project
layer, I know that the WFS URL is stored in the project file - and Username
and Password (as hash?) also are stored there, right?

2. WFS can be deliver huge number of features. A WFS layer obviously reads
all(!) features into memory when loading first time. Should'nt be there a
limit "Max. no. features" per connection in the WFS connection (and in
ours) in order to prevent memory overflow? (if this is considered a hack, a
local indexed cache file would become necessary...).

3. Since WFS is a service, it can be updated anytime and the WFS layer in
QGIS becomes outdated.Should'nt be there a "Refresh" button in the WFS
layer (and in ours)?

4. How can the QGIS project file be extended in order to a) store
additional parameters - like this "Max. no. features" - per layer. And b):
how can an own connection type - like ArcGIS Layer - be added to the
project file, so that QGIS calls our plugin, when the project/layer is
(re-)loaded?

5. WFS "only" supports basic authentication. How about NTLM [2] and OAuth?

Yours,
Stefan

[1] http://giswiki.hsr.ch/QGIS_ArcGIS_REST_API_Connector_Plugin
[2] http://de.wikipedia.org/wiki/NTLM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140405/b3a81b61/attachment.html>

From landa.martin at gmail.com  Sat Apr  5 03:36:21 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 5 Apr 2014 12:36:21 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201403191117.35453.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395162283.53287cabd2f8c@imp.free.fr>
	<loom.20140318T225118-104@post.gmane.org>
	<201403191117.35453.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1Od_cW52PgHK-eL+bRxXrx9cgJJGKm2kuqYP=3f+xafLig@mail.gmail.com>

Dear Even,

2014-03-19 11:17 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:

> Just for Martin's enlightment, the GML driver manages to recognize several
> layers in that case since the RekisteriyksikonTietoja is the top feature
> present in the first bytes of the file, and the other feature types are sub
> feature types, also defined in RekisteriyksikonTietoja.xsd. In the case, the
> schema were simple enough so that the XSD parser could understand them.
>
> For Martin's case, I think that a .gfs will be necessary to extract properties
> in nested XML elements.

thanks a lot for your notes, it helped a lot. When working on support
for this format in OGR I found two problems.

First is related to GML registry. The input file contains different
layers based on its internal type (TypSouboru). For each of these
types are prepared separated GFS file.

    <!-- Czech VFR schame-->
    <namespace prefix="vf"
               uri="urn:cz:isvs:ruian:schemas:VymennyFormatTypy:v1
../ruian/xsd/vymenny_format/VymennyFormatTypy.xsd"
               useGlobalSRSName="true">
        <featureType elementName="TypSouboru"
                     elementValue="OB_UKSH"
                     gfsSchemaLocation="vfr_ob_uksh_v1.gfs"/>
        <featureType elementName="TypSouboru"
                     elementValue="ST_UKSH"
                     gfsSchemaLocation="vfr_st_uksh_v1.gfs"/>
        <featureType elementName="TypSouboru"
                     elementValue="ST_UKSG"
                     gfsSchemaLocation="vfr_st_uksg_v1.gfs"/>
    </namespace>

I have added a new attribute to 'osElementValue' to
'GMLRegistryFeatureType' class (see attached 'gmlregistry.diff' file).
Then the library also checks value of 'elementName' and if it's
defined and than uses related GFS.

The second problem is related to class and tag names. The layer names
are in plural form, features in singular form, eg.

<data>
  <cities>
   <city>
   ...
   </city>
  </cities>
</data>

To allow GML driver to create layer 'cities' I need to modify
'GMLHandler::startElementDefault()' method, see 'gmlhandler.diff'.

Thanks for any comments in advance, Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
-------------- next part --------------
Index: ogr/ogrsf_frmts/gml/gmlregistry.cpp
===================================================================
--- ogr/ogrsf_frmts/gml/gmlregistry.cpp	(revision 27127)
+++ ogr/ogrsf_frmts/gml/gmlregistry.cpp	(working copy)
@@ -110,6 +110,7 @@
 int GMLRegistryFeatureType::Parse(const char* pszRegistryFilename, CPLXMLNode* psNode)
 {
     const char* pszElementName = CPLGetXMLValue(psNode, "elementName", NULL);
+    const char* pszElementValue = CPLGetXMLValue(psNode, "elementValue", NULL);
     const char* pszSchemaLocation = CPLGetXMLValue(psNode, "schemaLocation", NULL);
     const char* pszGFSSchemaLocation = CPLGetXMLValue(psNode, "gfsSchemaLocation", NULL);
     if( pszElementName == NULL || (pszSchemaLocation == NULL && pszGFSSchemaLocation == NULL) )
@@ -139,5 +140,10 @@
         osGFSSchemaLocation = pszGFSSchemaLocation;
     }
 
+    if ( pszElementValue != NULL )
+    {
+        osElementValue = pszElementValue; 
+    }
+
     return TRUE;
 }
Index: ogr/ogrsf_frmts/gml/gmlregistry.h
===================================================================
--- ogr/ogrsf_frmts/gml/gmlregistry.h	(revision 27127)
+++ ogr/ogrsf_frmts/gml/gmlregistry.h	(working copy)
@@ -39,6 +39,7 @@
 {
     public:
         CPLString                           osElementName;
+        CPLString                           osElementValue;
         CPLString                           osSchemaLocation;
         CPLString                           osGFSSchemaLocation;
 
Index: ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp
===================================================================
--- ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp	(revision 27127)
+++ ogr/ogrsf_frmts/gml/ogrgmldatasource.cpp	(working copy)
@@ -758,16 +758,26 @@
                     {
                         if( oNamespace.bUseGlobalSRSName )
                             bUseGlobalSRSName = TRUE;
-
+                        
                         for( size_t iTypename = 0;
                                     iTypename < oNamespace.aoFeatureTypes.size();
                                     iTypename ++ )
                         {
+                            const char* pszElementToFind = NULL;
+                            
                             GMLRegistryFeatureType& oFeatureType =
                                         oNamespace.aoFeatureTypes[iTypename];
-                            const char* pszElementToFind =
-                                CPLSPrintf("%s:%s", oNamespace.osPrefix.c_str(),
-                                           oFeatureType.osElementName.c_str());
+                            
+                            if ( oFeatureType.osElementValue.size() ) 
+                                pszElementToFind = CPLSPrintf("%s:%s>%s",
+                                                              oNamespace.osPrefix.c_str(),
+                                                              oFeatureType.osElementName.c_str(),
+                                                              oFeatureType.osElementValue.c_str());
+                            else
+                                pszElementToFind = CPLSPrintf("%s:%s",
+                                                              oNamespace.osPrefix.c_str(),
+                                                              oFeatureType.osElementName.c_str());
+                            
                             if( osHeader.ifind(pszElementToFind) != std::string::npos )
                             {
                                 if( oFeatureType.osSchemaLocation.size() )
-------------- next part --------------
Index: ogr/ogrsf_frmts/gml/gmlhandler.cpp
===================================================================
--- ogr/ogrsf_frmts/gml/gmlhandler.cpp	(revision 27127)
+++ ogr/ogrsf_frmts/gml/gmlhandler.cpp	(working copy)
@@ -1262,12 +1262,28 @@
                 strcmp(pszName, "FeatureCollection") == 0)) &&
              (nClassIndex = m_poReader->GetFeatureElementIndex( pszName, nLenName, eAppSchemaType )) != -1 )
     {
+        const char *pszElementName = NULL;
+        CPLString pszFilteredElementName;
+        
         m_bAlreadyFoundGeometry = FALSE;
 
-        pszFilteredClassName = m_poReader->GetFilteredClassName();
-        if ( pszFilteredClassName != NULL &&
-             strcmp(pszName, pszFilteredClassName) != 0 )
+        if ( nClassIndex < m_poReader->GetClassCount() )
+            pszElementName = m_poReader->GetClass( nClassIndex )->GetElementName();
+        pszFilteredClassName = (char *)m_poReader->GetFilteredClassName();
+        
+        if ( pszElementName != NULL )
         {
+            if ( pszElementName[m_poReader->GetState()->osPath.size()] == '|' )
+                pszFilteredElementName = pszElementName + 1 + m_poReader->GetState()->osPath.size();
+            else
+                pszFilteredElementName = (char *) pszElementName;
+        }
+        
+
+        if ( pszFilteredClassName != NULL && pszFilteredElementName != NULL &&
+             strcmp(pszName, !pszFilteredElementName.empty() ?
+                    pszFilteredElementName.c_str() : pszFilteredClassName) != 0 )
+        {
             m_nDepthFeature = m_nDepth;
 
             PUSH_STATE(STATE_IGNORED_FEATURE);
@@ -1285,7 +1301,8 @@
                     m_poReader->SetFeaturePropertyDirectly( "gid", pszGID, -1, GMLPT_String );
             }
             else
-                m_poReader->PushFeature( pszName, GetFID(attr), nClassIndex );
+                m_poReader->PushFeature( pszFilteredClassName ? pszFilteredClassName : pszName,
+                                         GetFID(attr), nClassIndex );
 
             m_nDepthFeature = m_nDepth;
 

From even.rouault at mines-paris.org  Sat Apr  5 04:17:21 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Apr 2014 13:17:21 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1Od_cW52PgHK-eL+bRxXrx9cgJJGKm2kuqYP=3f+xafLig@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201403191117.35453.even.rouault@mines-paris.org>
	<CA+Ei1Od_cW52PgHK-eL+bRxXrx9cgJJGKm2kuqYP=3f+xafLig@mail.gmail.com>
Message-ID: <201404051317.21546.even.rouault@mines-paris.org>

Martin,

gmlregistry.diff looks fine, but it would be good to document elementValue in 
drv_gml.html

As far as gmlhandler.diff is concerned, serveral issues :
- naming convention : "CPLString pszFilteredElementName" should be "CPLString 
osFilteredElementName"
- if ( pszElementName[m_poReader->GetState()->osPath.size()] == '|' ) : there 
should be an extra test to check that strlen(pszElementName) > m_poReader-
>GetState()->osPath.size()
- the casts to (char*) are useless

All in all, I think that the more simpler solution would be to drop that patch 
and rather modify the call to SetFilteredClassName() at line 130 of 
ogrgmllayer.cpp to something like this :

if (poDS->GetLayerCount() > 1 && poDS->GetReadMode() == STANDARD)
{
    const char* pszElementName = poFClass->GetElementName();
    const char* pszLastPipe = strrchr(pszElementName, '|');
    if( pszLastPipe != NULL )
         pszElementName = pszLastPipe + 1;
    poDS->GetReader()->SetFilteredClassName(pszElementName);
}

This is completely untested of course...

Even

> Dear Even,
> 
> 2014-03-19 11:17 GMT+01:00 Even Rouault <even.rouault at mines-paris.org>:
> > Just for Martin's enlightment, the GML driver manages to recognize
> > several layers in that case since the RekisteriyksikonTietoja is the top
> > feature present in the first bytes of the file, and the other feature
> > types are sub feature types, also defined in
> > RekisteriyksikonTietoja.xsd. In the case, the schema were simple enough
> > so that the XSD parser could understand them.
> > 
> > For Martin's case, I think that a .gfs will be necessary to extract
> > properties in nested XML elements.
> 
> thanks a lot for your notes, it helped a lot. When working on support
> for this format in OGR I found two problems.
> 
> First is related to GML registry. The input file contains different
> layers based on its internal type (TypSouboru). For each of these
> types are prepared separated GFS file.
> 
>     <!-- Czech VFR schame-->
>     <namespace prefix="vf"
>                uri="urn:cz:isvs:ruian:schemas:VymennyFormatTypy:v1
> ../ruian/xsd/vymenny_format/VymennyFormatTypy.xsd"
>                useGlobalSRSName="true">
>         <featureType elementName="TypSouboru"
>                      elementValue="OB_UKSH"
>                      gfsSchemaLocation="vfr_ob_uksh_v1.gfs"/>
>         <featureType elementName="TypSouboru"
>                      elementValue="ST_UKSH"
>                      gfsSchemaLocation="vfr_st_uksh_v1.gfs"/>
>         <featureType elementName="TypSouboru"
>                      elementValue="ST_UKSG"
>                      gfsSchemaLocation="vfr_st_uksg_v1.gfs"/>
>     </namespace>
> 
> I have added a new attribute to 'osElementValue' to
> 'GMLRegistryFeatureType' class (see attached 'gmlregistry.diff' file).
> Then the library also checks value of 'elementName' and if it's
> defined and than uses related GFS.
> 
> The second problem is related to class and tag names. The layer names
> are in plural form, features in singular form, eg.
> 
> <data>
>   <cities>
>    <city>
>    ...
>    </city>
>   </cities>
> </data>
> 
> To allow GML driver to create layer 'cities' I need to modify
> 'GMLHandler::startElementDefault()' method, see 'gmlhandler.diff'.
> 
> Thanks for any comments in advance, Martin

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lhomme.xavier at gmail.com  Sat Apr  5 10:27:25 2014
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Sat, 5 Apr 2014 19:27:25 +0200
Subject: [gdal-dev] Considerations around WFS layer and ArcGIS REST API
 Connector Plugin
In-Reply-To: <CAFcOn2-ptNKJSrS9TfZd5uBptc4xsEYp7phxNnmQgwYab1jv0g@mail.gmail.com>
References: <CAFcOn2-ptNKJSrS9TfZd5uBptc4xsEYp7phxNnmQgwYab1jv0g@mail.gmail.com>
Message-ID: <CACqzBMxGCB+zqz2SW7730QUUAABmbKt1L7LN5cVppMLikpO4sw@mail.gmail.com>

Beginning with  10.1 the ArcGIS REST API introduces the maxRecordCount
property for MapServer and FeatureServer.

See
http://sampleserver5.arcgisonline.com/arcgis/rest/services/CommercialDamageAssessment/FeatureServer?f=pjson

The value can be change when publishing the service.

If you want to obtain all feature, you should first request with
returnCountOnly,
then query as many times as you need using the layerDef property and the
ObjectID field...

xl



>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140405/0c59ea17/attachment.html>

From landa.martin at gmail.com  Sat Apr  5 13:04:02 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 5 Apr 2014 22:04:02 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201404051317.21546.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201403191117.35453.even.rouault@mines-paris.org>
	<CA+Ei1Od_cW52PgHK-eL+bRxXrx9cgJJGKm2kuqYP=3f+xafLig@mail.gmail.com>
	<201404051317.21546.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OfDuNVLjoKYsrbp_bZsSQxzGU_ybqz+T6UmwjJz6TmX5Q@mail.gmail.com>

Hi Even,

2014-04-05 13:17 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> gmlregistry.diff looks fine, but it would be good to document elementValue in
> drv_gml.html

I will prepare such patch tomorrow.

> All in all, I think that the more simpler solution would be to drop that patch
> and rather modify the call to SetFilteredClassName() at line 130 of
> ogrgmllayer.cpp to something like this :
>
> if (poDS->GetLayerCount() > 1 && poDS->GetReadMode() == STANDARD)
> {
>     const char* pszElementName = poFClass->GetElementName();
>     const char* pszLastPipe = strrchr(pszElementName, '|');
>     if( pszLastPipe != NULL )
>          pszElementName = pszLastPipe + 1;
>     poDS->GetReader()->SetFilteredClassName(pszElementName);
> }
>
> This is completely untested of course...

ah, this seems to be much more better solution! It seems to work, I
will do more tests later tomorrow.

Thanks a lot, Martin

From even.rouault at mines-paris.org  Sat Apr  5 13:10:46 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Apr 2014 22:10:46 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1OfDuNVLjoKYsrbp_bZsSQxzGU_ybqz+T6UmwjJz6TmX5Q@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404051317.21546.even.rouault@mines-paris.org>
	<CA+Ei1OfDuNVLjoKYsrbp_bZsSQxzGU_ybqz+T6UmwjJz6TmX5Q@mail.gmail.com>
Message-ID: <201404052210.46953.even.rouault@mines-paris.org>

Martin,

> 
> I will prepare such patch tomorrow.

Good

> 
> ah, this seems to be much more better solution! It seems to work, I
> will do more tests later tomorrow.

Try to run the autotest/ogr/ogr_gml_read.py tests to check that it doesn't 
cause regressions. And it would be good if you could add new test for your new 
code

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sat Apr  5 13:24:14 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 5 Apr 2014 22:24:14 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201404052210.46953.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404051317.21546.even.rouault@mines-paris.org>
	<CA+Ei1OfDuNVLjoKYsrbp_bZsSQxzGU_ybqz+T6UmwjJz6TmX5Q@mail.gmail.com>
	<201404052210.46953.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OfziTj-EvnSBYYCTxgr51N2iCdhu1uPbijHaKh9FTCPpQ@mail.gmail.com>

Hi Even,

2014-04-05 22:10 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

there is another issue which I would like to solve.

The layers contain multiple geometries (MultiPoint and MultiPolygon),
the relevant tags are

<cities>
 <city>
  <geometry>
   <point></point>
   <polygon></polygon>
  </geometry>
 </city>
</cities>

In related GFS I have defined:

  <GMLFeatureClass>
    <Name>cities</Name>
    <ElementPath>cities|city</ElementPath>
    <SRSName>urn:ogc:def:crs:EPSG::5514</SRSName>
    <GeometryType>4</GeometryType>
    <GeometryElementPath>geometry|point</GeometryElementPath>
    <!-- OriginalniHranice -->
    <GeometryType>6</GeometryType>
    <GeometryElementPath>geometry|polygon</GeometryElementPath>
    ...
  </GMLFeatureClass>

Is there any way how to set names also for geometry tags? Similar to
properties, eg.

    <PropertyDefn>
      <Name>myname</Name>
      <ElementPath>tagname</ElementPath>
    </PropertyDefn>

I would like to name them without 'geometry|' part...

Another issue is related to SRS, it's geometry-oriented, ie. it's
reported twice in this case - separately for each geometry type. I
would prefer layer-based SRS in this case...

 SRS WKT (geometry|point):
PROJCS["S-JTSK / Krovak East North",
 ...
SRS WKT (geometry|polygon):
PROJCS["S-JTSK / Krovak East North",
 ...

Thanks for any pointers in advance, Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Sat Apr  5 13:38:51 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Apr 2014 22:38:51 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1OfziTj-EvnSBYYCTxgr51N2iCdhu1uPbijHaKh9FTCPpQ@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404052210.46953.even.rouault@mines-paris.org>
	<CA+Ei1OfziTj-EvnSBYYCTxgr51N2iCdhu1uPbijHaKh9FTCPpQ@mail.gmail.com>
Message-ID: <201404052238.51117.even.rouault@mines-paris.org>

Le samedi 05 avril 2014 22:24:14, Martin Landa a ?crit :
> Hi Even,
> 
> 2014-04-05 22:10 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> 
> there is another issue which I would like to solve.
> 
> The layers contain multiple geometries (MultiPoint and MultiPolygon),
> the relevant tags are
> 
> <cities>
>  <city>
>   <geometry>
>    <point></point>
>    <polygon></polygon>
>   </geometry>
>  </city>
> </cities>
> 
> In related GFS I have defined:
> 
>   <GMLFeatureClass>
>     <Name>cities</Name>
>     <ElementPath>cities|city</ElementPath>
>     <SRSName>urn:ogc:def:crs:EPSG::5514</SRSName>
>     <GeometryType>4</GeometryType>
>     <GeometryElementPath>geometry|point</GeometryElementPath>
>     <!-- OriginalniHranice -->
>     <GeometryType>6</GeometryType>
>     <GeometryElementPath>geometry|polygon</GeometryElementPath>
>     ...
>   </GMLFeatureClass>
> 
> Is there any way how to set names also for geometry tags? Similar to
> properties, eg.
> 
>     <PropertyDefn>
>       <Name>myname</Name>
>       <ElementPath>tagname</ElementPath>
>     </PropertyDefn>
> 
> I would like to name them without 'geometry|' part...

Hum, this isn't yet possible, but I can try to see if I can add support for 
that.

> 
> Another issue is related to SRS, it's geometry-oriented, ie. it's
> reported twice in this case - separately for each geometry type. I
> would prefer layer-based SRS in this case...
> 
>  SRS WKT (geometry|point):
> PROJCS["S-JTSK / Krovak East North",
>  ...
> SRS WKT (geometry|polygon):
> PROJCS["S-JTSK / Krovak East North",
>  ...

This is really wanted. The SRS is a property of a geometry column. There are 
cases where 2 geometry columns could have a different SRS.

> 
> Thanks for any pointers in advance, Martin

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sat Apr  5 13:53:20 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 5 Apr 2014 22:53:20 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201404052238.51117.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404052210.46953.even.rouault@mines-paris.org>
	<CA+Ei1OfziTj-EvnSBYYCTxgr51N2iCdhu1uPbijHaKh9FTCPpQ@mail.gmail.com>
	<201404052238.51117.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OfjwmSnbtTPm_sF85k3ZfSrUeOj0qn8DQ=X=r65-skHjg@mail.gmail.com>

Hi,

2014-04-05 22:38 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

[...]

> Hum, this isn't yet possible, but I can try to see if I can add support for
> that.

thanks!

> This is really wanted. The SRS is a property of a geometry column. There are
> cases where 2 geometry columns could have a different SRS.

Sure, but in this cases there is only one SRS defined for whole input
file. So layer-related SRS would be enough. BTW, do I need to specify
SRS separately for each GMLFeatureClass? I found
useGlobalSRSName="true" noted in the manual, but not explained.

Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Sat Apr  5 14:01:39 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Apr 2014 23:01:39 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1OfjwmSnbtTPm_sF85k3ZfSrUeOj0qn8DQ=X=r65-skHjg@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404052238.51117.even.rouault@mines-paris.org>
	<CA+Ei1OfjwmSnbtTPm_sF85k3ZfSrUeOj0qn8DQ=X=r65-skHjg@mail.gmail.com>
Message-ID: <201404052301.39368.even.rouault@mines-paris.org>

Le samedi 05 avril 2014 22:53:20, Martin Landa a ?crit :
> Hi,
> 
> 2014-04-05 22:38 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> 
> [...]
> 
> > Hum, this isn't yet possible, but I can try to see if I can add support
> > for that.
> 
> thanks!
> 
> > This is really wanted. The SRS is a property of a geometry column. There
> > are cases where 2 geometry columns could have a different SRS.
> 
> Sure, but in this cases there is only one SRS defined for whole input
> file. So layer-related SRS would be enough.

This is a limitation of the GML driver (SRS detection and handling is quite 
complicated in the GML driver). But with RFC 41, there are drivers that can 
handle different SRS for each geometry column (for example PostGIS).

> BTW, do I need to specify
> SRS separately for each GMLFeatureClass?

Usually yes to be on the safe side.

> I found
> useGlobalSRSName="true" noted in the manual, but not explained.

Yes... linked to the clunky SRS handling... well it means that the first 
srsName attribute found in the file can apply to all geometries of the whole 
file.

> 
> Martin

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Apr  5 14:50:28 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Apr 2014 23:50:28 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201404052238.51117.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<CA+Ei1OfziTj-EvnSBYYCTxgr51N2iCdhu1uPbijHaKh9FTCPpQ@mail.gmail.com>
	<201404052238.51117.even.rouault@mines-paris.org>
Message-ID: <201404052350.28450.even.rouault@mines-paris.org>

> > Is there any way how to set names also for geometry tags? Similar to
> > properties, eg.
> > 
> >     <PropertyDefn>
> >     
> >       <Name>myname</Name>
> >       <ElementPath>tagname</ElementPath>
> >     
> >     </PropertyDefn>
> > 
> > I would like to name them without 'geometry|' part...
> 
> Hum, this isn't yet possible, but I can try to see if I can add support for
> that.

Done. See http://trac.osgeo.org/gdal/changeset/27132

The syntax is :

<GMLFeatureClassList>
  <GMLFeatureClass>
    <Name>LAYER</Name>
    <ElementPath>LAYER</ElementPath>
    <GeomPropertyDefn>
        <Name>geometry</Name> <-- OGR geometry name -->
        <ElementPath>geometry</ElementPath> <!-- XML element name possibly with '|' to specify the path -->
        <Type>MultiPolygon</Type>
    </GeomPropertyDefn>
    <GeomPropertyDefn>
        <Name>referencePoint</Name>
        <ElementPath>referencePoint</ElementPath>
        <Type>Point</Type>
    </GeomPropertyDefn>
  </GMLFeatureClass>
</GMLFeatureClassList>
Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140405/32af6c0b/attachment-0001.html>

From even.rouault at mines-paris.org  Sat Apr  5 15:09:38 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 00:09:38 +0200
Subject: [gdal-dev] Vagrant developement environment
Message-ID: <201404060009.38780.even.rouault@mines-paris.org>

Hi,

Strongly inspired from MapServer vagrant set-up, itself strongly inspired from 
PDAL one, I've committed in trunk a Vagrantfile and the necessary scripts to 
setup a Vagrant development environment for GDAL.

See http://trac.osgeo.org/gdal/wiki/Vagrant

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sat Apr  5 16:17:03 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 6 Apr 2014 01:17:03 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201404052350.28450.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<CA+Ei1OfziTj-EvnSBYYCTxgr51N2iCdhu1uPbijHaKh9FTCPpQ@mail.gmail.com>
	<201404052238.51117.even.rouault@mines-paris.org>
	<201404052350.28450.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OcOukzvDAP348yN6A9Pjf4ds0752h=m40=Wk+BL+9zmcA@mail.gmail.com>

Hi,

2014-04-05 23:50 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

[...]

>> Hum, this isn't yet possible, but I can try to see if I can add support
>> for
>
>> that.
>
> Done. See http://trac.osgeo.org/gdal/changeset/27132

thanks a lot! Martin

From david.tran at hsr.ch  Sat Apr  5 17:36:16 2014
From: david.tran at hsr.ch (David Tran)
Date: Sun, 6 Apr 2014 02:36:16 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <201404042219.48550.even.rouault@mines-paris.org>
References: <201404042219.48550.even.rouault@mines-paris.org>
Message-ID: <5340A180.1040007@hsr.ch>

Hi to everybody again

Hope you all enjoy gdal 1.11.0beta1.

What was the big bang between v1.9.2 and >=1.1x.y? Because my MinGW 
installtion doesn't compile Gdal since version 1.10.0 at all. Only Gdal 
1.9.2 with MinGW (www.mingw.org) was (configure, make, make install) 
fine. I tested the binaries ogrinfo and ogr2ogr with the flag --version.

I have some compile results/errors to share:

curl-7.36.0
expat-2.1.0
proj-4.8.0 (with Datumgrid 1.6RC1)
openssl-1.0.1f
sqlite-autoconf-3080402
zlib-1.2.8
postgresql-9.3.4

== mingw32 (www.mingw.org) ==

HOST=i686-w64-mingw32
WORKSPACE=$PWD/workspace
export PATH=$WORKSPACE/bin:$WORKSPACE/lib:$PATH
./configure --prefix=$WORKSPACE --disable-static --without-grass 
--without-geos --without-freexl --with-python=no --with-xerces=no 
--with-jasper=no --with-mrsid=no --with-mrsid_lidar=no --with-ecw=no 
--with-libz=internal --with-png=internal --with-libtiff=internal 
--with-geotiff=internal --with-jpeg=internal --with-gif=internal 
--with-pcraster=internal --with-threads --enable-fast-install 
--with-curl --with-odbc --with-expat=$WORKSPACE 
--with-static-proj4=$WORKSPACE --with-sqlite3=$WORKSPACE 
--with-pg=$WORKSPACE/bin/pg_config --host=$HOST --build=$HOST
make

gdal version
1.9.2
ok.

1.10.1
make[1]: *** [cpl_xml_validate.lo] Error 1
make[1]: Leaving directory `/home/David/gdal-1.10.1/port'
make: *** [port-target] Error 2

1.11.0beta1
make[1]: *** [cpl_xml_validate.lo] Error 1
make[1]: Leaving directory `/home/David/gdal-1.11.0beta1/port'
make: *** [port-target] Error 2

svn-stable-2014.03.28
ok.


== mingw w64 rubenvb ==

HOST=i686-w64-mingw32
WORKSPACE=$PWD/workspace
export PATH=$WORKSPACE/bin:$WORKSPACE/lib:$PATH
./configure --prefix=$WORKSPACE --disable-static --without-grass 
--without-geos --without-freexl --with-python=no --with-xerces=no 
--with-jasper=no --with-mrsid=no --with-mrsid_lidar=no --with-ecw=no 
--with-libz=internal --with-png=internal --with-libtiff=internal 
--with-geotiff=internal --with-jpeg=internal --with-gif=internal 
--with-pcraster=internal --with-threads --enable-fast-install 
--with-curl --with-odbc --with-expat=$WORKSPACE 
--with-static-proj4=$WORKSPACE --with-sqlite3=$WORKSPACE 
--with-pg=$WORKSPACE/bin/pg_config --host=$HOST --build=$HOST
make

gdal version
1.9.2
collect2.exe: error: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/home/David/gdal-1.9.2'
make: *** [check-lib] Error 2

1.10.1
collect2.exe: error: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/home/David/gdal-1.10.1'
make: *** [check-lib] Error 2

1.11.0beta1
collect2.exe: error: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/home/David/gdal-1.11.0beta1'
make: *** [check-lib] Error 2


Thanks again.


-------- Original Message  --------
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
From: Even Rouault <even.rouault at mines-paris.org>
To: gdal-dev at lists.osgeo.org dev <gdal-dev at lists.osgeo.org>
Date: Friday, 4. April 2014 22:19:48

> Hi,
>
> I have prepared a GDAL/OGR 1.11.0 first beta release. The source
> archives can be found at :
>
> http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.gz
> http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.xz
> http://download.osgeo.org/gdal/1.11.0/gdal1110beta1.zip
>
> The NEWS for the release can be found at the top of:
>
> http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>
> As usual, you are warmly invited to test and report (ideally with
> patches) anything that must be fixed before the release :
> http://trac.osgeo.org/gdal/
>
> There will be perhaps another beta, but if things go smoothly, the
> next step will be RC1 (let's say end of next week).
>
> Note: due to the current unavailability of gdal.org, which is the
> machine on which releases are usually prepared, I've created the
> snapshot on my PC. Hopefully this will have no consequence on the
> above archives.
>
> Best regards,
>
> Even
>

From even.rouault at mines-paris.org  Sat Apr  5 17:40:01 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 02:40:01 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <5340A180.1040007@hsr.ch>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<5340A180.1040007@hsr.ch>
Message-ID: <201404060240.01923.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 02:36:16, David Tran a ?crit :
> Hi to everybody again
> 
> Hope you all enjoy gdal 1.11.0beta1.
> 
> What was the big bang between v1.9.2 and >=1.1x.y?

The big-bang lol ? no, I guess a tiny change that cause a compilation 
failure...

> 
> 1.10.1
> make[1]: *** [cpl_xml_validate.lo] Error 1
> make[1]: Leaving directory `/home/David/gdal-1.10.1/port'
> make: *** [port-target] Error 2

There must be a more detailed error message before. What is it ?

perhaps try --without-libxml2 ?


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sun Apr  6 03:44:40 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 6 Apr 2014 12:44:40 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201404052350.28450.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<CA+Ei1OfziTj-EvnSBYYCTxgr51N2iCdhu1uPbijHaKh9FTCPpQ@mail.gmail.com>
	<201404052238.51117.even.rouault@mines-paris.org>
	<201404052350.28450.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OdpouMDkeCS0i4jO2D9Uhz3Czk=4jYHemj=dPGCQQ4oRQ@mail.gmail.com>

Dear Even,

2014-04-05 23:50 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

> Done. See http://trac.osgeo.org/gdal/changeset/27132

it's working perfectly!

I found out a small inconsistency when converting data to PostGIS. For
layers which have multiple geometries, column name refers to 'name'
tag - which is something what I would expect. Unfortunately for layers
with single geometry, column name refers to default 'wkb_geometry'.
It's cased by the fact that for these layers geometry column is added
here [1]. For layers with multiple geometry it's added afterwards [2].

For now I used  GEOMETRY_NAME variable in my scripts, but it would be
probably useful to fix that directly in PG driver, what do you think?
Thanks, Martin

[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/pg/ogrpgdatasource.cpp#L1492
[2] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/pg/ogrpgtablelayer.cpp#L2386

From even.rouault at mines-paris.org  Sun Apr  6 03:52:34 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 12:52:34 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1OdpouMDkeCS0i4jO2D9Uhz3Czk=4jYHemj=dPGCQQ4oRQ@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404052350.28450.even.rouault@mines-paris.org>
	<CA+Ei1OdpouMDkeCS0i4jO2D9Uhz3Czk=4jYHemj=dPGCQQ4oRQ@mail.gmail.com>
Message-ID: <201404061252.34534.even.rouault@mines-paris.org>

Hi Martin,

> 
> 2014-04-05 23:50 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > Done. See http://trac.osgeo.org/gdal/changeset/27132
> 
> it's working perfectly!
> 
> I found out a small inconsistency when converting data to PostGIS. For
> layers which have multiple geometries, column name refers to 'name'
> tag - which is something what I would expect. Unfortunately for layers
> with single geometry, column name refers to default 'wkb_geometry'.
> It's cased by the fact that for these layers geometry column is added
> here [1]. For layers with multiple geometry it's added afterwards [2].
> 
> For now I used  GEOMETRY_NAME variable in my scripts, but it would be
> probably useful to fix that directly in PG driver, what do you think?

Actually the issue is more related to backward compatibility. Most use cases 
will still have a single geometry column, so I didn't want to remove the usual 
code path and the related creation options such that GEOMETRY_NAME, GEOM_TYPE, 
etc...
The "fix" would be more in ogr2ogr that currently has the following logic :
  does the output driver support multiple geometry fields ?
	- yes : does the source layer has several geometry fields ?
		- yes : use CreateGeomField() API, and pass wkbNone to CreateLayer()
		- no: pass the geometry type to CreateLayer()
	- no : pass the geometry type of the first geometry column to 
CreateLayer()

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sun Apr  6 04:00:33 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 6 Apr 2014 13:00:33 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201404061252.34534.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404052350.28450.even.rouault@mines-paris.org>
	<CA+Ei1OdpouMDkeCS0i4jO2D9Uhz3Czk=4jYHemj=dPGCQQ4oRQ@mail.gmail.com>
	<201404061252.34534.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OeO8dTeLVz50Cqr+FnR42ar8WRZpsG9mSgVt4btBKj7vQ@mail.gmail.com>

Hi,

2014-04-06 12:52 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

> The "fix" would be more in ogr2ogr that currently has the following logic :
>   does the output driver support multiple geometry fields ?
>         - yes : does the source layer has several geometry fields ?
>                 - yes : use CreateGeomField() API, and pass wkbNone to CreateLayer()
>                 - no: pass the geometry type to CreateLayer()
>         - no : pass the geometry type of the first geometry column to
> CreateLayer()

yes, but it will not influence user scripts, eg. python code which is
using CopyLayer()...

Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Sun Apr  6 04:05:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 13:05:25 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1OeO8dTeLVz50Cqr+FnR42ar8WRZpsG9mSgVt4btBKj7vQ@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404061252.34534.even.rouault@mines-paris.org>
	<CA+Ei1OeO8dTeLVz50Cqr+FnR42ar8WRZpsG9mSgVt4btBKj7vQ@mail.gmail.com>
Message-ID: <201404061305.26026.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 13:00:33, Martin Landa a ?crit :
> Hi,
> 
> 2014-04-06 12:52 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > The "fix" would be more in ogr2ogr that currently has the following logic :
> >   does the output driver support multiple geometry fields ?
> >   
> >         - yes : does the source layer has several geometry fields ?
> >         
> >                 - yes : use CreateGeomField() API, and pass wkbNone to
> >                 CreateLayer() - no: pass the geometry type to
> >                 CreateLayer()
> >         
> >         - no : pass the geometry type of the first geometry column to
> > 
> > CreateLayer()
> 
> yes, but it will not influence user scripts, eg. python code which is
> using CopyLayer()...

I've just checked that CopyLayer() should have the same behaviour as the 
algorithm in ogr2ogr.

> 
> Martin

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sun Apr  6 04:49:09 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 6 Apr 2014 13:49:09 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <201404061305.26026.even.rouault@mines-paris.org>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<201404061252.34534.even.rouault@mines-paris.org>
	<CA+Ei1OeO8dTeLVz50Cqr+FnR42ar8WRZpsG9mSgVt4btBKj7vQ@mail.gmail.com>
	<201404061305.26026.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1Ocshc51oKVZK7sh7RT_HsnRZQNqwU9_TbHDy6QSVoCPMw@mail.gmail.com>

2014-04-06 13:05 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

[...]

>> yes, but it will not influence user scripts, eg. python code which is
>> using CopyLayer()...
>
> I've just checked that CopyLayer() should have the same behaviour as the
> algorithm in ogr2ogr.

ah, I see, you are right. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From volker27 at gmx.at  Sun Apr  6 06:14:23 2014
From: volker27 at gmx.at (=?ISO-8859-1?Q?Volker_Fr=F6hlich?=)
Date: Sun, 06 Apr 2014 15:14:23 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <5340A180.1040007@hsr.ch>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<5340A180.1040007@hsr.ch>
Message-ID: <5341532F.6020006@gmx.at>

Even, there seems to be a leftover in the tarball that results in the 
creation of the following manpage:

/usr/share/man/man1/_home_even_gdal_svn_trunk_gdal_tmp_dist_wrk_gdal_apps_.1.gz

Greetings,

Volker

> -------- Original Message  --------
> Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
> From: Even Rouault <even.rouault at mines-paris.org>
> To: gdal-dev at lists.osgeo.org dev <gdal-dev at lists.osgeo.org>
> Date: Friday, 4. April 2014 22:19:48
>
>> Hi,
>>
>> I have prepared a GDAL/OGR 1.11.0 first beta release. The source
>> archives can be found at :
>>
>> http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.gz
>> http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.xz
>> http://download.osgeo.org/gdal/1.11.0/gdal1110beta1.zip
>>
>> The NEWS for the release can be found at the top of:
>>
>> http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>>
>> As usual, you are warmly invited to test and report (ideally with
>> patches) anything that must be fixed before the release :
>> http://trac.osgeo.org/gdal/
>>
>> There will be perhaps another beta, but if things go smoothly, the
>> next step will be RC1 (let's say end of next week).
>>
>> Note: due to the current unavailability of gdal.org, which is the
>> machine on which releases are usually prepared, I've created the
>> snapshot on my PC. Hopefully this will have no consequence on the
>> above archives.
>>
>> Best regards,
>>
>> Even
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Sun Apr  6 07:04:37 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 16:04:37 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <5341532F.6020006@gmx.at>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<5340A180.1040007@hsr.ch> <5341532F.6020006@gmx.at>
Message-ID: <201404061604.37159.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 15:14:23, vous avez ?crit :
> Even, there seems to be a leftover in the tarball that results in the
> creation of the following manpage:
> 
> /usr/share/man/man1/_home_even_gdal_svn_trunk_gdal_tmp_dist_wrk_gdal_apps_.
> 1.gz

hum, not sure how that appeared. I'll check if that happens again when 
producing the next tarball, this time on the reference machine.

> 
> Greetings,
> 
> Volker
> 
> > -------- Original Message  --------
> > Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
> > From: Even Rouault <even.rouault at mines-paris.org>
> > To: gdal-dev at lists.osgeo.org dev <gdal-dev at lists.osgeo.org>
> > Date: Friday, 4. April 2014 22:19:48
> > 
> >> Hi,
> >> 
> >> I have prepared a GDAL/OGR 1.11.0 first beta release. The source
> >> archives can be found at :
> >> 
> >> http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.gz
> >> http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.xz
> >> http://download.osgeo.org/gdal/1.11.0/gdal1110beta1.zip
> >> 
> >> The NEWS for the release can be found at the top of:
> >> 
> >> http://svn.osgeo.org/gdal/trunk/gdal/NEWS
> >> 
> >> As usual, you are warmly invited to test and report (ideally with
> >> patches) anything that must be fixed before the release :
> >> http://trac.osgeo.org/gdal/
> >> 
> >> There will be perhaps another beta, but if things go smoothly, the
> >> next step will be RC1 (let's say end of next week).
> >> 
> >> Note: due to the current unavailability of gdal.org, which is the
> >> machine on which releases are usually prepared, I've created the
> >> snapshot on my PC. Hopefully this will have no consequence on the
> >> above archives.
> >> 
> >> Best regards,
> >> 
> >> Even
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From david.tran at hsr.ch  Sun Apr  6 08:40:05 2014
From: david.tran at hsr.ch (David Tran)
Date: Sun, 6 Apr 2014 17:40:05 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <201404060240.01923.even.rouault@mines-paris.org>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<5340A180.1040007@hsr.ch>
	<201404060240.01923.even.rouault@mines-paris.org>
Message-ID: <53417555.2050308@hsr.ch>

my terminal output pasted to pastebin:

http://pastebin.com/p0yc0d38
http://pastebin.com/j6g83Esd

hope that helps somehow :)


-------- Original Message  --------
Subject: Re: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
From: Even Rouault <even.rouault at mines-paris.org>
To: gdal-dev at lists.osgeo.org
Date: Sunday, 6. April 2014 02:40:01

> Le dimanche 06 avril 2014 02:36:16, David Tran a ?crit :
>> Hi to everybody again
>>
>> Hope you all enjoy gdal 1.11.0beta1.
>>
>> What was the big bang between v1.9.2 and >=1.1x.y?
>
> The big-bang lol ? no, I guess a tiny change that cause a compilation
> failure...
>
>>
>> 1.10.1
>> make[1]: *** [cpl_xml_validate.lo] Error 1
>> make[1]: Leaving directory `/home/David/gdal-1.10.1/port'
>> make: *** [port-target] Error 2
>
> There must be a more detailed error message before. What is it ?
>
> perhaps try --without-libxml2 ?
>
>

From lucena_ivan at hotmail.com  Sun Apr  6 09:39:42 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Sun, 6 Apr 2014 12:39:42 -0400
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <201404060009.38780.even.rouault@mines-paris.org>
References: <201404060009.38780.even.rouault@mines-paris.org>
Message-ID: <BLU173-W67E2172129DF59B2995B590690@phx.gbl>

Hi Even,

I tried that out but got stuck on that error:

$ vagrant up
Bringing machine 'default' up with 'virtualbox' provider...
==> default: Clearing any previously set forwarded ports...
==> default: Clearing any previously set network interfaces...
==> default: Preparing network interfaces based on configuration...
    default: Adapter 1: nat
==> default: Forwarding ports...
    default: 80 => 8080 (adapter 1)
    default: 22 => 2222 (adapter 1)
==> default: Running 'pre-boot' VM customizations...
==> default: Booting VM...
==> default: Waiting for machine to boot. This may take a few minutes...
    default: SSH address: 127.0.0.1:2222
    default: SSH username: vagrant
    default: SSH auth method: private key
    default: Warning: Connection refused. Retrying...
    default: Warning: Connection refused. Retrying...
The guest machine entered an invalid state while waiting for it
to boot. Valid states are 'starting, running'. The machine is in the
'aborted' state. Please verify everything is configured
properly and try again.

If the provider you're using has a GUI that comes with it,
it is often helpful to open that and watch the machine, since the
GUI often has more helpful error messages than Vagrant can retrieve.
For example, if you're using VirtualBox, run `vagrant up` while the
VirtualBox GUI is open.

I tried to load using the VirtualBox GUI but it didn't helped much 
showing the message "Driver Kernel not installed (rc=-1908)" and "NS_ERROR_FAILURE".

Do you have any clue? My host is OSX 10.9 and VirtualBox is 4.3.8.

Regards,

Ivan

> From: even.rouault at mines-paris.org
> To: gdal-dev at lists.osgeo.org
> Date: Sun, 6 Apr 2014 00:09:38 +0200
> Subject: [gdal-dev] Vagrant developement environment
> 
> Hi,
> 
> Strongly inspired from MapServer vagrant set-up, itself strongly inspired from 
> PDAL one, I've committed in trunk a Vagrantfile and the necessary scripts to 
> setup a Vagrant development environment for GDAL.
> 
> See http://trac.osgeo.org/gdal/wiki/Vagrant
> 
> Even
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140406/ebd2469d/attachment.html>

From volker27 at gmx.at  Sun Apr  6 10:26:57 2014
From: volker27 at gmx.at (=?ISO-8859-1?Q?Volker_Fr=F6hlich?=)
Date: Sun, 06 Apr 2014 19:26:57 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <5340A180.1040007@hsr.ch>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<5340A180.1040007@hsr.ch>
Message-ID: <53418E61.2010602@gmx.at>

Hi!

Is "walk" compiled as soon as you enable odbc? I'm getting the following 
compiler error on EL6:

/usr/bin/libtool --mode=compile --tag=CXX g++ -O2 -g -pipe -Wall 
-Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
--param=ssp-buffer-size=4 -m64 -mminimal-toc -fpic 
-I/usr/include/libgeotiff  -Wall  -I.. -I../.. -I../generic -I../pgeo 
-I/builddir/build/BUILD/gdal-1.11.0beta1/port 
-I/builddir/build/BUILD/gdal-1.11.0beta1/gcore 
-I/builddir/build/BUILD/gdal-1.11.0beta1/alg 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr/ogrsf_frmts -DOGR_ENABLED 
-I/usr/include/libgeotiff -I/builddir/build/BUILD/gdal-1.11.0beta1/port 
-I/usr/include -Iexternal/include -I/usr/include/cfitsio  -c -o 
../o/ogrwalktool.lo ogrwalktool.cpp
libtool: compile:  g++ -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 
-fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 
-mminimal-toc -fpic -I/usr/include/libgeotiff -Wall -I.. -I../.. 
-I/builddir/build/BUILD/gdal-1.11.0beta1/port 
-I/builddir/build/BUILD/gdal-1.11.0beta1/gcore 
-I/builddir/build/BUILD/gdal-1.11.0beta1/alg 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr/ogrsf_frmts -I/usr/include 
-DOGR_ENABLED -I/usr/include/libgeotiff 
-I/builddir/build/BUILD/gdal-1.11.0beta1/port -I/usr/include 
-Iexternal/include -I/usr/include/cfitsio -c vfkdatablock.cpp  -fPIC 
-DPIC -o ../o/.libs/vfkdatablock.o
libtool: compile:  g++ -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 
-fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 
-mminimal-toc -fpic -I/usr/include/libgeotiff -Wall -I.. -I../.. 
-I../generic -I../pgeo -I/builddir/build/BUILD/gdal-1.11.0beta1/port 
-I/builddir/build/BUILD/gdal-1.11.0beta1/gcore 
-I/builddir/build/BUILD/gdal-1.11.0beta1/alg 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr/ogrsf_frmts -DOGR_ENABLED 
-I/usr/include/libgeotiff -I/builddir/build/BUILD/gdal-1.11.0beta1/port 
-I/usr/include -Iexternal/include -I/usr/include/cfitsio -c 
ogrwalktool.cpp  -fPIC -DPIC -o ../o/.libs/ogrwalktool.o
libtool: compile:  g++ -c -DHAVE_LIBJPEG -DPCIDSK_INTERNAL -Isdk 
-I/builddir/build/BUILD/gdal-1.11.0beta1/port 
-I/builddir/build/BUILD/gdal-1.11.0beta1/gcore 
-I/builddir/build/BUILD/gdal-1.11.0beta1/alg 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr/ogrsf_frmts -DOGR_ENABLED 
-I/usr/include/libgeotiff -I/builddir/build/BUILD/gdal-1.11.0beta1/port 
-I/usr/include -Iexternal/include -I/usr/include/cfitsio -O2 -g -pipe 
-Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
--param=ssp-buffer-size=4 -m64 -mminimal-toc -fpic 
-I/usr/include/libgeotiff -Wall sdk/segment/cpcidskads40model.cpp -o 
../o/cpcidskads40model.o >/dev/null 2>&1
/usr/bin/libtool --mode=compile --tag=CXX g++ -O2 -g -pipe -Wall 
-Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector 
--param=ssp-buffer-size=4 -m64 -mminimal-toc -fpic 
-I/usr/include/libgeotiff  -Wall  -I.. -I../.. 
-I/builddir/build/BUILD/gdal-1.11.0beta1/port 
-I/builddir/build/BUILD/gdal-1.11.0beta1/gcore 
-I/builddir/build/BUILD/gdal-1.11.0beta1/alg 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr 
-I/builddir/build/BUILD/gdal-1.11.0beta1/ogr/ogrsf_frmts -I/usr/include 
-DOGR_ENABLED -I/usr/include/libgeotiff 
-I/builddir/build/BUILD/gdal-1.11.0beta1/port -I/usr/include 
-Iexternal/include -I/usr/include/cfitsio  -c -o 
../o/vfkdatablocksqlite.lo vfkdatablocksqlite.cpp
ogrwalktool.cpp: In function 'OGRErr Binary2WkbMGeom(unsigned char*&, 
WKBGeometry*, int)':
ogrwalktool.cpp:256: error: no match for 'operator[]' in 
'*((geom->WKBGeometry::<anonymous>.WKBGeometry::<anonymous 
union>::linestring.LineString::segments + ((long unsigned int)(((long 
unsigned int)i) * 16ul)))->CurveSegment::points + ((long unsigned 
int)(((long unsigned int)j) * 24ul)))[count]'
ogrwalktool.cpp:256: error: no match for 'operator[]' in 
'*((geom->WKBGeometry::<anonymous>.WKBGeometry::<anonymous 
union>::linestring.LineString::segments + ((long unsigned int)(((long 
unsigned int)i) * 16ul)))->CurveSegment::points + ((long unsigned 
int)(((long unsigned int)j) * 24ul)))[count]'
ogrwalktool.cpp:256: error: no match for 'operator[]' in 
'*((geom->WKBGeometry::<anonymous>.WKBGeometry::<anonymous 
union>::linestring.LineString::segments + ((long unsigned int)(((long 
unsigned int)i) * 16ul)))->CurveSegment::points + ((long unsigned 
int)(((long unsigned int)j) * 24ul)))[count]'
make[3]: *** [../o/ogrwalktool.lo] Error 1

It builds fine in Fedora Rawhide.

Greetings,

Volker

> -------- Original Message  --------
> Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
> From: Even Rouault <even.rouault at mines-paris.org>
> To: gdal-dev at lists.osgeo.org dev <gdal-dev at lists.osgeo.org>
> Date: Friday, 4. April 2014 22:19:48
>
>> Hi,
>>
>> I have prepared a GDAL/OGR 1.11.0 first beta release. The source
>> archives can be found at :
>>
>> http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.gz
>> http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.xz
>> http://download.osgeo.org/gdal/1.11.0/gdal1110beta1.zip
>>
>> The NEWS for the release can be found at the top of:
>>
>> http://svn.osgeo.org/gdal/trunk/gdal/NEWS
>>
>> As usual, you are warmly invited to test and report (ideally with
>> patches) anything that must be fixed before the release :
>> http://trac.osgeo.org/gdal/
>>
>> There will be perhaps another beta, but if things go smoothly, the
>> next step will be RC1 (let's say end of next week).
>>
>> Note: due to the current unavailability of gdal.org, which is the
>> machine on which releases are usually prepared, I've created the
>> snapshot on my PC. Hopefully this will have no consequence on the
>> above archives.
>>
>> Best regards,
>>
>> Even
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Sun Apr  6 11:16:36 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 20:16:36 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <53418E61.2010602@gmx.at>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<5340A180.1040007@hsr.ch> <53418E61.2010602@gmx.at>
Message-ID: <201404062016.36940.even.rouault@mines-paris.org>

Hi Volker,

> Hi!
> 
> Is "walk" compiled as soon as you enable odbc?

Yes

> I'm getting the following
> compiler error on EL6:

Hum, from the error location, I suppose this is a big-endian host ? r27136 
should fix it.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Apr  6 11:22:53 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 20:22:53 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <53417555.2050308@hsr.ch>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<201404060240.01923.even.rouault@mines-paris.org>
	<53417555.2050308@hsr.ch>
Message-ID: <201404062022.53546.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 17:40:05, David Tran a ?crit :
> my terminal output pasted to pastebin:
> 
> http://pastebin.com/p0yc0d38

For that one, try ./configure --without-xml2
(I got the option name wrong in my previous email)
For some reason, it looks like the libxml2 headers think that they are called 
from the libxml2 source files and export symbols instead of importing them.

> http://pastebin.com/j6g83Esd

Don't know for that one.

> 
> hope that helps somehow :)
> 
> 
> -------- Original Message  --------
> Subject: Re: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
> From: Even Rouault <even.rouault at mines-paris.org>
> To: gdal-dev at lists.osgeo.org
> Date: Sunday, 6. April 2014 02:40:01
> 
> > Le dimanche 06 avril 2014 02:36:16, David Tran a ?crit :
> >> Hi to everybody again
> >> 
> >> Hope you all enjoy gdal 1.11.0beta1.
> >> 
> >> What was the big bang between v1.9.2 and >=1.1x.y?
> > 
> > The big-bang lol ? no, I guess a tiny change that cause a compilation
> > failure...
> > 
> >> 1.10.1
> >> make[1]: *** [cpl_xml_validate.lo] Error 1
> >> make[1]: Leaving directory `/home/David/gdal-1.10.1/port'
> >> make: *** [port-target] Error 2
> > 
> > There must be a more detailed error message before. What is it ?
> > 
> > perhaps try --without-libxml2 ?

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Apr  6 11:24:20 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 20:24:20 +0200
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <BLU173-W67E2172129DF59B2995B590690@phx.gbl>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<BLU173-W67E2172129DF59B2995B590690@phx.gbl>
Message-ID: <201404062024.20698.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 18:39:42, Ivan Lucena a ?crit :
> Hi Even,
> 
> I tried that out but got stuck on that error:
> 
> $ vagrant up
> Bringing machine 'default' up with 'virtualbox' provider...
> ==> default: Clearing any previously set forwarded ports...
> ==> default: Clearing any previously set network interfaces...
> ==> default: Preparing network interfaces based on configuration...
>     default: Adapter 1: nat
> ==> default: Forwarding ports...
>     default: 80 => 8080 (adapter 1)
>     default: 22 => 2222 (adapter 1)
> ==> default: Running 'pre-boot' VM customizations...
> ==> default: Booting VM...
> ==> default: Waiting for machine to boot. This may take a few minutes...
>     default: SSH address: 127.0.0.1:2222
>     default: SSH username: vagrant
>     default: SSH auth method: private key
>     default: Warning: Connection refused. Retrying...
>     default: Warning: Connection refused. Retrying...
> The guest machine entered an invalid state while waiting for it
> to boot. Valid states are 'starting, running'. The machine is in the
> 'aborted' state. Please verify everything is configured
> properly and try again.
> 
> If the provider you're using has a GUI that comes with it,
> it is often helpful to open that and watch the machine, since the
> GUI often has more helpful error messages than Vagrant can retrieve.
> For example, if you're using VirtualBox, run `vagrant up` while the
> VirtualBox GUI is open.
> 
> I tried to load using the VirtualBox GUI but it didn't helped much
> showing the message "Driver Kernel not installed (rc=-1908)" and
> "NS_ERROR_FAILURE".
> 
> Do you have any clue? My host is OSX 10.9 and VirtualBox is 4.3.8.

The error messages seems to indicate this is an issue with your VirtualBox 
setup. And is your host a 64bit OS ?

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From volker27 at gmx.at  Sun Apr  6 12:19:37 2014
From: volker27 at gmx.at (=?ISO-8859-1?Q?Volker_Fr=F6hlich?=)
Date: Sun, 06 Apr 2014 21:19:37 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <201404062016.36940.even.rouault@mines-paris.org>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<5340A180.1040007@hsr.ch> <53418E61.2010602@gmx.at>
	<201404062016.36940.even.rouault@mines-paris.org>
Message-ID: <5341A8C9.3060401@gmx.at>

Am 2014-04-06 20:16, schrieb Even Rouault:
> Hi Volker,
>
>> Hi!
>>
>> Is "walk" compiled as soon as you enable odbc?
>
> Yes
>
>> I'm getting the following
>> compiler error on EL6:
>
> Hum, from the error location, I suppose this is a big-endian host ? r27136
> should fix it.
>
> Even

Oh, right, I should have mentioned that! The patch resolves the issue. 
Thanks!

Volker

From lucena_ivan at hotmail.com  Sun Apr  6 12:20:48 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Sun, 6 Apr 2014 15:20:48 -0400
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <201404062024.20698.even.rouault@mines-paris.org>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<BLU173-W67E2172129DF59B2995B590690@phx.gbl>,
	<201404062024.20698.even.rouault@mines-paris.org>
Message-ID: <BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>

> The error messages seems to indicate this is an issue with your VirtualBox 
> setup. And is your host a 64bit OS ?

Yes, I recently took advantage of Apple free updated, going from 10.6-32 to 10.9-64 and I have others Linux 64 bit running on VirtualBox without problems. 

$ uname -a
Darwin Kernel Version 13.1.0: Thu Jan 16 19:40:37 PST 2014; root:xnu-2422.90.20~2/RELEASE_X86_64 x86_64

What version of VirtualBox did you use to create the gdal-vagrant?





 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140406/c47bfcfd/attachment.html>

From Stefan.Blumentrath at nina.no  Sun Apr  6 12:22:22 2014
From: Stefan.Blumentrath at nina.no (Blumentrath, Stefan)
Date: Sun, 6 Apr 2014 19:22:22 +0000
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <201404042219.48550.even.rouault@mines-paris.org>
References: <201404042219.48550.even.rouault@mines-paris.org>
Message-ID: <2C5F82DA3EE3E449BD473075F2C290BF98FE60AD@NINSRV05.nina.no>

Hei Even,

Thanks for the beta release. I tested with special focus on GRASS 7, because in the news it says that:
"GRASS driver:
 * fix compilation issues for GRASS 7"

I can confirm, that GDAL can be built against GRASS 7. 
gdalinfo --formats gives:
GRASS (ro): GRASS Database Rasters (5.7+)

However, the GRASS driver does not work with GRASS 7 rasters (at least not for me on UBUNTU 12.04 LTS).

When I call gdalinfo on a GRASS 7 raster I get:
Segmentation fault (core dumped)

Seems like ticket #2953 (http://trac.osgeo.org/gdal/ticket/2953) is still valid.

Cheers
Stefan

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault
Sent: 4. april 2014 22:20
To: gdal-dev at lists.osgeo.org dev
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready

Hi,

I have prepared a GDAL/OGR 1.11.0 first beta release. The source archives can be found at :

  http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.gz
  http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0beta1.tar.xz
  http://download.osgeo.org/gdal/1.11.0/gdal1110beta1.zip

The NEWS for the release can be found at the top of:

  http://svn.osgeo.org/gdal/trunk/gdal/NEWS

As usual, you are warmly invited to test and report (ideally with patches) anything that must be fixed before the release : http://trac.osgeo.org/gdal/

There will be perhaps another beta, but if things go smoothly, the next step will be RC1 (let's say end of next week).

Note: due to the current unavailability of gdal.org, which is the machine on which releases are usually prepared, I've created the snapshot on my PC. 
Hopefully this will have no consequence on the above archives.

Best regards,

Even

--
Geospatial professional services
http://even.rouault.free.fr/services.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Sun Apr  6 13:04:18 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 22:04:18 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Beta1 ready
In-Reply-To: <2C5F82DA3EE3E449BD473075F2C290BF98FE60AD@NINSRV05.nina.no>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<2C5F82DA3EE3E449BD473075F2C290BF98FE60AD@NINSRV05.nina.no>
Message-ID: <201404062204.18918.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 21:22:22, Blumentrath, Stefan a ?crit :
> Hei Even,
> 
> Thanks for the beta release. I tested with special focus on GRASS 7,
> because in the news it says that: "GRASS driver:
>  * fix compilation issues for GRASS 7"
> 
> I can confirm, that GDAL can be built against GRASS 7.
> gdalinfo --formats gives:
> GRASS (ro): GRASS Database Rasters (5.7+)
> 
> However, the GRASS driver does not work with GRASS 7 rasters (at least not
> for me on UBUNTU 12.04 LTS).
> 
> When I call gdalinfo on a GRASS 7 raster I get:
> Segmentation fault (core dumped)
> 
> Seems like ticket #2953 (http://trac.osgeo.org/gdal/ticket/2953) is still
> valid.

Martin,

I see you're the last one to have touched at the driver. Perhaps you may want 
to have a look at that issue ?

Even


From even.rouault at mines-paris.org  Sun Apr  6 13:05:39 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 22:05:39 +0200
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<201404062024.20698.even.rouault@mines-paris.org>
	<BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>
Message-ID: <201404062205.39230.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 21:20:48, Ivan Lucena a ?crit :
> > The error messages seems to indicate this is an issue with your
> > VirtualBox setup. And is your host a 64bit OS ?
> 
> Yes, I recently took advantage of Apple free updated, going from 10.6-32 to
> 10.9-64 and I have others Linux 64 bit running on VirtualBox without
> problems.
> 
> $ uname -a
> Darwin Kernel Version 13.1.0: Thu Jan 16 19:40:37 PST 2014;
> root:xnu-2422.90.20~2/RELEASE_X86_64 x86_64
> 
> What version of VirtualBox did you use to create the gdal-vagrant?

I don't think my own version of VirtualBox (4.2.12) has much impact. There's 
nothing from it in the text files that define the gdal-vagrant configuration


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From yjacolin at free.fr  Sun Apr  6 13:28:31 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Sun, 06 Apr 2014 22:28:31 +0200
Subject: [gdal-dev] Error building gdal against MySQL
Message-ID: <7165283.68thpVR9us@helios>

Hello,

I tried to build gdal from git repository with MySQL:

checking for mysql_config... /usr/bin/mysql_config
checking for MySQL... yes
checking load_defaults() in MySQL... configure: error: Cannot find 
load_defaults()

Any idea?

Thanks,

Y.

From yjacolin at free.fr  Sun Apr  6 13:28:43 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Sun, 06 Apr 2014 22:28:43 +0200
Subject: [gdal-dev] Build failed
Message-ID: <2280779.jHO5RtEaPQ@helios>

Hello,

I have a failure with gdal (still using gdal git repository):

/usr/bin/ld: /usr/local/src/gdal/gdal/frmts/o/.libs/aaigriddataset.o: 
relocation R_X86_64_32S against `_ZTV14AAIGRasterBand' can not be used when 
making a shared object; recompile with -fPIC
/usr/local/src/gdal/gdal/frmts/o/.libs/aaigriddataset.o: error adding symbols: 
Bad value
collect2: error: ld returned 1 exit status
make[1]: *** [libgdal.la] Erreur 1
make[1]: quittant le r?pertoire ? /usr/local/src/gdal/gdal ?
make: *** [check-lib] Erreur 2

any idea?

Y.
-- 
Yves Jacolin

From even.rouault at mines-paris.org  Sun Apr  6 13:31:40 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 22:31:40 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <7165283.68thpVR9us@helios>
References: <7165283.68thpVR9us@helios>
Message-ID: <201404062231.40826.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> Hello,
> 
> I tried to build gdal from git repository with MySQL:
> 
> checking for mysql_config... /usr/bin/mysql_config
> checking for MySQL... yes
> checking load_defaults() in MySQL... configure: error: Cannot find
> load_defaults()
> 
> Any idea?

Which mysql version ?
Which Linux distro ?

> 
> Thanks,
> 
> Y.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sun Apr  6 13:32:28 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 22:32:28 +0200
Subject: [gdal-dev] Build failed
In-Reply-To: <2280779.jHO5RtEaPQ@helios>
References: <2280779.jHO5RtEaPQ@helios>
Message-ID: <201404062232.28730.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 22:28:43, Yves Jacolin a ?crit :
> Hello,
> 
> I have a failure with gdal (still using gdal git repository):
> 
> /usr/bin/ld: /usr/local/src/gdal/gdal/frmts/o/.libs/aaigriddataset.o:
> relocation R_X86_64_32S against `_ZTV14AAIGRasterBand' can not be used when
> making a shared object; recompile with -fPIC
> /usr/local/src/gdal/gdal/frmts/o/.libs/aaigriddataset.o: error adding
> symbols: Bad value
> collect2: error: ld returned 1 exit status
> make[1]: *** [libgdal.la] Erreur 1
> make[1]: quittant le r?pertoire ? /usr/local/src/gdal/gdal ?
> make: *** [check-lib] Erreur 2

Hum, strange. Perhaps do a make clean before rebuilding ?

> 
> any idea?
> 
> Y.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From yjacolin at free.fr  Sun Apr  6 13:36:06 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Sun, 06 Apr 2014 22:36:06 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <201404062231.40826.even.rouault@mines-paris.org>
References: <7165283.68thpVR9us@helios>
	<201404062231.40826.even.rouault@mines-paris.org>
Message-ID: <4818732.o04PCLVqMB@helios>

Le dimanche 6 avril 2014, 22:31:40 Even Rouault a ?crit :
> Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> > Hello,
> > 
> > I tried to build gdal from git repository with MySQL:
> > 
> > checking for mysql_config... /usr/bin/mysql_config
> > checking for MySQL... yes
> > checking load_defaults() in MySQL... configure: error: Cannot find
> > load_defaults()
> > 
> > Any idea?
> 
> Which mysql version ?
> Which Linux distro ?
Even,

$ msqyl --version
mysql  Ver 14.14 Distrib 5.5.35, for debian-linux-gnu (x86_64) using readline 
6.2
Distro : Ubuntu 13.10

Thanks,

Y.
-- 
Yves Jacolin

From even.rouault at mines-paris.org  Sun Apr  6 13:40:54 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 22:40:54 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <4818732.o04PCLVqMB@helios>
References: <7165283.68thpVR9us@helios>
	<201404062231.40826.even.rouault@mines-paris.org>
	<4818732.o04PCLVqMB@helios>
Message-ID: <201404062240.54309.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 22:36:06, Yves Jacolin a ?crit :
> Le dimanche 6 avril 2014, 22:31:40 Even Rouault a ?crit :
> > Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> > > Hello,
> > > 
> > > I tried to build gdal from git repository with MySQL:
> > > 
> > > checking for mysql_config... /usr/bin/mysql_config
> > > checking for MySQL... yes
> > > checking load_defaults() in MySQL... configure: error: Cannot find
> > > load_defaults()
> > > 
> > > Any idea?
> > 
> > Which mysql version ?
> > Which Linux distro ?
> 
> Even,
> 
> $ msqyl --version
> mysql  Ver 14.14 Distrib 5.5.35, for debian-linux-gnu (x86_64) using
> readline 6.2
> Distro : Ubuntu 13.10

Hum, do you confirm that you are using the latest version from the repository ?
Could you create a ticket for that issue ? I've no that VM available at the 
moment.

> 
> Thanks,
> 
> Y.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From yjacolin at free.fr  Sun Apr  6 13:44:50 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Sun, 06 Apr 2014 22:44:50 +0200
Subject: [gdal-dev] Build failed
In-Reply-To: <201404062232.28730.even.rouault@mines-paris.org>
References: <2280779.jHO5RtEaPQ@helios>
	<201404062232.28730.even.rouault@mines-paris.org>
Message-ID: <3757008.lkn4HK8Jp9@helios>

Le dimanche 6 avril 2014, 22:32:28 Even Rouault a ?crit :
> Le dimanche 06 avril 2014 22:28:43, Yves Jacolin a ?crit :
> > Hello,
> > 
> > I have a failure with gdal (still using gdal git repository):
> > 
> > /usr/bin/ld: /usr/local/src/gdal/gdal/frmts/o/.libs/aaigriddataset.o:
> > relocation R_X86_64_32S against `_ZTV14AAIGRasterBand' can not be used
> > when
> > making a shared object; recompile with -fPIC
> > /usr/local/src/gdal/gdal/frmts/o/.libs/aaigriddataset.o: error adding
> > symbols: Bad value
> > collect2: error: ld returned 1 exit status
> > make[1]: *** [libgdal.la] Erreur 1
> > make[1]: quittant le r?pertoire ? /usr/local/src/gdal/gdal ?
> > make: *** [check-lib] Erreur 2
> 
> Hum, strange. Perhaps do a make clean before rebuilding ?
> 
> > any idea?
> > 
> > Y.

it seems working much better after a make clean ;) the last failure with Mysql 
flag could explain this.

Thanks,

Y.
-- 
Yves Jacolin

From yjacolin at free.fr  Sun Apr  6 13:49:59 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Sun, 06 Apr 2014 22:49:59 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <201404062240.54309.even.rouault@mines-paris.org>
References: <7165283.68thpVR9us@helios> <4818732.o04PCLVqMB@helios>
	<201404062240.54309.even.rouault@mines-paris.org>
Message-ID: <1497645.fItruHpsOh@helios>

Le dimanche 6 avril 2014, 22:40:54 Even Rouault a ?crit :
> Le dimanche 06 avril 2014 22:36:06, Yves Jacolin a ?crit :
> > Le dimanche 6 avril 2014, 22:31:40 Even Rouault a ?crit :
> > > Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> > > > Hello,
> > > > 
> > > > I tried to build gdal from git repository with MySQL:
> > > > 
> > > > checking for mysql_config... /usr/bin/mysql_config
> > > > checking for MySQL... yes
> > > > checking load_defaults() in MySQL... configure: error: Cannot find
> > > > load_defaults()
> > > > 
> > > > Any idea?
> > > 
> > > Which mysql version ?
> > > Which Linux distro ?
> > 
> > Even,
> > 
> > $ msqyl --version
> > mysql  Ver 14.14 Distrib 5.5.35, for debian-linux-gnu (x86_64) using
> > readline 6.2
> > Distro : Ubuntu 13.10
> 
> Hum, do you confirm that you are using the latest version from the
> repository ? Could you create a ticket for that issue ? I've no that VM
> available at the moment.
Even,

Could you confirm that GDAL git repository could be used?

If so I will fill a ticket monday evening as I am going to Paris tomorrow ;)

Y.
-- 
Yves Jacolin

From even.rouault at mines-paris.org  Sun Apr  6 13:52:22 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 22:52:22 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <1497645.fItruHpsOh@helios>
References: <7165283.68thpVR9us@helios>
	<201404062240.54309.even.rouault@mines-paris.org>
	<1497645.fItruHpsOh@helios>
Message-ID: <201404062252.22341.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 22:49:59, vous avez ?crit :
> Le dimanche 6 avril 2014, 22:40:54 Even Rouault a ?crit :
> > Le dimanche 06 avril 2014 22:36:06, Yves Jacolin a ?crit :
> > > Le dimanche 6 avril 2014, 22:31:40 Even Rouault a ?crit :
> > > > Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> > > > > Hello,
> > > > > 
> > > > > I tried to build gdal from git repository with MySQL:
> > > > > 
> > > > > checking for mysql_config... /usr/bin/mysql_config
> > > > > checking for MySQL... yes
> > > > > checking load_defaults() in MySQL... configure: error: Cannot find
> > > > > load_defaults()
> > > > > 
> > > > > Any idea?
> > > > 
> > > > Which mysql version ?
> > > > Which Linux distro ?
> > > 
> > > Even,
> > > 
> > > $ msqyl --version
> > > mysql  Ver 14.14 Distrib 5.5.35, for debian-linux-gnu (x86_64) using
> > > readline 6.2
> > > Distro : Ubuntu 13.10
> > 
> > Hum, do you confirm that you are using the latest version from the
> > repository ? Could you create a ticket for that issue ? I've no that VM
> > available at the moment.
> 
> Even,
> 
> Could you confirm that GDAL git repository could be used?

Yes, I just wanted to know if you use the latest version of the repository and 
not an older one.

> 
> If so I will fill a ticket monday evening as I am going to Paris tomorrow
> ;)
> 
> Y.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From yjacolin at free.fr  Sun Apr  6 14:02:04 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Sun, 06 Apr 2014 23:02:04 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <201404062252.22341.even.rouault@mines-paris.org>
References: <7165283.68thpVR9us@helios> <1497645.fItruHpsOh@helios>
	<201404062252.22341.even.rouault@mines-paris.org>
Message-ID: <1997578.voJBpiTapV@helios>

Le dimanche 6 avril 2014, 22:52:22 Even Rouault a ?crit :
> Le dimanche 06 avril 2014 22:49:59, vous avez ?crit :
> > Le dimanche 6 avril 2014, 22:40:54 Even Rouault a ?crit :
> > > Le dimanche 06 avril 2014 22:36:06, Yves Jacolin a ?crit :
> > > > Le dimanche 6 avril 2014, 22:31:40 Even Rouault a ?crit :
> > > > > Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> > > > > > Hello,
> > > > > > 
> > > > > > I tried to build gdal from git repository with MySQL:
> > > > > > 
> > > > > > checking for mysql_config... /usr/bin/mysql_config
> > > > > > checking for MySQL... yes
> > > > > > checking load_defaults() in MySQL... configure: error: Cannot find
> > > > > > load_defaults()
> > > > > > 
> > > > > > Any idea?
> > > > > 
> > > > > Which mysql version ?
> > > > > Which Linux distro ?
> > > > 
> > > > Even,
> > > > 
> > > > $ msqyl --version
> > > > mysql  Ver 14.14 Distrib 5.5.35, for debian-linux-gnu (x86_64) using
> > > > readline 6.2
> > > > Distro : Ubuntu 13.10
> > > 
> > > Hum, do you confirm that you are using the latest version from the
> > > repository ? Could you create a ticket for that issue ? I've no that VM
> > > available at the moment.
> > 
> > Even,
> > 
> > Could you confirm that GDAL git repository could be used?
> 
> Yes, I just wanted to know if you use the latest version of the repository
> and not an older one.
> 
> > If so I will fill a ticket monday evening as I am going to Paris tomorrow
> > ;)
> > 
> > Y.
I can confirm:

$ git log
commit bc8f472fa679c774a60592c058d71ea26b3358bf
Author: Even Rouault <even.rouault at mines-paris.org>
Date:   Sun Apr 6 18:15:37 2014 +0000

Y.
-- 
Yves Jacolin

From even.rouault at mines-paris.org  Sun Apr  6 14:35:46 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 6 Apr 2014 23:35:46 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <4818732.o04PCLVqMB@helios>
References: <7165283.68thpVR9us@helios>
	<201404062231.40826.even.rouault@mines-paris.org>
	<4818732.o04PCLVqMB@helios>
Message-ID: <201404062335.46696.even.rouault@mines-paris.org>

Le dimanche 06 avril 2014 22:36:06, Yves Jacolin a ?crit :
> Le dimanche 6 avril 2014, 22:31:40 Even Rouault a ?crit :
> > Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> > > Hello,
> > > 
> > > I tried to build gdal from git repository with MySQL:
> > > 
> > > checking for mysql_config... /usr/bin/mysql_config
> > > checking for MySQL... yes
> > > checking load_defaults() in MySQL... configure: error: Cannot find
> > > load_defaults()
> > > 
> > > Any idea?
> > 
> > Which mysql version ?
> > Which Linux distro ?
> 
> Even,
> 
> $ msqyl --version
> mysql  Ver 14.14 Distrib 5.5.35, for debian-linux-gnu (x86_64) using
> readline 6.2
> Distro : Ubuntu 13.10

Yves

hum, I've just installed Ubuntu 13.10 Desktop 64bit in a fresh VM and 
installed the libmysqlclient-dev package and 

./configure --with-mysql

and it works and compiles fine.

So I suspect that it is due to other dependencies you've installed. Could you 
give the full ./configure line with the options you've used and its output ? 
And also the packages.txt file resulting from "dpkg -l > packages.txt"
config.log might also help.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Sun Apr  6 18:02:12 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Sun, 6 Apr 2014 21:02:12 -0400
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <201404062205.39230.even.rouault@mines-paris.org>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<201404062024.20698.even.rouault@mines-paris.org>
	<BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>,
	<201404062205.39230.even.rouault@mines-paris.org>
Message-ID: <BLU173-W6EBFFCD148B1BC7868AF990680@phx.gbl>

> > What version of VirtualBox did you use to create the gdal-vagrant?
> 
> I don't think my own version of VirtualBox (4.2.12) has much impact. There's 
> nothing from it in the text files that define the gdal-vagrant configuration

I have had the experience that by exporting a VM as appliance on a newer version of that software I could not successfully import and start the VM on an older version.

That is OK.

Thanks.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140406/de52ab16/attachment.html>

From dodobasic at gmail.com  Mon Apr  7 01:03:02 2014
From: dodobasic at gmail.com (=?UTF-8?B?RHJhxb5lbiBPZG9iYcWhacSH?=)
Date: Mon, 07 Apr 2014 10:03:02 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
 Python bindings to read OSM PBF file
In-Reply-To: <201404051123.43725.even.rouault@mines-paris.org>
References: <533AF6B1.1010804@gmail.com>
	<201404022138.28707.even.rouault@mines-paris.org>
	<533C68D3.4030406@gmail.com>
	<201404051123.43725.even.rouault@mines-paris.org>
Message-ID: <53425BB6.10805@gmail.com>

On 05.04.2014 11:23, Even Rouault wrote:
> Le mercredi 02 avril 2014 21:45:23, Dra?en Odoba?i? a ?crit :
>> On 02.04.2014 21:38, Even Rouault wrote:
>>>> I had no issues when reading large PBF files using this method. For the
>>>> large files, without OSM_USE_CUSTOM_INDEXING=NO I got lots of "Cannot
>>>> read node ..." error messages, and I'm not sure why. Basically I
>>>> stumbled onto OSM_USE_CUSTOM_INDEXING=NO which seems to help. However,
>>>> in this case custom indexing has no effect, script still fails to
>>>> extract data.
>>>
>>> Hum, there might be a bug in custom indexing that you've hit. What is the
>>> PBF file you are converting ?
>>>
>>> And to be sure to understand: when setting OSM_USE_CUSTOM_INDEXING=NO,
>>> the conversion works ?
>>
>> Yes, converting http://download.geofabrik.de/north-america-latest.osm.pbf
>> (5.9G), works only with manually overridden OSM_USE_CUSTOM_INDEXING=NO
> 
> Dra?en,
> 
> I've successfully converted the north-america-latest.osm.pbf with GDAL 
> 1.11beta1 (Linux 64bit system) without having to override 
> OSM_USE_CUSTOM_INDEXING. But the code of the OSM driver hasn't changed 
> significantly w.r.t. 1.10 so I'm not sure why you get an error...
> 
> Even
> 


Hi Even,

I've tested north-america-latest.osm.pbf (on 1.10 and 1.11), and it works
without having to override OSM_USE_CUSTOM_INDEXING. I have not been really
methodical during testing, so there might have been something else that
triggered that behaviour. At the moment it works as advertised.

Also, the original problem is triggered only with a PBF file that was generated
with 'osmconvert' utility, and using GDAL Python bindings to read all layers.
ogr2ogr CLI utility will correctly finish converting osm->shp. However, if I use
a tool like 'osmosis' to convert .osm -> .pbf in the final data preparation
step, Python script also executes correctly.

It's possible that osmconvert creates a strange PBF file, which is somehow
misinterpreted when using Python bindings. Anyway, the file is available at
http://open.geof.hr/~dodobas/admin_level_BAD.pbf (455Mb) if you want to test
using Python script (http://open.geof.hr/~dodobas/osm_extract.zip)

Dra?en

From even.rouault at mines-paris.org  Mon Apr  7 01:07:58 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 07 Apr 2014 10:07:58 +0200
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <BLU173-W6EBFFCD148B1BC7868AF990680@phx.gbl>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<201404062024.20698.even.rouault@mines-paris.org>
	<BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>,
	<201404062205.39230.even.rouault@mines-paris.org>
	<BLU173-W6EBFFCD148B1BC7868AF990680@phx.gbl>
Message-ID: <1396858078.53425cde2439f@imp.free.fr>

Selon Ivan Lucena <lucena_ivan at hotmail.com>:

> > > What version of VirtualBox did you use to create the gdal-vagrant?
> >
> > I don't think my own version of VirtualBox (4.2.12) has much impact.
> There's
> > nothing from it in the text files that define the gdal-vagrant
> configuration
>
> I have had the experience that by exporting a VM as appliance on a newer
> version of that software I could not successfully import and start the VM on
> an older version.
>
> That is OK.

Hum, the base VM used by the Vagrantfile is
http://files.vagrantup.com/precise64.box . I've used the same one as MapServer
and PDAL. And apparently Howard is using a Mac as a host...

Even

From lucena_ivan at hotmail.com  Mon Apr  7 03:46:29 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Mon, 7 Apr 2014 06:46:29 -0400
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <1396858078.53425cde2439f@imp.free.fr>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<201404062024.20698.even.rouault@mines-paris.org>
	<BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>,
	<201404062205.39230.even.rouault@mines-paris.org>
	<BLU173-W6EBFFCD148B1BC7868AF990680@phx.gbl>,
	<1396858078.53425cde2439f@imp.free.fr>
Message-ID: <BLU173-W20D231F77C10DDCB2B579590680@phx.gbl>

I've got it to work. But I could not follow your instructions.

$ vagrant ssh
Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic x86_64)

 * Documentation:  https://help.ubuntu.com/
Welcome to your Vagrant-built virtual machine.
Last login: Mon Apr  7 04:24:23 2014 from 10.0.2.2
vagrant at gdal-vagrant:~$ ls
postinstall.sh
vagrant at gdal-vagrant:~$ ls -a
.   .bash_history  .bashrc  .gem            .profile  .sudo_as_admin_successful  .veewee_version
..  .bash_logout   .cache   postinstall.sh  .ssh      .vbox_version
vagrant at gdal-vagrant:~$ gdalinfo --version
The program 'gdalinfo' is currently not installed.  You can install it by typing:
sudo apt-get install gdal-bin

There is no gdal/gdal folder. I ran that "sudo sh posinstall.sh" wish install a development environment but that was supposed to run automatically. Right? Maybe something got timed out.  

> Date: Mon, 7 Apr 2014 10:07:58 +0200
> From: even.rouault at mines-paris.org
> To: lucena_ivan at hotmail.com
> CC: even.rouault at mines-paris.org; gdal-dev at lists.osgeo.org; hobu.inc at gmail.com
> Subject: RE: [gdal-dev] Vagrant developement environment
> 
> Selon Ivan Lucena <lucena_ivan at hotmail.com>:
> 
> > > > What version of VirtualBox did you use to create the gdal-vagrant?
> > >
> > > I don't think my own version of VirtualBox (4.2.12) has much impact.
> > There's
> > > nothing from it in the text files that define the gdal-vagrant
> > configuration
> >
> > I have had the experience that by exporting a VM as appliance on a newer
> > version of that software I could not successfully import and start the VM on
> > an older version.
> >
> > That is OK.
> 
> Hum, the base VM used by the Vagrantfile is
> http://files.vagrantup.com/precise64.box . I've used the same one as MapServer
> and PDAL. And apparently Howard is using a Mac as a host...
> 
> Even
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140407/962291e3/attachment.html>

From even.rouault at mines-paris.org  Mon Apr  7 03:57:49 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 07 Apr 2014 12:57:49 +0200
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <BLU173-W20D231F77C10DDCB2B579590680@phx.gbl>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<201404062024.20698.even.rouault@mines-paris.org>
	<BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>,
	<201404062205.39230.even.rouault@mines-paris.org>
	<BLU173-W6EBFFCD148B1BC7868AF990680@phx.gbl>,
	<1396858078.53425cde2439f@imp.free.fr>
	<BLU173-W20D231F77C10DDCB2B579590680@phx.gbl>
Message-ID: <1396868269.534284ad2512e@imp.free.fr>

Selon Ivan Lucena <lucena_ivan at hotmail.com>:

> I've got it to work. But I could not follow your instructions.
>
> $ vagrant ssh
> Welcome to Ubuntu 12.04 LTS (GNU/Linux 3.2.0-23-generic x86_64)
>
>  * Documentation:  https://help.ubuntu.com/
> Welcome to your Vagrant-built virtual machine.
> Last login: Mon Apr  7 04:24:23 2014 from 10.0.2.2
> vagrant at gdal-vagrant:~$ ls
> postinstall.sh
> vagrant at gdal-vagrant:~$ ls -a
> .   .bash_history  .bashrc  .gem            .profile
> .sudo_as_admin_successful  .veewee_version
> ..  .bash_logout   .cache   postinstall.sh  .ssh      .vbox_version
> vagrant at gdal-vagrant:~$ gdalinfo --version
> The program 'gdalinfo' is currently not installed.  You can install it by
> typing:
> sudo apt-get install gdal-bin
>
> There is no gdal/gdal folder. I ran that "sudo sh posinstall.sh" wish install
> a development environment but that was supposed to run automatically. Right?
> Maybe something got timed out.

Yes, I think something must have gone wrong. Everything should be in place when
you can "vagrant ssh".

You can try commenting with # lines 78 ("if
Dir.glob("#{File.dirname(__FILE__)}/.vagrant/machines/default/*/id").empty?")
and 98 ("end") of Vagrantfile and run :

vagrant provision



>
> > Date: Mon, 7 Apr 2014 10:07:58 +0200
> > From: even.rouault at mines-paris.org
> > To: lucena_ivan at hotmail.com
> > CC: even.rouault at mines-paris.org; gdal-dev at lists.osgeo.org;
> hobu.inc at gmail.com
> > Subject: RE: [gdal-dev] Vagrant developement environment
> >
> > Selon Ivan Lucena <lucena_ivan at hotmail.com>:
> >
> > > > > What version of VirtualBox did you use to create the gdal-vagrant?
> > > >
> > > > I don't think my own version of VirtualBox (4.2.12) has much impact.
> > > There's
> > > > nothing from it in the text files that define the gdal-vagrant
> > > configuration
> > >
> > > I have had the experience that by exporting a VM as appliance on a newer
> > > version of that software I could not successfully import and start the VM
> on
> > > an older version.
> > >
> > > That is OK.
> >
> > Hum, the base VM used by the Vagrantfile is
> > http://files.vagrantup.com/precise64.box . I've used the same one as
> MapServer
> > and PDAL. And apparently Howard is using a Mac as a host...
> >
> > Even
>



From howard at hobu.co  Mon Apr  7 09:09:09 2014
From: howard at hobu.co (Howard Butler)
Date: Mon, 7 Apr 2014 11:09:09 -0500
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <1396868269.534284ad2512e@imp.free.fr>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<201404062024.20698.even.rouault@mines-paris.org>
	<BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>,
	<201404062205.39230.even.rouault@mines-paris.org>
	<BLU173-W6EBFFCD148B1BC7868AF990680@phx.gbl>,
	<1396858078.53425cde2439f@imp.free.fr>
	<BLU173-W20D231F77C10DDCB2B579590680@phx.gbl>
	<1396868269.534284ad2512e@imp.free.fr>
Message-ID: <56AE840B-AB38-45DF-AB65-652D0433BA7A@hobu.co>


On Apr 7, 2014, at 5:57 AM, Even Rouault <even.rouault at mines-paris.org> wrote:

> vagrant provision

If you get stuck with vagrant, on prescribed chicken-waving exercise is to simply do 'vagrant destroy' of the vm and then 'vagrant up' again. 'vagrant provision' will still have the effects of partially Maybe some prerequisite didn't couldn't be built because of network access or something.

From etourigny.dev at gmail.com  Mon Apr  7 10:29:21 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 7 Apr 2014 14:29:21 -0300
Subject: [gdal-dev] errors in GDAL TMS examples
Message-ID: <CA+TxYvOMLTkM+Ha3Pg5-pLdTPpiMQZMzAoO0YKPFCdT5GsE7AQ@mail.gmail.com>

Hi,

I have been looking at the GDAL TMS examples in [1] and it seems there are
a few errors

[1] http://www.gdal.org/frmt_wms.html

I am not sure if the driver, server path or server changes are to blame.


1) shouldn't EPSG:900913 be replaced by EPSG:3857 as it's now an official
EPSG entry?


2) OnEarth Tiled WMS Clementine, WMS srtm and Landsat mosaic do not load

$ gdalinfo frmt_twms_Clementine.xml
ERROR 1: GDAL_WMS TiledWMS:  Can't locate TiledGroup Clementine in server
response.
ERROR 1: GDALWMS: Failed to initialize minidriver.
gdalinfo failed - unable to open 'frmt_twms_Clementine.xml'.

Clementine is not found, but the following are returned:
<Name>Clementine LO Hybrid, LMMP</Name>
<Name>Clementine Mosaic, LMMP</Name>
<Name>Clementine Color Ratio, LMMP</Name>
<Name>Clementine Optical Maturity, LMMP</Name>
<Name>Clementine FeO abundance, LMMP</Name>
<Name>Clementine TiO2 abundance, LMMP</Name>

$ gdalinfo --debug ON  frmt_twms_srtm.xml
HTTP: Fetch(http://onearth.jpl.nasa.gov/wms.cgi?request=GetTileService)
<never ends>

$ gdal_translate -of JPEG -outsize 500 250
frmt_wms_onearth_global_mosaic.xml onearth_global_mosaic.jpg
Input file size is 2949120, 1474560
0
<never ends>


3)  MetaCarta TMS and wmsc - lots of GDAL errors (but gdalinfo is ok),
rendering is bad in QGIS 2.2

$ gdal_translate -of PNG -outsize 512 256 frmt_wms_metacarta_tms.xml
metacarta.png
Input file size is 268435456, 134217728
<bunch of errors>

$ gdal_translate -of PNG -outsize 500 250 frmt_wms_metacarta_wmsc.xml
metacarta_wmsc.png
Input file size is 268435456, 134217728
<bunch of errors>

4)  TileService, Blue Marble NG - does not load

$  gdal_translate -of JPEG -outsize 500 250 frmt_wms_tileservice_bmng.xml
tileservice_bmng.jpg
Input file size is 65536, 32768
0ERROR 1: GDALWMS: Unable to download block 0, 0.
  URL:
http://s0.tileservice.worldwindcentral.com/getTile?interface=map&version=1&dataset=bmng.topo.bathy.200401&level=0&x=0&y=0
  HTTP status code: 404, error: (null).
ERROR 1: frmt_wms_tileservice_bmng.xml, band 1: IReadBlock failed at X
offset 0, Y offset 0


5) TileService, NYSDOP 2004 - does not load

$ gdal_translate -of JPEG -projwin -73.687030 41.262680 -73.686359
41.262345 -outsize 500 250 frmt_wms_tileservice_nysdop2004.xml
tileservice_nysdop2004.jpg
Input file size is 1048576, 1048576
Computed -srcwin 629496 165307 500 250 from projected window.
0ERROR 1: GDALWMS: Unable to download block 1229, 322.
  URL:
http://s0.tileservice.worldwindcentral.com/getTile?interface=map&version=1&dataset=us.newyork_nysdop2004_0.15m&level=19&x=154829&y=70978
  HTTP status code: 404, error: (null).
ERROR 1: frmt_wms_tileservice_nysdop2004.xml, band 1: IReadBlock failed at
X offset 1229, Y offset 322
ERROR 1: GetBlockRef failed at X block offset 1229, Y block offset 322


cheers
Etienne
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140407/ce266a77/attachment.html>

From even.rouault at mines-paris.org  Mon Apr  7 11:11:41 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 7 Apr 2014 20:11:41 +0200
Subject: [gdal-dev] errors in GDAL TMS examples
In-Reply-To: <CA+TxYvOMLTkM+Ha3Pg5-pLdTPpiMQZMzAoO0YKPFCdT5GsE7AQ@mail.gmail.com>
References: <CA+TxYvOMLTkM+Ha3Pg5-pLdTPpiMQZMzAoO0YKPFCdT5GsE7AQ@mail.gmail.com>
Message-ID: <201404072011.41570.even.rouault@mines-paris.org>

Le lundi 07 avril 2014 19:29:21, Etienne Tourigny a ?crit :
> Hi,
> 
> I have been looking at the GDAL TMS examples in [1] and it seems there are
> a few errors
> 
> [1] http://www.gdal.org/frmt_wms.html
> 
> I am not sure if the driver, server path or server changes are to blame.

Hopefully just the server side. If there are fixes, or alternate layers to use, 
in the examples, by all means, just go ahead !

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From david.tran at hsr.ch  Mon Apr  7 11:22:54 2014
From: david.tran at hsr.ch (David Tran)
Date: Mon, 7 Apr 2014 20:22:54 +0200
Subject: [gdal-dev] Gdal 1.10.1 with OCI and ODBC doesn't compile right
In-Reply-To: <201404062022.53546.even.rouault@mines-paris.org>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<201404060240.01923.even.rouault@mines-paris.org>
	<53417555.2050308@hsr.ch>
	<201404062022.53546.even.rouault@mines-paris.org>
Message-ID: <5342ECFE.3030002@hsr.ch>

Hello again

Gdal 1.10.1 compiles fine so far with mingw-builds and i686-w64-mingw32 
flags.

About OCI I already tried this:

http://trac.osgeo.org/gdal/wiki/BuildingOnUnix
https://trac.osgeo.org/gdal/wiki/Oracle

with those (v10-12):

http://www.oracle.com/technetwork/topics/winsoft-085727.html
http://www.oracle.com/technetwork/topics/linuxsoft-082809.html

and it doesn't recognize --with-oci-lib. What am I missing? What files 
is gdal expecting there?


About ODBC I compiled unixODBC but gdal configure deactivates curl and 
proj. What is wrong here?


Thanks in advance.
David

From Michael.Smith at erdc.dren.mil  Mon Apr  7 11:33:31 2014
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Mon, 7 Apr 2014 18:33:31 +0000
Subject: [gdal-dev] [EXTERNAL] Gdal 1.10.1 with OCI and ODBC doesn't
 compile right
In-Reply-To: <5342ECFE.3030002@hsr.ch>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<201404060240.01923.even.rouault@mines-paris.org>
	<53417555.2050308@hsr.ch>
	<201404062022.53546.even.rouault@mines-paris.org>
	<5342ECFE.3030002@hsr.ch>
Message-ID: <CF6866F6.6C8E8%michael.smith@erdc.dren.mil>

David,

For using OCI with GDAL and --with-oci-lib, you need both oci-lib and
oci-include

For example:

--with-oci-include=/home/oracle/local/instantclient_11_2
  --with-oci-lib=/home/oracle/local/instantclient_11_2

And for the lib, you need to symlink

libclntsh.so.11.x -> libclntsh.so
libocci.so.11.x  -> libocci.so


Mike

-- 
Michael Smith

Remote Sensing/GIS Center
US Army Corps of Engineers



On 4/7/14  2:22 PM, "David Tran" <david.tran at hsr.ch> wrote:

>Hello again
>
>Gdal 1.10.1 compiles fine so far with mingw-builds and i686-w64-mingw32
>flags.
>
>About OCI I already tried this:
>
>http://trac.osgeo.org/gdal/wiki/BuildingOnUnix
>https://trac.osgeo.org/gdal/wiki/Oracle
>
>with those (v10-12):
>
>http://www.oracle.com/technetwork/topics/winsoft-085727.html
>http://www.oracle.com/technetwork/topics/linuxsoft-082809.html
>
>and it doesn't recognize --with-oci-lib. What am I missing? What files
>is gdal expecting there?
>
>
>About ODBC I compiled unixODBC but gdal configure deactivates curl and
>proj. What is wrong here?
>
>
>Thanks in advance.
>David
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Mon Apr  7 13:44:50 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 7 Apr 2014 22:44:50 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
	Python bindings to read OSM PBF file
In-Reply-To: <53425BB6.10805@gmail.com>
References: <533AF6B1.1010804@gmail.com>
	<201404051123.43725.even.rouault@mines-paris.org>
	<53425BB6.10805@gmail.com>
Message-ID: <201404072244.50615.even.rouault@mines-paris.org>

Le lundi 07 avril 2014 10:03:02, Dra?en Odoba?i? a ?crit :
> On 05.04.2014 11:23, Even Rouault wrote:
> > Le mercredi 02 avril 2014 21:45:23, Dra?en Odoba?i? a ?crit :
> >> On 02.04.2014 21:38, Even Rouault wrote:
> >>>> I had no issues when reading large PBF files using this method. For
> >>>> the large files, without OSM_USE_CUSTOM_INDEXING=NO I got lots of
> >>>> "Cannot read node ..." error messages, and I'm not sure why.
> >>>> Basically I stumbled onto OSM_USE_CUSTOM_INDEXING=NO which seems to
> >>>> help. However, in this case custom indexing has no effect, script
> >>>> still fails to extract data.
> >>> 
> >>> Hum, there might be a bug in custom indexing that you've hit. What is
> >>> the PBF file you are converting ?
> >>> 
> >>> And to be sure to understand: when setting OSM_USE_CUSTOM_INDEXING=NO,
> >>> the conversion works ?
> >> 
> >> Yes, converting
> >> http://download.geofabrik.de/north-america-latest.osm.pbf (5.9G), works
> >> only with manually overridden OSM_USE_CUSTOM_INDEXING=NO
> > 
> > Dra?en,
> > 
> > I've successfully converted the north-america-latest.osm.pbf with GDAL
> > 1.11beta1 (Linux 64bit system) without having to override
> > OSM_USE_CUSTOM_INDEXING. But the code of the OSM driver hasn't changed
> > significantly w.r.t. 1.10 so I'm not sure why you get an error...
> > 
> > Even
> 
> Hi Even,
> 
> I've tested north-america-latest.osm.pbf (on 1.10 and 1.11), and it works
> without having to override OSM_USE_CUSTOM_INDEXING. I have not been really
> methodical during testing, so there might have been something else that
> triggered that behaviour. At the moment it works as advertised.
> 
> Also, the original problem is triggered only with a PBF file that was
> generated with 'osmconvert' utility, and using GDAL Python bindings to
> read all layers. ogr2ogr CLI utility will correctly finish converting
> osm->shp. However, if I use a tool like 'osmosis' to convert .osm -> .pbf
> in the final data preparation step, Python script also executes correctly.
> 
> It's possible that osmconvert creates a strange PBF file, which is somehow
> misinterpreted when using Python bindings. Anyway, the file is available at
> http://open.geof.hr/~dodobas/admin_level_BAD.pbf (455Mb) if you want to
> test using Python script (http://open.geof.hr/~dodobas/osm_extract.zip)

Hi Dra?en,

I've just tested your pbf file and it showed a limitation of the driver caused 
by the huge PBF blocks produced by osmconvert, that I've fixed with 
http://trac.osgeo.org/gdal/changeset/27138 .
But in my testing, the issue appeared also with ogr2ogr when not specifying 
filters. Your script and ogr2ogr should behave similarly, all other things 
(filters,etc.) remaining equal.

About your script, to test if a field exists, you can use 
lyr.GetLayerDefn().GetFieldIndex('admin_level') >= 0
And for efficiency purpose do not put it in inner loop.
In fact, in your case you could just test that the lyr.GetName() == 
"multipolygons"

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Mon Apr  7 21:49:36 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 8 Apr 2014 00:49:36 -0400
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <56AE840B-AB38-45DF-AB65-652D0433BA7A@hobu.co>
References: <201404060009.38780.even.rouault@mines-paris.org>,
	<201404062024.20698.even.rouault@mines-paris.org>,
	<BLU173-W35E75D6D21271C6AA1284290690@phx.gbl>, ,
	<201404062205.39230.even.rouault@mines-paris.org>,
	<BLU173-W6EBFFCD148B1BC7868AF990680@phx.gbl>, ,
	<1396858078.53425cde2439f@imp.free.fr>,
	<BLU173-W20D231F77C10DDCB2B579590680@phx.gbl>,
	<1396868269.534284ad2512e@imp.free.fr>,
	<56AE840B-AB38-45DF-AB65-652D0433BA7A@hobu.co>
Message-ID: <BLU173-W506006FD650ADB1099B17906B0@phx.gbl>

Hi Howard,

I started it all over and I got it to work. 

When I logged with "vagrant ssh" this time the gdal folder was there but not installed yet.

And I didn't have development tools build GDAL, so I run "sudo sh posinstall.sh" and I also installed "make" and "perl" by hand and after that I got a clean GDAL installation.

Ha, I also needed to install the GDAL-Python "by hand".

I can see that it could be a nice environment to run GDAL autotest, if I could add some SDK dependent driver. 

What else can we do with that thing? How does PDAL take advantage of Vagrant anyway?

Ivan

> From: howard at hobu.co
> Date: Mon, 7 Apr 2014 11:09:09 -0500
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Vagrant developement environment
> 
> 
> On Apr 7, 2014, at 5:57 AM, Even Rouault <even.rouault at mines-paris.org> wrote:
> 
> > vagrant provision
> 
> If you get stuck with vagrant, on prescribed chicken-waving exercise is to simply do 'vagrant destroy' of the vm and then 'vagrant up' again. 'vagrant provision' will still have the effects of partially Maybe some prerequisite didn't couldn't be built because of network access or something.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev??
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140408/a0489640/attachment.html>

From david.tran at hsr.ch  Tue Apr  8 00:44:37 2014
From: david.tran at hsr.ch (David Tran)
Date: Tue, 8 Apr 2014 09:44:37 +0200
Subject: [gdal-dev] [EXTERNAL] Gdal 1.10.1 with OCI and ODBC doesn't
 compile right
In-Reply-To: <CF6866F6.6C8E8%michael.smith@erdc.dren.mil>
References: <201404042219.48550.even.rouault@mines-paris.org>
	<201404060240.01923.even.rouault@mines-paris.org>
	<53417555.2050308@hsr.ch>
	<201404062022.53546.even.rouault@mines-paris.org>
	<5342ECFE.3030002@hsr.ch>
	<CF6866F6.6C8E8%michael.smith@erdc.dren.mil>
Message-ID: <5343A8E5.4080008@hsr.ch>

Hi Mike

I created these symlinks and 
--with-oci-include=/instantclient/sdk/include finds whatever it needs, 
but --with-oci-lib=/instantclient doesn't.

Cheers
David

-------- Original Message  --------
Subject: Re: [EXTERNAL] [gdal-dev] Gdal 1.10.1 with OCI and ODBC doesn't 
compile right
From: Smith, Michael ERDC-RDE-CRREL-NH <Michael.Smith at erdc.dren.mil>
To: David Tran <david.tran at hsr.ch>, gdal-dev at lists.osgeo.org 
<gdal-dev at lists.osgeo.org>
Date: Monday, 7. April 2014 20:33:31

> David,
>
> For using OCI with GDAL and --with-oci-lib, you need both oci-lib and
> oci-include
>
> For example:
>
> --with-oci-include=/home/oracle/local/instantclient_11_2
>    --with-oci-lib=/home/oracle/local/instantclient_11_2
>
> And for the lib, you need to symlink
>
> libclntsh.so.11.x -> libclntsh.so
> libocci.so.11.x  -> libocci.so
>
>
> Mike
>

From lucena_ivan at hotmail.com  Tue Apr  8 07:04:40 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 8 Apr 2014 10:04:40 -0400
Subject: [gdal-dev] [EXTERNAL] Gdal 1.10.1 with OCI and ODBC doesn't
 compile right
In-Reply-To: <5343A8E5.4080008@hsr.ch>
References: <201404042219.48550.even.rouault@mines-paris.org>,
	<201404060240.01923.even.rouault@mines-paris.org>,
	<53417555.2050308@hsr.ch>,
	<201404062022.53546.even.rouault@mines-paris.org>,
	<5342ECFE.3030002@hsr.ch>,
	<CF6866F6.6C8E8%michael.smith@erdc.dren.mil>,
	<5343A8E5.4080008@hsr.ch>
Message-ID: <BLU173-W25370D9E9F1E016BCF3839906B0@phx.gbl>

David,

 

In order to compile the two Oracle driver you need to have in your system an OCI SDK installation appropriated for that plataform/environment. Here are the avaible downloads for Oracle Instant Client:

 

http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html?ssSourceSiteId=ocomen

 

Wish one are you trying to use?

 

Regards,

 

Ivan
 

> Date: Tue, 8 Apr 2014 09:44:37 +0200
> From: david.tran at hsr.ch
> To: Michael.Smith at erdc.dren.mil; gdal-dev at lists.osgeo.org
> CC: sfkeller at hsr.ch
> Subject: Re: [gdal-dev] [EXTERNAL] Gdal 1.10.1 with OCI and ODBC doesn't compile right
> 
> Hi Mike
> 
> I created these symlinks and 
> --with-oci-include=/instantclient/sdk/include finds whatever it needs, 
> but --with-oci-lib=/instantclient doesn't.
> 
> Cheers
> David
> 
> -------- Original Message --------
> Subject: Re: [EXTERNAL] [gdal-dev] Gdal 1.10.1 with OCI and ODBC doesn't 
> compile right
> From: Smith, Michael ERDC-RDE-CRREL-NH <Michael.Smith at erdc.dren.mil>
> To: David Tran <david.tran at hsr.ch>, gdal-dev at lists.osgeo.org 
> <gdal-dev at lists.osgeo.org>
> Date: Monday, 7. April 2014 20:33:31
> 
> > David,
> >
> > For using OCI with GDAL and --with-oci-lib, you need both oci-lib and
> > oci-include
> >
> > For example:
> >
> > --with-oci-include=/home/oracle/local/instantclient_11_2
> > --with-oci-lib=/home/oracle/local/instantclient_11_2
> >
> > And for the lib, you need to symlink
> >
> > libclntsh.so.11.x -> libclntsh.so
> > libocci.so.11.x -> libocci.so
> >
> >
> > Mike
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140408/aa752b95/attachment.html>

From david.tran at hsr.ch  Tue Apr  8 10:26:20 2014
From: david.tran at hsr.ch (David Tran)
Date: Tue, 8 Apr 2014 19:26:20 +0200
Subject: [gdal-dev] [EXTERNAL] Gdal 1.10.1 with OCI and ODBC doesn't
 compile right
In-Reply-To: <BLU173-W25370D9E9F1E016BCF3839906B0@phx.gbl>
References: <201404042219.48550.even.rouault@mines-paris.org>,
	<201404060240.01923.even.rouault@mines-paris.org>,
	<53417555.2050308@hsr.ch>,
	<201404062022.53546.even.rouault@mines-paris.org>,
	<5342ECFE.3030002@hsr.ch>,
	<CF6866F6.6C8E8%michael.smith@erdc.dren.mil>,
	<5343A8E5.4080008@hsr.ch> <BLU173-W25370D9E9F1E016BCF3839906B0@phx.gbl>
Message-ID: <5344313C.8030401@hsr.ch>

I downloaded and put instantclient-basic instantclient-sqlplus 
instantclient-sdk in one folder. I tried linux 32bit, windows x86 and 
also used lib2a tool (as.exe, dlltool.exe and reimp.exe) to convert 
*.lib with *.dll to *.a for mingw, but none of these methods is working: 
library not found


-------- Original Message  --------
Subject: Re: [gdal-dev] [EXTERNAL] Gdal 1.10.1 with OCI and ODBC doesn't 
compile right
From: Ivan Lucena <lucena_ivan at hotmail.com>
To: David Tran <david.tran at hsr.ch>, Smith, Michael ERDC-RDE-CRREL-NH 
<michael.smith at erdc.dren.mil>, gdal-dev at lists.osgeo.org 
<gdal-dev at lists.osgeo.org>
Date: Tuesday, 8. April 2014 16:04:40

> David,
>
> In order to compile the two Oracle driver you need to have in your
> system an OCI SDK installation appropriated for that
> plataform/environment. Here are the avaible downloads for Oracle Instant
> Client:
>
> http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html?ssSourceSiteId=ocomen
>
> Wish one are you trying to use?
>
> Regards,
>
> Ivan
>
>  > Date: Tue, 8 Apr 2014 09:44:37 +0200
>  > From: david.tran at hsr.ch
>  > To: Michael.Smith at erdc.dren.mil; gdal-dev at lists.osgeo.org
>  > CC: sfkeller at hsr.ch
>  > Subject: Re: [gdal-dev] [EXTERNAL] Gdal 1.10.1 with OCI and ODBC
> doesn't compile right
>  >
>  > Hi Mike
>  >
>  > I created these symlinks and
>  > --with-oci-include=/instantclient/sdk/include finds whatever it needs,
>  > but --with-oci-lib=/instantclient doesn't.
>  >
>  > Cheers
>  > David
>  >
>  > -------- Original Message --------
>  > Subject: Re: [EXTERNAL] [gdal-dev] Gdal 1.10.1 with OCI and ODBC doesn't
>  > compile right
>  > From: Smith, Michael ERDC-RDE-CRREL-NH <Michael.Smith at erdc.dren.mil>
>  > To: David Tran <david.tran at hsr.ch>, gdal-dev at lists.osgeo.org
>  > <gdal-dev at lists.osgeo.org>
>  > Date: Monday, 7. April 2014 20:33:31
>  >
>  > > David,
>  > >
>  > > For using OCI with GDAL and --with-oci-lib, you need both oci-lib and
>  > > oci-include
>  > >
>  > > For example:
>  > >
>  > > --with-oci-include=/home/oracle/local/instantclient_11_2
>  > > --with-oci-lib=/home/oracle/local/instantclient_11_2
>  > >
>  > > And for the lib, you need to symlink
>  > >
>  > > libclntsh.so.11.x -> libclntsh.so
>  > > libocci.so.11.x -> libocci.so
>  > >
>  > >
>  > > Mike
>  > >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev at lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jgrn at illinois.edu  Tue Apr  8 11:03:53 2014
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Tue, 8 Apr 2014 13:03:53 -0500
Subject: [gdal-dev] gdalwarp bug using -r mode
Message-ID: <CABG0rftH09s8csmQu+C55_8X91_QMbHBVHtLSiH_HRFRiSkT9w@mail.gmail.com>

Folks:

I'm running a gdalwarp on a sinusoidal MODIS class image to longlat,
using a modal resample (and cropping the output).  The warp is
clipping off a circular region of North America and Australia.  I am
using multithreaded mode, but I confirmed this error also occurs in
sequential mode.  The error occurs on both Windows and Linux boxes
running GDAL 1.10.1.  The error does NOT occur using e.g. a nearest
neighbor resample.

gdalwarp -multi  -te -180 -59.9499994 180 88.5500006 -ts 720 297
-t_srs "+proj=longlat +datum=WGS84 +no_defs" -r "mode" -of "GTiff" -wo
"NUM_THREADS=ALL_CPUS" "MOD44B_V5_TRE.2001_fixed_10k.envi"
"MCD12Q1.A2001001_10k_05deg.tif"

I dropped the input and the output files in:
https://drive.google.com/folderview?id=0B8Kij67bij_AVG1fWko4bFdTRFk&usp=sharing

Any ideas on how to solve this?  I'll also submit a bug using TRAC,
but I wanted to see if there were any short-term fixes for this error.

--j



-- 
Jonathan A. Greenberg, PhD
Assistant Professor
Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
Department of Geography and Geographic Information Science
University of Illinois at Urbana-Champaign
259 Computing Applications Building, MC-150
605 East Springfield Avenue
Champaign, IL  61820-6371
Phone: 217-300-1924
http://www.geog.illinois.edu/~jgrn/
AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007

From cdaponte at synergyaspen.ca  Tue Apr  8 11:44:17 2014
From: cdaponte at synergyaspen.ca (cdp)
Date: Tue, 8 Apr 2014 11:44:17 -0700 (PDT)
Subject: [gdal-dev] Import .GDB into MSSQL Server database
Message-ID: <1396982657219-5133917.post@n6.nabble.com>

Any ideas on how to import a .GDB into MSSQL Server database without
converting to a .shp first?

Thanks all!
C 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Import-GDB-into-MSSQL-Server-database-tp5133917.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Tue Apr  8 12:09:44 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 8 Apr 2014 16:09:44 -0300
Subject: [gdal-dev] gdalwarp bug using -r mode
In-Reply-To: <CABG0rftH09s8csmQu+C55_8X91_QMbHBVHtLSiH_HRFRiSkT9w@mail.gmail.com>
References: <CABG0rftH09s8csmQu+C55_8X91_QMbHBVHtLSiH_HRFRiSkT9w@mail.gmail.com>
Message-ID: <CA+TxYvNB873Kpt6AH0sonC8pywobN+uB7LsARFNsJr=HDtF4Sw@mail.gmail.com>

Hi,

If there is a bug I am responsible for it...

I have just updated the ticket at http://trac.osgeo.org/gdal/ticket/5433

Etienne



On Tue, Apr 8, 2014 at 3:03 PM, Jonathan Greenberg <jgrn at illinois.edu>wrote:

> Folks:
>
> I'm running a gdalwarp on a sinusoidal MODIS class image to longlat,
> using a modal resample (and cropping the output).  The warp is
> clipping off a circular region of North America and Australia.  I am
> using multithreaded mode, but I confirmed this error also occurs in
> sequential mode.  The error occurs on both Windows and Linux boxes
> running GDAL 1.10.1.  The error does NOT occur using e.g. a nearest
> neighbor resample.
>
> gdalwarp -multi  -te -180 -59.9499994 180 88.5500006 -ts 720 297
> -t_srs "+proj=longlat +datum=WGS84 +no_defs" -r "mode" -of "GTiff" -wo
> "NUM_THREADS=ALL_CPUS" "MOD44B_V5_TRE.2001_fixed_10k.envi"
> "MCD12Q1.A2001001_10k_05deg.tif"
>
> I dropped the input and the output files in:
>
> https://drive.google.com/folderview?id=0B8Kij67bij_AVG1fWko4bFdTRFk&usp=sharing
>
> Any ideas on how to solve this?  I'll also submit a bug using TRAC,
> but I wanted to see if there were any short-term fixes for this error.
>
> --j
>
>
>
> --
> Jonathan A. Greenberg, PhD
> Assistant Professor
> Global Environmental Analysis and Remote Sensing (GEARS) Laboratory
> Department of Geography and Geographic Information Science
> University of Illinois at Urbana-Champaign
> 259 Computing Applications Building, MC-150
> 605 East Springfield Avenue
> Champaign, IL  61820-6371
> Phone: 217-300-1924
> http://www.geog.illinois.edu/~jgrn/
> AIM: jgrn307, MSN: jgrn307 at hotmail.com, Gchat: jgrn307, Skype: jgrn3007
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140408/c0a66945/attachment.html>

From bontepaarden at gmail.com  Tue Apr  8 13:02:55 2014
From: bontepaarden at gmail.com (Paul Meems)
Date: Tue, 8 Apr 2014 22:02:55 +0200
Subject: [gdal-dev] MapWindow Open Source GIS Users and Developers Conference
Message-ID: <CAHNf2YRPr6SLDJhxLSgpBONjX2hFSbY+3zzoNPSV_fmZupoKpA@mail.gmail.com>

This year (May 29-31 2014) the 5th Hungarian GIS Conference & Exhibition
organized by the University of Debrecen includes the 4th MapWindow Open
Source GIS Users and Developers Conference.
Please have a look at the conference website:
http://geogis.detek.unideb.hu/TKonferencia/2014/

Like our previous MapWindow conferences we are encouraging other OSGeo
communities to join and give an oral presentation or poster presentation.
At this moment we still have a few presentation slots open for Open Source
GIS related presentations.
Don't be shy and show off your project or product! Allowed languages are
Hungarian and English (preferred).
I hope to see you in Debrecen.

Sorry for sending this through this list, but it's the last week before the
deadline and we really would like some additional Open Source GIS related
presentations.

Thanks,

Paul

 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl



*Join us at the MapWindow GIS Conference 2014
<http://geogis.detek.unideb.hu/TKonferencia/2014/>, in Debrecen Hungary*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140408/4de27066/attachment.html>

From jmathis at redzonesoftware.com  Tue Apr  8 15:21:11 2014
From: jmathis at redzonesoftware.com (Jason Mathis)
Date: Tue, 8 Apr 2014 16:21:11 -0600
Subject: [gdal-dev] gdal_rasterize
Message-ID: <etPan.53447658.2ae8944a.16b@palos>

Hi all was wondering if anyone could help out here. I have been trying to rasterize a shp file using gdal_rasterize and I keep getting an error I have no idea about.


gdal_rasterize(1844,0x7fff7a393310) malloc: *** error for object 0x7f8f40d032e0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug


the command I am using is:
gdal_rasterize -at -burn 1 -a $attribute -where ?$attribute=?value'" -ts 5000 5000 $shapefile $outfile


version is:?
GDAL 1.10.0, released 2013/04/24

I am running os x 10.9.2.

It seems to happen randomly. I have about 10 different values I need to get out. Not sure what other info would be useful so please let me know.?

thanks!

-jason?





-- 
 

This transmission contains confidential and privileged information intended 
solely for the party identified above. If you receive this message in 
error, you must not use it or convey it to others. Please destroy it 
immediately and contact the sender at (303) 386-3955 or by return e-mail to 
the sender.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140408/ee5518b4/attachment.html>

From jan.heckman at gmail.com  Tue Apr  8 15:47:13 2014
From: jan.heckman at gmail.com (Jan Heckman)
Date: Wed, 9 Apr 2014 00:47:13 +0200
Subject: [gdal-dev] Import .GDB into MSSQL Server database
In-Reply-To: <1396982657219-5133917.post@n6.nabble.com>
References: <1396982657219-5133917.post@n6.nabble.com>
Message-ID: <CAKMUAtCMYr+2QmHPt1mgk8Bcvo-EgRF74YS8HqxJzLjVsGZ3tw@mail.gmail.com>

Depends on the geodatabase version.
If (AG) 10, there is a ogr driver for it, so you would not need shapefiles
and avoid losing long fieldnames etc.
There is no driver for earlier AG/gdb versions.
Maybe it's an old
thread<http://gis.stackexchange.com/questions/910/file-geodatabase-open-api>,
but it has some information.
Integration in ogr <http://www.gdal.org/ogr/drv_filegdb.html>.
good luck,
Jan


On Tue, Apr 8, 2014 at 8:44 PM, cdp <cdaponte at synergyaspen.ca> wrote:

> Any ideas on how to import a .GDB into MSSQL Server database without
> converting to a .shp first?
>
> Thanks all!
> C
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Import-GDB-into-MSSQL-Server-database-tp5133917.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140409/fd652ca6/attachment.html>

From kyle at pobox.com  Tue Apr  8 15:52:38 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 8 Apr 2014 16:52:38 -0600
Subject: [gdal-dev] Import .GDB into MSSQL Server database
In-Reply-To: <CAKMUAtCMYr+2QmHPt1mgk8Bcvo-EgRF74YS8HqxJzLjVsGZ3tw@mail.gmail.com>
References: <1396982657219-5133917.post@n6.nabble.com>
	<CAKMUAtCMYr+2QmHPt1mgk8Bcvo-EgRF74YS8HqxJzLjVsGZ3tw@mail.gmail.com>
Message-ID: <CAJ0mEz2gieTWVx7TJq3sqb1gxDKDFWz+qK-xTPZfAK1SGJmzAA@mail.gmail.com>

On Tue, Apr 8, 2014 at 4:47 PM, Jan Heckman <jan.heckman at gmail.com> wrote:
> Depends on the geodatabase version.
> If (AG) 10, there is a ogr driver for it, so you would not need shapefiles
> and avoid losing long fieldnames etc.
> There is no driver for earlier AG/gdb versions.

OpenFileGDB should handle earlier versions, read only:

http://gdal.org/ogr/drv_openfilegdb.html

It's in the trunk.

> Maybe it's an old thread, but it has some information.
> Integration in ogr.
> good luck,
> Jan
>
>
> On Tue, Apr 8, 2014 at 8:44 PM, cdp <cdaponte at synergyaspen.ca> wrote:
>>
>> Any ideas on how to import a .GDB into MSSQL Server database without
>> converting to a .shp first?
>>
>> Thanks all!
>> C
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/Import-GDB-into-MSSQL-Server-database-tp5133917.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

From chaitanya.ch at gmail.com  Tue Apr  8 22:08:19 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed, 9 Apr 2014 10:38:19 +0530
Subject: [gdal-dev] gdal_rasterize
In-Reply-To: <etPan.53447658.2ae8944a.16b@palos>
References: <etPan.53447658.2ae8944a.16b@palos>
Message-ID: <CAMKgpOaf0ysFa+Dt0MfWY_vZonLpNgD0kq4-t872toJsDKAoyQ@mail.gmail.com>

Jason,

Can you provide some sample data to reproduce the error?


On Wed, Apr 9, 2014 at 3:51 AM, Jason Mathis <jmathis at redzonesoftware.com>wrote:

> Hi all was wondering if anyone could help out here. I have been trying to
> rasterize a shp file using gdal_rasterize and I keep getting an error I
> have no idea about.
>
>
> gdal_rasterize(1844,0x7fff7a393310) malloc: *** error for object
> 0x7f8f40d032e0: pointer being freed was not allocated
> *** set a breakpoint in malloc_error_break to debug
>
>
> the command I am using is:
> gdal_rasterize -at -burn 1 -a $attribute -where ?$attribute=?value'" -ts
> 5000 5000 $shapefile $outfile
>
>
> version is:
> GDAL 1.10.0, released 2013/04/24
>
> I am running os x 10.9.2.
>
> It seems to happen randomly. I have about 10 different values I need to
> get out. Not sure what other info would be useful so please let me know.
>
> thanks!
>
> -jason
>
>
>
>
>
> This transmission contains confidential and privileged information
> intended solely for the party identified above. If you receive this message
> in error, you must not use it or convey it to others. Please destroy it
> immediately and contact the sender at (303) 386-3955 or by return e-mail to
> the sender.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140409/c032e35a/attachment-0001.html>

From jan.heckman at gmail.com  Wed Apr  9 01:13:05 2014
From: jan.heckman at gmail.com (Jan Heckman)
Date: Wed, 9 Apr 2014 10:13:05 +0200
Subject: [gdal-dev] Import .GDB into MSSQL Server database
In-Reply-To: <CAJ0mEz2gieTWVx7TJq3sqb1gxDKDFWz+qK-xTPZfAK1SGJmzAA@mail.gmail.com>
References: <1396982657219-5133917.post@n6.nabble.com>
	<CAKMUAtCMYr+2QmHPt1mgk8Bcvo-EgRF74YS8HqxJzLjVsGZ3tw@mail.gmail.com>
	<CAJ0mEz2gieTWVx7TJq3sqb1gxDKDFWz+qK-xTPZfAK1SGJmzAA@mail.gmail.com>
Message-ID: <CAKMUAtC+ZJcL-A0VM=zTu9Z6nYJsgM1S8qyEquHD2Z-H2aO34g@mail.gmail.com>

Hey Kyle,
I had missed it can now read earlier gdb! Great!
Thanks for the head(s)-up!!
Jan


On Wed, Apr 9, 2014 at 12:52 AM, Kyle Shannon <kyle at pobox.com> wrote:

> On Tue, Apr 8, 2014 at 4:47 PM, Jan Heckman <jan.heckman at gmail.com> wrote:
> > Depends on the geodatabase version.
> > If (AG) 10, there is a ogr driver for it, so you would not need
> shapefiles
> > and avoid losing long fieldnames etc.
> > There is no driver for earlier AG/gdb versions.
>
> OpenFileGDB should handle earlier versions, read only:
>
> http://gdal.org/ogr/drv_openfilegdb.html
>
> It's in the trunk.
>
> > Maybe it's an old thread, but it has some information.
> > Integration in ogr.
> > good luck,
> > Jan
> >
> >
> > On Tue, Apr 8, 2014 at 8:44 PM, cdp <cdaponte at synergyaspen.ca> wrote:
> >>
> >> Any ideas on how to import a .GDB into MSSQL Server database without
> >> converting to a .shp first?
> >>
> >> Thanks all!
> >> C
> >>
> >>
> >>
> >> --
> >> View this message in context:
> >>
> http://osgeo-org.1560.x6.nabble.com/Import-GDB-into-MSSQL-Server-database-tp5133917.html
> >> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Kyle
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140409/8d1b2d38/attachment.html>

From dodobasic at gmail.com  Wed Apr  9 01:21:30 2014
From: dodobasic at gmail.com (=?UTF-8?B?RHJhxb5lbiBPZG9iYcWhacSH?=)
Date: Wed, 09 Apr 2014 10:21:30 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
 Python bindings to read OSM PBF file
In-Reply-To: <201404072244.50615.even.rouault@mines-paris.org>
References: <533AF6B1.1010804@gmail.com>
	<201404051123.43725.even.rouault@mines-paris.org>
	<53425BB6.10805@gmail.com>
	<201404072244.50615.even.rouault@mines-paris.org>
Message-ID: <5345030A.3080102@gmail.com>

On 07.04.2014 22:44, Even Rouault wrote:
> 
> Hi Dra?en,
> 
> I've just tested your pbf file and it showed a limitation of the driver caused 
> by the huge PBF blocks produced by osmconvert, that I've fixed with 
> http://trac.osgeo.org/gdal/changeset/27138 .
> But in my testing, the issue appeared also with ogr2ogr when not specifying 
> filters. Your script and ogr2ogr should behave similarly, all other things 
> (filters,etc.) remaining equal.
> 
> About your script, to test if a field exists, you can use 
> lyr.GetLayerDefn().GetFieldIndex('admin_level') >= 0
> And for efficiency purpose do not put it in inner loop.
> In fact, in your case you could just test that the lyr.GetName() == 
> "multipolygons"
> 
> Even
> 

Tnx Even,

I can't wait to try it out once new 1.11 beta gets tagged.

Also, tnx for the tip, the script evolved in a way that inner loop executes a
predicate function which will test is the feature something that's usable.

Dra?en

From even.rouault at mines-paris.org  Wed Apr  9 01:52:12 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Apr 2014 10:52:12 +0200
Subject: [gdal-dev] Strange reset OGR_INTERLEAVED_READING when using
	Python bindings to read OSM PBF file
In-Reply-To: <5345030A.3080102@gmail.com>
References: <533AF6B1.1010804@gmail.com>
	<201404072244.50615.even.rouault@mines-paris.org>
	<5345030A.3080102@gmail.com>
Message-ID: <201404091052.12633.even.rouault@mines-paris.org>

Le mercredi 09 avril 2014 10:21:30, Dra?en Odoba?i? a ?crit :
> On 07.04.2014 22:44, Even Rouault wrote:
> > Hi Dra?en,
> > 
> > I've just tested your pbf file and it showed a limitation of the driver
> > caused by the huge PBF blocks produced by osmconvert, that I've fixed
> > with http://trac.osgeo.org/gdal/changeset/27138 .
> > But in my testing, the issue appeared also with ogr2ogr when not
> > specifying filters. Your script and ogr2ogr should behave similarly, all
> > other things (filters,etc.) remaining equal.
> > 
> > About your script, to test if a field exists, you can use
> > lyr.GetLayerDefn().GetFieldIndex('admin_level') >= 0
> > And for efficiency purpose do not put it in inner loop.
> > In fact, in your case you could just test that the lyr.GetName() ==
> > "multipolygons"
> > 
> > Even
> 
> Tnx Even,
> 
> I can't wait to try it out once new 1.11 beta gets tagged.

If you can't wait, just download a svntrunk package from 
http://www.gdal.org/daily/ :-)

> 
> Also, tnx for the tip, the script evolved in a way that inner loop executes
> a predicate function which will test is the feature something that's
> usable.
> 
> Dra?en

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jmathis at redzonesoftware.com  Wed Apr  9 07:43:58 2014
From: jmathis at redzonesoftware.com (Jason Mathis)
Date: Wed, 9 Apr 2014 08:43:58 -0600
Subject: [gdal-dev] gdal_rasterize
In-Reply-To: <CAMKgpOaf0ysFa+Dt0MfWY_vZonLpNgD0kq4-t872toJsDKAoyQ@mail.gmail.com>
References: <etPan.53447658.2ae8944a.16b@palos>
	<CAMKgpOaf0ysFa+Dt0MfWY_vZonLpNgD0kq4-t872toJsDKAoyQ@mail.gmail.com>
Message-ID: <etPan.53455cae.6b8b4567.a0c@palos>

That maybe difficult, not sure I can share the shapefile I am using. Although I could try and find a sample and reproduce the error; if I can.?

Are you thinking this could be data related??

I will respond when i can reproduce.?

Thanks!?


On April 8, 2014 at 11:08:20 PM, Chaitanya kumar CH (chaitanya.ch at gmail.com) wrote:

Jason,

Can you provide some sample data to reproduce the error?


On Wed, Apr 9, 2014 at 3:51 AM, Jason Mathis <jmathis at redzonesoftware.com> wrote:
Hi all was wondering if anyone could help out here. I have been trying to rasterize a shp file using gdal_rasterize and I keep getting an error I have no idea about.


gdal_rasterize(1844,0x7fff7a393310) malloc: *** error for object 0x7f8f40d032e0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug


the command I am using is:
gdal_rasterize -at -burn 1 -a $attribute -where ?$attribute=?value'" -ts 5000 5000 $shapefile $outfile


version is:?
GDAL 1.10.0, released 2013/04/24

I am running os x 10.9.2.

It seems to happen randomly. I have about 10 different values I need to get out. Not sure what other info would be useful so please let me know.?

thanks!

-jason?





This transmission contains confidential and privileged information intended solely for the party identified above. If you receive this message in error, you must not use it or convey it to others. Please destroy it immediately and contact the sender at (303) 386-3955 or by return e-mail to the sender.


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-- 
 

This transmission contains confidential and privileged information intended 
solely for the party identified above. If you receive this message in 
error, you must not use it or convey it to others. Please destroy it 
immediately and contact the sender at (303) 386-3955 or by return e-mail to 
the sender.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140409/006bb1d7/attachment.html>

From even.rouault at mines-paris.org  Wed Apr  9 07:49:17 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Apr 2014 16:49:17 +0200
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <BLU173-W506006FD650ADB1099B17906B0@phx.gbl>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<56AE840B-AB38-45DF-AB65-652D0433BA7A@hobu.co>
	<BLU173-W506006FD650ADB1099B17906B0@phx.gbl>
Message-ID: <201404091649.17961.even.rouault@mines-paris.org>

Le mardi 08 avril 2014 06:49:36, Ivan Lucena a ?crit :
> Hi Howard,
> 
> I started it all over and I got it to work.
> 
> When I logged with "vagrant ssh" this time the gdal folder was there but
> not installed yet.
> 
> And I didn't have development tools build GDAL, so I run "sudo sh
> posinstall.sh" and I also installed "make" and "perl" by hand and after
> that I got a clean GDAL installation.
> 
> Ha, I also needed to install the GDAL-Python "by hand".

When rebuilding from scratch, I could see that there was indeed an issue  with 
Perl bindings. I've disabled them. So "vagrant up" show work OK

> 
> I can see that it could be a nice environment to run GDAL autotest, if I
> could add some SDK dependent driver.

You can add custom scripts to install the SDK and list them in Vagrantfile, and 
edit gdal.sh to build against the additional SDKs.

> 
> What else can we do with that thing? How does PDAL take advantage of
> Vagrant anyway?
> 
> Ivan
> 
> > From: howard at hobu.co
> > Date: Mon, 7 Apr 2014 11:09:09 -0500
> > To: gdal-dev at lists.osgeo.org
> > Subject: Re: [gdal-dev] Vagrant developement environment
> > 
> > On Apr 7, 2014, at 5:57 AM, Even Rouault <even.rouault at mines-paris.org> 
wrote:
> > > vagrant provision
> > 
> > If you get stuck with vagrant, on prescribed chicken-waving exercise is
> > to simply do 'vagrant destroy' of the vm and then 'vagrant up' again.
> > 'vagrant provision' will still have the effects of partially Maybe some
> > prerequisite didn't couldn't be built because of network access or
> > something. _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev??

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jmathis at redzonesoftware.com  Wed Apr  9 09:01:38 2014
From: jmathis at redzonesoftware.com (Jason Mathis)
Date: Wed, 9 Apr 2014 10:01:38 -0600
Subject: [gdal-dev] gdal_rasterize
In-Reply-To: <etPan.534560fe.643c9869.a0c@palos>
References: <etPan.53447658.2ae8944a.16b@palos>
	<CAMKgpOaf0ysFa+Dt0MfWY_vZonLpNgD0kq4-t872toJsDKAoyQ@mail.gmail.com>
	<etPan.53455cae.6b8b4567.a0c@palos> <etPan.534560fe.643c9869.a0c@palos>
Message-ID: <etPan.53456ee2.19495cff.a0c@palos>

All right I think I fixed it.?

I created a centos vm and installed gdal from yum and everything worked fine. Which made me very suspect of my box:(?

I have been using an older version of the postgres.app that comes with postgis and apparently some gdal binaries. I realized when I did a ?which gdal_rasterize? that I was pointed at the postgres.app binaries. In the past I had installed binaries from kyngchaos? site

http://www.kyngchaos.com/software:frameworks

so all I needed to do was:?

export PATH=/Library/Frameworks/GDAL.framework/Programs:$PATH

to point at the binaries from the kyngchaos? install and now I have run my script several times without error. Some thing before I couldn?t do even once. I was using an older postgres.app so upgrading that could have solved the issue as well. May try that later but so happy it running good now!?

Thanks for the responds but I believe I am good to go.?

-jason?


On April 9, 2014 at 9:02:24 AM, Jason Mathis (jmathis at redzonesoftware.com) wrote:

Well that was easy. You can use the attached shape file, I can certainly reproduce the error no problem. I am currently bringing up a centos vm to see if it has the same behavior.?

Here are the commands to reproduce:

gdal_rasterize -a region -where "region='0'" -burn 2 ?-ts 1000 1000 countries.shp countries.tif
gdal_rasterize -a region -where "region='2'" -b 1 -burn 3 countries.shp countries.tif
gdal_rasterize -a region -where "region='9'" -b 1 -burn 4 countries.shp countries.tif
gdal_rasterize -a region -where "region='19'" -b 1 -burn 5 countries.shp countries.tif
gdal_rasterize -a region -where "region='142'" -b 1 -burn 6 countries.shp countries.tif
gdal_rasterize -a region -where "region='150'" -b 1 -burn 7 ?countries.shp countries.tif


thanks,
-jason?


On April 9, 2014 at 8:43:59 AM, Jason Mathis (jmathis at redzonesoftware.com) wrote:

That maybe difficult, not sure I can share the shapefile I am using. Although I could try and find a sample and reproduce the error; if I can.?

Are you thinking this could be data related??

I will respond when i can reproduce.?

Thanks!?


On April 8, 2014 at 11:08:20 PM, Chaitanya kumar CH (chaitanya.ch at gmail.com) wrote:

Jason,

Can you provide some sample data to reproduce the error?


On Wed, Apr 9, 2014 at 3:51 AM, Jason Mathis <jmathis at redzonesoftware.com> wrote:
Hi all was wondering if anyone could help out here. I have been trying to rasterize a shp file using gdal_rasterize and I keep getting an error I have no idea about.


gdal_rasterize(1844,0x7fff7a393310) malloc: *** error for object 0x7f8f40d032e0: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug


the command I am using is:
gdal_rasterize -at -burn 1 -a $attribute -where ?$attribute=?value'" -ts 5000 5000 $shapefile $outfile


version is:?
GDAL 1.10.0, released 2013/04/24

I am running os x 10.9.2.

It seems to happen randomly. I have about 10 different values I need to get out. Not sure what other info would be useful so please let me know.?

thanks!

-jason?





This transmission contains confidential and privileged information intended solely for the party identified above. If you receive this message in error, you must not use it or convey it to others. Please destroy it immediately and contact the sender at (303) 386-3955 or by return e-mail to the sender.


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-- 
 

This transmission contains confidential and privileged information intended 
solely for the party identified above. If you receive this message in 
error, you must not use it or convey it to others. Please destroy it 
immediately and contact the sender at (303) 386-3955 or by return e-mail to 
the sender.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140409/16a421de/attachment-0001.html>

From ari.jolma at gmail.com  Wed Apr  9 10:01:55 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 09 Apr 2014 20:01:55 +0300
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <201404091649.17961.even.rouault@mines-paris.org>
References: <201404060009.38780.even.rouault@mines-paris.org>	<56AE840B-AB38-45DF-AB65-652D0433BA7A@hobu.co>	<BLU173-W506006FD650ADB1099B17906B0@phx.gbl>
	<201404091649.17961.even.rouault@mines-paris.org>
Message-ID: <53457D03.4070901@gmail.com>

On 04/09/2014 05:49 PM, Even Rouault wrote:
> Le mardi 08 avril 2014 06:49:36, Ivan Lucena a ?crit :
>> Hi Howard,
>>
>> I started it all over and I got it to work.
>>
>> When I logged with "vagrant ssh" this time the gdal folder was there but
>> not installed yet.
>>
>> And I didn't have development tools build GDAL, so I run "sudo sh
>> posinstall.sh" and I also installed "make" and "perl" by hand and after
>> that I got a clean GDAL installation.
>>
>> Ha, I also needed to install the GDAL-Python "by hand".
> When rebuilding from scratch, I could see that there was indeed an issue  with
> Perl bindings. I've disabled them. So "vagrant up" show work OK

May I ask, what was this issue?

Ari


From even.rouault at mines-paris.org  Wed Apr  9 10:09:01 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Apr 2014 19:09:01 +0200
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <53457D03.4070901@gmail.com>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<201404091649.17961.even.rouault@mines-paris.org>
	<53457D03.4070901@gmail.com>
Message-ID: <201404091909.01866.even.rouault@mines-paris.org>

Le mercredi 09 avril 2014 19:01:55, Ari Jolma a ?crit :
> On 04/09/2014 05:49 PM, Even Rouault wrote:
> > Le mardi 08 avril 2014 06:49:36, Ivan Lucena a ?crit :
> >> Hi Howard,
> >> 
> >> I started it all over and I got it to work.
> >> 
> >> When I logged with "vagrant ssh" this time the gdal folder was there but
> >> not installed yet.
> >> 
> >> And I didn't have development tools build GDAL, so I run "sudo sh
> >> posinstall.sh" and I also installed "make" and "perl" by hand and after
> >> that I got a clean GDAL installation.
> >> 
> >> Ha, I also needed to install the GDAL-Python "by hand".
> > 
> > When rebuilding from scratch, I could see that there was indeed an issue 
> > with Perl bindings. I've disabled them. So "vagrant up" show work OK
> 
> May I ask, what was this issue?

I didn't really investigate. Likely "make generate" not done when you build 
from a fresh svn checkout.

> 
> Ari
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From ari.jolma at gmail.com  Wed Apr  9 11:06:01 2014
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 09 Apr 2014 21:06:01 +0300
Subject: [gdal-dev] Vagrant developement environment
In-Reply-To: <201404091909.01866.even.rouault@mines-paris.org>
References: <201404060009.38780.even.rouault@mines-paris.org>
	<201404091649.17961.even.rouault@mines-paris.org>
	<53457D03.4070901@gmail.com>
	<201404091909.01866.even.rouault@mines-paris.org>
Message-ID: <53458C09.1010105@gmail.com>

On 04/09/2014 08:09 PM, Even Rouault wrote:
> Le mercredi 09 avril 2014 19:01:55, Ari Jolma a ?crit :
>> On 04/09/2014 05:49 PM, Even Rouault wrote:
>>> Le mardi 08 avril 2014 06:49:36, Ivan Lucena a ?crit :
>>>> Hi Howard,
>>>>
>>>> I started it all over and I got it to work.
>>>>
>>>> When I logged with "vagrant ssh" this time the gdal folder was there but
>>>> not installed yet.
>>>>
>>>> And I didn't have development tools build GDAL, so I run "sudo sh
>>>> posinstall.sh" and I also installed "make" and "perl" by hand and after
>>>> that I got a clean GDAL installation.
>>>>
>>>> Ha, I also needed to install the GDAL-Python "by hand".
>>> When rebuilding from scratch, I could see that there was indeed an issue
>>> with Perl bindings. I've disabled them. So "vagrant up" show work OK
>> May I ask, what was this issue?
> I didn't really investigate. Likely "make generate" not done when you build
> from a fresh svn checkout.

I tested and found out that it was the order of things in GNUmakefile 
for target build. Now it checks first the wrappers and generates them 
unless they exist.

Wrapper generation requires swig of course.

Ari


From landa.martin at gmail.com  Wed Apr  9 15:31:45 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 00:31:45 +0200
Subject: [gdal-dev] oci and oracle express 11
Message-ID: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>

Hi all,

I would like to set up connection between OGR and Oracle Express 11g,
I downloaded Oracle SQL Developer and set up the connection, when I
try to connect to the database using user/password it works.

When using OGR I entered to command line

ogrinfo -ro OCI:user/password -sql "select count(*) from emp"

but it failed with

ERROR 1: ORA-12560: TNS:protocol adapter error
 in <unnamed>

Thanks in advance for any pointers! Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From Michael.Smith at erdc.dren.mil  Wed Apr  9 15:39:43 2014
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Wed, 9 Apr 2014 22:39:43 +0000
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
In-Reply-To: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
Message-ID: <CF6B43EF.ED86F%michael.smith@erdc.dren.mil>

Martin,

You need a bit more info in the connection

ogrinfo -ro OCI:user/password at hostname/sid -sql "select count(*) from emp"


Where hostname is the server name (or something like localhost) and sid is
the oracle instance name. if this is XE, then the sid is xe

So try  ogrinfo -ro OCI:user/password at localhost/xe -sql "select count(*)
from emp"

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 4/9/14, 6:31 PM, "Martin Landa" <landa.martin at gmail.com> wrote:

>Hi all,
>
>I would like to set up connection between OGR and Oracle Express 11g,
>I downloaded Oracle SQL Developer and set up the connection, when I
>try to connect to the database using user/password it works.
>
>When using OGR I entered to command line
>
>ogrinfo -ro OCI:user/password -sql "select count(*) from emp"
>
>but it failed with
>
>ERROR 1: ORA-12560: TNS:protocol adapter error
> in <unnamed>
>
>Thanks in advance for any pointers! Martin
>
>-- 
>Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From landa.martin at gmail.com  Wed Apr  9 15:47:24 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 00:47:24 +0200
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
In-Reply-To: <CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
Message-ID: <CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>

Hi Micheal,

2014-04-10 0:39 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
<Michael.Smith at erdc.dren.mil>:

[...]

thanks for super-quick answer...

> So try  ogrinfo -ro OCI:user/password at localhost/xe -sql "select count(*)
> from emp"

ogrinfo -ro OCI:user/password at localhost/xe -sql "select count(*) from emp"
ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
 in <unnamed>

I double-checked user/password, and it seems to be OK, any idea?

Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From Michael.Smith at erdc.dren.mil  Wed Apr  9 16:00:29 2014
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Wed, 9 Apr 2014 23:00:29 +0000
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
In-Reply-To: <CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
Message-ID: <CF6B4911.ED877%michael.smith@erdc.dren.mil>

What does

 lsrnctl status

Return? That will report back the status of the listener and the host,
port and sid info.

Mike

On 4/9/14, 6:47 PM, "Martin Landa" <landa.martin at gmail.com> wrote:

>Hi Micheal,
>
>2014-04-10 0:39 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
><Michael.Smith at erdc.dren.mil>:
>
>[...]
>
>thanks for super-quick answer...
>
>> So try  ogrinfo -ro OCI:user/password at localhost/xe -sql "select count(*)
>> from emp"
>
>ogrinfo -ro OCI:user/password at localhost/xe -sql "select count(*) from emp"
>ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
> in <unnamed>
>
>I double-checked user/password, and it seems to be OK, any idea?
>
>Martin
>
>-- 
>Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa


From landa.martin at gmail.com  Wed Apr  9 16:11:56 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 01:11:56 +0200
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
In-Reply-To: <CF6B4911.ED877%michael.smith@erdc.dren.mil>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
Message-ID: <CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>

2014-04-10 1:00 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
<Michael.Smith at erdc.dren.mil>:
> What does
>
>  lsrnctl status
>
> Return? That will report back the status of the listener and the host,
> port and sid info.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1)))
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for 32-bit Windows: Version 11.2.0.2.0 - Produ
ction
Start Date                09-DUB-2014 03:26:29
Uptime                    0 days 21 hr. 39 min. 33 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Default Service           XE
Listener Parameter File   C:\oraclexe\app\oracle\product\11.2.0\server\network\a
dmin\listener.ora
Listener Log File         C:\oraclexe\app\oracle\diag\tnslsnr\geo1\listener\aler
t\log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\EXTPROC1ipc)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=geo1)(PORT=1521)))
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=geo1)(PORT=8080))(Presentation=HTTP)
(Session=RAW))
Services Summary...
Service "CLRExtProc" has 1 instance(s).
  Instance "CLRExtProc", status UNKNOWN, has 1 handler(s) for this service...
Service "PLSExtProc" has 1 instance(s).
  Instance "PLSExtProc", status UNKNOWN, has 1 handler(s) for this service...
Service "XEXDB" has 1 instance(s).
  Instance "xe", status READY, has 1 handler(s) for this service...
Service "xe" has 1 instance(s).
  Instance "xe", status READY, has 1 handler(s) for this service...
The command completed successfully
LSNRCTL>

I tried

ogrinfo -ro OCI:user/password at localhost:1521/xe -sql "select count(*) from emp"

and

ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from emp"

but with no success. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From Michael.Smith at erdc.dren.mil  Wed Apr  9 16:40:58 2014
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Wed, 9 Apr 2014 23:40:58 +0000
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
In-Reply-To: <CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
Message-ID: <CF6B5241.ED87C%michael.smith@erdc.dren.mil>

Hmm, this one should have work

ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from emp"


You can use debug mode and see what might be going on. This is windows I
see so try

SET CPL_DEBUG=ON
ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from emp"


That might give you some more information.

Does sqlplus connect and allow access?

Mike
-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 4/9/14, 7:11 PM, "Martin Landa" <landa.martin at gmail.com> wrote:

>2014-04-10 1:00 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
><Michael.Smith at erdc.dren.mil>:
>> What does
>>
>>  lsrnctl status
>>
>> Return? That will report back the status of the listener and the host,
>> port and sid info.
>
>Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=IPC)(KEY=EXTPROC1)))
>STATUS of the LISTENER
>------------------------
>Alias                     LISTENER
>Version                   TNSLSNR for 32-bit Windows: Version 11.2.0.2.0
>- Produ
>ction
>Start Date                09-DUB-2014 03:26:29
>Uptime                    0 days 21 hr. 39 min. 33 sec
>Trace Level               off
>Security                  ON: Local OS Authentication
>SNMP                      OFF
>Default Service           XE
>Listener Parameter File
>C:\oraclexe\app\oracle\product\11.2.0\server\network\a
>dmin\listener.ora
>Listener Log File 
>C:\oraclexe\app\oracle\diag\tnslsnr\geo1\listener\aler
>t\log.xml
>Listening Endpoints Summary...
>  (DESCRIPTION=(ADDRESS=(PROTOCOL=ipc)(PIPENAME=\\.\pipe\EXTPROC1ipc)))
>  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=geo1)(PORT=1521)))
>  
>(DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=geo1)(PORT=8080))(Presentation=H
>TTP)
>(Session=RAW))
>Services Summary...
>Service "CLRExtProc" has 1 instance(s).
>  Instance "CLRExtProc", status UNKNOWN, has 1 handler(s) for this
>service...
>Service "PLSExtProc" has 1 instance(s).
>  Instance "PLSExtProc", status UNKNOWN, has 1 handler(s) for this
>service...
>Service "XEXDB" has 1 instance(s).
>  Instance "xe", status READY, has 1 handler(s) for this service...
>Service "xe" has 1 instance(s).
>  Instance "xe", status READY, has 1 handler(s) for this service...
>The command completed successfully
>LSNRCTL>
>
>I tried
>
>ogrinfo -ro OCI:user/password at localhost:1521/xe -sql "select count(*)
>from emp"
>
>and
>
>ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from emp"
>
>but with no success. Martin
>
>-- 
>Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa


From landa.martin at gmail.com  Wed Apr  9 17:01:48 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 02:01:48 +0200
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
In-Reply-To: <CF6B5241.ED87C%michael.smith@erdc.dren.mil>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
Message-ID: <CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>

Hi,

2014-04-10 1:40 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
<Michael.Smith at erdc.dren.mil>:
> Hmm, this one should have work
>
> ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from emp"
>
>
> You can use debug mode and see what might be going on. This is windows I
> see so try
>
> SET CPL_DEBUG=ON
> ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from emp"

unfortunately there is not so much info...

OGR: Auto register C:\OSGeo4W_oci\\bin\gdalplugins\ogr_OCI.dll using RegisterOGR
OCI.
OCI: Userid=<user>, Password=<passwd>, Database=geo1:1521/xe
ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
 in <unnamed>

> Does sqlplus connect and allow access?

This works...

SQL> connect <user>/<passwd>@xe
Connected.

Martin

From Michael.Smith at erdc.dren.mil  Wed Apr  9 18:27:39 2014
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Thu, 10 Apr 2014 01:27:39 +0000
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
In-Reply-To: <CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
Message-ID: <CF6B6B73.ED887%michael.smith@erdc.dren.mil>

If <user>/<passwd>@xe works in sqlplus, you can use that in OGR. Its using
the same libs to connect.

Try ogrinfo -ro OCI:<user>/<passwd>@xe

Mike

On 4/9/14, 8:01 PM, "Martin Landa" <landa.martin at gmail.com> wrote:

>Hi,
>
>2014-04-10 1:40 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
><Michael.Smith at erdc.dren.mil>:
>> Hmm, this one should have work
>>
>> ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from
>>emp"
>>
>>
>> You can use debug mode and see what might be going on. This is windows I
>> see so try
>>
>> SET CPL_DEBUG=ON
>> ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from
>>emp"
>
>unfortunately there is not so much info...
>
>OGR: Auto register C:\OSGeo4W_oci\\bin\gdalplugins\ogr_OCI.dll using
>RegisterOGR
>OCI.
>OCI: Userid=<user>, Password=<passwd>, Database=geo1:1521/xe
>ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
> in <unnamed>
>
>> Does sqlplus connect and allow access?
>
>This works...
>
>SQL> connect <user>/<passwd>@xe
>Connected.
>
>Martin


From jmathis at redzonesoftware.com  Wed Apr  9 19:31:40 2014
From: jmathis at redzonesoftware.com (Jason Mathis)
Date: Wed, 9 Apr 2014 20:31:40 -0600
Subject: [gdal-dev] ogr2ogr ERROR 6: No translation
Message-ID: <etPan.5346028d.6b8b4567.226e@palos>

Hi All,

On to the next problem:) I discovered today that I need to reproject the shape file before rasterizing it. I get the below error.?

Any ideas? Is it not possible??

Thanks!

palos:noharm jmathis$ ogr2ogr -t_srs prj2.txt output.shp ?source.shp
ERROR 6: No translation for Albers to PROJ.4 format is known.
Failed to create coordinate transformation between the
following coordinate systems. ?This may be because they
are not transformable, or because projection services
(PROJ.4 DLL/.so) could not be loaded.
Source:
GEOGCS["GCS_WGS_1984",
? ? DATUM["WGS_1984",
? ? ? ? SPHEROID["WGS_84",6378137.0,298.257223563]],
? ? PRIMEM["Greenwich",0.0],
? ? UNIT["Degree",0.0174532925199433]]
Target:
PROJCS["NAD_1983_Albers",
? ? GEOGCS["GCS_North_American_1983",
? ? ? ? DATUM["D_North_American_1983",
? ? ? ? ? ? SPHEROID["GRS_1980",6378137.0,298.257222101]],
? ? ? ? PRIMEM["Greenwich",0.0],
? ? ? ? UNIT["Degree",0.0174532925199433]],
? ? PROJECTION["Albers"],
? ? PARAMETER["False_Easting",0.0],
? ? PARAMETER["False_Northing",0.0],
? ? PARAMETER["Central_Meridian",-96.0],
? ? PARAMETER["Standard_Parallel_1",29.5],
? ? PARAMETER["Standard_Parallel_2",45.5],
? ? PARAMETER["Latitude_Of_Origin",23.0],
? ? UNIT["Meter",1.0]]
ERROR 1: Terminating translation prematurely after failed
translation of layer source (use -skipfailures to skip errors)
-- 
 

This transmission contains confidential and privileged information intended 
solely for the party identified above. If you receive this message in 
error, you must not use it or convey it to others. Please destroy it 
immediately and contact the sender at (303) 386-3955 or by return e-mail to 
the sender.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140409/5d70261a/attachment-0001.html>

From andre+joost at nurfuerspam.de  Wed Apr  9 21:10:08 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 10 Apr 2014 06:10:08 +0200
Subject: [gdal-dev] ogr2ogr ERROR 6: No translation
In-Reply-To: <etPan.5346028d.6b8b4567.226e@palos>
References: <etPan.5346028d.6b8b4567.226e@palos>
Message-ID: <li55k3$mp7$1@ger.gmane.org>

Am 10.04.2014 04:31, schrieb Jason Mathis:
> Hi All,
>
> On to the next problem:) I discovered today that I need to reproject
> the shape file before rasterizing it. I get the below error.
>
> Any ideas? Is it not possible?
>


What extent does your shapefile have?
Some projections are limited to the visible half of the globe.

HTH,
Andr? Joost


From lhomme.xavier at gmail.com  Wed Apr  9 21:22:05 2014
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Thu, 10 Apr 2014 06:22:05 +0200
Subject: [gdal-dev] ogr2ogr ERROR 6: No translation
In-Reply-To: <CACqzBMwTdWqYkJbeEDDX0DVHvXJcpQkOHsJF_nbfsq1B2QgNJg@mail.gmail.com>
References: <etPan.5346028d.6b8b4567.226e@palos> <li55k3$mp7$1@ger.gmane.org>
	<CACqzBMwTdWqYkJbeEDDX0DVHvXJcpQkOHsJF_nbfsq1B2QgNJg@mail.gmail.com>
Message-ID: <CACqzBMxN1B2=GKi7WCE2m+yTHd74Z+CwzJWP8Bw4QW02RfKYuA@mail.gmail.com>

Hi

You should specify the version of gdal you are using (and proj4 too).
Sometimes ago I used NGA Geotrans to perform GeoId conversion. But recent
version of proj4 are able to perform such conversion.
Le 10 avr. 2014 06:11, "Andre Joost" <andre+joost at nurfuerspam.de> a ?crit :

Am 10.04.2014 04:31, schrieb Jason Mathis:

 Hi All,
>
> On to the next problem:) I discovered today that I need to reproject
> the shape file before rasterizing it. I get the below error.
>
> Any ideas? Is it not possible?
>
>

What extent does your shapefile have?
Some projections are limited to the visible half of the globe.

HTH,
Andr? Joost

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140410/60a6c58b/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Apr  9 23:53:42 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 10 Apr 2014 06:53:42 +0000 (UTC)
Subject: [gdal-dev] oci and oracle express 11
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
Message-ID: <loom.20140410T084519-28@post.gmane.org>

Martin Landa <landa.martin <at> gmail.com> writes:

> 
> Hi all,
> 
> I would like to set up connection between OGR and Oracle Express 11g,
> I downloaded Oracle SQL Developer and set up the connection, when I
> try to connect to the database using user/password it works.
> 
> When using OGR I entered to command line
> 
> ogrinfo -ro OCI:user/password -sql "select count(*) from emp"
> 
> but it failed with
> 
> ERROR 1: ORA-12560: TNS:protocol adapter error
>  in <unnamed>
> 
> Thanks in advance for any pointers! Martin

Hi,

The the complete connection string as written into the OCI driver manual page:
When opening a database, it's name should be specified in the form
"OCI:userid/password at database_instance:table,table".

Database_instance is the name that in defined in your tnsnames.ora. The part
:table,table is not necessary but having it can speed up with making the
connection because less metadata is queried from the database.

Perhaps the OCI examples should be edited to use this syntax. It must be an
exception when plain OCI:user/password can work.

-Jukka Rahkonen-


From p.halls at york.ac.uk  Wed Apr  9 23:56:21 2014
From: p.halls at york.ac.uk (Peter Halls)
Date: Thu, 10 Apr 2014 07:56:21 +0100
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <CF6B6B73.ED887%michael.smith@erdc.dren.mil>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
Message-ID: <CADEnnOPat84mMqvFV=-MS_ZK55U1CpWT+YKsrD=AU2iiHCBKaQ@mail.gmail.com>

Martin,

      when working with Oracle, it is always worth looking up an ORA
message number at Oracle: you will find a full explanation and suggestions
for resolution.

      For your error, look up http://ora-12154.ora-code.com/

      In summary, the error means that the Oracle client is unable to find
/ connect to the Oracle service name specified in the Oracle connection
string.  In the past, this meant that the service name specified could not
be found in the file tnsnames.ora - there are some alternative ways of
specifying Oracle services now, so please do look up the web page mentioned
above.

Best wishes,

Peter


On 10 April 2014 02:27, Smith, Michael ERDC-RDE-CRREL-NH <
Michael.Smith at erdc.dren.mil> wrote:

> If <user>/<passwd>@xe works in sqlplus, you can use that in OGR. Its using
> the same libs to connect.
>
> Try ogrinfo -ro OCI:<user>/<passwd>@xe
>
> Mike
>
> On 4/9/14, 8:01 PM, "Martin Landa" <landa.martin at gmail.com> wrote:
>
> >Hi,
> >
> >2014-04-10 1:40 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
> ><Michael.Smith at erdc.dren.mil>:
> >> Hmm, this one should have work
> >>
> >> ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from
> >>emp"
> >>
> >>
> >> You can use debug mode and see what might be going on. This is windows I
> >> see so try
> >>
> >> SET CPL_DEBUG=ON
> >> ogrinfo -ro OCI:user/password at geo1:1521/xe -sql "select count(*) from
> >>emp"
> >
> >unfortunately there is not so much info...
> >
> >OGR: Auto register C:\OSGeo4W_oci\\bin\gdalplugins\ogr_OCI.dll using
> >RegisterOGR
> >OCI.
> >OCI: Userid=<user>, Password=<passwd>, Database=geo1:1521/xe
> >ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
> > in <unnamed>
> >
> >> Does sqlplus connect and allow access?
> >
> >This works...
> >
> >SQL> connect <user>/<passwd>@xe
> >Connected.
> >
> >Martin
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, PhD Student, Post-war Reconstruction and Development Unit
(PRDU)
                     Department of Politics, University of York

Snail mail: PRDU, Derwent College, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140410/35ef5b3b/attachment.html>

From landa.martin at gmail.com  Thu Apr 10 02:27:51 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 11:27:51 +0200
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
In-Reply-To: <CF6B6B73.ED887%michael.smith@erdc.dren.mil>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
Message-ID: <CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>

Hi,

2014-04-10 3:27 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
<Michael.Smith at erdc.dren.mil>:
> If <user>/<passwd>@xe works in sqlplus, you can use that in OGR. Its using
> the same libs to connect.
>
> Try ogrinfo -ro OCI:<user>/<passwd>@xe

I already tried that but without success...

ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
 in <unnamed>

Martin

From jukka.rahkonen at mmmtike.fi  Thu Apr 10 03:06:32 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 10 Apr 2014 10:06:32 +0000 (UTC)
Subject: [gdal-dev] [EXTERNAL]  oci and oracle express 11
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
Message-ID: <loom.20140410T120024-699@post.gmane.org>

Martin Landa <landa.martin <at> gmail.com> writes:

> 
> Hi,
> 
> 2014-04-10 3:27 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
> <Michael.Smith <at> erdc.dren.mil>:
> > If <user>/<passwd> <at> xe works in sqlplus, you can use that in OGR.
Its using
> > the same libs to connect.
> >
> > Try ogrinfo -ro OCI:<user>/<passwd> <at> xe
> 
> I already tried that but without success...
> 
> ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
>  in <unnamed>

What we have is
- environment set as TNS_ADMIN=path/to/directory
- tnsnames.ora file in the TNS_ADMIN directory 
- entry in tnsnames.ora as described in http://orafaq.com/wiki/Tnsnames.ora
- GDAL connection as OCI:<user>/<passwd> <at> entry_made_above


-Jukka Rahkonen-


From mateusz at loskot.net  Thu Apr 10 03:30:44 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu, 10 Apr 2014 12:30:44 +0200
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
Message-ID: <CABUeae-pZPOdTg1JG+o9p0H3f-mkKuigzRStVgVj+Tn2YQ1v2A@mail.gmail.com>

On 10 April 2014 11:27, Martin Landa <landa.martin at gmail.com> wrote:
> Hi,
>
> 2014-04-10 3:27 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
> <Michael.Smith at erdc.dren.mil>:
>> If <user>/<passwd>@xe works in sqlplus, you can use that in OGR. Its using
>> the same libs to connect.
>>
>> Try ogrinfo -ro OCI:<user>/<passwd>@xe
>
> I already tried that but without success...
>
> ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
>  in <unnamed>

Try easy connection mode with

username/password at 127.0.0.1:1521/xe

Also, check you are using the same type of binaries (32 or 64 bit) of
GDAL/OGR and InstantClient. AFAIR, they don't mix.

Also, for development purposes, I usually replace hostname with IP address
in tnsnames.ora, as the name resolving proved troublesome for me.

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From jmathis at redzonesoftware.com  Thu Apr 10 08:13:38 2014
From: jmathis at redzonesoftware.com (Jason Mathis)
Date: Thu, 10 Apr 2014 09:13:38 -0600
Subject: [gdal-dev] ogr2ogr ERROR 6: No translation
In-Reply-To: <CACqzBMxN1B2=GKi7WCE2m+yTHd74Z+CwzJWP8Bw4QW02RfKYuA@mail.gmail.com>
References: <etPan.5346028d.6b8b4567.226e@palos> <li55k3$mp7$1@ger.gmane.org>
	<CACqzBMwTdWqYkJbeEDDX0DVHvXJcpQkOHsJF_nbfsq1B2QgNJg@mail.gmail.com>
	<CACqzBMxN1B2=GKi7WCE2m+yTHd74Z+CwzJWP8Bw4QW02RfKYuA@mail.gmail.com>
Message-ID: <etPan.5346b522.643c9869.226e@palos>

Hi All,

thanks for the responses.?

I believe my extents are:

(-120.00591219477626, -114.03946520116759, 35.00247168585889, 42.00234483532862)

$ ogr2ogr version is:
GDAL 1.10.1, released 2013/08/26

I not sure how to find the proj4 version. Is it this?

$ proj --version
Rel. 4.8.0, 6 March 2012


thanks again!

On April 9, 2014 at 10:22:13 PM, xavier lhomme (lhomme.xavier at gmail.com) wrote:

Hi

You should specify the version of gdal you are using (and proj4 too).
Sometimes ago I used NGA Geotrans to perform GeoId conversion. But recent version of proj4 are able to perform such conversion.

Le 10 avr. 2014 06:11, "Andre Joost" <andre+joost at nurfuerspam.de> a ?crit :
Am 10.04.2014 04:31, schrieb Jason Mathis:

Hi All,

On to the next problem:) I discovered today that I need to reproject
the shape file before rasterizing it. I get the below error.

Any ideas? Is it not possible?



What extent does your shapefile have?
Some projections are limited to the visible half of the globe.

HTH,
Andr? Joost

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________  
gdal-dev mailing list  
gdal-dev at lists.osgeo.org  
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-- 
 

This transmission contains confidential and privileged information intended 
solely for the party identified above. If you receive this message in 
error, you must not use it or convey it to others. Please destroy it 
immediately and contact the sender at (303) 386-3955 or by return e-mail to 
the sender.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140410/a4577aaa/attachment.html>

From andre+joost at nurfuerspam.de  Thu Apr 10 08:36:48 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 10 Apr 2014 17:36:48 +0200
Subject: [gdal-dev] ogr2ogr ERROR 6: No translation
In-Reply-To: <etPan.5346b522.643c9869.226e@palos>
References: <etPan.5346028d.6b8b4567.226e@palos> <li55k3$mp7$1@ger.gmane.org>
	<CACqzBMwTdWqYkJbeEDDX0DVHvXJcpQkOHsJF_nbfsq1B2QgNJg@mail.gmail.com>
	<CACqzBMxN1B2=GKi7WCE2m+yTHd74Z+CwzJWP8Bw4QW02RfKYuA@mail.gmail.com>
	<etPan.5346b522.643c9869.226e@palos>
Message-ID: <li6drt$552$1@ger.gmane.org>

Am 10.04.2014 17:13, schrieb Jason Mathis:
> Hi All,
>
> thanks for the responses.
>
> I believe my extents are:
>
> (-120.00591219477626, -114.03946520116759, 35.00247168585889, 42.00234483532862)
>

This sounds reasonable for Nevada.

> $ ogr2ogr version is:
> GDAL 1.10.1, released 2013/08/26
>
> I not sure how to find the proj4 version. Is it this?
>
> $ proj --version
> Rel. 4.8.0, 6 March 2012

Both are be up to date.

You can simplify your command line to:
ogr2ogr -s_srs epsg:4326 -t_srs epsg:5070 Nevada_Albers.shp Nevada-WGS84.shp

I don't get error messages with a point shapefile built from your extent 
coordinates.


HTH,
Andr? Joost



From jmathis at redzonesoftware.com  Thu Apr 10 10:41:48 2014
From: jmathis at redzonesoftware.com (Jason Mathis)
Date: Thu, 10 Apr 2014 11:41:48 -0600
Subject: [gdal-dev] ogr2ogr ERROR 6: No translation
In-Reply-To: <li6drt$552$1@ger.gmane.org>
References: <etPan.5346028d.6b8b4567.226e@palos> <li55k3$mp7$1@ger.gmane.org>
	<CACqzBMwTdWqYkJbeEDDX0DVHvXJcpQkOHsJF_nbfsq1B2QgNJg@mail.gmail.com>
	<CACqzBMxN1B2=GKi7WCE2m+yTHd74Z+CwzJWP8Bw4QW02RfKYuA@mail.gmail.com>
	<etPan.5346b522.643c9869.226e@palos> <li6drt$552$1@ger.gmane.org>
Message-ID: <etPan.5346d7dc.74b0dc51.226e@palos>

Awesome Andre!

That will work. So I guess it is possible.?

many thanks,
jason?




On April 10, 2014 at 9:38:00 AM, Andre Joost (andre+joost at nurfuerspam.de) wrote:

Am 10.04.2014 17:13, schrieb Jason Mathis:  
> Hi All,  
>  
> thanks for the responses.  
>  
> I believe my extents are:  
>  
> (-120.00591219477626, -114.03946520116759, 35.00247168585889, 42.00234483532862)  
>  

This sounds reasonable for Nevada.  

> $ ogr2ogr version is:  
> GDAL 1.10.1, released 2013/08/26  
>  
> I not sure how to find the proj4 version. Is it this?  
>  
> $ proj --version  
> Rel. 4.8.0, 6 March 2012  

Both are be up to date.  

You can simplify your command line to:  
ogr2ogr -s_srs epsg:4326 -t_srs epsg:5070 Nevada_Albers.shp Nevada-WGS84.shp  

I don't get error messages with a point shapefile built from your extent  
coordinates.  


HTH,  
Andr? Joost  


_______________________________________________  
gdal-dev mailing list  
gdal-dev at lists.osgeo.org  
http://lists.osgeo.org/mailman/listinfo/gdal-dev  

-- 
 

This transmission contains confidential and privileged information intended 
solely for the party identified above. If you receive this message in 
error, you must not use it or convey it to others. Please destroy it 
immediately and contact the sender at (303) 386-3955 or by return e-mail to 
the sender.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140410/5f61e9bc/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 10 12:01:04 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Apr 2014 21:01:04 +0200
Subject: [gdal-dev] Reminder: GDAL 1.11.0RC1 planned to be packaged tomorrow
	evening
Message-ID: <201404102101.04671.even.rouault@mines-paris.org>

Hi,

I still intend packaging 1.11.0RC1 tomorrow evening if that's OK (there have 
been a few changes since beta1, but we can probably try a RC1 directly). 
Please tell if you have something almost ready or if some critical issues 
haven't still been fixed and committed.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Thu Apr 10 12:26:27 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 21:26:27 +0200
Subject: [gdal-dev] Reminder: GDAL 1.11.0RC1 planned to be packaged
 tomorrow evening
In-Reply-To: <201404102101.04671.even.rouault@mines-paris.org>
References: <201404102101.04671.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1Ofyi6mrravFJ6GpC==yimjY0ua=P3SDaLC8pVRS3f8twg@mail.gmail.com>

Hi Even,

2014-04-10 21:01 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> I still intend packaging 1.11.0RC1 tomorrow evening if that's OK (there have
> been a few changes since beta1, but we can probably try a RC1 directly).
> Please tell if you have something almost ready or if some critical issues
> haven't still been fixed and committed.

it will be packed from trunk? (I don't see release branch from 1.11).
In this case I would ask you for few days (two/three) postpone. I am
slowly finishing the initial support for GML-based Czech format
(VFR/RUIAN). Would it be possible? Thanks in advance... Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From landa.martin at gmail.com  Thu Apr 10 12:39:50 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 21:39:50 +0200
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <loom.20140410T120024-699@post.gmane.org>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
	<loom.20140410T120024-699@post.gmane.org>
Message-ID: <CA+Ei1Oc_0oNUH7vZo-3uEGnzXMu+aCSW7hgv-4VKWFWmOfozAw@mail.gmail.com>

Hi all,

2014-04-10 12:06 GMT+02:00 Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

>> ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
>>  in <unnamed>
>
> What we have is
> - environment set as TNS_ADMIN=path/to/directory
> - tnsnames.ora file in the TNS_ADMIN directory
> - entry in tnsnames.ora as described in http://orafaq.com/wiki/Tnsnames.ora
> - GDAL connection as OCI:<user>/<passwd> <at> entry_made_above

I have tried to follow these instructions, unfortunately there is
still something missing...

C:\OSGeo4W_oci>echo %TNS_ADMIN%
C:\oraclexe\app\oracle\product\11.2.0\server\hs\admin\tnsnames.ora

The file contains:

XE  =
  (DESCRIPTION=
    (ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=1521))
    (CONNECT_DATA=(SID=xe))
    (HS=OK)
  )

set CPL_DEBUG=ON

C:\OSGeo4W_oci>ogrinfo -ro OCI:user/passwd at 127.0.0.1:1521/xe -sql "select cou
nt(*) from emp"
OGR: Auto register C:\OSGeo4W_oci\\bin\gdalplugins\ogr_OCI.dll using RegisterOGR
OCI.
OCI: Userid=user, Password=passwd, Database=127.0.0.1:1521/xe
ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
 in <unnamed>

I have tried various variations like

OCI:user/passwd at geo1:1521/xe
OCI:user/passwd at localhost:1521/xe
OCI:user/passwd at xe

but still with no success. Any idea what I am doing wrong?

I I try to connect using sqldeveloper, it's using
xe_landa user@//localhost:1521/xe

so I tried also

OCI:user/passwd@//localhost:1521/xe

but it also failed... Thanks in advance! Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From mateusz at loskot.net  Thu Apr 10 12:47:17 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu, 10 Apr 2014 21:47:17 +0200
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <CA+Ei1Oc_0oNUH7vZo-3uEGnzXMu+aCSW7hgv-4VKWFWmOfozAw@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
	<loom.20140410T120024-699@post.gmane.org>
	<CA+Ei1Oc_0oNUH7vZo-3uEGnzXMu+aCSW7hgv-4VKWFWmOfozAw@mail.gmail.com>
Message-ID: <CABUeae_4n1R2ACb9JN6ekCVKBxfJqkePw1CvWD+OhbNuSMDBng@mail.gmail.com>

On 10 April 2014 21:39, Martin Landa <landa.martin at gmail.com> wrote:
> C:\oraclexe\app\oracle\product\11.2.0\server\hs\admin\tnsnames.ora
>
> The file contains:
>
> XE  =
>   (DESCRIPTION=
>     (ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=1521))

Try changing to HOST=127.0.0.1 and restart Oracle

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From even.rouault at mines-paris.org  Thu Apr 10 12:49:00 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Apr 2014 21:49:00 +0200
Subject: [gdal-dev] Reminder: GDAL 1.11.0RC1 planned to be packaged
	tomorrow evening
In-Reply-To: <CA+Ei1Ofyi6mrravFJ6GpC==yimjY0ua=P3SDaLC8pVRS3f8twg@mail.gmail.com>
References: <201404102101.04671.even.rouault@mines-paris.org>
	<CA+Ei1Ofyi6mrravFJ6GpC==yimjY0ua=P3SDaLC8pVRS3f8twg@mail.gmail.com>
Message-ID: <201404102149.00654.even.rouault@mines-paris.org>

Le jeudi 10 avril 2014 21:26:27, Martin Landa a ?crit :
> from trunk? (I don't see release branch from 1.11).

Yes, 1.11 branch will be create from trunk after issuing RC1.

> In this case I would ask you for few days (two/three) postpone. I am
> slowly finishing the initial support for GML-based Czech format
> (VFR/RUIAN). Would it be possible? Thanks in advance... Martin

ok, no problem.


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Thu Apr 10 14:33:00 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 23:33:00 +0200
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <CABUeae_4n1R2ACb9JN6ekCVKBxfJqkePw1CvWD+OhbNuSMDBng@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
	<loom.20140410T120024-699@post.gmane.org>
	<CA+Ei1Oc_0oNUH7vZo-3uEGnzXMu+aCSW7hgv-4VKWFWmOfozAw@mail.gmail.com>
	<CABUeae_4n1R2ACb9JN6ekCVKBxfJqkePw1CvWD+OhbNuSMDBng@mail.gmail.com>
Message-ID: <CA+Ei1OfK4U4vXycL+fJbDG6RBwxuK99b9Bmek46AAub07LvQcg@mail.gmail.com>

Hi,

2014-04-10 21:47 GMT+02:00 Mateusz ?oskot <mateusz at loskot.net>:
> On 10 April 2014 21:39, Martin Landa <landa.martin at gmail.com> wrote:
>> C:\oraclexe\app\oracle\product\11.2.0\server\hs\admin\tnsnames.ora
>>
>> The file contains:
>>
>> XE  =
>>   (DESCRIPTION=
>>     (ADDRESS=(PROTOCOL=tcp)(HOST=localhost)(PORT=1521))
>
> Try changing to HOST=127.0.0.1 and restart Oracle

I modified the file:

XE =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = XE)
    )
  )

EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
      (SID = PLSExtProc)
      (PRESENTATION = RO)
    )
  )

ORACLR_CONNECTION_DATA =
  (DESCRIPTION =
    (ADDRESS_LIST =
      (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC1))
    )
    (CONNECT_DATA =
      (SID = CLRExtProc)
      (PRESENTATION = RO)
    )
  )

Then from cmd:

C:\OSGeo4W_oci>echo %TNS_ADMIN%
C:\oraclexe\app\oracle\product\11.2.0\server\network\ADMIN\tnsnames.ora

C:\OSGeo4W_oci>ogrinfo -ro OCI:user/passwd at 127.0.0.1:1251/xe -sql
"select count(*) from emp"
OGR: Auto register C:\OSGeo4W_oci\\bin\gdalplugins\ogr_OCI.dll using RegisterOGR
OCI.
OCI: Userid=landa, Password=stratos5, Database=127.0.0.1:1251/xe
ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
 in <unnamed>
FAILURE:
Unable to open datasource `OCI:landa/stratos5 at 127.0.0.1:1251/xe' with the follow
ing drivers.

On this PC is running older Oracle 9i (but it's broken, the person who
installed it some months ago told me that he didn't managed to install
it correctly, MS Windows 2008 hasn't been supported by Oracle 9i
AFAIU). It was the reason that I installed Oracle 11g Express on this
machine. I can connect to XE using sqldeveloper or sqlplus, but not
via OGR. That's strange. It's my first experience with Oracle, so I am
sure where could be the problem. From debug message there is nothing
what could help. Any idea where to get more relevant info (Oracle
logs)?

Thanks, Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From landa.martin at gmail.com  Thu Apr 10 14:37:01 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 Apr 2014 23:37:01 +0200
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <CABUeae-pZPOdTg1JG+o9p0H3f-mkKuigzRStVgVj+Tn2YQ1v2A@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
	<CABUeae-pZPOdTg1JG+o9p0H3f-mkKuigzRStVgVj+Tn2YQ1v2A@mail.gmail.com>
Message-ID: <CA+Ei1OcBDvwTRYvwGKbC-zzfJbQrCPmjtA_gWjWbNxZRnVT21A@mail.gmail.com>

2014-04-10 12:30 GMT+02:00 Mateusz ?oskot <mateusz at loskot.net>:

> Also, check you are using the same type of binaries (32 or 64 bit) of
> GDAL/OGR and InstantClient. AFAIR, they don't mix.

it remembers me, the PC runs on MS Windows Server 2008 64 bit. I
downloaded Oracle 11 g Express from [1]. They claims that 64bit
Windows are not supported. But I was able to install it, and DB server
is apparently running (I can connect via sqlplus or sqldeveloper). Hm,
could be a problem that I installed GDAL via OSGeo4W 32bit?

Thanks, Martin

[1] http://www.oracle.com/technetwork/database/database-technologies/express-edition/downloads/index.html

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From lucena_ivan at hotmail.com  Thu Apr 10 19:00:59 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Thu, 10 Apr 2014 22:00:59 -0400
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <CA+Ei1OcBDvwTRYvwGKbC-zzfJbQrCPmjtA_gWjWbNxZRnVT21A@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>,
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>,
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>,
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>,
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>,
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>,
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>,
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>,
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>,
	<CABUeae-pZPOdTg1JG+o9p0H3f-mkKuigzRStVgVj+Tn2YQ1v2A@mail.gmail.com>,
	<CA+Ei1OcBDvwTRYvwGKbC-zzfJbQrCPmjtA_gWjWbNxZRnVT21A@mail.gmail.com>
Message-ID: <BLU173-W50C8C49F4DDF351ED1F3890540@phx.gbl>



> Date: Thu, 10 Apr 2014 23:37:01 +0200
> From: landa.martin at gmail.com
> To: mateusz at loskot.net
> CC: gdal-dev at lists.osgeo.org; Michael.Smith at erdc.dren.mil
> Subject: Re: [gdal-dev] [EXTERNAL] oci and oracle express 11
> 
> 2014-04-10 12:30 GMT+02:00 Mateusz ?oskot <mateusz at loskot.net>:
> 
> > Also, check you are using the same type of binaries (32 or 64 bit) of
> > GDAL/OGR and InstantClient. AFAIR, they don't mix.
> 
> it remembers me, the PC runs on MS Windows Server 2008 64 bit. I
> downloaded Oracle 11 g Express from [1]. They claims that 64bit
> Windows are not supported. But I was able to install it, and DB server

Yes, That is what it says:

 - Does not work in Windows x64

http://www.oracle.com/technetwork/database/database-technologies/express-edition/downloads/index.html

> is apparently running (I can connect via sqlplus or sqldeveloper). Hm,

That is interesting. But usually any Win32 application should work on a Win64 system. Right?

> could be a problem that I installed GDAL via OSGeo4W 32bit?

As far as I can remember, the OSGeo4W installation comes with OCI.DLL. Unfortunately I don't one installation at hand. But, have you tried to force GDAL tools to use the OCI.DLL from the XE installation instead?

I know that is not the same situation you have, but when I need to run GDAL build for Win32 on my Win64 machine I need to place an OCI.DLL from a InstantClient-32 first on my PATH. Otherwise it will try to load the default on DLL my system, that happens to a Win64 OCI.DLL.

In that situation I recall vaguely that the operation system doesn't give you any clear error or warning message and the connection fails when you try to run the command. Just like you are seeing.

Have you tried the GDAL installation pack from http://www.gisinternals.com/sdk  ? You can download and install for example, gdal-110-1600-x64-core.msi and a gdal-110-1600-x64-oracle.msi.

BTW. It doesn't matter if the server is 32 or 64. What is important is that GDAL and the OCI.DLL are on the same architecture.

Regards,

Ivan

> 
> Thanks, Martin
> 
> [1] http://www.oracle.com/technetwork/database/database-technologies/express-edition/downloads/index.html
> 
> -- 
> Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140410/dcf7b5d8/attachment-0001.html>

From jef at norbit.de  Thu Apr 10 23:33:47 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Fri, 11 Apr 2014 08:33:47 +0200
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <CA+Ei1OfK4U4vXycL+fJbDG6RBwxuK99b9Bmek46AAub07LvQcg@mail.gmail.com>
References: <CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
	<loom.20140410T120024-699@post.gmane.org>
	<CA+Ei1Oc_0oNUH7vZo-3uEGnzXMu+aCSW7hgv-4VKWFWmOfozAw@mail.gmail.com>
	<CABUeae_4n1R2ACb9JN6ekCVKBxfJqkePw1CvWD+OhbNuSMDBng@mail.gmail.com>
	<CA+Ei1OfK4U4vXycL+fJbDG6RBwxuK99b9Bmek46AAub07LvQcg@mail.gmail.com>
Message-ID: <20140411063347.GB8976@norbit.de>

Hi Martin,

On Thu, 10. Apr 2014 at 23:33:00 +0200, Martin Landa wrote:
> C:\OSGeo4W_oci>ogrinfo -ro OCI:user/passwd at 127.0.0.1:1251/xe -sql "select count(*) from emp"
> OGR: Auto register C:\OSGeo4W_oci\\bin\gdalplugins\ogr_OCI.dll using RegisterOGR
> OCI.
> OCI: Userid=landa, Password=stratos5, Database=127.0.0.1:1251/xe
> ERROR 1: ORA-12154: TNS:could not resolve the connect identifier specified
>  in <unnamed>
> FAILURE:
> Unable to open datasource `OCI:landa/stratos5 at 127.0.0.1:1251/xe' with the follow
> ing drivers.

Also no 11g XE at hand, but for 11g using the service name instead of the SID might
help.  Not sure what the default for XE is.  lsnrctl status should show it.

Eg. ogrinfo OCI:foo/bar at localhost/xe.world


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
QGIS PSC member (RM)      Germany                      IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From rajjad at gmail.com  Fri Apr 11 00:15:42 2014
From: rajjad at gmail.com (Imran Rajjad)
Date: Fri, 11 Apr 2014 12:15:42 +0500
Subject: [gdal-dev] gdal_retile x64 : No input files selected.
Message-ID: <CADz3VuW+Gbj1estpV+z+pZG-1_8r1OeH3f1T8+piY0VNfxA4Wg@mail.gmail.com>

Hi list,

I am using GDAL 10.1 x64 with Python 2.7.5 x64

It seems python script is not able to find the input file

W:\>gdal_retile.py -v -r -levels 4 -ps 2048 2048 -co "TILED=YES" -co
"COMPRESS=JPEG" -targetDir w:\dem\dem_pyramid w:\dem\dem.tif

2.7.5 (default, May 15 2013, 22:44:16) [MSC v.1500 64 bit (AMD64)]

Usage: gdal_retile.py
        [-v] [-co NAME=VALUE]* [-of out_format]
        [-ps pixelWidth pixelHeight]
        [-ot  {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
               CInt16/CInt32/CFloat32/CFloat64}]
        [ -tileIndex tileIndexName [-tileIndexField fieldName]]
        [ -csv fileName [-csvDelim delimiter]]
        [-s_srs srs_def]  [-pyramidOnly] -levels numberoflevels
        [-r {near/bilinear/cubic/cubicspline/lanczos}]
        [-useDirForEachRow]
        -targetDir TileDirectory input_files


Can somebody tell me what is wrong with the command

below is GDAL info of the geotiff file


---GDALINFO------

W:\>gdalinfo dem\dem.tif
Driver: GTiff/GeoTIFF
Files: dem\dem.tif
       dem\dem.tif.aux.xml
Size is 30001, 24001
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (59.999583333323244,40.000416763514124)
Pixel Size = (0.000833333333333,-0.000833333333333)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  59.9995833,  40.0004168) ( 59d59'58.50"E, 40d 0' 1.50"N)
Lower Left  (  59.9995833,  19.9995834) ( 59d59'58.50"E, 19d59'58.50"N)
Upper Right (  85.0004167,  40.0004168) ( 85d 0' 1.50"E, 40d 0' 1.50"N)
Lower Right (  85.0004167,  19.9995834) ( 85d 0' 1.50"E, 19d59'58.50"N)
Center      (  72.5000000,  30.0000001) ( 72d30' 0.00"E, 30d 0' 0.00"N)
Band 1 Block=30001x1 Type=Int16, ColorInterp=Gray
  Description = Layer_1
  Min=-32768.000 Max=8469.000
  Minimum=-32768.000, Maximum=8469.000, Mean=-339.616, StdDev=7609.851
  NoData Value=0
  Metadata:
    LAYER_TYPE=athematic

STATISTICS_HISTOBINVALUES=35892220|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|147192240|103498980|58861348|42041116
|24849760|20456436|19853444|32923904|23568064|14391364|11251344|9393020|9059076|
8846812|7765888|6834360|6443632|6328036|5700032|5445180|5022004|4646148|4389944|
4296656|4444024|4944940|5610800|6424704|8513544|9714796|11723868|13505128|117576
68|8901568|6243536|4127656|2605304|1385800|671944|286624|116272|41912|27716|1352
0|10816|5408|4056|2028|676|0|0|0|676|
    STATISTICS_HISTOMAX=8469
    STATISTICS_HISTOMIN=-32768
    STATISTICS_HISTONUMBINS=256
    STATISTICS_MAXIMUM=8469
    STATISTICS_MEAN=-339.61644644564
    STATISTICS_MEDIAN=414.8984375
    STATISTICS_MINIMUM=-32768
    STATISTICS_MODE=-68.34765625
    STATISTICS_SKIPFACTORX=26
    STATISTICS_SKIPFACTORY=26
    STATISTICS_STDDEV=7609.8514119626



regards,
Imran
-- 
I.R
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140411/07066684/attachment.html>

From chaitanya.ch at gmail.com  Fri Apr 11 01:08:42 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri, 11 Apr 2014 13:38:42 +0530
Subject: [gdal-dev] gdal_retile x64 : No input files selected.
In-Reply-To: <CADz3VuW+Gbj1estpV+z+pZG-1_8r1OeH3f1T8+piY0VNfxA4Wg@mail.gmail.com>
References: <CADz3VuW+Gbj1estpV+z+pZG-1_8r1OeH3f1T8+piY0VNfxA4Wg@mail.gmail.com>
Message-ID: <CAMKgpOYiuBBmfEQr_v7_Qwdq3aS9UtV8tGdWwjEoj8VZYGWN9A@mail.gmail.com>

Imran,

You need to specify the resampling algorithm if you use the -r option.
Choose from near, bilinear, cubic, cubicspline, lanczos.
'near' is used if you don't specify the -r option.



On Fri, Apr 11, 2014 at 12:45 PM, Imran Rajjad <rajjad at gmail.com> wrote:

> Hi list,
>
> I am using GDAL 10.1 x64 with Python 2.7.5 x64
>
> It seems python script is not able to find the input file
>
> W:\>gdal_retile.py -v -r -levels 4 -ps 2048 2048 -co "TILED=YES" -co
> "COMPRESS=JPEG" -targetDir w:\dem\dem_pyramid w:\dem\dem.tif
>
> 2.7.5 (default, May 15 2013, 22:44:16) [MSC v.1500 64 bit (AMD64)]
>
> Usage: gdal_retile.py
>         [-v] [-co NAME=VALUE]* [-of out_format]
>         [-ps pixelWidth pixelHeight]
>         [-ot  {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
>                CInt16/CInt32/CFloat32/CFloat64}]
>         [ -tileIndex tileIndexName [-tileIndexField fieldName]]
>         [ -csv fileName [-csvDelim delimiter]]
>         [-s_srs srs_def]  [-pyramidOnly] -levels numberoflevels
>         [-r {near/bilinear/cubic/cubicspline/lanczos}]
>         [-useDirForEachRow]
>         -targetDir TileDirectory input_files
>
>
> Can somebody tell me what is wrong with the command
>
> below is GDAL info of the geotiff file
>
>
> ---GDALINFO------
>
> W:\>gdalinfo dem\dem.tif
> Driver: GTiff/GeoTIFF
> Files: dem\dem.tif
>        dem\dem.tif.aux.xml
> Size is 30001, 24001
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (59.999583333323244,40.000416763514124)
> Pixel Size = (0.000833333333333,-0.000833333333333)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  59.9995833,  40.0004168) ( 59d59'58.50"E, 40d 0' 1.50"N)
> Lower Left  (  59.9995833,  19.9995834) ( 59d59'58.50"E, 19d59'58.50"N)
> Upper Right (  85.0004167,  40.0004168) ( 85d 0' 1.50"E, 40d 0' 1.50"N)
> Lower Right (  85.0004167,  19.9995834) ( 85d 0' 1.50"E, 19d59'58.50"N)
> Center      (  72.5000000,  30.0000001) ( 72d30' 0.00"E, 30d 0' 0.00"N)
> Band 1 Block=30001x1 Type=Int16, ColorInterp=Gray
>   Description = Layer_1
>   Min=-32768.000 Max=8469.000
>   Minimum=-32768.000, Maximum=8469.000, Mean=-339.616, StdDev=7609.851
>   NoData Value=0
>   Metadata:
>     LAYER_TYPE=athematic
>
> STATISTICS_HISTOBINVALUES=35892220|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
>
> |0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
>
> |0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
>
> |0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
>
> |0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0
>
> |0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|147192240|103498980|58861348|42041116
>
> |24849760|20456436|19853444|32923904|23568064|14391364|11251344|9393020|9059076|
>
> 8846812|7765888|6834360|6443632|6328036|5700032|5445180|5022004|4646148|4389944|
>
> 4296656|4444024|4944940|5610800|6424704|8513544|9714796|11723868|13505128|117576
>
> 68|8901568|6243536|4127656|2605304|1385800|671944|286624|116272|41912|27716|1352
> 0|10816|5408|4056|2028|676|0|0|0|676|
>     STATISTICS_HISTOMAX=8469
>     STATISTICS_HISTOMIN=-32768
>     STATISTICS_HISTONUMBINS=256
>     STATISTICS_MAXIMUM=8469
>     STATISTICS_MEAN=-339.61644644564
>     STATISTICS_MEDIAN=414.8984375
>     STATISTICS_MINIMUM=-32768
>     STATISTICS_MODE=-68.34765625
>     STATISTICS_SKIPFACTORX=26
>     STATISTICS_SKIPFACTORY=26
>     STATISTICS_STDDEV=7609.8514119626
>
>
>
> regards,
> Imran
> --
> I.R
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140411/cbf8bb2c/attachment.html>

From userofgdal at gmail.com  Fri Apr 11 02:02:49 2014
From: userofgdal at gmail.com (user gdal)
Date: Fri, 11 Apr 2014 14:32:49 +0530
Subject: [gdal-dev] AOI, Signature and Fourier Transform files' access?
Message-ID: <CAJnZZa+xao=r4T0CgeqbjuHiiw3g6c+h5AgUfArJhVJ_6bVVuw@mail.gmail.com>

Dear all,
Good Morning!

Is it possible to read/write ERDAS AOI, Signature (.sig) and Fast Fourier
Transform image data from GDAL? If so, can anyone kindly teach me how to.

With many thanks,

Yours sincerely,
 B. Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140411/0e7c3fb1/attachment.html>

From landa.martin at gmail.com  Fri Apr 11 03:08:35 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 11 Apr 2014 12:08:35 +0200
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <BLU173-W50C8C49F4DDF351ED1F3890540@phx.gbl>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
	<CABUeae-pZPOdTg1JG+o9p0H3f-mkKuigzRStVgVj+Tn2YQ1v2A@mail.gmail.com>
	<CA+Ei1OcBDvwTRYvwGKbC-zzfJbQrCPmjtA_gWjWbNxZRnVT21A@mail.gmail.com>
	<BLU173-W50C8C49F4DDF351ED1F3890540@phx.gbl>
Message-ID: <CA+Ei1Oc8zYo1efoau-pTn+PQ3u5WgX=UKHhmEFW4AaVEvvrWBQ@mail.gmail.com>

Hi all,

2014-04-11 4:00 GMT+02:00 Ivan Lucena <lucena_ivan at hotmail.com>:

[...]

> I know that is not the same situation you have, but when I need to run GDAL
> build for Win32 on my Win64 machine I need to place an OCI.DLL from a
> InstantClient-32 first on my PATH. Otherwise it will try to load the default
> on DLL my system, that happens to a Win64 OCI.DLL.

that was! When I removed oci.dll from c:\osgeo4w than it started magically work!

ogrinfo -ro OCI:user/passwd

Thanks for saving me from madness :-) Martin

From Robert.Langford at salford.gov.uk  Fri Apr 11 05:14:26 2014
From: Robert.Langford at salford.gov.uk (Langford, Robert)
Date: Fri, 11 Apr 2014 13:14:26 +0100
Subject: [gdal-dev] Oracle ogrinfo insert into user_sdo_geom_metadata
Message-ID: <06023D9EFD334D4895B922C891C3767F29FA8900C9@v-civiexms04.salford.gov.uk>

All,

I'm writing a batch file to automate the loading of spatial data into our Oracle database.

As a check I'm testing the Oracle connection before starting the process with a command like:

>        ogrinfo -ro -q OCI:db_schema/db_password at db_name:table_name_1,table_name_2

Which, if all ok, would result in:

>        1: table_name_1

>        2: table_name_2

I then in testing I added a non-existent table name:

>        ogrinfo -ro -q OCI:db_schema/db_password at db_name:table_name_1,table_name_2,NOT_A_TABLE_NAME

Resulting (as I was expecting) in:

>        ERROR 1: ORA-04043: object NOT_A_TABLE_NAME does not exist

>         in OCIDescribeAny

>        ERROR 1: ORA-04043: object NOT_A_TABLE_NAME does not exist

>         in OCIDescribeAny

>        1: table_name_1

>        2: table_name_2

However when checking in Oracle, the USER_SDO_GEOM_METADATA table contained an entry for NOT_A_TABLE_NAME.  I deleted the row from the table in Oracle and tried the ogrinfo command again with "--debug on"

>        ogrinfo -ro -q OCI:db_schema/db_password at db_name:table_name_1,table_name_2,NOT_A_TABLE_NAME --debug on


Which had the same resultant command line output (obviously with all the debug text as well), however this time the row wasn't inserted into the USER_SDO_GEOM_METADATA table.

Can anyone explain this behaviour, shouldn't the -ro flag prevent any inserts?  Also as an aside I'd be interested in knowing why the "ERROR 1: ORA-04043" is output twice?

Initially using:   GDAL 1.9.2
Updated & same on: GDAL 1.10.1

Kind regards,

Rob



DISCLAIMER: The information contained in this communication/message from Robert.Langford at salford.gov.uk sent on Fri Apr 11 13:14:26 2014 is confidential. It is intended solely for the addressee(s) gdal-dev at lists.osgeo.org

Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act. 
Please immediately contact the sender, Robert.Langford at salford.gov.uk if you have received this message in error. 

For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140411/90b0f044/attachment.html>

From lucena_ivan at hotmail.com  Fri Apr 11 09:11:29 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Fri, 11 Apr 2014 12:11:29 -0400
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <CA+Ei1Oc8zYo1efoau-pTn+PQ3u5WgX=UKHhmEFW4AaVEvvrWBQ@mail.gmail.com>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>,
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>,
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>,
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>,
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>,
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>,
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>,
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>,
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>,
	<CABUeae-pZPOdTg1JG+o9p0H3f-mkKuigzRStVgVj+Tn2YQ1v2A@mail.gmail.com>,
	<CA+Ei1OcBDvwTRYvwGKbC-zzfJbQrCPmjtA_gWjWbNxZRnVT21A@mail.gmail.com>,
	<BLU173-W50C8C49F4DDF351ED1F3890540@phx.gbl>,
	<CA+Ei1Oc8zYo1efoau-pTn+PQ3u5WgX=UKHhmEFW4AaVEvvrWBQ@mail.gmail.com>
Message-ID: <BLU173-W255584564FA9096DE6401990540@phx.gbl>

I glad to know that it solved your problem, even with my poor cellphone typing. It seems like Windows doesn't detect that the oci.dll version/architecture is wrong and loads it with without a problem, but  when the GDAL driver try to call the OCI API to open a connection that error comes as a default. What is very misleading. It has nothing to deal with SID or the Listener setting.

> Date: Fri, 11 Apr 2014 12:08:35 +0200
> Subject: Re: [gdal-dev] [EXTERNAL] oci and oracle express 11
> From: landa.martin at gmail.com
> To: lucena_ivan at hotmail.com
> CC: mateusz at loskot.net; gdal-dev at lists.osgeo.org; michael.smith at erdc.dren.mil
> 
> Hi all,
> 
> 2014-04-11 4:00 GMT+02:00 Ivan Lucena <lucena_ivan at hotmail.com>:
> 
> [...]
> 
> > I know that is not the same situation you have, but when I need to run GDAL
> > build for Win32 on my Win64 machine I need to place an OCI.DLL from a
> > InstantClient-32 first on my PATH. Otherwise it will try to load the default
> > on DLL my system, that happens to a Win64 OCI.DLL.
> 
> that was! When I removed oci.dll from c:\osgeo4w than it started magically work!
> 
> ogrinfo -ro OCI:user/passwd
> 
> Thanks for saving me from madness :-) Martin
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140411/6a644e05/attachment.html>

From rgourrat at ag-carto.fr  Fri Apr 11 09:46:35 2014
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Fri, 11 Apr 2014 16:46:35 +0000
Subject: [gdal-dev] [ogr2ogr 1.10]EPSG 3943
Message-ID: <238B1E1830D86F46B3F030D491793D6003871C65@EXC2010.aditu.fr>

Hi,

At the end of my command line ogr2ogr, i Try to attribute a SRS output with this syntax :

-a_srs EPSG:3946

But every time I have this message :
ERROR 6: EPSG PCS/GCS code 3946 not found in EPSG support files.  Is this a valid EPSG coordinate system?
Failed to process SRS definition: EPSG:3946

I check the pcs.csv and i get the line 3946 with the SRS def

pcs.csv is in the same directory that ogr2ogr

I forget something ?

Thanks for your help

R?my
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140411/30482b87/attachment.html>

From even.rouault at mines-paris.org  Fri Apr 11 10:23:14 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 11 Apr 2014 19:23:14 +0200
Subject: [gdal-dev] [ogr2ogr 1.10]EPSG 3943
In-Reply-To: <238B1E1830D86F46B3F030D491793D6003871C65@EXC2010.aditu.fr>
References: <238B1E1830D86F46B3F030D491793D6003871C65@EXC2010.aditu.fr>
Message-ID: <201404111923.14673.even.rouault@mines-paris.org>

Le vendredi 11 avril 2014 18:46:35, R?my GOURRAT a ?crit :
> Hi,
> 
> At the end of my command line ogr2ogr, i Try to attribute a SRS output with
> this syntax :
> 
> -a_srs EPSG:3946
> 
> But every time I have this message :
> ERROR 6: EPSG PCS/GCS code 3946 not found in EPSG support files.  Is this a
> valid EPSG coordinate system? Failed to process SRS definition: EPSG:3946
> 
> I check the pcs.csv and i get the line 3946 with the SRS def
> 
> pcs.csv is in the same directory that ogr2ogr

Works for me. Check that the GDAL_DATA environment variable point to the path 
where the CSV files are installed.

> 
> I forget something ?
> 
> Thanks for your help
> 
> R?my

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Sat Apr 12 02:12:43 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat, 12 Apr 2014 09:12:43 +0000 (UTC)
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
	<CABUeae-pZPOdTg1JG+o9p0H3f-mkKuigzRStVgVj+Tn2YQ1v2A@mail.gmail.com>
	<CA+Ei1OcBDvwTRYvwGKbC-zzfJbQrCPmjtA_gWjWbNxZRnVT21A@mail.gmail.com>
	<BLU173-W50C8C49F4DDF351ED1F3890540@phx.gbl>
	<CA+Ei1Oc8zYo1efoau-pTn+PQ3u5WgX=UKHhmEFW4AaVEvvrWBQ@mail.gmail.com>
Message-ID: <loom.20140412T110503-626@post.gmane.org>

Martin Landa <landa.martin <at> gmail.com> writes:

> 
> Hi all,
> 
> 2014-04-11 4:00 GMT+02:00 Ivan Lucena <lucena_ivan <at> hotmail.com>:
> 
> [...]
> 
> > I know that is not the same situation you have, but when I need to run GDAL
> > build for Win32 on my Win64 machine I need to place an OCI.DLL from a
> > InstantClient-32 first on my PATH. Otherwise it will try to load the default
> > on DLL my system, that happens to a Win64 OCI.DLL.
> 
> that was! When I removed oci.dll from c:\osgeo4w than it started magically
work!
> 
> ogrinfo -ro OCI:user/passwd
> 
> Thanks for saving me from madness  Martin

Hi,

It took quite a lot of thinking for many people before you got it to work.
Driver page http://www.gdal.org/ogr/drv_oci.html does not give any help, it
does not even mention that oci.dll is somehow involved. Could the more
advanced OCI users/developers suggest what to add to the driver page for
helping next new users?


-Jukka Rahkonen-



From boxerab at gmail.com  Sat Apr 12 11:00:49 2014
From: boxerab at gmail.com (Aaron Boxer)
Date: Sat, 12 Apr 2014 14:00:49 -0400
Subject: [gdal-dev] OpenCL Update
Message-ID: <CAK8GPyDEWJKGg9hziH_qsnoxU3NRAES8CHrM_oL+hf1Ew2h0Jg@mail.gmail.com>

Friends,

I am nearing the end of the first part of my journey - I am just finishing
the port of the inverse wavelet transform. The code is a naive
implementation
of part 1 of the standard in OpenCL - no attempt to optimize with local GPU
memory or use memory coalescing or any hardware specific optimizations. If
anyone has experience in these matters and is interested in lending a hand,
it would be greatly appreciated.

I will let y'all know when phase 1 is complete,and I can actually decode an
image.

Cheers,
Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140412/b615a444/attachment.html>

From david.tran at hsr.ch  Mon Apr 14 06:53:14 2014
From: david.tran at hsr.ch (David Tran)
Date: Mon, 14 Apr 2014 15:53:14 +0200
Subject: [gdal-dev] How to use OGROpen with WFS?
Message-ID: <534BE84A.9000904@hsr.ch>

Hi

I tried this:

>     OGRRegisterAll();
>     sourceName = "http://maps.zh.ch/wfs/FnsNSWFS";
>     sourceData = OGROpen( sourceName.c_str(), 0, NULL );
>     if(sourceData == NULL) {
>         printf("Open failed.\n");
>         exit(1);
>     }

and it ends with:

> ERROR 4: Failed to read GeoJSON data
> Open failed.

Does anybody has a proper example?

ogrinfo -ro -so WFS:"http://maps.zh.ch/wfs/FnsNSWFS" shows something, 
therefore I think that it is my source code.

Thanks in advance.

David

From stoffels at f2e.de  Mon Apr 14 07:16:09 2014
From: stoffels at f2e.de (Nicole Stoffels)
Date: Mon, 14 Apr 2014 16:16:09 +0200
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
Message-ID: <534BEDA9.8050403@f2e.de>

Dear Gdal-List,

I have a large ASTER file (downloaded from 
http://www.eea.europa.eu/data-and-maps/data/eu-dem#tab-european-data) in 
the GeoTIFF-format. It is compressed with LZW. What I want to do is:

1. unpack it
2. seperate a smaller region from it
3. convert this regional GeoTIFF to a PNG

What I am doing:

$ gdal_translate -co COMPRESS=NONE EUD_CP-DEMS_6500035000-AA.tif tmp1.tif

$ gdal_translate -srcwin 6500 3300 1000 1000 tmp1.tif tmp2.tif

$ gdal_translate -of PNG tmp2.tif tmp2.png

When I display the info with gdalinfo the first step seems to produce a 
decompressed file. The line COMPRESSION=LZW is not there anymore. 
However, if I want to display the min and max with gdalinfo, I get the 
following error.

ERROR 1: Failed to compute min/max, no valid pixels found in sampling.

I thought that the file might be too large, but if I change the 
data_type from float 32 to e.g. Int16 I get 0 as min and max value. 
That's why I assume that already the first gdal_translate does not work 
as I actually want it to work.

The other two transformations work without error messages. However, in 
the end I get a black png.

I have tried all types of transformation with various options. But as I 
am new in the subject and do not know much about gdal, I have no further 
ideas how to generate a file from my large GeoTIFF to continue working with.

I hope someone has an idea, what's going wrong with my 
gdal_translations. Thanks very much in advance.

Best regards
Nicole

From even.rouault at mines-paris.org  Mon Apr 14 07:37:28 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 14 Apr 2014 16:37:28 +0200
Subject: [gdal-dev] How to use OGROpen with WFS?
In-Reply-To: <534BE84A.9000904@hsr.ch>
References: <534BE84A.9000904@hsr.ch>
Message-ID: <1397486248.534bf2a816b2c@imp.free.fr>

Selon David Tran <david.tran at hsr.ch>:

> Hi
>
> I tried this:
>
> >     OGRRegisterAll();
> >     sourceName = "http://maps.zh.ch/wfs/FnsNSWFS";
> >     sourceData = OGROpen( sourceName.c_str(), 0, NULL );
> >     if(sourceData == NULL) {
> >         printf("Open failed.\n");
> >         exit(1);
> >     }
>
> and it ends with:
>
> > ERROR 4: Failed to read GeoJSON data
> > Open failed.
>
> Does anybody has a proper example?
>
> ogrinfo -ro -so WFS:"http://maps.zh.ch/wfs/FnsNSWFS" shows something,
> therefore I think that it is my source code.

Yes, you must include the "WFS:" prefix in the sourceName...

>
> Thanks in advance.
>
> David
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From etourigny.dev at gmail.com  Mon Apr 14 08:02:48 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 14 Apr 2014 12:02:48 -0300
Subject: [gdal-dev] How to use OGROpen with WFS?
In-Reply-To: <534BE84A.9000904@hsr.ch>
References: <534BE84A.9000904@hsr.ch>
Message-ID: <CA+TxYvMevbksB6WJ5Doem8w4fOYvz8wzLpCjTN4qK58FeHuksg@mail.gmail.com>

you probably need to include the entire string, including the WFS: prefix


On Mon, Apr 14, 2014 at 10:53 AM, David Tran <david.tran at hsr.ch> wrote:

> Hi
>
> I tried this:
>
>      OGRRegisterAll();
>>     sourceName = "http://maps.zh.ch/wfs/FnsNSWFS";
>>     sourceData = OGROpen( sourceName.c_str(), 0, NULL );
>>     if(sourceData == NULL) {
>>         printf("Open failed.\n");
>>         exit(1);
>>     }
>>
>
> and it ends with:
>
>  ERROR 4: Failed to read GeoJSON data
>> Open failed.
>>
>
> Does anybody has a proper example?
>
> ogrinfo -ro -so WFS:"http://maps.zh.ch/wfs/FnsNSWFS" shows something,
> therefore I think that it is my source code.
>
> Thanks in advance.
>
> David
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140414/e6e29b79/attachment.html>

From jr.morreale at enoreth.net  Mon Apr 14 08:35:30 2014
From: jr.morreale at enoreth.net (Jean-Roc Morreale)
Date: Mon, 14 Apr 2014 17:35:30 +0200
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <534BEDA9.8050403@f2e.de>
References: <534BEDA9.8050403@f2e.de>
Message-ID: <69ab5be8d46b55c7a86f89592cb07ca6@enoreth.net>

Hi,

You can do all these operation in one command :

gdal_translate -of PNG -srcwin xoff yoff xsize ysize "input.tif" 
"output.png"

Are you sure of your scrwin parameters ?

Le 2014-04-14 16:16, Nicole Stoffels a ?crit?:
> Dear Gdal-List,
> 
> I have a large ASTER file (downloaded from
> http://www.eea.europa.eu/data-and-maps/data/eu-dem#tab-european-data)
> in the GeoTIFF-format. It is compressed with LZW. What I want to do
> is:
> 
> 1. unpack it
> 2. seperate a smaller region from it
> 3. convert this regional GeoTIFF to a PNG
> 
> What I am doing:
> 
> $ gdal_translate -co COMPRESS=NONE EUD_CP-DEMS_6500035000-AA.tif 
> tmp1.tif
> 
> $ gdal_translate -srcwin 6500 3300 1000 1000 tmp1.tif tmp2.tif
> 
> $ gdal_translate -of PNG tmp2.tif tmp2.png
> 
> When I display the info with gdalinfo the first step seems to produce
> a decompressed file. The line COMPRESSION=LZW is not there anymore.
> However, if I want to display the min and max with gdalinfo, I get the
> following error.
> 
> ERROR 1: Failed to compute min/max, no valid pixels found in sampling.
> 
> I thought that the file might be too large, but if I change the
> data_type from float 32 to e.g. Int16 I get 0 as min and max value.
> That's why I assume that already the first gdal_translate does not
> work as I actually want it to work.
> 
> The other two transformations work without error messages. However, in
> the end I get a black png.
> 
> I have tried all types of transformation with various options. But as
> I am new in the subject and do not know much about gdal, I have no
> further ideas how to generate a file from my large GeoTIFF to continue
> working with.
> 
> I hope someone has an idea, what's going wrong with my
> gdal_translations. Thanks very much in advance.
> 
> Best regards
> Nicole


From etourigny.dev at gmail.com  Mon Apr 14 10:51:02 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 14 Apr 2014 14:51:02 -0300
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <534BEDA9.8050403@f2e.de>
References: <534BEDA9.8050403@f2e.de>
Message-ID: <CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>

On Mon, Apr 14, 2014 at 11:16 AM, Nicole Stoffels <stoffels at f2e.de> wrote:

> Dear Gdal-List,
>
> I have a large ASTER file (downloaded from http://www.eea.europa.eu/data-
> and-maps/data/eu-dem#tab-european-data) in the GeoTIFF-format. It is
> compressed with LZW. What I want to do is:
>
> 1. unpack it
> 2. seperate a smaller region from it
> 3. convert this regional GeoTIFF to a PNG
>
> What I am doing:
>
> $ gdal_translate -co COMPRESS=NONE EUD_CP-DEMS_6500035000-AA.tif tmp1.tif
>
> $ gdal_translate -srcwin 6500 3300 1000 1000 tmp1.tif tmp2.tif
>
> $ gdal_translate -of PNG tmp2.tif tmp2.png
>
> When I display the info with gdalinfo the first step seems to produce a
> decompressed file. The line COMPRESSION=LZW is not there anymore.


You need to set the compression options on any gdal command, it does not
use the compression of the input file. Also, you specifically asked for no
compression, so it's doing what you told it to.
use "-co COMPRESS=LZW"


> However, if I want to display the min and max with gdalinfo, I get the
> following error.
>
> ERROR 1: Failed to compute min/max, no valid pixels found in sampling.
>

try without changing the extents and see if a single command (as suggested
by Jean-Luc) works



>
> I thought that the file might be too large, but if I change the data_type
> from float 32 to e.g. Int16 I get 0 as min and max value. That's why I
> assume that already the first gdal_translate does not work as I actually
> want it to work.
>

your input values are probably between 0 and 1 in this case


>
> The other two transformations work without error messages. However, in the
> end I get a black png.
>
> I have tried all types of transformation with various options. But as I am
> new in the subject and do not know much about gdal, I have no further ideas
> how to generate a file from my large GeoTIFF to continue working with.
>
> I hope someone has an idea, what's going wrong with my gdal_translations.
> Thanks very much in advance.
>
> Best regards
> Nicole
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140414/73e91a11/attachment.html>

From landa.martin at gmail.com  Mon Apr 14 14:54:18 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 14 Apr 2014 23:54:18 +0200
Subject: [gdal-dev] Reminder: GDAL 1.11.0RC1 planned to be packaged
 tomorrow evening
In-Reply-To: <CA+Ei1Of_r-2vUak72G8nVqEtNBbC6Hzgb7=EAoBe2dteD65pcw@mail.gmail.com>
References: <201404102101.04671.even.rouault@mines-paris.org>
	<CA+Ei1Ofyi6mrravFJ6GpC==yimjY0ua=P3SDaLC8pVRS3f8twg@mail.gmail.com>
	<201404102149.00654.even.rouault@mines-paris.org>
	<CA+Ei1Of_r-2vUak72G8nVqEtNBbC6Hzgb7=EAoBe2dteD65pcw@mail.gmail.com>
Message-ID: <CA+Ei1OcSZJYXi1Zwy3==enyFQiXr6k+CFE3BBuwAE05SdjCJCw@mail.gmail.com>

Hi,

2014-04-14 10:55 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

>>> In this case I would ask you for few days (two/three) postpone. I am
>>> slowly finishing the initial support for GML-based Czech format
>>> (VFR/RUIAN). Would it be possible? Thanks in advance... Martin
>>
>> ok, no problem.
>
> I will commit related GFS files today in the evening hopefully. Sorry
> for delay! Martin

when testing new GFS files for GML driver I found possible bug in the driver.

Program received signal SIGSEGV, Segmentation fault.

#0  __memcpy_sse2 () at ../sysdeps/x86_64/multiarch/../memcpy.S:399
#1  0x00007ffff1cf32b5 in __GI___libc_realloc (oldmem=0x878a70,
bytes=24) at malloc.c:2995
#2  0x00007ffff739f457 in VSIRealloc (pData=0x878a70, nNewSize=24) at
cpl_vsisimple.cpp:623
#3  0x00007ffff7351102 in CPLRealloc (pData=0x878a70, nNewSize=24) at
cpl_conv.cpp:203
#4  0x00007ffff743ea22 in GMLFeature::SetGeometryDirectly
(this=0x878a40, nIdx=1, psGeom=0x8792e0) at gmlfeature.cpp:234
#5  0x00007ffff7442478 in GMLHandler::endElementGeometry
(this=0x68b800) at gmlhandler.cpp:1477
#6  0x00007ffff74402d9 in GMLHandler::endElement (this=0x68b800) at
gmlhandler.cpp:606
#7  0x00007ffff743f8ac in GMLExpatHandler::endElementCbk
(pUserData=0x68b800, pszName=0x742d80 "gml:MultiSurface") at
gmlhandler.cpp:317

In this case `nIdx = 1` and `m_nGeometryCount = 0`. The features in
this layer have one or two geometry colums.

 <obi:Geometrie>
          <obi:DefinicniBod>
          <obi:OriginalniHranice>
</obi:Geometrie>

'DefinicniBod' can be Point or MultiPoint, OriginalniHranice is
MultiSurface (so MultiPolygon). The driver fails when 'Geometrie'
contains only 'OriginalniHranice'. The relevant part of GFS file:

    <GeomPropertyDefn>
      <Name>DefinicniBod</Name>
      <ElementPath>Geometrie|DefinicniBod</ElementPath>
      <Type>MultiPoint</Type>
    </GeomPropertyDefn>
    <GeomPropertyDefn>
      <Name>OriginalniHranice</Name>
      <ElementPath>Geometrie|OriginalniHranice</ElementPath>
      <Type>MultiPolygon</Type>
    </GeomPropertyDefn>

I will prepare sample test file later tomorrow, Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From landa.martin at gmail.com  Mon Apr 14 15:03:27 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 15 Apr 2014 00:03:27 +0200
Subject: [gdal-dev] Reminder: GDAL 1.11.0RC1 planned to be packaged
 tomorrow evening
In-Reply-To: <CA+Ei1OcSZJYXi1Zwy3==enyFQiXr6k+CFE3BBuwAE05SdjCJCw@mail.gmail.com>
References: <201404102101.04671.even.rouault@mines-paris.org>
	<CA+Ei1Ofyi6mrravFJ6GpC==yimjY0ua=P3SDaLC8pVRS3f8twg@mail.gmail.com>
	<201404102149.00654.even.rouault@mines-paris.org>
	<CA+Ei1Of_r-2vUak72G8nVqEtNBbC6Hzgb7=EAoBe2dteD65pcw@mail.gmail.com>
	<CA+Ei1OcSZJYXi1Zwy3==enyFQiXr6k+CFE3BBuwAE05SdjCJCw@mail.gmail.com>
Message-ID: <CA+Ei1OfDVw_iTUAR5PVOki3JhJbv9wycv=xP7eD4SQKkBC-gWQ@mail.gmail.com>

Hi,

2014-04-14 23:54 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

[...]

> I will prepare sample test file later tomorrow, Martin

The full data file [1]. Reproducible by:

ogrinfo 20140331_OB_564567_UKSH.xml.gz StavebniObjekty
Had to open data source read-only.
INFO: Open of `20140331_OB_564567_UKSH.xml.gz'
      using driver `GML' successful.

Layer name: StavebniObjekty
Geometry (DefinicniBod): Multi Point
Geometry (OriginalniHranice): Multi Polygon
*** Error in `ogrinfo': realloc(): invalid old size: 0x000000000269fe70 ***
Segmentation fault

Martin

[1] http://geo102.fsv.cvut.cz/~landa/gml-full-test-data.tar.gz

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From wolf+grass at bergenheim.net  Mon Apr 14 15:05:30 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Tue, 15 Apr 2014 00:05:30 +0200
Subject: [gdal-dev] Reminder: GDAL 1.11.0RC1 planned to be packaged
 tomorrow evening
In-Reply-To: <201404102101.04671.even.rouault@mines-paris.org>
References: <201404102101.04671.even.rouault@mines-paris.org>
Message-ID: <CAJhTkW7qOyET7f32XS0jdBZOd5GbAdSGpa4dBznMEQr=30ng3A@mail.gmail.com>

Hi Even,

On Thu, Apr 10, 2014 at 9:01 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:
>
> I still intend packaging 1.11.0RC1 tomorrow evening if that's OK (there
> have
> been a few changes since beta1, but we can probably try a RC1 directly).
> Please tell if you have something almost ready or if some critical issues
> haven't still been fixed and committed.
>

As you probably noticed the GME driver is now sort of in a usable state.
Also, thanks for the fixes you made. :)
I added rudimentary transaction support to it now. But I'm going to need to
probably either rewrite it to be smarter so that it will try to
automatically group feature updates into groups of 50. But that's not going
to happen yet. Is there anything I need to do to get the GME driver into
the RC?

--Wolf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140415/ca17d1fe/attachment.html>

From even.rouault at mines-paris.org  Mon Apr 14 16:27:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 15 Apr 2014 01:27:25 +0200
Subject: [gdal-dev] Reminder: GDAL 1.11.0RC1 planned to be packaged
	tomorrow evening
In-Reply-To: <CA+Ei1OfDVw_iTUAR5PVOki3JhJbv9wycv=xP7eD4SQKkBC-gWQ@mail.gmail.com>
References: <201404102101.04671.even.rouault@mines-paris.org>
	<CA+Ei1OcSZJYXi1Zwy3==enyFQiXr6k+CFE3BBuwAE05SdjCJCw@mail.gmail.com>
	<CA+Ei1OfDVw_iTUAR5PVOki3JhJbv9wycv=xP7eD4SQKkBC-gWQ@mail.gmail.com>
Message-ID: <201404150127.25441.even.rouault@mines-paris.org>

Le mardi 15 avril 2014 00:03:27, Martin Landa a ?crit :
> Hi,
> 
> 2014-04-14 23:54 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> 
> [...]
> 
> > I will prepare sample test file later tomorrow, Martin
> 
> The full data file [1]. Reproducible by:
> 
> ogrinfo 20140331_OB_564567_UKSH.xml.gz StavebniObjekty
> Had to open data source read-only.
> INFO: Open of `20140331_OB_564567_UKSH.xml.gz'
>       using driver `GML' successful.
> 
> Layer name: StavebniObjekty
> Geometry (DefinicniBod): Multi Point
> Geometry (OriginalniHranice): Multi Polygon
> *** Error in `ogrinfo': realloc(): invalid old size: 0x000000000269fe70 ***
> Segmentation fault

Fixed by r27188

> 
> Martin
> 
> [1] http://geo102.fsv.cvut.cz/~landa/gml-full-test-data.tar.gz

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Mon Apr 14 16:40:10 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 15 Apr 2014 01:40:10 +0200
Subject: [gdal-dev] Reminder: GDAL 1.11.0RC1 planned to be packaged
	tomorrow evening
In-Reply-To: <CAJhTkW7qOyET7f32XS0jdBZOd5GbAdSGpa4dBznMEQr=30ng3A@mail.gmail.com>
References: <201404102101.04671.even.rouault@mines-paris.org>
	<CAJhTkW7qOyET7f32XS0jdBZOd5GbAdSGpa4dBznMEQr=30ng3A@mail.gmail.com>
Message-ID: <201404150140.10904.even.rouault@mines-paris.org>

Le mardi 15 avril 2014 00:05:30, Wolf Bergenheim a ?crit :
> Hi Even,
> 
> On Thu, Apr 10, 2014 at 9:01 PM, Even Rouault
> 
> <even.rouault at mines-paris.org>wrote:
> > I still intend packaging 1.11.0RC1 tomorrow evening if that's OK (there
> > have
> > been a few changes since beta1, but we can probably try a RC1 directly).
> > Please tell if you have something almost ready or if some critical issues
> > haven't still been fixed and committed.
> 
> As you probably noticed the GME driver is now sort of in a usable state.
> Also, thanks for the fixes you made. :)
> I added rudimentary transaction support to it now. But I'm going to need to
> probably either rewrite it to be smarter so that it will try to
> automatically group feature updates into groups of 50. But that's not going
> to happen yet. Is there anything I need to do to get the GME driver into
> the RC?

It is in trunk, so it will automatically be in the RC.

> 
> --Wolf

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucadeluge at gmail.com  Tue Apr 15 02:11:36 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Tue, 15 Apr 2014 11:11:36 +0200
Subject: [gdal-dev] ReprojectImage and nodata
Message-ID: <CAK4m-3wTORzvyPRYAsaArJ7Vr5_67d00rtLEPOZAt7G-Wiex3Q@mail.gmail.com>

I everybody,

I'm using Python ReprojectImage function to reproject some images but
there is no way to assign nodata value.

There was already a request for help about one year ago [0], there are
some news?
Otherwise could I open a ticket? is it a bug or enhancement?

Thanks a lot for any hints

[0] http://osgeo-org.1560.x6.nabble.com/gdal-dev-ReprojectImage-and-nodata-td5057270.html

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From stoffels at f2e.de  Tue Apr 15 04:09:16 2014
From: stoffels at f2e.de (Nicole Stoffels)
Date: Tue, 15 Apr 2014 13:09:16 +0200
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>
References: <534BEDA9.8050403@f2e.de>
	<CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>
Message-ID: <534D135C.2000800@f2e.de>

Thank you both for your answers. I have applied your suggestions.

Making a single command works but does not change the result.

Concerning the compression, I used LZW instead of NONE. However, it also 
does not make any difference.

I also changed the srcwin parameters. I do not get any errors and the 
gdalinfo says that the subarea is within the original area.

I skipped the png part to make it easier first. And after trying to open 
the new tif with gimp and getting an error message that the float32 data 
cannot be displayed I added the ot-flag. Here is my new command line:

$ gdal_translate -ot Byte -srcwin 0 0 4000 4000 -co COMPRESS=LZW 
EUD_CP-DEMS_6500035000-AA.tif test.tif

What I get is a completely black tif. Here are the two gdalinfo-outputs, 
that I get:

$ gdalinfo -mm EUD_CP-DEMS_6500035000-AA.tif
Driver: GTiff/GeoTIFF
Files: EUD_CP-DEMS_6500035000-AA.tif
Size is 40000, 40000
Coordinate System is:
PROJCS["ETRS89 / ETRS-LAEA",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.2572221000027,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4258"]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","3035"]]
Origin = (6000000.000000000000000,4000000.000000000000000)
Pixel Size = (25.000000000000000,-25.000000000000000)
Metadata:
   TIFFTAG_DOCUMENTNAME=EUD_CP-DEMS_6500035000-AA.tif
   TIFFTAG_IMAGEDESCRIPTION=File written by egcs_wrgtif 2.1
   TIFFTAG_SOFTWARE=IDL 8.2, Exelis Visual Information Solutions, Inc.
   TIFFTAG_DATETIME=2013:09:17 21:00:27
   TIFFTAG_XRESOLUTION=100
   TIFFTAG_YRESOLUTION=100
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
   AREA_OR_POINT=Area
Image Structure Metadata:
   COMPRESSION=LZW
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 6000000.000, 4000000.000) ( 37d47'0.49"E, 56d 7'28.33"N)
Lower Left  ( 6000000.000, 3000000.000) ( 32d47'35.21"E, 47d45'16.08"N)
Upper Right ( 7000000.000, 4000000.000) ( 51d32'27.75"E, 51d55'27.24"N)
Lower Right ( 7000000.000, 3000000.000) ( 44d57'3.39"E, 44d18'11.63"N)
Center      ( 6500000.000, 3500000.000) ( 41d41'39.51"E, 50d15'46.40"N)
Band 1 Block=40000x1 Type=Float32, ColorInterp=Gray
ERROR 1: Failed to compute min/max, no valid pixels found in sampling.

$ gdalinfo -mm test.tif
Driver: GTiff/GeoTIFF
Files: test.tif
Size is 4000, 4000
Coordinate System is:
PROJCS["ETRS89 / ETRS-LAEA",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4258"]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","3035"]]
Origin = (6000000.000000000000000,4000000.000000000000000)
Pixel Size = (25.000000000000000,-25.000000000000000)
Metadata:
   TIFFTAG_DOCUMENTNAME=EUD_CP-DEMS_6500035000-AA.tif
   TIFFTAG_IMAGEDESCRIPTION=File written by egcs_wrgtif 2.1
   TIFFTAG_SOFTWARE=IDL 8.2, Exelis Visual Information Solutions, Inc.
   TIFFTAG_DATETIME=2013:09:17 21:00:27
   TIFFTAG_XRESOLUTION=100
   TIFFTAG_YRESOLUTION=100
   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
   AREA_OR_POINT=Area
Image Structure Metadata:
   COMPRESSION=LZW
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 6000000.000, 4000000.000) ( 37d47'0.49"E, 56d 7'28.33"N)
Lower Left  ( 6000000.000, 3900000.000) ( 37d10'18.23"E, 55d18'7.26"N)
Upper Right ( 6100000.000, 4000000.000) ( 39d16'14.71"E, 55d46'30.54"N)
Lower Right ( 6100000.000, 3900000.000) ( 38d38'6.52"E, 54d57'38.92"N)
Center      ( 6050000.000, 3950000.000) ( 38d12'51.64"E, 55d32'35.70"N)
Band 1 Block=4000x2 Type=Byte, ColorInterp=Gray
     Computed Min/Max=0.000,0.000

Am 14.04.2014 19:51, schrieb Etienne Tourigny:>
>
>
> On Mon, Apr 14, 2014 at 11:16 AM, Nicole Stoffels <stoffels at f2e.de
> <mailto:stoffels at f2e.de>> wrote:
>
>     Dear Gdal-List,
>
>     I have a large ASTER file (downloaded from
>     http://www.eea.europa.eu/data-__and-maps/data/eu-dem#tab-__european-data
>     <http://www.eea.europa.eu/data-and-maps/data/eu-dem#tab-european-data>)
>     in the GeoTIFF-format. It is compressed with LZW. What I want to do is:
>
>     1. unpack it
>     2. seperate a smaller region from it
>     3. convert this regional GeoTIFF to a PNG
>
>     What I am doing:
>
>     $ gdal_translate -co COMPRESS=NONE EUD_CP-DEMS_6500035000-AA.tif
>     tmp1.tif
>
>     $ gdal_translate -srcwin 6500 3300 1000 1000 tmp1.tif tmp2.tif
>
>     $ gdal_translate -of PNG tmp2.tif tmp2.png
>
>     When I display the info with gdalinfo the first step seems to
>     produce a decompressed file. The line COMPRESSION=LZW is not there
>     anymore.
>
>
> You need to set the compression options on any gdal command, it does not
> use the compression of the input file. Also, you specifically asked for
> no compression, so it's doing what you told it to.
> use "-co COMPRESS=LZW"


>
>     However, if I want to display the min and max with gdalinfo, I get
>     the following error.
>
>     ERROR 1: Failed to compute min/max, no valid pixels found in sampling.
>
>
> try without changing the extents and see if a single command (as
> suggested by Jean-Luc) works
>
>
>     I thought that the file might be too large, but if I change the
>     data_type from float 32 to e.g. Int16 I get 0 as min and max value.
>     That's why I assume that already the first gdal_translate does not
>     work as I actually want it to work.
>
>
> your input values are probably between 0 and 1 in this case
>
>
>     The other two transformations work without error messages. However,
>     in the end I get a black png.
>
>     I have tried all types of transformation with various options. But
>     as I am new in the subject and do not know much about gdal, I have
>     no further ideas how to generate a file from my large GeoTIFF to
>     continue working with.
>
>     I hope someone has an idea, what's going wrong with my
>     gdal_translations. Thanks very much in advance.
>
>     Best regards
>     Nicole
>     _________________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>




From chaitanya.ch at gmail.com  Tue Apr 15 04:58:11 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 15 Apr 2014 17:28:11 +0530
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <534D135C.2000800@f2e.de>
References: <534BEDA9.8050403@f2e.de>
	<CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>
	<534D135C.2000800@f2e.de>
Message-ID: <CAMKgpOZjvDC8vMFn1Yme5CnD8T+L0trE3=kpp15UQ1+ei7o0Qw@mail.gmail.com>

Nicole,

The problem is reading the source file itself. GDAL is unable to find any
valid pixels. Check if you are using the latest GDAL binaries. Use
"gdalinfo -version". Use qgis to view the input and output. GIMP can't
handle anything except basic pixel types. The -mm option should find some
valid pixels if everything is good.

Later, you should scale the pixel values to 0-255 range to represent them
in PNG.

--
Best regards,
Chaitanya Kumar CH
On 15-Apr-2014 4:40 pm, "Nicole Stoffels" <stoffels at f2e.de> wrote:

> Thank you both for your answers. I have applied your suggestions.
>
> Making a single command works but does not change the result.
>
> Concerning the compression, I used LZW instead of NONE. However, it also
> does not make any difference.
>
> I also changed the srcwin parameters. I do not get any errors and the
> gdalinfo says that the subarea is within the original area.
>
> I skipped the png part to make it easier first. And after trying to open
> the new tif with gimp and getting an error message that the float32 data
> cannot be displayed I added the ot-flag. Here is my new command line:
>
> $ gdal_translate -ot Byte -srcwin 0 0 4000 4000 -co COMPRESS=LZW
> EUD_CP-DEMS_6500035000-AA.tif test.tif
>
> What I get is a completely black tif. Here are the two gdalinfo-outputs,
> that I get:
>
> $ gdalinfo -mm EUD_CP-DEMS_6500035000-AA.tif
> Driver: GTiff/GeoTIFF
> Files: EUD_CP-DEMS_6500035000-AA.tif
> Size is 40000, 40000
> Coordinate System is:
> PROJCS["ETRS89 / ETRS-LAEA",
>     GEOGCS["ETRS89",
>         DATUM["European_Terrestrial_Reference_System_1989",
>             SPHEROID["GRS 1980",6378137,298.2572221000027,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6258"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4258"]],
>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>     PARAMETER["latitude_of_center",52],
>     PARAMETER["longitude_of_center",10],
>     PARAMETER["false_easting",4321000],
>     PARAMETER["false_northing",3210000],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","3035"]]
> Origin = (6000000.000000000000000,4000000.000000000000000)
> Pixel Size = (25.000000000000000,-25.000000000000000)
> Metadata:
>   TIFFTAG_DOCUMENTNAME=EUD_CP-DEMS_6500035000-AA.tif
>   TIFFTAG_IMAGEDESCRIPTION=File written by egcs_wrgtif 2.1
>   TIFFTAG_SOFTWARE=IDL 8.2, Exelis Visual Information Solutions, Inc.
>   TIFFTAG_DATETIME=2013:09:17 21:00:27
>   TIFFTAG_XRESOLUTION=100
>   TIFFTAG_YRESOLUTION=100
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 6000000.000, 4000000.000) ( 37d47'0.49"E, 56d 7'28.33"N)
> Lower Left  ( 6000000.000, 3000000.000) ( 32d47'35.21"E, 47d45'16.08"N)
> Upper Right ( 7000000.000, 4000000.000) ( 51d32'27.75"E, 51d55'27.24"N)
> Lower Right ( 7000000.000, 3000000.000) ( 44d57'3.39"E, 44d18'11.63"N)
> Center      ( 6500000.000, 3500000.000) ( 41d41'39.51"E, 50d15'46.40"N)
> Band 1 Block=40000x1 Type=Float32, ColorInterp=Gray
> ERROR 1: Failed to compute min/max, no valid pixels found in sampling.
>
> $ gdalinfo -mm test.tif
> Driver: GTiff/GeoTIFF
> Files: test.tif
> Size is 4000, 4000
> Coordinate System is:
> PROJCS["ETRS89 / ETRS-LAEA",
>     GEOGCS["ETRS89",
>         DATUM["European_Terrestrial_Reference_System_1989",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6258"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4258"]],
>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>     PARAMETER["latitude_of_center",52],
>     PARAMETER["longitude_of_center",10],
>     PARAMETER["false_easting",4321000],
>     PARAMETER["false_northing",3210000],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","3035"]]
> Origin = (6000000.000000000000000,4000000.000000000000000)
> Pixel Size = (25.000000000000000,-25.000000000000000)
> Metadata:
>   TIFFTAG_DOCUMENTNAME=EUD_CP-DEMS_6500035000-AA.tif
>   TIFFTAG_IMAGEDESCRIPTION=File written by egcs_wrgtif 2.1
>   TIFFTAG_SOFTWARE=IDL 8.2, Exelis Visual Information Solutions, Inc.
>   TIFFTAG_DATETIME=2013:09:17 21:00:27
>   TIFFTAG_XRESOLUTION=100
>   TIFFTAG_YRESOLUTION=100
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=LZW
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 6000000.000, 4000000.000) ( 37d47'0.49"E, 56d 7'28.33"N)
> Lower Left  ( 6000000.000, 3900000.000) ( 37d10'18.23"E, 55d18'7.26"N)
> Upper Right ( 6100000.000, 4000000.000) ( 39d16'14.71"E, 55d46'30.54"N)
> Lower Right ( 6100000.000, 3900000.000) ( 38d38'6.52"E, 54d57'38.92"N)
> Center      ( 6050000.000, 3950000.000) ( 38d12'51.64"E, 55d32'35.70"N)
> Band 1 Block=4000x2 Type=Byte, ColorInterp=Gray
>     Computed Min/Max=0.000,0.000
>
> Am 14.04.2014 19:51, schrieb Etienne Tourigny:>
>
>>
>>
>> On Mon, Apr 14, 2014 at 11:16 AM, Nicole Stoffels <stoffels at f2e.de
>> <mailto:stoffels at f2e.de>> wrote:
>>
>>     Dear Gdal-List,
>>
>>     I have a large ASTER file (downloaded from
>>     http://www.eea.europa.eu/data-__and-maps/data/eu-dem#tab-__
>> european-data
>>     <http://www.eea.europa.eu/data-and-maps/data/eu-dem#tab-european-data
>> >)
>>     in the GeoTIFF-format. It is compressed with LZW. What I want to do
>> is:
>>
>>     1. unpack it
>>     2. seperate a smaller region from it
>>     3. convert this regional GeoTIFF to a PNG
>>
>>     What I am doing:
>>
>>     $ gdal_translate -co COMPRESS=NONE EUD_CP-DEMS_6500035000-AA.tif
>>     tmp1.tif
>>
>>     $ gdal_translate -srcwin 6500 3300 1000 1000 tmp1.tif tmp2.tif
>>
>>     $ gdal_translate -of PNG tmp2.tif tmp2.png
>>
>>     When I display the info with gdalinfo the first step seems to
>>     produce a decompressed file. The line COMPRESSION=LZW is not there
>>     anymore.
>>
>>
>> You need to set the compression options on any gdal command, it does not
>> use the compression of the input file. Also, you specifically asked for
>> no compression, so it's doing what you told it to.
>> use "-co COMPRESS=LZW"
>>
>
>
>
>>     However, if I want to display the min and max with gdalinfo, I get
>>     the following error.
>>
>>     ERROR 1: Failed to compute min/max, no valid pixels found in sampling.
>>
>>
>> try without changing the extents and see if a single command (as
>> suggested by Jean-Luc) works
>>
>>
>>     I thought that the file might be too large, but if I change the
>>     data_type from float 32 to e.g. Int16 I get 0 as min and max value.
>>     That's why I assume that already the first gdal_translate does not
>>     work as I actually want it to work.
>>
>>
>> your input values are probably between 0 and 1 in this case
>>
>>
>>     The other two transformations work without error messages. However,
>>     in the end I get a black png.
>>
>>     I have tried all types of transformation with various options. But
>>     as I am new in the subject and do not know much about gdal, I have
>>     no further ideas how to generate a file from my large GeoTIFF to
>>     continue working with.
>>
>>     I hope someone has an idea, what's going wrong with my
>>     gdal_translations. Thanks very much in advance.
>>
>>     Best regards
>>     Nicole
>>     _________________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>>
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140415/5325da62/attachment-0001.html>

From dave.dehaan at sap.com  Tue Apr 15 06:32:10 2014
From: dave.dehaan at sap.com (DeHaan, Dave)
Date: Tue, 15 Apr 2014 13:32:10 +0000
Subject: [gdal-dev] OGR SQLAnywhere driver
In-Reply-To: <4BCB480CFC693741AB7B875E0BC3A2B5886B8782@DEWDFEMB19C.global.corp.sap>
References: <4BCB480CFC693741AB7B875E0BC3A2B5886B8782@DEWDFEMB19C.global.corp.sap>
Message-ID: <4BCB480CFC693741AB7B875E0BC3A2B5886B9FFA@DEWDFEMB19C.global.corp.sap>

Hello GDAL developers,

Are there any GDAL committers who would be willing to review my contribution of a new SQLAnywhere OGR driver?  The latest attachment on the ticket below contains code that has been built and tested on both Ubuntu and Windows.  I can provide assistance with deploying a SQL Anywhere development instance for anyone who wants to try it out.

Best regards,
Dave DeHaan

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of DeHaan, Dave
Sent: Saturday, April 05, 2014 3:23 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] OGR SQLAnywhere driver

Hello,

I recently mentioned on gdal-dev that we would like to contribute an OGR driver for SAP SQL Anywhere.  I have opened ticket 5430 http://trac.osgeo.org/gdal/ticket/5430 to track this.  A patch file is attached to the ticket.



My apologies for not getting this uploaded before the 1.11.0 first beta was prepared.  We would certainly like to get this into 1.11.0 RC1 if at all possible (sorry for the tight timeline).



Best regards,

Dave DeHaan


Dr. David DeHaan
PI HANA Plat DM
SAP Canada
445 Wes Graham Way
Waterloo, ON N2L 6R2, Canada
T (519) 883-6487
F (519) 747-4971
E dave.dehaan at sap.com<mailto:dave.dehaan at sap.com>
<www.sap.com<http://www.sap.com>>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140415/dfd7858c/attachment.html>

From stoffels at f2e.de  Tue Apr 15 07:51:20 2014
From: stoffels at f2e.de (Nicole Stoffels)
Date: Tue, 15 Apr 2014 16:51:20 +0200
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <CAMKgpOZjvDC8vMFn1Yme5CnD8T+L0trE3=kpp15UQ1+ei7o0Qw@mail.gmail.com>
References: <534BEDA9.8050403@f2e.de>	<CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>	<534D135C.2000800@f2e.de>
	<CAMKgpOZjvDC8vMFn1Yme5CnD8T+L0trE3=kpp15UQ1+ei7o0Qw@mail.gmail.com>
Message-ID: <534D4768.1070207@f2e.de>

Thanks Chaitanya!

>
> The problem is reading the source file itself. GDAL is unable to find
> any valid pixels. Check if you are using the latest GDAL binaries. Use
> "gdalinfo -version".

I just installed the latest gdal-version (1.10.1). But it did not solve 
my problems. I still get the same error while trying to display the min 
and max.

Use qgis to view the input and output. GIMP can't
> handle anything except basic pixel types.
But with qgis I can visualize my original large EU_DEM-files. :)

Best regards
Nicole


From cgodkin at gmail.com  Tue Apr 15 08:11:02 2014
From: cgodkin at gmail.com (Carl Godkin)
Date: Tue, 15 Apr 2014 08:11:02 -0700
Subject: [gdal-dev] Questions about building 1.11.0beta1 on Windows
Message-ID: <CAE=8kmk-0CaCfen8BTLFY4YVxAzWxy+i+dNNhO0WipYmUJK9jA@mail.gmail.com>

Hi,

I tried out 1.11.0beta1 yesterday and today and everything I have tried
seems fine to me on Win64.

I have two small questions:

1. I really like the change in the Windows build procedure that introduces
the "nmake.local" include in which I can put many of my growing collection
of local edits.  I say "many" instead of "all" because I don't see how to
effectively "comment out" a makefile variable using the nmake.local method.

For instance, I want to build without ODBC support.  The nmake.opt file
contains the instruction

# Comment out the following to disable ODBC support.
ODBC_SUPPORTED = 1

Can anyone think of a way to undo the ODBC_SUPPORTED definition
(on by default) from nmake.local?  The variable is later checked in three
places with "!IFDEF ODBC_SUPPORTED" so changing its value won't work, not
to mention that the nmake.local inclusion comes before ODBC_SUPPORTED
definition.

2. When building on Win64, I always notice lots of warnings (C4244 and
C4267) that arise because of implicit conversions from (say) size_t to int.
 I was wondering why many open source projects (including GDAL) don't seem
to fix these - is it because the necessary casts make the code less
readable in someone's opinion?  Or is it just because no one has gotten
around to it?  If it's the latter, I would be willing to submit a ticket
with some patches.  It seems a pity to build with /W4 but put up with so
many warnings.

Thanks,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140415/386146aa/attachment.html>

From chaitanya.ch at gmail.com  Tue Apr 15 09:46:16 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 15 Apr 2014 22:16:16 +0530
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <534D4768.1070207@f2e.de>
References: <534BEDA9.8050403@f2e.de>
	<CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>
	<534D135C.2000800@f2e.de>
	<CAMKgpOZjvDC8vMFn1Yme5CnD8T+L0trE3=kpp15UQ1+ei7o0Qw@mail.gmail.com>
	<534D4768.1070207@f2e.de>
Message-ID: <CAMKgpOYd9rEzf-MdYkjHVPo0njXqKDYcLrZYNv-pKqs6riQUEw@mail.gmail.com>

Nicole,
You should be able to perform those operations from qgis too. Crop it to
your extents, scale the pixel values and save as PNG.

--
Best regards,
Chaitanya Kumar CH
On 15-Apr-2014 8:21 pm, "Nicole Stoffels" <stoffels at f2e.de> wrote:

> Thanks Chaitanya!
>
>
>> The problem is reading the source file itself. GDAL is unable to find
>> any valid pixels. Check if you are using the latest GDAL binaries. Use
>> "gdalinfo -version".
>>
>
> I just installed the latest gdal-version (1.10.1). But it did not solve my
> problems. I still get the same error while trying to display the min and
> max.
>
> Use qgis to view the input and output. GIMP can't
>
>> handle anything except basic pixel types.
>>
> But with qgis I can visualize my original large EU_DEM-files. :)
>
> Best regards
> Nicole
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140415/abec2665/attachment.html>

From landa.martin at gmail.com  Tue Apr 15 09:57:55 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 15 Apr 2014 18:57:55 +0200
Subject: [gdal-dev] [EXTERNAL] oci and oracle express 11
In-Reply-To: <loom.20140412T110503-626@post.gmane.org>
References: <CA+Ei1Odn9L9vf3DHtrafAGW_g=cUsP_yE24M1WX6Yc7bMGm9gQ@mail.gmail.com>
	<CF6B43EF.ED86F%michael.smith@erdc.dren.mil>
	<CA+Ei1OfQ7=62t6BUeT30BRrizT3osKbQcEbP6X8UGj5TpatNAg@mail.gmail.com>
	<CF6B4911.ED877%michael.smith@erdc.dren.mil>
	<CA+Ei1Oc3p8d51N-MrFoaKnZj5f3uaum=jnTFMeyYC1sv3AWGQw@mail.gmail.com>
	<CF6B5241.ED87C%michael.smith@erdc.dren.mil>
	<CA+Ei1OeQXtwP0OXpZ=eeEoA9MDx7KXmbFnW8zDwntBy1wsK=oA@mail.gmail.com>
	<CF6B6B73.ED887%michael.smith@erdc.dren.mil>
	<CA+Ei1Ocpcu4=B++d183zyxm5dctqAZeL8eccdXxP-vXufykw9Q@mail.gmail.com>
	<CABUeae-pZPOdTg1JG+o9p0H3f-mkKuigzRStVgVj+Tn2YQ1v2A@mail.gmail.com>
	<CA+Ei1OcBDvwTRYvwGKbC-zzfJbQrCPmjtA_gWjWbNxZRnVT21A@mail.gmail.com>
	<BLU173-W50C8C49F4DDF351ED1F3890540@phx.gbl>
	<CA+Ei1Oc8zYo1efoau-pTn+PQ3u5WgX=UKHhmEFW4AaVEvvrWBQ@mail.gmail.com>
	<loom.20140412T110503-626@post.gmane.org>
Message-ID: <CA+Ei1Oegac-HpdmSY14M7+d1uLfUxE1p1vQspANNGtZxXMpgtw@mail.gmail.com>

Hi,

2014-04-12 11:12 GMT+02:00 Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> It took quite a lot of thinking for many people before you got it to work.
> Driver page http://www.gdal.org/ogr/drv_oci.html does not give any help, it
> does not even mention that oci.dll is somehow involved. Could the more
> advanced OCI users/developers suggest what to add to the driver page for
> helping next new users?

right, I will try to add some useful notes about that. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From jr.morreale at enoreth.net  Tue Apr 15 10:43:49 2014
From: jr.morreale at enoreth.net (MORREALE Jean Roc)
Date: Tue, 15 Apr 2014 19:43:49 +0200
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <534D4768.1070207@f2e.de>
References: <534BEDA9.8050403@f2e.de>	<CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>	<534D135C.2000800@f2e.de>	<CAMKgpOZjvDC8vMFn1Yme5CnD8T+L0trE3=kpp15UQ1+ei7o0Qw@mail.gmail.com>
	<534D4768.1070207@f2e.de>
Message-ID: <534D6FD5.90707@enoreth.net>

If you're talking about the EAA EU_DEM then PNG isn't a good solution as 
the whole raster as to be loaded to access a subset of it, a compressed 
TIFF with TILED=YES would be better.

Also, you should not try to scale it down to byte as it would only 255 
values, if I remember well the original data is in ctfloat32 so try to 
scale it down to int32 for a huge size gain.


Le 15/04/2014 16:51, Nicole Stoffels a ?crit :
> Thanks Chaitanya!
>
>>
>> The problem is reading the source file itself. GDAL is unable to find
>> any valid pixels. Check if you are using the latest GDAL binaries. Use
>> "gdalinfo -version".
>
> I just installed the latest gdal-version (1.10.1). But it did not solve
> my problems. I still get the same error while trying to display the min
> and max.
>
> Use qgis to view the input and output. GIMP can't
>> handle anything except basic pixel types.
> But with qgis I can visualize my original large EU_DEM-files. :)
>
> Best regards
> Nicole
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jluis at ualg.pt  Tue Apr 15 10:55:24 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue, 15 Apr 2014 18:55:24 +0100
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <534D6FD5.90707@enoreth.net>
References: <534BEDA9.8050403@f2e.de>	<CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>	<534D135C.2000800@f2e.de>	<CAMKgpOZjvDC8vMFn1Yme5CnD8T+L0trE3=kpp15UQ1+ei7o0Qw@mail.gmail.com>
	<534D4768.1070207@f2e.de> <534D6FD5.90707@enoreth.net>
Message-ID: <534D728C.2060509@ualg.pt>

On 15-04-2014 18:43, MORREALE Jean Roc wrote:
> If you're talking about the EAA EU_DEM then PNG isn't a good solution 
> as the whole raster as to be loaded to access a subset of it, a 
> compressed TIFF with TILED=YES would be better.
>
> Also, you should not try to scale it down to byte as it would only 255 
> values, if I remember well the original data is in ctfloat32 so try to 
> scale it down to int32 for a huge size gain.

but the ASTER grids have lower real resolution than the SRTM (despite 
being distributed as 1 arc sec grids) and the later are originally int16 
, so scaling to 2 bytes ints should be OK.


From landa.martin at gmail.com  Tue Apr 15 13:24:32 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 15 Apr 2014 22:24:32 +0200
Subject: [gdal-dev] ogr oracle unable to create index
Message-ID: <CA+Ei1OdhrC+n3=w4yRGv_n7KyaZciiZgBdv+1w+gPQjc5qcTWA@mail.gmail.com>

Hi all,

when playing with Oracle I discovered that `ogr2ogr -f OCI` fails to
create a spatial index.

Deleting directly.
OCI: Prepare(CREATE INDEX "OBCE_IDX" ON OBCE("ORA_GEOMETRY") INDEXTYPE
IS MDSYS.SPATIAL_INDEX )
ERROR 1: ORA-00955: name is already used by an existing object
 in CREATE INDEX "OBCE_IDX" ON OBCE("ORA_GEOMETRY") INDEXTYPE IS
MDSYS.SPATIAL_INDEX
OCI: Prepare(DROP INDEX "OBCE_IDX")

Any similar experience or ideas what could be wrong (testing GDAL from
trunk on MS Windows)? Thanks in advance, Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From Michael.Smith at erdc.dren.mil  Tue Apr 15 13:44:12 2014
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Tue, 15 Apr 2014 20:44:12 +0000
Subject: [gdal-dev] [EXTERNAL]  ogr oracle unable to create index
In-Reply-To: <CA+Ei1OdhrC+n3=w4yRGv_n7KyaZciiZgBdv+1w+gPQjc5qcTWA@mail.gmail.com>
References: <CA+Ei1OdhrC+n3=w4yRGv_n7KyaZciiZgBdv+1w+gPQjc5qcTWA@mail.gmail.com>
Message-ID: <CF731227.EDDC8%michael.smith@erdc.dren.mil>

Martin,

The error indicates that there already is an index by that name. If you
drop the index manually, then the spatial index will get created.

Mike

-- 
Michael Smith

US Army Corps
Remote Sensing GIS/Center



On 4/15/14, 4:24 PM, "Martin Landa" <landa.martin at gmail.com> wrote:

>Hi all,
>
>when playing with Oracle I discovered that `ogr2ogr -f OCI` fails to
>create a spatial index.
>
>Deleting directly.
>OCI: Prepare(CREATE INDEX "OBCE_IDX" ON OBCE("ORA_GEOMETRY") INDEXTYPE
>IS MDSYS.SPATIAL_INDEX )
>ERROR 1: ORA-00955: name is already used by an existing object
> in CREATE INDEX "OBCE_IDX" ON OBCE("ORA_GEOMETRY") INDEXTYPE IS
>MDSYS.SPATIAL_INDEX
>OCI: Prepare(DROP INDEX "OBCE_IDX")
>
>Any similar experience or ideas what could be wrong (testing GDAL from
>trunk on MS Windows)? Thanks in advance, Martin
>
>-- 
>Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From landa.martin at gmail.com  Tue Apr 15 13:47:54 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 15 Apr 2014 22:47:54 +0200
Subject: [gdal-dev] OCI driver and setting the client encoding
In-Reply-To: <loom.20120920T192958-809@post.gmane.org>
References: <loom.20120919T123448-198@post.gmane.org>
	<20120920143010.22594.qmail@s466.sureserver.com>
	<loom.20120920T192958-809@post.gmane.org>
Message-ID: <CA+Ei1OfSgTfKKOEwLmYdDJUnpFF-wy=hg+y5APgiK-uP5DU8ng@mail.gmail.com>

Hi,

2012-09-20 20:06 GMT+02:00 Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:
>> So, if I understood it, you are using ogr2ogr in a Finnins-Finland
> Windows locale but Oracle is set for
>> american.america and the OGR/OCI driver doesn't make the distinction
> automatically.

I had similar problem, I noticed that with Oracle 11g EX works with

set NLS_LANG=american_america.UTF8

(note an underscore, not a dot). Are you sure that your syntax is
correct? It can be that Oracle is changing it on its own.

It would be really helpful to document it on driver page. I will try
to put there at least a small note about that in the next days. Martin

From landa.martin at gmail.com  Tue Apr 15 14:03:49 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 15 Apr 2014 23:03:49 +0200
Subject: [gdal-dev] [EXTERNAL]  ogr oracle unable to create index
In-Reply-To: <CF731227.EDDC8%michael.smith@erdc.dren.mil>
References: <CA+Ei1OdhrC+n3=w4yRGv_n7KyaZciiZgBdv+1w+gPQjc5qcTWA@mail.gmail.com>
	<CF731227.EDDC8%michael.smith@erdc.dren.mil>
Message-ID: <CA+Ei1OeLsMO5nPbL8GmqemwBJG9G9NgQMta+t-Vq66qH4fA9Ww@mail.gmail.com>

Hi,

2014-04-15 22:44 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
<Michael.Smith at erdc.dren.mil>:
> The error indicates that there already is an index by that name. If you
> drop the index manually, then the spatial index will get created.

it doesn't seems to be like that...

drop index obce_idx
Error report -
SQL Error: ORA-01418: specified index does not exist
01418. 00000 -  "specified index does not exist"
*Cause:
*Action:

Martin

From landa.martin at gmail.com  Tue Apr 15 14:43:13 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 15 Apr 2014 23:43:13 +0200
Subject: [gdal-dev] ogr oracle multiple geometries
Message-ID: <CA+Ei1Oc+9maBka9mLAfDqjBSQGT0AhfomNOAN82whXkf6xfihQ@mail.gmail.com>

Hi,

when importing my testing GML file to Oracle DB I discovered that
layers with multiple geometries are not handled by OCI driver
correctly - only first geometry is converted to DB. When I tried PG on
Linux, I got tables with multiple geometry columns but not in the
Oracle. Does anyone have such experience?

Thanks in advance, Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Tue Apr 15 15:29:29 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Apr 2014 00:29:29 +0200
Subject: [gdal-dev] ogr oracle multiple geometries
In-Reply-To: <CA+Ei1Oc+9maBka9mLAfDqjBSQGT0AhfomNOAN82whXkf6xfihQ@mail.gmail.com>
References: <CA+Ei1Oc+9maBka9mLAfDqjBSQGT0AhfomNOAN82whXkf6xfihQ@mail.gmail.com>
Message-ID: <201404160029.29587.even.rouault@mines-paris.org>

Le mardi 15 avril 2014 23:43:13, Martin Landa a ?crit :
> Hi,
> 
> when importing my testing GML file to Oracle DB I discovered that
> layers with multiple geometries are not handled by OCI driver
> correctly - only first geometry is converted to DB. When I tried PG on
> Linux, I got tables with multiple geometry columns but not in the
> Oracle. Does anyone have such experience?

This is expected. I don't know if Oracle supports multiple geometry columns at 
all, but even if it does, nobody has upgraded yet the driver to RFC 41.

> 
> Thanks in advance, Martin

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Apr 15 15:42:54 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Apr 2014 00:42:54 +0200
Subject: [gdal-dev] Questions about building 1.11.0beta1 on Windows
In-Reply-To: <CAE=8kmk-0CaCfen8BTLFY4YVxAzWxy+i+dNNhO0WipYmUJK9jA@mail.gmail.com>
References: <CAE=8kmk-0CaCfen8BTLFY4YVxAzWxy+i+dNNhO0WipYmUJK9jA@mail.gmail.com>
Message-ID: <201404160042.54603.even.rouault@mines-paris.org>

Le mardi 15 avril 2014 17:11:02, Carl Godkin a ?crit :
> Hi,
> 
> I tried out 1.11.0beta1 yesterday and today and everything I have tried
> seems fine to me on Win64.
> 
> I have two small questions:
> 
> 1. I really like the change in the Windows build procedure that introduces
> the "nmake.local" include in which I can put many of my growing collection
> of local edits.  I say "many" instead of "all" because I don't see how to
> effectively "comment out" a makefile variable using the nmake.local method.
> 
> For instance, I want to build without ODBC support.  The nmake.opt file
> contains the instruction
> 
> # Comment out the following to disable ODBC support.
> ODBC_SUPPORTED = 1
> 
> Can anyone think of a way to undo the ODBC_SUPPORTED definition
> (on by default) from nmake.local?  The variable is later checked in three
> places with "!IFDEF ODBC_SUPPORTED" so changing its value won't work, not
> to mention that the nmake.local inclusion comes before ODBC_SUPPORTED
> definition.

It would probably be a matter of changing that to something like

!IFNDEF ODBC_SUPPORTED
ODBC_SUPPORTED = 1
!ELSE
!IF "$(ODBC_SUPPORTED)" != "1"
ODBC_SUPPORTED  =
!ENDIF
!ENDIF

That way if nothing is specified in nmake.local, it would default to 
ODBC_SUPPORTED=1 as currently. And if you define it to 0 in nmake.local, it 
would be disabled.

Completely untested...

> 
> 2. When building on Win64, I always notice lots of warnings (C4244 and
> C4267) that arise because of implicit conversions from (say) size_t to int.
>  I was wondering why many open source projects (including GDAL) don't seem
> to fix these - is it because the necessary casts make the code less
> readable in someone's opinion?  Or is it just because no one has gotten
> around to it?  If it's the latter, I would be willing to submit a ticket
> with some patches.  It seems a pity to build with /W4 but put up with so
> many warnings.

Yes, I guess correcting warnings is not very fun. You can try to fix them and 
submit a patch, but be careful that automatic casting is not always the most 
appropriate fix for a warning. Sometimes it is just a sign that the target type 
should be fixed. It would be good if you can also separate a patch to GDAL own 
code, from patches to imported external libraries in the GDAL source tree 
(libtiff, libgeotiff, libpng, libjpeg, giflib, degrib, etc..). For the later 
ones, the fixes should be submitted first to the upstream projects.

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Apr 15 16:14:30 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Apr 2014 01:14:30 +0200
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <534BEDA9.8050403@f2e.de>
References: <534BEDA9.8050403@f2e.de>
Message-ID: <201404160114.30370.even.rouault@mines-paris.org>

Le lundi 14 avril 2014 16:16:09, Nicole Stoffels a ?crit :
> Dear Gdal-List,
> 
> I have a large ASTER file (downloaded from
> http://www.eea.europa.eu/data-and-maps/data/eu-dem#tab-european-data) in
> the GeoTIFF-format. It is compressed with LZW. What I want to do is:
> 
> 1. unpack it
> 2. seperate a smaller region from it
> 3. convert this regional GeoTIFF to a PNG

I've downloaded the file and it contains only "nan" (not a number) values. So 
nothing wrong with GDAL. It is just a tile that is at the border of the whole 
dataset and has no useful data in it.

If you look at the coordinates :

Upper Left  ( 6000000.000, 5000000.000) ( 46d 5'30.86"E, 64d 4'23.83"N)
Lower Left  ( 6000000.000, 4000000.000) ( 37d47' 0.49"E, 56d 7'28.33"N)
Upper Right ( 7000000.000, 5000000.000) ( 61d24'37.34"E, 58d45'47.24"N)
Lower Right ( 7000000.000, 4000000.000) ( 51d32'27.75"E, 51d55'27.24"N)
Center      ( 6500000.000, 4500000.000) ( 49d 5'19.45"E, 58d 0'56.34"N)

The center is ~ N 58 E 49, and Moscow is ~ N 55 E 37, so you're definitely 
outside European Union...

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From Michael.Smith at erdc.dren.mil  Tue Apr 15 17:05:13 2014
From: Michael.Smith at erdc.dren.mil (Smith, Michael ERDC-RDE-CRREL-NH)
Date: Wed, 16 Apr 2014 00:05:13 +0000
Subject: [gdal-dev] [EXTERNAL] Re:  ogr oracle multiple geometries
In-Reply-To: <201404160029.29587.even.rouault@mines-paris.org>
References: <CA+Ei1Oc+9maBka9mLAfDqjBSQGT0AhfomNOAN82whXkf6xfihQ@mail.gmail.com>
	<201404160029.29587.even.rouault@mines-paris.org>
Message-ID: <CF734163.EDDF2%michael.smith@erdc.dren.mil>

Oracle does support multiple geometry columns per table.

Mike

On 4/15/14, 6:29 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

>Le mardi 15 avril 2014 23:43:13, Martin Landa a ?crit :
>> Hi,
>> 
>> when importing my testing GML file to Oracle DB I discovered that
>> layers with multiple geometries are not handled by OCI driver
>> correctly - only first geometry is converted to DB. When I tried PG on
>> Linux, I got tables with multiple geometry columns but not in the
>> Oracle. Does anyone have such experience?
>
>This is expected. I don't know if Oracle supports multiple geometry
>columns at 
>all, but even if it does, nobody has upgraded yet the driver to RFC 41.
>
>> 
>> Thanks in advance, Martin
>
>-- 
>Geospatial professional services
>http://even.rouault.free.fr/services.html
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jr.morreale at enoreth.net  Tue Apr 15 23:22:38 2014
From: jr.morreale at enoreth.net (Jean-Roc Morreale)
Date: Wed, 16 Apr 2014 08:22:38 +0200
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <534D728C.2060509@ualg.pt>
References: "\"<534BEDA9.8050403@f2e.de>	<CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>"
	<534D135C.2000800@f2e.de>"
	<CAMKgpOZjvDC8vMFn1Yme5CnD8T+L0trE3=kpp15UQ1+ei7o0Qw@mail.gmail.com>
	<534D4768.1070207@f2e.de> <534D6FD5.90707@enoreth.net>
	<534D728C.2060509@ualg.pt>
Message-ID: <4d460e74536ceeb8fbec2761b98f6b99@enoreth.net>

EUDEM is an "hybrid product based on SRTM and ASTER GDEM data fused by a 
weighted averaging approach"

Le 2014-04-15 19:55, Joaquim Luis a ?crit?:
> but the ASTER grids have lower real resolution than the SRTM (despite
> being distributed as 1 arc sec grids) and the later are originally
> int16 , so scaling to 2 bytes ints should be OK.

From vincent.mora at oslandia.com  Wed Apr 16 03:46:45 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Wed, 16 Apr 2014 12:46:45 +0200
Subject: [gdal-dev] simplifying height contours
Message-ID: <534E5F95.8050609@oslandia.com>

Hi,

I have a vector file with height contours and I need to simplify the 
lines (too many points).

Isolevel lines must not intersect, so simplifying the vector directly is 
a bit tedious (involves collision detection of lines to constrain 
simplification).

If I had the DEM, I could reduce the resolution and use 
gdal_countour...but I don't.

So what about generating the DEM from the height contours? Do you think 
it fits in gdal somewhere ? Has someone the same kind of use-case ?

V.



From landa.martin at gmail.com  Wed Apr 16 04:16:16 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 16 Apr 2014 13:16:16 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1Od_cW52PgHK-eL+bRxXrx9cgJJGKm2kuqYP=3f+xafLig@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<1395162283.53287cabd2f8c@imp.free.fr>
	<loom.20140318T225118-104@post.gmane.org>
	<201403191117.35453.even.rouault@mines-paris.org>
	<CA+Ei1Od_cW52PgHK-eL+bRxXrx9cgJJGKm2kuqYP=3f+xafLig@mail.gmail.com>
Message-ID: <CA+Ei1OcZGVcwJg8HnvL5FWf5LEmL3e9SNTKuYc9srVRCr+J6rA@mail.gmail.com>

Hi,

2014-04-05 12:36 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> First is related to GML registry. The input file contains different
> layers based on its internal type (TypSouboru). For each of these
> types are prepared separated GFS file.
>
>     <!-- Czech VFR schame-->
>     <namespace prefix="vf"
>                uri="urn:cz:isvs:ruian:schemas:VymennyFormatTypy:v1
> ../ruian/xsd/vymenny_format/VymennyFormatTypy.xsd"
>                useGlobalSRSName="true">
>         <featureType elementName="TypSouboru"
>                      elementValue="OB_UKSH"
>                      gfsSchemaLocation="vfr_ob_uksh_v1.gfs"/>
>         <featureType elementName="TypSouboru"
>                      elementValue="ST_UKSH"
>                      gfsSchemaLocation="vfr_st_uksh_v1.gfs"/>
>         <featureType elementName="TypSouboru"
>                      elementValue="ST_UKSG"
>                      gfsSchemaLocation="vfr_st_uksg_v1.gfs"/>
>     </namespace>

I am closer to commit support for this format to SVN (GFS files).
Feature geometry (definicni bod - centroid, originalnihranice -
original boundary and generalizovanehranice - geneneralized
boundaries) differs based on the file type (eg. ST_UKSG x ST_UKSH). To
avoid redundancy (separate GFS for each file type) I created two files
- one for ST and OB major file types (they contains different layers -
vrstva), see [1]. Currently some of classes have three geometry
columns (definicnibod, originalnihranice and generalizovanahranice)
which is not elegant but works.

I was thinking to change featureType logic in the sense that only one
GFS (ruain_v1.gfs) file would be needed. Then you would list GML
feature classes manually and define also properties which should be
ignored, eg.

       <featureType elementName="TypSouboru"
                     elementValue="OB_UKSH"
                     gfsSchemaLocation="ruain_v1.gfs">
          <GMLFeatureClassList>
            <GMLFeatureClass>
              <Name>Obce</Name>
              <PropertyIgnored>
                <ElementPath>Geometrie|GeneralizovaneHranice5</ElementPath>
              </PropertyIgnored>
            </GMLFeatureClass>
            <GMLFeatureClass>CastiObci</GMLFeatureClass>
            <GMLFeatureClass>KatastralniUzemi</GMLFeatureClass>
             <PropertyIgnored>
                <ElementPath>Geometrie|GeneralizovaneHranice4<ElementPath>
              </PropertyIgnored>
            <GMLFeatureClass>Zsj</GMLFeatureClass>
             <PropertyIgnored>
                <ElementPath>Geometrie|GeneralizovaneHranice4</ElementPath>
              </PropertyIgnored>
            <GMLFeatureClass>Ulice</GMLFeatureClass>
            <GMLFeatureClass>Parcely</GMLFeatureClass>
             <PropertyIgnored>
                <ElementPath>Geometrie|GeneralizovaneHranice3</ElementPath>
              </PropertyIgnored>
            <GMLFeatureClass>StavebniObjekty</GMLFeatureClass>
             <PropertyIgnored>
                <ElementPath>Geometrie|GeneralizovaneHranice2</ElementPath>
              </PropertyIgnored>
            <GMLFeatureClass>AdresniMista</GMLFeatureClass>
          </GMLFeatureClassList>
        </featureType>
      </featureType>

In this case OGR would report layers Obce, ..., AdresniMista (so
subset of major GFS file), Obce would define only two geometries
(DefinicniBod and OriginalniHranice). Similarly for OB_UKSG only
DefinicniBod and GeneralizovaneHranice.

What do you think? Martin

[1] http://geo.fsv.cvut.cz/freegis/RUIAN#Knihovna_OGR (in Czech, but
tables should be understandable)

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From jluis at ualg.pt  Wed Apr 16 04:24:04 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 16 Apr 2014 12:24:04 +0100
Subject: [gdal-dev] Problems with large ASTER GeoTIFF
In-Reply-To: <4d460e74536ceeb8fbec2761b98f6b99@enoreth.net>
References: "\"<534BEDA9.8050403@f2e.de>	<CA+TxYvN_Y8k+cDj6Kz8O+OTVH5G+CC7cEMTJEpGxazxPUskU=A@mail.gmail.com>"
	<534D135C.2000800@f2e.de>"
	<CAMKgpOZjvDC8vMFn1Yme5CnD8T+L0trE3=kpp15UQ1+ei7o0Qw@mail.gmail.com>
	<534D4768.1070207@f2e.de> <534D6FD5.90707@enoreth.net>
	<534D728C.2060509@ualg.pt>
	<4d460e74536ceeb8fbec2761b98f6b99@enoreth.net>
Message-ID: <534E6854.6090406@ualg.pt>

Thanks, did not know that. But since both products were originally 2 
bytes ints, the mix can also be scaled to 2 bytes without loss of 
original precision.

> EUDEM is an "hybrid product based on SRTM and ASTER GDEM data fused by 
> a weighted averaging approach"
>
> Le 2014-04-15 19:55, Joaquim Luis a ?crit :
>> but the ASTER grids have lower real resolution than the SRTM (despite
>> being distributed as 1 arc sec grids) and the later are originally
>> int16 , so scaling to 2 bytes ints should be OK.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Apr 16 04:27:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Apr 2014 13:27:43 +0200
Subject: [gdal-dev] GML / NAS code redundancy
In-Reply-To: <CA+Ei1OcZGVcwJg8HnvL5FWf5LEmL3e9SNTKuYc9srVRCr+J6rA@mail.gmail.com>
References: <CA+Ei1Odz4X3u4bMAL-mvB2knMrBY=EtHQHaD=9TFXFstMODi9g@mail.gmail.com>
	<CA+Ei1Od_cW52PgHK-eL+bRxXrx9cgJJGKm2kuqYP=3f+xafLig@mail.gmail.com>
	<CA+Ei1OcZGVcwJg8HnvL5FWf5LEmL3e9SNTKuYc9srVRCr+J6rA@mail.gmail.com>
Message-ID: <201404161327.43492.even.rouault@mines-paris.org>

Le mercredi 16 avril 2014 13:16:16, Martin Landa a ?crit :
> Hi,
> 
> 2014-04-05 12:36 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> > First is related to GML registry. The input file contains different
> > layers based on its internal type (TypSouboru). For each of these
> > types are prepared separated GFS file.
> > 
> >     <!-- Czech VFR schame-->
> >     <namespace prefix="vf"
> >     
> >                uri="urn:cz:isvs:ruian:schemas:VymennyFormatTypy:v1
> > 
> > ../ruian/xsd/vymenny_format/VymennyFormatTypy.xsd"
> > 
> >                useGlobalSRSName="true">
> >         
> >         <featureType elementName="TypSouboru"
> >         
> >                      elementValue="OB_UKSH"
> >                      gfsSchemaLocation="vfr_ob_uksh_v1.gfs"/>
> >         
> >         <featureType elementName="TypSouboru"
> >         
> >                      elementValue="ST_UKSH"
> >                      gfsSchemaLocation="vfr_st_uksh_v1.gfs"/>
> >         
> >         <featureType elementName="TypSouboru"
> >         
> >                      elementValue="ST_UKSG"
> >                      gfsSchemaLocation="vfr_st_uksg_v1.gfs"/>
> >     
> >     </namespace>
> 
> I am closer to commit support for this format to SVN (GFS files).
> Feature geometry (definicni bod - centroid, originalnihranice -
> original boundary and generalizovanehranice - geneneralized
> boundaries) differs based on the file type (eg. ST_UKSG x ST_UKSH). To
> avoid redundancy (separate GFS for each file type) I created two files
> - one for ST and OB major file types (they contains different layers -
> vrstva), see [1]. Currently some of classes have three geometry
> columns (definicnibod, originalnihranice and generalizovanahranice)
> which is not elegant but works.
> 
> I was thinking to change featureType logic in the sense that only one
> GFS (ruain_v1.gfs) file would be needed. Then you would list GML
> feature classes manually and define also properties which should be
> ignored, eg.
> 
>        <featureType elementName="TypSouboru"
>                      elementValue="OB_UKSH"
>                      gfsSchemaLocation="ruain_v1.gfs">
>           <GMLFeatureClassList>
>             <GMLFeatureClass>
>               <Name>Obce</Name>
>               <PropertyIgnored>
>                 <ElementPath>Geometrie|GeneralizovaneHranice5</ElementPath>
>               </PropertyIgnored>
>             </GMLFeatureClass>
>             <GMLFeatureClass>CastiObci</GMLFeatureClass>
>             <GMLFeatureClass>KatastralniUzemi</GMLFeatureClass>
>              <PropertyIgnored>
>                 <ElementPath>Geometrie|GeneralizovaneHranice4<ElementPath>
>               </PropertyIgnored>
>             <GMLFeatureClass>Zsj</GMLFeatureClass>
>              <PropertyIgnored>
>                 <ElementPath>Geometrie|GeneralizovaneHranice4</ElementPath>
>               </PropertyIgnored>
>             <GMLFeatureClass>Ulice</GMLFeatureClass>
>             <GMLFeatureClass>Parcely</GMLFeatureClass>
>              <PropertyIgnored>
>                 <ElementPath>Geometrie|GeneralizovaneHranice3</ElementPath>
>               </PropertyIgnored>
>             <GMLFeatureClass>StavebniObjekty</GMLFeatureClass>
>              <PropertyIgnored>
>                 <ElementPath>Geometrie|GeneralizovaneHranice2</ElementPath>
>               </PropertyIgnored>
>             <GMLFeatureClass>AdresniMista</GMLFeatureClass>
>           </GMLFeatureClassList>
>         </featureType>
>       </featureType>
> 
> In this case OGR would report layers Obce, ..., AdresniMista (so
> subset of major GFS file), Obce would define only two geometries
> (DefinicniBod and OriginalniHranice). Similarly for OB_UKSG only
> DefinicniBod and GeneralizovaneHranice.
> 
> What do you think? Martin

Martin,

I'm personaly not a big fan of that approach. It looks a bit odd to work with 
exclusion mechanisms, and this means additional source code to write, debug 
and maintain, whereas there is already a working solution with the .gfs files, 
even if there's some redundancy between them.

If you really want to avoid redundancy while steal having only the relevant 
attributes for each feature type, another option would be to add <xi:include> 
( cf http://en.wikipedia.org/wiki/XInclude , http://www.w3.org/TR/xinclude/ ) 
support in the parsing of .gfs files so as to be able to define a common .gfs 
shared by 2 feature types .gfs. Would be more standard.

Even

> 
> [1] http://geo.fsv.cvut.cz/freegis/RUIAN#Knihovna_OGR (in Czech, but
> tables should be understandable)

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Apr 16 05:34:06 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Apr 2014 14:34:06 +0200
Subject: [gdal-dev] simplifying height contours
In-Reply-To: <534E5F95.8050609@oslandia.com>
References: <534E5F95.8050609@oslandia.com>
Message-ID: <201404161434.06600.even.rouault@mines-paris.org>

Le mercredi 16 avril 2014 12:46:45, Vincent Mora a ?crit :
> Hi,
> 
> I have a vector file with height contours and I need to simplify the
> lines (too many points).
> 
> Isolevel lines must not intersect, so simplifying the vector directly is
> a bit tedious (involves collision detection of lines to constrain
> simplification).
> 
> If I had the DEM, I could reduce the resolution and use
> gdal_countour...but I don't.
> 
> So what about generating the DEM from the height contours? Do you think
> it fits in gdal somewhere ? Has someone the same kind of use-case ?

It already exists in fact:

- gdal_rasterize : will produce a DEM with the contour line stroked, and with 
holes between them
- gdal_fillnodata.py : will fill the holes with interpolated values

> 
> V.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From vincent.mora at oslandia.com  Wed Apr 16 05:42:37 2014
From: vincent.mora at oslandia.com (Vincent Mora)
Date: Wed, 16 Apr 2014 14:42:37 +0200
Subject: [gdal-dev] simplifying height contours
In-Reply-To: <201404161434.06600.even.rouault@mines-paris.org>
References: <534E5F95.8050609@oslandia.com>
	<201404161434.06600.even.rouault@mines-paris.org>
Message-ID: <534E7ABD.20303@oslandia.com>

On 16/04/2014 14:34, Even Rouault wrote:
> Le mercredi 16 avril 2014 12:46:45, Vincent Mora a ?crit :
>> Hi,
>>
>> I have a vector file with height contours and I need to simplify the
>> lines (too many points).
>>
>> Isolevel lines must not intersect, so simplifying the vector directly is
>> a bit tedious (involves collision detection of lines to constrain
>> simplification).
>>
>> If I had the DEM, I could reduce the resolution and use
>> gdal_countour...but I don't.
>>
>> So what about generating the DEM from the height contours? Do you think
>> it fits in gdal somewhere ? Has someone the same kind of use-case ?
> It already exists in fact:
>
> - gdal_rasterize : will produce a DEM with the contour line stroked, and with
> holes between them
> - gdal_fillnodata.py : will fill the holes with interpolated values
>
Thanks a lot, I found gdal_grid in the meantime which also seems to do 
the job but I'm not sure how it samples line, maybe it uses rasterize 
internally, I'll have a look.
>> V.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Apr 16 07:00:46 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Apr 2014 16:00:46 +0200
Subject: [gdal-dev] ReprojectImage and nodata
In-Reply-To: <CAK4m-3wTORzvyPRYAsaArJ7Vr5_67d00rtLEPOZAt7G-Wiex3Q@mail.gmail.com>
References: <CAK4m-3wTORzvyPRYAsaArJ7Vr5_67d00rtLEPOZAt7G-Wiex3Q@mail.gmail.com>
Message-ID: <201404161600.47151.even.rouault@mines-paris.org>

Le mardi 15 avril 2014 11:11:36, Luca Delucchi a ?crit :
> I everybody,
> 
> I'm using Python ReprojectImage function to reproject some images but
> there is no way to assign nodata value.

Calling

dst_ds.GetRasterBand(X).SetNoDataValue(nv)
dst_ds.GetRasterBand(X).Fill(nv)

before gdal.ReprojectImage() should do what you want.

> 
> There was already a request for help about one year ago [0], there are
> some news?
> Otherwise could I open a ticket? is it a bug or enhancement?
> 
> Thanks a lot for any hints
> 
> [0]
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-ReprojectImage-and-nodata-td5
> 057270.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From giuseppe.amatulli at gmail.com  Wed Apr 16 07:27:51 2014
From: giuseppe.amatulli at gmail.com (Giuseppe Amatulli)
Date: Wed, 16 Apr 2014 10:27:51 -0400
Subject: [gdal-dev] MODIS re-projection issues (gdalwarp -tps)
Message-ID: <CAKoiDH+87U+P0p7ckzOD_u5hM=kog5eYc3Nh-v4oZpBfZQgV0Q@mail.gmail.com>

Hi,
I'm encountering a re-projection issues with several MODIS files stored as
hdf and having GCP attached when convert to tif.
In particular i'm working with files stored at
ftp://ladsweb.nascom.nasa.gov/allData/6/MYD04_3K/
The re-projection issues appear only in files which store GCP in the
extreme of east and west coordinates (e.g -176 , +173  ; -178 , +179 )

You can directly download and process the files with the following lines
These files have already lat-long assignment, indeed the GCP appear as
lat-long and not as sinusoidal.

# file with correct re-projection

wget
ftp://ladsweb.nascom.nasa.gov/allData/6/MYD04_3K/2002/185/MYD04_3K.A2002185.0255.006.2013356131116.hdf

gdal_translate -b 2   -a_srs EPSG:4326
HDF4_EOS:EOS_SWATH:"MYD04_3K.A2002185.0255.006.2013356131116.hdf":mod04:Corrected_Optical_Depth_Land
MYD04_3K.A2002185.0255.006.2013356131116_Aerosol_Optical_Depth.tif
gdalwarp  -co  COMPRESS=LZW  -co ZLEVEL=9   -srcnodata -9999 -dstnodata
-9999 -of GTIFF -tps -t_srs EPSG:4326   -overwrite
MYD04_3K.A2002185.0255.006.2013356131116_Aerosol_Optical_Depth.tif
MYD04_3K.A2002185.0255.006.2013356131116_Aerosol_Optical_Depth_tw.tif

# file with correct re-projection

wget
ftp://ladsweb.nascom.nasa.gov/allData/6/MYD04_3K/2002/185/MYD04_3K.A2002185.0410.006.2013356131547.hdf
gdal_translate -b 2   -a_srs EPSG:4326
HDF4_EOS:EOS_SWATH:"MYD04_3K.A2002185.0410.006.2013356131547.hdf":mod04:Corrected_Optical_Depth_Land
MYD04_3K.A2002185.0410.006.2013356131547_Aerosol_Optical_Depth.tif
gdalwarp  -co  COMPRESS=LZW  -co ZLEVEL=9   -srcnodata -9999 -dstnodata
-9999 -of GTIFF -tps -t_srs EPSG:4326   -overwrite
MYD04_3K.A2002185.0410.006.2013356131547_Aerosol_Optical_Depth.tif
MYD04_3K.A2002185.0410.006.2013356131547_Aerosol_Optical_Depth_tw.tif

# file with not correct re-projection

wget
ftp://ladsweb.nascom.nasa.gov/allData/6/MYD04_3K/2002/185/MYD04_3K.A2002185.0120.006.2013356130920.hdf
gdal_translate -b 2   -a_srs EPSG:4326
HDF4_EOS:EOS_SWATH:"MYD04_3K.A2002185.0120.006.2013356130920.hdf":mod04:Corrected_Optical_Depth_Land
MYD04_3K.A2002185.0120.006.2013356130920_Aerosol_Optical_Depth.tif
gdalwarp  -co  COMPRESS=LZW  -co ZLEVEL=9   -srcnodata -9999 -dstnodata
-9999 -of GTIFF -tps -t_srs EPSG:4326   -overwrite
MYD04_3K.A2002185.0120.006.2013356130920_Aerosol_Optical_Depth.tif
MYD04_3K.A2002185.0120.006.2013356130920_Aerosol_Optical_Depth_tw.tif

openev *_Aerosol_Optical_Depth_tw.tif
or
qgis *_Aerosol_Optical_Depth_tw.tif

The problem appear because the file
MYD04_3K.A2002185.0120.006.2013356130920_Aerosol_Optical_Depth.tif is
stretch in the longitude direction to allows the -long to go to west and
+long to go to the est.

gdalinfo
MYD04_3K.A2002185.0120.006.2013356130920_Aerosol_Optical_Depth.tif  | grep
COORDINATE
  EASTBOUNDINGCOORDINATE=-159.569928338522         # this correspond to
the  left part of the image
  NORTHBOUNDINGCOORDINATE=82.1907920741757
  SOUTHBOUNDINGCOORDINATE=58.0763940337017
  WESTBOUNDINGCOORDINATE=115.314065119164         # this correspond to the
right part of the image


Is there is a way to solve this problem?
I think that, cut the image considering the -180 +180 transition would
solve the problem but has to be cut at GCP level and i do not have any clue
how to do it.

or there are alternative sw which can be used (MRT and MRTswath are not
useful for this kind of data )?
Thanks in advance
Best

-- 
Giuseppe Amatulli, Ph.D.

Center for Earth Observation
ESC Room 119A
Yale University
P.O. Box 208109
New Haven, CT, 06520-8109
Teaching: spatial-ecology.net
Work:  http://sbsc.yale.edu/giuseppe-amatulli
<http://www.spatial-ecology.net>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140416/9d729bbd/attachment-0001.html>

From landa.martin at gmail.com  Wed Apr 16 10:17:31 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 16 Apr 2014 19:17:31 +0200
Subject: [gdal-dev] ogr2ogr -f OCI fails on Windows
Message-ID: <CA+Ei1OfSQykhiArHV-UUSJYSCMb8exvd8+9vDNfV4D29EYVsqw@mail.gmail.com>

Hi all,

when trying to convert selected GML layer to Oracle spatial

ogr2ogr -f OCI oci:user/passwd data\20140331_OB_564729_UKSH.xml.gz
StavebniObjekty -overwrite -lco srid=2065

the command fails with

Podpis probl?mu:
  N?zev ud?losti probl?mu:    APPCRASH
  N?zev aplikace:    ogr2ogr.exe
  Verze aplikace:    0.0.0.0
  ?asov? raz?tko aplikace:    534e730f
  N?zev chybn?ho modulu:    kernel32.dll
  Verze chybn?ho modulu:    6.0.6002.19034
  ?asov? raz?tko chybn?ho modulu:    52f2ecb1
  K?d v?jimky:    c0000005
  Posun v?jimky:    0001e743
  Verze opera?n?ho syst?mu:    6.0.6002.2.2.0.274.10
  ID n?rodn?ho prost?ed?:    1029
  Dal?? informace 1:    f931
  Dal?? informace 2:    90179027e379dba7ee23240ddb71d080
  Dal?? informace 3:    aad6
  Dal?? informace 4:    c968bb9711c76b26ad52f41a001dfb9d

Debug:

Warning 6: Can't create field DetailniTEAKod with type IntegerList on
Oracle layers.  Creating as VARCHAR.
OCI: Prepare(ALTER TABLE STAVEBNIOBJEKTY ADD "DetailniTEAKod" VARCHAR(2047))
GML: ResetReading()
GML: ResetReading()
OCI: Prepare(INSERT INTO
"STAVEBNIOBJEKTY"("OGR_FID","gml_id","Kod","Nespravny","CisloDomovni","IdentifikacniParcelaId","TypStavebnihoObjektuKod","ZpusobVyuzitiKod","CastObceK
od","MomcKod","PlatiOd","PlatiDo","IdTransakce","GlobalniIdNavrhuZmeny","IsknBudovaId","Dokonceni","DruhKonstrukceKod","ObestavenyProstor","PocetBytu","PocetPodlazi","Podlahov
aPlocha","PripojeniKanalizaceKod","PripojeniPlynKod","PripojeniVodovodKod","VybaveniVytahemKod","ZastavenaPlocha","ZpusobVytapeniKod","ZpusobOchranyKod","ZpusobOchranyTypOchra
nyKod","ZpusobOchranyIdTransakce","ZpusobOchranyRizeniId","DetailniTEAKod")
VALUES ( :fid ,  :field_0,  :field_1,  :field_2,  :field_3,  :field_4,
 :field_5,  :field_6,  :fiel
d_7,  :field_8,  :field_9,  :field_10,  :field_11,  :field_12,
:field_13,  :field_14,  :field_15,  :field_16,  :field_17,  :field_18,
 :field_19,  :field_20,  :field_21,  :fi
eld_22,  :field_23,  :field_24,  :field_25,  :field_26,  :field_27,
:field_28,  :field_29,  :field_30) )
OCI: Prepare(SELECT MAX("OGR_FID") FROM "STAVEBNIOBJEKTY")

Any idea? Thanks in advance! Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From andre+joost at nurfuerspam.de  Wed Apr 16 10:22:02 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 16 Apr 2014 19:22:02 +0200
Subject: [gdal-dev] MODIS re-projection issues (gdalwarp -tps)
In-Reply-To: <CAKoiDH+87U+P0p7ckzOD_u5hM=kog5eYc3Nh-v4oZpBfZQgV0Q@mail.gmail.com>
References: <CAKoiDH+87U+P0p7ckzOD_u5hM=kog5eYc3Nh-v4oZpBfZQgV0Q@mail.gmail.com>
Message-ID: <lime91$e1i$1@ger.gmane.org>

Am 16.04.2014 16:27, schrieb Giuseppe Amatulli:

>
>
> Is there is a way to solve this problem?
> I think that, cut the image considering the -180 +180 transition would
> solve the problem but has to be cut at GCP level and i do not have any clue
> how to do it.
>

There are no GCP points in the file, but subdataset 51 and 52 contain 
longitude and latitude for every cell in WGS84.

You get those GCP if you export to VRT.

You can also try one of my solutions here:
http://gis.stackexchange.com/questions/81361/how-to-reproject-modis-swath-data-to-wgs84

Another choice is to load the longitude layer, create a contour line at 
180?, and clip the data layer to that.

HTH,
Andr? Joost


From lucena_ivan at hotmail.com  Wed Apr 16 10:33:32 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 16 Apr 2014 13:33:32 -0400
Subject: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010
Message-ID: <BLU173-W6B0101F04DC5BB28148F190530@phx.gbl>

Hi there,
 
The script "makegdal_gen.bat" on the root of GDAL folder was developed in 2007 and the intension was to create an usable Visual Studio "Makefile Project" with the GDAL source tree and commands to run GDAL makefile.vc.
 
An VS "Makefile Project" doesn't not store any compilation option like a regular Visual Studio C++ project, it just run the nmake command as you define. But can borse the source tree, use the the IDE tools for debugging and all the intelisense fancy stuff.
 
Since it still used the "nmake.opt" and the very smart "nmake.local" you can choose between build on the IDE or use the command line, with the same settings. If you have a simple C++ project you can't build with nmake, as far as I know.
 
The problem is that until VS 2010 your could still run the "makegdal_gen.bat" and use "Open Project" in Visual Studio and it would make changes and import the .vcproj file to the new VS Makefile project. 
 
But that doesn't work anymore. At least with VS 2012. After "Open Project" it does imports the .vcproj file but instead of a "Makefile" project, it creates an regular C++  project without importing the options from nmake.opt.
 
It might be possible to analize the new structure of a VS 2012 Makefile project and fix makegdal_gen.bat to generate an appropiate new profile files (.vcxproj, .vcxproj.filters, .vcxproj.user)
 
So if someone has the interest in taking that task, that would be great. I don't know if people even uses that thing, so we might be better off by drop it all together.
 
In the mean time we should also get rid of those old "makegdalNN.vcproj" from SVN. If someone need then, they can generate with makegdal_gen.bat and get an updated source code tree. 
 
I don't know who create the makegdal10{.sln,.vcproj.,vcproj.filters} that seems to be a hand-made C++ Project and that doesn't belong on that discussion.
 
Regards,
 
Ivan
 
 
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140416/01beaee0/attachment.html>

From yehil at rafael.co.il  Wed Apr 16 11:19:06 2014
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed, 16 Apr 2014 21:19:06 +0300
Subject: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0E521973149@MAILBOXSERVER.rf.local>


Hi all
As a developer on windows, I have never used the vs solutions. I didn't find any added value over using the make file directly.
The biggest step that I needed to overcome was the configuration of nmake.opt.
A big step to help windows programmers will be to add support for cmake. That will help configuring for windows as well linuxes android iOS etc.

Yehiyam Livneh

On Apr 16, 2014 9:05 PM, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
Hi there,

The script "makegdal_gen.bat" on the root of GDAL folder was developed in 2007 and the intension was to create an usable Visual Studio "Makefile Project" with the GDAL source tree and commands to run GDAL makefile.vc.

An VS "Makefile Project" doesn't not store any compilation option like a regular Visual Studio C++ project, it just run the nmake command as you define. But can borse the source tree, use the the IDE tools for debugging and all the intelisense fancy stuff.

Since it still used the "nmake.opt" and the very smart "nmake.local" you can choose between build on the IDE or use the command line, with the same settings. If you have a simple C++ project you can't build with nmake, as far as I know.

The problem is that until VS 2010 your could still run the "makegdal_gen.bat" and use "Open Project" in Visual Studio and it would make changes and import the .vcproj file to the new VS Makefile project.

But that doesn't work anymore. At least with VS 2012. After "Open Project" it does imports the .vcproj file but instead of a "Makefile" project, it creates an regular C++  project without importing the options from nmake.opt.

It might be possible to analize the new structure of a VS 2012 Makefile project and fix makegdal_gen.bat to generate an appropiate new profile files (.vcxproj, .vcxproj.filters, .vcxproj.user)

So if someone has the interest in taking that task, that would be great. I don't know if people even uses that thing, so we might be better off by drop it all together.

In the mean time we should also get rid of those old "makegdalNN.vcproj" from SVN. If someone need then, they can generate with makegdal_gen.bat and get an updated source code tree.

I don't know who create the makegdal10{.sln,.vcproj.,vcproj.filters} that seems to be a hand-made C++ Project and that doesn't belong on that discussion.

Regards,

Ivan




________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140416/55376ee2/attachment.html>

From even.rouault at mines-paris.org  Wed Apr 16 11:21:20 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Apr 2014 20:21:20 +0200
Subject: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010
In-Reply-To: <BLU173-W6B0101F04DC5BB28148F190530@phx.gbl>
References: <BLU173-W6B0101F04DC5BB28148F190530@phx.gbl>
Message-ID: <201404162021.21049.even.rouault@mines-paris.org>

> In the mean time we should also get rid of those old "makegdalNN.vcproj"
> from SVN.

Done. I've also got rid of the .sln and .vcxproj files.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Wed Apr 16 12:50:54 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 16 Apr 2014 15:50:54 -0400
Subject: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010
In-Reply-To: <C5D1974ECA44D2429ECBC64B967C34C0E521973149@MAILBOXSERVER.rf.local>
References: <C5D1974ECA44D2429ECBC64B967C34C0E521973149@MAILBOXSERVER.rf.local>
Message-ID: <BLU173-W1910C6E3C13FAFDC87F1D590530@phx.gbl>

Hi Yehiyam,
 
Yes, CMake could help. But it could hurt too. That was discussed here before and I don't do that.
 
The VS IDE is particularly useful if you are developing drivers in Windows environment, mostly because of the integrated debugger. There are also integrated tools to read file in hexadecimal, what is very useful if you need to debug a file format and a compression.
 
I usually don't touch the file nmake.opt. It's much easier to copy just the settings you need to a nmake.local file. By doing that you also don't need to merge your changes at everytime SVN update.
 
But thanks for your feedback. It seems like we really don't need to update makegdal_gen.bat. Good to know.
 
Thanks,
 
Ivan
 
From: yehil at rafael.co.il
To: lucena_ivan at hotmail.com
CC: gdal-dev at lists.osgeo.org
Date: Wed, 16 Apr 2014 21:19:06 +0300
Subject: Re: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010






Hi all

As a developer on windows, I have never used the vs solutions. I didn't find any added value over using the make file directly.

The biggest step that I needed to overcome was the configuration of nmake.opt. 

A big step to help windows programmers will be to add support for cmake. That will help configuring for windows as well linuxes android iOS etc.
Yehiyam Livneh


On Apr 16, 2014 9:05 PM, Ivan Lucena <lucena_ivan at hotmail.com> wrote:



Hi there,

 

The script "makegdal_gen.bat" on the root of GDAL folder was developed in 2007 and the intension was to create an usable Visual Studio "Makefile Project" with the GDAL source tree and commands to run GDAL makefile.vc.

 

An VS "Makefile Project" doesn't not store any compilation option like a regular Visual Studio C++ project, it just run the nmake command as you define. But can borse the source tree, use the the IDE tools for debugging and all the intelisense fancy stuff.

 

Since it still used the "nmake.opt" and the very smart "nmake.local" you can choose between build on the IDE or use the command line, with the same settings. If you have a simple C++ project you can't build with nmake, as far as I know.

 

The problem is that until VS 2010 your could still run the "makegdal_gen.bat" and use "Open Project" in Visual Studio and it would make changes and import the .vcproj file to the new VS Makefile project.


 

But that doesn't work anymore. At least with VS 2012. After "Open Project" it does imports the .vcproj file but instead of a "Makefile" project, it creates an regular C++  project without importing the options from nmake.opt.

 

It might be possible to analize the new structure of a VS 2012 Makefile project and fix makegdal_gen.bat to generate an appropiate new profile files (.vcxproj, .vcxproj.filters, .vcxproj.user)

 

So if someone has the interest in taking that task, that would be great. I don't know if people even uses that thing, so we might be better off by drop it all together.

 

In the mean time we should also get rid of those old "makegdalNN.vcproj" from SVN. If someone need then, they can generate with makegdal_gen.bat and get an updated source code tree.


 

I don't know who create the makegdal10{.sln,.vcproj.,vcproj.filters} that seems to be a hand-made C++ Project and that doesn't belong on that discussion.

 

Regards,

 

Ivan

 

 



________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof. 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140416/81d4c905/attachment.html>

From yehil at rafael.co.il  Wed Apr 16 13:07:32 2014
From: yehil at rafael.co.il (Livneh Yehiyam)
Date: Wed, 16 Apr 2014 23:07:32 +0300
Subject: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010
Message-ID: <C5D1974ECA44D2429ECBC64B967C34C0E52197314B@MAILBOXSERVER.rf.local>


Thanks Ivan
I didn't know about nmake.local. that's useful.
We do use VS for debugging and we have a cmd file for invoking nmake.

Yehiyam

On Apr 16, 2014 10:50 PM, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
Hi Yehiyam,

Yes, CMake could help. But it could hurt too. That was discussed here before and I don't do that.

The VS IDE is particularly useful if you are developing drivers in Windows environment, mostly because of the integrated debugger. There are also integrated tools to read file in hexadecimal, what is very useful if you need to debug a file format and a compression.

I usually don't touch the file nmake.opt. It's much easier to copy just the settings you need to a nmake.local file. By doing that you also don't need to merge your changes at everytime SVN update.

But thanks for your feedback. It seems like we really don't need to update makegdal_gen.bat. Good to know.

Thanks,

Ivan

________________________________
From: yehil at rafael.co.il
To: lucena_ivan at hotmail.com
CC: gdal-dev at lists.osgeo.org
Date: Wed, 16 Apr 2014 21:19:06 +0300
Subject: Re: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010



Hi all
As a developer on windows, I have never used the vs solutions. I didn't find any added value over using the make file directly.
The biggest step that I needed to overcome was the configuration of nmake.opt.
A big step to help windows programmers will be to add support for cmake. That will help configuring for windows as well linuxes android iOS etc.

Yehiyam Livneh

On Apr 16, 2014 9:05 PM, Ivan Lucena <lucena_ivan at hotmail.com> wrote:
Hi there,

The script "makegdal_gen.bat" on the root of GDAL folder was developed in 2007 and the intension was to create an usable Visual Studio "Makefile Project" with the GDAL source tree and commands to run GDAL makefile.vc.

An VS "Makefile Project" doesn't not store any compilation option like a regular Visual Studio C++ project, it just run the nmake command as you define. But can borse the source tree, use the the IDE tools for debugging and all the intelisense fancy stuff.

Since it still used the "nmake.opt" and the very smart "nmake.local" you can choose between build on the IDE or use the command line, with the same settings. If you have a simple C++ project you can't build with nmake, as far as I know.

The problem is that until VS 2010 your could still run the "makegdal_gen.bat" and use "Open Project" in Visual Studio and it would make changes and import the .vcproj file to the new VS Makefile project.

But that doesn't work anymore. At least with VS 2012. After "Open Project" it does imports the .vcproj file but instead of a "Makefile" project, it creates an regular C++  project without importing the options from nmake.opt.

It might be possible to analize the new structure of a VS 2012 Makefile project and fix makegdal_gen.bat to generate an appropiate new profile files (.vcxproj, .vcxproj.filters, .vcxproj.user)

So if someone has the interest in taking that task, that would be great. I don't know if people even uses that thing, so we might be better off by drop it all together.

In the mean time we should also get rid of those old "makegdalNN.vcproj" from SVN. If someone need then, they can generate with makegdal_gen.bat and get an updated source code tree.

I don't know who create the makegdal10{.sln,.vcproj.,vcproj.filters} that seems to be a hand-made C++ Project and that doesn't belong on that discussion.

Regards,

Ivan



________________________________________
This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.


________________________________________

This message (including any attachments) issued by RAFAEL- ADVANCED DEFENSE SYSTEMS LTD. (hereinafter "RAFAEL") contains confidential information intended for a specific individual and purpose, may constitute information that is privileged or confidential or otherwise protected from disclosure. If you are not the intended recipient, you should contact us immediately and thereafter delete this message from your system. You are hereby notified that any disclosure, copying, dissemination, distribution or forwarding of this message, or the taking of any action based on it, is strictly prohibited. If you have received this e-mail in error, please notify us immediately by e-mail mailto:lawraf at rafael.co.il and completely delete or destroy any and all electronic or other copies of the original message and any attachments thereof.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140416/5d3c867c/attachment.html>

From lucena_ivan at hotmail.com  Wed Apr 16 13:37:04 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 16 Apr 2014 16:37:04 -0400
Subject: [gdal-dev] ogr2ogr -f OCI fails on Windows
In-Reply-To: <CA+Ei1OfSQykhiArHV-UUSJYSCMb8exvd8+9vDNfV4D29EYVsqw@mail.gmail.com>
References: <CA+Ei1OfSQykhiArHV-UUSJYSCMb8exvd8+9vDNfV4D29EYVsqw@mail.gmail.com>
Message-ID: <BLU173-W132609D54781D1500D9BC790530@phx.gbl>

Hi Martin,
 
Could you try yo run that command in PLSQL before loading thata data?
 
SQL> ALTER SESSION SET NLS_LENGTH_SEMANTICS=CHAR;
 
And then ogr2ogr with -overwrite
 
$ ogr2ogr -f OCI oci:user/passwd data\20140331_OB_564729_UKSH.xml.gz -overwrite
 
Regards,
 
Ivan
 
> Date: Wed, 16 Apr 2014 19:17:31 +0200
> From: landa.martin at gmail.com
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] ogr2ogr -f OCI fails on Windows
> 
> Hi all,
> 
> when trying to convert selected GML layer to Oracle spatial
> 
> ogr2ogr -f OCI oci:user/passwd data\20140331_OB_564729_UKSH.xml.gz
> StavebniObjekty -overwrite -lco srid=2065
> 
> the command fails with
> 
> Podpis probl?mu:
>   N?zev ud?losti probl?mu:    APPCRASH
>   N?zev aplikace:    ogr2ogr.exe
>   Verze aplikace:    0.0.0.0
>   ?asov? raz?tko aplikace:    534e730f
>   N?zev chybn?ho modulu:    kernel32.dll
>   Verze chybn?ho modulu:    6.0.6002.19034
>   ?asov? raz?tko chybn?ho modulu:    52f2ecb1
>   K?d v?jimky:    c0000005
>   Posun v?jimky:    0001e743
>   Verze opera?n?ho syst?mu:    6.0.6002.2.2.0.274.10
>   ID n?rodn?ho prost?ed?:    1029
>   Dal?? informace 1:    f931
>   Dal?? informace 2:    90179027e379dba7ee23240ddb71d080
>   Dal?? informace 3:    aad6
>   Dal?? informace 4:    c968bb9711c76b26ad52f41a001dfb9d
> 
> Debug:
> 
> Warning 6: Can't create field DetailniTEAKod with type IntegerList on
> Oracle layers.  Creating as VARCHAR.
> OCI: Prepare(ALTER TABLE STAVEBNIOBJEKTY ADD "DetailniTEAKod" VARCHAR(2047))
> GML: ResetReading()
> GML: ResetReading()
> OCI: Prepare(INSERT INTO
> "STAVEBNIOBJEKTY"("OGR_FID","gml_id","Kod","Nespravny","CisloDomovni","IdentifikacniParcelaId","TypStavebnihoObjektuKod","ZpusobVyuzitiKod","CastObceK
> od","MomcKod","PlatiOd","PlatiDo","IdTransakce","GlobalniIdNavrhuZmeny","IsknBudovaId","Dokonceni","DruhKonstrukceKod","ObestavenyProstor","PocetBytu","PocetPodlazi","Podlahov
> aPlocha","PripojeniKanalizaceKod","PripojeniPlynKod","PripojeniVodovodKod","VybaveniVytahemKod","ZastavenaPlocha","ZpusobVytapeniKod","ZpusobOchranyKod","ZpusobOchranyTypOchra
> nyKod","ZpusobOchranyIdTransakce","ZpusobOchranyRizeniId","DetailniTEAKod")
> VALUES ( :fid ,  :field_0,  :field_1,  :field_2,  :field_3,  :field_4,
>  :field_5,  :field_6,  :fiel
> d_7,  :field_8,  :field_9,  :field_10,  :field_11,  :field_12,
> :field_13,  :field_14,  :field_15,  :field_16,  :field_17,  :field_18,
>  :field_19,  :field_20,  :field_21,  :fi
> eld_22,  :field_23,  :field_24,  :field_25,  :field_26,  :field_27,
> :field_28,  :field_29,  :field_30) )
> OCI: Prepare(SELECT MAX("OGR_FID") FROM "STAVEBNIOBJEKTY")
> 
> Any idea? Thanks in advance! Martin
> 
> -- 
> Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140416/0e7abcee/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Apr 16 14:11:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 16 Apr 2014 23:11:43 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for testing
Message-ID: <201404162311.43565.even.rouault@mines-paris.org>

Hi,

After one beta, the first release candidate for GDAL/OGR 1.11.0 is ready. 
Please test and report any problems promptly. Soon I will initiate a motion to 
declare this release candidate the final release and PSC members can vote on 
that after doing some checks themselves.

Source Code:
  http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0RC1.tar.xz
  http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0RC1.tar.xz.md5
  http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0RC1.tar.gz
  http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0RC1.tar.gz.md5
  http://download.osgeo.org/gdal/1.11.0/gdal1110RC1.zip
  http://download.osgeo.org/gdal/1.11.0/gdal1110RC1.zip.md5

Autotest Suite:
  http://download.osgeo.org/gdal/1.11.0/gdalautotest-1.11.0.tar.gz
  http://download.osgeo.org/gdal/1.11.0/gdalautotest-1.11.0.zip

Documentation:
  http://download.osgeo.org/gdal/1.11.0/gdal1110doc.zip

NEWS:
  http://svn.osgeo.org/gdal/tags/1.11.0/gdal/NEWS

There is now a 1.11 branch in SVN, so new development can continue on trunk.  
Any bug fixes needed for a new 1.11.0 release candidate must be applied in both 
1.11 branch and trunk.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From wolf+grass at bergenheim.net  Wed Apr 16 17:10:55 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Thu, 17 Apr 2014 02:10:55 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <201404162311.43565.even.rouault@mines-paris.org>
References: <201404162311.43565.even.rouault@mines-paris.org>
Message-ID: <CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>

I just added a critical fix gor the GME driver that I'd like to get in to
1.11, so I merged it to the 1.11 branch. Soo technically this might require
a new RC, sorry for that!


On Wed, Apr 16, 2014 at 11:11 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Hi,
>
> After one beta, the first release candidate for GDAL/OGR 1.11.0 is ready.
> Please test and report any problems promptly. Soon I will initiate a
> motion to
> declare this release candidate the final release and PSC members can vote
> on
> that after doing some checks themselves.
>
> Source Code:
>   http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0RC1.tar.xz
>   http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0RC1.tar.xz.md5
>   http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0RC1.tar.gz
>   http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0RC1.tar.gz.md5
>   http://download.osgeo.org/gdal/1.11.0/gdal1110RC1.zip
>   http://download.osgeo.org/gdal/1.11.0/gdal1110RC1.zip.md5
>
> Autotest Suite:
>   http://download.osgeo.org/gdal/1.11.0/gdalautotest-1.11.0.tar.gz
>   http://download.osgeo.org/gdal/1.11.0/gdalautotest-1.11.0.zip
>
> Documentation:
>   http://download.osgeo.org/gdal/1.11.0/gdal1110doc.zip
>
> NEWS:
>   http://svn.osgeo.org/gdal/tags/1.11.0/gdal/NEWS
>
> There is now a 1.11 branch in SVN, so new development can continue on
> trunk.
> Any bug fixes needed for a new 1.11.0 release candidate must be applied in
> both
> 1.11 branch and trunk.
>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140417/77bfae07/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 17 00:56:53 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Apr 2014 09:56:53 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>
Message-ID: <1397721413.534f89456f61b@imp.free.fr>

Selon Wolf Bergenheim <wolf+grass at bergenheim.net>:

> I just added a critical fix gor the GME driver that I'd like to get in to
> 1.11, so I merged it to the 1.11 branch. Soo technically this might require
> a new RC, sorry for that!

I'd like to kindly remind to GDAL committers that any commit worth to go to a
branch must be accompanied by a ticket describing the problem being fixed, and
the ticket number should be referenced in the commit message.

Wolf, how "critical" is it to justify, by itself, a new RC ? It looks more like
a new feature, no ? I guess that without the fix the driver is still functional
but spatial filters are evaluated on client-side whereas with your commit, they
are now evaluated server-side ? Nice to have, but can't that wait a .1 point
release ?

Even

From wolf+grass at bergenheim.net  Thu Apr 17 01:37:08 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Thu, 17 Apr 2014 10:37:08 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <1397721413.534f89456f61b@imp.free.fr>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>
	<1397721413.534f89456f61b@imp.free.fr>
Message-ID: <CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>

On Thu, Apr 17, 2014 at 9:56 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Selon Wolf Bergenheim <wolf+grass at bergenheim.net>:
>
> > I just added a critical fix gor the GME driver that I'd like to get in to
> > 1.11, so I merged it to the 1.11 branch. Soo technically this might
> require
> > a new RC, sorry for that!
>
> I'd like to kindly remind to GDAL committers that any commit worth to go
> to a
> branch must be accompanied by a ticket describing the problem being fixed,
> and
> the ticket number should be referenced in the commit message.
>
>
Ah thx :)


> Wolf, how "critical" is it to justify, by itself, a new RC ? It looks more
> like
> a new feature, no ? I guess that without the fix the driver is still
> functional
> but spatial filters are evaluated on client-side whereas with your commit,
> they
> are now evaluated server-side ? Nice to have, but can't that wait a .1
> point
> release ?


I suppose, but the problem is that without it the whole thing becomes
useless for large datasets (> 100k features) due to GME restrictions. I
just thought that it would be good to have a GME driver that works on those
large tables too. :)

--Wolf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140417/d583be1c/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 17 06:01:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Apr 2014 15:01:47 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>
	<1397721413.534f89456f61b@imp.free.fr>
	<CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>
Message-ID: <1397739707.534fd0bb274d8@imp.free.fr>

Selon Wolf Bergenheim <wolf+grass at bergenheim.net>:

> On Thu, Apr 17, 2014 at 9:56 AM, Even Rouault
> <even.rouault at mines-paris.org>wrote:
>
> > Selon Wolf Bergenheim <wolf+grass at bergenheim.net>:
> >
> > > I just added a critical fix gor the GME driver that I'd like to get in to
> > > 1.11, so I merged it to the 1.11 branch. Soo technically this might
> > require
> > > a new RC, sorry for that!
> >
> > I'd like to kindly remind to GDAL committers that any commit worth to go
> > to a
> > branch must be accompanied by a ticket describing the problem being fixed,
> > and
> > the ticket number should be referenced in the commit message.
> >
> >
> Ah thx :)
>
>
> > Wolf, how "critical" is it to justify, by itself, a new RC ? It looks more
> > like
> > a new feature, no ? I guess that without the fix the driver is still
> > functional
> > but spatial filters are evaluated on client-side whereas with your commit,
> > they
> > are now evaluated server-side ? Nice to have, but can't that wait a .1
> > point
> > release ?
>
>
> I suppose, but the problem is that without it the whole thing becomes
> useless for large datasets (> 100k features) due to GME restrictions. I
> just thought that it would be good to have a GME driver that works on those
> large tables too. :)

The problem is that at some point we must take a snapshot and say "hey, this is
GDAL 1.11, the latest and greatest, use it please". I think it is OK if new
drivers are still a bit experimental.

Reviewing the commit, I think that it has at least one issue because
SetSpatialFilter() will segfault in switch( poGeomIn->getGeometryType() ) if
passed a NULL geometry, which is perfectly legal, in order to uninstall a
spatial filter.
Did you test the driver with the test_ogrsf utility ? (cd apps; make test_ogrsf)


>
> --Wolf
>



From dmorissette at mapgears.com  Thu Apr 17 07:01:22 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 17 Apr 2014 10:01:22 -0400
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
 testing
In-Reply-To: <534FDD7C.2090403@mapgears.com>
References: <201404162311.43565.even.rouault@mines-paris.org>	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>	<1397721413.534f89456f61b@imp.free.fr>	<CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>
	<1397739707.534fd0bb274d8@imp.free.fr>
	<534FDD7C.2090403@mapgears.com>
Message-ID: <534FDEB2.4080508@mapgears.com>

On 14-04-17 9:56 AM, Daniel Morissette wrote:
>
> For reference, MapServer RFC34 documents the release process:
> http://msgsoc.mapgears.com/html/en/development/rfc/ms-rfc-34.html
>

OOppss. The URL above points to a mirror of the site. Here is the 
official URL to RFC 34:

http://mapserver.org/development/rfc/ms-rfc-34.html



-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From dmorissette at mapgears.com  Thu Apr 17 06:56:12 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 17 Apr 2014 09:56:12 -0400
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
 testing
In-Reply-To: <1397739707.534fd0bb274d8@imp.free.fr>
References: <201404162311.43565.even.rouault@mines-paris.org>	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>	<1397721413.534f89456f61b@imp.free.fr>	<CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>
	<1397739707.534fd0bb274d8@imp.free.fr>
Message-ID: <534FDD7C.2090403@mapgears.com>

On 14-04-17 9:01 AM, Even Rouault wrote:
>
> The problem is that at some point we must take a snapshot and say "hey, this is
> GDAL 1.11, the latest and greatest, use it please". I think it is OK if new
> drivers are still a bit experimental.
>
> Reviewing the commit, I think that it has at least one issue because
> SetSpatialFilter() will segfault in switch( poGeomIn->getGeometryType() ) if
> passed a NULL geometry, which is perfectly legal, in order to uninstall a
> spatial filter.
> Did you test the driver with the test_ogrsf utility ? (cd apps; make test_ogrsf)
>

Note to all committers in support of Even attempting to produce a 
release (not pointing at Wolf specifically even if that's the way this 
may sound):

This example (introducing a potential seg fault at the last minute) is 
exactly the reason why we usually have a "feature freeze" period before 
releasing software and only really critical *fixes* should be allowed 
during the feature freeze period, and these fixes should have been 
properly tested.

This is also the reason why in projects such as MapServer the appointed 
release manager for a given release has unilateral power to revert any 
changes that he/she considers has a risk to the stability of the release 
or its schedule, even if that means releasing with documented known 
bugs. (i.e. sometimes it is safer to release with a known bug than to 
introduce a non trivial fix that comes with a higher risk to the 
stability of the software and could delay the release)

The alternative if we don't do that is that releases take forever 
because there will always be someone who has a last minute fix to commit 
(with the associated risk of introducing new bugs at the same time if 
they are not well tested straightforward fixes). Then we get into a 
spiraling effect of fixes introducing bugs, whose fixes introduce bugs, 
and so on, hopefully you get the idea.

Sorry for the rant, we've gone through that exercise for MapServer 
several years ago and that has helped a lot, so I'd be in favor of more 
rigid release rules for GDAL as well.

For reference, MapServer RFC34 documents the release process:
http://msgsoc.mapgears.com/html/en/development/rfc/ms-rfc-34.html

Daniel
-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From wolf+grass at bergenheim.net  Thu Apr 17 07:28:24 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Thu, 17 Apr 2014 16:28:24 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <534FDD7C.2090403@mapgears.com>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>
	<1397721413.534f89456f61b@imp.free.fr>
	<CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>
	<1397739707.534fd0bb274d8@imp.free.fr> <534FDD7C.2090403@mapgears.com>
Message-ID: <CAJhTkW7NLUKnVBCeFUwdZ9A2hWNXrefSv2-O+X2K8aG=Cg6eeQ@mail.gmail.com>

Yeah, I should not have tried to push this so late yesterday. For that I'm
sorry, and I'm fixing it now. I can only apologize.

Daniel, you bring up a good point. A more formal release process might be
in order, we are maybe starting to reach critical mass in developers here,
or else it's just me messing around and not following process that I should
know. I think I missed the call to codefreeze, again, my bad. But it won't
happen again. Code reviews would be another way to prevent accidental
segfaults, but we might not have enough people with enough time for that,
and some people might not want it. I personally love when someone reviews
my code. So thanks Even for that!

--Wolf


On Thu, Apr 17, 2014 at 3:56 PM, Daniel Morissette <dmorissette at mapgears.com
> wrote:

> On 14-04-17 9:01 AM, Even Rouault wrote:
>
>>
>> The problem is that at some point we must take a snapshot and say "hey,
>> this is
>> GDAL 1.11, the latest and greatest, use it please". I think it is OK if
>> new
>> drivers are still a bit experimental.
>>
>> Reviewing the commit, I think that it has at least one issue because
>> SetSpatialFilter() will segfault in switch( poGeomIn->getGeometryType() )
>> if
>> passed a NULL geometry, which is perfectly legal, in order to uninstall a
>> spatial filter.
>> Did you test the driver with the test_ogrsf utility ? (cd apps; make
>> test_ogrsf)
>>
>>
> Note to all committers in support of Even attempting to produce a release
> (not pointing at Wolf specifically even if that's the way this may sound):
>
> This example (introducing a potential seg fault at the last minute) is
> exactly the reason why we usually have a "feature freeze" period before
> releasing software and only really critical *fixes* should be allowed
> during the feature freeze period, and these fixes should have been properly
> tested.
>
> This is also the reason why in projects such as MapServer the appointed
> release manager for a given release has unilateral power to revert any
> changes that he/she considers has a risk to the stability of the release or
> its schedule, even if that means releasing with documented known bugs.
> (i.e. sometimes it is safer to release with a known bug than to introduce a
> non trivial fix that comes with a higher risk to the stability of the
> software and could delay the release)
>
> The alternative if we don't do that is that releases take forever because
> there will always be someone who has a last minute fix to commit (with the
> associated risk of introducing new bugs at the same time if they are not
> well tested straightforward fixes). Then we get into a spiraling effect of
> fixes introducing bugs, whose fixes introduce bugs, and so on, hopefully
> you get the idea.
>
> Sorry for the rant, we've gone through that exercise for MapServer several
> years ago and that has helped a lot, so I'd be in favor of more rigid
> release rules for GDAL as well.
>
> For reference, MapServer RFC34 documents the release process:
> http://msgsoc.mapgears.com/html/en/development/rfc/ms-rfc-34.html
>
> Daniel
> --
> Daniel Morissette
> T: +1 418-696-5056 #201
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140417/750dc7aa/attachment-0001.html>

From dmorissette at mapgears.com  Thu Apr 17 07:52:21 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 17 Apr 2014 10:52:21 -0400
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
 testing
In-Reply-To: <CAJhTkW7NLUKnVBCeFUwdZ9A2hWNXrefSv2-O+X2K8aG=Cg6eeQ@mail.gmail.com>
References: <201404162311.43565.even.rouault@mines-paris.org>	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>	<1397721413.534f89456f61b@imp.free.fr>	<CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>	<1397739707.534fd0bb274d8@imp.free.fr>
	<534FDD7C.2090403@mapgears.com>
	<CAJhTkW7NLUKnVBCeFUwdZ9A2hWNXrefSv2-O+X2K8aG=Cg6eeQ@mail.gmail.com>
Message-ID: <534FEAA5.2060302@mapgears.com>

Hi Wolf,

Once again my mail was aimed at all of us committers and not just you 
specifically. Your contributions (like everyone else's) are much welcome 
and I would not want to discourage anyone from contributing. FWIW I 
don't think there was ever a formal code freeze call for GDAL, so you 
did not miss it. There was just an email thread started by Even about 
trying to produce a 1.11 release (which implies a feature freeze in my 
mind, but that's just me and that was not explicit).

My intention was mostly to make everyone realize how hard it can be for 
Even or someone else to produce releases when commits keep coming in for 
non trivial fixes. I have been through that with MapServer several years 
ago and then we introduced the release process (RFC034) which helped a 
lot, so I am just relaying that experience in the hope that we can make 
GDAL releases easier in the future.

Daniel



On 14-04-17 10:28 AM, Wolf Bergenheim wrote:
> Yeah, I should not have tried to push this so late yesterday. For that
> I'm sorry, and I'm fixing it now. I can only apologize.
>
> Daniel, you bring up a good point. A more formal release process might
> be in order, we are maybe starting to reach critical mass in developers
> here, or else it's just me messing around and not following process that
> I should know. I think I missed the call to codefreeze, again, my bad.
> But it won't happen again. Code reviews would be another way to prevent
> accidental segfaults, but we might not have enough people with enough
> time for that, and some people might not want it. I personally love when
> someone reviews my code. So thanks Even for that!
>
> --Wolf
>
>
> On Thu, Apr 17, 2014 at 3:56 PM, Daniel Morissette
> <dmorissette at mapgears.com <mailto:dmorissette at mapgears.com>> wrote:
>
>     On 14-04-17 9:01 AM, Even Rouault wrote:
>
>
>         The problem is that at some point we must take a snapshot and
>         say "hey, this is
>         GDAL 1.11, the latest and greatest, use it please". I think it
>         is OK if new
>         drivers are still a bit experimental.
>
>         Reviewing the commit, I think that it has at least one issue because
>         SetSpatialFilter() will segfault in switch(
>         poGeomIn->getGeometryType() ) if
>         passed a NULL geometry, which is perfectly legal, in order to
>         uninstall a
>         spatial filter.
>         Did you test the driver with the test_ogrsf utility ? (cd apps;
>         make test_ogrsf)
>
>
>     Note to all committers in support of Even attempting to produce a
>     release (not pointing at Wolf specifically even if that's the way
>     this may sound):
>
>     This example (introducing a potential seg fault at the last minute)
>     is exactly the reason why we usually have a "feature freeze" period
>     before releasing software and only really critical *fixes* should be
>     allowed during the feature freeze period, and these fixes should
>     have been properly tested.
>
>     This is also the reason why in projects such as MapServer the
>     appointed release manager for a given release has unilateral power
>     to revert any changes that he/she considers has a risk to the
>     stability of the release or its schedule, even if that means
>     releasing with documented known bugs. (i.e. sometimes it is safer to
>     release with a known bug than to introduce a non trivial fix that
>     comes with a higher risk to the stability of the software and could
>     delay the release)
>
>     The alternative if we don't do that is that releases take forever
>     because there will always be someone who has a last minute fix to
>     commit (with the associated risk of introducing new bugs at the same
>     time if they are not well tested straightforward fixes). Then we get
>     into a spiraling effect of fixes introducing bugs, whose fixes
>     introduce bugs, and so on, hopefully you get the idea.
>
>     Sorry for the rant, we've gone through that exercise for MapServer
>     several years ago and that has helped a lot, so I'd be in favor of
>     more rigid release rules for GDAL as well.
>
>     For reference, MapServer RFC34 documents the release process:
>     http://msgsoc.mapgears.com/__html/en/development/rfc/ms-__rfc-34.html <http://msgsoc.mapgears.com/html/en/development/rfc/ms-rfc-34.html>
>
>     Daniel
>     --
>     Daniel Morissette
>     T: +1 418-696-5056 #201 <tel:%2B1%20418-696-5056%20%23201>
>     http://www.mapgears.com/
>     Provider of Professional MapServer Support since 2000
>
>     _________________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From wolf+grass at bergenheim.net  Thu Apr 17 08:03:50 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Thu, 17 Apr 2014 17:03:50 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <534FEAA5.2060302@mapgears.com>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>
	<1397721413.534f89456f61b@imp.free.fr>
	<CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>
	<1397739707.534fd0bb274d8@imp.free.fr> <534FDD7C.2090403@mapgears.com>
	<CAJhTkW7NLUKnVBCeFUwdZ9A2hWNXrefSv2-O+X2K8aG=Cg6eeQ@mail.gmail.com>
	<534FEAA5.2060302@mapgears.com>
Message-ID: <CAJhTkW51+-kyGAGSjn6faUFeM+NRkhJDv1P2L7QDWaSKS_--Dw@mail.gmail.com>

Hi Daniel,

I agree with your idea about formalizing, and do indeed feel sorry for
adding to Even's workload. I think it's a good thing to talk about,
especially now, for obvious reasons. Making new GDAL releases should be
made as easy as possible, and I think that a more formal structure, like
the one you mentioned, could be the first step towards this. So I'm all for
it, and would welcome discussion around this subject. :)

--Wolf

On Thu, Apr 17, 2014 at 4:52 PM, Daniel Morissette <dmorissette at mapgears.com
> wrote:

> Hi Wolf,
>
> Once again my mail was aimed at all of us committers and not just you
> specifically. Your contributions (like everyone else's) are much welcome
> and I would not want to discourage anyone from contributing. FWIW I don't
> think there was ever a formal code freeze call for GDAL, so you did not
> miss it. There was just an email thread started by Even about trying to
> produce a 1.11 release (which implies a feature freeze in my mind, but
> that's just me and that was not explicit).
>
> My intention was mostly to make everyone realize how hard it can be for
> Even or someone else to produce releases when commits keep coming in for
> non trivial fixes. I have been through that with MapServer several years
> ago and then we introduced the release process (RFC034) which helped a lot,
> so I am just relaying that experience in the hope that we can make GDAL
> releases easier in the future.
>
> Daniel
>
>
>
>
> On 14-04-17 10:28 AM, Wolf Bergenheim wrote:
>
>> Yeah, I should not have tried to push this so late yesterday. For that
>> I'm sorry, and I'm fixing it now. I can only apologize.
>>
>> Daniel, you bring up a good point. A more formal release process might
>> be in order, we are maybe starting to reach critical mass in developers
>> here, or else it's just me messing around and not following process that
>> I should know. I think I missed the call to codefreeze, again, my bad.
>> But it won't happen again. Code reviews would be another way to prevent
>> accidental segfaults, but we might not have enough people with enough
>> time for that, and some people might not want it. I personally love when
>> someone reviews my code. So thanks Even for that!
>>
>> --Wolf
>>
>>
>> On Thu, Apr 17, 2014 at 3:56 PM, Daniel Morissette
>> <dmorissette at mapgears.com <mailto:dmorissette at mapgears.com>> wrote:
>>
>>     On 14-04-17 9:01 AM, Even Rouault wrote:
>>
>>
>>         The problem is that at some point we must take a snapshot and
>>         say "hey, this is
>>         GDAL 1.11, the latest and greatest, use it please". I think it
>>         is OK if new
>>         drivers are still a bit experimental.
>>
>>         Reviewing the commit, I think that it has at least one issue
>> because
>>         SetSpatialFilter() will segfault in switch(
>>         poGeomIn->getGeometryType() ) if
>>         passed a NULL geometry, which is perfectly legal, in order to
>>         uninstall a
>>         spatial filter.
>>         Did you test the driver with the test_ogrsf utility ? (cd apps;
>>         make test_ogrsf)
>>
>>
>>     Note to all committers in support of Even attempting to produce a
>>     release (not pointing at Wolf specifically even if that's the way
>>     this may sound):
>>
>>     This example (introducing a potential seg fault at the last minute)
>>     is exactly the reason why we usually have a "feature freeze" period
>>     before releasing software and only really critical *fixes* should be
>>     allowed during the feature freeze period, and these fixes should
>>     have been properly tested.
>>
>>     This is also the reason why in projects such as MapServer the
>>     appointed release manager for a given release has unilateral power
>>     to revert any changes that he/she considers has a risk to the
>>     stability of the release or its schedule, even if that means
>>     releasing with documented known bugs. (i.e. sometimes it is safer to
>>     release with a known bug than to introduce a non trivial fix that
>>     comes with a higher risk to the stability of the software and could
>>     delay the release)
>>
>>     The alternative if we don't do that is that releases take forever
>>     because there will always be someone who has a last minute fix to
>>     commit (with the associated risk of introducing new bugs at the same
>>     time if they are not well tested straightforward fixes). Then we get
>>     into a spiraling effect of fixes introducing bugs, whose fixes
>>     introduce bugs, and so on, hopefully you get the idea.
>>
>>     Sorry for the rant, we've gone through that exercise for MapServer
>>     several years ago and that has helped a lot, so I'd be in favor of
>>     more rigid release rules for GDAL as well.
>>
>>     For reference, MapServer RFC34 documents the release process:
>>     http://msgsoc.mapgears.com/__html/en/development/rfc/ms-__rfc-34.html<
>> http://msgsoc.mapgears.com/html/en/development/rfc/ms-rfc-34.html>
>>
>>     Daniel
>>     --
>>     Daniel Morissette
>>     T: +1 418-696-5056 #201 <tel:%2B1%20418-696-5056%20%23201>
>>
>>     http://www.mapgears.com/
>>     Provider of Professional MapServer Support since 2000
>>
>>     _________________________________________________
>>     gdal-dev mailing list
>>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> --
> Daniel Morissette
> T: +1 418-696-5056 #201
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140417/bb1fd9a0/attachment.html>

From wolf+grass at bergenheim.net  Thu Apr 17 08:20:20 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Thu, 17 Apr 2014 17:20:20 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <1397739707.534fd0bb274d8@imp.free.fr>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>
	<1397721413.534f89456f61b@imp.free.fr>
	<CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>
	<1397739707.534fd0bb274d8@imp.free.fr>
Message-ID: <CAJhTkW6uZSoBqReuJNK=ACAdq1PVjGtcVHff2hCkXA7KdtV5Bw@mail.gmail.com>

On Thu, Apr 17, 2014 at 3:01 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> > I suppose, but the problem is that without it the whole thing becomes
> > useless for large datasets (> 100k features) due to GME restrictions. I
> > just thought that it would be good to have a GME driver that works on
> those
> > large tables too. :)
>
> The problem is that at some point we must take a snapshot and say "hey,
> this is
> GDAL 1.11, the latest and greatest, use it please". I think it is OK if new
> drivers are still a bit experimental.
>
>
Ok, no need for it then. Do you want me to roll my changes back from the
1.11 branch or apply my patch to it?


> Reviewing the commit, I think that it has at least one issue because
> SetSpatialFilter() will segfault in switch( poGeomIn->getGeometryType() )
> if
> passed a NULL geometry, which is perfectly legal, in order to uninstall a
> spatial filter.
> Did you test the driver with the test_ogrsf utility ? (cd apps; make
> test_ogrsf)
>
>
Noo :( I was too tired and forgot. I only ran my own python test which
doesn't try to unset the spatial filter. Will need to add that test later.
Anyways just committed a fix for the crash and now test_ogrsf works mostly.
A few errors, but nothing that causes a crash. They are mostly GME -related
things, like the it doesn't support infinity and big numbers. So will add a
check for that later.

--Wolf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140417/34032289/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Apr 17 08:31:30 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Apr 2014 17:31:30 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <CAJhTkW6uZSoBqReuJNK=ACAdq1PVjGtcVHff2hCkXA7KdtV5Bw@mail.gmail.com>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<CAJhTkW7JortY85e7ssERw3Yt1A=KYkUUETQiZcVyOfMDnziJQw@mail.gmail.com>
	<1397721413.534f89456f61b@imp.free.fr>
	<CAJhTkW5xGftzW8PXy1w-geArQbhv6=qy-ALVaeYrCVLAxpBYfA@mail.gmail.com>
	<1397739707.534fd0bb274d8@imp.free.fr>
	<CAJhTkW6uZSoBqReuJNK=ACAdq1PVjGtcVHff2hCkXA7KdtV5Bw@mail.gmail.com>
Message-ID: <1397748690.534ff3d2d6877@imp.free.fr>

> Ok, no need for it then. Do you want me to roll my changes back from the
> 1.11 branch or apply my patch to it?

You can apply your patch on 1.11 as well. It will be stacked for a potential new
RC, or a 1.11.1 release.

I'm still ambivalent about regnerating a new RC, just to incorporate the spatial
filter implementation. We'll see if someone raises critical issues.

Actually, issuing RC1 was more painful than I thought, since it is done on the
OSGeo "project" VM that suffers currently from slowness problems due to heavy
I/O load...

> >
> Noo :( I was too tired and forgot. I only ran my own python test which
> doesn't try to unset the spatial filter. Will need to add that test later.
> Anyways just committed a fix for the crash and now test_ogrsf works mostly.
> A few errors, but nothing that causes a crash. They are mostly GME -related
> things, like the it doesn't support infinity and big numbers. So will add a
> check for that later.

Yes, that's OK. Some tests in test_ogrsf are pedantry.

>
> --Wolf
>



From david.tran at hsr.ch  Thu Apr 17 12:26:30 2014
From: david.tran at hsr.ch (David Tran)
Date: Thu, 17 Apr 2014 21:26:30 +0200
Subject: [gdal-dev] Source code for ogr2ogr --version
Message-ID: <53502AE6.8060801@hsr.ch>

Hi to everyone

I compiled gdal 1.10.1 and now I want to show ogr2ogr --version with my 
library in my ide console. How do I do that with C or C++?

Thanks in advance.

David

From mateusz at loskot.net  Thu Apr 17 12:38:02 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Thu, 17 Apr 2014 21:38:02 +0200
Subject: [gdal-dev] Source code for ogr2ogr --version
In-Reply-To: <53502AE6.8060801@hsr.ch>
References: <53502AE6.8060801@hsr.ch>
Message-ID: <CABUeae_fL55ZegDvbLiqMyvPdkGohoK-htGm=M=-ckoH6vvfwQ@mail.gmail.com>

On 17 April 2014 21:26, David Tran <david.tran at hsr.ch> wrote:
> Hi to everyone
>
> I compiled gdal 1.10.1 and now I want to show ogr2ogr --version with my
> library in my ide console. How do I do that with C or C++?

Use GDALVersionInfo function, see http://www.gdal.org/gdal_8h.html

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From even.rouault at mines-paris.org  Thu Apr 17 14:08:44 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Apr 2014 23:08:44 +0200
Subject: [gdal-dev] Formalizing realease procedure [was Re: GDAL/OGR 1.11.0
	Release Candidate 1 available for testing]
Message-ID: <201404172308.44921.even.rouault@mines-paris.org>

Le jeudi 17 avril 2014 17:03:50, Wolf Bergenheim a ?crit :
> Hi Daniel,
> 
> I agree with your idea about formalizing, and do indeed feel sorry for
> adding to Even's workload. I think it's a good thing to talk about,
> especially now, for obvious reasons. Making new GDAL releases should be
> made as easy as possible, and I think that a more formal structure, like
> the one you mentioned, could be the first step towards this. So I'm all for
> it, and would welcome discussion around this subject. :)

Yes, I agree that our release procedure per-se is not completely formalized. 

I've looked a bit to our documentation, and found a few mentions to things 
releated to releasing :

1) The http://svn.osgeo.org/gdal/trunk/gdal/HOWTO-RELEASE : this covers mostly 
the technical points to do the release.

2) Extract from http://trac.osgeo.org/gdal/wiki/rfc1_pmc :
"""
When vote is required ?
[...] When releases should take place
"""

3) Extracts from http://trac.osgeo.org/gdal/wiki/rfc3_commiters : 
"""
* Never commit new features to a stable branch without permission of the PSC 
or release manager. Normally only fixes should go into stable branches. 
* Only bug fixes should be committed to the code during pre-release code 
freeze, without permission from the PSC or release manager. 
* Do not create new branches without the approval of the PSC. Release managers 
are assumed to have permission to create a branch. 
"""

Thanks to Daniel for pointing to http://mapserver.org/development/rfc/ms-
rfc-34.html which could serve as a base to establish a similar RFC for GDAL.

I've a few observations on MS RFC 34 and would be interested in hearing 
Daniel's feedback about how much of it is followed in practice. Rules are 
good, but few rules that are really followed are better than a lot of rules 
that aren't really followed.

* The release manager in MapServer has really important rights and many 
duties..., and if I understand well ( "Approving or not the release of each 
beta, release candidate and final release"), he can promote himself a release 
to official without requiring a PSC vote ? I like the fact that GDAL releases 
are approved by the whole PSC, to stress that it is a collective 
responsibility.

* "regular IRC meetings" ?

* "QA/Testers team" : is there such an identified team in MapServer ?

* MapServer 6 month release cycle vs GDAL 1 year in practice : people are 
usually slow on adopting new releases (and people that want to track the 
latest and greatest can always use/produce daily builds). Are the benefits of a 
6 month cycle worth the release procedure overhead  ? Also I'm thinking about 
the hypothetical 2.0 release where we might want to push quite a few breaking 
changes together, and it might be difficult to guarantee even a 1 year cycle...

* The emphasis on RFCs ( "RFC freeze date" etc) in MapServer doesn't 
completely translate to GDAL. Driver development in GDAL doesn't imply RFC. 
RFCs are mostly justified by additions or changes in core GDAL/OGR. But we 
could replace occurences "RFC" by "RFC and new drivers" and that should do

* "3-4 betas and a couple of release candidates over a 6 weeks period" : do 
people actually test more betas than daily builds ? Don't they only test 
releases when they are promoted official, or when they reach .1 / .2 micro 
numbers ?

* I don't think it is necessary to have the same release manager for bugfixes 
releases than for major releases.

* Version numbering. The current GDAL numbering scheme seems OK to me. Major 
number (1 for the last 15 years ;-)) is increased when the C API changes. 
Minor when they are functional or API additions. Micro for bugfixes.

Even

> 
> --Wolf
> 
> On Thu, Apr 17, 2014 at 4:52 PM, Daniel Morissette
> <dmorissette at mapgears.com
> 
> > wrote:
> > 
> > Hi Wolf,
> > 
> > Once again my mail was aimed at all of us committers and not just you
> > specifically. Your contributions (like everyone else's) are much welcome
> > and I would not want to discourage anyone from contributing. FWIW I don't
> > think there was ever a formal code freeze call for GDAL, so you did not
> > miss it. There was just an email thread started by Even about trying to
> > produce a 1.11 release (which implies a feature freeze in my mind, but
> > that's just me and that was not explicit).
> > 
> > My intention was mostly to make everyone realize how hard it can be for
> > Even or someone else to produce releases when commits keep coming in for
> > non trivial fixes. I have been through that with MapServer several years
> > ago and then we introduced the release process (RFC034) which helped a
> > lot, so I am just relaying that experience in the hope that we can make
> > GDAL releases easier in the future.
> > 
> > Daniel
> > 
> > On 14-04-17 10:28 AM, Wolf Bergenheim wrote:
> >> Yeah, I should not have tried to push this so late yesterday. For that
> >> I'm sorry, and I'm fixing it now. I can only apologize.
> >> 
> >> Daniel, you bring up a good point. A more formal release process might
> >> be in order, we are maybe starting to reach critical mass in developers
> >> here, or else it's just me messing around and not following process that
> >> I should know. I think I missed the call to codefreeze, again, my bad.
> >> But it won't happen again. Code reviews would be another way to prevent
> >> accidental segfaults, but we might not have enough people with enough
> >> time for that, and some people might not want it. I personally love when
> >> someone reviews my code. So thanks Even for that!
> >> 
> >> --Wolf
> >> 
> >> 
> >> On Thu, Apr 17, 2014 at 3:56 PM, Daniel Morissette
> >> 
> >> <dmorissette at mapgears.com <mailto:dmorissette at mapgears.com>> wrote:
> >>     On 14-04-17 9:01 AM, Even Rouault wrote:
> >>         The problem is that at some point we must take a snapshot and
> >>         say "hey, this is
> >>         GDAL 1.11, the latest and greatest, use it please". I think it
> >>         is OK if new
> >>         drivers are still a bit experimental.
> >>         
> >>         Reviewing the commit, I think that it has at least one issue
> >> 
> >> because
> >> 
> >>         SetSpatialFilter() will segfault in switch(
> >>         poGeomIn->getGeometryType() ) if
> >>         passed a NULL geometry, which is perfectly legal, in order to
> >>         uninstall a
> >>         spatial filter.
> >>         Did you test the driver with the test_ogrsf utility ? (cd apps;
> >>         make test_ogrsf)
> >>     
> >>     Note to all committers in support of Even attempting to produce a
> >>     release (not pointing at Wolf specifically even if that's the way
> >>     this may sound):
> >>     
> >>     This example (introducing a potential seg fault at the last minute)
> >>     is exactly the reason why we usually have a "feature freeze" period
> >>     before releasing software and only really critical *fixes* should be
> >>     allowed during the feature freeze period, and these fixes should
> >>     have been properly tested.
> >>     
> >>     This is also the reason why in projects such as MapServer the
> >>     appointed release manager for a given release has unilateral power
> >>     to revert any changes that he/she considers has a risk to the
> >>     stability of the release or its schedule, even if that means
> >>     releasing with documented known bugs. (i.e. sometimes it is safer to
> >>     release with a known bug than to introduce a non trivial fix that
> >>     comes with a higher risk to the stability of the software and could
> >>     delay the release)
> >>     
> >>     The alternative if we don't do that is that releases take forever
> >>     because there will always be someone who has a last minute fix to
> >>     commit (with the associated risk of introducing new bugs at the same
> >>     time if they are not well tested straightforward fixes). Then we get
> >>     into a spiraling effect of fixes introducing bugs, whose fixes
> >>     introduce bugs, and so on, hopefully you get the idea.
> >>     
> >>     Sorry for the rant, we've gone through that exercise for MapServer
> >>     several years ago and that has helped a lot, so I'd be in favor of
> >>     more rigid release rules for GDAL as well.
> >>     
> >>     For reference, MapServer RFC34 documents the release process:
> >>     http://msgsoc.mapgears.com/__html/en/development/rfc/ms-__rfc-34.htm
> >>     l<
> >> 
> >> http://msgsoc.mapgears.com/html/en/development/rfc/ms-rfc-34.html>
> >> 
> >>     Daniel
> >>     --
> >>     Daniel Morissette
> >>     T: +1 418-696-5056 #201 <tel:%2B1%20418-696-5056%20%23201>
> >>     
> >>     http://www.mapgears.com/
> >>     Provider of Professional MapServer Support since 2000
> >>     
> >>     _________________________________________________
> >>     gdal-dev mailing list
> >>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> >>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
> >>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
> >> 
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Daniel Morissette
> > T: +1 418-696-5056 #201
> > http://www.mapgears.com/
> > Provider of Professional MapServer Support since 2000
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Apr 17 14:41:44 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Apr 2014 23:41:44 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available for
	testing
In-Reply-To: <CAJhTkW7NLUKnVBCeFUwdZ9A2hWNXrefSv2-O+X2K8aG=Cg6eeQ@mail.gmail.com>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<534FDD7C.2090403@mapgears.com>
	<CAJhTkW7NLUKnVBCeFUwdZ9A2hWNXrefSv2-O+X2K8aG=Cg6eeQ@mail.gmail.com>
Message-ID: <201404172341.44841.even.rouault@mines-paris.org>

> Code reviews would be another way to prevent accidental
> segfaults, but we might not have enough people with enough time for that,
> and some people might not want it. I personally love when someone reviews
> my code.

Code reviews are of course good for quality. I think any GDAL committer should 
welcome any remark coming from a reviewer. But, the practical problem is 
indeed to find the reviewer with the time and experience to do the review 
(which might translate into extra costs). So practically, we cannot 
realistically impose systematic peer code review.

I should mention that we have a "free" (as in beer) code reviewer... The 
Coverity static analyzer : https://scan.coverity.com/projects/749 . Any GDAL 
committer can request access to the details (the analysis is done on a weekly 
basis). Complementary with human reviewing, but not completely equivalent. But 
in the segfault case, it would have found the issue since there was a if( 
poGeomIn == NULL )test AFTER the dereferencing of the pointer, and this is 
something for which it has a heuristics. But if the if( poGeomIn == NULL ) 
didn't exist, there would be no information for the analyzer to figure out if 
calling SetSpatialFilter() with a NULL pointer is valid or not, so in doubt, 
it will shut up to avoid false positives.

Practical exercice: there's a 7000 lines long patch for the SQLAnywhere driver 
waiting for review in Trac... And a lot of other tickets with smaller patches. 
My experience is that most patches coming from casual contributors needs to be 
at least amended to some degree. And they rarely come with the associated 
regression test.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From JPalmer at linz.govt.nz  Thu Apr 17 23:03:59 2014
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Fri, 18 Apr 2014 18:03:59 +1200
Subject: [gdal-dev] GDAL/OGR 1.11.0 Release Candidate 1 available
	for	testing
In-Reply-To: <201404172341.44841.even.rouault@mines-paris.org>
References: <201404162311.43565.even.rouault@mines-paris.org>
	<534FDD7C.2090403@mapgears.com>
	<CAJhTkW7NLUKnVBCeFUwdZ9A2hWNXrefSv2-O+X2K8aG=Cg6eeQ@mail.gmail.com>,
	<201404172341.44841.even.rouault@mines-paris.org>
Message-ID: <C6B695652D5E6B4597E90C5734C0242621B3A78D6B@prdlsmmsg01.ad.linz.govt.nz>

I've just been testing GDAL/OGR 1.11.0 and the MBTiles driver does not seem to be reading transparency information. Not sure if this is new to 1.11.0 or was an issue there before. Ticket here:

http://trac.osgeo.org/gdal/ticket/5439

Cheers,
Jeremy

This message contains information, which may be in confidence and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From lucena_ivan at hotmail.com  Fri Apr 18 06:18:08 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Fri, 18 Apr 2014 09:18:08 -0400
Subject: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010
In-Reply-To: <201404162021.21049.even.rouault@mines-paris.org>
References: <BLU173-W6B0101F04DC5BB28148F190530@phx.gbl>,
	<201404162021.21049.even.rouault@mines-paris.org>
Message-ID: <BLU173-W241AA4B3C9446D3EA7C10D905D0@phx.gbl>

That's great Even. Thank you.

> From: even.rouault at mines-paris.org
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] makegdal_gen.bat and Visual Studio version > 2010
> Date: Wed, 16 Apr 2014 20:21:20 +0200
> CC: lucena_ivan at hotmail.com
> 
> > In the mean time we should also get rid of those old "makegdalNN.vcproj"
> > from SVN.
> 
> Done. I've also got rid of the .sln and .vcxproj files.
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140418/ce04e6b3/attachment.html>

From landa.martin at gmail.com  Fri Apr 18 09:21:48 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 18 Apr 2014 18:21:48 +0200
Subject: [gdal-dev] ogr2ogr -f OCI fails on Windows
In-Reply-To: <BLU173-W132609D54781D1500D9BC790530@phx.gbl>
References: <CA+Ei1OfSQykhiArHV-UUSJYSCMb8exvd8+9vDNfV4D29EYVsqw@mail.gmail.com>
	<BLU173-W132609D54781D1500D9BC790530@phx.gbl>
Message-ID: <CA+Ei1OdvWJxks3f9xYFG-imx9BonmTdRTdEP1NOBEdu6=KSJ3g@mail.gmail.com>

Hi,

Dne 16. dubna 2014 22:37 Ivan Lucena <lucena_ivan at hotmail.com> napsal(a):

> Could you try yo run that command in PLSQL before loading thata data?
>
> SQL> ALTER SESSION SET NLS_LENGTH_SEMANTICS=CHAR;

I tried that and also setting environmental variable

SET NLS_LENGTH_SEMANTICS=CHAR

> And then ogr2ogr with -overwrite
>
> $ ogr2ogr -f OCI oci:user/passwd data\20140331_OB_564729_UKSH.xml.gz
> -overwrite

but I don't see any extra info compared to that I already sent. Could
it be related to

Warning 6: Can't create field DetailniTEAKod with type IntegerList on
Oracle layers.  Creating as VARCHAR.
OCI: Prepare(ALTER TABLE STAVEBNIOBJEKTY ADD "DetailniTEAKod" VARCHAR(2047))

? Thanks, Martin

From lucena_ivan at hotmail.com  Fri Apr 18 09:55:42 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Fri, 18 Apr 2014 12:55:42 -0400
Subject: [gdal-dev] ogr2ogr -f OCI fails on Windows
In-Reply-To: <CA+Ei1OdvWJxks3f9xYFG-imx9BonmTdRTdEP1NOBEdu6=KSJ3g@mail.gmail.com>
References: <CA+Ei1OfSQykhiArHV-UUSJYSCMb8exvd8+9vDNfV4D29EYVsqw@mail.gmail.com>,
	<BLU173-W132609D54781D1500D9BC790530@phx.gbl>,
	<CA+Ei1OdvWJxks3f9xYFG-imx9BonmTdRTdEP1NOBEdu6=KSJ3g@mail.gmail.com>
Message-ID: <BLU173-W31B726EBD5F7C4E8152704905D0@phx.gbl>

The driver should create the column as VARCHAR2, not VARCHAR [1]. It is wrong for several reasons [2] and there is a possibility that the amount of data you are loading is too big for the wrong data type. Can you change that code [1], compile and try again?

[1] - [http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/oci/ogrociwritablelayer.cpp#L296]

[2] """
The VARCHAR2 subtypes STRING and VARCHAR have the same range of values as their base type. For example, VARCHAR is just another name for VARCHAR2.

You can use the VARCHAR2 subtypes for compatibility with ANSI/ISO and IBM types.



Currently, VARCHAR is synonymous with VARCHAR2. However, in future releases of PL/SQL, to accommodate emerging SQL standards, VARCHAR might become a separate datatype with different comparison semantics. It is a good idea to use VARCHAR2 rather than VARCHAR.
""" 
[ http://docs.oracle.com/cd/B19306_01/appdev.102/b14261/datatypes.htm#i42580 ]


> Date: Fri, 18 Apr 2014 18:21:48 +0200
> Subject: Re: [gdal-dev] ogr2ogr -f OCI fails on Windows
> From: landa.martin at gmail.com
> To: lucena_ivan at hotmail.com
> CC: gdal-dev at lists.osgeo.org
> 
> Hi,
> 
> Dne 16. dubna 2014 22:37 Ivan Lucena <lucena_ivan at hotmail.com> napsal(a):
> 
> > Could you try yo run that command in PLSQL before loading thata data?
> >
> > SQL> ALTER SESSION SET NLS_LENGTH_SEMANTICS=CHAR;
> 
> I tried that and also setting environmental variable
> 
> SET NLS_LENGTH_SEMANTICS=CHAR
> 
> > And then ogr2ogr with -overwrite
> >
> > $ ogr2ogr -f OCI oci:user/passwd data\20140331_OB_564729_UKSH.xml.gz
> > -overwrite
> 
> but I don't see any extra info compared to that I already sent. Could
> it be related to
> 
> Warning 6: Can't create field DetailniTEAKod with type IntegerList on
> Oracle layers.  Creating as VARCHAR.
> OCI: Prepare(ALTER TABLE STAVEBNIOBJEKTY ADD "DetailniTEAKod" VARCHAR(2047))
> 
> ? Thanks, Martin
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140418/197e32a0/attachment.html>

From landa.martin at gmail.com  Fri Apr 18 10:36:18 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 18 Apr 2014 19:36:18 +0200
Subject: [gdal-dev] gdal trunk version
Message-ID: <CA+Ei1OetLyATc=HvenXqKbAc_zDC5Gx8m1U0r5F0bXymV_uC-Q@mail.gmail.com>

Hi,

GDAL compiled from `trunk` reports [1]

GDAL 1.11.0, released 2014/04/16

which is misleading. Version 1.12 or 2.0 would be probably more
informative. Martin

[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/VERSION

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Fri Apr 18 10:43:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 18 Apr 2014 19:43:25 +0200
Subject: [gdal-dev] gdal trunk version
In-Reply-To: <CA+Ei1OetLyATc=HvenXqKbAc_zDC5Gx8m1U0r5F0bXymV_uC-Q@mail.gmail.com>
References: <CA+Ei1OetLyATc=HvenXqKbAc_zDC5Gx8m1U0r5F0bXymV_uC-Q@mail.gmail.com>
Message-ID: <201404181943.25564.even.rouault@mines-paris.org>

Le vendredi 18 avril 2014 19:36:18, Martin Landa a ?crit :
> Hi,
> 
> GDAL compiled from `trunk` reports [1]
> 
> GDAL 1.11.0, released 2014/04/16
> 
> which is misleading. Version 1.12 or 2.0 would be probably more
> informative. Martin

I've switched to 1.12dev

> 
> [1] http://trac.osgeo.org/gdal/browser/trunk/gdal/VERSION

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Fri Apr 18 11:46:04 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 18 Apr 2014 20:46:04 +0200
Subject: [gdal-dev] ogr2ogr -f OCI fails on Windows
In-Reply-To: <BLU173-W31B726EBD5F7C4E8152704905D0@phx.gbl>
References: <CA+Ei1OfSQykhiArHV-UUSJYSCMb8exvd8+9vDNfV4D29EYVsqw@mail.gmail.com>
	<BLU173-W132609D54781D1500D9BC790530@phx.gbl>
	<CA+Ei1OdvWJxks3f9xYFG-imx9BonmTdRTdEP1NOBEdu6=KSJ3g@mail.gmail.com>
	<BLU173-W31B726EBD5F7C4E8152704905D0@phx.gbl>
Message-ID: <CA+Ei1OeAJh_OncfvJgmqso4cOOHS-oj7=i_u=ywhUE7zyfsanA@mail.gmail.com>

Hi,

2014-04-18 18:55 GMT+02:00 Ivan Lucena <lucena_ivan at hotmail.com>:
> The driver should create the column as VARCHAR2, not VARCHAR [1]. It is
> wrong for several reasons [2] and there is a possibility that the amount of
> data you are loading is too big for the wrong data type. Can you change that
> code [1], compile and try again?

it didn't help so I studied the code a bit, first I tried to disable
multi load mode by

-lco "SRID=2065 MULTI_LOAD=OFF"

but it was not working, the driver still used BoundCreateFeature(), so
I tried MULTI_LOAD=OFF, but also with no success. Probably I am
overworked, but what I am doing wrong? ;-)

So I changed [1] to 'false', the finally the driver switched to single
load mode. Very strange is that using this mode, the driver wrote
features to DB without crashing. Do you have any idea what could be
the difference? Thanks in advance, Martin

[1] http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/oci/ogrocitablelayer.cpp#L829

From landa.martin at gmail.com  Fri Apr 18 14:37:47 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 18 Apr 2014 23:37:47 +0200
Subject: [gdal-dev] gdal trunk version
In-Reply-To: <201404181943.25564.even.rouault@mines-paris.org>
References: <CA+Ei1OetLyATc=HvenXqKbAc_zDC5Gx8m1U0r5F0bXymV_uC-Q@mail.gmail.com>
	<201404181943.25564.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1Ofv=sYD0qban=DFJRz-nrAetXcP=4VtPieo50qhRZRxCg@mail.gmail.com>

Hi,

2014-04-18 19:43 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> I've switched to 1.12dev

thanks, but how is possible that after running configure this file is changed

Index: VERSION
===================================================================
--- VERSION     (revision 27216)
+++ VERSION     (working copy)
@@ -1 +1 @@
-1.12dev
+1.11.0

?

Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Sat Apr 19 02:16:21 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 19 Apr 2014 11:16:21 +0200
Subject: [gdal-dev] gdal trunk version
In-Reply-To: <CA+Ei1Ofv=sYD0qban=DFJRz-nrAetXcP=4VtPieo50qhRZRxCg@mail.gmail.com>
References: <CA+Ei1OetLyATc=HvenXqKbAc_zDC5Gx8m1U0r5F0bXymV_uC-Q@mail.gmail.com>
	<201404181943.25564.even.rouault@mines-paris.org>
	<CA+Ei1Ofv=sYD0qban=DFJRz-nrAetXcP=4VtPieo50qhRZRxCg@mail.gmail.com>
Message-ID: <201404191116.21933.even.rouault@mines-paris.org>

Le vendredi 18 avril 2014 23:37:47, Martin Landa a ?crit :
> Hi,
> 
> 2014-04-18 19:43 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > I've switched to 1.12dev
> 
> thanks, but how is possible that after running configure this file is
> changed
> 
> Index: VERSION
> ===================================================================
> --- VERSION     (revision 27216)
> +++ VERSION     (working copy)
> @@ -1 +1 @@
> -1.12dev
> +1.11.0

Ah, good point. I actually forgot to increase GDAL_VERSION_MINOR in 
gcore/gdal_version.h. And when you will run configure VERSION will be set to 
"1.12.0" since configure uses the value of GDAL_VERSION_MAJOR, _MINOR, _MICRO 
and not GDAL_RELEASE_NAME. Anyway the numbering system of trunk is pretty much 
undefined between 2 official releases.

> 
> ?
> 
> Martin

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Sat Apr 19 09:22:22 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 19 Apr 2014 18:22:22 +0200
Subject: [gdal-dev] Help request to make Python bindings to build again with
	MacOS X 10.9
Message-ID: <201404191822.22260.even.rouault@mines-paris.org>

Hi,

I've noticed that since a few days our Travis-CI MacOS X job has started to fail building the Python bindings.

The last successfull build was https://travis-ci.org/rouault/gdal_coverage/builds/22998284 with
i386-apple-darwin12.5.0 (MacOSX 10.8)

The current build ( https://travis-ci.org/rouault/gdal_coverage/builds/23333274 ) fails with i386-apple-darwin13.1.0 (MacOSX 10.9)

The error is https://travis-ci.org/rouault/gdal_coverage/builds/23333274#L5311 :

creating build/temp.macosx-10.9-intel-2.7
creating build/temp.macosx-10.9-intel-2.7/extensions
cc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -
Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -I../../port -I../../gcore -I../../alg -I../../ogr/ -
I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include -
I/Users/travis/build/rouault/gdal_coverage/gdal/include -c extensions/gdal_wrap.cpp -o build/temp.macosx-10.9-intel-2.7/extensions/gdal_wrap.o
clang: error: unknown argument: '-mno-fused-madd' [-Wunused-command-line-argument-hard-error-in-future]
clang: note: this will be a hard error (cannot be downgraded to a warning) in the future
error: command 'cc' failed with exit status 1

The last successfull build had this trace :

creating build/temp.macosx-10.8-intel-2.7
creating build/temp.macosx-10.8-intel-2.7/extensions
clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -
Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I../../port -I../../gcore -I../../alg -I../../ogr/ -
I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include -
I/Users/travis/build/rouault/gdal_coverage/gdal/include -c extensions/gdal_wrap.cpp -o build/temp.macosx-10.8-intel-2.7/extensions/gdal_wrap.o
clang: warning: argument unused during compilation: '-mno-fused-madd'

So it seems that distutils add this -mno-fused-madd option that makes newer version of clang to fail.

I've found a potential fix in https://bitbucket.org/cffi/cffi/commits/a88e541 that suggest
adding "-Qunused-arguments" and tested it with http://trac.osgeo.org/gdal/changeset/27220, but it still fails ( https://travis-ci.org/rouault/gdal_coverage/builds/23341848 )

cc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -
Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -I../../port -I../../gcore -I../../alg -I../../ogr/ -
I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include -
I/Users/travis/build/rouault/gdal_coverage/gdal/include -c extensions/gdal_wrap.cpp -o build/temp.macosx-10.9-intel-2.7/extensions/gdal_wrap.o -Qunused-arguments
clang: error: unknown argument: '-mno-fused-madd' [-Wunused-command-line-argument-hard-error-in-future]
clang: note: this will be a hard error (cannot be downgraded to a warning) in the future
error: command 'cc' failed with exit status 1

Any Pythonist with a Mac that might help with that ? The file to hack into is swig/python/setup.py


Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From woklist at kyngchaos.com  Sat Apr 19 12:19:53 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat, 19 Apr 2014 14:19:53 -0500
Subject: [gdal-dev] Help request to make Python bindings to build again
	with MacOS X 10.9
In-Reply-To: <201404191822.22260.even.rouault@mines-paris.org>
References: <201404191822.22260.even.rouault@mines-paris.org>
Message-ID: <D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>

It looks like a bit of a coordination and packaging snafu with Apple.  Apple builds Python with some old flags that clang doesn't support, but clang defaulted to NOT reporting the unknown flag as error.  The recent clang 5.1 changed this default to error.

I found a discussion about it on stackoverflow:

http://stackoverflow.com/questions/22313407/clang-error-unknown-argument-mno-fused-madd-python-package-installation-fa

The -Qunused-arguments trick seems to work for some and not others.  There is another method to try (the error actually mentions it): add this to ARCHFLAGS:

-Wno-error=unused-command-line-argument-hard-error-in-future

On Apr 19, 2014, at 11:22 AM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Hi,
> 
> I've noticed that since a few days our Travis-CI MacOS X job has started to fail building the Python bindings.
> 
> The last successfull build was https://travis-ci.org/rouault/gdal_coverage/builds/22998284 with
> i386-apple-darwin12.5.0 (MacOSX 10.8)
> 
> The current build ( https://travis-ci.org/rouault/gdal_coverage/builds/23333274 ) fails with i386-apple-darwin13.1.0 (MacOSX 10.9)
> 
> The error is https://travis-ci.org/rouault/gdal_coverage/builds/23333274#L5311 :
> 
> creating build/temp.macosx-10.9-intel-2.7
> creating build/temp.macosx-10.9-intel-2.7/extensions
> cc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -
> Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -I../../port -I../../gcore -I../../alg -I../../ogr/ -
> I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include -
> I/Users/travis/build/rouault/gdal_coverage/gdal/include -c extensions/gdal_wrap.cpp -o build/temp.macosx-10.9-intel-2.7/extensions/gdal_wrap.o
> clang: error: unknown argument: '-mno-fused-madd' [-Wunused-command-line-argument-hard-error-in-future]
> clang: note: this will be a hard error (cannot be downgraded to a warning) in the future
> error: command 'cc' failed with exit status 1
> 
> The last successfull build had this trace :
> 
> creating build/temp.macosx-10.8-intel-2.7
> creating build/temp.macosx-10.8-intel-2.7/extensions
> clang -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -
> Wshorten-64-to-32 -DNDEBUG -g -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I../../port -I../../gcore -I../../alg -I../../ogr/ -
> I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include -
> I/Users/travis/build/rouault/gdal_coverage/gdal/include -c extensions/gdal_wrap.cpp -o build/temp.macosx-10.8-intel-2.7/extensions/gdal_wrap.o
> clang: warning: argument unused during compilation: '-mno-fused-madd'
> 
> So it seems that distutils add this -mno-fused-madd option that makes newer version of clang to fail.
> 
> I've found a potential fix in https://bitbucket.org/cffi/cffi/commits/a88e541 that suggest
> adding "-Qunused-arguments" and tested it with http://trac.osgeo.org/gdal/changeset/27220, but it still fails ( https://travis-ci.org/rouault/gdal_coverage/builds/23341848 )
> 
> cc -fno-strict-aliasing -fno-common -dynamic -arch x86_64 -arch i386 -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -
> Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch x86_64 -arch i386 -pipe -I../../port -I../../gcore -I../../alg -I../../ogr/ -
> I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/numpy/core/include -
> I/Users/travis/build/rouault/gdal_coverage/gdal/include -c extensions/gdal_wrap.cpp -o build/temp.macosx-10.9-intel-2.7/extensions/gdal_wrap.o -Qunused-arguments
> clang: error: unknown argument: '-mno-fused-madd' [-Wunused-command-line-argument-hard-error-in-future]
> clang: note: this will be a hard error (cannot be downgraded to a warning) in the future
> error: command 'cc' failed with exit status 1
> 
> Any Pythonist with a Mac that might help with that ? The file to hack into is swig/python/setup.py
> 
> 
> Even
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that the past isn't a fiction designed to account for the discrepancy between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From even.rouault at mines-paris.org  Sat Apr 19 12:56:15 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 19 Apr 2014 21:56:15 +0200
Subject: [gdal-dev] Help request to make Python bindings to build again
	with MacOS X 10.9
In-Reply-To: <D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>
References: <201404191822.22260.even.rouault@mines-paris.org>
	<D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>
Message-ID: <201404192156.15551.even.rouault@mines-paris.org>

Le samedi 19 avril 2014 21:19:53, William Kyngesburye a ?crit :
> It looks like a bit of a coordination and packaging snafu with Apple. 
> Apple builds Python with some old flags that clang doesn't support, but
> clang defaulted to NOT reporting the unknown flag as error.  The recent
> clang 5.1 changed this default to error.
> 
> I found a discussion about it on stackoverflow:
> 
> http://stackoverflow.com/questions/22313407/clang-error-unknown-argument-mn
> o-fused-madd-python-package-installation-fa
> 
> The -Qunused-arguments trick seems to work for some and not others.  There
> is another method to try (the error actually mentions it): add this to
> ARCHFLAGS:
> 
> -Wno-error=unused-command-line-argument-hard-error-in-future

I've not access to a Mac myself, only through Travis, which is highly 
inconvenient for trial and error attempts. Perhaps you or someone with direct 
access to a system that exhibits the issue can come up with a patch ?

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From woklist at kyngchaos.com  Sat Apr 19 14:52:11 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat, 19 Apr 2014 16:52:11 -0500
Subject: [gdal-dev] Help request to make Python bindings to build again
	with MacOS X 10.9
In-Reply-To: <201404192156.15551.even.rouault@mines-paris.org>
References: <201404191822.22260.even.rouault@mines-paris.org>
	<D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>
	<201404192156.15551.even.rouault@mines-paris.org>
Message-ID: <16005519-4443-4E32-BCB3-562FA037D132@kyngchaos.com>

On Apr 19, 2014, at 2:56 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le samedi 19 avril 2014 21:19:53, William Kyngesburye a ?crit :
>> It looks like a bit of a coordination and packaging snafu with Apple. 
>> Apple builds Python with some old flags that clang doesn't support, but
>> clang defaulted to NOT reporting the unknown flag as error.  The recent
>> clang 5.1 changed this default to error.
>> 
>> I found a discussion about it on stackoverflow:
>> 
>> http://stackoverflow.com/questions/22313407/clang-error-unknown-argument-mn
>> o-fused-madd-python-package-installation-fa
>> 
>> The -Qunused-arguments trick seems to work for some and not others.  There
>> is another method to try (the error actually mentions it): add this to
>> ARCHFLAGS:
>> 
>> -Wno-error=unused-command-line-argument-hard-error-in-future
> 
> I've not access to a Mac myself, only through Travis, which is highly 
> inconvenient for trial and error attempts. Perhaps you or someone with direct 
> access to a system that exhibits the issue can come up with a patch ?
> 

The ARCHFLAGS method worked for me.

Configure looks at ARCHFLAGS from the ENV, and it adds it to all compilation just like CFLAGS.

But python distutils will only see it if set in the ENV, before configure.  If set inline with configure command (ie configure .... ARCHFLAGS=), it doesn't get added to python compilation.

Adding it inline with the make command sets it in the environment so that only python compilation sees it, which may best so that it doesn't hide other unknown flag errors in general compilation that may need to be fixed (ie find alternatives).

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no particular pleasure I shall kill every ___ I can until the war is over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of the allied nations devoted an entire year exclusively to hating the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war


From even.rouault at mines-paris.org  Sat Apr 19 17:44:28 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 20 Apr 2014 02:44:28 +0200
Subject: [gdal-dev] Help request to make Python bindings to build again
	with MacOS X 10.9
In-Reply-To: <16005519-4443-4E32-BCB3-562FA037D132@kyngchaos.com>
References: <201404191822.22260.even.rouault@mines-paris.org>
	<D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>
	<201404192156.15551.even.rouault@mines-paris.org>
	<16005519-4443-4E32-BCB3-562FA037D132@kyngchaos.com>
Message-ID: <1397954668.5353186c3bec8@imp.free.fr>

Selon William Kyngesburye <woklist at kyngchaos.com>:

> On Apr 19, 2014, at 2:56 PM, Even Rouault <even.rouault at mines-paris.org>
> wrote:
>
> > Le samedi 19 avril 2014 21:19:53, William Kyngesburye a ?crit :
> >> It looks like a bit of a coordination and packaging snafu with Apple.
> >> Apple builds Python with some old flags that clang doesn't support, but
> >> clang defaulted to NOT reporting the unknown flag as error.  The recent
> >> clang 5.1 changed this default to error.
> >>
> >> I found a discussion about it on stackoverflow:
> >>
> >>
> http://stackoverflow.com/questions/22313407/clang-error-unknown-argument-mn
> >> o-fused-madd-python-package-installation-fa
> >>
> >> The -Qunused-arguments trick seems to work for some and not others.  There
> >> is another method to try (the error actually mentions it): add this to
> >> ARCHFLAGS:
> >>
> >> -Wno-error=unused-command-line-argument-hard-error-in-future
> >
> > I've not access to a Mac myself, only through Travis, which is highly
> > inconvenient for trial and error attempts. Perhaps you or someone with
> direct
> > access to a system that exhibits the issue can come up with a patch ?
> >
>
> The ARCHFLAGS method worked for me.
>
> Configure looks at ARCHFLAGS from the ENV, and it adds it to all compilation
> just like CFLAGS.
>
> But python distutils will only see it if set in the ENV, before configure.
> If set inline with configure command (ie configure .... ARCHFLAGS=), it
> doesn't get added to python compilation.
>
> Adding it inline with the make command sets it in the environment so that
> only python compilation sees it, which may best so that it doesn't hide other
> unknown flag errors in general compilation that may need to be fixed (ie find
> alternatives).

Based on your above hint, I've tried the following changeset
http://trac.osgeo.org/gdal/changeset/27225 but it doesn't work on Travis...
I'm not sure if the if branch is taken or not. And if it is taken is the
modified environmenet propagated to the child... (on Linux, it is...)

>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "We are at war with them. Neither in hatred nor revenge and with no
> particular pleasure I shall kill every ___ I can until the war is over. That
> is my duty."
>
> "Don't you even hate 'em?"
>
> "What good would it do if I did? If all the many millions of people of the
> allied nations devoted an entire year exclusively to hating the ____ it
> wouldn't kill one ___ nor shorten the war one day."
>
> <Ha, ha> "And it might give 'em all stomach ulcers."
>
> - Tarzan, on war
>
>



From woklist at kyngchaos.com  Sat Apr 19 19:59:42 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat, 19 Apr 2014 21:59:42 -0500
Subject: [gdal-dev] Help request to make Python bindings to build again
	with MacOS X 10.9
In-Reply-To: <1397954668.5353186c3bec8@imp.free.fr>
References: <201404191822.22260.even.rouault@mines-paris.org>
	<D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>
	<201404192156.15551.even.rouault@mines-paris.org>
	<16005519-4443-4E32-BCB3-562FA037D132@kyngchaos.com>
	<1397954668.5353186c3bec8@imp.free.fr>
Message-ID: <14E2CAAE-F2B7-40A7-86E5-C65FFEF5B5E6@kyngchaos.com>

On Apr 19, 2014, at 7:44 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Selon William Kyngesburye <woklist at kyngchaos.com>:
> 
>> On Apr 19, 2014, at 2:56 PM, Even Rouault <even.rouault at mines-paris.org>
>> wrote:
>> 
>>> Le samedi 19 avril 2014 21:19:53, William Kyngesburye a ?crit :
>>>> It looks like a bit of a coordination and packaging snafu with Apple.
>>>> Apple builds Python with some old flags that clang doesn't support, but
>>>> clang defaulted to NOT reporting the unknown flag as error.  The recent
>>>> clang 5.1 changed this default to error.
>>>> 
>>>> I found a discussion about it on stackoverflow:
>>>> 
>>>> 
>> http://stackoverflow.com/questions/22313407/clang-error-unknown-argument-mn
>>>> o-fused-madd-python-package-installation-fa
>>>> 
>>>> The -Qunused-arguments trick seems to work for some and not others.  There
>>>> is another method to try (the error actually mentions it): add this to
>>>> ARCHFLAGS:
>>>> 
>>>> -Wno-error=unused-command-line-argument-hard-error-in-future
>>> 
>>> I've not access to a Mac myself, only through Travis, which is highly
>>> inconvenient for trial and error attempts. Perhaps you or someone with
>> direct
>>> access to a system that exhibits the issue can come up with a patch ?
>>> 
>> 
>> The ARCHFLAGS method worked for me.
>> 
>> Configure looks at ARCHFLAGS from the ENV, and it adds it to all compilation
>> just like CFLAGS.
>> 
>> But python distutils will only see it if set in the ENV, before configure.
>> If set inline with configure command (ie configure .... ARCHFLAGS=), it
>> doesn't get added to python compilation.
>> 
>> Adding it inline with the make command sets it in the environment so that
>> only python compilation sees it, which may best so that it doesn't hide other
>> unknown flag errors in general compilation that may need to be fixed (ie find
>> alternatives).
> 
> Based on your above hint, I've tried the following changeset
> http://trac.osgeo.org/gdal/changeset/27225 but it doesn't work on Travis...
> I'm not sure if the if branch is taken or not. And if it is taken is the
> modified environmenet propagated to the child... (on Linux, it is...)
> 
Well, you could try leaving out the os.uname test.  clang is clang no matter what version of OS X, and it wouldn't hurt to include the option when it's already default.  Also, testing the OS version doesn't necessarily say what clang version is installed.


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From even.rouault at mines-paris.org  Sun Apr 20 02:39:59 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 20 Apr 2014 11:39:59 +0200
Subject: [gdal-dev] Help request to make Python bindings to build again
	with MacOS X 10.9
In-Reply-To: <14E2CAAE-F2B7-40A7-86E5-C65FFEF5B5E6@kyngchaos.com>
References: <201404191822.22260.even.rouault@mines-paris.org>
	<D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>
	<201404192156.15551.even.rouault@mines-paris.org>
	<16005519-4443-4E32-BCB3-562FA037D132@kyngchaos.com>
	<1397954668.5353186c3bec8@imp.free.fr>
	<14E2CAAE-F2B7-40A7-86E5-C65FFEF5B5E6@kyngchaos.com>
Message-ID: <1397986799.535395ef3207e@imp.free.fr>

> Well, you could try leaving out the os.uname test.  clang is clang no matter
> what version of OS X, and it wouldn't hurt to include the option when it's
> already default.  Also, testing the OS version doesn't necessarily say what
> clang version is installed.

Could you try leaving out test os.uname test ? It is inspired from the link I
found where they say that clang began the default compiler with Darwin >= 11.
Ideally we shouldn't break building for folks using GCC.

>
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> First Pogril: Why is life like sticking your head in a bucket filled with
> hyena offal?
> Second Pogril: I don't know.  Why IS life like sticking your head in a bucket
> filled with hyena offal?
> First Pogril: I don't know either.  Wretched, isn't it?
>
> -HitchHiker's Guide to the Galaxy
>
>
>



From schwehr at gmail.com  Sun Apr 20 06:27:06 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 20 Apr 2014 06:27:06 -0700
Subject: [gdal-dev] Help request to make Python bindings to build again
 with MacOS X 10.9
In-Reply-To: <1397986799.535395ef3207e@imp.free.fr>
References: <201404191822.22260.even.rouault@mines-paris.org>
	<D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>
	<201404192156.15551.even.rouault@mines-paris.org>
	<16005519-4443-4E32-BCB3-562FA037D132@kyngchaos.com>
	<1397954668.5353186c3bec8@imp.free.fr>
	<14E2CAAE-F2B7-40A7-86E5-C65FFEF5B5E6@kyngchaos.com>
	<1397986799.535395ef3207e@imp.free.fr>
Message-ID: <CACmBxyum9U74ACreSFr+ZQHWQ4Sk=SWdmpY3F2LN1wHHE5Z_Ow@mail.gmail.com>

http://en.wikipedia.org/wiki/Xcode#Composition  says that clang started at
xcode 4.2, for which the version numbering is decoupled from the darwin
version. There are two tables at the bottom that only sort of tell the
whole story...

http://en.wikipedia.org/wiki/Xcode#Versions_compare_table

e.g. on 10.9, I started with XCode 4.6
Thread model: posix, but currently have:

uname -r
13.1.0

xcodebuild -version
Xcode 5.1
Build version 5B130a

gcc --version
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr
--with-gxx-include-dir=/usr/include/c++/4.2.1
Apple LLVM version 5.1 (clang-503.0.38) (based on LLVM 3.4svn)
Target: x86_64-apple-darwin13.1.0
Thread model: posix

clang --version
Apple LLVM version 5.1 (clang-503.0.38) (based on LLVM 3.4svn)
Target: x86_64-apple-darwin13.1.0


On Sun, Apr 20, 2014 at 2:39 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> > Well, you could try leaving out the os.uname test.  clang is clang no
> matter
> > what version of OS X, and it wouldn't hurt to include the option when
> it's
> > already default.  Also, testing the OS version doesn't necessarily say
> what
> > clang version is installed.
>
> Could you try leaving out test os.uname test ? It is inspired from the
> link I
> found where they say that clang began the default compiler with Darwin >=
> 11.
> Ideally we shouldn't break building for folks using GCC.
>
> >
> >
> > -----
> > William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> > http://www.kyngchaos.com/
> >
> > First Pogril: Why is life like sticking your head in a bucket filled with
> > hyena offal?
> > Second Pogril: I don't know.  Why IS life like sticking your head in a
> bucket
> > filled with hyena offal?
> > First Pogril: I don't know either.  Wretched, isn't it?
> >
> > -HitchHiker's Guide to the Galaxy
> >
> >
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140420/319e0947/attachment-0001.html>

From even.rouault at mines-paris.org  Sun Apr 20 07:03:08 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 20 Apr 2014 16:03:08 +0200
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
Message-ID: <201404201603.08493.even.rouault@mines-paris.org>

Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final release.

---

No critical issue has been specifically reported on RC1 so far, so I invite PSC 
members to vote on this motion after doing your own testing and validation. 
Input from everyone else who can test it is also very welcome.

I'll start the voting with my :

+1 Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sun Apr 20 07:21:40 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 20 Apr 2014 16:21:40 +0200
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <201404201603.08493.even.rouault@mines-paris.org>
References: <201404201603.08493.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1Oc==cAC-hnMXx+1mEofSMG6fFCE2aWpO3y2LoTLRXDG-Q@mail.gmail.com>

Hi,

2014-04-20 16:03 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final release.
>
> ---
>
> No critical issue has been specifically reported on RC1 so far, so I invite PSC
> members to vote on this motion after doing your own testing and validation.
> Input from everyone else who can test it is also very welcome.

sorry for the noise, I would just expect that RC period will take
about two weeks. In any case no objections, just my 2eurocents, Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Sun Apr 20 07:56:16 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 20 Apr 2014 16:56:16 +0200
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <CA+Ei1Oc==cAC-hnMXx+1mEofSMG6fFCE2aWpO3y2LoTLRXDG-Q@mail.gmail.com>
References: <201404201603.08493.even.rouault@mines-paris.org>
	<CA+Ei1Oc==cAC-hnMXx+1mEofSMG6fFCE2aWpO3y2LoTLRXDG-Q@mail.gmail.com>
Message-ID: <201404201656.16516.even.rouault@mines-paris.org>

Le dimanche 20 avril 2014 16:21:40, Martin Landa a ?crit :
> Hi,
> 
> 2014-04-20 16:03 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final
> > release.
> > 
> > ---
> > 
> > No critical issue has been specifically reported on RC1 so far, so I
> > invite PSC members to vote on this motion after doing your own testing
> > and validation. Input from everyone else who can test it is also very
> > welcome.
> 
> sorry for the noise, I would just expect that RC period will take
> about two weeks. In any case no objections, just my 2eurocents, Martin

There is no hard rule for that. In the past, AFAICS, the vote for promoting a 
RC was asked just 2 or 3 days after issuing it. And Beta1 was released on the 
4th, so more than 2 weeks. I don't see the benefit in waiting more, unless 
there are people who would express the need for some more time to test it.
I think that there are 2 categories of people : early adopters who track trunk 
on a regular basis, or more cautious users who wait for the official release.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From schwehr at gmail.com  Sun Apr 20 08:36:58 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 20 Apr 2014 08:36:58 -0700
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <201404201656.16516.even.rouault@mines-paris.org>
References: <201404201603.08493.even.rouault@mines-paris.org>
	<CA+Ei1Oc==cAC-hnMXx+1mEofSMG6fFCE2aWpO3y2LoTLRXDG-Q@mail.gmail.com>
	<201404201656.16516.even.rouault@mines-paris.org>
Message-ID: <CACmBxyt1E1kETYwKNKOuECCBb2q+6W+BvqgTU3hXMoNMGYvz0w@mail.gmail.com>

Pretty much everything working with fink on the mac on 10.9 with xcode 5.1
and fink's python 2.7.  Test results below.  Created one new issue.

-kurt

test_gdaltindex4 failing: http://trac.osgeo.org/gdal/ticket/5440

Packaging files:
https://github.com/schwehr/fink-10.9/tree/1fd286b6f90a56803c8838789e1b84080a7c386b/libs

Autotest results: http://schwehr.org/gdal/gdal-1.11.0RC1-autotest.txt

Succeeded: 2876
Failed:    42 (10 blew exceptions)
Skipped:   753
Expected fail:12
Duration:  05m34.0s
As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 109 tests
relying on data to downloaded from the Web have been skipped
As GDAL_RUN_SLOW_TESTS environment variable is not defined, 22 "slow" tests
have been skipped

grep fail gdal-1.11.0RC1-autotest.txt | grep TEST
  TEST: ogr_couchdb_SetAttributeFilter ... ERROR 1: Filter creation failed
: unauthorized, You are not a db or server admin.
  TEST: gdal_api_proxy_3 ... Fails on MacOSX ('ERROR 1: posix_spawnp()
failed'. Not sure why.
  TEST: jpeg_1 ... fail


    line 435: Checksum for band 2 in "albania.jpg" is 34296, but expected
17016.

fink list -i libjpeg
 i   libjpeg9-shlibs           9a-1                Shared libraries for
libjpeg package


  TEST: lcp_17 ... expected_fail
  TEST: mbtiles_2 ... fail
  TEST: mem_6 ... python(82931,0x7fff7b8b0310) malloc: ***
mach_vm_map(size=18446744004990078976) failed (error code=3)
  TEST: rasterlite_2 ... fail
  TEST: webp_2 ... fail
  TEST: test_gdaltindex_4 ... fail
  TEST: test_gdaltindex_5 ... fail
  TEST: test_gdalwarp_18 ... fail
  TEST: ogr_osm_3 ... fail (blowup)
  TEST: ogr_osm_3_sqlite_nodes ... fail (blowup)
  TEST: ogr_osm_3_custom_compress_nodes ... fail (blowup)
  TEST: ogr_osm_6 ... fail
  TEST: basic_test_8 ... fail
  TEST: http_4 ... fail
  TEST: jpeg_1 ... fail
  TEST: jpeg_16 ... fail
  TEST: jpeg2000_8 ... fail
  TEST: mbtiles_2 ... fail
  TEST: png_copy_icc ... fail (blowup)
  TEST: png_copy_options_icc ... fail (blowup)
  TEST: rasterlite_2 ... fail
  TEST: webp_2 ... fail
  TEST: webp_3 ... fail
  TEST: webp_4 ... fail
  TEST: warp_27 ... fail (blowup)
  TEST: warp_38 ... fail
  TEST: warp_39 ... fail
  TEST: warp_39 ... fail
  TEST: test_gdalinfo_11 ... fail
  TEST: test_gdalinfo_13 ... fail
  TEST: test_gdaltindex_4 ... fail
  TEST: test_gdaltindex_5 ... fail
  TEST: test_gdaltransform_5 ... fail (blowup)
  TEST: test_gdaltransform_7 ... fail (blowup)
  TEST: test_gdalwarp_4 ... fail
  TEST: test_gdalwarp_15 ... fail
  TEST: test_gdalwarp_18 ... fail
  TEST: test_gdalwarp_24 ... fail
  TEST: test_gdalwarp_25 ... fail
  TEST: test_gdalwarp_26 ... fail
  TEST: test_gdalwarp_27 ... fail
  TEST: test_gdalwarp_28 ... fail
  TEST: test_gdalwarp_29 ... fail
  TEST: test_gdalwarp_30 ... fail (blowup)
  TEST: test_gdalwarp_31 ... fail
  TEST: test_ogr2ogr_18 ... fail (blowup)
  TEST: test_ogr2ogr_46 ... fail
  TEST: test_ogr2ogr_47 ... fail
  TEST: test_ogrinfo_12 ... fail
  TEST: test_ogrlineref_1 ... fail


On Sun, Apr 20, 2014 at 7:56 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le dimanche 20 avril 2014 16:21:40, Martin Landa a ?crit :
> > Hi,
> >
> > 2014-04-20 16:03 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > > Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final
> > > release.
> > >
> > > ---
> > >
> > > No critical issue has been specifically reported on RC1 so far, so I
> > > invite PSC members to vote on this motion after doing your own testing
> > > and validation. Input from everyone else who can test it is also very
> > > welcome.
> >
> > sorry for the noise, I would just expect that RC period will take
> > about two weeks. In any case no objections, just my 2eurocents, Martin
>
> There is no hard rule for that. In the past, AFAICS, the vote for
> promoting a
> RC was asked just 2 or 3 days after issuing it. And Beta1 was released on
> the
> 4th, so more than 2 weeks. I don't see the benefit in waiting more, unless
> there are people who would express the need for some more time to test it.
> I think that there are 2 categories of people : early adopters who track
> trunk
> on a regular basis, or more cautious users who wait for the official
> release.
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140420/0b402fdd/attachment.html>

From woklist at kyngchaos.com  Sun Apr 20 08:50:30 2014
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun, 20 Apr 2014 10:50:30 -0500
Subject: [gdal-dev] Help request to make Python bindings to build again
	with MacOS X 10.9
In-Reply-To: <1397986799.535395ef3207e@imp.free.fr>
References: <201404191822.22260.even.rouault@mines-paris.org>
	<D2FCF4E3-359E-484F-B307-7D673063FE1C@kyngchaos.com>
	<201404192156.15551.even.rouault@mines-paris.org>
	<16005519-4443-4E32-BCB3-562FA037D132@kyngchaos.com>
	<1397954668.5353186c3bec8@imp.free.fr>
	<14E2CAAE-F2B7-40A7-86E5-C65FFEF5B5E6@kyngchaos.com>
	<1397986799.535395ef3207e@imp.free.fr>
Message-ID: <F0998D54-4A66-48F3-B90D-D2CAFC967585@kyngchaos.com>


On Apr 20, 2014, at 4:39 AM, Even Rouault <even.rouault at mines-paris.org> wrote:

>> Well, you could try leaving out the os.uname test.  clang is clang no matter
>> what version of OS X, and it wouldn't hurt to include the option when it's
>> already default.  Also, testing the OS version doesn't necessarily say what
>> clang version is installed.
> 
> Could you try leaving out test os.uname test ? It is inspired from the link I
> found where they say that clang began the default compiler with Darwin >= 11.
> Ideally we shouldn't break building for folks using GCC.
> 
Actually, the os.uname test works for me.  I have OS X 10.8.5 (uname version 12.5.0) and Xcode 5.1 (clang 5.1).

Maybe there is something weird in the Travis system.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect



From even.rouault at mines-paris.org  Sun Apr 20 08:50:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 20 Apr 2014 17:50:47 +0200
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <CACmBxyt1E1kETYwKNKOuECCBb2q+6W+BvqgTU3hXMoNMGYvz0w@mail.gmail.com>
References: <201404201603.08493.even.rouault@mines-paris.org>
	<201404201656.16516.even.rouault@mines-paris.org>
	<CACmBxyt1E1kETYwKNKOuECCBb2q+6W+BvqgTU3hXMoNMGYvz0w@mail.gmail.com>
Message-ID: <201404201750.47257.even.rouault@mines-paris.org>

Le dimanche 20 avril 2014 17:36:58, Kurt Schwehr a ?crit :
> Pretty much everything working with fink on the mac on 10.9 with xcode 5.1
> and fink's python 2.7.  Test results below.  Created one new issue.

Most of the failed tests are due to the fact that you don't have proj.4 
installed : it is pretty much a requirement for successfull tests. The Mac 
Travis CI instance used to pass the tests (when it built...)

JPEG failed tests must be due to libjpeg 9 and subtle differences in 
compression/decompression. You could likely add the checksum values you get in 
the possible expected values.

Not sure why you get failures with osm however. Would be interesting to 
compare with GDAL 1.10.1.

The failures in png_copy_icc might perhaps be due to the libpng version you 
are using.

> 
> -kurt
> 
> test_gdaltindex4 failing: http://trac.osgeo.org/gdal/ticket/5440
> 
> Packaging files:
> https://github.com/schwehr/fink-10.9/tree/1fd286b6f90a56803c8838789e1b84080
> a7c386b/libs
> 
> Autotest results: http://schwehr.org/gdal/gdal-1.11.0RC1-autotest.txt
> 
> Succeeded: 2876
> Failed:    42 (10 blew exceptions)
> Skipped:   753
> Expected fail:12
> Duration:  05m34.0s
> As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 109 tests
> relying on data to downloaded from the Web have been skipped
> As GDAL_RUN_SLOW_TESTS environment variable is not defined, 22 "slow" tests
> have been skipped
> 
> grep fail gdal-1.11.0RC1-autotest.txt | grep TEST
>   TEST: ogr_couchdb_SetAttributeFilter ... ERROR 1: Filter creation failed
> 
> : unauthorized, You are not a db or server admin.
> 
>   TEST: gdal_api_proxy_3 ... Fails on MacOSX ('ERROR 1: posix_spawnp()
> failed'. Not sure why.
>   TEST: jpeg_1 ... fail
> 
> 
>     line 435: Checksum for band 2 in "albania.jpg" is 34296, but expected
> 17016.
> 
> fink list -i libjpeg
>  i   libjpeg9-shlibs           9a-1                Shared libraries for
> libjpeg package
> 
> 
>   TEST: lcp_17 ... expected_fail
>   TEST: mbtiles_2 ... fail
>   TEST: mem_6 ... python(82931,0x7fff7b8b0310) malloc: ***
> mach_vm_map(size=18446744004990078976) failed (error code=3)
>   TEST: rasterlite_2 ... fail
>   TEST: webp_2 ... fail
>   TEST: test_gdaltindex_4 ... fail
>   TEST: test_gdaltindex_5 ... fail
>   TEST: test_gdalwarp_18 ... fail
>   TEST: ogr_osm_3 ... fail (blowup)
>   TEST: ogr_osm_3_sqlite_nodes ... fail (blowup)
>   TEST: ogr_osm_3_custom_compress_nodes ... fail (blowup)
>   TEST: ogr_osm_6 ... fail
>   TEST: basic_test_8 ... fail
>   TEST: http_4 ... fail
>   TEST: jpeg_1 ... fail
>   TEST: jpeg_16 ... fail
>   TEST: jpeg2000_8 ... fail
>   TEST: mbtiles_2 ... fail
>   TEST: png_copy_icc ... fail (blowup)
>   TEST: png_copy_options_icc ... fail (blowup)
>   TEST: rasterlite_2 ... fail
>   TEST: webp_2 ... fail
>   TEST: webp_3 ... fail
>   TEST: webp_4 ... fail
>   TEST: warp_27 ... fail (blowup)
>   TEST: warp_38 ... fail
>   TEST: warp_39 ... fail
>   TEST: warp_39 ... fail
>   TEST: test_gdalinfo_11 ... fail
>   TEST: test_gdalinfo_13 ... fail
>   TEST: test_gdaltindex_4 ... fail
>   TEST: test_gdaltindex_5 ... fail
>   TEST: test_gdaltransform_5 ... fail (blowup)
>   TEST: test_gdaltransform_7 ... fail (blowup)
>   TEST: test_gdalwarp_4 ... fail
>   TEST: test_gdalwarp_15 ... fail
>   TEST: test_gdalwarp_18 ... fail
>   TEST: test_gdalwarp_24 ... fail
>   TEST: test_gdalwarp_25 ... fail
>   TEST: test_gdalwarp_26 ... fail
>   TEST: test_gdalwarp_27 ... fail
>   TEST: test_gdalwarp_28 ... fail
>   TEST: test_gdalwarp_29 ... fail
>   TEST: test_gdalwarp_30 ... fail (blowup)
>   TEST: test_gdalwarp_31 ... fail
>   TEST: test_ogr2ogr_18 ... fail (blowup)
>   TEST: test_ogr2ogr_46 ... fail
>   TEST: test_ogr2ogr_47 ... fail
>   TEST: test_ogrinfo_12 ... fail
>   TEST: test_ogrlineref_1 ... fail
> 
> 
> On Sun, Apr 20, 2014 at 7:56 AM, Even Rouault
> 
> <even.rouault at mines-paris.org>wrote:
> > Le dimanche 20 avril 2014 16:21:40, Martin Landa a ?crit :
> > > Hi,
> > > 
> > > 2014-04-20 16:03 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > > > Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0
> > > > final release.
> > > > 
> > > > ---
> > > > 
> > > > No critical issue has been specifically reported on RC1 so far, so I
> > > > invite PSC members to vote on this motion after doing your own
> > > > testing and validation. Input from everyone else who can test it is
> > > > also very welcome.
> > > 
> > > sorry for the noise, I would just expect that RC period will take
> > > about two weeks. In any case no objections, just my 2eurocents, Martin
> > 
> > There is no hard rule for that. In the past, AFAICS, the vote for
> > promoting a
> > RC was asked just 2 or 3 days after issuing it. And Beta1 was released on
> > the
> > 4th, so more than 2 weeks. I don't see the benefit in waiting more,
> > unless there are people who would express the need for some more time to
> > test it. I think that there are 2 categories of people : early adopters
> > who track trunk
> > on a regular basis, or more cautious users who wait for the official
> > release.
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From schwehr at gmail.com  Sun Apr 20 09:20:58 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 20 Apr 2014 09:20:58 -0700
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <201404201750.47257.even.rouault@mines-paris.org>
References: <201404201603.08493.even.rouault@mines-paris.org>
	<201404201656.16516.even.rouault@mines-paris.org>
	<CACmBxyt1E1kETYwKNKOuECCBb2q+6W+BvqgTU3hXMoNMGYvz0w@mail.gmail.com>
	<201404201750.47257.even.rouault@mines-paris.org>
Message-ID: <CACmBxysByvLx1fx4WyJvSy-MbmD46T=d0Q-d8OkiiN+AiqtkuA@mail.gmail.com>

The proj.4 comment confuses me...

./configure ... --with-static-proj4=/sw ...

checking how to link PROJ.4 library... link statically.
checking for pj_init in -lproj... yes

  Statically link PROJ.4:    yes

What am I missing?



The jpeg and png issues are (if I remember the discussions a few months
back) expected.

fink list -i proj libjpeg libpng16 | grep -v system
 i libjpeg-bin 9a-1 Executables for libjpeg package
 i libjpeg9 9a-1 JPEG image format handling library
 i libjpeg9-shlibs 9a-1 Shared libraries for libjpeg package
 i libpng16 1.6.10-1 PNG image format handling library
 i libpng16-shlibs 1.6.10-1 Shared libraries for libpng16 package
 i proj 4.8.0-3 Cartographic projections library
 i proj-bin 4.8.0-3 Cartographic projections library
 i proj-shlibs 4.8.0-3 Cartographic projections library

otool -L /sw/bin/gdalinfo  | egrep 'jpeg|png'
/sw/lib/libjpeg.9.dylib (compatibility version 11.0.0, current version
11.0.0)
/sw/lib/libpng16.16.dylib (compatibility version 27.0.0, current version
27.0.0)












On Sun, Apr 20, 2014 at 8:50 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le dimanche 20 avril 2014 17:36:58, Kurt Schwehr a ?crit :
> > Pretty much everything working with fink on the mac on 10.9 with xcode
> 5.1
> > and fink's python 2.7.  Test results below.  Created one new issue.
>
> Most of the failed tests are due to the fact that you don't have proj.4
> installed : it is pretty much a requirement for successfull tests. The Mac
> Travis CI instance used to pass the tests (when it built...)
>
> JPEG failed tests must be due to libjpeg 9 and subtle differences in
> compression/decompression. You could likely add the checksum values you
> get in
> the possible expected values.
>
> Not sure why you get failures with osm however. Would be interesting to
> compare with GDAL 1.10.1.
>
> The failures in png_copy_icc might perhaps be due to the libpng version you
> are using.
>
> >
> > -kurt
> >
> > test_gdaltindex4 failing: http://trac.osgeo.org/gdal/ticket/5440
> >
> > Packaging files:
> >
> https://github.com/schwehr/fink-10.9/tree/1fd286b6f90a56803c8838789e1b84080
> > a7c386b/libs
> >
> > Autotest results: http://schwehr.org/gdal/gdal-1.11.0RC1-autotest.txt
> >
> > Succeeded: 2876
> > Failed:    42 (10 blew exceptions)
> > Skipped:   753
> > Expected fail:12
> > Duration:  05m34.0s
> > As GDAL_DOWNLOAD_TEST_DATA environment variable is not defined, 109 tests
> > relying on data to downloaded from the Web have been skipped
> > As GDAL_RUN_SLOW_TESTS environment variable is not defined, 22 "slow"
> tests
> > have been skipped
> >
> > grep fail gdal-1.11.0RC1-autotest.txt | grep TEST
> >   TEST: ogr_couchdb_SetAttributeFilter ... ERROR 1: Filter creation
> failed
> >
> > : unauthorized, You are not a db or server admin.
> >
> >   TEST: gdal_api_proxy_3 ... Fails on MacOSX ('ERROR 1: posix_spawnp()
> > failed'. Not sure why.
> >   TEST: jpeg_1 ... fail
> >
> >
> >     line 435: Checksum for band 2 in "albania.jpg" is 34296, but expected
> > 17016.
> >
> > fink list -i libjpeg
> >  i   libjpeg9-shlibs           9a-1                Shared libraries for
> > libjpeg package
> >
> >
> >   TEST: lcp_17 ... expected_fail
> >   TEST: mbtiles_2 ... fail
> >   TEST: mem_6 ... python(82931,0x7fff7b8b0310) malloc: ***
> > mach_vm_map(size=18446744004990078976) failed (error code=3)
> >   TEST: rasterlite_2 ... fail
> >   TEST: webp_2 ... fail
> >   TEST: test_gdaltindex_4 ... fail
> >   TEST: test_gdaltindex_5 ... fail
> >   TEST: test_gdalwarp_18 ... fail
> >   TEST: ogr_osm_3 ... fail (blowup)
> >   TEST: ogr_osm_3_sqlite_nodes ... fail (blowup)
> >   TEST: ogr_osm_3_custom_compress_nodes ... fail (blowup)
> >   TEST: ogr_osm_6 ... fail
> >   TEST: basic_test_8 ... fail
> >   TEST: http_4 ... fail
> >   TEST: jpeg_1 ... fail
> >   TEST: jpeg_16 ... fail
> >   TEST: jpeg2000_8 ... fail
> >   TEST: mbtiles_2 ... fail
> >   TEST: png_copy_icc ... fail (blowup)
> >   TEST: png_copy_options_icc ... fail (blowup)
> >   TEST: rasterlite_2 ... fail
> >   TEST: webp_2 ... fail
> >   TEST: webp_3 ... fail
> >   TEST: webp_4 ... fail
> >   TEST: warp_27 ... fail (blowup)
> >   TEST: warp_38 ... fail
> >   TEST: warp_39 ... fail
> >   TEST: warp_39 ... fail
> >   TEST: test_gdalinfo_11 ... fail
> >   TEST: test_gdalinfo_13 ... fail
> >   TEST: test_gdaltindex_4 ... fail
> >   TEST: test_gdaltindex_5 ... fail
> >   TEST: test_gdaltransform_5 ... fail (blowup)
> >   TEST: test_gdaltransform_7 ... fail (blowup)
> >   TEST: test_gdalwarp_4 ... fail
> >   TEST: test_gdalwarp_15 ... fail
> >   TEST: test_gdalwarp_18 ... fail
> >   TEST: test_gdalwarp_24 ... fail
> >   TEST: test_gdalwarp_25 ... fail
> >   TEST: test_gdalwarp_26 ... fail
> >   TEST: test_gdalwarp_27 ... fail
> >   TEST: test_gdalwarp_28 ... fail
> >   TEST: test_gdalwarp_29 ... fail
> >   TEST: test_gdalwarp_30 ... fail (blowup)
> >   TEST: test_gdalwarp_31 ... fail
> >   TEST: test_ogr2ogr_18 ... fail (blowup)
> >   TEST: test_ogr2ogr_46 ... fail
> >   TEST: test_ogr2ogr_47 ... fail
> >   TEST: test_ogrinfo_12 ... fail
> >   TEST: test_ogrlineref_1 ... fail
> >
> >
> > On Sun, Apr 20, 2014 at 7:56 AM, Even Rouault
> >
> > <even.rouault at mines-paris.org>wrote:
> > > Le dimanche 20 avril 2014 16:21:40, Martin Landa a ?crit :
> > > > Hi,
> > > >
> > > > 2014-04-20 16:03 GMT+02:00 Even Rouault <
> even.rouault at mines-paris.org>:
> > > > > Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0
> > > > > final release.
> > > > >
> > > > > ---
> > > > >
> > > > > No critical issue has been specifically reported on RC1 so far, so
> I
> > > > > invite PSC members to vote on this motion after doing your own
> > > > > testing and validation. Input from everyone else who can test it is
> > > > > also very welcome.
> > > >
> > > > sorry for the noise, I would just expect that RC period will take
> > > > about two weeks. In any case no objections, just my 2eurocents,
> Martin
> > >
> > > There is no hard rule for that. In the past, AFAICS, the vote for
> > > promoting a
> > > RC was asked just 2 or 3 days after issuing it. And Beta1 was released
> on
> > > the
> > > 4th, so more than 2 weeks. I don't see the benefit in waiting more,
> > > unless there are people who would express the need for some more time
> to
> > > test it. I think that there are 2 categories of people : early adopters
> > > who track trunk
> > > on a regular basis, or more cautious users who wait for the official
> > > release.
> > >
> > > --
> > > Geospatial professional services
> > > http://even.rouault.free.fr/services.html
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140420/b360af7d/attachment.html>

From even.rouault at mines-paris.org  Sun Apr 20 10:38:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 20 Apr 2014 19:38:24 +0200
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <CACmBxysByvLx1fx4WyJvSy-MbmD46T=d0Q-d8OkiiN+AiqtkuA@mail.gmail.com>
References: <201404201603.08493.even.rouault@mines-paris.org>
	<201404201750.47257.even.rouault@mines-paris.org>
	<CACmBxysByvLx1fx4WyJvSy-MbmD46T=d0Q-d8OkiiN+AiqtkuA@mail.gmail.com>
Message-ID: <201404201938.24759.even.rouault@mines-paris.org>

Le dimanche 20 avril 2014 18:20:58, Kurt Schwehr a ?crit :
> The proj.4 comment confuses me...
> 
> ./configure ... --with-static-proj4=/sw ...
> 
> checking how to link PROJ.4 library... link statically.
> checking for pj_init in -lproj... yes
> 
>   Statically link PROJ.4:    yes
> 
> What am I missing?
> 

Hum, perhaps you only added --with-static-proj4 after a first build without it 
? If so, touch ogr/ogrct.cpp before rebuilding.

> 
> 
> The jpeg and png issues are (if I remember the discussions a few months
> back) expected.

Would be good if someone could update the checksums...

> 
> fink list -i proj libjpeg libpng16 | grep -v system
>  i libjpeg-bin 9a-1 Executables for libjpeg package
>  i libjpeg9 9a-1 JPEG image format handling library
>  i libjpeg9-shlibs 9a-1 Shared libraries for libjpeg package
>  i libpng16 1.6.10-1 PNG image format handling library
>  i libpng16-shlibs 1.6.10-1 Shared libraries for libpng16 package
>  i proj 4.8.0-3 Cartographic projections library
>  i proj-bin 4.8.0-3 Cartographic projections library
>  i proj-shlibs 4.8.0-3 Cartographic projections library
> 
> otool -L /sw/bin/gdalinfo  | egrep 'jpeg|png'
> /sw/lib/libjpeg.9.dylib (compatibility version 11.0.0, current version
> 11.0.0)
> /sw/lib/libpng16.16.dylib (compatibility version 27.0.0, current version
> 27.0.0)
> 

I've reproduced the issue with the ICC profile with libpng 1.6.10 too. Filed as 
http://trac.osgeo.org/gdal/ticket/5441. Probably just an issue with the test 
data and libpng being pickier in recent versions.


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sun Apr 20 16:49:59 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 21 Apr 2014 01:49:59 +0200
Subject: [gdal-dev] [EXTERNAL] Re: ogr oracle multiple geometries
In-Reply-To: <CF734163.EDDF2%michael.smith@erdc.dren.mil>
References: <CA+Ei1Oc+9maBka9mLAfDqjBSQGT0AhfomNOAN82whXkf6xfihQ@mail.gmail.com>
	<201404160029.29587.even.rouault@mines-paris.org>
	<CF734163.EDDF2%michael.smith@erdc.dren.mil>
Message-ID: <CA+Ei1Of23X7u06_7ZOQ8Y8xyJhzxrP9sNeFAGvwXG2oCdCD0pw@mail.gmail.com>

Hi,

2014-04-16 2:05 GMT+02:00 Smith, Michael ERDC-RDE-CRREL-NH
<Michael.Smith at erdc.dren.mil>:
> Oracle does support multiple geometry columns per table.

>>all, but even if it does, nobody has upgraded yet the driver to RFC 41.

OK, I started to work on it. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From schwehr at gmail.com  Sun Apr 20 21:26:02 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 20 Apr 2014 21:26:02 -0700
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <201404201938.24759.even.rouault@mines-paris.org>
References: <201404201603.08493.even.rouault@mines-paris.org>
	<201404201750.47257.even.rouault@mines-paris.org>
	<CACmBxysByvLx1fx4WyJvSy-MbmD46T=d0Q-d8OkiiN+AiqtkuA@mail.gmail.com>
	<201404201938.24759.even.rouault@mines-paris.org>
Message-ID: <CACmBxytnyUXueJiXF79_Jo6fkfOyGvPiuvjD-_EgkOx72APMDA@mail.gmail.com>

What in the test output says that I don't have a working proj4?

Thanks for the clarifications on the other points.  I can update the
checksums tomorrow.

-kurt


On Sun, Apr 20, 2014 at 10:38 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le dimanche 20 avril 2014 18:20:58, Kurt Schwehr a ?crit :
> > The proj.4 comment confuses me...
> >
> > ./configure ... --with-static-proj4=/sw ...
> >
> > checking how to link PROJ.4 library... link statically.
> > checking for pj_init in -lproj... yes
> >
> >   Statically link PROJ.4:    yes
> >
> > What am I missing?
> >
>
> Hum, perhaps you only added --with-static-proj4 after a first build
> without it
> ? If so, touch ogr/ogrct.cpp before rebuilding.
>
> >
> >
> > The jpeg and png issues are (if I remember the discussions a few months
> > back) expected.
>
> Would be good if someone could update the checksums...
>
> >
> > fink list -i proj libjpeg libpng16 | grep -v system
> >  i libjpeg-bin 9a-1 Executables for libjpeg package
> >  i libjpeg9 9a-1 JPEG image format handling library
> >  i libjpeg9-shlibs 9a-1 Shared libraries for libjpeg package
> >  i libpng16 1.6.10-1 PNG image format handling library
> >  i libpng16-shlibs 1.6.10-1 Shared libraries for libpng16 package
> >  i proj 4.8.0-3 Cartographic projections library
> >  i proj-bin 4.8.0-3 Cartographic projections library
> >  i proj-shlibs 4.8.0-3 Cartographic projections library
> >
> > otool -L /sw/bin/gdalinfo  | egrep 'jpeg|png'
> > /sw/lib/libjpeg.9.dylib (compatibility version 11.0.0, current version
> > 11.0.0)
> > /sw/lib/libpng16.16.dylib (compatibility version 27.0.0, current version
> > 27.0.0)
> >
>
> I've reproduced the issue with the ICC profile with libpng 1.6.10 too.
> Filed as
> http://trac.osgeo.org/gdal/ticket/5441. Probably just an issue with the
> test
> data and libpng being pickier in recent versions.
>
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140420/6cd7a7ff/attachment.html>

From even.rouault at mines-paris.org  Mon Apr 21 02:31:58 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 21 Apr 2014 11:31:58 +0200
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <CACmBxytnyUXueJiXF79_Jo6fkfOyGvPiuvjD-_EgkOx72APMDA@mail.gmail.com>
References: <201404201603.08493.even.rouault@mines-paris.org>
	<201404201938.24759.even.rouault@mines-paris.org>
	<CACmBxytnyUXueJiXF79_Jo6fkfOyGvPiuvjD-_EgkOx72APMDA@mail.gmail.com>
Message-ID: <201404211131.58566.even.rouault@mines-paris.org>

Le lundi 21 avril 2014 06:26:02, vous avez ?crit :
> What in the test output says that I don't have a working proj4?

  TEST: warp_27 ... ERROR 6: Unable to load PROJ.4 library (libproj.dylib), 
creation of
OGRCoordinateTransformation failed.

> 
> Thanks for the clarifications on the other points.  I can update the
> checksums tomorrow.
> 
> -kurt
> 
> 
> On Sun, Apr 20, 2014 at 10:38 AM, Even Rouault
> <even.rouault at mines-paris.org
> 
> > wrote:
> > 
> > Le dimanche 20 avril 2014 18:20:58, Kurt Schwehr a ?crit :
> > > The proj.4 comment confuses me...
> > > 
> > > ./configure ... --with-static-proj4=/sw ...
> > > 
> > > checking how to link PROJ.4 library... link statically.
> > > checking for pj_init in -lproj... yes
> > > 
> > >   Statically link PROJ.4:    yes
> > > 
> > > What am I missing?
> > 
> > Hum, perhaps you only added --with-static-proj4 after a first build
> > without it
> > ? If so, touch ogr/ogrct.cpp before rebuilding.
> > 
> > > The jpeg and png issues are (if I remember the discussions a few months
> > > back) expected.
> > 
> > Would be good if someone could update the checksums...
> > 
> > > fink list -i proj libjpeg libpng16 | grep -v system
> > > 
> > >  i libjpeg-bin 9a-1 Executables for libjpeg package
> > >  i libjpeg9 9a-1 JPEG image format handling library
> > >  i libjpeg9-shlibs 9a-1 Shared libraries for libjpeg package
> > >  i libpng16 1.6.10-1 PNG image format handling library
> > >  i libpng16-shlibs 1.6.10-1 Shared libraries for libpng16 package
> > >  i proj 4.8.0-3 Cartographic projections library
> > >  i proj-bin 4.8.0-3 Cartographic projections library
> > >  i proj-shlibs 4.8.0-3 Cartographic projections library
> > > 
> > > otool -L /sw/bin/gdalinfo  | egrep 'jpeg|png'
> > > /sw/lib/libjpeg.9.dylib (compatibility version 11.0.0, current version
> > > 11.0.0)
> > > /sw/lib/libpng16.16.dylib (compatibility version 27.0.0, current
> > > version 27.0.0)
> > 
> > I've reproduced the issue with the ICC profile with libpng 1.6.10 too.
> > Filed as
> > http://trac.osgeo.org/gdal/ticket/5441. Probably just an issue with the
> > test
> > data and libpng being pickier in recent versions.
> > 
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Mon Apr 21 14:19:37 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 21 Apr 2014 23:19:37 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <5528882.3vNYGoMnkh@helios>
References: <7165283.68thpVR9us@helios>
	<201404062335.46696.even.rouault@mines-paris.org>
	<5528882.3vNYGoMnkh@helios>
Message-ID: <201404212319.37539.even.rouault@mines-paris.org>

Le lundi 21 avril 2014 23:02:28, Yves Jacolin a ?crit :
> Even,
> 
> All is working fine now (ubuntu 14.04 now)
> 
> I have only the known error:
> 
> ERROR 1: ogrinfo was compiled against GDAL 1.11 but current library version
> is 1.12

since the version number is upgraded in trunk you have to do a full rebuild :
--> make clean; make


> 
> (From git repository)
> 
> Y.
> 
> Le dimanche 6 avril 2014, 23:35:46 Even Rouault a ?crit :
> > Le dimanche 06 avril 2014 22:36:06, Yves Jacolin a ?crit :
> > > Le dimanche 6 avril 2014, 22:31:40 Even Rouault a ?crit :
> > > > Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> > > > > Hello,
> > > > > 
> > > > > I tried to build gdal from git repository with MySQL:
> > > > > 
> > > > > checking for mysql_config... /usr/bin/mysql_config
> > > > > checking for MySQL... yes
> > > > > checking load_defaults() in MySQL... configure: error: Cannot find
> > > > > load_defaults()
> > > > > 
> > > > > Any idea?
> > > > 
> > > > Which mysql version ?
> > > > Which Linux distro ?
> > > 
> > > Even,
> > > 
> > > $ msqyl --version
> > > mysql  Ver 14.14 Distrib 5.5.35, for debian-linux-gnu (x86_64) using
> > > readline 6.2
> > > Distro : Ubuntu 13.10
> > 
> > Yves
> > 
> > hum, I've just installed Ubuntu 13.10 Desktop 64bit in a fresh VM and
> > installed the libmysqlclient-dev package and
> > 
> > ./configure --with-mysql
> > 
> > and it works and compiles fine.
> > 
> > So I suspect that it is due to other dependencies you've installed. Could
> > you give the full ./configure line with the options you've used and its
> > output ? And also the packages.txt file resulting from "dpkg -l >
> > packages.txt" config.log might also help.
> > 
> > Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From yjacolin at free.fr  Mon Apr 21 14:02:28 2014
From: yjacolin at free.fr (Yves Jacolin)
Date: Mon, 21 Apr 2014 23:02:28 +0200
Subject: [gdal-dev] Error building gdal against MySQL
In-Reply-To: <201404062335.46696.even.rouault@mines-paris.org>
References: <7165283.68thpVR9us@helios> <4818732.o04PCLVqMB@helios>
	<201404062335.46696.even.rouault@mines-paris.org>
Message-ID: <5528882.3vNYGoMnkh@helios>

Even,

All is working fine now (ubuntu 14.04 now)

I have only the known error:

ERROR 1: ogrinfo was compiled against GDAL 1.11 but current library version is 
1.12

(From git repository)

Y.
Le dimanche 6 avril 2014, 23:35:46 Even Rouault a ?crit :
> Le dimanche 06 avril 2014 22:36:06, Yves Jacolin a ?crit :
> > Le dimanche 6 avril 2014, 22:31:40 Even Rouault a ?crit :
> > > Le dimanche 06 avril 2014 22:28:31, Yves Jacolin a ?crit :
> > > > Hello,
> > > > 
> > > > I tried to build gdal from git repository with MySQL:
> > > > 
> > > > checking for mysql_config... /usr/bin/mysql_config
> > > > checking for MySQL... yes
> > > > checking load_defaults() in MySQL... configure: error: Cannot find
> > > > load_defaults()
> > > > 
> > > > Any idea?
> > > 
> > > Which mysql version ?
> > > Which Linux distro ?
> > 
> > Even,
> > 
> > $ msqyl --version
> > mysql  Ver 14.14 Distrib 5.5.35, for debian-linux-gnu (x86_64) using
> > readline 6.2
> > Distro : Ubuntu 13.10
> 
> Yves
> 
> hum, I've just installed Ubuntu 13.10 Desktop 64bit in a fresh VM and
> installed the libmysqlclient-dev package and
> 
> ./configure --with-mysql
> 
> and it works and compiles fine.
> 
> So I suspect that it is due to other dependencies you've installed. Could
> you give the full ./configure line with the options you've used and its
> output ? And also the packages.txt file resulting from "dpkg -l >
> packages.txt" config.log might also help.
> 
> Even

-- 
Yves Jacolin

From even.rouault at mines-paris.org  Tue Apr 22 05:04:30 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 22 Apr 2014 14:04:30 +0200
Subject: [gdal-dev] Reviewer check-list
Message-ID: <1398168270.53565ace86a14@imp.free.fr>

Hi,

Based on my experience, I've initiated a wiki page to list all points that a
GDAL committer should have in mind when integrating a new contribution,
particularly a new driver :

http://trac.osgeo.org/gdal/wiki/ReviewerChecklist

Feel free to edit.

And if someone wants to exercice it, we have just received a patch to add OGR
support for Selafin format : http://trac.osgeo.org/gdal/ticket/5442

Best regards,

Even

From mateusz at loskot.net  Tue Apr 22 05:28:12 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Tue, 22 Apr 2014 14:28:12 +0200
Subject: [gdal-dev] Reviewer check-list
In-Reply-To: <1398168270.53565ace86a14@imp.free.fr>
References: <1398168270.53565ace86a14@imp.free.fr>
Message-ID: <CABUeae-ATgCXngP22eQ28Fy5gfRF2Z8a=5fMXW+J0o62BeV-zw@mail.gmail.com>

On 22 April 2014 14:04, Even Rouault <even.rouault at mines-paris.org> wrote:
>
> Based on my experience, I've initiated a wiki page to list all points that a
> GDAL committer should have in mind when integrating a new contribution,
> particularly a new driver :
>
> http://trac.osgeo.org/gdal/wiki/ReviewerChecklist

Good idea.
Shouldn't it also refer to https://trac.osgeo.org/gdal/wiki/rfc8_devguide ?

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From david.tran at hsr.ch  Tue Apr 22 10:23:36 2014
From: david.tran at hsr.ch (David Tran)
Date: Tue, 22 Apr 2014 19:23:36 +0200
Subject: [gdal-dev] Source code for ogr2ogr --version
In-Reply-To: <CABUeae_fL55ZegDvbLiqMyvPdkGohoK-htGm=M=-ckoH6vvfwQ@mail.gmail.com>
References: <53502AE6.8060801@hsr.ch>
	<CABUeae_fL55ZegDvbLiqMyvPdkGohoK-htGm=M=-ckoH6vvfwQ@mail.gmail.com>
Message-ID: <5356A598.6030405@hsr.ch>

thanks, is there an example for any kind of flags?


-------- Original Message  --------
Subject: Re: [gdal-dev] Source code for ogr2ogr --version
From: Mateusz ?oskot <mateusz at loskot.net>
To: David Tran <david.tran at hsr.ch>
Date: Thursday, 17. April 2014 21:38:02

> On 17 April 2014 21:26, David Tran <david.tran at hsr.ch> wrote:
>> Hi to everyone
>>
>> I compiled gdal 1.10.1 and now I want to show ogr2ogr --version with my
>> library in my ide console. How do I do that with C or C++?
>
> Use GDALVersionInfo function, see http://www.gdal.org/gdal_8h.html
>
> Best regards,
>

From nhv at cape.com  Tue Apr 22 10:37:39 2014
From: nhv at cape.com (Norman Vine)
Date: Tue, 22 Apr 2014 13:37:39 -0400
Subject: [gdal-dev] Source code for ogr2ogr --version
In-Reply-To: <5356A598.6030405@hsr.ch>
References: <53502AE6.8060801@hsr.ch>
	<CABUeae_fL55ZegDvbLiqMyvPdkGohoK-htGm=M=-ckoH6vvfwQ@mail.gmail.com>
	<5356A598.6030405@hsr.ch>
Message-ID: <08E3EC85-A4DC-4E1D-A225-34C67518E565@cape.com>

see
http://www.gdal.org/gdal_8h.html#acc50a4a63bc430d31abe1bca3f822da5


On Apr 22, 2014, at 1:23 PM, David Tran <david.tran at hsr.ch> wrote:

> thanks, is there an example for any kind of flags?
> 
> 
> -------- Original Message  --------
> Subject: Re: [gdal-dev] Source code for ogr2ogr --version
> From: Mateusz ?oskot <mateusz at loskot.net>
> To: David Tran <david.tran at hsr.ch>
> Date: Thursday, 17. April 2014 21:38:02
> 
>> On 17 April 2014 21:26, David Tran <david.tran at hsr.ch> wrote:
>>> Hi to everyone
>>> 
>>> I compiled gdal 1.10.1 and now I want to show ogr2ogr --version with my
>>> library in my ide console. How do I do that with C or C++?
>> 
>> Use GDALVersionInfo function, see http://www.gdal.org/gdal_8h.html
>> 
>> Best regards,
>> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From david.tran at hsr.ch  Tue Apr 22 14:30:53 2014
From: david.tran at hsr.ch (David Tran)
Date: Tue, 22 Apr 2014 23:30:53 +0200
Subject: [gdal-dev] Source code for ogr2ogr --version
In-Reply-To: <08E3EC85-A4DC-4E1D-A225-34C67518E565@cape.com>
References: <53502AE6.8060801@hsr.ch>
	<CABUeae_fL55ZegDvbLiqMyvPdkGohoK-htGm=M=-ckoH6vvfwQ@mail.gmail.com>
	<5356A598.6030405@hsr.ch>
	<08E3EC85-A4DC-4E1D-A225-34C67518E565@cape.com>
Message-ID: <5356DF8D.9000600@hsr.ch>

thanks againg. I've found this one too:

http://www.gdal.org/gdal_8h.html#a2b7575efeff58aeafc3d8e9170ff902b

but where are the flags like:

ogr2ogr -f
ogr2ogr -overwrite


-------- Original Message  --------
Subject: Re: [gdal-dev] Source code for ogr2ogr --version
From: Norman Vine <nhv at cape.com>
To: David Tran <david.tran at hsr.ch>
Date: Tuesday, 22. April 2014 19:37:39

> see
> http://www.gdal.org/gdal_8h.html#acc50a4a63bc430d31abe1bca3f822da5
>
>
> On Apr 22, 2014, at 1:23 PM, David Tran <david.tran at hsr.ch> wrote:
>
>> thanks, is there an example for any kind of flags?
>>
>>
>> -------- Original Message  --------
>> Subject: Re: [gdal-dev] Source code for ogr2ogr --version
>> From: Mateusz ??oskot <mateusz at loskot.net>
>> To: David Tran <david.tran at hsr.ch>
>> Date: Thursday, 17. April 2014 21:38:02
>>
>>> On 17 April 2014 21:26, David Tran <david.tran at hsr.ch> wrote:
>>>> Hi to everyone
>>>>
>>>> I compiled gdal 1.10.1 and now I want to show ogr2ogr --version with my
>>>> library in my ide console. How do I do that with C or C++?
>>>
>>> Use GDALVersionInfo function, see http://www.gdal.org/gdal_8h.html
>>>
>>> Best regards,
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From mateusz at loskot.net  Tue Apr 22 15:36:30 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Wed, 23 Apr 2014 00:36:30 +0200
Subject: [gdal-dev] Source code for ogr2ogr --version
In-Reply-To: <5356DF8D.9000600@hsr.ch>
References: <53502AE6.8060801@hsr.ch>
	<CABUeae_fL55ZegDvbLiqMyvPdkGohoK-htGm=M=-ckoH6vvfwQ@mail.gmail.com>
	<5356A598.6030405@hsr.ch>
	<08E3EC85-A4DC-4E1D-A225-34C67518E565@cape.com>
	<5356DF8D.9000600@hsr.ch>
Message-ID: <CABUeae_F3nWs-PDJ88EbcO5XHwvAA9UkrmqFn1rcOt7iq5MuUg@mail.gmail.com>

On 22 April 2014 23:30, David Tran <david.tran at hsr.ch> wrote:
> thanks againg. I've found this one too:
>
> http://www.gdal.org/gdal_8h.html#a2b7575efeff58aeafc3d8e9170ff902b
>
> but where are the flags like:
>
> ogr2ogr -f
> ogr2ogr -overwrite


http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/ogr2ogr.cpp

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From etourigny.dev at gmail.com  Tue Apr 22 18:27:15 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 22 Apr 2014 22:27:15 -0300
Subject: [gdal-dev] Source code for ogr2ogr --version
In-Reply-To: <5356DF8D.9000600@hsr.ch>
References: <53502AE6.8060801@hsr.ch>
	<CABUeae_fL55ZegDvbLiqMyvPdkGohoK-htGm=M=-ckoH6vvfwQ@mail.gmail.com>
	<5356A598.6030405@hsr.ch>
	<08E3EC85-A4DC-4E1D-A225-34C67518E565@cape.com>
	<5356DF8D.9000600@hsr.ch>
Message-ID: <CA+TxYvMBri+FdSS5egWwcZtrPfjO3Bq9i5WXTDbjKxwACuQsuw@mail.gmail.com>

http://www.gdal.org/ogr2ogr.html


On Tue, Apr 22, 2014 at 6:30 PM, David Tran <david.tran at hsr.ch> wrote:

> thanks againg. I've found this one too:
>
> http://www.gdal.org/gdal_8h.html#a2b7575efeff58aeafc3d8e9170ff902b
>
> but where are the flags like:
>
> ogr2ogr -f
> ogr2ogr -overwrite
>
>
>
> -------- Original Message  --------
> Subject: Re: [gdal-dev] Source code for ogr2ogr --version
> From: Norman Vine <nhv at cape.com>
> To: David Tran <david.tran at hsr.ch>
> Date: Tuesday, 22. April 2014 19:37:39
>
>  see
>> http://www.gdal.org/gdal_8h.html#acc50a4a63bc430d31abe1bca3f822da5
>>
>>
>> On Apr 22, 2014, at 1:23 PM, David Tran <david.tran at hsr.ch> wrote:
>>
>>  thanks, is there an example for any kind of flags?
>>>
>>>
>>> -------- Original Message  --------
>>> Subject: Re: [gdal-dev] Source code for ogr2ogr --version
>>> From: Mateusz ? oskot <mateusz at loskot.net>
>>> To: David Tran <david.tran at hsr.ch>
>>> Date: Thursday, 17. April 2014 21:38:02
>>>
>>>  On 17 April 2014 21:26, David Tran <david.tran at hsr.ch> wrote:
>>>>
>>>>> Hi to everyone
>>>>>
>>>>> I compiled gdal 1.10.1 and now I want to show ogr2ogr --version with my
>>>>> library in my ide console. How do I do that with C or C++?
>>>>>
>>>>
>>>> Use GDALVersionInfo function, see http://www.gdal.org/gdal_8h.html
>>>>
>>>> Best regards,
>>>>
>>>>  _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>  _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140422/cab69658/attachment.html>

From jukka.rahkonen at mmmtike.fi  Wed Apr 23 03:48:47 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 23 Apr 2014 10:48:47 +0000 (UTC)
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
References: <201404201603.08493.even.rouault@mines-paris.org>
Message-ID: <loom.20140423T124803-19@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final
release.
> 
> ---
> 
> No critical issue has been specifically reported on RC1 so far, so I
invite PSC 
> members to vote on this motion after doing your own testing and validation. 
> Input from everyone else who can test it is also very welcome.
> 
> I'll start the voting with my :
> 
> +1 Even


+1

-Jukka Rahkonen- 





From patrick.cannon at barcosoft.com  Wed Apr 23 13:22:45 2014
From: patrick.cannon at barcosoft.com (Patrick Cannon)
Date: Wed, 23 Apr 2014 15:22:45 -0500
Subject: [gdal-dev] GDALRasterBand to NSImage
Message-ID: <7635EFEF-99C2-4AF9-B531-BC8E70D390E2@barcosoft.com>

Hello Everyone,

I have been trying to get a few raster files loaded via GDAL but it seems that all I get back from GDALRasterIO is a bunch of 1?s which then get set as 255 or white.

The call I am using is:
    GDALRasterIO(ds->GetRasterBand(1), GF_Read,
                 0, 0, pixWide, pixHigh,
                 fileData, pixWide, pixHigh, GDT_Byte, 0, 0);

The meta data for the chart looks valid:
BSB_KNP=SC=458596,GD=NAD83,PR=MERCATOR,PP=28.867,PI=30.000,SP=,SK=0.0021196,TA=90.0021196,UN=FATHOMS,SD=MEAN LOWER LOW WATER,DX=45.86,DY=45.86

So I would expect the data to be getting filled correctly.

OS X 10.9 with Xcode 5.1.1.

If anyone has a suggestion or could point me to a working Objective-C example that would be great.

Thanks,
Patrick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140423/29cffe61/attachment.html>

From even.rouault at mines-paris.org  Wed Apr 23 13:37:15 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Apr 2014 22:37:15 +0200
Subject: [gdal-dev] GDALRasterBand to NSImage
In-Reply-To: <7635EFEF-99C2-4AF9-B531-BC8E70D390E2@barcosoft.com>
References: <7635EFEF-99C2-4AF9-B531-BC8E70D390E2@barcosoft.com>
Message-ID: <201404232237.16184.even.rouault@mines-paris.org>

Le mercredi 23 avril 2014 22:22:45, Patrick Cannon a ?crit :
> Hello Everyone,
> 
> I have been trying to get a few raster files loaded via GDAL but it seems
> that all I get back from GDALRasterIO is a bunch of 1?s which then get set
> as 255 or white.
> 
> The call I am using is:
>     GDALRasterIO(ds->GetRasterBand(1), GF_Read,
>                  0, 0, pixWide, pixHigh,
>                  fileData, pixWide, pixHigh, GDT_Byte, 0, 0);
> 
> The meta data for the chart looks valid:
> BSB_KNP=SC=458596,GD=NAD83,PR=MERCATOR,PP=28.867,PI=30.000,SP=,SK=0.0021196
> ,TA=90.0021196,UN=FATHOMS,SD=MEAN LOWER LOW WATER,DX=45.86,DY=45.86

BSB datasets come with a color palette (GDALColorTable). So GDALRasterIO() 
returns you the index in the color palette for each pixel. You have then to 
combine that with the R,G,B components of the color table.

> 
> So I would expect the data to be getting filled correctly.
> 
> OS X 10.9 with Xcode 5.1.1.
> 
> If anyone has a suggestion or could point me to a working Objective-C
> example that would be great.
> 
> Thanks,
> Patrick

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From patrick.cannon at barcosoft.com  Wed Apr 23 13:47:04 2014
From: patrick.cannon at barcosoft.com (Patrick Cannon)
Date: Wed, 23 Apr 2014 13:47:04 -0700
Subject: [gdal-dev] GDALRasterBand to NSImage
In-Reply-To: <201404232237.16184.even.rouault@mines-paris.org>
References: <7635EFEF-99C2-4AF9-B531-BC8E70D390E2@barcosoft.com>
	<201404232237.16184.even.rouault@mines-paris.org>
Message-ID: <e65d41260872bceb09e1e9c73c194cf8.squirrel@webmail.barcosoft.com>

Hi Even,

Thank you for the reply.

Yes I understand it is an index for the color table.

But the raster data is not all the same and I would expect the index to
have something other than a 1 returned for each byte.

If I use the same call under Linux with the exact same file it works as
expected.

So, is there a compile option for GDAL that may have been missed that is
causing it to handle the file incorrectly?

Thanks.
Patrick


> Le mercredi 23 avril 2014 22:22:45, Patrick Cannon a ??crit :
>> Hello Everyone,
>>
>> I have been trying to get a few raster files loaded via GDAL but it
>> seems
>> that all I get back from GDALRasterIO is a bunch of 1???s which then get
>> set
>> as 255 or white.
>>
>> The call I am using is:
>>     GDALRasterIO(ds->GetRasterBand(1), GF_Read,
>>                  0, 0, pixWide, pixHigh,
>>                  fileData, pixWide, pixHigh, GDT_Byte, 0, 0);
>>
>> The meta data for the chart looks valid:
>> BSB_KNP=SC=458596,GD=NAD83,PR=MERCATOR,PP=28.867,PI=30.000,SP=,SK=0.0021196
>> ,TA=90.0021196,UN=FATHOMS,SD=MEAN LOWER LOW WATER,DX=45.86,DY=45.86
>
> BSB datasets come with a color palette (GDALColorTable). So GDALRasterIO()
> returns you the index in the color palette for each pixel. You have then
> to
> combine that with the R,G,B components of the color table.
>
>>
>> So I would expect the data to be getting filled correctly.
>>
>> OS X 10.9 with Xcode 5.1.1.
>>
>> If anyone has a suggestion or could point me to a working Objective-C
>> example that would be great.
>>
>> Thanks,
>> Patrick
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>




From even.rouault at mines-paris.org  Wed Apr 23 14:02:36 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Apr 2014 23:02:36 +0200
Subject: [gdal-dev] GDALRasterBand to NSImage
In-Reply-To: <e65d41260872bceb09e1e9c73c194cf8.squirrel@webmail.barcosoft.com>
References: <7635EFEF-99C2-4AF9-B531-BC8E70D390E2@barcosoft.com>
	<201404232237.16184.even.rouault@mines-paris.org>
	<e65d41260872bceb09e1e9c73c194cf8.squirrel@webmail.barcosoft.com>
Message-ID: <201404232302.36625.even.rouault@mines-paris.org>

Le mercredi 23 avril 2014 22:47:04, Patrick Cannon a ?crit :
> Hi Even,
> 
> Thank you for the reply.
> 
> Yes I understand it is an index for the color table.
> 
> But the raster data is not all the same and I would expect the index to
> have something other than a 1 returned for each byte.
> 
> If I use the same call under Linux with the exact same file it works as
> expected.

Same version ? Hum, this is strange. Perhaps you should run the 
gdrivers/bsb.py script from the GDAL autotest suite to check that your Mac 
GDAL build is OK.

> 
> So, is there a compile option for GDAL that may have been missed that is
> causing it to handle the file incorrectly?

I can't think to one that could influence the behaviour of the BSB driver.

> 
> Thanks.
> Patrick
> 
> > Le mercredi 23 avril 2014 22:22:45, Patrick Cannon a ??crit :
> >> Hello Everyone,
> >> 
> >> I have been trying to get a few raster files loaded via GDAL but it
> >> seems
> >> that all I get back from GDALRasterIO is a bunch of 1???s which then get
> >> set
> >> as 255 or white.
> >> 
> >> The call I am using is:
> >>     GDALRasterIO(ds->GetRasterBand(1), GF_Read,
> >>     
> >>                  0, 0, pixWide, pixHigh,
> >>                  fileData, pixWide, pixHigh, GDT_Byte, 0, 0);
> >> 
> >> The meta data for the chart looks valid:
> >> BSB_KNP=SC=458596,GD=NAD83,PR=MERCATOR,PP=28.867,PI=30.000,SP=,SK=0.0021
> >> 196 ,TA=90.0021196,UN=FATHOMS,SD=MEAN LOWER LOW WATER,DX=45.86,DY=45.86
> > 
> > BSB datasets come with a color palette (GDALColorTable). So
> > GDALRasterIO() returns you the index in the color palette for each
> > pixel. You have then to
> > combine that with the R,G,B components of the color table.
> > 
> >> So I would expect the data to be getting filled correctly.
> >> 
> >> OS X 10.9 with Xcode 5.1.1.
> >> 
> >> If anyone has a suggestion or could point me to a working Objective-C
> >> example that would be great.
> >> 
> >> Thanks,
> >> Patrick
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jukka.rahkonen at mmmtike.fi  Wed Apr 23 23:00:14 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 24 Apr 2014 06:00:14 +0000 (UTC)
Subject: [gdal-dev] Question about r27234
Message-ID: <loom.20140423T235559-880@post.gmane.org>

Hi Even,

I noticed that you have implemented into GDAL the new Rasterlite 2 feature
of fast JPEG subsampling to levels 2, 4, and 8 in
http://trac.osgeo.org/gdal/changeset/27234.

I am curious to know how cool you consider this stuff is.

-Jukka Rahkonen-




From even.rouault at mines-paris.org  Thu Apr 24 01:30:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Apr 2014 10:30:43 +0200
Subject: [gdal-dev] Question about r27234
In-Reply-To: <loom.20140423T235559-880@post.gmane.org>
References: <loom.20140423T235559-880@post.gmane.org>
Message-ID: <1398328243.5358cbb3188a5@imp.free.fr>

Hi Jukka,

I blogged about it :

http://erouault.blogspot.fr/2014/04/advanced-jpeg-in-tiff-uses-in-gdal.html

This can be definitely usefull when you need subsampling of JPEG-in-TIFF that
don't have any internal or external overviews. But if you have storage space
available and some CPU time in advance, I'd still recommand generating
precomputed overviews.

Those "implicit" overviews will be faster than the previous way GDAL was doing
subsampling if you have relatively fast I/O compared to CPU.

But by nature of the JPEG codestream, JPEG implicit overviews will remain far
less powerfull than, let's say, JPEG2000 ones (or other similar wavelet-based
technologies). In wavelets, you can have frequency coefficients for the whole
image, whereas in JPEG, there are only for small 8x8 or 16x16 blocks, so in JPEG
you still need to read the whole set of coefficients, even if you only use 1/4,
1/16 or 1/64 of them.

Even

> Hi Even,
>
> I noticed that you have implemented into GDAL the new Rasterlite 2 feature
> of fast JPEG subsampling to levels 2, 4, and 8 in
> http://trac.osgeo.org/gdal/changeset/27234.
>
> I am curious to know how cool you consider this stuff is.
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Thu Apr 24 10:28:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Apr 2014 19:28:25 +0200
Subject: [gdal-dev] Fwd:  Motion: Promote 1.11.0RC1 for release
Message-ID: <201404241928.26133.even.rouault@mines-paris.org>

PSC,

Only I and Jukka have voted on the motion. It would be good if you could find 
some time to test RC1 and cast your vote.

Best regards,

Even

----------  Message transmis  ----------

Sujet : [gdal-dev] Motion: Promote 1.11.0RC1 for release
Date : dimanche 20 avril 2014, 16:03:08
De : Even Rouault <even.rouault at mines-paris.org>
? : "GDAL-dev list" <gdal-dev at lists.osgeo.org>

Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final release.

---

No critical issue has been specifically reported on RC1 so far, so I invite PSC 
members to vote on this motion after doing your own testing and validation. 
Input from everyone else who can test it is also very welcome.

I'll start the voting with my :

+1 Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------------------------------------------------
-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From burton449geo at gmail.com  Thu Apr 24 10:47:36 2014
From: burton449geo at gmail.com (Max Demars)
Date: Thu, 24 Apr 2014 13:47:36 -0400
Subject: [gdal-dev] GetGeomType() for a MapInfo TAB using OGR MapInfo File
	driver
Message-ID: <CAKtuc=-CtLRsDPCGs5udCBC3HGPYJPHUC3emxDEZ7k4nr1WBjg@mail.gmail.com>

Hi!

I am using the OGR MapInfo File driver to read a MapInfo TAB file. However,
the function GetGeomType()<http://gdal.org/python/osgeo.ogr.Layer-class.html#GetGeomType>returns
0 which means point
geometry, even if the features in the TAB are only multi-polygons.

Is it because MapInfo TAB can store many different GeomTypes in the same
file?

If I take for granted that only one geometry type would always be founded
in the TAB, how could I retrieve it?

        driver = ogr.GetDriverByName("MapInfo File")
        datasource = driver.Open(os.path.join(dirname,shapefileName))
        layer = datasource.GetLayer(0)
        geometryType = layer.GetGeomType()

        >>>geometryType
        >>>0


Even when looping over features in layer and retrieving geometry type using
GetDefnRef()<http://gdal.org/python/osgeo.ogr.Feature-class.html#GetGeometryRef>.GetGeomType()
the result is always 0 even for multi-polygon features.

Is there a way to retrieve the geometry type inside a MapInfo TAB ?

Thanks for your help,

-Max Demars
-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140424/c274ec97/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 24 11:23:24 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Apr 2014 20:23:24 +0200
Subject: [gdal-dev] GetGeomType() for a MapInfo TAB using OGR MapInfo
	File driver
In-Reply-To: <CAKtuc=-CtLRsDPCGs5udCBC3HGPYJPHUC3emxDEZ7k4nr1WBjg@mail.gmail.com>
References: <CAKtuc=-CtLRsDPCGs5udCBC3HGPYJPHUC3emxDEZ7k4nr1WBjg@mail.gmail.com>
Message-ID: <201404242023.24806.even.rouault@mines-paris.org>

Le jeudi 24 avril 2014 19:47:36, Max Demars a ?crit :
> Hi!
> 
> I am using the OGR MapInfo File driver to read a MapInfo TAB file. However,
> the function
> GetGeomType()<http://gdal.org/python/osgeo.ogr.Layer-class.html#GetGeomTyp
> e>returns 0 which means point
> geometry, even if the features in the TAB are only multi-polygons.

No, see ogr_core.h :

    wkbUnknown = 0,         /**< unknown type, non-standard */

> 
> Is it because MapInfo TAB can store many different GeomTypes in the same
> file?

The MapInfo TAB file will return wkbPoint, wkbLineString or wkbUnknown. The 
later being for polygons/multipolygons, or mix or geometry types.

Source is ogr/ogrsf_frmts/mitab/mitab_tabfile.cpp :

        if( numPoints > 0 && numLines == 0 && numRegions == 0 )
            m_poDefn->SetGeomType( wkbPoint );
        else if( numPoints == 0 && numLines > 0 && numRegions == 0 )
            m_poDefn->SetGeomType( wkbLineString );
        else
            /* we leave it unknown indicating a mixture */;


> 
> If I take for granted that only one geometry type would always be founded
> in the TAB, how could I retrieve it?
> 
>         driver = ogr.GetDriverByName("MapInfo File")
>         datasource = driver.Open(os.path.join(dirname,shapefileName))
>         layer = datasource.GetLayer(0)
>         geometryType = layer.GetGeomType()
> 
>         >>>geometryType
>         >>>0
> 
> Even when looping over features in layer and retrieving geometry type using
> GetDefnRef()<http://gdal.org/python/osgeo.ogr.Feature-class.html#GetGeometr
> yRef>.GetGeomType() the result is always 0 even for multi-polygon features.

You should call 
	g = feat.GetGeometryRef()
	g.GetType()
to retrieve the geometry type of an individual feature, and that cannot be 
0=wkbUnknown

layer.GetGeomType(), feat.GetDefnRef().GetGeomType() or 
layer.GetLayerDefn().GetGeomType() are all alias, that will return the 
declared layer geometry type, but not the geometry type of an actual feature.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Thu Apr 24 11:57:11 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 24 Apr 2014 11:57:11 -0700
Subject: [gdal-dev] Fwd: Motion: Promote 1.11.0RC1 for release
In-Reply-To: <201404241928.26133.even.rouault@mines-paris.org>
References: <201404241928.26133.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBdY3kg=0Rp+db3rLVLuhUMu7KJ4Bxr=oMSZzffOn3G8Kg@mail.gmail.com>

Even,

I have built it with a few custom options and run the test suite and all
looks well.

+1 Frank

Thanks for your great work on preparing the release!

PS. the cantopo gdalhttp.py test fails, and investigating I see:

$  gdalinfo /vsicurl/
ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif --debug on
VSICURL: GetFileSize(
ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif)=0
response_code=226
ERROR 4: `/vsicurl/
ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif' does not
exist in the file system,
and is not recognised as a supported dataset name.

gdalinfo failed - unable to open '/vsicurl/
ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif'.


We might want to consider removing it if this is often the victim of
timeouts.

Best regards,
Frank



On Thu, Apr 24, 2014 at 10:28 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> PSC,
>
> Only I and Jukka have voted on the motion. It would be good if you could
> find
> some time to test RC1 and cast your vote.
>
> Best regards,
>
> Even
>
> ----------  Message transmis  ----------
>
> Sujet : [gdal-dev] Motion: Promote 1.11.0RC1 for release
> Date : dimanche 20 avril 2014, 16:03:08
> De : Even Rouault <even.rouault at mines-paris.org>
> ? : "GDAL-dev list" <gdal-dev at lists.osgeo.org>
>
> Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final
> release.
>
> ---
>
> No critical issue has been specifically reported on RC1 so far, so I
> invite PSC
> members to vote on this motion after doing your own testing and validation.
> Input from everyone else who can test it is also very welcome.
>
> I'll start the voting with my :
>
> +1 Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> -------------------------------------------------------
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140424/41e2e23d/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 24 12:08:46 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Apr 2014 21:08:46 +0200
Subject: [gdal-dev] Fwd: Motion: Promote 1.11.0RC1 for release
In-Reply-To: <CA+YzLBdY3kg=0Rp+db3rLVLuhUMu7KJ4Bxr=oMSZzffOn3G8Kg@mail.gmail.com>
References: <201404241928.26133.even.rouault@mines-paris.org>
	<CA+YzLBdY3kg=0Rp+db3rLVLuhUMu7KJ4Bxr=oMSZzffOn3G8Kg@mail.gmail.com>
Message-ID: <201404242108.46890.even.rouault@mines-paris.org>

> 
> PS. the cantopo gdalhttp.py test fails, and investigating I see:
> 
> $  gdalinfo /vsicurl/
> ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif --debug on
> VSICURL: GetFileSize(
> ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif)=0
> response_code=226
> ERROR 4: `/vsicurl/
> ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif' does not
> exist in the file system,
> and is not recognised as a supported dataset name.
> 
> gdalinfo failed - unable to open '/vsicurl/
> ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif'.
> 
> 
> We might want to consider removing it if this is often the victim of
> timeouts.

Works for me, and works most of the time with the Travis instances AFAIR. The 
reliability of online resources is indeed a problem. Not sure how we can 
address it. The interest of that test was to check that ReadDir() API works on 
FTP with /vsicurl/

> 
> Best regards,
> Frank
> 
> 
> 
> On Thu, Apr 24, 2014 at 10:28 AM, Even Rouault
> <even.rouault at mines-paris.org
> 
> > wrote:
> > 
> > PSC,
> > 
> > Only I and Jukka have voted on the motion. It would be good if you could
> > find
> > some time to test RC1 and cast your vote.
> > 
> > Best regards,
> > 
> > Even
> > 
> > ----------  Message transmis  ----------
> > 
> > Sujet : [gdal-dev] Motion: Promote 1.11.0RC1 for release
> > Date : dimanche 20 avril 2014, 16:03:08
> > De : Even Rouault <even.rouault at mines-paris.org>
> > ? : "GDAL-dev list" <gdal-dev at lists.osgeo.org>
> > 
> > Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final
> > release.
> > 
> > ---
> > 
> > No critical issue has been specifically reported on RC1 so far, so I
> > invite PSC
> > members to vote on this motion after doing your own testing and
> > validation. Input from everyone else who can test it is also very
> > welcome.
> > 
> > I'll start the voting with my :
> > 
> > +1 Even
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > 
> > -------------------------------------------------------
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From warmerdam at pobox.com  Thu Apr 24 12:10:06 2014
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 24 Apr 2014 12:10:06 -0700
Subject: [gdal-dev] Fwd: Motion: Promote 1.11.0RC1 for release
In-Reply-To: <201404242108.46890.even.rouault@mines-paris.org>
References: <201404241928.26133.even.rouault@mines-paris.org>
	<CA+YzLBdY3kg=0Rp+db3rLVLuhUMu7KJ4Bxr=oMSZzffOn3G8Kg@mail.gmail.com>
	<201404242108.46890.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBd_JcGFx9xTGNoCa6YSgThKkNob+otnrY5J1hLHe+9RPg@mail.gmail.com>

Even,

Likely my connection is a bit lame. It might be better to setup the test
against a smaller file done on ftp.remotesensing.org.   I'll try to look
into this at some point.

Best regards,
Frank



On Thu, Apr 24, 2014 at 12:08 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> >
> > PS. the cantopo gdalhttp.py test fails, and investigating I see:
> >
> > $  gdalinfo /vsicurl/
> > ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif --debug
> on
> > VSICURL: GetFileSize(
> > ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif)=0
> > response_code=226
> > ERROR 4: `/vsicurl/
> > ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif' does
> not
> > exist in the file system,
> > and is not recognised as a supported dataset name.
> >
> > gdalinfo failed - unable to open '/vsicurl/
> > ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif'.
> >
> >
> > We might want to consider removing it if this is often the victim of
> > timeouts.
>
> Works for me, and works most of the time with the Travis instances AFAIR.
> The
> reliability of online resources is indeed a problem. Not sure how we can
> address it. The interest of that test was to check that ReadDir() API
> works on
> FTP with /vsicurl/
>
> >
> > Best regards,
> > Frank
> >
> >
> >
> > On Thu, Apr 24, 2014 at 10:28 AM, Even Rouault
> > <even.rouault at mines-paris.org
> >
> > > wrote:
> > >
> > > PSC,
> > >
> > > Only I and Jukka have voted on the motion. It would be good if you
> could
> > > find
> > > some time to test RC1 and cast your vote.
> > >
> > > Best regards,
> > >
> > > Even
> > >
> > > ----------  Message transmis  ----------
> > >
> > > Sujet : [gdal-dev] Motion: Promote 1.11.0RC1 for release
> > > Date : dimanche 20 avril 2014, 16:03:08
> > > De : Even Rouault <even.rouault at mines-paris.org>
> > > ? : "GDAL-dev list" <gdal-dev at lists.osgeo.org>
> > >
> > > Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final
> > > release.
> > >
> > > ---
> > >
> > > No critical issue has been specifically reported on RC1 so far, so I
> > > invite PSC
> > > members to vote on this motion after doing your own testing and
> > > validation. Input from everyone else who can test it is also very
> > > welcome.
> > >
> > > I'll start the voting with my :
> > >
> > > +1 Even
> > >
> > > --
> > > Geospatial professional services
> > > http://even.rouault.free.fr/services.html
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > >
> > >
> > > -------------------------------------------------------
> > > --
> > > Geospatial professional services
> > > http://even.rouault.free.fr/services.html
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140424/69521183/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 24 12:17:53 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Apr 2014 21:17:53 +0200
Subject: [gdal-dev] Fwd: Motion: Promote 1.11.0RC1 for release
In-Reply-To: <CA+YzLBd_JcGFx9xTGNoCa6YSgThKkNob+otnrY5J1hLHe+9RPg@mail.gmail.com>
References: <201404241928.26133.even.rouault@mines-paris.org>
	<201404242108.46890.even.rouault@mines-paris.org>
	<CA+YzLBd_JcGFx9xTGNoCa6YSgThKkNob+otnrY5J1hLHe+9RPg@mail.gmail.com>
Message-ID: <201404242117.54003.even.rouault@mines-paris.org>

Le jeudi 24 avril 2014 21:10:06, Frank Warmerdam a ?crit :
> Even,
> 
> Likely my connection is a bit lame. It might be better to setup the test
> against a smaller file done on ftp.remotesensing.org.   I'll try to look
> into this at some point.

I've just changed the test to point to 
ftp://ftp.remotesensing.org/gdal/data/gtiff/utm.tif instead

> 
> Best regards,
> Frank
> 
> 
> 
> On Thu, Apr 24, 2014 at 12:08 PM, Even Rouault
> <even.rouault at mines-paris.org
> 
> > wrote:
> > > PS. the cantopo gdalhttp.py test fails, and investigating I see:
> > > 
> > > $  gdalinfo /vsicurl/
> > > ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif --debug
> > 
> > on
> > 
> > > VSICURL: GetFileSize(
> > > ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif)=0
> > > response_code=226
> > > ERROR 4: `/vsicurl/
> > > ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif' does
> > 
> > not
> > 
> > > exist in the file system,
> > > and is not recognised as a supported dataset name.
> > > 
> > > gdalinfo failed - unable to open '/vsicurl/
> > > ftp://ftp2.cits.rncan.gc.ca/pub/cantopo/250k_tif/MCR2010_01.tif'.
> > > 
> > > 
> > > We might want to consider removing it if this is often the victim of
> > > timeouts.
> > 
> > Works for me, and works most of the time with the Travis instances AFAIR.
> > The
> > reliability of online resources is indeed a problem. Not sure how we can
> > address it. The interest of that test was to check that ReadDir() API
> > works on
> > FTP with /vsicurl/
> > 
> > > Best regards,
> > > Frank
> > > 
> > > 
> > > 
> > > On Thu, Apr 24, 2014 at 10:28 AM, Even Rouault
> > > <even.rouault at mines-paris.org
> > > 
> > > > wrote:
> > > > 
> > > > PSC,
> > > > 
> > > > Only I and Jukka have voted on the motion. It would be good if you
> > 
> > could
> > 
> > > > find
> > > > some time to test RC1 and cast your vote.
> > > > 
> > > > Best regards,
> > > > 
> > > > Even
> > > > 
> > > > ----------  Message transmis  ----------
> > > > 
> > > > Sujet : [gdal-dev] Motion: Promote 1.11.0RC1 for release
> > > > Date : dimanche 20 avril 2014, 16:03:08
> > > > De : Even Rouault <even.rouault at mines-paris.org>
> > > > ? : "GDAL-dev list" <gdal-dev at lists.osgeo.org>
> > > > 
> > > > Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0
> > > > final release.
> > > > 
> > > > ---
> > > > 
> > > > No critical issue has been specifically reported on RC1 so far, so I
> > > > invite PSC
> > > > members to vote on this motion after doing your own testing and
> > > > validation. Input from everyone else who can test it is also very
> > > > welcome.
> > > > 
> > > > I'll start the voting with my :
> > > > 
> > > > +1 Even
> > > > 
> > > > --
> > > > Geospatial professional services
> > > > http://even.rouault.free.fr/services.html
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > 
> > > > 
> > > > -------------------------------------------------------
> > > > --
> > > > Geospatial professional services
> > > > http://even.rouault.free.fr/services.html
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From dmorissette at mapgears.com  Thu Apr 24 12:27:39 2014
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 24 Apr 2014 15:27:39 -0400
Subject: [gdal-dev] Fwd:  Motion: Promote 1.11.0RC1 for release
In-Reply-To: <201404241928.26133.even.rouault@mines-paris.org>
References: <201404241928.26133.even.rouault@mines-paris.org>
Message-ID: <535965AB.3000200@mapgears.com>

+0. I won't have time to test myself, but I am supportive based on the 
feedback I've seen from others.

Daniel


On 14-04-24 1:28 PM, Even Rouault wrote:
> PSC,
>
> Only I and Jukka have voted on the motion. It would be good if you could find
> some time to test RC1 and cast your vote.
>
> Best regards,
>
> Even
>
> ----------  Message transmis  ----------
>
> Sujet : [gdal-dev] Motion: Promote 1.11.0RC1 for release
> Date : dimanche 20 avril 2014, 16:03:08
> De : Even Rouault <even.rouault at mines-paris.org>
> ? : "GDAL-dev list" <gdal-dev at lists.osgeo.org>
>
> Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final release.
>
> ---
>
> No critical issue has been specifically reported on RC1 so far, so I invite PSC
> members to vote on this motion after doing your own testing and validation.
> Input from everyone else who can test it is also very welcome.
>
> I'll start the voting with my :
>
> +1 Even
>


-- 
Daniel Morissette
T: +1 418-696-5056 #201
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From landa.martin at gmail.com  Thu Apr 24 13:53:29 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 24 Apr 2014 22:53:29 +0200
Subject: [gdal-dev] debug ogr2ogr on Windows
Message-ID: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>

Hi all,

I am forced to debug ogr2ogr on Windows (together with OCI driver). As
a Linux user used to play with emacs/gdb it's completely new world for
me;-) I am building GDAL from cmd line using package.cmd. I added to
/Zi flag to produce pdb files. I found some recipes at [1], but with
no success. Is there any cookbook available online? Thanks for any
useful tips in advance!

Martin

[1] http://msdn.microsoft.com/en-us/library/0bxe8ytt.aspx

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From k.vanwijk at auckland.ac.nz  Thu Apr 24 14:17:29 2014
From: k.vanwijk at auckland.ac.nz (Kasper van Wijk)
Date: Fri, 25 Apr 2014 09:17:29 +1200
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
Message-ID: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>

dear all,

I am downloading jp2 data from the usgs national map. To plot this in
cartopy, I need to transform to something else, such as geotiff. However,
using gdal_translate I get a warning copied below, and the output is a
grainy bw version of the image. I have checked my results under linux both
fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
2010/11/10

gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff -of GTiff

warning: not enough tile data (2 bytes)

and this warning repeats many times. FWIW, using "convert" from imagemagick
gave me the same warning/output.

To test my gdal install, I downloaded a jp2 from
http://www.microimages.com/gallery/jp2/, CB_TM432.jp2, and all is fine:

[kasper at localhost Downloads]$ gdal_translate CB_TM432.jp2 test.tiff -of
GTiff
Input file size is 361, 488
0...10...20...30...40...50...60...70...80...90...100 - done.

and the map using the tiff looks great!

Is there something different about the USGS jp2 format than the ones from
say microimages?

I asked the USGS help team, but they have no problems in a  Windows
environment, and do not have linux.

Best,
kasper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140425/4740cf5c/attachment-0001.html>

From landa.martin at gmail.com  Thu Apr 24 14:20:31 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 24 Apr 2014 23:20:31 +0200
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <53597F88.4070608@stripfamily.net>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<53597F88.4070608@stripfamily.net>
Message-ID: <CA+Ei1OdjJVxir5BfQj3OcqTsEPd2Jqxg5X+XjZv0cfw2xBVPrg@mail.gmail.com>

[back to ML]

2014-04-24 23:18 GMT+02:00 David Strip <david at stripfamily.net>:
> do you have access to visual studio?

sure, as I noted, building using package.cmd script (nmake-based). I
have VS 2010 Express.

Martin

From even.rouault at mines-paris.org  Thu Apr 24 14:25:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Apr 2014 23:25:32 +0200
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
In-Reply-To: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
References: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
Message-ID: <201404242325.32711.even.rouault@mines-paris.org>

Le jeudi 24 avril 2014 23:17:29, Kasper van Wijk a ?crit :
> dear all,
> 
> I am downloading jp2 data from the usgs national map. To plot this in
> cartopy, I need to transform to something else, such as geotiff. However,
> using gdal_translate I get a warning copied below, and the output is a
> grainy bw version of the image. I have checked my results under linux both
> fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
> 2010/11/10
> 
> gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff -of GTiff
> 
> warning: not enough tile data (2 bytes)

Apparently your GDAL build uses libjasper as the jpeg2000 library. Jasper 
doesn't work very well unfortunately with some real world images.
You might want to compile GDAL against one of the other JPEG2000 libraries 
that are supported : see http://gdal.org/formats_list.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Thu Apr 24 14:27:57 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Thu, 24 Apr 2014 17:27:57 -0400
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
Message-ID: <BLU173-W124BEDF2BFDF8E21F0E2E7905B0@phx.gbl>

Hi Martin,

What version of Visual Studio are you using?

It is usually pretty simple to debug GDAL driver on it. Let me give the recipe. I am in OSX right now without access to Windows.

1. Create the file nmake.local with

DEBUG = ON
VCVERS = 1600 (for VS2010)

2. Check you ORACLE_HOME variable

If you don't have you can copy from nmake.opt and change.

But if you already have ORACLE_HOME you don't need to do anything.

Maybe you should add:

OCI_PLUGIN = YES

To have the driver as a plugin. That helps a lot at the change/testing/changing/testing phase. It is much fast to build only the plugin.

3. Run makegdal_gen.bat

That will create the .vcproj file

http://trac.osgeo.org/gdal/wiki/MakeFileProjects

4. Open the project in Visual Studio

Check that the project properties are basic "make" and "debug". That is all you need.

Press F7 will build everything but you don't need to do that if you have done in command line.

5. Prepare a command line on Project/Properties/debug

I can give more info tomorrow. I can't remember how the UI goes but is very simple.

6. Create some breakpoints

Open the main point you want to investigate and add a breakpoint

7. Run in debug mode

That is about it.

If you build the driver as a plugin, you can change one of the project/properties/make/ options to do something like:

cd ogr/ogrsf_frmts/oci
nmake -f makefile.vc clean
nmake -f makefile.vc 
nmake -f makefile.vc plugin
nmake -f makefile.vc plugin-install

That is about it.

Good luck and thanks to help with that

Regards,

Ivan


> Date: Thu, 24 Apr 2014 22:53:29 +0200
> From: landa.martin at gmail.com
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] debug ogr2ogr on Windows
> 
> Hi all,
> 
> I am forced to debug ogr2ogr on Windows (together with OCI driver). As
> a Linux user used to play with emacs/gdb it's completely new world for
> me;-) I am building GDAL from cmd line using package.cmd. I added to
> /Zi flag to produce pdb files. I found some recipes at [1], but with
> no success. Is there any cookbook available online? Thanks for any
> useful tips in advance!
> 
> Martin
> 
> [1] http://msdn.microsoft.com/en-us/library/0bxe8ytt.aspx
> 
> -- 
> Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140424/9a844850/attachment.html>

From k.vanwijk at auckland.ac.nz  Thu Apr 24 14:29:03 2014
From: k.vanwijk at auckland.ac.nz (Kasper van Wijk)
Date: Fri, 25 Apr 2014 09:29:03 +1200
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
In-Reply-To: <c1255b5a99e04461a0241fcc90a04e97@UXCHANGE10-FE3.UoA.auckland.ac.nz>
References: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
	<c1255b5a99e04461a0241fcc90a04e97@UXCHANGE10-FE3.UoA.auckland.ac.nz>
Message-ID: <CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>

thank you, Even, for the fast reply. I am a beginner at GDAL and installed
the gdal suite with "standard" apt-get and yum, respectively. Can you point
me to a place where I can read how to compile GDAL against one of the other
JPEG2000 libraries, as you say?

Thanks again,
Kasper


On 25 April 2014 09:25, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le jeudi 24 avril 2014 23:17:29, Kasper van Wijk a ?crit :
> > dear all,
> >
> > I am downloading jp2 data from the usgs national map. To plot this in
> > cartopy, I need to transform to something else, such as geotiff. However,
> > using gdal_translate I get a warning copied below, and the output is a
> > grainy bw version of the image. I have checked my results under linux
> both
> > fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
> > 2010/11/10
> >
> > gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff -of
> GTiff
> >
> > warning: not enough tile data (2 bytes)
>
> Apparently your GDAL build uses libjasper as the jpeg2000 library. Jasper
> doesn't work very well unfortunately with some real world images.
> You might want to compile GDAL against one of the other JPEG2000 libraries
> that are supported : see http://gdal.org/formats_list.html
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140425/89bd5620/attachment.html>

From even.rouault at mines-paris.org  Thu Apr 24 14:32:53 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Apr 2014 23:32:53 +0200
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
In-Reply-To: <CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>
References: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
	<c1255b5a99e04461a0241fcc90a04e97@UXCHANGE10-FE3.UoA.auckland.ac.nz>
	<CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>
Message-ID: <201404242332.54041.even.rouault@mines-paris.org>

Le jeudi 24 avril 2014 23:29:03, Kasper van Wijk a ?crit :
> thank you, Even, for the fast reply. I am a beginner at GDAL and installed
> the gdal suite with "standard" apt-get and yum, respectively. Can you point
> me to a place where I can read how to compile GDAL against one of the other
> JPEG2000 libraries, as you say?

You will find various resources at http://trac.osgeo.org/gdal/wiki/BuildHints

Most interesting links for your use case :
* http://trac.osgeo.org/gdal/wiki/DownloadSource
* http://trac.osgeo.org/gdal/wiki/BuildingOnUnix
* http://trac.osgeo.org/gdal/wiki/ECW : if you want to compile against ECW SDK
* http://gdal.org/frmt_jp2openjpeg.html : if you want to compile against 
OpenJPEG v2

> 
> Thanks again,
> Kasper
> 
> On 25 April 2014 09:25, Even Rouault <even.rouault at mines-paris.org> wrote:
> > Le jeudi 24 avril 2014 23:17:29, Kasper van Wijk a ?crit :
> > > dear all,
> > > 
> > > I am downloading jp2 data from the usgs national map. To plot this in
> > > cartopy, I need to transform to something else, such as geotiff.
> > > However, using gdal_translate I get a warning copied below, and the
> > > output is a grainy bw version of the image. I have checked my results
> > > under linux
> > 
> > both
> > 
> > > fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
> > > 2010/11/10
> > > 
> > > gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff -of
> > 
> > GTiff
> > 
> > > warning: not enough tile data (2 bytes)
> > 
> > Apparently your GDAL build uses libjasper as the jpeg2000 library. Jasper
> > doesn't work very well unfortunately with some real world images.
> > You might want to compile GDAL against one of the other JPEG2000
> > libraries that are supported : see http://gdal.org/formats_list.html
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jluis at ualg.pt  Thu Apr 24 14:44:44 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 24 Apr 2014 22:44:44 +0100
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <CA+Ei1OdjJVxir5BfQj3OcqTsEPd2Jqxg5X+XjZv0cfw2xBVPrg@mail.gmail.com>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<53597F88.4070608@stripfamily.net>
	<CA+Ei1OdjJVxir5BfQj3OcqTsEPd2Jqxg5X+XjZv0cfw2xBVPrg@mail.gmail.com>
Message-ID: <535985CC.8020602@ualg.pt>

On 24-04-2014 22:20, Martin Landa wrote:
> [back to ML]
>
> 2014-04-24 23:18 GMT+02:00 David Strip<david at stripfamily.net>:
>> do you have access to visual studio?
> sure, as I noted, building using package.cmd script (nmake-based). I
> have VS 2010 Express.
Others can confirm this, but I'm afraid you wont be able to do an IDE debugging with an Express version. It's a petty because VS is really good for debugging.




From thare at usgs.gov  Thu Apr 24 14:45:05 2014
From: thare at usgs.gov (Hare, Trent)
Date: Thu, 24 Apr 2014 14:45:05 -0700
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
In-Reply-To: <CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>
References: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
	<c1255b5a99e04461a0241fcc90a04e97@UXCHANGE10-FE3.UoA.auckland.ac.nz>
	<CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>
Message-ID: <CAB6t5t-f--z3jW1DeQ00-38UqV5G5vxNGwzG72a2xro1N0tQxQ@mail.gmail.com>

Kasper,
  When I have trouble with the various Jp2 implementations, I seem to
always lean on the Kakadu JP2 library. When GDAL is not available with
Kakadu built-in (due to licensing), you can convert from Geojpeg2000 to
geoTiff using the free Kakadu binaries. Example conversion:

> kdu_expand -i geo.jp2 -o geo.tif -num_threads 2
"    -- Decompresses a JP2 file, writing the result in the TIFF format,
while attempting to record useful JP2 boxes in TIFF tags.  This is only a
demonstration, rather than a comprehensive attempt to convert all possible
boxes to tags.  However, one useful box which is converted (if present) is
the GeoJP2 box, which may be used to store geographical information."

You can download Linux binaries from:
http://www.kakadusoftware.com/index.php?option=com_content&task=view&id=26&Itemid=22

good luck,
Trent



On Thu, Apr 24, 2014 at 2:29 PM, Kasper van Wijk
<k.vanwijk at auckland.ac.nz>wrote:

> thank you, Even, for the fast reply. I am a beginner at GDAL and installed
> the gdal suite with "standard" apt-get and yum, respectively. Can you point
> me to a place where I can read how to compile GDAL against one of the other
> JPEG2000 libraries, as you say?
>
> Thanks again,
> Kasper
>
>
> On 25 April 2014 09:25, Even Rouault <even.rouault at mines-paris.org> wrote:
>
>> Le jeudi 24 avril 2014 23:17:29, Kasper van Wijk a ?crit :
>> > dear all,
>> >
>> > I am downloading jp2 data from the usgs national map. To plot this in
>> > cartopy, I need to transform to something else, such as geotiff.
>> However,
>> > using gdal_translate I get a warning copied below, and the output is a
>> > grainy bw version of the image. I have checked my results under linux
>> both
>> > fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
>> > 2010/11/10
>> >
>> > gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff -of
>> GTiff
>> >
>> > warning: not enough tile data (2 bytes)
>>
>> Apparently your GDAL build uses libjasper as the jpeg2000 library. Jasper
>> doesn't work very well unfortunately with some real world images.
>> You might want to compile GDAL against one of the other JPEG2000 libraries
>> that are supported : see http://gdal.org/formats_list.html
>>
>> --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140424/747532a4/attachment-0001.html>

From eadam at co.lincoln.or.us  Thu Apr 24 14:43:51 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Thu, 24 Apr 2014 14:43:51 -0700
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
In-Reply-To: <201404242332.54041.even.rouault@mines-paris.org>
References: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
	<c1255b5a99e04461a0241fcc90a04e97@UXCHANGE10-FE3.UoA.auckland.ac.nz>
	<CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>
	<201404242332.54041.even.rouault@mines-paris.org>
Message-ID: <CACqBkM_S+5-0cxHq15KqnpiSTxH0qoyqnvRHNFhYm6-wfdobNA@mail.gmail.com>

Kasper,

On Thu, Apr 24, 2014 at 2:32 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le jeudi 24 avril 2014 23:29:03, Kasper van Wijk a ?crit :
>> thank you, Even, for the fast reply. I am a beginner at GDAL and installed
>> the gdal suite with "standard" apt-get and yum, respectively. Can you point
>> me to a place where I can read how to compile GDAL against one of the other
>> JPEG2000 libraries, as you say?

Compiling is a great option and might be the best.  You might also
want to check which drivers are in Ubuntu GIS and Enterprise Linux GIS
which might be easier than compiling.  They are often more recent and
with more features than the standard repos.

https://wiki.ubuntu.com/UbuntuGIS
http://wiki.osgeo.org/wiki/Enterprise_Linux_GIS

Best regards, Eli

>
> You will find various resources at http://trac.osgeo.org/gdal/wiki/BuildHints
>
> Most interesting links for your use case :
> * http://trac.osgeo.org/gdal/wiki/DownloadSource
> * http://trac.osgeo.org/gdal/wiki/BuildingOnUnix
> * http://trac.osgeo.org/gdal/wiki/ECW : if you want to compile against ECW SDK
> * http://gdal.org/frmt_jp2openjpeg.html : if you want to compile against
> OpenJPEG v2
>
>>
>> Thanks again,
>> Kasper
>>
>> On 25 April 2014 09:25, Even Rouault <even.rouault at mines-paris.org> wrote:
>> > Le jeudi 24 avril 2014 23:17:29, Kasper van Wijk a ?crit :
>> > > dear all,
>> > >
>> > > I am downloading jp2 data from the usgs national map. To plot this in
>> > > cartopy, I need to transform to something else, such as geotiff.
>> > > However, using gdal_translate I get a warning copied below, and the
>> > > output is a grainy bw version of the image. I have checked my results
>> > > under linux
>> >
>> > both
>> >
>> > > fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
>> > > 2010/11/10
>> > >
>> > > gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff -of
>> >
>> > GTiff
>> >
>> > > warning: not enough tile data (2 bytes)
>> >
>> > Apparently your GDAL build uses libjasper as the jpeg2000 library. Jasper
>> > doesn't work very well unfortunately with some real world images.
>> > You might want to compile GDAL against one of the other JPEG2000
>> > libraries that are supported : see http://gdal.org/formats_list.html
>> >
>> > --
>> > Geospatial professional services
>> > http://even.rouault.free.fr/services.html
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lucena_ivan at hotmail.com  Thu Apr 24 15:56:44 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Thu, 24 Apr 2014 18:56:44 -0400
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <535985CC.8020602@ualg.pt>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>,
	<53597F88.4070608@stripfamily.net>,
	<CA+Ei1OdjJVxir5BfQj3OcqTsEPd2Jqxg5X+XjZv0cfw2xBVPrg@mail.gmail.com>,
	<535985CC.8020602@ualg.pt>
Message-ID: <BLU173-W83ACD7E00DBC6E22120AA905B0@phx.gbl>

I can't see why you can't debug in express version.
I used it for many years. That is why I created the makegdal_gen.bat.
But I don't use express edition now. I use Linux most of the time now. 

> Date: Thu, 24 Apr 2014 22:44:44 +0100
> From: jluis at ualg.pt
> To: landa.martin at gmail.com
> CC: gdal-dev at lists.osgeo.org; david at stripfamily.net
> Subject: Re: [gdal-dev] debug ogr2ogr on Windows
> 
> On 24-04-2014 22:20, Martin Landa wrote:
> > [back to ML]
> >
> > 2014-04-24 23:18 GMT+02:00 David Strip<david at stripfamily.net>:
> >> do you have access to visual studio?
> > sure, as I noted, building using package.cmd script (nmake-based). I
> > have VS 2010 Express.
> Others can confirm this, but I'm afraid you wont be able to do an IDE debugging with an Express version. It's a petty because VS is really good for debugging.
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140424/890a3cc3/attachment.html>

From k.vanwijk at auckland.ac.nz  Thu Apr 24 17:25:00 2014
From: k.vanwijk at auckland.ac.nz (Kasper van Wijk)
Date: Fri, 25 Apr 2014 12:25:00 +1200
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
In-Reply-To: <5408c208fa8b45c2b810cbe0561c8285@UXCHANGE10-FE2.UoA.auckland.ac.nz>
References: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
	<c1255b5a99e04461a0241fcc90a04e97@UXCHANGE10-FE3.UoA.auckland.ac.nz>
	<CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>
	<201404242332.54041.even.rouault@mines-paris.org>
	<5408c208fa8b45c2b810cbe0561c8285@UXCHANGE10-FE2.UoA.auckland.ac.nz>
Message-ID: <CAN-+WRhS9kHhqFMzvR3=JAayLiu96-7DtvooSedC0q=D5PkusQ@mail.gmail.com>

Eli: thanks for the new repo. This got me from gdal 1.7.3 to 1.9.1, but
still the same warning/output

Trent: I downloaded the linux binaries and followed the instructions in the
README (about PATHS), but:
kasper at PALette:~/Downloads$ kdu_expand -i
m_3810623_ne_13_1_20110921_20111031.jp2 -o geo.tif -num_threads 2
bash: /home/kasper/kakadu/bin/kdu_expand: cannot execute binary file

Even: I managed to install the http://gdal.org/frmt_jp2openjpeg.html, and
downloaded and install gdal1.10 against the openjpeg libs, but

kasper at PALette:~/Downloads/gdal-1.10.1$ !gdal
gdal_translate
ERROR 1: gdal_translate was compiled against GDAL 1.10 but current library
version is 1.9

How/where do I get the 1.10 libs? Or should I install GDAL1.09 to match?

Cheers,
kasper



On 25 April 2014 09:43, Eli Adam <eadam at co.lincoln.or.us> wrote:

> Kasper,
>
> On Thu, Apr 24, 2014 at 2:32 PM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
> > Le jeudi 24 avril 2014 23:29:03, Kasper van Wijk a ?crit :
> >> thank you, Even, for the fast reply. I am a beginner at GDAL and
> installed
> >> the gdal suite with "standard" apt-get and yum, respectively. Can you
> point
> >> me to a place where I can read how to compile GDAL against one of the
> other
> >> JPEG2000 libraries, as you say?
>
> Compiling is a great option and might be the best.  You might also
> want to check which drivers are in Ubuntu GIS and Enterprise Linux GIS
> which might be easier than compiling.  They are often more recent and
> with more features than the standard repos.
>
> https://wiki.ubuntu.com/UbuntuGIS
> http://wiki.osgeo.org/wiki/Enterprise_Linux_GIS
>
> Best regards, Eli
>
> >
> > You will find various resources at
> http://trac.osgeo.org/gdal/wiki/BuildHints
> >
> > Most interesting links for your use case :
> > * http://trac.osgeo.org/gdal/wiki/DownloadSource
> > * http://trac.osgeo.org/gdal/wiki/BuildingOnUnix
> > * http://trac.osgeo.org/gdal/wiki/ECW : if you want to compile against
> ECW SDK
> > * http://gdal.org/frmt_jp2openjpeg.html : if you want to compile against
> > OpenJPEG v2
> >
> >>
> >> Thanks again,
> >> Kasper
> >>
> >> On 25 April 2014 09:25, Even Rouault <even.rouault at mines-paris.org>
> wrote:
> >> > Le jeudi 24 avril 2014 23:17:29, Kasper van Wijk a ?crit :
> >> > > dear all,
> >> > >
> >> > > I am downloading jp2 data from the usgs national map. To plot this
> in
> >> > > cartopy, I need to transform to something else, such as geotiff.
> >> > > However, using gdal_translate I get a warning copied below, and the
> >> > > output is a grainy bw version of the image. I have checked my
> results
> >> > > under linux
> >> >
> >> > both
> >> >
> >> > > fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
> >> > > 2010/11/10
> >> > >
> >> > > gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff -of
> >> >
> >> > GTiff
> >> >
> >> > > warning: not enough tile data (2 bytes)
> >> >
> >> > Apparently your GDAL build uses libjasper as the jpeg2000 library.
> Jasper
> >> > doesn't work very well unfortunately with some real world images.
> >> > You might want to compile GDAL against one of the other JPEG2000
> >> > libraries that are supported : see http://gdal.org/formats_list.html
> >> >
> >> > --
> >> > Geospatial professional services
> >> > http://even.rouault.free.fr/services.html
> >
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140425/7e7353d1/attachment.html>

From skunkmyrddyn at gmail.com  Thu Apr 24 17:29:28 2014
From: skunkmyrddyn at gmail.com (Simon Shak)
Date: Thu, 24 Apr 2014 19:29:28 -0500
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
In-Reply-To: <CAN-+WRhS9kHhqFMzvR3=JAayLiu96-7DtvooSedC0q=D5PkusQ@mail.gmail.com>
References: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
	<c1255b5a99e04461a0241fcc90a04e97@UXCHANGE10-FE3.UoA.auckland.ac.nz>
	<CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>
	<201404242332.54041.even.rouault@mines-paris.org>
	<5408c208fa8b45c2b810cbe0561c8285@UXCHANGE10-FE2.UoA.auckland.ac.nz>
	<CAN-+WRhS9kHhqFMzvR3=JAayLiu96-7DtvooSedC0q=D5PkusQ@mail.gmail.com>
Message-ID: <CAJuTQSEZrRkH+_xKic=FiinMjbw9kcY3H_6-Vi1Wqo7N9xYz0g@mail.gmail.com>

Personally I recommend either the erdas ecwj2k or mrsid driver for uses jp2
files.
On Apr 24, 2014 7:25 PM, "Kasper van Wijk" <k.vanwijk at auckland.ac.nz> wrote:

> Eli: thanks for the new repo. This got me from gdal 1.7.3 to 1.9.1, but
> still the same warning/output
>
> Trent: I downloaded the linux binaries and followed the instructions in
> the README (about PATHS), but:
> kasper at PALette:~/Downloads$ kdu_expand -i
> m_3810623_ne_13_1_20110921_20111031.jp2 -o geo.tif -num_threads 2
> bash: /home/kasper/kakadu/bin/kdu_expand: cannot execute binary file
>
> Even: I managed to install the http://gdal.org/frmt_jp2openjpeg.html, and
> downloaded and install gdal1.10 against the openjpeg libs, but
>
> kasper at PALette:~/Downloads/gdal-1.10.1$ !gdal
> gdal_translate
> ERROR 1: gdal_translate was compiled against GDAL 1.10 but current library
> version is 1.9
>
> How/where do I get the 1.10 libs? Or should I install GDAL1.09 to match?
>
> Cheers,
> kasper
>
>
>
> On 25 April 2014 09:43, Eli Adam <eadam at co.lincoln.or.us> wrote:
>
>> Kasper,
>>
>> On Thu, Apr 24, 2014 at 2:32 PM, Even Rouault
>> <even.rouault at mines-paris.org> wrote:
>> > Le jeudi 24 avril 2014 23:29:03, Kasper van Wijk a ?crit :
>> >> thank you, Even, for the fast reply. I am a beginner at GDAL and
>> installed
>> >> the gdal suite with "standard" apt-get and yum, respectively. Can you
>> point
>> >> me to a place where I can read how to compile GDAL against one of the
>> other
>> >> JPEG2000 libraries, as you say?
>>
>> Compiling is a great option and might be the best.  You might also
>> want to check which drivers are in Ubuntu GIS and Enterprise Linux GIS
>> which might be easier than compiling.  They are often more recent and
>> with more features than the standard repos.
>>
>> https://wiki.ubuntu.com/UbuntuGIS
>> http://wiki.osgeo.org/wiki/Enterprise_Linux_GIS
>>
>> Best regards, Eli
>>
>> >
>> > You will find various resources at
>> http://trac.osgeo.org/gdal/wiki/BuildHints
>> >
>> > Most interesting links for your use case :
>> > * http://trac.osgeo.org/gdal/wiki/DownloadSource
>> > * http://trac.osgeo.org/gdal/wiki/BuildingOnUnix
>> > * http://trac.osgeo.org/gdal/wiki/ECW : if you want to compile against
>> ECW SDK
>> > * http://gdal.org/frmt_jp2openjpeg.html : if you want to compile
>> against
>> > OpenJPEG v2
>> >
>> >>
>> >> Thanks again,
>> >> Kasper
>> >>
>> >> On 25 April 2014 09:25, Even Rouault <even.rouault at mines-paris.org>
>> wrote:
>> >> > Le jeudi 24 avril 2014 23:17:29, Kasper van Wijk a ?crit :
>> >> > > dear all,
>> >> > >
>> >> > > I am downloading jp2 data from the usgs national map. To plot this
>> in
>> >> > > cartopy, I need to transform to something else, such as geotiff.
>> >> > > However, using gdal_translate I get a warning copied below, and the
>> >> > > output is a grainy bw version of the image. I have checked my
>> results
>> >> > > under linux
>> >> >
>> >> > both
>> >> >
>> >> > > fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
>> >> > > 2010/11/10
>> >> > >
>> >> > > gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff
>> -of
>> >> >
>> >> > GTiff
>> >> >
>> >> > > warning: not enough tile data (2 bytes)
>> >> >
>> >> > Apparently your GDAL build uses libjasper as the jpeg2000 library.
>> Jasper
>> >> > doesn't work very well unfortunately with some real world images.
>> >> > You might want to compile GDAL against one of the other JPEG2000
>> >> > libraries that are supported : see http://gdal.org/formats_list.html
>> >> >
>> >> > --
>> >> > Geospatial professional services
>> >> > http://even.rouault.free.fr/services.html
>> >
>> > --
>> > Geospatial professional services
>> > http://even.rouault.free.fr/services.html
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140424/e4968729/attachment-0001.html>

From etourigny.dev at gmail.com  Thu Apr 24 18:20:03 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 24 Apr 2014 22:20:03 -0300
Subject: [gdal-dev] problem with gdal_translate jp2 file from the usgs
	(linux)
In-Reply-To: <CACqBkM_S+5-0cxHq15KqnpiSTxH0qoyqnvRHNFhYm6-wfdobNA@mail.gmail.com>
References: <CAN-+WRjK__+TyzbT8x54T-jkTxUCyLL6R8GjpCf4qaY8KG+35A@mail.gmail.com>
	<c1255b5a99e04461a0241fcc90a04e97@UXCHANGE10-FE3.UoA.auckland.ac.nz>
	<CAN-+WRhH50=m+5S7Vqciyq=tScgqg-_9cgHabnTwdMmE1P8==A@mail.gmail.com>
	<201404242332.54041.even.rouault@mines-paris.org>
	<CACqBkM_S+5-0cxHq15KqnpiSTxH0qoyqnvRHNFhYm6-wfdobNA@mail.gmail.com>
Message-ID: <CA+TxYvPC3KvcjrW20vys6LyBpj91+UM_Gzyfg5thtj2rECca5g@mail.gmail.com>

On Thu, Apr 24, 2014 at 6:43 PM, Eli Adam <eadam at co.lincoln.or.us> wrote:

> Kasper,
>
> On Thu, Apr 24, 2014 at 2:32 PM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
> > Le jeudi 24 avril 2014 23:29:03, Kasper van Wijk a ?crit :
> >> thank you, Even, for the fast reply. I am a beginner at GDAL and
> installed
> >> the gdal suite with "standard" apt-get and yum, respectively. Can you
> point
> >> me to a place where I can read how to compile GDAL against one of the
> other
> >> JPEG2000 libraries, as you say?
>
> Compiling is a great option and might be the best.  You might also
> want to check which drivers are in Ubuntu GIS and Enterprise Linux GIS
> which might be easier than compiling.  They are often more recent and
> with more features than the standard repos.
>
> https://wiki.ubuntu.com/UbuntuGIS
> http://wiki.osgeo.org/wiki/Enterprise_Linux_GIS


Looks like it hasn't been updated in quite a while (a full year actually),
it's using gdal 1.9.2 and qgis 1.8

>From their page:

The goal of the Enterprise Linux GIS (ELGIS) effort is to ensure that the
latest stable versions of the main free GIS software run on the Enterprise
Linux platform.

cheers,
Etienne


>
> Best regards, Eli
>
> >
> > You will find various resources at
> http://trac.osgeo.org/gdal/wiki/BuildHints
> >
> > Most interesting links for your use case :
> > * http://trac.osgeo.org/gdal/wiki/DownloadSource
> > * http://trac.osgeo.org/gdal/wiki/BuildingOnUnix
> > * http://trac.osgeo.org/gdal/wiki/ECW : if you want to compile against
> ECW SDK
> > * http://gdal.org/frmt_jp2openjpeg.html : if you want to compile against
> > OpenJPEG v2
> >
> >>
> >> Thanks again,
> >> Kasper
> >>
> >> On 25 April 2014 09:25, Even Rouault <even.rouault at mines-paris.org>
> wrote:
> >> > Le jeudi 24 avril 2014 23:17:29, Kasper van Wijk a ?crit :
> >> > > dear all,
> >> > >
> >> > > I am downloading jp2 data from the usgs national map. To plot this
> in
> >> > > cartopy, I need to transform to something else, such as geotiff.
> >> > > However, using gdal_translate I get a warning copied below, and the
> >> > > output is a grainy bw version of the image. I have checked my
> results
> >> > > under linux
> >> >
> >> > both
> >> >
> >> > > fedora core 20 and ubuntu 12.04 versions with GDAL 1.7.3, released
> >> > > 2010/11/10
> >> > >
> >> > > gdal_translate m_3810623_ne_13_1_20110921_20111031.jp2 test.tiff -of
> >> >
> >> > GTiff
> >> >
> >> > > warning: not enough tile data (2 bytes)
> >> >
> >> > Apparently your GDAL build uses libjasper as the jpeg2000 library.
> Jasper
> >> > doesn't work very well unfortunately with some real world images.
> >> > You might want to compile GDAL against one of the other JPEG2000
> >> > libraries that are supported : see http://gdal.org/formats_list.html
> >> >
> >> > --
> >> > Geospatial professional services
> >> > http://even.rouault.free.fr/services.html
> >
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140424/bcf87527/attachment.html>

From howard at hobu.co  Fri Apr 25 09:11:17 2014
From: howard at hobu.co (Howard Butler)
Date: Fri, 25 Apr 2014 11:11:17 -0500
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <535965AB.3000200@mapgears.com>
References: <201404241928.26133.even.rouault@mines-paris.org>
	<535965AB.3000200@mapgears.com>
Message-ID: <CFE75148-22E5-479B-9E4C-8A3049CA4CA9@hobu.co>

+1 to promote to release.

On Apr 24, 2014, at 2:27 PM, Daniel Morissette <dmorissette at mapgears.com> wrote:

> +0. I won't have time to test myself, but I am supportive based on the feedback I've seen from others.
> 
> Daniel
> 
> 
> On 14-04-24 1:28 PM, Even Rouault wrote:
>> PSC,
>> 
>> Only I and Jukka have voted on the motion. It would be good if you could find
>> some time to test RC1 and cast your vote.
>> 
>> Best regards,
>> 
>> Even
>> 
>> ----------  Message transmis  ----------
>> 
>> Sujet : [gdal-dev] Motion: Promote 1.11.0RC1 for release
>> Date : dimanche 20 avril 2014, 16:03:08
>> De : Even Rouault <even.rouault at mines-paris.org>
>> ? : "GDAL-dev list" <gdal-dev at lists.osgeo.org>
>> 
>> Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final release.
>> 
>> ---
>> 
>> No critical issue has been specifically reported on RC1 so far, so I invite PSC
>> members to vote on this motion after doing your own testing and validation.
>> Input from everyone else who can test it is also very welcome.
>> 
>> I'll start the voting with my :
>> 
>> +1 Even
>> 
> 
> 
> -- 
> Daniel Morissette
> T: +1 418-696-5056 #201
> http://www.mapgears.com/
> Provider of Professional MapServer Support since 2000
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From burton449geo at gmail.com  Fri Apr 25 09:23:23 2014
From: burton449geo at gmail.com (Max Demars)
Date: Fri, 25 Apr 2014 12:23:23 -0400
Subject: [gdal-dev] GetGeomType() for a MapInfo TAB using OGR MapInfo
	File driver
In-Reply-To: <201404242023.24806.even.rouault@mines-paris.org>
References: <CAKtuc=-CtLRsDPCGs5udCBC3HGPYJPHUC3emxDEZ7k4nr1WBjg@mail.gmail.com>
	<201404242023.24806.even.rouault@mines-paris.org>
Message-ID: <CAKtuc=8o1YOCD3M1LQkET=PMjF2wdS5RMFH1_3A6BtLeuk_g8w@mail.gmail.com>

Hi Even,

Thank you for your reply, that explains a lot. I still wonder why there is
not a possibility to return wkbPolygon like below:

           if( numPoints > 0 && numLines == 0 && numRegions == 0 )
               m_poDefn->SetGeomType( wkbPoint );
           else if( numPoints == 0 && numLines > 0 && numRegions == 0 )
               m_poDefn->SetGeomType( wkbLineString );
+++     else if ( numPoints == 0 && numLines == 0 && numRegions > 0 )
+++         m_poDefn->SetGeomType( wkbPolygon );
           else
               /* we leave it unknown indicating a mixture */;

Maybe there is also a way to check if the layer is made of multi geometries
of one type (no mixture)... It looks to me that the mitab_
tabfile.cpp module could be improved that way. What do you think?

-Max Demars


On Thu, Apr 24, 2014 at 2:23 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le jeudi 24 avril 2014 19:47:36, Max Demars a ?crit :
> > Hi!
> >
> > I am using the OGR MapInfo File driver to read a MapInfo TAB file.
> However,
> > the function
> > GetGeomType()<
> http://gdal.org/python/osgeo.ogr.Layer-class.html#GetGeomTyp
> > e>returns 0 which means point
> > geometry, even if the features in the TAB are only multi-polygons.
>
> No, see ogr_core.h :
>
>     wkbUnknown = 0,         /**< unknown type, non-standard */
>
> >
> > Is it because MapInfo TAB can store many different GeomTypes in the same
> > file?
>
> The MapInfo TAB file will return wkbPoint, wkbLineString or wkbUnknown. The
> later being for polygons/multipolygons, or mix or geometry types.
>
> Source is ogr/ogrsf_frmts/mitab/mitab_tabfile.cpp :
>
>         if( numPoints > 0 && numLines == 0 && numRegions == 0 )
>             m_poDefn->SetGeomType( wkbPoint );
>         else if( numPoints == 0 && numLines > 0 && numRegions == 0 )
>             m_poDefn->SetGeomType( wkbLineString );
>         else
>             /* we leave it unknown indicating a mixture */;
>
>
> >
> > If I take for granted that only one geometry type would always be founded
> > in the TAB, how could I retrieve it?
> >
> >         driver = ogr.GetDriverByName("MapInfo File")
> >         datasource = driver.Open(os.path.join(dirname,shapefileName))
> >         layer = datasource.GetLayer(0)
> >         geometryType = layer.GetGeomType()
> >
> >         >>>geometryType
> >         >>>0
> >
> > Even when looping over features in layer and retrieving geometry type
> using
> > GetDefnRef()<
> http://gdal.org/python/osgeo.ogr.Feature-class.html#GetGeometr
> > yRef>.GetGeomType() the result is always 0 even for multi-polygon
> features.
>
> You should call
>         g = feat.GetGeometryRef()
>         g.GetType()
> to retrieve the geometry type of an individual feature, and that cannot be
> 0=wkbUnknown
>
> layer.GetGeomType(), feat.GetDefnRef().GetGeomType() or
> layer.GetLayerDefn().GetGeomType() are all alias, that will return the
> declared layer geometry type, but not the geometry type of an actual
> feature.
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140425/0655ab44/attachment.html>

From even.rouault at mines-paris.org  Fri Apr 25 10:29:23 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 25 Apr 2014 19:29:23 +0200
Subject: [gdal-dev] GetGeomType() for a MapInfo TAB using OGR MapInfo
	File driver
In-Reply-To: <CAKtuc=8o1YOCD3M1LQkET=PMjF2wdS5RMFH1_3A6BtLeuk_g8w@mail.gmail.com>
References: <CAKtuc=-CtLRsDPCGs5udCBC3HGPYJPHUC3emxDEZ7k4nr1WBjg@mail.gmail.com>
	<201404242023.24806.even.rouault@mines-paris.org>
	<CAKtuc=8o1YOCD3M1LQkET=PMjF2wdS5RMFH1_3A6BtLeuk_g8w@mail.gmail.com>
Message-ID: <201404251929.23926.even.rouault@mines-paris.org>

Le vendredi 25 avril 2014 18:23:23, Max Demars a ?crit :
> Hi Even,
> 
> Thank you for your reply, that explains a lot. I still wonder why there is
> not a possibility to return wkbPolygon like below:
> 
>            if( numPoints > 0 && numLines == 0 && numRegions == 0 )
>                m_poDefn->SetGeomType( wkbPoint );
>            else if( numPoints == 0 && numLines > 0 && numRegions == 0 )
>                m_poDefn->SetGeomType( wkbLineString );
> +++     else if ( numPoints == 0 && numLines == 0 && numRegions > 0 )
> +++         m_poDefn->SetGeomType( wkbPolygon );
>            else
>                /* we leave it unknown indicating a mixture */;
> 
> Maybe there is also a way to check if the layer is made of multi geometries
> of one type (no mixture)... It looks to me that the mitab_
> tabfile.cpp module could be improved that way. What do you think?

I imagine (I haven't coded that driver) that the reason is that regions can be 
either a mix of Polygon and MultiPolygon, hence it is not possible to expose a 
single geometry type.
Well, in the shapefile driver, the same situation occurs and we expose 
wkbPolygon, but can indeed cause some issues when converting to other formats.
A potential solution would be to declare MultiPolygon as geometry type and 
indeed return single Polygon in a MultiPolygon.

> 
> -Max Demars
> 
> 
> On Thu, Apr 24, 2014 at 2:23 PM, Even Rouault
> 
> <even.rouault at mines-paris.org>wrote:
> > Le jeudi 24 avril 2014 19:47:36, Max Demars a ?crit :
> > > Hi!
> > > 
> > > I am using the OGR MapInfo File driver to read a MapInfo TAB file.
> > 
> > However,
> > 
> > > the function
> > > GetGeomType()<
> > 
> > http://gdal.org/python/osgeo.ogr.Layer-class.html#GetGeomTyp
> > 
> > > e>returns 0 which means point
> > > geometry, even if the features in the TAB are only multi-polygons.
> > 
> > No, see ogr_core.h :
> >     wkbUnknown = 0,         /**< unknown type, non-standard */
> > > 
> > > Is it because MapInfo TAB can store many different GeomTypes in the
> > > same file?
> > 
> > The MapInfo TAB file will return wkbPoint, wkbLineString or wkbUnknown.
> > The later being for polygons/multipolygons, or mix or geometry types.
> > 
> > Source is ogr/ogrsf_frmts/mitab/mitab_tabfile.cpp :
> >         if( numPoints > 0 && numLines == 0 && numRegions == 0 )
> >         
> >             m_poDefn->SetGeomType( wkbPoint );
> >         
> >         else if( numPoints == 0 && numLines > 0 && numRegions == 0 )
> >         
> >             m_poDefn->SetGeomType( wkbLineString );
> >         
> >         else
> >         
> >             /* we leave it unknown indicating a mixture */;
> > > 
> > > If I take for granted that only one geometry type would always be
> > > founded in the TAB, how could I retrieve it?
> > > 
> > >         driver = ogr.GetDriverByName("MapInfo File")
> > >         datasource = driver.Open(os.path.join(dirname,shapefileName))
> > >         layer = datasource.GetLayer(0)
> > >         geometryType = layer.GetGeomType()
> > >         
> > >         >>>geometryType
> > >         >>>0
> > > 
> > > Even when looping over features in layer and retrieving geometry type
> > 
> > using
> > 
> > > GetDefnRef()<
> > 
> > http://gdal.org/python/osgeo.ogr.Feature-class.html#GetGeometr
> > 
> > > yRef>.GetGeomType() the result is always 0 even for multi-polygon
> > 
> > features.
> > 
> > You should call
> > 
> >         g = feat.GetGeometryRef()
> >         g.GetType()
> > 
> > to retrieve the geometry type of an individual feature, and that cannot
> > be 0=wkbUnknown
> > 
> > layer.GetGeomType(), feat.GetDefnRef().GetGeomType() or
> > layer.GetLayerDefn().GetGeomType() are all alias, that will return the
> > declared layer geometry type, but not the geometry type of an actual
> > feature.
> > 
> > Even
> > 
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Fri Apr 25 10:31:08 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 25 Apr 2014 19:31:08 +0200
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <BLU173-W124BEDF2BFDF8E21F0E2E7905B0@phx.gbl>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<BLU173-W124BEDF2BFDF8E21F0E2E7905B0@phx.gbl>
Message-ID: <CA+Ei1Oc7C7UomW9=Tyk=WAfoCCTL9U_SwLaTQa4og_Y7=E-fjQ@mail.gmail.com>

Hi Ivan,

2014-04-24 23:27 GMT+02:00 Ivan Lucena <lucena_ivan at hotmail.com>:

first of all, thanks a lot for very useful notes!

> Press F7 will build everything but you don't need to do that if you have
> done in command line.

I tried to build GDAL also from VC, but it ends with

1>      lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj
frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
1>nitf_gcprpc.obj : warning LNK4221: This object file does not define
any previously undefined public symbols, so it will not be used by any
link operation that consumes this library
1>      link /nologo /dll /INCLUDE:_OGRFeatureStylePuller
/INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods
/INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll
/INCLUDE:_GDALSimpleImageWarp at 36  /INCLUDE:_GDALReprojectImage at 48
/INCLUDE:_GDALComputeMedianCutPCT at 32  /INCLUDE:_GDALDitherRGB2PCT at 28
/INCLUDE:_OCTNewCoordinateTransformation at 8  port\*.obj gcore\*.obj
alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
  C:\oraclexe\app\oracle\product\11.2.0\server\oci\lib\msvc\ociw32.lib
 C:\oraclexe\app\oracle\product\11.2.0\server\oci\lib\msvc\oci.lib
                          odbc32.lib odbccp32.lib user32.lib
           ws2_32.lib gcore\Version.res  /out:gdal111.dll
/implib:gdal_i.lib   /debug
1>     Creating library gdal_i.lib and object gdal_i.exp
1>cpl_http.obj : error LNK2019: unresolved external symbol
__imp__curl_easy_setopt referenced in function "void __cdecl
CPLHTTPSetOptions(void *,char * *)"
(?CPLHTTPSetOptions@@YAXPAXPAPAD at Z)
1>cpl_vsil_curl.obj : error LNK2001: unresolved external symbol
__imp__curl_easy_setopt
1>cpl_vsil_curl_streaming.obj : error LNK2001: unresolved external
symbol __imp__curl_easy_setopt

Any idea what could be wrong?

> 5. Prepare a command line on Project/Properties/debug
>
> I can give more info tomorrow. I can't remember how the UI goes but is very
> simple.

Thanks in advance for very valuable help! Martin

From even.rouault at mines-paris.org  Fri Apr 25 10:34:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 25 Apr 2014 19:34:32 +0200
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <CA+Ei1Oc7C7UomW9=Tyk=WAfoCCTL9U_SwLaTQa4og_Y7=E-fjQ@mail.gmail.com>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<BLU173-W124BEDF2BFDF8E21F0E2E7905B0@phx.gbl>
	<CA+Ei1Oc7C7UomW9=Tyk=WAfoCCTL9U_SwLaTQa4og_Y7=E-fjQ@mail.gmail.com>
Message-ID: <201404251934.32661.even.rouault@mines-paris.org>

Le vendredi 25 avril 2014 19:31:08, Martin Landa a ?crit :
> Hi Ivan,
> 
> 2014-04-24 23:27 GMT+02:00 Ivan Lucena <lucena_ivan at hotmail.com>:
> 
> first of all, thanks a lot for very useful notes!
> 
> > Press F7 will build everything but you don't need to do that if you have
> > done in command line.
> 
> I tried to build GDAL also from VC, but it ends with
> 
> 1>      lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj
> frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
> 1>nitf_gcprpc.obj : warning LNK4221: This object file does not define
> any previously undefined public symbols, so it will not be used by any
> link operation that consumes this library
> 1>      link /nologo /dll /INCLUDE:_OGRFeatureStylePuller
> /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods
> /INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll
> /INCLUDE:_GDALSimpleImageWarp at 36  /INCLUDE:_GDALReprojectImage at 48
> /INCLUDE:_GDALComputeMedianCutPCT at 32  /INCLUDE:_GDALDitherRGB2PCT at 28
> /INCLUDE:_OCTNewCoordinateTransformation at 8  port\*.obj gcore\*.obj
> alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
>   C:\oraclexe\app\oracle\product\11.2.0\server\oci\lib\msvc\ociw32.lib
>  C:\oraclexe\app\oracle\product\11.2.0\server\oci\lib\msvc\oci.lib
>                           odbc32.lib odbccp32.lib user32.lib
>            ws2_32.lib gcore\Version.res  /out:gdal111.dll
> /implib:gdal_i.lib   /debug
> 1>     Creating library gdal_i.lib and object gdal_i.exp
> 1>cpl_http.obj : error LNK2019: unresolved external symbol
> __imp__curl_easy_setopt referenced in function "void __cdecl
> CPLHTTPSetOptions(void *,char * *)"
> (?CPLHTTPSetOptions@@YAXPAXPAPAD at Z)
> 1>cpl_vsil_curl.obj : error LNK2001: unresolved external symbol
> __imp__curl_easy_setopt
> 1>cpl_vsil_curl_streaming.obj : error LNK2001: unresolved external
> symbol __imp__curl_easy_setopt
> 
> Any idea what could be wrong?

Looks like you have defined CURL_INC, but not CURL_LIB in your nmake.local / 
nmake.opt

> 
> > 5. Prepare a command line on Project/Properties/debug
> > 
> > I can give more info tomorrow. I can't remember how the UI goes but is
> > very simple.
> 
> Thanks in advance for very valuable help! Martin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From szekerest at gmail.com  Fri Apr 25 10:45:46 2014
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri, 25 Apr 2014 19:45:46 +0200
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release
In-Reply-To: <201404201603.08493.even.rouault@mines-paris.org>
References: <201404201603.08493.even.rouault@mines-paris.org>
Message-ID: <CACALY+SnP78ZZdWvaY-OLF0nHqQVzNQ4uehNc071GF6phC5m6w@mail.gmail.com>

+1

Tamas



2014-04-20 16:03 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

> Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final
> release.
>
> ---
>
> No critical issue has been specifically reported on RC1 so far, so I
> invite PSC
> members to vote on this motion after doing your own testing and validation.
> Input from everyone else who can test it is also very welcome.
>
> I'll start the voting with my :
>
> +1 Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140425/2df6080a/attachment.html>

From landa.martin at gmail.com  Fri Apr 25 10:48:23 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 25 Apr 2014 19:48:23 +0200
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <201404251934.32661.even.rouault@mines-paris.org>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<BLU173-W124BEDF2BFDF8E21F0E2E7905B0@phx.gbl>
	<CA+Ei1Oc7C7UomW9=Tyk=WAfoCCTL9U_SwLaTQa4og_Y7=E-fjQ@mail.gmail.com>
	<201404251934.32661.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1OdfYR0dEzRERXZ-_cUCzspjwbppLsPmfiyG+4zNpTbA8g@mail.gmail.com>

Hi,

2014-04-25 19:34 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

[...]

> Looks like you have defined CURL_INC, but not CURL_LIB in your nmake.local /
> nmake.opt

you are right, I double-checked nmake32.opt which is used to build
GDAL from cmd line and found the problem. Sorry for the noise. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Fri Apr 25 10:53:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 25 Apr 2014 19:53:47 +0200
Subject: [gdal-dev] Motion: Promote 1.11.0RC1 for release --> PASSED
In-Reply-To: <201404201603.08493.even.rouault@mines-paris.org>
References: <201404201603.08493.even.rouault@mines-paris.org>
Message-ID: <201404251953.47530.even.rouault@mines-paris.org>

Le dimanche 20 avril 2014 16:03:08, Even Rouault a ?crit :
> Motion: GDAL/OGR 1.11.0RC1 is promoted to be the official 1.11.0 final
> release.
> 
> ---

I declare this motion passed with +1 from JukkaR, FrankW, HowardB, TamasS and 
myself, and +0 from DanielM. The release announcement will follow closely.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucena_ivan at hotmail.com  Fri Apr 25 11:08:33 2014
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Fri, 25 Apr 2014 14:08:33 -0400
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <201404251934.32661.even.rouault@mines-paris.org>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<BLU173-W124BEDF2BFDF8E21F0E2E7905B0@phx.gbl>
	<CA+Ei1Oc7C7UomW9=Tyk=WAfoCCTL9U_SwLaTQa4og_Y7=E-fjQ@mail.gmail.com>,
	<201404251934.32661.even.rouault@mines-paris.org>
Message-ID: <BLU173-W2114866B23F0120C8521BC905A0@phx.gbl>

Hi Martin,

If your intention was to build for 64bit and should have create the .vcproj file this way:

C:\<folder>\trunk\gdal> makegdal_gen 10.00 64 > makegdal10-trunk.vcproj

You should open it in VS 2010 and let it is job and convert to the new format.

And your nmake.local should like this:

MSVC_VER=1600
DEBUG=1
WIN64=yes

But as Even pointed our it looks like you missed some settings for the CUR library.

Whatever happens in the IDE should be the same as in command line. 

The IDE is going to do what is defined in Project Properties/Configuration Properties/NMake, like for example:

Build Command Line: cd $(ProjectDir) && nmake -f makefile.vc && nmake -f makefile.vc install

You click the <edit...> option and replace the "&&" by new line.

cd $(ProjectDir) 
nmake -f makefile.vc 
nmake -f makefile.vc install

That is easier to read. That "&&" was introduced to fix a problem with SVN and CRLF stuff.

The only thing that could be different between typing those command in command line and running through the IDE is the compiler architecture and environment variable.

To make sure that the IDE will run nmake in a x64 environment you should change the Platform drop-down list at the center of the VS task bar to "x64", and to undefine an environmental variable you can add that to your nmake.local:

!UNDEF CURL_INC

Good luck!


> From: even.rouault at mines-paris.org
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] debug ogr2ogr on Windows
> Date: Fri, 25 Apr 2014 19:34:32 +0200
> CC: landa.martin at gmail.com; lucena_ivan at hotmail.com
> 
> Le vendredi 25 avril 2014 19:31:08, Martin Landa a ?crit :
> > Hi Ivan,
> > 
> > 2014-04-24 23:27 GMT+02:00 Ivan Lucena <lucena_ivan at hotmail.com>:
> > 
> > first of all, thanks a lot for very useful notes!
> > 
> > > Press F7 will build everything but you don't need to do that if you have
> > > done in command line.
> > 
> > I tried to build GDAL also from VC, but it ends with
> > 
> > 1>      lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj
> > frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
> > 1>nitf_gcprpc.obj : warning LNK4221: This object file does not define
> > any previously undefined public symbols, so it will not be used by any
> > link operation that consumes this library
> > 1>      link /nologo /dll /INCLUDE:_OGRFeatureStylePuller
> > /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods
> > /INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll
> > /INCLUDE:_GDALSimpleImageWarp at 36  /INCLUDE:_GDALReprojectImage at 48
> > /INCLUDE:_GDALComputeMedianCutPCT at 32  /INCLUDE:_GDALDitherRGB2PCT at 28
> > /INCLUDE:_OCTNewCoordinateTransformation at 8  port\*.obj gcore\*.obj
> > alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
> >   C:\oraclexe\app\oracle\product\11.2.0\server\oci\lib\msvc\ociw32.lib
> >  C:\oraclexe\app\oracle\product\11.2.0\server\oci\lib\msvc\oci.lib
> >                           odbc32.lib odbccp32.lib user32.lib
> >            ws2_32.lib gcore\Version.res  /out:gdal111.dll
> > /implib:gdal_i.lib   /debug
> > 1>     Creating library gdal_i.lib and object gdal_i.exp
> > 1>cpl_http.obj : error LNK2019: unresolved external symbol
> > __imp__curl_easy_setopt referenced in function "void __cdecl
> > CPLHTTPSetOptions(void *,char * *)"
> > (?CPLHTTPSetOptions@@YAXPAXPAPAD at Z)
> > 1>cpl_vsil_curl.obj : error LNK2001: unresolved external symbol
> > __imp__curl_easy_setopt
> > 1>cpl_vsil_curl_streaming.obj : error LNK2001: unresolved external
> > symbol __imp__curl_easy_setopt
> > 
> > Any idea what could be wrong?
> 
> Looks like you have defined CURL_INC, but not CURL_LIB in your nmake.local / 
> nmake.opt
> 
> > 
> > > 5. Prepare a command line on Project/Properties/debug
> > > 
> > > I can give more info tomorrow. I can't remember how the UI goes but is
> > > very simple.
> > 
> > Thanks in advance for very valuable help! Martin
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140425/d2a2cb91/attachment.html>

From even.rouault at mines-paris.org  Fri Apr 25 11:27:21 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 25 Apr 2014 20:27:21 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.0 released
Message-ID: <201404252027.21200.even.rouault@mines-paris.org>

On behalf of the GDAL/OGR development team and community, I am pleased to
announce the release of GDAL/OGR 1.11.0.  GDAL/OGR is a C++ geospatial
data access library for raster and vector file formats, databases and
web services.  It includes bindings for several languages, and a variety
of command line tools.

   http://www.gdal.org/

The 1.11.0 release is a major new feature release with the following 
highlights:

 * New GDAL drivers:
    - KRO: read/write support for KRO KOKOR Raw format
                http://gdal.org/frmt_various.html#KRO

 * New OGR drivers:
    - CartoDB : read/write support
                http://gdal.org/ogr/drv_cartodb.html

    - GME / Google Map Engine : read/write support
                http://trac.osgeo.org/gdal/wiki/GMEDriver 

    - GPKG / GeoPackage : read-write support (vector part of the spec.)
                http://gdal.org/ogr/drv_geopackage.html

    - OpenFileGDB: read-only support (no external dependency)
                http://gdal.org/ogr/drv_openfilegdb.html
                
    - SXF: read-only support
                http://gdal.org/ogr/drv_sxf.html

    - WALK: read-only support
                http://gdal.org/ogr/drv_walk.html

    - WasP .map : read-write support
                http://gdal.org/ogr/drv_wasp.html

 * Significantly improved drivers: GML, LIBKML

 * RFC 40: enhanced RAT support
        http://trac.osgeo.org/gdal/wiki/rfc40_enhanced_rat_support

 * RFC 41: multiple geometry fields support
        http://trac.osgeo.org/gdal/wiki/rfc41_multiple_geometry_fields

 * RFC 42: OGR Layer laundered field lookup 
        http://trac.osgeo.org/gdal/wiki/rfc42_find_laundered_fields

 * RFC 43: add GDALMajorObject::GetMetadataDomainList() (#5275)
        http://trac.osgeo.org/gdal/wiki/rfc43_getmetadatadomainlist

 * RFC 45: GDAL datasets and raster bands as virtual memory mapping
        http://trac.osgeo.org/gdal/wiki/rfc45_virtualmem

 * Upgrade to EPSG 8.2 database

More complete information on the new features and fixes in the 1.11.0
release can be found at:

  http://trac.osgeo.org/gdal/wiki/Release/1.11.0-News

The new release can be downloaded from:
  * http://download.osgeo.org/gdal/1.11.0/gdal1110.zip - source as a zip
  * http://download.osgeo.org/gdal/1.11.0/gdal-1.11.0.tar.gz - source as 
.tar.gz
  * http://download.osgeo.org/gdal/1.11.0/gdalautotest-1.11.0.tar.gz - test 
suite
  * http://download.osgeo.org/gdal/1.11.0/gdal1110doc.zip - documentation / 
website

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From shawngong.gdal at gmail.com  Fri Apr 25 12:21:15 2014
From: shawngong.gdal at gmail.com (shawn gong)
Date: Fri, 25 Apr 2014 15:21:15 -0400
Subject: [gdal-dev] Sentinel driver
Message-ID: <CAA1EJsUEZG9W_b5xYtshQMSXucuE2in=9C4KY3wOV6z8tpSPOA@mail.gmail.com>

Hi,

Will there be a Sentenel-1 gdal driver soon?
I heard that it contains a GTiff and XML.

thanks,
Shawn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140425/ebac66f9/attachment.html>

From jluis at ualg.pt  Fri Apr 25 12:37:07 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri, 25 Apr 2014 20:37:07 +0100
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <BLU173-W83ACD7E00DBC6E22120AA905B0@phx.gbl>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>,
	<53597F88.4070608@stripfamily.net>,
	<CA+Ei1OdjJVxir5BfQj3OcqTsEPd2Jqxg5X+XjZv0cfw2xBVPrg@mail.gmail.com>,
	<535985CC.8020602@ualg.pt> <BLU173-W83ACD7E00DBC6E22120AA905B0@phx.gbl>
Message-ID: <535AB963.9050700@ualg.pt>

Sorry for bad info than (I had been told that the debugger was not part 
of the Express editions)

But you don't need to create project files to run a debugg session. All 
it takes is to

File -> Open -> Project/Solution

and load the executable. Yes, the executable. Than go to Project -> 
Properties and, if needed change the Working directory, fill the 
"Arguments" field with the command line options (but NOT the programs name).

Next go again to File -> Open ->  File and load the source file. From 
here on is just to put breaklines and hit F5


Joaquim

> I can't see why you can't debug in express version.
> I used it for many years. That is why I created the makegdal_gen.bat.
> But I don't use express edition now. I use Linux most of the time now.
>
> > Date: Thu, 24 Apr 2014 22:44:44 +0100
> > From: jluis at ualg.pt
> > To: landa.martin at gmail.com
> > CC: gdal-dev at lists.osgeo.org; david at stripfamily.net
> > Subject: Re: [gdal-dev] debug ogr2ogr on Windows
> >
> > On 24-04-2014 22:20, Martin Landa wrote:
> > > [back to ML]
> > >
> > > 2014-04-24 23:18 GMT+02:00 David Strip<david at stripfamily.net>:
> > >> do you have access to visual studio?
> > > sure, as I noted, building using package.cmd script (nmake-based). I
> > > have VS 2010 Express.
> > Others can confirm this, but I'm afraid you wont be able to do an 
> IDE debugging with an Express version. It's a petty because VS is 
> really good for debugging.
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140425/797499c6/attachment.html>

From landa.martin at gmail.com  Sat Apr 26 03:51:16 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 26 Apr 2014 12:51:16 +0200
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <535AB963.9050700@ualg.pt>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<53597F88.4070608@stripfamily.net>
	<CA+Ei1OdjJVxir5BfQj3OcqTsEPd2Jqxg5X+XjZv0cfw2xBVPrg@mail.gmail.com>
	<535985CC.8020602@ualg.pt>
	<BLU173-W83ACD7E00DBC6E22120AA905B0@phx.gbl>
	<535AB963.9050700@ualg.pt>
Message-ID: <CA+Ei1OfphGKKJt4NCPkAS+4a5Uj2otBsu8QxmBG5P-2yS=1tJQ@mail.gmail.com>

Hi,

2014-04-25 21:37 GMT+02:00 Joaquim Luis <jluis at ualg.pt>:

> File -> Open -> Project/Solution
>
> and load the executable. Yes, the executable. Than go to Project ->
> Properties and, if needed change the Working directory, fill the "Arguments"
> field with the command line options (but NOT the programs name).

thanks to your useful notes guys I managed to debug ogr2ogr.exe. I
have still problem with debugging OCI driver. When I add breakpoint to
`OGROCIDataSource::Open` it doesn't work (No symbols has been loaded
for this document). I checked output and I found

Loaded 'C:\OSGeo4W_gdal\usr\src\gdal_trunk\apps\ogr2ogr.exe', Symbols loaded.
Loaded 'C:\OSGeo4W_gdal\usr\src\gdal_trunk\gdal111.dll', Symbols loaded.
Loaded 'C:\OSGeo4W_gdal\usr\src\gdal_trunk\apps\gdalplugins\ogr_OCI.dll',
Symbols loaded.

When I add breakpoint to `OGRGMLDataSource::Open` it works. Any idea
what could be missing? Thanks in advance, Martin

From even.rouault at mines-paris.org  Sat Apr 26 03:57:47 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 26 Apr 2014 12:57:47 +0200
Subject: [gdal-dev] Sentinel driver
In-Reply-To: <CAA1EJsUEZG9W_b5xYtshQMSXucuE2in=9C4KY3wOV6z8tpSPOA@mail.gmail.com>
References: <CAA1EJsUEZG9W_b5xYtshQMSXucuE2in=9C4KY3wOV6z8tpSPOA@mail.gmail.com>
Message-ID: <201404261257.48024.even.rouault@mines-paris.org>

Le vendredi 25 avril 2014 21:21:15, shawn gong a ?crit :
> Hi,
> 
> Will there be a Sentenel-1 gdal driver soon?

Drivers don't appear out of spontaneous generation -;)

> I heard that it contains a GTiff and XML.

There are interesting resources online:
* introduction
https://earth.esa.int/web/sentinel/sentinel-1-sar-wiki/-/wiki/Sentinel%20One/Level+1+Product+Formatting
* format specification
https://earth.esa.int/c/document_library/get_file?folderId=349449&name=DLFE-4503.pdf
* test data
https://earth.esa.int/web/sentinel/sentinel-1-sar-wiki/-/wiki/Sentinel%20One/Test+Data

I've downloaded a few test datasets and you can already read the GeoTIFF files in them.
Depending on the nature of the product, they might be of complex data type (CInt16) or not.
They have GCPs, so you need to use gdalwarp to rectify them.

There's a huge quantity of metadata in the companion XML files.
A potential driver should likely select the ones that are the most interesting to report. A bit like
DIMAP 2.

> 
> thanks,
> Shawn

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Sat Apr 26 05:56:21 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 26 Apr 2014 14:56:21 +0200
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <CA+Ei1OfphGKKJt4NCPkAS+4a5Uj2otBsu8QxmBG5P-2yS=1tJQ@mail.gmail.com>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<53597F88.4070608@stripfamily.net>
	<CA+Ei1OdjJVxir5BfQj3OcqTsEPd2Jqxg5X+XjZv0cfw2xBVPrg@mail.gmail.com>
	<535985CC.8020602@ualg.pt>
	<BLU173-W83ACD7E00DBC6E22120AA905B0@phx.gbl>
	<535AB963.9050700@ualg.pt>
	<CA+Ei1OfphGKKJt4NCPkAS+4a5Uj2otBsu8QxmBG5P-2yS=1tJQ@mail.gmail.com>
Message-ID: <CA+Ei1OfxniX3PmZK0wdJXxRBdVGAD77kfYQsXf3wvOE+ra71Vg@mail.gmail.com>

Hi,

2014-04-26 12:51 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> have still problem with debugging OCI driver. When I add breakpoint to
> `OGROCIDataSource::Open` it doesn't work (No symbols has been loaded
> for this document). I checked output and I found

I tried to rebuild GDAL with OCI (not as a plugin). Then I can place a
brakepoint (no warning) to OCI driver, but when I debug ogr2ogr.exe
the debugger doesn't stop on this brakepoint. If I place another
brakepoint for e.g to GML driver (input datasource), it breaks there.
Any idea where could be a difference? Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From landa.martin at gmail.com  Sat Apr 26 06:04:48 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 26 Apr 2014 15:04:48 +0200
Subject: [gdal-dev] debug ogr2ogr on Windows
In-Reply-To: <CA+Ei1OfxniX3PmZK0wdJXxRBdVGAD77kfYQsXf3wvOE+ra71Vg@mail.gmail.com>
References: <CA+Ei1Ofof4+EYuBj+odZz5owFcH0YfVjRMN0Q8v-LsAiE_=SeA@mail.gmail.com>
	<53597F88.4070608@stripfamily.net>
	<CA+Ei1OdjJVxir5BfQj3OcqTsEPd2Jqxg5X+XjZv0cfw2xBVPrg@mail.gmail.com>
	<535985CC.8020602@ualg.pt>
	<BLU173-W83ACD7E00DBC6E22120AA905B0@phx.gbl>
	<535AB963.9050700@ualg.pt>
	<CA+Ei1OfphGKKJt4NCPkAS+4a5Uj2otBsu8QxmBG5P-2yS=1tJQ@mail.gmail.com>
	<CA+Ei1OfxniX3PmZK0wdJXxRBdVGAD77kfYQsXf3wvOE+ra71Vg@mail.gmail.com>
Message-ID: <CA+Ei1OfYhLt1V9W_8TqgG35vyK8rD7+ryvjLmp5FXm6SnAk=zg@mail.gmail.com>

Hi,

2014-04-26 14:56 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> I tried to rebuild GDAL with OCI (not as a plugin). Then I can place a
> brakepoint (no warning) to OCI driver, but when I debug ogr2ogr.exe
> the debugger doesn't stop on this brakepoint. If I place another
> brakepoint for e.g to GML driver (input datasource), it breaks there.
> Any idea where could be a difference? Martin

ah, there was ogr_oci.dll plugin still in the path. When I removed it,
the debugger started to behave as expected. So at least I am able to
debug OCI driver when not compiled as a plugin. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From david.tran at hsr.ch  Sat Apr 26 12:16:44 2014
From: david.tran at hsr.ch (David Tran)
Date: Sat, 26 Apr 2014 21:16:44 +0200
Subject: [gdal-dev] gdal autotest with gdal 1.11 (msvc2010)
Message-ID: <535C061C.8030406@hsr.ch>

hi

how does gdal autotest work? i compiled gdal 1.11 with vc10 and 
installed python 3.4 and run_all.py:

> Traceback (most recent call last):
>   File "E:\gdalautotest-1.11.0\run_all.py", line 30, in <module>
>     import gdaltest
>   File "pymod\gdaltest.py", line 37, in <module>
>     from osgeo import gdal
> ImportError: No module named 'osgeo'

regards
david

From mateusz at loskot.net  Sat Apr 26 12:45:53 2014
From: mateusz at loskot.net (=?UTF-8?Q?Mateusz_=C5=81oskot?=)
Date: Sat, 26 Apr 2014 21:45:53 +0200
Subject: [gdal-dev] gdal autotest with gdal 1.11 (msvc2010)
In-Reply-To: <535C061C.8030406@hsr.ch>
References: <535C061C.8030406@hsr.ch>
Message-ID: <CABUeae-P6nFdg-VQCVFBGsSqY_dvOSSMtFb9vStJiWYZz3ECHg@mail.gmail.com>

On 26 April 2014 21:16, David Tran <david.tran at hsr.ch> wrote:
> hi
>
> how does gdal autotest work? i compiled gdal 1.11 with vc10 and installed
> python 3.4 and run_all.py:
>
>> Traceback (most recent call last):
>>   File "E:\gdalautotest-1.11.0\run_all.py", line 30, in <module>
>>     import gdaltest
>>   File "pymod\gdaltest.py", line 37, in <module>
>>     from osgeo import gdal
>> ImportError: No module named 'osgeo'


You need toset PATH, PYTHONPATH and GDAL_DATA.
See these notes:
http://trac.osgeo.org/gdal/wiki/TestingNotes#TestingonWindowsusingoldbindings
and use your paths to tell Python where to find GDAL bindings inside
your build tree.
(Ignore it says old-gen bindings).

Best regards,
-- 
Mateusz  ?oskot, http://mateusz.loskot.net

From david.tran at hsr.ch  Sat Apr 26 14:23:05 2014
From: david.tran at hsr.ch (David Tran)
Date: Sat, 26 Apr 2014 23:23:05 +0200
Subject: [gdal-dev] gdal autotest with gdal 1.11 (msvc2010)
In-Reply-To: <CABUeae-P6nFdg-VQCVFBGsSqY_dvOSSMtFb9vStJiWYZz3ECHg@mail.gmail.com>
References: <535C061C.8030406@hsr.ch>
	<CABUeae-P6nFdg-VQCVFBGsSqY_dvOSSMtFb9vStJiWYZz3ECHg@mail.gmail.com>
Message-ID: <535C23B9.8020103@hsr.ch>

I just tried to set those path with:

set PATH=E:\gdal111_32bit_msvc2010\bin;%PATH%
set PYTHONPATH=E:\gdalautotest-1.11.0\pymod
set GDAL_DATA=E:\gdal111_32bit_msvc2010\data

CMD shows me the same message as below.


-------- Original Message  --------
Subject: Re: [gdal-dev] gdal autotest with gdal 1.11 (msvc2010)
From: Mateusz ?oskot <mateusz at loskot.net>
To: David Tran <david.tran at hsr.ch>
Date: Saturday, 26. April 2014 21:45:53

> On 26 April 2014 21:16, David Tran <david.tran at hsr.ch> wrote:
>> hi
>>
>> how does gdal autotest work? i compiled gdal 1.11 with vc10 and installed
>> python 3.4 and run_all.py:
>>
>>> Traceback (most recent call last):
>>>    File "E:\gdalautotest-1.11.0\run_all.py", line 30, in <module>
>>>      import gdaltest
>>>    File "pymod\gdaltest.py", line 37, in <module>
>>>      from osgeo import gdal
>>> ImportError: No module named 'osgeo'
>
>
> You need toset PATH, PYTHONPATH and GDAL_DATA.
> See these notes:
> http://trac.osgeo.org/gdal/wiki/TestingNotes#TestingonWindowsusingoldbindings
> and use your paths to tell Python where to find GDAL bindings inside
> your build tree.
> (Ignore it says old-gen bindings).
>
> Best regards,
>

From lucadeluge at gmail.com  Sat Apr 26 14:25:57 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Sat, 26 Apr 2014 23:25:57 +0200
Subject: [gdal-dev] ReprojectImage and nodata
In-Reply-To: <201404161600.47151.even.rouault@mines-paris.org>
References: <CAK4m-3wTORzvyPRYAsaArJ7Vr5_67d00rtLEPOZAt7G-Wiex3Q@mail.gmail.com>
	<201404161600.47151.even.rouault@mines-paris.org>
Message-ID: <CAK4m-3xL3wpOJzNYYV_2RcY5T9x1BodYCkgXcwzZvd=wCr6U4Q@mail.gmail.com>

On 16 April 2014 16:00, Even Rouault <even.rouault at mines-paris.org> wrote:

Hi Even,

>
> Calling
>
> dst_ds.GetRasterBand(X).SetNoDataValue(nv)
> dst_ds.GetRasterBand(X).Fill(nv)
>
> before gdal.ReprojectImage() should do what you want.
>

Yes, it seems correct.
I have to test it a little bit more but the first results are goods.

thanks


-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From even.rouault at mines-paris.org  Sat Apr 26 14:28:41 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 26 Apr 2014 23:28:41 +0200
Subject: [gdal-dev] gdal autotest with gdal 1.11 (msvc2010)
In-Reply-To: <535C23B9.8020103@hsr.ch>
References: <535C061C.8030406@hsr.ch>
	<CABUeae-P6nFdg-VQCVFBGsSqY_dvOSSMtFb9vStJiWYZz3ECHg@mail.gmail.com>
	<535C23B9.8020103@hsr.ch>
Message-ID: <201404262328.41989.even.rouault@mines-paris.org>


> set PYTHONPATH=E:\gdalautotest-1.11.0\pymod

This is wrong. It should rather point to something like (don't copy that 
blindly. The end is certainly wrong)

e:\gdal111_32bit_msvc2010\swig\python\build\lib.win32-3.3

But actually, just running "python setup.py install" in swig/python should be 
enough to install the bindings, and avoid setting PYTHONPATH at all.

> 
> -------- Original Message  --------
> Subject: Re: [gdal-dev] gdal autotest with gdal 1.11 (msvc2010)
> From: Mateusz ?oskot <mateusz at loskot.net>
> To: David Tran <david.tran at hsr.ch>
> Date: Saturday, 26. April 2014 21:45:53
> 
> > On 26 April 2014 21:16, David Tran <david.tran at hsr.ch> wrote:
> >> hi
> >> 
> >> how does gdal autotest work? i compiled gdal 1.11 with vc10 and
> >> installed
> >> 
> >> python 3.4 and run_all.py:
> >>> Traceback (most recent call last):
> >>>    File "E:\gdalautotest-1.11.0\run_all.py", line 30, in <module>
> >>>    
> >>>      import gdaltest
> >>>    
> >>>    File "pymod\gdaltest.py", line 37, in <module>
> >>>    
> >>>      from osgeo import gdal
> >>> 
> >>> ImportError: No module named 'osgeo'
> > 
> > You need toset PATH, PYTHONPATH and GDAL_DATA.
> > See these notes:
> > http://trac.osgeo.org/gdal/wiki/TestingNotes#TestingonWindowsusingoldbind
> > ings and use your paths to tell Python where to find GDAL bindings inside
> > your build tree.
> > (Ignore it says old-gen bindings).
> > 
> > Best regards,
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lucadeluge at gmail.com  Sat Apr 26 15:22:03 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Sun, 27 Apr 2014 00:22:03 +0200
Subject: [gdal-dev] HDF4 python add band
Message-ID: <CAK4m-3xQTdbfNPA29De+Tia3az2Y1HwaYsCxCrWJ1eTa6+Q3Eg@mail.gmail.com>

Hi everybody,

I'm working with HDF4Image and Python bindings, I would like to add
new band after create the layer.

When I try to use AddBand function it return:

ERROR 6: "FILENAME" Dataset does not support the AddBand() method.

It should be possible to make possible to use AddBand() also for this
format? Or there some other way to insert new band in HDF4Image
format?

Thanks

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From even.rouault at mines-paris.org  Sun Apr 27 02:20:19 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 27 Apr 2014 11:20:19 +0200
Subject: [gdal-dev] HDF4 python add band
In-Reply-To: <CAK4m-3xQTdbfNPA29De+Tia3az2Y1HwaYsCxCrWJ1eTa6+Q3Eg@mail.gmail.com>
References: <CAK4m-3xQTdbfNPA29De+Tia3az2Y1HwaYsCxCrWJ1eTa6+Q3Eg@mail.gmail.com>
Message-ID: <201404271120.19509.even.rouault@mines-paris.org>

Luca,

very few drivers (and formats) support AddBand (the only ones are MEM and 
VRT), mostly because it would imply in most cases to completely rewrite the 
structure of what is already on disk.

Currently, with current code, your only option is to specify the right number 
of bands at Create() time if you create a new HDF4Image from scratch.
Or if you've an existing HDF4Image that would fit into memory, you could 
CreateCopy() it in a MEM dataset, AddBand() to the MEM dataset and fill it, and 
then CreateCopy() to a new HDF4Image.

But actually looking at the driver, I think it should be possible to implement 
AddBand() by a call to SDcreate(). At least in the case the dataset is a 
"GDAL_HDF4" one (i.e. created by GDAL initially).

Even

> Hi everybody,
> 
> I'm working with HDF4Image and Python bindings, I would like to add
> new band after create the layer.
> 
> When I try to use AddBand function it return:
> 
> ERROR 6: "FILENAME" Dataset does not support the AddBand() method.
> 
> It should be possible to make possible to use AddBand() also for this
> format? Or there some other way to insert new band in HDF4Image
> format?
> 
> Thanks

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jluis at ualg.pt  Sun Apr 27 12:50:36 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun, 27 Apr 2014 20:50:36 +0100
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
Message-ID: <535D5F8C.9070604@ualg.pt>

Hi,

This type of command used to work before, but it now errors  (fresh Win7 
64 GDAL)

gdalinfo /vsicurl/ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/grd/w020n40.nc

ERROR 4: 
`/vsicurl/ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/grd/w020n40.nc' 
not recognised as a supported file format.
gdalinfo failed - unable to open 
'/vsicurl/ftp://topex.ucsd.edu/pub/srtm30_plus/srtm30/grd/w020n40.nc'.


and if I try with a closer site it still errors but prints quite some 
more info


gdalinfo /vsicurl/http://w3.ualg.pt/~jluis/ftp/srtm30/w020n40.nc
HDF5-DIAG: Error detected in HDF5 (1.8.12) thread 0:
   #000: C:\programs\compa_libs\hdf5-1.8.12\src\H5F.c line 1585 in 
H5Fopen(): unable to open file
     major: File accessibilty
     minor: Unable to open file
   #001: C:\programs\compa_libs\hdf5-1.8.12\src\H5F.c line 1274 in 
H5F_open(): unable to open file: time = Sun Apr 27 20:45:25 2014
, name = '/vsicurl/http://w3.ualg.pt/~jluis/ftp/srtm30/w020n40.nc', 
tent_flags = 0
     major: File accessibilty
     minor: Unable to open file
   #002: C:\programs\compa_libs\hdf5-1.8.12\src\H5FD.c line 987 in 
H5FD_open(): open failed
     major: Virtual File Layer
     minor: Unable to initialize object
   #003: C:\programs\compa_libs\hdf5-1.8.12\src\H5FDsec2.c line 343 in 
H5FD_sec2_open(): unable to open file: name = 
'/vsicurl/http://w3.ualg.pt/~jluis/ftp/srtm30/w020n40.nc', errno = 22, 
error message = 'Invalid argument', flags = 0, o_flags = 0
     major: File accessibilty
     minor: Unable to open file
ERROR 4: `/vsicurl/http://w3.ualg.pt/~jluis/ftp/srtm30/w020n40.nc' not 
recognised as a supported file format.

gdalinfo failed - unable to open 
'/vsicurl/http://w3.ualg.pt/~jluis/ftp/srtm30/w020n40.nc'.


From even.rouault at mines-paris.org  Sun Apr 27 13:25:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 27 Apr 2014 22:25:25 +0200
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
In-Reply-To: <535D5F8C.9070604@ualg.pt>
References: <535D5F8C.9070604@ualg.pt>
Message-ID: <201404272225.25259.even.rouault@mines-paris.org>

Le dimanche 27 avril 2014 21:50:36, Joaquim Luis a ?crit :
> Hi,
> 
> This type of command used to work before, but it now errors  (fresh Win7
> 64 GDAL)

Joaquim,

I doubt it has ever worked with netCDF. The netCDF driver doesn't support the 
VSI Virtual file system API, since the I/O is done by the netCDF library 
itself.

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jluis at ualg.pt  Sun Apr 27 14:03:34 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Sun, 27 Apr 2014 22:03:34 +0100
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
In-Reply-To: <201404272225.25259.even.rouault@mines-paris.org>
References: <535D5F8C.9070604@ualg.pt>
	<201404272225.25259.even.rouault@mines-paris.org>
Message-ID: <535D70A6.3050708@ualg.pt>

On 27-04-2014 21:25, Even Rouault wrote:
> Le dimanche 27 avril 2014 21:50:36, Joaquim Luis a ?crit :
>> Hi,
>>
>> This type of command used to work before, but it now errors  (fresh Win7
>> 64 GDAL)
> Joaquim,
>
> I doubt it has ever worked with netCDF. The netCDF driver doesn't support the
> VSI Virtual file system API, since the I/O is done by the netCDF library
> itself.
hmmmmm, I would be willing to swear ... but better not

Thanks




From etourigny.dev at gmail.com  Sun Apr 27 18:59:49 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sun, 27 Apr 2014 22:59:49 -0300
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
In-Reply-To: <535D70A6.3050708@ualg.pt>
References: <535D5F8C.9070604@ualg.pt>
	<201404272225.25259.even.rouault@mines-paris.org>
	<535D70A6.3050708@ualg.pt>
Message-ID: <CA+TxYvNhQXmTX1y=S378Lp57uihrRp_xzWeKcjQgSbCRYFS6vw@mail.gmail.com>

Even is right - it never worked with the netcdf driver.

But - it works if you use the vsipreload mechanism

e.g. http://lists.osgeo.org/pipermail/gdal-dev/2013-May/036359.html


On Sun, Apr 27, 2014 at 6:03 PM, Joaquim Luis <jluis at ualg.pt> wrote:

> On 27-04-2014 21:25, Even Rouault wrote:
>
>> Le dimanche 27 avril 2014 21:50:36, Joaquim Luis a ?crit :
>>
>>> Hi,
>>>
>>> This type of command used to work before, but it now errors  (fresh Win7
>>> 64 GDAL)
>>>
>> Joaquim,
>>
>> I doubt it has ever worked with netCDF. The netCDF driver doesn't support
>> the
>> VSI Virtual file system API, since the I/O is done by the netCDF library
>> itself.
>>
> hmmmmm, I would be willing to swear ... but better not
>
> Thanks
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140427/5746f523/attachment.html>

From lucadeluge at gmail.com  Sun Apr 27 22:58:44 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Mon, 28 Apr 2014 07:58:44 +0200
Subject: [gdal-dev] HDF4 python add band
In-Reply-To: <201404271120.19509.even.rouault@mines-paris.org>
References: <CAK4m-3xQTdbfNPA29De+Tia3az2Y1HwaYsCxCrWJ1eTa6+Q3Eg@mail.gmail.com>
	<201404271120.19509.even.rouault@mines-paris.org>
Message-ID: <CAK4m-3xOkoXD4y73Yo0+SOM_9depSNYnhLv5r_HOj8QUyKfWaA@mail.gmail.com>

On 27 April 2014 11:20, Even Rouault <even.rouault at mines-paris.org> wrote:
> Luca,
>

Hi Even,

> very few drivers (and formats) support AddBand (the only ones are MEM and
> VRT), mostly because it would imply in most cases to completely rewrite the
> structure of what is already on disk.
>

ok,

> Currently, with current code, your only option is to specify the right number
> of bands at Create() time if you create a new HDF4Image from scratch.

Yes, my problem is that the different bands have different datatype
and I don't think it is possible to set different datatype in
Create(). Am I right?

> Or if you've an existing HDF4Image that would fit into memory, you could
> CreateCopy() it in a MEM dataset, AddBand() to the MEM dataset and fill it, and
> then CreateCopy() to a new HDF4Image.
>

Ok, so I could create a MEM dataset and fill it and at the end of my
process CreateCopy() to a new HDF4Image. (I'm merging several HDF in
one)

> But actually looking at the driver, I think it should be possible to implement
> AddBand() by a call to SDcreate(). At least in the case the dataset is a
> "GDAL_HDF4" one (i.e. created by GDAL initially).
>

Ok, should I open a ticket for this?

> Even
>

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From etourigny.dev at gmail.com  Sun Apr 27 23:40:49 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 28 Apr 2014 03:40:49 -0300
Subject: [gdal-dev] HDF4 python add band
In-Reply-To: <CAK4m-3xOkoXD4y73Yo0+SOM_9depSNYnhLv5r_HOj8QUyKfWaA@mail.gmail.com>
References: <CAK4m-3xQTdbfNPA29De+Tia3az2Y1HwaYsCxCrWJ1eTa6+Q3Eg@mail.gmail.com>
	<201404271120.19509.even.rouault@mines-paris.org>
	<CAK4m-3xOkoXD4y73Yo0+SOM_9depSNYnhLv5r_HOj8QUyKfWaA@mail.gmail.com>
Message-ID: <CA+TxYvOMk69X9a9_azsOATN+ms0j2qsrOUa-6d1ptQ+VO5jTsQ@mail.gmail.com>

It might be easier to use dedicated software for this. No the same but
related, there are quite a few libraries out there for joining and editing
netcdf files, there is probably the same for hdf files.

cheers
Etienne


On Mon, Apr 28, 2014 at 2:58 AM, Luca Delucchi <lucadeluge at gmail.com> wrote:

> On 27 April 2014 11:20, Even Rouault <even.rouault at mines-paris.org> wrote:
> > Luca,
> >
>
> Hi Even,
>
> > very few drivers (and formats) support AddBand (the only ones are MEM and
> > VRT), mostly because it would imply in most cases to completely rewrite
> the
> > structure of what is already on disk.
> >
>
> ok,
>
> > Currently, with current code, your only option is to specify the right
> number
> > of bands at Create() time if you create a new HDF4Image from scratch.
>
> Yes, my problem is that the different bands have different datatype
> and I don't think it is possible to set different datatype in
> Create(). Am I right?
>
> > Or if you've an existing HDF4Image that would fit into memory, you could
> > CreateCopy() it in a MEM dataset, AddBand() to the MEM dataset and fill
> it, and
> > then CreateCopy() to a new HDF4Image.
> >
>
> Ok, so I could create a MEM dataset and fill it and at the end of my
> process CreateCopy() to a new HDF4Image. (I'm merging several HDF in
> one)
>
> > But actually looking at the driver, I think it should be possible to
> implement
> > AddBand() by a call to SDcreate(). At least in the case the dataset is a
> > "GDAL_HDF4" one (i.e. created by GDAL initially).
> >
>
> Ok, should I open a ticket for this?
>
> > Even
> >
>
> --
> ciao
> Luca
>
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140428/886b7059/attachment.html>

From even.rouault at mines-paris.org  Mon Apr 28 01:19:11 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Apr 2014 10:19:11 +0200
Subject: [gdal-dev] HDF4 python add band
In-Reply-To: <CAK4m-3xOkoXD4y73Yo0+SOM_9depSNYnhLv5r_HOj8QUyKfWaA@mail.gmail.com>
References: <CAK4m-3xQTdbfNPA29De+Tia3az2Y1HwaYsCxCrWJ1eTa6+Q3Eg@mail.gmail.com>
	<201404271120.19509.even.rouault@mines-paris.org>
	<CAK4m-3xOkoXD4y73Yo0+SOM_9depSNYnhLv5r_HOj8QUyKfWaA@mail.gmail.com>
Message-ID: <1398673151.535e0eff43c89@imp.free.fr>

Luca,

>
> Ok, so I could create a MEM dataset and fill it and at the end of my
> process CreateCopy() to a new HDF4Image. (I'm merging several HDF in
> one)

Hum, no. There's actually no specialized implementation of CreateCopy() in the
HDF4Image driver, so the generic CreateCopy() implementation will use the
HDF4Image Create() implementation (which accept a single data type) and then
copy all imagery blocks.

>
> > But actually looking at the driver, I think it should be possible to
> implement
> > AddBand() by a call to SDcreate(). At least in the case the dataset is a
> > "GDAL_HDF4" one (i.e. created by GDAL initially).
> >
>
> Ok, should I open a ticket for this?

Tickets with patches are even better ;-)

Even


From jluis at ualg.pt  Mon Apr 28 06:34:02 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 28 Apr 2014 14:34:02 +0100
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
In-Reply-To: <CA+TxYvNhQXmTX1y=S378Lp57uihrRp_xzWeKcjQgSbCRYFS6vw@mail.gmail.com>
References: <535D5F8C.9070604@ualg.pt>
	<201404272225.25259.even.rouault@mines-paris.org>
	<535D70A6.3050708@ualg.pt>
	<CA+TxYvNhQXmTX1y=S378Lp57uihrRp_xzWeKcjQgSbCRYFS6vw@mail.gmail.com>
Message-ID: <535E58CA.6050702@ualg.pt>

Thanks for the remainder Etienne, ... but the "Linux only" is a killing 
feature for me.

Joaquim

> Even is right - it never worked with the netcdf driver.
>
> But - it works if you use the vsipreload mechanism
>
> e.g. http://lists.osgeo.org/pipermail/gdal-dev/2013-May/036359.html
>
>
> On Sun, Apr 27, 2014 at 6:03 PM, Joaquim Luis <jluis at ualg.pt 
> <mailto:jluis at ualg.pt>> wrote:
>
>     On 27-04-2014 21:25, Even Rouault wrote:
>
>         Le dimanche 27 avril 2014 21:50:36, Joaquim Luis a ?crit :
>
>             Hi,
>
>             This type of command used to work before, but it now
>             errors  (fresh Win7
>             64 GDAL)
>
>         Joaquim,
>
>         I doubt it has ever worked with netCDF. The netCDF driver
>         doesn't support the
>         VSI Virtual file system API, since the I/O is done by the
>         netCDF library
>         itself.
>
>     hmmmmm, I would be willing to swear ... but better not
>
>     Thanks
>
>
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140428/7d55d92e/attachment-0001.html>

From mario at geosar.ch  Mon Apr 28 07:47:49 2014
From: mario at geosar.ch (Mario Jurcevic)
Date: Mon, 28 Apr 2014 16:47:49 +0200
Subject: [gdal-dev] postgis to esri shape slow
Message-ID: <535E6A15.9070206@geosar.ch>

Hi,
I try to export postgis tables ( 200 ) to shape; It seems ogr2ogr is 
much more slow than "pgsql2shp" from postgis.

ogr2ogr: about 15 minutes
pgsql2shp: about 2 minutes

Any known reason for that?

Thanks for any suggestion.

-- 
Mario Jurcevic

From htan at hsr.ch  Mon Apr 28 07:51:04 2014
From: htan at hsr.ch (Tan Hao Feng)
Date: Mon, 28 Apr 2014 14:51:04 +0000
Subject: [gdal-dev] Boundary issues
Message-ID: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE96F6@SID00202.hsr.ch>

Dear GDAL developers,

I'm trying to display the boundary out from QGIS from the following steps.

Add Vector Layer. Select Protocol and insert the URL with Type as GeoJSON and select Open.

The URL is http://tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang=en&article=Singapore which has both type "Points" and "Polygon".

Is there any way to read the Polygon file only?

Thanks!

Hao Feng.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140428/34ae416a/attachment.html>

From henry.wasker at gmail.com  Mon Apr 28 08:33:04 2014
From: henry.wasker at gmail.com (henry wasker)
Date: Mon, 28 Apr 2014 17:33:04 +0200
Subject: [gdal-dev] Undefined reference with GDAL and netCDF support
Message-ID: <CABpNBUchzDsfNNXA9L3CR5+rPX-j3OP9m_Ms=D8RiEWG6qarcQ@mail.gmail.com>

Hello,

I try to use a simple test program which must use GDAL and netcdf support.
This test is for constraints and specifications. Here's this code (main.cpp)

#include "gdal_priv.h"
#include "netcdfdataset.h"

using namespace std;

int main() {

   netCDFDataset child;

}


For this, I have built GDAL (1.9.2) and netcdf (netcdf-c-4.3.2).

I have made 2 choices, firstly I built GDAL with the following option for
./configure :

./configure --prefix=/usr/local/gdal_without_ncdf/ --with-netcdf=no

After copying *netcdfdataset.h* and *netcdfdataset.cpp* in the current
directory ( from *~/gdal-1.9.2/frmts/netcdf/netcdfdataset.h* .) and once
*libgdal.so* and *libnetcdf.so*  are built, I compile *the above
main.cpp*with the following Makefile :

# Makefile for test_gdal

CPP = g++
DIR_GDAL = /usr/local/gdal_without_netcdf
DIR_NETCDF = /usr/local/netcdf-gcc
INCLUDES = -I. -I$(DIR_GDAL)/include
LDFLAGS = -L$(DIR_GDAL)/lib -lgdal -L$(DIR_NETCDF)/lib -lnetcdf
RM = rm -f

all: test_gdal

test_gdal: main.o netcdfdataset.o
    $(CPP) -o $@ $^ $(LDFLAGS)

%.o:%.cpp
    $(CPP) -o $@ -c $< $(INCLUDES)

clean:
    $(RM) test_gdal *.o

Everything compiles fine for this case.

But now, I tried another option, installing GDAL with a standard way :

./configure --prefix=/usr/local/gdal_standard_install/

I have noticed that "netcdf" is set to "yes" after this ./configure

So, I copied only netcdfdataset.h (without netcdfdata.cpp) in the current
directory for the "#include" of main.cpp and I compile with the following
script :

#!/bin/bash

GDAL_HOME=/usr/local/gdal_standard_install

g++ -I$GDAL_HOME/include -I. -c main.cpp
g++ -L$GDAL_HOME/lib -lgdal main.o -o test_gdal

Unfortunately, this compilation works fine only on *Debian/wheezy*. On *RedHat
6*, I have the following error :

main.cpp:(.text+0x73): undefined reference to
`netCDFDataset::~netCDFDataset()'
main.cpp:(.text+0x8c): undefined reference to
`netCDFDataset::~netCDFDataset()'

I don't understand why I have this error ; However, on *RedHat 6*, *the
symbol netCDFDataset* appears well with :

$ nm -C /usr/local/gdal_standard_install/lib/libgdal.so | grep -i
netcdfdataset

...
00000000003fac70 T netCDFDataset::netCDFDataset()
00000000003fac70 T netCDFDataset::netCDFDataset()
0000000000405d00 T netCDFDataset::~netCDFDataset()
0000000000405b90 T netCDFDataset::~netCDFDataset()
0000000000405b90 T netCDFDataset::~netCDFDataset()
...

If someone could see what's wrong

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140428/b04398bd/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Apr 28 09:33:42 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 28 Apr 2014 16:33:42 +0000 (UTC)
Subject: [gdal-dev] Boundary issues
References: <005AA85EA35D5F4F94563ADCF29F6C1D0BBE96F6@SID00202.hsr.ch>
Message-ID: <loom.20140428T182100-171@post.gmane.org>

Tan Hao Feng <htan <at> hsr.ch> writes:


> Dear GDAL developers,
> 
> I'm trying to display the boundary out from QGIS from the following steps.
> 
> Add Vector Layer.
>  Select?Protocol?and
>  insert the URL with Type as GeoJSON and select Open.
> 
> 
> 
> The URL
is?http://tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang=en&article=Singapore?which
>  has both type "Points" and "Polygon".
> 
> Is there any way to read the Polygon file only?
> 
> Thanks!
> 
> Hao Feng.

Hi,

That GeoJSON does not contain point and polygon types, it contains only one
type and that is GeometryCollection as you can test with

>ogrinfo -ro
/vsicurl_streaming/"http://tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang=en&article=Singapore"
INFO: Open of
`/vsicurl_streaming/http://tools.wmflabs.org/wiwosm/osmjson/getGeoJSON.php?lang=en&article=Singapore'
      using driver `GeoJSON' successful.
1: OGRGeoJSON (Geometry Collection)

What you can do is to write geojson into a Spatialite-db by exploding the
collections

>ogr2ogr -f SQLite -dsco spatialite=yes -explodecollections test.sqlite
/vsicurl_streaming/"http://tools.wmflabs.org/wiwosm/osmjson/getGeoJ
SON.php?lang=en&article=Singapore"

Finally you can read from Spatialite only geometries which are of type
"polygon" 

>ogrinfo test.sqlite -sql "select * from ogrgeojson where
geometrytype(geometry)='POLYGON'"

Programmers for sure know some more sophisticated ways to achieve the same
result. This is an end-user solution.

-Jukka Rahkonen-







From even.rouault at mines-paris.org  Mon Apr 28 10:55:59 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Apr 2014 19:55:59 +0200
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
In-Reply-To: <535E58CA.6050702@ualg.pt>
References: <535D5F8C.9070604@ualg.pt>
	<CA+TxYvNhQXmTX1y=S378Lp57uihrRp_xzWeKcjQgSbCRYFS6vw@mail.gmail.com>
	<535E58CA.6050702@ualg.pt>
Message-ID: <201404281955.59721.even.rouault@mines-paris.org>

Le lundi 28 avril 2014 15:34:02, Joaquim Luis a ?crit :
> Thanks for the remainder Etienne, ... but the "Linux only" is a killing
> feature for me.

Well, if you really badly need it and are ready to do some development effort, 
you could still edit the HDF4 sources and basically add some #ifdef's in a 
global include file that they would all include

#define fopen VSIFOpenL
#define fclose VSIFCloseL
#define fread VSIFReadL
etc etc. you got the point.

More points for you if you can do this in a cleaner way by defining a I/O API 
in HDF4 lib that would default to the standard C API (fopen, etc...), but 
could be overriden by GDAL to plug the VSI Large File API in it, and manage to 
make it accepted by HDF4 mainteners.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Mon Apr 28 10:57:39 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Apr 2014 19:57:39 +0200
Subject: [gdal-dev] Undefined reference with GDAL and netCDF support
In-Reply-To: <CABpNBUchzDsfNNXA9L3CR5+rPX-j3OP9m_Ms=D8RiEWG6qarcQ@mail.gmail.com>
References: <CABpNBUchzDsfNNXA9L3CR5+rPX-j3OP9m_Ms=D8RiEWG6qarcQ@mail.gmail.com>
Message-ID: <201404281957.39098.even.rouault@mines-paris.org>

Le lundi 28 avril 2014 17:33:04, henry wasker a ?crit :
> Hello,
> 
> I try to use a simple test program which must use GDAL and netcdf support.
> This test is for constraints and specifications. Here's this code
> (main.cpp)
> 
> #include "gdal_priv.h"
> #include "netcdfdataset.h"
> 
> using namespace std;
> 
> int main() {
> 
>    netCDFDataset child;
> 
> }
> 

I've stopped reading here. Don't do this. Use the GDAL API. The A in GDAL is 
for Abstraction ;-) You should never ever need to use a concrete 
implementation of a dataset. Look at http://www.gdal.org/gdal_tutorial.html .

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Mon Apr 28 11:02:25 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Apr 2014 20:02:25 +0200
Subject: [gdal-dev] postgis to esri shape slow
In-Reply-To: <535E6A15.9070206@geosar.ch>
References: <535E6A15.9070206@geosar.ch>
Message-ID: <201404282002.25730.even.rouault@mines-paris.org>

Le lundi 28 avril 2014 16:47:49, Mario Jurcevic a ?crit :
> Hi,
> I try to export postgis tables ( 200 ) to shape; It seems ogr2ogr is
> much more slow than "pgsql2shp" from postgis.
> 
> ogr2ogr: about 15 minutes
> pgsql2shp: about 2 minutes
> 
> Any known reason for that?

Interesting. I don't have a particular reason coming to mind. Which GDAL, 
PostGIS and PostgreSQL versions do you use ?

Well, one idea I could have is if some of your tables have polygons or 
multipolygons with a lot of inner rings/holes. The shapefile exporter might be 
slow on this. If you've indeed that situation, perhaps you could exclude them 
from the timing to compare if that makes a difference

Could you share a dump of the tables (possibly a shorter extract that would 
still exhibit the issue) so that it can be analyzed ?

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jluis at ualg.pt  Mon Apr 28 11:40:05 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 28 Apr 2014 19:40:05 +0100
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
In-Reply-To: <201404281955.59721.even.rouault@mines-paris.org>
References: <535D5F8C.9070604@ualg.pt>
	<CA+TxYvNhQXmTX1y=S378Lp57uihrRp_xzWeKcjQgSbCRYFS6vw@mail.gmail.com>
	<535E58CA.6050702@ualg.pt>
	<201404281955.59721.even.rouault@mines-paris.org>
Message-ID: <535EA085.1020102@ualg.pt>

Even,

I don't need it badly but it would be nice to have, so I will try to see 
how far I'll be able to reach.
But do you mention the HDF4 lib? The issue happened with netCDF. Did you 
mean HDF5?

> Le lundi 28 avril 2014 15:34:02, Joaquim Luis a ?crit :
>> Thanks for the remainder Etienne, ... but the "Linux only" is a killing
>> feature for me.
> Well, if you really badly need it and are ready to do some development effort,
> you could still edit the HDF4 sources and basically add some #ifdef's in a
> global include file that they would all include
>
> #define fopen VSIFOpenL
> #define fclose VSIFCloseL
> #define fread VSIFReadL
> etc etc. you got the point.
>
> More points for you if you can do this in a cleaner way by defining a I/O API
> in HDF4 lib that would default to the standard C API (fopen, etc...), but
> could be overriden by GDAL to plug the VSI Large File API in it, and manage to
> make it accepted by HDF4 mainteners.
>
> Even
>


From even.rouault at mines-paris.org  Mon Apr 28 11:50:26 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Apr 2014 20:50:26 +0200
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
In-Reply-To: <535EA085.1020102@ualg.pt>
References: <535D5F8C.9070604@ualg.pt>
	<201404281955.59721.even.rouault@mines-paris.org>
	<535EA085.1020102@ualg.pt>
Message-ID: <201404282050.26765.even.rouault@mines-paris.org>

Le lundi 28 avril 2014 20:40:05, Joaquim Luis a ?crit :
> Even,
> 
> I don't need it badly but it would be nice to have, so I will try to see
> how far I'll be able to reach.
> But do you mention the HDF4 lib? The issue happened with netCDF. Did you
> mean HDF5?

Ah sorry I got confused with another thread that was about HDF4. But the 3 
brothers netCDF, HDF4 and HDF5 are in the same situation regarding that issue.

> 
> > Le lundi 28 avril 2014 15:34:02, Joaquim Luis a ?crit :
> >> Thanks for the remainder Etienne, ... but the "Linux only" is a killing
> >> feature for me.
> > 
> > Well, if you really badly need it and are ready to do some development
> > effort, you could still edit the HDF4 sources and basically add some
> > #ifdef's in a global include file that they would all include
> > 
> > #define fopen VSIFOpenL
> > #define fclose VSIFCloseL
> > #define fread VSIFReadL
> > etc etc. you got the point.
> > 
> > More points for you if you can do this in a cleaner way by defining a I/O
> > API in HDF4 lib that would default to the standard C API (fopen,
> > etc...), but could be overriden by GDAL to plug the VSI Large File API
> > in it, and manage to make it accepted by HDF4 mainteners.
> > 
> > Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jluis at ualg.pt  Mon Apr 28 11:58:50 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 28 Apr 2014 19:58:50 +0100
Subject: [gdal-dev] accessing netCDF files with /vsicurl fails
In-Reply-To: <201404282050.26765.even.rouault@mines-paris.org>
References: <535D5F8C.9070604@ualg.pt>
	<201404281955.59721.even.rouault@mines-paris.org>
	<535EA085.1020102@ualg.pt>
	<201404282050.26765.even.rouault@mines-paris.org>
Message-ID: <535EA4EA.1060202@ualg.pt>

On 28-04-2014 19:50, Even Rouault wrote:
> Le lundi 28 avril 2014 20:40:05, Joaquim Luis a ?crit :
>> Even,
>>
>> I don't need it badly but it would be nice to have, so I will try to see
>> how far I'll be able to reach.
>> But do you mention the HDF4 lib? The issue happened with netCDF. Did you
>> mean HDF5?
> Ah sorry I got confused with another thread that was about HDF4. But the 3
> brothers netCDF, HDF4 and HDF5 are in the same situation regarding that issue.
Right, and let's hope it will not be too much ++(C) in the way




From jan.heckman at gmail.com  Mon Apr 28 14:39:34 2014
From: jan.heckman at gmail.com (Jan Heckman)
Date: Mon, 28 Apr 2014 23:39:34 +0200
Subject: [gdal-dev] shapefile enhancements
Message-ID: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>

Hi,

I've used and maintained an offshoot shapefile library (thanks, Frank), and
added bits of functionality when needed. There are two that I think might
be of wider interest.

1) possibility to have shapefiles up to 8 GB (instead of 4 GB in ogr or 2
GB elsewhere);
2) implementing deletes.
ad 1) this requires little more than replacing fseek() by _fseeki64() on a
windows box and using the fact that size indicators are about words rather
than bytes.
The use of this feature is limited to library use; afaik gis programs (at
least arcgis) will not be able to use such an extended shapefile.
Next, portability might be an issue.
ad 2) a quick delete without closing and rewriting the .shp and /or the
.dbf file can obviously be useful. Shapefile as well as dBase III files
offer handles to do this.
Issues:
Arcgis wil not recognize .dbf with records marked for deletion (by starting
a record with an asterix instead of a space character);
the (ogr) dbase driver will equally disregard deleted records.
Result: at the end of the session using the shapefile library, the
shapefile can be handled without a major file-rewrite, but the .dbf needs
to have the deleted records removed 'physically'. Still, this can be done
relatively quickly when closing the file.
Portability might again be an issue.

So,does anyone need these features, and is it useful to start a discussion
how to implement either of these enhancements?

regards,
Jan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140428/485855d9/attachment.html>

From even.rouault at mines-paris.org  Mon Apr 28 14:48:52 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 28 Apr 2014 23:48:52 +0200
Subject: [gdal-dev] shapefile enhancements
In-Reply-To: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>
References: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>
Message-ID: <201404282348.52210.even.rouault@mines-paris.org>

Le lundi 28 avril 2014 23:39:34, Jan Heckman a ?crit :
> Hi,
> 
> I've used and maintained an offshoot shapefile library (thanks, Frank), and
> added bits of functionality when needed. There are two that I think might
> be of wider interest.
> 
> 1) possibility to have shapefiles up to 8 GB (instead of 4 GB in ogr or 2
> GB elsewhere);

I'm +/- 0 on this, since it might cause interoperabily issues. Actually I've 
added a creation option in GDAL 1.11 to avoid crossing the 2GB barrier.

> 2) implementing deletes.
> ad 1) this requires little more than replacing fseek() by _fseeki64() on a
> windows box and using the fact that size indicators are about words rather
> than bytes.
> The use of this feature is limited to library use; afaik gis programs (at
> least arcgis) will not be able to use such an extended shapefile.
> Next, portability might be an issue.
> ad 2) a quick delete without closing and rewriting the .shp and /or the
> .dbf file can obviously be useful. Shapefile as well as dBase III files
> offer handles to do this.

Not sure to understand what you call by delete here. Is it auto-compaction of 
files when deleting a record ? something like DeleteFeature() + REPACK in the 
shapefile driver ?

> Issues:
> Arcgis wil not recognize .dbf with records marked for deletion (by starting
> a record with an asterix instead of a space character);
> the (ogr) dbase driver will equally disregard deleted records.
> Result: at the end of the session using the shapefile library, the
> shapefile can be handled without a major file-rewrite, but the .dbf needs
> to have the deleted records removed 'physically'. Still, this can be done
> relatively quickly when closing the file.

Hum, shapelib already supports deleting dbf record and the ogr shapefile driver 
does honour that. So, you are saying that ArcGIS doesn't handle that properly 
?

> Portability might again be an issue.
> 
> So,does anyone need these features, and is it useful to start a discussion
> how to implement either of these enhancements?
> 
> regards,
> Jan

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Mon Apr 28 16:02:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 29 Apr 2014 01:02:43 +0200
Subject: [gdal-dev] Experimental git branch for OGR unification
Message-ID: <201404290102.43328.even.rouault@mines-paris.org>

Hi,

Just to make you aware of the existence of my experimental branch for OGR 
unification with GDAL + other bonus that will go with it :
https://github.com/rouault/gdal2/commits/unification

Still some(a lot?) of work to be done... but if some of you are curious and 
want to review, etc...

This will be ultimately submitted as a RFC. For now, there's the commit 
history... Or the all-in-one diff : 
https://github.com/rouault/gdal2/compare/unification

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From treaves at silverfieldstech.com  Mon Apr 28 17:30:11 2014
From: treaves at silverfieldstech.com (Reaves, Timothy)
Date: Mon, 28 Apr 2014 20:30:11 -0400
Subject: [gdal-dev] gdal_contour failes after creating 4gig+ file
Message-ID: <CALF0saQ_wd=TkSN64vKu+=r8VV7byov3jX0e1vFVa+JjfPw-9A@mail.gmail.com>

I am attempting to import contour information into a PostGIS-enabled
database. I am trying to follow the information on this site:
http://wiki.openstreetmap.org/wiki/Contours#Importing_the_SRTM3_data_.28deprecated.29
and
am using the script. The page states that srtm_generate_hdr.sh is no longer
needed, but, I can find no instructions that do not use this script.

I am importing data from ds.cr.usgs.gov/srtm/version2_1/SRTM1/Region_01 .
The first couple of files in that directory import. When the file
N38W114.hgt.zip is processed, however, one of the intermediate files
created by gdal_contour starts growing in size, and when it reaches just
over four gig, the max file size, it fails. This particular data file isn't
the largest that is imported. The error is:
ERROR 1: Failed to write shape object. File size cannot reach 4294967228 +
808.

So I'm not sure how to troubleshoot were exactly the issue is; I suppose
the issue could be with the data file, but, as several other files imported
fine, I think the issue may be with gdal_contour.  I've searched, and can
find reference to this error, but related to NoData not being set, and it
is in this file (NoData Value=-32768);

Any help appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140428/9db1ad26/attachment.html>

From chaitanya.ch at gmail.com  Tue Apr 29 02:07:19 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 29 Apr 2014 14:37:19 +0530
Subject: [gdal-dev] gdal_contour failes after creating 4gig+ file
In-Reply-To: <CALF0saQ_wd=TkSN64vKu+=r8VV7byov3jX0e1vFVa+JjfPw-9A@mail.gmail.com>
References: <CALF0saQ_wd=TkSN64vKu+=r8VV7byov3jX0e1vFVa+JjfPw-9A@mail.gmail.com>
Message-ID: <CAMKgpOamtMEEy1smYNM_Q9+APDn7z8NOq=+5az1J+9T-jNg2DQ@mail.gmail.com>

Timothy,

I just ran gdal_contour (from gdal-1.10.1) on
http://dds.cr.usgs.gov/srtm/version2_1/SRTM1/Region_01/N38W114.hgt.zip with
the options -i 10 and -a height. I got a shape file of ~95MB. Please check
your data file and gdal version.

BTW, you can directly save the contours into a postgis table instead of the
intermediate shapefiles by using the -f option.



On Tue, Apr 29, 2014 at 6:00 AM, Reaves, Timothy <
treaves at silverfieldstech.com> wrote:

> I am attempting to import contour information into a PostGIS-enabled
> database. I am trying to follow the information on this site:
> http://wiki.openstreetmap.org/wiki/Contours#Importing_the_SRTM3_data_.28deprecated.29 and
> am using the script. The page states that srtm_generate_hdr.sh is no longer
> needed, but, I can find no instructions that do not use this script.
>
> I am importing data from ds.cr.usgs.gov/srtm/version2_1/SRTM1/Region_01 .
> The first couple of files in that directory import. When the file
> N38W114.hgt.zip is processed, however, one of the intermediate files
> created by gdal_contour starts growing in size, and when it reaches just
> over four gig, the max file size, it fails. This particular data file isn't
> the largest that is imported. The error is:
> ERROR 1: Failed to write shape object. File size cannot reach 4294967228 +
> 808.
>
> So I'm not sure how to troubleshoot were exactly the issue is; I suppose
> the issue could be with the data file, but, as several other files imported
> fine, I think the issue may be with gdal_contour.  I've searched, and can
> find reference to this error, but related to NoData not being set, and it
> is in this file (NoData Value=-32768);
>
> Any help appreciated.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140429/3e7e5a4c/attachment.html>

From jan.heckman at gmail.com  Tue Apr 29 10:46:46 2014
From: jan.heckman at gmail.com (Jan Heckman)
Date: Tue, 29 Apr 2014 19:46:46 +0200
Subject: [gdal-dev] shapefile enhancements
In-Reply-To: <201404282348.52210.even.rouault@mines-paris.org>
References: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>
	<201404282348.52210.even.rouault@mines-paris.org>
Message-ID: <CAKMUAtBJG8gJmVy6r4=8G6R9exQ0m9t5BhmaYfDRYP_wiM9uOA@mail.gmail.com>

Hi,
It appears I have to do some homework on ogr's shapefile functions as it
stands now.

8GB: If interoperability is more of a priority than capacity, that's a
valid consideration. I've not really needed anything > 4GB so far.

Delete:
By delete I mean leaving the information in the file but (shapefile) taking
it out of the index chain (.shx), and .dbf, marking the record with an
asterisk in its firs byte.
As far as arcgis, I did a delete in this way and tried to load it. When I
do not reduce the record count in the dbf header, arcgis will not load it;
when I do reduce the record count in the header, arcgis will load the
shapefile but the attributes will not match the shapes. As a cross-check,
you can open the .dbf in open office or excel: the delete will be
recognized.

My guess is that arcgis maps the shaperecords to the physical records of
the dbf only.

To allow use of the shapefile in arcgis,  I have to compact the .dbf. The
shape will then be handled correctly.

A recipe to try this out:
create a new empty point shapefile, load it in arcgis. Using arccatalog to
create the shapefile, it will have a single ID integer attribute. That's
the starting point.
Create 3 points and give them ID's 1 - 3.
Now to 'delete' the second record using a diskeditor:
Copy the shapefile. Open the .shx. The .shx has a header and records
consisting of offset-length pairs. A pair takes 8 bytes. Change the 2nd
offset to be identical to the last (00000040 -> 0000004E). Diminish the
filelength indicator in the header (offset 0x18) by 4 (0000003E to
0000003A). Copy the file, except the last 8 bytes to the new .shx file.
DBF: open in editor, change the first byte of the second record (at offset
0x48) to an asterisk. The recordcount in the header is at offset 4 (little
endian).

Load in arcgis, will fail.
Change  the dbf-recordcount to 2, load and open the attribute table. The
file will load. The ID's shown will be 1 and 2. The latter should have been
3.
Conclusion: shape deletes are possible, .dbf not. Compacting the .dbf will,
of course, repair things.

Best regards,
Jan



On Mon, Apr 28, 2014 at 11:48 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le lundi 28 avril 2014 23:39:34, Jan Heckman a ?crit :
> > Hi,
> >
> > I've used and maintained an offshoot shapefile library (thanks, Frank),
> and
> > added bits of functionality when needed. There are two that I think might
> > be of wider interest.
> >
> > 1) possibility to have shapefiles up to 8 GB (instead of 4 GB in ogr or 2
> > GB elsewhere);
>
> I'm +/- 0 on this, since it might cause interoperabily issues. Actually
> I've
> added a creation option in GDAL 1.11 to avoid crossing the 2GB barrier.
>
> > 2) implementing deletes.
> > ad 1) this requires little more than replacing fseek() by _fseeki64() on
> a
> > windows box and using the fact that size indicators are about words
> rather
> > than bytes.
> > The use of this feature is limited to library use; afaik gis programs (at
> > least arcgis) will not be able to use such an extended shapefile.
> > Next, portability might be an issue.
> > ad 2) a quick delete without closing and rewriting the .shp and /or the
> > .dbf file can obviously be useful. Shapefile as well as dBase III files
> > offer handles to do this.
>
> Not sure to understand what you call by delete here. Is it auto-compaction
> of
> files when deleting a record ? something like DeleteFeature() + REPACK in
> the
> shapefile driver ?
>
> > Issues:
> > Arcgis wil not recognize .dbf with records marked for deletion (by
> starting
> > a record with an asterix instead of a space character);
> > the (ogr) dbase driver will equally disregard deleted records.
> > Result: at the end of the session using the shapefile library, the
> > shapefile can be handled without a major file-rewrite, but the .dbf needs
> > to have the deleted records removed 'physically'. Still, this can be done
> > relatively quickly when closing the file.
>
> Hum, shapelib already supports deleting dbf record and the ogr shapefile
> driver
> does honour that. So, you are saying that ArcGIS doesn't handle that
> properly
> ?
>
> > Portability might again be an issue.
> >
> > So,does anyone need these features, and is it useful to start a
> discussion
> > how to implement either of these enhancements?
> >
> > regards,
> > Jan
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140429/a3672db4/attachment-0001.html>

From burton449geo at gmail.com  Tue Apr 29 12:32:11 2014
From: burton449geo at gmail.com (Max Demars)
Date: Tue, 29 Apr 2014 15:32:11 -0400
Subject: [gdal-dev] MapInfo File vs ESRI Shapefile attribute value encoding
Message-ID: <CAKtuc=__CPmANo8eks7xU3eziaJ7XnmoBXJBPxJ3T3BL+gi9hg@mail.gmail.com>

Hi,

I am a bit confused right now about a possible difference in encoding
attribute value that I have noticed between those two drivers (MapInfo File
vs ESRI Shapefile).

I have a script that allow user to export some features from database to
shapefile or MapInfo TAB format. However, in MapInfo TAB the attributes are
not encoded correctly in utf-8, contrary than shapefiles.

The same data and the same code is used, and I am starting to think that
the difference is coming from inside the OGR drivers.

OGRFeature.SetField("FiedlName", value.encode('utf-8')) #value is unicode

Anybody have information about this issue? I dont really know where to look.

-Max Demars

-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140429/e393886b/attachment.html>

From manisandro at gmail.com  Tue Apr 29 15:33:28 2014
From: manisandro at gmail.com (Sandro Mani)
Date: Wed, 30 Apr 2014 00:33:28 +0200
Subject: [gdal-dev] shapefile enhancements
In-Reply-To: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>
References: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>
Message-ID: <536028B8.6030805@gmail.com>

Hello Jan,

On a related note: for the Fedora package which I maintain, I've also 
added a number of out of tree patches: mainly backporting the 
improvements from the version bundled in gdal as well as replacing the 
buildsystem with an autotools one, to allow easy mingw 
cross-compilation. My patches can be found here: 
https://github.com/manisandro/shapelib, the changes are in the autotools 
and gdal branches. I wrote to Frank a while back enquiring as to what 
his intentions with shapelib were, unfortunately I didn't get any reply 
to date. I'd definitely be interested in seeing shapelib continuing its 
life outside of gdal (since for some projects, pulling in the entire 
gdal is excessive), so if you are also interested in continuing the 
development of shapelib (and maybe have better luck than I on getting 
Franks opinions, or at least blessing on releasing a new shapelib), I'd 
be happy to help.

Best,
Sandro



From jukka.rahkonen at mmmtike.fi  Tue Apr 29 22:03:27 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 30 Apr 2014 05:03:27 +0000 (UTC)
Subject: [gdal-dev] shapefile enhancements
References: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>
	<201404282348.52210.even.rouault@mines-paris.org>
	<CAKMUAtBJG8gJmVy6r4=8G6R9exQ0m9t5BhmaYfDRYP_wiM9uOA@mail.gmail.com>
Message-ID: <loom.20140430T065139-625@post.gmane.org>

Jan Heckman <jan.heckman <at> gmail.com> writes:

> 
> 
> Hi,It appears I have to do some homework on ogr's shapefile functions as
it stands now.
> 
> 8GB: If interoperability is more of a priority than capacity, that's a
valid consideration. I've not really needed anything > 4GB so far.
> 
> Delete:
> By delete I mean leaving the information in the file but (shapefile)
taking it out of the index chain (.shx), and .dbf, marking the record with
an asterisk in its firs byte.
> 
> As far as arcgis, I did a delete in this way and tried to load it. When I
do not reduce the record count in the dbf header, arcgis will not load it;
when I do reduce the record count in the header, arcgis will load the
shapefile but the attributes will not match the shapes. As a cross-check,
you can open the .dbf in open office or excel: the delete will be recognized.
> ?
> My guess is that arcgis maps the shaperecords to the physical records of
the dbf only.
> 
> To allow use of the shapefile in arcgis, ?I have to compact the .dbf. The
shape will then be handled correctly.
> 
> A recipe to try this out:
> create a new empty point shapefile, load it in arcgis. Using arccatalog to
create the shapefile, it will have a single ID integer attribute. That's the
starting point.
> Create 3 points and give them ID's 1 - 3.
> Now to 'delete' the second record using a diskeditor:
> Copy the shapefile. Open the .shx. The .shx has a header and records
consisting of offset-length pairs. A pair takes 8 bytes. Change the 2nd
offset to be identical to the last (00000040 -> 0000004E). Diminish the
filelength indicator in the header (offset 0x18) by 4 (0000003E to
0000003A). Copy the file, except the last 8 bytes to the new .shx file.
> DBF: open in editor, change the first byte of the second record (at offset
0x48) to an asterisk. The recordcount in the header is at offset 4 (little
endian).
> 
> Load in arcgis, will fail.
> Change ?the dbf-recordcount to 2, load and open the attribute table. The
file will load. The ID's shown will be 1 and 2. The latter should have been 3.
> Conclusion: shape deletes are possible, .dbf not. Compacting the .dbf
will, of course, repair things.


Hi,

Fast delete feels like a nice trick which may have internal use during an
editing session. However, I consider that delivering such shapefiles for
customers would be dangerous. For example, there are programs like OpenJUMP
which do not seem to care about the .shx part at all when opening a shapefile.

-Jukka Rahkonen-

> Best regards,
> Jan



From mario at geosar.ch  Wed Apr 30 05:48:26 2014
From: mario at geosar.ch (Mario Jurcevic)
Date: Wed, 30 Apr 2014 14:48:26 +0200
Subject: [gdal-dev] postgis to esri shape slow
In-Reply-To: <201404282002.25730.even.rouault@mines-paris.org>
References: <535E6A15.9070206@geosar.ch>
	<201404282002.25730.even.rouault@mines-paris.org>
Message-ID: <5360F11A.6030303@geosar.ch>



On 04/28/2014 08:02 PM, Even Rouault wrote:
> Le lundi 28 avril 2014 16:47:49, Mario Jurcevic a ?crit :
>> Hi,
>> I try to export postgis tables ( 200 ) to shape; It seems ogr2ogr is
>> much more slow than "pgsql2shp" from postgis.
>>
>> ogr2ogr: about 15 minutes
>> pgsql2shp: about 2 minutes
>>
>> Any known reason for that?
>
> Interesting. I don't have a particular reason coming to mind. Which GDAL,
> PostGIS and PostgreSQL versions do you use ?
>
> Well, one idea I could have is if some of your tables have polygons or
> multipolygons with a lot of inner rings/holes. The shapefile exporter might be
> slow on this. If you've indeed that situation, perhaps you could exclude them
> from the timing to compare if that makes a difference
>
> Could you share a dump of the tables (possibly a shorter extract that would
> still exhibit the issue) so that it can be analyzed ?
>
> Even
>

Postgresql 9.1.3
Postgis 2.0.4
gdal 1.9.2

Tables have MULTIPOLYGONS and MULTILINESTRING.
The export is done from Java by invoking for each table the ogr2ogr 
command. Same for "pgsqltoshape".

From jukka.rahkonen at mmmtike.fi  Wed Apr 30 05:59:18 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 30 Apr 2014 12:59:18 +0000 (UTC)
Subject: [gdal-dev] postgis to esri shape slow
References: <535E6A15.9070206@geosar.ch>
	<201404282002.25730.even.rouault@mines-paris.org>
	<5360F11A.6030303@geosar.ch>
Message-ID: <loom.20140430T145041-340@post.gmane.org>

Mario Jurcevic <mario <at> geosar.ch> writes:


> Postgresql 9.1.3
> Postgis 2.0.4
> gdal 1.9.2
> 
> Tables have MULTIPOLYGONS and MULTILINESTRING.
> The export is done from Java by invoking for each table the ogr2ogr 
> command. Same for "pgsqltoshape".

Could you try also by running the same ogr2ogr command from command line,
possibly with --debug ON ? And tell us some summary info about the layer
captured with ogrinfo -so.


-Jukka Rahkonen-





From even.rouault at mines-paris.org  Wed Apr 30 06:31:20 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 30 Apr 2014 15:31:20 +0200
Subject: [gdal-dev] MapInfo File vs ESRI Shapefile attribute value
	encoding
In-Reply-To: <CAKtuc=__CPmANo8eks7xU3eziaJ7XnmoBXJBPxJ3T3BL+gi9hg@mail.gmail.com>
References: <CAKtuc=__CPmANo8eks7xU3eziaJ7XnmoBXJBPxJ3T3BL+gi9hg@mail.gmail.com>
Message-ID: <201404301531.21064.even.rouault@mines-paris.org>

Le mardi 29 avril 2014 21:32:11, Max Demars a ?crit :
> Hi,
> 
> I am a bit confused right now about a possible difference in encoding
> attribute value that I have noticed between those two drivers (MapInfo File
> vs ESRI Shapefile).
> 
> I have a script that allow user to export some features from database to
> shapefile or MapInfo TAB format. However, in MapInfo TAB the attributes are
> not encoded correctly in utf-8, contrary than shapefiles.
> 
> The same data and the same code is used, and I am starting to think that
> the difference is coming from inside the OGR drivers.
> 
> OGRFeature.SetField("FiedlName", value.encode('utf-8')) #value is unicode
> 
> Anybody have information about this issue? I dont really know where to
> look.

Works for me :

$ cat foo.csv
id,text,WKT
1,?ven,"POINT(0 0)"

$ file foo.csv
foo.csv: UTF-8 Unicode text

$ ogr2ogr -f "mapinfo file" foo.tab foo.csv

$ ogrinfo foo.tab -al
Had to open data source read-only.
INFO: Open of `foo.tab'
      using driver `MapInfo File' successful.

Layer name: foo
Geometry: Point
Feature Count: 1
Extent: (0.000000, 0.000000) - (0.000000, 0.000000)
Layer SRS WKT:
LOCAL_CS["Nonearth",
    UNIT["Meter",1.0]]
id: String (254.0)
text: String (254.0)
WKT: String (254.0)
OGRFeature(foo):1
  id (String) = 1
  text (String) = ?ven
  WKT (String) = POINT(0 0)
  Style = SYMBOL(a:0,c:#000000,s:12pt,id:"mapinfo-sym-35,ogr-sym-10")
  POINT (0 0)


> 
> -Max Demars

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From burton449geo at gmail.com  Wed Apr 30 06:40:39 2014
From: burton449geo at gmail.com (Max Demars)
Date: Wed, 30 Apr 2014 09:40:39 -0400
Subject: [gdal-dev] MapInfo File vs ESRI Shapefile attribute value
	encoding
In-Reply-To: <201404301531.21064.even.rouault@mines-paris.org>
References: <CAKtuc=__CPmANo8eks7xU3eziaJ7XnmoBXJBPxJ3T3BL+gi9hg@mail.gmail.com>
	<201404301531.21064.even.rouault@mines-paris.org>
Message-ID: <CAKtuc=8Cmc8A1ruy7h9kSH1h=HML+ja4YkRcvKEUAsArXN6Xug@mail.gmail.com>

Hi,

I am sorry about the noise. The only thing I was correct in the first post
was that I was confuse. My problem was not related to encodings, but to the
field types width and precision limitation that are different in MapInfo
software and FME and QGIS. That was what made MapInfo crashing.

Thank you Even for your reply anyway that confirms the encoding process is
correct.




On Wed, Apr 30, 2014 at 9:31 AM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mardi 29 avril 2014 21:32:11, Max Demars a ?crit :
> > Hi,
> >
> > I am a bit confused right now about a possible difference in encoding
> > attribute value that I have noticed between those two drivers (MapInfo
> File
> > vs ESRI Shapefile).
> >
> > I have a script that allow user to export some features from database to
> > shapefile or MapInfo TAB format. However, in MapInfo TAB the attributes
> are
> > not encoded correctly in utf-8, contrary than shapefiles.
> >
> > The same data and the same code is used, and I am starting to think that
> > the difference is coming from inside the OGR drivers.
> >
> > OGRFeature.SetField("FiedlName", value.encode('utf-8')) #value is unicode
> >
> > Anybody have information about this issue? I dont really know where to
> > look.
>
> Works for me :
>
> $ cat foo.csv
> id,text,WKT
> 1,?ven,"POINT(0 0)"
>
> $ file foo.csv
> foo.csv: UTF-8 Unicode text
>
> $ ogr2ogr -f "mapinfo file" foo.tab foo.csv
>
> $ ogrinfo foo.tab -al
> Had to open data source read-only.
> INFO: Open of `foo.tab'
>       using driver `MapInfo File' successful.
>
> Layer name: foo
> Geometry: Point
> Feature Count: 1
> Extent: (0.000000, 0.000000) - (0.000000, 0.000000)
> Layer SRS WKT:
> LOCAL_CS["Nonearth",
>     UNIT["Meter",1.0]]
> id: String (254.0)
> text: String (254.0)
> WKT: String (254.0)
> OGRFeature(foo):1
>   id (String) = 1
>   text (String) = ?ven
>   WKT (String) = POINT(0 0)
>   Style = SYMBOL(a:0,c:#000000,s:12pt,id:"mapinfo-sym-35,ogr-sym-10")
>   POINT (0 0)
>
>
> >
> > -Max Demars
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140430/96ec69ec/attachment.html>

From shuai at illinois.edu  Wed Apr 30 06:55:57 2014
From: shuai at illinois.edu (Zhang, Shuai)
Date: Wed, 30 Apr 2014 13:55:57 +0000
Subject: [gdal-dev] New OGR Driver for MongoDB
Message-ID: <2DAEBB32799F494EBE504E1247CC5E8220E59BF4@CITESMBX6.ad.uillinois.edu>

Hi there,

I wrote a ogr driver for mongodb and wish to contribute to the community.
but I'm not sure where to start and how to do it.
Is there anyone who can give me a hand or some guidance about it?
it will be terrific if you know geojson driver or couchdb driver well,
so that we may have discussions on the code level.

Thanks,
Shuai
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140430/f324836a/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Apr 30 07:30:35 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 30 Apr 2014 16:30:35 +0200
Subject: [gdal-dev] shapefile enhancements
In-Reply-To: <CAKMUAtBJG8gJmVy6r4=8G6R9exQ0m9t5BhmaYfDRYP_wiM9uOA@mail.gmail.com>
References: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>
	<201404282348.52210.even.rouault@mines-paris.org>
	<CAKMUAtBJG8gJmVy6r4=8G6R9exQ0m9t5BhmaYfDRYP_wiM9uOA@mail.gmail.com>
Message-ID: <201404301630.36069.even.rouault@mines-paris.org>

Le mardi 29 avril 2014 19:46:46, Jan Heckman a ?crit :
> Hi,
> It appears I have to do some homework on ogr's shapefile functions as it
> stands now.
> 
> 8GB: If interoperability is more of a priority than capacity, that's a
> valid consideration. I've not really needed anything > 4GB so far.

I'm not sure there's a point in "extending" shapefile capabilities whereas 
there are other formats, more capable, that don't have a 32bit offset 
limitation.

> 
> Delete:
> By delete I mean leaving the information in the file but (shapefile) taking
> it out of the index chain (.shx), and .dbf, marking the record with an
> asterisk in its firs byte.
> As far as arcgis, I did a delete in this way and tried to load it. When I
> do not reduce the record count in the dbf header, arcgis will not load it;
> when I do reduce the record count in the header, arcgis will load the
> shapefile but the attributes will not match the shapes. As a cross-check,
> you can open the .dbf in open office or excel: the delete will be
> recognized.
> 
> My guess is that arcgis maps the shaperecords to the physical records of
> the dbf only.
> 
> To allow use of the shapefile in arcgis,  I have to compact the .dbf. The
> shape will then be handled correctly.
> 
> A recipe to try this out:
> create a new empty point shapefile, load it in arcgis. Using arccatalog to
> create the shapefile, it will have a single ID integer attribute. That's
> the starting point.
> Create 3 points and give them ID's 1 - 3.
> Now to 'delete' the second record using a diskeditor:
> Copy the shapefile. Open the .shx. The .shx has a header and records
> consisting of offset-length pairs. A pair takes 8 bytes. Change the 2nd
> offset to be identical to the last (00000040 -> 0000004E). Diminish the
> filelength indicator in the header (offset 0x18) by 4 (0000003E to
> 0000003A). Copy the file, except the last 8 bytes to the new .shx file.
> DBF: open in editor, change the first byte of the second record (at offset
> 0x48) to an asterisk. The recordcount in the header is at offset 4 (little
> endian).
> 
> Load in arcgis, will fail.

Yes I'm not surprised at all and I would say that ArcGIS behaviour is sane. 
And I guess that OGR would be defeated too if you tried to open such a 
shapefile with it.
If you delete record ID 2, you just have to mark the .dbf record with '*'. For 
uniqueness purposes, feature 3 should remain feature 3. And feature 2 be a 
"ghost feature". That's whay OGR does when you use the DeleteFeature() API. I 
don't think it touches the .shx at all. It could possibly change the offset to 
be 0 as a marker for invalid, but we don't even do that.

Otherwise you have to compact both the .dbf and .shx (and possibly .shp for 
software not using .shx as Jukka mentionned) to move data.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Apr 30 08:11:35 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 30 Apr 2014 17:11:35 +0200
Subject: [gdal-dev] postgis to esri shape slow
In-Reply-To: <53610C66.3060501@geosar.ch>
References: <5360F1B6.2000109@geosar.ch>
	<201404301640.32565.even.rouault@mines-paris.org>
	<53610C66.3060501@geosar.ch>
Message-ID: <201404301711.35173.even.rouault@mines-paris.org>

Le mercredi 30 avril 2014 16:44:54, Mario Jurcevic a ?crit :
> On 04/30/2014 04:40 PM, Even Rouault wrote:
> > Le mercredi 30 avril 2014 15:54:45, Mario Jurcevic a ?crit :
> >> On 04/30/2014 03:27 PM, Even Rouault wrote:
> >>> Hum, I managed to import the dump but I'm having troubles make the
> >>> export work. Could you paste the*exact*  ogr2ogr and pgsql2shp
> >>> commands you are using ?
> >> 
> >> ogr2ogr -sql 'select
> >> "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria
> >> ") as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'\
> >> 
> >>    -f "ESRI Shapefile" out.shp PG:'host=localhost dbname=test_soft_gis
> >> 
> >> user=test_soft_gis password=passwd'
> > 
> > Works, but recent versions of GDAL will show a warning :
> > ERROR 6: Unsupported WKB type 12
> > which shows that st_curvetoline() doesn't manage to convert all
> > geometries to regular linestring.
> 
> My postgis 2.0.4 is patched for curves conversion.
> You can use 2.1 version which has the improvements.
> 
> >> pgsqltoshape:
> >> 
> >> /usr/local/pgsql/bin/pgsql2shp -f out.shp -h localhost -u test_soft_gis
> >> -P passwd test_soft_gis \
> >> 'select
> >> "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria
> >> ") as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'
> > 
> > This one does not work :
> > 
> > Initializing...
> > ERROR: Incompatible mixed geometry types in table
> > 
> > 
> > This might explain why conversion with pgsql2shp is so fast ;-)
> 
> For me works:
> 
> time /usr/local/pgsql/bin/pgsql2shp -f out.shp -h localhost -u
> test_soft_gis -P passwd test_soft_gis \
> 
>  > 'select
> 
> "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria")
> as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'
> Initializing...
> Done (postgis major version: 2).
> Output shape: Polygon
> Dumping: XXXXXXXXXXXXXXXXXXXX [1962 rows].
> WARNING: Cannot determine spatial reference (empty table or unknown
> spatial ref). No prj file will be generated.
> 
> real	0m0.098s
> user	0m0.008s
> sys	0m0.012s

ok, after upgrading my postgis to the latest dev version :

$ time ogr2ogr -sql 'select 
"soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria") as 
Geometria from test_export."Copertura_del_suolo__SuperficieCS"' out.shp 
"pg:dbname=autotest host=127.0.0.1 port=5436 user=postgres" -overwrite
Warning 6: Normalized/laundered field name: 'soft_gis_serial' to 'soft_gis_s'

real	0m0.217s
user	0m0.100s
sys	0m0.030s

$ rm out2.*; time LD_LIBRARY_PATH=/opt/PostgreSQL/9.2/lib 
/opt/PostgreSQL/9.2/bin/pgsql2shp  -f out2.shp -p 5436 -u postgres -h 127.0.01 
autotest   'select 
"soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria") as 
Geometria from test_export."Copertura_del_suolo__SuperficieCS"'
Initializing... 
Done (postgis major version: 2).
Output shape: Polygon
Dumping: XXXXXXXXXXXXXXXXXXXX [1962 rows].
WARNING: Cannot determine spatial reference (empty table or unknown spatial 
ref). No prj file will be generated.

real	0m0.188s
user	0m0.060s
sys	0m0.020s

Not that much a big difference... Perhaps you should try to isolate which layer 
conversion if particuarly slower with ogr2ogr

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From mario at geosar.ch  Wed Apr 30 08:19:04 2014
From: mario at geosar.ch (Mario Jurcevic)
Date: Wed, 30 Apr 2014 17:19:04 +0200
Subject: [gdal-dev] postgis to esri shape slow
In-Reply-To: <201404301711.35173.even.rouault@mines-paris.org>
References: <5360F1B6.2000109@geosar.ch>
	<201404301640.32565.even.rouault@mines-paris.org>
	<53610C66.3060501@geosar.ch>
	<201404301711.35173.even.rouault@mines-paris.org>
Message-ID: <53611468.1040508@geosar.ch>



On 04/30/2014 05:11 PM, Even Rouault wrote:
> Not that much a big difference... Perhaps you should try to isolate which layer
> conversion if particuarly slower with ogr2ogr

I get big difference:
  time ogr2ogr -sql 'select 
"soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria") 
as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'\
 >  -f "ESRI Shapefile" out.shp PG:'host=localhost dbname=test_soft_gis 
user=test_soft_gis password=passwd'
Warning 6: Normalized/laundered field name: 'soft_gis_serial' to 
'soft_gis_s'

real	0m2.359s
user	0m0.040s
sys	0m0.004s

With debug on there there is many notice of ogr analyzing geom tables.
Maybe that is, your dump miss has not the whole db.






From even.rouault at mines-paris.org  Wed Apr 30 08:32:53 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 30 Apr 2014 17:32:53 +0200
Subject: [gdal-dev] postgis to esri shape slow
In-Reply-To: <53611468.1040508@geosar.ch>
References: <5360F1B6.2000109@geosar.ch>
	<201404301711.35173.even.rouault@mines-paris.org>
	<53611468.1040508@geosar.ch>
Message-ID: <201404301732.54148.even.rouault@mines-paris.org>

Le mercredi 30 avril 2014 17:19:04, Mario Jurcevic a ?crit :
> On 04/30/2014 05:11 PM, Even Rouault wrote:
> > Not that much a big difference... Perhaps you should try to isolate which
> > layer conversion if particuarly slower with ogr2ogr
> 
> I get big difference:
>   time ogr2ogr -sql 'select
> "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria")
> as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'\
> 
>  >  -f "ESRI Shapefile" out.shp PG:'host=localhost dbname=test_soft_gis
> 
> user=test_soft_gis password=passwd'
> Warning 6: Normalized/laundered field name: 'soft_gis_serial' to
> 'soft_gis_s'
> 
> real	0m2.359s
> user	0m0.040s
> sys	0m0.004s
> 
> With debug on there there is many notice of ogr analyzing geom tables.
> Maybe that is, your dump miss has not the whole db.

I see ogrinfo reporting 167 layers.

The listing of spatial tables should be quite fast generally (in my case it 
is). Perhaps you could try " tables=foo" (really 'foo' or another dummy 
string) at the end of the OGR connexion string. This will skip that listing.

time ogr2ogr -sql 'select 
"soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria") as 
Geometria from test_export."Copertura_del_suolo__SuperficieCS"' out.shp 
"pg:dbname=autotest host=127.0.0.1 port=5436 user=postgres tables=foo" -
overwrite --debug on
real	0m0.181s
user	0m0.110s
sys	0m0.020s

So this saves ~ 40 ms for me.


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From mario at geosar.ch  Wed Apr 30 08:37:21 2014
From: mario at geosar.ch (Mario Jurcevic)
Date: Wed, 30 Apr 2014 17:37:21 +0200
Subject: [gdal-dev] postgis to esri shape slow
In-Reply-To: <201404301732.54148.even.rouault@mines-paris.org>
References: <5360F1B6.2000109@geosar.ch>
	<201404301711.35173.even.rouault@mines-paris.org>
	<53611468.1040508@geosar.ch>
	<201404301732.54148.even.rouault@mines-paris.org>
Message-ID: <536118B1.7030602@geosar.ch>



On 04/30/2014 05:32 PM, Even Rouault wrote:
> Le mercredi 30 avril 2014 17:19:04, Mario Jurcevic a ?crit :
>> On 04/30/2014 05:11 PM, Even Rouault wrote:
>>> Not that much a big difference... Perhaps you should try to isolate which
>>> layer conversion if particuarly slower with ogr2ogr
>>
>> I get big difference:
>>    time ogr2ogr -sql 'select
>> "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria")
>> as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'\
>>
>>   >  -f "ESRI Shapefile" out.shp PG:'host=localhost dbname=test_soft_gis
>>
>> user=test_soft_gis password=passwd'
>> Warning 6: Normalized/laundered field name: 'soft_gis_serial' to
>> 'soft_gis_s'
>>
>> real	0m2.359s
>> user	0m0.040s
>> sys	0m0.004s
>>
>> With debug on there there is many notice of ogr analyzing geom tables.
>> Maybe that is, your dump miss has not the whole db.
>
> I see ogrinfo reporting 167 layers.
>
> The listing of spatial tables should be quite fast generally (in my case it
> is). Perhaps you could try " tables=foo" (really 'foo' or another dummy
> string) at the end of the OGR connexion string. This will skip that listing.
>
> time ogr2ogr -sql 'select
> "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria") as
> Geometria from test_export."Copertura_del_suolo__SuperficieCS"' out.shp
> "pg:dbname=autotest host=127.0.0.1 port=5436 user=postgres tables=foo" -
> overwrite --debug on
> real	0m0.181s
> user	0m0.110s
> sys	0m0.020s
>
> So this saves ~ 40 ms for me.
>
>

Yes!
Without hidden listing is fast.

Thank you.






From jukka.rahkonen at mmmtike.fi  Wed Apr 30 08:41:26 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 30 Apr 2014 15:41:26 +0000 (UTC)
Subject: [gdal-dev] postgis to esri shape slow
References: <5360F1B6.2000109@geosar.ch>
	<201404301640.32565.even.rouault@mines-paris.org>
	<53610C66.3060501@geosar.ch>
	<201404301711.35173.even.rouault@mines-paris.org>
	<53611468.1040508@geosar.ch>
Message-ID: <loom.20140430T173516-492@post.gmane.org>

Mario Jurcevic <mario <at> geosar.ch> writes:

> 
> 
> On 04/30/2014 05:11 PM, Even Rouault wrote:
> > Not that much a big difference... Perhaps you should try to isolate
which layer
> > conversion if particuarly slower with ogr2ogr
> 
> I get big difference:
>   time ogr2ogr -sql 'select 
> "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria") 
> as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'\
>  >  -f "ESRI Shapefile" out.shp PG:'host=localhost dbname=test_soft_gis 
> user=test_soft_gis password=passwd'
> Warning 6: Normalized/laundered field name: 'soft_gis_serial' to 
> 'soft_gis_s'
> 
> real	0m2.359s
> user	0m0.040s
> sys	0m0.004s
> 
> With debug on there there is many notice of ogr analyzing geom tables.
> Maybe that is, your dump miss has not the whole db.

Could you make one more test by creating a table that is already cleared
from curves inside PostGIS as 
create table curves_as_lines as
select [your sql];

This test should reveal if st_curvetoline is the bottleneck.

-Jukka Rahkonen-





From even.rouault at mines-paris.org  Wed Apr 30 08:48:03 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 30 Apr 2014 17:48:03 +0200
Subject: [gdal-dev] postgis to esri shape slow
In-Reply-To: <536118B1.7030602@geosar.ch>
References: <5360F1B6.2000109@geosar.ch>
	<201404301732.54148.even.rouault@mines-paris.org>
	<536118B1.7030602@geosar.ch>
Message-ID: <201404301748.03696.even.rouault@mines-paris.org>

Le mercredi 30 avril 2014 17:37:21, Mario Jurcevic a ?crit :
> On 04/30/2014 05:32 PM, Even Rouault wrote:
> > Le mercredi 30 avril 2014 17:19:04, Mario Jurcevic a ?crit :
> >> On 04/30/2014 05:11 PM, Even Rouault wrote:
> >>> Not that much a big difference... Perhaps you should try to isolate
> >>> which layer conversion if particuarly slower with ogr2ogr
> >> 
> >> I get big difference:
> >>    time ogr2ogr -sql 'select
> >> 
> >> "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria
> >> ") as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'\
> >> 
> >>   >  -f "ESRI Shapefile" out.shp PG:'host=localhost dbname=test_soft_gis
> >> 
> >> user=test_soft_gis password=passwd'
> >> Warning 6: Normalized/laundered field name: 'soft_gis_serial' to
> >> 'soft_gis_s'
> >> 
> >> real	0m2.359s
> >> user	0m0.040s
> >> sys	0m0.004s
> >> 
> >> With debug on there there is many notice of ogr analyzing geom tables.
> >> Maybe that is, your dump miss has not the whole db.
> > 
> > I see ogrinfo reporting 167 layers.
> > 
> > The listing of spatial tables should be quite fast generally (in my case
> > it is). Perhaps you could try " tables=foo" (really 'foo' or another
> > dummy string) at the end of the OGR connexion string. This will skip
> > that listing.
> > 
> > time ogr2ogr -sql 'select
> > "soft_gis_serial","Origine","Qualita","Genere",st_curvetoline("Geometria"
> > ) as Geometria from test_export."Copertura_del_suolo__SuperficieCS"'
> > out.shp "pg:dbname=autotest host=127.0.0.1 port=5436 user=postgres
> > tables=foo" - overwrite --debug on
> > real	0m0.181s
> > user	0m0.110s
> > sys	0m0.020s
> > 
> > So this saves ~ 40 ms for me.
> 
> Yes!
> Without hidden listing is fast.

Hum, good. And it actually this rings a bell to me. In PostGIS 2.0 they have 
changed geometry_columns to be a view instead of a table. And in the case 
where you database is crowded (if you have more than the 167 above layers), 
the requests in the view might be really slow since the SQL to establish the 
view is rather complex...

Could you create a ticket in GDAL Trac about that issue ? I think it should be 
doable to implement a completely differed listing of layers the fist time 
GetLayerCount() is called. In the -sql case, it wouldn't be called, hence the 
listing will be skipped.

> 
> Thank you.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jan.heckman at gmail.com  Wed Apr 30 13:02:34 2014
From: jan.heckman at gmail.com (Jan Heckman)
Date: Wed, 30 Apr 2014 22:02:34 +0200
Subject: [gdal-dev] shapefile enhancements
In-Reply-To: <201404301630.36069.even.rouault@mines-paris.org>
References: <CAKMUAtCzs6Y8oUWDRegwyePyfXz_ks2Y=YzhVBjSZm3N346L=Q@mail.gmail.com>
	<201404282348.52210.even.rouault@mines-paris.org>
	<CAKMUAtBJG8gJmVy6r4=8G6R9exQ0m9t5BhmaYfDRYP_wiM9uOA@mail.gmail.com>
	<201404301630.36069.even.rouault@mines-paris.org>
Message-ID: <CAKMUAtCcK_xwHGcMr94Z18-srSDWc0C70f7WqfSgsHu2y9wiSQ@mail.gmail.com>

Hi,

Extending shapefile capabilities: The one reason which might persuade
anyone is the still abundant use of shapefiles for dataexchange.
Shapefile does seem to play a vital role there. I don't know of anything
equally 'tradeable'.
However, an extension would also endanger the
interoperability/dataexchange, so little of this would work short of
definining a new shapefile variant specification, working title .shp2.
I can see the outlines, even though I doubt it will be possible to
introduce such a thing. The mods would not be that hard, though.

Deleting: the bit I've implemented quickly for internal use does use the
ghost-feature approach, so I agree there. At the end of the session I pack
the .dbf; now I'll consider packing the .shp as well to avoid problems with
packages that do not read the .shx. Thanks for the advice.

As done now internally, a request for a deleted record returns a null for
does not exist, but does not affect the numbering (fid) of the other
records/shapes/rows. In the .shx, only the size is set to 0 for a delete,
so an undelete is possible.
For the dbf, the only overhead is maintaining a list of deleted
record(number)s.

To properly operate a shapefile-like system in which a delete actually
reduces the number of records would require 2 things:
1) another definition of the record identifiers (fid as part of the
record). This can be done in the shapefile, of course, since the record
number is already stored (1-based); it is just never used afaik.
2) maintain a (kind of) .dbx in memory, to index the valid records much in
the same way the .shx does. One could store it or build it when reading the
.dbf file. A more efficient scheme should be possible.
Y
ou can indeed not throw such a thing at existing shapefiledrivers.

Just sharing my thoughts here.

Jan


On Wed, Apr 30, 2014 at 4:30 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Le mardi 29 avril 2014 19:46:46, Jan Heckman a ?crit :
> > Hi,
> > It appears I have to do some homework on ogr's shapefile functions as it
> > stands now.
> >
> > 8GB: If interoperability is more of a priority than capacity, that's a
> > valid consideration. I've not really needed anything > 4GB so far.
>
> I'm not sure there's a point in "extending" shapefile capabilities whereas
> there are other formats, more capable, that don't have a 32bit offset
> limitation.
>
> >
> > Delete:
> > By delete I mean leaving the information in the file but (shapefile)
> taking
> > it out of the index chain (.shx), and .dbf, marking the record with an
> > asterisk in its firs byte.
> > As far as arcgis, I did a delete in this way and tried to load it. When I
> > do not reduce the record count in the dbf header, arcgis will not load
> it;
> > when I do reduce the record count in the header, arcgis will load the
> > shapefile but the attributes will not match the shapes. As a cross-check,
> > you can open the .dbf in open office or excel: the delete will be
> > recognized.
> >
> > My guess is that arcgis maps the shaperecords to the physical records of
> > the dbf only.
> >
> > To allow use of the shapefile in arcgis,  I have to compact the .dbf. The
> > shape will then be handled correctly.
> >
> > A recipe to try this out:
> > create a new empty point shapefile, load it in arcgis. Using arccatalog
> to
> > create the shapefile, it will have a single ID integer attribute. That's
> > the starting point.
> > Create 3 points and give them ID's 1 - 3.
> > Now to 'delete' the second record using a diskeditor:
> > Copy the shapefile. Open the .shx. The .shx has a header and records
> > consisting of offset-length pairs. A pair takes 8 bytes. Change the 2nd
> > offset to be identical to the last (00000040 -> 0000004E). Diminish the
> > filelength indicator in the header (offset 0x18) by 4 (0000003E to
> > 0000003A). Copy the file, except the last 8 bytes to the new .shx file.
> > DBF: open in editor, change the first byte of the second record (at
> offset
> > 0x48) to an asterisk. The recordcount in the header is at offset 4
> (little
> > endian).
> >
> > Load in arcgis, will fail.
>
> Yes I'm not surprised at all and I would say that ArcGIS behaviour is sane.
> And I guess that OGR would be defeated too if you tried to open such a
> shapefile with it.
> If you delete record ID 2, you just have to mark the .dbf record with '*'.
> For
> uniqueness purposes, feature 3 should remain feature 3. And feature 2 be a
> "ghost feature". That's whay OGR does when you use the DeleteFeature()
> API. I
> don't think it touches the .shx at all. It could possibly change the
> offset to
> be 0 as a marker for invalid, but we don't even do that.
>
> Otherwise you have to compact both the .dbf and .shx (and possibly .shp for
> software not using .shx as Jukka mentionned) to move data.
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140430/cd4d761f/attachment.html>

From kyle at pobox.com  Wed Apr 30 15:17:34 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Wed, 30 Apr 2014 16:17:34 -0600
Subject: [gdal-dev] New OGR Driver for MongoDB
In-Reply-To: <2DAEBB32799F494EBE504E1247CC5E8220E59BF4@CITESMBX6.ad.uillinois.edu>
References: <2DAEBB32799F494EBE504E1247CC5E8220E59BF4@CITESMBX6.ad.uillinois.edu>
Message-ID: <CAJ0mEz3hOhVhJUQmE97UxUMwZAic=-rt0h+GSbUVEDoH2z1d+g@mail.gmail.com>

Shuai

On Wed, Apr 30, 2014 at 7:55 AM, Zhang, Shuai <shuai at illinois.edu> wrote:
> Hi there,
>
> I wrote a ogr driver for mongodb and wish to contribute to the community.
> but I'm not sure where to start and how to do it.

You can file a ticket for a new feature here:

http://trac.osgeo.org/gdal/newticket

Attach the new driver as a patch.

> Is there anyone who can give me a hand or some guidance about it?
> it will be terrific if you know geojson driver or couchdb driver well,
> so that we may have discussions on the code level.

Discussion can take place in the comments on the ticket.

>
> Thanks,
> Shuai
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Kyle

