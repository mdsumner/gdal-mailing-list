From bin.jiang at polyu.edu.hk  Thu May  1 10:23:37 2008
From: bin.jiang at polyu.edu.hk (Bin Jiang)
Date: Thu May  1 10:24:43 2008
Subject: [gdal-dev] ray tracing codes
Message-ID: <4819D269.4020100@polyu.edu.hk>

Hi, Any GDAL codes or library can do the task as illustrated in the 
attached figure?

Thanks in advance for your comments.

Cheers.

Bin

-- 
------------------------------------------------
Bin Jiang
Department of Land Surveying and Geo-informatics
The Hong Kong Polytechnic University
Hung Hom, Kowloon, Hong Kong.
Tel: (852) 2766 4335, Fax: (852) 2330 2994
Email: bin.jiang@polyu.edu.hk
Web: http://www.lsgi.polyu.edu.hk/staff/bin.jiang/
------------------------------------------------

-------------- next part --------------
A non-text attachment was scrubbed...
Name: RayIllustration.gif
Type: image/gif
Size: 19174 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080501/9e0e2f68/RayIllustration-0001.gif
From c.schitka at gmail.com  Thu May  1 12:11:38 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Thu May  1 12:11:45 2008
Subject: [gdal-dev] OSGEO Question
Message-ID: <e66a4dbf0805010911y28295d0cg26da80e62b4488e9@mail.gmail.com>

Hi All,

Sorry if this is slightly off topic. I am trying to link to the most recent
version of the OGDI that ogrinfo. Links too. Is there anyway I can download
a "Debug" version of the libraries off of the OSGEO website ?

Courtney
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080501/73943d82/attachment.html
From warmerdam at pobox.com  Thu May  1 12:21:40 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May  1 12:22:06 2008
Subject: [gdal-dev] OSGEO Question
In-Reply-To: <e66a4dbf0805010911y28295d0cg26da80e62b4488e9@mail.gmail.com>
References: <e66a4dbf0805010911y28295d0cg26da80e62b4488e9@mail.gmail.com>
Message-ID: <4819EE14.7050502@pobox.com>

Courtney Schitka wrote:
> Hi All,
>  
> Sorry if this is slightly off topic. I am trying to link to the most 
> recent version of the OGDI that ogrinfo. Links too. Is there anyway I 
> can download a "Debug" version of the libraries off of the OSGEO website ?

Courtney,

I am not aware of any OGDI "debug" build binaries available on the net.

OGDI is included in the OSGeo4W binaries distributed by OSGeo but that is
just a production build (though it does include the include files and
stub libraries for developers doing non-debug builds).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mateusz at loskot.net  Thu May  1 15:23:12 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May  1 15:23:17 2008
Subject: [gdal-dev] OSGEO Question
In-Reply-To: <e66a4dbf0805010911y28295d0cg26da80e62b4488e9@mail.gmail.com>
References: <e66a4dbf0805010911y28295d0cg26da80e62b4488e9@mail.gmail.com>
Message-ID: <481A18A0.3060003@loskot.net>

Courtney Schitka wrote:
 > Is there anyway I can download
> a "Debug" version of the libraries off of the OSGEO website ?

Courtney,

You are not writing what OS/compiler you are using,
but FYI, a general comment is that redistribution of debug binaries made 
using Microsoft Visual C++ is forbidden (see EULA).

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From paalsund at gmail.com  Thu May  1 17:09:07 2008
From: paalsund at gmail.com (Paal Sund)
Date: Thu May  1 17:09:05 2008
Subject: [gdal-dev] ogr2ogr, shapefile 2 postgis
Message-ID: <481A3173.9090908@gmail.com>

Hi,
I am getting the following error while loading a shapefile to postgis 
using ogr2ogr interactively from 'DOS' command window (cmd):

ogr2ogr -f "PostgreSQL" -a_srs "EPSG:32633" PG:"<some values>" 
33_n5000_bygg_punkt.shp -nln n5000_bygg_pun


ERROR 1: INSERT command for new feature failed.

FEIL: invalid byte sequence for encoding "UTF8": 0x86

HINT: This error can also happen if the byte sequence does not match the 
encoding expected by the server, which is controlled by "client_encoding".


Command: INSERT INTO "n5000_bygg_pun" (wkb_geometry , "area", 
"perimeter", "kupu

nkt_", "kupunkt_id", "objtype", "ptema", "tett_id", "navn", "fyr_id", 
"oppdatert

") VALUES (GeomFromEWKT('SRID=32768;POINT (897350 7911435)'::TEXT) ,

0.00000, 0.00000, 11, 503, 'Tettsted', 4007, 860

2, 'Honningsv?g', 0, 20010301)

ERROR 1: Terminating translation prematurely after failed

translation of layer 33_n5000_bygg_punkt




My ogr2ogr is from the latest FWTools, running on Windows XP 2002 sp2.
My PostGIS is from the latest windows binaries (postgresql 8.3 and the 
application stack builder)

Any clues? The error message seems to point in the encoding direction. 
My shapefile has 1252 encoding.
I havent done anything with encoding stuff in postgrsql.

Help appreciated,
best P?l Herman

From randre at gmail.com  Thu May  1 17:21:09 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Thu May  1 17:21:20 2008
Subject: [gdal-dev] ogr2ogr, shapefile 2 postgis
In-Reply-To: <481A3173.9090908@gmail.com>
References: <481A3173.9090908@gmail.com>
Message-ID: <9c2015090805011421v18c0a772ubab7247620ae0192@mail.gmail.com>

Hi Paal,

I think you may need to create the PostGIS database with the encoding set
explicitly to 1252.

You can do that in the pgsql command line with, "createdb --encoding WIN1252
new_db".

Roger
--

On Thu, May 1, 2008 at 2:09 PM, Paal Sund <paalsund@gmail.com> wrote:

> Hi,
> I am getting the following error while loading a shapefile to postgis
> using ogr2ogr interactively from 'DOS' command window (cmd):
>
> ogr2ogr -f "PostgreSQL" -a_srs "EPSG:32633" PG:"<some values>"
> 33_n5000_bygg_punkt.shp -nln n5000_bygg_pun
>
>
> ERROR 1: INSERT command for new feature failed.
>
> FEIL: invalid byte sequence for encoding "UTF8": 0x86
>
> HINT: This error can also happen if the byte sequence does not match the
> encoding expected by the server, which is controlled by "client_encoding".
>
>
> Command: INSERT INTO "n5000_bygg_pun" (wkb_geometry , "area", "perimeter",
> "kupu
>
> nkt_", "kupunkt_id", "objtype", "ptema", "tett_id", "navn", "fyr_id",
> "oppdatert
>
> ") VALUES (GeomFromEWKT('SRID=32768;POINT (897350 7911435)'::TEXT) ,
>
> 0.00000, 0.00000, 11, 503, 'Tettsted', 4007, 860
>
> 2, 'Honningsv?g', 0, 20010301)
>
> ERROR 1: Terminating translation prematurely after failed
>
> translation of layer 33_n5000_bygg_punkt
>
>
>
>
> My ogr2ogr is from the latest FWTools, running on Windows XP 2002 sp2.
> My PostGIS is from the latest windows binaries (postgresql 8.3 and the
> application stack builder)
>
> Any clues? The error message seems to point in the encoding direction. My
> shapefile has 1252 encoding.
> I havent done anything with encoding stuff in postgrsql.
>
> Help appreciated,
> best P?l Herman
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080501/b5923422/attachment.html
From randre at gmail.com  Fri May  2 00:20:04 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri May  2 00:20:10 2008
Subject: [gdal-dev] What options for display of high-quality ortho's via WMS?
Message-ID: <9c2015090805012120wd4226a5gc9e913ff8b5925db@mail.gmail.com>

Throwing out a general question to this list because I know that many of us
use a variety of different applications to "get the job done", but use the
GDAL tools as the common unifier (at least I like to think so).  I'm putting
together a Mapserver-driven web map that uses OpenLayers to get data via
WMS.  It's all working quite nicely, except for my aerial photo layer, which
I am not incredibly pleased with.  Despite using every tweak I could find
(convert from RGB to 8-bit with pct2rgb.py, use OUTPUTFORMAT with
GD/PNG, and use "DITHER=YES" in mapfile, I cannot get a very high quality
rendition of the photo layer in my WMS output.  It looks grainy in areas
with solid color and generally a bit "pixelly".  So I have a couple of
questions.

1.  Is some loss of image quality an unavoidable side-effect of using
Mapserver?

2. If not 1, then are there other tweaks that can be done to further improve
the quality of my output?  (Note that I intend to use Tilecache, so maybe
slow initial performance may is an acceptable trade off, I dunno.)

3. If yes to 1, then what other open source tools do a better job of
rendering photo data?  (I intend to test some of the data in GeoServer, but
I haven't done so yet.)

Thanks in advance for your feedback.

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080501/2bb44d35/attachment.html
From mchapman at texelinc.com  Fri May  2 02:37:17 2008
From: mchapman at texelinc.com (mchapman@texelinc.com)
Date: Fri May  2 02:42:36 2008
Subject: [gdal-dev] What options for display of high-quality ortho's via
	WMS?
In-Reply-To: <9c2015090805012120wd4226a5gc9e913ff8b5925db@mail.gmail.com>
References: <9c2015090805012120wd4226a5gc9e913ff8b5925db@mail.gmail.com>
Message-ID: <1245295822-1209710490-cardhu_decombobulator_blackberry.rim.net-1949575278-@bxe144.bisx.prod.on.blackberry>

Maybe try generating an overview
(.ovr) file for the image. Perhaps the resampling will be better. Also see if you can specify in mapserver the resampling method to cubic convolution or something other than nearest neighbor.

Martin

 
Sent via BlackBerry by AT&T

-----Original Message-----
From: "Roger Andr?" <randre@gmail.com>

Date: Thu, 1 May 2008 21:20:04 
To:gdal-dev@lists.osgeo.org
Subject: [gdal-dev] What options for display of high-quality ortho's via WMS?


Throwing out a general question to this list because I know that many of us use a variety of different applications to "get the job done", but use the GDAL tools as the common unifier (at least I like to think so).? I'm putting together a Mapserver-driven web map that uses OpenLayers to get data via WMS.? It's all working quite nicely, except for my aerial photo layer, which I am not incredibly pleased with.? Despite using every tweak I could find (convert from RGB to 8-bit with pct2rgb.py, use OUTPUTFORMAT with GD/PNG,?and use "DITHER=YES" in mapfile, I cannot get a very high quality rendition of the photo layer in my WMS output.? It looks grainy in areas with solid color and generally a bit "pixelly".? So I have a couple of questions. 
? 
1.? Is some loss of image quality an unavoidable side-effect of using Mapserver? 
? 
2. If not 1, then are there other tweaks that can be done to further improve the quality of my output?? (Note that I intend to use Tilecache, so maybe slow initial performance may is an acceptable trade off, I dunno.) 
? 
3. If yes to 1, then what other open source tools do a better job of rendering photo data?? (I intend to test some of the data in GeoServer, but I haven't done so yet.) 
? 
Thanks in advance for your feedback. 
? 
Roger 
-- _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ben at vterrain.org  Fri May  2 05:02:14 2008
From: ben at vterrain.org (Ben Discoe)
Date: Fri May  2 05:05:52 2008
Subject: [gdal-dev] RFC 23: OGR Unicode 
In-Reply-To: <480F7F75.6030201@pobox.com>
References: <480F7F75.6030201@pobox.com>
Message-ID: <01fa01c8ac33$38272c20$a8758460$@org>

> -----
> From: Frank Warmerdam
>    http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
>
> "This RFC specifically does not attempt to address issues of using non-ascii filenames."

I'd like to add my two cents here.

While RFC23[.1] might be a reasonable addition, it is not a vital one.  By vital, i mean that it does not allow us to do anything we could not already do.

E.g. If i am reading a SHP using OGR, and i know that the text is in Chinese (GB2312), i can call iconv myself to convert from GB2312 to UTF8 or any other charset.  Telling OGR about the encoding and calling extra OGR methods to do the same thing might be slightly more convenient, but not a step forward in functionality.

Support for UTF-8 filenames, on the other hand, would be vital and genuinely useful.  Right now, on a English-language Windows OS, GDAL cannot and will not open any filename with non-ANSI characters.  No Chinese filenames.  And the reverse is true as well, GDAL on a e.g. Chinese language Windows OS cannot open filenames in e.g. Polish.

This is fixable with, i believe, a surprisingly small set of additions to the VSI* file methods.  On some platforms, e.g. Mac OS X, it would not require any code at all, as the filesystem is always in UTF8.  That would be a far more interesting and useful addition, IMHO.

-Ben


From qbproger at gmail.com  Fri May  2 10:14:30 2008
From: qbproger at gmail.com (Joe)
Date: Fri May  2 10:14:33 2008
Subject: [gdal-dev] Java Bindings
Message-ID: <4ef8bec90805020714j64ce27fby91bb80c777d1a52b@mail.gmail.com>

Hi,

I was wondering if there is a distribution of the java bindings
already built, with support for different platforms (win32, linux,
linux 64-bit)?

I've googled for a while, but all I could find was the swig
instructions.  Is there anything already built?

Thanks,
Joe
From daniele.romagnoli at geo-solutions.it  Fri May  2 10:28:17 2008
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Fri May  2 10:28:19 2008
Subject: [gdal-dev] Java Bindings
In-Reply-To: <4ef8bec90805020714j64ce27fby91bb80c777d1a52b@mail.gmail.com>
References: <4ef8bec90805020714j64ce27fby91bb80c777d1a52b@mail.gmail.com>
Message-ID: <7221db410805020728v2d2144fcoab8157d84262daec@mail.gmail.com>

Hi Joe,
the main "problem" of a java bindings build is that it depends on which
formats you want GDAL will support. Depending on your needs, you should
build GDAL with support for several formats (which may also include external
libraries) and then you should build java bindings using SWIG, leveraging on
that GDAL build.

Anyway, we have built some java bindings for a basic GDAL version
(windows/linux) and GDAL with support for MrSID and ECW (windows/linux).
Actually we dont have a ready to use release of these libraries, but you can
find this work and how to obtain the libs on our ImageIO-Ext project (
https://imageio-ext.dev.java.net/). [See the setup guide as "guest" user
without password.]

Hope this helps. Let me know if you need more info/help.

Regards,
Daniele



On Fri, May 2, 2008 at 4:14 PM, Joe <qbproger@gmail.com> wrote:

> Hi,
>
> I was wondering if there is a distribution of the java bindings
> already built, with support for different platforms (win32, linux,
> linux 64-bit)?
>
> I've googled for a while, but all I could find was the swig
> instructions.  Is there anything already built?
>
> Thanks,
> Joe
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax: +39 0584983027
mob: +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080502/e76477a9/attachment.html
From warmerdam at pobox.com  Fri May  2 10:55:35 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May  2 10:55:59 2008
Subject: [gdal-dev] Java Bindings
In-Reply-To: <4ef8bec90805020714j64ce27fby91bb80c777d1a52b@mail.gmail.com>
References: <4ef8bec90805020714j64ce27fby91bb80c777d1a52b@mail.gmail.com>
Message-ID: <481B2B67.9000101@pobox.com>

Joe wrote:
> Hi,
> 
> I was wondering if there is a distribution of the java bindings
> already built, with support for different platforms (win32, linux,
> linux 64-bit)?
> 
> I've googled for a while, but all I could find was the swig
> instructions.  Is there anything already built?

Joe,

I have built a gdal-java module for OSGeo4W for Win32.  Keep in mind
that the bindings need to be built specifically for each architecture
since parts of the bindings are written in C++ (the non-Java side of
the JNI calls).

   http://wiki.osgeo.org/wiki/OSGeo4W

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jmpmcmanus at yahoo.com  Fri May  2 11:22:54 2008
From: jmpmcmanus at yahoo.com (James McManus)
Date: Fri May  2 11:29:35 2008
Subject: [gdal-dev] Compiling gdal with php
Message-ID: <166848.40054.qm@web35708.mail.mud.yahoo.com>

I am trying to compile gdal  -with-php. I am getting an error message (see below) saying "No typemaps are defined. How do I do this?

make[2]: Entering directory `/usr/local/src/gdal-1.5.1/swig/php'
swig -Wall -I../include -I../include/php -I../include/php/docs  -I/usr/local/src/gdal-1.5.1 -c++ -php -o gdal_wrap.cpp gdal.i
../include/Band.i:140: Warning(453): Can't apply (IF_ERROR_RETURN_NONE). No typemaps are defined.
g++ -I../../port -I../../gcore -I../../alg -I../../ogr `php-config --includes` -fpic -c gdal_wrap.cpp
gdal_wrap.cpp:1056: error: ???zend_property_reference??? was not declared in this scope
gdal_wrap.cpp:1056: error: ???property_reference??? was not declared in this scope
gdal_wrap.cpp:1056: error: expected primary-expression before ???*??? token
gdal_wrap.cpp:1056: error: ???value??? was not declared in this scope

Jim
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080502/eb25dd3e/attachment.html
From mateusz at loskot.net  Fri May  2 11:50:21 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri May  2 11:50:27 2008
Subject: [gdal-dev] Compiling gdal with php
In-Reply-To: <166848.40054.qm@web35708.mail.mud.yahoo.com>
References: <166848.40054.qm@web35708.mail.mud.yahoo.com>
Message-ID: <481B383D.6010402@loskot.net>

James McManus wrote:
> I am trying to compile gdal  -with-php. I am getting an error message
> (see below) saying "No typemaps are defined. How do I do this?


James,

AFAIK, PHP bindings to GDAL may not be usable. They are somewhat 
orphaned, see this thread:

http://lists.osgeo.org/pipermail/gdal-dev/2007-December/015333.html

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From maplabs at light42.com  Fri May  2 13:35:30 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Fri May  2 13:34:04 2008
Subject: [gdal-dev] Java Bindings
In-Reply-To: <4ef8bec90805020714j64ce27fby91bb80c777d1a52b@mail.gmail.com>
References: <4ef8bec90805020714j64ce27fby91bb80c777d1a52b@mail.gmail.com>
Message-ID: <28E7B1E4-186E-11DD-8D00-000A277A733C@light42.com>

On May 2, 2008, at 7:14 AM, Joe wrote:
> I was wondering if there is a distribution of the java bindings
> already built, with support for different platforms (win32, linux,
> linux 64-bit)?

If anyone is coming to JavaOne, I'm here in the area and would be glad 
to meet for a GDAL BOF.

-Brian


==
Brian Hamlin
ISDE5 Steering Committee
Planetwork.net
NextNow Collaboratory
(415) 717-4462 (c)

From randre at gmail.com  Fri May  2 16:54:03 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri May  2 17:00:10 2008
Subject: [gdal-dev] What options for display of high-quality ortho's via
	WMS?
In-Reply-To: <1245295822-1209710490-cardhu_decombobulator_blackberry.rim.net-1949575278-@bxe144.bisx.prod.on.blackberry>
References: <9c2015090805012120wd4226a5gc9e913ff8b5925db@mail.gmail.com>
	<1245295822-1209710490-cardhu_decombobulator_blackberry.rim.net-1949575278-@bxe144.bisx.prod.on.blackberry>
Message-ID: <9c2015090805021354p45c18736s197a4ae5439e7a81@mail.gmail.com>

Well, generating overviews of the 8-bit data produced pretty awful looking
results.  gdaladdo did warn me, so I can't blame it.  ;)  Also changing the
resampling to bilinear did not improve the matter.

Is it better to create large, single-image overviews, or to create many
tiles of varying resolution levels?
--



On Thu, May 1, 2008 at 11:37 PM, <mchapman@texelinc.com> wrote:

> Maybe try generating an overview
> (.ovr) file for the image. Perhaps the resampling will be better. Also see
> if you can specify in mapserver the resampling method to cubic convolution
> or something other than nearest neighbor.
>
> Martin
>
>
> Sent via BlackBerry by AT&T
>
> -----Original Message-----
> From: "Roger Andr?" <randre@gmail.com>
>
> Date: Thu, 1 May 2008 21:20:04
> To:gdal-dev@lists.osgeo.org <To%3Agdal-dev@lists.osgeo.org>
> Subject: [gdal-dev] What options for display of high-quality ortho's via
> WMS?
>
>
> Throwing out a general question to this list because I know that many of
> us use a variety of different applications to "get the job done", but use
> the GDAL tools as the common unifier (at least I like to think so).  I'm
> putting together a Mapserver-driven web map that uses OpenLayers to get data
> via WMS.  It's all working quite nicely, except for my aerial photo layer,
> which I am not incredibly pleased with.  Despite using every tweak I could
> find (convert from RGB to 8-bit with pct2rgb.py, use OUTPUTFORMAT with
> GD/PNG, and use "DITHER=YES" in mapfile, I cannot get a very high quality
> rendition of the photo layer in my WMS output.  It looks grainy in areas
> with solid color and generally a bit "pixelly".  So I have a couple of
> questions.
>
> 1.  Is some loss of image quality an unavoidable side-effect of using
> Mapserver?
>
> 2. If not 1, then are there other tweaks that can be done to further
> improve the quality of my output?  (Note that I intend to use Tilecache, so
> maybe slow initial performance may is an acceptable trade off, I dunno.)
>
> 3. If yes to 1, then what other open source tools do a better job of
> rendering photo data?  (I intend to test some of the data in GeoServer, but
> I haven't done so yet.)
>
> Thanks in advance for your feedback.
>
> Roger
> -- _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080502/af420b8a/attachment.html
From mchapman at texelinc.com  Fri May  2 17:05:31 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Fri May  2 17:03:46 2008
Subject: [gdal-dev] What options for display of high-quality ortho's via
	WMS?
In-Reply-To: <9c2015090805021354p45c18736s197a4ae5439e7a81@mail.gmail.com>
References: <9c2015090805012120wd4226a5gc9e913ff8b5925db@mail.gmail.com>	
	<1245295822-1209710490-cardhu_decombobulator_blackberry.rim.net-1949575278-@bxe144.bisx.prod.on.blackberry>
	<9c2015090805021354p45c18736s197a4ae5439e7a81@mail.gmail.com>
Message-ID: <009101c8ac98$42367210$c6a35630$@com>

Can you let me download the image you are having issues with?  You want to
have a pyramid of files that are varying levels.  Ideally they should be a
factor of 2, i.e
 2, 4, 8, 16, 32 , 64, 128, 256, 512, 1024, 2048, 4096, 
 .
What is the gsd of your base image?

 

Martin

 

From: Roger Andr? [mailto:randre@gmail.com] 
Sent: Friday, May 02, 2008 2:54 PM
To: mchapman@texelinc.com
Cc: gdal-dev-bounces@lists.osgeo.org; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] What options for display of high-quality ortho's via
WMS?

 

Well, generating overviews of the 8-bit data produced pretty awful looking
results.  gdaladdo did warn me, so I can't blame it.  ;)  Also changing the
resampling to bilinear did not improve the matter.

Is it better to create large, single-image overviews, or to create many
tiles of varying resolution levels?
--




On Thu, May 1, 2008 at 11:37 PM, <mchapman@texelinc.com> wrote:

Maybe try generating an overview
(.ovr) file for the image. Perhaps the resampling will be better. Also see
if you can specify in mapserver the resampling method to cubic convolution
or something other than nearest neighbor.

Martin


Sent via BlackBerry by AT&T


-----Original Message-----
From: "Roger Andr?" <randre@gmail.com>

Date: Thu, 1 May 2008 21:20:04
To:gdal-dev@lists.osgeo.org <mailto:To%3Agdal-dev@lists.osgeo.org> 
Subject: [gdal-dev] What options for display of high-quality ortho's via
WMS?


Throwing out a general question to this list because I know that many of us
use a variety of different applications to "get the job done", but use the
GDAL tools as the common unifier (at least I like to think so).  I'm putting
together a Mapserver-driven web map that uses OpenLayers to get data via
WMS.  It's all working quite nicely, except for my aerial photo layer, which
I am not incredibly pleased with.  Despite using every tweak I could find
(convert from RGB to 8-bit with pct2rgb.py, use OUTPUTFORMAT with GD/PNG,
and use "DITHER=YES" in mapfile, I cannot get a very high quality rendition
of the photo layer in my WMS output.  It looks grainy in areas with solid
color and generally a bit "pixelly".  So I have a couple of questions.
 
1.  Is some loss of image quality an unavoidable side-effect of using
Mapserver?
 
2. If not 1, then are there other tweaks that can be done to further improve
the quality of my output?  (Note that I intend to use Tilecache, so maybe
slow initial performance may is an acceptable trade off, I dunno.)
 
3. If yes to 1, then what other open source tools do a better job of
rendering photo data?  (I intend to test some of the data in GeoServer, but
I haven't done so yet.)
 
Thanks in advance for your feedback.
 
Roger

-- _______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080502/54570b7f/attachment.html
From randre at gmail.com  Fri May  2 17:13:44 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri May  2 17:20:31 2008
Subject: [gdal-dev] What options for display of high-quality ortho's via
	WMS?
In-Reply-To: <009101c8ac98$42367210$c6a35630$@com>
References: <9c2015090805012120wd4226a5gc9e913ff8b5925db@mail.gmail.com>
	<1245295822-1209710490-cardhu_decombobulator_blackberry.rim.net-1949575278-@bxe144.bisx.prod.on.blackberry>
	<9c2015090805021354p45c18736s197a4ae5439e7a81@mail.gmail.com>
	<009101c8ac98$42367210$c6a35630$@com>
Message-ID: <9c2015090805021413p753915f6lc71e34af04a4d4b@mail.gmail.com>

I only have the app running on an internal server at the moment.  I will try
to make a few WMS requests to generate images and will post the resulting
output on an external box for you.  My GSD is 18", but I am probably going
to increase that to 36" for the final product.

Thanks.
--

On Fri, May 2, 2008 at 2:05 PM, Martin Chapman <mchapman@texelinc.com>
wrote:

>  Can you let me download the image you are having issues with?  You want
> to have a pyramid of files that are varying levels.  Ideally they should be
> a factor of 2, i.e? 2, 4, 8, 16, 32 , 64, 128, 256, 512, 1024, 2048, 4096, ?
> .  What is the gsd of your base image?
>
>
>
> Martin
>
>
>
> *From:* Roger Andr? [mailto:randre@gmail.com]
> *Sent:* Friday, May 02, 2008 2:54 PM
> *To:* mchapman@texelinc.com
> *Cc:* gdal-dev-bounces@lists.osgeo.org; gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] What options for display of high-quality ortho's
> via WMS?
>
>
>
> Well, generating overviews of the 8-bit data produced pretty awful looking
> results.  gdaladdo did warn me, so I can't blame it.  ;)  Also changing the
> resampling to bilinear did not improve the matter.
>
> Is it better to create large, single-image overviews, or to create many
> tiles of varying resolution levels?
> --
>
>
>  On Thu, May 1, 2008 at 11:37 PM, <mchapman@texelinc.com> wrote:
>
> Maybe try generating an overview
> (.ovr) file for the image. Perhaps the resampling will be better. Also see
> if you can specify in mapserver the resampling method to cubic convolution
> or something other than nearest neighbor.
>
> Martin
>
>
> Sent via BlackBerry by AT&T
>
>
> -----Original Message-----
> From: "Roger Andr?" <randre@gmail.com>
>
> Date: Thu, 1 May 2008 21:20:04
> To:gdal-dev@lists.osgeo.org <To%3Agdal-dev@lists.osgeo.org>
> Subject: [gdal-dev] What options for display of high-quality ortho's via
> WMS?
>
>
> Throwing out a general question to this list because I know that many of
> us use a variety of different applications to "get the job done", but use
> the GDAL tools as the common unifier (at least I like to think so).  I'm
> putting together a Mapserver-driven web map that uses OpenLayers to get data
> via WMS.  It's all working quite nicely, except for my aerial photo layer,
> which I am not incredibly pleased with.  Despite using every tweak I could
> find (convert from RGB to 8-bit with pct2rgb.py, use OUTPUTFORMAT with
> GD/PNG, and use "DITHER=YES" in mapfile, I cannot get a very high quality
> rendition of the photo layer in my WMS output.  It looks grainy in areas
> with solid color and generally a bit "pixelly".  So I have a couple of
> questions.
>
> 1.  Is some loss of image quality an unavoidable side-effect of using
> Mapserver?
>
> 2. If not 1, then are there other tweaks that can be done to further
> improve the quality of my output?  (Note that I intend to use Tilecache, so
> maybe slow initial performance may is an acceptable trade off, I dunno.)
>
> 3. If yes to 1, then what other open source tools do a better job of
> rendering photo data?  (I intend to test some of the data in GeoServer, but
> I haven't done so yet.)
>
> Thanks in advance for your feedback.
>
> Roger
>
> -- _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080502/ebb12b43/attachment-0001.html
From randre at gmail.com  Fri May  2 17:42:56 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Fri May  2 17:43:17 2008
Subject: [gdal-dev] What options for display of high-quality ortho's via
	WMS?
In-Reply-To: <9c2015090805021413p753915f6lc71e34af04a4d4b@mail.gmail.com>
References: <9c2015090805012120wd4226a5gc9e913ff8b5925db@mail.gmail.com>
	<1245295822-1209710490-cardhu_decombobulator_blackberry.rim.net-1949575278-@bxe144.bisx.prod.on.blackberry>
	<9c2015090805021354p45c18736s197a4ae5439e7a81@mail.gmail.com>
	<009101c8ac98$42367210$c6a35630$@com>
	<9c2015090805021413p753915f6lc71e34af04a4d4b@mail.gmail.com>
Message-ID: <9c2015090805021442t545fb7f5o2085de4454fe1e53@mail.gmail.com>

I just realized what I was doing wrong.  I kept the processing option in the
LAYER, and it was trumping the OUTPUTFORMAT in the MAP section.  Once I took
the DITHER="YES" out, the imagery looks great.

Still learning how this all works together, sorry for taking up your time.
--

On Fri, May 2, 2008 at 2:13 PM, Roger Andr? <randre@gmail.com> wrote:

> I only have the app running on an internal server at the moment.  I will
> try to make a few WMS requests to generate images and will post the
> resulting output on an external box for you.  My GSD is 18", but I am
> probably going to increase that to 36" for the final product.
>
> Thanks.
> --
>
>
> On Fri, May 2, 2008 at 2:05 PM, Martin Chapman <mchapman@texelinc.com>
> wrote:
>
> >  Can you let me download the image you are having issues with?  You want
> > to have a pyramid of files that are varying levels.  Ideally they should be
> > a factor of 2, i.e? 2, 4, 8, 16, 32 , 64, 128, 256, 512, 1024, 2048, 4096, ?
> > .  What is the gsd of your base image?
> >
> >
> >
> > Martin
> >
> >
> >
> > *From:* Roger Andr? [mailto:randre@gmail.com]
> > *Sent:* Friday, May 02, 2008 2:54 PM
> > *To:* mchapman@texelinc.com
> > *Cc:* gdal-dev-bounces@lists.osgeo.org; gdal-dev@lists.osgeo.org
> > *Subject:* Re: [gdal-dev] What options for display of high-quality
> > ortho's via WMS?
> >
> >
> >
> > Well, generating overviews of the 8-bit data produced pretty awful
> > looking results.  gdaladdo did warn me, so I can't blame it.  ;)  Also
> > changing the resampling to bilinear did not improve the matter.
> >
> > Is it better to create large, single-image overviews, or to create many
> > tiles of varying resolution levels?
> > --
> >
> >
> >  On Thu, May 1, 2008 at 11:37 PM, <mchapman@texelinc.com> wrote:
> >
> > Maybe try generating an overview
> > (.ovr) file for the image. Perhaps the resampling will be better. Also
> > see if you can specify in mapserver the resampling method to cubic
> > convolution or something other than nearest neighbor.
> >
> > Martin
> >
> >
> > Sent via BlackBerry by AT&T
> >
> >
> > -----Original Message-----
> > From: "Roger Andr?" <randre@gmail.com>
> >
> > Date: Thu, 1 May 2008 21:20:04
> > To:gdal-dev@lists.osgeo.org <To%3Agdal-dev@lists.osgeo.org>
> > Subject: [gdal-dev] What options for display of high-quality ortho's via
> > WMS?
> >
> >
> > Throwing out a general question to this list because I know that many of
> > us use a variety of different applications to "get the job done", but use
> > the GDAL tools as the common unifier (at least I like to think so).  I'm
> > putting together a Mapserver-driven web map that uses OpenLayers to get data
> > via WMS.  It's all working quite nicely, except for my aerial photo layer,
> > which I am not incredibly pleased with.  Despite using every tweak I could
> > find (convert from RGB to 8-bit with pct2rgb.py, use OUTPUTFORMAT with
> > GD/PNG, and use "DITHER=YES" in mapfile, I cannot get a very high quality
> > rendition of the photo layer in my WMS output.  It looks grainy in areas
> > with solid color and generally a bit "pixelly".  So I have a couple of
> > questions.
> >
> > 1.  Is some loss of image quality an unavoidable side-effect of using
> > Mapserver?
> >
> > 2. If not 1, then are there other tweaks that can be done to further
> > improve the quality of my output?  (Note that I intend to use Tilecache, so
> > maybe slow initial performance may is an acceptable trade off, I dunno.)
> >
> > 3. If yes to 1, then what other open source tools do a better job of
> > rendering photo data?  (I intend to test some of the data in GeoServer, but
> > I haven't done so yet.)
> >
> > Thanks in advance for your feedback.
> >
> > Roger
> >
> > -- _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080502/e7b8d21e/attachment.html
From dylan.beaudette at gmail.com  Fri May  2 17:54:28 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Fri May  2 17:53:00 2008
Subject: [gdal-dev] updates on masking raster data
Message-ID: <200805021454.28689.dylan.beaudette@gmail.com>

anyone know if there has been any work related to this ticket:

http://trac.osgeo.org/gdal/ticket/1599

I was hoping to mask out a large section of raster data while warping, or 
possibly in a second-pass with gdal_translate or the like.

thanks,

Dylan



-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From jluis at ualg.pt  Fri May  2 18:22:38 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri May  2 18:22:45 2008
Subject: [gdal-dev] updates on masking raster data
In-Reply-To: <200805021454.28689.dylan.beaudette@gmail.com>
References: <200805021454.28689.dylan.beaudette@gmail.com>
Message-ID: <481B942E.3020606@ualg.pt>

Dylan Beaudette wrote:
> anyone know if there has been any work related to this ticket:
>
> http://trac.osgeo.org/gdal/ticket/1599
>
> I was hoping to mask out a large section of raster data while warping, or 
> possibly in a second-pass with gdal_translate or the like.
>   

Dylan,
In case you are interested I implemented part of what is asked in that 
ticket in the just released Mirone 1.3.0
We can now clip an image by an arbitrary polygon and create masks from 
the ensemble of plotted polygons (just right click on polygon and select 
what you want).

Joaquim Luis

From warmerdam at pobox.com  Fri May  2 18:33:43 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May  2 18:34:01 2008
Subject: [gdal-dev] updates on masking raster data
In-Reply-To: <200805021454.28689.dylan.beaudette@gmail.com>
References: <200805021454.28689.dylan.beaudette@gmail.com>
Message-ID: <481B96C7.7060905@pobox.com>

Dylan Beaudette wrote:
> anyone know if there has been any work related to this ticket:
> 
> http://trac.osgeo.org/gdal/ticket/1599
> 
> I was hoping to mask out a large section of raster data while warping, or 
> possibly in a second-pass with gdal_translate or the like.

Dylan,

gdal_rasterize can mask off areas of a raster inside or outside of a polygon.
Other than that, nothing has been done to the best of my knowledge.

Best regards.
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dylan.beaudette at gmail.com  Fri May  2 18:54:04 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Fri May  2 18:52:28 2008
Subject: [gdal-dev] updates on masking raster data
In-Reply-To: <481B96C7.7060905@pobox.com>
References: <200805021454.28689.dylan.beaudette@gmail.com>
	<481B96C7.7060905@pobox.com>
Message-ID: <200805021554.04503.dylan.beaudette@gmail.com>

On Friday 02 May 2008, Frank Warmerdam wrote:
> Dylan Beaudette wrote:
> > anyone know if there has been any work related to this ticket:
> >
> > http://trac.osgeo.org/gdal/ticket/1599
> >
> > I was hoping to mask out a large section of raster data while warping, or
> > possibly in a second-pass with gdal_translate or the like.
>
> Dylan,
>
> gdal_rasterize can mask off areas of a raster inside or outside of a
> polygon. Other than that, nothing has been done to the best of my
> knowledge.
>
> Best regards.

thanks for the tip Frank. I actually need to "clip" out (or apply a positive 
mask when translating) a single state's worth of data, from a grid that 
encompasses the Continental US. I was hoping there was a purely GDAL-way to 
do this... without having to resort to GRASS for the raster clipping. Perhaps 
there is a way to do this in python+GDAL...

Cheers,

Dylan

-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From max at geoinova.com  Sat May  3 08:43:45 2008
From: max at geoinova.com (Maksim Sestic)
Date: Sat May  3 08:43:47 2008
Subject: [Gdal-dev] Managed GDAL API (CSharp) - Writing Bitmap to Dataset
Message-ID: <17034804.post@talk.nabble.com>


Hi all,

I'm trying to figure out the opposite way of what GdalReadDirect.cs does,
copying a bitmap back into the instantiated Dataset. Is there any example
related to it?

Here's what I'm trying to do - since GDAL doesn't support raster filters
(i.e. Sharpen, Contrast, etc...) I'm using managed library to perform series
of bitmap manipulations. Then I need to save changed bitmap back into the
existing or newly created in-memory dataset. This is the "workflow":

1) Use managed GDAL API to open raster image file (raster image usually
contains lots of metadata)
2) Leave instantiated Dataset object intact
3) Use direct-read method (as in GdalReadDirect.cs) to get the Bitmap object
out of the Dataset
4) Apply some filters over the Bitmap
5a) Write Bitmap back into the already instantiated Dataset, preserving
metadata structure, or...
5b) Write Bitmap into the newly instantiated Dataset
6) Use managed GDAL Dataset methods to write/flush raster to disk

I'm stuck with step 5). I'm also aware that step 5) would take some
additional resource-wasting but that's OK with me.

Regards,
Maksim Sestic
-- 
View this message in context: http://www.nabble.com/Managed-GDAL-API-%28CSharp%29---Writing-Bitmap-to-Dataset-tp17034804p17034804.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From john.tull at wildnevada.org  Sat May  3 11:40:35 2008
From: john.tull at wildnevada.org (John C. Tull)
Date: Sat May  3 11:40:40 2008
Subject: [gdal-dev] updates on masking raster data
In-Reply-To: <200805021554.04503.dylan.beaudette@gmail.com>
References: <200805021454.28689.dylan.beaudette@gmail.com>
	<481B96C7.7060905@pobox.com>
	<200805021554.04503.dylan.beaudette@gmail.com>
Message-ID: <73F26734-76B0-4B1F-9111-841ABC7C4E97@wildnevada.org>

Dylan,

If you work out an efficient approach to this problem, I would  
appreciate hearing about your solution. This is a common problem for  
many people, I suspect.

Cheers,
John

On May 2, 2008, at 3:54 PM, Dylan Beaudette wrote:

> On Friday 02 May 2008, Frank Warmerdam wrote:
>> Dylan Beaudette wrote:
>>> anyone know if there has been any work related to this ticket:
>>>
>>> http://trac.osgeo.org/gdal/ticket/1599
>>>
>>> I was hoping to mask out a large section of raster data while  
>>> warping, or
>>> possibly in a second-pass with gdal_translate or the like.
>>
>> Dylan,
>>
>> gdal_rasterize can mask off areas of a raster inside or outside of a
>> polygon. Other than that, nothing has been done to the best of my
>> knowledge.
>>
>> Best regards.
>
> thanks for the tip Frank. I actually need to "clip" out (or apply a  
> positive
> mask when translating) a single state's worth of data, from a grid  
> that
> encompasses the Continental US. I was hoping there was a purely GDAL- 
> way to
> do this... without having to resort to GRASS for the raster  
> clipping. Perhaps
> there is a way to do this in python+GDAL...
>
> Cheers,
>
> Dylan
>
> -- 
> Dylan Beaudette
> Soil Resource Laboratory
> http://casoilresource.lawr.ucdavis.edu/
> University of California at Davis
> 530.754.7341
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Sat May  3 14:40:02 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat May  3 14:40:04 2008
Subject: [Gdal-dev] Managed GDAL API (CSharp) - Writing Bitmap to Dataset
In-Reply-To: <17034804.post@talk.nabble.com>
References: <17034804.post@talk.nabble.com>
Message-ID: <f3b73b7d0805031140l30e00939qb170f5f800da21ff@mail.gmail.com>

Hi,

Do you have any specific issues why Band.WriteRaster or
Dataset.WriteRaster  doesn't work for you?
I guess those should work along with the pinned arrays provided by
LockBits pretty well.

Best regards,

Tamas



2008/5/3 Maksim Sestic <max@geoinova.com>:
>
>  Hi all,
>
>  I'm trying to figure out the opposite way of what GdalReadDirect.cs does,
>  copying a bitmap back into the instantiated Dataset. Is there any example
>  related to it?
>
>  Here's what I'm trying to do - since GDAL doesn't support raster filters
>  (i.e. Sharpen, Contrast, etc...) I'm using managed library to perform series
>  of bitmap manipulations. Then I need to save changed bitmap back into the
>  existing or newly created in-memory dataset. This is the "workflow":
>
>  1) Use managed GDAL API to open raster image file (raster image usually
>  contains lots of metadata)
>  2) Leave instantiated Dataset object intact
>  3) Use direct-read method (as in GdalReadDirect.cs) to get the Bitmap object
>  out of the Dataset
>  4) Apply some filters over the Bitmap
>  5a) Write Bitmap back into the already instantiated Dataset, preserving
>  metadata structure, or...
>  5b) Write Bitmap into the newly instantiated Dataset
>  6) Use managed GDAL Dataset methods to write/flush raster to disk
>
>  I'm stuck with step 5). I'm also aware that step 5) would take some
>  additional resource-wasting but that's OK with me.
>
>  Regards,
>  Maksim Sestic
>  --
>  View this message in context: http://www.nabble.com/Managed-GDAL-API-%28CSharp%29---Writing-Bitmap-to-Dataset-tp17034804p17034804.html
>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From michaeljean at ncf.ca  Sun May  4 13:48:37 2008
From: michaeljean at ncf.ca (michael jean)
Date: Sun May  4 14:49:10 2008
Subject: [gdal-dev] Problem selecting subdatasets using gdal_translate.
Message-ID: <1209923317.4180.16.camel@localhost>

Hi,

I'm having difficulty selecting subdatasets using gdal_translate for an
RS2 product to output a TIFF. I get the exact same result for another
RS2 product type SGX...no joy. Can anyone help?


Michael


mjean@sweetpea:~$
gdalinfo /home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml
Driver: RS2/RadarSat 2 XML Product
Files: /home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml
Size is 1783, 6728
Coordinate System is `'
GCP Projection =
GCP[  0]: Id=1, Info=
          (0,0) -> (-60.4078915818154,55.8558673750242,37.5369110107422)
GCP[  1]: Id=2, Info=
          (127.285713,0) ->
(-60.3764463218316,55.8596515099949,37.5369110107422)
.
.
.
.
GCP[239]: Id=240, Info=
          (1782,6727) ->
(-59.8539066643381,55.5760199881447,37.5369110107422)
Metadata:
  PRODUCT_TYPE=SLC
  PIXEL_SPACING=7.98707199e+00
  LINE_SPACING=5.59820700e+00
  BETA_NOUGHT_LUT=lutBeta.xml
  SIGMA_NOUGHT_LUT=lutSigma.xml
  GAMMA_LUT=lutGamma.xml
  MATRIX_REPRESENTATION=SCATTERING
  BEAM_MODE=SQ11
  NEAR_RANGE_INCIDENCE_ANGLE=3.02636204e+01
  FAR_RANGE_INCIDENCE_ANGLE=3.19838181e+01
  SLANT_RANGE_NEAR_EDGE=9.094590416211440e+05
Subdatasets:

SUBDATASET_3_NAME=RADARSAT_2_CALIB:BETA0:/home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml
  SUBDATASET_3_DESC=Beta Nought calibrated

SUBDATASET_2_NAME=RADARSAT_2_CALIB:SIGMA0:/home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml
  SUBDATASET_2_DESC=Sigma Nought calibrated

SUBDATASET_4_NAME=RADARSAT_2_CALIB:GAMMA:/home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml
  SUBDATASET_4_DESC=Gamma calibrated

SUBDATASET_1_NAME=/home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml
  SUBDATASET_1_DESC=Uncalibrated digital numbers
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 6728.0)
Upper Right ( 1783.0,    0.0)
Lower Right ( 1783.0, 6728.0)
Center      (  891.5, 3364.0)
Band 1 Block=1783x294 Type=CInt16, ColorInterp=Undefined
  Metadata:
    POLARIMETRIC_INTERP=HH
Band 2 Block=1783x294 Type=CInt16, ColorInterp=Undefined
  Metadata:
    POLARIMETRIC_INTERP=VV
Band 3 Block=1783x294 Type=CInt16, ColorInterp=Undefined
  Metadata:
    POLARIMETRIC_INTERP=HV
Band 4 Block=1783x294 Type=CInt16, ColorInterp=Undefined
  Metadata:
    POLARIMETRIC_INTERP=VH
mjean@sweetpea:~$
gdal_translate /home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml /home/mjean/Desktop/image.tif
Input file contains subdatasets. Please, select one of them for reading.
mjean@sweetpea:~$ gdal_translate
RADARSAT_2_CALIB:BETA0:/home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml /home/mjean/Desktop/image.tif
Input file contains subdatasets. Please, select one of them for reading.
mjean@sweetpea:~$ gdal_translate
RADARSAT_2_CALIB:SIGMA0:/home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml /home/mjean/Desktop/image.tif
Input file contains subdatasets. Please, select one of them for reading.
mjean@sweetpea:~$ gdal_translate
RADARSAT_2_CALIB:GAMMA:/home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml /home/mjean/Desktop/image.tif
Input file contains subdatasets. Please, select one of them for reading.


From warmerdam at pobox.com  Sun May  4 16:56:31 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun May  4 16:56:50 2008
Subject: [gdal-dev] Problem selecting subdatasets using gdal_translate.
In-Reply-To: <1209923317.4180.16.camel@localhost>
References: <1209923317.4180.16.camel@localhost>
Message-ID: <481E22FF.7060105@pobox.com>

michael jean wrote:
> Hi,
> 
> I'm having difficulty selecting subdatasets using gdal_translate for an
> RS2 product to output a TIFF. I get the exact same result for another
> RS2 product type SGX...no joy. Can anyone help?
...
> mjean@sweetpea:~$ gdal_translate
> RADARSAT_2_CALIB:BETA0:/home/mjean/image_products/PK5369_DK179_RS2_OK656_PK5369_DK179_Q11_01205_20080307_213751_HH_VV_HV_VH_SLC/product.xml /home/mjean/Desktop/image.tif
> Input file contains subdatasets. Please, select one of them for reading.

Michael,

I'm surprised to see this.  It seems to suggest that the subdatasets
also have subdataset metadata which would be confusing to gdal_translate.

I tried a dataset here and it seemed to work ok.

gdal_translate 
RADARSAT_2_CALIB:SIGMA0:/usr3/data/polarmetric/rs2/SB_DUAL_S7_SLC_2004_07_15_13_53_23/product.xml 
~/out.tif
...10...20...30...40...50...60...70...80...90...100 - done.

Are you using GDAL 1.5.x or GDAL trunk?  I see a few fixes have been applied
in trunk, so I would encourage you to try that.

To be honest, I didn't know all this subdataset stuff existed in this
driver.  I gather it was added by Phil or someone else.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From max at geoinova.com  Mon May  5 10:46:25 2008
From: max at geoinova.com (Maksim Sestic)
Date: Mon May  5 10:46:27 2008
Subject: [Gdal-dev] VS.NET 2005 - Bulding libecwj2-3.3 from source
Message-ID: <17063302.post@talk.nabble.com>


Hi all,

I'm trying to figure out how to build libecwj2-3.3 from source, using VS.NET
2005. Source archive downloaded from ERMapper site is
ImageCompressionSDKSourceCode3.3Setup_20070509.zip. Since C/C++ is not my
native dev platform, I'm stuck with compiler reporting missing winhttp.h
header file. 

Is there any suggestion what steps to take to actually build libecwj2-3.3
from source? :-)

Regards,
Maksim Sestic




-- 
View this message in context: http://www.nabble.com/VS.NET-2005---Bulding-libecwj2-3.3-from-source-tp17063302p17063302.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mateusz at loskot.net  Mon May  5 11:05:28 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon May  5 11:05:34 2008
Subject: [Gdal-dev] VS.NET 2005 - Bulding libecwj2-3.3 from source
In-Reply-To: <17063302.post@talk.nabble.com>
References: <17063302.post@talk.nabble.com>
Message-ID: <481F2238.8040009@loskot.net>

Maksim Sestic wrote:
> Hi all,
> 
> I'm trying to figure out how to build libecwj2-3.3 from source,
 > using VS.NET 2005.

Maksim,

There is not such compiler. There is Visual Studio .NET 2003 (Visual C++ 
7.1) or Visual Studio 2005 (Visual C++ 8.0).
So, which one you use?

> Source archive downloaded from ERMapper site is
> ImageCompressionSDKSourceCode3.3Setup_20070509.zip. Since C/C++ is not my
> native dev platform, I'm stuck with compiler reporting missing winhttp.h
> header file. 

Have you installed Microsoft Platform SDK?
Please, give the exact command you used and I'll try to
reproduce it and see if works for me.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From c.schitka at gmail.com  Mon May  5 11:17:48 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Mon May  5 11:17:50 2008
Subject: [gdal-dev] Building OGDI
Message-ID: <e66a4dbf0805050817u74ae6ca7l47ba8bc974793578@mail.gmail.com>

Hi,

Does anyone know of or can anyone point me at build instructions for
building OGDI-beta2 on Windows using any of the dev studio/command prompt
shells environments. I really don't care what version of MS DevStudio I use
I just need some build instructions that actually work on Windows.

Please help.
Courtney
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080505/9b2590e4/attachment.html
From mateusz at loskot.net  Mon May  5 11:49:30 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon May  5 11:49:40 2008
Subject: [gdal-dev] Building OGDI
In-Reply-To: <e66a4dbf0805050817u74ae6ca7l47ba8bc974793578@mail.gmail.com>
References: <e66a4dbf0805050817u74ae6ca7l47ba8bc974793578@mail.gmail.com>
Message-ID: <481F2C8A.7050306@loskot.net>

Courtney Schitka wrote:
> Hi,
> 
> Does anyone know of or can anyone point me at build instructions for
> building OGDI-beta2 on Windows using any of the dev studio/command prompt
> shells environments. I really don't care what version of MS DevStudio I use
> I just need some build instructions that actually work on Windows.

Have you tried to follow the instructions from the OGDI website?

http://ogdi.sourceforge.net/build.html

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From c.schitka at gmail.com  Mon May  5 12:02:46 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Mon May  5 12:02:53 2008
Subject: [gdal-dev] Building OGDI
In-Reply-To: <481F2C8A.7050306@loskot.net>
References: <e66a4dbf0805050817u74ae6ca7l47ba8bc974793578@mail.gmail.com>
	<481F2C8A.7050306@loskot.net>
Message-ID: <e66a4dbf0805050902l71f81808o9179503a952b8de9@mail.gmail.com>

Hi Mateusz,

Yes those were the first things I tried before writing the list. When I try
and build using the instructions off the website..... I get
make: *** No rule to make target
C:/downloads/OGDI_NEW/ogdi3.2.0.beta1/ogdi-3.2.0.beta1/config/common.mak.
Stop. So I was wondering if anyone else had seen this behaviour and knew
what the problem was.

Courtney



On Mon, May 5, 2008 at 11:49 AM, Mateusz Loskot <mateusz@loskot.net> wrote:

>  Courtney Schitka wrote:
>
> > Hi,
> >
> > Does anyone know of or can anyone point me at build instructions for
> > building OGDI-beta2 on Windows using any of the dev studio/command
> > prompt
> > shells environments. I really don't care what version of MS DevStudio I
> > use
> > I just need some build instructions that actually work on Windows.
> >
>
> Have you tried to follow the instructions from the OGDI website?
>
> http://ogdi.sourceforge.net/build.html
>
> Greetings
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080505/60c46fab/attachment.html
From mchapman at texelinc.com  Mon May  5 12:31:51 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Mon May  5 12:31:57 2008
Subject: [gdal-dev] Building OGDI
In-Reply-To: <e66a4dbf0805050902l71f81808o9179503a952b8de9@mail.gmail.com>
References: <e66a4dbf0805050817u74ae6ca7l47ba8bc974793578@mail.gmail.com>	<481F2C8A.7050306@loskot.net>
	<e66a4dbf0805050902l71f81808o9179503a952b8de9@mail.gmail.com>
Message-ID: <006001c8aecd$862f88d0$928e9a70$@com>

Download Cygwin and use that to compile it on windows.  That's what I do and
it works great.

 

Martin

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Courtney Schitka
Sent: Monday, May 05, 2008 10:03 AM
To: Mateusz Loskot
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Building OGDI

 

Hi Mateusz, 

 

Yes those were the first things I tried before writing the list. When I try
and build using the instructions off the website..... I get 

make: *** No rule to make target
C:/downloads/OGDI_NEW/ogdi3.2.0.beta1/ogdi-3.2.0.beta1/config/common.mak.
Stop. So I was wondering if anyone else had seen this behaviour and knew
what the problem was. 

 

Courtney 



 

On Mon, May 5, 2008 at 11:49 AM, Mateusz Loskot <mateusz@loskot.net> wrote:

Courtney Schitka wrote:

Hi,

Does anyone know of or can anyone point me at build instructions for
building OGDI-beta2 on Windows using any of the dev studio/command prompt
shells environments. I really don't care what version of MS DevStudio I use
I just need some build instructions that actually work on Windows.

 

Have you tried to follow the instructions from the OGDI website?

http://ogdi.sourceforge.net/build.html

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net <http://mateusz.loskot.net/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080505/2b82f63a/attachment.html
From c.schitka at gmail.com  Mon May  5 12:35:58 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Mon May  5 12:36:01 2008
Subject: [gdal-dev] Building OGDI
In-Reply-To: <006001c8aecd$862f88d0$928e9a70$@com>
References: <e66a4dbf0805050817u74ae6ca7l47ba8bc974793578@mail.gmail.com>
	<481F2C8A.7050306@loskot.net>
	<e66a4dbf0805050902l71f81808o9179503a952b8de9@mail.gmail.com>
	<006001c8aecd$862f88d0$928e9a70$@com>
Message-ID: <e66a4dbf0805050935m7bc46061ifa0c3838462aa4ef@mail.gmail.com>

Martin,

That's what I am doing. Here's the procedure I am following.

1. Launch a VS Command Shell.
2. Run VCVars32.bat to set the environment
3. Start Cygwin
4. Change to the directory containing my sources
5. Set up the variables via EXPORT command
6. Run make

Then I get that paritcular message as I was talking about earlier. Is this
how you compile it ?

FYI. When I edit the varwin32.bat file with the appropriate paths etc. Then
Run it, it starts a bash shell via cygwin and I get the same problem. Not
that important I am just stating it incase that's the next thing that is
suggested. I've been down that road.

Court



On Mon, May 5, 2008 at 12:31 PM, Martin Chapman <mchapman@texelinc.com>
wrote:

>  Download Cygwin and use that to compile it on windows.  That's what I do
> and it works great.
>
>
>
> Martin
>
>
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Courtney Schitka
> *Sent:* Monday, May 05, 2008 10:03 AM
> *To:* Mateusz Loskot
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Building OGDI
>
>
>
> Hi Mateusz,
>
>
>
> Yes those were the first things I tried before writing the list. When I
> try and build using the instructions off the website..... I get
>
> make: *** No rule to make target
> C:/downloads/OGDI_NEW/ogdi3.2.0.beta1/ogdi-3.2.0.beta1/config/common.mak.
> Stop. So I was wondering if anyone else had seen this behaviour and knew
> what the problem was.
>
>
>
> Courtney
>
>
>
>
>
> On Mon, May 5, 2008 at 11:49 AM, Mateusz Loskot <mateusz@loskot.net>
> wrote:
>
> Courtney Schitka wrote:
>
> Hi,
>
> Does anyone know of or can anyone point me at build instructions for
> building OGDI-beta2 on Windows using any of the dev studio/command prompt
> shells environments. I really don't care what version of MS DevStudio I
> use
> I just need some build instructions that actually work on Windows.
>
>
>
> Have you tried to follow the instructions from the OGDI website?
>
> http://ogdi.sourceforge.net/build.html
>
> Greetings
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080505/084bd1ac/attachment.html
From mchapman at texelinc.com  Mon May  5 12:41:19 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Mon May  5 12:41:25 2008
Subject: [gdal-dev] Building OGDI
In-Reply-To: <e66a4dbf0805050935m7bc46061ifa0c3838462aa4ef@mail.gmail.com>
References: <e66a4dbf0805050817u74ae6ca7l47ba8bc974793578@mail.gmail.com>	
	<481F2C8A.7050306@loskot.net>	
	<e66a4dbf0805050902l71f81808o9179503a952b8de9@mail.gmail.com>	
	<006001c8aecd$862f88d0$928e9a70$@com>
	<e66a4dbf0805050935m7bc46061ifa0c3838462aa4ef@mail.gmail.com>
Message-ID: <006e01c8aece$d8b18df0$8a14a9d0$@com>

When you installed Cygwin did you select all the options for the compiler?
I had to go back to the cygwin install and reinstall before it worked for me
because the first time I installed it I did not install everything.

 

Martin

 

From: Courtney Schitka [mailto:c.schitka@gmail.com] 
Sent: Monday, May 05, 2008 10:36 AM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Building OGDI

 

Martin, 

 

That's what I am doing. Here's the procedure I am following. 

 

1. Launch a VS Command Shell. 

2. Run VCVars32.bat to set the environment 

3. Start Cygwin 

4. Change to the directory containing my sources

5. Set up the variables via EXPORT command

6. Run make 

 

Then I get that paritcular message as I was talking about earlier. Is this
how you compile it ? 

 

FYI. When I edit the varwin32.bat file with the appropriate paths etc. Then
Run it, it starts a bash shell via cygwin and I get the same problem. Not
that important I am just stating it incase that's the next thing that is
suggested. I've been down that road. 


Court



 

On Mon, May 5, 2008 at 12:31 PM, Martin Chapman <mchapman@texelinc.com>
wrote:

Download Cygwin and use that to compile it on windows.  That's what I do and
it works great.

 

Martin

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Courtney Schitka
Sent: Monday, May 05, 2008 10:03 AM
To: Mateusz Loskot
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Building OGDI

 

Hi Mateusz, 

 

Yes those were the first things I tried before writing the list. When I try
and build using the instructions off the website..... I get 

make: *** No rule to make target
C:/downloads/OGDI_NEW/ogdi3.2.0.beta1/ogdi-3.2.0.beta1/config/common.mak.
Stop. So I was wondering if anyone else had seen this behaviour and knew
what the problem was. 

 

Courtney 



 

On Mon, May 5, 2008 at 11:49 AM, Mateusz Loskot <mateusz@loskot.net> wrote:

Courtney Schitka wrote:

Hi,

Does anyone know of or can anyone point me at build instructions for
building OGDI-beta2 on Windows using any of the dev studio/command prompt
shells environments. I really don't care what version of MS DevStudio I use
I just need some build instructions that actually work on Windows.

 

Have you tried to follow the instructions from the OGDI website?

http://ogdi.sourceforge.net/build.html

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net <http://mateusz.loskot.net/> 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080505/ff4f47e1/attachment-0001.html
From jeffmckenna at gmail.com  Mon May  5 13:38:30 2008
From: jeffmckenna at gmail.com (Jeff McKenna)
Date: Mon May  5 13:38:35 2008
Subject: [Gdal-dev] VS.NET 2005 - Bulding libecwj2-3.3 from source
In-Reply-To: <17063302.post@talk.nabble.com>
References: <17063302.post@talk.nabble.com>
Message-ID: <AFD4136F-1EC8-46AA-9A76-CA8EA96183C4@gmail.com>

> Is there any suggestion what steps to take to actually build  
> libecwj2-3.3
> from source? :-)
>

Yes.  I recently went through your exact issues, and posted my notes  
on the FWTools list:

http://lists.maptools.org/pipermail/fwtools/2008-April/001213.html


-jeff



From tutey at o2.pl  Mon May  5 14:47:53 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Mon May  5 14:48:01 2008
Subject: [gdal-dev] Re: SRS stuff broken in GDAL and PROJ
In-Reply-To: <4810D8A6.8070705@pobox.com>
References: <47F69506.3010207@o2.pl> <47FF8049.3050201@duif.net>
	<4800B7D9.6030307@duif.net>
	<200804131343.01414.marco.hugentobler@karto.baug.ethz.ch>
	<d368056f0804140538k1298c472m57ddcc08c7a8a6ce@mail.gmail.com>
	<48079C6E.1060508@o2.pl> <4807A225.1000404@pobox.com>
	<4807AD5B.1080409@o2.pl> <480F8167.7080908@o2.pl>
	<480F84F0.2030108@pobox.com> <48103B54.3020101@o2.pl>
	<4810D8A6.8070705@pobox.com>
Message-ID: <481F5659.7050806@o2.pl>

As the attachments were too big for the ML I'm re-sending the message
with the list of control points and script attached only.

Frank Warmerdam pisze:
> Maciej Sieczka wrote:

>> Ouch. So SRS stuff is pretty much broken in GDAL and PROJ. I 
>> subscribed to the ticket and I'd be happy to help with testing.

> I disagree with the assessment that things are broken.  They are just
>  a little bent. Numerically the differences are insignificant.

Frank,

So I checked and it looks that, unfortunately, things really are broken.

I have compared the results of re-projection from ll/WGS84 to each EPSG
code common for PROJ 4.5 and 4.6, using proj4 strings as present in the
"epsg" file.

Test points were obtained from the EPSG dataset v6.15 [1] using the
following SQL query on the SRS's area-of-use boundaries:

SELECT coord_ref_sys_code, area_west_bound_lon, area_south_bound_lat
FROM epsg_coordinatereferencesystem, epsg_area WHERE
epsg_coordinatereferencesystem.area_of_use_code=epsg_area.area_code AND
epsg_coordinatereferencesystem.show_crs=1 AND
epsg_coordinatereferencesystem.deprecated=0;

This gave a list of points located in the SW corner of each SRS's area
of use. The list is attached as epsg_control_pts.txt.zip.

The "epsg" files were extracted from PROJ.4 4.5 and 4.6 source code, and
named "epsg.45", "epsg.46", respectively.

These files were used as an input for the attached script,
proj-epsg_45vs46.sh. It's output are 2 files: epsg.45.result,
epsg.46.result. When comparing them it is clear that there are
numerically significant differences between epsg files coming with
PROJ.4 4.5 and 4.6.

Out of the 2865 common EPSG codes, proj4 strings of 133 of them are
different enough between the epsg files of PROJ 4.5 and 4.6 to result in
re-projection errors of few centimeters most of the time, about a meter
in several cases to as much as kilometers in few. I would call this a
critical issue.

> The issue is with comparing string representations of coordinate 
> systems.

That's another big issue.

Maciek

[1]http://www.epsg.org/databases/Discv6_15sql-PosgreSql.html

-------------- next part --------------
A non-text attachment was scrubbed...
Name: epsg_control_pts.txt.zip
Type: application/zip
Size: 18576 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080505/7432e406/epsg_control_pts.txt-0001.zip
-------------- next part --------------
A non-text attachment was scrubbed...
Name: proj-epsg_45vs46.sh
Type: application/x-sh
Size: 896 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080505/7432e406/proj-epsg_45vs46-0001.sh
From warmerdam at pobox.com  Mon May  5 14:57:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May  5 14:57:27 2008
Subject: [gdal-dev] Re: SRS stuff broken in GDAL and PROJ
In-Reply-To: <481F5659.7050806@o2.pl>
References: <47F69506.3010207@o2.pl> <47FF8049.3050201@duif.net>
	<4800B7D9.6030307@duif.net>
	<200804131343.01414.marco.hugentobler@karto.baug.ethz.ch>
	<d368056f0804140538k1298c472m57ddcc08c7a8a6ce@mail.gmail.com>
	<48079C6E.1060508@o2.pl> <4807A225.1000404@pobox.com>
	<4807AD5B.1080409@o2.pl> <480F8167.7080908@o2.pl>
	<480F84F0.2030108@pobox.com> <48103B54.3020101@o2.pl>
	<4810D8A6.8070705@pobox.com> <481F5659.7050806@o2.pl>
Message-ID: <481F587E.2080806@pobox.com>

Maciej Sieczka wrote:
> Out of the 2865 common EPSG codes, proj4 strings of 133 of them are
> different enough between the epsg files of PROJ 4.5 and 4.6 to result in
> re-projection errors of few centimeters most of the time, about a meter
> in several cases to as much as kilometers in few. I would call this a
> critical issue.

Maciej,

I am presuming that the ones with large differences are due to the fact
that PROJ 4.6.0 does *not* apply a change-of-ellipse shift when no
datum to wgs84 mapping information is available.

I would suggest you isolate 2-3 examples out of your list that you are
confident are significant issues and we can discuss them in more detail.
Please ensure that you have worked out whether the significant difference
is in the PROJ.4 string generated for the epsg file, or whether it is
the behavior of PROJ.4 between 4.5 and 4.6 that you think is responsible.

It is important to isolate particular issues and try to understand them
deeply.

As you likely know Andrey has committed a fix in the last day or two
for CPLAtof() and with this change we should be able to generate an
epsg init file without the slight round off differences.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From thare at usgs.gov  Mon May  5 15:22:19 2008
From: thare at usgs.gov (Trent M Hare)
Date: Mon May  5 15:37:31 2008
Subject: [gdal-dev] offset and scale
Message-ID: <OF220E5FCE.CC9071A6-ON07257440.0069A81A-07257440.006A6A33@usgs.gov>

I have a set of existing 16bit geoTiffs.  While converting there was no 
"Offset" or "Scale" in the converted image. I now need to add a Offset and 
Scale values postmortem such that at least the label is correct.  Is there 
a clever way to do this on the existing images or even maybe via a created 
VRT format and a convert again?

thanks,
Trent

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080505/deb97322/attachment.html
From warmerdam at pobox.com  Mon May  5 15:51:09 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May  5 15:51:26 2008
Subject: [gdal-dev] offset and scale
In-Reply-To: <OF220E5FCE.CC9071A6-ON07257440.0069A81A-07257440.006A6A33@usgs.gov>
References: <OF220E5FCE.CC9071A6-ON07257440.0069A81A-07257440.006A6A33@usgs.gov>
Message-ID: <481F652D.1000608@pobox.com>

Trent M Hare wrote:
> 
> I have a set of existing 16bit geoTiffs.  While converting there was no 
>  "Offset" or "Scale" in the converted image. I now need to add a Offset 
> and Scale values postmortem such that at least the label is correct.  Is 
> there a clever way to do this on the existing images or even maybe via a 
> created VRT format and a convert again?

Trent,

You can add scale and offset in a .VRT file using the <Offset> and
<Scale> tags per the VRT tutorial.

eg.

gdal_translate abc.tif -of VRT abc.vrt
... edit abc.vrt ...
... insert something like the following as children of <VRTRasterBand> ...
     <Scale>0.25</Scale>
     <Offset>100</Offset>

gdal_translate abc.vrt abc2.tif


Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From tutey at o2.pl  Tue May  6 02:00:36 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Tue May  6 02:00:40 2008
Subject: [gdal-dev] Re: SRS stuff broken in GDAL and PROJ
In-Reply-To: <481F587E.2080806@pobox.com>
References: <47F69506.3010207@o2.pl> <47FF8049.3050201@duif.net>
	<4800B7D9.6030307@duif.net>
	<200804131343.01414.marco.hugentobler@karto.baug.ethz.ch>
	<d368056f0804140538k1298c472m57ddcc08c7a8a6ce@mail.gmail.com>
	<48079C6E.1060508@o2.pl> <4807A225.1000404@pobox.com>
	<4807AD5B.1080409@o2.pl> <480F8167.7080908@o2.pl>
	<480F84F0.2030108@pobox.com> <48103B54.3020101@o2.pl>
	<4810D8A6.8070705@pobox.com> <481F5659.7050806@o2.pl>
	<481F587E.2080806@pobox.com>
Message-ID: <481FF404.60402@o2.pl>

Frank Warmerdam pisze:
> Maciej Sieczka wrote:

>> Out of the 2865 common EPSG codes, proj4 strings of 133 of them are
>>  different enough between the epsg files of PROJ 4.5 and 4.6 to
>> result in re-projection errors of few centimeters most of the time,
>> about a meter in several cases to as much as kilometers in few. I
>> would call this a critical issue.

> I am presuming that the ones with large differences are due to the
> fact that PROJ 4.6.0 does *not* apply a change-of-ellipse shift when
> no datum to wgs84 mapping information is available.

Right. After making correction for that, 120 SRSs in the epsg file of
PROJ 4.6 still have errors significant enough to cause an error of few
decimeters, compared to epsg file of PROJ 4.5.

> I would suggest you isolate 2-3 examples out of your list that you
> are confident are significant issues and we can discuss them in more
> detail.

All 120 are significant. Please pick for testing the one you like. I'm
attaching a list of test points I used - 120pts.txt. They are in
ll/WGS84 coordinates. The file is organized as follows:

---
espg_no easting northing
...
---

Respective proj4 strings, derived from the epsg file of PROJ 4.5 and
4.6, followed by cs2cs result obtained with both proj4 strings per each
pair of coordinates is attached as 120errors.txt. The file is organized
as follows:

---
epsg.45:<epsg_no> proj4 string derived from epsg file of PROJ 4.5
epsg.46:<same_epsg_no> relevant proj4 string from epsg file of PROJ 4.6
result.45: re-projection result from ll/WGS84 using the 4.5 proj4 string
result.46: re-projection result from ll/WGS84 using the 4.6 proj4 string

...
---

> Please ensure that you have worked out whether the significant
> difference is in the PROJ.4 string generated for the epsg file, or
> whether it is the behavior of PROJ.4 between 4.5 and 4.6 that you
> think is responsible.

I used exclusively PROJ 4.6 in the test. Only the epsg file alone was
taken from PROJ 4.5 to compare it with PROJ 4.6 one.

> As you likely know Andrey has committed a fix in the last day or two 
> for CPLAtof()

That's excellent. There is no mention of it in the relevant Trac ticket
tough [1].

Cheers
Maciek

[1]http://trac.osgeo.org/gdal/ticket/2036

-------------- next part --------------
A non-text attachment was scrubbed...
Name: 120.zip
Type: application/zip
Size: 6077 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080506/a668a2bc/120.zip
From armin.burger at gmx.net  Tue May  6 04:46:19 2008
From: armin.burger at gmx.net (Armin Burger)
Date: Tue May  6 04:46:22 2008
Subject: [gdal-dev] GDAL NG Python bindings and Histogram functions
Message-ID: <20080506084619.135450@gmx.net>

Hi 

in the new GDAL Python bindings all Histogram functions seem to have disappeared (see also ticket #2150). Is there a possibility to get them back or is it necessary to compile GDAL with the 'old style' bindings? 

Best regards

Armin
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
From woodbri at swoodbridge.com  Tue May  6 10:32:31 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Tue May  6 09:32:02 2008
Subject: [gdal-dev] CDF library vulnerability
Message-ID: <48206BFF.2070204@swoodbridge.com>

This might be old news to you guys, but just in case it isn't:

http://blogs.zdnet.com/security/?p=1074&tag=nl.e622


-Steve
From pat.blair at bullberrysystems.com  Tue May  6 11:16:20 2008
From: pat.blair at bullberrysystems.com (Pat Blair)
Date: Tue May  6 11:17:26 2008
Subject: [gdal-dev] Python bindings and the Postgres driver
Message-ID: <F6FF338A2CB58848BB306E61298321600523959D@mail-21ps.atlarge.net>

Hello.  I am using GDAL/OGR from Python 2.5 and believe that I am having
trouble using the PostgreSQL driver.  (The problem I am having is
similar or identical to one posted previously, but for which I can find
no answer:
http://www.nabble.com/gdal-Python-bindings-and-postgis-question-td157056
50.html.)
 
I am using Python 2.5 on Windows.  I have C:\gdalwin32-1.5 in place, and
have the Postgres drivers in C:\gdalwin32-1.5\bin\gdalplugins
(libpq.dll, and ogr_PG.dll).  I have also installed the Python bindings.
When I run the ogrinfo utility from a command line, I can use the
Postgres driver with no apparent problem.
 
For example, when I run...
 
ogrinfo PG:"host=localhost user=postgres password=sergtsop
dbname=arcturus" -al -summary
 
I get results...
 
INFO: Open of `PG:host=localhost user=postgres password=password
dbname=mydb'
      using driver `PostgreSQL' successful.
 
Layer name: streets
Geometry: Line String
Feature Count: 19187
Extent: (-77.116646, 38.793179) - (-76.909538, 38.995243)
Layer SRS WKT: 
[...etc...]
 
However, from within Python, the ogr module doesn't seem to be able to
find the 'PostgreSQL' driver.  Below I have pasted in text from my
Python console.  You can see that I can get the 'ESRI Shapefile' driver;
but if I try to get 'PostgreSQL' driver, I get None back.
 
>>> from osgeo import ogr
>>> ogrEsriDriver = ogr.GetDriverByName('ESRI Shapefile')
>>> print ogrEsriDriver
<osgeo.ogr.Driver; proxy of <Swig Object of type 'OGRDriverShadow *' at
0xaf3a78...
>>> ogrPgDriver = ogr.GetDriverByName('PostgreSQL')
>>> print ogrPgDriver
None
>>>
 
So, I believe that GDAL/OGR are installed and working, and that the
Python bindings are generally working.  But is there another step I must
take to help the Python bindings find the Postgres driver?
 
Many thanks,
Pat
 
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080506/068b4dc1/attachment-0001.html
From hobu.inc at gmail.com  Tue May  6 11:35:14 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue May  6 11:35:22 2008
Subject: [gdal-dev] Python bindings and the Postgres driver
In-Reply-To: <F6FF338A2CB58848BB306E61298321600523959D@mail-21ps.atlarge.net>
References: <F6FF338A2CB58848BB306E61298321600523959D@mail-21ps.atlarge.net>
Message-ID: <DC4A196D-0401-443C-985A-BF93F0000DCF@gmail.com>


On May 6, 2008, at 10:16 AM, Pat Blair wrote:

> Hello.  I am using GDAL/OGR from Python 2.5 and believe that I am  
> having trouble using the PostgreSQL driver.  (The problem I am  
> having is similar or identical to one posted previously, but for  
> which I can find no answer: http://www.nabble.com/gdal-Python-bindings-and-postgis-question-td15705650.html.)
>
> I am using Python 2.5 on Windows.  I have C:\gdalwin32-1.5 in place,  
> and have the Postgres drivers in C:\gdalwin32-1.5\bin\gdalplugins  
> (libpq.dll, and ogr_PG.dll).  I have also installed the Python  
> bindings.  When I run the ogrinfo utility from a command line, I can  
> use the Postgres driver with no apparent problem.
>
> For example, when I run...
>
> ogrinfo PG:"host=localhost user=postgres password=sergtsop  
> dbname=arcturus" -al -summary
>
> I get results...
>
> INFO: Open of `PG:host=localhost user=postgres password=password  
> dbname=mydb'
>       using driver `PostgreSQL' successful.
>
> Layer name: streets
> Geometry: Line String
> Feature Count: 19187
> Extent: (-77.116646, 38.793179) - (-76.909538, 38.995243)
> Layer SRS WKT:
> [...etc...]
>
> However, from within Python, the ogr module doesn't seem to be able  
> to find the 'PostgreSQL' driver.  Below I have pasted in text from  
> my Python console.  You can see that I can get the 'ESRI Shapefile'  
> driver; but if I try to get 'PostgreSQL' driver, I get None back.
>
> >>> from osgeo import ogr
> >>> ogrEsriDriver = ogr.GetDriverByName('ESRI Shapefile')
> >>> print ogrEsriDriver
> <osgeo.ogr.Driver; proxy of <Swig Object of type 'OGRDriverShadow *'  
> at 0xaf3a78...
> >>> ogrPgDriver = ogr.GetDriverByName('PostgreSQL')
> >>> print ogrPgDriver
> None
> >>>
>
> So, I believe that GDAL/OGR are installed and working, and that the  
> Python bindings are generally working.  But is there another step I  
> must take to help the Python bindings find the Postgres driver?
>

Pat,

I think you need to set the GDAL_DRIVER_PATH environment variable  
*before* Python is run so that GDAL can know where to find its plugins.

Running from a cmd.exe...

set GDAL_DRIVER_PATH=C:\gdalwin32-1.5\bin\gdalplugins
c:\Python25\python.exe
 >>> from osgeo import ogr
 >>> ogrPgDriver = ogr.GetDriverByName('PostgreSQL')
 >>> print ogrPgDriver

Alternatively, setting this as a system environment variable may be  
one way to avoid having to manually set it every time you wish to run  
Python.

Hope this helps,

Howard
From pat.blair at bullberrysystems.com  Tue May  6 11:45:58 2008
From: pat.blair at bullberrysystems.com (Pat Blair)
Date: Tue May  6 11:46:00 2008
Subject: [gdal-dev] Python bindings and the Postgres driver
In-Reply-To: <DC4A196D-0401-443C-985A-BF93F0000DCF@gmail.com>
Message-ID: <F6FF338A2CB58848BB306E6129832160052395DB@mail-21ps.atlarge.net>

Please accept my gratitude for your kind attention.  Setting the
GDAL_DRIVER_PATH environment variable as you suggested was indeed the
answer. 

Many thanks,
Pat

-----Original Message-----
From: Howard Butler [mailto:hobu.inc@gmail.com] 
Sent: Tuesday, May 06, 2008 10:35 AM
To: Pat Blair
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Python bindings and the Postgres driver


On May 6, 2008, at 10:16 AM, Pat Blair wrote:

> Hello.  I am using GDAL/OGR from Python 2.5 and believe that I am 
> having trouble using the PostgreSQL driver.  (The problem I am having 
> is similar or identical to one posted previously, but for which I can 
> find no answer: 
> http://www.nabble.com/gdal-Python-bindings-and-postgis-question-td1570
> 5650.html.)
>
> I am using Python 2.5 on Windows.  I have C:\gdalwin32-1.5 in place, 
> and have the Postgres drivers in C:\gdalwin32-1.5\bin\gdalplugins 
> (libpq.dll, and ogr_PG.dll).  I have also installed the Python 
> bindings.  When I run the ogrinfo utility from a command line, I can 
> use the Postgres driver with no apparent problem.
>
> For example, when I run...
>
> ogrinfo PG:"host=localhost user=postgres password=sergtsop 
> dbname=arcturus" -al -summary
>
> I get results...
>
> INFO: Open of `PG:host=localhost user=postgres password=password 
> dbname=mydb'
>       using driver `PostgreSQL' successful.
>
> Layer name: streets
> Geometry: Line String
> Feature Count: 19187
> Extent: (-77.116646, 38.793179) - (-76.909538, 38.995243) Layer SRS 
> WKT:
> [...etc...]
>
> However, from within Python, the ogr module doesn't seem to be able to

> find the 'PostgreSQL' driver.  Below I have pasted in text from my 
> Python console.  You can see that I can get the 'ESRI Shapefile'
> driver; but if I try to get 'PostgreSQL' driver, I get None back.
>
> >>> from osgeo import ogr
> >>> ogrEsriDriver = ogr.GetDriverByName('ESRI Shapefile') print 
> >>> ogrEsriDriver
> <osgeo.ogr.Driver; proxy of <Swig Object of type 'OGRDriverShadow *'  
> at 0xaf3a78...
> >>> ogrPgDriver = ogr.GetDriverByName('PostgreSQL') print ogrPgDriver
> None
> >>>
>
> So, I believe that GDAL/OGR are installed and working, and that the  
> Python bindings are generally working.  But is there another step I  
> must take to help the Python bindings find the Postgres driver?
>

Pat,

I think you need to set the GDAL_DRIVER_PATH environment variable  
*before* Python is run so that GDAL can know where to find its plugins.

Running from a cmd.exe...

set GDAL_DRIVER_PATH=C:\gdalwin32-1.5\bin\gdalplugins
c:\Python25\python.exe
 >>> from osgeo import ogr
 >>> ogrPgDriver = ogr.GetDriverByName('PostgreSQL')
 >>> print ogrPgDriver

Alternatively, setting this as a system environment variable may be  
one way to avoid having to manually set it every time you wish to run  
Python.

Hope this helps,

Howard
From jaadfoo at gmail.com  Tue May  6 15:55:34 2008
From: jaadfoo at gmail.com (Jamie Adams)
Date: Tue May  6 15:55:37 2008
Subject: [gdal-dev] hdf5 and GetMetadata in python
Message-ID: <f4339510805061255x54788dfayb204fb11b6608dcb@mail.gmail.com>

Hello all,

I've got an hdf5 file with the corner coordinates stored as metadata, each
subdataset returns the same..  Here a section of what gdalinfo returns:

  214_584:south=17
  214_584:north=17.5
  214_584:east=292.5
  214_584:west=292
  214_585:south=17
  214_585:north=17.5
  214_585:east=293
  214_585:west=292.5
  214_586:south=17
  214_586:north=17.5
  214_586:east=293.5
  214_586:west=293

When I try to access this data via python using GetMetadata, I'm only
getting the west coordinates:

'214_586': 'west=293 ', '214_587': 'west=293.5 ', '214_584': 'west=292 '

So it looks like each subsequent entry with the same key gets overwritten in
the dictionary.  Since I need all the values returned, is there a way to get
this info within python?

Thanks,

Jamie Adams
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080506/ef8d5d67/attachment.html
From max at geoinova.com  Wed May  7 06:35:54 2008
From: max at geoinova.com (Maksim Sestic)
Date: Wed May  7 06:35:55 2008
Subject: [Gdal-dev] VS.NET 2005 - Bulding libecwj2-3.3 from source
In-Reply-To: <17063302.post@talk.nabble.com>
References: <17063302.post@talk.nabble.com>
Message-ID: <17101824.post@talk.nabble.com>


Mateusz, Jeff,

Thank you both for helping me out solve this, it worked more or less per
Jeff's instructions found at:
http://lists.maptools.org/pipermail/fwtools/2008-April/001213.html This was
valuable one, shouldn't it find it's way on "Building GDAL with ECW support
on Windows" at http://trac.osgeo.org/gdal/wiki/ECW wiki page? I could post
it myself but I'm really not too competent to write about VC++ issues :-)

Regards,
Maksim Sestic


Maksim Sestic wrote:
> 
> Hi all,
> 
> I'm trying to figure out how to build libecwj2-3.3 from source, using
> VS.NET 2005. Source archive downloaded from ERMapper site is
> ImageCompressionSDKSourceCode3.3Setup_20070509.zip. Since C/C++ is not my
> native dev platform, I'm stuck with compiler reporting missing winhttp.h
> header file. 
> 
> Is there any suggestion what steps to take to actually build libecwj2-3.3
> from source? :-)
> 
> Regards,
> Maksim Sestic
> 
> 
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/VS.NET-2005---Bulding-libecwj2-3.3-from-source-tp17063302p17101824.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From milton at tecgraf.puc-rio.br  Wed May  7 10:09:37 2008
From: milton at tecgraf.puc-rio.br (Milton Jonathan)
Date: Wed May  7 10:09:44 2008
Subject: [gdal-dev] reading features without loading geometries
Message-ID: <4821B821.9040306@tecgraf.puc-rio.br>

Dear all,

I would like to know if there would be a standard mechanism in OGR for 
reading features without loading their geometries (e.g., for efficiently 
building a list of features from which to choose from, even for layers 
with a large number of features with significantly sized geometries)

I suppose that some drivers may not able to do it (e.g., drivers for 
simple file formats), but for database drivers that should be simple.

Thanks!
Milton
From ari.jolma at tkk.fi  Wed May  7 10:13:16 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed May  7 10:49:18 2008
Subject: [gdal-dev] OGR and  measure support revisited
Message-ID: <4821B8FC.4030109@tkk.fi>

This issue was up last time 1,5 years ago:

http://lists.osgeo.org/pipermail/gdal-dev/2006-October/010307.html

The new SFSQL spec is available now I believe (06-104r3). Are there any 
news?

Regards,

Ari

-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From Shawn.Gong at drdc-rddc.gc.ca  Wed May  7 11:08:58 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed May  7 11:09:04 2008
Subject: [gdal-dev] gdal1.4 error on RedHat Linux after /usr/loca/lib upgrade
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <480E1C29.8050204@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120059@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

gdal 1.4 and openev 1.8 were build on a RedHat Linux server last Dec and
ran without problem since.  gcc 3.2.3 was used to build them.

Recently the gcc was upgraded to 4.0.0 and some libraries were upgraded
as well, namely /usr/local/lib/libcurl, libexpat, libgeos, and libgeos_c
(mainly for gdal 1.5.1 build). 

The upgrade makes our (old) gdal 1.4 unworkable: first it complained
that GCC 4.0.0 was not found. After /usr/local/lib was added to the
LD_LIBRARY_PATH, gdal functions generate core dump. 

"ldd libgdal.so" revealed that it references to /usr/local/lib/libgeos
/usr/local/lib/libgeos_c (new one using gcc 4) instead of old ones in
[local-installation]/lib, even though [local-installation]/lib is in
LD_LIBRARY_PATH

My questions: 
How can I make gdal so that it uses libgeos and other libs in a location
that I desire? So I can include the libs (that I used to make gdal) and
distribute to end-user.
If I can't, then how can I make so the end-user has the right version of
libs under /usr/local/lib, to run gdal.


thanks,
Shawn


From mateusz at loskot.net  Wed May  7 12:39:04 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed May  7 12:39:13 2008
Subject: [Gdal-dev] VS.NET 2005 - Bulding libecwj2-3.3 from source
In-Reply-To: <17101824.post@talk.nabble.com>
References: <17063302.post@talk.nabble.com> <17101824.post@talk.nabble.com>
Message-ID: <4821DB28.6010004@loskot.net>

Maksim Sestic wrote:
> Mateusz, Jeff,
> 
> Thank you both for helping me out solve this, it worked more or less per
> Jeff's instructions found at:
> http://lists.maptools.org/pipermail/fwtools/2008-April/001213.html This was
> valuable one, shouldn't it find it's way on "Building GDAL with ECW support
> on Windows" at http://trac.osgeo.org/gdal/wiki/ECW wiki page? I could post
> it myself but I'm really not too competent to write about VC++ issues :-)

Maksim,

I'm glad it works.
Yes, you are right. I've got the same idea and I'm going to compile ECW 
building instructions for Windows users and put it on Wiki.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From Shawn.Gong at drdc-rddc.gc.ca  Wed May  7 12:49:32 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed May  7 12:49:33 2008
Subject: [gdal-dev] RE: gdal1.4 error on RedHat Linux after /usr/loca/lib
	upgrade
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120059@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <480E1C29.8050204@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<DF1471B5C308B346BF5A2AEA00C5615E120059@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E12005B@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I built gdal and openev without /usr/local/bin in PATh and that seems
did the trick. Now libgdal.so has no reference to libgeos_c or libgeos

thanks,
Shawn


-----Original Message-----
From: Gong, Shawn (Contractor) 
Sent: Wednesday, May 07, 2008 11:09 AM
To: gdal-dev@lists.osgeo.org
Subject: gdal1.4 error on RedHat Linux after /usr/loca/lib upgrade

hi list,

gdal 1.4 and openev 1.8 were build on a RedHat Linux server last Dec and
ran without problem since.  gcc 3.2.3 was used to build them.

Recently the gcc was upgraded to 4.0.0 and some libraries were upgraded
as well, namely /usr/local/lib/libcurl, libexpat, libgeos, and libgeos_c
(mainly for gdal 1.5.1 build). 

The upgrade makes our (old) gdal 1.4 unworkable: first it complained
that GCC 4.0.0 was not found. After /usr/local/lib was added to the
LD_LIBRARY_PATH, gdal functions generate core dump. 

"ldd libgdal.so" revealed that it references to /usr/local/lib/libgeos
/usr/local/lib/libgeos_c (new one using gcc 4) instead of old ones in
[local-installation]/lib, even though [local-installation]/lib is in
LD_LIBRARY_PATH

My questions: 
How can I make gdal so that it uses libgeos and other libs in a location
that I desire? So I can include the libs (that I used to make gdal) and
distribute to end-user.
If I can't, then how can I make so the end-user has the right version of
libs under /usr/local/lib, to run gdal.


thanks,
Shawn


From warmerdam at pobox.com  Wed May  7 13:00:38 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May  7 13:00:55 2008
Subject: [gdal-dev] OGR and  measure support revisited
In-Reply-To: <4821B8FC.4030109@tkk.fi>
References: <4821B8FC.4030109@tkk.fi>
Message-ID: <4821E036.3050006@pobox.com>

Ari Jolma wrote:
> This issue was up last time 1,5 years ago:
> 
> http://lists.osgeo.org/pipermail/gdal-dev/2006-October/010307.html
> 
> The new SFSQL spec is available now I believe (06-104r3). Are there any 
> news?

Ari,

I would like to implement Simple Features 1.2 in OGR in GDAL 1.7.
Unfortunately I have not had any client interest in supporting such an
effort, so unless this materializes at some point it is not clear that I
will be able to do the implement all by myself.

Potentially this is something the PSC could assign to the paid maintainer
if we felt it was strategic enough.  Or perhaps others will come forward
to take it on.  Mostly simple features 1.2 seems to require:

  o Adding measure to all the geometry handling.
  o Upgrading the WKT/WKB handling to support the new formats (2.5 D is handled
    incompatibly to what we have done!)
  o Adding the new PolyhedralSurface and TIN geometry classes.

On the WKT/WKB point, we are looking at building a standalone C++ library as
for use in Ingres that would support efficient conversion between WKT and
WKB geometry formats, including full SF 1.2 support.  If this goes ahead, it
might be nice to contemplate using it in OGR as well instead of having all our
own WKT handling.

So, various thoughts, but little action so far.

I would note an SF 1.2 upgrade would require a pretty detailed RFC, as there
is lots of care needed to minimize backward compatability problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed May  7 13:06:11 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May  7 13:06:31 2008
Subject: [gdal-dev] reading features without loading geometries
In-Reply-To: <4821B821.9040306@tecgraf.puc-rio.br>
References: <4821B821.9040306@tecgraf.puc-rio.br>
Message-ID: <4821E183.7000004@pobox.com>

Milton Jonathan wrote:
> Dear all,
> 
> I would like to know if there would be a standard mechanism in OGR for 
> reading features without loading their geometries (e.g., for efficiently 
> building a list of features from which to choose from, even for layers 
> with a large number of features with significantly sized geometries)
> 
> I suppose that some drivers may not able to do it (e.g., drivers for 
> simple file formats), but for database drivers that should be simple.

Milton,

One approach to this is to execute a custom query using ExecuteSQL().


eg.

OGRLayer *poResult = datasource->ExecuteSQL(
       "SELECT FID from ROADS where class in (\"M1\",\"M2\")" );

This would give back features with only the attribute FID matching the query.
When the backend is a real RDBMS this would generally be done efficiently
without touching the geometries.  For flat formats like Shapefiles the
machinery still reads the whole features to execute the query, so it would
not be particularly fast.


Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From milton at tecgraf.puc-rio.br  Wed May  7 13:50:57 2008
From: milton at tecgraf.puc-rio.br (Milton Jonathan)
Date: Wed May  7 13:49:34 2008
Subject: [gdal-dev] reading features without loading geometries
In-Reply-To: <4821E183.7000004@pobox.com>
References: <4821B821.9040306@tecgraf.puc-rio.br> <4821E183.7000004@pobox.com>
Message-ID: <4821EC01.1020400@tecgraf.puc-rio.br>

Hello Frank

Thanks a lot for your quick answer! I guess that approach will do in 
practice, since large data will usually be in a RDBMS. Actually, I also 
thought about this, but I didn't have a spatial database at hand (I did 
test it on a shapefile, but as you said in that case the driver loads 
the geometry anyway..)

Well, another similar thing that I was trying to do was to just load the 
Envelope of each object without loading the whole geometry. Do you think 
that would be possible with OGR? The reason for doing this is to quickly 
scan all the objects' bounding boxes in order to build a spatial tree 
for caching purposes. It would be great if we could do that!

Thanks again
Milton


Frank Warmerdam wrote:
> Milton Jonathan wrote:
>> Dear all,
>>
>> I would like to know if there would be a standard mechanism in OGR for 
>> reading features without loading their geometries (e.g., for 
>> efficiently building a list of features from which to choose from, 
>> even for layers with a large number of features with significantly 
>> sized geometries)
>>
>> I suppose that some drivers may not able to do it (e.g., drivers for 
>> simple file formats), but for database drivers that should be simple.
> 
> Milton,
> 
> One approach to this is to execute a custom query using ExecuteSQL().
> 
> 
> eg.
> 
> OGRLayer *poResult = datasource->ExecuteSQL(
>       "SELECT FID from ROADS where class in (\"M1\",\"M2\")" );
> 
> This would give back features with only the attribute FID matching the 
> query.
> When the backend is a real RDBMS this would generally be done efficiently
> without touching the geometries.  For flat formats like Shapefiles the
> machinery still reads the whole features to execute the query, so it would
> not be particularly fast.
> 
> 
> Best regards,
From battisti at actgate.com  Wed May  7 14:06:57 2008
From: battisti at actgate.com (Andrea Battisti)
Date: Wed May  7 14:07:07 2008
Subject: [gdal-dev] OGR Multiple features to Shapefile
Message-ID: <1210183617.20867.3.camel@piuma>

Hi all,

are the OGRMulti{ LineString | Point | Polygon } geometries supported by
the ESRI Shapefile driver (in creation mode?); if so I am probably
missing something in the way they should be used.

I am asking this because when I try to write such features (i.e. an
OGRMultiPoint) to a shapefile I get a crash when calling the
addGeometry() method.
I was looking for a working example of OGRMulti* features creation, but
couldn't find one.


Example code:

  const char *pszDriverName = "ESRI Shapefile";
  OGRSFDriver *poDriver;	

  OGRRegisterAll();

  poDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName( pszDriverName );

// ...

    OGRDataSource *poDS;
poDS = poDriver->CreateDataSource( "multi_out.shp", NULL );
  
// ...

    OGRLayer *poLayer;
    poLayer = poDS->CreateLayer( "poly_out", NULL, wkbMultiPoint,
NULL );

// ...
   
	OGRFeature *poFeature;
	OGRGeometry * the_geom = NULL;

	poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
	

	OGRMultiPoint * dpoly = new OGRMultiPoint();


	OGRPoint * point = new OGRPoint();
	point->setX( 42.0 );
	point->setY( 42.0 );

	dpoly->addGeometryDirectly( point );
	// delete point;
	

	the_geom = dpoly;
	poFeature->SetGeometry( the_geom );
	delete the_geom;

	
	if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
	{
		printf( "Failed to create feature in shapefile.\n" );
		exit( 1 );
	}

	OGRFeature::DestroyFeature( poFeature );

	OGRDataSource::DestroyDataSource( poDS );


Thanks in advance!
Best Regards,

-- 
Andrea Battisti
Applied Coherent Technology Corp.

From wendell at enflight.com  Wed May  7 14:06:56 2008
From: wendell at enflight.com (Wendell Turner)
Date: Wed May  7 14:12:16 2008
Subject: [gdal-dev] need help with gdalwarp
Message-ID: <20080507180656.GA19323@q.rho.net>

Hi,

I'm new to gdal an have a question about warping an image 
that I would like help with.

I have a GeoTIFF image of a Lambert Conformal Conic
projection of a map.  I would like to convert it to Mercator
(so the longiude lines are parallel, and the latitude lines
are straight).  Does gdalwarp do this?  What are the
parameters for the projections?  Do I need to tell it the
source and target spatial reference set?  What other options
should I send to gdalwarp?

Thanks,

Wendell

From warmerdam at pobox.com  Wed May  7 14:14:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May  7 14:14:41 2008
Subject: [gdal-dev] reading features without loading geometries
In-Reply-To: <4821EC01.1020400@tecgraf.puc-rio.br>
References: <4821B821.9040306@tecgraf.puc-rio.br>
	<4821E183.7000004@pobox.com> <4821EC01.1020400@tecgraf.puc-rio.br>
Message-ID: <4821F170.10302@pobox.com>

Milton Jonathan wrote:
> Hello Frank
> 
> Thanks a lot for your quick answer! I guess that approach will do in 
> practice, since large data will usually be in a RDBMS. Actually, I also 
> thought about this, but I didn't have a spatial database at hand (I did 
> test it on a shapefile, but as you said in that case the driver loads 
> the geometry anyway..)
> 
> Well, another similar thing that I was trying to do was to just load the 
> Envelope of each object without loading the whole geometry. Do you think 
> that would be possible with OGR? The reason for doing this is to quickly 
> scan all the objects' bounding boxes in order to build a spatial tree 
> for caching purposes. It would be great if we could do that!

Milton,

I can't think of any way of just getting envelopes without OGR internally
still having to load the whole geometry.  Internally within some drivers
they are able to take advantage of bounding box info in the format itself
to accelerate spatial filtering but this isn't exposed except through the
ability to do a SetSpatialFilter().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed May  7 14:26:12 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May  7 14:26:42 2008
Subject: [gdal-dev] need help with gdalwarp
In-Reply-To: <20080507180656.GA19323@q.rho.net>
References: <20080507180656.GA19323@q.rho.net>
Message-ID: <4821F444.2000208@pobox.com>

Wendell Turner wrote:
> Hi,
> 
> I'm new to gdal an have a question about warping an image 
> that I would like help with.
> 
> I have a GeoTIFF image of a Lambert Conformal Conic
> projection of a map.  I would like to convert it to Mercator
> (so the longiude lines are parallel, and the latitude lines
> are straight).  Does gdalwarp do this?  What are the
> parameters for the projections?  Do I need to tell it the
> source and target spatial reference set?  What other options
> should I send to gdalwarp?

Wendell,

Yes, gdalwarp is the appropriate tool.

Does GDAL recognise the coordinate system of the source image?  Try
a "gdalinfo" on it, and see if there is a coordinate system description.

If so, it might be sufficient to do something like:

   gdalwarp src.tif -t_srs '+proj=merc +datum=WGS84' dst.tif

You might find some of the following helpful to understand coordinate systems
in GDAL/OGR a bit.

   http://www.gdal.org/ogr/osr_tutorial.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed May  7 14:35:52 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May  7 14:36:17 2008
Subject: [gdal-dev] Removed functions from public API (cpl_conv.h)
Message-ID: <4821F688.5050903@pobox.com>

Andrey,

I think you removed two functions from cpl_conv.h (CPLStrtof()
and CPLStrtofDelim()) in:

   http://trac.osgeo.org/gdal/changeset/14378

cpl_conv.h is considered part of the public API of GDAL and I see these
functions were in GDAL 1.5.  I'd prefer if they could be retained in
trunk even though it seems very unlikely that anyone is using them.

I think preserving backward compatability in the API is something we need
to take as seriously as possible.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed May  7 14:37:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May  7 14:37:53 2008
Subject: [gdal-dev] OGR Multiple features to Shapefile
In-Reply-To: <1210183617.20867.3.camel@piuma>
References: <1210183617.20867.3.camel@piuma>
Message-ID: <4821F6EC.3020007@pobox.com>


Andrea,

Yes, the shapefile driver should support all these types in
when creating.  Your code looks fine.  The only reason I can
think of for why this might be failing is if you are building
on Win32 and you have a distinct heap for your application and
for GDAL in which case there could be a problem with the OGRPoint
you create in the application being destroyed on the GDAL heap.

If that isn't the issue, I'd encourage you to boil this down to
a standalone code sample that should build and run, and submitting
it via a ticket.

Best regards,
Frank

Andrea Battisti wrote:
> Hi all,
> 
> are the OGRMulti{ LineString | Point | Polygon } geometries supported by
> the ESRI Shapefile driver (in creation mode?); if so I am probably
> missing something in the way they should be used.
> 
> I am asking this because when I try to write such features (i.e. an
> OGRMultiPoint) to a shapefile I get a crash when calling the
> addGeometry() method.
> I was looking for a working example of OGRMulti* features creation, but
> couldn't find one.
> 
> 
> Example code:
> 
>   const char *pszDriverName = "ESRI Shapefile";
>   OGRSFDriver *poDriver;	
> 
>   OGRRegisterAll();
> 
>   poDriver =
> OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName( pszDriverName );
> 
> // ...
> 
>     OGRDataSource *poDS;
> poDS = poDriver->CreateDataSource( "multi_out.shp", NULL );
>   
> // ...
> 
>     OGRLayer *poLayer;
>     poLayer = poDS->CreateLayer( "poly_out", NULL, wkbMultiPoint,
> NULL );
> 
> // ...
>    
> 	OGRFeature *poFeature;
> 	OGRGeometry * the_geom = NULL;
> 
> 	poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() );
> 	
> 
> 	OGRMultiPoint * dpoly = new OGRMultiPoint();
> 
> 
> 	OGRPoint * point = new OGRPoint();
> 	point->setX( 42.0 );
> 	point->setY( 42.0 );
> 
> 	dpoly->addGeometryDirectly( point );
> 	// delete point;
> 	
> 
> 	the_geom = dpoly;
> 	poFeature->SetGeometry( the_geom );
> 	delete the_geom;
> 
> 	
> 	if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE )
> 	{
> 		printf( "Failed to create feature in shapefile.\n" );
> 		exit( 1 );
> 	}
> 
> 	OGRFeature::DestroyFeature( poFeature );
> 
> 	OGRDataSource::DestroyDataSource( poDS );
> 
> 
> Thanks in advance!
> Best Regards,
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From wendell at enflight.com  Wed May  7 14:46:23 2008
From: wendell at enflight.com (Wendell Turner)
Date: Wed May  7 14:46:24 2008
Subject: [gdal-dev] need help with gdalwarp
In-Reply-To: <4821F444.2000208@pobox.com>
References: <20080507180656.GA19323@q.rho.net> <4821F444.2000208@pobox.com>
Message-ID: <20080507184623.GA19968@q.rho.net>

On Wed, May 07, 2008 at 02:26:12PM -0400, Frank Warmerdam wrote:
> Wendell Turner wrote:
> >
> >I'm new to gdal an have a question about warping an image 
> >that I would like help with.
>
> Yes, gdalwarp is the appropriate tool.
> 
> Does GDAL recognise the coordinate system of the source image?  Try
> a "gdalinfo" on it, and see if there is a coordinate system description.
> 
> If so, it might be sufficient to do something like:
> 
>   gdalwarp src.tif -t_srs '+proj=merc +datum=WGS84' dst.tif
> 
> You might find some of the following helpful to understand coordinate 
> systems
> in GDAL/OGR a bit.
> 
>   http://www.gdal.org/ogr/osr_tutorial.html
> 
> Best regards,

Yes, that worked like a charm.  Thank you for the advice
(and for your work on gdal!)

Wendell

From battisti at actgate.com  Wed May  7 15:20:19 2008
From: battisti at actgate.com (Andrea Battisti)
Date: Wed May  7 15:21:00 2008
Subject: [gdal-dev] OGR Multiple features to Shapefile
In-Reply-To: <4821F6EC.3020007@pobox.com>
References: <1210183617.20867.3.camel@piuma>  <4821F6EC.3020007@pobox.com>
Message-ID: <1210188019.20867.23.camel@piuma>



> Andrea,
> 
> Yes, the shapefile driver should support all these types in
> when creating.  Your code looks fine.  The only reason I can
> think of for why this might be failing is if you are building
> on Win32 and you have a distinct heap for your application and
> for GDAL in which case there could be a problem with the OGRPoint
> you create in the application being destroyed on the GDAL heap.


Thanks for the quick reply,

I am building the test app on linux, but I saw the same problem on
win32.

Yes, as you suggest, there might be a problem with memory, because if I
create the geometry object without using the "new" operator, then it
works, i.e.:


/* working: */

#include "ogrsf_frmts.h"

int main()
{

	OGRMultiPoint dpoly;

	OGRPoint * point = new OGRPoint();
	point->setX( 42.0 );
	point->setY( 42.0 );

	OGRPoint * point2 = new OGRPoint();
	point2->setX( 4242.0 );
	point2->setY( 4242.0 );

	dpoly.addGeometryDirectly( point );
	dpoly.addGeometryDirectly( point2 );

}


/* segfaulting: */

#include "ogrsf_frmts.h"

int main()
{

	OGRMultiPoint * dpoly = new OGRMultiPoint();

	OGRPoint * point = new OGRPoint();
	point->setX( 42.0 );
	point->setY( 42.0 );

	OGRPoint * point2 = new OGRPoint();
	point2->setX( 4242.0 );
	point2->setY( 4242.0 );

	dpoly->addGeometryDirectly( point );
	dpoly->addGeometryDirectly( point2 );

}


Thanks,

-- 
Andrea Battisti
Applied Coherent Technology Corp.

From warmerdam at pobox.com  Wed May  7 15:31:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May  7 15:31:43 2008
Subject: [gdal-dev] OGR Multiple features to Shapefile
In-Reply-To: <1210188019.20867.23.camel@piuma>
References: <1210183617.20867.3.camel@piuma>  <4821F6EC.3020007@pobox.com>
	<1210188019.20867.23.camel@piuma>
Message-ID: <4822037C.4050106@pobox.com>

Andrea Battisti wrote:
>
> /* segfaulting: */
> 
> #include "ogrsf_frmts.h"
> 
> int main()
> {
> 
> 	OGRMultiPoint * dpoly = new OGRMultiPoint();
> 
> 	OGRPoint * point = new OGRPoint();
> 	point->setX( 42.0 );
> 	point->setY( 42.0 );
> 
> 	OGRPoint * point2 = new OGRPoint();
> 	point2->setX( 4242.0 );
> 	point2->setY( 4242.0 );
> 
> 	dpoly->addGeometryDirectly( point );
> 	dpoly->addGeometryDirectly( point2 );
> 
> }

Andrea,

This runs cleanly for me on Linux.

I can't see any obvious reason it would fail on win32, though if you
explicitly destroyed dpoly with delete, the points would potentially
get deallocated on the wrong heap.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Shawn.Gong at drdc-rddc.gc.ca  Wed May  7 17:03:08 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed May  7 17:03:11 2008
Subject: [gdal-dev] gdal1.5.1 make error on RedHat Linux
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <480E1C29.8050204@pobox.com>
	<DF1471B5C308B346BF5A2AEA00C5615E120030@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E12005F@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

gdal 1.5.1 make gave the following error message

I ran these prior to building:
setenv PATH "/home/sgong/dev18/dist/bin:/usr/bin:/bin:/usr/X11R6/bin"
setenv PYTHONHOME "/home/sgong/dev18/dist"
setenv LD_LIBRARY_PATH "/home/sgong/dev18/dist/lib"

libcurl.so.4 and libexpat.so.1 have be updated and put in my
localinstall/lib ("/home/sgong/dev18/dist/lib")
I try not to rely on /usr/local/lib, you can see it is not in
LD_LIBRARY_PATH. Was it the cause?


thanks,
Shawn



=============================
.....
echo '#!/bin/sh' > gdal-config-inst
echo 'CONFIG_LIBS="-L/home/sgong/dev18/dist/lib -lgdal"' >>
gdal-config-inst
echo 'CONFIG_DEP_LIBS=" -L/usr/local/lib -lexpat -ljasper
-L/home/sgong/dev18/dist/lib -lhdf5  -L/home/sgong/dev18/dist/lib
-lmfhdf -ldf -lsz -logdi31 -L/home/sgong/dev18/dist
-L/home/sgong/dev18/dist/lib -ljpeg -L/usr/lib -lpq -lz
-L/home/sgong/dev18/dist -L/home/sgong/dev18/dist/lib -lpthread -lm -lrt
-ldl    -lcurl -L/usr/kerberos/lib -lssl -lcrypto -lgssapi_krb5 -lkrb5
-lcom_err -lk5crypto -lresolv -ldl -lz -L/usr/kerberos/lib -lz -lssl
-lcrypto -lssl -lcrypto -lgssapi_krb5 -lkrb5 -lcom_err -lk5crypto
-lresolv -ldl -lz -lz "' >> gdal-config-inst
echo 'CONFIG_PREFIX="/home/sgong/dev18/dist"' >> gdal-config-inst
echo 'CONFIG_CFLAGS="-I/home/sgong/dev18/dist/include"' >>
gdal-config-inst
echo 'CONFIG_DATA="/home/sgong/dev18/dist/share"' >> gdal-config-inst
echo 'CONFIG_VERSION="'`cat ../VERSION`'"' >> gdal-config-inst
echo 'CONFIG_OGR_ENABLED=yes' >> gdal-config-inst
echo 'CONFIG_FORMATS="gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211
xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp
pcidsk airsar rs2 ilwis rmf rik leveller sgi srtmhgt idrisi gsg ingr ers
jaxapalsar dimap gff cosar pds adrg coasp tsx terragen wcs wms bsb
jpeg2000 hdf5 hdf4 ogdi gif jpeg png pcraster "' >> gdal-config-inst
cat gdal-config.in >> gdal-config-inst
chmod a+x gdal-config-inst
rm -f gdal-config
echo '#!/bin/sh' > gdal-config
echo 'CONFIG_LIBS="/home/sgong/dev18/gdal-1.5.1/libgdal.la"' >>
gdal-config
echo 'CONFIG_DEP_LIBS=" -L/usr/local/lib -lexpat -ljasper
-L/home/sgong/dev18/dist/lib -lhdf5  -L/home/sgong/dev18/dist/lib
-lmfhdf -ldf -lsz -logdi31 -L/home/sgong/dev18/dist
-L/home/sgong/dev18/dist/lib -ljpeg -L/usr/lib -lpq -lz
-L/home/sgong/dev18/dist -L/home/sgong/dev18/dist/lib -lpthread -lm -lrt
-ldl    -lcurl -L/usr/kerberos/lib -lssl -lcrypto -lgssapi_krb5 -lkrb5
-lcom_err -lk5crypto -lresolv -ldl -lz -L/usr/kerberos/lib -lz -lssl
-lcrypto -lssl -lcrypto -lgssapi_krb5 -lkrb5 -lcom_err -lk5crypto
-lresolv -ldl -lz -lz "' >> gdal-config
echo 'CONFIG_PREFIX="/home/sgong/dev18/gdal-1.5.1"' >> gdal-config
echo 'CONFIG_CFLAGS="-I/home/sgong/dev18/gdal-1.5.1/port
-I/home/sgong/dev18/gdal-1.5.1/gcore -I/home/sgong/dev18/gdal-1.5.1/alg
-I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts"' >> gdal-config
echo 'CONFIG_DATA="/home/sgong/dev18/gdal-1.5.1/data"' >> gdal-config
echo 'CONFIG_VERSION="'`cat ../VERSION`'"' >> gdal-config
echo 'CONFIG_OGR_ENABLED=yes' >> gdal-config
echo 'CONFIG_FORMATS="gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211
xpm sdts raw dted mem jdem envisat elas fit vrt usgsdem l1b nitf bmp
pcidsk airsar rs2 ilwis rmf rik leveller sgi srtmhgt idrisi gsg ingr ers
jaxapalsar dimap gff cosar pds adrg coasp tsx terragen wcs wms bsb
jpeg2000 hdf5 hdf4 ogdi gif jpeg png pcraster "' >> gdal-configcat
gdal-config.in >> gdal-config
chmod a+x gdal-config
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=compile --tag=CC gcc
-g -O2  -Wall -Wdeclaration-after-statement
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/gdal-1.5.1/gcore
-I/home/sgong/dev18/gdal-1.5.1/alg -I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts
-I/home/sgong/dev18/gdal-1.5.1/frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include  -c -o gdalinfo.o gdalinfo.c
libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/gdal-1.5.1/gcore
-I/home/sgong/dev18/gdal-1.5.1/alg -I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts
-I/home/sgong/dev18/gdal-1.5.1/frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c gdalinfo.c  -fPIC -DPIC -o
.libs/gdalinfo.o
libtool: compile:  gcc -g -O2 -Wall -Wdeclaration-after-statement
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/gdal-1.5.1/gcore
-I/home/sgong/dev18/gdal-1.5.1/alg -I/home/sgong/dev18/gdal-1.5.1/ogr
-I/home/sgong/dev18/gdal-1.5.1/ogr/ogrsf_frmts
-I/home/sgong/dev18/gdal-1.5.1/frmts -DOGR_ENABLED
-I/home/sgong/dev18/gdal-1.5.1/port -I/home/sgong/dev18/dist
-I/home/sgong/dev18/dist/include -c gdalinfo.c -o gdalinfo.o >/dev/null
2>&1
/bin/sh /home/sgong/dev18/gdal-1.5.1/libtool --mode=link        g++
gdalinfo.o  \
        /home/sgong/dev18/gdal-1.5.1/libgdal.la -o gdalinfo
libtool: link: g++ gdalinfo.o -o .libs/gdalinfo
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so -L/usr/local/lib
-L/home/sgong/dev18/dist/lib -L/home/sgong/dev171/dist/lib
-L/home/sgong/dev18/dist -L/usr/lib -L/usr/kerberos/lib
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src
-L/home/marinier/gcc-4.2.2-build/i686-pc-linux-gnu/libstdc++-v3/src/.lib
s -L/home/marinier/gcc-4.2.2-build/./gcc /usr/local/lib/libexpat.so
/home/sgong/dev171/dist/lib/libhdf5.so
/home/sgong/dev171/dist/lib/libsz.so -lmfhdf -ldf
/usr/local/lib/libsz.so -logdi31 /usr/lib/libjpeg.so -lpq -lpthread -lrt
/usr/local/lib/libcurl.so -lldap -lssl -lcrypto -lgssapi_krb5 -lkrb5
-lcom_err -lk5crypto -lresolv -ldl -lz /usr/local/lib/libstdc++.so -lm
-lc -lgcc_s -Wl,-rpath -Wl,/home/sgong/dev18/dist/lib -Wl,-rpath
-Wl,/usr/local/lib -Wl,-rpath -Wl,/home/sgong/dev171/dist/lib
/usr/bin/ld: warning: libcom_err.so.3, needed by /usr/lib/libssl.so, may
conflict with libcom_err.so.2
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::allocate(unsigned int)'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_free_list'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_Lock::~_Lock()'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_force_new'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_Lock::_Lock()'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::_Rep::_S_create(unsigned int, std::allocator<char> const&)'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_refill(unsigned int)'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::_S_empty_rep_storage'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::_S_node_allocator_lock'
/home/sgong/dev18/gdal-1.5.1/.libs/libgdal.so: undefined reference to
`std::__default_alloc_template<true, 0>::deallocate(void*, unsigned
int)'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/sgong/dev18/gdal-1.5.1/apps'
make: *** [apps-target] Error 2

From bclay at ball.com  Wed May  7 22:04:55 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed May  7 22:04:58 2008
Subject: [gdal-dev] OGR merge polygon capabilities
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFE98@daytonmsg2k3.AERO.BALL.COM>

Are there any capabilities built into OGR to walk layer and find all
overlapping polygons and merge them into multiple larger polygons?

 

Bruce




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080507/7886cf62/attachment.html
From bclay at ball.com  Wed May  7 22:01:19 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed May  7 22:24:15 2008
Subject: [gdal-dev] OGR / OSEO build info
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFE97@daytonmsg2k3.AERO.BALL.COM>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: Makefile.vc
Type: application/octet-stream
Size: 11197 bytes
Desc: Makefile.vc
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080507/d71218ab/Makefile-0001.obj
From crschmidt at metacarta.com  Thu May  8 02:36:30 2008
From: crschmidt at metacarta.com (Christopher Schmidt)
Date: Thu May  8 02:36:34 2008
Subject: [gdal-dev] OGR merge polygon capabilities
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFE98@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFE98@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <20080508063630.GA4936@metacarta.com>

On Wed, May 07, 2008 at 10:04:55PM -0400, Clay, Bruce wrote:
> Are there any capabilities built into OGR to walk layer and find all
> overlapping polygons and merge them into multiple larger polygons?

I think that the "Dissolve" action from WPServer does this, using OGR:

http://code.google.com/p/webprocessingserver/source/browse/trunk/webprocessingserver/WebProcessingServer/Action/OGRGeos.py#sr_62_67

Essentially: 
 * Add all your geometries to a geometry collection
 * Buffer the geometry collection (using GEOS Buffer op)
 * Loop through the resulting geometry (if it's a collectino or
   multipoly) and split the geoms back up.

-- Chris

>  
> 
> Bruce
> 
> 
> 
> 
> This message and any enclosures are intended only for the addressee.  Please  
> notify the sender by email if you are not the intended recipient.  If you are  
> not the intended recipient, you may not use, copy, disclose, or distribute this  
> message or its contents or enclosures to any other person and any such actions  
> may be unlawful.  Ball reserves the right to monitor and review all messages  
> and enclosures sent to or from this email address.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Christopher Schmidt
MetaCarta
From oueslati.cherif at gmail.com  Thu May  8 04:09:00 2008
From: oueslati.cherif at gmail.com (Cherif Oueslati)
Date: Thu May  8 04:09:03 2008
Subject: [gdal-dev] The JDEM format
Message-ID: <d94dd9d00805080109j76600e0dreef36ff2d0b5a6a3@mail.gmail.com>

Hello every body,
i would like to develop a new driver to GDAL. I seen the "Sample Driver :
jdemdataset.cpp".
I encountred some problems to understand this sample and i searched for the
logical constitution (the fields, their descriptions, sizes...) of this
japanese format but it was fruitless.
So i am asking your kindness to send me the descriptin of this japanese
format to help me better assimilate the tutorial.

With all my gratitude.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080508/4a82f58e/attachment.html
From mateusz at loskot.net  Thu May  8 04:17:42 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May  8 04:17:49 2008
Subject: [gdal-dev] The JDEM format
In-Reply-To: <d94dd9d00805080109j76600e0dreef36ff2d0b5a6a3@mail.gmail.com>
References: <d94dd9d00805080109j76600e0dreef36ff2d0b5a6a3@mail.gmail.com>
Message-ID: <4822B726.9020608@loskot.net>

Cherif Oueslati wrote:
> Hello every body, i would like to develop a new driver to GDAL. I
> seen the "Sample Driver : jdemdataset.cpp". I encountred some
> problems to understand this sample and i searched for the logical
> constitution (the fields, their descriptions, sizes...) of this 
> japanese format but it was fruitless.

Cherif,

I'm not sure I understand it correctly, but the jdemdataset.cpp is not a 
sample, but an implementation of JDEM driver in GDAL. It means, there is 
JDEM driver already included in GDAL:

http://gdal.org/frmt_various.html#JDEM

http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/jdem


-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Thu May  8 06:14:16 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May  8 06:14:22 2008
Subject: [gdal-dev] Using Ticket status request
Message-ID: <4822D278.50009@loskot.net>

Folks,

Perhaps it's a minor issue, but quite annoying.
I've noticed that many tickets change from NEW to CLOSED without going 
through status ASSIGNED.

I'd like to send a request to anyone who works on tickets, please assign 
it first, *before* starting any work on that. This way it explicitly 
says who is working on particular ticket and helps to avoid doubled work.

Summarizing, IMHO the status history should look as follows:

NEW -> ASSIGNED -> CLOSED

Thanks!
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Thu May  8 06:36:45 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May  8 06:36:50 2008
Subject: [gdal-dev] Using Ticket status request
In-Reply-To: <20080508103244.13292.qmail@s466.sureserver.com>
References: <20080508103244.13292.qmail@s466.sureserver.com>
Message-ID: <4822D7BD.2040901@loskot.net>

Lucena, Ivan wrote:
> Mateusz,
> 
> In FogBugz there is a configuration option that you can set all new
> "cases" to the administrator, in case no name was assigned. I do you
> think that trac has the same feature? But then *you* will be the
> distributor of bad news "I've got a bug!" by going there and
> assigning it to somebody else.
> 
> Just a suggestion.

Ivan,

I don't know FogBugz.
I'm just asking developers to remember that if attempt to work on 
particular ticket, just check Assign button and submit.

-- 
Mateusz Loskot
http://mateusz.loskot.net
From Chris.Barker at noaa.gov  Thu May  8 14:00:06 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu May  8 13:58:40 2008
Subject: [gdal-dev] Using Ticket status request
In-Reply-To: <4822D7BD.2040901@loskot.net>
References: <20080508103244.13292.qmail@s466.sureserver.com>
	<4822D7BD.2040901@loskot.net>
Message-ID: <48233FA6.90102@noaa.gov>

Mateusz Loskot wrote:
> I'm just asking developers to remember that if attempt to work on 
> particular ticket, just check Assign button and submit.

I think there are plug-ins for TRAC that can enforce some of this -- 
look for "workflow" -- though just establishing policy may be just fine.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From mateusz at loskot.net  Thu May  8 15:46:13 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May  8 15:46:18 2008
Subject: [gdal-dev] Using Ticket status request
In-Reply-To: <48233FA6.90102@noaa.gov>
References: <20080508103244.13292.qmail@s466.sureserver.com>	<4822D7BD.2040901@loskot.net>
	<48233FA6.90102@noaa.gov>
Message-ID: <48235885.4010607@loskot.net>

Christopher Barker wrote:
> Mateusz Loskot wrote:
>> I'm just asking developers to remember that if attempt to work on 
>> particular ticket, just check Assign button and submit.
> 
> I think there are plug-ins for TRAC that can enforce some of this -- 
> look for "workflow" -- though just establishing policy may be just fine.

Perhaps, but I'm not the Trac admin so I asked for what sounds
simplest to me.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From samper.d at gmail.com  Thu May  8 16:03:33 2008
From: samper.d at gmail.com (Dave Sampson)
Date: Thu May  8 16:03:40 2008
Subject: [gdal-dev] GMT driver for Ogr2Ogr
Message-ID: <48235C95.6010004@gmail.com>

Hey folks,

The basics,

Working on ubuntu.

Installed gdal-bin from repositories

I am trying the following command

ogr2ogr -f GMT output.gmt proponent_locations.shp


and I get the following error

Unable to find driver `GMT'.
The following drivers are available:
  -> `ESRI Shapefile'
  -> `MapInfo File'
  -> `UK .NTF'
...
...
...


When I do an :
ldd /usr/bin/ogr2ogr

I get
    linux-gate.so.1 =>  (0xb7f22000)
    libgdal1.4.0.so.1 => /usr/lib/libgdal1.4.0.so.1 (0xb7a31000)
    libxerces-c.so.27 => /usr/lib/libxerces-c.so.27 (0xb762f000)
    libmfhdf.so.4 => /usr/lib/libmfhdf.so.4 (0xb760b000)
    libdf.so.4 => /usr/lib/libdf.so.4 (0xb7568000)
    libogdi.so.3.2 => /usr/lib/libogdi.so.3.2 (0xb754c000)
    libpng12.so.0 => /usr/lib/libpng12.so.0 (0xb7529000)
    libnetcdf.so.4 => /usr/lib/libnetcdf.so.4 (0xb74f7000)
    libpq.so.5 => /usr/lib/libpq.so.5 (0xb74d8000)
    librt.so.1 => /lib/tls/i686/cmov/librt.so.1 (0xb74ce000)
    libdl.so.2 => /lib/tls/i686/cmov/libdl.so.2 (0xb74ca000)
    libldap_r-2.4.so.2 => /usr/lib/libldap_r-2.4.so.2 (0xb748b000)
    libkrb5.so.3 => /usr/lib/libkrb5.so.3 (0xb73fe000)
    libk5crypto.so.3 => /usr/lib/libk5crypto.so.3 (0xb73db000)
    libcom_err.so.2 => /lib/libcom_err.so.2 (0xb73d8000)
    libgssapi_krb5.so.2 => /usr/lib/libgssapi_krb5.so.2 (0xb73ae000)
    libpthread.so.0 => /lib/tls/i686/cmov/libpthread.so.0 (0xb7396000)
    libcrypt.so.1 => /lib/tls/i686/cmov/libcrypt.so.1 (0xb7364000)
    libnsl.so.1 => /lib/tls/i686/cmov/libnsl.so.1 (0xb734c000)
    libz.so.1 => /usr/lib/libz.so.1 (0xb7337000)
    libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0xb7244000)
    libm.so.6 => /lib/tls/i686/cmov/libm.so.6 (0xb721e000)
    libgcc_s.so.1 => /lib/libgcc_s.so.1 (0xb7213000)
    libc.so.6 => /lib/tls/i686/cmov/libc.so.6 (0xb70c4000)
    libgeos.so.2 => /usr/lib/libgeos.so.2 (0xb6fb6000)
    libgeos_c.so.1 => /usr/lib/libgeos_c.so.1 (0xb6fa8000)
    libodbc.so.1 => /usr/lib/libodbc.so.1 (0xb6f45000)
    libodbcinst.so.1 => /usr/lib/libodbcinst.so.1 (0xb6f39000)
    libjasper.so.1 => /usr/lib/libjasper.so.1 (0xb6eec000)
    libhdf5-1.6.5.so.0 => /usr/lib/libhdf5-1.6.5.so.0 (0xb6dc5000)
    libgif.so.4 => /usr/lib/libgif.so.4 (0xb6dbd000)
    libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0xb6d9d000)
    libtiff.so.4 => /usr/lib/libtiff.so.4 (0xb6d4a000)
    libsqlite3.so.0 => /usr/lib/libsqlite3.so.0 (0xb6ce4000)
    libcurl-gnutls.so.4 => /usr/lib/libcurl-gnutls.so.4 (0xb6cac000)
    libmysqlclient.so.15 => /usr/lib/libmysqlclient.so.15 (0xb6acc000)
    libicuuc.so.38 => /usr/lib/libicuuc.so.38 (0xb69a4000)
    libicudata.so.38 => /usr/lib/libicudata.so.38 (0xb5efa000)
    libexpat.so.1 => /usr/lib/libexpat.so.1 (0xb5ed8000)
    libproj.so.0 => /usr/lib/libproj.so.0 (0xb5ea6000)
    libssl.so.0.9.8 => /usr/lib/i686/cmov/libssl.so.0.9.8 (0xb5e64000)
    libcrypto.so.0.9.8 => /usr/lib/i686/cmov/libcrypto.so.0.9.8 (0xb5d22000)
    /lib/ld-linux.so.2 (0xb7f23000)
    liblber-2.4.so.2 => /usr/lib/liblber-2.4.so.2 (0xb5d15000)
    libresolv.so.2 => /lib/tls/i686/cmov/libresolv.so.2 (0xb5d01000)
    libsasl2.so.2 => /usr/lib/libsasl2.so.2 (0xb5cea000)
    libgnutls.so.13 => /usr/lib/libgnutls.so.13 (0xb5c75000)
    libkrb5support.so.0 => /usr/lib/libkrb5support.so.0 (0xb5c6d000)
    libkeyutils.so.1 => /lib/libkeyutils.so.1 (0xb5c6a000)
    libltdl.so.3 => /usr/lib/libltdl.so.3 (0xb5c62000)
    libidn.so.11 => /usr/lib/libidn.so.11 (0xb5c31000)
    libtasn1.so.3 => /usr/lib/libtasn1.so.3 (0xb5c21000)
    libgcrypt.so.11 => /lib/libgcrypt.so.11 (0xb5bd4000)
    libgpg-error.so.0 => /lib/libgpg-error.so.0 (0xb5bcf000)



So are we supposed to be seeing the GMT library in here?

I have GMT installed and working

Any ideas?
From mateusz at loskot.net  Thu May  8 16:53:15 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May  8 16:53:21 2008
Subject: [gdal-dev] GMT driver for Ogr2Ogr
In-Reply-To: <48235C95.6010004@gmail.com>
References: <48235C95.6010004@gmail.com>
Message-ID: <4823683B.9010404@loskot.net>

Dave Sampson wrote:
> Working on ubuntu.
> Installed gdal-bin from repositories
> I am trying the following command
> 
> ogr2ogr -f GMT output.gmt proponent_locations.shp
> 
> and I get the following error
> 
> Unable to find driver `GMT'.

Dave,

It's a good idea to specify exact version of distribution you use.
Though, I think I know what's the problem.

In latest Ubuntu 8.04 repositories, there is GDAL 1.4.4 available.
The GMT driver for OGR is quite new and was added in 1.5.0:
http://trac.osgeo.org/gdal/wiki/Release/1.5.0-News

It means, that in order to use OGR GMT driver you need GDAL >=1.5.0.

-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Thu May  8 17:05:40 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May  8 17:05:46 2008
Subject: [gdal-dev] OGR / OSEO build info
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFE97@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFE97@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <48236B24.6010903@loskot.net>

Clay, Bruce wrote:
> I added GEOS support to get OGRGrometry:Buffer support to GDAL my
> modifying the Makefile.vc. Then I called OGRRegisterAll and my program
> crashed.

Usually, to enable GEOS support you want to uncomment and edit nmake.opt
file but not any makefile.vc, see:

http://trac.osgeo.org/gdal/browser/trunk/gdal/nmake.opt?rev=14364#L305

> Environment: Windows XP, Visual Studio 2005 and GEOS 3.1.0.
> The effective stack trace follows.
> OGRRegisterAll calls VSIReadDir which calls VSIWin32FilesystemHandler 
> 
> VSIWin32FilesystemHandler calls CPLStrdup to allocate pszFileSpc.  After
> searching the directory it calls CPLFree(pszFileSpc).  
> CPLFree seems to invokde VSIFree which is shown below
> 
> void VSIFree(void *pData)
> {
>     if( pData != NULL )
>         free( pData );
> }
> 
> As soon as the free is called the program throws a
> _CrtIsValidHeapPointer(pUserData) assertion.

Sounds like de-/allocation across DLL boundaries problem

> The problem appeared to be a library compatibility issue.
> The attached GEOS seemed to get past the problem.

Ah, you edited GEOS makefile.vc.
As I see, you changed from GEOS makefile to build in debug mode.
Have you tried release mode and checked if it still crashes?

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From mateusz at loskot.net  Thu May  8 17:37:08 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May  8 17:37:13 2008
Subject: [gdal-dev] OGR / OSEO build info
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFE9A@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFE97@daytonmsg2k3.AERO.BALL.COM>
	<48236B24.6010903@loskot.net>
	<C482FF98AE985A47B8C982FD429C9E34FEFE9A@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <48237284.3070509@loskot.net>

Clay, Bruce wrote:
> Mateusz:
> 
> Thanks for your reply.
> 
>   I did not go back and try release mode yet.  I do most of my work in
> debug mode and rarely get a chance to go back to build a release version
> of things.  Things change too fast to lock thing down.

Understood.

> I suspect the original problem is the mixture of debug and release
> libraries because I was getting a warning about MSVCRT during the link
> process.  That usually comes up either from a release vs. debug problem
> or from static vs. dynamic library loading.

Yes, libraries mismatch is likely the source of problems.

> Either way, the OSEO makefile seems to be geared towards VS 2003 (7.1)
> so I had to make some changes for that.

OK.

Greetings
-- 
Mateusz Loskot
http://mateusz.loskot.net
From timmichelsen at gmx-topmail.de  Thu May  8 17:55:42 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Thu May  8 17:55:46 2008
Subject: [gdal-dev] GMT driver for Ogr2Ogr
In-Reply-To: <4823683B.9010404@loskot.net>
References: <48235C95.6010004@gmail.com> <4823683B.9010404@loskot.net>
Message-ID: <482376DE.4070603@gmx-topmail.de>

> It's a good idea to specify exact version of distribution you use.
> Though, I think I know what's the problem.
> 
> In latest Ubuntu 8.04 repositories, there is GDAL 1.4.4 available.
> The GMT driver for OGR is quite new and was added in 1.5.0:
> http://trac.osgeo.org/gdal/wiki/Release/1.5.0-News
> 
> It means, that in order to use OGR GMT driver you need GDAL >=1.5.0.

I created a Lauchpad bug report:
MERGE gdal-bin 1.5.1-3+b1 from Debian
https://bugs.launchpad.net/ubuntu/+source/gdal/+bug/228382
https://bugs.launchpad.net/ubuntu/+source/gdal/+bug/228389
https://bugs.launchpad.net/ubuntu/+source/gdal/+bug/228393

From dylan.beaudette at gmail.com  Thu May  8 20:13:12 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Thu May  8 20:11:05 2008
Subject: [gdal-dev] updates on masking raster data
In-Reply-To: <481B96C7.7060905@pobox.com>
References: <200805021454.28689.dylan.beaudette@gmail.com>
	<481B96C7.7060905@pobox.com>
Message-ID: <200805081713.12144.dylan.beaudette@gmail.com>

On Friday 02 May 2008, Frank Warmerdam wrote:
> Dylan Beaudette wrote:
> > anyone know if there has been any work related to this ticket:
> >
> > http://trac.osgeo.org/gdal/ticket/1599
> >
> > I was hoping to mask out a large section of raster data while warping, or
> > possibly in a second-pass with gdal_translate or the like.
>
> Dylan,
>
> gdal_rasterize can mask off areas of a raster inside or outside of a
> polygon. Other than that, nothing has been done to the best of my
> knowledge.
>
> Best regards.

Thanks Frank. Short of some fancy python-GDAL goodness, I came up with some 
bash + GRASS scripting to solve the problem:

http://casoilresource.lawr.ucdavis.edu/drupal/node/613

Dylan

-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From JohnB.Visser at ga-asi.com  Thu May  8 20:48:04 2008
From: JohnB.Visser at ga-asi.com (Visser, John B.)
Date: Thu May  8 20:48:13 2008
Subject: [gdal-dev] NITF BlockA and image corners?
In-Reply-To: <20080508160010.64054E01ADA@lists.osgeo.org>
References: <20080508160010.64054E01ADA@lists.osgeo.org>
Message-ID: <5209E3CBD360A5439026631196FC975601A172EF@RSG-EVS1.rsg.ga-asi.com>

I have a NITF with the following corners in the block A:

	FRLC_LOC	+31.317567-092.535419
	LRLC_LOC	+31.318452-092.534442
	LRFC_LOC	+31.317431-092.533187
	FRFC_LOC	+31.316546-092.534164

But GDAL is reporting the following:

	Upper Left  ( -92.5341640,  31.3165451)
	Lower Left  ( -92.5331860,  31.3174311)
	Upper Right (     267.465,      31.318)
	Lower Right (     267.466,      31.318)
	Center      (  87.4656970,  31.3174990)

The corners seem "wrapped" as you can tell.  Is this normal?  Am I
writing the corners to BLOCKA in the wrong order?

The code I'm using is as follows, it was taken primarily from the GDAL
tutorial.

fileInfo->width = GDALGetRasterXSize( hDataset );
fileInfo->height = GDALGetRasterYSize( hDataset );
char** md = GDALGetMetadata(hDataset, NULL);

//adfGeoTransform[0]  top left x 
//adfGeoTransform[1]  w-e pixel resolution 
//adfGeoTransform[2]  rotation, 0 if image is "north up" 
//adfGeoTransform[3]  top left y 
//adfGeoTransform[4]  rotation, 0 if image is "north up" 
//adfGeoTransform[5]  n-s pixel resolution 
if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None )
{
        fileInfo->origin[0] = adfGeoTransform[0];
        fileInfo->origin[1] = adfGeoTransform[3];

        fileInfo->pixelSize[0] = adfGeoTransform[1];
        fileInfo->pixelSize[1] = adfGeoTransform[5];

        fileInfo->rotation[0] = adfGeoTransform[2];
        fileInfo->rotation[1] = adfGeoTransform[4];

        fileInfo->vertices[0].tu = 0.0f;
        fileInfo->vertices[0].tv = 0.0f;
        fileInfo->vertices[0].x = (double)adfGeoTransform[0];
        fileInfo->vertices[0].y = (double)adfGeoTransform[3];
        fileInfo->vertices[0].z = 0.0f;

        fileInfo->vertices[1].tu = 1.0f;
        fileInfo->vertices[1].tv = 0.0f;
        fileInfo->vertices[1].x =
(double)(adfGeoTransform[0]+adfGeoTransform[1]*(fileInfo->width));
        fileInfo->vertices[1].y = (double)adfGeoTransform[3];
        fileInfo->vertices[1].z = 0.0f;

        fileInfo->vertices[2].tu = 1.0f;
        fileInfo->vertices[2].tv = 1.0f;
        fileInfo->vertices[2].x =
(double)(adfGeoTransform[0]+adfGeoTransform[1]*(fileInfo->width));
        fileInfo->vertices[2].y =
(double)(adfGeoTransform[3]+adfGeoTransform[5]*(fileInfo->height));
        fileInfo->vertices[2].z = 0.0f;

        fileInfo->vertices[3].tu = 0.0f;
        fileInfo->vertices[3].tv = 1.0f;
        fileInfo->vertices[3].x = (double)adfGeoTransform[0];
        fileInfo->vertices[3].y =
(double)(adfGeoTransform[3]+adfGeoTransform[5]*(fileInfo->height));
        fileInfo->vertices[3].z = 0.0f;
}
From timmichelsen at gmx-topmail.de  Fri May  9 04:13:24 2008
From: timmichelsen at gmx-topmail.de (timmichelsen@gmx-topmail.de)
Date: Fri May  9 04:13:26 2008
Subject: [gdal-dev] GMT driver for Ogr2Ogr
In-Reply-To: <4823C1A4.70302@gmail.com>
References: <48235C95.6010004@gmail.com> <4823683B.9010404@loskot.net>
	<482376DE.4070603@gmx-topmail.de> <4823C1A4.70302@gmail.com>
Message-ID: <20080509081324.148560@gmx.net>

HI!

> Is this something I should grab from the debian package list, compile
> from source, or wait (time frame?)
I files the bug reports to make the Ubuntu developers aware of the need to merge. I personally do not really know how to do this.

So you have 3 options now:

1) grab the files from Debian archives
This could work but not that it's gernerally NOT recommended by Ubuntu due to different system configuration.

2) compile yourself with checkinstall

3) use FWTools (http://fwtools.maptools.org/) for Linux in the mean time

Since you are using scripts to built the maps you may easily change the path to the gdal executables.

> Trying to build an automated process for some map generation and I
> require translation of SHP to GMT.
I would be happy I you could share your approach/workflow when you finished developing it.

Kind regards,
Timmie
 

-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser
From roma at progesoft.com  Fri May  9 09:52:28 2008
From: roma at progesoft.com (Roman Fedorov)
Date: Fri May  9 10:01:19 2008
Subject: [gdal-dev] CALS Group 4
Message-ID: <004401c8b1db$ebb85720$1501a8c0@progesoft.local>

Good day everybody!
I wanted to ask if GDAL supports image formats  CALS Group 4 (.cal .ras .mil .rst .cg4 .gp4 .cals) ?

Best Regards,
Roman Fedorov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080509/4f51a554/attachment.html
From warmerdam at pobox.com  Fri May  9 10:11:38 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May  9 10:12:07 2008
Subject: [gdal-dev] CALS Group 4
In-Reply-To: <004401c8b1db$ebb85720$1501a8c0@progesoft.local>
References: <004401c8b1db$ebb85720$1501a8c0@progesoft.local>
Message-ID: <48245B9A.5000908@pobox.com>

Roman Fedorov wrote:
> Good day everybody!
> I wanted to ask if GDAL supports image formats  CALS Group 4 (.cal .ras 
> .mil .rst .cg4 .gp4 .cals) ?

Roman,

I don't recognise the format under this name.  So the answer is, likely, no.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ivan.lucena at pmldnet.com  Fri May  9 10:29:14 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Fri May  9 10:35:56 2008
Subject: [gdal-dev] CALS Group 4
In-Reply-To: <004401c8b1db$ebb85720$1501a8c0@progesoft.local>
References: <004401c8b1db$ebb85720$1501a8c0@progesoft.local>
Message-ID: <48245FBA.8070604@pmldnet.com>

Hi Roman,

Good source of information in file formats, in case you want to develop 
a GDAL driver, can be found at: http://www.fileformat.info/format/cals/

You can also setup a VRT description file 
(http://www.gdal.org/gdal_vrttut.html) in some cases.

Best regards,

Ivan

PS. Any connection with Dmitry Fedorov?

"Automatic Registration and Mosaicking System for Remotely Sensed 
Imagery" Dmitry Fedorov, Leila M.G. Fonseca, Charles Kenney, B.S. 
Manjunath [http://regima.dpi.inpe.br/publications/spie_fedorov.pdf]



Roman Fedorov wrote:
> Good day everybody!
> I wanted to ask if GDAL supports image formats  CALS Group 4 (.cal .ras .mil .rst .cg4 .gp4 .cals) ?
> 
> Best Regards,
> Roman Fedorov
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Shawn.Gong at drdc-rddc.gc.ca  Fri May  9 14:08:37 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri May  9 14:08:40 2008
Subject: [gdal-dev] NITF API for GDAL based tools
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120068@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

One of my colleagues mentioned that General Dynamics AIS released some
of their NITF API software to the opensource domain in March, calling it
NITRO (http://nitro-nitf.sourceforge.net/).  This API is in use for
General Dynamics' projects and having GDAL-based tools (e.g. OpenEV)
being compatible with the products from the GD DoD applications would be
desirable.

Is there any current effort in the GDAL community to build NITRO into
GDAL? 

thanks,
Shawn

From warmerdam at pobox.com  Fri May  9 14:51:24 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May  9 14:51:47 2008
Subject: [gdal-dev] NITF API for GDAL based tools
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120068@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120068@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <48249D2C.4090809@pobox.com>

Gong, Shawn (Contractor) wrote:
> hi list,
> 
> One of my colleagues mentioned that General Dynamics AIS released some
> of their NITF API software to the opensource domain in March, calling it
> NITRO (http://nitro-nitf.sourceforge.net/).  This API is in use for
> General Dynamics' projects and having GDAL-based tools (e.g. OpenEV)
> being compatible with the products from the GD DoD applications would be
> desirable.
> 
> Is there any current effort in the GDAL community to build NITRO into
> GDAL? 

Shawn,

I'm not aware of any effort to use this with GDAL yet.  I have subscribed
to the mailing list, and downloaded the source for a quick skim.

I'd guess it would be fairly easy to implement a NITRO-NITF driver on their
library for GDAL.  It is less clear to me what the advantages of this would
be.  For the time being I'll keep this library in mind as a source of example
code, and cross checking for NITF issues.

I see the code is LGPL, so I can't really crib any of it directly for GDAL.
But this is no barrier to using the library for an alternate driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Sat May 10 15:25:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat May 10 15:25:54 2008
Subject: [gdal-dev] OGRLayerH as a more specific type
Message-ID: <4825F6A7.7000802@pobox.com>

Folks,

In the past the C "handle" types for OGR classes were defined like this:

   typedef void *OGRLayerH;

The problem is that this type becomes interchangable with any other void *,
including stuff like OGRDataSourceH and OGRFeatureH.  So type checking in the
C API is somewhat degraded.

It was suggested to change this to:

   typedef struct OGRLayerHS *OGRLayerH;

This still provides an opaque handle type, but the compiler will now
differentiate it from other handle types.  We looked at doing this for
the GDAL C API but it was messy, in part because the GDAL API needs to be
able to treat various objects as GDALMajorObjectH and that relationship is
hard to express in C type definitions.

However, since most OGR classes have no common base class it is fairly
easy there.  So, I have modified ogr_api.h to use the following definitions:

#ifdef DEBUG
typedef struct OGRFieldDefnHS   *OGRFieldDefnH;
typedef struct OGRFeatureDefnHS *OGRFeatureDefnH;
typedef struct OGRFeatureHS     *OGRFeatureH;
#else
typedef void *OGRFieldDefnH;
typedef void *OGRFeatureDefnH;
typedef void *OGRFeatureH;
#endif

#ifdef DEBUG
typedef struct OGRLayerHS      *OGRLayerH;
typedef struct OGRDataSourceHS *OGRDataSourceH;
typedef struct OGRDriverHS     *OGRSFDriverH;
#else
typedef void *OGRLayerH;
typedef void *OGRDataSourceH;
typedef void *OGRSFDriverH;
#endif

I found I had to fix up a variety of casting issues in the OGR code itself
to get this working properly. So one lesson is that slightly sloppy code
will no longer compile with these changes.  In the interest of reducing the
impact of this change, I made it only apply in DEBUG mode when we presume
developers want the compiler helping them as much as possible to keep their
code clean.

Please let me know if folks find this change problematic.  We still have a
fair amount of time before 1.6 release in which we could back it out if
so desired. We might also consider extending it somewhat more widely though
I'm ambivalent in the C case because of the whole "GDAMajorObjectH" thing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From xiaodong.zhang2 at und.edu  Sun May 11 22:33:26 2008
From: xiaodong.zhang2 at und.edu (Xiaodong Zhang)
Date: Sun May 11 22:34:06 2008
Subject: [gdal-dev] find bounding box of a shapefile
Message-ID: <4827AC76.3060502@und.edu>

Hi,

In order to find the bounding box of polygons (defined in a shapefile), 
I guess I need to find the minimum x and y coordinates and maximum x and 
y coordinates and then to form the four corners. In case somebody has 
already done this, would you like to share your thoughts or code?

Thanks
Xiaodong
From warmerdam at pobox.com  Sun May 11 22:44:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun May 11 22:44:56 2008
Subject: [gdal-dev] find bounding box of a shapefile
In-Reply-To: <4827AC76.3060502@und.edu>
References: <4827AC76.3060502@und.edu>
Message-ID: <4827AF15.3070107@pobox.com>

Xiaodong Zhang wrote:
> Hi,
> 
> In order to find the bounding box of polygons (defined in a shapefile), 
> I guess I need to find the minimum x and y coordinates and maximum x and 
> y coordinates and then to form the four corners. In case somebody has 
> already done this, would you like to share your thoughts or code?

Xiaodong,

If you are using OGR, you can just call GetExtent() on the OGRLayer
representing the shapefile.  In the case of the shapefile, the extents
are stored in the header so this is a virtually free operation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From oueslati.cherif at gmail.com  Mon May 12 03:15:50 2008
From: oueslati.cherif at gmail.com (Cherif Oueslati)
Date: Mon May 12 03:15:53 2008
Subject: Fwd: [gdal-dev] The JDEM format
In-Reply-To: <d94dd9d00805090103q76c99fd2x92d0f2a0b205bf3d@mail.gmail.com>
References: <d94dd9d00805080109j76600e0dreef36ff2d0b5a6a3@mail.gmail.com>
	<4822B726.9020608@loskot.net>
	<d94dd9d00805090103q76c99fd2x92d0f2a0b205bf3d@mail.gmail.com>
Message-ID: <d94dd9d00805120015g5e7e6dceudfeb092c9432c34f@mail.gmail.com>

---------- Forwarded message ----------
From: Cherif Oueslati <oueslati.cherif@gmail.com>
Date: Fri, May 9, 2008 at 10:03 AM
Subject: Re: [gdal-dev] The JDEM format
To: Mateusz Loskot <mateusz@loskot.net>


Thank you Mateuz for your interest,

It's clear that the JDEM driver is implemented in GDAL through the cpp file
given.
But to add new formats, we have to proceed that way; by implementing the cpp
file that correspond to each new format.
I had to add new format so i tried to follow the"GDAL Driver Implementation
Tutorial" proposed by the official GDAL web site.
In this tutorial, the author gives the way to add new driver to the GDAL
library by giving the implementation of the JDEM driver as a sample to
follow.
Simply it seems logical to have alsoo the JDEM format description with the
cpp file to understand how can we produce the correpondent cpp file.
In fact this is what i have to do; i have to develop a new driver having
only the description of this new format (the logical organisation of the
fields, their descriptions, sizes...).
I thought that having the logical description of the JDEM format may
facilitate to me understanding the JDEM cpp file, and so i can develop a
similar cpp file for my own new format.
I hope i was clear, and i'm waiting for your opinion about that.
With all my gratitude.




-- 
"L'imagination est plus importante que le savoir." A. Einstein
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080512/66ba6ef9/attachment.html
From bclay at ball.com  Mon May 12 17:26:35 2008
From: bclay at ball.com (Clay, Bruce)
Date: Mon May 12 17:26:38 2008
Subject: [gdal-dev] Smoothing polygons
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFEA3@daytonmsg2k3.AERO.BALL.COM>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: polygons.JPG
Type: image/jpeg
Size: 5526 bytes
Desc: polygons.JPG
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080512/8d30b681/polygons.jpe
-------------- next part --------------
A non-text attachment was scrubbed...
Name: merged.JPG
Type: image/jpeg
Size: 3970 bytes
Desc: merged.JPG
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080512/8d30b681/merged.jpe
From hobu.inc at gmail.com  Mon May 12 17:33:47 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon May 12 17:36:51 2008
Subject: [gdal-dev] Smoothing polygons
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFEA3@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFEA3@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <9B99E1C7-AA60-49A7-A1C9-6F9D363FE450@gmail.com>

You want a Douglas-Peucker algorithm?  http://mappinghacks.com/2008/05/05/douglas-peucker-line-simplification-in-python/

DP generalization is in GEOS too, I think, but not available to the C  
API.


On May 12, 2008, at 4:26 PM, Clay, Bruce wrote:

> With the help of some folks on this forum I have successfully  
> managed to create polygons that represent the coverage area of a set  
> of geo-data points.  The operation does quite smoothly and fairly  
> fast.  I am don?t to one final operation that I have searched both  
> GDAL/OGR and GEOS API and have not found.
>
> Before I start coding I wanted to ask if anyone knows of an existing  
> operation that I missed that will smooth the edges and simplify the  
> resultant polygons.  The attached files show the buffered points as  
> overlapping polygons and the final merged polygon.  The merged set  
> is a result of applying a buffer to a GeometryCollection.  If the  
> images make it though the mail filters you can see that the edges of  
> the polygons have a scalloped effect.  If I can smooth the edged it  
> should reduce the stored geometry size.
>
> Any thoughts would be greatly appreciated.
>
> Bruce
>
> This message and any enclosures are intended only for the  
> addressee.  Please
> notify the sender by email if you are not the intended recipient.   
> If you are
> not the intended recipient, you may not use, copy, disclose, or  
> distribute this
> message or its contents or enclosures to any other person and any  
> such actions
> may be unlawful.  Ball reserves the right to monitor and review all  
> messages
> and enclosures sent to or from this email address.
> < 
> polygons 
> .JPG><merged.JPG>_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From woodbri at swoodbridge.com  Mon May 12 18:38:09 2008
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon May 12 17:37:53 2008
Subject: [gdal-dev] Smoothing polygons
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFEA3@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFEA3@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <4828C6D1.7000902@swoodbridge.com>

Have you considered using a convex hull to merge the results.

-Steve

Clay, Bruce wrote:
> 
> 
> With the help of some folks on this forum I have successfully managed to 
> create polygons that represent the coverage area of a set of geo-data 
> points.  The operation does quite smoothly and fairly fast.  I am don?t 
> to one final operation that I have searched both GDAL/OGR and GEOS API 
> and have not found.
> 
>  
> 
> Before I start coding I wanted to ask if anyone knows of an existing 
> operation that I missed that will smooth the edges and simplify the 
> resultant polygons.  The attached files show the buffered points as 
> overlapping polygons and the final merged polygon.  The merged set is a 
> result of applying a buffer to a GeometryCollection.  If the images make 
> it though the mail filters you can see that the edges of the polygons 
> have a scalloped effect.  If I can smooth the edged it should reduce the 
> stored geometry size.
> 
>  
> 
> Any thoughts would be greatly appreciated.
> 
>  
> 
> Bruce
> 
>  
> 
> This message and any enclosures are intended only for the addressee.  Please  
> notify the sender by email if you are not the intended recipient.  If you are  
> not the intended recipient, you may not use, copy, disclose, or distribute this  
> message or its contents or enclosures to any other person and any such actions  
> may be unlawful.  Ball reserves the right to monitor and review all messages  
> and enclosures sent to or from this email address.
> 
> 
> ------------------------------------------------------------------------
> 
> 
> ------------------------------------------------------------------------
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From JARED.RUBIN at saic.com  Mon May 12 19:26:00 2008
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Mon May 12 19:26:18 2008
Subject: [gdal-dev] creating multi banded imagery
Message-ID: <200805121726.00816.rubinj@nemesis.tucson.saic.com>

Dear group,
  Is there a gdal format that allows for n-banded imagery? So something like 
the following in python in which I attempt to create a 10 banded image?
thanks

import sys,os,string,shutil
import osgeo.gdal
from osgeo.gdalconst import *
import numpy
from numpy import *

buf = zeros((10,10))
driver = osgeo.gdal.GetDriverByName('NITF')
dst = driver.Create('tmp.nitf', 10, 10, 1, osgeo.gdal.GDT_UInt16)
dst.GetRasterBand(1).WriteArray(buf)
dst.GetRasterBand(2).WriteArray(buf)
dst.GetRasterBand(3).WriteArray(buf)
dst.GetRasterBand(4).WriteArray(buf)
dst.GetRasterBand(5).WriteArray(buf)
dst.GetRasterBand(6).WriteArray(buf)
dst.GetRasterBand(7).WriteArray(buf)
dst.GetRasterBand(8).WriteArray(buf)
dst.GetRasterBand(9).WriteArray(buf)
dst.GetRasterBand(10).WriteArray(buf)
From ivan.lucena at pmldnet.com  Mon May 12 20:45:03 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Mon May 12 20:45:09 2008
Subject: [gdal-dev] creating multi banded imagery
In-Reply-To: <200805121726.00816.rubinj@nemesis.tucson.saic.com>
References: <200805121726.00816.rubinj@nemesis.tucson.saic.com>
Message-ID: <4828E48F.2030000@pmldnet.com>

Jared,

The forth parameter on "Create" is actually the number of bands but will 
not going to work for driver/formats that does not support multi-band. 
If you want to use NITF you should check the docs.

 >>> dst = driver.Create(' ', 10, 10, *10*, GDT_UInt16)

Best regards,

Ivan

Refs.:

http://www.gdal.org/classGDALDriver.html#191dc4a5c8f48c1dea4083c711b8f7c4
http://www.gdal.org/formats_list.html

Jared Rubin wrote:
> Dear group,
>   Is there a gdal format that allows for n-banded imagery? So something like 
> the following in python in which I attempt to create a 10 banded image?
> thanks
> 
> import sys,os,string,shutil
> import osgeo.gdal
> from osgeo.gdalconst import *
> import numpy
> from numpy import *
> 
> buf = zeros((10,10))
> driver = osgeo.gdal.GetDriverByName('NITF')
> dst = driver.Create('tmp.nitf', 10, 10, 1, osgeo.gdal.GDT_UInt16)
> dst.GetRasterBand(1).WriteArray(buf)
> dst.GetRasterBand(2).WriteArray(buf)
> dst.GetRasterBand(3).WriteArray(buf)
> dst.GetRasterBand(4).WriteArray(buf)
> dst.GetRasterBand(5).WriteArray(buf)
> dst.GetRasterBand(6).WriteArray(buf)
> dst.GetRasterBand(7).WriteArray(buf)
> dst.GetRasterBand(8).WriteArray(buf)
> dst.GetRasterBand(9).WriteArray(buf)
> dst.GetRasterBand(10).WriteArray(buf)
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
From JARED.RUBIN at saic.com  Mon May 12 20:50:43 2008
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Mon May 12 20:51:24 2008
Subject: [gdal-dev] creating multi banded imagery
In-Reply-To: <4828E48F.2030000@pmldnet.com>
References: <200805121726.00816.rubinj@nemesis.tucson.saic.com>
	<4828E48F.2030000@pmldnet.com>
Message-ID: <200805121850.43519.rubinj@nemesis.tucson.saic.com>

Ivan,
understood. i already tried NITF.
But i would expect that the gdal driver has some basic driver format that 
allows for unlimited number of bands.
Jared



On Monday 12 May 2008 18:45, Lucena, Ivan wrote:
>  work for driver/formats that does not support mul
From ivan.lucena at pmldnet.com  Mon May 12 21:13:24 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Mon May 12 21:13:26 2008
Subject: [gdal-dev] creating multi banded imagery
In-Reply-To: <200805121850.43519.rubinj@nemesis.tucson.saic.com>
References: <200805121726.00816.rubinj@nemesis.tucson.saic.com>
	<4828E48F.2030000@pmldnet.com>
	<200805121850.43519.rubinj@nemesis.tucson.saic.com>
Message-ID: <4828EB34.8080101@pmldnet.com>

Jared,

Good to know that you got it working.

Sorry I didn't make my self clear. What I meant is that since GDAL is 
composed of several driver, developed individually to support different 
formats, that will depend on the format design to dictate support 
multi-band or not.

The "unlimited" issue is also format-design dependent. I have seam some 
ridiculous big number of bands on Geotiff and HDF supported by GDAL but 
if a format was designed to just a limited number of bands then GDAL 
will respect that limitation.

Regards,

Ivan


Jared Rubin wrote:
> Ivan,
> understood. i already tried NITF.
> But i would expect that the gdal driver has some basic driver format that 
> allows for unlimited number of bands.
> Jared
> 
> 
> 
> On Monday 12 May 2008 18:45, Lucena, Ivan wrote:
>>  work for driver/formats that does not support mul
> 
> 
From randre at gmail.com  Tue May 13 00:39:43 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue May 13 00:39:46 2008
Subject: [gdal-dev] Work blah blah
Message-ID: <9c2015090805122139s1952ab1bqe3887de0600fffa9@mail.gmail.com>

Sorry about letting the conversation with Hector go bat-shit at the end of
the day today.  That was a long time to spend on that, and we probably
should just suggest a beer meeting, or a monthly touch-base.

See you in the morning.
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080512/dd9be9b3/attachment.html
From randre at gmail.com  Tue May 13 00:41:04 2008
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Tue May 13 00:41:06 2008
Subject: [gdal-dev] Re: Work blah blah
In-Reply-To: <9c2015090805122139s1952ab1bqe3887de0600fffa9@mail.gmail.com>
References: <9c2015090805122139s1952ab1bqe3887de0600fffa9@mail.gmail.com>
Message-ID: <9c2015090805122141o15501a36jf83f99bfc24a870a@mail.gmail.com>

<ahem> My apologies about that.  Moderators, feel free to strike that list
from the rolls, please.
--

On Mon, May 12, 2008 at 9:39 PM, Roger Andr? <randre@gmail.com> wrote:

> Sorry about letting the conversation with Hector go bat-shit at the end of
> the day today.  That was a long time to spend on that, and we probably
> should just suggest a beer meeting, or a monthly touch-base.
>
> See you in the morning.
> --
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080512/05d5910f/attachment.html
From jeshua at OpenOSX.com  Tue May 13 01:42:20 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Tue May 13 01:42:25 2008
Subject: [gdal-dev] netcdf option build error
In-Reply-To: <BDFB87C6-1EF0-4162-A986-AE78EA437C57@openosx.com>
References: <0CF7F60C-352C-4592-8D0C-4E0F51ACCEFC@openosx.com>
	<12322476-51DB-430B-8EC0-5C92BFF20256@kyngchaos.com>
	<99ACBC8C-FBB3-4F62-A9BA-272CE83CA63E@OpenOSX.com>
	<91AA0C23-D893-455F-A31C-9FC9552757AB@OpenOSX.com>
	<2AFD6BB3-8141-4022-9BB9-C97F08AC0678@kyngchaos.com>
	<DC5F5E37-3687-4031-B404-026407D552C5@openosx.com>
	<029FFC1A-CFCB-4240-8E2C-FDDEB8900E54@kyngchaos.com>
	<99DCC105-A178-40BF-8693-D3A91F595ABB@OpenOSX.com>
	<F3EE7F9C-DEBC-4CA1-9FCC-60D890414253@OpenOSX.com>
	<BDFB87C6-1EF0-4162-A986-AE78EA437C57@openosx.com>
Message-ID: <8A030FA1-408E-49FB-9291-46F046DA9ACC@OpenOSX.com>


On Apr 30, 2008, at 3:46 PM, Jeshua Lacock wrote:

>> On Apr 29, 2008, at 2:23 PM, Jeshua Lacock wrote:
>>
>>> GDapi.c: In function 'GDsdid':
>>> GDapi.c:10873: error: 'MAX_VAR_DIMS' undeclared (first use in this  
>>> function)
>>> GDapi.c:10873: error: (Each undeclared identifier is reported only  
>>> once
>>> GDapi.c:10873: error: for each function it appears in.)
>>> GDapi.c:10873: warning: unused variable 'dims'
>>> make[4]: *** [../../o/GDapi.o] Error 1
>>> make[3]: *** [lib-hdfeos] Error 2
>>> make[2]: *** [hdf4-install-obj] Error 2
>>> make[1]: *** [frmts-target] Error 2
>>> make: *** [gdal] Error 2
>>
>> Can anyone inform me where MAX_VAR_DIMS is expected to be? I cannot  
>> make sense of it.
>>
>> GDapi.c includes "mfhdf.h" (opposed to <mfhdf.h>), however, there  
>> is not any "mfhdf.h" in the GDAL branch. Copying "mfhdf.h" to / 
>> frmts/hdf4/hdf-eos does not help either, nor does including  
>> "hdf4_netcdf.h".
>>
>> This would help me figure out what is going on a great deal.
>
> I figured the issue out and I apologize for all my noise. I am  
> almost embarrassed to say what was causing the issue.
>
> My CFLAGS and CPPFLAGS were set to include both my HDF4 and HDF5  
> include directories. I unset them and it builds beautifully.



Hello,

In case anyone is interested, actually, it turns out that HDF4.2r3 was  
the problem. Switching to HDF4.2r2 is what really resolved this issue  
for me.


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364

From mateusz at loskot.net  Tue May 13 03:52:33 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue May 13 03:52:39 2008
Subject: Fwd: [gdal-dev] The JDEM format
In-Reply-To: <d94dd9d00805120015g5e7e6dceudfeb092c9432c34f@mail.gmail.com>
References: <d94dd9d00805080109j76600e0dreef36ff2d0b5a6a3@mail.gmail.com>	<4822B726.9020608@loskot.net>	<d94dd9d00805090103q76c99fd2x92d0f2a0b205bf3d@mail.gmail.com>
	<d94dd9d00805120015g5e7e6dceudfeb092c9432c34f@mail.gmail.com>
Message-ID: <482948C1.4040604@loskot.net>

Cherif Oueslati wrote:
> Simply it seems logical to have alsoo the JDEM format description
> with the cpp file to understand how can we produce the correpondent
> cpp file. In fact this is what i have to do; i have to develop a new
> driver having only the description of this new format (the logical
> organisation of the fields, their descriptions, sizes...).

Cherif,

AFAIU, you are looking for a pair of GDAL driver + format specification
you could learn from it in order to develop new driver.
If there is a problem with finding JDEM, I think you could grab GeoTIFF
driver or any other with published and available spec.

Sorry, I can't help particularly with the JDEM documentation.

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From oueslati.cherif at gmail.com  Tue May 13 09:41:04 2008
From: oueslati.cherif at gmail.com (Cherif Oueslati)
Date: Tue May 13 09:41:07 2008
Subject: [gdal-dev] [JDEM] Dataset sample file
Message-ID: <d94dd9d00805130641s65ae0e21q8669d3676d4a2573@mail.gmail.com>

Hello every body,

Did someone have a sample of a JDEM Dataset file, (a .MEM file) that
contains related RasterBands (in pixels and lines) and the correspondant
metadata.
I need a sample to understand the logical organisation of such a format.
With all my gratitude.
Cherif.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080513/f00d7e7b/attachment.html
From jasonbeverage at gmail.com  Tue May 13 12:21:15 2008
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Tue May 13 12:21:18 2008
Subject: [gdal-dev] Large NITF file performance problems
Message-ID: <2c4bbbeb0805130921h4978f825veaff8d3835cdc64e@mail.gmail.com>

Hi all,

I've got a customer who is using large NITF files (~1.5 GB) and is seeing
ridiculously slow load times in our application.  I don't have access to his
data, so I can't test directly, but it seems like the NITF driver may have
some issues with large file sizes (> 1GB).

To test on my end, I created a few different GeoTiff files (600 MB, 800 MB,
and 1.2 GB) and tried to convert them to NITF using gdal_translate.
Converting the 600 and 800 MB files worked just fine and had very reasonable
speed (few minutes).  However, when I tried to use gdal_translate on the 1.2
GB file, the process hung at 0% for forever and I had to kill it after
waiting for a very long time.  It seems as if there is something magical
about this 1 GB boundary.

Does anyone have any ideas or suggestions as to what could be causing this
issue?

Thanks!

Jason
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080513/392eb0a6/attachment.html
From even.rouault at mines-paris.org  Tue May 13 14:45:48 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue May 13 14:45:57 2008
Subject: [gdal-dev] Large NITF file performance problems
In-Reply-To: <2c4bbbeb0805130921h4978f825veaff8d3835cdc64e@mail.gmail.com>
References: <2c4bbbeb0805130921h4978f825veaff8d3835cdc64e@mail.gmail.com>
Message-ID: <200805132045.50035.even.rouault@mines-paris.org>

Hi,

I don't really understand why they would have issues with large file sizes 
(below the 4 GB of course)

I've tried the following small python script to generate a 1.2 GB NITF file 
filled with '1' as a value :

#!/usr/bin/env python

import gdal

new_ds = gdal.GetDriverByName( 'NITF' ).Create( 'largentf.ntf', 100000, 12000, 
1 )
new_ds.GetRasterBand(1).Fill(1)
new_ds = None


It runs in less than one minute on my slow machine. I can open the resulting 
file with OpenEV and scroll through it quite smoothly. gdalinfo -checksum 
largetntf.ntf also runs in about 3 minutes, which seems reasonnable.

a gdalinfo on the file shows that it is automatically tiled in blocks of 
256x256 and by looking at the code I can see that 256x256 tiling is 
automatically activated when either the number of lines or columns of the 
file is larger than 9999.

So I don't see any obvious reason why you get poor performance. You could 
probably break with a debugger to see where it idles during gdal_translate ?	

I email you the bzip2 result of the 1.2 GB file that is only 1KB... so you can 
test on the same file as me.

As far as your customer is concerned, maybe there is an issue with compression 
(for example a very large mono-block JPEG image ?). A 'gdalinfo' on the files 
could maybe give some hints ?

Le Tuesday 13 May 2008 18:21:15 Jason Beverage, vous avez ?crit?:
> Hi all,
>
> I've got a customer who is using large NITF files (~1.5 GB) and is seeing
> ridiculously slow load times in our application.  I don't have access to
> his data, so I can't test directly, but it seems like the NITF driver may
> have some issues with large file sizes (> 1GB).
>
> To test on my end, I created a few different GeoTiff files (600 MB, 800 MB,
> and 1.2 GB) and tried to convert them to NITF using gdal_translate.
> Converting the 600 and 800 MB files worked just fine and had very
> reasonable speed (few minutes).  However, when I tried to use
> gdal_translate on the 1.2 GB file, the process hung at 0% for forever and I
> had to kill it after waiting for a very long time.  It seems as if there is
> something magical about this 1 GB boundary.
>
> Does anyone have any ideas or suggestions as to what could be causing this
> issue?
>
> Thanks!
>
> Jason


From ivan.lucena at pmldnet.com  Tue May 13 14:55:00 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Tue May 13 14:55:02 2008
Subject: [gdal-dev] Large NITF file performance problems
In-Reply-To: <200805132045.50035.even.rouault@mines-paris.org>
References: <2c4bbbeb0805130921h4978f825veaff8d3835cdc64e@mail.gmail.com>
	<200805132045.50035.even.rouault@mines-paris.org>
Message-ID: <4829E404.4050903@pmldnet.com>

Even,

That sounds just like a problem with another driver I wrote.

What you are saying is that Create() is fast but what Jason is saying is 
that CreateCopy() is slow. CreateCopy() will depend on the other driver 
(gtiff) strategy of handling the data blocks, no?

Ivan

Even Rouault wrote:
> Hi,
> 
> I don't really understand why they would have issues with large file sizes 
> (below the 4 GB of course)
> 
> I've tried the following small python script to generate a 1.2 GB NITF file 
> filled with '1' as a value :
> 
> #!/usr/bin/env python
> 
> import gdal
> 
> new_ds = gdal.GetDriverByName( 'NITF' ).Create( 'largentf.ntf', 100000, 12000, 
> 1 )
> new_ds.GetRasterBand(1).Fill(1)
> new_ds = None
> 
> 
> It runs in less than one minute on my slow machine. I can open the resulting 
> file with OpenEV and scroll through it quite smoothly. gdalinfo -checksum 
> largetntf.ntf also runs in about 3 minutes, which seems reasonnable.
> 
> a gdalinfo on the file shows that it is automatically tiled in blocks of 
> 256x256 and by looking at the code I can see that 256x256 tiling is 
> automatically activated when either the number of lines or columns of the 
> file is larger than 9999.
> 
> So I don't see any obvious reason why you get poor performance. You could 
> probably break with a debugger to see where it idles during gdal_translate ?	
> 
> I email you the bzip2 result of the 1.2 GB file that is only 1KB... so you can 
> test on the same file as me.
> 
> As far as your customer is concerned, maybe there is an issue with compression 
> (for example a very large mono-block JPEG image ?). A 'gdalinfo' on the files 
> could maybe give some hints ?
> 
> Le Tuesday 13 May 2008 18:21:15 Jason Beverage, vous avez ?crit :
>> Hi all,
>>
>> I've got a customer who is using large NITF files (~1.5 GB) and is seeing
>> ridiculously slow load times in our application.  I don't have access to
>> his data, so I can't test directly, but it seems like the NITF driver may
>> have some issues with large file sizes (> 1GB).
>>
>> To test on my end, I created a few different GeoTiff files (600 MB, 800 MB,
>> and 1.2 GB) and tried to convert them to NITF using gdal_translate.
>> Converting the 600 and 800 MB files worked just fine and had very
>> reasonable speed (few minutes).  However, when I tried to use
>> gdal_translate on the 1.2 GB file, the process hung at 0% for forever and I
>> had to kill it after waiting for a very long time.  It seems as if there is
>> something magical about this 1 GB boundary.
>>
>> Does anyone have any ideas or suggestions as to what could be causing this
>> issue?
>>
>> Thanks!
>>
>> Jason
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
From matt at diglib1.cecs.missouri.edu  Tue May 13 16:22:39 2008
From: matt at diglib1.cecs.missouri.edu (Matt Klaric)
Date: Tue May 13 16:40:38 2008
Subject: [gdal-dev] creating multi banded imagery
In-Reply-To: <20080513160007.BE0C2E01738@lists.osgeo.org>
References: <20080513160007.BE0C2E01738@lists.osgeo.org>
Message-ID: <1210710160.5416.6.camel@coal.cgi.missouri.edu>

> Date: Mon, 12 May 2008 18:50:43 -0600
> From: Jared Rubin <JARED.RUBIN@saic.com>
> Subject: Re: [gdal-dev] creating multi banded imagery
> To: "Lucena, Ivan" <ivan.lucena@pmldnet.com>
> Cc: gdal-dev@lists.osgeo.org
> Message-ID: <200805121850.43519.rubinj@nemesis.tucson.saic.com>
> Content-Type: text/plain;  charset="iso-8859-1"
> 
> Ivan,
> understood. i already tried NITF.
> But i would expect that the gdal driver has some basic driver format that 
> allows for unlimited number of bands.

Check out the Erdas Imagine (aka HFA) format.  It allows for an
arbitrary number of bands and doesn't have a file size limit. While, I'm
sure there is a limit, we've used images that have 14 bands. Also,
there's no file size limit that comes along with some other formats.
(Although, for images greater than 2GB, a spill file will be used.)

--Matt

From wendell at enflight.com  Tue May 13 18:00:23 2008
From: wendell at enflight.com (Wendell Turner)
Date: Tue May 13 18:00:25 2008
Subject: [gdal-dev] grey output from gdal2tiles.py
Message-ID: <20080513220023.GA17959@q.rho.net>


I used gdal2tiles.py to convert a GeoTIFF file into a
directory for use with OpenLayers.  The tiles are generated,
and can be viewed with OpenLayers, but the tiles are all
gray.  There appears to be some structure to the images, but
they do not have any colors, and little detail.

The input file looks fine in gtviewer.

Is the input to gdal2tiles supposed to be in some other
format?  It uses gdal.Open, which I suppose can open any
type of file format.  Any suggestions?

Thanks,

Wendell

From warmerdam at pobox.com  Tue May 13 22:21:35 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 13 22:21:53 2008
Subject: [gdal-dev] grey output from gdal2tiles.py
In-Reply-To: <20080513220023.GA17959@q.rho.net>
References: <20080513220023.GA17959@q.rho.net>
Message-ID: <482A4CAF.4030008@pobox.com>

Wendell Turner wrote:
> I used gdal2tiles.py to convert a GeoTIFF file into a
> directory for use with OpenLayers.  The tiles are generated,
> and can be viewed with OpenLayers, but the tiles are all
> gray.  There appears to be some structure to the images, but
> they do not have any colors, and little detail.
> 
> The input file looks fine in gtviewer.
> 
> Is the input to gdal2tiles supposed to be in some other
> format?  It uses gdal.Open, which I suppose can open any
> type of file format.  Any suggestions?

Wendell,

I don't know what gtviewer is.  Can you make the original file available
to review?  I suspect it has a very limited dynamic range and the viewer
you are using for it directly does a contrast stretch, but this doesn't
happen with the tiles in openlayers. Alternatively, perhaps it doesn't
start out as an RGB image as is expected by gdal2tiles.

So basically, review the input file structure (a gdalinfo report will
help) vs. what gdal2tiles expects as input.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ivan.lucena at pmldnet.com  Wed May 14 07:13:47 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed May 14 07:13:51 2008
Subject: [gdal-dev] creating multi banded imagery
In-Reply-To: <1210710160.5416.6.camel@coal.cgi.missouri.edu>
References: <20080513160007.BE0C2E01738@lists.osgeo.org>
	<1210710160.5416.6.camel@coal.cgi.missouri.edu>
Message-ID: <482AC96B.2060905@pmldnet.com>

Matt,

If you try BigTiff, GeoTiff with recent improvements, you can also 
archive what you are looking for but the resulting files will not be 
supported by softwares that are not updates for BigTiff. I asked some 
software vendors about that and they said that are planning to support 
BigTiff in about a year or more.

Best regards,

Ivan

Matt Klaric wrote:
>> Date: Mon, 12 May 2008 18:50:43 -0600
>> From: Jared Rubin <JARED.RUBIN@saic.com>
>> Subject: Re: [gdal-dev] creating multi banded imagery
>> To: "Lucena, Ivan" <ivan.lucena@pmldnet.com>
>> Cc: gdal-dev@lists.osgeo.org
>> Message-ID: <200805121850.43519.rubinj@nemesis.tucson.saic.com>
>> Content-Type: text/plain;  charset="iso-8859-1"
>>
>> Ivan,
>> understood. i already tried NITF.
>> But i would expect that the gdal driver has some basic driver format that 
>> allows for unlimited number of bands.
> 
> Check out the Erdas Imagine (aka HFA) format.  It allows for an
> arbitrary number of bands and doesn't have a file size limit. While, I'm
> sure there is a limit, we've used images that have 14 bands. Also,
> there's no file size limit that comes along with some other formats.
> (Although, for images greater than 2GB, a spill file will be used.)
> 
> --Matt
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
From klokan at klokan.cz  Wed May 14 07:47:42 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed May 14 07:47:44 2008
Subject: [gdal-dev] grey output from gdal2tiles.py
In-Reply-To: <482A4CAF.4030008@pobox.com>
References: <20080513220023.GA17959@q.rho.net> <482A4CAF.4030008@pobox.com>
Message-ID: <6e41d95b0805140447i50893acfv15a55b7c46f25b0b@mail.gmail.com>

Hi,

I guess it is because your GeoTIFF is paletted. (result of gdalinfo
will tell us that probably).

If I am right then fast solution will be to run first

pct2rgb.py on your TIFF to convert it to true RGB colors and then run
gdal2tiles.py on the result.

Same problem appear for example with NOAA marine maps, which are also paletted.
Frank, do you think functionality of pct2rgb should be embedded
directly in gdal2tiles? I realized several people have trouble with
that...

Klokan

On Wed, May 14, 2008 at 4:21 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Wendell Turner wrote:
>
> > I used gdal2tiles.py to convert a GeoTIFF file into a
> > directory for use with OpenLayers.  The tiles are generated,
> > and can be viewed with OpenLayers, but the tiles are all
> > gray.  There appears to be some structure to the images, but
> > they do not have any colors, and little detail.
> >
> > The input file looks fine in gtviewer.
> >
> > Is the input to gdal2tiles supposed to be in some other
> > format?  It uses gdal.Open, which I suppose can open any
> > type of file format.  Any suggestions?
> >
>
>  Wendell,
>
>  I don't know what gtviewer is.  Can you make the original file available
>  to review?  I suspect it has a very limited dynamic range and the viewer
>  you are using for it directly does a contrast stretch, but this doesn't
>  happen with the tiles in openlayers. Alternatively, perhaps it doesn't
>  start out as an RGB image as is expected by gdal2tiles.
>
>  So basically, review the input file structure (a gdalinfo report will
>  help) vs. what gdal2tiles expects as input.
>
>  Best regards,
>  --
>
> ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From klokan at klokan.cz  Wed May 14 08:12:01 2008
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed May 14 08:12:05 2008
Subject: [gdal-dev] GDAL2Tiles.py question
In-Reply-To: <6e41d95b0805140510k29af6269v99e12586bc042401@mail.gmail.com>
References: <000001c8b219$b42354c0$5c01a8c0@lp.local>
	<6e41d95b0805140510k29af6269v99e12586bc042401@mail.gmail.com>
Message-ID: <6e41d95b0805140512o15351cf5wfe4edafd03d8ca2a@mail.gmail.com>

Hi Nathan,

 I am submitting your question to the gdal-dev mailing-list..

 > My name is Nathan and I have been looking to implement a map server for a
 > while now.  I finally was directed to your gdal2tiles.py tool by someone at
 > OpenLayers.org and am extremely thankful that I was.  I have downloaded and
 > attempted to use your tool on Windows but hit a snag.  I installed FWTools
 > and tried executing the tool on a Natural Earth map.  However, I got the
 > error: "The ordinal 2821 could not be located in the dynamic link library
 > LIBEAY32.dll" .  The shell (FWTools shell) gives the error: "ImportError:
 > DLL load failed with error code 182" .  To fix the error I ended up copying
 > libeay32.dll to the pymod directory in the FWTools install directory.  I
 > mention this to you because it is not obvious to someone with little or no
 > real python experience that it is not an issue with gdal2tiles, but rather
 > the gdal libraries.  Hope that helps someone down the line.

 It seems that the problem is really in GDAL loading this DLL library.
 I have never heard about such problem before...
 What data format is used by "Natural Earth"? I thought it is either
 JPEG or GeoTIFF.
 Can you send us the gdalinfo <inputfile> result?


 > Also, I was curious if there was a way to speed up gdal2tiles on a large
 > map?it does about a tile per second or slower at times.  And I don't know
 > much about the GDAL specification but is it possible to change the number of
 > zoom levels?

 Regarding to speed: GDAL2Tiles is highly using GDAL library, so speed
 depends on it as well, but generating one tile per second is
 horrible...
 There has to be something wrong with your setup I guess, or the
 workflow you use.
 For speed improvement during generation of tiles is better to have a
 GeoTIFF (best with internal pyramid) or a Wavelet based file as a
 source (JPEG2000,MrSID,ECW) or any other format which uses overviews.
 You can try to convert your file to one of them by gdal_translate.

 A step by step guide is described online:
 http://blog.thematicmapping.org/2008/03/generating-map-tiles-with-gdal2tiles.html


 > Thanks for a great tool!

 You are welcome...

 Klokan



 > Nathan Boettcher
 > Senior Web Developer
 > www.lawtonprinting.com
From plieger at knmi.nl  Wed May 14 10:30:41 2008
From: plieger at knmi.nl (Maarten Plieger)
Date: Wed May 14 10:31:46 2008
Subject: [gdal-dev] GDAL with netCDF4 support
Message-ID: <482AF791.9000003@knmi.nl>

Hello,

I have tried to build GDAL with netCDF4 support. I have used the 
hdf5-1.8.0-snap5 and netcdf-4.0-beta2 libraries to do this.
(netCDF4 is actually internally HDF5, which is explained here: 
http://www.unidata.ucar.edu/software/netcdf/netcdf-4/ )
/
/To use the netCDF4 API it needs to be compiled with the latest HDF5 
API, which is 1.8.0/
/HDF 1.8  is a completely new API and some functions have changed, 
causing the HDF5 driver in GDAL to complain.  There are backward 
compatible functions available in this API, therefore I have replaced 
the HDF1.8 functions by adding in hdfdataset.h:
- #define H5Gopen H5Gopen1
- #define H5Dopen H5Dopen1
- #define H5Aiterate H5Aiterate1
This is of course a 'dirty' method but it works for me right now. GDAL 
was build with success.

Now I am able to write netCDF4 files with GDAL.
Now we come to another error: The netCDF4 driver does not recognize its 
own written netCDF files, because they are actually HDF5 files. 
Re-Opening the dataset in the CreateCopy function therefore fails. And 
when doing 'gdalinfo' on these files the HDF5 driver pops up.

I adjusted the netCDF driver to recognize the netCDF4 files.
In 'netCDFdataset.cpp' at line 1308: I added " && 
!((nc_inq_libvers()[0]=='4')&&EQUALN((const char 
*)poOpenInfo->pabyHeader+1,"HDF",3))) ". This line checks for the 
netCDF4 library ('4')  and for a 'HDF' header.
This makes sure that in case of the netCDF4 library, HDF files are also 
picked up by this driver.

Now it is possible to read and write netCDF4 files with GDAL.

The reason I want to use netCDF4 is because I want to write HDF5 files 
supporting CF-conventions with the Web Coverage Service of UMN 
Mapserver. I also would like to add a lot more metadata.
Is something like this done before? What would be the best way to add 
our custom metadata, is it by adjusting the driver?

I thought it would be nice to share this experiment with you...

Cheers,
Maarten Plieger


  
From peter.vogt at jrc.it  Wed May 14 17:33:54 2008
From: peter.vogt at jrc.it (Peter Vogt)
Date: Wed May 14 10:33:58 2008
Subject: [gdal-dev] gdal_merge segfaults
Message-ID: <482B5AC2.8080407@jrc.it>

Hi,

I have gdal-1.5.1 installed from rpm in PCLinuxOS and things work ok 
besides that when trying to merge 3 files (part1/2/3.tif) with :
gdal_merge.py -v -o test.tif part*.tif
gdal_merge.py starts fine but then segfaults after the first image.
I tested the same files & command on a RedHat 5 machine where gdal1.5.1 
was installed from source and there everything worked fine.
I finally managed to get a gdal1.5.1 source install up on my PCLOS 
machine but still had the same segfault for gdal_merge.py. After some 
search in Google I now suspect that this is related to the Python 
distribution which in RedHat is version 2.3.4 and in PCLOS is 2.4.3. A 
Python update to 2.4.5 did not change anything.
I finally ended up installing FWTools which compiles its own 
gdal_merge.py. The one in FWTools works fine and uses its own Python 
environment of version 2.2.
So in short I have for gdal_merge.py
- Python 2.3.4 or Python 2.2 (FWTools) works perfectly fine
- Python 2.4.3 or higher works but then segfaults

Can you give me any hint to find the source of the problem?

-peter

From warmerdam at pobox.com  Wed May 14 10:45:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 14 10:46:08 2008
Subject: [gdal-dev] GDAL with netCDF4 support
In-Reply-To: <482AF791.9000003@knmi.nl>
References: <482AF791.9000003@knmi.nl>
Message-ID: <482AFB08.4070907@pobox.com>

Maarten Plieger wrote:
> Hello,
> 
> I have tried to build GDAL with netCDF4 support. I have used the 
> hdf5-1.8.0-snap5 and netcdf-4.0-beta2 libraries to do this.
> (netCDF4 is actually internally HDF5, which is explained here: 
> http://www.unidata.ucar.edu/software/netcdf/netcdf-4/ )
> /
> /To use the netCDF4 API it needs to be compiled with the latest HDF5 
> API, which is 1.8.0/
> /HDF 1.8  is a completely new API and some functions have changed, 
> causing the HDF5 driver in GDAL to complain.  There are backward 
> compatible functions available in this API, therefore I have replaced 
> the HDF1.8 functions by adding in hdfdataset.h:
> - #define H5Gopen H5Gopen1
> - #define H5Dopen H5Dopen1
> - #define H5Aiterate H5Aiterate1
> This is of course a 'dirty' method but it works for me right now. GDAL 
> was build with success.

Maarten,

I would appreciate your filing a ticket on this issue.

> Now I am able to write netCDF4 files with GDAL.
> Now we come to another error: The netCDF4 driver does not recognize its 
> own written netCDF files, because they are actually HDF5 files. 
> Re-Opening the dataset in the CreateCopy function therefore fails. And 
> when doing 'gdalinfo' on these files the HDF5 driver pops up.
> 
> I adjusted the netCDF driver to recognize the netCDF4 files.
> In 'netCDFdataset.cpp' at line 1308: I added " && 
> !((nc_inq_libvers()[0]=='4')&&EQUALN((const char 
> *)poOpenInfo->pabyHeader+1,"HDF",3))) ". This line checks for the 
> netCDF4 library ('4')  and for a 'HDF' header.
> This makes sure that in case of the netCDF4 library, HDF files are also 
> picked up by this driver.
> 
> Now it is possible to read and write netCDF4 files with GDAL.

I would appreciate another ticket on this issue.

It was not actually my original thinking that the netcdf driver would
support netCDF4 files, under the assumption that the HDF5 driver could
be used so I'm not sure I want to include these changes. But it would
be appropriate to have a record of the issue, and a mechanism for those
that wish to do what you are doing.

> The reason I want to use netCDF4 is because I want to write HDF5 files 
> supporting CF-conventions with the Web Coverage Service of UMN 
> Mapserver. I also would like to add a lot more metadata.
> Is something like this done before? What would be the best way to add 
> our custom metadata, is it by adjusting the driver?

I'm not aware of anyone doing what you are doing, so you are at the
very least stretching the boundaries of current support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed May 14 10:59:24 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 14 11:00:04 2008
Subject: [gdal-dev] gdal_merge segfaults
In-Reply-To: <482B5AC2.8080407@jrc.it>
References: <482B5AC2.8080407@jrc.it>
Message-ID: <482AFE4C.9050404@pobox.com>

Peter Vogt wrote:
> Hi,
> 
> I have gdal-1.5.1 installed from rpm in PCLinuxOS and things work ok 
> besides that when trying to merge 3 files (part1/2/3.tif) with :
> gdal_merge.py -v -o test.tif part*.tif
> gdal_merge.py starts fine but then segfaults after the first image.
> I tested the same files & command on a RedHat 5 machine where gdal1.5.1 
> was installed from source and there everything worked fine.
> I finally managed to get a gdal1.5.1 source install up on my PCLOS 
> machine but still had the same segfault for gdal_merge.py. After some 
> search in Google I now suspect that this is related to the Python 
> distribution which in RedHat is version 2.3.4 and in PCLOS is 2.4.3. A 
> Python update to 2.4.5 did not change anything.
> I finally ended up installing FWTools which compiles its own 
> gdal_merge.py. The one in FWTools works fine and uses its own Python 
> environment of version 2.2.
> So in short I have for gdal_merge.py
> - Python 2.3.4 or Python 2.2 (FWTools) works perfectly fine
> - Python 2.4.3 or higher works but then segfaults
> 
> Can you give me any hint to find the source of the problem?

Peter,

I can't think of any reason that gdal_merge.py would be particular
about the version of Python.  I'm not sure how we would track down
this problem without having direct access to your machine to debug
things.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From wendell at enflight.com  Wed May 14 11:26:05 2008
From: wendell at enflight.com (Wendell Turner)
Date: Wed May 14 11:26:08 2008
Subject: [gdal-dev] grey output from gdal2tiles.py
In-Reply-To: <6e41d95b0805140447i50893acfv15a55b7c46f25b0b@mail.gmail.com>
References: <20080513220023.GA17959@q.rho.net> <482A4CAF.4030008@pobox.com>
	<6e41d95b0805140447i50893acfv15a55b7c46f25b0b@mail.gmail.com>
Message-ID: <20080514152605.GB3973@q.rho.net>

Yes, sure enough, that was it.  Converting it with
pct2rgb.py works great!  (And yes, it was a NOAA chart I was
working with).

I use gtviewer
(http://nixbit.com/cat/science-and-engineering/geographical/geotiff-viewer/)
to view the files with.  Are there better/easier ones to
use?

Thank you both for this answer and the tremendous work in
all of these tools.

Wendell


On Wed, May 14, 2008 at 01:47:42PM +0200, Klokan Petr P?idal wrote:
> Hi,
> 
> I guess it is because your GeoTIFF is paletted. (result of gdalinfo
> will tell us that probably).
> 
> If I am right then fast solution will be to run first
> 
> pct2rgb.py on your TIFF to convert it to true RGB colors and then run
> gdal2tiles.py on the result.
> 
> Same problem appear for example with NOAA marine maps, which are also paletted.
> Frank, do you think functionality of pct2rgb should be embedded
> directly in gdal2tiles? I realized several people have trouble with
> that...
> 
> Klokan
> 
> On Wed, May 14, 2008 at 4:21 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > Wendell Turner wrote:
> >
> > > I used gdal2tiles.py to convert a GeoTIFF file into a
> > > directory for use with OpenLayers.  The tiles are generated,
> > > and can be viewed with OpenLayers, but the tiles are all
> > > gray.  There appears to be some structure to the images, but
> > > they do not have any colors, and little detail.
> > >
> > > The input file looks fine in gtviewer.
> > >
> > > Is the input to gdal2tiles supposed to be in some other
> > > format?  It uses gdal.Open, which I suppose can open any
> > > type of file format.  Any suggestions?
> > >
> >
> >  Wendell,
> >
> >  I don't know what gtviewer is.  Can you make the original file available
> >  to review?  I suspect it has a very limited dynamic range and the viewer
> >  you are using for it directly does a contrast stretch, but this doesn't
> >  happen with the tiles in openlayers. Alternatively, perhaps it doesn't
> >  start out as an RGB image as is expected by gdal2tiles.
> >
> >  So basically, review the input file structure (a gdalinfo report will
> >  help) vs. what gdal2tiles expects as input.
> >
> >  Best regards,
> >  --
> >
> > ---------------------------------------+--------------------------------------
> >  I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> >  light and sound - activate the windows | http://pobox.com/~warmerdam
> >  and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> >
> >
> >
> >  _______________________________________________
> >  gdal-dev mailing list
> >  gdal-dev@lists.osgeo.org
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From wendell at enflight.com  Wed May 14 12:04:15 2008
From: wendell at enflight.com (Wendell Turner)
Date: Wed May 14 12:04:17 2008
Subject: [gdal-dev] gdal_translate and -projwin
Message-ID: <20080514160414.GA4955@q.rho.net>

Are the projwin arguments to gdal_translate signed lat/lng?
I'm trying to crop a GeoTIFF image, but something is amiss.

The gdalinfo is shown below, so it seems that this should
work:
  gdal_translate ny71n.tif -projwin -77.0 44.0 -69.0 42.0 crop.tif
however, this results in
  Input file size is 12069, 4319
  Computed -srcwin 99674 62813 0 0 from projected window.
  Computed -srcwin falls outside raster size of 12069x4319.

I also tried it with the last two parameters as width and
height (I thought I read that somewhere):
  gdal_translate ny71n.tif -projwin -77.0 44.0 7.0 -2.0 cropx.tif
but with approx. the same results.

What should the parameters be to crop the image using
lat/lng?

Thanks,

Wendell

--------------------------------------------------------

Driver: GTiff/GeoTIFF
Files: ny71n.tif
Size is 12069, 4319
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-8695881.965399086475372,5480014.707196786999702)
Pixel Size = (87.242429161146731,-87.242429161146731)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-8695881.965, 5480014.707) ( 78d 6'59.17"W, 44d17'10.81"N)
Lower Left  (-8695881.965, 5103214.656) ( 78d 6'59.17"W, 41d48'15.36"N)
Upper Right (-7642953.088, 5480014.707) ( 68d39'28.14"W, 44d17'10.81"N)
Lower Right (-7642953.088, 5103214.656) ( 68d39'28.14"W, 41d48'15.36"N)
Center      (-8169417.527, 5291614.681) ( 73d23'13.65"W, 43d 3'28.61"N)
Band 1 Block=12069x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 249,238,246,255
    1: 218,229,139,255
    2: 222,236,184,255
    ...

From warmerdam at pobox.com  Wed May 14 12:24:53 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 14 12:25:21 2008
Subject: [gdal-dev] gdal_translate and -projwin
In-Reply-To: <20080514160414.GA4955@q.rho.net>
References: <20080514160414.GA4955@q.rho.net>
Message-ID: <482B1255.7000109@pobox.com>

Wendell Turner wrote:
> Are the projwin arguments to gdal_translate signed lat/lng?
> I'm trying to crop a GeoTIFF image, but something is amiss.
> 
> The gdalinfo is shown below, so it seems that this should
> work:
>   gdal_translate ny71n.tif -projwin -77.0 44.0 -69.0 42.0 crop.tif
> however, this results in
>   Input file size is 12069, 4319
>   Computed -srcwin 99674 62813 0 0 from projected window.
>   Computed -srcwin falls outside raster size of 12069x4319.
> 
> I also tried it with the last two parameters as width and
> height (I thought I read that somewhere):
>   gdal_translate ny71n.tif -projwin -77.0 44.0 7.0 -2.0 cropx.tif
> but with approx. the same results.
> 
> What should the parameters be to crop the image using
> lat/lng?

Wendell,

The -projwin arguments need to be in the coordinate system of the
image, which in this case is Mercator meters.  There is no support
with gdal_translate currently to specify the corner coordiantes in
long/lat unless that is the native coordinate system of the image.

> Upper Left  (-8695881.965, 5480014.707) ( 78d 6'59.17"W, 44d17'10.81"N)
> Lower Left  (-8695881.965, 5103214.656) ( 78d 6'59.17"W, 41d48'15.36"N)
> Upper Right (-7642953.088, 5480014.707) ( 68d39'28.14"W, 44d17'10.81"N)
> Lower Right (-7642953.088, 5103214.656) ( 68d39'28.14"W, 41d48'15.36"N)
> Center      (-8169417.527, 5291614.681) ( 73d23'13.65"W, 43d 3'28.61"N)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From wendell at enflight.com  Wed May 14 12:41:47 2008
From: wendell at enflight.com (Wendell Turner)
Date: Wed May 14 12:41:50 2008
Subject: [gdal-dev] gdal_translate and -projwin
In-Reply-To: <482B1255.7000109@pobox.com>
References: <20080514160414.GA4955@q.rho.net> <482B1255.7000109@pobox.com>
Message-ID: <20080514164147.GA5479@q.rho.net>

On Wed, May 14, 2008 at 12:24:53PM -0400, Frank Warmerdam wrote:
> Wendell Turner wrote:
> >Are the projwin arguments to gdal_translate signed lat/lng?
> >I'm trying to crop a GeoTIFF image, but something is amiss.
> >
> >What should the parameters be to crop the image using
> >lat/lng?
> 
> The -projwin arguments need to be in the coordinate system of the
> image, which in this case is Mercator meters.  There is no support
> with gdal_translate currently to specify the corner coordiantes in
> long/lat unless that is the native coordinate system of the image.

Ok.  Can I use gdaltransform to convert to a system where
lat/lng is the native coordinate system?  Would that be kept
in OpenLayers?  (I noticed that in OpenLayers, the lower
left is 0,0 and the units are in pixels (I think, it doesn't
seem to be meters)).  Or would I need to read the numbers
from gdalinfo into the OpenLayers javascript and do the
mapping myself?

Thanks yet again,

Wendell

From woklist at kyngchaos.com  Wed May 14 13:53:40 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed May 14 13:53:45 2008
Subject: [gdal-dev] Mapserver & GDAL in various Linux repositories
Message-ID: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>

I'm trying to get a handle on installing Mapserver on different Linux  
systems, so I can make recommendations to clients for setting up  
systems with Mapserver.

For standard repositories for different Linux distributions, I see  
quite a variety of names and versions:

Ubuntu: I have 8.04 on my MacBook, so I could check this directly - I  
find MapServer 5.0.0 and GDAL 1.4.4.  A web package list gives me MS  
4.10 and GDAL 1.4.1 for 7.10.

Debian: the web package listing shows MS 4.10/GDAL 1.5.0 for etch, and  
MS 5.0.2/GDAL 1.5.1 for the upcoming lenny.

Redhat: I couldn't find a web interface to search for packages, but  
did find a reference to Redhat 5 which has MS 4.10 and GDAL 1.4.2.

The Mapserver download page has links to old Mapping Hacks RPMs, and a  
really old FGS bundle.

There's the FWTools, which is supposed to have the latest dev versions  
of MS and GDAL for almost any 32bit Linux, but I'm not sure I want to  
put dev versions into a production environment.


Any other ideas? - custom repositories with more up to date, or  
consistent across Linux systems, version?  Building from source would  
only be an option for the more savvy clients.  Maybe something similar  
to FWTools but with stable versions only?

I definitely want at least MapServer 5 (though I could live with 4.10  
in a pinch).  GDAL version is more flexible, though it would be good  
to have the newer Python bindings in 1.5.  Other support dependencies  
are less of a concern (except maybe PROJ).

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From jasonbeverage at gmail.com  Wed May 14 14:24:19 2008
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Wed May 14 14:24:21 2008
Subject: [gdal-dev] Large NITF file performance problems
In-Reply-To: <200805132045.50035.even.rouault@mines-paris.org>
References: <2c4bbbeb0805130921h4978f825veaff8d3835cdc64e@mail.gmail.com>
	<200805132045.50035.even.rouault@mines-paris.org>
Message-ID: <2c4bbbeb0805141124tc2833depf9c3d0ee35a47956@mail.gmail.com>

Hi Even,

Thanks for your sample file, it really helped.  It loads quickly in our
application and in OpenEV so I'll have to look down another route to find
out what's wrong with the customer's data.

However, it does appear that there is a problem somewhere when doing a
CreateCopy() as Ivan pointed out.  I can translate that file to a GeoTiff in
about 40seconds, but writing NITF has been going for about 5 minutes now and
its still on "0" with no progress reported.

Thanks,

Jason

On Tue, May 13, 2008 at 2:45 PM, Even Rouault <even.rouault@mines-paris.org>
wrote:

> Hi,
>
> I don't really understand why they would have issues with large file sizes
> (below the 4 GB of course)
>
> I've tried the following small python script to generate a 1.2 GB NITF file
> filled with '1' as a value :
>
> #!/usr/bin/env python
>
> import gdal
>
> new_ds = gdal.GetDriverByName( 'NITF' ).Create( 'largentf.ntf', 100000,
> 12000,
> 1 )
> new_ds.GetRasterBand(1).Fill(1)
> new_ds = None
>
>
> It runs in less than one minute on my slow machine. I can open the
> resulting
> file with OpenEV and scroll through it quite smoothly. gdalinfo -checksum
> largetntf.ntf also runs in about 3 minutes, which seems reasonnable.
>
> a gdalinfo on the file shows that it is automatically tiled in blocks of
> 256x256 and by looking at the code I can see that 256x256 tiling is
> automatically activated when either the number of lines or columns of the
> file is larger than 9999.
>
> So I don't see any obvious reason why you get poor performance. You could
> probably break with a debugger to see where it idles during gdal_translate
> ?
>
> I email you the bzip2 result of the 1.2 GB file that is only 1KB... so you
> can
> test on the same file as me.
>
> As far as your customer is concerned, maybe there is an issue with
> compression
> (for example a very large mono-block JPEG image ?). A 'gdalinfo' on the
> files
> could maybe give some hints ?
>
> Le Tuesday 13 May 2008 18:21:15 Jason Beverage, vous avez ?crit :
> > Hi all,
> >
> > I've got a customer who is using large NITF files (~1.5 GB) and is seeing
> > ridiculously slow load times in our application.  I don't have access to
> > his data, so I can't test directly, but it seems like the NITF driver may
> > have some issues with large file sizes (> 1GB).
> >
> > To test on my end, I created a few different GeoTiff files (600 MB, 800
> MB,
> > and 1.2 GB) and tried to convert them to NITF using gdal_translate.
> > Converting the 600 and 800 MB files worked just fine and had very
> > reasonable speed (few minutes).  However, when I tried to use
> > gdal_translate on the 1.2 GB file, the process hung at 0% for forever and
> I
> > had to kill it after waiting for a very long time.  It seems as if there
> is
> > something magical about this 1 GB boundary.
> >
> > Does anyone have any ideas or suggestions as to what could be causing
> this
> > issue?
> >
> > Thanks!
> >
> > Jason
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080514/c9aff44b/attachment.html
From warmerdam at pobox.com  Wed May 14 14:32:55 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 14 14:33:26 2008
Subject: [gdal-dev] Re: [mapserver-users] Mapserver & GDAL in various Linux
	repositories
In-Reply-To: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>
References: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>
Message-ID: <482B3057.50408@pobox.com>

William Kyngesburye wrote:
> The Mapserver download page has links to old Mapping Hacks RPMs, and a 
> really old FGS bundle.
> 
> There's the FWTools, which is supposed to have the latest dev versions 
> of MS and GDAL for almost any 32bit Linux, but I'm not sure I want to 
> put dev versions into a production environment.
> 
> 
> Any other ideas? - custom repositories with more up to date, or 
> consistent across Linux systems, version?  Building from source would 
> only be an option for the more savvy clients.  Maybe something similar 
> to FWTools but with stable versions only?
> 
> I definitely want at least MapServer 5 (though I could live with 4.10 in 
> a pinch).  GDAL version is more flexible, though it would be good to 
> have the newer Python bindings in 1.5.  Other support dependencies are 
> less of a concern (except maybe PROJ).

William,

For system where you can't get reliable pre-made packages, I'd encourage use
of FGS.  It is intended for that role.  There has been a bunch of work recently
to update FGS to more recent versions of the various packages.

FGS could definately benefit from more assistance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dmorissette at mapgears.com  Wed May 14 14:34:07 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed May 14 14:34:32 2008
Subject: [gdal-dev] Re: [mapserver-users] Mapserver & GDAL in various Linux
	repositories
In-Reply-To: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>
References: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>
Message-ID: <482B309F.20600@mapgears.com>

William Kyngesburye wrote:
> 
> The Mapserver download page has links to old Mapping Hacks RPMs, and a 
> really old FGS bundle.
> 

With respect to FGS, there have been no official/public releases in 
quite a while, but we've continued to use it internally. Recently we've 
started putting more work towards a new public release and last week a 
1.0 release with the latest version of everything has been posted to the 
download site and mentioned on the FGS list, but unfortunately the 
website is still lagging behind.

Here is the relevant mailing list thread with the download/install info 
for FGS 1.0:
http://lists.maptools.org/pipermail/foss-gis-suite/2008-May/000639.html

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From gregor at hostgis.com  Wed May 14 14:45:10 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Wed May 14 14:45:08 2008
Subject: [gdal-dev] Re: [mapserver-users] Mapserver & GDAL in various Linux
	repositories
In-Reply-To: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>
References: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>
Message-ID: <482B3336.2020708@hostgis.com>

> Any other ideas? - custom repositories with more up to date, or 
> consistent across Linux systems, version?
 > Maybe something similar
> to FWTools but with stable versions only?

There's our own open-source product: HostGIS Linux
http://www.hostgis.com/linux/
We use it in production on both 32-bit and 64-bit platforms, with great 
success.

-- 
Gregor Mosheh / Greg Allensworth    BS, A+, Network+, Security+, Server+
System Administrator, Lead Programmer
HostGIS development & hosting services, http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From gregor at hostgis.com  Wed May 14 14:56:51 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Wed May 14 14:56:49 2008
Subject: [gdal-dev] Re: [mapserver-users] Mapserver & GDAL in various Linux
	repositories
In-Reply-To: <BAY130-W11E0425B00A0AFB30A4910C0CE0@phx.gbl>
References: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>
	<482B3336.2020708@hostgis.com>
	<BAY130-W11E0425B00A0AFB30A4910C0CE0@phx.gbl>
Message-ID: <482B35F3.5080507@hostgis.com>

Why, thank you Gail. That just brings out a smile.

FYI, I've started construction of HGL 4.3 so this is a great time to hit 
up the mailing list, and to send in requests and complaints about HGL 
4.2 The diffs will be about a dozen bugfixes, and mostly just good ol' 
package upgrades, and a lot of work toward package upgrades.

And now I'll quit spamming plugs for our own product. :)

-- 
Gregor Mosheh / Greg Allensworth    BS, A+, Network+, Security+, Server+
System Administrator, Lead Programmer
HostGIS development & hosting services, http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From woklist at kyngchaos.com  Wed May 14 15:05:59 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed May 14 15:06:06 2008
Subject: [gdal-dev] Re: [mapserver-users] Mapserver & GDAL in various Linux
	repositories
In-Reply-To: <482B309F.20600@mapgears.com>
References: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>
	<482B309F.20600@mapgears.com>
Message-ID: <C65299EE-7129-46B4-B10B-A9D5E9A7F497@kyngchaos.com>

I vaguely remember this, but didn't pay much attention to it ;)

It would be good to update the FGS page to show which versions are  
included.

Are the FGS builds of Apache, PHP, Postgres, ... and basic libraries  
required for FGS MapServer GDAL, and other GIS tools and libraries?   
Or can they use system copies of these?  Clients may not be willing or  
able to install duplicate copies of stuff available at the same  
version in the system, especially on an existing server.

Also, are there plans for 64bit builds?

On May 14, 2008, at 1:34 PM, Daniel Morissette wrote:

> William Kyngesburye wrote:
>> The Mapserver download page has links to old Mapping Hacks RPMs,  
>> and a really old FGS bundle.
>
> With respect to FGS, there have been no official/public releases in  
> quite a while, but we've continued to use it internally. Recently  
> we've started putting more work towards a new public release and  
> last week a 1.0 release with the latest version of everything has  
> been posted to the download site and mentioned on the FGS list, but  
> unfortunately the website is still lagging behind.
>
> Here is the relevant mailing list thread with the download/install  
> info for FGS 1.0:
> http://lists.maptools.org/pipermail/foss-gis-suite/2008-May/ 
> 000639.html
>
> Daniel
> -- 
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> mapserver-users mailing list
> mapserver-users@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/mapserver-users

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.


From dmorissette at mapgears.com  Wed May 14 15:15:08 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed May 14 15:44:40 2008
Subject: [gdal-dev] Re: [mapserver-users] Mapserver & GDAL in various Linux
	repositories
In-Reply-To: <C65299EE-7129-46B4-B10B-A9D5E9A7F497@kyngchaos.com>
References: <3D74B43C-9EE7-4725-AA61-485080F18FBB@kyngchaos.com>	<482B309F.20600@mapgears.com>
	<C65299EE-7129-46B4-B10B-A9D5E9A7F497@kyngchaos.com>
Message-ID: <482B3A3C.3050808@mapgears.com>

William Kyngesburye wrote:
> 
> It would be good to update the FGS page to show which versions are 
> included.
> 

That should happen very soon.

> Are the FGS builds of Apache, PHP, Postgres, ... and basic libraries 
> required for FGS MapServer GDAL, and other GIS tools and libraries?  Or 
> can they use system copies of these?  Clients may not be willing or able 
> to install duplicate copies of stuff available at the same version in 
> the system, especially on an existing server.
> 

Yes, FGS requires that you use its own version of all the base libs. 
However FGS's installation is self-contained and doesn't pollute any of 
the system directories (i.e. all files and libs live under 
/path/to/fgs/...). It is also built to play nicely with the preinstalled 
versions that may already be on the system.

I understand that some admins don't like duplicate copies of the same 
software on the system, but if we want to integrate with the system 
tools and libs then we would have to build deb or rpm packages for every 
OS and version which would be much more work than a single 
self-contained installer that brings all its dependencies with it and 
works anywhere. I hope that at some point in the future FGS will be 
obsoleted by native packages for each Linux distributions but we are not 
there yet.

Another benefit of FGS being self-contained is that you can run multiple 
instances with different versions of the software (GDAL, MapServer, 
etc.) on the same system without any problem. This is especially useful 
for developers or people doing frequent upgrades.

In the specific case of Apache, FGS allows you to pick a port to use so 
it won't conflict with an existing Apache install. In the case of 
postgres, it could connect to an existing postgres server, you are only 
required to let it load its own libpq (client lib).

Daniel


> Also, are there plans for 64bit builds?
> 

Not at the moment... but contributions would be welcome.  :)

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From mchapman at texelinc.com  Wed May 14 19:08:55 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Wed May 14 19:09:14 2008
Subject: [gdal-dev] Large NITF file performance problems
In-Reply-To: <2c4bbbeb0805141124tc2833depf9c3d0ee35a47956@mail.gmail.com>
References: <2c4bbbeb0805130921h4978f825veaff8d3835cdc64e@mail.gmail.com>	<200805132045.50035.even.rouault@mines-paris.org>
	<2c4bbbeb0805141124tc2833depf9c3d0ee35a47956@mail.gmail.com>
Message-ID: <002601c8b617$7bffe4d0$73ffae70$@com>

Jason,

 

Is your program rendering the data to the screen or just processing it
somehow?  As a bench mark for you, I can render nitf files that are 1.8GB
and bigger in one to two seconds on my machine using gdal over a samba
network connection to a linux machine (100MB/sec Ethernet).  The trick is
resampling the image on the fly using rasterio() to fit the screen size.
There is a HUGE performance difference when you do this. 

 

If you are just making copies of the image then I would look at your
physical disk data subsystem.  If you do not have a write cache enabler then
it may be your customers disk that is slow and not the software.  I have run
into that situation before with HP Smart Arrays.  You can validate that this
is the case by comparing your CPU usage to the average write disk queue
length.  If the CPU usage is less than your write queue it means your data
subsystem is not able to keep up with the CPU
basically GDAL is faster than
your hardware.  Your CPU usage should be somewhere between 70 and 100 % is
everything is working fine would be my guess.

 

Martin

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jason Beverage
Sent: Wednesday, May 14, 2008 12:24 PM
To: Even Rouault
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Large NITF file performance problems

 

Hi Even,

Thanks for your sample file, it really helped.  It loads quickly in our
application and in OpenEV so I'll have to look down another route to find
out what's wrong with the customer's data.

However, it does appear that there is a problem somewhere when doing a
CreateCopy() as Ivan pointed out.  I can translate that file to a GeoTiff in
about 40seconds, but writing NITF has been going for about 5 minutes now and
its still on "0" with no progress reported.

Thanks,

Jason

On Tue, May 13, 2008 at 2:45 PM, Even Rouault <even.rouault@mines-paris.org>
wrote:

Hi,

I don't really understand why they would have issues with large file sizes
(below the 4 GB of course)

I've tried the following small python script to generate a 1.2 GB NITF file
filled with '1' as a value :

#!/usr/bin/env python

import gdal

new_ds = gdal.GetDriverByName( 'NITF' ).Create( 'largentf.ntf', 100000,
12000,
1 )
new_ds.GetRasterBand(1).Fill(1)
new_ds = None


It runs in less than one minute on my slow machine. I can open the resulting
file with OpenEV and scroll through it quite smoothly. gdalinfo -checksum
largetntf.ntf also runs in about 3 minutes, which seems reasonnable.

a gdalinfo on the file shows that it is automatically tiled in blocks of
256x256 and by looking at the code I can see that 256x256 tiling is
automatically activated when either the number of lines or columns of the
file is larger than 9999.

So I don't see any obvious reason why you get poor performance. You could
probably break with a debugger to see where it idles during gdal_translate ?

I email you the bzip2 result of the 1.2 GB file that is only 1KB... so you
can
test on the same file as me.

As far as your customer is concerned, maybe there is an issue with
compression
(for example a very large mono-block JPEG image ?). A 'gdalinfo' on the
files
could maybe give some hints ?

Le Tuesday 13 May 2008 18:21:15 Jason Beverage, vous avez ?crit :

> Hi all,
>
> I've got a customer who is using large NITF files (~1.5 GB) and is seeing
> ridiculously slow load times in our application.  I don't have access to
> his data, so I can't test directly, but it seems like the NITF driver may
> have some issues with large file sizes (> 1GB).
>
> To test on my end, I created a few different GeoTiff files (600 MB, 800
MB,
> and 1.2 GB) and tried to convert them to NITF using gdal_translate.
> Converting the 600 and 800 MB files worked just fine and had very
> reasonable speed (few minutes).  However, when I tried to use
> gdal_translate on the 1.2 GB file, the process hung at 0% for forever and
I
> had to kill it after waiting for a very long time.  It seems as if there
is
> something magical about this 1 GB boundary.
>
> Does anyone have any ideas or suggestions as to what could be causing this
> issue?
>
> Thanks!
>
> Jason



 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080514/ddd69ced/attachment.html
From jasonbeverage at gmail.com  Wed May 14 20:35:41 2008
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Wed May 14 20:35:44 2008
Subject: [gdal-dev] Large NITF file performance problems
In-Reply-To: <002601c8b617$7bffe4d0$73ffae70$@com>
References: <2c4bbbeb0805130921h4978f825veaff8d3835cdc64e@mail.gmail.com>
	<200805132045.50035.even.rouault@mines-paris.org>
	<2c4bbbeb0805141124tc2833depf9c3d0ee35a47956@mail.gmail.com>
	<002601c8b617$7bffe4d0$73ffae70$@com>
Message-ID: <2c4bbbeb0805141735n62248a71j2bce6b96b246ae39@mail.gmail.com>

HI Martin,
Our application renders the data and then does some processing on it after
it is loaded based on user request.  Our application can typically load and
display very large files in a few seconds and navigate them interactively
very quickly.  After doing some tests, I don't believe there is a problem
with NITF read performance is slow using GDAL because I could render and
load some very big files on my end with no problem.

Thanks for everyone's help, I appreciate it!

Jason

On Wed, May 14, 2008 at 7:08 PM, Martin Chapman <mchapman@texelinc.com>
wrote:

>  Jason,
>
>
>
> Is your program rendering the data to the screen or just processing it
> somehow?  As a bench mark for you, I can render nitf files that are 1.8GB
> and bigger in one to two seconds on my machine using gdal over a samba
> network connection to a linux machine (100MB/sec Ethernet).  The trick is
> resampling the image on the fly using rasterio() to fit the screen size.
> There is a HUGE performance difference when you do this.
>
>
>
> If you are just making copies of the image then I would look at your
> physical disk data subsystem.  If you do not have a write cache enabler then
> it may be your customers disk that is slow and not the software.  I have run
> into that situation before with HP Smart Arrays.  You can validate that this
> is the case by comparing your CPU usage to the average write disk queue
> length.  If the CPU usage is less than your write queue it means your data
> subsystem is not able to keep up with the CPU?basically GDAL is faster than
> your hardware.  Your CPU usage should be somewhere between 70 and 100 % is
> everything is working fine would be my guess.
>
>
>
> Martin
>
>
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Jason Beverage
> *Sent:* Wednesday, May 14, 2008 12:24 PM
> *To:* Even Rouault
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Large NITF file performance problems
>
>
>
> Hi Even,
>
> Thanks for your sample file, it really helped.  It loads quickly in our
> application and in OpenEV so I'll have to look down another route to find
> out what's wrong with the customer's data.
>
> However, it does appear that there is a problem somewhere when doing a
> CreateCopy() as Ivan pointed out.  I can translate that file to a GeoTiff in
> about 40seconds, but writing NITF has been going for about 5 minutes now and
> its still on "0" with no progress reported.
>
> Thanks,
>
> Jason
>
> On Tue, May 13, 2008 at 2:45 PM, Even Rouault <
> even.rouault@mines-paris.org> wrote:
>
> Hi,
>
> I don't really understand why they would have issues with large file sizes
> (below the 4 GB of course)
>
> I've tried the following small python script to generate a 1.2 GB NITF file
> filled with '1' as a value :
>
> #!/usr/bin/env python
>
> import gdal
>
> new_ds = gdal.GetDriverByName( 'NITF' ).Create( 'largentf.ntf', 100000,
> 12000,
> 1 )
> new_ds.GetRasterBand(1).Fill(1)
> new_ds = None
>
>
> It runs in less than one minute on my slow machine. I can open the
> resulting
> file with OpenEV and scroll through it quite smoothly. gdalinfo -checksum
> largetntf.ntf also runs in about 3 minutes, which seems reasonnable.
>
> a gdalinfo on the file shows that it is automatically tiled in blocks of
> 256x256 and by looking at the code I can see that 256x256 tiling is
> automatically activated when either the number of lines or columns of the
> file is larger than 9999.
>
> So I don't see any obvious reason why you get poor performance. You could
> probably break with a debugger to see where it idles during gdal_translate
> ?
>
> I email you the bzip2 result of the 1.2 GB file that is only 1KB... so you
> can
> test on the same file as me.
>
> As far as your customer is concerned, maybe there is an issue with
> compression
> (for example a very large mono-block JPEG image ?). A 'gdalinfo' on the
> files
> could maybe give some hints ?
>
> Le Tuesday 13 May 2008 18:21:15 Jason Beverage, vous avez ?crit :
>
> > Hi all,
> >
> > I've got a customer who is using large NITF files (~1.5 GB) and is seeing
> > ridiculously slow load times in our application.  I don't have access to
> > his data, so I can't test directly, but it seems like the NITF driver may
> > have some issues with large file sizes (> 1GB).
> >
> > To test on my end, I created a few different GeoTiff files (600 MB, 800
> MB,
> > and 1.2 GB) and tried to convert them to NITF using gdal_translate.
> > Converting the 600 and 800 MB files worked just fine and had very
> > reasonable speed (few minutes).  However, when I tried to use
> > gdal_translate on the 1.2 GB file, the process hung at 0% for forever and
> I
> > had to kill it after waiting for a very long time.  It seems as if there
> is
> > something magical about this 1 GB boundary.
> >
> > Does anyone have any ideas or suggestions as to what could be causing
> this
> > issue?
> >
> > Thanks!
> >
> > Jason
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080514/1c935083/attachment-0001.html
From pat.blair at bullberrysystems.com  Thu May 15 14:57:59 2008
From: pat.blair at bullberrysystems.com (Pat Blair)
Date: Thu May 15 14:58:11 2008
Subject: [gdal-dev] Reprojecting geometries
Message-ID: <F6FF338A2CB58848BB306E61298321600530DA7E@mail-21ps.atlarge.net>

Hello.  I am using GDAL/OGR with Python (2.5) bindings.  I am wondering
if there are any ready examples that demonstrate the correct process for
reprojecting a geometry.  I am iterating through features coming from a
shapefile, and the relevant code I have so far looks similar to this...
 
input_ds = self.get_driver().Open(r'C:/path/to/my/shapefile.shp')
input_layer = input_ds.GetLayer(0)
input_feature = input_layer.GetNextFeature()
while input_feature is not None:
    geometry = input_feature.GetGeometryRef()        
    print geometry.ExportToWkt() # Looks like good WKT!  Hooray!
    #
    # At this point, I seem to have the geometry... but I need to
    # reproject it to WGS-84. 
    #
    # ...then I do some other stuff (destroying the feature, moving to
the next one, etc.)
 
I have found discussion of creating spatial references in the
documentation and I have the idea that I can create a spatial reference
simply enough using the osr.SpatialReference class and
SetWellKnownGeogCS( "WGS84" ).  However, I'm unsure how to use it once I
have it.  Is it possible for me to do this?
 
Any examples or links to more detailed discussion or documentation would
be immensely helpful to me.
 
Many thanks.
 
 
 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080515/0eef4874/attachment.html
From warmerdam at pobox.com  Thu May 15 15:12:04 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 15 15:12:25 2008
Subject: [gdal-dev] Reprojecting geometries
In-Reply-To: <F6FF338A2CB58848BB306E61298321600530DA7E@mail-21ps.atlarge.net>
References: <F6FF338A2CB58848BB306E61298321600530DA7E@mail-21ps.atlarge.net>
Message-ID: <482C8B04.9040006@pobox.com>

Pat Blair wrote:
> Hello.  I am using GDAL/OGR with Python (2.5) bindings.  I am wondering 
> if there are any ready examples that demonstrate the correct process for 
> reprojecting a geometry.  I am iterating through features coming from a 
> shapefile, and the relevant code I have so far looks similar to this...
>  
> input_ds = self.get_driver().Open(r'C:/path/to/my/shapefile.shp')
> input_layer = input_ds.GetLayer(0)
> input_feature = input_layer.GetNextFeature()
> while input_feature is not None:
>     geometry = input_feature.GetGeometryRef()       
>     print geometry.ExportToWkt() # Looks like good WKT!  Hooray!
>     #
>     # At this point, I seem to have the geometry... but I need to
>     # reproject it to WGS-84.
>     #
>     # ...then I do some other stuff (destroying the feature, moving to 
> the next one, etc.)
>  
> I have found discussion of creating spatial references in the 
> documentation and I have the idea that I can create a spatial reference 
> simply enough using the osr.SpatialReference class and 
> SetWellKnownGeogCS( "WGS84" ).  However, I'm unsure how to use it once I 
> have it.  Is it possible for me to do this?

Pat,

Basically you need to create an OGRCoordinateTransformation object
for the transform from the native coordinate system to WGS84 and then
call the Transform() method on the geometry with that object.

Without testing it should be something like this:

   src_srs = input_layer.GetSpatialRef()

   dst_srs = osr.SpatialReference()
   dst_srs.SetFromUserInput( 'WGS84' )

   ct = osr.CoordinateTransformation( src_srs, dst_srs )

   ....
      geometry = input_feature.GetGeometryRef()
      print geometry.ExportToWkt()

      geometry_wgs84 = geometry.Clone()
      geometry_wgs84.Transform( ct )
      print geometry.ExportToWkt()

Keep in mind the above example creates a copy of the geometry
to transform rather than transform the one currently owned by
the feature, though I suppose you could do that too.  Just keep
in mind the Transform() method operates on the geometry it is
invoked on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From pat.blair at bullberrysystems.com  Thu May 15 16:14:18 2008
From: pat.blair at bullberrysystems.com (Pat Blair)
Date: Thu May 15 16:14:22 2008
Subject: [gdal-dev] Reprojecting geometries
In-Reply-To: <482C8B04.9040006@pobox.com>
Message-ID: <F6FF338A2CB58848BB306E61298321600530DAD2@mail-21ps.atlarge.net>

For anyone else on the list who may have interest:  this seems to be an
excellent example.  I had trouble on the first try because I didn't have
PROJ.4 installed.  However, I made a quick visit to
http://www.remotesensing.org/proj/ and downloaded the libraries.  After
that, I started getting the results I was seeking.

Thank you, Mr. Warmerdam.

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, May 15, 2008 2:12 PM
To: Pat Blair
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Reprojecting geometries

Pat Blair wrote:
> Hello.  I am using GDAL/OGR with Python (2.5) bindings.  I am 
> wondering if there are any ready examples that demonstrate the correct

> process for reprojecting a geometry.  I am iterating through features 
> coming from a shapefile, and the relevant code I have so far looks
similar to this...
>  
> input_ds = self.get_driver().Open(r'C:/path/to/my/shapefile.shp')
> input_layer = input_ds.GetLayer(0)
> input_feature = input_layer.GetNextFeature() while input_feature is 
> not None:
>     geometry = input_feature.GetGeometryRef()       
>     print geometry.ExportToWkt() # Looks like good WKT!  Hooray!
>     #
>     # At this point, I seem to have the geometry... but I need to
>     # reproject it to WGS-84.
>     #
>     # ...then I do some other stuff (destroying the feature, moving to

> the next one, etc.)
>  
> I have found discussion of creating spatial references in the 
> documentation and I have the idea that I can create a spatial 
> reference simply enough using the osr.SpatialReference class and 
> SetWellKnownGeogCS( "WGS84" ).  However, I'm unsure how to use it once

> I have it.  Is it possible for me to do this?

Pat,

Basically you need to create an OGRCoordinateTransformation object for
the transform from the native coordinate system to WGS84 and then call
the Transform() method on the geometry with that object.

Without testing it should be something like this:

   src_srs = input_layer.GetSpatialRef()

   dst_srs = osr.SpatialReference()
   dst_srs.SetFromUserInput( 'WGS84' )

   ct = osr.CoordinateTransformation( src_srs, dst_srs )

   ....
      geometry = input_feature.GetGeometryRef()
      print geometry.ExportToWkt()

      geometry_wgs84 = geometry.Clone()
      geometry_wgs84.Transform( ct )
      print geometry.ExportToWkt()

Keep in mind the above example creates a copy of the geometry to
transform rather than transform the one currently owned by the feature,
though I suppose you could do that too.  Just keep in mind the
Transform() method operates on the geometry it is invoked on.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org

From c.schitka at gmail.com  Thu May 15 17:19:35 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Thu May 15 17:19:39 2008
Subject: [gdal-dev] OGDI Compilation Errors
Message-ID: <e66a4dbf0805151419r52eb64fh7c6e62c735489176@mail.gmail.com>

Hi All,

After walking away from the issue for a little bit. Then coming back to it
again I finally got the OGDI compilation to actual occur which was a step
forward.

I am attempting to compile ogdi-3.2.0.beta1 on Windows Vista, using Dev
Studio 2008. During the course of the build I get a number of compilation
issues.

C:/Downloads/OGDI_NEW/ogdi-3.2.0.beta1/ogdi-3.2.0.beta1/vpflib/include\machine.h(35)
: error C2061: syntax error : identifier 'int32'
C:/Downloads/OGDI_NEW/ogdi-3.2.0.beta1/ogdi-3.2.0.beta1/vpflib/include\machine.h(35)
: error C2059: syntax error : ';'
C:/Downloads/OGDI_NEW/ogdi-3.2.0.beta1/ogdi-3.2.0.beta1/vpflib/include\machine.h(36)
: error C2061: syntax error : identifier 'uint32'

C:/Downloads/OGDI_NEW/ogdi-3.2.0.beta1/ogdi-3.2.0.beta1/vpflib/include\machine.h(36)
: error C2059: syntax error : ';'
c:\downloads\ogdi_new\ogdi-3.2.0.beta1\ogdi-3.2.0.beta1\vpflib\vpf.h(68) :
error C2061: syntax error : identifier 'int32'
c:\downloads\ogdi_new\ogdi-3.2.0.beta1\ogdi-3.2.0.beta1\vpflib\vpf.h(69) :
error C2143: syntax error : missing ')' before '*'
c:\downloads\ogdi_new\ogdi-3.2.0.beta1\ogdi-3.2.0.beta1\vpflib\vpf.h(69) :
error C2143: syntax error : missing '{' before '*'

I've included a bunch here to give a sense of what's going on. My questions
are threefold.

1. Are these known issues that I need to fix because of compiler/OS
compatability issues.
2. Was this a bad release that didn't work from the get go.
3. If this was a bad release where can I get the source for a good one ?

Oh yes I am building using Cygwin bash 3.2 according to the build
instructions using cl and link from  the above mentioned environment
settings.

Has anyone seen this before ??
Courtney
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080515/1841241f/attachment.html
From lran at unc.edu  Fri May 16 09:19:08 2008
From: lran at unc.edu (Limei Ran)
Date: Fri May 16 09:40:05 2008
Subject: [gdal-dev] Add a new filed to an existing shapefile
Message-ID: <482D89CC.3050705@unc.edu>

Hi:

I am trying to add a new double field to an existing shapefile using the 
following codes.  But,  poLayer->CreateField failed.  Could you tell me 
what is wrong with the codes?

Thanks,

Limei

================================================
 //open output polygon shapefile
   poDS = OGRSFDriverRegistrar::Open( out_polyFile.c_str(), TRUE );
   if( poDS == NULL )
   {
       printf( "\tOpen shapefile file failed: %s.\n", 
out_polyFile.c_str() );
       exit( 1 );
   }
   poLayer = poDS->GetLayer( 0 );
   if( poLayer == NULL )
   {
      printf( "\tFAILURE: Couldn't fetch layer %s!\n", 
out_polyFile.c_str() );
      exit( 1 );
   }

   //create weight item to the attribute
   OGRFieldDefn oField( itemName.c_str(), OFTReal);
   printf ("\tBuiled field item: %s\n", itemName.c_str() );

   if( poLayer->CreateField( &oField, TRUE ) != OGRERR_NONE )
   {
      printf( "\tFailed to create field: %s\n",itemName.c_str() );
      exit( 1 );
   }

===============================
From c.schitka at gmail.com  Fri May 16 10:08:34 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Fri May 16 10:08:36 2008
Subject: [gdal-dev] OGDI Build issues
Message-ID: <e66a4dbf0805160708x51a2cf07t2428ba43fbf56b86@mail.gmail.com>

Hi All,

After walking away from the issue for a little bit. Then coming back to it
again I finally got the OGDI compilation to actual occur which was a step
forward.

I am attempting to compile ogdi-3.2.0.beta1 on Windows Vista, using Dev
Studio 2008. During the course of the build I get a number of compilation
issues.

C:/Downloads/OGDI_NEW/ogdi-3.2.0.beta1/ogdi-3.2.0.beta1/vpflib/include\machine.h(35)
: error C2061: syntax error : identifier 'int32'
C:/Downloads/OGDI_NEW/ogdi-3.2.0.beta1/ogdi-3.2.0.beta1/vpflib/include\machine.h(35)
: error C2059: syntax error : ';'
C:/Downloads/OGDI_NEW/ogdi-3.2.0.beta1/ogdi-3.2.0.beta1/vpflib/include\machine.h(36)
: error C2061: syntax error : identifier 'uint32'

C:/Downloads/OGDI_NEW/ogdi-3.2.0.beta1/ogdi-3.2.0beta1/vpflib/include\machine.h(36)
: error C2059: syntax error : ';'
c:\downloads\ogdi_new\ogdi-3.2.0.beta1\ogdi-3.2.0.beta1\vpflib\vpf.h(68) :
error C2061: syntax error : identifier 'int32'
c:\downloads\ogdi_new\ogdi-3.2.0.beta1\ogdi-3.2.0.beta1\vpflib\vpf.h(69) :
error C2143: syntax error : missing ')' before '*'
c:\downloads\ogdi_new\ogdi-3.2.0.beta1\ogdi-3.2.0.beta1\vpflib\vpf.h(69) :
error C2143: syntax error : missing '{' before '*'

I've included a bunch here to give a sense of what's going on. My questions
are threefold.

1. Are these known issues that I need to fix because of compiler/OS
compatability issues.
2. Was this a bad release that didn't work from the get go.
3. If this was a bad release where can I get the source for a good one ?

Oh yes I am building using Cygwin bash 3.2 according to the build
instructions using cl and link from  the above mentioned environment
settings.

Has anyone seen this before ??
Courtney
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080516/5b38945c/attachment-0001.html
From mateusz at loskot.net  Fri May 16 10:08:32 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri May 16 10:08:39 2008
Subject: [gdal-dev] Add a new filed to an existing shapefile
In-Reply-To: <482D89CC.3050705@unc.edu>
References: <482D89CC.3050705@unc.edu>
Message-ID: <4EB79F0F-C4C4-4367-B498-C7A05679C989@loskot.net>

On May 16, 2008, at 3:19 PM, Limei Ran wrote:
>  //create weight item to the attribute
>  OGRFieldDefn oField( itemName.c_str(), OFTReal);
>  printf ("\tBuiled field item: %s\n", itemName.c_str() );
>
>  if( poLayer->CreateField( &oField, TRUE ) != OGRERR_NONE )
>  {
>     printf( "\tFailed to create field: %s\n",itemName.c_str() );
>     exit( 1 );
>  }


Limei,

If you are trying to add field to a non-empty shapefile with features,  
then it won't work.

 From the OGR tutorial [1]:
"Fields must be added to the layer before any features are written."

[1] http://gdal.org/ogr/ogr_apitut.html

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org




From warmerdam at pobox.com  Fri May 16 10:15:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 16 10:16:01 2008
Subject: [gdal-dev] Add a new filed to an existing shapefile
In-Reply-To: <482D89CC.3050705@unc.edu>
References: <482D89CC.3050705@unc.edu>
Message-ID: <482D96FF.5080807@pobox.com>

Limei Ran wrote:
> Hi:
> 
> I am trying to add a new double field to an existing shapefile using the 
> following codes.  But,  poLayer->CreateField failed.  Could you tell me 
> what is wrong with the codes?

Limei,

I believe the shapefile driver does not support adding fields to a shapefile
layer that already has records/features in it.  This is fairly common in file
based drivers, though it *could* be implemented for shapefiles if there was
sufficient need.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From punk.kish at gmail.com  Fri May 16 10:21:53 2008
From: punk.kish at gmail.com (P Kishor)
Date: Fri May 16 10:21:56 2008
Subject: [gdal-dev] Add a new filed to an existing shapefile
In-Reply-To: <482D96FF.5080807@pobox.com>
References: <482D89CC.3050705@unc.edu> <482D96FF.5080807@pobox.com>
Message-ID: <cdf6db500805160721k3fab2d5wdfe7502b10e9685a@mail.gmail.com>

On 5/16/08, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Limei Ran wrote:
> > Hi:
> >
> > I am trying to add a new double field to an existing shapefile using the
> following codes.  But,  poLayer->CreateField failed.  Could you tell me what
> is wrong with the codes?
> >
>
> Limei,
>
> I believe the shapefile driver does not support adding fields to a shapefile
> layer that already has records/features in it.  This is fairly common in
> file
> based drivers, though it *could* be implemented for shapefiles if there was
> sufficient need.
>


In which case, use the Perl module XBase. It works really well, and
you can readily add new column to the DBF.

http://search.cpan.org/~janpaz/DBD-XBase-0.241/lib/XBase.pm

Working in conjunction with Geo::ShapeFile, you can manipulate
Shapefiles to your heart's content.

http://search.cpan.org/~jasonk/Geo-ShapeFile-2.52/lib/Geo/ShapeFile.pm

-- 
Puneet Kishor http://punkish.eidesis.org/
Nelson Institute for Environmental Studies http://www.nelson.wisc.edu/
Open Source Geospatial Foundation (OSGeo) http://www.osgeo.org/
From l1brtine at gmx.net  Fri May 16 12:59:42 2008
From: l1brtine at gmx.net (lBert)
Date: Fri May 16 12:59:42 2008
Subject: [Gdal-dev] gdalwarp reprojection not exact
Message-ID: <17267217.post@talk.nabble.com>


Hi,

I've been trying to reproject an orthophoto (1-m resolution) using gdalwarp
(gdal 1.5), but the results are not very satisfying (see below). I overlaid
the reprojected image with the input image and at the first look the results
seemed fine, but when I zoomed in, I realized that the reprojected image is
quite distorted. Since the distortion occurs in these blocky patterns
(blocks of ~30x30 pixels) I assume that this is the result of gdal using
some linear approximation. Now, I have tried changing several options, also
setting the -te switch to 0.0, but the results are always the same. Of
course when I use cubic convolution the effect is not as pronounced, but it
is still there. I played around with this the whole day and I can't find a
solution. ArcGIS and Erdas Imagine produce good results even with polynomial
approximation. 
Please help!

Here is an animated gif comparing the input and reprojected image:
http://www.nabble.com/file/p17267217/gdalwarp_input_output.gif
gdalwarp_input_output.gif  

Here is the command I used:
gdalwarp.exe -t_srs
PROJCS["unnamed",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.257222101,AUTHORITY["EPSG","7019"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6269"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",43],PARAMETER["standard_parallel_2",45.5],PARAMETER["latitude_of_origin",41.75],PARAMETER["central_meridian",-120.5],PARAMETER["false_easting",1312335.958005249],PARAMETER["false_northing",0],UNIT["user-defined",0.3048]]
-et 0.0 -ot Byte -of hfa -tr 3.28 3.28 -te 478085.70 1363295.70 511509.30
1383735.30 naip_utm.img naip_lam.img

Thanks a bunch,
Bert

-- 
View this message in context: http://www.nabble.com/gdalwarp-reprojection-not-exact-tp17267217p17267217.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Fri May 16 13:05:06 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 16 13:05:35 2008
Subject: [Gdal-dev] gdalwarp reprojection not exact
In-Reply-To: <17267217.post@talk.nabble.com>
References: <17267217.post@talk.nabble.com>
Message-ID: <482DBEC2.8050700@pobox.com>

lBert wrote:
> Hi,
> 
> I've been trying to reproject an orthophoto (1-m resolution) using gdalwarp
> (gdal 1.5), but the results are not very satisfying (see below). I overlaid
> the reprojected image with the input image and at the first look the results
> seemed fine, but when I zoomed in, I realized that the reprojected image is
> quite distorted. Since the distortion occurs in these blocky patterns
> (blocks of ~30x30 pixels) I assume that this is the result of gdal using
> some linear approximation. Now, I have tried changing several options, also
> setting the -te switch to 0.0, but the results are always the same. Of
> course when I use cubic convolution the effect is not as pronounced, but it
> is still there. I played around with this the whole day and I can't find a
> solution. ArcGIS and Erdas Imagine produce good results even with polynomial
> approximation. 
> Please help!
> 
> Here is an animated gif comparing the input and reprojected image:
> http://www.nabble.com/file/p17267217/gdalwarp_input_output.gif
> gdalwarp_input_output.gif  

Bert,

Can you provide the source data?  Gdalwarp does not chunk things in 30 x 30
pixel chunks (normally chunks are roughly 2Kx2K) so I don't believe this is
an artifact related to the chunking logic.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Paul_VanDeusen at uml.edu  Fri May 16 13:26:23 2008
From: Paul_VanDeusen at uml.edu (pvandeus)
Date: Fri May 16 13:26:25 2008
Subject: [Gdal-dev] ERDAS img format from gdal rpm
Message-ID: <17280107.post@talk.nabble.com>


The gdal rpm doesn't include the ERDAS .img format.
Is there a way to add this that doesn't involve compiling gdal.

We are using the grass rpm on Fedora 8.  I'm afraid that compiling gdal
would then require me to
compile grass.  It's so easy to use the rpm's that I hate to return to
compiling grass and gdal again.

This is the gdal rpm that I have.

gdal-1.4.2-3.fc8

grass rpms are
grass-6.2.2-2.fc8
grass-libs-6.2.2-2.fc8
-- 
View this message in context: http://www.nabble.com/ERDAS-img-format-from-gdal-rpm-tp17280107p17280107.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From plists at prometheus.org.yu  Fri May 16 13:44:53 2008
From: plists at prometheus.org.yu (Attila Csipa)
Date: Fri May 16 13:43:49 2008
Subject: [gdal-dev] GMT driver for Ogr2Ogr
In-Reply-To: <20080509081324.148560@gmx.net>
References: <48235C95.6010004@gmail.com> <4823C1A4.70302@gmail.com>
	<20080509081324.148560@gmx.net>
Message-ID: <200805161944.54130.plists@prometheus.org.yu>

Foreword:
If all this  below is just admin mumbo-jumbo to you, and you really-really 
want just an 1.5 ogr2ogr that works on 64bit hardy, use the following 
repository line in your sources list  (it's a private repository of mine, so 
it goes with large "I'm not to be held responsible to whatever these packages 
do to anybody/anything, including but not limited to you, your business, 
family and pets", "it might not be there tomorrow" and "don't ask me about 
it" signs).

deb http://svn.atombiztos.hu hardy main

and then just do an 'apt-get install gdal-bin'. For those who are interested 
in 'the right way':

On Friday 09 May 2008 10:13:24 timmichelsen@gmx-topmail.de wrote:
> 1) grab the files from Debian archives

That is almost impossible lately due to all the mapserver-gdal 
interdepencies... It's generally a bad idea to put in straight Debian 
packages into ubuntu, they have diverged quite a bit :(

> 3) use FWTools (http://fwtools.maptools.org/) for Linux in the mean time

This is easy to do, but ugly and hard to administrate later on, lots of 
potential for orphaned libs and executables.

> 2) compile yourself with checkinstall

There is a 2a) option that I usually apply in this type of situation, and that 
is pbuilder. I generally have installing millions of -dev packages when I 
really only need one binary package. 

You download the .dsc, the .tar.gz and .diff.gz files of the given package (or 
do 'dpkg-buildpackage -rfakeroot -S' in the debianized gdal source directory 
if you don't have the dsc/diff files). You will need devscripts, debootstrap 
and debhelper for this (maybe one or two more packages I can't remember off 
the top of my head).

You do 'pbuilder --create' to create the environment, this can take a while.

Finally, 'pbuilder --build gdal-*.dsc' to watch the build process go through 
and get a nice .deb for your machine. After that you can delete 
the /var/cache/pbuilder dirs and retain a nice and clean ubuntu system and 
you and up with a package that has correct versions and dependancies until a 
proper 1.5x GDAL turns up in hardy-proposed. This is what I did to get the 
binary build mentioned in the beginning of this post.

One caveat, debian/ubuntu have different names for their current versions of 
libxerces, so that might need to be changed in the debian/control file in the 
sources dir if you want to make your own.

From Shawn.Gong at drdc-rddc.gc.ca  Fri May 16 13:51:52 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri May 16 13:52:27 2008
Subject: [gdal-dev] apply filter to large image files
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120076@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I have a large image that cannot be entirely loaded in memory.
I'd like to apply some filter, say moving average or boxcar.

I can borrow codes from OpenEV\tools\calculator.py. But only certain #
of rows can be loaded/read at a time, do the manipulation and move down.

Would you have examples or advices of how to do it?

Thanks,
Shawn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080516/7fa7753c/attachment.html
From c.schitka at gmail.com  Fri May 16 14:59:04 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Fri May 16 14:59:06 2008
Subject: [gdal-dev] Writing an Image to a file.
Message-ID: <e66a4dbf0805161159m7e5d7992pc69c25d21ab13209@mail.gmail.com>

Hi List;

Here is the procedure I am attempting to perform.

1. Open an image (tif or whatever)
2. Read the image in from a file and perform some manipulations
3. Write the image back out as a Tif/JPeg, etc.

Parts 1  & 2 work well. My question is, the person that wrote this code
before me, wrote it using the CreateCopy command in the GDalDataSet....Is
that the best approach or is there a better way to do this?

Cheers
Courtney
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080516/559498b9/attachment.html
From warmerdam at pobox.com  Fri May 16 15:16:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 16 15:16:42 2008
Subject: [gdal-dev] Writing an Image to a file.
In-Reply-To: <e66a4dbf0805161159m7e5d7992pc69c25d21ab13209@mail.gmail.com>
References: <e66a4dbf0805161159m7e5d7992pc69c25d21ab13209@mail.gmail.com>
Message-ID: <482DDD70.2070603@pobox.com>

Courtney Schitka wrote:
> Hi List;
> 
> Here is the procedure I am attempting to perform.
> 
> 1. Open an image (tif or whatever)
> 2. Read the image in from a file and perform some manipulations
> 3. Write the image back out as a Tif/JPeg, etc.
> 
> Parts 1  & 2 work well. My question is, the person that wrote this code 
> before me, wrote it using the CreateCopy command in the 
> GDalDataSet....Is that the best approach or is there a better way to do 
> this?

Courtney,

The more conventional approach would be to use GDALCreate() to create the
output dataset, and then you can read a chunk from the input file, process
it, and write the result chunk to the output file.

However, only some drivers support the Create() method since the application
is unconstrained in what order it writes data.  Some drivers, such as JPEG,
only support CreateCopy().  If you want to directly support the maximum number
of output drivers you might want to use CreateCopy() but then you need to
implement some sort of virtual dataset to pass to CreateCopy() that can do
your processing as data is requested.  This is generally fairly messy.

Another approach is to create a memory dataset (using the MEM driver) into
which to write your results, and then pass that to CreateCopy().  This is
fairly straightforward, but it presumes you can hold your whole processed
image in memory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mateusz at loskot.net  Fri May 16 17:06:29 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri May 16 17:06:36 2008
Subject: [gdal-dev] GDAL maintenance update
Message-ID: <EDCEBAE5-C2A4-4898-832B-534CEF861AD5@loskot.net>

Folks,

I must report that I've not managed to jumped back to the GDAL  
maintenance work yet and, because of personal duties, I will be  
unavailable for 3-4 (5) more weeks :-(

Recently, I've managed to spend only 10 hours of the plan and work on  
a few issues:

http://trac.osgeo.org/gdal/ticket/2370

http://trac.osgeo.org/gdal/ticket/2358

http://trac.osgeo.org/gdal/ticket/2050

http://trac.osgeo.org/gdal/ticket/2032

http://trac.osgeo.org/gdal/ticket/2015

http://trac.osgeo.org/gdal/ticket/1955

http://trac.osgeo.org/gdal/ticket/1929

http://trac.osgeo.org/gdal/ticket/1497

I hope to be back here soon.

Greetings
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From brauplists at gmail.com  Fri May 16 18:29:56 2008
From: brauplists at gmail.com (Bruce Raup)
Date: Fri May 16 18:29:57 2008
Subject: [gdal-dev] OGR's GMT driver: requests for enhancement
In-Reply-To: <1464295a0805161524x60e4aacbq74274600f35025f8@mail.gmail.com>
References: <1464295a0805161524x60e4aacbq74274600f35025f8@mail.gmail.com>
Message-ID: <1464295a0805161529h4c068b1dwcbf6b390eb0a7de@mail.gmail.com>

Hi all (and Frank),

 I've been trying to use ogr2ogr to create a shapefile from a GMT text
 file.  I created the GMT file with the enhanced comment fields to
 define the attribute names, types, etc. using perl.  The problem is
 that ogr2ogr defines all the string fields as 80 characters in width.

 Is there some control over this?  I have a "description" field that is
 getting truncated.

 Thanks,
 Bruce


 --
 Bruce Raup
 http://cires.colorado.edu/~braup/
From warmerdam at pobox.com  Fri May 16 18:57:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 16 18:57:56 2008
Subject: [gdal-dev] OGR's GMT driver: requests for enhancement
In-Reply-To: <1464295a0805161529h4c068b1dwcbf6b390eb0a7de@mail.gmail.com>
References: <1464295a0805161524x60e4aacbq74274600f35025f8@mail.gmail.com>
	<1464295a0805161529h4c068b1dwcbf6b390eb0a7de@mail.gmail.com>
Message-ID: <482E1160.3080809@pobox.com>

Bruce Raup wrote:
> Hi all (and Frank),
> 
>  I've been trying to use ogr2ogr to create a shapefile from a GMT text
>  file.  I created the GMT file with the enhanced comment fields to
>  define the attribute names, types, etc. using perl.  The problem is
>  that ogr2ogr defines all the string fields as 80 characters in width.
> 
>  Is there some control over this?  I have a "description" field that is
>  getting truncated.

Bruce,

The GMT driver has no support for setting a field width, so the string
fields will all come through as variable length.  The shapefile driver
defaults to 80 characters for such fields.

If you are using GDAL/OGR Trunk you can use the new SQL casting operator
to set the field width:

   http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

I'm not aware of a practical way of handling this with GDAL 1.5.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From rchirgwin at ozemail.com.au  Sat May 17 00:37:08 2008
From: rchirgwin at ozemail.com.au (Richard Chirgwin)
Date: Sat May 17 00:38:16 2008
Subject: [gdal-dev] Removing GDAL to reinstall
Message-ID: <482E60F4.5060600@ozemail.com.au>

Hi,

Through stupidity - call it unfamiliarity with Linux installs? - I have 
ended up with two GDALs installed: 1.4 and 1.5. I want to go back to 
"clean" so I can configure the installation with ECW. How do I do this?

Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080517/225ac70b/attachment.html
From dron at ak4719.spb.edu  Sat May 17 11:00:47 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Sat May 17 11:24:21 2008
Subject: [gdal-dev] gdal_grid: taking a value from feature attribute
Message-ID: <20080517150047.GA12028@ak4719.spb.edu>

Folks,

I need an advise. I have added a possibility to get the value for
interpolation from feature attribute instead of Z coordinate of geometry
record. But there is a small problem with gdal_grid utility interface.
The "-a" option that I would like to use to specify attribute name is
already taken by an algorithm parameter (see
http://www.gdal.org/gdal_grid.html manual page for details). Other GDAL
utilities (gdal_rasterize, gdal_contour) use "-a" option to set the
attribute name. I would like to be consistent and go with "-a" too and
rename the "algorithm" option in something other. Let it be "-m"
(m[ethod]).

So my question is: will it be harmless to change the gdal_grid
interface in that way? Any objections?

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From warmerdam at pobox.com  Sat May 17 12:03:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat May 17 12:03:59 2008
Subject: [gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <20080517150047.GA12028@ak4719.spb.edu>
References: <20080517150047.GA12028@ak4719.spb.edu>
Message-ID: <482F01B9.70404@pobox.com>

Andrey Kiselev wrote:
> Folks,
> 
> I need an advise. I have added a possibility to get the value for
> interpolation from feature attribute instead of Z coordinate of geometry
> record. But there is a small problem with gdal_grid utility interface.
> The "-a" option that I would like to use to specify attribute name is
> already taken by an algorithm parameter (see
> http://www.gdal.org/gdal_grid.html manual page for details). Other GDAL
> utilities (gdal_rasterize, gdal_contour) use "-a" option to set the
> attribute name. I would like to be consistent and go with "-a" too and
> rename the "algorithm" option in something other. Let it be "-m"
> (m[ethod]).
> 
> So my question is: will it be harmless to change the gdal_grid
> interface in that way? Any objections?

Andrey,

Consistency and backward compatability are virtues.

If you are willing to do a bit of extra work I would suggest that
the argument to -a be treated as an attribute name, but if it is not
found *and* matches an algorithm name it be used as the algorithm with
a warning so folks get used to use the new algorithm flag.

Generally speaking I am loath to change commandline arguments because it
breaks scripts.  With gdal_grid you at least have the situation that the
program is very new, so it will likely not be "deeply baked" into many
scripted systems yet.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From r.m.krug at gmail.com  Sat May 17 12:38:30 2008
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Sat May 17 12:38:34 2008
Subject: [gdal-dev] Problem reprojecting Clark 1866 to UTM 34 South
Message-ID: <fb7c7e870805170938k4a77a186k115d11f4c410884e@mail.gmail.com>

Hi

I have a ESRI asc raster in +proj=longlat +ellps=D_Clarke_1866 +no_defs

rkrug@ecolmod1:~/> gdalinfo hak_ser2.asc
Driver: AAIGrid/Arc/Info ASCII Grid
Files: hak_ser2.asc
Size is 1021, 781
Coordinate System is `'
Origin = (15.991666666664999,-21.991833330730000)
Pixel Size = (0.016666666670000,-0.016666666670000)
Corner Coordinates:
Upper Left  (  15.9916667, -21.9918333)
Lower Left  (  15.9916667, -35.0085000)
Upper Right (  33.0083333, -21.9918333)
Lower Right (  33.0083333, -35.0085000)
Center      (  24.5000000, -28.5001667)
Band 1 Block=1021x1 Type=Float32, ColorInterp=Undefined
 NoData Value=-9999

I want to reproject / warp it into UTM 34 S. I use the following command:

gdalwarp -s_srs '+proj=longlat +ellps=D_Clarke_1866 +no_defs' -t_srs
EPSG:32734 hak_ser2.asc hak_ser2_utm34.asc

where EPSG:32734 is the definition for UTM 34 S WGS 84

But I get:

rkrug@ecolmod1:~/Documents/Projects/AlienSpread/GIS.local/Rainer_subset>
gdalinfo hak_ser2_utm34.asc
Driver: GTiff/GeoTIFF
Files: hak_ser2_utm34.asc
Size is 1028, 880
Coordinate System is:
PROJCS["WGS 84 / UTM zone 34N",
   GEOGCS["WGS 84",
       DATUM["WGS_1984",
           SPHEROID["WGS 84",6378137,298.2572235629972,
               AUTHORITY["EPSG","7030"]],
           AUTHORITY["EPSG","6326"]],
       PRIMEM["Greenwich",0],
       UNIT["degree",0.0174532925199433],
       AUTHORITY["EPSG","4326"]],
   PROJECTION["Transverse_Mercator"],
   PARAMETER["latitude_of_origin",0],
   PARAMETER["central_meridian",21],
   PARAMETER["scale_factor",0.9996],
   PARAMETER["false_easting",500000],
   PARAMETER["false_northing",0],
   UNIT["metre",1,
       AUTHORITY["EPSG","9001"]],
   AUTHORITY["EPSG","32634"]]
Origin = (-17471.391705359546904,-2431926.174459759611636)
Pixel Size = (1715.270741799227608,-1715.270741799227608)
Metadata:
 AREA_OR_POINT=Area
Image Structure Metadata:
 INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  -17471.392,-2431926.174) ( 15d59'39.65"E, 21d54'55.81"S)
Lower Left  (  -17471.392,-3941364.427) ( 15d17'55.27"E, 35d28'51.77"S)
Upper Right ( 1745826.931,-2431926.174) ( 32d58'5.17"E, 21d33'19.99"S)
Lower Right ( 1745826.931,-3941364.427) ( 34d34'59.95"E, 34d50'47.92"S)
Center      (  864177.770,-3186645.301) ( 24d43'43.82"E, 28d45'21.15"S)
Band 1 Block=1028x1 Type=Float32, ColorInterp=Gray

i.e. UTM 34 N  and it does not overlap with other layers in UTM 34 S.

Same result for

/> gdalwarp -s_srs '+proj=longlat +ellps=D_Clarke_1866 +no_defs'
-t_srs '+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +
units=m +no_defs' hak_ser2.asc hak_ser2_utm34.asc

Any ideas what the problem is?

Thanks

Rainer

-- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Plant Conservation Unit
Department of Botany
University of Cape Town
Rondebosch 7701
South Africa
From szekerest at gmail.com  Sat May 17 12:51:34 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat May 17 12:51:36 2008
Subject: [gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <20080517150047.GA12028@ak4719.spb.edu>
References: <20080517150047.GA12028@ak4719.spb.edu>
Message-ID: <f3b73b7d0805170951t652cd404sab5f1bf8bd43b55d@mail.gmail.com>

Andrey,

I think the 'field' option name would better conform to the OGR
terminology. You could also denote that this will make up the z value
during the grid creation.
So I think '-zfield' or '-zvalue' would be a better choice.

Best regards,

Tamas


2008/5/17 Andrey Kiselev <dron@ak4719.spb.edu>:
> Folks,
>
> I need an advise. I have added a possibility to get the value for
> interpolation from feature attribute instead of Z coordinate of geometry
> record. But there is a small problem with gdal_grid utility interface.
> The "-a" option that I would like to use to specify attribute name is
> already taken by an algorithm parameter (see
> http://www.gdal.org/gdal_grid.html manual page for details). Other GDAL
> utilities (gdal_rasterize, gdal_contour) use "-a" option to set the
> attribute name. I would like to be consistent and go with "-a" too and
> rename the "algorithm" option in something other. Let it be "-m"
> (m[ethod]).
>
> So my question is: will it be harmless to change the gdal_grid
> interface in that way? Any objections?
>
> Best regards,
> Andrey
>
> --
> Andrey V. Kiselev
> ICQ# 26871517
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Sat May 17 16:40:58 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat May 17 16:41:22 2008
Subject: [gdal-dev] Problem reprojecting Clark 1866 to UTM 34 South
In-Reply-To: <fb7c7e870805170938k4a77a186k115d11f4c410884e@mail.gmail.com>
References: <fb7c7e870805170938k4a77a186k115d11f4c410884e@mail.gmail.com>
Message-ID: <482F42DA.4090704@pobox.com>

Rainer M Krug wrote:
> Hi
> 
> I have a ESRI asc raster in +proj=longlat +ellps=D_Clarke_1866 +no_defs
...
> I want to reproject / warp it into UTM 34 S. I use the following command:
> 
> gdalwarp -s_srs '+proj=longlat +ellps=D_Clarke_1866 +no_defs' -t_srs
> EPSG:32734 hak_ser2.asc hak_ser2_utm34.asc
> 
> where EPSG:32734 is the definition for UTM 34 S WGS 84
> 
> But I get:
> 
> rkrug@ecolmod1:~/Documents/Projects/AlienSpread/GIS.local/Rainer_subset>
> gdalinfo hak_ser2_utm34.asc
> Driver: GTiff/GeoTIFF
> Files: hak_ser2_utm34.asc
> Size is 1028, 880
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 34N",
>    GEOGCS["WGS 84",

Rainer,

I suspect there is a problem with finding some of the support libgeotiff
or GDAL coordinate system files.

Do you have files in /usr/local/share/epsg_csv?

Do you have files in /usr/local/share/gdal?

I tried a similar command and the South aspect was properly preserved, so
I'm getting that when the support files are not found (either by libgeotiff
or GDAL) the fallback logic mishandles the south modifier.

PS. +ellps=D_Clark_1866 isn't likely to be recognised.  Use +ellps=clrk66.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dfuhry at acm.org  Sat May 17 21:31:06 2008
From: dfuhry at acm.org (David Fuhry)
Date: Sat May 17 21:46:28 2008
Subject: [gdal-dev] ogr.BuildPolygonFromEdges as called from python segfaults
Message-ID: <482F86DA.1010300@acm.org>

ogr.BuildPolygonFromEdges as called from python is always throwing an 
exception for me, and perhaps always segfaulting:

$ ./test_build_poly.py
BuildPolygonFromEdges failed.
Segmentation fault

I first experienced the error running swig/python/samples/tigerpoly.py 
on some TIGER data.  I duplicated some of tigerpoly.pl into a reduced 
python testcase (attached).

Tested with both svn head and 1.5.1, on both RHEL4 x86_64 and Debian 
x86_64.  I don't know the debugging procedure for tracing python calls 
into C++.  Suggestions on that or how to fix the bug welcome.

Thanks,

Dave
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_build_poly.py
Type: text/x-python
Size: 473 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080517/bb08ed59/test_build_poly.py
-------------- next part --------------
LINESTRING (-87.601595000000003 30.999521999999999,-87.599622999999994 31.000059,-87.599219000000005 31.00017)
LINESTRING (-87.601595000000003 30.999521999999999,-87.604348999999999 30.999493,-87.606934999999993 30.99952)
LINESTRING (-87.59966 31.000755999999999,-87.599851 31.000805,-87.599992 31.000805,-87.600215000000006 31.000761,-87.600279 31.000723,-87.600586000000007 31.000623999999998,-87.601256000000006 31.000508,-87.602501000000004 31.000447,-87.602800999999999 31.000468999999999,-87.603108000000006 31.000578999999998,-87.603330999999997 31.000716,-87.603522999999996 31.000909,-87.603765999999993 31.001232999999999,-87.603913000000006 31.001359999999998)
LINESTRING (-87.606133999999997 31.000181999999999,-87.605885 31.000325,-87.605343000000005 31.000716,-87.604659999999996 31.001117,-87.604467999999997 31.0012,-87.603913000000006 31.001359999999998)
LINESTRING (-87.599219000000005 31.00017,-87.599288999999999 31.000299999999999,-87.599397999999994 31.000426,-87.599564 31.000547,-87.599609 31.000700999999999,-87.59966 31.000755999999999)
LINESTRING (-87.606934999999993 30.99952,-87.606712999999999 30.999798999999999,-87.606399999999994 30.999980999999998,-87.606133999999997 31.000181999999999)
From dfuhry at acm.org  Sat May 17 23:01:02 2008
From: dfuhry at acm.org (David Fuhry)
Date: Sat May 17 23:01:01 2008
Subject: [gdal-dev] ogr.BuildPolygonFromEdges as called from python
	segfaults
In-Reply-To: <482F86DA.1010300@acm.org>
References: <482F86DA.1010300@acm.org>
Message-ID: <482F9BEE.5020203@acm.org>

The script works fine in 1.4.4, so the problem was introduced somewhere 
between there and 1.5.1.

-Dave

David Fuhry wrote:
> ogr.BuildPolygonFromEdges as called from python is always throwing an 
> exception for me, and perhaps always segfaulting:
> 
> $ ./test_build_poly.py
> BuildPolygonFromEdges failed.
> Segmentation fault
> 
> I first experienced the error running swig/python/samples/tigerpoly.py 
> on some TIGER data.  I duplicated some of tigerpoly.pl into a reduced 
> python testcase (attached).
> 
> Tested with both svn head and 1.5.1, on both RHEL4 x86_64 and Debian 
> x86_64.  I don't know the debugging procedure for tracing python calls 
> into C++.  Suggestions on that or how to fix the bug welcome.
> 
> Thanks,
> 
> Dave
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Sun May 18 04:46:05 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun May 18 04:46:12 2008
Subject: [gdal-dev] ogr.BuildPolygonFromEdges as called from python
	segfaults
In-Reply-To: <482F9BEE.5020203@acm.org>
References: <482F86DA.1010300@acm.org> <482F9BEE.5020203@acm.org>
Message-ID: <200805181046.06052.even.rouault@mines-paris.org>

Dave,

thanks for the reporting ! 
Ouch, it seems that the OGRBuildPolygonFromEdges() function has not been 
mapped into SWIG, as far as I can see. So, I guess that you use now the new 
generation python bindings that are the default from GDAL 1.5.0... That 
explains why it works in GDAL 1.4.X and not in GDAL 1.5.0

I've filed a ticket for that : http://trac.osgeo.org/gdal/ticket/2380

I don't understand the segfault however. On my machine, I just get a python 
exception.

You can debug the GDAL code called from a python script with DDD/GDB.
Run 'ddd python'. Then in DDD : 'set args my_script.py'. Then 'run'.
On your test case, if it segfaults in GDAL code, you should be able to see the 
stack trace, 'bt' or the GUI command.
Once the first run has occured, you can also add breakpoints in GDAL code, for 
example 'b CPLMalloc' and rerun again. 

You can also run Valgrind on a python script calling GDAL code :
valgrind --trace-children=yes ./my_script.py

Best regards,

Even

Le Sunday 18 May 2008 05:01:02 David Fuhry, vous avez ?crit?:
> The script works fine in 1.4.4, so the problem was introduced somewhere
> between there and 1.5.1.
>
> -Dave
>
> David Fuhry wrote:
> > ogr.BuildPolygonFromEdges as called from python is always throwing an
> > exception for me, and perhaps always segfaulting:
> >
> > $ ./test_build_poly.py
> > BuildPolygonFromEdges failed.
> > Segmentation fault
> >
> > I first experienced the error running swig/python/samples/tigerpoly.py
> > on some TIGER data.  I duplicated some of tigerpoly.pl into a reduced
> > python testcase (attached).
> >
> > Tested with both svn head and 1.5.1, on both RHEL4 x86_64 and Debian
> > x86_64.  I don't know the debugging procedure for tracing python calls
> > into C++.  Suggestions on that or how to fix the bug welcome.
> >
> > Thanks,
> >
> > Dave
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nikos.alexandris at felis.uni-freiburg.de  Sun May 18 04:49:13 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Sun May 18 04:49:28 2008
Subject: [gdal-dev] Using the CORINE2000 land cover/land use data base with
	GRASS-GIS under Ubuntu-linux 8.04
Message-ID: <1211100553.6771.18.camel@vertical>

GRASSers and GDALers,

thank you for giving life to your mailing lists, these Treasures of
Knowledge.
I've written with your help another small article in ISPRS' (Student
Consortium) Newsletter.

It is about the use of the CORINE land cover map with GRASS (and a small
reference to OGR).
Nothing like the Big-Bang. I just try to focus on the "spread of the
News that GRASS exists and is here to stay".

My warmest greetings,
Nikos


The link to the newsletter section of the ISPRS SC website:

http://www.isprs-studentconsortium.org/index.php?id=2

The Newsletter Vol.2 - #2
http://www.isprs-studentconsortium.org/assets/files/Newsletters/Newsletter_No2_Vol2_Spring.pdf


And the "CORINE with GRASS" article as a separate pdf:
http://www.isprs-studentconsortium.org/assets/files/Material_reports/Volume_2_No2/CORINE_withGRASS.pdf


From dron at ak4719.spb.edu  Sun May 18 04:42:39 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Sun May 18 04:54:25 2008
Subject: [gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <482F01B9.70404@pobox.com>
References: <20080517150047.GA12028@ak4719.spb.edu> <482F01B9.70404@pobox.com>
Message-ID: <20080518084239.GB16042@ak4719.spb.edu>

Frank,

On Sat, May 17, 2008 at 12:03:05PM -0400, Frank Warmerdam wrote:
> If you are willing to do a bit of extra work I would suggest that the
> argument to -a be treated as an attribute name, but if it is not found
> *and* matches an algorithm name it be used as the algorithm with a
> warning so folks get used to use the new algorithm flag.

That is what I am calling overintelligence!

> Generally speaking I am loath to change commandline arguments because
> it breaks scripts.  With gdal_grid you at least have the situation
> that the program is very new, so it will likely not be "deeply baked"
> into many scripted systems yet.

Yes, that is why I am thinking it is not too harmful.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From neteler at osgeo.org  Sun May 18 04:58:32 2008
From: neteler at osgeo.org (Markus Neteler)
Date: Sun May 18 04:58:35 2008
Subject: [gdal-dev] Using the CORINE2000 land cover/land use data base
	with GRASS-GIS under Ubuntu-linux 8.04
In-Reply-To: <1211100553.6771.18.camel@vertical>
References: <1211100553.6771.18.camel@vertical>
Message-ID: <86782b610805180158p6fac3a4m916aa9e9030dd704@mail.gmail.com>

Very nice, Nikos!

Please (all) consider to register your (related) material here:
http://wiki.osgeo.org/wiki/Educational_Content_Inventory

Markus

On Sun, May 18, 2008 at 10:49 AM, Nikos Alexandris
<nikos.alexandris@felis.uni-freiburg.de> wrote:
> GRASSers and GDALers,
>
> thank you for giving life to your mailing lists, these Treasures of
> Knowledge.
> I've written with your help another small article in ISPRS' (Student
> Consortium) Newsletter.
>
> It is about the use of the CORINE land cover map with GRASS (and a small
> reference to OGR).
> Nothing like the Big-Bang. I just try to focus on the "spread of the
> News that GRASS exists and is here to stay".
>
> My warmest greetings,
> Nikos
>
>
> The link to the newsletter section of the ISPRS SC website:
>
> http://www.isprs-studentconsortium.org/index.php?id=2
>
> The Newsletter Vol.2 - #2
> http://www.isprs-studentconsortium.org/assets/files/Newsletters/Newsletter_No2_Vol2_Spring.pdf
>
>
> And the "CORINE with GRASS" article as a separate pdf:
> http://www.isprs-studentconsortium.org/assets/files/Material_reports/Volume_2_No2/CORINE_withGRASS.pdf
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Open Source Geospatial Foundation
http://www.osgeo.org/
http://www.grassbook.org/
From nikos.alexandris at felis.uni-freiburg.de  Sun May 18 05:04:18 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Sun May 18 05:04:33 2008
Subject: [gdal-dev] Using the CORINE2000 land cover/land use data base
	with GRASS-GIS under Ubuntu-linux 8.04
In-Reply-To: <86782b610805180158p6fac3a4m916aa9e9030dd704@mail.gmail.com>
References: <1211100553.6771.18.camel@vertical>
	<86782b610805180158p6fac3a4m916aa9e9030dd704@mail.gmail.com>
Message-ID: <1211101458.6771.25.camel@vertical>

On Sun, 2008-05-18 at 10:58 +0200, Markus Neteler wrote:
> Very nice, Nikos!
> 
> Please (all) consider to register your (related) material here:
> http://wiki.osgeo.org/wiki/Educational_Content_Inventory

Yep, I am after it ;-P
> 
> Markus

The article was initially thought to go for the GRASS wiki... but then I
thought to fight on the "outer" space. I got some positive comments
about it.

Yet, the most important is that people don't even know that GRASS (and
even worse for GDAL/OGR) is a full-functional GIS. Some know it exists
but they never "touched" it.

Greetings,

Nikos


From dron at ak4719.spb.edu  Sun May 18 04:47:39 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Sun May 18 05:09:20 2008
Subject: [gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <f3b73b7d0805170951t652cd404sab5f1bf8bd43b55d@mail.gmail.com>
References: <20080517150047.GA12028@ak4719.spb.edu>
	<f3b73b7d0805170951t652cd404sab5f1bf8bd43b55d@mail.gmail.com>
Message-ID: <20080518084739.GC16042@ak4719.spb.edu>

Tamas,

> I think the 'field' option name would better conform to the OGR
> terminology.

Actually that is how I planned to call this option. But then I looked at
other utilities and found this '-a' thing.

> You could also denote that this will make up the z value during the
> grid creation.  So I think '-zfield' or '-zvalue' would be a better
> choice.

Sounds reasonable, thanks for suggestion. I will go with '-zfield'.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From r.m.krug at gmail.com  Mon May 19 05:00:51 2008
From: r.m.krug at gmail.com (Rainer M Krug)
Date: Mon May 19 05:00:53 2008
Subject: [gdal-dev] Problem reprojecting Clark 1866 to UTM 34 South
In-Reply-To: <fb7c7e870805190056n2d8a14ddy2c749757dbf5b0a3@mail.gmail.com>
References: <fb7c7e870805170938k4a77a186k115d11f4c410884e@mail.gmail.com>
	<482F42DA.4090704@pobox.com>
	<fb7c7e870805190056n2d8a14ddy2c749757dbf5b0a3@mail.gmail.com>
Message-ID: <fb7c7e870805190200h4c2c2b36k6192dccaaf980378@mail.gmail.com>

I did some more trying and I found the following:
If I convert it to a geotiff, it works, but to a .asc, it doesn't.
Even converting the geotif to an .asc, it changes from PROJCS["WGS 84
/ UTM zone 34S" to PROJCS["WGS 84 / UTM zone 34N" (output below).

Can somebody confirm that as a bug?

Rainer


> gdalwarp -s_srs '+proj=longlat +ellps=clrk66 +no_defs' -t_srs '+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs' hak_ser2.asc hak_ser2_utm34.tif

> gdalinfo hak_ser2_utm34.tif
Driver: GTiff/GeoTIFF
Files: hak_ser2_utm34.tif
Size is 1028, 880
Coordinate System is:
PROJCS["WGS 84 / UTM zone 34S",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",21],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32734"]]
Origin = (-17476.813424218373257,7568238.577940721064806)
Pixel Size = (1715.257886354814218,-1715.257886354814218)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  -17476.813, 7568238.578) ( 15d59'39.65"E, 21d54'50.47"S)
Lower Left  (  -17476.813, 6058811.638) ( 15d17'55.46"E, 35d28'46.08"S)
Upper Right ( 1745808.294, 7568238.578) ( 32d58'4.10"E, 21d33'14.79"S)
Lower Right ( 1745808.294, 6058811.638) ( 34d34'58.31"E, 34d50'42.45"S)
Center      (  864165.740, 6813525.108) ( 24d43'43.18"E, 28d45'15.64"S)
Band 1 Block=1028x1 Type=Float32, ColorInterp=Gray

> gdalwarp hak_ser2_utm34.tif hak_ser2_utm34.asc\


> gdalinfo hak_ser2_utm34.asc
Driver: GTiff/GeoTIFF
Files: hak_ser2_utm34.asc
Size is 1028, 880
Coordinate System is:
PROJCS["WGS 84 / UTM zone 34N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",21],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32634"]]
Origin = (-17471.391705359546904,-2431926.174459759611636)
Pixel Size = (1715.270741799227608,-1715.270741799227608)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  -17471.392,-2431926.174) ( 15d59'39.65"E, 21d54'55.81"S)
Lower Left  (  -17471.392,-3941364.427) ( 15d17'55.27"E, 35d28'51.77"S)
Upper Right ( 1745826.931,-2431926.174) ( 32d58'5.17"E, 21d33'19.99"S)
Lower Right ( 1745826.931,-3941364.427) ( 34d34'59.95"E, 34d50'47.92"S)
Center      (  864177.770,-3186645.301) ( 24d43'43.82"E, 28d45'21.15"S)
Band 1 Block=1028x1 Type=Float32, ColorInterp=Gray


On Mon, May 19, 2008 at 9:56 AM, Rainer M Krug <r.m.krug@gmail.com> wrote:
> On Sat, May 17, 2008 at 10:40 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> Rainer M Krug wrote:
>>>
>>> Hi
>>>
>>> I have a ESRI asc raster in +proj=longlat +ellps=D_Clarke_1866 +no_defs
>>
>> ...
>>>
>>> I want to reproject / warp it into UTM 34 S. I use the following command:
>>>
>>> gdalwarp -s_srs '+proj=longlat +ellps=D_Clarke_1866 +no_defs' -t_srs
>>> EPSG:32734 hak_ser2.asc hak_ser2_utm34.asc
>>>
>>> where EPSG:32734 is the definition for UTM 34 S WGS 84
>>>
>>> But I get:
>>>
>>> rkrug@ecolmod1:~/Documents/Projects/AlienSpread/GIS.local/Rainer_subset>
>>> gdalinfo hak_ser2_utm34.asc
>>> Driver: GTiff/GeoTIFF
>>> Files: hak_ser2_utm34.asc
>>> Size is 1028, 880
>>> Coordinate System is:
>>> PROJCS["WGS 84 / UTM zone 34N",
>>>   GEOGCS["WGS 84",
>>
>> Rainer,
>>
>> I suspect there is a problem with finding some of the support libgeotiff
>> or GDAL coordinate system files.
>>
>> Do you have files in /usr/local/share/epsg_csv?
>>
>> Do you have files in /usr/local/share/gdal?
> A file named gdal_datum.csv in /usr/local/share and
> a grass folder
>
> Are there any specific files I have to look for?
>
> I have the following files with epsg:
>
>> locate epsg
> /opt/grass/etc/epsg_option.tcl
> /usr/lib/R/library/rgdal/gdal/epsg.wkt
> /usr/lib/R/library/rgdal/proj/epsg
> /usr/local/GeoExpressSDK/3rd-party/share/gdal/epsg.wkt
> /usr/local/share/epsg.wkt
> /usr/local/share/proj/epsg
> /usr/share/proj/epsg
>
>
>>
>> I tried a similar command and the South aspect was properly preserved, so
>> I'm getting that when the support files are not found (either by libgeotiff
>> or GDAL) the fallback logic mishandles the south modifier.
>>
>> PS. +ellps=D_Clark_1866 isn't likely to be recognised.  Use +ellps=clrk66.
>>
>> Best regards,
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>>
>>
>
>
>
> --
> Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
> Biology, UCT), Dipl. Phys. (Germany)
>
> Plant Conservation Unit
> Department of Botany
> University of Cape Town
> Rondebosch 7701
> South Africa
>



-- 
Rainer M. Krug, PhD (Conservation Ecology, SUN), MSc (Conservation
Biology, UCT), Dipl. Phys. (Germany)

Plant Conservation Unit
Department of Botany
University of Cape Town
Rondebosch 7701
South Africa
From warmerdam at pobox.com  Mon May 19 11:28:49 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May 19 11:29:24 2008
Subject: [gdal-dev] Problem reprojecting Clark 1866 to UTM 34 South
In-Reply-To: <fb7c7e870805190200h4c2c2b36k6192dccaaf980378@mail.gmail.com>
References: <fb7c7e870805170938k4a77a186k115d11f4c410884e@mail.gmail.com>
	<482F42DA.4090704@pobox.com>
	<fb7c7e870805190056n2d8a14ddy2c749757dbf5b0a3@mail.gmail.com>
	<fb7c7e870805190200h4c2c2b36k6192dccaaf980378@mail.gmail.com>
Message-ID: <48319CB1.4040006@pobox.com>

Rainer M Krug wrote:
> I did some more trying and I found the following:
> If I convert it to a geotiff, it works, but to a .asc, it doesn't.
> Even converting the geotif to an .asc, it changes from PROJCS["WGS 84
> / UTM zone 34S" to PROJCS["WGS 84 / UTM zone 34N" (output below).
> 
> Can somebody confirm that as a bug?

Rainer,

I would note that even though you are converting to a file with the
extension .asc with commands like the following, it is still producing a
GeoTIFF.

 > gdalwarp -s_srs '+proj=longlat +ellps=clrk66 +no_defs' -t_srs '+proj=utm 
+zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs' hak_ser2.asc 
hak_ser2_utm34.tif

I believe your problem is related to lack of the epsg support files since you
don't mention having a /usr/local/share/epsg_csv directory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon May 19 12:29:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May 19 12:30:33 2008
Subject: [gdal-dev] INST_DATA and 1.5.2
Message-ID: <4831AAFC.90809@pobox.com>

Folks,

I would like to bring everyone's attention to an unfortunate problem in
GDAL 1.5.0.  It seems an upgrade in the version of autoconf used to generate
the configure script has resulted in the GDAL data files getting installed
(by default) in $prefix/share instead of $prefix/share/gdal.

I have corrected this now in svn trunk and 1.5 branch.

   http://trac.osgeo.org/gdal/ticket/2382

Also, I am interested in issuing a 1.5.2 GDAL release this week or early
next.  I would like to prepare a release candidate tomorrow.  Is anyone aware
of critical fixes that should be done before a 1.5.2 release?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dylan.beaudette at gmail.com  Mon May 19 12:47:43 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Mon May 19 12:44:31 2008
Subject: [gdal-dev] INST_DATA and 1.5.2
In-Reply-To: <4831AAFC.90809@pobox.com>
References: <4831AAFC.90809@pobox.com>
Message-ID: <200805190947.43276.dylan.beaudette@gmail.com>

On Monday 19 May 2008, Frank Warmerdam wrote:
> Folks,
>
> I would like to bring everyone's attention to an unfortunate problem in
> GDAL 1.5.0.  It seems an upgrade in the version of autoconf used to
> generate the configure script has resulted in the GDAL data files getting
> installed (by default) in $prefix/share instead of $prefix/share/gdal.
>
> I have corrected this now in svn trunk and 1.5 branch.
>
>    http://trac.osgeo.org/gdal/ticket/2382
>
> Also, I am interested in issuing a 1.5.2 GDAL release this week or early
> next.  I would like to prepare a release candidate tomorrow.  Is anyone
> aware of critical fixes that should be done before a 1.5.2 release?
>
> Best regards,

Thanks for the update Frank. Will this cause any hickup when we install the 
latest version of tunk? i.e. will paths need to be reset or the like. Also is 
there a general approach to removing the accidentally placed GDAL support 
files in $prefix/share/ ?

Also, would these misplaced files have affected any datum shifting or other 
operations that rely on these files?

Cheers,

Dylan

-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From warmerdam at pobox.com  Mon May 19 13:02:10 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May 19 13:02:35 2008
Subject: [gdal-dev] INST_DATA and 1.5.2
In-Reply-To: <200805190947.43276.dylan.beaudette@gmail.com>
References: <4831AAFC.90809@pobox.com>
	<200805190947.43276.dylan.beaudette@gmail.com>
Message-ID: <4831B292.7080505@pobox.com>

Dylan Beaudette wrote:
> On Monday 19 May 2008, Frank Warmerdam wrote:
>> Folks,
>>
>> I would like to bring everyone's attention to an unfortunate problem in
>> GDAL 1.5.0.  It seems an upgrade in the version of autoconf used to
>> generate the configure script has resulted in the GDAL data files getting
>> installed (by default) in $prefix/share instead of $prefix/share/gdal.
>>
>> I have corrected this now in svn trunk and 1.5 branch.
>>
>>    http://trac.osgeo.org/gdal/ticket/2382
>>
>> Also, I am interested in issuing a 1.5.2 GDAL release this week or early
>> next.  I would like to prepare a release candidate tomorrow.  Is anyone
>> aware of critical fixes that should be done before a 1.5.2 release?
>>
>> Best regards,
> 
> Thanks for the update Frank. Will this cause any hickup when we install the 
> latest version of trunk? i.e. will paths need to be reset or the like. 

Dylan,

I don't think it should cause a problem.

 > Also is
> there a general approach to removing the accidentally placed GDAL support 
> files in $prefix/share/ ?

rm /usr/local/share/*.*

might do it as long as there isn't anything else there.

> Also, would these misplaced files have affected any datum shifting or other 
> operations that rely on these files?

Possibly, though I suspect that the INST_DATA location is getting built into
GDAL so the files were being searched for in their alternate location.

What you *shouldn't* do is take an existing GDAL build of 1.5.0 or 1.5.1
and move the .csv files into /usr/local/share without rebuilding the software
with the new data location.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dylan.beaudette at gmail.com  Mon May 19 13:38:49 2008
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Mon May 19 13:35:42 2008
Subject: [gdal-dev] INST_DATA and 1.5.2
In-Reply-To: <4831B292.7080505@pobox.com>
References: <4831AAFC.90809@pobox.com>
	<200805190947.43276.dylan.beaudette@gmail.com>
	<4831B292.7080505@pobox.com>
Message-ID: <200805191038.49736.dylan.beaudette@gmail.com>

On Monday 19 May 2008, Frank Warmerdam wrote:
> Dylan Beaudette wrote:
> > On Monday 19 May 2008, Frank Warmerdam wrote:
> >> Folks,
> >>
> >> I would like to bring everyone's attention to an unfortunate problem in
> >> GDAL 1.5.0.  It seems an upgrade in the version of autoconf used to
> >> generate the configure script has resulted in the GDAL data files
> >> getting installed (by default) in $prefix/share instead of
> >> $prefix/share/gdal.
> >>
> >> I have corrected this now in svn trunk and 1.5 branch.
> >>
> >>    http://trac.osgeo.org/gdal/ticket/2382
> >>
> >> Also, I am interested in issuing a 1.5.2 GDAL release this week or early
> >> next.  I would like to prepare a release candidate tomorrow.  Is anyone
> >> aware of critical fixes that should be done before a 1.5.2 release?
> >>
> >> Best regards,
> >
> > Thanks for the update Frank. Will this cause any hickup when we install
> > the latest version of trunk? i.e. will paths need to be reset or the
> > like.
>
> Dylan,
>
> I don't think it should cause a problem.
>
>  > Also is
> >
> > there a general approach to removing the accidentally placed GDAL support
> > files in $prefix/share/ ?
>
> rm /usr/local/share/*.*
>
> might do it as long as there isn't anything else there.
>
> > Also, would these misplaced files have affected any datum shifting or
> > other operations that rely on these files?
>
> Possibly, though I suspect that the INST_DATA location is getting built
> into GDAL so the files were being searched for in their alternate location.
>
> What you *shouldn't* do is take an existing GDAL build of 1.5.0 or 1.5.1
> and move the .csv files into /usr/local/share without rebuilding the
> software with the new data location.
>
> Best regards,

Thanks for the tips. Is there a simple way to have GDAL check to see if all of 
its supporting files are intact?

Cheers,

-- 
Dylan Beaudette
Soil Resource Laboratory
http://casoilresource.lawr.ucdavis.edu/
University of California at Davis
530.754.7341
From woklist at kyngchaos.com  Mon May 19 15:40:50 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon May 19 15:40:55 2008
Subject: [gdal-dev] ogrinfo on JOINed layer empty
Message-ID: <70B32114-2520-45F2-9920-BC7F4498A3F6@kyngchaos.com>

While testing some connections for a Mapserver map file, I'm finding  
that ogrinfo is not showing any info (layers, fields, features) on  
JOINed layers.

A connection that works in Mapserver:

CONNECTION "/"
DATA "SELECT * FROM some_shapefile LEFT JOIN  
'MYSQL:some_database 
,host=localhost,user=some_user,tables=some_table'.some_table ON  
some_shapefile.id = some_table.id"

but in ogrinfo (on the Mapserver computer, so it's still local):

ogrinfo -al -so . "SELECT * FROM some_shapefile LEFT JOIN  
'MYSQL:some_database 
,host=localhost,user=some_user,tables=some_table'.some_table ON  
some_shapefile.id = some_table.id"
INFO: Open of `.'
       using driver `ESRI Shapefile' successful.

It does not show any of the fields from the shapefile or the JOINed  
MySQL table.  I get exactly the same output on a bad JOIN (or other  
non-existent shapefile layer).

CPL_DEBUG=ON doesn't show any helpful debug messages, just (there are  
5 shapefiles in the folder):

OGR: GetLayerCount() = 5


Any hints on how to get ogrinfo to show JOINed layer info?  I think  
I've seen this work in the past.


GDAL 1.5.1, OSX, Mapserver 5.0.2.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From warmerdam at pobox.com  Mon May 19 17:14:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May 19 17:14:44 2008
Subject: [gdal-dev] ogrinfo on JOINed layer empty
In-Reply-To: <70B32114-2520-45F2-9920-BC7F4498A3F6@kyngchaos.com>
References: <70B32114-2520-45F2-9920-BC7F4498A3F6@kyngchaos.com>
Message-ID: <4831EDB3.7000403@pobox.com>

William Kyngesburye wrote:
> While testing some connections for a Mapserver map file, I'm finding 
> that ogrinfo is not showing any info (layers, fields, features) on 
> JOINed layers.
> 
> A connection that works in Mapserver:
> 
> CONNECTION "/"
> DATA "SELECT * FROM some_shapefile LEFT JOIN 
> 'MYSQL:some_database,host=localhost,user=some_user,tables=some_table'.some_table 
> ON some_shapefile.id = some_table.id"
> 
> but in ogrinfo (on the Mapserver computer, so it's still local):
> 
> ogrinfo -al -so . "SELECT * FROM some_shapefile LEFT JOIN 
> 'MYSQL:some_database,host=localhost,user=some_user,tables=some_table'.some_table 
> ON some_shapefile.id = some_table.id"
> INFO: Open of `.'
>       using driver `ESRI Shapefile' successful.
> 
> It does not show any of the fields from the shapefile or the JOINed 
> MySQL table.  I get exactly the same output on a bad JOIN (or other 
> non-existent shapefile layer).
> 
> CPL_DEBUG=ON doesn't show any helpful debug messages, just (there are 5 
> shapefiles in the folder):
> 
> OGR: GetLayerCount() = 5
> 
> 
> Any hints on how to get ogrinfo to show JOINed layer info?  I think I've 
> seen this work in the past.
>
William,

There are two issues here.

1) ogrinfo does not report an error when you pass it a layer name that doesn't
exist on the commandline.

2) You aren't passing the SQL statement you want evaluated using the sql
commandline switch.  Try:

ogrinfo -al -so . -sql "SELECT * ...'

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From woklist at kyngchaos.com  Mon May 19 17:36:27 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Mon May 19 17:36:32 2008
Subject: [gdal-dev] ogrinfo on JOINed layer empty
In-Reply-To: <4831EDB3.7000403@pobox.com>
References: <70B32114-2520-45F2-9920-BC7F4498A3F6@kyngchaos.com>
	<4831EDB3.7000403@pobox.com>
Message-ID: <079552E2-B120-4270-9727-0FF74E42C313@kyngchaos.com>

On May 19, 2008, at 4:14 PM, Frank Warmerdam wrote:

> 2) You aren't passing the SQL statement you want evaluated using the  
> sql
> commandline switch.  Try:
>
> ogrinfo -al -so . -sql "SELECT * ...'
>
Ah, that did it.  I guess the documentation is a little confusing - I  
wouldn't expect a command switch to be interchangable with a layer  
specification.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin


From timmichelsen at gmx-topmail.de  Tue May 20 09:53:56 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Tue May 20 09:54:15 2008
Subject: [gdal-dev] converting KML to CSV
Message-ID: <loom.20080520T133500-248@post.gmane.org>

Hello,
I'd like to convert KML back to CSV.

When I issue
ogr2ogr -f CSV out.csv in.kml

there are no coordinates written to the CSV file. Only the placemark names are
written.

How can I get ogr2ogr to create a file like
Latitude,Longitude,Name
48.1,0.25,"First point"
49.2,1.1,"Second point"
47.5,0.75,"Third point"

Thanks in advance & kind regards,
Tim

From warmerdam at pobox.com  Tue May 20 10:25:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 20 10:25:53 2008
Subject: [gdal-dev] converting KML to CSV
In-Reply-To: <loom.20080520T133500-248@post.gmane.org>
References: <loom.20080520T133500-248@post.gmane.org>
Message-ID: <4832DF65.2050107@pobox.com>

Tim Michelsen wrote:
> Hello,
> I'd like to convert KML back to CSV.
> 
> When I issue
> ogr2ogr -f CSV out.csv in.kml
> 
> there are no coordinates written to the CSV file. Only the placemark names are
> written.
> 
> How can I get ogr2ogr to create a file like
> Latitude,Longitude,Name
> 48.1,0.25,"First point"
> 49.2,1.1,"Second point"
> 47.5,0.75,"Third point"

Tim,

The CSV driver does not support writing geometries, though I can see some
support for this might be desirable.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From nikos.alexandris at felis.uni-freiburg.de  Tue May 20 10:39:07 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Tue May 20 10:39:37 2008
Subject: [gdal-dev] converting KML to CSV
In-Reply-To: <loom.20080520T133500-248@post.gmane.org>
References: <loom.20080520T133500-248@post.gmane.org>
Message-ID: <1211294347.10640.1.camel@vertical>

On Tue, 2008-05-20 at 13:53 +0000, Tim Michelsen wrote:
> Hello,
> I'd like to convert KML back to CSV.
> 
> When I issue
> ogr2ogr -f CSV out.csv in.kml
> 
> there are no coordinates written to the CSV file. Only the placemark names are
> written.
> 
> How can I get ogr2ogr to create a file like
> Latitude,Longitude,Name
> 48.1,0.25,"First point"
> 49.2,1.1,"Second point"
> 47.5,0.75,"Third point"
> 
> Thanks in advance & kind regards,
> Tim

A solution here:

http://spanring.eu/blog/2005/12/11/kml2gml/

From Paul_VanDeusen at uml.edu  Tue May 20 15:43:37 2008
From: Paul_VanDeusen at uml.edu (pvandeus)
Date: Tue May 20 15:43:38 2008
Subject: [Gdal-dev] ERDAS img format from gdal rpm
In-Reply-To: <17280107.post@talk.nabble.com>
References: <17280107.post@talk.nabble.com>
Message-ID: <17349059.post@talk.nabble.com>


This format is available in the gdal rpm for Fedora 9.


pvandeus wrote:
> 
> The gdal rpm doesn't include the ERDAS .img format.
> Is there a way to add this that doesn't involve compiling gdal.
> 
> We are using the grass rpm on Fedora 8.  I'm afraid that compiling gdal
> would then require me to
> compile grass.  It's so easy to use the rpm's that I hate to return to
> compiling grass and gdal again.
> 
> This is the gdal rpm that I have.
> 
> gdal-1.4.2-3.fc8
> 
> grass rpms are
> grass-6.2.2-2.fc8
> grass-libs-6.2.2-2.fc8
> 

-- 
View this message in context: http://www.nabble.com/ERDAS-img-format-from-gdal-rpm-tp17280107p17349059.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From c.schitka at gmail.com  Tue May 20 16:23:50 2008
From: c.schitka at gmail.com (Courtney Schitka)
Date: Tue May 20 16:23:52 2008
Subject: [gdal-dev] OGDI Compilation Issues ?
Message-ID: <e66a4dbf0805201323s7bc122d8v5c742d5ec03e52e0@mail.gmail.com>

I am really beating my head against a wall here and don't seem to be getting
anywhere fast.

Should I expect OGDI-3.2.0.beta1 to compile using VS 2005, or 2003 on
Windows Vista. WITHOUT any problems?  Or would there be some issues I might
have to deal with. Specifically a number of syntax issues etc. Could someone
please verify this works, or I am loosing my mind ? I don't mind fixing the
problems to get it to compile, I would like to make sure I am not investing
a whole lot of work when it's not needed.

So basically I am looking for someone to varify that yes they have compiled
it and it works. Or tell me there are a number of things that need to be
fixed. Or if someone knows of a stable version higher then 3.1.5 ?

Cheers
Courtney.,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080520/3745cac4/attachment.html
From timmichelsen at gmx-topmail.de  Tue May 20 16:21:40 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Tue May 20 16:25:06 2008
Subject: [gdal-dev] Re: converting KML to CSV
In-Reply-To: <1211294347.10640.1.camel@vertical>
References: <loom.20080520T133500-248@post.gmane.org>
	<1211294347.10640.1.camel@vertical>
Message-ID: <g0vbsk$ksj$2@ger.gmane.org>

> A solution here:
> 
> http://spanring.eu/blog/2005/12/11/kml2gml/
Thanks Nikos,
but my idea is to use ogr2ogr as a generic converte...

From timmichelsen at gmx-topmail.de  Tue May 20 16:24:52 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Tue May 20 16:25:07 2008
Subject: [gdal-dev] Re: converting KML to CSV
In-Reply-To: <4832DF65.2050107@pobox.com>
References: <loom.20080520T133500-248@post.gmane.org>
	<4832DF65.2050107@pobox.com>
Message-ID: <g0vc2l$m36$1@ger.gmane.org>

> The CSV driver does not support writing geometries, though I can see some
> support for this might be desirable.
May I enter a request for it?

I also suggest that CSV reader accepts the following formats as well:

8.1;0.25;First point
49.2;1.1;Second point
47.5;0.75;Third point

Excel writes like this by default and many programs use it as well. If 
you want the traditional format -- the only one accepted by OGR -- you 
need to use the more advanced CSV export in openoffice calc.



Kind regards,
Tim

From sfkeller at gmail.com  Tue May 20 16:35:52 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Tue May 20 16:35:54 2008
Subject: [gdal-dev] Re: converting KML to CSV
In-Reply-To: <g0vc2l$m36$1@ger.gmane.org>
References: <loom.20080520T133500-248@post.gmane.org>
	<4832DF65.2050107@pobox.com> <g0vc2l$m36$1@ger.gmane.org>
Message-ID: <25bc040b0805201335x68c3ebe5ha958ff8c342c09c3@mail.gmail.com>

Try this:

% ogrinfo -ro Bahnhoefe.kml
INFO: Open of `Bahnhoefe.kml'
      using driver `KML' successful.
1: BahnhoefeWGS84 (Point)

% ogr2ogr -f CSV out Bahnhoefe.kml -sql "select *,OGR_GOM_WKT from
BahnhoefeWGS84"
...or my online converter http://geoconverter.hsr.ch

-- Stefan
2008/5/20 Tim Michelsen <timmichelsen@gmx-topmail.de>:

>  The CSV driver does not support writing geometries, though I can see some
>> support for this might be desirable.
>>
> May I enter a request for it?
>
> I also suggest that CSV reader accepts the following formats as well:
>
> 8.1;0.25;First point
> 49.2;1.1;Second point
> 47.5;0.75;Third point
>
> Excel writes like this by default and many programs use it as well. If you
> want the traditional format -- the only one accepted by OGR -- you need to
> use the more advanced CSV export in openoffice calc.
>
>
>
> Kind regards,
> Tim
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080520/a07cff01/attachment.html
From alexandre.gacon+gdal at gmail.com  Wed May 21 04:17:45 2008
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Wed May 21 04:17:47 2008
Subject: [gdal-dev] [OGR] Problems with the VRT driver
Message-ID: <45f3b7570805210117t4149d145t3629b1dd189ad194@mail.gmail.com>

Hi,

I would like to use ogr2ogr to convert a csv file to a shapefile.

Following the documentation of the csv driver, I shall use a VRT file to
handle the conversion.

After several unsuccessful tries on my own files, I decided to try the
sample indicated in the csv driver documentation. But the sample does not
work : ogr is unable to find the appropriate driver.

Could someone help me, please ?

Sincerelly,

Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080521/48fe47b3/attachment.html
From timmichelsen at gmx-topmail.de  Wed May 21 04:40:25 2008
From: timmichelsen at gmx-topmail.de (Tim Michelsen)
Date: Wed May 21 04:40:46 2008
Subject: [gdal-dev] Re: converting KML to CSV
References: <loom.20080520T133500-248@post.gmane.org>
	<4832DF65.2050107@pobox.com> <g0vc2l$m36$1@ger.gmane.org>
	<25bc040b0805201335x68c3ebe5ha958ff8c342c09c3@mail.gmail.com>
Message-ID: <loom.20080521T083845-107@post.gmane.org>

Hello,
thanks for your suggestion.

  
> % ogr2ogr -f CSV out Bahnhoefe.kml -sql 
"select *,OGR_GOM_WKT from BahnhoefeWGS84"

This fails for me with the message:
ERROR 1: SQL: Unrecognised field name OGR_GOM_WKT.

What means "OGR_GOM_WKT"?

Regards,
Timmie

From szekerest at gmail.com  Wed May 21 04:58:09 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed May 21 04:58:12 2008
Subject: [gdal-dev] Re: converting KML to CSV
In-Reply-To: <loom.20080521T083845-107@post.gmane.org>
References: <loom.20080520T133500-248@post.gmane.org>
	<4832DF65.2050107@pobox.com> <g0vc2l$m36$1@ger.gmane.org>
	<25bc040b0805201335x68c3ebe5ha958ff8c342c09c3@mail.gmail.com>
	<loom.20080521T083845-107@post.gmane.org>
Message-ID: <f3b73b7d0805210158m4f730e4fs79591d9649aae006@mail.gmail.com>

Tim,

You should use OGR_GEOM_WKT instead, it was just a typo.
For more information see:

http://www.gdal.org/ogr/ogr_sql.html#ogr_sql_special_fields

Best regards,

Tamas


2008/5/21 Tim Michelsen <timmichelsen@gmx-topmail.de>:
> Hello,
> thanks for your suggestion.
>
>
>> % ogr2ogr -f CSV out Bahnhoefe.kml -sql
> "select *,OGR_GOM_WKT from BahnhoefeWGS84"
>
> This fails for me with the message:
> ERROR 1: SQL: Unrecognised field name OGR_GOM_WKT.
>
> What means "OGR_GOM_WKT"?
>
> Regards,
> Timmie
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From Shawn.Gong at drdc-rddc.gc.ca  Wed May 21 13:17:00 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed May 21 13:17:25 2008
Subject: [gdal-dev] gdal 1.5.1 Bus Error - core dump on Solaris 9
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120085@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I have been using gdal 1.4, and have recently built gdal 1.5.1 for its
large image support.
Gdal 1.5.1 and OpenEV 1.8 building was fine. Then I encounter Bus Error
- core dump on Solaris 9.
I have tracked it down to where the Bus Error occurred:
  gtiff_driver = gdal.GetDriverByName( 'GTiff' )
  self.new_ds = gtiff_driver.CreateCopy( fname, vrtds, ...
A "core" file is generated and kept growing to near half GB.

I have followed Frank's advices of using -fPIC during compiling, and
rebuilt Gdal 1.5.1 from scratch. But I still get the same error.

Help is appreciated,
Shawn

From antonio.valentino at tiscali.it  Wed May 21 14:13:14 2008
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed May 21 14:14:28 2008
Subject: [gdal-dev] build the HDF5 driver as a shared object
Message-ID: <20080521201314.6c1f6e03@tiscali.it>

Hi,
this is the first time I post on this mailing list.

I would like to like to build the HDF5 driver as a shared object on
debian sid.

I run

$ ./configure --prefix=$HOME/gdal --with-libtiff=internal
--with-geotiff=internal --with-python --without-hdf5
--with-grass=/usr/lib/grass
$ make
$ cd  frmts/hdf5

and 

$ make plugin

after appending


plugin: gdal_HDF5.so

gdal_HDF5.so:	$(OBJ)
	$(LD_SHARED) $(OBJ) $(GDAL_LIBS) $(LIBS) -o gdal_HDF5.so


to GNUMakefile.
I get the following error message:


hdf5dataset.o hdf5imagedataset.o /home/valentino/gdal/src/gdal/libgdal.a
-L/usr/lib -lgeos_c -I/usr/include -lsqlite3 -lodbc -lodbcinst
-L/usr/lib -lexpat -L/usr/lib -lxerces-c -lpthread -ljasper -L -lmfhdf
-ldf -lgif -ljpeg -lpng -lnetcdf -L/usr/lib/grass/lib -lgrass_vect
-lgrass_dig2 -lgrass_dgl -lgrass_rtree -lgrass_linkm -lgrass_dbmiclient
-lgrass_dbmibase -lgrass_I -lgrass_gproj -lgrass_vask -lgrass_gmath
-lgrass_gis -lgrass_datetime -lpq -L/usr/lib -lpq -lz  -lm -lrt -ldl
-lcurl    -o gdal_HDF5.so
make: hdf5dataset.o: Command not found
make: *** [gdal_HDF5.so] Error 127


It seems that LD_SHARED is not defined.
Which are the correct configuration flags I should use?

Thanks in advance

--
antonio

From warmerdam at pobox.com  Wed May 21 15:20:09 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 21 15:20:21 2008
Subject: [gdal-dev] gdal 1.5.1 Bus Error - core dump on Solaris 9
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120085@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<DF1471B5C308B346BF5A2AEA00C5615E120085@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <931f8ea90805211220i27b3764dk534f4d6406871c83@mail.gmail.com>

On Wed, May 21, 2008 at 1:17 PM, Gong, Shawn (Contractor)
<Shawn.Gong@drdc-rddc.gc.ca> wrote:
> hi list,
>
> I have been using gdal 1.4, and have recently built gdal 1.5.1 for its
> large image support.
> Gdal 1.5.1 and OpenEV 1.8 building was fine. Then I encounter Bus Error
> - core dump on Solaris 9.
> I have tracked it down to where the Bus Error occurred:
>  gtiff_driver = gdal.GetDriverByName( 'GTiff' )
>  self.new_ds = gtiff_driver.CreateCopy( fname, vrtds, ...
> A "core" file is generated and kept growing to near half GB.
>
> I have followed Frank's advices of using -fPIC during compiling, and
> rebuilt Gdal 1.5.1 from scratch. But I still get the same error.

Shawn,

I don't know what is happening here.  I would suggest you
try and replicate the crash in gdb and get a traceback for
a clue of what is going wrong.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent
From bowen at enews.nrl.navy.mil  Wed May 21 17:47:34 2008
From: bowen at enews.nrl.navy.mil (Alex Bowen (Contractor))
Date: Wed May 21 17:48:36 2008
Subject: [gdal-dev] gdalwarp - banded overviews
Message-ID: <34223f78c06acec8ed6cee82ffaa8617483498b8@enews.nrl.navy.mil>

I'm working with gdalwarp to re-project some fairly large imagery
sources that have multiple overviews per band (mostly MrSID data).  Is
there any way to force gdalwarp to use a specified overview layer for
its processing, or a way to have it 'auto-calculate' the most efficient
level?  I have looked through the code in
gdalwarp.cpp/gdalwarpoperation.cpp and it doesn't seem to take overviews
into account.

 

Either way, this would be incredibly more efficient when warping
extremely images down to lower resolutions - you don't really need to
read the 'raw' overview in such cases, just the one that has a
comparable lat/lon resolution.

Thanks,

Alex Bowen

bowen@enews.nrl.navy.mil



 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080521/2a83f3da/attachment.html
From warmerdam at pobox.com  Wed May 21 18:43:29 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 21 18:43:35 2008
Subject: [gdal-dev] gdalwarp - banded overviews
In-Reply-To: <34223f78c06acec8ed6cee82ffaa8617483498b8@enews.nrl.navy.mil>
References: <34223f78c06acec8ed6cee82ffaa8617483498b8@enews.nrl.navy.mil>
Message-ID: <931f8ea90805211543l1bd72719u6f72d80d003ad321@mail.gmail.com>

On Wed, May 21, 2008 at 5:47 PM, Alex Bowen (Contractor)
<bowen@enews.nrl.navy.mil> wrote:
> I'm working with gdalwarp to re-project some fairly large imagery sources
> that have multiple overviews per band (mostly MrSID data).  Is there any way
> to force gdalwarp to use a specified overview layer for its processing, or a
> way to have it 'auto-calculate' the most efficient level?  I have looked
> through the code in gdalwarp.cpp/gdalwarpoperation.cpp and it doesn't seem
> to take overviews into account.
>
>
>
> Either way, this would be incredibly more efficient when warping extremely
> images down to lower resolutions ? you don't really need to read the 'raw'
> overview in such cases, just the one that has a comparable lat/lon
> resolution.

Alex,

As you suspect, currently gdalwarp cannot take advantage of
overviews.

I would agree that using the overviews would be a good idea
in some cases, though it will interfere with the purity of the
resampling kernels being applied.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent
From cavicchi at ferrara.linux.it  Thu May 22 07:59:37 2008
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Thu May 22 08:09:21 2008
Subject: [gdal-dev] GDAL and strange HDF4 dataset.
Message-ID: <48356029.9070704@ferrara.linux.it>

Hi all,
I have a little problem with gdal_translate and HDF4.

I have one particular dataset that if I try to extract a band with 
gdal_translate uses too much time.
I tried to open this dataset with ENVI, and the time for opening is like 
for another dataset. Also with HDFview, the opening of the dataset is fast.
I don't understand where this particular dataset is different to another 
dataset.In attachment of this mail the output of gdalinfo.

Someone can help me?

thanks,
regards

-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]
-------------- next part --------------
Driver: HDF4/Hierarchical Data Format Release 4
Files: TDS_MYD021KM_04_delay.hdf
Size is 512, 512
Coordinate System is `'
Metadata:
  HDFEOSVersion=HDFEOS_V2.9
  HDFEOS_FractionalOffset_10*nscans_MODIS_SWATH_Type_L1B=0
  HDFEOS_FractionalOffset_Max_EV_frames_MODIS_SWATH_Type_L1B=0
  LOCALGRANULEID=MYD021KM.A2006137.1120.005.2007108144937.hdf
  PRODUCTIONDATETIME=2007-04-18T14:49:38.000Z
  DAYNIGHTFLAG=Day
  REPROCESSINGACTUAL=processed once
  REPROCESSINGPLANNED=further update is anticipated
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=not being investigated
  AUTOMATICQUALITYFLAG=Suspect
  QAPERCENTMISSINGDATA=0
  QAPERCENTOUTOFBOUNDSDATA=41
  QAPERCENTINTERPOLATEDDATA=0
  PARAMETERNAME=EV_1KM_RefSB
  SCIENCEQUALITYFLAG=Not Investigated
  AUTOMATICQUALITYFLAGEXPLANATION=not being investigated
  AUTOMATICQUALITYFLAG=Suspect
  QAPERCENTMISSINGDATA=0
  QAPERCENTOUTOFBOUNDSDATA=0
  QAPERCENTINTERPOLATEDDATA=1
  PARAMETERNAME=EV_1KM_Emissive
  EQUATORCROSSINGDATE=2006-05-17
  EQUATORCROSSINGTIME=12:02:32.944327
  ORBITNUMBER=21469
  EQUATORCROSSINGLONGITUDE=-157.283894417366
  VERSIONID=5
  SHORTNAME=MYD021KM
  INPUTPOINTER=MYD01.A2006137.1115.005.2007108140225.hdf, MYD01.A2006137.1120.005.2007108140327.hdf, MYD01.A2006137.1125.005.2007108142554.hdf, MYD02_Reflective_LUTs.hdf.V5.0.7.11, MYD02_Emissive_LUTs.hdf.V5.0.7.11, MYD02_QA_LUTs.hdf.V5.0.7.11
  GRINGPOINTLONGITUDE=41.2891701707359, 18.4128884652194, 10.8506425178714, 38.7658086352101
  GRINGPOINTLATITUDE=25.8936929597688, 22.6128898150147, 39.9419095929572, 44.23727415488
  GRINGPOINTSEQUENCENO=1, 2, 3, 4
  EXCLUSIONGRINGFLAG=N
  RANGEENDINGDATE=2006-05-17
  RANGEENDINGTIME=11:25:00.000000
  RANGEBEGINNINGDATE=2006-05-17
  RANGEBEGINNINGTIME=11:20:00.000000
  PGEVERSION=5.0.7
  ANCILLARYINPUTPOINTER=MYD03.A2006137.1120.005.2006138185801.hdf
  ANCILLARYINPUTTYPE=Geolocation
  ASSOCIATEDSENSORSHORTNAME=MODIS
  ASSOCIATEDPLATFORMSHORTNAME=Aqua
  ASSOCIATEDINSTRUMENTSHORTNAME=MODIS
  AveragedBlackBodyTemperature= 284.99
  AveragedMirrorTemperature= 273.15
  AveragedFocalPlane1Temperature= 267.86
  AveragedFocalPlane2Temperature= 268.01
  AveragedFocalPlane3Temperature=  82.97
  AveragedFocalPlane4Temperature=  82.85
  CalibrationQuality=marginal
  MissionPhase=EXECUTION
  NadirPointing=Y
  NORTHBOUNDINGCOORDINATE=43.9759246577512
  SOUTHBOUNDINGCOORDINATE=22.6283401988233
  EASTBOUNDINGCOORDINATE=41.0184036764234
  WESTBOUNDINGCOORDINATE=10.9920542478145
  ALGORITHMPACKAGEACCEPTANCEDATE=2002-02-12
  ALGORITHMPACKAGEMATURITYCODE=OPERATIONAL
  ALGORITHMPACKAGENAME=MODIS Level 1B Algorithm Package
  ALGORITHMPACKAGEVERSION=5.0.7.11_Aqua
  INSTRUMENTNAME=Moderate Resolution Imaging SpectroRadiometer
  PROCESSINGCENTER=MODAPS
  DESCRREVISION=5.0
  PRODUCTIONHISTORY=PGE02:5.0.7.11;PGE01:5.0.21
  LONGNAME=MODIS/Aqua Calibrated Radiances 5-Min L1B Swath 1km
  PROCESSINGENVIRONMENT=Linux minion5042 2.6.8.1-26mdksmp 
  Number of Scans=204
  Number of Day mode scans=204
  Number of Night mode scans=0
  Incomplete Scans=0
  Max Earth View Frames=1354
  %Valid EV Observations=100, 98.97012, 99.99876, 99.99722, 99.99999, 100, 99.99998, 94.75074, 91.66695, 64.32755, 52.43024, 44.80312, 32.53617, 9.235164, 32.97398, 1.534053, 29.33986, 28.46012, 97.91616, 100, 99.90786, 99.99957, 99.95322, 99.9954, 100, 100, 100, 99.99996, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100
  %Saturated EV Observations=0, 1.02988, 0.001239972, 0.002778623, 9.050887e-06, 0, 1.810177e-05, 5.007132, 8.327685, 35.67244, 47.56976, 55.19688, 67.46383, 90.76484, 67.02602, 98.46595, 70.66013, 71.53988, 2.08384, 0, 0.09213804, 0.0004344426, 0, 0.004597851, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % L1A EV All Scan Data are Missing=0
  % L1A EV RSB DN Not in Day Mode=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % L1A EV DN Missing Within Scan=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % Dead Detector EV Data=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % Sector Rotation EV Data=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % Saturated EV Data=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.056691, 1.393113, 1.380622, 1.349125, 1.295725, 1.206574, 1.104751, 1.050084, 1.028724, 0.9855512, 0.9307028, 0.9181221, 0.8707859, 0.8488827, 0.8478872, 0.8500594, 0.8269796, 0.8411895, 0.7962066, 0.8337678, 0.8413705, 0.8469821, 0.8385648, 0.8827331, 0.8747683, 0.9164024, 0.8695188, 0.9439171, 0.9493476, 0.9154068, 1.013247, 1.092261, 1.075426, 1.139688, 1.185395, 1.251557, 1.255901, 1.311021, 1.435561, 1.140593, 0.001991195, 0.002172213, 0.000724071, 0.0005430533, 0.0005430533, 0.00162916, 0.002534249, 0.002172213, 0.001810178, 0.001086107, 0.0005430533, 0.0001810177, 0.0003620355, 0.001086107, 0.001810178, 0.000724071, 0.001086107, 0.0009050888, 0.001448142, 0.001448142, 0.004344426, 0.003077302, 0.002715266, 0.001991195, 0.003620355, 0.003439337, 0.00325832, 0.003439337, 0.003620355, 0.001448142, 0.001991195, 0.001086107, 0.0005430533, 0.002534249, 0.003982391, 0.002534249, 0.001991195, 0.002353231, 0.003620355, 0.003982391, 0.0001810177, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0001810177, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0001810177, 0, 0, 0, 0, 5.088771, 5.016364, 4.99066, 5.020346, 4.997538, 4.956628, 4.902323, 4.995728, 4.997176, 5.105787, 8.417326, 8.394156, 8.317404, 8.231239, 8.170418, 8.192501, 8.272874, 8.32754, 8.45715, 8.496249, 35.64529, 35.51062, 36.02905, 35.82812, 36.04353, 35.86215, 35.77707, 35.79952, 35.04902, 35.18008, 47.61057, 47.78615, 47.67139, 47.55047, 47.52187, 47.41507, 47.6522, 47.44439, 47.44475, 47.60079, 55.7274, 55.60974, 55.51995, 55.40338, 54.88531, 54.93092, 54.92332, 54.93129, 55.09818, 54.93925, 68.03262, 67.96565, 67.78463, 67.31471, 67.4273, 67.03486, 67.39617, 67.22131, 67.24013, 67.22094, 90.02158, 90.4314, 90.27464, 89.96329, 90.08675, 90.93934, 91.28219, 90.98206, 91.1685, 92.49863, 67.83858, 67.59782, 67.21153, 67.22818, 66.68259, 66.56566, 66.80605, 66.6902, 66.86144, 66.77818, 98.71839, 98.83642, 98.5667, 98.46171, 98.45158, 98.21697, 98.22132, 98.52543, 98.13696, 98.52398, 71.07843, 70.98322, 70.72255, 70.76527, 70.57701, 70.53284, 70.46188, 70.45356, 70.41554, 70.61105, 71.92849, 71.71236, 71.59397, 71.56573, 71.57225, 71.52409, 71.33186, 71.40354, 71.43323, 71.33331, 2.041518, 2.087135, 2.104874, 2.048759, 2.045139, 2.056362, 2.059982, 2.075187, 2.142164, 2.177282, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.09630144, 0.09774959, 0.0937672, 0.09014684, 0.0937672, 0.06987286, 0.08725056, 0.08182003, 0.08725056, 0.1234541, 0.000724071, 0.000724071, 0, 0, 0.0003620355, 0, 0.0003620355, 0.000724071, 0, 0.001448142, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002172213, 0.003982391, 0.004706461, 0.005068497, 0.003620355, 0.006154604, 0.004706461, 0.003982391, 0.006878674, 0.004706461, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % TEB EV Data With Moon in SVP=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % EV Data Where Cannot Compute BG DN=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % RSB EV Data With dn** Below Scale=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0003620355, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % EV Data Where Nadir Door Closed=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  % EV Data Not Calibrated=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.056691, 1.393113, 1.380622, 1.349125, 1.295725, 1.206574, 1.104751, 1.050084, 1.028724, 0.9855512, 0.9307028, 0.9181221, 0.8707859, 0.8488827, 0.8478872, 0.8500594, 0.8269796, 0.8411895, 0.7962066, 0.8337678, 0.8413705, 0.8469821, 0.8385648, 0.8827331, 0.8747683, 0.9164024, 0.8695188, 0.9439171, 0.9493476, 0.9154068, 1.013247, 1.092261, 1.075426, 1.139688, 1.185395, 1.251557, 1.255901, 1.311021, 1.435561, 1.140593, 0.001991195, 0.002172213, 0.000724071, 0.0005430533, 0.0005430533, 0.00162916, 0.002534249, 0.002172213, 0.001810178, 0.001086107, 0.0005430533, 0.0001810177, 0.0003620355, 0.001086107, 0.001810178, 0.000724071, 0.001086107, 0.0009050888, 0.001448142, 0.001448142, 0.004344426, 0.003077302, 0.002715266, 0.001991195, 0.003620355, 0.003439337, 0.00325832, 0.003439337, 0.003620355, 0.001448142, 0.001991195, 0.001086107, 0.0005430533, 0.002534249, 0.003982391, 0.002534249, 0.001991195, 0.002353231, 0.003620355, 0.003982391, 0.0001810177, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0001810177, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.0001810177, 0, 0, 0, 0, 5.26472, 5.25929, 5.250601, 5.266892, 5.240102, 5.222724, 5.19702, 5.245894, 5.258204, 5.287167, 8.417326, 8.394156, 8.317404, 8.231602, 8.194312, 8.217844, 8.275408, 8.328988, 8.45715, 8.496249, 35.64529, 35.51062, 36.02905, 35.82812, 36.04353, 35.86215, 35.77707, 35.79952, 35.04902, 35.18008, 47.61057, 47.78615, 47.67139, 47.55047, 47.52187, 47.41507, 47.6522, 47.44439, 47.44475, 47.60079, 55.7274, 55.60974, 55.51995, 55.40338, 54.88531, 54.93092, 54.92332, 54.93129, 55.09818, 54.93925, 68.03262, 67.96565, 67.78463, 67.31471, 67.4273, 67.03486, 67.39617, 67.22131, 67.24013, 67.22094, 90.02158, 90.4314, 90.27464, 89.96329, 90.08675, 90.93934, 91.28219, 90.98206, 91.1685, 92.49863, 67.83858, 67.59782, 67.21153, 67.22818, 66.68259, 66.56566, 66.80605, 66.6902, 66.86144, 66.77818, 98.71839, 98.83642, 98.5667, 98.46171, 98.45158, 98.21697, 98.22132, 98.52543, 98.13696, 98.52398, 71.07843, 70.98322, 70.72255, 70.76527, 70.57701, 70.53284, 70.46188, 70.45356, 70.41554, 70.6114, 71.92849, 71.71236, 71.59397, 71.56573, 71.57225, 71.52409, 71.33186, 71.40354, 71.43323, 71.33331, 2.041518, 2.087135, 2.104874, 2.048759, 2.045139, 2.056362, 2.059982, 2.075187, 2.142164, 2.177282, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.09630144, 0.09774959, 0.0937672, 0.09014684, 0.0937672, 0.06987286, 0.08725056, 0.08182003, 0.08725056, 0.1234541, 0.000724071, 0.000724071, 0, 0, 0.0003620355, 0, 0.0003620355, 0.000724071, 0, 0.001448142, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.002172213, 0.003982391, 0.004706461, 0.005068497, 0.003620355, 0.006154604, 0.004706461, 0.003982391, 0.006878674, 0.004706461, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Bit QA Flags Last Value=819336
  Bit QA Flags Change=8200
  Granule Average QA Values=285.0182, 284.9929, 284.9943, 284.9859, 284.9838, 284.9787, 285.0185, 285.0146, 284.9998, 284.9824, 284.9743, 284.9702, 267.8564, 268.0114, 82.97041, 82.84912, 273.1707, 273.1338, 273.6953, 272.4779, 273.2531, 272.4182, 271.6044, 267.2137, 267.4213, 267.4177, 267.5054, 82.61301, 82.55436, 125.5092, 125.3761, 173.8001, 0.01046193, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Electronics Redundancy Vector=44756138, 2084
  Electronics Configuration Change=0, 0
  Reflective LUT Serial Number and Date of Last Change=R084 2006:05:02:15:08
  Emissive LUT Serial Number and Date of Last Change=E083 2006:05:02:15:08
  QA LUT Serial Number and Date of Last Change=Q083 2006:05:02:15:08
  Focal Plane Set Point State=1
  Doors and Screens Configuration=192
  Reflective Bands With Bad Data=0, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1
  Emissive Bands With Bad Data=1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Noise in Black Body Thermistors=1, 5, 9, 1, 3, 7, 9, 3, 6, 4, 11, 5
  Noise in Average BB Temperature=15
  Noise in LWIR FPA Temperature=15
  Noise in MWIR FPA Temperature=10
  Noise in Scan Mirror Thermistor #1=0
  Noise in Scan Mirror Thermistor #2=0
  Noise in Scan Mirror Thermistor Average=0
  Noise in Instrument Temperature=0
  Noise in Cavity Temperature=0
  Noise in Temperature of NIR FPA=0
  Noise in Temperature of Vis FPA=0
  Dead Detector List=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0
  Noisy Detector List=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
  Detector Quality Flag=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 66, 64, 66, 64, 66, 66, 66, 66, 64, 64, 66, 64, 66, 66, 66, 66, 66, 65, 66, 66, 66, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 64, 64, 64, 64, 64, 64, 64, 64, 64, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, 0
  Earth-Sun Distance=1.011329
  Solar Irradiance on RSB Detectors over pi=511.5847, 511.5847, 511.5847, 511.5847, 511.5847, 511.5847, 511.5847, 511.5681, 511.6439, 511.7642, 511.8329, 511.8869, 511.9466, 511.989, 512.0393, 512.0604, 512.0804, 512.0942, 512.0903, 512.0883, 512.093, 512.0934, 512.0903, 512.0821, 512.062, 512.0376, 511.998, 511.9641, 511.9197, 511.849, 511.802, 511.802, 511.802, 511.802, 511.802, 511.802, 511.802, 511.802, 511.802, 511.802, 315.487, 315.487, 315.487, 315.487, 315.487, 315.487, 315.487, 315.4888, 315.4988, 315.5071, 315.5167, 315.5217, 315.5312, 315.5349, 315.5373, 315.5381, 315.5366, 315.5335, 315.5343, 315.5335, 315.5268, 315.5221, 315.5186, 315.5095, 315.505, 315.4981, 315.4882, 315.4736, 315.4604, 315.4509, 315.4449, 315.4714, 315.5046, 315.5408, 315.5948, 315.7431, 315.8229, 315.8856, 315.8856, 315.8856, 664.7366, 664.7366, 664.7366, 664.7366, 664.7001, 664.7471, 664.7432, 664.7266, 664.7188, 664.7175, 664.7213, 664.7332, 664.6851, 664.7102, 664.6629, 664.6442, 664.6538, 664.5352, 664.5352, 664.5352, 593.7072, 593.7072, 593.7072, 593.7072, 593.7002, 593.7049, 593.7009, 593.7031, 593.705, 593.7073, 593.7085, 593.7102, 593.7186, 593.7206, 593.7256, 593.7644, 593.7889, 593.8388, 593.8388, 593.8388, 151.1796, 151.1796, 151.1796, 151.1796, 151.1796, 151.1736, 151.1773, 151.1852, 151.1772, 151.1772, 151.1794, 151.1822, 151.1736, 151.1762, 151.1933, 151.1835, 151.1895, 151.1704, 151.1704, 151.1704, 76.58249, 76.58249, 76.58249, 76.58249, 76.58288, 76.58443, 76.58517, 76.58396, 76.58341, 76.59081, 76.5913, 76.58757, 76.58487, 76.63879, 76.59094, 76.59262, 76.58382, 76.5772, 76.5772, 76.5772, 28.77769, 28.77769, 28.77769, 28.77769, 28.77304, 28.77208, 28.77557, 28.77727, 28.77688, 28.77847, 28.77579, 28.77209, 28.77242, 28.77489, 28.77381, 28.77135, 28.7709, 28.77033, 28.77033, 28.77033, 556.0842, 556.0842, 556.0053, 556.1355, 556.2669, 556.4036, 556.5035, 556.7288, 556.5127, 556.51, 606.8428, 606.8428, 606.8634, 606.7712, 606.714, 606.7194, 606.7739, 606.7804, 606.5257, 606.7693, 629.313, 629.313, 629.313, 629.4122, 629.4171, 629.3915, 629.2726, 629.1608, 629.4336, 629.3894, 600.215, 600.215, 600.215, 600.1813, 600.1444, 600.1643, 600.2406, 600.2057, 599.6879, 599.6879, 602.4011, 602.4011, 602.4814, 602.4875, 602.497, 602.5059, 602.5154, 602.5306, 602.5897, 602.696, 492.4797, 492.4797, 492.5938, 492.6044, 492.6185, 492.6247, 492.6229, 492.6167, 492.582, 492.5184, 492.4797, 492.4797, 492.5938, 492.6044, 492.6185, 492.6247, 492.6229, 492.6167, 492.582, 492.5184, 479.4278, 479.4278, 479.4126, 479.4116, 479.4093, 479.4072, 479.4096, 479.4182, 479.4037, 479.3895, 479.4278, 479.4278, 479.4126, 479.4116, 479.4093, 479.4072, 479.4096, 479.4182, 479.4037, 479.3895, 412.0707, 412.0707, 412.1205, 412.1488, 412.1434, 412.1468, 412.1477, 412.0982, 412.0902, 412.0751, 309.7169, 309.7169, 309.7085, 309.7431, 309.7635, 309.7625, 309.7625, 309.7609, 309.8164, 310.0857, 297.4603, 297.4603, 297.462, 297.4626, 297.4647, 297.4636, 297.4626, 297.4617, 297.46, 297.46, 277.6909, 277.6909, 277.6905, 277.691, 277.6906, 277.6904, 277.6903, 277.6896, 277.6893, 277.6893, 277.9197, 277.9197, 277.9197, 277.9191, 277.9202, 277.9189, 277.9188, 277.9177, 277.9178, 277.9178, 116.2086, 116.2086, 116.2058, 116.2001, 116.1993, 116.2024, 116.2058, 116.2076, 116.2047, 116.2047
Subdatasets:
  SUBDATASET_1_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
  SUBDATASET_1_DESC=[15x2040x1354] EV_1KM_RefSB MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_2_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB_Uncert_Indexes
  SUBDATASET_2_DESC=[15x2040x1354] EV_1KM_RefSB_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_3_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_1KM_Emissive
  SUBDATASET_3_DESC=[16x2040x1354] EV_1KM_Emissive MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_4_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_1KM_Emissive_Uncert_Indexes
  SUBDATASET_4_DESC=[16x2040x1354] EV_1KM_Emissive_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_5_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_250_Aggr1km_RefSB
  SUBDATASET_5_DESC=[2x2040x1354] EV_250_Aggr1km_RefSB MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_6_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_250_Aggr1km_RefSB_Uncert_Indexes
  SUBDATASET_6_DESC=[2x2040x1354] EV_250_Aggr1km_RefSB_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_7_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_250_Aggr1km_RefSB_Samples_Used
  SUBDATASET_7_DESC=[2x2040x1354] EV_250_Aggr1km_RefSB_Samples_Used MODIS_SWATH_Type_L1B (8-bit integer)
  SUBDATASET_8_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB
  SUBDATASET_8_DESC=[5x2040x1354] EV_500_Aggr1km_RefSB MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_9_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB_Uncert_Indexes
  SUBDATASET_9_DESC=[5x2040x1354] EV_500_Aggr1km_RefSB_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_10_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_500_Aggr1km_RefSB_Samples_Used
  SUBDATASET_10_DESC=[5x2040x1354] EV_500_Aggr1km_RefSB_Samples_Used MODIS_SWATH_Type_L1B (8-bit integer)
  SUBDATASET_11_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:Height
  SUBDATASET_11_DESC=[408x271] Height MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_12_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:SensorZenith
  SUBDATASET_12_DESC=[408x271] SensorZenith MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_13_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:SensorAzimuth
  SUBDATASET_13_DESC=[408x271] SensorAzimuth MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_14_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:Range
  SUBDATASET_14_DESC=[408x271] Range MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_15_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:SolarZenith
  SUBDATASET_15_DESC=[408x271] SolarZenith MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_16_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:SolarAzimuth
  SUBDATASET_16_DESC=[408x271] SolarAzimuth MODIS_SWATH_Type_L1B (16-bit integer)
  SUBDATASET_17_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:gflags
  SUBDATASET_17_DESC=[408x271] gflags MODIS_SWATH_Type_L1B (8-bit unsigned integer)
  SUBDATASET_18_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_Band26
  SUBDATASET_18_DESC=[2040x1354] EV_Band26 MODIS_SWATH_Type_L1B (16-bit unsigned integer)
  SUBDATASET_19_NAME=HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_Band26_Uncert_Indexes
  SUBDATASET_19_DESC=[2040x1354] EV_Band26_Uncert_Indexes MODIS_SWATH_Type_L1B (8-bit unsigned integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)
From battisti at actgate.com  Thu May 22 08:26:25 2008
From: battisti at actgate.com (Andrea Battisti)
Date: Thu May 22 08:26:58 2008
Subject: [gdal-dev] INST_DATA and 1.5.2
In-Reply-To: <4831AAFC.90809@pobox.com>
References: <4831AAFC.90809@pobox.com>
Message-ID: <48356671.5040905@actgate.com>

[...]
>
> Also, I am interested in issuing a 1.5.2 GDAL release this week or early
> next.  I would like to prepare a release candidate tomorrow.  Is 
> anyone aware
> of critical fixes that should be done before a 1.5.2 release?
>
>

I noticed the following glitch (using the 1.5 branch):

OGRDataSource *poDS;

[...]

OGRLayer *rs = poDS->ExecuteSQL( sql_query, NULL, "" );

Ends up in a crash if the first argument is an empty string, i.e. 
strlen( sql_query ) == 0


The problem seems to show up in:
file: ogr/swq.c
function: swq_select_preparse() (maybe the current token could become 
NULL if the select_statement is empty ?)

I haven't filed filing a ticket because I'm not sure this is confirmed.


Thanks in advance,

-- 
Andrea Battisti
Applied Coherent Technology Corp.

From ksshannon at gmail.com  Thu May 22 11:54:26 2008
From: ksshannon at gmail.com (Kyle Shannon)
Date: Thu May 22 11:54:29 2008
Subject: [gdal-dev] make a geotiff from scratch
Message-ID: <c28f2e140805220854i20ddd650uf2200940160bf5dc@mail.gmail.com>

I am in the process of writing data for google earth using a c++ program.  I
make a ground overlay as a bitmap to show the magnitude of some value.  I
would like to make a geotiff from scratch and populate the tif with color
values.  could someone jot down the steps I need to follow?

-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
ksshannon@gmail.com
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080522/249c7c08/attachment.html
From warmerdam at pobox.com  Thu May 22 11:55:10 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 22 11:55:13 2008
Subject: [gdal-dev] GDAL and strange HDF4 dataset.
In-Reply-To: <48356029.9070704@ferrara.linux.it>
References: <48356029.9070704@ferrara.linux.it>
Message-ID: <931f8ea90805220855h6ce1599due16a6ea49a87e15d@mail.gmail.com>

On Thu, May 22, 2008 at 7:59 AM, Mario Cavicchi
<cavicchi@ferrara.linux.it> wrote:
> Hi all,
> I have a little problem with gdal_translate and HDF4.
>
> I have one particular dataset that if I try to extract a band with
> gdal_translate uses too much time.
> I tried to open this dataset with ENVI, and the time for opening is like for
> another dataset. Also with HDFview, the opening of the dataset is fast.
> I don't understand where this particular dataset is different to another
> dataset.In attachment of this mail the output of gdalinfo.
>
> Someone can help me?

Mario,

It would be helpful if you could provide a pointer to the dataset
you were using so we can download and try it.  Also, give the
exact gdal_translate command you were using, since a lot
depends on what subdatset name(s) you are using.

There are some bad performance behavior cases in the HDF
driver depending on the organization of the data, and pattern
of the reading.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent
From cavicchi at ferrara.linux.it  Thu May 22 13:52:36 2008
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Thu May 22 13:52:42 2008
Subject: [gdal-dev] GDAL and strange HDF4 dataset.
In-Reply-To: <931f8ea90805220855h6ce1599due16a6ea49a87e15d@mail.gmail.com>
References: <48356029.9070704@ferrara.linux.it>
	<931f8ea90805220855h6ce1599due16a6ea49a87e15d@mail.gmail.com>
Message-ID: <4835B2E4.8020704@ferrara.linux.it>

Thanks for answer Frank.

I put the data set in a temporary directory of my site, this is the link 
for download it:

http://members.ferrara.linux.it/cavicchi/tmp/TDS_MYD021KM_04_delay.hdf

please tell me when you finish to download so I can remove file from my 
site.

The command line that I used to extract the band is this:

$ gdal_translate -b 1  -of GTiff 
HDF4_EOS:EOS_SWATH:"TDS_MYD021KM_04_delay.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB 
test.tif

My version of GDAL is:
$ gdalinfo --version
GDAL 1.5.1, released 2008/03/14

it was compiled with HDF4 lib version HDF4.2r2 (with 2r3 I could not 
compile GDAL)

Tnx for all,
regards,

-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]
From mariusjigmond at hotmail.com  Thu May 22 19:04:09 2008
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Thu May 22 19:05:12 2008
Subject: [gdal-dev] GDALINFO fails with large .tif raster
Message-ID: <BAY142-W1314FDEA188F06ABF1C6DBB2C60@phx.gbl>


I am posting this at Jachym Cepicky's suggestion as I had originally 
posted it on the QGIS forum. I cannot open large (2.7 GB) .tif rasters 
on a Ubuntu Hardy distribution. I have tried gdal 1.4.4 from Ubuntu, 
1.5.1 from Jachym's repo, and the version distributed with the 2.0.6 
version of FWTools. Here's some output:

marius@snowcrave:~$ gdalinfo GISdata/Romania/LandsatMosaics/bands123.tif
ERROR 4: `GISdata/Romania/LandsatMosaics/bands123.tif' not recognised as 
a supported file format.

gdalinfo failed - unable to open 
'GISdata/Romania/LandsatMosaics/bands123.tif'.

I know the raster file is fine because I can read it on a Ubuntu Gutsy 
box with gdal 1.4.2. Here's the output from the Gutsy box:

marius@bigfoot:~$ gdalinfo /media/hdb7/bands123.tif
Driver: GTiff/GeoTIFF
Size is 31865, 30113
Coordinate System is:
PROJCS["WGS 84 / UTM zone 35N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",27],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32635"]]
Origin = (-126751.937963147182018,5526477.750000000000000)
Pixel Size = (28.500000000000000,-28.500000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15 
18:42:01EDT $
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  ( -126751.938, 5526477.750) ( 18d19'38.37"E, 49d33'53.29"N)
Lower Left  ( -126751.938, 4668257.250) ( 19d26'39.47"E, 41d55'1.31"N)
Upper Right (  781400.562, 5526477.750) ( 30d54'46.05"E, 49d49'28.61"N)
Lower Right (  781400.562, 4668257.250) ( 30d24'13.74"E, 42d 6'57.36"N)
Center      (  327324.312, 5097367.500) ( 24d46'10.68"E, 46d 0'29.21"N)
Band 1 Block=31865x1 Type=Byte, ColorInterp=Gray
Band 2 Block=31865x1 Type=Byte, ColorInterp=Undefined
Band 3 Block=31865x1 Type=Byte, ColorInterp=Undefined

On the Hardy box I have encrypted ext3 partitions, while on the Gutsy 
they are unencrypted ext3. I placed the raster on an unencrypted 
partition, but that didn't help. Gdalinfo works with smaller (900 MB) 
.tif rasters on the Hardy box. I look forward to any suggestions you 
might have. The QGIS post can be accesed here: 
http://forum.qgis.org/viewtopic.php?f=2&t=783. Thanks.

Marius


_________________________________________________________________
Keep your kids safer online with Windows Live Family Safety.
http://www.windowslive.com/family_safety/overview.html?ocid=TXT_TAGLM_WL_Refresh_family_safety_052008
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080522/1e2145c6/attachment.html
From yann.chemin at gmail.com  Thu May 22 23:53:44 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Thu May 22 23:53:47 2008
Subject: [gdal-dev] libgdal.o for including in a program
Message-ID: <4f37eb890805222053h7f1200e9m655525f703a09cdd@mail.gmail.com>

Hello,

I am writing code for processing images using gdal library,
and I do not have administrator access to the computers it is going to run
on.
Those computers do not have gdal in them (and run Linux OS)

I would like to get libgdal inside my code at compilation time.
something like:

gcc -o ndvigdal main.o ndvi.o libgdal.o

if that is possible, please kindly suggest ways to get on track.

Thanks,
Yann

-- 
Yann Chemin
International Rice Research Institute
Office: http://www.irri.org/gis
Perso: http://www.freewebs.com/ychemin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080523/5bf7b0f2/attachment.html
From 2voodoo at gmx.de  Fri May 23 03:27:26 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Fri May 23 03:27:29 2008
Subject: [gdal-dev] libgdal.o for including in a program
In-Reply-To: <4f37eb890805222053h7f1200e9m655525f703a09cdd@mail.gmail.com>
References: <4f37eb890805222053h7f1200e9m655525f703a09cdd@mail.gmail.com>
Message-ID: <483671DE.7070709@gmx.de>

Hello Yann,

sure is this possible. I think all you have to do is: Get the sources, 
compile GDAL and you are left with the object files, etc. which you 
could again link in your project.

bye,
Tom

Yann Chemin schrieb:
> Hello,
>
> I am writing code for processing images using gdal library,
> and I do not have administrator access to the computers it is going to 
> run on.
> Those computers do not have gdal in them (and run Linux OS)
>
> I would like to get libgdal inside my code at compilation time.
> something like:
>
> gcc -o ndvigdal main.o ndvi.o libgdal.o
>
> if that is possible, please kindly suggest ways to get on track.
>
> Thanks,
> Yann
>
> -- 
> Yann Chemin
> International Rice Research Institute
> Office: http://www.irri.org/gis
> Perso: http://www.freewebs.com/ychemin
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri May 23 05:49:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 23 05:49:11 2008
Subject: [gdal-dev] libgdal.o for including in a program
In-Reply-To: <4f37eb890805222053h7f1200e9m655525f703a09cdd@mail.gmail.com>
References: <4f37eb890805222053h7f1200e9m655525f703a09cdd@mail.gmail.com>
Message-ID: <931f8ea90805230249j61a8829ble5a4e3a6cfb9c4e5@mail.gmail.com>

On 5/22/08, Yann Chemin <yann.chemin@gmail.com> wrote:
> Hello,
>
> I am writing code for processing images using gdal library,
> and I do not have administrator access to the computers it is going to run
> on.
> Those computers do not have gdal in them (and run Linux OS)
>
> I would like to get libgdal inside my code at compilation time.
> something like:
>
> gcc -o ndvigdal main.o ndvi.o libgdal.o
>
> if that is possible, please kindly suggest ways to get on track.

Yann,

You should be able to link against the libgdal.a static library.
Try replacing -lgdal in the normal link with /path/to/libgdal.a.

Also be aware you then need to link against any libraries
GDAL requires.  Often the command "gdal-config --dep-libs"
will show you what you need at link time for this.

Best regards,


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From joet at securitypunk.com  Fri May 23 11:51:19 2008
From: joet at securitypunk.com (Joe Testa)
Date: Fri May 23 11:51:22 2008
Subject: [gdal-dev] GDAL v1.5.1 compile error on RHEL5.
In-Reply-To: <4836E742.1000103@securitypunk.com>
References: <4836E742.1000103@securitypunk.com>
Message-ID: <4836E7F7.7010206@securitypunk.com>

Hi,

  GDAL v1.5.1 does not compile on my 64-bit RedHat Enterprise Linux 5 
server:

# ./configure
[snip]
# make
...
/usr/bin/ld: skipping incompatible /usr/lib/libsqlite3.so when searching 
for -lsqlite3
/usr/lib/libexpat.so: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1


   Whats going on is that the linker is building a 64-bit library, but 
was passed the 32-bit version of libexpat in /usr/lib/libexpat.so.  The 
correct behavior would be to link to /usr/lib64/libexpat.so.  I worked 
around this problem by manually editing the GDALmake.opt file and 
changing the /usr/lib reference to /usr/lib64 in the LIBS variable.  
After that, doing 'make' again compiles the package just fine.

   Please let me know if you need any more information to debug this.

   Thanks!
   - Joe

From szekerest at gmail.com  Fri May 23 11:53:46 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri May 23 11:53:48 2008
Subject: [gdal-dev] make a geotiff from scratch
In-Reply-To: <c28f2e140805220854i20ddd650uf2200940160bf5dc@mail.gmail.com>
References: <c28f2e140805220854i20ddd650uf2200940160bf5dc@mail.gmail.com>
Message-ID: <f3b73b7d0805230853r19ae8b7ct6b86d8013c3ea79@mail.gmail.com>

Hi,

You can probably use the gdal_grid application to create an
interpolated grayscale image based on the scattered points. Then you
could transform this image to a 3band RGB tif by using the vrt driver
and set up the proper scaling/LUT in the vrt file.
You could create an image pyramid and the corresponding kml by using a
gdal2tiles.py like application.

Best regards,

Tamas


2008/5/22 Kyle Shannon <ksshannon@gmail.com>:
> I am in the process of writing data for google earth using a c++ program.  I
> make a ground overlay as a bitmap to show the magnitude of some value.  I
> would like to make a geotiff from scratch and populate the tif with color
> values.  could someone jot down the steps I need to follow?
>
> --
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Kyle Shannon
> Physical Science Technician
> RMRS Fire Sciences Lab
> Fire, Fuels & Smoke - RWU 4405
> 5775 Highway 10 W.
> Missoula, MT 59808
> (406)829-6954
> kshannon@fs.fed.us
> ksshannon@gmail.com
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From sorokina at ornl.gov  Fri May 23 12:14:28 2008
From: sorokina at ornl.gov (Sorokine, Alexandre)
Date: Fri May 23 13:00:20 2008
Subject: [gdal-dev] GDAL v1.5.1 compile error on RHEL5.
In-Reply-To: <4836E7F7.7010206@securitypunk.com>
Message-ID: <C45C65A4.C49B%sorokina@ornl.gov>

Joe,

Same problem here.  I succeeded to compile gdal (vers. 1.5.1) on 64-bit
RHEL5 by adding --without-libtool option to configure script.  The problem
originates from libtool not being able do differentiate between 32- and
64-bit libraries.  I do not know what --without-libtool actually changes but
it works.


On 5/23/08 11:51 AM, "Joe Testa" <joet@securitypunk.com> wrote:

> Hi,
> 
>   GDAL v1.5.1 does not compile on my 64-bit RedHat Enterprise Linux 5
> server:
> 
> # ./configure
> [snip]
> # make
> ...
> /usr/bin/ld: skipping incompatible /usr/lib/libsqlite3.so when searching
> for -lsqlite3
> /usr/lib/libexpat.so: could not read symbols: File in wrong format
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> 
> 
>    Whats going on is that the linker is building a 64-bit library, but
> was passed the 32-bit version of libexpat in /usr/lib/libexpat.so.  The
> correct behavior would be to link to /usr/lib64/libexpat.so.  I worked
> around this problem by manually editing the GDALmake.opt file and
> changing the /usr/lib reference to /usr/lib64 in the LIBS variable.
> After that, doing 'make' again compiles the package just fine.
> 
>    Please let me know if you need any more information to debug this.
> 
>    Thanks!
>    - Joe
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Alex Sorokine
mailto:SorokinA@ornl.gov

From aaronr at z-pulley.com  Fri May 23 13:09:00 2008
From: aaronr at z-pulley.com (Aaron Racicot)
Date: Fri May 23 13:09:04 2008
Subject: [gdal-dev] Appending a column on shapefile import to postgis via
	ogr2ogr
In-Reply-To: <f3b73b7d0805230853r19ae8b7ct6b86d8013c3ea79@mail.gmail.com>
Message-ID: <20080523170901.7334F163A00@spunkymail-a10.g.dreamhost.com>

Probably a silly SQL type question but...

So I am trying to run ogr2ogr from a php script with the intent of auto
loading some shapefile data into a pre-existing postgis table.  Since the
shapefile I am loading could be any arbitrary shapefile (It does not have
any unique identifier I have access to at the time of loading) I need a way
to append an attribute to it upon loading it into postgis.

Normal loading of the shapefile works fine, but when I try to append an
attribute when loading the data via ogr2ogr things don't seem to work. (I am
probably showing my lack of true SQL foo here...)

Inside of postgres I can easily do something like the following to get a new
column 'author' appended to the results of a query: 

select 'aaron' as author, * from mytable;

In the database something like appending a static string in the select works
fine, but what I would like to do is execute an sql like that inside the
ogr2ogr call with the -sql flag.  My initial attempts at this don't seem to
work.

Is something like that possible?

Basically in the end I would like something like:
ogr2ogr -update -append -f PostgreSQL PG:'host=localhost user=racicot
dbname=xxx' -sql "select 'aaronr' as author, * from test" test.shp -nln
user_shapes

My hope was that I could add the author field to the -sql statement and have
it populate the 'author' column in my postgis table.  If something like this
from the command line would work then I could just swap in an arbitrary
username for 'aaronr' in the above example on the data import via my script
and have a unique way to keep track of the data once it is imported.

Any advice appreciated...

Aaron



From warmerdam at pobox.com  Fri May 23 15:00:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri May 23 15:00:46 2008
Subject: [gdal-dev] Appending a column on shapefile import to postgis via
	ogr2ogr
In-Reply-To: <20080523170901.7334F163A00@spunkymail-a10.g.dreamhost.com>
References: <f3b73b7d0805230853r19ae8b7ct6b86d8013c3ea79@mail.gmail.com>
	<20080523170901.7334F163A00@spunkymail-a10.g.dreamhost.com>
Message-ID: <931f8ea90805231200t4b53abbp30a22145d6432a68@mail.gmail.com>

On 5/23/08, Aaron Racicot <aaronr@z-pulley.com> wrote:
...
>  Is something like that possible?
>
>  Basically in the end I would like something like:
>  ogr2ogr -update -append -f PostgreSQL PG:'host=localhost user=racicot
>  dbname=xxx' -sql "select 'aaronr' as author, * from test" test.shp -nln
>  user_shapes
>
>  My hope was that I could add the author field to the -sql statement and have
>  it populate the 'author' column in my postgis table.  If something like this
>  from the command line would work then I could just swap in an arbitrary
>  username for 'aaronr' in the above example on the data import via my script
>  and have a unique way to keep track of the data once it is imported.

Aaron,

I'm afraid this isn't possible because the SQL statement is being
evaluated by the OGR SQL engine in this case, and the OGR SQL
engine is quite limited.  It lacks, for instance, the ability add
columns in the select from fixed values.

Sorry!

The OGR SQL document should give some ideas of the limitations
of the OGR SQL engine.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From szekerest at gmail.com  Fri May 23 15:51:54 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri May 23 15:51:58 2008
Subject: [gdal-dev] Appending a column on shapefile import to postgis via
	ogr2ogr
In-Reply-To: <20080523170901.7334F163A00@spunkymail-a10.g.dreamhost.com>
References: <f3b73b7d0805230853r19ae8b7ct6b86d8013c3ea79@mail.gmail.com>
	<20080523170901.7334F163A00@spunkymail-a10.g.dreamhost.com>
Message-ID: <f3b73b7d0805231251hdfb1e2ds22be4d120308db9e@mail.gmail.com>

Aaron,

The only limitation around here is that you cannot create fields with
constant values at the moment.
However you can create fields with the desired name and type based on
an existing field or a predefinied special field, like:


SELECT *, CAST(OGR_STYLE AS character(255)) AS 'MyNewField' FROM mytable

You can probably alter the values of this field later on.

Best regards,

Tamas



2008/5/23 Aaron Racicot <aaronr@z-pulley.com>:
> Probably a silly SQL type question but...
>
> So I am trying to run ogr2ogr from a php script with the intent of auto
> loading some shapefile data into a pre-existing postgis table.  Since the
> shapefile I am loading could be any arbitrary shapefile (It does not have
> any unique identifier I have access to at the time of loading) I need a way
> to append an attribute to it upon loading it into postgis.
>
> Normal loading of the shapefile works fine, but when I try to append an
> attribute when loading the data via ogr2ogr things don't seem to work. (I am
> probably showing my lack of true SQL foo here...)
>
> Inside of postgres I can easily do something like the following to get a new
> column 'author' appended to the results of a query:
>
> select 'aaron' as author, * from mytable;
>
> In the database something like appending a static string in the select works
> fine, but what I would like to do is execute an sql like that inside the
> ogr2ogr call with the -sql flag.  My initial attempts at this don't seem to
> work.
>
> Is something like that possible?
>
> Basically in the end I would like something like:
> ogr2ogr -update -append -f PostgreSQL PG:'host=localhost user=racicot
> dbname=xxx' -sql "select 'aaronr' as author, * from test" test.shp -nln
> user_shapes
>
> My hope was that I could add the author field to the -sql statement and have
> it populate the 'author' column in my postgis table.  If something like this
> from the command line would work then I could just swap in an arbitrary
> username for 'aaronr' in the above example on the data import via my script
> and have a unique way to keep track of the data once it is imported.
>
> Any advice appreciated...
>
> Aaron
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From cryan at csse.com.au  Fri May 23 19:50:40 2008
From: cryan at csse.com.au (Fodder)
Date: Fri May 23 19:50:42 2008
Subject: [Gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <20080518084739.GC16042@ak4719.spb.edu>
References: <20080517150047.GA12028@ak4719.spb.edu>
	<f3b73b7d0805170951t652cd404sab5f1bf8bd43b55d@mail.gmail.com>
	<20080518084739.GC16042@ak4719.spb.edu>
Message-ID: <17442809.post@talk.nabble.com>


Hi Andrey,

Just curious if the new version of gdal_grid allowing for a shapefile
attriubte to be used as the z field is available yet?

Regards,

Chris
-- 
View this message in context: http://www.nabble.com/gdal_grid%3A-taking-a-value-from-feature-attribute-tp17292929p17442809.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sat May 24 04:09:16 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat May 24 04:09:22 2008
Subject: [gdal-dev] GDALINFO fails with large .tif raster
In-Reply-To: <BAY142-W1314FDEA188F06ABF1C6DBB2C60@phx.gbl>
References: <BAY142-W1314FDEA188F06ABF1C6DBB2C60@phx.gbl>
Message-ID: <200805241009.17391.even.rouault@mines-paris.org>

I've downloaded your TIFF image and tried it with different GDAL versions : 
GDAL SVN with internal libtiff, GDAL 1.5 branch with my system libtiff 
(3.8.2-7ubuntu2), and GDAL 1.4.1 (Ubuntu package libgdal1-1.4.0, 
1.4.1-6build1) with system libtiff, and all of them can gdalinfo successfully 
on it.

Have you tried to run 'tiffdump' on your TIFF image ?

Best regards,
Even

Le Friday 23 May 2008 01:04:09 Marius Jigmond, vous avez ?crit?:
> I am posting this at Jachym Cepicky's suggestion as I had originally
> posted it on the QGIS forum. I cannot open large (2.7 GB) .tif rasters
> on a Ubuntu Hardy distribution. I have tried gdal 1.4.4 from Ubuntu,
> 1.5.1 from Jachym's repo, and the version distributed with the 2.0.6
> version of FWTools. Here's some output:
>
> marius@snowcrave:~$ gdalinfo GISdata/Romania/LandsatMosaics/bands123.tif
> ERROR 4: `GISdata/Romania/LandsatMosaics/bands123.tif' not recognised as
> a supported file format.
>
> gdalinfo failed - unable to open
> 'GISdata/Romania/LandsatMosaics/bands123.tif'.
>
> I know the raster file is fine because I can read it on a Ubuntu Gutsy
> box with gdal 1.4.2. Here's the output from the Gutsy box:
>
> marius@bigfoot:~$ gdalinfo /media/hdb7/bands123.tif
> Driver: GTiff/GeoTIFF
> Size is 31865, 30113
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 35N",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.2572235629972,
>                 AUTHORITY["EPSG","7030"]],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",27],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","32635"]]
> Origin = (-126751.937963147182018,5526477.750000000000000)
> Pixel Size = (28.500000000000000,-28.500000000000000)
> Metadata:
>   AREA_OR_POINT=Area
>   TIFFTAG_SOFTWARE=IMAGINE TIFF Support
> Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
> @(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15
> 18:42:01EDT $
>   TIFFTAG_XRESOLUTION=1
>   TIFFTAG_YRESOLUTION=1
>   TIFFTAG_RESOLUTIONUNIT=1 (unitless)
> Corner Coordinates:
> Upper Left  ( -126751.938, 5526477.750) ( 18d19'38.37"E, 49d33'53.29"N)
> Lower Left  ( -126751.938, 4668257.250) ( 19d26'39.47"E, 41d55'1.31"N)
> Upper Right (  781400.562, 5526477.750) ( 30d54'46.05"E, 49d49'28.61"N)
> Lower Right (  781400.562, 4668257.250) ( 30d24'13.74"E, 42d 6'57.36"N)
> Center      (  327324.312, 5097367.500) ( 24d46'10.68"E, 46d 0'29.21"N)
> Band 1 Block=31865x1 Type=Byte, ColorInterp=Gray
> Band 2 Block=31865x1 Type=Byte, ColorInterp=Undefined
> Band 3 Block=31865x1 Type=Byte, ColorInterp=Undefined
>
> On the Hardy box I have encrypted ext3 partitions, while on the Gutsy
> they are unencrypted ext3. I placed the raster on an unencrypted
> partition, but that didn't help. Gdalinfo works with smaller (900 MB)
> .tif rasters on the Hardy box. I look forward to any suggestions you
> might have. The QGIS post can be accesed here:
> http://forum.qgis.org/viewtopic.php?f=2&t=783. Thanks.
>
> Marius
>
>
> _________________________________________________________________
> Keep your kids safer online with Windows Live Family Safety.
> http://www.windowslive.com/family_safety/overview.html?ocid=TXT_TAGLM_WL_Re
>fresh_family_safety_052008


From dron at ak4719.spb.edu  Sat May 24 09:50:16 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Sat May 24 10:00:24 2008
Subject: [Gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <17442809.post@talk.nabble.com>
References: <20080517150047.GA12028@ak4719.spb.edu>
	<f3b73b7d0805170951t652cd404sab5f1bf8bd43b55d@mail.gmail.com>
	<20080518084739.GC16042@ak4719.spb.edu>
	<17442809.post@talk.nabble.com>
Message-ID: <20080524135016.GA4962@ak4719.spb.edu>

On Fri, May 23, 2008 at 04:50:40PM -0700, Fodder wrote:
> Just curious if the new version of gdal_grid allowing for a shapefile
> attriubte to be used as the z field is available yet?

Yep, I just checked in the new version. You need to update from the
trunk to get it. Just use the attribute field name with the "-zfield"
option. I think that updated documentation will be available here
shortly:

 http://www.gdal.org/gdal_grid.html

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From mariusjigmond at hotmail.com  Sat May 24 10:41:54 2008
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat May 24 10:41:57 2008
Subject: [gdal-dev] GDALINFO fails with large .tif raster
Message-ID: <BAY142-W109CA995A6FF043B0D20E4B2C00@phx.gbl>



Here's the output of tiffdump:



GISdata/Romania/LandsatMosaics/bands123.tif:

Magic: 0x4949 <little-endian> Version: 0x2a

Directory 0: offset 2878894228 (0xab987094) next 0 (0)

ImageWidth (256) SHORT (3) 1<31865>

ImageLength (257) SHORT (3) 1<30113>

BitsPerSample (258) SHORT (3) 3<8 8 8>

Compression (259) SHORT (3) 1<1>

Photometric (262) SHORT (3) 1<1>

StripOffsets (273) LONG (4) 30113<8 95603 191198 286793 382388
477983 573578 669173 764768 860363 955958 1051553 1147148 1242743
1338338 1433933 1529528 1625123 1720718 1816313 1911908 2007503 2103098
2198693 ...>

Orientation (274) SHORT (3) 1<1>

SamplesPerPixel (277) SHORT (3) 1<3>

RowsPerStrip (278) SHORT (3) 1<1>

StripByteCounts (279) LONG (4) 30113<95595 95595 95595 95595 95595
95595 95595 95595 95595 95595 95595 95595 95595 95595 95595 95595 95595
95595 95595 95595 95595 95595 95595 95595 ...>

XResolution (282) RATIONAL (5) 1<1>

YResolution (283) RATIONAL (5) 1<1>

PlanarConfig (284) SHORT (3) 1<1>

ResolutionUnit (296) SHORT (3) 1<1>

Software (305) ASCII (2) 164<IMAGINE TIFF Support\nCop ...>

ExtraSamples (338) SHORT (3) 2<0 0>

SampleFormat (339) SHORT (3) 3<1 1 1>

33550 (0x830e) DOUBLE (12) 3<28.5 28.5 0>

33922 (0x8482) DOUBLE (12) 6<0 0 0 -126752 5.52648e+06 0>

34735 (0x87af) SHORT (3) 28<1 1 0 6 1024 0 1 1 1025 0 1 1 1026 34737
257 0 3072 0 1 32635 3073 34737 244 257 ...>

34737 (0x87b1) ASCII (2) 502<IMAGINE GeoTIFF Support\n ...>



There are only two variables here between what works and what doesn't.
One distribution is Gutsy unencrypted (works) and the other is Hardy
encrypted (doesn't work). I will try an unencrypted installation of
Hardy and see if that fixes the problem. It works in Windows as well,
so it's literally a Hardy or encryption problem. Or I might be missing
something else rather obvious :). Thank you for looking into this. I
will post the results of the new installation once available.



Marius



Even Rouault wrote:

  I've downloaded your TIFF image and tried it with different GDAL versions : 
GDAL SVN with internal libtiff, GDAL 1.5 branch with my system libtiff 
(3.8.2-7ubuntu2), and GDAL 1.4.1 (Ubuntu package libgdal1-1.4.0, 
1.4.1-6build1) with system libtiff, and all of them can gdalinfo successfully 
on it.

Have you tried to run 'tiffdump' on your TIFF image ?

Best regards,
Even

Le Friday 23 May 2008 01:04:09 Marius Jigmond, vous avez ?crit :
  
  
    I am posting this at Jachym Cepicky's suggestion as I had originally
posted it on the QGIS forum. I cannot open large (2.7 GB) .tif rasters
on a Ubuntu Hardy distribution. I have tried gdal 1.4.4 from Ubuntu,
1.5.1 from Jachym's repo, and the version distributed with the 2.0.6
version of FWTools. Here's some output:

marius@snowcrave:~$ gdalinfo GISdata/Romania/LandsatMosaics/bands123.tif
ERROR 4: `GISdata/Romania/LandsatMosaics/bands123.tif' not recognised as
a supported file format.

gdalinfo failed - unable to open
'GISdata/Romania/LandsatMosaics/bands123.tif'.

I know the raster file is fine because I can read it on a Ubuntu Gutsy
box with gdal 1.4.2. Here's the output from the Gutsy box:

marius@bigfoot:~$ gdalinfo /media/hdb7/bands123.tif
Driver: GTiff/GeoTIFF
Size is 31865, 30113
Coordinate System is:
PROJCS["WGS 84 / UTM zone 35N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",27],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32635"]]
Origin = (-126751.937963147182018,5526477.750000000000000)
Pixel Size = (28.500000000000000,-28.500000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15
18:42:01EDT $
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  ( -126751.938, 5526477.750) ( 18d19'38.37"E, 49d33'53.29"N)
Lower Left  ( -126751.938, 4668257.250) ( 19d26'39.47"E, 41d55'1.31"N)
Upper Right (  781400.562, 5526477.750) ( 30d54'46.05"E, 49d49'28.61"N)
Lower Right (  781400.562, 4668257.250) ( 30d24'13.74"E, 42d 6'57.36"N)
Center      (  327324.312, 5097367.500) ( 24d46'10.68"E, 46d 0'29.21"N)
Band 1 Block=31865x1 Type=Byte, ColorInterp=Gray
Band 2 Block=31865x1 Type=Byte, ColorInterp=Undefined
Band 3 Block=31865x1 Type=Byte, ColorInterp=Undefined

On the Hardy box I have encrypted ext3 partitions, while on the Gutsy
they are unencrypted ext3. I placed the raster on an unencrypted
partition, but that didn't help. Gdalinfo works with smaller (900 MB)
.tif rasters on the Hardy box. I look forward to any suggestions you
might have. The QGIS post can be accesed here:
http://forum.qgis.org/viewtopic.php?f=2&t=783. Thanks.

Marius


_________________________________________________________________
Keep your kids safer online with Windows Live Family Safety.
http://www.windowslive.com/family_safety/overview.html?ocid=TXT_TAGLM_WL_Re
fresh_family_safety_052008
    
  
  



  




_________________________________________________________________
E-mail for the greater good. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ GreaterGood
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080524/e5dd2a01/attachment-0001.html
From mariusjigmond at hotmail.com  Sat May 24 10:52:15 2008
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat May 24 10:52:17 2008
Subject: [gdal-dev] GDALINFO fails with large .tif raster
Message-ID: <BAY142-W179ACDBF0F659FB7E8C5CB2C00@phx.gbl>



Well, I've ruled out the encryption. I did a clean unencrypted install
of Ubuntu Hardy with gdal 1.5.1, and gdalinfo still doesn't recognize
the .tif as supported file format. I'll give Fedora 9 a try, and if
that works it's likely a Hardy problem since Gutsy works. I'll keep you
posted, and I'll take any suggestions.



Marius



Marius Jigmond wrote:

  I am posting this at Jachym Cepicky's suggestion as I had
originally 

posted it on the QGIS forum. I cannot open large (2.7 GB) .tif rasters 

on a Ubuntu Hardy distribution. I have tried gdal 1.4.4 from Ubuntu, 

1.5.1 from Jachym's repo, and the version distributed with the 2.0.6 

version of FWTools. Here's some output:

  

marius@snowcrave:~$ gdalinfo GISdata/Romania/LandsatMosaics/bands123.tif

ERROR 4: `GISdata/Romania/LandsatMosaics/bands123.tif' not recognised
as 

a supported file format.

  

gdalinfo failed - unable to open 

'GISdata/Romania/LandsatMosaics/bands123.tif'.

  

I know the raster file is fine because I can read it on a Ubuntu Gutsy 

box with gdal 1.4.2. Here's the output from the Gutsy box:

  

marius@bigfoot:~$ gdalinfo /media/hdb7/bands123.tif

Driver: GTiff/GeoTIFF

Size is 31865, 30113

Coordinate System is:

PROJCS["WGS 84 / UTM zone 35N",

GEOGCS["WGS 84",

DATUM["WGS_1984",

SPHEROID["WGS 84",6378137,298.2572235629972,

AUTHORITY["EPSG","7030"]],

AUTHORITY["EPSG","6326"]],

PRIMEM["Greenwich",0],

UNIT["degree",0.0174532925199433],

AUTHORITY["EPSG","4326"]],

PROJECTION["Transverse_Mercator"],

PARAMETER["latitude_of_origin",0],

PARAMETER["central_meridian",27],

PARAMETER["scale_factor",0.9996],

PARAMETER["false_easting",500000],

PARAMETER["false_northing",0],

UNIT["metre",1,

AUTHORITY["EPSG","9001"]],

AUTHORITY["EPSG","32635"]]

Origin = (-126751.937963147182018,5526477.750000000000000)

Pixel Size = (28.500000000000000,-28.500000000000000)

Metadata:

AREA_OR_POINT=Area

TIFFTAG_SOFTWARE=IMAGINE TIFF Support

Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved

@(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15
  

18:42:01EDT $

TIFFTAG_XRESOLUTION=1

TIFFTAG_YRESOLUTION=1

TIFFTAG_RESOLUTIONUNIT=1 (unitless)

Corner Coordinates:

Upper Left ( -126751.938, 5526477.750) ( 18d19'38.37"E, 49d33'53.29"N)

Lower Left ( -126751.938, 4668257.250) ( 19d26'39.47"E, 41d55'1.31"N)

Upper Right ( 781400.562, 5526477.750) ( 30d54'46.05"E, 49d49'28.61"N)

Lower Right ( 781400.562, 4668257.250) ( 30d24'13.74"E, 42d 6'57.36"N)

Center ( 327324.312, 5097367.500) ( 24d46'10.68"E, 46d 0'29.21"N)

Band 1 Block=31865x1 Type=Byte, ColorInterp=Gray

Band 2 Block=31865x1 Type=Byte, ColorInterp=Undefined

Band 3 Block=31865x1 Type=Byte, ColorInterp=Undefined

  

On the Hardy box I have encrypted ext3 partitions, while on the Gutsy 

they are unencrypted ext3. I placed the raster on an unencrypted 

partition, but that didn't help. Gdalinfo works with smaller (900 MB) 

.tif rasters on the Hardy box. I look forward to any suggestions you 

might have. The QGIS post can be accesed here: 

http://forum.qgis.org/viewtopic.php?f=2&t=783. Thanks.

  

Marius

  

  

  Keep your kids safer online with Windows Live Family Safety. Help protect your kids.
  

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




_________________________________________________________________
Give to a good cause with every e-mail. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?souce=EML_WL_ GoodCause
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080524/d0a57415/attachment.html
From rezso at rdsor.ro  Sat May 24 13:17:41 2008
From: rezso at rdsor.ro (Balint Cristian)
Date: Sat May 24 14:00:38 2008
Subject: [gdal-dev] GDALINFO fails with large .tif raster
In-Reply-To: <BAY142-W179ACDBF0F659FB7E8C5CB2C00@phx.gbl>
References: <BAY142-W179ACDBF0F659FB7E8C5CB2C00@phx.gbl>
Message-ID: <200805242017.42073.rezso@rdsor.ro>

On Saturday 24 May 2008 05:52:15 pm Marius Jigmond wrote:
> Well, I've ruled out the encryption. I did a clean unencrypted install
> of Ubuntu Hardy with gdal 1.5.1, and gdalinfo still doesn't recognize
> the .tif as supported file format. I'll give Fedora 9 a try, and if
> that works it's likely a Hardy problem since Gutsy works. I'll keep you
> posted, and I'll take any suggestions.

Salutare,

 Marius, let me know how you follow with Fedora 9, there i can help you 
ut any time. Unfortunately not an ubuntu fan so cannot help you :(, i am
out of knowledge how ubuntu folk manage versions and packages.

gdal is in very good shape on Fedora stuff (glad to maintain it in person) i 
use heavily it on large datas and python/perl bindings works smooth too,
no problem at all.


cristian.
From cryan at csse.com.au  Sun May 25 03:49:38 2008
From: cryan at csse.com.au (Fodder)
Date: Sun May 25 03:49:40 2008
Subject: [Gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <20080524135016.GA4962@ak4719.spb.edu>
References: <20080517150047.GA12028@ak4719.spb.edu>
	<f3b73b7d0805170951t652cd404sab5f1bf8bd43b55d@mail.gmail.com>
	<20080518084739.GC16042@ak4719.spb.edu>
	<17442809.post@talk.nabble.com>
	<20080524135016.GA4962@ak4719.spb.edu>
Message-ID: <17455361.post@talk.nabble.com>


Hi Andrey,

Thanks, sorry for this dumb question but where can I find this trunk? Also,
can I just replace that single executable in my exisiting gdal distribution
or does it have some supporting files?

It seems like a good little tool, are there any plans to put in splines or
kriging? Is it mostly for points or does it work with polylines & polgons
too?

Cheers,
F
-- 
View this message in context: http://www.nabble.com/gdal_grid%3A-taking-a-value-from-feature-attribute-tp17292929p17455361.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Sun May 25 10:38:48 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun May 25 10:39:06 2008
Subject: [Gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <17455361.post@talk.nabble.com>
References: <20080517150047.GA12028@ak4719.spb.edu>
	<f3b73b7d0805170951t652cd404sab5f1bf8bd43b55d@mail.gmail.com>
	<20080518084739.GC16042@ak4719.spb.edu> <17442809.post@talk.nabble.com>
	<20080524135016.GA4962@ak4719.spb.edu> <17455361.post@talk.nabble.com>
Message-ID: <483979F8.1070100@pobox.com>

Fodder wrote:
> Hi Andrey,
> 
> Thanks, sorry for this dumb question but where can I find this trunk? Also,
> can I just replace that single executable in my exisiting gdal distribution
> or does it have some supporting files?

Fodder,

You can find a snapshot of the source code for "trunk" (aka "the development
version") at:

   http://download.osgeo.org/gdal/daily/

Generally speaking you cannot substitute an executable from trunk back into
an older build.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From rush at winkey.org  Sun May 25 21:42:55 2008
From: rush at winkey.org (brian)
Date: Sun May 25 21:50:27 2008
Subject: [gdal-dev] documentation bug
Message-ID: <1211766175.25246.4.camel@winkey.org>

on the page http://gdal.org/gdal_tutorial.html
in the section "Techniques for Creating Files"
the c example in the first set of examples

?GDALDriver hDriver = ?GDALGetDriverByName( pszFormat );

should read

GDALDriverH hDriver = GDALGetDriverByName( pszFormat );

thank you

brian

From hobu.inc at gmail.com  Sun May 25 23:04:31 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Sun May 25 23:08:30 2008
Subject: [gdal-dev] documentation bug
In-Reply-To: <1211766175.25246.4.camel@winkey.org>
References: <1211766175.25246.4.camel@winkey.org>
Message-ID: <DBEBBBA9-9455-409D-A9EB-20A6F46CCC70@gmail.com>


On May 25, 2008, at 8:42 PM, brian wrote:

> on the page http://gdal.org/gdal_tutorial.html
> in the section "Techniques for Creating Files"
> the c example in the first set of examples
>
> GDALDriver hDriver = GDALGetDriverByName( pszFormat );
>
> should read
>
> GDALDriverH hDriver = GDALGetDriverByName( pszFormat );
>
> thank you


Fixed.  Please use the Trac instance http://trac.osgeo.org/gdal/ to  
file bug reports for things like this so they are not easily missed in  
the river of email traffic.

Howard
From dron at ak4719.spb.edu  Mon May 26 06:58:55 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Mon May 26 07:00:31 2008
Subject: [Gdal-dev] gdal_grid: taking a value from feature attribute
In-Reply-To: <17455361.post@talk.nabble.com>
References: <20080517150047.GA12028@ak4719.spb.edu>
	<f3b73b7d0805170951t652cd404sab5f1bf8bd43b55d@mail.gmail.com>
	<20080518084739.GC16042@ak4719.spb.edu>
	<17442809.post@talk.nabble.com>
	<20080524135016.GA4962@ak4719.spb.edu>
	<17455361.post@talk.nabble.com>
Message-ID: <20080526105855.GB5784@ak4719.spb.edu>

On Sun, May 25, 2008 at 12:49:38AM -0700, Fodder wrote:
> It seems like a good little tool, are there any plans to put in
> splines or kriging?

I would like to see the wide range of methods to be implemented, but I
have now short term plans to do it myself. But any contributions are
welcome. I tried to make gridding interface simple enough and suitable
for further additions:

 http://trac.osgeo.org/gdal/browser/trunk/gdal/alg/gdalgrid.cpp

> Is it mostly for points or does it work with polylines & polgons too?

It will use the points only, but can be easily extended to handle
polygons and polylines too.  It will collect a list of nodes and use it
in the same way as list of points, so no extra intelligence here. I can
add an option to enable such a behavior.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From Shawn.Gong at drdc-rddc.gc.ca  Mon May 26 12:25:44 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Mon May 26 12:27:56 2008
Subject: [gdal-dev] gdal 1.5.1 Bus Error - core dump on Solaris 9
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E120096@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi Frank and list,

I have written this small code to debug gdal bus error.
"python test.py" failed on the last line. It wrote 178 bytes to
working_dir/test2.tif then core dumped.

python error message:
ERROR 1: /home/sgong/working_dir/test2.tif:No space to read TIFF
directory
ERROR 1: TIFFReadDirectory:Failed to read directory at offset 8
Bus error (core dumped)


help is appreciated,
Shawn



test.py
=================
import os
import gdal
import string
import Numeric
import gdalnumeric
import math
import gvutils
from gdalconst import *


TEMP_PATH__ = os.path.join(os.environ['MY_PATH'], 'working_dir' ) 

file_read = os.path.join(TEMP_PATH__,"A-Pan.tif")
file_write = os.path.join(TEMP_PATH__,"test2.tif")

dataset = gdal.Open(file_read, GA_ReadOnly )
array = dataset.ReadAsArray(1,1,200,150)

extract_ds = gdalnumeric.OpenArray(array)
#extract_ds.SetGCPs(gcps,projection)

print "step 1"
driver = gdal.GetDriverByName( "GTiff" )

print "step 2"
driver.CreateCopy( file_write, extract_ds )


-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Wednesday, May 21, 2008 3:20 PM
To: Gong, Shawn (Contractor)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdal 1.5.1 Bus Error - core dump on Solaris 9

On Wed, May 21, 2008 at 1:17 PM, Gong, Shawn (Contractor)
<Shawn.Gong@drdc-rddc.gc.ca> wrote:
> hi list,
>
> I have been using gdal 1.4, and have recently built gdal 1.5.1 for its
> large image support.
> Gdal 1.5.1 and OpenEV 1.8 building was fine. Then I encounter Bus
Error
> - core dump on Solaris 9.
> I have tracked it down to where the Bus Error occurred:
>  gtiff_driver = gdal.GetDriverByName( 'GTiff' )
>  self.new_ds = gtiff_driver.CreateCopy( fname, vrtds, ...
> A "core" file is generated and kept growing to near half GB.
>
> I have followed Frank's advices of using -fPIC during compiling, and
> rebuilt Gdal 1.5.1 from scratch. But I still get the same error.

Shawn,

I don't know what is happening here.  I would suggest you
try and replicate the crash in gdb and get a traceback for
a clue of what is going wrong.

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | Geospatial Programmer for Rent
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test2.tif
Type: image/tiff
Size: 178 bytes
Desc: test2.tif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080526/8293914e/test2.tif
From cjanssen at iavo-rs.com  Mon May 26 15:39:11 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Mon May 26 15:39:14 2008
Subject: [gdal-dev] GDAL Warp working intermittetently
Message-ID: <20080526193911.fa5ad489@smtp.iavo-rs.com>

I apologize if this has already been answered previously, but I am trying to 
use the GDALWarp functionality and the process appears to be working only 
intermittently.  I am using the 1.5.0 build of GDAL.  The first time I try 
to use the warp functions when a project is opened, the results appear to be 
correct.  If I subsequently run the warp again (using the same data) I have 
been getting erroneous results.  For the image warping 
(oOperation.ChunkAndWarpImage) the output is an all black image.  For the 
point warping (GDALTPSTransform) the result is extremely high values.  In 
both cases, if I set a breakpoint in the debugger post-operation, and then 
set the active statement to the beginning of the setup function, the warping 
results are suddenly correct. 

Does anyone have experience with this type of issue with the GDALWarp 
library? 

The code that shows these issues is below.. 

Warp Image: 

psWarpOptions->pTransformerArg = GDALCreateTPSTransformer(tieIn->Count, 
tiePoints, 0); 
psWarpOptions->pfnTransformer = GDALTPSTransform; 
psWarpOptions->eResampleAlg = GRA_Bilinear; 
GDALWarpOperation oOperation; 
oOperation.Initialize( psWarpOptions ); 
CPLErr err = oOperation.ChunkAndWarpImage(0, 0, ihOut->ImageWidth, 
ihOut->ImageHeight); 



Warp Points: 

GDALTransformerFunc* gFunc = 
(GDALTransformerFunc*)GDALCreateTPSTransformer(tieIn->Count, tiePoints, 0); 
GDALTPSTransform(gFunc, 0, pWarp->Count, dX, dY, dZ, iSuc); 



Thanks for your help! 

Christiaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080526/8150335f/attachment.html
From warmerdam at pobox.com  Mon May 26 16:41:23 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May 26 16:41:41 2008
Subject: [gdal-dev] GDAL Warp working intermittetently
In-Reply-To: <20080526193911.fa5ad489@smtp.iavo-rs.com>
References: <20080526193911.fa5ad489@smtp.iavo-rs.com>
Message-ID: <483B2073.2080804@pobox.com>

Christiaan Janssen wrote:
> I apologize if this has already been answered previously, but I am 
> trying to
> use the GDALWarp functionality and the process appears to be working only
> intermittently.  I am using the 1.5.0 build of GDAL.  The first time I try
> to use the warp functions when a project is opened, the results appear 
> to be
> correct.  If I subsequently run the warp again (using the same data) I have
> been getting erroneous results.  For the image warping
> (oOperation.ChunkAndWarpImage) the output is an all black image.  For the
> point warping (GDALTPSTransform) the result is extremely high values.  In
> both cases, if I set a breakpoint in the debugger post-operation, and then
> set the active statement to the beginning of the setup function, the 
> warping
> results are suddenly correct.
> 
> Does anyone have experience with this type of issue with the GDALWarp
> library?

Christiaan,

Is it possible you are suffering from the bug reported at:

   trac.osgeo.org/gdal/ticket/2300

This was not fixed till after 1.5.0. Reviewing the log it looks like it
was also fixed after 1.5.1 was released, so you would need to upgrade to
a 1.5 branch snapshot or the trunk snapshot from subversion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon May 26 22:14:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon May 26 22:15:23 2008
Subject: [gdal-dev] 1.5.2 Release Candidate
Message-ID: <483B6E88.1010408@pobox.com>

Folks,

There have been quite a few valuable bug fixes since the 1.5.1 release
a few months ago.  As I suggested last week, I have prepared a release
candidate for a 1.5.2 release available for review at:

   http://download.osgeo.org/gdal/gdal-1.5.2RC1.tar.gz

I would appreciate testing of these release, and I'll call a motion to
promote it as the official 1.5.2 release in a day or so.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jorg.verstraete at incgeo.be  Tue May 27 06:11:05 2008
From: jorg.verstraete at incgeo.be (VJorg)
Date: Tue May 27 06:11:07 2008
Subject: [Gdal-dev] building gdal with local xerces/proj4
Message-ID: <17486002.post@talk.nabble.com>


Hello,

I'm trying to build a gdal 1.5.1 using a local version of Xerces 2.7.0 and
Proj 4 4.6.0 (despite the fact that both are installed on the system, but we
wish to be independant of it). I'm using Xerces 2.7.0, as compilation with
2.8.0 fails ( http://trac.osgeo.org/gdal/ticket/2370 ticket 2370 ), but that
is a different issue. For this purpose, I have build xerces and proj4 in
/home/jv/thirdparty/xerces/xerces-c-src_2_7_0 and
/home/jv/thirdparty/proj/proj4.6.0 respectively.

The configure step is
-
./configure --prefix=/home/jv/thirdparty/linuxbuilds/gdal151 --enable-rtti
--with-static-proj4=/home/jv/thirdparty/proj/proj4.6.0
--with-xerces=/home/jv/thirdparty/xerces/xerces-c-src_2_7_0
-
In the output, it shows:
-
checking for Xerces C++ Parser headers in
/home/jv/thirdparty/xerces/xerces-c-src_2_7_0/include and
/home/jv/thirdparty/xerces/xerces-c-src_2_7_0/include/xercesc... found
checking for Xerces C++ Parser libraries... found
checking for Xerces C++ Parser... yes
checking if Xerces C++ Parser version is >= 2.7.0... yes
-

The compilation output however shows (just one example)
-
libtool: link: g++ ogr2ogr.o -o .libs/ogr2ogr 
/home/jv/thirdparty/gdal/gdal-1.5.1/.libs/libgdal.so
-L/home/jv/thirdparty/proj/proj4.6.0/src -L/usr/lib
-L/home/jv/thirdparty/xerces/xerces-c-src_2_7_0/lib /usr/lib/libproj.so
/usr/lib/libsqlite3.so /usr/lib/libodbc.so /usr/lib/libodbcinst.so
/usr/lib/libexpat.so -lxerces-c -lpthread /usr/lib/libjasper.so
/usr/lib/libhdf5.so -logdi31 -lgif -lgeotiff /usr/lib/libtiff.so -lm -lc
/usr/lib/libjpeg.so -lpng -lnetcdf -lcfitsio -lpq -lz -lrt -ldl -Wl,-rpath
-Wl,/home/jv/thirdparty/linuxbuilds/gdal151/lib
-
and further
-
libtool: link: g++ ogrtindex.o -o .libs/ogrtindex 
/home/jv/thirdparty/gdal/gdal-1.5.1/.libs/libgdal.so
-L/home/jv/thirdparty/proj/proj4.6.0/src -L/usr/lib
-L/home/jv/thirdparty/xerces/xerces-c-src_2_7_0/lib /usr/lib/libproj.so
/usr/lib/libsqlite3.so /usr/lib/libodbc.so /usr/lib/libodbcinst.so
/usr/lib/libexpat.so -lxerces-c -lpthread /usr/lib/libjasper.so
/usr/lib/libhdf5.so -logdi31 -lgif -lgeotiff /usr/lib/libtiff.so -lm -lc
/usr/lib/libjpeg.so -lpng -lnetcdf -lcfitsio -lpq -lz -lrt -ldl -Wl,-rpath
-Wl,/home/jv/thirdparty/linuxbuilds/gdal151/lib
-
Why does it look in proj4.6.0/src for linkage? All the libraries it needs
are in the (default) proj4.6.0/src/.libs ... How can I change this?
It hasn't it used the libxerces-s.so.27 that is present in
-L/home/jv/thirdparty/xerces/xerces-c-src_2_7_0/lib, presumably as the
/usr/lib path is listed first... How can I overcome this order?


When checking out the libgdal.so library using ldd, it shows dependancies
from
-
libproj.so.0 => /usr/lib/libproj.so.0
libxerces-c.so.27 => /usr/lib/libxerces-c.so.27
-
This also raises the question: why hasn't it linked proj4 statically?
(the origin of the xerces dependancy is obvious, but I don't know how to
circumvent it...)

Thanks!

J?rg
-- 
View this message in context: http://www.nabble.com/building-gdal-with-local-xerces-proj4-tp17486002p17486002.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jorg.verstraete at incgeo.be  Tue May 27 09:46:30 2008
From: jorg.verstraete at incgeo.be (VJorg)
Date: Tue May 27 09:46:31 2008
Subject: [Gdal-dev] building gdal with local xerces/proj4
In-Reply-To: <17486002.post@talk.nabble.com>
References: <17486002.post@talk.nabble.com>
Message-ID: <17490814.post@talk.nabble.com>


I managed to get what I want, by adding
-
export LDFLAGS="-Wl,--rpath -Wl,."
-
and then put all the relevant .so file in the appropriate folder.

All dependancies from these .so files are now correct, pointing to the ones
I want AND using a relative path.


J?rg
-- 
View this message in context: http://www.nabble.com/building-gdal-with-local-xerces-proj4-tp17486002p17490814.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mateusz at loskot.net  Tue May 27 09:55:17 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue May 27 09:55:24 2008
Subject: [Gdal-dev] building gdal with local xerces/proj4
In-Reply-To: <17486002.post@talk.nabble.com>
References: <17486002.post@talk.nabble.com>
Message-ID: <465F9967-C07B-4608-A48A-1DFEBB349999@loskot.net>

On May 27, 2008, at 12:11 PM, VJorg wrote:
> Hello,
>
> I'm trying to build a gdal 1.5.1 using a local version of Xerces  
> 2.7.0 and
> Proj 4 4.6.0 (despite the fact that both are installed on the  
> system, but we
> wish to be independant of it). I'm using Xerces 2.7.0, as  
> compilation with
> 2.8.0 fails ( http://trac.osgeo.org/gdal/ticket/2370 ticket 2370 ),  
> but that
> is a different issue. For this purpose, I have build xerces and  
> proj4 in
> /home/jv/thirdparty/xerces/xerces-c-src_2_7_0 and
> /home/jv/thirdparty/proj/proj4.6.0 respectively.

Jorg,

I assume you are using GCC on Linux.

> The configure step is
> -
> ./configure --prefix=/home/jv/thirdparty/linuxbuilds/gdal151 -- 
> enable-rtti
> --with-static-proj4=/home/jv/thirdparty/proj/proj4.6.0
> --with-xerces=/home/jv/thirdparty/xerces/xerces-c-src_2_7_0
> -
> In the output, it shows:
> -
> checking for Xerces C++ Parser headers in
> /home/jv/thirdparty/xerces/xerces-c-src_2_7_0/include and
> /home/jv/thirdparty/xerces/xerces-c-src_2_7_0/include/xercesc... found
> checking for Xerces C++ Parser libraries... found
> checking for Xerces C++ Parser... yes
> checking if Xerces C++ Parser version is >= 2.7.0... yes
> -


This looks OK so far.


> The compilation output however shows (just one example)
> -
> libtool: link: g++ ogr2ogr.o -o .libs/ogr2ogr
> /home/jv/thirdparty/gdal/gdal-1.5.1/.libs/libgdal.so
> -L/home/jv/thirdparty/proj/proj4.6.0/src -L/usr/lib
> -L/home/jv/thirdparty/xerces/xerces-c-src_2_7_0/lib /usr/lib/ 
> libproj.so
> /usr/lib/libsqlite3.so /usr/lib/libodbc.so /usr/lib/libodbcinst.so
> /usr/lib/libexpat.so -lxerces-c -lpthread /usr/lib/libjasper.so
> /usr/lib/libhdf5.so -logdi31 -lgif -lgeotiff /usr/lib/libtiff.so -lm  
> -lc
> /usr/lib/libjpeg.so -lpng -lnetcdf -lcfitsio -lpq -lz -lrt -ldl -Wl,- 
> rpath
> -Wl,/home/jv/thirdparty/linuxbuilds/gdal151/lib
> -
> and further
> -
> libtool: link: g++ ogrtindex.o -o .libs/ogrtindex
> /home/jv/thirdparty/gdal/gdal-1.5.1/.libs/libgdal.so
> -L/home/jv/thirdparty/proj/proj4.6.0/src -L/usr/lib
> -L/home/jv/thirdparty/xerces/xerces-c-src_2_7_0/lib /usr/lib/ 
> libproj.so
> /usr/lib/libsqlite3.so /usr/lib/libodbc.so /usr/lib/libodbcinst.so
> /usr/lib/libexpat.so -lxerces-c -lpthread /usr/lib/libjasper.so
> /usr/lib/libhdf5.so -logdi31 -lgif -lgeotiff /usr/lib/libtiff.so -lm  
> -lc
> /usr/lib/libjpeg.so -lpng -lnetcdf -lcfitsio -lpq -lz -lrt -ldl -Wl,- 
> rpath
> -Wl,/home/jv/thirdparty/linuxbuilds/gdal151/lib
> -
> Why does it look in proj4.6.0/src for linkage?


This is an intentional exception. Comments to the ticket 1345 should  
be helpful:

http://trac.osgeo.org/gdal/ticket/1345

and here:

http://trac.osgeo.org/gdal/ticket/1538#comment:6


> All the libraries it needs
> are in the (default) proj4.6.0/src/.libs ... How can I change this?

I'm not sure it's possible.

> It hasn't it used the libxerces-s.so.27 that is present in
> -L/home/jv/thirdparty/xerces/xerces-c-src_2_7_0/lib, presumably as the
> /usr/lib path is listed first... How can I overcome this order?

The libraries are scanned in order from left to right, however  
standard paths seem to have higher priority than those given with -L  
option.
The xerces issue is IMO ldd problem but not GCC linker problem, see  
below.

> When checking out the libgdal.so library using ldd, it shows  
> dependancies
> from
> -
> libproj.so.0 => /usr/lib/libproj.so.0
> libxerces-c.so.27 => /usr/lib/libxerces-c.so.27
> -

Try to temporarily rename libxerces-c.so.27

sudo mv /usr/lib/libxerces-c.so.27 /usr/lib/libxerces-c.so.27-disabled

and then run ldd.
Assuming you have the /home/jv/thirdparty/xerces/xerces-c-src_2_7_0/ 
lib in LD_LIBRARY_PATH, system should search for xerces in the custom  
location instead of /usr/lib.

Linker does not put full patch to the .so library in the output  
executable,
but only the name of .so file. So, this is not a compilation issue but  
run-time loading. By default, system searches only /lib and /usr/lib.

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org




From mwoote01 at harris.com  Tue May 27 10:06:41 2008
From: mwoote01 at harris.com (Michael Wooten)
Date: Tue May 27 10:10:03 2008
Subject: [gdal-dev] 
	Cannot build Java bindings in Linux (1.4.2, 1.4.4, 1.5.1)
Message-ID: <loom.20080527T140603-48@post.gmane.org>

I receive the following error when trying to build the GDAL Java bindings in
Linux (Redhat Enterprise 6):

gdal_wrap.cpp: In function `_jstring*
Java_org_gdal_gdal_gdalJNI_get_1Driver_1ShortName(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:1867: error: `GDALDriverShadow_get_ShortName' was not declared in
this scope

Many more of a similar error occur. Below is a complete dump from "make".
I've modified java.opt to have correct paths for Java, ant, and the Java
includes directories (Java 1.6.0_04). The same error statements occur for GDAL
1.4.2, 1.4.4, and 1.5.1.

Any suggestions?

-Michael

Complete "make" error output:

cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid
for C/ObjC but not for C++
gdal_wrap.cpp: In function `_jstring*
Java_org_gdal_gdal_gdalJNI_get_1Driver_1ShortName(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:2122: error: `GDALDriverShadow_get_ShortName' was not declared in
this scope
gdal_wrap.cpp:2122: warning: unused variable 'GDALDriverShadow_get_ShortName'
gdal_wrap.cpp: In function `_jstring*
Java_org_gdal_gdal_gdalJNI_get_1Driver_1LongName(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:2139: error: `GDALDriverShadow_get_LongName' was not declared in
this scope
gdal_wrap.cpp:2139: warning: unused variable 'GDALDriverShadow_get_LongName'
gdal_wrap.cpp: In function `_jstring*
Java_org_gdal_gdal_gdalJNI_get_1Driver_1HelpTopic(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:2156: error: `GDALDriverShadow_get_HelpTopic' was not declared in
this scope
gdal_wrap.cpp:2156: warning: unused variable 'GDALDriverShadow_get_HelpTopic'
gdal_wrap.cpp: In function `jint
Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterXSize(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:3467: error: `GDALDatasetShadow_get_RasterXSize' was not declared
in this scope
gdal_wrap.cpp:3467: warning: unused variable 'GDALDatasetShadow_get_RasterXSize'
gdal_wrap.cpp: In function `jint
Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterYSize(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:3482: error: `GDALDatasetShadow_get_RasterYSize' was not declared
in this scope
gdal_wrap.cpp:3482: warning: unused variable 'GDALDatasetShadow_get_RasterYSize'
gdal_wrap.cpp: In function `jint
Java_org_gdal_gdal_gdalJNI_get_1Dataset_1RasterCount(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:3497: error: `GDALDatasetShadow_get_RasterCount' was not declared
in this scope
gdal_wrap.cpp:3497: warning: unused variable 'GDALDatasetShadow_get_RasterCount'
gdal_wrap.cpp: In function `jint
Java_org_gdal_gdal_gdalJNI_get_1Band_1XSize(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:4141: error: `GDALRasterBandShadow_get_XSize' was not declared in
this scope
gdal_wrap.cpp:4141: warning: unused variable 'GDALRasterBandShadow_get_XSize'
gdal_wrap.cpp: In function `jint
Java_org_gdal_gdal_gdalJNI_get_1Band_1YSize(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:4156: error: `GDALRasterBandShadow_get_YSize' was not declared in
this scope
gdal_wrap.cpp:4156: warning: unused variable 'GDALRasterBandShadow_get_YSize'
gdal_wrap.cpp: In function `jint
Java_org_gdal_gdal_gdalJNI_get_1Band_1DataType(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:4171: error: `GDALRasterBandShadow_get_DataType' was not declared
in this scope
gdal_wrap.cpp:4171: warning: unused variable 'GDALRasterBandShadow_get_DataType'
gdal_wrap.cpp: In function `void
Java_org_gdal_gdal_gdalJNI_set_1TermProgress(JNIEnv*, _jclass*, jlong)':
gdal_wrap.cpp:5604: error: assignment of function `int GDALTermProgress(double,
const char*, void*)'
gdal_wrap.cpp:5604: error: cannot convert `int (*)(double, const char*, void*)'
to `int ()(double, const char*, void*)' in assignment
make: *** [gdal_wrap.o] Error 1


From jorg.verstraete at incgeo.be  Tue May 27 10:18:41 2008
From: jorg.verstraete at incgeo.be (VJorg)
Date: Tue May 27 10:18:43 2008
Subject: [Gdal-dev] building gdal with local xerces/proj4
In-Reply-To: <465F9967-C07B-4608-A48A-1DFEBB349999@loskot.net>
References: <17486002.post@talk.nabble.com>
	<465F9967-C07B-4608-A48A-1DFEBB349999@loskot.net>
Message-ID: <17491521.post@talk.nabble.com>




Mateusz Loskot wrote:
> 
>> Why does it look in proj4.6.0/src for linkage?
> This is an intentional exception. Comments to the ticket 1345 should  
> be helpful:
> 
Indeed... Thanks! 


Mateusz Loskot wrote:
> 
> Try to temporarily rename libxerces-c.so.27
> 
ldd shows that the library is missing... 


Mateusz Loskot wrote:
> 
> Assuming you have the /home/jv/thirdparty/xerces/xerces-c-src_2_7_0/ 
> lib in LD_LIBRARY_PATH, system should search for xerces in the custom  
> location instead of /usr/lib.
> 
The configure step consistenly fails whenever I try to use LD_LIBRARY_PATH.

But I manage to get it working using the LDFLAGS. :)


J?rg
-- 
View this message in context: http://www.nabble.com/building-gdal-with-local-xerces-proj4-tp17486002p17491521.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From k.dejong at geo.uu.nl  Tue May 27 10:28:06 2008
From: k.dejong at geo.uu.nl (Kor de Jong)
Date: Tue May 27 10:52:18 2008
Subject: [gdal-dev] How to delete GDALDriver objects
Message-ID: <200805271628.06840.k.dejong@geo.uu.nl>

Hi all,

I am working on making Valgrind happy with my code and fixed a memory
leak related to GDALDriver objects not being released once my
application ends.

I call GDALAllRegister() and GDALDestroyDriverManager() at the appropriate
times and I think I just found out that GDALDestroyDriverManager() does
not free the memory allocated by the individual GDALDriver objects. Am
I right?

Now I call GDALDriverManager::DeregisterDriver(driver) for each driver
and delete the driver afterwards. This makes Valgrind much happier. But
I guess I am in for some suprises on the Windows platform since I am
deleting objects that have been allocated by the GDal shared library.

My question is: how should I free the individual drivers allocated by
the GDal shared library? Is there a function similar to GDALClose, but
than for GDALDriver objects?

Best regards,
Kor

From rezso at rdsor.ro  Tue May 27 10:38:43 2008
From: rezso at rdsor.ro (Balint Cristian)
Date: Tue May 27 10:53:28 2008
Subject: [gdal-dev]  Cannot build Java bindings in Linux (1.4.2, 1.4.4,
	1.5.1)
In-Reply-To: <loom.20080527T140603-48@post.gmane.org>
References: <loom.20080527T140603-48@post.gmane.org>
Message-ID: <200805271738.44493.rezso@rdsor.ro>

On Tuesday 27 May 2008 05:06:41 pm Michael Wooten wrote:
> I receive the following error when trying to build the GDAL Java bindings


Michael, 

I can suggest you look at this src.rpm:

http://koji.fedoraproject.org/packages/gdal/1.5.1/10.fc9/src/gdal-1.5.1-10.fc9.src.rpm


  Latest one submitted by me today, you can adapt for RHEL too,
just read carefully the .spec file, I think it cover all gdal building 
related issues. Pakage contain a %check section too, and gdal 
related test are runned at building time, for statistics.
 Olso you can find very good packs for other underlaying libs too,
on koji build farm or on fedora mirror sites over release branches.

   It has enabled all bindings including java (php has licensing problem), 
however .spec is bit scarry but must undestand  that is multilib package, 
and RHEL/Fedora standards are pretty high from packaging point of view, 
must complain to all kind of rules. I consider it best pack ever for RH 
products, and i am not aware of what other distros are doing.

  I use very intensively C,perl,python bindings and works smooth, 
cannot complain till now.

> in Linux (Redhat Enterprise 6):
Hmm RHEL6 ?! Isnt it a 5.x series ?

   However I work right now for update gdal for RHEL4.x/5.x, too, in 
RedHat's EPEL project (the official extension repo for RHEL products),
but i need to figure out first gdal-compat-1.4.x and than gdal-1.5.0,
olso, dependig libs require compat too. Unfortunatley RHEL unlike 
Fedora policy is extremely restictive breaking API/ABI, so  basicaly I
need now to carry out compat libraries too to satisfy all users,
all who already use 1.4.x and who wants 1.5.x, and made tham even
aviable as simultaneous instalation, and on top of over booth 32
64 variants must lay on same instaled system at a time (multilib) 
and _must_ work :) Its a compicated schema in the case of gdal on
RHEL, on Fedora is easyer.

  I will post RHEL variants in mather of day when it will be done, and
satisfyed all compat rules, but basicaly for RHEL the repo wiki and 
howto (here will be aviable):

http://fedoraproject.org/wiki/EPEL
(ATM only 1.4.x series are included)

  I am sorry for the lengthy mail, saw several mails regarding RHEL 
builds, and took oportunity to inform folks that packages are aviable, 
and invite interested ones to help me out colaborate over RH product 
pack via RH bugzilla with good/bad feedbacks and come with requests
over what package should provide for more.
 Olso in the case of colaboration I can grant each other CVS 
access over RH and maintain with the whom is interested in
high quality packaging, the more we are the better it will be.


Thank you,
Cristian.
From ivan.lucena at pmldnet.com  Tue May 27 11:15:25 2008
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Lucena,=20Ivan?=)
Date: Tue May 27 11:15:28 2008
Subject: [gdal-dev] Compiling GDAL-1.5.1 on Linux
Message-ID: <20080527151525.15927.qmail@s466.sureserver.com>

Hi Folks,

I am having some problems compiling on a Linux machine. I would like to disable all the driver that I am having problem with but I am not sure how to do that. I just need some basic rasters drivers like GTIFF and JPG for a temporary use and I am not familiar with all the setting on ./configure. 

Here is the error:

gdalhttp.cpp: In function `CPLErr CPLHTTPFetchMulti(CPLHTTPRequest*, int, const char* const*)':
gdalhttp.cpp:209: `CURLINFO_RESPONSE_CODE' undeclared (first use this function)
gdalhttp.cpp:209: (Each undeclared identifier is reported only once for each function it appears in.)
make[2]: *** [../o/gdalhttp.o] Error 1
make[2]: Leaving directory `/home/lucena/gdal-1.5.1/frmts/wms
make[1]: *** [wms-install-obj] Error 2
make[1]: Leaving directory `/home/lucena/gdal-1.5.1/frmts'
make: *** [frmts-target] Error 2

I tried that:

./confugure --disable-wms

but it doesn't help.

Any hint is welcome.

Thanks,

Ivan

From warmerdam at pobox.com  Tue May 27 11:37:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 27 11:38:07 2008
Subject: [gdal-dev] Compiling GDAL-1.5.1 on Linux
In-Reply-To: <20080527151525.15927.qmail@s466.sureserver.com>
References: <20080527151525.15927.qmail@s466.sureserver.com>
Message-ID: <483C2AC8.70506@pobox.com>

Lucena, Ivan wrote:
> Hi Folks,
> 
> I am having some problems compiling on a Linux machine. I would like to disable all the driver that I am having problem with but I am not sure how to do that. I just need some basic rasters drivers like GTIFF and JPG for a temporary use and I am not familiar with all the setting on ./configure. 
> 
> Here is the error:
> 
> gdalhttp.cpp: In function `CPLErr CPLHTTPFetchMulti(CPLHTTPRequest*, int, const char* const*)':
> gdalhttp.cpp:209: `CURLINFO_RESPONSE_CODE' undeclared (first use this function)
> gdalhttp.cpp:209: (Each undeclared identifier is reported only once for each function it appears in.)
> make[2]: *** [../o/gdalhttp.o] Error 1
> make[2]: Leaving directory `/home/lucena/gdal-1.5.1/frmts/wms
> make[1]: *** [wms-install-obj] Error 2
> make[1]: Leaving directory `/home/lucena/gdal-1.5.1/frmts'
> make: *** [frmts-target] Error 2
> 
> I tried that:
> 
> ./confugure --disable-wms
> 
> but it doesn't help.
> 
> Any hint is welcome.

Ivan,

Try --without-curl

The error is (I believe) due to use of relatively modern curl
features by the gdalhttp module in the wms driver.

Actually, what version of curl are you using?  (try curl-config --version)

If you wouldn't mind, I'd appreciate your filing a ticket with the error,
and the curl version you are using.  Then I could look into some sort of
fallback or better error in the WMS driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue May 27 11:39:47 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 27 11:40:08 2008
Subject: [gdal-dev] How to delete GDALDriver objects
In-Reply-To: <200805271628.06840.k.dejong@geo.uu.nl>
References: <200805271628.06840.k.dejong@geo.uu.nl>
Message-ID: <483C2B43.5070309@pobox.com>

Kor de Jong wrote:
> Hi all,
> 
> I am working on making Valgrind happy with my code and fixed a memory
> leak related to GDALDriver objects not being released once my
> application ends.
> 
> I call GDALAllRegister() and GDALDestroyDriverManager() at the appropriate
> times and I think I just found out that GDALDestroyDriverManager() does
> not free the memory allocated by the individual GDALDriver objects. Am
> I right?
> 
> Now I call GDALDriverManager::DeregisterDriver(driver) for each driver
> and delete the driver afterwards. This makes Valgrind much happier. But
> I guess I am in for some suprises on the Windows platform since I am
> deleting objects that have been allocated by the GDal shared library.
> 
> My question is: how should I free the individual drivers allocated by
> the GDal shared library? Is there a function similar to GDALClose, but
> than for GDALDriver objects?

Kor,

GDALDestroyDriverManager() should destroy all the drivers registered
with the manager before destroying the manager and should be the main
way of cleaning up.

This is what gdalinfo does, and it seems to work quite clean with valgrind.

So perhaps you need to provide more info.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ivan.lucena at pmldnet.com  Tue May 27 12:02:26 2008
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Lucena,=20Ivan?=)
Date: Tue May 27 12:02:28 2008
Subject: [gdal-dev] Compiling GDAL-1.5.1 on Linux
Message-ID: <20080527160226.4302.qmail@s466.sureserver.com>

Frank,

I didn't mentioned before but I also tried --disable-curl --disable-wms --disable-wcs. In the meantime I decided to try the 151RC1

But the "--without-curl" worked fine. It shows on the final ./confure report that the OGC services are disabled.

The version og cURL that I have here is:

$ curl-config --version
libcurl 7.10.6

I can add a ticked for that, sure.

Continuing the build the process I am facing another error:

kml.h:41:2: #error "Old version of expat, please upgrade to expat 2.x"

I will try --without-kml ?

Thanks,

Ivan

>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  Subject: Re: [gdal-dev] Compiling GDAL-1.5.1 on Linux
>  Sent: May 27 '08 15:37
>  
>  Lucena, Ivan wrote:
>  > Hi Folks,
>  >
>  > I am having some problems compiling on a Linux machine. I would like to disable all the driver that I am having problem with but I am not sure how to do that. I just need some basic rasters drivers like GTIFF and JPG for a temporary use and I am not familiar with all the setting on ./configure.
>  >
>  > Here is the error:
>  >
>  > gdalhttp.cpp: In function `CPLErr CPLHTTPFetchMulti(CPLHTTPRequest*, int, const char* const*)':
>  > gdalhttp.cpp:209: `CURLINFO_RESPONSE_CODE' undeclared (first use this function)
>  > gdalhttp.cpp:209: (Each undeclared identifier is reported only once for each function it appears in.)
>  > make[2]: *** [../o/gdalhttp.o] Error 1
>  > make[2]: Leaving directory `/home/lucena/gdal-1.5.1/frmts/wms
>  > make[1]: *** [wms-install-obj] Error 2
>  > make[1]: Leaving directory `/home/lucena/gdal-1.5.1/frmts'
>  > make: *** [frmts-target] Error 2
>  >
>  > I tried that:
>  >
>  > ./confugure --disable-wms
>  >
>  > but it doesn't help.
>  >
>  > Any hint is welcome.
>  
>  Ivan,
>  
>  Try --without-curl
>  
>  The error is (I believe) due to use of relatively modern curl
>  features by the gdalhttp module in the wms driver.
>  
>  Actually, what version of curl are you using???(try curl-config --version)
>  
>  If you wouldn't mind, I'd appreciate your filing a ticket with the error,
>  and the curl version you are using.??Then I could look into some sort of
>  fallback or better error in the WMS driver.
>  
>  Best regards,
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush????| President OSGeo, http://osgeo.org
>  
>  
From warmerdam at pobox.com  Tue May 27 12:21:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 27 12:21:31 2008
Subject: [gdal-dev] Compiling GDAL-1.5.1 on Linux
In-Reply-To: <20080527160226.4302.qmail@s466.sureserver.com>
References: <20080527160226.4302.qmail@s466.sureserver.com>
Message-ID: <483C34F4.9020306@pobox.com>

Lucena, Ivan wrote:
> Frank,
> 
> I didn't mentioned before but I also tried --disable-curl --disable-wms --disable-wcs. In the meantime I decided to try the 151RC1
> 
> But the "--without-curl" worked fine. It shows on the final ./confure report that the OGC services are disabled.
> 
> The version og cURL that I have here is:
> 
> $ curl-config --version
> libcurl 7.10.6
> 
> I can add a ticked for that, sure.
> 
> Continuing the build the process I am facing another error:
> 
> kml.h:41:2: #error "Old version of expat, please upgrade to expat 2.x"
> 
> I will try --without-kml ?

Ivan,

I think you will want to do "--without-expat"

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mitchelljj98 at gmail.com  Tue May 27 12:36:09 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Tue May 27 12:36:12 2008
Subject: [gdal-dev] trying to determine the EPSG code from gdalinfo
Message-ID: <fa2ac0580805270936h1ed82dcbh30b37fbe81b0a1e7@mail.gmail.com>

Hi,

I am trying to determine the EPSG code from a gdalinfo listing against a
mrSid file of raster data within Florida and I get the following error when
running gdalinfo:
"Warning 4: Unable to find state plane zone in stateplane.csv, likely
because the GDAL data files cannot be found.  Using incomplete definistion
of state plane zone"

Based on the (incomplete) listing below I looked into the epsg file
contained within MapServer and I found a few possiblities for the epsg code:

1.)
     # NAD83 / Florida East
<26958> +proj=tmerc +lat_0=24.33333333333333 +lon_0=-81 +k=0.999941
+x_0=200000 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs  no_defs <>

or

2.)
    # NAD 1983 HARN StatePlane Florida East FIPS 0901
<102258> +proj=tmerc +lat_0=24.33333333333333 +lon_0=-81 +k=0.999941
+x_0=200000 +y_0=0 +ellps=GRS80 +units=m  no_defs <>

or

3.)
    # NAD83(HARN) / Florida East
<2777> +proj=tmerc +lat_0=24.33333333333333 +lon_0=-81 +k=0.999941
+x_0=200000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
no_defs <>


Which one of above 3 should I use for both processing imagery within
gdalwarp and reprojecting on the fly within mapserver?

Thanks,

John

Below is the listing that gdalinfo generated.
-------------------------------------------------------------------------------------------------------------------------------------
Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)
Files: F:\2004_DOQQ_State_Plane\StatePlane_E\MrSid\g05\q0512nw.sid
Size is 6356, 6947
Coordinate System is:
LOCAL_CS["State Plane Zone 0 / NAD83",
    UNIT["Meter",1]]
Origin = (489987.640833500020000,106293.663854000000000)
Pixel Size = (3.280833000000000,-3.280833000000000)
Metadata:
  IMAGE__INPUT_NAME=J:\sf_901_2\q0512nw.img
  IMAGE__INPUT_FILE_SIZE=134412999.000000
  IMAGE__DYNAMIC_RANGE_WINDOW=256.000000
  IMAGE__DYNAMIC_RANGE_LEVEL=127.500000
  IMG__TIME_STAMP=Fri Jul 15 00:17:08 2005

  IMG__HORIZONTAL_UNITS=feet
  IMG__PROJECTION_NAME=State Plane
  IMG__PROJECTION_TYPE=Internal
  IMG__PROJECTION_NUMBER=2
  IMG__PROJECTION_ZONE=64635
  IMG__SPHEROID_NAME=GRS 1980
  IMG__SPHEROID_SEMI_MAJOR_AXIS=6378137.000000
  IMG__SPHEROID_SEMI_MINOR_AXIS=6356752.314140
  IMG__SPHEROID_ECCENTRICITY_SQUARED=0.006694
  IMG__SPHEROID_RADIUS=6371007.180883
  IMG__PROJECTION_PARAMETERS=2.000000
  IMAGE__COMPRESSION_VERSION=1,6,1
  IMAGE__TARGET_COMPRESSION_RATIO=20.000000
  IMAGE__COMPRESSION_NLEV=8
  IMAGE__COMPRESSION_WEIGHT=4.000000
  IMAGE__COMPRESSION_GAMMA=2.000000
  IMAGE__COMPRESSION_BLOCK_SIZE=512
  IMAGE__CREATION_DATE=Tue Jul 19 14:40:18 2005

  IMAGE__WIDTH=6356
  IMAGE__HEIGHT=6947
  IMAGE__COLOR_SCHEME=0
  IMAGE__DATA_TYPE=0
  IMAGE__BITS_PER_SAMPLE=8
  IMAGE__XY_ORIGIN=489989.281250,106292.023438
  IMAGE__X_RESOLUTION=3.280833
  IMAGE__Y_RESOLUTION=3.280833
  IMAGE__WKT=LOCAL_CS["State Plane Zone 0 / NAD83",UNIT["Meter",1]]
Corner Coordinates:
Upper Left  (  489987.641,  106293.664)
Lower Left  (  489987.641,   83501.717)
Upper Right (  510840.615,  106293.664)
Lower Right (  510840.615,   83501.717)
Center      (  500414.128,   94897.690)
Band 1 Block=1024x128 Type=Byte, ColorInterp=Red
  Minimum=41.000, Maximum=176.000, Mean=61.796, StdDev=20.073
  Overviews: 3178x3474, 1589x1737, 795x869, 398x435, 199x218, 100x109,
50x55, 25x28
  Metadata:
    LAYER_TYPE=athematic
Band 2 Block=1024x128 Type=Byte, ColorInterp=Green
  Minimum=67.000, Maximum=192.000, Mean=94.222, StdDev=19.096
  Overviews: 3178x3474, 1589x1737, 795x869, 398x435, 199x218, 100x109,
50x55, 25x28
  Metadata:
    LAYER_TYPE=athematic
Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue
  Minimum=94.000, Maximum=169.000, Mean=110.354, StdDev=10.509
  Overviews: 3178x3474, 1589x1737, 795x869, 398x435, 199x218, 100x109,
50x55, 25x28
  Metadata:
    LAYER_TYPE=athematic
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080527/37577777/attachment.html
From k.dejong at geo.uu.nl  Tue May 27 16:38:15 2008
From: k.dejong at geo.uu.nl (Kor de Jong)
Date: Tue May 27 16:59:39 2008
Subject: [gdal-dev] How to delete GDALDriver objects
In-Reply-To: <483C2B43.5070309@pobox.com>
References: <200805271628.06840.k.dejong@geo.uu.nl>
	<483C2B43.5070309@pobox.com>
Message-ID: <200805272238.15705.k.dejong@geo.uu.nl>

Hi Frank,

Thanks for your reply.

Op dinsdag 27 mei 2008, schreef u:
> > My question is: how should I free the individual drivers allocated by
> > the GDal shared library? Is there a function similar to GDALClose, but
> > than for GDALDriver objects?
>
> GDALDestroyDriverManager() should destroy all the drivers registered
> with the manager before destroying the manager and should be the main
> way of cleaning up.
>
> This is what gdalinfo does, and it seems to work quite clean with valgrind.
>
> So perhaps you need to provide more info.

For each GDALDriver, I create a home brewn Driver instance. When a
Driver instance wants to do raster I/O using its GDALDriver, it calls
GDALDriverManager::DeregisterDriver on the global manager for each
registered GDALDriver, folowed by a call to
GDALDriverManager::RegisterDriver for the wrapped GDALDriver.
So, the driver manager does not contain all GDALDrivers loaded, but
only the one(s) currently used. Given your comments, this means that
when GDALDestroyDriverManager() is called, only the GDALDrivers
registered will be destroyed. The other ones will be left dangling.

In general the question than becomes, how would one free the memory
taken by a GDALDriver which has been deregistered with the
GDALDriverManager.

Thanks,
Kor


From jluis at ualg.pt  Tue May 27 17:44:47 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue May 27 17:44:50 2008
Subject: [gdal-dev] Slow access to compressed HDF4 files
Message-ID: <483C80CF.7030501@ualg.pt>


Hi,
I reopened ticket http://trac.osgeo.org/gdal/ticket/2208 which reports a 
very low efficiency issue reading (some ?) hdf files

An example file can be get from
ftp://data.nodc.noaa.gov/pub/data.nodc/pathfinder/Version5.0/Monthly/1991/199101.s04m1pfv50-sst-16b.hdf

The timings below (in seconds) respect my MEX for doing gdal read inside 
Matlab. That program is called gdalread.
Hardware is a 2.5 GHz core 2 duo

Let tt.hdf = 199101.s04m1pfv50-sst-16b.hdf

tic,Z = gdalread('c:\tt.hdf');toc
elapsed_time =  21.5

However, using the internal Matlab solution one get:

tic,sst=hdfread('c:\tt.hdf', 'sst', 'index', {[1 1],[1 1], [4096 8192]});toc
elapsed_time =  0.8120

Just to show that the problem is not in "gdalread" I converted the hdf 
file to getiff (lixo.tiff), which took about 25 sec

tic,Z = gdalread('c:\lixo.tiff');toc
elapsed_time =   2.0930

The slow performance is noticeable also when fetching only the file's 
metadata

tic,Z = gdalread('c:\tt.hdf','-M');toc
elapsed_time = 1.0310

% Matlab's way
tic,Z=hdfinfo('c:\tt.hdf');toc
elapsed_time =  0.0310

% On the geotiff file
tic,Z = gdalread('c:\lixo.tiff','-M');toc
elapsed_time =  0.0310

Joaquim Luis

From warmerdam at pobox.com  Tue May 27 21:48:10 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue May 27 21:48:31 2008
Subject: [gdal-dev] How to delete GDALDriver objects
In-Reply-To: <200805272238.15705.k.dejong@geo.uu.nl>
References: <200805271628.06840.k.dejong@geo.uu.nl>
	<483C2B43.5070309@pobox.com> <200805272238.15705.k.dejong@geo.uu.nl>
Message-ID: <483CB9DA.50205@pobox.com>

Kor de Jong wrote:
> For each GDALDriver, I create a home brewn Driver instance. When a
> Driver instance wants to do raster I/O using its GDALDriver, it calls
> GDALDriverManager::DeregisterDriver on the global manager for each
> registered GDALDriver, folowed by a call to
> GDALDriverManager::RegisterDriver for the wrapped GDALDriver.
> So, the driver manager does not contain all GDALDrivers loaded, but
> only the one(s) currently used. Given your comments, this means that
> when GDALDestroyDriverManager() is called, only the GDALDrivers
> registered will be destroyed. The other ones will be left dangling.
> 
> In general the question than becomes, how would one free the memory
> taken by a GDALDriver which has been deregistered with the
> GDALDriverManager.

Kor,

OK, understood.

I have added a GDALDestroyDriver() function for this situation (in
trunk).  As you note, the direct delete is somewhat risky, and will
cause heap corruption on windows if GDAL and the application are not
using the same heap.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ivan.lucena at pmldnet.com  Wed May 28 00:18:36 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed May 28 00:18:56 2008
Subject: [gdal-dev] Compiling GDAL-1.5.1 on Linux
In-Reply-To: <483C34F4.9020306@pobox.com>
References: <20080527160226.4302.qmail@s466.sureserver.com>
	<483C34F4.9020306@pobox.com>
Message-ID: <483CDD1C.1090108@pmldnet.com>

Frank,

I tried that:

% ./configure --without-curl --without-expat
% make

And it worked.

Thanks,

Ivan

Frank Warmerdam wrote:
> Lucena, Ivan wrote:
>> Frank,
>>
>> I didn't mentioned before but I also tried --disable-curl 
>> --disable-wms --disable-wcs. In the meantime I decided to try the 151RC1

correction: 152RC1

>>
>> But the "--without-curl" worked fine. It shows on the final ./confure 
>> report that the OGC services are disabled.
>>
>> The version og cURL that I have here is:
>>
>> $ curl-config --version
>> libcurl 7.10.6
>>
>> I can add a ticked for that, sure.
>>
>> Continuing the build the process I am facing another error:
>>
>> kml.h:41:2: #error "Old version of expat, please upgrade to expat 2.x"
>>
>> I will try --without-kml ?
> 
> Ivan,
> 
> I think you will want to do "--without-expat"
> 
> Best regards,
> 
From k.dejong at geo.uu.nl  Wed May 28 02:18:20 2008
From: k.dejong at geo.uu.nl (Kor de Jong)
Date: Wed May 28 02:18:29 2008
Subject: [gdal-dev] How to delete GDALDriver objects
In-Reply-To: <483CB9DA.50205@pobox.com>
References: <200805271628.06840.k.dejong@geo.uu.nl>
	<200805272238.15705.k.dejong@geo.uu.nl> <483CB9DA.50205@pobox.com>
Message-ID: <200805280818.20384.k.dejong@geo.uu.nl>

Op woensdag 28 mei 2008, schreef Frank Warmerdam:
> Kor de Jong wrote:
> > In general the question than becomes, how would one free the memory
> > taken by a GDALDriver which has been deregistered with the
> > GDALDriverManager.
>
> I have added a GDALDestroyDriver() function for this situation (in
> trunk).  As you note, the direct delete is somewhat risky, and will
> cause heap corruption on windows if GDAL and the application are not
> using the same heap.

Great, thanks Frank!

Kor

From ben at vterrain.org  Wed May 28 04:09:00 2008
From: ben at vterrain.org (Ben Discoe)
Date: Wed May 28 04:09:09 2008
Subject: [gdal-dev] gdaladdo / BuildOverviews mismatch
Message-ID: <049001c8c09a$16dda460$4498ed20$@org>

I am trying to figure out exactly what options exist for overlays, and the documentation has some problems.

For the application gdaladdo, documented here:
http://www.gdal.org/gdaladdo.html

It says the resampling methods are "nearest, average, average_mp, average_magphase, mode", with "average_mp" and "mode" not to be used.

In the underlying function GDALDataset::BuildOverviews:
http://www.gdal.org/classGDALDataset.html

It says the resampling methods are "NEAREST", "AVERAGE" or "MODE".

It seems these are not in agreement.  In the source code itself (gdal 1.5.1, overview.cpp) there are mentions of:

	"NEAR*"
	"AVER*"
	"AVERAGE_MAGPHASE"
	"AVERAGE_BIT2*"
	"AVERAGE_BIT2GRAYSCALE"
	"AVERAGE_BIT2GRAYSCALE_MINISWHITE"
	"AVERAGE_MP"
	"NO_REGEN:"

It seems that both the developer and end-user documentation needs updating to reflect the actual options available.  E.g. adding and explaining the BIT2 options and removing MODE.  gdaladdo should also state what the default method is (i had to read the source code to find out it is "nearest".)

Do these sort of doc fixes need to be logged in Trac, or is there some other way they get done?

Thanks,
Ben

From bclay at ball.com  Wed May 28 08:49:14 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed May 28 08:49:40 2008
Subject: [gdal-dev] Problems doing spatial query with OGR
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFEC2@daytonmsg2k3.AERO.BALL.COM>

Environment: Windows XP Visual Studio 2005, GDAL 1.5.0 with the C#  SWIG
bindings.

 

I am trying to determine the number of features within a geographic
bounding box for a specific time period.  The code I am using is shown
below

 

    OSGeo.OGR.Feature feature;

    int numFeatures;

 

    string sqlString = "select count(*) from " + tableName + " where " +
queryDefString;

 

    try

    {

        spatialFilter = Geometry.CreateFromWkt(wktGeometry);

    }

    catch (Exception except)

    {

        mLastErrorMsg = "Could not create patial filter from WKT
string";

    }

    if (spatialFilter != null)

    {

        try

        {

            dataLayer = dataSource.ExecuteSQL(sqlString, spatialFilter,
dialect);

 

            feature = dataLayer.GetNextFeature();

            if(feature != null)

            {
                numFeatures = feature. GetFieldAsInteger (0);

            }

                }

    }

 

The code executes without any error but appears to not use the spatial
filter at all because I get much lower results from an ArcObjects call
with the same bounding box and I get the same results from this code if
I pass a null value in as the spatial filter instead of the spatial
filter created from a WKT string.

 

The full sqlString is:

     "select count(*) from MODIS where

               DATE_TIME BETWEEN TO_DATE('2008-05-01 01:01:00',
'YYYY-MM-DD HH24:MI:SS') AND

                                 TO_DATE('2008-05-22 23:59:00',
'YYYY-MM-DD HH24:MI:SS')"

 

The wktGeometry string used to create the spatial filter is:

    "POLYGON((-83.7610299999997 35.1668499999996,

              -83.7610299999997 41.5608200000006,

              -76.9408000000003 41.5608200000006,

              -76.9408000000003 35.1668499999996,

              -83.7610299999997 35.1668499999996))"

 

As I mentioned above, I don't get any run time errors doing this just
the wrong results.

 

It appears to be filtering only on the date range provided.

 

Is there a specific order required in the WKT string?

 

Any other thoughts would be greatly appreciated.

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080528/847049eb/attachment.html
From jluis at ualg.pt  Wed May 28 10:50:53 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed May 28 10:50:59 2008
Subject: [gdal-dev] gdalwarp trunk and FWtools giving different results
Message-ID: <483D714D.2050200@ualg.pt>

Hi,

I am very puzzled with this difference between the outputs of gdalwarp 
form a couple of days old Trunk version versus FWtools 2.2.0

In both cases the command is the following
gdalwarp -s_srs "+proj=merc +R=6371008.7714" -t_srs EPSG:4326 alg.tiff 
alg_geo.tiff

but the trunk version has

Upper Left  (  -8.0862815,  37.3460021) (  8d 5'10.61"W, 37d20'45.61"N)
Lower Left  (  -8.0862815,  37.0644230) (  8d 5'10.61"W, 37d 3'51.92"N)
Upper Right (  -7.7343076,  37.3460021) (  7d44'3.51"W, 37d20'45.61"N)
Lower Right (  -7.7343076,  37.0644230) (  7d44'3.51"W, 37d 3'51.92"N)
Center      (  -7.9102945,  37.2052125) (  7d54'37.06"W, 37d12'18.77"N)

whilst  FW

Upper Left  (  -8.0862815,  37.1605907) (  8d 5'10.61"W, 37d 9'38.13"N)
Lower Left  (  -8.0862815,  36.8792107) (  8d 5'10.61"W, 36d52'45.16"N)
Upper Right (  -7.7339340,  37.1605907) (  7d44'2.16"W, 37d 9'38.13"N)
Lower Right (  -7.7339340,  36.8792107) (  7d44'2.16"W, 36d52'45.16"N)
Center      (  -7.9101077,  37.0199007) (  7d54'36.39"W, 37d 1'11.64"N)

Note the differences in latitude.
The FW solution, as far as I can tell from plotting a coastline, is the 
correct solution.

What can explain those differences.
NOTE, I do have GDAL_DATA pointing to the SVN data directory

Joaquim Luis
From warmerdam at pobox.com  Wed May 28 11:17:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 28 11:17:28 2008
Subject: [gdal-dev] Problems doing spatial query with OGR
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFEC2@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFEC2@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <483D7779.7070404@pobox.com>

Clay, Bruce wrote:
> Environment: Windows XP Visual Studio 2005, GDAL 1.5.0 with the C#  SWIG 
> bindings.
> 
>  
> 
> I am trying to determine the number of features within a geographic 
> bounding box for a specific time period.  The code I am using is shown below
> 
>  
> 
>     OSGeo.OGR.Feature feature;
> 
>     int numFeatures;
> 
>  
> 
>     string sqlString = "select count(*) from " + tableName + " where " + 
> queryDefString;

Bruce,

I don't think you mention the driver you are operating against.  I'm guessing
it is a real RDBMS?

There is a problem that when we do ExecuteSQL() against a real database
the spatial filter has to be applied *after* the query since we have no way
of inserting it into the actual SQL sent to the database.  That means we
can't alter the answer to the "SELECT COUNT(*)" part.  All we can do is filter
features coming back from that select which in this case will be a single
non-spatial attribute.

In fact, I'm not sure that the spatial filter is even honoured in this fashion
by all drivers, though it ought to be.

If you really want to do this, my suggestion is to set an attribute filter
with your WHERE statement, and a spatial filter on the OGRLayer, and then
do GetFeatureCount().  That is more likely to work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed May 28 12:40:10 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 28 12:40:33 2008
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.5.2 RC2 as 1.5.2
Message-ID: <483D8AEA.8020005@pobox.com>

Folks,

I have made one small change in 1.5 branch, so that the default
win32 build will be optimized instead of debug (and depending on
the non-redistributable debug runtime DLLs).   I have prepared a new
release candidate based on this:

   http://download.osgeo.org/gdal/gdal-1.5.2RC2.tar.gz
   http://download.osgeo.org/gdal/gdal152RC2.zip

I also generated this release on a different machine (at upload.osgeo.org
instead of my home machine), so I'm not sure if that will have any effects
or not.

I've done a bit of testing on the 1.5.1 RC 1 and it seemed otherwise ok to
me, so I'd like to move ahead to vote on the release:

Motion: GDAL 1.5.2 RC2 is adopted as the official GDAL 1.5.2 release.

Please vote after testing within the next two days, and we can issue the
official release on Friday.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bclay at ball.com  Wed May 28 13:16:49 2008
From: bclay at ball.com (Clay, Bruce)
Date: Wed May 28 13:21:34 2008
Subject: [gdal-dev] Problems doing spatial query with OGR
In-Reply-To: <483D7779.7070404@pobox.com>
References: <C482FF98AE985A47B8C982FD429C9E34FEFEC2@daytonmsg2k3.AERO.BALL.COM>
	<483D7779.7070404@pobox.com>
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFEC3@daytonmsg2k3.AERO.BALL.COM>

Frank:
  Thanks for your reply.  I did the Luke Skywalker thing and used the
source based on your input.

I did forget to mention that I am working with Oracle Spatial.

It seems that the ExecuteSql overload that contains the spatial filter
is only called if the dialect is set to "OGRSQL".  Making that change
apparently requires others.

I can not use the "BETWEEN" statement with the date field and I can not
find a date format that works with the WHERE clause.  For some reason
the data type in OGR space is OFTString but it is DATE in Oracle space.
If I use the "generic" dialect I can do date comparisons.  My guess
along with some of the odd Oracle error messages that I am receiving is
that is causing at least part of the problem.

I think the spatial filter might actually have worked because the
returned feature count was lower but I could not tell for sure because I
could not get the where clause to be accepted.

Is there a way to make date/time comparisons in the OGR SQL dialect?

Bruce


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, May 28, 2008 11:17 AM
To: Clay, Bruce
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Problems doing spatial query with OGR

Clay, Bruce wrote:
> Environment: Windows XP Visual Studio 2005, GDAL 1.5.0 with the C#
SWIG 
> bindings.
> 
>  
> 
> I am trying to determine the number of features within a geographic 
> bounding box for a specific time period.  The code I am using is shown
below
> 
>  
> 
>     OSGeo.OGR.Feature feature;
> 
>     int numFeatures;
> 
>  
> 
>     string sqlString = "select count(*) from " + tableName + " where "
+ 
> queryDefString;

Bruce,

I don't think you mention the driver you are operating against.  I'm
guessing
it is a real RDBMS?

There is a problem that when we do ExecuteSQL() against a real database
the spatial filter has to be applied *after* the query since we have no
way
of inserting it into the actual SQL sent to the database.  That means we
can't alter the answer to the "SELECT COUNT(*)" part.  All we can do is
filter
features coming back from that select which in this case will be a
single
non-spatial attribute.

In fact, I'm not sure that the spatial filter is even honoured in this
fashion
by all drivers, though it ought to be.

If you really want to do this, my suggestion is to set an attribute
filter
with your WHERE statement, and a spatial filter on the OGRLayer, and
then
do GetFeatureCount().  That is more likely to work.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
From warmerdam at pobox.com  Wed May 28 14:40:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 28 14:40:38 2008
Subject: [gdal-dev] Problems doing spatial query with OGR
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFEC3@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFEC2@daytonmsg2k3.AERO.BALL.COM>
	<483D7779.7070404@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E34FEFEC3@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <483DA715.1000505@pobox.com>

Clay, Bruce wrote:
> I can not use the "BETWEEN" statement with the date field and I can not
> find a date format that works with the WHERE clause.  For some reason
> the data type in OGR space is OFTString but it is DATE in Oracle space.
> If I use the "generic" dialect I can do date comparisons.  My guess
> along with some of the odd Oracle error messages that I am receiving is
> that is causing at least part of the problem.

Bruce,

I believe there is an open ticket on OGR's OCI driver not recognising
the date type, so it falls back to the generic string handling.

> I think the spatial filter might actually have worked because the
> returned feature count was lower but I could not tell for sure because I
> could not get the where clause to be accepted.
> 
> Is there a way to make date/time comparisons in the OGR SQL dialect?

No.  Even if we had the fields as a proper date in OGR, the OGR SQL
dialect does not support any operations on dates as far as I know.

You might want to just explicitly encode the spatial query into your
Oracle WHERE clause if you are only going to be working against
the oracle backend.

If you aren't familiar with oracle spatial filters, the following
code snippet might be helpful.

         oWHERE.Append( " WHERE sdo_filter(" );
         oWHERE.Append( pszGeomName );
         oWHERE.Append( ", MDSYS.SDO_GEOMETRY(2003," );
         if( nSRID == -1 )
             oWHERE.Append( "NULL" );
         else
             oWHERE.Appendf( 15, "%d", nSRID );
         oWHERE.Append( ",NULL," );
         oWHERE.Append( "MDSYS.SDO_ELEM_INFO_ARRAY(1,1003,1)," );
         oWHERE.Append( "MDSYS.SDO_ORDINATE_ARRAY(" );
         oWHERE.Appendf( 600,
                 "%.16g,%.16g,%.16g,%.16g,%.16g,%.16g,%.16g,%.16g,%.16g,%.16g",
                         sEnvelope.MinX, sEnvelope.MinY,
                         sEnvelope.MaxX, sEnvelope.MinY,
                         sEnvelope.MaxX, sEnvelope.MaxY,
                         sEnvelope.MinX, sEnvelope.MaxY,
                         sEnvelope.MinX, sEnvelope.MinY);
         oWHERE.Append( ")), 'querytype=window') = 'TRUE' " );

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From even.rouault at mines-paris.org  Wed May 28 14:46:06 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed May 28 14:46:19 2008
Subject: [gdal-dev] gdaladdo / BuildOverviews mismatch
In-Reply-To: <049001c8c09a$16dda460$4498ed20$@org>
References: <049001c8c09a$16dda460$4498ed20$@org>
Message-ID: <200805282046.07883.even.rouault@mines-paris.org>

Ben,

In my understanding and by 'grepping' a bit, AVERAGE_BIT2* are currently 
specific to GTiff and HFA drivers when wanting to create nice-looking 
overviews on 1bit rasters. But as both drivers can be used for external 
overviews for some drivers, it is probably of more general interest. Would 
need confirmation of that.

A quick look in the code seems to show that NO_REGEN is strictly internal to 
HFA driver.

MODE is completely unimplemented and should be removed from the docs, but in 
ticket #2347 there's a patch that provides an implementation, so maybe it 
will go in the code some day...

AVERAGE_MP seems to be implemented in overview.cpp, so the question is "is the 
implementation broken ?" or "is the mention in the doc that it must not to be 
used obsolete ?" I don't know...
I've never use AVERAGE_MAGPHASE too, so I don't know its status too. None of 
them are tested in the autotest suite, so that would be a great addition.

Well, anyway you can create a ticket in Trac if you wish and attach patches 
for the various documentation fixes.

Even

Le Wednesday 28 May 2008 10:09:00 Ben Discoe, vous avez ?crit?:
> I am trying to figure out exactly what options exist for overlays, and the
> documentation has some problems.
>
> For the application gdaladdo, documented here:
> http://www.gdal.org/gdaladdo.html
>
> It says the resampling methods are "nearest, average, average_mp,
> average_magphase, mode", with "average_mp" and "mode" not to be used.
>
> In the underlying function GDALDataset::BuildOverviews:
> http://www.gdal.org/classGDALDataset.html
>
> It says the resampling methods are "NEAREST", "AVERAGE" or "MODE".
>
> It seems these are not in agreement.  In the source code itself (gdal
> 1.5.1, overview.cpp) there are mentions of:
>
> 	"NEAR*"
> 	"AVER*"
> 	"AVERAGE_MAGPHASE"
> 	"AVERAGE_BIT2*"
> 	"AVERAGE_BIT2GRAYSCALE"
> 	"AVERAGE_BIT2GRAYSCALE_MINISWHITE"
> 	"AVERAGE_MP"
> 	"NO_REGEN:"
>
> It seems that both the developer and end-user documentation needs updating
> to reflect the actual options available.  E.g. adding and explaining the
> BIT2 options and removing MODE.  gdaladdo should also state what the
> default method is (i had to read the source code to find out it is
> "nearest".)
>
> Do these sort of doc fixes need to be logged in Trac, or is there some
> other way they get done?
>
> Thanks,
> Ben
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jluis at ualg.pt  Wed May 28 14:56:33 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed May 28 14:56:42 2008
Subject: [gdal-dev] gdalwarp trunk and FWtools giving different results
In-Reply-To: <483D714D.2050200@ualg.pt>
References: <483D714D.2050200@ualg.pt>
Message-ID: <483DAAE1.9070009@ualg.pt>

Testing with RC2 shows that the wrong result persists like with the 
trunk version.

with a small variation now
gdalwarp -s_srs "+proj=merc +R=6371008.7714" -t_srs "+proj=latlong 
+datum=WGS84" alg.tiff alg_geo.tiff

I have put the file at
ftp.ualg.pt/users/jluis/alg.tiff

Shell I file a ticket saying that gdalwarp is broken when converting 
from Mercator?

Joaquim Luis

> Hi,
>
> I am very puzzled with this difference between the outputs of gdalwarp 
> form a couple of days old Trunk version versus FWtools 2.2.0
>
> In both cases the command is the following
> gdalwarp -s_srs "+proj=merc +R=6371008.7714" -t_srs EPSG:4326 alg.tiff 
> alg_geo.tiff
>
> but the trunk version has
>
> Upper Left  (  -8.0862815,  37.3460021) (  8d 5'10.61"W, 37d20'45.61"N)
> Lower Left  (  -8.0862815,  37.0644230) (  8d 5'10.61"W, 37d 3'51.92"N)
> Upper Right (  -7.7343076,  37.3460021) (  7d44'3.51"W, 37d20'45.61"N)
> Lower Right (  -7.7343076,  37.0644230) (  7d44'3.51"W, 37d 3'51.92"N)
> Center      (  -7.9102945,  37.2052125) (  7d54'37.06"W, 37d12'18.77"N)
>
> whilst  FW
>
> Upper Left  (  -8.0862815,  37.1605907) (  8d 5'10.61"W, 37d 9'38.13"N)
> Lower Left  (  -8.0862815,  36.8792107) (  8d 5'10.61"W, 36d52'45.16"N)
> Upper Right (  -7.7339340,  37.1605907) (  7d44'2.16"W, 37d 9'38.13"N)
> Lower Right (  -7.7339340,  36.8792107) (  7d44'2.16"W, 36d52'45.16"N)
> Center      (  -7.9101077,  37.0199007) (  7d54'36.39"W, 37d 1'11.64"N)
>
> Note the differences in latitude.
> The FW solution, as far as I can tell from plotting a coastline, is 
> the correct solution.
>
> What can explain those differences.
> NOTE, I do have GDAL_DATA pointing to the SVN data directory
>
> Joaquim Luis
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From warmerdam at pobox.com  Wed May 28 15:19:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed May 28 15:19:44 2008
Subject: [gdal-dev] gdalwarp trunk and FWtools giving different results
In-Reply-To: <483DAAE1.9070009@ualg.pt>
References: <483D714D.2050200@ualg.pt> <483DAAE1.9070009@ualg.pt>
Message-ID: <483DB035.70108@pobox.com>

Joaquim Luis wrote:
> Testing with RC2 shows that the wrong result persists like with the 
> trunk version.
> 
> with a small variation now
> gdalwarp -s_srs "+proj=merc +R=6371008.7714" -t_srs "+proj=latlong 
> +datum=WGS84" alg.tiff alg_geo.tiff
> 
> I have put the file at
> ftp.ualg.pt/users/jluis/alg.tiff
> 
> Shell I file a ticket saying that gdalwarp is broken when converting 
> from Mercator?

Joaquim,

I suspect the problem is that your source coordinate system has no
defined earth model that OGRSpatialReference understands.  Is the
+R parameter defining the radius for a spherical earth?

If so, you could file a ticket asking that
OGRSpatialReference::importFromProj4() be improved to support this
parameter. But the work around is to just define the sphere with
+a and +b which are supported.

-s_srs "+proj=merc +a=6371008.7714 +b=6371008.7714"

Or perhaps I'm on the wrong track, in which case a ticket would also
be a good idea.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Wed May 28 16:09:21 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed May 28 16:09:24 2008
Subject: [gdal-dev] Problems doing spatial query with OGR
In-Reply-To: <483DA715.1000505@pobox.com>
References: <C482FF98AE985A47B8C982FD429C9E34FEFEC2@daytonmsg2k3.AERO.BALL.COM>
	<483D7779.7070404@pobox.com>
	<C482FF98AE985A47B8C982FD429C9E34FEFEC3@daytonmsg2k3.AERO.BALL.COM>
	<483DA715.1000505@pobox.com>
Message-ID: <f3b73b7d0805281309g4b121de6q7b0c5496a9772bc2@mail.gmail.com>

2008/5/28 Frank Warmerdam <warmerdam@pobox.com>:
>
> I believe there is an open ticket on OGR's OCI driver not recognising
> the date type, so it falls back to the generic string handling.
>

I've already implemented in the trunk that the OCI date types are
converted to the corresponding OGR date type, however I'm hesitant to
think that this kind of change should be backported to the stable
branch. Anyway I couldn't find the corresponding ticket, probably I've
missed creating one ;-)

http://trac.osgeo.org/gdal/changeset/14363

Best regards,

Tamas
From jluis at ualg.pt  Wed May 28 16:59:59 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed May 28 17:00:04 2008
Subject: [gdal-dev] gdalwarp trunk and FWtools giving different results
In-Reply-To: <483DB035.70108@pobox.com>
References: <483D714D.2050200@ualg.pt> <483DAAE1.9070009@ualg.pt>
	<483DB035.70108@pobox.com>
Message-ID: <483DC7CF.20400@ualg.pt>


> I suspect the problem is that your source coordinate system has no
> defined earth model that OGRSpatialReference understands.  Is the
> +R parameter defining the radius for a spherical earth?
>
> If so, you could file a ticket asking that
> OGRSpatialReference::importFromProj4() be improved to support this
> parameter. But the work around is to just define the sphere with
> +a and +b which are supported.
>
> -s_srs "+proj=merc +a=6371008.7714 +b=6371008.7714"
>
> Or perhaps I'm on the wrong track, in which case a ticket would also 
> be a good idea.

Frank,
I used gdal_translate to create a new file with a coordinate system, 
also tried the +a & +b solution, but nothing changed.
The result is still wrong.
I filed a ticket where emphasis is also put on the fact that FWtools 
2.2.0 (a quite recent one) gdalwarp is producing a correct result.

Joaquim

From mariusjigmond at hotmail.com  Wed May 28 22:27:01 2008
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Wed May 28 22:27:04 2008
Subject: [gdal-dev] GDALINFO fails with large .tif raster
Message-ID: <BAY142-W484F70B130BA9F31C06539B2BF0@phx.gbl>



I am still struggling with this issue and I have a bit more
information. One, Fedora 9 did not work on my new motherboard. I ran
two different strace's on gdalinfo. One on the system that gdalinfo can
read the raster, and the other on the system where gdalinfo fails.
Something interesting was revealed at the end of the strace:



1. Working GDALINFO strace says:

open("/media/hdb7/bands123.tif", O_RDONLY) = -1 EFBIG (File too large)


open("/media/hdb7/bands123.tif", O_RDONLY|O_LARGEFILE) = 3


This too me looks like it's trying to open the tif normally, it fails,
and then enables large file support. (it's just an (un)educated guess,
since I'm not a programmer)



2. Non-working GDALINFO strace says:

open("GISdata/Romania/LandsatMosaics/bands123.tif", O_RDONLY) = -1
EOVERFLOW (Value too large for defined data type)


stat64("GISdata/Romania/LandsatMosaics/bands123.tif/hdr.adf",
0xbf93e03c) = -1 ENOTDIR (Not a directory)


stat64("GISdata/Romania/LandsatMosaics/bands123.tif/HDR.ADF",
0xbf93e03c) = -1 ENOTDIR (Not a directory)


open("GISdata/Romania/LandsatMosaics/bands123.tif", O_RDONLY) = -1
EOVERFLOW (Value too large for defined data type)


write(2, "ERROR 4: `GISdata/Romania/Landsa"..., 99ERROR 4:
`GISdata/Romania/LandsatMosaics/bands123.tif' not recognised as a
supported file format.


>From what I can tell here (again, another (un)educated guess) it fails
to enable large support following the first read failure, as above.



Does this information help anyone? I would really like to get it to
work. I can provide any information you think it's useful. Thank you.



Marius



Even Rouault wrote:

  I've downloaded your TIFF image and tried it with different GDAL versions : 
GDAL SVN with internal libtiff, GDAL 1.5 branch with my system libtiff 
(3.8.2-7ubuntu2), and GDAL 1.4.1 (Ubuntu package libgdal1-1.4.0, 
1.4.1-6build1) with system libtiff, and all of them can gdalinfo successfully 
on it.

Have you tried to run 'tiffdump' on your TIFF image ?

Best regards,
Even

Le Friday 23 May 2008 01:04:09 Marius Jigmond, vous avez ?crit :
  
  
    I am posting this at Jachym Cepicky's suggestion as I had originally
posted it on the QGIS forum. I cannot open large (2.7 GB) .tif rasters
on a Ubuntu Hardy distribution. I have tried gdal 1.4.4 from Ubuntu,
1.5.1 from Jachym's repo, and the version distributed with the 2.0.6
version of FWTools. Here's some output:

marius@snowcrave:~$ gdalinfo GISdata/Romania/LandsatMosaics/bands123.tif
ERROR 4: `GISdata/Romania/LandsatMosaics/bands123.tif' not recognised as
a supported file format.

gdalinfo failed - unable to open
'GISdata/Romania/LandsatMosaics/bands123.tif'.

I know the raster file is fine because I can read it on a Ubuntu Gutsy
box with gdal 1.4.2. Here's the output from the Gutsy box:

marius@bigfoot:~$ gdalinfo /media/hdb7/bands123.tif
Driver: GTiff/GeoTIFF
Size is 31865, 30113
Coordinate System is:
PROJCS["WGS 84 / UTM zone 35N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",27],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32635"]]
Origin = (-126751.937963147182018,5526477.750000000000000)
Pixel Size = (28.500000000000000,-28.500000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15
18:42:01EDT $
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  ( -126751.938, 5526477.750) ( 18d19'38.37"E, 49d33'53.29"N)
Lower Left  ( -126751.938, 4668257.250) ( 19d26'39.47"E, 41d55'1.31"N)
Upper Right (  781400.562, 5526477.750) ( 30d54'46.05"E, 49d49'28.61"N)
Lower Right (  781400.562, 4668257.250) ( 30d24'13.74"E, 42d 6'57.36"N)
Center      (  327324.312, 5097367.500) ( 24d46'10.68"E, 46d 0'29.21"N)
Band 1 Block=31865x1 Type=Byte, ColorInterp=Gray
Band 2 Block=31865x1 Type=Byte, ColorInterp=Undefined
Band 3 Block=31865x1 Type=Byte, ColorInterp=Undefined

On the Hardy box I have encrypted ext3 partitions, while on the Gutsy
they are unencrypted ext3. I placed the raster on an unencrypted
partition, but that didn't help. Gdalinfo works with smaller (900 MB)
.tif rasters on the Hardy box. I look forward to any suggestions you
might have. The QGIS post can be accesed here:
http://forum.qgis.org/viewtopic.php?f=2&t=783. Thanks.

Marius


_________________________________________________________________
Keep your kids safer online with Windows Live Family Safety.
http://www.windowslive.com/family_safety/overview.html?ocid=TXT_TAGLM_WL_Re
fresh_family_safety_052008
    
  
  



  




_________________________________________________________________
Give to a good cause with every e-mail. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?souce=EML_WL_ GoodCause
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080528/9d3a9b91/attachment.html
From rezso at rdsor.ro  Wed May 28 23:20:59 2008
From: rezso at rdsor.ro (Balint Cristian)
Date: Wed May 28 23:41:14 2008
Subject: [gdal-dev] GDALINFO fails with large .tif raster
In-Reply-To: <BAY142-W484F70B130BA9F31C06539B2BF0@phx.gbl>
References: <BAY142-W484F70B130BA9F31C06539B2BF0@phx.gbl>
Message-ID: <200805290620.59286.rezso@rdsor.ro>

On Thursday 29 May 2008 05:27:01 am Marius Jigmond wrote:
> I am still struggling with this issue and I have a bit more
> information. One, Fedora 9 did not work on my new motherboard. I ran
> two different strace's on gdalinfo. One on the system that gdalinfo can
> read the raster, and the other on the system where gdalinfo fails.
> Something interesting was revealed at the end of the strace:
>
>
>
> 1. Working GDALINFO strace says:
>
> open("/media/hdb7/bands123.tif", O_RDONLY) = -1 EFBIG (File too large)

Hello Marius,

 On F9 there is no BigTIFF support only clasic GeoTIFF,
hence your strace result. My feeling is that you have
there a BigTIFF file.

  If you really want, i can ship you a custom 
libgeotiff+libtiff+gdal in form of 3 rpm package which 
support BigTIFF for fedora 9, but  off-list.


/cristian.
From arb at sat.dundee.ac.uk  Thu May 29 05:06:15 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Thu May 29 05:09:58 2008
Subject: [gdal-dev] Cannot build on linux
Message-ID: <op.ubwrkpwpqw3wu1@titan>

Hello

I'm having trouble building gdal on linux, seemingly because of hdf/netcdf clashes.  On a computer with both installed the build fails.  On a computer with neither installed the build fails.  Configuring with hdf and netcdf explicitly disabled still fails.

Andrew

From dany.geotools at gmail.com  Thu May 29 05:15:45 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Thu May 29 05:15:47 2008
Subject: [gdal-dev] Cannot build on linux
In-Reply-To: <op.ubwrkpwpqw3wu1@titan>
References: <op.ubwrkpwpqw3wu1@titan>
Message-ID: <7221db410805290215n6a4c4040h38bbb41c1d48fa3d@mail.gmail.com>

Hi Andrew,
can you give us some more details about your problem?

- Linux distribution
- Gdal version
- Error message/log/etc

This will help us to help you :)

Regards,
Daniele

On Thu, May 29, 2008 at 11:06 AM, Andrew Brooks <arb@sat.dundee.ac.uk>
wrote:

> Hello
>
> I'm having trouble building gdal on linux, seemingly because of hdf/netcdf
> clashes.  On a computer with both installed the build fails.  On a computer
> with neither installed the build fails.  Configuring with hdf and netcdf
> explicitly disabled still fails.
>
> Andrew
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax: +39 0584983027
mob: +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080529/00ea3be4/attachment.html
From mateusz at loskot.net  Thu May 29 05:22:43 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu May 29 05:22:49 2008
Subject: [gdal-dev] Cannot build on linux
In-Reply-To: <7221db410805290215n6a4c4040h38bbb41c1d48fa3d@mail.gmail.com>
References: <op.ubwrkpwpqw3wu1@titan>
	<7221db410805290215n6a4c4040h38bbb41c1d48fa3d@mail.gmail.com>
Message-ID: <CB0798DE-0A38-4A41-B4E9-8450A1618224@loskot.net>

On May 29, 2008, at 11:15 AM, Daniele Romagnoli wrote:
> Hi Andrew,
> can you give us some more details about your problem?
>
> - Linux distribution
> - Gdal version
> - Error message/log/etc
>
> This will help us to help you :)


Additionally, I'd suggest Andrew to take a look at building hints  
related to HDF and NetCDF formats, in GDAL Wiki:

http://trac.osgeo.org/gdal/wiki/NetCDF
http://trac.osgeo.org/gdal/wiki/HDF

-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org




From arb at sat.dundee.ac.uk  Thu May 29 06:35:35 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Thu May 29 06:35:38 2008
Subject: [gdal-dev] Cannot build on linux
In-Reply-To: <op.ubwrkpwpqw3wu1@titan>
References: <op.ubwrkpwpqw3wu1@titan>
Message-ID: <op.ubwvplttqw3wu1@titan>

Sorry I was too hasty and hadn't attached the messages before sending!

One box has: HDF-4.2r1-4mdk and netcdf-devel-3.6.1-0.beta3.1mdk, the other has neither.

The box with both gives errors like:
/usr/lib/libnetcdf.a(attr.o): In function `NC_findattr':
attr.c:(.text+0x690): multiple definition of `NC_findattr'
/usr/lib/libmfhdf.a(attr.o):attr.c:(.text+0x1a0): first defined here
/usr/bin/ld: Warning: size of symbol `NC_findattr' changed from 130
in /usr/lib/libmfhdf.a(attr.o) to 179 in /usr/lib/libnetcdf.a(attr.o)

The box with neither gives errors like:
gdal-1.5.2/.libs/libgdal.so: undefined reference to `nc_open'
gdal-1.5.2/.libs/libgdal.so: undefined reference to `Vinitialize'
gdal-1.5.2/.libs/libgdal.so: undefined reference to `GRendaccess'
gdal-1.5.2/.libs/libgdal.so: undefined reference to `SDfindattr'
gdal-1.5.2/.libs/libgdal.so: undefined reference to `XML_SetElementHandler'

I've tried both of these and get the same result:
./configure --without-expat --without-hdf4 --without-hdf5 --without-netcdf
  ./configure --with-expat=no --with-hdf4=no --with-hdf5=no --with-netcdf=no

Since FWtools is no longer being maintained I fear I'm going to have to
replicate its whole build process in order to produce an up-to-date set of
programs with equivalent functionality!

Andrew
From tutey at o2.pl  Thu May 29 11:39:12 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Thu May 29 11:39:25 2008
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.5.2 RC2 as 1.5.2
In-Reply-To: <483D8AEA.8020005@pobox.com>
References: <483D8AEA.8020005@pobox.com>
Message-ID: <483ECE20.8040604@o2.pl>

Hi All

Are there chances that this fix [1] is included in 1.5.2? The issue is 
pretty nasty as it disables SRS matching for software that depend on GDAL.

[1]http://trac.osgeo.org/gdal/ticket/2036

Maciek
From mrouault at csir.co.za  Thu May 29 13:20:34 2008
From: mrouault at csir.co.za (Marjolaine Rouault)
Date: Thu May 29 13:21:04 2008
Subject: [gdal-dev] Reading Meris N1 data
Message-ID: <483F0206020000CC00007E4D@cs-emo.csir.co.za>

Hi,

I am new to gdal and I am trying to read Level 2 Meris N1 data using the gdal module in python. I can see with gdal that there are 15 bands but I do not know how to access the datasets such as Algal1, Algal2 etc... Has anyone done that and would be able to provide me with pointers?

Thanks.



-- 
This message is subject to the CSIR's copyright terms and conditions, e-mail legal notice, and implemented Open Document Format (ODF) standard. 
The full disclaimer details can be found at http://www.csir.co.za/disclaimer.html.

This message has been scanned for viruses and dangerous content by MailScanner, 
and is believed to be clean.  MailScanner thanks Transtec Computers for their support.

From warmerdam at pobox.com  Thu May 29 13:24:00 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 29 13:24:21 2008
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.5.2 RC2 as 1.5.2
In-Reply-To: <483ECE20.8040604@o2.pl>
References: <483D8AEA.8020005@pobox.com> <483ECE20.8040604@o2.pl>
Message-ID: <483EE6B0.6000700@pobox.com>

Maciej Sieczka wrote:
> Hi All
> 
> Are there chances that this fix [1] is included in 1.5.2? The issue is 
> pretty nasty as it disables SRS matching for software that depend on GDAL.
> 
> [1]http://trac.osgeo.org/gdal/ticket/2036
> 
> Maciek

Maciek,

That did not make it into RC2, but it ought to be in 1.5.2.

I'm voting -1 on adopting RC2, and I will prepare an RC3 today.  Mateusz
has now backported the change into 1.5 branch.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From javierurien+gdal at gmail.com  Thu May 29 13:50:49 2008
From: javierurien+gdal at gmail.com (Javier Urien)
Date: Thu May 29 13:50:52 2008
Subject: [gdal-dev] GDAL Data dir and installed application
Message-ID: <d2595b180805291050m3ae556b7jacfff1d0150490c5@mail.gmail.com>

Hello,

   I am developing an application that uses GDAL. I compiled with
MinGW+Msys on windows. I use proj4 as an external dll.
   When I install the application on a clean machine (ie not
developement), I do not get all the georreference information I do on
the development installation. I found that Gdal apps use the GDAL_DATA
variable and so I tried setting it to the installation directory
containing all the .csv gdal provides, but with no success.

   Any hints on how to accomplish this?

Regards.
From plists at prometheus.org.yu  Thu May 29 15:23:56 2008
From: plists at prometheus.org.yu (Attila Csipa)
Date: Thu May 29 15:23:04 2008
Subject: [gdal-dev] ogr2ogr gml driver writing blob fields
Message-ID: <200805292123.57127.plists@prometheus.org.yu>

I tried to convert some of my postgresql tables into GML (using ogr2ogr from 
gdal 1.5.1 on linux), but I've noticed something odd - the features in the 
table have a blob column (a small image representing the feature) have that 
column written down in hex notation (not a problem) and truncated at around 
35 bytes (which is a problem). So, the question is if there is a way to tell 
the GML driver not to truncate these fields ? I've looked for some dsco/lco 
field magic in but without much luck... Any recommendations ?
From warmerdam at pobox.com  Thu May 29 15:41:55 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 29 15:42:13 2008
Subject: [gdal-dev] ogr2ogr gml driver writing blob fields
In-Reply-To: <200805292123.57127.plists@prometheus.org.yu>
References: <200805292123.57127.plists@prometheus.org.yu>
Message-ID: <483F0703.8010606@pobox.com>

Attila Csipa wrote:
> I tried to convert some of my postgresql tables into GML (using ogr2ogr from 
> gdal 1.5.1 on linux), but I've noticed something odd - the features in the 
> table have a blob column (a small image representing the feature) have that 
> column written down in hex notation (not a problem) and truncated at around 
> 35 bytes (which is a problem). So, the question is if there is a way to tell 
> the GML driver not to truncate these fields ? I've looked for some dsco/lco 
> field magic in but without much luck... Any recommendations ?

Attila,

There is no mechanism to convert these to GML without adjustments to the
GML writer.  I imagine the driver is calling GetFieldAsString() which
for blobs returns the truncated result you are seeing.  It is intended to
give some human readable clues about the BLOB while not overwhelming the
output in applications like ogrinfo.

If we implemented specific binary field support in the GML driver this
could be corrected.

However, I'm not personally in a big rush to implement this feature.  I'm
not sure if anyone would pick it up if you filed a ticket.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From tutey at o2.pl  Thu May 29 16:31:13 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Thu May 29 16:31:12 2008
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.5.2 RC2 as 1.5.2
In-Reply-To: <483EE6B0.6000700@pobox.com>
References: <483D8AEA.8020005@pobox.com> <483ECE20.8040604@o2.pl>
	<483EE6B0.6000700@pobox.com>
Message-ID: <483F1291.9070902@o2.pl>

Frank Warmerdam pisze:

> That did not make it into RC2, but it ought to be in 1.5.2.
> 
> I'm voting -1 on adopting RC2, and I will prepare an RC3 today.  Mateusz
> has now backported the change into 1.5 branch.

Thanks very much to you both!

Regards,
Maciek
From warmerdam at pobox.com  Thu May 29 16:36:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 29 16:36:33 2008
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.5.2 RC3 as 1.5.2
Message-ID: <483F13BD.1060604@pobox.com>


Folks,

I have a new release candidate up that includes the CPLAtof() fixes
(#2036 related) as well as some GeoJSON improvements.

   http://download.osgeo.org/gdal/gdal-1.5.2RC3.tar.gz
   http://download.osgeo.org/gdal/gdal152RC3.zip

Motion: GDAL 1.5.2 RC2 is adopted as the official GDAL 1.5.2 release.

Please vote after testing within the next two days, and we can issue the
official release on Tuesday (I'm out Monday).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Shawn.Gong at drdc-rddc.gc.ca  Thu May 29 17:15:06 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Thu May 29 17:15:14 2008
Subject: [gdal-dev] gdal 1.5.0 and 1.5.1 build on Solaris 9
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E120085@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <DF1471B5C308B346BF5A2AEA00C5615E120027@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<DF1471B5C308B346BF5A2AEA00C5615E120085@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E12009E@ottawaex02.Ottawa.drdc-rddc.gc.ca>

hi list,

I have been trying to build gdal 1.5.1 build on Solaris 9 (SPARC, gcc
3.4.6) without success.
The last success build on Solaris 9 is gdal 1.4.4 (done last week). 
However when I used the exactly same setenv PATH, LD_LIBRARY_PATH and
LDFLAGS="-lrt -lm -lnsl" on gdal 1.5.0 and 1.5.1, there were erros.

The main reason for the newer gdal is that our Convair 580 PolSAR data
is quite large. It causes gdal I/O problem on Solaris 9 (but ok on Linux
and Windows). I was told that gdal 1.5.1 has fixed this problem. Would
someone please confirm this, otherwise I don't have to spend time on
building it.

gdal 1.5.0 "make" and "make install" seemed finished fine. But unlike
1.4.4 or 1.5.1 there is no .libs/ created under gdal-1.5.0/pymod, and
there is no "_gdalmudule.*" in
[install_dir]/lib/python2.3/site-packages/ As results, "import gdal"
failed right away.
I attached the gmake.log and gmakeinstall.log for gdal 1.5.0.

A gdal 1.5.1, please see the previous email below.
"tiff_driver.CreateCopy( fname, vrtds, ..." causes bus error - core dump

thanks for your help,
Shawn


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Gong, Shawn
(Contractor)
Sent: Wednesday, May 21, 2008 1:17 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] gdal 1.5.1 Bus Error - core dump on Solaris 9

hi list,

I have been using gdal 1.4, and have recently built gdal 1.5.1 for its
large image support.
Gdal 1.5.1 and OpenEV 1.8 building was fine. Then I encounter Bus Error
- core dump on Solaris 9.
I have tracked it down to where the Bus Error occurred:
  gtiff_driver = gdal.GetDriverByName( 'GTiff' )
  self.new_ds = gtiff_driver.CreateCopy( fname, vrtds, ...
A "core" file is generated and kept growing to near half GB.

I have followed Frank's advices of using -fPIC during compiling, and
rebuilt Gdal 1.5.1 from scratch. But I still get the same error.

Help is appreciated,
Shawn

-------------- next part --------------
A non-text attachment was scrubbed...
Name: make.zip
Type: application/x-zip-compressed
Size: 35338 bytes
Desc: make.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080529/e87d179b/make-0001.bin
From zhaops at hotmail.com  Thu May 29 17:50:54 2008
From: zhaops at hotmail.com (peisheng)
Date: Thu May 29 18:10:07 2008
Subject: [gdal-dev] Re: Cannot build on linux
References: <op.ubwrkpwpqw3wu1@titan> <op.ubwvplttqw3wu1@titan>
Message-ID: <loom.20080529T214400-951@post.gmane.org>


I also can not compiling GDAL. 

I want to install all GDAL, NetCDF and HDF under my own directory, then use

./configure --without-ogdi
--with-netcdf=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
--with-proj=/usr/local
--with-hdf4=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
--with-hdf5=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs --without-python
--without-perl --prefix=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
--with-libtiff=internal

But I got some errors:

/usr/local/lib/libnetcdf.a(attr.o)(.text+0x366): In function `NC_findattr':
: multiple definition of `NC_findattr'
/usr/local//lib/libmfhdf.a(attr.o)(.text+0x124): first defined here
/usr/bin/ld: Warning: size of symbol `NC_findattr' changed from 121 in
/usr/local//lib/libmfhdf.a(attr.o) to 133 in /usr/local/lib/libnetcdf.a(attr.o)
/usr/local/lib/libnetcdf.a(putget.o)(.text+0x0): In function `nctypelen':
: multiple definition of `nctypelen'
/usr/local//lib/libmfhdf.a(array.o)(.text+0xec): first defined here
/usr/bin/ld: Warning: size of symbol `nctypelen' changed from 103 in
/usr/local//lib/libmfhdf.a(array.o) to 53 in /usr/local/lib/libnetcdf.a(putget.o)
/usr/local/lib/libnetcdf.a(nc.o)(.text+0x67): In function `NC_check_id':
: multiple definition of `NC_check_id'
/usr/local//lib/libmfhdf.a(file.o)(.text+0x0): first defined here
/usr/bin/ld: Warning: size of symbol `NC_check_id' changed from 76 in
/usr/local//lib/libmfhdf.a(file.o) to 53 in /usr/local/lib/libnetcdf.a(nc.o)
/usr/local/lib/libnetcdf.a(var.o)(.text+0x47f): In function `NC_var_shape':
: multiple definition of `NC_var_shape'
/usr/local//lib/libmfhdf.a(var.o)(.text+0x1b0): first defined here
/usr/bin/ld: Warning: size of symbol `NC_var_shape' changed from 563 in
/usr/local//lib/libmfhdf.a(var.o) to 292 in /usr/local/lib/libnetcdf.a(var.o)
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/tools/gdaac/TS2/www/maptest/pzhao/gdal/gdal-1.5.1'
make: *** [check-lib] Error 2

It seems it is looking for netcdf and hdf in system directory, although I
specify to use netcdf and hdf located at my own directory





From ivan.lucena at pmldnet.com  Thu May 29 20:06:14 2008
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Lucena,=20Ivan?=)
Date: Thu May 29 20:06:17 2008
Subject: [gdal-dev] Re: Cannot build on linux
Message-ID: <20080530000614.12380.qmail@s466.sureserver.com>

I am not an specialist on that topic but I believe that you need to recompile the HDF libraries wihout NetCDF support in order to use the NetCDF driver. Maybe that is what "multiple definition" is about.

>  -------Original Message-------
>  From: peisheng <zhaops@hotmail.com>
>  Subject: [gdal-dev] Re: Cannot build on linux
>  Sent: May 29 '08 21:50
>  
>  
>  I also can not compiling GDAL.
>  
>  I want to install all GDAL, NetCDF and HDF under my own directory, then use
>  
>  ./configure --without-ogdi
>  --with-netcdf=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
>  --with-proj=/usr/local
>  --with-hdf4=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
>  --with-hdf5=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs --without-python
>  --without-perl --prefix=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
>  --with-libtiff=internal
>  
>  But I got some errors:
>  
>  /usr/local/lib/libnetcdf.a(attr.o)(.text+0x366): In function `NC_findattr':
>  : multiple definition of `NC_findattr'
>  /usr/local//lib/libmfhdf.a(attr.o)(.text+0x124): first defined here
>  /usr/bin/ld: Warning: size of symbol `NC_findattr' changed from 121 in
>  /usr/local//lib/libmfhdf.a(attr.o) to 133 in /usr/local/lib/libnetcdf.a(attr.o)
>  /usr/local/lib/libnetcdf.a(putget.o)(.text+0x0): In function `nctypelen':
>  : multiple definition of `nctypelen'
>  /usr/local//lib/libmfhdf.a(array.o)(.text+0xec): first defined here
>  /usr/bin/ld: Warning: size of symbol `nctypelen' changed from 103 in
>  /usr/local//lib/libmfhdf.a(array.o) to 53 in /usr/local/lib/libnetcdf.a(putget.o)
>  /usr/local/lib/libnetcdf.a(nc.o)(.text+0x67): In function `NC_check_id':
>  : multiple definition of `NC_check_id'
>  /usr/local//lib/libmfhdf.a(file.o)(.text+0x0): first defined here
>  /usr/bin/ld: Warning: size of symbol `NC_check_id' changed from 76 in
>  /usr/local//lib/libmfhdf.a(file.o) to 53 in /usr/local/lib/libnetcdf.a(nc.o)
>  /usr/local/lib/libnetcdf.a(var.o)(.text+0x47f): In function `NC_var_shape':
>  : multiple definition of `NC_var_shape'
>  /usr/local//lib/libmfhdf.a(var.o)(.text+0x1b0): first defined here
>  /usr/bin/ld: Warning: size of symbol `NC_var_shape' changed from 563 in
>  /usr/local//lib/libmfhdf.a(var.o) to 292 in /usr/local/lib/libnetcdf.a(var.o)
>  collect2: ld returned 1 exit status
>  make[1]: *** [libgdal.la] Error 1
>  make[1]: Leaving directory `/tools/gdaac/TS2/www/maptest/pzhao/gdal/gdal-1.5.1'
>  make: *** [check-lib] Error 2
>  
>  It seems it is looking for netcdf and hdf in system directory, although I
>  specify to use netcdf and hdf located at my own directory
>  
>  
>  
>  
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From zhaops at hotmail.com  Thu May 29 21:49:21 2008
From: zhaops at hotmail.com (zhao peisheng)
Date: Thu May 29 21:50:24 2008
Subject: [gdal-dev] Re: Cannot build on linux
In-Reply-To: <20080530000614.12380.qmail@s466.sureserver.com>
References: <20080530000614.12380.qmail@s466.sureserver.com>
Message-ID: <BAY121-W399CB62BF10EFDD6E7DD5AD0BE0@phx.gbl>

I recomplie the HDF without NetCDF support under my own directory. In configuration of GDAL, I specify to use these recompiled HDF and NetCDF. But the error still shows using the HDF and NetCDF under system directory, not the one under my own directory.



> From: ivan.lucenao@pmldnet.com
> To: zhaops@hotmail.com; gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Re: Cannot build on linux
> Date: Fri, 30 May 2008 00:06:14 +0000
> 
> I am not an specialist on that topic but I believe that you need to recompile the HDF libraries wihout NetCDF support in order to use the NetCDF driver. Maybe that is what "multiple definition" is about.
> 
> >  -------Original Message-------
> >  From: peisheng <zhaops@hotmail.com>
> >  Subject: [gdal-dev] Re: Cannot build on linux
> >  Sent: May 29 '08 21:50
> >  
> >  
> >  I also can not compiling GDAL.
> >  
> >  I want to install all GDAL, NetCDF and HDF under my own directory, then use
> >  
> >  ./configure --without-ogdi
> >  --with-netcdf=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
> >  --with-proj=/usr/local
> >  --with-hdf4=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
> >  --with-hdf5=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs --without-python
> >  --without-perl --prefix=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
> >  --with-libtiff=internal
> >  
> >  But I got some errors:
> >  
> >  /usr/local/lib/libnetcdf.a(attr.o)(.text+0x366): In function `NC_findattr':
> >  : multiple definition of `NC_findattr'
> >  /usr/local//lib/libmfhdf.a(attr.o)(.text+0x124): first defined here
> >  /usr/bin/ld: Warning: size of symbol `NC_findattr' changed from 121 in
> >  /usr/local//lib/libmfhdf.a(attr.o) to 133 in /usr/local/lib/libnetcdf.a(attr.o)
> >  /usr/local/lib/libnetcdf.a(putget.o)(.text+0x0): In function `nctypelen':
> >  : multiple definition of `nctypelen'
> >  /usr/local//lib/libmfhdf.a(array.o)(.text+0xec): first defined here
> >  /usr/bin/ld: Warning: size of symbol `nctypelen' changed from 103 in
> >  /usr/local//lib/libmfhdf.a(array.o) to 53 in /usr/local/lib/libnetcdf.a(putget.o)
> >  /usr/local/lib/libnetcdf.a(nc.o)(.text+0x67): In function `NC_check_id':
> >  : multiple definition of `NC_check_id'
> >  /usr/local//lib/libmfhdf.a(file.o)(.text+0x0): first defined here
> >  /usr/bin/ld: Warning: size of symbol `NC_check_id' changed from 76 in
> >  /usr/local//lib/libmfhdf.a(file.o) to 53 in /usr/local/lib/libnetcdf.a(nc.o)
> >  /usr/local/lib/libnetcdf.a(var.o)(.text+0x47f): In function `NC_var_shape':
> >  : multiple definition of `NC_var_shape'
> >  /usr/local//lib/libmfhdf.a(var.o)(.text+0x1b0): first defined here
> >  /usr/bin/ld: Warning: size of symbol `NC_var_shape' changed from 563 in
> >  /usr/local//lib/libmfhdf.a(var.o) to 292 in /usr/local/lib/libnetcdf.a(var.o)
> >  collect2: ld returned 1 exit status
> >  make[1]: *** [libgdal.la] Error 1
> >  make[1]: Leaving directory `/tools/gdaac/TS2/www/maptest/pzhao/gdal/gdal-1.5.1'
> >  make: *** [check-lib] Error 2
> >  
> >  It seems it is looking for netcdf and hdf in system directory, although I
> >  specify to use netcdf and hdf located at my own directory
> >  
> >  
> >  
> >  
> >  
> >  _______________________________________________
> >  gdal-dev mailing list
> >  gdal-dev@lists.osgeo.org
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >  

_________________________________________________________________
Change the world with e-mail. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ChangeWorld
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080530/98c4a7ac/attachment.html
From warmerdam at pobox.com  Thu May 29 22:18:38 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu May 29 22:19:03 2008
Subject: [gdal-dev] GDAL Data dir and installed application
In-Reply-To: <d2595b180805291050m3ae556b7jacfff1d0150490c5@mail.gmail.com>
References: <d2595b180805291050m3ae556b7jacfff1d0150490c5@mail.gmail.com>
Message-ID: <483F63FE.8010101@pobox.com>

Javier Urien wrote:
> Hello,
> 
>    I am developing an application that uses GDAL. I compiled with
> MinGW+Msys on windows. I use proj4 as an external dll.
>    When I install the application on a clean machine (ie not
> developement), I do not get all the georreference information I do on
> the development installation. I found that Gdal apps use the GDAL_DATA
> variable and so I tried setting it to the installation directory
> containing all the .csv gdal provides, but with no success.
> 
>    Any hints on how to accomplish this?

Javier,

Is there any possibility the PROJ.DLL isn't being found?  Is it in the path?
You might try setting the CPL_DEBUG environment variable to ON to get more
information.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ivan.lucena at pmldnet.com  Thu May 29 22:37:18 2008
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Lucena,=20Ivan?=)
Date: Thu May 29 22:37:19 2008
Subject: [gdal-dev] Re: Cannot build on linux
Message-ID: <20080530023718.884.qmail@s466.sureserver.com>

Check the order of search path:

% g++ -print-search-dirs

I guess that the linker is getting to the wrong libmfhdf.a first because of the search directory precedence.

>  -------Original Message-------
>  From: zhao peisheng <zhaops@hotmail.com>
>  Subject: RE: [gdal-dev] Re: Cannot build on linux
>  Sent: May 30 '08 01:49
>  
>  I recomplie the HDF without NetCDF support under my own directory. In
>  configuration of GDAL, I specify to use these recompiled HDF and NetCDF.
>  But the error still shows using the HDF and NetCDF under system directory,
>  not the one under my own directory.
>  
>  
>  --------------------
>  > From: ivan.lucenao@pmldnet.com
>  > To: zhaops@hotmail.com; gdal-dev@lists.osgeo.org
>  > Subject: Re: [gdal-dev] Re: Cannot build on linux
>  > Date: Fri, 30 May 2008 00:06:14 +0000
>  >
>  > I am not an specialist on that topic but I believe that you need to
>  recompile the HDF libraries wihout NetCDF support in order to use the
>  NetCDF driver. Maybe that is what "multiple definition" is about.
>  >
>  > > -------Original Message-------
>  > > From: peisheng <zhaops@hotmail.com>
>  > > Subject: [gdal-dev] Re: Cannot build on linux
>  > > Sent: May 29 '08 21:50
>  > >
>  > >
>  > > I also can not compiling GDAL.
>  > >
>  > > I want to install all GDAL, NetCDF and HDF under my own directory,
>  then use
>  > >
>  > > ./configure --without-ogdi
>  > > --with-netcdf=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
>  > > --with-proj=/usr/local
>  > > --with-hdf4=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
>  > > --with-hdf5=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
>  --without-python
>  > > --without-perl --prefix=/tools/gdaac/TS2/www/maptest/pzhao/supportlibs
>  > > --with-libtiff=internal
>  > >
>  > > But I got some errors:
>  > >
>  > > /usr/local/lib/libnetcdf.a(attr.o)(.text+0x366): In function
>  `NC_findattr':
>  > > : multiple definition of `NC_findattr'
>  > > /usr/local//lib/libmfhdf.a(attr.o)(.text+0x124): first defined here
>  > > /usr/bin/ld: Warning: size of symbol `NC_findattr' changed from 121 in
>  > > /usr/local//lib/libmfhdf.a(attr.o) to 133 in
>  /usr/local/lib/libnetcdf.a(attr.o)
>  > > /usr/local/lib/libnetcdf.a(putget.o)(.text+0x0): In function
>  `nctypelen':
>  > > : multiple definition of `nctypelen'
>  > > /usr/local//lib/libmfhdf.a(array.o)(.text+0xec): first defined here
>  > > /usr/bin/ld: Warning: size of symbol `nctypelen' changed from 103 in
>  > > /usr/local//lib/libmfhdf.a(array.o) to 53 in
>  /usr/local/lib/libnetcdf.a(putget.o)
>  > > /usr/local/lib/libnetcdf.a(nc.o)(.text+0x67): In function
>  `NC_check_id':
>  > > : multiple definition of `NC_check_id'
>  > > /usr/local//lib/libmfhdf.a(file.o)(.text+0x0): first defined here
>  > > /usr/bin/ld: Warning: size of symbol `NC_check_id' changed from 76 in
>  > > /usr/local//lib/libmfhdf.a(file.o) to 53 in
>  /usr/local/lib/libnetcdf.a(nc.o)
>  > > /usr/local/lib/libnetcdf.a(var.o)(.text+0x47f): In function
>  `NC_var_shape':
>  > > : multiple definition of `NC_var_shape'
>  > > /usr/local//lib/libmfhdf.a(var.o)(.text+0x1b0): first defined here
>  > > /usr/bin/ld: Warning: size of symbol `NC_var_shape' changed from 563
>  in
>  > > /usr/local//lib/libmfhdf.a(var.o) to 292 in
>  /usr/local/lib/libnetcdf.a(var.o)
>  > > collect2: ld returned 1 exit status
>  > > make[1]: *** [libgdal.la] Error 1
>  > > make[1]: Leaving directory
>  `/tools/gdaac/TS2/www/maptest/pzhao/gdal/gdal-1.5.1'
>  > > make: *** [check-lib] Error 2
>  > >
>  > > It seems it is looking for netcdf and hdf in system directory,
>  although I
>  > > specify to use netcdf and hdf located at my own directory
>  > >
>  > >
>  > >
>  > >
>  > >
>  > > _______________________________________________
>  > > gdal-dev mailing list
>  > > gdal-dev@lists.osgeo.org
>  > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  > >
>  
>  
>  --------------------
>  Change the world with e-mail. [LINK:
>  http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ChangeWorld]
>  Join the i?m Initiative from Microsoft.
From javierurien+gdal at gmail.com  Thu May 29 23:15:26 2008
From: javierurien+gdal at gmail.com (Javier Urien)
Date: Thu May 29 23:15:28 2008
Subject: [gdal-dev] GDAL Data dir and installed application
In-Reply-To: <483F63FE.8010101@pobox.com>
References: <d2595b180805291050m3ae556b7jacfff1d0150490c5@mail.gmail.com>
	<483F63FE.8010101@pobox.com>
Message-ID: <d2595b180805292015g7f666869ob41bc72d04f5a6c5@mail.gmail.com>

On Thu, May 29, 2008 at 11:18 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Javier Urien wrote:
>>
>> Hello,
>>
>>   I am developing an application that uses GDAL. I compiled with
>> MinGW+Msys on windows. I use proj4 as an external dll.
>>   When I install the application on a clean machine (ie not
>> developement), I do not get all the georreference information I do on
>> the development installation. I found that Gdal apps use the GDAL_DATA
>> variable and so I tried setting it to the installation directory
>> containing all the .csv gdal provides, but with no success.
>>
>>   Any hints on how to accomplish this?
>
> Javier,
>
> Is there any possibility the PROJ.DLL isn't being found?  Is it in the path?
> You might try setting the CPL_DEBUG environment variable to ON to get more
> information.

proj.dll is in the same directory as the application (not in the path)
I will try setting the path, but it shouldn't really matter.

Regards.
From plists at prometheus.org.yu  Fri May 30 05:06:46 2008
From: plists at prometheus.org.yu (Attila Csipa)
Date: Fri May 30 05:27:22 2008
Subject: [gdal-dev] ogr2ogr gml driver writing blob fields
In-Reply-To: <483F0703.8010606@pobox.com>
References: <200805292123.57127.plists@prometheus.org.yu>
	<483F0703.8010606@pobox.com>
Message-ID: <200805301106.47171.plists@prometheus.org.yu>

On Thursday 29 May 2008 21.41:55 Frank Warmerdam wrote:
> > in the table have a blob column (a small image representing the feature)
> > have that column written down in hex notation (not a problem) and
> > truncated at around 35 bytes (which is a problem). So, the question is if
> > there is a way to tell the GML driver not to truncate these fields ? I've
> > looked for some dsco/lco field magic in but without much luck... Any
> > recommendations ?
>
> There is no mechanism to convert these to GML without adjustments to the
> GML writer.  I imagine the driver is calling GetFieldAsString() which
> for blobs returns the truncated result you are seeing.  It is intended to
> give some human readable clues about the BLOB while not overwhelming the
> output in applications like ogrinfo.
>
> If we implemented specific binary field support in the GML driver this
> could be corrected.
>
> However, I'm not personally in a big rush to implement this feature.  I'm
> not sure if anyone would pick it up if you filed a ticket.

Looking at the code it seems the reserved size for unknown widths (like BLOB) 
is hardcoded. Maybe a new GML_MAX_COLSIZE_ON_UNKNOWN_WIDTH sort of DSCO/LCO 
parameter could be introduced until proper handling of binary data is 
resolved ? I'd appreciate a shorter but logical name instead of my halfliner. 
I'll check more thoroughly the relevant parts of GDAL, if it's not too 
complex I'm willing to get my hands dirty with this (hopefully it will 
require less time than to do a binary wrapper which I'd have to do if I can't 
get around this gdal feature).
From arb at sat.dundee.ac.uk  Fri May 30 08:52:29 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri May 30 08:52:35 2008
Subject: [gdal-dev] Re: Cannot build on linux
In-Reply-To: <20080530000614.12380.qmail@s466.sureserver.com>
References: <20080530000614.12380.qmail@s466.sureserver.com>
Message-ID: <op.ubywprgcqw3wu1@titan>

On Fri, 30 May 2008 01:06:14 +0100, Lucena, Ivan <ivan.lucena@pmldnet.com> wrote:

> I am not an specialist on that topic but I believe that you need to recompile the HDF libraries wihout NetCDF support in order to use the NetCDF driver. Maybe that is what "multiple definition" is about.

OK, I've built HDF4, hdf5, netcdf myself (without netcdf inside HDF4).

Then configured using:
  ./configure --prefix=/usr/local/fwtools --with-netcdf=/usr/local/fwtools --with-hdf4=/usr/local/fwtools --with-hdf5=/usr/local/fwtools --with-curl=/usr/local/fwtools/bin/curl-config

Now I get this error compiling gdal/hdf5dataset.cpp:

/usr/local/fwtools/include/H5Gpublic.h: In static member function `static GDALDataset* HDF5Dataset::Open(GDALOpenInfo*)':
/usr/local/fwtools/include/H5Gpublic.h:77: error: too few arguments to function `hid_t H5Gopen2(hid_t, const char*, hid_t)'
hdf5dataset.cpp:243: error: at this point in file
/usr/local/fwtools/include/H5Gpublic.h: In function `herr_t HDF5CreateGroupObjs(hid_t, const char*, void*)':
/usr/local/fwtools/include/H5Gpublic.h:77: error: too few arguments to function `hid_t H5Gopen2(hid_t, const char*, hid_t)'

As I said before, I cannot configure gdal without any hdf or netcdf because it still tries to link to them anyway.

And others have pointed out that using your own path for them still tries to link with the system libraries!!!

How is everyone else building this thing successfully?

Andrew
From jluis at ualg.pt  Fri May 30 10:56:05 2008
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Fri May 30 10:56:16 2008
Subject: [gdal-dev] Re: Cannot build on linux
In-Reply-To: <op.ubywprgcqw3wu1@titan>
References: <20080530000614.12380.qmail@s466.sureserver.com>
	<op.ubywprgcqw3wu1@titan>
Message-ID: <20080530165605.1240428dyn75y000@wmail.ualg.pt>

Quoting Andrew Brooks <arb@sat.dundee.ac.uk>:

> On Fri, 30 May 2008 01:06:14 +0100, Lucena, Ivan  
> <ivan.lucena@pmldnet.com> wrote:
>
>> I am not an specialist on that topic but I believe that you need to  
>> recompile the HDF libraries wihout NetCDF support in order to use  
>> the NetCDF driver. Maybe that is what "multiple definition" is about.
>
> OK, I've built HDF4, hdf5, netcdf myself (without netcdf inside HDF4).
>
> Then configured using:
>   ./configure --prefix=/usr/local/fwtools  
> --with-netcdf=/usr/local/fwtools --with-hdf4=/usr/local/fwtools  
> --with-hdf5=/usr/local/fwtools  
> --with-curl=/usr/local/fwtools/bin/curl-config
>

>
> How is everyone else building this thing successfully?

Andrew,
You went even further than me. I'm trying to the same on OSX but I am  
not even able to convince it that I have hdf on board. I built HDF4  
and installed it at /usr/local. That resulted in two static libs  
libdf.a and libmfhdf.a (strange, on windows there are a couple more of  
dlls).

Now
./configure --with-netcdf --with-hdf4=/usr/local

results in:

configure: error: HDF4 support requested with arg /usr/local, but  
neither hdf4 nor mfhdf lib found

but libmfhdf.a as well as the netcdf libraries are there.

Not requesting a build with HDF works ok.

Joaquim Luis

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From grevedan at hotmail.com  Fri May 30 11:50:33 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Fri May 30 11:51:36 2008
Subject: [gdal-dev] Problem with libTiff on Solaris 10
Message-ID: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>



Greetings,

I am using the latest stable build, gdal-1.5.1 on a SPARC Solaris 10 64-bit system.  It is configured with the default drivers, but is using --with-jpeg=internal --with-libtiff=internal --with-geotiff=internal.  Using the 32-bit compiler options and libraries, I can successfully build libgdal.so and the utility programs.  However, when trying to do a gdal_translate from one simple uncompressed 3-band geotiff into another simple uncompressed 3-band geotiff, I get a "bus error" segfault.  Also, if the output tiff already exists I get two errors. "No space to read tiff directory" and "TiffReadDirectory: failed to read directory at offset 8". A quick google revealed two similiar errors, here and here. Diving into the debugger, the problem seems to lie in the tif_dirwrite.c, starting with line 755.  I believe it's due to _TIFFmalloc not allocating memory properly. The crash actual occurs on line 781, *(uint32*)n=(uint32)o->tdir_count;  

o->tdir_count is valid, but setting n to any value causes a segfault, as though TIFFmalloc did not allocate the whole requested 186 bytes. Any ideas?

<snip file=tif_dirwrite.c>
    dirmem=_TIFFmalloc(dirsize);
    if (dirmem==NULL)
    {
        TIFFErrorExt(tif->tif_clientdata,module,"Out of memory");
        goto bad;
    }
    if (!(tif->tif_flags&TIFF_BIGTIFF))
    {
        uint8* n;
        TIFFDirEntry* o;
        n=dirmem;
        *(uint16*)n=ndir;
        if (tif->tif_flags&TIFF_SWAB)
            TIFFSwabShort((uint16*)n);
        n+=2;
        o=dir;
        for (m=0; m<ndir; m++)
        {
            *(uint16*)n=o->tdir_tag;
            if (tif->tif_flags&TIFF_SWAB)
                TIFFSwabShort((uint16*)n);
            n+=2;
            *(uint16*)n=o->tdir_type;
            if (tif->tif_flags&TIFF_SWAB)
                TIFFSwabShort((uint16*)n);
            n+=2;
            *(uint32*)n=(uint32)o->tdir_count;
            if (tif->tif_flags&TIFF_SWAB)
                TIFFSwabLong((uint32*)n);
            n+=4;
            _TIFFmemcpy(n,&o->tdir_offset,4);
            n+=4;
            o++;
        }
        *(uint32*)n = (uint32)tif->tif_nextdiroff;
    }
</snip>

-- Dan Greve
-- Software Engineer
-- Northrop Grumman Corp.

_________________________________________________________________
Keep your kids safer online with Windows Live Family Safety.
http://www.windowslive.com/family_safety/overview.html?ocid=TXT_TAGLM_WL_Refresh_family_safety_052008
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080530/87602066/attachment.html
From arb at sat.dundee.ac.uk  Fri May 30 12:43:41 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri May 30 12:43:45 2008
Subject: [gdal-dev] GDAL 1.5.2 RC3 and HDF
In-Reply-To: <483F13BD.1060604@pobox.com>
References: <483F13BD.1060604@pobox.com>
Message-ID: <op.uby7e3mzqw3wu1@titan>

Hi

Please don't use RC3 as final 1.5.2 until the HDF code is fixed.  It is broken at
the moment and simply won't compile with the current HDF4 and hdf5 libraries.  Both
HDF APIs have changed and GDAL no longer compiles.  See below for my changes (not
necessary correct, especially the use of H5Gopen1, but at least it compiles!).

Andrew

% find gdal-1.5.2rc3 | xargs grep -n 'XXX.arb'
gdal-1.5.2rc3/frmts/hdf4/hdf4dataset.cpp:576:    char   szAttrName[H4_MAX_NC_NAME]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4dataset.cpp:743:   poDS->iSubdatasetType = HS_UNKNOWN; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4dataset.cpp:754:    int32  aiDimSizes[H4_MAX_VAR_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4dataset.h:54:    HS_UNKNOWN // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:91:    int32       aiDimSizes[H4_MAX_VAR_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:205:    int32               aiStart[H4_MAX_NC_DIMS], aiEdges[H4_MAX_NC_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:444:    int32               aiStart[H4_MAX_NC_DIMS], aiEdges[H4_MAX_NC_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1100:        int32       aiDimSizes[H4_MAX_VAR_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1103:        int32 aiStart[H4_MAX_NC_DIMS], aiEdges[H4_MAX_NC_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1459:        int32       aiDimSizes[H4_MAX_VAR_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1466:                char    szAttrName[H4_MAX_NC_NAME]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1569:        int32       aiDimSizes[H4_MAX_VAR_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1576:                char    szAttrName[H4_MAX_NC_NAME]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1624:        int32       aiDimSizes[H4_MAX_VAR_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1693:    int32   aiDimSizes[H4_MAX_VAR_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:1909:        int32   iStart[H4_MAX_NC_DIMS], iEdges[H4_MAX_NC_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:2293:        poDS->iSubdatasetType = HS_UNKNOWN; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:2614:          memset( poDS->aiDimSizes, 0, sizeof(int32) * H4_MAX_VAR_DIMS ); // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:2625:              char  szAttrName[H4_MAX_NC_NAME]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:2737:            char    szAttrName[H4_MAX_NC_NAME]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf4imagedataset.cpp:3034:    int32               aiDimSizes[H4_MAX_VAR_DIMS]; // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf-eos/GDapi.c:10873:    int32           dims[H4_MAX_VAR_DIMS]; /* Field/SDS dimensions */ // XXX arb
gdal-1.5.2rc3/frmts/hdf4/hdf-eos/SWapi.c:11415:    int32           dims[H4_MAX_VAR_DIMS]; /* Field/SDS dimensions */ // XXX arb
gdal-1.5.2rc3/frmts/hdf5/hdf5dataset.cpp:243:    poDS->hGroupID = H5Gopen1( poDS->hHDF5, "/" ); // XXX arb
gdal-1.5.2rc3/frmts/hdf5/hdf5dataset.cpp:442:       if( ( hGroupID = H5Gopen1( hHDF5, pszObjName )) == -1  ) { // XXX arb
gdal-1.5.2rc3/frmts/hdf5/hdf5dataset.cpp:471:       if( ( hDatasetID = H5Dopen1( hHDF5, pszObjName )) == -1  ) { // XXX arb
gdal-1.5.2rc3/frmts/hdf5/hdf5dataset.cpp:676:   hGroupID = H5Gopen1( hHDF5, poH5Object->pszPath); // XXX arb
gdal-1.5.2rc3/frmts/hdf5/hdf5dataset.cpp:678:       ret = H5Aiterate1( hGroupID, NULL, // XXX arb
gdal-1.5.2rc3/frmts/hdf5/hdf5dataset.cpp:687:   hDatasetID =  H5Dopen1(hHDF5, poH5Object->pszPath); // XXX arb
gdal-1.5.2rc3/frmts/hdf5/hdf5dataset.cpp:690:       ret = H5Aiterate1( hDatasetID, NULL, // XXX arb
gdal-1.5.2rc3/frmts/hdf5/hdf5dataset.cpp:872:    hGroupID = H5Gopen1( hHDF5, "/" );  // XXX arb
%
From arb at sat.dundee.ac.uk  Fri May 30 12:47:38 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri May 30 12:47:42 2008
Subject: [gdal-dev] GDAL 1.5.2 RC3 and HDF
In-Reply-To: <op.uby7e3mzqw3wu1@titan>
References: <483F13BD.1060604@pobox.com> <op.uby7e3mzqw3wu1@titan>
Message-ID: <op.uby7lol1qw3wu1@titan>

On Fri, 30 May 2008 17:43:41 +0100, Andrew Brooks <arb@sat.dundee.ac.uk> wrote:
>
> Both HDF APIs have changed and GDAL no longer compiles.

For more information on the changes required google found these for me:
http://trac.nexusformat.org/code/ticket/108
http://www.hdfgroup.uiuc.edu/HDF5/doc_1.8pre/doc/RM/RM_H5G.html#Group-Open2

Andrew
From Shawn.Gong at drdc-rddc.gc.ca  Fri May 30 12:54:44 2008
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Fri May 30 12:54:48 2008
Subject: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E1200A6@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Dan and list,

This error looks very similar to what I have experienced on our Sun machine, trying to build and run gdal 1.5.1.
Our Sun system is SPARC Solaris 9 64-bit.

Error message when Python codes call "gtiff_driver.CreateCopy( fname, vrtds, ...)"
ERROR 1: /home/sgong/../working_dir/test2.tif:No space to read TIFF directory
ERROR 1: TIFFReadDirectory:Failed to read directory at offset 8 Bus error (core dumped)


thanks, 
Shawn 

________________________________________
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Dan Greve
Sent: Friday, May 30, 2008 11:51 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Problem with libTiff on Solaris 10

Greetings,

I am using the latest stable build, gdal-1.5.1 on a SPARC Solaris 10 64-bit system.? It is configured with the default drivers, but is using --with-jpeg=internal --with-libtiff=internal --with-geotiff=internal.? Using the 32-bit compiler options and libraries, I can successfully build libgdal.so and the utility programs.? However, when trying to do a gdal_translate from one simple uncompressed 3-band geotiff into another simple uncompressed 3-band geotiff, I get a "bus error" segfault.? Also, if the output tiff already exists I get two errors. "No space to read tiff directory" and "TiffReadDirectory: failed to read directory at offset 8". A quick google revealed two similiar errors, here and here. Diving into the debugger, the problem seems to lie in the tif_dirwrite.c, starting with line 755.? I believe it's due to _TIFFmalloc not allocating memory properly. The crash actual occurs on line 781, *(uint32*)n=(uint32)o->tdir_count;? 

o->tdir_count is valid, but setting n to any value causes a segfault, as though TIFFmalloc did not allocate the whole requested 186 bytes. Any ideas?

<snip file=tif_dirwrite.c>
??? dirmem=_TIFFmalloc(dirsize);
??? if (dirmem==NULL)
??? {
??? ??? TIFFErrorExt(tif->tif_clientdata,module,"Out of memory");
??? ??? goto bad;
??? }
??? if (!(tif->tif_flags&TIFF_BIGTIFF))
??? {
??? ??? uint8* n;
??? ??? TIFFDirEntry* o;
??? ??? n=dirmem;
??? ??? *(uint16*)n=ndir;
??? ??? if (tif->tif_flags&TIFF_SWAB)
??? ??? ??? TIFFSwabShort((uint16*)n);
??? ??? n+=2;
??? ??? o=dir;
??? ??? for (m=0; m<ndir; m++)
??? ??? {
??? ??? ??? *(uint16*)n=o->tdir_tag;
??? ??? ??? if (tif->tif_flags&TIFF_SWAB)
??? ??? ??? ??? TIFFSwabShort((uint16*)n);
??? ??? ??? n+=2;
??? ??? ??? *(uint16*)n=o->tdir_type;
??? ??? ??? if (tif->tif_flags&TIFF_SWAB)
??? ??? ??? ??? TIFFSwabShort((uint16*)n);
??? ??? ??? n+=2;
??? ??? ??? *(uint32*)n=(uint32)o->tdir_count;
??? ??? ??? if (tif->tif_flags&TIFF_SWAB)
??? ??? ??? ??? TIFFSwabLong((uint32*)n);
??? ??? ??? n+=4;
??? ??? ??? _TIFFmemcpy(n,&o->tdir_offset,4);
??? ??? ??? n+=4;
??? ??? ??? o++;
??? ??? }
??? ??? *(uint32*)n = (uint32)tif->tif_nextdiroff;
??? }
</snip>

-- Dan Greve
-- Software Engineer
-- Northrop Grumman Corp.


From even.rouault at mines-paris.org  Fri May 30 13:18:31 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 30 13:18:38 2008
Subject: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1200A6@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
	<DF1471B5C308B346BF5A2AEA00C5615E1200A6@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <200805301918.32519.even.rouault@mines-paris.org>

Hi,

Hum, I'm not a specialist of SPARC at all, but doesn't this architecture 
require proper memory alignment accesses ?

I say that because the crash on " *(uint32*)n=(uint32)o->tdir_count " could be 
easily explained if the memory address pointed by 'n' is not aligned on a 4 
byte address....
In the next few lines of the code extract Dan Greve has quoted, I 
see "_TIFFmemcpy(n,&o->tdir_offset,4)" which is a safer way of dealing with 
this alignment problems...

It looks like a libtiff problem, so I add the libtiff mailing list in CC too.

Best regards,
Even

-------------------------------------------------------------------------------------

RE: [gdal-dev] Problem with libTiff on Solaris 10
De?: 
"Gong, Shawn (Contractor)" <Shawn.Gong@drdc-rddc.gc.ca>
  ??: 
"Dan Greve" <grevedan@hotmail.com>, gdal-dev@lists.osgeo.org
  Date?: 
Aujourd'hui 18:54:44
  ?
Dan and list,

This error looks very similar to what I have experienced on our Sun machine, 
trying to build and run gdal 1.5.1.
Our Sun system is SPARC Solaris 9 64-bit.

Error message when Python codes call "gtiff_driver.CreateCopy( fname, 
vrtds, ...)"
ERROR 1: /home/sgong/../working_dir/test2.tif:No space to read TIFF directory
ERROR 1: TIFFReadDirectory:Failed to read directory at offset 8 Bus error 
(core dumped)


thanks, 
Shawn 

________________________________________
From: gdal-dev-bounces@lists.osgeo.org 
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Dan Greve
Sent: Friday, May 30, 2008 11:51 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Problem with libTiff on Solaris 10

Greetings,

I am using the latest stable build, gdal-1.5.1 on a SPARC Solaris 10 64-bit 
system.? It is configured with the default drivers, but is 
using --with-jpeg=internal --with-libtiff=internal --with-geotiff=internal.? 
Using the 32-bit compiler options and libraries, I can successfully build 
libgdal.so and the utility programs.? However, when trying to do a 
gdal_translate from one simple uncompressed 3-band geotiff into another 
simple uncompressed 3-band geotiff, I get a "bus error" segfault.? Also, if 
the output tiff already exists I get two errors. "No space to read tiff 
directory" and "TiffReadDirectory: failed to read directory at offset 8". A 
quick google revealed two similiar errors, here and here. Diving into the 
debugger, the problem seems to lie in the tif_dirwrite.c, starting with line 
755.? I believe it's due to _TIFFmalloc not allocating memory properly. The 
crash actual occurs on line 781, *(uint32*)n=(uint32)o->tdir_count;? 

o->tdir_count is valid, but setting n to any value causes a segfault, as 
though TIFFmalloc did not allocate the whole requested 186 bytes. Any ideas?

<snip file=tif_dirwrite.c>
??? dirmem=_TIFFmalloc(dirsize);
??? if (dirmem==NULL)
??? {
??? ??? TIFFErrorExt(tif->tif_clientdata,module,"Out of memory");
??? ??? goto bad;
??? }
??? if (!(tif->tif_flags&TIFF_BIGTIFF))
??? {
??? ??? uint8* n;
??? ??? TIFFDirEntry* o;
??? ??? n=dirmem;
??? ??? *(uint16*)n=ndir;
??? ??? if (tif->tif_flags&TIFF_SWAB)
??? ??? ??? TIFFSwabShort((uint16*)n);
??? ??? n+=2;
??? ??? o=dir;
??? ??? for (m=0; m<ndir; m++)
??? ??? {
??? ??? ??? *(uint16*)n=o->tdir_tag;
??? ??? ??? if (tif->tif_flags&TIFF_SWAB)
??? ??? ??? ??? TIFFSwabShort((uint16*)n);
??? ??? ??? n+=2;
??? ??? ??? *(uint16*)n=o->tdir_type;
??? ??? ??? if (tif->tif_flags&TIFF_SWAB)
??? ??? ??? ??? TIFFSwabShort((uint16*)n);
??? ??? ??? n+=2;
??? ??? ??? *(uint32*)n=(uint32)o->tdir_count;
??? ??? ??? if (tif->tif_flags&TIFF_SWAB)
??? ??? ??? ??? TIFFSwabLong((uint32*)n);
??? ??? ??? n+=4;
??? ??? ??? _TIFFmemcpy(n,&o->tdir_offset,4);
??? ??? ??? n+=4;
??? ??? ??? o++;
??? ??? }
??? ??? *(uint32*)n = (uint32)tif->tif_nextdiroff;
??? }
</snip>

-- Dan Greve
-- Software Engineer
-- Northrop Grumman Corp.
From even.rouault at mines-paris.org  Fri May 30 13:30:43 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 30 13:30:49 2008
Subject: [gdal-dev] GDAL 1.5.2 RC3 and HDF
In-Reply-To: <op.uby7lol1qw3wu1@titan>
References: <483F13BD.1060604@pobox.com> <op.uby7e3mzqw3wu1@titan>
	<op.uby7lol1qw3wu1@titan>
Message-ID: <200805301930.43682.even.rouault@mines-paris.org>

Hi

There is already a GDAL ticket for this issue : 
http://trac.osgeo.org/gdal/ticket/2297

I have HDF5 1.6.5 installed, which is the packaged version on my Ubuntu 
distro, and current GDAL code compiles fine with it. Apparently there has 
been an API/ABI change between this version and HDF5 1.8.... I'm not sure how 
we can fix that properly if we want to support various HDF5 versions... By a 
very quick read in the second URL you provide, there's a way of compiling 
HDF5 library in 1.6 emulation.

"When both the HDF5 Library and the application are built and installed with 
no specific compatibility flags, H5Gopen is mapped to the most recent version 
of the function, currently H5Gopen2. If the library and/or application is 
compiled for Release 1.6 emulation, H5Gopen will be mapped to H5Gopen1. 
Function-specific flags are available to override these settings on a 
function-by-function basis when the application is compiled."

I don't think this kind of issue can be easily addressed by a maintenance 
release. It seems more appropriate to make HDF5 1.8 compability be a goal of 
the next major GDAL version (I mean GDAL 1.6.0). For the moment, I would say 
the workaround if either to downgrade to HDF5 1.6.X or to compile HDF5 1.8 in 
HDF5 1.6 compability mode. But I speak on my own behalf, so others can have 
different views on that point of course...

Best regards,

Even

Le Friday 30 May 2008 18:47:38 Andrew Brooks, vous avez ?crit?:
> On Fri, 30 May 2008 17:43:41 +0100, Andrew Brooks <arb@sat.dundee.ac.uk> 
wrote:
> > Both HDF APIs have changed and GDAL no longer compiles.
>
> For more information on the changes required google found these for me:
> http://trac.nexusformat.org/code/ticket/108
> http://www.hdfgroup.uiuc.edu/HDF5/doc_1.8pre/doc/RM/RM_H5G.html#Group-Open2
>
> Andrew
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From arb at sat.dundee.ac.uk  Fri May 30 14:26:27 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri May 30 14:26:30 2008
Subject: [gdal-dev] GDAL 1.5.2 RC3 and HDF
In-Reply-To: <200805301930.43682.even.rouault@mines-paris.org>
References: <483F13BD.1060604@pobox.com> <op.uby7e3mzqw3wu1@titan>
	<op.uby7lol1qw3wu1@titan>
	<200805301930.43682.even.rouault@mines-paris.org>
Message-ID: <op.ubzb6dnpqw3wu1@titan>

On Fri, 30 May 2008 18:30:43 +0100, Even Rouault <even.rouault@mines-paris.org> wrote:
>
> There is already a GDAL ticket for this issue :
> http://trac.osgeo.org/gdal/ticket/2297

Thanks for pointing that out.  But it's 2 months old and hdf5-1.8 isn't going
away ;-)  I recommend gdal-1.5.3 simply defines something before including the
hdf5 headers, something like H5_USE_16_API, then it will compile with both old
and new hdf5.  But the author should check that's an appropriate setting (I just
found it by looking through H5version.h, not by reading the manual ;-))

Andrew
From even.rouault at mines-paris.org  Fri May 30 15:19:36 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri May 30 15:19:43 2008
Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <00f801c8c284$ac5c9780$2ab2a8c0@EKAT>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
	<200805301918.32519.even.rouault@mines-paris.org>
	<00f801c8c284$ac5c9780$2ab2a8c0@EKAT>
Message-ID: <200805302119.37943.even.rouault@mines-paris.org>

Yes, it could be an issue about a NULL pointer of course, but libtiff 4.0.0 
alpha/beta works well on i386, x86_64, PPC etc... (those are the platforms 
tested by the GDAL buildbot)

I've done a quick 'grep "*(int32*)" *.c ' and 'grep "*(uint32*)" *.c' on 
libtiff 3.8.2 sources and libtiff 4.0.0 sources, and found much more of those 
in the later than in the former, so it is a hint that this may be the 
problem.

Anyway, we could be sure of the reason if Dan could print the value of the n 
pointer when the debugger stops on the crash. And I think that 'sigbus' is 
more typical of alignment problems. A null pointer would have given 
a 'sigsegv' I think.


Related topic, do people know if there's a Valgrind option/patch that could 
help us to detect that ? I looked a bit but couldn't find one. I imagine 
that's it's "easy" for Valgrind to detect and report such unaligned memory 
accesses. That could enable people not having the "chance" of getting access 
to a SPARC platform to anticipate such problems even with i386 hardware.

Le Friday 30 May 2008 20:40:43 Andy Cave, vous avez ?crit?:
> Hi Even,
>
> Yes IIRC from when I worked/coded on them SPARCS need to do aligned
> accesses, or you get a trap.
>
> But without knowing the code, also, o could be a null pointer (is it
> asserted as not being null on entry to the function or where it's
> set/calculated/extracted?).
>
> Regards,
>
> Andy.
>
> ----- Original Message -----
> From: "Even Rouault" <even.rouault@mines-paris.org>
> To: <gdal-dev@lists.osgeo.org>
> Cc: "Dan Greve" <grevedan@hotmail.com>; "TIFF mailing list"
> <tiff@lists.maptools.org>; "Gong,Shawn (Contractor)"
> <Shawn.Gong@drdc-rddc.gc.ca>
> Sent: Friday, May 30, 2008 7:18 PM
> Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
>
>
> Hi,
>
> Hum, I'm not a specialist of SPARC at all, but doesn't this architecture
> require proper memory alignment accesses ?
>
> I say that because the crash on " *(uint32*)n=(uint32)o->tdir_count " could
> be
> easily explained if the memory address pointed by 'n' is not aligned on a 4
> byte address....
> In the next few lines of the code extract Dan Greve has quoted, I
> see "_TIFFmemcpy(n,&o->tdir_offset,4)" which is a safer way of dealing with
> this alignment problems...
>
> It looks like a libtiff problem, so I add the libtiff mailing list in CC
> too.
>
> Best regards,
> Even
>
> ---------------------------------------------------------------------------
>----------
>
> RE: [gdal-dev] Problem with libTiff on Solaris 10
> De :
> "Gong, Shawn (Contractor)" <Shawn.Gong@drdc-rddc.gc.ca>
>   ? :
> "Dan Greve" <grevedan@hotmail.com>, gdal-dev@lists.osgeo.org
>   Date :
> Aujourd'hui 18:54:44
>
> Dan and list,
>
> This error looks very similar to what I have experienced on our Sun
> machine, trying to build and run gdal 1.5.1.
> Our Sun system is SPARC Solaris 9 64-bit.
>
> Error message when Python codes call "gtiff_driver.CreateCopy( fname,
> vrtds, ...)"
> ERROR 1: /home/sgong/../working_dir/test2.tif:No space to read TIFF
> directory
> ERROR 1: TIFFReadDirectory:Failed to read directory at offset 8 Bus error
> (core dumped)
>
>
> thanks,
> Shawn
>
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Dan Greve
> Sent: Friday, May 30, 2008 11:51 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Problem with libTiff on Solaris 10
>
> Greetings,
>
> I am using the latest stable build, gdal-1.5.1 on a SPARC Solaris 10 64-bit
> system. It is configured with the default drivers, but is
> using --with-jpeg=internal --with-libtiff=internal --with-geotiff=internal.
> Using the 32-bit compiler options and libraries, I can successfully build
> libgdal.so and the utility programs. However, when trying to do a
> gdal_translate from one simple uncompressed 3-band geotiff into another
> simple uncompressed 3-band geotiff, I get a "bus error" segfault. Also, if
> the output tiff already exists I get two errors. "No space to read tiff
> directory" and "TiffReadDirectory: failed to read directory at offset 8". A
> quick google revealed two similiar errors, here and here. Diving into the
> debugger, the problem seems to lie in the tif_dirwrite.c, starting with
> line 755. I believe it's due to _TIFFmalloc not allocating memory properly.
> The crash actual occurs on line 781, *(uint32*)n=(uint32)o->tdir_count;
>
> o->tdir_count is valid, but setting n to any value causes a segfault, as
> though TIFFmalloc did not allocate the whole requested 186 bytes. Any
> ideas?
>
> <snip file=tif_dirwrite.c>
> dirmem=_TIFFmalloc(dirsize);
> if (dirmem==NULL)
> {
> TIFFErrorExt(tif->tif_clientdata,module,"Out of memory");
> goto bad;
> }
> if (!(tif->tif_flags&TIFF_BIGTIFF))
> {
> uint8* n;
> TIFFDirEntry* o;
> n=dirmem;
> *(uint16*)n=ndir;
> if (tif->tif_flags&TIFF_SWAB)
> TIFFSwabShort((uint16*)n);
> n+=2;
> o=dir;
> for (m=0; m<ndir; m++)
> {
> *(uint16*)n=o->tdir_tag;
> if (tif->tif_flags&TIFF_SWAB)
> TIFFSwabShort((uint16*)n);
> n+=2;
> *(uint16*)n=o->tdir_type;
> if (tif->tif_flags&TIFF_SWAB)
> TIFFSwabShort((uint16*)n);
> n+=2;
> *(uint32*)n=(uint32)o->tdir_count;
> if (tif->tif_flags&TIFF_SWAB)
> TIFFSwabLong((uint32*)n);
> n+=4;
> _TIFFmemcpy(n,&o->tdir_offset,4);
> n+=4;
> o++;
> }
> *(uint32*)n = (uint32)tif->tif_nextdiroff;
> }
> </snip>
>
> -- Dan Greve
> -- Software Engineer
> -- Northrop Grumman Corp.
>
> _______________________________________________
> Tiff mailing list: Tiff@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/tiff
> http://www.remotesensing.org/libtiff/


From javierurien+gdal at gmail.com  Fri May 30 15:31:46 2008
From: javierurien+gdal at gmail.com (Javier Urien)
Date: Fri May 30 15:31:48 2008
Subject: [gdal-dev] GDAL Data dir and installed application
In-Reply-To: <d2595b180805292015g7f666869ob41bc72d04f5a6c5@mail.gmail.com>
References: <d2595b180805291050m3ae556b7jacfff1d0150490c5@mail.gmail.com>
	<483F63FE.8010101@pobox.com>
	<d2595b180805292015g7f666869ob41bc72d04f5a6c5@mail.gmail.com>
Message-ID: <d2595b180805301231r1f01ba7bo8a362bbd6a19fddf@mail.gmail.com>

On 5/30/08, Javier Urien <javierurien+gdal@gmail.com> wrote:
> On Thu, May 29, 2008 at 11:18 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>  > Javier Urien wrote:
>  >>
>  >> Hello,
>  >>
>  >>   I am developing an application that uses GDAL. I compiled with
>  >> MinGW+Msys on windows. I use proj4 as an external dll.
>  >>   When I install the application on a clean machine (ie not
>  >> developement), I do not get all the georreference information I do on
>  >> the development installation. I found that Gdal apps use the GDAL_DATA
>  >> variable and so I tried setting it to the installation directory
>  >> containing all the .csv gdal provides, but with no success.
>  >>
>  >>   Any hints on how to accomplish this?
>  >
>  > Javier,
>  >
>  > Is there any possibility the PROJ.DLL isn't being found?  Is it in the path?
>  > You might try setting the CPL_DEBUG environment variable to ON to get more
>  > information.
>
>
> proj.dll is in the same directory as the application (not in the path)
>  I will try setting the path, but it shouldn't really matter.
>

That did it. I had libproj-0.dll, but renamed it to proj.dll and it
works. Thanks
From arb at sat.dundee.ac.uk  Fri May 30 16:27:16 2008
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Fri May 30 16:27:20 2008
Subject: [gdal-dev] Geolocation arrays not GCPs
Message-ID: <op.ubzhrqipqw3wu1@titan>

Hello

I would like to modify the l1b format to return a complete geolocation array instead of the current small set of GCPs.  I can calculate the coordinates but how do I go about modifying the code to return that array instead of the GCP array?  I think the hdf reader already does such a thing but the code isn't clear!  Or maybe I'm going about it the wrong way and there might be something even more efficient (like building in my own projection callback)??

Andrew
From grevedan at hotmail.com  Fri May 30 19:53:49 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Fri May 30 19:53:51 2008
Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <Pine.SOC.4.64.0805301510560.1131@freddy.simplesystems.org>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
	<200805301918.32519.even.rouault@mines-paris.org>
	<00f801c8c284$ac5c9780$2ab2a8c0@EKAT>
	<200805302119.37943.even.rouault@mines-paris.org> 
	<Pine.SOC.4.64.0805301510560.1131@freddy.simplesystems.org>
Message-ID: <BAY118-W5C69E4EF5781D91CBBCF2C7BE0@phx.gbl>

>Many compilers will produce a warning if an action is performed in a >way which does not assure correct alignment.
 
I know GCC was throwing a number of warnings in the libtiff directory,maybe i'll actual pay attention to these in the next rebuild :)
 
>I've done a quick 'grep "*(int32*)" *.c ' and 'grep "*(uint32*)" *.c' on >libtiff 3.8.2 sources and libtiff 4.0.0 sources, and found much more of those >in the later than in the former, so it is a hint that this may be the >problem. Bodes well that there is a greater likelihood this error would occur in libtiff 4.0.0(if this is what is included in gdal-1.5.1). I'm time crunched, so i think i'll try toto go in and replace the direct memory accesses with the TiffMemcpy like Evansuggested.
 
>Anyway, we could be sure of the reason if Dan could print the value of the n >pointer when the debugger stops on the crash. And I think that 'sigbus' is >more typical of alignment problems. A null pointer would have given >a 'sigsegv' I think.
I'll forward the output of the n pointer from gdb, but I'm pretty sure it was notnull.  But even though the console output was "bus error", i think the debuggerwas segsegv, but will verify this in the morning.  Unfortunately, due to the classification of this machine, I may not be able to provide a stack traceeasily.
Thanks ya'll for the great inputs.
-- Dan Greve-- Software Engineer-- Northrop Grumman Corp.



> Date: Fri, 30 May 2008 15:58:02 -0500> From: bfriesen@simple.dallas.tx.us> To: even.rouault@mines-paris.org> CC: andy.cave@hamillroad.com; gdal-dev@lists.osgeo.org; grevedan@hotmail.com; tiff@lists.maptools.org; Shawn.Gong@drdc-rddc.gc.ca> Subject: Re: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10> > On Fri, 30 May 2008, Even Rouault wrote:> >> > Related topic, do people know if there's a Valgrind option/patch that could> > help us to detect that ? I looked a bit but couldn't find one. I imagine> > that's it's "easy" for Valgrind to detect and report such unaligned memory> > accesses. That could enable people not having the "chance" of getting access> > to a SPARC platform to anticipate such problems even with i386 hardware.> > Many compilers will produce a warning if an action is performed in a > way which does not assure correct alignment.> > The popular targets for valgrind do not seem to care about aligned > access, or perhaps unaligned access is just a bit slower.> > I have access to SPARC here so if someone can formulate a simple way > to re-create the problem without GDAL installed then I should be able > to help debug the issue.> > Bob> ======================================> Bob Friesenhahn> bfriesen@simple.dallas.tx.us, http://www.simplesystems.org/users/bfriesen/> GraphicsMagick Maintainer, http://www.GraphicsMagick.org/> 
_________________________________________________________________
Make every e-mail and IM count. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ MakeCount
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080530/0d56895a/attachment.html
From grevedan at hotmail.com  Fri May 30 21:02:58 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Fri May 30 21:03:00 2008
Subject: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <DF1471B5C308B346BF5A2AEA00C5615E1200A6@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
	<DF1471B5C308B346BF5A2AEA00C5615E1200A6@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <BAY118-W38FE182D39C0A87D46BFBAC7B90@phx.gbl>

Shawn,

Hopefully we can solve both our problems.  It's hard for the developers to run their tests unless they have similiar hardware.  If one of the developers want, i may be able to produce a SPARC system to run tests through.

-- Dan Greve
-- Software Engineer
-- Northrop Grumman Corp.

> Subject: RE: [gdal-dev] Problem with libTiff on Solaris 10
> Date: Fri, 30 May 2008 12:54:44 -0400
> From: Shawn.Gong@drdc-rddc.gc.ca
> To: grevedan@hotmail.com; gdal-dev@lists.osgeo.org
> 
> Dan and list,
> 
> This error looks very similar to what I have experienced on our Sun machine, trying to build and run gdal 1.5.1.
> Our Sun system is SPARC Solaris 9 64-bit.
> 
> Error message when Python codes call "gtiff_driver.CreateCopy( fname, vrtds, ...)"
> ERROR 1: /home/sgong/../working_dir/test2.tif:No space to read TIFF directory
> ERROR 1: TIFFReadDirectory:Failed to read directory at offset 8 Bus error (core dumped)
> 
> 
> thanks, 
> Shawn 
> 
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Dan Greve
> Sent: Friday, May 30, 2008 11:51 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Problem with libTiff on Solaris 10
> 
> Greetings,
> 
> I am using the latest stable build, gdal-1.5.1 on a SPARC Solaris 10 64-bit system.  It is configured with the default drivers, but is using --with-jpeg=internal --with-libtiff=internal --with-geotiff=internal.  Using the 32-bit compiler options and libraries, I can successfully build libgdal.so and the utility programs.  However, when trying to do a gdal_translate from one simple uncompressed 3-band geotiff into another simple uncompressed 3-band geotiff, I get a "bus error" segfault.  Also, if the output tiff already exists I get two errors. "No space to read tiff directory" and "TiffReadDirectory: failed to read directory at offset 8". A quick google revealed two similiar errors, here and here. Diving into the debugger, the problem seems to lie in the tif_dirwrite.c, starting with line 755.  I believe it's due to _TIFFmalloc not allocating memory properly. The crash actual occurs on line 781, *(uint32*)n=(uint32)o->tdir_count;  
> 
> o->tdir_count is valid, but setting n to any value causes a segfault, as though TIFFmalloc did not allocate the whole requested 186 bytes. Any ideas?
> 
> <snip file=tif_dirwrite.c>
>     dirmem=_TIFFmalloc(dirsize);
>     if (dirmem==NULL)
>     {
>         TIFFErrorExt(tif->tif_clientdata,module,"Out of memory");
>         goto bad;
>     }
>     if (!(tif->tif_flags&TIFF_BIGTIFF))
>     {
>         uint8* n;
>         TIFFDirEntry* o;
>         n=dirmem;
>         *(uint16*)n=ndir;
>         if (tif->tif_flags&TIFF_SWAB)
>             TIFFSwabShort((uint16*)n);
>         n+=2;
>         o=dir;
>         for (m=0; m<ndir; m++)
>         {
>             *(uint16*)n=o->tdir_tag;
>             if (tif->tif_flags&TIFF_SWAB)
>                 TIFFSwabShort((uint16*)n);
>             n+=2;
>             *(uint16*)n=o->tdir_type;
>             if (tif->tif_flags&TIFF_SWAB)
>                 TIFFSwabShort((uint16*)n);
>             n+=2;
>             *(uint32*)n=(uint32)o->tdir_count;
>             if (tif->tif_flags&TIFF_SWAB)
>                 TIFFSwabLong((uint32*)n);
>             n+=4;
>             _TIFFmemcpy(n,&o->tdir_offset,4);
>             n+=4;
>             o++;
>         }
>         *(uint32*)n = (uint32)tif->tif_nextdiroff;
>     }
> </snip>
> 
> -- Dan Greve
> -- Software Engineer
> -- Northrop Grumman Corp.
> 
> 

_________________________________________________________________
Keep your kids safer online with Windows Live Family Safety.
http://www.windowslive.com/family_safety/overview.html?ocid=TXT_TAGLM_WL_Refresh_family_safety_052008
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080530/9f322937/attachment.html
From dron at ak4719.spb.edu  Sat May 31 03:53:12 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Sat May 31 04:00:28 2008
Subject: [gdal-dev] Geolocation arrays not GCPs
In-Reply-To: <op.ubzhrqipqw3wu1@titan>
References: <op.ubzhrqipqw3wu1@titan>
Message-ID: <20080531075312.GA22026@ak4719.spb.edu>

On Fri, May 30, 2008 at 09:27:16PM +0100, Andrew Brooks wrote:
> I would like to modify the l1b format to return a complete geolocation
> array instead of the current small set of GCPs.  I can calculate the
> coordinates but how do I go about modifying the code to return that
> array instead of the GCP array?  I think the hdf reader already does
> such a thing but the code isn't clear!  Or maybe I'm going about it
> the wrong way and there might be something even more efficient (like
> building in my own projection callback)??

Andrew,

Please, create a ticket for that and assign it to me. I will add
geolocation array functionality in that driver.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From grevedan at hotmail.com  Sat May 31 10:49:15 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Sat May 31 10:49:17 2008
Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <BAY118-W5C69E4EF5781D91CBBCF2C7BE0@phx.gbl>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
	<200805301918.32519.even.rouault@mines-paris.org>
	<00f801c8c284$ac5c9780$2ab2a8c0@EKAT>
	<200805302119.37943.even.rouault@mines-paris.org> 
	<Pine.SOC.4.64.0805301510560.1131@freddy.simplesystems.org> 
	<BAY118-W5C69E4EF5781D91CBBCF2C7BE0@phx.gbl>
Message-ID: <BAY118-W11CB08B2A6CDD18BE68BD6C7B90@phx.gbl>


Sure enough, the pointer n is not null, and throws a sigsegv fault. Aftern changing from
 
*(uint32*)n=(uint32)o->tdir_count;            TO
 
_TIFFmemcpy(n, &o->tdir_count, 4)
 
The execution passes this point, but where as *(uint32*)n should be 1, it is 0. This causes errors later in the GDALOpen call on the tiff dataset, which fails with error "TiffFetchNormalTag:incorrect count for "SamplesPerPixel". 
debugging continues....
 
-- Dan Greve
-- Software Engineering
-- Northrop Grumman Corp.


From: grevedan@hotmail.comTo: bfriesen@simple.dallas.tx.us; even.rouault@mines-paris.orgSubject: RE: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10Date: Fri, 30 May 2008 19:53:49 -0400CC: gdal-dev@lists.osgeo.org; TIFF@lists.osgeo.org; andy.cave@hamillroad.com; tiff@lists.maptools.org


>Many compilers will produce a warning if an action is performed in a >way which does not assure correct alignment. I know GCC was throwing a number of warnings in the libtiff directory,maybe i'll actual pay attention to these in the next rebuild :) >I've done a quick 'grep "*(int32*)" *.c ' and 'grep "*(uint32*)" *.c' on >libtiff 3.8.2 sources and libtiff 4.0.0 sources, and found much more of those >in the later than in the former, so it is a hint that this may be the >problem. Bodes well that there is a greater likelihood this error would occur in libtiff 4.0.0(if this is what is included in gdal-1.5.1). I'm time crunched, so i think i'll try toto go in and replace the direct memory accesses with the TiffMemcpy like Evansuggested. >Anyway, we could be sure of the reason if Dan could print the value of the n >pointer when the debugger stops on the crash. And I think that 'sigbus' is >more typical of alignment problems. A null pointer would have given >a 'sigsegv' I think.I'll forward the output of the n pointer from gdb, but I'm pretty sure it was notnull.  But even though the console output was "bus error", i think the debuggerwas segsegv, but will verify this in the morning.  Unfortunately, due to the classification of this machine, I may not be able to provide a stack traceeasily.Thanks ya'll for the great inputs.-- Dan Greve-- Software Engineer-- Northrop Grumman Corp.

> Date: Fri, 30 May 2008 15:58:02 -0500> From: bfriesen@simple.dallas.tx.us> To: even.rouault@mines-paris.org> CC: andy.cave@hamillroad.com; gdal-dev@lists.osgeo.org; grevedan@hotmail.com; tiff@lists.maptools.org; Shawn.Gong@drdc-rddc.gc.ca> Subject: Re: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10> > On Fri, 30 May 2008, Even Rouault wrote:> >> > Related topic, do people know if there's a Valgrind option/patch that could> > help us to detect that ? I looked a bit but couldn't find one. I imagine> > that's it's "easy" for Valgrind to detect and report such unaligned memory> > accesses. That could enable people not having the "chance" of getting access> > to a SPARC platform to anticipate such problems even with i386 hardware.> > Many compilers will produce a warning if an action is performed in a > way which does not assure correct alignment.> > The popular targets for valgrind do not seem to care about aligned > access, or perhaps unaligned access is just a bit slower.> > I have access to SPARC here so if someone can formulate a simple way > to re-create the problem without GDAL installed then I should be able > to help debug the issue.> > Bob> ======================================> Bob Friesenhahn> bfriesen@simple.dallas.tx.us, http://www.simplesystems.org/users/bfriesen/> GraphicsMagick Maintainer, http://www.GraphicsMagick.org/> 

Make every e-mail and IM count. Join the i?m Initiative from Microsoft. 
_________________________________________________________________
Keep your kids safer online with Windows Live Family Safety.
http://www.windowslive.com/family_safety/overview.html?ocid=TXT_TAGLM_WL_Refresh_family_safety_052008
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080531/4d9a3cae/attachment.html
From jluis at ualg.pt  Sat May 31 11:02:11 2008
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Sat May 31 11:02:13 2008
Subject: [gdal-dev] Building ECW on Mc OSX
Message-ID: <20080531170211.307514o8l4neykys@wmail.ualg.pt>

Hi,

For the record.
I built the ecw 3.3 library on OSX but I had to change line 191 of  
NCSSocket.cpp

#       ifdef MACOSX
         //int tempSize = sizeof(struct sockaddr);          <== THIS
         socklen_t tempSize = sizeof(struct sockaddr);      <== TO THIS
#       else
         socklen_t tempSize = sizeof(struct sockaddr);
#       endif


Joaquim Luis

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From grevedan at hotmail.com  Sat May 31 11:29:01 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Sat May 31 11:29:04 2008
Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <00f801c8c284$ac5c9780$2ab2a8c0@EKAT>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl><DF1471B5C308B346BF5A2AEA00C5615E1200A6@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<200805301918.32519.even.rouault@mines-paris.org>
	<00f801c8c284$ac5c9780$2ab2a8c0@EKAT>
Message-ID: <BAY118-W49C3E5A323B0B152BC3C09C7B90@phx.gbl>


in my case o is not a null pointer, as o->tdir_count is 1.

-- Dan Greve
-- Software Engineer
-- Northrop Grumman Corp.

> From: andy.cave@hamillroad.com
> To: even.rouault@mines-paris.org; gdal-dev@lists.osgeo.org
> CC: grevedan@hotmail.com; tiff@lists.maptools.org; Shawn.Gong@drdc-rddc.gc.ca
> Subject: Re: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
> Date: Fri, 30 May 2008 20:40:43 +0200
> 
> Hi Even,
> 
> Yes IIRC from when I worked/coded on them SPARCS need to do aligned 
> accesses, or you get a trap.
> 
> But without knowing the code, also, o could be a null pointer (is it 
> asserted as not being null on entry to the function or where it's 
> set/calculated/extracted?).
> 
> Regards,
> 
> Andy.
> 
> ----- Original Message ----- 
> From: "Even Rouault" <even.rouault@mines-paris.org>
> To: <gdal-dev@lists.osgeo.org>
> Cc: "Dan Greve" <grevedan@hotmail.com>; "TIFF mailing list" 
> <tiff@lists.maptools.org>; "Gong,Shawn (Contractor)" 
> <Shawn.Gong@drdc-rddc.gc.ca>
> Sent: Friday, May 30, 2008 7:18 PM
> Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
> 
> 
> Hi,
> 
> Hum, I'm not a specialist of SPARC at all, but doesn't this architecture
> require proper memory alignment accesses ?
> 
> I say that because the crash on " *(uint32*)n=(uint32)o->tdir_count " could 
> be
> easily explained if the memory address pointed by 'n' is not aligned on a 4
> byte address....
> In the next few lines of the code extract Dan Greve has quoted, I
> see "_TIFFmemcpy(n,&o->tdir_offset,4)" which is a safer way of dealing with
> this alignment problems...
> 
> It looks like a libtiff problem, so I add the libtiff mailing list in CC 
> too.
> 
> Best regards,
> Even
> 
> -------------------------------------------------------------------------------------
> 
> RE: [gdal-dev] Problem with libTiff on Solaris 10
> De :
> "Gong, Shawn (Contractor)" <Shawn.Gong@drdc-rddc.gc.ca>
>   ? :
> "Dan Greve" <grevedan@hotmail.com>, gdal-dev@lists.osgeo.org
>   Date :
> Aujourd'hui 18:54:44
> 
> Dan and list,
> 
> This error looks very similar to what I have experienced on our Sun machine,
> trying to build and run gdal 1.5.1.
> Our Sun system is SPARC Solaris 9 64-bit.
> 
> Error message when Python codes call "gtiff_driver.CreateCopy( fname,
> vrtds, ...)"
> ERROR 1: /home/sgong/../working_dir/test2.tif:No space to read TIFF 
> directory
> ERROR 1: TIFFReadDirectory:Failed to read directory at offset 8 Bus error
> (core dumped)
> 
> 
> thanks,
> Shawn
> 
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Dan Greve
> Sent: Friday, May 30, 2008 11:51 AM
> To: gdal-dev@lists.osgeo.org
> Subject: [gdal-dev] Problem with libTiff on Solaris 10
> 
> Greetings,
> 
> I am using the latest stable build, gdal-1.5.1 on a SPARC Solaris 10 64-bit
> system. It is configured with the default drivers, but is
> using --with-jpeg=internal --with-libtiff=internal --with-geotiff=internal.
> Using the 32-bit compiler options and libraries, I can successfully build
> libgdal.so and the utility programs. However, when trying to do a
> gdal_translate from one simple uncompressed 3-band geotiff into another
> simple uncompressed 3-band geotiff, I get a "bus error" segfault. Also, if
> the output tiff already exists I get two errors. "No space to read tiff
> directory" and "TiffReadDirectory: failed to read directory at offset 8". A
> quick google revealed two similiar errors, here and here. Diving into the
> debugger, the problem seems to lie in the tif_dirwrite.c, starting with line
> 755. I believe it's due to _TIFFmalloc not allocating memory properly. The
> crash actual occurs on line 781, *(uint32*)n=(uint32)o->tdir_count;
> 
> o->tdir_count is valid, but setting n to any value causes a segfault, as
> though TIFFmalloc did not allocate the whole requested 186 bytes. Any ideas?
> 
> <snip file=tif_dirwrite.c>
> dirmem=_TIFFmalloc(dirsize);
> if (dirmem==NULL)
> {
> TIFFErrorExt(tif->tif_clientdata,module,"Out of memory");
> goto bad;
> }
> if (!(tif->tif_flags&TIFF_BIGTIFF))
> {
> uint8* n;
> TIFFDirEntry* o;
> n=dirmem;
> *(uint16*)n=ndir;
> if (tif->tif_flags&TIFF_SWAB)
> TIFFSwabShort((uint16*)n);
> n+=2;
> o=dir;
> for (m=0; m<ndir; m++)
> {
> *(uint16*)n=o->tdir_tag;
> if (tif->tif_flags&TIFF_SWAB)
> TIFFSwabShort((uint16*)n);
> n+=2;
> *(uint16*)n=o->tdir_type;
> if (tif->tif_flags&TIFF_SWAB)
> TIFFSwabShort((uint16*)n);
> n+=2;
> *(uint32*)n=(uint32)o->tdir_count;
> if (tif->tif_flags&TIFF_SWAB)
> TIFFSwabLong((uint32*)n);
> n+=4;
> _TIFFmemcpy(n,&o->tdir_offset,4);
> n+=4;
> o++;
> }
> *(uint32*)n = (uint32)tif->tif_nextdiroff;
> }
> </snip>
> 
> -- Dan Greve
> -- Software Engineer
> -- Northrop Grumman Corp.
> 
> _______________________________________________
> Tiff mailing list: Tiff@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/tiff
> http://www.remotesensing.org/libtiff/ 
> 
> 

_________________________________________________________________
E-mail for the greater good. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ GreaterGood
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080531/3f3641b7/attachment.html
From even.rouault at mines-paris.org  Sat May 31 11:30:11 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat May 31 11:30:20 2008
Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <BAY118-W11CB08B2A6CDD18BE68BD6C7B90@phx.gbl>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
	<BAY118-W5C69E4EF5781D91CBBCF2C7BE0@phx.gbl>
	<BAY118-W11CB08B2A6CDD18BE68BD6C7B90@phx.gbl>
Message-ID: <200805311730.13070.even.rouault@mines-paris.org>

Dan,

Your fix is not the right one. But I recognize that my previous suggestion 
could lead into error.

In fact, tdir_count field is a uint64 in libtiff 4.0.
So the correct fix is :

uint32 nTemp = (uint32)o->tdir_count;
_Tiffmemcpy(n, &nTemp, 4);

Even

-----------------------------------------------------------------------------------

RE: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
De?: 
Dan Greve <grevedan@hotmail.com>
  ??: 
Bob Friesenhahn <bfriesen@simple.dallas.tx.us>, Even Rouault 
<even.rouault@mines-paris.org>
  CC?: 
gdal-dev@lists.osgeo.org, tiff@lists.osgeo.org, Andy Cave 
<andy.cave@hamillroad.com>, mailing list <tiff@lists.maptools.org>
  Date?: 
Aujourd'hui 16:49:15
  ?
Sure enough, the pointer n is not null, and throws a sigsegv fault. Aftern 
changing from
?
*(uint32*)n=(uint32)o->tdir_count; ? ? ? ? ? ?TO
?
_TIFFmemcpy(n, &o->tdir_count, 4)
?
The execution passes this point, but where as *(uint32*)n should be 1, it is 
0. This causes errors later in the GDALOpen call on the tiff dataset, which 
fails with error "TiffFetchNormalTag:incorrect count for "SamplesPerPixel". 
debugging continues....
?
-- Dan Greve
-- Software Engineering
-- Northrop Grumman Corp.
From woklist at kyngchaos.com  Sat May 31 11:40:10 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat May 31 11:40:14 2008
Subject: [gdal-dev] Building ECW on Mc OSX
In-Reply-To: <20080531170211.307514o8l4neykys@wmail.ualg.pt>
References: <20080531170211.307514o8l4neykys@wmail.ualg.pt>
Message-ID: <57F81352-A553-4BE4-98B6-C928F8C4B214@kyngchaos.com>

The ermapper forums are still operating, and there you'll find my  
thread that mentions a few other patches.  Besides the NCSSocket  
patch, there are problems with threading that need fixing:

http://forums.ermapper.com/viewtopic.php?t=2446

Also, I have a few other patches to get it working on OSX 10.5  
Leopard.  I didn't realize the forums were still operating until just  
now, so I haven't updated that thread with the latest yet.

Even so, the ECW library will fail to write ECW, it can only read.  I  
think it's JP2 can both read and write.  I'm not a C++ programmer to  
be able to try a thorough fix.

On May 31, 2008, at 10:02 AM, jluis@ualg.pt wrote:

> Hi,
>
> For the record.
> I built the ecw 3.3 library on OSX but I had to change line 191 of  
> NCSSocket.cpp
>
> #       ifdef MACOSX
>        //int tempSize = sizeof(struct sockaddr);          <== THIS
>        socklen_t tempSize = sizeof(struct sockaddr);      <== TO THIS
> #       else
>        socklen_t tempSize = sizeof(struct sockaddr);
> #       endif
>
>
> Joaquim Luis
>
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin


From even.rouault at mines-paris.org  Sat May 31 11:45:53 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat May 31 11:45:59 2008
Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <200805311730.13070.even.rouault@mines-paris.org>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
	<BAY118-W11CB08B2A6CDD18BE68BD6C7B90@phx.gbl>
	<200805311730.13070.even.rouault@mines-paris.org>
Message-ID: <200805311745.54053.even.rouault@mines-paris.org>

And I suspect that the "_TIFFmemcpy(n,&o->tdir_offset,4)" is also bogus as 
tdir_offset is 64 bit large too.
That should be fixed too by the same method :

nTemp = (uint32)o->tdir_offset;
_Tiffmemcpy(n, &nTemp, 4);

Those problems are probably not seen on little endian machines as the first 4 
bytes contain the lowest 32 bit word, which is the one we want to put into 
the n pointer... I'm also wondering why there's not a test to see if it must 
be swabbed afterwards, as it's done for the tag, type and count fields.

Le Saturday 31 May 2008 17:30:11 Even Rouault, vous avez ?crit?:
> Dan,
>
> Your fix is not the right one. But I recognize that my previous suggestion
> could lead into error.
>
> In fact, tdir_count field is a uint64 in libtiff 4.0.
> So the correct fix is :
>
> uint32 nTemp = (uint32)o->tdir_count;
> _Tiffmemcpy(n, &nTemp, 4);
>
> Even
>
> ---------------------------------------------------------------------------
>--------
>
> RE: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
> De?:
> Dan Greve <grevedan@hotmail.com>
>   ??:
> Bob Friesenhahn <bfriesen@simple.dallas.tx.us>, Even Rouault
> <even.rouault@mines-paris.org>
>   CC?:
> gdal-dev@lists.osgeo.org, tiff@lists.osgeo.org, Andy Cave
> <andy.cave@hamillroad.com>, mailing list <tiff@lists.maptools.org>
>   Date?:
> Aujourd'hui 16:49:15
>   ?
> Sure enough, the pointer n is not null, and throws a sigsegv fault. Aftern
> changing from
> ?
> *(uint32*)n=(uint32)o->tdir_count; ? ? ? ? ? ?TO
> ?
> _TIFFmemcpy(n, &o->tdir_count, 4)
> ?
> The execution passes this point, but where as *(uint32*)n should be 1, it
> is 0. This causes errors later in the GDALOpen call on the tiff dataset,
> which fails with error "TiffFetchNormalTag:incorrect count for
> "SamplesPerPixel". debugging continues....
> ?
> -- Dan Greve
> -- Software Engineering
> -- Northrop Grumman Corp.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jluis at ualg.pt  Sat May 31 13:01:03 2008
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Sat May 31 13:01:09 2008
Subject: [gdal-dev] Building ECW on Mc OSX
In-Reply-To: <57F81352-A553-4BE4-98B6-C928F8C4B214@kyngchaos.com>
References: <20080531170211.307514o8l4neykys@wmail.ualg.pt>
	<57F81352-A553-4BE4-98B6-C928F8C4B214@kyngchaos.com>
Message-ID: <20080531190103.11864j58aanbfiww@wmail.ualg.pt>

William,
Thanks a lot for this info.

Joaquim

> The ermapper forums are still operating, and there you'll find my  
> thread that mentions a few other patches.  Besides the NCSSocket  
> patch, there are problems with threading that need fixing:
>
> http://forums.ermapper.com/viewtopic.php?t=2446
>
> Also, I have a few other patches to get it working on OSX 10.5  
> Leopard.  I didn't realize the forums were still operating until  
> just now, so I haven't updated that thread with the latest yet.
>
> Even so, the ECW library will fail to write ECW, it can only read.   
> I think it's JP2 can both read and write.  I'm not a C++ programmer  
> to be able to try a thorough fix.
>
> On May 31, 2008, at 10:02 AM, jluis@ualg.pt wrote:
>
>> Hi,
>>
>> For the record.
>> I built the ecw 3.3 library on OSX but I had to change line 191 of  
>> NCSSocket.cpp
>>
>> #       ifdef MACOSX
>>       //int tempSize = sizeof(struct sockaddr);          <== THIS
>>       socklen_t tempSize = sizeof(struct sockaddr);      <== TO THIS
>> #       else
>>       socklen_t tempSize = sizeof(struct sockaddr);
>> #       endif
>>
>>
>> Joaquim Luis
>>
>> ----------------------------------------------------------------
>> This message was sent using IMP, the Internet Messaging Program.
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
> does that remind me of?  Ah, yes - life."
>
> - Marvin
>
>
>
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From woklist at kyngchaos.com  Sat May 31 14:01:06 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat May 31 14:01:10 2008
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.5.2 RC3 as 1.5.2
In-Reply-To: <483F13BD.1060604@pobox.com>
References: <483F13BD.1060604@pobox.com>
Message-ID: <FC8A9800-1000-406E-8FE9-187529C25995@kyngchaos.com>

OSX 10.5 Leopard build mostly OK.  One new failure in the autotests:

   TEST: isis_1 ...
old =  PROJCS["Equirectangular Mars",
     GEOGCS["GCS_Mars",
         DATUM["D_Mars",
             SPHEROID["Mars_localRadius",3394813857.975946,0]],
         PRIMEM["Reference_Meridian",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Equirectangular"],
     PARAMETER["latitude_of_origin",-15.14700031280518],
     PARAMETER["central_meridian",184.4129943847656],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0]]
new =  PROJCS["Equirectangular Mars",
     GEOGCS["GCS_Mars",
         DATUM["D_Mars",
             SPHEROID["Mars_localRadius",3394813.857975945,0]],
         PRIMEM["Reference_Meridian",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Equirectangular"],
     PARAMETER["latitude_of_origin",-15.14700031280518],
     PARAMETER["central_meridian",184.4129943847656],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0]]
fail
     Projections differ
   TEST: isis_2 ...
fail

similar failure - spheroid off by magnitude of 1000


The WCS/WMS tests also had connection failures - refused/system  
overload.


I'm still using HDF4.2r2 and HDF5 1.6.x, so I don't have the problems  
others are having with those.


I've updated to the latest Xcode 3.1 beta on Leopard (iPhone SDK  
beta), and it looks like the one optimization problem with the geotiff  
driver is gone :)

But I still have the odd makefile issue where it builds the object  
files as *.lo + .libs/*.o, but the target deps are *.o, so everything  
gets recompiled when I make install after make, with the side effect  
that the apps can't find the *.o to link into their binaries.  I have  
to remove 'default' from the install target deps so it doesn't  
recompile everything, and change all the app targets to link the *.lo  
objects.


On May 29, 2008, at 3:36 PM, Frank Warmerdam wrote:

>
> Folks,
>
> I have a new release candidate up that includes the CPLAtof() fixes
> (#2036 related) as well as some GeoJSON improvements.
>
>  http://download.osgeo.org/gdal/gdal-1.5.2RC3.tar.gz
>  http://download.osgeo.org/gdal/gdal152RC3.zip
>
> Motion: GDAL 1.5.2 RC2 is adopted as the official GDAL 1.5.2 release.
>
> Please vote after testing within the next two days, and we can issue  
> the
> official release on Tuesday (I'm out Monday).
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan


From grevedan at hotmail.com  Sat May 31 14:01:57 2008
From: grevedan at hotmail.com (Dan Greve)
Date: Sat May 31 14:01:59 2008
Subject: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10
In-Reply-To: <200805311745.54053.even.rouault@mines-paris.org>
References: <BAY118-W48661A64DCC8F8DD5F1FD1C7BE0@phx.gbl>
	<BAY118-W11CB08B2A6CDD18BE68BD6C7B90@phx.gbl>
	<200805311730.13070.even.rouault@mines-paris.org>
	<200805311745.54053.even.rouault@mines-paris.org>
Message-ID: <BAY118-W167E31FE296109EEA4E925C7B90@phx.gbl>


I think I"ll just wait until libTiff is fixed.  I replace frmts/gtiff/libtiff from gdal-1.5.1 build with frmts/gtiff/libtiff from gdal-1.4.1 build.  voila, works like a champ.  It meets my requirements of just creating a compressed geotiff from an uncompressed nitf.  (I would rather create a compressed nitf from uncompressed geotiff, but this is not possible with jpeg & Create() in NITF.) As a result i go from uncompressed nitf to compressed geotiff, to compressed nitf using CreateCopy.
Thanks again for clearing up the haze.
 
-- Dan Greve
-- Software Engineer
-- Northrop Grumman Corp.
> From: even.rouault@mines-paris.org> To: gdal-dev@lists.osgeo.org> Subject: Re: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10> Date: Sat, 31 May 2008 17:45:53 +0200> CC: grevedan@hotmail.com; andy.cave@hamillroad.com; tiff@lists.maptools.org; tiff@lists.osgeo.org; bfriesen@simple.dallas.tx.us> > And I suspect that the "_TIFFmemcpy(n,&o->tdir_offset,4)" is also bogus as > tdir_offset is 64 bit large too.> That should be fixed too by the same method :> > nTemp = (uint32)o->tdir_offset;> _Tiffmemcpy(n, &nTemp, 4);> > Those problems are probably not seen on little endian machines as the first 4 > bytes contain the lowest 32 bit word, which is the one we want to put into > the n pointer... I'm also wondering why there's not a test to see if it must > be swabbed afterwards, as it's done for the tag, type and count fields.> > Le Saturday 31 May 2008 17:30:11 Even Rouault, vous avez ?crit :> > Dan,> >> > Your fix is not the right one. But I recognize that my previous suggestion> > could lead into error.> >> > In fact, tdir_count field is a uint64 in libtiff 4.0.> > So the correct fix is :> >> > uint32 nTemp = (uint32)o->tdir_count;> > _Tiffmemcpy(n, &nTemp, 4);> >> > Even> >> > ---------------------------------------------------------------------------> >--------> >> > RE: [Tiff] Re: [gdal-dev] Problem with libTiff on Solaris 10> > De :> > Dan Greve <grevedan@hotmail.com>> > ? :> > Bob Friesenhahn <bfriesen@simple.dallas.tx.us>, Even Rouault> > <even.rouault@mines-paris.org>> > CC :> > gdal-dev@lists.osgeo.org, tiff@lists.osgeo.org, Andy Cave> > <andy.cave@hamillroad.com>, mailing list <tiff@lists.maptools.org>> > Date :> > Aujourd'hui 16:49:15> >  > > Sure enough, the pointer n is not null, and throws a sigsegv fault. Aftern> > changing from> >  > > *(uint32*)n=(uint32)o->tdir_count;            TO> >  > > _TIFFmemcpy(n, &o->tdir_count, 4)> >  > > The execution passes this point, but where as *(uint32*)n should be 1, it> > is 0. This causes errors later in the GDALOpen call on the tiff dataset,> > which fails with error "TiffFetchNormalTag:incorrect count for> > "SamplesPerPixel". debugging continues....> >  > > -- Dan Greve> > -- Software Engineering> > -- Northrop Grumman Corp.> > _______________________________________________> > gdal-dev mailing list> > gdal-dev@lists.osgeo.org> > http://lists.osgeo.org/mailman/listinfo/gdal-dev> > 
_________________________________________________________________
Change the world with e-mail. Join the i?m Initiative from Microsoft.
http://im.live.com/Messenger/IM/Join/Default.aspx?source=EML_WL_ChangeWorld
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080531/0ebfeae8/attachment.html
From even.rouault at mines-paris.org  Sat May 31 14:09:25 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat May 31 14:09:33 2008
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.5.2 RC3 as 1.5.2
In-Reply-To: <FC8A9800-1000-406E-8FE9-187529C25995@kyngchaos.com>
References: <483F13BD.1060604@pobox.com>
	<FC8A9800-1000-406E-8FE9-187529C25995@kyngchaos.com>
Message-ID: <200805312009.26241.even.rouault@mines-paris.org>

The failure on isis_1 from the autotest snapshot of GDAL 1.5.0 is expected. 
The expected value was in fact wrong and the test has been fixed in the SVN 
repository of branches/1.5. See 
http://trac.osgeo.org/gdal/changeset/14362/branches/1.5/autotest

Le Saturday 31 May 2008 20:01:06 William Kyngesburye, vous avez ?crit?:
> OSX 10.5 Leopard build mostly OK.  One new failure in the autotests:
>
>    TEST: isis_1 ...
> old =  PROJCS["Equirectangular Mars",
>      GEOGCS["GCS_Mars",
>          DATUM["D_Mars",
>              SPHEROID["Mars_localRadius",3394813857.975946,0]],
>          PRIMEM["Reference_Meridian",0],
>          UNIT["degree",0.0174532925199433]],
>      PROJECTION["Equirectangular"],
>      PARAMETER["latitude_of_origin",-15.14700031280518],
>      PARAMETER["central_meridian",184.4129943847656],
>      PARAMETER["false_easting",0],
>      PARAMETER["false_northing",0]]
> new =  PROJCS["Equirectangular Mars",
>      GEOGCS["GCS_Mars",
>          DATUM["D_Mars",
>              SPHEROID["Mars_localRadius",3394813.857975945,0]],
>          PRIMEM["Reference_Meridian",0],
>          UNIT["degree",0.0174532925199433]],
>      PROJECTION["Equirectangular"],
>      PARAMETER["latitude_of_origin",-15.14700031280518],
>      PARAMETER["central_meridian",184.4129943847656],
>      PARAMETER["false_easting",0],
>      PARAMETER["false_northing",0]]
> fail
>      Projections differ
>    TEST: isis_2 ...
> fail
>
> similar failure - spheroid off by magnitude of 1000
>
>
> The WCS/WMS tests also had connection failures - refused/system
> overload.
>
>
> I'm still using HDF4.2r2 and HDF5 1.6.x, so I don't have the problems
> others are having with those.
>
>
> I've updated to the latest Xcode 3.1 beta on Leopard (iPhone SDK
> beta), and it looks like the one optimization problem with the geotiff
> driver is gone :)
>
> But I still have the odd makefile issue where it builds the object
> files as *.lo + .libs/*.o, but the target deps are *.o, so everything
> gets recompiled when I make install after make, with the side effect
> that the apps can't find the *.o to link into their binaries.  I have
> to remove 'default' from the install target deps so it doesn't
> recompile everything, and change all the app targets to link the *.lo
> objects.
>
> On May 29, 2008, at 3:36 PM, Frank Warmerdam wrote:
> > Folks,
> >
> > I have a new release candidate up that includes the CPLAtof() fixes
> > (#2036 related) as well as some GeoJSON improvements.
> >
> >  http://download.osgeo.org/gdal/gdal-1.5.2RC3.tar.gz
> >  http://download.osgeo.org/gdal/gdal152RC3.zip
> >
> > Motion: GDAL 1.5.2 RC2 is adopted as the official GDAL 1.5.2 release.
> >
> > Please vote after testing within the next two days, and we can issue
> > the
> > official release on Tuesday (I'm out Monday).
> >
> > Best regards,
> > --
> > ---------------------------------------
> > +--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com light and sound - activate the windows |
> > http://pobox.com/~warmerdam and watch the world go round - Rush    |
> > President OSGeo, http://osgeo.org
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "Mon Dieu! but they are all alike.  Cheating, murdering, lying,
> fighting, and all for things that the beasts of the jungle would not
> deign to possess - money to purchase the effeminate pleasures of
> weaklings.  And yet withal bound down by silly customs that make them
> slaves to their unhappy lot while firm in the belief that they be the
> lords of creation enjoying the only real pleasures of existence....
>
> - the wisdom of Tarzan
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From punk.kish at gmail.com  Sat May 31 14:25:26 2008
From: punk.kish at gmail.com (P Kishor)
Date: Sat May 31 14:25:28 2008
Subject: [gdal-dev] gdal translate error converting ArcGRID binary to ASCII
Message-ID: <cdf6db500805311125i4c533a06wc338bc578a55a620@mail.gmail.com>

I have a few ArcGRID binary files (.adf extension) that I want to
convert to ArcGRID ASCII (so I may open them with QGIS).

An old email from Frank W indicates this can be done with gdal_translate. See

http://mapserver.gis.umn.edu/data2/wilma/mapserver-users/0405/msg00005.html

I was, however, unable to do this successfully. Here is my saga --

[01:45 PM] ~/Data/climate_change/cartagena_arcgrid$ gdal_translate
Usage: gdal_translate [--help-general]
       [-ot {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
             CInt16/CInt32/CFloat32/CFloat64}] [-strict]
       [-of format] [-b band] [-outsize xsize[%] ysize[%]]
       [-scale [src_min src_max [dst_min dst_max]]]
       [-srcwin xoff yoff xsize ysize] [-projwin ulx uly lrx lry]
       [-a_srs srs_def] [-a_ullr ulx uly lrx lry] [-a_nodata value]
       [-gcp pixel line easting northing [elevation]]*
       [-mo "META-TAG=VALUE"]* [-quiet] [-sds]
       [-co "NAME=VALUE"]*
       src_dataset dst_dataset

GDAL 1.5.1, released 2008/03/14

The following format drivers are configured and support output:
  VRT: Virtual Raster
  GTiff: GeoTIFF
  NITF: National Imagery Transmission Format
  HFA: Erdas Imagine Images (.img)
  ELAS: ELAS
  AAIGrid: Arc/Info ASCII Grid
  DTED: DTED Elevation Raster
  PNG: Portable Network Graphics
  JPEG: JPEG JFIF
  MEM: In Memory Raster
  GIF: Graphics Interchange Format (.gif)
  XPM: X11 PixMap Format
  BMP: MS Windows Device Independent Bitmap
  PCIDSK: PCIDSK Database File
  PCRaster: PCRaster Raster File
  ILWIS: ILWIS Raster Map
  SRTMHGT: SRTMHGT File Format
  Leveller: Leveller heightfield
  Terragen: Terragen heightfield
  PNM: Portable Pixmap Format (netpbm)
  ENVI: ENVI .hdr Labelled
  EHdr: ESRI .hdr Labelled
  PAux: PCI .aux Labelled
  MFF: Vexcel MFF Raster
  MFF2: Vexcel MFF2 (HKV) Raster
  BT: VTP .bt (Binary Terrain) 1.3 Format
  IDA: Image Data and Analysis
  ERS: ERMapper .ers Labelled
  FIT: FIT Image
  RMF: Raster Matrix Format
  RST: Idrisi Raster A.1
  INGR: Intergraph Raster
  GSAG: Golden Software ASCII Grid (.grd)
  GSBG: Golden Software Binary Grid (.grd)
  USGSDEM: USGS Optional ASCII DEM (and CDED)
  ADRG: ARC Digitized Raster Graphics
[01:45 PM] ~/Data/climate_change/cartagena_arcgrid$ ls *.adf
76980974\76980974\dblbnd.adf*   76980974\76980974\prj.adf*
76980974\76980974\w001001.adf*
76980974\76980974\hdr.adf*      76980974\76980974\sta.adf*
76980974\76980974\w001001x.adf*
[01:46 PM] ~/Data/climate_change/cartagena_arcgrid$ gdal_translate -of
AAIGrid 76980974\\76980974\\w001001.adf out.grd
ERROR 4: `76980974\76980974\w001001.adf' not recognised as a supported
file format.

GDALOpen failed - 4
`76980974\76980974\w001001.adf' not recognised as a supported file format.

I am on an Intel Macbook Pro with Mac OS X 10.5.3.



-- 
Puneet Kishor
From woklist at kyngchaos.com  Sat May 31 14:59:15 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat May 31 14:59:18 2008
Subject: [gdal-dev] gdal translate error converting ArcGRID binary to ASCII
In-Reply-To: <cdf6db500805311125i4c533a06wc338bc578a55a620@mail.gmail.com>
References: <cdf6db500805311125i4c533a06wc338bc578a55a620@mail.gmail.com>
Message-ID: <F2248315-8BF9-4FDE-9BB9-051FADE9B0A7@kyngchaos.com>

On May 31, 2008, at 1:25 PM, P Kishor wrote:

> [01:45 PM] ~/Data/climate_change/cartagena_arcgrid$ ls *.adf
> 76980974\76980974\dblbnd.adf*   76980974\76980974\prj.adf*
> 76980974\76980974\w001001.adf*
> 76980974\76980974\hdr.adf*      76980974\76980974\sta.adf*
> 76980974\76980974\w001001x.adf*
> [01:46 PM] ~/Data/climate_change/cartagena_arcgrid$ gdal_translate -of
> AAIGrid 76980974\\76980974\\w001001.adf out.grd
> ERROR 4: `76980974\76980974\w001001.adf' not recognised as a supported
> file format.
>
> GDALOpen failed - 4
> `76980974\76980974\w001001.adf' not recognised as a supported file  
> format.
>
> I am on an Intel Macbook Pro with Mac OS X 10.5.3.
>

One possibility is the backslashes - I see that often when downloading  
a zip made on Windows and they expand into a flat file layout, but  
they indicate a directory and file structure that GDAL may be  
expecting.  Try removing the prefix of 'folders' from all the file  
names so it looks like:

dblbnd.adf
hdr.adf
prj.adf
sta.adf
w001001.adf
w001001x.adf

and put it in a folder named '76980974'.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From punk.kish at gmail.com  Sat May 31 15:20:37 2008
From: punk.kish at gmail.com (P Kishor)
Date: Sat May 31 15:20:40 2008
Subject: [gdal-dev] gdal translate error converting ArcGRID binary to ASCII
In-Reply-To: <F2248315-8BF9-4FDE-9BB9-051FADE9B0A7@kyngchaos.com>
References: <cdf6db500805311125i4c533a06wc338bc578a55a620@mail.gmail.com>
	<F2248315-8BF9-4FDE-9BB9-051FADE9B0A7@kyngchaos.com>
Message-ID: <cdf6db500805311220i43f06054r43110d004298f1c5@mail.gmail.com>

On 5/31/08, William Kyngesburye <woklist@kyngchaos.com> wrote:
> On May 31, 2008, at 1:25 PM, P Kishor wrote:
>
>
> > [01:45 PM] ~/Data/climate_change/cartagena_arcgrid$ ls
> *.adf
> > 76980974\76980974\dblbnd.adf*   76980974\76980974\prj.adf*
> > 76980974\76980974\w001001.adf*
> > 76980974\76980974\hdr.adf*      76980974\76980974\sta.adf*
> > 76980974\76980974\w001001x.adf*
> > [01:46 PM] ~/Data/climate_change/cartagena_arcgrid$
> gdal_translate -of
> > AAIGrid 76980974\\76980974\\w001001.adf out.grd
> > ERROR 4: `76980974\76980974\w001001.adf' not recognised as a supported
> > file format.
> >
> > GDALOpen failed - 4
> > `76980974\76980974\w001001.adf' not recognised as a supported file format.
> >
> > I am on an Intel Macbook Pro with Mac OS X 10.5.3.
> >
> >
>
>  One possibility is the backslashes - I see that often when downloading a
> zip made on Windows and they expand into a flat file layout, but they
> indicate a directory and file structure that GDAL may be expecting.  Try
> removing the prefix of 'folders' from all the file names so it looks like:
>
>  dblbnd.adf
>  hdr.adf
>  prj.adf
>  sta.adf
>  w001001.adf
>  w001001x.adf
>
>  and put it in a folder named '76980974'.
>

I suspected as such, but instead of putting all of them in a single
folder, I built a folder hierarchy as suggested by the back slashes (I
am not really conversant with the ArcGRID file/folder structure).

I will flatten the list and try it again.

Thanks.

Puneet.
