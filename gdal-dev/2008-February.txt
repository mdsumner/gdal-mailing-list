From ealpert at digitalglobe.com  Fri Feb  1 01:08:13 2008
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Fri Feb  1 01:08:18 2008
Subject: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings
In-Reply-To: <47A204FB.9030605@tkk.fi>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301BA0321@COMAIL01.digitalglobe.com>
	<47A18B52.7070707@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB23301BA034D@COMAIL01.digitalglobe.com>
	<47A204FB.9030605@tkk.fi>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23301BA04A3@COMAIL01.digitalglobe.com>

Ari,

I believe reference counts can be manipulated in perlguts. Would it be
possible to undef any rasterband variables referencing stale/orphaned
raster bands when the parent dataset is destroyed/dereferenced? This
would allow for perl to exit with a perl error rather than dumping core
as well wouldn't it?

Is there any use of a rasterband that has no parent dataset? 

If not then trying to use it after it's dataset is destroyed and no
other datasets reference it would be a programming error and the perl
"Can't call method "WriteRaster" on an undefined value at ./test.pl line
10", for instance, would be very appropriate and much more informative
than a core dump. It would also be a better outcome than producing a
bogus tiff.IMHO

Anyhow just curious if this is possible and was thinking about my
problem.


-e

-----Original Message-----
From: Ari Jolma [mailto:ari.jolma@tkk.fi] 
Sent: Thursday, January 31, 2008 10:27 AM
To: Ethan Alpert
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings

Ethan Alpert kirjoitti:
> Ari,
>
> Thanks for the response. Both suggested approaches fix the problem. I
> sort of see the utility of this approach however I still believe that
a
> FlushCache and dereferencing a dataset object should result in the
> output file being closed and in a complete state. Since the rasterband
> is associated with a dataset what is the usefulness of keeping the
> dadtaset and it's rasterband after its dataset has been "closed"? If
you
> don't dereference the bands the resulting file is not just incomplete
> but wrong. Extra data gets written into the tif and the georeferncing
is
> overwritten.
>   

The main idea is to prevent segfaults. If a reference to a closed 
dataset is allowed to exist, using it would cause a segfault. Yes, I see

that ideally it should just make the rasterband object stale underneath 
the user code. However, I don't know how to achieve that efficiently or 
without modifying GDAL itself.

Hm, the first would require maintaining a list of valid rasterband 
objects and at the beginning of each rasterband method the object should

be tested for validity. Probably not very efficient.

Ari

> -e 
>
>
>
> -----Original Message-----
> From: Ari Jolma [mailto:ari.jolma@tkk.fi] 
> Sent: Thursday, January 31, 2008 1:48 AM
> To: Ethan Alpert
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings
>
> Ethan,
>
> This is because of something, which is a good thing. You (now in 1.5) 
> get a reference to the dataset you create by getting its raster band. 
> Geo::GDAL does not destroy the dataset while there is a reference to
it.
>
> You either need to use the non-referencing version of GetRasterBand, 
> which is _GetRasterBand or get rid of the reference by destroying the 
> raster variable $b.
>
> Best regards,
>
> Ari
>
> Ethan Alpert kirjoitti:
>   
>> Prior to 1.5 I'd been using the trunk version from 11/06/2007.
Looking
>>     
>
>   
>> at gdal_wrap.cpp I see that there were two versions checked in 1.3.31

>> and 1.3.30. One of these checks breaks a piece of code that worked 
>> fine in version 1.3.29
>>
>> The problem relates to clean up when an object is dereferenced in
>>     
> perl.
>   
>> For many releases now if I created and wrote an image I would have to

>> Call FlushCache **and** undef the variable referencing the
GDALdataset
>>     
>
>   
>> inorder for all the data I wrote to actually end up in the file. This

>> no longer works. Now I must exit my perl script completely for the
all
>>     
>
>   
>> the data to be completely written.
>>
>> Below is an example of converting to grayscale. This works great if
at
>>     
>
>   
>> the end I'm done. But this is not the case. Later in the script I
call
>>     
>
>   
>> gdal_rasterize and the resulting file ends up not having a 
>> geotransform and is 3x too big. If I exit my app and call 
>> gdal_rasterize manually everything works correctly. This is what led 
>> me to believe there's been a change in the perl binding that relate
to
>>     
>
>   
>> cleaning up and finalizing the file that now doesn't execute on 
>> derference but only when the perl script exits.
>>
>> On 11/06/2007 my code worked. Today with the stock 1.5 it doesn't. So

>> my question is there some function to call to force the file to be 
>> completely written? If not is there a way to revert to the prior 
>> functionality. .
>>
>> $gtiff_driver = Geo::GDAL::GetDriverByName('GTiff');
>>
>> $fil = Geo::GDAL::Open("$tmp_dir/$$.tif");
>>
>> $xsize = $fil->{RasterXSize};
>>
>> $ysize = $fil->{RasterYSize};
>>
>> $tot = $xsize;
>>
>> $width = $xsize;
>>
>> $bandr = $fil->GetRasterBand(1);
>>
>> $bandg = $fil->GetRasterBand(2);
>>
>> $bandb = $fil->GetRasterBand(3);
>>
>> $output_ds= $gtiff_driver->Create("$tmp_dir/$$\_bw.tif", 
>> $fil->{RasterXSize}, $fil->{RasterYSize}, 1,
>>     
> $Geo::GDAL::Const::GDT_Byte);
>   
>> $output_ds->SetGeoTransform($fil->GetGeoTransform);
>>
>> $output_ds->SetProjection($fil->GetProjection);
>>
>> $b = $output_ds->GetRasterBand(1);
>>
>> for($k = 0; $k < $fil->{RasterYSize}; $k++) {
>>
>> $scanliner = $bandr->ReadRaster(0,$k,$fil->{RasterXSize},1);
>>
>> $scanlineb = $bandb->ReadRaster(0,$k,$fil->{RasterXSize},1);
>>
>> $scanlineg = $bandg->ReadRaster(0,$k,$fil->{RasterXSize},1);
>>
>> @datar = unpack("C[$tot]",$scanliner);
>>
>> @datag = unpack("C[$tot]",$scanlineg);
>>
>> @datab = unpack("C[$tot]",$scanlineb);
>>
>> @datagrey = ();
>>
>> $min = 300;
>>
>> $max = -1;
>>
>> for ($i = 0; $i < scalar @datar; $i++) {
>>
>> $t = (.3 * $datar[$i] + .59 * $datag[$i] + .11 * $datab[$i]) +
>>     
> .000001;
>   
>> push @datagrey, int ($t+.5);
>>
>> }
>>
>> $ot = pack("c[$tot]",@datagrey);
>>
>> $b->WriteRaster(0,$k,$width,1,$ot);
>>
>> }
>>
>> $output_ds->FlushCache;
>>
>> undef $output_ds;
>>
>> later I call:
>>
>> system "gdal_rasterize -i -l $$ -b 1 -burn 0 $tmp_dir/$$.shp 
>> $tmp_dir/$$\_bw.tif ";
>>
>>
>>     
>
------------------------------------------------------------------------
>   
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     
>
>
>   


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From beyhan at deprem.gov.tr  Fri Feb  1 08:55:17 2008
From: beyhan at deprem.gov.tr (Murat BEYHAN)
Date: Fri Feb  1 08:55:32 2008
Subject: [gdal-dev] installing problem
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23301BA04A3@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301BA0321@COMAIL01.digitalglobe.com>
	<47A18B52.7070707@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB23301BA034D@COMAIL01.digitalglobe.com>
	<47A204FB.9030605@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB23301BA04A3@COMAIL01.digitalglobe.com>
Message-ID: <20080201135447.M14252@deprem.gov.tr>

Dear friends,

I'm going to install mapserver5.0.2 to the new mandriva2008 x64 OS

I was faced a problem when I try to install gdal-1.5.0

The problem as follows.

In file included from ogrmysqldriver.cpp:30:
ogr_mysql.h:34:23: error: my_global.h: No such file or directory
ogr_mysql.h:35:19: error: mysql.h: No such file or directory
In file included from ogrmysqldriver.cpp:30:
ogr_mysql.h:73: error: ISO C++ forbids declaration of 'MYSQL_RES' with no type
ogr_mysql.h:73: error: expected ';' before '*' token
ogr_mysql.h:170: error: 'MYSQL_RES' has not been declared
ogr_mysql.h:195: error: ISO C++ forbids declaration of 'MYSQL' with no type
ogr_mysql.h:195: error: expected ';' before '*' token
ogr_mysql.h:211: error: ISO C++ forbids declaration of 'MYSQL' with no type
ogr_mysql.h:211: error: expected ';' before '*' token
ogr_mysql.h:214: error: expected `;' before 'int'
make[3]: *** [../o/ogrmysqldriver.o] Error 1
make[3]: Leaving directory `/usr/local/gdal-1.5.0/ogr/ogrsf_frmts/mysql'
make[2]: *** [mysql-target] Error 2
make[2]: Leaving directory `/usr/local/gdal-1.5.0/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory `/usr/local/gdal-1.5.0/ogr'
make: *** [ogr-target] Error 2

And I strictly would like to use ogr functionality.

So How can I pass this handicap.
Regards. 
Murat


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.

From ari.jolma at tkk.fi  Fri Feb  1 09:31:56 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Fri Feb  1 09:31:54 2008
Subject: [gdal-dev] FW: Problem with GDAL perl 1.5 bindings
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23301BA04A3@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23301BA0321@COMAIL01.digitalglobe.com>
	<47A18B52.7070707@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB23301BA034D@COMAIL01.digitalglobe.com>
	<47A204FB.9030605@tkk.fi>
	<8B319E5A30FF4A48BE7EEAAF609DB23301BA04A3@COMAIL01.digitalglobe.com>
Message-ID: <47A32D5C.10007@tkk.fi>

Ethan Alpert kirjoitti:
> Ari,
>
> I believe reference counts can be manipulated in perlguts. Would it be
> possible to undef any rasterband variables referencing stale/orphaned
> raster bands when the parent dataset is destroyed/dereferenced?

That could be possible. At least it might be possible to invalidate the 
rasterband object somehow. (but see below)

> This would allow for perl to exit with a perl error rather than dumping core
> as well wouldn't it?
>
> Is there any use of a rasterband that has no parent dataset? 
>   

No.

> If not then trying to use it after it's dataset is destroyed and no
> other datasets reference it would be a programming error and the perl
> "Can't call method "WriteRaster" on an undefined value at ./test.pl line
> 10", for instance, would be very appropriate and much more informative
> than a core dump. It would also be a better outcome than producing a
> bogus tiff.IMHO
>   

Yes, but the objects in Geo::GDAL are just references to the C++ or C 
pointers in the wrappers. At the point when the destruction of a Dataset 
is happening we do have such a reference to the (possible) RasterBand 
pointers. So, we could do something with it, but as it is only a pointer 
(as I believe), the real invalidation should happen in GDAL proper, 
which does not have any mechanism for it -- and I guess Frank's not very 
keen on providing one. ;)

Ari

-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mgfernandes at ualg.pt  Fri Feb  1 09:47:23 2008
From: mgfernandes at ualg.pt (Miguel Fernandes)
Date: Fri Feb  1 09:51:32 2008
Subject: [gdal-dev] Version gdal-svn-stable-2008.01.21 with ECW support
	in windows
In-Reply-To: <47A1B57B.1020609@ualg.pt>
References: <47A0BF6E.8050307@ualg.pt> <47A0C28D.20005@pobox.com>
	<47A0C76C.5060404@ualg.pt> <47A0CBC5.8090606@pobox.com>
	<47A1B57B.1020609@ualg.pt>
Message-ID: <47A330FB.3050104@ualg.pt>

FYI
Thanks

Miguel Fernandes wrote:
> Hello Frank,
>
> Thanks for the support, the problem was in the dll paths.
>
> Best Regards,
> Miguel Fernandes
>
> Frank Warmerdam wrote:
>> Miguel Fernandes wrote:
>>> Hello Frank,
>>>
>>> I've done that between every change i've made in nmake.opt
>>
>> Miguel,
>>
>> OK, the next things I'd check would be:
>>
>> 1) Are there .obj files getting created in gdal/frmts/ecw (eg. 
>> ecwdataset.obj)?
>>
>> 2) Are you really really sure you are running the copy of GDAL you 
>> just built?
>> Not just the .exe but also picking up the corresponding DLL?
>>
>> I assume you are checking for available formats using the --formats 
>> switch
>> to one of the commandline programs, is that right?
>>
>> Best regards,
>

-- 
/Miguel Fernandes
/*
**Projecto ERSTA*
CIMA - Centro de Investiga??o Marinha Ambiental
Campus de Gambelas
8005-139 Faro
Portugal

+351 289800995 ext.7574
mgfernandes@ualg.pt

From a.neumann at carto.net  Fri Feb  1 10:51:56 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri Feb  1 10:52:10 2008
Subject: [gdal-dev] changing white pixels to transparent
Message-ID: <59096.193.246.86.39.1201881116.squirrel@webmail.customers.iirc.at>

Hello!

I have 1bit (b+w) input GeoTIFF files and want to change them to 8bit gray
value pixels where the white bits are set to transparent. I had a look at
the gdal_translate and GeoTIFF options but did not find a way to
accomplish this task. Maybe I have overlooked some parameters/switches?

If this can't be accomplished with gdal - can you recommend another tool,
preferably a commandline tool?

Thanks,
Andreas

-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From warmerdam at pobox.com  Fri Feb  1 11:10:50 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  1 11:11:20 2008
Subject: [gdal-dev] changing white pixels to transparent
In-Reply-To: <59096.193.246.86.39.1201881116.squirrel@webmail.customers.iirc.at>
References: <59096.193.246.86.39.1201881116.squirrel@webmail.customers.iirc.at>
Message-ID: <47A3448A.6060209@pobox.com>

Andreas Neumann wrote:
> Hello!
> 
> I have 1bit (b+w) input GeoTIFF files and want to change them to 8bit gray
> value pixels where the white bits are set to transparent. I had a look at
> the gdal_translate and GeoTIFF options but did not find a way to
> accomplish this task. Maybe I have overlooked some parameters/switches?
> 
> If this can't be accomplished with gdal - can you recommend another tool,
> preferably a commandline tool?

Andreas,

One approach to this would be to use a VRT file as a mechanism to modify the
palette.

eg.

gdal_translate -of VRT fax2d.tif fax2d.vrt

Then edit fax2d.vrt which looks like this:

<VRTDataset rasterXSize="1728" rasterYSize="1082">
   <Metadata>
     <MDI key="TIFFTAG_SOFTWARE">fax2tiff</MDI>
     <MDI key="TIFFTAG_XRESOLUTION">204</MDI>
     <MDI key="TIFFTAG_YRESOLUTION">98</MDI>
     <MDI key="TIFFTAG_RESOLUTIONUNIT">2 (pixels/inch)</MDI>
   </Metadata>
   <VRTRasterBand dataType="Byte" band="1">
     <Metadata/>
     <ColorInterp>Palette</ColorInterp>
     <ColorTable>
       <Entry c1="255" c2="255" c3="255" c4="255"/>
       <Entry c1="0" c2="0" c3="0" c4="255"/>
     </ColorTable>
     <SimpleSource>
       <SourceFilename 
relativeToVRT="0">/gdal/root/usr2/data/geotiff/misc/fax2d.tif</SourceFilename>
       <SourceBand>1</SourceBand>
       <SrcRect xOff="0" yOff="0" xSize="1728" ySize="1082"/>
       <DstRect xOff="0" yOff="0" xSize="1728" ySize="1082"/>
     </SimpleSource>
   </VRTRasterBand>
</VRTDataset>

Modify the color table entry for pixel value 0 (white) to have an
alpha value of zero:

       <Entry c1="255" c2="255" c3="255" c4="0"/>

Then you can turn this VRT dataset back into a concrete file like:

   gdal_translate -of PNG fax2d.vrt fax2d.png

Note that I didn't write it out as TIFF.  TIFF files don't actually
have a mechanism for representing alpha (transparency) values in
color tables so our change would effectively be lost.  PNG files;
however, do.

This may not be the most elegant approach but perhaps it will suit
your needs.  The color table modification step could also be scripted
in python, awk or whatever if you want to fully automate the process.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jasonbeverage at gmail.com  Fri Feb  1 11:14:57 2008
From: jasonbeverage at gmail.com (Jason Beverage)
Date: Fri Feb  1 11:15:00 2008
Subject: [gdal-dev] Strong Naming of C# Wrappers
In-Reply-To: <f3b73b7d0801311543h52a6014au51d1abd56747e858@mail.gmail.com>
References: <2c4bbbeb0801311047j202f4869p39e7428b9deca4cc@mail.gmail.com>
	<f3b73b7d0801311203p485d1c6boe115d0cb700198c5@mail.gmail.com>
	<2c4bbbeb0801311336g25a0cff9l97ce9e23b3d450dc@mail.gmail.com>
	<f3b73b7d0801311543h52a6014au51d1abd56747e858@mail.gmail.com>
Message-ID: <2c4bbbeb0802010814w41b7f22fr546032f38070a32f@mail.gmail.com>

Hi Tamas,

Just got the latest GDAL from SVN and built the C# wrappers.  They appear to
be strongly named now.  Thanks for the quick turnaround!

Jason

On Jan 31, 2008 6:43 PM, Tamas Szekeres <szekerest@gmail.com> wrote:

> Added the strong name support in SVN trunk r13646
> We are using a fixed keyfile that won't change among the releases.
> gdal.snk have also been added to the repository.
> The keyfile is referenced by AssemblyInfo.cs that might be deprecated
> by the further Visual Studio releases. However this is the only way to
> support the strongnames for all of the platforms right now.
>
> Best regards,
>
> Tamas
>
> 2008/1/31, Jason Beverage <jasonbeverage@gmail.com>:
> > Thanks Tamas.  It's so much nicer to just be able to download a working
> > binary than having to compile and configure everything yourself.
> >
> > Thanks!
> >
> > Jason
> >
> >
> > On Jan 31, 2008 3:03 PM, Tamas Szekeres <szekerest@gmail.com> wrote:
> >
> > > Jason,
> > >
> > > Please file a ticket for this issue, I'll take care of this.
> > > The /keyfile compiler option is quite VS2005 specific, however I think
> > > we have alternative options to achieve the same results which is
> > > compiler neutral.
> > >
> > > Best regards,
> > >
> > > Tamas
> > >
> > >
> > >
> > >
> > > 2008/1/31, Jason Beverage <jasonbeverage@gmail.com>:
> > >
> > >
> > >
> > > > Hi all,
> > > >
> > > > I've been using the C# wrappers that come with FWTools, and I
> noticed
> > that
> > > > they are not strongly named.  This is causing a problem for my
> project
> > as we
> > > > require everything to be strongly named.
> > > >
> > > > I noticed that the makefile.vc has a "sign" step that generates the
> > gdal.snk
> > > > file, but it is not used after that.
> > > >
> > > > If you change the gdal_csharp target to include the /keyfile
> argument,
> > it
> > > > should produce strongly named assemblies:
> > > > $(CSC) /debug:full /keyfile:gdal.snk /target:library
> /out:ogr_csharp.dll
> > > > ogr\*.cs
> > > > $(CSC) /debug:full /keyfile:gdal.snk /target:library
> > /out:gdal_csharp.dll
> > > > gdal\*.cs
> > > >  $(CSC) /debug:full /keyfile:gdal.snk /target:library
> > > > /out:gdalconst_csharp.dll const\*.cs
> > > > $(CSC) /debug:full /keyfile:gdal.snk /target:library
> /out:osr_csharp.dll
> > > > osr\*.cs
> > > >
> > > > It would be great if the bindings that come from the FWTools distro
> > become
> > > > the "official" way to download the binaries and they are signed when
> we
> > get
> > > > them.
> > > >
> > > > Thanks!
> > > >
> > > > Jason
> > > >
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev@lists.osgeo.org
> > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >
> > >
> >
> >
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080201/0b406309/attachment.html
From warmerdam at pobox.com  Sat Feb  2 01:50:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Feb  2 01:50:09 2008
Subject: [gdal-dev] Win32 Default Build Options
Message-ID: <47A4129A.9080207@pobox.com>

Folks,

I spent some very frustrating hours trying to work out why the gsg (golden
surfer binary) format wasn't working on win32.  It turns out it used
dynamic_cast and our default build options didn't include /GR so dynamic
casts just didn't work.  Grr.

I have added /GR for Visual Studio .NET 2003 and earlier.  I'm not clear
whether it applies in VS.NET 2005 and later or not.

I also changed the default builds option an optimized non-debug build.  The
debug builds are too quirky (special runtime requirements) and so I don't
feel they are suitable as a default.

But what I would really like to do is remove /MDd in favor of /MD for debug
builds.  /MDd means we are building against the debug CRT - something I have
very rarely felt any need for.  I believe it is contrary to MS's EULA to
redistribute the debug CRT so the binaries are not very useful for reuse.
And it is hell mixing /MDd and /MD stuff.  Can someone remind me how /MDd
got added in nmake.opt?  I don't recall a discussion of the issue.

PS. /D_DEBUG apparently triggers a dependency on the debug CRT too, but
only in ATL code (for us this is only the stuff in the vb6 directory.  Boy,
did I swear a blue streak trying to work that out!

PPS. I'm not really so thrilled with all !IFDEF's in nmake.opt.  It is
interfering with the "essential simplicity" of it in my opinion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From omkaranathan at darshan3d.com  Sat Feb  2 04:26:52 2008
From: omkaranathan at darshan3d.com (Omkaranathan)
Date: Sat Feb  2 04:28:15 2008
Subject: [gdal-dev] Converting coordinate systems(gdalwarp)
Message-ID: <47A4375C.4060703@darshan3d.com>

Hi,
I am trying to convert a geotiff file from Lat/Long to UTM coordinates 
using gdalwarp.
The output data produced is gives proper coordinate system info but the 
data is only a black strip.

This is the command line option I have used .
gdalwarp -t_srs "+proj=utm +zone=19 +datum=WGS84" input.tif  out.tif
Am I doing something wrong?

It'll be great if you can suggest something.

Thanks

Om
From szekerest at gmail.com  Sat Feb  2 10:07:50 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Feb  2 10:07:53 2008
Subject: [gdal-dev] Win32 Default Build Options
In-Reply-To: <47A4129A.9080207@pobox.com>
References: <47A4129A.9080207@pobox.com>
Message-ID: <f3b73b7d0802020707v25a9ad6bhdbaf3115e94bfc44@mail.gmail.com>

2008/2/2, Frank Warmerdam <warmerdam@pobox.com>:
>
> But what I would really like to do is remove /MDd in favor of /MD for debug
> builds.  /MDd means we are building against the debug CRT - something I have
> very rarely felt any need for.  I believe it is contrary to MS's EULA to
> redistribute the debug CRT so the binaries are not very useful for reuse.
> And it is hell mixing /MDd and /MD stuff.  Can someone remind me how /MDd
> got added in nmake.opt?  I don't recall a discussion of the issue.
>

http://trac.osgeo.org/gdal/changeset/12549

> PPS. I'm not really so thrilled with all !IFDEF's in nmake.opt.  It is
> interfering with the "essential simplicity" of it in my opinion.
>

We have to use quite different options in many places depending on the
compiler and the platform type (Win64/Win32). It's inevitable to use
!IFDEF's to switch between those specialities. I'd rather use an
additional parameter (like GDAL_DEBUG) to switch between the debug and
the opimized builds at a common place.

Best regards,

Tamas
From jluis at ualg.pt  Sat Feb  2 11:48:41 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Feb  2 11:48:40 2008
Subject: [gdal-dev] Converting coordinate systems(gdalwarp)
In-Reply-To: <47A4375C.4060703@darshan3d.com>
References: <47A4375C.4060703@darshan3d.com>
Message-ID: <47A49EE9.1050705@ualg.pt>

Omkaranathan wrote:
> Hi,
> I am trying to convert a geotiff file from Lat/Long to UTM coordinates 
> using gdalwarp.
> The output data produced is gives proper coordinate system info but 
> the data is only a black strip.
>
> This is the command line option I have used .
> gdalwarp -t_srs "+proj=utm +zone=19 +datum=WGS84" input.tif  out.tif
> Am I doing something wrong?
>
> It'll be great if you can suggest something.

Omkaranathan
Previous reports of this kind of problem have turn out to be due a 3rd 
party reader handicap and not a file problem.
What soft are you using to display the out.tif?

J. Luis

From warmerdam at pobox.com  Sat Feb  2 12:29:26 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Feb  2 12:29:54 2008
Subject: [gdal-dev] Re: an advise about OGR const member function
In-Reply-To: <e1ec041d0802020139y4016c41du2b7bff9e46a81145@mail.gmail.com>
References: <e1ec041d0802020135w33d305frb1da59e749f09be3@mail.gmail.com>
	<e1ec041d0802020139y4016c41du2b7bff9e46a81145@mail.gmail.com>
Message-ID: <47A4A876.1030808@pobox.com>

Pan Liang wrote:
> example:
>     bool func(const OGRFeature* poFeature)
>     {
>         ...
>         // long OGRFeature::GetFID()
>         if( poFeature->GetFID()== _nFID )       return true;    //
> error C2662 in msvc2003.net
>         ...
>     }
> 
> but if long OGRFeature::GetFID() is declared as :
> long OGRFeature::GetFID() const, all is right.
> 
> such const member function modify can be applied to OGRFeatureDefn*
> OGRFeature::GetDefnRef() etc.

Pan,

I'm not sure why this went to gdal-dev-owner instead of gdal-dev or me
personally.  I've taken the liberty of bringing this back to gdal-dev.

I'm generally very leery about "const correctness" changes.  The alter
the ABI and generally cause more disruption than you might imagine.  If
we are going to do a bunch of const correctness changes they must only
occur in the development version (trunk - which will be 1.6.0 eventually)
and should only affect the C++ not C ABI.  We attempt to keep the C ABI
backward compatible to the greatest extent possible.

If you feel strongly about this matter, I would suggest you prepare an
RFC listing all the const correctness changes you would like to see made
for GDAL 1.6.0, and they can be discussed as a project and if approved
moved forward.

In the meantime, you will just need to cast away the constness of the
OGRFeature for methods such as you show above.

I do think we need to be more careful about getting const correctness
right in the first place when adding new interfaces to the library.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jluis at ualg.pt  Sat Feb  2 12:48:02 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Sat Feb  2 12:48:03 2008
Subject: [gdal-dev] Converting coordinate systems(gdalwarp)
In-Reply-To: <47A4A01C.6010401@darshan3d.com>
References: <47A4375C.4060703@darshan3d.com> <47A49EE9.1050705@ualg.pt>
	<47A4A01C.6010401@darshan3d.com>
Message-ID: <47A4ACD2.3020703@ualg.pt>

Omkaranathan wrote:
> I am using Virtual Planet Builder ( 
> http://www.openscenegraph.org/projects/VirtualPlanetBuilder ) from 
> Openscenegraph to convert into osg format and view in its viewer.
> The same file works properly if I am directly using it. But after 
> conversion I am facing the problem.

Well, I don't know that one (there are so many now).
Can you make available to us a small example file?

J. Luis

From szekerest at gmail.com  Sun Feb  3 05:50:17 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Feb  3 05:50:20 2008
Subject: [gdal-dev] Re: Motion: Adopt RFC 21: OGR SQL type cast and field
	name alias
In-Reply-To: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
References: <f3b73b7d0801301453y75f12d6dsfe65e514e9680f59@mail.gmail.com>
Message-ID: <f3b73b7d0802030250h7a5dcf19vf0d2f15793f2b6f@mail.gmail.com>

Folks,

The motion to adopt 'RFC 21: OGR SQL type cast and field name alias' has passed
with support from FrankW, DanielM, HowardB, EvenR and TamasS, and +0
from AndreyK.

http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast

I'll proceed with implementation.

Best regards,

Tamas
From marcello_ferrero at yahoo.com  Sun Feb  3 12:48:05 2008
From: marcello_ferrero at yahoo.com (marcello ferrero)
Date: Sun Feb  3 12:48:07 2008
Subject: [gdal-dev] Map Caching with GDAL
Message-ID: <647592.76976.qm@web60121.mail.yahoo.com>

Hi Robert,
thanks for the reply.
Maybe I'm wrong, but tilecache and memcached both are server side modules, while I need something for the client side of my application (think about something like google maps mobile).
On the other side GDAL in-memory raster seems to me capable of managing pre-decoded raster buffers that in my case would occupy too much memory. 

That's why I need something that is able to read a png (or jpeg) encoded  buffer from memory as it was a file reading.

Marcello


----- Original Message ----
From: Robert Coup <robert.coup@onetrackmind.co.nz>
To: marcello ferrero <marcello_ferrero@yahoo.com>
Cc: gdal-dev@lists.osgeo.org
Sent: Friday, January 25, 2008 11:14:06 PM
Subject: Re: [gdal-dev] Map Caching with GDAL

On 26/01/2008, marcello ferrero <marcello_ferrero@yahoo.com> wrote:
> in order to implement a map caching mechanism for my application I need to read tiles from a server (for example OpenStreetMap) and keep them in memory to speed up subsequent access to the same tiles once they have been already downloaded from the map server.
> To implement this, I'm going to manage a single indexed (x,y,z) data file where I keep the dump of each .png (or .jpg) file.

TileCache running with memcached could do exactly what you want, or
just memcached on its own.
  http://www.tilecache.org/
  http://www.danga.com/memcached/

> Therefore I need to access the .png (or .jpg) tile not from a file (in that case I would simply use GDALOpen to open it), but from a memory buffer.
>
> What are the GDAL functions to do what I need?

Have a look at the in-memory raster documentation:
http://gdal.org/frmt_mem.html

Rob :)


      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080203/d82d69c4/attachment.html
From warmerdam at pobox.com  Sun Feb  3 13:10:49 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Feb  3 13:11:17 2008
Subject: [gdal-dev] Map Caching with GDAL
In-Reply-To: <647592.76976.qm@web60121.mail.yahoo.com>
References: <647592.76976.qm@web60121.mail.yahoo.com>
Message-ID: <47A603A9.9010100@pobox.com>

marcello ferrero wrote:
> Hi Robert,
> thanks for the reply.
> Maybe I'm wrong, but tilecache and memcached both are server side 
> modules, while I need something for the client side of my application 
> (think about something like google maps mobile).
> On the other side GDAL in-memory raster seems to me capable of 
> managing pre-decoded raster buffers that in my case would occupy too 
> much memory.
>  
> That's why I need something that is able to read a png (or jpeg) 
> encoded  buffer from memory as it was a file reading.

Marcello,

I didn't really follow your question closely the first time around.  GDAL
does support reading some file formats directly from memory.  This is
used in drivers like WCS for instance.  Some useful entry points are:

   http://www.gdal.org/cpl__vsi_8h.html#1ecb3a78729ecea4d2ce22065a605244
   http://www.gdal.org/cpl__vsi_8h.html#66e2e6f093fd42f8a941b962d4c8a19e

You can see this in use in the minimal HTTP driver which just fetches
a remote file, and then opens it from the memory buffer.

   http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/wcs/httpdriver.cpp

Note that "in memory" files must have filenames in the /vsimem/ subtree.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From rayg at daylongraphics.com  Mon Feb  4 03:44:48 2008
From: rayg at daylongraphics.com (Ray Gardener)
Date: Mon Feb  4 03:43:49 2008
Subject: [gdal-dev] General Memory/Resource leak fixes(Cleanup calls)
In-Reply-To: <719254.62244.qm@web52912.mail.re2.yahoo.com>
References: <719254.62244.qm@web52912.mail.re2.yahoo.com>
Message-ID: <47A6D080.7030809@daylongraphics.com>

Is anyone getting two small memleaks when building GDAL 1.5.0 in VC6? 
I'm starting GDAL, enumerating a driver list, and then closing. These 
two blocks come up:

{50} normal block at 0x01C04148, 33 bytes long.
  Data: < C              > 00 43 00 CD CD CD CD CD CD CD CD ...
{49} normal block at 0x01C02DB8, 40 bytes long.
  Data: < |L             > 14 7C 4C 10 16 00 00 00 00 00 00 ...

There were many more leaks, but calling GDALDestroyDriverManager() 
resolved those.

Ray
From brownrigg at sunflower.com  Mon Feb  4 13:53:32 2008
From: brownrigg at sunflower.com (Rick Brownrigg)
Date: Mon Feb  4 14:23:49 2008
Subject: [gdal-dev] Config, static-proj, and bug 1345...
Message-ID: <47A75F2C.80904@sunflower.com>

Bug 1345 was filed about a year ago, referring to an issue when the 
configuration parameter "--with-static-proj4" is used *and* the PROJ 
library is in a non-standard place. In this case, the LIB macro in the 
generated GDALmake.opt file has a directive of "-L/path/to/proj/src", 
rather than "-L/path/to/proj/lib", and the build fails at link time.

The bug was closed, stating that the config logic attempts to deal with 
cases when linking against the PROJ build tree (as opposed to the 
install tree).   I don't know about linking against PROJ's build tree, 
but the logic does indeed fail when PROJ is installed somewhere else, 
with the precise behavior described by this bug.  I believe this bug is 
thus still valid, as it is conceivable PROJ may be installed at any 
arbitrary place (and indeed, consider MacOS X and the macports 
conventions for installation as an example).

Anybody concur/disagree?  I wish I could propose a solution, but I do 
not understand the various cases the logic in configure.in attempt to 
address (see configure.in, lines 1824-1895 in gdal1.5.0)

Rick Brownrigg

From warmerdam at pobox.com  Mon Feb  4 14:50:05 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  4 14:50:33 2008
Subject: [gdal-dev] Config, static-proj, and bug 1345...
In-Reply-To: <47A75F2C.80904@sunflower.com>
References: <47A75F2C.80904@sunflower.com>
Message-ID: <47A76C6D.3090903@pobox.com>

Rick Brownrigg wrote:
> Bug 1345 was filed about a year ago, referring to an issue when the 
> configuration parameter "--with-static-proj4" is used *and* the PROJ 
> library is in a non-standard place. In this case, the LIB macro in the 
> generated GDALmake.opt file has a directive of "-L/path/to/proj/src", 
> rather than "-L/path/to/proj/lib", and the build fails at link time.
> 
> The bug was closed, stating that the config logic attempts to deal with 
> cases when linking against the PROJ build tree (as opposed to the 
> install tree).   I don't know about linking against PROJ's build tree, 
> but the logic does indeed fail when PROJ is installed somewhere else, 
> with the precise behavior described by this bug.  I believe this bug is 
> thus still valid, as it is conceivable PROJ may be installed at any 
> arbitrary place (and indeed, consider MacOS X and the macports 
> conventions for installation as an example).
> 
> Anybody concur/disagree?  I wish I could propose a solution, but I do 
> not understand the various cases the logic in configure.in attempt to 
> address (see configure.in, lines 1824-1895 in gdal1.5.0)

Rick,

I have reviewed the configure logic and it still seems reasonably
sound. One thing I notice is that if *none* of the probes work the
build tree targetted configuration will get used instead of the more
reasonable install tree configuration.  But still, if this case kicks
in it means none of the link probes worked.

You are welcome to reopen the bug report, and document there why you think
it is broken.  But you will need to be quite specific, and you likely ought
to carefully review your config.log file for what happened in the proj
related probes.

PS. folks - the direct ticket link is:

   http://trac.osgeo.org/gdal/ticket/1345

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From wollez at gmx.net  Mon Feb  4 15:02:22 2008
From: wollez at gmx.net (Wolfgang)
Date: Mon Feb  4 15:02:22 2008
Subject: [gdal-dev] help needed with image creation
Message-ID: <47A76F4E.4090501@gmx.net>

Hi,

I want to create some images where I set the pixel values manually. The 
values are Floats that need to be mapped finally to a color map. I'm not 
really a skilled programmer but I've managed to get a first idea how to 
do it (in python):

from osgeo import gdal
import numpy as Numeric

format = "GTiff"
driver = gdal.GetDriverByName( format )

dst_filename='test.tif'
dst_ds = driver.Create( dst_filename, 3, 2, 1, gdal.GDT_Float32 )
raster=Numeric.array([[ 1.,  200.5 ,  3. ],[ 256. ,  5. ,  60. ]])
dst_ds.GetRasterBand(1).WriteArray( raster )

What I don't understand is how to create/define a color map so that the 
result looks better? I also suppose that it is not the best to create 
float tiffs as not so many applications will support that type. It would 
help me much if anybody could show me the steps needed to do the task.

I'm sorry if this looks too easy for skilled programmers, but I'm 
completely new to program graphics (with GDAL) and I still don't have 
the overview over all GDAL functions.

Any help is appreciated.

Wolfgang
From ivan.lucena at pmldnet.com  Mon Feb  4 15:48:48 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Mon Feb  4 15:57:12 2008
Subject: [gdal-dev] Win32 Default Build Options
In-Reply-To: <47A4129A.9080207@pobox.com>
References: <47A4129A.9080207@pobox.com>
Message-ID: <47A77A30.50005@pmldnet.com>

Frank,

I tested the GDAL build process on VC8 (VS2005) and all went well, but 
with no "/GR", if that was what you expected.

Example:

     cl /nologo /MD /EHsc /Ox /D_CRT_SECURE_NO_DEPRECATE 
/D_CRT_NONSTDC_NO_DE PRECATE /DNDEBUG -I..\..\port -I..\..\ogr 
-I..\..\gcore  -I..\..\alg /c bmpdataset.cpp

I will check the other issues as they come along my way.


I have a suggestion, I believe that most of us usually place all the 
FOSS projects in the same root folder, so it should be interesting to 
have a variable for that on nmake.opt, like:

DEV_HOME = C:\FOSS\

So, in all those place with "C:/warmerda" we should have $(DEV_HOME) 
instead:

C:\FOSS\gdal>grep warmerda nmake.opt
File nmake.opt:
# $Id: nmake.opt 13667 2008-02-02 06:41:24Z warmerdam $
GDAL_HOME = "C:\warmerda\bld"
#TIFF_INC =     -Ic:/warmerda/libtiff/libtiff
#TIFF_LIB =     c:/warmerda/libtiff/libtiff/libtiff_i.lib
#GEOTIFF_INC =   -Ic:/warmerda/libgeotiff -Ic:/warmerda/libgeotiff/libxtiff
#GEOTIFF_LIB =   C:/warmerda/libgeotiff/geotiff_i.lib
#ECWDIR  =      C:\warmerda\libecwj2-3.3
#DWGDIRECT=C:\warmerda\DWGdirect
#OGDIDIR =      D:\warmerda\iii\devdir
#XERCES_DIR =   c:\warmerda\supportlibs\xerces-c_2_6_0
#KAKDIR =       D:\warmerda\jp2\kakadu
#HDF4_DIR =     D:\warmerda\HDF41r5
#HDF5_DIR =     c:\warmerda\supportlibs\hdf5\5-164-win
#SZIP_DIR =      c:\warmerda\supportlibs\hdf5\szip20
#GEOS_DIR=C:/warmerda/geos

Not a big deal, just a suggestion.

Regards,

Ivan

Frank Warmerdam wrote:
> Folks,
> 
> I spent some very frustrating hours trying to work out why the gsg (golden
> surfer binary) format wasn't working on win32.  It turns out it used
> dynamic_cast and our default build options didn't include /GR so dynamic
> casts just didn't work.  Grr.
> 
> I have added /GR for Visual Studio .NET 2003 and earlier.  I'm not clear
> whether it applies in VS.NET 2005 and later or not.
> 
> I also changed the default builds option an optimized non-debug build.  The
> debug builds are too quirky (special runtime requirements) and so I don't
> feel they are suitable as a default.
> 
> But what I would really like to do is remove /MDd in favor of /MD for debug
> builds.  /MDd means we are building against the debug CRT - something I 
> have
> very rarely felt any need for.  I believe it is contrary to MS's EULA to
> redistribute the debug CRT so the binaries are not very useful for reuse.
> And it is hell mixing /MDd and /MD stuff.  Can someone remind me how /MDd
> got added in nmake.opt?  I don't recall a discussion of the issue.
> 
> PS. /D_DEBUG apparently triggers a dependency on the debug CRT too, but
> only in ATL code (for us this is only the stuff in the vb6 directory.  Boy,
> did I swear a blue streak trying to work that out!
> 
> PPS. I'm not really so thrilled with all !IFDEF's in nmake.opt.  It is
> interfering with the "essential simplicity" of it in my opinion.
> 
> Best regards,

From mitchelljj98 at gmail.com  Mon Feb  4 17:22:44 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Mon Feb  4 17:22:47 2008
Subject: [gdal-dev] can't remap a geotiff via gdalwarp
Message-ID: <fa2ac0580802041422p1f018e3by6b439566e3963a4d@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: inputfile.info
Type: application/octet-stream
Size: 6621 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080204/51b2fbfa/inputfile-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: outputfile.info
Type: application/octet-stream
Size: 6425 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080204/51b2fbfa/outputfile-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 256_w4.info
Type: application/octet-stream
Size: 1143 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080204/51b2fbfa/256_w4-0001.obj
From Chris.Barker at noaa.gov  Mon Feb  4 18:35:03 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Feb  4 18:33:44 2008
Subject: [gdal-dev] OGR and VPF
Message-ID: <47A7A127.2000804@noaa.gov>

Hi all,

Anyone know about OGR support for the "Vector Product Format"?

In particular, I'm looking to support the The Digital Nautical Charts 
produced by the National Geospatial-Intelligence Agency:

http://www.nga.mil/portal/site/dnc/

They appear to be in the "Vector Product Format":

http://www.nga.mil/portal/site/nga01/index.jsp?epi-content=GENERIC&itemID=a2986591e1b3af00VgnVCMServer23727a95RCRD&beanID=1629630080&viewID=Article

(got to love those clean links!)

I don't see it listed at:
http://www.gdal.org/ogr/ogr_formats.html

but some archived emails lead me to believe that maybe the OGDI Vectors 
format was somehow related.

Does anyone know how to read these files?

If not supported in OGR, are there any other Open Source libs for 
reading them (read only is fine).

-CHB





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Mon Feb  4 19:42:58 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  4 19:43:20 2008
Subject: [gdal-dev] OGR and VPF
In-Reply-To: <47A7A127.2000804@noaa.gov>
References: <47A7A127.2000804@noaa.gov>
Message-ID: <47A7B112.1030606@pobox.com>

Christopher Barker wrote:
> Hi all,
> 
> Anyone know about OGR support for the "Vector Product Format"?
> 
> In particular, I'm looking to support the The Digital Nautical Charts 
> produced by the National Geospatial-Intelligence Agency:
> 
> http://www.nga.mil/portal/site/dnc/
> 
> They appear to be in the "Vector Product Format":
> 
> http://www.nga.mil/portal/site/nga01/index.jsp?epi-content=GENERIC&itemID=a2986591e1b3af00VgnVCMServer23727a95RCRD&beanID=1629630080&viewID=Article 
> 
> 
> (got to love those clean links!)
> 
> I don't see it listed at:
> http://www.gdal.org/ogr/ogr_formats.html
> 
> but some archived emails lead me to believe that maybe the OGDI Vectors 
> format was somehow related.
> 
> Does anyone know how to read these files?
> 
> If not supported in OGR, are there any other Open Source libs for 
> reading them (read only is fine).

Chris,

OGDI is indeed the key.  You need to build OGDI which is *another*
multiformat geospatial library, then build GDAL/OGR with OGDI support
and then you can read VPF.  For the DNC dataset I have locally I use
the following as the OGR datasource name to read it (via OGDI).

   gltp:/vrf/home/warmerda/dnc13/h1316010

FWTools comes built with OGDI support if you want to try some preliminary
experiments using it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Feb  4 19:46:53 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  4 19:47:12 2008
Subject: [gdal-dev] Win32 Default Build Options
In-Reply-To: <47A77A30.50005@pmldnet.com>
References: <47A4129A.9080207@pobox.com> <47A77A30.50005@pmldnet.com>
Message-ID: <47A7B1FD.8070000@pobox.com>

Lucena, Ivan wrote:
> Frank,
> 
> I tested the GDAL build process on VC8 (VS2005) and all went well, but 
> with no "/GR", if that was what you expected.
> 
> Example:
> 
>     cl /nologo /MD /EHsc /Ox /D_CRT_SECURE_NO_DEPRECATE 
> /D_CRT_NONSTDC_NO_DE PRECATE /DNDEBUG -I..\..\port -I..\..\ogr 
> -I..\..\gcore  -I..\..\alg /c bmpdataset.cpp
> 
> I will check the other issues as they come along my way.

Ivan,

The problem with the GSG driver does not manifest at built time (except
as nasty warnings).  It only comes up at runtime.  So either check the
warnings carefull for stuff in the gdal/frmts/gsg directory or actually
try running "gdalinfo -mm " against the autotest/gdrivers/gsg_binary.grd
file.

> I have a suggestion, I believe that most of us usually place all the 
> FOSS projects in the same root folder, so it should be interesting to 
> have a variable for that on nmake.opt, like:
> 
> DEV_HOME = C:\FOSS\
> 
> So, in all those place with "C:/warmerda" we should have $(DEV_HOME) 
> instead:
> 
> C:\FOSS\gdal>grep warmerda nmake.opt
> File nmake.opt:
> # $Id: nmake.opt 13667 2008-02-02 06:41:24Z warmerdam $
> GDAL_HOME = "C:\warmerda\bld"
> #TIFF_INC =     -Ic:/warmerda/libtiff/libtiff

Well, these are intended to be updated appropriately for the
local context when they are uncommented - and frankly everyone
uses a different base directory name.  So I'm not really
enthusiastic about an additional layer of macros and assumptions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Chris.Barker at noaa.gov  Mon Feb  4 20:32:45 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Feb  4 20:31:25 2008
Subject: [gdal-dev] OGR and VPF
In-Reply-To: <47A7B112.1030606@pobox.com>
References: <47A7A127.2000804@noaa.gov> <47A7B112.1030606@pobox.com>
Message-ID: <47A7BCBD.6060805@noaa.gov>

Frank Warmerdam wrote:
 >> but some archived emails lead me to believe that maybe the OGDI 
Vectors format was somehow related.

 > OGDI is indeed the key.  You need to build OGDI which is *another*
 > multiformat geospatial library, then build GDAL/OGR with OGDI support
 > and then you can read VPF.

I'm running the Kyng Chaos build, which appears to have OGDI support, 
but I can't figure out what file to point ogrinfo at. I downloaded a 
chart (or thought I did), and got a zip file that had a dir in it named 
"DNC26". in there is:

COA26A DHT    LAT

in the COA26A dir is:

CAT         ECR         HYD         LHT         LINEAGE.DOC POR
CUL         ENV         IWY         LIBREF      NAV         REL
DQY         GRT         LCR         LIM         OBS         TILEREF

and a bunch of stuff in those dirs -- I'm lost!

Maybe I didn't actually download a chart!

I'll poke at it more, but if you have any suggestions, I'm all ears!

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Mon Feb  4 21:04:58 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb  4 21:05:17 2008
Subject: [gdal-dev] OGR and VPF
In-Reply-To: <47A7BCBD.6060805@noaa.gov>
References: <47A7A127.2000804@noaa.gov> <47A7B112.1030606@pobox.com>
	<47A7BCBD.6060805@noaa.gov>
Message-ID: <47A7C44A.5030700@pobox.com>

Christopher Barker wrote:
> Frank Warmerdam wrote:
>  >> but some archived emails lead me to believe that maybe the OGDI 
> Vectors format was somehow related.
> 
>  > OGDI is indeed the key.  You need to build OGDI which is *another*
>  > multiformat geospatial library, then build GDAL/OGR with OGDI support
>  > and then you can read VPF.
> 
> I'm running the Kyng Chaos build, which appears to have OGDI support, 
> but I can't figure out what file to point ogrinfo at. I downloaded a 
> chart (or thought I did), and got a zip file that had a dir in it named 
> "DNC26". in there is:
> 
> COA26A DHT    LAT
> 
> in the COA26A dir is:
> 
> CAT         ECR         HYD         LHT         LINEAGE.DOC POR
> CUL         ENV         IWY         LIBREF      NAV         REL
> DQY         GRT         LCR         LIM         OBS         TILEREF
> 
> and a bunch of stuff in those dirs -- I'm lost!
> 
> Maybe I didn't actually download a chart!
> 
> I'll poke at it more, but if you have any suggestions, I'm all ears!

Chris,

It looks like c0a26a is your target.  Try using something like:

   gltp:/vrf/path_to_c0a26a

Note that the VRF driver in OGDI is very sensitive to case.
You may need to write a script to turn all the filenames
into lower case or something perverse like that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ivan.lucena at pmldnet.com  Mon Feb  4 21:09:51 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Mon Feb  4 21:09:54 2008
Subject: [gdal-dev] Win32 Default Build Options
In-Reply-To: <47A7B1FD.8070000@pobox.com>
References: <47A4129A.9080207@pobox.com> <47A77A30.50005@pmldnet.com>
	<47A7B1FD.8070000@pobox.com>
Message-ID: <47A7C56F.2080907@pmldnet.com>

Frank,

Frank Warmerdam wrote:
> The problem with the GSG driver does not manifest at built time (except
> as nasty warnings).  It only comes up at runtime.  So either check the
> warnings carefull for stuff in the gdal/frmts/gsg directory or actually
> try running "gdalinfo -mm " against the autotest/gdrivers/gsg_binary.grd
> file.

No warming compilation on:

C:\Dev\gdal\frmts\gsg>nmake -f makefile.vc clean
C:\Dev\gdal\frmts\gsg>nmake -f makefile.vc

Microsoft (R) Program Maintenance Utility Version 8.00.50727.762
Copyright (C) Microsoft Corporation.  All rights reserved.

         cl /nologo /MD /EHsc /Ox 
/D_CRT_SECURE_NO_DEPRECATE/D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG 
-I..\..\port -I..\..\ogr -I..\..\gcore  -I..\..\alg   /c gsagdataset.cpp 
gsagdataset.cpp
         cl /nologo /MD /EHsc /Ox 
/D_CRT_SECURE_NO_DEPRECATE/D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG 
-I..\..\port -I..\..\ogr -I..\..\gcore  -I..\..\alg   /c gsbgdataset.cpp
gsbgdataset.cpp
         cl /nologo /MD /EHsc /Ox 
/D_CRT_SECURE_NO_DEPRECATE/D_CRT_NONSTDC_NO_DEPRECATE /DNDEBUG 
-I..\..\port -I..\..\ogr -I..\..\gcore  -I..\..\alg   /c gs7bgdataset.cpp
gs7bgdataset.cpp
         xcopy /D  /Y *.obj ..\o
C:gs7bgdataset.obj
C:gsagdataset.obj
C:gsbgdataset.obj
3 File(s) copied


Or linkage:


C:\Dev\gdal\frmts\gsg>cd ..\..
C:\Dev\gdal>nmake -f makefile.vc
...
         lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib 
vb6\vb6_support.obj
	ogrsf_frmts.lib(parsexsd.obj) : *warning LNK4221: no public symbols 
found; archive member will be inaccessible*
         link /nologo /dll /debug /INCLUDE:_OGRFeatureStylePuller 
/INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods 
/INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGRRegisterAll 
/INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48 
/INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28 
/INCLUDE:_OCTNewCoordinateTransformation@8 
/INCLUDE:_vbSafeArrayToPtr@16port\*.obj gcore\*.obj alg\*.obj 
frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib 
vb6\vb6_support.obj odbc32.lib odbccp32.lib user32.lib gcore\Version.res 
  /out:gdal16dev.dll /implib:gdal_i.lib
LINK : gdal16dev.dll not found or not built by the last incremental 
link; performing full link
...

And everything looks good at runtime:

C:\Dev\gdal_autotest\gdrivers\data>gdalinfo -mm gsg_binary.grd
Driver: GSBG/Golden Software Binary Grid (.grd)
Files: gsg_binary.grd
Size is 20, 20
Coordinate System is `'
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000)
Lower Left  (  440720.000, 3750120.000)
Upper Right (  441920.000, 3751320.000)
Lower Right (  441920.000, 3750120.000)
Center      (  441320.000, 3750720.000)
Band 1 Block=20x1 Type=Float32, ColorInterp=Undefined
   Min=74.000 Max=255.000   Computed Min/Max=74.000,255.000
   NoData Value=1.701410009187828e+038


I will keep my yes on the /MD vs /MDd stuff but I believe you are right, 
We don't need it even when we are really debugging.

Best regards,

Ivan


From andrea.pistoni at next.it  Tue Feb  5 04:09:03 2008
From: andrea.pistoni at next.it (andyNEXT)
Date: Tue Feb  5 04:09:04 2008
Subject: [Gdal-dev] HDF5 COSMO SKYMED driver
Message-ID: <15284860.post@talk.nabble.com>


Hi All, 

I've to kind of problems with HDF5.
First of all I've to create a GTiff file from an HDF5 COSMO.

COSMO delivers two kinds of HDF5 data:

1. Complex Dataset that is a [MxNx2] matrix. In this case the problem is
that the gdal moethod Open() reads this Dataset not such as 2 Datasets of
dimensions [MxN], but such as M datasets of dimensions [Nx2]. My intention
is to create 2 Geotiff file of dimensions [MxN]. 

2. Normal Dataset [MxN]. In this case the GEOTIFF is created correctly but
the image is NOT north-up because COSMO Satellite stores the image in the
file starting from the first pixel (its own TopLeft) that it seen from its
flight point of view. Therefore we'll have four cases of Dataset [Right
Ascending, left ascending, Right Descending, Left Descending] characterized
by two parameters LOOK SIDE and ORBITAL DIRECTION that are inside the HDF5.
In other words I have to read the raster depending on the value of these
parameters pointing case by case to the proper point to get the final
North-Up Image. But I've seen that GDAL cannot allow this kind of manage of
the DATASET because che GDAL.OPEN() method points always at the same point
of the raster.

Does somebody know a method of gdal library to set custom Dataset band
selection before the Open() or start-point/line to be read? 

Does a GDAL driver exist for HDF5 data that allows to set the start point to
be read of the raster dataset?

I'm working in Visual Studio 2005 in C#. 

Thank you in advance and sorry for my long mail.
Regards, 

Andrea Pistoni 

-- 
View this message in context: http://www.nabble.com/HDF5-COSMO-SKYMED-driver-tp15284860p15284860.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From romain.garrigues at c-s.cnes.fr  Tue Feb  5 04:54:49 2008
From: romain.garrigues at c-s.cnes.fr (Romain Garrigues)
Date: Tue Feb  5 04:53:28 2008
Subject: [gdal-dev] Writing Shapefiles
References: <20080204222250.6E882E00FB1@lists.osgeo.org>
Message-ID: <0f3001c867dd$266f2270$033d9584@PC61275>

Hello all,

I'm interested in Shapefile format manipulation.
I followed OGR API tutorial for reading a .shp file.
Open() method from OGR Driver returns an OGRDataSource pointer which 
contains all i need.
Now i'm trying to write data contained in an OGRDataSource pointer.
Is there an easy way to do that ? (a Write() similar to Open() method ?)
Tutorial just show how to write a shapefile from scratch, that's not my 
case, and i don't see atm how to do this "easily" if i already have data in 
an OGRDataSource.

Best Regards.

Romain Garrigues.
Orfeo Toolbox developper. 

From wollez at gmx.net  Tue Feb  5 04:56:00 2008
From: wollez at gmx.net (WolfgangZ)
Date: Tue Feb  5 04:56:19 2008
Subject: [gdal-dev] gdalwarp for interpolation of non georeferenced images?
Message-ID: <fo9brd$ege$1@ger.gmane.org>

Hi,

is it possible to use gdalwarp to interpolate non georeferenced images? 
I thought of something like "gdalwarp -tr 0.2 0.2 -r cubic in.tif 
out.tif" but all I get is:


ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for test1.tif.
There is no affine transformation and no GCPs.

Thanks for any help.
Wolfgang

From mateusz at loskot.net  Tue Feb  5 05:18:40 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Feb  5 05:18:46 2008
Subject: [gdal-dev] Writing Shapefiles
In-Reply-To: <0f3001c867dd$266f2270$033d9584@PC61275>
References: <20080204222250.6E882E00FB1@lists.osgeo.org>
	<0f3001c867dd$266f2270$033d9584@PC61275>
Message-ID: <47A83800.6020400@loskot.net>

Romain Garrigues wrote:
> Now i'm trying to write data contained in an OGRDataSource pointer.
> Is there an easy way to do that ? (a Write() similar to Open() method ?)
> Tutorial just show how to write a shapefile from scratch, that's not my 
> case, and i don't see atm how to do this "easily" if i already have data 
> in an OGRDataSource.

Romain,

Could you be more specific what you mean as "write data contained in 
OGRDataSource" ?

The tutorial (http://gdal.org/ogr/ogr_apitut.html) presents all 
necessary steps to:
- create datasource and layer for shapefile
- create schema
- write attributes data
- write geometry

If you want to add features to existing shapefile, then open it in 
update mode [1] and create [2] and write [3] new features into it.

[1]
http://gdal.org/ogr/classOGRSFDriverRegistrar.html#5ee13e09d55d146f45bb5417fa524f54

[2]
http://gdal.org/ogr/classOGRFeature.html#0ef4455f24cfbec6cf37110f9116cf15

[3]
http://gdal.org/ogr/classOGRLayer.html#aa1e32016f481596a55e1d988a15a067

Regards
-- 
Mateusz Loskot
http://mateusz.loskot.net
From Oliver.Ishmael at broads-authority.gov.uk  Tue Feb  5 06:19:12 2008
From: Oliver.Ishmael at broads-authority.gov.uk (Oliver Ishmael)
Date: Tue Feb  5 06:19:16 2008
Subject: [gdal-dev] gdaltindex invalid shapefile
Message-ID: <smtp_47A84630_7330_0002.eml@badc2>

Hello,

 

I am trying to use gdaltindex to create a raster tile index for a series
of aerial photos.

 

C:\Program Files\FWTools2.0.6\bin>gdaltindex c:\2006\2006.shp
c:\2006\*.ecw

ERROR 4: Unable to open c:\2006\2006.shp or c:\2006\2006.SHP.

Creating new index file...

 

The resulting dbf of the shapefile has a 'location' field showing the
location of all the ecw files. This is it. It seems to be missing the
XMIN, YMIN, XMAX, YMAX fields and consequently ArcGIS is unable to load
the resulting 2006.shp

 

Using gdalinfo -stats I could manually enter this information but it
would take quite a while. So I just wanted to check that I'm doing
everything correctly?

 

 

Many thanks

Olly

 

 

If you have received this email in error, please delete it immediately and notify the sender. This email may contain confidential information and may be legally privileged or prohibited from disclosure and unauthorised use. If you are not the intended recipient, you must not copy, distribute or rely on it.

As email is not a 100% secure communications medium we advise you to check that messages and attachments are virus-free before opening them. We cannot accept liability for any damage that you sustain as a result of software viruses. We reserve the right to read and monitor any email or attachment entering or leaving our systems without prior notice. Opinions expressed in this email are not necessarily endorsed by the Broads Authority unless otherwise specifically stated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080205/eb6ca40c/attachment.html
From estrada.adam at gmail.com  Tue Feb  5 09:07:11 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Tue Feb  5 09:07:58 2008
Subject: [gdal-dev] Re: gdaltindex invalid shapefile
In-Reply-To: <smtp_47A84630_7330_0002.eml@badc2>
References: <smtp_47A84630_7330_0002.eml@badc2>
Message-ID: <91b7b205-18ca-4c8e-99a0-ee27603b2e80@q39g2000hsf.googlegroups.com>

Olly,
    I am getting the same error/warning message when I use gdaltindex
but the output is still good.  My version of ArcGIS 9.2 is reading the
file without any issues.  You will have to project it though...The
projection from the input imagery is not assigned to the output
shapefile index.

AWE

On Feb 5, 6:19?am, "Oliver Ishmael" <Oliver.Ishm...@broads-
authority.gov.uk> wrote:
> Hello,
>
> I am trying to use gdaltindex to create a raster tile index for a series
> of aerial photos.
>
> C:\Program Files\FWTools2.0.6\bin>gdaltindex c:\2006\2006.shp
> c:\2006\*.ecw
>
> ERROR 4: Unable to open c:\2006\2006.shp or c:\2006\2006.SHP.
>
> Creating new index file...
>
> The resulting dbf of the shapefile has a 'location' field showing the
> location of all the ecw files. This is it. It seems to be missing the
> XMIN, YMIN, XMAX, YMAX fields and consequently ArcGIS is unable to load
> the resulting 2006.shp
>
> Using gdalinfo -stats I could manually enter this information but it
> would take quite a while. So I just wanted to check that I'm doing
> everything correctly?
>
> Many thanks
>
> Olly
>
> If you have received this email in error, please delete it immediately and notify the sender. This email may contain confidential information and may be legally privileged or prohibited from disclosure and unauthorised use. If you are not the intended recipient, you must not copy, distribute or rely on it.
>
> As email is not a 100% secure communications medium we advise you to check that messages and attachments are virus-free before opening them. We cannot accept liability for any damage that you sustain as a result of software viruses. We reserve the right to read and monitor any email or attachment entering or leaving our systems without prior notice. Opinions expressed in this email are not necessarily endorsed by the Broads Authority unless otherwise specifically stated.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From romain.garrigues at c-s.cnes.fr  Tue Feb  5 09:23:27 2008
From: romain.garrigues at c-s.cnes.fr (Romain Garrigues)
Date: Tue Feb  5 09:22:02 2008
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 45, Issue 7
References: <20080205101846.CA050E010F7@lists.osgeo.org>
Message-ID: <0f5e01c86802$ac9b6eb0$033d9584@PC61275>


> Romain Garrigues wrote:
>> Now i'm trying to write data contained in an OGRDataSource pointer.
>> Is there an easy way to do that ? (a Write() similar to Open() method ?)
>> Tutorial just show how to write a shapefile from scratch, that's not my
>> case, and i don't see atm how to do this "easily" if i already have data
>> in an OGRDataSource.
>
> Romain,
>
> Could you be more specific what you mean as "write data contained in
> OGRDataSource" ?
>
> The tutorial (http://gdal.org/ogr/ogr_apitut.html) presents all
> necessary steps to:
> - create datasource and layer for shapefile
> - create schema
> - write attributes data
> - write geometry
>
> If you want to add features to existing shapefile, then open it in
> update mode [1] and create [2] and write [3] new features into it.
>
> [1]
> http://gdal.org/ogr/classOGRSFDriverRegistrar.html#5ee13e09d55d146f45bb5417fa524f54
>
> [2]
> http://gdal.org/ogr/classOGRFeature.html#0ef4455f24cfbec6cf37110f9116cf15
>
> [3]
> http://gdal.org/ogr/classOGRLayer.html#aa1e32016f481596a55e1d988a15a067
>
> Regards
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net

In fact, my question is : if you want to read an existing shapefile, store 
it in memory, and then write it back on disk (from memory), how do you 
proceed ?

Romain.


From jordi.arenas at t-systems.es  Tue Feb  5 09:35:21 2008
From: jordi.arenas at t-systems.es (Arenas Vigo, Jordi)
Date: Tue Feb  5 09:35:28 2008
Subject: [gdal-dev] Error with Gdal_Translate... 
Message-ID: <4BE6B91AE7E38147993A844BD7BD4BFF160280@TSEBCN12EW.itc.ads.t-systems.es>

Hi,

 

I'm using Fwtools 2.0.6 with GDal version 1.6. I'm trying to translate a
SDE Raster to ECW file. I get this error with create copy command:

 

Unable to find an entry point named 'CSharp_Driver_CreateCopy' in DLL
'gdal_wrap'.

 

Thanks,

Jordi Arenas



This e-mail and any attachments may contain confidential or
privileged information. Any unauthorised copying, use or distribution of
this information is strictly prohibited.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080205/555e40a3/attachment.html
From mateusz at loskot.net  Tue Feb  5 10:29:59 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Feb  5 10:30:05 2008
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 45, Issue 7
In-Reply-To: <0f5e01c86802$ac9b6eb0$033d9584@PC61275>
References: <20080205101846.CA050E010F7@lists.osgeo.org>
	<0f5e01c86802$ac9b6eb0$033d9584@PC61275>
Message-ID: <47A880F7.4080004@loskot.net>

Romain Garrigues wrote:
> In fact, my question is : if you want to read an existing shapefile, 
> store it in memory, and then write it back on disk (from memory), how do 
> you proceed ?

Romain,

I have to confess I'm still having problems with getting the point.
AFAIU, you know how to read an existing shapefile.
You read it into an instance of the OGRFeature type.
This object is actually a copy of data from shapefile
and is stored in memory.
Now, AFAIU, you want to modify this object (modify a feature attributes, 
geometry) and write back to shapefile, on the same place, if I am correct.

You can achieve the latter using OGRFeature::SetFeature [1] method.

Does it answer your question?

[1]
http://gdal.org/ogr/classOGRLayer.html#681139bfd585b74d7218e51a32144283


Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net
From a.neumann at carto.net  Tue Feb  5 12:08:32 2008
From: a.neumann at carto.net (Andreas Neumann)
Date: Tue Feb  5 12:08:36 2008
Subject: [gdal-dev] changing white pixels to transparent
In-Reply-To: <47A3448A.6060209@pobox.com>
References: <59096.193.246.86.39.1201881116.squirrel@webmail.customers.iirc.at>
	<47A3448A.6060209@pobox.com>
Message-ID: <31086.193.246.86.39.1202231312.squirrel@webmail.customers.iirc.at>

Hi Frank and others,

thanks for answering. I can confirm that the approach through the vrt file
and editing the color-table works fine.

I wonder if the TIFF format really doesn't support transparency. I was
able to save a transparent tiff file in GIMP and it loaded fine next time,
with transparency preserved. Is this a limitation of gdal or associated
libraries?

When converting to PNG: how does it handle compression? I did not see any
documentation on how to control the compression. Also, can I convert to a
grayscale PNG from my original b/w tif? Are there any additional co
options for the PNG format?

Are there other formats beside PNG that support/preserve transparency?

Thank you for getting back on this issue,
Andreas

> Andreas Neumann wrote:
>> Hello!
>>
>> I have 1bit (b+w) input GeoTIFF files and want to change them to 8bit
>> gray
>> value pixels where the white bits are set to transparent. I had a look
>> at
>> the gdal_translate and GeoTIFF options but did not find a way to
>> accomplish this task. Maybe I have overlooked some parameters/switches?
>>
>> If this can't be accomplished with gdal - can you recommend another
>> tool,
>> preferably a commandline tool?
>
> Andreas,
>
> One approach to this would be to use a VRT file as a mechanism to modify
> the
> palette.
>
> eg.
>
> gdal_translate -of VRT fax2d.tif fax2d.vrt
>
> Then edit fax2d.vrt which looks like this:
>
> <VRTDataset rasterXSize="1728" rasterYSize="1082">
>    <Metadata>
>      <MDI key="TIFFTAG_SOFTWARE">fax2tiff</MDI>
>      <MDI key="TIFFTAG_XRESOLUTION">204</MDI>
>      <MDI key="TIFFTAG_YRESOLUTION">98</MDI>
>      <MDI key="TIFFTAG_RESOLUTIONUNIT">2 (pixels/inch)</MDI>
>    </Metadata>
>    <VRTRasterBand dataType="Byte" band="1">
>      <Metadata/>
>      <ColorInterp>Palette</ColorInterp>
>      <ColorTable>
>        <Entry c1="255" c2="255" c3="255" c4="255"/>
>        <Entry c1="0" c2="0" c3="0" c4="255"/>
>      </ColorTable>
>      <SimpleSource>
>        <SourceFilename
> relativeToVRT="0">/gdal/root/usr2/data/geotiff/misc/fax2d.tif</SourceFilename>
>        <SourceBand>1</SourceBand>
>        <SrcRect xOff="0" yOff="0" xSize="1728" ySize="1082"/>
>        <DstRect xOff="0" yOff="0" xSize="1728" ySize="1082"/>
>      </SimpleSource>
>    </VRTRasterBand>
> </VRTDataset>
>
> Modify the color table entry for pixel value 0 (white) to have an
> alpha value of zero:
>
>        <Entry c1="255" c2="255" c3="255" c4="0"/>
>
> Then you can turn this VRT dataset back into a concrete file like:
>
>    gdal_translate -of PNG fax2d.vrt fax2d.png
>
> Note that I didn't write it out as TIFF.  TIFF files don't actually
> have a mechanism for representing alpha (transparency) values in
> color tables so our change would effectively be lost.  PNG files;
> however, do.
>
> This may not be the most elegant approach but perhaps it will suit
> your needs.  The color table modification step could also be scripted
> in python, awk or whatever if you want to fully automate the process.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
Andreas Neumann
B?schacherstrasse 6, CH-8624 Gr?t/Gossau, Switzerland
Email: a.neumann@carto.net, Web:
* http://www.carto.net/ (Carto and SVG resources)
* http://www.carto.net/neumann/ (personal page)
* http://www.svgopen.org/ (SVG Open Conference)
* http://www.geofoto.ch/ (Georeferenced Photos of Switzerland)

From warmerdam at pobox.com  Tue Feb  5 12:11:46 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  5 12:12:22 2008
Subject: [gdal-dev] gdalwarp for interpolation of non georeferenced images?
In-Reply-To: <fo9brd$ege$1@ger.gmane.org>
References: <fo9brd$ege$1@ger.gmane.org>
Message-ID: <47A898D2.50703@pobox.com>

WolfgangZ wrote:
> Hi,
> 
> is it possible to use gdalwarp to interpolate non georeferenced images? 
> I thought of something like "gdalwarp -tr 0.2 0.2 -r cubic in.tif 
> out.tif" but all I get is:
> 
> 
> ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for test1.tif.
> There is no affine transformation and no GCPs.

Wolfgang,

It turns out this is not directly possible, but you can create a
worldfile for the input with dummy georeferencing quite easily and
then work with that.

eg.
in.tfw:
1
0
0
-1
0
0

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Feb  5 12:20:20 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  5 12:20:47 2008
Subject: [gdal-dev] changing white pixels to transparent
In-Reply-To: <31086.193.246.86.39.1202231312.squirrel@webmail.customers.iirc.at>
References: <59096.193.246.86.39.1201881116.squirrel@webmail.customers.iirc.at>
	<47A3448A.6060209@pobox.com>
	<31086.193.246.86.39.1202231312.squirrel@webmail.customers.iirc.at>
Message-ID: <47A89AD4.1050201@pobox.com>

Andreas Neumann wrote:
> Hi Frank and others,
> 
> thanks for answering. I can confirm that the approach through the vrt file
> and editing the color-table works fine.
> 
> I wonder if the TIFF format really doesn't support transparency. I was
> able to save a transparent tiff file in GIMP and it loaded fine next time,
> with transparency preserved. Is this a limitation of gdal or associated
> libraries?

Andreas,

There are different approaches to transparency.  TIFF supports RGBA (32
bits per pixel) images where the alpha is transparency.  But it does not
support transparency in it's color tables for paletted images.  Nor does
it support marking one pixel value as transparent.

> When converting to PNG: how does it handle compression? I did not see any
> documentation on how to control the compression. Also, can I convert to a
> grayscale PNG from my original b/w tif? Are there any additional co
> options for the PNG format?

The PNG driver uses the default compression options from libpng.  I'm not
sure if there are any options we could expose through GDAL or not for this.

PNG supports a variety of color models through GDAL including bw (well
really greyscale), paletted, RGB and RGBA.

> Are there other formats beside PNG that support/preserve transparency?

Yes, in various ways - but relatively few that support transparency settings
in colormaps.  GIF will support a single transparent value in the colormap.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bclay at ball.com  Tue Feb  5 13:31:18 2008
From: bclay at ball.com (Clay, Bruce)
Date: Tue Feb  5 13:31:22 2008
Subject: [gdal-dev] Can not connect with ODBC / DSN
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFD93@daytonmsg2k3.AERO.BALL.COM>

I am trying to connect to an Oracle server using ODBC with a DSN style
connect string (ODBC:userName/password@dsnName).  It seems to be
connecting based on what I see in the debugger but does not return from
the OGRODBCDataSource::Open.  There is a loop inside the open that tries
to open every table in the database and that takes a very long time
since there are many house keeping tables in Oracle.  It has been
running several minutes and is up to 663 tables in the loop with an
unknown number remaining.

 

So the question is: should the following loop open every table in the
entire database with the above connect.

 

    for( int iTable = 0; 

         papszTables != NULL && papszTables[iTable] != NULL; 

         iTable++ )

    {

        if( strlen(papszGeomCol[iTable]) > 0 )

            OpenTable( papszTables[iTable], papszGeomCol[iTable],
bUpdate );

        else

            OpenTable( papszTables[iTable], NULL, bUpdate );

    }

 

 

 

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080205/7e37253e/attachment.html
From even.rouault at mines-paris.org  Tue Feb  5 14:19:39 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb  5 14:19:46 2008
Subject: [gdal-dev] OGR and VPF
In-Reply-To: <47A7C44A.5030700@pobox.com>
References: <47A7A127.2000804@noaa.gov> <47A7BCBD.6060805@noaa.gov>
	<47A7C44A.5030700@pobox.com>
Message-ID: <200802052019.41258.even.rouault@mines-paris.org>

>
> Chris,
>
> It looks like c0a26a is your target.  Try using something like:
>
>    gltp:/vrf/path_to_c0a26a
>
> Note that the VRF driver in OGDI is very sensitive to case.
> You may need to write a script to turn all the filenames
> into lower case or something perverse like that.
>
> Best regards,

Chirstopher,

In fact, OGDI *used to be* very case sensitive. If you use OGDI from its CVS 
repository, it should be much more tolerant towards case sensitiveness.
Note that it's important not to include the final slash in your gltp: "URL", 
so gltp:/vrf/path_to_c0a26a is fine, but not gltp:/vrf/path_to_c0a26a/ .

Note, I've tried to download some DNC on the 
http://www.nga.mil/portal/site/dnc/ NGA site, but I can't find full libraries 
to download. Instead it only offers 'patches' with which I don't know what to 
do.

Otherwise, for your information, I use almost daily OGDI for reading VMAP 
products.

Best regards.
From warmerdam at pobox.com  Tue Feb  5 14:19:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  5 14:20:00 2008
Subject: [gdal-dev] Can not connect with ODBC / DSN
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFD93@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFD93@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <47A8B6C6.7030004@pobox.com>

Clay, Bruce wrote:
> I am trying to connect to an Oracle server using ODBC with a DSN style 
> connect string (ODBC:userName/password@dsnName).  It seems to be 
> connecting based on what I see in the debugger but does not return from 
> the OGRODBCDataSource::Open.  There is a loop inside the open that tries 
> to open every table in the database and that takes a very long time 
> since there are many house keeping tables in Oracle.  It has been 
> running several minutes and is up to 663 tables in the loop with an 
> unknown number remaining.
> 
>  
> 
> So the question is: should the following loop open every table in the 
> entire database with the above connect.

Bruce,

It is the expected behavior.  But you can specify a list of tables
in the ODBC connect string if you know what you want.  Then only
those tables will be enumerated as layers.   This is the normal
approach to databases with a lot of tables.

eg.
ODBC:user/password@dsn,table1,table2

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Feb  5 14:58:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  5 14:59:01 2008
Subject: [gdal-dev] gdaltindex invalid shapefile
In-Reply-To: <smtp_47A84630_7330_0002.eml@badc2>
References: <smtp_47A84630_7330_0002.eml@badc2>
Message-ID: <47A8BFED.3000701@pobox.com>

Oliver Ishmael wrote:
> Hello,
> 
>  
> 
> I am trying to use gdaltindex to create a raster tile index for a series 
> of aerial photos.
> 
>  
> 
> C:\Program Files\FWTools2.0.6\bin>gdaltindex c:\2006\2006.shp c:\2006\*.ecw
> 
> ERROR 4: Unable to open c:\2006\2006.shp or c:\2006\2006.SHP.
> 
> Creating new index file...
> 
>  
> 
> The resulting dbf of the shapefile has a ?location? field showing the 
> location of all the ecw files. This is it. It seems to be missing the 
> XMIN, YMIN, XMAX, YMAX fields and consequently ArcGIS is unable to load 
> the resulting 2006.shp
> 
>  
> 
> Using gdalinfo ?stats I could manually enter this information but it 
> would take quite a while. So I just wanted to check that I?m doing 
> everything correctly?

Olly,

Does the correponding .shp file not have polygons for each record in the
.dbf file?  It is the polygons which define the footprint of each file.

Note, -stats produces information on the pixel values, not their spatial
locations.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Feb  5 15:01:08 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  5 15:01:33 2008
Subject: [gdal-dev] help needed with image creation
In-Reply-To: <47A76F4E.4090501@gmx.net>
References: <47A76F4E.4090501@gmx.net>
Message-ID: <47A8C084.2030303@pobox.com>

Wolfgang wrote:
> Hi,
> 
> I want to create some images where I set the pixel values manually. The 
> values are Floats that need to be mapped finally to a color map. I'm not 
> really a skilled programmer but I've managed to get a first idea how to 
> do it (in python):
> 
> from osgeo import gdal
> import numpy as Numeric
> 
> format = "GTiff"
> driver = gdal.GetDriverByName( format )
> 
> dst_filename='test.tif'
> dst_ds = driver.Create( dst_filename, 3, 2, 1, gdal.GDT_Float32 )
> raster=Numeric.array([[ 1.,  200.5 ,  3. ],[ 256. ,  5. ,  60. ]])
> dst_ds.GetRasterBand(1).WriteArray( raster )
> 
> What I don't understand is how to create/define a color map so that the 
> result looks better? I also suppose that it is not the best to create 
> float tiffs as not so many applications will support that type. It would 
> help me much if anybody could show me the steps needed to do the task.
> 
> I'm sorry if this looks too easy for skilled programmers, but I'm 
> completely new to program graphics (with GDAL) and I still don't have 
> the overview over all GDAL functions.

Wolfgang,

You can't generally assign a palette to floating point geotiff files.
There is no way for applications to understand how to apply it.

Generally speaking, in GeoTIFF, you either offer the raw floating point
science data, or you offer a version of it is that been prescaled to
integers (usually 0 to 255) with a colormap.

I'd add that it is very common for folks to distribute raw science
data in floating point, and for the decision on a colormap to be
applied being made by the user in the viewing application.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Feb  5 16:33:11 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  5 16:33:37 2008
Subject: [gdal-dev] can't remap a geotiff via gdalwarp
In-Reply-To: <fa2ac0580802041422p1f018e3by6b439566e3963a4d@mail.gmail.com>
References: <fa2ac0580802041422p1f018e3by6b439566e3963a4d@mail.gmail.com>
Message-ID: <47A8D617.2020804@pobox.com>

John Mitchell wrote:
> Hi,
> 
> I am having difficulty remapping all the 0,0,0 pixels into 0,0,1 via 
> gdalwarp.
> I am running the following command:
> gdalwarp.exe -srcnodata "0 0 0" -dstnodata "0 0 1" -rc inputfile.tif 
> outputfile.tif
> 
> I have attached the gdalinfo listing for both the inputfile and the 
> outputfile.
> 
> I have also attached a gdalinfo listing for a geotiff that I am able to 
> remap from 0,0,0 to 0,0,1 and it is called 256_w4.info.

John,

The problem input file is not RGB (while the one that works is).  The
problem input is paletted.  That is your nodata pixels have a value of "0"
and a color table entry that indicates this should be displayed as "0,0,0".

You could do -srcnodata 0 -dstnodata 1 and then all pixels with a value of
zero would be remapped to 1, but the color table entry for 1 is
3,8,21 which is quite a bit more "off black" than 0,0,1.

Basically, it is hard to accomplish exactly what you want with a paletted
image.  If you want to do it you have a couple options.

1) Convert the paletted image to RGB (3 bands) before doing your work.
This can be accomplished with the GDAL Python script pct2rgb.py.  Then
do your 0,0,0 0,0,1 conversion.

2) Merge two colors in your paletted image.  From a quick skim, pixel
values 1 is likely closest to zero.  You could convert 0 to 1, and also
try and modify palette entry "1" to be somewhere between 0,0,0 and 3,8,21
to reduce the visual effect on your image.  (I can provide VRT based details
on how to do this if you want).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Tue Feb  5 18:39:22 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Feb  5 18:39:24 2008
Subject: [gdal-dev] Using OCI + VRT to access non spatial data
Message-ID: <f3b73b7d0802051539x682d54aas527f5e7305bf07d2@mail.gmail.com>

Folks,

In some of my existing projects the client would like OGR to access
Oracle and extract point features based on x, y columns in non spatial
tables. Currently the only option to do such things is to set up
VRT+ODBC for the data access that would possibly result in the
VRT-ODBC-OCI-Oracle data access path.

However not all of the clients can tolerate well the additional burden
of installing an oracle-odbc driver and using additional system-wide
settings to access their data. In addition it's sometimes not trivial
to obtain oracle-odbc driver for a certain platform+processor
achitecture at all (eg. linux + AMD64 in my case).

I guess it would be reasonable to change the current OCI driver to
provide access to tables without having Oracle Spatial to be
installed. It would allow us to save the extra ODBC layer in the data
access path mentioned above.

As looking into the OCI driver to support this would be almost all
about removing the extra checks for the spatial data types in
OGROCISession::EstablishSession.

How about this change?

Best regards,

Tamas
From warmerdam at pobox.com  Tue Feb  5 18:55:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  5 18:55:31 2008
Subject: [gdal-dev] Using OCI + VRT to access non spatial data
In-Reply-To: <f3b73b7d0802051539x682d54aas527f5e7305bf07d2@mail.gmail.com>
References: <f3b73b7d0802051539x682d54aas527f5e7305bf07d2@mail.gmail.com>
Message-ID: <47A8F75B.4050604@pobox.com>

Tamas Szekeres wrote:
> Folks,
> 
> In some of my existing projects the client would like OGR to access
> Oracle and extract point features based on x, y columns in non spatial
> tables. Currently the only option to do such things is to set up
> VRT+ODBC for the data access that would possibly result in the
> VRT-ODBC-OCI-Oracle data access path.
> 
> However not all of the clients can tolerate well the additional burden
> of installing an oracle-odbc driver and using additional system-wide
> settings to access their data. In addition it's sometimes not trivial
> to obtain oracle-odbc driver for a certain platform+processor
> achitecture at all (eg. linux + AMD64 in my case).
> 
> I guess it would be reasonable to change the current OCI driver to
> provide access to tables without having Oracle Spatial to be
> installed. It would allow us to save the extra ODBC layer in the data
> access path mentioned above.
> 
> As looking into the OCI driver to support this would be almost all
> about removing the extra checks for the spatial data types in
> OGROCISession::EstablishSession.
> 
> How about this change?

Tamas,

It sounds like an excellent idea, though I'd ask you only apply it in
trunk (at least for now).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Tue Feb  5 18:57:35 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Feb  5 18:57:38 2008
Subject: [gdal-dev] Using OCI + VRT to access non spatial data
In-Reply-To: <47A8F75B.4050604@pobox.com>
References: <f3b73b7d0802051539x682d54aas527f5e7305bf07d2@mail.gmail.com>
	<47A8F75B.4050604@pobox.com>
Message-ID: <f3b73b7d0802051557w104ba5a7qd527d4d68a15bfe@mail.gmail.com>

OK, will do so.

Best regards,

Tamas



2008/2/6, Frank Warmerdam <warmerdam@pobox.com>:
> Tamas Szekeres wrote:
> > Folks,
> >
> > In some of my existing projects the client would like OGR to access
> > Oracle and extract point features based on x, y columns in non spatial
> > tables. Currently the only option to do such things is to set up
> > VRT+ODBC for the data access that would possibly result in the
> > VRT-ODBC-OCI-Oracle data access path.
> >
> > However not all of the clients can tolerate well the additional burden
> > of installing an oracle-odbc driver and using additional system-wide
> > settings to access their data. In addition it's sometimes not trivial
> > to obtain oracle-odbc driver for a certain platform+processor
> > achitecture at all (eg. linux + AMD64 in my case).
> >
> > I guess it would be reasonable to change the current OCI driver to
> > provide access to tables without having Oracle Spatial to be
> > installed. It would allow us to save the extra ODBC layer in the data
> > access path mentioned above.
> >
> > As looking into the OCI driver to support this would be almost all
> > about removing the extra checks for the spatial data types in
> > OGROCISession::EstablishSession.
> >
> > How about this change?
>
> Tamas,
>
> It sounds like an excellent idea, though I'd ask you only apply it in
> trunk (at least for now).
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
From reedc+gdal at ctech.com  Tue Feb  5 20:40:24 2008
From: reedc+gdal at ctech.com (Reed Copsey, Jr.)
Date: Tue Feb  5 20:40:28 2008
Subject: [gdal-dev] Strategies for non-standard ascii format drivers
Message-ID: <d82dce9d0802051740t194dabd8t94802c86e110b086@mail.gmail.com>

I was wondering if anybody has any suggestions for good strategies for
implementing ascii GDAL raster drivers.
I'm looking at reworking and correcting the GSAG driver (we need this up and
running ASAP here).  Unfortunately, it's an ascii file format where it's
specified with the lower left pixel first, instead of the upper left pixel.

I've been trying to figure out a good strategy to get this working
correctly.  As far as I can tell, none of the existing GDAL drivers are
dealing with this.  It seems like there are three options for reading -

1) Pre-parse the entire file to get the line starting locations (ie: fill in
panLineOffset[] in advance).  This has the advantage of allowing the files
to be very large, since it's not loading large amounts of data into memory,
but would, for practical purposes, mean reading the entire file twice.  I
can think of some tricks that could be done to reduce the number of reads if
the entire raster isn't requested, but it would still probably require
reading most of the file 2x.

2) Read the file into memory and store the image in memory.  This really
restricts the size of file that could be read in, since it'd require the
entire image to be held in memory.

3) Read in the file upside down as it is now, and try to adjust the
georeferencing to match and handle the flipping.  This might be the most
elegant approach, since it'd make the driver more "standard" like the other
drivers.

For writing, I'm not sure there is a good option.  I'm thinking the best
approach would be to restrict it to the CreateCopy() form of object
construction, since that would allow the file to be written out in a single
pass even though it's "upside down".  This might be a good way to fix the
GSBG driver as well, since it's writing upside down (even though it's
reading correctly).

As I said - We're in a bit of a rush to get this working correctly.  I'd be
happy to work on implementing this and submitting patches, but I'd like
suggestions as to what approaches people like to have a functional driver.
 The Golden Surfer drivers have all been problematic for a while now, and
I'd like to get all three corrected here as soon as possible.

Thanks,
Reed Copsey
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080205/877f42cc/attachment.html
From warmerdam at pobox.com  Tue Feb  5 21:25:26 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb  5 21:25:51 2008
Subject: [gdal-dev] Strategies for non-standard ascii format drivers
In-Reply-To: <d82dce9d0802051740t194dabd8t94802c86e110b086@mail.gmail.com>
References: <d82dce9d0802051740t194dabd8t94802c86e110b086@mail.gmail.com>
Message-ID: <47A91A96.3080704@pobox.com>

Reed Copsey, Jr. wrote:
> 1) Pre-parse the entire file to get the line starting locations (ie: 
> fill in panLineOffset[] in advance).  This has the advantage of allowing 
> the files to be very large, since it's not loading large amounts of data 
> into memory, but would, for practical purposes, mean reading the entire 
> file twice.  I can think of some tricks that could be done to reduce the 
> number of reads if the entire raster isn't requested, but it would still 
> probably require reading most of the file 2x.
> 
> 2) Read the file into memory and store the image in memory.  This really 
> restricts the size of file that could be read in, since it'd require the 
> entire image to be held in memory.
> 
> 3) Read in the file upside down as it is now, and try to adjust the 
> georeferencing to match and handle the flipping.  This might be the most 
> elegant approach, since it'd make the driver more "standard" like the 
> other drivers.

Reed,

Option (3) would likely be the simpliest and most efficient.  The only
downside is that at least a few applications are going to be confused
by images that appear to be in bottom to top orientation (ie
geotransform[5] is positive instead of the usual negative).

Option (1) is what I would do if I were trying to resolve the problem.
But if you do option (1) please be sure only to do the file scan when
actual image data is requested.  No point in the open operation being
very expensive.

Lastly, if you are going to do work on these drivers, please do it against
the code in trunk, not the 1.5.0 release.  There have been a bunch of tweaks
and I don't want this getting lost in a patch.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Chris.Barker at noaa.gov  Tue Feb  5 23:15:47 2008
From: Chris.Barker at noaa.gov (Chris Barker)
Date: Tue Feb  5 23:16:09 2008
Subject: [gdal-dev] OGR and VPF
In-Reply-To: <200802052019.41258.even.rouault@mines-paris.org>
References: <47A7A127.2000804@noaa.gov> <47A7BCBD.6060805@noaa.gov>
	<47A7C44A.5030700@pobox.com>
	<200802052019.41258.even.rouault@mines-paris.org>
Message-ID: <47A93473.3090904@noaa.gov>

Even Rouault wrote:
> In fact, OGDI *used to be* very case sensitive. If you use OGDI from its CVS 
> repository, it should be much more tolerant towards case sensitiveness.

Good to know.

> Note that it's important not to include the final slash in your gltp: "URL", 
> so gltp:/vrf/path_to_c0a26a is fine, but not gltp:/vrf/path_to_c0a26a/ .

Thanks, I'll give that try when I get back in the office -- I'm on 
travel now.

> Note, I've tried to download some DNC on the 
> http://www.nga.mil/portal/site/dnc/ NGA site, but I can't find full libraries 
> to download. Instead it only offers 'patches' with which I don't know what to 
> do.

I had the same problem, but with enough poking around I finally found 
the full data -- that site is poorly designed in that regard.

 From the main page, pick a region.

Then go to the "library coverage group" box, and pick a "Coverage 
Group". You should then get page where you can check the "download full 
library" box.

- Chris

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From wollez at gmx.net  Wed Feb  6 07:58:38 2008
From: wollez at gmx.net (WolfgangZ)
Date: Wed Feb  6 07:59:03 2008
Subject: [gdal-dev] Re: help needed with image creation
In-Reply-To: <47A8C084.2030303@pobox.com>
References: <47A76F4E.4090501@gmx.net> <47A8C084.2030303@pobox.com>
Message-ID: <focau6$neg$1@ger.gmane.org>

Frank Warmerdam schrieb:
> Wolfgang wrote:
>> Hi,
>>
>> I want to create some images where I set the pixel values manually. 
>> The values are Floats that need to be mapped finally to a color map. 
>> I'm not really a skilled programmer but I've managed to get a first 
>> idea how to do it (in python):
>>
>> from osgeo import gdal
>> import numpy as Numeric
>>
>> format = "GTiff"
>> driver = gdal.GetDriverByName( format )
>>
>> dst_filename='test.tif'
>> dst_ds = driver.Create( dst_filename, 3, 2, 1, gdal.GDT_Float32 )
>> raster=Numeric.array([[ 1.,  200.5 ,  3. ],[ 256. ,  5. ,  60. ]])
>> dst_ds.GetRasterBand(1).WriteArray( raster )
>>
>> What I don't understand is how to create/define a color map so that 
>> the result looks better? I also suppose that it is not the best to 
>> create float tiffs as not so many applications will support that type. 
>> It would help me much if anybody could show me the steps needed to do 
>> the task.
>>
>> I'm sorry if this looks too easy for skilled programmers, but I'm 
>> completely new to program graphics (with GDAL) and I still don't have 
>> the overview over all GDAL functions.
> 
> Wolfgang,
> 
> You can't generally assign a palette to floating point geotiff files.
> There is no way for applications to understand how to apply it.
> 
> Generally speaking, in GeoTIFF, you either offer the raw floating point
> science data, or you offer a version of it is that been prescaled to
> integers (usually 0 to 255) with a colormap.
> 
> I'd add that it is very common for folks to distribute raw science
> data in floating point, and for the decision on a colormap to be
> applied being made by the user in the viewing application.
> 
> Best regards,

Frank,
thanks for your answer! I recalculate the floats to a color manually, I 
just thought that there would be somewhere a convenience function to do 
that.
Many thanks
Wolfgang

From warmerdam at pobox.com  Wed Feb  6 10:31:23 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb  6 10:31:42 2008
Subject: [gdal-dev] Proposed 1.4.5 and 1.5.1 Releases
Message-ID: <47A9D2CB.5000606@pobox.com>

Folks,

We have accumulated a number of noteworthy fixes since the 1.5.0 release
and I'd like to issue a 1.5.1 release by early next week.  I'd appreciate
it if anyone who feels there are high priority bugs that need to be fixed for
1.5.1 would bring them to my attention.

I'd also like to do a 1.4.5 release with cumulative bug fixes in that branch
(which are not really very many).  Barring something severe I expect this to
be the last 1.4.x release ever so if there is anything folks feel needs to be
in it, it should happen now.

I propose that I would be release manager for both releases unless someone
else really wants to be.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dmorissette at mapgears.com  Wed Feb  6 10:59:27 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Feb  6 10:59:31 2008
Subject: [gdal-dev] Proposed 1.4.5 and 1.5.1 Releases
In-Reply-To: <47A9D2CB.5000606@pobox.com>
References: <47A9D2CB.5000606@pobox.com>
Message-ID: <47A9D95F.1000907@mapgears.com>

+1 on the point releases and on Frank as release manager (FYI I'll be 
offline until Monday).

Daniel

Frank Warmerdam wrote:
> Folks,
> 
> We have accumulated a number of noteworthy fixes since the 1.5.0 release
> and I'd like to issue a 1.5.1 release by early next week.  I'd appreciate
> it if anyone who feels there are high priority bugs that need to be 
> fixed for
> 1.5.1 would bring them to my attention.
> 
> I'd also like to do a 1.4.5 release with cumulative bug fixes in that 
> branch
> (which are not really very many).  Barring something severe I expect 
> this to
> be the last 1.4.x release ever so if there is anything folks feel needs 
> to be
> in it, it should happen now.
> 
> I propose that I would be release manager for both releases unless someone
> else really wants to be.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
From jrepetto at free.fr  Wed Feb  6 11:34:27 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Feb  6 11:34:36 2008
Subject: [gdal-dev] Proposed 1.4.5 and 1.5.1 Releases
In-Reply-To: <47A9D2CB.5000606@pobox.com>
References: <47A9D2CB.5000606@pobox.com>
Message-ID: <47A9E193.2010400@free.fr>

Frank Warmerdam a ?crit :
> Folks,
> 
> We have accumulated a number of noteworthy fixes since the 1.5.0 release
> and I'd like to issue a 1.5.1 release by early next week.  I'd appreciate
> it if anyone who feels there are high priority bugs that need to be 
> fixed for
> 1.5.1 would bring them to my attention.

Hello Frank,

For me, solving bug #1935 is high priority, because some maps are not 
displayed correctly in QGIS.

There are also patches from Even Rouault for bugs #1937 and #1939 that 
are waiting in Trac, but the priority is lower.

Regards,
Jean-Claude
From craig.miller at spatialminds.com  Wed Feb  6 17:26:04 2008
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Feb  6 17:26:06 2008
Subject: [gdal-dev] Tile existing tileset w/ index
Message-ID: <00d601c8690f$42e1f670$c8a5e350$@miller@spatialminds.com>

I have a set of DRGs in EPSG:4326 w/ collars and a MapServer stile tileindex
shape file.  In my software, I use the tileindex to crop the collars at
presentation time.

 

Does anyone have a script or utility that will take my existing tileset and
turn it into a set of 256px x 256px tiles using my existing tileindex to
trim the input DRGs?  If not, anything similar in C/C++ that I can tweak for
my needs?

 

Thanks,

Craig

 


No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.516 / Virus Database: 269.19.20/1262 - Release Date: 2/6/2008
9:13 AM
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080206/4acdf366/attachment.html
From jrepetto at free.fr  Thu Feb  7 08:42:59 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Feb  7 08:43:10 2008
Subject: [gdal-dev] Unexpected value for TARGET creation option
Message-ID: <47AB0AE3.2060906@free.fr>

Hello,

I have just upgraded from GDAL 1.4.2 to GDAL 1.5.0, and now I have an 
error message when creating an ECW file :


gdal_translate -of ECW -co TARGET=94% -co DATUM=NTF -co PROJ=LM1FRA2D 
-a_ullr 970000 1860000 980000 1850000 MAP.png MAP.ecw

Input file size is 4000, 4000
Warning 6: '94%' is an unexpected value for TARGET creation option of 
type float.

I have tested some variants :
-co TARGET=94
-co TARGET=0.94
-co "TARGET=94%"

All are giving the same message.
What is the right syntax ?

Thanks,
Jean-Claude


From warmerdam at pobox.com  Thu Feb  7 11:20:52 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  7 11:21:13 2008
Subject: [gdal-dev] Unexpected value for TARGET creation option
In-Reply-To: <47AB0AE3.2060906@free.fr>
References: <47AB0AE3.2060906@free.fr>
Message-ID: <47AB2FE4.3020308@pobox.com>

Jean-Claude Repetto wrote:
> Hello,
> 
> I have just upgraded from GDAL 1.4.2 to GDAL 1.5.0, and now I have an 
> error message when creating an ECW file :
> 
> 
> gdal_translate -of ECW -co TARGET=94% -co DATUM=NTF -co PROJ=LM1FRA2D 
> -a_ullr 970000 1860000 980000 1850000 MAP.png MAP.ecw
> 
> Input file size is 4000, 4000
> Warning 6: '94%' is an unexpected value for TARGET creation option of 
> type float.
> 
> I have tested some variants :
> -co TARGET=94
> -co TARGET=0.94
> -co "TARGET=94%"
> 
> All are giving the same message.
> What is the right syntax ?

Jean-Claude,

I'm surprised.  I would have expected TARGET=94 or TARGET=0.94 to be accepted.
The "%" is improper and should not be included.  However, I tried this and
I see the same behavior you do. I have filed a ticket on this issue and it
should be fixed by 1.5.1. In the meantime you can just ignore this warning.

   http://trac.osgeo.org/gdal/ticket/2204

The validation of creation options is new in GDAL 1.5.0.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jrepetto at free.fr  Thu Feb  7 11:34:19 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Feb  7 11:34:25 2008
Subject: [gdal-dev] Georeferencing an ECW file
Message-ID: <47AB330B.3060105@free.fr>

Hello,

I have some ECW files that do not include datum, projection and coordinates.
Is there a GDAL tool that can be used to add these informations into the 
header of the ECW files, without decompressing and compressing again the 
image ?

Regards,
Jean-Claude
From jrepetto at free.fr  Thu Feb  7 11:40:06 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Feb  7 11:40:15 2008
Subject: [gdal-dev] Unexpected value for TARGET creation option
In-Reply-To: <47AB2FE4.3020308@pobox.com>
References: <47AB0AE3.2060906@free.fr> <47AB2FE4.3020308@pobox.com>
Message-ID: <47AB3466.2000400@free.fr>

Frank Warmerdam wrote :

> The "%" is improper and should not be included.  However, I tried this and
> I see the same behavior you do. I have filed a ticket on this issue and it
> should be fixed by 1.5.1. In the meantime you can just ignore this warning.
> 
>   http://trac.osgeo.org/gdal/ticket/2204
> 
> The validation of creation options is new in GDAL 1.5.0.
> 

Hello Frank,

Thanks for your answer. But the TARGET parameter is set to the default 
value (75%), so the result file is 26 Mb large, instead of 6 Mb -> I 
have reinstalled GDAL 1.4.2.

Regards,
Jean-Claude

From bclay at ball.com  Thu Feb  7 11:43:33 2008
From: bclay at ball.com (Clay, Bruce)
Date: Thu Feb  7 11:43:48 2008
Subject: [gdal-dev] ESRI file database
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFD98@daytonmsg2k3.AERO.BALL.COM>

I checked the supported format list and did not see ESRI file database.
Is a driver in the works or does some other existing driver work with
them such as the SDE driver?

 

Bruce

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080207/b6d5d96d/attachment.html
From warmerdam at pobox.com  Thu Feb  7 11:59:59 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  7 12:00:17 2008
Subject: [gdal-dev] ESRI file database
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFD98@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFD98@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <47AB390F.2020707@pobox.com>

Clay, Bruce wrote:
> I checked the supported format list and did not see ESRI file database. 
>  Is a driver in the works or does some other existing driver work with 
> them such as the SDE driver?

Bruce,

There is no driver in the works (that I know of).  I don't know if it can
be used through the SDE driver.  I got the impression once from an ESRI person
that there is a higher level API we should have been using if we wanted one
way to use all ESRI feature databases.

I understand the format is supposed to be "open" but that it wasn't clear how
this would be accomplished a year ago.  Perhaps someone could ask if it is now
clear, and how it is accomplished so we can write a driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Thu Feb  7 12:02:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  7 12:02:24 2008
Subject: [gdal-dev] Georeferencing an ECW file
In-Reply-To: <47AB330B.3060105@free.fr>
References: <47AB330B.3060105@free.fr>
Message-ID: <47AB398F.2050901@pobox.com>

Jean-Claude Repetto wrote:
> Hello,
> 
> I have some ECW files that do not include datum, projection and 
> coordinates.
> Is there a GDAL tool that can be used to add these informations into the 
> header of the ECW files, without decompressing and compressing again the 
> image ?

Jean-Claude,

You could wrap it with a .VRT file which would effectively add this
information for GDAL based applications that reference the .vrt file.
But I am not aware of any way of updating this header info a .ecw in place.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bfraser at geoanalytic.com  Thu Feb  7 12:11:36 2008
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Feb  7 12:12:55 2008
Subject: [gdal-dev] Georeferencing an ECW file
References: <47AB330B.3060105@free.fr>
Message-ID: <00f601c869ac$7f2435b0$140002c0@shark>

Jaean-Claude,

  I've used ERMapper's ECW Header Editor (free download on
their web site) to edit the coordinate system definition
without re-compressing.  It's a Windows GUI program so if
you've got lots of files to do you may want to use something
like AutoIt (http://www.autoitscript.com/autoit3/) to script
the changes.

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Jean-Claude Repetto" <jrepetto@free.fr>
To: <gdal-dev@lists.osgeo.org>
Sent: Thursday, February 07, 2008 9:34 AM
Subject: [gdal-dev] Georeferencing an ECW file


> Hello,
>
> I have some ECW files that do not include datum,
projection and coordinates.
> Is there a GDAL tool that can be used to add these
informations into the
> header of the ECW files, without decompressing and
compressing again the
> image ?
>
> Regards,
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From thomasgeo at gmx.de  Thu Feb  7 13:22:18 2008
From: thomasgeo at gmx.de (Thomas Becker)
Date: Thu Feb  7 13:22:26 2008
Subject: [gdal-dev] GDALwarp - Too many points (441 out of 441)
Message-ID: <47AB4C5A.9000709@gmx.de>

Hello listers,

i am new to GDAL and have a problem to warp a GeoTiff.
The projection of the GeoTiff i got is shown in QGIS as
'+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
but the info file from the department says
ETRS89/ UTM 33 Ellipsoide GRS80.

Now i was trying to use gdalwarp with

gdalwarp -s_srs '+proj=longlat +ellps=WGS84 +datum=WGS84' -t_srs
'+proj=utm +zone=33 +ellps=GRS80' input.tif output.tif

to transform the coordinates. I was already trying it with the EPSG 
codes 4326 to 25833 the error message is always the same:

ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds

I was searching in this list, found an article from 2006 but there the 
utm zone seems to causing the problem.

I will add the gdalinfo output:

Driver: GTiff/GeoTIFF Size is 10000, 10000 Coordinate System is `'
Origin = (33360000.000000000000000,5972000.000000000000000) Pixel Size =
(0.200000000000000,-0.200000000000000) Metadata:
   TIFFTAG_SOFTWARE=OrthoVista
   TIFFTAG_XRESOLUTION=1
   TIFFTAG_YRESOLUTION=1
   TIFFTAG_RESOLUTIONUNIT=1 (unitless) Corner Coordinates: Upper Left
(33360000.000, 5972000.000) Lower Left (33360000.000, 5970000.000) Upper
Right (33362000.000, 5972000.000) Lower Right (33362000.000,
5970000.000) Center (33361000.000, 5971000.000) Band 1 Block=10000x1
Type=Byte, ColorInterp=Red Band 2 Block=10000x1 Type=Byte,
ColorInterp=Green Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue


I hope you can help me to transform the file...

Cheers,
Thomas
From warmerdam at pobox.com  Thu Feb  7 14:03:23 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  7 14:03:41 2008
Subject: [gdal-dev] GDALwarp - Too many points (441 out of 441)
In-Reply-To: <47AB4C5A.9000709@gmx.de>
References: <47AB4C5A.9000709@gmx.de>
Message-ID: <47AB55FB.8040806@pobox.com>

Thomas Becker wrote:
> Hello listers,
> 
> i am new to GDAL and have a problem to warp a GeoTiff.
> The projection of the GeoTiff i got is shown in QGIS as
> '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
> but the info file from the department says
> ETRS89/ UTM 33 Ellipsoide GRS80.
> 
> Now i was trying to use gdalwarp with
> 
> gdalwarp -s_srs '+proj=longlat +ellps=WGS84 +datum=WGS84' -t_srs
> '+proj=utm +zone=33 +ellps=GRS80' input.tif output.tif
...
> I will add the gdalinfo output:
> 
> Driver: GTiff/GeoTIFF Size is 10000, 10000 Coordinate System is `'
> Origin = (33360000.000000000000000,5972000.000000000000000) Pixel Size =
> (0.200000000000000,-0.200000000000000) Metadata:

Thomas,

The above coordinates do not appear to be UTM 33 (much less lat/long
decimal degrees).  Specifically with an X origin of 33 million you are
either using a world projection (the world is roughly 40 million meters
around) or you are measuring in some alternate units like centimeters.

Basically, you need to find out what coordinate system you are working
with before you can meaningfully proceed.

My offhand guess would be that you are using Plate Caree with a false
easting such that the origin is at the dateline instead of the greenwich
meridian.  But that is a shot in the dark.

PS. I hate playing "please guess my coordinate system" games.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From alouis at galdosinc.com  Thu Feb  7 17:25:29 2008
From: alouis at galdosinc.com (Andrew T. Louis)
Date: Thu Feb  7 17:25:17 2008
Subject: [gdal-dev] OGR 3D coordinates 
In-Reply-To: <47AB4C5A.9000709@gmx.de>
Message-ID: <4E1D53230994FD45A119B5090DFBF46001894DFE@andalusia.Galdos.local>

Hi all,
Does the ogr2ogr tool handle composed WKT (datum + elevation=Z value)
for CRS transformation?
I tried with no success... 

If it does, should the input coordinates only be 3D? Or will it ignore
the Z value when transforming a 2D input?


Thanks
Andrew T. Louis
From warmerdam at pobox.com  Thu Feb  7 17:34:54 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb  7 17:35:12 2008
Subject: [gdal-dev] OGR 3D coordinates
In-Reply-To: <4E1D53230994FD45A119B5090DFBF46001894DFE@andalusia.Galdos.local>
References: <4E1D53230994FD45A119B5090DFBF46001894DFE@andalusia.Galdos.local>
Message-ID: <47AB878E.9070003@pobox.com>

Andrew T. Louis wrote:
> Hi all,
> Does the ogr2ogr tool handle composed WKT (datum + elevation=Z value)
> for CRS transformation?
> I tried with no success... 

Andrew,

Are you asking if GDAL/OGR supposed compound coordinate system
defining the Z axis in WKT?  The short answer is no.

> If it does, should the input coordinates only be 3D? Or will it ignore
> the Z value when transforming a 2D input?

The transform() method on OGRGeometries will assume a Z of zero before
calling the transformer which operates in 3D.  Reviewing the code quickly
it seems that in some cases (some types of geometry) the geometry may
be forced into 3D mode after the transform method.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From alouis at galdosinc.com  Thu Feb  7 17:37:54 2008
From: alouis at galdosinc.com (Andrew T. Louis)
Date: Thu Feb  7 17:37:52 2008
Subject: [gdal-dev] OGR 3D coordinates
In-Reply-To: <47AB878E.9070003@pobox.com>
Message-ID: <4E1D53230994FD45A119B5090DFBF46001894E03@andalusia.Galdos.local>

Thanks a lot.
Just what I wanted to know

Thanks

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 7 f?vrier 2008 14:35
To: Andrew T. Louis
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGR 3D coordinates

Andrew T. Louis wrote:
> Hi all,
> Does the ogr2ogr tool handle composed WKT (datum + elevation=Z value)
> for CRS transformation?
> I tried with no success... 

Andrew,

Are you asking if GDAL/OGR supposed compound coordinate system
defining the Z axis in WKT?  The short answer is no.

> If it does, should the input coordinates only be 3D? Or will it ignore
> the Z value when transforming a 2D input?

The transform() method on OGRGeometries will assume a Z of zero before
calling the transformer which operates in 3D.  Reviewing the code quickly
it seems that in some cases (some types of geometry) the geometry may
be forced into 3D mode after the transform method.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From matt.wilkie at gov.yk.ca  Thu Feb  7 19:25:23 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Feb  7 19:25:27 2008
Subject: [gdal-dev] ESRI file database
In-Reply-To: <47AB390F.2020707@pobox.com>
References: <C482FF98AE985A47B8C982FD429C9E34FEFD98@daytonmsg2k3.AERO.BALL.COM>
	<47AB390F.2020707@pobox.com>
Message-ID: <47ABA173.7030409@gov.yk.ca>

> I understand the format is supposed to be "open" but that it wasn't 
> clear how this would be accomplished a year ago.  Perhaps someone
> could ask if it is now clear, and how it is accomplished so we can
> write a driver.

I read in the Q&A  from the 2007 ESRI User Conference[1] that an api for 
accessing file geodabases will be published after ArcGIS 9.3 is 
released. This means at least 6 months from now, more likely 12 in my 
opinion.

[1] Q: What are ESRI?s plans for opening up access to the geodatabase?
http://events.esri.com/uc/QandA/index.cfm?ConferenceID=51AD3E9D-D566-ED85-AEE0DBF4F59C45FD


best regards,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From wollez at gmx.net  Fri Feb  8 04:25:30 2008
From: wollez at gmx.net (WolfgangZ)
Date: Fri Feb  8 04:25:36 2008
Subject: [gdal-dev] Re: GDALwarp - Too many points (441 out of 441)
In-Reply-To: <47AB55FB.8040806@pobox.com>
References: <47AB4C5A.9000709@gmx.de> <47AB55FB.8040806@pobox.com>
Message-ID: <foh766$5sl$1@ger.gmane.org>

Frank Warmerdam schrieb:
> Thomas Becker wrote:
>> Hello listers,
>>
>> i am new to GDAL and have a problem to warp a GeoTiff.
>> The projection of the GeoTiff i got is shown in QGIS as
>> '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
>> but the info file from the department says
>> ETRS89/ UTM 33 Ellipsoide GRS80.
>>
>> Now i was trying to use gdalwarp with
>>
>> gdalwarp -s_srs '+proj=longlat +ellps=WGS84 +datum=WGS84' -t_srs
>> '+proj=utm +zone=33 +ellps=GRS80' input.tif output.tif
> ...
>> I will add the gdalinfo output:
>>
>> Driver: GTiff/GeoTIFF Size is 10000, 10000 Coordinate System is `'
>> Origin = (33360000.000000000000000,5972000.000000000000000) Pixel Size =
>> (0.200000000000000,-0.200000000000000) Metadata:
> 
> Thomas,
> 
> The above coordinates do not appear to be UTM 33 (much less lat/long
> decimal degrees).  Specifically with an X origin of 33 million you are
> either using a world projection (the world is roughly 40 million meters
> around) or you are measuring in some alternate units like centimeters.
> 
> Basically, you need to find out what coordinate system you are working
> with before you can meaningfully proceed.
> 
> My offhand guess would be that you are using Plate Caree with a false
> easting such that the origin is at the dateline instead of the greenwich
> meridian.  But that is a shot in the dark.
> 
> PS. I hate playing "please guess my coordinate system" games.
> 
> Best regards,
just  a guess: can it be that your x values have the UTM zone printed 
before the actual x value comes? Than you need to get rid of these two 
numbers. One way would be to translate your image to the vrt format 
(this gives only a text file with the geographic description of the 
image which you easily can edit. Than you use the vrt file as input for 
your warping.

regards
wolfgang

From thomasGeo at gmx.de  Fri Feb  8 04:35:07 2008
From: thomasGeo at gmx.de (Thomas Becker)
Date: Fri Feb  8 04:35:10 2008
Subject: [gdal-dev] UTM -> LAEA
In-Reply-To: <foh766$5sl$1@ger.gmane.org>
References: <47AB4C5A.9000709@gmx.de> <47AB55FB.8040806@pobox.com>
	<foh766$5sl$1@ger.gmane.org>
Message-ID: <20080208093507.261300@gmx.net>

Hello listers,

using gdalwarp to transform a Landsat image from UTM to lambert Azimuthal Equal Area, the output is showing "unknown" for the Datum and "unnamed" for the Spheroid.

I was using the following command:
gdalwarp -t_srs '+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80' p193r002_7t19990711_z33_nn40.tif test.tif

The outputof gdalinfo:

$ gdalinfo.exe /g/etm+/utm/test.tif
Driver: GTiff/GeoTIFF
Files: g:/etm+/utm/test.tif
Size is 9601, 8837
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["GRS 1980(IUGG, 1980)",
        DATUM["unknown",
            SPHEROID["unnamed",6378137,298.2572221010042]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Azimuthal_Equal_Area"],
    PARAMETER["latitude_of_center",52],
    PARAMETER["longitude_of_center",10],
    PARAMETER["false_easting",4321000],
    PARAMETER["false_northing",3210000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (4451567.686025693100000,3623709.044894170500000)
Pixel Size = (28.522398941536249,-28.522398941536249)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  ( 4451567.686, 3623709.045)
Lower Left  ( 4451567.686, 3371656.605)
Upper Right ( 4725411.238, 3623709.045)
Lower Right ( 4725411.238, 3371656.605)
Center      ( 4588489.462, 3497682.825)
Band 1 Block=9601x1 Type=Byte, ColorInterp=Gray

Can you tell me how i have to set the parameters for the DATUM and SPHEROID? Wenn i am using the EPSG:3035 ther will be no adjustments for lat_0 and so on. Is there a possibility to use these parameters as well with the EPSG Code?

Cheers,
Thomas
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
From miczanin at gmail.com  Fri Feb  8 05:39:04 2008
From: miczanin at gmail.com (Michele Zanin)
Date: Fri Feb  8 05:39:07 2008
Subject: [gdal-dev] world file to world file
Message-ID: <c27147560802080239j1178faaft4bf5f46aadfc59f1@mail.gmail.com>

Dear gdal experts,
  i'm very happy with gdal because it solved a lot of difficult
situations for me, but this time I'm not able to find the right
sequence of operations to reach my goal.

This is the problem.
I have a standard (=not geotiff) tiff image and its corresponding
world file using projection epsg:3003, something like:

name.tfw
1.00000000000000
0.00000000000000
0.00000000000000
-1.00000000000000
1615240.50000000000000
5139639.50000000000000

My goal is to  create with gdal another world file for the same tif,
using a different projection, in my case epsg:4326. An example
(numbers are from another image):

another.tfw
0.000167584405076
-0.000000478207876
-0.000000240088571
-0.000115295080174
11.689665492171006
47.091567061470897

It should be not difficult to write a program to do this
transformation, but before starting to write it myself, I think it's a
good idea to ask you for a simpler solution, maybe using a combination
of standard gdal utilities.

Thank you very much!
michele
From tobiasheuchel at web.de  Fri Feb  8 06:03:50 2008
From: tobiasheuchel at web.de (Tobias Heuchel)
Date: Fri Feb  8 06:03:53 2008
Subject: [gdal-dev] GDALwarp - Too many points (441 out of 441)
Message-ID: <31797156@web.de>

Thomas,

you coord. values do have the zone digits (in your case 33) in front of the east values. This is a way in Germany (or also other countries?) to use the coordinates sometimes, but as far as I know definitely not the default in using UTM coordinates and sometimes confusing. To get the things work, take a UTM zone 33 coordinate sytem definition and change the false easting  by applying an additional 33000000 meter shift and you probably can work with these coords. Or just for testing remove the first 2 digits (33) on your coord. east values.

Tobias

> -----Urspr?ngliche Nachricht-----
> Von: "Thomas Becker" <thomasgeo@gmx.de>
> Gesendet: 07.02.08 19:22:51
> An: gdal-dev@lists.osgeo.org
> Betreff: [gdal-dev] GDALwarp - Too many points (441 out of 441)


> 
> Hello listers,
> 
> i am new to GDAL and have a problem to warp a GeoTiff.
> The projection of the GeoTiff i got is shown in QGIS as
> '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
> but the info file from the department says
> ETRS89/ UTM 33 Ellipsoide GRS80.
> 
> Now i was trying to use gdalwarp with
> 
> gdalwarp -s_srs '+proj=longlat +ellps=WGS84 +datum=WGS84' -t_srs
> '+proj=utm +zone=33 +ellps=GRS80' input.tif output.tif
> 
> to transform the coordinates. I was already trying it with the EPSG 
> codes 4326 to 25833 the error message is always the same:
> 
> ERROR 1: Too many points (441 out of 441) failed to transform,
> unable to compute output bounds
> 
> I was searching in this list, found an article from 2006 but there the 
> utm zone seems to causing the problem.
> 
> I will add the gdalinfo output:
> 
> Driver: GTiff/GeoTIFF Size is 10000, 10000 Coordinate System is `'
> Origin = (33360000.000000000000000,5972000.000000000000000) Pixel Size =
> (0.200000000000000,-0.200000000000000) Metadata:
>    TIFFTAG_SOFTWARE=OrthoVista
>    TIFFTAG_XRESOLUTION=1
>    TIFFTAG_YRESOLUTION=1
>    TIFFTAG_RESOLUTIONUNIT=1 (unitless) Corner Coordinates: Upper Left
> (33360000.000, 5972000.000) Lower Left (33360000.000, 5970000.000) Upper
> Right (33362000.000, 5972000.000) Lower Right (33362000.000,
> 5970000.000) Center (33361000.000, 5971000.000) Band 1 Block=10000x1
> Type=Byte, ColorInterp=Red Band 2 Block=10000x1 Type=Byte,
> ColorInterp=Green Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
> 
> 
> I hope you can help me to transform the file...
> 
> Cheers,
> Thomas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


_______________________________________________________________________
Jetzt neu! Sch?tzen Sie Ihren PC mit McAfee und WEB.DE. 30 Tage
kostenlos testen. http://www.pc-sicherheit.web.de/startseite/?mc=022220

From warmerdam at pobox.com  Fri Feb  8 08:55:01 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  8 08:55:30 2008
Subject: [gdal-dev] world file to world file
In-Reply-To: <c27147560802080239j1178faaft4bf5f46aadfc59f1@mail.gmail.com>
References: <c27147560802080239j1178faaft4bf5f46aadfc59f1@mail.gmail.com>
Message-ID: <47AC5F35.6070905@pobox.com>

Michele Zanin wrote:
> Dear gdal experts,
>   i'm very happy with gdal because it solved a lot of difficult
> situations for me, but this time I'm not able to find the right
> sequence of operations to reach my goal.
> 
> This is the problem.
> I have a standard (=not geotiff) tiff image and its corresponding
> world file using projection epsg:3003, something like:
> 
> name.tfw
> 1.00000000000000
> 0.00000000000000
> 0.00000000000000
> -1.00000000000000
> 1615240.50000000000000
> 5139639.50000000000000
> 
> My goal is to  create with gdal another world file for the same tif,
> using a different projection, in my case epsg:4326. An example
> (numbers are from another image):
> 
> another.tfw
> 0.000167584405076
> -0.000000478207876
> -0.000000240088571
> -0.000115295080174
> 11.689665492171006
> 47.091567061470897
> 
> It should be not difficult to write a program to do this
> transformation, but before starting to write it myself, I think it's a
> good idea to ask you for a simpler solution, maybe using a combination
> of standard gdal utilities.

Michele,

I'm guessing that "another.tfw" represents the *approximate* world file
for the original file, but interpreted in EPSG:4326 - is that right?

One approach to computing such a thing would be to transform the four
corners of the file from the original coordinate system to epsg:4326
and then use the GDALGCPsToGeotransform() function.  That function
computes an approximate geotransform from a set of control points.

The Geotransform is of course just the contents of the world file,
though in a different order.

Unfortunately, doing the above is not possible with any of the command
line utilities.  I see that GDALGCPsToGeotransform() is accessable from
the modern swig bindings so it should be possible to write a script to
do this (though it might be a bit messy).  It could also of course be
written as a small C/C++ utility.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From miczanin at gmail.com  Fri Feb  8 09:05:23 2008
From: miczanin at gmail.com (Michele Zanin)
Date: Fri Feb  8 09:05:26 2008
Subject: [gdal-dev] world file to world file
In-Reply-To: <47AC5F35.6070905@pobox.com>
References: <c27147560802080239j1178faaft4bf5f46aadfc59f1@mail.gmail.com>
	<47AC5F35.6070905@pobox.com>
Message-ID: <c27147560802080605l5c7f67efrd900f1e4e0e8b1b8@mail.gmail.com>

Frank,

On Feb 8, 2008 2:55 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> I'm guessing that "another.tfw" represents the *approximate* world file
> for the original file, but interpreted in EPSG:4326 - is that right?

Exactly.

> Unfortunately, doing the above is not possible with any of the command
> line utilities. ... It could also of course be
> written as a small C/C++ utility.

I will implement a small c++ utility.

Thank you for your help, I really appreciate it!
michele
From warmerdam at pobox.com  Fri Feb  8 09:42:56 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  8 09:43:27 2008
Subject: [gdal-dev] UTM -> LAEA
In-Reply-To: <20080208093507.261300@gmx.net>
References: <47AB4C5A.9000709@gmx.de> <47AB55FB.8040806@pobox.com>
	<foh766$5sl$1@ger.gmane.org> <20080208093507.261300@gmx.net>
Message-ID: <47AC6A70.1030704@pobox.com>

Thomas Becker wrote:
> Hello listers,
> 
> using gdalwarp to transform a Landsat image from UTM to lambert 
 > Azimuthal Equal Area, the output is showing "unknown" for the
 > Datum and "unnamed" for the Spheroid.
> 
> I was using the following command:
> gdalwarp -t_srs '+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 
 >          +y_0=3210000 +ellps=GRS80' p193r002_7t19990711_z33_nn40.tif test.tif
...
> PROJCS["unnamed",
>     GEOGCS["GRS 1980(IUGG, 1980)",
>         DATUM["unknown",
>             SPHEROID["unnamed",6378137,298.2572221010042]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>     PARAMETER["latitude_of_center",52],
>     PARAMETER["longitude_of_center",10],
>     PARAMETER["false_easting",4321000],
>     PARAMETER["false_northing",3210000],
>     UNIT["metre",1,
...
> Can you tell me how i have to set the parameters for the DATUM and 
 > SPHEROID? Wenn i am using the EPSG:3035 ther will be no adjustments
 > for lat_0 and so on. Is there a possibility to use these parameters
 > as well with the EPSG Code?

Thomas,

GDAL translates:

  +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80

Into WKT as:

   PROJCS["unnamed",
     GEOGCS["GRS 1980(IUGG, 1980)",
         DATUM["unknown",
             SPHEROID["GRS80",6378137,298.257222101]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000]]

The name for +ellps=GRS80 comes from a hardcoded internal table
in the proj.4 string translation (adapted from PROJ.4 itself).
The spheroid name gets lost when the geotiff writer since there
is no code for capturing user provided spheroid names (assuming
there is a particular geokey for it).

EPSG:3035 translates as:

PROJCS["ETRS89 / ETRS-LAEA",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.01745329251994328,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4258"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     AUTHORITY["EPSG","3035"]]

I don't really understand your point about there being no
adjustements to +lat_0.  The latitude of center (+lat_0)
seems adequately addressed in this expansion.  But, you can actually
use WKT as input to gdalwarp.  So for instance, if you saved the
following as a file, you could use that filename as the argument
to -t_srs in gdalwarp.

PROJCS["ETRS89 / ETRS-LAEA",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.01745329251994328,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4258"]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]

This gives you the standard definition of ETRS89 while
still allowing you to modify the projection parameters if you
want.  It comes back from GeoTIFF looking like:

PROJCS["ETRS89 / ETRS-LAEA",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4258"]],
     PROJECTION["Lambert_Azimuthal_Equal_Area"],
     PARAMETER["latitude_of_center",52],
     PARAMETER["longitude_of_center",10],
     PARAMETER["false_easting",4321000],
     PARAMETER["false_northing",3210000],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]

I hope this helps though I fear I've missed part of your point.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From matt.wilkie at gov.yk.ca  Fri Feb  8 13:26:48 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Fri Feb  8 13:26:51 2008
Subject: [gdal-dev] ESRI file database
In-Reply-To: <47ABA173.7030409@gov.yk.ca>
References: <C482FF98AE985A47B8C982FD429C9E34FEFD98@daytonmsg2k3.AERO.BALL.COM>	<47AB390F.2020707@pobox.com>
	<47ABA173.7030409@gov.yk.ca>
Message-ID: <47AC9EE8.2010002@gov.yk.ca>

Matt Wilkie wrote:
>> I understand the format is supposed to be "open" but that it wasn't 
>> clear how this would be accomplished a year ago.  Perhaps someone
>> could ask if it is now clear, and how it is accomplished so we can
>> write a driver.
> 
> I read in the Q&A  from the 2007 ESRI User Conference[1] that an api for 
> accessing file geodabases will be published after ArcGIS 9.3 is 
> released. This means at least 6 months from now, more likely 12 in my 
> opinion.
> 
> [1] Q: What are ESRI?s plans for opening up access to the geodatabase?
> http://events.esri.com/uc/QandA/index.cfm?ConferenceID=51AD3E9D-D566-ED85-AEE0DBF4F59C45FD 

I asked ESRI Canada for more information. This is their response:

"There is in fact a NIM number for the enhancement request to provide 
open API to allow access to File Geodatabase data without ArcObjects. 
For your records, the number for this enhancement is NIM010509. As of 
right now, there is no planned fix specified for this enhancement 
request, but you can use the tracking number I gave to you to see any 
advancements that have been made for this issue. "

You won't find this number on any ESRI web pages, but ESRI customers can 
use it to ask their customer service representatives for updates (and 
please do so, that is one of the ways the gauge interest).

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From mchapman at texelinc.com  Fri Feb  8 14:49:35 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Fri Feb  8 14:49:50 2008
Subject: [gdal-dev] Thread Synchronization in 1.5.0?
Message-ID: <002801c86a8b$bbe38e30$33aaaa90$@com>

Frank,

 

I see a lot of thread synchronization code in 1.5.0 but not everywhere.
Does this mean that some of GDAL is currently thread safe and other parts
are not, or is the whole library considered safe at this point?  Is there
any public documentation on this new behavior?

 

Best regards,

 

Martin Chapman

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080208/62dd18e9/attachment.html
From warmerdam at pobox.com  Fri Feb  8 16:04:34 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  8 16:04:59 2008
Subject: [gdal-dev] Re: Thread Synchronization in 1.5.0?
In-Reply-To: <002801c86a8b$bbe38e30$33aaaa90$@com>
References: <002801c86a8b$bbe38e30$33aaaa90$@com>
Message-ID: <47ACC3E2.1030306@pobox.com>

Martin Chapman wrote:
> Frank,
> 
>  
> 
> I see a lot of thread synchronization code in 1.5.0 but not everywhere.  
> Does this mean that some of GDAL is currently thread safe and other 
> parts are not, or is the whole library considered safe at this point?  
> Is there any public documentation on this new behavior?

Martin,

The response in the FAQ:

   http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous

is still essentially accurate.  We can safely read via multiple threads
from some drivers.  Writing is not thread safe.  Many drivers have not
been reviewed and are at users-own-risk.

But I think things have improved since 1.3.0 in that some thread
related bugs have been fixed and there are more safe drivers.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mchapman at texelinc.com  Fri Feb  8 16:06:47 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Fri Feb  8 16:06:54 2008
Subject: [gdal-dev] RE: Thread Synchronization in 1.5.0?
In-Reply-To: <47ACC3E2.1030306@pobox.com>
References: <002801c86a8b$bbe38e30$33aaaa90$@com> <47ACC3E2.1030306@pobox.com>
Message-ID: <004301c86a96$84d29110$8e77b330$@com>

Thanks for the information Frank.

Best regards,
Martin Chapman


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Friday, February 08, 2008 2:05 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: Thread Synchronization in 1.5.0?

Martin Chapman wrote:
> Frank,
> 
>  
> 
> I see a lot of thread synchronization code in 1.5.0 but not everywhere.  
> Does this mean that some of GDAL is currently thread safe and other 
> parts are not, or is the whole library considered safe at this point?  
> Is there any public documentation on this new behavior?

Martin,

The response in the FAQ:

   http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous

is still essentially accurate.  We can safely read via multiple threads
from some drivers.  Writing is not thread safe.  Many drivers have not
been reviewed and are at users-own-risk.

But I think things have improved since 1.3.0 in that some thread
related bugs have been fixed and there are more safe drivers.

Best regards,

-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mchapman at texelinc.com  Fri Feb  8 16:12:17 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Fri Feb  8 16:12:24 2008
Subject: [gdal-dev] RE: Thread Synchronization in 1.5.0?
In-Reply-To: <47ACC3E2.1030306@pobox.com>
References: <002801c86a8b$bbe38e30$33aaaa90$@com> <47ACC3E2.1030306@pobox.com>
Message-ID: <004401c86a97$49870310$dc950930$@com>

Frank,

Just as an FYI, I noticed that the Win32 function CreateThread() is used on
line 610 of file C:\software\GDAL\port\cpl_multiproc.cpp.  This function may
not be the best for creating a thread on windows.  _beginthreadex() is the
preferred way to invoke threads in C on windows because it copies all global
variables in the Win32 API into the thread local storage for each thread
making the Win32 API usage thread safe, where the older C style
CreateThread() function does not. This may or may not be an issue for gdal
depending on what other Win32 API calls are made from within gdal on
windows.  

Please advise me if anyone thinks this is incorrect.

Best regards,
Martin Chapman


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Friday, February 08, 2008 2:05 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: Thread Synchronization in 1.5.0?

Martin Chapman wrote:
> Frank,
> 
>  
> 
> I see a lot of thread synchronization code in 1.5.0 but not everywhere.  
> Does this mean that some of GDAL is currently thread safe and other 
> parts are not, or is the whole library considered safe at this point?  
> Is there any public documentation on this new behavior?

Martin,

The response in the FAQ:

   http://trac.osgeo.org/gdal/wiki/FAQMiscellaneous

is still essentially accurate.  We can safely read via multiple threads
from some drivers.  Writing is not thread safe.  Many drivers have not
been reviewed and are at users-own-risk.

But I think things have improved since 1.3.0 in that some thread
related bugs have been fixed and there are more safe drivers.

Best regards,

-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Feb  8 16:28:11 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  8 16:28:56 2008
Subject: [gdal-dev] Re: Thread Synchronization in 1.5.0?
In-Reply-To: <004401c86a97$49870310$dc950930$@com>
References: <002801c86a8b$bbe38e30$33aaaa90$@com> <47ACC3E2.1030306@pobox.com>
	<004401c86a97$49870310$dc950930$@com>
Message-ID: <47ACC96B.3090107@pobox.com>

Martin Chapman wrote:
> Frank,
> 
> Just as an FYI, I noticed that the Win32 function CreateThread() is used on
> line 610 of file C:\software\GDAL\port\cpl_multiproc.cpp.  This function may
> not be the best for creating a thread on windows.  _beginthreadex() is the
> preferred way to invoke threads in C on windows because it copies all global
> variables in the Win32 API into the thread local storage for each thread
> making the Win32 API usage thread safe, where the older C style
> CreateThread() function does not. This may or may not be an issue for gdal
> depending on what other Win32 API calls are made from within gdal on
> windows.  
> 
> Please advise me if anyone thinks this is incorrect.

Martin,

Currently the only place we use CreateThread ourselves is in gdalwarp
when trying to use a second thread to do io while the main thread
does resampling.  So I doubt there is much practical significance
for now.

But, yes, I can see that this might be valuable if the function is
used by anyone else higher up the stack.

Is this a distinct approach to use /MT which I gathered provided for a
thread-safe C runtime?  GDAL doesn't really use very many direct win32
calls, and I'm not aware of it using any win32 globals that aren't
part of the C runtime (like errno).

Can you think of any downside to using _beginthreadex()?  Perhaps
you could file a ticket with this suggestion or even just go ahead
and change it yourself in trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From chowell at pyxisinnovation.com  Fri Feb  8 17:45:47 2008
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Fri Feb  8 17:45:49 2008
Subject: [gdal-dev] Geocode Raw Tiff
Message-ID: <47ACDB9B.7030500@pyxisinnovation.com>

Hi All,

I have a raw tiff file that was generated out of a PDF map, what I want 
to do is provide some geo-coding to this tiff file to turn it into a 
geotiff file. I figure I can use geotifcp.exe with the appropriate world 
file, having set the parameters I want it to be geolocated with in the 
world file. However I was wondering if any of the other tools in FWTools 
would be an appropriate mix. I looked up just about all the gdal 
specific tools before sending this message and was still left with the 
idea that geotifcp is my best bet. Therefore if there is a better tool 
could you please provide me either an example of how to use it or a link 
to the documentation on the web of how to use it.

Cheers
Chris Howell
Software Engineer
the PYXIS innovation - /Common Ground for Digital Earth/
w: www.pyxisinnovation.com
p: 613-389-6619

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080208/dc5e0c32/attachment.html
From wollez at gmx.net  Fri Feb  8 18:55:04 2008
From: wollez at gmx.net (WolfgangZ)
Date: Fri Feb  8 18:55:17 2008
Subject: [gdal-dev] Re: Geocode Raw Tiff
In-Reply-To: <47ACDB9B.7030500@pyxisinnovation.com>
References: <47ACDB9B.7030500@pyxisinnovation.com>
Message-ID: <foiq4p$q7p$1@ger.gmane.org>

Chris Howell schrieb:
> Hi All,
> 
> I have a raw tiff file that was generated out of a PDF map, what I want 
> to do is provide some geo-coding to this tiff file to turn it into a 
> geotiff file. I figure I can use geotifcp.exe with the appropriate world 
> file, having set the parameters I want it to be geolocated with in the 
> world file. However I was wondering if any of the other tools in FWTools 
> would be an appropriate mix. I looked up just about all the gdal 
> specific tools before sending this message and was still left with the 
> idea that geotifcp is my best bet. Therefore if there is a better tool 
> could you please provide me either an example of how to use it or a link 
> to the documentation on the web of how to use it.
> 
> Cheers
> Chris Howell
> Software Engineer
> the PYXIS innovation - /Common Ground for Digital Earth/
> w: www.pyxisinnovation.com
> p: 613-389-6619
> 
> 

Hi Chris,
when I understand your problem correctly and you have already your world 
file than you simply can use gdal_translate. Here you need to specify 
-a_srs (for example -a_srs EPSG:4326 for WGS84 lat/long).

See help page for gdal_translate:
http://www.gdal.org/gdal_translate.html

Regards
Wolfgang

From lran at unc.edu  Fri Feb  8 19:35:32 2008
From: lran at unc.edu (Limei Ran)
Date: Fri Feb  8 19:35:35 2008
Subject: [gdal-dev] Help on creating polygon shapefile
Message-ID: <20080208193532.s141tmmvc44coccc@webmail7.isis.unc.edu>


Hi:

I am new in using OGR.  I tried to create a polygon shapefile using the 
following codes:

===============
.......
OGRPolygon *poG = new OGRPolygon();
        printf ("Declared OGRPolygon.\n");

        char mesg[256];
        unsigned char *geom;
        sprintf(mesg, 
"POLYGON(%f,%f,%f,%f,%f,%f,%f,%f,%f,%f)\0",x1,y1,x2,y2,x3,y3,x4,y4,x1,y1);
        geom = (unsigned char *) mesg;
        printf("POLYGON: %s\n",geom);

        printf ("Import Wkb.\n");

        if ( poG->importFromWkb(geom,0) != OGRERR_NONE )
        {
           printf( "Importing a Wkb polygon failed.\n" );
           exit( 1 );
        }
.......
==============

But,  poG->importFromWkb failed.  Could you tell me what is wrong with 
the codes?  Is Wkb POLYGON wrong?  I tried to find some sample codes 
and could not find them?  Should I use OGRPolygon::addRingDirectly 
function instead?

Thanks,

Limei



From warmerdam at pobox.com  Fri Feb  8 21:06:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  8 21:07:12 2008
Subject: [gdal-dev] Help on creating polygon shapefile
In-Reply-To: <20080208193532.s141tmmvc44coccc@webmail7.isis.unc.edu>
References: <20080208193532.s141tmmvc44coccc@webmail7.isis.unc.edu>
Message-ID: <47AD0AB4.6090704@pobox.com>

Limei Ran wrote:
> 
> Hi:
> 
> I am new in using OGR.  I tried to create a polygon shapefile using the 
> following codes:
> 
> ===============
> .......
> OGRPolygon *poG = new OGRPolygon();
>        printf ("Declared OGRPolygon.\n");
> 
>        char mesg[256];
>        unsigned char *geom;
>        sprintf(mesg, 
> "POLYGON(%f,%f,%f,%f,%f,%f,%f,%f,%f,%f)\0",x1,y1,x2,y2,x3,y3,x4,y4,x1,y1);
>        geom = (unsigned char *) mesg;
>        printf("POLYGON: %s\n",geom);
> 
>        printf ("Import Wkb.\n");
> 
>        if ( poG->importFromWkb(geom,0) != OGRERR_NONE )
>        {
>           printf( "Importing a Wkb polygon failed.\n" );
>           exit( 1 );
>        }

Limei,

Two major problems.

1) You are assembling WKT format geometry, but using importFromWkb().
Instead you need to use importFromWkt().

2) The format of the WKT is wrong.  This is an example WKT polygon
with one ring.  Note the two layers of brackets and that the x and
y values are separated by a space, while there is only a comma
between point pairs.  Its programming - details matter!

POLYGON ((479750.6875 4764702.0,479658.59375 4764670.0,479640.09375 
4764721.0,479735.90625 4764752.0,479750.6875 4764702.0))

Incidentally, assembling the polygon without going through WKT would
be more efficient.  This is a reasonably clear example of creating
a polygon for a rectangle:

void OGRLayer::SetSpatialFilterRect( double dfMinX, double dfMinY,
                                      double dfMaxX, double dfMaxY )

{
     OGRLinearRing  oRing;
     OGRPolygon oPoly;

     oRing.addPoint( dfMinX, dfMinY );
     oRing.addPoint( dfMinX, dfMaxY );
     oRing.addPoint( dfMaxX, dfMaxY );
     oRing.addPoint( dfMaxX, dfMinY );
     oRing.addPoint( dfMinX, dfMinY );

     oPoly.addRing( &oRing );

     SetSpatialFilter( &oPoly );
}

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From chowell at pyxisinnovation.com  Fri Feb  8 23:37:23 2008
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Fri Feb  8 23:38:31 2008
Subject: [gdal-dev] Convert E00 into Shape
Message-ID: <8B5901C2B9E9094AA4028CF5E33980D702AEE8@aristotle.PyxisInnovation.local>

Please excuse this question if it has already been answered in some way shape or form. I had difficulty finding an good answer to it on the web little alone on the GDAL site. What is the best way to convert from an E00 into a shp format. Most of what I've read suggests I need to use an avenue script however I was wondering if there was an easier way via something provided in FWTools or anything like that. Any light you anyone could shed on this issue would be must appreciated. 

Cheers
Chris Howell 
Software Engineer
the PYXIS innovation - Common Ground for Digital Earth
w. www.pyxisinnovation.com
p. 613-389-6619

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080208/75bcf1be/attachment.html
From warmerdam at pobox.com  Fri Feb  8 23:50:33 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb  8 23:50:55 2008
Subject: [gdal-dev] Convert E00 into Shape
In-Reply-To: <8B5901C2B9E9094AA4028CF5E33980D702AEE8@aristotle.PyxisInnovation.local>
References: <8B5901C2B9E9094AA4028CF5E33980D702AEE8@aristotle.PyxisInnovation.local>
Message-ID: <47AD3119.6030505@pobox.com>

Chris Howell wrote:
> Please excuse this question if it has already been answered in some way 
> shape or form. I had difficulty finding an good answer to it on the web 
> little alone on the GDAL site. What is the best way to convert from an 
> E00 into a shp format. Most of what I've read suggests I need to use an 
> avenue script however I was wondering if there was an easier way via 
> something provided in FWTools or anything like that. Any light you 
> anyone could shed on this issue would be must appreciated.

Chris,

In theory you can do it with ogr2ogr.  But there have been some problems
observed with reassembly of polygon geometry from E00 files with E00 so
you would want to check carefully if things seem to be working properly.

E00 is a topological format, but OGR assembles the polygon geometries
on the fly from lines to give a "whole polygon" view.  Topological
relationships between features should be preserved as attributes referencing
the FIDs if that is important to you, though these relationships will be
mostly lost in a transfer to Shapefile which does not support the "integer
list" attributes required to keep some of them.

If ogr2ogr fails, you can use the avcimport.exe program
(http://avce00.maptools.org) to convert e00 to a binary arc/info coverage
which ogr can read without polygon assembly problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From stpoppy at ptd.net  Sat Feb  9 07:15:32 2008
From: stpoppy at ptd.net (cartrite)
Date: Sat Feb  9 07:15:28 2008
Subject: [gdal-dev] BigTiff
Message-ID: <1202559332.5199.15.camel@linux-o863.site>

Hi,
Thought I'd send a positive email.
I tried to add BigTiff support buy building tiff-4.0.0alpha and
libgeotiff-1.2.4. Then I built gdal with the svn last Thursday.
Everything looked like it worked out well. I was able to initilize a
92160x46080 8it file with gdal_tranlate. I also used gdalwarp to mosaic
2 46080x46080 geotiffs into the the 92160x46080 file. It was exactly 4
gb. I was not able to do this with gdal using the internal libtiff. Are
there any tests you would like me to do?
Steve


From mattia.parigiani at gmail.com  Sat Feb  9 11:32:11 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Sat Feb  9 11:32:15 2008
Subject: [gdal-dev] gdal_translate on HDF data through absolute paths?!?!?!?
Message-ID: <6b6f1c810802090832w799d255kcbb224a6199b503f@mail.gmail.com>

I would like to know if it is possible to call gdal_translate on an HDF 4
SUBDATASET specified with an absolute path..

At the moment I do something like:

*gdal_translate -of GTiff -b 1 -b 2 -b 3 -co "PHOTOMETRIC=RGB"
HDF4_SDS:UNKNOWN:"AMOD021KM20070202.hdf":0 out.tif*

This is called from the working directory (.), where the HDF file lies..

What if I want to call the gdal_translate utility from somewhere else in the
file system?? ie: specify the dataset through absolute path??



Other thing is that I am trying to do this because I will eventually want to
call GDAL utilities from within CGI scripts running in a Apache HTTPD
server... I am though still not sure if this is doable and how to link the
wanted libraries so that they can be seen by CGI scripts..
Dos anyone have any experience/suggestions about this ??

Thanks in advance to all

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080209/ae3fc1f0/attachment.html
From mattia.parigiani at gmail.com  Sat Feb  9 11:33:52 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Sat Feb  9 11:33:55 2008
Subject: [gdal-dev] gdal_translate on HDF data through absolute paths?!?!?!?
Message-ID: <6b6f1c810802090833x2afd6d2fg1d491eb2c7ebdba2@mail.gmail.com>

I would like to know if it is possible to call gdal_translate on an HDF 4
SUBDATASET specified with an absolute path..

At the moment I do something like:

*gdal_translate -of GTiff -b 1 -b 2 -b 3 -co "PHOTOMETRIC=RGB"
HDF4_SDS:UNKNOWN:"AMOD021KM20070202.hdf":0 out.tif*

This is called from the working directory (.), where the HDF file lies..

What if I want to call the gdal_translate utility from somewhere else in the
file system?? ie: specify the dataset through absolute path??



Other thing is that I am trying to do this because I will eventually want to
call GDAL utilities from within CGI scripts running in a Apache HTTPD
server... I am though still not sure if this is doable and how to link the
wanted libraries so that they can be seen by CGI scripts..
Dos anyone have any experience/suggestions about this ??

Thanks in advance to all


-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080209/9dc886d0/attachment.html
From tfagin at coordinatesolutions.com  Sat Feb  9 12:04:46 2008
From: tfagin at coordinatesolutions.com (Todd Fagin)
Date: Sat Feb  9 12:04:50 2008
Subject: [gdal-dev] RE: gdal-dev Digest, Vol 45, Issue 16
In-Reply-To: <20080209170006.0C2F012A8093@lists.osgeo.org>
Message-ID: <002f01c86b3d$dfd1e0f0$6601a8c0@TFD620>

that's what you get for waiting.

Todd Fagin
 
Coordinate Solutions, Inc.
501 N.E. 15th St.
Oklahoma City, OK 73104
405.740.4324 (voice)
904.471.5548 (fax)
www.coordinatesolutions.com
 
 

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of
gdal-dev-request@lists.osgeo.org
Sent: Saturday, February 09, 2008 11:00 AM
To: gdal-dev@lists.osgeo.org
Subject: gdal-dev Digest, Vol 45, Issue 16

Send gdal-dev mailing list submissions to
	gdal-dev@lists.osgeo.org

To subscribe or unsubscribe via the World Wide Web, visit
	http://lists.osgeo.org/mailman/listinfo/gdal-dev
or, via email, send a message with subject or body 'help' to
	gdal-dev-request@lists.osgeo.org

You can reach the person managing the list at
	gdal-dev-owner@lists.osgeo.org

When replying, please edit your Subject line so it is more specific
than "Re: Contents of gdal-dev digest..."


Today's Topics:

   1. Re: Help on creating polygon shapefile (Frank Warmerdam)
   2. Convert E00 into Shape (Chris Howell)
   3. Re: Convert E00 into Shape (Frank Warmerdam)
   4. BigTiff (cartrite)
   5. gdal_translate on HDF data through absolute paths?!?!?!? (mattia)
   6. gdal_translate on HDF data through absolute paths?!?!?!? (mattia)


----------------------------------------------------------------------

Message: 1
Date: Fri, 08 Feb 2008 21:06:44 -0500
From: Frank Warmerdam <warmerdam@pobox.com>
Subject: Re: [gdal-dev] Help on creating polygon shapefile
To: Limei Ran <lran@unc.edu>
Cc: gdal-dev@lists.osgeo.org
Message-ID: <47AD0AB4.6090704@pobox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Limei Ran wrote:
> 
> Hi:
> 
> I am new in using OGR.  I tried to create a polygon shapefile using the 
> following codes:
> 
> ===============
> .......
> OGRPolygon *poG = new OGRPolygon();
>        printf ("Declared OGRPolygon.\n");
> 
>        char mesg[256];
>        unsigned char *geom;
>        sprintf(mesg, 
> "POLYGON(%f,%f,%f,%f,%f,%f,%f,%f,%f,%f)\0",x1,y1,x2,y2,x3,y3,x4,y4,x1,y1);
>        geom = (unsigned char *) mesg;
>        printf("POLYGON: %s\n",geom);
> 
>        printf ("Import Wkb.\n");
> 
>        if ( poG->importFromWkb(geom,0) != OGRERR_NONE )
>        {
>           printf( "Importing a Wkb polygon failed.\n" );
>           exit( 1 );
>        }

Limei,

Two major problems.

1) You are assembling WKT format geometry, but using importFromWkb().
Instead you need to use importFromWkt().

2) The format of the WKT is wrong.  This is an example WKT polygon
with one ring.  Note the two layers of brackets and that the x and
y values are separated by a space, while there is only a comma
between point pairs.  Its programming - details matter!

POLYGON ((479750.6875 4764702.0,479658.59375 4764670.0,479640.09375 
4764721.0,479735.90625 4764752.0,479750.6875 4764702.0))

Incidentally, assembling the polygon without going through WKT would
be more efficient.  This is a reasonably clear example of creating
a polygon for a rectangle:

void OGRLayer::SetSpatialFilterRect( double dfMinX, double dfMinY,
                                      double dfMaxX, double dfMaxY )

{
     OGRLinearRing  oRing;
     OGRPolygon oPoly;

     oRing.addPoint( dfMinX, dfMinY );
     oRing.addPoint( dfMinX, dfMaxY );
     oRing.addPoint( dfMaxX, dfMaxY );
     oRing.addPoint( dfMaxX, dfMinY );
     oRing.addPoint( dfMinX, dfMinY );

     oPoly.addRing( &oRing );

     SetSpatialFilter( &oPoly );
}

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



------------------------------

Message: 2
Date: Fri, 8 Feb 2008 23:37:23 -0500
From: "Chris Howell" <chowell@pyxisinnovation.com>
Subject: [gdal-dev] Convert E00 into Shape
To: <gdal-dev@lists.osgeo.org>
Message-ID:
	
<8B5901C2B9E9094AA4028CF5E33980D702AEE8@aristotle.PyxisInnovation.local>
	
Content-Type: text/plain; charset="iso-8859-1"

Please excuse this question if it has already been answered in some way
shape or form. I had difficulty finding an good answer to it on the web
little alone on the GDAL site. What is the best way to convert from an E00
into a shp format. Most of what I've read suggests I need to use an avenue
script however I was wondering if there was an easier way via something
provided in FWTools or anything like that. Any light you anyone could shed
on this issue would be must appreciated. 

Cheers
Chris Howell 
Software Engineer
the PYXIS innovation - Common Ground for Digital Earth
w. www.pyxisinnovation.com
p. 613-389-6619

-------------- next part --------------
An HTML attachment was scrubbed...
URL:
http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080208/75bcf1be/atta
chment-0001.html

------------------------------

Message: 3
Date: Fri, 08 Feb 2008 23:50:33 -0500
From: Frank Warmerdam <warmerdam@pobox.com>
Subject: Re: [gdal-dev] Convert E00 into Shape
To: Chris Howell <chowell@pyxisinnovation.com>
Cc: gdal-dev@lists.osgeo.org
Message-ID: <47AD3119.6030505@pobox.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed

Chris Howell wrote:
> Please excuse this question if it has already been answered in some way 
> shape or form. I had difficulty finding an good answer to it on the web 
> little alone on the GDAL site. What is the best way to convert from an 
> E00 into a shp format. Most of what I've read suggests I need to use an 
> avenue script however I was wondering if there was an easier way via 
> something provided in FWTools or anything like that. Any light you 
> anyone could shed on this issue would be must appreciated.

Chris,

In theory you can do it with ogr2ogr.  But there have been some problems
observed with reassembly of polygon geometry from E00 files with E00 so
you would want to check carefully if things seem to be working properly.

E00 is a topological format, but OGR assembles the polygon geometries
on the fly from lines to give a "whole polygon" view.  Topological
relationships between features should be preserved as attributes referencing
the FIDs if that is important to you, though these relationships will be
mostly lost in a transfer to Shapefile which does not support the "integer
list" attributes required to keep some of them.

If ogr2ogr fails, you can use the avcimport.exe program
(http://avce00.maptools.org) to convert e00 to a binary arc/info coverage
which ogr can read without polygon assembly problems.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



------------------------------

Message: 4
Date: Sat, 09 Feb 2008 07:15:32 -0500
From: cartrite <stpoppy@ptd.net>
Subject: [gdal-dev] BigTiff
To: gdal-dev@lists.osgeo.org
Message-ID: <1202559332.5199.15.camel@linux-o863.site>
Content-Type: text/plain

Hi,
Thought I'd send a positive email.
I tried to add BigTiff support buy building tiff-4.0.0alpha and
libgeotiff-1.2.4. Then I built gdal with the svn last Thursday.
Everything looked like it worked out well. I was able to initilize a
92160x46080 8it file with gdal_tranlate. I also used gdalwarp to mosaic
2 46080x46080 geotiffs into the the 92160x46080 file. It was exactly 4
gb. I was not able to do this with gdal using the internal libtiff. Are
there any tests you would like me to do?
Steve




------------------------------

Message: 5
Date: Sat, 9 Feb 2008 14:32:11 -0200
From: mattia <mattia.parigiani@gmail.com>
Subject: [gdal-dev] gdal_translate on HDF data through absolute
	paths?!?!?!?
To: gdal-dev@lists.osgeo.org
Message-ID:
	<6b6f1c810802090832w799d255kcbb224a6199b503f@mail.gmail.com>
Content-Type: text/plain; charset="iso-8859-1"

I would like to know if it is possible to call gdal_translate on an HDF 4
SUBDATASET specified with an absolute path..

At the moment I do something like:

*gdal_translate -of GTiff -b 1 -b 2 -b 3 -co "PHOTOMETRIC=RGB"
HDF4_SDS:UNKNOWN:"AMOD021KM20070202.hdf":0 out.tif*

This is called from the working directory (.), where the HDF file lies..

What if I want to call the gdal_translate utility from somewhere else in the
file system?? ie: specify the dataset through absolute path??



Other thing is that I am trying to do this because I will eventually want to
call GDAL utilities from within CGI scripts running in a Apache HTTPD
server... I am though still not sure if this is doable and how to link the
wanted libraries so that they can be seen by CGI scripts..
Dos anyone have any experience/suggestions about this ??

Thanks in advance to all

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL:
http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080209/ae3fc1f0/atta
chment-0001.html

------------------------------

Message: 6
Date: Sat, 9 Feb 2008 14:33:52 -0200
From: mattia <mattia.parigiani@gmail.com>
Subject: [gdal-dev] gdal_translate on HDF data through absolute
	paths?!?!?!?
To: gdal-dev <gdal-dev@lists.maptools.org>, gdal-dev@lists.osgeo.org
Message-ID:
	<6b6f1c810802090833x2afd6d2fg1d491eb2c7ebdba2@mail.gmail.com>
Content-Type: text/plain; charset="iso-8859-1"

I would like to know if it is possible to call gdal_translate on an HDF 4
SUBDATASET specified with an absolute path..

At the moment I do something like:

*gdal_translate -of GTiff -b 1 -b 2 -b 3 -co "PHOTOMETRIC=RGB"
HDF4_SDS:UNKNOWN:"AMOD021KM20070202.hdf":0 out.tif*

This is called from the working directory (.), where the HDF file lies..

What if I want to call the gdal_translate utility from somewhere else in the
file system?? ie: specify the dataset through absolute path??



Other thing is that I am trying to do this because I will eventually want to
call GDAL utilities from within CGI scripts running in a Apache HTTPD
server... I am though still not sure if this is doable and how to link the
wanted libraries so that they can be seen by CGI scripts..
Dos anyone have any experience/suggestions about this ??

Thanks in advance to all


-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL:
http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080209/9dc886d0/atta
chment-0001.html

------------------------------

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

End of gdal-dev Digest, Vol 45, Issue 16
****************************************

From chowell at pyxisinnovation.com  Sat Feb  9 14:32:55 2008
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Sat Feb  9 14:33:00 2008
Subject: [gdal-dev] Convert E00 into Shape
Message-ID: <8B5901C2B9E9094AA4028CF5E33980D702AEE9@aristotle.PyxisInnovation.local>

Ok I am still struggling with the converting of E00 files into shape files. I used avcimport to convert the E00 file into a binary coverage. Now I am trying to use OGR to convert the binary coverage into a shape file. My command looks like. 

ogr2ogr.exe -s_srs EPSG:4326 -f "ESRI Shapefile" .\pop .\data\Cov 

When I run this command I get the following error message. 

ERROR 4 unable to open EPSG support file in gcs.csv
Try setting the GDAL_DATA environment variable to point to the directory containing EPSG csv files - Which I have. 

Cheers
Chris 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080209/3bd5b6de/attachment.html
From john.tull at wildnevada.org  Sat Feb  9 17:31:57 2008
From: john.tull at wildnevada.org (John C. Tull)
Date: Sat Feb  9 17:32:02 2008
Subject: [gdal-dev] OGR shapefile problems
Message-ID: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>

Hello All,

I am running into problems with a shapefile using GDAL 1.5 binaries  
compiled by William Kyngesburye for OS X Leopard. We are trying to see  
if the problem is a GDAL 1.5 issue, or if it is something OS X related.

The file reads properly using pre 1.5 GDAL binaries on OS X and  
Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used  
'ogrinfo -al' on the file.

If anyone cares to take a look, I have placed the problem file online.  
You can download the landowner shapefile from http://homepage.mac.com/jctull/

Thank you,
John Tull
From even.rouault at mines-paris.org  Sat Feb  9 18:05:11 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb  9 18:05:15 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
Message-ID: <200802100005.11813.even.rouault@mines-paris.org>

I could reproduce a problem with your file on GDAL trunk and branches/1.5. It 
is not MAC OS X specific.
The issue was the polygon feature whose FID = 22734, with nParts == 0.
Fixed in trunk in r13744 and in branches/1.5 in r13755

Best regards

Le Saturday 09 February 2008 23:31:57 John C. Tull, vous avez ?crit?:
> Hello All,
>
> I am running into problems with a shapefile using GDAL 1.5 binaries
> compiled by William Kyngesburye for OS X Leopard. We are trying to see
> if the problem is a GDAL 1.5 issue, or if it is something OS X related.
>
> The file reads properly using pre 1.5 GDAL binaries on OS X and
> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used
> 'ogrinfo -al' on the file.
>
> If anyone cares to take a look, I have placed the problem file online.
> You can download the landowner shapefile from
> http://homepage.mac.com/jctull/
>
> Thank you,
> John Tull_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From blake at hailmail.net  Sat Feb  9 18:10:48 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Sat Feb  9 18:10:55 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
Message-ID: <CD765893-6CF1-49C3-93CD-96B3605BADA8@hailmail.net>

Hi John.

I am running GDAL 1.5.0 built from source and from Kyngesburye. Both  
are able to "ogrinfo -al" both of the nv shapefiles you posted  
without a problem.

What errors are you getting?

I am still on OS X 10.4.11, having not dove into the leopard world  
yet. So, perhaps the problem is 10.5 specific.

cheers,

Dane


On Feb 9, 2008, at 2:31 PM, John C. Tull wrote:

> Hello All,
>
> I am running into problems with a shapefile using GDAL 1.5 binaries  
> compiled by William Kyngesburye for OS X Leopard. We are trying to  
> see if the problem is a GDAL 1.5 issue, or if it is something OS X  
> related.
>
> The file reads properly using pre 1.5 GDAL binaries on OS X and  
> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used  
> 'ogrinfo -al' on the file.
>
> If anyone cares to take a look, I have placed the problem file  
> online. You can download the landowner shapefile from http://homepage 
> .mac.com/jctull/
>
> Thank you,
> John Tull_______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From woklist at kyngchaos.com  Sat Feb  9 18:16:45 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Feb  9 18:16:50 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <CD765893-6CF1-49C3-93CD-96B3605BADA8@hailmail.net>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
	<CD765893-6CF1-49C3-93CD-96B3605BADA8@hailmail.net>
Message-ID: <331E43F3-7BA0-4BD5-9786-5F88EB505956@kyngchaos.com>

No, I tried it on my 10.4.11 Mini with the same crash.  Even Rouault  
mentioned a fix in SVN, so I'll look into applying that to my binaries.

On Feb 9, 2008, at 5:10 PM, Dane Springmeyer wrote:

> Hi John.
>
> I am running GDAL 1.5.0 built from source and from Kyngesburye. Both  
> are able to "ogrinfo -al" both of the nv shapefiles you posted  
> without a problem.
>
> What errors are you getting?
>
> I am still on OS X 10.4.11, having not dove into the leopard world  
> yet. So, perhaps the problem is 10.5 specific.
>
> cheers,
>
> Dane
>
>
> On Feb 9, 2008, at 2:31 PM, John C. Tull wrote:
>
>> Hello All,
>>
>> I am running into problems with a shapefile using GDAL 1.5 binaries  
>> compiled by William Kyngesburye for OS X Leopard. We are trying to  
>> see if the problem is a GDAL 1.5 issue, or if it is something OS X  
>> related.
>>
>> The file reads properly using pre 1.5 GDAL binaries on OS X and  
>> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used  
>> 'ogrinfo -al' on the file.
>>
>> If anyone cares to take a look, I have placed the problem file  
>> online. You can download the landowner shapefile from http://homepage.mac.com/jctull/
>>
>> Thank you,
>> John Tull_______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From blake at hailmail.net  Sat Feb  9 18:23:01 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Sat Feb  9 18:23:05 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <200802100005.11813.even.rouault@mines-paris.org>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
	<200802100005.11813.even.rouault@mines-paris.org>
Message-ID: <B689B01F-4967-46ED-81E4-7041FA25302B@hailmail.net>

Nice Even. I obviously didn't catch what was going wrong, figuring  
ogrinfo was throwing a visible error for John.

I reran both:
ogrinfo nv_firehist_2007.shp -al > fire.txt
and
ogrinfo NV_Landowner_200711.shp -al > land.txt

After inspecting the output it seems I get cleanly to:

OGRFeature(nv_firehist_2007):3743

and bail on:

OGRFeature(NV_Landowner_200711):22730
   NAME (String) = Bureau of La


Dane




On Feb 9, 2008, at 3:05 PM, Even Rouault wrote:

> I could reproduce a problem with your file on GDAL trunk and  
> branches/1.5. It
> is not MAC OS X specific.
> The issue was the polygon feature whose FID = 22734, with nParts == 0.
> Fixed in trunk in r13744 and in branches/1.5 in r13755
>
> Best regards
>
> Le Saturday 09 February 2008 23:31:57 John C. Tull, vous avez ?crit :
>> Hello All,
>>
>> I am running into problems with a shapefile using GDAL 1.5 binaries
>> compiled by William Kyngesburye for OS X Leopard. We are trying to  
>> see
>> if the problem is a GDAL 1.5 issue, or if it is something OS X  
>> related.
>>
>> The file reads properly using pre 1.5 GDAL binaries on OS X and
>> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used
>> 'ogrinfo -al' on the file.
>>
>> If anyone cares to take a look, I have placed the problem file  
>> online.
>> You can download the landowner shapefile from
>> http://homepage.mac.com/jctull/
>>
>> Thank you,
>> John Tull_______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From john.tull at wildnevada.org  Sat Feb  9 19:05:48 2008
From: john.tull at wildnevada.org (John C. Tull)
Date: Sat Feb  9 19:05:53 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <200802100005.11813.even.rouault@mines-paris.org>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
	<200802100005.11813.even.rouault@mines-paris.org>
Message-ID: <08707787-12DE-49D4-B83C-331CA4E98E1F@wildnevada.org>

Thank you Even and others for having a look, and for the quick fix.  
I'm glad to have helped uncover a small bug.

Cheers,
John

On Feb 9, 2008, at 3:05 PM, Even Rouault wrote:

> I could reproduce a problem with your file on GDAL trunk and  
> branches/1.5. It
> is not MAC OS X specific.
> The issue was the polygon feature whose FID = 22734, with nParts == 0.
> Fixed in trunk in r13744 and in branches/1.5 in r13755
>
> Best regards
>
> Le Saturday 09 February 2008 23:31:57 John C. Tull, vous avez ?crit :
>> Hello All,
>>
>> I am running into problems with a shapefile using GDAL 1.5 binaries
>> compiled by William Kyngesburye for OS X Leopard. We are trying to  
>> see
>> if the problem is a GDAL 1.5 issue, or if it is something OS X  
>> related.
>>
>> The file reads properly using pre 1.5 GDAL binaries on OS X and
>> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used
>> 'ogrinfo -al' on the file.
>>
>> If anyone cares to take a look, I have placed the problem file  
>> online.
>> You can download the landowner shapefile from
>> http://homepage.mac.com/jctull/
>>
>> Thank you,
>> John Tull_______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From blake at hailmail.net  Sat Feb  9 19:18:32 2008
From: blake at hailmail.net (Dane Springmeyer)
Date: Sat Feb  9 19:18:36 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <08707787-12DE-49D4-B83C-331CA4E98E1F@wildnevada.org>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
	<200802100005.11813.even.rouault@mines-paris.org>
	<08707787-12DE-49D4-B83C-331CA4E98E1F@wildnevada.org>
Message-ID: <AE5DFE3F-CBDC-4834-9F4E-4106367F9A82@hailmail.net>

Ya, thanks John.

I Just checked out and confirmed that EVEN's commit (obviously) fixed  
what you spotted.

Ogr built from svn co after 2:59 pm reads `NV_Landowner_200711.shp'  
all the way through to FID 22810.

dane



On Feb 9, 2008, at 4:05 PM, John C. Tull wrote:

> Thank you Even and others for having a look, and for the quick fix.  
> I'm glad to have helped uncover a small bug.
>
> Cheers,
> John
>
> On Feb 9, 2008, at 3:05 PM, Even Rouault wrote:
>
>> I could reproduce a problem with your file on GDAL trunk and  
>> branches/1.5. It
>> is not MAC OS X specific.
>> The issue was the polygon feature whose FID = 22734, with nParts  
>> == 0.
>> Fixed in trunk in r13744 and in branches/1.5 in r13755
>>
>> Best regards
>>
>> Le Saturday 09 February 2008 23:31:57 John C. Tull, vous avez ?crit :
>>> Hello All,
>>>
>>> I am running into problems with a shapefile using GDAL 1.5 binaries
>>> compiled by William Kyngesburye for OS X Leopard. We are trying  
>>> to see
>>> if the problem is a GDAL 1.5 issue, or if it is something OS X  
>>> related.
>>>
>>> The file reads properly using pre 1.5 GDAL binaries on OS X and
>>> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used
>>> 'ogrinfo -al' on the file.
>>>
>>> If anyone cares to take a look, I have placed the problem file  
>>> online.
>>> You can download the landowner shapefile from
>>> http://homepage.mac.com/jctull/
>>>
>>> Thank you,
>>> John Tull_______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From woklist at kyngchaos.com  Sat Feb  9 20:06:16 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Feb  9 20:06:22 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <AE5DFE3F-CBDC-4834-9F4E-4106367F9A82@hailmail.net>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
	<200802100005.11813.even.rouault@mines-paris.org>
	<08707787-12DE-49D4-B83C-331CA4E98E1F@wildnevada.org>
	<AE5DFE3F-CBDC-4834-9F4E-4106367F9A82@hailmail.net>
Message-ID: <46A71465-E8CC-403F-A445-8E6C86A84457@kyngchaos.com>

Yep, works for my framework on OSX.  Thanks Evan.

On Feb 9, 2008, at 6:18 PM, Dane Springmeyer wrote:

> Ya, thanks John.
>
> I Just checked out and confirmed that EVEN's commit (obviously)  
> fixed what you spotted.
>
> Ogr built from svn co after 2:59 pm reads `NV_Landowner_200711.shp'  
> all the way through to FID 22810.
>
> dane
>
>
>
> On Feb 9, 2008, at 4:05 PM, John C. Tull wrote:
>
>> Thank you Even and others for having a look, and for the quick fix.  
>> I'm glad to have helped uncover a small bug.
>>
>> Cheers,
>> John
>>
>> On Feb 9, 2008, at 3:05 PM, Even Rouault wrote:
>>
>>> I could reproduce a problem with your file on GDAL trunk and  
>>> branches/1.5. It
>>> is not MAC OS X specific.
>>> The issue was the polygon feature whose FID = 22734, with nParts  
>>> == 0.
>>> Fixed in trunk in r13744 and in branches/1.5 in r13755
>>>
>>> Best regards
>>>
>>> Le Saturday 09 February 2008 23:31:57 John C. Tull, vous avez  
>>> ?crit :
>>>> Hello All,
>>>>
>>>> I am running into problems with a shapefile using GDAL 1.5 binaries
>>>> compiled by William Kyngesburye for OS X Leopard. We are trying  
>>>> to see
>>>> if the problem is a GDAL 1.5 issue, or if it is something OS X  
>>>> related.
>>>>
>>>> The file reads properly using pre 1.5 GDAL binaries on OS X and
>>>> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used
>>>> 'ogrinfo -al' on the file.
>>>>
>>>> If anyone cares to take a look, I have placed the problem file  
>>>> online.
>>>> You can download the landowner shapefile from
>>>> http://homepage.mac.com/jctull/
>>>>
>>>> Thank you,
>>>> John Tull_______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Sat Feb  9 20:29:45 2008
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sat Feb  9 20:29:49 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <200802100005.11813.even.rouault@mines-paris.org>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
	<200802100005.11813.even.rouault@mines-paris.org>
Message-ID: <0EC68691-73CE-4089-979D-8EF548453A69@kyngchaos.com>

So, the patch works.  But I notice that you only patched the polygon  
case.  I think it's possible that any shape type can have null shape  
data.  I don't know if it's correct behavior for shapefiles, but I've  
seen ArcGIS export such shapefiles myself, and I think I've seen it  
happen with point shapefiles as well.

On Feb 9, 2008, at 5:05 PM, Even Rouault wrote:

> I could reproduce a problem with your file on GDAL trunk and  
> branches/1.5. It
> is not MAC OS X specific.
> The issue was the polygon feature whose FID = 22734, with nParts == 0.
> Fixed in trunk in r13744 and in branches/1.5 in r13755
>
> Best regards
>
> Le Saturday 09 February 2008 23:31:57 John C. Tull, vous avez ?crit :
>> Hello All,
>>
>> I am running into problems with a shapefile using GDAL 1.5 binaries
>> compiled by William Kyngesburye for OS X Leopard. We are trying to  
>> see
>> if the problem is a GDAL 1.5 issue, or if it is something OS X  
>> related.
>>
>> The file reads properly using pre 1.5 GDAL binaries on OS X and
>> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used
>> 'ogrinfo -al' on the file.
>>
>> If anyone cares to take a look, I have placed the problem file  
>> online.
>> You can download the landowner shapefile from
>> http://homepage.mac.com/jctull/
>>
>> Thank you,
>> John Tull_______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From mchapman at texelinc.com  Sat Feb  9 22:52:00 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Sat Feb  9 22:52:04 2008
Subject: [gdal-dev] HFA RRD bug
Message-ID: <000f01c86b98$4aa8b2f0$dffa18d0$@com>

In the file c:\software\gdal\gcore\gdaldefaultoverviews.cpp in the function
GDALDefaultBuildOverviews::BuildOverviews() on line 517 when I try to build
overviews for an erdas imagine file .img and using USE_RRD=YES config option
the 

 

poOverDS = poBand->GetDataset(); 

 

call always returns NULL and then there is no check for NULL after that on
line 519 which causes the application to seg fault.  

 

poOverDS->oOvManager.poBaseDS = poDS; // KABOOM!!! because poOverDS is NULL.

 

Is this a bug?  Where should the dataset of the band be assigned during the
overview creation process?

 

Best regards,

 

Martin Chapman

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080209/15157076/attachment.html
From even.rouault at mines-paris.org  Sun Feb 10 05:46:19 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 10 05:46:24 2008
Subject: [gdal-dev] HFA RRD bug
In-Reply-To: <000f01c86b98$4aa8b2f0$dffa18d0$@com>
References: <000f01c86b98$4aa8b2f0$dffa18d0$@com>
Message-ID: <200802101146.20613.even.rouault@mines-paris.org>

Martin,

Yes, it's a known bug of GDAL 1.5.0. See ticket 
http://trac.osgeo.org/gdal/ticket/2145.

I've submitted a patch that checks for the NULL pointer and it seems to fix 
the problem. I'm not sure this is the correct fix however, but hopefully, an 
appropriate fix should go to GDAL 1.5.1.

Best regards

Le Sunday 10 February 2008 04:52:00 Martin Chapman, vous avez ?crit?:
> call always returns NULL and then there is no check for NULL after that on
> line 519 which causes the application to seg fault. ?


From even.rouault at mines-paris.org  Sun Feb 10 06:05:43 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Feb 10 06:05:47 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <0EC68691-73CE-4089-979D-8EF548453A69@kyngchaos.com>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
	<200802100005.11813.even.rouault@mines-paris.org>
	<0EC68691-73CE-4089-979D-8EF548453A69@kyngchaos.com>
Message-ID: <200802101205.43976.even.rouault@mines-paris.org>

Since yesterday, I've modified a bit the way I've fixed the nParts == 0 
polygon case to return an empty OGRMultiPolygon instead of a NULL pointer 
(some OGR drivers don't handle very gracefully NULL geometries in creation 
mode). So, this is now back to the behaviour of GDAL 1.4 and previous 
releases.
I've reviewed the code for other shape types and it should be fine for points, 
multipoints and arcs.

Best regards.

Le Sunday 10 February 2008 02:29:45 William Kyngesburye, vous avez ?crit?:
> So, the patch works.  But I notice that you only patched the polygon
> case.  I think it's possible that any shape type can have null shape
> data.  I don't know if it's correct behavior for shapefiles, but I've
> seen ArcGIS export such shapefiles myself, and I think I've seen it
> happen with point shapefiles as well.
>
> On Feb 9, 2008, at 5:05 PM, Even Rouault wrote:
> > I could reproduce a problem with your file on GDAL trunk and
> > branches/1.5. It
> > is not MAC OS X specific.
> > The issue was the polygon feature whose FID = 22734, with nParts == 0.
> > Fixed in trunk in r13744 and in branches/1.5 in r13755
> >
> > Best regards
> >
> > Le Saturday 09 February 2008 23:31:57 John C. Tull, vous avez ?crit :
> >> Hello All,
> >>
> >> I am running into problems with a shapefile using GDAL 1.5 binaries
> >> compiled by William Kyngesburye for OS X Leopard. We are trying to
> >> see
> >> if the problem is a GDAL 1.5 issue, or if it is something OS X
> >> related.
> >>
> >> The file reads properly using pre 1.5 GDAL binaries on OS X and
> >> Ubuntu. I did not have a 1.5 binary on my Ubuntu vm to test. I used
> >> 'ogrinfo -al' on the file.
> >>
> >> If anyone cares to take a look, I have placed the problem file
> >> online.
> >> You can download the landowner shapefile from
> >> http://homepage.mac.com/jctull/
> >>
> >> Thank you,
> >> John Tull_______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> Earth: "Mostly harmless"
>
> - revised entry in the HitchHiker's Guide to the Galaxy


From yann.chemin at gmail.com  Sun Feb 10 07:15:13 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Sun Feb 10 07:15:16 2008
Subject: [gdal-dev] getFileList() in python-GDAL 1.5.0 and TRMM 2B32 hdf
Message-ID: <4f37eb890802100415v18932077s332497a004da663b@mail.gmail.com>

Hello,

I am looking for getFileList() in python-gdal 1.5.0 in order to
extract subdatasets from TRMM2B32 hdf datasets.

Anybody knows where it is?
thank you
Yann
From sfkeller at gmail.com  Sun Feb 10 08:54:14 2008
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun Feb 10 08:54:15 2008
Subject: [gdal-dev] world file to world file
In-Reply-To: <c27147560802080605l5c7f67efrd900f1e4e0e8b1b8@mail.gmail.com>
References: <c27147560802080239j1178faaft4bf5f46aadfc59f1@mail.gmail.com>
	<47AC5F35.6070905@pobox.com>
	<c27147560802080605l5c7f67efrd900f1e4e0e8b1b8@mail.gmail.com>
Message-ID: <25bc040b0802100554m1a538f6dt4ba3c351e8cd64ac@mail.gmail.com>

That worldfile-to-worldfile tool would be useful to me too.

Then I got another use case: Google Earth (GE) allows to georeference raster
images as GroundOverlays for free. GE exports the 'metadata' as KML. What
about a converter that takes this KML (or it's parameters from command line)
and generates a world file according to -t_srs option?

Here's such a GroundOverlay-KML (LatLonBox and AFAIK viewBoundScale are
required as input):

<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns=http://earth.google.com/kml/2.2>
<GroundOverlay>
 <name>My Rater Map</name>
 <LookAt>
  ...
 </LookAt>
 <color>9effffff</color>
 <Icon>
  <href>http://localhost/mymap.gif</href>
  <viewBoundScale>0.75</viewBoundScale>
 </Icon>
 <LatLonBox>
  <north>47.23523669475633</north>
  <south>47.21775676333381</south>
  <east>8.832387284904627</east>
  <west>8.810965407549148</west>
 </LatLonBox>
</GroundOverlay>
</kml>


2008/2/8, Michele Zanin <miczanin@gmail.com>:
>
> Frank,
>
> On Feb 8, 2008 2:55 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> > I'm guessing that "another.tfw" represents the *approximate* world file
> > for the original file, but interpreted in EPSG:4326 - is that right?
>
> Exactly.
>
> > Unfortunately, doing the above is not possible with any of the command
> > line utilities. ... It could also of course be
> > written as a small C/C++ utility.
>
> I will implement a small c++ utility.
>
> Thank you for your help, I really appreciate it!
> michele
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080210/e951b8ab/attachment.html
From dfuhry at acm.org  Sun Feb 10 15:25:50 2008
From: dfuhry at acm.org (David Fuhry)
Date: Sun Feb 10 15:25:27 2008
Subject: [gdal-dev] Re: GeoJasper 1.4 beta suggested patch
Message-ID: <47AF5DCE.2080106@acm.org>

Dmitry,

    Note: I've CCed gdal-dev@lists.osgeo.org , who may find this of
interest, or have some other JPEG2000 decoding thoughts.

Dmitry Fedorov wrote:
 > Hey David,
 >
 > That is true, jasper does not have any interface for partial decoding,
 > although it is not in any way a difficult thing to add with little c
 > knowledge (basically you would have to limit a number of wavelet levels
 > to decode), the problem is that no one wanted to contribute that for a
 > number of years. You might be interested to check out other jpeg2000
 > open source libraries, i know of at least two other projects.

That is good news.  Besides a lower-resolution rendering, we may only be
interested in only some sub-region (say, the upper-right corner) of the
original image.  The general query question is:
Given the (pixel) coordinates of a rectangle R = [minx,miny,maxx,maxy]
inside the image I, and the (pixel) dimensions* [width,height] of an
output canvas C, render subregion R of I onto C, without losing quality.

* (The canvas "dimensions" could alternatively be just a single scalar
value; the width & height of R will always be proportional to the width
& height of C)

I guess the subregion optimization can be achieved by just discarding a
tile from rendering if its bounds do not intersect R.  Would this be
relatively easy to implement also?

If geojasper could answer that query efficiently, then it could be put
into the same realm as Kakadu and ER SDK for geospatial applications.  I
noticed the OpenJPEG decoder [1] has parameters for "Reduce factor" and
"Layer number", but nothing for subregion bounds.  So my guess is that
while some open-source decoders do partial wavelet-level decoding, none
do tile discarding based on a query rectangle.

 > Frank's modification is more like a hack that gives one entry point to
 > write geotiff uuid box into jpeg2000 stream. geojasper is more of an
 > enhancement of jasper that provides standard way for metadata exchange,
 > fixes several decoding issues of jasper and adds geotiff support, both
 > modifications were made approximately at the same time and Frank's
 > tailors specifically inclusion of jasper into gdal framework, geojasper
 > tailors direct copy of tiff tags into jpeg2000. Therefore I don't see
 > much need in merging the two projects they are intrinsically different.

Thanks for the clarification.  (Eventual) gdal support is important to
me because mapserver uses the gdal interfaces to render raster images.
For example, currently, gdal doesn't recognize geojasper as
GeoJp2-capable, although it could (/should), since your interfaces are
there.  If geojasper could implement efficient rectangle querying,
geojasper would (I presume) replace Frank's hacked jasper in gdal,
increase geojasper's visibility, and maybe improve the chances of your
hard work making it back into jasper.  This is along the lines of a
vision expressed by Frank in a 2001 freegis-list posting [2].

Thanks,

Dave

[1] http://www.openjpeg.org/index.php?menu=doc
[2] http://intevation.de/pipermail/freegis-list/2001-September/000605.html

From warmerdam at pobox.com  Sun Feb 10 21:00:39 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Feb 10 21:01:05 2008
Subject: [gdal-dev] OGR shapefile problems
In-Reply-To: <0EC68691-73CE-4089-979D-8EF548453A69@kyngchaos.com>
References: <D914AD0D-257E-4526-AF43-2F617D2F9EC9@wildnevada.org>
	<200802100005.11813.even.rouault@mines-paris.org>
	<0EC68691-73CE-4089-979D-8EF548453A69@kyngchaos.com>
Message-ID: <47AFAC47.6050002@pobox.com>

William Kyngesburye wrote:
> So, the patch works.  But I notice that you only patched the polygon 
> case.  I think it's possible that any shape type can have null shape 
> data.  I don't know if it's correct behavior for shapefiles, but I've 
> seen ArcGIS export such shapefiles myself, and I think I've seen it 
> happen with point shapefiles as well.

Even,

I can confirm that shapefiles can indeed have NULL shapes in them which
are currently handled by returning NULL for the geometry.  I would think
this is the appropriate behavior for a polygon with no rings too instead
of returning an empty multipolygon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Feb 11 12:46:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 11 12:46:29 2008
Subject: [gdal-dev] Linking MinGW app builds against VC++ built GDAL
Message-ID: <47B089DA.6050504@pobox.com>

Folks,

A few weeks or perhaps months ago there was some discussion about wanting
to use MinGW to build applications against a GDAL library built with VC++.
The main barrier to making this work was that VC++ builds a bunch of C
entry points with stdcall convensions instead of the default cdecl.  MinGW
did not recognise this and so linking failed.

At the time I more or less blew off the fellow I was corresponding with (I
can't seem to find this discussion now) stating it was an MinGW problem, not
a GDAL problem.

Somewhat ironically, I now find myself wanting to do the same thing - basically
so that OSGeo4W's GRASS (built with MinGW) can be built against a common GDAL
DLL built with VC++.  In exploring somewhat deeper I determined the problem was
just that cpl_port.h only declares CPL_STDCALL to be __stdcall for VC++ due
to the #ifdef's.

I have modified cpl_config.h.vc so that it forces CPL_STDCALL to always be
used, regardless of the compiler pulling in the include file.  This seems to
fix the problem, and I have incorporated it in trunk and 1.5 branch per:

   http://trac.osgeo.org/gdal/ticket/2216

Anyone interested in using MinGW to build applications against a GDAL built
with VC++ (such as the stock GDAL binaries) is encouraged to apply this hack
and report back if they find out issues.  I am now personally willing to
support this particular configuration.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mchapman at texelinc.com  Mon Feb 11 16:51:51 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Mon Feb 11 16:51:59 2008
Subject: [gdal-dev] SPOT Kompsat-2 GeoTiff with JPEG2000 compression
Message-ID: <003c01c86cf8$4fc26bd0$ef474370$@com>

All,

 

Does anybody know where I can get a free sample image from SPOT Kompsat-2
that is geotiff format with Jpeg2000 compression?  Any help would be much
appreciated.

 

Best regards,

Martin

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080211/8bc6307d/attachment.html
From desch-mosher at lanl.gov  Mon Feb 11 22:50:05 2008
From: desch-mosher at lanl.gov (Diana Esch-Mosher)
Date: Mon Feb 11 22:50:14 2008
Subject: [gdal-dev] gdalwarp rather than gdal_translate
Message-ID: <47B1176D.9060304@lanl.gov>

I have a NITF file that I would like to resample using the more 
sophisticated interpolation techniques of gdalwarp (-rcs). I do not want 
the file to change in way other than size, I do not want to 
transform/reproject/warp etc. When I specified gdalwarp -rcs -ts x y -of 
GTiff it transformed the file in a North up. How do I specify to not do 
anything other than resample? Is it possible to specify -of NITF? I 
tried this using 114 and got errors. Do I need 115 for NITF?

Thanks,

Diana M. Esch-Mosher

From warmerdam at pobox.com  Mon Feb 11 23:36:46 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 11 23:37:22 2008
Subject: [gdal-dev] gdalwarp rather than gdal_translate
In-Reply-To: <47B1176D.9060304@lanl.gov>
References: <47B1176D.9060304@lanl.gov>
Message-ID: <47B1225E.6000005@pobox.com>

Diana Esch-Mosher wrote:
> I have a NITF file that I would like to resample using the more 
> sophisticated interpolation techniques of gdalwarp (-rcs). I do not want 
> the file to change in way other than size, I do not want to 
> transform/reproject/warp etc. When I specified gdalwarp -rcs -ts x y -of 
> GTiff it transformed the file in a North up. How do I specify to not do 
> anything other than resample? 

Diana,

Currently gdalwarp does not support producing output files with georeferencing
based on a GCPs.  You can write a file with a non-north up geotransform but
only by pre-creating the file replicating the input geotransform which is not
really practical from the commandline.

 > Is it possible to specify -of NITF? I
> tried this using 114 and got errors. Do I need 115 for NITF?

gdalwarp should support creating NITF files.

When you refer to 114 and 115 are you meaning GDAL/OGR 1.1.4 and 1.1.5?
Those are ancient!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dany.geotools at gmail.com  Tue Feb 12 04:41:52 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Feb 12 04:41:58 2008
Subject: [gdal-dev] GDAL and NUTM17 NAD83 datasets.
Message-ID: <7221db410802120141l3181bfe5m1ba6a6317840339c@mail.gmail.com>

Hi list,
During my tests, I noticed that when using my build of gdal (1.4.4 on
windows xp) I can't get a Coordinate System for some specific Datasets.
As an instance I used gdalinfo from fwtools 2.0.4 on a ECW file and I
obtained this Coordinate System (partial copy and paste).

PROJCS["NUTM17",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AXIS["Lat",NORTH],
        AXIS["Long",EAST],
        AUTHORITY["EPSG","4269"]],
....................................

Using "my" gdalinfo I obtain the classic empty string.
I guess this issue could be Proj4 related (although I'm not really sure
about this).
For this reason I surfed the mailing list and I downloaded the proj4
library, I set the PROJ_LIB linking the NAD folder and I added the DLL in
the path. (GDAL_DATA has been already set in the past)
Anyway, the result is the same: empty coordinate system returned. As a
parallel experiment, I also tried statically linking the library with the
same result.

Is there some additional operations which fwtools based gdalinfo performs?
I'm surely wrong somewhere :)
Any help would be greatly appreciated.

Regards,
Daniele Romagnoli


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080212/9a40a655/attachment.html
From battisti at actgate.com  Tue Feb 12 06:47:45 2008
From: battisti at actgate.com (Andrea Battisti)
Date: Tue Feb 12 06:48:00 2008
Subject: [gdal-dev] PCI AUX support: LONG/LAT ?
Message-ID: <47B18761.5080306@actgate.com>

Hi all,


I am testing the GDAL support for some PCI RAW(+AUX) data.
I have no problems loading sample .raw files that use the "SIN" 
projection (within the corresponding .aux).

On the other hand, GDAL refuses to open a simple file which use 
"LONG/LAT" projection:

its .aux contains:

RawDefinition: 81 51 1
ChanDefinition-1: 32R 0 4 324 Swapped
MapUnits: LONG/LAT    D000
UpLeftX:    -8.35169600000000E+01
UpLeftY:     4.20982300000000E+01
LoRightX:    -8.24558600000000E+01
LoRightY:     4.14301300000000E+01
ProjParms: 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 4


I was able to load the same data file by manually generating a .vrt, but 
it should work also natively I guess.


PS:
I noticed the following lines in the GDAL source (ogr/ogr_srs_pci.cpp:376)

    if( EQUALN( pszProj, "LONG/LAT", 8 ) )
    {
    }

in the case of "LONG/LAT" it does nothing; (I'm not familiar with it); 
may it be a clue?


Thanks in advance,

-- 
Andrea Battisti
Applied Coherent Technology Corp.

From warmerdam at pobox.com  Tue Feb 12 08:36:38 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 12 08:37:41 2008
Subject: [gdal-dev] PCI AUX support: LONG/LAT ?
In-Reply-To: <47B18761.5080306@actgate.com>
References: <47B18761.5080306@actgate.com>
Message-ID: <47B1A0E6.9060103@pobox.com>

Andrea Battisti wrote:
> Hi all,
> 
> 
> I am testing the GDAL support for some PCI RAW(+AUX) data.
> I have no problems loading sample .raw files that use the "SIN" 
> projection (within the corresponding .aux).

Andrea,

This sounds like a bug.  I have filed a ticket on your behalf and
will dig into it today.

   http://trac.osgeo.org/gdal/ticket/2219

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Feb 12 09:04:30 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 12 09:05:01 2008
Subject: [gdal-dev] GDAL and NUTM17 NAD83 datasets.
In-Reply-To: <7221db410802120141l3181bfe5m1ba6a6317840339c@mail.gmail.com>
References: <7221db410802120141l3181bfe5m1ba6a6317840339c@mail.gmail.com>
Message-ID: <47B1A76E.6020407@pobox.com>

Daniele Romagnoli wrote:
> Hi list,
> During my tests, I noticed that when using my build of gdal (1.4.4 on 
> windows xp) I can't get a Coordinate System for some specific Datasets.
> As an instance I used gdalinfo from fwtools 2.0.4 on a ECW file and I 
> obtained this Coordinate System (partial copy and paste).
...
> Using "my" gdalinfo I obtain the classic empty string.
> I guess this issue could be Proj4 related (although I'm not really sure 
> about this).
> For this reason I surfed the mailing list and I downloaded the proj4 
> library, I set the PROJ_LIB linking the NAD folder and I added the DLL 
> in the path. (GDAL_DATA has been already set in the past)
> Anyway, the result is the same: empty coordinate system returned. As a 
> parallel experiment, I also tried statically linking the library with 
> the same result.
> 
> Is there some additional operations which fwtools based gdalinfo performs?
> I'm surely wrong somewhere :)
> Any help would be greatly appreciated.

Daniele,

GDAL needs to find the ecw_cs.wkt dictionary file to lookup ECW coordinate
system names.  This is normally found via the GDAL_DATA pointer.  You mention
you have this set, but I am suspecting it is set improperly or perhaps there
is some related sort of error (permissions?).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From dany.geotools at gmail.com  Tue Feb 12 09:16:18 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Feb 12 09:16:22 2008
Subject: [gdal-dev] GDAL and NUTM17 NAD83 datasets.
In-Reply-To: <47B1A76E.6020407@pobox.com>
References: <7221db410802120141l3181bfe5m1ba6a6317840339c@mail.gmail.com>
	<47B1A76E.6020407@pobox.com>
Message-ID: <7221db410802120616n3993e077m9034c75418428970@mail.gmail.com>

Frank,
thanks for your reply.

I have already properly set the GDAL_DATA var :(. (And the cited file
ecw_cs.wkt is present there)
Here's why I investigated for a Proj4 responsability.

Which type of permissions problems do you think should be involved? (I'm
using Windows Vista and GDAL_DATA links to a simple folder C:\work\gdal...
As an instance I know that Vista may introduce some problems in several
circumstances when working with C:\ProgramFiles... Moreover I have disabled
User Account Control some months ago...)

Thanks a lot. I will narrow my search for the cause of the problem.

Regards,
Daniele


On Feb 12, 2008 3:04 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> Daniele Romagnoli wrote:
> > Hi list,
> > During my tests, I noticed that when using my build of gdal (1.4.4 on
> > windows xp) I can't get a Coordinate System for some specific Datasets.
> > As an instance I used gdalinfo from fwtools 2.0.4 on a ECW file and I
> > obtained this Coordinate System (partial copy and paste).
> ...
> > Using "my" gdalinfo I obtain the classic empty string.
> > I guess this issue could be Proj4 related (although I'm not really sure
> > about this).
> > For this reason I surfed the mailing list and I downloaded the proj4
> > library, I set the PROJ_LIB linking the NAD folder and I added the DLL
> > in the path. (GDAL_DATA has been already set in the past)
> > Anyway, the result is the same: empty coordinate system returned. As a
> > parallel experiment, I also tried statically linking the library with
> > the same result.
> >
> > Is there some additional operations which fwtools based gdalinfo
> performs?
> > I'm surely wrong somewhere :)
> > Any help would be greatly appreciated.
>
> Daniele,
>
> GDAL needs to find the ecw_cs.wkt dictionary file to lookup ECW coordinate
> system names.  This is normally found via the GDAL_DATA pointer.  You
> mention
> you have this set, but I am suspecting it is set improperly or perhaps
> there
> is some related sort of error (permissions?).
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080212/fd220aea/attachment.html
From collinsb at mitre.org  Tue Feb 12 09:27:22 2008
From: collinsb at mitre.org (Collins, Benjamin)
Date: Tue Feb 12 09:27:24 2008
Subject: [gdal-dev] GDAL and NUTM17 NAD83 datasets.
In-Reply-To: <7221db410802120141l3181bfe5m1ba6a6317840339c@mail.gmail.com>
References: <7221db410802120141l3181bfe5m1ba6a6317840339c@mail.gmail.com>
Message-ID: <8D27E2CDAF11D34F97E7445BCCCDB92C02441229@IMCSRV1.MITRE.ORG>

>-----Original Message-----
>From: Daniele Romagnoli
>As an instance I used gdalinfo from fwtools 2.0.4 on a ECW 
>file and I obtained this Coordinate System (partial copy and paste).
....
>Using "my" gdalinfo I obtain the classic empty string.

Daniele,

Recently I got bit with a similar problem: fwtools (v2.0.x) reported a
projection that my in-house compiled version was not seeing (on a
JP2KAK-driven dataset).  In my case there was an ".aux.xml" for the
file.  FWTools is compiled with PAM overrides turned on by default,
where the default build from ./configure is not (v1.5.0).  One way to
turn this on at runtime for the default build (at least for JP2 w/
Kakadu) is to set the environment variable GDAL_PAM_ENABLED (or
--config option) to YES.

Of course, I have no idea if this is applicable for ECW datasets.

Good luck!
--
Ben
From dany.geotools at gmail.com  Tue Feb 12 09:28:16 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Feb 12 09:28:20 2008
Subject: [gdal-dev] GDAL and NUTM17 NAD83 datasets.
In-Reply-To: <7221db410802120616n3993e077m9034c75418428970@mail.gmail.com>
References: <7221db410802120141l3181bfe5m1ba6a6317840339c@mail.gmail.com>
	<47B1A76E.6020407@pobox.com>
	<7221db410802120616n3993e077m9034c75418428970@mail.gmail.com>
Message-ID: <7221db410802120628h6966d52xb2730101e848848c@mail.gmail.com>

Hi again Frank.
My fault :(

I performed some tests on java bindings for Gdal 1.5.0 and I moved GDAL_DATA
from gdal-1.4.4/data to gdal-1.5.0/data.
I badly thought that the GDAL_DATA content was the same in the 2 versions
while the 1.4.4 looks for a ecw_cs.dat while the 1.5.0 looks for a
ecw_cs.wkt.

My fault... sorry.
Regards,
Daniele

On Feb 12, 2008 3:16 PM, Daniele Romagnoli <dany.geotools@gmail.com> wrote:

> Frank,
> thanks for your reply.
>
> I have already properly set the GDAL_DATA var :(. (And the cited file
> ecw_cs.wkt is present there)
> Here's why I investigated for a Proj4 responsability.
>
> Which type of permissions problems do you think should be involved? (I'm
> using Windows Vista and GDAL_DATA links to a simple folder C:\work\gdal...
> As an instance I know that Vista may introduce some problems in several
> circumstances when working with C:\ProgramFiles... Moreover I have disabled
> User Account Control some months ago...)
>
> Thanks a lot. I will narrow my search for the cause of the problem.
>
> Regards,
> Daniele
>
>
>
> On Feb 12, 2008 3:04 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> > Daniele Romagnoli wrote:
> > > Hi list,
> > > During my tests, I noticed that when using my build of gdal (1.4.4 on
> > > windows xp) I can't get a Coordinate System for some specific
> > Datasets.
> > > As an instance I used gdalinfo from fwtools 2.0.4 on a ECW file and I
> > > obtained this Coordinate System (partial copy and paste).
> > ...
> > > Using "my" gdalinfo I obtain the classic empty string.
> > > I guess this issue could be Proj4 related (although I'm not really
> > sure
> > > about this).
> > > For this reason I surfed the mailing list and I downloaded the proj4
> > > library, I set the PROJ_LIB linking the NAD folder and I added the DLL
> > > in the path. (GDAL_DATA has been already set in the past)
> > > Anyway, the result is the same: empty coordinate system returned. As a
> > > parallel experiment, I also tried statically linking the library with
> > > the same result.
> > >
> > > Is there some additional operations which fwtools based gdalinfo
> > performs?
> > > I'm surely wrong somewhere :)
> > > Any help would be greatly appreciated.
> >
> > Daniele,
> >
> > GDAL needs to find the ecw_cs.wkt dictionary file to lookup ECW
> > coordinate
> > system names.  This is normally found via the GDAL_DATA pointer.  You
> > mention
> > you have this set, but I am suspecting it is set improperly or perhaps
> > there
> > is some related sort of error (permissions?).
> >
> > Best regards,
> > --
> >
> > ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> > and watch the world go round - Rush    | President OSGeo,
> > http://osgeo.org
> >
> >
>
>
> --
> -------------------------------------------------------
> Eng. Daniele Romagnoli
> Software Engineer
>
> GeoSolutions S.A.S.
> Via Carignoni 51
> 55041 Camaiore (LU)
> Italy
>
> phone: +39 0584983027
> fax:     +39 0584983027
> mob:   +39 328 0559267
>
>
> http://www.geo-solutions.it
>
> -------------------------------------------------------
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080212/e37a2452/attachment.html
From dany.geotools at gmail.com  Tue Feb 12 09:32:23 2008
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Tue Feb 12 09:32:39 2008
Subject: [gdal-dev] GDAL and NUTM17 NAD83 datasets.
In-Reply-To: <8D27E2CDAF11D34F97E7445BCCCDB92C02441229@IMCSRV1.MITRE.ORG>
References: <7221db410802120141l3181bfe5m1ba6a6317840339c@mail.gmail.com>
	<8D27E2CDAF11D34F97E7445BCCCDB92C02441229@IMCSRV1.MITRE.ORG>
Message-ID: <7221db410802120632i63fd3153s173e0f15e2e5f995@mail.gmail.com>

Thx for your tip Ben.
I have replied to myself a minute ago with the solution of my problem :)
1.4.4 looks for a .dat file while 1.5.0 looks for a .wkt file and I'm
linking GDAL_DATA to the bad one...

Regards,
Daniele

On Feb 12, 2008 3:27 PM, Collins, Benjamin <collinsb@mitre.org> wrote:

> >-----Original Message-----
> >From: Daniele Romagnoli
> >As an instance I used gdalinfo from fwtools 2.0.4 on a ECW
> >file and I obtained this Coordinate System (partial copy and paste).
> ....
> >Using "my" gdalinfo I obtain the classic empty string.
>
> Daniele,
>
> Recently I got bit with a similar problem: fwtools (v2.0.x) reported a
> projection that my in-house compiled version was not seeing (on a
> JP2KAK-driven dataset).  In my case there was an ".aux.xml" for the
> file.  FWTools is compiled with PAM overrides turned on by default,
> where the default build from ./configure is not (v1.5.0).  One way to
> turn this on at runtime for the default build (at least for JP2 w/
> Kakadu) is to set the environment variable GDAL_PAM_ENABLED (or
> --config option) to YES.
>
> Of course, I have no idea if this is applicable for ECW datasets.
>
> Good luck!
> --
> Ben
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080212/c6a38b4b/attachment.html
From andrea.pistoni at next.it  Tue Feb 12 10:22:09 2008
From: andrea.pistoni at next.it (andyNEXT)
Date: Tue Feb 12 10:22:11 2008
Subject: [Gdal-dev] HDF5 root metadata reading in C#
Message-ID: <15434466.post@talk.nabble.com>


Hi All.
 
I'm trying to read the attributes of an HDF5 file composed as following:
 
root
  | 
  +-- S01
  |
  +--DS
 
but I cannot read the attributes (about an hundred) associated to the ROOT
level.  

The string code I use in C# is the simple:   string[] metadata =
ds.GetMetadata("");
 
Maybe there is an option of "GetMedata" to read also these metadata.
 
Thanks in advance.
Regards.
 
Andrea Pistoni
-- 
View this message in context: http://www.nabble.com/HDF5-root-metadata-reading-in-C--tp15434466p15434466.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szekerest at gmail.com  Tue Feb 12 10:42:48 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Feb 12 10:42:50 2008
Subject: [Gdal-dev] HDF5 root metadata reading in C#
In-Reply-To: <15434466.post@talk.nabble.com>
References: <15434466.post@talk.nabble.com>
Message-ID: <f3b73b7d0802120742t24e71872g1ec0156c203d9b3b@mail.gmail.com>

Hi,

If you are using multiple domains then the domain name should be
specified in the argument of GetMetadata.

Best regards,

Tamas



2008/2/12, andyNEXT <andrea.pistoni@next.it>:
>
> Hi All.
>
> I'm trying to read the attributes of an HDF5 file composed as following:
>
> root
>   |
>   +-- S01
>   |
>   +--DS
>
> but I cannot read the attributes (about an hundred) associated to the ROOT
> level.
>
> The string code I use in C# is the simple:   string[] metadata =
> ds.GetMetadata("");
>
> Maybe there is an option of "GetMedata" to read also these metadata.
>
> Thanks in advance.
> Regards.
>
> Andrea Pistoni
> --
> View this message in context: http://www.nabble.com/HDF5-root-metadata-reading-in-C--tp15434466p15434466.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From desch-mosher at lanl.gov  Tue Feb 12 12:39:15 2008
From: desch-mosher at lanl.gov (Diana Esch-Mosher)
Date: Tue Feb 12 12:39:29 2008
Subject: [gdal-dev] gdalwarp rather than gdal_translate
In-Reply-To: <47B1225E.6000005@pobox.com>
References: <47B1176D.9060304@lanl.gov> <47B1225E.6000005@pobox.com>
Message-ID: <47B1D9C3.1030101@lanl.gov>

I looked at gdalwarp and I see where it checks to see if the destination 
file exists, if so then it reads the TargetSRS from that dataset. So I 
should pre-create to the target size that I am requesting in gdalwarp? I 
have no problem in python  pre-creating the file, copying the metadata, 
geotransform, and projection data ... anything else I should copy? Then 
I just call gdalwarp as gdalwarp -rcs -ts x y -of  NITF (or any other 
-of  I want).

Diana

Frank Warmerdam wrote:
> Diana Esch-Mosher wrote:
>> I have a NITF file that I would like to resample using the more 
>> sophisticated interpolation techniques of gdalwarp (-rcs). I do not 
>> want the file to change in way other than size, I do not want to 
>> transform/reproject/warp etc. When I specified gdalwarp -rcs -ts x y 
>> -of GTiff it transformed the file in a North up. How do I specify to 
>> not do anything other than resample? 
>
> Diana,
>
> Currently gdalwarp does not support producing output files with 
> georeferencing
> based on a GCPs.  You can write a file with a non-north up 
> geotransform but
> only by pre-creating the file replicating the input geotransform which 
> is not
> really practical from the commandline.
>
> > Is it possible to specify -of NITF? I
>> tried this using 114 and got errors. Do I need 115 for NITF?
>
> gdalwarp should support creating NITF files.
>
> When you refer to 114 and 115 are you meaning GDAL/OGR 1.1.4 and 1.1.5?
> Those are ancient!
>
> Best regards,


From josegomez at gmx.net  Tue Feb 12 13:30:03 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Tue Feb 12 13:30:08 2008
Subject: [gdal-dev] ngpython and GetSubDataSets()?
Message-ID: <20080212183003.41230@gmx.net>

Hi,
I've just compiled gdal 1.5.0 on a Linux RHEL5 X86_64 machine. I need to use HDF files extensively, so I've been trying to test whether the new compiled GDAL works. In python, I noticed that I no longer get all the methods I used to get.

In my older version, I had:
In [3]: g=gdal.Open("MOD17A3.A2004366.h19v10.205.2006164124254.hdf")

In [4]: g.Ge
g.GetDescription    g.GetGCPCount       g.GetGCPs           g.GetMetadata       g.GetProjectionRef  g.GetSubDatasets
g.GetDriver         g.GetGCPProjection  g.GetGeoTransform   g.GetProjection     g.GetRasterBand

In [4]: g.GetSubDatasets()
Out[4]:
[('HDF4_EOS:EOS_GRID:"MOD17A3.A2004366.h19v10.205.2006164124254.hdf":MOD_Grid_MOD17A3:Gpp_1km',
  '[1200x1200] Gpp_1km MOD_Grid_MOD17A3 (16-bit unsigned integer)'),
 ('HDF4_EOS:EOS_GRID:"MOD17A3.A2004366.h19v10.205.2006164124254.hdf":MOD_Grid_MOD17A3:Npp_1km',
  '[1200x1200] Npp_1km MOD_Grid_MOD17A3 (16-bit integer)'),
 ('HDF4_EOS:EOS_GRID:"MOD17A3.A2004366.h19v10.205.2006164124254.hdf":MOD_Grid_MOD17A3:Gpp_Npp_QC_1km',
  '[1200x1200] Gpp_Npp_QC_1km MOD_Grid_MOD17A3 (8-bit unsigned integer)')]


In the newly-compiled version, I do exactly the same (get a deprecation warning about the osgeo namespace), but when I do g.GetSubDatasets()...
g.GetSubDatasets()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)

/home/ucfajlg/<ipython console>

/usr/lib64/python2.4/site-packages/GDAL-1.5.0-py2.4-linux-x86_64.egg/osgeo/gdal.py in <lambda>(self=<osgeo.gdal.Dataset; proxy of <Swig Object of type 'GDALDatasetShadow *' at 0xbfd3200> >, name='GetSubDatasets')
    493     __swig_getmethods__ = {}
    494     for _s in [MajorObject]: __swig_getmethods__.update(getattr(_s,'__swig_getmethods__',{}))
--> 495     __getattr__ = lambda self, name: _swig_getattr(self, Dataset, name)
        global __getattr__ = undefined
        self = <osgeo.gdal.Dataset; proxy of <Swig Object of type 'GDALDatasetShadow *' at 0xbfd3200> >
        name = 'GetSubDatasets'
        global _swig_getattr = <function _swig_getattr at 0x2aaaaee99050>
        global Dataset = <class 'osgeo.gdal.Dataset'>
    496     def __init__(self): raise AttributeError, "No constructor defined"
    497     __repr__ = _swig_repr

/usr/lib64/python2.4/site-packages/GDAL-1.5.0-py2.4-linux-x86_64.egg/osgeo/gdal.py in _swig_getattr(self=<osgeo.gdal.Dataset; proxy of <Swig Object of type 'GDALDatasetShadow *' at 0xbfd3200> >, class_type=<class 'osgeo.gdal.Dataset'>, name='GetSubDatasets')
     32     method = class_type.__swig_getmethods__.get(name,None)
     33     if method: return method(self)
---> 34     raise AttributeError,name
        global AttributeError = undefined
        name = 'GetSubDatasets'
     35
     36 def _swig_repr(self):

AttributeError: GetSubDatasets

I solved the problem by getting rid of the /usr/lib64/python2.4/site-packages/GDAL-1.5.0-py2.4-linux-x86_64.egg/ directory, which takes me back to the "oldgen" bindings. My question is whether all the methods from the oldgen bindings have already made it to the ng bindings, or whether there will be other changes that will make my software incompatible when the ng switch goes live, and for which I will need to modify my code.

Cheers,
Jose
-- 
Ist Ihr Browser Vista-kompatibel? Jetzt die neuesten 
Browser-Versionen downloaden: http://www.gmx.net/de/go/browser
From ari.jolma at tkk.fi  Tue Feb 12 13:32:25 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Tue Feb 12 13:35:11 2008
Subject: [gdal-dev] Linking MinGW app builds against VC++ built GDAL
In-Reply-To: <47B089DA.6050504@pobox.com>
References: <47B089DA.6050504@pobox.com>
Message-ID: <47B1E639.7090804@tkk.fi>

Frank,

I'd like to try this, i.e., build the Perl bindings with MinGW against 
such DLL. But since I'm not willing to build GDAL DLL with VC++, I'd 
need to download them from someplace. Can I?

Regards,

Ari

Frank Warmerdam kirjoitti:
> Folks,
>
> A few weeks or perhaps months ago there was some discussion about wanting
> to use MinGW to build applications against a GDAL library built with 
> VC++.
> The main barrier to making this work was that VC++ builds a bunch of C
> entry points with stdcall convensions instead of the default cdecl.  
> MinGW
> did not recognise this and so linking failed.
>
> At the time I more or less blew off the fellow I was corresponding 
> with (I
> can't seem to find this discussion now) stating it was an MinGW 
> problem, not
> a GDAL problem.
>
> Somewhat ironically, I now find myself wanting to do the same thing - 
> basically
> so that OSGeo4W's GRASS (built with MinGW) can be built against a 
> common GDAL
> DLL built with VC++.  In exploring somewhat deeper I determined the 
> problem was
> just that cpl_port.h only declares CPL_STDCALL to be __stdcall for 
> VC++ due
> to the #ifdef's.
>
> I have modified cpl_config.h.vc so that it forces CPL_STDCALL to 
> always be
> used, regardless of the compiler pulling in the include file.  This 
> seems to
> fix the problem, and I have incorporated it in trunk and 1.5 branch per:
>
>   http://trac.osgeo.org/gdal/ticket/2216
>
> Anyone interested in using MinGW to build applications against a GDAL 
> built
> with VC++ (such as the stock GDAL binaries) is encouraged to apply 
> this hack
> and report back if they find out issues.  I am now personally willing to
> support this particular configuration.
>
> Best regards,


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Tue Feb 12 14:24:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 12 14:24:34 2008
Subject: [gdal-dev] Linking MinGW app builds against VC++ built GDAL
In-Reply-To: <47B1E639.7090804@tkk.fi>
References: <47B089DA.6050504@pobox.com> <47B1E639.7090804@tkk.fi>
Message-ID: <47B1F257.2060506@pobox.com>

Ari Jolma wrote:
> Frank,
> 
> I'd like to try this, i.e., build the Perl bindings with MinGW against 
> such DLL. But since I'm not willing to build GDAL DLL with VC++, I'd 
> need to download them from someplace. Can I?

Ari,

Absolutely!  Just download:

   http://download.osgeo.org/osgeo4w/setup.exe

run it, and install the "gdal" package.  This includes the stub
library (%OSGEO4W_HOME%\lib\gdal_i.lib) and include files
(%OSGEO4W_HOME%\include).  It should also produce a fairly solid
gdal-config script that can be run under MSYS and returns the proper
include paths and library link line if that is helpful.

It is my objective that OSGeo4W package will provide developer stuff
as well as end user stuff with the hope of making it easier to build
more layered packages.

If you are interested in packaging perl, and GDAL perl bindings I'd be
happy to help with details over on the osgeo4w-dev mailing list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ari.jolma at tkk.fi  Tue Feb 12 15:26:35 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Tue Feb 12 15:29:21 2008
Subject: [gdal-dev] Linking MinGW app builds against VC++ built GDAL
In-Reply-To: <47B1F257.2060506@pobox.com>
References: <47B089DA.6050504@pobox.com> <47B1E639.7090804@tkk.fi>
	<47B1F257.2060506@pobox.com>
Message-ID: <47B200FB.1070009@tkk.fi>

Frank Warmerdam kirjoitti:
> Ari Jolma wrote:
>> Frank,
>>
>> I'd like to try this, i.e., build the Perl bindings with MinGW 
>> against such DLL. But since I'm not willing to build GDAL DLL with 
>> VC++, I'd need to download them from someplace. Can I?
>
> Ari,
>
> Absolutely!  Just download:
>
>   http://download.osgeo.org/osgeo4w/setup.exe
>

Got it. I made MinGW lib files with pexports and dlltool (similarly as 
in http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW) and stabbed 
Makefile.PL to use that and the include files from /cygwin/include, but 
no immediate luck. Only gdal_const compiles, gdal complains:

gdal_wrap.cpp: In function `void _wrap_Driver_CreateCopy(CV*)':
gdal_wrap.cpp:4818: error: invalid conversion from `int (*)(double, 
const char*, void*)' to `int (*)(double, const char*, void*)'

(there are more similar complaints), the error seems to be from the 
code, which converts C callbacks to Perl callbacks. The error seems to 
be "invalid conversion from a to a"(!?!)

ogr compiles but complains zillion times in the link phase:

ogr_wrap.o:ogr_wrap.cpp:(.text+0x17331): undefined reference to 
`CPLGetLastErrorMsg@0'

i.e. only from those which have "@0"

and osr complains:

osr_wrap.cpp: In function `OGRErr 
OSRSpatialReferenceShadow_SetLinearUnitsAndUpdateParameters(OSRSpatialReferenceShadow*, 
const char*, double)':
osr_wrap.cpp:1812: error: `OSRSetLinearUnitsAndUpdateParameters' 
undeclared (first use this function)

and a few similar ones.

Ari


From warmerdam at pobox.com  Tue Feb 12 16:42:04 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 12 16:42:52 2008
Subject: [gdal-dev] ngpython and GetSubDataSets()?
In-Reply-To: <20080212183003.41230@gmx.net>
References: <20080212183003.41230@gmx.net>
Message-ID: <47B212AC.8070402@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi, I've just compiled gdal 1.5.0 on a Linux RHEL5 X86_64 machine. I need to
> use HDF files extensively, so I've been trying to test whether the new
> compiled GDAL works. In python, I noticed that I no longer get all the
> methods I used to get.
...
> AttributeError: GetSubDatasets
> 
> I solved the problem by getting rid of the
> /usr/lib64/python2.4/site-packages/GDAL-1.5.0-py2.4-linux-x86_64.egg/
> directory, which takes me back to the "oldgen" bindings. My question is
> whether all the methods from the oldgen bindings have already made it to the
> ng bindings, or whether there will be other changes that will make my
> software incompatible when the ng switch goes live, and for which I will
> need to modify my code.

Jose,

I see this was implemented in the old gen bindings as a convenience
function like this:

     def GetSubDatasets(self):
         sd_list = []

         sd = self.GetMetadata('SUBDATASETS')
         if sd is None:
             return sd_list

         i = 1
         while sd.has_key('SUBDATASET_'+str(i)+'_NAME'):
             sd_list.append( ( sd['SUBDATASET_'+str(i)+'_NAME'],
                               sd['SUBDATASET_'+str(i)+'_DESC'] ) )
             i = i + 1
         return sd_list

You could essentially do the same thing in your own code.

Howard, how would you feel about incorporating this as syntactic
sugar in the NG bindings?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Feb 12 16:45:47 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 12 16:51:45 2008
Subject: [gdal-dev] Linking MinGW app builds against VC++ built GDAL
In-Reply-To: <47B200FB.1070009@tkk.fi>
References: <47B089DA.6050504@pobox.com> <47B1E639.7090804@tkk.fi>
	<47B1F257.2060506@pobox.com> <47B200FB.1070009@tkk.fi>
Message-ID: <47B2138B.2000002@pobox.com>

Ari Jolma wrote:
> Got it. I made MinGW lib files with pexports and dlltool (similarly as 
> in http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW) and stabbed 
> Makefile.PL to use that and the include files from /cygwin/include, but 
> no immediate luck. Only gdal_const compiles, gdal complains:

Ari,

I'm not sure what the pexports and dlltool stuff is for.  I have
found I can link MingGW applications directly against gdal_i.lib
without any special stuff.

> gdal_wrap.cpp: In function `void _wrap_Driver_CreateCopy(CV*)':
> gdal_wrap.cpp:4818: error: invalid conversion from `int (*)(double, 
> const char*, void*)' to `int (*)(double, const char*, void*)'

I'm at a bit of a loss on this one.

> (there are more similar complaints), the error seems to be from the 
> code, which converts C callbacks to Perl callbacks. The error seems to 
> be "invalid conversion from a to a"(!?!)
> 
> ogr compiles but complains zillion times in the link phase:
> 
> ogr_wrap.o:ogr_wrap.cpp:(.text+0x17331): undefined reference to 
> `CPLGetLastErrorMsg@0'
> 
> i.e. only from those which have "@0"

I'm not too sure about this either.

> and osr complains:
> 
> osr_wrap.cpp: In function `OGRErr 
> OSRSpatialReferenceShadow_SetLinearUnitsAndUpdateParameters(OSRSpatialReferenceShadow*, 
> const char*, double)':
> osr_wrap.cpp:1812: error: `OSRSetLinearUnitsAndUpdateParameters' 
> undeclared (first use this function)
> 
> and a few similar ones.

Is it possible you are trying to build GDAL "trunk" bindings?  The
packaged version in OSGeo4W is the 1.5.0 release and lacks the new
OSRSetLinearUnitsAndUpdateParameters() function.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Feb 12 17:47:30 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 12 17:47:59 2008
Subject: [gdal-dev] gdalwarp rather than gdal_translate
In-Reply-To: <47B1D9C3.1030101@lanl.gov>
References: <47B1176D.9060304@lanl.gov> <47B1225E.6000005@pobox.com>
	<47B1D9C3.1030101@lanl.gov>
Message-ID: <47B22202.10408@pobox.com>

Diana Esch-Mosher wrote:
> I looked at gdalwarp and I see where it checks to see if the destination 
> file exists, if so then it reads the TargetSRS from that dataset. So I 
> should pre-create to the target size that I am requesting in gdalwarp? I 
> have no problem in python  pre-creating the file, copying the metadata, 
> geotransform, and projection data ... anything else I should copy? Then 
> I just call gdalwarp as gdalwarp -rcs -ts x y -of  NITF (or any other 
> -of  I want).

Diana,

Right, except of course you don't specify parameters used to create the
file (like -of or -ts).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ari.jolma at tkk.fi  Wed Feb 13 01:51:40 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Feb 13 01:50:26 2008
Subject: [gdal-dev] Linking MinGW app builds against VC++ built GDAL
In-Reply-To: <47B2138B.2000002@pobox.com>
References: <47B089DA.6050504@pobox.com> <47B1E639.7090804@tkk.fi>
	<47B1F257.2060506@pobox.com> <47B200FB.1070009@tkk.fi>
	<47B2138B.2000002@pobox.com>
Message-ID: <47B2937C.3050706@tkk.fi>

Frank Warmerdam kirjoitti:
>
> I'm not sure what the pexports and dlltool stuff is for.  I have
> found I can link MingGW applications directly against gdal_i.lib
> without any special stuff.

I use them to make the import lib. I can't make perl Makefile.PL accept 
gdal_i.lib (which is annoying!) but if I edit it by hand into the 
Makefiles everything works - almost, I get some errors from the 
self-tests but they are also related to the version mismatches.

>
> Is it possible you are trying to build GDAL "trunk" bindings?

Yes, I was using the trunk version of wrappers.

However, I wonder how useful this is. Perl is packaged for cygwin and 
probably I should use that (instead of the MinGW perl I've compiled 
myself) for the OSGeo4W perl bindings for GDAL.

Ari

-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Wed Feb 13 02:02:52 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 13 02:03:05 2008
Subject: [gdal-dev] Linking MinGW app builds against VC++ built GDAL
In-Reply-To: <47B2937C.3050706@tkk.fi>
References: <47B089DA.6050504@pobox.com> <47B1E639.7090804@tkk.fi>
	<47B1F257.2060506@pobox.com> <47B200FB.1070009@tkk.fi>
	<47B2138B.2000002@pobox.com> <47B2937C.3050706@tkk.fi>
Message-ID: <47B2961C.7050206@pobox.com>

Ari Jolma wrote:
> Frank Warmerdam kirjoitti:
>>
>> I'm not sure what the pexports and dlltool stuff is for.  I have
>> found I can link MingGW applications directly against gdal_i.lib
>> without any special stuff.
> 
> I use them to make the import lib. I can't make perl Makefile.PL accept 
> gdal_i.lib (which is annoying!) but if I edit it by hand into the 
> Makefiles everything works - almost, I get some errors from the 
> self-tests but they are also related to the version mismatches.

Ari,

I found with PROJ.4 and GRASS it was easiest to just copy
proj_i.lib to libproj.a in order to get past this sort of issues.
Perhaps you can just copy gdal_i.lib to libgdal.a?

>> Is it possible you are trying to build GDAL "trunk" bindings?
> 
> Yes, I was using the trunk version of wrappers.
> 
> However, I wonder how useful this is. Perl is packaged for cygwin and 
> probably I should use that (instead of the MinGW perl I've compiled 
> myself) for the OSGeo4W perl bindings for GDAL.

Despite the fact that I'm using the Cygwin "setup" program for OSGeo4W,
the actual OSGeo4W binaries are *not* cygwin based.  That is, they don't
link against the cygwin dlls and do all that magic unix-like stuff that
cygwin does.

They are either built with VC++ or MinGW/MSYS.  So I don't think a
cygwin perl will be of much assistance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From marco.pasetti at alice.it  Wed Feb 13 08:50:19 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Wed Feb 13 08:50:22 2008
Subject: [gdal-dev] GDAL 1.5.0 on Windows (MSYS/MinGW) for GRASS build
Message-ID: <FBCMMO01HlAhPfj74ee0000ec7a@FBCMMO01.fbc.local>

Hi,
 
it's my first message on the list, so hi all ;-)... I think you don't need (or even don't want) a presentation, so I'll go directly to the issue:
I'm building GRASS windows native binary using MSYS/MinGW; the usual procedure is:
 
1) build gdal without grass support
2) build grass
3) rebuild gdal with grass support
 
and this is ok. But the guide I'm followings is about GDAL 1.4.1, and suggests to build it without libtool and then adding a lot of gcc instructions. So here's the problem: I want to build GDAL 1.5.0, but the gcc instructions of 1.4.1 guide don't work (obvioulsy!)... I need to build it using libtool. I read the notes on GDAL web site, but I didn't understand some things:
 
1) [...] Edit libtool at line 6114 to sed out the MSYS-anchored absolute path [...] or [...]  Edit GNUmakefile on lines 6-12 [...]
just before make command, and after ./configure command?
 
2) Expat: I have expat installed (built using MSYS), release 2.0.1
[...]  get libexpat.dll and create an import library with [...] 
the instruction is not very clear... before or after builfing GDAL?
 
3) I already have an installed version of GDAL (1.4.1) in my usr/local, but dll is not libgdal-1.dll, it is libgdal.dll, built using the following instructions http://wiki.qgis.org/qgiswiki/BuildingFromSource#head-cfa56b4e7278363ab05f9c130014a85f99019f5a
and I also have other gdal files in my /usr/local... I would delete them, but I am not sure of what files I need to delete! Can I build and install gdal 1.5 without taking care of prevoius 1.4.1 build and install?
 
Many thanks,
 
Marco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080213/9a25023a/attachment.html
From marco.pasetti at alice.it  Wed Feb 13 08:58:13 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Wed Feb 13 08:58:17 2008
Subject: [gdal-dev] GDAL 1.5.0 on Windows (MSYS/MinGW) for GRASS build [take
	2]
Message-ID: <FBCMMO03YtkoaBUIdpm00028d8b@FBCMMO03.fbc.local>

Hi,
 
I forgot the last question: I installed PROJ.4 release 4.5.0 (built with MSYS/MinGW); is it good with GDAL 1.5.0? known issues?
 
Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080213/12b8b7ab/attachment.html
From lran at unc.edu  Wed Feb 13 10:48:28 2008
From: lran at unc.edu (Limei Ran)
Date: Wed Feb 13 10:49:03 2008
Subject: [gdal-dev] question about using gdal_rasterize 
Message-ID: <47B3114C.2050604@unc.edu>

Hi:

I need to rasterize a polygon shapefile with a modified map extent.  I 
did not see setting x and y min and max for the shapefile when using 
gdal_rasterize.  I can use gdal_rasterize first and then gdalwarp to set 
the extent .  Are there any direct way to do it with some codings?

Thanks

Limei

From warmerdam at pobox.com  Wed Feb 13 11:37:31 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 13 11:38:59 2008
Subject: [gdal-dev] question about using gdal_rasterize
In-Reply-To: <47B3114C.2050604@unc.edu>
References: <47B3114C.2050604@unc.edu>
Message-ID: <47B31CCB.3070906@pobox.com>

Limei Ran wrote:
> Hi:
> 
> I need to rasterize a polygon shapefile with a modified map extent.  I 
> did not see setting x and y min and max for the shapefile when using 
> gdal_rasterize.  I can use gdal_rasterize first and then gdalwarp to set 
> the extent .  Are there any direct way to do it with some codings?

Limei,

I do not believe that gdal_rasterize currently supports creating the raster
file - it expects to be provided with one with the desired extents already
set.  I sometimes use gdal_translate to create a suitable file.

For instance:

gdal_translate utm.tif -a_srs WGS84 -a_ullr -180 90 180 -90 \
     -scale 0 255 0 0 -outsize 1800 900 world.tif

This "in theory" translates the input file to the output file, but
in fact, it changes all characteristics (region, coordinate system)
and even flattens all the pixels to zero with -scale.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From chowell at pyxisinnovation.com  Wed Feb 13 12:50:43 2008
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Wed Feb 13 12:50:45 2008
Subject: [gdal-dev] Grib Support.
Message-ID: <47B32DF3.1010205@pyxisinnovation.com>

Is Gdal 1.5.0 natively built GRIB support or is that an option I have to 
add in via a plug in or build against ?


Cheers
Chris
From chowell at pyxisinnovation.com  Wed Feb 13 14:02:35 2008
From: chowell at pyxisinnovation.com (Chris Howell)
Date: Wed Feb 13 14:02:38 2008
Subject: [gdal-dev] Rubber Sheeting.
Message-ID: <47B33ECB.8020908@pyxisinnovation.com>

Hi All,

Just wondering if this use case for geo-tagging a file with no 
geo-information in it; I was wondering if there was anyway I could 
"Rubber sheet" a tiff file to provide some geolocating information. I am 
currently considering building this use-case into our system however it 
would save me some extra work if GDAL could just do it for me.

Cheers
Chris
From Chris.Barker at noaa.gov  Wed Feb 13 19:54:01 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Feb 13 19:53:20 2008
Subject: [gdal-dev] Converting palette image to RBG
Message-ID: <47B39129.70900@noaa.gov>

Hi all,

Does GDAL have a method for converting a paletted image (color table) to 
  and RGB image? I've written code for this in Python, using PIL, but it 
dawned on me that it may be built in to GDAL already.

-thanks, Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Wed Feb 13 20:12:13 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 13 20:12:42 2008
Subject: [gdal-dev] Converting palette image to RBG
In-Reply-To: <47B39129.70900@noaa.gov>
References: <47B39129.70900@noaa.gov>
Message-ID: <47B3956D.7050207@pobox.com>

Christopher Barker wrote:
> Hi all,
> 
> Does GDAL have a method for converting a paletted image (color table) to 
>  and RGB image? I've written code for this in Python, using PIL, but it 
> dawned on me that it may be built in to GDAL already.

Chris,

In fact, it only exists as a python utility in GDAL: pct2rgb.py

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From ivan.lucena at pmldnet.com  Wed Feb 13 20:16:26 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Feb 13 20:16:31 2008
Subject: [gdal-dev] Loading a plugin
Message-ID: <47B3966A.50401@pmldnet.com>

Hi there,

Does anybody knows of some particular reason for a plugin to fail in 
getting the address of the registration function? That happens for me on 
"port/cplgetsymbol.cpp". The call to LoadLibrary() does not fail but 
GetProcAddress() does fail. I check the caption on pszSymbolName and it 
is correct. The process of loading the library checks for dependencies 
and I got it covered too. So... what else?

Best regards,

Ivan

From jrepetto at free.fr  Thu Feb 14 02:22:49 2008
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu Feb 14 02:23:05 2008
Subject: [gdal-dev] Converting palette image to RBG
In-Reply-To: <47B39129.70900@noaa.gov>
References: <47B39129.70900@noaa.gov>
Message-ID: <47B3EC49.1010303@free.fr>

Christopher Barker a ?crit :
> Hi all,
> 
> Does GDAL have a method for converting a paletted image (color table) to 
>  and RGB image? I've written code for this in Python, using PIL, but it 
> dawned on me that it may be built in to GDAL already.
> 
> -thanks, Chris
> 
> 
> 

Hi Chris,

I am using ImageMagick :
convert paletted-image.png -type TrueColor rgb-image.png

Jean-Claude



From ari.jolma at tkk.fi  Thu Feb 14 11:51:56 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Thu Feb 14 11:52:04 2008
Subject: [gdal-dev] GDAL 1.5.0 on Windows (MSYS/MinGW) for GRASS build
In-Reply-To: <FBCMMO01HlAhPfj74ee0000ec7a@FBCMMO01.fbc.local>
References: <FBCMMO01HlAhPfj74ee0000ec7a@FBCMMO01.fbc.local>
Message-ID: <47B471AC.6010009@tkk.fi>

marco.pasetti@alice.it kirjoitti:
> Hi,
>  
> it's my first message on the list, so hi all ;-)... I think you don't 
> need (or even don't want) a presentation, so I'll go directly to the 
> issue:
> I'm building GRASS windows native binary using MSYS/MinGW; the usual 
> procedure is:
>  
> 1) build gdal without grass support
> 2) build grass
> 3) rebuild gdal with grass support
>  
> and this is ok. But the guide I'm followings is about GDAL 1.4.1, and 
> suggests to build it without libtool and then adding a lot of gcc 
> instructions. So here's the problem: I want to build GDAL 1.5.0, but 
> the gcc instructions of 1.4.1 guide don't work (obvioulsy!)... I need 
> to build it using libtool. I read the notes on GDAL web site, but I 
> didn't understand some things:
>  
> 1) [...] Edit libtool at line 6114 to sed out the MSYS-anchored 
> absolute path [...] or [...]  Edit GNUmakefile on lines 6-12 [...]
> just before make command, and after ./configure command?

after ./configure and before make or after the first make fails in the 
end ;)

>  
> 2) Expat: I have expat installed (built using MSYS), release 2.0.1
> [...]  get libexpat.dll and create an import library with [...]
> the instruction is not very clear... before or after builfing GDAL?

before, so you can tell GDAL's configure about it

>  
> 3) I already have an installed version of GDAL (1.4.1) in my 
> usr/local, but dll is not libgdal-1.dll, it is libgdal.dll, built 
> using the following instructions 
> http://wiki.qgis.org/qgiswiki/BuildingFromSource#head-cfa56b4e7278363ab05f9c130014a85f99019f5a
> and I also have other gdal files in my /usr/local... I would delete 
> them, but I am not sure of what files I need to delete! Can I build 
> and install gdal 1.5 without taking care of prevoius 1.4.1 build and 
> install?

to be on the safe side try to remove old gdal stuff from there

 > forgot the last question: I installed PROJ.4 release 4.5.0 (built 
with MSYS/MinGW); is it good with
 > GDAL 1.5.0? known issues?

I don't know about that. Probably it's ok.

Ari

>  
> Many thanks,
>  
> Marco
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From lran at unc.edu  Thu Feb 14 13:08:59 2008
From: lran at unc.edu (Limei Ran)
Date: Thu Feb 14 13:11:05 2008
Subject: [gdal-dev] gdal_rasterize
Message-ID: <20080214130859.gmk9hiqy8swskw00@webmail4.isis.unc.edu>


Hi,

I need to rasterize a polygon shapefile to create a new raster file.  I 
read that gdal_rasterize can not create a new raster file.  Could you 
give me some information for how to create a new raster file in using 
this utility?

Thanks,

Limei




From desch-mosher at lanl.gov  Thu Feb 14 15:55:22 2008
From: desch-mosher at lanl.gov (Diana Esch-Mosher)
Date: Thu Feb 14 15:55:32 2008
Subject: [gdal-dev] gdalwarp rather than gdal_translate
In-Reply-To: <47B22202.10408@pobox.com>
References: <47B1176D.9060304@lanl.gov> <47B1225E.6000005@pobox.com>
	<47B1D9C3.1030101@lanl.gov> <47B22202.10408@pobox.com>
Message-ID: <47B4AABA.60608@lanl.gov>

Frank,

Well, this isn't quite doing what I thought. It is no longer 
transforming the file (yeah!)  but is not resampling to the new size. If 
I give it a new size, say slightly smaller (I'm trying to resample to a 
common GSD), then it just crops the image to the new smaller size, 
rather than downsizing. FYI, I'm using 1.3.2.0 ..... is that a problem? 
Same goes for making a larger image, it is not resampling to a larger 
size, and additionally it is washing it out.

Thanks,

Diana

Frank Warmerdam wrote:
> Diana Esch-Mosher wrote: 
>> I looked at gdalwarp and I see where it checks to see if the 
>> destination file exists, if so then it reads the TargetSRS from that 
>> dataset. So I should pre-create to the target size that I am 
>> requesting in gdalwarp? I have no problem in python  pre-creating the 
>> file, copying the metadata, geotransform, and projection data ... 
>> anything else I should copy? Then I just call gdalwarp as gdalwarp 
>> -rcs -ts x y -of  NITF (or any other -of  I want).
>
> Diana,
>
> Right, except of course you don't specify parameters used to create the
> file (like -of or -ts).
>
> Best regards,

From gfiske at whrc.org  Thu Feb 14 16:24:01 2008
From: gfiske at whrc.org (Greg Fiske)
Date: Thu Feb 14 16:25:57 2008
Subject: [gdal-dev] basic raster math
Message-ID: <006501c86f4f$eabf3c40$c03db4c0$@org>

Greetings,

I'm a new python user, so pardon my simple question.  I'd like to
do some simple raster math within Python.  For example, I'd like
to read in 2 Geotiffs and add one to the other -- creating a new
output Geotiff.  I've experimented with the gdal and Numpy
libraries, but I haven't made much progress on my own.  Can
somebody send me some example code?

Thanks,

Greg

Gregory Fiske
Research Associate
GIS and Remote Sensing Laboratory
The Woods Hole Research Center
149 Woods Hole Road
Falmouth, Massachusetts 02540
508-540-9900
http://www.whrc.org
gfiske@whrc.org 



From rob.braswell at unh.edu  Thu Feb 14 16:36:41 2008
From: rob.braswell at unh.edu (Bobby Braswell)
Date: Thu Feb 14 16:36:47 2008
Subject: [gdal-dev] basic raster math
In-Reply-To: <006501c86f4f$eabf3c40$c03db4c0$@org>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
Message-ID: <C4B4AE54-DDCB-463A-B900-142D9822801C@unh.edu>


Hi Greg, here's a basic example without GDAL (and thus with no  
projection info). I hope it helps (and I hope there aren't typos).  --  
Rob Braswell


# load the modules
import sys
import numpy
import Image
from pylab import *

# open the files
im1 = Image.open("test1.tif")
im2 = Image.open("test2.tif")

# extract the data
im1data = im.getdata()
im2data = im.getdata()

# get the dimensions
dim = im1.size
dim2 = im2.size

# check dimensions
if (dim != dim2):
	print "images are not the same size"
	sys.exit(0)

# convert the data from image type to array type
# (there are a lot of implications to this but for now it should do  
what you want)
data1 = numpy.array(im1data).reshape(dim)
data2 = numpy.array(im2data).reshape(dim)

datadiff = data2 - data1

# set mode to interactive
matplotlib.interactive(True)

# plot a cross section
figure(1)
plot(datadiff[:,1000])

# look at the image
figure(2)
imshow(datadiff)



On Feb 14, 2008, at 4:24 PM, Greg Fiske wrote:

> Greetings,
>
> I'm a new python user, so pardon my simple question.  I'd like to
> do some simple raster math within Python.  For example, I'd like
> to read in 2 Geotiffs and add one to the other -- creating a new
> output Geotiff.  I've experimented with the gdal and Numpy
> libraries, but I haven't made much progress on my own.  Can
> somebody send me some example code?
>
> Thanks,
>
> Greg
>
> Gregory Fiske
> Research Associate
> GIS and Remote Sensing Laboratory
> The Woods Hole Research Center
> 149 Woods Hole Road
> Falmouth, Massachusetts 02540
> 508-540-9900
> http://www.whrc.org
> gfiske@whrc.org
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Bobby H. Braswell (Rob)
Institute for the Study of Earth Oceans and Space
University of New Hampshire
Durham, NH 03824 USA
1-603-862-2264



From Chris.Barker at noaa.gov  Thu Feb 14 16:50:43 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Feb 14 16:49:58 2008
Subject: [gdal-dev] basic raster math
In-Reply-To: <C4B4AE54-DDCB-463A-B900-142D9822801C@unh.edu>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
	<C4B4AE54-DDCB-463A-B900-142D9822801C@unh.edu>
Message-ID: <47B4B7B3.1030506@noaa.gov>

Bobby Braswell wrote:
> Hi Greg, here's a basic example without GDAL (and thus with no 
> projection info). 

if you want to write it back out as a geotiff, GDAL will help there. 
Take a look at some of the utilities that come with GDAL that are 
written in Python -- essentially what you need to do is open the file, 
then get the rasterband with:

numpy_array = band.ReadAsArray()

then do math with the numpy_arrays, then write it back out with 
something like:

gdal.Band.WriteAsArray(numpy_array)


A note about the PIL code provided:
> # extract the data
> im1data = im.getdata()
> im2data = im.getdata()
> 
> # get the dimensions
> dim = im1.size
> dim2 = im2.size
> 
> # check dimensions
> if (dim != dim2):
>     print "images are not the same size"
>     sys.exit(0)
> 
> # convert the data from image type to array type
> # (there are a lot of implications to this but for now it should do what 
> you want)
> data1 = numpy.array(im1data).reshape(dim)
> data2 = numpy.array(im2data).reshape(dim)

All the above code can now be replaced with:

data1 = numpy.asarray(im1) (im1 is a PIL image object)

thanks to the "array interface"

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From rob.braswell at unh.edu  Thu Feb 14 17:40:37 2008
From: rob.braswell at unh.edu (Bobby Braswell)
Date: Thu Feb 14 17:40:39 2008
Subject: [gdal-dev] basic raster math
In-Reply-To: <47B4B7B3.1030506@noaa.gov>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
	<C4B4AE54-DDCB-463A-B900-142D9822801C@unh.edu>
	<47B4B7B3.1030506@noaa.gov>
Message-ID: <7D563B5F-F949-424E-A61F-5DB5DA800F65@unh.edu>


Hi-

Sorry for stupidly ignoring gdal on the gdal list. Brain cramp.

In any case, yes I would recommend this.

from osgeo import gdal
g = gdal.Open("test.tif")
dataarray = g.ReadAsArray()
...

From Chris.Barker at noaa.gov  Thu Feb 14 18:15:22 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Feb 14 18:14:37 2008
Subject: [gdal-dev] basic raster math
In-Reply-To: <007101c86f58$ee03c9d0$ca0b5d70$@org>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
	<C4B4AE54-DDCB-463A-B900-142D9822801C@unh.edu>
	<47B4B7B3.1030506@noaa.gov> <007101c86f58$ee03c9d0$ca0b5d70$@org>
Message-ID: <47B4CB8A.7010508@noaa.gov>

Greg Fiske wrote:
> placed in a namespace, it is now available as osgeo.gdal
> 
>   DeprecationWarning)

listen to that warning, and use:

from osgeo import gdal


>> >> gdal.Band.WriteAsArray(datadiff)
> 
> Traceback (most recent call last):
> 
>   File "<stdin>", line 1, in <module>
> 
> AttributeError: type object 'Band' has no attribute 'WriteAsArray'

gdal.Band is a class object -- you need to create a RasterBand object
(or use an existing one), and call WriteAsArray() on that. Sorry I can't
give you more help easily, so far I've needed read-only.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From vasile.cotovanu at gmail.com  Thu Feb 14 18:50:12 2008
From: vasile.cotovanu at gmail.com (Vasile Cotovanu)
Date: Thu Feb 14 18:50:14 2008
Subject: [gdal-dev] warp from ch1903 to google maps(mercator) projection -
	what t_srs to use
Message-ID: <4e39dfbe0802141550t179f52dy645c8d1440d1405a@mail.gmail.com>

Hello all, this is my first post on this list, first of all I want to
congratulate anybody involved in this fantastic library !

I have an issue that is fixed with a workaround but I want to avoid this
workaround, here it is :

I'm using gdalwarp to reproject imagery from EPSG:21781 (CH 1903) to Google
Maps (mercator based) projection.

Currently I have been using for -t_srs the suggestion from this blog entry
http://www.sharpgis.net/post/2007/07/26/The-Microsoft-Live-Maps-and-Google-Maps-projection.aspx

so

+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0
+y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs

which defines a perfect sphere(not ellipsoid) but i am not happy with
the results because :
- if i am transforming the bounds of image from CH1903 to WGS84 and
then to Google Maps pixel coordinate system, the result will be a
parallelogram (it is normal, the image will be distorted from CH1903
to Mercator) that can be included in a box with a pair of width/height in
pixels
- if i am using gdalwarp the result will be a distorted image (again
it's normal) with another pair of width/height.

The expected result after tis 2 operations would be 2 pairs of width/height
WITH SAME ration width/height. However, this issue can be fixed by FORCING
the gdalwarp "-ts width
height" parameter and imagery it's just drawn fine.

So my question is, in order not to do this workaround, can you tell me
if you use another -t_srs value, and if yes, which one ?

I suppose that should be different for each zoom level, as GoogleMaps does
use different radius for each zoom level. (on zoom level 0 the imagery is
drawn in a single tile 256x256 pixels, so the radius will be
circumference/(2*pi()) pixels , on zoom 1 : circumference is 512 px, then
radius is 2 times bigger than zoom level 0, etc)

Thank you in advance,
Vasile Cotovanu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080215/53ad75b4/attachment.html
From warmerdam at pobox.com  Thu Feb 14 20:31:18 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 14 20:31:43 2008
Subject: [gdal-dev] Draft Annual Report
Message-ID: <47B4EB66.5080804@pobox.com>

Folks,

I have prepared a draft Annual Report for the project.

Input is welcome.

   http://trac.osgeo.org/gdal/wiki/AnnualReport2007

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From nikos.alexandris at felis.uni-freiburg.de  Thu Feb 14 20:41:21 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Thu Feb 14 20:42:29 2008
Subject: [gdal-dev] warp from ch1903 to google maps(mercator)
	projection - what t_srs to use
In-Reply-To: <4e39dfbe0802141550t179f52dy645c8d1440d1405a@mail.gmail.com>
References: <4e39dfbe0802141550t179f52dy645c8d1440d1405a@mail.gmail.com>
Message-ID: <1203039681.6670.14.camel@vertical>

Hi!

Although I am probably not helping you any further...

On Fri, 2008-02-15 at 00:50 +0100, Vasile Cotovanu wrote:
> Hello all, this is my first post on this list, first of all I want to
> congratulate anybody involved in this fantastic library ! 
> 
> I have an issue that is fixed with a workaround but I want to avoid
> this workaround, here it is : 
> 
> I'm using gdalwarp to reproject imagery from EPSG:21781 (CH 1903) to
> Google Maps (mercator based) projection. 

...please note that there is a difference between

"CH1903 / LV03" -> EPSG:21781

and

"CH1903" -> EPSG:4149

> 
> Currently I have been using for -t_srs the suggestion from this blog
> entry
> http://www.sharpgis.net/post/2007/07/26/The-Microsoft-Live-Maps-and-Google-Maps-projection.aspx
> 
> so 
> 
> +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 
> +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs 
> 
> which defines a perfect sphere(not ellipsoid) but i am not happy with 
> the results because : 
> - if i am transforming the bounds of image from CH1903 to WGS84 and 
> then to Google Maps pixel coordinate system, the result will be a 
> parallelogram (it is normal, the image will be distorted from CH1903 
> to Mercator) that can be included in a box with a pair of width/height
> in pixels 
> - if i am using gdalwarp the result will be a distorted image (again 
> it's normal) with another pair of width/height. 
> 
> The expected result after tis 2 operations would be 2 pairs of
> width/height WITH SAME ration width/height. However, this issue can be
> fixed by FORCING the gdalwarp "-ts width 
> height" parameter and imagery it's just drawn fine. 
> 
> So my question is, in order not to do this workaround, can you tell
> me 
> if you use another -t_srs value, and if yes, which one ? 
> 
> I suppose that should be different for each zoom level, as GoogleMaps
> does use different radius for each zoom level. (on zoom level 0 the
> imagery is drawn in a single tile 256x256 pixels, so the radius will
> be circumference/(2*pi()) pixels , on zoom 1 : circumference is 512
> px, then radius is 2 times bigger than zoom level 0, etc) 
> 
> Thank you in advance, 
> Vasile Cotovanu 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-- 
Nikos Alexandris
.
Department of Remote Sensing & Landscape Information Systems
Faculty of Forestry & Environmental Sciences, Albert-Ludwigs-University Freiburg
.
Tel.  +49 (0) 761 203 3697 / Fax.  +49 (0) 761 203 3701 / Skype: Nikos.Alexandris
.
Address: Tennenbacher str. 4, D-79106 Freiburg i. Br., Germany
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080215/4d9cf0b2/attachment-0001.bin
From mateusz at loskot.net  Thu Feb 14 20:49:38 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Feb 14 20:49:44 2008
Subject: [gdal-dev] Draft Annual Report
In-Reply-To: <47B4EB66.5080804@pobox.com>
References: <47B4EB66.5080804@pobox.com>
Message-ID: <47B4EFB2.3000704@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> I have prepared a draft Annual Report for the project.
> 
> Input is welcome.
> 
>   http://trac.osgeo.org/gdal/wiki/AnnualReport2007

GDAL graduated OSGeo incubation process shortly ago,
but didn't it start in 2007?
Perhaps it's worth to mention this fact in the report.

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net
From ivan.lucena at pmldnet.com  Thu Feb 14 22:39:44 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Thu Feb 14 22:39:49 2008
Subject: [gdal-dev] Draft Annual Report
In-Reply-To: <47B4EB66.5080804@pobox.com>
References: <47B4EB66.5080804@pobox.com>
Message-ID: <47B50980.9020303@pmldnet.com>

Frank,

Maybe you should mention the web pages translated to Portuguese.

Regards,

Ivan

Frank Warmerdam wrote:
> Folks,
> 
> I have prepared a draft Annual Report for the project.
> 
> Input is welcome.
> 
>   http://trac.osgeo.org/gdal/wiki/AnnualReport2007
> 
> Best regards,
From jeshua at OpenOSX.com  Fri Feb 15 00:30:23 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Fri Feb 15 00:30:24 2008
Subject: [gdal-dev] basic raster math
In-Reply-To: <006501c86f4f$eabf3c40$c03db4c0$@org>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
Message-ID: <4B49A410-E361-457A-BBA7-A8ACC18E5D02@OpenOSX.com>


On Feb 14, 2008, at 2:24 PM, Greg Fiske wrote:

> I'm a new python user, so pardon my simple question.  I'd like to
> do some simple raster math within Python.  For example, I'd like
> to read in 2 Geotiffs and add one to the other -- creating a new
> output Geotiff.  I've experimented with the gdal and Numpy
> libraries, but I haven't made much progress on my own.  Can
> somebody send me some example code?

Hi Greg,

Although somewhat off-topic and not too steal thunder from the  
fabulous GDAL, you might want to have a look at GRASS GIS' mapcalc  
command - it lets you use plain math on any rasters and is quite easy  
(dare I say fun) to use.


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364



From ari.jolma at tkk.fi  Fri Feb 15 01:43:52 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Fri Feb 15 01:44:14 2008
Subject: [gdal-dev] basic raster math
In-Reply-To: <47B4B7B3.1030506@noaa.gov>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
	<C4B4AE54-DDCB-463A-B900-142D9822801C@unh.edu>
	<47B4B7B3.1030506@noaa.gov>
Message-ID: <47B534A8.8000708@tkk.fi>

Christopher Barker kirjoitti:
> if you want to write it back out as a geotiff, GDAL will help there. 
> Take a look at some of the utilities that come with GDAL that are 
> written in Python -- essentially what you need to do is open the file, 
> then get the rasterband with:
>
> numpy_array = band.ReadAsArray()

Just to make sure, I guess this reads the whole thing into memory? I.e. 
don't try this with huge images.

Regards,

Ari

-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From wollez at gmx.net  Fri Feb 15 05:17:57 2008
From: wollez at gmx.net (WolfgangZ)
Date: Fri Feb 15 05:18:18 2008
Subject: [gdal-dev] beginners programming questions
Message-ID: <fp3osr$5iu$1@ger.gmane.org>

Hi,

I'm quite new to programming with gdal/python and I want to know if my 
ideas are easily doable or if I should better use a GIS system like 
Grass for that tasks.

1. accessing the cell value of a (float) tiff. I know how to load the 
map into an array, but this seems to be overkill.

2. can I get the surrounding cells or better directly (bilinear/cubic) 
interpolated data? I want to extract the elevation for GPS points, but 
only the cell value looks not so nice in 3D model as there also 
interpolation between the heights is done.

3. can I extract height profiles along a line between two points?

4. can I change the resolution of the input map directly in python (as 
replacement of gdal_translate -tr)?

Many thanks
Wolfgang

From dmorissette at mapgears.com  Fri Feb 15 08:40:42 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Feb 15 08:40:44 2008
Subject: [gdal-dev] Draft Annual Report
In-Reply-To: <47B4EB66.5080804@pobox.com>
References: <47B4EB66.5080804@pobox.com>
Message-ID: <47B5965A.3090508@mapgears.com>

Frank Warmerdam wrote:
> 
> I have prepared a draft Annual Report for the project.
> 
> Input is welcome.
> 
>   http://trac.osgeo.org/gdal/wiki/AnnualReport2007
> 

Looks great. I can't think of anything else at the moment.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From mattia.parigiani at gmail.com  Fri Feb 15 10:05:35 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Fri Feb 15 10:05:40 2008
Subject: [gdal-dev] gdalwarp: reprojecting HDF w/ Lat/Long metadata (GCP
	extraction)
Message-ID: <6b6f1c810802150705w1429e069xd2d7e0bc96215240@mail.gmail.com>

Hello all

I would like to reproject (to WGS84) an HDF raster image dataset.
The problem is that I am not quite sure of what I should be using for the
GCP extraction and so which geographic data from within the HDF SDSs..
On tail with this email I have copied the output from gdalinfo on my main
HDF file containing multiple SDSs...

Do I need to use the Latitude/Longitude SDSs  (subdatasets 11, 12 ) from the
reprojection operations? Can anyone point me out on how I could possibly do
this as
to get a correctly georeferenced images? One which will not look like a
swath scanned image, but a skewed and correctly referenced one...

Hint: The image data covers a big part of China... hence, the reprojection
needs to take into account this... probably reprojecting onto WGS84 ??
Any suggestions would be appreciated...

Other problem is that out of the SDSs that I have, I would like to extract 8
bit raster images (from 16 bit unsigned ones in subdataset 0) ... Now, I
have been trying to approach this problem in different ways and still cannot
figure out which would be the best... Is it better to extract the SDS into a
separate HDF file first with hdp? Can I do the task by using hdftor8
directly?? By using gdal_translate for the first decomposition?? Any other
options ??

Best regards...

gdalinfo output:

Driver: HDF4/Hierarchical Data Format Release 4
Files: AMOD021KM20070104035343.hdf
Size is 512, 512
Coordinate System is `'
Metadata:

 GRINGPOINTLATITUDE.1=64.763542175293, 58.4916687011719, 20.8642158508301,
24.1079616546631
  GRINGPOINTLONGITUDE.1=91.4718399047852, 134.930770874023, 110.696083068848,
88.3426055908203

.... OTHER METADATA ....

  EASTBOUNDINGCOORDINATE=134.930768655651
  WESTBOUNDINGCOORDINATE=88.3307203917252
  NORTHBOUNDINGCOORDINATE=64.7989342568829
  SOUTHBOUNDINGCOORDINATE=20.7060304288409

.... OTHER METADATA ....

Subdatasets:
  SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":0
  SUBDATASET_1_DESC=[15x4630x1354] EV_1KM_RefSB (16-bit unsigned integer)
  SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":1
  SUBDATASET_2_DESC=[15x4630x1354] EV_1KM_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_3_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":2
  SUBDATASET_3_DESC=[2x4630x1354] EV_250_Aggr1km_RefSB (16-bit unsigned
integer)
  SUBDATASET_4_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":3
  SUBDATASET_4_DESC=[2x4630x1354] EV_250_Aggr1km_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_5_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":4
  SUBDATASET_5_DESC=[2x4630x1354] EV_250_Aggr1km_RefSB_Samples_Used (8-bit
unsigned integer)
  SUBDATASET_6_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":5
  SUBDATASET_6_DESC=[5x4630x1354] EV_500_Aggr1km_RefSB (16-bit unsigned
integer)
  SUBDATASET_7_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":6
  SUBDATASET_7_DESC=[5x4630x1354] EV_500_Aggr1km_RefSB_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_8_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":7
  SUBDATASET_8_DESC=[5x4630x1354] EV_500_Aggr1km_RefSB_Samples_Used (8-bit
unsigned integer)
  SUBDATASET_9_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":8
  SUBDATASET_9_DESC=[16x4630x1354] EV_1KM_Emissive (16-bit unsigned integer)
  SUBDATASET_10_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":9
  SUBDATASET_10_DESC=[16x4630x1354] EV_1KM_Emissive_Uncert_Indexes (8-bit
unsigned integer)
  SUBDATASET_11_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":10
  SUBDATASET_11_DESC=[926x271] Latitude (32-bit floating-point)
  SUBDATASET_12_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":11
  SUBDATASET_12_DESC=[926x271] Longitude (32-bit floating-point)
  SUBDATASET_13_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":12
  SUBDATASET_13_DESC=[926x271] Height (16-bit integer)
  SUBDATASET_14_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":13
  SUBDATASET_14_DESC=[926x271] SensorZenith (16-bit integer)
  SUBDATASET_15_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":14
  SUBDATASET_15_DESC=[926x271] SensorAzimuth (16-bit integer)
  SUBDATASET_16_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":15
  SUBDATASET_16_DESC=[926x271] Range (16-bit unsigned integer)
  SUBDATASET_17_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":16
  SUBDATASET_17_DESC=[926x271] SolarZenith (16-bit integer)
  SUBDATASET_18_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":17
  SUBDATASET_18_DESC=[926x271] SolarAzimuth (16-bit integer)
  SUBDATASET_19_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":18
  SUBDATASET_19_DESC=[926x271] gflags (8-bit unsigned integer)
  SUBDATASET_20_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":19
  SUBDATASET_20_DESC=[4630x1354] EV_Band26 (16-bit unsigned integer)
  SUBDATASET_21_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":20
  SUBDATASET_21_DESC=[4630x1354] EV_Band26_Uncert_Indexes (8-bit unsigned
integer)
  SUBDATASET_22_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":21
  SUBDATASET_22_DESC=[16x10] Noise in Thermal Detectors (8-bit unsigned
integer)
  SUBDATASET_23_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":22
  SUBDATASET_23_DESC=[16x10] Change in relative responses of thermal
detectors (8-bit unsigned integer)
  SUBDATASET_24_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":23
  SUBDATASET_24_DESC=[463x16x10] DC Restore Change for Thermal Bands (8-bit
integer)
  SUBDATASET_25_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":24
  SUBDATASET_25_DESC=[463x2x40] DC Restore Change for Reflective 250m Bands
(8-bit integer)
  SUBDATASET_26_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":25
  SUBDATASET_26_DESC=[463x5x20] DC Restore Change for Reflective 500m Bands
(8-bit integer)
  SUBDATASET_27_NAME=HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":26
  SUBDATASET_27_DESC=[463x15x10] DC Restore Change for Reflective 1km Bands
(8-bit integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080215/9cc1b2d2/attachment-0001.html
From josegomez at gmx.net  Fri Feb 15 10:08:55 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Fri Feb 15 10:08:57 2008
Subject: [gdal-dev] basic raster math
In-Reply-To: <006501c86f4f$eabf3c40$c03db4c0$@org>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
Message-ID: <20080215150855.60590@gmx.net>

Hi!
> 
> I'm a new python user, so pardon my simple question.  I'd like to
> do some simple raster math within Python.  For example, I'd like
> to read in 2 Geotiffs and add one to the other -- creating a new
> output Geotiff.  I've experimented with the gdal and Numpy
> libraries, but I haven't made much progress on my own.  Can
> somebody send me some example code?

I do this all the time, and I am yet to find a better combination than Python + gdal, so that's good news!

To read data in (I am still using the old generation Python bindings):
import gdal
#fname is the file you want to read in, e.g. fname="thingy.tif"
g = gdal.Open(fname)
data = numpy.array(g.GetRasterBand(1).ReadAsArray().tolist())
#The previous line converts the oldgen python Numeric array into a 
#spanking numpy array.
data= numpy.where(numpy.isnan(data),0.0, data)#... which you can use
#normally here.

In order to write a file, I have a function that just does that. Note that I do analyses on overlapping regions, with the same projections and so on and so forth, so it is specialised, but you can tailor it to your needs:

def WriteRaster (dst_filename, raster):
	import osr
	format = "GTiff"
	driver = gdal.GetDriverByName( format )
	dst_ds = driver.Create( dst_filename, 71, 73,\
               1,gdal.GDT_Float32,options=["COMPRESS=PACKBITS","TFW=YES"] )
	dst_ds.SetGeoTransform( [-19.5, 1.0, 0.0, 37.5, 0.0, -1.0] )
	srs = osr.SpatialReference()
	srs.ImportFromEPSG(4326) #WGS84 lat long.
	dst_ds.SetProjection( srs.ExportToWkt() )
	dst_ds.GetRasterBand(1).WriteArray( raster )
	dst_ds = None

Hope that helps!
Jose
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
From lran at unc.edu  Fri Feb 15 10:04:02 2008
From: lran at unc.edu (Limei Ran)
Date: Fri Feb 15 10:09:03 2008
Subject: [gdal-dev] size limit in using gdal_translate
Message-ID: <20080215100402.v581hptuasss0o0c@webmail5.isis.unc.edu>


Hi Frank,

Thank you for your help on creating a raster file from polygons.

I am creating a big file using gdal_translate and I got the following message:
===================================
gdal_translate landcover.img -a_ullr -1170075 3217665 2324145 188865 
-scale 0 255 0 0 -outsize 116474 100960 test.img
Input file size is 33146, 52402
0ERROR 6: A 116474 pixels x 100960 lines x 1 bands Byte image would be 
larger than 4GB
but this is the largest size a TIFF can be.  Creation failed.
===================================

Is there any way I can create this raster (other formats) without this 
space limitation?

Thanks,

Limei
From josegomez at gmx.net  Fri Feb 15 10:18:56 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Fri Feb 15 10:18:59 2008
Subject: [gdal-dev] beginners programming questions
In-Reply-To: <fp3osr$5iu$1@ger.gmane.org>
References: <fp3osr$5iu$1@ger.gmane.org>
Message-ID: <20080215151856.261310@gmx.net>

Hi,
> 1. accessing the cell value of a (float) tiff. I know how to load the 
> map into an array, but this seems to be overkill.

You can read single pixel values or "spectra" (if the image has several bands, you can read all the different bands' values for a particular location). Sample function:

def read_one_pixel (row, col, fname, dtype):
        g = gdal.Open ( fname )
        values = g.ReadRaster( row, col, 1, 1)
        values_f = unpack (dtype*g.RasterCount, values)
        return values_f

> 2. can I get the surrounding cells or better directly (bilinear/cubic) 
> interpolated data? I want to extract the elevation for GPS points, but 
> only the cell value looks not so nice in 3D model as there also 
> interpolation between the heights is done.

Once you have your data points, you can interpolation using numpy/scipy, it's got a large number of interpolators. The choice will depend on many things, but here's some cookbook guidance: <http://scipy.org/Cookbook/Interpolation>
Alternatively, RBFs are also supported:
<http://scipy.org/Cookbook/RadialBasisFunctions>


> 3. can I extract height profiles along a line between two points?

Read the whole array in, and use something like numpy.take().
 
> 4. can I change the resolution of the input map directly in python (as 
> replacement of gdal_translate -tr)?

See answer to Q. 2.

Jose
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer
From wollez at gmx.net  Fri Feb 15 10:21:55 2008
From: wollez at gmx.net (WolfgangZ)
Date: Fri Feb 15 10:22:15 2008
Subject: [gdal-dev] Re: size limit in using gdal_translate
In-Reply-To: <20080215100402.v581hptuasss0o0c@webmail5.isis.unc.edu>
References: <20080215100402.v581hptuasss0o0c@webmail5.isis.unc.edu>
Message-ID: <fp4amj$8jt$1@ger.gmane.org>

Limei Ran schrieb:
> 
> Hi Frank,
> 
> Thank you for your help on creating a raster file from polygons.
> 
> I am creating a big file using gdal_translate and I got the following 
> message:
> ===================================
> gdal_translate landcover.img -a_ullr -1170075 3217665 2324145 188865 
> -scale 0 255 0 0 -outsize 116474 100960 test.img
> Input file size is 33146, 52402
> 0ERROR 6: A 116474 pixels x 100960 lines x 1 bands Byte image would be 
> larger than 4GB
> but this is the largest size a TIFF can be.  Creation failed.
> ===================================
> 
> Is there any way I can create this raster (other formats) without this 
> space limitation?
> 
> Thanks,
> 
> Limei
hi,

try it with these additional create options:
-co BIGTIFF=YES -co TILED=YES

BIGTIFF allows you to exceed the 4GB
TILED should speed up the reading of the output file as reading of small 
parts of the image

Have a look at http://www.gdal.org/frmt_gtiff.html for other create 
options for the tiff format and http://www.gdal.org/formats_list.html 
gives you a hint of the maximum file size

regards
Wolfgang

From estrada.adam at gmail.com  Fri Feb 15 10:31:57 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Fri Feb 15 10:32:01 2008
Subject: [gdal-dev] Re: size limit in using gdal_translate
In-Reply-To: <fp4amj$8jt$1@ger.gmane.org>
References: <20080215100402.v581hptuasss0o0c@webmail5.isis.unc.edu> 
	<fp4amj$8jt$1@ger.gmane.org>
Message-ID: <6eda312e-a26f-4d25-976e-fa7ebec2b50b@i7g2000prf.googlegroups.com>

Limei,
     Gdal_translate defaults the output file to GeoTIFF unless you
specify that it is another file type.  You can do this by using the
argument ( -of )  which in this case will be HFA  (-of HFA).  The way
you currently have your command line configured, the output file will
still be a TIFF even though you have specified that the extension
is .img.  An ERDAS IMAGINE .img can and will create files that far
exceed 4 gigs.

Regards,
AWE


On Feb 15, 10:21?am, WolfgangZ <wol...@gmx.net> wrote:
> Limei Ran schrieb:
>
>
>
>
>
> > Hi Frank,
>
> > Thank you for your help on creating a raster file from polygons.
>
> > I am creating a big file using gdal_translate and I got the following
> > message:
> > ===================================
> > gdal_translate landcover.img -a_ullr -1170075 3217665 2324145 188865
> > -scale 0 255 0 0 -outsize 116474 100960 test.img
> > Input file size is 33146, 52402
> > 0ERROR 6: A 116474 pixels x 100960 lines x 1 bands Byte image would be
> > larger than 4GB
> > but this is the largest size a TIFF can be. ?Creation failed.
> > ===================================
>
> > Is there any way I can create this raster (other formats) without this
> > space limitation?
>
> > Thanks,
>
> > Limei
>
> hi,
>
> try it with these additional create options:
> -co BIGTIFF=YES -co TILED=YES
>
> BIGTIFF allows you to exceed the 4GB
> TILED should speed up the reading of the output file as reading of small
> parts of the image
>
> Have a look athttp://www.gdal.org/frmt_gtiff.htmlfor other create
> options for the tiff format andhttp://www.gdal.org/formats_list.html
> gives you a hint of the maximum file size
>
> regards
> Wolfgang
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev- Hide quoted text -
>
> - Show quoted text -
From wollez at gmx.net  Fri Feb 15 10:31:50 2008
From: wollez at gmx.net (WolfgangZ)
Date: Fri Feb 15 10:32:09 2008
Subject: [gdal-dev] Re: beginners programming questions
In-Reply-To: <20080215151856.261310@gmx.net>
References: <fp3osr$5iu$1@ger.gmane.org> <20080215151856.261310@gmx.net>
Message-ID: <fp4b98$atm$1@ger.gmane.org>

Jose Luis Gomez Dans schrieb:
> Hi,
>> 1. accessing the cell value of a (float) tiff. I know how to load the 
>> map into an array, but this seems to be overkill.
> 
> You can read single pixel values or "spectra" (if the image has several bands, you can read all the different bands' values for a particular location). Sample function:
> 
> def read_one_pixel (row, col, fname, dtype):
>         g = gdal.Open ( fname )
>         values = g.ReadRaster( row, col, 1, 1)
>         values_f = unpack (dtype*g.RasterCount, values)
>         return values_f
> 
>> 2. can I get the surrounding cells or better directly (bilinear/cubic) 
>> interpolated data? I want to extract the elevation for GPS points, but 
>> only the cell value looks not so nice in 3D model as there also 
>> interpolation between the heights is done.
> 
> Once you have your data points, you can interpolation using numpy/scipy, it's got a large number of interpolators. The choice will depend on many things, but here's some cookbook guidance: <http://scipy.org/Cookbook/Interpolation>
> Alternatively, RBFs are also supported:
> <http://scipy.org/Cookbook/RadialBasisFunctions>
> 
> 
>> 3. can I extract height profiles along a line between two points?
> 
> Read the whole array in, and use something like numpy.take().
>  
>> 4. can I change the resolution of the input map directly in python (as 
>> replacement of gdal_translate -tr)?
> 
> See answer to Q. 2.
> 
> Jose

Hi Jose,
thanks for your answer! I thought some functionality is already included 
in gdal that was why I was asking, but it seems that I have to use Numpy 
to do that. I already used on of the Scipy Cookbook examples some time 
ago, but I will look into that again.
Many thanks
Wolfgang

From mattia.parigiani at gmail.com  Fri Feb 15 11:55:26 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Fri Feb 15 11:55:29 2008
Subject: [gdal-dev] Extracting an 8bit raster image from a 16bit unsigned
	int HDF dataset
Message-ID: <6b6f1c810802150855w815d8bej355d8b3c694c32e7@mail.gmail.com>

HEllo,

I try the following:

 gdal_translate -ot Byte -b 1 -b 2 -b 3 HDF4_SDS:UNKNOWN:"
AMOD021KM20070104035343.hdf":0 123.tif

where the subdataset is an SDS formed of 15 visible bands where each pixel
is a 16 bit unsigned integer..
My output tiff image is a blank white one .. can anyone tell me where the
problem could be??

Is there a way of converting such 16bit images to 8 bit ones without loss??


-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080215/c864d693/attachment.html
From Chris.Barker at noaa.gov  Fri Feb 15 12:44:31 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Fri Feb 15 12:43:44 2008
Subject: [gdal-dev] basic raster math
In-Reply-To: <47B534A8.8000708@tkk.fi>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
	<C4B4AE54-DDCB-463A-B900-142D9822801C@unh.edu>
	<47B4B7B3.1030506@noaa.gov> <47B534A8.8000708@tkk.fi>
Message-ID: <47B5CF7F.9000009@noaa.gov>

Ari Jolma wrote:
>> numpy_array = band.ReadAsArray()
> 
> Just to make sure, I guess this reads the whole thing into memory?

yes.

> I.e.  don't try this with huge images.

well, you can TRY it ;-)

ReadAsArray() supports accessing a subset of the band as well, if you 
want to work with monster images in chunks.

WolfgangZ wrote:
> 1. accessing the cell value of a (float) tiff. I know how to load the 
> map into an array, but this seems to be overkill.

As above, ReadAsArray can load a subset of the band, presumable 
including a single cell. You could use ReadRaster too, as there isn't 
much point to using arrays for a single value.

> 2. can I get the surrounding cells or better directly (bilinear/cubic) 
> interpolated data?

same as above! ReadAsArray will also re-scale for you.

My Question: can I control what re-scaling algorithm is used?

> 4. can I change the resolution of the input map directly in python (as 
> replacement of gdal_translate -tr)?

I think you can use ReadAsArray/WriteAsArray to do this too.

Jose Luis Gomez Dans wrote:
> data = numpy.array(g.GetRasterBand(1).ReadAsArray().tolist())
> #The previous line converts the oldgen python Numeric array into a 
> #spanking numpy array.

This is far less efficient than you need!

data = numpy.asarray(g.GetRasterBand(1).ReadAsArray())

should to it, and without any memory copying!

If that fails, then numpy.fromstring( array.tostring() )would be a lot 
better than tolist()


> 	dst_ds.GetRasterBand(1).WriteArray( raster )

This is the key line -- thanks!

This really points out that we need some Recipe pages in the Wiki for 
Python/GDAL -- anyone want to get that started?

While we're on the topic -- what are the plans for numpy vs. Numeric? It 
looks like the current utilities and samples all allow either one -- I'd 
like to see a switch to only-numpy at some point -- the sooner the 
better. It's what's supported now, and it does have small but subtle and 
useful differences.

Also -- are there any Python API docs out there that I haven't found? If 
not, we could use them -- maybe doc strings and some auto-generation 
tool, like pydoc or Doxygen. What is being used for the C/C++?

Robin Dunn (of wxPython) has done some nice work of auto-generating docs 
strings as part of the SWIG process -- perhaps we could borrow that 
approach.

-Chris








-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From hobu.inc at gmail.com  Fri Feb 15 12:54:33 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Feb 15 12:56:15 2008
Subject: [gdal-dev] Numpy in GDAL (was: basic raster math)
In-Reply-To: <47B5CF7F.9000009@noaa.gov>
References: <006501c86f4f$eabf3c40$c03db4c0$@org>
	<C4B4AE54-DDCB-463A-B900-142D9822801C@unh.edu>
	<47B4B7B3.1030506@noaa.gov> <47B534A8.8000708@tkk.fi>
	<47B5CF7F.9000009@noaa.gov>
Message-ID: <5F254664-DA6D-460B-8643-C0C361CCF1D7@gmail.com>


On Feb 15, 2008, at 11:44 AM, Christopher Barker wrote:
>
> This really points out that we need some Recipe pages in the Wiki  
> for Python/GDAL -- anyone want to get that started?
>
> While we're on the topic -- what are the plans for numpy vs.  
> Numeric? It looks like the current utilities and samples all allow  
> either one -- I'd like to see a switch to only-numpy at some point  
> -- the sooner the better. It's what's supported now, and it does  
> have small but subtle and useful differences.
>

This is not completely accurate, but the code isn't very clear  
either.  All of the utilities and samples support both to be able to  
use both the old-gen and next-gen bindings, but it's an either/or  
proposition.  You're either using next-gen with numpy, or old-gen with  
Numeric.  ReadAsArray in the next-gen bindings, for example, is only  
going to return you a numpy array.  The reason for not totally  
switching the examples and utilities to next-gen is FWTools still  
needs old-gen support.


> Also -- are there any Python API docs out there that I haven't  
> found? If not, we could use them -- maybe doc strings and some auto- 
> generation tool, like pydoc or Doxygen. What is being used for the C/ 
> C++?
>
> Robin Dunn (of wxPython) has done some nice work of auto-generating  
> docs strings as part of the SWIG process -- perhaps we could borrow  
> that approach.


I use swig+doxygen to generate the docs for ogr.py from the C API, but  
I haven't gotten to gdal.py yet.  A downside of the approach I've  
taken is that it requires manually mapping C API -> Python API method  
names so that swig can match up what to put where.  For OGR, the  
classes and method calls are pretty consistent, but on the GDAL side,  
what we do in Python is quite different than the C API.

If someone has a patch for manual docstrings for gdal.py etc, please  
file it in Trac and I'll ensure that they get included as part of the  
swig generation process.

From desch-mosher at lanl.gov  Fri Feb 15 13:24:33 2008
From: desch-mosher at lanl.gov (Diana Esch-Mosher)
Date: Fri Feb 15 13:24:42 2008
Subject: [gdal-dev] gdalwarp rather than gdal_translate
In-Reply-To: <47B4AABA.60608@lanl.gov>
References: <47B1176D.9060304@lanl.gov>
	<47B1225E.6000005@pobox.com>	<47B1D9C3.1030101@lanl.gov>
	<47B22202.10408@pobox.com> <47B4AABA.60608@lanl.gov>
Message-ID: <47B5D8E1.1020601@lanl.gov>

Frank,

So I have I done something incorrectly?

                    ds=gdal.Open(image) # image is a BIG nitf
                    band=ds.GetRasterBand(1)
                    sizeX= ds.RasterXSize
                    sizeY= ds.RasterYSize
                    driver=gdal.GetDriverByName('GTiff')
                    sizeXNew = int(math.ceil(factor*sizeX))
                    sizeYNew = int(math.ceil(factor*sizeY))
                    resampledFile=driver.Create(outFilename, sizeXNew, 
sizeYNew, bands=1, datatype=band.DataType)
                    resampledFile.SetProjection(ds.GetProjection())
                    resampledFile.SetGeoTransform(ds.GetGeoTransform())
                    resampledFile.SetMetadata(ds.GetMetadata())
                    cmd = string.join(["gdalwarp -rc" ,image,outFilename])
                    p = subprocess.Popen(cmd, 
shell=True,stdout=subprocess.PIPE, stderr=subprocess.PIPE)
                    (stdout, stderr) = p.communicate(input=None)


Diana Esch-Mosher wrote:
> Frank,
>
> Well, this isn't quite doing what I thought. It is no longer 
> transforming the file (yeah!)  but is not resampling to the new size. 
> If I give it a new size, say slightly smaller (I'm trying to resample 
> to a common GSD), then it just crops the image to the new smaller 
> size, rather than downsizing. FYI, I'm using 1.3.2.0 ..... is that a 
> problem? Same goes for making a larger image, it is not resampling to 
> a larger size, and additionally it is washing it out.
>
> Thanks,
>
> Diana
>
> Frank Warmerdam wrote:
>> Diana Esch-Mosher wrote:
>>> I looked at gdalwarp and I see where it checks to see if the 
>>> destination file exists, if so then it reads the TargetSRS from that 
>>> dataset. So I should pre-create to the target size that I am 
>>> requesting in gdalwarp? I have no problem in python  pre-creating 
>>> the file, copying the metadata, geotransform, and projection data 
>>> ... anything else I should copy? Then I just call gdalwarp as 
>>> gdalwarp -rcs -ts x y -of  NITF (or any other -of  I want).
>>
>> Diana,
>>
>> Right, except of course you don't specify parameters used to create the
>> file (like -of or -ts).
>>
>> Best regards,
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Feb 15 13:38:02 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 15 13:38:42 2008
Subject: [gdal-dev] gdalwarp rather than gdal_translate
In-Reply-To: <47B5D8E1.1020601@lanl.gov>
References: <47B1176D.9060304@lanl.gov> <47B1225E.6000005@pobox.com>
	<47B1D9C3.1030101@lanl.gov> <47B22202.10408@pobox.com>
	<47B4AABA.60608@lanl.gov> <47B5D8E1.1020601@lanl.gov>
Message-ID: <47B5DC0A.9070806@pobox.com>

Diana Esch-Mosher wrote:
> Frank,
> 
> So I have I done something incorrectly?
> 
>                    ds=gdal.Open(image) # image is a BIG nitf
>                    band=ds.GetRasterBand(1)
>                    sizeX= ds.RasterXSize
>                    sizeY= ds.RasterYSize
>                    driver=gdal.GetDriverByName('GTiff')
>                    sizeXNew = int(math.ceil(factor*sizeX))
>                    sizeYNew = int(math.ceil(factor*sizeY))
>                    resampledFile=driver.Create(outFilename, sizeXNew, 
> sizeYNew, bands=1, datatype=band.DataType)
>                    resampledFile.SetProjection(ds.GetProjection())
>                    resampledFile.SetGeoTransform(ds.GetGeoTransform())
>                    resampledFile.SetMetadata(ds.GetMetadata())
>                    cmd = string.join(["gdalwarp -rc" ,image,outFilename])
>                    p = subprocess.Popen(cmd, 
> shell=True,stdout=subprocess.PIPE, stderr=subprocess.PIPE)
>                    (stdout, stderr) = p.communicate(input=None)

Diana,

You need to adjust the pixel size in the geotransform to the same degree
that the image size in pixels and lines is being adjusted.


This code in gdal_translate.cpp accomplishes it in that context, though
it is more complicated than you will need since it also accounts for
subwindowing.

     else if( GDALGetGeoTransform( hDataset, adfGeoTransform ) == CE_None
         && nGCPCount == 0 )
     {
         adfGeoTransform[0] += anSrcWin[0] * adfGeoTransform[1]
             + anSrcWin[1] * adfGeoTransform[2];
         adfGeoTransform[3] += anSrcWin[0] * adfGeoTransform[4]
             + anSrcWin[1] * adfGeoTransform[5];

         adfGeoTransform[1] *= anSrcWin[2] / (double) nOXSize;
         adfGeoTransform[2] *= anSrcWin[3] / (double) nOYSize;
         adfGeoTransform[4] *= anSrcWin[2] / (double) nOXSize;
         adfGeoTransform[5] *= anSrcWin[3] / (double) nOYSize;

         poVDS->SetGeoTransform( adfGeoTransform );
     }

Keep in mind that the geotransform is essentially an origin and pixel
size - not extents.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Feb 15 12:08:53 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 15 14:39:54 2008
Subject: [gdal-dev] Extracting an 8bit raster image from a 16bit unsigned
	int HDF dataset
In-Reply-To: <6b6f1c810802150855w815d8bej355d8b3c694c32e7@mail.gmail.com>
References: <6b6f1c810802150855w815d8bej355d8b3c694c32e7@mail.gmail.com>
Message-ID: <47B5C725.3040508@pobox.com>

mattia wrote:
> HEllo,
> 
> I try the following:
> 
>  gdal_translate -ot Byte -b 1 -b 2 -b 3 
> HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":0 123.tif
> 
> where the subdataset is an SDS formed of 15 visible bands where each 
> pixel is a 16 bit unsigned integer..
> My output tiff image is a blank white one .. can anyone tell me where 
> the problem could be??
> 
> Is there a way of converting such 16bit images to 8 bit ones without loss??

Mattia,

Generally speaking you cannot convert 16bit to 8bit without loss.  Do you know
the data range of the data?  The simplest approach is to use GDAL autoscalling
to rescale the data to 8bit but that may not give the best visual results.

eg.

  gdal_translate -ot Byte -scale -b 1 -b 2 -b 3
     HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":0 123.tif

You can read about the -scale switch in the gdal_translate docs.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Mario.Beaulieu at crim.ca  Fri Feb 15 15:29:12 2008
From: Mario.Beaulieu at crim.ca (mario beaulieu)
Date: Fri Feb 15 15:29:17 2008
Subject: [gdal-dev] Some questions ...
Message-ID: <2450F0BD-32BE-4A30-892D-26AC21C4D376@corpo.crim.ca>

GDAL version 1.5

I have 2 questions.

1) I want to add a raster band to a GEOTIFF dataset.  Is there any  method to do it since the driver seem not to support the AddBand method?

        ERROR 6: Dataset does not support the AddBand() method.

2) I want to create 1 BBP raster band and save it in TIFF.  How can I do?

-------------------------------------------------------------
Mario Beaulieu
Agent de recherche
?quipe Vision et imagerie
CRIM (Centre de recherche informatique de Montr?al / 
Computer Research Institute of Montreal)
514 840-1235, poste 2478
Mario.Beaulieu@crim.ca
www.crim.ca
-------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080215/5a48989a/attachment.html
From Chris.Barker at noaa.gov  Fri Feb 15 16:52:58 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Fri Feb 15 16:52:10 2008
Subject: [gdal-dev] Converting palette image to RBG
In-Reply-To: <47B3EC49.1010303@free.fr>
References: <47B39129.70900@noaa.gov> <47B3EC49.1010303@free.fr>
Message-ID: <47B609BA.1060303@noaa.gov>

Jean-Claude Repetto wrote:
> I am using ImageMagick :
> convert paletted-image.png -type TrueColor rgb-image.png

well, yes, but I need to do this inside a program, with a subset of the 
entire image, which brings me to:

Frank Warmerdam wrote:
> In fact, it only exists as a python utility in GDAL: pct2rgb.py

Thanks Frank. I've taken a look at that, and I can adapt the code. 
However, this is my use case:

I'm using GDAL to build a mini-map viewer. I need to be able to pull 
pieces of a map out of a gdal.RasterBand, rescale it to a new size, and 
then make it an RGB image.

The other option is to convert the whole thing to RGB, and then do the 
sub-sampling and re-scaling with that (and PIL or wxPython tools). 
However these are big images and I'd rather not have all that data in 
memory as RGB -- the 8-bit format is 1/3 the size.

As I'm doing this on the fly, I'd like it to be fast -- the pct2rgb.py 
code uses numpy, but it looks like it's processing the image line by 
line, and also looping through the color table. I need to do more 
testing to see if this is really too slow, but it would be nice to have 
all that looping in C -- and I can't be the only one that would use such 
functionality.

Another thought -- my workflow may be a bad idea anyway -- should I 
convert to RBG first, and then re-scale it? You must not be able to 
interpolate smoothly with a palleted image..

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Fri Feb 15 17:21:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 15 17:21:50 2008
Subject: [gdal-dev] Converting palette image to RBG
In-Reply-To: <47B609BA.1060303@noaa.gov>
References: <47B39129.70900@noaa.gov> <47B3EC49.1010303@free.fr>
	<47B609BA.1060303@noaa.gov>
Message-ID: <47B61068.7080309@pobox.com>

Christopher Barker wrote:
> As I'm doing this on the fly, I'd like it to be fast -- the pct2rgb.py 
> code uses numpy, but it looks like it's processing the image line by 
> line, and also looping through the color table. I need to do more 
> testing to see if this is really too slow, but it would be nice to have 
> all that looping in C -- and I can't be the only one that would use such 
> functionality.

Chris,

The Numeric.take() directive should be a fast way to do lookups, and
one whole scanline at a time is handled rather than looping over the
pixels. So I think that pct2rgb.py is pretty fast.

Of course, it is also easy to replicate the capability in C.

> Another thought -- my workflow may be a bad idea anyway -- should I 
> convert to RBG first, and then re-scale it? You must not be able to 
> interpolate smoothly with a palleted image..

If  you want any resampling kernel other than nearest neighbour you
would need to convert to RGB before resampling.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Feb 15 17:23:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 15 17:23:51 2008
Subject: [gdal-dev] Some questions ...
In-Reply-To: <2450F0BD-32BE-4A30-892D-26AC21C4D376@corpo.crim.ca>
References: <2450F0BD-32BE-4A30-892D-26AC21C4D376@corpo.crim.ca>
Message-ID: <47B610E0.8070407@pobox.com>

mario beaulieu wrote:
> GDAL version 1.5
>  
> I have 2 questions.
>  
> 1) I want to add a raster band to a GEOTIFF dataset.  Is there any  
> method to do it since the driver seem not to support the AddBand method?
>  
>         ERROR 6: Dataset does not support the AddBand() method.

Mario,

The AddBand() method is the correct method, but hardly any drivers support
adding a band to an existing dataset. I suspect the MEM and VRT drivers
are the only ones that currently support it.

> 2) I want to create 1 BBP raster band and save it in TIFF.  How can I do?

Pass the creation option NBITS=1 to the GTiff driver Create/CreateCopy
methods.  Note, this may not work properly in pre-GDAL/OGR 1.5 versions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From even.rouault at mines-paris.org  Fri Feb 15 17:40:23 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Feb 15 17:40:29 2008
Subject: [gdal-dev] Some questions ...
In-Reply-To: <47B610E0.8070407@pobox.com>
References: <2450F0BD-32BE-4A30-892D-26AC21C4D376@corpo.crim.ca>
	<47B610E0.8070407@pobox.com>
Message-ID: <200802152340.24287.even.rouault@mines-paris.org>

If you need to add a new band to a GeoTIFF dataset, the only solution that 
comes to mind is to create a new dataset with N+1 bands, and copy the content 
of the N first bands of the source datasets in it.

Le Friday 15 February 2008 23:23:28 Frank Warmerdam, vous avez ?crit?:
> mario beaulieu wrote:
> > GDAL version 1.5
> >
> > I have 2 questions.
> >
> > 1) I want to add a raster band to a GEOTIFF dataset.  Is there any
> > method to do it since the driver seem not to support the AddBand method?
> >
> >         ERROR 6: Dataset does not support the AddBand() method.
>
> Mario,
>
> The AddBand() method is the correct method, but hardly any drivers support
> adding a band to an existing dataset. I suspect the MEM and VRT drivers
> are the only ones that currently support it.
>
> > 2) I want to create 1 BBP raster band and save it in TIFF.  How can I do?
>
> Pass the creation option NBITS=1 to the GTiff driver Create/CreateCopy
> methods.  Note, this may not work properly in pre-GDAL/OGR 1.5 versions.
>
> Best regards,


From mattia.parigiani at gmail.com  Sat Feb 16 08:46:02 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Sat Feb 16 08:46:04 2008
Subject: [gdal-dev] Creating RGB from single band greyscale images
Message-ID: <6b6f1c810802160546u4766a9a2sfda492a0b28d0e6b@mail.gmail.com>

Hello

Is there a way in GDAL to create an RGB image by merging 3 different
greyscale bands??
I guess it would not be gdal_merge as this has to do with mosaicking...

Any suggestions?

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080216/c5e6f592/attachment.html
From mattia.parigiani at gmail.com  Sat Feb 16 10:10:00 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Sat Feb 16 10:10:05 2008
Subject: [gdal-dev] georeferencing / reprojecting HDF/GTiff
Message-ID: <6b6f1c810802160710g2a07bdah452b217e637be3a7@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdalinfo.out
Type: application/octet-stream
Size: 15705 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080216/aa0abddf/gdalinfo-0001.obj
From warmerdam at pobox.com  Sat Feb 16 10:14:20 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Feb 16 10:14:49 2008
Subject: [gdal-dev] Creating RGB from single band greyscale images
In-Reply-To: <6b6f1c810802160546u4766a9a2sfda492a0b28d0e6b@mail.gmail.com>
References: <6b6f1c810802160546u4766a9a2sfda492a0b28d0e6b@mail.gmail.com>
Message-ID: <47B6FDCC.4090807@pobox.com>

mattia wrote:
> Hello
> 
> Is there a way in GDAL to create an RGB image by merging 3 different 
> greyscale bands??
> I guess it would not be gdal_merge as this has to do with mosaicking...
> 
> Any suggestions?

Mattia,

Actually, gdal_merge.py also support "merging by stacking" with the
-separate flag.  So if you had three greyscale files that cover the
same area and you do:

  gdal_merge.py -separate 1.tif 2.tif 3.tif -o rgb.tif

This map 1.tif to red, 2.tif to green and 3.tif to blue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Sat Feb 16 10:45:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Feb 16 10:45:57 2008
Subject: [gdal-dev] georeferencing / reprojecting HDF/GTiff
In-Reply-To: <6b6f1c810802160710g2a07bdah452b217e637be3a7@mail.gmail.com>
References: <6b6f1c810802160710g2a07bdah452b217e637be3a7@mail.gmail.com>
Message-ID: <47B7051C.8000304@pobox.com>

mattia wrote:
> Hello all,
> 
> My current problem is one of reprojecting an HDF4 image dataset onto a 
> specific CRS.
> The data I have represent China, for this reason (ie: huge world area 
> extent) I will be reprojecting directly onto WGS84 latidute and 
> longitude system..
> 
> My first question is: Can I achieve this reprojection from a Tiff file 
> obtained from the HDF by gdal_translate (eg: an RGB image using 3 
> bands)? Or can I solely do this by using the HDF4 dataset?
> 
> Note: the output from gdalinfo on the HDF file reveals the two datasets 
> "Latitude" and "Longitude" (subsets 11 & 12, I attach in this email 
> gdalinfo.out which shows the whole output of the command)
> 
> The metadata also contains the corner coordinates of the image in 
> lat/long degrees:
>   EASTBOUNDINGCOORDINATE=134.930768655651
>   WESTBOUNDINGCOORDINATE=88.3307203917252
>   NORTHBOUNDINGCOORDINATE=64.7989342568829
>   SOUTHBOUNDINGCOORDINATE=20.7060304288409
> 
> 
> Before I start trying with gdalwarp (and any suggestions would be well 
> appreciated on how I should compose the command) I would just like to 
> clear up on a few confusions that I have.
> 
> The main one is that I dont know whether I need to somehow extract GCPs 
> out of the geo metadata in order to do the reprojection and how these 
> would come into play anyhow..

Mattia,

In theory you could just derive four GCPs from the corner points in
the GRINGPOINTLATITUDE/GRINGPOINTLONGITUDE metadata.  But I imagine
this would not be very precise given the large region covered.

You could inspect the latitude and longitude SDS'ses and derive
GCPs from them.  This was the traditional approach I used with datasets
like this.

The newer approach is to treat those subdatasets as "geolocation arrays".
The HDF4 driver will do this automatically for some products where
it recognises the geolocation arrays for what they are.  But apparently
this product is not recognised.  Actually, to confirm that you
would need to do a gdalinfo report on subdataset like:

   HDF4_SDS:UNKNOWN:"AMOD021KM20070104035343.hdf":0

If the driver doesn't recognise the geolocation arrays, it is still
possible to setup the relationships manually using a VRT file but it
is quite complicated.  I'm not willing to spend the time to explain
how this morning, but if you read the RFC on geolocation arrays, and
the tutorial on VRT files you might have enough info to see how to
piece it together.

The gdalwarp program (in 1.5) should support using geolocation arrays
for a warp, though it may used quite a lot of memory to do so.


> Another important thing is also that when I use gdal_translate to 
> convert to a GTiff format, if I add in the creation option -co 
> "TFW=YES", I will never get a World file with the georeferencing 
> information.. Any idea why this could be? I guess it could be because 
> the data is still in raw/swath format and cannot allow creation of a 
> georeferencing TFW file... but I am not sure about this yet..

Right, if there is no geotransform available then no .tfw is written
regardless of the tfw setting.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From 2voodoo at gmx.de  Sun Feb 17 07:20:55 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Sun Feb 17 07:20:47 2008
Subject: [gdal-dev] Again: WinCE related Problem regarding GeoTiff
Message-ID: <47B826A7.1030307@gmx.de>

Hello,

I asked this question about one month ago and found no solution with the 
help of you others, nor found I meanwhile other hints which lead to a 
solution. But thanks for trying :)
I ask again because Mateusz Loskot seems to be back again and has a 
deeper insight in things belonging to GDAL and WinCE.

One Month ago the subject was "Does CCITTFax-Compression of GeoTiffs 
work for you?"
This discussion can be found here: 
http://www.nabble.com/Does-CCITTFax-Compression-of-GeoTiffs-work-for-you--td14786109.html

The question behind this was that I use GDAL on WinCE for opening 
GeoTiffs. Unfortunately only uncompressed and LZW compressed images seem 
to work. All the others do not work.

So please do not see this as "spam", since I got a bit more hope in 
solving this problem with Mateusz ;)

Thanks in advance,
Tom
From nielslcr at gmail.com  Sun Feb 17 20:54:27 2008
From: nielslcr at gmail.com (niels hoffmann)
Date: Sun Feb 17 20:54:29 2008
Subject: [gdal-dev] problem getting ogr_csharp to work
In-Reply-To: <8a22209b0802171751g7dcef276ld0fb359d1074a2ff@mail.gmail.com>
References: <8a22209b0802171751g7dcef276ld0fb359d1074a2ff@mail.gmail.com>
Message-ID: <8a22209b0802171754o42241be4u325916f20631ed81@mail.gmail.com>

 Hi,

I have a problem getting the csharp binding to work.
I installed the latest FWTools 2.1.0 and I tried to explicitly add my
FWTools \bin dir to my path using the code snippet in the Q&A:
http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpUsage

I'm basically following the OGRGEOS.cs example:
Geometry g1 = Geometry.CreateFromWkt("POLYGON((0 0, 10 10, 10 0, 0 0))");

But I keep getting the following exception:

Unhandled Exception: System.TypeInitializationException: The type
initializer fo
r 'OSGeo.OGR.OgrPINVOKE' threw an exception. --->
System.TypeInitializationExcep
tion: The type initializer for 'SWIGExceptionHelper' threw an exception.
---> Sy
stem.DllNotFoundException: *Unable to load DLL 'ogr_wrap'*: The operating
system c
annot run . (Exception from HRESULT: 0x800700B6)
   at
OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Og
r(ExceptionDelegate applicationDelegate, ExceptionDelegate
arithmeticDelegate, E
xceptionDelegate divideByZeroDelegate, ExceptionDelegate
indexOutOfRangeDelegate
, ExceptionDelegate invalidOperationDelegate, ExceptionDelegate ioDelegate,
Exce
ptionDelegate nullReferenceDelegate, ExceptionDelegate outOfMemoryDelegate,
Exce
ptionDelegate overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.OGR.OgrPINVOKE..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.OGR.OgrPINVOKE.new_Geometry(Int32 jarg1, String jarg2, Int32
jarg3,
IntPtr jarg4, String jarg5)
   at OSGeo.OGR.Geometry..ctor(wkbGeometryType type, String wkt, Int32 wkb,
IntP
tr wkb_buf, String gml)
   at OSGeo.OGR.Geometry.CreateFromWkt(String wkt)
   at pgIntersectOGRGEOS.Program.Main(String[] args) in
D:\SVN_Work\trunk\Code\p
gIntersectOGRGEOS\pgIntersectOGRGEOS\Program.cs:line 23

Anybody got any ideas?

Cheers,
Niels Hoffmann
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080218/40822c6d/attachment.html
From yann.chemin at gmail.com  Mon Feb 18 02:16:54 2008
From: yann.chemin at gmail.com (Yann Chemin)
Date: Mon Feb 18 02:16:59 2008
Subject: [gdal-dev] TRMM subdataset reading in GDAL
Message-ID: <4f37eb890802172316m23b491e7p74560e41561431be@mail.gmail.com>

Hello list,

I have been trying to read subdatasets from TRMM 2B32 for some time now,
used gdalinfo: No chance, tried to install pyhdf: error on install (other
people report it too, no help online), only the dedicated C code in teh
program select_vNsds_linux dedicated to TRMM finds subdatasets and extracts
them to bin||ascii formats.

Since I would like to get this done in full Monthy language code and
python-gdal1.5.0 is not wired to this TRMM HDF dataset, I would like to ask
for help about finding the way to command gdal to read in some places in
HDF. Maybe this way I can find the subdataset list. I am ready to code it in
C if required.

Thanks,
Yann
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080218/5eac92e2/attachment.html
From marco.pasetti at alice.it  Mon Feb 18 05:10:02 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Mon Feb 18 05:10:05 2008
Subject: [gdal-dev] Windows (MSYS/MinGW) ./configure option doubt
Message-ID: <FBCMMO01rT1jypXrXee00016fd1@FBCMMO01.fbc.local>

Hi all,
 
I need to specify an external support for libz and libpng;
I have dlls in /usr/loca/lib, but I'm not sure if configure using:
 
--with-libz=/usr/local
 
or
 
--with-libz=/usr/local/lib
 
thanks for the help,
 
Marco
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080218/2bebb070/attachment.html
From cryan at csse.com.au  Mon Feb 18 06:21:05 2008
From: cryan at csse.com.au (Fodder)
Date: Mon Feb 18 06:21:06 2008
Subject: [Gdal-dev] Display Images in Different Projection (Concept)
Message-ID: <15542666.post@talk.nabble.com>


OK, So I'm pretty new to GDAL. Basically, I have an existing application and
I want to enable display of georeferenced images. I have an idea about how
I'm going to do it but I was hoping for some feedback before I dived in...

SO, let's say we have a project loaded with a north up projection A and an
image in a different projection B. We want to display the part of the image
that falls within the screen extents. My basic thinking is:
1) take the display extents and reproject them from B to the image
projection A. Use the well known text to identify the image projection. I
have code to convert the points.
2) convert these values to the pixel space (using the reverse of the 6
GeoTransform parameters)
3) take the minimum bounding rectangle of these four points
4) Read each band of the image section bounded by this rectange into a
buffer at a resolution equivalent to the resolution of the original display
(eg., m/pixel) using RasterIO
5) Now for each pixel in the original display work out the repreojected
coordinates (image projection B) then pixel coordinates, and then sample the
colour from the correct location in the buffer.

So this is basically what I had in mind, but I'm sure there must be a
better/easier/faster way. For example, I couldn't find the reverse equations
for the GeoTransform parmeters. I can work them out using simultaneous
equations but I'm guess since they're not out there I might be going about
this the wrong way.

Thanks for reading and replying (hopefully)

Cheers,
Fodder
-- 
View this message in context: http://www.nabble.com/Display-Images-in-Different-Projection-%28Concept%29-tp15542666p15542666.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mateusz at loskot.net  Mon Feb 18 06:23:51 2008
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon Feb 18 06:23:56 2008
Subject: [gdal-dev] Again: WinCE related Problem regarding GeoTiff
In-Reply-To: <47B826A7.1030307@gmx.de>
References: <47B826A7.1030307@gmx.de>
Message-ID: <47B96AC7.4020100@loskot.net>

Tom Kazimiers wrote:
> I ask again because Mateusz Loskot seems to be back again and has a 
> deeper insight in things belonging to GDAL and WinCE.

I'm not back yet, but only monitoring :-)

> So please do not see this as "spam", since I got a bit more hope in 
> solving this problem with Mateusz ;)

Tom, I've probably forgotten to debug this problem.
I remember I got some data from you but as I've checked I don't have 
them anymore on my disk.
So, may I ask you to resend me your test file?

I'll try to find out what's going wrong.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
From josegomez at gmx.net  Mon Feb 18 07:36:57 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Mon Feb 18 07:37:01 2008
Subject: [gdal-dev] Common installation on several machines
Message-ID: <20080218123657.155690@gmx.net>

Hi!
I have access to a set of identical linux machines, and an NFS-shared directory has been set up to store commonly used packages we users compile, so they can be used from all the machines. I am hoping to throw GDAL in there, but given that GDAL does use a lot of external libraries (say, for HDF files and so on), I was wondering whether I could compile a version which has these dependencies statically linked. There are options in the configure script, but I am not sure on which options are the ones that will work the magic.

Any hints?
Cheers,
Jose
-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
From 2voodoo at gmx.de  Mon Feb 18 08:44:04 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Mon Feb 18 08:44:04 2008
Subject: [gdal-dev] Again: WinCE related Problem regarding GeoTiff
Message-ID: <47B98BA4.2050303@gmx.de>

Mateusz Loskot schrieb:
> I'm not back yet, but only monitoring :-)
I'm glad you read this at all :-)
> Tom, I've probably forgotten to debug this problem.
> I remember I got some data from you but as I've checked I don't have 
> them anymore on my disk.
> So, may I ask you to resend me your test file?
>
> I'll try to find out what's going wrong.
I uploaded two files:
working_lzw.tif                
http://www.voodoo-arts.net/gdal/working_lzw.tif
notworking_ccittfax4.tif    
http://www.voodoo-arts.net/gdal/notworking_ccittfax4.tif

Like said before, I tested the files with gdal_translate and tryed 
different compressions - none, except for for lzw and no-compression, 
worked.

Thank you very much for your help,
Tom
From cheynm at yahoo.com  Mon Feb 18 10:07:51 2008
From: cheynm at yahoo.com (Mark Cheyne)
Date: Mon Feb 18 10:07:54 2008
Subject: [gdal-dev] problem getting ogr_csharp to work
In-Reply-To: <8a22209b0802171754o42241be4u325916f20631ed81@mail.gmail.com>
Message-ID: <799250.48058.qm@web32901.mail.mud.yahoo.com>

ahh...i'm all too familiar with 'unable to load xyz'
when using the c# wrap. you should find that file (and
other dependencies) in the FWTools /bin directory. the
easiest thing is to copy it to the directory that
contains your C# program's binaries. you might then
get a complaint about the next missing dependency, so
repeat. If using Visual Studio, you might consider
using a post-build event for this.

you might be able to avoid having to do the above if
you set your environment with a class like below that
Dave Baker on this list passed my way a few months
ago. However, I've had spotty results with that - It
may work great on machine X, but not Y. Overall, I've
had different deployment behavior on each of the 3 or
4 machines I've used OGR on. On one machine I even see
different behavior when running in the debugger (env
setup does not work) and not (it does). No pattern
yet, I just take it as an extra dose of
anti-alzheimers problem solving...

If you are writing Visual Studio 2005/2008 unit tests,
you are aware that each test run produces a new
directory. If your tests use the c# wrap, either your
environment needs to be set, or all the dependencies
need to get copied to the test directory. VS takes
care of copying direct references, but you may want to
look at specifying a deployment item via VS's
Test-Edit Test Run Configurations-Local Test Run menu.

I'll be happy to help more if it comes to it.

Mark

     /// <summary>
    /// A class used to set the FWtools environment
for the current
 process.
    /// </summary>
    public static class FWToolsEnvironment
    {
        private static bool isSet = false;

        public static void Set()
        {
            string fwDir =
System.Environment.GetEnvironmentVariable(@"FWTOOLS_OVERRIDE");
            if (fwDir == null)
                fwDir =
System.Environment.GetEnvironmentVariable(@"FWTOOLS_DIR");
            if (fwDir == null)
                using (RegistryKey rk =
Registry.LocalMachine.OpenSubKey(@"SOFTWARE\FWtools"))
                {
                    fwDir =
(string)rk.GetValue(@"Install_Dir");
                }
            Set(fwDir);
        }

        public static void Set(string fwtools_dir)
        {
            if (isSet) // we don't need to do this
again
                return;
            if (fwtools_dir == null) // not much to do
here so...
                return;

           
System.Environment.SetEnvironmentVariable(@"FWTOOLS_DIR",
fwtools_dir);

            string fwtbin = fwtools_dir + @"\bin;";
            string fwtpy = fwtools_dir + @"\python;";
            string path = "";
            path += fwtbin;
            path += fwtpy;
            path +=
System.Environment.GetEnvironmentVariable("PATH");
           
System.Environment.SetEnvironmentVariable(@"PATH",
path);
           
System.Environment.SetEnvironmentVariable(@"PYTHONPATH",
fwtools_dir + @"\pymod");
           
System.Environment.SetEnvironmentVariable(@"PROJ_LIB",
fwtools_dir + @"\proj_lib");
           
System.Environment.SetEnvironmentVariable(@"GEOTIFF_CSV",
fwtools_dir + @"\data");
           
System.Environment.SetEnvironmentVariable(@"GDAL_DATA",
fwtools_dir + @"\data");
          
 
System.Environment.SetEnvironmentVariable(@"GDAL_DRIVER_PATH",
fwtools_dir + @"\gdal_plugins");
            isSet = true;
        }
    }

--- niels hoffmann <nielslcr@gmail.com> wrote:

>  Hi,
> 
> I have a problem getting the csharp binding to work.
> I installed the latest FWTools 2.1.0 and I tried to
> explicitly add my
> FWTools \bin dir to my path using the code snippet
> in the Q&A:
> http://trac.osgeo.org/gdal/wiki/GdalOgrCsharpUsage
> 
> I'm basically following the OGRGEOS.cs example:
> Geometry g1 = Geometry.CreateFromWkt("POLYGON((0 0,
> 10 10, 10 0, 0 0))");
> 
> But I keep getting the following exception:
> 
> Unhandled Exception:
> System.TypeInitializationException: The type
> initializer fo
> r 'OSGeo.OGR.OgrPINVOKE' threw an exception. --->
> System.TypeInitializationExcep
> tion: The type initializer for 'SWIGExceptionHelper'
> threw an exception.
> ---> Sy
> stem.DllNotFoundException: *Unable to load DLL
> 'ogr_wrap'*: The operating
> system c
> annot run . (Exception from HRESULT: 0x800700B6)
>    at
>
OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Og
> r(ExceptionDelegate applicationDelegate,
> ExceptionDelegate
> arithmeticDelegate, E
> xceptionDelegate divideByZeroDelegate,
> ExceptionDelegate
> indexOutOfRangeDelegate
> , ExceptionDelegate invalidOperationDelegate,
> ExceptionDelegate ioDelegate,
> Exce
> ptionDelegate nullReferenceDelegate,
> ExceptionDelegate outOfMemoryDelegate,
> Exce
> ptionDelegate overflowDelegate, ExceptionDelegate
> systemExceptionDelegate)
>    at
> OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..cctor()
>    --- End of inner exception stack trace ---
>    at
> OSGeo.OGR.OgrPINVOKE.SWIGExceptionHelper..ctor()
>    at OSGeo.OGR.OgrPINVOKE..cctor()
>    --- End of inner exception stack trace ---
>    at OSGeo.OGR.OgrPINVOKE.new_Geometry(Int32 jarg1,
> String jarg2, Int32
> jarg3,
> IntPtr jarg4, String jarg5)
>    at OSGeo.OGR.Geometry..ctor(wkbGeometryType type,
> String wkt, Int32 wkb,
> IntP
> tr wkb_buf, String gml)
>    at OSGeo.OGR.Geometry.CreateFromWkt(String wkt)
>    at pgIntersectOGRGEOS.Program.Main(String[] args)
> in
> D:\SVN_Work\trunk\Code\p
> gIntersectOGRGEOS\pgIntersectOGRGEOS\Program.cs:line
> 23
> 
> Anybody got any ideas?
> 
> Cheers,
> Niels Hoffmann
> > _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


Mark Cheyne
(608) 332-2235 (cell)


      ____________________________________________________________________________________
Be a better friend, newshound, and 
know-it-all with Yahoo! Mobile.  Try it now.  http://mobile.yahoo.com/;_ylt=Ahu06i62sR8HDtDypao8Wcj9tAcJ 

From estrada.adam at gmail.com  Mon Feb 18 10:12:09 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Mon Feb 18 10:12:17 2008
Subject: [gdal-dev] .aux file creation
Message-ID: <b3161b42-e184-4f59-b0d1-15cd668f93b5@e6g2000prf.googlegroups.com>

All,
    I have a large amount of MrSID files that were created and are
without the corresponding .aux file.  Even though each MrSID is
properly projected and has the correct map information, ArcGIS (v 9.2)
still does not read it correctly and throws up a warning dialog
stating that there is no spatial reference.  Is there a way to batch
create these files using GDAL?  I see that gdaladdo will create
an .aux file but I belive that this is primarily for pyramid layers
for each image and of course this is not needed for MrSID.

AWE
From lran at unc.edu  Mon Feb 18 11:29:37 2008
From: lran at unc.edu (Limei Ran)
Date: Mon Feb 18 11:31:07 2008
Subject: [gdal-dev] Output format in using gdal_translate
Message-ID: <20080218112937.uyb92rp600oo0ogs@webmail4.isis.unc.edu>


Hi,

Thanks for all your help on using gdal_translate.  I was successful on 
creating a huge image with -of HFA.  I still have two questions about 
raster formats used in GDAL:

1. The utility created three output files:
out.ige, out.img, out.img.aux.xml.  What is .ige file (it is a huge 
file --  close to 12gb) since my input has only two files with .img and 
.rrd?

2. I am creating a raster file for some calculation.  So, formats do 
not matter as long as it is efficient in storing and accessing. Is any 
GDAL raster format with no Limit Size (such as ESRI .hdr Labelled) 
better than HFA format in storing and accessing?

Thanks,

Limei




Quoting estrada.adam:

> Limei,
>     Gdal_translate defaults the output file to GeoTIFF unless you
> specify that it is another file type.  You can do this by using the
> argument ( -of )  which in this case will be HFA  (-of HFA).  The way
> you currently have your command line configured, the output file will
> still be a TIFF even though you have specified that the extension
> is .img.  An ERDAS IMAGINE .img can and will create files that far
> exceed 4 gigs.
>
> Regards,
> AWE
>
>
> On Feb 15, 10:21 am, WolfgangZ <wol...@gmx.net> wrote:
>> Limei Ran schrieb:
>>
>>
>>
>>
>>
>> > Hi Frank,
>>
>> > Thank you for your help on creating a raster file from polygons.
>>
>> > I am creating a big file using gdal_translate and I got the following
>> > message:
>> > ===================================
>> > gdal_translate landcover.img -a_ullr -1170075 3217665 2324145 188865
>> > -scale 0 255 0 0 -outsize 116474 100960 test.img
>> > Input file size is 33146, 52402
>> > 0ERROR 6: A 116474 pixels x 100960 lines x 1 bands Byte image would be
>> > larger than 4GB
>> > but this is the largest size a TIFF can be.  Creation failed.
>> > ===================================
>>
>> > Is there any way I can create this raster (other formats) without this
>> > space limitation?
>>
>> > Thanks,
>>
>> > Limei
>>
>> hi,
>>
>> try it with these additional create options:
>> -co BIGTIFF=YES -co TILED=YES
>>
>> BIGTIFF allows you to exceed the 4GB
>> TILED should speed up the reading of the output file as reading of small
>> parts of the image
>>
>> Have a look athttp://www.gdal.org/frmt_gtiff.htmlfor other create
>> options for the tiff format andhttp://www.gdal.org/formats_list.html
>> gives you a hint of the maximum file size
>>
>> regards
>> Wolfgang
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev- 
>> Hide quoted text -
>>
>> - Show quoted text -
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From estrada.adam at gmail.com  Mon Feb 18 14:17:38 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Mon Feb 18 14:17:42 2008
Subject: [gdal-dev] Re: Output format in using gdal_translate
In-Reply-To: <20080218112937.uyb92rp600oo0ogs@webmail4.isis.unc.edu>
References: <20080218112937.uyb92rp600oo0ogs@webmail4.isis.unc.edu>
Message-ID: <eaf3ed43-a598-47c9-9518-de8a10ce21b2@d21g2000prf.googlegroups.com>

Limei,
    Please have a look at all the supported file formats listed here.

http://gdal.org/formats_list.html

AWE


On Feb 18, 11:29?am, Limei Ran <l...@unc.edu> wrote:
> Hi,
>
> Thanks for all your help on using gdal_translate. ?I was successful on
> creating a huge image with -of HFA. ?I still have two questions about
> raster formats used in GDAL:
>
> 1. The utility created three output files:
> out.ige, out.img, out.img.aux.xml. ?What is .ige file (it is a huge
> file -- ?close to 12gb) since my input has only two files with .img and
> .rrd?
>
> 2. I am creating a raster file for some calculation. ?So, formats do
> not matter as long as it is efficient in storing and accessing. Is any
> GDAL raster format with no Limit Size (such as ESRI .hdr Labelled)
> better than HFA format in storing and accessing?
>
> Thanks,
>
> Limei
>
> Quoting estrada.adam:
>
>
>
>
>
> > Limei,
> > ? ? Gdal_translate defaults the output file to GeoTIFF unless you
> > specify that it is another file type. ?You can do this by using the
> > argument ( -of ) ?which in this case will be HFA ?(-of HFA). ?The way
> > you currently have your command line configured, the output file will
> > still be a TIFF even though you have specified that the extension
> > is .img. ?An ERDAS IMAGINE .img can and will create files that far
> > exceed 4 gigs.
>
> > Regards,
> > AWE
>
> > On Feb 15, 10:21 am, WolfgangZ <wol...@gmx.net> wrote:
> >> Limei Ran schrieb:
>
> >> > Hi Frank,
>
> >> > Thank you for your help on creating a raster file from polygons.
>
> >> > I am creating a big file using gdal_translate and I got the following
> >> > message:
> >> > ===================================
> >> > gdal_translate landcover.img -a_ullr -1170075 3217665 2324145 188865
> >> > -scale 0 255 0 0 -outsize 116474 100960 test.img
> >> > Input file size is 33146, 52402
> >> > 0ERROR 6: A 116474 pixels x 100960 lines x 1 bands Byte image would be
> >> > larger than 4GB
> >> > but this is the largest size a TIFF can be. ?Creation failed.
> >> > ===================================
>
> >> > Is there any way I can create this raster (other formats) without this
> >> > space limitation?
>
> >> > Thanks,
>
> >> > Limei
>
> >> hi,
>
> >> try it with these additional create options:
> >> -co BIGTIFF=YES -co TILED=YES
>
> >> BIGTIFF allows you to exceed the 4GB
> >> TILED should speed up the reading of the output file as reading of small
> >> parts of the image
>
> >> Have a look athttp://www.gdal.org/frmt_gtiff.htmlforother create
> >> options for the tiff format andhttp://www.gdal.org/formats_list.html
> >> gives you a hint of the maximum file size
>
> >> regards
> >> Wolfgang
>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev-
> >> Hide quoted text -
>
> >> - Show quoted text -
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-...@lists.osgeo.org
> >http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev- Hide quoted text -
>
> - Show quoted text -
From warmerdam at pobox.com  Mon Feb 18 15:37:25 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 18 15:38:16 2008
Subject: [gdal-dev] Output format in using gdal_translate
In-Reply-To: <20080218112937.uyb92rp600oo0ogs@webmail4.isis.unc.edu>
References: <20080218112937.uyb92rp600oo0ogs@webmail4.isis.unc.edu>
Message-ID: <47B9EC85.9060302@pobox.com>

Limei Ran wrote:
> 
> Hi,
> 
> Thanks for all your help on using gdal_translate.  I was successful on 
> creating a huge image with -of HFA.  I still have two questions about 
> raster formats used in GDAL:
> 
> 1. The utility created three output files:
> out.ige, out.img, out.img.aux.xml.  What is .ige file (it is a huge file 
> --  close to 12gb) since my input has only two files with .img and .rrd?

Limei,

The .ige file is the image overflow file and is used to hold image data
larger than 2GB.

> 2. I am creating a raster file for some calculation.  So, formats do not 
> matter as long as it is efficient in storing and accessing. Is any GDAL 
> raster format with no Limit Size (such as ESRI .hdr Labelled) better 
> than HFA format in storing and accessing?

HFA format should be of comparible performance to other large file formats,
and in particular should provide good performance when selecting a subwindow
due to the tiling used.  ESRI .hdr labelled should also be similarly fast
for scanline by scanline access, but will have poorer performance if you
only try to access a subwindow area.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From gregor at hostgis.com  Mon Feb 18 15:57:38 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Mon Feb 18 15:57:43 2008
Subject: [gdal-dev] gdal_grid, what am I doing wrong?
Message-ID: <47B9F142.2050206@hostgis.com>

Hi, all. I'm a long-time fan of GDAL/OGR but have hit upon a problem and 
finally need to ask for help on something that has me stuck.

I have bathymetric data in GRB98 format, but can also export it in CSV 
format (simple lat, lon, depth) and stick a VRT on it. It's slow but 
effective. I can also use ogr2ogr to convert the VRT+CSV to a shapefile, 
which is less slow. This part seems flawless, and if I want the points 
rendered, Mapserver does that A-OK.

What we want is to rasterize it to a TIFF, containing actual data values 
in the pixels, filling in the gaps between these discrete sample points 
with a nearest-neighbor algorithm, and then using a VRT for colorization 
later. gdal_grid seemed the natural tool for this purpose, but all I 
ever get is a TIFF with all 0s across the board. What am I doing 
incorrectly?

This is an example of a 1-square-degree test swatch.

gdal_grid \
   -a nearest:radius1=0.0:radius2=0.0:angle=0.0:nodata=0.0 -l depth \
   -outsize 1201 1201 \
   -a_srs EPSG:4326 -tye 31.000000 32.000000 -txe -80.000000 -79.005833 \
   depth.shp depth.tif

Am I missing the detail of how to tell it which field/column we want to 
use for the pixel value? I didn't see that in gdal_grid's docs, and 
though the shapefile only has one field (field3, the depth) I have a 
feeling that it doesn't know to use that one.

-- 
Gregor Mosheh / Greg Allensworth, BS, A+
System Administrator
HostGIS cartographic development & hosting services
http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From nicholas.g.lawrence at mainroads.qld.gov.au  Mon Feb 18 17:51:45 2008
From: nicholas.g.lawrence at mainroads.qld.gov.au (nicholas.g.lawrence@mainroads.qld.gov.au)
Date: Mon Feb 18 17:51:59 2008
Subject: [gdal-dev] ERDAS Imagine to ERMapper
In-Reply-To: <OFA5717264.D74C3850-ON4A2573DB.001E28C2-4A2573DB.001EF840@transport.qld.gov.au>
Message-ID: <OF428D71E5.03CF4217-ON4A2573F3.007D6829-4A2573F3.007D9607@transport.qld.gov.au>

> > > > > Hello,
> > > > >
> > > > > I have a large (19 Gigabyte) erdas imagine file which I
> > > > want to bring into
> > > > > ERMapper.
> > > > >
> > > > > I have downloaded the minimalist windows executables from
> > > > > http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries
> > > > >
> > > > > I am running windows xp with 2 GB of RAM.
> > > > >
> > > > > I know I should use the gdal_translate command, but I am
> > > > unsure of the best
> > > > > output format.
> > > > >
> > > > > ecw won't work for the file size is too large.
> > > > >
> > > > > I thought GTiff would work, but I can't force BIGTIFF=YES
> > > > >
> > > > > Is there a plain old band-interleaved-by-line format
> > > > available?
> > > > >
> > > > > Regards,
> > > > > nick

> > > > Nick,

> > > > GDAL v1.5.0 has ERmapper's ERS/BIL format built-in.  You
> > > > could try that..

> > > > Brent Fraser

> > > Brent,

> > > I downloaded GDAL today, and according to the name of the
> > > zip file I do have v1.5

> > > But what is the short form of ERMapper's ERS/BIL format?
> > > I can not find it in the list of supported formats at
> > > http://www.gdal.org/formats_list.html

> > > Regards,
> > > nick

> > Me again.

> > I have found the short form for ERMapper's ERS/BIL format within
> > the help for gdal_translate itself.

> > I'm running the translate now. I'm guessing it will take hours
> > to complete.

> > Regards,
> > nick

> I should provide some background.

> I have an ERDAS Imagine file of 19 Gigabytes that I want to import
> into ERMapper. Two other files (next largest size is 16 Gigabytes)
> imported okay. I only have problems with the last image.

> The top half of the image is fine. The lower half is all black.

> My supplier can view the entire image at his end.

> I used ArcMap to open the image at my end and it is fine.

> This confirms that the file itself is okay.

> I downloaded GDAL v1.5 and used gdal_translate to go from
> ERDAS Imagine format to ERMapper format as I stated in my
> previous message.

> The processing has now finished, and the result is the same error
> of the lower half of the image being all black.

> So, GDAL is giving the same results for me as ERMapper does. But
> ArcMap displays it fine.

> Excuse me, I just thought of something.

> Okay, back again. I zoomed in with ArcMap, and after a while, the
> screen went all black. ERDAS Imagine has pyramid layers right? Is
> my problem that the pyramid layers are displaying fine but the
> lowest layer is bad? Is ArcMap initially displaying the pyramid
> layers whilst ERMapper and GDAL ignore the pyramid layers to
> access the raw data?

> Regards,
> nick

Problem solved.

The file was corrupt. I asked for it to be supplied a second time,
and the translation went fine.

Regards,
nick



***********************************************************************
WARNING: This e-mail (including any attachments) may contain legally
privileged, confidential or private information and may be protected by
copyright. You may only use it if you are the person(s) it was intended
to be sent to and if you use it in an authorised way.  No one is 
allowed to use, review, alter, transmit, disclose, distribute, print 
or copy this e-mail without appropriate authority.

If this e-mail was not intended for you and was sent to you by mistake,
please telephone or e-mail me immediately, destroy any hardcopies of
this e-mail and delete it and any copies of it from your computer
system. Any right which the sender may have under copyright law, and 
any legal privilege and confidentiality attached to this e-mail is not 
waived or destroyed by that mistake.

It is your responsibility to ensure that this e-mail does not contain
and is not affected by computer viruses, defects or interference by
third parties or replication problems (including incompatibility with
your computer system).

Opinions contained in this e-mail do not necessarily reflect the
opinions of the Queensland Department of Main Roads, Queensland
Transport or Maritime Safety Queensland, or endorsed organisations
utilising the same infrastructure.
***********************************************************************

From marco.pasetti at alice.it  Tue Feb 19 03:38:40 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Tue Feb 19 03:38:44 2008
Subject: [gdal-dev] Expat support on MinGW/MSYS
Message-ID: <FBCMMO02HKoFz6Tt6Zp0001e99e@FBCMMO02.fbc.local>

Hi,
 
I'm building GDAL 1.5.0 on Windows (XP SP2) using MSYS/MinGW environment;
I built Expat 2.0.1, but I cannot configure GDAL with Expat support.
I followed the BuildingWithMinGW Wiki (using pexports, libtool and perl commands), but it continues to find includes but not libraries!
 
Someone could help me please?
What happen if I disable Expat support?
 
Thanks for support,
 
Marco
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080219/bf5e0de8/attachment.html
From dron at ak4719.spb.edu  Tue Feb 19 05:33:57 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Feb 19 05:40:16 2008
Subject: [gdal-dev] gdal_grid, what am I doing wrong?
In-Reply-To: <47B9F142.2050206@hostgis.com>
References: <47B9F142.2050206@hostgis.com>
Message-ID: <20080219103357.GA16741@ak4719.spb.edu>

On Mon, Feb 18, 2008 at 01:57:38PM -0700, Gregor Mosheh wrote:
> What we want is to rasterize it to a TIFF, containing actual data
> values in the pixels, filling in the gaps between these discrete
> sample points with a nearest-neighbor algorithm, and then using a VRT
> for colorization later. gdal_grid seemed the natural tool for this
> purpose, but all I ever get is a TIFF with all 0s across the board.
> What am I doing incorrectly?
> 
> This is an example of a 1-square-degree test swatch.
> 
> gdal_grid \
>   -a nearest:radius1=0.0:radius2=0.0:angle=0.0:nodata=0.0 -l depth \
>   -outsize 1201 1201 \
>   -a_srs EPSG:4326 -tye 31.000000 32.000000 -txe -80.000000 -79.005833 \
>   depth.shp depth.tif

Gregor,

You are doing right, but there was a bug in NN interpolation method, so
it does not work as documented. Now fixed in both branches. See here for
reference:

 http://trac.osgeo.org/gdal/ticket/2237

Meantime you can workaround this bug using search radius bigger than
your area dimensions, e.g "radius1=2:radius2=2".

> Am I missing the detail of how to tell it which field/column we want
> to use for the pixel value? I didn't see that in gdal_grid's docs, and
> though the shapefile only has one field (field3, the depth) I have a
> feeling that it doesn't know to use that one.

As soon as you added approprite VRT to yuor CSV, there are no "columns"
anymore. ogrinfo shows available layers that you should pick up with the
"-l" option. If you want to check whether everything is working right
use ogrinfo to print layer values for manual control.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517
From gregor at hostgis.com  Tue Feb 19 11:49:20 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Tue Feb 19 11:49:23 2008
Subject: [gdal-dev] gdal_grid, what am I doing wrong?
In-Reply-To: <20080219103357.GA16741@ak4719.spb.edu>
References: <47B9F142.2050206@hostgis.com>
	<20080219103357.GA16741@ak4719.spb.edu>
Message-ID: <47BB0890.7010204@hostgis.com>

Ahhhh! Thanks a lot, Andrey. That clarifies things a lot!

> As soon as you added approprite VRT to yuor CSV, there are no "columns"
> anymore. ogrinfo shows available layers that you should pick up with the
> "-l" option.

Right. It presumably uses the "z" field as described in the VRT. Gotcha.

-- 
Gregor Mosheh / Greg Allensworth, BS, A+
System Administrator
HostGIS cartographic development & hosting services
http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From mchapman at texelinc.com  Tue Feb 19 14:06:50 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Tue Feb 19 14:07:00 2008
Subject: [gdal-dev] NITF 1.5.0 nodata value is wrong.
Message-ID: <004f01c8732a$971c3cd0$c554b670$@com>

All,

 

In an older version of GDAL the NITF driver reports the no data value of my
.ntf image as -10000000000.0.  The 1.5.0 NITF driver reports the no data
value on the same .ntf file as 216.0.  The correct value is -10000000000.0.
Does anyone have any idea why this is occuring? I will debug in the meantime
and share the fix if I find one.

 

Best regards,

Martin Chapman

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080219/eeec51c1/attachment.html
From even.rouault at mines-paris.org  Tue Feb 19 14:28:45 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 19 14:28:54 2008
Subject: [gdal-dev] NITF 1.5.0 nodata value is wrong.
In-Reply-To: <004f01c8732a$971c3cd0$c554b670$@com>
References: <004f01c8732a$971c3cd0$c554b670$@com>
Message-ID: <200802192028.46732.even.rouault@mines-paris.org>

Martin,

yes, there have been a few changes to improve the handling of NITF frames from 
CADRG products that might probably explain what you observe.
In fact if you look at NITFRasterBand::GetNoDataValue, you'll see that the 
value -1e10 means "nodata value not set". So -1e10 is (and was) definitely 
not a "correct value". You should first look at the value of  *pbSuccess to 
see if the return value of the method is valid or not.
That said, the value 216 was necessary to introduce so that CADRG files can 
handle transparency well. The empty 256 x 256 tiles are filled with the value 
216, so that we can know that it's nodata. Previous behaviour was to fill 
with indice 0, which is generally for the black color (0,0,0 RGB triplet).
Does this really cause a problem for you ? If you think so and can describe 
what is wrong (apart from the change in the result of GetNoDataValue), 
sending the result of gdalinfo on it, or best the whole file, could help to 
understand what happens.

Best regards,
Even

Le Tuesday 19 February 2008 20:06:50 Martin Chapman, vous avez ?crit?:
> All,
>
>
>
> In an older version of GDAL the NITF driver reports the no data value of my
> .ntf image as -10000000000.0.  The 1.5.0 NITF driver reports the no data
> value on the same .ntf file as 216.0.  The correct value is -10000000000.0.
> Does anyone have any idea why this is occuring? I will debug in the
> meantime and share the fix if I find one.
>
>
>
> Best regards,
>
> Martin Chapman


From mattia.parigiani at gmail.com  Tue Feb 19 14:53:34 2008
From: mattia.parigiani at gmail.com (mattia)
Date: Tue Feb 19 14:53:37 2008
Subject: [gdal-dev] Simple Extraction of GCPs from metadata and reprojection
Message-ID: <6b6f1c810802191153h34001721l8689ab171da4eb8f@mail.gmail.com>

This will probably sound simple to some of the folks, but its still a matter
of confusion for me..

I have a GTif file with the following metadata as from gdalinfo utility (in
a few a lines):

I would appreciate if anyone could help me in telling me how I can possibly
derive 4 GCPs using the
GRINGPOINTLATITUDE, GRINGPOINTLONGITUDE metadata fields or possibly the
metadata in:
  EASTBOUNDINGCOORDINATE=134.930768655651
  WESTBOUNDINGCOORDINATE=88.3307203917252
  NORTHBOUNDINGCOORDINATE=64.7989342568829
  SOUTHBOUNDINGCOORDINATE=20.7060304288409

I just dont get what kind of calculations / transformations are required to
be done in order to derive the GCPs for reprojection...

gdalinfo output:

Driver: GTiff/GeoTIFF
Files: out.tif
Size is 1354, 4630
Coordinate System is `'
Metadata:
  RANGEBEGINNINGDATE=2007-01-04
  RANGEBEGINNINGTIME=03:53:46.531545
  RANGEENDINGDATE=2007-01-04
  RANGEENDINGTIME=04:05:10.447733
  DAYNIGHTFLAG=Day
  GRINGPOINTLATITUDE.1=64.763542175293, 58.4916687011719, 20.8642158508301,
24.1079616546631
  GRINGPOINTLONGITUDE.1=91.4718399047852, 134.930770874023, 110.696083068848,
88.3426055908203
  AveragedBlackBodyTemperature=290.0179
  AveragedMirrorTemperature=279.4261
  AveragedFocalPlane1Temperature=270.9242
  AveragedFocalPlane2Temperature=271.1122
  AveragedFocalPlane3Temperature=83.35484
  AveragedFocalPlane4Temperature=83.02042
  QAPERCENTMISSINGDATA.1=0
  QAPERCENTMISSINGDATA.2=0
  QAPERCENTINTERPOLATEDDATA.1=0
  QAPERCENTINTERPOLATEDDATA.2=0
  QAPERCENTOUTOFBOUNDSDATA.1=40
  QAPERCENTOUTOFBOUNDSDATA.2=0
  EASTBOUNDINGCOORDINATE=134.930768655651
  WESTBOUNDINGCOORDINATE=88.3307203917252
  NORTHBOUNDINGCOORDINATE=64.7989342568829
  SOUTHBOUNDINGCOORDINATE=20.7060304288409
  PGE_Version=3.0.0
  ASSOCIATEDPLATFORMSHORTNAME.1=Terra
  Satellite=Terra
  Number of Scans=463
  Number of Day mode scans=463
  Number of Night mode scans=0
  Incomplete Scans=1
  Max Earth View Frames=1354


Thanks in advance

-- 
Mattia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080219/221384ff/attachment.html
From even.rouault at mines-paris.org  Tue Feb 19 14:55:54 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 19 14:56:02 2008
Subject: [gdal-dev] NITF 1.5.0 nodata value is wrong.
In-Reply-To: <005e01c8732e$ee9681b0$cbc38510$@com>
References: <004f01c8732a$971c3cd0$c554b670$@com>
	<200802192028.46732.even.rouault@mines-paris.org>
	<005e01c8732e$ee9681b0$cbc38510$@com>
Message-ID: <200802192055.55919.even.rouault@mines-paris.org>

Martin,

I'm not sure to understand "I think it looks like a simple bug to fix". Do you 
mean in your code on in GDAL code ? I think that the GDAL new behaviour is 
more a feature than a bug. I agree that the 216 value is a bit artificial, 
but otherwise there's no way to handle empty squares. I displayed with OpenEV 
your attached CADRG frame and it looks great : a 256x256 non-empty square in 
the south-east corner of the image (with a black border on the west and north 
side), the rest of the image being marked as nodata. With the color table of 
that image, GDAL 1.4.0 would have displayed black areas instead of 
transparent ones.

Le Tuesday 19 February 2008 20:37:58, vous avez ?crit?:
> Even,
>
> This is what I sent Frank.  The reason I need the nodata value is because
> when I render images to the screen I like to set the nodata value as the
> transparent image filter on my image so the user only sees the image data
> and then I can tile many layers over each other to create a much better map
> view.
>
> I think it looks like a simple bug to fix.  Thank you very much for your
> help.  I really like the new improvements you guys have been doing on the
> library by the way.
>
> Best regards,
> Martin Chapman
>
>
>
> ...what I sent to Frank...
>
> Frank,
>
> No, the file is small and it is attached.  If you want more nitf files or
> rpf cadrg or cib I can also provide them for you.  They are all small and I
> have an ftp site as well for download.
>
> What I have discovered is that on line 667 of nitfimage.c the following if
> () code block does not get executed because the value of nTPXCDLNTH == 0.
>
> if( nTPXCDLNTH == 8 )
>         {
>             GByte byNodata;
>
>             psImage->bNoDataSet = TRUE;
>             VSIFReadL( &byNodata, 1, 1, psFile->fp );
>             psImage->nNoDataValue = byNodata;
>         }
>         else
>             VSIFSeekL( psFile->fp, (nTPXCDLNTH+7)/8, SEEK_CUR );
>
> Then on line line 809 the fix puts the nodata value as the number of color
> table entries, which is 216.  That seems wrong?
>
> /* -------------------------------------------------------------------- */
> /*      Bug #1751: Add a transparent color if there are none. Absent    */
> /*      subblocks will be then transparent.                             */
> /* -------------------------------------------------------------------- */
>     if( !psImage->bNoDataSet
>         && psImage->nBands == 1
>         && psImage->nBitsPerSample == 8 )
>     {
>         NITFBandInfo *psBandInfo = psImage->pasBandInfo;
>         if (psBandInfo->nSignificantLUTEntries < 256-1
>             && psBandInfo->pabyLUT != NULL )
>         {
>             psBandInfo->pabyLUT[0+psBandInfo->nSignificantLUTEntries] = 0;
>             psBandInfo->pabyLUT[256+psBandInfo->nSignificantLUTEntries] =
> 0; psBandInfo->pabyLUT[512+psBandInfo->nSignificantLUTEntries] = 0;
> psImage->bNoDataSet = TRUE;
>             psImage->nNoDataValue = psBandInfo->nSignificantLUTEntries;
>             psBandInfo->nSignificantLUTEntries ++;
>         }
>     }
>
>
>
> By the way, good job adding nitf rpc functionality.  Also the Warp API
> rocks house. :)
>
> Best regards,
> Martin Chapman
>
> Martin Chapman
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault Sent:
> Tuesday, February 19, 2008 12:29 PM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.
>
> Martin,
>
> yes, there have been a few changes to improve the handling of NITF frames
> from CADRG products that might probably explain what you observe.
> In fact if you look at NITFRasterBand::GetNoDataValue, you'll see that the
> value -1e10 means "nodata value not set". So -1e10 is (and was) definitely
> not a "correct value". You should first look at the value of  *pbSuccess to
> see if the return value of the method is valid or not.
> That said, the value 216 was necessary to introduce so that CADRG files can
> handle transparency well. The empty 256 x 256 tiles are filled with the
> value 216, so that we can know that it's nodata. Previous behaviour was to
> fill with indice 0, which is generally for the black color (0,0,0 RGB
> triplet). Does this really cause a problem for you ? If you think so and
> can describe what is wrong (apart from the change in the result of
> GetNoDataValue), sending the result of gdalinfo on it, or best the whole
> file, could help to understand what happens.
>
> Best regards,
> Even
>
> Le Tuesday 19 February 2008 20:06:50 Martin Chapman, vous avez ?crit :
> > All,
> >
> >
> >
> > In an older version of GDAL the NITF driver reports the no data value of
> > my .ntf image as -10000000000.0.  The 1.5.0 NITF driver reports the no
> > data value on the same .ntf file as 216.0.  The correct value is
> > -10000000000.0. Does anyone have any idea why this is occuring? I will
> > debug in the meantime and share the fix if I find one.
> >
> >
> >
> > Best regards,
> >
> > Martin Chapman
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From mchapman at texelinc.com  Tue Feb 19 15:51:23 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Tue Feb 19 15:51:36 2008
Subject: [gdal-dev] NITF 1.5.0 nodata value is wrong.
In-Reply-To: <200802192055.55919.even.rouault@mines-paris.org>
References: <004f01c8732a$971c3cd0$c554b670$@com>
	<200802192028.46732.even.rouault@mines-paris.org>
	<005e01c8732e$ee9681b0$cbc38510$@com>
	<200802192055.55919.even.rouault@mines-paris.org>
Message-ID: <000a01c87339$33330190$999904b0$@com>

Even,

My question is how do get the nodata value of -10000000000.0 from the nitf file.  Is it in the ColorTable?  In 1.4.0 you could get it from calling pRasterBand->GetNoDataValue().  That function now returns 216.  The correct no data value is -10000000000.0.  I need the value so I can display the image without the black borders in my application.  I need it so I can tell the graphics API how to render the DIB section to the screen.

Thanks you for your help!

Best regards,
Martin Chapman


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Tuesday, February 19, 2008 12:56 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.

Martin,

I'm not sure to understand "I think it looks like a simple bug to fix". Do you 
mean in your code on in GDAL code ? I think that the GDAL new behaviour is 
more a feature than a bug. I agree that the 216 value is a bit artificial, 
but otherwise there's no way to handle empty squares. I displayed with OpenEV 
your attached CADRG frame and it looks great : a 256x256 non-empty square in 
the south-east corner of the image (with a black border on the west and north 
side), the rest of the image being marked as nodata. With the color table of 
that image, GDAL 1.4.0 would have displayed black areas instead of 
transparent ones.

Le Tuesday 19 February 2008 20:37:58, vous avez ?crit :
> Even,
>
> This is what I sent Frank.  The reason I need the nodata value is because
> when I render images to the screen I like to set the nodata value as the
> transparent image filter on my image so the user only sees the image data
> and then I can tile many layers over each other to create a much better map
> view.
>
> I think it looks like a simple bug to fix.  Thank you very much for your
> help.  I really like the new improvements you guys have been doing on the
> library by the way.
>
> Best regards,
> Martin Chapman
>
>
>
> ...what I sent to Frank...
>
> Frank,
>
> No, the file is small and it is attached.  If you want more nitf files or
> rpf cadrg or cib I can also provide them for you.  They are all small and I
> have an ftp site as well for download.
>
> What I have discovered is that on line 667 of nitfimage.c the following if
> () code block does not get executed because the value of nTPXCDLNTH == 0.
>
> if( nTPXCDLNTH == 8 )
>         {
>             GByte byNodata;
>
>             psImage->bNoDataSet = TRUE;
>             VSIFReadL( &byNodata, 1, 1, psFile->fp );
>             psImage->nNoDataValue = byNodata;
>         }
>         else
>             VSIFSeekL( psFile->fp, (nTPXCDLNTH+7)/8, SEEK_CUR );
>
> Then on line line 809 the fix puts the nodata value as the number of color
> table entries, which is 216.  That seems wrong?
>
> /* -------------------------------------------------------------------- */
> /*      Bug #1751: Add a transparent color if there are none. Absent    */
> /*      subblocks will be then transparent.                             */
> /* -------------------------------------------------------------------- */
>     if( !psImage->bNoDataSet
>         && psImage->nBands == 1
>         && psImage->nBitsPerSample == 8 )
>     {
>         NITFBandInfo *psBandInfo = psImage->pasBandInfo;
>         if (psBandInfo->nSignificantLUTEntries < 256-1
>             && psBandInfo->pabyLUT != NULL )
>         {
>             psBandInfo->pabyLUT[0+psBandInfo->nSignificantLUTEntries] = 0;
>             psBandInfo->pabyLUT[256+psBandInfo->nSignificantLUTEntries] =
> 0; psBandInfo->pabyLUT[512+psBandInfo->nSignificantLUTEntries] = 0;
> psImage->bNoDataSet = TRUE;
>             psImage->nNoDataValue = psBandInfo->nSignificantLUTEntries;
>             psBandInfo->nSignificantLUTEntries ++;
>         }
>     }
>
>
>
> By the way, good job adding nitf rpc functionality.  Also the Warp API
> rocks house. :)
>
> Best regards,
> Martin Chapman
>
> Martin Chapman
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault Sent:
> Tuesday, February 19, 2008 12:29 PM
> To: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.
>
> Martin,
>
> yes, there have been a few changes to improve the handling of NITF frames
> from CADRG products that might probably explain what you observe.
> In fact if you look at NITFRasterBand::GetNoDataValue, you'll see that the
> value -1e10 means "nodata value not set". So -1e10 is (and was) definitely
> not a "correct value". You should first look at the value of  *pbSuccess to
> see if the return value of the method is valid or not.
> That said, the value 216 was necessary to introduce so that CADRG files can
> handle transparency well. The empty 256 x 256 tiles are filled with the
> value 216, so that we can know that it's nodata. Previous behaviour was to
> fill with indice 0, which is generally for the black color (0,0,0 RGB
> triplet). Does this really cause a problem for you ? If you think so and
> can describe what is wrong (apart from the change in the result of
> GetNoDataValue), sending the result of gdalinfo on it, or best the whole
> file, could help to understand what happens.
>
> Best regards,
> Even
>
> Le Tuesday 19 February 2008 20:06:50 Martin Chapman, vous avez ?crit :
> > All,
> >
> >
> >
> > In an older version of GDAL the NITF driver reports the no data value of
> > my .ntf image as -10000000000.0.  The 1.5.0 NITF driver reports the no
> > data value on the same .ntf file as 216.0.  The correct value is
> > -10000000000.0. Does anyone have any idea why this is occuring? I will
> > debug in the meantime and share the fix if I find one.
> >
> >
> >
> > Best regards,
> >
> > Martin Chapman
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From mchapman at texelinc.com  Tue Feb 19 16:19:42 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Tue Feb 19 16:19:52 2008
Subject: [gdal-dev] NITF 1.5.0 nodata value is wrong.
In-Reply-To: <200802192028.46732.even.rouault@mines-paris.org>
References: <004f01c8732a$971c3cd0$c554b670$@com>
	<200802192028.46732.even.rouault@mines-paris.org>
Message-ID: <000e01c8733d$26776fa0$73664ee0$@com>

Even,

AHHH!  I get it now. :)  Sorry, I am a little slow today. The way you implemented it sounds fine to me.

Thanks you very much for your help!

Best regards,
Martin Chapman


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Tuesday, February 19, 2008 12:29 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.

Martin,

yes, there have been a few changes to improve the handling of NITF frames from 
CADRG products that might probably explain what you observe.
In fact if you look at NITFRasterBand::GetNoDataValue, you'll see that the 
value -1e10 means "nodata value not set". So -1e10 is (and was) definitely 
not a "correct value". You should first look at the value of  *pbSuccess to 
see if the return value of the method is valid or not.
That said, the value 216 was necessary to introduce so that CADRG files can 
handle transparency well. The empty 256 x 256 tiles are filled with the value 
216, so that we can know that it's nodata. Previous behaviour was to fill 
with indice 0, which is generally for the black color (0,0,0 RGB triplet).
Does this really cause a problem for you ? If you think so and can describe 
what is wrong (apart from the change in the result of GetNoDataValue), 
sending the result of gdalinfo on it, or best the whole file, could help to 
understand what happens.

Best regards,
Even

Le Tuesday 19 February 2008 20:06:50 Martin Chapman, vous avez ?crit :
> All,
>
>
>
> In an older version of GDAL the NITF driver reports the no data value of my
> .ntf image as -10000000000.0.  The 1.5.0 NITF driver reports the no data
> value on the same .ntf file as 216.0.  The correct value is -10000000000.0.
> Does anyone have any idea why this is occuring? I will debug in the
> meantime and share the fix if I find one.
>
>
>
> Best regards,
>
> Martin Chapman


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Tue Feb 19 16:27:00 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Feb 19 16:27:06 2008
Subject: [gdal-dev] NITF 1.5.0 nodata value is wrong.
In-Reply-To: <000a01c87339$33330190$999904b0$@com>
References: <004f01c8732a$971c3cd0$c554b670$@com>
	<200802192055.55919.even.rouault@mines-paris.org>
	<000a01c87339$33330190$999904b0$@com>
Message-ID: <200802192227.01546.even.rouault@mines-paris.org>

Hum, I think I had already answered this question...
-10000000000.0 *is not* the correct no data value. It means that there was not 
any nodata value. I don't understand why your application needs that precise 
value. This value is not the value of any pixel in the image (the data type 
is byte). When you read each pixel of the image, the pixels whose value is 
216 are transparent, for sure.
It can also happen that some non-empty blocks have padding (this is the case 
in your example CADRG frame). In general, the pixel value will be 0 (black), 
but it's not obvious in those cases that this black is really transparent.

Le Tuesday 19 February 2008 21:51:23 Martin Chapman, vous avez ?crit?:
> Even,
>
> My question is how do get the nodata value of -10000000000.0 from the nitf
> file.  Is it in the ColorTable?  In 1.4.0 you could get it from calling
> pRasterBand->GetNoDataValue().  That function now returns 216.  The correct
> no data value is -10000000000.0.  I need the value so I can display the
> image without the black borders in my application.  I need it so I can tell
> the graphics API how to render the DIB section to the screen.
>
> Thanks you for your help!
>
> Best regards,
> Martin Chapman
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Tuesday, February 19, 2008 12:56 PM
> To: Martin Chapman
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.
>
> Martin,
>
> I'm not sure to understand "I think it looks like a simple bug to fix". Do
> you mean in your code on in GDAL code ? I think that the GDAL new behaviour
> is more a feature than a bug. I agree that the 216 value is a bit
> artificial, but otherwise there's no way to handle empty squares. I
> displayed with OpenEV your attached CADRG frame and it looks great : a
> 256x256 non-empty square in the south-east corner of the image (with a
> black border on the west and north side), the rest of the image being
> marked as nodata. With the color table of that image, GDAL 1.4.0 would have
> displayed black areas instead of transparent ones.
>
> Le Tuesday 19 February 2008 20:37:58, vous avez ?crit :
> > Even,
> >
> > This is what I sent Frank.  The reason I need the nodata value is because
> > when I render images to the screen I like to set the nodata value as the
> > transparent image filter on my image so the user only sees the image data
> > and then I can tile many layers over each other to create a much better
> > map view.
> >
> > I think it looks like a simple bug to fix.  Thank you very much for your
> > help.  I really like the new improvements you guys have been doing on the
> > library by the way.
> >
> > Best regards,
> > Martin Chapman
> >
> >
> >
> > ...what I sent to Frank...
> >
> > Frank,
> >
> > No, the file is small and it is attached.  If you want more nitf files or
> > rpf cadrg or cib I can also provide them for you.  They are all small and
> > I have an ftp site as well for download.
> >
> > What I have discovered is that on line 667 of nitfimage.c the following
> > if () code block does not get executed because the value of nTPXCDLNTH ==
> > 0.
> >
> > if( nTPXCDLNTH == 8 )
> >         {
> >             GByte byNodata;
> >
> >             psImage->bNoDataSet = TRUE;
> >             VSIFReadL( &byNodata, 1, 1, psFile->fp );
> >             psImage->nNoDataValue = byNodata;
> >         }
> >         else
> >             VSIFSeekL( psFile->fp, (nTPXCDLNTH+7)/8, SEEK_CUR );
> >
> > Then on line line 809 the fix puts the nodata value as the number of
> > color table entries, which is 216.  That seems wrong?
> >
> > /* --------------------------------------------------------------------
> > */ /*      Bug #1751: Add a transparent color if there are none. Absent  
> >  */ /*      subblocks will be then transparent.                          
> >   */ /*
> > -------------------------------------------------------------------- */
> > if( !psImage->bNoDataSet
> >         && psImage->nBands == 1
> >         && psImage->nBitsPerSample == 8 )
> >     {
> >         NITFBandInfo *psBandInfo = psImage->pasBandInfo;
> >         if (psBandInfo->nSignificantLUTEntries < 256-1
> >             && psBandInfo->pabyLUT != NULL )
> >         {
> >             psBandInfo->pabyLUT[0+psBandInfo->nSignificantLUTEntries] =
> > 0; psBandInfo->pabyLUT[256+psBandInfo->nSignificantLUTEntries] = 0;
> > psBandInfo->pabyLUT[512+psBandInfo->nSignificantLUTEntries] = 0;
> > psImage->bNoDataSet = TRUE;
> >             psImage->nNoDataValue = psBandInfo->nSignificantLUTEntries;
> >             psBandInfo->nSignificantLUTEntries ++;
> >         }
> >     }
> >
> >
> >
> > By the way, good job adding nitf rpc functionality.  Also the Warp API
> > rocks house. :)
> >
> > Best regards,
> > Martin Chapman
> >
> > Martin Chapman
> >
> >
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault Sent:
> > Tuesday, February 19, 2008 12:29 PM
> > To: gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.
> >
> > Martin,
> >
> > yes, there have been a few changes to improve the handling of NITF frames
> > from CADRG products that might probably explain what you observe.
> > In fact if you look at NITFRasterBand::GetNoDataValue, you'll see that
> > the value -1e10 means "nodata value not set". So -1e10 is (and was)
> > definitely not a "correct value". You should first look at the value of 
> > *pbSuccess to see if the return value of the method is valid or not.
> > That said, the value 216 was necessary to introduce so that CADRG files
> > can handle transparency well. The empty 256 x 256 tiles are filled with
> > the value 216, so that we can know that it's nodata. Previous behaviour
> > was to fill with indice 0, which is generally for the black color (0,0,0
> > RGB triplet). Does this really cause a problem for you ? If you think so
> > and can describe what is wrong (apart from the change in the result of
> > GetNoDataValue), sending the result of gdalinfo on it, or best the whole
> > file, could help to understand what happens.
> >
> > Best regards,
> > Even
> >
> > Le Tuesday 19 February 2008 20:06:50 Martin Chapman, vous avez ?crit :
> > > All,
> > >
> > >
> > >
> > > In an older version of GDAL the NITF driver reports the no data value
> > > of my .ntf image as -10000000000.0.  The 1.5.0 NITF driver reports the
> > > no data value on the same .ntf file as 216.0.  The correct value is
> > > -10000000000.0. Does anyone have any idea why this is occuring? I will
> > > debug in the meantime and share the fix if I find one.
> > >
> > >
> > >
> > > Best regards,
> > >
> > > Martin Chapman
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From mchapman at texelinc.com  Tue Feb 19 16:47:43 2008
From: mchapman at texelinc.com (Martin Chapman)
Date: Tue Feb 19 16:47:50 2008
Subject: [gdal-dev] NITF 1.5.0 nodata value is wrong.
In-Reply-To: <200802192227.01546.even.rouault@mines-paris.org>
References: <004f01c8732a$971c3cd0$c554b670$@com>
	<200802192055.55919.even.rouault@mines-paris.org>
	<000a01c87339$33330190$999904b0$@com>
	<200802192227.01546.even.rouault@mines-paris.org>
Message-ID: <000f01c87341$0f24fd50$2d6ef7f0$@com>

Even,

You did...see my last email.  You answered my question.  Thank you very much!

Best regards,
Martin Chapman


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Tuesday, February 19, 2008 2:27 PM
To: Martin Chapman
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.

Hum, I think I had already answered this question...
-10000000000.0 *is not* the correct no data value. It means that there was not 
any nodata value. I don't understand why your application needs that precise 
value. This value is not the value of any pixel in the image (the data type 
is byte). When you read each pixel of the image, the pixels whose value is 
216 are transparent, for sure.
It can also happen that some non-empty blocks have padding (this is the case 
in your example CADRG frame). In general, the pixel value will be 0 (black), 
but it's not obvious in those cases that this black is really transparent.

Le Tuesday 19 February 2008 21:51:23 Martin Chapman, vous avez ?crit :
> Even,
>
> My question is how do get the nodata value of -10000000000.0 from the nitf
> file.  Is it in the ColorTable?  In 1.4.0 you could get it from calling
> pRasterBand->GetNoDataValue().  That function now returns 216.  The correct
> no data value is -10000000000.0.  I need the value so I can display the
> image without the black borders in my application.  I need it so I can tell
> the graphics API how to render the DIB section to the screen.
>
> Thanks you for your help!
>
> Best regards,
> Martin Chapman
>
>
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Tuesday, February 19, 2008 12:56 PM
> To: Martin Chapman
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.
>
> Martin,
>
> I'm not sure to understand "I think it looks like a simple bug to fix". Do
> you mean in your code on in GDAL code ? I think that the GDAL new behaviour
> is more a feature than a bug. I agree that the 216 value is a bit
> artificial, but otherwise there's no way to handle empty squares. I
> displayed with OpenEV your attached CADRG frame and it looks great : a
> 256x256 non-empty square in the south-east corner of the image (with a
> black border on the west and north side), the rest of the image being
> marked as nodata. With the color table of that image, GDAL 1.4.0 would have
> displayed black areas instead of transparent ones.
>
> Le Tuesday 19 February 2008 20:37:58, vous avez ?crit :
> > Even,
> >
> > This is what I sent Frank.  The reason I need the nodata value is because
> > when I render images to the screen I like to set the nodata value as the
> > transparent image filter on my image so the user only sees the image data
> > and then I can tile many layers over each other to create a much better
> > map view.
> >
> > I think it looks like a simple bug to fix.  Thank you very much for your
> > help.  I really like the new improvements you guys have been doing on the
> > library by the way.
> >
> > Best regards,
> > Martin Chapman
> >
> >
> >
> > ...what I sent to Frank...
> >
> > Frank,
> >
> > No, the file is small and it is attached.  If you want more nitf files or
> > rpf cadrg or cib I can also provide them for you.  They are all small and
> > I have an ftp site as well for download.
> >
> > What I have discovered is that on line 667 of nitfimage.c the following
> > if () code block does not get executed because the value of nTPXCDLNTH ==
> > 0.
> >
> > if( nTPXCDLNTH == 8 )
> >         {
> >             GByte byNodata;
> >
> >             psImage->bNoDataSet = TRUE;
> >             VSIFReadL( &byNodata, 1, 1, psFile->fp );
> >             psImage->nNoDataValue = byNodata;
> >         }
> >         else
> >             VSIFSeekL( psFile->fp, (nTPXCDLNTH+7)/8, SEEK_CUR );
> >
> > Then on line line 809 the fix puts the nodata value as the number of
> > color table entries, which is 216.  That seems wrong?
> >
> > /* --------------------------------------------------------------------
> > */ /*      Bug #1751: Add a transparent color if there are none. Absent  
> >  */ /*      subblocks will be then transparent.                          
> >   */ /*
> > -------------------------------------------------------------------- */
> > if( !psImage->bNoDataSet
> >         && psImage->nBands == 1
> >         && psImage->nBitsPerSample == 8 )
> >     {
> >         NITFBandInfo *psBandInfo = psImage->pasBandInfo;
> >         if (psBandInfo->nSignificantLUTEntries < 256-1
> >             && psBandInfo->pabyLUT != NULL )
> >         {
> >             psBandInfo->pabyLUT[0+psBandInfo->nSignificantLUTEntries] =
> > 0; psBandInfo->pabyLUT[256+psBandInfo->nSignificantLUTEntries] = 0;
> > psBandInfo->pabyLUT[512+psBandInfo->nSignificantLUTEntries] = 0;
> > psImage->bNoDataSet = TRUE;
> >             psImage->nNoDataValue = psBandInfo->nSignificantLUTEntries;
> >             psBandInfo->nSignificantLUTEntries ++;
> >         }
> >     }
> >
> >
> >
> > By the way, good job adding nitf rpc functionality.  Also the Warp API
> > rocks house. :)
> >
> > Best regards,
> > Martin Chapman
> >
> > Martin Chapman
> >
> >
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault Sent:
> > Tuesday, February 19, 2008 12:29 PM
> > To: gdal-dev@lists.osgeo.org
> > Subject: Re: [gdal-dev] NITF 1.5.0 nodata value is wrong.
> >
> > Martin,
> >
> > yes, there have been a few changes to improve the handling of NITF frames
> > from CADRG products that might probably explain what you observe.
> > In fact if you look at NITFRasterBand::GetNoDataValue, you'll see that
> > the value -1e10 means "nodata value not set". So -1e10 is (and was)
> > definitely not a "correct value". You should first look at the value of 
> > *pbSuccess to see if the return value of the method is valid or not.
> > That said, the value 216 was necessary to introduce so that CADRG files
> > can handle transparency well. The empty 256 x 256 tiles are filled with
> > the value 216, so that we can know that it's nodata. Previous behaviour
> > was to fill with indice 0, which is generally for the black color (0,0,0
> > RGB triplet). Does this really cause a problem for you ? If you think so
> > and can describe what is wrong (apart from the change in the result of
> > GetNoDataValue), sending the result of gdalinfo on it, or best the whole
> > file, could help to understand what happens.
> >
> > Best regards,
> > Even
> >
> > Le Tuesday 19 February 2008 20:06:50 Martin Chapman, vous avez ?crit :
> > > All,
> > >
> > >
> > >
> > > In an older version of GDAL the NITF driver reports the no data value
> > > of my .ntf image as -10000000000.0.  The 1.5.0 NITF driver reports the
> > > no data value on the same .ntf file as 216.0.  The correct value is
> > > -10000000000.0. Does anyone have any idea why this is occuring? I will
> > > debug in the meantime and share the fix if I find one.
> > >
> > >
> > >
> > > Best regards,
> > >
> > > Martin Chapman
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev



From matt.wilkie at gov.yk.ca  Tue Feb 19 20:04:02 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Feb 19 20:04:10 2008
Subject: [gdal-dev] advice on feathering rasters together?
Message-ID: <47BB7C82.4020009@gov.yk.ca>

Hello,

Does anyone have any advice on how to feather rasters together so there 
is not an abrubt transition from one to the other?

The circumstance: I have 16bit integer raster (a DEM) with some areas in 
it I want to fix (lakes which should be flat). I've created a second 
raster with the desired replacement values (fixed_lakes). However if I 
blindly just substitute fixed_lakes.tif for dem.tif there are some 
pretty abrubt transitions which are sometimes worse than the original 
problem.

I've done this before using Gimp and 8bit images but gimp can't load 
16bit images without losing half the bits. (in layer pallet stack 
fixed.tif over original.tif > transparency to selection for fixed layer 
 > invert selection > expand X pixels > feather > flatten image; restore 
spatial reference with gdalcopyproj.py)

thanks in advance for your thoughts,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From warmerdam at pobox.com  Tue Feb 19 21:45:38 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 19 21:45:56 2008
Subject: [gdal-dev] advice on feathering rasters together?
In-Reply-To: <47BB7C82.4020009@gov.yk.ca>
References: <47BB7C82.4020009@gov.yk.ca>
Message-ID: <47BB9452.9040609@pobox.com>

Matt Wilkie wrote:
> Hello,
> 
> Does anyone have any advice on how to feather rasters together so there 
> is not an abrubt transition from one to the other?
> 
> The circumstance: I have 16bit integer raster (a DEM) with some areas in 
> it I want to fix (lakes which should be flat). I've created a second 
> raster with the desired replacement values (fixed_lakes). However if I 
> blindly just substitute fixed_lakes.tif for dem.tif there are some 
> pretty abrubt transitions which are sometimes worse than the original 
> problem.
> 
> I've done this before using Gimp and 8bit images but gimp can't load 
> 16bit images without losing half the bits. (in layer pallet stack 
> fixed.tif over original.tif > transparency to selection for fixed layer 
>  > invert selection > expand X pixels > feather > flatten image; restore 
> spatial reference with gdalcopyproj.py)

Matt,

Sorry, I'm not aware of a way of a way of doing feathering along edges or
cutlines with gdalwarp and friends.  We did have this in the PCI image warper
and it might be nice to add to gdalwarp.  But currently gdalwarp doesn't even
support a vector based cutline.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Feb 19 23:19:46 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 19 23:20:06 2008
Subject: [gdal-dev] advice on feathering rasters together?
In-Reply-To: <47BB7C82.4020009@gov.yk.ca>
References: <47BB7C82.4020009@gov.yk.ca>
Message-ID: <47BBAA62.9090204@pobox.com>

Matt Wilkie wrote:
> Hello,
> 
> Does anyone have any advice on how to feather rasters together so there 
> is not an abrubt transition from one to the other?
> 
> The circumstance: I have 16bit integer raster (a DEM) with some areas in 
> it I want to fix (lakes which should be flat). I've created a second 
> raster with the desired replacement values (fixed_lakes). However if I 
> blindly just substitute fixed_lakes.tif for dem.tif there are some 
> pretty abrubt transitions which are sometimes worse than the original 
> problem.
> 
> I've done this before using Gimp and 8bit images but gimp can't load 
> 16bit images without losing half the bits. (in layer pallet stack 
> fixed.tif over original.tif > transparency to selection for fixed layer 
>  > invert selection > expand X pixels > feather > flatten image; restore 
> spatial reference with gdalcopyproj.py)

Matt,

Sorry, I'm not aware of a way of a way of doing feathering along edges or
cutlines with gdalwarp and friends.  We did have this in the PCI image warper
and it might be nice to add to gdalwarp.  But currently gdalwarp doesn't even
support a vector based cutline.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bhagwat.maimt at gmail.com  Wed Feb 20 01:06:31 2008
From: bhagwat.maimt at gmail.com (bargi)
Date: Wed Feb 20 01:06:33 2008
Subject: [Gdal-dev] Problem in Coordinate Transformation
Message-ID: <15560820.post@talk.nabble.com>


Hi to all,

I am working on a project in which I have to project shapefiles on our
Application.

I am facing problem in transforming coordinate from one system to another
................

I googled a lot and found some code and try to run it.........but Its not
working properly..............

The code is as follow:

[code]
    if ( !__GOOGRFeatureSourceDriversRegistered ) {
        OGRRegisterAll();
        __GOOGRFeatureSourceDriversRegistered = true;
    }

     OGRDataSource *ogrDataSource = OGRSFDriverRegistrar::Open( qPrintable(
file ));

    
     if ( !ogrDataSource ) {
         return false;
     }


const int nLayers = ogrDataSource->GetLayerCount();
     
     OGRLayer *layer = ogrDataSource->GetLayer( 0 );
     m_displayName   = layer->GetLayerDefn()->GetName();
     m_path          = file;
     m_driverName    = ogrDataSource->GetDriver()->GetName();
     
     for ( int i = 0; i < nLayers; ++i ) {
         layer = ogrDataSource->GetLayer( i );
         OGRSpatialReference*    pSourceSRS = layer->GetSpatialRef();
         OGRSpatialReference*    pTargetSRS = pSourceSRS->Clone(); 
         pTargetSRS->SetProjCS("TM");
         pTargetSRS->SetTM(0,0,1,0,0);
         OGRGeometry*  poGeometry;
         double x,y;
         

        OGRCoordinateTransformation* poCT =
OGRCreateCoordinateTransformation(pSourceSRS,pTargetSRS); 
       
          layer->ResetReading();   

         OGRFeature *ogrFeature = 0;
         
         while ( (ogrFeature = layer->GetNextFeature()) ) {
                 
               poGeometry = ogrFeature->GetGeometryRef(); 
                if (poGeometry !=NULL)  { 
             if (wkbFlatten(poGeometry->getGeometryType()) == wkbLineString)
{
                 OGRPoint *poPoint = (OGRPoint *) poGeometry; 
                 x = poPoint->getX();
                 y = poPoint->getY();
               if (poCT!= NULL || !poCT->Transform(1,&x,&y)) {
                   poPoint->setX(x);    //Set coordinate
                   poPoint->setY(y);
                   qDebug()<< poCT;   
                   printf( "(\n%f,%f) ->
(%f,%f)\n",poPoint->getX(),poPoint->getY(),x, y );
                      
                   GOFeature *feature = new GOFeature( ogrFeature );
                   features.push_back( feature );
                  
                }
             }
         }
     }
  }
[/code]

But it is not changing the coordinate............

The output is as follow when printf statement run......

(0.000000,0.000000) -> (0.000000,0.000000)

I am not able to understand where is the problem ?????

I this forum I found a post in which there was given suggestion for
Transformation  which is as follow:

[code]

 o Create a new layer for the output.
 o Make sure you pass the altered OGRSpatialReference to the
    CreateLayer() call.
 o You might as well just call transform() on the geometry
    instead of extracting the point and transforming that.

[/code]

When I try to use CreateLayer("MyFile",pTargetSRS,wkbunknow,null) function
,It gives error that ABC.shp file open in readonly ,MyFile cannot be
created........

The following line 

 features.push_back( feature );

Is for adding features to a list from which we can extract features to
draw................

Also please tell me how can I stored changed coordinate of features and
retrieve them later..........

Any queries are welcome.........


Please help me to resolve the problem and please give steps of
implementation.....


Thanks


-- 
View this message in context: http://www.nabble.com/Problem-in-Coordinate-Transformation-tp15560820p15560820.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From szenttehen at yahoo.com  Wed Feb 20 02:43:47 2008
From: szenttehen at yahoo.com (szenttehen@yahoo.com)
Date: Wed Feb 20 02:43:49 2008
Subject: [gdal-dev] gdalwarp offset
Message-ID: <104172.34184.qm@web34803.mail.mud.yahoo.com>

Hi,
 I need to reproject imagery that is too
big for my GIS software package to handle. I am
testing GDALWARP on some
smaller images make sure I am doing things right
before attempting the big image. It almost works, but
has one problem. The command
I am using is as follows:

gdalwarp -s_srs custer.prj -t_srs IdahoSPl.prj t75.sid
t75_sp.tiff

where custer.prj and idahosp.prj are projection files
as shown below. I am
basically reprojecting from UTM zone 11 to Idaho State
Plane Central (which
is basically a custom projection). 

Everything executes fine, except that when I using the
reprojected imagery
(State Plane) as a background for my layers (which are
in the same
projection) the image is off by about 60 feet to the
east and a 10 feet to
the south. I am sure it is not my vector layers since
they line up exactly
with the image before it is reprojected (The vector
layers are reprojected
"on the fly" to UTM 11 by Manifold GIS when the I
overlay them on the
imagery before reprojection)

It seems that I am missing some offsets or something,
but I don't see how
since I use the .prj parameters from my vector layer
for the target
projection in gdalwarp. Does gdalwarp run into
problems with the change in datums between the two
projections? Any ideas would be helpful.

Thanks,
Joseph
 

Custer.prj
ROJCS["IDTM",GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000],PARAMETER["False_Northing",100000],PARAMETER["Central_Meridian",-114],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",42],UNIT["Meter",1]]

idahosp.prj
PROJCS["NAD_1983_StatePlane_Idaho_Central_FIPS_1102_Feet",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",1640416.666666667],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-114.0],PARAMETER["Scale_Factor",0.9999473684210526],PARAMETER["Latitude_Of_Origin",41.66666666666666],UNIT["Foot_US",0.3048006096012192]]

-- 


      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
From vdharan2001 at gmail.com  Wed Feb 20 07:15:14 2008
From: vdharan2001 at gmail.com (vdharan nadra)
Date: Wed Feb 20 07:15:17 2008
Subject: [gdal-dev] Which Linux OS to use when GDAL/OGR is used.
Message-ID: <d29760880802200415m59b74978r35203a4ee0a4454d@mail.gmail.com>

HI,

We are going to hire a server and going to use GDAL/OGR .Can any one
help me to select the best one from the following.
1. Red Hat enterprise 4
2. Red Hat enterprise 5
3. Cent OS 4
4. Cent OS 5

Also if i want to use FWTools installer please tell me for which of
the above OS it is supported.

Best Regards,
N.Vidhiyadharan
From jeshua at OpenOSX.com  Wed Feb 20 07:56:54 2008
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Wed Feb 20 07:56:44 2008
Subject: [gdal-dev] Which Linux OS to use when GDAL/OGR is used.
In-Reply-To: <d29760880802200415m59b74978r35203a4ee0a4454d@mail.gmail.com>
References: <d29760880802200415m59b74978r35203a4ee0a4454d@mail.gmail.com>
Message-ID: <C707483B-2913-4226-93E4-008BB84A0580@OpenOSX.com>


On Feb 20, 2008, at 5:15 AM, vdharan nadra wrote:

> We are going to hire a server and going to use GDAL/OGR .Can any one
> help me to select the best one from the following.
> 1. Red Hat enterprise 4
> 2. Red Hat enterprise 5
> 3. Cent OS 4
> 4. Cent OS 5

Greetings,

You might want to consider using Fedora 6, 7, or 8 or Ubuntu 7.04 or  
7.10 as there are binaries already compiled at:

	<http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries>


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364



From Doug_Newcomb at fws.gov  Wed Feb 20 08:27:39 2008
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Feb 20 08:28:44 2008
Subject: [gdal-dev] Which Linux OS to use when GDAL/OGR is used.
In-Reply-To: <C707483B-2913-4226-93E4-008BB84A0580@OpenOSX.com>
Message-ID: <OFDC9E4709.C7A40B34-ON852573F5.0049341D-852573F5.0049F19E@fws.gov>

I've had good luck with Centos 5 .   I usually compile form source, but
there are precompiled rpms for gdal 1.4.2 in the  Fedora EPEL repositories
, see   http://fedoraproject.org/wiki/EPEL , which should work fine for Red
Hat 5 and Centos 5 32 bit and 64 bit.  I am not sure which formats are
available with those binaries.



Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
Life is too short for undocumented, proprietary data formats.


                                                                           
             Jeshua Lacock                                                 
             <jeshua@OpenOSX.c                                             
             om>                                                        To 
             Sent by:                  gdal-dev@lists.osgeo.org            
             gdal-dev-bounces@                                          cc 
             lists.osgeo.org                                               
                                                                   Subject 
                                       Re: [gdal-dev] Which Linux OS to    
             02/20/2008 07:56          use when GDAL/OGR is used.          
             AM                                                            
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           





On Feb 20, 2008, at 5:15 AM, vdharan nadra wrote:

> We are going to hire a server and going to use GDAL/OGR .Can any one
> help me to select the best one from the following.
> 1. Red Hat enterprise 4
> 2. Red Hat enterprise 5
> 3. Cent OS 4
> 4. Cent OS 5

Greetings,

You might want to consider using Fedora 6, 7, or 8 or Ubuntu 7.04 or
7.10 as there are binaries already compiled at:

             <http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries>


Cheers,

Jeshua Lacock, Owner
<http://OpenOSX.com>
phone: 877.240.1364



_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Doug_Newcomb at fws.gov  Wed Feb 20 08:52:20 2008
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Feb 20 08:52:51 2008
Subject: Fw: [gdal-dev] gdalwarp offset
Message-ID: <OF9F1D8813.E366E350-ON852573F5.004C2354-852573F5.004C3410@fws.gov>


Oops!  forgot to reply to the list too.

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
Life is too short for undocumented, proprietary data formats.
----- Forwarded by Doug Newcomb/R4/FWS/DOI on 02/20/2008 08:51 AM -----
                                                                           
             Doug                                                          
             Newcomb/R4/FWS/DO                                             
             I                                                          To 
                                       "szenttehen@yahoo.com"              
             02/20/2008 08:18          <szenttehen@yahoo.com>              
             AM                                                         cc 
                                                                           
                                                                   Subject 
                                       Re: [gdal-dev] gdalwarp offset      
                                       (Document link: Doug Newcomb)       
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           
                                                                           



Joseph,
      That sounds like a datum shift issue.  Are you sure of the NAD27
datum for the utm 11 source image?  If manifold does project on the fly
like ArcGIS, your image datum may not match the vector layer datum from
which you have the .prj file.    Try using the epsg code for UTM Zone 11N
NAD 83 , i.e.,  -s_srs "epsg:26911"     ( I believe 26911 is the correct
epsg code from the pcs.csv file)

Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
Life is too short for undocumented, proprietary data formats.


                                                                           
             "szenttehen@yahoo                                             
             .com"                                                         
             <szenttehen@yahoo                                          To 
             .com>                     gdal-dev@lists.osgeo.org            
             Sent by:                                                   cc 
             gdal-dev-bounces@                                             
             lists.osgeo.org                                       Subject 
                                       [gdal-dev] gdalwarp offset          
                                                                           
             02/20/2008 02:43                                              
             AM                                                            
                                                                           
                                                                           
                                                                           




Hi,
 I need to reproject imagery that is too
big for my GIS software package to handle. I am
testing GDALWARP on some
smaller images make sure I am doing things right
before attempting the big image. It almost works, but
has one problem. The command
I am using is as follows:

gdalwarp -s_srs custer.prj -t_srs IdahoSPl.prj t75.sid
t75_sp.tiff

where custer.prj and idahosp.prj are projection files
as shown below. I am
basically reprojecting from UTM zone 11 to Idaho State
Plane Central (which
is basically a custom projection).

Everything executes fine, except that when I using the
reprojected imagery
(State Plane) as a background for my layers (which are
in the same
projection) the image is off by about 60 feet to the
east and a 10 feet to
the south. I am sure it is not my vector layers since
they line up exactly
with the image before it is reprojected (The vector
layers are reprojected
"on the fly" to UTM 11 by Manifold GIS when the I
overlay them on the
imagery before reprojection)

It seems that I am missing some offsets or something,
but I don't see how
since I use the .prj parameters from my vector layer
for the target
projection in gdalwarp. Does gdalwarp run into
problems with the change in datums between the two
projections? Any ideas would be helpful.

Thanks,
Joseph


Custer.prj
ROJCS["IDTM",GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000],PARAMETER["False_Northing",100000],PARAMETER["Central_Meridian",-114],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",42],UNIT["Meter",1]]


idahosp.prj
PROJCS["NAD_1983_StatePlane_Idaho_Central_FIPS_1102_Feet",GEOGCS["GCS_North_American_1983",DATUM["D_North_American_1983",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",1640416.666666667],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",-114.0],PARAMETER["Scale_Factor",0.9999473684210526],PARAMETER["Latitude_Of_Origin",41.66666666666666],UNIT["Foot_US",0.3048006096012192]]


--



____________________________________________________________________________________

Never miss a thing.  Make Yahoo your home page.
http://www.yahoo.com/r/hs
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Wed Feb 20 09:57:09 2008
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Feb 20 09:55:57 2008
Subject: [gdal-dev] Expat support on MinGW/MSYS
In-Reply-To: <FBCMMO02HKoFz6Tt6Zp0001e99e@FBCMMO02.fbc.local>
References: <FBCMMO02HKoFz6Tt6Zp0001e99e@FBCMMO02.fbc.local>
Message-ID: <47BC3FC5.9080304@tkk.fi>

marco.pasetti@alice.it kirjoitti:
> Hi,
>  
> I'm building GDAL 1.5.0 on Windows (XP SP2) using MSYS/MinGW environment;
> I built Expat 2.0.1, but I cannot configure GDAL with Expat support.
> I followed the BuildingWithMinGW Wiki (using pexports, libtool and 
> perl commands), but it continues to find includes but not libraries!

Something's definitely not correct. I'm using the trunk version and I 
get configure to find expat.h from c:\mingw\include and expat.dll.a 
(which is created with pexports and libtool and the small perl utility) 
from c:\mingw\lib with:

1) adding LIBS="$LIBS -lexpat" to configure (lines 23783 and 23787)

and

2) calling configure with

--with-expat=yes --with-expat-inc=/c/mingw/include 
--with-expat-lib=-L/c/mingw/lib

Note the value for --with-expat-lib. It seems to be required although 
the directory is known by the linker by default.

Regards,

Ari

>  
> Someone could help me please?
> What happen if I disable Expat support?
>  
> Thanks for support,
>  
> Marco
>  
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Wed Feb 20 10:22:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 20 11:13:20 2008
Subject: [gdal-dev] Which Linux OS to use when GDAL/OGR is used.
In-Reply-To: <d29760880802200415m59b74978r35203a4ee0a4454d@mail.gmail.com>
References: <d29760880802200415m59b74978r35203a4ee0a4454d@mail.gmail.com>
Message-ID: <47BC45C4.7050304@pobox.com>

vdharan nadra wrote:
> HI,
> 
> We are going to hire a server and going to use GDAL/OGR .Can any one
> help me to select the best one from the following.
> 1. Red Hat enterprise 4
> 2. Red Hat enterprise 5
> 3. Cent OS 4
> 4. Cent OS 5
> 
> Also if i want to use FWTools installer please tell me for which of
> the above OS it is supported.

N.Vidhiyadharan,

GDAL works well on any pretty much any 32bit x86 linux and should work fine
on any of the above.  FWTools should also specifically work on any of the
above.  So, you might as well look at other criteria (price, more recent,
etc).

I would note that if Debian were trivially available it is nice because
many GIS packages have been packaged for it by the DebianGIS project.
But if FWTools has what you need then any of them will do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Feb 20 13:00:39 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 20 13:00:58 2008
Subject: [gdal-dev] Motion: Authorize 
Message-ID: <47BC6AC7.3010507@pobox.com>

Motion: To authorize Frank Warmerdam to negotiate a maintainer contract with
Mateusz Loskot for March to August 2008 for up to 960 hours at $19USD/hr.  The
contract would be in accordance with RFC 9: GDAL Paid Maintainer Guidelines.

---

This contract, if Mateusz were able to bill for all of the time, would be
$18240.00 USD.  We currently have a little over $13000 on hand and with
anticipated sponsorship renewals I anticipate no problem meeting the full
amount.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bartvde at osgis.nl  Wed Feb 20 13:17:08 2008
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Feb 20 13:17:05 2008
Subject: [gdal-dev] issues with GDAL 1.5,
 Mapserver 5 and Virtual Spatial Data through OCI?
Message-ID: <47BC6EA4.70805@osgis.nl>

Hi list,

are there any known issues with the above combination?

When we use Mapserver 5 in combination with GDAL 1.3.2, all works as 
expected. But when we upgraded to GDAL 1.5 the layers don't draw 
anything anymore, using CPL_DEBUG we can see 25 rows being retrieved 
though. Using ogrinfo we can see all the data correctly.

Any ideas/pointers? TIA.

Best regards,
Bart

-- 
Bart van den Eijnden
OSGIS, Open Source GIS
bartvde@osgis.nl
http://www.osgis.nl

From dmorissette at mapgears.com  Wed Feb 20 13:16:32 2008
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Feb 20 13:17:47 2008
Subject: [gdal-dev] Motion: Authorize
In-Reply-To: <47BC6AC7.3010507@pobox.com>
References: <47BC6AC7.3010507@pobox.com>
Message-ID: <47BC6E80.2050300@mapgears.com>

Frank Warmerdam wrote:
> Motion: To authorize Frank Warmerdam to negotiate a maintainer contract 
> with
> Mateusz Loskot for March to August 2008 for up to 960 hours at 
> $19USD/hr.  The
> contract would be in accordance with RFC 9: GDAL Paid Maintainer 
> Guidelines.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From dron at ak4719.spb.edu  Wed Feb 20 13:03:11 2008
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Feb 20 13:21:08 2008
Subject: [gdal-dev] Motion: Authorize
In-Reply-To: <47BC6AC7.3010507@pobox.com>
References: <47BC6AC7.3010507@pobox.com>
Message-ID: <20080220180311.GA24107@ak4719.spb.edu>

On Wed, Feb 20, 2008 at 01:00:39PM -0500, Frank Warmerdam wrote:
> Motion: To authorize Frank Warmerdam to negotiate a maintainer
> contract with Mateusz Loskot for March to August 2008 for up to 960
> hours at $19USD/hr.  The contract would be in accordance with RFC 9:
> GDAL Paid Maintainer Guidelines.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517
From dickeya at gmail.com  Wed Feb 20 13:22:06 2008
From: dickeya at gmail.com (Jamie Adams)
Date: Wed Feb 20 13:22:11 2008
Subject: [gdal-dev] advice on feathering rasters together?
In-Reply-To: <47BB7C82.4020009@gov.yk.ca>
References: <47BB7C82.4020009@gov.yk.ca>
Message-ID: <f4339510802201022s2252135ak78fc5c3c2ff48fec@mail.gmail.com>

Hey Matt,

I recently encountered this exact same problem and would like to find a gdal
based solution.  I ended up solving the problem in Grass by creating a
grayscale mask of the replacement area and used a convolution filter to
feather the edge.  I used this in r.mapcalc to weight the addition of the
two rasters.

It seems this approach could be duplicated with gdal / python.  The main
issue would be the creation of the mask to weight the feathering.  The rest
should be pretty simple math.

Let me know if you've heard any other solutions, I'd be interested in
pursuing this more.

Thanks,

Jamie Adams

On Feb 19, 2008 5:04 PM, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:

> Hello,
>
> Does anyone have any advice on how to feather rasters together so there
> is not an abrubt transition from one to the other?
>
> The circumstance: I have 16bit integer raster (a DEM) with some areas in
> it I want to fix (lakes which should be flat). I've created a second
> raster with the desired replacement values (fixed_lakes). However if I
> blindly just substitute fixed_lakes.tif for dem.tif there are some
> pretty abrubt transitions which are sometimes worse than the original
> problem.
>
> I've done this before using Gimp and 8bit images but gimp can't load
> 16bit images without losing half the bits. (in layer pallet stack
> fixed.tif over original.tif > transparency to selection for fixed layer
>  > invert selection > expand X pixels > feather > flatten image; restore
> spatial reference with gdalcopyproj.py)
>
> thanks in advance for your thoughts,
>
> --
> matt wilkie
> --------------------------------------------
> Geographic Information,
> Information Management and Technology,
> Yukon Department of Environment
> 10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
> 867-667-8133 Tel * 867-393-7003 Fax
> http://environmentyukon.gov.yk.ca/geomatics/
> --------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080220/f8f54d69/attachment.html
From hobu.inc at gmail.com  Wed Feb 20 14:13:31 2008
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Feb 20 14:15:39 2008
Subject: [gdal-dev] Motion: Authorize
In-Reply-To: <20080220180311.GA24107@ak4719.spb.edu>
References: <47BC6AC7.3010507@pobox.com>
	<20080220180311.GA24107@ak4719.spb.edu>
Message-ID: <E6B8BA86-EE19-4558-B1B3-21727788DD92@gmail.com>


On Feb 20, 2008, at 12:03 PM, Andrey Kiselev wrote:

> On Wed, Feb 20, 2008 at 01:00:39PM -0500, Frank Warmerdam wrote:
>> Motion: To authorize Frank Warmerdam to negotiate a maintainer
>> contract with Mateusz Loskot for March to August 2008 for up to 960
>> hours at $19USD/hr.  The contract would be in accordance with RFC 9:
>> GDAL Paid Maintainer Guidelines.
>
> +1

+1
From even.rouault at mines-paris.org  Wed Feb 20 14:28:40 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Feb 20 14:28:45 2008
Subject: [gdal-dev] Motion: Authorize
In-Reply-To: <47BC6AC7.3010507@pobox.com>
References: <47BC6AC7.3010507@pobox.com>
Message-ID: <200802202028.41896.even.rouault@mines-paris.org>

+1

Even.

Le Wednesday 20 February 2008 19:00:39 Frank Warmerdam, vous avez ?crit?:
> Motion: To authorize Frank Warmerdam to negotiate a maintainer contract
> with Mateusz Loskot for March to August 2008 for up to 960 hours at
> $19USD/hr.  The contract would be in accordance with RFC 9: GDAL Paid
> Maintainer Guidelines.
>
> ---
>
> This contract, if Mateusz were able to bill for all of the time, would be
> $18240.00 USD.  We currently have a little over $13000 on hand and with
> anticipated sponsorship renewals I anticipate no problem meeting the full
> amount.
>
> Best regards,


From szekerest at gmail.com  Wed Feb 20 14:35:39 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Feb 20 14:35:41 2008
Subject: [gdal-dev] Motion: Authorize
In-Reply-To: <47BC6AC7.3010507@pobox.com>
References: <47BC6AC7.3010507@pobox.com>
Message-ID: <f3b73b7d0802201135k1fe098a2t2017834ee4779684@mail.gmail.com>

+1

Tamas


2008/2/20, Frank Warmerdam <warmerdam@pobox.com>:
> Motion: To authorize Frank Warmerdam to negotiate a maintainer contract with
> Mateusz Loskot for March to August 2008 for up to 960 hours at $19USD/hr.  The
> contract would be in accordance with RFC 9: GDAL Paid Maintainer Guidelines.
>
> ---
>
> This contract, if Mateusz were able to bill for all of the time, would be
> $18240.00 USD.  We currently have a little over $13000 on hand and with
> anticipated sponsorship renewals I anticipate no problem meeting the full
> amount.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From cjanssen at iavo-rs.com  Wed Feb 20 15:30:52 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Wed Feb 20 15:30:57 2008
Subject: [gdal-dev] OGR Spatial reference shifting
Message-ID: <F0F496F9-2B3A-432F-9D7E-226C5AA4FECB@iavo-rs.com>

Does anyone else notice issues using the coordinate conversion in OGR Spatial Reference. When I try to convert from a state plane system in US feet to WGS84 Lat/Lon everything is shifted about 1.75 degrees to the east. Specifically I'm converting Nad83 State Plane 101 (Alabama East)  US Feet to WGS84 Lat/Lon meters. Maybe this is a Proj.4 issue but I'm not sure, any help would be greatly appreciated.

Christiaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080220/8b478314/attachment.html
From szekerest at gmail.com  Wed Feb 20 15:33:28 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Feb 20 15:33:32 2008
Subject: [gdal-dev] issues with GDAL 1.5,
	Mapserver 5 and Virtual Spatial Data through OCI?
In-Reply-To: <47BC6EA4.70805@osgis.nl>
References: <47BC6EA4.70805@osgis.nl>
Message-ID: <f3b73b7d0802201233pcd7a2b6v94af053229bcd5d6@mail.gmail.com>

Bart,

I don't know whether it applies to this, but recently I've made a fix
in the SVN trunk so as to  have the VRT+OCI combination work.

Best regards,

Tamas



2008/2/20, Bart van den Eijnden (OSGIS) <bartvde@osgis.nl>:
> Hi list,
>
> are there any known issues with the above combination?
>
> When we use Mapserver 5 in combination with GDAL 1.3.2, all works as
> expected. But when we upgraded to GDAL 1.5 the layers don't draw
> anything anymore, using CPL_DEBUG we can see 25 rows being retrieved
> though. Using ogrinfo we can see all the data correctly.
>
> Any ideas/pointers? TIA.
>
> Best regards,
> Bart
>
> --
> Bart van den Eijnden
> OSGIS, Open Source GIS
> bartvde@osgis.nl
> http://www.osgis.nl
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From matt.wilkie at gov.yk.ca  Wed Feb 20 16:11:53 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Feb 20 16:12:11 2008
Subject: [gdal-dev] advice on feathering rasters together?
In-Reply-To: <f4339510802201022s2252135ak78fc5c3c2ff48fec@mail.gmail.com>
References: <47BB7C82.4020009@gov.yk.ca>
	<f4339510802201022s2252135ak78fc5c3c2ff48fec@mail.gmail.com>
Message-ID: <47BC9799.1060004@gov.yk.ca>

Hi Jamie, thanks for responding.

> I recently encountered this exact same problem and would like to find a 
> gdal based solution.  I ended up solving the problem in Grass by 
> creating a grayscale mask of the replacement area and used a convolution 
> filter to feather the edge.  I used this in r.mapcalc to weight the 
> addition of the two rasters.

Please do tell me more. I'm pretty ignorant when it comes to grass.

> It seems this approach could be duplicated with gdal / python.  The main 
> issue would be the creation of the mask to weight the feathering.  The 
> rest should be pretty simple math.
> 
> Let me know if you've heard any other solutions, I'd be interested in 
> pursuing this more.

Not solutions yet, but a couple of promising trails. Summary of where
I'm at here: http://www.uttara.ca/blog/gis/trying-to-patch-a-dem

cheers,

-matt



From cjanssen at iavo-rs.com  Wed Feb 20 16:43:59 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Wed Feb 20 16:44:12 2008
Subject: [gdal-dev] OGR Spatial reference shifting
In-Reply-To: <036101c87403$f8015560$e8040020$@miller@spatialminds.com>
Message-ID: <A8A4C2F4-92FD-4732-B09A-975489E7B337@iavo-rs.com>

I believe I set all the necessary settings (PROJ_LIB, GEOTIFF_CSV, and GDAL_DATA) to point to the appropriate directories. It seems that this error only occurs in SpatialReference systems using feet as the linear unit.

Christiaan




From: Craig Miller [mailto:craig.miller@spatialminds.com] 
Sent: Wednesday, February 20, 2008 4:03 PM
To: 'Christiaan Janssen'
Subject: RE: [gdal-dev] OGR Spatial reference shifting


It sounds like the datum isn't getting shifted.  Does GDAL know where to find your nad data?
 
Craig
 
 
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Christiaan Janssen
Sent: Wednesday, February 20, 2008 12:31 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] OGR Spatial reference shifting
 
Does anyone else notice issues using the coordinate conversion in OGR Spatial Reference. When I try to convert from a state plane system in US feet to WGS84 Lat/Lon everything is shifted about 1.75 degrees to the east. Specifically I'm converting Nad83 State Plane 101 (Alabama East)  US Feet to WGS84 Lat/Lon meters. Maybe this is a Proj.4 issue but I'm not sure, any help would be greatly appreciated.
 
Christiaan
 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.5.516 / Virus Database: 269.20.8/1289 - Release Date: 2/20/2008 10:26 AM


No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.516 / Virus Database: 269.20.8/1289 - Release Date: 2/20/2008 10:26 AM
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080220/bb167f82/attachment.html
From jluis at ualg.pt  Wed Feb 20 17:39:08 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Feb 20 17:39:13 2008
Subject: [gdal-dev] advice on feathering rasters together?
In-Reply-To: <47BC9799.1060004@gov.yk.ca>
References: <47BB7C82.4020009@gov.yk.ca>	<f4339510802201022s2252135ak78fc5c3c2ff48fec@mail.gmail.com>
	<47BC9799.1060004@gov.yk.ca>
Message-ID: <47BCAC0C.1030103@ualg.pt>

Matt Wilkie wrote:
> Not solutions yet, but a couple of promising trails. Summary of where
> I'm at here: http://www.uttara.ca/blog/gis/trying-to-patch-a-dem

Matt,
I'm not familiar with the "feathering" term but if what you want is to 
have your DEM flat at the lakes position than both of your "dem.tif" and 
"lakes.tif" files should have exactly the same number of rows/columns. 
Which they have not.
I don't know a gdal solution but it Matlab (vectorial coding) it would 
be something very close to this two lines.

# let 'lakes' and 'dem' be variables with the contents of their 
corresponding files
mask_lakes = (lakes > 0); % a binary logical array
dem(mask_lakes) = lakes(mask_lakes);

P.S. Those Mirone "intriguing things like grdfilter which ... I don?t 
understand" are very well described in the GMT manual. Its so because 
they are MEX ports (a Matlab term to designate wraps to compiled C or 
fortran code that runs under ML) of corresponding GMT modules.

Joaquim Luis
From matt.wilkie at gov.yk.ca  Wed Feb 20 18:49:37 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Feb 20 18:51:29 2008
Subject: [gdal-dev] advice on feathering rasters together?
In-Reply-To: <47BCAC0C.1030103@ualg.pt>
References: <47BB7C82.4020009@gov.yk.ca>	<f4339510802201022s2252135ak78fc5c3c2ff48fec@mail.gmail.com>
	<47BC9799.1060004@gov.yk.ca> <47BCAC0C.1030103@ualg.pt>
Message-ID: <47BCBC91.9010605@gov.yk.ca>

Hi Jaoquim,

> I'm not familiar with the "feathering" term 

I got the term from using photo editing programs like Gimp or Photoshop 
when doing similar operations (which I'd be using here except that 
source data are 16bit) A couple of examples:
http://www.novell.com/coolsolutions/feature/11636.html
and the gimp manual here: http://docs.gimp.org/en/gimp-painting.html

 > ...but if what you want is to
> have your DEM flat at the lakes position than both of your "dem.tif" and 
> "lakes.tif" files should have exactly the same number of rows/columns. 
> Which they have not.

Oops, thanks for pointing that out (not that gdal should care as long as 
they are georeferenced properly).

> I don't know a gdal solution but it Matlab (vectorial coding) it would 
> be something very close to this two lines.
...
> P.S. Those Mirone "intriguing things like grdfilter which ... I don?t 
> understand" are very well described in the GMT manual. 

ahhh, thanks for that. I'll go look it up.

-matt

From warmerdam at pobox.com  Wed Feb 20 19:10:20 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 20 19:10:55 2008
Subject: [gdal-dev] OGR Spatial reference shifting
In-Reply-To: <F0F496F9-2B3A-432F-9D7E-226C5AA4FECB@iavo-rs.com>
References: <F0F496F9-2B3A-432F-9D7E-226C5AA4FECB@iavo-rs.com>
Message-ID: <47BCC16C.5070302@pobox.com>

Christiaan Janssen wrote:
> Does anyone else notice issues using the coordinate conversion in OGR 
> Spatial Reference. When I try to convert from a state plane system in US 
> feet to WGS84 Lat/Lon everything is shifted about 1.75 degrees to the 
> east. Specifically I'm converting Nad83 State Plane 101 (Alabama East)  
> US Feet to WGS84 Lat/Lon meters. Maybe this is a Proj.4 issue but I'm 
> not sure, any help would be greatly appreciated.

Christiaan,

There are many things that can go wrong.  :-(

Can you be more specific about exactly what you are doing, how you are
specifying the input and output coordinate system, what results you get
(ie. a sample point in and out) and why you believe the result is wrong?

1.75 degrees is a big error, so it clearly isn't a datum shifting error.
It could be a linear units issue (feet vs. meters) for either the
false easting/northings or the actual values being transformed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From cjanssen at iavo-rs.com  Wed Feb 20 19:37:50 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Wed Feb 20 19:38:09 2008
Subject: [gdal-dev] OGR Spatial reference shifting
In-Reply-To: <47BCC16C.5070302@pobox.com>
Message-ID: <B1D92C97-6883-4AD1-8DF3-DC9C64E5F4F5@iavo-rs.com>

As it turns out the issue was a false easting due to not supplying the unit type in the setStatePlane function. After using the setStatePlane function I called the setLinearUnits which apparently didn't have the same effect (understandly). Now... another issue, I'm using the OGRCoordinateConversion function to convert from NAD83 StatePlane 3200 meters to NAD83 StatePlane 3200 feet and everything is correct except the Z value is not being converted. Any clue on this one. Thanks all for the help.

Christiaan

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, February 20, 2008 7:10 PM
To: Christiaan Janssen
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGR Spatial reference shifting

Christiaan Janssen wrote:
> Does anyone else notice issues using the coordinate conversion in OGR 
> Spatial Reference. When I try to convert from a state plane system in 
> US feet to WGS84 Lat/Lon everything is shifted about 1.75 degrees to 
> the east. Specifically I'm converting Nad83 State Plane 101 (Alabama 
> East) US Feet to WGS84 Lat/Lon meters. Maybe this is a Proj.4 issue 
> but I'm not sure, any help would be greatly appreciated.

Christiaan,

There are many things that can go wrong.  :-(

Can you be more specific about exactly what you are doing, how you are specifying the input and output coordinate system, what results you get (ie. a sample point in and out) and why you believe the result is wrong?

1.75 degrees is a big error, so it clearly isn't a datum shifting error.
It could be a linear units issue (feet vs. meters) for either the false easting/northings or the actual values being transformed.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org




From jluis at ualg.pt  Wed Feb 20 19:35:35 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Feb 20 21:38:31 2008
Subject: [gdal-dev] opendap?
Message-ID: <47BCC757.1080305@ualg.pt>

Hi,

I'm trying to access to this (for example) file on a opendap server but 
with no success

d:\programas\FWTools2.1.0>gdalinfo 
"http://sift.pmel.noaa.gov/cgi-bin/nph-dods/data/d1/s_1771_516_ha.nc"

ERROR 4: `/vsimem/http/00E8FC18.dat' not recognised as a supported file 
format.
ERROR 4: `/vsimem/http/00E8FC18.dat' not recognised as a supported file 
format.

notice that this works

wget http://sift.pmel.noaa.gov/cgi-bin/nph-dods/data/d1/s_1771_516_ha.nc.dds

Also, I don't see the DODS driver listed not even in the latest 2.1.0 
FWtools


Joaquim
 

From warmerdam at pobox.com  Wed Feb 20 22:19:28 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 20 22:50:27 2008
Subject: [gdal-dev] opendap?
In-Reply-To: <47BCC757.1080305@ualg.pt>
References: <47BCC757.1080305@ualg.pt>
Message-ID: <47BCEDC0.2060406@pobox.com>

Joaquim Luis wrote:
> Hi,
> 
> I'm trying to access to this (for example) file on a opendap server but 
> with no success
> 
> d:\programas\FWTools2.1.0>gdalinfo 
> "http://sift.pmel.noaa.gov/cgi-bin/nph-dods/data/d1/s_1771_516_ha.nc"
> 
> ERROR 4: `/vsimem/http/00E8FC18.dat' not recognised as a supported file 
> format.
> ERROR 4: `/vsimem/http/00E8FC18.dat' not recognised as a supported file 
> format.
> 
> notice that this works
> 
> wget 
> http://sift.pmel.noaa.gov/cgi-bin/nph-dods/data/d1/s_1771_516_ha.nc.dds
> 
> Also, I don't see the DODS driver listed not even in the latest 2.1.0 
> FWtools

Joaquim,

I'm sorry, but DODS/OPeNDAP support is not built into FWTools on windows.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Wed Feb 20 23:13:09 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 20 23:13:33 2008
Subject: [gdal-dev] OGR Spatial reference shifting
In-Reply-To: <F0F496F9-2B3A-432F-9D7E-226C5AA4FECB@iavo-rs.com>
References: <F0F496F9-2B3A-432F-9D7E-226C5AA4FECB@iavo-rs.com>
Message-ID: <47BCFA55.1000800@pobox.com>

Christiaan Janssen wrote:
> Does anyone else notice issues using the coordinate conversion in OGR 
> Spatial Reference. When I try to convert from a state plane system in US 
> feet to WGS84 Lat/Lon everything is shifted about 1.75 degrees to the 
> east. Specifically I'm converting Nad83 State Plane 101 (Alabama East)  
> US Feet to WGS84 Lat/Lon meters. Maybe this is a Proj.4 issue but I'm 
> not sure, any help would be greatly appreciated.

Christiaan,

There are many things that can go wrong.  :-(

Can you be more specific about exactly what you are doing, how you are
specifying the input and output coordinate system, what results you get
(ie. a sample point in and out) and why you believe the result is wrong?

1.75 degrees is a big error, so it clearly isn't a datum shifting error.
It could be a linear units issue (feet vs. meters) for either the
false easting/northings or the actual values being transformed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From bhagwat.maimt at gmail.com  Thu Feb 21 01:57:34 2008
From: bhagwat.maimt at gmail.com (bargi)
Date: Thu Feb 21 01:57:37 2008
Subject: [Gdal-dev] Problem in Coordinate Transformation
Message-ID: <15605836.post@talk.nabble.com>


Hi to all,

I am working on a project in which I have to project shapefiles on our
Application.

I am facing problem in transforming coordinate from one system to another
................

I googled a lot and found some code and try to run it.........but Its not
working properly..............

The code is as follow:

[code]
    if ( !__GOOGRFeatureSourceDriversRegistered ) {
        OGRRegisterAll();
        __GOOGRFeatureSourceDriversRegistered = true;
    }

     OGRDataSource *ogrDataSource = OGRSFDriverRegistrar::Open( qPrintable(
file ));

   
     if ( !ogrDataSource ) {
         return false;
     }


const int nLayers = ogrDataSource->GetLayerCount();
     
     OGRLayer *layer = ogrDataSource->GetLayer( 0 );
     m_displayName   = layer->GetLayerDefn()->GetName();
     m_path          = file;
     m_driverName    = ogrDataSource->GetDriver()->GetName();
     
     for ( int i = 0; i < nLayers; ++i ) {
         layer = ogrDataSource->GetLayer( i );
         OGRSpatialReference*    pSourceSRS = layer->GetSpatialRef();
         OGRSpatialReference*    pTargetSRS = pSourceSRS->Clone();
         pTargetSRS->SetProjCS("TM");
         pTargetSRS->SetTM(0,0,1,0,0);
         OGRGeometry*  poGeometry;
         double x,y;
         

        OGRCoordinateTransformation* poCT =
OGRCreateCoordinateTransformation(pSourceSRS,pTargetSRS);
       
          layer->ResetReading();  

         OGRFeature *ogrFeature = 0;
         
         while ( (ogrFeature = layer->GetNextFeature()) ) {
                 
               poGeometry = ogrFeature->GetGeometryRef();
                if (poGeometry !=NULL)  {
             if (wkbFlatten(poGeometry->getGeometryType()) == wkbLineString)
{
                 OGRPoint *poPoint = (OGRPoint *) poGeometry;
                 x = poPoint->getX();
                 y = poPoint->getY();
               if (poCT!= NULL || !poCT->Transform(1,&x,&y)) {
                   poPoint->setX(x);    //Set coordinate
                   poPoint->setY(y);
                   qDebug()<< poCT;  
                   printf( "(\n%f,%f) ->
(%f,%f)\n",poPoint->getX(),poPoint->getY(),x, y );
                     
                   GOFeature *feature = new GOFeature( ogrFeature );
                   features.push_back( feature );
                 
                }
             }
         }
     }
  }
[/code]

But it is not changing the coordinate............

The output is as follow when printf statement run......

(0.000000,0.000000) -> (0.000000,0.000000)

I am not able to understand where is the problem ?????

I this forum I found a post in which there was given suggestion for
Transformation  which is as follow:

[code]

 o Create a new layer for the output.
 o Make sure you pass the altered OGRSpatialReference to the
    CreateLayer() call.
 o You might as well just call transform() on the geometry
    instead of extracting the point and transforming that.

[/code]

When I try to use CreateLayer("MyFile",pTargetSRS,wkbunknow,null) function
,It gives error that ABC.shp file open in readonly ,MyFile cannot be
created........

The following line

 features.push_back( feature );

Is for adding features to a list from which we can extract features to
draw................

Also please tell me how can I stored changed coordinate of features and
retrieve them later..........

Any queries are welcome.........


Please help me to resolve the problem and please give steps of
implementation.....


Thanks 
-- 
View this message in context: http://www.nabble.com/Problem-in-Coordinate-Transformation-tp15605836p15605836.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From cjanssen at iavo-rs.com  Thu Feb 21 09:14:17 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Thu Feb 21 09:15:03 2008
Subject: [gdal-dev] OGR Spatial reference conversion
In-Reply-To: <B1D92C97-6883-4AD1-8DF3-DC9C64E5F4F5@iavo-rs.com>
Message-ID: <7ABAA311-4CD5-4C33-B90B-AAB35A8CAF03@iavo-rs.com>

Here's a snippet of code I used to test the conversion from one spatial reference system to another:


int err;
double x, y, z;
OGRCoordinateTransformation* ctTrans;
OGRSpatialReference* srFeet = new OGRSpatialReference();
OGRSpatialReference* srMeter = new OGRSpatialReference();

srFeet->SetStatePlane(3200, 1, SRS_UL_US_FOOT, atof(SRS_UL_US_FOOT_CONV));	//NAD83 North Carolina
srMeter->SetStatePlane(3200, 1, SRS_UL_METER, 1.0);					//NAD83 North Carolina
ctTrans = OGRCreateCoordinateTransformation(srFeet, srMeter);

x = 618067.37752800086;
y = 248532.06376793334;
z = 1210.7631359994411;
err = ctTrans->Transform(1, &x, &y, &z);

//Results from function call
//x = 188387.31344515912	<-Correct
//y = 75752.724541875374	<-Correct
//z = 1210.7631359994411	<-Wrong
//err = 1

If anyone could help to understand what I am doing wrong I'd greatly appreciate it... and thanks for the help thus far.

Christiaan

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Christiaan Janssen
Sent: Wednesday, February 20, 2008 7:38 PM
To: Frank Warmerdam
Cc: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] OGR Spatial reference shifting

As it turns out the issue was a false easting due to not supplying the unit type in the setStatePlane function. After using the setStatePlane function I called the setLinearUnits which apparently didn't have the same effect (understandly). Now... another issue, I'm using the OGRCoordinateConversion function to convert from NAD83 StatePlane 3200 meters to NAD83 StatePlane 3200 feet and everything is correct except the Z value is not being converted. Any clue on this one. Thanks all for the help.

Christiaan

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Wednesday, February 20, 2008 7:10 PM
To: Christiaan Janssen
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGR Spatial reference shifting

Christiaan Janssen wrote:
> Does anyone else notice issues using the coordinate conversion in OGR 
> Spatial Reference. When I try to convert from a state plane system in 
> US feet to WGS84 Lat/Lon everything is shifted about 1.75 degrees to 
> the east. Specifically I'm converting Nad83 State Plane 101 (Alabama
> East) US Feet to WGS84 Lat/Lon meters. Maybe this is a Proj.4 issue 
> but I'm not sure, any help would be greatly appreciated.

Christiaan,

There are many things that can go wrong.  :-(

Can you be more specific about exactly what you are doing, how you are specifying the input and output coordinate system, what results you get (ie. a sample point in and out) and why you believe the result is wrong?

1.75 degrees is a big error, so it clearly isn't a datum shifting error.
It could be a linear units issue (feet vs. meters) for either the false easting/northings or the actual values being transformed.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org




_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From bartvde at osgis.nl  Thu Feb 21 12:18:33 2008
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Thu Feb 21 12:18:25 2008
Subject: [gdal-dev] issues with GDAL 1.5, Mapserver 5 and Virtual Spatial
	Data through OCI?
In-Reply-To: <f3b73b7d0802201233pcd7a2b6v94af053229bcd5d6@mail.gmail.com>
References: <47BC6EA4.70805@osgis.nl>
	<f3b73b7d0802201233pcd7a2b6v94af053229bcd5d6@mail.gmail.com>
Message-ID: <47BDB269.9070909@osgis.nl>

Hi Tamas,

it turned out we needed to recompile Mapserver against the new GDAL 
version to get things to work.

Best regards,
Bart

Tamas Szekeres schreef:
> Bart,
>
> I don't know whether it applies to this, but recently I've made a fix
> in the SVN trunk so as to  have the VRT+OCI combination work.
>
> Best regards,
>
> Tamas
>
>
>
> 2008/2/20, Bart van den Eijnden (OSGIS) <bartvde@osgis.nl>:
>   
>> Hi list,
>>
>> are there any known issues with the above combination?
>>
>> When we use Mapserver 5 in combination with GDAL 1.3.2, all works as
>> expected. But when we upgraded to GDAL 1.5 the layers don't draw
>> anything anymore, using CPL_DEBUG we can see 25 rows being retrieved
>> though. Using ogrinfo we can see all the data correctly.
>>
>> Any ideas/pointers? TIA.
>>
>> Best regards,
>> Bart
>>
>> --
>> Bart van den Eijnden
>> OSGIS, Open Source GIS
>> bartvde@osgis.nl
>> http://www.osgis.nl
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>     
>
>
>   


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
bartvde@osgis.nl
http://www.osgis.nl

From mrosen at lizardtech.com  Thu Feb 21 13:06:36 2008
From: mrosen at lizardtech.com (Michael S. Rosen)
Date: Thu Feb 21 13:06:38 2008
Subject: [gdal-dev] .aux file creation
In-Reply-To: <b3161b42-e184-4f59-b0d1-15cd668f93b5@e6g2000prf.googlegroups.com>
References: <b3161b42-e184-4f59-b0d1-15cd668f93b5@e6g2000prf.googlegroups.com>
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD1201C029C8@sea-srv-ms3.lizardtech.com>

Odd.  Is ArcGIS 9.2 is fully Service Packed?  My experience is that 9.2
SP4 reads MrSID projection information correctly.

msr
-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of
estrada.adam@gmail.com
Sent: Monday, February 18, 2008 7:12 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] .aux file creation

All,
    I have a large amount of MrSID files that were created and are
without the corresponding .aux file.  Even though each MrSID is
properly projected and has the correct map information, ArcGIS (v 9.2)
still does not read it correctly and throws up a warning dialog
stating that there is no spatial reference.  Is there a way to batch
create these files using GDAL?  I see that gdaladdo will create
an .aux file but I belive that this is primarily for pyramid layers
for each image and of course this is not needed for MrSID.

AWE
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Thu Feb 21 19:36:49 2008
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Feb 21 19:36:58 2008
Subject: [gdal-dev] opendap?
In-Reply-To: <47BCEDC0.2060406@pobox.com>
References: <47BCC757.1080305@ualg.pt> <47BCEDC0.2060406@pobox.com>
Message-ID: <47BE1921.4070703@ualg.pt>

Frank Warmerdam wrote:
> Joaquim Luis wrote:
>> Hi,
>>
>> I'm trying to access to this (for example) file on a opendap server 
>> but with no success
>>
>> d:\programas\FWTools2.1.0>gdalinfo 
>> "http://sift.pmel.noaa.gov/cgi-bin/nph-dods/data/d1/s_1771_516_ha.nc"
>>
>> ERROR 4: `/vsimem/http/00E8FC18.dat' not recognised as a supported 
>> file format.
>> ERROR 4: `/vsimem/http/00E8FC18.dat' not recognised as a supported 
>> file format.
>>
>> notice that this works
>>
>> wget 
>> http://sift.pmel.noaa.gov/cgi-bin/nph-dods/data/d1/s_1771_516_ha.nc.dds
>>
>> Also, I don't see the DODS driver listed not even in the latest 2.1.0 
>> FWtools
>
> Joaquim,
>
> I'm sorry, but DODS/OPeNDAP support is not built into FWTools on windows.
>
> Best regards,

Frank,

Does that mean we cannot build it on windows?
I noticed that the dods directory doesn't have a makefile.vc

Joaquim
From warmerdam at pobox.com  Thu Feb 21 19:51:17 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 21 19:51:35 2008
Subject: [gdal-dev] opendap?
In-Reply-To: <47BE1921.4070703@ualg.pt>
References: <47BCC757.1080305@ualg.pt> <47BCEDC0.2060406@pobox.com>
	<47BE1921.4070703@ualg.pt>
Message-ID: <47BE1C85.1000400@pobox.com>

Joaquim Luis wrote:
> Frank,
> 
> Does that mean we cannot build it on windows?
> I noticed that the dods directory doesn't have a makefile.vc

Joaquim,

It means, building it isn't supported on windows.  But if you did have
OPeNDAP built already, it should be pretty easy to add it to
gdal/frmts/makefile.vc, and create a small gdal/frmts/dods/makefile.vc.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From vdharan2001 at gmail.com  Fri Feb 22 01:19:23 2008
From: vdharan2001 at gmail.com (vdharan nadra)
Date: Fri Feb 22 01:19:26 2008
Subject: [gdal-dev] Which Linux OS to use when GDAL/OGR is used.
In-Reply-To: <47BC45C4.7050304@pobox.com>
References: <d29760880802200415m59b74978r35203a4ee0a4454d@mail.gmail.com>
	<47BC45C4.7050304@pobox.com>
Message-ID: <d29760880802212219u108ff902ubf445776797c45b0@mail.gmail.com>

Thank You friends for all your suggestions.

Iam planning to go for RHEL 5.

Best Regards,
N.Vidhiyadharan


On Wed, Feb 20, 2008 at 6:22 PM, Frank Warmerdam <warmerdam@pobox.com>
wrote:

> vdharan nadra wrote:
> > HI,
> >
> > We are going to hire a server and going to use GDAL/OGR .Can any one
> > help me to select the best one from the following.
> > 1. Red Hat enterprise 4
> > 2. Red Hat enterprise 5
> > 3. Cent OS 4
> > 4. Cent OS 5
> >
> > Also if i want to use FWTools installer please tell me for which of
> > the above OS it is supported.
>
> N.Vidhiyadharan,
>
> GDAL works well on any pretty much any 32bit x86 linux and should work
> fine
> on any of the above.  FWTools should also specifically work on any of the
> above.  So, you might as well look at other criteria (price, more recent,
> etc).
>
> I would note that if Debian were trivially available it is nice because
> many GIS packages have been packaged for it by the DebianGIS project.
> But if FWTools has what you need then any of them will do.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080222/17106f03/attachment.html
From xingfu81 at gmail.com  Fri Feb 22 05:34:24 2008
From: xingfu81 at gmail.com (lee heng hock)
Date: Fri Feb 22 05:34:28 2008
Subject: [gdal-dev] Question regarding overviews
Message-ID: <361c82e30802220234p5cf598fcg5d6ca1060bc443a3@mail.gmail.com>

Hi,

Issue1:
Can we build overviews on a paletted geotiff map? or it has to apply only to
rgb maps?

Issue2 :
I have a georeferenced geotiff map (with only 1 raster band) which is large
in size probably a few hundred Mb which i like to load in my app. So i use
GDALBuildOverviews to build overviews so that I can load lower resolution
maps at smaller scales to beef up performance.

However, I noticed that after the building process is done, when i do this:
rasterband->GetOverviewCount(), the result is not 0 which is normal since i
built overviews.

But when I do:
rasterband->GetOverview(0)->GetOverviewCount(); the overview count is
also not 0. Why is this so ? shouldnt there be just one layer of overviews?

Thanks
Lee


-- 
Regards
Heng Hock
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080222/4d4faef3/attachment.html
From wollez at gmx.net  Fri Feb 22 09:47:50 2008
From: wollez at gmx.net (WolfgangZ)
Date: Fri Feb 22 09:48:06 2008
Subject: [gdal-dev] gdal_merge and BIGTIFF option fails
Message-ID: <fpmnap$66h$1@ger.gmane.org>

Hi,
I'm trying to merge some tiles into a single tiff file that will be 
bigger than 4 GB. But when it reaches the 4GB the following error occurs:
FIFFWriteEncodedTile() failed
TIFFAppendToStrip: Maximum TIFF file size exeeded.

I have also to report that in the very beginning I get following error:
TIFFFetchStripThing: Sanity check on size of "TileOffsets" value failed.

I'm using WFTools 2.0.4 on Ubuntu

Any suggestions
Wolfgang

From warmerdam at pobox.com  Fri Feb 22 10:08:24 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 22 10:08:41 2008
Subject: [gdal-dev] Question regarding overviews
In-Reply-To: <361c82e30802220234p5cf598fcg5d6ca1060bc443a3@mail.gmail.com>
References: <361c82e30802220234p5cf598fcg5d6ca1060bc443a3@mail.gmail.com>
Message-ID: <47BEE568.7040902@pobox.com>

lee heng hock wrote:
> Hi,
>  
> Issue1:
> Can we build overviews on a paletted geotiff map? or it has to apply 
> only to rgb maps?

Lee,

Yes, but you must be careful only to use the default nearest neighbour
resampling with non-continuous paletted images, not averaging, when
building the overviews.

> Issue2 :
> I have a georeferenced geotiff map (with only 1 raster band) which is 
> large in size probably a few hundred Mb which i like to load in my app. 
> So i use GDALBuildOverviews to build overviews so that I can load lower 
> resolution maps at smaller scales to beef up performance.
>  
> However, I noticed that after the building process is done, when i do this:
> rasterband->GetOverviewCount(), the result is not 0 which is normal 
> since i built overviews.
>  
> But when I do:
> rasterband->GetOverview(0)->GetOverviewCount(); the overview count is 
> also not 0. Why is this so ? shouldnt there be just one layer of overviews?

Hmm, I thought I avoided representing non-base layers as having overviews,
but apparently not.  My advice to you is to ignore this and just don't ask
overviews if they have overviews.  But I would also encourage you to file
a ticket on this issue so that the GTiff driver can be fixed up to behave
more appropriately.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Feb 22 10:55:44 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 22 10:56:03 2008
Subject: [gdal-dev] gdal_merge and BIGTIFF option fails
In-Reply-To: <fpmnap$66h$1@ger.gmane.org>
References: <fpmnap$66h$1@ger.gmane.org>
Message-ID: <47BEF080.8080508@pobox.com>

WolfgangZ wrote:
> Hi,
> I'm trying to merge some tiles into a single tiff file that will be 
> bigger than 4 GB. But when it reaches the 4GB the following error occurs:
> FIFFWriteEncodedTile() failed
> TIFFAppendToStrip: Maximum TIFF file size exeeded.
> 
> I have also to report that in the very beginning I get following error:
> TIFFFetchStripThing: Sanity check on size of "TileOffsets" value failed.
> 
> I'm using WFTools 2.0.4 on Ubuntu

Wolfgang,

I tried creating a bigtiff with gdal_translate and FWTools 2.0.6 and it
seemed to work.  I suspect this was a temporarily problem fixed since
2.0.4.  Could you try again with 2.0.6 and if the problem persists
file a ticket against GDAL with the details?

I did:

gdal_translate ~/utm.tif -outsize 100000 50000 big.tif

which with debug enabled reported:

GDAL: GDALOpen(/wrk/home/warmerda/utm.tif) succeeds as GTiff.
Input file size is 512, 512
0GTiff: Automatically flipping to Bigtiff due to large file size
GDAL: GDALOpen(big.tif) succeeds as GTiff.
GDAL: GDALDatasetCopyWholeRaster(): 100 line swath, bInterleave=0
...10...20...30...40...50...60...70...80...90...100 - done.
GDAL: GDALClose(big.tif)
GDAL: GDALClose()
GDAL: GDALClose(/wrk/home/warmerda/utm.tif)
GDAL: GDALDeregister_GTiff() called.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From mitchelljj98 at gmail.com  Fri Feb 22 13:37:22 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Fri Feb 22 13:37:25 2008
Subject: [gdal-dev] nearblack: Warning 1: Band 1 is not of type GDT_Byte. It
	can lead to unexpected results.
Message-ID: <fa2ac0580802221037g1bb23cfcu1b474ec97a418ca5@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: 55439.gdalinfo
Type: application/octet-stream
Size: 5020 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080222/12de7d0b/55439.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 55439_gdalwarp.gdalinfo
Type: application/octet-stream
Size: 1002 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080222/12de7d0b/55439_gdalwarp.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 55439_gdalwarp_nearblack.gdalinfo
Type: application/octet-stream
Size: 1002 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080222/12de7d0b/55439_gdalwarp_nearblack.obj
From estrada.adam at gmail.com  Fri Feb 22 14:05:54 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Fri Feb 22 14:05:56 2008
Subject: [gdal-dev] Re: .aux file creation
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD1201C029C8@sea-srv-ms3.lizardtech.com>
References: <b3161b42-e184-4f59-b0d1-15cd668f93b5@e6g2000prf.googlegroups.com>
	<DBEC881B4E22D1449F5FAC530E1ADD1201C029C8@sea-srv-ms3.lizardtech.com>
Message-ID: <f9dc7ed6-d59c-4af2-ab0b-9216c6acb206@28g2000hsw.googlegroups.com>

Michael,
    ArcGIS 9.2 with SP4 fixed the problem.

AWE

On Feb 21, 1:06?pm, "Michael S. Rosen" <mro...@lizardtech.com> wrote:
> Odd. ?Is ArcGIS 9.2 is fully Service Packed? ?My experience is that 9.2
> SP4 reads MrSID projection information correctly.
>
> msr
>
>
>
> -----Original Message-----
> From: gdal-dev-boun...@lists.osgeo.org
> [mailto:gdal-dev-boun...@lists.osgeo.org] On Behalf Of
> estrada.a...@gmail.com
> Sent: Monday, February 18, 2008 7:12 AM
> To: gdal-...@lists.osgeo.org
> Subject: [gdal-dev] .aux file creation
>
> All,
> ? ? I have a large amount of MrSID files that were created and are
> without the corresponding .aux file. ?Even though each MrSID is
> properly projected and has the correct map information, ArcGIS (v 9.2)
> still does not read it correctly and throws up a warning dialog
> stating that there is no spatial reference. ?Is there a way to batch
> create these files using GDAL? ?I see that gdaladdo will create
> an .aux file but I belive that this is primarily for pyramid layers
> for each image and of course this is not needed for MrSID.
>
> AWE
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev- Hide quoted text -
>
> - Show quoted text -
From estrada.adam at gmail.com  Fri Feb 22 14:17:21 2008
From: estrada.adam at gmail.com (estrada.adam@gmail.com)
Date: Fri Feb 22 14:17:25 2008
Subject: [gdal-dev] FWTools: gdatindex running slow...
Message-ID: <2e7cd598-7f8e-44bd-a916-39854c375165@c33g2000hsd.googlegroups.com>

All,
    I have been using FWTools versions 2.0.4 and 2.1.0 and gdaltindex
is taking considerably more time than in previous versions.  I recall
it not working at all with version 2.0.3!  Earlier versions worked
well and much faster than the current version.  Has anyone else
noticed this performance difference?

AWE
From warmerdam at pobox.com  Fri Feb 22 15:12:40 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 22 15:12:59 2008
Subject: [gdal-dev] FWTools: gdatindex running slow...
In-Reply-To: <2e7cd598-7f8e-44bd-a916-39854c375165@c33g2000hsd.googlegroups.com>
References: <2e7cd598-7f8e-44bd-a916-39854c375165@c33g2000hsd.googlegroups.com>
Message-ID: <47BF2CB8.8050008@pobox.com>

estrada.adam@gmail.com wrote:
> All,
>     I have been using FWTools versions 2.0.4 and 2.1.0 and gdaltindex
> is taking considerably more time than in previous versions.  I recall
> it not working at all with version 2.0.3!  Earlier versions worked
> well and much faster than the current version.  Has anyone else
> noticed this performance difference?

AWE,

I believe this relates to:

   http://trac.osgeo.org/gdal/ticket/2158

If you set the GDAL_LIST_SIBLING_FILES environment variable to FALSE
you may find it speeds up significantly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jim.stcyr at gmail.com  Sat Feb 23 09:30:08 2008
From: jim.stcyr at gmail.com (Jim St.Cyr)
Date: Sat Feb 23 09:30:08 2008
Subject: [Gdal-dev] How determine if lat\lon point falls within a shapefile
Message-ID: <15618562.post@talk.nabble.com>



I have a shapefile and a list of lat\long's that I would like to process in
order to determine if they fall within the shapefile.  GDAL-1.5-py2.5 is
loaded on a windows XP machine and is correctly configured.  I would
appreciate it if someone could point me to a python script or appropriate
documentation to get me strted.  At this point I can't even determine which
part of the GDAL package to use....

Thanks much.

Jim
-- 
View this message in context: http://www.nabble.com/How-determine-if-lat%5Clon-point-falls-within-a-shapefile-tp15618562p15618562.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From 2voodoo at gmx.de  Sat Feb 23 11:45:36 2008
From: 2voodoo at gmx.de (Tom Kazimiers)
Date: Sat Feb 23 11:45:23 2008
Subject: [Gdal-dev] How determine if lat\lon point falls within a shapefile
In-Reply-To: <15618562.post@talk.nabble.com>
References: <15618562.post@talk.nabble.com>
Message-ID: <47C04DB0.1000106@gmx.de>

Jim St.Cyr schrieb:
> I have a shapefile and a list of lat\long's that I would like to process in
> order to determine if they fall within the shapefile.  GDAL-1.5-py2.5 is
> loaded on a windows XP machine and is correctly configured.  I would
> appreciate it if someone could point me to a python script or appropriate
> documentation to get me strted.  At this point I can't even determine which
> part of the GDAL package to use....
>
> Thanks much.
>
> Jim
>   
Is the data of the shapefile also referenced with lat\long values of the 
same geographic coordinate system or do you need to translate them?
I think you could open the shapefile, get the bounding box stored in the 
file (maybe you have to go through all the shapes as the stored bounding 
box in the file must not be correct - at least I do this when loading 
shapefiles) and then compare it to your value.

bye,
Tom
From tutey at o2.pl  Sat Feb 23 14:23:11 2008
From: tutey at o2.pl (Maciej Sieczka)
Date: Sat Feb 23 14:24:44 2008
Subject: [gdal-dev] gdalwarp -co COMPRESSION issues
Message-ID: <47C0729F.9020606@o2.pl>

Hi

The bug http://trac.osgeo.org/gdal/ticket/1689 is still present in 1.5.0 
+ SVN r13865. In that report I mention that gdalwarp creates compressed 
TIFFs 45% bigger than gdal_translate. Recently I've noticed it can even 
produce TIFFs 13 times (!) bigger (and more?).

Given an input GeoTIFF of size 21802684 bytes, the command:

$ gdal_translate -co "COMPRESS=DEFLATE" slope.tif slope_gt.tif

produces it's clone, of the same size - OK. However, the command:

$ gdalwarp -co "COMPRESS=DEFLATE" slope.tif slope_gw.tif

creates a file 13x bigger - 299550004 bytes!


Moreover, if the input file is big enough for gdalwarp with compression 
to try creating 4GB+ raster, it corrupts the output, yielding errors:

0...O10...20...30...40...50...60...70...80...90ERROR 1:
TIFFAppendToStrip:Maximum TIFF file size exceeded
ERROR 1: TIFFAppendToStrip:Maximum TIFF file size exceeded
ERROR 1: TIFFWriteEncodedStrip() failed.

which I guess should not happen, since BigTIFF is enabled - at configure 
I have: "LIBTIFF support: internal (BigTIFF=yes)".


For the above reasons, shouldn't output compression for gdalwarp be 
disabled to avoid data corruption and wasting space? Or would fixing 
another bug, http://trac.osgeo.org/gdal/ticket/1688, fix the compression 
in gdalwarp too?

Maciek
From szekerest at gmail.com  Sat Feb 23 18:00:14 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Feb 23 18:00:17 2008
Subject: [gdal-dev] Is Create() supported with the PNG dataset?
Message-ID: <f3b73b7d0802231500x77dfeac8p7fe808181c6521b2@mail.gmail.com>

Ray,

I'm wondering why SUPPORT_CREATE is not definied by default in pngdataset.cpp?
Do we have any open issues that keep from including the Create() option?

I can see the changeset for this addition
http://trac.osgeo.org/gdal/changeset/11629
but we have no information about the limitations referred in the comment.


Best regards,

Tamas
From even.rouault at mines-paris.org  Sat Feb 23 18:11:13 2008
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Feb 23 18:11:17 2008
Subject: [gdal-dev] Is Create() supported with the PNG dataset?
In-Reply-To: <f3b73b7d0802231500x77dfeac8p7fe808181c6521b2@mail.gmail.com>
References: <f3b73b7d0802231500x77dfeac8p7fe808181c6521b2@mail.gmail.com>
Message-ID: <200802240011.13651.even.rouault@mines-paris.org>

Actually, there's a comment in the code :
"Note: callers must provide blocks in increasing Y order."

Whereas the semantics of Create should allow users to do random writes.

Le Sunday 24 February 2008 00:00:14 Tamas Szekeres, vous avez ?crit?:
> Ray,
>
> I'm wondering why SUPPORT_CREATE is not definied by default in
> pngdataset.cpp? Do we have any open issues that keep from including the
> Create() option?
>
> I can see the changeset for this addition
> http://trac.osgeo.org/gdal/changeset/11629
> but we have no information about the limitations referred in the comment.
>
>
> Best regards,
>
> Tamas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jim.stcyr at gmail.com  Sat Feb 23 19:51:38 2008
From: jim.stcyr at gmail.com (Jim St.Cyr)
Date: Sat Feb 23 19:51:40 2008
Subject: [Gdal-dev] How determine if lat\lon point falls within a shapefile
In-Reply-To: <47C04DB0.1000106@gmx.de>
References: <15618562.post@talk.nabble.com> <47C04DB0.1000106@gmx.de>
Message-ID: <15659292.post@talk.nabble.com>



The shapefiles do use the same lat\lon coordinate system.  What I've been
struggling with is performing the actual point-in-polygon or
point-in-bounding-box check.  I've found formulas and packages such as 'sp'
for 'R' but have yet to find something that ties it all together.  Open the
shapefile and then for each point get a yes or no answer or alternatively
for a multi layer scenario be told which areas within the overall map a
position falls within.  A vendor we work with does it using MapInfo or ESRI
runtimes but I would like to use a python based, OSS solution if possible.

Thanks for the reply.

Jim


Tom Kazimiers wrote:
> 
> Jim St.Cyr schrieb:
>> I have a shapefile and a list of lat\long's that I would like to process
>> in
>> order to determine if they fall within the shapefile.  GDAL-1.5-py2.5 is
>> loaded on a windows XP machine and is correctly configured.  I would
>> appreciate it if someone could point me to a python script or appropriate
>> documentation to get me strted.  At this point I can't even determine
>> which
>> part of the GDAL package to use....
>>
>> Thanks much.
>>
>> Jim
>>   
> Is the data of the shapefile also referenced with lat\long values of the 
> same geographic coordinate system or do you need to translate them?
> I think you could open the shapefile, get the bounding box stored in the 
> file (maybe you have to go through all the shapes as the stored bounding 
> box in the file must not be correct - at least I do this when loading 
> shapefiles) and then compare it to your value.
> 
> bye,
> Tom
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/How-determine-if-lat%5Clon-point-falls-within-a-shapefile-tp15618562p15659292.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From maplabs at light42.com  Sat Feb 23 20:26:32 2008
From: maplabs at light42.com (Brian Hamlin)
Date: Sat Feb 23 20:26:42 2008
Subject: [Gdal-dev] How determine if lat\lon point falls within a shapefile
In-Reply-To: <15659292.post@talk.nabble.com>
References: <15618562.post@talk.nabble.com> <47C04DB0.1000106@gmx.de>
	<15659292.post@talk.nabble.com>
Message-ID: <87F8BF97-E277-11DC-8E7C-000A277A733C@light42.com>

if its Polygons you are looking at and not MultiPolygons, life will be  
a little bit simpler
You can unroll your shapefile in Python and hit detect using any one of  
a few classic algorithms
google "point polygon python"

if you have multipolygons, you have to check each one
if you have to transform coordinate systems, you need to do that first

check GDAL autotest for some samples, and a few in the source tree  
itself

btw- you are using OGR, not GDAL itself
GDAL is basically for raster data, OGR is geometry

-Brian

On Feb 23, 2008, at 4:51 PM, Jim St.Cyr wrote:
>
> The shapefiles do use the same lat\lon coordinate system.  What I've  
> been
> struggling with is performing the actual point-in-polygon or
> point-in-bounding-box check.  I've found formulas and packages such as  
> 'sp'
> for 'R' but have yet to find something that ties it all together.   
> Open the
> shapefile and then for each point get a yes or no answer or  
> alternatively
> for a multi layer scenario be told which areas within the overall map a
> position falls within.  A vendor we work with does it using MapInfo or  
> ESRI
> runtimes but I would like to use a python based, OSS solution if  
> possible.
>
> Thanks for the reply.
>
> Jim
>
>
> Tom Kazimiers wrote:
>>
>> Jim St.Cyr schrieb:
>>> I have a shapefile and a list of lat\long's that I would like to  
>>> process
>>> in
>>> order to determine if they fall within the shapefile.   
>>> GDAL-1.5-py2.5 is
>>> loaded on a windows XP machine and is correctly configured.  I would
>>> appreciate it if someone could point me to a python script or  
>>> appropriate
>>> documentation to get me strted.  At this point I can't even determine
>>> which
>>> part of the GDAL package to use....
>>>
>>> Thanks much.
>>>
>>> Jim
>>>
>> Is the data of the shapefile also referenced with lat\long values of  
>> the
>> same geographic coordinate system or do you need to translate them?
>> I think you could open the shapefile, get the bounding box stored in  
>> the
>> file (maybe you have to go through all the shapes as the stored  
>> bounding
>> box in the file must not be correct - at least I do this when loading
>> shapefiles) and then compare it to your value.
>>
>> bye,
>> Tom
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> --  
> View this message in context:  
> http://www.nabble.com/How-determine-if-lat%5Clon-point-falls-within-a- 
> shapefile-tp15618562p15659292.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From bhagwat.maimt at gmail.com  Mon Feb 25 00:05:12 2008
From: bhagwat.maimt at gmail.com (bargi)
Date: Mon Feb 25 00:05:14 2008
Subject: [Gdal-dev] Help in Transforming coordinates
Message-ID: <15674107.post@talk.nabble.com>


Hi,

I have posted earlier a message regarding Coordinate Transformation.

I have tried a lot and was able to transformed the coordinate ,but not able
to show them....

I have used Point shapefile in which there was no ".prj" file for projection
,so I create a.prj file on my own which is as follow:

point.prj:

PROJCS["World_Mercator",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",2600000.0],PARAMETER["False_Northing",400000.0],PARAMETER["Central_Meridian",-77.0],PARAMETER["Standard_Parallel_1",15.0],UNIT["Meter",1.0]]


By using this projection information I create my own Target source and
transform the Coordinates.....

After transforming I used SetGeometryDirectly() of OGRFeauture to set the
changed geometry......

The details of code is as follow:

[code]
  OGRSpatialReference*    pSourceSRS = layer->GetSpatialRef();
         OGRSpatialReference*    pTargetSRS = pSourceSRS->Clone(); 
         pTargetSRS->SetProjCS("UTM");
         pTargetSRS->SetTM(0,0,1,0,0);
         
          OGRGeometry*  poGeometry_new;
          OGREnvelope envelope;
           double x,y;
          

        OGRCoordinateTransformation* poCT =
OGRCreateCoordinateTransformation(pSourceSRS,pTargetSRS); 
       
         OGRFeature *ogrFeature = 0;
          layer->ResetReading();   
     for ( int i = 0; i < nLayers; ++i ) {
         layer = ogrDataSource->GetLayer( i );
       
         while ( (ogrFeature = layer->GetNextFeature()) ) {
               k++;  
               poGeometry = ogrFeature->GetGeometryRef(); 
                if (poGeometry !=NULL)  { 
       
             if (wkbFlatten(poGeometry->getGeometryType()) ==wkbPoint) {
                 OGRPoint *poPoint = (OGRPoint *) poGeometry; 
                 x = poPoint->getX();
                 y = poPoint->getY();

               if (poCT == NULL || !poCT->Transform(1,&x,&y)) 
                      printf(" TRANSFORMATION FAILED");
                else {


                     poPoint->setX(x);    //Set coordinates

                     poPoint->setY(y);

                   poGeometry_new = (OGRGeometry*)poPoint;
                  
    ogrFeature->SetGeometryDirectly(poGeometry_new);

  
    OGRGeometry *geometry = ogrFeature->GetGeometryRef(); // For getting new
geometry
    
    geometry->getEnvelope( &envelope ); // At this line give segmentation
fault
    m_bounds.setCoords( envelope.MinX, envelope.MinY, envelope.MaxX,
envelope.MaxY );
     
    
[/code]

BEFORE TRANSFORM x=-92.0333        y=27.3167 

AFTER TRANSFORM x= -2.49294e+07   y= -4.0033e+06  


I have following Question...

1) Is the Projection I have created is correct for Points ?

2) Whether the target transformation is correct ?

3) Is the step for transformation are correct ?

4) Are the resultant values correct or they are very high then expectation
(as are seen ) ?

5) How can I got the information of projection from shapefile if there is no
.prj file ?

Please correct me where I am wrong and suggest the changes to do ??

Thanks



-- 
View this message in context: http://www.nabble.com/Help-in-Transforming-coordinates-tp15674107p15674107.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From josegomez at gmx.net  Mon Feb 25 08:07:38 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Mon Feb 25 08:07:41 2008
Subject: [Gdal-dev] How determine if lat\lon point falls within a shapefile
In-Reply-To: <87F8BF97-E277-11DC-8E7C-000A277A733C@light42.com>
References: <15618562.post@talk.nabble.com> <47C04DB0.1000106@gmx.de>
	<15659292.post@talk.nabble.com>
	<87F8BF97-E277-11DC-8E7C-000A277A733C@light42.com>
Message-ID: <20080225130738.230950@gmx.net>



> if you have multipolygons, you have to check each one
> if you have to transform coordinate systems, you need to do that first

You can use OGR's GEOS functionality for these tests in python. i haven't got any sample code at hand now, but you can use things like within() and so on to check which points are within each feature.

It is fairly easy to code this.

Jose
-- 
Psst! Geheimtipp: Online Games kostenlos spielen bei den GMX Free Games! 
http://games.entertainment.web.de/de/entertainment/games/free
From cjanssen at iavo-rs.com  Mon Feb 25 10:53:51 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Mon Feb 25 10:53:54 2008
Subject: [gdal-dev] Coordinate Transformation problems
Message-ID: <1589F052-FB2F-49D6-BCAB-4630C80E83BF@iavo-rs.com>

I've been having a problem with coordinate transformation that I truely hope is a mistake on my part, if anyone can help it would be greatly appreciated. The issue is that when doing a translation from one system to another the z-component is not being transformed correctly (or at least not how I would expect it). The transformation is between two identical systems but with different linear units. I have attached a snippet of code the examples my problem:

int err;
double x, y, z;
OGRCoordinateTransformation* ctTrans;
OGRSpatialReference* srFeet = new OGRSpatialReference();
OGRSpatialReference* srMeter = new OGRSpatialReference();
srFeet->SetStatePlane(3200, 1, SRS_UL_US_FOOT, atof(SRS_UL_US_FOOT_CONV)); //NAD83 North Carolina
srMeter->SetStatePlane(3200, 1, SRS_UL_METER, 1.0); //NAD83 North Carolina
ctTrans = OGRCreateCoordinateTransformation(srFeet, srMeter);
x = 618067.37752800086;
y = 248532.06376793334;
z = 1210.7631359994411;
err = ctTrans->Transform(1, &x, &y, &z);
//Results from function call
//x = 188387.31344515912 <-Correct
//y = 75752.724541875374 <-Correct
//z = 1210.7631359994411 <-Unchanged and I therefore I think wrong 
//err = 1

Thanks for the help,

Christiaan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080225/3694cd28/attachment.html
From lran at unc.edu  Mon Feb 25 12:20:07 2008
From: lran at unc.edu (Limei Ran)
Date: Mon Feb 25 12:21:05 2008
Subject: [gdal-dev] use scale in gdal_translate
Message-ID: <47C2F8C7.2070007@unc.edu>

Hi:

I used the following command to scale a image file:
gdal_translate landcover14.img -scale 0 127 0 0 -OF HFA out.img

I thought all pixel values in out.img should be 0.  But, when I use 
gdalinfo out.img, I saw the same information as those in the original 
image, such as:
=======================
.....
Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
  Description = Layer_1
  Min=11.000 Max=127.000
  Minimum=11.000, Maximum=127.000, Mean=100.336, StdDev=38.292
  Metadata:
    STATISTICS_MINIMUM=11
    STATISTICS_MAXIMUM=127
    STATISTICS_MEAN=100.3361000425
    STATISTICS_MEDIAN=127
    STATISTICS_MODE=127
    STATISTICS_STDDEV=38.292430309159
    STATISTICS_HISTONUMBINS=256
    STATISTICS_HISTOMIN=0
    STATISTICS_HISTOMAX=255
......
===============================

I thought min and max should be 0 after scaling.  Could you tell me 
whether there is any problem?

Thanks,

Limei
From warmerdam at pobox.com  Mon Feb 25 12:26:50 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 25 12:27:16 2008
Subject: [gdal-dev] use scale in gdal_translate
In-Reply-To: <47C2F8C7.2070007@unc.edu>
References: <47C2F8C7.2070007@unc.edu>
Message-ID: <47C2FA5A.5050609@pobox.com>

Limei Ran wrote:
> Hi:
> 
> I used the following command to scale a image file:
> gdal_translate landcover14.img -scale 0 127 0 0 -OF HFA out.img
> 
> I thought all pixel values in out.img should be 0.  But, when I use 
> gdalinfo out.img, I saw the same information as those in the original 
> image, such as:
> =======================
> .....
> Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
>  Description = Layer_1
>  Min=11.000 Max=127.000
>  Minimum=11.000, Maximum=127.000, Mean=100.336, StdDev=38.292
>  Metadata:
>    STATISTICS_MINIMUM=11
>    STATISTICS_MAXIMUM=127
>    STATISTICS_MEAN=100.3361000425
>    STATISTICS_MEDIAN=127
>    STATISTICS_MODE=127
>    STATISTICS_STDDEV=38.292430309159
>    STATISTICS_HISTONUMBINS=256
>    STATISTICS_HISTOMIN=0
>    STATISTICS_HISTOMAX=255
> ......
> ===============================
> 
> I thought min and max should be 0 after scaling.  Could you tell me 
> whether there is any problem?

Limei,

Unfortunately the statistics metadata is getting carried over and the
metadata copying doesn't recognise that the actual pixel data has changed.

Depending on what you actually want to preserve, you could try copying
to a .png file, then removing any .aux.xml that might be created for that
png file, and then copying back to .img format.

Best regards,


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Allan.Meek at drdc-rddc.gc.ca  Mon Feb 25 15:18:12 2008
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Mon Feb 25 15:18:19 2008
Subject: [gdal-dev] Java bindings with GDAL 1.4.4
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E109FC6@ottawaex02.Ottawa.drdc-rddc.gc.ca>

I've run into a problem with the call to GetGCPs() in
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/java/apps/gdalinfo.ja
va, line 177. I have the GDAL bindings properly compiled, with GDAL
1.4.4.

If I run the Java version of gdalinfo with an image that uses GCPs
(i.e., RADARSAT-1, ENVISAT), the program crashes whenever it calls
GetGCPs(). If I comment out that line, the program runs properly
(although it doesn't report the GCPs, of course).

Here's an example of the output I get:

==================

C:\gdal-1.4.4\swig\java\apps>java gdalinfo c:\RSAT1\P0368677.img
Driver: SAR_CEOS/CEOS SAR Image
Size is 18556, 16605
Coordinate System is:

Origin = (0.0,0.0)
Pixel Size = (1.0,1.0)
  0.0, 1.0, 0.0
  0.0, 0.0, 1.0
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,
298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["
EPSG
",6326]],PRIMEM["Greenwich",0,AUTHORITY["EPSG",8901]],UNIT["DMSH",0.0174
5329
25199433,AUTHORITY["EPSG",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUT
HORI
TY["EPSG",4326]]

#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x6d85cb54, pid=3280, 
#  tid=3264
#
# Java VM: Java HotSpot(TM) Client VM (1.5.0_14-b03 mixed mode, sharing)
# Problematic frame:
# V  [jvm.dll+0x11cb54]
#
# An error report file with more information is saved as
hs_err_pid3280.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#

==================

The generated logfile is available if anybody wants to have a look at
it.

This problem does not affect images that don't have GCPs, as the
preceding 'if' structure routes them around this part of the program.

Is there a simple solution to patch this up, or is this a deeper
problem?

Thanks,
Allan
From warmerdam at pobox.com  Mon Feb 25 15:22:21 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 25 15:22:46 2008
Subject: [gdal-dev] GRIB Driver Migrated to Trunk
Message-ID: <47C3237D.6000006@pobox.com>

Folks,

With support from Baron Services I have done some work on the GRIB driver
written by Bas Retsios based on code from NOAA.  The work included a license
review (no problems) and some work to cleanup warnings, and the build setup.
Based on that going well, I have migrated the driver from /spike into GDAL
trunk.

I would appreciate folks interested in GRIB format doing some testing from
SVN or from nightly snapshots of trunk.

Thanks to Bas Retsios, Baron Services, Arthur Taylor (NOAA) and John
Huddleston (NOAA) we are now able to do useful work with GRIB format.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From gregor at hostgis.com  Mon Feb 25 15:27:40 2008
From: gregor at hostgis.com (Gregor Mosheh)
Date: Mon Feb 25 15:27:46 2008
Subject: [gdal-dev] GRIB Driver Migrated to Trunk
In-Reply-To: <47C3237D.6000006@pobox.com>
References: <47C3237D.6000006@pobox.com>
Message-ID: <47C324BC.1000707@hostgis.com>

Frank Warmerdam wrote:
> With support from Baron Services I have done some work on the GRIB driver
> written by Bas Retsios based on code from NOAA.

Very nice. I wish that had existed before we started this project I'm 
wrapping up! Does this mean GRIB, GRIB2, or both?

-- 
Gregor Mosheh / Greg Allensworth, BS, A+
System Administrator
HostGIS cartographic development & hosting services
http://www.HostGIS.com/

"Remember that no one cares if you can back up,
  only if you can restore." - AMANDA
From Allan.Meek at drdc-rddc.gc.ca  Mon Feb 25 15:29:36 2008
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Mon Feb 25 15:29:40 2008
Subject: [gdal-dev] Alaska SAR Facility RADARSAT-1 data
Message-ID: <DF1471B5C308B346BF5A2AEA00C5615E109FC8@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Does anybody have any experience with ASF RADARSAT-1 data and GDAL?

I have an ASF product with a Polar Stereographic projection (according
to the ASF's image viewing software) that appears warped when I display
it with georeferencing on in the OpenEV application. The data itself
looks alright -- it's the georeferencing that's incorrect.

Looking at frmts/ceos2/sar_ceosdataset.cpp, it seems that the driver
assumes that the product has a WGS84 projection. Am I correct?

I have a screenshot available if anybody is interested.

Thanks,
Allan
From warmerdam at pobox.com  Mon Feb 25 15:38:16 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 25 15:38:45 2008
Subject: [gdal-dev] GRIB Driver Migrated to Trunk
In-Reply-To: <47C324BC.1000707@hostgis.com>
References: <47C3237D.6000006@pobox.com> <47C324BC.1000707@hostgis.com>
Message-ID: <47C32738.9000302@pobox.com>

Gregor Mosheh wrote:
> Frank Warmerdam wrote:
>> With support from Baron Services I have done some work on the GRIB driver
>> written by Bas Retsios based on code from NOAA.
> 
> Very nice. I wish that had existed before we started this project I'm 
> wrapping up! Does this mean GRIB, GRIB2, or both?

Gregor,

It means GRIB1 and GRIB2.

The driver has existed for most of 2007 but it was less accessable in the
/spike area for experimental work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Mon Feb 25 16:14:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 25 16:15:11 2008
Subject: [gdal-dev] Coordinate Transformation problems
In-Reply-To: <1589F052-FB2F-49D6-BCAB-4630C80E83BF@iavo-rs.com>
References: <1589F052-FB2F-49D6-BCAB-4630C80E83BF@iavo-rs.com>
Message-ID: <47C32FC1.1080409@pobox.com>

Christiaan Janssen wrote:
> I've been having a problem with coordinate transformation that I truely 
> hope is a mistake on my part, if anyone can help it would be greatly 
> appreciated. The issue is that when doing a translation from one system 
> to another the z-component is not being transformed correctly (or at 
> least not how I would expect it). The transformation is between two 
> identical systems but with different linear units. I have attached a 
> snippet of code the examples my problem:
>  
> int err;
> double x, y, z;
> OGRCoordinateTransformation* ctTrans;
> OGRSpatialReference* srFeet = new OGRSpatialReference();
> OGRSpatialReference* srMeter = new OGRSpatialReference();
> srFeet->SetStatePlane(3200, 1, SRS_UL_US_FOOT, 
> atof(SRS_UL_US_FOOT_CONV)); //NAD83 North Carolina
> srMeter->SetStatePlane(3200, 1, SRS_UL_METER, 1.0); //NAD83 North Carolina
> ctTrans = OGRCreateCoordinateTransformation(srFeet, srMeter);
> x = 618067.37752800086;
> y = 248532.06376793334;
> z = 1210.7631359994411;
> err = ctTrans->Transform(1, &x, &y, &z);
> //Results from function call
> //x = 188387.31344515912 <-Correct
> //y = 75752.724541875374 <-Correct
> //z = 1210.7631359994411 <-Unchanged and I therefore I think wrong
> //err = 1

Christiaan,

Can you explain what change you are expecting in Z and why?

PROJ.4 uses NAD27/NAD83 datum grid shift files to go from NAD27 to
NAD83, but this is strictly a 2D transformation.  There is no Z component.

If, instead, we were using a 3/7 parameter towgs84= value to transform, the
opreration would be done in "geocentric space" and would also affect the
Z coordinate.  But I doubt that would really be desirable in this case.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From cjanssen at iavo-rs.com  Mon Feb 25 16:43:33 2008
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Mon Feb 25 16:44:12 2008
Subject: [gdal-dev] Coordinate Transformation problems
In-Reply-To: <47C32FC1.1080409@pobox.com>
Message-ID: <C8C53F5E-94F8-4DAC-BE5C-E68405A3AE80@iavo-rs.com>

I realize that PROJ.4's datum shift is only two dimensional with respect to a NAD27 to NAD83 shift but what this case is doing is really just a unit conversion. Both spatial reference systems are the same except for the linear unit, one is in feet the other meters. The conversion is resulting in the horizontal components being translated but the z component is left unchanged. Shouldn't it at least be converted to the appropriate units (1210ft -> 369m) to conform with the other two dimensions? Or is this something I will have to handle on my own?

Christiaan


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, February 25, 2008 4:15 PM
To: Christiaan Janssen
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Coordinate Transformation problems

Christiaan Janssen wrote:
> I've been having a problem with coordinate transformation that I 
> truely hope is a mistake on my part, if anyone can help it would be 
> greatly appreciated. The issue is that when doing a translation from 
> one system to another the z-component is not being transformed 
> correctly (or at least not how I would expect it). The transformation 
> is between two identical systems but with different linear units. I 
> have attached a snippet of code the examples my problem:
>  
> int err;
> double x, y, z;
> OGRCoordinateTransformation* ctTrans;
> OGRSpatialReference* srFeet = new OGRSpatialReference();
> OGRSpatialReference* srMeter = new OGRSpatialReference();
> srFeet->SetStatePlane(3200, 1, SRS_UL_US_FOOT,
> atof(SRS_UL_US_FOOT_CONV)); //NAD83 North Carolina
> srMeter->SetStatePlane(3200, 1, SRS_UL_METER, 1.0); //NAD83 North 
> srMeter->Carolina
> ctTrans = OGRCreateCoordinateTransformation(srFeet, srMeter); x = 
> 618067.37752800086; y = 248532.06376793334; z = 1210.7631359994411; 
> err = ctTrans->Transform(1, &x, &y, &z); //Results from function call 
> //x = 188387.31344515912 <-Correct //y = 75752.724541875374 <-Correct 
> //z = 1210.7631359994411 <-Unchanged and I therefore I think wrong 
> //err = 1

Christiaan,

Can you explain what change you are expecting in Z and why?

PROJ.4 uses NAD27/NAD83 datum grid shift files to go from NAD27 to NAD83, but this is strictly a 2D transformation.  There is no Z component.

If, instead, we were using a 3/7 parameter towgs84= value to transform, the opreration would be done in "geocentric space" and would also affect the Z coordinate.  But I doubt that would really be desirable in this case.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



From nikos.alexandris at felis.uni-freiburg.de  Mon Feb 25 16:49:18 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Mon Feb 25 16:49:10 2008
Subject: [gdal-dev] Difference of bin and bin_safe directories/ tools in
	FWTools (?)
Message-ID: <1203976158.16148.3.camel@vertical>

I have a rather simple question for developers... I think.

[Under Ubuntu 7.10, without gdal-bin installed from the ubuntu repo's]

I cannot read kml files with ogrinfo (and use ogr2ogr) from within the
FWTools/bin directory but I can do it from within FWTools/bin_safe   and
from within OpenEV as well.

What is the difference?

Thank you,

Nikos

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080225/1cb65929/attachment-0001.bin
From warmerdam at pobox.com  Mon Feb 25 16:52:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Feb 25 16:52:45 2008
Subject: [gdal-dev] Coordinate Transformation problems
In-Reply-To: <C8C53F5E-94F8-4DAC-BE5C-E68405A3AE80@iavo-rs.com>
References: <C8C53F5E-94F8-4DAC-BE5C-E68405A3AE80@iavo-rs.com>
Message-ID: <47C3389B.3020808@pobox.com>

Christiaan Janssen wrote:
> I realize that PROJ.4's datum shift is only two dimensional with respect to
> a NAD27 to NAD83 shift but what this case is doing is really just a unit
> conversion. Both spatial reference systems are the same except for the
> linear unit, one is in feet the other meters. The conversion is resulting in
> the horizontal components being translated but the z component is left
> unchanged. Shouldn't it at least be converted to the appropriate units
> (1210ft -> 369m) to conform with the other two dimensions? Or is this
> something I will have to handle on my own?

Christiaan,

This would have to be handled by your own code.  The linear units is assumed
to apply only in the horizontal dimensions, not the vertical.  Generally
speaking GDAL/OGR is very weak on vertical coordinate system related
operations - a not uncommon issue in the GIS and remote sensing fields.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Chris.Eustace at petrosys.com.au  Tue Feb 26 01:43:19 2008
From: Chris.Eustace at petrosys.com.au (Chris Eustace)
Date: Tue Feb 26 01:43:22 2008
Subject: [gdal-dev] Failing to read a JPEG2000
Message-ID: <47C3B507.7040200@petrosys.com.au>

Hi there.

I have built GDAL V1.4.4 using jasper-1.900.1.uuid so as to read 
georeferenced JPEG2000 files. This has been done on Solaris, various 
forms of Linux and Windows using various C++ compilers (g++ on *nix).

This has worked very well, except for one particular JP2 file. The 
georeferencing information can be determined without a problem, but when 
it comes to reading the ColorInterpretation for each of the three colour 
bands in the file, I get an error in jpc_dec_decodepkts() (a JasPer low 
level call).

This image can be successfully read and displayed by (some) other 
packages (eg. GlobalMapper).

The image (38MB) can be found at:
ftp://ftp.petrosys.com.au/pub/support/data/aust_jp2.jp2

I am not sure whether it is a problem with GDAL or with JasPer. I did 
try and update some of the GDAL code with the V1.5.0 GDAL jpeg2000 code, 
but this did not help.

The built gdalinfo executable also returns the relevant georeference 
information, but errors are seen when trying to determine the color 
information.

Any feedback would be greatly appreciated.

Chris Eustace.
(Chris.Eustace at petrosys.com.au).

From marco.pasetti at alice.it  Tue Feb 26 09:33:10 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Tue Feb 26 09:33:28 2008
Subject: [gdal-dev] GDAL & Python
Message-ID: <FBCMMO03Pg3mHOVShLd0004231a@FBCMMO03.fbc.local>

Hi,
 
I'm building GDAL 1.5.0 on windows with MinGW.
Do I need Python to enable its support in GDAL? (I have Python 2.5.1 installed, but not in a "standard" msys directory)
configure option is just "--with-python", while configure help doesn't tell about an option like --with-python-inc/lib or something like that!?
 
Thanks
 
Marco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/1f55b92d/attachment.html
From warmerdam at pobox.com  Tue Feb 26 11:00:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 26 11:01:01 2008
Subject: [gdal-dev] GDAL & Python
In-Reply-To: <FBCMMO03Pg3mHOVShLd0004231a@FBCMMO03.fbc.local>
References: <FBCMMO03Pg3mHOVShLd0004231a@FBCMMO03.fbc.local>
Message-ID: <47C437A5.7020208@pobox.com>

marco.pasetti@alice.it wrote:
> Hi,
>  
> I'm building GDAL 1.5.0 on windows with MinGW.
> Do I need Python to enable its support in GDAL? (I have Python 2.5.1 
> installed, but not in a "standard" msys directory)
> configure option is just "--with-python", while configure help doesn't 
> tell about an option like --with-python-inc/lib or something like that!?

Marco,

I believe that the key is to have your installed python in the path, and then
the python setup.py script for GDAL queries it to find appropriate information.

I can't promise that msys/mingw builds with python support will be easy
though.  I'm under the impression it might be tricky though I haven't done
it myself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From nikos.alexandris at felis.uni-freiburg.de  Tue Feb 26 11:16:04 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Tue Feb 26 11:15:56 2008
Subject: [gdal-dev] Building gdal/ogr with expat support fails when trying to
	configure ogdi as well (?)
Message-ID: <1204042564.17459.27.camel@vertical>

Hi GDAL list!

On Ubuntu 7.10, 64bit,

I am trying to build gdal from source (svn) and...

* a simple "./configure" gives me support for expat but not for GRASS
nor for OGDI

* using ./configure --with-grass=/usr/local/grass-6.3.svn
--with-libgrass=/usr/local/grass-6.3.svn/lib
--with-ogdi=/usr/local/src/gdal/ogr/ogrsf_frmts/ogdi

I get GRASS & OGDI support but not expat anymore (!)

* adding "--with-expat=yes --with-expat-inc=/usr/include
--with-expat-lib=/usr/lib" does not help.

I am not sure to look for expat (?)

I got following expat's:

/usr/lib/libexpat.so.1.0.0
/usr/lib/libexpat.a
/usr/lib/libexpat.la
/usr/lib/libexpat.so.1
/usr/lib/libexpat.so.0
/usr/lib/libexpat.so
/usr/lib32/libexpat.so.1.0.0
/usr/lib32/libexpat.so.1
/usr/lib32/libexpat.so.0


Any directions?

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: This is a digitally signed message part
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/75d6b398/attachment.bin
From wollez at gmx.net  Tue Feb 26 11:23:52 2008
From: wollez at gmx.net (WolfgangZ)
Date: Tue Feb 26 11:24:16 2008
Subject: [gdal-dev] Re: gdal_merge and BIGTIFF option fails
In-Reply-To: <47BEF080.8080508@pobox.com>
References: <fpmnap$66h$1@ger.gmane.org> <47BEF080.8080508@pobox.com>
Message-ID: <fq1ef0$e5l$1@ger.gmane.org>

Frank Warmerdam schrieb:
> WolfgangZ wrote:
>> Hi,
>> I'm trying to merge some tiles into a single tiff file that will be 
>> bigger than 4 GB. But when it reaches the 4GB the following error occurs:
>> FIFFWriteEncodedTile() failed
>> TIFFAppendToStrip: Maximum TIFF file size exeeded.
>>
>> I have also to report that in the very beginning I get following error:
>> TIFFFetchStripThing: Sanity check on size of "TileOffsets" value failed.
>>
>> I'm using WFTools 2.0.4 on Ubuntu
> 
> Wolfgang,
> 
> I tried creating a bigtiff with gdal_translate and FWTools 2.0.6 and it
> seemed to work.  I suspect this was a temporarily problem fixed since
> 2.0.4.  Could you try again with 2.0.6 and if the problem persists
> file a ticket against GDAL with the details?
> 
> I did:
> 
> gdal_translate ~/utm.tif -outsize 100000 50000 big.tif
> 
> which with debug enabled reported:
> 
> GDAL: GDALOpen(/wrk/home/warmerda/utm.tif) succeeds as GTiff.
> Input file size is 512, 512
> 0GTiff: Automatically flipping to Bigtiff due to large file size
> GDAL: GDALOpen(big.tif) succeeds as GTiff.
> GDAL: GDALDatasetCopyWholeRaster(): 100 line swath, bInterleave=0
> ...10...20...30...40...50...60...70...80...90...100 - done.
> GDAL: GDALClose(big.tif)
> GDAL: GDALClose()
> GDAL: GDALClose(/wrk/home/warmerda/utm.tif)
> GDAL: GDALDeregister_GTiff() called.
> 
> Best regards,

the problem was that I had the create option "COMPRESS=JPEG". With JPEG 
compression edit in place is not possible.

Regards
Wolfgang

From marco.pasetti at alice.it  Tue Feb 26 11:33:52 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Tue Feb 26 11:37:54 2008
Subject: R: [gdal-dev] Expat support on MinGW/MSYS
References: <FBCMMO02HKoFz6Tt6Zp0001e99e@FBCMMO02.fbc.local>
	<47BC3FC5.9080304@tkk.fi>
Message-ID: <FA8A693893F4CE4283B4473C79FA47D5025D9727@FBCMST06V02.fbc.local>

Hi Ari,
 
sorry for the late (incredibly busy in these days);
I tried with your suggestion, but it doesn't work at all!
looking in config-status I found errors after line command
g++ [...] conftest.exe -I/lusr/local/include -L/usr/local/bin -lexpat conftest.cpp
dunno why!
 
I abandoned the will of adding expat support in gdal!
 
thanks anyway
 
Marco

________________________________

Da: Ari Jolma [mailto:ari.jolma@tkk.fi]
Inviato: mer 20/02/2008 15.57
A: marco.pasetti@alice.it
Cc: gdal-dev@lists.osgeo.org
Oggetto: Re: [gdal-dev] Expat support on MinGW/MSYS



marco.pasetti@alice.it kirjoitti:
> Hi,
> 
> I'm building GDAL 1.5.0 on Windows (XP SP2) using MSYS/MinGW environment;
> I built Expat 2.0.1, but I cannot configure GDAL with Expat support.
> I followed the BuildingWithMinGW Wiki (using pexports, libtool and
> perl commands), but it continues to find includes but not libraries!

Something's definitely not correct. I'm using the trunk version and I
get configure to find expat.h from c:\mingw\include and expat.dll.a
(which is created with pexports and libtool and the small perl utility)
from c:\mingw\lib with:

1) adding LIBS="$LIBS -lexpat" to configure (lines 23783 and 23787)

and

2) calling configure with

--with-expat=yes --with-expat-inc=/c/mingw/include
--with-expat-lib=-L/c/mingw/lib

Note the value for --with-expat-lib. It seems to be required although
the directory is known by the linker by default.

Regards,

Ari

> 
> Someone could help me please?
> What happen if I disable Expat support?
> 
> Thanks for support,
> 
> Marco
> 
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


--
Prof. Ari Jolma
Geoinformatiikka / Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma




-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/17d8a1a6/attachment.html
From warmerdam at pobox.com  Tue Feb 26 11:40:20 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 26 11:41:04 2008
Subject: [gdal-dev] Difference of bin and bin_safe directories/ tools in
	FWTools (?)
In-Reply-To: <1203976158.16148.3.camel@vertical>
References: <1203976158.16148.3.camel@vertical>
Message-ID: <47C440F4.8020305@pobox.com>

Nikos Alexandris wrote:
> I have a rather simple question for developers... I think.
> 
> [Under Ubuntu 7.10, without gdal-bin installed from the ubuntu repo's]
> 
> I cannot read kml files with ogrinfo (and use ogr2ogr) from within the
> FWTools/bin directory but I can do it from within FWTools/bin_safe   and
> from within OpenEV as well.
> 
> What is the difference?

Nikos,

The bin_safe directory contains scripts which set various environment
variables before running the real executables in the bin directory.
The most important environment variable is LD_LIBRARY_PATH so that the
correct shared libraries are found.

These bin_safe cover scripts accomplish the same effect as sourcing the
fwtools_env.sh script.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Tue Feb 26 11:45:06 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 26 11:45:33 2008
Subject: [gdal-dev] Building gdal/ogr with expat support fails when
	trying to configure ogdi as well (?)
In-Reply-To: <1204042564.17459.27.camel@vertical>
References: <1204042564.17459.27.camel@vertical>
Message-ID: <47C44212.2070403@pobox.com>

Nikos Alexandris wrote:
> Hi GDAL list!
> 
> On Ubuntu 7.10, 64bit,
> 
> I am trying to build gdal from source (svn) and...
> 
> * a simple "./configure" gives me support for expat but not for GRASS
> nor for OGDI
> 
> * using ./configure --with-grass=/usr/local/grass-6.3.svn
> --with-libgrass=/usr/local/grass-6.3.svn/lib
> --with-ogdi=/usr/local/src/gdal/ogr/ogrsf_frmts/ogdi
> 
> I get GRASS & OGDI support but not expat anymore (!)
> 
> * adding "--with-expat=yes --with-expat-inc=/usr/include
> --with-expat-lib=/usr/lib" does not help.
> 
> I am not sure to look for expat (?)

Nikos,

You might want to look in the config.log to see why the expat isn't working.
I suspect things are getting mixed up with the version of expat embedded
in OGDI.  If you are building the OGDI from source, I would encourage you
to also force it to build against the system copy of expat instead of it's
internal version.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From marco.pasetti at alice.it  Tue Feb 26 11:50:56 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Tue Feb 26 11:51:00 2008
Subject: R: [gdal-dev] GDAL & Python
References: <FBCMMO03Pg3mHOVShLd0004231a@FBCMMO03.fbc.local>
	<47C437A5.7020208@pobox.com>
Message-ID: <FA8A693893F4CE4283B4473C79FA47D5025D972A@FBCMST06V02.fbc.local>

Hi Frank,
 
I'm building GDAL right now --with-python option enabled; I thought the same as you suggested... but now I'm trying build GDAL without python installed, because the last option enables python bindings, and, I think, this feature would not require python installed; furthermore, configure tells that the old python support is deprecated and suggests (as I understood) to enable python bindings instead.
 
thanks
 
Marco

________________________________

Da: Frank Warmerdam [mailto:warmerdam@pobox.com]
Inviato: mar 26/02/2008 17.00
A: marco.pasetti@alice.it
Cc: gdal-dev@lists.osgeo.org
Oggetto: Re: [gdal-dev] GDAL & Python



marco.pasetti@alice.it wrote:
> Hi,
> 
> I'm building GDAL 1.5.0 on windows with MinGW.
> Do I need Python to enable its support in GDAL? (I have Python 2.5.1
> installed, but not in a "standard" msys directory)
> configure option is just "--with-python", while configure help doesn't
> tell about an option like --with-python-inc/lib or something like that!?

Marco,

I believe that the key is to have your installed python in the path, and then
the python setup.py script for GDAL queries it to find appropriate information.

I can't promise that msys/mingw builds with python support will be easy
though.  I'm under the impression it might be tricky though I haven't done
it myself.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org <http://osgeo.org/> 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/363234c8/attachment.html
From warmerdam at pobox.com  Tue Feb 26 11:57:09 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 26 11:58:08 2008
Subject: [gdal-dev] Failing to read a JPEG2000
In-Reply-To: <47C3B507.7040200@petrosys.com.au>
References: <47C3B507.7040200@petrosys.com.au>
Message-ID: <47C444E5.5090909@pobox.com>

Chris Eustace wrote:
> Hi there.
> 
> I have built GDAL V1.4.4 using jasper-1.900.1.uuid so as to read 
> georeferenced JPEG2000 files. This has been done on Solaris, various 
> forms of Linux and Windows using various C++ compilers (g++ on *nix).
> 
> This has worked very well, except for one particular JP2 file. The 
> georeferencing information can be determined without a problem, but when 
> it comes to reading the ColorInterpretation for each of the three colour 
> bands in the file, I get an error in jpc_dec_decodepkts() (a JasPer low 
> level call).
> 
> This image can be successfully read and displayed by (some) other 
> packages (eg. GlobalMapper).
> 
> The image (38MB) can be found at:
> ftp://ftp.petrosys.com.au/pub/support/data/aust_jp2.jp2
> 
> I am not sure whether it is a problem with GDAL or with JasPer. I did 
> try and update some of the GDAL code with the V1.5.0 GDAL jpeg2000 code, 
> but this did not help.
> 
> The built gdalinfo executable also returns the relevant georeference 
> information, but errors are seen when trying to determine the color 
> information.

Chris,

I tried it too, and it does seem problematic.  I ran gdalinfo against
the file and got the following errors:

Corner Coordinates:
Upper Left  ( 108.0000000,  -8.0000000) (108d 0'0.00"E,  8d 0'0.00"S)
Lower Left  ( 108.0000000, -44.0000000) (108d 0'0.00"E, 44d 0'0.00"S)
Upper Right ( 156.0006000,  -8.0000000) (156d 0'2.16"E,  8d 0'0.00"S)
Lower Right ( 156.0006000, -44.0000000) (156d 0'2.16"E, 44d 0'0.00"S)
Center      ( 132.0003000, -26.0000000) (132d 0'1.08"E, 26d 0'0.00"S)
jpc_dec_decodepkts failed
error: cannot decode code stream
JPEG2000: Unable to decode image. Format: jp2, 4
Band 1 Block=256x256 Type=Byte, ColorInterp=Undefined
error: cannot get box

I should add this was after the process ballooned to 1.8GB of
RAM (and I think roughly 3GB of total process space).  So it isn't
entirely clear to me if the problem was an out-of-memory one
that was poorly reported, or as you suggest something about the
color model.  Given the pain I incurred trying the image, I'm not
inclined to try again. :-)

You could file a ticket on the issue, and perhaps Andrey would be
inclined to look into it.

I will note that the image works with the JP2KAK driver, but comes
in with odd colors.  I suspect it is in an unusual color model and
this isn't being addressed by some or all drivers.

....

Actually, I see it comes in oddly colored with the JP2KAK driver,
but not the JP2ECW driver. So it seems the ECW SDK driver takes care
of the color conversion internally while the Kakadu library must
leave it up to the application.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From marco.pasetti at alice.it  Tue Feb 26 11:57:04 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Tue Feb 26 12:02:05 2008
Subject: R: [gdal-dev] GDAL & Python
References: <FBCMMO03Pg3mHOVShLd0004231a@FBCMMO03.fbc.local>
	<47C437A5.7020208@pobox.com>
Message-ID: <FA8A693893F4CE4283B4473C79FA47D5025D972B@FBCMST06V02.fbc.local>

Hi Frank
 
I'm ROTFL... I just told you that Python installation was not required... and right NOW I have the following build error:
 
python setup.py build
 
command not found
 
HAAHAH... what a stupid I am!
Ok... go, install Python, add c:\blablabla\python to my sys environment path variable and redo make command!
In my town is usual to say (I try to translate): "who has no brain, has legs..."
 
Marco

________________________________

Da: Frank Warmerdam [mailto:warmerdam@pobox.com]
Inviato: mar 26/02/2008 17.00
A: marco.pasetti@alice.it
Cc: gdal-dev@lists.osgeo.org
Oggetto: Re: [gdal-dev] GDAL & Python



marco.pasetti@alice.it wrote:
> Hi,
> 
> I'm building GDAL 1.5.0 on windows with MinGW.
> Do I need Python to enable its support in GDAL? (I have Python 2.5.1
> installed, but not in a "standard" msys directory)
> configure option is just "--with-python", while configure help doesn't
> tell about an option like --with-python-inc/lib or something like that!?

Marco,

I believe that the key is to have your installed python in the path, and then
the python setup.py script for GDAL queries it to find appropriate information.

I can't promise that msys/mingw builds with python support will be easy
though.  I'm under the impression it might be tricky though I haven't done
it myself.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org <http://osgeo.org/> 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/1514061a/attachment.html
From Chris.Barker at noaa.gov  Tue Feb 26 12:24:12 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Feb 26 12:22:45 2008
Subject: R: [gdal-dev] GDAL & Python
In-Reply-To: <FA8A693893F4CE4283B4473C79FA47D5025D972A@FBCMST06V02.fbc.local>
References: <FBCMMO03Pg3mHOVShLd0004231a@FBCMMO03.fbc.local>
	<47C437A5.7020208@pobox.com>
	<FA8A693893F4CE4283B4473C79FA47D5025D972A@FBCMST06V02.fbc.local>
Message-ID: <47C44B3C.9080605@noaa.gov>

marco.pasetti@alice.it wrote:
> I'm building GDAL right now --with-python option enabled; I thought the 
> same as you suggested... but now I'm trying build GDAL without python 
> installed, because the last option enables python bindings, and, I 
> think, this feature would not require python installed;

I'm confused -- are you trying to build the python bindings or not? Also
there are two versions now the "old" ones and the "next generation"
ones. I know the NG ones are built with distutils, which means that the
build process needs to be able to find your python, but once it does,
python+distutils takes care of everything else.

I can't remember how the old bindings are built, but you definitely need
python installed to build them -- they need the python headers, etc.

You should be able to build python bindings with MingGW with a regular
old Windows Python2.5 -- it doesn't need to be a msys install.

Also, it should be possible to build GDAL without python bindings, then
build the python bindings by hand later (with "setup.py build")



marco.pasetti@alice.it wrote:
  NOW I have the following build error:
>  
> python setup.py build
>  
> command not found
>  
> HAAHAH... what a stupid I am!
> Ok... go, install Python, add c:\blablabla\python to my sys environment 
> path variable and redo make command!

I'd think there would be a way to tell configure the path to your python
executable as well.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From marco.pasetti at alice.it  Tue Feb 26 12:27:36 2008
From: marco.pasetti at alice.it (marco.pasetti@alice.it)
Date: Tue Feb 26 12:27:40 2008
Subject: [gdal-dev] GDAL & Python
Message-ID: <FBCMMO02G7Fp3NSoBJ90002e2d0@FBCMMO02.fbc.local>

relaunched make with, before, export PATH="/c/devtools/python:$PATH"
 
Now I have the following error:
 
error: Python was built with Visual Studio 2003;
extensions must be built with a compiler than can generate compatible binaries.
Visual Studio 2003 was not found on this system. If you have Cygwin installed,
you can try compiling with MingW32, by passing "-c mingw32" to setup.py.
 
must I directly hack makefile? (hope not!)
 
Thanks
 
Marco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/01201e1d/attachment.html
From Chris.Barker at noaa.gov  Tue Feb 26 12:44:11 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Feb 26 12:42:43 2008
Subject: [gdal-dev] GDAL & Python
In-Reply-To: <FBCMMO02G7Fp3NSoBJ90002e2d0@FBCMMO02.fbc.local>
References: <FBCMMO02G7Fp3NSoBJ90002e2d0@FBCMMO02.fbc.local>
Message-ID: <47C44FEB.7060403@noaa.gov>

marco.pasetti@alice.it wrote:
> Now I have the following error:
>  
> error: Python was built with Visual Studio 2003;
> extensions must be built with a compiler than can generate compatible 
> binaries.
> Visual Studio 2003 was not found on this system. If you have Cygwin 
> installed,
> you can try compiling with MingW32, by passing "-c mingw32" to setup.py.

Darn. If you have the energy, it would be great to file a feature 
request for distutils -- it is so close, in that it now supports 
mingw32, but why can't it give it a try when VS is not found?

Oh well.

> must I directly hack makefile? (hope not!)

Others would know better than me if there is a configure variable that 
can get set with flags for distutils, but it may be easier to just run 
the setup.py build line yourself. I'm not set up to test right now, but 
it should be something like:

cd swig/python

C:/python25/python.exe setup.py -c mingw32 build

(you may need to run that at a regular DOS prompt, I can't seem to run 
Windows python from msys)

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From leretha.childress at baronservices.com  Tue Feb 26 12:45:56 2008
From: leretha.childress at baronservices.com (Leigh Childress)
Date: Tue Feb 26 12:46:12 2008
Subject: [gdal-dev] grib/grib2 capability
Message-ID: <000601c8789f$70e247b0$52a6d710$@childress@baronservices.com>

Hi all

 

I did an svn checkout of the trunk this morning and used grib/grib2 sample
data with the command line utility gdalinfo and I continually got the
unsupported file format error.

Are there some changes that need to be made to the makefile or the nmake.opt
or some other file to enable this grib/grib2 functionality?

 

Thanks

LeRetha Childress

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/54d5fafc/attachment.html
From mitchelljj98 at gmail.com  Tue Feb 26 13:51:02 2008
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Tue Feb 26 13:51:10 2008
Subject: [gdal-dev] conversion of imagery which has an empty coordinate
	system to geotif format via gdalwarp
Message-ID: <fa2ac0580802261051nb667d12m661365bbdfe585e6@mail.gmail.com>

Hi,

I would like to convert imagery which has an empty coordinate system to
geotif format via gdalwarp:

Below is part of a gdalinfo dump of the original imagery.  Notice that the
Coordinate System is empty
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Size is 12074, 13232
Coordinate System is `'
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,
298.257223563
,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORITY["EPSG",8901]],UNIT["DMSH",
0.0174532925199433
,AUTHORITY["EPSG",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG",4326]]
GCP[  0]: Id=1, Info=
          (0.5,0.5) -> (36.77378,-17.270641,0)
GCP[  1]: Id=2, Info=
          (6037,0.5) -> (35.398528,-16.938865,0)
GCP[  2]: Id=3, Info=
          (12073.5,0.5) -> (34.027899,-16.597882,0)
GCP[  3]: Id=4, Info=
          (0.5,3307.5) -> (36.58987,-17.99724,0)
GCP[  4]: Id=5, Info=
          (6037,3307.5) -> (35.209644,-17.663643,0)
GCP[  5]: Id=6, Info=
          (12073.5,3307.5) -> (33.834311,-17.320427,0)
GCP[  6]: Id=7, Info=
          (0.5,6614.5) -> (36.404318,-18.723611,0)
GCP[  7]: Id=8, Info=
          (6037,6614.5) -> (35.01887,-18.388159,0)
GCP[  8]: Id=9, Info=
          (12073.5,6614.5) -> (33.638591,-18.042675,0)
GCP[  9]: Id=10, Info=
          (0.5,9921.5) -> (36.21706,-19.449749,0)
GCP[ 10]: Id=11, Info=
          (6037,9921.5) -> (34.826137,-19.112408,0)
GCP[ 11]: Id=12, Info=
          (12073.5,9921.5) -> (33.440671,-18.764619,0)
GCP[ 12]: Id=13, Info=
          (0.5,13228.5) -> (36.028031,-20.175626,0)
GCP[ 13]: Id=14, Info=
          (6037,13228.5) -> (34.631381,-19.836361,0)
GCP[ 14]: Id=15, Info=
          (12073.5,13228.5) -> (33.24048,-19.486228,0)
Metadata:
  ELLIPSOID=WGS84
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,13232.0)
Upper Right (12074.0,    0.0)
Lower Right (12074.0,13232.0)
Center      ( 6037.0, 6616.0)
Band 1 Block=12074x1 Type=Byte, ColorInterp=Undefined
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------


Based on the above gdalinfo data I assumed that the projection should be
wgs84/EPSG:4326

So I run the following command against the imagery to convert it to geotiff
with an EPSG code of 4326:
gdalwarp -rc -s_srs epsg:4326 -t_srs epsg:4326 source_imagery
destination_geotiff

Next I run gdalinfo against the converted geotiff file which is listed
below:
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Driver: GTiff/GeoTIFF
Files: C:\dat_01.tif
Size is 15174, 15369
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (33.240318507099211,-16.597638311748319)
Pixel Size = (0.000232863689106,-0.000232863689106)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  33.2403185, -16.5976383) ( 33d14'25.15"E, 16d35'51.50"S)
Lower Left  (  33.2403185, -20.1765203) ( 33d14'25.15"E, 20d10'35.47"S)
Upper Right (  36.7737921, -16.5976383) ( 36d46'25.65"E, 16d35'51.50"S)
Lower Right (  36.7737921, -20.1765203) ( 36d46'25.65"E, 20d10'35.47"S)
Center      (  35.0070553, -18.3870793) ( 35d 0'25.40"E, 18d23'13.49"S)
Band 1 Block=15174x1 Type=Byte, ColorInterp=Gray
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

The readme file has the CORNER COORDINATES of:
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

       17?16'14.30" S      16?35'52.37" S
       36?46'25.60" E      34?01'40.43" E

       20?10'34.62" S      19?29'12.77" S
       36?01'40.29" E      33?14'25.06" E

CENTER       18?22'S   035?01'E
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

In comparing the readme file to converted geotiff the resolution increased
slightly and the coordinates were slightly different.
Am I correct in assuming that the EPSG code should be 4326 when converting
to geotiff format via gdalwarp?

Thanks,

John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/f5f92895/attachment-0001.html
From retsios at itc.nl  Tue Feb 26 13:01:24 2008
From: retsios at itc.nl (Bas Retsios)
Date: Tue Feb 26 14:56:55 2008
Subject: [gdal-dev] grib/grib2 capability
In-Reply-To: <000601c8789f$70e247b0$52a6d710$@childress@baronservices.com>
References: <000601c8789f$70e247b0$52a6d710$@childress@baronservices.com>
Message-ID: <47C453F4.2010505@itc.nl>

Hi!

In nmake.opt, find the lines:
      # Enable if you have the grib directory in \frmts
      # GRIB_SETTING=yes
uncomment the 2nd line, and rebuild GDAL.

Cheers,

Bas.



Leigh Childress wrote:

> Hi all
>
>  
>
> I did an svn checkout of the trunk this morning and used grib/grib2 
> sample data with the command line utility gdalinfo and I continually 
> got the unsupported file format error.
>
> Are there some changes that need to be made to the makefile or the 
> nmake.opt or some other file to enable this grib/grib2 functionality?
>
>  
>
> Thanks
>
> LeRetha Childress
>
>  
>
>  
>
>------------------------------------------------------------------------
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080226/039de5f9/attachment.html
From warmerdam at pobox.com  Tue Feb 26 16:31:03 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Feb 26 16:31:40 2008
Subject: [gdal-dev] nearblack: Warning 1: Band 1 is not of type GDT_Byte.
	It can lead to unexpected results.
In-Reply-To: <fa2ac0580802221037g1bb23cfcu1b474ec97a418ca5@mail.gmail.com>
References: <fa2ac0580802221037g1bb23cfcu1b474ec97a418ca5@mail.gmail.com>
Message-ID: <47C48517.3090001@pobox.com>

John Mitchell wrote:
> When I run the following command:
> nearblack -near 1 -nb 0 "c:\temp1\w3.tiftemp"
> I get the below warning
> Warning 1: Band 1 is not of type GDT_Byte. It can lead to unexpected 
> results.
> 
> The file now look very much different than the original source NITF, 
> which I guess is what the "unexpected results" message meant.
> 
> I have also attached the gdalinfo of converted nearblack file called 
> 55439_gdalwarp_nearblack.gdalinfo
> 
> When running gdalwarp to convert from NITF to geotiff is their a 
> parameter that would output the file as a geotiff with the band as a 
> type GDT_Byte, so that nearblack would correctly output the geotiff.

John,

Indeed, nearblack will just clamp all values larger than 255 to 255
and write out the result as GDT_Byte.   So this could be quite badly
damaging your 16bit data.

You can add the following arguments to gdal_translate to convert to
byte data type using rescaling: "-scale -ot Byte".

This uses a default scaling algorithm.  You might find it more appropriate
to control the scaling more carefully.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Chris.Barker at noaa.gov  Tue Feb 26 17:59:05 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Feb 26 17:57:38 2008
Subject: R: [gdal-dev] GDAL & Python
In-Reply-To: <000d01c878af$ec2b74e0$0301a8c0@notebookmarco>
References: <FBCMMO02G7Fp3NSoBJ90002e2d0@FBCMMO02.fbc.local>
	<47C44FEB.7060403@noaa.gov>
	<000d01c878af$ec2b74e0$0301a8c0@notebookmarco>
Message-ID: <47C499B9.1030108@noaa.gov>

Marco Pasetti wrote:
> Python setup.py -c mingw32 build
> Python -c mingw32 setup.py build
> Python "-c mingw32" setup.py build
> 
> And so on.... But nothing!

SOMETHING must have happened? what errors, etc did you get? (that first 
one should be the right one.

Here is a page about building Python extensions on windows with Mingw:

http://boodebr.org/main/python/build-windows-extensions

In there, he suggests:

You now have to tell Python to use the Cygwin/MinGW compiler when 
building extensions. To do this, create a file:

  c:\py25\lib\distutils\distutils.cfg:

in it, put:

[build]
compiler = mingw32

Then setup.py build should default to using mingw32

> I'll build GDAL without python bindings... I have no such time to compile
> also python with MinGW!

Being a python fan, I'd like to help with that, but I can't seem to get 
GDAL to build at all with mingw and msys. How did you do that? If I can 
get GDAL to build, I'll figure out how to get the python extensions to 
build.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From ivan.lucena at pmldnet.com  Tue Feb 26 22:35:25 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Tue Feb 26 22:35:32 2008
Subject: [gdal-dev] Motion: Commiter Status for Moratto
Message-ID: <47C4DA7D.3050907@pmldnet.com>

Moratto has been using GDAL in the development of Delphi application for 
quite some time now, but as his work has evolved he felt the need to use 
SWIG to generate a wrapper. The problem is that there no official Delphi 
module in SWIG, so he developed it himself.

Moratto would need the Commiter Status to migrate the wrapper from my 
sandbox to the trunk to continue his work in the development of the GDAL 
Delphi wrapper.

Moratto has reviewed RFC 3 on commiter responsibilities, and has agreed 
to them.

Best regards,

Ivan Lucena
From nielslcr at gmail.com  Tue Feb 26 23:04:13 2008
From: nielslcr at gmail.com (niels hoffmann)
Date: Tue Feb 26 23:04:16 2008
Subject: [gdal-dev] gdal Python bindings and postgis question
Message-ID: <8a22209b0802262004p759a3e5fx1e5a27d398acbed8@mail.gmail.com>

Hi list,

I am trying to get the python bindings to gdal to work on windows and Python
2.5.1 to connect to Postgis. I know everything is packaged in FWTools, and I
have it working that way. But I want to use the shapely package, which
requires python 2.4+
So I extracted the gdalwin32exe150.zip and added the bin dir of it to my
path and created the GDAL_DATA env variable.
I downloaded the ogr_PG.dll and added it to the bin\gdalplugins dir. The
path to the pg_config.exe is also in my path variable (not sure if that is
important)
I grabbed the GDAL-1.5.0.win32-py2.5.exe from
http://pypi.python.org/pypi/GDAL and installed that.
If I open a shapefile that is ok, but if I try to open my Postgis dataset I
get a NoneType error back:

>>> from osgeo import ogr
>>> dir(ogr)
['CreateGeometryFromGML', 'CreateGeometryFromJson', 'CreateGeometryFromWkb',
'CreateGeometryFromWkt', 'DataSource', 'DataSource_swigregister',
'DontUseExceptions', 'Driver', 'Driver_swigregister', 'Feature',
'FeatureDefn', 'FeatureDefn_swigregister', 'Feature_swigregister',
'FieldDefn', 'FieldDefn_swigregister', 'Geometry', 'Geometry_swigregister',
'GetDriver', 'GetDriverByName', 'GetDriverCount', 'GetOpenDS',
'GetOpenDSCount', 'Layer', 'Layer_swigregister', 'ODrCCreateDataSource',
'ODrCDeleteDataSource', 'ODsCCreateLayer', 'ODsCDeleteLayer', 'OFTBinary',
'OFTDate', 'OFTDateTime', 'OFTInteger', 'OFTIntegerList', 'OFTReal',
'OFTRealList', 'OFTString', 'OFTStringList', 'OFTTime', 'OFTWideString',
'OFTWideStringList', 'OJLeft', 'OJRight', 'OJUndefined', 'OLCCreateField',
'OLCDeleteFeature', 'OLCFastFeatureCount', 'OLCFastGetExtent',
'OLCFastSetNextByIndex', 'OLCFastSpatialFilter', 'OLCRandomRead',
'OLCRandomWrite', 'OLCSequentialWrite', 'OLCTransactions', 'Open',
'OpenShared', 'RegisterAll', 'SetGenerate_DB2_V72_BYTE_ORDER',
'UseExceptions', '__builtins__', '__doc__', '__file__', '__name__',
'_newclass', '_object', '_ogr', '_swig_getattr', '_swig_property',
'_swig_repr', '_swig_setattr', '_swig_setattr_nondynamic', 'new',
'new_instancemethod', 'osr', 'wkb25Bit', 'wkbGeometryCollection',
'wkbGeometryCollection25D', 'wkbLineString', 'wkbLineString25D',
'wkbLinearRing', 'wkbMultiLineString', 'wkbMultiLineString25D',
'wkbMultiPoint', 'wkbMultiPoint25D', 'wkbMultiPolygon',
'wkbMultiPolygon25D', 'wkbNDR', 'wkbNone', 'wkbPoint', 'wkbPoint25D',
'wkbPolygon', 'wkbPolygon25D', 'wkbUnknown', 'wkbXDR']
>>> ogr.RegisterAll()
>>> ds = ogr.Open('PG:dbname=postgis host=localhost', update = 1 )
>>> print ds.GetLayerCount()
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'GetLayerCount'
>>> ds = ogr.Open
(r'C:\arcgis\ArcTutor\ArcScan\ExerciseData\ParcelLines.shp')
>>> print ds.GetLayerCount()
1

Does anybody know what I am missing?

Regards,
Niels Hoffmann
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080227/e1530611/attachment.html
From xingfu81 at gmail.com  Wed Feb 27 04:38:39 2008
From: xingfu81 at gmail.com (lee heng hock)
Date: Wed Feb 27 04:38:45 2008
Subject: [gdal-dev] Question regarding overviews
In-Reply-To: <47BEE568.7040902@pobox.com>
References: <361c82e30802220234p5cf598fcg5d6ca1060bc443a3@mail.gmail.com>
	<47BEE568.7040902@pobox.com>
Message-ID: <361c82e30802270138p6b919065l7af4a3af77d2e77c@mail.gmail.com>

Hi,

I like to clarify my understanding on the concept of overviews.

Say if i have a geotif map 300 pix by 300 pix, then if i build a overview
giving a decimation factor of 2, I will get a map 150 pix by 150 pix. This
is so because 1/2 of the amount of pixels along its width and 1/2 of it
along its height are being thrown away, thus resulting in a map with 1/4 the
original map size in terms of total number of pixels.

Did I get my concept right?

Thanks again..
Heng Hock

On Fri, Feb 22, 2008 at 11:08 PM, Frank Warmerdam <warmerdam@pobox.com>
wrote:

> lee heng hock wrote:
> > Hi,
> >
> > Issue1:
> > Can we build overviews on a paletted geotiff map? or it has to apply
> > only to rgb maps?
>
> Lee,
>
> Yes, but you must be careful only to use the default nearest neighbour
> resampling with non-continuous paletted images, not averaging, when
> building the overviews.
>
> > Issue2 :
> > I have a georeferenced geotiff map (with only 1 raster band) which is
> > large in size probably a few hundred Mb which i like to load in my app.
> > So i use GDALBuildOverviews to build overviews so that I can load lower
> > resolution maps at smaller scales to beef up performance.
> >
> > However, I noticed that after the building process is done, when i do
> this:
> > rasterband->GetOverviewCount(), the result is not 0 which is normal
> > since i built overviews.
> >
> > But when I do:
> > rasterband->GetOverview(0)->GetOverviewCount(); the overview count is
> > also not 0. Why is this so ? shouldnt there be just one layer of
> overviews?
>
> Hmm, I thought I avoided representing non-base layers as having overviews,
> but apparently not.  My advice to you is to ignore this and just don't ask
> overviews if they have overviews.  But I would also encourage you to file
> a ticket on this issue so that the GTiff driver can be fixed up to behave
> more appropriately.
>
> Best regards,
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
Regards
Heng Hock
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080227/84ab782f/attachment-0001.html
From schut at sarvision.nl  Wed Feb 27 05:00:52 2008
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Feb 27 05:00:55 2008
Subject: [gdal-dev] conversion of imagery which has an empty coordinate
	system to geotif format via gdalwarp
In-Reply-To: <fa2ac0580802261051nb667d12m661365bbdfe585e6@mail.gmail.com>
References: <fa2ac0580802261051nb667d12m661365bbdfe585e6@mail.gmail.com>
Message-ID: <47C534D4.1040304@sarvision.nl>

John Mitchell wrote:
> Hi,
> 
> I would like to convert imagery which has an empty coordinate system to
> geotif format via gdalwarp:

John,

this is a file with gcp's, and the gcp's do have a projection defined.
You should just run gdalwarp on this file without any additional
parameters regarding coordinates, then gdalwarp should pick up the gcp's
and use those to warp the file to the crs of the gcp's, which indeed
looks like epsg 4326, but I'm no expert on that.

So just run gdalwarp like this: 'gdalwarp -rc <sourcefile> <dstfile>',
which should do the trick.

Cheers,
Vincent.
> 
> Below is part of a gdalinfo dump of the original imagery.  Notice that
> the Coordinate System is empty
> ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
> Size is 12074, 13232
> Coordinate System is `'
> GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORITY["EPSG",8901]],UNIT["DMSH",0.0174532925199433,AUTHORITY["EPSG",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG",4326]]
> GCP[  0]: Id=1, Info=
>           (0.5,0.5) -> (36.77378,-17.270641,0)
> GCP[  1]: Id=2, Info=
>           (6037,0.5) -> (35.398528,-16.938865,0)
> GCP[  2]: Id=3, Info=
>           (12073.5,0.5) -> (34.027899,-16.597882,0)
> GCP[  3]: Id=4, Info=
>           (0.5,3307.5) -> (36.58987,-17.99724,0)
> GCP[  4]: Id=5, Info=
>           (6037,3307.5) -> (35.209644,-17.663643,0)
> GCP[  5]: Id=6, Info=
>           (12073.5,3307.5) -> (33.834311,-17.320427,0)
> GCP[  6]: Id=7, Info=
>           (0.5,6614.5) -> (36.404318,-18.723611,0)
> GCP[  7]: Id=8, Info=
>           (6037,6614.5) -> (35.01887,-18.388159,0)
> GCP[  8]: Id=9, Info=
>           (12073.5,6614.5) -> (33.638591,-18.042675,0)
> GCP[  9]: Id=10, Info=
>           (0.5,9921.5) -> (36.21706,-19.449749,0)
> GCP[ 10]: Id=11, Info=
>           (6037,9921.5) -> (34.826137,-19.112408,0)
> GCP[ 11]: Id=12, Info=
>           (12073.5,9921.5) -> (33.440671,-18.764619,0)
> GCP[ 12]: Id=13, Info=
>           (0.5,13228.5) -> (36.028031,-20.175626,0)
> GCP[ 13]: Id=14, Info=
>           (6037,13228.5) -> (34.631381,-19.836361,0)
> GCP[ 14]: Id=15, Info=
>           (12073.5,13228.5) -> (33.24048,-19.486228,0)
> Metadata:
>   ELLIPSOID=WGS84          
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,13232.0)
> Upper Right (12074.0,    0.0)
> Lower Right (12074.0,13232.0)
> Center      ( 6037.0, 6616.0)
> Band 1 Block=12074x1 Type=Byte, ColorInterp=Undefined
> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
> 
> 
> Based on the above gdalinfo data I assumed that the projection should be
> wgs84/EPSG:4326
> 
> So I run the following command against the imagery to convert it to
> geotiff with an EPSG code of 4326:
> gdalwarp -rc -s_srs epsg:4326 -t_srs epsg:4326 source_imagery
> destination_geotiff
> 
> Next I run gdalinfo against the converted geotiff file which is listed
> below:
> ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
> Driver: GTiff/GeoTIFF
> Files: C:\dat_01.tif
> Size is 15174, 15369
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.2572235630016,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (33.240318507099211,-16.597638311748319)
> Pixel Size = (0.000232863689106,-0.000232863689106)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  33.2403185, -16.5976383) ( 33d14'25.15"E, 16d35'51.50"S)
> Lower Left  (  33.2403185, -20.1765203) ( 33d14'25.15"E, 20d10'35.47"S)
> Upper Right (  36.7737921, -16.5976383) ( 36d46'25.65"E, 16d35'51.50"S)
> Lower Right (  36.7737921, -20.1765203) ( 36d46'25.65"E, 20d10'35.47"S)
> Center      (  35.0070553, -18.3870793) ( 35d 0'25.40"E, 18d23'13.49"S)
> Band 1 Block=15174x1 Type=Byte, ColorInterp=Gray
> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
> 
> The readme file has the CORNER COORDINATES of:
> -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
>                  
>        17?16'14.30" S      16?35'52.37" S
>        36?46'25.60" E      34?01'40.43" E
>  
>        20?10'34.62" S      19?29'12.77" S
>        36?01'40.29" E      33?14'25.06" E
> 
> CENTER       18?22'S   035?01'E
> ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
> 
> In comparing the readme file to converted geotiff the resolution
> increased slightly and the coordinates were slightly different.
> Am I correct in assuming that the EPSG code should be 4326 when
> converting to geotiff format via gdalwarp?
> 
> Thanks,
> 
> John J. Mitchell
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Chris.Barker at noaa.gov  Wed Feb 27 11:42:15 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Feb 27 11:40:44 2008
Subject: R: R: [gdal-dev] GDAL & Python
In-Reply-To: <002601c878da$95424110$0301a8c0@notebookmarco>
References: <FBCMMO02G7Fp3NSoBJ90002e2d0@FBCMMO02.fbc.local>
	<47C44FEB.7060403@noaa.gov>
	<000d01c878af$ec2b74e0$0301a8c0@notebookmarco>
	<47C499B9.1030108@noaa.gov>
	<002601c878da$95424110$0301a8c0@notebookmarco>
Message-ID: <47C592E7.2040405@noaa.gov>

Marco Pasetti wrote:
> I'll try to reply as best as possible, it's very late here... And my poor
> english becames horrible when I'm tired ....

no problem -- it can wait until tomorrow!

> I should try again and write down the outputs.

that would be great.

> I rapidly read it; I should work on the problem, but I'm working on a larger
> project, and python enabling is just a part of it... And the former is again
> a little part of another bigger project I'm working on, that is my
> university thesis... I'm really sorry, I have no such time to spend on it...

no problem, we all do what we can.

> However I guess that the easiest way to enable python bindings in GDAL would
> be to build python itself with MinGW

I'm not so sure -- then you have to build all of Python, and who knows 
what other extensions! The whole point of mingw is that is can build 
stuff that works with regular old windows applications, and I have 
successfully built python extensions with it, so it should be doable.

> I'm working on a building guide for both GRASS and QGIS as native windows
> binary. It's still a WIP, but if you want you can give it a glange:
> http://www.webalice.it/marco.pasetti/grass/BuildFromSource.html

Thanks. I'm using a slightly older version of msys -- maybe I'll try 
that upgrade, and see id that helps any.

> target is to obtain a GRASS+QGIS build as most complete as possible...

The python bindings to QGIS are getting a lot more use these days -- are 
you building those?

-Chris
-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Wed Feb 27 15:55:57 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 27 15:56:23 2008
Subject: [gdal-dev] Question regarding overviews
In-Reply-To: <361c82e30802270138p6b919065l7af4a3af77d2e77c@mail.gmail.com>
References: <361c82e30802220234p5cf598fcg5d6ca1060bc443a3@mail.gmail.com>
	<47BEE568.7040902@pobox.com>
	<361c82e30802270138p6b919065l7af4a3af77d2e77c@mail.gmail.com>
Message-ID: <47C5CE5D.1060805@pobox.com>

lee heng hock wrote:
> Hi,
> 
> I like to clarify my understanding on the concept of overviews.
> 
> Say if i have a geotif map 300 pix by 300 pix, then if i build a 
> overview giving a decimation factor of 2, I will get a map 150 pix by 
> 150 pix. This is so because 1/2 of the amount of pixels along its width 
> and 1/2 of it along its height are being thrown away, thus resulting in 
> a map with 1/4 the original map size in terms of total number of pixels.
> 
> Did I get my concept right?

Heng Hock,

Yes, this is correct.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From josegomez at gmx.net  Wed Feb 27 16:25:21 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Feb 27 16:25:24 2008
Subject: [gdal-dev] Meteosat 2nd Gen projection (MSG GEO)
Message-ID: <20080227212521.232610@gmx.net>

Hi,
I have some data from MSG, in ENVI format. The raster file does not have any projection information, and I would like to reproject it into WGS84. After some lurking about the GDAL codebase, it appears that the proj4 invocation is given by "+proj=geos +h=35785831 +a=6378169 +b=6356583.8". So I set up to reproject my file:

$ gdalwarp -of GTiff -t_srs "EPSG:4326" -s_srs "+proj=geos +h=35785831 +a=6378169 +b=6356583.8" \
input_file.dat output_file.tif
ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for input_file.dat
There is no affine transformation and no GCPs.

Is this the right way of doing this? There's very little information on this projection anywhere.

Thanks!
Jose
-- 
Psst! Geheimtipp: Online Games kostenlos spielen bei den GMX Free Games! 
http://games.entertainment.web.de/de/entertainment/games/free
From warmerdam at pobox.com  Wed Feb 27 16:36:47 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Feb 27 16:37:13 2008
Subject: [gdal-dev] Meteosat 2nd Gen projection (MSG GEO)
In-Reply-To: <20080227212521.232610@gmx.net>
References: <20080227212521.232610@gmx.net>
Message-ID: <47C5D7EF.8050703@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi,
> I have some data from MSG, in ENVI format. The raster file does not have any projection information, and I would like to reproject it into WGS84. After some lurking about the GDAL codebase, it appears that the proj4 invocation is given by "+proj=geos +h=35785831 +a=6378169 +b=6356583.8". So I set up to reproject my file:
> 
> $ gdalwarp -of GTiff -t_srs "EPSG:4326" -s_srs "+proj=geos +h=35785831 +a=6378169 +b=6356583.8" \
> input_file.dat output_file.tif
> ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for input_file.dat
> There is no affine transformation and no GCPs.
> 
> Is this the right way of doing this? There's very little information on this projection anywhere.

Jose,

What does the gdalinfo report on the input file look like?  I believe the
problem is that GDAL does not even know the coordinates for the input file
in the GEOS projection.  That is, it has no geotransform for the file.  This
isn't a projection problem so much as a basic georeferencing problem.

The issue could be in the ENVI driver, or it could be that the data is
not georeferenced at all.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From szekerest at gmail.com  Wed Feb 27 18:44:15 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Feb 27 18:44:26 2008
Subject: [gdal-dev] Motion: Commiter Status for Moratto
In-Reply-To: <47C4DA7D.3050907@pmldnet.com>
References: <47C4DA7D.3050907@pmldnet.com>
Message-ID: <f3b73b7d0802271544y6db5f664k4cc1aadf0b0b4b13@mail.gmail.com>

Ivan,

I'm +1 to the motion to add Stefano as a commiter.


With regards to the addition it would be required to restructure the
implementation can be found in
http://svn.osgeo.org/gdal/sandbox/ilucena/swig/ a bit before adding it
to the trunk.
Any of the SWIG bindings should be built upon a common ground just
like for the other languages we currently have. I think one of the
most important goals around here is to ensure the proper convergence
between the interfaces that the various languages can provide.
Currently all of the SWIG bindings are derived from the interface
files in the /swig/include directory of the gdal project tree. These
files contain the desired wrappers (shadow classes) of the GDAL C API.
The generated interfaces will finally link against the gdal.dll and
doesn't create a separate dll for hosting the gdal/ogr related code.

Would it be realizable to follow the policy mentioned above?


Best regards,

Tamas




2008/2/27, Lucena, Ivan <ivan.lucena@pmldnet.com>:
> Moratto has been using GDAL in the development of Delphi application for
>  quite some time now, but as his work has evolved he felt the need to use
>  SWIG to generate a wrapper. The problem is that there no official Delphi
>  module in SWIG, so he developed it himself.
>
>  Moratto would need the Commiter Status to migrate the wrapper from my
>  sandbox to the trunk to continue his work in the development of the GDAL
>  Delphi wrapper.
>
>  Moratto has reviewed RFC 3 on commiter responsibilities, and has agreed
>  to them.
>
>  Best regards,
>
>
>  Ivan Lucena
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ivan.lucena at pmldnet.com  Wed Feb 27 22:10:09 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Feb 27 22:10:15 2008
Subject: [gdal-dev] Motion: Commiter Status for Moratto
In-Reply-To: <f3b73b7d0802271544y6db5f664k4cc1aadf0b0b4b13@mail.gmail.com>
References: <47C4DA7D.3050907@pmldnet.com>
	<f3b73b7d0802271544y6db5f664k4cc1aadf0b0b4b13@mail.gmail.com>
Message-ID: <47C62611.9010501@pmldnet.com>

Thank you Tamas,

It sounds like a good plan to me.

Stefano (Moratto) started the Delphi interface completely outside of the 
GDAL trunk in a FWTools distribution. I organized his code in the folder 
structure (.\swig\delphi, .\swig\include\delphi\*.i, .\swig\makefile.vc) 
but he is not using the interfaces on .\swig\interface\*.i yet.

What do you think Stefano (or should we call you Moratto)? Can we comply 
with those requirements?

Best regards,

Ivan


Tamas Szekeres wrote:
> Ivan,
> 
> I'm +1 to the motion to add Stefano as a commiter.
> 
> 
> With regards to the addition it would be required to restructure the
> implementation can be found in
> http://svn.osgeo.org/gdal/sandbox/ilucena/swig/ a bit before adding it
> to the trunk.
> Any of the SWIG bindings should be built upon a common ground just
> like for the other languages we currently have. I think one of the
> most important goals around here is to ensure the proper convergence
> between the interfaces that the various languages can provide.
> Currently all of the SWIG bindings are derived from the interface
> files in the /swig/include directory of the gdal project tree. These
> files contain the desired wrappers (shadow classes) of the GDAL C API.
> The generated interfaces will finally link against the gdal.dll and
> doesn't create a separate dll for hosting the gdal/ogr related code.
> 
> Would it be realizable to follow the policy mentioned above?
> 
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> 
> 2008/2/27, Lucena, Ivan <ivan.lucena@pmldnet.com>:
>> Moratto has been using GDAL in the development of Delphi application for
>>  quite some time now, but as his work has evolved he felt the need to use
>>  SWIG to generate a wrapper. The problem is that there no official Delphi
>>  module in SWIG, so he developed it himself.
>>
>>  Moratto would need the Commiter Status to migrate the wrapper from my
>>  sandbox to the trunk to continue his work in the development of the GDAL
>>  Delphi wrapper.
>>
>>  Moratto has reviewed RFC 3 on commiter responsibilities, and has agreed
>>  to them.
>>
>>  Best regards,
>>
>>
>>  Ivan Lucena
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> 
> 
From josegomez at gmx.net  Thu Feb 28 05:57:36 2008
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Thu Feb 28 05:57:39 2008
Subject: [gdal-dev] Meteosat 2nd Gen projection (MSG GEO)
In-Reply-To: <47C5D7EF.8050703@pobox.com>
References: <20080227212521.232610@gmx.net> <47C5D7EF.8050703@pobox.com>
Message-ID: <20080228105736.257260@gmx.net>

Hi Frank,

> What does the gdalinfo report on the input file look like?  I believe the
> problem is that GDAL does not even know the coordinates for the input file
> in the GEOS projection.  That is, it has no geotransform for the file. 
> This
> isn't a projection problem so much as a basic georeferencing problem.
> 
> The issue could be in the ENVI driver, or it could be that the data is
> not georeferenced at all.


You are absolutely right (as usual!). The file contains two bands, one with Latitude and one with Longitude values for each pixel's location. In a sense, it is a set of GCPs stuck in a raster. Since my data are referenced with respect to these pixels, I can then work out the Long/Lat values from here. i guess that thinking about it, what I would like to do is to shove my data into a raster like this (unreference) ENVI raster, and be able to project it into something else. So I could still extract the data from my reference ENVI raster into GCPs and use that work out the GeoTransform, and assign a projection to my rasters.

Since I have a GCP for each pixel, what would be the best way of dealing with this? Extracting gcp lines is not a problem, how can I tell gdal_translate to use a 2000x2000 (ish) list of GCPs?

Many thanks!
Jose


-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kann`s mit allen: http://www.gmx.net/de/go/multimessenger
From warmerdam at pobox.com  Thu Feb 28 10:25:36 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 28 10:26:17 2008
Subject: [gdal-dev] Meteosat 2nd Gen projection (MSG GEO)
In-Reply-To: <20080228105736.257260@gmx.net>
References: <20080227212521.232610@gmx.net> <47C5D7EF.8050703@pobox.com>
	<20080228105736.257260@gmx.net>
Message-ID: <47C6D270.7010005@pobox.com>

Jose Luis Gomez Dans wrote:
> You are absolutely right (as usual!). The file contains two bands, one with
> Latitude and one with Longitude values for each pixel's location. In a
> sense, it is a set of GCPs stuck in a raster. Since my data are referenced
> with respect to these pixels, I can then work out the Long/Lat values from
> here. i guess that thinking about it, what I would like to do is to shove my
> data into a raster like this (unreference) ENVI raster, and be able to
> project it into something else. So I could still extract the data from my
> reference ENVI raster into GCPs and use that work out the GeoTransform, and
> assign a projection to my rasters.
> 
> Since I have a GCP for each pixel, what would be the best way of dealing
> with this? Extracting gcp lines is not a problem, how can I tell
> gdal_translate to use a 2000x2000 (ish) list of GCPs?

Jose,

There are a few approaches.

One is to extract a subset of GCPs (a 10x10 grib of GCPs would likely be
sufficient).

Another is to create a VRT file that lets GDAL know that the lat and long
bands are geolocation information.  This is fairly involved, and GDAL 1.5
is the first version where gdalwarp properly supports using such
geolocation arrays.  But the approach is documented in:

   http://trac.osgeo.org/gdal/wiki/rfc4_geolocate

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From nikos.alexandris at felis.uni-freiburg.de  Thu Feb 28 10:36:33 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Thu Feb 28 10:36:28 2008
Subject: [gdal-dev] Difference of bin and bin_safe directories/ tools
	in FWTools (?)
In-Reply-To: <47C440F4.8020305@pobox.com>
References: <1203976158.16148.3.camel@vertical> <47C440F4.8020305@pobox.com>
Message-ID: <1204212993.12178.1.camel@vertical>


On Tue, 2008-02-26 at 11:40 -0500, Frank Warmerdam wrote:
> Nikos Alexandris wrote:
> > I have a rather simple question for developers... I think.
> > 
> > [Under Ubuntu 7.10, without gdal-bin installed from the ubuntu repo's]
> > 
> > I cannot read kml files with ogrinfo (and use ogr2ogr) from within the
> > FWTools/bin directory but I can do it from within FWTools/bin_safe   and
> > from within OpenEV as well.
> > 
> > What is the difference?
> 
> Nikos,
> 
> The bin_safe directory contains scripts which set various environment
> variables before running the real executables in the bin directory.
> The most important environment variable is LD_LIBRARY_PATH so that the
> correct shared libraries are found.
> 
> These bin_safe cover scripts accomplish the same effect as sourcing the
> fwtools_env.sh script.
> 
> Best regards,

Thank you for the clarification Frank. I got it finally working when I
added the respective line to my /etc/ld.so.conf

Cheers!

From estrada.adam at gmail.com  Thu Feb 28 11:06:43 2008
From: estrada.adam at gmail.com (aestrada)
Date: Thu Feb 28 11:06:49 2008
Subject: [gdal-dev] GdalWarp Errors?
Message-ID: <9b23c83d-3b45-4936-a47d-402ce3b32482@b1g2000hsg.googlegroups.com>

All,
    I am reprojecting some data as part of a really long workflow
using Gdal_Translate to import ECW data to GeoTIFF --> GdalWarp to
reproject the output from that --> then I use another application to
export back to MrSID.

GdalWarp is producing this error and after 1000 line errors, it quits
the job.

ERROR 1: TIFFAppendToStrip:Write error at scanline 7635
ERROR 1: TIFFAppendToStrip:Write error at scanline 7635
ERROR 1: TIFFWriteEncodedStrip() failed.

This is just a snapshot of a single line.  Could it be that the
temporary TIFF file that was created by Gdal_Translate is too large
for GdalWarp?  The files that are being produced by Gdal_Translate are
roughly about 1.5 gigs so I really don't think they should be killing
the software.  Does anyone have an idea about what might be happening?

AWE
From warmerdam at pobox.com  Thu Feb 28 11:20:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 28 11:20:53 2008
Subject: [gdal-dev] GdalWarp Errors?
In-Reply-To: <9b23c83d-3b45-4936-a47d-402ce3b32482@b1g2000hsg.googlegroups.com>
References: <9b23c83d-3b45-4936-a47d-402ce3b32482@b1g2000hsg.googlegroups.com>
Message-ID: <47C6DF4B.90207@pobox.com>

aestrada wrote:
> All,
>     I am reprojecting some data as part of a really long workflow
> using Gdal_Translate to import ECW data to GeoTIFF --> GdalWarp to
> reproject the output from that --> then I use another application to
> export back to MrSID.
> 
> GdalWarp is producing this error and after 1000 line errors, it quits
> the job.
> 
> ERROR 1: TIFFAppendToStrip:Write error at scanline 7635
> ERROR 1: TIFFAppendToStrip:Write error at scanline 7635
> ERROR 1: TIFFWriteEncodedStrip() failed.
> 
> This is just a snapshot of a single line.  Could it be that the
> temporary TIFF file that was created by Gdal_Translate is too large
> for GdalWarp?  The files that are being produced by Gdal_Translate are
> roughly about 1.5 gigs so I really don't think they should be killing
> the software.  Does anyone have an idea about what might be happening?

AWE,

Things should be quite safe if the TIFF file grows no larger than 2GB.
Normally it should even be fine up to 4GB.

So, I would start by checking the file size.  The next thing I would
suggest is trying the operation using a very recent FWTools build.  I
have fixed some nasty problems in libtiff with "update in place" which
might resolve the issue you are seeing.  This update-in-place does occur
a lot with gdalwarp, but not with straight-through translation such as is
done by gdal_translate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Thu Feb 28 18:25:20 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Feb 28 18:25:49 2008
Subject: [gdal-dev] Motion: Commiter Status for Moratto
In-Reply-To: <47C4DA7D.3050907@pmldnet.com>
References: <47C4DA7D.3050907@pmldnet.com>
Message-ID: <47C742E0.1010708@pobox.com>

Lucena, Ivan wrote:
> Moratto has been using GDAL in the development of Delphi application for 
> quite some time now, but as his work has evolved he felt the need to use 
> SWIG to generate a wrapper. The problem is that there no official Delphi 
> module in SWIG, so he developed it himself.
> 
> Moratto would need the Commiter Status to migrate the wrapper from my 
> sandbox to the trunk to continue his work in the development of the GDAL 
> Delphi wrapper.
> 
> Moratto has reviewed RFC 3 on commiter responsibilities, and has agreed 
> to them.

Ivan,

I'm +1 on Stefano Moratto getting commit priveledges.

I do think there needs to needs to be more discussion on how to make
a Delphi GDAL binding fit in with the rest of the swig based bindings.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Chris.Barker at noaa.gov  Thu Feb 28 19:07:14 2008
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Feb 28 19:05:39 2008
Subject: [gdal-dev] Building with MSYS/MingGW
Message-ID: <47C74CB2.90807@noaa.gov>

Hi all,

I've never been able to get GDAL to build with MSYS/MinGW. However, it 
appears others here have, so here's my questions:

What versions of MSYS and MinGW are you using?

Do you configure with libtool or without (if with, did you need to apply 
a patch?)

Can you give me an example ./configure line that works for you?

I'm running:
WindowsXP service pack2
MSYS version 1.0.10
MinGW 5.1.3 (gcc 3.4.2)

I've tried building the 1.5 release, and various versions of SVN, both 
with and without libtool.

Any tips would be appreciated.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From marco.pasetti at alice.it  Thu Feb 28 19:22:46 2008
From: marco.pasetti at alice.it (Marco Pasetti)
Date: Thu Feb 28 19:22:58 2008
Subject: R: [gdal-dev] Building with MSYS/MingGW
In-Reply-To: <47C74CB2.90807@noaa.gov>
References: <47C74CB2.90807@noaa.gov>
Message-ID: <002901c87a69$35d5fbf0$0301a8c0@notebookmarco>

 
Hi Chris,

>What versions of MSYS and MinGW are you using?

I suggest MSYS (1.0.11) and MinGW (5.1.3)
http://prdownloads.sourceforge.net/mingw/MSYS-1.0.11-2004.04.30-1.exe

>Do you configure with libtool or without (if with, did you need to apply a
patch?)

I use libtool; though it has few patches to let it work:
http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW

>Can you give me an example ./configure line that works for you?

./configure --prefix=/usr/local \
--without-grass \
--without-expat \
--with-pg=/usr/local/pgsql/bin/pg_config.exe \
--with-sqlite3=/usr/local/sqlite

If you want to build without GRASS (but with GRASS also works, withou any
patch) and with PostgreSQL and SQLite3;
To add these supports you need to build them with MinGW; prebuilt binaries
of PostgreSQL don't work because linking problems in OpenSSL driver;
I built and added supprt for GRASS SVN, SQlite 3.5.6 (latest) and PostgreSQL
(8.2.6 - latest before 8.3.0, that is the current stable release, but it
does'nt compile on MinGW)

I disabled expat because, for unknow reasons, it is not recognized by
configure.

Adding Python support could be done installing the current release of Python
(2.5.2) and Python Extensions for Windows, respectively from
http://www.python.org/ftp/python/2.5.2/python-2.5.2.msi and
http://downloads.sourceforge.net/pywin32/pywin32-210.win32-py2.5.exe

Regards,

Marco



-----Messaggio originale-----
Da: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] Per conto di Christopher Barker
Inviato: venerd? 29 febbraio 2008 1.07
A: gdal-dev
Oggetto: [gdal-dev] Building with MSYS/MingGW

Hi all,

I've never been able to get GDAL to build with MSYS/MinGW. However, it
appears others here have, so here's my questions:

What versions of MSYS and MinGW are you using?

Do you configure with libtool or without (if with, did you need to apply a
patch?)

Can you give me an example ./configure line that works for you?

I'm running:
WindowsXP service pack2
MSYS version 1.0.10
MinGW 5.1.3 (gcc 3.4.2)

I've tried building the 1.5 release, and various versions of SVN, both with
and without libtool.

Any tips would be appreciated.

-Chris


--
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From monshi at home.se  Fri Feb 29 03:29:09 2008
From: monshi at home.se (Tomas R)
Date: Fri Feb 29 03:29:25 2008
Subject: [gdal-dev] C#: Gdal on Win64
Message-ID: <fq8foq$m8o$1@ger.gmane.org>

Is it possible to use gdal (C# wrapped)  from FWTools on a Win64 system 
(Vista 64)?

I have a plugin for SportTracks which gives other libraries access to 
GDAL. This is achieved by adding the path to the GDAL binaries to system 
PATH (for the running program).

On a Win64, i.e. Vista 64, the exception below is thrown when trying to 
read the version of the GDAL libraries. Is this normal behaviour or is 
there anything I can do to avoid this exception? I use GDAL 1.6.0dev 
from FWTools 2.1.0. All supportive libraries from FWTools are available 
to Gdal.

System.TypeInitializationException: The type initializer for 
'OSGeo.GDAL.GdalPINVOKE' threw an exception. ---> 
System.TypeInitializationException: The type initializer for 
'SWIGExceptionHelper' threw an exception. ---> 
System.BadImageFormatException: An attempt was made to load a program 
with an incorrect format. (Exception from HRESULT: 0x8007000B)
   at 
OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate 
applicationDelegate, ExceptionDelegate arithmeticDelegate, 
ExceptionDelegate divideByZeroDelegate, ExceptionDelegate 
indexOutOfRangeDelegate, ExceptionDelegate invalidOperationDelegate, 
ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate, 
ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate 
overflowDelegate, ExceptionDelegate systemExceptionDelegate)
   at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
   at OSGeo.GDAL.GdalPINVOKE..cctor()
   --- End of inner exception stack trace ---
   at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
   at OSGeo.GDAL.Gdal.SetConfigOption(String arg0, String arg1)
   at GDALPlugin.Gdal_Interface..ctor()


Yours
Tomas

From szekerest at gmail.com  Fri Feb 29 05:51:17 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Feb 29 05:51:22 2008
Subject: [gdal-dev] C#: Gdal on Win64
In-Reply-To: <fq8foq$m8o$1@ger.gmane.org>
References: <fq8foq$m8o$1@ger.gmane.org>
Message-ID: <f3b73b7d0802290251k75ffa550y2badacac33d3ae54@mail.gmail.com>

Tomas,

Currently I have no opportunity to test on Vista 64 at the moment and
therefore I cannot decide whether this is a Vista specific issue or
not. I'm not sure which .NET framework you are running against. You
might want to do a test with my Windows Server 2003 x64 compilation
can be downloaded from the buildbot:

http://vbkto.dyndns.org:1080/gdal/szekerest-vc80-full/gdal/

I could also make the x64 versions of related dlls like proj.dll
available to download.

Best regards,

Tamas



2008/2/29, Tomas R <monshi@home.se>:
> Is it possible to use gdal (C# wrapped)  from FWTools on a Win64 system
>  (Vista 64)?
>
>  I have a plugin for SportTracks which gives other libraries access to
>  GDAL. This is achieved by adding the path to the GDAL binaries to system
>  PATH (for the running program).
>
>  On a Win64, i.e. Vista 64, the exception below is thrown when trying to
>  read the version of the GDAL libraries. Is this normal behaviour or is
>  there anything I can do to avoid this exception? I use GDAL 1.6.0dev
>  from FWTools 2.1.0. All supportive libraries from FWTools are available
>  to Gdal.
>
>  System.TypeInitializationException: The type initializer for
>  'OSGeo.GDAL.GdalPINVOKE' threw an exception. --->
>  System.TypeInitializationException: The type initializer for
>  'SWIGExceptionHelper' threw an exception. --->
>  System.BadImageFormatException: An attempt was made to load a program
>  with an incorrect format. (Exception from HRESULT: 0x8007000B)
>    at
>  OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate
>  applicationDelegate, ExceptionDelegate arithmeticDelegate,
>  ExceptionDelegate divideByZeroDelegate, ExceptionDelegate
>  indexOutOfRangeDelegate, ExceptionDelegate invalidOperationDelegate,
>  ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate,
>  ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate
>  overflowDelegate, ExceptionDelegate systemExceptionDelegate)
>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
>    --- End of inner exception stack trace ---
>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
>    at OSGeo.GDAL.GdalPINVOKE..cctor()
>    --- End of inner exception stack trace ---
>    at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
>    at OSGeo.GDAL.Gdal.SetConfigOption(String arg0, String arg1)
>    at GDALPlugin.Gdal_Interface..ctor()
>
>
>  Yours
>  Tomas
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From monshi at home.se  Fri Feb 29 06:38:30 2008
From: monshi at home.se (Tomas R)
Date: Fri Feb 29 06:38:46 2008
Subject: [gdal-dev] Re: C#: Gdal on Win64
In-Reply-To: <f3b73b7d0802290251k75ffa550y2badacac33d3ae54@mail.gmail.com>
References: <fq8foq$m8o$1@ger.gmane.org>
	<f3b73b7d0802290251k75ffa550y2badacac33d3ae54@mail.gmail.com>
Message-ID: <fq8qrr$sh5$1@ger.gmane.org>

Neither have I access to a computer with Vista 64, or any other 64 bit
system, it is a user who has reported the error. I'm waiting to see if
there will be another user with a 64 bit system who will test the plugin
so as you say, it is not yet confirmed it is a 64 bit error.


The plugin is compiled to .Net2.0 and, of course on Vista, run on .Net3.5.

Since I personally can't test it is a bit harder/slower to verify if it
works.  A quick test on my computer (Win XP, 32 bit), after renaming the
gdal16dev.dll to gdal_fw.dll, together with FWTools C# wrappers and
supporting libraries I am able to query the gdal version but not, with
existing code, set up a spatial reference. (Pinvoke error, Can't read
the DLL-file osr_wrap)

Strange - is it a 64 bit "version" of gdal? should it then at all work
on my 32 bit system? That it fails on setting up a spatial reference I
guess is because it it is not able to reference to the FWtools version
of the supporting dlls. Or?

I will see if the user is willing to try this dll I downloaded from your
link and see if he is able to retrieve version information. If that 
works we can move on to the rest of the libraries if you are willing.


Yours
Tomas

Tamas Szekeres skrev:
> Tomas,
>
> Currently I have no opportunity to test on Vista 64 at the moment and
> therefore I cannot decide whether this is a Vista specific issue or
> not. I'm not sure which .NET framework you are running against. You
> might want to do a test with my Windows Server 2003 x64 compilation
> can be downloaded from the buildbot:
>
> http://vbkto.dyndns.org:1080/gdal/szekerest-vc80-full/gdal/
>
> I could also make the x64 versions of related dlls like proj.dll
> available to download.
>
> Best regards,
>
> Tamas
>
>
>
> 2008/2/29, Tomas R :
>   
>> Is it possible to use gdal (C# wrapped)  from FWTools on a Win64 system
>>  (Vista 64)?
>>
>>  I have a plugin for SportTracks which gives other libraries access to
>>  GDAL. This is achieved by adding the path to the GDAL binaries to system
>>  PATH (for the running program).
>>
>>  On a Win64, i.e. Vista 64, the exception below is thrown when trying to
>>  read the version of the GDAL libraries. Is this normal behaviour or is
>>  there anything I can do to avoid this exception? I use GDAL 1.6.0dev
>>  from FWTools 2.1.0. All supportive libraries from FWTools are available
>>  to Gdal.
>>
>>  System.TypeInitializationException: The type initializer for
>>  'OSGeo.GDAL.GdalPINVOKE' threw an exception. --->
>>  System.TypeInitializationException: The type initializer for
>>  'SWIGExceptionHelper' threw an exception. --->
>>  System.BadImageFormatException: An attempt was made to load a program
>>  with an incorrect format. (Exception from HRESULT: 0x8007000B)
>>    at
>>  OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate
>>  applicationDelegate, ExceptionDelegate arithmeticDelegate,
>>  ExceptionDelegate divideByZeroDelegate, ExceptionDelegate
>>  indexOutOfRangeDelegate, ExceptionDelegate invalidOperationDelegate,
>>  ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate,
>>  ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate
>>  overflowDelegate, ExceptionDelegate systemExceptionDelegate)
>>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
>>    --- End of inner exception stack trace ---
>>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
>>    at OSGeo.GDAL.GdalPINVOKE..cctor()
>>    --- End of inner exception stack trace ---
>>    at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
>>    at OSGeo.GDAL.Gdal.SetConfigOption(String arg0, String arg1)
>>    at GDALPlugin.Gdal_Interface..ctor()
>>
>>
>>  Yours
>>  Tomas
>>
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>     


From szekerest at gmail.com  Fri Feb 29 07:12:16 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Feb 29 07:12:19 2008
Subject: [gdal-dev] Re: C#: Gdal on Win64
In-Reply-To: <fq8qrr$sh5$1@ger.gmane.org>
References: <fq8foq$m8o$1@ger.gmane.org>
	<f3b73b7d0802290251k75ffa550y2badacac33d3ae54@mail.gmail.com>
	<fq8qrr$sh5$1@ger.gmane.org>
Message-ID: <f3b73b7d0802290412h1f8b12adk8612d6d2170ed178@mail.gmail.com>

Grrr.  I've posted a reference to the x32 builder, here are the correct ones:

http://vbkto.dyndns.org:1080/gdal/szekerest-vc80x64-full/gdal/
http://vbkto.dyndns.org:1080/gdal/szekerest-vc80x64-bin

Best regards,

Tamas


2008/2/29, Tomas R <monshi@home.se>:
> Neither have I access to a computer with Vista 64, or any other 64 bit
>  system, it is a user who has reported the error. I'm waiting to see if
>  there will be another user with a 64 bit system who will test the plugin
>  so as you say, it is not yet confirmed it is a 64 bit error.
>
>
>  The plugin is compiled to .Net2.0 and, of course on Vista, run on .Net3.5.
>
>  Since I personally can't test it is a bit harder/slower to verify if it
>  works.  A quick test on my computer (Win XP, 32 bit), after renaming the
>  gdal16dev.dll to gdal_fw.dll, together with FWTools C# wrappers and
>  supporting libraries I am able to query the gdal version but not, with
>  existing code, set up a spatial reference. (Pinvoke error, Can't read
>  the DLL-file osr_wrap)
>
>  Strange - is it a 64 bit "version" of gdal? should it then at all work
>  on my 32 bit system? That it fails on setting up a spatial reference I
>  guess is because it it is not able to reference to the FWtools version
>  of the supporting dlls. Or?
>
>  I will see if the user is willing to try this dll I downloaded from your
>  link and see if he is able to retrieve version information. If that
>  works we can move on to the rest of the libraries if you are willing.
>
>
>  Yours
>  Tomas
>
>  Tamas Szekeres skrev:
>
> > Tomas,
>  >
>  > Currently I have no opportunity to test on Vista 64 at the moment and
>  > therefore I cannot decide whether this is a Vista specific issue or
>  > not. I'm not sure which .NET framework you are running against. You
>  > might want to do a test with my Windows Server 2003 x64 compilation
>  > can be downloaded from the buildbot:
>  >
>  > http://vbkto.dyndns.org:1080/gdal/szekerest-vc80-full/gdal/
>  >
>  > I could also make the x64 versions of related dlls like proj.dll
>  > available to download.
>  >
>  > Best regards,
>  >
>  > Tamas
>  >
>  >
>  >
>
> > 2008/2/29, Tomas R :
>
> >
>  >> Is it possible to use gdal (C# wrapped)  from FWTools on a Win64 system
>  >>  (Vista 64)?
>  >>
>  >>  I have a plugin for SportTracks which gives other libraries access to
>  >>  GDAL. This is achieved by adding the path to the GDAL binaries to system
>  >>  PATH (for the running program).
>  >>
>  >>  On a Win64, i.e. Vista 64, the exception below is thrown when trying to
>  >>  read the version of the GDAL libraries. Is this normal behaviour or is
>  >>  there anything I can do to avoid this exception? I use GDAL 1.6.0dev
>  >>  from FWTools 2.1.0. All supportive libraries from FWTools are available
>  >>  to Gdal.
>  >>
>  >>  System.TypeInitializationException: The type initializer for
>  >>  'OSGeo.GDAL.GdalPINVOKE' threw an exception. --->
>  >>  System.TypeInitializationException: The type initializer for
>  >>  'SWIGExceptionHelper' threw an exception. --->
>  >>  System.BadImageFormatException: An attempt was made to load a program
>  >>  with an incorrect format. (Exception from HRESULT: 0x8007000B)
>  >>    at
>  >>  OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate
>  >>  applicationDelegate, ExceptionDelegate arithmeticDelegate,
>  >>  ExceptionDelegate divideByZeroDelegate, ExceptionDelegate
>  >>  indexOutOfRangeDelegate, ExceptionDelegate invalidOperationDelegate,
>  >>  ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate,
>  >>  ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate
>  >>  overflowDelegate, ExceptionDelegate systemExceptionDelegate)
>  >>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
>  >>    --- End of inner exception stack trace ---
>  >>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
>  >>    at OSGeo.GDAL.GdalPINVOKE..cctor()
>  >>    --- End of inner exception stack trace ---
>  >>    at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
>  >>    at OSGeo.GDAL.Gdal.SetConfigOption(String arg0, String arg1)
>  >>    at GDALPlugin.Gdal_Interface..ctor()
>  >>
>  >>
>  >>  Yours
>  >>  Tomas
>  >>
>  >>  _______________________________________________
>  >>  gdal-dev mailing list
>  >>  gdal-dev@lists.osgeo.org
>  >>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>
>  >>
>
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From monshi at home.se  Fri Feb 29 07:30:59 2008
From: monshi at home.se (Tomas R)
Date: Fri Feb 29 07:31:22 2008
Subject: [gdal-dev] Re: C#: Gdal on Win64
In-Reply-To: <f3b73b7d0802290412h1f8b12adk8612d6d2170ed178@mail.gmail.com>
References: <fq8foq$m8o$1@ger.gmane.org>	<f3b73b7d0802290251k75ffa550y2badacac33d3ae54@mail.gmail.com>	<fq8qrr$sh5$1@ger.gmane.org>
	<f3b73b7d0802290412h1f8b12adk8612d6d2170ed178@mail.gmail.com>
Message-ID: <fq8tu8$7p7$1@ger.gmane.org>

No harm done....

I won't even bother to try these on my computer. It looks like a 64 bit 
version, the files are bit bigger :)

/Tomas

Tamas Szekeres skrev:
> Grrr.  I've posted a reference to the x32 builder, here are the correct ones:
>
> http://vbkto.dyndns.org:1080/gdal/szekerest-vc80x64-full/gdal/
> http://vbkto.dyndns.org:1080/gdal/szekerest-vc80x64-bin
>
> Best regards,
>
> Tamas
>
>
> 2008/2/29, Tomas R <monshi@home.se>:
>   
>> Neither have I access to a computer with Vista 64, or any other 64 bit
>>  system, it is a user who has reported the error. I'm waiting to see if
>>  there will be another user with a 64 bit system who will test the plugin
>>  so as you say, it is not yet confirmed it is a 64 bit error.
>>
>>
>>  The plugin is compiled to .Net2.0 and, of course on Vista, run on .Net3.5.
>>
>>  Since I personally can't test it is a bit harder/slower to verify if it
>>  works.  A quick test on my computer (Win XP, 32 bit), after renaming the
>>  gdal16dev.dll to gdal_fw.dll, together with FWTools C# wrappers and
>>  supporting libraries I am able to query the gdal version but not, with
>>  existing code, set up a spatial reference. (Pinvoke error, Can't read
>>  the DLL-file osr_wrap)
>>
>>  Strange - is it a 64 bit "version" of gdal? should it then at all work
>>  on my 32 bit system? That it fails on setting up a spatial reference I
>>  guess is because it it is not able to reference to the FWtools version
>>  of the supporting dlls. Or?
>>
>>  I will see if the user is willing to try this dll I downloaded from your
>>  link and see if he is able to retrieve version information. If that
>>  works we can move on to the rest of the libraries if you are willing.
>>
>>
>>  Yours
>>  Tomas
>>
>>  Tamas Szekeres skrev:
>>
>>     
>>> Tomas,
>>>       
>>  >
>>  > Currently I have no opportunity to test on Vista 64 at the moment and
>>  > therefore I cannot decide whether this is a Vista specific issue or
>>  > not. I'm not sure which .NET framework you are running against. You
>>  > might want to do a test with my Windows Server 2003 x64 compilation
>>  > can be downloaded from the buildbot:
>>  >
>>  > http://vbkto.dyndns.org:1080/gdal/szekerest-vc80-full/gdal/
>>  >
>>  > I could also make the x64 versions of related dlls like proj.dll
>>  > available to download.
>>  >
>>  > Best regards,
>>  >
>>  > Tamas
>>  >
>>  >
>>  >
>>
>>     
>>> 2008/2/29, Tomas R :
>>>       
>>  >> Is it possible to use gdal (C# wrapped)  from FWTools on a Win64 system
>>  >>  (Vista 64)?
>>  >>
>>  >>  I have a plugin for SportTracks which gives other libraries access to
>>  >>  GDAL. This is achieved by adding the path to the GDAL binaries to system
>>  >>  PATH (for the running program).
>>  >>
>>  >>  On a Win64, i.e. Vista 64, the exception below is thrown when trying to
>>  >>  read the version of the GDAL libraries. Is this normal behaviour or is
>>  >>  there anything I can do to avoid this exception? I use GDAL 1.6.0dev
>>  >>  from FWTools 2.1.0. All supportive libraries from FWTools are available
>>  >>  to Gdal.
>>  >>
>>  >>  System.TypeInitializationException: The type initializer for
>>  >>  'OSGeo.GDAL.GdalPINVOKE' threw an exception. --->
>>  >>  System.TypeInitializationException: The type initializer for
>>  >>  'SWIGExceptionHelper' threw an exception. --->
>>  >>  System.BadImageFormatException: An attempt was made to load a program
>>  >>  with an incorrect format. (Exception from HRESULT: 0x8007000B)
>>  >>    at
>>  >>  OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate
>>  >>  applicationDelegate, ExceptionDelegate arithmeticDelegate,
>>  >>  ExceptionDelegate divideByZeroDelegate, ExceptionDelegate
>>  >>  indexOutOfRangeDelegate, ExceptionDelegate invalidOperationDelegate,
>>  >>  ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate,
>>  >>  ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate
>>  >>  overflowDelegate, ExceptionDelegate systemExceptionDelegate)
>>  >>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
>>  >>    --- End of inner exception stack trace ---
>>  >>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
>>  >>    at OSGeo.GDAL.GdalPINVOKE..cctor()
>>  >>    --- End of inner exception stack trace ---
>>  >>    at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
>>  >>    at OSGeo.GDAL.Gdal.SetConfigOption(String arg0, String arg1)
>>  >>    at GDALPlugin.Gdal_Interface..ctor()
>>  >>
>>  >>
>>  >>  Yours
>>  >>  Tomas
>>  >>
>>  >>  _______________________________________________
>>  >>  gdal-dev mailing list
>>  >>  gdal-dev@lists.osgeo.org
>>  >>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  >>
>>  >>
>>
>>
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>     

From bartvde at osgis.nl  Fri Feb 29 08:17:38 2008
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Fri Feb 29 08:18:01 2008
Subject: [gdal-dev] PROJ.4 EPSG:28992
Message-ID: <5c6dd3b0751f426d8a62fd26d1095835@145.50.39.11>

Hi list,

in PROJ version 4.6 the definition for the Dutch national grid (EPSG:28992)
is missing the towgs84 parameters.

Is this intentional, or an oversight?

4.5:
<28992> +proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889
+k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
+towgs84=565.237,50.0087,465.658,-0.406857,0.350733,-1.87035,4.0812 +units=m
+no_defs  <>

4.6:
<28992> +proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889
+k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +units=m +no_defs  <>

Best regards,
Bart

--
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl





From stefano.moratto at gmail.com  Fri Feb 29 08:53:52 2008
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Fri Feb 29 08:53:54 2008
Subject: [gdal-dev] Delphi GDAL/OGR SWIG Interface
Message-ID: <d566cee10802290553s578d42f4wc611eb6bfc73b1e9@mail.gmail.com>

Hi Tamas, Frank, Ivan,

Yes, I believe it is possible to comply with the base SWIG interface in
GDAL. I can work in gdal/sandbox until it is not properly adapted and I
will seek you approval once I think it is ready to move to the trunk.

Best regards,

Stefano Moratto
From stefano.moratto at gmail.com  Fri Feb 29 08:58:36 2008
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Fri Feb 29 08:58:39 2008
Subject: [gdal-dev] Delphi GDAL/OGR SWIG Interface
Message-ID: <d566cee10802290558s6780195al9b0b8369c8bea4a6@mail.gmail.com>

Hi Tamas, Frank, Ivan,

Yes, I believe it is possible to comply with the base SWIG interface in
GDAL. I can work in gdal/sandbox until it is not properly adapted and I
will seek you approval once I think it is ready to move to the trunk.

Best regards,

Stefano Moratto
From jukka.rahkonen at mmmtike.fi  Fri Feb 29 09:42:43 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Feb 29 09:42:56 2008
Subject: [gdal-dev] Gdalwarp speed comparison
Message-ID: <loom.20080229T143335-714@post.gmane.org>

Hi,

I made some time ago a few measurements about the speed in of reprojecting
images with gdalwarp and and another software.  Results can be found from here:
http://forums.ermapper.com/viewtopic.php?t=2889

Another software had an option to use an option called "Speed optimization"
which had a big effect on speed. It believe it relates somehow to warping either
in bigger blocks or pixel-by-pixel. I wonder if gdalwarp is utilising something
similar because it tends to be so fast?

-Jukka Rahkonen-

From sfz5 at satx.rr.com  Fri Feb 29 09:44:03 2008
From: sfz5 at satx.rr.com (sfz5@satx.rr.com)
Date: Fri Feb 29 09:44:06 2008
Subject: [gdal-dev] Problems compiling w jp2kak
Message-ID: <380-220082529144437@M2W026.mail2web.com>

Frank

I have been working on a project for a couple of months learning and using
gdal. Recently have been trying to install v 1.5.0 We want to convert NITF
image directories to JPEG-2000 files and have Kakadu-6.0. We are running
fedora5 on x86_64.

We're attempting to build the system using JP2KAK support following
suggestions at http://trac.osgeo.org/gdal/wiki/JP2KAK for 64 bit systems.
After kakadu is built and libraries are in the kakadu-6.0/lib directory, cd
to gdal-1.5.0, ran configure:
    configure --with-ogdi=no --with-kakadu=/home/mw/project/kakadu-6.0
    --prefix=/home/jworkman/project/gdal --with-libtiff=internal
Running make results in over 2000 lines of output that ends with the
following:
    libtool: link: g++ gdalinfo.o -o .libs/gdalinfo
    /home/jworkman/project/gdal-1.5.0/.libs/libgdal.so -L/usr/local/lib
    -L/usr/lib -L/home/jworkman/project/kakadu-6.0/lib -L/usr/kerberos/lib64
    /usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so -lsqlite3
    /usr/lib64/libexpat.so -ljpeg -lpng -lrt -lkdu -lcurl -ldl -lgssapi_krb5
    -lkrb5 -lk5crypto -lkrb5support -lcom_err -lresolv /usr/lib64/libidn.so
    -lssl -lcrypto -lz -Wl,-rpath -Wl,/home/jworkman/project/gdal/lib
    -Wl,-rpath -Wl,/usr/lib64

    /usr/bin/ld: skipping incompatible /usr/lib/librt.so when searching for
    -lrt
    /usr/bin/ld: skipping incompatible /usr/lib/librt.a when searching for
    -lrt
    /usr/bin/ld: skipping incompatible /usr/lib/libdl.so when searching for
    -ldl
    /usr/bin/ld: skipping incompatible /usr/lib/libdl.a when searching for
    -ldl
    /usr/bin/ld: skipping incompatible /usr/lib/libresolv.so when searching
    for -lresolv
    /usr/bin/ld: skipping incompatible /usr/lib/libresolv.a when searching
    for -lresolv
    /usr/bin/ld: skipping incompatible /usr/lib/libz.so when searching for
    -lz
    /usr/bin/ld: skipping incompatible /usr/lib/libz.a when searching for
    -lz
    /usr/bin/ld: skipping incompatible /usr/lib/libm.so when searching for
    -lm
    /usr/bin/ld: skipping incompatible /usr/lib/libm.a when searching for
    -lm
    /usr/bin/ld: skipping incompatible /usr/lib/libc.so when searching for
    -lc
    /usr/bin/ld: skipping incompatible /usr/lib/libc.a when searching for
    -lc
    /home/jworkman/project/gdal-1.5.0/.libs/libgdal.so: undefined reference
    to `kdu_thread_entity::add_queue(kdu_worker*, kdu_thread_queue*, char
    const*, long long)'
    /home/jworkman/project/gdal-1.5.0/.libs/libgdal.so: undefined reference
    to `kdu_codestream::create(kdu_compressed_source*, kdu_thread_env*)'
    collect2: ld returned 1 exit status
    make[1]: *** [gdalinfo] Error 1
    make[1]: Leaving directory `/home/jworkman/project/gdal-1.5.0/apps'
    make: *** [apps-target] Error 2
I tried making again after adding the --without-libtool flag to configure
(suggested to me by a coworker), and it resulted in 1000 lines of output and
the same end error messages at the end.

Not real familiar with 32/64 bit incompatibility issues. Not sure where my
problem is. Any hints for me?

Thanks

Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080229/6a81bd5b/attachment.html
From andrew.deklerk at gmail.com  Fri Feb 29 09:56:22 2008
From: andrew.deklerk at gmail.com (Andrew de klerk)
Date: Fri Feb 29 09:56:24 2008
Subject: [Gdal-dev] Translation Error
Message-ID: <15760215.post@talk.nabble.com>


Hi all

I am attempting to import a shapefile into postgres using the following
command:

ogr2ogr -nlt POINT -f "PostgreSQL" -a_srs "EPSG:2054" PG:"dbname=xxxxx
user=xxxxx password=xxxxx host=localhost port=5432" grid1000.shp

When I run this I get the error:
ERROR 6: No translation for Transverse_Mercator_South_Orientated to PROJ.4
format is known

I would appreciate some assistance on getting round this error

Thanks
Andre
-- 
View this message in context: http://www.nabble.com/Translation-Error-tp15760215p15760215.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Fri Feb 29 10:19:38 2008
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Feb 29 10:19:49 2008
Subject: [gdal-dev] Re: Failing to read a JPEG2000
References: <47C3B507.7040200@petrosys.com.au> <47C444E5.5090909@pobox.com>
Message-ID: <loom.20080229T151127-355@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:


> > This has worked very well, except for one particular JP2 file. The 
> > georeferencing information can be determined without a problem, but when 
> > it comes to reading the ColorInterpretation for each of the three colour 
> > bands in the file, I get an error in jpc_dec_decodepkts() (a JasPer low 
> > level call).
> > 
> > This image can be successfully read and displayed by (some) other 
> > packages (eg. GlobalMapper).
> > 

> 
> Chris,
> 
> I tried it too, and it does seem problematic.  I ran gdalinfo against
> the file and got the following errors:


> I should add this was after the process ballooned to 1.8GB of
> RAM (and I think roughly 3GB of total process space).  So it isn't
> entirely clear to me if the problem was an out-of-memory one
> that was poorly reported, or as you suggest something about the
> color model.  Given the pain I incurred trying the image, I'm not
> inclined to try again. 
> 
> You could file a ticket on the issue, and perhaps Andrey would be
> inclined to look into it.
> 
> I will note that the image works with the JP2KAK driver, but comes
> in with odd colors.  I suspect it is in an unusual color model and
> this isn't being addressed by some or all drivers.
> 

I followed your link I got the image first opened by Quick time on my Firefox
browser :) Then I downloaded it and opened with kdu_show without any problem.
Kakadu tells that the image is made with ER Mapper SDK and that it reversible
and using PROFILE0, and about that kdu_show gives this information:  PROFILE0 is
the most restrictive profile for Part 1 conforming codestreams. For my mind your
image is most normal jpeg2000 image, but I must admit that I have never
understood very much about jpeg2000 even if I have been using the format since
1999 or so.

-Jukka Rahkonen-





From lran at unc.edu  Fri Feb 29 10:50:16 2008
From: lran at unc.edu (Limei Ran)
Date: Fri Feb 29 10:55:03 2008
Subject: [gdal-dev] Extracting cell values from a big image and many smaller
	images
Message-ID: <20080229105016.h2wdvlankoc4wc4s@webmail5.isis.unc.edu>


Hi:

I am using GDAL cpp library to create a program. The program will 
ultimately generate a statistic table with cell values from a very big 
modeling grid domain image (almost whole US) and many smaller land use 
images within the big image.

I need to go through all the small image pixels to match grid cell 
values in the big image. There are many ways to read image data in line 
and blocks from GDALRasterBand class.

Since I am new in using GDAL libraries, I appreciate any suggestion you 
might have in accessing the images efficiently.

Thanks,

Limei







From warmerdam at pobox.com  Fri Feb 29 10:59:45 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 29 11:00:32 2008
Subject: [Gdal-dev] Translation Error
In-Reply-To: <15760215.post@talk.nabble.com>
References: <15760215.post@talk.nabble.com>
Message-ID: <47C82BF1.8000104@pobox.com>

Andrew de klerk wrote:
> Hi all
> 
> I am attempting to import a shapefile into postgres using the following
> command:
> 
> ogr2ogr -nlt POINT -f "PostgreSQL" -a_srs "EPSG:2054" PG:"dbname=xxxxx
> user=xxxxx password=xxxxx host=localhost port=5432" grid1000.shp
> 
> When I run this I get the error:
> ERROR 6: No translation for Transverse_Mercator_South_Orientated to PROJ.4
> format is known
> 
> I would appreciate some assistance on getting round this error

Andre,

I'm afraid the problem is pretty much what is described.  I'm not clear
on what the Transverse Mercator South Orientated projection is, or how
to properly represent it for PROJ.4.

If you are fairly savvy and want this fixed, the thing to do would be
to work out the right PROJ.4 description for this coordinate system, and
provide it to me along with some confirmed test points in the coordinate
system transformed to WGS84 and back for my testing purposes.

In the meantime ... I think you are out of luck.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Feb 29 11:09:32 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 29 11:10:05 2008
Subject: [gdal-dev] Problems compiling w jp2kak
In-Reply-To: <380-220082529144437@M2W026.mail2web.com>
References: <380-220082529144437@M2W026.mail2web.com>
Message-ID: <47C82E3C.90301@pobox.com>

sfz5@satx.rr.com wrote:
> After kakadu is built and libraries are in the kakadu-6.0/lib directory, cd
> to gdal-1.5.0, ran configure:
>     configure --with-ogdi=no --with-kakadu=/home/mw/project/kakadu-6.0
>     --prefix=/home/jworkman/project/gdal --with-libtiff=internal
> Running make results in over 2000 lines of output that ends with the
> following:
>     libtool: link: g++ gdalinfo.o -o .libs/gdalinfo
>     /home/jworkman/project/gdal-1.5.0/.libs/libgdal.so -L/usr/local/lib
>     -L/usr/lib -L/home/jworkman/project/kakadu-6.0/lib -L/usr/kerberos/lib64
>     /usr/local/lib/libgeos_c.so /usr/local/lib/libgeos.so -lsqlite3
>     /usr/lib64/libexpat.so -ljpeg -lpng -lrt -lkdu -lcurl -ldl -lgssapi_krb5
>     -lkrb5 -lk5crypto -lkrb5support -lcom_err -lresolv /usr/lib64/libidn.so
>     -lssl -lcrypto -lz -Wl,-rpath -Wl,/home/jworkman/project/gdal/lib
>     -Wl,-rpath -Wl,/usr/lib64
...
>     /home/jworkman/project/gdal-1.5.0/.libs/libgdal.so: undefined reference
>     to `kdu_thread_entity::add_queue(kdu_worker*, kdu_thread_queue*, char
>     const*, long long)'
>     /home/jworkman/project/gdal-1.5.0/.libs/libgdal.so: undefined reference
>     to `kdu_codestream::create(kdu_compressed_source*, kdu_thread_env*)'
>     collect2: ld returned 1 exit status
>     make[1]: *** [gdalinfo] Error 1
>     make[1]: Leaving directory `/home/jworkman/project/gdal-1.5.0/apps'
>     make: *** [apps-target] Error 2

Mike,

Where is libkdu.a?  Is it in /home/jworkman/project/kakadu-6.0/lib or
in /home/jworkman/project/kakadu-6.0/lib/Linux-x86-64-gcc?  I don't see
any complaints about not finding libkdu.a but stuff isn't found that I would
expect to be found.

I see that my local build is only working because I also installed kakadu
into /usr/local/lib.

BTW, what do you get when you do:
warmerda@gdal64[11]% nm libkdu.a | grep add_queue
                  U 
_ZN17kdu_thread_entity9add_queueEP10kdu_workerP16kdu_thread_queuePKcx
                  U 
_ZN17kdu_thread_entity9add_queueEP10kdu_workerP16kdu_thread_queuePKcx
0000000000001190 T 
_ZN17kdu_thread_entity9add_queueEP10kdu_workerP16kdu_thread_queuePKcx
                  U 
_ZN17kdu_thread_entity9add_queueEP10kdu_workerP16kdu_thread_queuePKcx

There needs to be at least one line reported with the " T " indicating
a definition of this method. If not, perhaps your build of Kakadu is
flawed in some way.

I'm sorry for the sorry state of kakadu building. It seems to still be
hairy.  Please feel free to update the trac wiki when you resolve the
issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Feb 29 11:14:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 29 11:14:53 2008
Subject: [gdal-dev] Gdalwarp speed comparison
In-Reply-To: <loom.20080229T143335-714@post.gmane.org>
References: <loom.20080229T143335-714@post.gmane.org>
Message-ID: <47C82F4F.9080700@pobox.com>

Jukka Rahkonen wrote:
> Hi,
> 
> I made some time ago a few measurements about the speed in of reprojecting
> images with gdalwarp and and another software.  Results can be found from here:
> http://forums.ermapper.com/viewtopic.php?t=2889
> 
> Another software had an option to use an option called "Speed optimization"
> which had a big effect on speed. It believe it relates somehow to warping either
> in bigger blocks or pixel-by-pixel. I wonder if gdalwarp is utilising something
> similar because it tends to be so fast?

Jukka,

By default gdalwarp uses a linear approximator for the transformations with
a permitted error of (I think) a quarter pixel.  This basically transforms
three points on a scanline.  The start, end and middle.  Then it compares the
linear approximation of the center based on the end points to the real thing
and checks the error.  If the error is less than the error threshold then
the remaining points are approximated (in two chunks utilizing the center
point).  The error threshold (in pixels) can be controlled with the
gdalwarp -te switch.

So if you want to compare a true pixel-by-pixel reprojection you should
use "-te 0" which disables this approximator entirely.

I assume the speed optimization techniques in the ERMapper tool are in some
fashion similar.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Feb 29 11:21:41 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 29 11:22:09 2008
Subject: [gdal-dev] Motion: Commiter Status for Moratto
In-Reply-To: <47C4DA7D.3050907@pmldnet.com>
References: <47C4DA7D.3050907@pmldnet.com>
Message-ID: <47C83115.50201@pobox.com>

Lucena, Ivan wrote:
> Moratto has been using GDAL in the development of Delphi application for 
> quite some time now, but as his work has evolved he felt the need to use 
> SWIG to generate a wrapper. The problem is that there no official Delphi 
> module in SWIG, so he developed it himself.
> 
> Moratto would need the Commiter Status to migrate the wrapper from my 
> sandbox to the trunk to continue his work in the development of the GDAL 
> Delphi wrapper.
> 
> Moratto has reviewed RFC 3 on commiter responsibilities, and has agreed 
> to them.

Folks,

I declare this motion passed with support from FrankW and TamasS.

Stefano, please contact me with your OSGeo userid and I'll enable you
as a committer.  Please update the gdal/COMMITERS file in svn with your
contact and userid details as your first test of commit ability.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From andrew.deklerk at gmail.com  Fri Feb 29 11:29:24 2008
From: andrew.deklerk at gmail.com (Andrew de klerk)
Date: Fri Feb 29 11:29:25 2008
Subject: [Gdal-dev] Translation Error
In-Reply-To: <47C82BF1.8000104@pobox.com>
References: <15760215.post@talk.nabble.com> <47C82BF1.8000104@pobox.com>
Message-ID: <15762177.post@talk.nabble.com>



In the spatial_ref_sys from postgis, it is referenced as:

PROJCS["Hartebeesthoek94 /
Lo31",GEOGCS["Hartebeesthoek94",DATUM["Hartebeesthoek94",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6148"]],
PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.01745329251994328,AUTHORITY["EPSG","9122"]],
AUTHORITY["EPSG","4148"]],PROJECTION["Transverse_Mercator_South_Orientated"],
PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",31],PARAMETER["scale_factor",1],
PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],
AUTHORITY["EPSG","2054"]]


and

+ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs 


however, I see in the epsg file for fwtools it has:

# Hartebeesthoek94 / Lo31
# Unable to translate coordinate system EPSG:2054 into PROJ.4 format.
#

I cannot reliably translate the postgis detail to epsg - any pointers?

-- 
View this message in context: http://www.nabble.com/Translation-Error-tp15760215p15762177.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From warmerdam at pobox.com  Fri Feb 29 11:30:35 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 29 11:31:14 2008
Subject: [gdal-dev] PROJ.4 EPSG:28992
In-Reply-To: <5c6dd3b0751f426d8a62fd26d1095835@145.50.39.11>
References: <5c6dd3b0751f426d8a62fd26d1095835@145.50.39.11>
Message-ID: <47C8332B.1070003@pobox.com>

Bart van den Eijnden (OSGIS) wrote:
> Hi list,
> 
> in PROJ version 4.6 the definition for the Dutch national grid (EPSG:28992)
> is missing the towgs84 parameters.
> 
> Is this intentional, or an oversight?
> 
> 4.5:
> <28992> +proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889
> +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
> +towgs84=565.237,50.0087,465.658,-0.406857,0.350733,-1.87035,4.0812 +units=m
> +no_defs  <>
> 
> 4.6:
> <28992> +proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889
> +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +units=m +no_defs  <>

Bart,

In gdal/data/gcs.override.csv I see:

#
# Bart van den Eijnden and Jan Hartmann suggest this datum shift value:
#
#4289,Amersfoort,6289,Amersfoort,6289,9122,7004,8901,1,0,9606,565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812

This was introduced as the way of handling overrides for GDAL 1.5.0 (from
which the PROJ definitions are derived).  I'm really not clear on why this
was left commented out.  Possibly I was uncertain if it was authoritative?

If you will file a GDAL ticket on the issue, along with some sort of
pointer to information on how the values were derived I will re-enable
it in GDAL 1.5.1 and the next batch regeneration of PROJ.4 definitions
should include it. In the meantime, you can of course update your local
definitions.

It would be ideal if you could reference an EPSG towgs84 definition that
matches this one.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From warmerdam at pobox.com  Fri Feb 29 11:46:37 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 29 11:47:10 2008
Subject: [gdal-dev] Extracting cell values from a big image and many
	smaller images
In-Reply-To: <20080229105016.h2wdvlankoc4wc4s@webmail5.isis.unc.edu>
References: <20080229105016.h2wdvlankoc4wc4s@webmail5.isis.unc.edu>
Message-ID: <47C836ED.6060401@pobox.com>

Limei Ran wrote:
> 
> Hi:
> 
> I am using GDAL cpp library to create a program. The program will 
> ultimately generate a statistic table with cell values from a very big 
> modeling grid domain image (almost whole US) and many smaller land use 
> images within the big image.
> 
> I need to go through all the small image pixels to match grid cell 
> values in the big image. There are many ways to read image data in line 
> and blocks from GDALRasterBand class.
> 
> Since I am new in using GDAL libraries, I appreciate any suggestion you 
> might have in accessing the images efficiently.

Limei,

I'm not exactly clear on what you want to do, but a couple hints:

  - Avoid doing many one pixel reads with RasterIO().  There is quite
    a bit of overhead in each call and so you should only do one pixel
    reads when that is all you really need.  I believe even with caching
    using one pixel reads to read a whole scanline would be easily an
    order of magnitude slower than doing one full scanline read.

  - If you will be accessing your huge image in local chunks, consider
    organizing it as a tiled image.  Perhaps an imagine (HFA) file or
    a BigTIFF with tiling.

  - If you need precision, and your small land use images are for
    reasonably small areas, I would suggest just loading all the data from
    the big image that matches the area for the small image in one gulp
    (one RasterIO() call).  Then do your matching analysis and then move
    on to the next.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From jworkman at mitre.org  Fri Feb 29 12:33:37 2008
From: jworkman at mitre.org (Michael Workman)
Date: Fri Feb 29 12:33:48 2008
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 45, Issue 56
In-Reply-To: <20080229170008.71AA0E01EC6@lists.osgeo.org>
References: <20080229170008.71AA0E01EC6@lists.osgeo.org>
Message-ID: <47C841F1.9000702@mitre.org>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080229/020e8cd9/attachment.html
From ivan.lucena at pmldnet.com  Fri Feb 29 14:02:23 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Fri Feb 29 14:02:26 2008
Subject: [gdal-dev] Extracting cell values from a big image and
	many	smaller images
In-Reply-To: <47C836ED.6060401@pobox.com>
References: <20080229105016.h2wdvlankoc4wc4s@webmail5.isis.unc.edu>
	<47C836ED.6060401@pobox.com>
Message-ID: <47C856BF.3080102@pmldnet.com>

Frank, Limei,

I am doing something very similar in Python. The goal is to test some 
alternative of data storage for large Time Series data.

The Python script should goes through all the bands of a BigTiff or 
through all the files of single-band formats and read a small windows of 
pixel's value, ex.:

% profiler.py -d \\NAS\DATA_FOLDER -a [[100,100],[101,101]]
file_1,10,19,10,20
file_2,10,19,10,20
file_3,40,19,16,20
file_4,10,89,10,20
file_5,10,19,10,10
...

or for multi-band:

% profiler.py -a [[100,100],[101,101]] file_multb.tif
band_1,10,19,10,20
band_2,10,19,10,20
band_3,40,19,16,20
band_4,10,89,10,20
band_5,10,19,10,10
...

Not that I don't trust your advise to use BigTiff or IMG. :) I just want 
to prove it, so I intend to time it up to compare the performance.

Therefor, any advise on the Python + GDAL + numpy reading technique 
would be well appreciated.

Do you think that reducing the cache would be a good idea in that case?

Best regards,

Ivan


Frank Warmerdam wrote:
> Limei Ran wrote:
>>
>> Hi:
>>
>> I am using GDAL cpp library to create a program. The program will 
>> ultimately generate a statistic table with cell values from a very big 
>> modeling grid domain image (almost whole US) and many smaller land use 
>> images within the big image.
>>
>> I need to go through all the small image pixels to match grid cell 
>> values in the big image. There are many ways to read image data in 
>> line and blocks from GDALRasterBand class.
>>
>> Since I am new in using GDAL libraries, I appreciate any suggestion 
>> you might have in accessing the images efficiently.
> 
> Limei,
> 
> I'm not exactly clear on what you want to do, but a couple hints:
> 
>  - Avoid doing many one pixel reads with RasterIO().  There is quite
>    a bit of overhead in each call and so you should only do one pixel
>    reads when that is all you really need.  I believe even with caching
>    using one pixel reads to read a whole scanline would be easily an
>    order of magnitude slower than doing one full scanline read.
> 
>  - If you will be accessing your huge image in local chunks, consider
>    organizing it as a tiled image.  Perhaps an imagine (HFA) file or
>    a BigTIFF with tiling.
> 
>  - If you need precision, and your small land use images are for
>    reasonably small areas, I would suggest just loading all the data from
>    the big image that matches the area for the small image in one gulp
>    (one RasterIO() call).  Then do your matching analysis and then move
>    on to the next.
> 
> Best regards,
From nikos.alexandris at felis.uni-freiburg.de  Fri Feb 29 14:25:37 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Fri Feb 29 14:25:30 2008
Subject: [gdal-dev] Building gdal/ogr with expat support fails when
	trying to configure ogdi as well (?)
In-Reply-To: <47C44212.2070403@pobox.com>
References: <1204042564.17459.27.camel@vertical> <47C44212.2070403@pobox.com>
Message-ID: <1204313137.7082.8.camel@vertical>

On Tue, 2008-02-26 at 11:45 -0500, Frank Warmerdam wrote:
> Nikos Alexandris wrote:
[...]
> 
> Nikos,
> 
> You might want to look in the config.log to see why the expat isn't working.
> I suspect things are getting mixed up with the version of expat embedded
> in OGDI.  If you are building the OGDI from source, I would encourage you
> to also force it to build against the system copy of expat instead of it's
> internal version.
> 
> Good luck,

Thank you Frank!

I 've been hunting OGDI compilation from source but no luck with the
configuration. I suspect due to my 64-bit system.

Anybody with an Ubuntu 64bit machine compiling OGDI?

Details:

 ./configure --with-proj=yes --with-projlib=/usr/lib
--with-projinc=/usr/include --with-zlib=yes --with-zliblib=/usr/lib
--with-zlibinc=/usr/include --with-expat=yes --with-expatlib=/usr/lib
--with-expatinc=/usr/include
loading cache ./config.cache
checking for gcc... (cached) gcc
checking whether the C compiler (gcc  ) works... yes
checking whether the C compiler (gcc  ) is a cross-compiler... no
checking whether we are using GNU C... (cached) yes
checking whether gcc accepts -g... (cached) yes
checking for dlopen in -ldl... (cached) yes
checking for  -shared ... no(1)
checking for ld -shared ... yes
checking how to run the C preprocessor... (cached) gcc -E
checking for rpc/pmap_clnt.h... (cached) yes
checking for float.h... (cached) yes
checking for dlfcn.h... (cached) yes
checking whether byte ordering is bigendian... (cached) no
checking for pj_init in -lproj... (cached) yes
checking for projects.h... (cached) yes
Using PROJ_LIB=/usr/lib for PROJ.4 library.
Using PROJ_INCLUDE=-I/usr/include for PROJ.4 includes.
checking for deflateInit_ in -lz... (cached) yes
checking for zlib.h... (cached) yes
Using ZLIB_LIB=/usr/lib for ZLIB library.
Using ZLIB_INCLUDE=-I/usr/include for ZLIB includes.
checking for XML_ParserCreate in -lexpat... (cached) yes
checking for expat.h... (cached) yes
Using EXPAT_LIB=/usr/lib for Expat library.
Using EXPAT_INCLUDE=-I/usr/include for Expat includes.
creating ./config.status
creating config/generic.mak


and


make
making install dirs using /usr/local/src/ogdi-3.1.5/config/mkinstalldirs
/usr/local/src/ogdi-3.1.5/config/mkinstalldirs /usr/local/src/ogdi-3.1.5/lib/Linux/static
/usr/local/src/ogdi-3.1.5/config/mkinstalldirs /usr/local/src/ogdi-3.1.5/bin/Linux
cd external; make
make[1]: Entering directory `/usr/local/src/ogdi-3.1.5/external'
make[1]: Nothing to be done for `all'.
make[1]: Leaving directory `/usr/local/src/ogdi-3.1.5/external'
cd vpflib; make
make[1]: Entering directory `/usr/local/src/ogdi-3.1.5/vpflib'
/usr/local/src/ogdi-3.1.5/config/mkinstalldirs OBJ.Linux
make --directory OBJ.Linux -f ../makefile
PASS='depend' /usr/local/src/ogdi-3.1.5/lib/Linux/static/libvpf.a
make[2]: Entering directory `/usr/local/src/ogdi-3.1.5/vpflib/OBJ.Linux'
make[2]: `/usr/local/src/ogdi-3.1.5/lib/Linux/static/libvpf.a' is up to
date.
make[2]: Leaving directory `/usr/local/src/ogdi-3.1.5/vpflib/OBJ.Linux'
make[1]: Leaving directory `/usr/local/src/ogdi-3.1.5/vpflib'
cd ogdi; make
make[1]: Entering directory `/usr/local/src/ogdi-3.1.5/ogdi'
cd include; make
make[2]: Entering directory `/usr/local/src/ogdi-3.1.5/ogdi/include'
make[2]: Nothing to be done for `all'.
make[2]: Leaving directory `/usr/local/src/ogdi-3.1.5/ogdi/include'
cd c-api; make
make[2]: Entering directory `/usr/local/src/ogdi-3.1.5/ogdi/c-api'
/usr/local/src/ogdi-3.1.5/config/mkinstalldirs OBJ.Linux
make --directory OBJ.Linux -f ../makefile
PASS='depend' /usr/local/src/ogdi-3.1.5/bin/Linux/libogdi31.so
make[3]: Entering directory
`/usr/local/src/ogdi-3.1.5/ogdi/c-api/OBJ.Linux'
Making shared library: /usr/local/src/ogdi-3.1.5/bin/Linux/libogdi31.so
gcc -shared  -O  -o /usr/local/src/ogdi-3.1.5/bin/Linux/libogdi31.so
ecs_dyna.o ecsregex.o ecssplit.o ecsassoc.o ecshash.o ecstile.o server.o
ecsdist.o ecslist.o ecsinfo.o ecsgeo.o ecs_xdr.o ecs_xdrz.o gmath.o
client.o ecs_capabilities.o -ldl  /usr/lib /usr/lib  /usr/lib  -lm 


/usr/bin/ld: ecs_dyna.o: relocation R_X86_64_32 against `a local symbol'
can not be used 
when making a shared object; recompile with -fPIC

# I think this is the one but I am not sure how to go about it


ecs_dyna.o: could not read symbols: Bad value
collect2: ld returned 1 exit status
make[3]: *** [/usr/local/src/ogdi-3.1.5/bin/Linux/libogdi31.so] Error 1
make[3]: Leaving directory
`/usr/local/src/ogdi-3.1.5/ogdi/c-api/OBJ.Linux'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/usr/local/src/ogdi-3.1.5/ogdi/c-api'
make[1]: *** [c-api] Error 2
make[1]: Leaving directory `/usr/local/src/ogdi-3.1.5/ogdi'
make: *** [ogdi] Error 2

From nikos.alexandris at felis.uni-freiburg.de  Fri Feb 29 14:33:59 2008
From: nikos.alexandris at felis.uni-freiburg.de (Nikos Alexandris)
Date: Fri Feb 29 14:33:47 2008
Subject: [gdal-dev] Building gdal/ogr with expat support fails when
	trying to configure ogdi as well (?) -- Building OGDI!
In-Reply-To: <1204313137.7082.8.camel@vertical>
References: <1204042564.17459.27.camel@vertical>
	<47C44212.2070403@pobox.com>  <1204313137.7082.8.camel@vertical>
Message-ID: <1204313639.7082.11.camel@vertical>


On Fri, 2008-02-29 at 20:25 +0100, Nikos Alexandris wrote:
[...]
> 
> Anybody with an Ubuntu 64bit machine compiling OGDI?
> 
> Details:
> 
>  ./configure --with-proj=yes --with-projlib=/usr/lib
> --with-projinc=/usr/include --with-zlib=yes --with-zliblib=/usr/lib
> --with-zlibinc=/usr/include --with-expat=yes --with-expatlib=/usr/lib
> --with-expatinc=/usr/include

# I modified the configuration command and now with:

CFLAGS="-fPIC" ./configure --with-proj=yes --with-projlib=/usr/lib
--with-projinc=/usr/include --with-zlib=yes --with-zliblib=/usr/lib
--with-zlibinc=/usr/include --with-expat=yes --with-expatlib=/usr/lib
--with-expatinc=/usr/include

# I get:

[...]

Making shared library: /usr/local/src/ogdi-3.1.5/bin/Linux/libogdi31.so
gcc -shared  -O  -o /usr/local/src/ogdi-3.1.5/bin/Linux/libogdi31.so
ecs_dyna.o ecsregex.o ecssplit.o ecsassoc.o ecshash.o ecstile.o server.o
ecsdist.o ecslist.o ecsinfo.o ecsgeo.o ecs_xdr.o ecs_xdrz.o gmath.o
client.o ecs_capabilities.o -ldl  /usr/lib /usr/lib  /usr/lib  -lm 
/usr/bin/ld: /usr/lib: No such file: File format not recognized
collect2: ld returned 1 exit status
make[3]: *** [/usr/local/src/ogdi-3.1.5/bin/Linux/libogdi31.so] Error 1
make[3]: Leaving directory
`/usr/local/src/ogdi-3.1.5/ogdi/c-api/OBJ.Linux'
make[2]: *** [all] Error 2
make[2]: Leaving directory `/usr/local/src/ogdi-3.1.5/ogdi/c-api'
make[1]: *** [c-api] Error 2
make[1]: Leaving directory `/usr/local/src/ogdi-3.1.5/ogdi'
make: *** [ogdi] Error 2

# What is ld?

From ivan.lucena at pmldnet.com  Fri Feb 29 14:46:42 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Fri Feb 29 14:46:46 2008
Subject: [gdal-dev] Python ReadAsArray problem
Message-ID: <47C86122.10609@pmldnet.com>

Hi there,

I am running into a problem with ReasAsArray().

When I try to run it I got:

"ImportError: No module named _gdal_array"

Here is my stuff:

Python 2.4.1
Python 2.4 GDAL-1.5.0b1 (*)
Python 2.4 numpy-1.0.4

I build the GDAL Python extension from the latest trunk update:

 > python setup.py build
 > dist\GDAL-1.5.0b1.win32-py2.4.exe

Best regards,

Ivan



From ivan.lucena at pmldnet.com  Fri Feb 29 14:52:16 2008
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Fri Feb 29 14:52:19 2008
Subject: [gdal-dev] Python ReadAsArray problem
In-Reply-To: <47C86122.10609@pmldnet.com>
References: <47C86122.10609@pmldnet.com>
Message-ID: <47C86270.4090002@pmldnet.com>

My mistake.

I should have used:

 > python setup.py bbuild_windist
 > dist\GDAL-1.5.0.win32-py2.4.exe

Now it works perfectly.

Ivan


Lucena, Ivan wrote:
> Hi there,
> 
> I am running into a problem with ReasAsArray().
> 
> When I try to run it I got:
> 
> "ImportError: No module named _gdal_array"
> 
> Here is my stuff:
> 
> Python 2.4.1
> Python 2.4 GDAL-1.5.0b1 (*)
> Python 2.4 numpy-1.0.4
> 
> I build the GDAL Python extension from the latest trunk update:
> 
>  > python setup.py build
>  > dist\GDAL-1.5.0b1.win32-py2.4.exe
> 
> Best regards,
> 
> Ivan
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
From monshi at home.se  Fri Feb 29 16:12:19 2008
From: monshi at home.se (Tomas R)
Date: Fri Feb 29 16:12:46 2008
Subject: [gdal-dev] Re: C#: Gdal on Win64
In-Reply-To: <f3b73b7d0802290412h1f8b12adk8612d6d2170ed178@mail.gmail.com>
References: <fq8foq$m8o$1@ger.gmane.org>	<f3b73b7d0802290251k75ffa550y2badacac33d3ae54@mail.gmail.com>	<fq8qrr$sh5$1@ger.gmane.org>
	<f3b73b7d0802290412h1f8b12adk8612d6d2170ed178@mail.gmail.com>
Message-ID: <fq9sfp$te0$1@ger.gmane.org>


Sad to say, same error occured with these dlls. I renamed them to 
gdal_fw.dll and proj_fw.dll and also kept a copy of proj.dll with 
original name and told the user to overwrite the existing ones.

Same error.

I will not say it is a Vista problem, or a 64-bit problem, until I have 
a confirmation from someone else.
If anyone here, with a 64-bit system (Vista, XP or Server 2003),  is 
willing to give it a try:
1: Install SportTracks
http://www.zonefivesoftware.com/SportTracks/
2: Install my GDAL-plugin
http://mapplugin.googlepages.com/gdal

Start SportTracks, go to the settings view. Locate the plugin and check 
if it is installed correctly. Version info should be displayed.

Yours
Tomas

Tamas Szekeres skrev:
> Grrr.  I've posted a reference to the x32 builder, here are the correct ones:
>
> http://vbkto.dyndns.org:1080/gdal/szekerest-vc80x64-full/gdal/
> http://vbkto.dyndns.org:1080/gdal/szekerest-vc80x64-bin
>
> Best regards,
>
> Tamas
>
>
> 2008/2/29, Tomas R <monshi@home.se>:
>   
>> Neither have I access to a computer with Vista 64, or any other 64 bit
>>  system, it is a user who has reported the error. I'm waiting to see if
>>  there will be another user with a 64 bit system who will test the plugin
>>  so as you say, it is not yet confirmed it is a 64 bit error.
>>
>>
>>  The plugin is compiled to .Net2.0 and, of course on Vista, run on .Net3.5.
>>
>>  Since I personally can't test it is a bit harder/slower to verify if it
>>  works.  A quick test on my computer (Win XP, 32 bit), after renaming the
>>  gdal16dev.dll to gdal_fw.dll, together with FWTools C# wrappers and
>>  supporting libraries I am able to query the gdal version but not, with
>>  existing code, set up a spatial reference. (Pinvoke error, Can't read
>>  the DLL-file osr_wrap)
>>
>>  Strange - is it a 64 bit "version" of gdal? should it then at all work
>>  on my 32 bit system? That it fails on setting up a spatial reference I
>>  guess is because it it is not able to reference to the FWtools version
>>  of the supporting dlls. Or?
>>
>>  I will see if the user is willing to try this dll I downloaded from your
>>  link and see if he is able to retrieve version information. If that
>>  works we can move on to the rest of the libraries if you are willing.
>>
>>
>>  Yours
>>  Tomas
>>
>>  Tamas Szekeres skrev:
>>
>>     
>>> Tomas,
>>>       
>>  >
>>  > Currently I have no opportunity to test on Vista 64 at the moment and
>>  > therefore I cannot decide whether this is a Vista specific issue or
>>  > not. I'm not sure which .NET framework you are running against. You
>>  > might want to do a test with my Windows Server 2003 x64 compilation
>>  > can be downloaded from the buildbot:
>>  >
>>  > http://vbkto.dyndns.org:1080/gdal/szekerest-vc80-full/gdal/
>>  >
>>  > I could also make the x64 versions of related dlls like proj.dll
>>  > available to download.
>>  >
>>  > Best regards,
>>  >
>>  > Tamas
>>  >
>>  >
>>  >
>>
>>     
>>> 2008/2/29, Tomas R :
>>>       
>>  >> Is it possible to use gdal (C# wrapped)  from FWTools on a Win64 system
>>  >>  (Vista 64)?
>>  >>
>>  >>  I have a plugin for SportTracks which gives other libraries access to
>>  >>  GDAL. This is achieved by adding the path to the GDAL binaries to system
>>  >>  PATH (for the running program).
>>  >>
>>  >>  On a Win64, i.e. Vista 64, the exception below is thrown when trying to
>>  >>  read the version of the GDAL libraries. Is this normal behaviour or is
>>  >>  there anything I can do to avoid this exception? I use GDAL 1.6.0dev
>>  >>  from FWTools 2.1.0. All supportive libraries from FWTools are available
>>  >>  to Gdal.
>>  >>
>>  >>  System.TypeInitializationException: The type initializer for
>>  >>  'OSGeo.GDAL.GdalPINVOKE' threw an exception. --->
>>  >>  System.TypeInitializationException: The type initializer for
>>  >>  'SWIGExceptionHelper' threw an exception. --->
>>  >>  System.BadImageFormatException: An attempt was made to load a program
>>  >>  with an incorrect format. (Exception from HRESULT: 0x8007000B)
>>  >>    at
>>  >>  OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate
>>  >>  applicationDelegate, ExceptionDelegate arithmeticDelegate,
>>  >>  ExceptionDelegate divideByZeroDelegate, ExceptionDelegate
>>  >>  indexOutOfRangeDelegate, ExceptionDelegate invalidOperationDelegate,
>>  >>  ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate,
>>  >>  ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate
>>  >>  overflowDelegate, ExceptionDelegate systemExceptionDelegate)
>>  >>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
>>  >>    --- End of inner exception stack trace ---
>>  >>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
>>  >>    at OSGeo.GDAL.GdalPINVOKE..cctor()
>>  >>    --- End of inner exception stack trace ---
>>  >>    at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
>>  >>    at OSGeo.GDAL.Gdal.SetConfigOption(String arg0, String arg1)
>>  >>    at GDALPlugin.Gdal_Interface..ctor()
>>  >>
>>  >>
>>  >>  Yours
>>  >>  Tomas
>>  >>
>>  >>  _______________________________________________
>>  >>  gdal-dev mailing list
>>  >>  gdal-dev@lists.osgeo.org
>>  >>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  >>
>>  >>
>>
>>
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>     

From condit at sdsc.edu  Fri Feb 29 16:14:07 2008
From: condit at sdsc.edu (Christopher Condit)
Date: Fri Feb 29 16:14:13 2008
Subject: [gdal-dev] Source dataset during ogr2ogr
In-Reply-To: <47C86270.4090002@pmldnet.com>
References: <47C86122.10609@pmldnet.com> <47C86270.4090002@pmldnet.com>
Message-ID: <845AADAC1106E44996327D62097E4C6BFB0D47@et.ad.sdsc.edu>

I'm working on the KML 2.2 update for the KML OGR driver, and I'm
curious if there's some way to get access to the source dataset object
from the created dataset during an ogr2ogr call. In this case I'm
interested in looking at all the feature definitions from the source
dataset s.t. I can create the schema correctly in the KML output...

Thanks!
-Chris
From matt.wilkie at gov.yk.ca  Fri Feb 29 16:29:58 2008
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Fri Feb 29 16:30:05 2008
Subject: [gdal-dev] Gdalwarp speed comparison
In-Reply-To: <47C82F4F.9080700@pobox.com>
References: <loom.20080229T143335-714@post.gmane.org>
	<47C82F4F.9080700@pobox.com>
Message-ID: <47C87956.1090302@gov.yk.ca>

Thank you for the explanation Frank. I'd wondered about that switch. 
Recorded for posterity at 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#Howdoes-etErrorThresholdwork
as always please check for accuracy or faithfulness.

> The error threshold (in pixels) can be controlled with the gdalwarp
> -te switch.

typo: that should be '-et', as written is Target Extent.


cheers,

matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------



From warmerdam at pobox.com  Fri Feb 29 16:48:07 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 29 16:48:41 2008
Subject: [gdal-dev] Source dataset during ogr2ogr
In-Reply-To: <845AADAC1106E44996327D62097E4C6BFB0D47@et.ad.sdsc.edu>
References: <47C86122.10609@pmldnet.com> <47C86270.4090002@pmldnet.com>
	<845AADAC1106E44996327D62097E4C6BFB0D47@et.ad.sdsc.edu>
Message-ID: <47C87D97.4000802@pobox.com>

Christopher Condit wrote:
> I'm working on the KML 2.2 update for the KML OGR driver, and I'm
> curious if there's some way to get access to the source dataset object
> from the created dataset during an ogr2ogr call. In this case I'm
> interested in looking at all the feature definitions from the source
> dataset s.t. I can create the schema correctly in the KML output...

Chris,

No, there is no way to do this.

In the GDAL there is CreateCopy() which lets a destination dataset
configure itself based on a source dataset but there is no OGR analog.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

From Bob.Moskovitz at conservation.ca.gov  Fri Feb 29 17:00:34 2008
From: Bob.Moskovitz at conservation.ca.gov (Moskovitz, Bob)
Date: Fri Feb 29 17:00:37 2008
Subject: [gdal-dev] epsg_tr.py in reverse?
Message-ID: <A73B6E7A4503E948826CE81A65AF5FECA2A3F8@docexs1.ad.consrv.ca.gov>

Hello All,
 
I would like to find a utility that would allow you to find the EPSG code given a proj4 string.  Sort of a epsg_tr.py in reverse.  Can a utility be written with the gdal api to do that?  
 
Bob

Bob Moskovitz 
Seismic Hazard Zonation Project
California Geological Survey 
http://www.conservation.ca.gov/cgs/shzp<?xml:namespace prefix = o ns = "urn:schemas-microsoft-com:office:office" />

CONFIDENTIALITY NOTICE: This communication is intended only for the use of the individual or entity to which it is addressed. This message contains information from the State of California, California Geological Survey, which may be privileged, confidential and exempt from disclosure under applicable law, including the Electronic Communications Privacy Act. If the reader of this communication is not the intended recipient, you are hereby notified that any dissemination, distribution, or copying of this communication is strictly prohibited.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20080229/abed393d/attachment.html
From szekerest at gmail.com  Fri Feb 29 18:22:31 2008
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Feb 29 18:22:36 2008
Subject: [gdal-dev] Re: C#: Gdal on Win64
In-Reply-To: <fq9sfp$te0$1@ger.gmane.org>
References: <fq8foq$m8o$1@ger.gmane.org>
	<f3b73b7d0802290251k75ffa550y2badacac33d3ae54@mail.gmail.com>
	<fq8qrr$sh5$1@ger.gmane.org>
	<f3b73b7d0802290412h1f8b12adk8612d6d2170ed178@mail.gmail.com>
	<fq9sfp$te0$1@ger.gmane.org>
Message-ID: <f3b73b7d0802291522x272ad8e4ud991d3a8fd6626db@mail.gmail.com>

Tomas,

I did some tests with your files on my Win2003 x64 Server. I can see
your assembly is actually running against the x64 version of the .NET
framework 2.0, but the binaries in FWTools have been compiled for the
.NET FW 1.0.

Although these assemblies can work side by side in case if both of the
framework versions are installed. Despite I have both of these
installed I got the badimageformat exception as well. The most
possible reason of this is that the 64 bit version of the framework
expects to load only the x64 versions of the unmanaged dll-s (like
gdal_wrap.dll, proj.dll).

I couldn't actually check the statements above because I have no
chance to recompile your plugin against my gdal binaries.

However for supporting x64 you have at least the following 2 options:

1. Compile gdal and all of the dependencies for x64 and use these
binaries instead of the FWTools version. You'll have to distribute 2
versions of your package (x64 and x32) in this case.

2. Force your dll to run against the 32 bit version of the .NET
Framework 2.0 by using the /platform:x86  csc command line option. If
you are using the VS2005 IDE you can find this option project
settings/Build tab/Platform target. In this case I think the FWTools
binaries will become usable, but I recommend to compile gdal for the
2.0 version of the .NET framework anyway.


Best regards,

Tamas



2008/2/29, Tomas R <monshi@home.se>:
>
>  Sad to say, same error occured with these dlls. I renamed them to
>  gdal_fw.dll and proj_fw.dll and also kept a copy of proj.dll with
>  original name and told the user to overwrite the existing ones.
>
>  Same error.
>
>  I will not say it is a Vista problem, or a 64-bit problem, until I have
>  a confirmation from someone else.
>  If anyone here, with a 64-bit system (Vista, XP or Server 2003),  is
>  willing to give it a try:
>  1: Install SportTracks
>  http://www.zonefivesoftware.com/SportTracks/
>  2: Install my GDAL-plugin
>  http://mapplugin.googlepages.com/gdal
>
>  Start SportTracks, go to the settings view. Locate the plugin and check
>  if it is installed correctly. Version info should be displayed.
>
>
>  Yours
>  Tomas
>
>  Tamas Szekeres skrev:
>  > Grrr.  I've posted a reference to the x32 builder, here are the correct ones:
>  >
>  > http://vbkto.dyndns.org:1080/gdal/szekerest-vc80x64-full/gdal/
>  > http://vbkto.dyndns.org:1080/gdal/szekerest-vc80x64-bin
>  >
>  > Best regards,
>  >
>  > Tamas
>  >
>  >
>  > 2008/2/29, Tomas R <monshi@home.se>:
>  >
>  >> Neither have I access to a computer with Vista 64, or any other 64 bit
>  >>  system, it is a user who has reported the error. I'm waiting to see if
>  >>  there will be another user with a 64 bit system who will test the plugin
>  >>  so as you say, it is not yet confirmed it is a 64 bit error.
>  >>
>  >>
>  >>  The plugin is compiled to .Net2.0 and, of course on Vista, run on .Net3.5.
>  >>
>  >>  Since I personally can't test it is a bit harder/slower to verify if it
>  >>  works.  A quick test on my computer (Win XP, 32 bit), after renaming the
>  >>  gdal16dev.dll to gdal_fw.dll, together with FWTools C# wrappers and
>  >>  supporting libraries I am able to query the gdal version but not, with
>  >>  existing code, set up a spatial reference. (Pinvoke error, Can't read
>  >>  the DLL-file osr_wrap)
>  >>
>  >>  Strange - is it a 64 bit "version" of gdal? should it then at all work
>  >>  on my 32 bit system? That it fails on setting up a spatial reference I
>  >>  guess is because it it is not able to reference to the FWtools version
>  >>  of the supporting dlls. Or?
>  >>
>  >>  I will see if the user is willing to try this dll I downloaded from your
>  >>  link and see if he is able to retrieve version information. If that
>  >>  works we can move on to the rest of the libraries if you are willing.
>  >>
>  >>
>  >>  Yours
>  >>  Tomas
>  >>
>  >>  Tamas Szekeres skrev:
>  >>
>  >>
>  >>> Tomas,
>  >>>
>  >>  >
>  >>  > Currently I have no opportunity to test on Vista 64 at the moment and
>  >>  > therefore I cannot decide whether this is a Vista specific issue or
>  >>  > not. I'm not sure which .NET framework you are running against. You
>  >>  > might want to do a test with my Windows Server 2003 x64 compilation
>  >>  > can be downloaded from the buildbot:
>  >>  >
>  >>  > http://vbkto.dyndns.org:1080/gdal/szekerest-vc80-full/gdal/
>  >>  >
>  >>  > I could also make the x64 versions of related dlls like proj.dll
>  >>  > available to download.
>  >>  >
>  >>  > Best regards,
>  >>  >
>  >>  > Tamas
>  >>  >
>  >>  >
>  >>  >
>  >>
>  >>
>  >>> 2008/2/29, Tomas R :
>  >>>
>  >>  >> Is it possible to use gdal (C# wrapped)  from FWTools on a Win64 system
>  >>  >>  (Vista 64)?
>  >>  >>
>  >>  >>  I have a plugin for SportTracks which gives other libraries access to
>  >>  >>  GDAL. This is achieved by adding the path to the GDAL binaries to system
>  >>  >>  PATH (for the running program).
>  >>  >>
>  >>  >>  On a Win64, i.e. Vista 64, the exception below is thrown when trying to
>  >>  >>  read the version of the GDAL libraries. Is this normal behaviour or is
>  >>  >>  there anything I can do to avoid this exception? I use GDAL 1.6.0dev
>  >>  >>  from FWTools 2.1.0. All supportive libraries from FWTools are available
>  >>  >>  to Gdal.
>  >>  >>
>  >>  >>  System.TypeInitializationException: The type initializer for
>  >>  >>  'OSGeo.GDAL.GdalPINVOKE' threw an exception. --->
>  >>  >>  System.TypeInitializationException: The type initializer for
>  >>  >>  'SWIGExceptionHelper' threw an exception. --->
>  >>  >>  System.BadImageFormatException: An attempt was made to load a program
>  >>  >>  with an incorrect format. (Exception from HRESULT: 0x8007000B)
>  >>  >>    at
>  >>  >>  OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper.SWIGRegisterExceptionCallbacks_Gdal(ExceptionDelegate
>  >>  >>  applicationDelegate, ExceptionDelegate arithmeticDelegate,
>  >>  >>  ExceptionDelegate divideByZeroDelegate, ExceptionDelegate
>  >>  >>  indexOutOfRangeDelegate, ExceptionDelegate invalidOperationDelegate,
>  >>  >>  ExceptionDelegate ioDelegate, ExceptionDelegate nullReferenceDelegate,
>  >>  >>  ExceptionDelegate outOfMemoryDelegate, ExceptionDelegate
>  >>  >>  overflowDelegate, ExceptionDelegate systemExceptionDelegate)
>  >>  >>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..cctor()
>  >>  >>    --- End of inner exception stack trace ---
>  >>  >>    at OSGeo.GDAL.GdalPINVOKE.SWIGExceptionHelper..ctor()
>  >>  >>    at OSGeo.GDAL.GdalPINVOKE..cctor()
>  >>  >>    --- End of inner exception stack trace ---
>  >>  >>    at OSGeo.GDAL.GdalPINVOKE.SetConfigOption(String jarg1, String jarg2)
>  >>  >>    at OSGeo.GDAL.Gdal.SetConfigOption(String arg0, String arg1)
>  >>  >>    at GDALPlugin.Gdal_Interface..ctor()
>  >>  >>
>  >>  >>
>  >>  >>  Yours
>  >>  >>  Tomas
>  >>  >>
>  >>  >>  _______________________________________________
>  >>  >>  gdal-dev mailing list
>  >>  >>  gdal-dev@lists.osgeo.org
>  >>  >>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>  >>
>  >>  >>
>  >>
>  >>
>  >>  _______________________________________________
>  >>  gdal-dev mailing list
>  >>  gdal-dev@lists.osgeo.org
>  >>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>
>  >>
>
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Fri Feb 29 23:11:27 2008
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Feb 29 23:11:54 2008
Subject: [gdal-dev] epsg_tr.py in reverse?
In-Reply-To: <A73B6E7A4503E948826CE81A65AF5FECA2A3F8@docexs1.ad.consrv.ca.gov>
References: <A73B6E7A4503E948826CE81A65AF5FECA2A3F8@docexs1.ad.consrv.ca.gov>
Message-ID: <47C8D76F.8010402@pobox.com>

Moskovitz, Bob wrote:
> Hello All,
> 
> I would like to find a utility that would allow you to find the EPSG code
> given a proj4 string.  Sort of a epsg_tr.py in reverse.  Can a utility be
> written with the gdal api to do that?

Bob,

You could walk the whole list of EPSG coordinate systems, import each
to an OGRSpatialReference object, and then use the OGRSpatialReference
IsSame() method to compare it to an OGRSpatialReference imported from
a PROJ.4 definition.  This would, in theory, let you find a match.  But
in practice this is computationally expensive and the IsSame() method is
flakey in a number of regards (too sensitive to some differences such as
order, and not aware of other differences like prime meridian).

Another approach would be to convert them all to PROJ.4 format and do exact
string comparisons.  You would need to convert the original (target) PROJ.4
definition to WKT and convert it back to PROJ.4 too, so it would be
"normalized" to the style of PROJ.4 produced by OGR.

This would likely work fairly well, but would still be sensitive to
different numeric precision for parameters.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

