From alex.jong0019 at gmail.com  Tue Jul  1 03:13:57 2014
From: alex.jong0019 at gmail.com (00darki)
Date: Tue, 1 Jul 2014 03:13:57 -0700 (PDT)
Subject: [gdal-dev] gdal_translate 1.11 netcdf output is a flipped Y image
Message-ID: <1404209637612-5148957.post@n6.nabble.com>

Hi,

I'm trying to convert netcdf files to geotiff image, i'm using
gdal_translate.exe, and the result of the command is a Y flipped image
(north is south and south is north ..).

I've learned many topics on this issue but I havn't found any solution ..

*gdal_translate.exe D:/......../mnt00000.nc D:/........../mnt00_geotif.tif*

I've tried to use -a_ullr and -a_srs option but this doesn't make any
difference.

*gdal_translate.exe -a_ullr "-90" "90" "-180" "180" -a_srs "EPSG:4326"
D:/........../mnt00000.nc D:/........./mnt00_geotif.tif*

Someone could help me ?
Thanks



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-gdal-translate-1-11-netcdf-output-is-a-flipped-Y-image-tp5148957.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jrepetto at free.fr  Tue Jul  1 05:28:48 2014
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 01 Jul 2014 14:28:48 +0200
Subject: [gdal-dev] gdal_translate 1.11 netcdf output is a flipped Y
	image
In-Reply-To: <1404209637612-5148957.post@n6.nabble.com>
References: <1404209637612-5148957.post@n6.nabble.com>
Message-ID: <53B2A980.4010203@free.fr>

Le 01/07/2014 12:13, 00darki a ?crit :
>
> I've tried to use -a_ullr and -a_srs option but this doesn't make any
> difference.
>
> *gdal_translate.exe -a_ullr "-90" "90" "-180" "180" -a_srs "EPSG:4326"

Hi,
Your ullr parameters are not in the right order. Try :
gdal_translate -a_ullr -180 90 180 -90

Jean-Claude



From alex.jong0019 at gmail.com  Tue Jul  1 05:51:15 2014
From: alex.jong0019 at gmail.com (00darki)
Date: Tue, 1 Jul 2014 05:51:15 -0700 (PDT)
Subject: [gdal-dev] gdal_translate 1.11 netcdf output is a flipped Y
	image
In-Reply-To: <53B2A980.4010203@free.fr>
References: <1404209637612-5148957.post@n6.nabble.com>
	<53B2A980.4010203@free.fr>
Message-ID: <1404219075868-5148989.post@n6.nabble.com>

*gdal_translate.exe -a_ullr "-180" "90" "180" "-90" -a_srs "EPSG:3408"
D:/GDAL/MapServer/mnt00000.nc D:/GDAL/MapServer/mnt00_geotif00.tif

Warning 1: No UNIDATA NC_GLOBAL:Conventions attribute
Input file size is 4321, 2161
0...10...20...30...40...50...60...70...80...90...100 - done.*

Same result, North is South and south is North.
Whatever I put in -a_ullr parameters, it never changes the output.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-gdal-translate-1-11-netcdf-output-is-a-flipped-Y-image-tp5148957p5148989.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jlmcgraw at gmail.com  Tue Jul  1 06:50:18 2014
From: jlmcgraw at gmail.com (Jesse McGraw)
Date: Tue, 1 Jul 2014 09:50:18 -0400
Subject: [gdal-dev] gdaltranslate and gdalwarp rotating and resizing
 image without being asked to, why?
In-Reply-To: <201406302107.59182.even.rouault@mines-paris.org>
References: <CA+XueT2r7kQp1d_5B-wMTec9dY_CXxc8tSZRzKGKYU9XPsxTTA@mail.gmail.com>
	<201406281801.27910.even.rouault@mines-paris.org>
	<CA+XueT0gPC9SktS5a3M-ZG8myNh5dS88UgR0wXdWvmRx7d7NGQ@mail.gmail.com>
	<201406302107.59182.even.rouault@mines-paris.org>
Message-ID: <CA+XueT1is9r_as8OCOV=aGGaGeQ_4uZTdg-KsbUh=2Garbqy9w@mail.gmail.com>

On Mon, Jun 30, 2014 at 3:07 PM, Even Rouault <even.rouault at mines-paris.org>
wrote:

>
>
> That might the problem. If you create the GCPs on the PDF and not on the
> PNG,
> and that the PDF has rotation, pdftoppm I think will apply the rotation,
> hence
> the axis swapping.
>

Remember, I'm using the PNG I've created for all gdal operations, gdal
never interacts with the source PDF

I'm probably fundamentally misunderstanding some aspect of the command
lines I'm using in gdal*.  My end goal is to get the necessary affine
transformation information to display the PNG I create in step 3a properly
in a separate Android moving-map application (eg. your current position
displayed on the diagram as you move around the airport)

Well I'm really confused by what you are trying to do.
>
> For a better understanding, you should perhaps provide the PDF and all
> exact
> command lines you are typing.
>

Here's a step-by-step with links to relevant files for a landscape diagram
(SFO)

1. Get source PDFs from the Federal Aviation Administrator (FAA)

https://drive.google.com/file/d/0B4EbUsrclSoDeXdmM3gyV29WN0U/edit?usp=sharing

2. Run my utility.

3a. It converts the PDF to a PNG,

https://drive.google.com/file/d/0B4EbUsrclSoDMTlDZzQzeDJWU1U/edit?usp=sharing

3b. create GCPs for GDAL based on the coordinates within the PNG (hard to
see but green circles mark the GCPs chosen to correspond to the lat/lon
shown on diagram)

https://drive.google.com/file/d/0B4EbUsrclSoDWUtqNVgtWFUwa0k/edit?usp=sharing

3c.  gdal_translate the PNG file based on the GCPs we found to an
intermediate VRT
gdal_translate -q -of VRT -strict -a_srs EPSG:4326  -gcp 1017.14863049096
1800.51717680381 -122.4 37.6166666666667 -gcp 337.854728682168 1260.25
-122.383333333333 37.6333333333333 -gcp 1017.14863049095 1260.25
-122.383333333333 37.6166666666667 -gcp 1017.14863049096 720.166666666667
-122.366666666667 37.6166666666667 -gcp 337.854728682172 720.166666666667
-122.366666666667 37.6333333333333 -gcp 337.854728682172 1800.33895140302
-122.4 37.6333333333333 './dtpp/00375AD.png'
'./dtpp/CA-SFO-00375AD-PDF-AIRPORT-DIAGRAM.vrt'


https://drive.google.com/file/d/0B4EbUsrclSoDX2hzTTBsY1c5dXM/edit?usp=sharing

3d. gdalwarp the intermediate VRT to the final VRT
gdalwarp -q -of VRT -t_srs EPSG:4326 -order 1 -overwrite
''./dtpp/CA-SFO-00375AD-PDF-AIRPORT-DIAGRAM.vrt''
'./dtpp/warpedCA-SFO-00375AD.PDF-AIRPORT DIAGRAM.vrt'


https://drive.google.com/file/d/0B4EbUsrclSoDTmNDanFmbkVvVm8/edit?usp=sharing

Here's the process for a portrait one

1. Get source PDFs from the Federal Aviation Administrator (FAA)

https://drive.google.com/file/d/0B4EbUsrclSoDMjNPOVBPT01JS1U/edit?usp=sharing

2. Run my utility.

3a. It converts the PDF to a PNG,

https://drive.google.com/file/d/0B4EbUsrclSoDTUZNY2RKaVVHMDQ/edit?usp=sharing

3b. create GCPs for GDAL based on the coordinates within the PNG (hard to
see but green circles mark the GCPs chosen to correspond to the lat/lon
shown on diagram)

https://drive.google.com/file/d/0B4EbUsrclSoDbHNyTnhGczh3RDA/edit?usp=sharing

3c.  gdal_translate the PNG file based on the GCPs we found to an
intermediate VRT
 gdal_translate -q -of VRT -strict -a_srs EPSG:4326  -gcp 310.408626924008
1496.72390271202 -77.3333333333333 37.5 -gcp 976.562655349203
660.697730425566 -77.3166666666667 37.5166666666667 -gcp 310.523817613394
660.744792369168 -77.3333333333333 37.5166666666667 -gcp 976.580225174465
1496.63921742496 -77.3166666666667 37.5 './dtpp/00347AD.png'
'./dtpp/VA-RIC-00347AD-PDF-AIRPORT-DIAGRAM.vrt'


https://drive.google.com/file/d/0B4EbUsrclSoDRzdVZDQzY2lZT1U/edit?usp=sharing

3d. gdalwarp the intermediate VRT to the final VRT
gdalwarp -q -of VRT -t_srs EPSG:4326 -order 1 -overwrite
''./dtpp/VA-RIC-00347AD-PDF-AIRPORT-DIAGRAM.vrt''
'./dtpp/warpedVA-RIC-00347AD.PDF-AIRPORT DIAGRAM.vrt'


https://drive.google.com/file/d/0B4EbUsrclSoDRGptZFhhaVdaT1E/edit?usp=sharing
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140701/4be15736/attachment.html>

From andre+joost at nurfuerspam.de  Tue Jul  1 08:44:43 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Tue, 01 Jul 2014 17:44:43 +0200
Subject: [gdal-dev] gdal_translate 1.11 netcdf output is a flipped Y
	image
In-Reply-To: <1404219075868-5148989.post@n6.nabble.com>
References: <1404209637612-5148957.post@n6.nabble.com>
	<53B2A980.4010203@free.fr>
	<1404219075868-5148989.post@n6.nabble.com>
Message-ID: <loul8l$fr2$1@ger.gmane.org>

Am 01.07.2014 14:51, schrieb 00darki:
> *gdal_translate.exe -a_ullr "-180" "90" "180" "-90" -a_srs "EPSG:3408"
> D:/GDAL/MapServer/mnt00000.nc D:/GDAL/MapServer/mnt00_geotif00.tif
>

I guess that the bounds must meet the CRS of the tif. Since that is not 
lat/lon, the bounds make no sense to me.

HTH,
Andr? Joost



From even.rouault at mines-paris.org  Tue Jul  1 13:01:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Jul 2014 22:01:43 +0200
Subject: [gdal-dev] gdal_translate 1.11 netcdf output is a flipped Y
	image
In-Reply-To: <1404209637612-5148957.post@n6.nabble.com>
References: <1404209637612-5148957.post@n6.nabble.com>
Message-ID: <201407012201.43364.even.rouault@mines-paris.org>

Le mardi 01 juillet 2014 12:13:57, 00darki a ?crit :
> Hi,
> 
> I'm trying to convert netcdf files to geotiff image, i'm using
> gdal_translate.exe, and the result of the command is a Y flipped image
> (north is south and south is north ..).
> 
> I've learned many topics on this issue but I havn't found any solution ..

The documentation of the driver ( http://gdal.org/frmt_netcdf.html ) gives a 
hint :

"Configuration Options

    GDAL_NETCDF_BOTTOMUP=[YES/NO] : Set the y-axis order for import, 
overriding the order detected by the driver. This option is usually not needed 
unless a specific dataset is causing problems (which should be reported in GDAL 
trac).
"

So try :

gdal_translate in.nc out.tif --config GDAL_NETCDF_BOTTOMUP NO

Normally netcdf files are generally in bottom-up order and GDAL correct this. 
But there might be a problem in the logic that detect bottom-up or top-bottom 
order.

If the above doesn't work, replace NO by YES. Hopefully one of the value will 
make you happy ;-)

As noted in the doc, it might be usefull that you create a ticket in 
http://trac.osgeo.org/gdal/newticket and attach the file or provide a link to 
it to see if the autodetection logic can be improved.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bhudspeth at edac.unm.edu  Tue Jul  1 13:07:36 2014
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Tue, 01 Jul 2014 14:07:36 -0600
Subject: [gdal-dev] Raster to vector conversions....
Message-ID: <53B31508.1080604@edac.unm.edu>

Hello,

I am trying to find a method of converting a raster grid to a polygon 
vector that does NOT aggregate adjacent pixels that share the same Z 
value. In other words, I would like the output vector to be a grid of 
polygons where the number of polygons is equal to the number of pixels 
in the source raster file, and where the polygon attribute values 
reflect the pixel Z value. The script gdal_polygonize does not seem to 
be able to do this. Any other ideas on how this might be accomplished??

Thanks, Bill

From even.rouault at mines-paris.org  Tue Jul  1 13:18:57 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Jul 2014 22:18:57 +0200
Subject: [gdal-dev] Raster to vector conversions....
In-Reply-To: <53B31508.1080604@edac.unm.edu>
References: <53B31508.1080604@edac.unm.edu>
Message-ID: <201407012218.57779.even.rouault@mines-paris.org>

Le mardi 01 juillet 2014 22:07:36, William Hudspeth a ?crit :
> Hello,
> 
> I am trying to find a method of converting a raster grid to a polygon
> vector that does NOT aggregate adjacent pixels that share the same Z
> value. In other words, I would like the output vector to be a grid of
> polygons where the number of polygons is equal to the number of pixels
> in the source raster file, and where the polygon attribute values
> reflect the pixel Z value. The script gdal_polygonize does not seem to
> be able to do this. Any other ideas on how this might be accomplished?

Bill,

gdal_polygonize is indeed too smart for what you need ;-)

See this email and other emails in that thread that are exactly about this 
topic :
http://lists.osgeo.org/pipermail/gdal-dev/2014-June/039292.html

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Jul  1 13:37:43 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 1 Jul 2014 22:37:43 +0200
Subject: [gdal-dev] gdaltranslate and gdalwarp rotating and resizing
	image without being asked to, why?
In-Reply-To: <CA+XueT1is9r_as8OCOV=aGGaGeQ_4uZTdg-KsbUh=2Garbqy9w@mail.gmail.com>
References: <CA+XueT2r7kQp1d_5B-wMTec9dY_CXxc8tSZRzKGKYU9XPsxTTA@mail.gmail.com>
	<201406302107.59182.even.rouault@mines-paris.org>
	<CA+XueT1is9r_as8OCOV=aGGaGeQ_4uZTdg-KsbUh=2Garbqy9w@mail.gmail.com>
Message-ID: <201407012237.43840.even.rouault@mines-paris.org>

Le mardi 01 juillet 2014 15:50:18, Jesse McGraw a ?crit :
> On Mon, Jun 30, 2014 at 3:07 PM, Even Rouault
> <even.rouault at mines-paris.org>
> 
> wrote:
> > That might the problem. If you create the GCPs on the PDF and not on the
> > PNG,
> > and that the PDF has rotation, pdftoppm I think will apply the rotation,
> > hence
> > the axis swapping.
> 
> Remember, I'm using the PNG I've created for all gdal operations, gdal
> never interacts with the source PDF
> 
> I'm probably fundamentally misunderstanding some aspect of the command
> lines I'm using in gdal*.  My end goal is to get the necessary affine
> transformation information to display the PNG I create in step 3a properly
> in a separate Android moving-map application (eg. your current position
> displayed on the diagram as you move around the airport)

Jesse,

hum ok, with the images I think I now understand the situation (I've only 
looked at the landscape diagram) and what you want.

You probably don't want to use gdalwarp, which by default will result in a 
north-up image. You likely want to compute the geotransform affine matrix for 
your GCPs and set it, since indeed your GCPs define a 1st-order transformation.

The GDAL C API has GDALGCPsToGeoTransform() which does exactly this. I see it 
is also available in the Python API :  gdal.GCPsToGeoTransform().
See http://svn.osgeo.org/gdal/trunk/autotest/gcore/gcps2geotransform.py for 
how to use it.

You could then just do a CreateCopy() of the PNG to a VRT, and set the 
returned geotransform by the previous step with SetGeoTransform().

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From lukepinnerau at gmail.com  Tue Jul  1 17:53:27 2014
From: lukepinnerau at gmail.com (Luke)
Date: Tue, 1 Jul 2014 17:53:27 -0700 (PDT)
Subject: [gdal-dev] Raster to vector conversions....
In-Reply-To: <53B31508.1080604@edac.unm.edu>
References: <53B31508.1080604@edac.unm.edu>
Message-ID: <1404262407696-5149113.post@n6.nabble.com>

There is a QGIS solution on GIS Stackexchange -
http://gis.stackexchange.com/a/86186/2856

Luke


Wilbur60 wrote
> I am trying to find a method of converting a raster grid to a polygon 
> vector that does NOT aggregate adjacent pixels that share the same Z 
> value. In other words, I would like the output vector to be a grid of 
> polygons where the number of polygons is equal to the number of pixels 
> in the source raster file, and where the polygon attribute values 
> reflect the pixel Z value.





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Raster-to-vector-conversions-tp5149082p5149113.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From alex.jong0019 at gmail.com  Wed Jul  2 02:11:53 2014
From: alex.jong0019 at gmail.com (00darki)
Date: Wed, 2 Jul 2014 02:11:53 -0700 (PDT)
Subject: [gdal-dev] gdal_translate 1.11 netcdf output is a flipped Y
	image
In-Reply-To: <201407012201.43364.even.rouault@mines-paris.org>
References: <1404209637612-5148957.post@n6.nabble.com>
	<201407012201.43364.even.rouault@mines-paris.org>
Message-ID: <1404292313477-5149174.post@n6.nabble.com>

Ho yes it makes me happy, it works !!! :-)
Thanks a lot Even and other who try to help me !
Problem solved



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-gdal-translate-1-11-netcdf-output-is-a-flipped-Y-image-tp5148957p5149174.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jluis at ualg.pt  Wed Jul  2 07:37:54 2014
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed, 02 Jul 2014 15:37:54 +0100
Subject: [gdal-dev] Raster to vector conversions....
In-Reply-To: <53B31508.1080604@edac.unm.edu>
References: <53B31508.1080604@edac.unm.edu>
Message-ID: <53B41942.3050303@ualg.pt>

On 01-07-2014 21:07, William Hudspeth wrote:
> Hello,
>
> I am trying to find a method of converting a raster grid to a polygon 
> vector that does NOT aggregate adjacent pixels that share the same Z 
> value. In other words, I would like the output vector to be a grid of 
> polygons where the number of polygons is equal to the number of pixels 
> in the source raster file, and where the polygon attribute values 
> reflect the pixel Z value. The script gdal_polygonize does not seem to 
> be able to do this. Any other ideas on how this might be accomplished??
>
> Thanks, Bill

Hi, I'm not sure I got what you want do but see if this pseudo-algo works

1- create one mask with 1's at the cells with the values you want to 
compute a border off, and 0's for the others
2- compute and dump the 0.5 contour

How to do it? Sorry, I know only a GMT recipe but I'm sure that if this 
solves your problem others will tell how to do it with GDAL.

Joaquim

From jlmcgraw at gmail.com  Wed Jul  2 08:05:07 2014
From: jlmcgraw at gmail.com (Jesse McGraw)
Date: Wed, 2 Jul 2014 11:05:07 -0400
Subject: [gdal-dev] gdaltranslate and gdalwarp rotating and resizing
 image without being asked to, why?
In-Reply-To: <201407012237.43840.even.rouault@mines-paris.org>
References: <CA+XueT2r7kQp1d_5B-wMTec9dY_CXxc8tSZRzKGKYU9XPsxTTA@mail.gmail.com>
	<201406302107.59182.even.rouault@mines-paris.org>
	<CA+XueT1is9r_as8OCOV=aGGaGeQ_4uZTdg-KsbUh=2Garbqy9w@mail.gmail.com>
	<201407012237.43840.even.rouault@mines-paris.org>
Message-ID: <CA+XueT0juUedivs=YMqaBQmbsUFTrMk=owg6cZ8oJa1F557PUw@mail.gmail.com>

Even,
  Thank you for the very detailed responses.  Time to go do some more
googling on GDAL perl bindings (or dig into python)



On Tue, Jul 1, 2014 at 4:37 PM, Even Rouault <even.rouault at mines-paris.org>
wrote:

> Le mardi 01 juillet 2014 15:50:18, Jesse McGraw a ?crit :
> > On Mon, Jun 30, 2014 at 3:07 PM, Even Rouault
> > <even.rouault at mines-paris.org>
> >
> > wrote:
> > > That might the problem. If you create the GCPs on the PDF and not on
> the
> > > PNG,
> > > and that the PDF has rotation, pdftoppm I think will apply the
> rotation,
> > > hence
> > > the axis swapping.
> >
> > Remember, I'm using the PNG I've created for all gdal operations, gdal
> > never interacts with the source PDF
> >
> > I'm probably fundamentally misunderstanding some aspect of the command
> > lines I'm using in gdal*.  My end goal is to get the necessary affine
> > transformation information to display the PNG I create in step 3a
> properly
> > in a separate Android moving-map application (eg. your current position
> > displayed on the diagram as you move around the airport)
>
> Jesse,
>
> hum ok, with the images I think I now understand the situation (I've only
> looked at the landscape diagram) and what you want.
>
> You probably don't want to use gdalwarp, which by default will result in a
> north-up image. You likely want to compute the geotransform affine matrix
> for
> your GCPs and set it, since indeed your GCPs define a 1st-order
> transformation.
>
> The GDAL C API has GDALGCPsToGeoTransform() which does exactly this. I see
> it
> is also available in the Python API :  gdal.GCPsToGeoTransform().
> See http://svn.osgeo.org/gdal/trunk/autotest/gcore/gcps2geotransform.py
> for
> how to use it.
>
> You could then just do a CreateCopy() of the PNG to a VRT, and set the
> returned geotransform by the previous step with SetGeoTransform().
>
> Even
>
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140702/acd79f64/attachment.html>

From glendening at drjack.net  Wed Jul  2 09:39:02 2014
From: glendening at drjack.net (John W. Glendening)
Date: Wed, 02 Jul 2014 09:39:02 -0700
Subject: [gdal-dev] GeoPDF fails despite poppler/godofo
Message-ID: <1404319142.4848.3.camel@HP-GLENDENI>

I am unable to get a GDAL 1.11.0 build to recognize any GeoPDF I have
obtained from the USGS, despite having configured with poppler and
podofo, both separately and together.  Running
  usr/local/bin/gdalinfo CA_Rana_Creek_20120306_TM_geo.pdf
gives
 ERROR 4: `CA_Rana_Creek_20120306_TM_geo.pdf' not recognised as a
supported file format.
Otherwise GDAL utilities seem to run without problems.
Output from  "/usr/local/bin/gdalinfo --formats" includes "PDF (rw):
Geospatial PDF"

Details are: Ubuntu 14.04, separately built GDAL 1.11.0
after using apt-get to get Ubuntu version of poppler and podofo. (I also
installed
the Ubuntu version of GDAL, for which /usr/bin/gdalinfo gave the same
result.)
The config.log (for --with-poppler) includes statements
  configure:27673: checking for poppler
  configure:27744: checking if we have Poppler >= 0.20.0
  configure:27755: checking if we have Poppler >= 0.23.0
  HAVE_POPPLER='yes'
  LIBS='-lpoppler -lexpat -lnetcdf -lmfhdfalt -ldfalt -ljpeg -ltiff
-lpng -lz -lpthread -lm -lrt -ldl '
  POPPLER_0_20_OR_LATER='yes'
  POPPLER_0_23_OR_LATER='yes'
  POPPLER_BASE_STREAM_HAS_TWO_ARGS='yes'
  POPPLER_HAS_OPTCONTENT='yes'
  POPPLER_INC='-I/usr/include -I/usr/include/poppler'

I'm at a loss to figure out how to get GDAL to recognize/use the
GeoPDFs (my intent is to create GeoTiffs from them using
gdal_translate), since on-line search finds that failure to include
poppler or podofo is generally the reason for a "ERROR 4" result -
but that is not the case here.

Jack 






From even.rouault at mines-paris.org  Wed Jul  2 09:52:18 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Jul 2014 18:52:18 +0200
Subject: [gdal-dev] GeoPDF fails despite poppler/godofo
In-Reply-To: <1404319142.4848.3.camel@HP-GLENDENI>
References: <1404319142.4848.3.camel@HP-GLENDENI>
Message-ID: <201407021852.18723.even.rouault@mines-paris.org>

John,

if you did several attempts of ./configure and intermediate builds, you may 
need to "make clean" before "make; make install". The dependencies rules of 
the GDAL makefiles are rather primitive and don't generally notice in-between 
configuration changes

The write-side of the PDF driver is only driver, and gdalinfo --formats has no 
way of indicating a write-only driver, so it is possible that the PDF support 
available is write-only despite the rw.

The content of config.log is OK, so I'm confident that cleaning before 
rebuilding should solve your issue.

Even

> I am unable to get a GDAL 1.11.0 build to recognize any GeoPDF I have
> obtained from the USGS, despite having configured with poppler and
> podofo, both separately and together.  Running
>   usr/local/bin/gdalinfo CA_Rana_Creek_20120306_TM_geo.pdf
> gives
>  ERROR 4: `CA_Rana_Creek_20120306_TM_geo.pdf' not recognised as a
> supported file format.
> Otherwise GDAL utilities seem to run without problems.
> Output from  "/usr/local/bin/gdalinfo --formats" includes "PDF (rw):
> Geospatial PDF"
> 
> Details are: Ubuntu 14.04, separately built GDAL 1.11.0
> after using apt-get to get Ubuntu version of poppler and podofo. (I also
> installed
> the Ubuntu version of GDAL, for which /usr/bin/gdalinfo gave the same
> result.)
> The config.log (for --with-poppler) includes statements
>   configure:27673: checking for poppler
>   configure:27744: checking if we have Poppler >= 0.20.0
>   configure:27755: checking if we have Poppler >= 0.23.0
>   HAVE_POPPLER='yes'
>   LIBS='-lpoppler -lexpat -lnetcdf -lmfhdfalt -ldfalt -ljpeg -ltiff
> -lpng -lz -lpthread -lm -lrt -ldl '
>   POPPLER_0_20_OR_LATER='yes'
>   POPPLER_0_23_OR_LATER='yes'
>   POPPLER_BASE_STREAM_HAS_TWO_ARGS='yes'
>   POPPLER_HAS_OPTCONTENT='yes'
>   POPPLER_INC='-I/usr/include -I/usr/include/poppler'
> 
> I'm at a loss to figure out how to get GDAL to recognize/use the
> GeoPDFs (my intent is to create GeoTiffs from them using
> gdal_translate), since on-line search finds that failure to include
> poppler or podofo is generally the reason for a "ERROR 4" result -
> but that is not the case here.
> 
> Jack
> 
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Jul  2 10:17:19 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 2 Jul 2014 19:17:19 +0200
Subject: [gdal-dev] GeoPDF fails despite poppler/godofo
In-Reply-To: <201407021852.18723.even.rouault@mines-paris.org>
References: <1404319142.4848.3.camel@HP-GLENDENI>
	<201407021852.18723.even.rouault@mines-paris.org>
Message-ID: <201407021917.19216.even.rouault@mines-paris.org>

Le mercredi 02 juillet 2014 18:52:18, Even Rouault a ?crit :
> John,
> 
> 
> gdalinfo --formats has
> no way of indicating a write-only driver

Well, since you're not the first one to be bitten by that, now, it has one in 
the development version !

$ gdalinfo --formats | grep PDF
  PDF -raster,vector- (w+): Geospatial PDF

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From glendening at drjack.net  Wed Jul  2 10:25:35 2014
From: glendening at drjack.net (John W. Glendening)
Date: Wed, 02 Jul 2014 10:25:35 -0700
Subject: [gdal-dev] GeoPDF fails despite poppler/godofo
In-Reply-To: <201407021852.18723.even.rouault@mines-paris.org>
References: <1404319142.4848.3.camel@HP-GLENDENI>
	<201407021852.18723.even.rouault@mines-paris.org>
Message-ID: <1404321935.4848.12.camel@HP-GLENDENI>

Evan

I'm happy to report your confidence was not misplaced.  This make was
indeed being run after a previous initial build of PDAL.  After now
starting with "make clean", the new gdalinfo successfully recognizes the
GeoPDF.  Thanks very much for that insight, which likely saved me many
hours of puzzling and fruitless searching.

And let me take this opportunity to thank the GDAL developers for their
dedication and hard work.  Without GDAL I would not have attempted to
create the maps I have for our local hikers, so your work benefits many,
many people in addition to its actual users.

Jack 

On Wed, 2014-07-02 at 18:52 +0200, Even Rouault wrote:
> John,
> 
> if you did several attempts of ./configure and intermediate builds, you may 
> need to "make clean" before "make; make install". The dependencies rules of 
> the GDAL makefiles are rather primitive and don't generally notice in-between 
> configuration changes
> 
> The write-side of the PDF driver is only driver, and gdalinfo --formats has no 
> way of indicating a write-only driver, so it is possible that the PDF support 
> available is write-only despite the rw.
> 
> The content of config.log is OK, so I'm confident that cleaning before 
> rebuilding should solve your issue.
> 
> Even
> 
> > I am unable to get a GDAL 1.11.0 build to recognize any GeoPDF I have
> > obtained from the USGS, despite having configured with poppler and
> > podofo, both separately and together.  Running
> >   usr/local/bin/gdalinfo CA_Rana_Creek_20120306_TM_geo.pdf
> > gives
> >  ERROR 4: `CA_Rana_Creek_20120306_TM_geo.pdf' not recognised as a
> > supported file format.
> > Otherwise GDAL utilities seem to run without problems.
> > Output from  "/usr/local/bin/gdalinfo --formats" includes "PDF (rw):
> > Geospatial PDF"
> > 
> > Details are: Ubuntu 14.04, separately built GDAL 1.11.0
> > after using apt-get to get Ubuntu version of poppler and podofo. (I also
> > installed
> > the Ubuntu version of GDAL, for which /usr/bin/gdalinfo gave the same
> > result.)
> > The config.log (for --with-poppler) includes statements
> >   configure:27673: checking for poppler
> >   configure:27744: checking if we have Poppler >= 0.20.0
> >   configure:27755: checking if we have Poppler >= 0.23.0
> >   HAVE_POPPLER='yes'
> >   LIBS='-lpoppler -lexpat -lnetcdf -lmfhdfalt -ldfalt -ljpeg -ltiff
> > -lpng -lz -lpthread -lm -lrt -ldl '
> >   POPPLER_0_20_OR_LATER='yes'
> >   POPPLER_0_23_OR_LATER='yes'
> >   POPPLER_BASE_STREAM_HAS_TWO_ARGS='yes'
> >   POPPLER_HAS_OPTCONTENT='yes'
> >   POPPLER_INC='-I/usr/include -I/usr/include/poppler'
> > 
> > I'm at a loss to figure out how to get GDAL to recognize/use the
> > GeoPDFs (my intent is to create GeoTiffs from them using
> > gdal_translate), since on-line search finds that failure to include
> > poppler or podofo is generally the reason for a "ERROR 4" result -
> > but that is not the case here.
> > 
> > Jack
> > 
> > 
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html

-- 
John W. (Jack) Glendening  831-484-6929
25953 Deer Run Lane  Salinas, CA  93908





From rgourrat at ag-carto.fr  Thu Jul  3 03:21:08 2014
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Thu, 3 Jul 2014 10:21:08 +0000
Subject: [gdal-dev] ogr2ogr error message with OracleSpatial View to Shape
Message-ID: <238B1E1830D86F46B3F030D491793D60039CB81C@EXC2010.aditu.fr>

Hi,

When I use ogr2ogr to export data from Oracle Spatial View to shape,

With this syntax :

ogr2ogr -f "ESRI Shapefile" PARCELLE.shp OCI:ORA_USER/ORA_PWD at ORA_DATASOURCE:DGI.PARCELLE -sql "select * from DGI.PARCELLE where INSEE in (75001)" -skipfailures -overwrite

this message appears :

ERROR 1: ORA-04043: objet DGI.PARCELLE inexistant in OCIDescribeAny

This view is referenced in USER_SDO_GEOM_METADATA.

However, the export seems complete when I display it in Qgis : same geometry, same feature number than Oracle.

Is it a privilege issue or something else ?

R?my Gourrat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140703/dff24fdf/attachment.html>

From piotrpachol at gmail.com  Thu Jul  3 06:35:57 2014
From: piotrpachol at gmail.com (=?UTF-8?B?UGlvdHIgUGFjaMOzxYI=?=)
Date: Thu, 03 Jul 2014 15:35:57 +0200
Subject: [gdal-dev] ogr2ogr - importing gml with more then one value for
	attribute
Message-ID: <53B55C3D.3090605@gmail.com>

Hello,
I have problem using ogr2ogr during import gml file which can have one 
or more then one value for an attribute e.g.:

<gml:featureMember>
    <id>101</id>
    <fun>A</fun>
    <fun>B</fun>
     .
     .
</gml:featureMember>
<gml:featureMember>
    <id>102</id>
    <fun>C</fun>
     .
     .
</gml:featureMember>

In above situation ogr2ogr didn't  import at all attribute "fun".

May be in this situation it would be better when user can choose one of 
variant:
- import first encountered value of attribute "fun" from each record 
e.g.: "A",
- import all values separated with comma e.g.: "A, B"
- ideal solution but difficult: create auxiliary table which keeps all 
relations one to many e.g.:
     101  A
     101  B
     102  C

Regards,
Piotr
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140703/6134bbe2/attachment.html>

From aperi2007 at gmail.com  Thu Jul  3 09:01:09 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 3 Jul 2014 18:01:09 +0200
Subject: [gdal-dev] How retrieve the list of field of a table on spatialite
	in pythonlang.
Message-ID: <CABqTJk806yKuNJVTpDvLEcx3ejVACzx3pRgSEh1QAvEb6-0PrQ@mail.gmail.com>

Hi,

I'm try-ing to retrieve the list of fieldname from a spatialite table.
To do this I try this code:

dataset = "select * from table1"
ds = driver.Open(file,False)
layer = ds.ExecuteSQL(dataset,None,"SQLITE")
layer.ResetReading()
layerDef = layer.GetLayerDefn()
.....

In the last line I'm having an error.

Is the comand "GetLayerDefn" available on sqlite driver ?

Thx,

Andrea.


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at mines-paris.org  Thu Jul  3 11:59:14 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 3 Jul 2014 20:59:14 +0200
Subject: [gdal-dev] How retrieve the list of field of a table on
	spatialite in pythonlang.
In-Reply-To: <CABqTJk806yKuNJVTpDvLEcx3ejVACzx3pRgSEh1QAvEb6-0PrQ@mail.gmail.com>
References: <CABqTJk806yKuNJVTpDvLEcx3ejVACzx3pRgSEh1QAvEb6-0PrQ@mail.gmail.com>
Message-ID: <201407032059.14696.even.rouault@mines-paris.org>

Le jeudi 03 juillet 2014 18:01:09, Andrea Peri a ?crit :
> Hi,
> 
> I'm try-ing to retrieve the list of fieldname from a spatialite table.
> To do this I try this code:
> 
> dataset = "select * from table1"
> ds = driver.Open(file,False)
> layer = ds.ExecuteSQL(dataset,None,"SQLITE")
> layer.ResetReading()
> layerDef = layer.GetLayerDefn()
> .....
> 
> In the last line I'm having an error.

Andrea,

Which error ? I've just tried on a spatialite db and it works fine.

> 
> Is the comand "GetLayerDefn" available on sqlite driver ?

Yes, in all drivers. As soon as you have a non null layer object, you can call 
GetLayerDefn().

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Jul  3 12:02:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 3 Jul 2014 21:02:32 +0200
Subject: [gdal-dev] ogr2ogr - importing gml with more then one value for
	attribute
In-Reply-To: <53B55C3D.3090605@gmail.com>
References: <53B55C3D.3090605@gmail.com>
Message-ID: <201407032102.33155.even.rouault@mines-paris.org>

Le jeudi 03 juillet 2014 15:35:57, Piotr Pach?? a ?crit :
> Hello,
> I have problem using ogr2ogr during import gml file which can have one
> or more then one value for an attribute e.g.:
> 
> <gml:featureMember>
>     <id>101</id>
>     <fun>A</fun>
>     <fun>B</fun>
>      .
>      .
> </gml:featureMember>
> <gml:featureMember>
>     <id>102</id>
>     <fun>C</fun>
>      .
>      .
> </gml:featureMember>
> 
> In above situation ogr2ogr didn't  import at all attribute "fun".

If you use a recent enough version of GDAL, it should work (generally) :

let's say I have poly.gml :

<?xml version="1.0" encoding="utf-8" ?>
<ogr:FeatureCollection
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://ogr.maptools.org/ poly.xsd"
     xmlns:ogr="http://ogr.maptools.org/"
     xmlns:gml="http://www.opengis.net/gml">
  <ogr:featureMember>
    <ogr:poly gml:id="poly.0">
      <ogr:foo>bar</ogr:foo>
      <ogr:foo>baz</ogr:foo>
    </ogr:poly>
  </ogr:featureMember>
</ogr:FeatureCollection>

$ ogrinfo poly.gml -al
Had to open data source read-only.
INFO: Open of `poly.gml'
      using driver `GML' successful.

Layer name: poly
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
gml_id: String (0.0)
foo: StringList (0.0)
OGRFeature(poly):0
  gml_id (String) = poly.0
  foo (StringList) = (2:bar,baz)

It creates a field of StringList type.

> 
> May be in this situation it would be better when user can choose one of
> variant:
> - import first encountered value of attribute "fun" from each record
> e.g.: "A",
> - import all values separated with comma e.g.: "A, B"
> - ideal solution but difficult: create auxiliary table which keeps all
> relations one to many e.g.:
>      101  A
>      101  B
>      102  C
> 
> Regards,
> Piotr

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From piotrpachol at gmail.com  Thu Jul  3 15:14:19 2014
From: piotrpachol at gmail.com (=?UTF-8?B?UGlvdHIgUGFjaMOzxYI=?=)
Date: Fri, 04 Jul 2014 00:14:19 +0200
Subject: [gdal-dev] ogr2ogr - importing gml with more then one value for
 attribute
In-Reply-To: <201407032102.33155.even.rouault@mines-paris.org>
References: <53B55C3D.3090605@gmail.com>
	<201407032102.33155.even.rouault@mines-paris.org>
Message-ID: <53B5D5BB.1060909@gmail.com>

Now I understand when I try to import from gml to PostGIS - everything 
is OK.
But what I wanted to achieve is import from gml to FileGDB.
I have warning: "Cannot map OGR field type (StringList)"
So with GDB target format it is not possible ?

Piotr


W dniu 2014-07-03 21:02, Even Rouault pisze:
> Le jeudi 03 juillet 2014 15:35:57, Piotr Pach?? a ?crit :
>> Hello,
>> I have problem using ogr2ogr during import gml file which can have one
>> or more then one value for an attribute e.g.:
>>
>> <gml:featureMember>
>>      <id>101</id>
>>      <fun>A</fun>
>>      <fun>B</fun>
>>       .
>>       .
>> </gml:featureMember>
>> <gml:featureMember>
>>      <id>102</id>
>>      <fun>C</fun>
>>       .
>>       .
>> </gml:featureMember>
>>
>> In above situation ogr2ogr didn't  import at all attribute "fun".
> If you use a recent enough version of GDAL, it should work (generally) :
>
> let's say I have poly.gml :
>
> <?xml version="1.0" encoding="utf-8" ?>
> <ogr:FeatureCollection
>       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>       xsi:schemaLocation="http://ogr.maptools.org/ poly.xsd"
>       xmlns:ogr="http://ogr.maptools.org/"
>       xmlns:gml="http://www.opengis.net/gml">
>    <ogr:featureMember>
>      <ogr:poly gml:id="poly.0">
>        <ogr:foo>bar</ogr:foo>
>        <ogr:foo>baz</ogr:foo>
>      </ogr:poly>
>    </ogr:featureMember>
> </ogr:FeatureCollection>
>
> $ ogrinfo poly.gml -al
> Had to open data source read-only.
> INFO: Open of `poly.gml'
>        using driver `GML' successful.
>
> Layer name: poly
> Geometry: None
> Feature Count: 1
> Layer SRS WKT:
> (unknown)
> gml_id: String (0.0)
> foo: StringList (0.0)
> OGRFeature(poly):0
>    gml_id (String) = poly.0
>    foo (StringList) = (2:bar,baz)
>
> It creates a field of StringList type.
>
>> May be in this situation it would be better when user can choose one of
>> variant:
>> - import first encountered value of attribute "fun" from each record
>> e.g.: "A",
>> - import all values separated with comma e.g.: "A, B"
>> - ideal solution but difficult: create auxiliary table which keeps all
>> relations one to many e.g.:
>>       101  A
>>       101  B
>>       102  C
>>
>> Regards,
>> Piotr


From even.rouault at mines-paris.org  Thu Jul  3 15:34:26 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 4 Jul 2014 00:34:26 +0200
Subject: [gdal-dev] ogr2ogr - importing gml with more then one value for
	attribute
In-Reply-To: <53B5D5BB.1060909@gmail.com>
References: <53B55C3D.3090605@gmail.com>
	<201407032102.33155.even.rouault@mines-paris.org>
	<53B5D5BB.1060909@gmail.com>
Message-ID: <201407040034.27061.even.rouault@mines-paris.org>

Le vendredi 04 juillet 2014 00:14:19, Piotr Pach?? a ?crit :
> Now I understand when I try to import from gml to PostGIS - everything
> is OK.
> But what I wanted to achieve is import from gml to FileGDB.
> I have warning: "Cannot map OGR field type (StringList)"
> So with GDB target format it is not possible ?

Only a few formats can support string lists. But you can try one of the 2 
following options of ogr2ogr :
-splitlistfields
-fieldTypeToString StringList

See http://gdal.org/ogr2ogr.html for their documentation.

> 
> Piotr
> 
> W dniu 2014-07-03 21:02, Even Rouault pisze:
> > Le jeudi 03 juillet 2014 15:35:57, Piotr Pach?? a ?crit :
> >> Hello,
> >> I have problem using ogr2ogr during import gml file which can have one
> >> or more then one value for an attribute e.g.:
> >> 
> >> <gml:featureMember>
> >> 
> >>      <id>101</id>
> >>      <fun>A</fun>
> >>      <fun>B</fun>
> >>      
> >>       .
> >>       .
> >> 
> >> </gml:featureMember>
> >> <gml:featureMember>
> >> 
> >>      <id>102</id>
> >>      <fun>C</fun>
> >>      
> >>       .
> >>       .
> >> 
> >> </gml:featureMember>
> >> 
> >> In above situation ogr2ogr didn't  import at all attribute "fun".
> > 
> > If you use a recent enough version of GDAL, it should work (generally) :
> > 
> > let's say I have poly.gml :
> > 
> > <?xml version="1.0" encoding="utf-8" ?>
> > <ogr:FeatureCollection
> > 
> >       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> >       xsi:schemaLocation="http://ogr.maptools.org/ poly.xsd"
> >       xmlns:ogr="http://ogr.maptools.org/"
> >       xmlns:gml="http://www.opengis.net/gml">
> >    
> >    <ogr:featureMember>
> >    
> >      <ogr:poly gml:id="poly.0">
> >      
> >        <ogr:foo>bar</ogr:foo>
> >        <ogr:foo>baz</ogr:foo>
> >      
> >      </ogr:poly>
> >    
> >    </ogr:featureMember>
> > 
> > </ogr:FeatureCollection>
> > 
> > $ ogrinfo poly.gml -al
> > Had to open data source read-only.
> > INFO: Open of `poly.gml'
> > 
> >        using driver `GML' successful.
> > 
> > Layer name: poly
> > Geometry: None
> > Feature Count: 1
> > Layer SRS WKT:
> > (unknown)
> > gml_id: String (0.0)
> > foo: StringList (0.0)
> > OGRFeature(poly):0
> > 
> >    gml_id (String) = poly.0
> >    foo (StringList) = (2:bar,baz)
> > 
> > It creates a field of StringList type.
> > 
> >> May be in this situation it would be better when user can choose one of
> >> variant:
> >> - import first encountered value of attribute "fun" from each record
> >> e.g.: "A",
> >> - import all values separated with comma e.g.: "A, B"
> >> - ideal solution but difficult: create auxiliary table which keeps all
> >> 
> >> relations one to many e.g.:
> >>       101  A
> >>       101  B
> >>       102  C
> >> 
> >> Regards,
> >> Piotr

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From aperi2007 at gmail.com  Fri Jul  4 07:02:09 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Fri, 4 Jul 2014 16:02:09 +0200
Subject: [gdal-dev] How retrieve the list of field of a table on
 spatialite in pythonlang.
In-Reply-To: <201407032059.14696.even.rouault@mines-paris.org>
References: <CABqTJk806yKuNJVTpDvLEcx3ejVACzx3pRgSEh1QAvEb6-0PrQ@mail.gmail.com>
	<201407032059.14696.even.rouault@mines-paris.org>
Message-ID: <CABqTJk9NtqegZwai7AgBwP2xUZUJ7tknFqfArVc9CScVYDfWaA@mail.gmail.com>

Hi Even,
thx for response.

I found the problem.
Was a my error .
I'm quite new-by on python.

You response help me to understand that the error was mine.

Regards,

Andrea.


2014-07-03 20:59 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> Le jeudi 03 juillet 2014 18:01:09, Andrea Peri a ?crit :
>> Hi,
>>
>> I'm try-ing to retrieve the list of fieldname from a spatialite table.
>> To do this I try this code:
>>
>> dataset = "select * from table1"
>> ds = driver.Open(file,False)
>> layer = ds.ExecuteSQL(dataset,None,"SQLITE")
>> layer.ResetReading()
>> layerDef = layer.GetLayerDefn()
>> .....
>>
>> In the last line I'm having an error.
>
> Andrea,
>
> Which error ? I've just tried on a spatialite db and it works fine.
>
>>
>> Is the comand "GetLayerDefn" available on sqlite driver ?
>
> Yes, in all drivers. As soon as you have a non null layer object, you can call
> GetLayerDefn().
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From gusevmihs at gmail.com  Fri Jul  4 12:41:29 2014
From: gusevmihs at gmail.com (Mikhail Gusev)
Date: Fri, 4 Jul 2014 23:41:29 +0400
Subject: [gdal-dev] GSoC weekly report 7. GDAL Networking
Message-ID: <CAJB43VqDHALzat-CVBT6b=4RtPEbaR4TYYEHS8gzOZmWieb9aA@mail.gmail.com>

Hello everyone.
This week was not so productive as I expected. I forked the official GDAL
repo and now it is the final decision for me to apply my changes. My new
repo: https://github.com/MikhanGusev/gdal. I also spent time to get
familiar with python programming, which is needed for GDAL typical tests.
And though I've implemented some tests I couldn't try to use them, because
I realized that I need to build GDAL with the python support. So I think
I'm a bit blocked on this. To build GDAL with python support and to add GNM
python tests to /autotest correctly is the plan for the next week. Also I
continue to move methods of old functionality from old API to the new one.
The reviewed timeline for the whole second path of the SoC is in my blog
post: http://gsoc2014gnm.blogspot.ru/2014/07/week-7-reviewed-timeline.html
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140704/6ecf7cf9/attachment.html>

From giohappy at gmail.com  Sat Jul  5 07:02:09 2014
From: giohappy at gmail.com (G. Allegri)
Date: Sat, 5 Jul 2014 16:02:09 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space of
	an ASCII Grid?
Message-ID: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>

I've converted a Float32 ASCII Grid of 8861 x 9457 cells to Geotiff (with
deflate compression, predicor=1).
The original file was 577 MB, the resulting Geotiff is about 1.897 MB.

Here is gdalinfo run on the ASCII:

Driver: AAIGrid/Arc/Info ASCII Grid
Files: DTM\dtm.asc
       DTM\dtm.asc.aux.xml
Size is 8861, 9457
Coordinate System is `'
Origin = (1634712.000000000000000,4904391.000000000000000)
Pixel Size = (10.000000000000000,-10.000000000000000)
Corner Coordinates:
Upper Left  ( 1634712.000, 4904391.000)
Lower Left  ( 1634712.000, 4809821.000)
Upper Right ( 1723322.000, 4904391.000)
Lower Right ( 1723322.000, 4809821.000)
Center      ( 1679017.000, 4857106.000)
Band 1 Block=8861x1 Type=Float32, ColorInterp=Undefined
  Min=5.810 Max=1932.780
  Minimum=5.810, Maximum=1932.780, Mean=393.467, StdDev=316.141
  NoData Value=-99
  Metadata:
    STATISTICS_MAXIMUM=1932,78
    STATISTICS_MEAN=393,46740210782
    STATISTICS_MINIMUM=5,81
    STATISTICS_STDDEV=316,14065359461

And here the Geotiff:

Driver: GTiff/GeoTIFF
Files: dtm.tif
Size is 8861, 9457
Coordinate System is:
PROJCS["Monte Mario / Italy zone 1",
    GEOGCS["Monte Mario",
        DATUM["Monte_Mario",
            SPHEROID["International 1924",6378388,297.0000000000014,
                AUTHORITY["EPSG","7022"]],
            AUTHORITY["EPSG","6265"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4265"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",1500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","3003"]]
Origin = (1634712.000000000000000,4904391.000000000000000)
Pixel Size = (10.000000000000000,-10.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=DEFLATE
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 1634712.000, 4904391.000) ( 10d41'17.17"E, 44d16'46.14"N)
Lower Left  ( 1634712.000, 4809821.000) ( 10d39'51.33"E, 43d25'42.21"N)
Upper Right ( 1723322.000, 4904391.000) ( 11d47'50.78"E, 44d15'27.69"N)
Lower Right ( 1723322.000, 4809821.000) ( 11d45'28.67"E, 43d24'26.04"N)
Center      ( 1679017.000, 4857106.000) ( 11d13'36.91"E, 43d50'40.36"N)
Band 1 Block=8861x1 Type=Float64, ColorInterp=Gray
  NoData Value=-99

giovanni

-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/b3048eb2/attachment.html>

From giohappy at gmail.com  Sat Jul  5 07:16:22 2014
From: giohappy at gmail.com (G. Allegri)
Date: Sat, 5 Jul 2014 16:16:22 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
	of an ASCII Grid?
In-Reply-To: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
Message-ID: <CAB4g1=zyKTMqgKOQwjkbgZX9RqR-aj_SDQHQak8mLrQmtMFM+w@mail.gmail.com>

I've translated the ASCII with gdal_translate and I get a reasanable size,
335 MB.
The other Geotiff was exported with ano
ther software.
My question is what, inside the Geotiff structure, can make them so
different in size when gdalfino reports the same dimensions and cell type?

giovanni


2014-07-05 16:02 GMT+02:00 G. Allegri <giohappy at gmail.com>:

> I've converted a Float32 ASCII Grid of 8861 x 9457 cells to Geotiff (with
> deflate compression, predicor=1).
> The original file was 577 MB, the resulting Geotiff is about 1.897 MB.
>
> Here is gdalinfo run on the ASCII:
>
> Driver: AAIGrid/Arc/Info ASCII Grid
> Files: DTM\dtm.asc
>        DTM\dtm.asc.aux.xml
> Size is 8861, 9457
> Coordinate System is `'
> Origin = (1634712.000000000000000,4904391.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Corner Coordinates:
> Upper Left  ( 1634712.000, 4904391.000)
> Lower Left  ( 1634712.000, 4809821.000)
> Upper Right ( 1723322.000, 4904391.000)
> Lower Right ( 1723322.000, 4809821.000)
> Center      ( 1679017.000, 4857106.000)
> Band 1 Block=8861x1 Type=Float32, ColorInterp=Undefined
>   Min=5.810 Max=1932.780
>   Minimum=5.810, Maximum=1932.780, Mean=393.467, StdDev=316.141
>   NoData Value=-99
>   Metadata:
>     STATISTICS_MAXIMUM=1932,78
>     STATISTICS_MEAN=393,46740210782
>     STATISTICS_MINIMUM=5,81
>     STATISTICS_STDDEV=316,14065359461
>
> And here the Geotiff:
>
> Driver: GTiff/GeoTIFF
> Files: dtm.tif
> Size is 8861, 9457
> Coordinate System is:
> PROJCS["Monte Mario / Italy zone 1",
>     GEOGCS["Monte Mario",
>         DATUM["Monte_Mario",
>             SPHEROID["International 1924",6378388,297.0000000000014,
>                 AUTHORITY["EPSG","7022"]],
>             AUTHORITY["EPSG","6265"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4265"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",9],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",1500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","3003"]]
> Origin = (1634712.000000000000000,4904391.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=DEFLATE
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 1634712.000, 4904391.000) ( 10d41'17.17"E, 44d16'46.14"N)
> Lower Left  ( 1634712.000, 4809821.000) ( 10d39'51.33"E, 43d25'42.21"N)
> Upper Right ( 1723322.000, 4904391.000) ( 11d47'50.78"E, 44d15'27.69"N)
> Lower Right ( 1723322.000, 4809821.000) ( 11d45'28.67"E, 43d24'26.04"N)
> Center      ( 1679017.000, 4857106.000) ( 11d13'36.91"E, 43d50'40.36"N)
> Band 1 Block=8861x1 Type=Float64, ColorInterp=Gray
>   NoData Value=-99
>
> giovanni
>
> --
> Giovanni Allegri
> http://about.me/giovanniallegri
> Twitter: https://twitter.com/_giohappy_
> blog: http://blog.spaziogis.it
> GEO+ geomatica in Italia http://bit.ly/GEOplus
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/e12477e9/attachment.html>

From giohappy at gmail.com  Sat Jul  5 08:25:48 2014
From: giohappy at gmail.com (G. Allegri)
Date: Sat, 5 Jul 2014 17:25:48 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
 of an ASCII Grid?
In-Reply-To: <53B8176B.900@stripfamily.net>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=zyKTMqgKOQwjkbgZX9RqR-aj_SDQHQak8mLrQmtMFM+w@mail.gmail.com>
	<53B813FB.9080909@stripfamily.net>
	<CAB4g1=wJLS5HJEu+xccTe0NS1DFfo+rTns9azV-MrPLJdnPGiQ@mail.gmail.com>
	<53B8176B.900@stripfamily.net>
Message-ID: <CAB4g1=wh+-mVgHu18J=h9TMp8s4eq+HDkXyt8fbKc9hrjDSkNA@mail.gmail.com>

>
>
> QGIS is usually just calls to gdal, which makes this even more mysterious.
>

Yes, in the end it uses gdal, but it chooses the way blocks are read and
written.
If I remember correctly geotiff final sizes may depend on block ordering
and memory alignment.
Maybe this is the case, QGIS raster provider not doing the best at this
level? Don't know, but this discussion is for the QGIS ml ;)

giovanni


>
> On 7/5/2014 9:09 AM, G. Allegri wrote:
> > I agree with you David, I'm surprised too.
> > Anyway, gdal_translate is run without compression options.
> > I've written to the QGIS devs (it was the software) to verify what's
> > happening with its raster file writer code...
> >
>
>


-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/62b3b857/attachment-0001.html>

From even.rouault at mines-paris.org  Sat Jul  5 08:56:20 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Jul 2014 17:56:20 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
	of an ASCII Grid?
In-Reply-To: <CAB4g1=wh+-mVgHu18J=h9TMp8s4eq+HDkXyt8fbKc9hrjDSkNA@mail.gmail.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<53B8176B.900@stripfamily.net>
	<CAB4g1=wh+-mVgHu18J=h9TMp8s4eq+HDkXyt8fbKc9hrjDSkNA@mail.gmail.com>
Message-ID: <201407051756.20504.even.rouault@mines-paris.org>

Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
> > QGIS is usually just calls to gdal, which makes this even more
> > mysterious.
> 
> Yes, in the end it uses gdal, but it chooses the way blocks are read and
> written.
> If I remember correctly geotiff final sizes may depend on block ordering
> and memory alignment.

In that instance, the target geotiff has a natural block dimension which is a 
raster line.
If QGIS writes the geotiff by 256x256 blocks (this is just a guess. I've not 
verified), the same raster line will be written several times. As it is a 
compressed geotiff, the resulting raster line will be each time being bigger 
since the initial zeros will be replaced by actual values. And if the new size 
of the line is bigger than its previous size, the new line will be rewritten 
at the end of the file, losing the space previously occupied.

> Maybe this is the case, QGIS raster provider not doing the best at this
> level? Don't know, but this discussion is for the QGIS ml ;)
> 
> giovanni
> 
> > On 7/5/2014 9:09 AM, G. Allegri wrote:
> > > I agree with you David, I'm surprised too.
> > > Anyway, gdal_translate is run without compression options.
> > > I've written to the QGIS devs (it was the software) to verify what's
> > > happening with its raster file writer code...

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From giohappy at gmail.com  Sat Jul  5 09:53:56 2014
From: giohappy at gmail.com (G. Allegri)
Date: Sat, 5 Jul 2014 18:53:56 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
 of an ASCII Grid?
In-Reply-To: <201407051756.20504.even.rouault@mines-paris.org>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<53B8176B.900@stripfamily.net>
	<CAB4g1=wh+-mVgHu18J=h9TMp8s4eq+HDkXyt8fbKc9hrjDSkNA@mail.gmail.com>
	<201407051756.20504.even.rouault@mines-paris.org>
Message-ID: <CAB4g1=xYfVqGGgzz9zEJgkB6hPdX1XtoDc1yOaYhFwPL_v13ag@mail.gmail.com>

The problem was simpler then it appeared: I didn't realize that QGIS output
is Float64.
Yet I don't know why QGIS chosed to use this data type...

giovanni


2014-07-05 17:56 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

> Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
> > > QGIS is usually just calls to gdal, which makes this even more
> > > mysterious.
> >
> > Yes, in the end it uses gdal, but it chooses the way blocks are read and
> > written.
> > If I remember correctly geotiff final sizes may depend on block ordering
> > and memory alignment.
>
> In that instance, the target geotiff has a natural block dimension which
> is a
> raster line.
> If QGIS writes the geotiff by 256x256 blocks (this is just a guess. I've
> not
> verified), the same raster line will be written several times. As it is a
> compressed geotiff, the resulting raster line will be each time being
> bigger
> since the initial zeros will be replaced by actual values. And if the new
> size
> of the line is bigger than its previous size, the new line will be
> rewritten
> at the end of the file, losing the space previously occupied.
>
> > Maybe this is the case, QGIS raster provider not doing the best at this
> > level? Don't know, but this discussion is for the QGIS ml ;)
> >
> > giovanni
> >
> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
> > > > I agree with you David, I'm surprised too.
> > > > Anyway, gdal_translate is run without compression options.
> > > > I've written to the QGIS devs (it was the software) to verify what's
> > > > happening with its raster file writer code...
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/6e8d967f/attachment.html>

From giohappy at gmail.com  Sat Jul  5 11:18:50 2014
From: giohappy at gmail.com (G. Allegri)
Date: Sat, 5 Jul 2014 20:18:50 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
 of an ASCII Grid?
In-Reply-To: <CAB4g1=xYfVqGGgzz9zEJgkB6hPdX1XtoDc1yOaYhFwPL_v13ag@mail.gmail.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<53B8176B.900@stripfamily.net>
	<CAB4g1=wh+-mVgHu18J=h9TMp8s4eq+HDkXyt8fbKc9hrjDSkNA@mail.gmail.com>
	<201407051756.20504.even.rouault@mines-paris.org>
	<CAB4g1=xYfVqGGgzz9zEJgkB6hPdX1XtoDc1yOaYhFwPL_v13ag@mail.gmail.com>
Message-ID: <CAB4g1=xHW32Cf5csX6A4TDK=d7tXBs1HizT+dLEubXgmVzg-UA@mail.gmail.com>

Finally I've reached the point: GDAL's driver is opening the ASCII as
Float64, consequently QGIS treats it this way.
I wonder why gdalinfo and gdal_translate treat it as Float32 instead....

giovanni


2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:

> The problem was simpler then it appeared: I didn't realize that QGIS
> output is Float64.
> Yet I don't know why QGIS chosed to use this data type...
>
> giovanni
>
>
> 2014-07-05 17:56 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
>
> Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
>> > > QGIS is usually just calls to gdal, which makes this even more
>> > > mysterious.
>> >
>> > Yes, in the end it uses gdal, but it chooses the way blocks are read and
>> > written.
>> > If I remember correctly geotiff final sizes may depend on block ordering
>> > and memory alignment.
>>
>> In that instance, the target geotiff has a natural block dimension which
>> is a
>> raster line.
>> If QGIS writes the geotiff by 256x256 blocks (this is just a guess. I've
>> not
>> verified), the same raster line will be written several times. As it is a
>> compressed geotiff, the resulting raster line will be each time being
>> bigger
>> since the initial zeros will be replaced by actual values. And if the new
>> size
>> of the line is bigger than its previous size, the new line will be
>> rewritten
>> at the end of the file, losing the space previously occupied.
>>
>> > Maybe this is the case, QGIS raster provider not doing the best at this
>> > level? Don't know, but this discussion is for the QGIS ml ;)
>> >
>> > giovanni
>> >
>> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
>> > > > I agree with you David, I'm surprised too.
>> > > > Anyway, gdal_translate is run without compression options.
>> > > > I've written to the QGIS devs (it was the software) to verify what's
>> > > > happening with its raster file writer code...
>>
>> --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>>
>
>
>
> --
> Giovanni Allegri
> http://about.me/giovanniallegri
> Twitter: https://twitter.com/_giohappy_
> blog: http://blog.spaziogis.it
> GEO+ geomatica in Italia http://bit.ly/GEOplus
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/6acd032a/attachment.html>

From even.rouault at mines-paris.org  Sat Jul  5 11:22:45 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Jul 2014 20:22:45 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
	of an ASCII Grid?
In-Reply-To: <CAB4g1=xHW32Cf5csX6A4TDK=d7tXBs1HizT+dLEubXgmVzg-UA@mail.gmail.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=xYfVqGGgzz9zEJgkB6hPdX1XtoDc1yOaYhFwPL_v13ag@mail.gmail.com>
	<CAB4g1=xHW32Cf5csX6A4TDK=d7tXBs1HizT+dLEubXgmVzg-UA@mail.gmail.com>
Message-ID: <201407052022.45911.even.rouault@mines-paris.org>

Le samedi 05 juillet 2014 20:18:50, G. Allegri a ?crit :
> Finally I've reached the point: GDAL's driver is opening the ASCII as
> Float64, consequently QGIS treats it this way.
> I wonder why gdalinfo and gdal_translate treat it as Float32 instead....

If gdalinfo opens it as Float32, then it is Float32 for everybody. I guess 
QGIS probably promotes Float32 to Float64.

> 
> giovanni
> 
> 2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:
> > The problem was simpler then it appeared: I didn't realize that QGIS
> > output is Float64.
> > Yet I don't know why QGIS chosed to use this data type...
> > 
> > giovanni
> > 
> > 
> > 2014-07-05 17:56 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > 
> > Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
> >> > > QGIS is usually just calls to gdal, which makes this even more
> >> > > mysterious.
> >> > 
> >> > Yes, in the end it uses gdal, but it chooses the way blocks are read
> >> > and written.
> >> > If I remember correctly geotiff final sizes may depend on block
> >> > ordering and memory alignment.
> >> 
> >> In that instance, the target geotiff has a natural block dimension which
> >> is a
> >> raster line.
> >> If QGIS writes the geotiff by 256x256 blocks (this is just a guess. I've
> >> not
> >> verified), the same raster line will be written several times. As it is
> >> a compressed geotiff, the resulting raster line will be each time being
> >> bigger
> >> since the initial zeros will be replaced by actual values. And if the
> >> new size
> >> of the line is bigger than its previous size, the new line will be
> >> rewritten
> >> at the end of the file, losing the space previously occupied.
> >> 
> >> > Maybe this is the case, QGIS raster provider not doing the best at
> >> > this level? Don't know, but this discussion is for the QGIS ml ;)
> >> > 
> >> > giovanni
> >> > 
> >> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
> >> > > > I agree with you David, I'm surprised too.
> >> > > > Anyway, gdal_translate is run without compression options.
> >> > > > I've written to the QGIS devs (it was the software) to verify
> >> > > > what's happening with its raster file writer code...
> >> 
> >> --
> >> Geospatial professional services
> >> http://even.rouault.free.fr/services.html
> > 
> > --
> > Giovanni Allegri
> > http://about.me/giovanniallegri
> > Twitter: https://twitter.com/_giohappy_
> > blog: http://blog.spaziogis.it
> > GEO+ geomatica in Italia http://bit.ly/GEOplus

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From giohappy at gmail.com  Sat Jul  5 11:31:53 2014
From: giohappy at gmail.com (G. Allegri)
Date: Sat, 5 Jul 2014 20:31:53 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
 of an ASCII Grid?
In-Reply-To: <201407052022.45911.even.rouault@mines-paris.org>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=xYfVqGGgzz9zEJgkB6hPdX1XtoDc1yOaYhFwPL_v13ag@mail.gmail.com>
	<CAB4g1=xHW32Cf5csX6A4TDK=d7tXBs1HizT+dLEubXgmVzg-UA@mail.gmail.com>
	<201407052022.45911.even.rouault@mines-paris.org>
Message-ID: <CAB4g1=z1wBLQbPRfw1NAD6WMGgxQHjH3ncw08g0Rq4d1-26xtw@mail.gmail.com>

I've debugged it, and it gets Float64 directly from GDALGetRasterDataType(
GDALRasterBandH ).
I've also tried opening it with Python GDAL and I get Float64.
gdalinfo tells me Float32.
I will try to send you a subset of it. It's not easy, as it is a heavy
ASCII Grid and I don't want to alter it.

giovanni


2014-07-05 20:22 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

> Le samedi 05 juillet 2014 20:18:50, G. Allegri a ?crit :
> > Finally I've reached the point: GDAL's driver is opening the ASCII as
> > Float64, consequently QGIS treats it this way.
> > I wonder why gdalinfo and gdal_translate treat it as Float32 instead....
>
> If gdalinfo opens it as Float32, then it is Float32 for everybody. I guess
> QGIS probably promotes Float32 to Float64.
>
> >
> > giovanni
> >
> > 2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:
> > > The problem was simpler then it appeared: I didn't realize that QGIS
> > > output is Float64.
> > > Yet I don't know why QGIS chosed to use this data type...
> > >
> > > giovanni
> > >
> > >
> > > 2014-07-05 17:56 GMT+02:00 Even Rouault <even.rouault at mines-paris.org
> >:
> > >
> > > Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
> > >> > > QGIS is usually just calls to gdal, which makes this even more
> > >> > > mysterious.
> > >> >
> > >> > Yes, in the end it uses gdal, but it chooses the way blocks are read
> > >> > and written.
> > >> > If I remember correctly geotiff final sizes may depend on block
> > >> > ordering and memory alignment.
> > >>
> > >> In that instance, the target geotiff has a natural block dimension
> which
> > >> is a
> > >> raster line.
> > >> If QGIS writes the geotiff by 256x256 blocks (this is just a guess.
> I've
> > >> not
> > >> verified), the same raster line will be written several times. As it
> is
> > >> a compressed geotiff, the resulting raster line will be each time
> being
> > >> bigger
> > >> since the initial zeros will be replaced by actual values. And if the
> > >> new size
> > >> of the line is bigger than its previous size, the new line will be
> > >> rewritten
> > >> at the end of the file, losing the space previously occupied.
> > >>
> > >> > Maybe this is the case, QGIS raster provider not doing the best at
> > >> > this level? Don't know, but this discussion is for the QGIS ml ;)
> > >> >
> > >> > giovanni
> > >> >
> > >> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
> > >> > > > I agree with you David, I'm surprised too.
> > >> > > > Anyway, gdal_translate is run without compression options.
> > >> > > > I've written to the QGIS devs (it was the software) to verify
> > >> > > > what's happening with its raster file writer code...
> > >>
> > >> --
> > >> Geospatial professional services
> > >> http://even.rouault.free.fr/services.html
> > >
> > > --
> > > Giovanni Allegri
> > > http://about.me/giovanniallegri
> > > Twitter: https://twitter.com/_giohappy_
> > > blog: http://blog.spaziogis.it
> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/f0dba3bc/attachment-0001.html>

From giohappy at gmail.com  Sat Jul  5 11:35:45 2014
From: giohappy at gmail.com (G. Allegri)
Date: Sat, 5 Jul 2014 20:35:45 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
 of an ASCII Grid?
In-Reply-To: <CAB4g1=z1wBLQbPRfw1NAD6WMGgxQHjH3ncw08g0Rq4d1-26xtw@mail.gmail.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=xYfVqGGgzz9zEJgkB6hPdX1XtoDc1yOaYhFwPL_v13ag@mail.gmail.com>
	<CAB4g1=xHW32Cf5csX6A4TDK=d7tXBs1HizT+dLEubXgmVzg-UA@mail.gmail.com>
	<201407052022.45911.even.rouault@mines-paris.org>
	<CAB4g1=z1wBLQbPRfw1NAD6WMGgxQHjH3ncw08g0Rq4d1-26xtw@mail.gmail.com>
Message-ID: <CAB4g1=zQfG6gxYK1UrOZTk=2V5QnKxCN+EqgSwCt+QHuLR44VQ@mail.gmail.com>

Given that an ASCII Grid doesn't provide a data type, maybe the driver
choose the larger one, while the utilities guess it trying to fit the
values into a smaller type?

giovanni


2014-07-05 20:31 GMT+02:00 G. Allegri <giohappy at gmail.com>:

> I've debugged it, and it gets Float64 directly from GDALGetRasterDataType(
> GDALRasterBandH ).
> I've also tried opening it with Python GDAL and I get Float64.
> gdalinfo tells me Float32.
> I will try to send you a subset of it. It's not easy, as it is a heavy
> ASCII Grid and I don't want to alter it.
>
> giovanni
>
>
> 2014-07-05 20:22 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
>
> Le samedi 05 juillet 2014 20:18:50, G. Allegri a ?crit :
>> > Finally I've reached the point: GDAL's driver is opening the ASCII as
>> > Float64, consequently QGIS treats it this way.
>> > I wonder why gdalinfo and gdal_translate treat it as Float32 instead....
>>
>> If gdalinfo opens it as Float32, then it is Float32 for everybody. I guess
>> QGIS probably promotes Float32 to Float64.
>>
>> >
>> > giovanni
>> >
>> > 2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:
>> > > The problem was simpler then it appeared: I didn't realize that QGIS
>> > > output is Float64.
>> > > Yet I don't know why QGIS chosed to use this data type...
>> > >
>> > > giovanni
>> > >
>> > >
>> > > 2014-07-05 17:56 GMT+02:00 Even Rouault <even.rouault at mines-paris.org
>> >:
>> > >
>> > > Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
>> > >> > > QGIS is usually just calls to gdal, which makes this even more
>> > >> > > mysterious.
>> > >> >
>> > >> > Yes, in the end it uses gdal, but it chooses the way blocks are
>> read
>> > >> > and written.
>> > >> > If I remember correctly geotiff final sizes may depend on block
>> > >> > ordering and memory alignment.
>> > >>
>> > >> In that instance, the target geotiff has a natural block dimension
>> which
>> > >> is a
>> > >> raster line.
>> > >> If QGIS writes the geotiff by 256x256 blocks (this is just a guess.
>> I've
>> > >> not
>> > >> verified), the same raster line will be written several times. As it
>> is
>> > >> a compressed geotiff, the resulting raster line will be each time
>> being
>> > >> bigger
>> > >> since the initial zeros will be replaced by actual values. And if the
>> > >> new size
>> > >> of the line is bigger than its previous size, the new line will be
>> > >> rewritten
>> > >> at the end of the file, losing the space previously occupied.
>> > >>
>> > >> > Maybe this is the case, QGIS raster provider not doing the best at
>> > >> > this level? Don't know, but this discussion is for the QGIS ml ;)
>> > >> >
>> > >> > giovanni
>> > >> >
>> > >> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
>> > >> > > > I agree with you David, I'm surprised too.
>> > >> > > > Anyway, gdal_translate is run without compression options.
>> > >> > > > I've written to the QGIS devs (it was the software) to verify
>> > >> > > > what's happening with its raster file writer code...
>> > >>
>> > >> --
>> > >> Geospatial professional services
>> > >> http://even.rouault.free.fr/services.html
>> > >
>> > > --
>> > > Giovanni Allegri
>> > > http://about.me/giovanniallegri
>> > > Twitter: https://twitter.com/_giohappy_
>> > > blog: http://blog.spaziogis.it
>> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
>>
>> --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>>
>
>
>
> --
> Giovanni Allegri
> http://about.me/giovanniallegri
> Twitter: https://twitter.com/_giohappy_
> blog: http://blog.spaziogis.it
> GEO+ geomatica in Italia http://bit.ly/GEOplus
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/9ea9d7ab/attachment.html>

From even.rouault at mines-paris.org  Sat Jul  5 12:02:29 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 5 Jul 2014 21:02:29 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
	of an ASCII Grid?
In-Reply-To: <CAB4g1=zQfG6gxYK1UrOZTk=2V5QnKxCN+EqgSwCt+QHuLR44VQ@mail.gmail.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=z1wBLQbPRfw1NAD6WMGgxQHjH3ncw08g0Rq4d1-26xtw@mail.gmail.com>
	<CAB4g1=zQfG6gxYK1UrOZTk=2V5QnKxCN+EqgSwCt+QHuLR44VQ@mail.gmail.com>
Message-ID: <201407052102.29664.even.rouault@mines-paris.org>

Le samedi 05 juillet 2014 20:35:45, G. Allegri a ?crit :
> Given that an ASCII Grid doesn't provide a data type, maybe the driver
> choose the larger one, while the utilities guess it trying to fit the
> values into a smaller type?

No, GDAL does not do that sort of magic. Are you sure the GDAL version used by 
Python is the same as by the utilities ?

> 
> giovanni
> 
> 2014-07-05 20:31 GMT+02:00 G. Allegri <giohappy at gmail.com>:
> > I've debugged it, and it gets Float64 directly from
> > GDALGetRasterDataType( GDALRasterBandH ).
> > I've also tried opening it with Python GDAL and I get Float64.
> > gdalinfo tells me Float32.
> > I will try to send you a subset of it. It's not easy, as it is a heavy
> > ASCII Grid and I don't want to alter it.
> > 
> > giovanni
> > 
> > 
> > 2014-07-05 20:22 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > 
> > Le samedi 05 juillet 2014 20:18:50, G. Allegri a ?crit :
> >> > Finally I've reached the point: GDAL's driver is opening the ASCII as
> >> > Float64, consequently QGIS treats it this way.
> >> > I wonder why gdalinfo and gdal_translate treat it as Float32
> >> > instead....
> >> 
> >> If gdalinfo opens it as Float32, then it is Float32 for everybody. I
> >> guess QGIS probably promotes Float32 to Float64.
> >> 
> >> > giovanni
> >> > 
> >> > 2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:
> >> > > The problem was simpler then it appeared: I didn't realize that QGIS
> >> > > output is Float64.
> >> > > Yet I don't know why QGIS chosed to use this data type...
> >> > > 
> >> > > giovanni
> >> > > 
> >> > > 
> >> > > 2014-07-05 17:56 GMT+02:00 Even Rouault
> >> > > <even.rouault at mines-paris.org
> >> > > 
> >> > > Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
> >> > >> > > QGIS is usually just calls to gdal, which makes this even more
> >> > >> > > mysterious.
> >> > >> > 
> >> > >> > Yes, in the end it uses gdal, but it chooses the way blocks are
> >> 
> >> read
> >> 
> >> > >> > and written.
> >> > >> > If I remember correctly geotiff final sizes may depend on block
> >> > >> > ordering and memory alignment.
> >> > >> 
> >> > >> In that instance, the target geotiff has a natural block dimension
> >> 
> >> which
> >> 
> >> > >> is a
> >> > >> raster line.
> >> > >> If QGIS writes the geotiff by 256x256 blocks (this is just a guess.
> >> 
> >> I've
> >> 
> >> > >> not
> >> > >> verified), the same raster line will be written several times. As
> >> > >> it
> >> 
> >> is
> >> 
> >> > >> a compressed geotiff, the resulting raster line will be each time
> >> 
> >> being
> >> 
> >> > >> bigger
> >> > >> since the initial zeros will be replaced by actual values. And if
> >> > >> the new size
> >> > >> of the line is bigger than its previous size, the new line will be
> >> > >> rewritten
> >> > >> at the end of the file, losing the space previously occupied.
> >> > >> 
> >> > >> > Maybe this is the case, QGIS raster provider not doing the best
> >> > >> > at this level? Don't know, but this discussion is for the QGIS
> >> > >> > ml ;)
> >> > >> > 
> >> > >> > giovanni
> >> > >> > 
> >> > >> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
> >> > >> > > > I agree with you David, I'm surprised too.
> >> > >> > > > Anyway, gdal_translate is run without compression options.
> >> > >> > > > I've written to the QGIS devs (it was the software) to verify
> >> > >> > > > what's happening with its raster file writer code...
> >> > >> 
> >> > >> --
> >> > >> Geospatial professional services
> >> > >> http://even.rouault.free.fr/services.html
> >> > > 
> >> > > --
> >> > > Giovanni Allegri
> >> > > http://about.me/giovanniallegri
> >> > > Twitter: https://twitter.com/_giohappy_
> >> > > blog: http://blog.spaziogis.it
> >> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
> >> 
> >> --
> >> Geospatial professional services
> >> http://even.rouault.free.fr/services.html
> > 
> > --
> > Giovanni Allegri
> > http://about.me/giovanniallegri
> > Twitter: https://twitter.com/_giohappy_
> > blog: http://blog.spaziogis.it
> > GEO+ geomatica in Italia http://bit.ly/GEOplus

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From giohappy at gmail.com  Sat Jul  5 12:43:12 2014
From: giohappy at gmail.com (G. Allegri)
Date: Sat, 5 Jul 2014 21:43:12 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
 of an ASCII Grid?
In-Reply-To: <201407052102.29664.even.rouault@mines-paris.org>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=z1wBLQbPRfw1NAD6WMGgxQHjH3ncw08g0Rq4d1-26xtw@mail.gmail.com>
	<CAB4g1=zQfG6gxYK1UrOZTk=2V5QnKxCN+EqgSwCt+QHuLR44VQ@mail.gmail.com>
	<201407052102.29664.even.rouault@mines-paris.org>
Message-ID: <CAB4g1=z6D1TX7oM=dxEMMF=dR+YaRy9XTZoAaYkOdwTp8W9wUg@mail.gmail.com>

ldd tells me that both QGIS and gdalinfo point to the same gdal libs

ldd /usr/bin/qgis.bin | grep gdal
libgdal.so.1 => /usr/lib/libgdal.so.1 (0x0284b000)

ldd /usr/bin/gdalinfo | grep gdal
libgdal.so.1 => /usr/lib/libgdal.so.1 (0x00c5f000)

But I must correct about Python. Running it against the right modules it
reports raster band data type as GDT_Float32.

In QGIS Float64 comes out here:
https://github.com/qgis/QGIS/blob/master/src/providers/gdal/qgsgdalprovider.cpp#L1076

giovanni




2014-07-05 21:02 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

> Le samedi 05 juillet 2014 20:35:45, G. Allegri a ?crit :
> > Given that an ASCII Grid doesn't provide a data type, maybe the driver
> > choose the larger one, while the utilities guess it trying to fit the
> > values into a smaller type?
>
> No, GDAL does not do that sort of magic. Are you sure the GDAL version
> used by
> Python is the same as by the utilities ?
>
> >
> > giovanni
> >
> > 2014-07-05 20:31 GMT+02:00 G. Allegri <giohappy at gmail.com>:
> > > I've debugged it, and it gets Float64 directly from
> > > GDALGetRasterDataType( GDALRasterBandH ).
> > > I've also tried opening it with Python GDAL and I get Float64.
> > > gdalinfo tells me Float32.
> > > I will try to send you a subset of it. It's not easy, as it is a heavy
> > > ASCII Grid and I don't want to alter it.
> > >
> > > giovanni
> > >
> > >
> > > 2014-07-05 20:22 GMT+02:00 Even Rouault <even.rouault at mines-paris.org
> >:
> > >
> > > Le samedi 05 juillet 2014 20:18:50, G. Allegri a ?crit :
> > >> > Finally I've reached the point: GDAL's driver is opening the ASCII
> as
> > >> > Float64, consequently QGIS treats it this way.
> > >> > I wonder why gdalinfo and gdal_translate treat it as Float32
> > >> > instead....
> > >>
> > >> If gdalinfo opens it as Float32, then it is Float32 for everybody. I
> > >> guess QGIS probably promotes Float32 to Float64.
> > >>
> > >> > giovanni
> > >> >
> > >> > 2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:
> > >> > > The problem was simpler then it appeared: I didn't realize that
> QGIS
> > >> > > output is Float64.
> > >> > > Yet I don't know why QGIS chosed to use this data type...
> > >> > >
> > >> > > giovanni
> > >> > >
> > >> > >
> > >> > > 2014-07-05 17:56 GMT+02:00 Even Rouault
> > >> > > <even.rouault at mines-paris.org
> > >> > >
> > >> > > Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
> > >> > >> > > QGIS is usually just calls to gdal, which makes this even
> more
> > >> > >> > > mysterious.
> > >> > >> >
> > >> > >> > Yes, in the end it uses gdal, but it chooses the way blocks are
> > >>
> > >> read
> > >>
> > >> > >> > and written.
> > >> > >> > If I remember correctly geotiff final sizes may depend on block
> > >> > >> > ordering and memory alignment.
> > >> > >>
> > >> > >> In that instance, the target geotiff has a natural block
> dimension
> > >>
> > >> which
> > >>
> > >> > >> is a
> > >> > >> raster line.
> > >> > >> If QGIS writes the geotiff by 256x256 blocks (this is just a
> guess.
> > >>
> > >> I've
> > >>
> > >> > >> not
> > >> > >> verified), the same raster line will be written several times. As
> > >> > >> it
> > >>
> > >> is
> > >>
> > >> > >> a compressed geotiff, the resulting raster line will be each time
> > >>
> > >> being
> > >>
> > >> > >> bigger
> > >> > >> since the initial zeros will be replaced by actual values. And if
> > >> > >> the new size
> > >> > >> of the line is bigger than its previous size, the new line will
> be
> > >> > >> rewritten
> > >> > >> at the end of the file, losing the space previously occupied.
> > >> > >>
> > >> > >> > Maybe this is the case, QGIS raster provider not doing the best
> > >> > >> > at this level? Don't know, but this discussion is for the QGIS
> > >> > >> > ml ;)
> > >> > >> >
> > >> > >> > giovanni
> > >> > >> >
> > >> > >> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
> > >> > >> > > > I agree with you David, I'm surprised too.
> > >> > >> > > > Anyway, gdal_translate is run without compression options.
> > >> > >> > > > I've written to the QGIS devs (it was the software) to
> verify
> > >> > >> > > > what's happening with its raster file writer code...
> > >> > >>
> > >> > >> --
> > >> > >> Geospatial professional services
> > >> > >> http://even.rouault.free.fr/services.html
> > >> > >
> > >> > > --
> > >> > > Giovanni Allegri
> > >> > > http://about.me/giovanniallegri
> > >> > > Twitter: https://twitter.com/_giohappy_
> > >> > > blog: http://blog.spaziogis.it
> > >> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
> > >>
> > >> --
> > >> Geospatial professional services
> > >> http://even.rouault.free.fr/services.html
> > >
> > > --
> > > Giovanni Allegri
> > > http://about.me/giovanniallegri
> > > Twitter: https://twitter.com/_giohappy_
> > > blog: http://blog.spaziogis.it
> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/337fa560/attachment.html>

From nhv at cape.com  Sat Jul  5 12:49:59 2014
From: nhv at cape.com (Norman Vine)
Date: Sat, 5 Jul 2014 15:49:59 -0400
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
	of an ASCII Grid?
In-Reply-To: <CAB4g1=z6D1TX7oM=dxEMMF=dR+YaRy9XTZoAaYkOdwTp8W9wUg@mail.gmail.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=z1wBLQbPRfw1NAD6WMGgxQHjH3ncw08g0Rq4d1-26xtw@mail.gmail.com>
	<CAB4g1=zQfG6gxYK1UrOZTk=2V5QnKxCN+EqgSwCt+QHuLR44VQ@mail.gmail.com>
	<201407052102.29664.even.rouault@mines-paris.org>
	<CAB4g1=z6D1TX7oM=dxEMMF=dR+YaRy9XTZoAaYkOdwTp8W9wUg@mail.gmail.com>
Message-ID: <AD5DDD1B-8CD5-4FA2-9B58-3F293868BB8A@cape.com>

This question is better addressed to the QGis-dev list
as QGis is promoting the Float32 type to be Float64 type

https://github.com/qgis/QGIS/blob/master/src/providers/gdal/qgsgdalprovider.cpp#L1103


 Jul 5, 2014, at 3:43 PM, "G. Allegri" <giohappy at gmail.com> wrote:

> ldd tells me that both QGIS and gdalinfo point to the same gdal libs
> 
> ldd /usr/bin/qgis.bin | grep gdal
> libgdal.so.1 => /usr/lib/libgdal.so.1 (0x0284b000)
> 
> ldd /usr/bin/gdalinfo | grep gdal
> libgdal.so.1 => /usr/lib/libgdal.so.1 (0x00c5f000)
> 
> But I must correct about Python. Running it against the right modules it reports raster band data type as GDT_Float32.
> 
> In QGIS Float64 comes out here: https://github.com/qgis/QGIS/blob/master/src/providers/gdal/qgsgdalprovider.cpp#L1076
> 
> giovanni
> 
> 
> 
> 
> 2014-07-05 21:02 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> Le samedi 05 juillet 2014 20:35:45, G. Allegri a ?crit :
> > Given that an ASCII Grid doesn't provide a data type, maybe the driver
> > choose the larger one, while the utilities guess it trying to fit the
> > values into a smaller type?
> 
> No, GDAL does not do that sort of magic. Are you sure the GDAL version used by
> Python is the same as by the utilities ?
> 
> >
> > giovanni
> >
> > 2014-07-05 20:31 GMT+02:00 G. Allegri <giohappy at gmail.com>:
> > > I've debugged it, and it gets Float64 directly from
> > > GDALGetRasterDataType( GDALRasterBandH ).
> > > I've also tried opening it with Python GDAL and I get Float64.
> > > gdalinfo tells me Float32.
> > > I will try to send you a subset of it. It's not easy, as it is a heavy
> > > ASCII Grid and I don't want to alter it.
> > >
> > > giovanni
> > >
> > >
> > > 2014-07-05 20:22 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> > >
> > > Le samedi 05 juillet 2014 20:18:50, G. Allegri a ?crit :
> > >> > Finally I've reached the point: GDAL's driver is opening the ASCII as
> > >> > Float64, consequently QGIS treats it this way.
> > >> > I wonder why gdalinfo and gdal_translate treat it as Float32
> > >> > instead....
> > >>
> > >> If gdalinfo opens it as Float32, then it is Float32 for everybody. I
> > >> guess QGIS probably promotes Float32 to Float64.
> > >>
> > >> > giovanni
> > >> >
> > >> > 2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:
> > >> > > The problem was simpler then it appeared: I didn't realize that QGIS
> > >> > > output is Float64.
> > >> > > Yet I don't know why QGIS chosed to use this data type...
> > >> > >
> > >> > > giovanni
> > >> > >
> > >> > >
> > >> > > 2014-07-05 17:56 GMT+02:00 Even Rouault
> > >> > > <even.rouault at mines-paris.org
> > >> > >
> > >> > > Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
> > >> > >> > > QGIS is usually just calls to gdal, which makes this even more
> > >> > >> > > mysterious.
> > >> > >> >
> > >> > >> > Yes, in the end it uses gdal, but it chooses the way blocks are
> > >>
> > >> read
> > >>
> > >> > >> > and written.
> > >> > >> > If I remember correctly geotiff final sizes may depend on block
> > >> > >> > ordering and memory alignment.
> > >> > >>
> > >> > >> In that instance, the target geotiff has a natural block dimension
> > >>
> > >> which
> > >>
> > >> > >> is a
> > >> > >> raster line.
> > >> > >> If QGIS writes the geotiff by 256x256 blocks (this is just a guess.
> > >>
> > >> I've
> > >>
> > >> > >> not
> > >> > >> verified), the same raster line will be written several times. As
> > >> > >> it
> > >>
> > >> is
> > >>
> > >> > >> a compressed geotiff, the resulting raster line will be each time
> > >>
> > >> being
> > >>
> > >> > >> bigger
> > >> > >> since the initial zeros will be replaced by actual values. And if
> > >> > >> the new size
> > >> > >> of the line is bigger than its previous size, the new line will be
> > >> > >> rewritten
> > >> > >> at the end of the file, losing the space previously occupied.
> > >> > >>
> > >> > >> > Maybe this is the case, QGIS raster provider not doing the best
> > >> > >> > at this level? Don't know, but this discussion is for the QGIS
> > >> > >> > ml ;)
> > >> > >> >
> > >> > >> > giovanni
> > >> > >> >
> > >> > >> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
> > >> > >> > > > I agree with you David, I'm surprised too.
> > >> > >> > > > Anyway, gdal_translate is run without compression options.
> > >> > >> > > > I've written to the QGIS devs (it was the software) to verify
> > >> > >> > > > what's happening with its raster file writer code...
> > >> > >>
> > >> > >> --
> > >> > >> Geospatial professional services
> > >> > >> http://even.rouault.free.fr/services.html
> > >> > >
> > >> > > --
> > >> > > Giovanni Allegri
> > >> > > http://about.me/giovanniallegri
> > >> > > Twitter: https://twitter.com/_giohappy_
> > >> > > blog: http://blog.spaziogis.it
> > >> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
> > >>
> > >> --
> > >> Geospatial professional services
> > >> http://even.rouault.free.fr/services.html
> > >
> > > --
> > > Giovanni Allegri
> > > http://about.me/giovanniallegri
> > > Twitter: https://twitter.com/_giohappy_
> > > blog: http://blog.spaziogis.it
> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
> 
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> 
> 
> 
> -- 
> Giovanni Allegri
> http://about.me/giovanniallegri
> Twitter: https://twitter.com/_giohappy_
> blog: http://blog.spaziogis.it
> GEO+ geomatica in Italia http://bit.ly/GEOplus
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/27d57869/attachment-0001.html>

From nhv at cape.com  Sat Jul  5 14:42:10 2014
From: nhv at cape.com (Norman Vine)
Date: Sat, 5 Jul 2014 17:42:10 -0400
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
	of an ASCII Grid?
In-Reply-To: <AD5DDD1B-8CD5-4FA2-9B58-3F293868BB8A@cape.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=z1wBLQbPRfw1NAD6WMGgxQHjH3ncw08g0Rq4d1-26xtw@mail.gmail.com>
	<CAB4g1=zQfG6gxYK1UrOZTk=2V5QnKxCN+EqgSwCt+QHuLR44VQ@mail.gmail.com>
	<201407052102.29664.even.rouault@mines-paris.org>
	<CAB4g1=z6D1TX7oM=dxEMMF=dR+YaRy9XTZoAaYkOdwTp8W9wUg@mail.gmail.com>
	<AD5DDD1B-8CD5-4FA2-9B58-3F293868BB8A@cape.com>
Message-ID: <6E6D91BC-0E8E-485D-B1F5-6AD5ADFB6413@cape.com>

My mistake

please disregard

Norman

On Jul 5, 2014, at 3:49 PM, Norman Vine <nhv at cape.com> wrote:

> This question is better addressed to the QGis-dev list
> as QGis is promoting the Float32 type to be Float64 type
> 
> https://github.com/qgis/QGIS/blob/master/src/providers/gdal/qgsgdalprovider.cpp#L1103
> 
> 
>  Jul 5, 2014, at 3:43 PM, "G. Allegri" <giohappy at gmail.com> wrote:
> 
>> ldd tells me that both QGIS and gdalinfo point to the same gdal libs
>> 
>> ldd /usr/bin/qgis.bin | grep gdal
>> libgdal.so.1 => /usr/lib/libgdal.so.1 (0x0284b000)
>> 
>> ldd /usr/bin/gdalinfo | grep gdal
>> libgdal.so.1 => /usr/lib/libgdal.so.1 (0x00c5f000)
>> 
>> But I must correct about Python. Running it against the right modules it reports raster band data type as GDT_Float32.
>> 
>> In QGIS Float64 comes out here: https://github.com/qgis/QGIS/blob/master/src/providers/gdal/qgsgdalprovider.cpp#L1076
>> 
>> giovanni
>> 
>> 
>> 
>> 
>> 2014-07-05 21:02 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
>> Le samedi 05 juillet 2014 20:35:45, G. Allegri a ?crit :
>> > Given that an ASCII Grid doesn't provide a data type, maybe the driver
>> > choose the larger one, while the utilities guess it trying to fit the
>> > values into a smaller type?
>> 
>> No, GDAL does not do that sort of magic. Are you sure the GDAL version used by
>> Python is the same as by the utilities ?
>> 
>> >
>> > giovanni
>> >
>> > 2014-07-05 20:31 GMT+02:00 G. Allegri <giohappy at gmail.com>:
>> > > I've debugged it, and it gets Float64 directly from
>> > > GDALGetRasterDataType( GDALRasterBandH ).
>> > > I've also tried opening it with Python GDAL and I get Float64.
>> > > gdalinfo tells me Float32.
>> > > I will try to send you a subset of it. It's not easy, as it is a heavy
>> > > ASCII Grid and I don't want to alter it.
>> > >
>> > > giovanni
>> > >
>> > >
>> > > 2014-07-05 20:22 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
>> > >
>> > > Le samedi 05 juillet 2014 20:18:50, G. Allegri a ?crit :
>> > >> > Finally I've reached the point: GDAL's driver is opening the ASCII as
>> > >> > Float64, consequently QGIS treats it this way.
>> > >> > I wonder why gdalinfo and gdal_translate treat it as Float32
>> > >> > instead....
>> > >>
>> > >> If gdalinfo opens it as Float32, then it is Float32 for everybody. I
>> > >> guess QGIS probably promotes Float32 to Float64.
>> > >>
>> > >> > giovanni
>> > >> >
>> > >> > 2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:
>> > >> > > The problem was simpler then it appeared: I didn't realize that QGIS
>> > >> > > output is Float64.
>> > >> > > Yet I don't know why QGIS chosed to use this data type...
>> > >> > >
>> > >> > > giovanni
>> > >> > >
>> > >> > >
>> > >> > > 2014-07-05 17:56 GMT+02:00 Even Rouault
>> > >> > > <even.rouault at mines-paris.org
>> > >> > >
>> > >> > > Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
>> > >> > >> > > QGIS is usually just calls to gdal, which makes this even more
>> > >> > >> > > mysterious.
>> > >> > >> >
>> > >> > >> > Yes, in the end it uses gdal, but it chooses the way blocks are
>> > >>
>> > >> read
>> > >>
>> > >> > >> > and written.
>> > >> > >> > If I remember correctly geotiff final sizes may depend on block
>> > >> > >> > ordering and memory alignment.
>> > >> > >>
>> > >> > >> In that instance, the target geotiff has a natural block dimension
>> > >>
>> > >> which
>> > >>
>> > >> > >> is a
>> > >> > >> raster line.
>> > >> > >> If QGIS writes the geotiff by 256x256 blocks (this is just a guess.
>> > >>
>> > >> I've
>> > >>
>> > >> > >> not
>> > >> > >> verified), the same raster line will be written several times. As
>> > >> > >> it
>> > >>
>> > >> is
>> > >>
>> > >> > >> a compressed geotiff, the resulting raster line will be each time
>> > >>
>> > >> being
>> > >>
>> > >> > >> bigger
>> > >> > >> since the initial zeros will be replaced by actual values. And if
>> > >> > >> the new size
>> > >> > >> of the line is bigger than its previous size, the new line will be
>> > >> > >> rewritten
>> > >> > >> at the end of the file, losing the space previously occupied.
>> > >> > >>
>> > >> > >> > Maybe this is the case, QGIS raster provider not doing the best
>> > >> > >> > at this level? Don't know, but this discussion is for the QGIS
>> > >> > >> > ml ;)
>> > >> > >> >
>> > >> > >> > giovanni
>> > >> > >> >
>> > >> > >> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
>> > >> > >> > > > I agree with you David, I'm surprised too.
>> > >> > >> > > > Anyway, gdal_translate is run without compression options.
>> > >> > >> > > > I've written to the QGIS devs (it was the software) to verify
>> > >> > >> > > > what's happening with its raster file writer code...
>> > >> > >>
>> > >> > >> --
>> > >> > >> Geospatial professional services
>> > >> > >> http://even.rouault.free.fr/services.html
>> > >> > >
>> > >> > > --
>> > >> > > Giovanni Allegri
>> > >> > > http://about.me/giovanniallegri
>> > >> > > Twitter: https://twitter.com/_giohappy_
>> > >> > > blog: http://blog.spaziogis.it
>> > >> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
>> > >>
>> > >> --
>> > >> Geospatial professional services
>> > >> http://even.rouault.free.fr/services.html
>> > >
>> > > --
>> > > Giovanni Allegri
>> > > http://about.me/giovanniallegri
>> > > Twitter: https://twitter.com/_giohappy_
>> > > blog: http://blog.spaziogis.it
>> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
>> 
>> --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>> 
>> 
>> 
>> -- 
>> Giovanni Allegri
>> http://about.me/giovanniallegri
>> Twitter: https://twitter.com/_giohappy_
>> blog: http://blog.spaziogis.it
>> GEO+ geomatica in Italia http://bit.ly/GEOplus
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140705/717ee5cc/attachment.html>

From varunsaraf14 at gmail.com  Mon Jul  7 11:24:36 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Mon, 7 Jul 2014 23:54:36 +0530
Subject: [gdal-dev] GSoC 2014 Weekly Report 7 : GDAL PostGIS Raster driver
Message-ID: <CAPfr+rvd60Lukb9L7yPvZPnpk-PKBmMn_iF+UMRuWqJYXoMbpw@mail.gmail.com>

 Hi,

Below is my seventh weekly report and link to the revised project timeline.

*What did I do this week?*

   - Implemented calls from IRasterIO to the methods which are writing the
   query.
   - I have decided to work on the overviews later on when the rest of the
   code cycle is working fine.

*What do I plan on doing next week?*

   - Continue to modify IRasterIO method to be able to call different
   methods depending on the query to be executed and handle different sized
   raster regions.

*Am I blocked on anything?*

   - I am blocked with the overviews and will continue working on them
   later.

Link to revised timeline :
https://github.com/varunsaraf/postgis_raster/wiki/Timeline-Review
Link to weekly report :
https://github.com/varunsaraf/postgis_raster/wiki/Report-7
Link to code repository : https://github.com/varunsaraf/postgis_raster
More details at : http://trac.osgeo.org/gdal/wiki/PostGIS_raster_driver

Regards,
Varun Saraf
Lab for Spatial Informatics
IIIT Hyderabad, India
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140707/cdaeede6/attachment.html>

From giohappy at gmail.com  Tue Jul  8 02:07:04 2014
From: giohappy at gmail.com (G. Allegri)
Date: Tue, 8 Jul 2014 11:07:04 +0200
Subject: [gdal-dev] how can a Geotiff occupy three times the disk space
 of an ASCII Grid?
In-Reply-To: <CAB4g1=z6D1TX7oM=dxEMMF=dR+YaRy9XTZoAaYkOdwTp8W9wUg@mail.gmail.com>
References: <CAB4g1=xpRcv2Y6gELEmzhH7ai5rXnPdFJUho5YzAmC7S8Exa5w@mail.gmail.com>
	<CAB4g1=z1wBLQbPRfw1NAD6WMGgxQHjH3ncw08g0Rq4d1-26xtw@mail.gmail.com>
	<CAB4g1=zQfG6gxYK1UrOZTk=2V5QnKxCN+EqgSwCt+QHuLR44VQ@mail.gmail.com>
	<201407052102.29664.even.rouault@mines-paris.org>
	<CAB4g1=z6D1TX7oM=dxEMMF=dR+YaRy9XTZoAaYkOdwTp8W9wUg@mail.gmail.com>
Message-ID: <CAB4g1=xdDK-qwk0z75N=nO6XjbeYs9516WSunm4HL_soKto5=g@mail.gmail.com>

I've extracted a subset from the original ASCII:
https://dl.dropboxusercontent.com/u/13861666/FI_clipped.asc
I'm obtaining the same behaviour, so it can be a test case.

giovanni


2014-07-05 21:43 GMT+02:00 G. Allegri <giohappy at gmail.com>:

> ldd tells me that both QGIS and gdalinfo point to the same gdal libs
>
> ldd /usr/bin/qgis.bin | grep gdal
> libgdal.so.1 => /usr/lib/libgdal.so.1 (0x0284b000)
>
> ldd /usr/bin/gdalinfo | grep gdal
> libgdal.so.1 => /usr/lib/libgdal.so.1 (0x00c5f000)
>
> But I must correct about Python. Running it against the right modules it
> reports raster band data type as GDT_Float32.
>
> In QGIS Float64 comes out here:
> https://github.com/qgis/QGIS/blob/master/src/providers/gdal/qgsgdalprovider.cpp#L1076
>
> giovanni
>
>
>
>
> 2014-07-05 21:02 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
>
> Le samedi 05 juillet 2014 20:35:45, G. Allegri a ?crit :
>> > Given that an ASCII Grid doesn't provide a data type, maybe the driver
>> > choose the larger one, while the utilities guess it trying to fit the
>> > values into a smaller type?
>>
>> No, GDAL does not do that sort of magic. Are you sure the GDAL version
>> used by
>> Python is the same as by the utilities ?
>>
>> >
>> > giovanni
>> >
>> > 2014-07-05 20:31 GMT+02:00 G. Allegri <giohappy at gmail.com>:
>> > > I've debugged it, and it gets Float64 directly from
>> > > GDALGetRasterDataType( GDALRasterBandH ).
>> > > I've also tried opening it with Python GDAL and I get Float64.
>> > > gdalinfo tells me Float32.
>> > > I will try to send you a subset of it. It's not easy, as it is a heavy
>> > > ASCII Grid and I don't want to alter it.
>> > >
>> > > giovanni
>> > >
>> > >
>> > > 2014-07-05 20:22 GMT+02:00 Even Rouault <even.rouault at mines-paris.org
>> >:
>> > >
>> > > Le samedi 05 juillet 2014 20:18:50, G. Allegri a ?crit :
>> > >> > Finally I've reached the point: GDAL's driver is opening the ASCII
>> as
>> > >> > Float64, consequently QGIS treats it this way.
>> > >> > I wonder why gdalinfo and gdal_translate treat it as Float32
>> > >> > instead....
>> > >>
>> > >> If gdalinfo opens it as Float32, then it is Float32 for everybody. I
>> > >> guess QGIS probably promotes Float32 to Float64.
>> > >>
>> > >> > giovanni
>> > >> >
>> > >> > 2014-07-05 18:53 GMT+02:00 G. Allegri <giohappy at gmail.com>:
>> > >> > > The problem was simpler then it appeared: I didn't realize that
>> QGIS
>> > >> > > output is Float64.
>> > >> > > Yet I don't know why QGIS chosed to use this data type...
>> > >> > >
>> > >> > > giovanni
>> > >> > >
>> > >> > >
>> > >> > > 2014-07-05 17:56 GMT+02:00 Even Rouault
>> > >> > > <even.rouault at mines-paris.org
>> > >> > >
>> > >> > > Le samedi 05 juillet 2014 17:25:48, G. Allegri a ?crit :
>> > >> > >> > > QGIS is usually just calls to gdal, which makes this even
>> more
>> > >> > >> > > mysterious.
>> > >> > >> >
>> > >> > >> > Yes, in the end it uses gdal, but it chooses the way blocks
>> are
>> > >>
>> > >> read
>> > >>
>> > >> > >> > and written.
>> > >> > >> > If I remember correctly geotiff final sizes may depend on
>> block
>> > >> > >> > ordering and memory alignment.
>> > >> > >>
>> > >> > >> In that instance, the target geotiff has a natural block
>> dimension
>> > >>
>> > >> which
>> > >>
>> > >> > >> is a
>> > >> > >> raster line.
>> > >> > >> If QGIS writes the geotiff by 256x256 blocks (this is just a
>> guess.
>> > >>
>> > >> I've
>> > >>
>> > >> > >> not
>> > >> > >> verified), the same raster line will be written several times.
>> As
>> > >> > >> it
>> > >>
>> > >> is
>> > >>
>> > >> > >> a compressed geotiff, the resulting raster line will be each
>> time
>> > >>
>> > >> being
>> > >>
>> > >> > >> bigger
>> > >> > >> since the initial zeros will be replaced by actual values. And
>> if
>> > >> > >> the new size
>> > >> > >> of the line is bigger than its previous size, the new line will
>> be
>> > >> > >> rewritten
>> > >> > >> at the end of the file, losing the space previously occupied.
>> > >> > >>
>> > >> > >> > Maybe this is the case, QGIS raster provider not doing the
>> best
>> > >> > >> > at this level? Don't know, but this discussion is for the QGIS
>> > >> > >> > ml ;)
>> > >> > >> >
>> > >> > >> > giovanni
>> > >> > >> >
>> > >> > >> > > On 7/5/2014 9:09 AM, G. Allegri wrote:
>> > >> > >> > > > I agree with you David, I'm surprised too.
>> > >> > >> > > > Anyway, gdal_translate is run without compression options.
>> > >> > >> > > > I've written to the QGIS devs (it was the software) to
>> verify
>> > >> > >> > > > what's happening with its raster file writer code...
>> > >> > >>
>> > >> > >> --
>> > >> > >> Geospatial professional services
>> > >> > >> http://even.rouault.free.fr/services.html
>> > >> > >
>> > >> > > --
>> > >> > > Giovanni Allegri
>> > >> > > http://about.me/giovanniallegri
>> > >> > > Twitter: https://twitter.com/_giohappy_
>> > >> > > blog: http://blog.spaziogis.it
>> > >> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
>> > >>
>> > >> --
>> > >> Geospatial professional services
>> > >> http://even.rouault.free.fr/services.html
>> > >
>> > > --
>> > > Giovanni Allegri
>> > > http://about.me/giovanniallegri
>> > > Twitter: https://twitter.com/_giohappy_
>> > > blog: http://blog.spaziogis.it
>> > > GEO+ geomatica in Italia http://bit.ly/GEOplus
>>
>> --
>> Geospatial professional services
>> http://even.rouault.free.fr/services.html
>>
>
>
>
> --
> Giovanni Allegri
> http://about.me/giovanniallegri
> Twitter: https://twitter.com/_giohappy_
> blog: http://blog.spaziogis.it
> GEO+ geomatica in Italia http://bit.ly/GEOplus
>



-- 
Giovanni Allegri
http://about.me/giovanniallegri
Twitter: https://twitter.com/_giohappy_
blog: http://blog.spaziogis.it
GEO+ geomatica in Italia http://bit.ly/GEOplus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140708/f82b8869/attachment.html>

From baspysmit at gmail.com  Tue Jul  8 09:20:11 2014
From: baspysmit at gmail.com (bas smit)
Date: Wed, 9 Jul 2014 01:20:11 +0900
Subject: [gdal-dev] DIMAP driver not working correctly
Message-ID: <CAJ0c-gcEemp3ZP00Bp93GA854JTEQNnm5PnTKorKu8jyOT+nsw@mail.gmail.com>

When I tried to open SPOT 5 DIMAP format imagery using Python bindings as
gdal.Open(infile, GA_ReadOnly), it can not display the map info
(geotransform and projection), and the sequence of band numbers are
different.

Also, I tried to convert it into GeoTiff  format using gdal_translate.exe;
the same problem exists.

When I tried to wrap the original DIMAP format imagery into 'wgs84' using
gdal_warp.exe,  it produces the map information, but the output map
information is different to the result from ENVI software. In addition the
range of values in one band (0-255) differs with the values given by ENVI
software(55-255).

It would be great if GDAL can open the DIMAP format correctly.

I have been using "gdal-111-1500-x64-core.exe" and
"GDAL-1.11.0.win-amd64-py2.7.exe".

Bas Smit
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140709/e9088aa5/attachment.html>

From jorgearevalo at libregis.org  Tue Jul  8 15:13:18 2014
From: jorgearevalo at libregis.org (Jorge Arevalo)
Date: Wed, 9 Jul 2014 00:13:18 +0200
Subject: [gdal-dev] Error with VagrantFile due to postgis-gdal dependency
Message-ID: <CAMhtMNNyJZmSRuF6MJaOXUSbUK2Nnyuu7pXojb31cxhcjkLjKw@mail.gmail.com>

Hello,

I'm testing the VagrantFile included in GDAL trunk to create a development
environment for GDAL, based on Vagrant. I'm following the instructions [1],
but getting an error [2]

Looks like the problem is the dependency between PostGIS and GDAL. The
vagrant script tries to install PostGIS before GDAL, but PostGIS depends on
GDAL (I think it's just a PostGIS Raster issue, not sure about it).

If I comment the PostGIS part in the VagrantFile, it works. Tested with
trunk and 1.11.0 versions. Using Vagrant 1.5.4 on a Mac OS Mountain Lion
machine.

Is anyone else having the same problem?

Best regards,

-- 
Jorge Arevalo
Freelance developer

http://about.me/jorgeas80

[1] http://trac.osgeo.org/gdal/wiki/Vagrant
[2]
https://dl.dropboxusercontent.com/u/6599273/errors/gdal/vagrant_gdal_error.log
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140709/d2c33111/attachment.html>

From even.rouault at mines-paris.org  Tue Jul  8 15:23:09 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Jul 2014 00:23:09 +0200
Subject: [gdal-dev] Error with VagrantFile due to postgis-gdal dependency
In-Reply-To: <CAMhtMNNyJZmSRuF6MJaOXUSbUK2Nnyuu7pXojb31cxhcjkLjKw@mail.gmail.com>
References: <CAMhtMNNyJZmSRuF6MJaOXUSbUK2Nnyuu7pXojb31cxhcjkLjKw@mail.gmail.com>
Message-ID: <201407090023.09988.even.rouault@mines-paris.org>

Le mercredi 09 juillet 2014 00:13:18, Jorge Arevalo a ?crit :
> Hello,
> 
> I'm testing the VagrantFile included in GDAL trunk to create a development
> environment for GDAL, based on Vagrant. I'm following the instructions [1],
> but getting an error [2]
> 
> Looks like the problem is the dependency between PostGIS and GDAL. The
> vagrant script tries to install PostGIS before GDAL, but PostGIS depends on
> GDAL (I think it's just a PostGIS Raster issue, not sure about it).

Jorge,

That should not be a problem. At least that was not one when I set up the 
vagrant config. It is perhaps a breakage in ubuntu-gis. Perhaps you should 
check with ubuntu at lists.osgeo.org if it is known.

The autotest suite needs postgis to test the PG driver.
The custom GDAL built by Vagrant is designed to replace the version that comes 
with ubuntu-gis.

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From glendening at drjack.net  Tue Jul  8 20:10:44 2014
From: glendening at drjack.net (John W. Glendening)
Date: Tue, 08 Jul 2014 20:10:44 -0700
Subject: [gdal-dev] Incorrect "land cover" color from USGS GeoPDF
Message-ID: <1404875444.10558.3.camel@HP-GLENDENI>


Using gdal_translate to extract the non-image, non-border map from a USGS GeoPDF

  gdal_translate CA_Lopez_Point_OE_W_20120306_TM_geo.pdf o36121a6.tif --config GDAL_PDF_LAYERS_OFF "Map_Collar","Map_Frame.Projection_and_Grids","Images"

I find that while the colors of the contour lines and text match those
seen when viewing the file with the Adobe reader, the "Land_Cover"
layer comes out gray instead of green (per the Adobe reader).  Can't
find any info regarding this so decided to ask here.  FYI the input
file is available at
 http://bigsurtrailmap.net/TEMP/CA_Lopez_Point_OE_W_20120306_TM_geo.pdf
I am running GDAL 1.11.0 compiled on a Ubuntu 14.04 machine. 





From baspysmit at gmail.com  Wed Jul  9 01:49:34 2014
From: baspysmit at gmail.com (bas smit)
Date: Wed, 9 Jul 2014 17:49:34 +0900
Subject: [gdal-dev] Range of band value changes when warping
Message-ID: <CAJ0c-gd+H=RxLFAZoSH5q6SF0qpnyjDaZXj+vpULe-VLcmO-xQ@mail.gmail.com>

When the source image band having pixel values in the range of 52 and 207
is warped using the following command:
gdal_warp -t_srs wgs84 -r near in_file out_file

The resulted band has the pixel values in the range of 0 and 255 How can I
make the range unchanged during warp?

Bas Smit
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140709/ea9d1ffa/attachment.html>

From even.rouault at mines-paris.org  Wed Jul  9 02:22:17 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 9 Jul 2014 11:22:17 +0200
Subject: [gdal-dev] Range of band value changes when warping
In-Reply-To: <CAJ0c-gd+H=RxLFAZoSH5q6SF0qpnyjDaZXj+vpULe-VLcmO-xQ@mail.gmail.com>
References: <CAJ0c-gd+H=RxLFAZoSH5q6SF0qpnyjDaZXj+vpULe-VLcmO-xQ@mail.gmail.com>
Message-ID: <201407091122.18048.even.rouault@mines-paris.org>

Le mercredi 09 juillet 2014 10:49:34, bas smit a ?crit :
> When the source image band having pixel values in the range of 52 and 207
> is warped using the following command:
> gdal_warp -t_srs wgs84 -r near in_file out_file
> 
> The resulted band has the pixel values in the range of 0 and 255 How can I
> make the range unchanged during warp?

During warping, you may have parts of the resulting image that do not match 
any source area, so 0 values are expected.
You can mark it as nodata by adding -dstnodata 0 to the command line.

I can't think how you get 255 values though.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From baspysmit at gmail.com  Wed Jul  9 02:55:16 2014
From: baspysmit at gmail.com (bas smit)
Date: Wed, 9 Jul 2014 18:55:16 +0900
Subject: [gdal-dev] gdal_translate does not write geotransform and
	projection into output imagery
Message-ID: <CAJ0c-gfgY50SX5kOUR9_sCUzSPNxt-+5uFra7-xE8rzuSFXxQA@mail.gmail.com>

The SPOT 5 DIMAP format when translated by gdal, does not report map
information (geotransform and projection), and when it is warped the map
information differs than the result by ENVI software.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140709/8eb828a7/attachment.html>

From baspysmit at gmail.com  Wed Jul  9 03:08:22 2014
From: baspysmit at gmail.com (bas smit)
Date: Wed, 9 Jul 2014 19:08:22 +0900
Subject: [gdal-dev] best binary for mosaicing
Message-ID: <CAJ0c-gdO8Es+-7sPte9GX-1ok1yPiH-1Jm=g0wySdM2RBY2VJQ@mail.gmail.com>

I am interested in using gdalbuildvrt.exe and gdal_translate.exe for
creating a mosaic from a very large number of input files using command
line.

For this purpose, which binary (version/release/distribution/build number)
is preferred to speedup the mosaicing process?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140709/db98c549/attachment.html>

From baspysmit at gmail.com  Wed Jul  9 08:31:59 2014
From: baspysmit at gmail.com (bas smit)
Date: Thu, 10 Jul 2014 00:31:59 +0900
Subject: [gdal-dev] feeding input files into gdal_merge.py
Message-ID: <CAJ0c-gdjMuODm7EJnsg5TeK3EQ2W_Y2XYCLpzjJrzRy0M+tHBA@mail.gmail.com>

 While merging the files using gdal_merge.py the following code works:

subprocess.call([sys.executable,gmerge,'-o','C:\\r.tif','-of','GTiff','D:\\a.tif','D:\\b.tif'],shell=True)

However, when the input files are numerous, each file can not be inserted
separately. In this case, the following code does not work:

subprocess.call([sys.executable,gmerge,'-o','C:\\r.tif','-of','GTiff','D:\\*.tif'],shell=True)

I did not know how to input the input files. Any idea is welcomed.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140710/24129269/attachment.html>

From landa.martin at gmail.com  Wed Jul  9 09:18:25 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 9 Jul 2014 18:18:25 +0200
Subject: [gdal-dev] python scripts - create layer problem
Message-ID: <CA+Ei1OciEPNSaRYYA7wVn5aypgWzJX72bf=GNXVjoBcenRLLwA@mail.gmail.com>

Hi all,

I have a Python script which converts data from GML (VFR) to PostGIS.
When I am overwriting existing layers in PostGIS, not all layers are
really created. First existing layers are deleted [1] and than created
[2] from scratch.

Steps to reproduce (`git clone https://github.com/landam/ogr-vfr.git`):

CPL_DEBUG=ON ./vfr2pg --type OB_584029_UKSH --dbname vfr --o 2> log

Exporting layer Obce                 ... 1        features
Exporting layer CastiObci            ... 1        features
Exporting layer KatastralniUzemi     ... 1        features
Exporting layer Zsj                  ... 3        features
Exporting layer Ulice                ... 28       features
Exporting layer Parcely              ... 5628     features
Exporting layer StavebniObjekty      ... 1007     features
Exporting layer AdresniMista         ... 851      features

The problem is that table 'zsj' is not created in output DB. It's
random, mostly one or two tables are missing at the end:

psql vfr -c"select distinct f_table_name from geometry_columns"
   f_table_name
------------------
 castiobci
 ulice
 obce
 katastralniuzemi
 stavebniobjekty
 adresnimista
 parcely
(7 rows)

>From the log [3] it seems to be OK.

PG: PQexecParams(CREATE TABLE "public"."zsj" ( OGC_FID SERIAL, PRIMARY
KEY (OGC_FID) )) = PGRES_COMMAND_OK
PG: PQexecParams(COMMIT) = PGRES_COMMAND_OK

Tested on Debian GNU/Linux, PG 9.1.12, PostGIS 2.1, GDAL compiled from trunk.

Any idea what could be wrong? Thanks in advance! Martin

[1] https://github.com/landam/ogr-vfr/blob/master/vfr4ogr/ogr.py#L156
[2] https://github.com/landam/ogr-vfr/blob/master/vfr4ogr/ogr.py#L164
[3] http://geo102.fsv.cvut.cz/~landa/log

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From etourigny.dev at gmail.com  Wed Jul  9 10:17:52 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 9 Jul 2014 14:17:52 -0300
Subject: [gdal-dev] feeding input files into gdal_merge.py
In-Reply-To: <CAJ0c-gdjMuODm7EJnsg5TeK3EQ2W_Y2XYCLpzjJrzRy0M+tHBA@mail.gmail.com>
References: <CAJ0c-gdjMuODm7EJnsg5TeK3EQ2W_Y2XYCLpzjJrzRy0M+tHBA@mail.gmail.com>
Message-ID: <CA+TxYvOVewDjCrcnF7Z2fjRcM4PGBWnLrjAp610oQ8mYOrP1ng@mail.gmail.com>

this is not really related to gdal but to python... you should try using
shell=False and adding the entire command in one argument instead of an
array, but I'm not sure that the file globbing (*.tif) would work.


On Wed, Jul 9, 2014 at 12:31 PM, bas smit <baspysmit at gmail.com> wrote:

> While merging the files using gdal_merge.py the following code works:
>
> subprocess.call([sys.executable,gmerge,'-o','C:\\r.tif','-of','GTiff','D:\\a.tif','D:\\b.tif'],shell=True)
>
> However, when the input files are numerous, each file can not be inserted
> separately. In this case, the following code does not work:
>
> subprocess.call([sys.executable,gmerge,'-o','C:\\r.tif','-of','GTiff','D:\\*.tif'],shell=True)
>
> I did not know how to input the input files. Any idea is welcomed.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140709/90382f0f/attachment.html>

From lukepinnerau at gmail.com  Wed Jul  9 16:43:04 2014
From: lukepinnerau at gmail.com (Luke)
Date: Wed, 9 Jul 2014 16:43:04 -0700 (PDT)
Subject: [gdal-dev] feeding input files into gdal_merge.py
In-Reply-To: <CAJ0c-gdjMuODm7EJnsg5TeK3EQ2W_Y2XYCLpzjJrzRy0M+tHBA@mail.gmail.com>
References: <CAJ0c-gdjMuODm7EJnsg5TeK3EQ2W_Y2XYCLpzjJrzRy0M+tHBA@mail.gmail.com>
Message-ID: <1404949384189-5150377.post@n6.nabble.com>

Try:

import glob
tifs=glob.glob('D:/*.tif')
subprocess.call([sys.executable,gmerge,'-o','C:/r.tif','-of','GTiff']+tifs)

Luke



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-feeding-input-files-into-gdal-merge-py-tp5150332p5150377.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nixanz at nixanz.com  Wed Jul  9 17:03:36 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Thu, 10 Jul 2014 10:03:36 +1000
Subject: [gdal-dev] Can't compile 1.11.0 for iOS with 'expected statement'
	error for gdalgrid.cpp
Message-ID: <EA7056A4-E8F9-42EC-9852-FF26B8AF6D0D@nixanz.com>

Hi all,

I'm attempting to upgrade my iOS app from GDAL 1.10.1 to 1.11.0 in order to take advantage of the new OpenFileGDB driver.  However, I've been unable to get it to compile for iOS so far with the error output below (note that in this instance it is attempting to compile for i386 for the iOS simulator.)

I've had a look at code it's complaining about (line 1806 in 'gdalgrid.cpp') and I can't figure out what the problem is.  The brackets appear to be OK and I'm not sure why it doesn't like the closing bracket there.

Can anybody help me figure this one out?

Cheers,
Nik.


libtool: compile:  /Applications/Xcode.app/Contents/Developer/usr/bin/g++ -arch i386 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.1.sdk -Wno-implicit-function-declaration -D__IPHONE_OS_VERSION_MIN_REQUIRED=70000 -Wall -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/port -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/gcore -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/alg -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/ogr -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/ogr/ogrsf_frmts -DHAVE_AVX_AT_COMPILE_TIME -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/port -c gdalgrid.cpp -o gdalgrid.o
gdalgrid.cpp:1806:17: error: expected statement
                }
                ^
1 error generated.
make[1]: *** [gdalgrid.lo] Error 1
make: *** [core-target] Error 2

From nixanz at nixanz.com  Wed Jul  9 17:12:12 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Thu, 10 Jul 2014 10:12:12 +1000
Subject: [gdal-dev] Can't compile 1.11.0 for iOS with 'expected
	statement' error for gdalgrid.cpp
In-Reply-To: <EA7056A4-E8F9-42EC-9852-FF26B8AF6D0D@nixanz.com>
References: <EA7056A4-E8F9-42EC-9852-FF26B8AF6D0D@nixanz.com>
Message-ID: <61ACA757-6F23-49ED-BD87-7C0052D6735F@nixanz.com>

PS.  (This always happens just AFTER I send to the list, no matter how long I mull it over first...)

Actually, I think I see the issue now.  The closing bracket is the end of an "if ()" stanza in which there is no content at all if neither 'HAVE_AVX_AT_COMPILE_TIME' or 'HAVE_SSE_AT_COMPILE_TIME' are defined, which must be the case in my situation.

I guess I could either delete the entire stanza, or add in a statement that does nothing useful.

Anyhow, I thought you guys should know this situation exists so that you may be able to deal with it yourselves for some future release.  :-)

Cheers,
Nik.


On 10 Jul 2014, at 10:03 am, Nik Sands <nixanz at nixanz.com> wrote:

> Hi all,
> 
> I'm attempting to upgrade my iOS app from GDAL 1.10.1 to 1.11.0 in order to take advantage of the new OpenFileGDB driver.  However, I've been unable to get it to compile for iOS so far with the error output below (note that in this instance it is attempting to compile for i386 for the iOS simulator.)
> 
> I've had a look at code it's complaining about (line 1806 in 'gdalgrid.cpp') and I can't figure out what the problem is.  The brackets appear to be OK and I'm not sure why it doesn't like the closing bracket there.
> 
> Can anybody help me figure this one out?
> 
> Cheers,
> Nik.
> 
> 
> libtool: compile:  /Applications/Xcode.app/Contents/Developer/usr/bin/g++ -arch i386 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.1.sdk -Wno-implicit-function-declaration -D__IPHONE_OS_VERSION_MIN_REQUIRED=70000 -Wall -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/port -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/gcore -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/alg -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/ogr -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/ogr/ogrsf_frmts -DHAVE_AVX_AT_COMPILE_TIME -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/port -c gdalgrid.cpp -o gdalgrid.o
> gdalgrid.cpp:1806:17: error: expected statement
>                }
>                ^
> 1 error generated.
> make[1]: *** [gdalgrid.lo] Error 1
> make: *** [core-target] Error 2
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jesse at gaiagps.com  Wed Jul  9 19:24:54 2014
From: jesse at gaiagps.com (Jesse Crocker)
Date: Wed, 9 Jul 2014 20:24:54 -0600
Subject: [gdal-dev] Can't compile 1.11.0 for iOS with 'expected
	statement' error for gdalgrid.cpp
In-Reply-To: <61ACA757-6F23-49ED-BD87-7C0052D6735F@nixanz.com>
References: <EA7056A4-E8F9-42EC-9852-FF26B8AF6D0D@nixanz.com>
	<61ACA757-6F23-49ED-BD87-7C0052D6735F@nixanz.com>
Message-ID: <8D927274-7B5A-42AB-85D5-C0F874FDCC1F@gaiagps.com>

I got around this by disabling both sse and avx at configure, --with-sse=no --with-avx=no.


-
Jesse

On Jul 9, 2014, at 6:12 PM, Nik Sands <nixanz at nixanz.com> wrote:

> PS.  (This always happens just AFTER I send to the list, no matter how long I mull it over first...)
> 
> Actually, I think I see the issue now.  The closing bracket is the end of an "if ()" stanza in which there is no content at all if neither 'HAVE_AVX_AT_COMPILE_TIME' or 'HAVE_SSE_AT_COMPILE_TIME' are defined, which must be the case in my situation.
> 
> I guess I could either delete the entire stanza, or add in a statement that does nothing useful.
> 
> Anyhow, I thought you guys should know this situation exists so that you may be able to deal with it yourselves for some future release.  :-)
> 
> Cheers,
> Nik.
> 
> 
> On 10 Jul 2014, at 10:03 am, Nik Sands <nixanz at nixanz.com> wrote:
> 
>> Hi all,
>> 
>> I'm attempting to upgrade my iOS app from GDAL 1.10.1 to 1.11.0 in order to take advantage of the new OpenFileGDB driver.  However, I've been unable to get it to compile for iOS so far with the error output below (note that in this instance it is attempting to compile for i386 for the iOS simulator.)
>> 
>> I've had a look at code it's complaining about (line 1806 in 'gdalgrid.cpp') and I can't figure out what the problem is.  The brackets appear to be OK and I'm not sure why it doesn't like the closing bracket there.
>> 
>> Can anybody help me figure this one out?
>> 
>> Cheers,
>> Nik.
>> 
>> 
>> libtool: compile:  /Applications/Xcode.app/Contents/Developer/usr/bin/g++ -arch i386 -pipe -Os -gdwarf-2 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator7.1.sdk -Wno-implicit-function-declaration -D__IPHONE_OS_VERSION_MIN_REQUIRED=70000 -Wall -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/port -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/gcore -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/alg -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/ogr -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/ogr/ogrsf_frmts -DHAVE_AVX_AT_COMPILE_TIME -DOGR_ENABLED -I/Users/nsands/Documents/Nik/Development/GDAL/gdal-1.11.0/port -c gdalgrid.cpp -o gdalgrid.o
>> gdalgrid.cpp:1806:17: error: expected statement
>>               }
>>               ^
>> 1 error generated.
>> make[1]: *** [gdalgrid.lo] Error 1
>> make: *** [core-target] Error 2
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nixanz at nixanz.com  Wed Jul  9 19:53:39 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Thu, 10 Jul 2014 12:53:39 +1000
Subject: [gdal-dev] Unable to get features from OpenFileGDB data source
Message-ID: <E040E2B2-F72C-4D4C-BE9D-AB96CB831085@nixanz.com>

Hi GDAL devs,

I'm trying to support ESRI File Geodatabase support (read-only) in my iOS app and have recently got GDAL 1.11.0 compiled and running in the app for its new OpenFileGDB driver.  However, I've been unable to extract features from GDBs using the exact same code that works fine for other formats/drivers.

An extract of the code in question is:

------------------------
	ds = OGROpen(path, FALSE, NULL);
	layerCount = OGR_DS_GetLayerCount(ds);
	
	for ( int i = 0; i < layerCount; i++ )
	{
		OGRLayerH sourceLayer = OGR_DS_GetLayer(ds, i);
		int sourceFeatureCount = OGR_L_GetFeatureCount(sourceLayer, YES);

		for ( long j = 0; j < sourceFeatureCount; j++ )
		{
			OGRFeatureH sourceFeature = OGR_L_GetFeature(sourceLayer, j);

			if ( ! sourceFeature )
				NSLog(@"Failed to get feature at index '%ld' from layer at index '%d'!", j, i);
------------------------

The NSLog line is always run for my GDB data sources but never for data sources of other formats.  So for GDB data sources 'sourceFeature' is always NULL and of course this causes all subsequent OGR functions to which 'sourceFeature' is passed to fail with errors like:

	ERROR 10: Pointer 'hFeat' is NULL in 'OGR_...'.

Using the CLI utility 'ogrinfo' (different build of GDAL) on the same datasource works fine showing all the features are there as expected and it works fine in ESRI ArcGIS.  And the fact that it gets into the second 'for' loop at all indicates that there are features there, and yet it cannot get the feature at index '0'.

The File Geodatabase datasource can be downloaded for testing from:

	https://dl.dropboxusercontent.com/u/12436846/Bandicoots.gdb.zip

Can anybody advise me on how I should trouble shoot this further, or how the problem can be resolved?

Cheers,
Nik.


From glendening at drjack.net  Wed Jul  9 22:47:07 2014
From: glendening at drjack.net (John W. Glendening)
Date: Wed, 09 Jul 2014 22:47:07 -0700
Subject: [gdal-dev] Incorrect "land cover" color from USGS GeoPDF
In-Reply-To: <201407090915.53472.even.rouault@mines-paris.org>
References: <1404875444.10558.3.camel@HP-GLENDENI>
	<201407090915.53472.even.rouault@mines-paris.org>
Message-ID: <1404971227.10558.16.camel@HP-GLENDENI>

Even

To my surprise, I just got the same result.  Further investigation
finds the real problem.  You probably noticed the transparent region
in the tif file produced.  I needed the image to have a white
background and after many failed attempts to do that within GDAL 
finally decided to use ImageMagick's
 "convert in.tif -background white -flatten out.tif"
to do it.  The end result included a gray land cover which I 
mistakenly assumed occurred on the GDAL GeoPDF extraction step. But now
I find the gray instead results from the convert step.

[More exactly, in the gdal_translate GeoPDF->GeoTif extraction I had
originally included "-co TILED=YES" - for some reason IM does not
manage the resulting tiled GeoTif correctly, giving a gray land cover -
but if that argument is _not_ present in the gdal_translate step, then
"convert" correctly produces the green land cover.]

Profuse apologies for wasting your time.

BTW, in trying to use GDAL to give a white background to the GeoTif
extracted from the GeoPDF (a RGBA file) I was using commands such as
 gdal_translate -b 1 -b 2 -b 3  transparent.tif result.tif
 gdal_translate -b 1 -b 2 -b 3 -a_nodata "255 255 255"  
                                transparent.tif  result.tif

and some other permutations all of which gave a black background.  There
probably is some way to get a white background instead, but I couldn't
figure it out.

Jack


> I've tried the same setup and the rendering of the land_cover layer I get is 
> green, as in Adobe Reader. (Resized) output attached.
> Even


On Wed, 2014-07-09 at 09:15 +0200, Even Rouault wrote:
Le mercredi 09 juillet 2014 05:10:44, John W. Glendening a ?crit :
> > Using gdal_translate to extract the non-image, non-border map from a
USGS
> > GeoPDF
> > 
> >   gdal_translate CA_Lopez_Point_OE_W_20120306_TM_geo.pdf
o36121a6.tif
> > --config GDAL_PDF_LAYERS_OFF
> > "Map_Collar","Map_Frame.Projection_and_Grids","Images"
> > 
> > I find that while the colors of the contour lines and text match
those
> > seen when viewing the file with the Adobe reader, the "Land_Cover"
> > layer comes out gray instead of green (per the Adobe reader).  Can't
> > find any info regarding this so decided to ask here.  FYI the input
> > file is available at
> >
http://bigsurtrailmap.net/TEMP/CA_Lopez_Point_OE_W_20120306_TM_geo.pdf
> > I am running GDAL 1.11.0 compiled on a Ubuntu 14.04 machine.



From gregor.jochmann at rt.rif-ev.de  Thu Jul 10 01:33:23 2014
From: gregor.jochmann at rt.rif-ev.de (GrJo)
Date: Thu, 10 Jul 2014 01:33:23 -0700 (PDT)
Subject: [gdal-dev] Unable to read PDS3 (img + lbl) Moon DEM
Message-ID: <1404981203749-5150432.post@n6.nabble.com>

I've tried to access a lunar elevation model, but gdalinfo and gdal_translate
give me a strange error message.

"Error1: Sample_bits of 0 is not supported in this gdal PDS reader"

The elevation model is a PDS3 pair (.img with seperate .lbl file), and
pointing gdalinfo to the lbl file gives me the above error message (pointing
to the .img directly gives "not a recognized file format"):
IMG (binary)
<http://imbrium.mit.edu/DATA/LOLA_GDR/CYLINDRICAL/IMG/LDEM_256_00N_90N_000_180.IMG>  
LBL (plaintext label)
<http://imbrium.mit.edu/DATA/LOLA_GDR/CYLINDRICAL/IMG/LDEM_256_00N_90N_000_180.LBL>  

the strange thing is - the label file explicitely specifies says "   
SAMPLE_BITS           = 16" in line 52.

Is this a bug in the reader, an invalid label file or am i doing something
wrong?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Unable-to-read-PDS3-img-lbl-Moon-DEM-tp5150432.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Jul 10 02:32:54 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Jul 2014 11:32:54 +0200
Subject: [gdal-dev] python scripts - create layer problem
Message-ID: <1404984774.53be5dc685512@imp.free.fr>

Hi Martin,

I would say that your Zsj layer is a non-spatial layer. Is it the case ?
If yes, then the output of the log and the content of geometry_columns are
consistant. You may not see it directly when running ogrinfo on the PostGIS DB
since by default only spatial layers are listed. You can however query it
directly with GetLayerByName(), or define PG_LIST_ALL_TABLES=YES as a
configuration option (see http://gdal.org/drv_pg_advanced.html)
If your layer is supposed to have a geometry column, then the problem is likely
on the read side.

Even

From even.rouault at mines-paris.org  Thu Jul 10 02:44:18 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Jul 2014 11:44:18 +0200
Subject: [gdal-dev] Unable to get features from OpenFileGDB data source
In-Reply-To: <E040E2B2-F72C-4D4C-BE9D-AB96CB831085@nixanz.com>
References: <E040E2B2-F72C-4D4C-BE9D-AB96CB831085@nixanz.com>
Message-ID: <1404985458.53be607227f70@imp.free.fr>

Nik,

By using GetFeature() the way you do, you assume that the passed parameter is an
index number whereas it is a feature identifier. In most drivers that don't
really support the concept of feature identifier, both concepts are identical.
But in FileGDB, Feature Identifiers start at 1, and not 0. And you can have
holes in the numbering due to deleted records (this is the case with layer
PointBonnetHill that has a single feature whose FID is 2)
For efficiency and robustness with all formats, I'd encourage you to use
GetNextFeature() instead. And you don't need to call OGR_L_GetFeatureCount()
which can be a slow operation on some drivers. Just iterate over features with
GetNextFeature() until it returns a NULL pointer.

Best regards,

Even


> Hi GDAL devs,
>
> I'm trying to support ESRI File Geodatabase support (read-only) in my iOS app
> and have recently got GDAL 1.11.0 compiled and running in the app for its new
> OpenFileGDB driver.  However, I've been unable to extract features from GDBs
> using the exact same code that works fine for other formats/drivers.
>
> An extract of the code in question is:
>
> ------------------------
> 	ds = OGROpen(path, FALSE, NULL);
> 	layerCount = OGR_DS_GetLayerCount(ds);
>
> 	for ( int i = 0; i < layerCount; i++ )
> 	{
> 		OGRLayerH sourceLayer = OGR_DS_GetLayer(ds, i);
> 		int sourceFeatureCount = OGR_L_GetFeatureCount(sourceLayer, YES);
>
> 		for ( long j = 0; j < sourceFeatureCount; j++ )
> 		{
> 			OGRFeatureH sourceFeature = OGR_L_GetFeature(sourceLayer, j);
>
> 			if ( ! sourceFeature )
> 				NSLog(@"Failed to get feature at index '%ld' from layer at index '%d'!",
> j, i);
> ------------------------
>
> The NSLog line is always run for my GDB data sources but never for data
> sources of other formats.  So for GDB data sources 'sourceFeature' is always
> NULL and of course this causes all subsequent OGR functions to which
> 'sourceFeature' is passed to fail with errors like:
>
> 	ERROR 10: Pointer 'hFeat' is NULL in 'OGR_...'.
>
> Using the CLI utility 'ogrinfo' (different build of GDAL) on the same
> datasource works fine showing all the features are there as expected and it
> works fine in ESRI ArcGIS.  And the fact that it gets into the second 'for'
> loop at all indicates that there are features there, and yet it cannot get
> the feature at index '0'.
>
> The File Geodatabase datasource can be downloaded for testing from:
>
> 	https://dl.dropboxusercontent.com/u/12436846/Bandicoots.gdb.zip
>
> Can anybody advise me on how I should trouble shoot this further, or how the
> problem can be resolved?
>
> Cheers,
> Nik.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From even.rouault at mines-paris.org  Thu Jul 10 02:51:18 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Jul 2014 11:51:18 +0200
Subject: [gdal-dev] Unable to read PDS3 (img + lbl) Moon DEM
In-Reply-To: <1404981203749-5150432.post@n6.nabble.com>
References: <1404981203749-5150432.post@n6.nabble.com>
Message-ID: <1404985878.53be6216de147@imp.free.fr>

Selon GrJo <gregor.jochmann at rt.rif-ev.de>:

> I've tried to access a lunar elevation model, but gdalinfo and gdal_translate
> give me a strange error message.
>
> "Error1: Sample_bits of 0 is not supported in this gdal PDS reader"
>
> The elevation model is a PDS3 pair (.img with seperate .lbl file), and
> pointing gdalinfo to the lbl file gives me the above error message (pointing
> to the .img directly gives "not a recognized file format"):
> IMG (binary)
>
<http://imbrium.mit.edu/DATA/LOLA_GDR/CYLINDRICAL/IMG/LDEM_256_00N_90N_000_180.IMG>
> LBL (plaintext label)
>
<http://imbrium.mit.edu/DATA/LOLA_GDR/CYLINDRICAL/IMG/LDEM_256_00N_90N_000_180.LBL>
>
> the strange thing is - the label file explicitely specifies says "
> SAMPLE_BITS           = 16" in line 52.
>
> Is this a bug in the reader, an invalid label file or am i doing something
> wrong?

Nothing wrong. You are just using an old version of GDAL. Your issue is
http://trac.osgeo.org/gdal/ticket/3943 that was fixed in GDAL 1.9.0.

>
>
>
> --
> View this message in context:
>
http://osgeo-org.1560.x6.nabble.com/Unable-to-read-PDS3-img-lbl-Moon-DEM-tp5150432.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From adiba.nizami at gmail.com  Thu Jul 10 02:56:14 2014
From: adiba.nizami at gmail.com (garfy)
Date: Thu, 10 Jul 2014 02:56:14 -0700 (PDT)
Subject: [gdal-dev] warp taking time
Message-ID: <1404986174668-5150453.post@n6.nabble.com>

Dear All,

I am trying to generate mosaic of 28 input images using *gdalwarp*.
All are in same projection. It has taken 5 days to generate the final
output.
Please find the gdalinfo of input and output attached. The input files are
passed to warp in the order in which the gdalinfo is present in the
attachement.

Any input on improving the time would be really helpful.


Thanks
input_files_gdalinfo.txt
<http://osgeo-org.1560.x6.nabble.com/file/n5150453/input_files_gdalinfo.txt>  
final_output_gdalinfo.txt
<http://osgeo-org.1560.x6.nabble.com/file/n5150453/final_output_gdalinfo.txt>  





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/warp-taking-time-tp5150453.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From adiba.nizami at gmail.com  Thu Jul 10 03:07:03 2014
From: adiba.nizami at gmail.com (garfy)
Date: Thu, 10 Jul 2014 03:07:03 -0700 (PDT)
Subject: [gdal-dev]  warp taking time
Message-ID: <1404986823205-5150454.post@n6.nabble.com>

Dear All, 

I am trying to generate mosaic of 28 input images using gdalwarp. 
All are in same projection. It has taken 5 days to generate the final
output. 
Please find the gdalinfo of input and output attached. The input files are
passed to warp in the order in which the gdalinfo is present in the
attachement. 

Any input on improving the time would be really helpful. 


Thanks 
input_files_gdalinfo.txt
<http://osgeo-org.1560.x6.nabble.com/file/n5150454/input_files_gdalinfo.txt>  
final_output_gdalinfo.txt
<http://osgeo-org.1560.x6.nabble.com/file/n5150454/final_output_gdalinfo.txt>  



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-warp-taking-time-tp5150454.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From chaitanya.ch at gmail.com  Thu Jul 10 03:14:15 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 10 Jul 2014 15:44:15 +0530
Subject: [gdal-dev] warp taking time
In-Reply-To: <1404986174668-5150453.post@n6.nabble.com>
References: <1404986174668-5150453.post@n6.nabble.com>
Message-ID: <CAMKgpOZECE1XytHs=LZr6fdwvUBgoV9DrC4f9Ubf71b9uyagyw@mail.gmail.com>

garfy,

Please provide the gdalwarp command you used. Did you modify GDAL_CACHEMAX?


On Thu, Jul 10, 2014 at 3:26 PM, garfy <adiba.nizami at gmail.com> wrote:

> Dear All,
>
> I am trying to generate mosaic of 28 input images using *gdalwarp*.
> All are in same projection. It has taken 5 days to generate the final
> output.
> Please find the gdalinfo of input and output attached. The input files are
> passed to warp in the order in which the gdalinfo is present in the
> attachement.
>
> Any input on improving the time would be really helpful.
>
>
> Thanks
> input_files_gdalinfo.txt
> <
> http://osgeo-org.1560.x6.nabble.com/file/n5150453/input_files_gdalinfo.txt
> >
> final_output_gdalinfo.txt
> <
> http://osgeo-org.1560.x6.nabble.com/file/n5150453/final_output_gdalinfo.txt
> >
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/warp-taking-time-tp5150453.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140710/29d1ceba/attachment.html>

From gregor.jochmann at rt.rif-ev.de  Thu Jul 10 03:26:43 2014
From: gregor.jochmann at rt.rif-ev.de (GrJo)
Date: Thu, 10 Jul 2014 03:26:43 -0700 (PDT)
Subject: [gdal-dev] Unable to read PDS3 (img + lbl) Moon DEM
In-Reply-To: <1404985878.53be6216de147@imp.free.fr>
References: <1404981203749-5150432.post@n6.nabble.com>
	<1404985878.53be6216de147@imp.free.fr>
Message-ID: <1404988003324-5150457.post@n6.nabble.com>

Thanks a lot, i was using a version that came with the outdated FWTools.
Works great with the new binaries (1.11) from gisinternals.com



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Unable-to-read-PDS3-img-lbl-Moon-DEM-tp5150432p5150457.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Jul 10 04:35:46 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Jul 2014 13:35:46 +0200
Subject: [gdal-dev] Can't compile 1.11.0 for iOS with 'expected
	statement' error for gdalgrid.cpp
In-Reply-To: <61ACA757-6F23-49ED-BD87-7C0052D6735F@nixanz.com>
References: <EA7056A4-E8F9-42EC-9852-FF26B8AF6D0D@nixanz.com>
	<61ACA757-6F23-49ED-BD87-7C0052D6735F@nixanz.com>
Message-ID: <1404992146.53be7a927f02d@imp.free.fr>

Selon Nik Sands <nixanz at nixanz.com>:

> PS.  (This always happens just AFTER I send to the list, no matter how long I
> mull it over first...)
>
> Actually, I think I see the issue now.  The closing bracket is the end of an
> "if ()" stanza in which there is no content at all if neither
> 'HAVE_AVX_AT_COMPILE_TIME' or 'HAVE_SSE_AT_COMPILE_TIME' are defined, which
> must be the case in my situation.
>
> I guess I could either delete the entire stanza, or add in a statement that
> does nothing useful.
>
> Anyhow, I thought you guys should know this situation exists so that you may
> be able to deal with it yourselves for some future release.  :-)

Fixed per http://trac.osgeo.org/gdal/ticket/5566

In fact the error was when HAVE_AVX_AT_COMPILE_TIME is available but not
HAVE_SSE_AT_COMPILE_TIME. Which shouldn't happen normally. So I guess there's an
issue in the SSE detection case with that enivronment.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From baspysmit at gmail.com  Thu Jul 10 04:51:54 2014
From: baspysmit at gmail.com (bas smit)
Date: Thu, 10 Jul 2014 20:51:54 +0900
Subject: [gdal-dev] warp taking time
In-Reply-To: <CAMKgpOZECE1XytHs=LZr6fdwvUBgoV9DrC4f9Ubf71b9uyagyw@mail.gmail.com>
References: <1404986174668-5150453.post@n6.nabble.com>
	<CAMKgpOZECE1XytHs=LZr6fdwvUBgoV9DrC4f9Ubf71b9uyagyw@mail.gmail.com>
Message-ID: <CAJ0c-gc06F9fJkXWXp2EgmuGyjqHgQdqWk5YPuKB5Eahe1b1aQ@mail.gmail.com>

I am wondering why you are using gdalwarp for mosaicing images having same
projection instead of gdal_merge.py?

Bas Smit


On Thu, Jul 10, 2014 at 7:14 PM, Chaitanya kumar CH <chaitanya.ch at gmail.com>
wrote:

> garfy,
>
> Please provide the gdalwarp command you used. Did you modify GDAL_CACHEMAX?
>
>
> On Thu, Jul 10, 2014 at 3:26 PM, garfy <adiba.nizami at gmail.com> wrote:
>
>> Dear All,
>>
>> I am trying to generate mosaic of 28 input images using *gdalwarp*.
>> All are in same projection. It has taken 5 days to generate the final
>> output.
>> Please find the gdalinfo of input and output attached. The input files are
>> passed to warp in the order in which the gdalinfo is present in the
>> attachement.
>>
>> Any input on improving the time would be really helpful.
>>
>>
>> Thanks
>> input_files_gdalinfo.txt
>> <
>> http://osgeo-org.1560.x6.nabble.com/file/n5150453/input_files_gdalinfo.txt
>> >
>> final_output_gdalinfo.txt
>> <
>> http://osgeo-org.1560.x6.nabble.com/file/n5150453/final_output_gdalinfo.txt
>> >
>>
>>
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/warp-taking-time-tp5150453.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140710/baf8d386/attachment.html>

From thorntonmm at ornl.gov  Thu Jul 10 06:53:27 2014
From: thorntonmm at ornl.gov (Thornton, Michele M.)
Date: Thu, 10 Jul 2014 13:53:27 +0000
Subject: [gdal-dev] warp taking time
In-Reply-To: <CAJ0c-gc06F9fJkXWXp2EgmuGyjqHgQdqWk5YPuKB5Eahe1b1aQ@mail.gmail.com>
References: <1404986174668-5150453.post@n6.nabble.com>
	<CAMKgpOZECE1XytHs=LZr6fdwvUBgoV9DrC4f9Ubf71b9uyagyw@mail.gmail.com>
	<CAJ0c-gc06F9fJkXWXp2EgmuGyjqHgQdqWk5YPuKB5Eahe1b1aQ@mail.gmail.com>
Message-ID: <ee54b51b7b3143d5b7b333ca71f51967@EXCHCS33.ornl.gov>

Hello,

I?m interested in this thread.  One comment I can add about gdal_merge.py is that it does not properly handle nodata values from the full (padded) extent of the input files.  gdalwarp, which can be VERY slow, does handle the nodata values correctly.

Michele Thornton

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of bas smit
Sent: Thursday, July 10, 2014 7:52 AM
To: Chaitanya kumar CH
Cc: gdal dev
Subject: Re: [gdal-dev] warp taking time

I am wondering why you are using gdalwarp for mosaicing images having same projection instead of gdal_merge.py?

Bas Smit

On Thu, Jul 10, 2014 at 7:14 PM, Chaitanya kumar CH <chaitanya.ch at gmail.com<mailto:chaitanya.ch at gmail.com>> wrote:
garfy,

Please provide the gdalwarp command you used. Did you modify GDAL_CACHEMAX?

On Thu, Jul 10, 2014 at 3:26 PM, garfy <adiba.nizami at gmail.com<mailto:adiba.nizami at gmail.com>> wrote:
Dear All,

I am trying to generate mosaic of 28 input images using *gdalwarp*.
All are in same projection. It has taken 5 days to generate the final
output.
Please find the gdalinfo of input and output attached. The input files are
passed to warp in the order in which the gdalinfo is present in the
attachement.

Any input on improving the time would be really helpful.


Thanks
input_files_gdalinfo.txt
<http://osgeo-org.1560.x6.nabble.com/file/n5150453/input_files_gdalinfo.txt>
final_output_gdalinfo.txt
<http://osgeo-org.1560.x6.nabble.com/file/n5150453/final_output_gdalinfo.txt>





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/warp-taking-time-tp5150453.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584<tel:%2B91-9494447584>
17.2416N 80.1426E

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140710/487e6daa/attachment-0001.html>

From chapmanm at pixia.com  Thu Jul 10 13:12:04 2014
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu, 10 Jul 2014 16:12:04 -0400 (EDT)
Subject: [gdal-dev] State Plane to WGS84 Transformation problem with false
	easting and northing values
Message-ID: <376eb19a.00003b18.00000018@CHAPMANM7.pixia.local>

Frank, Even or whoever,

 

I have a source geotiff that has the following projection:

 

PROJCS["State
Plane",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG"
,"6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORIT
Y["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["sta
ndard_parallel_1",35.46666666666667],PARAMETER["standard_parallel_2",34.03
333333333333],PARAMETER["latitude_of_origin",33.5],PARAMETER["central_meri
dian",-118],PARAMETER["false_easting",21527734.72222222],PARAMETER["false_
northing",5381933.680555555],UNIT["feet",0.3048006096012192],AUTHORITY["EP
SG","26945"]]

 

I want to convert the bounds to WGS84.  When I setup my coordinate
transform object the OGRProj4CT::InitializeNoLock() function in ogrct.cpp
calls poSRSSource->exportToProj4() and returns the following:

 

+proj=lcc +lat_1=35.46666666666667 +lat_2=34.03333333333333 +lat_0=33.5
+lon_0=-118 +x_0=6561666.666666666 +y_0=1640416.666666667 +datum=NAD83
+units=us-ft +no_defs

 

Then, when calling TransformEx() on the bounds the resulting coordinates
are wrong.  It appears that somewhere in the transformation process the
UNIT RADIANS value is not being factored correctly with the false eating
and northing values.

 

If I translate the source image into a new geotiff with the exact same
parameters as the source geotiff then the new projection is as follows:

 

PROJCS["NAD83 / California zone
5",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG"
,"6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORIT
Y["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["sta
ndard_parallel_1",35.46666666666667],PARAMETER["standard_parallel_2",34.03
333333333333],PARAMETER["latitude_of_origin",33.5],PARAMETER["central_meri
dian",-118],PARAMETER["false_easting",6561666.666666666],PARAMETER["false_
northing",1640416.666666667],UNIT["US survey
foot",0.3048006096012192,AUTHORITY["EPSG","9003"]],AUTHORITY["EPSG","26945
"]]

 

And the exportToProj4() returns this:

 

+proj=lcc +lat_1=35.46666666666667 +lat_2=34.03333333333333 +lat_0=33.5
+lon_0=-118 +x_0=2000000 +y_0=500000.0000000001 +datum=NAD83 +units=us-ft
+no_defs

 

Which produces a correct result when using TransformEx().

 

When I get the SRS_PP_FALSE_EASTING and SRS_PP_FALSE_NORTHING from both
projections using the OGRSpatialReference::GetProjParm() function I notice
the difference between the two is a factor of the GEOGCS unit radians:

 

SOURCE IMAGE:

false_easting:       21527734.72222

false_northing:      5381933.680556

 

TRANSLATED IMAGE:

false_easting:       6561666.666667

false_northing:      1640416.666667

 

 

The translated offsets divided by the source offsets seem to be a factor
of the unit radians: 0.3048 

 

I think the reason that the translate to geotiff corrects the problem is
that the geotiff keys for the projection are calculated in a different
manner than when using the OGRCoordinateTransform object.

 

Any help on where to apply the fix in the GDAL code if you think one is
required would be much appreciated.  If you think I need to accommodate
this in my code any help would be greatly appreciated.

 

Best regards,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140710/be7e2798/attachment.html>

From chapmanm at pixia.com  Thu Jul 10 13:15:52 2014
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu, 10 Jul 2014 16:15:52 -0400 (EDT)
Subject: [gdal-dev] State Plane to WGS84 Transformation problem with false
	easting and northing values
Message-ID: <b10f2b1a.00003b18.0000001a@CHAPMANM7.pixia.local>

Frank, Even or whoever,

 

I have a source geotiff that has the following projection:

 

PROJCS["State
Plane",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG"
,"6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORIT
Y["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["sta
ndard_parallel_1",35.46666666666667],PARAMETER["standard_parallel_2",34.03
333333333333],PARAMETER["latitude_of_origin",33.5],PARAMETER["central_meri
dian",-118],PARAMETER["false_easting",21527734.72222222],PARAMETER["false_
northing",5381933.680555555],UNIT["feet",0.3048006096012192],AUTHORITY["EP
SG","26945"]]

 

I want to convert the bounds to WGS84.  When I setup my coordinate
transform object the OGRProj4CT::InitializeNoLock() function in ogrct.cpp
calls poSRSSource->exportToProj4() and returns the following:

 

+proj=lcc +lat_1=35.46666666666667 +lat_2=34.03333333333333 +lat_0=33.5
+lon_0=-118 +x_0=6561666.666666666 +y_0=1640416.666666667 +datum=NAD83
+units=us-ft +no_defs

 

Then, when calling TransformEx() on the bounds the resulting coordinates
are wrong.  It appears that somewhere in the transformation process the
UNIT RADIANS value is not being factored correctly with the false eating
and northing values.

 

If I translate the source image into a new geotiff with the exact same
parameters as the source geotiff then the new projection is as follows:

 

PROJCS["NAD83 / California zone
5",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG"
,"6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORIT
Y["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["sta
ndard_parallel_1",35.46666666666667],PARAMETER["standard_parallel_2",34.03
333333333333],PARAMETER["latitude_of_origin",33.5],PARAMETER["central_meri
dian",-118],PARAMETER["false_easting",6561666.666666666],PARAMETER["false_
northing",1640416.666666667],UNIT["US survey
foot",0.3048006096012192,AUTHORITY["EPSG","9003"]],AUTHORITY["EPSG","26945
"]]

 

And the exportToProj4() returns this:

 

+proj=lcc +lat_1=35.46666666666667 +lat_2=34.03333333333333 +lat_0=33.5
+lon_0=-118 +x_0=2000000 +y_0=500000.0000000001 +datum=NAD83 +units=us-ft
+no_defs

 

Which produces a correct result when using TransformEx().

 

When I get the SRS_PP_FALSE_EASTING and SRS_PP_FALSE_NORTHING from both
projections using the OGRSpatialReference::GetProjParm() function I notice
the difference between the two is a factor of the GEOGCS unit radians:

 

SOURCE IMAGE:

false_easting:       21527734.72222

false_northing:      5381933.680556

 

TRANSLATED IMAGE:

false_easting:       6561666.666667

false_northing:      1640416.666667

 

 

The translated offsets divided by the source offsets seem to be a factor
of the unit radians: 0.3048 

 

I think the reason that the translate to geotiff corrects the problem is
that the geotiff keys for the projection are calculated in a different
manner than when using the OGRCoordinateTransform object.

 

Any help on where to apply the fix in the GDAL code if you think one is
required would be much appreciated.  If you think I need to accommodate
this in my code any help would be greatly appreciated.

 

Best regards,

Martin

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140710/6aa26e5d/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Jul 10 13:35:02 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 10 Jul 2014 22:35:02 +0200
Subject: [gdal-dev] State Plane to WGS84 Transformation problem with
	false easting and northing values
In-Reply-To: <376eb19a.00003b18.00000018@CHAPMANM7.pixia.local>
References: <376eb19a.00003b18.00000018@CHAPMANM7.pixia.local>
Message-ID: <201407102235.02487.even.rouault@mines-paris.org>

Martin,

Yes this issue has been reported several times (last time was 
http://lists.osgeo.org/pipermail/gdal-dev/2014-May/039251.html) and is a GDAL 
bug that the user code shouldn't compensate for. I think it is 
https://trac.osgeo.org/gdal/ticket/3901 / 
https://trac.osgeo.org/gdal/ticket/4954

The 0.3048 ratio you see is the length of a foot in meters (not sure why you 
mention "unit radians" here). Basically the conversion from foot to meters is 
wrongly applied twice in the geotiff SRS decoding.

21527734.72222222 * 0.3048 * 0.3048 = 2000000

Something I've looked at a bit, but did not pursue because of the lack of 
incentive to do so.

Even

Le jeudi 10 juillet 2014 22:12:04, Martin Chapman a ?crit :
> Frank, Even or whoever,
> 
> 
> 
> I have a source geotiff that has the following projection:
> 
> 
> 
> PROJCS["State
> Plane",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
> 1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG"
> ,"6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORIT
> Y["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["sta
> ndard_parallel_1",35.46666666666667],PARAMETER["standard_parallel_2",34.03
> 333333333333],PARAMETER["latitude_of_origin",33.5],PARAMETER["central_meri
> dian",-118],PARAMETER["false_easting",21527734.72222222],PARAMETER["false_
> northing",5381933.680555555],UNIT["feet",0.3048006096012192],AUTHORITY["EP
> SG","26945"]]
> 
> 
> 
> I want to convert the bounds to WGS84.  When I setup my coordinate
> transform object the OGRProj4CT::InitializeNoLock() function in ogrct.cpp
> calls poSRSSource->exportToProj4() and returns the following:
> 
> 
> 
> +proj=lcc +lat_1=35.46666666666667 +lat_2=34.03333333333333 +lat_0=33.5
> +lon_0=-118 +x_0=6561666.666666666 +y_0=1640416.666666667 +datum=NAD83
> +units=us-ft +no_defs
> 
> 
> 
> Then, when calling TransformEx() on the bounds the resulting coordinates
> are wrong.  It appears that somewhere in the transformation process the
> UNIT RADIANS value is not being factored correctly with the false eating
> and northing values.
> 
> 
> 
> If I translate the source image into a new geotiff with the exact same
> parameters as the source geotiff then the new projection is as follows:
> 
> 
> 
> PROJCS["NAD83 / California zone
> 5",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
> 1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG"
> ,"6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORIT
> Y["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["sta
> ndard_parallel_1",35.46666666666667],PARAMETER["standard_parallel_2",34.03
> 333333333333],PARAMETER["latitude_of_origin",33.5],PARAMETER["central_meri
> dian",-118],PARAMETER["false_easting",6561666.666666666],PARAMETER["false_
> northing",1640416.666666667],UNIT["US survey
> foot",0.3048006096012192,AUTHORITY["EPSG","9003"]],AUTHORITY["EPSG","26945
> "]]
> 
> 
> 
> And the exportToProj4() returns this:
> 
> 
> 
> +proj=lcc +lat_1=35.46666666666667 +lat_2=34.03333333333333 +lat_0=33.5
> +lon_0=-118 +x_0=2000000 +y_0=500000.0000000001 +datum=NAD83 +units=us-ft
> +no_defs
> 
> 
> 
> Which produces a correct result when using TransformEx().
> 
> 
> 
> When I get the SRS_PP_FALSE_EASTING and SRS_PP_FALSE_NORTHING from both
> projections using the OGRSpatialReference::GetProjParm() function I notice
> the difference between the two is a factor of the GEOGCS unit radians:
> 
> 
> 
> SOURCE IMAGE:
> 
> false_easting:       21527734.72222
> 
> false_northing:      5381933.680556
> 
> 
> 
> TRANSLATED IMAGE:
> 
> false_easting:       6561666.666667
> 
> false_northing:      1640416.666667
> 
> 
> 
> 
> 
> The translated offsets divided by the source offsets seem to be a factor
> of the unit radians: 0.3048
> 
> 
> 
> I think the reason that the translate to geotiff corrects the problem is
> that the geotiff keys for the projection are calculated in a different
> manner than when using the OGRCoordinateTransform object.
> 
> 
> 
> Any help on where to apply the fix in the GDAL code if you think one is
> required would be much appreciated.  If you think I need to accommodate
> this in my code any help would be greatly appreciated.
> 
> 
> 
> Best regards,
> 
> Martin

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From chapmanm at pixia.com  Thu Jul 10 14:39:53 2014
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu, 10 Jul 2014 17:39:53 -0400 (EDT)
Subject: [gdal-dev] State Plane to WGS84 Transformation problem with
	false easting and northing values
In-Reply-To: <201407102235.02487.even.rouault@mines-paris.org>
References: <376eb19a.00003b18.00000018@CHAPMANM7.pixia.local>
	<201407102235.02487.even.rouault@mines-paris.org>
Message-ID: <7bb37eaa.00003b18.00000025@CHAPMANM7.pixia.local>

Even,

Thanks for the quick response.  Yeah, I goofed, I meant to say units, guess 
I am just getting old.  Anyway, thanks for pointing me in the right 
direction!

Best regards,
Martin

-----Original Message-----
From: Even Rouault [mailto:even.rouault at mines-paris.org]
Sent: Thursday, July 10, 2014 2:35 PM
To: gdal-dev at lists.osgeo.org
Cc: Martin Chapman
Subject: Re: [gdal-dev] State Plane to WGS84 Transformation problem with 
false easting and northing values

Martin,

Yes this issue has been reported several times (last time was
http://lists.osgeo.org/pipermail/gdal-dev/2014-May/039251.html) and is a 
GDAL bug that the user code shouldn't compensate for. I think it is
https://trac.osgeo.org/gdal/ticket/3901 /
https://trac.osgeo.org/gdal/ticket/4954

The 0.3048 ratio you see is the length of a foot in meters (not sure why you 
mention "unit radians" here). Basically the conversion from foot to meters 
is wrongly applied twice in the geotiff SRS decoding.

21527734.72222222 * 0.3048 * 0.3048 = 2000000

Something I've looked at a bit, but did not pursue because of the lack of 
incentive to do so.

Even

Le jeudi 10 juillet 2014 22:12:04, Martin Chapman a ?crit :
> Frank, Even or whoever,
>
>
>
> I have a source geotiff that has the following projection:
>
>
>
> PROJCS["State
> Plane",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
> 1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG"
> ,"6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTH
> ORIT
> Y["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER[
> "sta
> ndard_parallel_1",35.46666666666667],PARAMETER["standard_parallel_2",3
> 4.03
> 333333333333],PARAMETER["latitude_of_origin",33.5],PARAMETER["central_
> meri
> dian",-118],PARAMETER["false_easting",21527734.72222222],PARAMETER["fa
> lse_
> northing",5381933.680555555],UNIT["feet",0.3048006096012192],AUTHORITY
> ["EP
> SG","26945"]]
>
>
>
> I want to convert the bounds to WGS84.  When I setup my coordinate
> transform object the OGRProj4CT::InitializeNoLock() function in
> ogrct.cpp calls poSRSSource->exportToProj4() and returns the following:
>
>
>
> +proj=lcc +lat_1=35.46666666666667 +lat_2=34.03333333333333
> ++lat_0=33.5
> +lon_0=-118 +x_0=6561666.666666666 +y_0=1640416.666666667 +datum=NAD83
> +units=us-ft +no_defs
>
>
>
> Then, when calling TransformEx() on the bounds the resulting
> coordinates are wrong.  It appears that somewhere in the
> transformation process the UNIT RADIANS value is not being factored
> correctly with the false eating and northing values.
>
>
>
> If I translate the source image into a new geotiff with the exact same
> parameters as the source geotiff then the new projection is as follows:
>
>
>
> PROJCS["NAD83 / California zone
> 5",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS
> 1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY["EPSG"
> ,"6269"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTH
> ORIT
> Y["EPSG","4269"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER[
> "sta
> ndard_parallel_1",35.46666666666667],PARAMETER["standard_parallel_2",3
> 4.03
> 333333333333],PARAMETER["latitude_of_origin",33.5],PARAMETER["central_
> meri
> dian",-118],PARAMETER["false_easting",6561666.666666666],PARAMETER["fa
> lse_ northing",1640416.666666667],UNIT["US survey
> foot",0.3048006096012192,AUTHORITY["EPSG","9003"]],AUTHORITY["EPSG","2
> 6945
> "]]
>
>
>
> And the exportToProj4() returns this:
>
>
>
> +proj=lcc +lat_1=35.46666666666667 +lat_2=34.03333333333333
> ++lat_0=33.5
> +lon_0=-118 +x_0=2000000 +y_0=500000.0000000001 +datum=NAD83
> ++units=us-ft no_defs
>
>
>
> Which produces a correct result when using TransformEx().
>
>
>
> When I get the SRS_PP_FALSE_EASTING and SRS_PP_FALSE_NORTHING from
> both projections using the OGRSpatialReference::GetProjParm() function
> I notice the difference between the two is a factor of the GEOGCS unit 
> radians:
>
>
>
> SOURCE IMAGE:
>
> false_easting:       21527734.72222
>
> false_northing:      5381933.680556
>
>
>
> TRANSLATED IMAGE:
>
> false_easting:       6561666.666667
>
> false_northing:      1640416.666667
>
>
>
>
>
> The translated offsets divided by the source offsets seem to be a
> factor of the unit radians: 0.3048
>
>
>
> I think the reason that the translate to geotiff corrects the problem
> is that the geotiff keys for the projection are calculated in a
> different manner than when using the OGRCoordinateTransform object.
>
>
>
> Any help on where to apply the fix in the GDAL code if you think one
> is required would be much appreciated.  If you think I need to
> accommodate this in my code any help would be greatly appreciated.
>
>
>
> Best regards,
>
> Martin

--
Geospatial professional services
http://even.rouault.free.fr/services.html

From landa.martin at gmail.com  Fri Jul 11 00:07:09 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 11 Jul 2014 09:07:09 +0200
Subject: [gdal-dev] python scripts - create layer problem
In-Reply-To: <1404984774.53be5dc685512@imp.free.fr>
References: <1404984774.53be5dc685512@imp.free.fr>
Message-ID: <CA+Ei1OczcStLV22YSFop6Et=VR5N0FzqJoTzVE9Gh4CV_zXRNw@mail.gmail.com>

Hi,

2014-07-10 11:32 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

> I would say that your Zsj layer is a non-spatial layer. Is it the case ?

no, all layers are spatial.

> If yes, then the output of the log and the content of geometry_columns are
> consistant. You may not see it directly when running ogrinfo on the PostGIS DB
> since by default only spatial layers are listed. You can however query it
> directly with GetLayerByName(), or define PG_LIST_ALL_TABLES=YES as a
> configuration option (see http://gdal.org/drv_pg_advanced.html)
> If your layer is supposed to have a geometry column, then the problem is likely
> on the read side.

On second pass, e.g. two layers are missing - 'ulice' and 'parcely'.

psql vfr -c"select distinct f_table_name from geometry_columns"
   f_table_name
------------------
 ulice
 zsj
 obce
 katastralniuzemi
 adresnimista
 stavebniobjekty
(6 rows)

It's random, usually one or two layers are missing in output DB...

Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From landa.martin at gmail.com  Fri Jul 11 00:13:16 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 11 Jul 2014 09:13:16 +0200
Subject: [gdal-dev] python scripts - create layer problem
In-Reply-To: <CA+Ei1OczcStLV22YSFop6Et=VR5N0FzqJoTzVE9Gh4CV_zXRNw@mail.gmail.com>
References: <1404984774.53be5dc685512@imp.free.fr>
	<CA+Ei1OczcStLV22YSFop6Et=VR5N0FzqJoTzVE9Gh4CV_zXRNw@mail.gmail.com>
Message-ID: <CA+Ei1OfEW8CowvDKXWL50u7LLYunrU0Y9B1=7_WMbrsj_-CfNQ@mail.gmail.com>

Hi,

2014-07-11 9:07 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> It's random, usually one or two layers are missing in output DB...

I checked also all tables with

psql vfr -c "SELECT * FROM information_schema.tables WHERE
table_schema = 'public'"

Some tables (one or two) are simply not written for unknown reason. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From even.rouault at mines-paris.org  Fri Jul 11 02:33:14 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 11 Jul 2014 11:33:14 +0200
Subject: [gdal-dev] python scripts - create layer problem
In-Reply-To: <CA+Ei1OfEW8CowvDKXWL50u7LLYunrU0Y9B1=7_WMbrsj_-CfNQ@mail.gmail.com>
References: <1404984774.53be5dc685512@imp.free.fr>
	<CA+Ei1OczcStLV22YSFop6Et=VR5N0FzqJoTzVE9Gh4CV_zXRNw@mail.gmail.com>
	<CA+Ei1OfEW8CowvDKXWL50u7LLYunrU0Y9B1=7_WMbrsj_-CfNQ@mail.gmail.com>
Message-ID: <1405071194.53bfaf5a4c695@imp.free.fr>

Selon Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2014-07-11 9:07 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> > It's random, usually one or two layers are missing in output DB...
>
> I checked also all tables with
>
> psql vfr -c "SELECT * FROM information_schema.tables WHERE
> table_schema = 'public'"
>
> Some tables (one or two) are simply not written for unknown reason.

If you see the CREATE TABLE in the debug log, and it is not created, then it is
really weird. Perhaps check the potential surrounding BEGIN/COMMIT/ROLLBACK just
in case. Might it not be an issue with your PostgreSQL instance ?

Otherwise, if your trunk is >= r27476 (http://trac.osgeo.org/gdal/ticket/5547),
could you try setting OGR_PG_DIFFERED_CREATION=NO as environment variable /
configuration option ?
If that still does not work (if OGR_PG_DIFFERED_CREATION=NO is necessary, then
it would be a bug of trunk), then you could try checking out r27475.

But the randomness issue is quite puzzling.

Even


>
> --
> Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa
>



From kalu671 at gmail.com  Fri Jul 11 07:21:08 2014
From: kalu671 at gmail.com (kalu671)
Date: Fri, 11 Jul 2014 07:21:08 -0700 (PDT)
Subject: [gdal-dev] [BULK]  Re: Dissolve shapefile using GDAL/OGR
In-Reply-To: <1374781627369-5068800.post@n6.nabble.com>
References: <CAKGFd-zX5HftF611LHoWhzv6kVXMcXMAB5PJsxKMJC_D_pXEiA@mail.gmail.com>
	<loom.20130226T150433-186@post.gmane.org>
	<CAKGFd-ya0QuY0jJ+7FberUWOE0dckXNjmxXWBwCN0gHNy82RYA@mail.gmail.com>
	<1374247404172-5067633.post@n6.nabble.com>
	<201307191959.36508.even.rouault@mines-paris.org>
	<AA4FE6F1C40C7F42843DFCC503EE2DA11695A311CE@EXCHANGE.corp.rfweston.com>
	<1374781627369-5068800.post@n6.nabble.com>
Message-ID: <1405088468881-5150675.post@n6.nabble.com>

Hello Dan,
I tried to use the syntax and I am getting the error: 
"The filename, directory name, or volume label syntax is incorrect."

my syntax is as below:
inFile = "D:\Dir1\Polygons.shp"
outFile = "D:\Dir2\Dissolved_polygons.shp"

dissolve = 'C:\OSGeo4W64\apps\saga\saga_cmd shapes_polygons "Polygon
Dissolve" -POLYGONS = ' + inFile + ' -DISSOLVED = ' + outFile + ' -FIELD_1=
Value -DISSOLVE= 0' 
		
subprocess.call(dissolve, shell=True)

Would you please suggest what did I do wrong?

Thanks




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Dissolve-shapefile-using-GDAL-OGR-tp5036930p5150675.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gusevmihs at gmail.com  Fri Jul 11 11:21:36 2014
From: gusevmihs at gmail.com (Mikhail Gusev)
Date: Fri, 11 Jul 2014 22:21:36 +0400
Subject: [gdal-dev] GSoC weekly report 8. GDAL Networking
Message-ID: <CAJB43VrkYGgdHJtpMdzm1gjtB40yh7fDzeyFJLBRCLJUkT3Gmw@mail.gmail.com>

Hello everyone.
According to my plan this week I worked on automatic graph building in GNM.
See my blog post:
http://gsoc2014gnm.blogspot.ru/2014/07/week-8-automatic-graph-building.html
I'm also still a bit blocked on python tests and bindings. I haven't
succeeded in building GDAL with python support using CMake. But I hope to
finish this the next week.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140711/002843ec/attachment.html>

From even.rouault at mines-paris.org  Fri Jul 11 11:27:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 11 Jul 2014 20:27:32 +0200
Subject: [gdal-dev] GSoC weekly report 8. GDAL Networking
In-Reply-To: <CAJB43VrkYGgdHJtpMdzm1gjtB40yh7fDzeyFJLBRCLJUkT3Gmw@mail.gmail.com>
References: <CAJB43VrkYGgdHJtpMdzm1gjtB40yh7fDzeyFJLBRCLJUkT3Gmw@mail.gmail.com>
Message-ID: <201407112027.32934.even.rouault@mines-paris.org>

Le vendredi 11 juillet 2014 20:21:36, Mikhail Gusev a ?crit :
> Hello everyone.
> According to my plan this week I worked on automatic graph building in GNM.
> See my blog post:
> http://gsoc2014gnm.blogspot.ru/2014/07/week-8-automatic-graph-building.html
> I'm also still a bit blocked on python tests and bindings. I haven't
> succeeded in building GDAL with python support using CMake. But I hope to
> finish this the next week.

Mikhail,

why do you mention CMake ? Your tree 
https://github.com/MikhanGusev/gdal/commits/trunk is based on GDAL trunk, 
which uses autoconf.

Anyway, you don't even need to ask for the python bindings at configure time. 
Building them should just be a matter of :

cd swig/python
python setup.py build

And if you want to install them 
* system-wide: (sudo) python setup.py install
* otherwise export PYTHONPATH=$PWD/build/lib.use_autocompletion

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From bishop.dev at gmail.com  Fri Jul 11 18:37:32 2014
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Sat, 12 Jul 2014 05:37:32 +0400
Subject: [gdal-dev] GSoC weekly report 8. GDAL Networking
In-Reply-To: <201407112027.32934.even.rouault@mines-paris.org>
References: <CAJB43VrkYGgdHJtpMdzm1gjtB40yh7fDzeyFJLBRCLJUkT3Gmw@mail.gmail.com>
	<201407112027.32934.even.rouault@mines-paris.org>
Message-ID: <CAD=YREC01o4GDnUPGRuhvJWyrX1JQwy_PS8p8vyTY91FvL+J4A@mail.gmail.com>

Even hi,

As was noted Mikhail works under windows on QTCreator. There is no autoconf
on window and building python bindings is not trivial.
So I wrote cmake scripts which build fine on both (Linux/windows) os.
Yes, were is some limitations on windows: cannot build swig python bindings
on debug build. This is because linker required python and all it modules
compiled with debug support. But on release build everything is OK.
So the scenario is so: Mikhail develop gnm C methods for bindings and test
them on debug build. If them works fine, than write python bindings in
separate file (i.e. gnm.i) and try to compile on release build. Than
install the bindings and test them too.

Best regards,
Dmitry
11 ???? 2014 ?. 22:27 ???????????? "Even Rouault" <
even.rouault at mines-paris.org> ???????:

> Le vendredi 11 juillet 2014 20:21:36, Mikhail Gusev a ?crit :
> > Hello everyone.
> > According to my plan this week I worked on automatic graph building in
> GNM.
> > See my blog post:
> >
> http://gsoc2014gnm.blogspot.ru/2014/07/week-8-automatic-graph-building.html
> > I'm also still a bit blocked on python tests and bindings. I haven't
> > succeeded in building GDAL with python support using CMake. But I hope to
> > finish this the next week.
>
> Mikhail,
>
> why do you mention CMake ? Your tree
> https://github.com/MikhanGusev/gdal/commits/trunk is based on GDAL trunk,
> which uses autoconf.
>
> Anyway, you don't even need to ask for the python bindings at configure
> time.
> Building them should just be a matter of :
>
> cd swig/python
> python setup.py build
>
> And if you want to install them
> * system-wide: (sudo) python setup.py install
> * otherwise export PYTHONPATH=$PWD/build/lib.use_autocompletion
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140712/c395d965/attachment.html>

From mccorb at cox.net  Sat Jul 12 09:45:24 2014
From: mccorb at cox.net (mccorb)
Date: Sat, 12 Jul 2014 09:45:24 -0700 (PDT)
Subject: [gdal-dev] Reading shapefile PRJ failing
Message-ID: <1405183523875-5150778.post@n6.nabble.com>

So I have tracked this down to the fact that the PRJ files that I have been
given to use have a BOM of 0xEF 0xBB 0xBF for the first three bytes of the
file. 

When I use the shapefiles that have these byte order markers the Layer class
method getSpatialRef() (java JNI bindings) returns null. I am guessing that
the PRJ file is being opened in binary mode instead of text mode possibly? 

Regardless, is there any setting I can make to coerce the file opener/reader
into ignoring the BOM when grabbing the WKT from the PRJ file?

thanks



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Reading-shapefile-PRJ-failing-tp5150778.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jan.heckman at gmail.com  Sat Jul 12 11:23:45 2014
From: jan.heckman at gmail.com (Jan Heckman)
Date: Sat, 12 Jul 2014 20:23:45 +0200
Subject: [gdal-dev] Reading shapefile PRJ failing
In-Reply-To: <1405183523875-5150778.post@n6.nabble.com>
References: <1405183523875-5150778.post@n6.nabble.com>
Message-ID: <CAKMUAtBW2L7G2q1kMM8VScS=6hquW0q82y1jBeWd4ESQwKugiQ@mail.gmail.com>

afaik PRJ files should be pure (ascii)text. You could refer to getting rid
of BOM
<http://stackoverflow.com/questions/204765/elegant-way-to-search-for-utf-8-files-with-bom>
to
clean them out.
Do not know an additional parameter for the file opener/reader.
Jan


On Sat, Jul 12, 2014 at 6:45 PM, mccorb <mccorb at cox.net> wrote:

> So I have tracked this down to the fact that the PRJ files that I have been
> given to use have a BOM of 0xEF 0xBB 0xBF for the first three bytes of the
> file.
>
> When I use the shapefiles that have these byte order markers the Layer
> class
> method getSpatialRef() (java JNI bindings) returns null. I am guessing that
> the PRJ file is being opened in binary mode instead of text mode possibly?
>
> Regardless, is there any setting I can make to coerce the file
> opener/reader
> into ignoring the BOM when grabbing the WKT from the PRJ file?
>
> thanks
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Reading-shapefile-PRJ-failing-tp5150778.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140712/f1714eff/attachment.html>

From even.rouault at mines-paris.org  Sat Jul 12 12:29:41 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 12 Jul 2014 21:29:41 +0200
Subject: [gdal-dev] Reading shapefile PRJ failing
In-Reply-To: <000001cf9dfc$1ad59c80$5080d580$@cox.net>
References: <1405183523875-5150778.post@n6.nabble.com> <RVYB1o00W06h8FG01VYDFY>
	<000001cf9dfc$1ad59c80$5080d580$@cox.net>
Message-ID: <201407122129.41726.even.rouault@mines-paris.org>

Brian,

I've added support in GDAL trunk for those files. I could see that at least 
another GIS software supported them, so...

Even

> Even,
> 
> I am not sure what generated it. It seems as though I have run across a lot
> of files that have a BOM that have thrown me in recent years. Most seem to
> have some relation to using Microsoft .net framework tools that have
> Unicode support built in from the ground up. But I am really not sure and
> that is just a guess. Some text editors seem to do it also. I just know
> that it has caused me all sorts of grief over the years with all sorts of
> software I have both used and written.
> 
> Here is what I have used in the past for the BOM list although the EF BB BF
> is by far the most common I have seen...
> http://en.wikipedia.org/wiki/Byte_order_mark
> 
> Anyway I have attached a shapefile that has a bom marker in the prj file.
> Not sure yet about the other files...if they have any similar anomalies or
> exactly what was used to gen the shapefile. I haven't looked at the shp,
> shx or dbf file yet...
> 
> Thanks,
> 
> 
> Brian S. McCormick
> mccorb at cox.net
> 918-749-5453
> 
> 
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Saturday, July 12, 2014 12:32 PM
> To: mccorb
> Subject: Re: [gdal-dev] Reading shapefile PRJ failing
> 
> Le samedi 12 juillet 2014 18:45:24, vous avez ?crit :
> > So I have tracked this down to the fact that the PRJ files that I have
> > been given to use have a BOM of 0xEF 0xBB 0xBF for the first three
> > bytes of the file.
> > 
> > When I use the shapefiles that have these byte order markers the Layer
> > class method getSpatialRef() (java JNI bindings) returns null. I am
> > guessing that the PRJ file is being opened in binary mode instead of
> > text mode possibly?
> > 
> > Regardless, is there any setting I can make to coerce the file
> > opener/reader into ignoring the BOM when grabbing the WKT from the PRJ
> > file?
> 
> Not really. GDAL should be enhanced to support such a file. Do you have a
> sample of such a .prj ? Do you know which software has generated it ?
> That's the first time I hear about .prj with BOM marker.
> 
> > thanks
> > 
> > 
> > 
> > --
> > View this message in context:
> > http://osgeo-org.1560.x6.nabble.com/Reading-shapefile-PRJ-failing-tp51
> > 5077 8.html Sent from the GDAL - Dev mailing list archive at
> > Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From mccorb at cox.net  Sat Jul 12 12:44:30 2014
From: mccorb at cox.net (mccorb)
Date: Sat, 12 Jul 2014 12:44:30 -0700 (PDT)
Subject: [gdal-dev] Reading shapefile PRJ failing
In-Reply-To: <201407122129.41726.even.rouault@mines-paris.org>
References: <1405183523875-5150778.post@n6.nabble.com>
	<201407122129.41726.even.rouault@mines-paris.org>
Message-ID: <000301cf9e09$935c0790$ba1416b0$@cox.net>

Evan,

 

Thank you so much. 

 

I?m fairly new to using GDAL/OGR. Will the fix appear in from the downloads page at http://www.gisinternals.com/sdk/ tomorrow? That is where we have been downloading from but not sure what the time lag is between those compiles and the trunk code you modified.

 

Again, thanks so much.

 

Brian

 

From: Even Rouault [via OSGeo.org] [mailto:ml-node+s1560n5150785h94 at n6.nabble.com] 
Sent: Saturday, July 12, 2014 2:31 PM
To: mccorb
Subject: Re: Reading shapefile PRJ failing

 

Brian, 

I've added support in GDAL trunk for those files. I could see that at least 
another GIS software supported them, so... 

Even 


> Even, 
> 
> I am not sure what generated it. It seems as though I have run across a lot 
> of files that have a BOM that have thrown me in recent years. Most seem to 
> have some relation to using Microsoft .net framework tools that have 
> Unicode support built in from the ground up. But I am really not sure and 
> that is just a guess. Some text editors seem to do it also. I just know 
> that it has caused me all sorts of grief over the years with all sorts of 
> software I have both used and written. 
> 
> Here is what I have used in the past for the BOM list although the EF BB BF 
> is by far the most common I have seen... 
> http://en.wikipedia.org/wiki/Byte_order_mark
> 
> Anyway I have attached a shapefile that has a bom marker in the prj file. 
> Not sure yet about the other files...if they have any similar anomalies or 
> exactly what was used to gen the shapefile. I haven't looked at the shp, 
> shx or dbf file yet... 
> 
> Thanks, 
> 
> 
> Brian S. McCormick 
> [hidden email] 
> 918-749-5453 
> 
> 
> 
> -----Original Message----- 
> From: Even Rouault [mailto:[hidden email]] 
> Sent: Saturday, July 12, 2014 12:32 PM 
> To: mccorb 
> Subject: Re: [gdal-dev] Reading shapefile PRJ failing 
> 
> Le samedi 12 juillet 2014 18:45:24, vous avez ?crit : 
> > So I have tracked this down to the fact that the PRJ files that I have 
> > been given to use have a BOM of 0xEF 0xBB 0xBF for the first three 
> > bytes of the file. 
> > 
> > When I use the shapefiles that have these byte order markers the Layer 
> > class method getSpatialRef() (java JNI bindings) returns null. I am 
> > guessing that the PRJ file is being opened in binary mode instead of 
> > text mode possibly? 
> > 
> > Regardless, is there any setting I can make to coerce the file 
> > opener/reader into ignoring the BOM when grabbing the WKT from the PRJ 
> > file? 
> 
> Not really. GDAL should be enhanced to support such a file. Do you have a 
> sample of such a .prj ? Do you know which software has generated it ? 
> That's the first time I hear about .prj with BOM marker. 
> 
> > thanks 
> > 
> > 
> > 
> > -- 
> > View this message in context: 
> > http://osgeo-org.1560.x6.nabble.com/Reading-shapefile-PRJ-failing-tp51
> > 5077 8.html Sent from the GDAL - Dev mailing list archive at 
> > Nabble.com. 
> > _______________________________________________ 
> > gdal-dev mailing list 
> > [hidden email] 
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Geospatial professional services 
> http://even.rouault.free.fr/services.html


-- 
Geospatial professional services 
http://even.rouault.free.fr/services.html
_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

  _____  

If you reply to this email, your message will be added to the discussion below:

http://osgeo-org.1560.x6.nabble.com/Reading-shapefile-PRJ-failing-tp5150778p5150785.html 

To unsubscribe from Reading shapefile PRJ failing, click here <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5150778&code=bWNjb3JiQGNveC5uZXR8NTE1MDc3OHwtMTM1NTE0NTE2OQ==> .
 <http://osgeo-org.1560.x6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml> NAML 





--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Reading-shapefile-PRJ-failing-tp5150778p5150786.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140712/843afde3/attachment.html>

From even.rouault at mines-paris.org  Sat Jul 12 13:08:05 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 12 Jul 2014 22:08:05 +0200
Subject: [gdal-dev] Reading shapefile PRJ failing
In-Reply-To: <000301cf9e09$935c0790$ba1416b0$@cox.net>
References: <1405183523875-5150778.post@n6.nabble.com>
	<201407122129.41726.even.rouault@mines-paris.org>
	<000301cf9e09$935c0790$ba1416b0$@cox.net>
Message-ID: <201407122208.05847.even.rouault@mines-paris.org>

Le samedi 12 juillet 2014 21:44:30, mccorb a ?crit :
> Evan,
> 
> 
> 
> Thank you so much.
> 
> 
> 
> I?m fairly new to using GDAL/OGR. Will the fix appear in from the downloads
> page at http://www.gisinternals.com/sdk/ tomorrow? That is where we have
> been downloading from but not sure what the time lag is between those
> compiles and the trunk code you modified.

Yes should appear in the  -development builds at top of page. Within next 12 
hours.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From varunsaraf14 at gmail.com  Sun Jul 13 12:01:32 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Mon, 14 Jul 2014 00:31:32 +0530
Subject: [gdal-dev] GSoC 2014 Weekly Report 8 : GDAL PostGIS Raster driver
Message-ID: <CAPfr+rtEO-6TAaPeFr8R0a=eTL6Rh7yGM6jvkjRPuCrQ0HKMAA@mail.gmail.com>

 Hi,

Below is my eighth weekly report.

*What did I do this week?*

   - Implemented calls from IRasterIO to the methods which are writing the
   query.

*What do I plan on doing next week?*

   - Processing of raster(s) and querying/updating the tiles already
   inserted with new band data.
   - Overview building.

*Am I blocked on anything?*

   - No.

Link to weekly report :
https://github.com/varunsaraf/postgis_raster/wiki/Report-8
Link to code repository : https://github.com/varunsaraf/postgis_raster
More details at : http://trac.osgeo.org/gdal/wiki/PostGIS_raster_driver

Regards,
Varun Saraf
Lab for Spatial Informatics
IIIT Hyderabad, India
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140714/5083d44c/attachment.html>

From adiba.nizami at gmail.com  Sun Jul 13 22:42:36 2014
From: adiba.nizami at gmail.com (adiba nizami)
Date: Mon, 14 Jul 2014 11:12:36 +0530
Subject: [gdal-dev] warp taking time
In-Reply-To: <ee54b51b7b3143d5b7b333ca71f51967@EXCHCS33.ornl.gov>
References: <1404986174668-5150453.post@n6.nabble.com>
	<CAMKgpOZECE1XytHs=LZr6fdwvUBgoV9DrC4f9Ubf71b9uyagyw@mail.gmail.com>
	<CAJ0c-gc06F9fJkXWXp2EgmuGyjqHgQdqWk5YPuKB5Eahe1b1aQ@mail.gmail.com>
	<ee54b51b7b3143d5b7b333ca71f51967@EXCHCS33.ornl.gov>
Message-ID: <CAH8QYjusHZ7Y7G_t283APbS+-EuxTrnj7O3t4E6YG-_SZRTaCg@mail.gmail.com>

Sorry for the late reply. Here is the command i  gave :

gdalwarp --config GDAL_CACHEMAX 512 -s_srs "+proj=aea +lat_1=28 +lat_2=12
+lat_0=20 +lon_0=87 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84
+units=m +no_defs" -t_srs "+proj=aea +lat_1=28 +lat_2=12 +lat_0=20
+lon_0=87 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m
+no_defs" -te -138559.10 571316.50 3010515.63 4012751.95 -tr 18 18 -wm 512
-co "BIGTIFF=YES" -srcnodata 255 -dstnodata 255  file1.tif file2.tif .....
file28.tif output.tif



On Thu, Jul 10, 2014 at 7:23 PM, Thornton, Michele M. <thorntonmm at ornl.gov>
wrote:

>  Hello,
>
>
>
> I?m interested in this thread.  One comment I can add about gdal_merge.py
> is that it does not properly handle nodata values from the full (padded)
> extent of the input files.  gdalwarp, which can be VERY slow, does handle
> the nodata values correctly.
>
>
>
> Michele Thornton
>
>
>
> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *bas smit
> *Sent:* Thursday, July 10, 2014 7:52 AM
> *To:* Chaitanya kumar CH
> *Cc:* gdal dev
> *Subject:* Re: [gdal-dev] warp taking time
>
>
>
> I am wondering why you are using gdalwarp for mosaicing images having same
> projection instead of gdal_merge.py?
>
>
>
> Bas Smit
>
>
>
> On Thu, Jul 10, 2014 at 7:14 PM, Chaitanya kumar CH <
> chaitanya.ch at gmail.com> wrote:
>
> garfy,
>
>
>
> Please provide the gdalwarp command you used. Did you modify GDAL_CACHEMAX?
>
>
>
> On Thu, Jul 10, 2014 at 3:26 PM, garfy <adiba.nizami at gmail.com> wrote:
>
> Dear All,
>
> I am trying to generate mosaic of 28 input images using *gdalwarp*.
> All are in same projection. It has taken 5 days to generate the final
> output.
> Please find the gdalinfo of input and output attached. The input files are
> passed to warp in the order in which the gdalinfo is present in the
> attachement.
>
> Any input on improving the time would be really helpful.
>
>
> Thanks
> input_files_gdalinfo.txt
> <
> http://osgeo-org.1560.x6.nabble.com/file/n5150453/input_files_gdalinfo.txt
> >
> final_output_gdalinfo.txt
> <
> http://osgeo-org.1560.x6.nabble.com/file/n5150453/final_output_gdalinfo.txt
> >
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/warp-taking-time-tp5150453.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Regards,
Adiba Khan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140714/4498db6b/attachment.html>

From allanoware at gmail.com  Mon Jul 14 00:02:33 2014
From: allanoware at gmail.com (Allan Oware)
Date: Mon, 14 Jul 2014 10:02:33 +0300
Subject: [gdal-dev] gdal2tiles.py generating dark tiles
Message-ID: <CAM2Hr0UkT9M-pAiygyR7A1daauFotzMBHTH0LBicNUEbBbyNUA@mail.gmail.com>

Hi all,
Dark tiles are generated when I run gdal2tiles.py on a .IMG file(a scanned
and georeferenced topographical map).
A sample png of the tiles generated is found here
<https://sites.google.com/site/lumtegis/files/519.png>. Even when i
translate to tiff, the output is still the same. Why does
gdal2tiles.py give this result ?
The gdalinfo output is as below:

Driver: HFA/Erdas Imagine Images (.img)
Files: ALOI.IMG
       ALOI.IMG.aux.xml
Size is 3830, 2552
Coordinate System is:
GEOGCS["GCS_WGS_1984",
    DATUM["WGS_1984",
        SPHEROID["WGS_1984",6378137.0,298.257223563]],
    PRIMEM["Greenwich",0.0],
    UNIT["Degree",0.017453292519943295]]
Origin = (32.999437318839924,3.000470692247897)
Pixel Size = (0.000392066994127,-0.000392066994127)
Metadata:
  DataType=Generic
Corner Coordinates:
Upper Left  (  32.9994373,   3.0004707) ( 32d59'57.97"E,  3d 0'1.69"N)
Lower Left  (  32.9994373,   1.9999157) ( 32d59'57.97"E,  1d59'59.70"N)
Upper Right (  34.5010539,   3.0004707) ( 34d30'3.79"E,  3d 0'1.69"N)
Lower Right (  34.5010539,   1.9999157) ( 34d30'3.79"E,  1d59'59.70"N)
Center      (  33.7502456,   2.5001932) ( 33d45'0.88"E,  2d30'0.70"N)
Band 1 Block=64x64 Type=UInt16, ColorInterp=Undefined
  Description = Layer_1
  Min=0.000 Max=255.000
  Minimum=0.000, Maximum=255.000, Mean=225.572, StdDev=31.338
  NoData Value=256
  Overviews: 1915x1276, 958x638, 479x319, 240x160
  Metadata:
    STATISTICS_COVARIANCES=982.046346716112,845.521289084631,710.510646703791
    STATISTICS_MINIMUM=0
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=225.57242379015
    STATISTICS_MEDIAN=0
    STATISTICS_MODE=0
    STATISTICS_STDDEV=31.337618714831
    STATISTICS_SKIPFACTORX=1
    STATISTICS_SKIPFACTORY=1
    STATISTICS_EXCLUDEDVALUES=
    LAYER_TYPE=athematic
  Image Structure Metadata:
    COMPRESSION=RLE
Band 2 Block=64x64 Type=UInt16, ColorInterp=Undefined
  Description = Layer_2
  Min=4.000 Max=255.000
  Minimum=4.000, Maximum=255.000, Mean=226.079, StdDev=29.739
  NoData Value=256
  Overviews: 1915x1276, 958x638, 479x319, 240x160
  Metadata:
    STATISTICS_COVARIANCES=845.521289084631,884.412989496947,765.062067015664
    STATISTICS_MINIMUM=4
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=226.07921779459
    STATISTICS_MEDIAN=0
    STATISTICS_MODE=0
    STATISTICS_STDDEV=29.739081853631
    STATISTICS_SKIPFACTORX=1
    STATISTICS_SKIPFACTORY=1
    STATISTICS_EXCLUDEDVALUES=
    LAYER_TYPE=athematic
  Image Structure Metadata:
    COMPRESSION=RLE
Band 3 Block=64x64 Type=UInt16, ColorInterp=Undefined
  Description = Layer_3
  Min=0.000 Max=255.000
  Minimum=0.000, Maximum=255.000, Mean=172.929, StdDev=27.135
  NoData Value=256
  Overviews: 1915x1276, 958x638, 479x319, 240x160
  Metadata:
    STATISTICS_COVARIANCES=710.510646703791,765.062067015664,736.335138826829
    STATISTICS_MINIMUM=0
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=172.92884721066
    STATISTICS_MEDIAN=0
    STATISTICS_MODE=0
    STATISTICS_STDDEV=27.135495920046
    STATISTICS_SKIPFACTORX=1
    STATISTICS_SKIPFACTORY=1
    STATISTICS_EXCLUDEDVALUES=
    LAYER_TYPE=athematic
  Image Structure Metadata:
    COMPRESSION=RLE


Thanks,
Allan.
-- 
Allan Oware
Cell: +254 727 365820
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140714/a3f28bac/attachment.html>

From chaitanya.ch at gmail.com  Mon Jul 14 00:52:41 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 14 Jul 2014 13:22:41 +0530
Subject: [gdal-dev] warp taking time
In-Reply-To: <CAH8QYjusHZ7Y7G_t283APbS+-EuxTrnj7O3t4E6YG-_SZRTaCg@mail.gmail.com>
References: <1404986174668-5150453.post@n6.nabble.com>
	<CAMKgpOZECE1XytHs=LZr6fdwvUBgoV9DrC4f9Ubf71b9uyagyw@mail.gmail.com>
	<CAJ0c-gc06F9fJkXWXp2EgmuGyjqHgQdqWk5YPuKB5Eahe1b1aQ@mail.gmail.com>
	<ee54b51b7b3143d5b7b333ca71f51967@EXCHCS33.ornl.gov>
	<CAH8QYjusHZ7Y7G_t283APbS+-EuxTrnj7O3t4E6YG-_SZRTaCg@mail.gmail.com>
Message-ID: <CAMKgpObS-h7zJM9d4hJPhTko9uCDhoWJo0R=dvgEV=h8f9CjtQ@mail.gmail.com>

Adiba,

I noticed that your source and target projections are same. Why not use
gdalbuildvrt and gdal_translate and skip the warping process? You create a
virtual mosaic (and assign the projection if needed) with buildvrt. You can
create a tiff file from the vrt file using gdal_translate.


On Mon, Jul 14, 2014 at 11:12 AM, adiba nizami <adiba.nizami at gmail.com>
wrote:

> Sorry for the late reply. Here is the command i  gave :
>
> gdalwarp --config GDAL_CACHEMAX 512 -s_srs "+proj=aea +lat_1=28 +lat_2=12
> +lat_0=20 +lon_0=87 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84
> +units=m +no_defs" -t_srs "+proj=aea +lat_1=28 +lat_2=12 +lat_0=20
> +lon_0=87 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m
> +no_defs" -te -138559.10 571316.50 3010515.63 4012751.95 -tr 18 18 -wm 512
> -co "BIGTIFF=YES" -srcnodata 255 -dstnodata 255  file1.tif file2.tif .....
> file28.tif output.tif
>
>
>
> On Thu, Jul 10, 2014 at 7:23 PM, Thornton, Michele M. <thorntonmm at ornl.gov
> > wrote:
>
>>  Hello,
>>
>>
>>
>> I?m interested in this thread.  One comment I can add about gdal_merge.py
>> is that it does not properly handle nodata values from the full (padded)
>> extent of the input files.  gdalwarp, which can be VERY slow, does handle
>> the nodata values correctly.
>>
>>
>>
>> Michele Thornton
>>
>>
>>
>> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
>> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *bas smit
>> *Sent:* Thursday, July 10, 2014 7:52 AM
>> *To:* Chaitanya kumar CH
>> *Cc:* gdal dev
>> *Subject:* Re: [gdal-dev] warp taking time
>>
>>
>>
>> I am wondering why you are using gdalwarp for mosaicing images having same
>> projection instead of gdal_merge.py?
>>
>>
>>
>> Bas Smit
>>
>>
>>
>> On Thu, Jul 10, 2014 at 7:14 PM, Chaitanya kumar CH <
>> chaitanya.ch at gmail.com> wrote:
>>
>> garfy,
>>
>>
>>
>> Please provide the gdalwarp command you used. Did you modify
>> GDAL_CACHEMAX?
>>
>>
>>
>> On Thu, Jul 10, 2014 at 3:26 PM, garfy <adiba.nizami at gmail.com> wrote:
>>
>> Dear All,
>>
>> I am trying to generate mosaic of 28 input images using *gdalwarp*.
>> All are in same projection. It has taken 5 days to generate the final
>> output.
>> Please find the gdalinfo of input and output attached. The input files are
>> passed to warp in the order in which the gdalinfo is present in the
>> attachement.
>>
>> Any input on improving the time would be really helpful.
>>
>>
>> Thanks
>> input_files_gdalinfo.txt
>> <
>> http://osgeo-org.1560.x6.nabble.com/file/n5150453/input_files_gdalinfo.txt
>> >
>> final_output_gdalinfo.txt
>> <
>> http://osgeo-org.1560.x6.nabble.com/file/n5150453/final_output_gdalinfo.txt
>> >
>>
>>
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/warp-taking-time-tp5150453.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Regards,
> Adiba Khan
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140714/55d1de53/attachment-0001.html>

From Richard.Mitanchey at cerema.fr  Mon Jul 14 03:29:46 2014
From: Richard.Mitanchey at cerema.fr (MITANCHEY Richard - CEREMA/DTecTV/ESI/GNSI)
Date: Mon, 14 Jul 2014 12:29:46 +0200
Subject: [gdal-dev] RE : Re:  Reading shapefile PRJ failing
Message-ID: <die9twkpm6434sc9fgqokiet.1405328133657@email.android.com>




Envoy? depuis un mobile Samsung

-------- Message d'origine --------
De : "> Even Rouault (par Internet, d?p?t gdal-dev-bounces at lists.osgeo.org)" <even.rouault at mines-paris.org> 
Date : 12/07/2014  9:29 PM  (GMT+01:00) 
A : Brian McCormick <mccorb at cox.net> 
Cc : gdal-dev at lists.osgeo.org 
Objet : Re: [gdal-dev] Reading shapefile PRJ failing 
 
Brian,

I've added support in GDAL trunk for those files. I could see that at least 
another GIS software supported them, so...

Even

> Even,
> 
> I am not sure what generated it. It seems as though I have run across a lot
> of files that have a BOM that have thrown me in recent years. Most seem to
> have some relation to using Microsoft .net framework tools that have
> Unicode support built in from the ground up. But I am really not sure and
> that is just a guess. Some text editors seem to do it also. I just know
> that it has caused me all sorts of grief over the years with all sorts of
> software I have both used and written.
> 
> Here is what I have used in the past for the BOM list although the EF BB BF
> is by far the most common I have seen...
> http://en.wikipedia.org/wiki/Byte_order_mark
> 
> Anyway I have attached a shapefile that has a bom marker in the prj file.
> Not sure yet about the other files...if they have any similar anomalies or
> exactly what was used to gen the shapefile. I haven't looked at the shp,
> shx or dbf file yet...
> 
> Thanks,
> 
> 
> Brian S. McCormick
> mccorb at cox.net
> 918-749-5453
> 
> 
> 
> -----Original Message-----
> From: Even Rouault [mailto:even.rouault at mines-paris.org]
> Sent: Saturday, July 12, 2014 12:32 PM
> To: mccorb
> Subject: Re: [gdal-dev] Reading shapefile PRJ failing
> 
> Le samedi 12 juillet 2014 18:45:24, vous avez ?crit :
> > So I have tracked this down to the fact that the PRJ files that I have
> > been given to use have a BOM of 0xEF 0xBB 0xBF for the first three
> > bytes of the file.
> > 
> > When I use the shapefiles that have these byte order markers the Layer
> > class method getSpatialRef() (java JNI bindings) returns null. I am
> > guessing that the PRJ file is being opened in binary mode instead of
> > text mode possibly?
> > 
> > Regardless, is there any setting I can make to coerce the file
> > opener/reader into ignoring the BOM when grabbing the WKT from the PRJ
> > file?
> 
> Not really. GDAL should be enhanced to support such a file. Do you have a
> sample of such a .prj ? Do you know which software has generated it ?
> That's the first time I hear about .prj with BOM marker.
> 
> > thanks
> > 
> > 
> > 
> > --
> > View this message in context:
> > http://osgeo-org.1560.x6.nabble.com/Reading-shapefile-PRJ-failing-tp51
> > 5077 8.html Sent from the GDAL - Dev mailing list archive at
> > Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140714/ea35bfdb/attachment.html>

From allanoware at gmail.com  Mon Jul 14 04:37:03 2014
From: allanoware at gmail.com (Allan Oware)
Date: Mon, 14 Jul 2014 14:37:03 +0300
Subject: [gdal-dev] gdal2tiles.py generating dark tiles
In-Reply-To: <CAM2Hr0UkT9M-pAiygyR7A1daauFotzMBHTH0LBicNUEbBbyNUA@mail.gmail.com>
References: <CAM2Hr0UkT9M-pAiygyR7A1daauFotzMBHTH0LBicNUEbBbyNUA@mail.gmail.com>
Message-ID: <CAM2Hr0XYJ4T7jXWBn58Ym84yKYStk__v6MT78d9TVP9fwUWkEw@mail.gmail.com>

After digging around and comparing other images, I realised that the .IMG
lacks color interpretation since the ColorInterp parameter in gdalinfo
output is undefined
for the 3 bands.
When I attempt to gdal_translate to Gtiff with -expand rgb option, the
error output was: band 1 has no color table.
Any hint on how to properly define color interpretation for a .IMG ? I have
qgis, grass and gdal in an ubuntu setup.

Thanks,
Allan.



On Mon, Jul 14, 2014 at 10:02 AM, Allan Oware <allanoware at gmail.com> wrote:

>
> Hi all,
> Dark tiles are generated when I run gdal2tiles.py on a .IMG file(a scanned
> and georeferenced topographical map).
> A sample png of the tiles generated is found here
> <https://sites.google.com/site/lumtegis/files/519.png>. Even when i
> translate to tiff, the output is still the same. Why does
> gdal2tiles.py give this result ?
> The gdalinfo output is as below:
>
> Driver: HFA/Erdas Imagine Images (.img)
> Files: ALOI.IMG
>        ALOI.IMG.aux.xml
> Size is 3830, 2552
> Coordinate System is:
> GEOGCS["GCS_WGS_1984",
>     DATUM["WGS_1984",
>         SPHEROID["WGS_1984",6378137.0,298.257223563]],
>     PRIMEM["Greenwich",0.0],
>     UNIT["Degree",0.017453292519943295]]
> Origin = (32.999437318839924,3.000470692247897)
> Pixel Size = (0.000392066994127,-0.000392066994127)
> Metadata:
>   DataType=Generic
> Corner Coordinates:
> Upper Left  (  32.9994373,   3.0004707) ( 32d59'57.97"E,  3d 0'1.69"N)
> Lower Left  (  32.9994373,   1.9999157) ( 32d59'57.97"E,  1d59'59.70"N)
> Upper Right (  34.5010539,   3.0004707) ( 34d30'3.79"E,  3d 0'1.69"N)
> Lower Right (  34.5010539,   1.9999157) ( 34d30'3.79"E,  1d59'59.70"N)
> Center      (  33.7502456,   2.5001932) ( 33d45'0.88"E,  2d30'0.70"N)
> Band 1 Block=64x64 Type=UInt16, ColorInterp=Undefined
>   Description = Layer_1
>   Min=0.000 Max=255.000
>   Minimum=0.000, Maximum=255.000, Mean=225.572, StdDev=31.338
>   NoData Value=256
>   Overviews: 1915x1276, 958x638, 479x319, 240x160
>   Metadata:
>     STATISTICS_COVARIANCES=982.046346716112,845.521289084631,710.510646703791
>     STATISTICS_MINIMUM=0
>     STATISTICS_MAXIMUM=255
>     STATISTICS_MEAN=225.57242379015
>     STATISTICS_MEDIAN=0
>     STATISTICS_MODE=0
>     STATISTICS_STDDEV=31.337618714831
>     STATISTICS_SKIPFACTORX=1
>     STATISTICS_SKIPFACTORY=1
>     STATISTICS_EXCLUDEDVALUES=
>     LAYER_TYPE=athematic
>   Image Structure Metadata:
>     COMPRESSION=RLE
> Band 2 Block=64x64 Type=UInt16, ColorInterp=Undefined
>   Description = Layer_2
>   Min=4.000 Max=255.000
>   Minimum=4.000, Maximum=255.000, Mean=226.079, StdDev=29.739
>   NoData Value=256
>   Overviews: 1915x1276, 958x638, 479x319, 240x160
>   Metadata:
>     STATISTICS_COVARIANCES=845.521289084631,884.412989496947,765.062067015664
>     STATISTICS_MINIMUM=4
>     STATISTICS_MAXIMUM=255
>     STATISTICS_MEAN=226.07921779459
>     STATISTICS_MEDIAN=0
>     STATISTICS_MODE=0
>     STATISTICS_STDDEV=29.739081853631
>     STATISTICS_SKIPFACTORX=1
>     STATISTICS_SKIPFACTORY=1
>     STATISTICS_EXCLUDEDVALUES=
>     LAYER_TYPE=athematic
>   Image Structure Metadata:
>     COMPRESSION=RLE
> Band 3 Block=64x64 Type=UInt16, ColorInterp=Undefined
>   Description = Layer_3
>   Min=0.000 Max=255.000
>   Minimum=0.000, Maximum=255.000, Mean=172.929, StdDev=27.135
>   NoData Value=256
>   Overviews: 1915x1276, 958x638, 479x319, 240x160
>   Metadata:
>     STATISTICS_COVARIANCES=710.510646703791,765.062067015664,736.335138826829
>     STATISTICS_MINIMUM=0
>     STATISTICS_MAXIMUM=255
>     STATISTICS_MEAN=172.92884721066
>     STATISTICS_MEDIAN=0
>     STATISTICS_MODE=0
>     STATISTICS_STDDEV=27.135495920046
>     STATISTICS_SKIPFACTORX=1
>     STATISTICS_SKIPFACTORY=1
>     STATISTICS_EXCLUDEDVALUES=
>     LAYER_TYPE=athematic
>   Image Structure Metadata:
>     COMPRESSION=RLE
>
>
> Thanks,
> Allan.
> --
> Allan Oware
> Cell: +254 727 365820
>



-- 
Allan Oware
Cell: +254 727 365820
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140714/3d0d06f3/attachment.html>

From JLiu at eris.ca  Mon Jul 14 07:52:14 2014
From: JLiu at eris.ca (Liu, Jian)
Date: Mon, 14 Jul 2014 10:52:14 -0400
Subject: [gdal-dev] gdal installation, geopdf not recognized
Message-ID: <6EA4EFC234788744A8304EE0D4B8AF986B5B441DD4@bigtorex01>

Hello,

I have been trying to install GDAL to convert USGS GeoPdf. Googling gave me a couple of links for quick installation for windows.

http://trac.osgeo.org/osgeo4w/wiki
?         http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal        (GDAL?1.11.0.win32?py2.7.exe<javascript:;>)

I have 32 bit machine, windows 7 and python 2.7. There was a side-by-side configuration error, so I had to get that .dll, and I tried a couple of times. The installation seemed successful, however, I got error when reading a geopdf:

ERROR 4: `C:\TestFolder\WI_Madison_West_20100723_TM_geo.pdf' not recognized as a supported file format.

Even though pdf is listed with gdalinfo ?formats:  PDF (rw): Geospatial PDF

Anybody could point me to a solution to this? It?s much appreciated.
(I saw a previous post about cleaning before a new installation. That could be my problem too. But not sure how to do this with windows. Any clue would be helpful, thanks!)

Regards,
Jian
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140714/f2f1909a/attachment-0001.html>

From eadam at co.lincoln.or.us  Mon Jul 14 10:40:08 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 14 Jul 2014 10:40:08 -0700
Subject: [gdal-dev] gdal installation, geopdf not recognized
In-Reply-To: <6EA4EFC234788744A8304EE0D4B8AF986B5B441DD4@bigtorex01>
References: <6EA4EFC234788744A8304EE0D4B8AF986B5B441DD4@bigtorex01>
Message-ID: <CACqBkM9_iuaXYwC+m20Dfs52UT44sS0GbmiWB8EThYyE+xFJCg@mail.gmail.com>

Hi Jian,

On Mon, Jul 14, 2014 at 7:52 AM, Liu, Jian <JLiu at eris.ca> wrote:
> Hello,
>
>
>
> I have been trying to install GDAL to convert USGS GeoPdf. Googling gave me
> a couple of links for quick installation for windows.
>

http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries lists some
additional options.  I often use http://www.gisinternals.com/sdk/ from
Tamas.


>
>
> http://trac.osgeo.org/osgeo4w/wiki
>
> ?         http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal
> (GDAL?1.11.0.win32?py2.7.exe)
>
>
>
> I have 32 bit machine, windows 7 and python 2.7. There was a side-by-side
> configuration error, so I had to get that .dll, and I tried a couple of
> times. The installation seemed successful, however, I got error when reading
> a geopdf:
>
>
>
> ERROR 4: `C:\TestFolder\WI_Madison_West_20100723_TM_geo.pdf' not recognized
> as a supported file format.
>

I got this error from OSGeo4W too.  The last two lines of this page,
http://trac.osgeo.org/osgeo4w/ticket/408, lists the mailing list and
ticket tracker.  You can ask or report this error there.  Searching
through trac for OSGeo4W, I found this which seems like it might be
similar, http://trac.osgeo.org/osgeo4w/ticket/408

If you list a link to the file, it is easier for people to test.  I
found, this, ims.er.usgs.gov/gda_services/download?item_id=5954807 for
testing.  I tested with about a four month old download from
http://www.gisinternals.com/sdk/ and it worked showing this,

gdalinfo WI_Madison_West_20130722_TM_geo.pdf
Driver: PDF/Geospatial PDF
Files: WI_Madison_West_20130722_TM_geo.pdf
Size is 13656, 17407
Coordinate System is:
PROJCS["UTM Zone 16, Northern Hemisphere",
...
...
Corner Coordinates:
Upper Left  (  294830.111, 4779306.587) ( 89d31'22.05"W, 43d 8'19.31"N)
Lower Left  (  294317.106, 4761635.933) ( 89d31'21.23"W, 42d58'46.52"N)
Upper Right (  308692.951, 4778904.128) ( 89d21' 8.42"W, 43d 8'19.34"N)
Lower Right (  308179.946, 4761233.474) ( 89d21' 9.19"W, 42d58'46.51"N)
Center      (  301505.029, 4770270.031) ( 89d26'15.22"W, 43d 3'33.04"N)
Band 1 Block=1024x1024 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=1024x1024 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=1024x1024 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=1024x1024 Type=Byte, ColorInterp=Alpha

So the file is fine but something appears to be wrong with the OSGeo4W
geopdf support. The binaries at http://www.gisinternals.com/sdk/ from
Tamas seem to properly support geopdf.


Best Regards, Eli

>
>
> Even though pdf is listed with gdalinfo ?formats:  PDF (rw): Geospatial PDF
>
>
>
> Anybody could point me to a solution to this? It?s much appreciated.
>
> (I saw a previous post about cleaning before a new installation. That could
> be my problem too. But not sure how to do this with windows. Any clue would
> be helpful, thanks!)
>
>
>
> Regards,
>
> Jian
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jef at norbit.de  Mon Jul 14 11:17:21 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Mon, 14 Jul 2014 20:17:21 +0200
Subject: [gdal-dev] gdal installation, geopdf not recognized
In-Reply-To: <CACqBkM9_iuaXYwC+m20Dfs52UT44sS0GbmiWB8EThYyE+xFJCg@mail.gmail.com>
References: <6EA4EFC234788744A8304EE0D4B8AF986B5B441DD4@bigtorex01>
	<CACqBkM9_iuaXYwC+m20Dfs52UT44sS0GbmiWB8EThYyE+xFJCg@mail.gmail.com>
Message-ID: <20140714181721.GA14230@norbit.de>

Hi Eli,

On Mon, 14. Jul 2014 at 10:40:08 -0700, Eli Adam wrote:
> I got this error from OSGeo4W too.  The last two lines of this page,
> http://trac.osgeo.org/osgeo4w/ticket/408, lists the mailing list and
> ticket tracker.  You can ask or report this error there.  Searching
> through trac for OSGeo4W, I found this which seems like it might be
> similar, http://trac.osgeo.org/osgeo4w/ticket/408

I can't reproduce that.  WI_Madison_West_20130722_TM_geo.pdf works fine
with both the 32 and the 64bit build in OSGeo4W (using gdal-1.11.0-2).


J?rgen

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From eadam at co.lincoln.or.us  Mon Jul 14 12:03:31 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 14 Jul 2014 12:03:31 -0700
Subject: [gdal-dev] gdal installation, geopdf not recognized
In-Reply-To: <20140714181721.GA14230@norbit.de>
References: <6EA4EFC234788744A8304EE0D4B8AF986B5B441DD4@bigtorex01>
	<CACqBkM9_iuaXYwC+m20Dfs52UT44sS0GbmiWB8EThYyE+xFJCg@mail.gmail.com>
	<20140714181721.GA14230@norbit.de>
Message-ID: <CACqBkM9yABZ-w2OCW5RLGfSVFKS8hpL57gJTXjyW_MoZR7Gtdg@mail.gmail.com>

On Mon, Jul 14, 2014 at 11:17 AM, J?rgen E. <jef at norbit.de> wrote:
> Hi Eli,
>
> On Mon, 14. Jul 2014 at 10:40:08 -0700, Eli Adam wrote:
>> I got this error from OSGeo4W too.  The last two lines of this page,
>> http://trac.osgeo.org/osgeo4w/ticket/408, lists the mailing list and
>> ticket tracker.  You can ask or report this error there.  Searching
>> through trac for OSGeo4W, I found this which seems like it might be
>> similar, http://trac.osgeo.org/osgeo4w/ticket/408
>
> I can't reproduce that.  WI_Madison_West_20130722_TM_geo.pdf works fine
> with both the 32 and the 64bit build in OSGeo4W (using gdal-1.11.0-2).
>

I tried gdalinfo --debug on but that did not provide additional information.

gdalinfo --version  reports GDAL 1.11.0, released 2014/04/16

Before I try updating OSGeo4W and seeing if anything changes, is there
anything else to try to find the source of the error?  My install is
the result of an advanced install about three months ago and probably
updated about a month or two ago.

Thanks, Eli


>
> J?rgen
>
> --
> J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
> Software Engineer         D-26506 Norden               http://www.norbit.de
>
> --
> norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
> Rheinstrasse 13, 26506 Norden
> GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jef at norbit.de  Mon Jul 14 12:35:16 2014
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Mon, 14 Jul 2014 21:35:16 +0200
Subject: [gdal-dev] gdal installation, geopdf not recognized
In-Reply-To: <CACqBkM9yABZ-w2OCW5RLGfSVFKS8hpL57gJTXjyW_MoZR7Gtdg@mail.gmail.com>
References: <6EA4EFC234788744A8304EE0D4B8AF986B5B441DD4@bigtorex01>
	<CACqBkM9_iuaXYwC+m20Dfs52UT44sS0GbmiWB8EThYyE+xFJCg@mail.gmail.com>
	<20140714181721.GA14230@norbit.de>
	<CACqBkM9yABZ-w2OCW5RLGfSVFKS8hpL57gJTXjyW_MoZR7Gtdg@mail.gmail.com>
Message-ID: <20140714193516.GA28583@norbit.de>

Hi Eli,

> > On Mon, 14. Jul 2014 at 10:40:08 -0700, Eli Adam wrote:
> >> Searching through trac for OSGeo4W, I found this which seems like it might
> >> be similar, http://trac.osgeo.org/osgeo4w/ticket/408

> > I can't reproduce that.  WI_Madison_West_20130722_TM_geo.pdf works fine
> > with both the 32 and the 64bit build in OSGeo4W (using gdal-1.11.0-2).

> Before I try updating OSGeo4W and seeing if anything changes, is there
> anything else to try to find the source of the error?  My install is
> the result of an advanced install about three months ago and probably
> updated about a month or two ago.

Ok, that's explains it.  #408 tries to explain that 1.11.0-2 is from 
9 days ago and introduces pdf read support - earlier didn't have it.

J?rgen

-- 
J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
Software Engineer           D-26506 Norden             http://www.norbit.de
QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From JLiu at eris.ca  Mon Jul 14 13:50:17 2014
From: JLiu at eris.ca (Liu, Jian)
Date: Mon, 14 Jul 2014 16:50:17 -0400
Subject: [gdal-dev] gdal installation, geopdf not recognized
In-Reply-To: <CACqBkM9_iuaXYwC+m20Dfs52UT44sS0GbmiWB8EThYyE+xFJCg@mail.gmail.com>
References: <6EA4EFC234788744A8304EE0D4B8AF986B5B441DD4@bigtorex01>
	<CACqBkM9_iuaXYwC+m20Dfs52UT44sS0GbmiWB8EThYyE+xFJCg@mail.gmail.com>
Message-ID: <6EA4EFC234788744A8304EE0D4B8AF986B5B442191@bigtorex01>

Thanks Eli and J?rgen. 

Eli, 
The link you gave solved my problem. Thank you very much! I was trying to use GDAL with python bindings. So I keep the installation from http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal  (GDAL?1.11.0.win32?py2.7.exe)  and manually replaced and added some files using those from the link you gave. Not sure which one(s) did the fix, and not sure if that is a proper way, but I am glad it's working now. Thank you so much!  

Best regards,
Jian 



-----Original Message-----
From: Eli Adam [mailto:eadam at co.lincoln.or.us] 
Sent: Mon, July 14, 2014 1:40 PM
To: Liu, Jian
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] gdal installation, geopdf not recognized

Hi Jian,

On Mon, Jul 14, 2014 at 7:52 AM, Liu, Jian <JLiu at eris.ca> wrote:
> Hello,
>
>
>
> I have been trying to install GDAL to convert USGS GeoPdf. Googling 
> gave me a couple of links for quick installation for windows.
>

http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries lists some additional options.  I often use http://www.gisinternals.com/sdk/ from Tamas.


>
>
> http://trac.osgeo.org/osgeo4w/wiki
>
> ?         http://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal
> (GDAL?1.11.0.win32?py2.7.exe)
>
>
>
> I have 32 bit machine, windows 7 and python 2.7. There was a 
> side-by-side configuration error, so I had to get that .dll, and I 
> tried a couple of times. The installation seemed successful, however, 
> I got error when reading a geopdf:
>
>
>
> ERROR 4: `C:\TestFolder\WI_Madison_West_20100723_TM_geo.pdf' not 
> recognized as a supported file format.
>

I got this error from OSGeo4W too.  The last two lines of this page, http://trac.osgeo.org/osgeo4w/ticket/408, lists the mailing list and ticket tracker.  You can ask or report this error there.  Searching through trac for OSGeo4W, I found this which seems like it might be similar, http://trac.osgeo.org/osgeo4w/ticket/408

If you list a link to the file, it is easier for people to test.  I found, this, ims.er.usgs.gov/gda_services/download?item_id=5954807 for testing.  I tested with about a four month old download from http://www.gisinternals.com/sdk/ and it worked showing this,

gdalinfo WI_Madison_West_20130722_TM_geo.pdf
Driver: PDF/Geospatial PDF
Files: WI_Madison_West_20130722_TM_geo.pdf
Size is 13656, 17407
Coordinate System is:
PROJCS["UTM Zone 16, Northern Hemisphere", ...
...
Corner Coordinates:
Upper Left  (  294830.111, 4779306.587) ( 89d31'22.05"W, 43d 8'19.31"N) Lower Left  (  294317.106, 4761635.933) ( 89d31'21.23"W, 42d58'46.52"N) Upper Right (  308692.951, 4778904.128) ( 89d21' 8.42"W, 43d 8'19.34"N) Lower Right (  308179.946, 4761233.474) ( 89d21' 9.19"W, 42d58'46.51"N)
Center      (  301505.029, 4770270.031) ( 89d26'15.22"W, 43d 3'33.04"N)
Band 1 Block=1024x1024 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=1024x1024 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=1024x1024 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=1024x1024 Type=Byte, ColorInterp=Alpha

So the file is fine but something appears to be wrong with the OSGeo4W geopdf support. The binaries at http://www.gisinternals.com/sdk/ from Tamas seem to properly support geopdf.


Best Regards, Eli

>
>
> Even though pdf is listed with gdalinfo ?formats:  PDF (rw): 
> Geospatial PDF
>
>
>
> Anybody could point me to a solution to this? It?s much appreciated.
>
> (I saw a previous post about cleaning before a new installation. That 
> could be my problem too. But not sure how to do this with windows. Any 
> clue would be helpful, thanks!)
>
>
>
> Regards,
>
> Jian
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From eadam at co.lincoln.or.us  Mon Jul 14 15:05:05 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 14 Jul 2014 15:05:05 -0700
Subject: [gdal-dev] gdal installation, geopdf not recognized
In-Reply-To: <20140714193516.GA28583@norbit.de>
References: <6EA4EFC234788744A8304EE0D4B8AF986B5B441DD4@bigtorex01>
	<CACqBkM9_iuaXYwC+m20Dfs52UT44sS0GbmiWB8EThYyE+xFJCg@mail.gmail.com>
	<20140714181721.GA14230@norbit.de>
	<CACqBkM9yABZ-w2OCW5RLGfSVFKS8hpL57gJTXjyW_MoZR7Gtdg@mail.gmail.com>
	<20140714193516.GA28583@norbit.de>
Message-ID: <CACqBkM_vVyib4wypj0V2gAJrb9o=NkxrS8xNowZVatz765Qa8A@mail.gmail.com>

On Mon, Jul 14, 2014 at 12:35 PM, J?rgen E. <jef at norbit.de> wrote:
> Hi Eli,
>
>> > On Mon, 14. Jul 2014 at 10:40:08 -0700, Eli Adam wrote:
>> >> Searching through trac for OSGeo4W, I found this which seems like it might
>> >> be similar, http://trac.osgeo.org/osgeo4w/ticket/408
>
>> > I can't reproduce that.  WI_Madison_West_20130722_TM_geo.pdf works fine
>> > with both the 32 and the 64bit build in OSGeo4W (using gdal-1.11.0-2).
>
>> Before I try updating OSGeo4W and seeing if anything changes, is there
>> anything else to try to find the source of the error?  My install is
>> the result of an advanced install about three months ago and probably
>> updated about a month or two ago.
>
> Ok, that's explains it.  #408 tries to explain that 1.11.0-2 is from
> 9 days ago and introduces pdf read support - earlier didn't have it.

More carefully reading, I now see that the fix was 9 days ago.  I
updated and as expected OSGeo4W reads geopdf fine.

Thanks, Eli

>
> J?rgen
>
> --
> J?rgen E. Fischer           norBIT GmbH             Tel. +49-4931-918175-31
> Dipl.-Inf. (FH)             Rheinstra?e 13          Fax. +49-4931-918175-50
> Software Engineer           D-26506 Norden             http://www.norbit.de
> QGIS release manager (PSC)  Germany                    IRC: jef on FreeNode
>
> --
> norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
> Rheinstrasse 13, 26506 Norden
> GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From kalu671 at gmail.com  Mon Jul 14 15:52:52 2014
From: kalu671 at gmail.com (devendra dahal)
Date: Mon, 14 Jul 2014 17:52:52 -0500
Subject: [gdal-dev] [BULK] Re: Dissolve shapefile using GDAL/OGR
In-Reply-To: <1405088468881-5150675.post@n6.nabble.com>
References: <CAKGFd-zX5HftF611LHoWhzv6kVXMcXMAB5PJsxKMJC_D_pXEiA@mail.gmail.com>
	<loom.20130226T150433-186@post.gmane.org>
	<CAKGFd-ya0QuY0jJ+7FberUWOE0dckXNjmxXWBwCN0gHNy82RYA@mail.gmail.com>
	<1374247404172-5067633.post@n6.nabble.com>
	<201307191959.36508.even.rouault@mines-paris.org>
	<AA4FE6F1C40C7F42843DFCC503EE2DA11695A311CE@EXCHANGE.corp.rfweston.com>
	<1374781627369-5068800.post@n6.nabble.com>
	<1405088468881-5150675.post@n6.nabble.com>
Message-ID: <CAMJhjUWoOs1dO-7KVRTvC4nz4mm8v6tOZuZ5F102SipmXO5+Ag@mail.gmail.com>

Hello all,
Does anybody have suggestions on this issue?
I am just interested on dissolving polygons, if there is another way
around, too.

thanks
On Jul 11, 2014 9:21 AM, "kalu671" <kalu671 at gmail.com> wrote:

> Hello Dan,
> I tried to use the syntax and I am getting the error:
> "The filename, directory name, or volume label syntax is incorrect."
>
> my syntax is as below:
> inFile = "D:\Dir1\Polygons.shp"
> outFile = "D:\Dir2\Dissolved_polygons.shp"
>
> dissolve = 'C:\OSGeo4W64\apps\saga\saga_cmd shapes_polygons "Polygon
> Dissolve" -POLYGONS = ' + inFile + ' -DISSOLVED = ' + outFile + ' -FIELD_1=
> Value -DISSOLVE= 0'
>
> subprocess.call(dissolve, shell=True)
>
> Would you please suggest what did I do wrong?
>
> Thanks
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-Dissolve-shapefile-using-GDAL-OGR-tp5036930p5150675.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140714/fae72559/attachment.html>

From mwtoews at gmail.com  Mon Jul 14 16:12:21 2014
From: mwtoews at gmail.com (Mike Toews)
Date: Tue, 15 Jul 2014 11:12:21 +1200
Subject: [gdal-dev] [BULK] Re: Dissolve shapefile using GDAL/OGR
In-Reply-To: <1405088468881-5150675.post@n6.nabble.com>
References: <CAKGFd-zX5HftF611LHoWhzv6kVXMcXMAB5PJsxKMJC_D_pXEiA@mail.gmail.com>
	<loom.20130226T150433-186@post.gmane.org>
	<CAKGFd-ya0QuY0jJ+7FberUWOE0dckXNjmxXWBwCN0gHNy82RYA@mail.gmail.com>
	<1374247404172-5067633.post@n6.nabble.com>
	<201307191959.36508.even.rouault@mines-paris.org>
	<AA4FE6F1C40C7F42843DFCC503EE2DA11695A311CE@EXCHANGE.corp.rfweston.com>
	<1374781627369-5068800.post@n6.nabble.com>
	<1405088468881-5150675.post@n6.nabble.com>
Message-ID: <CAM2FmMrTHiE_6g6XW_tQnU_k--bQaN-vMRKVd5NSOFVRtqzPgg@mail.gmail.com>

The path strings are not escaped, so dissolve[13] is '\a' or '\x07'
and not 'a', which makes the path invalid.

For Windows paths, the best practice is to either use forward slashes
(like unix), or use raw escape with r as a string prefix, e.g.

dissolve = r'C:\OSGeo4W64\apps...'

On 12 July 2014 02:21, kalu671 <kalu671 at gmail.com> wrote:
> Hello Dan,
> I tried to use the syntax and I am getting the error:
> "The filename, directory name, or volume label syntax is incorrect."
>
> my syntax is as below:
> inFile = "D:\Dir1\Polygons.shp"
> outFile = "D:\Dir2\Dissolved_polygons.shp"
>
> dissolve = 'C:\OSGeo4W64\apps\saga\saga_cmd shapes_polygons "Polygon
> Dissolve" -POLYGONS = ' + inFile + ' -DISSOLVED = ' + outFile + ' -FIELD_1=
> Value -DISSOLVE= 0'
>
> subprocess.call(dissolve, shell=True)
>
> Would you please suggest what did I do wrong?
>
> Thanks

From chaitanya.ch at gmail.com  Mon Jul 14 23:36:50 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue, 15 Jul 2014 12:06:50 +0530
Subject: [gdal-dev] warp taking time
In-Reply-To: <CAH8QYju371QpLNazsNK3MNxOcs02ZRDvRqWenOuOq3e1cpGB+A@mail.gmail.com>
References: <1404986174668-5150453.post@n6.nabble.com>
	<CAMKgpOZECE1XytHs=LZr6fdwvUBgoV9DrC4f9Ubf71b9uyagyw@mail.gmail.com>
	<CAJ0c-gc06F9fJkXWXp2EgmuGyjqHgQdqWk5YPuKB5Eahe1b1aQ@mail.gmail.com>
	<ee54b51b7b3143d5b7b333ca71f51967@EXCHCS33.ornl.gov>
	<CAH8QYjusHZ7Y7G_t283APbS+-EuxTrnj7O3t4E6YG-_SZRTaCg@mail.gmail.com>
	<CAMKgpObS-h7zJM9d4hJPhTko9uCDhoWJo0R=dvgEV=h8f9CjtQ@mail.gmail.com>
	<CAH8QYju371QpLNazsNK3MNxOcs02ZRDvRqWenOuOq3e1cpGB+A@mail.gmail.com>
Message-ID: <CAMKgpOaJ2kR9Bz2R1j1u8o0WqTkZ2JRZx0hBwwnkrQ9J-Cn16g@mail.gmail.com>

Adiba,

Do you really need to warp the rasters? Aren't the source and destination
in the same SRS?


On Tue, Jul 15, 2014 at 9:25 AM, adiba nizami <adiba.nizami at gmail.com>
wrote:

> I am using gdal1.5 , considering version change not an option....can you
> please tell how I can make use of gdal warp ?...
>
>
>
> On Mon, Jul 14, 2014 at 1:22 PM, Chaitanya kumar CH <
> chaitanya.ch at gmail.com> wrote:
>
>> Adiba,
>>
>> I noticed that your source and target projections are same. Why not use
>> gdalbuildvrt and gdal_translate and skip the warping process? You create a
>> virtual mosaic (and assign the projection if needed) with buildvrt. You can
>> create a tiff file from the vrt file using gdal_translate.
>>
>>
>> On Mon, Jul 14, 2014 at 11:12 AM, adiba nizami <adiba.nizami at gmail.com>
>> wrote:
>>
>>> Sorry for the late reply. Here is the command i  gave :
>>>
>>> gdalwarp --config GDAL_CACHEMAX 512 -s_srs "+proj=aea +lat_1=28
>>> +lat_2=12 +lat_0=20 +lon_0=87 +x_0=2000000 +y_0=2000000 +ellps=WGS84
>>> +datum=WGS84 +units=m +no_defs" -t_srs "+proj=aea +lat_1=28 +lat_2=12
>>> +lat_0=20 +lon_0=87 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84
>>> +units=m +no_defs" -te -138559.10 571316.50 3010515.63 4012751.95 -tr 18 18
>>> -wm 512 -co "BIGTIFF=YES" -srcnodata 255 -dstnodata 255  file1.tif
>>> file2.tif ..... file28.tif output.tif
>>>
>>>
>>>
>>> On Thu, Jul 10, 2014 at 7:23 PM, Thornton, Michele M. <
>>> thorntonmm at ornl.gov> wrote:
>>>
>>>>  Hello,
>>>>
>>>>
>>>>
>>>> I?m interested in this thread.  One comment I can add about
>>>> gdal_merge.py is that it does not properly handle nodata values from the
>>>> full (padded) extent of the input files.  gdalwarp, which can be VERY slow,
>>>> does handle the nodata values correctly.
>>>>
>>>>
>>>>
>>>> Michele Thornton
>>>>
>>>>
>>>>
>>>> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
>>>> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *bas smit
>>>> *Sent:* Thursday, July 10, 2014 7:52 AM
>>>> *To:* Chaitanya kumar CH
>>>> *Cc:* gdal dev
>>>> *Subject:* Re: [gdal-dev] warp taking time
>>>>
>>>>
>>>>
>>>> I am wondering why you are using gdalwarp for mosaicing images having same
>>>> projection instead of gdal_merge.py?
>>>>
>>>>
>>>>
>>>> Bas Smit
>>>>
>>>>
>>>>
>>>> On Thu, Jul 10, 2014 at 7:14 PM, Chaitanya kumar CH <
>>>> chaitanya.ch at gmail.com> wrote:
>>>>
>>>> garfy,
>>>>
>>>>
>>>>
>>>> Please provide the gdalwarp command you used. Did you modify
>>>> GDAL_CACHEMAX?
>>>>
>>>>
>>>>
>>>> On Thu, Jul 10, 2014 at 3:26 PM, garfy <adiba.nizami at gmail.com> wrote:
>>>>
>>>> Dear All,
>>>>
>>>> I am trying to generate mosaic of 28 input images using *gdalwarp*.
>>>> All are in same projection. It has taken 5 days to generate the final
>>>> output.
>>>> Please find the gdalinfo of input and output attached. The input files
>>>> are
>>>> passed to warp in the order in which the gdalinfo is present in the
>>>> attachement.
>>>>
>>>> Any input on improving the time would be really helpful.
>>>>
>>>>
>>>> Thanks
>>>> input_files_gdalinfo.txt
>>>> <
>>>> http://osgeo-org.1560.x6.nabble.com/file/n5150453/input_files_gdalinfo.txt
>>>> >
>>>> final_output_gdalinfo.txt
>>>> <
>>>> http://osgeo-org.1560.x6.nabble.com/file/n5150453/final_output_gdalinfo.txt
>>>> >
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> View this message in context:
>>>> http://osgeo-org.1560.x6.nabble.com/warp-taking-time-tp5150453.html
>>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>> --
>>> Regards,
>>> Adiba Khan
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Regards,
> Adiba Khan
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140715/22dc0b35/attachment-0001.html>

From aurelien.albert at alyotech.fr  Tue Jul 15 00:45:22 2014
From: aurelien.albert at alyotech.fr (orel)
Date: Tue, 15 Jul 2014 00:45:22 -0700 (PDT)
Subject: [gdal-dev] Which format is the best identify a spatial reference ?
Message-ID: <1405410322158-5151074.post@n6.nabble.com>

Hi,

Spatial references objects can be imported / exported using OGR API to
multiple formats : proj4, WKT, XML...

Can I use one of these as a format "which describes properly every spatial
reference" ?

For example, if I use WKT as "internal format" for my application, is there
any chance that a projection described with a proj4 string (or an EPSG code
or whatever...) cannot be properly converted to a WKT string ?

My goal is to use a single spatial reference format when storing/loading
work sessions of my application.

Thanks.




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Which-format-is-the-best-identify-a-spatial-reference-tp5151074.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From rgourrat at ag-carto.fr  Tue Jul 15 04:44:08 2014
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Tue, 15 Jul 2014 11:44:08 +0000
Subject: [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype = 7 )
 not supported ?
Message-ID: <238B1E1830D86F46B3F030D491793D60039F2823@EXC2010.aditu.fr>

Hi,

I try to export in shape a buffer from union of lines.

I validated this query in Sqldevelopper before use it with Ogr :
"select '1' as "FID",sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001) ),50,0.001) as geometry from assc"

After created this geometry in oracle temporary table, I can display it without issue in Autocad Map with Fdo Oracle Provider.

With ogr2ogr, Shape is created but when I open with Qgis i see 1 attribute line (it's Ok) but i don't see geometry on the map and the shape size is only 1ko.

This is my command line :

ogr2ogr -f "ESRI Shapefile" c:\temp\ASSC.shp OCI:[username]/[password]@[instance] -sql "select '1' as "FID",sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001) ),50,0.001) as geometry from assc" -skipfailures -overwrite -dim 2

it's running well and no issue in debug mode :
OGR2OGR: 1 features written in layer 'ASSC'
OCI: 1 features read on layer 'select 'EU01'...

If I don't use SDO_AGGR_CONCAT_LINES in my query wich create the unique multi-polygon (Oracle Gtype = 7), the shape is created too and I can see more 2000 buffer polygon geometry (Oracle Gtype = 3) in Qgis.

ogr2ogr -f "ESRI Shapefile" c:\temp\ASSC.shp OCI:[username]/[password]@[instance] -sql "select '1' as "FID",sdo_geom.sdo_buffer(sdo_util.rectify_geometry(GEOMETRY,0.001),50,0.001) as geometry from assc" -skipfailures -overwrite -dim 2

So I ask me the question is there a issue with ogr2ogr with Oracle Multipolygon (Gtype = 7) ?

Is there a work around ?

Thanks

R?my
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140715/3df92975/attachment.html>

From hrz at geodata.soton.ac.uk  Tue Jul 15 09:51:20 2014
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Tue, 15 Jul 2014 17:51:20 +0100
Subject: [gdal-dev] gdal2tiles.py alternative
Message-ID: <53C55C08.50409@geodata.soton.ac.uk>

Hi,

This might be of interest to users of gdal2tiles.py:
<https://github.com/geo-data/cesium-terrain-builder#ctb-tile>. Although
originally designed to create terrain tiles for the Cesium Javascript 
engine, it
can also create tiles in any GDAL write enabled file based format e.g:

ctb-tile --output-format GTiff --profile mercator --output-dir ./tiles 
./input-data.vrt

Apart from the case where you need tiles in formats other than PNG or 
JPEG, it
might also be useful if you need more performance: the application is
multithreaded and a quick benchmark suggests that on a 1 core machine 
you get a
3x speed increase and on a 4 core machine it is a 4x speed increase 
(disk i/o
starts to be more limiting, it seems).

The tool also performs warping if the input data source is not in the output
grid projection.

If you have docker on your system then an easy way to get to a command 
prompt
with `ctb-tile` available is to run:

docker run -t -i homme/cesium-terrain-builder:0.3.0 bash

Note you don't get the fancy KML or webviewer output that you do with
gdal2tiles!

The software heavily leverages GDAL, so thank you.

Homme


From schwehr at gmail.com  Tue Jul 15 11:15:35 2014
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 15 Jul 2014 11:15:35 -0700
Subject: [gdal-dev] GDAL_DATA files from /vsimem?
Message-ID: <CACmBxyv3ADec=GES9b3qOCoooehRozfu+1T6oSXzfeYNSuM2Zg@mail.gmail.com>

Hi all,

I'm working on a system where I might not have access (or very annoying
access) to a local filesystem.  I've got an external to gdal wrapper that
has the gdal/data files compiled in.  Would it work to have a local patch
to cpl_findfile that would write the files into /vsimem/gdal_data/* and
then set GDAL_DATA to /vsimem/gdal_data?

Thoughts?

Thanks,
-kurt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140715/dab82e95/attachment.html>

From m.g.aschenbeck at gmail.com  Tue Jul 15 11:33:32 2014
From: m.g.aschenbeck at gmail.com (Michael Aschenbeck)
Date: Tue, 15 Jul 2014 12:33:32 -0600
Subject: [gdal-dev] GDAL Arbitrary Warp Problems
Message-ID: <CADGz_tKHkBU5j6T5MRa5A6Chc5phNHc_DKn0CuT6fKevbyx13Q@mail.gmail.com>

Hello,

I'm trying to follow the warp tutorial (http://www.gdal.org/warptut.html)
to do a general warp.  However, I'm not getting any good results.

I first recreated the example in the warp tutorial by first implementing
the bottom portion modified to output an RGB image, then implementing the
top portion with GDALGenImgProjTransform as written.  This worked fine.

Second, I tried to create my own, most basic, transformation:

int identityTransform(void *pTransformerArg,int bDstToSrc, int nPointCount,
double *x, double *y, double *z, int *panSuccess)
{
return 1;
}

i.e. it does not modify any coordinates.  So I changed:
eErr = GDALSuggestedWarpOutput( poDataset, GDALGenImgProjTransform,
hTransformArg, adfDstGeoTransform, &nPixels, &nLines );
to:
GDALTransformerFunc myTransformer = &identityTransform;
eErr = GDALSuggestedWarpOutput( poDataset, myTransformer, hTransformArg,
adfDstGeoTransform, &nPixels, &nLines );


and
//psWarpOptions->pfnTransformer = GDALGenImgProjTransform;
to:
         psWarpOptions->pfnTransformer = myTransformer;

I expect to get the same image back but all i get is two vertical lines
with unreasonable georeferenced coordinates.  I'm hoping someone can show
me where I'm going wrong, or guide me to an example of a custom
GDALTransformerFunc to use as a template.

Thank you in advance for any help you can give!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140715/77c1693c/attachment.html>

From even.rouault at mines-paris.org  Tue Jul 15 11:40:54 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 15 Jul 2014 20:40:54 +0200
Subject: [gdal-dev] GDAL_DATA files from /vsimem?
In-Reply-To: <CACmBxyv3ADec=GES9b3qOCoooehRozfu+1T6oSXzfeYNSuM2Zg@mail.gmail.com>
References: <CACmBxyv3ADec=GES9b3qOCoooehRozfu+1T6oSXzfeYNSuM2Zg@mail.gmail.com>
Message-ID: <201407152040.54931.even.rouault@mines-paris.org>

Hi Kurt,

  I've got an external to gdal wrapper that
> has the gdal/data files compiled in.  

Not sure to understand what that means

> Would it work to have a local patch
> to cpl_findfile that would write the files into /vsimem/gdal_data/* and
> then set GDAL_DATA to /vsimem/gdal_data?

Why not having a tmpfs mount and just cp the files before launching GDAL ?

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Jul 15 11:43:30 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 15 Jul 2014 20:43:30 +0200
Subject: [gdal-dev] GDAL Arbitrary Warp Problems
In-Reply-To: <CADGz_tKHkBU5j6T5MRa5A6Chc5phNHc_DKn0CuT6fKevbyx13Q@mail.gmail.com>
References: <CADGz_tKHkBU5j6T5MRa5A6Chc5phNHc_DKn0CuT6fKevbyx13Q@mail.gmail.com>
Message-ID: <201407152043.30626.even.rouault@mines-paris.org>

Le mardi 15 juillet 2014 20:33:32, Michael Aschenbeck a ?crit :
> Hello,
> 
> I'm trying to follow the warp tutorial (http://www.gdal.org/warptut.html)
> to do a general warp.  However, I'm not getting any good results.
> 
> I first recreated the example in the warp tutorial by first implementing
> the bottom portion modified to output an RGB image, then implementing the
> top portion with GDALGenImgProjTransform as written.  This worked fine.
> 
> Second, I tried to create my own, most basic, transformation:
> 
> int identityTransform(void *pTransformerArg,int bDstToSrc, int nPointCount,
> double *x, double *y, double *z, int *panSuccess)
> {
> return 1;
> }
> 
> i.e. it does not modify any coordinates.  So I changed:
> eErr = GDALSuggestedWarpOutput( poDataset, GDALGenImgProjTransform,
> hTransformArg, adfDstGeoTransform, &nPixels, &nLines );
> to:
> GDALTransformerFunc myTransformer = &identityTransform;
> eErr = GDALSuggestedWarpOutput( poDataset, myTransformer, hTransformArg,
> adfDstGeoTransform, &nPixels, &nLines );
> 
> 
> and
> //psWarpOptions->pfnTransformer = GDALGenImgProjTransform;
> to:
>          psWarpOptions->pfnTransformer = myTransformer;
> 
> I expect to get the same image back but all i get is two vertical lines
> with unreasonable georeferenced coordinates.  I'm hoping someone can show
> me where I'm going wrong, or guide me to an example of a custom
> GDALTransformerFunc to use as a template.
> 
> Thank you in advance for any help you can give!

Why not using gdalwarp directly, or re-using its source code ?

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Jul 15 11:48:50 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 15 Jul 2014 20:48:50 +0200
Subject: [gdal-dev] Which format is the best identify a spatial
	reference ?
In-Reply-To: <1405410322158-5151074.post@n6.nabble.com>
References: <1405410322158-5151074.post@n6.nabble.com>
Message-ID: <201407152048.50545.even.rouault@mines-paris.org>

Le mardi 15 juillet 2014 09:45:22, orel a ?crit :
> Hi,
> 
> Spatial references objects can be imported / exported using OGR API to
> multiple formats : proj4, WKT, XML...
> 
> Can I use one of these as a format "which describes properly every spatial
> reference" ?
> 
> For example, if I use WKT as "internal format" for my application, is there
> any chance that a projection described with a proj4 string (or an EPSG code
> or whatever...) cannot be properly converted to a WKT string ?

WKT is a reasonable choice.
It might be possible that some exotic proj4 projection methods are not mapped 
as OGRSpatialReference (which directly maps to/from WKT) recognized methods, 
but unless you've very specific needs, that should not hurt you.
The same applies with EPSG codes. Only a few methods used by EPSG SRS have no 
equivalent in the OGRSpatialReference world.

> 
> My goal is to use a single spatial reference format when storing/loading
> work sessions of my application.
> 
> Thanks.
> 
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Which-format-is-the-best-identify-a-sp
> atial-reference-tp5151074.html Sent from the GDAL - Dev mailing list
> archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From m.g.aschenbeck at gmail.com  Tue Jul 15 11:52:16 2014
From: m.g.aschenbeck at gmail.com (Michael Aschenbeck)
Date: Tue, 15 Jul 2014 12:52:16 -0600
Subject: [gdal-dev] GDAL Arbitrary Warp Problems
In-Reply-To: <201407152043.30626.even.rouault@mines-paris.org>
References: <CADGz_tKHkBU5j6T5MRa5A6Chc5phNHc_DKn0CuT6fKevbyx13Q@mail.gmail.com>
	<201407152043.30626.even.rouault@mines-paris.org>
Message-ID: <CADGz_tLg4Fgd=1mMaOL=P1FgWBqi663kb1DPwiAriu5xSMS4Eg@mail.gmail.com>

Thanks for your response.

For my application, I will be creating the transformation on the fly.  It
will be a non-standard transformation.  Unless I'm mistaken, I don't
believe this can be done with gdalwarp directly.

Also, I am under the assumption that its source code is introduced in the
tutorial I am working off of (http://www.gdal.org/warptut.html).  Yet, this
just introduces a standard transformation, not a custom one.  This is why
I'm having trouble.

Thanks,
Mike


On Tue, Jul 15, 2014 at 12:43 PM, Even Rouault <even.rouault at mines-paris.org
> wrote:

> Le mardi 15 juillet 2014 20:33:32, Michael Aschenbeck a ?crit :
> > Hello,
> >
> > I'm trying to follow the warp tutorial (http://www.gdal.org/warptut.html
> )
> > to do a general warp.  However, I'm not getting any good results.
> >
> > I first recreated the example in the warp tutorial by first implementing
> > the bottom portion modified to output an RGB image, then implementing the
> > top portion with GDALGenImgProjTransform as written.  This worked fine.
> >
> > Second, I tried to create my own, most basic, transformation:
> >
> > int identityTransform(void *pTransformerArg,int bDstToSrc, int
> nPointCount,
> > double *x, double *y, double *z, int *panSuccess)
> > {
> > return 1;
> > }
> >
> > i.e. it does not modify any coordinates.  So I changed:
> > eErr = GDALSuggestedWarpOutput( poDataset, GDALGenImgProjTransform,
> > hTransformArg, adfDstGeoTransform, &nPixels, &nLines );
> > to:
> > GDALTransformerFunc myTransformer = &identityTransform;
> > eErr = GDALSuggestedWarpOutput( poDataset, myTransformer, hTransformArg,
> > adfDstGeoTransform, &nPixels, &nLines );
> >
> >
> > and
> > //psWarpOptions->pfnTransformer = GDALGenImgProjTransform;
> > to:
> >          psWarpOptions->pfnTransformer = myTransformer;
> >
> > I expect to get the same image back but all i get is two vertical lines
> > with unreasonable georeferenced coordinates.  I'm hoping someone can show
> > me where I'm going wrong, or guide me to an example of a custom
> > GDALTransformerFunc to use as a template.
> >
> > Thank you in advance for any help you can give!
>
> Why not using gdalwarp directly, or re-using its source code ?
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140715/cc9cea9f/attachment.html>

From even.rouault at mines-paris.org  Tue Jul 15 12:00:50 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 15 Jul 2014 21:00:50 +0200
Subject: [gdal-dev] GDAL Arbitrary Warp Problems
In-Reply-To: <CADGz_tLg4Fgd=1mMaOL=P1FgWBqi663kb1DPwiAriu5xSMS4Eg@mail.gmail.com>
References: <CADGz_tKHkBU5j6T5MRa5A6Chc5phNHc_DKn0CuT6fKevbyx13Q@mail.gmail.com>
	<201407152043.30626.even.rouault@mines-paris.org>
	<CADGz_tLg4Fgd=1mMaOL=P1FgWBqi663kb1DPwiAriu5xSMS4Eg@mail.gmail.com>
Message-ID: <201407152100.51004.even.rouault@mines-paris.org>

Le mardi 15 juillet 2014 20:52:16, Michael Aschenbeck a ?crit :
> Thanks for your response.
> 
> For my application, I will be creating the transformation on the fly.  It
> will be a non-standard transformation.  Unless I'm mistaken, I don't
> believe this can be done with gdalwarp directly.
> 
> Also, I am under the assumption that its source code is introduced in the
> tutorial I am working off of (http://www.gdal.org/warptut.html).  Yet, this
> just introduces a standard transformation, not a custom one.  This is why
> I'm having trouble.

When doing custom stuff, you often need to step into GDAL code to understand 
better how things are interacting together.
Actually looking at your identityTransform and GDALSuggestedWarpOutput2(), I 
think there's at least something you should fix. You should initialize all the 
nPointcount elements of then panSuccess array to 1.

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From hrz at geodata.soton.ac.uk  Tue Jul 15 12:10:51 2014
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Tue, 15 Jul 2014 20:10:51 +0100
Subject: [gdal-dev] GDAL Arbitrary Warp Problems
In-Reply-To: <201407152100.51004.even.rouault@mines-paris.org>
References: <CADGz_tKHkBU5j6T5MRa5A6Chc5phNHc_DKn0CuT6fKevbyx13Q@mail.gmail.com>
	<201407152043.30626.even.rouault@mines-paris.org>
	<CADGz_tLg4Fgd=1mMaOL=P1FgWBqi663kb1DPwiAriu5xSMS4Eg@mail.gmail.com>
	<201407152100.51004.even.rouault@mines-paris.org>
Message-ID: <34024327-0de9-454e-a863-d19f9ddf622e@email.android.com>

Hi Michael,

I had to tangle with warping recently and took inspiration from both the warp tutorial and the gdalwarp source.  The result is at <https://github.com/geo-data/cesium-terrain-builder/blob/master/src/GDALTiler.cpp#L202> - it may be of help.

Homme

On 15 July 2014 20:00:50 GMT+01:00, Even Rouault <even.rouault at mines-paris.org> wrote:
>Le mardi 15 juillet 2014 20:52:16, Michael Aschenbeck a ?crit :
>> Thanks for your response.
>> 
>> For my application, I will be creating the transformation on the fly.
> It
>> will be a non-standard transformation.  Unless I'm mistaken, I don't
>> believe this can be done with gdalwarp directly.
>> 
>> Also, I am under the assumption that its source code is introduced in
>the
>> tutorial I am working off of (http://www.gdal.org/warptut.html). 
>Yet, this
>> just introduces a standard transformation, not a custom one.  This is
>why
>> I'm having trouble.
>
>When doing custom stuff, you often need to step into GDAL code to
>understand 
>better how things are interacting together.
>Actually looking at your identityTransform and
>GDALSuggestedWarpOutput2(), I 
>think there's at least something you should fix. You should initialize
>all the 
>nPointcount elements of then panSuccess array to 1.
>
>Even
>
>-- 
>Geospatial professional services
>http://even.rouault.free.fr/services.html
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Sent from my Android device with K-9 Mail. Please excuse my brevity.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140715/0e7ee03c/attachment.html>

From pratap.chelamilla at amigooptima.in  Wed Jul 16 05:32:11 2014
From: pratap.chelamilla at amigooptima.in (Pratap Chelamilla)
Date: Wed, 16 Jul 2014 18:02:11 +0530
Subject: [gdal-dev] Unable to Rotate Image uisng setGeoTransform
Message-ID: <CAOv6TkZMyF1yT44QS9R4W_S-ZDcwiRjk2Ji0+iM7JQsDkwWauQ@mail.gmail.com>

Hi,

How to rotate an image with different angles(such as 30 ,45 60 .....
degress) using SetGeoTransform?

I have tried setting newTie[2] =45 degree  and  newTie[2] =
(45.0*3.1415926)/180) in radians

 double *newTie = new double[6];

            newTie[0] = tie[0] + (xPos*tie[1]);              /*
adfGeoTransform[0] /* top left x */
            newTie[3] = tie[3] + (yPos*tie[5]);             /*
adfGeoTransform[3] /* top left y */
            newTie[1] = tie[1];                         /*
adfGeoTransform[1] /* w-e pixel resolution */
            newTie[2] = 45.0;                         /* adfGeoTransform[2]
/* rotation, 0 if image is "north up" */
            newTie[4] = 45.0;                     /*    adfGeoTransform[4]
/* rotation, 0 if image is "north up" */
            newTie[5] = tie[5];                  /*   adfGeoTransform[5] /*
n-s pixel resolution */


But,SetGeoTransform is not affecting any change on image after writing with
RasterIO (unable to see any rotated image),Image is georeferenced.

What values should I use for  adfGeoTransform[2]/newTie[2] and
adfGeoTransform[4]/newTie[4]?

Thanks,
Pratap.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140716/c7ca8bb3/attachment.html>

From rgourrat at ag-carto.fr  Wed Jul 16 09:23:07 2014
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Wed, 16 Jul 2014 16:23:07 +0000
Subject: [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype =
 7 ) not supported ?
In-Reply-To: <238B1E1830D86F46B3F030D491793D60039F2823@EXC2010.aditu.fr>
References: <238B1E1830D86F46B3F030D491793D60039F2823@EXC2010.aditu.fr>
Message-ID: <238B1E1830D86F46B3F030D491793D60039F5F0C@EXC2010.aditu.fr>

Solved ! i get the issue and the workaround of my problem.

When you use ogr2ogr to translate a Oracle Gtype = 3 (simple Polygon with hole or not) to a shapefile
and this polygon have some curves like by example after a buffer treatment (it's Ok in SDO_GEOMETRy),
Ogr2ogr indent curves in many little polyline.
Translation in shapefile is ok.

But When you use ogr2ogr to translate an Oracle Gtype = 7 (multi-Polygon with hole or not, with at less 2 exteriors rings) to a shape
and this polygon have some curves like by example after a buffer treatment (it's Ok in SDO_GEOMETRY),
Ogr2ogr don't indent curves in many little polyline.

Translation in shapefile seems ok, without errors message but the Geometry in the fileshape is never writing.

It's normal because Shapefile don't enjoy curves.

So i modified my Oracle query like this :

Old Version :
sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001) ),50,0.001)

New Version : SDO_GEOM.SDO_ARC_DENSIFY(sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001)),50,0.001),0.001,'arc_tolerance=1')

SDO_GEOM.SDO_ARC_DENSIFY : indent curves in many little polyline for Gtype = 3 or 7

So ogr2ogr is always Ok to translate in ShapeFile.

R?my

De : gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de R?my GOURRAT
Envoy? : mardi 15 juillet 2014 13:44
? : gdal-dev at lists.osgeo.org
Objet : [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype = 7 ) not supported ?

Hi,

I try to export in shape a buffer from union of lines.

I validated this query in Sqldevelopper before use it with Ogr :
"select '1' as "FID",sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001) ),50,0.001) as geometry from assc"

After created this geometry in oracle temporary table, I can display it without issue in Autocad Map with Fdo Oracle Provider.

With ogr2ogr, Shape is created but when I open with Qgis i see 1 attribute line (it's Ok) but i don't see geometry on the map and the shape size is only 1ko.

This is my command line :

ogr2ogr -f "ESRI Shapefile" c:\temp\ASSC.shp OCI:[username]/[password]@[instance] -sql "select '1' as "FID",sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001) ),50,0.001) as geometry from assc" -skipfailures -overwrite -dim 2

it's running well and no issue in debug mode :
OGR2OGR: 1 features written in layer 'ASSC'
OCI: 1 features read on layer 'select 'EU01'...

If I don't use SDO_AGGR_CONCAT_LINES in my query wich create the unique multi-polygon (Oracle Gtype = 7), the shape is created too and I can see more 2000 buffer polygon geometry (Oracle Gtype = 3) in Qgis.

ogr2ogr -f "ESRI Shapefile" c:\temp\ASSC.shp OCI:[username]/[password]@[instance] -sql "select '1' as "FID",sdo_geom.sdo_buffer(sdo_util.rectify_geometry(GEOMETRY,0.001),50,0.001) as geometry from assc" -skipfailures -overwrite -dim 2

So I ask me the question is there a issue with ogr2ogr with Oracle Multipolygon (Gtype = 7) ?

Is there a work around ?

Thanks

R?my

--
This message has been scanned for viruses and
dangerous content by MailScanner<http://www.mailscanner.info/>, and is
believed to be clean.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140716/e4d12a96/attachment-0001.html>

From rgourrat at ag-carto.fr  Wed Jul 16 10:43:20 2014
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Wed, 16 Jul 2014 17:43:20 +0000
Subject: [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype =
 7 ) not supported ?
In-Reply-To: <238B1E1830D86F46B3F030D491793D60039F5F0C@EXC2010.aditu.fr>
References: <238B1E1830D86F46B3F030D491793D60039F2823@EXC2010.aditu.fr>
	<238B1E1830D86F46B3F030D491793D60039F5F0C@EXC2010.aditu.fr>
Message-ID: <238B1E1830D86F46B3F030D491793D60039F5F88@EXC2010.aditu.fr>

I try to make a Track ticket for enhancement of ogr2ogr for Oracle Gtype = 7 and the curves

But I can't login me, each time, it said to me I don't have the create ticket privilege.

How to get this privilege ?

or someone can do it for me ?

thanks for your help

R?my

De : gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de R?my GOURRAT
Envoy? : mercredi 16 juillet 2014 18:23
? : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype = 7 ) not supported ?

Solved ! i get the issue and the workaround of my problem.

When you use ogr2ogr to translate a Oracle Gtype = 3 (simple Polygon with hole or not) to a shapefile
and this polygon have some curves like by example after a buffer treatment (it's Ok in SDO_GEOMETRy),
Ogr2ogr indent curves in many little polyline.
Translation in shapefile is ok.

But When you use ogr2ogr to translate an Oracle Gtype = 7 (multi-Polygon with hole or not, with at less 2 exteriors rings) to a shape
and this polygon have some curves like by example after a buffer treatment (it's Ok in SDO_GEOMETRY),
Ogr2ogr don't indent curves in many little polyline.

Translation in shapefile seems ok, without errors message but the Geometry in the fileshape is never writing.

It's normal because Shapefile don't enjoy curves.

So i modified my Oracle query like this :

Old Version :
sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001) ),50,0.001)

New Version : SDO_GEOM.SDO_ARC_DENSIFY(sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001)),50,0.001),0.001,'arc_tolerance=1')

SDO_GEOM.SDO_ARC_DENSIFY : indent curves in many little polyline for Gtype = 3 or 7

So ogr2ogr is always Ok to translate in ShapeFile.

R?my

De : gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de R?my GOURRAT
Envoy? : mardi 15 juillet 2014 13:44
? : gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
Objet : [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype = 7 ) not supported ?

Hi,

I try to export in shape a buffer from union of lines.

I validated this query in Sqldevelopper before use it with Ogr :
"select '1' as "FID",sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001) ),50,0.001) as geometry from assc"

After created this geometry in oracle temporary table, I can display it without issue in Autocad Map with Fdo Oracle Provider.

With ogr2ogr, Shape is created but when I open with Qgis i see 1 attribute line (it's Ok) but i don't see geometry on the map and the shape size is only 1ko.

This is my command line :

ogr2ogr -f "ESRI Shapefile" c:\temp\ASSC.shp OCI:[username]/[password]@[instance] -sql "select '1' as "FID",sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETRY,0.001) ),50,0.001) as geometry from assc" -skipfailures -overwrite -dim 2

it's running well and no issue in debug mode :
OGR2OGR: 1 features written in layer 'ASSC'
OCI: 1 features read on layer 'select 'EU01'...

If I don't use SDO_AGGR_CONCAT_LINES in my query wich create the unique multi-polygon (Oracle Gtype = 7), the shape is created too and I can see more 2000 buffer polygon geometry (Oracle Gtype = 3) in Qgis.

ogr2ogr -f "ESRI Shapefile" c:\temp\ASSC.shp OCI:[username]/[password]@[instance] -sql "select '1' as "FID",sdo_geom.sdo_buffer(sdo_util.rectify_geometry(GEOMETRY,0.001),50,0.001) as geometry from assc" -skipfailures -overwrite -dim 2

So I ask me the question is there a issue with ogr2ogr with Oracle Multipolygon (Gtype = 7) ?

Is there a work around ?

Thanks

R?my

--
This message has been scanned for viruses and
dangerous content by MailScanner<http://www.mailscanner.info/>, and is
believed to be clean.

--
This message has been scanned for viruses and
dangerous content by MailScanner<http://www.mailscanner.info/>, and is
believed to be clean.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140716/85c53a5b/attachment.html>

From even.rouault at mines-paris.org  Wed Jul 16 15:27:37 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Jul 2014 00:27:37 +0200
Subject: [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype =
	7 ) not supported ?
In-Reply-To: <238B1E1830D86F46B3F030D491793D60039F5F88@EXC2010.aditu.fr>
References: <238B1E1830D86F46B3F030D491793D60039F2823@EXC2010.aditu.fr>
	<238B1E1830D86F46B3F030D491793D60039F5F0C@EXC2010.aditu.fr>
	<238B1E1830D86F46B3F030D491793D60039F5F88@EXC2010.aditu.fr>
Message-ID: <201407170027.37249.even.rouault@mines-paris.org>

R?mi,

You need to create an OSGeo id as described in 
http://www.osgeo.org/osgeo_userid/

As far as your issue is concerned, indeed there's not yet general support for 
curved geometries in OGR. Looking at the OCI driver, I can see code to do the 
stroke of circular arcs as polylines in the polygon case, but there's perhaps 
indeed something missing to support the multipolygon case with circular arcs.

Best regards,

Even

> I try to make a Track ticket for enhancement of ogr2ogr for Oracle Gtype =
> 7 and the curves
> 
> But I can't login me, each time, it said to me I don't have the create
> ticket privilege.
> 
> How to get this privilege ?
> 
> or someone can do it for me ?
> 
> thanks for your help
> 
> R?my
> 
> De : gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de R?my GOURRAT
> Envoy? : mercredi 16 juillet 2014 18:23
> ? : gdal-dev at lists.osgeo.org
> Objet : Re: [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype =
> 7 ) not supported ?
> 
> Solved ! i get the issue and the workaround of my problem.
> 
> When you use ogr2ogr to translate a Oracle Gtype = 3 (simple Polygon with
> hole or not) to a shapefile and this polygon have some curves like by
> example after a buffer treatment (it's Ok in SDO_GEOMETRy), Ogr2ogr indent
> curves in many little polyline.
> Translation in shapefile is ok.
> 
> But When you use ogr2ogr to translate an Oracle Gtype = 7 (multi-Polygon
> with hole or not, with at less 2 exteriors rings) to a shape and this
> polygon have some curves like by example after a buffer treatment (it's Ok
> in SDO_GEOMETRY), Ogr2ogr don't indent curves in many little polyline.
> 
> Translation in shapefile seems ok, without errors message but the Geometry
> in the fileshape is never writing.
> 
> It's normal because Shapefile don't enjoy curves.
> 
> So i modified my Oracle query like this :
> 
> Old Version :
> sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(GEOMETR
> Y,0.001) ),50,0.001)
> 
> New Version :
> SDO_GEOM.SDO_ARC_DENSIFY(sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_uti
> l.rectify_geometry(GEOMETRY,0.001)),50,0.001),0.001,'arc_tolerance=1')
> 
> SDO_GEOM.SDO_ARC_DENSIFY : indent curves in many little polyline for Gtype
> = 3 or 7
> 
> So ogr2ogr is always Ok to translate in ShapeFile.
> 
> R?my
> 
> De :
> gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>
> [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de R?my GOURRAT
> Envoy? : mardi 15 juillet 2014 13:44
> ? : gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
> Objet : [gdal-dev] ogr2ogr OCI to shape : Multipolygon (Oracle Gtype = 7 )
> not supported ?
> 
> Hi,
> 
> I try to export in shape a buffer from union of lines.
> 
> I validated this query in Sqldevelopper before use it with Ogr :
> "select '1' as
> "FID",sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(
> GEOMETRY,0.001) ),50,0.001) as geometry from assc"
> 
> After created this geometry in oracle temporary table, I can display it
> without issue in Autocad Map with Fdo Oracle Provider.
> 
> With ogr2ogr, Shape is created but when I open with Qgis i see 1 attribute
> line (it's Ok) but i don't see geometry on the map and the shape size is
> only 1ko.
> 
> This is my command line :
> 
> ogr2ogr -f "ESRI Shapefile" c:\temp\ASSC.shp
> OCI:[username]/[password]@[instance] -sql "select '1' as
> "FID",sdo_geom.sdo_buffer(SDO_AGGR_CONCAT_LINES(sdo_util.rectify_geometry(
> GEOMETRY,0.001) ),50,0.001) as geometry from assc" -skipfailures -overwrite
> -dim 2
> 
> it's running well and no issue in debug mode :
> OGR2OGR: 1 features written in layer 'ASSC'
> OCI: 1 features read on layer 'select 'EU01'...
> 
> If I don't use SDO_AGGR_CONCAT_LINES in my query wich create the unique
> multi-polygon (Oracle Gtype = 7), the shape is created too and I can see
> more 2000 buffer polygon geometry (Oracle Gtype = 3) in Qgis.
> 
> ogr2ogr -f "ESRI Shapefile" c:\temp\ASSC.shp
> OCI:[username]/[password]@[instance] -sql "select '1' as
> "FID",sdo_geom.sdo_buffer(sdo_util.rectify_geometry(GEOMETRY,0.001),50,0.0
> 01) as geometry from assc" -skipfailures -overwrite -dim 2
> 
> So I ask me the question is there a issue with ogr2ogr with Oracle
> Multipolygon (Gtype = 7) ?
> 
> Is there a work around ?
> 
> Thanks
> 
> R?my
> 
> --
> This message has been scanned for viruses and
> dangerous content by MailScanner<http://www.mailscanner.info/>, and is
> believed to be clean.
> 
> --
> This message has been scanned for viruses and
> dangerous content by MailScanner<http://www.mailscanner.info/>, and is
> believed to be clean.

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From nixanz at nixanz.com  Thu Jul 17 03:24:45 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Thu, 17 Jul 2014 20:24:45 +1000
Subject: [gdal-dev] Rename and Reorder Layers?
Message-ID: <F8633829-7F5F-4B4A-A423-DA463E59A188@nixanz.com>

Hi all,

I have two simple questions (not sure if the answers are as simple)...

1.  Is it possible to rename an OGR layer in place within a writeable data store without first creating a copy of the entire layer?

The only way I've found to do this is to use OGR_DS_CopyLayer() (or similar) and then delete the old layer which is fairly expensive as it has to copy all of the features as well.

2.  Is it possible to change the order of layers within a writeable OGR data store?  (Ie, change the ordering/indexing of layers as they would be retrieved with OGR_DS_GetLayer() ).

If these can be done, then I've missed it in the doco.  Could somebody please explain how to do this or otherwise what the best alternative would be?

Cheers,
Nik.


From even.rouault at mines-paris.org  Thu Jul 17 04:29:06 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Jul 2014 13:29:06 +0200
Subject: [gdal-dev] Rename and Reorder Layers?
In-Reply-To: <F8633829-7F5F-4B4A-A423-DA463E59A188@nixanz.com>
References: <F8633829-7F5F-4B4A-A423-DA463E59A188@nixanz.com>
Message-ID: <1405596546.53c7b38214ab5@imp.free.fr>

Nik,

> I have two simple questions (not sure if the answers are as simple)...
>
> 1.  Is it possible to rename an OGR layer in place within a writeable data
> store without first creating a copy of the entire layer?

There's no provision in the OGR API to do that currently. Although it could be
nice to have. That would require of course updating the drivers that would
support that capability, and which are coded currently under the assumption that
the layer name is immutable.
For which driver(s) would you be interested to have that capability ?

>
> The only way I've found to do this is to use OGR_DS_CopyLayer() (or similar)
> and then delete the old layer which is fairly expensive as it has to copy all
> of the features as well.

For drivers that are related to SQL databases, issuing an "ALTER TABLE foo
RENAME TO bar" with ExecuteSQL(), and re-opening the datasource afterwards (OGR
will not notice the change) should do it.

>
> 2.  Is it possible to change the order of layers within a writeable OGR data
> store?  (Ie, change the ordering/indexing of layers as they would be
> retrieved with OGR_DS_GetLayer() ).

That would be much more involved, not to say impossible. For example, for SQL
based drivers, the driver list is issued from a request in system tables or
other tables and there's nothing to control the order of retrieval.
For filebased drivers, such as a directory of shapefiles, it depends on the
order of the operating system in which it return the filenames. Nothing you can
have control on.
To make it possible reliably would probably involve adding a special OGR
metadata table with (order_number, layer_name) columns.
A potential workaround is to use a OGR VRT file as a thin wrapper above your
"real" datasource. The layers will be ordered in the order they are listed in
the VRT.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html


From baspysmit at gmail.com  Thu Jul 17 04:33:26 2014
From: baspysmit at gmail.com (bas smit)
Date: Thu, 17 Jul 2014 20:33:26 +0900
Subject: [gdal-dev] Rename and Reorder Layers?
In-Reply-To: <1405596546.53c7b38214ab5@imp.free.fr>
References: <F8633829-7F5F-4B4A-A423-DA463E59A188@nixanz.com>
	<1405596546.53c7b38214ab5@imp.free.fr>
Message-ID: <CAJ0c-geLCz5LbsdkZeqNOsu4eH3YdpYr2X9NLzLUWWwTuYf=gg@mail.gmail.com>

Dear Even Rouault

I  was also  wondering to know if it is possible to rename the raster bands
?

Bas


On Thu, Jul 17, 2014 at 8:29 PM, Even Rouault <even.rouault at mines-paris.org>
wrote:

> Nik,
>
> > I have two simple questions (not sure if the answers are as simple)...
> >
> > 1.  Is it possible to rename an OGR layer in place within a writeable
> data
> > store without first creating a copy of the entire layer?
>
> There's no provision in the OGR API to do that currently. Although it
> could be
> nice to have. That would require of course updating the drivers that would
> support that capability, and which are coded currently under the
> assumption that
> the layer name is immutable.
> For which driver(s) would you be interested to have that capability ?
>
> >
> > The only way I've found to do this is to use OGR_DS_CopyLayer() (or
> similar)
> > and then delete the old layer which is fairly expensive as it has to
> copy all
> > of the features as well.
>
> For drivers that are related to SQL databases, issuing an "ALTER TABLE foo
> RENAME TO bar" with ExecuteSQL(), and re-opening the datasource afterwards
> (OGR
> will not notice the change) should do it.
>
> >
> > 2.  Is it possible to change the order of layers within a writeable OGR
> data
> > store?  (Ie, change the ordering/indexing of layers as they would be
> > retrieved with OGR_DS_GetLayer() ).
>
> That would be much more involved, not to say impossible. For example, for
> SQL
> based drivers, the driver list is issued from a request in system tables or
> other tables and there's nothing to control the order of retrieval.
> For filebased drivers, such as a directory of shapefiles, it depends on the
> order of the operating system in which it return the filenames. Nothing
> you can
> have control on.
> To make it possible reliably would probably involve adding a special OGR
> metadata table with (order_number, layer_name) columns.
> A potential workaround is to use a OGR VRT file as a thin wrapper above
> your
> "real" datasource. The layers will be ordered in the order they are listed
> in
> the VRT.
>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140717/381f7faf/attachment.html>

From even.rouault at mines-paris.org  Thu Jul 17 04:40:58 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Jul 2014 13:40:58 +0200
Subject: [gdal-dev] Rename and Reorder Layers?
In-Reply-To: <CAJ0c-geLCz5LbsdkZeqNOsu4eH3YdpYr2X9NLzLUWWwTuYf=gg@mail.gmail.com>
References: <F8633829-7F5F-4B4A-A423-DA463E59A188@nixanz.com>
	<1405596546.53c7b38214ab5@imp.free.fr>
	<CAJ0c-geLCz5LbsdkZeqNOsu4eH3YdpYr2X9NLzLUWWwTuYf=gg@mail.gmail.com>
Message-ID: <1405597258.53c7b64aab890@imp.free.fr>

Selon bas smit <baspysmit at gmail.com>:

> Dear Even Rouault
>
> I  was also  wondering to know if it is possible to rename the raster bands
> ?

Bas,

You can attach a description to bands with SetDescription(). But not so many
formats support that natively. HFA Imagine is one of those few. Other PAM based
drivers will save the description in the .aux.xml file associated with the
dataset, so that will work only in the GDAL world.

Even

>
> Bas
>
>
> On Thu, Jul 17, 2014 at 8:29 PM, Even Rouault <even.rouault at mines-paris.org>
> wrote:
>
> > Nik,
> >
> > > I have two simple questions (not sure if the answers are as simple)...
> > >
> > > 1.  Is it possible to rename an OGR layer in place within a writeable
> > data
> > > store without first creating a copy of the entire layer?
> >
> > There's no provision in the OGR API to do that currently. Although it
> > could be
> > nice to have. That would require of course updating the drivers that would
> > support that capability, and which are coded currently under the
> > assumption that
> > the layer name is immutable.
> > For which driver(s) would you be interested to have that capability ?
> >
> > >
> > > The only way I've found to do this is to use OGR_DS_CopyLayer() (or
> > similar)
> > > and then delete the old layer which is fairly expensive as it has to
> > copy all
> > > of the features as well.
> >
> > For drivers that are related to SQL databases, issuing an "ALTER TABLE foo
> > RENAME TO bar" with ExecuteSQL(), and re-opening the datasource afterwards
> > (OGR
> > will not notice the change) should do it.
> >
> > >
> > > 2.  Is it possible to change the order of layers within a writeable OGR
> > data
> > > store?  (Ie, change the ordering/indexing of layers as they would be
> > > retrieved with OGR_DS_GetLayer() ).
> >
> > That would be much more involved, not to say impossible. For example, for
> > SQL
> > based drivers, the driver list is issued from a request in system tables or
> > other tables and there's nothing to control the order of retrieval.
> > For filebased drivers, such as a directory of shapefiles, it depends on the
> > order of the operating system in which it return the filenames. Nothing
> > you can
> > have control on.
> > To make it possible reliably would probably involve adding a special OGR
> > metadata table with (order_number, layer_name) columns.
> > A potential workaround is to use a OGR VRT file as a thin wrapper above
> > your
> > "real" datasource. The layers will be ordered in the order they are listed
> > in
> > the VRT.
> >
> > Best regards,
> >
> > Even
> >
> > --
> > Geospatial professional services
> > http://even.rouault.free.fr/services.html
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>

From nixanz at nixanz.com  Thu Jul 17 04:58:51 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Thu, 17 Jul 2014 21:58:51 +1000
Subject: [gdal-dev] Rename and Reorder Layers?
In-Reply-To: <1405596546.53c7b38214ab5@imp.free.fr>
References: <F8633829-7F5F-4B4A-A423-DA463E59A188@nixanz.com>
	<1405596546.53c7b38214ab5@imp.free.fr>
Message-ID: <1A45037D-B100-472F-B405-6B226983C40F@nixanz.com>

Thanks Even.

I'm mostly working with the SQLite/Spatialite driver so the the SQL query may be a good work around for my first issue.  Thanks for this suggestion.

The second issue sounds more challenging, and I'll have to investigate the VRT file idea, or possibly come up with my own metadata mechanism for managing this.

Cheers,
Nik.


On 17 Jul 2014, at 9:29 pm, Even Rouault <even.rouault at mines-paris.org> wrote:

> Nik,
> 
>> I have two simple questions (not sure if the answers are as simple)...
>> 
>> 1.  Is it possible to rename an OGR layer in place within a writeable data
>> store without first creating a copy of the entire layer?
> 
> There's no provision in the OGR API to do that currently. Although it could be
> nice to have. That would require of course updating the drivers that would
> support that capability, and which are coded currently under the assumption that
> the layer name is immutable.
> For which driver(s) would you be interested to have that capability ?
> 
>> 
>> The only way I've found to do this is to use OGR_DS_CopyLayer() (or similar)
>> and then delete the old layer which is fairly expensive as it has to copy all
>> of the features as well.
> 
> For drivers that are related to SQL databases, issuing an "ALTER TABLE foo
> RENAME TO bar" with ExecuteSQL(), and re-opening the datasource afterwards (OGR
> will not notice the change) should do it.
> 
>> 
>> 2.  Is it possible to change the order of layers within a writeable OGR data
>> store?  (Ie, change the ordering/indexing of layers as they would be
>> retrieved with OGR_DS_GetLayer() ).
> 
> That would be much more involved, not to say impossible. For example, for SQL
> based drivers, the driver list is issued from a request in system tables or
> other tables and there's nothing to control the order of retrieval.
> For filebased drivers, such as a directory of shapefiles, it depends on the
> order of the operating system in which it return the filenames. Nothing you can
> have control on.
> To make it possible reliably would probably involve adding a special OGR
> metadata table with (order_number, layer_name) columns.
> A potential workaround is to use a OGR VRT file as a thin wrapper above your
> "real" datasource. The layers will be ordered in the order they are listed in
> the VRT.
> 
> Best regards,
> 
> Even
> 
> -- 
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> 


From aperi2007 at gmail.com  Thu Jul 17 06:25:31 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 17 Jul 2014 15:25:31 +0200
Subject: [gdal-dev] How use an SVG in the OGR Feature Styles
Message-ID: <CABqTJk_KKSv2Qy8EZsWUmcwoa1pAKTFXq_2v=XFaLFg0eTUfig@mail.gmail.com>

Hi,

I'm studyng the specs for
OGR Feature Style.

available at http://www.gdal.org/ogr_feature_style.html

Our goal is to try to use it with mapserver just now and in the future on QGIS.

In that spec, in the BRUSH Tool parameters section
and also in the Symbol tool section,

I read about the option to define any vector symbol and is cited as
example the WMF or bitmap image.

I like to know if is usable instead of a WMF an SVG symbol definition.

And if yes , if there is any example of how to set an SVG file inside
the Brush or Symbol Tool section.

Thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From aurelien.albert at alyotech.fr  Thu Jul 17 07:07:52 2014
From: aurelien.albert at alyotech.fr (orel)
Date: Thu, 17 Jul 2014 07:07:52 -0700 (PDT)
Subject: [gdal-dev] Lambert 93 problem with GDAL 1.11.0
Message-ID: <1405606072378-5151515.post@n6.nabble.com>

Hi,

I've downloaded GDAL 1.11.0 sources and built it, with Proj 4.8, under Win7
(32bits compilation)

I've got problems using shape file with "Lambert 93" projection defined as
follow (ogrinfo output) :

PROJCS["Lambert_Conformal_Conic",
    GEOGCS["GCS_Geographic Coordinate System",
        DATUM["RGF-93",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["scale_factor",1],
    PARAMETER["standard_parallel_1",44],
    PARAMETER["standard_parallel_2",49],
    PARAMETER["central_meridian",3],
    PARAMETER["latitude_of_origin",46.5],
    PARAMETER["false_easting",700000],
    PARAMETER["false_northing",6600000],
    UNIT["Meter",1]]

Everytime I reproject this shapefile using "ogr2ogr -t_srs" the points are
moved by more than 100 km !

Is there any error in OGR code ? EPSG database ? My file's WKT ?

Thanks !




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Lambert-93-problem-with-GDAL-1-11-0-tp5151515.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From webmaster at spaceyes.fr  Thu Jul 17 07:31:42 2014
From: webmaster at spaceyes.fr (=?UTF-8?Q?Fr=C3=A9d=C3=A9ric_Trastour?=)
Date: Thu, 17 Jul 2014 16:31:42 +0200
Subject: [gdal-dev] Lambert 93 problem with GDAL 1.11.0
In-Reply-To: <1405606072378-5151515.post@n6.nabble.com>
References: <1405606072378-5151515.post@n6.nabble.com>
Message-ID: <091201cfa1cb$d4a83460$7df89d20$@fr>

Hi, 

It seems that in your wkt standard_parallel_1 et standard_parallel_2 values are inverted.
Take a look at : http://spatialreference.org/ref/epsg/2154/prettywkt/

Br,
Fred.

-----Message d'origine-----
De : gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de orel
Envoy? : jeudi 17 juillet 2014 16:08
? : gdal-dev at lists.osgeo.org
Objet : [gdal-dev] Lambert 93 problem with GDAL 1.11.0

Hi,

I've downloaded GDAL 1.11.0 sources and built it, with Proj 4.8, under Win7 (32bits compilation)

I've got problems using shape file with "Lambert 93" projection defined as follow (ogrinfo output) :

PROJCS["Lambert_Conformal_Conic",
    GEOGCS["GCS_Geographic Coordinate System",
        DATUM["RGF-93",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["scale_factor",1],
    PARAMETER["standard_parallel_1",44],
    PARAMETER["standard_parallel_2",49],
    PARAMETER["central_meridian",3],
    PARAMETER["latitude_of_origin",46.5],
    PARAMETER["false_easting",700000],
    PARAMETER["false_northing",6600000],
    UNIT["Meter",1]]

Everytime I reproject this shapefile using "ogr2ogr -t_srs" the points are moved by more than 100 km !

Is there any error in OGR code ? EPSG database ? My file's WKT ?

Thanks !




--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Lambert-93-problem-with-GDAL-1-11-0-tp5151515.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


From gustavohissi at hotmail.com  Thu Jul 17 07:52:23 2014
From: gustavohissi at hotmail.com (gustavohissi)
Date: Thu, 17 Jul 2014 07:52:23 -0700 (PDT)
Subject: [gdal-dev] Calculate lat lon of image corners knowing center's
	lat lon
In-Reply-To: <4C0AD6EC.9040106@hotmail.com>
References: <AANLkTinI9WgkN-3bfV8upZl7DkX1gBKsojDplDHTUXJo@mail.gmail.com>
	<4C0AB17B.3010703@hotmail.com>
	<AANLkTilQSqewVti1CPOEidPkI1sgllGvGCkx7wi321i3@mail.gmail.com>
	<4C0AD6EC.9040106@hotmail.com>
Message-ID: <1405608743788-5151532.post@n6.nabble.com>

Hello, I`m sorry to raise this topic again but, I have a similar issue with a
PNG file from a weather radar.

I know the center lat,lon value of this image, the projection is aeqd
(azimuthal equidistant) and the area it covers is a 400km sided square.

Is it possible to georeference this image with this amount of information?
  
  Image Size : 800x800, with 800km square side
  Projection   : Azimuthal Equidistant
  Center pixel (400,400) at Reference latitude  : -23.2492 and  Reference
longitude : -45.9359 

Thank in advance.
<http://osgeo-org.1560.x6.nabble.com/file/n5151532/echotop.png> 



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-Calculate-lat-lon-of-image-corners-knowing-center-s-lat-lon-tp3748992p5151532.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bradhaack at fastmail.us  Thu Jul 17 08:38:06 2014
From: bradhaack at fastmail.us (brad)
Date: Thu, 17 Jul 2014 09:38:06 -0600
Subject: [gdal-dev] geo PDF with layers
Message-ID: <1405611486.2140.27.camel@localhost.localdomain>

I have gdal 1.9.2 on fedora 19, that appears to be the latest build
available from fedora.
I have a geo PDF, from US Topo which has several layers, including an
image layer.  I would like to convert this to tiff without the image
layer.   From what I can figure out, I need 1.10 to do this.  Is that
true?   There isn't a repository for more a more up to date version is
there?
Thanks.



From m.g.aschenbeck at gmail.com  Thu Jul 17 09:46:16 2014
From: m.g.aschenbeck at gmail.com (Michael Aschenbeck)
Date: Thu, 17 Jul 2014 10:46:16 -0600
Subject: [gdal-dev] GDAL Arbitrary Warp Problems
In-Reply-To: <201407152100.51004.even.rouault@mines-paris.org>
References: <CADGz_tKHkBU5j6T5MRa5A6Chc5phNHc_DKn0CuT6fKevbyx13Q@mail.gmail.com>
	<201407152043.30626.even.rouault@mines-paris.org>
	<CADGz_tLg4Fgd=1mMaOL=P1FgWBqi663kb1DPwiAriu5xSMS4Eg@mail.gmail.com>
	<201407152100.51004.even.rouault@mines-paris.org>
Message-ID: <CADGz_tLdOQP9KK0tHPQaoSKShDE=1Ur3GvaFPOEFKex=G=r7vg@mail.gmail.com>

Thanks Even, this was my lone hang-up and got it me on the right track!


On Tue, Jul 15, 2014 at 1:00 PM, Even Rouault <even.rouault at mines-paris.org>
wrote:

> Le mardi 15 juillet 2014 20:52:16, Michael Aschenbeck a ?crit :
> > Thanks for your response.
> >
> > For my application, I will be creating the transformation on the fly.  It
> > will be a non-standard transformation.  Unless I'm mistaken, I don't
> > believe this can be done with gdalwarp directly.
> >
> > Also, I am under the assumption that its source code is introduced in the
> > tutorial I am working off of (http://www.gdal.org/warptut.html).  Yet,
> this
> > just introduces a standard transformation, not a custom one.  This is why
> > I'm having trouble.
>
> When doing custom stuff, you often need to step into GDAL code to
> understand
> better how things are interacting together.
> Actually looking at your identityTransform and GDALSuggestedWarpOutput2(),
> I
> think there's at least something you should fix. You should initialize all
> the
> nPointcount elements of then panSuccess array to 1.
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140717/aae38caf/attachment.html>

From andre+joost at nurfuerspam.de  Thu Jul 17 11:23:08 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 17 Jul 2014 20:23:08 +0200
Subject: [gdal-dev] Lambert 93 problem with GDAL 1.11.0
In-Reply-To: <091201cfa1cb$d4a83460$7df89d20$@fr>
References: <1405606072378-5151515.post@n6.nabble.com>
	<091201cfa1cb$d4a83460$7df89d20$@fr>
Message-ID: <lq94cj$s2h$1@ger.gmane.org>

Am 17.07.2014 16:31, schrieb Fr?d?ric Trastour:
> Hi,
>
> It seems that in your wkt standard_parallel_1 et standard_parallel_2 values are inverted.
> Take a look at : http://spatialreference.org/ref/epsg/2154/prettywkt/

That should not do any harm.

Look at ESRI:102110:
http://spatialreference.org/ref/esri/102110/html/

In QGIS, both align perfectly for me, and to the unprojected data.

Greetings,
Andr? Joost



From even.rouault at mines-paris.org  Thu Jul 17 11:41:54 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Jul 2014 20:41:54 +0200
Subject: [gdal-dev] geo PDF with layers
In-Reply-To: <1405611486.2140.27.camel@localhost.localdomain>
References: <1405611486.2140.27.camel@localhost.localdomain>
Message-ID: <201407172041.54660.even.rouault@mines-paris.org>

Le jeudi 17 juillet 2014 17:38:06, brad a ?crit :
> I have gdal 1.9.2 on fedora 19, that appears to be the latest build
> available from fedora.
> I have a geo PDF, from US Topo which has several layers, including an
> image layer.  I would like to convert this to tiff without the image
> layer.   From what I can figure out, I need 1.10 to do this.  Is that
> true?   There isn't a repository for more a more up to date version is
> there?

Yes, you need 1.10 or 1.11. You can always compile GDAL from source.

> Thanks.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Thu Jul 17 11:55:17 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Jul 2014 20:55:17 +0200
Subject: [gdal-dev] Lambert 93 problem with GDAL 1.11.0
In-Reply-To: <091201cfa1cb$d4a83460$7df89d20$@fr>
References: <1405606072378-5151515.post@n6.nabble.com>
	<091201cfa1cb$d4a83460$7df89d20$@fr>
Message-ID: <201407172055.17473.even.rouault@mines-paris.org>

Le jeudi 17 juillet 2014 16:31:42, Fr?d?ric Trastour a ?crit :
> Hi,
> 
> It seems that in your wkt standard_parallel_1 et standard_parallel_2 values
> are inverted. Take a look at :
> http://spatialreference.org/ref/epsg/2154/prettywkt/

In LCC_2SP, the roles of StdP1 and StdP2 can be switched indifferently, so the 
WKT is OK.

Actually I've put the WKT in a lambert93.wkt file and tested with the false 
easting, northing and observed that the result is the central meridian, 
latitude of origin :

$ gdaltransform -s_srs lambert93.wkt -t_srs EPSG:4171
700000 6600000           
3 46.4999999999999 0

So that looks OK.

Are you sure the data is correct and/or consistant with the projection ?

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From etourigny.dev at gmail.com  Thu Jul 17 11:57:33 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 17 Jul 2014 15:57:33 -0300
Subject: [gdal-dev] geo PDF with layers
In-Reply-To: <201407172041.54660.even.rouault@mines-paris.org>
References: <1405611486.2140.27.camel@localhost.localdomain>
	<201407172041.54660.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvMYuFni9zh66kdAV0LjXOW9exGbabERtt3LQdT121+iAA@mail.gmail.com>

this page suggests that gdal was updated to 1.10, perhaps not for you
fedora version  or respositories

https://lists.fedoraproject.org/pipermail/package-announce/2014-March/130765.html



On Thu, Jul 17, 2014 at 3:41 PM, Even Rouault <even.rouault at mines-paris.org>
wrote:

> Le jeudi 17 juillet 2014 17:38:06, brad a ?crit :
> > I have gdal 1.9.2 on fedora 19, that appears to be the latest build
> > available from fedora.
> > I have a geo PDF, from US Topo which has several layers, including an
> > image layer.  I would like to convert this to tiff without the image
> > layer.   From what I can figure out, I need 1.10 to do this.  Is that
> > true?   There isn't a repository for more a more up to date version is
> > there?
>
> Yes, you need 1.10 or 1.11. You can always compile GDAL from source.
>
> > Thanks.
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140717/fbf3927a/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Jul 17 12:13:05 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 17 Jul 2014 21:13:05 +0200
Subject: [gdal-dev] How use an SVG in the OGR Feature Styles
In-Reply-To: <CABqTJk_KKSv2Qy8EZsWUmcwoa1pAKTFXq_2v=XFaLFg0eTUfig@mail.gmail.com>
References: <CABqTJk_KKSv2Qy8EZsWUmcwoa1pAKTFXq_2v=XFaLFg0eTUfig@mail.gmail.com>
Message-ID: <201407172113.05459.even.rouault@mines-paris.org>

Le jeudi 17 juillet 2014 15:25:31, Andrea Peri a ?crit :
> Hi,
> 
> I'm studyng the specs for
> OGR Feature Style.
> 
> available at http://www.gdal.org/ogr_feature_style.html
> 
> Our goal is to try to use it with mapserver just now and in the future on
> QGIS.
> 
> In that spec, in the BRUSH Tool parameters section
> and also in the Symbol tool section,
> 
> I read about the option to define any vector symbol and is cited as
> example the WMF or bitmap image.
> 
> I like to know if is usable instead of a WMF an SVG symbol definition.
> 
> And if yes , if there is any example of how to set an SVG file inside
> the Brush or Symbol Tool section.

Andrea,

I believe you could use any symbol id like "foo" in the OGR feature style 
string, and if you make sure that in your mapfile a matching "foo" symbol 
exists and points to a SVG file (see Note 3 in "Important notes" of 
http://mapserver.org/input/vector/ogr.html#styleitem-auto-rendering-layers-
using-style-information-from-the-ogr-file )

symbol 
  name "foo"
  type svg
  image "/path/to/some.svg"
end

OGR only passes a string to the using application (MapServer in that 
instance). It is up to the application to decide what to make with that 
string. 

Even

> 
> Thx,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From aperi2007 at gmail.com  Thu Jul 17 12:29:14 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 17 Jul 2014 21:29:14 +0200
Subject: [gdal-dev] How use an SVG in the OGR Feature Styles
In-Reply-To: <201407172113.05459.even.rouault@mines-paris.org>
References: <CABqTJk_KKSv2Qy8EZsWUmcwoa1pAKTFXq_2v=XFaLFg0eTUfig@mail.gmail.com>
	<201407172113.05459.even.rouault@mines-paris.org>
Message-ID: <CABqTJk_8hzzghE=LT-E_bWnyoFXWLVTN-uDkZfWDL=iYKjsNfg@mail.gmail.com>

Hi Even many thx for your explaination.

I try it.



2014-07-17 21:13 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> Le jeudi 17 juillet 2014 15:25:31, Andrea Peri a ?crit :
>> Hi,
>>
>> I'm studyng the specs for
>> OGR Feature Style.
>>
>> available at http://www.gdal.org/ogr_feature_style.html
>>
>> Our goal is to try to use it with mapserver just now and in the future on
>> QGIS.
>>
>> In that spec, in the BRUSH Tool parameters section
>> and also in the Symbol tool section,
>>
>> I read about the option to define any vector symbol and is cited as
>> example the WMF or bitmap image.
>>
>> I like to know if is usable instead of a WMF an SVG symbol definition.
>>
>> And if yes , if there is any example of how to set an SVG file inside
>> the Brush or Symbol Tool section.
>
> Andrea,
>
> I believe you could use any symbol id like "foo" in the OGR feature style
> string, and if you make sure that in your mapfile a matching "foo" symbol
> exists and points to a SVG file (see Note 3 in "Important notes" of
> http://mapserver.org/input/vector/ogr.html#styleitem-auto-rendering-layers-
> using-style-information-from-the-ogr-file )
>
> symbol
>   name "foo"
>   type svg
>   image "/path/to/some.svg"
> end
>
> OGR only passes a string to the using application (MapServer in that
> instance). It is up to the application to decide what to make with that
> string.
>
> Even
>
>>
>> Thx,
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From aurelien.albert at alyotech.fr  Thu Jul 17 23:36:58 2014
From: aurelien.albert at alyotech.fr (orel)
Date: Thu, 17 Jul 2014 23:36:58 -0700 (PDT)
Subject: [gdal-dev] Lambert 93 problem with GDAL 1.11.0
In-Reply-To: <091201cfa1cb$d4a83460$7df89d20$@fr>
References: <1405606072378-5151515.post@n6.nabble.com>
	<091201cfa1cb$d4a83460$7df89d20$@fr>
Message-ID: <1405665418774-5151654.post@n6.nabble.com>

Thanks for spotted this, but it doesn't change anything.

I've uploaded the file here :

http://speedy.sh/vNEcQ/test-bati-pts2.zip
<http://speedy.sh/vNEcQ/test-bati-pts2.zip>  

If I display it, using GlobalMapper for example (or my osgEarth based
application), the data are in the right place.

If I reproject it using "ogr2ogr -t_srs" to EPSG:4326 or EPSG:3857 (or any
other I guess) the point are then moved by more than 100 km.

I've try to fix the WKT in the prj file, or even replace it using "ogr2ogr
-a_srs EPSG:2154", but always with the same result.

It seems very strange to me since osgEarth dispy it proerly and osgEarth is
based on GDAL. I don't if GlobalMapper is also based on GDAL, but it siplay
it properly too.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Lambert-93-problem-with-GDAL-1-11-0-tp5151515p5151654.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From aurelien.albert at alyotech.fr  Fri Jul 18 00:08:34 2014
From: aurelien.albert at alyotech.fr (orel)
Date: Fri, 18 Jul 2014 00:08:34 -0700 (PDT)
Subject: [gdal-dev] Which format is the best identify a spatial
	reference ?
In-Reply-To: <201407152048.50545.even.rouault@mines-paris.org>
References: <1405410322158-5151074.post@n6.nabble.com>
	<201407152048.50545.even.rouault@mines-paris.org>
Message-ID: <1405667314219-5151657.post@n6.nabble.com>

Thanks for these informations !

Does that mean that the OGRSpatialReference method "ExportToWKT" can fail in
some cases ?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Which-format-is-the-best-identify-a-spatial-reference-tp5151074p5151657.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From bradhaack at fastmail.us  Fri Jul 18 07:02:31 2014
From: bradhaack at fastmail.us (brad)
Date: Fri, 18 Jul 2014 08:02:31 -0600
Subject: [gdal-dev] geo PDF with layers
In-Reply-To: <CA+TxYvMYuFni9zh66kdAV0LjXOW9exGbabERtt3LQdT121+iAA@mail.gmail.com>
References: <1405611486.2140.27.camel@localhost.localdomain>
	<201407172041.54660.even.rouault@mines-paris.org>
	<CA+TxYvMYuFni9zh66kdAV0LjXOW9exGbabERtt3LQdT121+iAA@mail.gmail.com>
Message-ID: <1405692151.1740.2.camel@localhost.localdomain>

Yes,  looks like it is available for fedora 20, but not 19.  I will have
to build from source, or update to f20.  Thanks.

On Thu, 2014-07-17 at 15:57 -0300, Etienne Tourigny wrote:
> this page suggests that gdal was updated to 1.10, perhaps not for you
> fedora version  or respositories
> 
> 
> https://lists.fedoraproject.org/pipermail/package-announce/2014-March/130765.html
> 
> 
> 
> 
> On Thu, Jul 17, 2014 at 3:41 PM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
>         Le jeudi 17 juillet 2014 17:38:06, brad a ?crit :
>         > I have gdal 1.9.2 on fedora 19, that appears to be the
>         latest build
>         > available from fedora.
>         > I have a geo PDF, from US Topo which has several layers,
>         including an
>         > image layer.  I would like to convert this to tiff without
>         the image
>         > layer.   From what I can figure out, I need 1.10 to do
>         this.  Is that
>         > true?   There isn't a repository for more a more up to date
>         version is
>         > there?
>         
>         
>         Yes, you need 1.10 or 1.11. You can always compile GDAL from
>         source.
>         
>         > Thanks.
>         >
>         >
>         > _______________________________________________
>         > gdal-dev mailing list
>         > gdal-dev at lists.osgeo.org
>         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
>         
>         --
>         Geospatial professional services
>         http://even.rouault.free.fr/services.html
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev at lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From andre+joost at nurfuerspam.de  Fri Jul 18 08:13:44 2014
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 18 Jul 2014 17:13:44 +0200
Subject: [gdal-dev] Lambert 93 problem with GDAL 1.11.0
In-Reply-To: <1405665418774-5151654.post@n6.nabble.com>
References: <1405606072378-5151515.post@n6.nabble.com>
	<091201cfa1cb$d4a83460$7df89d20$@fr>
	<1405665418774-5151654.post@n6.nabble.com>
Message-ID: <lqbdls$onn$1@ger.gmane.org>

Am 18.07.2014 08:36, schrieb orel:
> Thanks for spotted this, but it doesn't change anything.
>
> I've uploaded the file here :
>
> http://speedy.sh/vNEcQ/test-bati-pts2.zip
> <http://speedy.sh/vNEcQ/test-bati-pts2.zip>
>
> If I display it, using GlobalMapper for example (or my osgEarth based
> application), the data are in the right place.
>
> If I reproject it using "ogr2ogr -t_srs" to EPSG:4326 or EPSG:3857 (or any
> other I guess) the point are then moved by more than 100 km.

Not for me. Using gisinternals/sdk build of GDAL 1.11.0, and QGIS for 
display, the points fit perfectly. Same if I reproject using QGIS.

Maybe your self-built GDAL is somehow broken.

Greetings,
Andr? Joost


From even.rouault at mines-paris.org  Fri Jul 18 11:01:53 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 18 Jul 2014 20:01:53 +0200
Subject: [gdal-dev] Which format is the best identify a spatial
	reference ?
In-Reply-To: <1405667314219-5151657.post@n6.nabble.com>
References: <1405410322158-5151074.post@n6.nabble.com>
	<201407152048.50545.even.rouault@mines-paris.org>
	<1405667314219-5151657.post@n6.nabble.com>
Message-ID: <201407182001.53608.even.rouault@mines-paris.org>

Le vendredi 18 juillet 2014 09:08:34, orel a ?crit :
> Thanks for these informations !
> 
> Does that mean that the OGRSpatialReference method "ExportToWKT" can fail
> in some cases ?

No, as I said,  OGRSpatialReference C++ model directly map from/into (valid) 
WKT.
What can fail is importFromProj4() or importFromEPSG() in some cases.

> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Which-format-is-the-best-identify-a-sp
> atial-reference-tp5151074p5151657.html Sent from the GDAL - Dev mailing
> list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From aurelien.albert at alyotech.fr  Fri Jul 18 11:31:20 2014
From: aurelien.albert at alyotech.fr (orel)
Date: Fri, 18 Jul 2014 11:31:20 -0700 (PDT)
Subject: [gdal-dev] Which format is the best identify a spatial
	reference ?
In-Reply-To: <201407182001.53608.even.rouault@mines-paris.org>
References: <1405410322158-5151074.post@n6.nabble.com>
	<201407152048.50545.even.rouault@mines-paris.org>
	<1405667314219-5151657.post@n6.nabble.com>
	<201407182001.53608.even.rouault@mines-paris.org>
Message-ID: <1405708280231-5151847.post@n6.nabble.com>

Thanks for this clarification !



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Which-format-is-the-best-identify-a-spatial-reference-tp5151074p5151847.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From aurelien.albert at alyotech.fr  Fri Jul 18 11:33:17 2014
From: aurelien.albert at alyotech.fr (orel)
Date: Fri, 18 Jul 2014 11:33:17 -0700 (PDT)
Subject: [gdal-dev] Lambert 93 problem with GDAL 1.11.0
In-Reply-To: <lqbdls$onn$1@ger.gmane.org>
References: <1405606072378-5151515.post@n6.nabble.com>
	<091201cfa1cb$d4a83460$7df89d20$@fr>
	<1405665418774-5151654.post@n6.nabble.com>
	<lqbdls$onn$1@ger.gmane.org>
Message-ID: <1405708397851-5151849.post@n6.nabble.com>

Thanks for your tests results !

There is really something I don't understand about this file... maybe my
GDAL is broken...



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Lambert-93-problem-with-GDAL-1-11-0-tp5151515p5151849.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nicu.tofan at gmail.com  Fri Jul 18 12:07:20 2014
From: nicu.tofan at gmail.com (Nicu Tofan)
Date: Fri, 18 Jul 2014 22:07:20 +0300
Subject: [gdal-dev] Write support for MBTiles driver
Message-ID: <CAGFYcD-2T214AW=Muzk9F1RTh4c9YHi9k5+O5ZfjU1U+L-b7OA@mail.gmail.com>

Hello,

I would like to draw your attention to this ticket created by me:
http://trac.osgeo.org/gdal/ticket/5578

Here is its content:

 In version 1.11.0 gdal provides a read-only driver for MBTiles thanks to
>  the work of Even Rouault.
>  For the application that I'm working on I need to create MBTiles files and
>  I would like to make my work part of gdal's driver.
>
>  If there are other efforts in this direction I would love to help.
>
> References:
>
>    - MBTiles http://mbtiles.org/
>    - MBTiles Specification https://github.com/mapbox/mbtiles-spec
>    - Implementations
>    https://github.com/mapbox/mbtiles-spec/wiki/Implementations
>    - Driver Page on gdal http://www.gdal.org/frmt_mbtiles.html
>    - gdal2mb script https://github.com/developmentseed/gdal2mb
>    - MBTilesGenerator PHP library
>    https://github.com/HTML24/mbtiles-generator
>    - MBUtil Python package https://github.com/klokantech/mbutil
>    - mbtiler.cpp from MapBox
>    https://github.com/mapbox/mbtiler/blob/master/mbtiler.cpp
>    - ReaderWriterMBTiles.cpp from osgearth
>    http://updraft.github.io/osgearth-doc/html/ReaderWriterMBTiles_8cpp_source.html
>
>
Thanks,
Nick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140718/25cb70ab/attachment.html>

From gusevmihs at gmail.com  Fri Jul 18 13:22:43 2014
From: gusevmihs at gmail.com (Mikhail Gusev)
Date: Sat, 19 Jul 2014 00:22:43 +0400
Subject: [gdal-dev] GSoC weekly report 9. GDAL Networking
Message-ID: <CAJB43VojAN8BnN0D9KfuvfoZnPZT7DhsZQw-zWvCzmn-x+-=9Q@mail.gmail.com>

Hello everyone.
This week I've finally coped with python in GDAL, so I'm no longer blocked
on this. I've made some python tests for the gnminfo utility. See my blog
post about this:
http://gsoc2014gnm.blogspot.ru/2014/07/week-9-working-with-features-and.html
These weekends I'll have enough free time and I plan to finish the things,
according to my general plan for this week, i.e. graph analysis in gnm and
testing of gnm api directly in python (C methods for bindings are already
declared). The next week I will continue working according to my general
plan <http://gsoc2014gnm.blogspot.ru/2014/07/week-7-reviewed-timeline.html>.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140719/88b87021/attachment.html>

From nicu.tofan at gmail.com  Sat Jul 19 06:15:22 2014
From: nicu.tofan at gmail.com (Nicu Tofan)
Date: Sat, 19 Jul 2014 16:15:22 +0300
Subject: [gdal-dev] Write support for MBTiles driver
In-Reply-To: <CACqBkM9wMyB16KyPoriHp91SWbcZbgsC89iE1ApbQMgRWJoK8A@mail.gmail.com>
References: <CAGFYcD-2T214AW=Muzk9F1RTh4c9YHi9k5+O5ZfjU1U+L-b7OA@mail.gmail.com>
	<CACqBkM9wMyB16KyPoriHp91SWbcZbgsC89iE1ApbQMgRWJoK8A@mail.gmail.com>
Message-ID: <CAGFYcD8V-eunqXWWhgxP7UkUCATtFxXGARDMnz_206v1E6d2uw@mail.gmail.com>

Thanks, I'll have a look,
I see that Simon Th?pot is mentioned as author and Mark Johnson adapted
them.

Nick


2014-07-19 15:47 GMT+03:00 Eli Adam <eadam at co.lincoln.or.us>:

> http://geopaparazzi.github.io/geopaparazzi/ has write support built in as
> part of caching. I think that Mark is the person who added the MBTiles
> write support to Geopaparazzi.
>
> Best regards, Eli
>
> On Fri, Jul 18, 2014 at 12:07 PM, Nicu Tofan <nicu.tofan at gmail.com> wrote:
> > Hello,
> >
> > I would like to draw your attention to this ticket created by me:
> > http://trac.osgeo.org/gdal/ticket/5578
> >
> > Here is its content:
> >
> >> In version 1.11.0 gdal provides a read-only driver for MBTiles thanks to
> >> the work of Even Rouault.
> >> For the application that I'm working on I need to create MBTiles files
> >> and
> >> I would like to make my work part of gdal's driver.
> >>
> >> If there are other efforts in this direction I would love to help.
> >>
> >> References:
> >>
> >> MBTiles http://mbtiles.org/
> >> MBTiles Specification https://github.com/mapbox/mbtiles-spec
> >> Implementations
> >> https://github.com/mapbox/mbtiles-spec/wiki/Implementations
> >> Driver Page on gdal http://www.gdal.org/frmt_mbtiles.html
> >> gdal2mb script https://github.com/developmentseed/gdal2mb
> >> MBTilesGenerator PHP library
> https://github.com/HTML24/mbtiles-generator
> >> MBUtil Python package https://github.com/klokantech/mbutil
> >> mbtiler.cpp from MapBox
> >> https://github.com/mapbox/mbtiler/blob/master/mbtiler.cpp
> >> ReaderWriterMBTiles.cpp from osgearth
> >>
> http://updraft.github.io/osgearth-doc/html/ReaderWriterMBTiles_8cpp_source.html
> >
> >
> > Thanks,
> > Nick
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140719/ef7edc57/attachment.html>

From etourigny.dev at gmail.com  Sat Jul 19 10:22:33 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Sat, 19 Jul 2014 14:22:33 -0300
Subject: [gdal-dev] Write support for MBTiles driver
In-Reply-To: <CAGFYcD8V-eunqXWWhgxP7UkUCATtFxXGARDMnz_206v1E6d2uw@mail.gmail.com>
References: <CAGFYcD-2T214AW=Muzk9F1RTh4c9YHi9k5+O5ZfjU1U+L-b7OA@mail.gmail.com>
	<CACqBkM9wMyB16KyPoriHp91SWbcZbgsC89iE1ApbQMgRWJoK8A@mail.gmail.com>
	<CAGFYcD8V-eunqXWWhgxP7UkUCATtFxXGARDMnz_206v1E6d2uw@mail.gmail.com>
Message-ID: <CA+TxYvOUhJ606G8+LJQsHPLJRf3qGy0pn-Y3yXmGLujzD-bbJQ@mail.gmail.com>

Note that the licence used in the software (GNU GPL v3) is incompatible
with GDAL, so it cannot be included in the GDAL source tree without the
author's consent to use the code under another licence (such as the MIT/X
licence used by GDAL).


On Sat, Jul 19, 2014 at 10:15 AM, Nicu Tofan <nicu.tofan at gmail.com> wrote:

> Thanks, I'll have a look,
> I see that Simon Th?pot is mentioned as author and Mark Johnson adapted
> them.
>
> Nick
>
>
> 2014-07-19 15:47 GMT+03:00 Eli Adam <eadam at co.lincoln.or.us>:
>
>> http://geopaparazzi.github.io/geopaparazzi/ has write support built in
>> as part of caching. I think that Mark is the person who added the MBTiles
>> write support to Geopaparazzi.
>>
>> Best regards, Eli
>>
>> On Fri, Jul 18, 2014 at 12:07 PM, Nicu Tofan <nicu.tofan at gmail.com>
>> wrote:
>> > Hello,
>> >
>> > I would like to draw your attention to this ticket created by me:
>> > http://trac.osgeo.org/gdal/ticket/5578
>> >
>> > Here is its content:
>> >
>> >> In version 1.11.0 gdal provides a read-only driver for MBTiles thanks
>> to
>> >> the work of Even Rouault.
>> >> For the application that I'm working on I need to create MBTiles files
>> >> and
>> >> I would like to make my work part of gdal's driver.
>> >>
>> >> If there are other efforts in this direction I would love to help.
>> >>
>> >> References:
>> >>
>> >> MBTiles http://mbtiles.org/
>> >> MBTiles Specification https://github.com/mapbox/mbtiles-spec
>> >> Implementations
>> >> https://github.com/mapbox/mbtiles-spec/wiki/Implementations
>> >> Driver Page on gdal http://www.gdal.org/frmt_mbtiles.html
>> >> gdal2mb script https://github.com/developmentseed/gdal2mb
>> >> MBTilesGenerator PHP library
>> https://github.com/HTML24/mbtiles-generator
>> >> MBUtil Python package https://github.com/klokantech/mbutil
>> >> mbtiler.cpp from MapBox
>> >> https://github.com/mapbox/mbtiler/blob/master/mbtiler.cpp
>> >> ReaderWriterMBTiles.cpp from osgearth
>> >>
>> http://updraft.github.io/osgearth-doc/html/ReaderWriterMBTiles_8cpp_source.html
>> >
>> >
>> > Thanks,
>> > Nick
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140719/91bb52ca/attachment.html>

From xenon at alphapixel.com  Sat Jul 19 16:40:27 2014
From: xenon at alphapixel.com (Chris Hanson)
Date: Sat, 19 Jul 2014 17:40:27 -0600
Subject: [gdal-dev] Write support for MBTiles driver
In-Reply-To: <CA+TxYvOUhJ606G8+LJQsHPLJRf3qGy0pn-Y3yXmGLujzD-bbJQ@mail.gmail.com>
References: <CAGFYcD-2T214AW=Muzk9F1RTh4c9YHi9k5+O5ZfjU1U+L-b7OA@mail.gmail.com>
	<CACqBkM9wMyB16KyPoriHp91SWbcZbgsC89iE1ApbQMgRWJoK8A@mail.gmail.com>
	<CAGFYcD8V-eunqXWWhgxP7UkUCATtFxXGARDMnz_206v1E6d2uw@mail.gmail.com>
	<CA+TxYvOUhJ606G8+LJQsHPLJRf3qGy0pn-Y3yXmGLujzD-bbJQ@mail.gmail.com>
Message-ID: <CAGoufmZoAQCmSrsvk5kkyZJWTYUJVmaT86P4acyFNcFxMqcLHQ@mail.gmail.com>

osgEarth has an MBTiles driver capable of writing:

http://updraft.github.io/osgearth-doc/html/ReaderWriterMBTiles_8cpp_source.html

It's openSceneGraph-centric, but the license is probably amenable to GDAL.
osgEarth uses GDAL as well.


On Sat, Jul 19, 2014 at 11:22 AM, Etienne Tourigny <etourigny.dev at gmail.com>
wrote:

> Note that the licence used in the software (GNU GPL v3) is incompatible
> with GDAL, so it cannot be included in the GDAL source tree without the
> author's consent to use the code under another licence (such as the MIT/X
> licence used by GDAL).
>
>
> On Sat, Jul 19, 2014 at 10:15 AM, Nicu Tofan <nicu.tofan at gmail.com> wrote:
>
>> Thanks, I'll have a look,
>> I see that Simon Th?pot is mentioned as author and Mark Johnson adapted
>> them.
>>
>> Nick
>>
>>
>> 2014-07-19 15:47 GMT+03:00 Eli Adam <eadam at co.lincoln.or.us>:
>>
>>> http://geopaparazzi.github.io/geopaparazzi/ has write support built in
>>> as part of caching. I think that Mark is the person who added the MBTiles
>>> write support to Geopaparazzi.
>>>
>>> Best regards, Eli
>>>
>>> On Fri, Jul 18, 2014 at 12:07 PM, Nicu Tofan <nicu.tofan at gmail.com>
>>> wrote:
>>> > Hello,
>>> >
>>> > I would like to draw your attention to this ticket created by me:
>>> > http://trac.osgeo.org/gdal/ticket/5578
>>> >
>>> > Here is its content:
>>> >
>>> >> In version 1.11.0 gdal provides a read-only driver for MBTiles thanks
>>> to
>>> >> the work of Even Rouault.
>>> >> For the application that I'm working on I need to create MBTiles files
>>> >> and
>>> >> I would like to make my work part of gdal's driver.
>>> >>
>>> >> If there are other efforts in this direction I would love to help.
>>> >>
>>> >> References:
>>> >>
>>> >> MBTiles http://mbtiles.org/
>>> >> MBTiles Specification https://github.com/mapbox/mbtiles-spec
>>> >> Implementations
>>> >> https://github.com/mapbox/mbtiles-spec/wiki/Implementations
>>> >> Driver Page on gdal http://www.gdal.org/frmt_mbtiles.html
>>> >> gdal2mb script https://github.com/developmentseed/gdal2mb
>>> >> MBTilesGenerator PHP library
>>> https://github.com/HTML24/mbtiles-generator
>>> >> MBUtil Python package https://github.com/klokantech/mbutil
>>> >> mbtiler.cpp from MapBox
>>> >> https://github.com/mapbox/mbtiler/blob/master/mbtiler.cpp
>>> >> ReaderWriterMBTiles.cpp from osgearth
>>> >>
>>> http://updraft.github.io/osgearth-doc/html/ReaderWriterMBTiles_8cpp_source.html
>>> >
>>> >
>>> > Thanks,
>>> > Nick
>>> >
>>> > _______________________________________________
>>> > gdal-dev mailing list
>>> > gdal-dev at lists.osgeo.org
>>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Chris 'Xenon' Hanson, omo sanza lettere. Xenon at AlphaPixel.com
http://www.alphapixel.com/
Training ? Consulting ? Contracting
3D ? Scene Graphs (Open Scene Graph/OSG) ? OpenGL 2 ? OpenGL 3 ? OpenGL 4 ?
GLSL ? OpenGL ES 1 ? OpenGL ES 2 ? OpenCL
Digital Imaging ? GIS ? GPS ? osgEarth ? Terrain ? Telemetry ? Cryptography
? Digital Audio ? LIDAR ? Kinect ? Embedded ? Mobile ? iPhone/iPad/iOS ?
Android
@alphapixel <https://twitter.com/alphapixel> facebook.com/alphapixel (775)
623-PIXL [7495]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140719/421bf528/attachment.html>

From mj10777 at googlemail.com  Mon Jul 21 06:12:12 2014
From: mj10777 at googlemail.com (Mark Johnson)
Date: Mon, 21 Jul 2014 15:12:12 +0200
Subject: [gdal-dev] Write support for MBTiles drive
Message-ID: <CAEEbjBiHjTQ+SE9_5wTmTHBuJ8_bwTWpLASeDYV2Nuu7T5+M1g@mail.gmail.com>

>> Note that the licence used in the software (GNU GPL v3) is incompatible
>> with GDAL, so it cannot be included in the GDAL source tree without the
>> author's consent to use the code under another licence (such as the MIT/X
>> licence used by GDAL).

If geopaparazzi was meant by this, we have no objection for anyone to
use this code.

https://github.com/geopaparazzi/geopaparazzi/issues/189

Our class was based on the original work of 'Simon Th?pot'
- which had a minimal reading logic only

I made some needed corrections and developed the writing logic.

There is also a python implementation
- class MbTiles

that can be found at:

https://github.com/mj10777/mapmbtiles/blob/master/mapmbtiles/mbtiles.py

This was an attempt to adapt the last public version of gdal2tiles.py
before it became a closed source from the original author.

- goal was to be able to store the results of gdal2tiles directly in a
mbtiles file

there are one or two functions based on other sources (and documented as such),

but otherwise a python version of the geopaparazzi version.

At
http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#tileinfo.sh

there is a bash version that also creates mbtiles that I wrote.

All of these versions create mbtiles with

- view/table logic as done by tilemill

-- making it possible that 'blank' image are only stored once

--- blank being all 256x256 have the same rgb value

If there are any questions, fell free to open an issue at
 https://github.com/geopaparazzi/geopaparazzi/issues

Mark Johnson, Berlin Germany
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140721/36dec631/attachment.html>

From nicu.tofan at gmail.com  Mon Jul 21 09:48:32 2014
From: nicu.tofan at gmail.com (Nicu Tofan)
Date: Mon, 21 Jul 2014 19:48:32 +0300
Subject: [gdal-dev] Write support for MBTiles drive
Message-ID: <CAGFYcD-Q6SttEHQOo=4cD+gmVwjsVLAXvyUMivwT0NAxz6L7xw@mail.gmail.com>

Thank you all for your input. I will start the work later this week and I
will keep you posted about the progress. Also, thanks for your support and
comments, Mark.

I haven't had the time yet to read the guidelines for developers (regarding
style & workflow & all) but I will make sure I do that before doing any
work. I was thinking about manually forking the gdal source on GitHub,
doing the work there, and, when done, submitting a patch for review.

Regards,
Nick


2014-07-21 16:12 GMT+03:00 Mark Johnson <mj10777 at googlemail.com>:

> >> Note that the licence used in the software (GNU GPL v3) is incompatible
> >> with GDAL, so it cannot be included in the GDAL source tree without the
> >> author's consent to use the code under another licence (such as the MIT/X
> >> licence used by GDAL).
>
> If geopaparazzi was meant by this, we have no objection for anyone to use this code.
>
> https://github.com/geopaparazzi/geopaparazzi/issues/189
>
>
> Our class was based on the original work of 'Simon Th?pot'
> - which had a minimal reading logic only
>
> I made some needed corrections and developed the writing logic.
>
> There is also a python implementation
> - class MbTiles
>
> that can be found at:
>
> https://github.com/mj10777/mapmbtiles/blob/master/mapmbtiles/mbtiles.py
>
>
> This was an attempt to adapt the last public version of gdal2tiles.py before it became a closed source from the original author.
>
> - goal was to be able to store the results of gdal2tiles directly in a mbtiles file
>
> there are one or two functions based on other sources (and documented as such),
>
> but otherwise a python version of the geopaparazzi version.
>
> At
> http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#tileinfo.sh
>
>
> there is a bash version that also creates mbtiles that I wrote.
>
> All of these versions create mbtiles with
>
> - view/table logic as done by tilemill
>
> -- making it possible that 'blank' image are only stored once
>
> --- blank being all 256x256 have the same rgb value
>
> If there are any questions, fell free to open an issue at
>  https://github.com/geopaparazzi/geopaparazzi/issues
>
>
> Mark Johnson, Berlin Germany
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140721/0ca7beb1/attachment.html>

From sean at mapbox.com  Mon Jul 21 10:40:05 2014
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 21 Jul 2014 11:40:05 -0600
Subject: [gdal-dev] Write support for MBTiles drive
In-Reply-To: <CAGFYcD-Q6SttEHQOo=4cD+gmVwjsVLAXvyUMivwT0NAxz6L7xw@mail.gmail.com>
References: <CAGFYcD-Q6SttEHQOo=4cD+gmVwjsVLAXvyUMivwT0NAxz6L7xw@mail.gmail.com>
Message-ID: <53CD5075.4000901@mapbox.com>

Dear Nick,

For what it's worth, the Mapbox project 
https://github.com/mapbox/mbtiler is already being used in software that 
prepares tiles for upload to mapbox.com. We licensed it MIT thinking 
that it might be used in future updates to the GDAL MBTiles driver. 
Since it doesn't tile or implement traversal of tile trees, it's quite 
limited in its present state.


On 7/21/14, 10:48 AM, Nicu Tofan wrote:
> Thank you all for your input. I will start the work later this week and
> I will keep you posted about the progress. Also, thanks for your support
> and comments, Mark.
>
> I haven't had the time yet to read the guidelines for developers
> (regarding style & workflow & all) but I will make sure I do that before
> doing any work. I was thinking about manually forking the gdal source on
> GitHub, doing the work there, and, when done, submitting a patch for
> review.
>
> Regards,
> Nick
>
>
> 2014-07-21 16:12 GMT+03:00 Mark Johnson <mj10777 at googlemail.com
> <mailto:mj10777 at googlemail.com>>:
>
>     >> Note that the licence used in the software (GNU GPL v3) is incompatible
>     >> with GDAL, so it cannot be included in the GDAL source tree without the
>     >> author's consent to use the code under another licence (such as the MIT/X
>     >> licence used by GDAL).
>
>     If geopaparazzi was meant by this, we have no objection for anyone to use this code.
>
>     https://github.com/geopaparazzi/geopaparazzi/issues/189
>
>
>
>
>     Our class was based on the original work of 'Simon Th?pot'
>     - which had a minimal reading logic only
>
>     I made some needed corrections and developed the writing logic.
>
>     There is also a python implementation
>     -class  MbTiles
>
>     that can be found at:
>
>     https://github.com/mj10777/mapmbtiles/blob/master/mapmbtiles/mbtiles.py
>
>
>
>
>     This was an attempt to adapt the last public version of gdal2tiles.py before it became a closed source from the original author.
>
>     - goal was to be able to store the results of gdal2tiles directly in a mbtiles file
>
>
>
>     there are one or two functions based on other sources (and documented as such),
>
>     but otherwise a python version of the geopaparazzi version.
>
>     At
>     http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames#tileinfo.sh
>
>
>
>
>     there is a bash version that also creates mbtiles that I wrote.
>
>     All of these versions create mbtiles with
>
>     - view/table logic as done by tilemill
>
>     -- making it possible that 'blank' image are only stored once
>
>
>
>     --- blank being all 256x256 have the same rgb value
>
>     If there are any questions, fell free to open an issue at
>       https://github.com/geopaparazzi/geopaparazzi/issues
>
>
>
>
>     Mark Johnson, Berlin Germany
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-- 
Sean Gillies
sean at mapbox.com

From eadam at co.lincoln.or.us  Mon Jul 21 13:18:27 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 21 Jul 2014 13:18:27 -0700
Subject: [gdal-dev] GDAL 1.7.3 can't read tiff written by GDAL 1.11
Message-ID: <CACqBkM_dO6vJynvtrKmVm0Rod0jOTT8EABatdtz1AtDrighiTA@mail.gmail.com>

 Hi all,

I've got some recent tiff data that can't be read by GDAL 1.7.3
("gdalinfo.exe has stopped working").  It appears to work fine with
GDAL 1.11.  The output from GDAL 1.11 can't be read by GDAL 1.7.3
either.  Hmm, oddly it seems to work with GDAL 1.6.

I have an older MapServer and GDAL that I'd like to use with new data
without updating MapServer and GDAL so my goal is find a way to use or
alter the data so it is usable by GDAL 1.7.3.  I also want to know if
the data is valid and complies with the the geotif specification.

This is on Windows 7 and OSGeo4W although I also had some similar
issues on Ubuntu 10.04.  Below are GDAL 1.11 version, gdalinfo with
debug, listgeo, and finally gdal_translate output that can't be read
by GDAL 1.7.3 (attached).  There are messages about "GTIFF: converting
geokey to meters to fix bug in old libgeotiff" and "TIFFReadDirectory:
Warning, Unknown field with tag 2457 (0x999) encountered."  Further
below the GDAL1.11 information, is GDAL 1.7.3 showing that it can't be
read and the error output.

Do 06S08W19_gdal1_11_ouput2.tif and 06S08W19.tif conform to the geotif
specification and contain valid data? Any suggestions on how to keep
using my older install without updating?

Best regards, Eli

gdalinfo --version
GDAL 1.11.0, released 2014/04/16

gdalinfo 06S08W19.tif --debug on
GDAL: GDALOpen(06S08W19.tif, this=027C3F20) succeeds as GTiff.
Driver: GTiff/GeoTIFF
GDAL: GDALDefaultOverviews::OverviewScan()
Files: 06S08W19.tif
       06S08W19.tfw
Size is 3314, 5508
GTIFF: converting geokey to meters to fix bug in old libgeotiff
GTIFF: converting geokey to meters to fix bug in old libgeotiff
Coordinate System is:
PROJCS["NAD_1983_2011_StatePlane_Oregon_North_FIPS_3601_Ft_Intl",
    GEOGCS["GCS_NAD_1983_2011",
        DATUM["NAD_1983_2011",
            SPHEROID["GRS_1980",6378137,298.257222101]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",44.33333333333334],
    PARAMETER["standard_parallel_2",46],
    PARAMETER["latitude_of_origin",43.66666666666666],
    PARAMETER["central_meridian",-120.5],
    PARAMETER["false_easting",8202099.737532808],
    PARAMETER["false_northing",0],
    UNIT["foot",0.3048,
        AUTHORITY["EPSG","9002"]]]
Origin = (7367100.000000000000000,520508.000000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
  TIFFTAG_XRESOLUTION=200
  TIFFTAG_YRESOLUTION=200
Image Structure Metadata:
  INTERLEAVE=PIXEL
OGRCT: PROJ >= 4.8.0 features enabled
OGRCT: Source: +proj=lcc +lat_1=44.33333333333334 +lat_2=46 +lat_0=43.6666666666
6666 +lon_0=-120.5 +x_0=2500000 +y_0=0 +ellps=GRS80 +units=ft +no_defs
OGRCT: Target: +proj=longlat +ellps=GRS80 +no_defs
Corner Coordinates:
Upper Left  ( 7367100.000,  520508.000) (123d43'54.49"W, 45d 2'54.88"N)
Lower Left  ( 7367100.000,  515000.000) (123d43'51.43"W, 45d 2' 0.54"N)
Upper Right ( 7370414.000,  520508.000) (123d43' 8.37"W, 45d 2'56.19"N)
Lower Right ( 7370414.000,  515000.000) (123d43' 5.31"W, 45d 2' 1.84"N)
Center      ( 7368757.000,  517754.000) (123d43'29.90"W, 45d 2'28.36"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
GDAL: GDALClose(06S08W19.tif, this=027C3F20)


listgeo 06S08W19.tif
TIFFReadDirectory: Warning, Unknown field with tag 2457 (0x999) encountered.
Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                0                0
         7367100          520508           0
      ModelPixelScaleTag (1,3):
         1                1                0
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,67): "PCS Name = NAD_1983_2011_StatePlane_Oregon_N
orth_FIPS_3601_Ft_Intl"
      GeographicTypeGeoKey (Short,1): User-Defined
      GeogCitationGeoKey (Ascii,92): "GCS Name = GCS_NAD_1983_2011
Datum = NAD_1
983_2011
Ellipsoid = GRS_1980
Primem = Greenwich
"
      GeogGeodeticDatumGeoKey (Short,1): User-Defined
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      GeogEllipsoidGeoKey (Short,1): User-Defined
      GeogSemiMajorAxisGeoKey (Double,1): 6378137
      GeogInvFlatteningGeoKey (Double,1): 298.257222101
      GeogPrimeMeridianLongGeoKey (Double,1): 0
      Unknown-3059 (Short,1): Unknown-1
      ProjectedCSTypeGeoKey (Short,1): User-Defined
      ProjectionGeoKey (Short,1): User-Defined
      ProjCoordTransGeoKey (Short,1): CT_LambertConfConic_2SP
      ProjLinearUnitsGeoKey (Short,1): Linear_Foot
      ProjStdParallel1GeoKey (Double,1): 44.3333333333333
      ProjStdParallel2GeoKey (Double,1): 46
      ProjFalseOriginLongGeoKey (Double,1): -120.5
      ProjFalseOriginLatGeoKey (Double,1): 43.6666666666667
      ProjFalseOriginEastingGeoKey (Double,1): 8202099.73753281
      ProjFalseOriginNorthingGeoKey (Double,1): 0
      End_Of_Keys.
   End_Of_Geotiff.
Projection Method: CT_LambertConfConic_2SP
   ProjFalseOriginLatGeoKey: 43.666667 ( 43d40' 0.00"N)
   ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
   ProjStdParallel1GeoKey: 44.333333 ( 44d20' 0.00"N)
   ProjStdParallel2GeoKey: 46.000000 ( 46d 0' 0.00"N)
   ProjFalseEastingGeoKey: 8202099.737533 m
   ProjFalseNorthingGeoKey: 0.000000 m
Projection Linear Units: 9002/foot (0.304800m)
Corner Coordinates:
Upper Left    ( 7367100.000,  520508.000)
Lower Left    ( 7367100.000,  515000.000)
Upper Right   ( 7370414.000,  520508.000)
Lower Right   ( 7370414.000,  515000.000)
Center        ( 7368757.000,  517754.000)

gdal_translate -projwin 7367110 520505 7367120 520495 06S08W19.tif
06S08W19_gdal1_11_ouput2.tif
Input file size is 3314, 5508
Computed -srcwin 10 3 10 10 from projected window.
0...10...20...30...40...50...60...70...80...90...100 - done.



___________________________________________________________________________________________________

GDAL 1.7.3:




gdalinfo --version
GDAL 1.7.3, released 2010/11/10

original file:
gdalinfo 06S08W19.tif --debug on
Warning 1: TIFFReadDirectory:Unknown field with tag 2457 (0x999) encountered
GDAL: GDALOpen(06S08W19.tif, this=02A26878) succeeds as GTiff.
Driver: GTiff/GeoTIFF
GDAL: GDALDefaultOverviews::OverviewScan()
Files: 06S08W19.tif
       06S08W19.tfw
Size is 3314, 5508
["gdalinfo.exe has stopped working" error message here]

GDAL 1.11 output:
gdalinfo 06S08W19_gdal1_11_ouput2.tif --debug on
GDAL: GDALOpen(06S08W19_gdal1_11_ouput2.tif, this=032C5840) succeeds as GTiff.
Driver: GTiff/GeoTIFF
GDAL: GDALDefaultOverviews::OverviewScan()
Files: 06S08W19_gdal1_11_ouput2.tif
Size is 10, 10
["gdalinfo.exe has stopped working" error message here]

Here are the details from the gdalinfo.exe has stopped working message:

Problem signature:
  Problem Event Name:    APPCRASH
  Application Name:    gdalinfo.exe
  Application Version:    0.0.0.0
  Application Timestamp:    4cd807cc
  Fault Module Name:    ntdll.dll
  Fault Module Version:    6.1.7601.22436
  Fault Module Timestamp:    521eaa80
  Exception Code:    c0000005
  Exception Offset:    0002e41b
  OS Version:    6.1.7601.2.1.0.256.48
  Locale ID:    1033
  Additional Information 1:    d0cb
  Additional Information 2:    d0cbb85f3c4eb3a801a7e951e26036a7
  Additional Information 3:    9027
  Additional Information 4:    902705a348faa2357cb1e3c53c32a1b4

listgeo 06S08W19_gdal1_11_ouput2.tif
Geotiff_Information:
   Version: 1
   Key_Revision: 1.0
   Tagged_Information:
      ModelTiepointTag (2,3):
         0                0                0
         7367110          520505           0
      ModelPixelScaleTag (1,3):
         1                1                0
      End_Of_Tags.
   Keyed_Information:
      GTModelTypeGeoKey (Short,1): ModelTypeProjected
      GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
      GTCitationGeoKey (Ascii,56): "NAD_1983_2011_StatePlane_Oregon_North_FIPS_3
601_Ft_Intl"
      GeographicTypeGeoKey (Short,1): User-Defined
      GeogCitationGeoKey (Ascii,92): "GCS Name = GCS_NAD_1983_2011|Datum = NAD_1
983_2011|Ellipsoid = GRS_1980|Primem = Greenwich|"
      GeogGeodeticDatumGeoKey (Short,1): User-Defined
      GeogAngularUnitsGeoKey (Short,1): Angular_Degree
      GeogEllipsoidGeoKey (Short,1): User-Defined
      GeogSemiMajorAxisGeoKey (Double,1): 6378137
      GeogInvFlatteningGeoKey (Double,1): 298.257222101
      GeogPrimeMeridianLongGeoKey (Double,1): 0
      Unknown-3059 (Short,1): Unknown-1
      ProjectedCSTypeGeoKey (Short,1): User-Defined
      ProjectionGeoKey (Short,1): User-Defined
      ProjCoordTransGeoKey (Short,1): CT_LambertConfConic_2SP
      ProjLinearUnitsGeoKey (Short,1): Linear_Foot
      ProjStdParallel1GeoKey (Double,1): 44.3333333333333
      ProjStdParallel2GeoKey (Double,1): 46
      ProjFalseOriginLongGeoKey (Double,1): -120.5
      ProjFalseOriginLatGeoKey (Double,1): 43.6666666666667
      ProjFalseOriginEastingGeoKey (Double,1): 8202099.73753281
      ProjFalseOriginNorthingGeoKey (Double,1): 0
      End_Of_Keys.
   End_Of_Geotiff.

Projection Method: CT_LambertConfConic_2SP
   ProjFalseOriginLatGeoKey: 43.666667 ( 43d40' 0.00"N)
   ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
   ProjStdParallel1GeoKey: 44.333333 ( 44d20' 0.00"N)
   ProjStdParallel2GeoKey: 46.000000 ( 46d 0' 0.00"N)
   ProjFalseEastingGeoKey: 8202099.737533 m
   ProjFalseNorthingGeoKey: 0.000000 m
Projection Linear Units: 9002/foot (0.304800m)

Corner Coordinates:
Upper Left    ( 7367110.000,  520505.000)
Lower Left    ( 7367110.000,  520495.000)
Upper Right   ( 7367120.000,  520505.000)
Lower Right   ( 7367120.000,  520495.000)
Center        ( 7367115.000,  520500.000)
-------------- next part --------------
A non-text attachment was scrubbed...
Name: 06S08W19_gdal1_11_ouput2.tif
Type: image/tiff
Size: 1055 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140721/55ef2907/attachment.tif>

From even.rouault at mines-paris.org  Mon Jul 21 13:46:04 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 21 Jul 2014 22:46:04 +0200
Subject: [gdal-dev] GDAL 1.7.3 can't read tiff written by GDAL 1.11
In-Reply-To: <CACqBkM_dO6vJynvtrKmVm0Rod0jOTT8EABatdtz1AtDrighiTA@mail.gmail.com>
References: <CACqBkM_dO6vJynvtrKmVm0Rod0jOTT8EABatdtz1AtDrighiTA@mail.gmail.com>
Message-ID: <201407212246.04316.even.rouault@mines-paris.org>

Le lundi 21 juillet 2014 22:18:27, Eli Adam a ?crit :
>  Hi all,
> 
> I've got some recent tiff data that can't be read by GDAL 1.7.3
> ("gdalinfo.exe has stopped working").  It appears to work fine with
> GDAL 1.11.  The output from GDAL 1.11 can't be read by GDAL 1.7.3
> either.  Hmm, oddly it seems to work with GDAL 1.6.
> 
> I have an older MapServer and GDAL that I'd like to use with new data
> without updating MapServer and GDAL so my goal is find a way to use or
> alter the data so it is usable by GDAL 1.7.3.  I also want to know if
> the data is valid and complies with the the geotif specification.

Looks reasonable at first sight

> 
> This is on Windows 7 and OSGeo4W although I also had some similar
> issues on Ubuntu 10.04.  Below are GDAL 1.11 version, gdalinfo with
> debug, listgeo, and finally gdal_translate output that can't be read
> by GDAL 1.7.3 (attached).  There are messages about "GTIFF: converting
> geokey to meters to fix bug in old libgeotiff" 

Yes, tricky issue with non-meter linear unit. See ticket 
https://trac.osgeo.org/gdal/ticket/3901 to get heavily confused.

Related to that, I guess your listgeo is from libgeotiff 1.3 or older since it 
should display ProjFalseEastingGeoKey: 2500000.000000 m normally

> and "TIFFReadDirectory:
> Warning, Unknown field with tag 2457 (0x999) encountered." 

Cannot find its definition in the TIFF tag catalog, but shouldn't cause issues. 
This will be ignored

> Further
> below the GDAL1.11 information, is GDAL 1.7.3 showing that it can't be
> read and the error output.
> 
> Do 06S08W19_gdal1_11_ouput2.tif and 06S08W19.tif conform to the geotif
> specification and contain valid data? Any suggestions on how to keep
> using my older install without updating?

I managed to read your attachef file with latest state of 1.7 branch (1.7.3 
with a few additional fixes) on Linux, and cannot see anything in the log 
between this and 1.7.3 that could explain the issue. However, as more or less 
expected, the georeferencing is not read correctly (since #3901 was fixed in 
1.8) and the false easting value is multiplied by 1. / 0.3048.

You will never (or with much difficulty) manage to make it work with non-meter 
linear units in old GDAL releases. I'd encourage you warping it into a UTM 
projection for example.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From varunsaraf14 at gmail.com  Mon Jul 21 14:54:54 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Tue, 22 Jul 2014 03:24:54 +0530
Subject: [gdal-dev] GSoC 2014 Weekly Report 9 : GDAL PostGIS Raster driver
Message-ID: <CAPfr+rtjcG2zB7w7sahYU1tOADjOPtWHtnYmukx1xa=6evic1A@mail.gmail.com>

 Hi,

Below is my ninth weekly report.

*What did I do this week?*

   - Implemented the Create() method which creates/appends a table.
   - I had planned to handle the layer creation/configuration options in
   the next week. Instead, I implemented them this week and plan on doing the
   overviews next week.

*What do I plan on doing next week?*

   - Insert an empty raster in the table via Create().
   - Update the raster with band data via IRasterIO.
   - Overview building.

*Am I blocked on anything?*

   - No.

Link to weekly report :
https://github.com/varunsaraf/postgis_raster/wiki/Report-9
Link to code repository : https://github.com/varunsaraf/postgis_raster
More details at : http://trac.osgeo.org/gdal/wiki/PostGIS_raster_driver

Regards,
Varun Saraf
Lab for Spatial Informatics
IIIT Hyderabad, India
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140722/79e29977/attachment.html>

From eadam at co.lincoln.or.us  Mon Jul 21 15:02:32 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 21 Jul 2014 15:02:32 -0700
Subject: [gdal-dev] GDAL 1.7.3 can't read tiff written by GDAL 1.11
In-Reply-To: <201407212246.04316.even.rouault@mines-paris.org>
References: <CACqBkM_dO6vJynvtrKmVm0Rod0jOTT8EABatdtz1AtDrighiTA@mail.gmail.com>
	<201407212246.04316.even.rouault@mines-paris.org>
Message-ID: <CACqBkM_YUx2By=+JY=x9rTPGrHz4Cif82tgcNAif5QqBR3i3ag@mail.gmail.com>

On Mon, Jul 21, 2014 at 1:46 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le lundi 21 juillet 2014 22:18:27, Eli Adam a ?crit :
>>  Hi all,
>>
>> I've got some recent tiff data that can't be read by GDAL 1.7.3
>> ("gdalinfo.exe has stopped working").  It appears to work fine with
>> GDAL 1.11.  The output from GDAL 1.11 can't be read by GDAL 1.7.3
>> either.  Hmm, oddly it seems to work with GDAL 1.6.
>>
>> I have an older MapServer and GDAL that I'd like to use with new data
>> without updating MapServer and GDAL so my goal is find a way to use or
>> alter the data so it is usable by GDAL 1.7.3.  I also want to know if
>> the data is valid and complies with the the geotif specification.
>
> Looks reasonable at first sight
>
>>
>> This is on Windows 7 and OSGeo4W although I also had some similar
>> issues on Ubuntu 10.04.  Below are GDAL 1.11 version, gdalinfo with
>> debug, listgeo, and finally gdal_translate output that can't be read
>> by GDAL 1.7.3 (attached).  There are messages about "GTIFF: converting
>> geokey to meters to fix bug in old libgeotiff"
>
> Yes, tricky issue with non-meter linear unit. See ticket
> https://trac.osgeo.org/gdal/ticket/3901 to get heavily confused.

I read that and am somewhat confused :) but have a basic understanding
of it as well now.  I tried gdal_translate -projwin 7367110 520505
7367120 520495 06S08W19.tif 06S08W19_gdal1_11_ouput3.tif --config
GTIFF_LINEAR_UNITS BROKEN to try and make a broken tiff to see if it
would work.  GDAL 1.7.3 can't read the output of that either.

>
> Related to that, I guess your listgeo is from libgeotiff 1.3 or older since it
> should display ProjFalseEastingGeoKey: 2500000.000000 m normally

Using the OSGeo4W installer libgeotiff appears to be 1.3.0-3 (is there
a command line option to determine libgeotiff or libtiff version?).

I just looked these up on EPSG and now my basic understanding of
ticket 3901 is faltering.
http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:crs:EPSG::6558&entity=urn:ogc:def:crs:EPSG::6559&reportDetail=long&style=urn:uuid:report-style:default-with-urn&style_name=OGP%20Default%20With%20Urn&title=Oregon_foot_meter

Is it incorrect to report ProjFalseOriginEastingGeoKey (Double,1):
8202099.73753281 with ProjLinearUnitsGeoKey (Short,1): Linear_Foot?

>
>> and "TIFFReadDirectory:
>> Warning, Unknown field with tag 2457 (0x999) encountered."
>
> Cannot find its definition in the TIFF tag catalog, but shouldn't cause issues.
> This will be ignored
>
>> Further
>> below the GDAL1.11 information, is GDAL 1.7.3 showing that it can't be
>> read and the error output.
>>
>> Do 06S08W19_gdal1_11_ouput2.tif and 06S08W19.tif conform to the geotif
>> specification and contain valid data? Any suggestions on how to keep
>> using my older install without updating?
>
> I managed to read your attachef file with latest state of 1.7 branch (1.7.3
> with a few additional fixes) on Linux, and cannot see anything in the log
> between this and 1.7.3 that could explain the issue. However, as more or less
> expected, the georeferencing is not read correctly (since #3901 was fixed in
> 1.8) and the false easting value is multiplied by 1. / 0.3048.

Would different versions of libgeotiff explain it working (with
incorrect georeferencing?) for you and erroring out for me?

>
> You will never (or with much difficulty) manage to make it work with non-meter
> linear units in old GDAL releases. I'd encourage you warping it into a UTM
> projection for example.

Thanks for the suggestion.  I'll pursue this and it sounds like this
will work for me.

Best regards, Eli

>
> Best regards,
>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Mon Jul 21 17:46:18 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 22 Jul 2014 02:46:18 +0200
Subject: [gdal-dev] GDAL 1.7.3 can't read tiff written by GDAL 1.11
In-Reply-To: <CACqBkM_YUx2By=+JY=x9rTPGrHz4Cif82tgcNAif5QqBR3i3ag@mail.gmail.com>
References: <CACqBkM_dO6vJynvtrKmVm0Rod0jOTT8EABatdtz1AtDrighiTA@mail.gmail.com>
	<201407212246.04316.even.rouault@mines-paris.org>
	<CACqBkM_YUx2By=+JY=x9rTPGrHz4Cif82tgcNAif5QqBR3i3ag@mail.gmail.com>
Message-ID: <201407220246.19044.even.rouault@mines-paris.org>

Le mardi 22 juillet 2014 00:02:32, Eli Adam a ?crit :
> On Mon, Jul 21, 2014 at 1:46 PM, Even Rouault
> 
> <even.rouault at mines-paris.org> wrote:
> > Le lundi 21 juillet 2014 22:18:27, Eli Adam a ?crit :
> >>  Hi all,
> >> 
> >> I've got some recent tiff data that can't be read by GDAL 1.7.3
> >> ("gdalinfo.exe has stopped working").  It appears to work fine with
> >> GDAL 1.11.  The output from GDAL 1.11 can't be read by GDAL 1.7.3
> >> either.  Hmm, oddly it seems to work with GDAL 1.6.
> >> 
> >> I have an older MapServer and GDAL that I'd like to use with new data
> >> without updating MapServer and GDAL so my goal is find a way to use or
> >> alter the data so it is usable by GDAL 1.7.3.  I also want to know if
> >> the data is valid and complies with the the geotif specification.
> > 
> > Looks reasonable at first sight
> > 
> >> This is on Windows 7 and OSGeo4W although I also had some similar
> >> issues on Ubuntu 10.04.  Below are GDAL 1.11 version, gdalinfo with
> >> debug, listgeo, and finally gdal_translate output that can't be read
> >> by GDAL 1.7.3 (attached).  There are messages about "GTIFF: converting
> >> geokey to meters to fix bug in old libgeotiff"
> > 
> > Yes, tricky issue with non-meter linear unit. See ticket
> > https://trac.osgeo.org/gdal/ticket/3901 to get heavily confused.
> 
> I read that and am somewhat confused :) but have a basic understanding
> of it as well now.  I tried gdal_translate -projwin 7367110 520505
> 7367120 520495 06S08W19.tif 06S08W19_gdal1_11_ouput3.tif --config
> GTIFF_LINEAR_UNITS BROKEN to try and make a broken tiff to see if it
> would work.  GDAL 1.7.3 can't read the output of that either.

Lol, fortunately GTIFF_LINEAR_UNITS BROKEN will not produce a broken geotiff. 
It is meant at trying to improve things when you notice that there's a 
conversion between meters and the advertized linear units that hasn't been 
done (or has been done twice I don't remember the details).

> 
> > Related to that, I guess your listgeo is from libgeotiff 1.3 or older
> > since it should display ProjFalseEastingGeoKey: 2500000.000000 m
> > normally
> 
> Using the OSGeo4W installer libgeotiff appears to be 1.3.0-3 (is there
> a command line option to determine libgeotiff or libtiff version?).
> 
> I just looked these up on EPSG and now my basic understanding of
> ticket 3901 is faltering.
> http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:c
> rs:EPSG::6558&entity=urn:ogc:def:crs:EPSG::6559&reportDetail=long&style=urn
> :uuid:report-style:default-with-urn&style_name=OGP%20Default%20With%20Urn&t
> itle=Oregon_foot_meter
> 
> Is it incorrect to report ProjFalseOriginEastingGeoKey (Double,1):
> 8202099.73753281 with ProjLinearUnitsGeoKey (Short,1): Linear_Foot?

It is correct, but the listgeo output also lists afterwards something like :

Projection Method: CT_LambertConfConic_2SP
   ProjFalseOriginLatGeoKey: 43.666667 ( 43d40' 0.00"N)
   ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
   ProjStdParallel1GeoKey: 44.333333 ( 44d20' 0.00"N)
   ProjStdParallel2GeoKey: 46.000000 ( 46d 0' 0.00"N)
   ProjFalseEastingGeoKey: 2500000.000000 m
   ProjFalseNorthingGeoKey: 0.000000 m
Projection Linear Units: 9002/foot (0.304800m)

where ProjFalseEastingGeoKey is normalized in meters.

> 
> >> and "TIFFReadDirectory:
> >> Warning, Unknown field with tag 2457 (0x999) encountered."
> > 
> > Cannot find its definition in the TIFF tag catalog, but shouldn't cause
> > issues. This will be ignored
> > 
> >> Further
> >> below the GDAL1.11 information, is GDAL 1.7.3 showing that it can't be
> >> read and the error output.
> >> 
> >> Do 06S08W19_gdal1_11_ouput2.tif and 06S08W19.tif conform to the geotif
> >> specification and contain valid data? Any suggestions on how to keep
> >> using my older install without updating?
> > 
> > I managed to read your attachef file with latest state of 1.7 branch
> > (1.7.3 with a few additional fixes) on Linux, and cannot see anything in
> > the log between this and 1.7.3 that could explain the issue. However, as
> > more or less expected, the georeferencing is not read correctly (since
> > #3901 was fixed in 1.8) and the false easting value is multiplied by 1.
> > / 0.3048.
> 
> Would different versions of libgeotiff explain it working (with
> incorrect georeferencing?) for you and erroring out for me?

No idea why it crashes on osgeo4w. Well, I somehow remember that there have 
been ABI changes in libgeotiff between versions, but if that was the case of a 
mismatch between actual libgeotiff ABI and the one expected by the GDAL build, 
then it would likely crash on most geotiff files, and not that one only. Does it 
crash only on that geotiff ? Anyway that's an old version, and you cannot undo 
the past, just try to make the future better ;-)

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From eadam at co.lincoln.or.us  Mon Jul 21 18:18:52 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Mon, 21 Jul 2014 18:18:52 -0700
Subject: [gdal-dev] GDAL 1.7.3 can't read tiff written by GDAL 1.11
In-Reply-To: <201407220246.19044.even.rouault@mines-paris.org>
References: <CACqBkM_dO6vJynvtrKmVm0Rod0jOTT8EABatdtz1AtDrighiTA@mail.gmail.com>
	<201407212246.04316.even.rouault@mines-paris.org>
	<CACqBkM_YUx2By=+JY=x9rTPGrHz4Cif82tgcNAif5QqBR3i3ag@mail.gmail.com>
	<201407220246.19044.even.rouault@mines-paris.org>
Message-ID: <CACqBkM-tjvkpxogAKGXufDXbSR9m+Oi-TQs6FRrgrBLpWJ3QEg@mail.gmail.com>

>> I just looked these up on EPSG and now my basic understanding of
>> ticket 3901 is faltering.
>> http://www.epsg-registry.org/report.htm?type=selection&entity=urn:ogc:def:c
>> rs:EPSG::6558&entity=urn:ogc:def:crs:EPSG::6559&reportDetail=long&style=urn
>> :uuid:report-style:default-with-urn&style_name=OGP%20Default%20With%20Urn&t
>> itle=Oregon_foot_meter
>>
>> Is it incorrect to report ProjFalseOriginEastingGeoKey (Double,1):
>> 8202099.73753281 with ProjLinearUnitsGeoKey (Short,1): Linear_Foot?
>
> It is correct, but the listgeo output also lists afterwards something like :
>
> Projection Method: CT_LambertConfConic_2SP
>    ProjFalseOriginLatGeoKey: 43.666667 ( 43d40' 0.00"N)
>    ProjFalseOriginLongGeoKey: -120.500000 (120d30' 0.00"W)
>    ProjStdParallel1GeoKey: 44.333333 ( 44d20' 0.00"N)
>    ProjStdParallel2GeoKey: 46.000000 ( 46d 0' 0.00"N)
>    ProjFalseEastingGeoKey: 2500000.000000 m
>    ProjFalseNorthingGeoKey: 0.000000 m
> Projection Linear Units: 9002/foot (0.304800m)
>
> where ProjFalseEastingGeoKey is normalized in meters.

I missed this on initial reading.  Thanks for pointing it out and
letting me learn some more.

>
>>

>> > I managed to read your attachef file with latest state of 1.7 branch
>> > (1.7.3 with a few additional fixes) on Linux, and cannot see anything in
>> > the log between this and 1.7.3 that could explain the issue. However, as
>> > more or less expected, the georeferencing is not read correctly (since
>> > #3901 was fixed in 1.8) and the false easting value is multiplied by 1.
>> > / 0.3048.
>>
>> Would different versions of libgeotiff explain it working (with
>> incorrect georeferencing?) for you and erroring out for me?
>
> No idea why it crashes on osgeo4w. Well, I somehow remember that there have
> been ABI changes in libgeotiff between versions, but if that was the case of a
> mismatch between actual libgeotiff ABI and the one expected by the GDAL build,
> then it would likely crash on most geotiff files, and not that one only. Does it
> crash only on that geotiff ? Anyway that's an old version, and you cannot undo
> the past, just try to make the future better ;-)

GDAL 1.7.3 in OSGeo4W only crashes on this collection of geotiffs and
works fine on other files.  Thanks for spending time on what is
probably perceived by you as an ancient version and probably of little
interest to you.  You are always making the future better; thanks for
all your work in that regard.  Thanks also for going out of your way
to help all users at all levels.  I've found the GDAL-dev list to be
kind and welcoming to all who write.

Sincerely, Eli

>
> Even
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Tue Jul 22 02:42:33 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 22 Jul 2014 11:42:33 +0200
Subject: [gdal-dev] [PSC] Integration of GSoC code : RFC or not ?
Message-ID: <1406022153.53ce320998d9f@imp.free.fr>



Hi PSC,

Mikhail Gusev, one of our 2 GSoC student this year is about to submit a pull
request for the initial part of his - good - work on Geography Network Model.
See https://github.com/MikhanGusev/gdal/compare/OSGeo:trunk...trunk

This add a new set of API to the code base. Looking at our management rules
http://trac.osgeo.org/gdal/wiki/rfc1_pmc ("When is Vote Required?: [...] Adding
substantial amounts of new code") and
http://trac.osgeo.org/gdal/wiki/rfc3_commiters ("larger changes will require a
RFC approved by the PSC"), it seems it would imply writing a RFC. We don't
generally do RFC for new drivers (that can add substantial amount of code), but
technically, this is not really a new driver either. Any opinion on how to
proceed on that matter ?

Best regards,

Even



From even.rouault at mines-paris.org  Tue Jul 22 02:43:44 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 22 Jul 2014 11:43:44 +0200
Subject: [gdal-dev] (no subject)
Message-ID: <1406022224.53ce3250e53fc@imp.free.fr>

Hi PSC,

Mikhail Gusev, one of our 2 GSoC student this year is about to submit a pull
request for the initial part of his - good - work on Geography Network Model.
See https://github.com/MikhanGusev/gdal/compare/OSGeo:trunk...trunk

This add a new set of API to the code base. Looking at our management rules
http://trac.osgeo.org/gdal/wiki/rfc1_pmc ("When is Vote Required?: [...] Adding
substantial amounts of new code") and
http://trac.osgeo.org/gdal/wiki/rfc3_commiters ("larger changes will require a
RFC approved by the PSC"), it seems it would imply writing a RFC. We don't
generally do RFC for new drivers (that can add substantial amount of code), but
technically, this is not really a new driver either. Any opinion on how to
proceed on that matter ?

Best regards,

Even


From wolf+grass at bergenheim.net  Tue Jul 22 03:17:05 2014
From: wolf+grass at bergenheim.net (Wolf Bergenheim)
Date: Tue, 22 Jul 2014 12:17:05 +0200
Subject: [gdal-dev] [PSC] Integration of GSoC code : RFC or not ?
In-Reply-To: <1406022153.53ce320998d9f@imp.free.fr>
References: <1406022153.53ce320998d9f@imp.free.fr>
Message-ID: <CAJhTkW5qYLh1syNoBx64nrA94+50fKHVX7wJgLiwKsi-Q77uLw@mail.gmail.com>

I'm not PSC but, since I have some experience in GSoC I thought I should
speak up.

The fact that GDAL accepted Mikhail as a GSoC student sort of covers the
RFC part. Because there he proposed his project and the PSC should have
voted for or against this project if not wanting it in. In any case the
Project proposal can be copy-pasted into an RFC in case you do want to have
an RFC for the record.

Also it's sort of implied in the GSoC program that the aim is to add code
to the trunk of a project, unless stated otherwise. And to me this seems to
have been the goal of this project too.

So that being said, as long as the code meets the expected standards and it
should as long as the mentor is doing his job, I don't see any obstacles,
RFC is already technically written and so has the code, and the assigned
mentor should maybe give a vote of confidence, and that should sort of be
it. Personally I don't see a reason to vote if the Mentor is for merging
Mikhail's code.

Just my 2c :)

--Wolf


On Tue, Jul 22, 2014 at 11:42 AM, Even Rouault <even.rouault at mines-paris.org
> wrote:

>
>
> Hi PSC,
>
> Mikhail Gusev, one of our 2 GSoC student this year is about to submit a
> pull
> request for the initial part of his - good - work on Geography Network
> Model.
> See https://github.com/MikhanGusev/gdal/compare/OSGeo:trunk...trunk
>
> This add a new set of API to the code base. Looking at our management rules
> http://trac.osgeo.org/gdal/wiki/rfc1_pmc ("When is Vote Required?: [...]
> Adding
> substantial amounts of new code") and
> http://trac.osgeo.org/gdal/wiki/rfc3_commiters ("larger changes will
> require a
> RFC approved by the PSC"), it seems it would imply writing a RFC. We don't
> generally do RFC for new drivers (that can add substantial amount of
> code), but
> technically, this is not really a new driver either. Any opinion on how to
> proceed on that matter ?
>
> Best regards,
>
> Even
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140722/f8996d35/attachment.html>

From Gregory.Anderson at rgi-corp.com  Tue Jul 22 13:10:56 2014
From: Gregory.Anderson at rgi-corp.com (Anderson, Gregory)
Date: Tue, 22 Jul 2014 20:10:56 +0000
Subject: [gdal-dev] OpenCL Performance
Message-ID: <1406059856556.62547@rgi-corp.com>

Hello,


I recently installed GDAL with OpenCL and my tests have shown that running gdalwarp with '-wo "USE_OPENCL=FALSE"' gives better performance then running it without. I'm using Ubuntu 14.04 64-bit on an Intel i7-2720QM with an AMD Radeon HD 6400M series graphics card. My OpenCL support is the AMD APP SDK and the AMD Catalyst driver, and I've confirmed that both the CPU and the GPU are seen as compute devices using clinfo. I've tried using both the CPU and the GPU as the OpenCL device and gotten the same results in both cases. I've also tried on both a hard disk and an SSD with no luck. My test data is a large (3.4GB) GeoTIFF file, and the command is 'time gdalwarp -t_srs EPSG:3395 -r cubic gnc-world.tif gnc-world3395.tif'. Does anyone have any ideas why the performance might be so bad?


Thank you,

Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140722/171f1fc8/attachment.html>

From aperi2007 at gmail.com  Wed Jul 23 04:51:26 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Wed, 23 Jul 2014 13:51:26 +0200
Subject: [gdal-dev] A tools to change the ascii code upper 128 in shapefile
Message-ID: <CABqTJk-cv4uyCcrSNZVvB7CtQseQCZZXcWB9h5K4MnUkDXcriw@mail.gmail.com>

Hi,
Quite often the shapefile that are used to publish data on mapserver
are filled with some characters upper 128 ascii code that will do some
troble in the GetFeatureInfo response (in html).

So I'm evaluating to start towrite some procedure to  scan a shapefile
(or a set of shapefiles) and change programmatically every code upper
128 ascii code with a lower 128 ascii-code.

The strategy is quite simply.
in text field: check is there is some character rather than
alphabetica allowed (a,b,c,d.....,0,1,2,3,4,5,6,7,8,9) or some
character like:
.,;:-@# and so on .If there is something otherwise this
change it with a space !

I like to use the gdal-api to open and scan the shapefile, but I'm not
sure is the better environment
due too specifically question (detect over 128 ascii code).

My question is when there is a character upper 128 ascii code,
gdal-api return it correctly or wrong himself ?

Any though ?

Thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From jukka.rahkonen at mmmtike.fi  Wed Jul 23 06:09:59 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed, 23 Jul 2014 13:09:59 +0000 (UTC)
Subject: [gdal-dev] [PSC] Integration of GSoC code : RFC or not ?
References: <1406022153.53ce320998d9f@imp.free.fr>
	<CAJhTkW5qYLh1syNoBx64nrA94+50fKHVX7wJgLiwKsi-Q77uLw@mail.gmail.com>
Message-ID: <loom.20140723T144020-725@post.gmane.org>

Wolf Bergenheim <wolf+grass <at> bergenheim.net> writes:

> 
> 
> I'm not PSC but, since I have some experience in GSoC I thought I should
speak up.
> The fact that GDAL accepted Mikhail as a GSoC student sort of covers the
RFC part. Because there he proposed his project and the PSC should have
voted for or against this project if not wanting it in. In any case the
Project proposal can be copy-pasted into an RFC in case you do want to have
an RFC for the record.
> 
> 
> Also it's sort of implied in the GSoC program that the aim is to add code
to the trunk of a project, unless stated otherwise. And to me this seems to
have been the goal of this project too.
> So that being said, as long as the code meets the expected standards and
it should as long as the mentor is doing his job, I don't see any obstacles,
RFC is already technically written and so has the code, and the assigned
mentor should maybe give a vote of confidence, and that should sort of be
it. Personally I don't see a reason to vote if the Mentor is for merging
Mikhail's code.

I think that with larger projects like GDAL or Geoserver (which I follow as
a member of PSC) it is not reasonable to think that the code from GSoC
projects could generally go directly into trunk. Students are supposed to
program something useful in a relatively short time and taking care of all
the extra stuff that is needed before code can be accepted into trunk can be
out of the scope of GSoC and students may not be able to do it even with the
help from their mentors. The code in trunk must not break anything and  it
should compile not only now but also in the future which means that someone
must take the responsibility of maintaining the code. Geoserver is a bit
different project with lots of pluggable modules but the Community module
policy is worth reading
http://docs.geoserver.org/stable/en/developer/policies/community-modules.html.

I would say that editing the GSoC project plan into RFC and making the PSC
to vote if the code meets the standards by quality, license and other IP
stuff, and future maintainability would be a good idea and re-usable in the
future. 

-Jukka Rahkonen-







From bishop.dev at gmail.com  Wed Jul 23 06:49:22 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Wed, 23 Jul 2014 17:49:22 +0400
Subject: [gdal-dev] [PSC] Integration of GSoC code : RFC or not ?
In-Reply-To: <loom.20140723T144020-725@post.gmane.org>
References: <1406022153.53ce320998d9f@imp.free.fr>	<CAJhTkW5qYLh1syNoBx64nrA94+50fKHVX7wJgLiwKsi-Q77uLw@mail.gmail.com>
	<loom.20140723T144020-725@post.gmane.org>
Message-ID: <53CFBD62.7090905@gmail.com>

Hi,

As a mentor of Mikhail project this is my responsibility to maintain the 
code after the GSoC and also we have in our GSoC plan all necessary 
steps to integrate all the results to GDAL. The GNM has not make great 
changes in current GDAL source tree: new folder and several new 
applications in apps folder. So I don't see any problems with 
integration and maintaining this.

Best regards,
     Dmitry

23.07.2014 17:09, Jukka Rahkonen ?????:
> Wolf Bergenheim <wolf+grass <at> bergenheim.net> writes:
>
>>
>> I'm not PSC but, since I have some experience in GSoC I thought I should
> speak up.
>> The fact that GDAL accepted Mikhail as a GSoC student sort of covers the
> RFC part. Because there he proposed his project and the PSC should have
> voted for or against this project if not wanting it in. In any case the
> Project proposal can be copy-pasted into an RFC in case you do want to have
> an RFC for the record.
>>
>> Also it's sort of implied in the GSoC program that the aim is to add code
> to the trunk of a project, unless stated otherwise. And to me this seems to
> have been the goal of this project too.
>> So that being said, as long as the code meets the expected standards and
> it should as long as the mentor is doing his job, I don't see any obstacles,
> RFC is already technically written and so has the code, and the assigned
> mentor should maybe give a vote of confidence, and that should sort of be
> it. Personally I don't see a reason to vote if the Mentor is for merging
> Mikhail's code.
>
> I think that with larger projects like GDAL or Geoserver (which I follow as
> a member of PSC) it is not reasonable to think that the code from GSoC
> projects could generally go directly into trunk. Students are supposed to
> program something useful in a relatively short time and taking care of all
> the extra stuff that is needed before code can be accepted into trunk can be
> out of the scope of GSoC and students may not be able to do it even with the
> help from their mentors. The code in trunk must not break anything and  it
> should compile not only now but also in the future which means that someone
> must take the responsibility of maintaining the code. Geoserver is a bit
> different project with lots of pluggable modules but the Community module
> policy is worth reading
> http://docs.geoserver.org/stable/en/developer/policies/community-modules.html.
>
> I would say that editing the GSoC project plan into RFC and making the PSC
> to vote if the code meets the standards by quality, license and other IP
> stuff, and future maintainability would be a good idea and re-usable in the
> future.
>
> -Jukka Rahkonen-
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From even.rouault at mines-paris.org  Wed Jul 23 13:16:38 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Jul 2014 22:16:38 +0200
Subject: [gdal-dev] A tools to change the ascii code upper 128 in
	shapefile
In-Reply-To: <CABqTJk-cv4uyCcrSNZVvB7CtQseQCZZXcWB9h5K4MnUkDXcriw@mail.gmail.com>
References: <CABqTJk-cv4uyCcrSNZVvB7CtQseQCZZXcWB9h5K4MnUkDXcriw@mail.gmail.com>
Message-ID: <201407232216.38454.even.rouault@mines-paris.org>

Andrea,

I assume you're asking that because of encoding issues, right ? Hopefully 
there are better alternatives than what you are trying to do.

1) The mapserver shapefile provider doesn't take into account the character 
encoding that is written in the .dbf header or in the .cpg file. So it takes 
the bytes as they appear, and output them directly (and in 6.4, the header of 
the GetFeature output was ISO-8859-1 / LATIN1)
Now in MapServer master, you can indicate the encoding of the data at the 
layer level ( http://mapserver.org/fr/development/rfc/ms-rfc-103.html ) and 
MapServer will recode that in UTF-8. And all MapServer output headers are now 
UTF-8.

2) As far as GDAL is concerned, the OGR shapefile driver will try to use the 
character encoding in the .dbf header / .cpg to automatically recode to UTF-8. 
But that might fail since sometimes the .dbf header indicates "system 
encoding", and OGR then takes the assumption that it is LATIN1.
So if the guess of OGR is correct, when combined with MapServer master (i.e. 
use CONNECTION OGR), you wouldn't neet at all to indicate the layer encoding 
and everything should be output correctly in UTF-8.

But... if you still want to do your replacing of non-ASCII characters, you can 
do it with OGR (and some code/script). As described in 
http://gdal.org/drv_shapefile.html, you would have to set the SHAPE_ENCODING 
environment variable/configuration option to "" (empty string), and that will 
disable any character recoding. So you will get the bytes as they are in the 
.dbf file.

Best regards,

Even

> Hi,
> Quite often the shapefile that are used to publish data on mapserver
> are filled with some characters upper 128 ascii code that will do some
> troble in the GetFeatureInfo response (in html).
> 
> So I'm evaluating to start towrite some procedure to  scan a shapefile
> (or a set of shapefiles) and change programmatically every code upper
> 128 ascii code with a lower 128 ascii-code.
> 
> The strategy is quite simply.
> in text field: check is there is some character rather than
> alphabetica allowed (a,b,c,d.....,0,1,2,3,4,5,6,7,8,9) or some
> character like:
> .,;:-@# and so on .If there is something otherwise this
> change it with a space !
> 
> I like to use the gdal-api to open and scan the shapefile, but I'm not
> sure is the better environment
> due too specifically question (detect over 128 ascii code).
> 
> My question is when there is a character upper 128 ascii code,
> gdal-api return it correctly or wrong himself ?
> 
> Any though ?
> 
> Thx,

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From even.rouault at mines-paris.org  Wed Jul 23 13:27:19 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 23 Jul 2014 22:27:19 +0200
Subject: [gdal-dev] OpenCL Performance
In-Reply-To: <1406059856556.62547@rgi-corp.com>
References: <1406059856556.62547@rgi-corp.com>
Message-ID: <201407232227.20014.even.rouault@mines-paris.org>

Le mardi 22 juillet 2014 22:10:56, Anderson, Gregory a ?crit :
> Hello,
> 
> 
> I recently installed GDAL with OpenCL and my tests have shown that running
> gdalwarp with '-wo "USE_OPENCL=FALSE"' gives better performance then
> running it without. I'm using Ubuntu 14.04 64-bit on an Intel i7-2720QM
> with an AMD Radeon HD 6400M series graphics card. My OpenCL support is the
> AMD APP SDK and the AMD Catalyst driver, and I've confirmed that both the
> CPU and the GPU are seen as compute devices using clinfo. I've tried using
> both the CPU and the GPU as the OpenCL device and gotten the same results
> in both cases. I've also tried on both a hard disk and an SSD with no
> luck. My test data is a large (3.4GB) GeoTIFF file, and the command is
> 'time gdalwarp -t_srs EPSG:3395 -r cubic gnc-world.tif gnc-world3395.tif'.
> Does anyone have any ideas why the performance might be so bad?

Gregory,

I had tried a long time ago with a ATI Radeon HD 5450 and I had issues with 
the AMD OpenCL driver (the GUI became almost totally unresponsible when OpenCL 
was used). I somehow remember that it might be beneficial when using lanczos 
which was really slow on the CPU (but I've pushed improvements in recent 
versions to speed it up). Perhaps the benefit of faster computation on the GPU 
is lost by the time to move the data between the main RAM and the GPU RAM. Or 
perhaps that in your case most time is spent on I/O.
What is strange however is that you get the same timing when using CPU or GPU 
as OpenCL device.

Not related with OpenCL, but in GDAL 1.11, you can also try the NUM_THREADS 
warping option to speed warping :
http://lists.osgeo.org/pipermail/gdal-dev/2012-June/033084.html

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From jwill222 at hotmail.com  Wed Jul 23 14:08:15 2014
From: jwill222 at hotmail.com (Justin Williams)
Date: Wed, 23 Jul 2014 16:08:15 -0500
Subject: [gdal-dev] Adding Vertex To Linestring in Existing shapefile(Python)
Message-ID: <BLU175-W1468CB1BB2509296E4C33E89FE0@phx.gbl>

Hello All. I'm trying to add a vertex to a linestring inside of a shapefile and save the changes that I've made. So if I have a line that has 2 vertices. When I open the shapefile up again(in Global Mapper, QGIS,etc.) I have 3 vertices. How is this accomplished in gdal/ogr?
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140723/ab620c81/attachment.html>

From even.rouault at mines-paris.org  Wed Jul 23 15:16:23 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Jul 2014 00:16:23 +0200
Subject: [gdal-dev] [PSC] Integration of GSoC code : RFC or not ?
In-Reply-To: <53CFBD62.7090905@gmail.com>
References: <1406022153.53ce320998d9f@imp.free.fr>
	<loom.20140723T144020-725@post.gmane.org>
	<53CFBD62.7090905@gmail.com>
Message-ID: <201407240016.25812.even.rouault@mines-paris.org>

Le mercredi 23 juillet 2014 15:49:22, Dmitriy Baryshnikov a ?crit :
> Hi,
> 
> As a mentor of Mikhail project this is my responsibility to maintain the
> code after the GSoC and also we have in our GSoC plan all necessary
> steps to integrate all the results to GDAL. The GNM has not make great
> changes in current GDAL source tree: new folder and several new
> applications in apps folder. So I don't see any problems with
> integration and maintaining this.

Hi,

From a discussion with FrankW, we think that it would be appropriate for 
Mikhail to still write a RFC. I think Mikhail must already have good material 
to write it from his blog posts, so hopefully that will not require a too much 
effort, and will give the PSC and the community a good picture of the new 
functionnality, and that will also be able to serve for users as a good 
reference.

Answering below to a few points.

Even

> 
> Best regards,
>      Dmitry
> 
> 23.07.2014 17:09, Jukka Rahkonen ?????:
> > Wolf Bergenheim <wolf+grass <at> bergenheim.net> writes:
> >> I'm not PSC but, since I have some experience in GSoC I thought I should
> > 
> > speak up.
> > 
> >> The fact that GDAL accepted Mikhail as a GSoC student sort of covers the
> > 
> > RFC part.

GSOC proposals don't necessarily go into technical details on how the code is 
organized, which is one of the purposes of a RFC.

> > Because there he proposed his project and the PSC should have
> > voted for or against this project if not wanting it in.

This might be a process issue, but the PSC has not voted for or against any 
project proposal. Only proposed mentors and OSGeo GSOC administrators do.

> > In any case the
> > Project proposal can be copy-pasted into an RFC in case you do want to
> > have an RFC for the record.
> > 
> >> Also it's sort of implied in the GSoC program that the aim is to add
> >> code

Indeed, but the activity of coding also implies designing, documenting, 
testing and following the general process of the project.

> > 
> > to the trunk of a project, unless stated otherwise. And to me this seems
> > to have been the goal of this project too.
> > 
> >> So that being said, as long as the code meets the expected standards and
> > 
> > it should as long as the mentor is doing his job, I don't see any
> > obstacles, RFC is already technically written and so has the code, and
> > the assigned mentor should maybe give a vote of confidence, and that
> > should sort of be it. Personally I don't see a reason to vote if the
> > Mentor is for merging Mikhail's code.
> > 
> > I think that with larger projects like GDAL or Geoserver (which I follow
> > as a member of PSC) it is not reasonable to think that the code from
> > GSoC projects could generally go directly into trunk. Students are
> > supposed to program something useful in a relatively short time and
> > taking care of all the extra stuff that is needed before code can be
> > accepted into trunk can be out of the scope of GSoC and students may not
> > be able to do it even with the help from their mentors. The code in
> > trunk must not break anything and  it should compile not only now but
> > also in the future which means that someone must take the responsibility
> > of maintaining the code. Geoserver is a bit different project with lots
> > of pluggable modules but the Community module policy is worth reading
> > http://docs.geoserver.org/stable/en/developer/policies/community-modules.
> > html.
> > 
> > I would say that editing the GSoC project plan into RFC and making the
> > PSC to vote if the code meets the standards by quality, license and
> > other IP stuff, and future maintainability would be a good idea and
> > re-usable in the future.
> > 
> > -Jukka Rahkonen-
> > 
> > 
> > 
> > 
> > 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From rcdemuth at indiana.edu  Wed Jul 23 18:26:11 2014
From: rcdemuth at indiana.edu (rkologist)
Date: Wed, 23 Jul 2014 18:26:11 -0700 (PDT)
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <1376345357231-5072151.post@n6.nabble.com>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<1376345357231-5072151.post@n6.nabble.com>
Message-ID: <1406165171833-5152932.post@n6.nabble.com>

Can someone help me figure out where to insert the code to also have this
crop to the neat line?  I need to tile several maps together, and it would
really help.

Thanks



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-GeoPDF-translation-tp3742508p5152932.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From eadam at co.lincoln.or.us  Wed Jul 23 18:37:11 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Wed, 23 Jul 2014 18:37:11 -0700
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <1406165171833-5152932.post@n6.nabble.com>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<1376345357231-5072151.post@n6.nabble.com>
	<1406165171833-5152932.post@n6.nabble.com>
Message-ID: <CACqBkM_YS4i3fe+8z8tT_L3Pj_OGZ4b-syTvC3z+yegUsQ6i3Q@mail.gmail.com>

Hi rkologist,

The driver page [0] and a wiki page [1] indicate that you can crop to the
NEATLINE.

Jim, if you are still following this thread, you can edit the wiki page
with what you found works well for what you were doing too.

GDAL has really made the USGS new generation topos more accessible.

[0] http://www.gdal.org/frmt_pdf.html
[1] http://trac.osgeo.org/gdal/wiki/USGS_PDF_Topo

Best regards, Eli



On Wed, Jul 23, 2014 at 6:26 PM, rkologist <rcdemuth at indiana.edu> wrote:

> Can someone help me figure out where to insert the code to also have this
> crop to the neat line?  I need to tile several maps together, and it would
> really help.
>
> Thanks
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/gdal-dev-GeoPDF-translation-tp3742508p5152932.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140723/a7a1792e/attachment.html>

From nhv at cape.com  Wed Jul 23 18:39:55 2014
From: nhv at cape.com (Norman Vine)
Date: Wed, 23 Jul 2014 21:39:55 -0400
Subject: [gdal-dev] GeoPDF translation
In-Reply-To: <1406165171833-5152932.post@n6.nabble.com>
References: <4EFF8BB964547748A07CA32961810C041BD7D69D@SOM-TEAQASMAIL1.som.w2k.state.me.us>
	<1376345357231-5072151.post@n6.nabble.com>
	<1406165171833-5152932.post@n6.nabble.com>
Message-ID: <B7DA4839-4219-4AB5-B7EC-0C5058D5C527@cape.com>

http://trac.osgeo.org/gdal/wiki/USGS_PDF_Topo

On Jul 23, 2014, at 9:26 PM, rkologist <rcdemuth at indiana.edu> wrote:

> Can someone help me figure out where to insert the code to also have this
> crop to the neat line?  I need to tile several maps together, and it would
> really help.
> 
> Thanks
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-GeoPDF-translation-tp3742508p5152932.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From aperi2007 at gmail.com  Thu Jul 24 00:04:46 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 24 Jul 2014 09:04:46 +0200
Subject: [gdal-dev] A tools to change the ascii code upper 128 in
	shapefile
In-Reply-To: <201407232216.38454.even.rouault@mines-paris.org>
References: <CABqTJk-cv4uyCcrSNZVvB7CtQseQCZZXcWB9h5K4MnUkDXcriw@mail.gmail.com>
	<201407232216.38454.even.rouault@mines-paris.org>
Message-ID: <CABqTJk-vBqXDmoewVNkNqSqVd=4DzRPuSsF9D5YP5Hg44u2wew@mail.gmail.com>

Hi Even
thx for hint.

I need to try to replace the chars because
sometime the dbf of shapefile have mixed charset inside it.

This is due to the usually practice of our shapefiles authors (many
and differents)
They very often fill the shapefile with copy/paste from other docs
(excel, word, libreroffice) and work on
windows, linux, mac.

Sometimes the same shapefile is filled from different user with
different operating systems and softwares.

The result of this activity is that some shapefiles there isnt a
single charset encoding but instead amix of them.

Sometimes the same record could have different authors in different fields.

So is really impossibile to establish what is the right charset.
We try to do instruction to the producers, but it not give any positive result.
This happen becasue often the author don't understand the question.

Every user see correctly its inserts on the own pc and it guess its all ok.

In this situation the only practical solution I see is to change all
the over 128 code chars with some predefined chars.

So thx for hint.

Regards,

Andrea.


2014-07-23 22:16 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:
> Andrea,
>
> I assume you're asking that because of encoding issues, right ? Hopefully
> there are better alternatives than what you are trying to do.
>
> 1) The mapserver shapefile provider doesn't take into account the character
> encoding that is written in the .dbf header or in the .cpg file. So it takes
> the bytes as they appear, and output them directly (and in 6.4, the header of
> the GetFeature output was ISO-8859-1 / LATIN1)
> Now in MapServer master, you can indicate the encoding of the data at the
> layer level ( http://mapserver.org/fr/development/rfc/ms-rfc-103.html ) and
> MapServer will recode that in UTF-8. And all MapServer output headers are now
> UTF-8.
>
> 2) As far as GDAL is concerned, the OGR shapefile driver will try to use the
> character encoding in the .dbf header / .cpg to automatically recode to UTF-8.
> But that might fail since sometimes the .dbf header indicates "system
> encoding", and OGR then takes the assumption that it is LATIN1.
> So if the guess of OGR is correct, when combined with MapServer master (i.e.
> use CONNECTION OGR), you wouldn't neet at all to indicate the layer encoding
> and everything should be output correctly in UTF-8.
>
> But... if you still want to do your replacing of non-ASCII characters, you can
> do it with OGR (and some code/script). As described in
> http://gdal.org/drv_shapefile.html, you would have to set the SHAPE_ENCODING
> environment variable/configuration option to "" (empty string), and that will
> disable any character recoding. So you will get the bytes as they are in the
> .dbf file.
>
> Best regards,
>
> Even
>
>> Hi,
>> Quite often the shapefile that are used to publish data on mapserver
>> are filled with some characters upper 128 ascii code that will do some
>> troble in the GetFeatureInfo response (in html).
>>
>> So I'm evaluating to start towrite some procedure to  scan a shapefile
>> (or a set of shapefiles) and change programmatically every code upper
>> 128 ascii code with a lower 128 ascii-code.
>>
>> The strategy is quite simply.
>> in text field: check is there is some character rather than
>> alphabetica allowed (a,b,c,d.....,0,1,2,3,4,5,6,7,8,9) or some
>> character like:
>> .,;:-@# and so on .If there is something otherwise this
>> change it with a space !
>>
>> I like to use the gdal-api to open and scan the shapefile, but I'm not
>> sure is the better environment
>> due too specifically question (detect over 128 ascii code).
>>
>> My question is when there is a character upper 128 ascii code,
>> gdal-api return it correctly or wrong himself ?
>>
>> Any though ?
>>
>> Thx,
>
> --
> Geospatial professional services
> http://even.rouault.free.fr/services.html



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From f.mujjuni-13 at student.lboro.ac.uk  Thu Jul 24 02:20:51 2014
From: f.mujjuni-13 at student.lboro.ac.uk (Francis Mujjuni)
Date: Thu, 24 Jul 2014 10:20:51 +0100
Subject: [gdal-dev] Geo-referencing Inquiry
Message-ID: <CAK-kDtR+xF=e=ksSj1Q0CH9SmYbf8pKMXSMgs7V=x-dUhUf2Zg@mail.gmail.com>

Hi there,
I have 30,000 geo-stationary satellite images. I have referenced a couple
of them using QGIS and I have generated a 'gdal script' containing GCPs but
when I try to call the GetGCPs from python, it returns 0 so that means I
cannot geo-rectify the rest of the images using the GCPs.

How do I use the 'gdal script' to georeference the rest of the pack. I am
new to python.


the 'gdal script' is here"

gdal_translate -of GTiff -gcp 296.262 924.728 136680 21674 -gcp 527.943
767.011 374671 214111 -gcp 515.999 612.998 350386 383776 -gcp 505 454
332870 565143 -gcp 345.001 412.99 158633 607602 -gcp 311.997 200 112479
847139 -gcp 355.003 104.001 151777 966544 -gcp 524.999 104 340509 973219
-gcp 450.999 210 252279 846305 -gcp 586.997 216.999 413527 845590 -gcp
463.998 341.996 283702 693831 -gcp 611.999 493.995 449433 522359 -gcp
678.966 541.909 525351 471118 -gcp 637.986 582.003 485814 423210 -gcp
707.989 674.059 559671 324367 -gcp 779.001 808.001 638307 171655 -gcp
584.997 853.996 438343 111955
"C:/Users/Elland/Downloads/SAT/EVUK71_201104060700.png"
"C:/Users/Elland/AppData/Local/Temp/EVUK71_201104060700.png"

gdalwarp -r near -tps -co COMPRESS=NONE -dstalpha
"C:/Users/Elland/AppData/Local/Temp/EVUK71_201104060700.png"
"C:/Users/Elland/Downloads/SAT/EVUK71_201104060700_modified.tif"


-- 






Kind regards,

Francis Mujjuni,

Student ID: B311913
Msc Student at Loughborough University
Renewable Energy System's Technology

+44 (0) 7459120801

Flat B, Iffley Block
Harry French Court,
186, Ashby Road Loughborough
LE11 3AG

*Isaiah 32:8* But the noble make noble plans and by noble deeds they stand.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140724/0e600031/attachment.html>

From landa.martin at gmail.com  Thu Jul 24 05:53:02 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 24 Jul 2014 14:53:02 +0200
Subject: [gdal-dev] gdal gml driver field type
Message-ID: <CA+Ei1OdgPmK8O3NTjUVHs-Ot96sYMwXGXRSbnF9qZdXmogsE+w@mail.gmail.com>

Hi,

I have defined some attributes like

    <PropertyDefn>
      <Name>PrvekId</Name>
      <ElementPath>PrvekId</ElementPath>
      <Type>Integer</Type>
      <Width>18</Width>
    </PropertyDefn>

but when a value overflows int32 limit it's not handled correctly
(GDAL compiled on 32bit OS). Eg.

        <vf:PrvekId>2272272708</vf:PrvekId>

becomes

2147483647

I probably doing something wrong, any idea? Thanks! Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From nelsonn at amazon.com  Thu Jul 24 12:49:19 2014
From: nelsonn at amazon.com (Nelson, Nicole)
Date: Thu, 24 Jul 2014 19:49:19 +0000
Subject: [gdal-dev] Upgrading Version Not Working
In-Reply-To: <CFF6AFFC.353E%nelsonn@amazon.com>
References: <CFF6AFFC.353E%nelsonn@amazon.com>
Message-ID: <CFF6B146.3542%nelsonn@amazon.com>

Hello,
   I am working on an application which was developed by another developer about 2 years ago. At the time the developer used GDAL 1.9.1. I am trying to upgrade to the latest version of GDAL (1.11.0). However, I am not able to get the same functionality to work. I am reading in a shape file with ogr.Open which is successful. Then I am able to get a layer successfully. On that layer I try to apply a spatial filter with a single point geometry representing a latitude and longitude pair. However, when I call GetNextFeature I always get null, regardless of the input. The GetNextFeature function previously returned at least one feature. Did something change in the versions that I may have missed? Is there something that would make GetNextFeature return null, but GetFeature at various indices return values?
Thanks,
- Nicole
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140724/6a643d86/attachment.html>

From even.rouault at mines-paris.org  Thu Jul 24 12:49:51 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Jul 2014 21:49:51 +0200
Subject: [gdal-dev] gdal gml driver field type
In-Reply-To: <CA+Ei1OdgPmK8O3NTjUVHs-Ot96sYMwXGXRSbnF9qZdXmogsE+w@mail.gmail.com>
References: <CA+Ei1OdgPmK8O3NTjUVHs-Ot96sYMwXGXRSbnF9qZdXmogsE+w@mail.gmail.com>
Message-ID: <201407242149.51907.even.rouault@mines-paris.org>

Le jeudi 24 juillet 2014 14:53:02, Martin Landa a ?crit :
> Hi,
> 
> I have defined some attributes like
> 
>     <PropertyDefn>
>       <Name>PrvekId</Name>
>       <ElementPath>PrvekId</ElementPath>
>       <Type>Integer</Type>
>       <Width>18</Width>
>     </PropertyDefn>
> 
> but when a value overflows int32 limit it's not handled correctly
> (GDAL compiled on 32bit OS). Eg.
> 
>         <vf:PrvekId>2272272708</vf:PrvekId>
> 
> becomes
> 
> 2147483647
> 
> I probably doing something wrong, any idea? Thanks! Martin

Martin,

OGR integers are only 32 bit wide for now. There's a draft RFC about 
introducing 64 bit integers. Pending from being complemented and implemented.

In the meantime, you will have to declare the type as String.

Even


-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From eadam at co.lincoln.or.us  Thu Jul 24 13:01:08 2014
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Thu, 24 Jul 2014 13:01:08 -0700
Subject: [gdal-dev] Adding Vertex To Linestring in Existing
	shapefile(Python)
In-Reply-To: <BLU175-W1468CB1BB2509296E4C33E89FE0@phx.gbl>
References: <BLU175-W1468CB1BB2509296E4C33E89FE0@phx.gbl>
Message-ID: <CACqBkM9eutknqPtN6Azc+Bv_Ac+J9omQiP6opzZ_D+LA95Jetw@mail.gmail.com>

Hi Justin,

ogr2ogr -segmentize max_dist:(starting with GDAL 1.6.0) maximum
distance between 2 nodes. Used to create intermediate points . Mmight
do what you want.

Best regards, Eli

On Wed, Jul 23, 2014 at 2:08 PM, Justin Williams <jwill222 at hotmail.com> wrote:
>
> Hello All. I'm trying to add a vertex to a linestring inside of a shapefile and save the changes that I've made. So if I have a line that has 2 vertices. When I open the shapefile up again(in Global Mapper, QGIS,etc.) I have 3 vertices. How is this accomplished in gdal/ogr?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Thu Jul 24 13:03:58 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Jul 2014 22:03:58 +0200
Subject: [gdal-dev] Upgrading Version Not Working
In-Reply-To: <CFF6B146.3542%nelsonn@amazon.com>
References: <CFF6AFFC.353E%nelsonn@amazon.com>
	<CFF6B146.3542%nelsonn@amazon.com>
Message-ID: <201407242203.58823.even.rouault@mines-paris.org>

Le jeudi 24 juillet 2014 21:49:19, Nelson, Nicole a ?crit :
> Hello,
>    I am working on an application which was developed by another developer
> about 2 years ago. At the time the developer used GDAL 1.9.1. I am trying
> to upgrade to the latest version of GDAL (1.11.0). However, I am not able
> to get the same functionality to work. I am reading in a shape file with
> ogr.Open which is successful. Then I am able to get a layer successfully.
> On that layer I try to apply a spatial filter with a single point geometry
> representing a latitude and longitude pair. However, when I call
> GetNextFeature I always get null, regardless of the input. The
> GetNextFeature function previously returned at least one feature. Did
> something change in the versions that I may have missed?

Nicole,

Single point spatial filter must be an odd use case. Not sure this is present 
in our regression tests, so that might have been accidentaly broken. However I 
just made an experiment with GDAL trunk :

$ cat square.csv
id,WKT
1,"POLYGON((0 0,0 1,1 1,1 0,0 0))"

$ ogr2ogr square.shp square.csv


$ ogrinfo square.shp -al -spat 0.25 0.5 0.25 0.5
INFO: Open of `square.shp'
      using driver `ESRI Shapefile' successful.

Layer name: square
Geometry: Polygon
Feature Count: 1
Extent: (0.000000, 0.000000) - (1.000000, 1.000000)
Layer SRS WKT:
(unknown)
id: String (80.0)
WKT: String (80.0)
OGRFeature(square):0
  id (String) = 1
  WKT (String) = POLYGON((0 0,0 1,1 1,1 0,0 0))
  POLYGON ((0 0,0 1,1 1,1 0,0 0))

So at least on that example it seems to work.

> Is there
> something that would make GetNextFeature return null, but GetFeature at
> various indices return values?

Yes, GetFeature() doesn't take into account the spatial filter.

Best regards,

Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From nelsonn at amazon.com  Thu Jul 24 14:21:52 2014
From: nelsonn at amazon.com (Nelson, Nicole)
Date: Thu, 24 Jul 2014 21:21:52 +0000
Subject: [gdal-dev] Upgrading Version Not Working
In-Reply-To: <201407242203.58823.even.rouault@mines-paris.org>
References: <CFF6AFFC.353E%nelsonn@amazon.com>
	<CFF6B146.3542%nelsonn@amazon.com>
	<201407242203.58823.even.rouault@mines-paris.org>
Message-ID: <CFF6C6D6.354E%nelsonn@amazon.com>

Even,
   Is it possible that I am missing an external library? Do you know which
external libraries would be required to accomplish such a task?
Thanks,
Nicole

On 7/24/14, 1:03 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

>Le jeudi 24 juillet 2014 21:49:19, Nelson, Nicole a ?crit :
>> Hello,
>>    I am working on an application which was developed by another
>>developer
>> about 2 years ago. At the time the developer used GDAL 1.9.1. I am
>>trying
>> to upgrade to the latest version of GDAL (1.11.0). However, I am not
>>able
>> to get the same functionality to work. I am reading in a shape file with
>> ogr.Open which is successful. Then I am able to get a layer
>>successfully.
>> On that layer I try to apply a spatial filter with a single point
>>geometry
>> representing a latitude and longitude pair. However, when I call
>> GetNextFeature I always get null, regardless of the input. The
>> GetNextFeature function previously returned at least one feature. Did
>> something change in the versions that I may have missed?
>
>Nicole,
>
>Single point spatial filter must be an odd use case. Not sure this is
>present 
>in our regression tests, so that might have been accidentaly broken.
>However I 
>just made an experiment with GDAL trunk :
>
>$ cat square.csv
>id,WKT
>1,"POLYGON((0 0,0 1,1 1,1 0,0 0))"
>
>$ ogr2ogr square.shp square.csv
>
>
>$ ogrinfo square.shp -al -spat 0.25 0.5 0.25 0.5
>INFO: Open of `square.shp'
>      using driver `ESRI Shapefile' successful.
>
>Layer name: square
>Geometry: Polygon
>Feature Count: 1
>Extent: (0.000000, 0.000000) - (1.000000, 1.000000)
>Layer SRS WKT:
>(unknown)
>id: String (80.0)
>WKT: String (80.0)
>OGRFeature(square):0
>  id (String) = 1
>  WKT (String) = POLYGON((0 0,0 1,1 1,1 0,0 0))
>  POLYGON ((0 0,0 1,1 1,1 0,0 0))
>
>So at least on that example it seems to work.
>
>> Is there
>> something that would make GetNextFeature return null, but GetFeature at
>> various indices return values?
>
>Yes, GetFeature() doesn't take into account the spatial filter.
>
>Best regards,
>
>Even
>
>-- 
>Geospatial professional services
>http://even.rouault.free.fr/services.html


From even.rouault at mines-paris.org  Thu Jul 24 14:26:58 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 24 Jul 2014 23:26:58 +0200
Subject: [gdal-dev] Upgrading Version Not Working
In-Reply-To: <CFF6C6D6.354E%nelsonn@amazon.com>
References: <CFF6AFFC.353E%nelsonn@amazon.com>
	<201407242203.58823.even.rouault@mines-paris.org>
	<CFF6C6D6.354E%nelsonn@amazon.com>
Message-ID: <201407242326.58856.even.rouault@mines-paris.org>

Le jeudi 24 juillet 2014 23:21:52, Nelson, Nicole a ?crit :
> Even,
>    Is it possible that I am missing an external library? Do you know which
> external libraries would be required to accomplish such a task?

It might be related to have built GDAL against GEOS or not. Although I would 
still expect it to work in the non-GEOS case. Did you try the sample I 
provided ?

> Thanks,
> Nicole
> 
> On 7/24/14, 1:03 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:
> >Le jeudi 24 juillet 2014 21:49:19, Nelson, Nicole a ?crit :
> >> Hello,
> >> 
> >>    I am working on an application which was developed by another
> >>
> >>developer
> >>
> >> about 2 years ago. At the time the developer used GDAL 1.9.1. I am
> >>
> >>trying
> >>
> >> to upgrade to the latest version of GDAL (1.11.0). However, I am not
> >>
> >>able
> >>
> >> to get the same functionality to work. I am reading in a shape file with
> >> ogr.Open which is successful. Then I am able to get a layer
> >>
> >>successfully.
> >>
> >> On that layer I try to apply a spatial filter with a single point
> >>
> >>geometry
> >>
> >> representing a latitude and longitude pair. However, when I call
> >> GetNextFeature I always get null, regardless of the input. The
> >> GetNextFeature function previously returned at least one feature. Did
> >> something change in the versions that I may have missed?
> >
> >Nicole,
> >
> >Single point spatial filter must be an odd use case. Not sure this is
> >present
> >in our regression tests, so that might have been accidentaly broken.
> >However I
> >just made an experiment with GDAL trunk :
> >
> >$ cat square.csv
> >id,WKT
> >1,"POLYGON((0 0,0 1,1 1,1 0,0 0))"
> >
> >$ ogr2ogr square.shp square.csv
> >
> >
> >$ ogrinfo square.shp -al -spat 0.25 0.5 0.25 0.5
> >INFO: Open of `square.shp'
> >
> >      using driver `ESRI Shapefile' successful.
> >
> >Layer name: square
> >Geometry: Polygon
> >Feature Count: 1
> >Extent: (0.000000, 0.000000) - (1.000000, 1.000000)
> >Layer SRS WKT:
> >(unknown)
> >id: String (80.0)
> >WKT: String (80.0)
> >OGRFeature(square):0
> >
> >  id (String) = 1
> >  WKT (String) = POLYGON((0 0,0 1,1 1,1 0,0 0))
> >  POLYGON ((0 0,0 1,1 1,1 0,0 0))
> >
> >So at least on that example it seems to work.
> >
> >> Is there
> >> something that would make GetNextFeature return null, but GetFeature at
> >> various indices return values?
> >
> >Yes, GetFeature() doesn't take into account the spatial filter.
> >
> >Best regards,
> >
> >Even

-- 
Geospatial professional services
http://even.rouault.free.fr/services.html

From nelsonn at amazon.com  Thu Jul 24 14:36:09 2014
From: nelsonn at amazon.com (Nelson, Nicole)
Date: Thu, 24 Jul 2014 21:36:09 +0000
Subject: [gdal-dev] Upgrading Version Not Working
In-Reply-To: <201407242326.58856.even.rouault@mines-paris.org>
References: <CFF6AFFC.353E%nelsonn@amazon.com>
	<201407242203.58823.even.rouault@mines-paris.org>
	<CFF6C6D6.354E%nelsonn@amazon.com>
	<201407242326.58856.even.rouault@mines-paris.org>
Message-ID: <CFF6CA1E.355C%nelsonn@amazon.com>

Yes. I was able to run successfully.
For some reason I got a different warning this last time running that
previously. Which pointed me in the right direction. I was entering the
points incorrectly, so it was seeing the points were outside the bounds
available.
Thanks for your help!

On 7/24/14, 2:26 PM, "Even Rouault" <even.rouault at mines-paris.org> wrote:

>Le jeudi 24 juillet 2014 23:21:52, Nelson, Nicole a ?crit :
>> Even,
>>    Is it possible that I am missing an external library? Do you know
>>which
>> external libraries would be required to accomplish such a task?
>
>It might be related to have built GDAL against GEOS or not. Although I
>would 
>still expect it to work in the non-GEOS case. Did you try the sample I
>provided ?
>
>> Thanks,
>> Nicole
>> 
>> On 7/24/14, 1:03 PM, "Even Rouault" <even.rouault at mines-paris.org>
>>wrote:
>> >Le jeudi 24 juillet 2014 21:49:19, Nelson, Nicole a ?crit :
>> >> Hello,
>> >> 
>> >>    I am working on an application which was developed by another
>> >>
>> >>developer
>> >>
>> >> about 2 years ago. At the time the developer used GDAL 1.9.1. I am
>> >>
>> >>trying
>> >>
>> >> to upgrade to the latest version of GDAL (1.11.0). However, I am not
>> >>
>> >>able
>> >>
>> >> to get the same functionality to work. I am reading in a shape file
>>with
>> >> ogr.Open which is successful. Then I am able to get a layer
>> >>
>> >>successfully.
>> >>
>> >> On that layer I try to apply a spatial filter with a single point
>> >>
>> >>geometry
>> >>
>> >> representing a latitude and longitude pair. However, when I call
>> >> GetNextFeature I always get null, regardless of the input. The
>> >> GetNextFeature function previously returned at least one feature. Did
>> >> something change in the versions that I may have missed?
>> >
>> >Nicole,
>> >
>> >Single point spatial filter must be an odd use case. Not sure this is
>> >present
>> >in our regression tests, so that might have been accidentaly broken.
>> >However I
>> >just made an experiment with GDAL trunk :
>> >
>> >$ cat square.csv
>> >id,WKT
>> >1,"POLYGON((0 0,0 1,1 1,1 0,0 0))"
>> >
>> >$ ogr2ogr square.shp square.csv
>> >
>> >
>> >$ ogrinfo square.shp -al -spat 0.25 0.5 0.25 0.5
>> >INFO: Open of `square.shp'
>> >
>> >      using driver `ESRI Shapefile' successful.
>> >
>> >Layer name: square
>> >Geometry: Polygon
>> >Feature Count: 1
>> >Extent: (0.000000, 0.000000) - (1.000000, 1.000000)
>> >Layer SRS WKT:
>> >(unknown)
>> >id: String (80.0)
>> >WKT: String (80.0)
>> >OGRFeature(square):0
>> >
>> >  id (String) = 1
>> >  WKT (String) = POLYGON((0 0,0 1,1 1,1 0,0 0))
>> >  POLYGON ((0 0,0 1,1 1,1 0,0 0))
>> >
>> >So at least on that example it seems to work.
>> >
>> >> Is there
>> >> something that would make GetNextFeature return null, but GetFeature
>>at
>> >> various indices return values?
>> >
>> >Yes, GetFeature() doesn't take into account the spatial filter.
>> >
>> >Best regards,
>> >
>> >Even
>
>-- 
>Geospatial professional services
>http://even.rouault.free.fr/services.html


From landa.martin at gmail.com  Fri Jul 25 02:44:19 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 25 Jul 2014 11:44:19 +0200
Subject: [gdal-dev] gdal gml driver field type
In-Reply-To: <201407242149.51907.even.rouault@mines-paris.org>
References: <CA+Ei1OdgPmK8O3NTjUVHs-Ot96sYMwXGXRSbnF9qZdXmogsE+w@mail.gmail.com>
	<201407242149.51907.even.rouault@mines-paris.org>
Message-ID: <CA+Ei1Oe3bGcboN2mGCegJS96Q4uqoZXmdRNKyER9acKjGGzfHQ@mail.gmail.com>

Hi Even,

2014-07-24 21:49 GMT+02:00 Even Rouault <even.rouault at mines-paris.org>:

> OGR integers are only 32 bit wide for now. There's a draft RFC about
> introducing 64 bit integers. Pending from being complemented and implemented.

ah, I thought that `width` for integers has some effect.

> In the meantime, you will have to declare the type as String.

OK, thanks. I will fix GFS files in this way. Martin

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From lucadeluge at gmail.com  Fri Jul 25 05:59:31 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Fri, 25 Jul 2014 14:59:31 +0200
Subject: [gdal-dev] creation of Geospatial PDF
Message-ID: <CAK4m-3yHo-M7F2VyUTcfwOXq-DNEuaEneF8sW87wvnts6rktzg@mail.gmail.com>

Hi all,

I would like to create a Geospatial PDF with several vectors, is it possible?

I tried with ogr2ogr but it failed, reading the documentation I found
EXTRA_RASTERS to add several raster but not EXTRA_VECTORS. There is
OGR_DATASOURCE but the documentation say that it is used "to display
on top of the raster layer", and it doesn't work with OGR.

Any solutions?

Thanks

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From even.rouault at mines-paris.org  Fri Jul 25 06:23:32 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 25 Jul 2014 15:23:32 +0200
Subject: [gdal-dev] creation of Geospatial PDF
In-Reply-To: <CAK4m-3yHo-M7F2VyUTcfwOXq-DNEuaEneF8sW87wvnts6rktzg@mail.gmail.com>
References: <CAK4m-3yHo-M7F2VyUTcfwOXq-DNEuaEneF8sW87wvnts6rktzg@mail.gmail.com>
Message-ID: <1406294612.53d25a54dd0be@imp.free.fr>


> Hi all,
>
> I would like to create a Geospatial PDF with several vectors, is it possible?

That should be possible yes.

>
> I tried with ogr2ogr but it failed,

How ?

 reading the documentation I found
> EXTRA_RASTERS to add several raster but not EXTRA_VECTORS. There is
> OGR_DATASOURCE but the documentation say that it is used "to display
> on top of the raster layer", and it doesn't work with OGR.

Which version of GDAL are you using ?
- If trunk, the relevant doc is : http://gdal.org/frmt_pdf.html
- If 1.11 or older, http://gdal.org/1.11/frmt_pdf.html and
http://gdal.org/1.11/ogr/drv_pdf.html

But in both cases, ogr2ogr -f PDF the.pdf input_datasource should work

>
> Any solutions?
>
> Thanks
>
> --
> ciao
> Luca
>
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From lucadeluge at gmail.com  Fri Jul 25 06:45:10 2014
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Fri, 25 Jul 2014 15:45:10 +0200
Subject: [gdal-dev] creation of Geospatial PDF
In-Reply-To: <1406294612.53d25a54dd0be@imp.free.fr>
References: <CAK4m-3yHo-M7F2VyUTcfwOXq-DNEuaEneF8sW87wvnts6rktzg@mail.gmail.com>
	<1406294612.53d25a54dd0be@imp.free.fr>
Message-ID: <CAK4m-3xM1BRrRpH8+mv1r1gxNSzFZHEeXmokfY11qvkEw7Qguw@mail.gmail.com>

On 25 July 2014 15:23, Even Rouault <even.rouault at mines-paris.org> wrote:
>
>> Hi all,
>>
>> I would like to create a Geospatial PDF with several vectors, is it possible?
>
> That should be possible yes.
>
>>
>> I tried with ogr2ogr but it failed,
>
> How ?
>

- first attempt

ogr2ogr -f PDF trentino.pdf zps_trento.shp grafo.shp
FAILURE: Couldn't fetch requested layer 'grafo.shp'!

- second attempt

ogr2ogr -f PDF trentino.pdf zps_trento.shp
ogr2ogr -f PDF -update trentino.pdf grafo.GeoJSON

- third attempt

ogr2ogr -f PDF trentino.pdf zps_trento.GeoJSON -lco OGR_DATASOURCE=grafo.GeoJSON

>  reading the documentation I found
>> EXTRA_RASTERS to add several raster but not EXTRA_VECTORS. There is
>> OGR_DATASOURCE but the documentation say that it is used "to display
>> on top of the raster layer", and it doesn't work with OGR.
>
> Which version of GDAL are you using ?

1.11

> - If trunk, the relevant doc is : http://gdal.org/frmt_pdf.html
> - If 1.11 or older, http://gdal.org/1.11/frmt_pdf.html and
> http://gdal.org/1.11/ogr/drv_pdf.html
>
> But in both cases, ogr2ogr -f PDF the.pdf input_datasource should work
>

yes if I use only one vector datasource yes,but I'm not able to put
more then one vector in only one PDF

Thanks

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From even.rouault at mines-paris.org  Fri Jul 25 07:24:40 2014
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 25 Jul 2014 16:24:40 +0200
Subject: [gdal-dev] creation of Geospatial PDF
In-Reply-To: <CAK4m-3xM1BRrRpH8+mv1r1gxNSzFZHEeXmokfY11qvkEw7Qguw@mail.gmail.com>
References: <CAK4m-3yHo-M7F2VyUTcfwOXq-DNEuaEneF8sW87wvnts6rktzg@mail.gmail.com>
	<1406294612.53d25a54dd0be@imp.free.fr>
	<CAK4m-3xM1BRrRpH8+mv1r1gxNSzFZHEeXmokfY11qvkEw7Qguw@mail.gmail.com>
Message-ID: <1406298280.53d268a847f40@imp.free.fr>

Selon Luca Delucchi <lucadeluge at gmail.com>:

> On 25 July 2014 15:23, Even Rouault <even.rouault at mines-paris.org> wrote:
> >
> >> Hi all,
> >>
> >> I would like to create a Geospatial PDF with several vectors, is it
> possible?
> >
> > That should be possible yes.
> >
> >>
> >> I tried with ogr2ogr but it failed,
> >
> > How ?
> >
>
> - first attempt
>
> ogr2ogr -f PDF trentino.pdf zps_trento.shp grafo.shp
> FAILURE: Couldn't fetch requested layer 'grafo.shp'!

That's an invalid syntax for ogr2ogr. Only accept one only datasource.
In your example you could just move the 2 shapefiles into a new directory
"blabla"

and then

ogr2ogr -f PDF trentino.pdf blabla


Another (more complicated) option would be to use a OGR VRT that would reference
to your various input layers.

>
> - second attempt
>
> ogr2ogr -f PDF trentino.pdf zps_trento.shp
> ogr2ogr -f PDF -update trentino.pdf grafo.GeoJSON

Yes, the PDF driver doesn't support update/append mode.

>
> - third attempt
>
> ogr2ogr -f PDF trentino.pdf zps_trento.GeoJSON -lco
> OGR_DATASOURCE=grafo.GeoJSON

OGR_DATASOURCE not supported in the OGR driver, only the raster driver

>
> >  reading the documentation I found
> >> EXTRA_RASTERS to add several raster but not EXTRA_VECTORS. There is
> >> OGR_DATASOURCE but the documentation say that it is used "to display
> >> on top of the raster layer", and it doesn't work with OGR.
> >
> > Which version of GDAL are you using ?
>
> 1.11
>
> > - If trunk, the relevant doc is : http://gdal.org/frmt_pdf.html
> > - If 1.11 or older, http://gdal.org/1.11/frmt_pdf.html and
> > http://gdal.org/1.11/ogr/drv_pdf.html
> >
> > But in both cases, ogr2ogr -f PDF the.pdf input_datasource should work
> >
>
> yes if I use only one vector datasource yes,but I'm not able to put
> more then one vector in only one PDF
>
> Thanks
>
> --
> ciao
> Luca
>
> http://gis.cri.fmach.it/delucchi/
> www.lucadelu.org
>







From jukka.rahkonen at mmmtike.fi  Fri Jul 25 07:48:31 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 25 Jul 2014 14:48:31 +0000 (UTC)
Subject: [gdal-dev] creation of Geospatial PDF
References: <CAK4m-3yHo-M7F2VyUTcfwOXq-DNEuaEneF8sW87wvnts6rktzg@mail.gmail.com>
	<1406294612.53d25a54dd0be@imp.free.fr>
	<CAK4m-3xM1BRrRpH8+mv1r1gxNSzFZHEeXmokfY11qvkEw7Qguw@mail.gmail.com>
	<1406298280.53d268a847f40@imp.free.fr>
Message-ID: <loom.20140725T164518-847@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> > ogr2ogr -f PDF trentino.pdf zps_trento.shp grafo.shp
> > FAILURE: Couldn't fetch requested layer 'grafo.shp'!
> 
> That's an invalid syntax for ogr2ogr. Only accept one only datasource.
> In your example you could just move the 2 shapefiles into a new directory
> "blabla"
> 
> and then
> 
> ogr2ogr -f PDF trentino.pdf blabla
> 
> Another (more complicated) option would be to use a OGR VRT that would
reference
> to your various input layers.

This document should be still valid despite perhaps the download links for
getting OSM data. The idea of combining different layers into one datasource
with VRT is described in details.
http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf

-Jukka Rahkonen-


From gusevmihs at gmail.com  Fri Jul 25 12:05:08 2014
From: gusevmihs at gmail.com (Mikhail Gusev)
Date: Fri, 25 Jul 2014 23:05:08 +0400
Subject: [gdal-dev] GSoC weekly report 10. GDAL Networking
Message-ID: <CAJB43Vrj6wrANULPjKQzrZT_ncPbmq8PZQNtDnU86LH4AiuGVQ@mail.gmail.com>

Hello everyone!
This week I've implemented many new methods and classes which I intended:
network analysis, C API methods and even two new applications, which use
the new functionality. Here is my blog post about it:
http://gsoc2014gnm.blogspot.ru/2014/07/week-10-network-analysis-in-gnm.html.
At the beginning of the next week I'll be absent but then I'll finish to
move all functionality to the new API (network rules) and also finish the
python tests. About python tests: I've already made the following steps:
created swig interface file -> swig has generated wrapper code for me -> I
started to make a python test file with a set of core GNM tests, but
haven't got enough time to finish this.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140725/d094edfc/attachment.html>

From thomas at silentwings.no  Sat Jul 26 17:16:23 2014
From: thomas at silentwings.no (Thomas Sevaldrud)
Date: Sun, 27 Jul 2014 02:16:23 +0200
Subject: [gdal-dev] GeoJSON coordinate values truncated to integers
Message-ID: <CAJSDX1iTgGkG_5+m28oi80OMHf8CwVxVDtXALaYMC=ApRVHhPw@mail.gmail.com>

Hi, I'm having a strange problem that appears to be related to the GeoJSON
driver in GDAL 1.11.0

When reading a polygon geometry in geographical lat/lon coordinates, all my
coordinate values are returned in integer degrees. When using ogrinfo it
dumps the coordinate values with correct decimals, so it must be something
I have done wrong... Here is the relevant code:

   OGRDataSource *ds = OGRSFDriverRegistrar::Open(filename_.c_str(), FALSE );


   int num_layers = ds->GetLayerCount();

   for(int i = 0; i < num_layers; i++)

   {

      OGRLayer* layer = ds->GetLayer(i);

      layer->ResetReading();


      OGRFeature* feature;

      while((feature = layer->GetNextFeature()) != NULL)

      {

         OGRGeometry* geometry = feature->GetGeometryRef();

         if(geometry == NULL)

            continue;


         int geom_type = wkbFlatten(geometry->getGeometryType());


         if(geom_type == wkbPolygon)

         {

            OGRPolygon* ogr_poly = (OGRPolygon*)geometry;

            OGRLinearRing* ext_ring = ogr_poly->getExteriorRing();


            for(int j = 0; j < ext_ring->getNumPoints() - 1; j++)

            {

               double x = ext_ring->getX(j);

               double y = ext_ring->getY(j);

               ...


Now, the x, and y values here are always truncated to integer values. This
does not happen with for example shp files.

Any ideas what I might have done wrong here?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140727/a4ae5cd6/attachment.html>

From thomas at silentwings.no  Sun Jul 27 04:40:45 2014
From: thomas at silentwings.no (Thomas Sevaldrud)
Date: Sun, 27 Jul 2014 13:40:45 +0200
Subject: [gdal-dev]  GeoJSON coordinate values truncated to integers
Message-ID: <CAJSDX1igpmvo6TAfYP_ZtGkSyQvUcwzCNre0KtJyph5YHnp5WA@mail.gmail.com>

(Sorry about the repost, I forgot the subject tag in the previous one..)

Hi, I'm having a strange problem that appears to be related to the GeoJSON
driver in GDAL 1.11.0

When reading a polygon geometry in geographical lat/lon coordinates, all my
coordinate values are returned in integer degrees. When using ogrinfo it
dumps the coordinate values with correct decimals, so it must be something
I have done wrong... Here is the relevant code:

   OGRDataSource *ds = OGRSFDriverRegistrar::Open(filename_.c_str(), FALSE );


   int num_layers = ds->GetLayerCount();

   for(int i = 0; i < num_layers; i++)

   {

      OGRLayer* layer = ds->GetLayer(i);

      layer->ResetReading();


      OGRFeature* feature;

      while((feature = layer->GetNextFeature()) != NULL)

      {

         OGRGeometry* geometry = feature->GetGeometryRef();

         if(geometry == NULL)

            continue;


         int geom_type = wkbFlatten(geometry->getGeometryType());


         if(geom_type == wkbPolygon)

         {

            OGRPolygon* ogr_poly = (OGRPolygon*)geometry;

            OGRLinearRing* ext_ring = ogr_poly->getExteriorRing();


            for(int j = 0; j < ext_ring->getNumPoints() - 1; j++)

            {

               double x = ext_ring->getX(j);

               double y = ext_ring->getY(j);

               ...


Now, the x, and y values here are always truncated to integer values. This
does not happen with for example shp files.

Any ideas what I might have done wrong here?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140727/7bfe0b9f/attachment-0001.html>

From bishop.dev at gmail.com  Sun Jul 27 04:57:46 2014
From: bishop.dev at gmail.com (Dmitriy Baryshnikov)
Date: Sun, 27 Jul 2014 15:57:46 +0400
Subject: [gdal-dev] GeoJSON coordinate values truncated to integers
In-Reply-To: <CAJSDX1igpmvo6TAfYP_ZtGkSyQvUcwzCNre0KtJyph5YHnp5WA@mail.gmail.com>
References: <CAJSDX1igpmvo6TAfYP_ZtGkSyQvUcwzCNre0KtJyph5YHnp5WA@mail.gmail.com>
Message-ID: <53D4E93A.4040904@gmail.com>

Hi,

This is usually according to the locale. Try set "C" locale like this.

|cha*||old_locale =setlocale(LC_NUMERIC,  "C");

before opening datasource

and reset it back after reading all fetures

||setlocale(LC_NUMERIC,  |old_locale);


This is not the solution (I fixed it here 
http://trac.osgeo.org/gdal/ticket/5461) but some kind of workaround.

Best regards,
     Dmitry

27.07.2014 15:40, Thomas Sevaldrud ?????:
> (Sorry about the repost, I forgot the subject tag in the previous one..)
>
> Hi, I'm having a strange problem that appears to be related to the 
> GeoJSON driver in GDAL 1.11.0
>
> When reading a polygon geometry in geographical lat/lon coordinates, 
> all my coordinate values are returned in integer degrees. When using 
> ogrinfo it dumps the coordinate values with correct decimals, so it 
> must be something I have done wrong... Here is the relevant code:
>
>     OGRDataSource  *ds  =  OGRSFDriverRegistrar::Open(filename_.c_str(),  FALSE  );
>     int  num_layers  =  ds->GetLayerCount();
>     for(int  i  =  0;  i  <  num_layers;  i++)
>     {
>        OGRLayer*  layer  =  ds->GetLayer(i);
>        layer->ResetReading();
>        OGRFeature*  feature;
>        while((feature  =  layer->GetNextFeature())  !=  NULL)
>        {
>           OGRGeometry*  geometry  =  feature->GetGeometryRef();
>           if(geometry  ==  NULL)
>              continue;
>           int  geom_type  =  wkbFlatten(geometry->getGeometryType());
>           if(geom_type  ==  wkbPolygon)
>           {
>              OGRPolygon*  ogr_poly  =  (OGRPolygon*)geometry;
>              OGRLinearRing*  ext_ring  =  ogr_poly->getExteriorRing();
>              for(int  j  =  0;  j  <  ext_ring->getNumPoints()  -  1;  j++)
>              {                
>                 double  x  =  ext_ring->getX(j);
>                 double  y  =  ext_ring->getY(j);
>                 ...
> Now, the x, and y values here are always truncated to integer values. 
> This does not happen with for example shp files.
>
> Any ideas what I might have done wrong here?
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140727/5ceea05d/attachment.html>

From aperi2007 at gmail.com  Sun Jul 27 12:59:34 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 27 Jul 2014 21:59:34 +0200
Subject: [gdal-dev] feature style from dxf don't escape the apostrofe
Message-ID: <CABqTJk-iQV3wp3cJKvKS=GPGCD+Hs9s_12u41DGsfoJmFeW5WA@mail.gmail.com>

Hi,
I'm testing the featurestyle filed loaded on a spatialite from a set of dxf.

When the dxf has a apostrophe char (')
it is loaded as is in the style field without an escape.

As example, I have this situation:

LABEL(f:"Arial",t:"'99",a:305,s:2.4g,c:#000000)

Instead of
LABEL(f:"Arial",t:"\'99",a:305,s:2.4g,c:#000000)

I test it with mapserver new styleitem feature.

I see the
LABEL(f:"Arial",t:"'99",a:305,s:2.4g,c:#000000)

give an error, instead the
LABEL(f:"Arial",t:"\'99",a:305,s:2.4g,c:#000000)

Is correctly mapped.

Is this (don't escaping apostrophe char ) a bug of gdal dxf driver ?

Thx,


-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From aperi2007 at gmail.com  Sun Jul 27 14:53:14 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun, 27 Jul 2014 23:53:14 +0200
Subject: [gdal-dev] feature style from dxf don't escape the apostrofe
In-Reply-To: <CABqTJk-iQV3wp3cJKvKS=GPGCD+Hs9s_12u41DGsfoJmFeW5WA@mail.gmail.com>
References: <CABqTJk-iQV3wp3cJKvKS=GPGCD+Hs9s_12u41DGsfoJmFeW5WA@mail.gmail.com>
Message-ID: <CABqTJk_9ya0a4ohOvAuVVJdrfX0M0s42ZtqOSOD3bHcYg+NdCQ@mail.gmail.com>

Hi, reading better the featurestyle specs,
http://www.gdal.org/ogr_feature_style.html
I'm relly not sure if is necessary to escape the apostrophe in the texts.

A.


2014-07-27 21:59 GMT+02:00 Andrea Peri <aperi2007 at gmail.com>:
> Hi,
> I'm testing the featurestyle filed loaded on a spatialite from a set of dxf.
>
> When the dxf has a apostrophe char (')
> it is loaded as is in the style field without an escape.
>
> As example, I have this situation:
>
> LABEL(f:"Arial",t:"'99",a:305,s:2.4g,c:#000000)
>
> Instead of
> LABEL(f:"Arial",t:"\'99",a:305,s:2.4g,c:#000000)
>
> I test it with mapserver new styleitem feature.
>
> I see the
> LABEL(f:"Arial",t:"'99",a:305,s:2.4g,c:#000000)
>
> give an error, instead the
> LABEL(f:"Arial",t:"\'99",a:305,s:2.4g,c:#000000)
>
> Is correctly mapped.
>
> Is this (don't escaping apostrophe char ) a bug of gdal dxf driver ?
>
> Thx,
>
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From thomas at silentwings.no  Sun Jul 27 15:07:33 2014
From: thomas at silentwings.no (Thomas Sevaldrud)
Date: Mon, 28 Jul 2014 00:07:33 +0200
Subject: [gdal-dev] GeoJSON coordinate values truncated to integers
In-Reply-To: <53D4E93A.4040904@gmail.com>
References: <CAJSDX1igpmvo6TAfYP_ZtGkSyQvUcwzCNre0KtJyph5YHnp5WA@mail.gmail.com>
	<53D4E93A.4040904@gmail.com>
Message-ID: <CAJSDX1iJsm4ZAXuLNCr8P__SAMrMpVqqKQd-Ynfo4NzfHzX3hQ@mail.gmail.com>

Ah, that fixed it! Thanks :-)

- Thomas


On Sun, Jul 27, 2014 at 1:57 PM, Dmitriy Baryshnikov <bishop.dev at gmail.com>
wrote:

>  Hi,
>
> This is usually according to the locale. Try set "C" locale like this.
>
> cha* old_locale = setlocale(LC_NUMERIC, "C");
>
> before opening datasource
>
> and reset it back after reading all fetures
> setlocale(LC_NUMERIC, old_locale);
>
>
> This is not the solution (I fixed it here
> http://trac.osgeo.org/gdal/ticket/5461) but some kind of workaround.
>
> Best regards,
>     Dmitry
>
> 27.07.2014 15:40, Thomas Sevaldrud ?????:
>
>  (Sorry about the repost, I forgot the subject tag in the previous one..)
>
>  Hi, I'm having a strange problem that appears to be related to the
> GeoJSON driver in GDAL 1.11.0
>
>  When reading a polygon geometry in geographical lat/lon coordinates, all
> my coordinate values are returned in integer degrees. When using ogrinfo it
> dumps the coordinate values with correct decimals, so it must be something
> I have done wrong... Here is the relevant code:
>
>     OGRDataSource *ds = OGRSFDriverRegistrar::Open(filename_.c_str(), FALSE );
>
>     int num_layers = ds->GetLayerCount();
>
>    for(int i = 0; i < num_layers; i++)
>
>    {
>
>       OGRLayer* layer = ds->GetLayer(i);
>
>       layer->ResetReading();
>
>        OGRFeature* feature;
>
>       while((feature = layer->GetNextFeature()) != NULL)
>
>       {
>
>          OGRGeometry* geometry = feature->GetGeometryRef();
>
>          if(geometry == NULL)
>
>             continue;
>
>           int geom_type = wkbFlatten(geometry->getGeometryType());
>
>           if(geom_type == wkbPolygon)
>
>          {
>
>             OGRPolygon* ogr_poly = (OGRPolygon*)geometry;
>
>             OGRLinearRing* ext_ring = ogr_poly->getExteriorRing();
>
>              for(int j = 0; j < ext_ring->getNumPoints() - 1; j++)
>
>             {
>
>                double x = ext_ring->getX(j);
>
>                double y = ext_ring->getY(j);
>
>                ...
>
>  Now, the x, and y values here are always truncated to integer values.
> This does not happen with for example shp files.
>
>  Any ideas what I might have done wrong here?
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140728/e460a552/attachment.html>

From varunsaraf14 at gmail.com  Sun Jul 27 15:52:28 2014
From: varunsaraf14 at gmail.com (Varun Saraf)
Date: Mon, 28 Jul 2014 04:22:28 +0530
Subject: [gdal-dev] GSoC 2014 Weekly Report 10 : GDAL PostGIS Raster driver
Message-ID: <CAPfr+rt51yMhFB3ouO+pwQsNZo2pTGPcUK13_HRqJ_JhugQb-w@mail.gmail.com>

 Hi,

Below is my tenth weekly report.

*What did I do this week?*

   -
   - Inserted an empty raster in the table via
   PostGISRasterDataset::Create().
   - On subsequent PostGISRasterRasterBand::IRasterIO calls, the default
   implementation of GDALRasterBand::IRasterIO is called which in turn calls
   PostGISRasterRasterBand::IWriteBlock with data pertaining to each block.
   - In IWriteBlock, first a new band was added if required and then
   updated the band with input data.
   - Handled datatype translation from GDAL to PostGIS via
   TranslateDataTypeGDALtoPostGIS.

*What do I plan on doing next week?*

   - Testing and bug fixing.

*Am I blocked on anything?*

   - No.

Link to weekly report :
https://github.com/varunsaraf/postgis_raster/wiki/Report-10
Link to code repository : https://github.com/varunsaraf/postgis_raster
More details at : http://trac.osgeo.org/gdal/wiki/PostGIS_raster_driver

Regards,
Varun Saraf
Lab for Spatial Informatics
IIIT Hyderabad, India
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140728/8da16362/attachment-0001.html>

From aperi2007 at gmail.com  Sun Jul 27 23:48:34 2014
From: aperi2007 at gmail.com (Andrea Peri)
Date: Mon, 28 Jul 2014 08:48:34 +0200
Subject: [gdal-dev] feature style from dxf don't escape the apostrofe
In-Reply-To: <CABqTJk_9ya0a4ohOvAuVVJdrfX0M0s42ZtqOSOD3bHcYg+NdCQ@mail.gmail.com>
References: <CABqTJk-iQV3wp3cJKvKS=GPGCD+Hs9s_12u41DGsfoJmFeW5WA@mail.gmail.com>
	<CABqTJk_9ya0a4ohOvAuVVJdrfX0M0s42ZtqOSOD3bHcYg+NdCQ@mail.gmail.com>
Message-ID: <CABqTJk8A6Hdyp7nhw+4QtJ=6m0j8V7tNuKx_FjObFHVmFqW_hw@mail.gmail.com>

Hi,
after some tests I see that the apostrophe is not necessary to be
escaped because it s not a special char.

Regards,


A.


2014-07-27 23:53 GMT+02:00 Andrea Peri <aperi2007 at gmail.com>:
> Hi, reading better the featurestyle specs,
> http://www.gdal.org/ogr_feature_style.html
> I'm relly not sure if is necessary to escape the apostrophe in the texts.
>
> A.
>
>
> 2014-07-27 21:59 GMT+02:00 Andrea Peri <aperi2007 at gmail.com>:
>> Hi,
>> I'm testing the featurestyle filed loaded on a spatialite from a set of dxf.
>>
>> When the dxf has a apostrophe char (')
>> it is loaded as is in the style field without an escape.
>>
>> As example, I have this situation:
>>
>> LABEL(f:"Arial",t:"'99",a:305,s:2.4g,c:#000000)
>>
>> Instead of
>> LABEL(f:"Arial",t:"\'99",a:305,s:2.4g,c:#000000)
>>
>> I test it with mapserver new styleitem feature.
>>
>> I see the
>> LABEL(f:"Arial",t:"'99",a:305,s:2.4g,c:#000000)
>>
>> give an error, instead the
>> LABEL(f:"Arial",t:"\'99",a:305,s:2.4g,c:#000000)
>>
>> Is correctly mapped.
>>
>> Is this (don't escaping apostrophe char ) a bug of gdal dxf driver ?
>>
>> Thx,
>>
>>
>> --
>> -----------------
>> Andrea Peri
>> . . . . . . . . .
>> qwerty ?????
>> -----------------
>
>
>
> --
> -----------------
> Andrea Peri
> . . . . . . . . .
> qwerty ?????
> -----------------



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From jacek.tomaka at hexagongeospatial.com  Mon Jul 28 19:28:19 2014
From: jacek.tomaka at hexagongeospatial.com (Tomaka, Jacek)
Date: Tue, 29 Jul 2014 02:28:19 +0000
Subject: [gdal-dev] GDAL_DEFAULT_WMS_CACHE_PATH ignored in GDAL 1.11
Message-ID: <3ED562F633B1AE46BF141E903F9813074F2C9649@ap-mbx3.ingrnet.com>

Hi,
Looks like the patch mentioned here https://trac.osgeo.org/gdal/ticket/4540 did not make fully make it to the repository.
Lines 61-62 of frmts\wms\gdalwmscache.cpp should have been removed.
Regards.

Jacek Tomaka
Software Engineer
T: +618 9217 3427
E: jacek.tomaka at hexagongeospatial.com

Hexagon Geospatial
c/o Intergraph Corporation Pty Ltd
2 Abbotsford Street, West Leederville
Perth, WA Australia 6007
hexagongeospatial.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140729/ae37a419/attachment.html>

From jacek.tomaka at hexagongeospatial.com  Mon Jul 28 19:52:52 2014
From: jacek.tomaka at hexagongeospatial.com (Tomaka, Jacek)
Date: Tue, 29 Jul 2014 02:52:52 +0000
Subject: [gdal-dev] GDAL_DEFAULT_WMS_CACHE_PATH ignored in GDAL 1.11
In-Reply-To: <3ED562F633B1AE46BF141E903F9813074F2C9649@ap-mbx3.ingrnet.com>
References: <3ED562F633B1AE46BF141E903F9813074F2C9649@ap-mbx3.ingrnet.com>
Message-ID: <3ED562F633B1AE46BF141E903F9813074F2C9689@ap-mbx3.ingrnet.com>

Also it does not look like WMS driver cleans the temp directory when it is done. Is it expected?
Regards.
Jacek Tomaka

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Tomaka, Jacek
Sent: Tuesday, 29 July 2014 10:28 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] GDAL_DEFAULT_WMS_CACHE_PATH ignored in GDAL 1.11

Hi,
Looks like the patch mentioned here https://trac.osgeo.org/gdal/ticket/4540 did not make fully make it to the repository.
Lines 61-62 of frmts\wms\gdalwmscache.cpp should have been removed.
Regards.

Jacek Tomaka
Software Engineer
T: +618 9217 3427
E: jacek.tomaka at hexagongeospatial.com<mailto:jacek.tomaka at hexagongeospatial.com>

Hexagon Geospatial
c/o Intergraph Corporation Pty Ltd
2 Abbotsford Street, West Leederville
Perth, WA Australia 6007
hexagongeospatial.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140729/357972de/attachment.html>

From cleo21drakos at gmail.com  Mon Jul 28 23:46:00 2014
From: cleo21drakos at gmail.com (Cleo Drakos)
Date: Tue, 29 Jul 2014 15:46:00 +0900
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in the
	same file?
Message-ID: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>

Hi GDAL Developers,

I have one GeoTIFF file with 2 bands. The data type is Byte. I want to
calculate (Band2-Band1)/(Band2+Band1).

But the following command provided a dark image:

gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0 --outfile outfile
--calc "(A-B)/(A+B)"

Does gdal_calc.py not calculate arithmetic with in the same file?

Thanks for your time.

cleo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140729/ecbcc602/attachment.html>

From etourigny.dev at gmail.com  Tue Jul 29 06:37:18 2014
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 29 Jul 2014 10:37:18 -0300
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in
 the same file?
In-Reply-To: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
Message-ID: <CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>

I am not sure, but you can do the following to make sure:

cp infile infile2
gdal_calc.py -A infile --A_band 1 -B infile2 --B_band 0 --outfile outfile
--calc "(A-B)/(A+B)"

Also, perhaps the extra comma in your command might be to blame "-B infile,"

Etienne


On Tue, Jul 29, 2014 at 3:46 AM, Cleo Drakos <cleo21drakos at gmail.com> wrote:

> Hi GDAL Developers,
>
> I have one GeoTIFF file with 2 bands. The data type is Byte. I want to
> calculate (Band2-Band1)/(Band2+Band1).
>
> But the following command provided a dark image:
>
> gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0 --outfile outfile
> --calc "(A-B)/(A+B)"
>
> Does gdal_calc.py not calculate arithmetic with in the same file?
>
> Thanks for your time.
>
> cleo
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140729/5d7b8e69/attachment.html>

From cleo21drakos at gmail.com  Tue Jul 29 07:04:04 2014
From: cleo21drakos at gmail.com (Cleo Drakos)
Date: Tue, 29 Jul 2014 23:04:04 +0900
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in
 the same file?
In-Reply-To: <CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
	<CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
Message-ID: <CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>

Thanks for your response.
I tried the followings:

gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
##I produced second file (b)as the copy of first(a)
a = 'D:\\a.tif'
b = 'D:\\b.tif'
outfile = 'D:\\result.tif'
expr = '(A-B)/(A+B)'
subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,'--B_band','0','--outfile',outfile,\
    '--calc',expr,'--type','Float32','--format','ENVI'],shell=True)
a,b,outfile = None, None,None

Unfortunately, resulted file is completely black.

I hope someone can help me.


On Tue, Jul 29, 2014 at 10:37 PM, Etienne Tourigny <etourigny.dev at gmail.com>
wrote:

> I am not sure, but you can do the following to make sure:
>
> cp infile infile2
> gdal_calc.py -A infile --A_band 1 -B infile2 --B_band 0 --outfile outfile
> --calc "(A-B)/(A+B)"
>
> Also, perhaps the extra comma in your command might be to blame "-B
> infile,"
>
> Etienne
>
>
> On Tue, Jul 29, 2014 at 3:46 AM, Cleo Drakos <cleo21drakos at gmail.com>
> wrote:
>
>> Hi GDAL Developers,
>>
>> I have one GeoTIFF file with 2 bands. The data type is Byte. I want to
>> calculate (Band2-Band1)/(Band2+Band1).
>>
>> But the following command provided a dark image:
>>
>> gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0 --outfile outfile
>> --calc "(A-B)/(A+B)"
>>
>> Does gdal_calc.py not calculate arithmetic with in the same file?
>>
>> Thanks for your time.
>>
>> cleo
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140729/93322117/attachment-0001.html>

From schut at sarvision.nl  Tue Jul 29 07:20:32 2014
From: schut at sarvision.nl (Vincent Schut)
Date: Tue, 29 Jul 2014 16:20:32 +0200
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in
 the same file?
In-Reply-To: <CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>	<CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
	<CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>
Message-ID: <53D7ADB0.6090407@sarvision.nl>

On 07/29/2014 04:04 PM, Cleo Drakos wrote:
> Thanks for your response.
> I tried the followings:
>
> gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
> ##I produced second file (b)as the copy of first(a)
> a = 'D:\\a.tif'
> b = 'D:\\b.tif'
> outfile = 'D:\\result.tif'
> expr = '(A-B)/(A+B)'
> subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,'--B_band','0','--outfile',outfile,\
> '--calc',expr,'--type','Float32','--format','ENVI'],shell=True)
> a,b,outfile = None, None,None
>
> Unfortunately, resulted file is completely black.
>
> I hope someone can help me.

I don't use gdal_calc myself, but I suppose the problem is the byte 
datatype. I would try to convert the input data to float32 first (use 
gdal_translate -ot Float32) and try again.

Best,
Vincent.

>
>
> On Tue, Jul 29, 2014 at 10:37 PM, Etienne Tourigny 
> <etourigny.dev at gmail.com <mailto:etourigny.dev at gmail.com>> wrote:
>
>     I am not sure, but you can do the following to make sure:
>
>     cp infile infile2
>     gdal_calc.py -A infile --A_band 1 -B infile2 --B_band 0 --outfile
>     outfile --calc "(A-B)/(A+B)"
>
>     Also, perhaps the extra comma in your command might be to blame
>     "-B infile,"
>
>     Etienne
>
>
>     On Tue, Jul 29, 2014 at 3:46 AM, Cleo Drakos
>     <cleo21drakos at gmail.com <mailto:cleo21drakos at gmail.com>> wrote:
>
>         Hi GDAL Developers,
>
>         I have one GeoTIFF file with 2 bands. The data type is Byte. I
>         want to calculate (Band2-Band1)/(Band2+Band1).
>
>         But the following command provided a dark image:
>
>         gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0
>         --outfile outfile --calc "(A-B)/(A+B)"
>
>         Does gdal_calc.py not calculate arithmetic with in the same file?
>
>         Thanks for your time.
>
>         cleo
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140729/d1c2719b/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Jul 29 09:53:08 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 29 Jul 2014 16:53:08 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Does_gdal=5Fcalc=2Epy_not_calculate_arithmet?=
	=?utf-8?q?ic_with_in_the_same_file=3F?=
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
	<CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
	<CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>
Message-ID: <loom.20140729T185206-511@post.gmane.org>

Cleo Drakos <cleo21drakos <at> gmail.com> writes:

> 
> Thanks for your response.I tried the followings:
> 
> 
> gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
> ##I produced second file (b)as the copy of first(a)
> 
> a = 'D:\\a.tif'
> b = 'D:\\b.tif'
> outfile = 'D:\\result.tif'
> expr = '(A-B)/(A+B)'
> subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,
'--B_band','0','--outfile',outfile,\
> 
> ? ? '--calc',expr,'--type','Float32','--format','ENVI'],shell=True) ?
> a,b,outfile = None, None,None
> 
> 
> Unfortunately, resulted file is completely black.
> 
> 
> I hope someone can help me.
Have you checked from the histogram that the result is totally black? I
could imagine that bands 1 (A) and 2 (B) can have values close to each 
other which makes that A-B is close to zero. That divided by A+B makes
the values even closer to zero and if such Float32 type image is opened 
in an image viewer without LUT stretch that could well appear as 
totally black. Forget all this if you have checked the histograms.

-Jukka Rahkonen-



From m.g.aschenbeck at gmail.com  Tue Jul 29 12:46:44 2014
From: m.g.aschenbeck at gmail.com (Michael Aschenbeck)
Date: Tue, 29 Jul 2014 13:46:44 -0600
Subject: [gdal-dev] "ESRI Shapefile" Driver Not Found
Message-ID: <CADGz_tJcroDt_6=QTxsTRja0NHazFx-M=c2MKvcPTGwCLesGJQ@mail.gmail.com>

Hello,

I'm having trouble creating a shapefile.  My problems are isolated to the
following c++ block:

    const char *pszDriverName = "ESRI Shapefile";
    GDALDriver *poDriver;
    GDALAllRegister();
    poDriver = GetGDALDriverManager()->GetDriverByName(pszDriverName );
    if( poDriver == NULL )
    {
        printf( "%s driver not available.\n", pszDriverName );
        exit( 1 );
    }

which enters the conditional since it cannot find the "ESRI Shapefile"
driver.

The funny thing is that this driver loads no problem with my Python
bindings.  Does anyone have any advice to help me out?

Thanks,
Mike
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140729/0b724bcb/attachment.html>

From kyle at pobox.com  Tue Jul 29 13:21:35 2014
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 29 Jul 2014 14:21:35 -0600
Subject: [gdal-dev] "ESRI Shapefile" Driver Not Found
In-Reply-To: <CADGz_tJcroDt_6=QTxsTRja0NHazFx-M=c2MKvcPTGwCLesGJQ@mail.gmail.com>
References: <CADGz_tJcroDt_6=QTxsTRja0NHazFx-M=c2MKvcPTGwCLesGJQ@mail.gmail.com>
Message-ID: <CAJ0mEz3B4rE+9d1fg_UOFdsxZYQ=+yaHLGsR9L8kwpXhNt4ngw@mail.gmail.com>

On Tue, Jul 29, 2014 at 1:46 PM, Michael Aschenbeck
<m.g.aschenbeck at gmail.com> wrote:
> Hello,
>
> I'm having trouble creating a shapefile.  My problems are isolated to the
> following c++ block:
>
>     const char *pszDriverName = "ESRI Shapefile";
>     GDALDriver *poDriver;
>     GDALAllRegister();
>     poDriver = GetGDALDriverManager()->GetDriverByName(pszDriverName );
>     if( poDriver == NULL )
>     {
>         printf( "%s driver not available.\n", pszDriverName );
>         exit( 1 );
>     }
>
> which enters the conditional since it cannot find the "ESRI Shapefile"
> driver.
>
> The funny thing is that this driver loads no problem with my Python
> bindings.  Does anyone have any advice to help me out?
>
> Thanks,
> Mike
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Michael,

What version of GDAL are you using?  2.0+ has a unified driver
manager, but in previous versions the vector drivers (such as ESRI
Shapefile) were OGR drivers.  The older documentation can be found
here:

http://gdal.org/1.11/index.html

OGR docs:

http://gdal.org/1.11/ogr/index.html

OGR tutorial:

http://gdal.org/1.11/ogr/ogr_apitut.html

The documentation at gdal.org represents the development version and
if you are using the that version(2.0), AFAIK your code would work
fine.

-- 
Kyle

From m.g.aschenbeck at gmail.com  Tue Jul 29 13:36:28 2014
From: m.g.aschenbeck at gmail.com (Michael Aschenbeck)
Date: Tue, 29 Jul 2014 14:36:28 -0600
Subject: [gdal-dev] "ESRI Shapefile" Driver Not Found
In-Reply-To: <CAJ0mEz3B4rE+9d1fg_UOFdsxZYQ=+yaHLGsR9L8kwpXhNt4ngw@mail.gmail.com>
References: <CADGz_tJcroDt_6=QTxsTRja0NHazFx-M=c2MKvcPTGwCLesGJQ@mail.gmail.com>
	<CAJ0mEz3B4rE+9d1fg_UOFdsxZYQ=+yaHLGsR9L8kwpXhNt4ngw@mail.gmail.com>
Message-ID: <CADGz_tJAbDHS_yTVUqVJx_32A2hxnECfV4vaw9CdyyOn2cYNUg@mail.gmail.com>

Thank you, I was following the tutorial for the newest version while I was
on a 1.1x version.  The links you supplied helped!



On Tue, Jul 29, 2014 at 2:21 PM, Kyle Shannon <kyle at pobox.com> wrote:

> On Tue, Jul 29, 2014 at 1:46 PM, Michael Aschenbeck
> <m.g.aschenbeck at gmail.com> wrote:
> > Hello,
> >
> > I'm having trouble creating a shapefile.  My problems are isolated to the
> > following c++ block:
> >
> >     const char *pszDriverName = "ESRI Shapefile";
> >     GDALDriver *poDriver;
> >     GDALAllRegister();
> >     poDriver = GetGDALDriverManager()->GetDriverByName(pszDriverName );
> >     if( poDriver == NULL )
> >     {
> >         printf( "%s driver not available.\n", pszDriverName );
> >         exit( 1 );
> >     }
> >
> > which enters the conditional since it cannot find the "ESRI Shapefile"
> > driver.
> >
> > The funny thing is that this driver loads no problem with my Python
> > bindings.  Does anyone have any advice to help me out?
> >
> > Thanks,
> > Mike
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> Michael,
>
> What version of GDAL are you using?  2.0+ has a unified driver
> manager, but in previous versions the vector drivers (such as ESRI
> Shapefile) were OGR drivers.  The older documentation can be found
> here:
>
> http://gdal.org/1.11/index.html
>
> OGR docs:
>
> http://gdal.org/1.11/ogr/index.html
>
> OGR tutorial:
>
> http://gdal.org/1.11/ogr/ogr_apitut.html
>
> The documentation at gdal.org represents the development version and
> if you are using the that version(2.0), AFAIK your code would work
> fine.
>
> --
> Kyle
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140729/8bc8bb58/attachment.html>

From cleo21drakos at gmail.com  Tue Jul 29 18:43:18 2014
From: cleo21drakos at gmail.com (Cleo Drakos)
Date: Wed, 30 Jul 2014 10:43:18 +0900
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in
 the same file?
In-Reply-To: <loom.20140729T185206-511@post.gmane.org>
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
	<CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
	<CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>
	<loom.20140729T185206-511@post.gmane.org>
Message-ID: <CAMorJ8HR_G+43DWC6wB3T9_zaSyfJw+zdyM1rH8+khZXTGUxqg@mail.gmail.com>

yes, I checked the histogram and the out image is completely black.

cleo


On Wed, Jul 30, 2014 at 1:53 AM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>
wrote:

> Cleo Drakos <cleo21drakos <at> gmail.com> writes:
>
> >
> > Thanks for your response.I tried the followings:
> >
> >
> > gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
> > ##I produced second file (b)as the copy of first(a)
> >
> > a = 'D:\\a.tif'
> > b = 'D:\\b.tif'
> > outfile = 'D:\\result.tif'
> > expr = '(A-B)/(A+B)'
> > subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,
> '--B_band','0','--outfile',outfile,\
> >
> >     '--calc',expr,'--type','Float32','--format','ENVI'],shell=True)
> > a,b,outfile = None, None,None
> >
> >
> > Unfortunately, resulted file is completely black.
> >
> >
> > I hope someone can help me.
> Have you checked from the histogram that the result is totally black? I
> could imagine that bands 1 (A) and 2 (B) can have values close to each
> other which makes that A-B is close to zero. That divided by A+B makes
> the values even closer to zero and if such Float32 type image is opened
> in an image viewer without LUT stretch that could well appear as
> totally black. Forget all this if you have checked the histograms.
>
> -Jukka Rahkonen-
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/c28df944/attachment.html>

From cleo21drakos at gmail.com  Tue Jul 29 19:06:12 2014
From: cleo21drakos at gmail.com (Cleo Drakos)
Date: Wed, 30 Jul 2014 11:06:12 +0900
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in
 the same file?
In-Reply-To: <53D7ADB0.6090407@sarvision.nl>
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
	<CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
	<CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>
	<53D7ADB0.6090407@sarvision.nl>
Message-ID: <CAMorJ8HPmJW9=SsiK_Y2XiEC_ivdPcyA8zKB2CFe-tx1KFitiw@mail.gmail.com>

Even if I converted the input file into Float 32 at first, the resulted
image is still totally black.

cleo


On Tue, Jul 29, 2014 at 11:20 PM, Vincent Schut <schut at sarvision.nl> wrote:

>  On 07/29/2014 04:04 PM, Cleo Drakos wrote:
>
> Thanks for your response.
> I tried the followings:
>
>  gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
> ##I produced second file (b)as the copy of first(a)
>  a = 'D:\\a.tif'
> b = 'D:\\b.tif'
> outfile = 'D:\\result.tif'
> expr = '(A-B)/(A+B)'
>
> subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,'--B_band','0','--outfile',outfile,\
>     '--calc',expr,'--type','Float32','--format','ENVI'],shell=True)
> a,b,outfile = None, None,None
>
>  Unfortunately, resulted file is completely black.
>
>  I hope someone can help me.
>
>
> I don't use gdal_calc myself, but I suppose the problem is the byte
> datatype. I would try to convert the input data to float32 first (use
> gdal_translate -ot Float32) and try again.
>
> Best,
> Vincent.
>
>
>
>
> On Tue, Jul 29, 2014 at 10:37 PM, Etienne Tourigny <
> etourigny.dev at gmail.com> wrote:
>
>> I am not sure, but you can do the following to make sure:
>>
>>  cp infile infile2
>>  gdal_calc.py -A infile --A_band 1 -B infile2 --B_band 0 --outfile
>> outfile --calc "(A-B)/(A+B)"
>>
>>  Also, perhaps the extra comma in your command might be to blame "-B
>> infile,"
>>
>>  Etienne
>>
>>
>>  On Tue, Jul 29, 2014 at 3:46 AM, Cleo Drakos <cleo21drakos at gmail.com>
>> wrote:
>>
>>>  Hi GDAL Developers,
>>>
>>> I have one GeoTIFF file with 2 bands. The data type is Byte. I want to
>>> calculate (Band2-Band1)/(Band2+Band1).
>>>
>>> But the following command provided a dark image:
>>>
>>> gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0 --outfile
>>> outfile --calc "(A-B)/(A+B)"
>>>
>>> Does gdal_calc.py not calculate arithmetic with in the same file?
>>>
>>> Thanks for your time.
>>>
>>> cleo
>>>
>>>  _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/16afba1c/attachment-0001.html>

From JPalmer at linz.govt.nz  Tue Jul 29 19:15:50 2014
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Wed, 30 Jul 2014 14:15:50 +1200
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in
 the same file?
In-Reply-To: <CAMorJ8HPmJW9=SsiK_Y2XiEC_ivdPcyA8zKB2CFe-tx1KFitiw@mail.gmail.com>
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
	<CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
	<CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>
	<53D7ADB0.6090407@sarvision.nl>
	<CAMorJ8HPmJW9=SsiK_Y2XiEC_ivdPcyA8zKB2CFe-tx1KFitiw@mail.gmail.com>
Message-ID: <C6B695652D5E6B4597E90C5734C0242621F37DCEE8@prdlsmmsg01.ad.linz.govt.nz>

Hi Cleo,

Just been dealing with this type of issue.

It?s likely that the byte datatype is overflowing.

Try something like:

--calc "(A.astype(int)-B.astype(int))/(A.astype(int)+B.astype(int))"

Actually you might only need to cast one of the bands from byte to int, so the syntax could be:

--calc "(A.astype(int)-B A.astype(int)+B)"

Cheers
Jeremy

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Cleo Drakos
Sent: Wednesday, 30 July 2014 2:06 p.m.
To: Vincent Schut
Cc: gdal-dev
Subject: Re: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in the same file?

Even if I converted the input file into Float 32 at first, the resulted image is still totally black.

cleo

On Tue, Jul 29, 2014 at 11:20 PM, Vincent Schut <schut at sarvision.nl<mailto:schut at sarvision.nl>> wrote:
On 07/29/2014 04:04 PM, Cleo Drakos wrote:

Thanks for your response.
I tried the followings:

gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
##I produced second file (b)as the copy of first(a)
a = 'D:\\a.tif'
b = 'D:\\b.tif'
outfile = 'D:\\result.tif'
expr = '(A-B)/(A+B)'
subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,'--B_band','0','--outfile',outfile,\
    '--calc',expr,'--type','Float32','--format','ENVI'],shell=True)
a,b,outfile = None, None,None

Unfortunately, resulted file is completely black.

I hope someone can help me.

I don't use gdal_calc myself, but I suppose the problem is the byte datatype. I would try to convert the input data to float32 first (use gdal_translate -ot Float32) and try again.

Best,
Vincent.




On Tue, Jul 29, 2014 at 10:37 PM, Etienne Tourigny <etourigny.dev at gmail.com<mailto:etourigny.dev at gmail.com>> wrote:
I am not sure, but you can do the following to make sure:

cp infile infile2
gdal_calc.py -A infile --A_band 1 -B infile2 --B_band 0 --outfile outfile --calc "(A-B)/(A+B)"

Also, perhaps the extra comma in your command might be to blame "-B infile,"

Etienne

On Tue, Jul 29, 2014 at 3:46 AM, Cleo Drakos <cleo21drakos at gmail.com<mailto:cleo21drakos at gmail.com>> wrote:
Hi GDAL Developers,

I have one GeoTIFF file with 2 bands. The data type is Byte. I want to calculate (Band2-Band1)/(Band2+Band1).

But the following command provided a dark image:

gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0 --outfile outfile --calc "(A-B)/(A+B)"

Does gdal_calc.py not calculate arithmetic with in the same file?

Thanks for your time.

cleo

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

http://lists.osgeo.org/mailman/listinfo/gdal-dev


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


________________________________
This message contains information, which may be in confidence and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/3ec1cb22/attachment.html>

From cleo21drakos at gmail.com  Tue Jul 29 19:50:01 2014
From: cleo21drakos at gmail.com (Cleo Drakos)
Date: Wed, 30 Jul 2014 11:50:01 +0900
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in
 the same file?
In-Reply-To: <C6B695652D5E6B4597E90C5734C0242621F37DCEE8@prdlsmmsg01.ad.linz.govt.nz>
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
	<CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
	<CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>
	<53D7ADB0.6090407@sarvision.nl>
	<CAMorJ8HPmJW9=SsiK_Y2XiEC_ivdPcyA8zKB2CFe-tx1KFitiw@mail.gmail.com>
	<C6B695652D5E6B4597E90C5734C0242621F37DCEE8@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <CAMorJ8GyNEO=GddWeiUB8opQoH7C6h9n8WMF5DwxSQrS16MZyw@mail.gmail.com>

Hello Jeremy

Thanks for your response.

I am still getting the completely black image.

The input image I am working with is here:

http://commondatastorage.googleapis.com/earthenginepartners-hansen/GFC2013/Hansen_GFC2013_last_00N_000E.tif




cleo


On Wed, Jul 30, 2014 at 11:15 AM, Jeremy Palmer <JPalmer at linz.govt.nz>
wrote:

>  Hi Cleo,
>
>
>
> Just been dealing with this type of issue.
>
>
>
> It?s likely that the byte datatype is overflowing.
>
>
>
> Try something like:
>
>
>
> --calc "(A.astype(int)-B.astype(int))/(A.astype(int)+B.astype(int))"
>
>
>
> Actually you might only need to cast one of the bands from byte to int, so
> the syntax could be:
>
>
>
> --calc "(A.astype(int)-B A.astype(int)+B)"
>
>
>
> Cheers
> Jeremy
>
>
>
> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *Cleo Drakos
> *Sent:* Wednesday, 30 July 2014 2:06 p.m.
> *To:* Vincent Schut
> *Cc:* gdal-dev
> *Subject:* Re: [gdal-dev] Does gdal_calc.py not calculate arithmetic with
> in the same file?
>
>
>
> Even if I converted the input file into Float 32 at first, the resulted
> image is still totally black.
>
>
>   cleo
>
>
>
> On Tue, Jul 29, 2014 at 11:20 PM, Vincent Schut <schut at sarvision.nl>
> wrote:
>
> On 07/29/2014 04:04 PM, Cleo Drakos wrote:
>
>  Thanks for your response.
>
> I tried the followings:
>
>
>
> gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
>
> ##I produced second file (b)as the copy of first(a)
>
> a = 'D:\\a.tif'
>
> b = 'D:\\b.tif'
>
> outfile = 'D:\\result.tif'
>
> expr = '(A-B)/(A+B)'
>
>
> subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,'--B_band','0','--outfile',outfile,\
>
>     '--calc',expr,'--type','Float32','--format','ENVI'],shell=True)
>
> a,b,outfile = None, None,None
>
>
>
> Unfortunately, resulted file is completely black.
>
>
>
> I hope someone can help me.
>
>
>
> I don't use gdal_calc myself, but I suppose the problem is the byte
> datatype. I would try to convert the input data to float32 first (use
> gdal_translate -ot Float32) and try again.
>
> Best,
> Vincent.
>
>
>
>
>
>
> On Tue, Jul 29, 2014 at 10:37 PM, Etienne Tourigny <
> etourigny.dev at gmail.com> wrote:
>
> I am not sure, but you can do the following to make sure:
>
>
>
> cp infile infile2
>
> gdal_calc.py -A infile --A_band 1 -B infile2 --B_band 0 --outfile outfile
> --calc "(A-B)/(A+B)"
>
>
>
> Also, perhaps the extra comma in your command might be to blame "-B
> infile,"
>
>
>
> Etienne
>
>
>
> On Tue, Jul 29, 2014 at 3:46 AM, Cleo Drakos <cleo21drakos at gmail.com>
> wrote:
>
>   Hi GDAL Developers,
>
> I have one GeoTIFF file with 2 bands. The data type is Byte. I want to
> calculate (Band2-Band1)/(Band2+Band1).
>
> But the following command provided a dark image:
>
> gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0 --outfile outfile
> --calc "(A-B)/(A+B)"
>
> Does gdal_calc.py not calculate arithmetic with in the same file?
>
> Thanks for your time.
>
> cleo
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
>
> gdal-dev mailing list
>
> gdal-dev at lists.osgeo.org
>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> ------------------------------
> This message contains information, which may be in confidence and may be
> subject to legal privilege. If you are not the intended recipient, you must
> not peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/9942c647/attachment-0001.html>

From cleo21drakos at gmail.com  Tue Jul 29 20:54:48 2014
From: cleo21drakos at gmail.com (Cleo Drakos)
Date: Wed, 30 Jul 2014 12:54:48 +0900
Subject: [gdal-dev] The documentation should be corrected, I think.
Message-ID: <CAMorJ8EQfseEvbh1njyzyGUOyRFgJQGu=KucBxEEDKVYsjZZJg@mail.gmail.com>

Dear all:

The problem I was facing has been solved. I detected that the problem was
with the band number '0'. Solution is: the band number starts from '1'.

But, the gdal documentation says that the default band number is '0'.
http://www.gdal.org/gdal_calc.html

The documentation should be corrected, I think.

The default band number is '1'.

Thanks.

cleo


On Wed, Jul 30, 2014 at 11:15 AM, Jeremy Palmer <JPalmer at linz.govt.nz>
wrote:

>  Hi Cleo,
>
>
>
> Just been dealing with this type of issue.
>
>
>
> It?s likely that the byte datatype is overflowing.
>
>
>
> Try something like:
>
>
>
> --calc "(A.astype(int)-B.astype(int))/(A.astype(int)+B.astype(int))"
>
>
>
> Actually you might only need to cast one of the bands from byte to int, so
> the syntax could be:
>
>
>
> --calc "(A.astype(int)-B A.astype(int)+B)"
>
>
>
> Cheers
> Jeremy
>
>
>
> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *Cleo Drakos
> *Sent:* Wednesday, 30 July 2014 2:06 p.m.
> *To:* Vincent Schut
> *Cc:* gdal-dev
> *Subject:* Re: [gdal-dev] Does gdal_calc.py not calculate arithmetic with
> in the same file?
>
>
>
> Even if I converted the input file into Float 32 at first, the resulted
> image is still totally black.
>
>
>   cleo
>
>
>
> On Tue, Jul 29, 2014 at 11:20 PM, Vincent Schut <schut at sarvision.nl>
> wrote:
>
> On 07/29/2014 04:04 PM, Cleo Drakos wrote:
>
>  Thanks for your response.
>
> I tried the followings:
>
>
>
> gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
>
> ##I produced second file (b)as the copy of first(a)
>
> a = 'D:\\a.tif'
>
> b = 'D:\\b.tif'
>
> outfile = 'D:\\result.tif'
>
> expr = '(A-B)/(A+B)'
>
>
> subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,'--B_band','0','--outfile',outfile,\
>
>     '--calc',expr,'--type','Float32','--format','ENVI'],shell=True)
>
> a,b,outfile = None, None,None
>
>
>
> Unfortunately, resulted file is completely black.
>
>
>
> I hope someone can help me.
>
>
>
> I don't use gdal_calc myself, but I suppose the problem is the byte
> datatype. I would try to convert the input data to float32 first (use
> gdal_translate -ot Float32) and try again.
>
> Best,
> Vincent.
>
>
>
>
>
>
> On Tue, Jul 29, 2014 at 10:37 PM, Etienne Tourigny <
> etourigny.dev at gmail.com> wrote:
>
> I am not sure, but you can do the following to make sure:
>
>
>
> cp infile infile2
>
> gdal_calc.py -A infile --A_band 1 -B infile2 --B_band 0 --outfile outfile
> --calc "(A-B)/(A+B)"
>
>
>
> Also, perhaps the extra comma in your command might be to blame "-B
> infile,"
>
>
>
> Etienne
>
>
>
> On Tue, Jul 29, 2014 at 3:46 AM, Cleo Drakos <cleo21drakos at gmail.com>
> wrote:
>
>   Hi GDAL Developers,
>
> I have one GeoTIFF file with 2 bands. The data type is Byte. I want to
> calculate (Band2-Band1)/(Band2+Band1).
>
> But the following command provided a dark image:
>
> gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0 --outfile outfile
> --calc "(A-B)/(A+B)"
>
> Does gdal_calc.py not calculate arithmetic with in the same file?
>
> Thanks for your time.
>
> cleo
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
>
> gdal-dev mailing list
>
> gdal-dev at lists.osgeo.org
>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> ------------------------------
> This message contains information, which may be in confidence and may be
> subject to legal privilege. If you are not the intended recipient, you must
> not peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/1c7b0cf9/attachment.html>

From cleo21drakos at gmail.com  Tue Jul 29 21:34:52 2014
From: cleo21drakos at gmail.com (Cleo Drakos)
Date: Wed, 30 Jul 2014 13:34:52 +0900
Subject: [gdal-dev] Does gdal_calc.py not calculate arithmetic with in
 the same file?
In-Reply-To: <C6B695652D5E6B4597E90C5734C0242621F37DCEE8@prdlsmmsg01.ad.linz.govt.nz>
References: <CAMorJ8F1bwe6sXzuq_b=qnJEwd2+T2wA76S0oH6sB9mZnUL1+w@mail.gmail.com>
	<CA+TxYvOJhsc9Cw+xZX1Ux0sx6LmVf-4sDEuhmN4goPqb2pqKsg@mail.gmail.com>
	<CAMorJ8EFQw-_84MbnaK5bBKp9jT4bh-55nbOMbaeiKzChiyosg@mail.gmail.com>
	<53D7ADB0.6090407@sarvision.nl>
	<CAMorJ8HPmJW9=SsiK_Y2XiEC_ivdPcyA8zKB2CFe-tx1KFitiw@mail.gmail.com>
	<C6B695652D5E6B4597E90C5734C0242621F37DCEE8@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <CAMorJ8Gh1S18ZVdktO3dLNE5Rz8RfPV=vtXhiYjKHTfVkLNGxA@mail.gmail.com>

Hi Jeremy


Your idea is grateful.


The following code worked for me:

--calc "(A.astype(float32)-B A.astype(float32)+B)"

cleo


On Wed, Jul 30, 2014 at 11:15 AM, Jeremy Palmer <JPalmer at linz.govt.nz>
wrote:

>  Hi Cleo,
>
>
>
> Just been dealing with this type of issue.
>
>
>
> It?s likely that the byte datatype is overflowing.
>
>
>
> Try something like:
>
>
>
> --calc "(A.astype(int)-B.astype(int))/(A.astype(int)+B.astype(int))"
>
>
>
> Actually you might only need to cast one of the bands from byte to int, so
> the syntax could be:
>
>
>
> --calc "(A.astype(int)-B A.astype(int)+B)"
>
>
>
> Cheers
> Jeremy
>
>
>
> *From:* gdal-dev-bounces at lists.osgeo.org [mailto:
> gdal-dev-bounces at lists.osgeo.org] *On Behalf Of *Cleo Drakos
> *Sent:* Wednesday, 30 July 2014 2:06 p.m.
> *To:* Vincent Schut
> *Cc:* gdal-dev
> *Subject:* Re: [gdal-dev] Does gdal_calc.py not calculate arithmetic with
> in the same file?
>
>
>
> Even if I converted the input file into Float 32 at first, the resulted
> image is still totally black.
>
>
>   cleo
>
>
>
> On Tue, Jul 29, 2014 at 11:20 PM, Vincent Schut <schut at sarvision.nl>
> wrote:
>
> On 07/29/2014 04:04 PM, Cleo Drakos wrote:
>
>  Thanks for your response.
>
> I tried the followings:
>
>
>
> gcalc = 'C:\\Users\\cleo\\Documents\\gdalpys\\gdal_calc.py'
>
> ##I produced second file (b)as the copy of first(a)
>
> a = 'D:\\a.tif'
>
> b = 'D:\\b.tif'
>
> outfile = 'D:\\result.tif'
>
> expr = '(A-B)/(A+B)'
>
>
> subprocess.call([sys.executable,gcalc,'-A',a,'--A_band','1','-B',b,'--B_band','0','--outfile',outfile,\
>
>     '--calc',expr,'--type','Float32','--format','ENVI'],shell=True)
>
> a,b,outfile = None, None,None
>
>
>
> Unfortunately, resulted file is completely black.
>
>
>
> I hope someone can help me.
>
>
>
> I don't use gdal_calc myself, but I suppose the problem is the byte
> datatype. I would try to convert the input data to float32 first (use
> gdal_translate -ot Float32) and try again.
>
> Best,
> Vincent.
>
>
>
>
>
>
> On Tue, Jul 29, 2014 at 10:37 PM, Etienne Tourigny <
> etourigny.dev at gmail.com> wrote:
>
> I am not sure, but you can do the following to make sure:
>
>
>
> cp infile infile2
>
> gdal_calc.py -A infile --A_band 1 -B infile2 --B_band 0 --outfile outfile
> --calc "(A-B)/(A+B)"
>
>
>
> Also, perhaps the extra comma in your command might be to blame "-B
> infile,"
>
>
>
> Etienne
>
>
>
> On Tue, Jul 29, 2014 at 3:46 AM, Cleo Drakos <cleo21drakos at gmail.com>
> wrote:
>
>   Hi GDAL Developers,
>
> I have one GeoTIFF file with 2 bands. The data type is Byte. I want to
> calculate (Band2-Band1)/(Band2+Band1).
>
> But the following command provided a dark image:
>
> gdal_calc.py -A infile --A_band 1 -B infile, --B_band 0 --outfile outfile
> --calc "(A-B)/(A+B)"
>
> Does gdal_calc.py not calculate arithmetic with in the same file?
>
> Thanks for your time.
>
> cleo
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
>
> gdal-dev mailing list
>
> gdal-dev at lists.osgeo.org
>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> ------------------------------
> This message contains information, which may be in confidence and may be
> subject to legal privilege. If you are not the intended recipient, you must
> not peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/9b8b6c0b/attachment-0001.html>

From nixanz at nixanz.com  Tue Jul 29 21:47:23 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Wed, 30 Jul 2014 14:47:23 +1000
Subject: [gdal-dev] styles .ofs and OGR_STBL_GetNextStyle()
Message-ID: <0A76B996-4E6F-40F7-82C7-F9DAD911E128@nixanz.com>

Hi Devs,

I'm just planning to convert my own 'in-house' drawing styles management to using the styles management built into OGR.  The documentation at http://www.gdal.org/ogr_feature_style.html suggests that styles can be in a '.ofs' file to be automatically associated with a data source of the same name as the .ofs file.

But how about if the .ofs file is a stand-alone file passed directly to OGR_STBL_LoadStyleTable()?  Eg, OGR_STBL_LoadStyleTable(table, "/path/to/styles.ofs")

In this case the first two calls to 'OGR_STBL_GetNextStyle(table)' will return the 'styles':

OFS-Version :  1.0
2014-07-30 14:38:36.392 Maps n Trax[47458:60b] StyleField :  "style"

Which are of course not styles at all, but part of the .ofs specification.

From this, I assume that files passed into OGR_STBL_LoadStyleTable() should in fact NOT be .ofs files, but merely plain text files with raw style strings only (and no .ofs specifications).

Is this correct?

Would there be any advantage on getting OGR_STBL_LoadStyleTable() to ignore the first line or two if it is an .ofs file and those two lines match the spec?

Cheers,
Nik.


OFS-Version: 1.0
StyleField: "style"

DefaultStyle: SYMBOL(c:#000000,id:"ogr-sym-3",s:5pt); PEN(c:#000000,w:2pt); BRUSH(fc:#80808080); LABEL(c:#000000,s:14pt,t:{title})

locality: LABEL(c:#000000,s:24pt,t:{title})
town: SYMBOL(c:#800000,id:"ogr-sym-3",s:10pt); LABEL(c:#800000,s:24pt,t:{title})
city: SYMBOL(c:#800000,id:"ogr-sym-3",s:15pt); LABEL(c:#800000,s:24pt,t:{title})
region: PEN(c:#000000,w:2pt); BRUSH(fc:#80808080); LABEL(c:#000000,s:28pt,t:{title})
country: PEN(c:#000000,w:2pt); BRUSH(fc:#80808080); LABEL(c:#000000,s:32pt,t:{title})

vegetation_low: BRUSH(fc:#A0F0A0); LABEL(c:#004000,s:18pt,t:{title})
vegetation_medium: BRUSH(fc:#80C080); LABEL(c:#004000,s:18pt,t:{title})
vegetation_high: BRUSH(fc:#008000); LABEL(c:#004000,s:18pt,t:{title})
water: SYMBOL(c:#000080,id:"ogr-sym-3",s:2pt); PEN(c:#000080,w:2pt,p:"18pt 8pt"); BRUSH(fc:#8080C0); LABEL(c:#000080,s:18pt,t:{title})
contour: PEN(c:#808080,w:1pt); LABEL(c:#808080,s:12pt,t:{elevation})

road_unsealed: PEN(c:#A08080,w:2pt,p:"10pt 6pt"); LABEL(c:#000000,s:18pt,t:{title})
road_minor: PEN(c:#A08080,w:2pt); LABEL(c:#000000,s:18pt,t:{title})
road_medium: PEN(c:#A00000,w:4pt); LABEL(c:#000000,s:18pt,t:{title})
road_major: PEN(c:#A00000,w:6pt); LABEL(c:#000000,s:18pt,t:{title})

route: PEN(c:#000000,w:2pt,p:"2pt 4pt"); LABEL(c:#000000,s:18pt,t:{title})
track: PEN(c:#000000,w:2pt,p:"10pt 6pt"); LABEL(c:#000000,s:18pt,t:{title})
rail: PEN(c:#000000,w:4pt,p:"2pt 5pt"); LABEL(c:#000000,s:18pt,t:{title})
cable: PEN(c:#000000,w:2pt,p:"1pt 6pt"); LABEL(c:#000000,s:18pt,t:{title})
ferry: PEN(c:#000080,w:2pt,p:"18pt 8pt"); LABEL(c:#000080,s:18pt,t:{title})


From beln1 at hotmail.com  Wed Jul 30 02:22:39 2014
From: beln1 at hotmail.com (=?iso-8859-1?B?QmVs6W4=?=)
Date: Wed, 30 Jul 2014 09:22:39 +0000
Subject: [gdal-dev] Problem with BIL files and GDAL
Message-ID: <DUB127-W855FB8F183D5FF3214EC87FBF90@phx.gbl>

Hello!
My name is Bel?n and i'm trying to convert a .bil file (.bil and .hdr) to a .png using gdal_translate, it seems to work fine, there are no error messages but when I open the .png file, I only have a big completely black square.
There's some special thing I should be doing? I'd appreciate any help, because I'm completely lost.

Thank you very much in advance.

Regards.

Bel?n Mu?oz.
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/3ef9dcd2/attachment.html>

From noreply+3731702900 at badoo.com  Wed Jul 30 02:23:00 2014
From: noreply+3731702900 at badoo.com (ImranR)
Date: Wed, 30 Jul 2014 09:23:00 +0000
Subject: [gdal-dev] =?utf-8?q?=E2=98=85_gdal-dev=2C_ImranR_left_a_message_?=
	=?utf-8?q?for_you?=
Message-ID: <20140730092300.3291711E849A1@cluster1019.monopost.com>

ImranR left a message for you

Its sender and content will be shown only to you and you can delete it at any time. You can instantly reply to it, using the message exchange system. To find out what was written to you, just follow this link:
http://eu1.badoo.com/0404493657/in/cdblAomaOVs/?lang_id=106&g=57-0-4&m=21&mid=53d8b97200000000006a004d03e92672011557660140


If clicking the links in this message does not work,
copy and paste them into the address bar of your browser.


This email is a part of delivering a message sent by ImranR on the system. If you received this email by mistake, please just ignore it. After a short time the message will be removed from the system.


Have fun!
The Badoo Team

You have received this email from Badoo Trading Limited (postal address below).
If you do not wish to receive further email communications from Badoo click here to opt out: https://eu1.badoo.com/impersonation.phtml?lang_id=106&email=gdal-dev%40lists.osgeo.org&block_code=1ad42f&m=21&mid=53d8b97200000000006a004d03e92672011557660140&g=0-0-4.
Badoo Trading Limited is a limited company registered in England and Wales
under CRN 7540255 with its registered office at Media Village, 131 - 151 Great Titchfield Street, London, W1W 5BB.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/82490452/attachment.html>

From daniele.romagnoli at geo-solutions.it  Wed Jul 30 03:20:09 2014
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Wed, 30 Jul 2014 12:20:09 +0200
Subject: [gdal-dev] Problem with BIL files and GDAL
In-Reply-To: <DUB127-W855FB8F183D5FF3214EC87FBF90@phx.gbl>
References: <DUB127-W855FB8F183D5FF3214EC87FBF90@phx.gbl>
Message-ID: <CAJaHrDwGSr5ah7geWN3k7pRQmPjSbYap6argk9ht23+d47=WUQ@mail.gmail.com>

Hi,
could you run a gdalinfo on your origin file and provide us the output?
Wondering if its datatype is float and a straight gdal_translate (without
scaling applied) truncate all values when going to Byte PNG.

Cheers,
Daniele

==
GeoServer Professional Services from the experts! Visit
http://goo.gl/NWWaa2 for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------


On Wed, Jul 30, 2014 at 11:22 AM, Bel?n <beln1 at hotmail.com> wrote:

> Hello!
> My name is Bel?n and i'm trying to convert a .bil file (.bil and .hdr) to
> a .png using gdal_translate, it seems to work fine, there are no error
> messages but when I open the .png file, I only have a big completely black
> square.
> There's some special thing I should be doing? I'd appreciate any help,
> because I'm completely lost.
>
> Thank you very much in advance.
>
> Regards.
>
> Bel?n Mu?oz.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/c71859e2/attachment.html>

From beln1 at hotmail.com  Wed Jul 30 03:26:29 2014
From: beln1 at hotmail.com (=?iso-8859-1?B?QmVs6W4=?=)
Date: Wed, 30 Jul 2014 10:26:29 +0000
Subject: [gdal-dev] Problem with BIL files and GDAL
In-Reply-To: <CAJaHrDwGSr5ah7geWN3k7pRQmPjSbYap6argk9ht23+d47=WUQ@mail.gmail.com>
References: <DUB127-W855FB8F183D5FF3214EC87FBF90@phx.gbl>,
	<CAJaHrDwGSr5ah7geWN3k7pRQmPjSbYap6argk9ht23+d47=WUQ@mail.gmail.com>
Message-ID: <DUB127-W80137947E756A9DEE9701CFBF90@phx.gbl>

Hi Daniele,
Thank you for your answer.
This is the output of gdalinfo:

Driver: EHdr/ESRI .hdr Labelled
Files: prueba.bil
          prueba.hdr
Size is 4000, 4000
Coordinate System is `'
Origin = (504815.000000000000000,4766395.000000000000000)
Pixel Size = (10.000000000000000,-10.000000000000000)
Corner Coordinates:
Upper Left  (  504815.000, 4766395.000)
Lower Left  (  504815.000, 4726395.000)
Upper Right (  544815.000, 4766395.000)
Lower Right (  544815.000, 4726395.000)
Center      (  524815.000, 4746395.000)
Band 1 Block=4000x1 Type=UInt16, ColorInterp=Undefined

Thank you again!!

Regards.
Bel?n Mu?oz.

From: daniele.romagnoli at geo-solutions.it
Date: Wed, 30 Jul 2014 12:20:09 +0200
Subject: Re: [gdal-dev] Problem with BIL files and GDAL
To: beln1 at hotmail.com
CC: gdal-dev at lists.osgeo.org

Hi,
could you run a gdalinfo on your origin file and provide us the output?
Wondering if its datatype is float and a straight gdal_translate (without scaling applied) truncate all values when going to Byte PNG.



Cheers,
Daniele
==

GeoServer Professional Services from the experts! Visit

http://goo.gl/NWWaa2 for more information.

==


Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it


http://twitter.com/geosolutions_it

-------------------------------------------------------



On Wed, Jul 30, 2014 at 11:22 AM, Bel?n <beln1 at hotmail.com> wrote:





Hello!
My name is Bel?n and i'm trying to convert a .bil file (.bil and .hdr) to a .png using gdal_translate, it seems to work fine, there are no error messages but when I open the .png file, I only have a big completely black square.


There's some special thing I should be doing? I'd appreciate any help, because I'm completely lost.

Thank you very much in advance.

Regards.

Bel?n Mu?oz.
 		 	   		  

_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/68c3344f/attachment-0001.html>

From daniele.romagnoli at geo-solutions.it  Wed Jul 30 03:58:44 2014
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Wed, 30 Jul 2014 12:58:44 +0200
Subject: [gdal-dev] Problem with BIL files and GDAL
In-Reply-To: <DUB127-W80137947E756A9DEE9701CFBF90@phx.gbl>
References: <DUB127-W855FB8F183D5FF3214EC87FBF90@phx.gbl>
	<CAJaHrDwGSr5ah7geWN3k7pRQmPjSbYap6argk9ht23+d47=WUQ@mail.gmail.com>
	<DUB127-W80137947E756A9DEE9701CFBF90@phx.gbl>
Message-ID: <CAJaHrDz++CfCADiEMQBmRo4s+ijkvGkH=m6stLbv42GjgpLSVw@mail.gmail.com>

Hi,
Since we are here, you could re-run gdalinfo -stats on your dataset. (Maybe
you see a black image due to a dynamic concentrated on low values).
Moreover you may consider using the "-scale" option on gdal_translate to
scale your values to byte or make sure to preserve the output type with the
option "-OT UInt16".
Honestly, I don't remember if PNG support 16 bits (But would say "yes") and
if the tool/browser/what else you will use to open it will show you
correctly.

Hope this helps.
Regards,
Daniele

==
GeoServer Professional Services from the experts! Visit
http://goo.gl/NWWaa2 for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------


On Wed, Jul 30, 2014 at 12:26 PM, Bel?n <beln1 at hotmail.com> wrote:

> Hi Daniele,
> Thank you for your answer.
> This is the output of gdalinfo:
>
> Driver: EHdr/ESRI .hdr Labelled
> Files: prueba.bil
>           prueba.hdr
> Size is 4000, 4000
> Coordinate System is `'
> Origin = (504815.000000000000000,4766395.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Corner Coordinates:
> Upper Left  (  504815.000, 4766395.000)
> Lower Left  (  504815.000, 4726395.000)
> Upper Right (  544815.000, 4766395.000)
> Lower Right (  544815.000, 4726395.000)
> Center      (  524815.000, 4746395.000)
> Band 1 Block=4000x1 Type=UInt16, ColorInterp=Undefined
>
> Thank you again!!
>
> Regards.
> Bel?n Mu?oz.
>
> ------------------------------
> From: daniele.romagnoli at geo-solutions.it
> Date: Wed, 30 Jul 2014 12:20:09 +0200
> Subject: Re: [gdal-dev] Problem with BIL files and GDAL
> To: beln1 at hotmail.com
> CC: gdal-dev at lists.osgeo.org
>
>
> Hi,
> could you run a gdalinfo on your origin file and provide us the output?
> Wondering if its datatype is float and a straight gdal_translate (without
> scaling applied) truncate all values when going to Byte PNG.
>
> Cheers,
> Daniele
>
> ==
> GeoServer Professional Services from the experts! Visit
> http://goo.gl/NWWaa2 for more information.
> ==
>
> Ing. Daniele Romagnoli
> Senior Software Engineer
>
> GeoSolutions S.A.S.
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313
> fax:      +39 0584 1660272
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
>
> On Wed, Jul 30, 2014 at 11:22 AM, Bel?n <beln1 at hotmail.com> wrote:
>
> Hello!
> My name is Bel?n and i'm trying to convert a .bil file (.bil and .hdr) to
> a .png using gdal_translate, it seems to work fine, there are no error
> messages but when I open the .png file, I only have a big completely black
> square.
> There's some special thing I should be doing? I'd appreciate any help,
> because I'm completely lost.
>
> Thank you very much in advance.
>
> Regards.
>
> Bel?n Mu?oz.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/337bf2b7/attachment.html>

From beln1 at hotmail.com  Wed Jul 30 04:23:14 2014
From: beln1 at hotmail.com (=?iso-8859-1?B?QmVs6W4=?=)
Date: Wed, 30 Jul 2014 11:23:14 +0000
Subject: [gdal-dev] Problem with BIL files and GDAL
In-Reply-To: <CAJaHrDz++CfCADiEMQBmRo4s+ijkvGkH=m6stLbv42GjgpLSVw@mail.gmail.com>
References: <DUB127-W855FB8F183D5FF3214EC87FBF90@phx.gbl>
	<CAJaHrDwGSr5ah7geWN3k7pRQmPjSbYap6argk9ht23+d47=WUQ@mail.gmail.com>,
	<DUB127-W80137947E756A9DEE9701CFBF90@phx.gbl>,
	<CAJaHrDz++CfCADiEMQBmRo4s+ijkvGkH=m6stLbv42GjgpLSVw@mail.gmail.com>
Message-ID: <DUB127-W544350BEB3828B9BA64DB8FBF90@phx.gbl>

Hi again,
I tried yesterday the option "-ot UInt16" but the result was the same. 

This is the result os executing "gdalinfo -stats":

Driver: EHdr/ESRI .hdr Labelled
Files: prueba.bil
       prueba.hdr
       prueba.stx
Size is 4000, 4000
Coordinate System is `'
Origin = (504815.000000000000000,4766395.000000000000000)
Pixel Size = (10.000000000000000,-10.000000000000000)
Corner Coordinates:
Upper Left  (  504815.000, 4766395.000)
Lower Left  (  504815.000, 4726395.000)
Upper Right (  544815.000, 4766395.000)
Lower Right (  544815.000, 4726395.000)
Center      (  524815.000, 4746395.000)
Band 1 Block=4000x1 Type=UInt16, ColorInterp=Undefined
  Min=87.000 Max=263.000
  Minimum=87.000, Maximum=263.000, Mean=220.726, StdDev=23.721

You gave me a great idea, I think PNG supports UInt16 but I'v tried using -ot BYTE  and it works. 
Thanks you very very much for your help. You saved my life!!

Regards. 
Bel?n Mu?oz.

From: daniele.romagnoli at geo-solutions.it
Date: Wed, 30 Jul 2014 12:58:44 +0200
Subject: Re: [gdal-dev] Problem with BIL files and GDAL
To: beln1 at hotmail.com
CC: gdal-dev at lists.osgeo.org

Hi,
Since we are here, you could re-run gdalinfo -stats on your dataset. (Maybe you see a black image due to a dynamic concentrated on low values).
Moreover you may consider using the "-scale" option on gdal_translate to scale your values to byte or make sure to preserve the output type with the option "-OT UInt16".


Honestly, I don't remember if PNG support 16 bits (But would say "yes") and if the tool/browser/what else you will use to open it will show you correctly.

Hope this helps.
Regards,

Daniele

==

GeoServer Professional Services from the experts! Visit

http://goo.gl/NWWaa2 for more information.

==


Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it


http://twitter.com/geosolutions_it

-------------------------------------------------------



On Wed, Jul 30, 2014 at 12:26 PM, Bel?n <beln1 at hotmail.com> wrote:





Hi Daniele,
Thank you for your answer.
This is the output of gdalinfo:

Driver: EHdr/ESRI .hdr Labelled
Files: prueba.bil
          prueba.hdr
Size is 4000, 4000
Coordinate System is `'


Origin = (504815.000000000000000,4766395.000000000000000)
Pixel Size = (10.000000000000000,-10.000000000000000)
Corner Coordinates:
Upper Left  (  504815.000, 4766395.000)
Lower Left  (  504815.000, 4726395.000)


Upper Right (  544815.000, 4766395.000)
Lower Right (  544815.000, 4726395.000)
Center      (  524815.000, 4746395.000)
Band 1 Block=4000x1 Type=UInt16, ColorInterp=Undefined

Thank you again!!

Regards.


Bel?n Mu?oz.

From: daniele.romagnoli at geo-solutions.it
Date: Wed, 30 Jul 2014 12:20:09 +0200


Subject: Re: [gdal-dev] Problem with BIL files and GDAL
To: beln1 at hotmail.com
CC: gdal-dev at lists.osgeo.org



Hi,
could you run a gdalinfo on your origin file and provide us the output?
Wondering if its datatype is float and a straight gdal_translate (without scaling applied) truncate all values when going to Byte PNG.





Cheers,
Daniele
==

GeoServer Professional Services from the experts! Visit

http://goo.gl/NWWaa2 for more information.

==


Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy
phone: +39 0584 962313


fax:      +39 0584 1660272

http://www.geo-solutions.it


http://twitter.com/geosolutions_it

-------------------------------------------------------



On Wed, Jul 30, 2014 at 11:22 AM, Bel?n <beln1 at hotmail.com> wrote:







Hello!
My name is Bel?n and i'm trying to convert a .bil file (.bil and .hdr) to a .png using gdal_translate, it seems to work fine, there are no error messages but when I open the .png file, I only have a big completely black square.




There's some special thing I should be doing? I'd appreciate any help, because I'm completely lost.

Thank you very much in advance.

Regards.

Bel?n Mu?oz.
 		 	   		  

_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev

 		 	   		  

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/009e0399/attachment.html>

From daniele.romagnoli at geo-solutions.it  Wed Jul 30 04:58:52 2014
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Wed, 30 Jul 2014 13:58:52 +0200
Subject: [gdal-dev] Problem with BIL files and GDAL
In-Reply-To: <DUB127-W544350BEB3828B9BA64DB8FBF90@phx.gbl>
References: <DUB127-W855FB8F183D5FF3214EC87FBF90@phx.gbl>
	<CAJaHrDwGSr5ah7geWN3k7pRQmPjSbYap6argk9ht23+d47=WUQ@mail.gmail.com>
	<DUB127-W80137947E756A9DEE9701CFBF90@phx.gbl>
	<CAJaHrDz++CfCADiEMQBmRo4s+ijkvGkH=m6stLbv42GjgpLSVw@mail.gmail.com>
	<DUB127-W544350BEB3828B9BA64DB8FBF90@phx.gbl>
Message-ID: <CAJaHrDwh+VnEVZXLsMj7K2PB4HnjR-AyiKq2L4RgHEnyFqXwZQ@mail.gmail.com>

On Wed, Jul 30, 2014 at 1:23 PM, Bel?n <beln1 at hotmail.com> wrote:

> Hi again,
> I tried yesterday the option "-ot UInt16" but the result was the same.
>
> This is the result os executing "gdalinfo -stats":
>
>
> Driver: EHdr/ESRI .hdr Labelled
> Files: prueba.bil
>        prueba.hdr
>        prueba.stx
>
> Size is 4000, 4000
> Coordinate System is `'
> Origin = (504815.000000000000000,4766395.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Corner Coordinates:
> Upper Left  (  504815.000, 4766395.000)
> Lower Left  (  504815.000, 4726395.000)
> Upper Right (  544815.000, 4766395.000)
> Lower Right (  544815.000, 4726395.000)
> Center      (  524815.000, 4746395.000)
> Band 1 Block=4000x1 Type=UInt16, ColorInterp=Undefined
>   Min=87.000 Max=263.000
>   Minimum=87.000, Maximum=263.000, Mean=220.726, StdDev=23.721
>
> You gave me a great idea, I think PNG supports UInt16 but I'v tried using
> -ot BYTE  and it works.
> Thanks you very very much for your help. You saved my life!!
>

Cool!
Note that using -ot BYTE without some scaling may truncate your values: max
= 263 which is greater than 255 (the max byte you can represent)

Cheers,
Daniele

>
> Regards.
> Bel?n Mu?oz.
>
> ------------------------------
> From: daniele.romagnoli at geo-solutions.it
> Date: Wed, 30 Jul 2014 12:58:44 +0200
>
> Subject: Re: [gdal-dev] Problem with BIL files and GDAL
> To: beln1 at hotmail.com
> CC: gdal-dev at lists.osgeo.org
>
> Hi,
> Since we are here, you could re-run gdalinfo -stats on your dataset.
> (Maybe you see a black image due to a dynamic concentrated on low values).
> Moreover you may consider using the "-scale" option on gdal_translate to
> scale your values to byte or make sure to preserve the output type with the
> option "-OT UInt16".
> Honestly, I don't remember if PNG support 16 bits (But would say "yes")
> and if the tool/browser/what else you will use to open it will show you
> correctly.
>
> Hope this helps.
> Regards,
> Daniele
>
> ==
> GeoServer Professional Services from the experts! Visit
> http://goo.gl/NWWaa2 for more information.
> ==
>
> Ing. Daniele Romagnoli
> Senior Software Engineer
>
> GeoSolutions S.A.S.
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313
> fax:      +39 0584 1660272
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
>
> On Wed, Jul 30, 2014 at 12:26 PM, Bel?n <beln1 at hotmail.com> wrote:
>
> Hi Daniele,
> Thank you for your answer.
> This is the output of gdalinfo:
>
> Driver: EHdr/ESRI .hdr Labelled
> Files: prueba.bil
>           prueba.hdr
> Size is 4000, 4000
> Coordinate System is `'
> Origin = (504815.000000000000000,4766395.000000000000000)
> Pixel Size = (10.000000000000000,-10.000000000000000)
> Corner Coordinates:
> Upper Left  (  504815.000, 4766395.000)
> Lower Left  (  504815.000, 4726395.000)
> Upper Right (  544815.000, 4766395.000)
> Lower Right (  544815.000, 4726395.000)
> Center      (  524815.000, 4746395.000)
> Band 1 Block=4000x1 Type=UInt16, ColorInterp=Undefined
>
> Thank you again!!
>
> Regards.
> Bel?n Mu?oz.
>
> ------------------------------
> From: daniele.romagnoli at geo-solutions.it
> Date: Wed, 30 Jul 2014 12:20:09 +0200
> Subject: Re: [gdal-dev] Problem with BIL files and GDAL
> To: beln1 at hotmail.com
> CC: gdal-dev at lists.osgeo.org
>
>
> Hi,
> could you run a gdalinfo on your origin file and provide us the output?
> Wondering if its datatype is float and a straight gdal_translate (without
> scaling applied) truncate all values when going to Byte PNG.
>
> Cheers,
> Daniele
>
> ==
> GeoServer Professional Services from the experts! Visit
> http://goo.gl/NWWaa2 for more information.
> ==
>
> Ing. Daniele Romagnoli
> Senior Software Engineer
>
> GeoSolutions S.A.S.
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313
> fax:      +39 0584 1660272
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
>
> On Wed, Jul 30, 2014 at 11:22 AM, Bel?n <beln1 at hotmail.com> wrote:
>
> Hello!
> My name is Bel?n and i'm trying to convert a .bil file (.bil and .hdr) to
> a .png using gdal_translate, it seems to work fine, there are no error
> messages but when I open the .png file, I only have a big completely black
> square.
> There's some special thing I should be doing? I'd appreciate any help,
> because I'm completely lost.
>
> Thank you very much in advance.
>
> Regards.
>
> Bel?n Mu?oz.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/061986d4/attachment-0001.html>

From alex.jong0019 at gmail.com  Wed Jul 30 05:23:55 2014
From: alex.jong0019 at gmail.com (00darki)
Date: Wed, 30 Jul 2014 05:23:55 -0700 (PDT)
Subject: [gdal-dev] Problem with .asc files
Message-ID: <1406723035046-5154189.post@n6.nabble.com>

Hi everyone !
I've a problem with gdal, it doesn't recognise my files with .asc
extensions.

*>gdalinfo N42W00.asc
ERROR 4: 'N42W00.asc' not recognised as a supported file format.

gdalinfo failed - unable to open 'N42W00.asc'.*

However, the gdal driver is presnt :

*>gdalinfo --formats | find "ASC"
  AAIGrid (rwv): Arc/Info ASCII Grid
  GRASSASCIIGrid (rov): GRASS ASCII Grid
  GSAG (rwv): Golden Software ASCII Grid (.grd)
  USGSDEM (rwv): USGS Optional ASCII DEM (and CDED)
  XYZ (rwv): ASCII Gridded XYZ*

And this files are well formated :

*W:12.000000 E:13.000000 S:38.000000 N:39.000000 grid:1.000000 
cols:61 rows:61 endian:10203 min:-10.000000 max:3211.000244

 2381.00 2391.00 2416.00 2450.00 2498.00 2537.00 2560.00 2579.00 2557.00
2404.00
 2273.00 2208.00 2164.00 2214.00 2210.00 2242.00 2292.00 2329.00 2362.00
2378.00
...............*

Thank you for any help ;)



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Problem-with-asc-files-tp5154189.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From pratap.chelamilla at amigooptima.in  Wed Jul 30 05:28:23 2014
From: pratap.chelamilla at amigooptima.in (pratap chelamilla)
Date: Wed, 30 Jul 2014 05:28:23 -0700 (PDT)
Subject: [gdal-dev] Unable to identify feature at selected position with
 gdal.1.11 with geos-3.4.2
Message-ID: <1406723303286-5154190.post@n6.nabble.com>

Hi ,

Unable to identify feature at selected Position,Earlier Version of gdal 1.9
with geos-3.1.1 Working fine, But I have build the newer version gdal-1.11
with geos-.3.4.2, It is identifying the feature but not exactly at the same
place, it is showing feature from different position.


There's some special thing I should be doing? I'd appreciate any help.

Thank you very much in advance.

GDAL_VER='1.11.0'
GDAL_VERSION_MAJOR='1'
GDAL_VERSION_MINOR='11'
GDAL_VERSION_REV='0'
GEOS_CFLAGS='-I/d/gdal/geos-3.4.2_build/include'
GEOS_CONFIG='/d/gdal/geos-3.4.2_build/bin/geos-config'
GEOS_LIBS='-L/d/gdal/geos-3.4.2_build/lib -lgeos_c'



-- 
Regards,
Pratap.



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Unable-to-identify-feature-at-selected-position-with-gdal-1-11-with-geos-3-4-2-tp5154190.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From mohammedrashadkm at gmail.com  Wed Jul 30 06:04:42 2014
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Wed, 30 Jul 2014 15:04:42 +0200
Subject: [gdal-dev] GDAL High dynamic range images
Message-ID: <CANNqv9eKcc=9vOhNS_u2Dg9rnVw8z5VP8EF4i=QtKx29j_OACg@mail.gmail.com>

Hello all,


Is it possible to read high dynamic range files using GDAL?

$ gdalinfo ./memorial.hdr
ERROR 4: `./memorial.hdr' not recognised as a supported file format.

gdalinfo failed - unable to open './memorial.hdr'


gdal installed from standard Fedora 20 x86_64 repository

gdal-config --version
1.10.1

 gdal-config --formats
gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem jdem
envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis rmf
leveller sgi srtmhgt idrisi gsg ingr ers jaxapalsar dimap gff cosar pds
adrg coasp tsx terragen blx msgn til r northwood saga xyz hf2
kmlsuperoverlay ctg e00grid zmap ngsgeoid iris map webp wcs wms dods grib
jpeg2000 netcdf hdf5 hdf4 gif jpeg gta png pcraster fits rik ozi pdf
rasterlite mbtiles postgisraster jpegls arg

-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140730/cbe60f49/attachment.html>

From landa.martin at gmail.com  Wed Jul 30 09:44:37 2014
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 30 Jul 2014 18:44:37 +0200
Subject: [gdal-dev] gdal gml driver field type
In-Reply-To: <CA+Ei1Oe3bGcboN2mGCegJS96Q4uqoZXmdRNKyER9acKjGGzfHQ@mail.gmail.com>
References: <CA+Ei1OdgPmK8O3NTjUVHs-Ot96sYMwXGXRSbnF9qZdXmogsE+w@mail.gmail.com>
	<201407242149.51907.even.rouault@mines-paris.org>
	<CA+Ei1Oe3bGcboN2mGCegJS96Q4uqoZXmdRNKyER9acKjGGzfHQ@mail.gmail.com>
Message-ID: <CA+Ei1OfsLmhfP1NTceMQahv6bVWjS+nTiNsb49K7Xcb=HHYoKA@mail.gmail.com>

Hi Even,

2014-07-25 11:44 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

>> OGR integers are only 32 bit wide for now. There's a draft RFC about
>> introducing 64 bit integers. Pending from being complemented and implemented.

btw, [1] any idea if somebody is working on that? Thanks, Martin

[1] http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64

-- 
Martin Landa * http://geo.fsv.cvut.cz/gwiki/Landa

From chaitanya.ch at gmail.com  Wed Jul 30 21:56:22 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 31 Jul 2014 10:26:22 +0530
Subject: [gdal-dev] Unable to identify feature at selected position with
 gdal.1.11 with geos-3.4.2
In-Reply-To: <1406723303286-5154190.post@n6.nabble.com>
References: <1406723303286-5154190.post@n6.nabble.com>
Message-ID: <CAMKgpObezz1b=6gHVn-10HnwsYgx-HMDgDzbkRPWJe2YobUnmA@mail.gmail.com>

Pratap,

Can you provide a code snippet? Is this happening for every data source?
How far is the other feature? Is the distance consistent?


On Wed, Jul 30, 2014 at 5:58 PM, pratap chelamilla <
pratap.chelamilla at amigooptima.in> wrote:

> Hi ,
>
> Unable to identify feature at selected Position,Earlier Version of gdal 1.9
> with geos-3.1.1 Working fine, But I have build the newer version gdal-1.11
> with geos-.3.4.2, It is identifying the feature but not exactly at the same
> place, it is showing feature from different position.
>
>
> There's some special thing I should be doing? I'd appreciate any help.
>
> Thank you very much in advance.
>
> GDAL_VER='1.11.0'
> GDAL_VERSION_MAJOR='1'
> GDAL_VERSION_MINOR='11'
> GDAL_VERSION_REV='0'
> GEOS_CFLAGS='-I/d/gdal/geos-3.4.2_build/include'
> GEOS_CONFIG='/d/gdal/geos-3.4.2_build/bin/geos-config'
> GEOS_LIBS='-L/d/gdal/geos-3.4.2_build/lib -lgeos_c'
>
>
>
> --
> Regards,
> Pratap.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.x6.nabble.com/Unable-to-identify-feature-at-selected-position-with-gdal-1-11-with-geos-3-4-2-tp5154190.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140731/29d81be0/attachment.html>

From pratap.chelamilla at amigooptima.in  Wed Jul 30 22:44:35 2014
From: pratap.chelamilla at amigooptima.in (Pratap Chelamilla)
Date: Thu, 31 Jul 2014 11:14:35 +0530
Subject: [gdal-dev] Unable to identify feature at selected position with
 gdal.1.11 with geos-3.4.2
In-Reply-To: <CAMKgpObezz1b=6gHVn-10HnwsYgx-HMDgDzbkRPWJe2YobUnmA@mail.gmail.com>
References: <1406723303286-5154190.post@n6.nabble.com>
	<CAMKgpObezz1b=6gHVn-10HnwsYgx-HMDgDzbkRPWJe2YobUnmA@mail.gmail.com>
Message-ID: <CAOv6Tka8r5xEteA-xZ36dPQnNmQRpS54PS=0Qrdmaeny2fCc_A@mail.gmail.com>

Hi Chaitanya,

yes, this is happening for every data source,


    OGRFeature* feature = poLayer->GetFeature(shapeList[loop]);
           OGRGeometry* geometry = feature->GetGeometryRef();
            if (cordinateTransform)
                geometry->transform(cordinateTransform);
            OGRGeometry* geom = point->Buffer(tDelta);

*            if(geometry->Contains(geom)|| geometry->Intersects(geom)||
geometry->Equals(geom))*
*            {*
*                identifiedRecordIndex = feature->GetFID();*
*            }*


It is working with the earlier version of gdal,After checking the condition
it is not going in.



On Thu, Jul 31, 2014 at 10:26 AM, Chaitanya kumar CH <chaitanya.ch at gmail.com
> wrote:

> Pratap,
>
> Can you provide a code snippet? Is this happening for every data source?
> How far is the other feature? Is the distance consistent?
>
>
> On Wed, Jul 30, 2014 at 5:58 PM, pratap chelamilla <
> pratap.chelamilla at amigooptima.in> wrote:
>
>> Hi ,
>>
>> Unable to identify feature at selected Position,Earlier Version of gdal
>> 1.9
>> with geos-3.1.1 Working fine, But I have build the newer version gdal-1.11
>> with geos-.3.4.2, It is identifying the feature but not exactly at the
>> same
>> place, it is showing feature from different position.
>>
>>
>> There's some special thing I should be doing? I'd appreciate any help.
>>
>> Thank you very much in advance.
>>
>> GDAL_VER='1.11.0'
>> GDAL_VERSION_MAJOR='1'
>> GDAL_VERSION_MINOR='11'
>> GDAL_VERSION_REV='0'
>> GEOS_CFLAGS='-I/d/gdal/geos-3.4.2_build/include'
>> GEOS_CONFIG='/d/gdal/geos-3.4.2_build/bin/geos-config'
>> GEOS_LIBS='-L/d/gdal/geos-3.4.2_build/lib -lgeos_c'
>>
>>
>>
>> --
>> Regards,
>> Pratap.
>>
>>
>>
>> --
>> View this message in context:
>> http://osgeo-org.1560.x6.nabble.com/Unable-to-identify-feature-at-selected-position-with-gdal-1-11-with-geos-3-4-2-tp5154190.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Regards,
Pratap.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140731/acd58c0f/attachment.html>

From chaitanya.ch at gmail.com  Thu Jul 31 02:43:01 2014
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 31 Jul 2014 15:13:01 +0530
Subject: [gdal-dev] Unable to identify feature at selected position with
 gdal.1.11 with geos-3.4.2
In-Reply-To: <CAOv6TkaSoSGo_fAsTSMkUw9mk9nG=V6BiSeNtHWkz4XhoN4mJw@mail.gmail.com>
References: <1406723303286-5154190.post@n6.nabble.com>
	<CAMKgpObezz1b=6gHVn-10HnwsYgx-HMDgDzbkRPWJe2YobUnmA@mail.gmail.com>
	<CAOv6Tka8r5xEteA-xZ36dPQnNmQRpS54PS=0Qrdmaeny2fCc_A@mail.gmail.com>
	<CAMKgpObk+0L1gcAb8L=8XA2RnZ5XDE9iaQgbHL=kYMkHaOW2uA@mail.gmail.com>
	<CAOv6TkaSoSGo_fAsTSMkUw9mk9nG=V6BiSeNtHWkz4XhoN4mJw@mail.gmail.com>
Message-ID: <CAMKgpObsvFopzjiQjVKiqFEZ3h8AwR2g2eev7e0ZNw6mzncYEg@mail.gmail.com>

Pratap,

Obviously only the first of the five polygons should be identified. I
tested with postgis using geos with version "3.4.2-CAPI-1.8.2 r3921".

So, the issue is probably not with geos. Please tell me if you find
any solution to the issue.


On Thu, Jul 31, 2014 at 1:51 PM, Pratap Chelamilla
<pratap.chelamilla at amigooptima.in> wrote:
> Hi Chaitanya,
>
> 82.4626 23.0721 0.00202492
>
>
> geometry->exportToWkt(&aftertrans)
>
> aftertrans POLYGON ((82.123893241937822
> 23.126845863962984,82.381596352429924 23.475093310573939,82.646264411854261
> 23.259179893675146,82.715913901176449 22.813423162013123,82.388561301362145
> 22.820388110945341,82.388561301362145 22.820388110945341,82.123893241937822
> 23.126845863962984))
>
>
> geometry->exportToWkt(&aftertrans)
>
> aftertrans POLYGON ((83.516883028381642
> 22.653229336572082,83.886025321789262 22.778598417352029,84.192483074806901
> 22.096033421994552,83.844235628195946 22.033348881604581,83.816375832467074
> 22.054243728401239,83.516883028381642 22.653229336572082))
>
>
> geometry->exportToWkt(&aftertrans)
>
> aftertrans POLYGON ((83.379917111984923
> 23.359672759378359,83.685680326555683 23.373847213033955,83.701879702162074
> 23.361697681329158,83.560135165606098 23.16933009600319,83.333343907116543
> 23.140981188691995,83.379917111984923 23.359672759378359))
>
>
> geometry->exportToWkt(&aftertrans)
>
> aftertrans POLYGON ((82.748141463335443
> 22.592227340025289,83.064029287660176 22.772445393646457,83.185524604708164
> 22.569953198566491,83.084278507168179 22.357336393732528,82.729917165778232
> 22.367461003486525,82.748141463335443 22.592227340025289))
>
>
> geometry->exportToWkt(&aftertrans)
>
> aftertrans POLYGON ((82.814963887711826
> 23.064034154561607,83.185524604708164 23.151105798445993,83.213873512019362
> 22.991136964332821,82.997206863283793 22.962788057021626,82.997206863283793
> 22.962788057021626,82.814963887711826 23.064034154561607))
>
>
> selected Feature 5
>
>
>
> If i select any feature it is selecting the last created feature i.e feature
> 5.
>
>
>
>
>
>
>
>
>
>
>
>
>
> On Thu, Jul 31, 2014 at 11:42 AM, Chaitanya kumar CH
> <chaitanya.ch at gmail.com> wrote:
>>
>> Pratap,
>> Provide the EWKT of a set of geometry(after transform) and geom that are
>> failing.
>>
>>
>> On Thu, Jul 31, 2014 at 11:14 AM, Pratap Chelamilla
>> <pratap.chelamilla at amigooptima.in> wrote:
>>>
>>> Hi Chaitanya,
>>>
>>> yes, this is happening for every data source,
>>>
>>>
>>>     OGRFeature* feature = poLayer->GetFeature(shapeList[loop]);
>>>            OGRGeometry* geometry = feature->GetGeometryRef();
>>>             if (cordinateTransform)
>>>                 geometry->transform(cordinateTransform);
>>>             OGRGeometry* geom = point->Buffer(tDelta);
>>>
>>>             if(geometry->Contains(geom)|| geometry->Intersects(geom)||
>>> geometry->Equals(geom))
>>>             {
>>>                 identifiedRecordIndex = feature->GetFID();
>>>             }
>>>
>>>
>>> It is working with the earlier version of gdal,After checking the
>>> condition it is not going in.
>>>
>>>
>>>
>>> On Thu, Jul 31, 2014 at 10:26 AM, Chaitanya kumar CH
>>> <chaitanya.ch at gmail.com> wrote:
>>>>
>>>> Pratap,
>>>>
>>>> Can you provide a code snippet? Is this happening for every data source?
>>>> How far is the other feature? Is the distance consistent?
>>>>
>>>>
>>>> On Wed, Jul 30, 2014 at 5:58 PM, pratap chelamilla
>>>> <pratap.chelamilla at amigooptima.in> wrote:
>>>>>
>>>>> Hi ,
>>>>>
>>>>> Unable to identify feature at selected Position,Earlier Version of gdal
>>>>> 1.9
>>>>> with geos-3.1.1 Working fine, But I have build the newer version
>>>>> gdal-1.11
>>>>> with geos-.3.4.2, It is identifying the feature but not exactly at the
>>>>> same
>>>>> place, it is showing feature from different position.
>>>>>
>>>>>
>>>>> There's some special thing I should be doing? I'd appreciate any help.
>>>>>
>>>>> Thank you very much in advance.
>>>>>
>>>>> GDAL_VER='1.11.0'
>>>>> GDAL_VERSION_MAJOR='1'
>>>>> GDAL_VERSION_MINOR='11'
>>>>> GDAL_VERSION_REV='0'
>>>>> GEOS_CFLAGS='-I/d/gdal/geos-3.4.2_build/include'
>>>>> GEOS_CONFIG='/d/gdal/geos-3.4.2_build/bin/geos-config'
>>>>> GEOS_LIBS='-L/d/gdal/geos-3.4.2_build/lib -lgeos_c'
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> Regards,
>>>>> Pratap.
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> View this message in context:
>>>>> http://osgeo-org.1560.x6.nabble.com/Unable-to-identify-feature-at-selected-position-with-gdal-1-11-with-geos-3-4-2-tp5154190.html
>>>>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Best regards,
>>>> Chaitanya kumar CH.
>>>>
>>>> +91-9494447584
>>>> 17.2416N 80.1426E
>>>
>>>
>>>
>>>
>>> --
>>> Regards,
>>> Pratap.
>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>
>
>
>
> --
> Regards,
> Pratap.



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

From JLiu at eris.ca  Thu Jul 31 07:46:36 2014
From: JLiu at eris.ca (Liu, Jian)
Date: Thu, 31 Jul 2014 10:46:36 -0400
Subject: [gdal-dev] convert USGS Topo GeoPDF to GeoTiff, file size
Message-ID: <6EA4EFC234788744A8304EE0D4B8AF986B5B6B58CB@bigtorex01>

Hello,

I try to use GDAL to convert USGS Topo geopdfs to Geotiff format. I have the following command:

gdalwarp geo.pdf geo.tif -crop_to_cutline -cutline C:\JIANTestFolder\cutline.csv -overwrite --config GDAL_CACHEMAX 500 -wm 500 --config GDAL_PDF_LAYERS_OFF Projection_and_Grids --config GDAL_PDF_DPI 508 -co "TILED=YES" -co "TFW=YES" -co "COMPRESS=JPEG" -co "PHOTOMETRIC=YCBCR"

I want to maintain the image quality while keeping the file to a minimal size. But my output .tif is about twice as big as the input pdf (19.5M vs. 11.9M)  -- the output dpi (GDAL_PDF_DPI=508) is set based on the metadata information in the geopdf. I read somewhere that pdf just stores image "as it is", and I am wondering how come my geotiff is twice as big, even with the jpeg compression with the YCBCR option? Is it still possible to reduce its size?

Here is the geopdf I use:    http://ims.er.usgs.gov/gda_services/download?item_id=5998960

I've searched the mail archive and couldn't find anything relevant. I appreciate any answers or suggestions about converting geopdf to geotiffs. Thank you!

Best regards,
Jian


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20140731/46a3b974/attachment.html>

From jukka.rahkonen at mmmtike.fi  Thu Jul 31 10:03:34 2014
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 31 Jul 2014 17:03:34 +0000 (UTC)
Subject: [gdal-dev] convert USGS Topo GeoPDF to GeoTiff, file size
References: <6EA4EFC234788744A8304EE0D4B8AF986B5B6B58CB@bigtorex01>
Message-ID: <loom.20140731T185135-749@post.gmane.org>

Liu, Jian <JLiu <at> eris.ca> writes:

> 
> 
> Hello, 
> ?
> I try to use GDAL to convert USGS Topo geopdfs to Geotiff format. I have
the following command: ?
> ?
> gdalwarp geo.pdf geo.tif -crop_to_cutline -cutline
C:\JIANTestFolder\cutline.csv -overwrite --config GDAL_CACHEMAX 500 -wm 500
--config GDAL_PDF_LAYERS_OFF Projection_and_Grids --config GDAL_PDF_DPI 508
-co "TILED=YES" -co "TFW=YES" -co "COMPRESS=JPEG" ?co "PHOTOMETRIC=YCBCR"
> ?
> I want to maintain the image quality while keeping the file to a minimal
size. But my output .tif is about twice as big as the input pdf (19.5M vs.
11.9M)? -- the output dpi (GDAL_PDF_DPI=508) is set based on the metadata
information in the geopdf. I read somewhere that pdf just stores image ?as
it is?, and I am wondering how come my geotiff is twice as big, even with
the jpeg compression with the YCBCR option? Is it still possible to reduce
its size? 
> ?
> Here is the geopdf I use:
???http://ims.er.usgs.gov/gda_services/download?item_id=5998960
> ?
> I?ve searched the mail archive and couldn?t find anything relevant. I
appreciate any answers or suggestions about converting geopdf to geotiffs.
Thank you! 


Hi,

Judged by the compression artifacts I believe that the image in the PDF if
already JPEG compressed. When this image is compressed again with JPEG the
algorithm tries to save also the new details of the artifacts and therefore
the compression ratio is not as good. 

For minimum size your could try to write the map first into an uncompressed
tiff file. Next you can try to remove the noise that is caused by the
previous compression with for example GIMP or Photoshop. Once the image is
clean it may be possible to compress it with better compression ratio into
JPEG. And if you can get it very clean it is possible that compression with
LZW or deflate method could compress it even more and without further
degradation of quality.

-Jukka Rahkonen-
?
> Best regards, 
> Jian 
> ?
> ?
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev <at> lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev





From nixanz at nixanz.com  Thu Jul 31 21:20:57 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Fri, 1 Aug 2014 14:20:57 +1000
Subject: [gdal-dev] Style Tool in C API
Message-ID: <7DEFB285-CDEC-4679-9543-09B797C64EC6@nixanz.com>

Hi guys,

I found that there seems to be no explicit C API for the non-generic style tool classes such as 'OGRStylePen'.  Now I've just found the documentation at https://trac.osgeo.org/gdal/wiki/rfc18_ogr_styles_c_api which states that this is deliberate and that they are unecessary, stating:

	? NO wrappers will be needed for the following C++ classes which are handled internally by the OGR_ST_* wrappers above:
    class OGRStylePen : public OGRStyleTool
    class OGRStyleBrush : public OGRStyleTool
    class OGRStyleSymbol : public OGRStyleTool
    class OGRStyleLabel : public OGRStyleTool

So I'm wondering what is the correct way, in the C API, to do the equivalent of the 'Color' method on the C++ class 'OGRStylePen'?  Eg, is there some way of matching up a parameter number in a 'OGRStyleToolH' with a parameter type (such as color)?  Eg, are the different parameter types all guaranteed to be at a specific parameter number?  Otherwise how do I know which parameter (by number) is which without fully parsing the style string myself?  If this guess is correct, is there a documented index telling me which paramters have which parameter index numbers.

Or if I'm completely off the mark, can somebody please set me straight with the correct usage to get a color from a OGRStyleToolH in the C API?

Cheers,
Nik.


From nixanz at nixanz.com  Thu Jul 31 21:37:40 2014
From: nixanz at nixanz.com (Nik Sands)
Date: Fri, 1 Aug 2014 14:37:40 +1000
Subject: [gdal-dev] Style Tool in C API
In-Reply-To: <7DEFB285-CDEC-4679-9543-09B797C64EC6@nixanz.com>
References: <7DEFB285-CDEC-4679-9543-09B797C64EC6@nixanz.com>
Message-ID: <C0B55E44-6F63-4003-8742-8BA5FE3FDE52@nixanz.com>

grrr... I've found the answer to my own question.  Please ignore my query below.  For some reason my searching through the doco before I sent the email didn't find what I wanted, but after sending the email, I found it:

typedef enum ogr_style_tool_param_pen_id
{  
    OGRSTPenColor       = 0,                   
    OGRSTPenWidth       = 1,                   
    OGRSTPenPattern     = 2,
    OGRSTPenId          = 3,
    OGRSTPenPerOffset   = 4,
    OGRSTPenCap         = 5,
    OGRSTPenJoin        = 6,
    OGRSTPenPriority    = 7,
    OGRSTPenLast        = 8
              
} OGRSTPenParam;

(and other similar enums).

Cheers,
Nik.


On 1 Aug 2014, at 2:20 pm, Nik Sands <nixanz at nixanz.com> wrote:

> Hi guys,
> 
> I found that there seems to be no explicit C API for the non-generic style tool classes such as 'OGRStylePen'.  Now I've just found the documentation at https://trac.osgeo.org/gdal/wiki/rfc18_ogr_styles_c_api which states that this is deliberate and that they are unecessary, stating:
> 
> 	? NO wrappers will be needed for the following C++ classes which are handled internally by the OGR_ST_* wrappers above:
>    class OGRStylePen : public OGRStyleTool
>    class OGRStyleBrush : public OGRStyleTool
>    class OGRStyleSymbol : public OGRStyleTool
>    class OGRStyleLabel : public OGRStyleTool
> 
> So I'm wondering what is the correct way, in the C API, to do the equivalent of the 'Color' method on the C++ class 'OGRStylePen'?  Eg, is there some way of matching up a parameter number in a 'OGRStyleToolH' with a parameter type (such as color)?  Eg, are the different parameter types all guaranteed to be at a specific parameter number?  Otherwise how do I know which parameter (by number) is which without fully parsing the style string myself?  If this guess is correct, is there a documented index telling me which paramters have which parameter index numbers.
> 
> Or if I'm completely off the mark, can somebody please set me straight with the correct usage to get a color from a OGRStyleToolH in the C API?
> 
> Cheers,
> Nik.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


