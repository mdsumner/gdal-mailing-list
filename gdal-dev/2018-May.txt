From even.rouault at spatialys.com  Tue May  1 06:11:51 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 01 May 2018 15:11:51 +0200
Subject: [gdal-dev] GDAL 2.3.0 beta1 available
In-Reply-To: <54466489.7SIo4yYjin@even-i700>
References: <54466489.7SIo4yYjin@even-i700>
Message-ID: <3713825.xlb7GPta25@even-i700>

> I have prepared the GDAL/OGR 2.3.0 Beta 1 release.  It will 
potentially be
> followed by a second beta, or hopefully directly by a RC1 if things go
> well.  

Things seem to go well. There have been a number of fixes since beta1, 
but nothing dramatic, hence I'll go for a RC1 this friday, so you still have 
2 days to push additional fixes.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180501/53f08268/attachment.html>

From even.rouault at spatialys.com  Wed May  2 02:37:46 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 02 May 2018 11:37:46 +0200
Subject: [gdal-dev] PHP and Ruby bindings gone [was: Anyone interested in
	resurrecting PHP (7) bindings ?]
In-Reply-To: <10995854.0QTK2cYfLm@even-i700>
References: <10995854.0QTK2cYfLm@even-i700>
Message-ID: <5235459.TKQqb95vDS@even-i700>

Hi,

just to inform that I've acceepted 2 pull requests in master to 
remove the PHP and Ruby bindings, which haven't seen any 
activity in years, from the source tree

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180502/9299370e/attachment.html>

From ben.elliston at anu.edu.au  Wed May  2 02:58:39 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Wed, 2 May 2018 19:58:39 +1000
Subject: [gdal-dev] PHP and Ruby bindings gone [was: Anyone interested
 in resurrecting PHP (7) bindings ?]
In-Reply-To: <5235459.TKQqb95vDS@even-i700>
References: <10995854.0QTK2cYfLm@even-i700> <5235459.TKQqb95vDS@even-i700>
Message-ID: <08aacd21-52e9-7678-b866-b685dc2f366f@anu.edu.au>

On 02/05/18 19:37, Even Rouault wrote:

> just to inform that I've acceepted 2 pull requests in master to remove
> the PHP and Ruby bindings, which haven't seen any activity in years,
> from the source tree

Perhaps the wiki should be updated?

https://trac.osgeo.org/gdal/#GDALOGRInOtherLanguages

Cheers, Ben

From ari.jolma at gmail.com  Wed May  2 03:05:30 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 2 May 2018 13:05:30 +0300
Subject: [gdal-dev] PHP and Ruby bindings gone [was: Anyone interested
 in resurrecting PHP (7) bindings ?]
In-Reply-To: <08aacd21-52e9-7678-b866-b685dc2f366f@anu.edu.au>
References: <10995854.0QTK2cYfLm@even-i700> <5235459.TKQqb95vDS@even-i700>
 <08aacd21-52e9-7678-b866-b685dc2f366f@anu.edu.au>
Message-ID: <1cf50d95-ebd7-5970-5895-50f8e372e3de@gmail.com>

Updated.

I also added the new FFI based Perl API that I'm working on.

Ari


Ben Elliston kirjoitti 02.05.2018 klo 12:58:
> On 02/05/18 19:37, Even Rouault wrote:
>
>> just to inform that I've acceepted 2 pull requests in master to remove
>> the PHP and Ruby bindings, which haven't seen any activity in years,
>> from the source tree
> Perhaps the wiki should be updated?
>
> https://trac.osgeo.org/gdal/#GDALOGRInOtherLanguages
>
> Cheers, Ben
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Wed May  2 08:03:46 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 02 May 2018 17:03:46 +0200
Subject: [gdal-dev] LIBKML C#
In-Reply-To: <1525153996873-0.post@n6.nabble.com>
References: <1525153996873-0.post@n6.nabble.com>
Message-ID: <12929980.s8lZRK6VeC@even-i700>

On lundi 30 avril 2018 22:53:16 CEST Jamo wrote:
> Hey Team,
> 
> I'm starting to delve into FDO, OGR and GDAL for exporting to some
> pre-defined formats (SDF, GML, KML, GeoJson etc etc)
> 
> I'm trying to interpret the OGR / GDAL driver documentation for the LIBKML
> driver it mentions setting the environment variable for LIBKML_USE_DOC.KML
> .... is this an option on the createdatasource?

No, this particular option is set through operating system environment variables 
or using gdal.SetConfigOption("LIBKML_USE_DOC.KML", "NO");

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180502/3e598b05/attachment.html>

From jachym.cepicky at gmail.com  Wed May  2 15:04:24 2018
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Wed, 02 May 2018 22:04:24 +0000
Subject: [gdal-dev] gdal 2.3 ecw 5.4
Message-ID: <CAAZUH4GJ1Mnarpn6MiUDrM5C80Kg1Y5SRQkDUi8+VJy9kLKBUA@mail.gmail.com>

Hi,

I try to build gdal (`git checkout release 2.3`, but the same result I've
got on master) with ECW support.

I followed the tutorial on https://trac.osgeo.org/gdal/wiki/ECW

Downloaded sdk 5.4 for Linux from
https://download.hexagongeospatial.com/downloads/ecw/erdas-ecw-jp2-sdk-v5-4-linux

Installed to /opt/hexagon dir

configured with

$ ./configure
--with-ecw=/opt/hexagon/ERDAS-ECW_JPEG_2000_SDK-5.4.0/Desktop_Read-Only/

made copy of libNCSEcw.so to /usr/local/lib

$ sudo cp
/opt/hexagon/ERDAS-ECW_JPEG_2000_SDK-5.4.0/Desktop_Read-Only/lib/x64/release/libNCSEcw.so.5.4.0
/usr/local/lib/
$ sudo ldconfig

And after running `make`, I've got

```
make[1]: Entering directory '/home/jachym/src/gdal/gdal/apps'
/bin/bash /home/jachym/src/gdal/gdal/libtool --mode=link --silent g++
gdalinfo_bin.lo  /home/jachym/src/gdal/gdal/libgdal.la  -o gdalinfo
/home/jachym/src/gdal/gdal/.libs/libgdal.so: undefined reference to
`NCS::CString::utf8_str(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >&) const'
/home/jachym/src/gdal/gdal/.libs/libgdal.so: undefined reference to
`NCS::CString::Utf8Encode(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> >&,
std::__cxx11::basic_string<wchar_t, std::char_traits<wchar_t>,
std::allocator<wchar_t> > const&)'
/home/jachym/src/gdal/gdal/.libs/libgdal.so: undefined reference to
`NCS::CView::SetTransformList(int,
std::__cxx11::list<NCS::API::ITransform*,
std::allocator<NCS::API::ITransform*> >&)'
/home/jachym/src/gdal/gdal/.libs/libgdal.so: undefined reference to
`NCS::CString::Utf8Decode(std::__cxx11::basic_string<char,
std::char_traits<char>, std::allocator<char> > const&)'
collect2: error: ld returned 1 exit status
GNUmakefile:82: recipe for target 'gdalinfo' failed
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory '/home/jachym/src/gdal/gdal/apps'
GNUmakefile:105: recipe for target 'apps-target' failed
make: *** [apps-target] Error 2
```

Any hint, what to try?

Thank you

Jachym

-- 
Jachym Cepicky
e-mail: jachym.cepicky gmail com
URL: http://les-ejk.cz
GPG: http://les-ejk.cz/pgp/JachymCepicky.pgp
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180502/fa1c52d8/attachment.html>

From even.rouault at spatialys.com  Wed May  2 15:24:41 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 03 May 2018 00:24:41 +0200
Subject: [gdal-dev] gdal 2.3 ecw 5.4
In-Reply-To: <CAAZUH4GJ1Mnarpn6MiUDrM5C80Kg1Y5SRQkDUi8+VJy9kLKBUA@mail.gmail.com>
References: <CAAZUH4GJ1Mnarpn6MiUDrM5C80Kg1Y5SRQkDUi8+VJy9kLKBUA@mail.gmail.com>
Message-ID: <2620229.293gASgi64@even-i700>

On mercredi 2 mai 2018 22:04:24 CEST Jachym Cepicky wrote:
> Hi,
> 
> I try to build gdal (`git checkout release 2.3`, but the same result I've
> got on master) with ECW support.
> 
> I followed the tutorial on https://trac.osgeo.org/gdal/wiki/ECW
> 
> Downloaded sdk 5.4 for Linux from
> https://download.hexagongeospatial.com/downloads/ecw/erdas-ecw-jp2-sdk-v5-4-> linux
> 
> Installed to /opt/hexagon dir
> 
> configured with
> 
> $ ./configure
> --with-ecw=/opt/hexagon/ERDAS-ECW_JPEG_2000_SDK-5.4.0/Desktop_Read-Only/
> 
> made copy of libNCSEcw.so to /usr/local/lib
> 
> $ sudo cp
> /opt/hexagon/ERDAS-ECW_JPEG_2000_SDK-5.4.0/Desktop_Read-Only/lib/x64/release
> /libNCSEcw.so.5.4.0 /usr/local/lib/

Jachym,

That .so uses the 'old' C++ ABI
If you use gcc 5.1 or later, you need to use
ERDAS-ECW_JPEG_2000_SDK-5.4.0/Desktop_Read-Only/lib/newabi/x64/release/
libNCSEcw.so

(note the additional newabi/ subdirectory in the path)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180503/af8f45d1/attachment.html>

From jorge.dejesus at geocat.net  Thu May  3 00:26:52 2018
From: jorge.dejesus at geocat.net (Jorge Mendes de Jesus)
Date: Thu, 3 May 2018 09:26:52 +0200
Subject: [gdal-dev] gdal 2.3 ecw 5.4
In-Reply-To: <CAAZUH4GJ1Mnarpn6MiUDrM5C80Kg1Y5SRQkDUi8+VJy9kLKBUA@mail.gmail.com>
References: <CAAZUH4GJ1Mnarpn6MiUDrM5C80Kg1Y5SRQkDUi8+VJy9kLKBUA@mail.gmail.com>
Message-ID: <CAHuqcL9pvhQ9BN-nX9TLu+SBoOh+NRL7C7=t=JpgPjCFQJ8cKQ@mail.gmail.com>

Hi
Can confirm that there is a problem, I made a docker for the developers to
test the problem

https://github.com/jorgejesus/gdal-ecw


Jorge

On Thu, May 3, 2018 at 12:04 AM, Jachym Cepicky <jachym.cepicky at gmail.com>
wrote:

> Hi,
>
> I try to build gdal (`git checkout release 2.3`, but the same result I've
> got on master) with ECW support.
>
> I followed the tutorial on https://trac.osgeo.org/gdal/wiki/ECW
>
> Downloaded sdk 5.4 for Linux from https://download.hexagongeospatial.com/
> downloads/ecw/erdas-ecw-jp2-sdk-v5-4-linux
>
> Installed to /opt/hexagon dir
>
> configured with
>
> $ ./configure --with-ecw=/opt/hexagon/ERDAS-ECW_JPEG_2000_SDK-5.4.0/
> Desktop_Read-Only/
>
> made copy of libNCSEcw.so to /usr/local/lib
>
> $ sudo cp /opt/hexagon/ERDAS-ECW_JPEG_2000_SDK-5.4.0/Desktop_Read-
> Only/lib/x64/release/libNCSEcw.so.5.4.0 /usr/local/lib/
> $ sudo ldconfig
>
> And after running `make`, I've got
>
> ```
> make[1]: Entering directory '/home/jachym/src/gdal/gdal/apps'
> /bin/bash /home/jachym/src/gdal/gdal/libtool --mode=link --silent g++
> gdalinfo_bin.lo  /home/jachym/src/gdal/gdal/libgdal.la  -o gdalinfo
> /home/jachym/src/gdal/gdal/.libs/libgdal.so: undefined reference to
> `NCS::CString::utf8_str(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> >&) const'
> /home/jachym/src/gdal/gdal/.libs/libgdal.so: undefined reference to
> `NCS::CString::Utf8Encode(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> >&, std::__cxx11::basic_string<wchar_t,
> std::char_traits<wchar_t>, std::allocator<wchar_t> > const&)'
> /home/jachym/src/gdal/gdal/.libs/libgdal.so: undefined reference to
> `NCS::CView::SetTransformList(int, std::__cxx11::list<NCS::API::ITransform*,
> std::allocator<NCS::API::ITransform*> >&)'
> /home/jachym/src/gdal/gdal/.libs/libgdal.so: undefined reference to
> `NCS::CString::Utf8Decode(std::__cxx11::basic_string<char,
> std::char_traits<char>, std::allocator<char> > const&)'
> collect2: error: ld returned 1 exit status
> GNUmakefile:82: recipe for target 'gdalinfo' failed
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory '/home/jachym/src/gdal/gdal/apps'
> GNUmakefile:105: recipe for target 'apps-target' failed
> make: *** [apps-target] Error 2
> ```
>
> Any hint, what to try?
>
> Thank you
>
> Jachym
>
> --
> Jachym Cepicky
> e-mail: jachym.cepicky gmail com
> URL: http://les-ejk.cz
> GPG: http://les-ejk.cz/pgp/JachymCepicky.pgp
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180503/3b4a48f3/attachment.html>

From landa.martin at gmail.com  Thu May  3 10:31:44 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 3 May 2018 19:31:44 +0200
Subject: [gdal-dev] mssql append fails for non-geometry layers
Message-ID: <CA+Ei1OfS+wrYk0iB49iXgkRrpDZ0UR98gxJP464Lt2CpDLXZ0A@mail.gmail.com>

Hi all,

let's assume sample data:

$ ogrinfo sample.gpkg

1: SOBR (Point)
2: VLA (None)

Append for geometry layers seems to work:

1) ogr2ogr -f MSSQLSpatial MSSQL:database=kn sample.gpkg sobr

->

1> select count(*) from sobr
2> go

-----------
       5437

2) ogr2ogr -f MSSQLSpatial -append MSSQL:database=kn sample.gpkg sobr

->

1> select count(*) from sobr
2> go

-----------
      10874

The same procedure fails for non-geometry layers:

1) ogr2ogr -f MSSQLSpatial MSSQL:database=kn sample.gpkg vla

->

1> select count(*) from vla
2> go

-----------
        111

2) ogr2ogr -f MSSQLSpatial -append MSSQL:database=kn sample.gpkg vla
ERROR 1: Error creating layer: [Microsoft][SQL Server Native Client 11.0][SQL Se
rver]There is already an object named 'vla' in the database. When using the over
write option and the layer doesn't contain geometry column, you might require to
 use the MSSQLSPATIAL_LIST_ALL_TABLES config option to get the previous layer de
leted before creating the new one.
ERROR 1: Terminating translation prematurely after failed
translation of layer VLA (use -skipfailures to skip errors)

OK, let's try with MSSQLSPATIAL_LIST_ALL_TABLES

3) ogr2ogr -f MSSQLSpatial -append --config
MSSQLSPATIAL_LIST_ALL_TABLES YES MSSQL:database=kn sample.gpkg vla

Same error:

ERROR 1: Error creating layer: [Microsoft][SQL Server Native Client 11.0][SQL Se
rver]There is already an object named 'vla' in the database. When using the over
write option and the layer doesn't contain geometry column, you might require to
 use the MSSQLSPATIAL_LIST_ALL_TABLES config option to get the previous layer de
leted before creating the new one.
ERROR 1: Terminating translation prematurely after failed
translation of layer VLA (use -skipfailures to skip errors)

Number of records unchanged:

1> select count(*) from vla
2> go

-----------
        111

It seems to me as a bug, or is there anything I miss? Thanks for
pointers, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From szekerest at gmail.com  Thu May  3 13:47:30 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 3 May 2018 22:47:30 +0200
Subject: [gdal-dev] mssql append fails for non-geometry layers
In-Reply-To: <CA+Ei1OfS+wrYk0iB49iXgkRrpDZ0UR98gxJP464Lt2CpDLXZ0A@mail.gmail.com>
References: <CA+Ei1OfS+wrYk0iB49iXgkRrpDZ0UR98gxJP464Lt2CpDLXZ0A@mail.gmail.com>
Message-ID: <CACALY+Qdy1mvsChKUtKEkP3ySAFrvV+zW737aL4eKw-K52N5Gw@mail.gmail.com>

Hi Martin,

For some reason the table hasn't been found and the driver wanted to create
a new table.
I've tried to reproduce this with a shapefile with no geometry uploaded to
MSSQL, but I couldn't.
Can I have your sample data? Which GDAL version has been used?
You could also check what happens by disabling bulk insert by adding *--config
MSSQLSPATIAL_USE_BCP NO*


Thanks,

Tamas


2018-05-03 19:31 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

> Hi all,
>
> let's assume sample data:
>
> $ ogrinfo sample.gpkg
>
> 1: SOBR (Point)
> 2: VLA (None)
>
> Append for geometry layers seems to work:
>
> 1) ogr2ogr -f MSSQLSpatial MSSQL:database=kn sample.gpkg sobr
>
> ->
>
> 1> select count(*) from sobr
> 2> go
>
> -----------
>        5437
>
> 2) ogr2ogr -f MSSQLSpatial -append MSSQL:database=kn sample.gpkg sobr
>
> ->
>
> 1> select count(*) from sobr
> 2> go
>
> -----------
>       10874
>
> The same procedure fails for non-geometry layers:
>
> 1) ogr2ogr -f MSSQLSpatial MSSQL:database=kn sample.gpkg vla
>
> ->
>
> 1> select count(*) from vla
> 2> go
>
> -----------
>         111
>
> 2) ogr2ogr -f MSSQLSpatial -append MSSQL:database=kn sample.gpkg vla
> ERROR 1: Error creating layer: [Microsoft][SQL Server Native Client
> 11.0][SQL Se
> rver]There is already an object named 'vla' in the database. When using
> the over
> write option and the layer doesn't contain geometry column, you might
> require to
>  use the MSSQLSPATIAL_LIST_ALL_TABLES config option to get the previous
> layer de
> leted before creating the new one.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer VLA (use -skipfailures to skip errors)
>
> OK, let's try with MSSQLSPATIAL_LIST_ALL_TABLES
>
> 3) ogr2ogr -f MSSQLSpatial -append --config
> MSSQLSPATIAL_LIST_ALL_TABLES YES MSSQL:database=kn sample.gpkg vla
>
> Same error:
>
> ERROR 1: Error creating layer: [Microsoft][SQL Server Native Client
> 11.0][SQL Se
> rver]There is already an object named 'vla' in the database. When using
> the over
> write option and the layer doesn't contain geometry column, you might
> require to
>  use the MSSQLSPATIAL_LIST_ALL_TABLES config option to get the previous
> layer de
> leted before creating the new one.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer VLA (use -skipfailures to skip errors)
>
> Number of records unchanged:
>
> 1> select count(*) from vla
> 2> go
>
> -----------
>         111
>
> It seems to me as a bug, or is there anything I miss? Thanks for
> pointers, Martin
>
> --
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180503/ef618d46/attachment.html>

From tyeik at gktechinc.com  Thu May  3 19:05:59 2018
From: tyeik at gktechinc.com (tval)
Date: Thu, 3 May 2018 19:05:59 -0700 (MST)
Subject: [gdal-dev] C# Read Raster slow
Message-ID: <1525399559549-0.post@n6.nabble.com>

I am reading a raster to an IntPtr buffer in c#:

band.ReadRaster(256, 256, 128, 128, buf, 128, 128, band.DataType, 6, stride)

I loop through the size of the raster I am retrieving (say 500x500) pixels
and read each 128 block of the raster. The problem is, this can take up to 6
seconds just to read a 500x500 portion of the image! I notice that the very
first read method can often take the longest (4 sec or so). I am trying to
understand why this is so slow and if there is something I can do to resolve
it. I have tried with and without overviews and it does not seem to matter. 
The image is .jp2 and the image sizes are only 2800x2000 in total pixel
size.

Any help would be appreciated.
Travis



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From gregory.bataille at gmail.com  Thu May  3 22:11:52 2018
From: gregory.bataille at gmail.com (=?UTF-8?Q?Gr=C3=A9gory_Bataille?=)
Date: Fri, 04 May 2018 05:11:52 +0000
Subject: [gdal-dev] deb package for 2.2.3
Message-ID: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>

Hi all,

I'm running gdal 2.2.2 from ubuntu-gis/experimental .deb package and I just
got stuck by https://trac.osgeo.org/gdal/ticket/7143.
Took me some time to debug because I develop locally on Mac, where the
package is at 2.2.3 and the bug is fixed.

What does it take to build the .deb package. Is this something that someone
can do? is this something sufficiently scripted that I can do it and give
you guys the result for publication?

Thanks

---
Gregory Bataille
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180504/1ecb5ca0/attachment.html>

From sebastic at xs4all.nl  Thu May  3 22:28:03 2018
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 4 May 2018 07:28:03 +0200
Subject: [gdal-dev] deb package for 2.2.3
In-Reply-To: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
References: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
Message-ID: <c7f8f009-672f-8635-6c73-1bcc84a05241@xs4all.nl>

On 05/04/2018 07:11 AM, Grégory Bataille wrote:
> I'm running gdal 2.2.2 from ubuntu-gis/experimental .deb package and I just
> got stuck by https://trac.osgeo.org/gdal/ticket/7143.
> Took me some time to debug because I develop locally on Mac, where the
> package is at 2.2.3 and the bug is fixed.
> 
> What does it take to build the .deb package. Is this something that someone
> can do? is this something sufficiently scripted that I can do it and give
> you guys the result for publication?

In the case of UbuntuGIS, you can rebuild the source package from
Debian. The sources are available in git:

 https://salsa.debian.org/debian-gis-team/gdal
 https://salsa.debian.org/debian-gis-team/gdal-grass

Once you have rebuild the gdal package, you need to rebuild all reverse
dependencies (packages that depend on libgdal20) with the new gdal to
have them use the new virtual ABI dependency.

Because of interdependencies you need to rebuild the packages in the
correct order, have a look at:

 https://trac.osgeo.org/ubuntugis/wiki/BuildOrder

Note that this page may have become outdated again. The Debian GIS
transition trackers shows all libgdal20 reverse dependencies in Debian
unstable:

 https://linuxminded.nl/debian/gis-transitions/html/gdal.html

You will need to host all the rebuild packages in your own PPA to easily
install them. If your goal is to update the gdal packages in the
UbuntuGIS PPA, you need to coordinate your contributions on the
appropriate mailinglist:

 https://lists.osgeo.org/mailman/listinfo/ubuntu

Due to the lack of manpower, pretty much all the packages in the
UbuntuGIS PPA get copied from the OSGeoLive PPA where a little more
manpower is available to create backports of Debian GIS packages for
Ubuntu LTS releases.

The next OSGeoLive release will be based on bionic, and will rely for a
large part on the packages already available in Ubuntu because they're
up-to-date with the latest upstream releases. At least proj & gdal will
most likely be updated to 5.0.1 & 2.3.0 for OSGeoLive 12.0. So you can
also just wait for those packages to find their way from the OSGeoLive
PPA to the UbuntuGIS PPA. Contributing to OSGeoLive is also most welcome.

Kind Regards,

Bas

From gregory.bataille at gmail.com  Thu May  3 22:39:50 2018
From: gregory.bataille at gmail.com (=?UTF-8?Q?Gr=C3=A9gory_Bataille?=)
Date: Fri, 04 May 2018 05:39:50 +0000
Subject: [gdal-dev] deb package for 2.2.3
In-Reply-To: <c7f8f009-672f-8635-6c73-1bcc84a05241@xs4all.nl>
References: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
 <c7f8f009-672f-8635-6c73-1bcc84a05241@xs4all.nl>
Message-ID: <CACVcCzqfjT2KesKJAbOaKxkiW3biXKw7LSaqEDx5VBE6Z5iP1g@mail.gmail.com>

wow, ok, a bit more work than I expected. Now I understand why it's hard to
keep it up-to-date.
Thanks for the osgeolive pointer, did not know about it.

Cool if you move soon to 2.3.0 and therefore feeds ubuntugis. I'll still
see if I can quickly get somewhere is the meantime on my own with what you
sent

cheers

---
Gregory Bataille


On Fri, May 4, 2018 at 7:28 AM Sebastiaan Couwenberg <sebastic at xs4all.nl>
wrote:

> On 05/04/2018 07:11 AM, Grégory Bataille wrote:
> > I'm running gdal 2.2.2 from ubuntu-gis/experimental .deb package and I
> just
> > got stuck by https://trac.osgeo.org/gdal/ticket/7143.
> > Took me some time to debug because I develop locally on Mac, where the
> > package is at 2.2.3 and the bug is fixed.
> >
> > What does it take to build the .deb package. Is this something that
> someone
> > can do? is this something sufficiently scripted that I can do it and give
> > you guys the result for publication?
>
> In the case of UbuntuGIS, you can rebuild the source package from
> Debian. The sources are available in git:
>
>  https://salsa.debian.org/debian-gis-team/gdal
>  https://salsa.debian.org/debian-gis-team/gdal-grass
>
> Once you have rebuild the gdal package, you need to rebuild all reverse
> dependencies (packages that depend on libgdal20) with the new gdal to
> have them use the new virtual ABI dependency.
>
> Because of interdependencies you need to rebuild the packages in the
> correct order, have a look at:
>
>  https://trac.osgeo.org/ubuntugis/wiki/BuildOrder
>
> Note that this page may have become outdated again. The Debian GIS
> transition trackers shows all libgdal20 reverse dependencies in Debian
> unstable:
>
>  https://linuxminded.nl/debian/gis-transitions/html/gdal.html
>
> You will need to host all the rebuild packages in your own PPA to easily
> install them. If your goal is to update the gdal packages in the
> UbuntuGIS PPA, you need to coordinate your contributions on the
> appropriate mailinglist:
>
>  https://lists.osgeo.org/mailman/listinfo/ubuntu
>
> Due to the lack of manpower, pretty much all the packages in the
> UbuntuGIS PPA get copied from the OSGeoLive PPA where a little more
> manpower is available to create backports of Debian GIS packages for
> Ubuntu LTS releases.
>
> The next OSGeoLive release will be based on bionic, and will rely for a
> large part on the packages already available in Ubuntu because they're
> up-to-date with the latest upstream releases. At least proj & gdal will
> most likely be updated to 5.0.1 & 2.3.0 for OSGeoLive 12.0. So you can
> also just wait for those packages to find their way from the OSGeoLive
> PPA to the UbuntuGIS PPA. Contributing to OSGeoLive is also most welcome.
>
> Kind Regards,
>
> Bas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180504/81b6c956/attachment-0001.html>

From sebastic at xs4all.nl  Thu May  3 23:01:58 2018
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 4 May 2018 08:01:58 +0200
Subject: [gdal-dev] deb package for 2.2.3
In-Reply-To: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
References: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
Message-ID: <40b9a069-c9b2-cea2-d6e9-5bbcecbd045c@xs4all.nl>

On 05/04/2018 07:11 AM, Grégory Bataille wrote:
> I'm running gdal 2.2.2 from ubuntu-gis/experimental .deb package and I just
> got stuck by https://trac.osgeo.org/gdal/ticket/7143.
> Took me some time to debug because I develop locally on Mac, where the
> package is at 2.2.3 and the bug is fixed.

Note that you can also upgrade your system to bionic which includes gdal
(2.2.3+dfsg-2).

Kind Regards,

Bas

From gregory.bataille at gmail.com  Thu May  3 23:10:41 2018
From: gregory.bataille at gmail.com (=?UTF-8?Q?Gr=C3=A9gory_Bataille?=)
Date: Fri, 04 May 2018 06:10:41 +0000
Subject: [gdal-dev] deb package for 2.2.3
In-Reply-To: <40b9a069-c9b2-cea2-d6e9-5bbcecbd045c@xs4all.nl>
References: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
 <40b9a069-c9b2-cea2-d6e9-5bbcecbd045c@xs4all.nl>
Message-ID: <CACVcCzqxivtwmjoBgkZG52yJOf0h-SngBzRwSTbkkJV5SzdjGA@mail.gmail.com>

yes, that should happen soonish also :)

Thanks

---
Gregory Bataille


On Fri, May 4, 2018 at 8:02 AM Sebastiaan Couwenberg <sebastic at xs4all.nl>
wrote:

> On 05/04/2018 07:11 AM, Grégory Bataille wrote:
> > I'm running gdal 2.2.2 from ubuntu-gis/experimental .deb package and I
> just
> > got stuck by https://trac.osgeo.org/gdal/ticket/7143.
> > Took me some time to debug because I develop locally on Mac, where the
> > package is at 2.2.3 and the bug is fixed.
>
> Note that you can also upgrade your system to bionic which includes gdal
> (2.2.3+dfsg-2).
>
> Kind Regards,
>
> Bas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180504/48e82f1c/attachment.html>

From gcpp.kalxas at gmail.com  Fri May  4 01:06:04 2018
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Fri, 4 May 2018 11:06:04 +0300
Subject: [gdal-dev] deb package for 2.2.3
In-Reply-To: <CACVcCzqfjT2KesKJAbOaKxkiW3biXKw7LSaqEDx5VBE6Z5iP1g@mail.gmail.com>
References: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
 <c7f8f009-672f-8635-6c73-1bcc84a05241@xs4all.nl>
 <CACVcCzqfjT2KesKJAbOaKxkiW3biXKw7LSaqEDx5VBE6Z5iP1g@mail.gmail.com>
Message-ID: <49b1bde4-e829-5ce6-6aaf-1c47b6146e14@gmail.com>

Hi,

I am planning to update UbuntuGIS with the new GDAL 2.3.0 release once 
it is out.
Let me check if I can push 2.2.3 to experimental within the weekend.

Cheers,
Angelos

On 05/04/2018 08:39 AM, Grégory Bataille wrote:
> wow, ok, a bit more work than I expected. Now I understand why it's hard to
> keep it up-to-date.
> Thanks for the osgeolive pointer, did not know about it.
>
> Cool if you move soon to 2.3.0 and therefore feeds ubuntugis. I'll still
> see if I can quickly get somewhere is the meantime on my own with what you
> sent
>
> cheers
>
> ---
> Gregory Bataille
>
>
> On Fri, May 4, 2018 at 7:28 AM Sebastiaan Couwenberg <sebastic at xs4all.nl>
> wrote:
>
>> On 05/04/2018 07:11 AM, Grégory Bataille wrote:
>>> I'm running gdal 2.2.2 from ubuntu-gis/experimental .deb package and I
>> just
>>> got stuck by https://trac.osgeo.org/gdal/ticket/7143.
>>> Took me some time to debug because I develop locally on Mac, where the
>>> package is at 2.2.3 and the bug is fixed.
>>>
>>> What does it take to build the .deb package. Is this something that
>> someone
>>> can do? is this something sufficiently scripted that I can do it and give
>>> you guys the result for publication?
>> In the case of UbuntuGIS, you can rebuild the source package from
>> Debian. The sources are available in git:
>>
>>   https://salsa.debian.org/debian-gis-team/gdal
>>   https://salsa.debian.org/debian-gis-team/gdal-grass
>>
>> Once you have rebuild the gdal package, you need to rebuild all reverse
>> dependencies (packages that depend on libgdal20) with the new gdal to
>> have them use the new virtual ABI dependency.
>>
>> Because of interdependencies you need to rebuild the packages in the
>> correct order, have a look at:
>>
>>   https://trac.osgeo.org/ubuntugis/wiki/BuildOrder
>>
>> Note that this page may have become outdated again. The Debian GIS
>> transition trackers shows all libgdal20 reverse dependencies in Debian
>> unstable:
>>
>>   https://linuxminded.nl/debian/gis-transitions/html/gdal.html
>>
>> You will need to host all the rebuild packages in your own PPA to easily
>> install them. If your goal is to update the gdal packages in the
>> UbuntuGIS PPA, you need to coordinate your contributions on the
>> appropriate mailinglist:
>>
>>   https://lists.osgeo.org/mailman/listinfo/ubuntu
>>
>> Due to the lack of manpower, pretty much all the packages in the
>> UbuntuGIS PPA get copied from the OSGeoLive PPA where a little more
>> manpower is available to create backports of Debian GIS packages for
>> Ubuntu LTS releases.
>>
>> The next OSGeoLive release will be based on bionic, and will rely for a
>> large part on the packages already available in Ubuntu because they're
>> up-to-date with the latest upstream releases. At least proj & gdal will
>> most likely be updated to 5.0.1 & 2.3.0 for OSGeoLive 12.0. So you can
>> also just wait for those packages to find their way from the OSGeoLive
>> PPA to the UbuntuGIS PPA. Contributing to OSGeoLive is also most welcome.
>>
>> Kind Regards,
>>
>> Bas
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Angelos Tzotsos, PhD
Charter Member
Open Source Geospatial Foundation
http://users.ntua.gr/tzotsos

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180504/b53050db/attachment.html>

From sebastic at xs4all.nl  Fri May  4 01:08:08 2018
From: sebastic at xs4all.nl (Sebastiaan Couwenberg)
Date: Fri, 4 May 2018 10:08:08 +0200
Subject: [gdal-dev] deb package for 2.2.3
In-Reply-To: <49b1bde4-e829-5ce6-6aaf-1c47b6146e14@gmail.com>
References: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
 <c7f8f009-672f-8635-6c73-1bcc84a05241@xs4all.nl>
 <CACVcCzqfjT2KesKJAbOaKxkiW3biXKw7LSaqEDx5VBE6Z5iP1g@mail.gmail.com>
 <49b1bde4-e829-5ce6-6aaf-1c47b6146e14@gmail.com>
Message-ID: <939dd47d-c668-a4fa-bc45-615e9529e67a@xs4all.nl>

On 05/04/2018 10:06 AM, Angelos Tzotsos wrote:
> Let me check if I can push 2.2.3 to experimental within the weekend.

Do you mean 2.2.4?

Note that no transition is required from 2.2.3 to 2.2.4, but there is
from 2.2.2 and earlier.

Kind Regards,

Bas

From gcpp.kalxas at gmail.com  Fri May  4 01:16:08 2018
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Fri, 4 May 2018 11:16:08 +0300
Subject: [gdal-dev] deb package for 2.2.3
In-Reply-To: <939dd47d-c668-a4fa-bc45-615e9529e67a@xs4all.nl>
References: <CACVcCzpCv+pzaKTmv4-PVpUaNd0tnhQ-U_za6RCdEvy9kz3L4A@mail.gmail.com>
 <c7f8f009-672f-8635-6c73-1bcc84a05241@xs4all.nl>
 <CACVcCzqfjT2KesKJAbOaKxkiW3biXKw7LSaqEDx5VBE6Z5iP1g@mail.gmail.com>
 <49b1bde4-e829-5ce6-6aaf-1c47b6146e14@gmail.com>
 <939dd47d-c668-a4fa-bc45-615e9529e67a@xs4all.nl>
Message-ID: <f384cbac-79de-8765-ac4c-115dc8cbcc8a@gmail.com>

On 05/04/2018 11:08 AM, Sebastiaan Couwenberg wrote:
> On 05/04/2018 10:06 AM, Angelos Tzotsos wrote:
>> Let me check if I can push 2.2.3 to experimental within the weekend.
> Do you mean 2.2.4?
>
> Note that no transition is required from 2.2.3 to 2.2.4, but there is
> from 2.2.2 and earlier.
>
> Kind Regards,
>
> Bas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
Yes, thanks.
Lets wait for 2.3.0 then.

Best,
Angelos


-- 
Angelos Tzotsos, PhD
Charter Member
Open Source Geospatial Foundation
http://users.ntua.gr/tzotsos


From landa.martin at gmail.com  Fri May  4 05:50:19 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 4 May 2018 14:50:19 +0200
Subject: [gdal-dev] mssql append fails for non-geometry layers
In-Reply-To: <CACALY+Qdy1mvsChKUtKEkP3ySAFrvV+zW737aL4eKw-K52N5Gw@mail.gmail.com>
References: <CA+Ei1OfS+wrYk0iB49iXgkRrpDZ0UR98gxJP464Lt2CpDLXZ0A@mail.gmail.com>
 <CACALY+Qdy1mvsChKUtKEkP3ySAFrvV+zW737aL4eKw-K52N5Gw@mail.gmail.com>
Message-ID: <CA+Ei1Oeud89fAixeN2+j-6jG6DWs_dJ8K+5P_W6nOha6Cmtj9g@mail.gmail.com>

Hi Tamas,

2018-05-03 22:47 GMT+02:00 Tamas Szekeres <szekerest at gmail.com>:

first of all thanks for quick feedback!

> For some reason the table hasn't been found and the driver wanted to create
> a new table.

Right, seems to be like that.

> I've tried to reproduce this with a shapefile with no geometry uploaded to
> MSSQL, but I couldn't.
> Can I have your sample data? Which GDAL version has been used?

Here it is: http://geo102.fsv.cvut.cz/~landa/tmp/sample.gpkg

Using GDAL master + SQL Server 2014

BTW,

There are bunch of errors related to vla (non-geometry layer) when
importing sobr (geometry), but import itself doesn't fail.

$ ogr2ogr -f MSSQLSpatial -append --config
MSSQLSPATIAL_LIST_ALL_TABLES yes MSSQL:database=kn... sample.gpkg sobr
ERROR 1: No column definitions found for table 'dbo.vla', layer not usable.
ERROR 1: No column definitions found for table 'dbo.geometry_columns', layer not
 usable.
ERROR 1: No column definitions found for table 'dbo.spatial_ref_sys', layer not
usable.

> You could also check what happens by disabling bulk insert by adding
> --config MSSQLSPATIAL_USE_BCP NO

Same behaviour,

$ ogr2ogr -f MSSQLSpatial -append --config
MSSQLSPATIAL_LIST_ALL_TABLES yes --config MSSQLSPATIAL_USE_BCP NO
MSSQL:database=kn;... sample.gpkg vla
ERROR 1: No column definitions found for table 'dbo.vla', layer not usable.
ERROR 1: No column definitions found for table 'dbo.geometry_columns', layer not
 usable.
ERROR 1: No column definitions found for table 'dbo.spatial_ref_sys', layer not
usable.
ERROR 1: Error creating layer: [Microsoft][SQL Server Native Client 11.0][SQL Se
rver]There is already an object named 'vla' in the database. When using the over
write option and the layer doesn't contain geometry column, you might require to
 use the MSSQLSPATIAL_LIST_ALL_TABLES config option to get the previous layer de
leted before creating the new one.
ERROR 1: Terminating translation prematurely after failed
translation of layer VLA (use -skipfailures to skip errors)

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From jukka.rahkonen at maanmittauslaitos.fi  Fri May  4 07:44:17 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 4 May 2018 14:44:17 +0000
Subject: [gdal-dev] OGR_STYLE BRUSH(fc:#0000FF) converts into MapInfo Brush
	(1, 255)
Message-ID: <221fde3d099e4be7907780e7e1852f88@C119S212VM042.msvyvi.vaha.local>

Hi MITAB-folks,

See this: https://gis.stackexchange.com/questions/281584/export-to-tab-with-styling-using-ogr2ogr
Is it right or wrong to convert blue fill into Brush (1,255)?

-Jukka Rahkonen-




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180504/2dcff8ba/attachment.html>

From even.rouault at spatialys.com  Fri May  4 08:47:29 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 04 May 2018 17:47:29 +0200
Subject: [gdal-dev] OGR_STYLE BRUSH(fc:#0000FF) converts into MapInfo
	Brush (1, 255)
In-Reply-To: <221fde3d099e4be7907780e7e1852f88@C119S212VM042.msvyvi.vaha.local>
References: <221fde3d099e4be7907780e7e1852f88@C119S212VM042.msvyvi.vaha.local>
Message-ID: <2537903.4biVRqxyDq@even-i700>

On vendredi 4 mai 2018 14:44:17 CEST Rahkonen Jukka (MML) wrote:
> Hi MITAB-folks,
> 
> See this:
> https://gis.stackexchange.com/questions/281584/export-to-tab-with-styling-u
> sing-ogr2ogr Is it right or wrong to convert blue fill into Brush (1,255)?

Indeed seems wrong. I've just pushed a fix. And now time to package 
this 2.3.0RC1

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180504/cf3bacd4/attachment.html>

From even.rouault at spatialys.com  Fri May  4 09:25:56 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 04 May 2018 18:25:56 +0200
Subject: [gdal-dev] GDAL 2.3.0 RC1 available
Message-ID: <44870145.5dBUpdipQx@even-i700>

Hi,

I've issued a release candidate for GDAL 2.3.0

The source is available at:

    http://download.osgeo.org/gdal/2.3.0/gdal-2.3.0RC1.tar.xz
    http://download.osgeo.org/gdal/2.3.0/gdal-2.3.0RC1.tar.gz
    http://download.osgeo.org/gdal/2.3.0/gdal230RC1.zip

A snapshot of the Python autotest suite can be downloaded from:

    http://download.osgeo.org/gdal/2.3.0/gdalautotest-2.3.0RC1.tar.gz
    http://download.osgeo.org/gdal/2.3.0/gdalautotest-2.3.0RC1.zip

The GDAL-GRASS plugin hasn't changed since beta1 :

    http://download.osgeo.org/gdal/2.3.0/gdal-grass-2.3.0.tar.gz

Snapshot of the documentation :

    http://download.osgeo.org/gdal/2.3.0/gdal230doc.zip

The NEWS page has been updated:

   https://trac.osgeo.org/gdal/wiki/Release/2.3.0-News

I'll call for a vote to promote it to final middle of next week if nothing serious is reported before.


Changes since beta1 :

2a1f817 jp2kak.py: adjust expected checksums for Kakadu 7.10.4
2487aa3 ogrinfo/ogr2ogr with -sql @filename: remove lines starting with '-- ' (relates to/fixes #459)
1d9b16d ogr_sql_rfc28.py: fix memleak
961b551 DXF: avoid very long processing time. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=7854. Credit to OSS Fuzz
9acbe8a Geoconcept: avoid infinite loop. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=7851. Credit to OSS Fuzz
59e5ede ODS: avoid adding too many columns to too many existing feataures. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=7868. Credit to OSS Fuzz
e711462 XLSX: avoid timeout. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=7784. Credit to OSS Fuzz
18203f8 MITAB: improve performance when reading huge number of fields from .mif. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=7825. Credit to OSS Fuzz
805999a RDA: change extension to .dgrda to differentiate from R data (#470)
ae9da1a Re-install gdal_csv.h
62dd0e1 E00GRID: better detect short file situation to avoid very long processing time. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=7781. Credit to OSS Fuzz
f8efbf8 ISCE: avoid potential int overflow. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=7948. Credit to OSS Fuzz
56578e7 VRTDataset::AddBand(): honour 'PixelFunctionLanguage' option (fixes #501)
4f9733e generate_gdal_version_h.sh: avoid regenerating gdal_version.h on a non-dev version (fixes build failures on Travis-CI with 2.3.0beta1)
bafa089 SNODAS: accept header lines up to 1024 characters. Fixes #506
dce1060 WCS: do not crash if the CoverageInfo has a EnvelopeWithTimePeriod
bff1e5c XLSX: avoid crash when I/O error occurs on saving. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8031. Credit to OSS Fuzz
acb0049 ogrmerge.py: use ogr.wkbUnknown
a3af874 OpenJPEG: allow YCC for non-Byte datasets; and allow 4-band MCT with openjpeg >= 2.2
14c0333 GTiff: avoid potential unwanted network access. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8045. Credit to OSS Fuzz
167eb92 IRIS: avoid infinite loop. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8049. Credit to OSS Fuzz
7cd9a6f m4/acinclude.m4: replace use of CCFLAGS by plain CFLAGS (fixes #529)
3ea0bbd m4/acinclude.m4: require 'long long' type (fixes #530)
83369b4 cpl_port.h: error out if HAVE_LONG_LONG not defined, and remove some code testing CPL_HAS_GINT64 (refs #530)
3e78f98 Add assertion to avoid gcc -Wnull-dereference to have a false positive
bf6dc2a gdalwarp: proper progress bar for warp to VRT
dfac928 implement CPLReadLine3L() (#479)
e366465 New issues with VFK parser logic, see #365
da2feb2 VFK: modify VFKReader::ReadLine() to use CPLReadLine3L, see #365
f7b90fa CPLReadLine3L since 2.3.0, see #479
080ffc4 configure: fix long long detection with CFLAGS=-Wall (refs #530)
58c0c6a IRIS: avoid infinite loop. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8058. Credit to OSS Fuzz
98f6a4a GPKG: fix overview creation with big overview factors on some datasets
f4a3c2f AVCE00: avoid performance issue with retrieving the SRS and big number of layers. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8065. Credit to OSS Fuzz
b861528 DXF: avoid performance issue when reading INSERT. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8067. Credit to OSS Fuzz
c110ff1 CTG: fix int overfow. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8081. Credit to OSS Fuzz
8e4c736 ogr2ogr: fix compilation error with Crypto++ 7.0.0 (fix #541) (#547)
b30e9d3 EHdr: avoid int overflow. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8110. Credit to OSS Fuzz
94030a7 Overview creation: avoid creating too many levels, and fix related heap buffer overflow (fixes #557) (#561)
10f3127 Improvements to WCS driver (#521) (fixes #515, fixes #516)
21c7e5e SetStatistics(): write a STATISTICS_APPROXIMATE=YES metadata item if bApproxOK=true, and take it into account in GetStatistics() (fixes https://trac.osgeo.org/gdal/ticket/4857, https://trac.osgeo.org/gdal/ticket/4576). Update EHdr driver to only write .stx if bApproxOK=false (fixes #514)
900120a RIK: fix read stack buffer overflow. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8117. Credit to OSS Fuzz
949e46b PCIDSK: fix heap-read-buffer overflow. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8121. Credit to OSS Fuzz
63cd4fb XLSX: avoid adding too many columns to too many existing feataures. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8122. Credit to OSS Fuzz
3746b12 DXF: avoid very long processing time on corrupted files. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8123. Credit to OSS Fuzz
65afca4 GDALRasterBand::ComputeStatistics(): remove dead-code added recently, and better testing
80814c6 ISO8211: avoid timeout when opening a huge archive as a directory. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8128. Credit to OSS Fuzz
a72f4e4 DXF: fix memleak in error code path. Fixes https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8134. Credit to OSS Fuzz
33c893f RIK: actually fix https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=8117
55eaf7f OGR_PDS: fix reading 8-byte IEEE_REAL fields (fixes #570)
b763225 MITAB: export BRUSH(fc:#.....) with mapinfo brush 2 (solid fill)


Even
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180504/0fd8fea9/attachment-0001.html>

From andreaerdna at libero.it  Sat May  5 07:09:12 2018
From: andreaerdna at libero.it (andreaerdna)
Date: Sat, 5 May 2018 07:09:12 -0700 (MST)
Subject: [gdal-dev] About deprecated CRS and the different behavior of
 EPSGGetPCSInfo and EPSGGetGCSInfo
Message-ID: <1525529352451-0.post@n6.nabble.com>

Hi all,
trying to investigate two QGIS bugs [1,2], I noticed that EPSGGetPCSInfo and
EPSGGetGCSInfo (ogr\ogr_fromepsg.cpp) behave differently in the way they
deal with deprecated CRS.

In particular, while EPSGGetPCSInfo [3] appends the string " deprecated" to
the CRS name when it's flagged as deprecated in pcs.csv, EPSGGetGCSInfo [4]
does not.
This IMHO leads to some inconsistencies in how OSRImportFromEPSG and
OGRSpatialReference::importFromEPSG() initialize SRS based on EPSG GCS or
PCS code.

The behavior of EPSGGetPCSInfo was modified long ago [5] and I was not able
to trace the reason for this change and, above all, the reason why
EPSGGetGCSInfo was not modified in the same way. Anybody knows?

Anyway, I wonder if is not the case to modify also EPSGGetGCSInfo in order
to append " deprecated" to the deprecated GCSs names as EPSGGetPCSInfo does
for PCSs, or if there are some reasons for not doing so.

Hope this could help improve GDAL.

Andrea


[1] "Hide deprecated CRSs" functionality not working properly in the
Coordinate Reference System Selector dialog
https://issues.qgis.org/issues/18896
[2] Deprecated CRSs: inconsistencies in srs.db and in its update process
https://issues.qgis.org/issues/18905
[3]
https://github.com/OSGeo/gdal/blob/release/2.2/gdal/ogr/ogr_fromepsg.cpp#L958-L978
[4]
https://github.com/OSGeo/gdal/blob/release/2.2/gdal/ogr/ogr_fromepsg.cpp#L640-L648
[5] added deprecated PCS name if it is deprecated
https://github.com/OSGeo/gdal/commit/39ce2084e05d494deafb93b977a7c4c6c0b36417



-----
Andrea Giudiceandrea
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Sat May  5 11:26:27 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 05 May 2018 20:26:27 +0200
Subject: [gdal-dev] About deprecated CRS and the different behavior of
	EPSGGetPCSInfo and EPSGGetGCSInfo
In-Reply-To: <1525529352451-0.post@n6.nabble.com>
References: <1525529352451-0.post@n6.nabble.com>
Message-ID: <13630986.bbIz37vLbb@even-i700>

Hi,

It looks to me like a good idea to add deprecated to GCS names 
too.
Implemented per https://github.com/OSGeo/gdal/pull/575

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180505/ce705869/attachment.html>

From landa.martin at gmail.com  Sun May  6 03:53:53 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 6 May 2018 12:53:53 +0200
Subject: [gdal-dev] connect mssql from linux
Message-ID: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>

Hi,

I have problem connecting SQL Server from my Linux machine. Command

$ ogrinfo "MSSQL:database=kn;server=host\kartografiesql;uid=landa;pwd=xxx;driver=ODBC
Driver 11 for SQL Server" --config CPL_DEBUG ON

fails with

ODBC: SQLDriverConnect(database=kn;server=host\kartografiesql;uid=landa;pwd=xxx;driver=ODBC
Driver 11 for SQL Server)
ODBC: ... failed: [unixODBC][Microsoft][ODBC Driver 11 for SQL
Server]Login timeout expired
ODBC: SQLDisconnect()

But same command in Windows VM works

ODBC: SQLDriverConnect(DRIVER={SQL Server Native Client 11.0};database=kn;server
=host\kartografiesql;uid=landa;pwd=xxx)

Note that I had to install on Windows machine SQL Server Native Client
11.0, otherwise connection failed. I tried to install such driver on
my Debian machine [1], but with no success.

Thanks for any pointers in advance! Martin

[1] https://emacstragic.net/2017/11/06/mssql-odbc-client-on-debian-9-stretch/

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Sun May  6 04:06:44 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 6 May 2018 13:06:44 +0200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
Message-ID: <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>

2018-05-06 12:53 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> $ ogrinfo "MSSQL:database=kn;server=host\kartografiesql;uid=landa;pwd=xxx;driver=ODBC
> Driver 11 for SQL Server" --config CPL_DEBUG ON
>
> fails with
>
> ODBC: SQLDriverConnect(database=kn;server=host\kartografiesql;uid=landa;pwd=xxx;driver=ODBC
> Driver 11 for SQL Server)
> ODBC: ... failed: [unixODBC][Microsoft][ODBC Driver 11 for SQL
> Server]Login timeout expired
> ODBC: SQLDisconnect()

same results with "Microsoft ODBC Driver 17 for SQL Server" (original
Debian 9 package used)

ERROR 1: Unable to initialize connection to the server for
MSSQL:database=kn;server=hostkartografiesql;uid=landa;pwd=xxx;driver=ODBC
Driver 17 for SQL Server,
[unixODBC][Microsoft][ODBC Driver 17 for SQL Server]Login timeout expired
Try specifying the driver in the connection string from the list of
available drivers:
ODBC Driver 17 for SQL Server

Ma

[1] https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-2017

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Sun May  6 14:06:54 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 6 May 2018 23:06:54 +0200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
Message-ID: <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>

Hi,

2018-05-06 13:06 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

For record, I managed to connect to MSSQL DB using tdsodbc

sudo apt install unixodbc freetds-bin tdsodbc

[SQL Server]
Description = FreeTDS driver
Driver = /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so
Setup = /usr/lib/x86_64-linux-gnu/odbc/libtdsS.so
FileUsage = 1
UsageCount = 1

It works perfectly!

Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Sun May  6 14:22:18 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 06 May 2018 23:22:18 +0200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
Message-ID: <5537738.Uk340QAFqN@even-i700>

On dimanche 6 mai 2018 23:06:54 CEST Martin Landa wrote:
> Hi,
> 
> 2018-05-06 13:06 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> 
> For record, I managed to connect to MSSQL DB using tdsodbc
> 
> sudo apt install unixodbc freetds-bin tdsodbc
> 
> [SQL Server]
> Description = FreeTDS driver
> Driver = /usr/lib/x86_64-linux-gnu/odbc/libtdsodbc.so
> Setup = /usr/lib/x86_64-linux-gnu/odbc/libtdsS.so
> FileUsage = 1
> UsageCount = 1
> 
> It works perfectly!

Would be a good hint for the driver documentation page.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180506/948fc461/attachment.html>

From landa.martin at gmail.com  Sun May  6 14:33:05 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 6 May 2018 23:33:05 +0200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <5537738.Uk340QAFqN@even-i700>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
 <5537738.Uk340QAFqN@even-i700>
Message-ID: <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>

Hi,

2018-05-06 23:22 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Would be a good hint for the driver documentation page.

Will do later (probably tomorrow). Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From palmerjnz at gmail.com  Sun May  6 16:37:01 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Mon, 7 May 2018 11:37:01 +1200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
 <5537738.Uk340QAFqN@even-i700>
 <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>
Message-ID: <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>

Note I alway found the FreeTDS driver would truncate values on rows that
contained large geometries. Can't remember the size limit though. Would be
interesting to know why the LINUX native driver doesn't work.

On Mon, May 7, 2018 at 9:33 AM, Martin Landa <landa.martin at gmail.com> wrote:

> Hi,
>
> 2018-05-06 23:22 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> > Would be a good hint for the driver documentation page.
>
> Will do later (probably tomorrow). Ma
>
> --
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180507/28485b7f/attachment.html>

From landa.martin at gmail.com  Mon May  7 00:36:31 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 7 May 2018 09:36:31 +0200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
 <5537738.Uk340QAFqN@even-i700>
 <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>
 <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>
Message-ID: <CA+Ei1Ofas-o+ck4sngbPg4jtp8pSsUFbsuQNp5urhMg1_+ERNA@mail.gmail.com>

Hi,

2018-05-07 1:37 GMT+02:00 Jeremy Palmer <palmerjnz at gmail.com>:
> Note I alway found the FreeTDS driver would truncate values on rows that
> contained large geometries. Can't remember the size limit though. Would be

thanks for warning, in my case I do not care about geometries, so it's fine.

> interesting to know why the LINUX native driver doesn't work.

Right, would be useful. Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Mon May  7 03:14:46 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Mon, 7 May 2018 12:14:46 +0200
Subject: [gdal-dev] mssql append fails for non-geometry layers
In-Reply-To: <CA+Ei1Oeud89fAixeN2+j-6jG6DWs_dJ8K+5P_W6nOha6Cmtj9g@mail.gmail.com>
References: <CA+Ei1OfS+wrYk0iB49iXgkRrpDZ0UR98gxJP464Lt2CpDLXZ0A@mail.gmail.com>
 <CACALY+Qdy1mvsChKUtKEkP3ySAFrvV+zW737aL4eKw-K52N5Gw@mail.gmail.com>
 <CA+Ei1Oeud89fAixeN2+j-6jG6DWs_dJ8K+5P_W6nOha6Cmtj9g@mail.gmail.com>
Message-ID: <CA+Ei1OdaMXeZZ7FbQwAwn0LU6-xiNAPjYTxCyRmO38y2FHVoPA@mail.gmail.com>

Hi,

2018-05-04 14:50 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> ERROR 1: No column definitions found for table 'dbo.vla', layer not usable.

it's source of problems. Client fails to get column definitions [1].
Then GDAL tries to overwrite layer which fails [2].

Running SQL Server 2014.

Ma

[1] https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_odbc.cpp#L1488
[2] https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrsf_frmts/mssqlspatial/ogrmssqlspatialtablelayer.cpp#L205

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Tue May  8 09:44:30 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 8 May 2018 18:44:30 +0200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
 <5537738.Uk340QAFqN@even-i700>
 <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>
 <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>
Message-ID: <CA+Ei1OdsQUUPaLAJdkCaUuBRh0aPRPkYXW3G2XkuL9Hw2TFpjQ@mail.gmail.com>

Hi,

2018-05-07 1:37 GMT+02:00 Jeremy Palmer <palmerjnz at gmail.com>:
> Note I alway found the FreeTDS driver would truncate values on rows that
> contained large geometries. Can't remember the size limit though. Would be
> interesting to know why the LINUX native driver doesn't work.

my experience is even worse. It truncate in my case all strings (even
short strings with two characters). Just first character is written do
DB! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From szekerest at gmail.com  Tue May  8 09:59:27 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue, 8 May 2018 18:59:27 +0200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CA+Ei1OdsQUUPaLAJdkCaUuBRh0aPRPkYXW3G2XkuL9Hw2TFpjQ@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
 <5537738.Uk340QAFqN@even-i700>
 <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>
 <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>
 <CA+Ei1OdsQUUPaLAJdkCaUuBRh0aPRPkYXW3G2XkuL9Hw2TFpjQ@mail.gmail.com>
Message-ID: <CACALY+RsSQEyYDDr7Uz75b5QA1EWD0pWbFOL47bUfUi==kQjvg@mail.gmail.com>

What if you disable bulk insert with "-config MSSQLSPATIAL_USE_BCP NO" ?

Best regards,

Tamas


2018-05-08 18:44 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2018-05-07 1:37 GMT+02:00 Jeremy Palmer <palmerjnz at gmail.com>:
> > Note I alway found the FreeTDS driver would truncate values on rows that
> > contained large geometries. Can't remember the size limit though. Would
> be
> > interesting to know why the LINUX native driver doesn't work.
>
> my experience is even worse. It truncate in my case all strings (even
> short strings with two characters). Just first character is written do
> DB! Martin
>
> --
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180508/b75a6bfe/attachment.html>

From mateusz at loskot.net  Tue May  8 13:06:30 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 08 May 2018 20:06:30 +0000
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CA+Ei1OdsQUUPaLAJdkCaUuBRh0aPRPkYXW3G2XkuL9Hw2TFpjQ@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
 <5537738.Uk340QAFqN@even-i700>
 <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>
 <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>
 <CA+Ei1OdsQUUPaLAJdkCaUuBRh0aPRPkYXW3G2XkuL9Hw2TFpjQ@mail.gmail.com>
Message-ID: <CABUeae-rB1bkEq3cj2MqfQrNYQk+hGB_qdBjxBxs8Yz9UC41eA@mail.gmail.com>

FYI, the SQL Server Native Client is not the best choice to connect to the
latest MSSQL.
You may want to to switch to the new driver available for both, Linux and
Windows

https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server

Mateusz Loskot, mateusz at loskot.net
(Sent from mobile)

On Tue, 8 May 2018, 18:44 Martin Landa, <landa.martin at gmail.com> wrote:

> Hi,
>
> 2018-05-07 1:37 GMT+02:00 Jeremy Palmer <palmerjnz at gmail.com>:
> > Note I alway found the FreeTDS driver would truncate values on rows that
> > contained large geometries. Can't remember the size limit though. Would
> be
> > interesting to know why the LINUX native driver doesn't work.
>
> my experience is even worse. It truncate in my case all strings (even
> short strings with two characters). Just first character is written do
> DB! Martin
>
> --
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180508/664b19f9/attachment.html>

From palmerjnz at gmail.com  Tue May  8 13:10:42 2018
From: palmerjnz at gmail.com (Jeremy Palmer)
Date: Wed, 9 May 2018 08:10:42 +1200
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CABUeae-rB1bkEq3cj2MqfQrNYQk+hGB_qdBjxBxs8Yz9UC41eA@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
 <5537738.Uk340QAFqN@even-i700>
 <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>
 <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>
 <CA+Ei1OdsQUUPaLAJdkCaUuBRh0aPRPkYXW3G2XkuL9Hw2TFpjQ@mail.gmail.com>
 <CABUeae-rB1bkEq3cj2MqfQrNYQk+hGB_qdBjxBxs8Yz9UC41eA@mail.gmail.com>
Message-ID: <CAA5WJYmx-ZMxoXc3O+L6DM5x+zMLpc7JuDSY3Uqu+v1_RehSUQ@mail.gmail.com>

But does the ODBC driver support the BCP (bulk copy) API? That was the
original reason to use the native client.

On Wed, May 9, 2018 at 8:06 AM, Mateusz Loskot <mateusz at loskot.net> wrote:

> FYI, the SQL Server Native Client is not the best choice to connect to the
> latest MSSQL.
> You may want to to switch to the new driver available for both, Linux and
> Windows
>
> https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/
> installing-the-microsoft-odbc-driver-for-sql-server
>
> Mateusz Loskot, mateusz at loskot.net
> (Sent from mobile)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180509/612a8a7f/attachment.html>

From mateusz at loskot.net  Tue May  8 13:29:43 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 08 May 2018 20:29:43 +0000
Subject: [gdal-dev] connect mssql from linux
In-Reply-To: <CAA5WJYmx-ZMxoXc3O+L6DM5x+zMLpc7JuDSY3Uqu+v1_RehSUQ@mail.gmail.com>
References: <CA+Ei1OdnCu0kF8yKWJBCE85oGk4K8aUnt3-OQCoGeG3OqtVonw@mail.gmail.com>
 <CA+Ei1OdK-53941J7qqqCG5OPU98yb1k=qBdD3nmXyVaa_AeYVw@mail.gmail.com>
 <CA+Ei1OeoL=6MF0HnXY=Z0uWLibYWrSWOuDLHaSipAYsjQ-cABQ@mail.gmail.com>
 <5537738.Uk340QAFqN@even-i700>
 <CA+Ei1Oeb+wtLe4uVANXUod=3R4_2vZkzAGbwr6ioTXmsGtBH7w@mail.gmail.com>
 <CAA5WJYkyUYbYVEfS9VXqmaPQFd8VamxUxz97jr_TpGN79xCv_g@mail.gmail.com>
 <CA+Ei1OdsQUUPaLAJdkCaUuBRh0aPRPkYXW3G2XkuL9Hw2TFpjQ@mail.gmail.com>
 <CABUeae-rB1bkEq3cj2MqfQrNYQk+hGB_qdBjxBxs8Yz9UC41eA@mail.gmail.com>
 <CAA5WJYmx-ZMxoXc3O+L6DM5x+zMLpc7JuDSY3Uqu+v1_RehSUQ@mail.gmail.com>
Message-ID: <CABUeae8mX1vzXVA3=kA5AQKdnpMN=gGLqg91dU3WpXzR3t+VFw@mail.gmail.com>

AFAIK, yes the new driver does support the extension API (I think the
driver installer let's you to install SDK for it).
The bcp utility that uses the driver is available on Linux.

Mateusz Loskot, mateusz at loskot.net
(Sent from mobile)

On Tue, 8 May 2018, 22:10 Jeremy Palmer, <palmerjnz at gmail.com> wrote:

> But does the ODBC driver support the BCP (bulk copy) API? That was the
> original reason to use the native client.
>
> On Wed, May 9, 2018 at 8:06 AM, Mateusz Loskot <mateusz at loskot.net> wrote:
>
>> FYI, the SQL Server Native Client is not the best choice to connect to
>> the latest MSSQL.
>> You may want to to switch to the new driver available for both, Linux and
>> Windows
>>
>>
>> https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server
>>
>> Mateusz Loskot, mateusz at loskot.net
>> (Sent from mobile)
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180508/64667764/attachment.html>

From even.rouault at spatialys.com  Tue May  8 23:58:13 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 May 2018 08:58:13 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.3.0 RC1 for release
Message-ID: <2364756.lHEhSK7TjM@even-i700>

Hi,

No critical issues have been raised on RC1, so

-------

Motion: GDAL/OGR 2.3.0 RC1 is promoted to be the official 2.3.0 final release.

-------

My vote: +1

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180509/002c99db/attachment.html>

From landa.martin at gmail.com  Wed May  9 00:16:47 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Wed, 9 May 2018 09:16:47 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.3.0 RC1 for release
In-Reply-To: <2364756.lHEhSK7TjM@even-i700>
References: <2364756.lHEhSK7TjM@even-i700>
Message-ID: <CA+Ei1OfSY87nKEviLGbOhrhtbg2sy49J90k32ro1B0r6_7q1qg@mail.gmail.com>

Hi,

2018-05-09 8:58 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> No critical issues have been raised on RC1, so

not critical, but would be nice [1]. Ma

[1] https://github.com/OSGeo/gdal/issues/586

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From jukka.rahkonen at maanmittauslaitos.fi  Wed May  9 01:11:19 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 9 May 2018 08:11:19 +0000
Subject: [gdal-dev] Ogr2ogr, SQLite and overwriting existing database
Message-ID: <2d7721f43ddf4f3a95588c3513c6c049@C119S212VM042.msvyvi.vaha.local>

Hi,

What is the expected behavior if user asks ogr2ogr to create a SQLite database that already exists? The driver page http://www.gdal.org/drv_sqlite.html tells that
"The SQLite driver supports creating new SQLite database files, or adding tables to existing ones. Note that a new database file cannot be created over an existing file."

However, all these commands do overwrite the existing SQlite database

ogr2ogr -f sqlite -dsco spatialite=yes foo.sqlite foo.jml
ogr2ogr -f sqlite foo.sqlite foo.jml
ogr2ogr -f gpkg foo.gpkg foo.jml

But if I lock the existing database by creating a connection into it I get these messages:
ERROR 1: A file system object called 'foo.gpkg' already exists.
ERROR 1: gpkg driver failed to create foo.gpkg

Does "ERROR 1: A file system object called 'foo.gpkg' already exists." mean that the purpose to prevent overwriting but the check does not work? I have been using quit overwriting as a feature but is it actually a bug?

-Jukka Rahkonen-


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180509/aa42de43/attachment-0001.html>

From howard at hobu.co  Wed May  9 06:44:35 2018
From: howard at hobu.co (Howard Butler)
Date: Wed, 9 May 2018 08:44:35 -0500
Subject: [gdal-dev] Motion: Promote GDAL 2.3.0 RC1 for release
In-Reply-To: <2364756.lHEhSK7TjM@even-i700>
References: <2364756.lHEhSK7TjM@even-i700>
Message-ID: <a2bd1910-985c-3420-ce06-4eca71aa1a0e@hobu.co>



On 5/9/18 1:58 AM, Even Rouault wrote:
> Hi,
>
> No critical issues have been raised on RC1, so
>
> -------
>
> Motion: GDAL/OGR 2.3.0 RC1 is promoted to be the official 2.3.0 final release.
>
> -------
>
> My vote: +1

+1

Howard

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 528 bytes
Desc: OpenPGP digital signature
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180509/a2c5715d/attachment.sig>

From even.rouault at spatialys.com  Wed May  9 09:42:31 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 09 May 2018 18:42:31 +0200
Subject: [gdal-dev] Ogr2ogr, SQLite and overwriting existing database
In-Reply-To: <2d7721f43ddf4f3a95588c3513c6c049@C119S212VM042.msvyvi.vaha.local>
References: <2d7721f43ddf4f3a95588c3513c6c049@C119S212VM042.msvyvi.vaha.local>
Message-ID: <1575060.DfhnEqDncD@even-i700>

Hi,

> What is the expected behavior if user asks ogr2ogr to create a SQLite
> database that already exists? The driver page
> http://www.gdal.org/drv_sqlite.html tells that "The SQLite driver supports
> creating new SQLite database files, or adding tables to existing ones. Note
> that a new database file cannot be created over an existing file."

Outdated statement from 1.X era (just removed it). Now that the SQLite driver is a GDAL 
driver, it follows the general mechanism of deleting the existing file.

> 
> But if I lock the existing database by creating a connection into it I get
> these messages: ERROR 1: A file system object called 'foo.gpkg' already
> exists.
> ERROR 1: gpkg driver failed to create foo.gpkg
> 
> Does "ERROR 1: A file system object called 'foo.gpkg' already exists." mean
> that the purpose to prevent overwriting but the check does not work? I have
> been using quit overwriting as a feature but is it actually a bug?

This is a particularity of the GPKG driver. The file should have normally deleted but due t thhe 
lock QuietDelete() failed. And the GPKG driver has a specific code to prevent overwriting of 
an exiting file in its Create() method. In fact it errors out if APPEND_SUBDATASET=YES is not 
specified, and if it is specified it happens a new raster dataset to the existing file

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180509/00f0b0fa/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed May  9 12:50:15 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 9 May 2018 19:50:15 +0000
Subject: [gdal-dev] Ogr2ogr, SQLite and overwriting existing database
Message-ID: <650b5e433b5a4593a0d916506207500f@C119S212VM042.msvyvi.vaha.local>

Hi Even,

Thanks for the clarification. By the way, the behavior with QuietDelete may be different with  SQLite driver but the messages are the same:

GDAL: GDALOpen(foo.sqlite, this=0000000001DD6450) succeeds as SQLite.
RASTERLITE: SQLite DB Open
OGR: Unloading VirtualOGR module
GDAL: GDALClose(foo.sqlite, this=0000000001DD6450)
SQLITE: OGR style SQLite DB found !
OGR: Unloading VirtualOGR module
GDAL: QuietDelete(foo.sqlite) invoking Delete()
GDAL: GDALDriver::Create(SQLite,foo.sqlite,0,0,0,Unknown,0000000000000000)
ERROR 1: It seems a file system object called 'foo.sqlite' already exists.
ERROR 1: sqlite driver failed to create foo.sqlite

-Jukka-


Lähettäjä: Even Rouault [mailto:even.rouault at spatialys.com]
Lähetetty: 9. toukokuuta 2018 19:43
Vastaanottaja: gdal-dev at lists.osgeo.org
Kopio: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] Ogr2ogr, SQLite and overwriting existing database


Hi,



> What is the expected behavior if user asks ogr2ogr to create a SQLite

> database that already exists? The driver page

> http://www.gdal.org/drv_sqlite.html tells that "The SQLite driver supports

> creating new SQLite database files, or adding tables to existing ones. Note

> that a new database file cannot be created over an existing file."



Outdated statement from 1.X era (just removed it). Now that the SQLite driver is a GDAL driver, it follows the general mechanism of deleting the existing file.



>

> But if I lock the existing database by creating a connection into it I get

> these messages: ERROR 1: A file system object called 'foo.gpkg' already

> exists.

> ERROR 1: gpkg driver failed to create foo.gpkg

>

> Does "ERROR 1: A file system object called 'foo.gpkg' already exists." mean

> that the purpose to prevent overwriting but the check does not work? I have

> been using quit overwriting as a feature but is it actually a bug?



This is a particularity of the GPKG driver. The file should have normally deleted but due t thhe lock QuietDelete() failed. And the GPKG driver has a specific code to prevent overwriting of an exiting file in its Create() method. In fact it errors out if APPEND_SUBDATASET=YES is not specified, and if it is specified it happens a new raster dataset to the existing file



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180509/f201d2c9/attachment.html>

From guyd at satellogic.com  Thu May 10 04:25:31 2018
From: guyd at satellogic.com (Guy Doulberg)
Date: Thu, 10 May 2018 14:25:31 +0300
Subject: [gdal-dev] '/vsicurl/https://` does not exist in the file system,
 and is not recognized as a supported dataset name.
Message-ID: <CAJ18MZqOk9cKLJ3CdZrY3np7o_u=Jzgk4Jxh1Hx7wf-uUUMOmg@mail.gmail.com>

Hi,

We are encountering some issue with vsicurl, we are trying to use VSICURL
to do range queries on rasters that are in azure blob storage,

We convert the azure blob to https, and in most cases it works well for us.

In our execution log we see the following message:


'/vsicurl/https://<a valid url>` does not exist in the file system, and is
not recognized as a supported dataset name.

The message appears with different urls every now and then.

When trying to reproduce the issue in the lab we can't, the VSICURL works
well with the same url.

I can't share these urls, they are pointing to our company rasters, but
they look like:

https://<blob
url>?sig=ddsadas&sp=r&sv=2017-04-17&se=2018-05-10T10%3A12%3A23Z&sr=b


Did any of experienced something similar,

One more thing: we are using GDAL version 1.10.1 I know it is old,
Do you know, if the issue might have been fixed in recent versions?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180510/77941541/attachment.html>

From even.rouault at spatialys.com  Thu May 10 04:47:57 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 10 May 2018 13:47:57 +0200
Subject: [gdal-dev] '/vsicurl/https://` does not exist in the file
	system, and is not recognized as a supported dataset name.
In-Reply-To: <CAJ18MZqOk9cKLJ3CdZrY3np7o_u=Jzgk4Jxh1Hx7wf-uUUMOmg@mail.gmail.com>
References: <CAJ18MZqOk9cKLJ3CdZrY3np7o_u=Jzgk4Jxh1Hx7wf-uUUMOmg@mail.gmail.com>
Message-ID: <2089005.CvAjpy1XV2@even-i700>

Guy,

> We are encountering some issue with vsicurl, we are trying to use VSICURL
> to do range queries on rasters that are in azure blob storage,
> 
> We convert the azure blob to https, and in most cases it works well for us.
> 
> In our execution log we see the following message:
> 
> 
> '/vsicurl/https://<a valid url>` does not exist in the file system, and is
> not recognized as a supported dataset name.
> 
> The message appears with different urls every now and then.

Couldn't that be just network access failures ?
You could try to enable curl traces by setting the CPL_CURL_VERBOSE environment variable 
to YES.

> One more thing: we are using GDAL version 1.10.1 I know it is old,
> Do you know, if the issue might have been fixed in recent versions?

Hard to tell if that would fix the issue you are seeing, but there have been a flow of changes 
in that area, including during the 2.3.0 development cycle so I'd suggest you to have a try at 
2.3.0RC1
And it has native support for Azure blobs (computing automatically the signature):
http://gdal.org/gdal_virtual_file_systems.html#gdal_virtual_file_systems_vsiaz

And if the random network failures hypothsis is correct, you could test setting the 
GDAL_HTTP_MAX_RETRY  environment variable (new to GDAL 2.3 in the /vsicurl/ and related 
file systems)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180510/6acb2bc7/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu May 10 08:09:32 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 10 May 2018 08:09:32 -0700 (MST)
Subject: [gdal-dev] Motion: Promote GDAL 2.3.0 RC1 for release
In-Reply-To: <2364756.lHEhSK7TjM@even-i700>
References: <2364756.lHEhSK7TjM@even-i700>
Message-ID: <1525964972721-0.post@n6.nabble.com>

Even Rouault-2 wrote
> Hi,
> 
> No critical issues have been raised on RC1, so
> -------
> Motion: GDAL/OGR 2.3.0 RC1 is promoted to be the official 2.3.0 final
> release.
> -------
> My vote: +1

+1

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From landa.martin at gmail.com  Thu May 10 10:18:56 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Thu, 10 May 2018 19:18:56 +0200
Subject: [gdal-dev] mssql import speed
Message-ID: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>

Hi,

I wonder how to speed up import to MSSQL. I have testing SQLite DB
(~1GB) with 48 tables (overall number of records 11e6). I started with

$ ogr2ogr -f MSSQLSpatial MSSQL:... test.db

It took more than 3hours! Tested on Windows computer with SQL Server
2012. I used SQL Server Native Client 11.0.

So I tried to enable BCP (which should be enable anyway) and increased its size:

$ ogr2ogr -f MSSQLSpatial MSSQL:... --config MSSQLSPATIAL_USE_BCP YES
--config MSSQLSPATIAL_BCP_SIZE 10000 test.db

No difference, more than 3 hours. Anything I could miss?  It's my
first experience with MSSQL. Anything related to configuration or so?
Thanks for pointers in advance! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From szekerest at gmail.com  Thu May 10 13:30:52 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 10 May 2018 22:30:52 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
Message-ID: <CACALY+TqA+Y=O0OqGagzSQ9-0mnU06K_ukQBgZpNct+2b7QP7g@mail.gmail.com>

Hi Martin,

Try to check in the SQL profiler that the BCP was successfully enabled and
not plain insert statements are executed. (ie. the BCP enabled plugin was
loaded)
If BCP was enabled you might also try to load data on the server machine,
so the network doesn't limit the bandwidth.

Otherwise we don't seem to have more options.

Best regards,

Tamas


2018-05-10 19:18 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> I wonder how to speed up import to MSSQL. I have testing SQLite DB
> (~1GB) with 48 tables (overall number of records 11e6). I started with
>
> $ ogr2ogr -f MSSQLSpatial MSSQL:... test.db
>
> It took more than 3hours! Tested on Windows computer with SQL Server
> 2012. I used SQL Server Native Client 11.0.
>
> So I tried to enable BCP (which should be enable anyway) and increased its
> size:
>
> $ ogr2ogr -f MSSQLSpatial MSSQL:... --config MSSQLSPATIAL_USE_BCP YES
> --config MSSQLSPATIAL_BCP_SIZE 10000 test.db
>
> No difference, more than 3 hours. Anything I could miss?  It's my
> first experience with MSSQL. Anything related to configuration or so?
> Thanks for pointers in advance! Martin
>
> --
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180510/8875741d/attachment.html>

From dmorissette at mapgears.com  Thu May 10 13:52:55 2018
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 10 May 2018 16:52:55 -0400
Subject: [gdal-dev] Motion: Promote GDAL 2.3.0 RC1 for release
In-Reply-To: <2364756.lHEhSK7TjM@even-i700>
References: <2364756.lHEhSK7TjM@even-i700>
Message-ID: <ae6bccef-6f0b-8c00-7d6f-28fd363b1779@mapgears.com>

+1

Daniel


On 2018-05-09 2:58 AM, Even Rouault wrote:
> Hi,
> 
> No critical issues have been raised on RC1, so
> 
> -------
> 
> Motion: GDAL/OGR 2.3.0 RC1 is promoted to be the official 2.3.0 final 
> release.
> 
> -------
> 
> My vote: +1
> 
> -- 
> 
> Spatialys - Geospatial professional services
> 
> http://www.spatialys.com
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From szekerest at gmail.com  Thu May 10 14:05:29 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 10 May 2018 23:05:29 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.3.0 RC1 for release
In-Reply-To: <2364756.lHEhSK7TjM@even-i700>
References: <2364756.lHEhSK7TjM@even-i700>
Message-ID: <CACALY+R_oXOyCKMQ4A3dn+2ZCq7aCfgvHNmWghcvnLCo5-3JiQ@mail.gmail.com>

+1

Tamas

2018-05-09 8:58 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> Hi,
>
>
>
> No critical issues have been raised on RC1, so
>
>
>
> -------
>
>
>
> Motion: GDAL/OGR 2.3.0 RC1 is promoted to be the official 2.3.0 final
> release.
>
>
>
> -------
>
>
>
> My vote: +1
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180510/54d608ae/attachment.html>

From mj10777 at googlemail.com  Thu May 10 18:51:36 2018
From: mj10777 at googlemail.com (Mark Johnson)
Date: Fri, 11 May 2018 03:51:36 +0200
Subject: [gdal-dev] gdal_translate: adding a gcp_file parameter useful?
Message-ID: <CAEEbjBiis_04Wz3WQZ4CM2JcfT=GJ3hePVUv65-15QZJ+00yYA@mail.gmail.com>

Would adding a '-gcp_file' as a input parameter, that would contain the
list of gcp's to be used, be considered useful?

Often the gcp list could be created programmaticly and saved to file, which
would simplify the use from a script.

Mark
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180511/bd2b90cf/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri May 11 00:04:42 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 11 May 2018 00:04:42 -0700 (MST)
Subject: [gdal-dev] gdal_translate: adding a gcp_file parameter useful?
In-Reply-To: <CAEEbjBiis_04Wz3WQZ4CM2JcfT=GJ3hePVUv65-15QZJ+00yYA@mail.gmail.com>
References: <CAEEbjBiis_04Wz3WQZ4CM2JcfT=GJ3hePVUv65-15QZJ+00yYA@mail.gmail.com>
Message-ID: <1526022282998-0.post@n6.nabble.com>

mj10777 wrote
> Would adding a '-gcp_file' as a input parameter, that would contain the
> list of gcp's to be used, be considered useful?
> 
> Often the gcp list could be created programmaticly and saved to file,
> which
> would simplify the use from a script.
> 
> Mark

Hi,

Have you tried the generic --optfile option
http://www.gdal.org/gdal_utilities.html?

-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From landa.martin at gmail.com  Fri May 11 00:10:38 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 11 May 2018 09:10:38 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
Message-ID: <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>

Hi,

2018-05-10 19:18 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> It took more than 3hours! Tested on Windows computer with SQL Server
> 2012. I used SQL Server Native Client 11.0.

sorry, typo, I have SQL Server 2014. Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Fri May 11 03:23:59 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 May 2018 12:23:59 +0200
Subject: [gdal-dev] Motion: Promote GDAL 2.3.0 RC1 for release
In-Reply-To: <2364756.lHEhSK7TjM@even-i700>
References: <2364756.lHEhSK7TjM@even-i700>
Message-ID: <2007766.MKEMxlYaC8@even-i700>

On mercredi 9 mai 2018 08:58:13 CEST Even Rouault wrote:
> Hi,
> 
> No critical issues have been raised on RC1, so
> 
> -------
> 
> Motion: GDAL/OGR 2.3.0 RC1 is promoted to be the official 2.3.0 final
> release.
> 
> -------
> 
> My vote: +1

I declare this motion passed with +1 from PSC members: EvenR, HowardB, JukkaR, DanielM 
and TamasS

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180511/d2064eb8/attachment-0001.html>

From even.rouault at spatialys.com  Fri May 11 04:03:28 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 May 2018 13:03:28 +0200
Subject: [gdal-dev] GDAL 2.3.0 is released
Message-ID: <2184664.fdbCBTW3AK@even-i700>

Hi,

On behalf of the GDAL/OGR development team and community, I am pleased to
announce the release of GDAL/OGR 2.3.0.  GDAL/OGR is a C++ geospatial
data access library for raster and vector file formats, databases and
web services.  It includes bindings for several languages, and a variety
of command line tools.

   http://www.gdal.org/

The 2.3.0 release is a new feature release with the following highlights:

 * New GDAL drivers:
   - PDS4: read/write
   - RDA: DigitalGlobe Raster Data Access (read-only)
 * New OGR drivers:
   - MVT: add read/write driver for Mapbox Vector Tile standalone files or tilesets
   - ESRIJson and TopoJSON: read-only, splitted from existing code of the GeoJSON driver
   - WFS3: *experimental* read-only driver
 * RFC 68: Make C++11 a build requirement
    https://trac.osgeo.org/gdal/wiki/rfc68_cplusplus11
 * RFC 70: Guess output format from extension of output filename,
    if no explicit format passed to C++ or Python utilities
    https://trac.osgeo.org/gdal/wiki/rfc70_output_format_guess
 * RFC 71: Move to GitHub for source code repository and issue tracker.
    https://trac.osgeo.org/gdal/wiki/rfc71_github_migration
 * Significantly improved drivers:
    - MBTiles (vector tiles support)
    - DXF
    - GRIB (GRIB2 write support)
    - WCS (support WCS 2.0)
 * Improvements in network-based /vsi handlers: /vsicurl, /vsis3, /vsigs. Add:
     - /vsiaz for Microsoft Azure Blobs
     - /vsioss for Alibaba Cloud Object Storage Service
     - /vsiswift/ for OpenStack Swift object storage
 * Command line utilities: use Unicode main on Windows to avoid issues with non-ASCII characters (#7065)
 * Update to EPSG v9.2 (#7125)
 * Update data/esri_extra.wkt and add data/esri_epsg.wkt,
    taken from https://github.com/Esri/projection-engine-db-doc (Apache v2 license) (#2163)
 * Add support for PROJ.5 new API (requires proj 5.0.1 or later)
 * More than 1000 fixes for issues/vulnerabilities found by OSS-Fuzz
 * Remove raster OGDI driver (vector OGDI driver still there) (#7087)

More complete information on the new features and fixes in the 2.3.0
release can be found at:

  http://trac.osgeo.org/gdal/wiki/Release/2.3.0-News

The release can be downloaded from:
  * http://download.osgeo.org/gdal/2.3.0/gdal230.zip - source as a zip
  * http://download.osgeo.org/gdal/2.3.0/gdal-2.3.0.tar.gz - source as .tar.gz
  * http://download.osgeo.org/gdal/2.3.0/gdal-2.3.0.tar.xz - source as .tar.xz
  * http://download.osgeo.org/gdal/2.3.0/gdal-grass-2.3.0.tar.gz - GDAL-GRASS plugin
  * http://download.osgeo.org/gdal/2.3.0/gdalautotest-2.3.0.tar.gz - test suite
  * http://download.osgeo.org/gdal/2.3.0/gdal230doc.zip - documentation / website

The migration guide can be found at  :
      https://github.com/OSGeo/gdal/blob/release/2.3/gdal/MIGRATION_GUIDE.TXT

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180511/e69da4f0/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri May 11 09:25:39 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 11 May 2018 16:25:39 +0000
Subject: [gdal-dev] How to debug the shape open option "encoding"?
Message-ID: <f2ef4cddbff447ce97e45c979a9eb540@C119S212VM042.msvyvi.vaha.local>

Hi,

I need to run a certain job that requires open option "-oo encoding="ISO_8859-1" and while it runs fine on Windows with the OSGeo4W installation with version GDAL 2.2.4, released 2018/03/19 it leads to loads of warnings "Warning 1: Value of field 'name_field' is not a valid UTF-8 string." with the gisinternals installation GDAL 2.3.0dev, released 2017/99/99.

The shapefiles which I have are really using ISO_8859-1 and gisinternals version handles them OK without using the open option, except one. The problematic one does not have the LDID "87 / 0x57" flag in the .dbf part and therefore it is interpreted as UTF-8 if I do not use the open option. If I use the open option the gisinternals version prints the warnings about all the
Shape: Treating as encoding 'ISO_8859-1'.
Shape: Cannot recode from 'ISO_8859-1'. Disabling recoding

Is there anything else that an end user could do for finding out why the gisinternals build fails with recoding?
BTW is it documented somewhere which are the correct values for different encodings? For example in my case I had to use exactly "-oo encoding="ISO_8859-1".

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180511/db7173fa/attachment.html>

From even.rouault at spatialys.com  Fri May 11 09:40:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 May 2018 18:40:53 +0200
Subject: [gdal-dev] How to debug the shape open option "encoding"?
In-Reply-To: <f2ef4cddbff447ce97e45c979a9eb540@C119S212VM042.msvyvi.vaha.local>
References: <f2ef4cddbff447ce97e45c979a9eb540@C119S212VM042.msvyvi.vaha.local>
Message-ID: <1643033.vbbMb70XzU@even-i700>

Jukka,

AFAIR there shouldn't be significant differences of behaviour in the shapefile driver between 
2.2.4 and 2.3.0 . Can you share the problematic shapefile ?
> 
> Is there anything else that an end user could do for finding out why the
> gisinternals build fails with recoding? 

Probably not

> BTW is it documented somewhere
> which are the correct values for different encodings? For example in my
> case I had to use exactly "-oo encoding="ISO_8859-1".

This is the values supported by iconv. Might depend on iconv is compiled I guess.
But I'm a bit confused by your report. Did  "-oo encoding="ISO_8859-1" worked despite the 
warnings ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180511/fbf290b7/attachment-0001.html>

From andrew at aitchison.me.uk  Fri May 11 10:24:31 2018
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Fri, 11 May 2018 18:24:31 +0100 (BST)
Subject: [gdal-dev] How to debug the shape open option "encoding"?
In-Reply-To: <f2ef4cddbff447ce97e45c979a9eb540@C119S212VM042.msvyvi.vaha.local>
References: <f2ef4cddbff447ce97e45c979a9eb540@C119S212VM042.msvyvi.vaha.local>
Message-ID: <alpine.LRH.2.21.1805111821120.11629@warden.aitchison.me.uk>

On Fri, 11 May 2018, Rahkonen Jukka (MML) wrote:

> I need to run a certain job that requires open option
> "-oo encoding="ISO_8859-1" and while it runs fine on Windows with the
> OSGeo4W installation with version GDAL 2.2.4, released 2018/03/19 it
> leads to loads of warnings "Warning 1: Value of field 'name_field'
> is not a valid UTF-8 string." with the gisinternals installation
> GDAL 2.3.0dev, released 2017/99/99.
>
> The shapefiles which I have are really using ISO_8859-1 and
> gisinternals version handles them OK without using the open option,
> except one. The problematic one does not have the LDID "87 / 0x57"
> flag in the .dbf part and therefore it is interpreted as UTF-8 if I
> do not use the open option. If I use the open option the
> gisinternals version prints the warnings about all the

> Shape: Treating as encoding 'ISO_8859-1'.
> Shape: Cannot recode from 'ISO_8859-1'. Disabling recoding
>
> Is there anything else that an end user could do for finding out why
> the gisinternals build fails with recoding?  BTW is it documented
> somewhere which are the correct values for different encodings?
> For example in my case I had to use exactly "-oo encoding="ISO_8859-1".

... with an odd number of quotes ? Wierd.

-- 
Andrew C. Aitchison					Cambridge, UK
 			andrew at aitchison.me.uk


From jukka.rahkonen at maanmittauslaitos.fi  Fri May 11 10:50:21 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 11 May 2018 17:50:21 +0000
Subject: [gdal-dev] How to debug the shape open option "encoding"?
Message-ID: <a10d1397a13f48e4ab6910241d841aca@C119S212VM042.msvyvi.vaha.local>

Hi,

I will send a download link for you. I made conversion into GeoPackage which requires UTF8 encoding. In the following list OK means no warnings and correctly UTF encoded characters (åäöÅÄÖ) saved into gpkg database. In the "not a valid UTF-8" case I get warnings and non-ASCII characters are also written in a wrong way into GeoPackage.

OSGeo4W
.dbf with LDID "87 / 0x57" flag
ogr2ogr -f gpkg test.gpkg dr_linkki_k.shp
Result: OK
ogr2ogr -f gpkg test.gpkg dr_linkki_k.shp -oo encoding="ISO_8859-1"
Result: OK

.dbf without LDID "87 / 0x57" flag
ogr2ogr -f gpkg test.gpkg dr_linkki_k.shp
Result: "not a valid UTF-8 string" warnings
ogr2ogr -f gpkg test.gpkg dr_linkki_k.shp -oo encoding="ISO_8859-1"
Result: OK

Gisinternals build
.dbf with LDID "87 / 0x57" flag
ogr2ogr -f gpkg test.gpkg dr_linkki_k.shp
Result: OK
ogr2ogr -f gpkg test.gpkg dr_linkki_k.shp -oo encoding="ISO_8859-1"
Result: "not a valid UTF-8 string" warnings

.dbf without LDID "87 / 0x57" flag
ogr2ogr -f gpkg test.gpkg dr_linkki_k.shp
Result: "not a valid UTF-8 string" warnings
ogr2ogr -f gpkg test.gpkg dr_linkki_k.shp -oo encoding="ISO_8859-1"
Result: "not a valid UTF-8 string" warnings

-Jukka-
Lähettäjä: Even Rouault [mailto:even.rouault at spatialys.com]
Lähetetty: 11. toukokuuta 2018 19:41
Vastaanottaja: gdal-dev at lists.osgeo.org
Kopio: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Aihe: Re: [gdal-dev] How to debug the shape open option "encoding"?


Jukka,



AFAIR there shouldn't be significant differences of behaviour in the shapefile driver between 2.2.4 and 2.3.0 . Can you share the problematic shapefile ?

>

> Is there anything else that an end user could do for finding out why the

> gisinternals build fails with recoding?



Probably not



> BTW is it documented somewhere

> which are the correct values for different encodings? For example in my

> case I had to use exactly "-oo encoding="ISO_8859-1".



This is the values supported by iconv. Might depend on iconv is compiled I guess.

But I'm a bit confused by your report. Did "-oo encoding="ISO_8859-1" worked despite the warnings ?



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180511/77348291/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri May 11 11:11:36 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 11 May 2018 11:11:36 -0700 (MST)
Subject: [gdal-dev] How to debug the shape open option "encoding"?
In-Reply-To: <alpine.LRH.2.21.1805111821120.11629@warden.aitchison.me.uk>
References: <f2ef4cddbff447ce97e45c979a9eb540@C119S212VM042.msvyvi.vaha.local>
 <alpine.LRH.2.21.1805111821120.11629@warden.aitchison.me.uk>
Message-ID: <1526062296015-0.post@n6.nabble.com>

Andrew C Aitchison-2 wrote
> On Fri, 11 May 2018, Rahkonen Jukka (MML) wrote:
> 
> 
>> For example in my case I had to use exactly "-oo encoding="ISO_8859-1".
> 
> ... with an odd number of quotes ? Wierd.

Sorry for lazy proof reading. In the command line exactly 
-oo encoding="ISO_8859-1"

In http://www.gdal.org/drv_shapefile.html is kind of documentation: 
"LDID "87 / 0x57" is treated as ISO8859_1 which may not be appropriate" and
that was the string I used first with poor success.

-Jukka-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri May 11 13:43:19 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 May 2018 22:43:19 +0200
Subject: [gdal-dev] How to debug the shape open option "encoding"?
In-Reply-To: <f2ef4cddbff447ce97e45c979a9eb540@C119S212VM042.msvyvi.vaha.local>
References: <f2ef4cddbff447ce97e45c979a9eb540@C119S212VM042.msvyvi.vaha.local>
Message-ID: <2990316.mMxnGaVsAy@even-i700>

Jukka,

I believe I understood what is going on.

OSGeo4W builds do use libiconv for recoding and iconv is rather lax regarding the spelling of 
the source and target encodings. It supports at least "8859_1", "ISO-8859-1", "ISO8859-1", 
"ISO88591" and ..."ISO_8859-1" (or "LATIN1" as well)

Whereas gisinternal builds do not link against libiconv and use the GDAL builtin minimalistic 
"stub" + Windows recoding API. This interface only understands the string "ISO-8859-1", 
"UTF-8" and "CPxxx" code pages

So always use "ISO-8859-1".

I've just pushed
https://github.com/OSGeo/gdal/commit/9d3d2f715e84d9aa2ccaa72d1167a842a0bee1ed to 
have more uniformized spelling of the above.

Even

> Hi,
> 
> I need to run a certain job that requires open option "-oo
> encoding="ISO_8859-1" and while it runs fine on Windows with the OSGeo4W
> installation with version GDAL 2.2.4, released 2018/03/19 it leads to loads
> of warnings "Warning 1: Value of field 'name_field' is not a valid UTF-8
> string." with the gisinternals installation GDAL 2.3.0dev, released
> 2017/99/99.
> 
> The shapefiles which I have are really using ISO_8859-1 and gisinternals
> version handles them OK without using the open option, except one. The
> problematic one does not have the LDID "87 / 0x57" flag in the .dbf part
> and therefore it is interpreted as UTF-8 if I do not use the open option.
> If I use the open option the gisinternals version prints the warnings about
> all the Shape: Treating as encoding 'ISO_8859-1'.
> Shape: Cannot recode from 'ISO_8859-1'. Disabling recoding
> 
> Is there anything else that an end user could do for finding out why the
> gisinternals build fails with recoding? BTW is it documented somewhere
> which are the correct values for different encodings? For example in my
> case I had to use exactly "-oo encoding="ISO_8859-1".
> 
> -Jukka Rahkonen-


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180511/c954f9e1/attachment.html>

From landa.martin at gmail.com  Fri May 11 14:15:43 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 11 May 2018 23:15:43 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
 <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
Message-ID: <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>

Hi,

2018-05-11 9:10 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

I missed on testing Windows server to install gdal-dev-mss package.
But unfortunately, no improvement. BCP is still not working in my
case. I tried all available drivers, same behaviour, I am getting to
be lost. Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Fri May 11 14:36:28 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 11 May 2018 23:36:28 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
 <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
 <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>
Message-ID: <CA+Ei1Od52XGPoJqtO0motBRBTeMSQfPLn2GsU6-GwE9aho-AMQ@mail.gmail.com>

Hi,

2018-05-11 23:15 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
> I missed on testing Windows server to install gdal-dev-mss package.
> But unfortunately, no improvement. BCP is still not working in my

oh, sorry for noise, I forgot to define

 --config GDAL_DRIVER_PATH C:\OSGeo4W64\apps\gdal-dev\bin\gdalplugins

In progress, Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Fri May 11 14:51:06 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 11 May 2018 23:51:06 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1Od52XGPoJqtO0motBRBTeMSQfPLn2GsU6-GwE9aho-AMQ@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
 <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
 <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>
 <CA+Ei1Od52XGPoJqtO0motBRBTeMSQfPLn2GsU6-GwE9aho-AMQ@mail.gmail.com>
Message-ID: <CA+Ei1Oe2KpFnmJ0X-O834J3yinsoyZsobFcYKJrxd+2H-0hfCA@mail.gmail.com>

2018-05-11 23:36 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
>  --config GDAL_DRIVER_PATH C:\OSGeo4W64\apps\gdal-dev\bin\gdalplugins
>
> In progress, Ma

works like a charm, from 3 hours to 3 minutes! Thanks for packaging
gdal-mss :-) Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From ari.jolma at gmail.com  Sat May 12 00:58:13 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat, 12 May 2018 10:58:13 +0300
Subject: [gdal-dev] [OSGeo/gdal] Fix the datadir in gdal.pc. (#609)
In-Reply-To: <0db43335-8fea-fed0-ed77-2eab8fe25f9c@gmail.com>
References: <OSGeo/gdal/pull/609@github.com>
 <OSGeo/gdal/pull/609/c388475058@github.com>
 <0db43335-8fea-fed0-ed77-2eab8fe25f9c@gmail.com>
Message-ID: <70421b6a-d22f-a7f9-90eb-f80bbfda0cc2@gmail.com>

Ari Jolma kirjoitti 12.05.2018 klo 10:18:
> Even Rouault kirjoitti 11.05.2018 klo 23:19:
>>
>> cherry-pick in release/2.3
>>
>
> How do I merge a PR into another branch than master?

I made a try to -- PR #614 -- which was a mistake.

Now I did it by creating a local clone of OSGeo/gdal and 
editing/committing/pushing its release/2.3 branch.

I found this 
http://www.draconianoverlord.com/2013/09/07/no-cherry-picking.html

I wonder should I have based my PR on a version that is common to master 
and release/2.3. That PR could have been merged to both of those(?).

Ari


From even.rouault at spatialys.com  Sat May 12 01:18:31 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 May 2018 10:18:31 +0200
Subject: [gdal-dev] [OSGeo/gdal] Fix the datadir in gdal.pc. (#609)
In-Reply-To: <70421b6a-d22f-a7f9-90eb-f80bbfda0cc2@gmail.com>
References: <OSGeo/gdal/pull/609@github.com>
 <0db43335-8fea-fed0-ed77-2eab8fe25f9c@gmail.com>
 <70421b6a-d22f-a7f9-90eb-f80bbfda0cc2@gmail.com>
Message-ID: <3343290.ErcbeWR4IY@even-i700>

Ari,

> > 
> > How do I merge a PR into another branch than master?
> 
> I made a try to -- PR #614 -- which was a mistake.

It is possible to do a PR against a non-master branch, but you need to apply the commit in 
that branch, and in the GitHub UI make sure the base branch it selects is that branch.

> 
> Now I did it by creating a local clone of OSGeo/gdal and
> editing/committing/pushing its release/2.3 branch.

You can use a single clone for all branches and uses git checkout to switch branches. That 
said, as someone regularly dealing with several branches, I find it more convenient to havea 
actually one local clone per active branch I use to avoid re-configuring/making each time I 
switch.

> 
> I found this
> http://www.draconianoverlord.com/2013/09/07/no-cherry-picking.html
> 
> I wonder should I have based my PR on a version that is common to master
> and release/2.3. That PR could have been merged to both of those(?).

There are different schools regarding cherry-picking vs merging. For example, QGIS uses 
cherry-picking too. Whereas MapServer uses merging from stable branch to master.

Cherry-picking is fine to me and that's what I use.  See notes at end of CONTRIBUTING.md. I 
find it to offer more control than merging.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180512/a470b98f/attachment-0001.html>

From ari.jolma at gmail.com  Sat May 12 01:37:36 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Sat, 12 May 2018 11:37:36 +0300
Subject: [gdal-dev] [OSGeo/gdal] Fix the datadir in gdal.pc. (#609)
In-Reply-To: <3343290.ErcbeWR4IY@even-i700>
References: <OSGeo/gdal/pull/609@github.com>
 <0db43335-8fea-fed0-ed77-2eab8fe25f9c@gmail.com>
 <70421b6a-d22f-a7f9-90eb-f80bbfda0cc2@gmail.com>
 <3343290.ErcbeWR4IY@even-i700>
Message-ID: <3a476a27-8723-84de-0825-1080e2770936@gmail.com>

Even Rouault kirjoitti 12.05.2018 klo 11:18:
>
> >
>
> > Now I did it by creating a local clone of OSGeo/gdal and
>
> > editing/committing/pushing its release/2.3 branch.
>
> You can use a single clone for all branches and uses git checkout to 
> switch branches.
>

I know that but the issue here was that I had my local clone from *my 
fork* as this page seems to instruct

https://help.github.com/articles/fork-a-repo/

so my local clone did not have release/2.3.

I had also happily ignored CONTRIBUTING.md.

Thanks for the heads up.

Ari

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180512/c319aa4f/attachment.html>

From even.rouault at spatialys.com  Sat May 12 02:27:55 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 May 2018 11:27:55 +0200
Subject: [gdal-dev] [OSGeo/gdal] Fix the datadir in gdal.pc. (#609)
In-Reply-To: <3a476a27-8723-84de-0825-1080e2770936@gmail.com>
References: <OSGeo/gdal/pull/609@github.com> <3343290.ErcbeWR4IY@even-i700>
 <3a476a27-8723-84de-0825-1080e2770936@gmail.com>
Message-ID: <2814404.sLhf6oE2YP@even-i700>

On samedi 12 mai 2018 11:37:36 CEST Ari Jolma wrote:
> Even Rouault kirjoitti 12.05.2018 klo 11:18:
> > > Now I did it by creating a local clone of OSGeo/gdal and
> > > 
> > > editing/committing/pushing its release/2.3 branch.
> > 
> > You can use a single clone for all branches and uses git checkout to
> > switch branches.
> 
> I know that but the issue here was that I had my local clone from *my
> fork* as this page seems to instruct

A single clone can have several upstream sources.

For example,

$ git remote -v
origin	git at github.com:OSGeo/gdal.git (fetch)
origin	git at github.com:OSGeo/gdal.git (push)
rouault	git at github.com:rouault/gdal.git (fetch)
rouault	git at github.com:rouault/gdal.git (push)

If you don't have a branch that is only in origin, you do

$ git fetch origin
$ git checkout release/2.3


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180512/0b923193/attachment.html>

From landa.martin at gmail.com  Sat May 12 06:51:49 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 12 May 2018 15:51:49 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1Oe2KpFnmJ0X-O834J3yinsoyZsobFcYKJrxd+2H-0hfCA@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
 <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
 <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>
 <CA+Ei1Od52XGPoJqtO0motBRBTeMSQfPLn2GsU6-GwE9aho-AMQ@mail.gmail.com>
 <CA+Ei1Oe2KpFnmJ0X-O834J3yinsoyZsobFcYKJrxd+2H-0hfCA@mail.gmail.com>
Message-ID: <CA+Ei1Oe2ga3ORhZgjsRDpAHuujzt9_jFOASCQ6CgxqweuioA=A@mail.gmail.com>

Hi,

2018-05-11 23:51 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
>>  --config GDAL_DRIVER_PATH C:\OSGeo4W64\apps\gdal-dev\bin\gdalplugins
>>
>> In progress, Ma
>
> works like a charm, from 3 hours to 3 minutes! Thanks for packaging
> gdal-mss :-) Ma

well, after solving BCP issue, I have another, on empty DB the command

C:\OSGeo4W64/apps/gdal-dev/bin/ogr2ogr -f MSSQLSpatial --config
GDAL_DRIVER_PATH C:\OSGeo4W64\apps\gdal-dev\bin\gdalplugins --config
MSSQLSPATIAL_LIST_ALL_TABLES YES %connstr% %filedb%

fails with

ERROR 1: Failed to set identity insert on layer, [Microsoft][SQL Server Native C
lient 11.0][SQL Server]IDENTITY_INSERT is already ON for table 'kn2.dbo.par'. Ca
nnot perform SET operation for table 'dbo.bud'..
ERROR 1: Unable to write feature 1 from layer BUD.
ERROR 1: Terminating translation prematurely after failed
translation of layer BUD (use -skipfailures to skip errors)

Any idea would could be wrong? Thanks! Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Sat May 12 07:10:24 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 12 May 2018 16:10:24 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1Oe2ga3ORhZgjsRDpAHuujzt9_jFOASCQ6CgxqweuioA=A@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
 <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
 <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>
 <CA+Ei1Od52XGPoJqtO0motBRBTeMSQfPLn2GsU6-GwE9aho-AMQ@mail.gmail.com>
 <CA+Ei1Oe2KpFnmJ0X-O834J3yinsoyZsobFcYKJrxd+2H-0hfCA@mail.gmail.com>
 <CA+Ei1Oe2ga3ORhZgjsRDpAHuujzt9_jFOASCQ6CgxqweuioA=A@mail.gmail.com>
Message-ID: <CA+Ei1OfQVfNB8HHKkjCaNSuQFAGa0DAH-jeb7Z=gYSPZr1-hbw@mail.gmail.com>

Hi,

2018-05-12 15:51 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

> ERROR 1: Failed to set identity insert on layer, [Microsoft][SQL Server Native C
> lient 11.0][SQL Server]IDENTITY_INSERT is already ON for table 'kn2.dbo.par'. Ca
> nnot perform SET operation for table 'dbo.bud'..
> ERROR 1: Unable to write feature 1 from layer BUD.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer BUD (use -skipfailures to skip errors)

Input DB has about 50 layers, see

...
1: PAR (None)
2: BUD (None)
3: ZPOCHN (None)
...

It seems that all records from PAR layer are sucessfully writen to
target PAR table in MSSQL. Writing features from second layer (BUD)
fails. No records written. It must be related to BCP. Martin

--
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From szekerest at gmail.com  Sat May 12 07:17:37 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 12 May 2018 16:17:37 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1OfQVfNB8HHKkjCaNSuQFAGa0DAH-jeb7Z=gYSPZr1-hbw@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
 <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
 <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>
 <CA+Ei1Od52XGPoJqtO0motBRBTeMSQfPLn2GsU6-GwE9aho-AMQ@mail.gmail.com>
 <CA+Ei1Oe2KpFnmJ0X-O834J3yinsoyZsobFcYKJrxd+2H-0hfCA@mail.gmail.com>
 <CA+Ei1Oe2ga3ORhZgjsRDpAHuujzt9_jFOASCQ6CgxqweuioA=A@mail.gmail.com>
 <CA+Ei1OfQVfNB8HHKkjCaNSuQFAGa0DAH-jeb7Z=gYSPZr1-hbw@mail.gmail.com>
Message-ID: <CACALY+ShhgxLFQpdS9Q3NcyNu2d4adzrYmOJ0weSE-AUm54iPg@mail.gmail.com>

Hi Martin,

Can I get the sample data for this?
Looks like more than one table is set "IDENTITY_INSERT ON" at the same time.

Best regards,

Tamas


2018-05-12 16:10 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2018-05-12 15:51 GMT+02:00 Martin Landa <landa.martin at gmail.com>:
>
> > ERROR 1: Failed to set identity insert on layer, [Microsoft][SQL Server
> Native C
> > lient 11.0][SQL Server]IDENTITY_INSERT is already ON for table
> 'kn2.dbo.par'. Ca
> > nnot perform SET operation for table 'dbo.bud'..
> > ERROR 1: Unable to write feature 1 from layer BUD.
> > ERROR 1: Terminating translation prematurely after failed
> > translation of layer BUD (use -skipfailures to skip errors)
>
> Input DB has about 50 layers, see
>
> ...
> 1: PAR (None)
> 2: BUD (None)
> 3: ZPOCHN (None)
> ...
>
> It seems that all records from PAR layer are sucessfully writen to
> target PAR table in MSSQL. Writing features from second layer (BUD)
> fails. No records written. It must be related to BCP. Martin
>
> --
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180512/f0abacab/attachment-0001.html>

From landa.martin at gmail.com  Sat May 12 12:59:56 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 12 May 2018 21:59:56 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CACALY+ShhgxLFQpdS9Q3NcyNu2d4adzrYmOJ0weSE-AUm54iPg@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
 <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
 <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>
 <CA+Ei1Od52XGPoJqtO0motBRBTeMSQfPLn2GsU6-GwE9aho-AMQ@mail.gmail.com>
 <CA+Ei1Oe2KpFnmJ0X-O834J3yinsoyZsobFcYKJrxd+2H-0hfCA@mail.gmail.com>
 <CA+Ei1Oe2ga3ORhZgjsRDpAHuujzt9_jFOASCQ6CgxqweuioA=A@mail.gmail.com>
 <CA+Ei1OfQVfNB8HHKkjCaNSuQFAGa0DAH-jeb7Z=gYSPZr1-hbw@mail.gmail.com>
 <CACALY+ShhgxLFQpdS9Q3NcyNu2d4adzrYmOJ0weSE-AUm54iPg@mail.gmail.com>
Message-ID: <CA+Ei1Od6qNCU+=2GvzgWre-FhuXyfwB3QxtemHhXwrK5GcZk=Q@mail.gmail.com>

Hi,

2018-05-12 16:17 GMT+02:00 Tamas Szekeres <szekerest at gmail.com>:
> Can I get the sample data for this?

sure [1].

> Looks like more than one table is set "IDENTITY_INSERT ON" at the same time.

Steps to reproduce (tested with SQL Server 2014):

1) create new mssql db
2) C:\OSGeo4W64/apps/gdal-dev/bin/ogr2ogr -f MSSQLSpatial --config
GDAL_DRIVER_PATH C:\OSGeo4W64\apps\gdal-dev\bin\gdalplugins --config
MSSQLSPATIAL_LIST_ALL_TABLES YES %connstr% %filedb%

Thanks! Martin

[1] http://geo102.fsv.cvut.cz/~landa/tmp/Export_vse.db.7z

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From szekerest at gmail.com  Sun May 13 13:36:07 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun, 13 May 2018 22:36:07 +0200
Subject: [gdal-dev] mssql import speed
In-Reply-To: <CA+Ei1Od6qNCU+=2GvzgWre-FhuXyfwB3QxtemHhXwrK5GcZk=Q@mail.gmail.com>
References: <CA+Ei1OdjjWLxbBTSzAkCRcgD_G-s=2KP1_YVT5soodQykEArTw@mail.gmail.com>
 <CA+Ei1Of0d0ipiA7fAwVuRUCGSb95GQ2CNHwtbVis_2NorOr3Uw@mail.gmail.com>
 <CA+Ei1OeeCPRrbN+_g3MY4uUp+-9H_46vQuHfu4NpDYkrsB+Gmw@mail.gmail.com>
 <CA+Ei1Od52XGPoJqtO0motBRBTeMSQfPLn2GsU6-GwE9aho-AMQ@mail.gmail.com>
 <CA+Ei1Oe2KpFnmJ0X-O834J3yinsoyZsobFcYKJrxd+2H-0hfCA@mail.gmail.com>
 <CA+Ei1Oe2ga3ORhZgjsRDpAHuujzt9_jFOASCQ6CgxqweuioA=A@mail.gmail.com>
 <CA+Ei1OfQVfNB8HHKkjCaNSuQFAGa0DAH-jeb7Z=gYSPZr1-hbw@mail.gmail.com>
 <CACALY+ShhgxLFQpdS9Q3NcyNu2d4adzrYmOJ0weSE-AUm54iPg@mail.gmail.com>
 <CA+Ei1Od6qNCU+=2GvzgWre-FhuXyfwB3QxtemHhXwrK5GcZk=Q@mail.gmail.com>
Message-ID: <CACALY+R_cG+Uh7y2PCgGpwZdDRDezyPs9bOkuzpLDBuEc7huTQ@mail.gmail.com>

Hi Martin,

Thanks for the data.
Fixed this one in this PR:

https://github.com/OSGeo/gdal/pull/621

Best regards,

Tamas

2018-05-12 21:59 GMT+02:00 Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2018-05-12 16:17 GMT+02:00 Tamas Szekeres <szekerest at gmail.com>:
> > Can I get the sample data for this?
>
> sure [1].
>
> > Looks like more than one table is set "IDENTITY_INSERT ON" at the same
> time.
>
> Steps to reproduce (tested with SQL Server 2014):
>
> 1) create new mssql db
> 2) C:\OSGeo4W64/apps/gdal-dev/bin/ogr2ogr -f MSSQLSpatial --config
> GDAL_DRIVER_PATH C:\OSGeo4W64\apps\gdal-dev\bin\gdalplugins --config
> MSSQLSPATIAL_LIST_ALL_TABLES YES %connstr% %filedb%
>
> Thanks! Martin
>
> [1] http://geo102.fsv.cvut.cz/~landa/tmp/Export_vse.db.7z
>
> --
> Martin Landa
> http://geo.fsv.cvut.cz/gwiki/Landa
> http://gismentors.cz/mentors/landa
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180513/050c8326/attachment.html>

From even.rouault at spatialys.com  Mon May 14 07:34:33 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 May 2018 16:34:33 +0200
Subject: [gdal-dev] Coordinate system improvements - GDAL, libgeotiff,
	PROJ barn raising
Message-ID: <2219126.7vS7kixYLn@even-i700>

Hi,

A barn raising to improve coordinate system abilities in GDAL, libgeotiff, and PROJ has been 
publicly launched today. You can find more details about the proposal, its current sponsors 
and technical information at:

	https://gdalbarn.com

The hightlights of the planned work are:

* migration for CSV support data to a SQLite database shared between projects, offering 
more capabilities

* WKT2 support: increased interoperability between implementations. better ground for 
definitions, especially in areas such as axis, vertical control, and epochs

* end of WGS84 as a compulsory datum pivot, to be replaced by "late-binding" 
transformations that PROJ.5 now allows.

We are currently at 2/3 of the final funding goal. If your software and projects benefit from 
the GDAL, libgeotiff and PROJ stack, this is your chance to concretely help in its future 
improvements.

Best regards,

Howard Butler
Kristian Evers
Paul Ramsey
Even Rouault

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180514/eff6c8eb/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue May 15 00:58:27 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 15 May 2018 07:58:27 +0000
Subject: [gdal-dev] Example about how to save Tiled Gridded Coverage Data
	into GeoPackage
Message-ID: <03959e96f8224040940726841d7b431d@C119S212VM042.msvyvi.vaha.local>

Hi,

Are there any examples available about how to convert some DEM data into GeoPackage according to the Tiled Gridded Coverage Data extension that GDAL 2.3 supports?

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180515/22843378/attachment.html>

From even.rouault at spatialys.com  Tue May 15 03:08:39 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 May 2018 12:08:39 +0200
Subject: [gdal-dev] Example about how to save Tiled Gridded Coverage
	Data into GeoPackage
In-Reply-To: <03959e96f8224040940726841d7b431d@C119S212VM042.msvyvi.vaha.local>
References: <03959e96f8224040940726841d7b431d@C119S212VM042.msvyvi.vaha.local>
Message-ID: <18618345.yyjTD54Dfs@even-i700>

On mardi 15 mai 2018 07:58:27 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> Are there any examples available about how to convert some DEM data into
> GeoPackage according to the Tiled Gridded Coverage Data extension that GDAL
> 2.3 supports?

Jukka,

Just gdal_translate from a single-band raster with data type Int16, UInt16 or Float32 
(or use -ot to force one of those types)

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180515/9103beaa/attachment.html>

From andreaerdna at libero.it  Tue May 15 05:01:19 2018
From: andreaerdna at libero.it (andreaerdna)
Date: Tue, 15 May 2018 05:01:19 -0700 (MST)
Subject: [gdal-dev] About deprecated CRS and the different behavior of
 EPSGGetPCSInfo and EPSGGetGCSInfo
In-Reply-To: <13630986.bbIz37vLbb@even-i700>
References: <1525529352451-0.post@n6.nabble.com>
 <13630986.bbIz37vLbb@even-i700>
Message-ID: <1526385679890-0.post@n6.nabble.com>

Even Rouault-2 wrote
> Implemented per https://github.com/OSGeo/gdal/pull/575

Thanks, Even!

Taking a better look at importFromEPSG and how it's used by QGIS
QgsCoordinateReferenceSystem::syncDb(), I think that it will be useful to
uniform also the names of deprecated **GEOCCS** (Geocentric Coordinate
Systems) implementing your fix in **SetEPSGGeocCS** ('cause there's no
"EPSGGetGCCSInfo") too.

Just for completeness, the behavior of SetEPSGCompdCS and SetEPSGVertCS
(that are also used by importFromEPSG) about deprecated CS does not affect
QgsCoordinateReferenceSystem::syncDb(): in fact for compound coordinate
system (COMPD_CS), syncDB always use the related horizontal projcs or geogcs
name, while for vertical coordinate system it does not care of the name.

Best regards and good work.



-----
Andrea Giudiceandrea
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Tue May 15 05:36:12 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 15 May 2018 12:36:12 +0000
Subject: [gdal-dev] Example about how to save Tiled Gridded Coverage
 Data into GeoPackage
Message-ID: <d720c2f8e1d94f08a17a8f38c211dc03@C119S212VM042.msvyvi.vaha.local>

Even Rouault wrote:

> On mardi 15 mai 2018 07:58:27 CEST Rahkonen Jukka (MML) wrote:
>> Hi,
>> 
>> Are there any examples available about how to convert some DEM data into
>> GeoPackage according to the Tiled Gridded Coverage Data extension that GDAL
>> 2.3 supports?
 
> Jukka,
 
> Just gdal_translate from a single-band raster with data type Int16, UInt16 or Float32 (or use -ot to force one of those types)
 
Thanks, works well with 32 bit floating point tiffs as source and the gpkg DEM opens fine with QGIS 3. I know I can add several DEM tiffs by combining them into one datasource with VRT but is there any way to add data into an existing raster table? I understand that a general solution would be tricky because new data might require to increase the tile matrix, and within the existing matrix a well working system should be able to combine and merge partial tiles. But is it possible to add data into raster table at all, for example by inserting and overwriting tiles in Web Mercator grid?

-Jukka-

From even.rouault at spatialys.com  Tue May 15 06:04:43 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 May 2018 15:04:43 +0200
Subject: [gdal-dev] Example about how to save Tiled Gridded Coverage
	Data into GeoPackage
In-Reply-To: <d720c2f8e1d94f08a17a8f38c211dc03@C119S212VM042.msvyvi.vaha.local>
References: <d720c2f8e1d94f08a17a8f38c211dc03@C119S212VM042.msvyvi.vaha.local>
Message-ID: <24623153.9LNmZjEpnx@even-i700>

> Thanks, works well with 32 bit floating point tiffs as source and the gpkg
> DEM opens fine with QGIS 3. I know I can add several DEM tiffs by combining
> them into one datasource with VRT but is there any way to add data into an
> existing raster table? I understand that a general solution would be tricky
> because new data might require to increase the tile matrix, and within the
> existing matrix a well working system should be able to combine and merge
> partial tiles. But is it possible to add data into raster table at all, for
> example by inserting and overwriting tiles in Web Mercator grid?

Jukka,

Extending the limits of an existing tile matrix would require some work (renumbering the 
existing tiles, recomputing overviews, etc...)

But if you use a global tiling system like Web Mercator, you can do it, but it is admitedly a bit 
tricky.

gdalwarp new_data.tif existing.gpkg \
	-doo MINX=... -doo MINY=... -doo MAXX=... -doo MAXY=....

While in theory you could use the exterme value of the Web Mercator projection (+/- 
20037508.34) for those minx, etc values, this would take hours/days to process given how 
gdalwarp works.
So you will have to compute a more restricted bounding box from the existing data in the 
raster table and the new data you want to add.

And finally you need to adjust the gpkg_contents min_x, min_y, max_x and max_y bounds to 
the new bounding box with something like

ogrinfo existing.gpkg -sql "UPDATE gpkg_contents WHERE table_name = 'foo' SET min_x = ..., 
min_y = ..., max_x = ...., max_y = ...."

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180515/a4fe956a/attachment.html>

From even.rouault at spatialys.com  Tue May 15 08:27:00 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 May 2018 17:27:00 +0200
Subject: [gdal-dev] Coordinate system improvements - GDAL, libgeotiff,
	PROJ barn raising
In-Reply-To: <2219126.7vS7kixYLn@even-i700>
References: <2219126.7vS7kixYLn@even-i700>
Message-ID: <8579237.sZsBPYFo2F@even-i700>

Hi all,

Excellent news: the last third of the funding was completed yesterday, so this project will 
come true ! Thanks to all sponsors who have contributed making this possible [1]

So what does this mean for GDAL ? Obviously all the functionality mentionned below will 
become available once implemented.

Most of the initial work will be done in PROJ first, with GDAL catching it up afterwards (or in 
an experimental branch at first to follow the "eat your own dog food" principle). I'll come 
back later with more concrete implementation plans.

I guess some disruption is to be expected temporarily as functionnality will move from GDAL 
down to PROJ. This will probably mean that PROJ master will be a required dependency for 
GDAL master (and PROJ 6.0 a minimum and compulsory requirement for GDAL 2.4)

Best regards,

Even


[1]
(Anonymous)
AppGeo
Applied Imagery
Azavea
Boundless
Carto
ESRI 
GeoCue
LizardTech
LINZ
Mapbox
Mobile Geographics
Oslandia
Safe Software
Sparkgeo
Spatial Networks
Radiant Solutions
Terranodo
The Timoney Group

> Hi,
> 
> A barn raising to improve coordinate system abilities in GDAL, libgeotiff,
> and PROJ has been publicly launched today. You can find more details about
> the proposal, its current sponsors and technical information at:
> 
> 	https://gdalbarn.com
> 
> The hightlights of the planned work are:
> 
> * migration for CSV support data to a SQLite database shared between
> projects, offering more capabilities
> 
> * WKT2 support: increased interoperability between implementations. better
> ground for definitions, especially in areas such as axis, vertical control,
> and epochs
> 
> * end of WGS84 as a compulsory datum pivot, to be replaced by "late-binding"
> transformations that PROJ.5 now allows.
> 
> We are currently at 2/3 of the final funding goal. If your software and
> projects benefit from the GDAL, libgeotiff and PROJ stack, this is your
> chance to concretely help in its future improvements.
> 
> Best regards,
> 
> Howard Butler
> Kristian Evers
> Paul Ramsey
> Even Rouault


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180515/45ad0114/attachment-0001.html>

From gcpp.kalxas at gmail.com  Tue May 15 08:32:37 2018
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Tue, 15 May 2018 18:32:37 +0300
Subject: [gdal-dev] Coordinate system improvements - GDAL, libgeotiff,
 PROJ barn raising
In-Reply-To: <8579237.sZsBPYFo2F@even-i700>
References: <2219126.7vS7kixYLn@even-i700> <8579237.sZsBPYFo2F@even-i700>
Message-ID: <CALWPtRLUvZ51SSbQH7cQuwLUMC7TriUpor3i7QNN4D0Fgzcfig@mail.gmail.com>

Congratulations and thanks to all the sponsors!

Best,
Angelos

On Tue, May 15, 2018 at 6:27 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi all,
>
>
>
> Excellent news: the last third of the funding was completed yesterday, so
> this project will come true ! Thanks to all sponsors who have contributed
> making this possible [1]
>
>
>
> So what does this mean for GDAL ? Obviously all the functionality
> mentionned below will become available once implemented.
>
>
>
> Most of the initial work will be done in PROJ first, with GDAL catching it
> up afterwards (or in an experimental branch at first to follow the "eat
> your own dog food" principle). I'll come back later with more concrete
> implementation plans.
>
>
>
> I guess some disruption is to be expected temporarily as functionnality
> will move from GDAL down to PROJ. This will probably mean that PROJ master
> will be a required dependency for GDAL master (and PROJ 6.0 a minimum and
> compulsory requirement for GDAL 2.4)
>
>
>
> Best regards,
>
>
>
> Even
>
>
>
>
>
> [1]
>
> (Anonymous)
>
> AppGeo
>
> Applied Imagery
>
> Azavea
>
> Boundless
>
> Carto
>
> ESRI
>
> GeoCue
>
> LizardTech
>
> LINZ
>
> Mapbox
>
> Mobile Geographics
>
> Oslandia
>
> Safe Software
>
> Sparkgeo
>
> Spatial Networks
>
> Radiant Solutions
>
> Terranodo
>
> The Timoney Group
>
>
>
> > Hi,
>
> >
>
> > A barn raising to improve coordinate system abilities in GDAL,
> libgeotiff,
>
> > and PROJ has been publicly launched today. You can find more details
> about
>
> > the proposal, its current sponsors and technical information at:
>
> >
>
> > https://gdalbarn.com
>
> >
>
> > The hightlights of the planned work are:
>
> >
>
> > * migration for CSV support data to a SQLite database shared between
>
> > projects, offering more capabilities
>
> >
>
> > * WKT2 support: increased interoperability between implementations.
> better
>
> > ground for definitions, especially in areas such as axis, vertical
> control,
>
> > and epochs
>
> >
>
> > * end of WGS84 as a compulsory datum pivot, to be replaced by
> "late-binding"
>
> > transformations that PROJ.5 now allows.
>
> >
>
> > We are currently at 2/3 of the final funding goal. If your software and
>
> > projects benefit from the GDAL, libgeotiff and PROJ stack, this is your
>
> > chance to concretely help in its future improvements.
>
> >
>
> > Best regards,
>
> >
>
> > Howard Butler
>
> > Kristian Evers
>
> > Paul Ramsey
>
> > Even Rouault
>
>
>
>
>
> --
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Angelos Tzotsos, PhD
OSGeo Charter Member
http://users.ntua.gr/tzotsos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180515/45ea5253/attachment.html>

From schwehr at gmail.com  Tue May 15 14:09:45 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Tue, 15 May 2018 14:09:45 -0700
Subject: [gdal-dev] Initializing vectors
Message-ID: <CACmBxyuz6knichCoecjZe_gGSy-sRTKyS2Cjjp-smHi-1K__yw@mail.gmail.com>

Hi Even,

Trying to get caught up going through patches.  A comment for this one:

https://github.com/OSGeo/gdal/blob/f7c27a807b27cf74cf4666ffe3df4d64cc3f47b3/gdal/frmts/gtiff/geotiff.cpp

You can size and initialize a vector in the constructor.  With this code:

    std::vector<bool> abRequireNewOverview;
    abRequireNewOverview.resize(nOverviews);
    for( int i = 0; i < nOverviews && eErr == CE_None; ++i )
    {
        abRequireNewOverview[i] = true;

The vector can be setup all at one go...

    std::vector<bool> abRequireNewOverview(nOverviews, true);

See http://en.cppreference.com/w/cpp/container/vector/vector  The alloc
will be set to the default.

     vector( size_type count,
                 const T& value,
                 const Allocator& alloc = Allocator());

As for vector<bool>'s sadness, I am not really liking std::bitset for here,
so as long as we are careful, we can use it as long as we are careful not
hit its sharp edges.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180515/5ae9693a/attachment.html>

From even.rouault at spatialys.com  Tue May 15 14:19:02 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 May 2018 23:19:02 +0200
Subject: [gdal-dev] Initializing vectors
In-Reply-To: <CACmBxyuz6knichCoecjZe_gGSy-sRTKyS2Cjjp-smHi-1K__yw@mail.gmail.com>
References: <CACmBxyuz6knichCoecjZe_gGSy-sRTKyS2Cjjp-smHi-1K__yw@mail.gmail.com>
Message-ID: <11227638.qMYfjmqXeC@even-i700>

On mardi 15 mai 2018 14:09:45 CEST Kurt Schwehr wrote:
> Hi Even,
> 
> Trying to get caught up going through patches.  A comment for this one:
> 
> https://github.com/OSGeo/gdal/blob/f7c27a807b27cf74cf4666ffe3df4d64cc3f47b3/
> gdal/frmts/gtiff/geotiff.cpp
> 
> You can size and initialize a vector in the constructor.  With this code:
> 
>     std::vector<bool> abRequireNewOverview;
>     abRequireNewOverview.resize(nOverviews);
>     for( int i = 0; i < nOverviews && eErr == CE_None; ++i )
>     {
>         abRequireNewOverview[i] = true;
> 
> The vector can be setup all at one go...
> 
>     std::vector<bool> abRequireNewOverview(nOverviews, true);

Kurt,

Yeah, I know this kind of initialization exists. My issue is that I never remember if this is count, 
value or value, count and when this is a vector<int> (and presumably vector<bool>), the 
compiler cannot yell at you if you got it wrong... I miss named parameters there...

That said I've fixed the above instance and similar ones as you suggest.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180515/2a86fe9c/attachment.html>

From b.phamhuu at jacobs-university.de  Thu May 17 02:33:40 2018
From: b.phamhuu at jacobs-university.de (Bang Pham Huu)
Date: Thu, 17 May 2018 11:33:40 +0200
Subject: [gdal-dev] How to estimate the width/height size of output image in
 a target CRS without running gdalwarp?
Message-ID: <460c1970-17c9-35dc-13be-cbb070ede2b8@jacobs-university.de>

Hi,

I have a hard problem to find the width/height of a 2D GeoTiff file
which is reprojected from a source CRS (e.g: EPSG:4326) to target CRS
(e.g: EPSG:3857) without running gdalwarp. Because, the file could be
large (GBs) and I don't need the projected output file, just need the
width/height of it.

What could be done with gdalwarp is:

gdalwarp  -s_srs EPSG:4326 -t_srs EPSG:3857 full.tif full_3857.tif

gdalinfo full_3857.tif

Size is 879, 811 (width/height).

I've searched a lot and what seems to be good without doing the real
projection is this gdal function: GDALSuggestedWarpOutput2
https://github.com/OSGeo/gdal/blob/106c8288e7a05f4efc1a588c5a3b2da7ec52d915/gdal/alg/gdaltransformer.cpp#L354.
However, it doesn't help because my application developed in Java and it
uses gdal-java (GDAL JNI)
https://search.maven.org/#artifactdetails%7Corg.gdal%7Cgdal%7C1.11.1%7Cpom
as library. Unfortunately, I cannot find this GDALSuggestedWarpOutput2()
from gdal-java http://gdal.org/java/overview-summary.html then cannot
invoke this C++ function from my application to test.

Can anyone please give me a hint to solve this problem?

Thanks,




From ari.jolma at gmail.com  Thu May 17 05:28:52 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 17 May 2018 15:28:52 +0300
Subject: [gdal-dev] installed header files
Message-ID: <1a1536a8-a600-1ab3-457e-8dc82e2bab8d@gmail.com>

In 2.3 the installed header files is limited to a fixed list. That is a 
good thing. Even better would be to install the header files into a GDAL 
specific subdir.

However, that change broke one thing: the bindings cannot now be built 
against the public header files. At least cpl_vsi_error.h is needed(1).

But, I'm wondering should the bindings be separately buildable anyway. 
The bindings are pretty much married to the specific version of the 
source tree.

The case above is a CI run where I'm building the Perl bindings 
separately with the help of another Perl module (Alien::gdal), which 
does the actual download-build workflow for GDAL. The reason for this is 
to have the GDAL Perl bindings in CPAN as a stand-alone and testable 
module. That's a good reason, however, I'm moving to recommending using 
the FFI based module (Geo-GDAL-FFI), which is more robust and doesn't 
need the header files to install and run.

Ari

(1) https://api.travis-ci.org/v3/job/380159862/log.txt



From even.rouault at spatialys.com  Thu May 17 10:34:52 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 May 2018 19:34:52 +0200
Subject: [gdal-dev] installed header files
In-Reply-To: <1a1536a8-a600-1ab3-457e-8dc82e2bab8d@gmail.com>
References: <1a1536a8-a600-1ab3-457e-8dc82e2bab8d@gmail.com>
Message-ID: <5495257.bCPfJSSFbv@even-i700>

Ari,

> In 2.3 the installed header files is limited to a fixed list. That is a
> good thing. Even better would be to install the header files into a GDAL
> specific subdir.
> 
> However, that change broke one thing: the bindings cannot now be built
> against the public header files. At least cpl_vsi_error.h is needed(1).

This is an oversight. I've just fixed it.

> 
> But, I'm wondering should the bindings be separately buildable anyway.
> The bindings are pretty much married to the specific version of the
> source tree.

The bindings at a version X will generally require at least a version of the GDAL lib that is 
equal or more recent than X.

> 
> The case above is a CI run where I'm building the Perl bindings
> separately with the help of another Perl module (Alien::gdal), which
> does the actual download-build workflow for GDAL. The reason for this is
> to have the GDAL Perl bindings in CPAN as a stand-alone and testable
> module. That's a good reason, however, I'm moving to recommending using
> the FFI based module (Geo-GDAL-FFI), which is more robust and doesn't
> need the header files to install and run.

Potential drawback I see: if/when the GDAL C API will change, that's probably make it harder 
to spot places where changes should be made in the signatures.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180517/ca84fdeb/attachment.html>

From even.rouault at spatialys.com  Thu May 17 12:02:16 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 May 2018 21:02:16 +0200
Subject: [gdal-dev] How to estimate the width/height size of output
	image in a target CRS without running gdalwarp?
In-Reply-To: <460c1970-17c9-35dc-13be-cbb070ede2b8@jacobs-university.de>
References: <460c1970-17c9-35dc-13be-cbb070ede2b8@jacobs-university.de>
Message-ID: <1994298.17zF8P4QD4@even-i700>

On jeudi 17 mai 2018 11:33:40 CEST Bang Pham Huu wrote:
> Hi,
> 
> I have a hard problem to find the width/height of a 2D GeoTiff file
> which is reprojected from a source CRS (e.g: EPSG:4326) to target CRS
> (e.g: EPSG:3857) without running gdalwarp. Because, the file could be
> large (GBs) and I don't need the projected output file, just need the
> width/height of it.
> 
> What could be done with gdalwarp is:
> 
> gdalwarp  -s_srs EPSG:4326 -t_srs EPSG:3857 full.tif full_3857.tif
> 
> gdalinfo full_3857.tif
> 
> Size is 879, 811 (width/height).
> 
> I've searched a lot and what seems to be good without doing the real
> projection is this gdal function: GDALSuggestedWarpOutput2
> https://github.com/OSGeo/gdal/blob/106c8288e7a05f4efc1a588c5a3b2da7ec52d915/
> gdal/alg/gdaltransformer.cpp#L354. However, it doesn't help because my
> application developed in Java and it uses gdal-java (GDAL JNI)
> https://search.maven.org/#artifactdetails%7Corg.gdal%7Cgdal%7C1.11.1%7Cpom
> as library. Unfortunately, I cannot find this GDALSuggestedWarpOutput2()
> from gdal-java http://gdal.org/java/overview-summary.html then cannot
> invoke this C++ function from my application to test.
> 
> Can anyone please give me a hint to solve this problem?

Hi,

You can use gdal.AutoCreateWarpedVRT() which will create a in-memory warped
VRT without doing the actual warping.

http://gdal.org/java/org/gdal/gdal/gdal.html#AutoCreateWarpedVRT-org.gdal.gdal.Dataset-

and query the dimensions of the returned Dataset

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180517/a44e5b1c/attachment.html>

From benjamin.deschamps at canada.ca  Thu May 17 13:06:34 2018
From: benjamin.deschamps at canada.ca (Deschamps, Benjamin (EC))
Date: Thu, 17 May 2018 20:06:34 +0000
Subject: [gdal-dev] How to estimate the width/height size of output
 image in a target CRS without running gdalwarp?
In-Reply-To: <460c1970-17c9-35dc-13be-cbb070ede2b8@jacobs-university.de>
References: <460c1970-17c9-35dc-13be-cbb070ede2b8@jacobs-university.de>
Message-ID: <21278cec7181446cb8b9f1d44b4208dd@PELEPCDEXC020.birch.int.bell.ca>

You could use osr's CoordinateTransformation to evaluate the new location of the four corners in the destination spatial reference:
http://gdal.org/python/osgeo.osr.CoordinateTransformation-class.html

From there a min/max on the four coordinates will give you the extent of the new image space.

If the input and output CRS are very dissimilar you might want to evaluate a regular grid instead to get a more representative extent.


Benjamin Deschamps 

Physical Sciences Specialist
Canadian Ice Service, Meteorological Service of Canada
Environment and Climate Change Canada / Government of Canada 
Benjamin.Deschamps at canada.ca / Tel: 613-943-4293 

Spécialiste des sciences physiques
Service Canadien des Glaces, Service Météorologique du Canada, 
Environnement et Changement climatique Canada / Gouvernement du Canada 
Benjamin.Deschamps at canada.ca / Tél. : 613-943-4293



-----Original Message-----
From: Bang Pham Huu [mailto:b.phamhuu at jacobs-university.de] 
Sent: May 17, 2018 5:34 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] How to estimate the width/height size of output image in a target CRS without running gdalwarp?

Hi,

I have a hard problem to find the width/height of a 2D GeoTiff file which is reprojected from a source CRS (e.g: EPSG:4326) to target CRS
(e.g: EPSG:3857) without running gdalwarp. Because, the file could be large (GBs) and I don't need the projected output file, just need the width/height of it.

What could be done with gdalwarp is:

gdalwarp  -s_srs EPSG:4326 -t_srs EPSG:3857 full.tif full_3857.tif

gdalinfo full_3857.tif

Size is 879, 811 (width/height).

I've searched a lot and what seems to be good without doing the real projection is this gdal function: GDALSuggestedWarpOutput2 https://github.com/OSGeo/gdal/blob/106c8288e7a05f4efc1a588c5a3b2da7ec52d915/gdal/alg/gdaltransformer.cpp#L354.
However, it doesn't help because my application developed in Java and it uses gdal-java (GDAL JNI) https://search.maven.org/#artifactdetails%7Corg.gdal%7Cgdal%7C1.11.1%7Cpom
as library. Unfortunately, I cannot find this GDALSuggestedWarpOutput2() from gdal-java http://gdal.org/java/overview-summary.html then cannot invoke this C++ function from my application to test.

Can anyone please give me a hint to solve this problem?

Thanks,





From b.phamhuu at jacobs-university.de  Thu May 17 23:38:01 2018
From: b.phamhuu at jacobs-university.de (Bang Pham Huu)
Date: Fri, 18 May 2018 08:38:01 +0200
Subject: [gdal-dev] How to estimate the width/height size of output
 image in a target CRS without running gdalwarp?
In-Reply-To: <1994298.17zF8P4QD4@even-i700>
References: <460c1970-17c9-35dc-13be-cbb070ede2b8@jacobs-university.de>
 <1994298.17zF8P4QD4@even-i700>
Message-ID: <2725cceb-0f6f-898e-67d3-ea0d8f530a0c@jacobs-university.de>

Thanks Even, your suggestion works, I found an example here for Python
that could help others with this powerful feature:
https://gis.stackexchange.com/a/140053/17733


On 05/17/2018 09:02 PM, Even Rouault wrote:
>
> On jeudi 17 mai 2018 11:33:40 CEST Bang Pham Huu wrote:
>
> > Hi,
>
> >
>
> > I have a hard problem to find the width/height of a 2D GeoTiff file
>
> > which is reprojected from a source CRS (e.g: EPSG:4326) to target CRS
>
> > (e.g: EPSG:3857) without running gdalwarp. Because, the file could be
>
> > large (GBs) and I don't need the projected output file, just need the
>
> > width/height of it.
>
> >
>
> > What could be done with gdalwarp is:
>
> >
>
> > gdalwarp  -s_srs EPSG:4326 -t_srs EPSG:3857 full.tif full_3857.tif
>
> >
>
> > gdalinfo full_3857.tif
>
> >
>
> > Size is 879, 811 (width/height).
>
> >
>
> > I've searched a lot and what seems to be good without doing the real
>
> > projection is this gdal function: GDALSuggestedWarpOutput2
>
> >
> https://github.com/OSGeo/gdal/blob/106c8288e7a05f4efc1a588c5a3b2da7ec52d915/
>
> > gdal/alg/gdaltransformer.cpp#L354. However, it doesn't help because my
>
> > application developed in Java and it uses gdal-java (GDAL JNI)
>
> >
> https://search.maven.org/#artifactdetails%7Corg.gdal%7Cgdal%7C1.11.1%7Cpom
>
> > as library. Unfortunately, I cannot find this GDALSuggestedWarpOutput2()
>
> > from gdal-java http://gdal.org/java/overview-summary.html then cannot
>
> > invoke this C++ function from my application to test.
>
> >
>
> > Can anyone please give me a hint to solve this problem?
>
>  
>
> Hi,
>
>  
>
> You can use gdal.AutoCreateWarpedVRT() which will create a in-memory
> warped
>
> VRT without doing the actual warping.
>
>  
>
> http://gdal.org/java/org/gdal/gdal/gdal.html#AutoCreateWarpedVRT-org.gdal.gdal.Dataset-
>
>  
>
> and query the dimensions of the returned Dataset
>
>  
>
> Even
>
>  
>
> -- 
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180518/c93cacb4/attachment-0001.html>

From even.rouault at spatialys.com  Fri May 18 05:46:33 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 May 2018 14:46:33 +0200
Subject: [gdal-dev] [OSGeo-Standards] Cloud optimized geotiff (COG)
	discussions
In-Reply-To: <2894406.bFXZaTSxLe@even-i700>
References: <2894406.bFXZaTSxLe@even-i700>
Message-ID: <14543468.L9ZPreHZJA@even-i700>

On jeudi 5 avril 2018 17:38:47 CEST Even Rouault wrote:
> Hi,
> 
> For those interested in COG related discussions, a number of actors have
> agreed that a potential forum to discuss that could be:
> 
>  https://lists.osgeo.org/pipermail/landsat-pds/

Update: instead of hijacking landsat-pds, a dedicated mailing list has just been created:

https://lists.osgeo.org/mailman/listinfo/cog

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180518/51ffcb7c/attachment.html>

From Martin.Franzke at telekom.de  Fri May 18 08:20:24 2018
From: Martin.Franzke at telekom.de (Martin.Franzke at telekom.de)
Date: Fri, 18 May 2018 15:20:24 +0000
Subject: [gdal-dev]  Interesting issue with ogr2ogr and -tps
Message-ID: <db86516683dc42f481a663f22e38e3ee@HE105658.emea1.cds.t-internal.com>

>
>On mardi 27 juin 2017 07:34:59 CEST Rahkonen Jukka (MML) wrote:
>> Hi,
>>
>> There is a well written question in gis.stackexchange about how the -tps
>> option in ogr2ogr behaves 
>> https://gis.stackexchange.com/questions/245391/ogr2org-tps-spline-method-cr
>> eates-progressive-error
>>
>> Does anybody have a clue about what happens?
>
>TPS is supposed to be exact at GCP, and interpolate between them. That said, it looks from
>this report like there might be a numerical stability issue. There are 2 solvers for the TPS
>transformer: a built-in that does matrix inversion "at hand" using Gauss- Jordan elimination
>method (the one that is taught at school if I remember well -:) ), and another one that uses
>the armadillo library that is faster and relates underneath on well proven numerical
>computation libraries (blas/lapack). I don't think osgeo4w builds use armadillo (actually I 
>don't see anything in the nmake.opt related to armadillo).
>That said, I see that the Gauss-Jordan implementation usd uses the "partial pivonting"
>mentionned in
>https://en.wikipedia.org/wiki/Pivot_element#Partial_and_complete_pivoting so this should
>normally account for most numerical stabilities issues.
>So either the user is rather unlikely and has encountered a case where numerical instability 
>occur, either his test/GCPs are wrong.
>And I wouldn't have anticipated that numerical stabilities issues have such a north-to-south 
>pattern, but perhaps...
>
>Even
>
>
>--
>Spatialys - Geospatial professional services http://www.spatialys.com
>
>
Hi,

I had a similar problem when not using armadillo, but a simple transformation does the trick. 
The problem is that usually the distance of different gcps compared their absolute value is very small.

This leads to a bad conditioned linear equation system (see https://en.wikipedia.org/wiki/Condition_number):
The first column consists of 1s and the second and third of the x, y values of the gcps respectively.
Now if the difference of the gcps is relatively small the second and third row are nearly colinear to the first one, hence the matrix is nearly singular.

The solution is to shift the coordinate system by the mean value of all gcps and solving the modified linear equations. 
Since the basis function of the TPS only depends on the difference of coordinates the resulting transformation is the same.
 
For the implementation details see the attached patch file.

Martin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: thinplatespline.patch
Type: application/octet-stream
Size: 2136 bytes
Desc: thinplatespline.patch
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180518/578000c4/attachment.obj>

From even.rouault at spatialys.com  Fri May 18 09:19:28 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 May 2018 18:19:28 +0200
Subject: [gdal-dev] Interesting issue with ogr2ogr and -tps
In-Reply-To: <db86516683dc42f481a663f22e38e3ee@HE105658.emea1.cds.t-internal.com>
References: <db86516683dc42f481a663f22e38e3ee@HE105658.emea1.cds.t-internal.com>
Message-ID: <4042752.LdzYdeVGHP@even-i700>

Martin,

Patch applied. Thanks !

Even

> I had a similar problem when not using armadillo, but a simple
> transformation does the trick. The problem is that usually the distance of
> different gcps compared their absolute value is very small.
> 
> This leads to a bad conditioned linear equation system (see
> https://en.wikipedia.org/wiki/Condition_number): The first column consists
> of 1s and the second and third of the x, y values of the gcps respectively.
> Now if the difference of the gcps is relatively small the second and third
> row are nearly colinear to the first one, hence the matrix is nearly
> singular.
> 
> The solution is to shift the coordinate system by the mean value of all gcps
> and solving the modified linear equations. Since the basis function of the
> TPS only depends on the difference of coordinates the resulting
> transformation is the same.
> 
> For the implementation details see the attached patch file.
> 
> Martin


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180518/a53460b0/attachment.html>

From ihannah at meniscus.co.uk  Mon May 21 08:16:45 2018
From: ihannah at meniscus.co.uk (Ian Hannah)
Date: Mon, 21 May 2018 08:16:45 -0700 (MST)
Subject: [gdal-dev] Using GDalWarp from EPSG:27700 to EPSG:3857 does not
 create correct image
Message-ID: <1526915805324-0.post@n6.nabble.com>

I am using the C# GDAL interfact to create a GeoTiff file ( test.tiff
<http://osgeo-org.1560.x6.nabble.com/file/t383179/test.tiff>  ).

This file has the EPSG:27700 projection set within it and a GeoTransform as
follows:

                    double[] transform = new double[6];
                    transform[0] = -24000;
                    transform[1] = 1000;
                    transform[2] = 0;
                    transform[3] = 996000;
                    transform[4] = 0;
                    transform[5] = -1000;
                    dataset.SetGeoTransform(transform);

So the GeoTiff image goes from -24000 to 679000 in the Eastings and 996000
to -14000 in the Northings.

I then use the GDAL warp application using this command:

gdalwarp -s_srs EPSG:27700 -t_srs EPSG:3857 -overwrite test.tiff output.tiff

This creates me the output  output.tiff
<http://osgeo-org.1560.x6.nabble.com/file/t383179/output.tiff>  . The large
square in the middle should be over Leeds when placed onto a map but it is
not. The right hand side does not extend out far enough and I have no idea
why.

I just want to know if anyone has had any experience in doing this
transformation or can see anything that I am not doing correctly.

Thanks
Ian




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From ijturton at gmail.com  Mon May 21 08:44:19 2018
From: ijturton at gmail.com (Ian Turton)
Date: Mon, 21 May 2018 16:44:19 +0100
Subject: [gdal-dev] Using GDalWarp from EPSG:27700 to EPSG:3857 does not
 create correct image
In-Reply-To: <1526915805324-0.post@n6.nabble.com>
References: <1526915805324-0.post@n6.nabble.com>
Message-ID: <CA+=cGJnTpseEsGAmivyehYuxLENov+oCmiW7jz0tPp0RstCwGg@mail.gmail.com>

When I load both of them into QGIS they align pretty well, with the output
being slightly smaller than the input file.

[image: Screenshot from 2018-05-21 16-40-32.png]

I suspect this is due to  the pixel size changing, but I'm not sure why it
is so large as QGis is using GDAL internally to reproject the input to 3857
here.

Ian


On Mon, 21 May 2018 at 16:17, Ian Hannah <ihannah at meniscus.co.uk> wrote:

> I am using the C# GDAL interfact to create a GeoTiff file ( test.tiff
> <http://osgeo-org.1560.x6.nabble.com/file/t383179/test.tiff>  ).
>
> This file has the EPSG:27700 projection set within it and a GeoTransform as
> follows:
>
>                     double[] transform = new double[6];
>                     transform[0] = -24000;
>                     transform[1] = 1000;
>                     transform[2] = 0;
>                     transform[3] = 996000;
>                     transform[4] = 0;
>                     transform[5] = -1000;
>                     dataset.SetGeoTransform(transform);
>
> So the GeoTiff image goes from -24000 to 679000 in the Eastings and 996000
> to -14000 in the Northings.
>
> I then use the GDAL warp application using this command:
>
> gdalwarp -s_srs EPSG:27700 -t_srs EPSG:3857 -overwrite test.tiff
> output.tiff
>
> This creates me the output  output.tiff
> <http://osgeo-org.1560.x6.nabble.com/file/t383179/output.tiff>  . The
> large
> square in the middle should be over Leeds when placed onto a map but it is
> not. The right hand side does not extend out far enough and I have no idea
> why.
>
> I just want to know if anyone has had any experience in doing this
> transformation or can see anything that I am not doing correctly.
>
> Thanks
> Ian
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Ian Turton
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180521/6f0b0c8b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Screenshot from 2018-05-21 16-40-32.png
Type: image/png
Size: 55892 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180521/6f0b0c8b/attachment-0001.png>

From landa.martin at gmail.com  Mon May 21 23:41:35 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 22 May 2018 08:41:35 +0200
Subject: [gdal-dev] CPLStat + VSI_REG fails on larger files on Windows
Message-ID: <CA+Ei1OezVPiagrifOxsUEeu8tfUcfVVF_SFzOnSJ5aPFpwFY4A@mail.gmail.com>

Hi,

I am having a problem with code in VFK driver checking file by CPLStat
+ VSI_REG. On larger files (2GB+) this check fails, but only on
Windows. The same file works on Linux.

Any idea what is wrong? Thanks a lot for any pointer. Martin

[1] https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrsf_frmts/vfk/vfkreader.cpp#L82

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Tue May 22 00:18:19 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 May 2018 09:18:19 +0200
Subject: [gdal-dev] CPLStat + VSI_REG fails on larger files on Windows
In-Reply-To: <CA+Ei1OezVPiagrifOxsUEeu8tfUcfVVF_SFzOnSJ5aPFpwFY4A@mail.gmail.com>
References: <CA+Ei1OezVPiagrifOxsUEeu8tfUcfVVF_SFzOnSJ5aPFpwFY4A@mail.gmail.com>
Message-ID: <3335462.egC7adtgmb@even-i700>

On mardi 22 mai 2018 08:41:35 CEST Martin Landa wrote:
> https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrsf_frmts/vfk/
vfkreader
> .cpp#L82

CPLStat() ultimately calls _wstat() on Windows. Looking at
https://docs.microsoft.com/en-gb/cpp/c-runtime-library/reference/stat-functions 
, it seems it can only deal with 32-bit file length

You could just replace your CPLStat() call with VSIStatL() (and use a VSIStatBufL 
structure) that will use a 64-bit ready Windows API underneath.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180522/391d0085/attachment.html>

From laasunde at hotmail.com  Tue May 22 00:59:08 2018
From: laasunde at hotmail.com (Lars)
Date: Tue, 22 May 2018 07:59:08 +0000
Subject: [gdal-dev] GDAL dependencies
Message-ID: <HE1PR03MB1338B40651F4DC64CE3C0035CA940@HE1PR03MB1338.eurprd03.prod.outlook.com>

Hello,

Does GDAL have an updated list of required and optional dependencies?

Tried looking on homepage and mailing list archive without any luck.

Thanks for any help.

kind regards, Lars



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180522/fef2ca88/attachment.html>

From even.rouault at spatialys.com  Tue May 22 01:05:46 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 May 2018 10:05:46 +0200
Subject: [gdal-dev] GDAL dependencies
In-Reply-To: <HE1PR03MB1338B40651F4DC64CE3C0035CA940@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB1338B40651F4DC64CE3C0035CA940@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <7575243.rWfr8VxoOA@even-i700>

On mardi 22 mai 2018 07:59:08 CEST Lars wrote:
> Hello,
> 
> Does GDAL have an updated list of required and optional dependencies?

Lars,

Required: none currently, except a C++ compiler
But for usual functionalities, I'd suggest libsqlite3, libcurl, libexpat

You an consult the right most column of http://gdal.org/formats_list.html and http://
www.gdal.org/ogr_formats.html to see which dependencies are needed to have support for 
which driver.

Looking at
https://github.com/OSGeo/gdal/blob/master/gdal/nmake.opt or
https://github.com/OSGeo/gdal/blob/master/gdal/configure.ac
will also give you the list of all potential dependencies.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180522/15671ac7/attachment.html>

From ari.jolma at gmail.com  Tue May 22 01:13:45 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 22 May 2018 11:13:45 +0300
Subject: [gdal-dev] GDAL dependencies
In-Reply-To: <7575243.rWfr8VxoOA@even-i700>
References: <HE1PR03MB1338B40651F4DC64CE3C0035CA940@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <7575243.rWfr8VxoOA@even-i700>
Message-ID: <0e874f2a-9398-7cf1-d5e4-c9c7c375a3f6@gmail.com>

Even Rouault kirjoitti 22.05.2018 klo 11:05:
>
> On mardi 22 mai 2018 07:59:08 CEST Lars wrote:
>
> > Hello,
>
> >
>
> > Does GDAL have an updated list of required and optional dependencies?
>
> Lars,
>
> Required: none currently, except a C++ compiler
>

With C++ 11 support. I just run into this as I had a Debian 7 machine, 
whose gcc (4.7) does not support C++ 11.

Debian 7 EOL is next week so it was a reminder to update.

Ari

> But for usual functionalities, I'd suggest libsqlite3, libcurl, libexpat
>
> You an consult the right most column of 
> http://gdal.org/formats_list.html and 
> http://www.gdal.org/ogr_formats.html to see which dependencies are 
> needed to have support for which driver.
>
> Looking at
>
> https://github.com/OSGeo/gdal/blob/master/gdal/nmake.opt or
>
> https://github.com/OSGeo/gdal/blob/master/gdal/configure.ac
>
> will also give you the list of all potential dependencies.
>
> Even
>
> -- 
>
> Spatialys - Geospatial professional services
>
> http://www.spatialys.com
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180522/5a98c139/attachment-0001.html>

From mateusz at loskot.net  Tue May 22 01:22:27 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 22 May 2018 10:22:27 +0200
Subject: [gdal-dev] GDAL dependencies
In-Reply-To: <0e874f2a-9398-7cf1-d5e4-c9c7c375a3f6@gmail.com>
References: <HE1PR03MB1338B40651F4DC64CE3C0035CA940@HE1PR03MB1338.eurprd03.prod.outlook.com>
 <7575243.rWfr8VxoOA@even-i700>
 <0e874f2a-9398-7cf1-d5e4-c9c7c375a3f6@gmail.com>
Message-ID: <CABUeae_sNmG9pfokWZ1jM1JEDAdYXXmKUmXA9zAYLYE9ZJJQgw@mail.gmail.com>

On 22 May 2018 at 10:13, Ari Jolma <ari.jolma at gmail.com> wrote:
> Even Rouault kirjoitti 22.05.2018 klo 11:05:
>> On mardi 22 mai 2018 07:59:08 CEST Lars wrote:
>>
>> Does GDAL have an updated list of required and optional dependencies?
>
> Required: none currently, except a C++ compiler
>
> With C++ 11 support. I just run into this as I had a Debian 7 machine, whose
> gcc (4.7) does not support C++ 11.

Ari,

You *may* get away with GCC 4.7, since it implements a lot of C++11
https://gcc.gnu.org/gcc-4.7/cxx0x_status.html
Best bet though is to go with at least GCC 4.8.1 or later.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From laasunde at hotmail.com  Tue May 22 01:37:55 2018
From: laasunde at hotmail.com (Lars)
Date: Tue, 22 May 2018 08:37:55 +0000
Subject: [gdal-dev] GDAL dependencies
In-Reply-To: <7575243.rWfr8VxoOA@even-i700>
References: <HE1PR03MB1338B40651F4DC64CE3C0035CA940@HE1PR03MB1338.eurprd03.prod.outlook.com>,
 <7575243.rWfr8VxoOA@even-i700>
Message-ID: <HE1PR03MB13386236245C572BC7848ADACA940@HE1PR03MB1338.eurprd03.prod.outlook.com>

Even,

Just the information that I needed. Thank you 😊

________________________________
Fra: Even Rouault <even.rouault at spatialys.com>
Sendt: 22. mai 2018 10:05
Til: gdal-dev at lists.osgeo.org
Kopi: Lars
Emne: Re: [gdal-dev] GDAL dependencies


On mardi 22 mai 2018 07:59:08 CEST Lars wrote:

> Hello,

>

> Does GDAL have an updated list of required and optional dependencies?



Lars,



Required: none currently, except a C++ compiler

But for usual functionalities, I'd suggest libsqlite3, libcurl, libexpat



You an consult the right most column of http://gdal.org/formats_list.html and http://www.gdal.org/ogr_formats.html to see which dependencies are needed to have support for which driver.



Looking at

https://github.com/OSGeo/gdal/blob/master/gdal/nmake.opt or

https://github.com/OSGeo/gdal/blob/master/gdal/configure.ac

will also give you the list of all potential dependencies.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180522/974db194/attachment.html>

From mateusz at loskot.net  Tue May 22 01:47:56 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 22 May 2018 10:47:56 +0200
Subject: [gdal-dev] GDAL dependencies
In-Reply-To: <HE1PR03MB1338B40651F4DC64CE3C0035CA940@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB1338B40651F4DC64CE3C0035CA940@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <CABUeae9CQ7DR=BoRCCUdPZFBv-N2qKkKHr-Y0T4dM3x9cbg57w@mail.gmail.com>

On 22 May 2018 at 09:59, Lars <laasunde at hotmail.com> wrote:
> Hello,
>
> Does GDAL have an updated list of required and optional dependencies?
>
> Tried looking on homepage and mailing list archive without any luck.

Even has already covered the answer.

There is also this wiki, might need some updating love, which may help to derive
list of optional dependencies

https://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From landa.martin at gmail.com  Tue May 22 04:23:44 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Tue, 22 May 2018 13:23:44 +0200
Subject: [gdal-dev] CPLStat + VSI_REG fails on larger files on Windows
In-Reply-To: <3335462.egC7adtgmb@even-i700>
References: <CA+Ei1OezVPiagrifOxsUEeu8tfUcfVVF_SFzOnSJ5aPFpwFY4A@mail.gmail.com>
 <3335462.egC7adtgmb@even-i700>
Message-ID: <CA+Ei1OfGdzVq+vgKwzLCUTeWsEC6981Kbnh3fGDR-dYKCrNwUQ@mail.gmail.com>

Hi,

2018-05-22 9:18 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> CPLStat() ultimately calls _wstat() on Windows. Looking at
>
> https://docs.microsoft.com/en-gb/cpp/c-runtime-library/reference/stat-functions
> , it seems it can only deal with 32-bit file length
>
>
>
> You could just replace your CPLStat() call with VSIStatL() (and use a
> VSIStatBufL structure) that will use a 64-bit ready Windows API underneath.

thanks for explanation, should be fixed in [1]. Issue open [2] due backports.

Ma

[1] https://github.com/OSGeo/gdal/commit/6a2e8bc23a5e72753f7222b6e59c081cc2f076a0
[2] https://github.com/OSGeo/gdal/issues/637

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From guyd at satellogic.com  Wed May 23 03:30:30 2018
From: guyd at satellogic.com (Guy Doulberg)
Date: Wed, 23 May 2018 13:30:30 +0300
Subject: [gdal-dev] GDAL_CACHMAX on a docker container
Message-ID: <CAJ18MZrWFTpFq3W05ezWT+BUHKi0mVEoZBHhtd-zbQ92_ggr6Q@mail.gmail.com>

Hi guys

I wanted to share with you a GOTCHA I struggled with in the passed few
days, maybe it will be helpful for more people

I am using GDAL on a docker cluster, since there are more services running
on the host I limit the container to use only 1GB of ram

The default behavior of GDAL_CACHMAX is 5% of the available memory, but
apparently when running in above setup it sees the System memory, which
16GB and not 1GB.

On that container I ran 3 process of GDAL which means it calculated it can
use 2.4 GB approximately, but the container limitation was only 1GB

The result was that the OOM killer of the operating system killed those
processes because they exceeded memory.

To solve to issue (to control the memory the process is going to use) I
explictly set the GDAL_CACHMAX to an absolute value
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180523/c742034a/attachment.html>

From mateusz at loskot.net  Wed May 23 03:38:52 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 23 May 2018 12:38:52 +0200
Subject: [gdal-dev] GDAL_CACHMAX on a docker container
In-Reply-To: <CAJ18MZrWFTpFq3W05ezWT+BUHKi0mVEoZBHhtd-zbQ92_ggr6Q@mail.gmail.com>
References: <CAJ18MZrWFTpFq3W05ezWT+BUHKi0mVEoZBHhtd-zbQ92_ggr6Q@mail.gmail.com>
Message-ID: <CABUeae_tLJPYn-0dQKimzz18=z2xU04dt=qBvXwwpj5RQV7VZQ@mail.gmail.com>

On 23 May 2018 at 12:30, Guy Doulberg <guyd at satellogic.com> wrote:
>
> To solve to issue (to control the memory the process is going to use) I
> explictly set the GDAL_CACHMAX to an absolute value

The option name is GDAL_CACHEMAX

https://trac.osgeo.org/gdal/wiki/ConfigOptions

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Wed May 23 03:48:33 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 May 2018 12:48:33 +0200
Subject: [gdal-dev] GDAL_CACHMAX on a docker container
In-Reply-To: <CAJ18MZrWFTpFq3W05ezWT+BUHKi0mVEoZBHhtd-zbQ92_ggr6Q@mail.gmail.com>
References: <CAJ18MZrWFTpFq3W05ezWT+BUHKi0mVEoZBHhtd-zbQ92_ggr6Q@mail.gmail.com>
Message-ID: <1991469.DDJuvidexT@even-i700>

On mercredi 23 mai 2018 13:30:30 CEST Guy Doulberg wrote:
> Hi guys
> 
> I wanted to share with you a GOTCHA I struggled with in the passed few
> days, maybe it will be helpful for more people
> 
> I am using GDAL on a docker cluster, since there are more services running
> on the host I limit the container to use only 1GB of ram
> 
> The default behavior of GDAL_CACHMAX is 5% of the available memory, but
> apparently when running in above setup it sees the System memory, which
> 16GB and not 1GB.
> 
> On that container I ran 3 process of GDAL which means it calculated it can
> use 2.4 GB approximately, but the container limitation was only 1GB
> 
> The result was that the OOM killer of the operating system killed those
> processes because they exceeded memory.
> 
> To solve to issue (to control the memory the process is going to use) I
> explictly set the GDAL_CACHMAX to an absolute value

Guy,

can you create an issue about that in https://github.com/OSGeo/gdal/issues ?

There are some hints to how this could be done:
https://github.com/dotnet/coreclr/blob/master/src/gc/unix/cgroup.cpp
https://stackoverflow.com/questions/42187085/check-mem-limit-within-a-docker-container

I just tried

$ docker run --memory 512m --rm -it ubuntu bash

root at 0ae673d96789:/# cat /sys/fs/cgroup/memory/memory.limit_in_bytes
536870912

Can you check in your docker container that
cat /sys/fs/cgroup/memory/memory.limit_in_bytes
returns the maximum memory amount you specified ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From robert.coup at koordinates.com  Wed May 23 03:53:45 2018
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 23 May 2018 11:53:45 +0100
Subject: [gdal-dev] GDAL_CACHMAX on a docker container
In-Reply-To: <1991469.DDJuvidexT@even-i700>
References: <CAJ18MZrWFTpFq3W05ezWT+BUHKi0mVEoZBHhtd-zbQ92_ggr6Q@mail.gmail.com>
 <1991469.DDJuvidexT@even-i700>
Message-ID: <CAFLLRpJ8oq6DNPKvxaG_oGjavuNopEwxy7k33MtdJWowvJaYGg@mail.gmail.com>

Hi,

On 23 May 2018 at 11:48, Even Rouault <even.rouault at spatialys.com> wrote:

>
> There are some hints to how this could be done:
> https://github.com/dotnet/coreclr/blob/master/src/gc/unix/cgroup.cpp
> https://stackoverflow.com/questions/42187085/check-mem-
> limit-within-a-docker-container
>
> I just tried
>
> $ docker run --memory 512m --rm -it ubuntu bash
>
> root at 0ae673d96789:/# cat /sys/fs/cgroup/memory/memory.limit_in_bytes
> 536870912
>
> Can you check in your docker container that
> cat /sys/fs/cgroup/memory/memory.limit_in_bytes
> returns the maximum memory amount you specified ?
>

Was just posting the same thing.

Yes, that approach works, and that's how the JVM does it now (
https://bugs.openjdk.java.net/browse/JDK-8170888), and others.

If there's no memory limit set you get (on 64-bit linux)
9223372036854771712, currently recommendation is to take the minimum of the
total system memory (eg. /proc/meminfo) and the cgroups
memory.limit_in_bytes

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180523/d63d3f77/attachment.html>

From guyd at satellogic.com  Wed May 23 04:28:51 2018
From: guyd at satellogic.com (Guy Doulberg)
Date: Wed, 23 May 2018 14:28:51 +0300
Subject: [gdal-dev] GDAL_CACHMAX on a docker container
In-Reply-To: <CAFLLRpJ8oq6DNPKvxaG_oGjavuNopEwxy7k33MtdJWowvJaYGg@mail.gmail.com>
References: <CAJ18MZrWFTpFq3W05ezWT+BUHKi0mVEoZBHhtd-zbQ92_ggr6Q@mail.gmail.com>
 <1991469.DDJuvidexT@even-i700>
 <CAFLLRpJ8oq6DNPKvxaG_oGjavuNopEwxy7k33MtdJWowvJaYGg@mail.gmail.com>
Message-ID: <CAJ18MZr8qndUB+xSz42T9m4b-DOtjqQU8Q0bpkdUc4AO3tZ9Yg@mail.gmail.com>

I opened and issue:https://github.com/OSGeo/gdal/issues/640

Can you check in your docker container that
> cat /sys/fs/cgroup/memory/memory.limit_in_bytes
> returns the maximum memory amount you specified ?
>

yes it returns the memory I specified

On Wed, May 23, 2018 at 1:53 PM, Robert Coup <robert.coup at koordinates.com>
wrote:

> Hi,
>
> On 23 May 2018 at 11:48, Even Rouault <even.rouault at spatialys.com> wrote:
>
>>
>> There are some hints to how this could be done:
>> https://github.com/dotnet/coreclr/blob/master/src/gc/unix/cgroup.cpp
>> https://stackoverflow.com/questions/42187085/check-mem-limit
>> -within-a-docker-container
>>
>> I just tried
>>
>> $ docker run --memory 512m --rm -it ubuntu bash
>>
>> root at 0ae673d96789:/# cat /sys/fs/cgroup/memory/memory.limit_in_bytes
>> 536870912
>>
>> Can you check in your docker container that
>> cat /sys/fs/cgroup/memory/memory.limit_in_bytes
>> returns the maximum memory amount you specified ?
>>
>
> Was just posting the same thing.
>
> Yes, that approach works, and that's how the JVM does it now (
> https://bugs.openjdk.java.net/browse/JDK-8170888), and others.
>
> If there's no memory limit set you get (on 64-bit linux)
> 9223372036854771712, currently recommendation is to take the minimum of the
> total system memory (eg. /proc/meminfo) and the cgroups
> memory.limit_in_bytes
>
> Rob :)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180523/860d7c40/attachment.html>

From conrad_bielski at yahoo.com  Thu May 24 09:59:14 2018
From: conrad_bielski at yahoo.com (Conrad Bielski)
Date: Thu, 24 May 2018 16:59:14 +0000 (UTC)
Subject: [gdal-dev] compilation error - g++ unrecognized command line option
References: <593053920.5021486.1527181154152.ref@mail.yahoo.com>
Message-ID: <593053920.5021486.1527181154152@mail.yahoo.com>

Hi,

I couldn't find anything on this topic, so I hope that somebody has an answer to this issue. It might be Python related but I don't see the link.

So I get the following errors when running make:
g++: error: unrecognized command line option ‘-Wdate-time’
g++: error: unrecognized command line option ‘-Wnull-dereference’
g++: error: unrecognized command line option ‘-Wduplicated-cond’
g++: error: unrecognized command line option ‘-Wfloat-conversion’
make[1]: *** [cpl_conv.lo] Error 1
make[1]: Leaving directory `/home/ec2-user/tools/gdal-2.3.0/port'
make: *** [port-target] Error 2

The funny thing is that when running configure, I have the following results:
checking whether C compiler accepts -Wdate-time... yes
checking whether C compiler accepts -Wnull-dereference... yes
checking whether C compiler accepts -Wduplicated-cond... yes
checking whether C compiler accepts -Wfloat-conversion... yes

And I'm not sure where to look to fix this issue. I'm compiling on a Amazon Linux with gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2). The version of Python installed is Python 2.7.14.

Thanks in advance for your help,
Conrad
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180524/e161fcac/attachment.html>

From even.rouault at spatialys.com  Thu May 24 10:24:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 May 2018 19:24:09 +0200
Subject: [gdal-dev] compilation error - g++ unrecognized command line
	option
In-Reply-To: <593053920.5021486.1527181154152@mail.yahoo.com>
References: <593053920.5021486.1527181154152.ref@mail.yahoo.com>
 <593053920.5021486.1527181154152@mail.yahoo.com>
Message-ID: <40204972.dcIvejVNDU@even-i700>

On jeudi 24 mai 2018 16:59:14 CEST Conrad Bielski wrote:
> Hi,
> 
> I couldn't find anything on this topic, so I hope that somebody has an
> answer to this issue. It might be Python related but I don't see the link.
> 
> So I get the following errors when running make:
> g++: error: unrecognized command line option ‘-Wdate-time’
> g++: error: unrecognized command line option ‘-Wnull-dereference’
> g++: error: unrecognized command line option ‘-Wduplicated-cond’
> g++: error: unrecognized command line option ‘-Wfloat-conversion’
> make[1]: *** [cpl_conv.lo] Error 1
> make[1]: Leaving directory `/home/ec2-user/tools/gdal-2.3.0/port'
> make: *** [port-target] Error 2
> 
> The funny thing is that when running configure, I have the following
> results: checking whether C compiler accepts -Wdate-time... yes
> checking whether C compiler accepts -Wnull-dereference... yes
> checking whether C compiler accepts -Wduplicated-cond... yes
> checking whether C compiler accepts -Wfloat-conversion... yes
> 
> And I'm not sure where to look to fix this issue. I'm compiling on a Amazon
> Linux with gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2). The version of
> Python installed is Python 2.7.14.

Are you sure the g++ uses for make is the one used during ./configure ?
-Wdate-time should be accepted by gcc 7.2

I don't see the link with Python as the failure occurs when building 
cpl_conv.cpp, which is not in the Python bindings.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From conrad_bielski at yahoo.com  Thu May 24 13:20:25 2018
From: conrad_bielski at yahoo.com (Conrad Bielski)
Date: Thu, 24 May 2018 20:20:25 +0000 (UTC)
Subject: [gdal-dev] compilation error - g++ unrecognized command line
 option
In-Reply-To: <40204972.dcIvejVNDU@even-i700>
References: <593053920.5021486.1527181154152.ref@mail.yahoo.com>
 <593053920.5021486.1527181154152@mail.yahoo.com>
 <40204972.dcIvejVNDU@even-i700>
Message-ID: <2125787553.5108678.1527193225748@mail.yahoo.com>

Thanks for the suggestion Even.

I checked the GCC with g++ --version and got the following:
gcc --version
gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2)

which gcc
/usr/bin/gcc
[ec2-user at ip-172-31-22-101 gdal-2.3.0]$ /usr/bin/gcc --version
gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2)
But still had the compilation errors.

So I decided to test using a newer version:
gcc --version
gcc (GCC) 7.3.1 20180303 (Red Hat 7.3.1-5)

and it doesn't produce those errors! I'll keep you posted when the full compilation finishes...
Enjoy your evening,
Conrad


 

    On Thursday, May 24, 2018, 6:24:13 PM GMT+1, Even Rouault <even.rouault at spatialys.com> wrote:  
 
 On jeudi 24 mai 2018 16:59:14 CEST Conrad Bielski wrote:
> Hi,
> 
> I couldn't find anything on this topic, so I hope that somebody has an
> answer to this issue. It might be Python related but I don't see the link.
> 
> So I get the following errors when running make:
> g++: error: unrecognized command line option ‘-Wdate-time’
> g++: error: unrecognized command line option ‘-Wnull-dereference’
> g++: error: unrecognized command line option ‘-Wduplicated-cond’
> g++: error: unrecognized command line option ‘-Wfloat-conversion’
> make[1]: *** [cpl_conv.lo] Error 1
> make[1]: Leaving directory `/home/ec2-user/tools/gdal-2.3.0/port'
> make: *** [port-target] Error 2
> 
> The funny thing is that when running configure, I have the following
> results: checking whether C compiler accepts -Wdate-time... yes
> checking whether C compiler accepts -Wnull-dereference... yes
> checking whether C compiler accepts -Wduplicated-cond... yes
> checking whether C compiler accepts -Wfloat-conversion... yes
> 
> And I'm not sure where to look to fix this issue. I'm compiling on a Amazon
> Linux with gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2). The version of
> Python installed is Python 2.7.14.

Are you sure the g++ uses for make is the one used during ./configure ?
-Wdate-time should be accepted by gcc 7.2

I don't see the link with Python as the failure occurs when building 
cpl_conv.cpp, which is not in the Python bindings.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180524/cfb0adaf/attachment.html>

From conrad_bielski at yahoo.com  Fri May 25 09:08:57 2018
From: conrad_bielski at yahoo.com (Conrad Bielski)
Date: Fri, 25 May 2018 16:08:57 +0000 (UTC)
Subject: [gdal-dev] compilation error - g++ unrecognized command line
 option
In-Reply-To: <2125787553.5108678.1527193225748@mail.yahoo.com>
References: <593053920.5021486.1527181154152.ref@mail.yahoo.com>
 <593053920.5021486.1527181154152@mail.yahoo.com>
 <40204972.dcIvejVNDU@even-i700>
 <2125787553.5108678.1527193225748@mail.yahoo.com>
Message-ID: <1866524750.5419597.1527264537386@mail.yahoo.com>

Hello,
just to close this topic. I was able to compile GDAL 3.2.0 using:
gcc (GCC) 7.3.1 20180303 (Red Hat 7.3.1-5)

with no problems. So not sure what was happening with the gcc (GCC) 7.2.1 errors.

Thanks for your help,
Conrad
 

    On Thursday, May 24, 2018, 9:20:25 PM GMT+1, Conrad Bielski <conrad_bielski at yahoo.com> wrote:  
 
 Thanks for the suggestion Even.

I checked the GCC with g++ --version and got the following:
gcc --version
gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2)

which gcc
/usr/bin/gcc
[ec2-user at ip-172-31-22-101 gdal-2.3.0]$ /usr/bin/gcc --version
gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2)
But still had the compilation errors.

So I decided to test using a newer version:
gcc --version
gcc (GCC) 7.3.1 20180303 (Red Hat 7.3.1-5)

and it doesn't produce those errors! I'll keep you posted when the full compilation finishes...
Enjoy your evening,
Conrad


 

    On Thursday, May 24, 2018, 6:24:13 PM GMT+1, Even Rouault <even.rouault at spatialys.com> wrote:  
 
 On jeudi 24 mai 2018 16:59:14 CEST Conrad Bielski wrote:
> Hi,
> 
> I couldn't find anything on this topic, so I hope that somebody has an
> answer to this issue. It might be Python related but I don't see the link.
> 
> So I get the following errors when running make:
> g++: error: unrecognized command line option ‘-Wdate-time’
> g++: error: unrecognized command line option ‘-Wnull-dereference’
> g++: error: unrecognized command line option ‘-Wduplicated-cond’
> g++: error: unrecognized command line option ‘-Wfloat-conversion’
> make[1]: *** [cpl_conv.lo] Error 1
> make[1]: Leaving directory `/home/ec2-user/tools/gdal-2.3.0/port'
> make: *** [port-target] Error 2
> 
> The funny thing is that when running configure, I have the following
> results: checking whether C compiler accepts -Wdate-time... yes
> checking whether C compiler accepts -Wnull-dereference... yes
> checking whether C compiler accepts -Wduplicated-cond... yes
> checking whether C compiler accepts -Wfloat-conversion... yes
> 
> And I'm not sure where to look to fix this issue. I'm compiling on a Amazon
> Linux with gcc (GCC) 7.2.1 20170915 (Red Hat 7.2.1-2). The version of
> Python installed is Python 2.7.14.

Are you sure the g++ uses for make is the one used during ./configure ?
-Wdate-time should be accepted by gcc 7.2

I don't see the link with Python as the failure occurs when building 
cpl_conv.cpp, which is not in the Python bindings.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com    
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180525/0dad969f/attachment.html>

From vincent.thierion at inra.fr  Mon May 28 03:49:33 2018
From: vincent.thierion at inra.fr (Vincent Thierion)
Date: Mon, 28 May 2018 10:49:33 +0000
Subject: [gdal-dev]  gdalwarp bug with version GDAL 2.2.1,
	released 2017/06/23
Message-ID: <1527504393687.85332@inra.fr>

Hello,


I observed a gdalwarp problem with a little extent ogr vector file on GDAL 2.2.1, released 2017/06/23.


I try the following command :


gdalwarp -overwrite -cutline vect.shp -crop_to_cutline -cwhere "FID=0" rast.tif rast_0.tif


the command begins but never finish :


Creating output file that is 15P x 1L.
Processing input file rast.tif.
Using internal nodata values (e.g. 0) for image rast.tif.
Copying nodata values from source rast.tif to destination rast_0.tif.
0


I tried the same command on GDAL 2.0.1, released 2015/09/15 without any problem.


With GDAL 2.2.1, released 2017/06/23, I get around this problem by using the option -tap


gdalwarp -tap -tr 10 10 -overwrite -cutline vect.shp -crop_to_cutline -cwhere "FID=0" rast.tif rast_0.tif


But it's not a satisfactory solution, too large ouput raster file.


You can upload data here :

https://filesender.renater.fr/?s=download&token=2059f4d0-a06e-b9bf-85d7-22ddcd2ec0e3


Thanks in advance


Vincent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180528/47936e57/attachment.html>

From even.rouault at spatialys.com  Mon May 28 04:06:50 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 May 2018 13:06:50 +0200
Subject: [gdal-dev] gdalwarp bug with version GDAL 2.2.1,
	released 2017/06/23
In-Reply-To: <1527504393687.85332@inra.fr>
References: <1527504393687.85332@inra.fr>
Message-ID: <3942704.RiZa6o5ym1@even-i700>

> 
> You can upload data here :
> 
> https://filesender.renater.fr/?s=download&token=2059f4d0-a06e-b9bf-85d7-22dd
> cd2ec0e3
> 

Vincent,

the above zip doesn't contain the vect.shp/.dbf/.shx/.prj and rast.tif files 
that are needed to reproduce.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From vincent.thierion at inra.fr  Mon May 28 05:26:56 2018
From: vincent.thierion at inra.fr (Vincent Thierion)
Date: Mon, 28 May 2018 12:26:56 +0000
Subject: [gdal-dev] gdalwarp bug with version GDAL 2.2.1,
 released 2017/06/23
In-Reply-To: <3942704.RiZa6o5ym1@even-i700>
References: <1527504393687.85332@inra.fr>,<3942704.RiZa6o5ym1@even-i700>
Message-ID: <1527510236332.36887@inra.fr>

You can download the files here : https://filesender.renater.fr/?s=download&token=a09226c8-4445-c958-486a-a5912434f663

I hope it's better.

Vincent
________________________________________
De : Even Rouault <even.rouault at spatialys.com>
Envoyé : lundi 28 mai 2018 13:06
À : gdal-dev at lists.osgeo.org
Cc : Vincent Thierion
Objet : Re: [gdal-dev]  gdalwarp bug with version GDAL 2.2.1, released 2017/06/23

>
> You can upload data here :
>
> https://filesender.renater.fr/?s=download&token=2059f4d0-a06e-b9bf-85d7-22dd
> cd2ec0e3
>

Vincent,

the above zip doesn't contain the vect.shp/.dbf/.shx/.prj and rast.tif files
that are needed to reproduce.

Even

--
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon May 28 05:47:38 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 May 2018 14:47:38 +0200
Subject: [gdal-dev] gdalwarp bug with version GDAL 2.2.1,
	released 2017/06/23
In-Reply-To: <1527510236332.36887@inra.fr>
References: <1527504393687.85332@inra.fr> <3942704.RiZa6o5ym1@even-i700>
 <1527510236332.36887@inra.fr>
Message-ID: <8794757.SNH6GIWuFL@even-i700>

On lundi 28 mai 2018 12:26:56 CEST Vincent Thierion wrote:
> You can download the files here :
> https://filesender.renater.fr/?s=download&token=a09226c8-4445-c958-486a-a59
> 12434f663
> 

I don't reproduce the problem with GDAL 2.2.4 and later

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sreed at ccom.unh.edu  Mon May 28 19:08:38 2018
From: sreed at ccom.unh.edu (sji367)
Date: Mon, 28 May 2018 19:08:38 -0700 (MST)
Subject: [gdal-dev] How to use the GDALRasterize function. Spefically
 GDALRasterizeOptions.
Message-ID: <1527559718204-0.post@n6.nabble.com>

Hey all,

I have a few questions with the GDALRasterize fuction. 

1) How do I set the GDALRasterizeOptions?
I have tried:

    /// Create the list of options. Use the same as found on the command
line gdal_rasterize utility
    //  http://www.gdal.org/gdal_rasterize.html
    char *options[] = {
                            "-at", // All touched (all pixels touched by
lines or polygons will be
                                   //   updated, not just those whose center
point is within the polygon)
                            "-a_nodata", "-10", // Set the value to be used
if there is no data
                            "-tr", resolution_str, resolution_str, // Set
the X and Y resolution (grid size)
                            "-ot", dtype, // Set the output type (in this
case we are using double)
                            "-a", attribute,  // Set which attribute you
want to use to determines the raster's value
                            "-te", xMin, yMin, xMax, yMax, // Set the X,Y
bounds of the raster (i.e. touched extent)
                            "-q" // Quiet option
                    };/

where resolution_str, attribute, xMin, yMin, xMax, and yMax are char*s.

when I remove any of the options from the above code, this later line in the
code segfaults:
      /GDALRasterizeOptions *Options = GDALRasterizeOptionsNew(options,
NULL);/


The other method that I have tried is:
    /char** options = nullptr;
    options = CSLSetNameValue(options, "ALL_TOUCHED", "TRUE");
    options = CSLSetNameValue(options, "ATTRIBUTE", "Depth");
    options = CSLSetNameValue(options, "NO_DATA", "-10");/

The error that I get when I try this method is:
    /ERROR 6: Too many command options 'ALL_TOUCHED=TRUE'/


2) I am want to read the file I created with the GDALRasterize function
immediately. When I try to do that by passing in a filename into the const
char *pszDest (GD/ALRasterize(rasterfile.c_str(), NULL, ds_shp, Options,
NULL);/), the get the no data value is what is read. After the program is
finished, I can read the file normally. Therefore I do not think the file is
closing until after the program has exited. 

The other method that I tried was passing in a new datasource through the
GDALDatasetH hDstDS option (/GDALRasterize(NULL, ds_tiff, ds_shp, Options,
NULL);/). When I tried this, the dataset is empty. 

I was wondering is there a way to grid the data (it is a shapefile) through
a utility like GDALRasterize and then collect it through a utility like
RasterIO.


Thanks,
Sam
  



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From anna.maria.klimkowska at gmail.com  Tue May 29 00:09:42 2018
From: anna.maria.klimkowska at gmail.com (Aklim)
Date: Tue, 29 May 2018 00:09:42 -0700 (MST)
Subject: [gdal-dev] Problems with pct2rgb and gdal_translate
Message-ID: <1527577782080-0.post@n6.nabble.com>

Hello.

I try to mosaic images using gdalwrap from following instructions here 
https://download.osgeo.org/gdal/workshop/foss4ge2015/workshop_gdal.html#__RefHeading__5961_1333016408
<https://download.osgeo.org/gdal/workshop/foss4ge2015/workshop_gdal.html#__RefHeading__5961_1333016408>  

1. problem with pct2rgb 
Traceback (most recent call last):
  File "C:\OSGEO4~1\bin\pct2rgb.py", line 121, in <module>
    ct_size = ct.GetCount()
AttributeError: 'NoneType' object has no attribute 'GetCount'

2. problem with gdal_translate (expand rgb)
Input file size is 6085, 7106
ERROR 1: Error : band 1 has no color table

when I check shapes of images I receive following results:

Dimension image 1: 
(4, 7106, 6085)

Dimension image 2: 
(4, 6928, 7180)







--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Tue May 29 01:41:48 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 May 2018 10:41:48 +0200
Subject: [gdal-dev] How to use the GDALRasterize function. Spefically
	GDALRasterizeOptions.
In-Reply-To: <1527559718204-0.post@n6.nabble.com>
References: <1527559718204-0.post@n6.nabble.com>
Message-ID: <4896412.23CY4oZ7yJ@even-i700>

Sam,

> 
> I have a few questions with the GDALRasterize fuction.
> 
> 1) How do I set the GDALRasterizeOptions?
> I have tried:
> 
>     /// Create the list of options. Use the same as found on the command
> line gdal_rasterize utility
>     //  http://www.gdal.org/gdal_rasterize.html
>     char *options[] = {
>                             "-at", // All touched (all pixels touched by
> lines or polygons will be
>                                    //   updated, not just those whose center
> point is within the polygon)
>                             "-a_nodata", "-10", // Set the value to be used
> if there is no data
>                             "-tr", resolution_str, resolution_str, // Set
> the X and Y resolution (grid size)
>                             "-ot", dtype, // Set the output type (in this
> case we are using double)
>                             "-a", attribute,  // Set which attribute you
> want to use to determines the raster's value
>                             "-te", xMin, yMin, xMax, yMax, // Set the X,Y
> bounds of the raster (i.e. touched extent)
>                             "-q" // Quiet option
>                     };/

You need to add a final NULL pointer at the end of the options[] array, 
otherwise GDALRasterize() has no way to know where the array ends.

> 
> 
> 2) I am want to read the file I created with the GDALRasterize function
> immediately. When I try to do that by passing in a filename into the const
> char *pszDest (GD/ALRasterize(rasterfile.c_str(), NULL, ds_shp, Options,
> NULL);/), the get the no data value is what is read. After the program is
> finished, I can read the file normally. Therefore I do not think the file is
> closing until after the program has exited.

GDALRasterize() returns a dataset handle that you can potentially immediately 
use for reading its content with RasterIO().But at some point you explicitly 
need to GDALClose() it otherwise the dataset might not be completely 
serialized to disk

If you GDALOpen() this dataset before it has been closed, then you may read a 
partially flushed dataset.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue May 29 01:44:42 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 May 2018 10:44:42 +0200
Subject: [gdal-dev] Problems with pct2rgb and gdal_translate
In-Reply-To: <1527577782080-0.post@n6.nabble.com>
References: <1527577782080-0.post@n6.nabble.com>
Message-ID: <4294900.KTq8SzHC9q@even-i700>

On mardi 29 mai 2018 00:09:42 CEST Aklim wrote:
> Hello.
> 
> I try to mosaic images using gdalwrap from following instructions here
> https://download.osgeo.org/gdal/workshop/foss4ge2015/workshop_gdal.html#__Re
> fHeading__5961_1333016408
> <https://download.osgeo.org/gdal/workshop/foss4ge2015/workshop_gdal.html#__
> RefHeading__5961_1333016408>
> 
> 1. problem with pct2rgb
> Traceback (most recent call last):
>   File "C:\OSGEO4~1\bin\pct2rgb.py", line 121, in <module>
>     ct_size = ct.GetCount()
> AttributeError: 'NoneType' object has no attribute 'GetCount'

That means your input raster has no color table.  You don't need to do that 
preliminary step.
The tutorial works out-of-the-box only with the input data it was written.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sreed at ccom.unh.edu  Tue May 29 12:29:23 2018
From: sreed at ccom.unh.edu (sreed at ccom.unh.edu)
Date: Tue, 29 May 2018 15:29:23 -0400
Subject: [gdal-dev] How to use the GDALRasterize function. Spefically
 GDALRasterizeOptions.
In-Reply-To: <4896412.23CY4oZ7yJ@even-i700>
References: <1527559718204-0.post@n6.nabble.com> <4896412.23CY4oZ7yJ@even-i700>
Message-ID: <4f30946ea9150c4a98c70c45157b7a00.squirrel@webmail.ccom.unh.edu>

Even,

Thank you so much! This fixed my problem!

Thanks again,
Sam




> Sam,
>
>>
>> I have a few questions with the GDALRasterize fuction.
>>
>> 1) How do I set the GDALRasterizeOptions?
>> I have tried:
>>
>>     /// Create the list of options. Use the same as found on the command
>> line gdal_rasterize utility
>>     //  http://www.gdal.org/gdal_rasterize.html
>>     char *options[] = {
>>                             "-at", // All touched (all pixels touched by
>> lines or polygons will be
>>                                    //   updated, not just those whose
>> center
>> point is within the polygon)
>>                             "-a_nodata", "-10", // Set the value to be
>> used
>> if there is no data
>>                             "-tr", resolution_str, resolution_str, //
>> Set
>> the X and Y resolution (grid size)
>>                             "-ot", dtype, // Set the output type (in
>> this
>> case we are using double)
>>                             "-a", attribute,  // Set which attribute you
>> want to use to determines the raster's value
>>                             "-te", xMin, yMin, xMax, yMax, // Set the
>> X,Y
>> bounds of the raster (i.e. touched extent)
>>                             "-q" // Quiet option
>>                     };/
>
> You need to add a final NULL pointer at the end of the options[] array,
> otherwise GDALRasterize() has no way to know where the array ends.
>
>>
>>
>> 2) I am want to read the file I created with the GDALRasterize function
>> immediately. When I try to do that by passing in a filename into the
>> const
>> char *pszDest (GD/ALRasterize(rasterfile.c_str(), NULL, ds_shp, Options,
>> NULL);/), the get the no data value is what is read. After the program
>> is
>> finished, I can read the file normally. Therefore I do not think the
>> file is
>> closing until after the program has exited.
>
> GDALRasterize() returns a dataset handle that you can potentially
> immediately
> use for reading its content with RasterIO().But at some point you
> explicitly
> need to GDALClose() it otherwise the dataset might not be completely
> serialized to disk
>
> If you GDALOpen() this dataset before it has been closed, then you may
> read a
> partially flushed dataset.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



From robertofig85 at gmail.com  Tue May 29 16:04:00 2018
From: robertofig85 at gmail.com (Roberto Ribeiro)
Date: Tue, 29 May 2018 20:04:00 -0300
Subject: [gdal-dev] Problem building GDAL with GEOS on Cygwin
Message-ID: <CANTZQ+xR85Fb-R6FdFabyPU+SLj8Yyn+-BS8pKZiasq7oQViVg@mail.gmail.com>

Hello list, I'm trying to build GDAL 2.3 on Cygwin, and have been running
amok with the GEOS option. I present the correct path for the geos_config
file during ./configure, it does not throw any error, but after
configuration is done, GEOS support is marked as "no". And, sure enough,
while the script runs:

    libwebp not found - WEBP support disabled
    checking for bin... no
    checking for sfcgal-config... no

This shows that it did find the file, else it'd show "checking for
geos-config", but it's not finding the bin dir (which is the same one where
geos_config is). How might I fix this?

P.S.: it's GEOS 3.6.3, compiled with cygwin, working.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180529/e552f31d/attachment.html>

From marco.atzeri at gmail.com  Tue May 29 23:43:29 2018
From: marco.atzeri at gmail.com (Marco Atzeri)
Date: Wed, 30 May 2018 08:43:29 +0200
Subject: [gdal-dev] Problem building GDAL with GEOS on Cygwin
In-Reply-To: <CANTZQ+xR85Fb-R6FdFabyPU+SLj8Yyn+-BS8pKZiasq7oQViVg@mail.gmail.com>
References: <CANTZQ+xR85Fb-R6FdFabyPU+SLj8Yyn+-BS8pKZiasq7oQViVg@mail.gmail.com>
Message-ID: <a242d07b-c513-cd4d-618c-cd340b019a11@gmail.com>

On 5/30/2018 1:04 AM, Roberto Ribeiro wrote:
> Hello list, I'm trying to build GDAL 2.3 on Cygwin, and have been 
> running amok with the GEOS option. I present the correct path for the 
> geos_config file during ./configure, it does not throw any error, but 
> after configuration is done, GEOS support is marked as "no". And, sure 
> enough, while the script runs:
> 
>      libwebp not found - WEBP support disabled
>      checking for bin... no
>      checking for sfcgal-config... no
> 
> This shows that it did find the file, else it'd show "checking for 
> geos-config", but it's not finding the bin dir (which is the same one 
> where geos_config is). How might I fix this?
> 
> P.S.: it's GEOS 3.6.3, compiled with cygwin, working.

check config.log output for guidance
on 2.3.0 with geos 3.5.1 the output is:

configure:32848: checking for geos-config
configure:32866: found /usr/bin/geos-config
configure:32879: result: /usr/bin/geos-config
configure:32979: checking for GEOS version >= 3.1.0
configure:33002: result: yes
configure:33032: checking for GEOSversion in -lgeos_c
configure:33058: gcc -o conftest.exe -I/usr/include   conftest.c -lgeos_c
        -L/usr/lib -lgeos_c >&5
configure:33058: $? = 0
configure:33067: result: yes
configure:33090: Using C API from GEOS 3.5.1

From arielz at satellogic.com  Wed May 30 01:24:01 2018
From: arielz at satellogic.com (Ariel Zerahia)
Date: Wed, 30 May 2018 11:24:01 +0300
Subject: [gdal-dev] GDAL adding overviews adds artifacts to the raster
Message-ID: <CA+DTi0J5gzaPEw+FtB7-PUWWYHGLVerEjrVcMWK-25-jEm0iCA@mail.gmail.com>

While trying to add overviews to a raster we observe strange artifacts that
did not exists in the original raster.

here is a link to the original raster:
https://tellurictest.blob.core.windows.net/overviews-artifacts/one.tif?sp=r&st=2018-05-30T08:17:22Z&se=2019-06-08T16:17:22Z&spr=https&sv=2017-11-09&sig=L0WZrO7xYqacRVmXDSPGFLVe6tUYGlnwWh0huaI4%2Fng%3D&sr=b


to generate the overviews I used this:

cp one.tif over_one.tif

gdaladdo -r cubic over_one.tif 2 4 8 16 32 64

here you can see the raster with overviews:
https://tellurictest.blob.core.windows.net/overviews-artifacts/over_one.tif?sp=r&st=2018-05-30T08:20:28Z&se=2019-06-08T16:20:28Z&spr=https&sv=2017-11-09&sig=%2FV2hXg8f0mPLKQyMDODZ3p81Qnkb9GvAF%2B1zgk%2BypKE%3D&sr=b

by looking at both rasters in low zoom levels you can observe the artifacts.

thanks,
Ariel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180530/81b7f072/attachment.html>

From weskerjiang at sina.cn  Thu May 31 06:12:12 2018
From: weskerjiang at sina.cn (weskerjiang at sina.cn)
Date: Thu, 31 May 2018 21:12:12 +0800
Subject: [gdal-dev] how to use gdal to create a xlsx file
Message-ID: <20180531131212.194287200D4@webmail.sinamail.sina.com.cn>

I want to use gdal to read a shapefile and write the attributes into a xlsx file,how to use gdal to do that?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180531/9bbf185e/attachment.html>

From mdsumner at gmail.com  Thu May 31 06:34:12 2018
From: mdsumner at gmail.com (Michael Sumner)
Date: Thu, 31 May 2018 23:34:12 +1000
Subject: [gdal-dev] how to use gdal to create a xlsx file
In-Reply-To: <20180531131212.194287200D4@webmail.sinamail.sina.com.cn>
References: <20180531131212.194287200D4@webmail.sinamail.sina.com.cn>
Message-ID: <CAAcGz9-JrYTNncrW8uv2MDn+ntZoKVMuLYhTHhfdphr=CSE_ag@mail.gmail.com>

Maybe best to open *a copy of* the .dbf in Excel and save from there?

 R or Python could be used for that too, or do you really need to do this
with GDAL (why?).

HTH, Mike


On Thu, 31 May 2018 at 23:22 <weskerjiang at sina.cn> wrote:

> I want to use gdal to read a shapefile and write the attributes into a
> xlsx file,how to use gdal to do that?
>
> --------------------------------
> <http://t.sina.com.cn/2170550500?s=5aSn5ZGb5LiN5Lya6aOe>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Dr. Michael Sumner
Software and Database Engineer
Australian Antarctic Division
203 Channel Highway
Kingston Tasmania 7050 Australia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180531/1896e679/attachment.html>

From doug_newcomb at fws.gov  Thu May 31 06:38:35 2018
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Thu, 31 May 2018 09:38:35 -0400
Subject: [gdal-dev] [EXTERNAL] Re: how to use gdal to create a xlsx file
In-Reply-To: <CAAcGz9-JrYTNncrW8uv2MDn+ntZoKVMuLYhTHhfdphr=CSE_ag@mail.gmail.com>
References: <20180531131212.194287200D4@webmail.sinamail.sina.com.cn>
 <CAAcGz9-JrYTNncrW8uv2MDn+ntZoKVMuLYhTHhfdphr=CSE_ag@mail.gmail.com>
Message-ID: <CALQGVr3+RWmyYweJ7Oq5am7jB3eqG3uuUkox7zR1EigsWO2rNQ@mail.gmail.com>

Libreoffice calc will read and write .dbf and can also save to .xlsx.

Doug

On Thu, May 31, 2018 at 9:34 AM, Michael Sumner <mdsumner at gmail.com> wrote:

> Maybe best to open *a copy of* the .dbf in Excel and save from there?
>
>  R or Python could be used for that too, or do you really need to do this
> with GDAL (why?).
>
> HTH, Mike
>
>
> On Thu, 31 May 2018 at 23:22 <weskerjiang at sina.cn> wrote:
>
>> I want to use gdal to read a shapefile and write the attributes into a
>> xlsx file,how to use gdal to do that?
>>
>> --------------------------------
>> <http://t.sina.com.cn/2170550500?s=5aSn5ZGb5LiN5Lya6aOe>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Dr. Michael Sumner
> Software and Database Engineer
> Australian Antarctic Division
> 203 Channel Highway
> Kingston Tasmania 7050 Australia
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
551F Pylon Dr
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------

*NOTE: This email correspondence and any attachments to and from this
sender is subject to the Freedom of Information Act (FOIA) and may be
disclosed to third parties.*​
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180531/e0d36cbd/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu May 31 07:02:32 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 31 May 2018 14:02:32 +0000
Subject: [gdal-dev] Using GeoPackage as vector tile container?
Message-ID: <24dbcdf0ab9b4a00aa2cda8b9f1060e2@C119S212VM042.msvyvi.vaha.local>

Hi,

I wonder what would it need to store vector tiles into GeoPackage instead of MBTiles. Officially probably a new extension like the Tiled Gridded Coverage Data extension, but wouln't it technically be rather simple to write vector tiles as BLOBs into the tile_data column instead of png or jpeg BLOBs?

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180531/fe20db52/attachment.html>

From even.rouault at spatialys.com  Thu May 31 07:16:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 31 May 2018 16:16:09 +0200
Subject: [gdal-dev] how to use gdal to create a xlsx file
In-Reply-To: <20180531131212.194287200D4@webmail.sinamail.sina.com.cn>
References: <20180531131212.194287200D4@webmail.sinamail.sina.com.cn>
Message-ID: <3354078.msjjp5cOon@even-i700>

On jeudi 31 mai 2018 21:12:12 CEST weskerjiang at sina.cn wrote:
> I want to use gdal to read a shapefile and write the attributes into a xlsx
> file,how to use gdal to do that?

ogr2ogr -of XLSX output.xlsx input.shp

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu May 31 07:21:51 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 31 May 2018 16:21:51 +0200
Subject: [gdal-dev] Using GeoPackage as vector tile container?
In-Reply-To: <24dbcdf0ab9b4a00aa2cda8b9f1060e2@C119S212VM042.msvyvi.vaha.local>
References: <24dbcdf0ab9b4a00aa2cda8b9f1060e2@C119S212VM042.msvyvi.vaha.local>
Message-ID: <1595125.cq4xAoSzd1@even-i700>

On jeudi 31 mai 2018 14:02:32 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> I wonder what would it need to store vector tiles into GeoPackage instead of
> MBTiles. Officially probably a new extension like the Tiled Gridded
> Coverage Data extension, but wouln't it technically be rather simple to
> write vector tiles as BLOBs into the tile_data column instead of png or
> jpeg BLOBs?

"Rather simple", well that's arguable from an implementation point of view, 
since the architecture of the MVT and GeoPackage drivers isn't naturally 
compatible to make them work together currently.

But conceptually yes, the vector tiles as BLOBS of a tile pyramid user table 
would be a good fit You would also need to write metadata to describe the 
layers and attributes, to avoid having to scan all the tiles to retrieve it 
(at least for OGR point of view that has a fixed schema constraint to expose 
vector features)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From osahon.gis at gmail.com  Thu May 31 12:03:21 2018
From: osahon.gis at gmail.com (Osahon Oduware)
Date: Thu, 31 May 2018 20:03:21 +0100
Subject: [gdal-dev] [gdal-announce] GDAL Support For PostGIS Out-DB
	Raster
In-Reply-To: <CAGpiUSiTkiUe483_X934OyGLuQaq2FOi=TQ-+L6p-JzSUOR+2w@mail.gmail.com>
References: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
 <13009849.mDlFnfGobQ@even-i700>
 <CAGpiUSiTkiUe483_X934OyGLuQaq2FOi=TQ-+L6p-JzSUOR+2w@mail.gmail.com>
Message-ID: <CAGpiUSjYr_hjUGQQiGQTKJ2yTCVQ=V2uA+-vz96E_eOA7xwShQ@mail.gmail.com>

Hi Even,

Any update on this? I have been away for a while.

Best Regards

On Mar 21, 2018 16:32, "Osahon Oduware" <osahon.gis at gmail.com> wrote:

> Hi Even,
>
> This is great news. I cannot wait for this feature to be implemented as it
> prevents double storage of rasters (database and filesystem).
>
> On Wed, Mar 21, 2018 at 4:18 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Moving the discussion to gdal-dev
>>
>> > Please, I wanted to find out if there is any ongoing work towards
>> providing
>> > GDAL support for PostGIS Out-DB rasters. I have been in touch with both
>> > Postgres and QGIS and I was told that it is a limitation from GDAL.
>> >
>> > Is there any plan to implement this feature?
>>
>> Yes, I should work on this in the coming weeks.
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180531/c5f3b382/attachment.html>

From osahon.gis at gmail.com  Thu May 31 12:04:58 2018
From: osahon.gis at gmail.com (Osahon Oduware)
Date: Thu, 31 May 2018 20:04:58 +0100
Subject: [gdal-dev] [gdal-announce] GDAL Support For PostGIS Out-DB
	Raster
In-Reply-To: <CAGpiUSiTkiUe483_X934OyGLuQaq2FOi=TQ-+L6p-JzSUOR+2w@mail.gmail.com>
References: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
 <13009849.mDlFnfGobQ@even-i700>
 <CAGpiUSiTkiUe483_X934OyGLuQaq2FOi=TQ-+L6p-JzSUOR+2w@mail.gmail.com>
Message-ID: <CAGpiUSgaPXLtred87QYKWEShjyZPUU8KdtVxpNYRkZJVajkO7Q@mail.gmail.com>

Hi Even,

Any update on this? I have been away for a while.

Best Regards

On Mar 21, 2018 16:32, "Osahon Oduware" <osahon.gis at gmail.com> wrote:

> Hi Even,
>
> This is great news. I cannot wait for this feature to be implemented as it
> prevents double storage of rasters (database and filesystem).
>
> On Wed, Mar 21, 2018 at 4:18 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Moving the discussion to gdal-dev
>>
>> > Please, I wanted to find out if there is any ongoing work towards
>> providing
>> > GDAL support for PostGIS Out-DB rasters. I have been in touch with both
>> > Postgres and QGIS and I was told that it is a limitation from GDAL.
>> >
>> > Is there any plan to implement this feature?
>>
>> Yes, I should work on this in the coming weeks.
>>
>> Even
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180531/6151ff52/attachment.html>

From even.rouault at spatialys.com  Thu May 31 12:13:29 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 31 May 2018 21:13:29 +0200
Subject: [gdal-dev] [gdal-announce] GDAL Support For PostGIS Out-DB
	Raster
In-Reply-To: <CAGpiUSgaPXLtred87QYKWEShjyZPUU8KdtVxpNYRkZJVajkO7Q@mail.gmail.com>
References: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
 <CAGpiUSiTkiUe483_X934OyGLuQaq2FOi=TQ-+L6p-JzSUOR+2w@mail.gmail.com>
 <CAGpiUSgaPXLtred87QYKWEShjyZPUU8KdtVxpNYRkZJVajkO7Q@mail.gmail.com>
Message-ID: <3590062.V6rRWWEyfA@even-i700>

On jeudi 31 mai 2018 20:04:58 CEST Osahon Oduware wrote:
> Hi Even,
> 
> Any update on this? I have been away for a while.

Yep, support for out-db raster has been added in GDAL master, and backported 
to 2.3 branch as well

See outdb_resolution option in http://gdal.org/frmt_postgisraster.html

2 new functions added to PostGIS 2.5dev as well to help reading the out-db 
raster directly from client-side if client and server see the same raster.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From osahon.gis at gmail.com  Thu May 31 13:35:30 2018
From: osahon.gis at gmail.com (Osahon Oduware)
Date: Thu, 31 May 2018 21:35:30 +0100
Subject: [gdal-dev] [gdal-announce] GDAL Support For PostGIS Out-DB
	Raster
In-Reply-To: <3590062.V6rRWWEyfA@even-i700>
References: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
 <CAGpiUSiTkiUe483_X934OyGLuQaq2FOi=TQ-+L6p-JzSUOR+2w@mail.gmail.com>
 <CAGpiUSgaPXLtred87QYKWEShjyZPUU8KdtVxpNYRkZJVajkO7Q@mail.gmail.com>
 <3590062.V6rRWWEyfA@even-i700>
Message-ID: <CAGpiUSgmXYLHf03grF-Qr8wKzt5QanrGBvrzGqpAEe6n0QAehg@mail.gmail.com>

Hi Even,

Thanks for the prompt response. Please, I want to know what is the minimum
version of GDAL, PostgreSQL and Postgis that this outdb raster
functionality is currently implemented.

Best Regards

On May 31, 2018 20:13, "Even Rouault" <even.rouault at spatialys.com> wrote:

> On jeudi 31 mai 2018 20:04:58 CEST Osahon Oduware wrote:
> > Hi Even,
> >
> > Any update on this? I have been away for a while.
>
> Yep, support for out-db raster has been added in GDAL master, and
> backported
> to 2.3 branch as well
>
> See outdb_resolution option in http://gdal.org/frmt_postgisraster.html
>
> 2 new functions added to PostGIS 2.5dev as well to help reading the out-db
> raster directly from client-side if client and server see the same raster.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180531/ef95845d/attachment.html>

From even.rouault at spatialys.com  Thu May 31 13:39:56 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 31 May 2018 22:39:56 +0200
Subject: [gdal-dev] [gdal-announce] GDAL Support For PostGIS Out-DB
	Raster
In-Reply-To: <CAGpiUSgmXYLHf03grF-Qr8wKzt5QanrGBvrzGqpAEe6n0QAehg@mail.gmail.com>
References: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
 <3590062.V6rRWWEyfA@even-i700>
 <CAGpiUSgmXYLHf03grF-Qr8wKzt5QanrGBvrzGqpAEe6n0QAehg@mail.gmail.com>
Message-ID: <8130283.T08iD0Capr@even-i700>

On jeudi 31 mai 2018 21:35:30 CEST Osahon Oduware wrote:
> Hi Even,
> 
> Thanks for the prompt response. Please, I want to know what is the minimum
> version of GDAL,
no released version yet. Will be in 2.3.1 (end of June probably) and 2.4.0 
(next year)
> PostgreSQL 
irrelevant. Any PostgreSQL version supported by the PostGIS version you use is 
fine
> and Postgis 
will be in Postgis 2.5.0. But not strictly needed. Existing versions will work 
too

> that this outdb raster
> functionality is currently implemented.
> 
> Best Regards
> 
> On May 31, 2018 20:13, "Even Rouault" <even.rouault at spatialys.com> wrote:
> > On jeudi 31 mai 2018 20:04:58 CEST Osahon Oduware wrote:
> > > Hi Even,
> > > 
> > > Any update on this? I have been away for a while.
> > 
> > Yep, support for out-db raster has been added in GDAL master, and
> > backported
> > to 2.3 branch as well
> > 
> > See outdb_resolution option in http://gdal.org/frmt_postgisraster.html
> > 
> > 2 new functions added to PostGIS 2.5dev as well to help reading the out-db
> > raster directly from client-side if client and server see the same raster.
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From osahon.gis at gmail.com  Thu May 31 13:56:32 2018
From: osahon.gis at gmail.com (Osahon Oduware)
Date: Thu, 31 May 2018 21:56:32 +0100
Subject: [gdal-dev] [gdal-announce] GDAL Support For PostGIS Out-DB
	Raster
In-Reply-To: <8130283.T08iD0Capr@even-i700>
References: <CAGpiUSiyAhwxvp=H0GDh6hiPtThJBgiR8btG1_LuG63UvTFcYQ@mail.gmail.com>
 <3590062.V6rRWWEyfA@even-i700>
 <CAGpiUSgmXYLHf03grF-Qr8wKzt5QanrGBvrzGqpAEe6n0QAehg@mail.gmail.com>
 <8130283.T08iD0Capr@even-i700>
Message-ID: <CAGpiUSisMxWg5VoG6dJ=zKEwa2fLKg6S=LZAWng9KcshsgzMZA@mail.gmail.com>

Ok, thanks a lot for the information. Great work.

On May 31, 2018 21:39, "Even Rouault" <even.rouault at spatialys.com> wrote:

> On jeudi 31 mai 2018 21:35:30 CEST Osahon Oduware wrote:
> > Hi Even,
> >
> > Thanks for the prompt response. Please, I want to know what is the
> minimum
> > version of GDAL,
> no released version yet. Will be in 2.3.1 (end of June probably) and 2.4.0
> (next year)
> > PostgreSQL
> irrelevant. Any PostgreSQL version supported by the PostGIS version you
> use is
> fine
> > and Postgis
> will be in Postgis 2.5.0. But not strictly needed. Existing versions will
> work
> too
>
> > that this outdb raster
> > functionality is currently implemented.
> >
> > Best Regards
> >
> > On May 31, 2018 20:13, "Even Rouault" <even.rouault at spatialys.com>
> wrote:
> > > On jeudi 31 mai 2018 20:04:58 CEST Osahon Oduware wrote:
> > > > Hi Even,
> > > >
> > > > Any update on this? I have been away for a while.
> > >
> > > Yep, support for out-db raster has been added in GDAL master, and
> > > backported
> > > to 2.3 branch as well
> > >
> > > See outdb_resolution option in http://gdal.org/frmt_postgisraster.html
> > >
> > > 2 new functions added to PostGIS 2.5dev as well to help reading the
> out-db
> > > raster directly from client-side if client and server see the same
> raster.
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180531/9b36bfc5/attachment-0001.html>

