From oyvind.idland at gmail.com  Wed Jun  1 02:37:12 2011
From: oyvind.idland at gmail.com (Oyvind Idland)
Date: Wed Jun  1 05:10:36 2011
Subject: [gdal-dev] GDAL 1.8.0 and MrSid "no-data" values
In-Reply-To: <C55473998E248B4DAEC5342D698DFE850116681D68@sea-srv-mail.lizardtech.com>
References: <BANLkTi=AsxtR8pDp=wB6dCVPYNn5TasPVw@mail.gmail.com>
	<C55473998E248B4DAEC5342D698DFE85011493CCC5@sea-srv-mail.lizardtech.com>
	<BANLkTimp3K-bu0ChUn1GeT+J2BWNL5Tbxw@mail.gmail.com>
	<BANLkTimHkJ4qF=ZME-zFJosbn6OFpAon-w@mail.gmail.com>
	<C55473998E248B4DAEC5342D698DFE850116681D68@sea-srv-mail.lizardtech.com>
Message-ID: <BANLkTin5xv6Eb3ERqOGaR1H=bvQRPE2GOw@mail.gmail.com>

Ok, thanks.


-- Oyvind

On Fri, May 27, 2011 at 9:10 PM, Kirk McKelvey <kmckelvey@lizardtech.com>wrote:

> Sorry Oyvind, somehow I missed your note about it being MG2.
>
>
>
> I looked into this yesterday and it is indeed a difference in the v8 DSDK.
> Image properties that are available through the API (such as the nodata
> value, dynamic range, etc.) are no longer being inserted into the metadata.
> This means they do not get transcribed into the GDAL metadata during
> initialization of the MrSIDDataset either.
>
>
>
> Meanwhile, it looks like MrSIDRasterBand::GetNoDataValue() was disconnected
> due to a difference in the way LizardTech and GDAL interpret NODATA
> (per-band vs. all-bands), so there is no longer a way to get at this info at
> all.
>
>
>
> For the moment the only suggestion I have is to reactivate the code in
> MrSIDRasterBand::MrSIDRasterBand() (approx. line 366ff in mrsiddataset.cpp)
> that sets the nodata value for the raster band.  You will of course have to
> deal with the different nodata semantics between LT and GDAL.
>
>
>
> I will work on a patch to reinsert the NO_DATA_VALUE into the metadata.
>
>
>
> Kirk.
>
>
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Oyvind Idland
> *Sent:* jeudi 26 mai 2011 01:16
>
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] GDAL 1.8.0 and MrSid "no-data" values
>
>
>
> Hi,
>
> should I assume that this error is due to the DSDK 8.x version ?
>
> -- Oyvind
>
> On Mon, May 16, 2011 at 8:30 AM, Oyvind Idland <oyvind.idland@gmail.com>
> wrote:
>
> Hi,
>
> The file I'm using is actually MG2, using only 3 bands.
>
> Note, thats its the same file I used for testing in 1.7.x aswell.
>
>
> - Oyvind
>
>
>
> On Fri, May 13, 2011 at 4:08 PM, Kirk McKelvey <kmckelvey@lizardtech.com>
> wrote:
>
> Is this with MG3 or MG4 files?  MG4 uses an alpha channel instead of
> nodata, so what you describe would be expected in that case.
>
>
>
> *From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Oyvind Idland
> *Sent:* vendredi 13 mai 2011 04:28
> *To:* gdal-dev@lists.osgeo.org
> *Subject:* [gdal-dev] GDAL 1.8.0 and MrSid "no-data" values
>
>
>
> Hi,
>
> I just updated to 1.8.0 from 1.7, using the MrSid DSDK 8.0.
>
> In order to handle transparency, i have until now used the metadata values
> from "IMAGE__NO_DATA_VALUE",
> and simply masked away pixels.
>
> After upgrading, the IMAGE__NO_DATA_VALUE yields nothing, neither is it
> listed when using gdalinfo.
>
> The band->GetNoDataValue() doesn't give me any hints either.
>
> Should I handle this in a different way ?
>
>
> -- Oyvind
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110601/a2df4b2e/attachment-0001.html
From anton.korosov at nersc.no  Wed Jun  1 05:08:59 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Wed Jun  1 07:57:54 2011
Subject: [gdal-dev] How to specify extent of a VRTWarpedDataset in Python?
Message-ID: <4DE601AB.1030307@nersc.no>

Hi!
we are developing software for automatic processing of satellite data 
and decided to base it mostly on GDAL-Python bindings. Can I ask you 
about options to create Warped VRT datasets in Python?

1. The command

gdalwarp -t_srs '+proj=utm +zone=24 +datum=WGS84' -of VRT -tr 1000 1000 
-te -1000000 7000000 2000000 10000000 input.tif output.vrt

creates a VRT file of subclass VRTWarpedDataset. The size, resolution 
and spatial reference is specified by the options of that command.
Is there any way I can create such VRTWarpedDataset using GDAL-Python 
bindings?

I'm afraid that with the function gdal.AutoCreateWarpedVRT() I can 
specify only spatial reference (i.e. UTM Zone) but not raster size and 
resolution. Am I right?
Of course I can edit the generated VRT file and adjust RasterXSize, 
RasterYSize, GeoTransform and DstGeoTransform manually. But is there any 
way to do that programmatically?


2. How can I convert the VRT dataset generated by AutoCreateWarpedVRT 
into a string without writing to disk? That's necessary since a VRT from 
a MERIS full swath exceeds 6 MB. Also for our applications it would be 
much more efficient to edit XML in memory and then to flush to disk with 
CreateCopy.

Thanks for support!
Anton
From even.rouault at mines-paris.org  Wed Jun  1 05:32:55 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun  1 08:15:58 2011
Subject: [gdal-dev] How to specify extent of a VRTWarpedDataset in Python?
In-Reply-To: <4DE601AB.1030307@nersc.no>
References: <4DE601AB.1030307@nersc.no>
Message-ID: <1306920775.4de607474eff5@webmail.free.fr>

Selon Anton Korosov <anton.korosov@nersc.no>:

> Hi!
> we are developing software for automatic processing of satellite data
> and decided to base it mostly on GDAL-Python bindings. Can I ask you
> about options to create Warped VRT datasets in Python?
>
> 1. The command
>
> gdalwarp -t_srs '+proj=utm +zone=24 +datum=WGS84' -of VRT -tr 1000 1000
> -te -1000000 7000000 2000000 10000000 input.tif output.vrt
>
> creates a VRT file of subclass VRTWarpedDataset. The size, resolution
> and spatial reference is specified by the options of that command.
> Is there any way I can create such VRTWarpedDataset using GDAL-Python
> bindings?

Yes, with Dataset.Create() by specifying a SUBCLASS=VRTWarpedDataset creation
option. ... But I don't think it will help you much since the
GDALInitializeWarpedVRT() that is then used by gdalwarp to fill the dataset
isn't mapped to SWIG.

>
> I'm afraid that with the function gdal.AutoCreateWarpedVRT() I can
> specify only spatial reference (i.e. UTM Zone) but not raster size and
> resolution. Am I right?

Yes

> Of course I can edit the generated VRT file and adjust RasterXSize,
> RasterYSize, GeoTransform and DstGeoTransform manually. But is there any
> way to do that programmatically?

None that I am aware of with Python

>
>
> 2. How can I convert the VRT dataset generated by AutoCreateWarpedVRT
> into a string without writing to disk? That's necessary since a VRT from
> a MERIS full swath exceeds 6 MB. Also for our applications it would be
> much more efficient to edit XML in memory and then to flush to disk with
> CreateCopy.

You can use a virtual memory file. You translate your in-memory VRT dataset with
CreateCopy() into a /vsimem/some_name.vrt and then you can read the content of
that virtual file with gdal.VSIFOpenL() / gdal.VSIFReadL() / gdal.VSIFCloseL() /
gdal.Unlink(). I assume you use at least GDAL 1.8.0 since they weren't mapped to
python before.

>
> Thanks for support!
> Anton
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From antonio.valentino at tiscali.it  Wed Jun  1 07:26:43 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Jun  1 10:16:00 2011
Subject: [gdal-dev] How to specify extent of a VRTWarpedDataset in Python?
In-Reply-To: <1306920775.4de607474eff5@webmail.free.fr>
References: <4DE601AB.1030307@nersc.no>
	<1306920775.4de607474eff5@webmail.free.fr>
Message-ID: <20110601132643.2ddd31c2@asigrid01>

Hi Even, hi Anton,

Il giorno Wed, 01 Jun 2011 11:32:55 +0200
Even Rouault <even.rouault@mines-paris.org> ha scritto:

> Selon Anton Korosov <anton.korosov@nersc.no>:
> 
> > Hi!
> > we are developing software for automatic processing of satellite
> > data and decided to base it mostly on GDAL-Python bindings. Can I
> > ask you about options to create Warped VRT datasets in Python?
> >
> > 1. The command
> >
> > gdalwarp -t_srs '+proj=utm +zone=24 +datum=WGS84' -of VRT -tr 1000
> > 1000 -te -1000000 7000000 2000000 10000000 input.tif output.vrt
> >
> > creates a VRT file of subclass VRTWarpedDataset. The size,
> > resolution and spatial reference is specified by the options of
> > that command. Is there any way I can create such VRTWarpedDataset
> > using GDAL-Python bindings?
> 
> Yes, with Dataset.Create() by specifying a SUBCLASS=VRTWarpedDataset
> creation option. ... But I don't think it will help you much since the
> GDALInitializeWarpedVRT() that is then used by gdalwarp to fill the
> dataset isn't mapped to SWIG.

maybe the gdal.ReprojectImage could help, but I don't have the time to
test it right now.



best regards

-- 
Antonio Valentino
From even.rouault at mines-paris.org  Wed Jun  1 07:58:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun  1 10:49:45 2011
Subject: [gdal-dev] How to specify extent of a VRTWarpedDataset in Python?
In-Reply-To: <20110601132643.2ddd31c2@asigrid01>
References: <4DE601AB.1030307@nersc.no>
	<1306920775.4de607474eff5@webmail.free.fr>
	<20110601132643.2ddd31c2@asigrid01>
Message-ID: <1306929529.4de629795c83e@webmail.free.fr>

Selon Antonio Valentino <antonio.valentino@tiscali.it>:
> > Yes, with Dataset.Create() by specifying a SUBCLASS=VRTWarpedDataset
> > creation option. ... But I don't think it will help you much since the
> > GDALInitializeWarpedVRT() that is then used by gdalwarp to fill the
> > dataset isn't mapped to SWIG.
>
> maybe the gdal.ReprojectImage could help, but I don't have the time to
> test it right now.

I don't think ReprojectImage() will work when outputing to a VRT dataset.

>
>
>
> best regards
>
> --
> Antonio Valentino
>


From DCarreira at edia.pt  Wed Jun  1 11:29:02 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Wed Jun  1 14:41:54 2011
Subject: [gdal-dev] ArcSDE: connection times too long
Message-ID: <58C383B0A191E747BE79503F3EEA22BF8960B4ACF3@beja012.edia.pt>

I am very, very happy to report that this is working perfectly!! And fast!

The only thing I needed was to include the version tag to the connection string, even if it's the default. Go figure...

So use a connection like this to have a quick connection:

ogrinfo -so -ro SDE:server,5151,,user,pdw,user.featureclass,SDE.DEFAULT user.featureclass

You can create a .vrt file and add it to QGIS. Works wonders!

Thanks to all that make this possible!

Look here - beautiful!  http://bit.ly/l20tAp

Duarte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110601/a7c4dece/attachment.html
From giohappy at gmail.com  Wed Jun  1 12:25:44 2011
From: giohappy at gmail.com (G. Allegri)
Date: Wed Jun  1 15:31:51 2011
Subject: [gdal-dev] gdal warp with approximate transformation seems a bit
	slow...
Message-ID: <BANLkTikcXiyKNcUCU5fuTmU0=J1VshjDRQ@mail.gmail.com>

I was doing some tests on Gvsig for raster reprojection, where gdal warp is
used. Gvsig uses a default error threshold of 0.125, which AFAIK makes gdal
warp fall back to an approximate transformation. Anyway the reprojection is
quite slow, even if significantly faster then GDALGenImgProjTransform.

My test is against a 21698P x 24647L ArcInfo Binary Grid, with a single band
with block dimensions 256x4. Bot SRSs are projected.
The command is: > gdalwarp -s_srs EPSG:3003 -t_srs EPSG:23032 -et 0.125
hdr.adf test.tiff
It took about 9 minutes to complete.

Loading the same raster on QGis, which implements its own approximate
transformation for on-the-fly reprojection [1], is istantaneous.
I was wondering if a similar algorithm could be use within Gdal...

Giovanni

[1]
http://trac.osgeo.org/qgis/browser/trunk/qgis/src/core/qgsrasterprojector.cpp
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110601/479bbd7f/attachment.html
From chaitanya.ch at gmail.com  Wed Jun  1 12:39:44 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jun  1 15:46:38 2011
Subject: [gdal-dev] gdal warp with approximate transformation seems a bit
	slow...
In-Reply-To: <BANLkTikcXiyKNcUCU5fuTmU0=J1VshjDRQ@mail.gmail.com>
References: <BANLkTikcXiyKNcUCU5fuTmU0=J1VshjDRQ@mail.gmail.com>
Message-ID: <BANLkTi=97FzKUBJAi8-Q49xpM2xz9FPWnQ@mail.gmail.com>

Giovanni,

You can use the -et option of gdalwarp. [1]

Are you sure qgis is warping the whole image and not just the scaled down
version of the original? Processing a half giga pixel image ought to be
longer than instantaneous.

[1]: http://www.gdal.org/gdalwarp.html

On Wed, Jun 1, 2011 at 9:55 PM, G. Allegri <giohappy@gmail.com> wrote:

> I was doing some tests on Gvsig for raster reprojection, where gdal warp is
> used. Gvsig uses a default error threshold of 0.125, which AFAIK makes gdal
> warp fall back to an approximate transformation. Anyway the reprojection is
> quite slow, even if significantly faster then GDALGenImgProjTransform.
>
> My test is against a 21698P x 24647L ArcInfo Binary Grid, with a single
> band with block dimensions 256x4. Bot SRSs are projected.
> The command is: > gdalwarp -s_srs EPSG:3003 -t_srs EPSG:23032 -et 0.125
> hdr.adf test.tiff
> It took about 9 minutes to complete.
>
> Loading the same raster on QGis, which implements its own approximate
> transformation for on-the-fly reprojection [1], is istantaneous.
> I was wondering if a similar algorithm could be use within Gdal...
>
> Giovanni
>
> [1]
> http://trac.osgeo.org/qgis/browser/trunk/qgis/src/core/qgsrasterprojector.cpp
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110601/33ed4e11/attachment.html
From giohappy at gmail.com  Wed Jun  1 13:25:02 2011
From: giohappy at gmail.com (G. Allegri)
Date: Wed Jun  1 16:34:31 2011
Subject: [gdal-dev] gdal warp with approximate transformation seems a bit
	slow...
In-Reply-To: <BANLkTi=97FzKUBJAi8-Q49xpM2xz9FPWnQ@mail.gmail.com>
References: <BANLkTikcXiyKNcUCU5fuTmU0=J1VshjDRQ@mail.gmail.com>
	<BANLkTi=97FzKUBJAi8-Q49xpM2xz9FPWnQ@mail.gmail.com>
Message-ID: <BANLkTinHfdZB8xezH06t6SYwmyNAY5QxVw@mail.gmail.com>

2011/6/1 Chaitanya kumar CH <chaitanya.ch@gmail.com>

> Giovanni,
>
> You can use the -et option of gdalwarp. [1]


> Are you sure qgis is warping the whole image and not just the scaled down
> version of the original? Processing a half giga pixel image ought to be
> longer than instantaneous.
>

Probably you're right... I will investigate more. Thanks for the hint.


>
> [1]: http://www.gdal.org/gdalwarp.html
>
> On Wed, Jun 1, 2011 at 9:55 PM, G. Allegri <giohappy@gmail.com> wrote:
>
>> I was doing some tests on Gvsig for raster reprojection, where gdal warp
>> is used. Gvsig uses a default error threshold of 0.125, which AFAIK makes
>> gdal warp fall back to an approximate transformation. Anyway the
>> reprojection is quite slow, even if significantly faster then
>> GDALGenImgProjTransform.
>>
>> My test is against a 21698P x 24647L ArcInfo Binary Grid, with a single
>> band with block dimensions 256x4. Bot SRSs are projected.
>> The command is: > gdalwarp -s_srs EPSG:3003 -t_srs EPSG:23032 -et 0.125
>> hdr.adf test.tiff
>> It took about 9 minutes to complete.
>>
>> Loading the same raster on QGis, which implements its own approximate
>> transformation for on-the-fly reprojection [1], is istantaneous.
>> I was wondering if a similar algorithm could be use within Gdal...
>>
>> Giovanni
>>
>> [1]
>> http://trac.osgeo.org/qgis/browser/trunk/qgis/src/core/qgsrasterprojector.cpp
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110601/b3286ed4/attachment.html
From mwtoews at gmail.com  Wed Jun  1 18:54:48 2011
From: mwtoews at gmail.com (Mike Toews)
Date: Wed Jun  1 22:22:33 2011
Subject: [gdal-dev] Lengthy GDALRasterAttributeTable output
Message-ID: <BANLkTimrHaxXkCHVxKri2kRxxqvOxVw33g@mail.gmail.com>

I'm struggling to understand why both the aux.xml file and output from
gdalinfo are really bulky in file size for my GeoTIFFs. First, output
from gdalinfo on a 375 KB GeoTIFF file has 196664 lines:

Driver: GTiff/GeoTIFF
Files: HorizB.tif
       HorizB.aux
Size is 317, 301
Coordinate System is:
...skip lines, not relevant...
Band 1 Block=317x6 Type=Float32, ColorInterp=Gray
  Min=195.724 Max=842.538
  Minimum=195.724, Maximum=842.538, Mean=440.591, StdDev=127.420
  Metadata:
    STATISTICS_MINIMUM=195.72373962402
    STATISTICS_MAXIMUM=842.53814697266
    STATISTICS_MEAN=440.59141722129
    STATISTICS_MEDIAN=434.39051816566
    STATISTICS_MODE=559.99110636022
    STATISTICS_STDDEV=127.419575971
    STATISTICS_HISTONUMBINS=65536
    STATISTICS_HISTOMIN=195.72373962402
    STATISTICS_HISTOMAX=842.53814697266
    LAYER_TYPE=athematic
STATISTICS_HISTOBINVALUES=1|0|0|0|... there are 136875 characters on
line 48 ...0|0|1|
<GDALRasterAttributeTable Row0Min="195.7237396240234"
BinSize="0.009869755204831507">
  <FieldDefn index="0">
    <Name>Histogram</Name>
    <Type>1</Type>
    <Usage>0</Usage>
  </FieldDefn>
  <Row index="0">
    <F>1</F>
  </Row>
  <Row index="1">
    <F>0</F>
  </Row>
... skip about 196600 lines ...
 <Row index="65535">
    <F>1</F>
  </Row>
</GDALRasterAttributeTable>

Note: this file was made in RGDAL, and it is just a stand-alone TIFF
file, no aux.xml (I might have deleted it a while ago).

For the second part, I'm using CreateCopy in Python to produce a
similar dataset (same dimensions, also 1 band). The new GeoTIFF file
is 381 KB, but the aux.xml file is nearly 10x larger at 3704 KB
(196632 lines). The driver also produces the output in my console
(yes, all three lines):
Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.
Warning 1: Lost metadata writing to GeoTIFF ... too large to fit in tag.

And excerpts of the file look like this:
<PAMDataset>
  <PAMRasterBand band="1">
    <GDALRasterAttributeTable Row0Min="195.7237396240234"
BinSize="0.009869755204831507">
      <FieldDefn index="0">
        <Name>Histogram</Name>
        <Type>1</Type>
        <Usage>0</Usage>
      </FieldDefn>
      <Row index="0">
        <F>1</F>
      </Row>
... skip about 196600 lines ...
      <Row index="65535">
        <F>1</F>
      </Row>
    </GDALRasterAttributeTable>
    <Metadata>
      <MDI key="STATISTICS_MINIMUM">195.72373962402</MDI>
      <MDI key="STATISTICS_MAXIMUM">842.53814697266</MDI>
      <MDI key="STATISTICS_MEAN">440.59141722129</MDI>
      <MDI key="STATISTICS_MEDIAN">434.39051816566</MDI>
      <MDI key="STATISTICS_MODE">559.99110636022</MDI>
      <MDI key="STATISTICS_STDDEV">127.419575971</MDI>
      <MDI key="STATISTICS_HISTONUMBINS">65536</MDI>
      <MDI key="STATISTICS_HISTOMIN">195.72373962402</MDI>
      <MDI key="STATISTICS_HISTOMAX">842.53814697266</MDI>
      <MDI key="LAYER_TYPE">athematic</MDI>
      <MDI key="STATI|0|1|... there are 136890 characters on line
196629...0|0|1|</MDI>
    </Metadata>
  </PAMRasterBand>
</PAMDataset>

I can recreate the gdalinfo output with GDAL 1.6.0 and 1.8.0, and I'm
using via Python GDAL version 1.6.0, both on MS Windows. Is there a
way to suppress the creation of the aux.xml file? Is there any way to
"fix" the GeoTIFF file to stop reporting meaningless histograms?

-Mike
From antonio.valentino at tiscali.it  Thu Jun  2 03:22:37 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Jun  2 07:18:01 2011
Subject: [gdal-dev] How to specify extent of a VRTWarpedDataset in Python?
In-Reply-To: <1306929529.4de629795c83e@webmail.free.fr>
References: <4DE601AB.1030307@nersc.no>
	<1306920775.4de607474eff5@webmail.free.fr>
	<20110601132643.2ddd31c2@asigrid01>
	<1306929529.4de629795c83e@webmail.free.fr>
Message-ID: <4DE73A3D.9010007@tiscali.it>

Hi Even,

Il 01/06/2011 13:58, Even Rouault ha scritto:
> Selon Antonio Valentino <antonio.valentino@tiscali.it>:
>>> Yes, with Dataset.Create() by specifying a SUBCLASS=VRTWarpedDataset
>>> creation option. ... But I don't think it will help you much since the
>>> GDALInitializeWarpedVRT() that is then used by gdalwarp to fill the
>>> dataset isn't mapped to SWIG.
>>
>> maybe the gdal.ReprojectImage could help, but I don't have the time to
>> test it right now.
> 
> I don't think ReprojectImage() will work when outputing to a VRT dataset.

Thank you for the info.

Just for curiosity, there is a particular reason why
GDALInitializeWarpedVRT has not been exposed to Python or simply no one
got the time to do it?


regards


-- 
Antonio Valentino
From even.rouault at mines-paris.org  Thu Jun  2 05:19:01 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  2 09:20:24 2011
Subject: [gdal-dev] How to specify extent of a VRTWarpedDataset in Python?
In-Reply-To: <4DE73A3D.9010007@tiscali.it>
References: <4DE601AB.1030307@nersc.no>
	<1306929529.4de629795c83e@webmail.free.fr>
	<4DE73A3D.9010007@tiscali.it>
Message-ID: <201106021119.01302.even.rouault@mines-paris.org>

Le jeudi 02 juin 2011 09:22:37, Antonio Valentino a ?crit :
> Hi Even,
> 
> Il 01/06/2011 13:58, Even Rouault ha scritto:
> > Selon Antonio Valentino <antonio.valentino@tiscali.it>:
> >>> Yes, with Dataset.Create() by specifying a SUBCLASS=VRTWarpedDataset
> >>> creation option. ... But I don't think it will help you much since the
> >>> GDALInitializeWarpedVRT() that is then used by gdalwarp to fill the
> >>> dataset isn't mapped to SWIG.
> >> 
> >> maybe the gdal.ReprojectImage could help, but I don't have the time to
> >> test it right now.
> > 
> > I don't think ReprojectImage() will work when outputing to a VRT dataset.
> 
> Thank you for the info.
> 
> Just for curiosity, there is a particular reason why
> GDALInitializeWarpedVRT has not been exposed to Python or simply no one
> got the time to do it?

I think it's because it's not straightforward to expose to Python because of 
the GDALWarpOptions * psWO argument. There's no mapping for GDALWarpOptions* 
right now. I've not evaluated precisely how complex it would be though. At 
first look, I'd say it would require writing a shadow class for it.

> 
> 
> regards
From even.rouault at mines-paris.org  Thu Jun  2 05:21:42 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  2 09:23:10 2011
Subject: [gdal-dev] Lengthy GDALRasterAttributeTable output
In-Reply-To: <BANLkTimrHaxXkCHVxKri2kRxxqvOxVw33g@mail.gmail.com>
References: <BANLkTimrHaxXkCHVxKri2kRxxqvOxVw33g@mail.gmail.com>
Message-ID: <201106021121.42085.even.rouault@mines-paris.org>

Le jeudi 02 juin 2011 00:54:48, Mike Toews a ?crit :
> I'm struggling to understand why both the aux.xml file and output from
> gdalinfo are really bulky in file size for my GeoTIFFs. First, output
> from gdalinfo on a 375 KB GeoTIFF file has 196664 lines:
> 
> Driver: GTiff/GeoTIFF
> Files: HorizB.tif
>        HorizB.aux

--> The .aux file in HFA/Imagine format contains the statistics and raster 
attribute table. Just remove/move it and GDAL will stop reporting those 
metadata.
From rlpires at gmail.com  Thu Jun  2 05:37:41 2011
From: rlpires at gmail.com (Rui L. Pires)
Date: Thu Jun  2 09:39:58 2011
Subject: [gdal-dev] OGR,
	GetFeatureCount after feature removal in Shape driver
Message-ID: <BANLkTi=HR+hRTRO=6QQOuxzEwA5zrHwfow@mail.gmail.com>

Hello everyone,

the ESRI shape driver allows feature removal for layers with update
access OGRLayer::DeleteFeature.

After successful removal of a feature and sync to disk, the method
OGRLayer::GetFeatureCount still returns the same number, as before the
deletion.

Actually, the number of records is returned, as opposed to the number
of valid features. This is confirmed when reopening the shapefile and
verifying that GetFeatureCount still returns the original number.

I realise that OGRShapeLayer::Repack may do the job of removing empty
records and thus reset the feature count. However this class is not
available in the distributed headers.

What would you propose to circumvent this issue? Is there a way to get
an accurate feature count without having to iterate through all the
valid features?

Thanks in advance.

-- 
Regards,
RLP.
From even.rouault at mines-paris.org  Thu Jun  2 06:02:47 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  2 10:06:31 2011
Subject: [gdal-dev] OGR,
	GetFeatureCount after feature removal in Shape driver
In-Reply-To: <BANLkTi=HR+hRTRO=6QQOuxzEwA5zrHwfow@mail.gmail.com>
References: <BANLkTi=HR+hRTRO=6QQOuxzEwA5zrHwfow@mail.gmail.com>
Message-ID: <201106021202.47468.even.rouault@mines-paris.org>

Rui,

> Hello everyone,
> 
> the ESRI shape driver allows feature removal for layers with update
> access OGRLayer::DeleteFeature.
> 
> After successful removal of a feature and sync to disk, the method
> OGRLayer::GetFeatureCount still returns the same number, as before the
> deletion.
> 
> Actually, the number of records is returned, as opposed to the number
> of valid features. This is confirmed when reopening the shapefile and
> verifying that GetFeatureCount still returns the original number.

Yes, the GetFeatureCount() implementation of OGRShapeLayer returns the number 
of records, both the valid and invalid ones. To get the number of features (= 
valid records), it would have to iterate over each record, which is a 
potentially lengthy operation.

> 
> I realise that OGRShapeLayer::Repack may do the job of removing empty
> records and thus reset the feature count.

Yes that it's aim.

> However this class is not
> available in the distributed headers.
> 
> What would you propose to circumvent this issue? Is there a way to get
> an accurate feature count without having to iterate through all the
> valid features?

Indeed, you cannot directly call OGRShapeLayer::Repack(), but you can run it 
by issuing a ds->ExecuteSQL("REPACK the_layer_name"), as suggested by 
http://www.gdal.org/ogr/drv_shapefile.html

Best regards,

Even
From jsimpson at wxtrends.com  Thu Jun  2 07:29:11 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Jun  2 11:37:28 2011
Subject: [gdal-dev] Python BuildPolygonFromEdges fails near equator
Message-ID: <BANLkTimxipeOSzkTdkzmJ8UDAomPU3FePA@mail.gmail.com>

Hi:

I'm having a weird issue that I'm hoping someone can shed some light
on for me.  I have a python script that reads through a CSV file and
builds a couple ESRI Shapefiles from it.  I'm generating 2 geometries,
POLYGON and LINESTRING.  LINESTRING works great but POLYGON fails when
points are "near" or on the equator.  My basic flow is like the
following for the POLYGON layer:

1) Read in Lat,Lon from CSV
2) Use ogr.ApproximateArcAngles() to turn the lat,lon point into a
circle. This works every time.
3) Use ogr.ForceToMultiLineString() to return a MULTILINESTRING.  Also
works everytime.
4) Use ogr.BuildPolygonFromEdges to build the polygon.  Only works
when "away" from equator. (Fails with ERROR 6: OGR Error: General
Error)
5) Use gdal_rasterize to burn resultant shape files into transparent GeoTiff

I have a CSV file that contains the lat,lon values for points along
every 10th line of latitude.  -90,-80...0,...80,90 and at every 90th
line of longitude -180,-90,0,90,180

After generating the shapefiles, I use gdal_rasterize to burn the
shapes into an image.  I end up with red filled circles with black
borders.  But near the equator I just have black circles with nothing
in them.
With radii 1-3 only the row at the equator is empty, but starting at
radius 4, the 10 and -10 rows are also empty.

Can someone tell me what I'm doing wrong?  I'll be happy to provide
the resultant image that shows what I'm talking about and snippets
from my code where needed.

Thank you,

Jerl
From even.rouault at mines-paris.org  Thu Jun  2 07:43:46 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  2 11:52:44 2011
Subject: [gdal-dev] Python BuildPolygonFromEdges fails near equator
In-Reply-To: <BANLkTimxipeOSzkTdkzmJ8UDAomPU3FePA@mail.gmail.com>
References: <BANLkTimxipeOSzkTdkzmJ8UDAomPU3FePA@mail.gmail.com>
Message-ID: <201106021343.46997.even.rouault@mines-paris.org>

Jerl,

Difficult to say without seing the data and the exact BuildPolygonFromEdges you 
invoke...

A blind guess would be to increase the value of the tolerance parameter.

Best regards,

Even
From antonio.valentino at tiscali.it  Thu Jun  2 07:45:05 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Jun  2 11:54:22 2011
Subject: [gdal-dev] Re: How to get the ENVISAT N1
	Main	Processing	parameters
In-Reply-To: <4DD16389.3090905@tiscali.it>
References: <1305463615324-6365377.post@n2.nabble.com>	<4DCFFCCD.1030209@tiscali.it>	<iqqkbi$dbc$1@dough.gmane.org>	<20110516183000.1ac17737@asigrid01>	<4DD1531E.9060509@pobox.com>
	<4DD16389.3090905@tiscali.it>
Message-ID: <4DE777C1.3050402@tiscali.it>

Hi Frank, RSyaoxin, Knut-Frode,

Il 16/05/2011 19:48, Antonio Valentino ha scritto:
> Il 16/05/2011 18:38, Frank Warmerdam ha scritto:
>> On 11-05-16 12:30 PM, Antonio Valentino wrote:
>>> An alternative solution is to write from scratch the routines for
>>> decoding of ENVISAT records but this is would require a larger effort.
>>>
>>> Again I could try to do it but I would like to receive some sign of
>>> interest in this feature from GDAL developers before starting to code.
>>
>> Antonio,
>>
>> I am reasonably willing to incorporate improvements into this driver
>> if you submit them via ticket as diffs against trunk.

I've just opened a new ticket

http://trac.osgeo.org/gdal/ticket/4105

with a patch for extracting all ASAR metadata from ADS and GADS records.
Additional metadata are all stored in teh "RECORSD" domain so they will
not be propagated automatically in case of gdal_trnslate or similar.

ciao

-- 
Antonio Valentino
From jsimpson at wxtrends.com  Thu Jun  2 07:48:04 2011
From: jsimpson at wxtrends.com (Jerl Simpson)
Date: Thu Jun  2 11:57:10 2011
Subject: [gdal-dev] Python BuildPolygonFromEdges fails near equator
In-Reply-To: <201106021343.46997.even.rouault@mines-paris.org>
References: <BANLkTimxipeOSzkTdkzmJ8UDAomPU3FePA@mail.gmail.com>
	<201106021343.46997.even.rouault@mines-paris.org>
Message-ID: <BANLkTim=5CdndvBpS=cHR1K5E4pj6M1_pg@mail.gmail.com>

Your blind guess was perfect!!

Thank you, that did it.

Jerl

On Thu, Jun 2, 2011 at 6:43 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Jerl,
>
> Difficult to say without seing the data and the exact BuildPolygonFromEdges you
> invoke...
>
> A blind guess would be to increase the value of the tolerance parameter.
>
> Best regards,
>
> Even
>



-- 
This communication is privileged and may contain confidential
information. ?It's intended only for the use of the person or entity
named above. If you are not the intended recipient, do not distribute
or copy this communication. If you have received this communication in
error, please notify the sender immediately and return the original to
the email address above. ? Copyright 2011 Weather Trends
International, Inc.
From vadp.devl at gmail.com  Thu Jun  2 08:07:26 2011
From: vadp.devl at gmail.com (Vadim Shlyakhov)
Date: Thu Jun  2 12:17:35 2011
Subject: [gdal-dev] How to specify extent of a VRTWarpedDataset in Python?
In-Reply-To: <4DE601AB.1030307@nersc.no>
References: <4DE601AB.1030307@nersc.no>
Message-ID: <BANLkTinBqMezr8k7gH4GE=n_y5L=FaKY4w@mail.gmail.com>

On Wed, Jun 1, 2011 at 1:08 PM, Anton Korosov <anton.korosov@nersc.no> wrote:
> we are developing software for automatic processing of satellite data and
> decided to base it mostly on GDAL-Python bindings. Can I ask you about
> options to create Warped VRT datasets in Python?

At my script, I'm just assembling VRT code from a few templates. If
interested have a look at the "make_base_raster" function here:
http://code.google.com/p/tilers-tools/source/browse/tilers_tools/gdal_tiler.py
From amaneiro at icarto.es  Thu Jun  2 14:00:15 2011
From: amaneiro at icarto.es (=?ISO-8859-1?Q?Andr=E9s_Maneiro?=)
Date: Thu Jun  2 18:29:34 2011
Subject: [gdal-dev] gdal_translate: set the CRS makes the output 10 times
	bigger
Message-ID: <4DE7CFAF.7060907@icarto.es>

Hello devs,

I'm playing with GDAL to set the CRS of a set of geotiff files I was 
given to upload them to geoserver later.

These files, were generated using ArcGIS and it seems that the CRS set 
in the geotiff file header is not standar (at least, my geoserver 
doesn't recognize them). What I did:

  gdal_translate -a_srs "EPSG:23029" original.tif output.tif

After doing that, the size of the output is 5/10 times bigger than input 
(in some cases: from 10Mb to almost 110Mb). The only thing I see as 
different -using gdalinfo on both files- is the "Color Table". The 
former has 2 entries and the output has 256. Don't know if it's the 
source of the problem, just let you know in case it is useful.

So, my question is: how could I generate an output file, with CRS set 
and with roughly the same size of the original?

best,
amaneiro
From even.rouault at mines-paris.org  Thu Jun  2 14:07:21 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  2 18:37:09 2011
Subject: [gdal-dev] gdal_translate: set the CRS makes the output 10 times
	bigger
In-Reply-To: <4DE7CFAF.7060907@icarto.es>
References: <4DE7CFAF.7060907@icarto.es>
Message-ID: <201106022007.21795.even.rouault@mines-paris.org>

Le jeudi 02 juin 2011 20:00:15, Andr?s Maneiro a ?crit :
> Hello devs,
> 
> I'm playing with GDAL to set the CRS of a set of geotiff files I was
> given to upload them to geoserver later.
> 
> These files, were generated using ArcGIS and it seems that the CRS set
> in the geotiff file header is not standar (at least, my geoserver
> doesn't recognize them). What I did:
> 
>   gdal_translate -a_srs "EPSG:23029" original.tif output.tif
> 
> After doing that, the size of the output is 5/10 times bigger than input
> (in some cases: from 10Mb to almost 110Mb). The only thing I see as
> different -using gdalinfo on both files- is the "Color Table". The
> former has 2 entries and the output has 256. Don't know if it's the
> source of the problem, just let you know in case it is useful.

Hum, it's likely that your original.tif was compressed. gdal_translate without 
argument will generate an uncompressed file.

What is the output of gdalinfo on original.tif ? If you see a COMPRESS= 
metadata keywords, you can try reusing it as a creation option.

It is also likely that your original.tif is a 1bit file.

So, guess blindly, I would try :

gdal_translate -a_srs "EPSG:23029" original.tif output.tif -co NBITS=1 -co 
COMPRESS=PACKBITS

> 
> So, my question is: how could I generate an output file, with CRS set
> and with roughly the same size of the original?
> 
> best,
> amaneiro
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From amaneiro at icarto.es  Thu Jun  2 14:28:42 2011
From: amaneiro at icarto.es (=?ISO-8859-1?Q?Andr=E9s_Maneiro?=)
Date: Thu Jun  2 18:59:40 2011
Subject: [gdal-dev] gdal_translate: set the CRS makes the output 10 times
	bigger
In-Reply-To: <201106022007.21795.even.rouault@mines-paris.org>
References: <4DE7CFAF.7060907@icarto.es>
	<201106022007.21795.even.rouault@mines-paris.org>
Message-ID: <4DE7D65A.3000504@icarto.es>

Thanks Even for the response, I suppose it has to do with your 
suggestions, but I don't know why, as I don't see any compression 
algorithm within gdalinfo output :/

Here the output of gdalinfo on the original tiff:

Driver: GTiff/GeoTIFF
Files: 120135.tif
Size is 12261, 9595
Coordinate System is:
PROJCS["UTM Zone 29N",
     GEOGCS["ED_1950_16",
         DATUM["ED_1950_16",
             SPHEROID["International 1909",6378388,297.0000535480247]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",-9],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]]]
Origin = (560152.010000000009313,4794483.370000000111759)
Pixel Size = (0.035418645400000,-0.035419541800000)
Metadata:
   TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15 
18:42:01EDT $
   TIFFTAG_XRESOLUTION=1
   TIFFTAG_YRESOLUTION=1
   TIFFTAG_RESOLUTIONUNIT=1 (unitless)
   AREA_OR_POINT=Area
Image Structure Metadata:
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  560152.010, 4794483.370) (  8d15'30.35"W, 43d17'59.98"N)
Lower Left  (  560152.010, 4794143.519) (  8d15'30.49"W, 43d17'48.97"N)
Upper Right (  560586.278, 4794483.370) (  8d15'11.08"W, 43d17'59.86"N)
Lower Right (  560586.278, 4794143.519) (  8d15'11.22"W, 43d17'48.84"N)
Center      (  560369.144, 4794313.445) (  8d15'20.78"W, 43d17'54.41"N)
Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
   Image Structure Metadata:
     NBITS=1
   Color Table (RGB with 2 entries)
     0: 0,0,0,255
     1: 255,255,255,255


On 02/06/11 20:07, Even Rouault wrote:
> Le jeudi 02 juin 2011 20:00:15, Andr?s Maneiro a ?crit :
>> Hello devs,
>>
>> I'm playing with GDAL to set the CRS of a set of geotiff files I was
>> given to upload them to geoserver later.
>>
>> These files, were generated using ArcGIS and it seems that the CRS set
>> in the geotiff file header is not standar (at least, my geoserver
>> doesn't recognize them). What I did:
>>
>>    gdal_translate -a_srs "EPSG:23029" original.tif output.tif
>>
>> After doing that, the size of the output is 5/10 times bigger than input
>> (in some cases: from 10Mb to almost 110Mb). The only thing I see as
>> different -using gdalinfo on both files- is the "Color Table". The
>> former has 2 entries and the output has 256. Don't know if it's the
>> source of the problem, just let you know in case it is useful.
>
> Hum, it's likely that your original.tif was compressed. gdal_translate without
> argument will generate an uncompressed file.
>
> What is the output of gdalinfo on original.tif ? If you see a COMPRESS=
> metadata keywords, you can try reusing it as a creation option.
>
> It is also likely that your original.tif is a 1bit file.
>
> So, guess blindly, I would try :
>
> gdal_translate -a_srs "EPSG:23029" original.tif output.tif -co NBITS=1 -co
> COMPRESS=PACKBITS
>
>>
>> So, my question is: how could I generate an output file, with CRS set
>> and with roughly the same size of the original?
>>
>> best,
>> amaneiro
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Jun  2 14:32:07 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun  2 19:03:18 2011
Subject: [gdal-dev] gdal_translate: set the CRS makes the output 10 times
	bigger
In-Reply-To: <4DE7D65A.3000504@icarto.es>
References: <4DE7CFAF.7060907@icarto.es>
	<201106022007.21795.even.rouault@mines-paris.org>
	<4DE7D65A.3000504@icarto.es>
Message-ID: <201106022032.07474.even.rouault@mines-paris.org>

Le jeudi 02 juin 2011 20:28:42, Andr?s Maneiro a ?crit :
> Thanks Even for the response, I suppose it has to do with your
> suggestions, but I don't know why, as I don't see any compression
> algorithm within gdalinfo output :/

ok, so it is well NBITS = 1 and actually uncompressed, and with 64x64 tiles.

So try :

gdal_translate -a_srs "EPSG:23029" original.tif output.tif -co NBITS=1 -co 
TILED=YES -co BLOCKXSIZE=64 -co BLOCKYSIZE=64

output.tif should have a similar size to  original.tif

> 
> Here the output of gdalinfo on the original tiff:
> 
> Driver: GTiff/GeoTIFF
> Files: 120135.tif
> Size is 12261, 9595
> Coordinate System is:
> PROJCS["UTM Zone 29N",
>      GEOGCS["ED_1950_16",
>          DATUM["ED_1950_16",
>              SPHEROID["International 1909",6378388,297.0000535480247]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433]],
>      PROJECTION["Transverse_Mercator"],
>      PARAMETER["latitude_of_origin",0],
>      PARAMETER["central_meridian",-9],
>      PARAMETER["scale_factor",0.9996],
>      PARAMETER["false_easting",500000],
>      PARAMETER["false_northing",0],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]]]
> Origin = (560152.010000000009313,4794483.370000000111759)
> Pixel Size = (0.035418645400000,-0.035419541800000)
> Metadata:
>    TIFFTAG_SOFTWARE=IMAGINE TIFF Support
> Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
> @(#)$RCSfile: etif.c $ $Revision: 1.10.1.9.1.9.2.11 $ $Date: 2004/09/15
> 18:42:01EDT $
>    TIFFTAG_XRESOLUTION=1
>    TIFFTAG_YRESOLUTION=1
>    TIFFTAG_RESOLUTIONUNIT=1 (unitless)
>    AREA_OR_POINT=Area
> Image Structure Metadata:
>    INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  560152.010, 4794483.370) (  8d15'30.35"W, 43d17'59.98"N)
> Lower Left  (  560152.010, 4794143.519) (  8d15'30.49"W, 43d17'48.97"N)
> Upper Right (  560586.278, 4794483.370) (  8d15'11.08"W, 43d17'59.86"N)
> Lower Right (  560586.278, 4794143.519) (  8d15'11.22"W, 43d17'48.84"N)
> Center      (  560369.144, 4794313.445) (  8d15'20.78"W, 43d17'54.41"N)
> Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
>    Image Structure Metadata:
>      NBITS=1
>    Color Table (RGB with 2 entries)
>      0: 0,0,0,255
>      1: 255,255,255,255
> 
> On 02/06/11 20:07, Even Rouault wrote:
> > Le jeudi 02 juin 2011 20:00:15, Andr?s Maneiro a ?crit :
> >> Hello devs,
> >> 
> >> I'm playing with GDAL to set the CRS of a set of geotiff files I was
> >> given to upload them to geoserver later.
> >> 
> >> These files, were generated using ArcGIS and it seems that the CRS set
> >> in the geotiff file header is not standar (at least, my geoserver
> >> 
> >> doesn't recognize them). What I did:
> >>    gdal_translate -a_srs "EPSG:23029" original.tif output.tif
> >> 
> >> After doing that, the size of the output is 5/10 times bigger than input
> >> (in some cases: from 10Mb to almost 110Mb). The only thing I see as
> >> different -using gdalinfo on both files- is the "Color Table". The
> >> former has 2 entries and the output has 256. Don't know if it's the
> >> source of the problem, just let you know in case it is useful.
> > 
> > Hum, it's likely that your original.tif was compressed. gdal_translate
> > without argument will generate an uncompressed file.
> > 
> > What is the output of gdalinfo on original.tif ? If you see a COMPRESS=
> > metadata keywords, you can try reusing it as a creation option.
> > 
> > It is also likely that your original.tif is a 1bit file.
> > 
> > So, guess blindly, I would try :
> > 
> > gdal_translate -a_srs "EPSG:23029" original.tif output.tif -co NBITS=1
> > -co COMPRESS=PACKBITS
> > 
> >> So, my question is: how could I generate an output file, with CRS set
> >> and with roughly the same size of the original?
> >> 
> >> best,
> >> amaneiro
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From amaneiro at icarto.es  Thu Jun  2 14:32:33 2011
From: amaneiro at icarto.es (=?ISO-8859-1?Q?Andr=E9s_Maneiro?=)
Date: Thu Jun  2 19:03:40 2011
Subject: [gdal-dev] gdal_translate: set the CRS makes the output 10 times
	bigger
In-Reply-To: <201106022007.21795.even.rouault@mines-paris.org>
References: <4DE7CFAF.7060907@icarto.es>
	<201106022007.21795.even.rouault@mines-paris.org>
Message-ID: <4DE7D741.80608@icarto.es>

Ah, by the way, your suggestion generates an output 10 times shorter. 
Smart guess :) But I'd like to generate a file more or less equal than 
input to not loose quality.

Other thing that is weird for a newbie as me, is that the gdalinfo for 
the output tiff is the same (even Size parameter!) apart from having 
more entries in color table (all of them with the same color than 0 band 
in the original).

best,
amaneiro

On 02/06/11 20:07, Even Rouault wrote:
> Le jeudi 02 juin 2011 20:00:15, Andr?s Maneiro a ?crit :
>> Hello devs,
>>
>> I'm playing with GDAL to set the CRS of a set of geotiff files I was
>> given to upload them to geoserver later.
>>
>> These files, were generated using ArcGIS and it seems that the CRS set
>> in the geotiff file header is not standar (at least, my geoserver
>> doesn't recognize them). What I did:
>>
>>    gdal_translate -a_srs "EPSG:23029" original.tif output.tif
>>
>> After doing that, the size of the output is 5/10 times bigger than input
>> (in some cases: from 10Mb to almost 110Mb). The only thing I see as
>> different -using gdalinfo on both files- is the "Color Table". The
>> former has 2 entries and the output has 256. Don't know if it's the
>> source of the problem, just let you know in case it is useful.
>
> Hum, it's likely that your original.tif was compressed. gdal_translate without
> argument will generate an uncompressed file.
>
> What is the output of gdalinfo on original.tif ? If you see a COMPRESS=
> metadata keywords, you can try reusing it as a creation option.
>
> It is also likely that your original.tif is a 1bit file.
>
> So, guess blindly, I would try :
>
> gdal_translate -a_srs "EPSG:23029" original.tif output.tif -co NBITS=1 -co
> COMPRESS=PACKBITS
>
>>
>> So, my question is: how could I generate an output file, with CRS set
>> and with roughly the same size of the original?
>>
>> best,
>> amaneiro
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From amaneiro at icarto.es  Thu Jun  2 14:35:57 2011
From: amaneiro at icarto.es (=?ISO-8859-1?Q?Andr=E9s_Maneiro?=)
Date: Thu Jun  2 19:07:17 2011
Subject: [gdal-dev] gdal_translate: set the CRS makes the output 10 times
	bigger
In-Reply-To: <201106022032.07474.even.rouault@mines-paris.org>
References: <4DE7CFAF.7060907@icarto.es>
	<201106022007.21795.even.rouault@mines-paris.org>
	<4DE7D65A.3000504@icarto.es>
	<201106022032.07474.even.rouault@mines-paris.org>
Message-ID: <4DE7D80D.4020808@icarto.es>

On 02/06/11 20:32, Even Rouault wrote:
> Le jeudi 02 juin 2011 20:28:42, Andr?s Maneiro a ?crit :
>> Thanks Even for the response, I suppose it has to do with your
>> suggestions, but I don't know why, as I don't see any compression
>> algorithm within gdalinfo output :/
>
> ok, so it is well NBITS = 1 and actually uncompressed, and with 64x64 tiles.
>
> So try :
>
> gdal_translate -a_srs "EPSG:23029" original.tif output.tif -co NBITS=1 -co
> TILED=YES -co BLOCKXSIZE=64 -co BLOCKYSIZE=64
>
> output.tif should have a similar size to  original.tif

yep, that's it!

thanks even

best,
amaneiro
From mwtoews at gmail.com  Thu Jun  2 20:00:56 2011
From: mwtoews at gmail.com (Mike Toews)
Date: Fri Jun  3 00:50:24 2011
Subject: [gdal-dev] Lengthy GDALRasterAttributeTable output
In-Reply-To: <201106021121.42085.even.rouault@mines-paris.org>
References: <BANLkTimrHaxXkCHVxKri2kRxxqvOxVw33g@mail.gmail.com>
	<201106021121.42085.even.rouault@mines-paris.org>
Message-ID: <BANLkTikynFpqkS6O=Udy=kT9cVqcZ2jSkw@mail.gmail.com>

Perfect, thanks! That worked for both gdalinfo and for derived data
via CreateCopy().

-Mike

On 2 June 2011 21:21, Even Rouault <even.rouault@mines-paris.org> wrote:
> Le jeudi 02 juin 2011 00:54:48, Mike Toews a ?crit :
>> I'm struggling to understand why both the aux.xml file and output from
>> gdalinfo are really bulky in file size for my GeoTIFFs. First, output
>> from gdalinfo on a 375 KB GeoTIFF file has 196664 lines:
>>
>> Driver: GTiff/GeoTIFF
>> Files: HorizB.tif
>> ? ? ? ?HorizB.aux
>
> --> The .aux file in HFA/Imagine format contains the statistics and raster
> attribute table. Just remove/move it and GDAL will stop reporting those
> metadata.
>
From goocreations at gmail.com  Fri Jun  3 06:13:41 2011
From: goocreations at gmail.com (Goo Creations)
Date: Fri Jun  3 11:36:20 2011
Subject: [gdal-dev] Writing raster - 0 in every even column
Message-ID: <BANLkTi=J4LYsWgri9otbcy58EY7=XqFLFA@mail.gmail.com>

Hi all

I have a strange problem when writing to a GDAL dataset. I'm currently doing
the following:

*GDALDataset *mInputDataset = (GDALDataset*) GDALOpen("in.tif",
GA_ReadOnly);
GDALDataType type = mInputDataset->GetRasterBand(1)->GetRasterDataType();
int mWidth = mInputDataset->GetRasterXSize();
int mHeight = mInputDataset->GetRasterYSize();

GDALDataset *mOutputDataset = mInputDataset->GetDriver()->Create("out.tif",
mWidth, mHeight, mBands, type, 0);

int *data = <<get data for entire band>>
mOutputDataset->GetRasterBand(1)->RasterIO(GF_Write, 0, 0, aligner.width(),
aligner.height(), data, aligner.width(), aligner.height(), type, 0, 0);
mOutputDataset->FlushCache();
*

The input image provided has a datatype of UINT16. When I hardcode all
"type" variables in the above example to GDT_Int32, then the image is
correctly created, but when I leave the example as is (hence with GDT_UInt16
assigned to "type"), then I get a strange problem that every second column
has a value of 0. So every odd column has the correct values in, but every
even column has values of 0. I've checked the data array, and all the values
in there are correct.

Does anyone know why this is happening?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110603/b0627a9e/attachment-0001.html
From even.rouault at mines-paris.org  Fri Jun  3 06:21:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jun  3 11:45:02 2011
Subject: [gdal-dev] Writing raster - 0 in every even column
In-Reply-To: <BANLkTi=J4LYsWgri9otbcy58EY7=XqFLFA@mail.gmail.com>
References: <BANLkTi=J4LYsWgri9otbcy58EY7=XqFLFA@mail.gmail.com>
Message-ID: <201106031221.53754.even.rouault@mines-paris.org>

Le vendredi 03 juin 2011 12:13:41, Goo Creations a ?crit :
> Hi all
> 
> I have a strange problem when writing to a GDAL dataset. I'm currently
> doing the following:
> 
> *GDALDataset *mInputDataset = (GDALDataset*) GDALOpen("in.tif",
> GA_ReadOnly);
> GDALDataType type = mInputDataset->GetRasterBand(1)->GetRasterDataType();
> int mWidth = mInputDataset->GetRasterXSize();
> int mHeight = mInputDataset->GetRasterYSize();
> 
> GDALDataset *mOutputDataset = mInputDataset->GetDriver()->Create("out.tif",
> mWidth, mHeight, mBands, type, 0);
> 
> int *data = <<get data for entire band>>
> mOutputDataset->GetRasterBand(1)->RasterIO(GF_Write, 0, 0, aligner.width(),
> aligner.height(), data, aligner.width(), aligner.height(), type, 0, 0);
> mOutputDataset->FlushCache();
> *
> 
> The input image provided has a datatype of UINT16. When I hardcode all
> "type" variables in the above example to GDT_Int32, then the image is
> correctly created, but when I leave the example as is (hence with
> GDT_UInt16 assigned to "type"), then I get a strange problem that every
> second column has a value of 0. So every odd column has the correct values
> in, but every even column has values of 0. I've checked the data array,
> and all the values in there are correct.
> 
> Does anyone know why this is happening?

Yes, the type parameter must be consistent with the C type of the data array, 
otherwise weird things can happen, including crashes.

In your exemple data is of type int*, so type must be set to GDT_Int32.
If you want to write GDT_UInt16, then data must be declared as being of type 
unsigned short*

From goocreations at gmail.com  Fri Jun  3 06:32:16 2011
From: goocreations at gmail.com (Goo Creations)
Date: Fri Jun  3 11:55:55 2011
Subject: [gdal-dev] Writing raster - 0 in every even column
In-Reply-To: <201106031221.53754.even.rouault@mines-paris.org>
References: <BANLkTi=J4LYsWgri9otbcy58EY7=XqFLFA@mail.gmail.com>
	<201106031221.53754.even.rouault@mines-paris.org>
Message-ID: <BANLkTikzkggCxVirum5h2Wgj0RxaYD1+Eg@mail.gmail.com>

Ah, thanks. This solved the problem.
I however face the problem that I don't know which data type the image has.
So I can't hardcode the array to unsigned short, since it might sometimes be
a int32 or even a float. So is there a way to do this in a generic way?

Chris

On Fri, Jun 3, 2011 at 12:21 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le vendredi 03 juin 2011 12:13:41, Goo Creations a ?crit :
> > Hi all
> >
> > I have a strange problem when writing to a GDAL dataset. I'm currently
> > doing the following:
> >
> > *GDALDataset *mInputDataset = (GDALDataset*) GDALOpen("in.tif",
> > GA_ReadOnly);
> > GDALDataType type = mInputDataset->GetRasterBand(1)->GetRasterDataType();
> > int mWidth = mInputDataset->GetRasterXSize();
> > int mHeight = mInputDataset->GetRasterYSize();
> >
> > GDALDataset *mOutputDataset =
> mInputDataset->GetDriver()->Create("out.tif",
> > mWidth, mHeight, mBands, type, 0);
> >
> > int *data = <<get data for entire band>>
> > mOutputDataset->GetRasterBand(1)->RasterIO(GF_Write, 0, 0,
> aligner.width(),
> > aligner.height(), data, aligner.width(), aligner.height(), type, 0, 0);
> > mOutputDataset->FlushCache();
> > *
> >
> > The input image provided has a datatype of UINT16. When I hardcode all
> > "type" variables in the above example to GDT_Int32, then the image is
> > correctly created, but when I leave the example as is (hence with
> > GDT_UInt16 assigned to "type"), then I get a strange problem that every
> > second column has a value of 0. So every odd column has the correct
> values
> > in, but every even column has values of 0. I've checked the data array,
> > and all the values in there are correct.
> >
> > Does anyone know why this is happening?
>
> Yes, the type parameter must be consistent with the C type of the data
> array,
> otherwise weird things can happen, including crashes.
>
> In your exemple data is of type int*, so type must be set to GDT_Int32.
> If you want to write GDT_UInt16, then data must be declared as being of
> type
> unsigned short*
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110603/47f5350a/attachment.html
From even.rouault at mines-paris.org  Fri Jun  3 06:39:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jun  3 12:03:06 2011
Subject: [gdal-dev] Writing raster - 0 in every even column
In-Reply-To: <BANLkTikzkggCxVirum5h2Wgj0RxaYD1+Eg@mail.gmail.com>
References: <BANLkTi=J4LYsWgri9otbcy58EY7=XqFLFA@mail.gmail.com>
	<201106031221.53754.even.rouault@mines-paris.org>
	<BANLkTikzkggCxVirum5h2Wgj0RxaYD1+Eg@mail.gmail.com>
Message-ID: <201106031239.05095.even.rouault@mines-paris.org>

Le vendredi 03 juin 2011 12:32:16, Goo Creations a ?crit :
> Ah, thanks. This solved the problem.
> I however face the problem that I don't know which data type the image has.
> So I can't hardcode the array to unsigned short, since it might sometimes
> be a int32 or even a float. So is there a way to do this in a generic way?

I'm not sure what you are trying to do exactly. There are various 
possibilities. Use good all switch() case() to care for different data types, 
which can be combined with using C++ templates to write generic code to reduce 
the amount of copying&pasting, use GDALCopyWords() to convert an array from 
one type to another one...

> 
> Chris
> 
> On Fri, Jun 3, 2011 at 12:21 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Le vendredi 03 juin 2011 12:13:41, Goo Creations a ?crit :
> > > Hi all
> > > 
> > > I have a strange problem when writing to a GDAL dataset. I'm currently
> > > doing the following:
> > > 
> > > *GDALDataset *mInputDataset = (GDALDataset*) GDALOpen("in.tif",
> > > GA_ReadOnly);
> > > GDALDataType type =
> > > mInputDataset->GetRasterBand(1)->GetRasterDataType(); int mWidth =
> > > mInputDataset->GetRasterXSize();
> > > int mHeight = mInputDataset->GetRasterYSize();
> > > 
> > > GDALDataset *mOutputDataset =
> > 
> > mInputDataset->GetDriver()->Create("out.tif",
> > 
> > > mWidth, mHeight, mBands, type, 0);
> > > 
> > > int *data = <<get data for entire band>>
> > > mOutputDataset->GetRasterBand(1)->RasterIO(GF_Write, 0, 0,
> > 
> > aligner.width(),
> > 
> > > aligner.height(), data, aligner.width(), aligner.height(), type, 0, 0);
> > > mOutputDataset->FlushCache();
> > > *
> > > 
> > > The input image provided has a datatype of UINT16. When I hardcode all
> > > "type" variables in the above example to GDT_Int32, then the image is
> > > correctly created, but when I leave the example as is (hence with
> > > GDT_UInt16 assigned to "type"), then I get a strange problem that every
> > > second column has a value of 0. So every odd column has the correct
> > 
> > values
> > 
> > > in, but every even column has values of 0. I've checked the data array,
> > > and all the values in there are correct.
> > > 
> > > Does anyone know why this is happening?
> > 
> > Yes, the type parameter must be consistent with the C type of the data
> > array,
> > otherwise weird things can happen, including crashes.
> > 
> > In your exemple data is of type int*, so type must be set to GDT_Int32.
> > If you want to write GDT_UInt16, then data must be declared as being of
> > type
> > unsigned short*
From goocreations at gmail.com  Fri Jun  3 06:43:32 2011
From: goocreations at gmail.com (Goo Creations)
Date: Fri Jun  3 12:08:11 2011
Subject: [gdal-dev] Writing raster - 0 in every even column
In-Reply-To: <201106031239.05095.even.rouault@mines-paris.org>
References: <BANLkTi=J4LYsWgri9otbcy58EY7=XqFLFA@mail.gmail.com>
	<201106031221.53754.even.rouault@mines-paris.org>
	<BANLkTikzkggCxVirum5h2Wgj0RxaYD1+Eg@mail.gmail.com>
	<201106031239.05095.even.rouault@mines-paris.org>
Message-ID: <BANLkTinysf_jysA11eiRTW0S-e+v2NKyzQ@mail.gmail.com>

Thanks, GDALCopyWords was what I was looking for

Thanks

Chris

On Fri, Jun 3, 2011 at 12:39 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le vendredi 03 juin 2011 12:32:16, Goo Creations a ?crit :
> > Ah, thanks. This solved the problem.
> > I however face the problem that I don't know which data type the image
> has.
> > So I can't hardcode the array to unsigned short, since it might sometimes
> > be a int32 or even a float. So is there a way to do this in a generic
> way?
>
> I'm not sure what you are trying to do exactly. There are various
> possibilities. Use good all switch() case() to care for different data
> types,
> which can be combined with using C++ templates to write generic code to
> reduce
> the amount of copying&pasting, use GDALCopyWords() to convert an array from
> one type to another one...
>
> >
> > Chris
> >
> > On Fri, Jun 3, 2011 at 12:21 PM, Even Rouault
> >
> > <even.rouault@mines-paris.org>wrote:
> > > Le vendredi 03 juin 2011 12:13:41, Goo Creations a ?crit :
> > > > Hi all
> > > >
> > > > I have a strange problem when writing to a GDAL dataset. I'm
> currently
> > > > doing the following:
> > > >
> > > > *GDALDataset *mInputDataset = (GDALDataset*) GDALOpen("in.tif",
> > > > GA_ReadOnly);
> > > > GDALDataType type =
> > > > mInputDataset->GetRasterBand(1)->GetRasterDataType(); int mWidth =
> > > > mInputDataset->GetRasterXSize();
> > > > int mHeight = mInputDataset->GetRasterYSize();
> > > >
> > > > GDALDataset *mOutputDataset =
> > >
> > > mInputDataset->GetDriver()->Create("out.tif",
> > >
> > > > mWidth, mHeight, mBands, type, 0);
> > > >
> > > > int *data = <<get data for entire band>>
> > > > mOutputDataset->GetRasterBand(1)->RasterIO(GF_Write, 0, 0,
> > >
> > > aligner.width(),
> > >
> > > > aligner.height(), data, aligner.width(), aligner.height(), type, 0,
> 0);
> > > > mOutputDataset->FlushCache();
> > > > *
> > > >
> > > > The input image provided has a datatype of UINT16. When I hardcode
> all
> > > > "type" variables in the above example to GDT_Int32, then the image is
> > > > correctly created, but when I leave the example as is (hence with
> > > > GDT_UInt16 assigned to "type"), then I get a strange problem that
> every
> > > > second column has a value of 0. So every odd column has the correct
> > >
> > > values
> > >
> > > > in, but every even column has values of 0. I've checked the data
> array,
> > > > and all the values in there are correct.
> > > >
> > > > Does anyone know why this is happening?
> > >
> > > Yes, the type parameter must be consistent with the C type of the data
> > > array,
> > > otherwise weird things can happen, including crashes.
> > >
> > > In your exemple data is of type int*, so type must be set to GDT_Int32.
> > > If you want to write GDT_UInt16, then data must be declared as being of
> > > type
> > > unsigned short*
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110603/b83c61b1/attachment.html
From holloway.richard at geoeye.com  Fri Jun  3 16:20:57 2011
From: holloway.richard at geoeye.com (marine88)
Date: Fri Jun  3 22:17:04 2011
Subject: [gdal-dev] Insert non-standard tag into geotiff header
Message-ID: <1307132457968-6436732.post@n2.nabble.com>

HI, 
I am new to this and was asked if I could insert a custom tag into the
geotiff header. I have no clue on how to do this is this even possible?  



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Insert-non-standard-tag-into-geotiff-header-tp6436732p6436732.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From guarino at ce.unipr.it  Sat Jun  4 06:00:35 2011
From: guarino at ce.unipr.it (Corrado Guarino Lo Bianco)
Date: Sat Jun  4 06:37:42 2011
Subject: [gdal-dev] A map conversion problem with GDAL 1.8.0
Message-ID: <4DEA0243.4060309@ce.unipr.it>

Hi all,
I'm a QLandkarteGT user (QLandkarteGT is based on GDAL) and I'm having a 
problem related to map formats. I use ecw maps in conjunction with DEM 
data stored in geotiff files. In the past I was using GDAL 1.7.2 and I 
had no problems. Recently I switched to GDAL 1.8.0 and now QLandkarteGT 
says that there is no matching between the projection used for the maps 
and that used for DEM data, nevertheless I'm still adopting the same 
files. By means of gdalwarp, I have made several unsuccessful attempts 
to convert DEM data into a format suitable to be used in conjunction 
with ecw maps.
Can someone help me?
These are the outputs I get from the ecw and the tiff files when I run 
gdalinfo:

Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
Files: /media/IGM 25000/IGM 25.000 - Emilia Romagna.ecw
Size is 96000, 64000
Coordinate System is:
PROJCS["NUTM32",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9108"]],
         AXIS["Lat",NORTH],
         AXIS["Long",EAST],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",9],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["Meter",1]]
Origin = (510000.000000000000000,5000000.000000000000000)
Pixel Size = (2.500000000000000,-2.500000000000000)
Corner Coordinates:
Upper Left  (  510000.000, 5000000.000) (  9d 7'37.99"E, 45d 9'12.26"N)
Lower Left  (  510000.000, 4840000.000) (  9d 7'26.87"E, 43d42'46.65"N)
Upper Right (  750000.000, 5000000.000) ( 12d10'40.88"E, 45d 6'33.26"N)
Lower Right (  750000.000, 4840000.000) ( 12d 6' 3.79"E, 43d40'15.39"N)
Center      (  630000.000, 4920000.000) ( 10d37'59.07"E, 44d25'17.84"N)
Band 1 Block=96000x1 Type=Byte, ColorInterp=Red
   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 
3000x2000, 1500x1000, 750x500, 375x250
Band 2 Block=96000x1 Type=Byte, ColorInterp=Green
   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 
3000x2000, 1500x1000, 750x500, 375x250
Band 3 Block=96000x1 Type=Byte, ColorInterp=Blue
   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 
3000x2000, 1500x1000, 750x500, 375x250



Driver: GTiff/GeoTIFF
Files: /media/Dati/Documenti/gps tuner/Altimetrie Italia/Emilia 
Romagna/Emilia_Romagna.tif
Size is 4074, 4262
Coordinate System is:
PROJCS["WGS 84 / UTM zone 32N",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",9],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AUTHORITY["EPSG","32632"]]
Origin = (499966.037957447464578,5101878.644408876076341)
Pixel Size = (80.031641738007920,-80.031641738007920)
Metadata:
   AREA_OR_POINT=Area
Image Structure Metadata:
   COMPRESSION=DEFLATE
   INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  499966.038, 5101878.644) (  8d59'58.42"E, 46d 4'13.74"N)
Lower Left  (  499966.038, 4760783.787) (  8d59'58.50"E, 42d59'58.99"N)
Upper Right (  826014.946, 5101878.644) ( 13d12'35.68"E, 45d59'34.36"N)
Lower Right (  826014.946, 4760783.787) ( 12d59'42.00"E, 42d55'47.82"N)
Center      (  662990.492, 4931331.216) ( 11d 3' 3.01"E, 44d31' 0.81"N)
Band 1 Block=256x256 Type=Int16, ColorInterp=Gray


Thank you for your help,
Corrado

From chaitanya.ch at gmail.com  Sat Jun  4 06:12:46 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jun  4 06:50:31 2011
Subject: [gdal-dev] Insert non-standard tag into geotiff header
In-Reply-To: <1307132457968-6436732.post@n2.nabble.com>
References: <1307132457968-6436732.post@n2.nabble.com>
Message-ID: <BANLkTik3Ao7HsPPfzk8EmwEGqXweV6vGYQ@mail.gmail.com>

marine88,

The default profile of GDAL's GeoTiff driver allows adding custom tags. [1]
You can add tags using the GDALMajorObject::SetMetadataItem() method. [2]

[1]: http://www.gdal.org/frmt_gtiff.html
[2]: http://www.gdal.org/classGDALMajorObject.html

On Sat, Jun 4, 2011 at 1:50 AM, marine88 <holloway.richard@geoeye.com>wrote:

> HI,
> I am new to this and was asked if I could insert a custom tag into the
> geotiff header. I have no clue on how to do this is this even possible?
>
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Insert-non-standard-tag-into-geotiff-header-tp6436732p6436732.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110604/b97edb03/attachment.html
From chaitanya.ch at gmail.com  Sat Jun  4 06:35:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jun  4 07:14:13 2011
Subject: [gdal-dev] A map conversion problem with GDAL 1.8.0
In-Reply-To: <4DEA0243.4060309@ce.unipr.it>
References: <4DEA0243.4060309@ce.unipr.it>
Message-ID: <BANLkTinYFiFWYr96oe1POEu+CawATTvkKg@mail.gmail.com>

Corrado,

I see that the two projections are essentially the same. You may not need
gdalwarp after all. Try the gdal_translate utility with the -a_srs option to
specify the Coordinate System of the output file.

Tell us how it goes.

On Sat, Jun 4, 2011 at 3:30 PM, Corrado Guarino Lo Bianco <
guarino@ce.unipr.it> wrote:

> Hi all,
> I'm a QLandkarteGT user (QLandkarteGT is based on GDAL) and I'm having a
> problem related to map formats. I use ecw maps in conjunction with DEM data
> stored in geotiff files. In the past I was using GDAL 1.7.2 and I had no
> problems. Recently I switched to GDAL 1.8.0 and now QLandkarteGT says that
> there is no matching between the projection used for the maps and that used
> for DEM data, nevertheless I'm still adopting the same files. By means of
> gdalwarp, I have made several unsuccessful attempts to convert DEM data into
> a format suitable to be used in conjunction with ecw maps.
> Can someone help me?
> These are the outputs I get from the ecw and the tiff files when I run
> gdalinfo:
>
> Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
> Files: /media/IGM 25000/IGM 25.000 - Emilia Romagna.ecw
> Size is 96000, 64000
> Coordinate System is:
> PROJCS["NUTM32",
>    GEOGCS["WGS 84",
>        DATUM["WGS_1984",
>            SPHEROID["WGS 84",6378137,298.257223563,
>                AUTHORITY["EPSG","7030"]],
>            TOWGS84[0,0,0,0,0,0,0],
>            AUTHORITY["EPSG","6326"]],
>        PRIMEM["Greenwich",0,
>            AUTHORITY["EPSG","8901"]],
>        UNIT["degree",0.0174532925199433,
>            AUTHORITY["EPSG","9108"]],
>        AXIS["Lat",NORTH],
>        AXIS["Long",EAST],
>        AUTHORITY["EPSG","4326"]],
>    PROJECTION["Transverse_Mercator"],
>    PARAMETER["latitude_of_origin",0],
>    PARAMETER["central_meridian",9],
>    PARAMETER["scale_factor",0.9996],
>    PARAMETER["false_easting",500000],
>    PARAMETER["false_northing",0],
>    UNIT["Meter",1]]
> Origin = (510000.000000000000000,5000000.000000000000000)
> Pixel Size = (2.500000000000000,-2.500000000000000)
> Corner Coordinates:
> Upper Left  (  510000.000, 5000000.000) (  9d 7'37.99"E, 45d 9'12.26"N)
> Lower Left  (  510000.000, 4840000.000) (  9d 7'26.87"E, 43d42'46.65"N)
> Upper Right (  750000.000, 5000000.000) ( 12d10'40.88"E, 45d 6'33.26"N)
> Lower Right (  750000.000, 4840000.000) ( 12d 6' 3.79"E, 43d40'15.39"N)
> Center      (  630000.000, 4920000.000) ( 10d37'59.07"E, 44d25'17.84"N)
> Band 1 Block=96000x1 Type=Byte, ColorInterp=Red
>  Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 3000x2000,
> 1500x1000, 750x500, 375x250
> Band 2 Block=96000x1 Type=Byte, ColorInterp=Green
>  Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 3000x2000,
> 1500x1000, 750x500, 375x250
> Band 3 Block=96000x1 Type=Byte, ColorInterp=Blue
>  Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 3000x2000,
> 1500x1000, 750x500, 375x250
>
>
>
> Driver: GTiff/GeoTIFF
> Files: /media/Dati/Documenti/gps tuner/Altimetrie Italia/Emilia
> Romagna/Emilia_Romagna.tif
> Size is 4074, 4262
> Coordinate System is:
> PROJCS["WGS 84 / UTM zone 32N",
>    GEOGCS["WGS 84",
>        DATUM["WGS_1984",
>            SPHEROID["WGS 84",6378137,298.257223563,
>                AUTHORITY["EPSG","7030"]],
>            AUTHORITY["EPSG","6326"]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.0174532925199433],
>        AUTHORITY["EPSG","4326"]],
>    PROJECTION["Transverse_Mercator"],
>    PARAMETER["latitude_of_origin",0],
>    PARAMETER["central_meridian",9],
>    PARAMETER["scale_factor",0.9996],
>    PARAMETER["false_easting",500000],
>    PARAMETER["false_northing",0],
>    UNIT["metre",1,
>        AUTHORITY["EPSG","9001"]],
>    AUTHORITY["EPSG","32632"]]
> Origin = (499966.037957447464578,5101878.644408876076341)
> Pixel Size = (80.031641738007920,-80.031641738007920)
> Metadata:
>  AREA_OR_POINT=Area
> Image Structure Metadata:
>  COMPRESSION=DEFLATE
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  499966.038, 5101878.644) (  8d59'58.42"E, 46d 4'13.74"N)
> Lower Left  (  499966.038, 4760783.787) (  8d59'58.50"E, 42d59'58.99"N)
> Upper Right (  826014.946, 5101878.644) ( 13d12'35.68"E, 45d59'34.36"N)
> Lower Right (  826014.946, 4760783.787) ( 12d59'42.00"E, 42d55'47.82"N)
> Center      (  662990.492, 4931331.216) ( 11d 3' 3.01"E, 44d31' 0.81"N)
> Band 1 Block=256x256 Type=Int16, ColorInterp=Gray
>
>
> Thank you for your help,
> Corrado
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110604/0ddf02fe/attachment-0001.html
From guarino at ce.unipr.it  Sun Jun  5 06:49:59 2011
From: guarino at ce.unipr.it (Corrado Guarino Lo Bianco)
Date: Sun Jun  5 08:49:29 2011
Subject: [gdal-dev] A map conversion problem with GDAL 1.8.0
Message-ID: <4DEB5F57.1020804@ce.unipr.it>

Hi,
unfortunately this did not solve the problem. I try to better describe 
the problem.
In order to decide if map and dem data files are compatible, 
QLandkarteGT evaluate two strings from such files according to the 
following procedure

...
     char str[1024];
     strncpy(str,dataset->GetProjectionRef(),sizeof(str));
     char * ptr = str;
     OGRSpatialReference oSRS;
     oSRS.importFromWkt(&ptr);
     oSRS.exportToProj4(&ptr);
     strOrigProj = strProj = ptr;
...

if the two strings coincides the two files are considered congruent.
In the case of the two files I'm managing, the following two strings are 
obtained

Map: +proj=utm +zone=32 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m 
+no_defs
DEM: +proj=utm +zone=32 +datum=WGS84 +units=m +no_defs +ellps=WGS84 
+towgs84=0,0,0

As a consequence, nevertheless the two files are compatible the two 
strings are different, so that dem data are rejected.

The question is: is this the only way to check compatibility between 
maps and dem data or there is a better and more robust solution?

Corrado

> Corrado,
>
> I see that the two projections are essentially the same. You may not need
> gdalwarp after all. Try the gdal_translate utility with the -a_srs option to
> specify the Coordinate System of the output file.
>
> Tell us how it goes.
>
> On Sat, Jun 4, 2011 at 3:30 PM, Corrado Guarino Lo Bianco<
> guarino at ce.unipr.it  <http://lists.osgeo.org/mailman/listinfo/gdal-dev>>  wrote:
>
> >/  Hi all,
> />/  I'm a QLandkarteGT user (QLandkarteGT is based on GDAL) and I'm having a
> />/  problem related to map formats. I use ecw maps in conjunction with DEM data
> />/  stored in geotiff files. In the past I was using GDAL 1.7.2 and I had no
> />/  problems. Recently I switched to GDAL 1.8.0 and now QLandkarteGT says that
> />/  there is no matching between the projection used for the maps and that used
> />/  for DEM data, nevertheless I'm still adopting the same files. By means of
> />/  gdalwarp, I have made several unsuccessful attempts to convert DEM data into
> />/  a format suitable to be used in conjunction with ecw maps.
> />/  Can someone help me?
> />/  These are the outputs I get from the ecw and the tiff files when I run
> />/  gdalinfo:
> />/
> />/  Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
> />/  Files: /media/IGM 25000/IGM 25.000 - Emilia Romagna.ecw
> />/  Size is 96000, 64000
> />/  Coordinate System is:
> />/  PROJCS["NUTM32",
> />/     GEOGCS["WGS 84",
> />/         DATUM["WGS_1984",
> />/             SPHEROID["WGS 84",6378137,298.257223563,
> />/                 AUTHORITY["EPSG","7030"]],
> />/             TOWGS84[0,0,0,0,0,0,0],
> />/             AUTHORITY["EPSG","6326"]],
> />/         PRIMEM["Greenwich",0,
> />/             AUTHORITY["EPSG","8901"]],
> />/         UNIT["degree",0.0174532925199433,
> />/             AUTHORITY["EPSG","9108"]],
> />/         AXIS["Lat",NORTH],
> />/         AXIS["Long",EAST],
> />/         AUTHORITY["EPSG","4326"]],
> />/     PROJECTION["Transverse_Mercator"],
> />/     PARAMETER["latitude_of_origin",0],
> />/     PARAMETER["central_meridian",9],
> />/     PARAMETER["scale_factor",0.9996],
> />/     PARAMETER["false_easting",500000],
> />/     PARAMETER["false_northing",0],
> />/     UNIT["Meter",1]]
> />/  Origin = (510000.000000000000000,5000000.000000000000000)
> />/  Pixel Size = (2.500000000000000,-2.500000000000000)
> />/  Corner Coordinates:
> />/  Upper Left  (  510000.000, 5000000.000) (  9d 7'37.99"E, 45d 9'12.26"N)
> />/  Lower Left  (  510000.000, 4840000.000) (  9d 7'26.87"E, 43d42'46.65"N)
> />/  Upper Right (  750000.000, 5000000.000) ( 12d10'40.88"E, 45d 6'33.26"N)
> />/  Lower Right (  750000.000, 4840000.000) ( 12d 6' 3.79"E, 43d40'15.39"N)
> />/  Center      (  630000.000, 4920000.000) ( 10d37'59.07"E, 44d25'17.84"N)
> />/  Band 1 Block=96000x1 Type=Byte, ColorInterp=Red
> />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 3000x2000,
> />/  1500x1000, 750x500, 375x250
> />/  Band 2 Block=96000x1 Type=Byte, ColorInterp=Green
> />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 3000x2000,
> />/  1500x1000, 750x500, 375x250
> />/  Band 3 Block=96000x1 Type=Byte, ColorInterp=Blue
> />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000, 3000x2000,
> />/  1500x1000, 750x500, 375x250
> />/
> />/
> />/
> />/  Driver: GTiff/GeoTIFF
> />/  Files: /media/Dati/Documenti/gps tuner/Altimetrie Italia/Emilia
> />/  Romagna/Emilia_Romagna.tif
> />/  Size is 4074, 4262
> />/  Coordinate System is:
> />/  PROJCS["WGS 84 / UTM zone 32N",
> />/     GEOGCS["WGS 84",
> />/         DATUM["WGS_1984",
> />/             SPHEROID["WGS 84",6378137,298.257223563,
> />/                 AUTHORITY["EPSG","7030"]],
> />/             AUTHORITY["EPSG","6326"]],
> />/         PRIMEM["Greenwich",0],
> />/         UNIT["degree",0.0174532925199433],
> />/         AUTHORITY["EPSG","4326"]],
> />/     PROJECTION["Transverse_Mercator"],
> />/     PARAMETER["latitude_of_origin",0],
> />/     PARAMETER["central_meridian",9],
> />/     PARAMETER["scale_factor",0.9996],
> />/     PARAMETER["false_easting",500000],
> />/     PARAMETER["false_northing",0],
> />/     UNIT["metre",1,
> />/         AUTHORITY["EPSG","9001"]],
> />/     AUTHORITY["EPSG","32632"]]
> />/  Origin = (499966.037957447464578,5101878.644408876076341)
> />/  Pixel Size = (80.031641738007920,-80.031641738007920)
> />/  Metadata:
> />/   AREA_OR_POINT=Area
> />/  Image Structure Metadata:
> />/   COMPRESSION=DEFLATE
> />/   INTERLEAVE=BAND
> />/  Corner Coordinates:
> />/  Upper Left  (  499966.038, 5101878.644) (  8d59'58.42"E, 46d 4'13.74"N)
> />/  Lower Left  (  499966.038, 4760783.787) (  8d59'58.50"E, 42d59'58.99"N)
> />/  Upper Right (  826014.946, 5101878.644) ( 13d12'35.68"E, 45d59'34.36"N)
> />/  Lower Right (  826014.946, 4760783.787) ( 12d59'42.00"E, 42d55'47.82"N)
> />/  Center      (  662990.492, 4931331.216) ( 11d 3' 3.01"E, 44d31' 0.81"N)
> />/  Band 1 Block=256x256 Type=Int16, ColorInterp=Gray
> />/
> />/
> />/  Thank you for your help,
> />/  Corrado
> />/
> />/  _______________________________________________
> />/  gdal-dev mailing list
> />/  gdal-dev at lists.osgeo.org  <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
> />/  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> />/
> /
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
> -------------- next part --------------
> An HTML attachment was scrubbed...
> URL:http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110604/0ddf02fe/attachment-0001.html

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110605/da4d529a/attachment.html
From even.rouault at mines-paris.org  Sun Jun  5 08:18:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun  5 10:22:18 2011
Subject: [gdal-dev] A map conversion problem with GDAL 1.8.0
In-Reply-To: <4DEB5F57.1020804@ce.unipr.it>
References: <4DEB5F57.1020804@ce.unipr.it>
Message-ID: <201106051418.06791.even.rouault@mines-paris.org>

Le dimanche 05 juin 2011 12:49:59, Corrado Guarino Lo Bianco a ?crit :
> Hi,
> unfortunately this did not solve the problem. I try to better describe
> the problem.
> In order to decide if map and dem data files are compatible,
> QLandkarteGT evaluate two strings from such files according to the
> following procedure
> 
> ...
>      char str[1024];
>      strncpy(str,dataset->GetProjectionRef(),sizeof(str));
>      char * ptr = str;
>      OGRSpatialReference oSRS;
>      oSRS.importFromWkt(&ptr);
>      oSRS.exportToProj4(&ptr);
>      strOrigProj = strProj = ptr;
> ...
> 
> if the two strings coincides the two files are considered congruent.
> In the case of the two files I'm managing, the following two strings are
> obtained
> 
> Map: +proj=utm +zone=32 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m
> +no_defs
> DEM: +proj=utm +zone=32 +datum=WGS84 +units=m +no_defs +ellps=WGS84
> +towgs84=0,0,0
> 
> As a consequence, nevertheless the two files are compatible the two
> strings are different, so that dem data are rejected.
> 
> The question is: is this the only way to check compatibility between
> maps and dem data or there is a better and more robust solution?

It is always difficult to ensure that 2 SRS are actually the "same" because very 
small changes with no real consequences can appear easily and break 
comparisons.

As far as your above issue is concerned, I've observed that if you reimport 
the exported Proj4 string and then reexport it to Proj4, you get the same 
string...

See the last line of the output of the 2 following commands ('PROJ.4 rendering 
of' line) :

testepsg "+proj=utm +zone=32 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m 
+no_defs"
testepsg "+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs +ellps=WGS84 
+towgs84=0,0,0"

(For the record, there is a OSRIsSame() method too, that is the "normal" way 
of comparing 2 SRS, but it might also mark 2 SRS as different where they are 
considered equivalent for some purposes)


> 
> Corrado
> 
> > Corrado,
> > 
> > I see that the two projections are essentially the same. You may not need
> > gdalwarp after all. Try the gdal_translate utility with the -a_srs option
> > to specify the Coordinate System of the output file.
> > 
> > Tell us how it goes.
> > 
> > On Sat, Jun 4, 2011 at 3:30 PM, Corrado Guarino Lo Bianco<
> > 
> > guarino at ce.unipr.it  <http://lists.osgeo.org/mailman/listinfo/gdal-
dev>>  wrote:
> > >/  Hi all,
> > 
> > />/  I'm a QLandkarteGT user (QLandkarteGT is based on GDAL) and I'm
> > having a />/  problem related to map formats. I use ecw maps in
> > conjunction with DEM data />/  stored in geotiff files. In the past I
> > was using GDAL 1.7.2 and I had no />/  problems. Recently I switched to
> > GDAL 1.8.0 and now QLandkarteGT says that />/  there is no matching
> > between the projection used for the maps and that used />/  for DEM
> > data, nevertheless I'm still adopting the same files. By means of />/ 
> > gdalwarp, I have made several unsuccessful attempts to convert DEM data
> > into />/  a format suitable to be used in conjunction with ecw maps.
> > />/  Can someone help me?
> > />/  These are the outputs I get from the ecw and the tiff files when I
> > run />/  gdalinfo:
> > />/
> > />/  Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
> > />/  Files: /media/IGM 25000/IGM 25.000 - Emilia Romagna.ecw
> > />/  Size is 96000, 64000
> > />/  Coordinate System is:
> > />/  PROJCS["NUTM32",
> > />/     GEOGCS["WGS 84",
> > />/         DATUM["WGS_1984",
> > />/             SPHEROID["WGS 84",6378137,298.257223563,
> > />/                 AUTHORITY["EPSG","7030"]],
> > />/             TOWGS84[0,0,0,0,0,0,0],
> > />/             AUTHORITY["EPSG","6326"]],
> > />/         PRIMEM["Greenwich",0,
> > />/             AUTHORITY["EPSG","8901"]],
> > />/         UNIT["degree",0.0174532925199433,
> > />/             AUTHORITY["EPSG","9108"]],
> > />/         AXIS["Lat",NORTH],
> > />/         AXIS["Long",EAST],
> > />/         AUTHORITY["EPSG","4326"]],
> > />/     PROJECTION["Transverse_Mercator"],
> > />/     PARAMETER["latitude_of_origin",0],
> > />/     PARAMETER["central_meridian",9],
> > />/     PARAMETER["scale_factor",0.9996],
> > />/     PARAMETER["false_easting",500000],
> > />/     PARAMETER["false_northing",0],
> > />/     UNIT["Meter",1]]
> > />/  Origin = (510000.000000000000000,5000000.000000000000000)
> > />/  Pixel Size = (2.500000000000000,-2.500000000000000)
> > />/  Corner Coordinates:
> > />/  Upper Left  (  510000.000, 5000000.000) (  9d 7'37.99"E, 45d
> > 9'12.26"N) />/  Lower Left  (  510000.000, 4840000.000) (  9d 7'26.87"E,
> > 43d42'46.65"N) />/  Upper Right (  750000.000, 5000000.000) (
> > 12d10'40.88"E, 45d 6'33.26"N) />/  Lower Right (  750000.000,
> > 4840000.000) ( 12d 6' 3.79"E, 43d40'15.39"N) />/  Center      ( 
> > 630000.000, 4920000.000) ( 10d37'59.07"E, 44d25'17.84"N) />/  Band 1
> > Block=96000x1 Type=Byte, ColorInterp=Red
> > />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000,
> > 3000x2000, />/  1500x1000, 750x500, 375x250
> > />/  Band 2 Block=96000x1 Type=Byte, ColorInterp=Green
> > />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000,
> > 3000x2000, />/  1500x1000, 750x500, 375x250
> > />/  Band 3 Block=96000x1 Type=Byte, ColorInterp=Blue
> > />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000,
> > 3000x2000, />/  1500x1000, 750x500, 375x250
> > />/
> > />/
> > />/
> > />/  Driver: GTiff/GeoTIFF
> > />/  Files: /media/Dati/Documenti/gps tuner/Altimetrie Italia/Emilia
> > />/  Romagna/Emilia_Romagna.tif
> > />/  Size is 4074, 4262
> > />/  Coordinate System is:
> > />/  PROJCS["WGS 84 / UTM zone 32N",
> > />/     GEOGCS["WGS 84",
> > />/         DATUM["WGS_1984",
> > />/             SPHEROID["WGS 84",6378137,298.257223563,
> > />/                 AUTHORITY["EPSG","7030"]],
> > />/             AUTHORITY["EPSG","6326"]],
> > />/         PRIMEM["Greenwich",0],
> > />/         UNIT["degree",0.0174532925199433],
> > />/         AUTHORITY["EPSG","4326"]],
> > />/     PROJECTION["Transverse_Mercator"],
> > />/     PARAMETER["latitude_of_origin",0],
> > />/     PARAMETER["central_meridian",9],
> > />/     PARAMETER["scale_factor",0.9996],
> > />/     PARAMETER["false_easting",500000],
> > />/     PARAMETER["false_northing",0],
> > />/     UNIT["metre",1,
> > />/         AUTHORITY["EPSG","9001"]],
> > />/     AUTHORITY["EPSG","32632"]]
> > />/  Origin = (499966.037957447464578,5101878.644408876076341)
> > />/  Pixel Size = (80.031641738007920,-80.031641738007920)
> > />/  Metadata:
> > />/   AREA_OR_POINT=Area
> > />/  Image Structure Metadata:
> > />/   COMPRESSION=DEFLATE
> > />/   INTERLEAVE=BAND
> > />/  Corner Coordinates:
> > />/  Upper Left  (  499966.038, 5101878.644) (  8d59'58.42"E, 46d
> > 4'13.74"N) />/  Lower Left  (  499966.038, 4760783.787) (  8d59'58.50"E,
> > 42d59'58.99"N) />/  Upper Right (  826014.946, 5101878.644) (
> > 13d12'35.68"E, 45d59'34.36"N) />/  Lower Right (  826014.946,
> > 4760783.787) ( 12d59'42.00"E, 42d55'47.82"N) />/  Center      ( 
> > 662990.492, 4931331.216) ( 11d 3' 3.01"E, 44d31' 0.81"N) />/  Band 1
> > Block=256x256 Type=Int16, ColorInterp=Gray
> > />/
> > />/
> > />/  Thank you for your help,
> > />/  Corrado
> > />/
> > />/  _______________________________________________
> > />/  gdal-dev mailing list
> > />/  gdal-dev at lists.osgeo.org 
> > <http://lists.osgeo.org/mailman/listinfo/gdal-dev> />/ 
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > />/
> > /
From maurelio at live.it  Sun Jun  5 12:57:25 2011
From: maurelio at live.it (zagot)
Date: Sun Jun  5 15:17:31 2011
Subject: [gdal-dev] Trasformation from proj 4
Message-ID: <1307293045363-6442626.post@n2.nabble.com>

Hi to all,

i'm new and i have this code in proj 4

        String proiezioneCassini=""+proj=cass +ellps=bessel
+lat_0=43.3182575  +lon_0=11.33221063888889";
               
        projUV spazio;
        projPJ projCassini;

        spazio.u=32
        spazio.v=48
       
        projCassini=pj_init_plus(proiezioneCassini);

        spazio=pj_inv(spazio, projCassini);
        pj_free(projCassini);
       
        String proiezioneGauss=" +proj=tmerc +lat_0=0
+lon_0=-3.45233333333333 +k=0.999600 +x_0=1500000 +y_0=0 +ellps=intl
+pm=rome +units=m +no_defs +towgs84=-225,-65,9";
        String proiezioneWgs84="+proj=latlong +datum=WGS84";
       
        projPJ projOrigine=pj_init_plus(proiezioneWgs84);
       
        projPJ projDestinazione=pj_init_plus(proiezioneGauss);
       
        double x=spazio.u;
        double y=spazio.v;
        double z=0;
       
        int ris=pj_transform(projOrigine, projDestinazione, 1, 0, &x, &y,
&z);
        pj_free(projOrigine);
        pj_free(projDestinazione);

anyone can help me to translate this code in GDal?

at lest can you help me how can I use projUV concept in GDal

please help me

thanks

sorry for my english


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Trasformation-from-proj-4-tp6442626p6442626.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sun Jun  5 13:14:30 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun  5 15:35:37 2011
Subject: [gdal-dev] Trasformation from proj 4
In-Reply-To: <1307293045363-6442626.post@n2.nabble.com>
References: <1307293045363-6442626.post@n2.nabble.com>
Message-ID: <201106051914.30068.even.rouault@mines-paris.org>


I'd suggest you to read:
http://gdal.org/ogr/osr_tutorial.html

Best regards,

Even
From even.rouault at mines-paris.org  Sun Jun  5 14:49:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun  5 17:16:34 2011
Subject: [gdal-dev] Trasformation from proj 4
In-Reply-To: <DUB106-w45F7CDCD4C152F81277591DB610@phx.gbl>
References: <1307293045363-6442626.post@n2.nabble.com>
	<201106051914.30068.even.rouault@mines-paris.org>
	<DUB106-w45F7CDCD4C152F81277591DB610@phx.gbl>
Message-ID: <201106052049.57607.even.rouault@mines-paris.org>

Le dimanche 05 juin 2011 19:33:52, marco aurelio a ?crit :
> sorry
> 
> I use Gdal_CSharp
> 

The information in the page I mentionned still mostly apply. The CSharp() 
adaptations are mostly syntax difference. You can refer to 
http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/csharp/apps/OSRTransform.cs 
for an example
From goocreations at gmail.com  Mon Jun  6 02:58:54 2011
From: goocreations at gmail.com (Goo Creations)
Date: Mon Jun  6 06:06:18 2011
Subject: [gdal-dev] Merge images without coordinates
Message-ID: <BANLkTinV2b6XcRt1d0MdWNKQ8NTD-6gszg@mail.gmail.com>

Hi all

This is maybe not the right place to ask, but since gdal provides merge
functionality, this is the place to start.

gdal_merge provides functionality to merge images with coordinates. I now
want to merge images WITHOUT any coordinates, hence do a pixel-by-pixel
matching. I will be able to input the order of images, hence saying image A
is at the left hand size of B and Z is at the top of B, but where they
exactly overlap is not provided. Does anyone know a library/software
(possible open-source) that can do this, or is gdal able to do this?

Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110606/080fb503/attachment.html
From toni.pignataro at wheregroup.com  Mon Jun  6 03:34:37 2011
From: toni.pignataro at wheregroup.com (Toni Pignataro)
Date: Mon Jun  6 06:43:56 2011
Subject: [gdal-dev] creating overview image wit gdaladdo
In-Reply-To: <4DE4F2CD.50403@pobox.com>
References: <4DE4ED23.5060608@wheregroup.com> <4DE4F2CD.50403@pobox.com>
Message-ID: <4DEC830D.3050507@wheregroup.com>

Hi Frank,

I still did not try it out, i will give feedback as soon i have tried it 
out. The image is like you mentioned an 1bit black and white image.

Thanks and regards,
Toni


Am 31.05.2011 15:53, schrieb Frank Warmerdam:
> On 11-05-31 09:29 AM, Toni Pignataro wrote:
>> Hello,
>>
>> I am trying to create an overview image with gdaladdo and tried out
>> different
>> resampling parameter. My results looks fine on large scale, but
>> zooming out
>> (small scale) the image looks really poor. What I want to to achieve or
>> reproduce is an effect like in ArcMap. Here embedding an black and
>> white image
>> and enabling the 'create Pyramids' option, it generates a really
>> smooth image
>> on small scale. Any idea or suggestion how to achieve this effect? Or
>> is this
>> an special ArcMap effect?
>
> Toni,
>
> Is your base image a 1bit black and white image? If so, you might want
> to try AVERAGE_BIT2GRAYSCALE as the resampling algorithm. This is a
> special algorithm (implemented for ArcGIS) that produces greyscale
> overviews
> for one 1bit black and white images. Note that not all applications will
> handle the situation of greyscale overviews on a 1 bit base image
> gracefully.
>
> Best regards,


From guarino at ce.unipr.it  Mon Jun  6 07:52:27 2011
From: guarino at ce.unipr.it (Corrado Guarino Lo Bianco)
Date: Mon Jun  6 11:15:47 2011
Subject: [gdal-dev] A map conversion problem with GDAL 1.8.0
In-Reply-To: <201106051418.06791.even.rouault@mines-paris.org>
References: <4DEB5F57.1020804@ce.unipr.it>
	<201106051418.06791.even.rouault@mines-paris.org>
Message-ID: <4DECBF7B.7000907@ce.unipr.it>

Hi Even,
I have forwarded your answer to the developers of QLandkarteGT, which 
changed the comparison approach in order to use OSRIsSame(). Now map and 
dem files pass the comparison test.
Thank you for your useful answer.

Corrado

Il 05/06/2011 14:18, Even Rouault ha scritto:
> Le dimanche 05 juin 2011 12:49:59, Corrado Guarino Lo Bianco a ?crit :
>> Hi,
>> unfortunately this did not solve the problem. I try to better describe
>> the problem.
>> In order to decide if map and dem data files are compatible,
>> QLandkarteGT evaluate two strings from such files according to the
>> following procedure
>>
>> ...
>>       char str[1024];
>>       strncpy(str,dataset->GetProjectionRef(),sizeof(str));
>>       char * ptr = str;
>>       OGRSpatialReference oSRS;
>>       oSRS.importFromWkt(&ptr);
>>       oSRS.exportToProj4(&ptr);
>>       strOrigProj = strProj = ptr;
>> ...
>>
>> if the two strings coincides the two files are considered congruent.
>> In the case of the two files I'm managing, the following two strings are
>> obtained
>>
>> Map: +proj=utm +zone=32 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m
>> +no_defs
>> DEM: +proj=utm +zone=32 +datum=WGS84 +units=m +no_defs +ellps=WGS84
>> +towgs84=0,0,0
>>
>> As a consequence, nevertheless the two files are compatible the two
>> strings are different, so that dem data are rejected.
>>
>> The question is: is this the only way to check compatibility between
>> maps and dem data or there is a better and more robust solution?
> It is always difficult to ensure that 2 SRS are actually the "same" because very
> small changes with no real consequences can appear easily and break
> comparisons.
>
> As far as your above issue is concerned, I've observed that if you reimport
> the exported Proj4 string and then reexport it to Proj4, you get the same
> string...
>
> See the last line of the output of the 2 following commands ('PROJ.4 rendering
> of' line) :
>
> testepsg "+proj=utm +zone=32 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m
> +no_defs"
> testepsg "+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs +ellps=WGS84
> +towgs84=0,0,0"
>
> (For the record, there is a OSRIsSame() method too, that is the "normal" way
> of comparing 2 SRS, but it might also mark 2 SRS as different where they are
> considered equivalent for some purposes)
>
>
>> Corrado
>>
>>> Corrado,
>>>
>>> I see that the two projections are essentially the same. You may not need
>>> gdalwarp after all. Try the gdal_translate utility with the -a_srs option
>>> to specify the Coordinate System of the output file.
>>>
>>> Tell us how it goes.
>>>
>>> On Sat, Jun 4, 2011 at 3:30 PM, Corrado Guarino Lo Bianco<
>>>
>>> guarino at ce.unipr.it<http://lists.osgeo.org/mailman/listinfo/gdal-
> dev>>   wrote:
>>>> /  Hi all,
>>> />/  I'm a QLandkarteGT user (QLandkarteGT is based on GDAL) and I'm
>>> having a />/  problem related to map formats. I use ecw maps in
>>> conjunction with DEM data />/  stored in geotiff files. In the past I
>>> was using GDAL 1.7.2 and I had no />/  problems. Recently I switched to
>>> GDAL 1.8.0 and now QLandkarteGT says that />/  there is no matching
>>> between the projection used for the maps and that used />/  for DEM
>>> data, nevertheless I'm still adopting the same files. By means of />/
>>> gdalwarp, I have made several unsuccessful attempts to convert DEM data
>>> into />/  a format suitable to be used in conjunction with ecw maps.
>>> />/  Can someone help me?
>>> />/  These are the outputs I get from the ecw and the tiff files when I
>>> run />/  gdalinfo:
>>> />/
>>> />/  Driver: ECW/ERDAS Compressed Wavelets (SDK 3.x)
>>> />/  Files: /media/IGM 25000/IGM 25.000 - Emilia Romagna.ecw
>>> />/  Size is 96000, 64000
>>> />/  Coordinate System is:
>>> />/  PROJCS["NUTM32",
>>> />/     GEOGCS["WGS 84",
>>> />/         DATUM["WGS_1984",
>>> />/             SPHEROID["WGS 84",6378137,298.257223563,
>>> />/                 AUTHORITY["EPSG","7030"]],
>>> />/             TOWGS84[0,0,0,0,0,0,0],
>>> />/             AUTHORITY["EPSG","6326"]],
>>> />/         PRIMEM["Greenwich",0,
>>> />/             AUTHORITY["EPSG","8901"]],
>>> />/         UNIT["degree",0.0174532925199433,
>>> />/             AUTHORITY["EPSG","9108"]],
>>> />/         AXIS["Lat",NORTH],
>>> />/         AXIS["Long",EAST],
>>> />/         AUTHORITY["EPSG","4326"]],
>>> />/     PROJECTION["Transverse_Mercator"],
>>> />/     PARAMETER["latitude_of_origin",0],
>>> />/     PARAMETER["central_meridian",9],
>>> />/     PARAMETER["scale_factor",0.9996],
>>> />/     PARAMETER["false_easting",500000],
>>> />/     PARAMETER["false_northing",0],
>>> />/     UNIT["Meter",1]]
>>> />/  Origin = (510000.000000000000000,5000000.000000000000000)
>>> />/  Pixel Size = (2.500000000000000,-2.500000000000000)
>>> />/  Corner Coordinates:
>>> />/  Upper Left  (  510000.000, 5000000.000) (  9d 7'37.99"E, 45d
>>> 9'12.26"N) />/  Lower Left  (  510000.000, 4840000.000) (  9d 7'26.87"E,
>>> 43d42'46.65"N) />/  Upper Right (  750000.000, 5000000.000) (
>>> 12d10'40.88"E, 45d 6'33.26"N) />/  Lower Right (  750000.000,
>>> 4840000.000) ( 12d 6' 3.79"E, 43d40'15.39"N) />/  Center      (
>>> 630000.000, 4920000.000) ( 10d37'59.07"E, 44d25'17.84"N) />/  Band 1
>>> Block=96000x1 Type=Byte, ColorInterp=Red
>>> />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000,
>>> 3000x2000, />/  1500x1000, 750x500, 375x250
>>> />/  Band 2 Block=96000x1 Type=Byte, ColorInterp=Green
>>> />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000,
>>> 3000x2000, />/  1500x1000, 750x500, 375x250
>>> />/  Band 3 Block=96000x1 Type=Byte, ColorInterp=Blue
>>> />/   Overviews: 48000x32000, 24000x16000, 12000x8000, 6000x4000,
>>> 3000x2000, />/  1500x1000, 750x500, 375x250
>>> />/
>>> />/
>>> />/
>>> />/  Driver: GTiff/GeoTIFF
>>> />/  Files: /media/Dati/Documenti/gps tuner/Altimetrie Italia/Emilia
>>> />/  Romagna/Emilia_Romagna.tif
>>> />/  Size is 4074, 4262
>>> />/  Coordinate System is:
>>> />/  PROJCS["WGS 84 / UTM zone 32N",
>>> />/     GEOGCS["WGS 84",
>>> />/         DATUM["WGS_1984",
>>> />/             SPHEROID["WGS 84",6378137,298.257223563,
>>> />/                 AUTHORITY["EPSG","7030"]],
>>> />/             AUTHORITY["EPSG","6326"]],
>>> />/         PRIMEM["Greenwich",0],
>>> />/         UNIT["degree",0.0174532925199433],
>>> />/         AUTHORITY["EPSG","4326"]],
>>> />/     PROJECTION["Transverse_Mercator"],
>>> />/     PARAMETER["latitude_of_origin",0],
>>> />/     PARAMETER["central_meridian",9],
>>> />/     PARAMETER["scale_factor",0.9996],
>>> />/     PARAMETER["false_easting",500000],
>>> />/     PARAMETER["false_northing",0],
>>> />/     UNIT["metre",1,
>>> />/         AUTHORITY["EPSG","9001"]],
>>> />/     AUTHORITY["EPSG","32632"]]
>>> />/  Origin = (499966.037957447464578,5101878.644408876076341)
>>> />/  Pixel Size = (80.031641738007920,-80.031641738007920)
>>> />/  Metadata:
>>> />/   AREA_OR_POINT=Area
>>> />/  Image Structure Metadata:
>>> />/   COMPRESSION=DEFLATE
>>> />/   INTERLEAVE=BAND
>>> />/  Corner Coordinates:
>>> />/  Upper Left  (  499966.038, 5101878.644) (  8d59'58.42"E, 46d
>>> 4'13.74"N) />/  Lower Left  (  499966.038, 4760783.787) (  8d59'58.50"E,
>>> 42d59'58.99"N) />/  Upper Right (  826014.946, 5101878.644) (
>>> 13d12'35.68"E, 45d59'34.36"N) />/  Lower Right (  826014.946,
>>> 4760783.787) ( 12d59'42.00"E, 42d55'47.82"N) />/  Center      (
>>> 662990.492, 4931331.216) ( 11d 3' 3.01"E, 44d31' 0.81"N) />/  Band 1
>>> Block=256x256 Type=Int16, ColorInterp=Gray
>>> />/
>>> />/
>>> />/  Thank you for your help,
>>> />/  Corrado
>>> />/
>>> />/  _______________________________________________
>>> />/  gdal-dev mailing list
>>> />/  gdal-dev at lists.osgeo.org
>>> <http://lists.osgeo.org/mailman/listinfo/gdal-dev>  />/
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> />/
>>> /

From holloway.richard at geoeye.com  Mon Jun  6 10:27:55 2011
From: holloway.richard at geoeye.com (marine88)
Date: Mon Jun  6 14:00:13 2011
Subject: [gdal-dev] Re: Insert non-standard tag into geotiff header
In-Reply-To: <BANLkTik3Ao7HsPPfzk8EmwEGqXweV6vGYQ@mail.gmail.com>
References: <1307132457968-6436732.post@n2.nabble.com>
	<BANLkTik3Ao7HsPPfzk8EmwEGqXweV6vGYQ@mail.gmail.com>
Message-ID: <1307370475179-6445371.post@n2.nabble.com>

Thanks for the reply.  Is this only in C?  Or is there something in C#?  Also
I get the function but...not quite sure how to utlize this, is there some
tutorial or example code I can go by?  

Thanks,

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Insert-non-standard-tag-into-geotiff-header-tp6436732p6445371.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Mon Jun  6 13:15:30 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun  6 16:56:40 2011
Subject: [gdal-dev] Insert non-standard tag into geotiff header
In-Reply-To: <1307132457968-6436732.post@n2.nabble.com>
References: <1307132457968-6436732.post@n2.nabble.com>
Message-ID: <4DED0B32.4080406@pobox.com>

On 11-06-03 04:20 PM, marine88 wrote:
> HI,
> I am new to this and was asked if I could insert a custom tag into the
> geotiff header. I have no clue on how to do this is this even possible?
...
 > Thanks for the reply.  Is this only in C?  Or is there something in C#?  Also
 > I get the function but...not quite sure how to utlize this, is there some
 > tutorial or example code I can go by?

Richard,

The SetMetadataItem() method referenced by Chaitanya is also available
in C. It can be invoked on the dataset as a whole or on a particular
band object.  The C function is:

CPLErr GDALSetMetadataItem 	( 	GDALMajorObjectH  	hObject,
		const char *  	pszName,
		const char *  	pszValue,
		const char *  	pszDomain	
	)

http://www.gdal.org/gdal_8h.html#c92aec63371e9e4b0121276406f0bd8d

So you can pass a GDALDatasetH or GDALRasterBandH as "hObject".  Yhe
pszDomain should normally be NULL unless you want to set metadata items.

Note that this puts the metadata items all into one custom GDAL tag for
metadata (which will be an XML formatted string with the various metadata
items).  There is no mechanism in GDAL to write out an arbitrary new TIFF
tag.   If you need to do that you are pretty much reduced to using the
libtiff API.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From holloway.richard at geoeye.com  Mon Jun  6 13:18:39 2011
From: holloway.richard at geoeye.com (marine88)
Date: Mon Jun  6 16:59:56 2011
Subject: [gdal-dev] RE: Insert non-standard tag into geotiff header
In-Reply-To: <4DED0B32.4080406@pobox.com>
References: <1307132457968-6436732.post@n2.nabble.com>
	<4DED0B32.4080406@pobox.com>
Message-ID: <44EADB1AC2F19449B528A17643F417B9B56F4BA0F9@MS1.geoeye.com>

Thanks,
C# you mean?  Per your note I need to put in a arbitrary new TIFF tag.  I am a .NET guy but I did dload python.  Just not sure how to go about doing the insert.


From: Frank Warmerdam [via OSGeo.org] [mailto:ml-node+6446013-1306113036-339049@n2.nabble.com]
Sent: Monday, June 06, 2011 12:16 PM
To: Richard Holloway
Subject: Re: Insert non-standard tag into geotiff header

On 11-06-03 04:20 PM, marine88 wrote:
> HI,
> I am new to this and was asked if I could insert a custom tag into the
> geotiff header. I have no clue on how to do this is this even possible?
...
 > Thanks for the reply.  Is this only in C?  Or is there something in C#?  Also
 > I get the function but...not quite sure how to utlize this, is there some
 > tutorial or example code I can go by?

Richard,

The SetMetadataItem() method referenced by Chaitanya is also available
in C. It can be invoked on the dataset as a whole or on a particular
band object.  The C function is:

CPLErr GDALSetMetadataItem ( GDALMajorObjectH   hObject,
                const char *   pszName,
                const char *   pszValue,
                const char *   pszDomain
        )

http://www.gdal.org/gdal_8h.html#c92aec63371e9e4b0121276406f0bd8d

So you can pass a GDALDatasetH or GDALRasterBandH as "hObject".  Yhe
pszDomain should normally be NULL unless you want to set metadata items.

Note that this puts the metadata items all into one custom GDAL tag for
metadata (which will be an XML formatted string with the various metadata
items).  There is no mechanism in GDAL to write out an arbitrary new TIFF
tag.   If you need to do that you are pretty much reduced to using the
libtiff API.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, [hidden email]</user/SendEmail.jtp?type=node&node=6446013&i=0>
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
[hidden email]</user/SendEmail.jtp?type=node&node=6446013&i=1>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

________________________________
If you reply to this email, your message will be added to the discussion below:
http://osgeo-org.1803224.n2.nabble.com/Insert-non-standard-tag-into-geotiff-header-tp6436732p6446013.html
To unsubscribe from Insert non-standard tag into geotiff header, click here<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=6436732&code=aG9sbG93YXkucmljaGFyZEBnZW9leWUuY29tfDY0MzY3MzJ8NjY4Mjg0MDI1>.


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Insert-non-standard-tag-into-geotiff-header-tp6436732p6446025.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110606/14e3d610/attachment.html
From rjpawley at shaw.ca  Mon Jun  6 13:27:14 2011
From: rjpawley at shaw.ca (Bob Pawley)
Date: Mon Jun  6 17:09:29 2011
Subject: [gdal-dev] ogr2ogr unable to open
Message-ID: <28F6C9291F4A46DE81AC5C018DAAEB55@BobPC>

Hi

I hope this is the right list.

I am attempting to use the FWTools to convert a .dxf file to a PostgreSQL database.

I am using the following format -

ogr2ogr -f "PostgreSQL" PG: "host=Remote Host user=postgres dbname=E5R password=Password  p081.dxf

I receive an error message -  unable to open datasource   ..... with the following drivers.

The PostgreSQL driver is listed amongst the generated list.

The database is accessible with other tools from this computer.

Any thoughts on what I am doing wrong will be appreciated.

Bob

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110606/0e5833f7/attachment.html
From warmerdam at pobox.com  Mon Jun  6 13:31:13 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun  6 17:13:15 2011
Subject: [gdal-dev] RE: Insert non-standard tag into geotiff header
In-Reply-To: <44EADB1AC2F19449B528A17643F417B9B56F4BA0F9@MS1.geoeye.com>
References: <1307132457968-6436732.post@n2.nabble.com>
	<4DED0B32.4080406@pobox.com>
	<44EADB1AC2F19449B528A17643F417B9B56F4BA0F9@MS1.geoeye.com>
Message-ID: <4DED0EE1.8080704@pobox.com>

On 11-06-06 01:18 PM, marine88 wrote:
> Thanks,
>
> C# you mean? Per your note I need to put in a arbitrary new TIFF tag. I am a
> .NET guy but I did dload python. Just not sure how to go about doing the insert.

Richard,

Sorry, poor reading comprehension on my part. :-(

Yes, there is a corresponding C# method called SetMetadataItem() on
dataset and raster band objects.

I'm not a c# guy so I can't easily prepare an example but basically
it will be something a bit like:

   dataset = GDALOpen( "abc.tif", GA_Update );
   dataset.SetMetadataItem( "MyItem", "MyValue", NULL );
   ... close the dataset however that is done in C# ...



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jukka.rahkonen at mmmtike.fi  Mon Jun  6 14:08:18 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Jun  6 17:52:32 2011
Subject: [gdal-dev] Re: ogr2ogr unable to open
References: <28F6C9291F4A46DE81AC5C018DAAEB55@BobPC>
Message-ID: <loom.20110606T200615-521@post.gmane.org>

Bob Pawley <rjpawley <at> shaw.ca> writes:

 ?
> I am attempting to use the FWTools to convert a .dxf file to a PostgreSQL 
> database.
> ?
> I am using the following format -
> ?
> ogr2ogr -f "PostgreSQL" PG: "host=Remote Host user=postgres dbname=E5R 
> password=Password? p081.dxf

First thing to try is perhaps to add a closing " into the PG: connection options.

-Jukka Rahkonen-

From warmerdam at pobox.com  Mon Jun  6 15:00:13 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun  6 18:47:00 2011
Subject: [gdal-dev] ogr2ogr unable to open
In-Reply-To: <28F6C9291F4A46DE81AC5C018DAAEB55@BobPC>
References: <28F6C9291F4A46DE81AC5C018DAAEB55@BobPC>
Message-ID: <4DED23BD.5080302@pobox.com>

On 11-06-06 01:27 PM, Bob Pawley wrote:
> Hi
> I hope this is the right list.
> I am attempting to use the FWTools to convert a .dxf file to a PostgreSQL database.
> I am using the following format -
> ogr2ogr -f "PostgreSQL" PG: "host=Remote Host user=postgres dbname=E5R
> password=Password p081.dxf
> I receive an error message - unable to open datasource ..... with the following
> drivers.
> The PostgreSQL driver is listed amongst the generated list.
> The database is accessible with other tools from this computer.
> Any thoughts on what I am doing wrong will be appreciated.

Bob,

For one thing there should be no space between PG: and the rest of the
connection string.  Try:

ogr2ogr -update "PG:host=RemoteHost  user=postgres dbname=E5R 
password=Password" p081.dxf

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From eduardo.kanegae at gmail.com  Mon Jun  6 18:34:40 2011
From: eduardo.kanegae at gmail.com (Eduardo Kanegae)
Date: Mon Jun  6 22:33:27 2011
Subject: [gdal-dev] MapServer reading CAD files
Message-ID: <BANLkTi=9yL+b0FAOXU5xsJ12HRhSatka0Q@mail.gmail.com>

Hi all,

I?d like to embed construction engineering maps ( basically .dwg
files) to a webmapping interface.

How this could be done? Using .DXF OGR driver? Or is there any option
for directly reading .dwg files?

http://www.gnu.org/software/libredwg/ should be an option?

best regards

--
Eduardo Patto Kanegae
+55(19)9610-8768
From warmerdam at pobox.com  Mon Jun  6 21:44:54 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun  7 01:53:50 2011
Subject: [gdal-dev] MapServer reading CAD files
In-Reply-To: <BANLkTi=9yL+b0FAOXU5xsJ12HRhSatka0Q@mail.gmail.com>
References: <BANLkTi=9yL+b0FAOXU5xsJ12HRhSatka0Q@mail.gmail.com>
Message-ID: <4DED8296.8070900@pobox.com>

On 11-06-06 06:34 PM, Eduardo Kanegae wrote:
> Hi all,
>
> I?d like to embed construction engineering maps ( basically .dwg
> files) to a webmapping interface.
>
> How this could be done? Using .DXF OGR driver? Or is there any option
> for directly reading .dwg files?
>
> http://www.gnu.org/software/libredwg/ should be an option?

Eduardo,

I am currently working on an OGR DWG driver based on the Teigha libraries
from the Open Design Alliance.  The Teigha libraries are not open source
but they are available under fairly reasonable terms.  As part of that
effort I am implementing "OGR Feature Style" support in a manner similar
to that done for the DXF driver and testing the rendering with MapServer
(using OGR autostyling in MapServer).

I haven't tried the libredwg library.  I am curious about it, but it was
judged inadequately mature for my current client.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From asgerpetersen at gmail.com  Tue Jun  7 04:12:28 2011
From: asgerpetersen at gmail.com (Asger Sigurd Skovbo Petersen)
Date: Tue Jun  7 08:43:06 2011
Subject: [gdal-dev] Re: Insert non-standard tag into geotiff header
Message-ID: <BANLkTimV4FuXdUGVZ_jUk-HGQ3LrJAgURQ@mail.gmail.com>

> Thanks,
> C# you mean? ?Per your note I need to put in a arbitrary new TIFF tag. ?I am a .NET guy but I did dload python. ?Just not sure how to go about doing the insert.

Hi,

If it must be done in .NET, you could use LibTiff.Net [1] which is a
.NET port of libtiff.

I have successfully used LibTiff.Net for some time and it is now
pretty stable. There is a lot of example code, which somewhat
compensates for the rather steep learning curve. They even have an
example of how to insert a custom tag [2]

Best regards
Asger


[1] http://bitmiracle.com/libtiff/
[2] http://bitmiracle.com/libtiff/help/adding-new-%28custom%29-tags.aspx
From alexmantaut at suremptec.com.ar  Tue Jun  7 14:13:05 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Tue Jun  7 19:16:46 2011
Subject: [gdal-dev] HDF5 COSMO-SKYMED metadata problems
Message-ID: <BANLkTikLi-g52F_TD8s790OPJK9G1w=qAg@mail.gmail.com>

Hi:

I'm trying to get georreference information from an HDF5 COSMO-SKYMED file.

I used HDFView to see the file's metadata and found that in this type of
HDF5 files the georreference information is stored in the metadata
corresponding to the "root" of the file.

The problem is that when i try to use gdalinfo to get the file's metadata,
it shows the metadata asociated to all the subdatasets included on the file,
but not the root's metadata...

My cuestions: How do i get the metadata asociated to the "root" of the file?
Is there a better way to get georreference from COSMO-SKYMED HDF5 files?

Thanks in advance
-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
javierurien@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110607/7a0d82f1/attachment.html
From antonio.valentino at tiscali.it  Tue Jun  7 14:24:53 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Tue Jun  7 19:29:09 2011
Subject: [gdal-dev] HDF5 COSMO-SKYMED metadata problems
In-Reply-To: <BANLkTikLi-g52F_TD8s790OPJK9G1w=qAg@mail.gmail.com>
References: <BANLkTikLi-g52F_TD8s790OPJK9G1w=qAg@mail.gmail.com>
Message-ID: <4DEE6CF5.4050506@tiscali.it>

Hi Alex,

Il 07/06/2011 20:13, Alex Mantaut ha scritto:
> Hi:
> 
> I'm trying to get georreference information from an HDF5 COSMO-SKYMED file.
> 
> I used HDFView to see the file's metadata and found that in this type of
> HDF5 files the georreference information is stored in the metadata
> corresponding to the "root" of the file.
> 
> The problem is that when i try to use gdalinfo to get the file's metadata,
> it shows the metadata asociated to all the subdatasets included on the file,
> but not the root's metadata...
> 
> My cuestions: How do i get the metadata asociated to the "root" of the file?
> Is there a better way to get georreference from COSMO-SKYMED HDF5 files?
> 
> Thanks in advance

Ticket #2412 [1] has an associated patch that could be useful in your
case (i.e for retrieving metadata associated to the root group).

[1] http://trac.osgeo.org/gdal/ticket/2412

ciao

-- 
Antonio Valentino
From ledermann at ims.tuwien.ac.at  Tue Jun  7 15:44:32 2011
From: ledermann at ims.tuwien.ac.at (Flo Ledermann)
Date: Tue Jun  7 20:53:00 2011
Subject: [gdal-dev] New +axis parameter in PROJ.4 trunk and gdalwarp
Message-ID: <4DEE7FA0.2050001@ims.tuwien.ac.at>

Hi all,

PROJ.4 trunk supports a new parameter "+axis" for projection strings to
define axis orientation. With this you can, for example, create an
"upside-down" projection by specifying "+axis=wsu" in your projection
string. (See http://trac.osgeo.org/proj/wiki/GenParms#Axisorientation )

I am trying to use this to create south-up hillshade images. I compiled
PROJ.4 trunk and GDAL using --with-static-proj4=/usr/local (where my
PROJ.4 is installed), but gdalwarp seems to just ignore the new
parameter - the result is the same as with the north-up projection.

Can anyone tell me if this is supposed to work and there's just
something wrong with my build, or if there is a limitation in GDAL that
prevents it from working with upside-down projections? Also if you can
give me any pointers to code where this limitation may be fixed I may be
able to contribute a patch, if the solution is not too involved.

Best,

Flo Ledermann

From warmerdam at pobox.com  Tue Jun  7 15:55:25 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun  7 21:04:24 2011
Subject: [gdal-dev] New +axis parameter in PROJ.4 trunk and gdalwarp
In-Reply-To: <4DEE7FA0.2050001@ims.tuwien.ac.at>
References: <4DEE7FA0.2050001@ims.tuwien.ac.at>
Message-ID: <4DEE822D.10705@pobox.com>

On 11-06-07 03:44 PM, Flo Ledermann wrote:
> Hi all,
>
> PROJ.4 trunk supports a new parameter "+axis" for projection strings to
> define axis orientation. With this you can, for example, create an
> "upside-down" projection by specifying "+axis=wsu" in your projection
> string. (See http://trac.osgeo.org/proj/wiki/GenParms#Axisorientation )
>
> I am trying to use this to create south-up hillshade images. I compiled
> PROJ.4 trunk and GDAL using --with-static-proj4=/usr/local (where my
> PROJ.4 is installed), but gdalwarp seems to just ignore the new
> parameter - the result is the same as with the north-up projection.
>
> Can anyone tell me if this is supposed to work and there's just
> something wrong with my build, or if there is a limitation in GDAL that
> prevents it from working with upside-down projections? Also if you can
> give me any pointers to code where this limitation may be fixed I may be
> able to contribute a patch, if the solution is not too involved.

Flo,

Looking in gdal/ogr/ogr_srs_proj4.cpp which implements the translation
between PROJ.4 and WKT coordinate system formats for GDAL/OGR it seems
the only use of the +axis switch is special cases for Transverse Mercator
South Orientated.  So when you pass a PROJ.4 coordinate system to gdalwarp
it is internally be translated to WKT and then back to PROJ.4 for final use.
The axis definition is lost in those translations.

ogr_srs_proj4.cpp is the place to add support for axes.  WKT does have a way
of describing axis ordering.  However, this is a somewhat complicated change
to make without unexpected side effects.  This is likely why I didn't try to
pursue it when doing the original axis implementation.

For a 180 degree rotated hillshade image it might just be easier to do the
rotation/flipping by adjustments to the geotransform.  The GeoTransform is
an affine transformation and can support flipping, rotation and shearing
if constructed properly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alexmantaut at suremptec.com.ar  Tue Jun  7 16:13:36 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Tue Jun  7 21:23:28 2011
Subject: [gdal-dev] HDF5 COSMO-SKYMED metadata problems
In-Reply-To: <4DEE6CF5.4050506@tiscali.it>
References: <BANLkTikLi-g52F_TD8s790OPJK9G1w=qAg@mail.gmail.com>
	<4DEE6CF5.4050506@tiscali.it>
Message-ID: <BANLkTimkKFN29EkLebbu57ROL3BAOQQQ+A@mail.gmail.com>

Antonio:
           Thanks for the swift answer. I've tried to apply the patch to
gdal 1.8 but it fails on the 5? chunk (hdf5dataset.cpp from line  598)
           I looked at the code and it seems significantly diffrent (perhaps
this class was modified since the patch was released a year ago?)
            Can you release a newer version of the patch please?

 Vi ringrazio un'altra volta

2011/6/7 Antonio Valentino <antonio.valentino@tiscali.it>

> Hi Alex,
>
> Il 07/06/2011 20:13, Alex Mantaut ha scritto:
> > Hi:
> >
> > I'm trying to get georreference information from an HDF5 COSMO-SKYMED
> file.
> >
> > I used HDFView to see the file's metadata and found that in this type of
> > HDF5 files the georreference information is stored in the metadata
> > corresponding to the "root" of the file.
> >
> > The problem is that when i try to use gdalinfo to get the file's
> metadata,
> > it shows the metadata asociated to all the subdatasets included on the
> file,
> > but not the root's metadata...
> >
> > My cuestions: How do i get the metadata asociated to the "root" of the
> file?
> > Is there a better way to get georreference from COSMO-SKYMED HDF5 files?
> >
> > Thanks in advance
>
> Ticket #2412 [1] has an associated patch that could be useful in your
> case (i.e for retrieving metadata associated to the root group).
>
> [1] http://trac.osgeo.org/gdal/ticket/2412
>
> ciao
>
> --
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
javierurien@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110607/becfe37d/attachment.html
From ledermann at ims.tuwien.ac.at  Tue Jun  7 16:20:58 2011
From: ledermann at ims.tuwien.ac.at (Flo Ledermann)
Date: Tue Jun  7 21:31:18 2011
Subject: [gdal-dev] New +axis parameter in PROJ.4 trunk and gdalwarp
In-Reply-To: <4DEE822D.10705@pobox.com>
References: <4DEE7FA0.2050001@ims.tuwien.ac.at> <4DEE822D.10705@pobox.com>
Message-ID: <4DEE882A.9090406@ims.tuwien.ac.at>



On 06/07/2011 08:55 PM, Frank Warmerdam wrote:
> Looking in gdal/ogr/ogr_srs_proj4.cpp which implements the translation
> between PROJ.4 and WKT coordinate system formats for GDAL/OGR it seems
> the only use of the +axis switch is special cases for Transverse Mercator
> South Orientated.  So when you pass a PROJ.4 coordinate system to gdalwarp
> it is internally be translated to WKT and then back to PROJ.4 for final
> use.
> The axis definition is lost in those translations.
>
> ogr_srs_proj4.cpp is the place to add support for axes.

Thanks for the pointer to this file! Reading the source I found a hint
to the proprietary "+wktext" parameter and gave it a shot - and it
worked! Specifying this to preserve the PROJ.4 string through OGR seems
to be sufficient to make this work in gdalwarp!

Best,

Flo


> On 11-06-07 03:44 PM, Flo Ledermann wrote:
>> Hi all,
>>
>> PROJ.4 trunk supports a new parameter "+axis" for projection strings to
>> define axis orientation. With this you can, for example, create an
>> "upside-down" projection by specifying "+axis=wsu" in your projection
>> string. (See http://trac.osgeo.org/proj/wiki/GenParms#Axisorientation )
>>
>> I am trying to use this to create south-up hillshade images. I compiled
>> PROJ.4 trunk and GDAL using --with-static-proj4=/usr/local (where my
>> PROJ.4 is installed), but gdalwarp seems to just ignore the new
>> parameter - the result is the same as with the north-up projection.
>>
>> Can anyone tell me if this is supposed to work and there's just
>> something wrong with my build, or if there is a limitation in GDAL that
>> prevents it from working with upside-down projections? Also if you can
>> give me any pointers to code where this limitation may be fixed I may be
>> able to contribute a patch, if the solution is not too involved.
> 
> Flo,
> 
From armin.burger at gmx.net  Wed Jun  8 08:24:53 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Jun  8 14:28:23 2011
Subject: [gdal-dev] gdal_translate - ECW format and non-UTM projections
Message-ID: <20110608122453.139240@gmx.net>

Hi all

I am using "gdal_translate" to convert GeoTiff or Erdas images to ECW. This works fine when using standard projections like UTM-WGS84. For UTM I guess GDAL even writes the correct projection information into the ECW header. Several problems appear however if I convert images that are in one of the various European national projections.  
    
The way I'm trying to assure GDAL uses the projection information it understands is to call gdal_translate with a flag like

  -a_srs "EPSG:3912"
  
This usually creates an XML file (*.ecw.aux.xml) that contains the projection information in an XML tag <SRS>. But then some quite strange issues arise that I don't understand:

-------------

1. "gdalinfo" displays the projection correctly, but the values for the corner coordinates are just the pixel values, starting with 0/0 for upper-left. This for the above listed projection 3912 gives eg. for an ECW file

Size is 40258, 20016
Coordinate System is:
PROJCS["MGI 1901 / Slovene National Grid",
    GEOGCS["MGI 1901",
        DATUM["MGI_1901",
            SPHEROID["Bessel 1841",6377397.155,299.1528128,
                AUTHORITY["EPSG","7004"]],
            AUTHORITY["EPSG","1031"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.01745329251994328,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","3906"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",15],
    PARAMETER["scale_factor",0.9999],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",-5000000],
    AUTHORITY["EPSG","3912"],
    AXIS["Y",EAST],
    AXIS["X",NORTH]]
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,20016.0)
Upper Right (40258.0,    0.0)
Lower Right (40258.0,20016.0)
Center      (20129.0,10008.0)


In programs like ArcGIS 10 the coordinates are displayed correctly and the projection information is also right. But in QGIS I have just like with gdalinfo the pixel coordinates even though the projection information is correct (displayed in proj4 notation). 

Using such an image as layer in MapServer via WMS, defining the projection like
   "init=EPSG:3912"
the image has more or less the correct projected coordinates, but datum shift parameters defined in the epsg file are not taken into account. If I instead of the ECW file use the GeoTIFF version instead, the returned imagettes from the WMS are correct with datum shift parameters applied.  

2. If I remove the *.ecw.aux.xml file then gdalinfo does not find any more any projection information but at least displays correctly the corner coordinates. The same for QGIS.

Also MapServer WMS then returns the images correctly with datum shift parameters applied.


3. An even more exotic problem appears eg. with an image in European ETM projection (the EU-specific UTM projection using ETRS89 datum, but in practical terms +/- identical to UTM WGS84).

If I convert a GeoTiff with such a projection (EPSG 25832)
PROJCS["UTM Zone 32, Northern Hemisphere",
    GEOGCS["ETRF 1989",
        DATUM["ETRF 1989",
            SPHEROID["WGS 84",6378137,298.2572235630016],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",9],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]

the resulting ECW shows the same problems mentioned above, just pixel coordinates displayed. But in addition, it does not display any pixels in some programs like ERDAS, ER Viewer or gives errors in ERDAS IWS.... It doesn't matter if I keep the aux.xml file or if I remove it. 

If I only re-write the projection information in the GeoTiff header to the equivalent UTM using GDAL Python bindings, convert the image again to ECW with gdal_translate, then the resulting ECW file is perfectly correct and displays fine in all programs I tested.

-----------

The GDAL version was 1.8.0, using the ECW library 3.3, running on Linux. The same problems appear though on Windows using GDAL 1.7.3 from FWTools  or a newer 1.8.0 compilation from www.gisinternals.com.
 
Did others stumble over similar types of problem as well? Is there any possibility this could be sorted out somehow? If needed I can provide some test images that show the problems via FTP download.

Best regards
Armin



-- 
NEU: FreePhone - kostenlos mobil telefonieren!			
Jetzt informieren: http://www.gmx.net/de/go/freephone
From jrepetto at free.fr  Wed Jun  8 10:27:22 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Jun  8 16:37:27 2011
Subject: [gdal-dev] gdal_translate - ECW format and non-UTM projections
In-Reply-To: <20110608122453.139240@gmx.net>
References: <20110608122453.139240@gmx.net>
Message-ID: <4DEF86CA.7030202@free.fr>

Hi,

I think there is a bug in gdalinfo, I already noticed this kind of 
problem, for example 
<http://osgeo-org.1803224.n2.nabble.com/gdal-dev-corner-coords-in-tif-vs-ecw-td5608144.html>

You should file a bug at <http://trac.osgeo.org/gdal/> .

Jean-Claude
From armin.burger at gmx.net  Wed Jun  8 11:30:18 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Jun  8 17:43:36 2011
Subject: [gdal-dev] gdal_translate - ECW format and non-UTM projections
In-Reply-To: <4DEF86CA.7030202@free.fr>
References: <20110608122453.139240@gmx.net> <4DEF86CA.7030202@free.fr>
Message-ID: <20110608153018.62180@gmx.net>

Jean-Claude

I guess it's not only a problem of gdalinfo but of some parts of GDAL in general dealing with the ECW. 

I made some more tests and when I add the options  
  -co DATUM=WGS84  -co PROJ=NUTM32 
to the gdal_translate call then gdalinfo identifies the coordinates correctly afterwards, but then of course the whole projection is set to UTM...

It seems that the default value entered for DATUM is "RAW" and that seems to cause some of the problems afterwards for GDAL. The problem for me is that I need to insert the correct datum and projection using the syntax of ECW, and I don't know if all available datums/projections used e.g. in Europe are supported, and which syntax to use for the available ones.

I found on my Windows installation a file "PcskeyProjDatum.dat" with a few definitions of projection and datum used but this was very limited and covered mainly UTM and NAD. Most European projections and datums were missing in this file. 


Armin
 

-------- Original-Nachricht --------
> Datum: Wed, 08 Jun 2011 16:27:22 +0200
> Von: Jean-Claude Repetto <jrepetto@free.fr>
> An: Armin Burger <armin.burger@gmx.net>
> CC: gdal-dev@lists.osgeo.org
> Betreff: Re: [gdal-dev] gdal_translate - ECW format and non-UTM projections

> Hi,
> 
> I think there is a bug in gdalinfo, I already noticed this kind of 
> problem, for example 
> <http://osgeo-org.1803224.n2.nabble.com/gdal-dev-corner-coords-in-tif-vs-ecw-td5608144.html>
> 
> You should file a bug at <http://trac.osgeo.org/gdal/> .
> 
> Jean-Claude

-- 
Empfehlen Sie GMX DSL Ihren Freunden und Bekannten und wir
belohnen Sie mit bis zu 50,- Euro! https://freundschaftswerbung.gmx.de
From warmerdam at pobox.com  Wed Jun  8 11:44:53 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun  8 17:58:52 2011
Subject: [gdal-dev] gdal_translate - ECW format and non-UTM projections
In-Reply-To: <20110608153018.62180@gmx.net>
References: <20110608122453.139240@gmx.net> <4DEF86CA.7030202@free.fr>
	<20110608153018.62180@gmx.net>
Message-ID: <4DEF98F5.2080501@pobox.com>

On 11-06-08 11:30 AM, Armin Burger wrote:
> Jean-Claude
>
> I guess it's not only a problem of gdalinfo but of some parts of GDAL in general dealing with the ECW.
>
> I made some more tests and when I add the options
>    -co DATUM=WGS84  -co PROJ=NUTM32
> to the gdal_translate call then gdalinfo identifies the coordinates correctly afterwards, but then of course the whole projection is set to UTM...
>
> It seems that the default value entered for DATUM is "RAW" and that seems to cause some of the problems afterwards for GDAL. The problem for me is that I need to insert the correct datum and projection using the syntax of ECW, and I don't know if all available datums/projections used e.g. in Europe are supported, and which syntax to use for the available ones.
>
> I found on my Windows installation a file "PcskeyProjDatum.dat" with a few definitions of projection and datum used but this was very limited and covered mainly UTM and NAD. Most European projections and datums were missing in this file.

Armin,

GDAL skips with a file data/ecw_cs.wkt that lists many ECW
projections and datums.  Perhaps it will be helpful.

There are definately problems translating coordinate system
into the ECW dictionary.  A ticket for a particular case
*might* lead to some improvement but it is an iffy process.

Part of the problem in the thread mentioned by Jean-Claude
is that when the coordinate system translation fails GDAL
also gives up on read the georeferencing transform - or at
least I think it used to work this way.  I think there may
have been some recent fixes in this regard.  If not, a ticket
might be appropriate.

Best regards,

> -------- Original-Nachricht --------
>> Datum: Wed, 08 Jun 2011 16:27:22 +0200
>> Von: Jean-Claude Repetto<jrepetto@free.fr>
>> An: Armin Burger<armin.burger@gmx.net>
>> CC: gdal-dev@lists.osgeo.org
>> Betreff: Re: [gdal-dev] gdal_translate - ECW format and non-UTM projections
>
>> Hi,
>>
>> I think there is a bug in gdalinfo, I already noticed this kind of
>> problem, for example
>> <http://osgeo-org.1803224.n2.nabble.com/gdal-dev-corner-coords-in-tif-vs-ecw-td5608144.html>
>>
>> You should file a bug at<http://trac.osgeo.org/gdal/>  .
>>
>> Jean-Claude
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jrepetto at free.fr  Wed Jun  8 11:54:44 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Jun  8 18:09:22 2011
Subject: [gdal-dev] gdal_translate - ECW format and non-UTM projections
In-Reply-To: <20110608153018.62180@gmx.net>
References: <20110608122453.139240@gmx.net> <4DEF86CA.7030202@free.fr>
	<20110608153018.62180@gmx.net>
Message-ID: <4DEF9B44.2060308@free.fr>

Le 08/06/2011 17:30, Armin Burger a ?crit :
>
> I found on my Windows installation a file "PcskeyProjDatum.dat" with a few definitions of projection and datum used but this was very limited and covered mainly UTM and NAD. Most European projections and datums were missing in this file.
>
The datum and projection definitions for ECW are stored in the 
ecw_cs.wkt file :
<http://trac.osgeo.org/gdal/export/22516/trunk/gdal/data/ecw_cs.wkt>

Jean-Claude
From armin.burger at gmx.net  Wed Jun  8 13:36:35 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Jun  8 19:56:48 2011
Subject: [gdal-dev] gdal_translate - ECW format and non-UTM projections
In-Reply-To: <4DEF98F5.2080501@pobox.com>
References: <20110608122453.139240@gmx.net>
	<4DEF86CA.7030202@free.fr>	<20110608153018.62180@gmx.net>
	<4DEF98F5.2080501@pobox.com>
Message-ID: <4DEFB323.1090809@gmx.net>

Frank, Jean-Claude,

thanks for pointing me to the ECW definitions. My main problem are 
currently the missing ETRS89/GRS80 definitions for several pan-European 
projections that are missing. Some national projections I need I could 
already identify and I will try them. If a projection is missing can I 
add it and GDAL will try to use it when reading and creating ECW files? 
Regarding the datums I guess I will be limited to the ones available in 
this list an understood by the ECW library, right?

Is there a way to update an ECW file adding this type of information via 
GDAL API functions? I know there was a Windows GUI tool from ER Mapper 
some years a go that could modify some kind of ECW header, but I would 
need to run this on at least several 100's of files, so a manual 
approach is not feasible. Or do I need to re-create all ECW's and add 
the projection options?

I will try to put together a good description for a ticket and then I 
will create one.

One funny observation I made for the mentioned case where using the ECW 
file via MapServer WMS was not applying a datum shift: I made a quick 
test defining the ECW as only source of a virtual image using the 
standard projection definition for the VRT image. Using this VRT as 
layer data source in Mapserver the datum shift was applied...

Best regards
Armin


On 08/06/2011 17:44, Frank Warmerdam wrote:
> On 11-06-08 11:30 AM, Armin Burger wrote:
>> Jean-Claude
>>
>> I guess it's not only a problem of gdalinfo but of some parts of GDAL
>> in general dealing with the ECW.
>>
>> I made some more tests and when I add the options
>> -co DATUM=WGS84 -co PROJ=NUTM32
>> to the gdal_translate call then gdalinfo identifies the coordinates
>> correctly afterwards, but then of course the whole projection is set
>> to UTM...
>>
>> It seems that the default value entered for DATUM is "RAW" and that
>> seems to cause some of the problems afterwards for GDAL. The problem
>> for me is that I need to insert the correct datum and projection using
>> the syntax of ECW, and I don't know if all available
>> datums/projections used e.g. in Europe are supported, and which syntax
>> to use for the available ones.
>>
>> I found on my Windows installation a file "PcskeyProjDatum.dat" with a
>> few definitions of projection and datum used but this was very limited
>> and covered mainly UTM and NAD. Most European projections and datums
>> were missing in this file.
>
> Armin,
>
> GDAL skips with a file data/ecw_cs.wkt that lists many ECW
> projections and datums. Perhaps it will be helpful.
>
> There are definately problems translating coordinate system
> into the ECW dictionary. A ticket for a particular case
> *might* lead to some improvement but it is an iffy process.
>
> Part of the problem in the thread mentioned by Jean-Claude
> is that when the coordinate system translation fails GDAL
> also gives up on read the georeferencing transform - or at
> least I think it used to work this way. I think there may
> have been some recent fixes in this regard. If not, a ticket
> might be appropriate.
>
> Best regards,
>
>> -------- Original-Nachricht --------
>>> Datum: Wed, 08 Jun 2011 16:27:22 +0200
>>> Von: Jean-Claude Repetto<jrepetto@free.fr>
>>> An: Armin Burger<armin.burger@gmx.net>
>>> CC: gdal-dev@lists.osgeo.org
>>> Betreff: Re: [gdal-dev] gdal_translate - ECW format and non-UTM
>>> projections
>>
>>> Hi,
>>>
>>> I think there is a bug in gdalinfo, I already noticed this kind of
>>> problem, for example
>>> <http://osgeo-org.1803224.n2.nabble.com/gdal-dev-corner-coords-in-tif-vs-ecw-td5608144.html>
>>>
>>>
>>> You should file a bug at<http://trac.osgeo.org/gdal/> .
>>>
>>> Jean-Claude
>>
>
>
From ksshannon at gmail.com  Wed Jun  8 14:10:54 2011
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Jun  8 20:33:21 2011
Subject: [gdal-dev] WMS Psuedo GetMap Request and image resolution
Message-ID: <BANLkTikO38ghU+nGt0uyDEhwg11rpdJuug@mail.gmail.com>

Hello,
I am trying to use WMS to obtain some elevation data from the USGS seamless
server.  I use the following syntax:

gdalinfo "WMS:
> http://imselev.cr.usgs.gov:80/wmsconnector/com.esri.wms.Esrimap/USGS_EDC_Elev_NED?REQUEST=GetMap&VERSION=1.1.0&LAYERS=NED.CONUS_NED&SRS=EPSG:4326&FORMAT=image/tiff&BBOX=-113.0,44.5,-112.75,44.75&WIDTH=600&HEIGHT=600
> "
>

The output is:

WMS: Opening WMS :
> <GDAL_WMS>
>   <Service name="WMS">
>     <Version>1.1.0</Version>
>     <ServerUrl>
> http://imselev.cr.usgs.gov:80/wmsconnector/com.esri.wms.Esrimap/USGS_EDC_Elev_NED
> ?</ServerUrl>
>     <Layers>NED%2ECONUS_NED</Layers>
>     <SRS>EPSG:4326</SRS>
>     <ImageFormat>image/tiff</ImageFormat>
>     <Transparent>FALSE</Transparent>
>   </Service>
>   <DataWindow>
>     <UpperLeftX>-113.0</UpperLeftX>
>     <UpperLeftY>44.75</UpperLeftY>
>     <LowerRightX>-112.75</LowerRightX>
>     <LowerRightY>44.5</LowerRightY>
>     <SizeX>1073741824</SizeX>
>     <SizeY>1073741824</SizeY>
>   </DataWindow>
>   <BandsCount>3</BandsCount>
>   <BlockSizeX>1024</BlockSizeX>
>   <BlockSizeY>1024</BlockSizeY>
>   <OverviewCount>20</OverviewCount>
> </GDAL_WMS>
>
> GDAL: GDALOpen(WMS:
> http://imselev.cr.usgs.gov:80/wmsconnector/com.esri.wms.Esrimap/USGS_EDC_Elev_NED?REQUEST=GetMap&VERSION=1.1.0&LAYERS=NED.CONUS_NED&SRS=EPSG:4326&FORMAT=image/tiff&BBOX=-113.0,44.5,-112.75,44.75&WIDTH=600&HEIGHT=600,
> this=0xf9f7e0) succeeds as WMS.
> Driver: WMS/OGC Web Map Service
> Files: none associated
> Size is 1073741824, 1073741824
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-113.000000000000000,44.750000000000000)
> Pixel Size = (0.000000000232831,-0.000000000232831)
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> OGRCT: Source: +proj=longlat +datum=WGS84 +no_defs
> OGRCT: Target: +proj=longlat +datum=WGS84 +no_defs
> Corner Coordinates:
> Upper Left  (-113.0000000,  44.7500000) (113d 0' 0.00"W, 44d45' 0.00"N)
> Lower Left  (-113.0000000,  44.5000000) (113d 0' 0.00"W, 44d30' 0.00"N)
> Upper Right (-112.7500000,  44.7500000) (112d45' 0.00"W, 44d45' 0.00"N)
> Lower Right (-112.7500000,  44.5000000) (112d45' 0.00"W, 44d30' 0.00"N)
> Center      (-112.8750000,  44.6250000) (112d52'30.00"W, 44d37'30.00"N)
> Band 1 Block=1024x1024 Type=Byte, ColorInterp=Red
>   Overviews: 536870912x536870912, 268435456x268435456, 134217728x134217728,
> 67108864x67108864, 33554432x33554432, 16777216x16777216, 8388608x8388608,
> 4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288,
> 262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384,
> 8192x8192, 4096x4096, 2048x2048, 1024x1024
> Band 2 Block=1024x1024 Type=Byte, ColorInterp=Green
>   Overviews: 536870912x536870912, 268435456x268435456, 134217728x134217728,
> 67108864x67108864, 33554432x33554432, 16777216x16777216, 8388608x8388608,
> 4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288,
> 262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384,
> 8192x8192, 4096x4096, 2048x2048, 1024x1024
> Band 3 Block=1024x1024 Type=Byte, ColorInterp=Blue
>   Overviews: 536870912x536870912, 268435456x268435456, 134217728x134217728,
> 67108864x67108864, 33554432x33554432, 16777216x16777216, 8388608x8388608,
> 4194304x4194304, 2097152x2097152, 1048576x1048576, 524288x524288,
> 262144x262144, 131072x131072, 65536x65536, 32768x32768, 16384x16384,
> 8192x8192, 4096x4096, 2048x2048, 1024x1024
> GDAL: GDALClose(WMS:
> http://imselev.cr.usgs.gov:80/wmsconnector/com.esri.wms.Esrimap/USGS_EDC_Elev_NED?REQUEST=GetMap&VERSION=1.1.0&LAYERS=NED.CONUS_NED&SRS=EPSG:4326&FORMAT=image/tiff&BBOX=-113.0,44.5,-112.75,44.75&WIDTH=600&HEIGHT=600,
> this=0xf9f7e0)
> GDAL: In GDALDestroy - unloading GDAL shared library.
>

Fair warning/apology, this is the first time I have used WMS.  But I would
think that my image would be 600x600 as specified in the request, and have a
much larger pixel resolution.  Am I doing something wrong?  Thanks.

kss

/**
 *
 * Kyle Shannon
 * ksshannon@gmail.com
 *
 */
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110608/f166ac35/attachment-0001.html
From matt.wilkie at gov.yk.ca  Wed Jun  8 15:05:26 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Jun  8 21:30:31 2011
Subject: [gdal-dev] gdalwarp: ERROR 2: Out of memory allocating {number}
 byte destination buffer.
Message-ID: <4DEFC7F6.8000908@gov.yk.ca>

Hi Folks,

Can anyone tell me what this error means and how to work around it?

Win7 x64 command shell
osgeo4w gdal 1.8
13gb ram (~4.7gb free according to Process Explorer)
121gb free on the drive (mapped to network)
20gb free on drive pointed to by %TEMP%

There are 26 input files whose size ranges from 110mb to 260mb, 
totalling 5.5gb(ftp://ftp.geomaticsyukon.ca/DEMs/CDED_50k/)

If I up GDAL_CACHEMAX and -wm to higher value, like 2048, I get the 
error on every single input file instead of just some (I'm still waiting 
for the results of not using those options at all).

-----
*gdalinfo --version
*GDAL 1.8.0, released 2011/01/12*

set .gdopt=*--config GDAL_CACHEMAX 500 -wm 500 --config bigtiff if_safer 
-multi
*set .input=*..\dem_105E.tif ..\dem_105L.tif ..\dem_105M.tif 
..\dem_105N.tif ..\dem_106C.tif ..\dem_106D.tif ..\dem_106E.tif 
..\dem_106L.tif ..\dem_115F.tif ..\dem_115G.tif ..\dem_115H.tif 
..\dem_115I.tif ..\dem_115J.tif ..\dem_115K.tif ..\dem_115N.tif 
..\dem_115O.tif ..\dem_115P.tif ..\dem_116A.tif ..\dem_116B.tif 
..\dem_116C.tif ..\dem_116F.tif ..\dem_116G.tif ..\dem_116H.tif 
..\dem_116I.tif ..\dem_116J.tif ..\dem_116K.tif

*gdalwarp  %.gdopt% -t_srs EPSG:26907 -r bilinear -tr 30 30 %.input% 
dem.tif*
Creating output file that is 15662P x 23332L.
Processing input file ..\dem_105E.tif.
Using internal nodata values (eg. -3.40282e+038) for image ..\dem_105E.tif.
0...10...20...30...40...50...60...70...80...90...100 - done./
/

    /next 7 inputs processed successfully/

Processing input file ..\dem_115F.tif.
Using internal nodata values (eg. -3.40282e+038) for image ..\dem_115F.tif.
0...10...20...30...40...50ERROR 2: Out of memory allocating 365425784 
byte destination buffer.
...60...70..Processing input file ..\dem_115G.tif.
Using internal nodata values (eg. -3.40282e+038) for image ..\dem_115G.tif.
.80...90...100 - done.
Processing input file ..\dem_115H.tif.

    /Error at 50% on dem_115f.tif, but carries on /
    /then starts a new input, dem_115g.tif, at 70%+/
    /and apparently completes 115f, or is that 115g?/
    /in any case the next tile, dem_115h, is successful: /

Processing input file ..\dem_115H.tif.
Using internal nodata values (eg. -3.40282e+038) for image ..\dem_115H.tif.
0...10...20...30...40...50...60...70...80...90...100 - done.

    /next 2 are successful,
    followed by 13 errors./

Processing input file ..\dem_116J.tif.
Using internal nodata values (eg. -3.40282e+038) for image ..\dem_116J.tif.
ERROR 2: Out of memory allocating 365425784 byte destination buffer.
Processing input file ..\dem_116K.tif.
Using internal nodata values (eg. -3.40282e+038) for image ..\dem_116K.tif.
ERROR 2: Out of memory allocating 365425784 byte destination buffer.





-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From benjamin.r.welton at wmich.edu  Wed Jun  8 15:34:19 2011
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Wed Jun  8 22:06:13 2011
Subject: [gdal-dev] gdalwarp: ERROR 2: Out of memory allocating {number}
	byte destination buffer.
In-Reply-To: <4DEFC7F6.8000908@gov.yk.ca>
References: <4DEFC7F6.8000908@gov.yk.ca>
Message-ID: <4DEFCEBB.4070507@wmich.edu>

Hey Matt,

     If i remember correctly osgeo4w is 32bit (its been a while since iv 
looked at the osgeo4w binaries however so i may be incorrect). If they 
are 32bit and you are setting -wm to 2048 (2GB) you might be having 
memory limitation issues (which i believe 2GB virtual memory for x86 
executables on windows).

Ben



On 06/08/2011 02:05 PM, Matt Wilkie wrote:
> Hi Folks,
>
> Can anyone tell me what this error means and how to work around it?
>
> Win7 x64 command shell
> osgeo4w gdal 1.8
> 13gb ram (~4.7gb free according to Process Explorer)
> 121gb free on the drive (mapped to network)
> 20gb free on drive pointed to by %TEMP%
>
> There are 26 input files whose size ranges from 110mb to 260mb, 
> totalling 5.5gb(ftp://ftp.geomaticsyukon.ca/DEMs/CDED_50k/)
>
> If I up GDAL_CACHEMAX and -wm to higher value, like 2048, I get the 
> error on every single input file instead of just some (I'm still 
> waiting for the results of not using those options at all).
>
> -----
> *gdalinfo --version
> *GDAL 1.8.0, released 2011/01/12*
>
> set .gdopt=*--config GDAL_CACHEMAX 500 -wm 500 --config bigtiff 
> if_safer -multi
> *set .input=*..\dem_105E.tif ..\dem_105L.tif ..\dem_105M.tif 
> ..\dem_105N.tif ..\dem_106C.tif ..\dem_106D.tif ..\dem_106E.tif 
> ..\dem_106L.tif ..\dem_115F.tif ..\dem_115G.tif ..\dem_115H.tif 
> ..\dem_115I.tif ..\dem_115J.tif ..\dem_115K.tif ..\dem_115N.tif 
> ..\dem_115O.tif ..\dem_115P.tif ..\dem_116A.tif ..\dem_116B.tif 
> ..\dem_116C.tif ..\dem_116F.tif ..\dem_116G.tif ..\dem_116H.tif 
> ..\dem_116I.tif ..\dem_116J.tif ..\dem_116K.tif
>
> *gdalwarp  %.gdopt% -t_srs EPSG:26907 -r bilinear -tr 30 30 %.input% 
> dem.tif*
> Creating output file that is 15662P x 23332L.
> Processing input file ..\dem_105E.tif.
> Using internal nodata values (eg. -3.40282e+038) for image 
> ..\dem_105E.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done./
> /
>
>    /next 7 inputs processed successfully/
>
> Processing input file ..\dem_115F.tif.
> Using internal nodata values (eg. -3.40282e+038) for image 
> ..\dem_115F.tif.
> 0...10...20...30...40...50ERROR 2: Out of memory allocating 365425784 
> byte destination buffer.
> ...60...70..Processing input file ..\dem_115G.tif.
> Using internal nodata values (eg. -3.40282e+038) for image 
> ..\dem_115G.tif.
> .80...90...100 - done.
> Processing input file ..\dem_115H.tif.
>
>    /Error at 50% on dem_115f.tif, but carries on /
>    /then starts a new input, dem_115g.tif, at 70%+/
>    /and apparently completes 115f, or is that 115g?/
>    /in any case the next tile, dem_115h, is successful: /
>
> Processing input file ..\dem_115H.tif.
> Using internal nodata values (eg. -3.40282e+038) for image 
> ..\dem_115H.tif.
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
>    /next 2 are successful,
>    followed by 13 errors./
>
> Processing input file ..\dem_116J.tif.
> Using internal nodata values (eg. -3.40282e+038) for image 
> ..\dem_116J.tif.
> ERROR 2: Out of memory allocating 365425784 byte destination buffer.
> Processing input file ..\dem_116K.tif.
> Using internal nodata values (eg. -3.40282e+038) for image 
> ..\dem_116K.tif.
> ERROR 2: Out of memory allocating 365425784 byte destination buffer.
>
>
>
>
>

From warmerdam at pobox.com  Wed Jun  8 15:46:59 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun  8 22:14:09 2011
Subject: [gdal-dev] gdalwarp: ERROR 2: Out of memory allocating {number}
	byte destination buffer.
In-Reply-To: <4DEFC7F6.8000908@gov.yk.ca>
References: <4DEFC7F6.8000908@gov.yk.ca>
Message-ID: <4DEFD1B3.7070707@pobox.com>

On 11-06-08 03:05 PM, Matt Wilkie wrote:
> Hi Folks,
>
> Can anyone tell me what this error means and how to work around it?
>
> Win7 x64 command shell
> osgeo4w gdal 1.8
> 13gb ram (~4.7gb free according to Process Explorer)
> 121gb free on the drive (mapped to network)
> 20gb free on drive pointed to by %TEMP%
>
> There are 26 input files whose size ranges from 110mb to 260mb, totalling
> 5.5gb(ftp://ftp.geomaticsyukon.ca/DEMs/CDED_50k/)
>
> If I up GDAL_CACHEMAX and -wm to higher value, like 2048, I get the error on
> every single input file instead of just some (I'm still waiting for the results
> of not using those options at all).
>
> -----
> *gdalinfo --version
> *GDAL 1.8.0, released 2011/01/12*
>
> set .gdopt=*--config GDAL_CACHEMAX 500 -wm 500 --config bigtiff if_safer -multi
...

> Processing input file ..\dem_115F.tif.
> Using internal nodata values (eg. -3.40282e+038) for image ..\dem_115F.tif.
> 0...10...20...30...40...50ERROR 2: Out of memory allocating 365425784 byte
> destination buffer.

Matt,

Despite being on Win7 x64 OSGeo4W is still all 32bit executables and
they operate in a 32bit process space.  My understanding is that Win32
processes are frequently subject to memory fragmentation problems and
so even in a process with - in theory - 2GB of heap RAM space available
it is still often difficult to allocate large blocks of memory.   In this
case with -wm 500 set the main warp buffers can be quite large (364MB
for one in your case) and it seems it has failed to allocate the buffer.

I imagine you will just have to use more modest buffers or else get a 64bit
executable for gdalwarp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dcole at integrity-apps.com  Wed Jun  8 15:51:56 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jun  8 22:24:37 2011
Subject: [gdal-dev] Adding jasper support to gdal build
Message-ID: <8406B84EA8899042A8508D858843972903BE0399@CHUNEX01.integrity-apps.com>

    Hello all,

i am trying to add jasper support to gdal so I can read jpeg2000 in NITF files. I downloaded the version of jasper off the site, and configured it like so:

./configure --enable-shared --prefix=/home/dcole/dump/jasper-1.900.1.uuid
make
make install

which created bin and lib folders in that directory(as well as already having the include folder there).

Then I tried to add it to gdal like so

./configure --with-jasper=/home/dcole/dump/jasper-1.900.1.uuid --prefix=/home/dcole/dump/gdal-1.8.0

However, when I run make, I am getting the following error:

/bin/sh /home/dcole/dump/gdal-1.8.0/libtool --mode=link g++  gdalinfo.lo  /home/dcole/dump/gdal-1.8.0/libgdal.la -o gdalinfo
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo  /home/dcole/dump/gdal-1.8.0/.libs/libgdal.so  -Wl,-rpath -Wl,/home/dcole/dump/gdal-1.8/lib
/home/dcole/dump/gdal-1.8.0/.libs/libgdal.so: undefined reference to `jp2_encode_uuid'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/dcole/dump/gdal-1.8.0/apps'
make: *** [apps-target] Error 2


Any ideas why this is still missing from the linkers path? Thanks

Derek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110608/44bb8657/attachment.html
From matt.wilkie at gov.yk.ca  Wed Jun  8 16:29:27 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Jun  8 22:58:37 2011
Subject: [gdal-dev] gdalwarp: ERROR 2: Out of memory allocating {number}
	byte destination buffer.
In-Reply-To: <4DEFD1B3.7070707@pobox.com>
References: <4DEFC7F6.8000908@gov.yk.ca> <4DEFD1B3.7070707@pobox.com>
Message-ID: <4DEFDBA7.1070106@gov.yk.ca>

Hi Frank,

Thanks for the clear explanation. I've added, with light editing, to 
http://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp.

> I imagine you will just have to use more modest buffers or else get a 64bit
> executable for gdalwarp.

Running gdalwarp with defaults (no options specified) seems to be 
working fine (at input #24 and no errors).

Looks like always gunning for performance can be problematic. ;-)

-matt

From dcole at integrity-apps.com  Wed Jun  8 16:59:11 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jun  8 23:30:12 2011
Subject: [gdal-dev] RE: Adding jasper support to gdal build
In-Reply-To: <8406B84EA8899042A8508D858843972903BE0399@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE0399@CHUNEX01.integrity-apps.com>
Message-ID: <8406B84EA8899042A8508D858843972903BE480D@CHUNEX01.integrity-apps.com>

I was finally able to get this to build, but I had to run configure of gdal with the --without-libtool option.

What kind of affect does this have on the software (other than having a successful, shorter build)?

I still dont quite understand what the cause was. This has enabled me to read JPEG2000 compressed nitf's, but I am having a problem that it seems to be taking forever for the files to load (10+minutes!!)

What is an alternate solution? This seems to be a ridiculous amount of read time, considering the uncompressed image of approximate the same size (pixels wise) loads very fast
________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Wednesday, June 08, 2011 3:51 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Adding jasper support to gdal build

    Hello all,

i am trying to add jasper support to gdal so I can read jpeg2000 in NITF files. I downloaded the version of jasper off the site, and configured it like so:

./configure --enable-shared --prefix=/home/dcole/dump/jasper-1.900.1.uuid
make
make install

which created bin and lib folders in that directory(as well as already having the include folder there).

Then I tried to add it to gdal like so

./configure --with-jasper=/home/dcole/dump/jasper-1.900.1.uuid --prefix=/home/dcole/dump/gdal-1.8.0

However, when I run make, I am getting the following error:

/bin/sh /home/dcole/dump/gdal-1.8.0/libtool --mode=link g++  gdalinfo.lo  /home/dcole/dump/gdal-1.8.0/libgdal.la -o gdalinfo
libtool: link: g++ .libs/gdalinfo.o -o .libs/gdalinfo  /home/dcole/dump/gdal-1.8.0/.libs/libgdal.so  -Wl,-rpath -Wl,/home/dcole/dump/gdal-1.8/lib
/home/dcole/dump/gdal-1.8.0/.libs/libgdal.so: undefined reference to `jp2_encode_uuid'
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/home/dcole/dump/gdal-1.8.0/apps'
make: *** [apps-target] Error 2


Any ideas why this is still missing from the linkers path? Thanks

Derek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110608/9c288afa/attachment-0001.html
From jrepetto at free.fr  Wed Jun  8 16:59:34 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Jun  8 23:30:40 2011
Subject: [gdal-dev] gdal_translate - ECW format and non-UTM projections
In-Reply-To: <4DEFB323.1090809@gmx.net>
References: <20110608122453.139240@gmx.net>	<4DEF86CA.7030202@free.fr>	<20110608153018.62180@gmx.net>	<4DEF98F5.2080501@pobox.com>
	<4DEFB323.1090809@gmx.net>
Message-ID: <4DEFE2B6.2070402@free.fr>

On 06/08/11 19:36, Armin Burger wrote:
> thanks for pointing me to the ECW definitions. My main problem are
> currently the missing ETRS89/GRS80 definitions for several pan-European
> projections that are missing. Some national projections I need I could
> already identify and I will try them. If a projection is missing can I
> add it and GDAL will try to use it when reading and creating ECW files?
> Regarding the datums I guess I will be limited to the ones available in
> this list an understood by the ECW library, right?

No, you can add datums and projections to the ecw_cs.wkt file, and GDAL 
will recognize them.
Then, you can submit a patch, like I did a few months ago to add french 
datums and projections (see <http://trac.osgeo.org/gdal/ticket/3868>).
>
> Is there a way to update an ECW file adding this type of information via
> GDAL API functions? I know there was a Windows GUI tool from ER Mapper
> some years a go that could modify some kind of ECW header, but I would
> need to run this on at least several 100's of files, so a manual
> approach is not feasible. Or do I need to re-create all ECW's and add
> the projection options?

The "ECW Header Editor" is still available from Erdas : 
<http://erdas.com/products/ERDASAPOLLO/ERDASAPOLLOEssentials-ImageWebServer/Downloads.aspx>
ER Mapper was also providing a command line tool that you could use in a 
script, but I don't know if it is still available. (The URL was 
<http://www.ermapper.com.au/downloads/ecwheader.zip> , but it is not 
working at this time). If not, you can try a small command line utility 
I wrote a few years ago (<http://jrepetto.free.fr/ecwhed/>), but you'll 
have to compile it for Windows.

Jean-Claude
From alexmantaut at suremptec.com.ar  Wed Jun  8 17:19:36 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Wed Jun  8 23:51:50 2011
Subject: [gdal-dev] HDF5 COSMO-SKYMED metadata problems
In-Reply-To: <BANLkTimkKFN29EkLebbu57ROL3BAOQQQ+A@mail.gmail.com>
References: <BANLkTikLi-g52F_TD8s790OPJK9G1w=qAg@mail.gmail.com>
	<4DEE6CF5.4050506@tiscali.it>
	<BANLkTimkKFN29EkLebbu57ROL3BAOQQQ+A@mail.gmail.com>
Message-ID: <BANLkTikGrBP0Od58Jtu=tRd_+ZxQMzs96A@mail.gmail.com>

I tried the patch warmerdam posted on the 1.8.0 version an it worked, i can
see the root metadata now.
Thanks Antonio Valentino and Frank Warmerdam for the swift correction.

Another issue. Does anybody has the COSMO-SKYMED HDF5



2011/6/7 Alex Mantaut <alexmantaut@suremptec.com.ar>

> Antonio:
>            Thanks for the swift answer. I've tried to apply the patch to
> gdal 1.8 but it fails on the 5? chunk (hdf5dataset.cpp from line  598)
>            I looked at the code and it seems significantly diffrent
> (perhaps this class was modified since the patch was released a year ago?)
>             Can you release a newer version of the patch please?
>
>  Vi ringrazio un'altra volta
>
>  2011/6/7 Antonio Valentino <antonio.valentino@tiscali.it>
>
>> Hi Alex,
>>
>> Il 07/06/2011 20:13, Alex Mantaut ha scritto:
>> > Hi:
>> >
>> > I'm trying to get georreference information from an HDF5 COSMO-SKYMED
>> file.
>> >
>> > I used HDFView to see the file's metadata and found that in this type of
>> > HDF5 files the georreference information is stored in the metadata
>> > corresponding to the "root" of the file.
>> >
>> > The problem is that when i try to use gdalinfo to get the file's
>> metadata,
>> > it shows the metadata asociated to all the subdatasets included on the
>> file,
>> > but not the root's metadata...
>> >
>> > My cuestions: How do i get the metadata asociated to the "root" of the
>> file?
>> > Is there a better way to get georreference from COSMO-SKYMED HDF5 files?
>> >
>> > Thanks in advance
>>
>> Ticket #2412 [1] has an associated patch that could be useful in your
>> case (i.e for retrieving metadata associated to the root group).
>>
>> [1] http://trac.osgeo.org/gdal/ticket/2412
>>
>> ciao
>>
>> --
>> Antonio Valentino
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> --
>      Alex Mantaut
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345  Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> javierurien@suremptec.com.ar
> www.suremptec.com
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
javierurien@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110608/63e716c7/attachment.html
From greenberg at ucdavis.edu  Wed Jun  8 17:20:53 2011
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Wed Jun  8 23:53:12 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best practices?)
Message-ID: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>

Folks:

I am using a piece of software which is relying on an older version of GDAL
that doesn't have the "fix" to deal with > 8 bit geotiffs (it is trying to
make a jpeg overlay but can't from a 16 bit image.  I think this is the
issue: http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but when I do a
straight convert (-ot Byte) the output image looks really washed out.  Any
hints for getting the best quality output from a 16 bit to to an 8 bit
conversion of a Geotiff?

--j

-- 
Jonathan A. Greenberg, PhD
Assistant Project Scientist
Center for Spatial Technologies and Remote Sensing (CSTARS)
Department of Land, Air and Water Resources
University of California, Davis
One Shields Avenue
Davis, CA 95616
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110608/f21d6df4/attachment.html
From woodbri at swoodbridge.com  Wed Jun  8 17:19:54 2011
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Jun  8 23:56:22 2011
Subject: [gdal-dev] installing ogrsf_frmts include files
Message-ID: <4DEFE77A.2080107@swoodbridge.com>

Hi Frank et al,

Is there a way to install the ogrsf_frmts include files short of just 
manually copy the files. OpenGraphRouter is using some of these in C++ 
to create geometries. Specifically:

   ogrsf_frmts/shape/shapefil.h
   ogrsf_frmts/kml/ogr_kml.h

and maybe some others. Since these are not normally installed, I'm 
assuming this is a bad thing that we are trying to use them and should 
look at some other way of defining our geometries because these are not 
intended as public api and are subject change.

Thoughts? Suggestions welcome.

Thanks,
   -Steve
From alexmantaut at suremptec.com.ar  Wed Jun  8 17:23:59 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Wed Jun  8 23:56:30 2011
Subject: [gdal-dev] HDF5 COSMO-SKYMED metadata problems
In-Reply-To: <BANLkTikGrBP0Od58Jtu=tRd_+ZxQMzs96A@mail.gmail.com>
References: <BANLkTikLi-g52F_TD8s790OPJK9G1w=qAg@mail.gmail.com>
	<4DEE6CF5.4050506@tiscali.it>
	<BANLkTimkKFN29EkLebbu57ROL3BAOQQQ+A@mail.gmail.com>
	<BANLkTikGrBP0Od58Jtu=tRd_+ZxQMzs96A@mail.gmail.com>
Message-ID: <BANLkTinT0Xtm6uoiUKfNS2aG+c+NTRQ6FQ@mail.gmail.com>

Sorry, I accidental?y pressed the "send" button

Another issue. Does anybody has the COSMO-SKYMED HDF5 format specification
or something that tells how to get the georreference information from those
files?



2011/6/8 Alex Mantaut <alexmantaut@suremptec.com.ar>

> I tried the patch warmerdam posted on the 1.8.0 version an it worked, i can
> see the root metadata now.
> Thanks Antonio Valentino and Frank Warmerdam for the swift correction.
>
> Another issue. Does anybody has the COSMO-SKYMED HDF5
>
>
>
> 2011/6/7 Alex Mantaut <alexmantaut@suremptec.com.ar>
>
>> Antonio:
>>            Thanks for the swift answer. I've tried to apply the patch to
>> gdal 1.8 but it fails on the 5? chunk (hdf5dataset.cpp from line  598)
>>            I looked at the code and it seems significantly diffrent
>> (perhaps this class was modified since the patch was released a year ago?)
>>             Can you release a newer version of the patch please?
>>
>>  Vi ringrazio un'altra volta
>>
>>  2011/6/7 Antonio Valentino <antonio.valentino@tiscali.it>
>>
>>> Hi Alex,
>>>
>>> Il 07/06/2011 20:13, Alex Mantaut ha scritto:
>>> > Hi:
>>> >
>>> > I'm trying to get georreference information from an HDF5 COSMO-SKYMED
>>> file.
>>> >
>>> > I used HDFView to see the file's metadata and found that in this type
>>> of
>>> > HDF5 files the georreference information is stored in the metadata
>>> > corresponding to the "root" of the file.
>>> >
>>> > The problem is that when i try to use gdalinfo to get the file's
>>> metadata,
>>> > it shows the metadata asociated to all the subdatasets included on the
>>> file,
>>> > but not the root's metadata...
>>> >
>>> > My cuestions: How do i get the metadata asociated to the "root" of the
>>> file?
>>> > Is there a better way to get georreference from COSMO-SKYMED HDF5
>>> files?
>>> >
>>> > Thanks in advance
>>>
>>> Ticket #2412 [1] has an associated patch that could be useful in your
>>> case (i.e for retrieving metadata associated to the root group).
>>>
>>> [1] http://trac.osgeo.org/gdal/ticket/2412
>>>
>>> ciao
>>>
>>> --
>>> Antonio Valentino
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> --
>>      Alex Mantaut
>> SUR Emprendimientos Tecnol?gicos
>>
>> Per? 345  Piso 5to Oficina "B" (C1067AAG)
>> Ciudad de Buenos Aires, Argentina
>> Tel. +54 (11) 4342-2976/84
>> javierurien@suremptec.com.ar
>> www.suremptec.com
>>
>
>
>
> --
> --
>      Alex Mantaut
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345  Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> javierurien@suremptec.com.ar
> www.suremptec.com
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
javierurien@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110608/5435aea9/attachment.html
From nhatzop at gmail.com  Wed Jun  8 19:10:16 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Thu Jun  9 01:48:28 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
Message-ID: <BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>

why you don't try rgb2pct http://www.gdal.org/rgb2pct.html?

--Nikos Hatzopoulos

On Wed, Jun 8, 2011 at 2:20 PM, Jonathan Greenberg <greenberg@ucdavis.edu>wrote:

> Folks:
>
> I am using a piece of software which is relying on an older version of GDAL
> that doesn't have the "fix" to deal with > 8 bit geotiffs (it is trying to
> make a jpeg overlay but can't from a 16 bit image.  I think this is the
> issue: http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but when I do a
> straight convert (-ot Byte) the output image looks really washed out.  Any
> hints for getting the best quality output from a 16 bit to to an 8 bit
> conversion of a Geotiff?
>
> --j
>
> --
> Jonathan A. Greenberg, PhD
> Assistant Project Scientist
> Center for Spatial Technologies and Remote Sensing (CSTARS)
> Department of Land, Air and Water Resources
> University of California, Davis
> One Shields Avenue
> Davis, CA 95616
> Phone: 415-763-5476
> AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110608/6a8ed8fd/attachment-0001.html
From greenberg at ucdavis.edu  Wed Jun  8 22:31:09 2011
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Thu Jun  9 05:20:25 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
	<BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
Message-ID: <BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>

Nikos and GDALers:

This is CLOSE to what I'm looking to do, but I'm having a hard time getting
it working properly.  Here's my input dataset gdalinfo dump:

***

Driver: ENVI/ENVI .hdr Labelled
Files: 10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.envi
       10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.hdr
Size is 42255, 51712
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
Origin = (-120.066479999999999,39.271554000000002)
Pixel Size = (0.000004500000005,-0.000004500000005)
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-120.0664800,  39.2715540) (120d 3'59.33"W, 39d16'17.59"N)
Lower Left  (-120.0664800,  39.0388500) (120d 3'59.33"W, 39d 2'19.86"N)
Upper Right (-119.8763325,  39.2715540) (119d52'34.80"W, 39d16'17.59"N)
Lower Right (-119.8763325,  39.0388500) (119d52'34.80"W, 39d 2'19.86"N)
Center      (-119.9714062,  39.1552020) (119d58'17.06"W, 39d 9'18.73"N)
Band 1 Block=42255x1 Type=UInt16, ColorInterp=Undefined
Band 2 Block=42255x1 Type=UInt16, ColorInterp=Undefined
Band 3 Block=42255x1 Type=UInt16, ColorInterp=Undefined

***

I need to end up with a Byte TIF image with good color balance from this
input.  Running rgb2pct.py on this dataset just outputted a "blank" (grey)
image.  Running gdal_translate -of GTiff -ot Byte -scale [min] [max] worked
somewhat, but its near impossible to get this looking right, since the
scaling I want to do differs from band to band (e.g. if there any way to use
-scale to adjust each band separately)?  Alternatively, how would I get
rgb2pct.py working on the above image correctly?  Thanks!

--j


On Wed, Jun 8, 2011 at 4:10 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:

> why you don't try rgb2pct http://www.gdal.org/rgb2pct.html?
>
> --Nikos Hatzopoulos
>
> On Wed, Jun 8, 2011 at 2:20 PM, Jonathan Greenberg <greenberg@ucdavis.edu>wrote:
>
>> Folks:
>>
>> I am using a piece of software which is relying on an older version of
>> GDAL that doesn't have the "fix" to deal with > 8 bit geotiffs (it is trying
>> to make a jpeg overlay but can't from a 16 bit image.  I think this is the
>> issue: http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but when I do a
>> straight convert (-ot Byte) the output image looks really washed out.  Any
>> hints for getting the best quality output from a 16 bit to to an 8 bit
>> conversion of a Geotiff?
>>
>> --j
>>
>> --
>> Jonathan A. Greenberg, PhD
>> Assistant Project Scientist
>> Center for Spatial Technologies and Remote Sensing (CSTARS)
>> Department of Land, Air and Water Resources
>> University of California, Davis
>> One Shields Avenue
>> Davis, CA 95616
>> Phone: 415-763-5476
>> AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Jonathan A. Greenberg, PhD
Assistant Project Scientist
Center for Spatial Technologies and Remote Sensing (CSTARS)
Department of Land, Air and Water Resources
University of California, Davis
One Shields Avenue
Davis, CA 95616
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110608/698a77eb/attachment.html
From rush at winkey.org  Thu Jun  9 00:45:46 2011
From: rush at winkey.org (Brian Case)
Date: Thu Jun  9 07:42:45 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
	<BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
	<BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>
Message-ID: <1307594746.3639.19.camel@octopi>

Jonathan

you can do scaling on individual bands.

gdal_translate -b 1 -scale 0 5000 -ot Byte -of VRT infile outfile1.vrt
gdal_translate -b 2 -scale 0 4000 -ot Byte -of VRT infile outfile2.vrt
gdal_translate -b 3 -scale 0 3000 -ot Byte -of VRT infile outfile3.vrt

gdalbuildvrt -separate output.vrt outfile1.vrt outfile2.vrt outfile3.vrt

gdal_translate -of gtiff output.vrt output.tif



for more complicated scaling you may need to hand write a vrt

http://www.gdal.org/gdal_vrttut.html

Brian

On Wed, 2011-06-08 at 19:31 -0700, Jonathan Greenberg wrote:
> Nikos and GDALers:
> 
> 
> This is CLOSE to what I'm looking to do, but I'm having a hard time
> getting it working properly.  Here's my input dataset gdalinfo dump:
> 
> 
> ***
> 
> 
> Driver: ENVI/ENVI .hdr Labelled
> Files: 10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.envi
>        10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.hdr
> Size is 42255, 51712
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-120.066479999999999,39.271554000000002)
> Pixel Size = (0.000004500000005,-0.000004500000005)
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-120.0664800,  39.2715540) (120d 3'59.33"W,
> 39d16'17.59"N)
> Lower Left  (-120.0664800,  39.0388500) (120d 3'59.33"W, 39d
> 2'19.86"N)
> Upper Right (-119.8763325,  39.2715540) (119d52'34.80"W,
> 39d16'17.59"N)
> Lower Right (-119.8763325,  39.0388500) (119d52'34.80"W, 39d
> 2'19.86"N)
> Center      (-119.9714062,  39.1552020) (119d58'17.06"W, 39d
> 9'18.73"N)
> Band 1 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> Band 2 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> Band 3 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> 
> 
> ***
> 
> 
> I need to end up with a Byte TIF image with good color balance from
> this input.  Running rgb2pct.py on this dataset just outputted a
> "blank" (grey) image.  Running gdal_translate -of GTiff -ot Byte
> -scale [min] [max] worked somewhat, but its near impossible to get
> this looking right, since the scaling I want to do differs from band
> to band (e.g. if there any way to use -scale to adjust each band
> separately)?  Alternatively, how would I get rgb2pct.py working on the
> above image correctly?  Thanks!
> 
> 
> --j
> 
> 
> 
> On Wed, Jun 8, 2011 at 4:10 PM, Nikolaos Hatzopoulos
> <nhatzop@gmail.com> wrote:
>         why you don't try rgb2pct http://www.gdal.org/rgb2pct.html?
>         
>         --Nikos Hatzopoulos
>         
>         
>         On Wed, Jun 8, 2011 at 2:20 PM, Jonathan Greenberg
>         <greenberg@ucdavis.edu> wrote:
>         
>                 
>                 Folks:
>                 
>                 
>                 I am using a piece of software which is relying on an
>                 older version of GDAL that doesn't have the "fix" to
>                 deal with > 8 bit geotiffs (it is trying to make a
>                 jpeg overlay but can't from a 16 bit image.  I think
>                 this is the issue:
>                 http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but
>                 when I do a straight convert (-ot Byte) the output
>                 image looks really washed out.  Any hints for getting
>                 the best quality output from a 16 bit to to an 8 bit
>                 conversion of a Geotiff?   
>                 
>                 
>                 --j
>                 
>                 -- 
>                 Jonathan A. Greenberg, PhD
>                 Assistant Project Scientist
>                 Center for Spatial Technologies and Remote Sensing
>                 (CSTARS)
>                 Department of Land, Air and Water Resources
>                 University of California, Davis
>                 One Shields Avenue
>                 Davis, CA 95616
>                 Phone: 415-763-5476
>                 AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
>                 
>                 
>                 
>                 
>                 _______________________________________________
>                 gdal-dev mailing list
>                 gdal-dev@lists.osgeo.org
>                 http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
> 
> 
> 
> -- 
> Jonathan A. Greenberg, PhD
> Assistant Project Scientist
> Center for Spatial Technologies and Remote Sensing (CSTARS)
> Department of Land, Air and Water Resources
> University of California, Davis
> One Shields Avenue
> Davis, CA 95616
> Phone: 415-763-5476
> AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From antonio.valentino at tiscali.it  Thu Jun  9 03:37:02 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Jun  9 10:43:37 2011
Subject: [gdal-dev] HDF5 COSMO-SKYMED metadata problems
In-Reply-To: <BANLkTinT0Xtm6uoiUKfNS2aG+c+NTRQ6FQ@mail.gmail.com>
References: <BANLkTikLi-g52F_TD8s790OPJK9G1w=qAg@mail.gmail.com>
	<4DEE6CF5.4050506@tiscali.it>
	<BANLkTimkKFN29EkLebbu57ROL3BAOQQQ+A@mail.gmail.com>
	<BANLkTikGrBP0Od58Jtu=tRd_+ZxQMzs96A@mail.gmail.com>
	<BANLkTinT0Xtm6uoiUKfNS2aG+c+NTRQ6FQ@mail.gmail.com>
Message-ID: <20110609093702.23f97dff@asigrid01>

Hi Alex,
sorry for not responding before but I was a little busy yesterday.
Also a big thank you to Frank for updating the HDF5 driver.


Il giorno Wed, 8 Jun 2011 18:23:59 -0300
Alex Mantaut <alexmantaut@suremptec.com.ar> ha scritto:

> Sorry, I accidental?y pressed the "send" button
> 
> Another issue. Does anybody has the COSMO-SKYMED HDF5 format
> specification or something that tells how to get the georreference
> information from those files?
> 

COSMO SkyMed handbook:
http://www.e-geos.it/products/pdf/csk-product%20handbook.pdf

Other relevant docs:
http://www.e-geos.it/products/cosmo.html

Demo Products:
http://www.e-geos.it/products/demos.html


> 
> 2011/6/8 Alex Mantaut <alexmantaut@suremptec.com.ar>
> 
> > I tried the patch warmerdam posted on the 1.8.0 version an it
> > worked, i can see the root metadata now.
> > Thanks Antonio Valentino and Frank Warmerdam for the swift
> > correction.
> >
> > Another issue. Does anybody has the COSMO-SKYMED HDF5
> >
> >
> >
> > 2011/6/7 Alex Mantaut <alexmantaut@suremptec.com.ar>
> >
> >> Antonio:
> >>            Thanks for the swift answer. I've tried to apply the
> >> patch to gdal 1.8 but it fails on the 5? chunk (hdf5dataset.cpp
> >> from line  598) I looked at the code and it seems significantly
> >> diffrent (perhaps this class was modified since the patch was
> >> released a year ago?) Can you release a newer version of the patch
> >> please?
> >>
> >>  Vi ringrazio un'altra volta
> >>
> >>  2011/6/7 Antonio Valentino <antonio.valentino@tiscali.it>
> >>
> >>> Hi Alex,
> >>>
> >>> Il 07/06/2011 20:13, Alex Mantaut ha scritto:
> >>> > Hi:
> >>> >
> >>> > I'm trying to get georreference information from an HDF5
> >>> > COSMO-SKYMED
> >>> file.
> >>> >
> >>> > I used HDFView to see the file's metadata and found that in
> >>> > this type
> >>> of
> >>> > HDF5 files the georreference information is stored in the
> >>> > metadata corresponding to the "root" of the file.
> >>> >
> >>> > The problem is that when i try to use gdalinfo to get the file's
> >>> metadata,
> >>> > it shows the metadata asociated to all the subdatasets included
> >>> > on the
> >>> file,
> >>> > but not the root's metadata...
> >>> >
> >>> > My cuestions: How do i get the metadata asociated to the "root"
> >>> > of the
> >>> file?
> >>> > Is there a better way to get georreference from COSMO-SKYMED
> >>> > HDF5
> >>> files?
> >>> >
> >>> > Thanks in advance
> >>>
> >>> Ticket #2412 [1] has an associated patch that could be useful in
> >>> your case (i.e for retrieving metadata associated to the root
> >>> group).
> >>>
> >>> [1] http://trac.osgeo.org/gdal/ticket/2412
> >>>
> >>> ciao


regards

-- 
Antonio Valentino
From jorge.arevalo at deimos-space.com  Thu Jun  9 06:01:06 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Thu Jun  9 13:16:04 2011
Subject: [gdal-dev] Combine tiles
Message-ID: <BANLkTinwL+Y7rWSsUPBU3JRWr-zKr=N92w@mail.gmail.com>

Hello,

I've executed gdal2tiles against 2 raster coverages:

- One big raster coverage, composed by several TIFF files. Example of
tile: http://dl.dropbox.com/u/6599273/319.png
- One single TIFF file, geographically placed inside the coverage
above, but that wasn't procesed in the previous step. Example of tile:
http://dl.dropbox.com/u/6599273/319_bis.png

So, I first executed gdal2tiles against a "puzzle" of TIFF files, with
a missing piece, and then I executed gdal2tiles against that single
missing piece. I want to merge both tiles set. Zoom levels were 4-14,
only Google Maps output. Only levels 4-12 have the problem (tiles with
the same coords).

Is there any way of merging tiles or should I execute gdal2tiles
against the whole "puzzle"?

Thanks in advance, and best regards

-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From chaitanya.ch at gmail.com  Thu Jun  9 08:29:00 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jun  9 15:51:48 2011
Subject: [gdal-dev] Combine tiles
In-Reply-To: <BANLkTinwL+Y7rWSsUPBU3JRWr-zKr=N92w@mail.gmail.com>
References: <BANLkTinwL+Y7rWSsUPBU3JRWr-zKr=N92w@mail.gmail.com>
Message-ID: <BANLkTikw0_1h37p58AiYSGHR=MTQ6sKg5g@mail.gmail.com>

Jorge,

You will need a script that merges individual tiles that are on the common
border of the original TIFFs. Executing gdal2tiles on the whole 'puzzle'
will save you the time to write the script.

2011/6/9 Jorge Ar?valo <jorge.arevalo@deimos-space.com>

> Hello,
>
> I've executed gdal2tiles against 2 raster coverages:
>
> - One big raster coverage, composed by several TIFF files. Example of
> tile: http://dl.dropbox.com/u/6599273/319.png
> - One single TIFF file, geographically placed inside the coverage
> above, but that wasn't procesed in the previous step. Example of tile:
> http://dl.dropbox.com/u/6599273/319_bis.png
>
> So, I first executed gdal2tiles against a "puzzle" of TIFF files, with
> a missing piece, and then I executed gdal2tiles against that single
> missing piece. I want to merge both tiles set. Zoom levels were 4-14,
> only Google Maps output. Only levels 4-12 have the problem (tiles with
> the same coords).
>
> Is there any way of merging tiles or should I execute gdal2tiles
> against the whole "puzzle"?
>
> Thanks in advance, and best regards
>
> --
> Jorge Ar?valo
> Internet & Mobilty Division, DEIMOS
> jorge.arevalo@deimos-space.com
> http://es.linkedin.com/in/jorgearevalo80
> http://mobility.grupodeimos.com/
> http://gis4free.wordpress.com
> http://geohash.org/ezjqgrgzz0g
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110609/10a39b92/attachment.html
From jorge.arevalo at deimos-space.com  Thu Jun  9 09:11:47 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Thu Jun  9 16:37:25 2011
Subject: [gdal-dev] Combine tiles
In-Reply-To: <BANLkTikw0_1h37p58AiYSGHR=MTQ6sKg5g@mail.gmail.com>
References: <BANLkTinwL+Y7rWSsUPBU3JRWr-zKr=N92w@mail.gmail.com>
	<BANLkTikw0_1h37p58AiYSGHR=MTQ6sKg5g@mail.gmail.com>
Message-ID: <BANLkTi=TN7xwtBkD_fU9DrMXX6Kf+iBBbA@mail.gmail.com>

2011/6/9 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> Jorge,
>
> You will need a script that merges individual tiles that are on the common
> border of the original TIFFs. Executing gdal2tiles on the whole 'puzzle'
> will save you the time to write the script.
>

Yes, but I wanted to know if that scripts exists, to avoid running
gdal2tiles again, or writing the script myself. I guess not :-(

Thanks!

Jorge


> 2011/6/9 Jorge Ar?valo <jorge.arevalo@deimos-space.com>
>>
>> Hello,
>>
>> I've executed gdal2tiles against 2 raster coverages:
>>
>> - One big raster coverage, composed by several TIFF files. Example of
>> tile: http://dl.dropbox.com/u/6599273/319.png
>> - One single TIFF file, geographically placed inside the coverage
>> above, but that wasn't procesed in the previous step. Example of tile:
>> http://dl.dropbox.com/u/6599273/319_bis.png
>>
>> So, I first executed gdal2tiles against a "puzzle" of TIFF files, with
>> a missing piece, and then I executed gdal2tiles against that single
>> missing piece. I want to merge both tiles set. Zoom levels were 4-14,
>> only Google Maps output. Only levels 4-12 have the problem (tiles with
>> the same coords).
>>
>> Is there any way of merging tiles or should I execute gdal2tiles
>> against the whole "puzzle"?
>>
>> Thanks in advance, and best regards
>>
>> --
>> Jorge Ar?valo
>> Internet & Mobilty Division, DEIMOS
>> jorge.arevalo@deimos-space.com
>> http://es.linkedin.com/in/jorgearevalo80
>> http://mobility.grupodeimos.com/
>> http://gis4free.wordpress.com
>> http://geohash.org/ezjqgrgzz0g
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Jorge Ar?valo
Internet & Mobilty Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From warmerdam at pobox.com  Thu Jun  9 09:53:03 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun  9 17:20:35 2011
Subject: [gdal-dev] installing ogrsf_frmts include files
In-Reply-To: <4DEFE77A.2080107@swoodbridge.com>
References: <4DEFE77A.2080107@swoodbridge.com>
Message-ID: <4DF0D03F.9000406@pobox.com>

On 11-06-08 05:19 PM, Stephen Woodbridge wrote:
> Hi Frank et al,
>
> Is there a way to install the ogrsf_frmts include files short of just manually
> copy the files. OpenGraphRouter is using some of these in C++ to create
> geometries. Specifically:
>
> ogrsf_frmts/shape/shapefil.h
> ogrsf_frmts/kml/ogr_kml.h
>
> and maybe some others. Since these are not normally installed, I'm assuming
> this is a bad thing that we are trying to use them and should look at some
> other way of defining our geometries because these are not intended as public
> api and are subject change.

Steve,

Well, these are essentially private include files and I'm not likely to
sanction installing them as part of the normal GDAL install.

I am not sure what you use out of ogr_kml.h but I will note there is
a public exporttoKML() method on OGRGeometry which you can use without
including ogr_kml.h.  That doesn't handle the whole feature, but it does
handle the trickiest part.

Likewise I'm not sure why you use shapefil.h directly instead of managing
shapefiles through the OGR API.  Perhaps that could be investigated.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at opengeo.org  Thu Jun  9 10:33:24 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu Jun  9 18:03:10 2011
Subject: [gdal-dev] Encoding (FGDB)
Message-ID: <BANLkTikid-GALJHWDHWvGqy9UhMSw15v6w@mail.gmail.com>

So, the FGDB API works with (mostly) UTF16-encoded wide characters (wstring).

What is the GDAL internal standard for string encoding? Looks like
(from the OLCStringsAsUTF8 capability) there is at least a loose
standard that is looking for UTF8 narrow characters. Are there any
existing utilities for conversion from UTF16 to UTF8 and vice versa in
GDAL/OGR? We have a string2wstring function in the early FGDB code,
but as far as I can tell it is just narrowing/widening the characters,
and any non-ASCII characters would probably get screwed on the way
through.

P.
From mateusz at loskot.net  Thu Jun  9 11:01:02 2011
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jun  9 18:32:14 2011
Subject: [gdal-dev] Encoding (FGDB)
In-Reply-To: <BANLkTikid-GALJHWDHWvGqy9UhMSw15v6w@mail.gmail.com>
References: <BANLkTikid-GALJHWDHWvGqy9UhMSw15v6w@mail.gmail.com>
Message-ID: <4DF0E02E.30205@loskot.net>

On 09/06/11 15:33, Paul Ramsey wrote:
> UTF16-encoded wide characters (wstring).

Type of element of std::wstring is wchar_t.
Size of wchar_t is implementation defined, usually 2 or 4 bytes.
Thus, wstring does not guarantee UTF-16.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
Member of ACCU, http://accu.org
From woodbri at swoodbridge.com  Thu Jun  9 11:11:12 2011
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Thu Jun  9 18:46:54 2011
Subject: [gdal-dev] installing ogrsf_frmts include files
In-Reply-To: <4DF0D03F.9000406@pobox.com>
References: <4DEFE77A.2080107@swoodbridge.com> <4DF0D03F.9000406@pobox.com>
Message-ID: <4DF0E290.1010308@swoodbridge.com>

On 6/9/2011 9:53 AM, Frank Warmerdam wrote:
> On 11-06-08 05:19 PM, Stephen Woodbridge wrote:
>> Hi Frank et al,
>>
>> Is there a way to install the ogrsf_frmts include files short of just
>> manually
>> copy the files. OpenGraphRouter is using some of these in C++ to create
>> geometries. Specifically:
>>
>> ogrsf_frmts/shape/shapefil.h
>> ogrsf_frmts/kml/ogr_kml.h
>>
>> and maybe some others. Since these are not normally installed, I'm
>> assuming
>> this is a bad thing that we are trying to use them and should look at
>> some
>> other way of defining our geometries because these are not intended as
>> public
>> api and are subject change.
>
> Steve,
>
> Well, these are essentially private include files and I'm not likely to
> sanction installing them as part of the normal GDAL install.
>
> I am not sure what you use out of ogr_kml.h but I will note there is
> a public exporttoKML() method on OGRGeometry which you can use without
> including ogr_kml.h. That doesn't handle the whole feature, but it does
> handle the trickiest part.
>
> Likewise I'm not sure why you use shapefil.h directly instead of managing
> shapefiles through the OGR API. Perhaps that could be investigated.
>
> Best regards,

Frank,

Thanks! I think we are on the same page with this stuff. I'll pass this 
problem back to Ashraf and hopefully he can clean up the code and 
dependencies.

I think that he needed some internal geometry representations and just 
used these because they were handy. If he is moving this data through 
OGR then we should be using only the OGR API. If this is just for our 
own internal use then we should create private includes that meet our needs.

I just wanted to make sure I was not missing something.

Roni - please look into this. We should discuss this and make changes as 
appropriate.

Thanks,
   -Steve
From warmerdam at pobox.com  Thu Jun  9 11:26:01 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun  9 18:58:22 2011
Subject: [gdal-dev] Encoding (FGDB)
In-Reply-To: <BANLkTikid-GALJHWDHWvGqy9UhMSw15v6w@mail.gmail.com>
References: <BANLkTikid-GALJHWDHWvGqy9UhMSw15v6w@mail.gmail.com>
Message-ID: <4DF0E609.7010200@pobox.com>

On 11-06-09 10:33 AM, Paul Ramsey wrote:
> So, the FGDB API works with (mostly) UTF16-encoded wide characters (wstring).
>
> What is the GDAL internal standard for string encoding? Looks like
> (from the OLCStringsAsUTF8 capability) there is at least a loose
> standard that is looking for UTF8 narrow characters. Are there any
> existing utilities for conversion from UTF16 to UTF8 and vice versa in
> GDAL/OGR? We have a string2wstring function in the early FGDB code,
> but as far as I can tell it is just narrowing/widening the characters,
> and any non-ASCII characters would probably get screwed on the way
> through.

Paul,

Yes, the standard for handling this is to translate to UTF8 as discussed
in:

   http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode

To convert from UTF16 to UTF8 use CPLRecodeFromWChar() like:

   const char *pszUTF8 =
      CPLRecodeFromWChar( pwszUTF16, CPL_ENC_UCS2, CPL_ENC_UTF8 );

Make sure you CPLFree( pszUTF8 ) when you are done with it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at cleverelephant.ca  Thu Jun  9 12:16:54 2011
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu Jun  9 19:51:56 2011
Subject: [gdal-dev] Encoding (FGDB)
In-Reply-To: <4DF0E609.7010200@pobox.com>
References: <BANLkTikid-GALJHWDHWvGqy9UhMSw15v6w@mail.gmail.com>
	<4DF0E609.7010200@pobox.com>
Message-ID: <BANLkTikSgnM-6B1tng8DkoUpZRhr2H6Gow@mail.gmail.com>

Awesome, exactly what I hoped! Thanks Frank.
P

On Thu, Jun 9, 2011 at 11:26 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 11-06-09 10:33 AM, Paul Ramsey wrote:
>>
>> So, the FGDB API works with (mostly) UTF16-encoded wide characters
>> (wstring).
>>
>> What is the GDAL internal standard for string encoding? Looks like
>> (from the OLCStringsAsUTF8 capability) there is at least a loose
>> standard that is looking for UTF8 narrow characters. Are there any
>> existing utilities for conversion from UTF16 to UTF8 and vice versa in
>> GDAL/OGR? We have a string2wstring function in the early FGDB code,
>> but as far as I can tell it is just narrowing/widening the characters,
>> and any non-ASCII characters would probably get screwed on the way
>> through.
>
> Paul,
>
> Yes, the standard for handling this is to translate to UTF8 as discussed
> in:
>
> ?http://trac.osgeo.org/gdal/wiki/rfc23_ogr_unicode
>
> To convert from UTF16 to UTF8 use CPLRecodeFromWChar() like:
>
> ?const char *pszUTF8 =
> ? ? CPLRecodeFromWChar( pwszUTF16, CPL_ENC_UCS2, CPL_ENC_UTF8 );
>
> Make sure you CPLFree( pszUTF8 ) when you are done with it.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From alexandre.gacon+gdal at gmail.com  Thu Jun  9 15:28:11 2011
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Thu Jun  9 23:13:45 2011
Subject: [gdal-dev] Ask for performance tips
Message-ID: <BANLkTinGmQijtQMxN1KDB=RW-WO1gmSnvw@mail.gmail.com>

Hi,

I am using GDAL/OGR to find the links under a set of towns, on the whole
France territory.

My links and my towns are stored on a Postgis database.

For the moment I use the most precise request I can:

- I make a union of all the polygons of the towns I am interested in
- I send a request with GDAL to the Postgis database to get the links
covered by the geometry
- I read the result

Would it be faster if I make a request for each town, instead of making the
union of the geometries ?

Would it be faster if I use a simple spatial filter (like a rectangle)
instead of the precise geometry ?

-- 
Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110609/f47e254e/attachment.html
From greenberg at ucdavis.edu  Thu Jun  9 15:39:37 2011
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Thu Jun  9 23:25:47 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <1307594746.3639.19.camel@octopi>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
	<BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
	<BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>
	<1307594746.3639.19.camel@octopi>
Message-ID: <BANLkTimcxgdJ04Z2rks2KuyDKxriixu8PA@mail.gmail.com>

Brian:

Thanks!  Great solution, definitely saved me some time.  The main issue (in
terms of doing this entirely within GDAL) is getting the right scaling to
make the image look good.  I was able to figure out the correct scale range
within ENVI, and then apply the scales as you suggested below.  Nikos'
suggestion to use rgb2pct makes me wonder if there is some way to figure out
the optimal scale (which, AFAIK, is part of how rgb2pct is functioning) to
apply to this image.

Incidentally, what I'm trying to do is load Worldview-2 data onto an iPad 2
for use with the GISRoam mobile mapping app.  Worldview-2 is 16-bit per
band, 8 band data, with a very high dynamic range (we have snow in our
image, so we have lots of VERY bright pixels which throw off the adjustment
if using -scale without any parameters).  99% (100%?) of mobile mapping
applications need 3-band data, usually with only 8 bits per band.

Pushing forward, but if someone knows how to figure out an optimal set of
scale values to use within GDAL, please post the solution.

--j

On Wed, Jun 8, 2011 at 9:45 PM, Brian Case <rush@winkey.org> wrote:

> Jonathan
>
> you can do scaling on individual bands.
>
> gdal_translate -b 1 -scale 0 5000 -ot Byte -of VRT infile outfile1.vrt
> gdal_translate -b 2 -scale 0 4000 -ot Byte -of VRT infile outfile2.vrt
> gdal_translate -b 3 -scale 0 3000 -ot Byte -of VRT infile outfile3.vrt
>
> gdalbuildvrt -separate output.vrt outfile1.vrt outfile2.vrt outfile3.vrt
>
> gdal_translate -of gtiff output.vrt output.tif
>
>
>
> for more complicated scaling you may need to hand write a vrt
>
> http://www.gdal.org/gdal_vrttut.html
>
> Brian
>
> On Wed, 2011-06-08 at 19:31 -0700, Jonathan Greenberg wrote:
> > Nikos and GDALers:
> >
> >
> > This is CLOSE to what I'm looking to do, but I'm having a hard time
> > getting it working properly.  Here's my input dataset gdalinfo dump:
> >
> >
> > ***
> >
> >
> > Driver: ENVI/ENVI .hdr Labelled
> > Files: 10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.envi
> >        10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.hdr
> > Size is 42255, 51712
> > Coordinate System is:
> > GEOGCS["WGS 84",
> >     DATUM["WGS_1984",
> >         SPHEROID["WGS 84",6378137,298.257223563,
> >             AUTHORITY["EPSG","7030"]],
> >         TOWGS84[0,0,0,0,0,0,0],
> >         AUTHORITY["EPSG","6326"]],
> >     PRIMEM["Greenwich",0,
> >         AUTHORITY["EPSG","8901"]],
> >     UNIT["degree",0.0174532925199433,
> >         AUTHORITY["EPSG","9108"]],
> >     AUTHORITY["EPSG","4326"]]
> > Origin = (-120.066479999999999,39.271554000000002)
> > Pixel Size = (0.000004500000005,-0.000004500000005)
> > Image Structure Metadata:
> >   INTERLEAVE=BAND
> > Corner Coordinates:
> > Upper Left  (-120.0664800,  39.2715540) (120d 3'59.33"W,
> > 39d16'17.59"N)
> > Lower Left  (-120.0664800,  39.0388500) (120d 3'59.33"W, 39d
> > 2'19.86"N)
> > Upper Right (-119.8763325,  39.2715540) (119d52'34.80"W,
> > 39d16'17.59"N)
> > Lower Right (-119.8763325,  39.0388500) (119d52'34.80"W, 39d
> > 2'19.86"N)
> > Center      (-119.9714062,  39.1552020) (119d58'17.06"W, 39d
> > 9'18.73"N)
> > Band 1 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> > Band 2 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> > Band 3 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> >
> >
> > ***
> >
> >
> > I need to end up with a Byte TIF image with good color balance from
> > this input.  Running rgb2pct.py on this dataset just outputted a
> > "blank" (grey) image.  Running gdal_translate -of GTiff -ot Byte
> > -scale [min] [max] worked somewhat, but its near impossible to get
> > this looking right, since the scaling I want to do differs from band
> > to band (e.g. if there any way to use -scale to adjust each band
> > separately)?  Alternatively, how would I get rgb2pct.py working on the
> > above image correctly?  Thanks!
> >
> >
> > --j
> >
> >
> >
> > On Wed, Jun 8, 2011 at 4:10 PM, Nikolaos Hatzopoulos
> > <nhatzop@gmail.com> wrote:
> >         why you don't try rgb2pct http://www.gdal.org/rgb2pct.html?
> >
> >         --Nikos Hatzopoulos
> >
> >
> >         On Wed, Jun 8, 2011 at 2:20 PM, Jonathan Greenberg
> >         <greenberg@ucdavis.edu> wrote:
> >
> >
> >                 Folks:
> >
> >
> >                 I am using a piece of software which is relying on an
> >                 older version of GDAL that doesn't have the "fix" to
> >                 deal with > 8 bit geotiffs (it is trying to make a
> >                 jpeg overlay but can't from a 16 bit image.  I think
> >                 this is the issue:
> >                 http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but
> >                 when I do a straight convert (-ot Byte) the output
> >                 image looks really washed out.  Any hints for getting
> >                 the best quality output from a 16 bit to to an 8 bit
> >                 conversion of a Geotiff?
> >
> >
> >                 --j
> >
> >                 --
> >                 Jonathan A. Greenberg, PhD
> >                 Assistant Project Scientist
> >                 Center for Spatial Technologies and Remote Sensing
> >                 (CSTARS)
> >                 Department of Land, Air and Water Resources
> >                 University of California, Davis
> >                 One Shields Avenue
> >                 Davis, CA 95616
> >                 Phone: 415-763-5476
> >                 AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
> >
> >
> >
> >
> >                 _______________________________________________
> >                 gdal-dev mailing list
> >                 gdal-dev@lists.osgeo.org
> >                 http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> > --
> > Jonathan A. Greenberg, PhD
> > Assistant Project Scientist
> > Center for Spatial Technologies and Remote Sensing (CSTARS)
> > Department of Land, Air and Water Resources
> > University of California, Davis
> > One Shields Avenue
> > Davis, CA 95616
> > Phone: 415-763-5476
> > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


-- 
Jonathan A. Greenberg, PhD
Assistant Project Scientist
Center for Spatial Technologies and Remote Sensing (CSTARS)
Department of Land, Air and Water Resources
University of California, Davis
One Shields Avenue
Davis, CA 95616
Phone: 415-763-5476
AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110609/97e71454/attachment.html
From rush at winkey.org  Thu Jun  9 19:44:38 2011
From: rush at winkey.org (Brian Case)
Date: Fri Jun 10 03:44:57 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <BANLkTimcxgdJ04Z2rks2KuyDKxriixu8PA@mail.gmail.com>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
	<BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
	<BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>
	<1307594746.3639.19.camel@octopi>
	<BANLkTimcxgdJ04Z2rks2KuyDKxriixu8PA@mail.gmail.com>
Message-ID: <1307663078.3639.32.camel@octopi>

Jonathan

I don't know about worldview, but with modis I wound up using multiple
ranges

0:0,750:110,1500:160,3000:210,4750:240,6375:255

see <lut>  in the vrt tutorial

Brian






On Thu, 2011-06-09 at 12:39 -0700, Jonathan Greenberg wrote:
> Brian:
> 
> 
> Thanks!  Great solution, definitely saved me some time.  The main
> issue (in terms of doing this entirely within GDAL) is getting the
> right scaling to make the image look good.  I was able to figure out
> the correct scale range within ENVI, and then apply the scales as you
> suggested below.  Nikos' suggestion to use rgb2pct makes me wonder if
> there is some way to figure out the optimal scale (which, AFAIK, is
> part of how rgb2pct is functioning) to apply to this image.
> 
> 
> Incidentally, what I'm trying to do is load Worldview-2 data onto an
> iPad 2 for use with the GISRoam mobile mapping app.  Worldview-2 is
> 16-bit per band, 8 band data, with a very high dynamic range (we have
> snow in our image, so we have lots of VERY bright pixels which throw
> off the adjustment if using -scale without any parameters).  99%
> (100%?) of mobile mapping applications need 3-band data, usually with
> only 8 bits per band.
> 
> 
> Pushing forward, but if someone knows how to figure out an optimal set
> of scale values to use within GDAL, please post the solution.  
> 
> 
> --j
> 
> On Wed, Jun 8, 2011 at 9:45 PM, Brian Case <rush@winkey.org> wrote:
>         Jonathan
>         
>         you can do scaling on individual bands.
>         
>         gdal_translate -b 1 -scale 0 5000 -ot Byte -of VRT infile
>         outfile1.vrt
>         gdal_translate -b 2 -scale 0 4000 -ot Byte -of VRT infile
>         outfile2.vrt
>         gdal_translate -b 3 -scale 0 3000 -ot Byte -of VRT infile
>         outfile3.vrt
>         
>         gdalbuildvrt -separate output.vrt outfile1.vrt outfile2.vrt
>         outfile3.vrt
>         
>         gdal_translate -of gtiff output.vrt output.tif
>         
>         
>         
>         for more complicated scaling you may need to hand write a vrt
>         
>         http://www.gdal.org/gdal_vrttut.html
>         
>         Brian
>         
>         
>         On Wed, 2011-06-08 at 19:31 -0700, Jonathan Greenberg wrote:
>         > Nikos and GDALers:
>         >
>         >
>         > This is CLOSE to what I'm looking to do, but I'm having a
>         hard time
>         > getting it working properly.  Here's my input dataset
>         gdalinfo dump:
>         >
>         >
>         > ***
>         >
>         >
>         > Driver: ENVI/ENVI .hdr Labelled
>         > Files:
>         10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.envi
>         >
>          10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.hdr
>         > Size is 42255, 51712
>         > Coordinate System is:
>         > GEOGCS["WGS 84",
>         >     DATUM["WGS_1984",
>         >         SPHEROID["WGS 84",6378137,298.257223563,
>         >             AUTHORITY["EPSG","7030"]],
>         >         TOWGS84[0,0,0,0,0,0,0],
>         >         AUTHORITY["EPSG","6326"]],
>         >     PRIMEM["Greenwich",0,
>         >         AUTHORITY["EPSG","8901"]],
>         >     UNIT["degree",0.0174532925199433,
>         >         AUTHORITY["EPSG","9108"]],
>         >     AUTHORITY["EPSG","4326"]]
>         > Origin = (-120.066479999999999,39.271554000000002)
>         > Pixel Size = (0.000004500000005,-0.000004500000005)
>         > Image Structure Metadata:
>         >   INTERLEAVE=BAND
>         > Corner Coordinates:
>         > Upper Left  (-120.0664800,  39.2715540) (120d 3'59.33"W,
>         > 39d16'17.59"N)
>         > Lower Left  (-120.0664800,  39.0388500) (120d 3'59.33"W, 39d
>         > 2'19.86"N)
>         > Upper Right (-119.8763325,  39.2715540) (119d52'34.80"W,
>         > 39d16'17.59"N)
>         > Lower Right (-119.8763325,  39.0388500) (119d52'34.80"W, 39d
>         > 2'19.86"N)
>         > Center      (-119.9714062,  39.1552020) (119d58'17.06"W, 39d
>         > 9'18.73"N)
>         > Band 1 Block=42255x1 Type=UInt16, ColorInterp=Undefined
>         > Band 2 Block=42255x1 Type=UInt16, ColorInterp=Undefined
>         > Band 3 Block=42255x1 Type=UInt16, ColorInterp=Undefined
>         >
>         >
>         > ***
>         >
>         >
>         > I need to end up with a Byte TIF image with good color
>         balance from
>         > this input.  Running rgb2pct.py on this dataset just
>         outputted a
>         > "blank" (grey) image.  Running gdal_translate -of GTiff -ot
>         Byte
>         > -scale [min] [max] worked somewhat, but its near impossible
>         to get
>         > this looking right, since the scaling I want to do differs
>         from band
>         > to band (e.g. if there any way to use -scale to adjust each
>         band
>         > separately)?  Alternatively, how would I get rgb2pct.py
>         working on the
>         > above image correctly?  Thanks!
>         >
>         >
>         > --j
>         >
>         >
>         >
>         > On Wed, Jun 8, 2011 at 4:10 PM, Nikolaos Hatzopoulos
>         > <nhatzop@gmail.com> wrote:
>         >         why you don't try rgb2pct
>         http://www.gdal.org/rgb2pct.html?
>         >
>         >         --Nikos Hatzopoulos
>         >
>         >
>         >         On Wed, Jun 8, 2011 at 2:20 PM, Jonathan Greenberg
>         >         <greenberg@ucdavis.edu> wrote:
>         >
>         >
>         >                 Folks:
>         >
>         >
>         >                 I am using a piece of software which is
>         relying on an
>         >                 older version of GDAL that doesn't have the
>         "fix" to
>         >                 deal with > 8 bit geotiffs (it is trying to
>         make a
>         >                 jpeg overlay but can't from a 16 bit image.
>          I think
>         >                 this is the issue:
>         >
>         http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but
>         >                 when I do a straight convert (-ot Byte) the
>         output
>         >                 image looks really washed out.  Any hints
>         for getting
>         >                 the best quality output from a 16 bit to to
>         an 8 bit
>         >                 conversion of a Geotiff?
>         >
>         >
>         >                 --j
>         >
>         >                 --
>         >                 Jonathan A. Greenberg, PhD
>         >                 Assistant Project Scientist
>         >                 Center for Spatial Technologies and Remote
>         Sensing
>         >                 (CSTARS)
>         >                 Department of Land, Air and Water Resources
>         >                 University of California, Davis
>         >                 One Shields Avenue
>         >                 Davis, CA 95616
>         >                 Phone: 415-763-5476
>         >                 AIM: jgrn307, MSN: jgrn307@hotmail.com,
>         Gchat: jgrn307
>         >
>         >
>         >
>         >
>         >
>         _______________________________________________
>         >                 gdal-dev mailing list
>         >                 gdal-dev@lists.osgeo.org
>         >
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         >
>         >
>         >
>         >
>         > --
>         > Jonathan A. Greenberg, PhD
>         > Assistant Project Scientist
>         > Center for Spatial Technologies and Remote Sensing (CSTARS)
>         > Department of Land, Air and Water Resources
>         > University of California, Davis
>         > One Shields Avenue
>         > Davis, CA 95616
>         > Phone: 415-763-5476
>         > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
>         >
>         >
>         > _______________________________________________
>         > gdal-dev mailing list
>         > gdal-dev@lists.osgeo.org
>         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
>         
>         
> 
> 
> 
> -- 
> Jonathan A. Greenberg, PhD
> Assistant Project Scientist
> Center for Spatial Technologies and Remote Sensing (CSTARS)
> Department of Land, Air and Water Resources
> University of California, Davis
> One Shields Avenue
> Davis, CA 95616
> Phone: 415-763-5476
> AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nhatzop at gmail.com  Thu Jun  9 19:49:05 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Fri Jun 10 03:49:26 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <1307663078.3639.32.camel@octopi>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
	<BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
	<BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>
	<1307594746.3639.19.camel@octopi>
	<BANLkTimcxgdJ04Z2rks2KuyDKxriixu8PA@mail.gmail.com>
	<1307663078.3639.32.camel@octopi>
Message-ID: <BANLkTikXFGwAbS0PrTGO+d4BsUKDQJLgoA@mail.gmail.com>

for modis truecolor images?

--Nikos

On Thu, Jun 9, 2011 at 4:44 PM, Brian Case <rush@winkey.org> wrote:

> Jonathan
>
> I don't know about worldview, but with modis I wound up using multiple
> ranges
>
> 0:0,750:110,1500:160,3000:210,4750:240,6375:255
>
> see <lut>  in the vrt tutorial
>
> Brian
>
>
>
>
>
>
> On Thu, 2011-06-09 at 12:39 -0700, Jonathan Greenberg wrote:
> > Brian:
> >
> >
> > Thanks!  Great solution, definitely saved me some time.  The main
> > issue (in terms of doing this entirely within GDAL) is getting the
> > right scaling to make the image look good.  I was able to figure out
> > the correct scale range within ENVI, and then apply the scales as you
> > suggested below.  Nikos' suggestion to use rgb2pct makes me wonder if
> > there is some way to figure out the optimal scale (which, AFAIK, is
> > part of how rgb2pct is functioning) to apply to this image.
> >
> >
> > Incidentally, what I'm trying to do is load Worldview-2 data onto an
> > iPad 2 for use with the GISRoam mobile mapping app.  Worldview-2 is
> > 16-bit per band, 8 band data, with a very high dynamic range (we have
> > snow in our image, so we have lots of VERY bright pixels which throw
> > off the adjustment if using -scale without any parameters).  99%
> > (100%?) of mobile mapping applications need 3-band data, usually with
> > only 8 bits per band.
> >
> >
> > Pushing forward, but if someone knows how to figure out an optimal set
> > of scale values to use within GDAL, please post the solution.
> >
> >
> > --j
> >
> > On Wed, Jun 8, 2011 at 9:45 PM, Brian Case <rush@winkey.org> wrote:
> >         Jonathan
> >
> >         you can do scaling on individual bands.
> >
> >         gdal_translate -b 1 -scale 0 5000 -ot Byte -of VRT infile
> >         outfile1.vrt
> >         gdal_translate -b 2 -scale 0 4000 -ot Byte -of VRT infile
> >         outfile2.vrt
> >         gdal_translate -b 3 -scale 0 3000 -ot Byte -of VRT infile
> >         outfile3.vrt
> >
> >         gdalbuildvrt -separate output.vrt outfile1.vrt outfile2.vrt
> >         outfile3.vrt
> >
> >         gdal_translate -of gtiff output.vrt output.tif
> >
> >
> >
> >         for more complicated scaling you may need to hand write a vrt
> >
> >         http://www.gdal.org/gdal_vrttut.html
> >
> >         Brian
> >
> >
> >         On Wed, 2011-06-08 at 19:31 -0700, Jonathan Greenberg wrote:
> >         > Nikos and GDALers:
> >         >
> >         >
> >         > This is CLOSE to what I'm looking to do, but I'm having a
> >         hard time
> >         > getting it working properly.  Here's my input dataset
> >         gdalinfo dump:
> >         >
> >         >
> >         > ***
> >         >
> >         >
> >         > Driver: ENVI/ENVI .hdr Labelled
> >         > Files:
> >         10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.envi
> >         >
> >          10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.hdr
> >         > Size is 42255, 51712
> >         > Coordinate System is:
> >         > GEOGCS["WGS 84",
> >         >     DATUM["WGS_1984",
> >         >         SPHEROID["WGS 84",6378137,298.257223563,
> >         >             AUTHORITY["EPSG","7030"]],
> >         >         TOWGS84[0,0,0,0,0,0,0],
> >         >         AUTHORITY["EPSG","6326"]],
> >         >     PRIMEM["Greenwich",0,
> >         >         AUTHORITY["EPSG","8901"]],
> >         >     UNIT["degree",0.0174532925199433,
> >         >         AUTHORITY["EPSG","9108"]],
> >         >     AUTHORITY["EPSG","4326"]]
> >         > Origin = (-120.066479999999999,39.271554000000002)
> >         > Pixel Size = (0.000004500000005,-0.000004500000005)
> >         > Image Structure Metadata:
> >         >   INTERLEAVE=BAND
> >         > Corner Coordinates:
> >         > Upper Left  (-120.0664800,  39.2715540) (120d 3'59.33"W,
> >         > 39d16'17.59"N)
> >         > Lower Left  (-120.0664800,  39.0388500) (120d 3'59.33"W, 39d
> >         > 2'19.86"N)
> >         > Upper Right (-119.8763325,  39.2715540) (119d52'34.80"W,
> >         > 39d16'17.59"N)
> >         > Lower Right (-119.8763325,  39.0388500) (119d52'34.80"W, 39d
> >         > 2'19.86"N)
> >         > Center      (-119.9714062,  39.1552020) (119d58'17.06"W, 39d
> >         > 9'18.73"N)
> >         > Band 1 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> >         > Band 2 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> >         > Band 3 Block=42255x1 Type=UInt16, ColorInterp=Undefined
> >         >
> >         >
> >         > ***
> >         >
> >         >
> >         > I need to end up with a Byte TIF image with good color
> >         balance from
> >         > this input.  Running rgb2pct.py on this dataset just
> >         outputted a
> >         > "blank" (grey) image.  Running gdal_translate -of GTiff -ot
> >         Byte
> >         > -scale [min] [max] worked somewhat, but its near impossible
> >         to get
> >         > this looking right, since the scaling I want to do differs
> >         from band
> >         > to band (e.g. if there any way to use -scale to adjust each
> >         band
> >         > separately)?  Alternatively, how would I get rgb2pct.py
> >         working on the
> >         > above image correctly?  Thanks!
> >         >
> >         >
> >         > --j
> >         >
> >         >
> >         >
> >         > On Wed, Jun 8, 2011 at 4:10 PM, Nikolaos Hatzopoulos
> >         > <nhatzop@gmail.com> wrote:
> >         >         why you don't try rgb2pct
> >         http://www.gdal.org/rgb2pct.html?
> >         >
> >         >         --Nikos Hatzopoulos
> >         >
> >         >
> >         >         On Wed, Jun 8, 2011 at 2:20 PM, Jonathan Greenberg
> >         >         <greenberg@ucdavis.edu> wrote:
> >         >
> >         >
> >         >                 Folks:
> >         >
> >         >
> >         >                 I am using a piece of software which is
> >         relying on an
> >         >                 older version of GDAL that doesn't have the
> >         "fix" to
> >         >                 deal with > 8 bit geotiffs (it is trying to
> >         make a
> >         >                 jpeg overlay but can't from a 16 bit image.
> >          I think
> >         >                 this is the issue:
> >         >
> >         http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but
> >         >                 when I do a straight convert (-ot Byte) the
> >         output
> >         >                 image looks really washed out.  Any hints
> >         for getting
> >         >                 the best quality output from a 16 bit to to
> >         an 8 bit
> >         >                 conversion of a Geotiff?
> >         >
> >         >
> >         >                 --j
> >         >
> >         >                 --
> >         >                 Jonathan A. Greenberg, PhD
> >         >                 Assistant Project Scientist
> >         >                 Center for Spatial Technologies and Remote
> >         Sensing
> >         >                 (CSTARS)
> >         >                 Department of Land, Air and Water Resources
> >         >                 University of California, Davis
> >         >                 One Shields Avenue
> >         >                 Davis, CA 95616
> >         >                 Phone: 415-763-5476
> >         >                 AIM: jgrn307, MSN: jgrn307@hotmail.com,
> >         Gchat: jgrn307
> >         >
> >         >
> >         >
> >         >
> >         >
> >         _______________________________________________
> >         >                 gdal-dev mailing list
> >         >                 gdal-dev@lists.osgeo.org
> >         >
> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >         >
> >         >
> >         >
> >         >
> >         > --
> >         > Jonathan A. Greenberg, PhD
> >         > Assistant Project Scientist
> >         > Center for Spatial Technologies and Remote Sensing (CSTARS)
> >         > Department of Land, Air and Water Resources
> >         > University of California, Davis
> >         > One Shields Avenue
> >         > Davis, CA 95616
> >         > Phone: 415-763-5476
> >         > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
> >         >
> >         >
> >         > _______________________________________________
> >         > gdal-dev mailing list
> >         > gdal-dev@lists.osgeo.org
> >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> >
> >
> >
> > --
> > Jonathan A. Greenberg, PhD
> > Assistant Project Scientist
> > Center for Spatial Technologies and Remote Sensing (CSTARS)
> > Department of Land, Air and Water Resources
> > University of California, Davis
> > One Shields Avenue
> > Davis, CA 95616
> > Phone: 415-763-5476
> > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110609/5e908a8f/attachment.html
From rush at winkey.org  Thu Jun  9 23:42:26 2011
From: rush at winkey.org (Brian Case)
Date: Fri Jun 10 08:20:30 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <BANLkTikXFGwAbS0PrTGO+d4BsUKDQJLgoA@mail.gmail.com>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
	<BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
	<BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>
	<1307594746.3639.19.camel@octopi>
	<BANLkTimcxgdJ04Z2rks2KuyDKxriixu8PA@mail.gmail.com>
	<1307663078.3639.32.camel@octopi>
	<BANLkTikXFGwAbS0PrTGO+d4BsUKDQJLgoA@mail.gmail.com>
Message-ID: <1307677346.3639.34.camel@octopi>

Nikos

143, and 721

Brian

On Thu, 2011-06-09 at 16:49 -0700, Nikolaos Hatzopoulos wrote:
> for modis truecolor images?
> 
> --Nikos
> 
> On Thu, Jun 9, 2011 at 4:44 PM, Brian Case <rush@winkey.org> wrote:
>         Jonathan
>         
>         I don't know about worldview, but with modis I wound up using
>         multiple
>         ranges
>         
>         0:0,750:110,1500:160,3000:210,4750:240,6375:255
>         
>         see <lut>  in the vrt tutorial
>         
>         Brian
>         
>         
>         
>         
>         
>         
>         
>         On Thu, 2011-06-09 at 12:39 -0700, Jonathan Greenberg wrote:
>         > Brian:
>         >
>         >
>         > Thanks!  Great solution, definitely saved me some time.  The
>         main
>         > issue (in terms of doing this entirely within GDAL) is
>         getting the
>         > right scaling to make the image look good.  I was able to
>         figure out
>         > the correct scale range within ENVI, and then apply the
>         scales as you
>         > suggested below.  Nikos' suggestion to use rgb2pct makes me
>         wonder if
>         > there is some way to figure out the optimal scale (which,
>         AFAIK, is
>         > part of how rgb2pct is functioning) to apply to this image.
>         >
>         >
>         > Incidentally, what I'm trying to do is load Worldview-2 data
>         onto an
>         > iPad 2 for use with the GISRoam mobile mapping app.
>          Worldview-2 is
>         > 16-bit per band, 8 band data, with a very high dynamic range
>         (we have
>         > snow in our image, so we have lots of VERY bright pixels
>         which throw
>         > off the adjustment if using -scale without any parameters).
>          99%
>         > (100%?) of mobile mapping applications need 3-band data,
>         usually with
>         > only 8 bits per band.
>         >
>         >
>         > Pushing forward, but if someone knows how to figure out an
>         optimal set
>         > of scale values to use within GDAL, please post the
>         solution.
>         >
>         >
>         > --j
>         >
>         > On Wed, Jun 8, 2011 at 9:45 PM, Brian Case <rush@winkey.org>
>         wrote:
>         >         Jonathan
>         >
>         >         you can do scaling on individual bands.
>         >
>         >         gdal_translate -b 1 -scale 0 5000 -ot Byte -of VRT
>         infile
>         >         outfile1.vrt
>         >         gdal_translate -b 2 -scale 0 4000 -ot Byte -of VRT
>         infile
>         >         outfile2.vrt
>         >         gdal_translate -b 3 -scale 0 3000 -ot Byte -of VRT
>         infile
>         >         outfile3.vrt
>         >
>         >         gdalbuildvrt -separate output.vrt outfile1.vrt
>         outfile2.vrt
>         >         outfile3.vrt
>         >
>         >         gdal_translate -of gtiff output.vrt output.tif
>         >
>         >
>         >
>         >         for more complicated scaling you may need to hand
>         write a vrt
>         >
>         >         http://www.gdal.org/gdal_vrttut.html
>         >
>         >         Brian
>         >
>         >
>         >         On Wed, 2011-06-08 at 19:31 -0700, Jonathan
>         Greenberg wrote:
>         >         > Nikos and GDALers:
>         >         >
>         >         >
>         >         > This is CLOSE to what I'm looking to do, but I'm
>         having a
>         >         hard time
>         >         > getting it working properly.  Here's my input
>         dataset
>         >         gdalinfo dump:
>         >         >
>         >         >
>         >         > ***
>         >         >
>         >         >
>         >         > Driver: ENVI/ENVI .hdr Labelled
>         >         > Files:
>         >
>         10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.envi
>         >         >
>         >
>          10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.hdr
>         >         > Size is 42255, 51712
>         >         > Coordinate System is:
>         >         > GEOGCS["WGS 84",
>         >         >     DATUM["WGS_1984",
>         >         >         SPHEROID["WGS 84",6378137,298.257223563,
>         >         >             AUTHORITY["EPSG","7030"]],
>         >         >         TOWGS84[0,0,0,0,0,0,0],
>         >         >         AUTHORITY["EPSG","6326"]],
>         >         >     PRIMEM["Greenwich",0,
>         >         >         AUTHORITY["EPSG","8901"]],
>         >         >     UNIT["degree",0.0174532925199433,
>         >         >         AUTHORITY["EPSG","9108"]],
>         >         >     AUTHORITY["EPSG","4326"]]
>         >         > Origin = (-120.066479999999999,39.271554000000002)
>         >         > Pixel Size =
>         (0.000004500000005,-0.000004500000005)
>         >         > Image Structure Metadata:
>         >         >   INTERLEAVE=BAND
>         >         > Corner Coordinates:
>         >         > Upper Left  (-120.0664800,  39.2715540) (120d
>         3'59.33"W,
>         >         > 39d16'17.59"N)
>         >         > Lower Left  (-120.0664800,  39.0388500) (120d
>         3'59.33"W, 39d
>         >         > 2'19.86"N)
>         >         > Upper Right (-119.8763325,  39.2715540)
>         (119d52'34.80"W,
>         >         > 39d16'17.59"N)
>         >         > Lower Right (-119.8763325,  39.0388500)
>         (119d52'34.80"W, 39d
>         >         > 2'19.86"N)
>         >         > Center      (-119.9714062,  39.1552020)
>         (119d58'17.06"W, 39d
>         >         > 9'18.73"N)
>         >         > Band 1 Block=42255x1 Type=UInt16,
>         ColorInterp=Undefined
>         >         > Band 2 Block=42255x1 Type=UInt16,
>         ColorInterp=Undefined
>         >         > Band 3 Block=42255x1 Type=UInt16,
>         ColorInterp=Undefined
>         >         >
>         >         >
>         >         > ***
>         >         >
>         >         >
>         >         > I need to end up with a Byte TIF image with good
>         color
>         >         balance from
>         >         > this input.  Running rgb2pct.py on this dataset
>         just
>         >         outputted a
>         >         > "blank" (grey) image.  Running gdal_translate -of
>         GTiff -ot
>         >         Byte
>         >         > -scale [min] [max] worked somewhat, but its near
>         impossible
>         >         to get
>         >         > this looking right, since the scaling I want to do
>         differs
>         >         from band
>         >         > to band (e.g. if there any way to use -scale to
>         adjust each
>         >         band
>         >         > separately)?  Alternatively, how would I get
>         rgb2pct.py
>         >         working on the
>         >         > above image correctly?  Thanks!
>         >         >
>         >         >
>         >         > --j
>         >         >
>         >         >
>         >         >
>         >         > On Wed, Jun 8, 2011 at 4:10 PM, Nikolaos
>         Hatzopoulos
>         >         > <nhatzop@gmail.com> wrote:
>         >         >         why you don't try rgb2pct
>         >         http://www.gdal.org/rgb2pct.html?
>         >         >
>         >         >         --Nikos Hatzopoulos
>         >         >
>         >         >
>         >         >         On Wed, Jun 8, 2011 at 2:20 PM, Jonathan
>         Greenberg
>         >         >         <greenberg@ucdavis.edu> wrote:
>         >         >
>         >         >
>         >         >                 Folks:
>         >         >
>         >         >
>         >         >                 I am using a piece of software
>         which is
>         >         relying on an
>         >         >                 older version of GDAL that doesn't
>         have the
>         >         "fix" to
>         >         >                 deal with > 8 bit geotiffs (it is
>         trying to
>         >         make a
>         >         >                 jpeg overlay but can't from a 16
>         bit image.
>         >          I think
>         >         >                 this is the issue:
>         >         >
>         >         http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but
>         >         >                 when I do a straight convert (-ot
>         Byte) the
>         >         output
>         >         >                 image looks really washed out.
>          Any hints
>         >         for getting
>         >         >                 the best quality output from a 16
>         bit to to
>         >         an 8 bit
>         >         >                 conversion of a Geotiff?
>         >         >
>         >         >
>         >         >                 --j
>         >         >
>         >         >                 --
>         >         >                 Jonathan A. Greenberg, PhD
>         >         >                 Assistant Project Scientist
>         >         >                 Center for Spatial Technologies
>         and Remote
>         >         Sensing
>         >         >                 (CSTARS)
>         >         >                 Department of Land, Air and Water
>         Resources
>         >         >                 University of California, Davis
>         >         >                 One Shields Avenue
>         >         >                 Davis, CA 95616
>         >         >                 Phone: 415-763-5476
>         >         >                 AIM: jgrn307, MSN:
>         jgrn307@hotmail.com,
>         >         Gchat: jgrn307
>         >         >
>         >         >
>         >         >
>         >         >
>         >         >
>         >         _______________________________________________
>         >         >                 gdal-dev mailing list
>         >         >                 gdal-dev@lists.osgeo.org
>         >         >
>         >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         >         >
>         >         >
>         >         >
>         >         >
>         >         > --
>         >         > Jonathan A. Greenberg, PhD
>         >         > Assistant Project Scientist
>         >         > Center for Spatial Technologies and Remote Sensing
>         (CSTARS)
>         >         > Department of Land, Air and Water Resources
>         >         > University of California, Davis
>         >         > One Shields Avenue
>         >         > Davis, CA 95616
>         >         > Phone: 415-763-5476
>         >         > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat:
>         jgrn307
>         >         >
>         >         >
>         >         > _______________________________________________
>         >         > gdal-dev mailing list
>         >         > gdal-dev@lists.osgeo.org
>         >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         >
>         >
>         >
>         >
>         >
>         >
>         > --
>         > Jonathan A. Greenberg, PhD
>         > Assistant Project Scientist
>         > Center for Spatial Technologies and Remote Sensing (CSTARS)
>         > Department of Land, Air and Water Resources
>         > University of California, Davis
>         > One Shields Avenue
>         > Davis, CA 95616
>         > Phone: 415-763-5476
>         > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
>         >
>         >
>         > _______________________________________________
>         > gdal-dev mailing list
>         > gdal-dev@lists.osgeo.org
>         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
>         
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
> 


From chaitanya.ch at gmail.com  Fri Jun 10 08:10:20 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jun 10 16:50:46 2011
Subject: [gdal-dev] Ask for performance tips
In-Reply-To: <BANLkTinGmQijtQMxN1KDB=RW-WO1gmSnvw@mail.gmail.com>
References: <BANLkTinGmQijtQMxN1KDB=RW-WO1gmSnvw@mail.gmail.com>
Message-ID: <BANLkTim2=-_-qHm9efgk-PdPi4jT_1X9Cg@mail.gmail.com>

Alexandre,

Your straight forward method is the best.

PostGIS takes care of optimization using rectangular bounding boxes.
Union function works best if you use it as an aggregate function. In OGR,
you can use OGRGeometry::UnionCascaded() by passing a OGRGeometryCollection
object to it.


On Fri, Jun 10, 2011 at 12:58 AM, Alexandre Gacon <
alexandre.gacon+gdal@gmail.com> wrote:

> Hi,
>
> I am using GDAL/OGR to find the links under a set of towns, on the whole
> France territory.
>
> My links and my towns are stored on a Postgis database.
>
> For the moment I use the most precise request I can:
>
> - I make a union of all the polygons of the towns I am interested in
> - I send a request with GDAL to the Postgis database to get the links
> covered by the geometry
> - I read the result
>
> Would it be faster if I make a request for each town, instead of making the
> union of the geometries ?
>
> Would it be faster if I use a simple spatial filter (like a rectangle)
> instead of the precise geometry ?
>
> --
> Alexandre Gacon
>
>
-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110610/447f30e8/attachment.html
From nhatzop at gmail.com  Fri Jun 10 12:49:46 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Fri Jun 10 21:44:39 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <1307677346.3639.34.camel@octopi>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
	<BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
	<BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>
	<1307594746.3639.19.camel@octopi>
	<BANLkTimcxgdJ04Z2rks2KuyDKxriixu8PA@mail.gmail.com>
	<1307663078.3639.32.camel@octopi>
	<BANLkTikXFGwAbS0PrTGO+d4BsUKDQJLgoA@mail.gmail.com>
	<1307677346.3639.34.camel@octopi>
Message-ID: <BANLkTi=ccdrh_3MmQDy4RjSJ7uEsN+SHsg@mail.gmail.com>

Rapid response for true color has this:

;- Rapid Response default enhancement: 0,0, 30,110, 60,160, 120,210,
190,240, 255,255
x = byte([0,  30,  60, 120, 190, 255])
y = byte([0, 110, 160, 210, 240, 255])

;- Rapid Response cloud enhancement: 0,0, 25,90, 55,140, 100,175, 255,255
if keyword_set(cloud) then begin
  x = byte([0, 25,  55, 100, 255])
  y = byte([0, 90, 140, 175, 255])
endif


how it can be programmed in gdal language?

--Nikos

On Thu, Jun 9, 2011 at 8:42 PM, Brian Case <rush@winkey.org> wrote:

> Nikos
>
> 143, and 721
>
> Brian
>
> On Thu, 2011-06-09 at 16:49 -0700, Nikolaos Hatzopoulos wrote:
> > for modis truecolor images?
> >
> > --Nikos
> >
> > On Thu, Jun 9, 2011 at 4:44 PM, Brian Case <rush@winkey.org> wrote:
> >         Jonathan
> >
> >         I don't know about worldview, but with modis I wound up using
> >         multiple
> >         ranges
> >
> >         0:0,750:110,1500:160,3000:210,4750:240,6375:255
> >
> >         see <lut>  in the vrt tutorial
> >
> >         Brian
> >
> >
> >
> >
> >
> >
> >
> >         On Thu, 2011-06-09 at 12:39 -0700, Jonathan Greenberg wrote:
> >         > Brian:
> >         >
> >         >
> >         > Thanks!  Great solution, definitely saved me some time.  The
> >         main
> >         > issue (in terms of doing this entirely within GDAL) is
> >         getting the
> >         > right scaling to make the image look good.  I was able to
> >         figure out
> >         > the correct scale range within ENVI, and then apply the
> >         scales as you
> >         > suggested below.  Nikos' suggestion to use rgb2pct makes me
> >         wonder if
> >         > there is some way to figure out the optimal scale (which,
> >         AFAIK, is
> >         > part of how rgb2pct is functioning) to apply to this image.
> >         >
> >         >
> >         > Incidentally, what I'm trying to do is load Worldview-2 data
> >         onto an
> >         > iPad 2 for use with the GISRoam mobile mapping app.
> >          Worldview-2 is
> >         > 16-bit per band, 8 band data, with a very high dynamic range
> >         (we have
> >         > snow in our image, so we have lots of VERY bright pixels
> >         which throw
> >         > off the adjustment if using -scale without any parameters).
> >          99%
> >         > (100%?) of mobile mapping applications need 3-band data,
> >         usually with
> >         > only 8 bits per band.
> >         >
> >         >
> >         > Pushing forward, but if someone knows how to figure out an
> >         optimal set
> >         > of scale values to use within GDAL, please post the
> >         solution.
> >         >
> >         >
> >         > --j
> >         >
> >         > On Wed, Jun 8, 2011 at 9:45 PM, Brian Case <rush@winkey.org>
> >         wrote:
> >         >         Jonathan
> >         >
> >         >         you can do scaling on individual bands.
> >         >
> >         >         gdal_translate -b 1 -scale 0 5000 -ot Byte -of VRT
> >         infile
> >         >         outfile1.vrt
> >         >         gdal_translate -b 2 -scale 0 4000 -ot Byte -of VRT
> >         infile
> >         >         outfile2.vrt
> >         >         gdal_translate -b 3 -scale 0 3000 -ot Byte -of VRT
> >         infile
> >         >         outfile3.vrt
> >         >
> >         >         gdalbuildvrt -separate output.vrt outfile1.vrt
> >         outfile2.vrt
> >         >         outfile3.vrt
> >         >
> >         >         gdal_translate -of gtiff output.vrt output.tif
> >         >
> >         >
> >         >
> >         >         for more complicated scaling you may need to hand
> >         write a vrt
> >         >
> >         >         http://www.gdal.org/gdal_vrttut.html
> >         >
> >         >         Brian
> >         >
> >         >
> >         >         On Wed, 2011-06-08 at 19:31 -0700, Jonathan
> >         Greenberg wrote:
> >         >         > Nikos and GDALers:
> >         >         >
> >         >         >
> >         >         > This is CLOSE to what I'm looking to do, but I'm
> >         having a
> >         >         hard time
> >         >         > getting it working properly.  Here's my input
> >         dataset
> >         >         gdalinfo dump:
> >         >         >
> >         >         >
> >         >         > ***
> >         >         >
> >         >         >
> >         >         > Driver: ENVI/ENVI .hdr Labelled
> >         >         > Files:
> >         >
> >         10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.envi
> >         >         >
> >         >
> >          10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.hdr
> >         >         > Size is 42255, 51712
> >         >         > Coordinate System is:
> >         >         > GEOGCS["WGS 84",
> >         >         >     DATUM["WGS_1984",
> >         >         >         SPHEROID["WGS 84",6378137,298.257223563,
> >         >         >             AUTHORITY["EPSG","7030"]],
> >         >         >         TOWGS84[0,0,0,0,0,0,0],
> >         >         >         AUTHORITY["EPSG","6326"]],
> >         >         >     PRIMEM["Greenwich",0,
> >         >         >         AUTHORITY["EPSG","8901"]],
> >         >         >     UNIT["degree",0.0174532925199433,
> >         >         >         AUTHORITY["EPSG","9108"]],
> >         >         >     AUTHORITY["EPSG","4326"]]
> >         >         > Origin = (-120.066479999999999,39.271554000000002)
> >         >         > Pixel Size =
> >         (0.000004500000005,-0.000004500000005)
> >         >         > Image Structure Metadata:
> >         >         >   INTERLEAVE=BAND
> >         >         > Corner Coordinates:
> >         >         > Upper Left  (-120.0664800,  39.2715540) (120d
> >         3'59.33"W,
> >         >         > 39d16'17.59"N)
> >         >         > Lower Left  (-120.0664800,  39.0388500) (120d
> >         3'59.33"W, 39d
> >         >         > 2'19.86"N)
> >         >         > Upper Right (-119.8763325,  39.2715540)
> >         (119d52'34.80"W,
> >         >         > 39d16'17.59"N)
> >         >         > Lower Right (-119.8763325,  39.0388500)
> >         (119d52'34.80"W, 39d
> >         >         > 2'19.86"N)
> >         >         > Center      (-119.9714062,  39.1552020)
> >         (119d58'17.06"W, 39d
> >         >         > 9'18.73"N)
> >         >         > Band 1 Block=42255x1 Type=UInt16,
> >         ColorInterp=Undefined
> >         >         > Band 2 Block=42255x1 Type=UInt16,
> >         ColorInterp=Undefined
> >         >         > Band 3 Block=42255x1 Type=UInt16,
> >         ColorInterp=Undefined
> >         >         >
> >         >         >
> >         >         > ***
> >         >         >
> >         >         >
> >         >         > I need to end up with a Byte TIF image with good
> >         color
> >         >         balance from
> >         >         > this input.  Running rgb2pct.py on this dataset
> >         just
> >         >         outputted a
> >         >         > "blank" (grey) image.  Running gdal_translate -of
> >         GTiff -ot
> >         >         Byte
> >         >         > -scale [min] [max] worked somewhat, but its near
> >         impossible
> >         >         to get
> >         >         > this looking right, since the scaling I want to do
> >         differs
> >         >         from band
> >         >         > to band (e.g. if there any way to use -scale to
> >         adjust each
> >         >         band
> >         >         > separately)?  Alternatively, how would I get
> >         rgb2pct.py
> >         >         working on the
> >         >         > above image correctly?  Thanks!
> >         >         >
> >         >         >
> >         >         > --j
> >         >         >
> >         >         >
> >         >         >
> >         >         > On Wed, Jun 8, 2011 at 4:10 PM, Nikolaos
> >         Hatzopoulos
> >         >         > <nhatzop@gmail.com> wrote:
> >         >         >         why you don't try rgb2pct
> >         >         http://www.gdal.org/rgb2pct.html?
> >         >         >
> >         >         >         --Nikos Hatzopoulos
> >         >         >
> >         >         >
> >         >         >         On Wed, Jun 8, 2011 at 2:20 PM, Jonathan
> >         Greenberg
> >         >         >         <greenberg@ucdavis.edu> wrote:
> >         >         >
> >         >         >
> >         >         >                 Folks:
> >         >         >
> >         >         >
> >         >         >                 I am using a piece of software
> >         which is
> >         >         relying on an
> >         >         >                 older version of GDAL that doesn't
> >         have the
> >         >         "fix" to
> >         >         >                 deal with > 8 bit geotiffs (it is
> >         trying to
> >         >         make a
> >         >         >                 jpeg overlay but can't from a 16
> >         bit image.
> >         >          I think
> >         >         >                 this is the issue:
> >         >         >
> >         >         http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but
> >         >         >                 when I do a straight convert (-ot
> >         Byte) the
> >         >         output
> >         >         >                 image looks really washed out.
> >          Any hints
> >         >         for getting
> >         >         >                 the best quality output from a 16
> >         bit to to
> >         >         an 8 bit
> >         >         >                 conversion of a Geotiff?
> >         >         >
> >         >         >
> >         >         >                 --j
> >         >         >
> >         >         >                 --
> >         >         >                 Jonathan A. Greenberg, PhD
> >         >         >                 Assistant Project Scientist
> >         >         >                 Center for Spatial Technologies
> >         and Remote
> >         >         Sensing
> >         >         >                 (CSTARS)
> >         >         >                 Department of Land, Air and Water
> >         Resources
> >         >         >                 University of California, Davis
> >         >         >                 One Shields Avenue
> >         >         >                 Davis, CA 95616
> >         >         >                 Phone: 415-763-5476
> >         >         >                 AIM: jgrn307, MSN:
> >         jgrn307@hotmail.com,
> >         >         Gchat: jgrn307
> >         >         >
> >         >         >
> >         >         >
> >         >         >
> >         >         >
> >         >         _______________________________________________
> >         >         >                 gdal-dev mailing list
> >         >         >                 gdal-dev@lists.osgeo.org
> >         >         >
> >         >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >         >         >
> >         >         >
> >         >         >
> >         >         >
> >         >         > --
> >         >         > Jonathan A. Greenberg, PhD
> >         >         > Assistant Project Scientist
> >         >         > Center for Spatial Technologies and Remote Sensing
> >         (CSTARS)
> >         >         > Department of Land, Air and Water Resources
> >         >         > University of California, Davis
> >         >         > One Shields Avenue
> >         >         > Davis, CA 95616
> >         >         > Phone: 415-763-5476
> >         >         > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat:
> >         jgrn307
> >         >         >
> >         >         >
> >         >         > _______________________________________________
> >         >         > gdal-dev mailing list
> >         >         > gdal-dev@lists.osgeo.org
> >         >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >         >
> >         >
> >         >
> >         >
> >         >
> >         >
> >         > --
> >         > Jonathan A. Greenberg, PhD
> >         > Assistant Project Scientist
> >         > Center for Spatial Technologies and Remote Sensing (CSTARS)
> >         > Department of Land, Air and Water Resources
> >         > University of California, Davis
> >         > One Shields Avenue
> >         > Davis, CA 95616
> >         > Phone: 415-763-5476
> >         > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
> >         >
> >         >
> >         > _______________________________________________
> >         > gdal-dev mailing list
> >         > gdal-dev@lists.osgeo.org
> >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >         _______________________________________________
> >         gdal-dev mailing list
> >         gdal-dev@lists.osgeo.org
> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110610/d71c345f/attachment-0001.html
From chaitanya.ch at gmail.com  Fri Jun 10 13:23:55 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jun 10 22:20:36 2011
Subject: [gdal-dev] Converting from 16 bit to 8 bit images (best
	practices?)
In-Reply-To: <BANLkTi=ccdrh_3MmQDy4RjSJ7uEsN+SHsg@mail.gmail.com>
References: <BANLkTimxSic3T4fGg2e8LP6CS9eOAZ-kHA@mail.gmail.com>
	<BANLkTi=3k7wwA+9iDMEALbCaC2hWKysFOg@mail.gmail.com>
	<BANLkTikSm9VFd+oqNrMOWDSdBqAvQBo82w@mail.gmail.com>
	<1307594746.3639.19.camel@octopi>
	<BANLkTimcxgdJ04Z2rks2KuyDKxriixu8PA@mail.gmail.com>
	<1307663078.3639.32.camel@octopi>
	<BANLkTikXFGwAbS0PrTGO+d4BsUKDQJLgoA@mail.gmail.com>
	<1307677346.3639.34.camel@octopi>
	<BANLkTi=ccdrh_3MmQDy4RjSJ7uEsN+SHsg@mail.gmail.com>
Message-ID: <BANLkTikSLnmPhtFVH1T=JcObn=suGv-bfA@mail.gmail.com>

Nikos,

You can use the VRT format [1] in GDAL to perform this. The ComplexSource
elements can have an LUT element. It can be used to specify your lookup
table. The values in between are interpolated linearly.

[1]: http://www.gdal.org/gdal_vrttut.html

On Fri, Jun 10, 2011 at 10:19 PM, Nikolaos Hatzopoulos <nhatzop@gmail.com>wrote:

> Rapid response for true color has this:
>
> ;- Rapid Response default enhancement: 0,0, 30,110, 60,160, 120,210,
> 190,240, 255,255
> x = byte([0,  30,  60, 120, 190, 255])
> y = byte([0, 110, 160, 210, 240, 255])
>
> ;- Rapid Response cloud enhancement: 0,0, 25,90, 55,140, 100,175, 255,255
> if keyword_set(cloud) then begin
>   x = byte([0, 25,  55, 100, 255])
>   y = byte([0, 90, 140, 175, 255])
> endif
>
>
> how it can be programmed in gdal language?
>
> --Nikos
>
>
> On Thu, Jun 9, 2011 at 8:42 PM, Brian Case <rush@winkey.org> wrote:
>
>> Nikos
>>
>> 143, and 721
>>
>> Brian
>>
>> On Thu, 2011-06-09 at 16:49 -0700, Nikolaos Hatzopoulos wrote:
>> > for modis truecolor images?
>> >
>> > --Nikos
>> >
>> > On Thu, Jun 9, 2011 at 4:44 PM, Brian Case <rush@winkey.org> wrote:
>> >         Jonathan
>> >
>> >         I don't know about worldview, but with modis I wound up using
>> >         multiple
>> >         ranges
>> >
>> >         0:0,750:110,1500:160,3000:210,4750:240,6375:255
>> >
>> >         see <lut>  in the vrt tutorial
>> >
>> >         Brian
>> >
>> >
>> >
>> >
>> >
>> >
>> >
>> >         On Thu, 2011-06-09 at 12:39 -0700, Jonathan Greenberg wrote:
>> >         > Brian:
>> >         >
>> >         >
>> >         > Thanks!  Great solution, definitely saved me some time.  The
>> >         main
>> >         > issue (in terms of doing this entirely within GDAL) is
>> >         getting the
>> >         > right scaling to make the image look good.  I was able to
>> >         figure out
>> >         > the correct scale range within ENVI, and then apply the
>> >         scales as you
>> >         > suggested below.  Nikos' suggestion to use rgb2pct makes me
>> >         wonder if
>> >         > there is some way to figure out the optimal scale (which,
>> >         AFAIK, is
>> >         > part of how rgb2pct is functioning) to apply to this image.
>> >         >
>> >         >
>> >         > Incidentally, what I'm trying to do is load Worldview-2 data
>> >         onto an
>> >         > iPad 2 for use with the GISRoam mobile mapping app.
>> >          Worldview-2 is
>> >         > 16-bit per band, 8 band data, with a very high dynamic range
>> >         (we have
>> >         > snow in our image, so we have lots of VERY bright pixels
>> >         which throw
>> >         > off the adjustment if using -scale without any parameters).
>> >          99%
>> >         > (100%?) of mobile mapping applications need 3-band data,
>> >         usually with
>> >         > only 8 bits per band.
>> >         >
>> >         >
>> >         > Pushing forward, but if someone knows how to figure out an
>> >         optimal set
>> >         > of scale values to use within GDAL, please post the
>> >         solution.
>> >         >
>> >         >
>> >         > --j
>> >         >
>> >         > On Wed, Jun 8, 2011 at 9:45 PM, Brian Case <rush@winkey.org>
>> >         wrote:
>> >         >         Jonathan
>> >         >
>> >         >         you can do scaling on individual bands.
>> >         >
>> >         >         gdal_translate -b 1 -scale 0 5000 -ot Byte -of VRT
>> >         infile
>> >         >         outfile1.vrt
>> >         >         gdal_translate -b 2 -scale 0 4000 -ot Byte -of VRT
>> >         infile
>> >         >         outfile2.vrt
>> >         >         gdal_translate -b 3 -scale 0 3000 -ot Byte -of VRT
>> >         infile
>> >         >         outfile3.vrt
>> >         >
>> >         >         gdalbuildvrt -separate output.vrt outfile1.vrt
>> >         outfile2.vrt
>> >         >         outfile3.vrt
>> >         >
>> >         >         gdal_translate -of gtiff output.vrt output.tif
>> >         >
>> >         >
>> >         >
>> >         >         for more complicated scaling you may need to hand
>> >         write a vrt
>> >         >
>> >         >         http://www.gdal.org/gdal_vrttut.html
>> >         >
>> >         >         Brian
>> >         >
>> >         >
>> >         >         On Wed, 2011-06-08 at 19:31 -0700, Jonathan
>> >         Greenberg wrote:
>> >         >         > Nikos and GDALers:
>> >         >         >
>> >         >         >
>> >         >         > This is CLOSE to what I'm looking to do, but I'm
>> >         having a
>> >         >         hard time
>> >         >         > getting it working properly.  Here's my input
>> >         dataset
>> >         >         gdalinfo dump:
>> >         >         >
>> >         >         >
>> >         >         > ***
>> >         >         >
>> >         >         >
>> >         >         > Driver: ENVI/ENVI .hdr Labelled
>> >         >         > Files:
>> >         >
>> >         10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.envi
>> >         >         >
>> >         >
>> >          10SEP10191223-M2AS-052377832030_01_P003_ps_gs_bl_tc.hdr
>> >         >         > Size is 42255, 51712
>> >         >         > Coordinate System is:
>> >         >         > GEOGCS["WGS 84",
>> >         >         >     DATUM["WGS_1984",
>> >         >         >         SPHEROID["WGS 84",6378137,298.257223563,
>> >         >         >             AUTHORITY["EPSG","7030"]],
>> >         >         >         TOWGS84[0,0,0,0,0,0,0],
>> >         >         >         AUTHORITY["EPSG","6326"]],
>> >         >         >     PRIMEM["Greenwich",0,
>> >         >         >         AUTHORITY["EPSG","8901"]],
>> >         >         >     UNIT["degree",0.0174532925199433,
>> >         >         >         AUTHORITY["EPSG","9108"]],
>> >         >         >     AUTHORITY["EPSG","4326"]]
>> >         >         > Origin = (-120.066479999999999,39.271554000000002)
>> >         >         > Pixel Size =
>> >         (0.000004500000005,-0.000004500000005)
>> >         >         > Image Structure Metadata:
>> >         >         >   INTERLEAVE=BAND
>> >         >         > Corner Coordinates:
>> >         >         > Upper Left  (-120.0664800,  39.2715540) (120d
>> >         3'59.33"W,
>> >         >         > 39d16'17.59"N)
>> >         >         > Lower Left  (-120.0664800,  39.0388500) (120d
>> >         3'59.33"W, 39d
>> >         >         > 2'19.86"N)
>> >         >         > Upper Right (-119.8763325,  39.2715540)
>> >         (119d52'34.80"W,
>> >         >         > 39d16'17.59"N)
>> >         >         > Lower Right (-119.8763325,  39.0388500)
>> >         (119d52'34.80"W, 39d
>> >         >         > 2'19.86"N)
>> >         >         > Center      (-119.9714062,  39.1552020)
>> >         (119d58'17.06"W, 39d
>> >         >         > 9'18.73"N)
>> >         >         > Band 1 Block=42255x1 Type=UInt16,
>> >         ColorInterp=Undefined
>> >         >         > Band 2 Block=42255x1 Type=UInt16,
>> >         ColorInterp=Undefined
>> >         >         > Band 3 Block=42255x1 Type=UInt16,
>> >         ColorInterp=Undefined
>> >         >         >
>> >         >         >
>> >         >         > ***
>> >         >         >
>> >         >         >
>> >         >         > I need to end up with a Byte TIF image with good
>> >         color
>> >         >         balance from
>> >         >         > this input.  Running rgb2pct.py on this dataset
>> >         just
>> >         >         outputted a
>> >         >         > "blank" (grey) image.  Running gdal_translate -of
>> >         GTiff -ot
>> >         >         Byte
>> >         >         > -scale [min] [max] worked somewhat, but its near
>> >         impossible
>> >         >         to get
>> >         >         > this looking right, since the scaling I want to do
>> >         differs
>> >         >         from band
>> >         >         > to band (e.g. if there any way to use -scale to
>> >         adjust each
>> >         >         band
>> >         >         > separately)?  Alternatively, how would I get
>> >         rgb2pct.py
>> >         >         working on the
>> >         >         > above image correctly?  Thanks!
>> >         >         >
>> >         >         >
>> >         >         > --j
>> >         >         >
>> >         >         >
>> >         >         >
>> >         >         > On Wed, Jun 8, 2011 at 4:10 PM, Nikolaos
>> >         Hatzopoulos
>> >         >         > <nhatzop@gmail.com> wrote:
>> >         >         >         why you don't try rgb2pct
>> >         >         http://www.gdal.org/rgb2pct.html?
>> >         >         >
>> >         >         >         --Nikos Hatzopoulos
>> >         >         >
>> >         >         >
>> >         >         >         On Wed, Jun 8, 2011 at 2:20 PM, Jonathan
>> >         Greenberg
>> >         >         >         <greenberg@ucdavis.edu> wrote:
>> >         >         >
>> >         >         >
>> >         >         >                 Folks:
>> >         >         >
>> >         >         >
>> >         >         >                 I am using a piece of software
>> >         which is
>> >         >         relying on an
>> >         >         >                 older version of GDAL that doesn't
>> >         have the
>> >         >         "fix" to
>> >         >         >                 deal with > 8 bit geotiffs (it is
>> >         trying to
>> >         >         make a
>> >         >         >                 jpeg overlay but can't from a 16
>> >         bit image.
>> >         >          I think
>> >         >         >                 this is the issue:
>> >         >         >
>> >         >         http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG), but
>> >         >         >                 when I do a straight convert (-ot
>> >         Byte) the
>> >         >         output
>> >         >         >                 image looks really washed out.
>> >          Any hints
>> >         >         for getting
>> >         >         >                 the best quality output from a 16
>> >         bit to to
>> >         >         an 8 bit
>> >         >         >                 conversion of a Geotiff?
>> >         >         >
>> >         >         >
>> >         >         >                 --j
>> >         >         >
>> >         >         >                 --
>> >         >         >                 Jonathan A. Greenberg, PhD
>> >         >         >                 Assistant Project Scientist
>> >         >         >                 Center for Spatial Technologies
>> >         and Remote
>> >         >         Sensing
>> >         >         >                 (CSTARS)
>> >         >         >                 Department of Land, Air and Water
>> >         Resources
>> >         >         >                 University of California, Davis
>> >         >         >                 One Shields Avenue
>> >         >         >                 Davis, CA 95616
>> >         >         >                 Phone: 415-763-5476
>> >         >         >                 AIM: jgrn307, MSN:
>> >         jgrn307@hotmail.com,
>> >         >         Gchat: jgrn307
>> >         >         >
>> >         >         >
>> >         >         >
>> >         >         >
>> >         >         >
>> >         >         _______________________________________________
>> >         >         >                 gdal-dev mailing list
>> >         >         >                 gdal-dev@lists.osgeo.org
>> >         >         >
>> >         >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >         >         >
>> >         >         >
>> >         >         >
>> >         >         >
>> >         >         > --
>> >         >         > Jonathan A. Greenberg, PhD
>> >         >         > Assistant Project Scientist
>> >         >         > Center for Spatial Technologies and Remote Sensing
>> >         (CSTARS)
>> >         >         > Department of Land, Air and Water Resources
>> >         >         > University of California, Davis
>> >         >         > One Shields Avenue
>> >         >         > Davis, CA 95616
>> >         >         > Phone: 415-763-5476
>> >         >         > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat:
>> >         jgrn307
>> >         >         >
>> >         >         >
>> >         >         > _______________________________________________
>> >         >         > gdal-dev mailing list
>> >         >         > gdal-dev@lists.osgeo.org
>> >         >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >         >
>> >         >
>> >         >
>> >         >
>> >         >
>> >         >
>> >         > --
>> >         > Jonathan A. Greenberg, PhD
>> >         > Assistant Project Scientist
>> >         > Center for Spatial Technologies and Remote Sensing (CSTARS)
>> >         > Department of Land, Air and Water Resources
>> >         > University of California, Davis
>> >         > One Shields Avenue
>> >         > Davis, CA 95616
>> >         > Phone: 415-763-5476
>> >         > AIM: jgrn307, MSN: jgrn307@hotmail.com, Gchat: jgrn307
>> >         >
>> >         >
>> >         > _______________________________________________
>> >         > gdal-dev mailing list
>> >         > gdal-dev@lists.osgeo.org
>> >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >         _______________________________________________
>> >         gdal-dev mailing list
>> >         gdal-dev@lists.osgeo.org
>> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>>
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110610/4a67ba89/attachment-0001.html
From dcole at integrity-apps.com  Fri Jun 10 16:15:24 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Sat Jun 11 01:21:15 2011
Subject: [gdal-dev] Finding Actual Bits Per pixel
Message-ID: <8406B84EA8899042A8508D858843972903BE58B6@CHUNEX01.integrity-apps.com>

   Similar to another ongoing thread, I am needing to convert imagery to 8 bit to display in my own viewer.

This has presented me with a few issues. It seems like no matter what of the GDALDataTypes I perform a sizeof() operation on, be it GDT_Byte or GDT_Float32, the size is always 4 bytes.

I am trying to use RasterIO presently to display image. As it turns out, if i run a gdalinfo on the image, i see that it uses uint16 as the Type, but only uses 11 bits per pixel actually!

Since the data types all had a sizeof() = 4, I allocated a float, and I have been reading the data like so

    float * floatData = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);

    poBand->RasterIO( GF_Read, 0, 0, nXSize, nYSize, floatData, nXSize, nYSize,GDT_Float32, 0, 0 );

This seems to be working presently at getting the data, however, I have to use a scaling function like so:

    float two_eight =  pow(2.0,8);
    float two_eleven = pow(2.0,11);
    for (int i = 0 ; i < imheight ; i++)
    {
         for (int j = 0 ; j < imwidth ; j++)
         {
                floatData[i*imwidth+j] = (two_eight* floatData[i*imwidth+j])/two_eleven;
            }
     }

Which is obviously not ideal, especially when you consider I still have to cast this to unsigned char to be displayed.

My question is - is there a better way to have this conversion done for me? I tried to allocated my data as unsigned char, and read in a GDT_Byte, but the image looked bad. If I continue with this way, is there a way to dynamically figure out the actual bits per pixel from the band? It is not clear to me from the API how this was performed, as it seems like it is buried in the nitf image format code in the example application.

Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110610/8e61a4ac/attachment.html
From dcole at integrity-apps.com  Fri Jun 10 18:18:00 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Sat Jun 11 03:30:43 2011
Subject: [gdal-dev] RE: Finding Actual Bits Per pixel
In-Reply-To: <8406B84EA8899042A8508D858843972903BE58B6@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE58B6@CHUNEX01.integrity-apps.com>
Message-ID: <8406B84EA8899042A8508D858843972903BE58F9@CHUNEX01.integrity-apps.com>

After an afternoon of work - I am able to get the Actual Bits per pixel by getting the metadata, and doing a bunch of string parsing. This is not really that ideal either, so I am still open to suggestions if there is a cleaner way of doing it via the API that I just havent stumbled upon.

Derek
________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Friday, June 10, 2011 4:15 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Finding Actual Bits Per pixel

   Similar to another ongoing thread, I am needing to convert imagery to 8 bit to display in my own viewer.

This has presented me with a few issues. It seems like no matter what of the GDALDataTypes I perform a sizeof() operation on, be it GDT_Byte or GDT_Float32, the size is always 4 bytes.

I am trying to use RasterIO presently to display image. As it turns out, if i run a gdalinfo on the image, i see that it uses uint16 as the Type, but only uses 11 bits per pixel actually!

Since the data types all had a sizeof() = 4, I allocated a float, and I have been reading the data like so

    float * floatData = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);

    poBand->RasterIO( GF_Read, 0, 0, nXSize, nYSize, floatData, nXSize, nYSize,GDT_Float32, 0, 0 );

This seems to be working presently at getting the data, however, I have to use a scaling function like so:

    float two_eight =  pow(2.0,8);
    float two_eleven = pow(2.0,11);
    for (int i = 0 ; i < imheight ; i++)
    {
         for (int j = 0 ; j < imwidth ; j++)
         {
                floatData[i*imwidth+j] = (two_eight* floatData[i*imwidth+j])/two_eleven;
            }
     }

Which is obviously not ideal, especially when you consider I still have to cast this to unsigned char to be displayed.

My question is - is there a better way to have this conversion done for me? I tried to allocated my data as unsigned char, and read in a GDT_Byte, but the image looked bad. If I continue with this way, is there a way to dynamically figure out the actual bits per pixel from the band? It is not clear to me from the API how this was performed, as it seems like it is buried in the nitf image format code in the example application.

Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110610/513ab69c/attachment.html
From edomazlicky at tacomacc.edu  Fri Jun 10 18:43:36 2011
From: edomazlicky at tacomacc.edu (Domazlicky, Eric)
Date: Sat Jun 11 04:09:35 2011
Subject: [gdal-dev] RE: Finding Actual Bits Per pixel
In-Reply-To: <8406B84EA8899042A8508D858843972903BE58F9@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE58B6@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BE58F9@CHUNEX01.integrity-apps.com>
Message-ID: <FE11BD2F4F9EBD4C8F519646CF2BA6A53E0794F1@Xmail2.tccnet.edu>

I believe the way to do it is check the number of Raster Bands and then check the Data type of each band. Three bands of GDT_Byte equal 24-bits, two are 16-bit etc etc. One Raster Band of GDT_Float is probably an elevation model (DEM). The number of combinations is almost infinite this way though and you have to setup your code to raise an error if you can't say handle two raster bands of GDT_Float.


From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Cole, Derek
Sent: Friday, June 10, 2011 3:18 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] RE: Finding Actual Bits Per pixel

After an afternoon of work - I am able to get the Actual Bits per pixel by getting the metadata, and doing a bunch of string parsing. This is not really that ideal either, so I am still open to suggestions if there is a cleaner way of doing it via the API that I just havent stumbled upon.

Derek
________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Friday, June 10, 2011 4:15 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Finding Actual Bits Per pixel
   Similar to another ongoing thread, I am needing to convert imagery to 8 bit to display in my own viewer.

This has presented me with a few issues. It seems like no matter what of the GDALDataTypes I perform a sizeof() operation on, be it GDT_Byte or GDT_Float32, the size is always 4 bytes.

I am trying to use RasterIO presently to display image. As it turns out, if i run a gdalinfo on the image, i see that it uses uint16 as the Type, but only uses 11 bits per pixel actually!

Since the data types all had a sizeof() = 4, I allocated a float, and I have been reading the data like so

    float * floatData = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);

    poBand->RasterIO( GF_Read, 0, 0, nXSize, nYSize, floatData, nXSize, nYSize,GDT_Float32, 0, 0 );

This seems to be working presently at getting the data, however, I have to use a scaling function like so:

    float two_eight =  pow(2.0,8);
    float two_eleven = pow(2.0,11);
    for (int i = 0 ; i < imheight ; i++)
    {
         for (int j = 0 ; j < imwidth ; j++)
         {
                floatData[i*imwidth+j] = (two_eight* floatData[i*imwidth+j])/two_eleven;
            }
     }

Which is obviously not ideal, especially when you consider I still have to cast this to unsigned char to be displayed.

My question is - is there a better way to have this conversion done for me? I tried to allocated my data as unsigned char, and read in a GDT_Byte, but the image looked bad. If I continue with this way, is there a way to dynamically figure out the actual bits per pixel from the band? It is not clear to me from the API how this was performed, as it seems like it is buried in the nitf image format code in the example application.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110610/7ad17e96/attachment-0001.html
From jachym.cepicky at gmail.com  Fri Jun 10 20:40:07 2011
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Sat Jun 11 06:00:32 2011
Subject: [gdal-dev] wfs 1.1.0 via mapserver and ogr
Message-ID: <BANLkTin3WEm4hFuG87dDiRcxdmvR=7hXyA@mail.gmail.com>

Hi,

I try to load some data to MapServer (and  display them as WMS) from
WFS 1.1.0 server (also MapServer-based).

>From various reasons, I defined the WFS layer as OGR layer type, with
connection set to WFS definition file:

  LAYER
    CONNECTION "wfs.wfs"
    CONNECTIONTYPE OGR
    DATA "line"
    #EXTENT 12.735342 48.152419 17.141855 51.38089
    METADATA
      "ows_abstract"	"My abstract"
      "wfs_typename"	"line"
      "wfs_version"	"1.1.0"
      "wms_title"	"Line"
    END # METADATA
    NAME "line"
    PROJECTION
      "+init=epsg:4326"
    END # PROJECTION
    STATUS ON
    TEMPLATE "foo"
    TILEITEM "location"
    TYPE LINE
    UNITS METERS
    CLASS
      STYLE
        ANGLE 0
        COLOR 238 153 0
        OFFSET 0 0
        OUTLINECOLOR 134 81 0
        SIZE 5
        WIDTH 5
      END # STYLE
    END # CLASS
  END # LAYER


(wfs.wfs should be attached to this e-mail).

When I try to display the data (using shp2img or standard WMS
request), nothing is displayed, because of MapServer->OGR asks the WFS
server with following request:


http://localhost/cgi-bin/ows?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=line&FILTER=<Filter
 xmlns:gml="http://www.opengis.net/gml"><BBOX><PropertyName>msGeometry</PropertyName><gml:Box><gml:coordinates>48.7275012197312094,12.9295317871890720
51.1769623652315175,18.1965700336475784</gml:coordinates></gml:Box></BBOX></Filter>

This is WRONG

-- 
Jachym Cepicky
e-mail: jachym.cepicky gmail com
URL: http://les-ejk.cz
GPG: http://les-ejk.cz/pgp/JachymCepicky.pgp
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wfs.wfs
Type: application/octet-stream
Size: 9061 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110611/a774f049/wfs.obj
From jachym.cepicky at gmail.com  Fri Jun 10 20:45:07 2011
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Sat Jun 11 06:05:45 2011
Subject: [gdal-dev] Re: wfs 1.1.0 via mapserver and ogr
In-Reply-To: <BANLkTin3WEm4hFuG87dDiRcxdmvR=7hXyA@mail.gmail.com>
References: <BANLkTin3WEm4hFuG87dDiRcxdmvR=7hXyA@mail.gmail.com>
Message-ID: <BANLkTin9eVK+QQX4tkY5JMQoYq5=GHK8Pg@mail.gmail.com>

sorry, I hit the "Send" button accidentally

so, the request

http://localhost/cgi-bin/ows?SERVICE=WFS&VERSION=1.1.0&REQUEST=GetFeature&TYPENAME=line&FILTER=<Filter
 xmlns:gml="http://www.opengis.net/gml"><BBOX><PropertyName>msGeometry</PropertyName><gml:Box><gml:coordinates>48.7275012197312094,12.9295317871890720
51.1769623652315175,18.1965700336475784</gml:coordinates></gml:Box></BBOX></Filter>

is WRONG because of the axes are inverted, the filter *should* look like

12.9295317871890720,48.7275012197312094 18.1965700336475784,51.1769623652315175

Then it works.

My question is, where can/should I influence this behaviour? I tried
several options in PROJECTION section of the MapFile (+axis=neu, ...)
but nothing made the OGR driver to change the axes order.

With WFS 1.0.0 it works perfectly (axes are in EAST-NORTH order).

What to do?

Thanks

Jachym
From dcole at integrity-apps.com  Fri Jun 10 23:30:42 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Sat Jun 11 09:00:43 2011
Subject: [gdal-dev] Building Overviews for Tiles of Large images
Message-ID: <8406B84EA8899042A8508D858843972903BE598A@CHUNEX01.integrity-apps.com>

Hello again,

I am reading over some of the documentation and information I can find on GDAL.

I have some pretty large NITF images that I want to break up for purposes of displaying in a viewer I am developing. My current plan is to tile the images into 1024x1024 blocks. The full images are 32768x32768 pixels

I was hoping that as part of my tiling, I would read in the image blocks and display them as they are on disk, and as a user zoomed out, switch to "Less detailed" versions the further out they go.

I was looking at the gdaladdo sample program. Is this what I want to be looking at to try to replicate this functionality *in memory* for my viewer? Ideally all of the tiles would know what level of zoom they were at, and switch to the appropriate level of detail accordingly.

Does it sound feasible to have my code constantly switching each tile between an overview that is generated on the fly like that, or do people typically write out the lower res imagesonce to file , and re-read that new files?

Thanks for answering!

Derek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110611/13875d5a/attachment.html
From jukka.rahkonen at mmmtike.fi  Sat Jun 11 03:11:32 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat Jun 11 12:53:54 2011
Subject: [gdal-dev] Re: wfs 1.1.0 via mapserver and ogr
References: <BANLkTin3WEm4hFuG87dDiRcxdmvR=7hXyA@mail.gmail.com>
	<BANLkTin9eVK+QQX4tkY5JMQoYq5=GHK8Pg@mail.gmail.com>
Message-ID: <loom.20110611T090530-826@post.gmane.org>

Jachym Cepicky <jachym.cepicky <at> gmail.com> writes:

 
> is WRONG because of the axes are inverted, the filter *should* look like
> 
> 12.9295317871890720,48.7275012197312094 18.1965700336475784,51.1769623652315175
> 

Mapserver is doing that part RIGHT, because in WFS 1.1.0 the EPSG:4326 axis
order is Easting-Northing. You can find easily more reading from the web about
the item.

What IS wrong is using gml Box in the filter. Box does not exist in GML3 and
Envelope should be used instead.

-Jukka Rahkonen-



From jukka.rahkonen at mmmtike.fi  Sat Jun 11 03:18:06 2011
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sat Jun 11 13:00:48 2011
Subject: [gdal-dev] Re: wfs 1.1.0 via mapserver and ogr
References: <BANLkTin3WEm4hFuG87dDiRcxdmvR=7hXyA@mail.gmail.com>
	<BANLkTin9eVK+QQX4tkY5JMQoYq5=GHK8Pg@mail.gmail.com>
Message-ID: <loom.20110611T091443-397@post.gmane.org>

Jachym Cepicky <jachym.cepicky <at> gmail.com> writes:

> 
> sorry, I hit the "Send" button accidentally

Sorry, I did the same.

You mean that your Mapserver is creating the WFS 1.0.0 style filters with
Easting-Northing also when the connection is defined as WFS 1.1.0 (and with
Box)?  In that case the question belongs to Mapserver list. Please tell there
which Mapserver versions you are using.

-Jukka Rahkonen-

From chaitanya.ch at gmail.com  Sat Jun 11 08:58:01 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jun 11 18:59:32 2011
Subject: [gdal-dev] Building Overviews for Tiles of Large images
In-Reply-To: <8406B84EA8899042A8508D858843972903BE598A@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE598A@CHUNEX01.integrity-apps.com>
Message-ID: <BANLkTimHJ+s3Z+7A_EzSktao50Vw2LZ_Uw@mail.gmail.com>

Derek,

Switching to less detailed versions is not as fast as an interactive
application would like, especially if you need a good downsampling
algorithm. So, adding overviews is more important than creating tiles.
Creating tiles is more applicable for web applications where less disk
seeking is preferable.

The gdaladdo utility [1] creates and stores the overviews on the disk.

[1]: http://www.gdal.org/gdaladdo.html

On Sat, Jun 11, 2011 at 9:00 AM, Cole, Derek <dcole@integrity-apps.com>wrote:

>  Hello again,
>
> I am reading over some of the documentation and information I can find on
> GDAL.
>
> I have some pretty large NITF images that I want to break up for purposes
> of displaying in a viewer I am developing. My current plan is to tile the
> images into 1024x1024 blocks. The full images are 32768x32768 pixels
>
> I was hoping that as part of my tiling, I would read in the image blocks
> and display them as they are on disk, and as a user zoomed out, switch to
> "Less detailed" versions the further out they go.
>
> I was looking at the gdaladdo sample program. Is this what I want to be
> looking at to try to replicate this functionality *in memory* for my viewer?
> Ideally all of the tiles would know what level of zoom they were at, and
> switch to the appropriate level of detail accordingly.
>
> Does it sound feasible to have my code constantly switching each tile
> between an overview that is generated on the fly like that, or do people
> typically write out the lower res imagesonce to file , and re-read that new
> files?
>
> Thanks for answering!
>
> Derek
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110611/771e3532/attachment.html
From sglish at hotmail.com  Sun Jun 12 13:38:58 2011
From: sglish at hotmail.com (Chris English)
Date: Sun Jun 12 14:53:54 2011
Subject: [gdal-dev] Python syntax for Terragen band::SetUnitType()
Message-ID: <SNT117-W2890577077BEEA8C49B8EFC5660@phx.gbl>


Hi,
What is the proper Python syntax for SetUnitType("m") for Terragen ?
>>> type(dst_ds)<class 'osgeo.gdal.Dataset'>
The dataset (Terragen) exists, and (I think) in order for the MIN/MAXUSERPIXELVALUESto make sense it seems you'd have to SetUnitType() prior to WritingArrayin the same way you'd establish SetGeoTransform() ?etc before WriteArray.
dst_ds.SetGeoTransform ~


Thank you for you assistance.chris


 		 	   		  
From warmerdam at pobox.com  Sun Jun 12 13:47:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jun 12 15:01:40 2011
Subject: [gdal-dev] Python syntax for Terragen band::SetUnitType()
In-Reply-To: <SNT117-W2890577077BEEA8C49B8EFC5660@phx.gbl>
References: <SNT117-W2890577077BEEA8C49B8EFC5660@phx.gbl>
Message-ID: <4DF4FBA7.3050506@pobox.com>

On 11-06-12 01:38 PM, Chris English wrote:
>
> Hi,
> What is the proper Python syntax for SetUnitType("m") for Terragen ?
>>>> type(dst_ds)<class 'osgeo.gdal.Dataset'>
> The dataset (Terragen) exists, and (I think) in order for the MIN/MAXUSERPIXELVALUESto make sense it seems you'd have to SetUnitType() prior to WritingArrayin the same way you'd establish SetGeoTransform()  etc before WriteArray.
> dst_ds.SetGeoTransform ~

Chris,

I haven't tried it, but it should be something like:

   ds.GetRasterBand(1).SetUnitType("m")

where "ds" is the gdal.Dataset you got from this Create() method.

I have confirmed there is a Python wrapper for this method.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ngarel at micromine.com  Mon Jun 13 00:14:36 2011
From: ngarel at micromine.com (Nicolas Garel)
Date: Mon Jun 13 02:05:32 2011
Subject: [gdal-dev] Problem with export from GIS file to MSSQL with 3D data
	points 
Message-ID: <125F609FE1635548AF411AFA01558DFA1CB0B84B04@PER-SRV-EM1.micromine.com.au>

Hi,

The export from a file (tested on .gml and .shp) to a table in MSSQL Spatial database does not work properly when the data points use 3 dimensions.

For instance, I have a file (test02.gml) with 2 LineString:

  <gml:featureMember>
    <ogr:test02 fid="F0">
      <ogr:geometryProperty><gml:LineString><gml:coordinates>114.82008919027152,-30.533088637478372,200 114.84597389066435,-30.695620477154364,200 115.11987013900723,-30.685988960729119,200 115.10361695503964,-30.554759549435168,200 115.05726528224315,-30.558973337871215,200 114.82008919027152,-30.533088637478372,200</gml:coordinates></gml:LineString></ogr:geometryProperty>
    </ogr:test02>
  </gml:featureMember>
  <gml:featureMember>
    <ogr:test02 fid="F1">
      <ogr:geometryProperty><gml:LineString><gml:coordinates>114.87649177159327,-30.506319349105187,195 114.96677069805884,-30.538409014910489,205</gml:coordinates></gml:LineString></ogr:geometryProperty>
    </ogr:test02>
  </gml:featureMember>
</ogr:FeatureCollection>

As shown above the first LineString has a constant elevation (Z component) of 200 and the second LineString as an elevation of 195 and 205. When using ogr2ogr to export the data to a MSSQL Spatial database, the Z components are written in the wrong place in the geometry column.
I used the following command line to export to MSSQL:

ogr2ogr -overwrite -f MSSQLSpatial "MSSQL:server=<my server>;database=Spatial;trusted_connection=yes" "C:\Work\test02.gml"

Then I use ogrinfo to dump the content of the table:

ogrinfo -al "MSSQL:server=mm00786\mm00786;database=Spatial;tables=dbo.test02;trusted_connection=yes"

Layer name: test02
Geometry: Unknown (any)
Feature Count: 2
Extent: (-30.695620, -30.554760) - (200.000000, 200.000000)
Layer SRS WKT:
(unknown)
FID Column = ogr_fid
Geometry Column = ogr_geometry
OGRFeature(test02):1
  LINESTRING (114.82008919027152 -30.533088637478368 114.84597389066435,-30.695620477154364 115.11987013900723 -30.685988960729119,115.10361695503964 -30.554759549435168 115.05726528224316,-30.558973337871212 114.82008919027152 -30.533088637478368,200 200 200,200 200 200)

OGRFeature(test02):2
  LINESTRING (114.87649177159328 -30.506319349105187 114.96677069805884,-30.538409014910489 195.0 205)

All the Z components are written at the end of LINESTRING and the comma delimiter is then set at the wrong spot.

Thus importing the results back to GML are obviously wrong. This scenario also happens for Polygons feature type and other input files.

I'm using GDAL 1.8.0.

Thanks.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110613/4cd5642b/attachment.html
From alexandre.gacon+gdal at gmail.com  Mon Jun 13 03:52:53 2011
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Mon Jun 13 05:53:19 2011
Subject: [gdal-dev] Differences in behavior between pgsql query and use of
	GDAL API
Message-ID: <BANLkTi=7DgZnjiwsgfwU+XS8tFfpQaOOpQ@mail.gmail.com>

Hi,

I need to do the following request to find some data:

- I have a bunch of towns (let's call them group A)
- I retrieve the towns touching the group A (let's call them group B)
- I make the union of group A and group B
- I ask the towns covered by the resulting union

For the moment, I use GDAL to do the processing like that:

- I use OGRGeometry::Union to make the union of group A towns
- I send a request to a postgis database with a ST_Touches where clause and
the group A geometry as WKT
- I make the union of the resulting geometries with OGRGeometry::Union
- I send a request to a postgis database with a ST_Covers where clause and
the union of group A and group B as WKT

My problem is that I don't retrieve all the towns I initially have to build
my geometry.

If I try to do the same request totally in pgsql (union, touches and
covers), I have the awaited result. If I compare the area of the geometry of
the ST_Covers where clause (between generation with GDAL and computation by
postgis), I ha ve the same area.

What could explain the difference in the result ? Precision loss in GDAL ?
Precision loss because of the use of WKT ? Should I use WKB instead of WKT ?
Should I do all my computations in postgis ?

-- 
Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110613/9e7344b5/attachment.html
From sigfrido at tiscali.it  Mon Jun 13 04:25:31 2011
From: sigfrido at tiscali.it (Luca Sigfrido Percich)
Date: Mon Jun 13 06:30:33 2011
Subject: [gdal-dev] Differences in behavior between pgsql query and use of
	GDAL API
In-Reply-To: <BANLkTi=7DgZnjiwsgfwU+XS8tFfpQaOOpQ@mail.gmail.com>
References: <BANLkTi=7DgZnjiwsgfwU+XS8tFfpQaOOpQ@mail.gmail.com>
Message-ID: <1307953531.4274.11.camel@GOLEM>

Hi Alexandre,

if I well understood your problem, you're already doing half of the job
(the queries)in PostGIS, so why not doing everything using PostGIS
queries?
Moreover, I think you don't need union.

Assuming towns is a polygon layer, try:

select distinct t.* from 
  towns as t,
  (select distinct * from towns where town_in_group_A_condition) as t2
 where t.fid = t2.fid or touches(t.geom, t2.geom);

Let us know.

All the best

Sig


Il giorno lun, 13/06/2011 alle 09.52 +0200, Alexandre Gacon ha scritto:
> Hi,
> 
> 
> I need to do the following request to find some data:
> 
> 
> - I have a bunch of towns (let's call them group A)
> - I retrieve the towns touching the group A (let's call them group B)
> - I make the union of group A and group B
> - I ask the towns covered by the resulting union
> 
> 
> For the moment, I use GDAL to do the processing like that:
> 
> 
> - I use OGRGeometry::Union to make the union of group A towns
> - I send a request to a postgis database with a ST_Touches where
> clause and the group A geometry as WKT
> - I make the union of the resulting geometries with OGRGeometry::Union
> - I send a request to a postgis database with a ST_Covers where clause
> and the union of group A and group B as WKT
> 
> 
> My problem is that I don't retrieve all the towns I initially have to
> build my geometry.
> 
> 
> If I try to do the same request totally in pgsql (union, touches and
> covers), I have the awaited result. If I compare the area of the
> geometry of the ST_Covers where clause (between generation with GDAL
> and computation by postgis), I ha ve the same area.
> 
> 
> What could explain the difference in the result ? Precision loss in
> GDAL ? Precision loss because of the use of WKT ? Should I use WKB
> instead of WKT ? Should I do all my computations in postgis ?
> 
> -- 
> Alexandre Gacon
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


_____________
PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).

PRIVACY
Le informazioni contenute in questo messaggio sono riservate e confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei non fosse la persona a cui il presente messaggio ? destinato, La invitiamo ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe, dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla legislazione europea (Direttiva 2002/58/CE).
From DCarreira at edia.pt  Mon Jun 13 10:38:12 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Mon Jun 13 13:11:35 2011
Subject: [gdal-dev] SDE driver: connecting to rasters never returns
Message-ID: <58C383B0A191E747BE79503F3EEA22BF8960B4B1A7@beja012.edia.pt>

Hello listers.

So now that OGR connecting is solved by specifying the version name (or maybe by making a readonly connection), I'm stumbling on the same effect when connecting to a raster with gdalinfo or gdal_translate. But there is no option to specify  version or readonly...

My gdalinfo/translate commands never end... they keep going with 0 cpu...

This is the same raster that I used when reporting #2063<http://trac.osgeo.org/gdal/ticket/2063>...

One example command:
gdal_translate -of vrt SDE:server,5151,database,user,pwd,user.MOSAIC_ORTO_10K_IGEOE,RASTER c:\temp\gdalteste.vrt


Anyway I can debug this?


Thanks.
Duarte
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110613/e249626e/attachment.html
From elijah at villagis.com  Mon Jun 13 11:06:23 2011
From: elijah at villagis.com (Elijah Robison)
Date: Mon Jun 13 13:31:06 2011
Subject: [gdal-dev] gisinternals GDAL builds
In-Reply-To: <BANLkTimdPknTuiEQVEKMfgBfTYop-82RUA@mail.gmail.com>
References: <4DC1A22B.4050807@ciesin.columbia.edu>
	<BANLkTimdPknTuiEQVEKMfgBfTYop-82RUA@mail.gmail.com>
Message-ID: <4DF6276F.6070107@villagis.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110613/da176349/attachment.html
From hobu.inc at gmail.com  Mon Jun 13 11:27:46 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon Jun 13 13:53:43 2011
Subject: [gdal-dev] SDE driver: connecting to rasters never returns
In-Reply-To: <58C383B0A191E747BE79503F3EEA22BF8960B4B1A7@beja012.edia.pt>
References: <58C383B0A191E747BE79503F3EEA22BF8960B4B1A7@beja012.edia.pt>
Message-ID: <676F29AE-2F76-44EA-A90F-486E476BB4CB@gmail.com>


On Jun 13, 2011, at 9:38 AM, Duarte Carreira wrote:

> Hello listers.
>  
> So now that OGR connecting is solved by specifying the version name (or maybe by making a readonly connection), I?m stumbling on the same effect when connecting to a raster with gdalinfo or gdal_translate. But there is no option to specify  version or readonly?
>  
> My gdalinfo/translate commands never end? they keep going with 0 cpu?
>  
> This is the same raster that I used when reporting #2063?
>  
> One example command:
> gdal_translate -of vrt SDE:server,5151,database,user,pwd,user.MOSAIC_ORTO_10K_IGEOE,RASTER c:\temp\gdalteste.vrt
>  
>  
> Anyway I can debug this?

set the environment variable CPL_DEBUG=on  This should allow you to watch the connection happen and at the very least, see where it is hanging in either the SDE connection or query process.

Note that I wrote the SDE driver, but I haven't had a running SDE instance for years, and I am in no position to test. sorry.

Howard


From DCarreira at edia.pt  Mon Jun 13 11:37:53 2011
From: DCarreira at edia.pt (Duarte Carreira)
Date: Mon Jun 13 14:14:26 2011
Subject: [gdal-dev] SDE driver: connecting to rasters never returns
In-Reply-To: <676F29AE-2F76-44EA-A90F-486E476BB4CB@gmail.com>
References: <58C383B0A191E747BE79503F3EEA22BF8960B4B1A7@beja012.edia.pt>
	<676F29AE-2F76-44EA-A90F-486E476BB4CB@gmail.com>
Message-ID: <58C383B0A191E747BE79503F3EEA22BF8960B4B1C6@beja012.edia.pt>

Howard,

This is the output:

GDAL: Auto register C:\OSGeo4W\bin\gdalplugins\1.8\gdal_MG4Lidar.dll using GDALR
egister_MG4Lidar.
GDAL: Auto register C:\OSGeo4W\bin\gdalplugins\1.8\gdal_MrSID.dll using GDALRegi
ster_MrSID.
GDAL: Auto register C:\OSGeo4W\bin\gdalplugins\1.8\gdal_SDE.dll using GDALRegist
er_SDE.
SDERASTER: Open("SDE:xxx,5151,database,yyyy,zzzz,sig_owner.
MOSAIC_ORTO_10K_IGEOE,RASTER") revealed 7 tokens.
SDERASTER: SDE Column name is 'RASTER'
SDERASTER: 'sig_owner.MOSAIC_ORTO_10K_IGEOE' raster layer specified... using it
directly with 'RASTER' as the raster column name.
SDERASTER: minx: 174950.20000, miny: 99950.20000, maxx: 295049.80000, maxy: 2100
49.80000
SDERASTER: Tile origin: 174914.20000, 210083.40000
GDAL: GDALDeregister_GTiff() called.


So it stops at SDERASTER: Tile origin: ...
Because the last line appears only after pressing Ctrl-C  (GDAL: GDALDeregister GTiff).

I'm really sorry you don't have access to ArcSDE anymore... I can offer my time to test though.

Duarte

-----Mensagem original-----
De: Howard Butler [mailto:hobu.inc@gmail.com]
Enviada: segunda-feira, 13 de Junho de 2011 16:28
Para: Duarte Carreira
Cc: gdal-dev@lists.osgeo.org
Assunto: Re: [gdal-dev] SDE driver: connecting to rasters never returns


On Jun 13, 2011, at 9:38 AM, Duarte Carreira wrote:

> Hello listers.
>
> So now that OGR connecting is solved by specifying the version name (or maybe by making a readonly connection), I'm stumbling on the same effect when connecting to a raster with gdalinfo or gdal_translate. But there is no option to specify  version or readonly...
>
> My gdalinfo/translate commands never end... they keep going with 0 cpu...
>
> This is the same raster that I used when reporting #2063...
>
> One example command:
> gdal_translate -of vrt SDE:server,5151,database,user,pwd,user.MOSAIC_ORTO_10K_IGEOE,RASTER c:\temp\gdalteste.vrt
>
>
> Anyway I can debug this?

set the environment variable CPL_DEBUG=on  This should allow you to watch the connection happen and at the very least, see where it is hanging in either the SDE connection or query process.

Note that I wrote the SDE driver, but I haven't had a running SDE instance for years, and I am in no position to test. sorry.

Howard


From szekerest at gmail.com  Mon Jun 13 14:14:32 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jun 13 16:49:49 2011
Subject: [gdal-dev] Re: gisinternals GDAL builds
In-Reply-To: <4DF6276F.6070107@villagis.com>
References: <4DC1A22B.4050807@ciesin.columbia.edu>
	<BANLkTimdPknTuiEQVEKMfgBfTYop-82RUA@mail.gmail.com>
	<4DF6276F.6070107@villagis.com>
Message-ID: <BANLkTikccE2_digmSmb7ov_FZJOR92H53w@mail.gmail.com>

Hi Elijah,

With regards to the CRT dependency I would always recommend to use that
version which corresponds to the CRT dep. of the application. You might use
the Dependency Walker tool to identify which CRT dll the application depends
on. For example the official python (python.org) windows builds (python.exe)
use the following dependencies:

Python 2.5 MSVC71 (1310)
Pyrton 2.6 MSVC90 (1500)
Python 2.7 MSVC90 (1500)
Python 3.1 MSVC90 (1500)

Best regards,

Tamas




2011/6/13 Elijah Robison <elijah@villagis.com>

>  Hi Tamas and GDAL devs,
>
> I recently used Tamas' Win binaries (http://www.gisinternals.com/sdk/) to
> install Gdal 1.8 for Python 2.7, and everything is working fine---*Tamas,
> thanks so much for providing those*.
>
> However, I do have a question about selecting the correct release, and want
> to confirm if I "got lucky" on my first shot, or if there is something more
> I should know were I to pass advice along to others.
>
> Under "Compiler (Platform)", I chose MSVC2010 (Win32), which corresponds to
> release-1600-gdal-1-8-0-mapserver-6-0-0<http://PackageList.aspx?file=release-1600-gdal-1-8-0-mapserver-6-0-0.zip>.
> But I am unclear as to what "CRT dependencies" are, as well as the MSVC
> acronym and the 1600-value prepended to the package name (as opposed to
> 1310, 1400, 1500). Would someone mind summarizing these for me?
>
> The various Win binaries include the same array of MSIs, so matching the
> correct Python version is obvious, as well as the 32/64 split----but, would
> my install have worked if I used a different MSVC/number combo?
>
> Thanks in advance for your time,
>
> Elijah Robison
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110613/9b41e274/attachment.html
From alexmantaut at suremptec.com.ar  Mon Jun 13 16:53:38 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Mon Jun 13 19:37:42 2011
Subject: [gdal-dev] HDF5 metadata format problems
Message-ID: <BANLkTinpHjRmj1DR32PQid=snTT=dBe9cQ@mail.gmail.com>

Hi all:
        I've ran into some troubles while trying to interpret an HDF5's
metadata...

Every field on HDF5 has it's own type(string, uchar, double) But
GetMetadataItem("field_name")  converts the data from the dataset into a
C-style zero terminated string.

This gives me a few problems:

 a-This string has a trailing space for some datatypes, but not for others
(in unsigned char there is no space) ... There is no comment in the driver's
code explaining if this is necesary or not(hdf5dataset.cpp from line 661)...
I need to know if there will allways be a trailing space or not, to be able
to perform type conversion on the data...

b-Some items are type double and have more than 6 digits on the integer
part, but the string show the output in exponential notation, that makes me
lose some significant digits...

I looked into the code and the problems seems to be on hdf5dataset.cpp on
line 744, and changed the type on sprintf() from %g to %f, But now the
number of decimal digits is fixed, which could bring me similar problems
when using doubles... The question is: Is there a convention on how many
decimal digits you have to show on the string? there could be another way to
return a number from an item that doesn't truncate the digits?

Given all this problems i wonder: Could somebody provide a way to retrieve
the data in it's binary form with maybe some information on the metadata's
type? or this would only be usefull on the HDF5 format?

Sorry for the long mail

Thanks in advance

--
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
javierurien@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110613/b16c3b01/attachment-0001.html
From warmerdam at pobox.com  Mon Jun 13 17:06:18 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun 13 19:51:10 2011
Subject: [gdal-dev] HDF5 metadata format problems
In-Reply-To: <BANLkTinpHjRmj1DR32PQid=snTT=dBe9cQ@mail.gmail.com>
References: <BANLkTinpHjRmj1DR32PQid=snTT=dBe9cQ@mail.gmail.com>
Message-ID: <4DF67BCA.8000608@pobox.com>

On 11-06-13 04:53 PM, Alex Mantaut wrote:
> Hi all:
>          I've ran into some troubles while trying to interpret an HDF5's
> metadata...
>
> Every field on HDF5 has it's own type(string, uchar, double) But
> GetMetadataItem("field_name")  converts the data from the dataset into a
> C-style zero terminated string.
>
> This gives me a few problems:
>
>   a-This string has a trailing space for some datatypes, but not for others (in
> unsigned char there is no space) ... There is no comment in the driver's code
> explaining if this is necesary or not(hdf5dataset.cpp from line 661)... I need
> to know if there will allways be a trailing space or not, to be able to perform
> type conversion on the data...

Alex,

I don't quite grasp why you need to know if there will be a trailing
space.  I see the spaces are being appended as a separator in the hdf5
driver in case the value is actually an array of values.  I would suggest
you just strip off trailing white space in your client code if it is an
issue.

> b-Some items are type double and have more than 6 digits on the integer part,
> but the string show the output in exponential notation, that makes me lose some
> significant digits...
>
> I looked into the code and the problems seems to be on hdf5dataset.cpp on line
> 744, and changed the type on sprintf() from %g to %f, But now the number of
> decimal digits is fixed, which could bring me similar problems when using
> doubles... The question is: Is there a convention on how many
> decimal digits you have to show on the string? there could be another way to
> return a number from an item that doesn't truncate the digits?

To preserve precision it is normal to format these as %.15g.  I believe
this does a pretty good job of preserving double precision floating point.

I have changed the float and double code to use this format in trunk and
1.8 branches.

> Given all this problems i wonder: Could somebody provide a way to retrieve the
> data in it's binary form with maybe some information on the metadata's type? or
> this would only be usefull on the HDF5 format?

This would be a substantial change to the metadata handling mechanism in
GDAL and is unlikely to occur.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dcole at integrity-apps.com  Mon Jun 13 18:52:20 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Mon Jun 13 21:42:51 2011
Subject: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time
Message-ID: <8406B84EA8899042A8508D858843972903BE5F7C@CHUNEX01.integrity-apps.com>

Hello,

I have the following code:

    qDebug("tilePosX: %i ", this->tilePosX);
    qDebug("tilePosY: %i ", this->tilePosY);


    float * floatData = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);
    poBand->RasterIO( GF_Read, this->tilePosX*nXSize, this->tilePosY*nYSize, nXSize, nYSize, floatData, nXSize, nYSize,GDT_Float32, 0, 0 );

I am using this to read in "tiles" from a larger image, to avoid having to do massive read operations.

This seems to work great for an uncompressed nitf, however, when trying it on a JPEG2000 image, it seems to be highly unstable. Sometimes my software crashes, and sometimes I get no data back, and usually it gives a splurge of info like below, whee tilePosX and tilePosY is the "block" in the file I am trying to read. nX/nY Size variables are obtained from the GetBlockSize() function on the band., which is this case is 1024x1024.

Is there a problem with OpenJPEG2000? I have tried to use jasper already, and it was painfully slow. Starting to run out of options here.

Also, as a side note, I am doing this operation in a separate thread from my GUI, and it should be waiting for the data to be returned before returning to my main..which like i said is working fine when it is uncompressed - but does this driver perhaps return a simple allocated array or something it is populated asynchronously? Some of the blocks come back looking right, some are scrambled, and some are all black in my viewer.


ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 0, Y offset 0

ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

Loading Pixmap

tilePosX: 1

tilePosY: 0

ERROR 1: Stream too short, expected SOT

ERROR 1: opj_decode_tile_data() failed

ERROR 1: IReadBlock failed at X offset 1, Y offset 0

ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 0

Loading Pixmap

tilePosX: 0

tilePosY: 1

Loading Pixmap

tilePosX: 1

tilePosY: 1

Loading Pixmap

tilePosX: 0

tilePosY: 1

Loading Pixmap

tilePosX: 1

tilePosY: 1

ERROR 1: Stream too short

ERROR 1: opj_decode_tile_data() failed

ERROR 1: IReadBlock failed at X offset 1, Y offset 1

ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 1

Loading Pixmap

tilePosX: 1

tilePosY: 1

Loading Pixmap

tilePosX: 1

tilePosY: 1

Loading Pixmap

tilePosX: 2

tilePosY: 0

Loading Pixmap

tilePosX: 2

tilePosY: 1

ERROR 1: Expected a SOC marker

ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 2, Y offset 0

ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 0

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 2, Y offset 1

ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 1

Loading Pixmap

Loading Pixmap

tilePosX: 2

tilePosY: 0

tilePosX: 2

tilePosY: 1

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 2, Y offset 1

ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 1

ERROR 1: Stream too short, expected SOT

ERROR 1: opj_decode_tile_data() failed

ERROR 1: IReadBlock failed at X offset 2, Y offset 0

ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 0

Loading Pixmap

tilePosX: 2

tilePosY: 0

Loading Pixmap

tilePosX: 2

tilePosY: 0

Loading Pixmap

tilePosX: 0

tilePosY: 2

Loading Pixmap

tilePosX: 1

tilePosY: 2

Loading Pixmap

tilePosX: 2

tilePosY: 2

ERROR 1: Stream too short

ERROR 1: opj_decode_tile_data() failed

ERROR 1: IReadBlock failed at X offset 2, Y offset 2

ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 2

Loading Pixmap

tilePosX: 1

tilePosY: 2

Loading Pixmap

tilePosX: 2

Loading Pixmap

tilePosY: 2

tilePosX: 3

tilePosY: 0

Loading Pixmap

tilePosX: 3

tilePosY: 1

Loading Pixmap

tilePosX: 3

tilePosY: 2

ERROR 1: Expected a SOC marker

ERROR 1: Expected a SOC marker

ERROR 1: opj_read_header() failed

ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 3, Y offset 1

ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 1

ERROR 1: IReadBlock failed at X offset 2, Y offset 2

ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 2

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 3, Y offset 2

ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 2

ERROR 1: Stream too short, expected SOT

ERROR 1: opj_decode_tile_data() failed

ERROR 1: IReadBlock failed at X offset 3, Y offset 0

ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 0

Loading Pixmap

Loading Pixmap

tilePosX: 2

tilePosX: 3

Loading Pixmap

Loading Pixmap

tilePosY: 0

tilePosX: 3

tilePosX: 3

tilePosY: 2

tilePosY: 1

tilePosY: 2

ERROR 1: Expected a SOC marker

ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 2, Y offset 2

ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 2

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 3, Y offset 2

ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 2

ERROR 1: IReadBlock failed at X offset 3, Y offset 1

ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 1

Loading Pixmap

Loading Pixmap

tilePosX: 2

tilePosY: 2

tilePosX: 3

tilePosY: 0

Loading Pixmap

tilePosX: 3

tilePosY: 2

ERROR 1: Stream too short

ERROR 1: opj_decode_tile_data() failed

ERROR 1: IReadBlock failed at X offset 3, Y offset 2

ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 2

Loading Pixmap

tilePosX: 0

tilePosY: 3

Loading Pixmap

tilePosX: 1

tilePosY: 3

ERROR 1: Stream too short, expected SOT

ERROR 1: opj_decode_tile_data() failed

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed

ERROR 1: IReadBlock failed at X offset 1, Y offset 3

ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 3

ERROR 1: IReadBlock failed at X offset 0, Y offset 3

ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3

Loading Pixmap

tilePosX: 2

tilePosY: 3

Loading Pixmap

tilePosX: 3

tilePosY: 3

Loading Pixmap

tilePosX: 3

tilePosY: 3


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110613/cead42e7/attachment-0001.html
From chaitanya.ch at gmail.com  Mon Jun 13 23:13:10 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jun 14 02:18:04 2011
Subject: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time
In-Reply-To: <8406B84EA8899042A8508D858843972903BE5F7C@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE5F7C@CHUNEX01.integrity-apps.com>
Message-ID: <BANLkTi=4cWOZ6NXXGucNQyAviuHBYYH5BQ@mail.gmail.com>

Derek,

Can you provide a screenshot of the displayed image. Especially the
scrambled blocks.

On Tue, Jun 14, 2011 at 4:22 AM, Cole, Derek <dcole@integrity-apps.com>wrote:

>  Hello,
>
> I have the following code:
>
>     qDebug("tilePosX: %i ", this->tilePosX);
>     qDebug("tilePosY: %i ", this->tilePosY);
>
>
>     float * floatData = (float *) CPLMalloc(sizeof(float)*nXSize*nYSize);
>     poBand->RasterIO( GF_Read, this->tilePosX*nXSize,
> this->tilePosY*nYSize, nXSize, nYSize, floatData, nXSize,
> nYSize,GDT_Float32, 0, 0 );
>
> I am using this to read in "tiles" from a larger image, to avoid having to
> do massive read operations.
>
> This seems to work great for an uncompressed nitf, however, when trying it
> on a JPEG2000 image, it seems to be highly unstable. Sometimes my software
> crashes, and sometimes I get no data back, and usually it gives a splurge of
> info like below, whee tilePosX and tilePosY is the "block" in the file I am
> trying to read. nX/nY Size variables are obtained from the GetBlockSize()
> function on the band., which is this case is 1024x1024.
>
> Is there a problem with OpenJPEG2000? I have tried to use jasper already,
> and it was painfully slow. Starting to run out of options here.
>
> Also, as a side note, I am doing this operation in a separate thread from
> my GUI, and it should be waiting for the data to be returned before
> returning to my main..which like i said is working fine when it is
> uncompressed - but does this driver perhaps return a simple allocated array
> or something it is populated asynchronously? Some of the blocks come back
> looking right, some are scrambled, and some are all black in my viewer.
>
>   ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
>
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>
> Loading Pixmap
>
> tilePosX: 1
>
> tilePosY: 0
>
> ERROR 1: Stream too short, expected SOT
>
>  ERROR 1: opj_decode_tile_data() failed
>
> ERROR 1: IReadBlock failed at X offset 1, Y offset 0
>
> ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 0
>
> Loading Pixmap
>
> tilePosX: 0
>
> tilePosY: 1
>
> Loading Pixmap
>
> tilePosX: 1
>
> tilePosY: 1
>
> Loading Pixmap
>
> tilePosX: 0
>
> tilePosY: 1
>
> Loading Pixmap
>
> tilePosX: 1
>
> tilePosY: 1
>
> ERROR 1: Stream too short
>
>  ERROR 1: opj_decode_tile_data() failed
>
> ERROR 1: IReadBlock failed at X offset 1, Y offset 1
>
> ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 1
>
> Loading Pixmap
>
> tilePosX: 1
>
> tilePosY: 1
>
> Loading Pixmap
>
> tilePosX: 1
>
> tilePosY: 1
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosY: 0
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosY: 1
>
> ERROR 1: Expected a SOC marker
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 2, Y offset 0
>
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 0
>
> ERROR 1: Marker is not compliant with its position
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 2, Y offset 1
>
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 1
>
> Loading Pixmap
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosY: 0
>
> tilePosX: 2
>
> tilePosY: 1
>
> ERROR 1: Marker is not compliant with its position
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 2, Y offset 1
>
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 1
>
> ERROR 1: Stream too short, expected SOT
>
>  ERROR 1: opj_decode_tile_data() failed
>
> ERROR 1: IReadBlock failed at X offset 2, Y offset 0
>
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 0
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosY: 0
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosY: 0
>
> Loading Pixmap
>
> tilePosX: 0
>
> tilePosY: 2
>
> Loading Pixmap
>
> tilePosX: 1
>
> tilePosY: 2
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosY: 2
>
> ERROR 1: Stream too short
>
>  ERROR 1: opj_decode_tile_data() failed
>
> ERROR 1: IReadBlock failed at X offset 2, Y offset 2
>
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 2
>
> Loading Pixmap
>
> tilePosX: 1
>
> tilePosY: 2
>
> Loading Pixmap
>
> tilePosX: 2
>
> Loading Pixmap
>
> tilePosY: 2
>
> tilePosX: 3
>
> tilePosY: 0
>
> Loading Pixmap
>
> tilePosX: 3
>
> tilePosY: 1
>
> Loading Pixmap
>
> tilePosX: 3
>
> tilePosY: 2
>
> ERROR 1: Expected a SOC marker
>
>  ERROR 1: Expected a SOC marker
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 3, Y offset 1
>
> ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 1
>
> ERROR 1: IReadBlock failed at X offset 2, Y offset 2
>
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 2
>
> ERROR 1: Marker is not compliant with its position
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 3, Y offset 2
>
> ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 2
>
> ERROR 1: Stream too short, expected SOT
>
>  ERROR 1: opj_decode_tile_data() failed
>
> ERROR 1: IReadBlock failed at X offset 3, Y offset 0
>
> ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 0
>
> Loading Pixmap
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosX: 3
>
> Loading Pixmap
>
> Loading Pixmap
>
> tilePosY: 0
>
> tilePosX: 3
>
> tilePosX: 3
>
> tilePosY: 2
>
> tilePosY: 1
>
> tilePosY: 2
>
> ERROR 1: Expected a SOC marker
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 2, Y offset 2
>
> ERROR 1: GetBlockRef failed at X block offset 2, Y block offset 2
>
> ERROR 1: Marker is not compliant with its position
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: Marker is not compliant with its position
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 3, Y offset 2
>
> ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 2
>
> ERROR 1: IReadBlock failed at X offset 3, Y offset 1
>
> ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 1
>
> Loading Pixmap
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosY: 2
>
> tilePosX: 3
>
> tilePosY: 0
>
> Loading Pixmap
>
> tilePosX: 3
>
> tilePosY: 2
>
> ERROR 1: Stream too short
>
>  ERROR 1: opj_decode_tile_data() failed
>
> ERROR 1: IReadBlock failed at X offset 3, Y offset 2
>
> ERROR 1: GetBlockRef failed at X block offset 3, Y block offset 2
>
> Loading Pixmap
>
> tilePosX: 0
>
> tilePosY: 3
>
> Loading Pixmap
>
> tilePosX: 1
>
> tilePosY: 3
>
> ERROR 1: Stream too short, expected SOT
>
>  ERROR 1: opj_decode_tile_data() failed
>
> ERROR 1: Marker is not compliant with its position
>
>  ERROR 1: opj_read_header() failed
>
> ERROR 1: IReadBlock failed at X offset 1, Y offset 3
>
> ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 3
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 3
>
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 3
>
> Loading Pixmap
>
> tilePosX: 2
>
> tilePosY: 3
>
> Loading Pixmap
>
> tilePosX: 3
>
> tilePosY: 3
>
> Loading Pixmap
>
> tilePosX: 3
>
> tilePosY: 3
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110614/afd4e691/attachment-0001.html
From alexandre.gacon+gdal at gmail.com  Tue Jun 14 02:42:22 2011
From: alexandre.gacon+gdal at gmail.com (Alexandre Gacon)
Date: Tue Jun 14 05:58:11 2011
Subject: [gdal-dev] Differences in behavior between pgsql query and use of
	GDAL API
In-Reply-To: <1307953531.4274.11.camel@GOLEM>
References: <BANLkTi=7DgZnjiwsgfwU+XS8tFfpQaOOpQ@mail.gmail.com>
	<1307953531.4274.11.camel@GOLEM>
Message-ID: <BANLkTinLtD5M4Rr46oC0MWhXGAEb1G+rFA@mail.gmail.com>

Hi Luca,

I follow your advice and now I have all my features. I had to do some
union/collect to have the awaited result.

It's just sad that I can't take more advantage of GDAL to do this : do we
know why my first method can't work ? Because of a limitation in
ST_GeomFromText ? Because of a limitation in GDAL ? Should I used WKB
instead of WKT to have the same result ?

Regards,

Alexandre Gacon

2011/6/13 Luca Sigfrido Percich <sigfrido@tiscali.it>

> Hi Alexandre,
>
> if I well understood your problem, you're already doing half of the job
> (the queries)in PostGIS, so why not doing everything using PostGIS
> queries?
> Moreover, I think you don't need union.
>
> Assuming towns is a polygon layer, try:
>
> select distinct t.* from
>  towns as t,
>  (select distinct * from towns where town_in_group_A_condition) as t2
>  where t.fid = t2.fid or touches(t.geom, t2.geom);
>
> Let us know.
>
> All the best
>
> Sig
>
>
> Il giorno lun, 13/06/2011 alle 09.52 +0200, Alexandre Gacon ha scritto:
> > Hi,
> >
> >
> > I need to do the following request to find some data:
> >
> >
> > - I have a bunch of towns (let's call them group A)
> > - I retrieve the towns touching the group A (let's call them group B)
> > - I make the union of group A and group B
> > - I ask the towns covered by the resulting union
> >
> >
> > For the moment, I use GDAL to do the processing like that:
> >
> >
> > - I use OGRGeometry::Union to make the union of group A towns
> > - I send a request to a postgis database with a ST_Touches where
> > clause and the group A geometry as WKT
> > - I make the union of the resulting geometries with OGRGeometry::Union
> > - I send a request to a postgis database with a ST_Covers where clause
> > and the union of group A and group B as WKT
> >
> >
> > My problem is that I don't retrieve all the towns I initially have to
> > build my geometry.
> >
> >
> > If I try to do the same request totally in pgsql (union, touches and
> > covers), I have the awaited result. If I compare the area of the
> > geometry of the ST_Covers where clause (between generation with GDAL
> > and computation by postgis), I ha ve the same area.
> >
> >
> > What could explain the difference in the result ? Precision loss in
> > GDAL ? Precision loss because of the use of WKT ? Should I use WKB
> > instead of WKT ? Should I do all my computations in postgis ?
> >
> > --
> > Alexandre Gacon
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _____________
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e
> confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario
> del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei
> non fosse la persona a cui il presente messaggio ? destinato, La invitiamo
> ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe,
> dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni
> utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
> legislazione europea (Direttiva 2002/58/CE).
>
> PRIVACY
> Le informazioni contenute in questo messaggio sono riservate e
> confidenziali. Il loro utilizzo e' consentito esclusivamente al destinatario
> del messaggio, per le finalit? indicate nel messaggio stesso. Qualora Lei
> non fosse la persona a cui il presente messaggio ? destinato, La invitiamo
> ad eliminarlo dal Suo Sistema e a distruggere le varie copie o stampe,
> dandone gentilmente comunicazione all?indirizzo mail del mittente. Ogni
> utilizzo improprio e' contrario ai principi del D.lgs 196/03 e alla
> legislazione europea (Direttiva 2002/58/CE).
>



-- 
Alexandre Gacon
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110614/2f5895f0/attachment.html
From alexmantaut at suremptec.com.ar  Tue Jun 14 10:08:12 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Tue Jun 14 13:48:19 2011
Subject: [gdal-dev] HDF5 metadata format problems
In-Reply-To: <4DF67BCA.8000608@pobox.com>
References: <BANLkTinpHjRmj1DR32PQid=snTT=dBe9cQ@mail.gmail.com>
	<4DF67BCA.8000608@pobox.com>
Message-ID: <BANLkTim1vAnGJmhUe3a77xK-H8MiENZpkg@mail.gmail.com>

Hi Frank:
            Thanks for your response. I wasn't sure if the whitespace was
allways going to be there, because for some fields had the white space but
others didn't. I will remove the trailing whitespace.

Now, I'm trying to develop a modification on the HDF5 driver to allow it to
get the georreference information from COSMO-SKYMED HDF5 files... The thing
is I'm not really familiar with the libraries used by GDAL(the use of
iostream is not allowed right?), what would be the better way to trim a
string? I looked into cpl_string and didn't found a simple way to do it (I
could use CSLTokenizeString() and get the first field on the list, but this
seems overly convoluted for a simple trim)

Also, is there any guidelines on which libraries to use on C++ in replace of
their std equivalents?

Thanks again
Alex




2011/6/13 Frank Warmerdam <warmerdam@pobox.com>

> On 11-06-13 04:53 PM, Alex Mantaut wrote:
>
>> Hi all:
>>         I've ran into some troubles while trying to interpret an HDF5's
>> metadata...
>>
>> Every field on HDF5 has it's own type(string, uchar, double) But
>> GetMetadataItem("field_name")  converts the data from the dataset into a
>> C-style zero terminated string.
>>
>> This gives me a few problems:
>>
>>  a-This string has a trailing space for some datatypes, but not for others
>> (in
>> unsigned char there is no space) ... There is no comment in the driver's
>> code
>> explaining if this is necesary or not(hdf5dataset.cpp from line 661)... I
>> need
>> to know if there will allways be a trailing space or not, to be able to
>> perform
>> type conversion on the data...
>>
>
> Alex,
>
> I don't quite grasp why you need to know if there will be a trailing
> space.  I see the spaces are being appended as a separator in the hdf5
> driver in case the value is actually an array of values.  I would suggest
> you just strip off trailing white space in your client code if it is an
> issue.
>
>
> b-Some items are type double and have more than 6 digits on the integer
>> part,
>> but the string show the output in exponential notation, that makes me lose
>> some
>> significant digits...
>>
>> I looked into the code and the problems seems to be on hdf5dataset.cpp on
>> line
>> 744, and changed the type on sprintf() from %g to %f, But now the number
>> of
>> decimal digits is fixed, which could bring me similar problems when using
>> doubles... The question is: Is there a convention on how many
>> decimal digits you have to show on the string? there could be another way
>> to
>> return a number from an item that doesn't truncate the digits?
>>
>
> To preserve precision it is normal to format these as %.15g.  I believe
> this does a pretty good job of preserving double precision floating point.
>
> I have changed the float and double code to use this format in trunk and
> 1.8 branches.
>
>
> Given all this problems i wonder: Could somebody provide a way to retrieve
>> the
>> data in it's binary form with maybe some information on the metadata's
>> type? or
>> this would only be usefull on the HDF5 format?
>>
>
> This would be a substantial change to the metadata handling mechanism in
> GDAL and is unlikely to occur.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
javierurien@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110614/2ab04153/attachment.html
From warmerdam at pobox.com  Tue Jun 14 10:19:09 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 14 13:59:45 2011
Subject: [gdal-dev] HDF5 metadata format problems
In-Reply-To: <BANLkTim1vAnGJmhUe3a77xK-H8MiENZpkg@mail.gmail.com>
References: <BANLkTinpHjRmj1DR32PQid=snTT=dBe9cQ@mail.gmail.com>
	<4DF67BCA.8000608@pobox.com>
	<BANLkTim1vAnGJmhUe3a77xK-H8MiENZpkg@mail.gmail.com>
Message-ID: <4DF76DDD.2060406@pobox.com>

On 11-06-14 10:08 AM, Alex Mantaut wrote:
> Hi Frank:
>              Thanks for your response. I wasn't sure if the whitespace was
> allways going to be there, because for some fields had the white space but
> others didn't. I will remove the trailing whitespace.
> Now, I'm trying to develop a modification on the HDF5 driver to allow it to get
> the georreference information from COSMO-SKYMED HDF5 files... The thing is I'm
> not really familiar with the libraries used by GDAL(the use of iostream is not
> allowed right?), what would be the better way to trim a string? I looked into
> cpl_string and didn't found a simple way to do it (I could use
> CSLTokenizeString() and get the first field on the list, but this seems overly
> convoluted for a simple trim)
> Also, is there any guidelines on which libraries to use on C++ in replace of
> their std equivalents?

Alex,

I would likely do something like:

   CPLString osMD = poDS->GetMetadataItem('...');

   while( osMD.size() > 0 && osMD[osMD.size()-1] == " " )
     osMD.resize(osMD.size()-1));

You can use STL and sstream though we don't normally do file io through
iostreams since we go through the VSI*L "posix-like" API which allows
io virtualization.

Note that CPLString is just an improved (or as some would say polluted)
std::string.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dcole at integrity-apps.com  Tue Jun 14 10:28:27 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Tue Jun 14 14:09:33 2011
Subject: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time
In-Reply-To: <BANLkTi=4cWOZ6NXXGucNQyAviuHBYYH5BQ@mail.gmail.com>
References: <8406B84EA8899042A8508D858843972903BE5F7C@CHUNEX01.integrity-apps.com>,
	<BANLkTi=4cWOZ6NXXGucNQyAviuHBYYH5BQ@mail.gmail.com>
Message-ID: <8406B84EA8899042A8508D858843972903BE610A@CHUNEX01.integrity-apps.com>

I am afraid I won't be able to post a screenshot, or the original image that is causing this issue.

I will also note, occaisionally the image fails to load at all, and I get a dump like this:

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed
ERROR 1: IReadBlock failed at X offset 1, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 0
Segmentation Fault


Googling for those error message reveals about 2 results, and this email thread is one of them =\
________________________________
From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
Sent: Monday, June 13, 2011 11:13 PM
To: Cole, Derek
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time

Derek,

Can you provide a screenshot of the displayed image. Especially the scrambled blocks.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110614/fcff3036/attachment.html
From bfischer at houstoneng.com  Tue Jun 14 10:33:40 2011
From: bfischer at houstoneng.com (Brian Fischer)
Date: Tue Jun 14 14:15:08 2011
Subject: [gdal-dev] ogr2ogr custom coordiante system
In-Reply-To: <B850B3523E82404C80A8ACAC40BAFDF5875249CB@ex2010.houstonengineeringinc.com>
References: <B850B3523E82404C80A8ACAC40BAFDF5875249CB@ex2010.houstonengineeringinc.com>
Message-ID: <B850B3523E82404C80A8ACAC40BAFDF587524AEC@ex2010.houstonengineeringinc.com>

Hi Everyone,
I was wondering if there are any help files or guides on how to define a custom coordinate system to use with the ogr2ogr.exe utility.  I am trying to use it to load a shapefile into a PostGIS database.  The shapefile is in a custom Minnesota County coordinate system.  When I try to define the -a_srs I get an error message that says SRID is unrecognized.  I'm assume this is because both OGR and PostGIS does not have the custom SRID defined.  I've also tried -1 as the SRID but the utility doesn't like that either.

How would I define the custom projection so both OGR2OGR utility and PostGIS recognize it?

Regards,
Brian

Brian Fischer, CFM  GIS Manager
Houston Engineering, Inc.
6901 East Fish Lake Road, Suite 140
Maple Grove, MN 55369
Phone: Direct: 763-493-6664 / W: 763.493.4522 / M: 763.229.2734
Email:  bfischer@houstoneng.com<mailto:bfischer@houstonengineeringinc.com>
Website: www.houstoneng.com<http://www.houstonengineeringinc.com/>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110614/eb73ff62/attachment.html
From alexmantaut at suremptec.com.ar  Tue Jun 14 10:38:45 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Tue Jun 14 14:20:27 2011
Subject: [gdal-dev] HDF5 metadata format problems
In-Reply-To: <4DF76DDD.2060406@pobox.com>
References: <BANLkTinpHjRmj1DR32PQid=snTT=dBe9cQ@mail.gmail.com>
	<4DF67BCA.8000608@pobox.com>
	<BANLkTim1vAnGJmhUe3a77xK-H8MiENZpkg@mail.gmail.com>
	<4DF76DDD.2060406@pobox.com>
Message-ID: <BANLkTinW4zho=5X1DB7-14Q3uPRtMc0D=Q@mail.gmail.com>

Frank:
        Thanks for your reply. I thought that there could be a trim funcion
on CPL... I will use that code to trim my string...

Another question: To get several fields from the file's metadata, is it
better to use GetMetadata() and then search within the array for the fields,
or use GetMetadataItem() several times in order to get the necesary fields?
GetMedata() can take more memory than necesary, but I'm not sure if
GetMetadataItem() performs a read on the file, which could be slow...

Regards
Alex

2011/6/14 Frank Warmerdam <warmerdam@pobox.com>

> On 11-06-14 10:08 AM, Alex Mantaut wrote:
>
>> Hi Frank:
>>             Thanks for your response. I wasn't sure if the whitespace was
>> allways going to be there, because for some fields had the white space but
>> others didn't. I will remove the trailing whitespace.
>> Now, I'm trying to develop a modification on the HDF5 driver to allow it
>> to get
>> the georreference information from COSMO-SKYMED HDF5 files... The thing is
>> I'm
>> not really familiar with the libraries used by GDAL(the use of iostream is
>> not
>> allowed right?), what would be the better way to trim a string? I looked
>> into
>> cpl_string and didn't found a simple way to do it (I could use
>> CSLTokenizeString() and get the first field on the list, but this seems
>> overly
>> convoluted for a simple trim)
>> Also, is there any guidelines on which libraries to use on C++ in replace
>> of
>> their std equivalents?
>>
>
> Alex,
>
> I would likely do something like:
>
>  CPLString osMD = poDS->GetMetadataItem('...');
>
>  while( osMD.size() > 0 && osMD[osMD.size()-1] == " " )
>    osMD.resize(osMD.size()-1));
>
> You can use STL and sstream though we don't normally do file io through
> iostreams since we go through the VSI*L "posix-like" API which allows
> io virtualization.
>
> Note that CPLString is just an improved (or as some would say polluted)
> std::string.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
javierurien@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110614/cc2dd1e6/attachment-0001.html
From dcole at integrity-apps.com  Tue Jun 14 10:49:58 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Tue Jun 14 14:32:14 2011
Subject: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time
In-Reply-To: <8406B84EA8899042A8508D858843972903BE610A@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE5F7C@CHUNEX01.integrity-apps.com>,
	<BANLkTi=4cWOZ6NXXGucNQyAviuHBYYH5BQ@mail.gmail.com>,
	<8406B84EA8899042A8508D858843972903BE610A@CHUNEX01.integrity-apps.com>
Message-ID: <8406B84EA8899042A8508D858843972903BE6134@CHUNEX01.integrity-apps.com>

Sorry to spam the list, but I am wondering if this is related to the threading perhaps? I have tried to run this identical code in a single-threaded fashion, and it seems to work OK. Does the library perhaps have something going on that is signaling the file has been read prematurely? I have watchers that are waiting on a finished signal, which I have tested that they are (and this works for a non-compressed image). Most of the image tiles are coming back zeros, which makes me think it is somehow initializing some memory, and signaling it is done before the arrays have actually been populated?

Derek
________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Tuesday, June 14, 2011 10:28 AM
To: Chaitanya kumar CH
Cc: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time

I am afraid I won't be able to post a screenshot, or the original image that is causing this issue.

I will also note, occaisionally the image fails to load at all, and I get a dump like this:

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed
ERROR 1: IReadBlock failed at X offset 1, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 0
Segmentation Fault


Googling for those error message reveals about 2 results, and this email thread is one of them =\
________________________________
From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
Sent: Monday, June 13, 2011 11:13 PM
To: Cole, Derek
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time

Derek,

Can you provide a screenshot of the displayed image. Especially the scrambled blocks.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110614/2549ffd3/attachment.html
From warmerdam at pobox.com  Tue Jun 14 10:51:38 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 14 14:34:01 2011
Subject: [gdal-dev] HDF5 metadata format problems
In-Reply-To: <BANLkTinW4zho=5X1DB7-14Q3uPRtMc0D=Q@mail.gmail.com>
References: <BANLkTinpHjRmj1DR32PQid=snTT=dBe9cQ@mail.gmail.com>
	<4DF67BCA.8000608@pobox.com>
	<BANLkTim1vAnGJmhUe3a77xK-H8MiENZpkg@mail.gmail.com>
	<4DF76DDD.2060406@pobox.com>
	<BANLkTinW4zho=5X1DB7-14Q3uPRtMc0D=Q@mail.gmail.com>
Message-ID: <4DF7757A.7010900@pobox.com>

On 11-06-14 10:38 AM, Alex Mantaut wrote:
> Frank:
>          Thanks for your reply. I thought that there could be a trim funcion on
> CPL... I will use that code to trim my string...

Alex,

In fact, with a quick check I see I have added a Trim() method to the
CPLString to remove trailing white space.

> Another question: To get several fields from the file's metadata, is it better
> to use GetMetadata() and then search within the array for the fields, or use
> GetMetadataItem() several times in order to get the necesary fields?
> GetMedata() can take more memory than necesary, but I'm not sure if
> GetMetadataItem() performs a read on the file, which could be slow...

GetMetadataItem() is normally implemented to fetch from an internal metadata
list which is populated at the point of open.  So if you know what you are
looking for feel free to just do the GetMetadataItem().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From EAdam at co.lincoln.or.us  Tue Jun 14 13:57:48 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Tue Jun 14 17:51:11 2011
Subject: [gdal-dev] ogr2ogr custom coordiante system
In-Reply-To: <B850B3523E82404C80A8ACAC40BAFDF587524AEC@ex2010.houstonengineeringinc.com>
References: <B850B3523E82404C80A8ACAC40BAFDF5875249CB@ex2010.houstonengineeringinc.com>
	<B850B3523E82404C80A8ACAC40BAFDF587524AEC@ex2010.houstonengineeringinc.com>
Message-ID: <4DF73EA3.4F75.00CE.0@co.lincoln.or.us>

Brian,
     
      What is the command that you tried?  If you can construct the proper proj4 format, it should work for ogr.  Exactly matching the string in PostGIS may not work and you may get a new number like 32,000 for a new SRID that was added in PostGIS.  This slightly older thread suggests one method to overcome this, http://osgeo-org.1803224.n2.nabble.com/specifiying-the-correct-SRID-when-sending-polygons-to-PostGIS-td2026555.html although I have not tried that myself.

     If you have the WKT or other format, you can get the PostGIS insert string or proj4 format through spatialreference.org, http://spatialreference.org/

HTH, Eli


>>> On 6/14/2011 at 7:33 AM, in message
<B850B3523E82404C80A8ACAC40BAFDF587524AEC@ex2010.houstonengineeringinc.com>,
Brian Fischer <bfischer@houstoneng.com> wrote:
> Hi Everyone,
> I was wondering if there are any help files or guides on how to define a 
> custom coordinate system to use with the ogr2ogr.exe utility.  I am trying to 
> use it to load a shapefile into a PostGIS database.  The shapefile is in a 
> custom Minnesota County coordinate system.  When I try to define the -a_srs I 
> get an error message that says SRID is unrecognized.  I'm assume this is 
> because both OGR and PostGIS does not have the custom SRID defined.  I've 
> also tried -1 as the SRID but the utility doesn't like that either.
> 
> How would I define the custom projection so both OGR2OGR utility and PostGIS 
> recognize it?
> 
> Regards,
> Brian
> 
> Brian Fischer, CFM  GIS Manager
> Houston Engineering, Inc.
> 6901 East Fish Lake Road, Suite 140
> Maple Grove, MN 55369
> Phone: Direct: 763-493-6664 / W: 763.493.4522 / M: 763.229.2734
> Email:  bfischer@houstoneng.com<mailto:bfischer@houstonengineeringinc.com>
> Website: www.houstoneng.com<http://www.houstonengineeringinc.com/>

From matt.wilkie at gov.yk.ca  Tue Jun 14 15:13:18 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Jun 14 19:10:07 2011
Subject: [gdal-dev] gdalbuildvrt does not support heterogenous band
	characteristics
Message-ID: <4DF7B2CE.1080304@gov.yk.ca>

Hi Folks, what does this error mean?

gdalbuildvrt -input_file_list img-list.txt mosaic.vrt
0...10Warning 6: gdalbuildvrt does not support heterogenous band 
characteristics
. Skipping Quickbird_06m10.tif
...etc.

thanks!

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From bfraser at geoanalytic.com  Tue Jun 14 15:20:11 2011
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Tue Jun 14 19:17:30 2011
Subject: [gdal-dev] gdalbuildvrt does not support heterogenous
	band	characteristics
In-Reply-To: <4DF7B2CE.1080304@gov.yk.ca>
References: <4DF7B2CE.1080304@gov.yk.ca>
Message-ID: <4DF7B46B.3000104@geoanalytic.com>

Matt,

   Likely Quickbird_06m10.tif has more or less bands than the previous 
files, or band bit depth is different.   For example, don't try to 
include a 1 band 16-bit (e.g. gray scale) tiff in a VRT of 3 band, 8 
bits each (e.g. RGB color) tiffs.

   What does gdalinfo say about this file (and other files in the VRT)?

Best Regards,
Brent Fraser


On 6/14/2011 1:13 PM, Matt Wilkie wrote:
> Hi Folks, what does this error mean?
>
> gdalbuildvrt -input_file_list img-list.txt mosaic.vrt
> 0...10Warning 6: gdalbuildvrt does not support heterogenous band 
> characteristics
> . Skipping Quickbird_06m10.tif
> ...etc.
>
> thanks!
>

From matt.wilkie at gov.yk.ca  Tue Jun 14 16:39:59 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Tue Jun 14 20:41:39 2011
Subject: [gdal-dev] gdalbuildvrt does not support heterogenous
	band	characteristics
In-Reply-To: <4DF7B46B.3000104@geoanalytic.com>
References: <4DF7B2CE.1080304@gov.yk.ca> <4DF7B46B.3000104@geoanalytic.com>
Message-ID: <4DF7C71F.20607@gov.yk.ca>

>     Likely Quickbird_06m10.tif has more or less bands than the previous
> files, or band bit depth is different.

That was it, thanks.

For some reason although they were all created from the same source and 
process (arcmap > export > selected area) some images are 8bit RGB and 
others 16bit grey (though still 3 bands). Weird.

-matt
From frederick.keusch at digimapas.cl  Tue Jun 14 17:59:26 2011
From: frederick.keusch at digimapas.cl (frederick keusch)
Date: Tue Jun 14 22:05:40 2011
Subject: [gdal-dev] "disformed" images in its positions
Message-ID: <1308088766789-6476206.post@n2.nabble.com>

Hi,

i would like to use gdalwarp to solve a problem we have. Like i am a very
new user of gdal I don't know, if gdalwarp really can solve the problem, but
I hope so. The problem that we have are a kind of "disformed" images in its
positions. The images have several shifts in various directions. But we
found a mathematical way to solve this problem applying a polynom with
various parameters. But like there are too many images with the problem, we
would like to use a program to apply that polynom to all of the images
respectively to their coordinates.

Our idea was to use the gdalwarp to solve this problem and apply a
reprojection using e.g. something like this example formula giving from
gdal...
-t_srs '+proj=utm +zone=11 +datum=WGS84' raw_spot.tif utm11.tif
.... and inserting the polynom in some way.

Does somebody know, if it is posible to solve this problem with gdalwarp and
if, how and where to insert the poynom?

I appreciate your help,

thanks a lot,

Frederick





--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/disformed-images-in-its-positions-tp6476206p6476206.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dcole at integrity-apps.com  Tue Jun 14 19:04:40 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Tue Jun 14 23:14:19 2011
Subject: [gdal-dev] CreateCopy() with same metadata, different raster data
Message-ID: <8406B84EA8899042A8508D858843972903BE628A@CHUNEX01.integrity-apps.com>

Is it possible to use CreateCopy() to easily copy in to a new image modified raster data based off the old image? I know all the metadata is going to be the same, I have simply changed the data after reading it from the original, and need to store it back to disk.

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110614/78f6ab74/attachment.html
From warmerdam at pobox.com  Tue Jun 14 19:23:47 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 14 23:34:33 2011
Subject: [gdal-dev] CreateCopy() with same metadata, different raster data
In-Reply-To: <8406B84EA8899042A8508D858843972903BE628A@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE628A@CHUNEX01.integrity-apps.com>
Message-ID: <4DF7ED83.5080602@pobox.com>

On 11-06-14 07:04 PM, Cole, Derek wrote:
> Is it possible to use CreateCopy() to easily copy in to a new image modified
> raster data based off the old image? I know all the metadata is going to be the
> same, I have simply changed the data after reading it from the original, and
> need to store it back to disk.

Derek,

Well, I wouldn't say it is very easy, but there are a few approaches.
One approach would be to use CreateCopy() to copy the imagery, metadata
and other information into a memory dataset (using the MEM) driver.  Then
update the imagery on this MEM dataset according to what you need, and then
use CreateCopy() to copy the result to the final file.

It is also possible, but complicated, to create a VRT wrapper you can pass
to CreateCopy that pulls from your modified image and using the original file
for the metadata.

Generally for this sort of situation I would just CreateCopy to a geotiff file,
update the imagery, and then CreateCopy() from that to the final file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dcole at integrity-apps.com  Tue Jun 14 21:18:39 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jun 15 01:35:57 2011
Subject: [gdal-dev] CreateCopy() with same metadata, different raster data
In-Reply-To: <4DF7ED83.5080602@pobox.com>
References: <8406B84EA8899042A8508D858843972903BE628A@CHUNEX01.integrity-apps.com>,
	<4DF7ED83.5080602@pobox.com>
Message-ID: <8406B84EA8899042A8508D858843972903BE62CC@CHUNEX01.integrity-apps.com>

Hrmm, that is sort of unfortunate. I have set up a tiling algorithm to read in tiles at a time of imagery data, which is already slow-ish, even doing it it with threads. Having to do a whole new read of the entire image at once (since it doesnt seem CreateCopy takes any block parameters) would be pretty time consuming.

Am I better off trying to just copy the Dataset manually, creating a new file from that? 

Derek
________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Frank Warmerdam [warmerdam@pobox.com]
Sent: Tuesday, June 14, 2011 7:23 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] CreateCopy() with same metadata, different raster data

On 11-06-14 07:04 PM, Cole, Derek wrote:
> Is it possible to use CreateCopy() to easily copy in to a new image modified
> raster data based off the old image? I know all the metadata is going to be the
> same, I have simply changed the data after reading it from the original, and
> need to store it back to disk.

Derek,

Well, I wouldn't say it is very easy, but there are a few approaches.
One approach would be to use CreateCopy() to copy the imagery, metadata
and other information into a memory dataset (using the MEM) driver.  Then
update the imagery on this MEM dataset according to what you need, and then
use CreateCopy() to copy the result to the final file.

It is also possible, but complicated, to create a VRT wrapper you can pass
to CreateCopy that pulls from your modified image and using the original file
for the metadata.

Generally for this sort of situation I would just CreateCopy to a geotiff file,
update the imagery, and then CreateCopy() from that to the final file.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ahmettemiz88 at gmail.com  Wed Jun 15 04:01:30 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Wed Jun 15 08:41:08 2011
Subject: [gdal-dev] changing data type of a shapefile
Message-ID: <BANLkTimB=_0ZwRk4XytKQpZKA7+gbCtquA@mail.gmail.com>

hello

how can I change data type of a shapefile by ogr2ogr ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
From chaitanya.ch at gmail.com  Wed Jun 15 04:12:23 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jun 15 08:52:38 2011
Subject: [gdal-dev] "disformed" images in its positions
In-Reply-To: <1308088766789-6476206.post@n2.nabble.com>
References: <1308088766789-6476206.post@n2.nabble.com>
Message-ID: <BANLkTimBShQ9NqqgVOQJ79k-Oz8FVDnmqw@mail.gmail.com>

Frederick,

You can use GCPs you used to create the polynomials directly in gdal
utilities to correct the deformed images.

I assume that your current images don't have any projection info.

1. First use gdal_translate with the -gcp option to create a dataset with
your control points. You may also want to include the -a_srs option to add
the projection of your control points. [1]

2. Then use gdalwarp to correct the image. gdalwarp uses the GCPs to warp
the image. You may need to use the -geoloc option to force the use of GCPs
and the -tps option to force the thin plate spline transformer. Set an
appropriate resolution using -tr or -ts[2]

Let us know how it goes.

[1]: http://www.gdal.org/gdal_translate.html
[2]: http://www.gdal.org/gdalwarp.html

On Wed, Jun 15, 2011 at 3:29 AM, frederick keusch <
frederick.keusch@digimapas.cl> wrote:

> Hi,
>
> i would like to use gdalwarp to solve a problem we have. Like i am a very
> new user of gdal I don't know, if gdalwarp really can solve the problem,
> but
> I hope so. The problem that we have are a kind of "disformed" images in its
> positions. The images have several shifts in various directions. But we
> found a mathematical way to solve this problem applying a polynom with
> various parameters. But like there are too many images with the problem, we
> would like to use a program to apply that polynom to all of the images
> respectively to their coordinates.
>
> Our idea was to use the gdalwarp to solve this problem and apply a
> reprojection using e.g. something like this example formula giving from
> gdal...
> -t_srs '+proj=utm +zone=11 +datum=WGS84' raw_spot.tif utm11.tif
> .... and inserting the polynom in some way.
>
> Does somebody know, if it is posible to solve this problem with gdalwarp
> and
> if, how and where to insert the poynom?
>
> I appreciate your help,
>
> thanks a lot,
>
> Frederick
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/disformed-images-in-its-positions-tp6476206p6476206.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/c4961e47/attachment.html
From ramirogonzalez at suremptec.com.ar  Wed Jun 15 09:37:08 2011
From: ramirogonzalez at suremptec.com.ar (Ramiro Gonzalez)
Date: Wed Jun 15 14:35:37 2011
Subject: [gdal-dev] get GCP from noaa L1b
Message-ID: <BANLkTikfB7nmTFo+byDTs7Sgyp-i5TUUrg@mail.gmail.com>

Hi, I?m using gdal c++ API.

I?d like to implement an algorithm to georeference noaa L1b images(of
Argentine in particular). The number of GCPs returned by the L1b driver are
not enough to use triangulation(midcourse solution until a better algorithm
can be implemented).

Searching gdal-dev mailing list I found:.
 * In formats/l1b/l1bdataset.cpp there is some code related to
?rfc4_geolocate? inside a ?#if 0? block. See
http://trac.osgeo.org/gdal/wiki/rfc4_geolocate
 * In TCK 2388 there is an attached file: lagrange.cpp to interpolate the
extra points of each line. TCK 2403 was opened but no work have been done.
 * When I use ?gdalwarp ?tps? to georeference an image I get ?There is a
problem to invert the interpolation matrix?. This was reported in gdal-dev
mailing list. See ?
http://www.osgeo.org/pipermail/gdal-dev/2009-May/020692.html?

Questions

There is some guideline I should follow?, Should I post in the related
tickets?.
I could modify the L1b driver to read more points in
L1BDataset::ProcessRecordHeaders. Is there a better way to get the GCPs from
the L1b image?

What can be done to improve the quality when georeferencing this kind of
images?

In ticket 2388 there is a comment about a pending FIXME, related to GCP in
the southern hemisphere. Can someone expand on this subject?

Thanks
Ramiro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/8d84f846/attachment.html
From frederick.keusch at digimapas.cl  Wed Jun 15 09:47:06 2011
From: frederick.keusch at digimapas.cl (frederick keusch)
Date: Wed Jun 15 14:46:08 2011
Subject: [gdal-dev] Re: "disformed" images in its positions
In-Reply-To: <BANLkTimBShQ9NqqgVOQJ79k-Oz8FVDnmqw@mail.gmail.com>
References: <1308088766789-6476206.post@n2.nabble.com>
	<BANLkTimBShQ9NqqgVOQJ79k-Oz8FVDnmqw@mail.gmail.com>
Message-ID: <1308145626476-6478915.post@n2.nabble.com>

Hi Chaitanya,

first of all I'd like to thank you for the information.

So if I understood you correctly, it is not necesseary to use the polynomial
we calculated but only a dataset of the control points we used and
gdal_transalate calculates a polynomial internally. Do you know how exactly
this internally polynomial will be, because the one we calcualted is of 24th
orden. Do you also know if it is necessary that the control points are GCP's
or in oher words visible in the images, because what has our departement of
navegation is a list of control points, but not visibles in the images.

Also our current images do have a projection and in the result we want them
in the same projection but corrected in their positions. But I think this
should not matter.... 

Again I'd like to thank you for your corporation,

Frederick

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/disformed-images-in-its-positions-tp6476206p6478915.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From arb at sat.dundee.ac.uk  Wed Jun 15 10:08:05 2011
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Wed Jun 15 15:08:46 2011
Subject: [gdal-dev] get GCP from noaa L1b
In-Reply-To: <BANLkTikfB7nmTFo+byDTs7Sgyp-i5TUUrg@mail.gmail.com>
References: <BANLkTikfB7nmTFo+byDTs7Sgyp-i5TUUrg@mail.gmail.com>
Message-ID: <BANLkTinRecCc9AXh5Bug3sdiAFSXb1i=Cw@mail.gmail.com>

Hi

>From memory the l1b driver doesn't use enough points to get proper
geolocation because it sub-samples the 51 which are provided in the l1b
file. The best solution (that recommended by NOAA) is to use lagrange
interpolation across the 51 points. A lagrange algorithm has been provided
in the ticket you referenced but nobody has added it to gdal. I think at the
moment you could consider the l1b driver broken.

Andrew
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/c9f14111/attachment.html
From chaitanya.ch at gmail.com  Wed Jun 15 10:27:21 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jun 15 15:28:53 2011
Subject: [gdal-dev] changing data type of a shapefile
In-Reply-To: <BANLkTimB=_0ZwRk4XytKQpZKA7+gbCtquA@mail.gmail.com>
References: <BANLkTimB=_0ZwRk4XytKQpZKA7+gbCtquA@mail.gmail.com>
Message-ID: <BANLkTik8UghqaRv8E-pES6OSv-+e=a3QdQ@mail.gmail.com>

Ahmet,

You can use OGR SQL [1] to typecast fields and other stuff. You can use
ogr2ogr [2] with the -sql option and supply the sql statement.

[1]: http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast
[2]: http://www.gdal.org/ogr2ogr.html

2011/6/15 ahmet temiz <ahmettemiz88@gmail.com>

> hello
>
> how can I change data type of a shapefile by ogr2ogr ?
>
> regards
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> ________________________
>
> Ahmet Temiz
> Geological Eng.
> Information Systems - GIS Group
> Disaster and Emergency Management
> of Presidency
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/5915a27a/attachment.html
From warmerdam at pobox.com  Wed Jun 15 10:44:20 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun 15 15:46:44 2011
Subject: [gdal-dev] CreateCopy() with same metadata, different raster data
In-Reply-To: <8406B84EA8899042A8508D858843972903BE62CC@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE628A@CHUNEX01.integrity-apps.com>, 
	<4DF7ED83.5080602@pobox.com>
	<8406B84EA8899042A8508D858843972903BE62CC@CHUNEX01.integrity-apps.com>
Message-ID: <4DF8C544.7010904@pobox.com>

On 11-06-14 09:18 PM, Cole, Derek wrote:
> Hrmm, that is sort of unfortunate. I have set up a tiling algorithm to read
> in tiles at a time of imagery data, which is already slow-ish, even doing it
> it with threads. Having to do a whole new read of the entire image at once
> (since it doesnt seem CreateCopy takes any block parameters) would be pretty
> time consuming.
>
> Am I better off trying to just copy the Dataset manually, creating a new
> file from that?

Derek,

If efficiency is important, and you have a limited amount of metadata
you need to copy, I would setup your imagery in memory as a MEM dataset
and then programatically copy the parts of the metadata you need to it
from the source file.  Then do a CreateCopy from that to your final file.

You can ee something like that done in C in the MapServer msSaveImageGDAL()
function at:

   http://trac.osgeo.org/mapserver/browser/trunk/mapserver/mapgdal.c#L152

In all this I am assuming your final format is one that only supports
CreateCopy() (like JPEG or PNG) otherwise you can just imperatively
create the output file and set the info on it after writing the imagery.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From EAdam at co.lincoln.or.us  Wed Jun 15 11:18:13 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Wed Jun 15 16:23:09 2011
Subject: [gdal-dev] changing data type of a shapefile
In-Reply-To: <BANLkTik8UghqaRv8E-pES6OSv-+e=a3QdQ@mail.gmail.com>
References: <BANLkTimB=_0ZwRk4XytKQpZKA7+gbCtquA@mail.gmail.com>
	<BANLkTik8UghqaRv8E-pES6OSv-+e=a3QdQ@mail.gmail.com>
Message-ID: <4DF86ABB.4F75.00CE.0@co.lincoln.or.us>

Ahmet,

     You can also change geometry type, it is also an option with
ogr2ogr [2], -nlt.  I've only used -nlt to promote to multi-geometry.  

Eli

>>> On 6/15/2011 at 7:27 AM, in message
<BANLkTik8UghqaRv8E-pES6OSv-+e=a3QdQ@mail.gmail.com>, Chaitanya kumar
CH
<chaitanya.ch@gmail.com> wrote:
> Ahmet,
> 
> You can use OGR SQL [1] to typecast fields and other stuff. You can
use
> ogr2ogr [2] with the -sql option and supply the sql statement.
> 
> [1]: http://trac.osgeo.org/gdal/wiki/rfc21_ogrsqlcast 
> [2]: http://www.gdal.org/ogr2ogr.html 
> 
> 2011/6/15 ahmet temiz <ahmettemiz88@gmail.com>
> 
>> hello
>>
>> how can I change data type of a shapefile by ogr2ogr ?
>>
>> regards
>>
>> --
>> Ahmet Temiz
>> Jeoloji M?h.
>> Afet ve Acil Durum Y?netimi Ba?kanl???
>> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
>> Bilgi ve CBS grubu
>> Eski?ehir Yolu 10. km.
>> Lodumlu / Ankara
>> Tel : 0 312 2872680 / 1535
>> ________________________
>>
>> Ahmet Temiz
>> Geological Eng.
>> Information Systems - GIS Group
>> Disaster and Emergency Management
>> of Presidency
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
From sglish at hotmail.com  Wed Jun 15 12:24:27 2011
From: sglish at hotmail.com (Chris English)
Date: Wed Jun 15 17:32:12 2011
Subject: [gdal-dev] SetUTM - how to say how far north Python
Message-ID: <SNT117-W6115C6820863CC281B8F69C56B0@phx.gbl>


Hi,
Assuming the following:
>>> src_ds = gdal.Open('test_3.ter')>>> dst_ds = driver.CreateCopy('test_6.hf2', src_ds, 0)>>> dst_ds.SetGeoTransform([582495,1,0.5,4512717,0.5,-1])0>>> srs = osr.SpatialReference()>>> srs.SetUTM(18,1)0>>> srs.SetWellKnownGeogCS('WGS84')0>>> dst_ds.SetProjection( srs.ExportToWkt())0>>> dst_ds = None>>> src_ds = None>>> gdalinfo.main(['foo','test_6.hf2'])Driver: HF2/HF2/HFZ heightfield rasterFiles: test_6.hf2       test_6.hf2.aux.xmlSize is 4, 4Coordinate System is:PROJCS["UTM Zone 18, Northern Hemisphere",    GEOGCS["WGS 84",        DATUM["WGS_1984",            SPHEROID["WGS 84",6378137,298.257223563,                AUTHORITY["EPSG","7030"]],            TOWGS84[0,0,0,0,0,0,0],            AUTHORITY["EPSG","6326"]],        PRIMEM["Greenwich",0,            AUTHORITY["EPSG","8901"]],        UNIT["degree",0.0174532925199433,            AUTHORITY["EPSG","9108"]],        AUTHORITY["EPSG","4326"]],    PROJECTION["Transverse_Mercator"],    PARAMETER["latitude_of_origin",0],    PARAMETER["central_meridian",-75],    PARAMETER["scale_factor",0.9996],    PARAMETER["false_easting",500000],    PARAMETER["false_northing",0],    UNIT["Meter",1]]Origin = (0.000000000000000,0.000000000000000)Pixel Size = (1.000000000000000,1.000000000000000)Metadata:  VERTICAL_PRECISION=1.000000Corner Coordinates:Upper Left  (   0.0000000,   0.0000000) ( 79d29'19.48"W,  0d 0' 0.01"N)Lower Left  (   0.0000000,   4.0000000) ( 79d29'19.48"W,  0d 0' 0.13"N)Upper Right (   4.0000000,   0.0000000) ( 79d29'19.35"W,  0d 0' 0.01"N)Lower Right (   4.0000000,   4.0000000) ( 79d29'19.35"W,  0d 0' 0.13"N)Center      (   2.0000000,   2.0000000) ( 79d29'19.41"W,  0d 0' 0.06"N)Band 1 Block=256x1 Type=Float32, ColorInterp=Undefined  Unit Type: m0>>> 
and assuming I wanted to be nearly in New York rather than La Concordia Peru,how to say 'how far north'?
Thanks in advance,
Chris 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/167d9689/attachment-0001.html
From chaitanya.ch at gmail.com  Wed Jun 15 13:11:47 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jun 15 18:21:55 2011
Subject: [gdal-dev] Re: "disformed" images in its positions
In-Reply-To: <1308145626476-6478915.post@n2.nabble.com>
References: <1308088766789-6476206.post@n2.nabble.com>
	<BANLkTimBShQ9NqqgVOQJ79k-Oz8FVDnmqw@mail.gmail.com>
	<1308145626476-6478915.post@n2.nabble.com>
Message-ID: <BANLkTimRvTz8hppb+NfaBwx6QCApyFK3JA@mail.gmail.com>

Frederick,

GCP is a control point. Ground Control Point. They are not visible in the
image. Just a map of pixel-line to coordinates.

I am not familiar with how the warping algorithm handles the GCPs. But if
you want, you can also set the projection info after you use your own method
to correct the deformities in the images. You will have to apply the
'modified' GCPs.

On Wed, Jun 15, 2011 at 7:17 PM, frederick keusch <
frederick.keusch@digimapas.cl> wrote:

> Hi Chaitanya,
>
> first of all I'd like to thank you for the information.
>
> So if I understood you correctly, it is not necesseary to use the
> polynomial
> we calculated but only a dataset of the control points we used and
> gdal_transalate calculates a polynomial internally. Do you know how exactly
> this internally polynomial will be, because the one we calcualted is of
> 24th
> orden. Do you also know if it is necessary that the control points are
> GCP's
> or in oher words visible in the images, because what has our departement of
> navegation is a list of control points, but not visibles in the images.
>
> Also our current images do have a projection and in the result we want them
> in the same projection but corrected in their positions. But I think this
> should not matter....
>
> Again I'd like to thank you for your corporation,
>
> Frederick
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/disformed-images-in-its-positions-tp6476206p6478915.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/c79828f0/attachment.html
From willismi at gmail.com  Wed Jun 15 13:13:32 2011
From: willismi at gmail.com (Mike Willis)
Date: Wed Jun 15 18:23:46 2011
Subject: [gdal-dev] gdal_translate and gdal_warp
Message-ID: <BANLkTimCD94wJvz07+NskT3d3WWm6-0PcQ@mail.gmail.com>

Hi Folks,

Multipart question

I am using gdal_translate to pull out files from JPEG2000 files
wrapped by an NTF wrapper.

It seems fine, but I am losing all metadata and no headers are built
when I do this.
I can get readable ENVI files or Geotiffs but they're often flipped
back to front, or oriented north-south, losing any of their
georeferenced information.
Does anyone have an idea about how I can bring the metadata with them?

I have tried giving them gcps from metadata that I can read myself
from an Ascii file. I use gdal_translate with the -gcp options.
I then run gdalwarp. The images rotate to what looks to be perfect
orientation, however the images become all "checkerboard" and
lose all of their continuous toning. I wonder if its something to do
with the bit depth.
The files I am working on are raw geoeye full resolution panchromatic images.

I have tried nearest neighbour, and bicubic as the gdalwarp resampling
methods but have not succeeded in getting anything useable.

Any other suggestions? The files are Gb in size.

We have the RPCs and full metadata for each of the files.

Cheers

Mike Willis

Postdoctoral Research Associate
Earth and Atmospheric Sciences
Cornell University
Ithaca NY 14853
From matt.wilkie at gov.yk.ca  Wed Jun 15 13:43:40 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Jun 15 18:55:13 2011
Subject: [gdal-dev] gdal_translate compress is larger??
Message-ID: <4DF8EF4C.7070500@gov.yk.ca>

Hi Folks,

I've run into a strange thing, "gdal_translate -co compress=lzw" is 
creating files that are larger than the source uncompressed image.

Input:

04/04/2006  08:39 AM       959,236,993 A1.tif

Results of "gdal_translate -co compress=[lzw,packbits,none]"

15/06/2011  10:35 AM     1,003,987,364 _lzw.tif
15/06/2011  10:31 AM       958,908,507 _none.tif
15/06/2011  10:30 AM       965,940,411 _packbits.tif

gdalinfo report is attached.
source file at http://files.environmentyukon.ca/matt/gdal-trans-lzw/ (in 
about 20 minutes).

GDAL 1.8.0, released 2011/01/12

what's up?

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

-------------- next part --------------
Driver: GTiff/GeoTIFF
Files: A1.tif
       A1.aux
       A1.rrd
       A1.tfw
Size is 23380, 41000
Coordinate System is:
PROJCS["NAD83 / UTM zone 8N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-135],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26908"]]
Origin = (475090.000000000000000,6753500.000000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Metadata:
  TIFFTAG_XRESOLUTION=0
  TIFFTAG_YRESOLUTION=0
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  475090.000, 6753500.000) (135d27'33.67"W, 60d54'57.01"N)
Lower Left  (  475090.000, 6733000.000) (135d27'24.20"W, 60d43'54.44"N)
Upper Right (  486780.000, 6753500.000) (135d14'37.63"W, 60d54'59.03"N)
Lower Right (  486780.000, 6733000.000) (135d14'32.60"W, 60d43'56.45"N)
Center      (  480935.000, 6743250.000) (135d21' 2.02"W, 60d49'26.89"N)
Band 1 Block=23380x1 Type=Byte, ColorInterp=Gray
  Overviews: 5845x10250, 2923x5125, 1462x2563, 731x1282, 366x641, 183x321, 92x161, 46x81
  Metadata:
    LAYER_TYPE=athematic
<GDALRasterAttributeTable />

From dcole at integrity-apps.com  Wed Jun 15 14:20:20 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jun 15 19:34:03 2011
Subject: [gdal-dev] Building Overviews for Tiles of Large images
In-Reply-To: <BANLkTimHJ+s3Z+7A_EzSktao50Vw2LZ_Uw@mail.gmail.com>
References: <8406B84EA8899042A8508D858843972903BE598A@CHUNEX01.integrity-apps.com>,
	<BANLkTimHJ+s3Z+7A_EzSktao50Vw2LZ_Uw@mail.gmail.com>
Message-ID: <8406B84EA8899042A8508D858843972903BE662D@CHUNEX01.integrity-apps.com>

Bringing this back up, as I am curious. I have started playing around with using RasterIO and providing smaller output buffers for the read-in data, thus making GDAL do the downsampling (which apparently is nearest neighbor type?). Do you think this is faster than creating Overview imagery, which would also have to be read from disk? It seems like with overview imagery, at runtime you might be faster, since it physically reads less data, but you'd have to take a hit somewhere actually creating the overviews, right?

Currently, I am reading in a full-size displayed version of the image, and if a user zooms out, make another read into a fraction of the buffer size to get the downsampled version of the tile.

Thanks

Derek
________________________________
From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
Sent: Saturday, June 11, 2011 8:58 AM
To: Cole, Derek
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Building Overviews for Tiles of Large images

Derek,

Switching to less detailed versions is not as fast as an interactive application would like, especially if you need a good downsampling algorithm. So, adding overviews is more important than creating tiles. Creating tiles is more applicable for web applications where less disk seeking is preferable.

The gdaladdo utility [1] creates and stores the overviews on the disk.

[1]: http://www.gdal.org/gdaladdo.html

On Sat, Jun 11, 2011 at 9:00 AM, Cole, Derek <dcole@integrity-apps.com<mailto:dcole@integrity-apps.com>> wrote:
Hello again,

I am reading over some of the documentation and information I can find on GDAL.

I have some pretty large NITF images that I want to break up for purposes of displaying in a viewer I am developing. My current plan is to tile the images into 1024x1024 blocks. The full images are 32768x32768 pixels

I was hoping that as part of my tiling, I would read in the image blocks and display them as they are on disk, and as a user zoomed out, switch to "Less detailed" versions the further out they go.

I was looking at the gdaladdo sample program. Is this what I want to be looking at to try to replicate this functionality *in memory* for my viewer? Ideally all of the tiles would know what level of zoom they were at, and switch to the appropriate level of detail accordingly.

Does it sound feasible to have my code constantly switching each tile between an overview that is generated on the fly like that, or do people typically write out the lower res imagesonce to file , and re-read that new files?

Thanks for answering!

Derek

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/cef91856/attachment.html
From nowak at xpam.de  Wed Jun 15 14:55:12 2011
From: nowak at xpam.de (Adam Nowacki)
Date: Wed Jun 15 20:29:05 2011
Subject: [gdal-dev] gdal_translate compress is larger??
In-Reply-To: <4DF8EF4C.7070500@gov.yk.ca>
References: <4DF8EF4C.7070500@gov.yk.ca>
Message-ID: <4DF90010.5090905@xpam.de>

Its just how compression works. If some data is reduced in size then 
other has to grow in size. Try -co compress=deflate -co PREDICTOR=2

On 2011-06-15 19:43, Matt Wilkie wrote:
> Hi Folks,
>
> I've run into a strange thing, "gdal_translate -co compress=lzw" is
> creating files that are larger than the source uncompressed image.
>
> Input:
>
> 04/04/2006 08:39 AM 959,236,993 A1.tif
>
> Results of "gdal_translate -co compress=[lzw,packbits,none]"
>
> 15/06/2011 10:35 AM 1,003,987,364 _lzw.tif
> 15/06/2011 10:31 AM 958,908,507 _none.tif
> 15/06/2011 10:30 AM 965,940,411 _packbits.tif
>
> gdalinfo report is attached.
> source file at http://files.environmentyukon.ca/matt/gdal-trans-lzw/ (in
> about 20 minutes).
>
> GDAL 1.8.0, released 2011/01/12
>
> what's up?
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed Jun 15 15:17:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun 15 20:34:16 2011
Subject: [gdal-dev] gdal_translate compress is larger??
In-Reply-To: <4DF8EF4C.7070500@gov.yk.ca>
References: <4DF8EF4C.7070500@gov.yk.ca>
Message-ID: <4DF9053F.4090308@pobox.com>

On 11-06-15 01:43 PM, Matt Wilkie wrote:
> Hi Folks,
>
> I've run into a strange thing, "gdal_translate -co compress=lzw" is creating
> files that are larger than the source uncompressed image.
>
> Input:
>
> 04/04/2006 08:39 AM 959,236,993 A1.tif
>
> Results of "gdal_translate -co compress=[lzw,packbits,none]"
>
> 15/06/2011 10:35 AM 1,003,987,364 _lzw.tif
> 15/06/2011 10:31 AM 958,908,507 _none.tif
> 15/06/2011 10:30 AM 965,940,411 _packbits.tif
>
> gdalinfo report is attached.
> source file at http://files.environmentyukon.ca/matt/gdal-trans-lzw/ (in about
> 20 minutes).
>
> GDAL 1.8.0, released 2011/01/12

Matt,

LZW compression packs a little dictionary at the front of each strip/tile
with the table of patterns.  The size of an LZW compressed image can be
noticably larger than an uncompressed image if the chunk size (strip/tile)
is small so that this overhead becomes significant, and of course if the
imagery is essentially uncompressable with LZW.

Using larger strip/tile sizes can improve efficiency with LZW.

Also, using -co PREDICTOR=2 can help with imagery that is smoothly
varying as it compresses the differences from pixel to pixel instead of
the absolute values, and these will tend to be small and have more
patterns.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alexmantaut at suremptec.com.ar  Wed Jun 15 15:19:14 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Wed Jun 15 20:36:13 2011
Subject: [gdal-dev] hdf5image metadata problems
Message-ID: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>

Hi all,
        I'm trying to open the metadata from a subdataset of an HDF5 file...


        When I open the file by it's filename and then ask for the metadata
it returns the metadata asociated to the root and all the subdatasets....
But when I open the file by specifying the subdataset name to GDALOpen() and
then ask for the metadata it returns the metadata asociated to all groups
but none of the subdatasets...

        I looked a bit into the hdf5dataset code and realized that
this difference emerges from the fact that when GDAL opens the file
specifying only the filename it uses hdf5dataset to open the file, but when
I specify the subdataset to GDALOpen() it uses hdf5imagedataset instead, and
it loads the metadata in a different way.
        I'm not sure of what the expected behavior is on hdf5image for
loading metadata... It should load all the metadata of the file? Just the
metadata asociated to the subdataset? Or should the application ask for the
subdataset in some other way and then ask for the metadata?

       gdalinfo is returning the metadata asociated to the subdataset in
both cases, but it shows the data in the bands section... So I looked in to
the code of gdalinfo and it gets the information for the subdataset like
this:


GDALRasterBandH hBand;

hBand = GDALGetRasterBand( poDataset, 1);

char **allMetadata = GDALGetMetadata( hBand, NULL );
Must I use that in order to get the metadata?

Thanks in advance

-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/dcbdf025/attachment.html
From warmerdam at pobox.com  Wed Jun 15 15:28:06 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun 15 20:45:38 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
Message-ID: <4DF907C6.10204@pobox.com>

On 11-06-15 03:19 PM, Alex Mantaut wrote:
> Hi all,
>          I'm trying to open the metadata from a subdataset of an HDF5 file...
>          When I open the file by it's filename and then ask for the metadata it
> returns the metadata asociated to the root and all the subdatasets.... But when
> I open the file by specifying the subdataset name to GDALOpen() and then ask
> for the metadata it returns the metadata asociated to all groups but none of
> the subdatasets...
>          I looked a bit into the hdf5dataset code and realized that
> this difference emerges from the fact that when GDAL opens the file specifying
> only the filename it uses hdf5dataset to open the file, but when I specify the
> subdataset to GDALOpen() it uses hdf5imagedataset instead, and it loads the
> metadata in a different way.
>          I'm not sure of what the expected behavior is on hdf5image for loading
> metadata... It should load all the metadata of the file? Just the metadata
> asociated to the subdataset? Or should the application ask for the subdataset
> in some other way and then ask for the metadata?

Alex,

I'm not sure of the details of the metadata handling, but to the extent
possible I think opening a subdataset should return metadata specific to
that subdataset and any "root" metadata that applies to everything in the
.hdf file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Wed Jun 15 15:46:43 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Jun 15 21:05:09 2011
Subject: [gdal-dev] gdal_translate compress is larger??
In-Reply-To: <4DF9053F.4090308@pobox.com>
References: <4DF8EF4C.7070500@gov.yk.ca> <4DF9053F.4090308@pobox.com>
Message-ID: <4DF90C23.8060208@gov.yk.ca>

I'm curious as to why I've not encountered this before as I use lzw 
compression all the time. Anyway, as always thanks for the education. :)

I've discovered that for my present project that jpeg-in-geotiff 
compression is good enough, which makes me happy because even with 
predictor=2 the space savings was only 10% or so.


matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


> LZW compression packs a little dictionary at the front of each strip/tile
> with the table of patterns.  The size of an LZW compressed image can be
> noticably larger than an uncompressed image if the chunk size (strip/tile)
> is small so that this overhead becomes significant, and of course if the
> imagery is essentially uncompressable with LZW.
>
> Using larger strip/tile sizes can improve efficiency with LZW.
>
> Also, using -co PREDICTOR=2 can help with imagery that is smoothly
> varying as it compresses the differences from pixel to pixel instead of
> the absolute values, and these will tend to be small and have more
> patterns.
>
> Best regards,
From alexmantaut at suremptec.com.ar  Wed Jun 15 15:50:03 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Wed Jun 15 21:08:49 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <4DF907C6.10204@pobox.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
Message-ID: <BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>

Hi Frank:
            Thanks for the swift reply.
             Right now it opens the metadata asociated to the root, and also
the metadata asociated with all the other groups, but it doesn't open the
metadata asociated to the specified element (bug?)

regards
2011/6/15 Frank Warmerdam <warmerdam@pobox.com>

> On 11-06-15 03:19 PM, Alex Mantaut wrote:
>
>> Hi all,
>>         I'm trying to open the metadata from a subdataset of an HDF5
>> file...
>>         When I open the file by it's filename and then ask for the
>> metadata it
>> returns the metadata asociated to the root and all the subdatasets.... But
>> when
>> I open the file by specifying the subdataset name to GDALOpen() and then
>> ask
>> for the metadata it returns the metadata asociated to all groups but none
>> of
>> the subdatasets...
>>         I looked a bit into the hdf5dataset code and realized that
>> this difference emerges from the fact that when GDAL opens the file
>> specifying
>> only the filename it uses hdf5dataset to open the file, but when I specify
>> the
>> subdataset to GDALOpen() it uses hdf5imagedataset instead, and it loads
>> the
>> metadata in a different way.
>>         I'm not sure of what the expected behavior is on hdf5image for
>> loading
>> metadata... It should load all the metadata of the file? Just the metadata
>> asociated to the subdataset? Or should the application ask for the
>> subdataset
>> in some other way and then ask for the metadata?
>>
>
> Alex,
>
> I'm not sure of the details of the metadata handling, but to the extent
> possible I think opening a subdataset should return metadata specific to
> that subdataset and any "root" metadata that applies to everything in the
> .hdf file.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
javierurien@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/c183549c/attachment.html
From warmerdam at pobox.com  Wed Jun 15 16:34:13 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun 15 21:55:29 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
Message-ID: <4DF91745.8040706@pobox.com>

On 11-06-15 03:50 PM, Alex Mantaut wrote:
> Hi Frank:
>              Thanks for the swift reply.
>               Right now it opens the metadata asociated to the root, and also
> the metadata asociated with all the other groups, but it doesn't open the
> metadata asociated to the specified element (bug?)

Alex,

It sounds like a defect to me, yes.

I would suggest filing a ticket that carefully documents the
problem with a supporting example file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alexmantaut at suremptec.com.ar  Wed Jun 15 17:26:33 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Wed Jun 15 22:50:31 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <4DF91745.8040706@pobox.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com>
Message-ID: <BANLkTi=pa0NZvhFLQ4sEyC3OS=pmJntSYw@mail.gmail.com>

Frank:
         I opened a new defect ticket, and suggested a way around the
problem (I'm not sure if it's the best solution)

http://trac.osgeo.org/gdal/ticket/4121

Regards



2011/6/15 Frank Warmerdam <warmerdam@pobox.com>

> On 11-06-15 03:50 PM, Alex Mantaut wrote:
>
>> Hi Frank:
>>             Thanks for the swift reply.
>>              Right now it opens the metadata asociated to the root, and
>> also
>> the metadata asociated with all the other groups, but it doesn't open the
>> metadata asociated to the specified element (bug?)
>>
>
> Alex,
>
> It sounds like a defect to me, yes.
>
> I would suggest filing a ticket that carefully documents the
> problem with a supporting example file.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110615/73146c69/attachment-0001.html
From frederick.keusch at digimapas.cl  Wed Jun 15 18:02:53 2011
From: frederick.keusch at digimapas.cl (frederick keusch)
Date: Wed Jun 15 23:29:01 2011
Subject: [gdal-dev] Re: "disformed" images in its positions
In-Reply-To: <BANLkTimRvTz8hppb+NfaBwx6QCApyFK3JA@mail.gmail.com>
References: <1308088766789-6476206.post@n2.nabble.com>
	<BANLkTimBShQ9NqqgVOQJ79k-Oz8FVDnmqw@mail.gmail.com>
	<1308145626476-6478915.post@n2.nabble.com>
	<BANLkTimRvTz8hppb+NfaBwx6QCApyFK3JA@mail.gmail.com>
Message-ID: <1308175373903-6480835.post@n2.nabble.com>

Hi Chaitanya,

thanks again for your help. I tried to find some information about how to
set the projection info after our method and also how and with which command
apply the modified GCP's... hoping to find a solution soon.

Thank you again,

frederick

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/disformed-images-in-its-positions-tp6476206p6480835.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dcole at integrity-apps.com  Wed Jun 15 18:30:31 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jun 15 23:58:12 2011
Subject: [gdal-dev] CreateCopy() with same metadata, different raster data
In-Reply-To: <4DF8C544.7010904@pobox.com>
References: <8406B84EA8899042A8508D858843972903BE628A@CHUNEX01.integrity-apps.com>,
	<4DF7ED83.5080602@pobox.com>
	<8406B84EA8899042A8508D858843972903BE62CC@CHUNEX01.integrity-apps.com>,
	<4DF8C544.7010904@pobox.com>
Message-ID: <8406B84EA8899042A8508D858843972903BE6703@CHUNEX01.integrity-apps.com>

What about using the VRT driver? Is that for the situation I am describing? According to the CreateCopy documentation:

It is intended that CreateCopy() will often be used with a source dataset which is a virtual dataset allowing configuration of band types, and other information without actually duplicating raster data (see the VRT driver). This is what is done by the gdal_translate utility for example.

And according to the first example of Programatic creation of VRT datasets on http://www.gdal.org/gdal_vrttut.html

This looks like it creates clone of everything but the raster data. Can I basically do this when I am loading my image for the first time, then when my outputs are ready, open this, create a copy using the NITF driver, and then write to the bands of the NITF driver using RasterIO?

Thanks

Derek
________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Frank Warmerdam [warmerdam@pobox.com]
Sent: Wednesday, June 15, 2011 10:44 AM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] CreateCopy() with same metadata, different raster data

On 11-06-14 09:18 PM, Cole, Derek wrote:
> Hrmm, that is sort of unfortunate. I have set up a tiling algorithm to read
> in tiles at a time of imagery data, which is already slow-ish, even doing it
> it with threads. Having to do a whole new read of the entire image at once
> (since it doesnt seem CreateCopy takes any block parameters) would be pretty
> time consuming.
>
> Am I better off trying to just copy the Dataset manually, creating a new
> file from that?

Derek,

If efficiency is important, and you have a limited amount of metadata
you need to copy, I would setup your imagery in memory as a MEM dataset
and then programatically copy the parts of the metadata you need to it
from the source file.  Then do a CreateCopy from that to your final file.

You can ee something like that done in C in the MapServer msSaveImageGDAL()
function at:

   http://trac.osgeo.org/mapserver/browser/trunk/mapserver/mapgdal.c#L152

In all this I am assuming your final format is one that only supports
CreateCopy() (like JPEG or PNG) otherwise you can just imperatively
create the output file and set the info on it after writing the imagery.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From antonio.valentino at tiscali.it  Wed Jun 15 18:56:59 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Jun 16 00:26:06 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <4DF91745.8040706@pobox.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>	<4DF907C6.10204@pobox.com>	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com>
Message-ID: <4DF938BB.5050102@tiscali.it>

Hi Frank, hi Alex,

Il 15/06/2011 22:34, Frank Warmerdam ha scritto:
> On 11-06-15 03:50 PM, Alex Mantaut wrote:
>> Hi Frank:
>>              Thanks for the swift reply.
>>               Right now it opens the metadata asociated to the root,
>> and also
>> the metadata asociated with all the other groups, but it doesn't open the
>> metadata asociated to the specified element (bug?)
> 
> Alex,
> 
> It sounds like a defect to me, yes.
> 
> I would suggest filing a ticket that carefully documents the
> problem with a supporting example file.
> 
> Best regards,

The current behavior looks fine to me.

If one opens a specific subdataset then only one "HDF5 dataset object"
can be accessed and it is mapped on GDAL raster bans n. 1.
All other "HDF5 dataset object" in the h5 file are ignored by the
HDF5ImageDataset so there is no reason IMHO to make their metadata
available in some manner.

Metadata associated to all HDF5 groups (including the root one) are
available in any case and accessible via GDAL dataset metadata.

my two cents

-- 
Antonio Valentino
From alexmantaut at suremptec.com.ar  Thu Jun 16 09:05:42 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Thu Jun 16 15:20:39 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <4DF938BB.5050102@tiscali.it>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com> <4DF938BB.5050102@tiscali.it>
Message-ID: <BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>

Hi Antonio,

For what I discussed with Frank it seemed that the expected behavior was to
get the only the data asociated to that subdataset (plus some aditional data
from root and the other groups) I wasn't sure untill you confirmated...

Well, right now when I open a specific subdataset it gets only the raster
band asociated to that dataset, but when I try to open the metadata
(with GetMetadata() or GetMetadataItem()) from that subdataset it opens the
metadata from all the groups (as expected) but it doesn't get the metadata
asociated to that subdataset... Did I do something incorrectly when opening
the metadata from the subdataset?

 The line suggested in the ticket:
        ReadGlobalAttributes( TRUE );

Was a way to get around the problem, but now that I'm sure that
hdf5imagedataset doesn't need to read all the metadata, it's not a suitable
solution to the defect...

Right now I found another way to get the metadata from the subdataset, by
getting the rasterband first, and then asking for the metadata asociated to
that raster band ( it seems a overly convoluted to get the metadata
asociated to that subdataset...) I'm guessing that the expected behavior is
to get the information directly through GetMetadata() directly...

regards


2011/6/15 Antonio Valentino <antonio.valentino@tiscali.it>

> Hi Frank, hi Alex,
>
> Il 15/06/2011 22:34, Frank Warmerdam ha scritto:
> > On 11-06-15 03:50 PM, Alex Mantaut wrote:
> >> Hi Frank:
> >>              Thanks for the swift reply.
> >>               Right now it opens the metadata asociated to the root,
> >> and also
> >> the metadata asociated with all the other groups, but it doesn't open
> the
> >> metadata asociated to the specified element (bug?)
> >
> > Alex,
> >
> > It sounds like a defect to me, yes.
> >
> > I would suggest filing a ticket that carefully documents the
> > problem with a supporting example file.
> >
> > Best regards,
>
> The current behavior looks fine to me.
>
> If one opens a specific subdataset then only one "HDF5 dataset object"
> can be accessed and it is mapped on GDAL raster bans n. 1.
> All other "HDF5 dataset object" in the h5 file are ignored by the
> HDF5ImageDataset so there is no reason IMHO to make their metadata
> available in some manner.
>
> Metadata associated to all HDF5 groups (including the root one) are
> available in any case and accessible via GDAL dataset metadata.
>
> my two cents
>
> --
> Antonio Valentino
>  _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110616/48b1e00a/attachment.html
From antonio.valentino at tiscali.it  Thu Jun 16 09:49:20 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Jun 16 16:06:39 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com> <4DF938BB.5050102@tiscali.it>
	<BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>
Message-ID: <20110616154920.2c8e7f8b@asigrid01>

Hi Alex,

Il giorno Thu, 16 Jun 2011 10:05:42 -0300
Alex Mantaut <alexmantaut@suremptec.com.ar> ha scritto:

> Hi Antonio,
> 
> For what I discussed with Frank it seemed that the expected behavior
> was to get the only the data asociated to that subdataset (plus some
> aditional data from root and the other groups) I wasn't sure untill
> you confirmated...
> 
> Well, right now when I open a specific subdataset it gets only the
> raster band asociated to that dataset, but when I try to open the
> metadata (with GetMetadata() or GetMetadataItem()) from that
> subdataset it opens the metadata from all the groups (as expected)
> but it doesn't get the metadata asociated to that subdataset... Did I
> do something incorrectly when opening the metadata from the
> subdataset?
> 
>  The line suggested in the ticket:
>         ReadGlobalAttributes( TRUE );
> 
> Was a way to get around the problem, but now that I'm sure that
> hdf5imagedataset doesn't need to read all the metadata, it's not a
> suitable solution to the defect...
> 
> Right now I found another way to get the metadata from the
> subdataset, by getting the rasterband first, and then asking for the
> metadata asociated to that raster band ( it seems a overly convoluted
> to get the metadata asociated to that subdataset...) I'm guessing
> that the expected behavior is to get the information directly through
> GetMetadata() directly...
> 
> regards
> 

Well, IMHO it is not convoluted. Associating "HDF5 dataset" metadata
tho the GDAL raster band just reflects the original HDF5 structure.

Even if HDF5 and GDAL data model are quite different we can assume,
IMHO, the following correspondence:

HDF5 file    --> GDAL dataset (HDF5Dataset class)
HDF5 Group   --> None (metadata are associated to GDAL dataset)
HDF5 Dataset --> GDAL Raster Band

HDF5 file can contain several datasets (with arbitrary shape) so the
GDAL subdataset mechanism is used to tell to the HDF5ImageDataset class
which is the "HDF5 dataset" the have to be mapped onto the GDAL raster
band.

I hope this is not too much confusing, with my poor english I'm not
able to explain it better :).


regards

> 
> 2011/6/15 Antonio Valentino <antonio.valentino@tiscali.it>
> 
> > Hi Frank, hi Alex,
> >
> > Il 15/06/2011 22:34, Frank Warmerdam ha scritto:
> > > On 11-06-15 03:50 PM, Alex Mantaut wrote:
> > >> Hi Frank:
> > >>              Thanks for the swift reply.
> > >>               Right now it opens the metadata asociated to the
> > >> root, and also
> > >> the metadata asociated with all the other groups, but it doesn't
> > >> open
> > the
> > >> metadata asociated to the specified element (bug?)
> > >
> > > Alex,
> > >
> > > It sounds like a defect to me, yes.
> > >
> > > I would suggest filing a ticket that carefully documents the
> > > problem with a supporting example file.
> > >
> > > Best regards,
> >
> > The current behavior looks fine to me.
> >
> > If one opens a specific subdataset then only one "HDF5 dataset
> > object" can be accessed and it is mapped on GDAL raster bans n. 1.
> > All other "HDF5 dataset object" in the h5 file are ignored by the
> > HDF5ImageDataset so there is no reason IMHO to make their metadata
> > available in some manner.
> >
> > Metadata associated to all HDF5 groups (including the root one) are
> > available in any case and accessible via GDAL dataset metadata.
> >
> > my two cents
> >
> > --
> > Antonio Valentino


-- 
Antonio Valentino
From alexmantaut at suremptec.com.ar  Thu Jun 16 10:51:48 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Thu Jun 16 17:12:23 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <20110616154920.2c8e7f8b@asigrid01>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com> <4DF938BB.5050102@tiscali.it>
	<BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>
	<20110616154920.2c8e7f8b@asigrid01>
Message-ID: <BANLkTikQ4qP04jSsqUQHeqyqH7wBh+7gZA@mail.gmail.com>

Antonio,
           Ok, I understand the asociation between the raster band and the
metadata, but if you have to explicitally ask for the raster band in order
to get the metadata there is an inconsistency between the interface to get
metadata from hdf5dataset and hdf5imagedataset... In hdf5dataset
GetMetadata() returns the metadata asociated to the all the subdatasets
without need to explicitally ask for the raster band, but in
hdf5imagedataset you have to explicitally ask for the raster band in order
to get the metadata...
           IMHO the interface should be the same in both cases, in that case
hdf5imagedataset should retrieve the metadata asociated to the subdataset
directly via GetMetadata()...

regards

PS: Your english is fine, i hope you can understand my lousy english... If
you can't explain something in english you can also write in italian to my
mail, the we can send a translated message with the conclusions to the list


2011/6/16 Antonio Valentino <antonio.valentino@tiscali.it>

> Hi Alex,
>
> Il giorno Thu, 16 Jun 2011 10:05:42 -0300
> Alex Mantaut <alexmantaut@suremptec.com.ar> ha scritto:
>
> > Hi Antonio,
> >
> > For what I discussed with Frank it seemed that the expected behavior
> > was to get the only the data asociated to that subdataset (plus some
> > aditional data from root and the other groups) I wasn't sure untill
> > you confirmated...
> >
> > Well, right now when I open a specific subdataset it gets only the
> > raster band asociated to that dataset, but when I try to open the
> > metadata (with GetMetadata() or GetMetadataItem()) from that
> > subdataset it opens the metadata from all the groups (as expected)
> > but it doesn't get the metadata asociated to that subdataset... Did I
> > do something incorrectly when opening the metadata from the
> > subdataset?
> >
> >  The line suggested in the ticket:
> >         ReadGlobalAttributes( TRUE );
> >
> > Was a way to get around the problem, but now that I'm sure that
> > hdf5imagedataset doesn't need to read all the metadata, it's not a
> > suitable solution to the defect...
> >
> > Right now I found another way to get the metadata from the
> > subdataset, by getting the rasterband first, and then asking for the
> > metadata asociated to that raster band ( it seems a overly convoluted
> > to get the metadata asociated to that subdataset...) I'm guessing
> > that the expected behavior is to get the information directly through
> > GetMetadata() directly...
> >
> > regards
> >
>
> Well, IMHO it is not convoluted. Associating "HDF5 dataset" metadata
> tho the GDAL raster band just reflects the original HDF5 structure.
>
> Even if HDF5 and GDAL data model are quite different we can assume,
> IMHO, the following correspondence:
>
> HDF5 file    --> GDAL dataset (HDF5Dataset class)
> HDF5 Group   --> None (metadata are associated to GDAL dataset)
> HDF5 Dataset --> GDAL Raster Band
>
> HDF5 file can contain several datasets (with arbitrary shape) so the
> GDAL subdataset mechanism is used to tell to the HDF5ImageDataset class
> which is the "HDF5 dataset" the have to be mapped onto the GDAL raster
> band.
>
> I hope this is not too much confusing, with my poor english I'm not
> able to explain it better :).
>
>
> regards
>
> >
> > 2011/6/15 Antonio Valentino <antonio.valentino@tiscali.it>
> >
> > > Hi Frank, hi Alex,
> > >
> > > Il 15/06/2011 22:34, Frank Warmerdam ha scritto:
> > > > On 11-06-15 03:50 PM, Alex Mantaut wrote:
> > > >> Hi Frank:
> > > >>              Thanks for the swift reply.
> > > >>               Right now it opens the metadata asociated to the
> > > >> root, and also
> > > >> the metadata asociated with all the other groups, but it doesn't
> > > >> open
> > > the
> > > >> metadata asociated to the specified element (bug?)
> > > >
> > > > Alex,
> > > >
> > > > It sounds like a defect to me, yes.
> > > >
> > > > I would suggest filing a ticket that carefully documents the
> > > > problem with a supporting example file.
> > > >
> > > > Best regards,
> > >
> > > The current behavior looks fine to me.
> > >
> > > If one opens a specific subdataset then only one "HDF5 dataset
> > > object" can be accessed and it is mapped on GDAL raster bans n. 1.
> > > All other "HDF5 dataset object" in the h5 file are ignored by the
> > > HDF5ImageDataset so there is no reason IMHO to make their metadata
> > > available in some manner.
> > >
> > > Metadata associated to all HDF5 groups (including the root one) are
> > > available in any case and accessible via GDAL dataset metadata.
> > >
> > > my two cents
> > >
> > > --
> > > Antonio Valentino
>
>
> --
>  Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110616/4431ca93/attachment.html
From antonio.valentino at tiscali.it  Thu Jun 16 11:16:09 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Jun 16 17:38:00 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <BANLkTikQ4qP04jSsqUQHeqyqH7wBh+7gZA@mail.gmail.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com> <4DF938BB.5050102@tiscali.it>
	<BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>
	<20110616154920.2c8e7f8b@asigrid01>
	<BANLkTikQ4qP04jSsqUQHeqyqH7wBh+7gZA@mail.gmail.com>
Message-ID: <20110616171609.0cfaea90@asigrid01>

Hi Alex,

Il giorno Thu, 16 Jun 2011 11:51:48 -0300
Alex Mantaut <alexmantaut@suremptec.com.ar> ha scritto:

> Antonio,
>            Ok, I understand the asociation between the raster band
> and the metadata, but if you have to explicitally ask for the raster
> band in order to get the metadata there is an inconsistency between
> the interface to get metadata from hdf5dataset and
> hdf5imagedataset... In hdf5dataset GetMetadata() returns the metadata
> asociated to the all the subdatasets without need to explicitally ask
> for the raster band, but in hdf5imagedataset you have to explicitally
> ask for the raster band in order to get the metadata...
>            IMHO the interface should be the same in both cases, in
> that case hdf5imagedataset should retrieve the metadata asociated to
> the subdataset directly via GetMetadata()...


Umh, I don't know. I've always considered HDF5Dataset and
HDF5ImageDataset as quite different things: the index and the chapters.

But I have to admit that yours is a good point.


> 2011/6/16 Antonio Valentino <antonio.valentino@tiscali.it>
> 
> > Hi Alex,
> >
> > Il giorno Thu, 16 Jun 2011 10:05:42 -0300
> > Alex Mantaut <alexmantaut@suremptec.com.ar> ha scritto:
> >
> > > Hi Antonio,
> > >
> > > For what I discussed with Frank it seemed that the expected
> > > behavior was to get the only the data asociated to that
> > > subdataset (plus some aditional data from root and the other
> > > groups) I wasn't sure untill you confirmated...
> > >
> > > Well, right now when I open a specific subdataset it gets only the
> > > raster band asociated to that dataset, but when I try to open the
> > > metadata (with GetMetadata() or GetMetadataItem()) from that
> > > subdataset it opens the metadata from all the groups (as expected)
> > > but it doesn't get the metadata asociated to that subdataset...
> > > Did I do something incorrectly when opening the metadata from the
> > > subdataset?
> > >
> > >  The line suggested in the ticket:
> > >         ReadGlobalAttributes( TRUE );
> > >
> > > Was a way to get around the problem, but now that I'm sure that
> > > hdf5imagedataset doesn't need to read all the metadata, it's not a
> > > suitable solution to the defect...
> > >
> > > Right now I found another way to get the metadata from the
> > > subdataset, by getting the rasterband first, and then asking for
> > > the metadata asociated to that raster band ( it seems a overly
> > > convoluted to get the metadata asociated to that subdataset...)
> > > I'm guessing that the expected behavior is to get the information
> > > directly through GetMetadata() directly...
> > >
> > > regards
> > >
> >
> > Well, IMHO it is not convoluted. Associating "HDF5 dataset" metadata
> > tho the GDAL raster band just reflects the original HDF5 structure.
> >
> > Even if HDF5 and GDAL data model are quite different we can assume,
> > IMHO, the following correspondence:
> >
> > HDF5 file    --> GDAL dataset (HDF5Dataset class)
> > HDF5 Group   --> None (metadata are associated to GDAL dataset)
> > HDF5 Dataset --> GDAL Raster Band
> >
> > HDF5 file can contain several datasets (with arbitrary shape) so the
> > GDAL subdataset mechanism is used to tell to the HDF5ImageDataset
> > class which is the "HDF5 dataset" the have to be mapped onto the
> > GDAL raster band.
> >
> > I hope this is not too much confusing, with my poor english I'm not
> > able to explain it better :).
> >
> >
> > regards
> >
> > >
> > > 2011/6/15 Antonio Valentino <antonio.valentino@tiscali.it>
> > >
> > > > Hi Frank, hi Alex,
> > > >
> > > > Il 15/06/2011 22:34, Frank Warmerdam ha scritto:
> > > > > On 11-06-15 03:50 PM, Alex Mantaut wrote:
> > > > >> Hi Frank:
> > > > >>              Thanks for the swift reply.
> > > > >>               Right now it opens the metadata asociated to
> > > > >> the root, and also
> > > > >> the metadata asociated with all the other groups, but it
> > > > >> doesn't open
> > > > the
> > > > >> metadata asociated to the specified element (bug?)
> > > > >
> > > > > Alex,
> > > > >
> > > > > It sounds like a defect to me, yes.
> > > > >
> > > > > I would suggest filing a ticket that carefully documents the
> > > > > problem with a supporting example file.
> > > > >
> > > > > Best regards,
> > > >
> > > > The current behavior looks fine to me.
> > > >
> > > > If one opens a specific subdataset then only one "HDF5 dataset
> > > > object" can be accessed and it is mapped on GDAL raster bans n.
> > > > 1. All other "HDF5 dataset object" in the h5 file are ignored
> > > > by the HDF5ImageDataset so there is no reason IMHO to make
> > > > their metadata available in some manner.
> > > >
> > > > Metadata associated to all HDF5 groups (including the root one)
> > > > are available in any case and accessible via GDAL dataset
> > > > metadata.
> > > >
> > > > my two cents


-- 
Antonio Valentino
From alexmantaut at suremptec.com.ar  Thu Jun 16 11:27:25 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Thu Jun 16 17:49:39 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <20110616171609.0cfaea90@asigrid01>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com> <4DF938BB.5050102@tiscali.it>
	<BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>
	<20110616154920.2c8e7f8b@asigrid01>
	<BANLkTikQ4qP04jSsqUQHeqyqH7wBh+7gZA@mail.gmail.com>
	<20110616171609.0cfaea90@asigrid01>
Message-ID: <BANLkTi=tE+xn1qt6-qHOnN7vToAtDZbrVg@mail.gmail.com>

Then, to keep consistency, the fact that hdf5imagedataset isn't consistent
with the hdf5dataset is a defect, right?
May I summarize the conclusions and update the ticket?

thanks for your patience Antonio
2011/6/16 Antonio Valentino <antonio.valentino@tiscali.it>

> Hi Alex,
>
> Il giorno Thu, 16 Jun 2011 11:51:48 -0300
> Alex Mantaut <alexmantaut@suremptec.com.ar> ha scritto:
>
> > Antonio,
> >            Ok, I understand the asociation between the raster band
> > and the metadata, but if you have to explicitally ask for the raster
> > band in order to get the metadata there is an inconsistency between
> > the interface to get metadata from hdf5dataset and
> > hdf5imagedataset... In hdf5dataset GetMetadata() returns the metadata
> > asociated to the all the subdatasets without need to explicitally ask
> > for the raster band, but in hdf5imagedataset you have to explicitally
> > ask for the raster band in order to get the metadata...
> >            IMHO the interface should be the same in both cases, in
> > that case hdf5imagedataset should retrieve the metadata asociated to
> > the subdataset directly via GetMetadata()...
>
>
> Umh, I don't know. I've always considered HDF5Dataset and
> HDF5ImageDataset as quite different things: the index and the chapters.
>
> But I have to admit that yours is a good point.
>
>
> > 2011/6/16 Antonio Valentino <antonio.valentino@tiscali.it>
> >
> > > Hi Alex,
> > >
> > > Il giorno Thu, 16 Jun 2011 10:05:42 -0300
> > > Alex Mantaut <alexmantaut@suremptec.com.ar> ha scritto:
> > >
> > > > Hi Antonio,
> > > >
> > > > For what I discussed with Frank it seemed that the expected
> > > > behavior was to get the only the data asociated to that
> > > > subdataset (plus some aditional data from root and the other
> > > > groups) I wasn't sure untill you confirmated...
> > > >
> > > > Well, right now when I open a specific subdataset it gets only the
> > > > raster band asociated to that dataset, but when I try to open the
> > > > metadata (with GetMetadata() or GetMetadataItem()) from that
> > > > subdataset it opens the metadata from all the groups (as expected)
> > > > but it doesn't get the metadata asociated to that subdataset...
> > > > Did I do something incorrectly when opening the metadata from the
> > > > subdataset?
> > > >
> > > >  The line suggested in the ticket:
> > > >         ReadGlobalAttributes( TRUE );
> > > >
> > > > Was a way to get around the problem, but now that I'm sure that
> > > > hdf5imagedataset doesn't need to read all the metadata, it's not a
> > > > suitable solution to the defect...
> > > >
> > > > Right now I found another way to get the metadata from the
> > > > subdataset, by getting the rasterband first, and then asking for
> > > > the metadata asociated to that raster band ( it seems a overly
> > > > convoluted to get the metadata asociated to that subdataset...)
> > > > I'm guessing that the expected behavior is to get the information
> > > > directly through GetMetadata() directly...
> > > >
> > > > regards
> > > >
> > >
> > > Well, IMHO it is not convoluted. Associating "HDF5 dataset" metadata
> > > tho the GDAL raster band just reflects the original HDF5 structure.
> > >
> > > Even if HDF5 and GDAL data model are quite different we can assume,
> > > IMHO, the following correspondence:
> > >
> > > HDF5 file    --> GDAL dataset (HDF5Dataset class)
> > > HDF5 Group   --> None (metadata are associated to GDAL dataset)
> > > HDF5 Dataset --> GDAL Raster Band
> > >
> > > HDF5 file can contain several datasets (with arbitrary shape) so the
> > > GDAL subdataset mechanism is used to tell to the HDF5ImageDataset
> > > class which is the "HDF5 dataset" the have to be mapped onto the
> > > GDAL raster band.
> > >
> > > I hope this is not too much confusing, with my poor english I'm not
> > > able to explain it better :).
> > >
> > >
> > > regards
> > >
> > > >
> > > > 2011/6/15 Antonio Valentino <antonio.valentino@tiscali.it>
> > > >
> > > > > Hi Frank, hi Alex,
> > > > >
> > > > > Il 15/06/2011 22:34, Frank Warmerdam ha scritto:
> > > > > > On 11-06-15 03:50 PM, Alex Mantaut wrote:
> > > > > >> Hi Frank:
> > > > > >>              Thanks for the swift reply.
> > > > > >>               Right now it opens the metadata asociated to
> > > > > >> the root, and also
> > > > > >> the metadata asociated with all the other groups, but it
> > > > > >> doesn't open
> > > > > the
> > > > > >> metadata asociated to the specified element (bug?)
> > > > > >
> > > > > > Alex,
> > > > > >
> > > > > > It sounds like a defect to me, yes.
> > > > > >
> > > > > > I would suggest filing a ticket that carefully documents the
> > > > > > problem with a supporting example file.
> > > > > >
> > > > > > Best regards,
> > > > >
> > > > > The current behavior looks fine to me.
> > > > >
> > > > > If one opens a specific subdataset then only one "HDF5 dataset
> > > > > object" can be accessed and it is mapped on GDAL raster bans n.
> > > > > 1. All other "HDF5 dataset object" in the h5 file are ignored
> > > > > by the HDF5ImageDataset so there is no reason IMHO to make
> > > > > their metadata available in some manner.
> > > > >
> > > > > Metadata associated to all HDF5 groups (including the root one)
> > > > > are available in any case and accessible via GDAL dataset
> > > > > metadata.
> > > > >
> > > > > my two cents
>
>
> --
> Antonio Valentino
>  _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110616/697ca1f7/attachment.html
From matt.wilkie at gov.yk.ca  Thu Jun 16 13:20:13 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Jun 16 19:48:35 2011
Subject: [gdal-dev] jpeg in tiff artifacts
Message-ID: <4DFA3B4D.3080508@gov.yk.ca>

Hello,

When I convert with gdal_translate and use jpeg compression in geotiff 
format there is artifacting on the edges. It looks like nodata is being 
ignored. Is there any way to avoid this? (and still use jpeg or 
equivalent space-saving compression)



see attached.

-- 
matt wilkie
--------------------------------------------
Geomatics Analyst
Information Management and Technology
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

From rush at winkey.org  Thu Jun 16 13:59:35 2011
From: rush at winkey.org (Brian Case)
Date: Thu Jun 16 20:30:23 2011
Subject: [gdal-dev] jpeg in tiff artifacts
In-Reply-To: <4DFA3B4D.3080508@gov.yk.ca>
References: <4DFA3B4D.3080508@gov.yk.ca>
Message-ID: <1308247175.3639.47.camel@octopi>

matt,

jpeg is a lossy format. the nodata is ignored because those pixels are
no longer the same value as the nodata value.

You can add a mask band to the tiff but unfortunately aside from
gdalwarp and mapserver I don't think there is any other way to read it.

see http://docs.oam.osgeo.org/storage/creating.html

Brian





On Thu, 2011-06-16 at 10:20 -0700, Matt Wilkie wrote:
> Hello,
> 
> When I convert with gdal_translate and use jpeg compression in geotiff 
> format there is artifacting on the edges. It looks like nodata is being 
> ignored. Is there any way to avoid this? (and still use jpeg or 
> equivalent space-saving compression)
> 
> 
> 
> see attached.
> 


From matt.wilkie at gov.yk.ca  Thu Jun 16 16:07:23 2011
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Thu Jun 16 22:44:59 2011
Subject: [gdal-dev] jpeg in tiff artifacts
In-Reply-To: <1308247175.3639.47.camel@octopi>
References: <4DFA3B4D.3080508@gov.yk.ca> <1308247175.3639.47.camel@octopi>
Message-ID: <4DFA627B.3060104@gov.yk.ca>

> You can add a mask band to the tiff but unfortunately aside from
> gdalwarp and mapserver I don't think there is any other way to read it.
>
> see http://docs.oam.osgeo.org/storage/creating.html

Thanks Brian! I've not used masks in gdal before. From my initial 
testing I think I can use that recipe for our images as Arcmap (10) 
seems to respect the mask.


-matt
From ramirogonzalez at suremptec.com.ar  Fri Jun 17 10:55:39 2011
From: ramirogonzalez at suremptec.com.ar (Ramiro Gonzalez)
Date: Fri Jun 17 18:35:21 2011
Subject: [gdal-dev] get GCP from noaa L1b
In-Reply-To: <BANLkTinRecCc9AXh5Bug3sdiAFSXb1i=Cw@mail.gmail.com>
References: <BANLkTikfB7nmTFo+byDTs7Sgyp-i5TUUrg@mail.gmail.com>
	<BANLkTinRecCc9AXh5Bug3sdiAFSXb1i=Cw@mail.gmail.com>
Message-ID: <BANLkTikRLRyfy-nBYwBEz+9ZAJMXycYTtw@mail.gmail.com>

Hi,

Function ProcessRecordHeaders in "formats/l1b/l1bdataset.cpp" subsamples the
GCPs of the l1b image, but the points are unordered an not equidistant.

I attached to TCK 2403  a patch that modifies this behaviour. I tested the
image attached to the ticket and seems to work ok(no error produced).

I also test the patched driver  with an image of Argentina and worked ok.

I'd like to know if I misunderstood the intention of the code and the points
in each line shouldn't be equidistant.

Thanks
Ramiro


2011/6/15 Andrew Brooks <arb@sat.dundee.ac.uk>

> Hi
>
> From memory the l1b driver doesn't use enough points to get proper
> geolocation because it sub-samples the 51 which are provided in the l1b
> file. The best solution (that recommended by NOAA) is to use lagrange
> interpolation across the 51 points. A lagrange algorithm has been provided
> in the ticket you referenced but nobody has added it to gdal. I think at the
> moment you could consider the l1b driver broken.
>
> Andrew
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110617/b76515d2/attachment.html
From armin.burger at gmx.net  Fri Jun 17 14:56:55 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Fri Jun 17 22:49:43 2011
Subject: [gdal-dev] gdal_translate - ECW format and non-UTM projections
In-Reply-To: <4DEF98F5.2080501@pobox.com>
References: <20110608122453.139240@gmx.net>
	<4DEF86CA.7030202@free.fr>	<20110608153018.62180@gmx.net>
	<4DEF98F5.2080501@pobox.com>
Message-ID: <4DFBA377.1090205@gmx.net>

On 08/06/2011 17:44, Frank Warmerdam wrote:
> Armin,
>
> GDAL skips with a file data/ecw_cs.wkt that lists many ECW
> projections and datums. Perhaps it will be helpful.
>
> There are definately problems translating coordinate system
> into the ECW dictionary. A ticket for a particular case
> *might* lead to some improvement but it is an iffy process.
>
> Part of the problem in the thread mentioned by Jean-Claude
> is that when the coordinate system translation fails GDAL
> also gives up on read the georeferencing transform - or at
> least I think it used to work this way. I think there may
> have been some recent fixes in this regard. If not, a ticket
> might be appropriate.
>
> Best regards,
>

Frank, Jean-Claude

I made some tests and the tool from Jean-Claude was very useful also for 
this. I defined new projections by adding them to the "ecw_cs.wkt" file, 
taking the definitions GDAL returns using Python bindings for the OSR 
and the combination of ImportFromEPSG/ExportToWkt methods.

If with gdalinfo a projection was not recognized for an ECW file I first 
tried to add it via the -co "PROJ=..." flag. This alone had no effect 
and gdalinfo still did not display any projection. Only when adding as 
well the correct datum via -co "DATUM=..." gdalinfo returned the full 
and correct projection definition.

I tested this then not only with gdal tools directly but also with 
programs that use GDAL for image rendering, like QGIS and ArcGis 10. 
Also there, when adding the new projections to the "ecw_cs.wkt", the 
programs recognized the projection information correctly.

So for me a first solution would be to define all missing projections 
and adding them to the "ecw_cs.wkt" file. In principal using the EPSG 
code as projection name would be sufficient (and easy to define), but 
this seems not to follow standard naming conventions so I will define 
short names for them. The projections I'm interested in are mainly 
national European projections and some pan-European ones (the ETRS 
types). I would be glad if these definitions could be added later on to 
the GDAL sources and go into future releases. Maybe sooner or later they 
might be included as well in the programs that use GDAL for image rendering.

Then I need to define at least for my own use a CSV table with
   EPSG, projection, datum
in order to identify the projection names and datums corresponding to a 
certain EPSG code. I will use it when creating ECW files or updating the 
ECW headers where I have the projection available as EPSG code. For me a 
great solution would be if GDAL could make use of such a table eg. in 
gdal_translate when it can identify the EPSG code or when it is passed 
via the "-a_srs" option, but I don't know if this is somehow feasible.

Another helpful addition would be the possibility to set projection and 
datum in an ECW header via update functions of GDAL SWIG bindings, like 
it is currently possible eg. for GeoTiff files.

Frank, if you think some of this might be feasible I will create 
ticket(s) for this.

Cheers
Armin
From pmallas at rsmas.miami.edu  Fri Jun 17 15:23:58 2011
From: pmallas at rsmas.miami.edu (Paul Mallas)
Date: Fri Jun 17 23:19:18 2011
Subject: [gdal-dev] Transposing image data using RasterIO
Message-ID: <4DFBA9CE.3040306@rsmas.miami.edu>

Hello,

I am trying to transpose image data (i.e., swap lines and columns) and 
am struggling to make it work properly. I think this should be possible 
through RasterIO, but so far no luck.  Any suggestions?

My approach so far has been like this, with image nXsize by nYsize:

void *pData = VSIMalloc2(nXSize, (GDALGetDataTypeSize(eType) / 8));

for (int iLine = 0; iLine < nYSize; iLine++) {

    // Read in row (line)
    eErr = poSrcBand->RasterIO(GF_Read, 0, iLine, nXSize, 1, pData,
					nXSize, 1, eType, 0,0);

   // Now I want to write a column, nothing I tried here has worked
    eErr = poDstBand->RasterIO(GF_Write, .......



}
From rodolfobonnin at suremptec.com.ar  Fri Jun 17 15:28:23 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Fri Jun 17 23:22:49 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
Message-ID: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>

Hello all,

I'm just working with some JAXAPalsar images, and I've discovered that
there is no retrieval of the coordinate system metadata retrieval in
the current driver, the driver documentation says georeferencing is
only supported in level 1.5.
Has anyone tried to implement the feature for this lower level? I have
gathered some good information about how this could be done, but in
order to exempt myself to repeat effort, I prefer to consult the list
beforehand.

Many thanks in advance.


-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
From warmerdam at pobox.com  Fri Jun 17 17:41:39 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jun 18 01:43:14 2011
Subject: [gdal-dev] Transposing image data using RasterIO
In-Reply-To: <4DFBA9CE.3040306@rsmas.miami.edu>
References: <4DFBA9CE.3040306@rsmas.miami.edu>
Message-ID: <4DFBCA13.6000203@pobox.com>

On 11-06-17 03:23 PM, Paul Mallas wrote:
> Hello,
>
> I am trying to transpose image data (i.e., swap lines and columns) and am
> struggling to make it work properly. I think this should be possible through
> RasterIO, but so far no luck. Any suggestions?
>
> My approach so far has been like this, with image nXsize by nYsize:
>
> void *pData = VSIMalloc2(nXSize, (GDALGetDataTypeSize(eType) / 8));
>
> for (int iLine = 0; iLine < nYSize; iLine++) {
>
> // Read in row (line)
> eErr = poSrcBand->RasterIO(GF_Read, 0, iLine, nXSize, 1, pData,
> nXSize, 1, eType, 0,0);
>
> // Now I want to write a column, nothing I tried here has worked
> eErr = poDstBand->RasterIO(GF_Write, .......

Paul,

You should be able to write this column wise like:

   poDstBand->RasterIO( GF_Write, iLine, 0, 1, nXSize,
                        pData, 1, nXSize, eType, 0, 0 );

Note that this can be pretty inefficient depending on the format and
how it is blocked.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pmallas at rsmas.miami.edu  Fri Jun 17 18:25:31 2011
From: pmallas at rsmas.miami.edu (Paul Mallas)
Date: Sat Jun 18 02:29:50 2011
Subject: [gdal-dev] Re: Transposing image data using RasterIO
In-Reply-To: <4DFBCA13.6000203@pobox.com>
References: <4DFBA9CE.3040306@rsmas.miami.edu> <4DFBCA13.6000203@pobox.com>
Message-ID: <itgk8u$lkn$1@dough.gmane.org>

On 6/17/2011 5:41 PM, Frank Warmerdam wrote:
> On 11-06-17 03:23 PM, Paul Mallas wrote:
>> Hello,
>>
>> I am trying to transpose image data (i.e., swap lines and columns) and am
>> struggling to make it work properly. I think this should be possible
>> through
>> RasterIO, but so far no luck. Any suggestions?
>>
>> My approach so far has been like this, with image nXsize by nYsize:
>>
>> void *pData = VSIMalloc2(nXSize, (GDALGetDataTypeSize(eType) / 8));
>>
>> for (int iLine = 0; iLine < nYSize; iLine++) {
>>
>> // Read in row (line)
>> eErr = poSrcBand->RasterIO(GF_Read, 0, iLine, nXSize, 1, pData,
>> nXSize, 1, eType, 0,0);
>>
>> // Now I want to write a column, nothing I tried here has worked
>> eErr = poDstBand->RasterIO(GF_Write, .......
>
> Paul,
>
> You should be able to write this column wise like:
>
> poDstBand->RasterIO( GF_Write, iLine, 0, 1, nXSize,
> pData, 1, nXSize, eType, 0, 0 );
>
> Note that this can be pretty inefficient depending on the format and
> how it is blocked.
>
> Best regards,

Hmm, I thought I tried this configuration.  I will try again.  Thank you 
for your time Frank.

From kurt at birdseyeviewgis.com  Fri Jun 17 19:27:59 2011
From: kurt at birdseyeviewgis.com (Kurt Menke)
Date: Sat Jun 18 03:43:19 2011
Subject: [gdal-dev] OsGeo4W gdal_merge.py
Message-ID: <025901cc2d46$32a7a530$97f6ef90$@com>

Hello,

I have gdal installed via OSgeo4W including gdal-python. 

 

I am trying to run gdal_merge.py from the OSGeo4W Shell and get the
following error:

 

Traceback (most recent call last):

  File "C:\OSGeo4W\bin\gdal_merge.py", line 32, in <module>

    import gdal

  File "C:\OSGeo4W\apps\openev\pymod\gdal.py", line 191, in <module>

    import _gdal

ImportError: No module named _gdal

 

 

I'm running Windows 7 64 bit.

Can anyone shed any light on how to correct this.

 

Thanks

Kurt 

 

**************************

Kurt Menke, GISP

Bird's Eye View 

 <http://www.birdseyeviewgis.com/> www.BirdsEyeViewGIS.com 

Work: 505-265-0243

Cell: 505-362-1776

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110617/f208699b/attachment-0001.html
From warmerdam at pobox.com  Fri Jun 17 23:27:47 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jun 18 07:48:15 2011
Subject: [gdal-dev] OsGeo4W gdal_merge.py
In-Reply-To: <025901cc2d46$32a7a530$97f6ef90$@com>
References: <025901cc2d46$32a7a530$97f6ef90$@com>
Message-ID: <4DFC1B33.5040706@pobox.com>

On 11-06-17 07:27 PM, Kurt Menke wrote:
> Hello,
>
> I have gdal installed via OSgeo4W including gdal-python.
>
> I am trying to run gdal_merge.py from the OSGeo4W Shell and get the following
> error:
>
> Traceback (most recent call last):
>
> File "C:\OSGeo4W\bin\gdal_merge.py", line 32, in <module>
>
> import gdal
>
> File "C:\OSGeo4W\apps\openev\pymod\gdal.py", line 191, in <module>
>
> import _gdal
>
> ImportError: No module named _gdal

Kurt,

The hint is the openev in the path.  It turns out if you run openev from
the OSGeo4w command shell it modifies the python path to point to it's
private tree which screws up later normal python stuff.  Just close the
shell and restart it and you should be good.

I have issued an updated version of OpenEV in OSGeo4W that should not
have this problem as the openev.bat restores the PYTHONPATH and
PYTHONHOME environment variables.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From antonio.valentino at tiscali.it  Sat Jun 18 02:30:10 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sat Jun 18 11:06:24 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <BANLkTi=tE+xn1qt6-qHOnN7vToAtDZbrVg@mail.gmail.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>	<4DF907C6.10204@pobox.com>	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>	<4DF91745.8040706@pobox.com>
	<4DF938BB.5050102@tiscali.it>	<BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>	<20110616154920.2c8e7f8b@asigrid01>	<BANLkTikQ4qP04jSsqUQHeqyqH7wBh+7gZA@mail.gmail.com>	<20110616171609.0cfaea90@asigrid01>
	<BANLkTi=tE+xn1qt6-qHOnN7vToAtDZbrVg@mail.gmail.com>
Message-ID: <4DFC45F2.80302@tiscali.it>

Hi Alex,

Il 16/06/2011 17:27, Alex Mantaut ha scritto:
> Then, to keep consistency, the fact that hdf5imagedataset isn't consistent
> with the hdf5dataset is a defect, right?
> May I summarize the conclusions and update the ticket?

OK

-- 
Antonio Valentino
From antonio.valentino at tiscali.it  Sat Jun 18 02:59:51 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sat Jun 18 11:31:45 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
Message-ID: <4DFC4CE7.8030706@tiscali.it>

Hi Rodolfo,

Il 17/06/2011 21:28, Rodolfo Bonnin ha scritto:
> Hello all,
> 
> I'm just working with some JAXAPalsar images, and I've discovered that
> there is no retrieval of the coordinate system metadata retrieval in
> the current driver, the driver documentation says georeferencing is
> only supported in level 1.5.
> Has anyone tried to implement the feature for this lower level? I have
> gathered some good information about how this could be done, but in
> order to exempt myself to repeat effort, I prefer to consult the list
> beforehand.

I don't know if someone is currently working on the JAXAPalsar driver.
Anyway I' very interested in extending driver for SAR products to get
more metadata so I would be happy to help if you need.

Palsar products are in CEOS format so IMHO it would be nice to setup a
general mechanism to decode CEOS records (a similar job has been done
for ENVISAT records recently)

http://trac.osgeo.org/gdal/ticket/4105
http://trac.osgeo.org/gdal/attachment/ticket/4105/asar_metadata.patch

The hard part (it is a very boring job) IMHO is to fill data structures
that properly describe CEOS records for each sensor end product type.

Anyway populating record descriptors is a job that can be done gradually
and, hopefully, with the help of other users so we could start with the
few metadata you are currently interested in and add other record
descriptors later.

The key is to setup a genereal (enough) framework for CEOS record decoding.


Best regards

-- 
Antonio Valentino
From warmerdam at pobox.com  Sat Jun 18 08:38:34 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jun 18 17:28:43 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4DFC4CE7.8030706@tiscali.it>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it>
Message-ID: <4DFC9C4A.9080404@pobox.com>

On 11-06-18 02:59 AM, Antonio Valentino wrote:
> I don't know if someone is currently working on the JAXAPalsar driver.
> Anyway I' very interested in extending driver for SAR products to get
> more metadata so I would be happy to help if you need.

Folks,

Phil Vachon did most of the JAXA Palsar work but has moved on to
non-geospatial pursuits, so anyone interested should feel free to
dig in.

> Palsar products are in CEOS format so IMHO it would be nice to setup a
> general mechanism to decode CEOS records (a similar job has been done
> for ENVISAT records recently)
>
> http://trac.osgeo.org/gdal/ticket/4105
> http://trac.osgeo.org/gdal/attachment/ticket/4105/asar_metadata.patch
>
> The hard part (it is a very boring job) IMHO is to fill data structures
> that properly describe CEOS records for each sensor end product type.
>
> Anyway populating record descriptors is a job that can be done gradually
> and, hopefully, with the help of other users so we could start with the
> few metadata you are currently interested in and add other record
> descriptors later.
>
> The key is to setup a genereal (enough) framework for CEOS record decoding.

There is already a generic SAR CEOS driver (gdal/frmts/ceos2) with a CEOS
record parsing mechanism.  If that is what you want, please start from it.
For reasons not immediately obvious to me Phil chose to build a specific
JAXA Palsar driver but please think twice before building it out into a full
generic CEOS driver duplicating what already exists.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From antonio.valentino at tiscali.it  Sat Jun 18 12:59:36 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sat Jun 18 22:03:52 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4DFC9C4A.9080404@pobox.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>	<4DFC4CE7.8030706@tiscali.it>
	<4DFC9C4A.9080404@pobox.com>
Message-ID: <4DFCD978.9070107@tiscali.it>

Hi Frank,

Il 18/06/2011 14:38, Frank Warmerdam ha scritto:
> On 11-06-18 02:59 AM, Antonio Valentino wrote:
>> I don't know if someone is currently working on the JAXAPalsar driver.
>> Anyway I' very interested in extending driver for SAR products to get
>> more metadata so I would be happy to help if you need.
> 
> Folks,
> 
> Phil Vachon did most of the JAXA Palsar work but has moved on to
> non-geospatial pursuits, so anyone interested should feel free to
> dig in.
> 
>> Palsar products are in CEOS format so IMHO it would be nice to setup a
>> general mechanism to decode CEOS records (a similar job has been done
>> for ENVISAT records recently)
>>
>> http://trac.osgeo.org/gdal/ticket/4105
>> http://trac.osgeo.org/gdal/attachment/ticket/4105/asar_metadata.patch
>>
>> The hard part (it is a very boring job) IMHO is to fill data structures
>> that properly describe CEOS records for each sensor end product type.
>>
>> Anyway populating record descriptors is a job that can be done gradually
>> and, hopefully, with the help of other users so we could start with the
>> few metadata you are currently interested in and add other record
>> descriptors later.
>>
>> The key is to setup a genereal (enough) framework for CEOS record
>> decoding.
> 
> There is already a generic SAR CEOS driver (gdal/frmts/ceos2) with a CEOS
> record parsing mechanism.  If that is what you want, please start from it.
> For reasons not immediately obvious to me Phil chose to build a specific
> JAXA Palsar driver but please think twice before building it out into a
> full
> generic CEOS driver duplicating what already exists.


Thank you Frank.
My basic idea was to propose an improvement of the ceos2 driver but I
completely missed GetCeosField function. Sorry.
Looking better to the code it seems that all tools for record decoding
are already there, as you pointed out, so it is just a matter of getting
more metadata.

Regarding the JAXAPalsar driver, it is currently registered *after* the
ceos2 driver so, if my understanding is correct, CEOS products should be
opened with ceos2 and the JAXAPalsar should be used as a fallback.

Is it correct?

Any way I'm currently downloading some sample PALSAR product to see what
happens.

Best regards

-- 
Antonio Valentino
From warmerdam at pobox.com  Mon Jun 20 06:27:42 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun 20 17:48:15 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4DFCD978.9070107@tiscali.it>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it> <4DFC9C4A.9080404@pobox.com>
	<4DFCD978.9070107@tiscali.it>
Message-ID: <4DFF209E.5050705@pobox.com>

On 11-06-18 12:59 PM, Antonio Valentino wrote:
> Regarding the JAXAPalsar driver, it is currently registered *after* the
> ceos2 driver so, if my understanding is correct, CEOS products should be
> opened with ceos2 and the JAXAPalsar should be used as a fallback.
>
> Is it correct?

Antonio,

Yes, if it is registered after the SAR_CEOS driver (frmts/ceos2) then it
would only be used for datasets not recgonised by the SAR_CEOS driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pmallas at rsmas.miami.edu  Mon Jun 20 12:28:07 2011
From: pmallas at rsmas.miami.edu (Paul Mallas)
Date: Tue Jun 21 00:08:21 2011
Subject: [gdal-dev] Re: Transposing image data using RasterIO
In-Reply-To: <4DFBCA13.6000203@pobox.com>
References: <4DFBA9CE.3040306@rsmas.miami.edu> <4DFBCA13.6000203@pobox.com>
Message-ID: <itnseo$adv$1@dough.gmane.org>

Yes, I get a segmentation fault with this

On 6/17/2011 5:41 PM, Frank Warmerdam wrote:
> On 11-06-17 03:23 PM, Paul Mallas wrote:
>> Hello,
>>
>> I am trying to transpose image data (i.e., swap lines and columns) and am
>> struggling to make it work properly. I think this should be possible
>> through
>> RasterIO, but so far no luck. Any suggestions?
>>
>> My approach so far has been like this, with image nXsize by nYsize:
>>
>> void *pData = VSIMalloc2(nXSize, (GDALGetDataTypeSize(eType) / 8));
>>
>> for (int iLine = 0; iLine < nYSize; iLine++) {
>>
>> // Read in row (line)
>> eErr = poSrcBand->RasterIO(GF_Read, 0, iLine, nXSize, 1, pData,
>> nXSize, 1, eType, 0,0);
>>
>> // Now I want to write a column, nothing I tried here has worked
>> eErr = poDstBand->RasterIO(GF_Write, .......
>
> Paul,
>
> You should be able to write this column wise like:
>
> poDstBand->RasterIO( GF_Write, iLine, 0, 1, nXSize,
> pData, 1, nXSize, eType, 0, 0 );
>
> Note that this can be pretty inefficient depending on the format and
> how it is blocked.
>
> Best regards,


From bobbynaugs at gmail.com  Mon Jun 20 16:34:00 2011
From: bobbynaugs at gmail.com (Robert Naugle)
Date: Tue Jun 21 04:27:06 2011
Subject: [gdal-dev] ogr2ogr.java s57 conversion
Message-ID: <BANLkTi=8QWTvc873K7toLS_e1Gh1VB_i8w@mail.gmail.com>

If I use the GDAL 1.7.3 version of ogr2ogr from the command line, like:
*    ogr2ogr -skipfailures /path/to/dest /path/to/source*
it works great. I get a directory 'dest' full of shapefiles, one for each
layer in the source S-57 chart file. (in my case, 21 different layers)

I am trying to use ogr2ogr.java to do the same thing, like:
*    String[] args = new String[3];*
*    args[0] = "-skipfailures";*
*    args[2] = "/path/to/dest";*
*    args[3] = "/path/to/source";*
*    ogr2ogr.main(args);*
but I only get three shapefiles in my destination directory, Area, Point,
and Line. Adding a printout to the ogr2ogr.java code reveals that
<datasource>.GetLayerCount() returns 5.

Furthermore, if I try to convert only one layer of the chart on the command
line, as in:
    *ogr2ogr -skipfailures /path/to/dest /path/to/source DEPCNT*
it results in one shapefile in the destination directory. The java version
complains:
    *String[] args = new String[4];*
*    args[0] = "-skipfailures";*
*    args[2] = "/path/to/dest";*
*    args[3] = "/path/to/source";*
*    args[4] = "DEPCNT";*
*    ogr2ogr.main(args);*
*    ...*
*    FAILURE: Couldn't fetch advertised layer DEPCNT!*
*
*
Can anyone shed some light on this behavior? Is my ogr2ogr.java, which was
compiled using GDAL 1.8.0, somehow different? Is this expected behavior?
Should I change my configuration options before building?

Thanks for any and all information...

~Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110620/557cca57/attachment.html
From sylvain.maffren at crige-paca.org  Mon Jun 20 17:49:18 2011
From: sylvain.maffren at crige-paca.org (Sylvain Maffren)
Date: Tue Jun 21 05:56:27 2011
Subject: [gdal-dev] Forcing the rounded of coordinates
Message-ID: <4DFFC05E.3000800@crige-paca.org>

Hi !

I apologize in advance for my english which I not very fluent. I have 
some questions about the tool ogr2ogr (and also about gdalwarp and 
gdal_translate) and the rounding of coordinates.


Let me explain:

Some databases (particularly IGN -- France databases) have coordinates 
rounded to the meter (BD CARTO for example) or the decimeter (BD TOPO 
for example).

I will explain my comment with for bases the coordinates of a point of 
BD CARTO to support my comments :

In an original *.shp in Lambert93 - France, a point has the following 
coordinates (provided by ogrinfo):

X = 993366 m Y = 6304044 m

We import this in PostGIS with shp2pgsql, and the point has always these 
coordinates:

X = 993366 m Y = 6304044 m

It's good !

If we try to export this PostGIS layer through ogr2ogr (in *.shp, *.tab 
or *.mif), a ogrinfo gives us the same point of the layer resulting, 
with the following coordinates:

X = and Y = 993366.00000000058 6304043.9999999898)

This means that ogr2ogr (identical tests performed on a raster layer 
bounding box with reprojection (gdalwarp) or without (gdal_translate)) 
changes the number of decimal coordinates of origin, which can be 
annoying in some cases (when we need to recover a given output with the 
same number of decimal than in entry.

I tried to find a setting to force ogr2ogr (or gdal and related 
functions) to round the coordinates to a given number of decimal (as can 
be done with CS2CS) and I have not found any answer.

Is it possible to set the number of decimal places in output (and 
ideally keep the same as input) ? And if so, how?

Thank you in advance to all who have good ideas and / or directions to 
follow.


Sylvain Maffren

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110620/28ae98b6/attachment.html
From chodgson at refractions.net  Mon Jun 20 18:43:38 2011
From: chodgson at refractions.net (Chris Hodgson)
Date: Tue Jun 21 07:09:24 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
Message-ID: <4DFFCD1A.5050503@refractions.net>

I'm trying to compile GDAL/OGR with support for Oracle/OCI. I have the 
full oracle 11g server installed on CentOS 5.3.

# configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/
# make
...
libtool:.....
g++: /ade/smayer_perl_510/perl_source/expat_home/lib/libexpat.so: No 
such file or directory

I think this path might be from the person who compiled the OCI 
libraries for oracle 11? I have nothing remotely like it on my system. 
If I add --with-expat=no to my configure line I get errors during 
linking about undefined references to XML_... so I'm guessing the linked 
OCI drivers need the expat lib linked in.

I added /opt/oracle/product/11.2.0/dbhome_1/lib to my LD_LIBRARY_PATH, 
and there is a libexpat.so.1.5.2 there, as well as my 
/lib/libexpat.so.0.5.0 which is from my CentOS standarad RPMS:

# rpm -qa | grep expat
expat-1.95.8-8.2.1
expat-devel-1.95.8-8.2.1

I also tried --with-expat=/opt/oracle/product/11.2.0/dbhome_1/ but there 
are no headers there, among other problems.

How can I get this to work?

Thanks,
Chris
From chodgson at refractions.net  Mon Jun 20 19:49:07 2011
From: chodgson at refractions.net (Chris Hodgson)
Date: Tue Jun 21 07:52:35 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <20110620233418.9545.qmail@s466.sureserver.com>
References: <4DFFCD1A.5050503@refractions.net>
	<20110620233418.9545.qmail@s466.sureserver.com>
Message-ID: <4DFFDC73.8020309@refractions.net>

grep tells me that the /ade/smayer.../ path is not in any text file in 
my gdal distribution (even after configuring) - which I grabbed the 
latest 1.8.0 from osgeo.org.

Chris

Ivan Lucena wrote:
> Chris,
>
> I am not on my Linux machine now to confirm but I would never needed to use --with-expat pointing to Oracle's path. It is fanny that you found that smaver path. Sounds like you got a tar.gz package from someone, not from a GDAL distribution.
>
> The OCI driver should not depend in nothing but OCI apart from GDAL/OGR stuff.
>
> Regards,
>
> Ivan
>
>
>   
>>  -------Original Message-------
>>  From: Chris Hodgson <chodgson@refractions.net>
>>  To: gdal-dev@lists.osgeo.org
>>  Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
>>  Sent: Jun 20 '11 17:43
>>  
>>  I'm trying to compile GDAL/OGR with support for Oracle/OCI. I have the
>>  full oracle 11g server installed on CentOS 5.3.
>>  
>>  # configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/
>>  # make
>>  ...
>>  libtool:.....
>>  g++: /ade/smayer_perl_510/perl_source/expat_home/lib/libexpat.so: No
>>  such file or directory
>>  
>>  I think this path might be from the person who compiled the OCI
>>  libraries for oracle 11? I have nothing remotely like it on my system.
>>  If I add --with-expat=no to my configure line I get errors during
>>  linking about undefined references to XML_... so I'm guessing the linked
>>  OCI drivers need the expat lib linked in.
>>  
>>  I added /opt/oracle/product/11.2.0/dbhome_1/lib to my LD_LIBRARY_PATH,
>>  and there is a libexpat.so.1.5.2 there, as well as my
>>  /lib/libexpat.so.0.5.0 which is from my CentOS standarad RPMS:
>>  
>>  # rpm -qa | grep expat
>>  expat-1.95.8-8.2.1
>>  expat-devel-1.95.8-8.2.1
>>  
>>  I also tried --with-expat=/opt/oracle/product/11.2.0/dbhome_1/ but there
>>  are no headers there, among other problems.
>>  
>>  How can I get this to work?
>>  
>>  Thanks,
>>  Chris
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  
>>     

From nhatzop at gmail.com  Mon Jun 20 20:35:27 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Jun 21 08:41:57 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <4DFFDC73.8020309@refractions.net>
References: <4DFFCD1A.5050503@refractions.net>
	<20110620233418.9545.qmail@s466.sureserver.com>
	<4DFFDC73.8020309@refractions.net>
Message-ID: <BANLkTiknwfozR1BQ95pXd=yq7f70boK-xw@mail.gmail.com>

check the configure file it might need changes (vi configure)

you can add the elgis repo add the devel package and start getting involved
with
the compile.

this is a src rpm:

http://elgis.argeo.org/repos/testing/5/elgis/SRPMS/gdal-1.8.0-2.el5.elgis.src.rpm

if you are familiar with spec files I strongly suggest you to do it that way
:)

--Nikos Hatzopoulos

On Mon, Jun 20, 2011 at 4:49 PM, Chris Hodgson <chodgson@refractions.net>wrote:

> grep tells me that the /ade/smayer.../ path is not in any text file in my
> gdal distribution (even after configuring) - which I grabbed the latest
> 1.8.0 from osgeo.org.
>
> Chris
>
> Ivan Lucena wrote:
>
>> Chris,
>>
>> I am not on my Linux machine now to confirm but I would never needed to
>> use --with-expat pointing to Oracle's path. It is fanny that you found that
>> smaver path. Sounds like you got a tar.gz package from someone, not from a
>> GDAL distribution.
>>
>> The OCI driver should not depend in nothing but OCI apart from GDAL/OGR
>> stuff.
>>
>> Regards,
>>
>> Ivan
>>
>>
>>
>>
>>
>>>  -------Original Message-------
>>>  From: Chris Hodgson <chodgson@refractions.net>
>>>  To: gdal-dev@lists.osgeo.org
>>>  Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
>>>  Sent: Jun 20 '11 17:43
>>>  I'm trying to compile GDAL/OGR with support for Oracle/OCI. I have the
>>>  full oracle 11g server installed on CentOS 5.3.
>>>  # configure --with-oci=/opt/oracle/**product/11.2.0/dbhome_1/
>>>  # make
>>>  ...
>>>  libtool:.....
>>>  g++: /ade/smayer_perl_510/perl_**source/expat_home/lib/**libexpat.so:
>>> No
>>>  such file or directory
>>>  I think this path might be from the person who compiled the OCI
>>>  libraries for oracle 11? I have nothing remotely like it on my system.
>>>  If I add --with-expat=no to my configure line I get errors during
>>>  linking about undefined references to XML_... so I'm guessing the linked
>>>  OCI drivers need the expat lib linked in.
>>>  I added /opt/oracle/product/11.2.0/**dbhome_1/lib to my
>>> LD_LIBRARY_PATH,
>>>  and there is a libexpat.so.1.5.2 there, as well as my
>>>  /lib/libexpat.so.0.5.0 which is from my CentOS standarad RPMS:
>>>  # rpm -qa | grep expat
>>>  expat-1.95.8-8.2.1
>>>  expat-devel-1.95.8-8.2.1
>>>  I also tried --with-expat=/opt/oracle/**product/11.2.0/dbhome_1/ but
>>> there
>>>  are no headers there, among other problems.
>>>  How can I get this to work?
>>>  Thanks,
>>>  Chris
>>>  ______________________________**_________________
>>>  gdal-dev mailing list
>>>  gdal-dev@lists.osgeo.org
>>>  http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>
>>>
>>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110620/75297528/attachment-0001.html
From conan_tang at hotmail.com  Tue Jun 21 01:46:35 2011
From: conan_tang at hotmail.com (Nuo Tang)
Date: Tue Jun 21 14:10:46 2011
Subject: [gdal-dev] Is it possible for gdal_translate to perserve the
 external georeferencing information?
In-Reply-To: <BANLkTi=yoatqhHtTCma5XF3uuMroA=6UNw@mail.gmail.com>
References: <BANLkTi=yoatqhHtTCma5XF3uuMroA=6UNw@mail.gmail.com>
Message-ID: <BANLkTikGR8RcZZ8qqcQzAhxTmOBij7Ogyg@mail.gmail.com>

Hi All,

I am new here. Recently I was trying to compress all the tif (some of them
have been georeferenced in Arcgis) to jp2. This is the first time that I
touch the jp2- amazing! It has the similar quality but smaller size ( 1G
tiff= 45M jp2). However, there are some tif images which i have
georeferenced before (but not rectified). I used the gdalinfo command but-
it seems that gdalinfo (see below) cannot retrieve the external
georeferencing information (.aux.xml files). So, when I gdal_translate these
images to jp2- they do not have any valid georeferecing information either.
Any help will be appreciated.

*C:\bin\release-1600-gdal-1-8-0-mapserver-5-6-6>gdalinfo
w:\3512\3512_2a_181.tif
Driver: GTiff/GeoTIFF
Files: w:\3512\3512_2a_181.tif
       w:\3512\3512_2a_181.aux
       w:\3512\3512_2A_181.rrd
       w:\3512\3512_2a_181.tif.aux.xml
Size is 18808, 18808
Coordinate System is `'
Metadata:
  TIFFTAG_XRESOLUTION=798.91986
  TIFFTAG_YRESOLUTION=798.79858
  TIFFTAG_MINSAMPLEVALUE=0
  TIFFTAG_MAXSAMPLEVALUE=255
  TIFFTAG_RESOLUTIONUNIT=3 (pixels/cm)
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,18808.0)
Upper Right (18808.0,    0.0)
Lower Right (18808.0,18808.0)
Center      ( 9404.0, 9404.0)
Band 1 Block=18808x1 Type=Byte, ColorInterp=Red
  Overviews: 4702x4702, 2351x2351, 1176x1176, 588x588, 294x294, 147x147,
74x74,
37x37
Band 2 Block=18808x1 Type=Byte, ColorInterp=Green
  Overviews: 4702x4702, 2351x2351, 1176x1176, 588x588, 294x294, 147x147,
74x74,
37x37
Band 3 Block=18808x1 Type=Byte, ColorInterp=Blue
  Overviews: 4702x4702, 2351x2351, 1176x1176, 588x588, 294x294, 147x147,
74x74,
37x37*

The georeferencing infomation is valid in Arcgis (although I did not rectify
it or make it as GeoTiff.)
[image: 1zq795y.jpg]
Cheers,
Nuo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110621/aefa6fe2/attachment.html
From goocreations at gmail.com  Tue Jun 21 07:05:14 2011
From: goocreations at gmail.com (Goo Creations)
Date: Tue Jun 21 19:46:31 2011
Subject: [gdal-dev] Remove projection info
Message-ID: <BANLkTimRGKcDdA2WdQ=VUb_WT0PqYgUuNw@mail.gmail.com>

Hi all,

I'm looking for a way to remove any projection and CRS information from an
image. I've tried:

gdal_translate -a_srs "" in.tif out.tif

but without any success. Does anyone know how to do this (or by using
CreateCopy() via source code)?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110621/df89d62e/attachment.html
From chaitanya.ch at gmail.com  Tue Jun 21 07:20:30 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jun 21 20:02:44 2011
Subject: [gdal-dev] Remove projection info
In-Reply-To: <BANLkTimRGKcDdA2WdQ=VUb_WT0PqYgUuNw@mail.gmail.com>
References: <BANLkTimRGKcDdA2WdQ=VUb_WT0PqYgUuNw@mail.gmail.com>
Message-ID: <BANLkTikwtWC8yW+MBspVgWYRnYm_z25BUA@mail.gmail.com>

Hi,

Convert the file into a PNG image. Delete the .aux.xml file.
You can convert the PNG into TIFF if you want.

On Tue, Jun 21, 2011 at 4:35 PM, Goo Creations <goocreations@gmail.com>wrote:

> Hi all,
>
> I'm looking for a way to remove any projection and CRS information from an
> image. I've tried:
>
> gdal_translate -a_srs "" in.tif out.tif
>
> but without any success. Does anyone know how to do this (or by using
> CreateCopy() via source code)?
>
> Thanks
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110621/f01c4c57/attachment.html
From warmerdam at pobox.com  Tue Jun 21 07:29:18 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 21 20:12:02 2011
Subject: [gdal-dev] Remove projection info
In-Reply-To: <BANLkTimRGKcDdA2WdQ=VUb_WT0PqYgUuNw@mail.gmail.com>
References: <BANLkTimRGKcDdA2WdQ=VUb_WT0PqYgUuNw@mail.gmail.com>
Message-ID: <4E00808E.3090901@pobox.com>

On 11-06-21 07:05 AM, Goo Creations wrote:
> Hi all,
>
> I'm looking for a way to remove any projection and CRS information from an
> image. I've tried:
>
> gdal_translate -a_srs "" in.tif out.tif
>
> but without any success. Does anyone know how to do this (or by using
> CreateCopy() via source code)?

Goo,

Using -co PROFILE=BASELINE will produce a TIFF file with no internal
georeferencing tags of any kind.  There might still be a .aux.xml you
could remove.

Unfortunately I don't think the -a_srs (and the SetFromUserInput() method
that underlies it) has a way of setting an empty coordinate system.  Perhaps
that should be enabled.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From goocreations at gmail.com  Tue Jun 21 07:35:48 2011
From: goocreations at gmail.com (Goo Creations)
Date: Tue Jun 21 20:18:46 2011
Subject: [gdal-dev] Remove projection info
In-Reply-To: <4E00808E.3090901@pobox.com>
References: <BANLkTimRGKcDdA2WdQ=VUb_WT0PqYgUuNw@mail.gmail.com>
	<4E00808E.3090901@pobox.com>
Message-ID: <BANLkTi=+PJx77trwZR1-uWm8wDaOy-aSdA@mail.gmail.com>

Thanks Frank, that worked!

On Tue, Jun 21, 2011 at 1:29 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> On 11-06-21 07:05 AM, Goo Creations wrote:
>
>> Hi all,
>>
>> I'm looking for a way to remove any projection and CRS information from an
>> image. I've tried:
>>
>> gdal_translate -a_srs "" in.tif out.tif
>>
>> but without any success. Does anyone know how to do this (or by using
>> CreateCopy() via source code)?
>>
>
> Goo,
>
> Using -co PROFILE=BASELINE will produce a TIFF file with no internal
> georeferencing tags of any kind.  There might still be a .aux.xml you
> could remove.
>
> Unfortunately I don't think the -a_srs (and the SetFromUserInput() method
> that underlies it) has a way of setting an empty coordinate system.
>  Perhaps
> that should be enabled.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110621/57c38c8f/attachment.html
From warmerdam at pobox.com  Tue Jun 21 12:52:46 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jun 22 01:52:52 2011
Subject: [gdal-dev] Is it possible for gdal_translate to perserve the
	external georeferencing information?
In-Reply-To: <BANLkTikGR8RcZZ8qqcQzAhxTmOBij7Ogyg@mail.gmail.com>
References: <BANLkTi=yoatqhHtTCma5XF3uuMroA=6UNw@mail.gmail.com>
	<BANLkTikGR8RcZZ8qqcQzAhxTmOBij7Ogyg@mail.gmail.com>
Message-ID: <4E00CC5E.7030901@pobox.com>

On 11-06-21 01:46 AM, Nuo Tang wrote:
> Hi All,
>
> I am new here. Recently I was trying to compress all the tif (some of them have
> been georeferenced in Arcgis) to jp2. This is the first time that I touch the
> jp2- amazing! It has the similar quality but smaller size ( 1G tiff= 45M jp2).
> However, there are some tif images which i have georeferenced before (but not
> rectified). I used the gdalinfo command but- it seems that gdalinfo (see below)
> cannot retrieve the external georeferencing information (.aux.xml files). So,
> when I gdal_translate these images to jp2- they do not have any valid
> georeferecing information either. Any help will be appreciated.
>
> /C:\bin\release-1600-gdal-1-8-0-mapserver-5-6-6>gdalinfo w:\3512\3512_2a_181.tif
> Driver: GTiff/GeoTIFF
> Files: w:\3512\3512_2a_181.tif
>         w:\3512\3512_2a_181.aux
>         w:\3512\3512_2A_181.rrd
>         w:\3512\3512_2a_181.tif.aux.xml
> Size is 18808, 18808
> Coordinate System is `'

Nuo,

It is not at all clear to me why gdalinfo would not be using the
georeferencing from the .aux.xml file - it does seem to be scanning it.
Perhaps you could provide the .aux.xml file?

There are some drivers for which built-in georeferencing will mask the
.aux.xml contents and this might be or have been one.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From oliver.wesp at gmail.com  Tue Jun 21 13:08:11 2011
From: oliver.wesp at gmail.com (Oliver Wesp)
Date: Wed Jun 22 02:09:14 2011
Subject: [gdal-dev] ogr2ogr.java s57 conversion
In-Reply-To: <BANLkTi=8QWTvc873K7toLS_e1Gh1VB_i8w@mail.gmail.com>
References: <BANLkTi=8QWTvc873K7toLS_e1Gh1VB_i8w@mail.gmail.com>
Message-ID: <BANLkTi=aZg-7OFJ4_52qdu2ng177EeJDAA@mail.gmail.com>

Hello Robert,

Try setting the GDAL_DATA and OGR_S57_OPTIONS environment variables
within your java environment.

http://www.gdal.org/ogr/drv_s57.html

Best regards,
Oliver

2011/6/20 Robert Naugle <bobbynaugs@gmail.com>:
> If I use the GDAL 1.7.3 version of ogr2ogr from the command line, like:
> ? ? ogr2ogr -skipfailures /path/to/dest /path/to/source
> it works great. I get a directory 'dest' full of shapefiles, one for each
> layer in the source S-57 chart file. (in my case, 21 different layers)
> I am trying to use ogr2ogr.java to do the same thing, like:
> ? ? String[] args = new String[3];
> ? ? args[0] = "-skipfailures";
> ? ? args[2] = "/path/to/dest";
> ? ? args[3] = "/path/to/source";
> ? ? ogr2ogr.main(args);
> but I only get three shapefiles in my destination directory, Area, Point,
> and Line. Adding a printout to the ogr2ogr.java code reveals that
> <datasource>.GetLayerCount() returns 5.
> Furthermore, if I try to convert only one layer of the chart on the command
> line, as in:
> ? ??ogr2ogr -skipfailures /path/to/dest /path/to/source DEPCNT
> it results in one shapefile in the destination directory. The java version
> complains:
> ? ??String[] args = new String[4];
> ? ? args[0] = "-skipfailures";
> ? ? args[2] = "/path/to/dest";
> ? ? args[3] = "/path/to/source";
> ? ? args[4] = "DEPCNT";
> ? ? ogr2ogr.main(args);
> ? ? ...
> ? ??FAILURE: Couldn't fetch advertised layer DEPCNT!
> Can anyone shed some light on this behavior? Is my ogr2ogr.java, which was
> compiled using GDAL 1.8.0, somehow different? Is this expected behavior?
> Should I change my configuration options before building?
> Thanks for any and all information...
> ~Bob
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From chodgson at refractions.net  Tue Jun 21 13:38:48 2011
From: chodgson at refractions.net (Chris Hodgson)
Date: Wed Jun 22 02:40:37 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <BANLkTiknwfozR1BQ95pXd=yq7f70boK-xw@mail.gmail.com>
References: <4DFFCD1A.5050503@refractions.net>	<20110620233418.9545.qmail@s466.sureserver.com>	<4DFFDC73.8020309@refractions.net>
	<BANLkTiknwfozR1BQ95pXd=yq7f70boK-xw@mail.gmail.com>
Message-ID: <4E00D728.3050601@refractions.net>

What would need changed in the configure file? There is no reference 
there to the non-existent libexpat.

I'm not familiar with spec files... but if I wanted to learn - what 
could I do there that I couldn't do in the configure/make process? The 
spec file still uses the package's build system right?

It's not until the final linking with libtool that the problem happens, 
I just don't know what I need to tell libtool to get it to smarten up...

Surely other people have compiled with support for oracle 11g? CentOS is 
just repackaged RHEL.... I don't know what I'm doing that is out of the 
ordinary here.

Chris

Nikolaos Hatzopoulos wrote:
> check the configure file it might need changes (vi configure)
>
> you can add the elgis repo add the devel package and start getting 
> involved with
> the compile.
>
> this is a src rpm:
>
> http://elgis.argeo.org/repos/testing/5/elgis/SRPMS/gdal-1.8.0-2.el5.elgis.src.rpm
>
> if you are familiar with spec files I strongly suggest you to do it 
> that way :)
>
> --Nikos Hatzopoulos
>
> On Mon, Jun 20, 2011 at 4:49 PM, Chris Hodgson 
> <chodgson@refractions.net <mailto:chodgson@refractions.net>> wrote:
>
>     grep tells me that the /ade/smayer.../ path is not in any text
>     file in my gdal distribution (even after configuring) - which I
>     grabbed the latest 1.8.0 from osgeo.org <http://osgeo.org>.
>
>     Chris
>
>     Ivan Lucena wrote:
>
>         Chris,
>
>         I am not on my Linux machine now to confirm but I would never
>         needed to use --with-expat pointing to Oracle's path. It is
>         fanny that you found that smaver path. Sounds like you got a
>         tar.gz package from someone, not from a GDAL distribution.
>
>         The OCI driver should not depend in nothing but OCI apart from
>         GDAL/OGR stuff.
>
>         Regards,
>
>         Ivan
>
>
>
>          
>
>              -------Original Message-------
>              From: Chris Hodgson <chodgson@refractions.net
>             <mailto:chodgson@refractions.net>>
>              To: gdal-dev@lists.osgeo.org
>             <mailto:gdal-dev@lists.osgeo.org>
>              Subject: [gdal-dev] Problem Compiling with Oracle
>             (--with-oci)
>              Sent: Jun 20 '11 17:43
>              I'm trying to compile GDAL/OGR with support for
>             Oracle/OCI. I have the
>              full oracle 11g server installed on CentOS 5.3.
>              # configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/
>              # make
>              ...
>              libtool:.....
>              g++:
>             /ade/smayer_perl_510/perl_source/expat_home/lib/libexpat.so:
>             No
>              such file or directory
>              I think this path might be from the person who compiled
>             the OCI
>              libraries for oracle 11? I have nothing remotely like it
>             on my system.
>              If I add --with-expat=no to my configure line I get
>             errors during
>              linking about undefined references to XML_... so I'm
>             guessing the linked
>              OCI drivers need the expat lib linked in.
>              I added /opt/oracle/product/11.2.0/dbhome_1/lib to my
>             LD_LIBRARY_PATH,
>              and there is a libexpat.so.1.5.2 there, as well as my
>              /lib/libexpat.so.0.5.0 which is from my CentOS standarad
>             RPMS:
>              # rpm -qa | grep expat
>              expat-1.95.8-8.2.1
>              expat-devel-1.95.8-8.2.1
>              I also tried
>             --with-expat=/opt/oracle/product/11.2.0/dbhome_1/ but there
>              are no headers there, among other problems.
>              How can I get this to work?
>              Thanks,
>              Chris
>              _______________________________________________
>              gdal-dev mailing list
>              gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>              http://lists.osgeo.org/mailman/listinfo/gdal-dev
>                
>
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From hobu.inc at gmail.com  Tue Jun 21 14:09:48 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Jun 22 03:14:05 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <4DFFCD1A.5050503@refractions.net>
References: <4DFFCD1A.5050503@refractions.net>
Message-ID: <0FC5D96E-4571-457D-92E3-B7484398D237@gmail.com>


On Jun 20, 2011, at 5:43 PM, Chris Hodgson wrote:

> I'm trying to compile GDAL/OGR with support for Oracle/OCI. I have the full oracle 11g server installed on CentOS 5.3.
> 
> # configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/
> # make
> ...
> libtool:.....
> g++: /ade/smayer_perl_510/perl_source/expat_home/lib/libexpat.so: No such file or directory
> 
> I think this path might be from the person who compiled the OCI libraries for oracle 11?

Yes, this is due to Oracle's inclusion of an ancient expat in their SDK. There's no headers there either, but it's too old to work with GDAL even if there was.  

> How can I get this to work?

not sure, I think I just fumbled through.
From alexmantaut at suremptec.com.ar  Tue Jun 21 14:22:25 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Wed Jun 22 03:27:13 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <4DFC45F2.80302@tiscali.it>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com> <4DF938BB.5050102@tiscali.it>
	<BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>
	<20110616154920.2c8e7f8b@asigrid01>
	<BANLkTikQ4qP04jSsqUQHeqyqH7wBh+7gZA@mail.gmail.com>
	<20110616171609.0cfaea90@asigrid01>
	<BANLkTi=tE+xn1qt6-qHOnN7vToAtDZbrVg@mail.gmail.com>
	<4DFC45F2.80302@tiscali.it>
Message-ID: <BANLkTim3eEHzaFZik4SOc7NXtLTFHKm2Jg@mail.gmail.com>

Hi all, I updated the ticket with what was discussed with Antonio...

http://trac.osgeo.org/gdal/ticket/4121#comment:3

The defect is still there....

Regards
Alex

PS:Sorry for the delay but the weekend was a national holyday...

2011/6/18 Antonio Valentino <antonio.valentino@tiscali.it>

> Hi Alex,
>
> Il 16/06/2011 17:27, Alex Mantaut ha scritto:
> > Then, to keep consistency, the fact that hdf5imagedataset isn't
> consistent
> > with the hdf5dataset is a defect, right?
> > May I summarize the conclusions and update the ticket?
>
> OK
>
> --
>  Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110621/59dbad5c/attachment.html
From ivan.lucena at pmldnet.com  Tue Jun 21 14:30:05 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Jun 22 03:42:18 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUHJvYmxlbSBDb21waWxpbmcgd2l0aCBPcmFjbGUgKC0td2l0aC1vY2kp?=
In-Reply-To: <4E00D728.3050601@refractions.net>
References: <4DFFCD1A.5050503@refractions.net>
	<20110620233418.9545.qmail@s466.sureserver.com>
	<4DFFDC73.8020309@refractions.net>
	<BANLkTiknwfozR1BQ95pXd=yq7f70boK-xw@mail.gmail.com>
	<4E00D728.3050601@refractions.net>
Message-ID: <20110621183005.19553.qmail@s466.sureserver.com>

Hi Chris,

I would not advise changing the configuration file.

If you have a full installation of Oracle in your system you probably have a ORACLE_HOME environment variable, so if you run:

$ ./configure
...
checking for Oracle OCI headers in /oracle/path/... yes
checking for Oracle OCI libraries in /oracle/path/lib... yes
checking if Oracle OCI version is >= 8.1.7 ... yes
checking for Oracle version >= 10.x to use -lnnz10 flag... yes
checking if Oracle support is enabled... yes
...
  OCI support:               yes
  GEORASTER support:         yes
...

If you don't have ORACLE_HOME you can pass the path using

$ ./configure --with-oci=/oracle/path/...

Now, you system is CentOS and I have never build GDAL on it but I would guess that it doesn't have Expat installed yet. My Linux does, so configure finds it:

checking for XML_ParserCreate in -lexpat... yes
checking for Expat XML Parser headers in /usr/include... found
checking for Expat XML Parser... yes

My suggestion is to isolate the problem by running ./configure, make and gdalinfo without Expat once and then make clean, ./configure, make and gdalinfo without OCI, ex:

% ./configure --with-expat=NO 
% ./configure --with-OCI=NO

Configure will setup your makefiles, then you run make based on those new settings. 

Good luck.

Ivan


>  -------Original Message-------
>  From: Chris Hodgson <chodgson@refractions.net>
>  To: gdal-dev@lists.osgeo.org
>  Subject: Re: [gdal-dev] Problem Compiling with Oracle (--with-oci)
>  Sent: Jun 21 '11 12:38
>  
>  What would need changed in the configure file? There is no reference
>  there to the non-existent libexpat.
>  
>  I'm not familiar with spec files... but if I wanted to learn - what
>  could I do there that I couldn't do in the configure/make process? The
>  spec file still uses the package's build system right?
>  
>  It's not until the final linking with libtool that the problem happens,
>  I just don't know what I need to tell libtool to get it to smarten up...
>  
>  Surely other people have compiled with support for oracle 11g? CentOS is
>  just repackaged RHEL.... I don't know what I'm doing that is out of the
>  ordinary here.
>  
>  Chris
>  
>  Nikolaos Hatzopoulos wrote:
>  > check the configure file it might need changes (vi configure)
>  >
>  > you can add the elgis repo add the devel package and start getting
>  > involved with
>  > the compile.
>  >
>  > this is a src rpm:
>  >
>  > http://elgis.argeo.org/repos/testing/5/elgis/SRPMS/gdal-1.8.0-2.el5.elgis.src.rpm
>  >
>  > if you are familiar with spec files I strongly suggest you to do it
>  > that way :)
>  >
>  > --Nikos Hatzopoulos
>  >
>  > On Mon, Jun 20, 2011 at 4:49 PM, Chris Hodgson
>  > <chodgson@refractions.net <mailto:chodgson@refractions.net>> wrote:
>  >
>  >???? grep tells me that the /ade/smayer.../ path is not in any text
>  >???? file in my gdal distribution (even after configuring) - which I
>  >???? grabbed the latest 1.8.0 from osgeo.org <http://osgeo.org>.
>  >
>  >???? Chris
>  >
>  >???? Ivan Lucena wrote:
>  >
>  >???????? Chris,
>  >
>  >???????? I am not on my Linux machine now to confirm but I would never
>  >???????? needed to use --with-expat pointing to Oracle's path. It is
>  >???????? fanny that you found that smaver path. Sounds like you got a
>  >???????? tar.gz package from someone, not from a GDAL distribution.
>  >
>  >???????? The OCI driver should not depend in nothing but OCI apart from
>  >???????? GDAL/OGR stuff.
>  >
>  >???????? Regards,
>  >
>  >???????? Ivan
>  >
>  >
>  >
>  >??????????
>  >
>  >??????????????-------Original Message-------
>  >??????????????From: Chris Hodgson <chodgson@refractions.net
>  >???????????? <mailto:chodgson@refractions.net>>
>  >??????????????To: gdal-dev@lists.osgeo.org
>  >???????????? <mailto:gdal-dev@lists.osgeo.org>
>  >??????????????Subject: [gdal-dev] Problem Compiling with Oracle
>  >???????????? (--with-oci)
>  >??????????????Sent: Jun 20 '11 17:43
>  >??????????????I'm trying to compile GDAL/OGR with support for
>  >???????????? Oracle/OCI. I have the
>  >??????????????full oracle 11g server installed on CentOS 5.3.
>  >??????????????# configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/
>  >??????????????# make
>  >??????????????...
>  >??????????????libtool:.....
>  >??????????????g++:
>  >???????????? /ade/smayer_perl_510/perl_source/expat_home/lib/libexpat.so:
>  >???????????? No
>  >??????????????such file or directory
>  >??????????????I think this path might be from the person who compiled
>  >???????????? the OCI
>  >??????????????libraries for oracle 11? I have nothing remotely like it
>  >???????????? on my system.
>  >??????????????If I add --with-expat=no to my configure line I get
>  >???????????? errors during
>  >??????????????linking about undefined references to XML_... so I'm
>  >???????????? guessing the linked
>  >??????????????OCI drivers need the expat lib linked in.
>  >??????????????I added /opt/oracle/product/11.2.0/dbhome_1/lib to my
>  >???????????? LD_LIBRARY_PATH,
>  >??????????????and there is a libexpat.so.1.5.2 there, as well as my
>  >??????????????/lib/libexpat.so.0.5.0 which is from my CentOS standarad
>  >???????????? RPMS:
>  >??????????????# rpm -qa | grep expat
>  >??????????????expat-1.95.8-8.2.1
>  >??????????????expat-devel-1.95.8-8.2.1
>  >??????????????I also tried
>  >???????????? --with-expat=/opt/oracle/product/11.2.0/dbhome_1/ but there
>  >??????????????are no headers there, among other problems.
>  >??????????????How can I get this to work?
>  >??????????????Thanks,
>  >??????????????Chris
>  >??????????????_______________________________________________
>  >??????????????gdal-dev mailing list
>  >??????????????gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>  >??????????????http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >????????????????
>  >
>  >
>  >???? _______________________________________________
>  >???? gdal-dev mailing list
>  >???? gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>  >???? http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >
>  >
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From chodgson at refractions.net  Tue Jun 21 15:02:03 2011
From: chodgson at refractions.net (Chris Hodgson)
Date: Wed Jun 22 04:08:14 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <20110621183005.19553.qmail@s466.sureserver.com>
References: <4DFFCD1A.5050503@refractions.net>
	<20110620233418.9545.qmail@s466.sureserver.com>
	<4DFFDC73.8020309@refractions.net>
	<BANLkTiknwfozR1BQ95pXd=yq7f70boK-xw@mail.gmail.com>
	<4E00D728.3050601@refractions.net>
	<20110621183005.19553.qmail@s466.sureserver.com>
Message-ID: <4E00EAAB.3030804@refractions.net>

Ivan I appreciate your help here, but I think I've already tried 
everything you are suggesting. I dont' have an ORACLE_HOME set on the 
user doing this compiling, so if I don't specify --with-oci=... I don't 
get oracle support. I do have expat 1.95 installed (with -devel package 
as well) and it is automatically picked up by configure.

I can build gdal successfully with no configure options, it builds with 
expat support among other defaults.

If I specify --with-oci, I get the error about the funny libexpat path, 
if I add --with-expat=no, I get past that error, but get an error later 
when it can't find the XML_* symbols that the oracle library needs to be 
linked to. In neither of these cases to i get a working version of 
gdalinfo built.

It seems to me that I need to link in expat for the oracle library, but 
I'm not sure if it is compatible with the 1.95 version the my system has 
installed and that GDAL requires if I specify --with-expat  ... because 
there is an libexpat.so.0.5 in the oracle lib directory. Since I don't 
actually need GDAL's expat support, I'm fine with --with-expat=no ... 
but then I need to somehow tell libtool to ignore the funny expat path 
it is finding and use the expat in the oracle directory... perhaps the 
best way to do this is just to copy the libtool command that is failing 
in the build and tweak it manually to have the right path to the oracle 
expat instead of the funny path... however I won't be able to get to the 
next step of the build to see what other commands I need to run... is 
there a way to modify the makefile or tell configure about this?

Thanks,
Chris

Ivan Lucena wrote:
> Hi Chris,
>
> I would not advise changing the configuration file.
>
> If you have a full installation of Oracle in your system you probably have a ORACLE_HOME environment variable, so if you run:
>
> $ ./configure
> ...
> checking for Oracle OCI headers in /oracle/path/... yes
> checking for Oracle OCI libraries in /oracle/path/lib... yes
> checking if Oracle OCI version is >= 8.1.7 ... yes
> checking for Oracle version >= 10.x to use -lnnz10 flag... yes
> checking if Oracle support is enabled... yes
> ...
>   OCI support:               yes
>   GEORASTER support:         yes
> ...
>
> If you don't have ORACLE_HOME you can pass the path using
>
> $ ./configure --with-oci=/oracle/path/...
>
> Now, you system is CentOS and I have never build GDAL on it but I would guess that it doesn't have Expat installed yet. My Linux does, so configure finds it:
>
> checking for XML_ParserCreate in -lexpat... yes
> checking for Expat XML Parser headers in /usr/include... found
> checking for Expat XML Parser... yes
>
> My suggestion is to isolate the problem by running ./configure, make and gdalinfo without Expat once and then make clean, ./configure, make and gdalinfo without OCI, ex:
>
> % ./configure --with-expat=NO 
> % ./configure --with-OCI=NO
>
> Configure will setup your makefiles, then you run make based on those new settings. 
>
> Good luck.
>
> Ivan
>
>
>   
>>  -------Original Message-------
>>  From: Chris Hodgson <chodgson@refractions.net>
>>  To: gdal-dev@lists.osgeo.org
>>  Subject: Re: [gdal-dev] Problem Compiling with Oracle (--with-oci)
>>  Sent: Jun 21 '11 12:38
>>  
>>  What would need changed in the configure file? There is no reference
>>  there to the non-existent libexpat.
>>  
>>  I'm not familiar with spec files... but if I wanted to learn - what
>>  could I do there that I couldn't do in the configure/make process? The
>>  spec file still uses the package's build system right?
>>  
>>  It's not until the final linking with libtool that the problem happens,
>>  I just don't know what I need to tell libtool to get it to smarten up...
>>  
>>  Surely other people have compiled with support for oracle 11g? CentOS is
>>  just repackaged RHEL.... I don't know what I'm doing that is out of the
>>  ordinary here.
>>  
>>  Chris
>>  
>>  Nikolaos Hatzopoulos wrote:
>>  > check the configure file it might need changes (vi configure)
>>  >
>>  > you can add the elgis repo add the devel package and start getting
>>  > involved with
>>  > the compile.
>>  >
>>  > this is a src rpm:
>>  >
>>  > http://elgis.argeo.org/repos/testing/5/elgis/SRPMS/gdal-1.8.0-2.el5.elgis.src.rpm
>>  >
>>  > if you are familiar with spec files I strongly suggest you to do it
>>  > that way :)
>>  >
>>  > --Nikos Hatzopoulos
>>  >
>>  > On Mon, Jun 20, 2011 at 4:49 PM, Chris Hodgson
>>  > <chodgson@refractions.net <mailto:chodgson@refractions.net>> wrote:
>>  >
>>  >     grep tells me that the /ade/smayer.../ path is not in any text
>>  >     file in my gdal distribution (even after configuring) - which I
>>  >     grabbed the latest 1.8.0 from osgeo.org <http://osgeo.org>.
>>  >
>>  >     Chris
>>  >
>>  >     Ivan Lucena wrote:
>>  >
>>  >         Chris,
>>  >
>>  >         I am not on my Linux machine now to confirm but I would never
>>  >         needed to use --with-expat pointing to Oracle's path. It is
>>  >         fanny that you found that smaver path. Sounds like you got a
>>  >         tar.gz package from someone, not from a GDAL distribution.
>>  >
>>  >         The OCI driver should not depend in nothing but OCI apart from
>>  >         GDAL/OGR stuff.
>>  >
>>  >         Regards,
>>  >
>>  >         Ivan
>>  >
>>  >
>>  >
>>  >          
>>  >
>>  >              -------Original Message-------
>>  >              From: Chris Hodgson <chodgson@refractions.net
>>  >             <mailto:chodgson@refractions.net>>
>>  >              To: gdal-dev@lists.osgeo.org
>>  >             <mailto:gdal-dev@lists.osgeo.org>
>>  >              Subject: [gdal-dev] Problem Compiling with Oracle
>>  >             (--with-oci)
>>  >              Sent: Jun 20 '11 17:43
>>  >              I'm trying to compile GDAL/OGR with support for
>>  >             Oracle/OCI. I have the
>>  >              full oracle 11g server installed on CentOS 5.3.
>>  >              # configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/
>>  >              # make
>>  >              ...
>>  >              libtool:.....
>>  >              g++:
>>  >             /ade/smayer_perl_510/perl_source/expat_home/lib/libexpat.so:
>>  >             No
>>  >              such file or directory
>>  >              I think this path might be from the person who compiled
>>  >             the OCI
>>  >              libraries for oracle 11? I have nothing remotely like it
>>  >             on my system.
>>  >              If I add --with-expat=no to my configure line I get
>>  >             errors during
>>  >              linking about undefined references to XML_... so I'm
>>  >             guessing the linked
>>  >              OCI drivers need the expat lib linked in.
>>  >              I added /opt/oracle/product/11.2.0/dbhome_1/lib to my
>>  >             LD_LIBRARY_PATH,
>>  >              and there is a libexpat.so.1.5.2 there, as well as my
>>  >              /lib/libexpat.so.0.5.0 which is from my CentOS standarad
>>  >             RPMS:
>>  >              # rpm -qa | grep expat
>>  >              expat-1.95.8-8.2.1
>>  >              expat-devel-1.95.8-8.2.1
>>  >              I also tried
>>  >             --with-expat=/opt/oracle/product/11.2.0/dbhome_1/ but there
>>  >              are no headers there, among other problems.
>>  >              How can I get this to work?
>>  >              Thanks,
>>  >              Chris
>>  >              _______________________________________________
>>  >              gdal-dev mailing list
>>  >              gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>  >              http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  >                
>>  >
>>  >
>>  >     _______________________________________________
>>  >     gdal-dev mailing list
>>  >     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>  >     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  >
>>  >
>>  
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  
>>     

From nhatzop at gmail.com  Tue Jun 21 15:15:55 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Wed Jun 22 04:23:40 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <4E00EAAB.3030804@refractions.net>
References: <4DFFCD1A.5050503@refractions.net>
	<20110620233418.9545.qmail@s466.sureserver.com>
	<4DFFDC73.8020309@refractions.net>
	<BANLkTiknwfozR1BQ95pXd=yq7f70boK-xw@mail.gmail.com>
	<4E00D728.3050601@refractions.net>
	<20110621183005.19553.qmail@s466.sureserver.com>
	<4E00EAAB.3030804@refractions.net>
Message-ID: <BANLkTimC2ROMnLdip7T-ZNH_A1xQy8FvGA@mail.gmail.com>

vi configure :)

--Nikos

On Tue, Jun 21, 2011 at 12:02 PM, Chris Hodgson <chodgson@refractions.net>wrote:

> Ivan I appreciate your help here, but I think I've already tried everything
> you are suggesting. I dont' have an ORACLE_HOME set on the user doing this
> compiling, so if I don't specify --with-oci=... I don't get oracle support.
> I do have expat 1.95 installed (with -devel package as well) and it is
> automatically picked up by configure.
>
> I can build gdal successfully with no configure options, it builds with
> expat support among other defaults.
>
> If I specify --with-oci, I get the error about the funny libexpat path, if
> I add --with-expat=no, I get past that error, but get an error later when it
> can't find the XML_* symbols that the oracle library needs to be linked to.
> In neither of these cases to i get a working version of gdalinfo built.
>
> It seems to me that I need to link in expat for the oracle library, but I'm
> not sure if it is compatible with the 1.95 version the my system has
> installed and that GDAL requires if I specify --with-expat  ... because
> there is an libexpat.so.0.5 in the oracle lib directory. Since I don't
> actually need GDAL's expat support, I'm fine with --with-expat=no ... but
> then I need to somehow tell libtool to ignore the funny expat path it is
> finding and use the expat in the oracle directory... perhaps the best way to
> do this is just to copy the libtool command that is failing in the build and
> tweak it manually to have the right path to the oracle expat instead of the
> funny path... however I won't be able to get to the next step of the build
> to see what other commands I need to run... is there a way to modify the
> makefile or tell configure about this?
>
> Thanks,
> Chris
>
>
> Ivan Lucena wrote:
>
>> Hi Chris,
>>
>> I would not advise changing the configuration file.
>>
>> If you have a full installation of Oracle in your system you probably have
>> a ORACLE_HOME environment variable, so if you run:
>>
>> $ ./configure
>> ...
>> checking for Oracle OCI headers in /oracle/path/... yes
>> checking for Oracle OCI libraries in /oracle/path/lib... yes
>> checking if Oracle OCI version is >= 8.1.7 ... yes
>> checking for Oracle version >= 10.x to use -lnnz10 flag... yes
>> checking if Oracle support is enabled... yes
>> ...
>>  OCI support:               yes
>>  GEORASTER support:         yes
>> ...
>>
>> If you don't have ORACLE_HOME you can pass the path using
>>
>> $ ./configure --with-oci=/oracle/path/...
>>
>> Now, you system is CentOS and I have never build GDAL on it but I would
>> guess that it doesn't have Expat installed yet. My Linux does, so configure
>> finds it:
>>
>> checking for XML_ParserCreate in -lexpat... yes
>> checking for Expat XML Parser headers in /usr/include... found
>> checking for Expat XML Parser... yes
>>
>> My suggestion is to isolate the problem by running ./configure, make and
>> gdalinfo without Expat once and then make clean, ./configure, make and
>> gdalinfo without OCI, ex:
>>
>> % ./configure --with-expat=NO % ./configure --with-OCI=NO
>>
>> Configure will setup your makefiles, then you run make based on those new
>> settings.
>> Good luck.
>>
>> Ivan
>>
>>
>>
>>
>>>  -------Original Message-------
>>>  From: Chris Hodgson <chodgson@refractions.net>
>>>  To: gdal-dev@lists.osgeo.org
>>>  Subject: Re: [gdal-dev] Problem Compiling with Oracle (--with-oci)
>>>  Sent: Jun 21 '11 12:38
>>>  What would need changed in the configure file? There is no reference
>>>  there to the non-existent libexpat.
>>>  I'm not familiar with spec files... but if I wanted to learn - what
>>>  could I do there that I couldn't do in the configure/make process? The
>>>  spec file still uses the package's build system right?
>>>  It's not until the final linking with libtool that the problem happens,
>>>  I just don't know what I need to tell libtool to get it to smarten up...
>>>  Surely other people have compiled with support for oracle 11g? CentOS is
>>>  just repackaged RHEL.... I don't know what I'm doing that is out of the
>>>  ordinary here.
>>>  Chris
>>>  Nikolaos Hatzopoulos wrote:
>>>  > check the configure file it might need changes (vi configure)
>>>  >
>>>  > you can add the elgis repo add the devel package and start getting
>>>  > involved with
>>>  > the compile.
>>>  >
>>>  > this is a src rpm:
>>>  >
>>>  > http://elgis.argeo.org/repos/**testing/5/elgis/SRPMS/gdal-1.**
>>> 8.0-2.el5.elgis.src.rpm<http://elgis.argeo.org/repos/testing/5/elgis/SRPMS/gdal-1.8.0-2.el5.elgis.src.rpm>
>>>  >
>>>  > if you are familiar with spec files I strongly suggest you to do it
>>>  > that way :)
>>>  >
>>>  > --Nikos Hatzopoulos
>>>  >
>>>  > On Mon, Jun 20, 2011 at 4:49 PM, Chris Hodgson
>>>  > <chodgson@refractions.net <mailto:chodgson@refractions.**net<chodgson@refractions.net>>>
>>> wrote:
>>>  >
>>>  >     grep tells me that the /ade/smayer.../ path is not in any text
>>>  >     file in my gdal distribution (even after configuring) - which I
>>>  >     grabbed the latest 1.8.0 from osgeo.org <http://osgeo.org>.
>>>  >
>>>  >     Chris
>>>  >
>>>  >     Ivan Lucena wrote:
>>>  >
>>>  >         Chris,
>>>  >
>>>  >         I am not on my Linux machine now to confirm but I would never
>>>  >         needed to use --with-expat pointing to Oracle's path. It is
>>>  >         fanny that you found that smaver path. Sounds like you got a
>>>  >         tar.gz package from someone, not from a GDAL distribution.
>>>  >
>>>  >         The OCI driver should not depend in nothing but OCI apart from
>>>  >         GDAL/OGR stuff.
>>>  >
>>>  >         Regards,
>>>  >
>>>  >         Ivan
>>>  >
>>>  >
>>>  >
>>>  >           >
>>>  >              -------Original Message-------
>>>  >              From: Chris Hodgson <chodgson@refractions.net
>>>  >             <mailto:chodgson@refractions.**net<chodgson@refractions.net>
>>> >>
>>>  >              To: gdal-dev@lists.osgeo.org
>>>  >             <mailto:gdal-dev@lists.osgeo.**org<gdal-dev@lists.osgeo.org>
>>> >
>>>  >              Subject: [gdal-dev] Problem Compiling with Oracle
>>>  >             (--with-oci)
>>>  >              Sent: Jun 20 '11 17:43
>>>  >              I'm trying to compile GDAL/OGR with support for
>>>  >             Oracle/OCI. I have the
>>>  >              full oracle 11g server installed on CentOS 5.3.
>>>  >              # configure --with-oci=/opt/oracle/**
>>> product/11.2.0/dbhome_1/
>>>  >              # make
>>>  >              ...
>>>  >              libtool:.....
>>>  >              g++:
>>>  >             /ade/smayer_perl_510/perl_**source/expat_home/lib/**
>>> libexpat.so:
>>>  >             No
>>>  >              such file or directory
>>>  >              I think this path might be from the person who compiled
>>>  >             the OCI
>>>  >              libraries for oracle 11? I have nothing remotely like it
>>>  >             on my system.
>>>  >              If I add --with-expat=no to my configure line I get
>>>  >             errors during
>>>  >              linking about undefined references to XML_... so I'm
>>>  >             guessing the linked
>>>  >              OCI drivers need the expat lib linked in.
>>>  >              I added /opt/oracle/product/11.2.0/**dbhome_1/lib to my
>>>  >             LD_LIBRARY_PATH,
>>>  >              and there is a libexpat.so.1.5.2 there, as well as my
>>>  >              /lib/libexpat.so.0.5.0 which is from my CentOS standarad
>>>  >             RPMS:
>>>  >              # rpm -qa | grep expat
>>>  >              expat-1.95.8-8.2.1
>>>  >              expat-devel-1.95.8-8.2.1
>>>  >              I also tried
>>>  >             --with-expat=/opt/oracle/**product/11.2.0/dbhome_1/ but
>>> there
>>>  >              are no headers there, among other problems.
>>>  >              How can I get this to work?
>>>  >              Thanks,
>>>  >              Chris
>>>  >              ______________________________**_________________
>>>  >              gdal-dev mailing list
>>>  >              gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.**
>>> org <gdal-dev@lists.osgeo.org>>
>>>  >              http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>  >                 >
>>>  >
>>>  >     ______________________________**_________________
>>>  >     gdal-dev mailing list
>>>  >     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.**org<gdal-dev@lists.osgeo.org>
>>> >
>>>  >     http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>  >
>>>  >
>>>  ______________________________**_________________
>>>  gdal-dev mailing list
>>>  gdal-dev@lists.osgeo.org
>>>  http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>
>>>
>>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110621/7c86be18/attachment.html
From michael.smith at usace.army.mil  Tue Jun 21 15:21:43 2011
From: michael.smith at usace.army.mil (Smith, Michael D ERDC-CRREL-NH)
Date: Wed Jun 22 04:31:02 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <BANLkTimC2ROMnLdip7T-ZNH_A1xQy8FvGA@mail.gmail.com>
Message-ID: <CA266787.38F5E%michael.smith@usace.army.mil>

I have the expat 1.95 added via standed RHEL repo and using oracle instant
client (11.2) without a problem with GDAL from SVN

I use

./configure \
    --with-libtiff=internal \
    --with-geotiff=internal \
    --with-jpeg=internal \
    --with-libz=internal \
    --with-png=internal \
    --with-oci=/oracle/instantclient_11_1 \
    --with-geos=/usr/local/bin/geos-config \
    --with-curl \
    --with-threads \
    --with-expat=yes \
    --with-libkml \
    --with-python 


Mike


-- 
Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers
Hanover, NH



On 6/21/11  3:15 PM, "Nikolaos Hatzopoulos" <nhatzop@gmail.com> wrote:

> vi configure :)
> 
> --Nikos
> 
> On Tue, Jun 21, 2011 at 12:02 PM, Chris Hodgson <chodgson@refractions.net>
> wrote:
>> Ivan I appreciate your help here, but I think I've already tried everything
>> you are suggesting. I dont' have an ORACLE_HOME set on the user doing this
>> compiling, so if I don't specify --with-oci=... I don't get oracle support. I
>> do have expat 1.95 installed (with -devel package as well) and it is
>> automatically picked up by configure.
>> 
>> I can build gdal successfully with no configure options, it builds with expat
>> support among other defaults.
>> 
>> If I specify --with-oci, I get the error about the funny libexpat path, if I
>> add --with-expat=no, I get past that error, but get an error later when it
>> can't find the XML_* symbols that the oracle library needs to be linked to.
>> In neither of these cases to i get a working version of gdalinfo built.
>> 
>> It seems to me that I need to link in expat for the oracle library, but I'm
>> not sure if it is compatible with the 1.95 version the my system has
>> installed and that GDAL requires if I specify --with-expat ?... because there
>> is an libexpat.so.0.5 in the oracle lib directory. Since I don't actually
>> need GDAL's expat support, I'm fine with --with-expat=no ... but then I need
>> to somehow tell libtool to ignore the funny expat path it is finding and use
>> the expat in the oracle directory... perhaps the best way to do this is just
>> to copy the libtool command that is failing in the build and tweak it
>> manually to have the right path to the oracle expat instead of the funny
>> path... however I won't be able to get to the next step of the build to see
>> what other commands I need to run... is there a way to modify the makefile or
>> tell configure about this?
>> 
>> Thanks,
>> Chris
>> 
>> 
>> Ivan Lucena wrote:
>>> Hi Chris,
>>> 
>>> I would not advise changing the configuration file.
>>> 
>>> If you have a full installation of Oracle in your system you probably have a
>>> ORACLE_HOME environment variable, so if you run:
>>> 
>>> $ ./configure
>>> ...
>>> checking for Oracle OCI headers in /oracle/path/... yes
>>> checking for Oracle OCI libraries in /oracle/path/lib... yes
>>> checking if Oracle OCI version is >= 8.1.7 ... yes
>>> checking for Oracle version >= 10.x to use -lnnz10 flag... yes
>>> checking if Oracle support is enabled... yes
>>> ...
>>>  ?OCI support: ? ? ? ? ? ? ? yes
>>>  ?GEORASTER support: ? ? ? ? yes
>>> ...
>>> 
>>> If you don't have ORACLE_HOME you can pass the path using
>>> 
>>> $ ./configure --with-oci=/oracle/path/...
>>> 
>>> Now, you system is CentOS and I have never build GDAL on it but I would
>>> guess that it doesn't have Expat installed yet. My Linux does, so configure
>>> finds it:
>>> 
>>> checking for XML_ParserCreate in -lexpat... yes
>>> checking for Expat XML Parser headers in /usr/include... found
>>> checking for Expat XML Parser... yes
>>> 
>>> My suggestion is to isolate the problem by running ./configure, make and
>>> gdalinfo without Expat once and then make clean, ./configure, make and
>>> gdalinfo without OCI, ex:
>>> 
>>> % ./configure --with-expat=NO % ./configure --with-OCI=NO
>>> 
>>> Configure will setup your makefiles, then you run make based on those new
>>> settings. 
>>> Good luck.
>>> 
>>> Ivan
>>> 
>>> 
>>>  ?
>>>> ?-------Original Message-------
>>>> ?From: Chris Hodgson <chodgson@refractions.net>
>>>> ?To: gdal-dev@lists.osgeo.org
>>>> ?Subject: Re: [gdal-dev] Problem Compiling with Oracle (--with-oci)
>>>> ?Sent: Jun 21 '11 12:38
>>>>  ?What would need changed in the configure file? There is no reference
>>>> ?there to the non-existent libexpat.
>>>>  ?I'm not familiar with spec files... but if I wanted to learn - what
>>>> ?could I do there that I couldn't do in the configure/make process? The
>>>> ?spec file still uses the package's build system right?
>>>>  ?It's not until the final linking with libtool that the problem happens,
>>>> ?I just don't know what I need to tell libtool to get it to smarten up...
>>>>  ?Surely other people have compiled with support for oracle 11g? CentOS is
>>>> ?just repackaged RHEL.... I don't know what I'm doing that is out of the
>>>> ?ordinary here.
>>>>  ?Chris
>>>>  ?Nikolaos Hatzopoulos wrote:
>>>> ?> check the configure file it might need changes (vi configure)
>>>> ?>
>>>> ?> you can add the elgis repo add the devel package and start getting
>>>> ?> involved with
>>>> ?> the compile.
>>>> ?>
>>>> ?> this is a src rpm:
>>>> ?>
>>>> ?> 
>>>> http://elgis.argeo.org/repos/testing/5/elgis/SRPMS/gdal-1.8.0-2.el5.elgis.s
>>>> rc.rpm 
>>>> <http://elgis.argeo.org/repos/testing/5/elgis/SRPMS/gdal-1.8.0-2.el5.elgis.
>>>> src.rpm> 
>>>> ?>
>>>> ?> if you are familiar with spec files I strongly suggest you to do it
>>>> ?> that way :)
>>>> ?>
>>>> ?> --Nikos Hatzopoulos
>>>> ?>
>>>> ?> On Mon, Jun 20, 2011 at 4:49 PM, Chris Hodgson
>>>> ?> <chodgson@refractions.net <mailto:chodgson@refractions.net
>>>> <mailto:chodgson@refractions.net> >> wrote:
>>>> ?>
>>>> ?> ? ? grep tells me that the /ade/smayer.../ path is not in any text
>>>> ?> ? ? file in my gdal distribution (even after configuring) - which I
>>>> ?> ? ? grabbed the latest 1.8.0 from osgeo.org <http://osgeo.org>
>>>> <http://osgeo.org>.
>>>> ?>
>>>> ?> ? ? Chris
>>>> ?>
>>>> ?> ? ? Ivan Lucena wrote:
>>>> ?>
>>>> ?> ? ? ? ? Chris,
>>>> ?>
>>>> ?> ? ? ? ? I am not on my Linux machine now to confirm but I would never
>>>> ?> ? ? ? ? needed to use --with-expat pointing to Oracle's path. It is
>>>> ?> ? ? ? ? fanny that you found that smaver path. Sounds like you got a
>>>> ?> ? ? ? ? tar.gz package from someone, not from a GDAL distribution.
>>>> ?>
>>>> ?> ? ? ? ? The OCI driver should not depend in nothing but OCI apart from
>>>> ?> ? ? ? ? GDAL/OGR stuff.
>>>> ?>
>>>> ?> ? ? ? ? Regards,
>>>> ?>
>>>> ?> ? ? ? ? Ivan
>>>> ?>
>>>> ?>
>>>> ?>
>>>> ?> ? ? ? ? ? >
>>>> ?> ? ? ? ? ? ? ?-------Original Message-------
>>>> ?> ? ? ? ? ? ? ?From: Chris Hodgson <chodgson@refractions.net
>>>> ?> ? ? ? ? ? ? <mailto:chodgson@refractions.net
>>>> <mailto:chodgson@refractions.net> >>
>>>> ?> ? ? ? ? ? ? ?To: gdal-dev@lists.osgeo.org
>>>> ?> ? ? ? ? ? ? <mailto:gdal-dev@lists.osgeo.org
>>>> <mailto:gdal-dev@lists.osgeo.org> >
>>>> ?> ? ? ? ? ? ? ?Subject: [gdal-dev] Problem Compiling with Oracle
>>>> ?> ? ? ? ? ? ? (--with-oci)
>>>> ?> ? ? ? ? ? ? ?Sent: Jun 20 '11 17:43
>>>> ?> ? ? ? ? ? ? ?I'm trying to compile GDAL/OGR with support for
>>>> ?> ? ? ? ? ? ? Oracle/OCI. I have the
>>>> ?> ? ? ? ? ? ? ?full oracle 11g server installed on CentOS 5.3.
>>>> ?> ? ? ? ? ? ? ?# configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/
>>>> ?> ? ? ? ? ? ? ?# make
>>>> ?> ? ? ? ? ? ? ?...
>>>> ?> ? ? ? ? ? ? ?libtool:.....
>>>> ?> ? ? ? ? ? ? ?g++:
>>>> ?> ? ? ? ? ? ? /ade/smayer_perl_510/perl_source/expat_home/lib/libexpat.so:
>>>> ?> ? ? ? ? ? ? No
>>>> ?> ? ? ? ? ? ? ?such file or directory
>>>> ?> ? ? ? ? ? ? ?I think this path might be from the person who compiled
>>>> ?> ? ? ? ? ? ? the OCI
>>>> ?> ? ? ? ? ? ? ?libraries for oracle 11? I have nothing remotely like it
>>>> ?> ? ? ? ? ? ? on my system.
>>>> ?> ? ? ? ? ? ? ?If I add --with-expat=no to my configure line I get
>>>> ?> ? ? ? ? ? ? errors during
>>>> ?> ? ? ? ? ? ? ?linking about undefined references to XML_... so I'm
>>>> ?> ? ? ? ? ? ? guessing the linked
>>>> ?> ? ? ? ? ? ? ?OCI drivers need the expat lib linked in.
>>>> ?> ? ? ? ? ? ? ?I added /opt/oracle/product/11.2.0/dbhome_1/lib to my
>>>> ?> ? ? ? ? ? ? LD_LIBRARY_PATH,
>>>> ?> ? ? ? ? ? ? ?and there is a libexpat.so.1.5.2 there, as well as my
>>>> ?> ? ? ? ? ? ? ?/lib/libexpat.so.0.5.0 which is from my CentOS standarad
>>>> ?> ? ? ? ? ? ? RPMS:
>>>> ?> ? ? ? ? ? ? ?# rpm -qa | grep expat
>>>> ?> ? ? ? ? ? ? ?expat-1.95.8-8.2.1
>>>> ?> ? ? ? ? ? ? ?expat-devel-1.95.8-8.2.1
>>>> ?> ? ? ? ? ? ? ?I also tried
>>>> ?> ? ? ? ? ? ? --with-expat=/opt/oracle/product/11.2.0/dbhome_1/ but there
>>>> ?> ? ? ? ? ? ? ?are no headers there, among other problems.
>>>> ?> ? ? ? ? ? ? ?How can I get this to work?
>>>> ?> ? ? ? ? ? ? ?Thanks,
>>>> ?> ? ? ? ? ? ? ?Chris
>>>> ?> ? ? ? ? ? ? ?_______________________________________________
>>>> ?> ? ? ? ? ? ? ?gdal-dev mailing list
>>>> ?> ? ? ? ? ? ? ?gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org
>>>> <mailto:gdal-dev@lists.osgeo.org> >
>>>> ?> ? ? ? ? ? ? ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>> ?> ? ? ? ? ? ? ? ? >
>>>> ?>
>>>> ?> ? ? _______________________________________________
>>>> ?> ? ? gdal-dev mailing list
>>>> ?> ? ? gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org
>>>> <mailto:gdal-dev@lists.osgeo.org> >
>>>> ?> ? ? http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>> ?>
>>>> ?>
>>>>  ?_______________________________________________
>>>> ?gdal-dev mailing list
>>>> ?gdal-dev@lists.osgeo.org
>>>> ?http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>>>  ? ? 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110621/0a5d83d6/attachment-0001.html
From chodgson at refractions.net  Tue Jun 21 16:19:50 2011
From: chodgson at refractions.net (Chris Hodgson)
Date: Wed Jun 22 05:30:05 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <CA266787.38F5E%michael.smith@usace.army.mil>
References: <CA266787.38F5E%michael.smith@usace.army.mil>
Message-ID: <4E00FCE6.3010702@refractions.net>

Thanks for the confirmation Mike. I'm guessing the oracle instant client 
was compiled with a bit more care for the use of external developers. 
However I have managed to get a successful compile after setting the 
LDFLAGS environment variable to include the oracle lib folder (to get 
their old expat onto the path):

export LDFLAGS=-L/opt/oracle/product/11.2.0/dbhome_1/lib/

and then configured with the gdal expat turned off (if I leave it on I 
end up with the same original problem):

./configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/ --with-expat=no

I still have to test if this actually lets me connect to oracle. If not 
I'll download the instant client and try configuring/compiling against that.

Thanks,
Chris

Smith, Michael D ERDC-CRREL-NH wrote:
> I have the expat 1.95 added via standed RHEL repo and using oracle 
> instant client (11.2) without a problem with GDAL from SVN
>
> I use
>
> ./configure \
>     --with-libtiff=internal \
>     --with-geotiff=internal \
>     --with-jpeg=internal \
>     --with-libz=internal \
>     --with-png=internal \
>     --with-oci=/oracle/instantclient_11_1 \
>     --with-geos=/usr/local/bin/geos-config \
>     --with-curl \
>     --with-threads \
>     --with-expat=yes \
>     --with-libkml \
>     --with-python
>
>
> Mike
>
>
> -- 
> Michael Smith
> Remote Sensing/GIS Center
> US Army Corps of Engineers
> Hanover, NH
>
>
>

From even.rouault at mines-paris.org  Wed Jun 22 03:56:39 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 22 17:46:29 2011
Subject: [gdal-dev] Forcing the rounded of coordinates
In-Reply-To: <4DFFC05E.3000800@crige-paca.org>
References: <4DFFC05E.3000800@crige-paca.org>
Message-ID: <201106220956.39744.even.rouault@mines-paris.org>

Le lundi 20 juin 2011 23:49:18, Sylvain Maffren a ?crit :

This might be just a rounding effect that appears at display time when ogrinfo 
outputs the WKT representation, but not affect the output data itself. Likely 
993366.00000000058 and 993366 are 2 decimal representations for the same 
binary representation. There's no generation option to control the coordinate 
precision of the output in ogr2ogr. A few drivers/formats that are text-based 
have a layer/dataset creation option to control it, but this is driver/format 
dependant. You might want (or not!) to hack into the ugly logic of 
OGRFormatDouble() in ogr/ogrutils.cpp that is the main responsible for what 
you observe...

> Hi !
> 
> I apologize in advance for my english which I not very fluent. I have
> some questions about the tool ogr2ogr (and also about gdalwarp and
> gdal_translate) and the rounding of coordinates.
> 
> 
> Let me explain:
> 
> Some databases (particularly IGN -- France databases) have coordinates
> rounded to the meter (BD CARTO for example) or the decimeter (BD TOPO
> for example).
> 
> I will explain my comment with for bases the coordinates of a point of
> BD CARTO to support my comments :
> 
> In an original *.shp in Lambert93 - France, a point has the following
> coordinates (provided by ogrinfo):
> 
> X = 993366 m Y = 6304044 m
> 
> We import this in PostGIS with shp2pgsql, and the point has always these
> coordinates:
> 
> X = 993366 m Y = 6304044 m
> 
> It's good !
> 
> If we try to export this PostGIS layer through ogr2ogr (in *.shp, *.tab
> or *.mif), a ogrinfo gives us the same point of the layer resulting,
> with the following coordinates:
> 
> X = and Y = 993366.00000000058 6304043.9999999898)
> 
> This means that ogr2ogr (identical tests performed on a raster layer
> bounding box with reprojection (gdalwarp) or without (gdal_translate))
> changes the number of decimal coordinates of origin, which can be
> annoying in some cases (when we need to recover a given output with the
> same number of decimal than in entry.
> 
> I tried to find a setting to force ogr2ogr (or gdal and related
> functions) to round the coordinates to a given number of decimal (as can
> be done with CS2CS) and I have not found any answer.
> 
> Is it possible to set the number of decimal places in output (and
> ideally keep the same as input) ? And if so, how?
> 
> Thank you in advance to all who have good ideas and / or directions to
> follow.
> 
> 
> Sylvain Maffren
From georg.sedlmeir at muenchen.de  Wed Jun 22 04:06:48 2011
From: georg.sedlmeir at muenchen.de (Georg Sedlmeir)
Date: Wed Jun 22 17:59:39 2011
Subject: [gdal-dev] Problem with umlauts and other special characters in
 shapefile attributes selected from Oracle Spatial
Message-ID: <4E01A298.40308@muenchen.de>

Dear gdal-developers and users,

Our department (being part of the municipality of Munich) uses ogr2ogr 
to retrieve data from the city administration's central Oracle Spatial 
database as follows:

ogr2ogr -f "ESRI 
Shapefile"/opt/uis/muc/shapes_geodatenpool/aktuell/vagrund_adr_suche_`date 
+%Y_%m`.shp* -nlt POLYGON OCI:[rguuser1]/[kennwort]@serverxy.de -sql 
"select * from vagrund.adr_suche"

The command works fine basically, but characters like the german umlauts 
in attribute data end up as ? in the resulting .dbf files.

The character encoding used in the database is WEISO8859P15. My first 
idea was to use oracle's CONVERT command right in the sql statement to 
convert from WEISO8859P15 to UTF-8 but neither of them is featured in 
the list of supported encodings to be found in oracle's corresponding 
PL/SQL documentation.

Do you have any suggestions regarding a workaround or solution to the 
problem, maybe by changing gdal configuration settings? Any help would 
be much appreciated, thank you very much.

Best regards,




Georg Sedlmeir


Dipl.-Geograph

Landeshauptstadt M?nchen, Referat f?r Gesundheit und Umwelt
Abteilung Umweltschutz
Gesundheits- und Umweltberichterstattung (GUBE)
RGU-UW112

Bayerstr. 28a, 80335 M?nchen

Telefon: +49 - 89 - 233 - 4 75 40 
Telefax: +49 - 89 - 233 - 4 77 05 
E-Mail:  gube.rgu@muenchen.de

Elektronische Kommunikation mit der Landeshauptstadt M?nchen:
http://www.muenchen.de/ekomm

From even.rouault at mines-paris.org  Wed Jun 22 09:03:13 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jun 22 23:10:03 2011
Subject: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time
In-Reply-To: <8406B84EA8899042A8508D858843972903BE6134@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE5F7C@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BE610A@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BE6134@CHUNEX01.integrity-apps.com>
Message-ID: <201106221503.13262.even.rouault@mines-paris.org>

Le mardi 14 juin 2011 16:49:58, Cole, Derek a ?crit :

Derek,

I'm not sure how you have implemented your multi-threading code, but you 
should never call the GDAL API on the same dataset/raster bands handle from 
several threads. This is true for all GDAL drivers.

If you want to do multi-threading, you have to open a distinct dataset 
(possibly on the same file) for each thread. See 
http://gdal.org/gdal_8h.html#e97be045eb4701183ad332ffce29745b

Best regards,

Even

> Sorry to spam the list, but I am wondering if this is related to the
> threading perhaps? I have tried to run this identical code in a
> single-threaded fashion, and it seems to work OK. Does the library perhaps
> have something going on that is signaling the file has been read
> prematurely? I have watchers that are waiting on a finished signal, which
> I have tested that they are (and this works for a non-compressed image).
> Most of the image tiles are coming back zeros, which makes me think it is
> somehow initializing some memory, and signaling it is done before the
> arrays have actually been populated?
> 
> Derek
> ________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Tuesday, June
> 14, 2011 10:28 AM
> To: Chaitanya kumar CH
> Cc: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time
> 
> I am afraid I won't be able to post a screenshot, or the original image
> that is causing this issue.
> 
> I will also note, occaisionally the image fails to load at all, and I get a
> dump like this:
> 
> ERROR 1: Marker is not compliant with its position
> 
> ERROR 1: opj_read_header() failed
> ERROR 1: IReadBlock failed at X offset 1, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 1, Y block offset 0
> Segmentation Fault
> 
> 
> Googling for those error message reveals about 2 results, and this email
> thread is one of them =\ ________________________________
> From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
> Sent: Monday, June 13, 2011 11:13 PM
> To: Cole, Derek
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OpenJPEG2000 issues when reading blocks at a time
> 
> Derek,
> 
> Can you provide a screenshot of the displayed image. Especially the
> scrambled blocks.
From pmallas at rsmas.miami.edu  Wed Jun 22 09:09:30 2011
From: pmallas at rsmas.miami.edu (Paul Mallas)
Date: Wed Jun 22 23:16:49 2011
Subject: [gdal-dev] Re: Transposing image data using RasterIO
In-Reply-To: <itgk8u$lkn$1@dough.gmane.org>
References: <4DFBA9CE.3040306@rsmas.miami.edu> <4DFBCA13.6000203@pobox.com>
	<itgk8u$lkn$1@dough.gmane.org>
Message-ID: <itspia$59n$1@dough.gmane.org>

Yes, I tried this. I keep getting a segmentation fault doing it this way.

I will dig further, maybe something else is not right.

Regards,
Paul

On 6/17/2011 6:25 PM, Paul Mallas wrote:
> On 6/17/2011 5:41 PM, Frank Warmerdam wrote:
>> On 11-06-17 03:23 PM, Paul Mallas wrote:
>>> Hello,
>>>
>>> I am trying to transpose image data (i.e., swap lines and columns)
>>> and am
>>> struggling to make it work properly. I think this should be possible
>>> through
>>> RasterIO, but so far no luck. Any suggestions?
>>>
>>> My approach so far has been like this, with image nXsize by nYsize:
>>>
>>> void *pData = VSIMalloc2(nXSize, (GDALGetDataTypeSize(eType) / 8));
>>>
>>> for (int iLine = 0; iLine < nYSize; iLine++) {
>>>
>>> // Read in row (line)
>>> eErr = poSrcBand->RasterIO(GF_Read, 0, iLine, nXSize, 1, pData,
>>> nXSize, 1, eType, 0,0);
>>>
>>> // Now I want to write a column, nothing I tried here has worked
>>> eErr = poDstBand->RasterIO(GF_Write, .......
>>
>> Paul,
>>
>> You should be able to write this column wise like:
>>
>> poDstBand->RasterIO( GF_Write, iLine, 0, 1, nXSize,
>> pData, 1, nXSize, eType, 0, 0 );
>>
>> Note that this can be pretty inefficient depending on the format and
>> how it is blocked.
>>
>> Best regards,
>
> Hmm, I thought I tried this configuration. I will try again. Thank you
> for your time Frank.


From chaitanya.ch at gmail.com  Wed Jun 22 09:51:05 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jun 23 00:00:39 2011
Subject: [gdal-dev] Re: Transposing image data using RasterIO
In-Reply-To: <itspia$59n$1@dough.gmane.org>
References: <4DFBA9CE.3040306@rsmas.miami.edu> <4DFBCA13.6000203@pobox.com>
	<itgk8u$lkn$1@dough.gmane.org> <itspia$59n$1@dough.gmane.org>
Message-ID: <BANLkTik4K5YGL8joPOBEh2dHLVy58B1Weg@mail.gmail.com>

Paul,

Please check that you used the right values for XSize and YSize.

On Wed, Jun 22, 2011 at 6:39 PM, Paul Mallas <pmallas@rsmas.miami.edu>wrote:

> Yes, I tried this. I keep getting a segmentation fault doing it this way.
>
> I will dig further, maybe something else is not right.
>
> Regards,
> Paul
>
>
> On 6/17/2011 6:25 PM, Paul Mallas wrote:
>
>> On 6/17/2011 5:41 PM, Frank Warmerdam wrote:
>>
>>> On 11-06-17 03:23 PM, Paul Mallas wrote:
>>>
>>>> Hello,
>>>>
>>>> I am trying to transpose image data (i.e., swap lines and columns)
>>>> and am
>>>> struggling to make it work properly. I think this should be possible
>>>> through
>>>> RasterIO, but so far no luck. Any suggestions?
>>>>
>>>> My approach so far has been like this, with image nXsize by nYsize:
>>>>
>>>> void *pData = VSIMalloc2(nXSize, (GDALGetDataTypeSize(eType) / 8));
>>>>
>>>> for (int iLine = 0; iLine < nYSize; iLine++) {
>>>>
>>>> // Read in row (line)
>>>> eErr = poSrcBand->RasterIO(GF_Read, 0, iLine, nXSize, 1, pData,
>>>> nXSize, 1, eType, 0,0);
>>>>
>>>> // Now I want to write a column, nothing I tried here has worked
>>>> eErr = poDstBand->RasterIO(GF_Write, .......
>>>>
>>>
>>> Paul,
>>>
>>> You should be able to write this column wise like:
>>>
>>> poDstBand->RasterIO( GF_Write, iLine, 0, 1, nXSize,
>>> pData, 1, nXSize, eType, 0, 0 );
>>>
>>> Note that this can be pretty inefficient depending on the format and
>>> how it is blocked.
>>>
>>> Best regards,
>>>
>>
>> Hmm, I thought I tried this configuration. I will try again. Thank you
>> for your time Frank.
>>
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110622/c5f69165/attachment.html
From bobbynaugs at gmail.com  Wed Jun 22 12:48:34 2011
From: bobbynaugs at gmail.com (Robert Naugle)
Date: Thu Jun 23 03:07:56 2011
Subject: [gdal-dev] ogr2ogr.java s57 conversion
In-Reply-To: <BANLkTi=aZg-7OFJ4_52qdu2ng177EeJDAA@mail.gmail.com>
References: <BANLkTi=8QWTvc873K7toLS_e1Gh1VB_i8w@mail.gmail.com>
	<BANLkTi=aZg-7OFJ4_52qdu2ng177EeJDAA@mail.gmail.com>
Message-ID: <BANLkTinFjJS1PEJ3-A2NNVdhakorui77WA@mail.gmail.com>

Oliver,

Thanks much for your help, and with the link. I thought I would share my
progress:

The first thing I tried was moving the csv files (s57attributes.csv and
s57objectclasses.csv) into the working directory. Success! (sort of...)
ogr2ogr.java found all the layers in the s57 chart file. However, the layers
appeared to be empty :(

Now I know that your suggestion was to set the environment variables within
the java environment, and that would probably help, but due to the use of
JNI in the implementation of ogr2ogr in java, and the desire for a working
JavaWebStart application later on, that path is beyond my capabilities.
So...

I did a little digging to see why the layers were empty. Layer translation
was failing when creating fields for the attributes in the s57 chart.
Specifically, the LNAM_REFS and FFPT_RIND fields. I modified ogr2ogr.java to
just skip these fields and started to find objects in the layers!

Now I am dealing with 'OGR Error: Unsupported geometry type', when loading
more than one geometry type into a shapefile, which I know is against the
rules, but it seems like the cpp ogr2ogr did a better job of handling these
sorts of errors. I believe this can be helped with some argument
manipulation...

SUMMARY: Thanks again for your help it was crucial to my progress. *This
issue can be considered resolved at this point, for my purposes.* However,
if anyone would care to continue a discussion on why these two fields are
failing and causing the layer translation to abort, or why it seems like
command-line ogr2ogr takes care of all these geometry issues for me and
ogr2ogr.java does not, I would certainly be interested in what they had to
say.

~Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110622/a5e79120/attachment.html
From even.rouault at mines-paris.org  Wed Jun 22 13:04:38 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 23 03:24:55 2011
Subject: [gdal-dev] ogr2ogr.java s57 conversion
In-Reply-To: <BANLkTinFjJS1PEJ3-A2NNVdhakorui77WA@mail.gmail.com>
References: <BANLkTi=8QWTvc873K7toLS_e1Gh1VB_i8w@mail.gmail.com>
	<BANLkTi=aZg-7OFJ4_52qdu2ng177EeJDAA@mail.gmail.com>
	<BANLkTinFjJS1PEJ3-A2NNVdhakorui77WA@mail.gmail.com>
Message-ID: <201106221904.38295.even.rouault@mines-paris.org>

Le mercredi 22 juin 2011 18:48:34, Robert Naugle a ?crit :
> Oliver,
> 
> Thanks much for your help, and with the link. I thought I would share my
> progress:
> 
> The first thing I tried was moving the csv files (s57attributes.csv and
> s57objectclasses.csv) into the working directory. Success! (sort of...)
> ogr2ogr.java found all the layers in the s57 chart file. However, the
> layers appeared to be empty :(
> 
> Now I know that your suggestion was to set the environment variables within
> the java environment, and that would probably help, but due to the use of
> JNI in the implementation of ogr2ogr in java, and the desire for a working
> JavaWebStart application later on, that path is beyond my capabilities.
> So...
> 
> I did a little digging to see why the layers were empty. Layer translation
> was failing when creating fields for the attributes in the s57 chart.
> Specifically, the LNAM_REFS and FFPT_RIND fields. I modified ogr2ogr.java
> to just skip these fields and started to find objects in the layers!
> 
> Now I am dealing with 'OGR Error: Unsupported geometry type', when loading
> more than one geometry type into a shapefile, which I know is against the
> rules, but it seems like the cpp ogr2ogr did a better job of handling these
> sorts of errors. I believe this can be helped with some argument
> manipulation...

You just need to add "-skipfailures" as a command line argument, as you'd do 
with the C++ version of ogr2ogr. The LNAM_REFS and FFPT_RIND fields are of type 
StringList and IntegerList, which is not supported by shapefiles. And yes a 
shapefile only supports one geometry type per shapefile. -skipfailures should 
skip geometries that are not of the right type.

From bobbynaugs at gmail.com  Wed Jun 22 13:18:51 2011
From: bobbynaugs at gmail.com (Robert Naugle)
Date: Thu Jun 23 03:39:45 2011
Subject: [gdal-dev] ogr2ogr.java s57 conversion
In-Reply-To: <201106221904.38295.even.rouault@mines-paris.org>
References: <BANLkTi=8QWTvc873K7toLS_e1Gh1VB_i8w@mail.gmail.com>
	<BANLkTi=aZg-7OFJ4_52qdu2ng177EeJDAA@mail.gmail.com>
	<BANLkTinFjJS1PEJ3-A2NNVdhakorui77WA@mail.gmail.com>
	<201106221904.38295.even.rouault@mines-paris.org>
Message-ID: <BANLkTi=AGghsVcO1HL1cpU8UPN6H_xScRg@mail.gmail.com>

Hi Even, welcome back.

A fair suggestion, but -skipfailures is the first argument in my argument
list. Even so, the test for skipfailures comes AFTER the call
to CreateFeature(...) which is where I get a *java.lang.RuntimeException:
OGR Error: Unsupported geometry type. *This obviously stops all conversion
in it's tracks.
*
*
I could be wrong about what is causing the CreateFeature to fail, all I know
is that it happens as soon as the layer is asked to create a feature of a
new geometry type.

On Wed, Jun 22, 2011 at 1:04 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le mercredi 22 juin 2011 18:48:34, Robert Naugle a ?crit :
> > Oliver,
> >
> > Thanks much for your help, and with the link. I thought I would share my
> > progress:
> >
> > The first thing I tried was moving the csv files (s57attributes.csv and
> > s57objectclasses.csv) into the working directory. Success! (sort of...)
> > ogr2ogr.java found all the layers in the s57 chart file. However, the
> > layers appeared to be empty :(
> >
> > Now I know that your suggestion was to set the environment variables
> within
> > the java environment, and that would probably help, but due to the use of
> > JNI in the implementation of ogr2ogr in java, and the desire for a
> working
> > JavaWebStart application later on, that path is beyond my capabilities.
> > So...
> >
> > I did a little digging to see why the layers were empty. Layer
> translation
> > was failing when creating fields for the attributes in the s57 chart.
> > Specifically, the LNAM_REFS and FFPT_RIND fields. I modified ogr2ogr.java
> > to just skip these fields and started to find objects in the layers!
> >
> > Now I am dealing with 'OGR Error: Unsupported geometry type', when
> loading
> > more than one geometry type into a shapefile, which I know is against the
> > rules, but it seems like the cpp ogr2ogr did a better job of handling
> these
> > sorts of errors. I believe this can be helped with some argument
> > manipulation...
>
> You just need to add "-skipfailures" as a command line argument, as you'd
> do
> with the C++ version of ogr2ogr. The LNAM_REFS and FFPT_RIND fields are of
> type
> StringList and IntegerList, which is not supported by shapefiles. And yes a
> shapefile only supports one geometry type per shapefile. -skipfailures
> should
> skip geometries that are not of the right type.
>
>


-- 
Bob Naugle
(410) 903-6604
robertjnaugle@gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110622/c5f83681/attachment.html
From even.rouault at mines-paris.org  Wed Jun 22 13:24:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 23 03:46:21 2011
Subject: [gdal-dev] ogr2ogr.java s57 conversion
In-Reply-To: <BANLkTi=AGghsVcO1HL1cpU8UPN6H_xScRg@mail.gmail.com>
References: <BANLkTi=8QWTvc873K7toLS_e1Gh1VB_i8w@mail.gmail.com>
	<201106221904.38295.even.rouault@mines-paris.org>
	<BANLkTi=AGghsVcO1HL1cpU8UPN6H_xScRg@mail.gmail.com>
Message-ID: <201106221924.59264.even.rouault@mines-paris.org>

Le mercredi 22 juin 2011 19:18:51, Robert Naugle a ?crit :
> Hi Even, welcome back.
> 
> A fair suggestion, but -skipfailures is the first argument in my argument
> list. Even so, the test for skipfailures comes AFTER the call
> to CreateFeature(...) which is where I get a *java.lang.RuntimeException:
> OGR Error: Unsupported geometry type. *This obviously stops all conversion
> in it's tracks.

Ah ok, this makes sense. This has been fixed in the trunk version by disabling 
exceptions. See http://trac.osgeo.org/gdal/changeset/21555 for the line to 
add.

> *
> *
> I could be wrong about what is causing the CreateFeature to fail, all I
> know is that it happens as soon as the layer is asked to create a feature
> of a new geometry type.
> 
> On Wed, Jun 22, 2011 at 1:04 PM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Le mercredi 22 juin 2011 18:48:34, Robert Naugle a ?crit :
> > > Oliver,
> > > 
> > > Thanks much for your help, and with the link. I thought I would share
> > > my progress:
> > > 
> > > The first thing I tried was moving the csv files (s57attributes.csv and
> > > s57objectclasses.csv) into the working directory. Success! (sort of...)
> > > ogr2ogr.java found all the layers in the s57 chart file. However, the
> > > layers appeared to be empty :(
> > > 
> > > Now I know that your suggestion was to set the environment variables
> > 
> > within
> > 
> > > the java environment, and that would probably help, but due to the use
> > > of JNI in the implementation of ogr2ogr in java, and the desire for a
> > 
> > working
> > 
> > > JavaWebStart application later on, that path is beyond my capabilities.
> > > So...
> > > 
> > > I did a little digging to see why the layers were empty. Layer
> > 
> > translation
> > 
> > > was failing when creating fields for the attributes in the s57 chart.
> > > Specifically, the LNAM_REFS and FFPT_RIND fields. I modified
> > > ogr2ogr.java to just skip these fields and started to find objects in
> > > the layers!
> > > 
> > > Now I am dealing with 'OGR Error: Unsupported geometry type', when
> > 
> > loading
> > 
> > > more than one geometry type into a shapefile, which I know is against
> > > the rules, but it seems like the cpp ogr2ogr did a better job of
> > > handling
> > 
> > these
> > 
> > > sorts of errors. I believe this can be helped with some argument
> > > manipulation...
> > 
> > You just need to add "-skipfailures" as a command line argument, as you'd
> > do
> > with the C++ version of ogr2ogr. The LNAM_REFS and FFPT_RIND fields are
> > of type
> > StringList and IntegerList, which is not supported by shapefiles. And yes
> > a shapefile only supports one geometry type per shapefile. -skipfailures
> > should
> > skip geometries that are not of the right type.
From rodolfobonnin at suremptec.com.ar  Wed Jun 22 13:26:47 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Thu Jun 23 03:48:04 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4DFCD978.9070107@tiscali.it>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it> <4DFC9C4A.9080404@pobox.com>
	<4DFCD978.9070107@tiscali.it>
Message-ID: <BANLkTim8GS0VP-h1da0n4=CdSexGs=YDDQ@mail.gmail.com>

Thanks Antonio,

I've detected a way to at least read the UTM zone of the product, and
will be back once I can get more data from the files, so we can think
more carefully where the changes belong. Many thanks again.

2011/6/18 Antonio Valentino <antonio.valentino@tiscali.it>:
> Hi Frank,
>
> Il 18/06/2011 14:38, Frank Warmerdam ha scritto:
>> On 11-06-18 02:59 AM, Antonio Valentino wrote:
>>> I don't know if someone is currently working on the JAXAPalsar driver.
>>> Anyway I' very interested in extending driver for SAR products to get
>>> more metadata so I would be happy to help if you need.
>>
>> Folks,
>>
>> Phil Vachon did most of the JAXA Palsar work but has moved on to
>> non-geospatial pursuits, so anyone interested should feel free to
>> dig in.
>>
>>> Palsar products are in CEOS format so IMHO it would be nice to setup a
>>> general mechanism to decode CEOS records (a similar job has been done
>>> for ENVISAT records recently)
>>>
>>> http://trac.osgeo.org/gdal/ticket/4105
>>> http://trac.osgeo.org/gdal/attachment/ticket/4105/asar_metadata.patch
>>>
>>> The hard part (it is a very boring job) IMHO is to fill data structures
>>> that properly describe CEOS records for each sensor end product type.
>>>
>>> Anyway populating record descriptors is a job that can be done gradually
>>> and, hopefully, with the help of other users so we could start with the
>>> few metadata you are currently interested in and add other record
>>> descriptors later.
>>>
>>> The key is to setup a genereal (enough) framework for CEOS record
>>> decoding.
>>
>> There is already a generic SAR CEOS driver (gdal/frmts/ceos2) with a CEOS
>> record parsing mechanism. ?If that is what you want, please start from it.
>> For reasons not immediately obvious to me Phil chose to build a specific
>> JAXA Palsar driver but please think twice before building it out into a
>> full
>> generic CEOS driver duplicating what already exists.
>
>
> Thank you Frank.
> My basic idea was to propose an improvement of the ceos2 driver but I
> completely missed GetCeosField function. Sorry.
> Looking better to the code it seems that all tools for record decoding
> are already there, as you pointed out, so it is just a matter of getting
> more metadata.
>
> Regarding the JAXAPalsar driver, it is currently registered *after* the
> ceos2 driver so, if my understanding is correct, CEOS products should be
> opened with ceos2 and the JAXAPalsar should be used as a fallback.
>
> Is it correct?
>
> Any way I'm currently downloading some sample PALSAR product to see what
> happens.
>
> Best regards
>
> --
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
From bobbynaugs at gmail.com  Wed Jun 22 13:32:00 2011
From: bobbynaugs at gmail.com (Robert Naugle)
Date: Thu Jun 23 03:53:36 2011
Subject: [gdal-dev] ogr2ogr.java s57 conversion
In-Reply-To: <201106221924.59264.even.rouault@mines-paris.org>
References: <BANLkTi=8QWTvc873K7toLS_e1Gh1VB_i8w@mail.gmail.com>
	<201106221904.38295.even.rouault@mines-paris.org>
	<BANLkTi=AGghsVcO1HL1cpU8UPN6H_xScRg@mail.gmail.com>
	<201106221924.59264.even.rouault@mines-paris.org>
Message-ID: <BANLkTi=hOztc2zyj=6GjJKdwiBS8ugQaAA@mail.gmail.com>

Excellent! Thank you! Everything seems to be performing quite well now.

One more thank you.

~Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110622/2b29e87f/attachment.html
From rodolfobonnin at suremptec.com.ar  Wed Jun 22 16:31:30 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Thu Jun 23 07:03:07 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <BANLkTim8GS0VP-h1da0n4=CdSexGs=YDDQ@mail.gmail.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it> <4DFC9C4A.9080404@pobox.com>
	<4DFCD978.9070107@tiscali.it>
	<BANLkTim8GS0VP-h1da0n4=CdSexGs=YDDQ@mail.gmail.com>
Message-ID: <BANLkTikFo-se5LKE28D1eQgKZharbPjvTg@mail.gmail.com>

Hello Antonio, Frank,

I've now been able to read the false northing UTM parameter. The next
step is the coordinate system, which is ITRF 97. As this is not a well
known coordinate system, could this definition be enough to represent
the standard? (from spatialreference.org):

_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _  _ _ _ _ _ _ _ _ _ _ _ _
GEOCCS["ITRF97",
    DATUM["International Terrestrial Reference Frame 1997",
        SPHEROID["GRS 1980",6378137.0,298.257222101,
            AUTHORITY["EPSG","7019"]],
        AUTHORITY["EPSG","6655"]],
    PRIMEM["Greenwich",0.0,
        AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH],
    AUTHORITY["EPSG","4918"]]
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

Many thanks in advance.

Best Regards,
Ing. Rodolfo Bonnin

2011/6/22 Rodolfo Bonnin <rodolfobonnin@suremptec.com.ar>:
> Thanks Antonio,
>
> I've detected a way to at least read the UTM zone of the product, and
> will be back once I can get more data from the files, so we can think
> more carefully where the changes belong. Many thanks again.
>
> 2011/6/18 Antonio Valentino <antonio.valentino@tiscali.it>:
>> Hi Frank,
>>
>> Il 18/06/2011 14:38, Frank Warmerdam ha scritto:
>>> On 11-06-18 02:59 AM, Antonio Valentino wrote:
>>>> I don't know if someone is currently working on the JAXAPalsar driver.
>>>> Anyway I' very interested in extending driver for SAR products to get
>>>> more metadata so I would be happy to help if you need.
>>>
>>> Folks,
>>>
>>> Phil Vachon did most of the JAXA Palsar work but has moved on to
>>> non-geospatial pursuits, so anyone interested should feel free to
>>> dig in.
>>>
>>>> Palsar products are in CEOS format so IMHO it would be nice to setup a
>>>> general mechanism to decode CEOS records (a similar job has been done
>>>> for ENVISAT records recently)
>>>>
>>>> http://trac.osgeo.org/gdal/ticket/4105
>>>> http://trac.osgeo.org/gdal/attachment/ticket/4105/asar_metadata.patch
>>>>
>>>> The hard part (it is a very boring job) IMHO is to fill data structures
>>>> that properly describe CEOS records for each sensor end product type.
>>>>
>>>> Anyway populating record descriptors is a job that can be done gradually
>>>> and, hopefully, with the help of other users so we could start with the
>>>> few metadata you are currently interested in and add other record
>>>> descriptors later.
>>>>
>>>> The key is to setup a genereal (enough) framework for CEOS record
>>>> decoding.
>>>
>>> There is already a generic SAR CEOS driver (gdal/frmts/ceos2) with a CEOS
>>> record parsing mechanism. ?If that is what you want, please start from it.
>>> For reasons not immediately obvious to me Phil chose to build a specific
>>> JAXA Palsar driver but please think twice before building it out into a
>>> full
>>> generic CEOS driver duplicating what already exists.
>>
>>
>> Thank you Frank.
>> My basic idea was to propose an improvement of the ceos2 driver but I
>> completely missed GetCeosField function. Sorry.
>> Looking better to the code it seems that all tools for record decoding
>> are already there, as you pointed out, so it is just a matter of getting
>> more metadata.
>>
>> Regarding the JAXAPalsar driver, it is currently registered *after* the
>> ceos2 driver so, if my understanding is correct, CEOS products should be
>> opened with ceos2 and the JAXAPalsar should be used as a fallback.
>>
>> Is it correct?
>>
>> Any way I'm currently downloading some sample PALSAR product to see what
>> happens.
>>
>> Best regards
>>
>> --
>> Antonio Valentino
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Ing. Rodolfo Bonnin
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345? Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> rodolfobonnin@suremptec.com.ar
> www.suremptec.com
>



-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
From conan_tang at hotmail.com  Wed Jun 22 22:54:05 2011
From: conan_tang at hotmail.com (conant)
Date: Thu Jun 23 13:46:57 2011
Subject: [gdal-dev] Re: Is it possible for gdal_translate to perserve the
 external georeferencing information?
In-Reply-To: <4E00CC5E.7030901@pobox.com>
References: <BANLkTikGR8RcZZ8qqcQzAhxTmOBij7Ogyg@mail.gmail.com>
	<4E00CC5E.7030901@pobox.com>
Message-ID: <1308797645207-6506986.post@n2.nabble.com>

Thank you Frank!

Here it is the xml file. Yes, it seems that gdalinfo detected the xml file
but it did not read it. Any suggestion?

Cheers,
Nuo 

 <?xml version="1.0" encoding="utf-8" ?> 
- <GeodataXform xsi:type="typens:PolynomialXform"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xs="http://www.w3.org/2001/XMLSchema"
xmlns:typens="http://www.esri.com/schemas/ArcGIS/9.3">
  <PolynomialOrder>1</PolynomialOrder> 
- <SpatialReference xsi:type="typens:ProjectedCoordinateSystem">
 
<WKT>PROJCS["GDA_1994_MGA_Zone_56",GEOGCS["GCS_GDA_1994",DATUM["D_GDA_1994",SPHEROID["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Transverse_Mercator"],PARAMETER["False_Easting",500000.0],PARAMETER["False_Northing",10000000.0],PARAMETER["Central_Meridian",153.0],PARAMETER["Scale_Factor",0.9996],PARAMETER["Latitude_Of_Origin",0.0],UNIT["Meter",1.0],AUTHORITY["EPSG",28356]]</WKT> 
  <XOrigin>-5120900</XOrigin> 
  <YOrigin>1900</YOrigin> 
  <XYScale>450445547.391054</XYScale> 
  <ZOrigin>-100000</ZOrigin> 
  <ZScale>10000</ZScale> 
  <MOrigin>-100000</MOrigin> 
  <MScale>10000</MScale> 
  <XYTolerance>0.001</XYTolerance> 
  <ZTolerance>0.0002</ZTolerance> 
  <MTolerance>0.0002</MTolerance> 
  <HighPrecision>true</HighPrecision> 
  <WKID>28356</WKID> 
  </SpatialReference>
- <SourceGCPs xsi:type="typens:ArrayOfDouble">
  <Double>1.43509557927502</Double> 
  <Double>21.8059086384888</Double> 
  <Double>10.5531682700964</Double> 
  <Double>13.9188303527086</Double> 
  <Double>1.2382854426487</Double> 
  <Double>2.09871099550583</Double> 
  <Double>1.78786552737847</Double> 
  <Double>14.19710378737</Double> 
  <Double>7.75189289608807</Double> 
  <Double>10.6810040785713</Double> 
  </SourceGCPs>
- <TargetGCPs xsi:type="typens:ArrayOfDouble">
  <Double>553474.234991123</Double> 
  <Double>6882326.40584856</Double> 
  <Double>555706.544654901</Double> 
  <Double>6880424.58199324</Double> 
  <Double>553444.322276391</Double> 
  <Double>6877511.19974413</Double> 
  <Double>553559.261993501</Double> 
  <Double>6880474.91066252</Double> 
  <Double>555020.786503956</Double> 
  <Double>6879624.65684812</Double> 
  </TargetGCPs>
  </GeodataXform>

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Is-it-possible-for-gdal-translate-to-perserve-the-external-georeferencing-information-tp6498773p6506986.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Jun 22 23:05:59 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun 23 13:59:38 2011
Subject: [gdal-dev] Re: Is it possible for gdal_translate to perserve the
	external georeferencing information?
In-Reply-To: <1308797645207-6506986.post@n2.nabble.com>
References: <BANLkTikGR8RcZZ8qqcQzAhxTmOBij7Ogyg@mail.gmail.com>
	<4E00CC5E.7030901@pobox.com> <1308797645207-6506986.post@n2.nabble.com>
Message-ID: <4E02AD97.3090102@pobox.com>

On 11-06-22 10:54 PM, conant wrote:
> Thank you Frank!
>
> Here it is the xml file. Yes, it seems that gdalinfo detected the xml file
> but it did not read it. Any suggestion?
>
> Cheers,
> Nuo
>
>   <?xml version="1.0" encoding="utf-8" ?>
> -<GeodataXform xsi:type="typens:PolynomialXform"
> xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
> xmlns:xs="http://www.w3.org/2001/XMLSchema"
> xmlns:typens="http://www.esri.com/schemas/ArcGIS/9.3">

Nuo,

The above file is not a GDAL .aux.xml file.  Is that really the extension
it had?  I'm not sure what version of ArcGIS produces such a file (well
presumably 9.3 based on the schema) but there is nothing that GDAL can do
with it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rodolfobonnin at suremptec.com.ar  Thu Jun 23 09:56:21 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Fri Jun 24 01:25:55 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4DFF209E.5050705@pobox.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it> <4DFC9C4A.9080404@pobox.com>
	<4DFCD978.9070107@tiscali.it> <4DFF209E.5050705@pobox.com>
Message-ID: <BANLkTim_f_HOK2DkoPi12BihFgV+QKE94g@mail.gmail.com>

I have another doubt regarding the adfGeoTransform to be employed. The
JaxaPalsar has 8 coefficients to represent the mapping between
pixel-line and the map projection frame of reference ( It includes de
P L factor for X and Y, and gdal doesn't I think ). What should If the
PL factor is not near 0? Should I generate additional control points?
Thanks for your help.

Regards,
Rodolfo.





2011/6/20 Frank Warmerdam <warmerdam@pobox.com>:
> On 11-06-18 12:59 PM, Antonio Valentino wrote:
>>
>> Regarding the JAXAPalsar driver, it is currently registered *after* the
>> ceos2 driver so, if my understanding is correct, CEOS products should be
>> opened with ceos2 and the JAXAPalsar should be used as a fallback.
>>
>> Is it correct?
>
> Antonio,
>
> Yes, if it is registered after the SAR_CEOS driver (frmts/ceos2) then it
> would only be used for datasets not recgonised by the SAR_CEOS driver.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
From warmerdam at pobox.com  Thu Jun 23 13:11:28 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jun 24 04:51:31 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <BANLkTikFo-se5LKE28D1eQgKZharbPjvTg@mail.gmail.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it> <4DFC9C4A.9080404@pobox.com>
	<4DFCD978.9070107@tiscali.it>
	<BANLkTim8GS0VP-h1da0n4=CdSexGs=YDDQ@mail.gmail.com>
	<BANLkTikFo-se5LKE28D1eQgKZharbPjvTg@mail.gmail.com>
Message-ID: <4E0373C0.9070106@pobox.com>

On 11-06-22 04:31 PM, Rodolfo Bonnin wrote:
> Hello Antonio, Frank,
>
> I've now been able to read the false northing UTM parameter. The next
> step is the coordinate system, which is ITRF 97. As this is not a well
> known coordinate system, could this definition be enough to represent
> the standard? (from spatialreference.org):
>
> _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _  _ _ _ _ _ _ _ _ _ _ _ _
> GEOCCS["ITRF97",
>      DATUM["International Terrestrial Reference Frame 1997",
>          SPHEROID["GRS 1980",6378137.0,298.257222101,
>              AUTHORITY["EPSG","7019"]],
>          AUTHORITY["EPSG","6655"]],
>      PRIMEM["Greenwich",0.0,
>          AUTHORITY["EPSG","8901"]],
>      UNIT["m",1.0],
>      AXIS["Geocentric X",OTHER],
>      AXIS["Geocentric Y",EAST],
>      AXIS["Geocentric Z",NORTH],
>      AUTHORITY["EPSG","4918"]]
> _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
>


Rondolfo,

In GDAL trunk I have added support for geocentric coordinate systems and
the expansion of EPSG:4338 looks like:

GEOCCS["ITRF97 (geocentric)",
     DATUM["International_Terrestrial_Reference_Frame_1997",
         SPHEROID["GRS 1980",6378137,298.257222101,
             AUTHORITY["EPSG","7019"]],
         AUTHORITY["EPSG","6655"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     AXIS["Geocentric X",OTHER],
     AXIS["Geocentric Y",OTHER],
     AXIS["Geocentric Z",NORTH],
     AUTHORITY["EPSG","4338"]]

I believe yours if functionally equivelent. Note that GDAL is unlikely
to support geocentric coordinate systems in a useful fashion in 1.8 and
earlier versions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pmallas at rsmas.miami.edu  Thu Jun 23 15:58:38 2011
From: pmallas at rsmas.miami.edu (Paul Mallas)
Date: Fri Jun 24 07:48:05 2011
Subject: [gdal-dev] Re: Transposing image data using RasterIO
In-Reply-To: <BANLkTik4K5YGL8joPOBEh2dHLVy58B1Weg@mail.gmail.com>
References: <4DFBA9CE.3040306@rsmas.miami.edu>
	<4DFBCA13.6000203@pobox.com>	<itgk8u$lkn$1@dough.gmane.org>
	<itspia$59n$1@dough.gmane.org>
	<BANLkTik4K5YGL8joPOBEh2dHLVy58B1Weg@mail.gmail.com>
Message-ID: <iu05tf$3bu$1@dough.gmane.org>

Oh yes, I checked those several ties.

While I was not able to read lines then write columns, I am having 
better luck reading columns then writing lines.

But, Frank seemed to think that the software might be inefficient 
accessing columns.  He certainly was right - glacier creep is faster 
this.  I will have to come up with something else, but it certianly has 
been a learning experience.

On 6/22/2011 9:51 AM, Chaitanya kumar CH wrote:
> Paul,
>
> Please check that you used the right values for XSize and YSize.
>
> On Wed, Jun 22, 2011 at 6:39 PM, Paul Mallas <pmallas@rsmas.miami.edu
> <mailto:pmallas@rsmas.miami.edu>> wrote:
>
>     Yes, I tried this. I keep getting a segmentation fault doing it this
>     way.
>
>     I will dig further, maybe something else is not right.
>
>     Regards,
>     Paul
>
>
>     On 6/17/2011 6:25 PM, Paul Mallas wrote:
>
>         On 6/17/2011 5:41 PM, Frank Warmerdam wrote:
>
>             On 11-06-17 03:23 PM, Paul Mallas wrote:
>
>                 Hello,
>
>                 I am trying to transpose image data (i.e., swap lines
>                 and columns)
>                 and am
>                 struggling to make it work properly. I think this should
>                 be possible
>                 through
>                 RasterIO, but so far no luck. Any suggestions?
>
>                 My approach so far has been like this, with image nXsize
>                 by nYsize:
>
>                 void *pData = VSIMalloc2(nXSize,
>                 (GDALGetDataTypeSize(eType) / 8));
>
>                 for (int iLine = 0; iLine < nYSize; iLine++) {
>
>                 // Read in row (line)
>                 eErr = poSrcBand->RasterIO(GF_Read, 0, iLine, nXSize, 1,
>                 pData,
>                 nXSize, 1, eType, 0,0);
>
>                 // Now I want to write a column, nothing I tried here
>                 has worked
>                 eErr = poDstBand->RasterIO(GF_Write, .......
>
>
>             Paul,
>
>             You should be able to write this column wise like:
>
>             poDstBand->RasterIO( GF_Write, iLine, 0, 1, nXSize,
>             pData, 1, nXSize, eType, 0, 0 );
>
>             Note that this can be pretty inefficient depending on the
>             format and
>             how it is blocked.
>
>             Best regards,
>
>
>         Hmm, I thought I tried this configuration. I will try again.
>         Thank you
>         for your time Frank.
>
>
>
>     _________________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/__mailman/listinfo/gdal-dev
>     <http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From rodolfobonnin at suremptec.com.ar  Fri Jun 24 16:18:27 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Sat Jun 25 09:27:02 2011
Subject: [gdal-dev] ALOS PRISM driver?
Message-ID: <BANLkTimYe_sG68g2ZbczG56RCyJcQXLP2Q@mail.gmail.com>

Hello all,

Just wanted to know if there is any driver with the capability of
reading ALOS PRISM data.

Regards,
Rodolfo.

-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
From antonio.valentino at tiscali.it  Sat Jun 25 06:48:14 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sun Jun 26 00:45:05 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
Message-ID: <4E05BCEE.4060903@tiscali.it>

Hi Rodolfo,
can you please confirm that the data type of PALSAR Level 1.5 products
should be GDT_UInt16 and not GDT_Int16 as in current implementation?

If so I will file a ticket with a patch for fixing the issue.


thanks



Il 17/06/2011 21:28, Rodolfo Bonnin ha scritto:
> Hello all,
> 
> I'm just working with some JAXAPalsar images, and I've discovered that
> there is no retrieval of the coordinate system metadata retrieval in
> the current driver, the driver documentation says georeferencing is
> only supported in level 1.5.
> Has anyone tried to implement the feature for this lower level? I have
> gathered some good information about how this could be done, but in
> order to exempt myself to repeat effort, I prefer to consult the list
> beforehand.
> 
> Many thanks in advance.
> 
> 


-- 
Antonio Valentino
From antonio.valentino at tiscali.it  Sat Jun 25 07:21:01 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sun Jun 26 01:19:45 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4E05BCEE.4060903@tiscali.it>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4E05BCEE.4060903@tiscali.it>
Message-ID: <4E05C49D.9000204@tiscali.it>

Hi,

Il 25/06/2011 12:48, Antonio Valentino ha scritto:
> Hi Rodolfo,
> can you please confirm that the data type of PALSAR Level 1.5 products
> should be GDT_UInt16 and not GDT_Int16 as in current implementation?
> 
> If so I will file a ticket with a patch for fixing the issue.
> 
> 
> thanks
> 

... here it is the patch in case you want to give it a try

ciao

> 
> 
> Il 17/06/2011 21:28, Rodolfo Bonnin ha scritto:
>> Hello all,
>>
>> I'm just working with some JAXAPalsar images, and I've discovered that
>> there is no retrieval of the coordinate system metadata retrieval in
>> the current driver, the driver documentation says georeferencing is
>> only supported in level 1.5.
>> Has anyone tried to implement the feature for this lower level? I have
>> gathered some good information about how this could be done, but in
>> order to exempt myself to repeat effort, I prefer to consult the list
>> beforehand.
>>
>> Many thanks in advance.
>>
>>
> 
> 


-- 
Antonio Valentino
-------------- next part --------------
A non-text attachment was scrubbed...
Name: fix-palsar-level-1.5-data-type.patch
Type: text/x-patch
Size: 423 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110625/2e8d06db/fix-palsar-level-1.5-data-type.bin
From jachym.cepicky at gmail.com  Sat Jun 25 18:03:55 2011
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Sun Jun 26 12:38:53 2011
Subject: [gdal-dev] WCS driver, GetSubdatasets (Python) returns empty list
Message-ID: <BANLkTi=HYk9WRxVchiCFAJWGNPuAumbEzw@mail.gmail.com>

Hi,

using Python, gdal 1.8.0, Ubuntu

I need to access some Temporal information about available WCS layer

http://www.gdal.org/frmt_wcs.html says at the end, that

"Each time position available for the coverage will be treated as a subdataset."

I have following service description file (with service, I need to deal with):

<WCS_GDAL>
  <ServiceURL>http://briseide01.ingr.briseide.eu:8080/geoserver/ows?</ServiceURL>
  <CoverageName>20101012T210222_pig</CoverageName>
  <Timeout>5000</Timeout>
</WCS_GDAL>

The DescribeCoveridge request seems to be passed correctly, the file
is "extended" with aditional informations, among others it has

      <temporalDomain>
        <timePosition>2010-10-17T00:00:00.000Z</timePosition>
        <timePosition>2010-10-17T01:00:00.000Z</timePosition>
        <timePosition>2010-10-17T02:00:00.000Z</timePosition>
        <timePosition>2010-10-17T03:00:00.000Z</timePosition>
        <timePosition>2010-10-17T04:00:00.000Z</timePosition>
      </temporalDomain>

in it

So, I would assume, there is Temporal dimension available in the WCS dataset.

In my Python code, I approach:

from osgeo import gdal
ds = gdal.Open("the_wcs_def_file.xml")
ds.GetMetadata()
# returns empty list
ds.GetSubDatasets()
# returns empty list

So, my question would be: how to access the temporal information from
WCS dataset, using Python, according to WCS format description
(http://www.gdal.org/frmt_wcs.html)?

Thanks

Jachym

P.S. Congrats, Frank! Good luck in your new job.
-- 
Jachym Cepicky
e-mail: jachym.cepicky gmail com
URL: http://les-ejk.cz
GPG: http://les-ejk.cz/pgp/JachymCepicky.pgp
From even.rouault at mines-paris.org  Sat Jun 25 18:25:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jun 26 13:02:20 2011
Subject: [gdal-dev] WCS driver, GetSubdatasets (Python) returns empty list
In-Reply-To: <BANLkTi=HYk9WRxVchiCFAJWGNPuAumbEzw@mail.gmail.com>
References: <BANLkTi=HYk9WRxVchiCFAJWGNPuAumbEzw@mail.gmail.com>
Message-ID: <201106260025.52648.even.rouault@mines-paris.org>

Le dimanche 26 juin 2011 00:03:55, Jachym Cepicky a ?crit :
> Hi,
> 
> using Python, gdal 1.8.0, Ubuntu
> 
> I need to access some Temporal information about available WCS layer

Jachym,

Frank has added support for WCS temporal information in GDAL trunk just a few 
days ago. So it is not available in GDAL 1.8.0 (I've just updated the doc to 
mention that)

With a GDAL build from trunk, gdalinfo shows this :

Driver: WCS/OGC Web Coverage Service
Files: time.xml
Size is 645, 585
Coordinate System is:
PROJCS["GGRS87 / Greek Grid",
    GEOGCS["GGRS87",
        DATUM["Greek_Geodetic_Reference_System_1987",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[-199.87,74.79,246.62,0,0,0,0],
            AUTHORITY["EPSG","6121"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4121"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",24],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    AUTHORITY["EPSG","2100"],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH]]
Origin = (409900.000000000000000,4503200.000000000000000)
Pixel Size = (20.000000000000000,-20.000000000000000)
Metadata:
  TIME_POSITION=2010-10-17T04:00:00.000Z
Subdatasets:
  SUBDATASET_1_NAME=WCS_SDS:time="2010-10-17T00:00:00.000Z",time.xml
  SUBDATASET_1_DESC=Coverage 20101012T210222_pig at time 
2010-10-17T00:00:00.000Z
  SUBDATASET_2_NAME=WCS_SDS:time="2010-10-17T01:00:00.000Z",time.xml
  SUBDATASET_2_DESC=Coverage 20101012T210222_pig at time 
2010-10-17T01:00:00.000Z
  SUBDATASET_3_NAME=WCS_SDS:time="2010-10-17T02:00:00.000Z",time.xml
  SUBDATASET_3_DESC=Coverage 20101012T210222_pig at time 
2010-10-17T02:00:00.000Z
  SUBDATASET_4_NAME=WCS_SDS:time="2010-10-17T03:00:00.000Z",time.xml
  SUBDATASET_4_DESC=Coverage 20101012T210222_pig at time 
2010-10-17T03:00:00.000Z
  SUBDATASET_5_NAME=WCS_SDS:time="2010-10-17T04:00:00.000Z",time.xml
  SUBDATASET_5_DESC=Coverage 20101012T210222_pig at time 
2010-10-17T04:00:00.000Z
Corner Coordinates:
Upper Left  (  409900.000, 4503200.000) ( 22d56' 2.07"E, 40d40'29.14"N)
Lower Left  (  409900.000, 4491500.000) ( 22d56' 8.10"E, 40d34' 9.76"N)
Upper Right (  422800.000, 4503200.000) ( 23d 5'11.49"E, 40d40'33.86"N)
Lower Right (  422800.000, 4491500.000) ( 23d 5'16.66"E, 40d34'14.45"N)
Center      (  416350.000, 4497350.000) ( 23d 0'39.58"E, 40d37'21.89"N)
Band 1 Block=645x585 Type=Float64, ColorInterp=Undefined

So your best luck is to checkout svn trunk and build by yourself ;-)

Best regards,

Even
From jachym.cepicky at gmail.com  Sat Jun 25 19:08:57 2011
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Sun Jun 26 13:47:16 2011
Subject: [gdal-dev] WCS driver, GetSubdatasets (Python) returns empty list
In-Reply-To: <201106260025.52648.even.rouault@mines-paris.org>
References: <BANLkTi=HYk9WRxVchiCFAJWGNPuAumbEzw@mail.gmail.com>
	<201106260025.52648.even.rouault@mines-paris.org>
Message-ID: <BANLkTimz1jc41ne0rXO86oF7gDgHKXEEPw@mail.gmail.com>

Evan, thanks for answer


it works!!

Thanks

Jachym


2011/6/26 Even Rouault <even.rouault@mines-paris.org>:
> Le dimanche 26 juin 2011 00:03:55, Jachym Cepicky a ?crit :
>> Hi,
>>
>> using Python, gdal 1.8.0, Ubuntu
>>
>> I need to access some Temporal information about available WCS layer
>
> Jachym,
>
> Frank has added support for WCS temporal information in GDAL trunk just a few
> days ago. So it is not available in GDAL 1.8.0 (I've just updated the doc to
> mention that)
>
> With a GDAL build from trunk, gdalinfo shows this :
>
> Driver: WCS/OGC Web Coverage Service
> Files: time.xml
> Size is 645, 585
> Coordinate System is:
> PROJCS["GGRS87 / Greek Grid",
> ? ?GEOGCS["GGRS87",
> ? ? ? ?DATUM["Greek_Geodetic_Reference_System_1987",
> ? ? ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ?TOWGS84[-199.87,74.79,246.62,0,0,0,0],
> ? ? ? ? ? ?AUTHORITY["EPSG","6121"]],
> ? ? ? ?PRIMEM["Greenwich",0,
> ? ? ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ? ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ? ? ?AUTHORITY["EPSG","4121"]],
> ? ?UNIT["metre",1,
> ? ? ? ?AUTHORITY["EPSG","9001"]],
> ? ?PROJECTION["Transverse_Mercator"],
> ? ?PARAMETER["latitude_of_origin",0],
> ? ?PARAMETER["central_meridian",24],
> ? ?PARAMETER["scale_factor",0.9996],
> ? ?PARAMETER["false_easting",500000],
> ? ?PARAMETER["false_northing",0],
> ? ?AUTHORITY["EPSG","2100"],
> ? ?AXIS["Easting",EAST],
> ? ?AXIS["Northing",NORTH]]
> Origin = (409900.000000000000000,4503200.000000000000000)
> Pixel Size = (20.000000000000000,-20.000000000000000)
> Metadata:
> ?TIME_POSITION=2010-10-17T04:00:00.000Z
> Subdatasets:
> ?SUBDATASET_1_NAME=WCS_SDS:time="2010-10-17T00:00:00.000Z",time.xml
> ?SUBDATASET_1_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T00:00:00.000Z
> ?SUBDATASET_2_NAME=WCS_SDS:time="2010-10-17T01:00:00.000Z",time.xml
> ?SUBDATASET_2_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T01:00:00.000Z
> ?SUBDATASET_3_NAME=WCS_SDS:time="2010-10-17T02:00:00.000Z",time.xml
> ?SUBDATASET_3_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T02:00:00.000Z
> ?SUBDATASET_4_NAME=WCS_SDS:time="2010-10-17T03:00:00.000Z",time.xml
> ?SUBDATASET_4_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T03:00:00.000Z
> ?SUBDATASET_5_NAME=WCS_SDS:time="2010-10-17T04:00:00.000Z",time.xml
> ?SUBDATASET_5_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T04:00:00.000Z
> Corner Coordinates:
> Upper Left ?( ?409900.000, 4503200.000) ( 22d56' 2.07"E, 40d40'29.14"N)
> Lower Left ?( ?409900.000, 4491500.000) ( 22d56' 8.10"E, 40d34' 9.76"N)
> Upper Right ( ?422800.000, 4503200.000) ( 23d 5'11.49"E, 40d40'33.86"N)
> Lower Right ( ?422800.000, 4491500.000) ( 23d 5'16.66"E, 40d34'14.45"N)
> Center ? ? ?( ?416350.000, 4497350.000) ( 23d 0'39.58"E, 40d37'21.89"N)
> Band 1 Block=645x585 Type=Float64, ColorInterp=Undefined
>
> So your best luck is to checkout svn trunk and build by yourself ;-)
>
> Best regards,
>
> Even
>



-- 
Jachym Cepicky
e-mail: jachym.cepicky gmail com
URL: http://les-ejk.cz
GPG: http://les-ejk.cz/pgp/JachymCepicky.pgp
From nhatzop at gmail.com  Sat Jun 25 23:32:50 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Sun Jun 26 18:25:33 2011
Subject: [gdal-dev] zmap format
Message-ID: <BANLkTikh7ehmicFnNSGwEGUrJ4KeTHYE3w@mail.gmail.com>

Hi,

There is a format called zmap format and it has Zmap Plus grid
does anybody know more info about this format?
mostly it is used for DEM and petroleum and according to my
opinion it is descried by a rectangular kind of cells but it might not,
that's why I am asking for some reference for zmap format and
of course if it is possible to be adopted by gdal :)

--Nikos Hatzopoulos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110625/1824b0f9/attachment.html
From chaitanya.ch at gmail.com  Sun Jun 26 02:33:42 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jun 26 21:36:34 2011
Subject: [gdal-dev] Building Overviews for Tiles of Large images
In-Reply-To: <8406B84EA8899042A8508D858843972903BE662D@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BE598A@CHUNEX01.integrity-apps.com>
	<BANLkTimHJ+s3Z+7A_EzSktao50Vw2LZ_Uw@mail.gmail.com>
	<8406B84EA8899042A8508D858843972903BE662D@CHUNEX01.integrity-apps.com>
Message-ID: <BANLkTinp6TS3mOGc3OTPEocTThOVSqt7tw@mail.gmail.com>

Derek,

Sorry I missed your mail.

You can very well use RasterIO to get a downsampled image. But the disk I/O
is still going to be the same. That is the main bottleneck. Also, you are
stuck with the nearest neighbor method, which can become very choppy at
higher levels.

On Wed, Jun 15, 2011 at 11:50 PM, Cole, Derek <dcole@integrity-apps.com>wrote:

>  Bringing this back up, as I am curious. I have started playing around
> with using RasterIO and providing smaller output buffers for the read-in
> data, thus making GDAL do the downsampling (which apparently is nearest
> neighbor type?). Do you think this is faster than creating Overview imagery,
> which would also have to be read from disk? It seems like with overview
> imagery, at runtime you might be faster, since it physically reads less
> data, but you'd have to take a hit somewhere actually creating the
> overviews, right?
>
> Currently, I am reading in a full-size displayed version of the image, and
> if a user zooms out, make another read into a fraction of the buffer size to
> get the downsampled version of the tile.
>
> Thanks
>
> Derek
>  ------------------------------
> *From:* Chaitanya kumar CH [chaitanya.ch@gmail.com]
> *Sent:* Saturday, June 11, 2011 8:58 AM
> *To:* Cole, Derek
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Building Overviews for Tiles of Large images
>
>  Derek,
>
> Switching to less detailed versions is not as fast as an interactive
> application would like, especially if you need a good downsampling
> algorithm. So, adding overviews is more important than creating tiles.
> Creating tiles is more applicable for web applications where less disk
> seeking is preferable.
>
> The gdaladdo utility [1] creates and stores the overviews on the disk.
>
> [1]: http://www.gdal.org/gdaladdo.html
>
> On Sat, Jun 11, 2011 at 9:00 AM, Cole, Derek <dcole@integrity-apps.com>wrote:
>
>>  Hello again,
>>
>> I am reading over some of the documentation and information I can find on
>> GDAL.
>>
>> I have some pretty large NITF images that I want to break up for purposes
>> of displaying in a viewer I am developing. My current plan is to tile the
>> images into 1024x1024 blocks. The full images are 32768x32768 pixels
>>
>> I was hoping that as part of my tiling, I would read in the image blocks
>> and display them as they are on disk, and as a user zoomed out, switch to
>> "Less detailed" versions the further out they go.
>>
>> I was looking at the gdaladdo sample program. Is this what I want to be
>> looking at to try to replicate this functionality *in memory* for my viewer?
>> Ideally all of the tiles would know what level of zoom they were at, and
>> switch to the appropriate level of detail accordingly.
>>
>> Does it sound feasible to have my code constantly switching each tile
>> between an overview that is generated on the fly like that, or do people
>> typically write out the lower res imagesonce to file , and re-read that new
>> files?
>>
>> Thanks for answering!
>>
>> Derek
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110626/725de241/attachment.html
From antonio.valentino at tiscali.it  Sun Jun 26 06:34:01 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Jun 27 01:49:54 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4DFC9C4A.9080404@pobox.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>	<4DFC4CE7.8030706@tiscali.it>
	<4DFC9C4A.9080404@pobox.com>
Message-ID: <4E070B19.2090305@tiscali.it>

Hi Frank,

Il 18/06/2011 14:38, Frank Warmerdam ha scritto:
> On 11-06-18 02:59 AM, Antonio Valentino wrote:

[CUT]

>> Palsar products are in CEOS format so IMHO it would be nice to setup a
>> general mechanism to decode CEOS records (a similar job has been done
>> for ENVISAT records recently)

[CUT]

> There is already a generic SAR CEOS driver (gdal/frmts/ceos2) with a CEOS
> record parsing mechanism.  If that is what you want, please start from it.
> For reasons not immediately obvious to me Phil chose to build a specific
> JAXA Palsar driver but please think twice before building it out into a
> full
> generic CEOS driver duplicating what already exists.

Looking deeper into the ceos2 code it seems to me that the "recipe" for
decoding ALOS-PALSAR products do not match at all specifications I can
find at

http://www.eorc.jaxa.jp/ALOS/en/doc/fdata/PALSAR_L10_J_ENa.zip

Does that recipe refers to another format specification document?


Also, regarding the ceos2 driver in general, I didn't find an obvious
way to support CEOS products with multiple image files (like multi
polarization PALSAR or ALOS PRISM).

Did I missed something?

regards

-- 
Antonio Valentino
From conan_tang at hotmail.com  Sun Jun 26 06:51:34 2011
From: conan_tang at hotmail.com (Nuo)
Date: Mon Jun 27 02:08:09 2011
Subject: [gdal-dev] Re: Is it possible for gdal_translate to perserve the
 external georeferencing information?
In-Reply-To: <4E02AD97.3090102@pobox.com>
References: <BANLkTikGR8RcZZ8qqcQzAhxTmOBij7Ogyg@mail.gmail.com>
	<4E00CC5E.7030901@pobox.com>
	<1308797645207-6506986.post@n2.nabble.com>
	<4E02AD97.3090102@pobox.com>
Message-ID: <1309085494370-6516947.post@n2.nabble.com>

Frank, I really appreciate your reply.

I thought it was but, actually, it is a ".aux.xml" file generated by ArcGIS
9.3.1 during the georeferencing process.

http://webhelp.esri.com/arcgiSDEsktop/9.3/index.cfm?TopicName=About_auxiliary_files

So, it is impossible to preserve the georeference information- I have to
either:
rectify the image (save a new geotiff file) and gdal_translate to jp2; or

gdal_translate to jp2 and then re-georeference it.

Is that right? Thank you again.

Regards,
Nuo 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-Is-it-possible-for-gdal-translate-to-perserve-the-external-georeferencing-information-tp6498773p6516947.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Sun Jun 26 07:39:44 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun 27 02:58:55 2011
Subject: [gdal-dev] Re: Is it possible for gdal_translate to perserve the
	external georeferencing information?
In-Reply-To: <1309085494370-6516947.post@n2.nabble.com>
References: <BANLkTikGR8RcZZ8qqcQzAhxTmOBij7Ogyg@mail.gmail.com>
	<4E00CC5E.7030901@pobox.com> <1308797645207-6506986.post@n2.nabble.com>
	<4E02AD97.3090102@pobox.com> <1309085494370-6516947.post@n2.nabble.com>
Message-ID: <4E071A80.8080607@pobox.com>

On 11-06-26 06:51 AM, Nuo wrote:
> Frank, I really appreciate your reply.
>
> I thought it was but, actually, it is a ".aux.xml" file generated by ArcGIS
> 9.3.1 during the georeferencing process.
>
> http://webhelp.esri.com/arcgiSDEsktop/9.3/index.cfm?TopicName=About_auxiliary_files
>
> So, it is impossible to preserve the georeference information- I have to
> either:
> rectify the image (save a new geotiff file) and gdal_translate to jp2; or
>
> gdal_translate to jp2 and then re-georeference it.
>
> Is that right? Thank you again.

Nuo,

*GDAL* can't preserve that georeferencing.  You might find you can
do a gdal_translate to the new file and then just rename the .aux.xml
file or something like that.  But it is outside my area of knowledge.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Jun 26 07:42:22 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jun 27 03:01:41 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4E070B19.2090305@tiscali.it>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it> <4DFC9C4A.9080404@pobox.com>
	<4E070B19.2090305@tiscali.it>
Message-ID: <4E071B1E.70900@pobox.com>

On 11-06-26 06:34 AM, Antonio Valentino wrote:
> Hi Frank,
>
> Il 18/06/2011 14:38, Frank Warmerdam ha scritto:
>> On 11-06-18 02:59 AM, Antonio Valentino wrote:
>
> [CUT]
>
>>> Palsar products are in CEOS format so IMHO it would be nice to setup a
>>> general mechanism to decode CEOS records (a similar job has been done
>>> for ENVISAT records recently)
>
> [CUT]
>
>> There is already a generic SAR CEOS driver (gdal/frmts/ceos2) with a CEOS
>> record parsing mechanism.  If that is what you want, please start from it.
>> For reasons not immediately obvious to me Phil chose to build a specific
>> JAXA Palsar driver but please think twice before building it out into a
>> full
>> generic CEOS driver duplicating what already exists.
>
> Looking deeper into the ceos2 code it seems to me that the "recipe" for
> decoding ALOS-PALSAR products do not match at all specifications I can
> find at
>
> http://www.eorc.jaxa.jp/ALOS/en/doc/fdata/PALSAR_L10_J_ENa.zip
>
> Does that recipe refers to another format specification document?

Antonio,

I don't know.

> Also, regarding the ceos2 driver in general, I didn't find an obvious
> way to support CEOS products with multiple image files (like multi
> polarization PALSAR or ALOS PRISM).

Ah, that may well have been part of Phil's rationale for handling
multi-polarization data with custom drivers.  I don't know how hard
it would be to do so within the existing SAR_CEOS driver.

Possibly you could set up a multi-polarization driver based on the
low level ceos2 code but with a somewhat different recipe mechanism?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hayamaguchi at gmail.com  Sun Jun 26 11:06:28 2011
From: hayamaguchi at gmail.com (Howard Y)
Date: Mon Jun 27 06:36:47 2011
Subject: [gdal-dev] Michigan GeoRef - Michigan Oblique Mercator - EPSG:3078
Message-ID: <1309100788805-6517423.post@n2.nabble.com>

All,

I was wondering if there has been any progress in addressing the various
problems associated with correctly projecting to and from Michigan Oblique
Mercator (EPSG:3078 and its brethren), as brought up in tickets 2475, 3038,
and 3311, among others.

As you may know, the State of Michigan, USA, distributes GIS vector and
raster files in the Michigan Oblique Mercator ("Michigan GeoRef")
projection.  Commercial software packages from ESRI and others seem to be
able to handle data projected in this format, but open source software
packages that depend on GDAL/OGR routines do not seem to be able, for the
most part, to do so.  I've found QGIS and MapWindow to be among the software
packages that cannot successfully handle Michigan GeoRef using existing
definitions for EPSG:3078 and its kin.  (The only exception seems to be
uDig.  For some reason, uDig appears to be able to bring in a Michigan
GeoRef shapefile and successfully reproject it to Michigan State Plane
Coordinates, for example.)

I feel that this problem may be the single biggest factor that stands in the
way of wider adoption of open source GIS software in Michigan.  I realize
that you are all busy dealing with a ton of other issues and tickets, and I
am grateful for all that you've done for us out here.  But if the Michigan
GeoRef issue were successfully addressed, it would really provide a great
boost to open source software their enthusiasts in our state!

Thank you for your time, and keep up the good work!

Howard Yamaguchi

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Michigan-GeoRef-Michigan-Oblique-Mercator-EPSG-3078-tp6517423p6517423.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From woodbri at swoodbridge.com  Sun Jun 26 11:48:22 2011
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Mon Jun 27 07:25:35 2011
Subject: [gdal-dev] Michigan GeoRef - Michigan Oblique Mercator - EPSG:3078
In-Reply-To: <1309100788805-6517423.post@n2.nabble.com>
References: <1309100788805-6517423.post@n2.nabble.com>
Message-ID: <4E0754C6.2070000@swoodbridge.com>

I'm not sure how this works in gdal/ogr, but proj library uses the tag 
before the ":" as the name of a file containing the projection data. 
gdal/ogr may use an different database of projection information.

Anyway, the following show these projection definitions:

$ grep "Michigan GeoRef" /usr/share/proj/esri

# NAD 1927 Michigan GeoRef Feet US
<102120> +proj=omerc +lat_0=45.30916666666666 +lonc=-86 
+alpha=337.255555555556 +k=0.9996 +x_0=2546731.495961392 
+y_0=-4354009.816002033 +ellps=clrk66 +datum=NAD27 
+to_meter=0.3048006096012192  no_defs <>
# NAD 1983 Michigan GeoRef Feet US
<102121> +proj=omerc +lat_0=45.30916666666666 +lonc=-86 
+alpha=337.255555555556 +k=0.9996 +x_0=2546731.495961392 
+y_0=-4354009.816002033 +ellps=GRS80 +datum=NAD83 
+to_meter=0.3048006096012192  no_defs <>
# NAD 1927 Michigan GeoRef Meters
<102122> +proj=omerc +lat_0=45.30916666666666 +lonc=-86 
+alpha=337.255555555556 +k=0.9996 +x_0=2546731.496 +y_0=-4354009.816 
+ellps=clrk66 +datum=NAD27 +units=m  no_defs <>
# NAD 1983 Michigan GeoRef Meters
<102123> +proj=omerc +lat_0=45.30916666666666 +lonc=-86 
+alpha=337.255555555556 +k=0.9996 +x_0=2546731.496 +y_0=-4354009.816 
+ellps=GRS80 +datum=NAD83 +units=m  no_defs <>


So you might be able to reference one of these projections via

ESRI:102123 for example for the last projection listed above. Or you 
might be able to copy one or all of these projection definitions to the 
/usr/shar/proj/epsg file and rename the number to an appropriate EPSG 
definition, then try referencing if from gdal/ogr

-Steve

On 6/26/2011 11:06 AM, Howard Y wrote:
> All,
>
> I was wondering if there has been any progress in addressing the various
> problems associated with correctly projecting to and from Michigan Oblique
> Mercator (EPSG:3078 and its brethren), as brought up in tickets 2475, 3038,
> and 3311, among others.
>
> As you may know, the State of Michigan, USA, distributes GIS vector and
> raster files in the Michigan Oblique Mercator ("Michigan GeoRef")
> projection.  Commercial software packages from ESRI and others seem to be
> able to handle data projected in this format, but open source software
> packages that depend on GDAL/OGR routines do not seem to be able, for the
> most part, to do so.  I've found QGIS and MapWindow to be among the software
> packages that cannot successfully handle Michigan GeoRef using existing
> definitions for EPSG:3078 and its kin.  (The only exception seems to be
> uDig.  For some reason, uDig appears to be able to bring in a Michigan
> GeoRef shapefile and successfully reproject it to Michigan State Plane
> Coordinates, for example.)
>
> I feel that this problem may be the single biggest factor that stands in the
> way of wider adoption of open source GIS software in Michigan.  I realize
> that you are all busy dealing with a ton of other issues and tickets, and I
> am grateful for all that you've done for us out here.  But if the Michigan
> GeoRef issue were successfully addressed, it would really provide a great
> boost to open source software their enthusiasts in our state!
>
> Thank you for your time, and keep up the good work!
>
> Howard Yamaguchi
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Michigan-GeoRef-Michigan-Oblique-Mercator-EPSG-3078-tp6517423p6517423.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From gregcoats at mac.com  Sun Jun 26 11:02:46 2011
From: gregcoats at mac.com (Greg Coats)
Date: Mon Jun 27 07:36:13 2011
Subject: [gdal-dev] GDAL 1.8.0 misreads images with Type=Float32 as Type=Byte
In-Reply-To: <4E05C49D.9000204@tiscali.it>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4E05BCEE.4060903@tiscali.it> <4E05C49D.9000204@tiscali.it>
Message-ID: <DBF4E06C-1A5C-4B8E-AB2F-77061FC54BFC@mac.com>

GDAL 1.7.3, released 2010/11/10, for Mac OS X 10.6, acquired from http://www.kyngchaos.com/software:frameworks, properly reads geo referenced raster images of Type=Float32. For the example 468 MB image, gdalinfo properly reports Type=Float32, and Computed Min/Max=35.024,748.615.

GDAL 1.8.0, released 2011/01/12, for Mac OS X 10.6, acquired from http://www.kyngchaos.com/software:frameworks, improperly read geo referenced images of Type=Float32. For the example 468 MB image, gdalinfo improperly reports Type=Byte, and Computed Min/Max=0.000,255.000.

gregcoats $ source ~/programs/scripts/paths_gdal_173.sh
gregcoats $ gdalinfo --version
GDAL 1.7.3, released 2010/11/10
gregcoats $ gdalinfo -mm floatn40w078_13.flt | tail -3
Band 1 Block=10812x1 Type=Float32, ColorInterp=Undefined
    Computed Min/Max=35.024,748.615
  NoData Value=-9999

gregcoats $ source ~/programs/scripts/paths_gdal_180.sh
gregcoats $ $gdalinfo --version
GDAL 1.8.0, released 2011/01/12
gregcoats $ gdalinfo -mm floatn40w078_13.flt | tail -3
Band 1 Block=10812x1 Type=Byte, ColorInterp=Undefined
    Computed Min/Max=0.000,255.000
  NoData Value=-9999

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110626/a7f8786f/attachment.html
From even.rouault at mines-paris.org  Sun Jun 26 12:35:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jun 27 08:10:39 2011
Subject: [gdal-dev] GDAL 1.8.0 misreads images with Type=Float32 as
	Type=Byte
In-Reply-To: <DBF4E06C-1A5C-4B8E-AB2F-77061FC54BFC@mac.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4E05C49D.9000204@tiscali.it>
	<DBF4E06C-1A5C-4B8E-AB2F-77061FC54BFC@mac.com>
Message-ID: <201106261835.08095.even.rouault@mines-paris.org>

Le dimanche 26 juin 2011 17:02:46, Greg Coats a ?crit :
> GDAL 1.7.3, released 2010/11/10, for Mac OS X 10.6, acquired from
> http://www.kyngchaos.com/software:frameworks, properly reads geo
> referenced raster images of Type=Float32. For the example 468 MB image,
> gdalinfo properly reports Type=Float32, and Computed
> Min/Max=35.024,748.615.
> 
> GDAL 1.8.0, released 2011/01/12, for Mac OS X 10.6, acquired from
> http://www.kyngchaos.com/software:frameworks, improperly read geo
> referenced images of Type=Float32. For the example 468 MB image, gdalinfo
> improperly reports Type=Byte, and Computed Min/Max=0.000,255.000.
> 
> gregcoats $ source ~/programs/scripts/paths_gdal_173.sh
> gregcoats $ gdalinfo --version
> GDAL 1.7.3, released 2010/11/10
> gregcoats $ gdalinfo -mm floatn40w078_13.flt | tail -3
> Band 1 Block=10812x1 Type=Float32, ColorInterp=Undefined
>     Computed Min/Max=35.024,748.615
>   NoData Value=-9999
> 
> gregcoats $ source ~/programs/scripts/paths_gdal_180.sh
> gregcoats $ $gdalinfo --version
> GDAL 1.8.0, released 2011/01/12
> gregcoats $ gdalinfo -mm floatn40w078_13.flt | tail -3
> Band 1 Block=10812x1 Type=Byte, ColorInterp=Undefined
>     Computed Min/Max=0.000,255.000
>   NoData Value=-9999

You didn't mention the driver concerned by the issue, but from the file 
extension, it looks like its ESRI HDR. So this should be fixed in 1.8.1 by 
http://trac.osgeo.org/gdal/ticket/3933
From antonio.valentino at tiscali.it  Sun Jun 26 12:39:49 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Jun 27 08:15:17 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4E071B1E.70900@pobox.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>	<4DFC4CE7.8030706@tiscali.it>
	<4DFC9C4A.9080404@pobox.com>	<4E070B19.2090305@tiscali.it>
	<4E071B1E.70900@pobox.com>
Message-ID: <4E0760D5.9030006@tiscali.it>

Hi Frank,

Il 26/06/2011 13:42, Frank Warmerdam ha scritto:
> On 11-06-26 06:34 AM, Antonio Valentino wrote:
>> Hi Frank,

[...]

>> Looking deeper into the ceos2 code it seems to me that the "recipe" for
>> decoding ALOS-PALSAR products do not match at all specifications I can
>> find at
>>
>> http://www.eorc.jaxa.jp/ALOS/en/doc/fdata/PALSAR_L10_J_ENa.zip
>>
>> Does that recipe refers to another format specification document?
> 
> Antonio,
> 
> I don't know.

well, in this case I guess it is not a good idea to modify that recipe
in any manner

>> Also, regarding the ceos2 driver in general, I didn't find an obvious
>> way to support CEOS products with multiple image files (like multi
>> polarization PALSAR or ALOS PRISM).
> 
> Ah, that may well have been part of Phil's rationale for handling
> multi-polarization data with custom drivers.  I don't know how hard
> it would be to do so within the existing SAR_CEOS driver.

OK, thank you for confirming my analysis

> Possibly you could set up a multi-polarization driver based on the
> low level ceos2 code but with a somewhat different recipe mechanism?

Yes I could try.

A new CEOS multi-band driver could be used for ALOS (all three sensors)
and Landsat.
There are other sensors that could be interesting to support?
Where can I find pointers and format spec?

ciao

-- 
Antonio Valentino
From hayamaguchi at gmail.com  Sun Jun 26 13:46:47 2011
From: hayamaguchi at gmail.com (Howard Y)
Date: Mon Jun 27 09:25:46 2011
Subject: [gdal-dev] Re: Michigan GeoRef - Michigan Oblique Mercator -
	EPSG:3078
In-Reply-To: <4E0754C6.2070000@swoodbridge.com>
References: <1309100788805-6517423.post@n2.nabble.com>
	<4E0754C6.2070000@swoodbridge.com>
Message-ID: <1309110407148-6517746.post@n2.nabble.com>

Thank you for the suggestions, Steve.  

The projection parameters for the list you derived are pretty much the same
as the PROJ4 format of EPSG:3078, with the exception of the display unit (m
vs ft) and the datum (NAD27 vs NAD83).  I've tried most of them (but not the
NAD27 versions), and I've also tried my own hand in cranking out the
PROJ4-type parameters based on Michigan state's definition of GeoRef, but
none of them worked.

Looking at the 2007 thru 2009 threads in this forum, it appears that the
problem lies in the difference between "Oblique Mercator" and something
called "Hotine Oblique Mercator," with the "Hotine" version being the one
that GeoRef apparently uses.  But that's way beyond my level of
comprehension, and hence my appeal to the folks in this forum.  Past appeals
by others to developers of QGIS, for example, have always resulted in their
suggestion to post a request for a fix here.

Thanks again for your input!  Cheers!

Howard

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Michigan-GeoRef-Michigan-Oblique-Mercator-EPSG-3078-tp6517423p6517746.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From hilmyh at gmail.com  Sun Jun 26 14:09:58 2011
From: hilmyh at gmail.com (Hilmy Hashim)
Date: Mon Jun 27 09:50:29 2011
Subject: [gdal-dev] Re: Michigan GeoRef - Michigan Oblique Mercator -
	EPSG:3078
In-Reply-To: <1309110407148-6517746.post@n2.nabble.com>
References: <1309100788805-6517423.post@n2.nabble.com>
	<4E0754C6.2070000@swoodbridge.com>
	<1309110407148-6517746.post@n2.nabble.com>
Message-ID: <BANLkTimJW_vR7fr3NTLDGu8J-m17XTZHPw@mail.gmail.com>

The problem is best summarised by Mikael Rittri here;
http://osgeo-org.1803224.n2.nabble.com/RSO-gamma-and-Hotine-Oblique-Mercator-Variant-A-td6256795.html

He has also created a ticket here: http://trac.osgeo.org/proj/ticket/104

Unfortunately, I'm still waiting for the issue to be resolved. A workaround
is to use offset northings and eastings as suggested by epsg here for the
peninsular RSO:
http://georepository.com/crs_3375/GDM2000-Peninsula-RSO.html See
the remarks in the metadata for the projection:

If using Hotine Oblique Mercator (variant B) method (code 9815),
Ec=472830.426 m, Nc=442454.099 m.

Maybe there something similar for your projection.


*Hilmy*


On Mon, Jun 27, 2011 at 1:46 AM, Howard Y <hayamaguchi@gmail.com> wrote:

> Thank you for the suggestions, Steve.
>
> The projection parameters for the list you derived are pretty much the same
> as the PROJ4 format of EPSG:3078, with the exception of the display unit (m
> vs ft) and the datum (NAD27 vs NAD83).  I've tried most of them (but not
> the
> NAD27 versions), and I've also tried my own hand in cranking out the
> PROJ4-type parameters based on Michigan state's definition of GeoRef, but
> none of them worked.
>
> Looking at the 2007 thru 2009 threads in this forum, it appears that the
> problem lies in the difference between "Oblique Mercator" and something
> called "Hotine Oblique Mercator," with the "Hotine" version being the one
> that GeoRef apparently uses.  But that's way beyond my level of
> comprehension, and hence my appeal to the folks in this forum.  Past
> appeals
> by others to developers of QGIS, for example, have always resulted in their
> suggestion to post a request for a fix here.
>
> Thanks again for your input!  Cheers!
>
> Howard
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Michigan-GeoRef-Michigan-Oblique-Mercator-EPSG-3078-tp6517423p6517746.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110627/bcac7116/attachment.html
From hayamaguchi at gmail.com  Sun Jun 26 14:36:21 2011
From: hayamaguchi at gmail.com (Howard Y)
Date: Mon Jun 27 10:17:50 2011
Subject: [gdal-dev] Re: Michigan GeoRef - Michigan Oblique Mercator -
	EPSG:3078
In-Reply-To: <BANLkTimJW_vR7fr3NTLDGu8J-m17XTZHPw@mail.gmail.com>
References: <1309100788805-6517423.post@n2.nabble.com>
	<4E0754C6.2070000@swoodbridge.com>
	<1309110407148-6517746.post@n2.nabble.com>
	<BANLkTimJW_vR7fr3NTLDGu8J-m17XTZHPw@mail.gmail.com>
Message-ID: <1309113381818-6517862.post@n2.nabble.com>

Terima kasih, che' Himly!  This is indeed a complex situation!

Here's to hoping that support for these Hotine projections comes to
PROJ/GDAL/OGR soon!

Howard

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Michigan-GeoRef-Michigan-Oblique-Mercator-EPSG-3078-tp6517423p6517862.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From gregcoats at mac.com  Sun Jun 26 18:32:45 2011
From: gregcoats at mac.com (Greg Coats)
Date: Mon Jun 27 14:27:30 2011
Subject: [gdal-dev] GDAL 1.8.0 misreads images with Type=Float32 as
	Type=Byte
In-Reply-To: <201106261835.08095.even.rouault@mines-paris.org>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4E05C49D.9000204@tiscali.it>
	<DBF4E06C-1A5C-4B8E-AB2F-77061FC54BFC@mac.com>
	<201106261835.08095.even.rouault@mines-paris.org>
Message-ID: <7F832D17-E576-4494-9F3F-AE8CB622E675@mac.com>

Even, Thanks for pointing out that this GDAL 1.8.0 bug was fixed 6 months ago.
Unfortunately, GDAL 1.8.1 has not been released, no plans have been announced for the release of GDAL 1.8.1.
The predicament is that GDAL 1.8.0 must be used to use gdallocationinfo, but GDAL 1.7.3 (and not GDAL 1.8.0) must be used to read images with Type=Float, which is the type the USA government uses to distribute all digital elevation modes.
Greg

On Jun 26, 2011, at 12:35 PM, Even Rouault wrote:

> Le dimanche 26 juin 2011 17:02:46, Greg Coats a ?crit :
>> GDAL 1.7.3, released 2010/11/10, for Mac OS X 10.6, acquired from
>> http://www.kyngchaos.com/software:frameworks, properly reads geo
>> referenced raster images of Type=Float32. For the example 468 MB image,
>> gdalinfo properly reports Type=Float32, and Computed
>> Min/Max=35.024,748.615.
>> 
>> GDAL 1.8.0, released 2011/01/12, for Mac OS X 10.6, acquired from
>> http://www.kyngchaos.com/software:frameworks, improperly read geo
>> referenced images of Type=Float32. For the example 468 MB image, gdalinfo
>> improperly reports Type=Byte, and Computed Min/Max=0.000,255.000.
>> 
>> gregcoats $ source ~/programs/scripts/paths_gdal_173.sh
>> gregcoats $ gdalinfo --version
>> GDAL 1.7.3, released 2010/11/10
>> gregcoats $ gdalinfo -mm floatn40w078_13.flt | tail -3
>> Band 1 Block=10812x1 Type=Float32, ColorInterp=Undefined
>>    Computed Min/Max=35.024,748.615
>>  NoData Value=-9999
>> 
>> gregcoats $ source ~/programs/scripts/paths_gdal_180.sh
>> gregcoats $ $gdalinfo --version
>> GDAL 1.8.0, released 2011/01/12
>> gregcoats $ gdalinfo -mm floatn40w078_13.flt | tail -3
>> Band 1 Block=10812x1 Type=Byte, ColorInterp=Undefined
>>    Computed Min/Max=0.000,255.000
>>  NoData Value=-9999
> 
> You didn't mention the driver concerned by the issue, but from the file 
> extension, it looks like its ESRI HDR. So this should be fixed in 1.8.1 by 
> http://trac.osgeo.org/gdal/ticket/3933

From even.rouault at mines-paris.org  Mon Jun 27 05:38:38 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jun 28 02:10:19 2011
Subject: [gdal-dev] GDAL 1.8.0 misreads images with Type=Float32 as
	Type=Byte
In-Reply-To: <7F832D17-E576-4494-9F3F-AE8CB622E675@mac.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4E05C49D.9000204@tiscali.it>
	<DBF4E06C-1A5C-4B8E-AB2F-77061FC54BFC@mac.com>
	<201106261835.08095.even.rouault@mines-paris.org>
	<7F832D17-E576-4494-9F3F-AE8CB622E675@mac.com>
Message-ID: <1309167518.4e084f9e1531f@webmail.free.fr>

Selon Greg Coats <gregcoats@mac.com>:

> Even, Thanks for pointing out that this GDAL 1.8.0 bug was fixed 6 months
> ago.
> Unfortunately, GDAL 1.8.1 has not been released, no plans have been announced
> for the release of GDAL 1.8.1.

Hopefully soon.

> The predicament is that GDAL 1.8.0 must be used to use gdallocationinfo, but
> GDAL 1.7.3 (and not GDAL 1.8.0) must be used to read images with Type=Float,
> which is the type the USA government uses to distribute all digital elevation
> modes.

In the meantime, I believe you may workaround the issue by manually adding the
line PIXELTYPE F in the .hdr file. That should force the type to be recognized
as float, which can only be deduced otherwise by the .flt extension. That was
that part that was broken in 1.8.0.

> Greg
>
> On Jun 26, 2011, at 12:35 PM, Even Rouault wrote:
>
> > Le dimanche 26 juin 2011 17:02:46, Greg Coats a ?crit :
> >> GDAL 1.7.3, released 2010/11/10, for Mac OS X 10.6, acquired from
> >> http://www.kyngchaos.com/software:frameworks, properly reads geo
> >> referenced raster images of Type=Float32. For the example 468 MB image,
> >> gdalinfo properly reports Type=Float32, and Computed
> >> Min/Max=35.024,748.615.
> >>
> >> GDAL 1.8.0, released 2011/01/12, for Mac OS X 10.6, acquired from
> >> http://www.kyngchaos.com/software:frameworks, improperly read geo
> >> referenced images of Type=Float32. For the example 468 MB image, gdalinfo
> >> improperly reports Type=Byte, and Computed Min/Max=0.000,255.000.
> >>
> >> gregcoats $ source ~/programs/scripts/paths_gdal_173.sh
> >> gregcoats $ gdalinfo --version
> >> GDAL 1.7.3, released 2010/11/10
> >> gregcoats $ gdalinfo -mm floatn40w078_13.flt | tail -3
> >> Band 1 Block=10812x1 Type=Float32, ColorInterp=Undefined
> >>    Computed Min/Max=35.024,748.615
> >>  NoData Value=-9999
> >>
> >> gregcoats $ source ~/programs/scripts/paths_gdal_180.sh
> >> gregcoats $ $gdalinfo --version
> >> GDAL 1.8.0, released 2011/01/12
> >> gregcoats $ gdalinfo -mm floatn40w078_13.flt | tail -3
> >> Band 1 Block=10812x1 Type=Byte, ColorInterp=Undefined
> >>    Computed Min/Max=0.000,255.000
> >>  NoData Value=-9999
> >
> > You didn't mention the driver concerned by the issue, but from the file
> > extension, it looks like its ESRI HDR. So this should be fixed in 1.8.1 by
> > http://trac.osgeo.org/gdal/ticket/3933
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Mon Jun 27 08:31:02 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jun 28 05:11:57 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Advance Warning
Message-ID: <4E087806.5030405@pobox.com>

Folks,

I would like to prepare a 1.8.1 release candidate in the next couple days.
Developers are encouraged to address any bug fixes they would like promptly.
Is there anything folks feel strongly needs to be addressed in 1.8.1 that
has not yet made it into the 1.8 branch?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rodolfobonnin at suremptec.com.ar  Mon Jun 27 08:56:34 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Tue Jun 28 05:38:42 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <4E0760D5.9030006@tiscali.it>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4DFC4CE7.8030706@tiscali.it> <4DFC9C4A.9080404@pobox.com>
	<4E070B19.2090305@tiscali.it> <4E071B1E.70900@pobox.com>
	<4E0760D5.9030006@tiscali.it>
Message-ID: <BANLkTik4uK1nc+z=qTnvuhs8L=saNDLihw@mail.gmail.com>

Hello Antonio,

I'll read the specs regarding JaxaPalser type, out software is reading those
and they look well, but I didn't analyze the format in detail. I've also
added georeferencing (Calculating the affine transform based on the 4
corners and assigning a coordinate system (WGS84 instead of ITRF97 at the
moment as we are based on 1.8.0) to the JaxaPalsar driver.

For the time being, I'm writing new drivers for the PRISM and AVNIR2
sensors, based on the current JaxaPalsar driver, as we are constrained in
time, but I think that once I send the code, the diffing could be useful
when writing the new unified driver. I'm ready to collaborate if you think
another approach could more useful. The idea is to have PRISM and AVNIR2
support ASAP.

Regards,
Rodolfo Bonnin.

2011/6/26 Antonio Valentino <antonio.valentino@tiscali.it>:
> Hi Frank,
>
> Il 26/06/2011 13:42, Frank Warmerdam ha scritto:
>> On 11-06-26 06:34 AM, Antonio Valentino wrote:
>>> Hi Frank,
>
> [...]
>
>>> Looking deeper into the ceos2 code it seems to me that the "recipe" for
>>> decoding ALOS-PALSAR products do not match at all specifications I can
>>> find at
>>>
>>> http://www.eorc.jaxa.jp/ALOS/en/doc/fdata/PALSAR_L10_J_ENa.zip
>>>
>>> Does that recipe refers to another format specification document?
>>
>> Antonio,
>>
>> I don't know.
>
> well, in this case I guess it is not a good idea to modify that recipe
> in any manner
>
>>> Also, regarding the ceos2 driver in general, I didn't find an obvious
>>> way to support CEOS products with multiple image files (like multi
>>> polarization PALSAR or ALOS PRISM).
>>
>> Ah, that may well have been part of Phil's rationale for handling
>> multi-polarization data with custom drivers.  I don't know how hard
>> it would be to do so within the existing SAR_CEOS driver.
>
> OK, thank you for confirming my analysis
>
>> Possibly you could set up a multi-polarization driver based on the
>> low level ceos2 code but with a somewhat different recipe mechanism?
>
> Yes I could try.
>
> A new CEOS multi-band driver could be used for ALOS (all three sensors)
> and Landsat.
> There are other sensors that could be interesting to support?
> Where can I find pointers and format spec?
>
> ciao
>
> --
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110627/5466753a/attachment.html
From antonio.valentino at tiscali.it  Mon Jun 27 12:29:11 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Tue Jun 28 09:22:55 2011
Subject: [gdal-dev] JAXAPalsar 1.0 & 1.1 extended metadata reading support
In-Reply-To: <BANLkTin5_-W_p7PUZYDKktNV0W6y9_Z2CA@mail.gmail.com>
References: <BANLkTinGy_2dTFN3kGx-JmGsHN=c5ZwXyA@mail.gmail.com>
	<4E05BCEE.4060903@tiscali.it>
	<BANLkTin5_-W_p7PUZYDKktNV0W6y9_Z2CA@mail.gmail.com>
Message-ID: <20110627182911.74a53652@asigrid01>

Hi Rodolfo,

Il giorno Mon, 27 Jun 2011 10:22:35 -0300
Rodolfo Bonnin <rodolfobonnin@suremptec.com.ar> ha scritto:

> Hello Antonio,
> 
> I'm using this specification, because I can't reach the link you
> posted : www.eorc.jaxa.jp/ALOS/en/doc/fdata/*PALSAR_x_Format_EL*.pdf
> 
> The file specification  (Page 125) describes a Sar data format type:
> 
> 
> 401-428 SAR Data format type
>     Level 1.1 = 'COMPLEX*8bbbbbbbbbbbbbbbbb'
>     Level 1.5 = 'UNSIGNEDbINTEGER*2bbbbbbbb'
> 
> 429-432 SAR Data format type code
>     Level 1.1 = 'C*8b'
>     Level 1.5 = 'IU2b'
> 
> So yes, we should read unsigned ints. Thanks for the patch!

Thank you very much. I'm going to file a ticket as soon as I can.
Also, FYI, I attached a little patch related to the JAXA PALSAR driver
to ticket

http://trac.osgeo.org/gdal/ticket/2234

The patch fixes the detection of PALSAR Level 1.0 products that ate non
supported bi the driver.



> 2011/6/25 Antonio Valentino <antonio.valentino@tiscali.it>
> 
> > Hi Rodolfo,
> > can you please confirm that the data type of PALSAR Level 1.5
> > products should be GDT_UInt16 and not GDT_Int16 as in current
> > implementation?
> >
> > If so I will file a ticket with a patch for fixing the issue.
> >
> >
> > thanks
> >
> >
> >
> > Il 17/06/2011 21:28, Rodolfo Bonnin ha scritto:
> > > Hello all,
> > >
> > > I'm just working with some JAXAPalsar images, and I've discovered
> > > that there is no retrieval of the coordinate system metadata
> > > retrieval in the current driver, the driver documentation says
> > > georeferencing is only supported in level 1.5.
> > > Has anyone tried to implement the feature for this lower level? I
> > > have gathered some good information about how this could be done,
> > > but in order to exempt myself to repeat effort, I prefer to
> > > consult the list beforehand.

ciao

-- 
Antonio Valentino
From p.baumann at jacobs-university.de  Mon Jun 27 13:05:07 2011
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Tue Jun 28 10:02:04 2011
Subject: [gdal-dev] WCS driver, GetSubdatasets (Python) returns empty list
In-Reply-To: <201106260025.52648.even.rouault@mines-paris.org>
References: <BANLkTi=HYk9WRxVchiCFAJWGNPuAumbEzw@mail.gmail.com>
	<201106260025.52648.even.rouault@mines-paris.org>
Message-ID: <4E08B843.1050906@jacobs-university.de>

Hi list,

on that occasion it may be noteworthy that OGC is about to publish a Request for 
Comments (RFC) on the
     10-140 OGC Web Coverage Service - Earth Observation Application Profile
nicknamed EO-WCS. This specification, which has been tasked by ESA, specializes 
WCS for use in remote sensing.

An open source reference implementation of EO-WCS is available with EOxServer, 
see www.eoxserver.org. Among other features, it provides a tight integration 
with MapServer and GDAL.

Thought this might be of interest to the list.

-Peter


On 06/26/2011 12:25 AM, Even Rouault wrote:
> Le dimanche 26 juin 2011 00:03:55, Jachym Cepicky a ?crit :
>> Hi,
>>
>> using Python, gdal 1.8.0, Ubuntu
>>
>> I need to access some Temporal information about available WCS layer
> Jachym,
>
> Frank has added support for WCS temporal information in GDAL trunk just a few
> days ago. So it is not available in GDAL 1.8.0 (I've just updated the doc to
> mention that)
>
> With a GDAL build from trunk, gdalinfo shows this :
>
> Driver: WCS/OGC Web Coverage Service
> Files: time.xml
> Size is 645, 585
> Coordinate System is:
> PROJCS["GGRS87 / Greek Grid",
>      GEOGCS["GGRS87",
>          DATUM["Greek_Geodetic_Reference_System_1987",
>              SPHEROID["GRS 1980",6378137,298.257222101,
>                  AUTHORITY["EPSG","7019"]],
>              TOWGS84[-199.87,74.79,246.62,0,0,0,0],
>              AUTHORITY["EPSG","6121"]],
>          PRIMEM["Greenwich",0,
>              AUTHORITY["EPSG","8901"]],
>          UNIT["degree",0.0174532925199433,
>              AUTHORITY["EPSG","9122"]],
>          AUTHORITY["EPSG","4121"]],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      PROJECTION["Transverse_Mercator"],
>      PARAMETER["latitude_of_origin",0],
>      PARAMETER["central_meridian",24],
>      PARAMETER["scale_factor",0.9996],
>      PARAMETER["false_easting",500000],
>      PARAMETER["false_northing",0],
>      AUTHORITY["EPSG","2100"],
>      AXIS["Easting",EAST],
>      AXIS["Northing",NORTH]]
> Origin = (409900.000000000000000,4503200.000000000000000)
> Pixel Size = (20.000000000000000,-20.000000000000000)
> Metadata:
>    TIME_POSITION=2010-10-17T04:00:00.000Z
> Subdatasets:
>    SUBDATASET_1_NAME=WCS_SDS:time="2010-10-17T00:00:00.000Z",time.xml
>    SUBDATASET_1_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T00:00:00.000Z
>    SUBDATASET_2_NAME=WCS_SDS:time="2010-10-17T01:00:00.000Z",time.xml
>    SUBDATASET_2_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T01:00:00.000Z
>    SUBDATASET_3_NAME=WCS_SDS:time="2010-10-17T02:00:00.000Z",time.xml
>    SUBDATASET_3_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T02:00:00.000Z
>    SUBDATASET_4_NAME=WCS_SDS:time="2010-10-17T03:00:00.000Z",time.xml
>    SUBDATASET_4_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T03:00:00.000Z
>    SUBDATASET_5_NAME=WCS_SDS:time="2010-10-17T04:00:00.000Z",time.xml
>    SUBDATASET_5_DESC=Coverage 20101012T210222_pig at time
> 2010-10-17T04:00:00.000Z
> Corner Coordinates:
> Upper Left  (  409900.000, 4503200.000) ( 22d56' 2.07"E, 40d40'29.14"N)
> Lower Left  (  409900.000, 4491500.000) ( 22d56' 8.10"E, 40d34' 9.76"N)
> Upper Right (  422800.000, 4503200.000) ( 23d 5'11.49"E, 40d40'33.86"N)
> Lower Right (  422800.000, 4491500.000) ( 23d 5'16.66"E, 40d34'14.45"N)
> Center      (  416350.000, 4497350.000) ( 23d 0'39.58"E, 40d37'21.89"N)
> Band 1 Block=645x585 Type=Float64, ColorInterp=Undefined
>
> So your best luck is to checkout svn trunk and build by yourself ;-)
>
> Best regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 26793)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)



From even.rouault at mines-paris.org  Mon Jun 27 13:33:33 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jun 28 10:31:23 2011
Subject: [gdal-dev] zmap format
In-Reply-To: <BANLkTikh7ehmicFnNSGwEGUrJ4KeTHYE3w@mail.gmail.com>
References: <BANLkTikh7ehmicFnNSGwEGUrJ4KeTHYE3w@mail.gmail.com>
Message-ID: <201106271933.33594.even.rouault@mines-paris.org>

Nikolaos,

> 
> There is a format called zmap format and it has Zmap Plus grid
> does anybody know more info about this format?

Well, here's a few interesting links what I've found with the help of a search 
engine :
* http://pubs.usgs.gov/of/2003/ofr-03-230/DATA/ : several datasets in zmap 
format (.dat) and also the same datasets but in other formats that are already 
recognized by GDAL, such as .gxf, .ers, .xyz and .tif  --> Very useful to 
check that a decoder for zmap works
* http://lists.directionsmag.com/discussion/read.php?f=19&i=30467&t=30467&v=t 
: contains some bits of zmap content similar to the one of the previous link
* http://arcscripts.esri.com/details.asp?dbid=13093 : import/export zmap 
plugin for ArcGrid with source code in visual basic

> mostly it is used for DEM and petroleum and according to my
> opinion it is descried by a rectangular kind of cells but it might not,
> that's why I am asking for some reference for zmap format and
> of course if it is possible to be adopted by gdal :)

Although none of those links is a formal specification of the format, that 
should be sufficient for someone to write a decoder. But I'm not sure to 
understand your needs: do you have some zmap datasets that you need to read 
with GDAL ?

Best regards,

Even
From rayg at daylongraphics.com  Mon Jun 27 13:22:48 2011
From: rayg at daylongraphics.com (Ray Gardener)
Date: Tue Jun 28 10:43:26 2011
Subject: [gdal-dev] Setting PROJ data dir procedurally when PROJ statically
	linked
In-Reply-To: <4E08B843.1050906@jacobs-university.de>
References: <BANLkTi=HYk9WRxVchiCFAJWGNPuAumbEzw@mail.gmail.com>	<201106260025.52648.even.rouault@mines-paris.org>
	<4E08B843.1050906@jacobs-university.de>
Message-ID: <4E08BC68.2040000@daylongraphics.com>

For reasons to long to go into, it's handy for me to link PROJ4 
statically into GDAL. But then PROJ4's pj_set_finder() call gets hidden 
from the linker. Does GDAL have a CPLSetConfig option or other API to 
have it forward the data finder info to static PROJ4? I can easily hack 
such a thing but would obviously prefer a standard way.

Ray
From david.m.baker at chk.com  Mon Jun 27 15:44:55 2011
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Tue Jun 28 12:49:35 2011
Subject: [gdal-dev] zmap format
In-Reply-To: <201106271933.33594.even.rouault@mines-paris.org>
References: <BANLkTikh7ehmicFnNSGwEGUrJ4KeTHYE3w@mail.gmail.com>
	<201106271933.33594.even.rouault@mines-paris.org>
Message-ID: <E3B01AE590420B45B38B00C9A8B23FDB4AF9630EF8@OKCEXHPRD007.chkenergy.net>

Nikolaos,

The ZMapPlus is an old format used to store gridded data in an ASCII line format for transport and storage.  It is Landmark Corp. format that many of the Landmark products, including GeoGraphix, use for data exchange.  Because it has been around for a while, many industry (Oil and Gas Exploration) applications read and write the format.

It is for gridded data. The format can also support point and polygon data, but only one data type is allowed in each file.  There are a specific set of header rows that define how the data is written in the file.

If the first character is a "!" the line is a comment.
The header section is starts with the first line that has an "@" symbol.  The data starts on the first line after the last "@" symbol, and there may only be two.  Header fields are comma delimited.

On the same line as the first "@" there are three fields.  The first is user defined but many times is just "GRID FILE", the second, for a grid file, must be "GRID", the third is an integer that indicates the number of grid nodes per physical line.

After the file description line are three more header lines that must exist for a grid file.

The first of these three lines has five fields.  The first field is the field width of each grid node as stored in the data section below the last "@".  The second field is the missing or null data value as it will be found in the data section.  The third field is a user defined text value used to indicate a missing or null value.  The text value is used if field two is blank.  If field two is defined, then the third field is left blank.  The forth field indicates the number of decimal places to use if no decimal point is found in the data nodes.  (Historical note: when disk and tape space was at a premium, this field made it possible to save some space in the file by not having to store a "." for each data node.)  If the data values are written to the file with decimals, this value is ignored.  The fifth field indicates the starting column of the first grid node on each line in the data section of the file.

The second of the three lines has six fields.  The first field is the number of rows in the grid.  The second field is the number of columns in the grid.  The third is the minimum grid X node value.  The forth is the maximum grid X node value.  The fifth is the minimum grid Y node value.  The sixth is the maximum grid Y node value.  The last four fields define the bounding box of the grid, and implies, for example, the lower left corner of the of the grid is the lower left corner of the lower left node in the grid.  The projection and or datum of the bounding box value is not defined.

The third of the three lines is always "0,0, 0.0, 0.0".

After the last header line, there is a single line with a single "@", the line after which is the first line of data in the data section of the file.  The data section has fixed field widths each field being a single grid node, and is generally right justified.  There will be no more nodes on any physical line than that defined in third field of the first header line.  A data field may or may not have a decimal point.  If none is found, it is implied, and the decimal places are as defined in the second header line in the forth field.

The grid nodes in the data section are stored in column major order.  That is the first column of data is written first, starting at the upper left corner of the grid.  For example, if the grid has 7 rows and three columns, and the number of nodes per line is 4, the first line of the data section will have 4 nodes, the first four grid nodes going down from the upper left.  The second line will have three nodes, the last three nodes of the first column.  Then the next column is written, four nodes then three.  Then the last column is written in the same pattern.

Here is an example of a 6 row x 4 column ZMapPlus grid file:



!
! File created by DMBTools2.GridFileFormats.ZmapPlusFile
!
@GRID FILE, GRID, 4
20, -9999.0000000, , 7, 1
6, 4, 0, 200, 0, 300
0.0, 0.0, 0.0
@
       -9999.0000000       -9999.0000000           3.0000000          32.0000000
          88.0000000          13.0000000
       -9999.0000000          20.0000000           8.0000000          42.0000000
          75.0000000           5.0000000
           5.0000000         100.0000000          35.0000000          50.0000000
          27.0000000           1.0000000
           2.0000000          36.0000000          10.0000000           6.0000000
           9.0000000       -9999.0000000



I hope this helps and maybe someday we can see it as a supported format in GDAL/OGR.

David M. Baker
Senior Geologist - Chief Technology Advisor
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Even Rouault
Sent: Monday, June 27, 2011 12:34 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] zmap format

Nikolaos,

>
> There is a format called zmap format and it has Zmap Plus grid
> does anybody know more info about this format?

Well, here's a few interesting links what I've found with the help of a search
engine :
* http://pubs.usgs.gov/of/2003/ofr-03-230/DATA/ : several datasets in zmap
format (.dat) and also the same datasets but in other formats that are already
recognized by GDAL, such as .gxf, .ers, .xyz and .tif  --> Very useful to
check that a decoder for zmap works
* http://lists.directionsmag.com/discussion/read.php?f=19&i=30467&t=30467&v=t
: contains some bits of zmap content similar to the one of the previous link
* http://arcscripts.esri.com/details.asp?dbid=13093 : import/export zmap
plugin for ArcGrid with source code in visual basic

> mostly it is used for DEM and petroleum and according to my
> opinion it is descried by a rectangular kind of cells but it might not,
> that's why I am asking for some reference for zmap format and
> of course if it is possible to be adopted by gdal :)

Although none of those links is a formal specification of the format, that
should be sufficient for someone to write a decoder. But I'm not sure to
understand your needs: do you have some zmap datasets that you need to read
with GDAL ?

Best regards,

Even
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law.  If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited.  If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
From nicholas.g.lawrence at tmr.qld.gov.au  Mon Jun 27 21:09:45 2011
From: nicholas.g.lawrence at tmr.qld.gov.au (nicholas.g.lawrence@tmr.qld.gov.au)
Date: Tue Jun 28 18:48:14 2011
Subject: [gdal-dev] datum projection info in ecw
Message-ID: <OF51CBF26C.F4683E72-ON4A2578BD.00064E91-4A2578BD.000662DB@tmr.qld.gov.au>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110628/8c53b5e6/attachment.html
From nicholas.g.lawrence at tmr.qld.gov.au  Mon Jun 27 23:09:18 2011
From: nicholas.g.lawrence at tmr.qld.gov.au (nicholas.g.lawrence@tmr.qld.gov.au)
Date: Tue Jun 28 20:38:19 2011
Subject: [gdal-dev] open street map data
Message-ID: <OF8D5D9512.E2A6D555-ON4A2578BD.001132EC-4A2578BD.0011549B@tmr.qld.gov.au>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110628/ddf12ce3/attachment.html
From chaitanya.ch at gmail.com  Tue Jun 28 00:45:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jun 28 22:19:42 2011
Subject: [gdal-dev] open street map data
In-Reply-To: <OF8D5D9512.E2A6D555-ON4A2578BD.001132EC-4A2578BD.0011549B@tmr.qld.gov.au>
References: <OF8D5D9512.E2A6D555-ON4A2578BD.001132EC-4A2578BD.0011549B@tmr.qld.gov.au>
Message-ID: <BANLkTinHp=ROjD7Yz-ecN1iVvuPSENiOBw@mail.gmail.com>

Nicholas,

OSM format has way too many tags. Also, it would just be a readonly driver.
Refer to the following links for some ways to export osm data to other
formats.
http://wiki.openstreetmap.org/wiki/Export
http://wiki.openstreetmap.org/wiki/Converting_OSM_to_GML
http://trac.openstreetmap.org/browser/applications/utils/export/

On Tue, Jun 28, 2011 at 8:39 AM, <nicholas.g.lawrence@tmr.qld.gov.au> wrote:

> Hi all,
>
> open street map has a lot of data in an XML format. This format isn't
> listed amongst the compatible formats on
> http://www.gdal.org/ogr/ogr_formats.html Is there any recommendations for
> how to translate osm files into shapefiles or mapinfo tables?
>
> Kind regards,
>
> *
> Nicholas Lawrence*
> Senior Spatial Science Officer | Darling Downs Region / Toowoomba Office*
> Assets & Operations* Division | Department of Transport and Main Roads
> ------------------------------
>
> Floor 1 | Toowoomba - Phillip Street | 1-5 Phillip Street (cnr Clopton
> Street) | Toowoomba Qld 4350
> PO Box 645 | Toowoomba Qld 4350
> P: (07) 46390764 | F: (07) 46390750
> E: nicholas.g.lawrence@tmr.qld.gov.au
> W: www.tmr.qld.gov.au*
> Tomorrow's Queensland: strong, green, smart, healthy and fair ?
> www.towardQ2.qld.gov.au*
> P| Please consider the environment before printing this email
>
> ***********************************************************************
> WARNING: This email (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was
> intended to be sent to and if you use it in an authorised way. No one
> is allowed to use, review, alter, transmit, disclose, distribute, print
> or copy this email without appropriate authority.
>
> If this email was not intended for you and was sent to you by mistake,
> please telephone or email me immediately, destroy any hardcopies of
> this email and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and
> any legal privilege and confidentiality attached to this email is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this email does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
>
> Opinions contained in this email do not necessarily reflect the
> opinions of the Department of Transport and Main Roads,
> Maritime Safety Queensland or endorsed organisations utilising
> the same infrastructure.
> ***********************************************************************
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110628/ef0bd477/attachment-0001.html
From carl.anderson at vadose.org  Tue Jun 28 00:46:34 2011
From: carl.anderson at vadose.org (Carl Anderson)
Date: Tue Jun 28 22:21:03 2011
Subject: [gdal-dev] open street map data
In-Reply-To: <OF8D5D9512.E2A6D555-ON4A2578BD.001132EC-4A2578BD.0011549B@tmr.qld.gov.au>
References: <OF8D5D9512.E2A6D555-ON4A2578BD.001132EC-4A2578BD.0011549B@tmr.qld.gov.au>
Message-ID: <BANLkTikuidKWLwGU-yBLXjNmcVR9sTchkw@mail.gmail.com>

Nick,

Nice to see you here.

You may want to try

http://code.google.com/p/osm2shp/
http://sourceforge.net/projects/osm2shpjava/

or use
http://wiki.openstreetmap.org/wiki/Osm2pgsql
and convert to a shapefile from PostGIS.

The last choice requires a postgresql/postgis setup but is very well tested.

C.

Carl Anderson
carl.andrson@vadose.org
geo-spatial architect

On Mon, Jun 27, 2011 at 11:09 PM, <nicholas.g.lawrence@tmr.qld.gov.au>wrote:

> Hi all,
>
> open street map has a lot of data in an XML format. This format isn't
> listed amongst the compatible formats on
> http://www.gdal.org/ogr/ogr_formats.html Is there any recommendations for
> how to translate osm files into shapefiles or mapinfo tables?
>
> Kind regards,
>
> *
> Nicholas Lawrence*
> Senior Spatial Science Officer | Darling Downs Region / Toowoomba Office*
> Assets & Operations* Division | Department of Transport and Main Roads
> ------------------------------
>
> Floor 1 | Toowoomba - Phillip Street | 1-5 Phillip Street (cnr Clopton
> Street) | Toowoomba Qld 4350
> PO Box 645 | Toowoomba Qld 4350
> P: (07) 46390764 | F: (07) 46390750
> E: nicholas.g.lawrence@tmr.qld.gov.au
> W: www.tmr.qld.gov.au*
> Tomorrow's Queensland: strong, green, smart, healthy and fair ?
> www.towardQ2.qld.gov.au*
> P| Please consider the environment before printing this email
>
> ***********************************************************************
> WARNING: This email (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was
> intended to be sent to and if you use it in an authorised way. No one
> is allowed to use, review, alter, transmit, disclose, distribute, print
> or copy this email without appropriate authority.
>
> If this email was not intended for you and was sent to you by mistake,
> please telephone or email me immediately, destroy any hardcopies of
> this email and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and
> any legal privilege and confidentiality attached to this email is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this email does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
>
> Opinions contained in this email do not necessarily reflect the
> opinions of the Department of Transport and Main Roads,
> Maritime Safety Queensland or endorsed organisations utilising
> the same infrastructure.
> ***********************************************************************
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Carl Anderson, GISP

canderson@spatialfocus.com
carl.anderson@vadose.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110628/c63d7208/attachment.html
From carl.anderson at vadose.org  Tue Jun 28 00:48:11 2011
From: carl.anderson at vadose.org (Carl Anderson)
Date: Tue Jun 28 22:22:44 2011
Subject: [gdal-dev] datum projection info in ecw
In-Reply-To: <OF51CBF26C.F4683E72-ON4A2578BD.00064E91-4A2578BD.000662DB@tmr.qld.gov.au>
References: <OF51CBF26C.F4683E72-ON4A2578BD.00064E91-4A2578BD.000662DB@tmr.qld.gov.au>
Message-ID: <BANLkTikPVORm6MENbHgZ2mcRTekwGOf92Q@mail.gmail.com>

Nick,

Does gdalinfo not give you enough information?

C.

On Mon, Jun 27, 2011 at 9:09 PM, <nicholas.g.lawrence@tmr.qld.gov.au> wrote:

> Hello all,
>
> Does anyone know where the datum and projection information is stored
> inside an ecw?
>
> Kind regards,
>
> *
> Nicholas Lawrence*
> Senior Spatial Science Officer | Darling Downs Region / Toowoomba Office*
> Assets & Operations* Division | Department of Transport and Main Roads
> ------------------------------
>
> Floor 1 | Toowoomba - Phillip Street | 1-5 Phillip Street (cnr Clopton
> Street) | Toowoomba Qld 4350
> PO Box 645 | Toowoomba Qld 4350
> P: (07) 46390764 | F: (07) 46390750
> E: nicholas.g.lawrence@tmr.qld.gov.au
> W: www.tmr.qld.gov.au*
> Tomorrow's Queensland: strong, green, smart, healthy and fair ?
> www.towardQ2.qld.gov.au*
> P| Please consider the environment before printing this email
>
> ***********************************************************************
> WARNING: This email (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was
> intended to be sent to and if you use it in an authorised way. No one
> is allowed to use, review, alter, transmit, disclose, distribute, print
> or copy this email without appropriate authority.
>
> If this email was not intended for you and was sent to you by mistake,
> please telephone or email me immediately, destroy any hardcopies of
> this email and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and
> any legal privilege and confidentiality attached to this email is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this email does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
>
> Opinions contained in this email do not necessarily reflect the
> opinions of the Department of Transport and Main Roads,
> Maritime Safety Queensland or endorsed organisations utilising
> the same infrastructure.
> ***********************************************************************
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Carl Anderson, GISP

canderson@spatialfocus.com
carl.anderson@vadose.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110628/830dbd12/attachment.html
From jrepetto at free.fr  Tue Jun 28 02:05:38 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue Jun 28 23:44:24 2011
Subject: [gdal-dev] datum projection info in ecw
In-Reply-To: <OF51CBF26C.F4683E72-ON4A2578BD.00064E91-4A2578BD.000662DB@tmr.qld.gov.au>
References: <OF51CBF26C.F4683E72-ON4A2578BD.00064E91-4A2578BD.000662DB@tmr.qld.gov.au>
Message-ID: <4E096F32.3010502@free.fr>

On 06/28/11 03:09, nicholas.g.lawrence@tmr.qld.gov.au wrote:
> Hello all,
>
> Does anyone know where the datum and projection information is stored
> inside an ecw?
>

It is stored in the header. You can use "ECW Header Editor" to display 
or change it.

Jean-Claude
From RSyaoxin at hotmail.com  Tue Jun 28 07:24:06 2011
From: RSyaoxin at hotmail.com (RSyaoxin)
Date: Wed Jun 29 05:20:10 2011
Subject: [gdal-dev] How to correct the envisat N1 image with it's GCPs
Message-ID: <1309260246849-6524474.post@n2.nabble.com>

Hi,all.
     I want to correct the envisat N1 image with it's GCPs,this image
haven't geo-referenced information and projection,but it's GCPs have
geo-referenced information.However I can not get correct results,the
corrected image pixels are all zero.Here is my code:

	GDALAllRegister();

	GDALDriverH hDriver;
	GDALDataType eDT;
	GDALDatasetH hDstDS;
	GDALDatasetH hSrcDS;
	

hSrcDS=GDALOpen("D:\\Users\\ASA_IMP_1PNUPA20070408_135835_000000162057_00082_26689_3974.N1",GA_ReadOnly);
	CPLAssert(hSrcDS!=NULL);

	int nGcpCount=GDALGetGCPCount(hSrcDS);
	const GDAL_GCP *pGCPs=GDALGetGCPs(hSrcDS);

	GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

psWarpOptions->pTransformerArg=GDALCreateGCPTransformer(nGcpCount,pGCPs,1,0);
	psWarpOptions->pfnTransformer=GDALGCPTransform;
	psWarpOptions->eResampleAlg=GRA_NearestNeighbour;
	psWarpOptions->hSrcDS=hSrcDS;

	psWarpOptions->nBandCount=0;
	psWarpOptions->pfnProgress=GDALTermProgress;
	double adfDstGeoTransform[6];	
	int nPixels=0, nLines=0;
	GDALSuggestedWarpOutput(psWarpOptions->hSrcDS, GDALGCPTransform,		
		psWarpOptions->pTransformerArg, adfDstGeoTransform, &nPixels, &nLines);
	
	hDriver=GDALGetDriverByName("GTiff");
	CPLAssert(hDriver!=NULL);
	eDT=GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

hDstDS=GDALCreate(hDriver,"D:\\Users\\warp.tif",nPixels,nLines,GDALGetRasterCount(hSrcDS),eDT,NULL);
	CPLAssert(hDstDS!=NULL);
	
	psWarpOptions->hDstDS=hDstDS;

	char *pszDstWKT=NULL;
	OGRSpatialReference oSRS;
	oSRS.SetUTM(20,TRUE);
	oSRS.SetWellKnownGeogCS("WGS84");	
	oSRS.exportToWkt(&pszDstWKT);

	GDALSetProjection(hDstDS,pszDstWKT);
	GDALSetGeoTransform(hDstDS,adfDstGeoTransform);
	CPLFree(pszDstWKT);
	
	GDALWarpOperation oOperation;
	oOperation.Initialize(psWarpOptions);
	oOperation.ChunkAndWarpImage(0,0,nPixels,nLines);	
	GDALDestroyGenImgProjTransformer(psWarpOptions->pTransformerArg);
	GDALDestroyWarpOptions(psWarpOptions);

	GDALClose(hDstDS);
	GDALClose(hSrcDS);

That's Why?I turn to Anybody who once did this job for some advice. Thank
you! 
Kind regards.

     

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-correct-the-envisat-N1-image-with-it-s-GCPs-tp6524474p6524474.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From frederick.keusch at digimapas.cl  Tue Jun 28 09:25:36 2011
From: frederick.keusch at digimapas.cl (frederick keusch)
Date: Wed Jun 29 07:28:24 2011
Subject: [gdal-dev] How to apply a costum shift grid?
Message-ID: <1309267536678-6524901.post@n2.nabble.com>

Hi,

I am working here in Chile and we have a lot of earthquakes here, the last
big one like a year ago. So the problem is that I have a lot of
georeferenced images, but georeferenced before the earthquake. We thought
the best way would be to calculate a shift grid and apply it with gdalwarp
to all of the images. The only thing I would have to do is to apply the grid
from one datum to the same datum instead of from one datum to another, this
should be possible, shouldn?t it?
Reading a lot in the mailing-list I found a link to an australian
govermental site, where they provide a program to convert from NTv2_ASCII to
NTv2_GSB. So I created an Ntv2_ASCII file with our shift values and
converted it with this program to an .gsb-file and tried to apply that file
with gdalwarp to our images. But no matter what I tried, nothing happened,
the shift never was applied. I saw a lot of examples of possible commands
searching in the mailing-list and tried everyone, also in nearly every
possible combination but nothing lead to an applied shift. So I am a bit
desperate right now, hoping someone can help me a bit or give an advice.
Here in short what I have to do: 
Apply a shift grid from UTM 18s WGS84 to UTM 18s WGS84 in order to apply the
coordinate changes of our images owing of the earthquake last year.  

I would apreciate any kind of help and thank a lot in advance,

Frederick


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-apply-a-costum-shift-grid-tp6524901p6524901.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jluis at ualg.pt  Tue Jun 28 12:15:54 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Jun 29 10:52:14 2011
Subject: [gdal-dev] How to apply a costum shift grid?
In-Reply-To: <1309267536678-6524901.post@n2.nabble.com>
References: <1309267536678-6524901.post@n2.nabble.com>
Message-ID: <4E09FE3A.6020403@ualg.pt>

Frederick,

I'm a geophysicist but never thought that an earthquake could have that 
side effect of image referencing.
Anyway the horizontal deformation caused by a big earthquake is of the 
order of meter scale. One idea I had is that you can use the shift grid 
to to relocate previous GCPs and than use those relocated ones in 
gdalwarp. You can compute 'old' GCPs by interpolating your images both 
for pixels and metric (UTM) units. The operations would be something 
like this

1. Get  "px py old_UTMx old_UTMy" by interpolating the referenced image 
at a certain well distributed positions
2. apply the shift grid to old GCPs and get  new GCPs "px py new_UTMx 
new_UTMy"
2. re-register with gdalwarp and new GCPs

Of course, this is in absence of a more straight solution where the 
shift grid is applied directly to the images.

Joaquim Luis

> Hi,
>
> I am working here in Chile and we have a lot of earthquakes here, the last
> big one like a year ago. So the problem is that I have a lot of
> georeferenced images, but georeferenced before the earthquake. We thought
> the best way would be to calculate a shift grid and apply it with gdalwarp
> to all of the images. The only thing I would have to do is to apply the grid
> from one datum to the same datum instead of from one datum to another, this
> should be possible, shouldn?t it?
> Reading a lot in the mailing-list I found a link to an australian
> govermental site, where they provide a program to convert from NTv2_ASCII to
> NTv2_GSB. So I created an Ntv2_ASCII file with our shift values and
> converted it with this program to an .gsb-file and tried to apply that file
> with gdalwarp to our images. But no matter what I tried, nothing happened,
> the shift never was applied. I saw a lot of examples of possible commands
> searching in the mailing-list and tried everyone, also in nearly every
> possible combination but nothing lead to an applied shift. So I am a bit
> desperate right now, hoping someone can help me a bit or give an advice.
> Here in short what I have to do:
> Apply a shift grid from UTM 18s WGS84 to UTM 18s WGS84 in order to apply the
> coordinate changes of our images owing of the earthquake last year.
>
> I would apreciate any kind of help and thank a lot in advance,
>
> Frederick
>
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-apply-a-costum-shift-grid-tp6524901p6524901.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From armin.burger at gmx.net  Tue Jun 28 14:19:09 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Jun 29 12:37:50 2011
Subject: [gdal-dev] datum projection info in ecw
In-Reply-To: <OF51CBF26C.F4683E72-ON4A2578BD.00064E91-4A2578BD.000662DB@tmr.qld.gov.au>
References: <OF51CBF26C.F4683E72-ON4A2578BD.00064E91-4A2578BD.000662DB@tmr.qld.gov.au>
Message-ID: <4E0A1B1D.2080904@gmx.net>

Nicholas

I was interested about similar things a few weeks ago and got quick help 
in this forum. As jean-Claude already mentioned there's a header editor 
for Windows that allows you to see/edit the datum and projection info. 
Jean-Claude also created a tool "ecwhed" that allows you to get and set 
these parameters via the command line, at least under Linux it compiles 
easily, it requires the ECW SDK.

If you create ECW's via GDAL you should use the options -co "PROJ=..." 
and -co "DATUM=..." to be sure what GDAL writes to the ECW header. For 
reading ECW files GDAL uses the definitions in the file "ecw_cs.wkt" (on 
Unix under /usr/local/share/gdal/). There you can add your own 
projections and datums or modify existing ones, eg. adding datum shift 
parameters. Programs that use GDAL for raster rendering like QGIS or 
ArcGis 10 can also work with these new projection definitions if you add 
them to their own "ecw_cs.wkt" file, Mapserver takes the file of the 
GDAL installation.

Regards
Armin



On 28/06/2011 03:09, nicholas.g.lawrence@tmr.qld.gov.au wrote:
> Hello all,
>
> Does anyone know where the datum and projection information is stored
> inside an ecw?
>
> Kind regards,
>
> *
> Nicholas Lawrence*
> Senior Spatial Science Officer | Darling Downs Region / Toowoomba Office *
> Assets & Operations* Division | Department of Transport and Main Roads
>
>
> Floor 1 | Toowoomba - Phillip Street | 1-5 Phillip Street (cnr Clopton
> Street) | Toowoomba Qld 4350
> PO Box 645 | Toowoomba Qld 4350
> P: (07) 46390764 | F: (07) 46390750
> E: nicholas.g.lawrence@tmr.qld.gov.au
> W: www.tmr.qld.gov.au *
> Tomorrow's Queensland: strong, green, smart, healthy and fair ?
> www.towardQ2.qld.gov.au*
> P | Please consider the environment before printing this email
>
> ***********************************************************************
> WARNING: This email (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was
> intended to be sent to and if you use it in an authorised way. No one
> is allowed to use, review, alter, transmit, disclose, distribute, print
> or copy this email without appropriate authority.
>
> If this email was not intended for you and was sent to you by mistake,
> please telephone or email me immediately, destroy any hardcopies of
> this email and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and
> any legal privilege and confidentiality attached to this email is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this email does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
>
> Opinions contained in this email do not necessarily reflect the
> opinions of the Department of Transport and Main Roads,
> Maritime Safety Queensland or endorsed organisations utilising
> the same infrastructure.
> ***********************************************************************
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From armin.burger at gmx.net  Tue Jun 28 15:32:01 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Jun 29 13:54:41 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Advance Warning
In-Reply-To: <4E087806.5030405@pobox.com>
References: <4E087806.5030405@pobox.com>
Message-ID: <4E0A2C31.8020505@gmx.net>

Frank

a functionality that I would find useful in combination with clients 
like ArcGIS or Erdas are the Erdas overviews in *.rrd files. When 
creating overviews with gdaladdo using the "--config USE_RRD YES" 
option, aux files instead of rrd files are created. They are not fully 
recognized by ArcGis/Erdas, depending on the image format.

For me an ideal solution would therefore be being able to create 
overviews in standard rrd files (I guess the format is not much 
different from the one used for the overviews in aux files) and the 
possibility to create standard Erdas aux files that contain only 
information like the histogram, but no overviews. Looks to me like the 
creation of HFA formats supports that already.

Clients like Erdas and ArcGis use and create the aux file for any type 
of image, also for Tiff or ECW files when applying image stretching. 
Having the possibility to create such aux files with a command line tool 
for various image formats could be useful in an image archive where 
clients do not have write access and cannot create neither rrd nor aux 
files. And the creation could then be automated and performed eg. on a 
server, and it could also be much faster than clients like ArcGis 
calculating the histograms.

Just my ideas.

Greetings
Armin

On 27/06/2011 14:31, Frank Warmerdam wrote:
> Folks,
>
> I would like to prepare a 1.8.1 release candidate in the next couple days.
> Developers are encouraged to address any bug fixes they would like
> promptly.
> Is there anything folks feel strongly needs to be addressed in 1.8.1 that
> has not yet made it into the 1.8 branch?
>
> Best regards,
From frederick.keusch at digimapas.cl  Tue Jun 28 16:39:58 2011
From: frederick.keusch at digimapas.cl (frederick keusch)
Date: Wed Jun 29 15:06:06 2011
Subject: [gdal-dev] Re: How to apply a costum shift grid?
In-Reply-To: <4E09FE3A.6020403@ualg.pt>
References: <1309267536678-6524901.post@n2.nabble.com>
	<4E09FE3A.6020403@ualg.pt>
Message-ID: <1309293598140-6526517.post@n2.nabble.com>

Hi Joaquim,

thanks for your help. What we already did (before calculating a shift grid),
was calculating the new GCP?s and I also already applied them with
gdal_translate and gdalwarp to the images and it worked well. But we have to
change the reference for a very huge region so it would be a lot more
efficient and accurate, if in someway we could apply the grid. But if at the
end it turns out, that it is not possible to use a shift grid in the way we
wanted and needed to, using GCP?s would be the way....

Thanks again,

Frederick

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-apply-a-costum-shift-grid-tp6524901p6526517.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chodgson at refractions.net  Tue Jun 28 21:08:01 2011
From: chodgson at refractions.net (Chris Hodgson)
Date: Wed Jun 29 19:49:19 2011
Subject: [gdal-dev] Problem Compiling with Oracle (--with-oci)
In-Reply-To: <4E00FCE6.3010702@refractions.net>
References: <CA266787.38F5E%michael.smith@usace.army.mil>
	<4E00FCE6.3010702@refractions.net>
Message-ID: <4E0A7AF1.7080109@refractions.net>

Just wanted to wrap this up with my final findings for anyone who 
stumbles onto this thread in the future.

While the solution below did allow me to successfully build and connect 
to oracle, I also wanted to build with support for PostgreSQL/PostGIS. 
The PostgreSQL client also requires expat, and so my little 
-with-expat=no trick didn't allow the postgres support to be included in 
the build. The final solution was to download the oracle instant client 
(for linux) - both the "basic" client package and the "SDK" package were 
required.

Before configuring, I needed to do the following in the instant client 
directory:

ln -s libclntsh.so.11.1 libclntsh.so
ln -s libocci.so.11.1 libocci.so

And then I needed to specify the paths to where I unzipped the instant 
client packages (in /opt) to configure:

--with-oci-lib=/opt/instantclient_11_2
--with-oci-include=/opt/instantclient_11_2/sdk/include

And that's it (as it should be). No LDFLAGS or messing with 
LD_LIBRARY_PATH, no ORACLE_HOME even, just here's the libs, here's the 
includes, go. This works so much better because the instant client has 
all of it's pre-req's statically linked in (it's a ridiculously huge 
library as a result...) whereas the libraries that come in the /lib/ dir 
of the full oracle package do not (and so are only somewhat less 
ridiculously large).

Hope that helps someone, someday.

Cheers,
Chris


Chris Hodgson wrote:
> Thanks for the confirmation Mike. I'm guessing the oracle instant 
> client was compiled with a bit more care for the use of external 
> developers. However I have managed to get a successful compile after 
> setting the LDFLAGS environment variable to include the oracle lib 
> folder (to get their old expat onto the path):
>
> export LDFLAGS=-L/opt/oracle/product/11.2.0/dbhome_1/lib/
>
> and then configured with the gdal expat turned off (if I leave it on I 
> end up with the same original problem):
>
> ./configure --with-oci=/opt/oracle/product/11.2.0/dbhome_1/ 
> --with-expat=no
>
> I still have to test if this actually lets me connect to oracle. If 
> not I'll download the instant client and try configuring/compiling 
> against that.
>
> Thanks,
> Chris
>
> Smith, Michael D ERDC-CRREL-NH wrote:
>> I have the expat 1.95 added via standed RHEL repo and using oracle 
>> instant client (11.2) without a problem with GDAL from SVN
>>
>> I use
>>
>> ./configure \
>>     --with-libtiff=internal \
>>     --with-geotiff=internal \
>>     --with-jpeg=internal \
>>     --with-libz=internal \
>>     --with-png=internal \
>>     --with-oci=/oracle/instantclient_11_1 \
>>     --with-geos=/usr/local/bin/geos-config \
>>     --with-curl \
>>     --with-threads \
>>     --with-expat=yes \
>>     --with-libkml \
>>     --with-python
>>
>>
>> Mike
>>
>>
>> -- 
>> Michael Smith
>> Remote Sensing/GIS Center
>> US Army Corps of Engineers
>> Hanover, NH
>>
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From anton.korosov at nersc.no  Wed Jun 29 02:18:44 2011
From: anton.korosov at nersc.no (Anton Korosov)
Date: Thu Jun 30 01:17:11 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Advance Warning
In-Reply-To: <4E0A2C31.8020505@gmx.net>
References: <4E087806.5030405@pobox.com> <4E0A2C31.8020505@gmx.net>
Message-ID: <4E0AC3C4.2080805@nersc.no>

Hi Frank!

There is a bug in the current Envisat driver which could be fixed in 1.8.1.
Not all bands (MDS) are read properly from the MERIS Level 2 imagery. 
Below are last lines of the output of
gdalinfo MER_RR__2PNPDK20110502_144833_000024913102_00097_47956_7579.N1

MDSs are numbered from 1 to 13, then 16 and 19. And in the file MDSs 
14-15 and 17-18 also exist.
I'm not sure if that's the proper place to report this bug but I just 
follow your invitation.

All the best!
Anton

Band 1 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(1)
Band 2 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(2)
Band 3 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(3)
Band 4 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(4)
Band 5 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(5)
Band 6 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(6)
Band 7 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(7)
Band 8 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(8)
Band 9 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(9)
Band 10 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(10)
Band 11 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(11)
Band 12 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(12)
Band 13 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Norm. rho_surf - MDS(13)
Band 14 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = YS, SPM, Rect. Rho- MDS(16)
Band 15 Block=1121x1 Type=UInt16, ColorInterp=Undefined
   Description = Alpha, OPT     - MDS(19)

On 27/06/2011 14:31, Frank Warmerdam wrote:
> Folks,
>
> I would like to prepare a 1.8.1 release candidate in the next couple
> days.
> Developers are encouraged to address any bug fixes they would like
> promptly.
> Is there anything folks feel strongly needs to be addressed in 1.8.1 that
> has not yet made it into the 1.8 branch?
>
> Best regards,
From andyc at comsine.co.uk  Wed Jun 29 08:33:38 2011
From: andyc at comsine.co.uk (andyjc)
Date: Thu Jun 30 07:52:29 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
In-Reply-To: <4DA554EF.6090501@t-kartor.se>
References: <4DA554EF.6090501@t-kartor.se>
Message-ID: <1309350818027-6528744.post@n2.nabble.com>

Hi Andreas,

What URL did you eventually use to download the GDAL native libraries?  I
only ask because the java.net website seems to be up the creak, with every
page reporting:

10.5.4 503 Service Unavailable

The server is currently unable to handle the request due to a temporary
overloading or maintenance of the server.... etc

Is there anywhere else they can be downloaded?

Regards,

Andy

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-Native-Libraries-1-4-5b-for-Linux64-not-available-tp6268043p6528744.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Wed Jun 29 09:43:11 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 30 09:05:52 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
In-Reply-To: <1309350818027-6528744.post@n2.nabble.com>
References: <4DA554EF.6090501@t-kartor.se>
	<1309350818027-6528744.post@n2.nabble.com>
Message-ID: <1309354991.4e0b2bef64f3e@webmail.free.fr>

Selon andyjc <andyc@comsine.co.uk>:

> Hi Andreas,
>
> What URL did you eventually use to download the GDAL native libraries?  I
> only ask because the java.net website seems to be up the creak, with every
> page reporting:
>
> 10.5.4 503 Service Unavailable
>
> The server is currently unable to handle the request due to a temporary
> overloading or maintenance of the server.... etc
>
> Is there anywhere else they can be downloaded?

Those binaries have not been produced by the GDAL project, but by the Image I/O
Ext project instead. So it's better to ask to them. But I believe the latest
release of Image I/O Ext has upgrade to GDAL 1.7.3, so that might be better
targetting that version instead of the older one that used GDAL 1.4.5 + patches


>
> Regards,
>
> Andy
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-Native-Libraries-1-4-5b-for-Linux64-not-available-tp6268043p6528744.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From daniele.romagnoli at geo-solutions.it  Wed Jun 29 10:36:55 2011
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu Jun 30 10:02:21 2011
Subject: [gdal-dev] GDAL Native Libraries 1.4.5b for Linux64 not available
In-Reply-To: <1309354991.4e0b2bef64f3e@webmail.free.fr>
References: <4DA554EF.6090501@t-kartor.se>
	<1309350818027-6528744.post@n2.nabble.com>
	<1309354991.4e0b2bef64f3e@webmail.free.fr>
Message-ID: <BANLkTi=6zAN6czb3uP0-AiXjt2Er9NkYww@mail.gmail.com>

Hi Andy,
I think it's the first time that the whole java.net is down. (Unluckily, our
ImageI/O-Ext project is hosted there).
Looking for info on IRC and Twitter [1], I have found that the cooling
system on their data center is down.
Then they have turned off all the sites :(
I hope it will be back soon. In the meantime, if you are in hurry and you
quickly need the native libraries, I can provide them to you.

Please, let me know.
Best Regards,
Daniele

[1]: https://twitter.com/#!/projectkenai

On Wed, Jun 29, 2011 at 3:43 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Selon andyjc <andyc@comsine.co.uk>:
>
> > Hi Andreas,
> >
> > What URL did you eventually use to download the GDAL native libraries?  I
> > only ask because the java.net website seems to be up the creak, with
> every
> > page reporting:
> >
> > 10.5.4 503 Service Unavailable
> >
> > The server is currently unable to handle the request due to a temporary
> > overloading or maintenance of the server.... etc
> >
> > Is there anywhere else they can be downloaded?
>
> Those binaries have not been produced by the GDAL project, but by the Image
> I/O
> Ext project instead. So it's better to ask to them. But I believe the
> latest
> release of Image I/O Ext has upgrade to GDAL 1.7.3, so that might be better
> targetting that version instead of the older one that used GDAL 1.4.5 +
> patches
>
>
> >
> > Regards,
> >
> > Andy
> >
> > --
> > View this message in context:
> >
>
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-Native-Libraries-1-4-5b-for-Linux64-not-available-tp6268043p6528744.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Ing. Daniele Romagnoli
GeoSolutions S.A.S.
Software Engineer

Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy

phone: +39 0584 962313
fax:      +39 0584 962313

http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.youtube.com/user/GeoSolutionsIT
http://it.linkedin.com/in/danieleromagnoli


-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110629/df91b9b9/attachment-0001.html
From andyc at comsine.co.uk  Wed Jun 29 12:15:02 2011
From: andyc at comsine.co.uk (andyjc)
Date: Thu Jun 30 11:45:36 2011
Subject: [gdal-dev] Re: GDAL Native Libraries 1.4.5b for Linux64 not
	available
In-Reply-To: <BANLkTi=6zAN6czb3uP0-AiXjt2Er9NkYww@mail.gmail.com>
References: <4DA554EF.6090501@t-kartor.se>
	<1309350818027-6528744.post@n2.nabble.com>
	<1309354991.4e0b2bef64f3e@webmail.free.fr>
	<BANLkTi=6zAN6czb3uP0-AiXjt2Er9NkYww@mail.gmail.com>
Message-ID: <1309364102337-6529632.post@n2.nabble.com>

Hi Daniele,

Nice detective work!  Good to know the reason for the outage.

You're very kind to offer the libraries yourself.  If java.net haven't
solved their cooling issues by tomorrow, I'd be keen to take you up.

Even - thanks for the tip about GDAL 1.7.3 for the latest version of
imageIO-ext.  At the moment, I'm simply following the GS 2.2 instructions
which links to version 1.0.8 of ImageIO-ext (both stable and latest builds). 
Do you know if there's a target version of Geoserver which will use
ImageIO-ext 1.1?

Regards,

Andy


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-Native-Libraries-1-4-5b-for-Linux64-not-available-tp6268043p6529632.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From daniele.romagnoli at geo-solutions.it  Wed Jun 29 12:23:40 2011
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu Jun 30 11:54:41 2011
Subject: [gdal-dev] Re: GDAL Native Libraries 1.4.5b for Linux64 not
	available
In-Reply-To: <1309364102337-6529632.post@n2.nabble.com>
References: <4DA554EF.6090501@t-kartor.se>
	<1309350818027-6528744.post@n2.nabble.com>
	<1309354991.4e0b2bef64f3e@webmail.free.fr>
	<BANLkTi=6zAN6czb3uP0-AiXjt2Er9NkYww@mail.gmail.com>
	<1309364102337-6529632.post@n2.nabble.com>
Message-ID: <BANLkTi=ftVxJd04xSTtfyenYgW7eudWL2A@mail.gmail.com>

Hi again Andy,

On Wed, Jun 29, 2011 at 6:15 PM, andyjc <andyc@comsine.co.uk> wrote:

> Hi Daniele,
>
> Nice detective work!

:-)


> Good to know the reason for the outage.
>


>
> You're very kind to offer the libraries yourself.  If java.net haven't
> solved their cooling issues by tomorrow, I'd be keen to take you up.
>
> Even - thanks for the tip about GDAL 1.7.3 for the latest version of
> imageIO-ext.  At the moment, I'm simply following the GS 2.2 instructions
> which links to version 1.0.8 of ImageIO-ext (both stable and latest
> builds).
> Do you know if there's a target version of Geoserver which will use
> ImageIO-ext 1.1?
>

Yesterday, I have committed an update for GeoTools 8.x to use the latest
ImageIO-Ext 1.1.0.
GeoServer 2.2 is based on GeoTools 8. Note that actually there isn't any
released version of GT 8.x nor GS 2.2. Right now, they are still trunk.

However, my intention is to propose to the GeoTools community, the alignment
of GT 2.7 - GS 2.1 to ImageIO-Ext 1.1.0 too (Whilst actually they use
ImageIO-Ext 1.0.8), after some usage on trunk. Hope this helps.

In case you have more questions, I would suggest to move our future
conversations to the GT or GS mailing list instead of this one which is
related to gdal development.
Best Regards,
Daniele



>
> Regards,
>
> Andy
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-Native-Libraries-1-4-5b-for-Linux64-not-available-tp6268043p6529632.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Ing. Daniele Romagnoli
GeoSolutions S.A.S.
Software Engineer

Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy

phone: +39 0584 962313
fax:      +39 0584 962313

http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.youtube.com/user/GeoSolutionsIT
http://it.linkedin.com/in/danieleromagnoli


-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110629/1d15a589/attachment.html
From even.rouault at mines-paris.org  Wed Jun 29 13:45:04 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 30 13:20:41 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Advance Warning
In-Reply-To: <4E0AC3C4.2080805@nersc.no>
References: <4E087806.5030405@pobox.com> <4E0A2C31.8020505@gmx.net>
	<4E0AC3C4.2080805@nersc.no>
Message-ID: <201106291945.04128.even.rouault@mines-paris.org>

Le mercredi 29 juin 2011 08:18:44, Anton Korosov a ?crit :
> Hi Frank!
> 
> There is a bug in the current Envisat driver which could be fixed in 1.8.1.
> Not all bands (MDS) are read properly from the MERIS Level 2 imagery.
> Below are last lines of the output of
> gdalinfo MER_RR__2PNPDK20110502_144833_000024913102_00097_47956_7579.N1
> 
> MDSs are numbered from 1 to 13, then 16 and 19. And in the file MDSs
> 14-15 and 17-18 also exist.
> I'm not sure if that's the proper place to report this bug but I just
> follow your invitation.
> 

Did you search in GDAL Trac if such a bug has been already reported ? If there 
is none related, you might want to create one with all necessary information 
(mainly the description of your email + a link to / attachment of a publicly 
available dataset that shows the issue). 

> All the best!
> Anton
> 
> Band 1 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(1)
> Band 2 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(2)
> Band 3 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(3)
> Band 4 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(4)
> Band 5 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(5)
> Band 6 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(6)
> Band 7 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(7)
> Band 8 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(8)
> Band 9 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(9)
> Band 10 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(10)
> Band 11 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(11)
> Band 12 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(12)
> Band 13 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Norm. rho_surf - MDS(13)
> Band 14 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = YS, SPM, Rect. Rho- MDS(16)
> Band 15 Block=1121x1 Type=UInt16, ColorInterp=Undefined
>    Description = Alpha, OPT     - MDS(19)
> 
> On 27/06/2011 14:31, Frank Warmerdam wrote:
> > Folks,
> > 
> > I would like to prepare a 1.8.1 release candidate in the next couple
> > days.
> > Developers are encouraged to address any bug fixes they would like
> > promptly.
> > Is there anything folks feel strongly needs to be addressed in 1.8.1 that
> > has not yet made it into the 1.8 branch?
> > 
> > Best regards,
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Jun 29 13:53:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 30 13:29:09 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Advance Warning
In-Reply-To: <4E0A2C31.8020505@gmx.net>
References: <4E087806.5030405@pobox.com> <4E0A2C31.8020505@gmx.net>
Message-ID: <201106291953.06038.even.rouault@mines-paris.org>

Le mardi 28 juin 2011 21:32:01, Armin Burger a ?crit :
> Frank
> 
> a functionality that I would find useful in combination with clients
> like ArcGIS or Erdas are the Erdas overviews in *.rrd files. When
> creating overviews with gdaladdo using the "--config USE_RRD YES"
> option, aux files instead of rrd files are created. They are not fully
> recognized by ArcGis/Erdas, depending on the image format.

I'm afraid I know very little of the subtleties of Erdas overviews, but I see 
that the HFA_USE_RRD config option can also be set to YES and produces a .rrd 
file. Perhaps this is was you are looking for.  See 
http://gdal.org/frmt_hfa.html . I've found also a past thread where this is 
somehow discussed : http://www.mail-archive.com/gdal-
dev@lists.osgeo.org/msg00129.html
From pramsey at cleverelephant.ca  Wed Jun 29 15:56:37 2011
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu Jun 30 15:39:33 2011
Subject: [gdal-dev] Geometry as EWKB (PostGIS)
Message-ID: <BANLkTikiQUguJkZsXdnZ+kujx2vQktJLDg@mail.gmail.com>

Hi all (Evan!):

In my FGDB project, the participants compared a file I generated with
FGDB>PostGIS>FGDB and noticed that the coordinates had drifted a
little in some cases. Turns out, the PostGIS OGR driver using WKT as
the transit format, so that's allowing occasional coordinate drift.
I'd like to write up an EWKB encoder for OGR geometries (or maybe add
an option to the current encoder to generate EWKB?). Could you
recommend whether I should do another big utility method like the
shapeBuffer code, or a method on the OGRGeometry? whether you prefer
an alteration to existing WKB writer or a separate code path?

I want to avoid what happened last time, having to re-jig the whole
thing at the end.

Paul
From warmerdam at pobox.com  Wed Jun 29 16:04:07 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun 30 15:47:31 2011
Subject: [gdal-dev] Geometry as EWKB (PostGIS)
In-Reply-To: <BANLkTikiQUguJkZsXdnZ+kujx2vQktJLDg@mail.gmail.com>
References: <BANLkTikiQUguJkZsXdnZ+kujx2vQktJLDg@mail.gmail.com>
Message-ID: <4E0B8537.4020402@pobox.com>

On 11-06-29 03:56 PM, Paul Ramsey wrote:
> Hi all (Evan!):
>
> In my FGDB project, the participants compared a file I generated with
> FGDB>PostGIS>FGDB and noticed that the coordinates had drifted a
> little in some cases. Turns out, the PostGIS OGR driver using WKT as
> the transit format, so that's allowing occasional coordinate drift.
> I'd like to write up an EWKB encoder for OGR geometries (or maybe add
> an option to the current encoder to generate EWKB?). Could you
> recommend whether I should do another big utility method like the
> shapeBuffer code, or a method on the OGRGeometry? whether you prefer
> an alteration to existing WKB writer or a separate code path?
>
> I want to avoid what happened last time, having to re-jig the whole
> thing at the end.

Paul,

I think, perhaps, that in trunk and perhaps 1.8.0 EWKB is already used.
I based this partly on the following changeset.  I imagine Even will fill
in the details.

   http://trac.osgeo.org/gdal/changeset/20697/trunk/gdal/ogr/ogrsf_frmts/pg

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From armin.burger at gmx.net  Wed Jun 29 16:17:21 2011
From: armin.burger at gmx.net (Armin Burger)
Date: Thu Jun 30 16:01:33 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Advance Warning
In-Reply-To: <201106291953.06038.even.rouault@mines-paris.org>
References: <4E087806.5030405@pobox.com> <4E0A2C31.8020505@gmx.net>
	<201106291953.06038.even.rouault@mines-paris.org>
Message-ID: <4E0B8851.5050409@gmx.net>

On 29/06/2011 19:53, Even Rouault wrote:
> Le mardi 28 juin 2011 21:32:01, Armin Burger a ?crit :
>> Frank
>>
>> a functionality that I would find useful in combination with clients
>> like ArcGIS or Erdas are the Erdas overviews in *.rrd files. When
>> creating overviews with gdaladdo using the "--config USE_RRD YES"
>> option, aux files instead of rrd files are created. They are not fully
>> recognized by ArcGis/Erdas, depending on the image format.
>
> I'm afraid I know very little of the subtleties of Erdas overviews, but I see
> that the HFA_USE_RRD config option can also be set to YES and produces a .rrd
> file. Perhaps this is was you are looking for.  See
> http://gdal.org/frmt_hfa.html . I've found also a past thread where this is
> somehow discussed : http://www.mail-archive.com/gdal-
> dev@lists.osgeo.org/msg00129.html

Even

thanks a lot for pointing me to the thread. I was not aware of this 
double option
  --config HFA_USE_RRD YES --config USE_RRD YES

since the documentation and the --help of gdaladdo just mention the 
USE_RRD option, which puts the overview inside a single big .aux file. 
It looks a bit like the small .aux file created with the 2 config 
options contains also image statistics, but I will check this tomorrow 
at work.

Armin

From pramsey at opengeo.org  Wed Jun 29 16:20:27 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu Jun 30 16:04:44 2011
Subject: [gdal-dev] Geometry as EWKB (PostGIS)
In-Reply-To: <4E0B8537.4020402@pobox.com>
References: <BANLkTikiQUguJkZsXdnZ+kujx2vQktJLDg@mail.gmail.com>
	<4E0B8537.4020402@pobox.com>
Message-ID: <BANLkTikJamSv_0R87S6fNuwPUigMd7Y-rQ@mail.gmail.com>

I'll read closer. Indeed, I see EWKBToGeometry is already there.
However, I'm pretty sure that feature *creation* still uses WKT, which
would explain the drift in my round-trip case. So, a different patch
:) that should not require any guidance about where's and how's.
Thanks Frank,
P.

On Wed, Jun 29, 2011 at 1:04 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 11-06-29 03:56 PM, Paul Ramsey wrote:
>>
>> Hi all (Evan!):
>>
>> In my FGDB project, the participants compared a file I generated with
>> FGDB>PostGIS>FGDB and noticed that the coordinates had drifted a
>> little in some cases. Turns out, the PostGIS OGR driver using WKT as
>> the transit format, so that's allowing occasional coordinate drift.
>> I'd like to write up an EWKB encoder for OGR geometries (or maybe add
>> an option to the current encoder to generate EWKB?). Could you
>> recommend whether I should do another big utility method like the
>> shapeBuffer code, or a method on the OGRGeometry? whether you prefer
>> an alteration to existing WKB writer or a separate code path?
>>
>> I want to avoid what happened last time, having to re-jig the whole
>> thing at the end.
>
> Paul,
>
> I think, perhaps, that in trunk and perhaps 1.8.0 EWKB is already used.
> I based this partly on the following changeset. ?I imagine Even will fill
> in the details.
>
> ?http://trac.osgeo.org/gdal/changeset/20697/trunk/gdal/ogr/ogrsf_frmts/pg
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From even.rouault at mines-paris.org  Wed Jun 29 16:29:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 30 16:13:57 2011
Subject: [gdal-dev] Geometry as EWKB (PostGIS)
In-Reply-To: <BANLkTikJamSv_0R87S6fNuwPUigMd7Y-rQ@mail.gmail.com>
References: <BANLkTikiQUguJkZsXdnZ+kujx2vQktJLDg@mail.gmail.com>
	<4E0B8537.4020402@pobox.com>
	<BANLkTikJamSv_0R87S6fNuwPUigMd7Y-rQ@mail.gmail.com>
Message-ID: <201106292229.00508.even.rouault@mines-paris.org>

Le mercredi 29 juin 2011 22:20:27, Paul Ramsey a ?crit :
> I'll read closer. Indeed, I see EWKBToGeometry is already there.
> However, I'm pretty sure that feature *creation* still uses WKT, which
> would explain the drift in my round-trip case. So, a different patch
> 
> :) that should not require any guidance about where's and how's.

Yes, when reading, geometries should be returned as EWKB since OGR 1.8.0.

AFAIR, for the writing side, if you use the --config PG_USE_COPY YES 
configuration option (which uses COPY instead of INSERT TO), the geometry will 
be passed as EWKB. But it would be reasonable to use EWKB too.

> 
> Thanks Frank,
> P.
> 
> On Wed, Jun 29, 2011 at 1:04 PM, Frank Warmerdam <warmerdam@pobox.com> 
wrote:
> > On 11-06-29 03:56 PM, Paul Ramsey wrote:
> >> Hi all (Evan!):
> >> 
> >> In my FGDB project, the participants compared a file I generated with
> >> FGDB>PostGIS>FGDB and noticed that the coordinates had drifted a
> >> little in some cases. Turns out, the PostGIS OGR driver using WKT as
> >> the transit format, so that's allowing occasional coordinate drift.
> >> I'd like to write up an EWKB encoder for OGR geometries (or maybe add
> >> an option to the current encoder to generate EWKB?). Could you
> >> recommend whether I should do another big utility method like the
> >> shapeBuffer code, or a method on the OGRGeometry? whether you prefer
> >> an alteration to existing WKB writer or a separate code path?
> >> 
> >> I want to avoid what happened last time, having to re-jig the whole
> >> thing at the end.
> > 
> > Paul,
> > 
> > I think, perhaps, that in trunk and perhaps 1.8.0 EWKB is already used.
> > I based this partly on the following changeset.  I imagine Even will fill
> > in the details.
> > 
> >  http://trac.osgeo.org/gdal/changeset/20697/trunk/gdal/ogr/ogrsf_frmts/pg
> > 
> > Best regards,
> > --
> > ---------------------------------------+---------------------------------
> > ----- I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Programmer for Rent
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Jun 29 16:37:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jun 30 16:23:20 2011
Subject: [gdal-dev] Motion: Commit Access for Antonio Valentino
Message-ID: <201106292237.52641.even.rouault@mines-paris.org>

Motion: Extend GDAL/OGR Commit Access to Antonio Valentino

---

Hi,

Antonio, a regular contributor to discussions on the mailing list, has 
submitted quite a few good quality patches, mainly related to SAR formats, 
over the last few months whose several have already been applied. See the 
following for a non-exhaustive list of his contributions :

http://trac.osgeo.org/gdal/ticket/3160
http://trac.osgeo.org/gdal/ticket/3367
http://trac.osgeo.org/gdal/ticket/4105
http://trac.osgeo.org/gdal/ticket/4136
http://trac.osgeo.org/gdal/ticket/2412

It would be convenient to give him direct commit access to subversion.

Antonio, could you reply to this message indicating your agreement to the
guidelines listed in:

    http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start voting with my support:

+1

Best regards,
From warmerdam at pobox.com  Wed Jun 29 17:21:56 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jun 30 17:09:54 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Antonio Valentino
In-Reply-To: <201106292237.52641.even.rouault@mines-paris.org>
References: <201106292237.52641.even.rouault@mines-paris.org>
Message-ID: <4E0B9774.2050500@pobox.com>

On 11-06-29 04:37 PM, Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Antonio Valentino

+1 Frank


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hobu.inc at gmail.com  Wed Jun 29 17:47:42 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Jun 30 17:37:06 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Antonio Valentino
In-Reply-To: <4E0B9774.2050500@pobox.com>
References: <201106292237.52641.even.rouault@mines-paris.org>
	<4E0B9774.2050500@pobox.com>
Message-ID: <54FF6903-77E2-4027-A99C-E99366E3E961@gmail.com>



On Jun 29, 2011, at 4:21 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:

> On 11-06-29 04:37 PM, Even Rouault wrote:
>> Motion: Extend GDAL/OGR Commit Access to Antonio Valentino
> 
> +1 Frank

+1 Howard
From antonio.valentino at tiscali.it  Thu Jun 30 03:03:06 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Fri Jul  1 03:22:37 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Antonio Valentino
In-Reply-To: <201106292237.52641.even.rouault@mines-paris.org>
References: <201106292237.52641.even.rouault@mines-paris.org>
Message-ID: <4E0C1FAA.5010105@tiscali.it>

Hi all,

Il 29/06/2011 22:37, Even Rouault ha scritto:
> Motion: Extend GDAL/OGR Commit Access to Antonio Valentino
> 
> ---
> 
> Hi,
> 
> Antonio, a regular contributor to discussions on the mailing list, has 
> submitted quite a few good quality patches, mainly related to SAR formats, 
> over the last few months whose several have already been applied. See the 
> following for a non-exhaustive list of his contributions :
> 
> http://trac.osgeo.org/gdal/ticket/3160
> http://trac.osgeo.org/gdal/ticket/3367
> http://trac.osgeo.org/gdal/ticket/4105
> http://trac.osgeo.org/gdal/ticket/4136
> http://trac.osgeo.org/gdal/ticket/2412
> 
> It would be convenient to give him direct commit access to subversion.
> 
> Antonio, could you reply to this message indicating your agreement to the
> guidelines listed in:
> 
>     http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start voting with my support:
> 
> +1
> 
> Best regards,

Thank you Even.
I've read the committer guidelines and I agree with them.

regards

-- 
Antonio Valentino
