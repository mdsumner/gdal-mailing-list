From craig.destigter at koordinates.com  Mon Oct  1 15:32:24 2018
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Tue, 2 Oct 2018 11:32:24 +1300
Subject: [gdal-dev] Refactoring the test suite with pytest
Message-ID: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>

Hi folks

I've been looking at a potential large change to the GDAL test suite,
replacing some of the worst parts. I thought I'd bring it up for discussion
here, in case anyone has any wisdom or strong feelings about it.

I've made a ticket at https://github.com/OSGeo/gdal/issues/949 .

Essentially my plan is to use pytest <https://docs.pytest.org/en/latest/>
as both a test runner and a helper library. We would remove or replace
large parts of the `gdaltest` utilities with pytest equivalents.

To give an idea of the main changes, this code:

if ds.GetLayer(0).GetSpatialRef() is not None:
>     gdaltest.post_reason('did not get expected spatial ref')
>     return 'fail'
>
would change to:

> assert ds.GetLayer(0).GetSpatialRef() is None, 'did not get expected
> spatial ref'
>

The pytest runner gives contextual tracebacks from assert statements, as
well as relevant variables and line numbers.

Other changes:
 * The `gdaltest_list` and the `__main__` entry point at the bottom of each
file will be removed. Some tests will be renamed if they don't already
start with `test_`.
 * The `<name>_cleanup` fixture will be turned into a module-scoped fixture
<https://docs.pytest.org/en/latest/fixture.html#scope-sharing-a-fixture-instance-across-tests-in-a-class-module-or-session>.
This allows users to run any number of tests in the module, and the cleanup
fixture will be invoked once after all of them are finished. If I find
corresponding setup functions I will make them into fixtures too, but I
haven't seen those so far in my digging.

Other, more intrusive changes are possible but this is what I'm considering
targeting as a first step. It is fairly straightforward to automate this
change; I have a script in progress already to do that.

I intend to make a compatibility shim for the old-style tests that can't
easily be automatically updated. The shim would be a decorator, perhaps
called `@old_test`, which would take 'skip' or 'fail' return values from
tests and turn them into the appropriate `assert False` or `pytest.skip()`
calls.

I don't intend to make any changes to the C++ tests.

A couple of complicating factors to be aware of:

   - pytest only supports python 2.7+. The tests already only run in 2.7+
   in Travis, so no big deal there. I think it's perfectly reasonable to only
   support 2.7+ these days, given that 2.6 has been unsupported since 2013,
   but I thought I'd mention it.
   - pytest has no builtin way of *ordering* tests. It is assumed that
   tests are independent of each other. In practice, all tests are run in
   alphabetical name order within a given module. It appears to me that some
   of GDAL's tests are *not* independent of each other within the same
   module. However, most are already in alphabetical name order, so I don't
   believe this is a problem; we are not worse off with pytest than previously.


Please let me know your thoughts.

-- 
Regards,
Craig de Stigter

Developer
Koordinates

+64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181002/c6dfe270/attachment.html>

From schwehr at gmail.com  Mon Oct  1 22:05:49 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 1 Oct 2018 22:05:49 -0700
Subject: [gdal-dev] Refactoring the test suite with pytest
In-Reply-To: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
References: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
Message-ID: <CACmBxyvfEdFCwkv4vZ0vdNh8+vHPrwYZ04-=-UxYU=H5TAfGVg@mail.gmail.com>

I am definitely interested in improvements to the test infrastructure, but
always fear slowing down Even or getting bogged down in a massive effort.

In addition to working in the normal osgeo github world...

My current state: I started "autotest2
<https://github.com/schwehr/gdal-autotest2/tree/master/python>" back in
2013-14 after being unable to make autotest work for me and released much
of it as opensource.  It's unittest based for python and GoogleTest/gmock
for c++.  The Java isn't very far along, but it's Truth + JUnit4.  It's in
use inside google typically running every 10 to 60 minutes depending on
what's going on and a couple times a day in ASAN, MSAN, and TSAN modes.  On
the python side, it doesn't cover that much compared to the full python
test suite in autotest.  But in doing rewrites, I did have to make each
test independent.  I also have to allow control of where tests write
temporary data as I work in a system where the source tree is read only.  I
am probably close to making the tests python 3.7+ only (but likely to work
on 3.5+).  Whenever I start using a driver for the first time, I try to
rewrite the python test and create at least basic C++ tests, but I never
have enough time to do as complete of a job as I would like (err... like
the partially done pull request I have in to Proj).

You are welcome to use anything in autotest2 for the core gdal tree if it
fits.  I (meaning Google) are happy to contribute any or all of the code to
the GDAL tree under the GDAL license.

On Mon, Oct 1, 2018 at 3:32 PM Craig de Stigter <
craig.destigter at koordinates.com> wrote:

> Hi folks
>
> I've been looking at a potential large change to the GDAL test suite,
> replacing some of the worst parts. I thought I'd bring it up for discussion
> here, in case anyone has any wisdom or strong feelings about it.
>
> I've made a ticket at https://github.com/OSGeo/gdal/issues/949 .
>
> Essentially my plan is to use pytest <https://docs.pytest.org/en/latest/>
> as both a test runner and a helper library. We would remove or replace
> large parts of the `gdaltest` utilities with pytest equivalents.
>
> To give an idea of the main changes, this code:
>
> if ds.GetLayer(0).GetSpatialRef() is not None:
>>     gdaltest.post_reason('did not get expected spatial ref')
>>     return 'fail'
>>
> would change to:
>
>> assert ds.GetLayer(0).GetSpatialRef() is None, 'did not get expected
>> spatial ref'
>>
>
> The pytest runner gives contextual tracebacks from assert statements, as
> well as relevant variables and line numbers.
>
> Other changes:
>  * The `gdaltest_list` and the `__main__` entry point at the bottom of
> each file will be removed. Some tests will be renamed if they don't already
> start with `test_`.
>  * The `<name>_cleanup` fixture will be turned into a module-scoped
> fixture
> <https://docs.pytest.org/en/latest/fixture.html#scope-sharing-a-fixture-instance-across-tests-in-a-class-module-or-session>.
> This allows users to run any number of tests in the module, and the cleanup
> fixture will be invoked once after all of them are finished. If I find
> corresponding setup functions I will make them into fixtures too, but I
> haven't seen those so far in my digging.
>
> Other, more intrusive changes are possible but this is what I'm
> considering targeting as a first step. It is fairly straightforward to
> automate this change; I have a script in progress already to do that.
>
> I intend to make a compatibility shim for the old-style tests that can't
> easily be automatically updated. The shim would be a decorator, perhaps
> called `@old_test`, which would take 'skip' or 'fail' return values from
> tests and turn them into the appropriate `assert False` or `pytest.skip()`
> calls.
>
> I don't intend to make any changes to the C++ tests.
>
> A couple of complicating factors to be aware of:
>
>    - pytest only supports python 2.7+. The tests already only run in 2.7+
>    in Travis, so no big deal there. I think it's perfectly reasonable to only
>    support 2.7+ these days, given that 2.6 has been unsupported since 2013,
>    but I thought I'd mention it.
>    - pytest has no builtin way of *ordering* tests. It is assumed that
>    tests are independent of each other. In practice, all tests are run in
>    alphabetical name order within a given module. It appears to me that some
>    of GDAL's tests are *not* independent of each other within the same
>    module. However, most are already in alphabetical name order, so I don't
>    believe this is a problem; we are not worse off with pytest than previously.
>
>
> Please let me know your thoughts.
>
> --
> Regards,
> Craig de Stigter
>
> Developer
> Koordinates
>
> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
> <https://twitter.com/koordinates>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181001/e16e2b73/attachment.html>

From craig.destigter at koordinates.com  Tue Oct  2 02:04:49 2018
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Tue, 2 Oct 2018 22:04:49 +1300
Subject: [gdal-dev] Refactoring the test suite with pytest
In-Reply-To: <CACmBxyvfEdFCwkv4vZ0vdNh8+vHPrwYZ04-=-UxYU=H5TAfGVg@mail.gmail.com>
References: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
 <CACmBxyvfEdFCwkv4vZ0vdNh8+vHPrwYZ04-=-UxYU=H5TAfGVg@mail.gmail.com>
Message-ID: <CAF1M8pd=fLrjPo4NihisAqGuiz0tO-pbYJC7iPDT=2CThLzVVA@mail.gmail.com>

Thanks. Are those tests entirely based on the osgeo git tests, or are there
some extra ones? It might be worth getting the extra ones in at least.


On Tue, 2 Oct 2018 at 18:06, Kurt Schwehr <schwehr at gmail.com> wrote:

> I am definitely interested in improvements to the test infrastructure, but
> always fear slowing down Even or getting bogged down in a massive effort.
>
> In addition to working in the normal osgeo github world...
>
> My current state: I started "autotest2
> <https://github.com/schwehr/gdal-autotest2/tree/master/python>" back in
> 2013-14 after being unable to make autotest work for me and released much
> of it as opensource.  It's unittest based for python and GoogleTest/gmock
> for c++.  The Java isn't very far along, but it's Truth + JUnit4.  It's in
> use inside google typically running every 10 to 60 minutes depending on
> what's going on and a couple times a day in ASAN, MSAN, and TSAN modes.  On
> the python side, it doesn't cover that much compared to the full python
> test suite in autotest.  But in doing rewrites, I did have to make each
> test independent.  I also have to allow control of where tests write
> temporary data as I work in a system where the source tree is read only.  I
> am probably close to making the tests python 3.7+ only (but likely to work
> on 3.5+).  Whenever I start using a driver for the first time, I try to
> rewrite the python test and create at least basic C++ tests, but I never
> have enough time to do as complete of a job as I would like (err... like
> the partially done pull request I have in to Proj).
>
> You are welcome to use anything in autotest2 for the core gdal tree if it
> fits.  I (meaning Google) are happy to contribute any or all of the code to
> the GDAL tree under the GDAL license.
>
> On Mon, Oct 1, 2018 at 3:32 PM Craig de Stigter <
> craig.destigter at koordinates.com> wrote:
>
>> Hi folks
>>
>> I've been looking at a potential large change to the GDAL test suite,
>> replacing some of the worst parts. I thought I'd bring it up for discussion
>> here, in case anyone has any wisdom or strong feelings about it.
>>
>> I've made a ticket at https://github.com/OSGeo/gdal/issues/949 .
>>
>> Essentially my plan is to use pytest <https://docs.pytest.org/en/latest/>
>> as both a test runner and a helper library. We would remove or replace
>> large parts of the `gdaltest` utilities with pytest equivalents.
>>
>> To give an idea of the main changes, this code:
>>
>> if ds.GetLayer(0).GetSpatialRef() is not None:
>>>     gdaltest.post_reason('did not get expected spatial ref')
>>>     return 'fail'
>>>
>> would change to:
>>
>>> assert ds.GetLayer(0).GetSpatialRef() is None, 'did not get expected
>>> spatial ref'
>>>
>>
>> The pytest runner gives contextual tracebacks from assert statements, as
>> well as relevant variables and line numbers.
>>
>> Other changes:
>>  * The `gdaltest_list` and the `__main__` entry point at the bottom of
>> each file will be removed. Some tests will be renamed if they don't already
>> start with `test_`.
>>  * The `<name>_cleanup` fixture will be turned into a module-scoped
>> fixture
>> <https://docs.pytest.org/en/latest/fixture.html#scope-sharing-a-fixture-instance-across-tests-in-a-class-module-or-session>.
>> This allows users to run any number of tests in the module, and the cleanup
>> fixture will be invoked once after all of them are finished. If I find
>> corresponding setup functions I will make them into fixtures too, but I
>> haven't seen those so far in my digging.
>>
>> Other, more intrusive changes are possible but this is what I'm
>> considering targeting as a first step. It is fairly straightforward to
>> automate this change; I have a script in progress already to do that.
>>
>> I intend to make a compatibility shim for the old-style tests that can't
>> easily be automatically updated. The shim would be a decorator, perhaps
>> called `@old_test`, which would take 'skip' or 'fail' return values from
>> tests and turn them into the appropriate `assert False` or `pytest.skip()`
>> calls.
>>
>> I don't intend to make any changes to the C++ tests.
>>
>> A couple of complicating factors to be aware of:
>>
>>    - pytest only supports python 2.7+. The tests already only run in
>>    2.7+ in Travis, so no big deal there. I think it's perfectly reasonable to
>>    only support 2.7+ these days, given that 2.6 has been unsupported since
>>    2013, but I thought I'd mention it.
>>    - pytest has no builtin way of *ordering* tests. It is assumed that
>>    tests are independent of each other. In practice, all tests are run in
>>    alphabetical name order within a given module. It appears to me that some
>>    of GDAL's tests are *not* independent of each other within the same
>>    module. However, most are already in alphabetical name order, so I don't
>>    believe this is a problem; we are not worse off with pytest than previously.
>>
>>
>> Please let me know your thoughts.
>>
>> --
>> Regards,
>> Craig de Stigter
>>
>> Developer
>> Koordinates
>>
>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
>> <https://twitter.com/koordinates>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> --
> http://schwehr.org
>


-- 
Regards,
Craig

Developer
Koordinates

+64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
<https://twitter.com/koordinates>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181002/e894f914/attachment-0001.html>

From lucadeluge at gmail.com  Tue Oct  2 04:37:26 2018
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Tue, 2 Oct 2018 13:37:26 +0200
Subject: [gdal-dev] kml to wld
Message-ID: <CAK4m-3wRj-eGUGpQMuWuWLhyC3gduAVJtGnstNm=tREQvY2cvw@mail.gmail.com>

Hi all,

I need to use the coordinates information contained in a kml file to
write a wld file.

In the KML I have

<LatLonBox>
    <north>47.551729</north>
    <south>45.438335</south>
    <east>12.736706</east>
    <west>9.670600</west>
    <rotation>-1.35</rotation>
</LatLonBox>

I converted them to UTM WGS84 32N coordinate system

<LatLonBox>
    <north>5273247.79</north>
    <south>5031864.43</south>
    <east>781130.01</east>
    <west>552448.98</west>
    <rotation>-1.35</rotation>
</LatLonBox>

I calculated the resolution doing the differences between north/south
and east/west and I get 251.441 and 238. To have squared pixel I would
set to 250 (maybe it could be better to use 240?).

with this info I created the wld file

250
-1.35
-1.35
250
552448.98
5273247.79

The reprojection works quite well, but it seems shifted by some
pixels, does the procedure make sense or is completely wrong?

PS
With latlong values the image is located in a wrong place, but the wld
seems correct, maybe the pixel value is wrong.

0.002201452083
-1.35
-1.35
-0.002201452083
9.670600
47.551729


-- 
ciao
Luca

www.lucadelu.org

From daniele.romagnoli at geo-solutions.it  Tue Oct  2 05:10:28 2018
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Tue, 2 Oct 2018 14:10:28 +0200
Subject: [gdal-dev] kml to wld
In-Reply-To: <CAK4m-3wRj-eGUGpQMuWuWLhyC3gduAVJtGnstNm=tREQvY2cvw@mail.gmail.com>
References: <CAK4m-3wRj-eGUGpQMuWuWLhyC3gduAVJtGnstNm=tREQvY2cvw@mail.gmail.com>
Message-ID: <CAJaHrDyhxT98FyrcCow4YgvWD5RrBKL+1wgwZNm57SMjKUkc_A@mail.gmail.com>

Hi Luca,
actually, the coefficients of a world file aren't simply pixel size and
rotation. Therefore, with a rotation in the mix, you may need to do some
math :(
You may want to take a look a the world file definitions to see what these
6 coeffs represent:
https://en.wikipedia.org/wiki/World_file

I never had to deal with such cases so I can't provide you additional
information.
However, looks like someone else already faced that problem:
https://gis.stackexchange.com/questions/12181/how-to-generate-a-world-file-with-rotation

Hope this provides you some hint to solve the problem.
Regards,
Daniele





On Tue, Oct 2, 2018 at 1:37 PM Luca Delucchi <lucadeluge at gmail.com> wrote:

> Hi all,
>
> I need to use the coordinates information contained in a kml file to
> write a wld file.
>
> In the KML I have
>
> <LatLonBox>
>     <north>47.551729</north>
>     <south>45.438335</south>
>     <east>12.736706</east>
>     <west>9.670600</west>
>     <rotation>-1.35</rotation>
> </LatLonBox>
>
> I converted them to UTM WGS84 32N coordinate system
>
> <LatLonBox>
>     <north>5273247.79</north>
>     <south>5031864.43</south>
>     <east>781130.01</east>
>     <west>552448.98</west>
>     <rotation>-1.35</rotation>
> </LatLonBox>
>
> I calculated the resolution doing the differences between north/south
> and east/west and I get 251.441 and 238. To have squared pixel I would
> set to 250 (maybe it could be better to use 240?).
>
> with this info I created the wld file
>
> 250
> -1.35
> -1.35
> 250
> 552448.98
> 5273247.79
>
> The reprojection works quite well, but it seems shifted by some
> pixels, does the procedure make sense or is completely wrong?
>
> PS
> With latlong values the image is located in a wrong place, but the wld
> seems correct, maybe the pixel value is wrong.
>
> 0.002201452083
> -1.35
> -1.35
> -0.002201452083
> 9.670600
> 47.551729
>
>
> --
> ciao
> Luca
>
> www.lucadelu.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
2016/679 - Regolamento generale sulla protezione dei dati “GDPR”), si
precisa che ogni circostanza inerente alla presente email (il suo
contenuto, gli eventuali allegati, etc.) è un dato la cui conoscenza è
riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
messaggio Le è giunto per errore, è tenuta/o a cancellarlo, ogni altra
operazione è illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is
addressed and may contain information that is privileged, confidential or
otherwise protected from disclosure. We remind that - as provided by
European Regulation 2016/679 “GDPR” - copying, dissemination or use of this
e-mail or the information herein by anyone other than the intended
recipient is prohibited. If you have received this email by mistake, please
notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181002/3313f2fd/attachment.html>

From craig.destigter at koordinates.com  Tue Oct  2 14:45:18 2018
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Wed, 3 Oct 2018 10:45:18 +1300
Subject: [gdal-dev] Refactoring the test suite with pytest
In-Reply-To: <CAF1M8pd=fLrjPo4NihisAqGuiz0tO-pbYJC7iPDT=2CThLzVVA@mail.gmail.com>
References: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
 <CACmBxyvfEdFCwkv4vZ0vdNh8+vHPrwYZ04-=-UxYU=H5TAfGVg@mail.gmail.com>
 <CAF1M8pd=fLrjPo4NihisAqGuiz0tO-pbYJC7iPDT=2CThLzVVA@mail.gmail.com>
Message-ID: <CAF1M8pchwxsUZ42GTZ2ATfSojo1Bex4LshZGVTZsyT0eTJ6QxA@mail.gmail.com>

I've got some initial steps toward this work at
https://github.com/OSGeo/gdal/pull/963

It doesn't have any of the automated conversion yet but I've added a todo
list and am hoping to have something semi-useful running in CI soon.

On Tue, 2 Oct 2018 at 22:04 Craig de Stigter <
craig.destigter at koordinates.com> wrote:

> Thanks. Are those tests entirely based on the osgeo git tests, or are
> there some extra ones? It might be worth getting the extra ones in at least.
>
>
> On Tue, 2 Oct 2018 at 18:06, Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> I am definitely interested in improvements to the test infrastructure,
>> but always fear slowing down Even or getting bogged down in a massive
>> effort.
>>
>> In addition to working in the normal osgeo github world...
>>
>> My current state: I started "autotest2
>> <https://github.com/schwehr/gdal-autotest2/tree/master/python>" back in
>> 2013-14 after being unable to make autotest work for me and released much
>> of it as opensource.  It's unittest based for python and GoogleTest/gmock
>> for c++.  The Java isn't very far along, but it's Truth + JUnit4.  It's in
>> use inside google typically running every 10 to 60 minutes depending on
>> what's going on and a couple times a day in ASAN, MSAN, and TSAN modes.  On
>> the python side, it doesn't cover that much compared to the full python
>> test suite in autotest.  But in doing rewrites, I did have to make each
>> test independent.  I also have to allow control of where tests write
>> temporary data as I work in a system where the source tree is read only.  I
>> am probably close to making the tests python 3.7+ only (but likely to work
>> on 3.5+).  Whenever I start using a driver for the first time, I try to
>> rewrite the python test and create at least basic C++ tests, but I never
>> have enough time to do as complete of a job as I would like (err... like
>> the partially done pull request I have in to Proj).
>>
>> You are welcome to use anything in autotest2 for the core gdal tree if it
>> fits.  I (meaning Google) are happy to contribute any or all of the code to
>> the GDAL tree under the GDAL license.
>>
>> On Mon, Oct 1, 2018 at 3:32 PM Craig de Stigter <
>> craig.destigter at koordinates.com> wrote:
>>
>>> Hi folks
>>>
>>> I've been looking at a potential large change to the GDAL test suite,
>>> replacing some of the worst parts. I thought I'd bring it up for discussion
>>> here, in case anyone has any wisdom or strong feelings about it.
>>>
>>> I've made a ticket at https://github.com/OSGeo/gdal/issues/949 .
>>>
>>> Essentially my plan is to use pytest
>>> <https://docs.pytest.org/en/latest/> as both a test runner and a helper
>>> library. We would remove or replace large parts of the `gdaltest` utilities
>>> with pytest equivalents.
>>>
>>> To give an idea of the main changes, this code:
>>>
>>> if ds.GetLayer(0).GetSpatialRef() is not None:
>>>>     gdaltest.post_reason('did not get expected spatial ref')
>>>>     return 'fail'
>>>>
>>> would change to:
>>>
>>>> assert ds.GetLayer(0).GetSpatialRef() is None, 'did not get expected
>>>> spatial ref'
>>>>
>>>
>>> The pytest runner gives contextual tracebacks from assert statements, as
>>> well as relevant variables and line numbers.
>>>
>>> Other changes:
>>>  * The `gdaltest_list` and the `__main__` entry point at the bottom of
>>> each file will be removed. Some tests will be renamed if they don't already
>>> start with `test_`.
>>>  * The `<name>_cleanup` fixture will be turned into a module-scoped
>>> fixture
>>> <https://docs.pytest.org/en/latest/fixture.html#scope-sharing-a-fixture-instance-across-tests-in-a-class-module-or-session>.
>>> This allows users to run any number of tests in the module, and the cleanup
>>> fixture will be invoked once after all of them are finished. If I find
>>> corresponding setup functions I will make them into fixtures too, but I
>>> haven't seen those so far in my digging.
>>>
>>> Other, more intrusive changes are possible but this is what I'm
>>> considering targeting as a first step. It is fairly straightforward to
>>> automate this change; I have a script in progress already to do that.
>>>
>>> I intend to make a compatibility shim for the old-style tests that can't
>>> easily be automatically updated. The shim would be a decorator, perhaps
>>> called `@old_test`, which would take 'skip' or 'fail' return values from
>>> tests and turn them into the appropriate `assert False` or `pytest.skip()`
>>> calls.
>>>
>>> I don't intend to make any changes to the C++ tests.
>>>
>>> A couple of complicating factors to be aware of:
>>>
>>>    - pytest only supports python 2.7+. The tests already only run in
>>>    2.7+ in Travis, so no big deal there. I think it's perfectly reasonable to
>>>    only support 2.7+ these days, given that 2.6 has been unsupported since
>>>    2013, but I thought I'd mention it.
>>>    - pytest has no builtin way of *ordering* tests. It is assumed that
>>>    tests are independent of each other. In practice, all tests are run in
>>>    alphabetical name order within a given module. It appears to me that some
>>>    of GDAL's tests are *not* independent of each other within the same
>>>    module. However, most are already in alphabetical name order, so I don't
>>>    believe this is a problem; we are not worse off with pytest than previously.
>>>
>>>
>>> Please let me know your thoughts.
>>>
>>> --
>>> Regards,
>>> Craig de Stigter
>>>
>>> Developer
>>> Koordinates
>>>
>>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
>>> <https://twitter.com/koordinates>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> --
>> http://schwehr.org
>>
>
>
> --
> Regards,
> Craig
>
> Developer
> Koordinates
>
> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
> <https://twitter.com/koordinates>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181003/7b89141c/attachment.html>

From jmckenna at gatewaygeomatics.com  Wed Oct  3 05:09:05 2018
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 3 Oct 2018 09:09:05 -0300
Subject: [gdal-dev] Fwd: LizardTech and Extensis Unite as One Company
In-Reply-To: <MWHPR17MB19835AD73C8CCA8A31FBAE91BEE90@MWHPR17MB1983.namprd17.prod.outlook.com>
References: <MWHPR17MB19835AD73C8CCA8A31FBAE91BEE90@MWHPR17MB1983.namprd17.prod.outlook.com>
Message-ID: <278b3d65-b51a-85c8-a78d-af5a54a72e85@gatewaygeomatics.com>

This impacts those using the MrSID SDK with GDAL (I've updated the 
buildhints page at https://trac.osgeo.org/gdal/wiki/MrSID)  -jeff


-------- Forwarded Message --------


Valued MrSID SDK Integrator,

I have some exciting news to share. As a valued MrSID SDK integrator, we 
would like to inform you of a change at Celartem. Today, LizardTech is 
uniting with a Celartem affiliate company— Extensis. GeoExpress, Express 
Server, LizardTech SDK’s and GeoViewer are now part of the Extensis 
suite of solutions.

All business communications and interactions now will be as Extensis as 
the company name (Celartem, Inc. dba Extensis).  To confirm, our SDK 
License Agreements remain valid. Current and future SDK’s will be 
available for download at https://www.extensis.com/support/developers 
with SDK License Agreement acknowledgement.

**

*Why the Union? *

Over the past few years, we’ve seen increasing alignment between 
LizardTech and Extensis solutions and the needs of our respective 
customers. Both companies share a mission to help organizations increase 
the ROI and value of their digital assets and images. Organizations 
today are investing in large-scale imagery of all kinds, including 
photographic, aerial, and spatial, to name a few. Fully leveraging these 
digital files means having an easy and effective way to organize, 
compress, store, find, and distribute them.

With Extensis’ market leadership in digital asset and font management 
solutions combined with LizardTech’s state-of-the-art image compression 
technology, the united company is uniquely situated to provide 
comprehensive solutions to digital asset challenges that no other 
company can match. This union strengthens our ability to support our 
customers’ success and give them easier access to additional solutions 
for maximizing the value of digital assets of all kinds.

Please contact me at jyoung at extensis.com <mailto:jyoung at extensis.com> if 
you have any questions regarding this exciting unity under One Company 
Brand …… Extensis.

Regards,





From andreaerdna at libero.it  Wed Oct  3 11:22:12 2018
From: andreaerdna at libero.it (andreaerdna)
Date: Wed, 3 Oct 2018 11:22:12 -0700 (MST)
Subject: [gdal-dev] Deleting raster layers from geopackages
Message-ID: <1538590932736-0.post@n6.nabble.com>

Hi,
from what I've read in bug report #7013 [1] and in the message of the commit
fixing it [2],  I thought the problem of deleting a raster layer, including
all of its references in other tables, from a geopackage had been solved.
I've also read previous thread on this list [3] [4] that left me a little
confused.

However, I tried to delete a raster layer name test_dtm from test.gpkg using
(with GDAL 2.3.1 and 2.4.0dev from gisinternal):

ogrinfo -sql "DROP TABLE test_dtm" test.gpkg

but it only deleted the test_dtm table without also deleting the
corresponding records in gpkg_contents, gpkg_tile_matrix, gpkg_extensions,
etc.

There is probably something that I did not quite understand in this regard.

Any help?

Andrea Giudiceandrea

[1] "Make it easy to delete raster layers from GeoPackage"
https://trac.osgeo.org/gdal/ticket/7013
[2] "GPKG: make DELLAYER:rastertable / DROP TABLE rastertable delete the
table and all references to it"
https://github.com/OSGeo/gdal/commit/46dff90cb433ff27c83a0632dc5f6c5cf331187d
[3]
http://osgeo-org.1560.x6.nabble.com/gdal-dev-GPKG-Drop-table-but-how-to-drop-the-rest-td5288501.html
[4]
http://osgeo-org.1560.x6.nabble.com/gdal-dev-How-to-drop-a-raster-layer-from-GeoPackage-td5332121.html




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Oct  3 11:56:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 03 Oct 2018 20:56:53 +0200
Subject: [gdal-dev] Deleting raster layers from geopackages
In-Reply-To: <1538590932736-0.post@n6.nabble.com>
References: <1538590932736-0.post@n6.nabble.com>
Message-ID: <1772058.ZjtUp5jUCy@even-i700>

On mercredi 3 octobre 2018 11:22:12 CEST andreaerdna wrote:
> Hi,
> from what I've read in bug report #7013 [1] and in the message of the commit
> fixing it [2],  I thought the problem of deleting a raster layer, including
> all of its references in other tables, from a geopackage had been solved.
> I've also read previous thread on this list [3] [4] that left me a little
> confused.
> 
> However, I tried to delete a raster layer name test_dtm from test.gpkg using
> (with GDAL 2.3.1 and 2.4.0dev from gisinternal):

As you discovered with your PR, support for deleting gridded coverage raster 
table (the ones created for non byte data) vs regular 'tiles' raster table was 
indeed missing.

> 
> ogrinfo -sql "DROP TABLE test_dtm" test.gpkg
> 
> but it only deleted the test_dtm table without also deleting the
> corresponding records in gpkg_contents, gpkg_tile_matrix, gpkg_extensions,
> etc.
> 
> There is probably something that I did not quite understand in this regard.

GDALGeoPackageDataset::DeleteVectorOrRasterLayer() should be extented to look 
for '2d-gridded-coverage' in the test that detects if it is a raster or vector 
layer.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gilpeleg at live.com  Wed Oct  3 12:12:03 2018
From: gilpeleg at live.com (Gil)
Date: Wed, 3 Oct 2018 19:12:03 +0000
Subject: [gdal-dev] gdal_translate doesn't create GeoPackage's metadata
In-Reply-To: <9628360.fKSoH4TbdD@even-i700>
References: <AM0PR0402MB3489A02DB67FAEC73A1DE7F4BA030@AM0PR0402MB3489.eurprd04.prod.outlook.com>
 <9628360.fKSoH4TbdD@even-i700>
Message-ID: <AM0PR0402MB34892437E886F075CFCFB65DBAE90@AM0PR0402MB3489.eurprd04.prod.outlook.com>

Hey Even,

Thanks for the quick reply and fix. Apologies for the long delay in response.
It looks great now when converting to GPKG from tif files, however when I convert from VRT to GPKG the metadata tables aren't created, is it intended?

And regarding the GoogleCRS84Quad, thanks for adding the clarification but it does seem odd they would change it like that, I understand that Inspire is the same as the new definition, but I don't understand the backward compatability strategy of this change. When someone writes GoogleCRS84Quad I don't know if it means the old definition or the new one. I can always just use the definition from the WMTS capabilities file of the TileMatrix but it's unclear why they decided on the change.

Many thanks,
Gil

On Wed, 5 Sep 2018 at 10:53, Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> wrote:
Gil,

>
> I got two questions:
> 1) I have a question about something I believe is a bug, I recently upgraded
> from 2.0.2 to 2.3.1, when using gdal_translate to convert a GeoTiff to
> GeoPackage it doesn't create the GeoPackage's metadata tables
> (gpkg_metadata/gpkg_metadata_reference).

> If I create without the tiling scheme, like this, it works just fine, it
> creates the tables with data in them:
 gdal_translate.exe -of GPKG a.tif
> b.gpkg
>
> When specifying the tiling scheme, it doesn't create the tables (tried
> GoogleCRS84Quad / InspireCRS84Quad):
 gdal_translate.exe -co
> TILING_SCHEME=GoogleCRS84Quad -of GPKG a.tif b.gpkg
> When specifying like the above and setting CREATE_METADATA_TABLES to YES, it
> creates the tables but they are empty:
 gdal_translate.exe -co
> TILING_SCHEME=GoogleCRS84Quad -of GPKG a.tif b.gpkg  --config
> CREATE_METADATA_TABLES YES
> I don't assume this is the wanted behavior, in 2.0.2 it worked fine.

From my testing, it didn't work fine in 2.0.2 either: it just created empty
tables. I've just fixed that issue in GDAL master and backported to 2.3
branch.

>
> 2) I have another question relating to GoogleCRS84Quad, I know this may not
> be the best place to ask this and you may ignore this if you wish, I am
> trying to make sure I understand the specs correctly, as far as I
> understand level 0 has 1 tile that covers the world. Is there any alternate
> definition that says otherwise? In
> http://docs.opengeospatial.org/is/13-082r2/13-082r2.html which is a later
> dated document than the one in GDAL specs, it says that the level -1 has
> one tile and 0 has two tiles, I may just be mixing two different
> definitions, which I assume I am, but I was hoping if someone could
> clarify.

Interesting. I've added that "clarification" to the driver doc:

+NOTE: <a href="http://docs.opengeospatial.org/is/
13-082r2/13-082r2.html#30">OGC WMTS Simple Profile 13-082r2</a>
+changed the definition of GoogleCRS84Quad (so not implemented by the driver).
+The new definition includes a -1 level (that cannot be modeled in GeoPackage
given
+constraints on zoom_level being positive or 0), with a single tile at origin
-180,90
+and whose bottom 128 lines are empty. Levels 0 or greater are identical to
the
+InspireCRS84Quad tiling scheme. So for practical purposes, InspireCRS84Quad
in
+GeoPackage is conformant to the new GoogleCRS84Quad definition.

Even


--
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181003/5c2b0ead/attachment.html>

From gilpeleg at live.com  Wed Oct  3 12:19:41 2018
From: gilpeleg at live.com (Gil)
Date: Wed, 3 Oct 2018 19:19:41 +0000
Subject: [gdal-dev] gdal_translate doesn't create GeoPackage's metadata
In-Reply-To: <9628360.fKSoH4TbdD@even-i700>
References: <AM0PR0402MB3489A02DB67FAEC73A1DE7F4BA030@AM0PR0402MB3489.eurprd04.prod.outlook.com>
 <9628360.fKSoH4TbdD@even-i700>
Message-ID: <AM0PR0402MB34893B660391E0530BA2E6F0BAE90@AM0PR0402MB3489.eurprd04.prod.outlook.com>

Hey Even,

Thanks for the quick reply and fix. Apologies for the long delay in response.
It looks great now when converting to GPKG from tif files, however when I convert from VRT to GPKG the metadata tables aren't created, is it intended?

And regarding the GoogleCRS84Quad, thanks for adding the clarification but it does seem odd they would change it like that, I understand that Inspire is the same as the new definition, but I don't understand the backward compatability strategy of this change. When someone writes GoogleCRS84Quad I don't know if it means the old definition or the new one. I can always just use the definition from the WMTS capabilities file of the TileMatrix but it's unclear why they decided on the change.

Many thanks,
Gil

On Wed, 5 Sep 2018 at 10:53, Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> wrote:
Gil,

>
> I got two questions:
> 1) I have a question about something I believe is a bug, I recently upgraded
> from 2.0.2 to 2.3.1, when using gdal_translate to convert a GeoTiff to
> GeoPackage it doesn't create the GeoPackage's metadata tables
> (gpkg_metadata/gpkg_metadata_reference).

> If I create without the tiling scheme, like this, it works just fine, it
> creates the tables with data in them:
 gdal_translate.exe -of GPKG a.tif
> b.gpkg
>
> When specifying the tiling scheme, it doesn't create the tables (tried
> GoogleCRS84Quad / InspireCRS84Quad):
 gdal_translate.exe -co
> TILING_SCHEME=GoogleCRS84Quad -of GPKG a.tif b.gpkg
> When specifying like the above and setting CREATE_METADATA_TABLES to YES, it
> creates the tables but they are empty:
 gdal_translate.exe -co
> TILING_SCHEME=GoogleCRS84Quad -of GPKG a.tif b.gpkg  --config
> CREATE_METADATA_TABLES YES
> I don't assume this is the wanted behavior, in 2.0.2 it worked fine.

From my testing, it didn't work fine in 2.0.2 either: it just created empty
tables. I've just fixed that issue in GDAL master and backported to 2.3
branch.

>
> 2) I have another question relating to GoogleCRS84Quad, I know this may not
> be the best place to ask this and you may ignore this if you wish, I am
> trying to make sure I understand the specs correctly, as far as I
> understand level 0 has 1 tile that covers the world. Is there any alternate
> definition that says otherwise? In
> http://docs.opengeospatial.org/is/13-082r2/13-082r2.html which is a later
> dated document than the one in GDAL specs, it says that the level -1 has
> one tile and 0 has two tiles, I may just be mixing two different
> definitions, which I assume I am, but I was hoping if someone could
> clarify.

Interesting. I've added that "clarification" to the driver doc:

+NOTE: <a href="http://docs.opengeospatial.org/is/
13-082r2/13-082r2.html#30">OGC WMTS Simple Profile 13-082r2</a>
+changed the definition of GoogleCRS84Quad (so not implemented by the driver).
+The new definition includes a -1 level (that cannot be modeled in GeoPackage
given
+constraints on zoom_level being positive or 0), with a single tile at origin
-180,90
+and whose bottom 128 lines are empty. Levels 0 or greater are identical to
the
+InspireCRS84Quad tiling scheme. So for practical purposes, InspireCRS84Quad
in
+GeoPackage is conformant to the new GoogleCRS84Quad definition.

Even


--
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181003/e37e18a9/attachment-0001.html>

From andreaerdna at libero.it  Wed Oct  3 20:42:48 2018
From: andreaerdna at libero.it (andreaerdna)
Date: Wed, 3 Oct 2018 20:42:48 -0700 (MST)
Subject: [gdal-dev] Deleting raster layers from geopackages
In-Reply-To: <1772058.ZjtUp5jUCy@even-i700>
References: <1538590932736-0.post@n6.nabble.com> <1772058.ZjtUp5jUCy@even-i700>
Message-ID: <1538624568204-0.post@n6.nabble.com>

Even Rouault-2 wrote
> GDALGeoPackageDataset::DeleteVectorOrRasterLayer() should be extented to
> look 
> for '2d-gridded-coverage' in the test that detects if it is a raster or
> vector 
> layer.

Thank you very much for your help and for your patience in reviewing the PR!

I'd like to add a gpkg_delete_gridded_coverage_raster_layer() test very
similar to gpkg_delete_raster_layer(), using data/float32.tif instead of
data/byte.tif as input layer, but I wonder why using 2.3.1 or 2.4.0dev

    gdal_translate -of GPKG -co "RASTER_TABLE=foo" float32.tif float32.gpkg

doesn't create gpkg_metadata and gpkg_metadata_reference, while for byte.tif
they are created and populated (and added to gpkg_extensions); using 2.2.4
(OSGeo4W) they are created also for float32.tif.


Andrea



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Oct  4 01:35:55 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Oct 2018 10:35:55 +0200
Subject: [gdal-dev] Deleting raster layers from geopackages
In-Reply-To: <1538624568204-0.post@n6.nabble.com>
References: <1538590932736-0.post@n6.nabble.com>
 <1772058.ZjtUp5jUCy@even-i700> <1538624568204-0.post@n6.nabble.com>
Message-ID: <3312468.NH14V6WyI5@even-i700>

On mercredi 3 octobre 2018 20:42:48 CEST andreaerdna wrote:
> Even Rouault-2 wrote
> 
> > GDALGeoPackageDataset::DeleteVectorOrRasterLayer() should be extented to
> > look
> > for '2d-gridded-coverage' in the test that detects if it is a raster or
> > vector
> > layer.
> 
> Thank you very much for your help and for your patience in reviewing the PR!
> 
> I'd like to add a gpkg_delete_gridded_coverage_raster_layer() test very
> similar to gpkg_delete_raster_layer(), using data/float32.tif instead of
> data/byte.tif as input layer, but I wonder why using 2.3.1 or 2.4.0dev
> 
>     gdal_translate -of GPKG -co "RASTER_TABLE=foo" float32.tif float32.gpkg
> 
> doesn't create gpkg_metadata and gpkg_metadata_reference, while for byte.tif
> they are created and populated (and added to gpkg_extensions); using 2.2.4
> (OSGeo4W) they are created also for float32.tif.

Ah, this is very subtle. byte.tif or float32.tif only contains 
AREA_OR_POINT=Area metadata. When converting byte.tif to GPKG, this requires 
creating gpkg_metadata to encode it. But when converting float32.tif, we can 
use the 'grid_cell_encoding' column of gpkg_2d_gridded_coverage_ancillary to 
encode this.
Simply add -mo FOO=BAR to add an extra metadata item.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Mikael.Rittri at carmenta.com  Thu Oct  4 03:47:31 2018
From: Mikael.Rittri at carmenta.com (Mikael Rittri)
Date: Thu, 4 Oct 2018 10:47:31 +0000
Subject: [gdal-dev] Questions about Raster Attribute Tables
Message-ID: <E4AB3DD44D22854B819908379DE4AD4950891B5D@SETHNWS023.carmenta.se>

Hello,

I am adding support for Raster Attribute Tables for one of our products, and there are some things I wonder about.

I have noticed that a TIFF file, Filename.tif, may have Raster Attribute Tables stored in a sidecar file of at least three types:


1.     Filename.tif.vat.dbf

2.     Filename.tif.aux.xml

3.     Filename.aux

Are there other conventions for storing Raster Attribute Tables for TIFF files that I ought to know about?

I understand that .vat.dbf is an Esri convention using the old dBase format, not (yet) supported by GDAL Library for Raster Attribute Tables. Fair enough.

It would seem that the .aux.xml format was designed by GDAL developers, although I haven't found any documentation on the history of the format. Esri documentation says: "ArcGIS 9.2 introduced the AUX.XML file for certain file formats", which can be understood as saying the format was invented by Esri, but I suspect they really mean something like "ArcGIS 9.2 adopted the AUX.XML format that was introduced by GDAL Library...".  Any comments on that?

The files named Filename.aux are a mystery to me. Esri documentation says: "The information stored in an AUX file is only accessible using a product from Esri, ERDAS, or a third-party product derived from the RDO/ERaster library." But I have found examples of datasets for which GDAL Library can retrieve a Raster Attribute Table from a binary Filename.aux. So, maybe some developer of GDAL Library has reverse-engineered the Esri Filename.aux format, but I haven't found any documentation of that. Or I guess maybe there are two distinct file formats that use the ".aux" file extension - the name "aux" isn't very creative and maybe Esri never bothered to trademark it.  Does anyone know?

Finally, I have found several datasets of land cover with Raster Attribute Tables, both Australian (https://data.gov.au/dataset/1556b944-731c-4b7f-a03e-14577c7e68db/resource/1f8174f8-573e-43f2-b110-3d1a13c380e8) and American (https://datagateway.nrcs.usda.gov/GDGHome_DirectDownLoad.aspx, see "National Land Cover Dataset by State"), where there are .aux.xml files that don't seem to be GDAL-compliant. Maybe that's just the way things are, but I haven't seen these issues discussed, so I'll mention them here (I am not sure if they merit filing a GDAL ticket). I have been using GDAL version 2.2.3, by the way.

A) GDAL Library always assumes that fields tagged as RED, GREEN and BLUE contain integers.

A common problem, for example in the files

DLCDv1_Class1_CEN.tif.aux.xml
and
DLCDv1_Class_alb94.tif.aux.xml,

in the Australian dataset, is that there are field definitions

      <FieldDefn index="3">
        <Name>RED</Name>
        <Type>1</Type>
        <Usage>6</Usage>
      </FieldDefn>
      <FieldDefn index="4">
        <Name>GREEN</Name>
        <Type>1</Type>
        <Usage>7</Usage>
      </FieldDefn>
      <FieldDefn index="5">
        <Name>BLUE</Name>
        <Type>1</Type>
        <Usage>8</Usage>
      </FieldDefn>

The Type = 1 indicates that the fields are Float values, which is correct - the values are Float numbers in the range 0.0 to 1.0 - and the Usage = 6, 7 and 8 indicates that these fields are special Red, Green and Blue fields, which is also correct, semantically. (The integers giving Type and Usage seem to be zero-based indexes into the enumeration types GDALRATFieldType and GDALRATFieldUsage, see https://www.gdal.org/gdal_8h.html#a810154ac91149d1a63c42717258fe16e )

Unfortunately, GDAL Library assumes or demands that a field with Usage tagged as Red/Green/Blue always contains integers. When I read the files via GDAL Library, what happens is that the Usage = 6, 7 and 8 forces the columns to be erroneously interpreted as integers (in the expected range 0 to 255), overriding the correct Type = 1 meaning Float. All values are then retrieved as 0 or 1, it seems. This can be seen from the code lines

    // color columns should be int 0..255
    if( ( eFieldUsage == GFU_Red ) || ( eFieldUsage == GFU_Green ) ||
        ( eFieldUsage == GFU_Blue ) || ( eFieldUsage == GFU_Alpha ) )
    {
        eFieldType = GFT_Integer;
    }

in the method GDALDefaultRasterAttributeTable::CreateColumn() in https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdal_rat.cpp

Although the behaviour agrees with the documentation of GDALRATFieldUsage that says that the special color fields must contain integers, I feel that GDAL Library is too rigid here. The Type, available in the Field Definition, tells us whether a color field contains integers or floats, so why the restriction? I guess I could make GDAL read these field contents as floats if I changed the Usage to 0, meaning a general-purpose field, but that would remove the information that these fields really are the special color fields.

B) Wrong Usage for the VALUE column.

In this case, I feel certain that the data producers are doing things wrong, but there are so many of them...
The special Value field is declared as

      <FieldDefn index="1">
        <Name>VALUE</Name>
        <Type>0</Type>
        <Usage>0</Usage>
      </FieldDefn>

Here, the Usage = 0 indicates just a general purpose field. But they should have declared

        <Usage>5</Usage>

which indicates the usage GFU_MinMax, saying this column contains the "class value".  Without that special usage indicated, GDAL Library has no way of knowing that VALUE is the special Value column, so it uses the row number as the value instead. Unfortunately, the row numbering starts from 0, whereas the contents of the VALUE field are often numbers starting from 1, and sometimes the VALUE contents are not consecutive integers anyway.

I am not sure if it makes sense to make GDAL Library more tolerant for this kind of error. I guess it could use a rule of thumb, saying that if nothing else in the .aux.xml tells what the special Value field is, and if the first or second field is of type integer and is named "VALUE" or "Value" or "value", then that is the special Value field. But maybe such guesswork is just ugly.

I'd appreciate any comments and advice!
Regards,

Mikael Rittri
Carmenta Geospatial Technologies
www.carmenta.com<http://www.carmenta.com/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181004/ce2bc51c/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Oct  4 04:11:10 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 4 Oct 2018 04:11:10 -0700 (MST)
Subject: [gdal-dev] Questions about Raster Attribute Tables
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD4950891B5D@SETHNWS023.carmenta.se>
References: <E4AB3DD44D22854B819908379DE4AD4950891B5D@SETHNWS023.carmenta.se>
Message-ID: <1538651470202-0.post@n6.nabble.com>

Mikael Rittri wrote
> It would seem that the .aux.xml format was designed by GDAL developers,
> although I haven't found any documentation on the history of the format.
> Esri documentation says: "ArcGIS 9.2 introduced the AUX.XML file for
> certain file formats", which can be understood as saying the format was
> invented by Esri, but I suspect they really mean something like "ArcGIS
> 9.2 adopted the AUX.XML format that was introduced by GDAL Library...". 
> Any comments on that?
> 
> The files named Filename.aux are a mystery to me. Esri documentation says:
> "The information stored in an AUX file is only accessible using a product
> from Esri, ERDAS, or a third-party product derived from the RDO/ERaster
> library." But I have found examples of datasets for which GDAL Library can
> retrieve a Raster Attribute Table from a binary Filename.aux. So, maybe
> some developer of GDAL Library has reverse-engineered the Esri
> Filename.aux format, but I haven't found any documentation of that. Or I
> guess maybe there are two distinct file formats that use the ".aux" file
> extension - the name "aux" isn't very creative and maybe Esri never
> bothered to trademark it.  Does anyone know?

Hi,

Origin is not ESRI but ERDAS. ESRI used a raster engine from ERDAS before
starting to use GDAL in version 9.2.

From
http://community.hexagongeospatial.com/t5/ERDAS-IMAGINE-Q-A/AUX-File-aux/ta-p/2286

The .aux extension indicates an auxiliary file, mainly used in conjunction
with non-native ERDAS IMAGINE files accessed by the Raster DLL, to store
information not normally supported by the particular raster format. The TIFF
file format, for example, does not store internal image statistics, so
statistics generated by ERDAS IMAGINE are stored in an .aux file with the
same prefix name as the .tif file.

GDAL supports ERDAS .aux files at least in HFA driver
https://www.gdal.org/frmt_hfa.html. 

-Jukka Rahkonen-





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Oct  4 04:24:35 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 04 Oct 2018 13:24:35 +0200
Subject: [gdal-dev] Questions about Raster Attribute Tables
In-Reply-To: <E4AB3DD44D22854B819908379DE4AD4950891B5D@SETHNWS023.carmenta.se>
References: <E4AB3DD44D22854B819908379DE4AD4950891B5D@SETHNWS023.carmenta.se>
Message-ID: <2071642.7rL6AJ2931@even-i700>

Mikael,

> It would seem that the .aux.xml format was designed by GDAL developers,
> although I haven't found any documentation on the history of the format.
> Esri documentation says: "ArcGIS 9.2 introduced the AUX.XML file for
> certain file formats", which can be understood as saying the format was
> invented by Esri, but I suspect they really mean something like "ArcGIS 9.2
> adopted the AUX.XML format that was introduced by GDAL Library...".  Any
> comments on that?

Yes, as ArcGIS 9.2 uses partly GDAL, that must be that understanding. We 
cannot exclude that they made custom changes to the upstream GDAL .aux.xml 
format, but I haven't heard about that.

> 
> The files named Filename.aux are a mystery to me.

The .aux files handled by GDAL are in the ERDAS Imagine format

> 
> A) GDAL Library always assumes that fields tagged as RED, GREEN and BLUE
> contain integers.
[...]
>     // color columns should be int 0..255
>     if( ( eFieldUsage == GFU_Red ) || ( eFieldUsage == GFU_Green ) ||
>         ( eFieldUsage == GFU_Blue ) || ( eFieldUsage == GFU_Alpha ) )
>     {
>         eFieldType = GFT_Integer;
>     }
> 
> in the method GDALDefaultRasterAttributeTable::CreateColumn() in
> https://github.com/OSGeo/gdal/blob/master/gdal/gcore/gdal_rat.cpp

This comes from this changeset:
https://github.com/OSGeo/gdal/commit/05421b1b8fbcf47bfc0b96fa67256a20241a1a03

So the remapping [0,1] <--> [0,255] should be done by the HFA/Erdas Imagine 
driver. But if the values are stored in a .aux.xml like in your case, that is 
indeed likely inappropriate. Probably that the change to GFT_Integer should be 
moved to the HFA driver itself.

> B) Wrong Usage for the VALUE column.

> I am not sure if it makes sense to make GDAL Library more tolerant for this
> kind of error. I guess it could use a rule of thumb, saying that if nothing
> else in the .aux.xml tells what the special Value field is, and if the
> first or second field is of type integer and is named "VALUE" or "Value" or
> "value", then that is the special Value field. But maybe such guesswork is
> just ugly.
> 
Yes, that sounds very ad-hoc for this specific case...

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Thu Oct  4 06:14:03 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 4 Oct 2018 13:14:03 +0000
Subject: [gdal-dev] How to edit GeoTIFF band names with gdal_edit?
Message-ID: <71d0862b71cd4f5ea4ba12e9d2542a76@C119S212VM042.msvyvi.vaha.local>

Hi,

The names of the raster bands seem to be stored into GeoTIFF with GDAL tag 42112

Tag 42112: <GDALMetadata>
<Item name="DESCRIPTION" sample="0" role="description">SomeBandName 001</Item>
<Item name="DESCRIPTION" sample="1" role="description">SomeBandName 002</Item>

The description can be set with Python by doing something like
RasterBand.SetDescription(BandName)

I guess that those metadata items can be added also with gdal_edit but I can't imagine what is the right syntax. A simple test with
gdal_edit -mo "DESCRIPTION=test" test.tif
adds metadata into higher level

Metadata:
  AREA_OR_POINT=Area
  DESCRIPTION=test

So how would the gdal_edit command look like on Windows, if the aim is to add a metadata item
<Item name="DESCRIPTION" sample="0" role="description">SomeBandName 001</Item>
so that after this gdalinfo would report

Band 1 Block=20x20 Type=UInt16, ColorInterp=Gray
  Description = SomeBandName 001

-Jukka Rahkonen-

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181004/b53d5232/attachment.html>

From schwehr at gmail.com  Fri Oct  5 02:50:45 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 5 Oct 2018 02:50:45 -0700
Subject: [gdal-dev] Refactoring the test suite with pytest
In-Reply-To: <CAF1M8pd=fLrjPo4NihisAqGuiz0tO-pbYJC7iPDT=2CThLzVVA@mail.gmail.com>
References: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
 <CACmBxyvfEdFCwkv4vZ0vdNh8+vHPrwYZ04-=-UxYU=H5TAfGVg@mail.gmail.com>
 <CAF1M8pd=fLrjPo4NihisAqGuiz0tO-pbYJC7iPDT=2CThLzVVA@mail.gmail.com>
Message-ID: <CACmBxytG9qBhrxFLoAdJ7g0uBXw7n0EAnavGbZmzhA81T3iweg@mail.gmail.com>

The python tests in autotest2 are pretty much a subset of GDAL's autotest.
The C++ and Java tests are mostly outside of what autotest has.

On Tue, Oct 2, 2018 at 2:05 AM Craig de Stigter <
craig.destigter at koordinates.com> wrote:

> Thanks. Are those tests entirely based on the osgeo git tests, or are
> there some extra ones? It might be worth getting the extra ones in at least.
>
>
> On Tue, 2 Oct 2018 at 18:06, Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> I am definitely interested in improvements to the test infrastructure,
>> but always fear slowing down Even or getting bogged down in a massive
>> effort.
>>
>> In addition to working in the normal osgeo github world...
>>
>> My current state: I started "autotest2
>> <https://github.com/schwehr/gdal-autotest2/tree/master/python>" back in
>> 2013-14 after being unable to make autotest work for me and released much
>> of it as opensource.  It's unittest based for python and GoogleTest/gmock
>> for c++.  The Java isn't very far along, but it's Truth + JUnit4.  It's in
>> use inside google typically running every 10 to 60 minutes depending on
>> what's going on and a couple times a day in ASAN, MSAN, and TSAN modes.  On
>> the python side, it doesn't cover that much compared to the full python
>> test suite in autotest.  But in doing rewrites, I did have to make each
>> test independent.  I also have to allow control of where tests write
>> temporary data as I work in a system where the source tree is read only.  I
>> am probably close to making the tests python 3.7+ only (but likely to work
>> on 3.5+).  Whenever I start using a driver for the first time, I try to
>> rewrite the python test and create at least basic C++ tests, but I never
>> have enough time to do as complete of a job as I would like (err... like
>> the partially done pull request I have in to Proj).
>>
>> You are welcome to use anything in autotest2 for the core gdal tree if it
>> fits.  I (meaning Google) are happy to contribute any or all of the code to
>> the GDAL tree under the GDAL license.
>>
>> On Mon, Oct 1, 2018 at 3:32 PM Craig de Stigter <
>> craig.destigter at koordinates.com> wrote:
>>
>>> Hi folks
>>>
>>> I've been looking at a potential large change to the GDAL test suite,
>>> replacing some of the worst parts. I thought I'd bring it up for discussion
>>> here, in case anyone has any wisdom or strong feelings about it.
>>>
>>> I've made a ticket at https://github.com/OSGeo/gdal/issues/949 .
>>>
>>> Essentially my plan is to use pytest
>>> <https://docs.pytest.org/en/latest/> as both a test runner and a helper
>>> library. We would remove or replace large parts of the `gdaltest` utilities
>>> with pytest equivalents.
>>>
>>> To give an idea of the main changes, this code:
>>>
>>> if ds.GetLayer(0).GetSpatialRef() is not None:
>>>>     gdaltest.post_reason('did not get expected spatial ref')
>>>>     return 'fail'
>>>>
>>> would change to:
>>>
>>>> assert ds.GetLayer(0).GetSpatialRef() is None, 'did not get expected
>>>> spatial ref'
>>>>
>>>
>>> The pytest runner gives contextual tracebacks from assert statements, as
>>> well as relevant variables and line numbers.
>>>
>>> Other changes:
>>>  * The `gdaltest_list` and the `__main__` entry point at the bottom of
>>> each file will be removed. Some tests will be renamed if they don't already
>>> start with `test_`.
>>>  * The `<name>_cleanup` fixture will be turned into a module-scoped
>>> fixture
>>> <https://docs.pytest.org/en/latest/fixture.html#scope-sharing-a-fixture-instance-across-tests-in-a-class-module-or-session>.
>>> This allows users to run any number of tests in the module, and the cleanup
>>> fixture will be invoked once after all of them are finished. If I find
>>> corresponding setup functions I will make them into fixtures too, but I
>>> haven't seen those so far in my digging.
>>>
>>> Other, more intrusive changes are possible but this is what I'm
>>> considering targeting as a first step. It is fairly straightforward to
>>> automate this change; I have a script in progress already to do that.
>>>
>>> I intend to make a compatibility shim for the old-style tests that can't
>>> easily be automatically updated. The shim would be a decorator, perhaps
>>> called `@old_test`, which would take 'skip' or 'fail' return values from
>>> tests and turn them into the appropriate `assert False` or `pytest.skip()`
>>> calls.
>>>
>>> I don't intend to make any changes to the C++ tests.
>>>
>>> A couple of complicating factors to be aware of:
>>>
>>>    - pytest only supports python 2.7+. The tests already only run in
>>>    2.7+ in Travis, so no big deal there. I think it's perfectly reasonable to
>>>    only support 2.7+ these days, given that 2.6 has been unsupported since
>>>    2013, but I thought I'd mention it.
>>>    - pytest has no builtin way of *ordering* tests. It is assumed that
>>>    tests are independent of each other. In practice, all tests are run in
>>>    alphabetical name order within a given module. It appears to me that some
>>>    of GDAL's tests are *not* independent of each other within the same
>>>    module. However, most are already in alphabetical name order, so I don't
>>>    believe this is a problem; we are not worse off with pytest than previously.
>>>
>>>
>>> Please let me know your thoughts.
>>>
>>> --
>>> Regards,
>>> Craig de Stigter
>>>
>>> Developer
>>> Koordinates
>>>
>>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
>>> <https://twitter.com/koordinates>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> --
>> http://schwehr.org
>>
>
>
> --
> Regards,
> Craig
>
> Developer
> Koordinates
>
> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
> <https://twitter.com/koordinates>
>


-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181005/8984b7ba/attachment.html>

From DBurkholder at nhcweb.com  Fri Oct  5 03:12:54 2018
From: DBurkholder at nhcweb.com (Dave Burkholder)
Date: Fri, 5 Oct 2018 10:12:54 +0000
Subject: [gdal-dev] Problems with GDAL_GRID
Message-ID: <93c7ea5f7d9f4d4e8762eb2b042568fe@MSX-SAC.nhc.local>

I am hoping that someone receiving this email might be able to help me or direct me to someone else who can. Please excuse me if this is an inappropriate use of your mailing list or attachment format.

I am attempting to use GDAL_GRID with linear interpolation to generate a TIF-file and polygonized SHP-file, from a TXT-file of 3D point data generated by a single-beam echo-sounder which collects detailed river cross-sections typically at every 50 - 100 m intervals down a river.

We currently have a database of over 2100 bathymetric (underwater) surveys and have been successfully using an ArcGIS macro, but for a number of reasons I was hoping to migrate away from ArcGIS and use GDAL_GRID instead for batch input. The point data files work fine in both QGIS and ArcGIS, but not in GDAL_GRID. I am continuously getting 'blocks' of random 'No Data'-areas in my output (refer to attachment). I am wondering if this is a flaw in the GDAL_GRID program or if I am not using it correctly, and whether there is an alternative program that might be more stable.

I have prepared a PDF file which documents and summarizes the problem if anyone is interested.

Any advise you might be able to give me would be MUCH appreciated!

Thank you in advance.

Regards, David Burkholder


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181005/9844d961/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GDAL_GRID_linear_interpolation_SHP.jpg
Type: image/jpeg
Size: 65948 bytes
Desc: GDAL_GRID_linear_interpolation_SHP.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181005/9844d961/attachment-0001.jpg>

From even.rouault at spatialys.com  Fri Oct  5 03:22:53 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Oct 2018 12:22:53 +0200
Subject: [gdal-dev] Problems with GDAL_GRID
In-Reply-To: <93c7ea5f7d9f4d4e8762eb2b042568fe@MSX-SAC.nhc.local>
References: <93c7ea5f7d9f4d4e8762eb2b042568fe@MSX-SAC.nhc.local>
Message-ID: <2240094.MaNDqafY3D@even-i700>

Dave,

you might want to try with the latest GDAL 2.3.2
There has been a bug fixed in that one that could potentially fix the issue 
you have:
https://github.com/OSGeo/gdal/issues/638

Even

> I am hoping that someone receiving this email might be able to help me or
> direct me to someone else who can. Please excuse me if this is an
> inappropriate use of your mailing list or attachment format.
> 
> I am attempting to use GDAL_GRID with linear interpolation to generate a
> TIF-file and polygonized SHP-file, from a TXT-file of 3D point data
> generated by a single-beam echo-sounder which collects detailed river
> cross-sections typically at every 50 - 100 m intervals down a river.
> 
> We currently have a database of over 2100 bathymetric (underwater) surveys
> and have been successfully using an ArcGIS macro, but for a number of
> reasons I was hoping to migrate away from ArcGIS and use GDAL_GRID instead
> for batch input. The point data files work fine in both QGIS and ArcGIS,
> but not in GDAL_GRID. I am continuously getting 'blocks' of random 'No
> Data'-areas in my output (refer to attachment). I am wondering if this is a
> flaw in the GDAL_GRID program or if I am not using it correctly, and
> whether there is an alternative program that might be more stable.
> 
> I have prepared a PDF file which documents and summarizes the problem if
> anyone is interested.
> 
> Any advise you might be able to give me would be MUCH appreciated!
> 
> Thank you in advance.
> 
> Regards, David Burkholder


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From robert.coup at koordinates.com  Fri Oct  5 03:58:14 2018
From: robert.coup at koordinates.com (Robert Coup)
Date: Fri, 5 Oct 2018 11:58:14 +0100
Subject: [gdal-dev] Translate leaves additional PAM .aux.xml file
Message-ID: <CAFLLRpKO2MakBP2mG_aCyALUHnTDWA+5T0jGaWU7VkG7nu5GMQ@mail.gmail.com>

Hi all,

I have some datasets I've been converting via gdal.Translate() to
self-contained Cloud-style GeoTIFFs (ie. as one file). For a handful of
datasets that have band descriptions:


...
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Description = Band_1
  Min=1.000 Max=255.000
  Minimum=1.000, Maximum=255.000, Mean=78.774, StdDev=29.672
  Metadata:
    LAYER_TYPE=athematic
    STATISTICS_MAXIMUM=255
    ...


I sometimes end up with .aux.xml files that look like this:

<PAMDataset>
  <PAMRasterBand band="1">
    <Description>Band_1</Description>
  </PAMRasterBand>
  <PAMRasterBand band="2">
    <Description>Band_2</Description>
  </PAMRasterBand>
  <PAMRasterBand band="3">
    <Description>Band_3</Description>
  </PAMRasterBand>
</PAMDataset>


The .aux.xml goes away after a subsequent Translate(), and if I delete the
.aux.xml file the description is still present via gdalinfo, so the data is
presumably in the .tif.

Is it possible to prevent creation of the .aux.xml in this case? I was
using the presence of any extra files as a warning that something might
have been missed in the TIFF conversion.

Cheers,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181005/8757e606/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Oct  5 04:17:08 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 5 Oct 2018 04:17:08 -0700 (MST)
Subject: [gdal-dev] Translate leaves additional PAM .aux.xml file
In-Reply-To: <CAFLLRpKO2MakBP2mG_aCyALUHnTDWA+5T0jGaWU7VkG7nu5GMQ@mail.gmail.com>
References: <CAFLLRpKO2MakBP2mG_aCyALUHnTDWA+5T0jGaWU7VkG7nu5GMQ@mail.gmail.com>
Message-ID: <1538738228990-0.post@n6.nabble.com>

Robert Coup wrote
> Is it possible to prevent creation of the .aux.xml in this case? I was
> using the presence of any extra files as a warning that something might
> have been missed in the TIFF conversion.

Hi,

>From https://gdal.org/classGDALPamDataset.html:

Enabling PAM

PAM support can be enabled (resp. disabled) in GDAL by setting the
GDAL_PAM_ENABLED configuration option (via CPLSetConfigOption(), or the
environment) to the value of YES (resp. NO). Note: The default value is
build dependent and defaults to YES in Windows and Unix builds.

-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Fri Oct  5 04:38:01 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Oct 2018 13:38:01 +0200
Subject: [gdal-dev] Translate leaves additional PAM .aux.xml file
In-Reply-To: <CAFLLRpKO2MakBP2mG_aCyALUHnTDWA+5T0jGaWU7VkG7nu5GMQ@mail.gmail.com>
References: <CAFLLRpKO2MakBP2mG_aCyALUHnTDWA+5T0jGaWU7VkG7nu5GMQ@mail.gmail.com>
Message-ID: <2204905.9j7jA6ncmH@even-i700>

On vendredi 5 octobre 2018 11:58:14 CEST Robert Coup wrote:
> Hi all,
> 
> I have some datasets I've been converting via gdal.Translate() to
> self-contained Cloud-style GeoTIFFs (ie. as one file). For a handful of
> datasets that have band descriptions:

Can you give a procedure to reproduce this ? I couldn't from a quick test. 
Things tend to go to PAM a bit too easily.
Sometimes this is a matter of using poBand->GDALRasterBand::SetDescription() 
to short-circuit PAM instead of poBand->SetDescription()

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From julien.cabieces at oslandia.com  Fri Oct  5 04:54:32 2018
From: julien.cabieces at oslandia.com (Julien Cabieces)
Date: Fri, 5 Oct 2018 13:54:32 +0200
Subject: [gdal-dev] Gdal contour number of contour with -p
In-Reply-To: <1891389.v8V0WXMYR4@even-i700>
References: <3406bd25-59ab-2fcc-dc3b-e7ac178f9099@oslandia.com>
 <1891389.v8V0WXMYR4@even-i700>
Message-ID: <95c88db3-6771-c233-80b1-26dd8a8f64af@oslandia.com>

Yes, polygons are properly disjoints.

I agree with your proposal, two attributes with a_min/a_max seems to be
the better option.

I'll try to propose a patch in the days to come.

Regards,

Julien


On 28/09/2018 17:50, Even Rouault wrote:
> On mercredi 26 septembre 2018 09:30:53 CEST Julien Cabieces wrote:
>> Hi,
>>
>> I notice that executing gdal_contour has different number of contour
>> with or without -p option.
>>
>> gdal_contour  -b 1 -a level -fl 1 -f GPKG NETCDF:"/tmp/myfile.nc":MYVAR
>> /tmp/outfile.gpkg
>>
>> This generates one contour line.
>>
>> gdal_contour  -p -b 1 -a level -fl 1 -f GPKG
>> NETCDF:"/tmp/myfile.nc":MYVAR /tmp/outfile.gpkg
>>
>> This generates two contour polygons, one where all values are greater
>> than 1 and other one where all values are lesser than 1.
>>
>> I was wondering if it wouldn't be better to generate only one polygon
>> contour where all values are greater than 1, in order to keep the same
>> contour number with or without the option.
> This is the classical problems of intervals and sticks :-)
> Polygons are intervals, and lines are sticks, so I don't find it odd that you 
> don't get the same number of objects. Having the union of polygons to fill the 
> raster extent seems to me to be a desirable property.
>
> Side question: I was wondering if the exterior polygon a hole at the place 
> where the interior polygon is ? ie are polygons properly disjoint ?
>
> The question is more on the semantics of the attributes created for polygons. 
> For clarity, we should probably have two attributes, one with the minimum 
> value and one with the maximum one. That would make sense especially when used 
> the -fl options with irregular levels. So perhaps a -a_min and -a_max could be 
> useful for polygons.
> Or if we have a single value, we should precisely define if it is the minimum 
> or the maximum value.
>
> Even
>
>

-------------- next part --------------
A non-text attachment was scrubbed...
Name: pEpkey.asc
Type: application/pgp-keys
Size: 2489 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181005/5bd632ad/attachment.key>

From robert.coup at koordinates.com  Fri Oct  5 05:47:49 2018
From: robert.coup at koordinates.com (Robert Coup)
Date: Fri, 5 Oct 2018 13:47:49 +0100
Subject: [gdal-dev] Translate leaves additional PAM .aux.xml file
In-Reply-To: <2204905.9j7jA6ncmH@even-i700>
References: <CAFLLRpKO2MakBP2mG_aCyALUHnTDWA+5T0jGaWU7VkG7nu5GMQ@mail.gmail.com>
 <2204905.9j7jA6ncmH@even-i700>
Message-ID: <CAFLLRpKVxMqKePNEjckOoUpMCEmk2vfv1HbvzsDM2DrNY=k0qg@mail.gmail.com>

Hi,

Can you give a procedure to reproduce this ? I couldn't from a quick test.
> Things tend to go to PAM a bit too easily.


Source image is at
https://www.dropbox.com/sh/y2z8s2101w3rrxo/AAAh21saJqzHU40sy7UGg9Ffa?dl=0 —
seems like it's the .aux file that's leading to it.

To reproduce: gdal_translate -of GTiff fa0-11.tif out.tif

>From 2.3 at 8bbc3a0c3c

Cheers,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181005/1d9a7158/attachment.html>

From even.rouault at spatialys.com  Fri Oct  5 08:22:24 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Oct 2018 17:22:24 +0200
Subject: [gdal-dev] Translate leaves additional PAM .aux.xml file
In-Reply-To: <CAFLLRpKVxMqKePNEjckOoUpMCEmk2vfv1HbvzsDM2DrNY=k0qg@mail.gmail.com>
References: <CAFLLRpKO2MakBP2mG_aCyALUHnTDWA+5T0jGaWU7VkG7nu5GMQ@mail.gmail.com>
 <2204905.9j7jA6ncmH@even-i700>
 <CAFLLRpKVxMqKePNEjckOoUpMCEmk2vfv1HbvzsDM2DrNY=k0qg@mail.gmail.com>
Message-ID: <2559629.HqbOOnavUz@even-i700>

On vendredi 5 octobre 2018 13:47:49 CEST Robert Coup wrote:
> Hi,
> 
> Can you give a procedure to reproduce this ? I couldn't from a quick test.
> 
> > Things tend to go to PAM a bit too easily.
> 
> Source image is at
> https://www.dropbox.com/sh/y2z8s2101w3rrxo/AAAh21saJqzHU40sy7UGg9Ffa?dl=0 —
> seems like it's the .aux file that's leading to it.
> 
> To reproduce: gdal_translate -of GTiff fa0-11.tif out.tif
> 
> From 2.3 at 8bbc3a0c3c

Fixed per
https://github.com/OSGeo/gdal/commit/24638830292ceae1017dbd9fef207111ca34fab4

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From astewart at terragotech.com  Fri Oct  5 11:49:58 2018
From: astewart at terragotech.com (Alan Stewart)
Date: Fri, 5 Oct 2018 18:49:58 +0000
Subject: [gdal-dev] pull requests
Message-ID: <BN3PR15MB0850412D12639189082491E9C4EB0@BN3PR15MB0850.namprd15.prod.outlook.com>

Hi,

Trying to follow the online documentation for contributing at trac.osgeo.org/gdal/wiki/HowToContribute. Has the ticket system been completely abandoned? All the active tickets seem to be dated. If so, then I'm ready to do publish my branch and do a pull request, but apparently I need to be granted access first. First time git user here, I could be doing something wrong. My GitHub account is alanstewart-terragotech. I have some added projections and later an enhancement to OGRFieldDfn.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181005/793b9f6f/attachment-0001.html>

From even.rouault at spatialys.com  Fri Oct  5 12:20:45 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 05 Oct 2018 21:20:45 +0200
Subject: [gdal-dev] pull requests
In-Reply-To: <BN3PR15MB0850412D12639189082491E9C4EB0@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BN3PR15MB0850412D12639189082491E9C4EB0@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <8017973.ZFAgsmrbPY@even-i700>

Alan,

> 
> Trying to follow the online documentation for contributing at
> trac.osgeo.org/gdal/wiki/HowToContribute. Has the ticket system been
> completely abandoned?

Yes. All new activity is in GitHub; I've updated the above link to make it 
clearer.

> If so, then
> I'm ready to do publish my branch and do a pull request, but apparently I
> need to be granted access first. 

No, you don't need write access to the GDAL repository to submit a pull 
request. See https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md and 
https://help.github.com/articles/github-flow/

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From DBurkholder at nhcweb.com  Sat Oct  6 03:03:05 2018
From: DBurkholder at nhcweb.com (Dave Burkholder)
Date: Sat, 6 Oct 2018 10:03:05 +0000
Subject: [gdal-dev] Problems with GDAL_GRID
In-Reply-To: <mailman.21067.1538765400.22916.gdal-dev@lists.osgeo.org>
References: <mailman.21067.1538765400.22916.gdal-dev@lists.osgeo.org>
Message-ID: <d7400f7cbd904bdba979c1385bc05ef6@MSX-SAC.nhc.local>

As requested by Even, I downloaded the latest Version 2.3.2 of GDAL_GRID and ran it with the same data. I have attached an image comparing the results for 3 different versions of GDAL_GRID. The results seem to be regressing!

Up until the latest 2.3.2 version, the results compared very nicely with the ArcGIS interpolation model except for the 'NoData glitches'.

If anyone is interested, I could share the CSV and VRT input files as a 188KB zip-file. The input is typical of our single-beam echo-sounder bathymetric (underwater) data with detailed cross-sections (points every 0.35 metres) at approximately 100 m intervals down the river. Our typical cell size is 5m x 5m.

Hoping to get some response. Thanks in advance.

Regards, Dave

------------------------------

Date: Fri, 05 Oct 2018 12:22:53 +0200
From: Even Rouault <even.rouault at spatialys.com>
To: gdal-dev at lists.osgeo.org
Cc: Dave Burkholder <DBurkholder at nhcweb.com>
Subject: Re: [gdal-dev] Problems with GDAL_GRID
Message-ID: <2240094.MaNDqafY3D at even-i700>
Content-Type: text/plain; charset="us-ascii"

Dave,

you might want to try with the latest GDAL 2.3.2
There has been a bug fixed in that one that could potentially fix the issue 
you have:
https://github.com/OSGeo/gdal/issues/638

Even

> I am hoping that someone receiving this email might be able to help me or
> direct me to someone else who can. Please excuse me if this is an
> inappropriate use of your mailing list or attachment format.
> 
> I am attempting to use GDAL_GRID with linear interpolation to generate a
> TIF-file and polygonized SHP-file, from a TXT-file of 3D point data
> generated by a single-beam echo-sounder which collects detailed river
> cross-sections typically at every 50 - 100 m intervals down a river.
> 
> We currently have a database of over 2100 bathymetric (underwater) surveys
> and have been successfully using an ArcGIS macro, but for a number of
> reasons I was hoping to migrate away from ArcGIS and use GDAL_GRID instead
> for batch input. The point data files work fine in both QGIS and ArcGIS,
> but not in GDAL_GRID. I am continuously getting 'blocks' of random 'No
> Data'-areas in my output (refer to attachment). I am wondering if this is a
> flaw in the GDAL_GRID program or if I am not using it correctly, and
> whether there is an alternative program that might be more stable.
> 
> I have prepared a PDF file which documents and summarizes the problem if
> anyone is interested.
> 
> Any advise you might be able to give me would be MUCH appreciated!
> 
> Thank you in advance.
> 
> Regards, David Burkholder


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: GDAL_GRID Versions_Comparison.jpg
Type: image/jpeg
Size: 65310 bytes
Desc: GDAL_GRID Versions_Comparison.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181006/28b03bbb/attachment-0001.jpg>

From even.rouault at spatialys.com  Sat Oct  6 04:30:10 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 06 Oct 2018 13:30:10 +0200
Subject: [gdal-dev] Problems with GDAL_GRID
In-Reply-To: <d7400f7cbd904bdba979c1385bc05ef6@MSX-SAC.nhc.local>
References: <mailman.21067.1538765400.22916.gdal-dev@lists.osgeo.org>
 <d7400f7cbd904bdba979c1385bc05ef6@MSX-SAC.nhc.local>
Message-ID: <1951441.v6OljSyiNm@even-i700>

On samedi 6 octobre 2018 10:03:05 CEST Dave Burkholder wrote:
> As requested by Even, I downloaded the latest Version 2.3.2 of GDAL_GRID and
> ran it with the same data. I have attached an image comparing the results
> for 3 different versions of GDAL_GRID. The results seem to be regressing!
 
> Up until the latest 2.3.2 version, the results compared very nicely with the
> ArcGIS interpolation model except for the 'NoData glitches'.
 
> If anyone is interested, I could share the CSV and VRT input files as a
> 188KB zip-file. The input is typical of our single-beam echo-sounder
> bathymetric (underwater) data with detailed cross-sections (points every
> 0.35 metres) at approximately 100 m intervals down the river. Our typical
> cell size is 5m x 5m.

Please file a ticket at https://github.com/OSGeo/gdal/issues/new with:
- the input dataset attached (as a zip) or as a link to it.
- the exact gdal_grid command line invokation you use

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrea.aime at geo-solutions.it  Mon Oct  8 03:56:22 2018
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 8 Oct 2018 12:56:22 +0200
Subject: [gdal-dev] Creating external overviews for JP2 files?
Message-ID: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>

Hi,
I have a JP2 file that has an unsatisfactory amount of quality levels and
was trying to create external overviews in tiff format for it (to have
faster views when fairly zoomed out, in a mosaic with many files).
I was trying with the following, but it fails:

gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
YCBCR --config INTERLEAVE_OVERVIEW PIXEL  myfile.jp2 2 4 8 16 32
myfile.jp2: BuildOverviews() not supported for this dataset.
Overview building failed.

I guess I can go using gdal_translate with the outsize parameter and then
use gdaladdo on it but was
wondering why external overview creation is not supported for JP2 (like,
maybe there are good reasons for it...
I looked at the code and have the impression that the code is reading the
most appropriate quality level
without any further optimization, besides maybe in memory subsampling, but
hey, I get lost easily in C/C++
code).

Cheers
Andrea

==

GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information. == Ing. Andrea Aime @geowolf Technical Lead
GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa (LU) phone: +39
0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per
errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
“GDPR” - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181008/53418cd7/attachment.html>

From even.rouault at spatialys.com  Mon Oct  8 04:02:27 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 08 Oct 2018 13:02:27 +0200
Subject: [gdal-dev] Creating external overviews for JP2 files?
In-Reply-To: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
References: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
Message-ID: <2703554.DmfxNM5LIU@even-i700>

Hi Andrea,

> Hi,
> I have a JP2 file that has an unsatisfactory amount of quality levels and
> was trying to create external overviews in tiff format for it (to have
> faster views when fairly zoomed out, in a mosaic with many files).
> I was trying with the following, but it fails:

Which which driver ? JP2KAK should already have it, and I've added external 
overview building to the JP2OpenJPEG driver in GDAL master a few months ago.

https://github.com/OSGeo/gdal/commit/98a3985d90c2972e367a484ca40fd86f164721ec

You could likely cherry-pick it in the 2.3 branch without much trouble.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrea.aime at geo-solutions.it  Mon Oct  8 04:06:10 2018
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 8 Oct 2018 13:06:10 +0200
Subject: [gdal-dev] Creating external overviews for JP2 files?
In-Reply-To: <2703554.DmfxNM5LIU@even-i700>
References: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
 <2703554.DmfxNM5LIU@even-i700>
Message-ID: <CA+nxMTt4VhtoGu+uCn2kqU2i=kwNaRUL_oVyKWquWC7q6bmVqA@mail.gmail.com>

On Mon, Oct 8, 2018 at 1:02 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Which which driver ? JP2KAK should already have it, and I've added
> external
> overview building to the JP2OpenJPEG driver in GDAL master a few months
> ago.
>

Ah, I have the JP2OpenJPEG and the GDAL of my local Mint 19, which is:

> gdalinfo --version
GDAL 2.2.3, released 2017/11/20

So, it seems what I was looking for was not crazy after all :-)


>
>
> https://github.com/OSGeo/gdal/commit/98a3985d90c2972e367a484ca40fd86f164721ec
>
> You could likely cherry-pick it in the 2.3 branch without much trouble.
>

I see. Could do it locally, but it would be a problem to do on the
production servers (it's a
continuous ingestion system loading copernicus data)
Wondering, would it have any advantage over just doing a gdal_translate
with target size and
then adding overviews on top of it?

Cheers
Andrea

==

GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information. == Ing. Andrea Aime @geowolf Technical Lead
GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa (LU) phone: +39
0584 962313 fax: +39 0584 1660272 mob: +39 339 8844549
http://www.geo-solutions.it http://twitter.com/geosolutions_it
------------------------------------------------------- *Con riferimento
alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 -
Regolamento generale sulla protezione dei dati “GDPR”), si precisa che ogni
circostanza inerente alla presente email (il suo contenuto, gli eventuali
allegati, etc.) è un dato la cui conoscenza è riservata al/i solo/i
destinatario/i indicati dallo scrivente. Se il messaggio Le è giunto per
errore, è tenuta/o a cancellarlo, ogni altra operazione è illecita. Le
sarei comunque grato se potesse darmene notizia. This email is intended
only for the person or entity to which it is addressed and may contain
information that is privileged, confidential or otherwise protected from
disclosure. We remind that - as provided by European Regulation 2016/679
“GDPR” - copying, dissemination or use of this e-mail or the information
herein by anyone other than the intended recipient is prohibited. If you
have received this email by mistake, please notify us immediately by
telephone or e-mail.*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181008/50761d5d/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Oct  8 04:08:51 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 8 Oct 2018 04:08:51 -0700 (MST)
Subject: [gdal-dev] Creating external overviews for JP2 files?
In-Reply-To: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
References: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
Message-ID: <1538996931786-0.post@n6.nabble.com>

Hi Andrea,

I had a try and it works for me with the gisinternals build "GDAL 2.4.0dev"
with JP2OpenJPEG driver

gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
YCBCR --conf
ig INTERLEAVE_OVERVIEW PIXEL  ovr.jp2 2 4 8 16 32
0...10...20...30...40...50...60...70...80...90...100 - done.


-Jukka Rahkonen-



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From sean at mapbox.com  Mon Oct  8 14:03:42 2018
From: sean at mapbox.com (Sean Gillies)
Date: Mon, 8 Oct 2018 15:03:42 -0600
Subject: [gdal-dev] Does the VRT SimpleSource element's OVERVIEW_LEVEL open
 option apply to the Overview element?
Message-ID: <CADPhZXyfq9Ujw_zmFaDfVnj3wFiDpazkmW19ECbXhcbP5ksJZg@mail.gmail.com>

Dear group,

Does the OVERVIEW_LEVEL open option described in
https://www.gdal.org/gdal_vrttut.html#gdal_vrttut_format apply to VRT
Overview elements? It occurs to me that if it did, we could add external
overviews to a dataset using a single VRT file instead of the nested VRTs
shown in https://lists.osgeo.org/pipermail/gdal-dev/2012-July/033299.html.

For example, if I have a GeoTIFF with no overviews named cog_novr.tif and
another GeoTIFF at half resolution *with* overviews, I could virtually add
all those overview levels to the full resolution dataset like this (I
think?)

<VRTDataset rasterXSize="5080" rasterYSize="5194">
  <SRS>...</SRS>
  <GeoTransform>...</GeoTransform>
  <VRTRasterBand dataType="UInt16" band="1">
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">cog_novr.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="7621" RasterYSize="7791"
DataType="UInt16" BlockXSize="512" BlockYSize="512" />
      <SrcRect xOff="0" yOff="0" xSize="7621" ySize="7791" />
      <DstRect xOff="0" yOff="0" xSize="5080.22220278191"
ySize="5193.55553653945" />
    </SimpleSource>

    <Overview>
      <!-- First overview is provided by the main image in the TIFF that
             has all the overviews -->
      <SourceFilename relativeToVRT="1">cog_ovrs.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="3810" RasterYSize="3895"
DataType="UInt16" BlockXSize="512" BlockYSize="512" />
      <SrcRect xOff="0" yOff="0" xSize="3810" ySize="3895" />
      <DstRect xOff="0" yOff="0" xSize="5080.22220278191"
ySize="5193.55553653945" />
    </Overview>

    <Overview>
      <!-- Second overview is provided by the first (index 0) overview of
the TIFF that
             has all the overviews -->
      <SourceFilename relativeToVRT="1">cog_ovrs.tif</SourceFilename>
      <OpenOptions>
        <OOI key="OVERVIEW_LEVEL">0</OOI>
      </OpenOptions>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="1905" RasterYSize="1948"
DataType="UInt16" BlockXSize="512" BlockYSize="512" />
      <SrcRect xOff="0" yOff="0" xSize="1905" ySize="1948" />
      <DstRect xOff="0" yOff="0" xSize="5080.22220278191"
ySize="5193.55553653945" />
    </Overview>

  </VRTRasterBand>
</VRTDataset>

With GDAL 2.2.4, gdalinfo tells me that this VRT has two overviews, but the
overview levels reported look suspicious:

Band 1 Block=128x128 Type=UInt16, ColorInterp=Gray
  Overviews: 3810x3895, 3810x3895

I expected to see a 1905x1948 overview above.

Should I expect the open option to work? If not, could it be made to work
or does that go against the grain of VRT features?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181008/7c7a7c17/attachment.html>

From even.rouault at spatialys.com  Mon Oct  8 14:27:25 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 08 Oct 2018 23:27:25 +0200
Subject: [gdal-dev] Does the VRT SimpleSource element's OVERVIEW_LEVEL
	open option apply to the Overview element?
In-Reply-To: <CADPhZXyfq9Ujw_zmFaDfVnj3wFiDpazkmW19ECbXhcbP5ksJZg@mail.gmail.com>
References: <CADPhZXyfq9Ujw_zmFaDfVnj3wFiDpazkmW19ECbXhcbP5ksJZg@mail.gmail.com>
Message-ID: <1632168.MbJRFcvJSV@even-i700>

Hi Sean,

> 
> Does the OVERVIEW_LEVEL open option described in
> https://www.gdal.org/gdal_vrttut.html#gdal_vrttut_format apply to VRT
> Overview elements? 

No. Not implemented in code, doc, or in the .xsd schema at
https://github.com/OSGeo/gdal/blob/master/gdal/data/gdalvrt.xsd ;-)

> If not, could it be made to work
> or does that go against the grain of VRT features?

I believe this could be implemented reasonably easily.


A (not pretty) workaround to avoid proliferation of VRT files is to use a 
inline nested VRT. That is, in the <SourceFilename> element of <Overview>, you 
can put a VRT definition as a CDATA construct.

<SourceFilename>![CDATA[<VRTDataset>...</VRTDataset>]]></SourceFilename>


Actually, an easier alternative for the precise use case you expose would be 
to do:
ln -s cog_ovrs.tif cog_novr.tif.ovr

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Odd-Ragnar.Lydersen at powel.no  Tue Oct  9 05:40:06 2018
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Tue, 9 Oct 2018 12:40:06 +0000
Subject: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
Message-ID: <06a892ef312b4e5aa8b58c40a65d1b9f@ITTRHEX001.powelasa.powel.com>

I think there is a bug in WCSDataset110::GetCoverageRequest()
At line 178: "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIER=%s"
Should be : "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIERS=%s"

At least that fixes my problem, and I can get one step further in my effort to use the wcs driver, using C++ API, on Windows.

>Odd-Ragnar<
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181009/4aaf5a7d/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Oct  9 06:06:21 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Tue, 9 Oct 2018 06:06:21 -0700 (MST)
Subject: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
In-Reply-To: <06a892ef312b4e5aa8b58c40a65d1b9f@ITTRHEX001.powelasa.powel.com>
References: <06a892ef312b4e5aa8b58c40a65d1b9f@ITTRHEX001.powelasa.powel.com>
Message-ID: <1539090381809-0.post@n6.nabble.com>

Odd Ragnar Lydersen wrote
> I think there is a bug in WCSDataset110::GetCoverageRequest()
> At line 178: "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIER=%s"
> Should be : "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIERS=%s"
> 
> At least that fixes my problem, and I can get one step further in my
> effort to use the wcs driver, using C++ API, on Windows.
> 
>>Odd-Ragnar<

Hi,

I believe that GDAL is right and the WCS server that you are using is wrong.
By reading the standard https://portal.opengeospatial.org/files/07-067r5
the name of the parameter in GetCoverage is "identifier". However, for
making it a bit more complicated for the developers it is called
"identifiers" in DescribeCoverage.

"This single ―identifiers parameter shall correspond to the repeatable
―identifier parameter in the UML model."

-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From p.baumann at jacobs-university.de  Tue Oct  9 06:09:52 2018
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Tue, 9 Oct 2018 15:09:52 +0200
Subject: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
In-Reply-To: <1539090381809-0.post@n6.nabble.com>
References: <06a892ef312b4e5aa8b58c40a65d1b9f@ITTRHEX001.powelasa.powel.com>
 <1539090381809-0.post@n6.nabble.com>
Message-ID: <452e1da6-ed52-5d4a-7fdd-54eed1c83e08@jacobs-university.de>



On 09.10.2018 15:06, jratike80 wrote:
> Odd Ragnar Lydersen wrote
>> I think there is a bug in WCSDataset110::GetCoverageRequest()
>> At line 178: "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIER=%s"
>> Should be : "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIERS=%s"
>>
>> At least that fixes my problem, and I can get one step further in my
>> effort to use the wcs driver, using C++ API, on Windows.
>>
>>> Odd-Ragnar<
> Hi,
>
> I believe that GDAL is right and the WCS server that you are using is wrong.
> By reading the standard https://portal.opengeospatial.org/files/07-067r5
> the name of the parameter in GetCoverage is "identifier". However, for
> making it a bit more complicated for the developers it is called
> "identifiers" in DescribeCoverage.

well, design by committee effect if you will: DescribeCoverage can have more
than one parameters, so it was requested to change to plural in the course of
the adoption discussions.
whatever way you do it, you will do it wrong ;-)

cheers,
Peter (WCS/CIS spec editor)


>
> "This single ―identifiers parameter shall correspond to the repeatable
> ―identifier parameter in the UML model."
>
> -Jukka Rahkonen-
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Dr. Peter Baumann
 - Professor of Computer Science, Jacobs University Bremen
   www.faculty.jacobs-university.de/pbaumann
   mail: p.baumann at jacobs-university.de
   tel: +49-421-200-3178, fax: +49-421-200-493178
 - Executive Director, rasdaman GmbH Bremen (HRB 26793)
   www.rasdaman.com, mail: baumann at rasdaman.com
   tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)



From astewart at terragotech.com  Tue Oct  9 12:21:56 2018
From: astewart at terragotech.com (Alan Stewart)
Date: Tue, 9 Oct 2018 19:21:56 +0000
Subject: [gdal-dev] gdalautotest
Message-ID: <BN3PR15MB0850C5EE4DC8878B31F23525C4E70@BN3PR15MB0850.namprd15.prod.outlook.com>

I'd like to run the gdalautotest scripts locally, and add some tests, but I've not had success getting the environment set up correctly. I assume with the right configuration the build process will generate the Python bindings?

I'm on Windows running in a  VS1027 x86 native tools command prompt. I've configured the following environment variables:

set "GDAL_HOME=C:\devel\GitHub\build"
set "GDAL_DATA=%GDAL_HOME%\data"
set "PATH=%PATH%;%GDAL_HOME%\bin"
set "PYTHONPATH=C:\devel\GitHub\gdal\gdal\pymod"

My nmake.local contains:

MSVC_VER=1910
VERSION=204
GDAL_HOME="C:\devel\GitHub\build"
PYDIR="C:\Python27"                                            <-- in the PATH inherited by the command prompt
SWIG="C:\devel\GitHub\swig.exe"
BINDINGS=python
HAVE_NUMPY=1

I run "nmake -f makefile.vc", then "nmake -f makefile.vc install", then from the autotest folder "C:\Python27\python.exe run_all.py". The error is that pymod\gdaltest.py cannot import gdal from osgeo.

I found the gdal\swig\python\osgeo folder and tried adding that to PYTHONPATH. Same result.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181009/89a9b06d/attachment.html>

From astewart at terragotech.com  Tue Oct  9 12:37:45 2018
From: astewart at terragotech.com (Alan Stewart)
Date: Tue, 9 Oct 2018 19:37:45 +0000
Subject: [gdal-dev] gdalautotest
In-Reply-To: <BN3PR15MB0850C5EE4DC8878B31F23525C4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BN3PR15MB0850C5EE4DC8878B31F23525C4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <BN3PR15MB08503D20D624C53443481F3DC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>

Oops, just realized the path I need to add to PYTHONPATH I the parent of osgeo. Still fails importing _gdal. Are these files supposed to have been installed into my Pyton installation by the install process?

Alan Stewart
Senior Software Enginee
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

From: Alan Stewart
Sent: Tuesday, October 09, 2018 3:22 PM
To: 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Subject: gdalautotest

I'd like to run the gdalautotest scripts locally, and add some tests, but I've not had success getting the environment set up correctly. I assume with the right configuration the build process will generate the Python bindings?

I'm on Windows running in a  VS1027 x86 native tools command prompt. I've configured the following environment variables:

set "GDAL_HOME=C:\devel\GitHub\build"
set "GDAL_DATA=%GDAL_HOME%\data"
set "PATH=%PATH%;%GDAL_HOME%\bin"
set "PYTHONPATH=C:\devel\GitHub\gdal\gdal\pymod"

My nmake.local contains:

MSVC_VER=1910
VERSION=204
GDAL_HOME="C:\devel\GitHub\build"
PYDIR="C:\Python27"                                            <-- in the PATH inherited by the command prompt
SWIG="C:\devel\GitHub\swig.exe"
BINDINGS=python
HAVE_NUMPY=1

I run "nmake -f makefile.vc", then "nmake -f makefile.vc install", then from the autotest folder "C:\Python27\python.exe run_all.py". The error is that pymod\gdaltest.py cannot import gdal from osgeo.

I found the gdal\swig\python\osgeo folder and tried adding that to PYTHONPATH. Same result.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181009/0fc3c6da/attachment.html>

From astewart at terragotech.com  Tue Oct  9 13:09:23 2018
From: astewart at terragotech.com (Alan Stewart)
Date: Tue, 9 Oct 2018 20:09:23 +0000
Subject: [gdal-dev] gdalautotest
In-Reply-To: <BN3PR15MB08503D20D624C53443481F3DC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BN3PR15MB0850C5EE4DC8878B31F23525C4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
 <BN3PR15MB08503D20D624C53443481F3DC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <BN3PR15MB08503EF747F70791B0F8DDFDC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>

Okay, found the bindings and bindings_install targets in makefile.vc. The bindings target does not build so something is wrong. Mysteriously reporting that files are not found, reporting absolute paths for files that are in fact there at the reported path... Also Swig.swg and python.swg are not found.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

From: Alan Stewart
Sent: Tuesday, October 09, 2018 3:38 PM
To: 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Subject: RE: gdalautotest

Oops, just realized the path I need to add to PYTHONPATH I the parent of osgeo. Still fails importing _gdal. Are these files supposed to have been installed into my Pyton installation by the install process?

Alan Stewart
Senior Software Enginee
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

From: Alan Stewart
Sent: Tuesday, October 09, 2018 3:22 PM
To: 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: gdalautotest

I'd like to run the gdalautotest scripts locally, and add some tests, but I've not had success getting the environment set up correctly. I assume with the right configuration the build process will generate the Python bindings?

I'm on Windows running in a  VS1027 x86 native tools command prompt. I've configured the following environment variables:

set "GDAL_HOME=C:\devel\GitHub\build"
set "GDAL_DATA=%GDAL_HOME%\data"
set "PATH=%PATH%;%GDAL_HOME%\bin"
set "PYTHONPATH=C:\devel\GitHub\gdal\gdal\pymod"

My nmake.local contains:

MSVC_VER=1910
VERSION=204
GDAL_HOME="C:\devel\GitHub\build"
PYDIR="C:\Python27"                                            <-- in the PATH inherited by the command prompt
SWIG="C:\devel\GitHub\swig.exe"
BINDINGS=python
HAVE_NUMPY=1

I run "nmake -f makefile.vc", then "nmake -f makefile.vc install", then from the autotest folder "C:\Python27\python.exe run_all.py". The error is that pymod\gdaltest.py cannot import gdal from osgeo.

I found the gdal\swig\python\osgeo folder and tried adding that to PYTHONPATH. Same result.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181009/35c1b1f2/attachment-0001.html>

From even.rouault at spatialys.com  Tue Oct  9 14:39:13 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 09 Oct 2018 23:39:13 +0200
Subject: [gdal-dev] gdalautotest
In-Reply-To: <BN3PR15MB08503EF747F70791B0F8DDFDC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BN3PR15MB0850C5EE4DC8878B31F23525C4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
 <BN3PR15MB08503D20D624C53443481F3DC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
 <BN3PR15MB08503EF747F70791B0F8DDFDC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <4653473.WxL2W5QIPn@even-i700>

On mardi 9 octobre 2018 20:09:23 CEST Alan Stewart wrote:
> Okay, found the bindings and bindings_install targets in makefile.vc. The
> bindings target does not build so something is wrong. Mysteriously
> reporting that files are not found, reporting absolute paths for files that
> are in fact there at the reported path... Also Swig.swg and python.swg are
> not found.

try:

set DISTUTILS_USE_SDK=1
set MSSdk=1
cd swig\python
python setup.py build
python setup.py install


> 
> Alan Stewart
> Senior Software Engineer
> TerraGo Technologies
> 3200 Windy Hill Road, Suite 1550W
> Atlanta, GA 30339 USA
> O.  +1 678.391.9615
> 
> www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.
> terragotech.com>
> 
> From: Alan Stewart
> Sent: Tuesday, October 09, 2018 3:38 PM
> To: 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
> Subject: RE: gdalautotest
> 
> Oops, just realized the path I need to add to PYTHONPATH I the parent of
> osgeo. Still fails importing _gdal. Are these files supposed to have been
> installed into my Pyton installation by the install process?
> 
> Alan Stewart
> Senior Software Enginee
> TerraGo Technologies
> 3200 Windy Hill Road, Suite 1550W
> Atlanta, GA 30339 USA
> O.  +1 678.391.9615
> 
> www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.
> terragotech.com>
> 
> From: Alan Stewart
> Sent: Tuesday, October 09, 2018 3:22 PM
> To: 'gdal-dev at lists.osgeo.org'
> <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> Subject:
> gdalautotest
> 
> I'd like to run the gdalautotest scripts locally, and add some tests, but
> I've not had success getting the environment set up correctly. I assume
> with the right configuration the build process will generate the Python
> bindings?
> 
> I'm on Windows running in a  VS1027 x86 native tools command prompt. I've
> configured the following environment variables:
> 
> set "GDAL_HOME=C:\devel\GitHub\build"
> set "GDAL_DATA=%GDAL_HOME%\data"
> set "PATH=%PATH%;%GDAL_HOME%\bin"
> set "PYTHONPATH=C:\devel\GitHub\gdal\gdal\pymod"
> 
> My nmake.local contains:
> 
> MSVC_VER=1910
> VERSION=204
> GDAL_HOME="C:\devel\GitHub\build"
> PYDIR="C:\Python27"                                            <-- in the
> PATH inherited by the command prompt SWIG="C:\devel\GitHub\swig.exe"
> BINDINGS=python
> HAVE_NUMPY=1
> 
> I run "nmake -f makefile.vc", then "nmake -f makefile.vc install", then from
> the autotest folder "C:\Python27\python.exe run_all.py". The error is that
> pymod\gdaltest.py cannot import gdal from osgeo.
> 
> I found the gdal\swig\python\osgeo folder and tried adding that to
> PYTHONPATH. Same result.
> 
> Alan Stewart
> Senior Software Engineer
> TerraGo Technologies
> 3200 Windy Hill Road, Suite 1550W
> Atlanta, GA 30339 USA
> O.  +1 678.391.9615
> 
> www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.
> terragotech.com>


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Odd-Ragnar.Lydersen at powel.no  Tue Oct  9 22:58:48 2018
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Wed, 10 Oct 2018 05:58:48 +0000
Subject: [gdal-dev] WCS C++ API on Windows: Fails to create VSIFILE
Message-ID: <9d0ea5d9425a47b88bb4762c34684082@ITTRHEX001.powelasa.powel.com>

1) DescribeCoverage for version 1.0.0 (It's working fine if I use version=1.1.x)
********************************
static std::string wcsDescribeCoverage = "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?SERVICE=WCS&REQUEST=DescribeCoverage&Coverage=dtm1_32&VERSION=1.0.0";

static const char* pOptionOpenOptions[] = { "CACHE=.\\testCache", "CoverageName=dtm1_32", "Timeout=90", nullptr };
CPLSetConfigOption("GDAL_DATA", "path/toGDAL/data");
GDALAllRegister();

GDALDatasetUniquePtr poDS1(GDALDataset::Open(wcsGetCapabilites.c_str(), GDAL_OF_READONLY, nullptr, pOptionOpenOptions, nullptr));
  if (poDS1 == nullptr)
  {
    printf("Open failed.\n");
    exit(1);
  }
********************************

2) Trying to use GDALTranslate() to get output file
********************************
char **argList; // Is filled with { "-projwin", "347500.00", "6469590.00", "351000.00", "6468000.00", "-oo", "CoverageName=dtm1_32", "-of", "XYZ", nullptr}

  GDALTranslateOptions *TranslateOptions = GDALTranslateOptionsNew(argList, NULL);
  GDALDatasetH hOutputDataset = GDALTranslate("./test.xyz", GDALDataset::ToHandle(poDS1.get()), TranslateOptions, NULL);

********************************

In both cases, I end up in WCSDataset::GDALOpenResult () function, failing to create the VSIFILE.
Is this a Windows problem?
Is there any way around it?

>Odd-Ragnar<

From Odd-Ragnar.Lydersen at powel.no  Wed Oct 10 04:11:21 2018
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Wed, 10 Oct 2018 11:11:21 +0000
Subject: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
In-Reply-To: <452e1da6-ed52-5d4a-7fdd-54eed1c83e08@jacobs-university.de>
References: <06a892ef312b4e5aa8b58c40a65d1b9f@ITTRHEX001.powelasa.powel.com>
 <1539090381809-0.post@n6.nabble.com>
 <452e1da6-ed52-5d4a-7fdd-54eed1c83e08@jacobs-university.de>
Message-ID: <993c271bbab14c30a6c6dea969f1e70a@ITTRHEX001.powelasa.powel.com>

I have investigated some more now, and I've found that the problem is perhaps the way I'm using the data source/service description file.

Here is what I do:
1) I open the wcs by providing the coverage I want by using describecoverage in the url:
std::string wcsDescribeCoverage = "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?SERVICE=WCS&REQUEST=DescribeCoverage&IDENTIFIERS=1&VERSION=1.1.1";
GDALDatasetUniquePtr poDS1(GDALDataset::Open(wcsGetCapabilites.c_str(), GDAL_OF_READONLY, pOptionDriverName, pOptionOpenOptions, nullptr));

Now I have a valid data set, poDS1.
And a service description file has been created in the cache:
<WCS_GDAL>
  <ServiceURL>https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?</ServiceURL>
  <Version>1.1.1</Version>
  <CoverageName>1</CoverageName>
  <Parameters>SERVICE=WCS&amp;REQUEST=DescribeCoverage</Parameters>
  <TIMEOUT>300</TIMEOUT>
</WCS_GDAL>

2) Then I run GDALTranslate(), with a valid argList
GDALTranslateOptions *TranslateOptions = GDALTranslateOptionsNew(argList, NULL);
GDALDatasetH hOutputDataset = GDALTranslate("./test.xyz", GDALDataset::ToHandle(poDS2.get()), TranslateOptions, NULL);

During the GDALTranslate() I find that in wcsdataset110.cpp, WCSDataset110::GetCoverageRequest(), line 227:
- After the GetCoverage request have been constructed, the parameters from the service description file is used to overwrite the created request, making it a DescribeCoverage request as stated in the file.
- And DescribeCoverage don't want IDENTIFIER=someId, but IDENTIFIERS=someId

Then, my question is, how am I supposed to do this, to make it right?

>Odd-Ragnar<


-----Original Message-----
From: Peter Baumann <p.baumann at jacobs-university.de> 
Sent: tirsdag 9. oktober 2018 15:10
To: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()



On 09.10.2018 15:06, jratike80 wrote:
> Odd Ragnar Lydersen wrote
>> I think there is a bug in WCSDataset110::GetCoverageRequest()
>> At line 178: "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIER=%s"
>> Should be : "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIERS=%s"
>>
>> At least that fixes my problem, and I can get one step further in my 
>> effort to use the wcs driver, using C++ API, on Windows.
>>
>>> Odd-Ragnar<
> Hi,
>
> I believe that GDAL is right and the WCS server that you are using is wrong.
> By reading the standard 
> https://portal.opengeospatial.org/files/07-067r5
> the name of the parameter in GetCoverage is "identifier". However, for 
> making it a bit more complicated for the developers it is called 
> "identifiers" in DescribeCoverage.

well, design by committee effect if you will: DescribeCoverage can have more than one parameters, so it was requested to change to plural in the course of the adoption discussions.
whatever way you do it, you will do it wrong ;-)

cheers,
Peter (WCS/CIS spec editor)


>
> "This single ―identifiers parameter shall correspond to the repeatable 
> ―identifier parameter in the UML model."
>
> -Jukka Rahkonen-
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Dr. Peter Baumann
 - Professor of Computer Science, Jacobs University Bremen
   www.faculty.jacobs-university.de/pbaumann
   mail: p.baumann at jacobs-university.de
   tel: +49-421-200-3178, fax: +49-421-200-493178
 - Executive Director, rasdaman GmbH Bremen (HRB 26793)
   www.rasdaman.com, mail: baumann at rasdaman.com
   tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882 "Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)




From ari.jolma at gmail.com  Wed Oct 10 06:01:38 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 10 Oct 2018 16:01:38 +0300
Subject: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
In-Reply-To: <993c271bbab14c30a6c6dea969f1e70a@ITTRHEX001.powelasa.powel.com>
References: <06a892ef312b4e5aa8b58c40a65d1b9f@ITTRHEX001.powelasa.powel.com>
 <1539090381809-0.post@n6.nabble.com>
 <452e1da6-ed52-5d4a-7fdd-54eed1c83e08@jacobs-university.de>
 <993c271bbab14c30a6c6dea969f1e70a@ITTRHEX001.powelasa.powel.com>
Message-ID: <350ad6d6-8041-c422-2a6b-44d1f145639c@gmail.com>

Hi Odd Ragnar,

Without going very deep into this, I would do (and tried)

gdalinfo "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32"

This tells me that the preferred version of the service is 2.0.1 and it 
serves coverage Coverage1. However, if I want to use service version 
1.1.1, I do

gdalinfo 
"WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?version=1.1.1"

This tells me that version is ok but now the coverage name is 1, so

gdalinfo 
"WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?version=1.1.1&coverage=1"

tells me details about this coverage which seems to be huge. Now that is 
the src_dataset string to be used in gdal_translate.

Ari


Odd Ragnar Lydersen kirjoitti 10.10.2018 klo 14:11:
> I have investigated some more now, and I've found that the problem is perhaps the way I'm using the data source/service description file.
>
> Here is what I do:
> 1) I open the wcs by providing the coverage I want by using describecoverage in the url:
> std::string wcsDescribeCoverage = "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?SERVICE=WCS&REQUEST=DescribeCoverage&IDENTIFIERS=1&VERSION=1.1.1";
> GDALDatasetUniquePtr poDS1(GDALDataset::Open(wcsGetCapabilites.c_str(), GDAL_OF_READONLY, pOptionDriverName, pOptionOpenOptions, nullptr));
>
> Now I have a valid data set, poDS1.
> And a service description file has been created in the cache:
> <WCS_GDAL>
>    <ServiceURL>https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?</ServiceURL>
>    <Version>1.1.1</Version>
>    <CoverageName>1</CoverageName>
>    <Parameters>SERVICE=WCS&amp;REQUEST=DescribeCoverage</Parameters>
>    <TIMEOUT>300</TIMEOUT>
> </WCS_GDAL>
>
> 2) Then I run GDALTranslate(), with a valid argList
> GDALTranslateOptions *TranslateOptions = GDALTranslateOptionsNew(argList, NULL);
> GDALDatasetH hOutputDataset = GDALTranslate("./test.xyz", GDALDataset::ToHandle(poDS2.get()), TranslateOptions, NULL);
>
> During the GDALTranslate() I find that in wcsdataset110.cpp, WCSDataset110::GetCoverageRequest(), line 227:
> - After the GetCoverage request have been constructed, the parameters from the service description file is used to overwrite the created request, making it a DescribeCoverage request as stated in the file.
> - And DescribeCoverage don't want IDENTIFIER=someId, but IDENTIFIERS=someId
>
> Then, my question is, how am I supposed to do this, to make it right?
>
>> Odd-Ragnar<
>
> -----Original Message-----
> From: Peter Baumann <p.baumann at jacobs-university.de>
> Sent: tirsdag 9. oktober 2018 15:10
> To: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>; gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
>
>
>
> On 09.10.2018 15:06, jratike80 wrote:
>> Odd Ragnar Lydersen wrote
>>> I think there is a bug in WCSDataset110::GetCoverageRequest()
>>> At line 178: "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIER=%s"
>>> Should be : "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIERS=%s"
>>>
>>> At least that fixes my problem, and I can get one step further in my
>>> effort to use the wcs driver, using C++ API, on Windows.
>>>
>>>> Odd-Ragnar<
>> Hi,
>>
>> I believe that GDAL is right and the WCS server that you are using is wrong.
>> By reading the standard
>> https://portal.opengeospatial.org/files/07-067r5
>> the name of the parameter in GetCoverage is "identifier". However, for
>> making it a bit more complicated for the developers it is called
>> "identifiers" in DescribeCoverage.
> well, design by committee effect if you will: DescribeCoverage can have more than one parameters, so it was requested to change to plural in the course of the adoption discussions.
> whatever way you do it, you will do it wrong ;-)
>
> cheers,
> Peter (WCS/CIS spec editor)
>
>
>> "This single ―identifiers parameter shall correspond to the repeatable
>> ―identifier parameter in the UML model."
>>
>> -Jukka Rahkonen-
>>
>>
>>
>>
>> --
>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> --
> Dr. Peter Baumann
>   - Professor of Computer Science, Jacobs University Bremen
>     www.faculty.jacobs-university.de/pbaumann
>     mail: p.baumann at jacobs-university.de
>     tel: +49-421-200-3178, fax: +49-421-200-493178
>   - Executive Director, rasdaman GmbH Bremen (HRB 26793)
>     www.rasdaman.com, mail: baumann at rasdaman.com
>     tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882 "Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From robert.coup at koordinates.com  Wed Oct 10 06:38:51 2018
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 10 Oct 2018 14:38:51 +0100
Subject: [gdal-dev] vsis3/vsicurl allowed-extensions per path?
Message-ID: <CAFLLRpLs_a1oYVPcvT7-2nbAM_NRNSrxUrOY4RdEqXisxxgajg@mail.gmail.com>

Hi all,

Wondering about being able to set CPL_VSIL_CURL_ALLOWED_EXTENSIONS on a
specific dataset rather than as a global option. This would allow opening
multiple files in the same process without needing to manage setting &
resetting configuration contexts.

eg. gdal.Open("/vsis3?ext=.tif/mybucket/mypath/my.tif", ...)

would be the equivalent of CPL_VSIL_CURL_ALLOWED_EXTENSIONS=.tif *for that
dataset only*.

eg. gdal.Open("/vsis3?ext=.tif&ext=.tif.aux.xml/mybucket/mypath/my.tif",
...)

would be the equivalent of
CPL_VSIL_CURL_ALLOWED_EXTENSIONS=.tif,.tif.aux.xml

(to simplify the first case, maybe `?ext` could be the equivalent of
whatever extension is on the path)

I'm not entirely happy with the approach since it pollutes the path - a
single path is now is also referring to other files (eg. what should
VSIFOpenL() conceivably do with ?ext=* ?)

Another alternative would be to have it as an Open Option to pass to
gdal.OpenEx(), though they seem designed for driver-specific options rather
than access-method.

Thoughts?

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181010/41014f05/attachment-0001.html>

From astewart at terragotech.com  Wed Oct 10 07:24:39 2018
From: astewart at terragotech.com (Alan Stewart)
Date: Wed, 10 Oct 2018 14:24:39 +0000
Subject: [gdal-dev] gdalautotest
In-Reply-To: <4653473.WxL2W5QIPn@even-i700>
References: <BN3PR15MB0850C5EE4DC8878B31F23525C4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
 <BN3PR15MB08503D20D624C53443481F3DC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
 <BN3PR15MB08503EF747F70791B0F8DDFDC4E70@BN3PR15MB0850.namprd15.prod.outlook.com>
 <4653473.WxL2W5QIPn@even-i700>
Message-ID: <BN3PR15MB0850063155708140D85A7E7FC4E00@BN3PR15MB0850.namprd15.prod.outlook.com>

Thank you, that worked!

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615
 
www.terragotech.com

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com> 
Sent: Tuesday, October 09, 2018 5:39 PM
To: gdal-dev at lists.osgeo.org
Cc: Alan Stewart <astewart at terragotech.com>
Subject: Re: [gdal-dev] gdalautotest

On mardi 9 octobre 2018 20:09:23 CEST Alan Stewart wrote:
> Okay, found the bindings and bindings_install targets in makefile.vc. 
> The bindings target does not build so something is wrong. Mysteriously 
> reporting that files are not found, reporting absolute paths for files 
> that are in fact there at the reported path... Also Swig.swg and 
> python.swg are not found.

try:

set DISTUTILS_USE_SDK=1
set MSSdk=1
cd swig\python
python setup.py build
python setup.py install


> 
> Alan Stewart
> Senior Software Engineer
> TerraGo Technologies
> 3200 Windy Hill Road, Suite 1550W
> Atlanta, GA 30339 USA
> O.  +1 678.391.9615
> 
> www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.
> terragotech.com>
> 
> From: Alan Stewart
> Sent: Tuesday, October 09, 2018 3:38 PM
> To: 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
> Subject: RE: gdalautotest
> 
> Oops, just realized the path I need to add to PYTHONPATH I the parent 
> of osgeo. Still fails importing _gdal. Are these files supposed to 
> have been installed into my Pyton installation by the install process?
> 
> Alan Stewart
> Senior Software Enginee
> TerraGo Technologies
> 3200 Windy Hill Road, Suite 1550W
> Atlanta, GA 30339 USA
> O.  +1 678.391.9615
> 
> www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.
> terragotech.com>
> 
> From: Alan Stewart
> Sent: Tuesday, October 09, 2018 3:22 PM
> To: 'gdal-dev at lists.osgeo.org'
> <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> Subject:
> gdalautotest
> 
> I'd like to run the gdalautotest scripts locally, and add some tests, 
> but I've not had success getting the environment set up correctly. I 
> assume with the right configuration the build process will generate 
> the Python bindings?
> 
> I'm on Windows running in a  VS1027 x86 native tools command prompt. 
> I've configured the following environment variables:
> 
> set "GDAL_HOME=C:\devel\GitHub\build"
> set "GDAL_DATA=%GDAL_HOME%\data"
> set "PATH=%PATH%;%GDAL_HOME%\bin"
> set "PYTHONPATH=C:\devel\GitHub\gdal\gdal\pymod"
> 
> My nmake.local contains:
> 
> MSVC_VER=1910
> VERSION=204
> GDAL_HOME="C:\devel\GitHub\build"
> PYDIR="C:\Python27"                                            <-- in the
> PATH inherited by the command prompt SWIG="C:\devel\GitHub\swig.exe"
> BINDINGS=python
> HAVE_NUMPY=1
> 
> I run "nmake -f makefile.vc", then "nmake -f makefile.vc install", 
> then from the autotest folder "C:\Python27\python.exe run_all.py". The 
> error is that pymod\gdaltest.py cannot import gdal from osgeo.
> 
> I found the gdal\swig\python\osgeo folder and tried adding that to 
> PYTHONPATH. Same result.
> 
> Alan Stewart
> Senior Software Engineer
> TerraGo Technologies
> 3200 Windy Hill Road, Suite 1550W
> Atlanta, GA 30339 USA
> O.  +1 678.391.9615
> 
> www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.
> terragotech.com>


--
Spatialys - Geospatial professional services http://www.spatialys.com

From even.rouault at spatialys.com  Wed Oct 10 07:42:20 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Oct 2018 16:42:20 +0200
Subject: [gdal-dev] vsis3/vsicurl allowed-extensions per path?
In-Reply-To: <CAFLLRpLs_a1oYVPcvT7-2nbAM_NRNSrxUrOY4RdEqXisxxgajg@mail.gmail.com>
References: <CAFLLRpLs_a1oYVPcvT7-2nbAM_NRNSrxUrOY4RdEqXisxxgajg@mail.gmail.com>
Message-ID: <5560176.599b15m7dE@even-i700>

On mercredi 10 octobre 2018 14:38:51 CEST Robert Coup wrote:
> Hi all,
> 
> Wondering about being able to set CPL_VSIL_CURL_ALLOWED_EXTENSIONS on a
> specific dataset rather than as a global option. This would allow opening
> multiple files in the same process without needing to manage setting &
> resetting configuration contexts.
> 
> eg. gdal.Open("/vsis3?ext=.tif/mybucket/mypath/my.tif", ...)

Hum, we should treat the path to the object as a real URL argument then, so something like

/vsis3?ext=.tif&object=mybucket/path/to/my.tif

with the path value being URL-encoded if needed (like the similar syntax added in 2.3 for /vsicurl/: 
https://gdal.org/gdal_virtual_file_systems.html#gdal_virtual_file_systems_vsicurl )

> 
> Another alternative would be to have it as an Open Option to pass to
> gdal.OpenEx(), though they seem designed for driver-specific options rather
> than access-method.

That one would be nice, but tricky. Basically, the config option must be set at the time a
Open() or Stat() action is done, but GDALOpen() has no control on when the driver will
performs such actions. One could presume they will be done by the open code of the driver, but
who knows if a driver might not do deferred access, after the Open() method has been
completed. And such a driver is for example the GTiff driver that differ opening of
side-car files until really needed (for example GetGeoTransform() will search for a .wld
file if no internal georeferencing was found)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From robert.coup at koordinates.com  Wed Oct 10 08:51:35 2018
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 10 Oct 2018 16:51:35 +0100
Subject: [gdal-dev] vsis3/vsicurl allowed-extensions per path?
In-Reply-To: <5560176.599b15m7dE@even-i700>
References: <CAFLLRpLs_a1oYVPcvT7-2nbAM_NRNSrxUrOY4RdEqXisxxgajg@mail.gmail.com>
 <5560176.599b15m7dE@even-i700>
Message-ID: <CAFLLRpJC9G=K5ZNDXfrA=HV=ODkpU_QHoG1R00cQss=CD7Q-3w@mail.gmail.com>

Hi Even,

On Wed, 10 Oct 2018 at 15:42, Even Rouault <even.rouault at spatialys.com>
wrote:

> > eg. gdal.Open("/vsis3?ext=.tif/mybucket/mypath/my.tif", ...)
>
> Hum, we should treat the path to the object as a real URL argument then,
> so something like
>
> /vsis3?ext=.tif&object=mybucket/path/to/my.tif
>

If we're splitting it out, should bucket and the object key (S3 uses the
term "key" in it's documentation) be separate parameters?

ie.
/vsis3?bucket=mybucket&key=path/to/my.tif&ext=.tif
/vsis3?bucket=mybucket&key=path/to/my.tif&ext=.tif&ext=.tif.aux.xml
/vsis3?bucket=mybucket&key=path/to/my.tif&ext


> with the path value being URL-encoded if needed (like the similar syntax
> added in 2.3 for /vsicurl/:
>
> https://gdal.org/gdal_virtual_file_systems.html#gdal_virtual_file_systems_vsicurl
> )
>
>
Sure.

Are there other options that would be useful per-dataset?
GDAL_READDIR_ON_OPEN is exposed as ?list_dir=yes|no for vsicurl, maybe that
should be added here too?


> >
> > Another alternative would be to have it as an Open Option to pass to
> > gdal.OpenEx(), though they seem designed for driver-specific options
> rather
> > than access-method.
>
> That one would be nice, but tricky. Basically, the config option must be
> set at the time a
> Open() or Stat() action is done, but GDALOpen() has no control on when the
> driver will
> performs such actions. One could presume they will be done by the open
> code of the driver, but
> who knows if a driver might not do deferred access, after the Open()
> method has been
> completed.


Makes sense.

Cheers,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181010/1901e4d8/attachment.html>

From sean at mapbox.com  Wed Oct 10 08:58:03 2018
From: sean at mapbox.com (Sean Gillies)
Date: Wed, 10 Oct 2018 09:58:03 -0600
Subject: [gdal-dev] vsis3/vsicurl allowed-extensions per path?
In-Reply-To: <CAFLLRpLs_a1oYVPcvT7-2nbAM_NRNSrxUrOY4RdEqXisxxgajg@mail.gmail.com>
References: <CAFLLRpLs_a1oYVPcvT7-2nbAM_NRNSrxUrOY4RdEqXisxxgajg@mail.gmail.com>
Message-ID: <CADPhZXwA1NGXxN9q1pfeQ4BcJBJ6Aj2rRp+S88rJ_J7w+TurbA@mail.gmail.com>

Hi Rob,

On Wed, Oct 10, 2018 at 7:39 AM Robert Coup <robert.coup at koordinates.com>
wrote:

> Hi all,
>
> Wondering about being able to set CPL_VSIL_CURL_ALLOWED_EXTENSIONS on a
> specific dataset rather than as a global option. This would allow opening
> multiple files in the same process without needing to manage setting &
> resetting configuration contexts.
>

Configuration management doesn't have to be so bad. I have an example of
how to do Rasterio-style configuration contexts, including reset, using
GDAL's Python bindings at


https://rasterio.readthedocs.io/en/latest/topics/configuration.html#gdal-example

I'm not a voter, but would be unhappy if we added this kind of option to
GDAL's paths. The syntax is already quite complex.

The open options approach is reasonable, if not easy to do.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181010/93a7b965/attachment.html>

From robert.coup at koordinates.com  Wed Oct 10 10:11:59 2018
From: robert.coup at koordinates.com (Robert Coup)
Date: Wed, 10 Oct 2018 18:11:59 +0100
Subject: [gdal-dev] vsis3/vsicurl allowed-extensions per path?
In-Reply-To: <CADPhZXwxTENOMTYw47eiqrfVJoa_JmGsQOQ_i_skQM1b9HSmpw@mail.gmail.com>
References: <CAFLLRpLs_a1oYVPcvT7-2nbAM_NRNSrxUrOY4RdEqXisxxgajg@mail.gmail.com>
 <CADPhZXwxTENOMTYw47eiqrfVJoa_JmGsQOQ_i_skQM1b9HSmpw@mail.gmail.com>
Message-ID: <CAFLLRpLGjvtWhHFGYtMkHhErFA5Cmh0hu2oAH4x6ruSHvakATQ@mail.gmail.com>

Hi Sean,

Configuration management doesn't have to be so bad. I have an example of
> how to do Rasterio-style configuration contexts, including reset, using
> GDAL's Python bindings at
>
>
> https://rasterio.readthedocs.io/en/latest/topics/configuration.html#gdal-example
>

(I love context managers)

How does it handle multiple open datasets with different configurations
though? AFAIK underneath there's only one per-thread config in GDAL, not
one per dataset? Or does it push/pop configurations every time you call the
underlying GDAL functions?

Cheers,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181010/4bb23417/attachment-0001.html>

From David.Bekaert at jpl.nasa.gov  Wed Oct 10 10:28:59 2018
From: David.Bekaert at jpl.nasa.gov (Bekaert, David (334H))
Date: Wed, 10 Oct 2018 17:28:59 +0000
Subject: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader
Message-ID: <74E98011-8FB2-4EBA-86E3-75A572F16D37@jpl.nasa.gov>

Dear GDAL developers,

I generated a netcdf4 file using python netCDF4 module.
As indicated in the documentation, GDAL opens this file with the HDF5 reader without problem.
I am also able to properly display the geocoded file with QGIS (no-data not applied) and panoply (no-data applied).

From reading through the code I believe the GDAL hdf5 reader does not parse a “no-data” attribute of the dataset.
For the GDAL netcdf reader I found this is being tracked among other attributes.
Do you have any advice on what I need to do for GDAL to capture e.g. “missing_value” , “_FillValue” or even a “nodata” attribute from the netcdf4 datasets using the hdf5 reader?

Thank you for your advice and help,
With kind regards,

David

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181010/139c602e/attachment.html>

From even.rouault at spatialys.com  Wed Oct 10 10:36:12 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 10 Oct 2018 19:36:12 +0200
Subject: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader
In-Reply-To: <74E98011-8FB2-4EBA-86E3-75A572F16D37@jpl.nasa.gov>
References: <74E98011-8FB2-4EBA-86E3-75A572F16D37@jpl.nasa.gov>
Message-ID: <3558279.cc4vXA9B89@even-i700>

On mercredi 10 octobre 2018 17:28:59 CEST Bekaert, David (334H) wrote:
> Dear GDAL developers,
> 
> I generated a netcdf4 file using python netCDF4 module.
> As indicated in the documentation, GDAL opens this file with the HDF5 reader
> without problem.
 I am also able to properly display the geocoded file with
> QGIS (no-data not applied) and panoply (no-data applied). 
> From reading through the code I believe the GDAL hdf5 reader does not parse
> a “no-data” attribute of the dataset.
 For the GDAL netcdf reader I found
> this is being tracked among other attributes. Do you have any advice on
> what I need to do for GDAL to capture e.g. “missing_value” , “_FillValue”
> or even a “nodata” attribute from the netcdf4 datasets using the hdf5
> reader? 

My main question would be: why not to use the netCDF driver ? It is supposed 
to deal with that already.

Otherwise I guess you could use the GH5_FetchAttribute() convenience function 
to retrieve those attributes and expose them as nodata in the HDF5 driver.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aurelien.albert at outlook.com  Thu Oct 11 03:28:27 2018
From: aurelien.albert at outlook.com (=?iso-8859-1?Q?Aur=E9lien_Albert?=)
Date: Thu, 11 Oct 2018 10:28:27 +0000
Subject: [gdal-dev] Best method to extract regions from a raster into a
	memory buffer
Message-ID: <DB6PR0902MB1781A59EFA248E2EDFE123F1F3E10@DB6PR0902MB1781.eurprd09.prod.outlook.com>

Hi,



I'm doing C++ applications and I'm familiar with GDAL 1.7 C/C++ API. For a new application, I'm switching to GDAL 2.2.

In this application, I have the need to extract a region from a raster :



Let's say I have 4000px x 4000px elevation raster, covering the whole earth, in EPSG 4326.

Now I want to extract the rectangle region between two points (lat_1/long_1) and (lat_2/long_2) in a 128px x 128px tile.

I don't want to extract this region in a file, but in memory, to create a data buffer and then work on this buffer with my application.



Which is the best/more performant way to do this ?



Knowing that :

 1/ the region extraction may need some resampling, so I need to be able to configure the resampling method

 2/ the extracted region boundaries do no necessary fit on exact pixels of the original dataset

 3/ the SRS will not be modified, but I may need a vertical datum shift (EGM96 to WGS84 for example)

 4/ the extraction will be repeated a lot (a lot !) to extract several "tiles" with different bounds : the application can work on really big rasters, so I prefer to avoid complex objects initialization for each extraction



Should I :



- create a wrapped dataset (VRTDataSet) and make RasterIO on it ? This seems to solve 1/ and 3/ and 4/, but what about 2/ ?



- use a WarpOperation and then execute WarpRegionToBuffer method ? This seems to solve 1/ and 2/ and 3/, but what about 4/ ?



Any help will be appreciated.





Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181011/951806f4/attachment.html>

From jluis at ualg.pt  Thu Oct 11 07:47:27 2018
From: jluis at ualg.pt (=?iso-8859-1?Q?Joaquim_Manuel_Freire_Lu=EDs?=)
Date: Thu, 11 Oct 2018 14:47:27 +0000
Subject: [gdal-dev] Best method to extract regions from a raster into
	a	memory buffer
In-Reply-To: <DB6PR0902MB1781A59EFA248E2EDFE123F1F3E10@DB6PR0902MB1781.eurprd09.prod.outlook.com>
References: <DB6PR0902MB1781A59EFA248E2EDFE123F1F3E10@DB6PR0902MB1781.eurprd09.prod.outlook.com>
Message-ID: <DB5PR0401MB18007C8E25AFB15371F824B3A6E10@DB5PR0401MB1800.eurprd04.prod.outlook.com>

Hi,

I think you need an extra point. If you will be doing resampling than you need extra row/columns for the boundary conditions (one for linear, two for spline/bicubic). Regarding 2) the options are:  round to closest node, or to the inner or to the outer node.

Joaquim


From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Aurélien Albert
Sent: Thursday, October 11, 2018 11:28 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Best method to extract regions from a raster into a memory buffer


Hi,



I'm doing C++ applications and I'm familiar with GDAL 1.7 C/C++ API. For a new application, I'm switching to GDAL 2.2.

In this application, I have the need to extract a region from a raster :



Let's say I have 4000px x 4000px elevation raster, covering the whole earth, in EPSG 4326.

Now I want to extract the rectangle region between two points (lat_1/long_1) and (lat_2/long_2) in a 128px x 128px tile.

I don't want to extract this region in a file, but in memory, to create a data buffer and then work on this buffer with my application.



Which is the best/more performant way to do this ?



Knowing that :

 1/ the region extraction may need some resampling, so I need to be able to configure the resampling method

 2/ the extracted region boundaries do no necessary fit on exact pixels of the original dataset

 3/ the SRS will not be modified, but I may need a vertical datum shift (EGM96 to WGS84 for example)

 4/ the extraction will be repeated a lot (a lot !) to extract several "tiles" with different bounds : the application can work on really big rasters, so I prefer to avoid complex objects initialization for each extraction



Should I :



- create a wrapped dataset (VRTDataSet) and make RasterIO on it ? This seems to solve 1/ and 3/ and 4/, but what about 2/ ?



- use a WarpOperation and then execute WarpRegionToBuffer method ? This seems to solve 1/ and 2/ and 3/, but what about 4/ ?



Any help will be appreciated.





Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181011/4754dcf7/attachment.html>

From aurelien.albert at outlook.com  Thu Oct 11 07:56:33 2018
From: aurelien.albert at outlook.com (=?iso-8859-1?Q?Aur=E9lien_Albert?=)
Date: Thu, 11 Oct 2018 14:56:33 +0000
Subject: [gdal-dev] Best method to extract regions from a raster
	into	a	memory buffer
In-Reply-To: <DB5PR0401MB18007C8E25AFB15371F824B3A6E10@DB5PR0401MB1800.eurprd04.prod.outlook.com>
References: <DB6PR0902MB1781A59EFA248E2EDFE123F1F3E10@DB6PR0902MB1781.eurprd09.prod.outlook.com>,
 <DB5PR0401MB18007C8E25AFB15371F824B3A6E10@DB5PR0401MB1800.eurprd04.prod.outlook.com>
Message-ID: <DB6PR0902MB178114248C369D1CF0E3D9C2F3E10@DB6PR0902MB1781.eurprd09.prod.outlook.com>

Yes, you're right, I may need some extra pixels on the boundaries (depend on the resampling method).


Does not GDAL manage this by itself ? I mean, if you ask for a warp, it doesn't read all necessary pixel to do the resampling ?


Since GDAL 2.0, there is some API changes, and I'm looking for the most efficient way to do my operation : extract a region specified with geographic coordinates (in the same SRS as the data source) to a fixed size pixel buffer. Resampling should occur because the pixel count of the extracted region (source) and pixel count of the buffer (destination) will not fit.



________________________________
De : gdal-dev <gdal-dev-bounces at lists.osgeo.org> de la part de Joaquim Manuel Freire Luís <jluis at ualg.pt>
Envoyé : jeudi 11 octobre 2018 16:47:27
À : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] Best method to extract regions from a raster into a memory buffer


Hi,



I think you need an extra point. If you will be doing resampling than you need extra row/columns for the boundary conditions (one for linear, two for spline/bicubic). Regarding 2) the options are:  round to closest node, or to the inner or to the outer node.



Joaquim





From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Aurélien Albert
Sent: Thursday, October 11, 2018 11:28 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Best method to extract regions from a raster into a memory buffer



Hi,



I'm doing C++ applications and I'm familiar with GDAL 1.7 C/C++ API. For a new application, I'm switching to GDAL 2.2.

In this application, I have the need to extract a region from a raster :



Let's say I have 4000px x 4000px elevation raster, covering the whole earth, in EPSG 4326.

Now I want to extract the rectangle region between two points (lat_1/long_1) and (lat_2/long_2) in a 128px x 128px tile.

I don't want to extract this region in a file, but in memory, to create a data buffer and then work on this buffer with my application.



Which is the best/more performant way to do this ?



Knowing that :

 1/ the region extraction may need some resampling, so I need to be able to configure the resampling method

 2/ the extracted region boundaries do no necessary fit on exact pixels of the original dataset

 3/ the SRS will not be modified, but I may need a vertical datum shift (EGM96 to WGS84 for example)

 4/ the extraction will be repeated a lot (a lot !) to extract several "tiles" with different bounds : the application can work on really big rasters, so I prefer to avoid complex objects initialization for each extraction



Should I :



- create a wrapped dataset (VRTDataSet) and make RasterIO on it ? This seems to solve 1/ and 3/ and 4/, but what about 2/ ?



- use a WarpOperation and then execute WarpRegionToBuffer method ? This seems to solve 1/ and 2/ and 3/, but what about 4/ ?



Any help will be appreciated.





Thanks


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181011/cd899a31/attachment-0001.html>

From sean at mapbox.com  Thu Oct 11 16:18:29 2018
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 11 Oct 2018 17:18:29 -0600
Subject: [gdal-dev] vsis3/vsicurl allowed-extensions per path?
In-Reply-To: <CAFLLRpLGjvtWhHFGYtMkHhErFA5Cmh0hu2oAH4x6ruSHvakATQ@mail.gmail.com>
References: <CAFLLRpLs_a1oYVPcvT7-2nbAM_NRNSrxUrOY4RdEqXisxxgajg@mail.gmail.com>
 <CADPhZXwxTENOMTYw47eiqrfVJoa_JmGsQOQ_i_skQM1b9HSmpw@mail.gmail.com>
 <CAFLLRpLGjvtWhHFGYtMkHhErFA5Cmh0hu2oAH4x6ruSHvakATQ@mail.gmail.com>
Message-ID: <CADPhZXz0ZQ2vDhPACUMDkPpf81FGT021p4EaH1LmqZiXfTnVjQ@mail.gmail.com>

Hi Rob,

On Wed, Oct 10, 2018 at 11:12 AM Robert Coup <robert.coup at koordinates.com>
wrote:

> Hi Sean,
>
> Configuration management doesn't have to be so bad. I have an example of
>> how to do Rasterio-style configuration contexts, including reset, using
>> GDAL's Python bindings at
>>
>>
>> https://rasterio.readthedocs.io/en/latest/topics/configuration.html#gdal-example
>>
>
> (I love context managers)
>
> How does it handle multiple open datasets with different configurations
> though? AFAIK underneath there's only one per-thread config in GDAL, not
> one per dataset? Or does it push/pop configurations every time you call the
> underlying GDAL functions?
>
> Cheers,
>
> Rob :)
>

I don't have a pushing and popping dataset wrapper handy, but I think that
would work. In Python it would be something like the following right?

  wrapper = ConfigWrapper(gdal.Open(path),
CPL_VSIL_CURL_ALLOWED_EXTENSIONS=".tif")
  data = wrapper.ReadAsArray()

With the wrapper pushing that config option before it delegates and popping
it after. As near as I can tell, CPL_VSIL_CURL_ALLOWED_EXTENSIONS only
influences the Open() and Stat() calls for /vsicurl, so maybe the above
would be overkill. Calling ReadAsArray shouldn't trigger a scan of
auxiliary files.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181011/39d7b5d6/attachment.html>

From andre+joost at nurfuerspam.de  Fri Oct 12 02:36:53 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Fri, 12 Oct 2018 11:36:53 +0200
Subject: [gdal-dev] Netcdf coordinates swapped
Message-ID: <ppppu2$g60$1@blaine.gmane.org>

Dear list,

can anybody give some insight on this netcdf file:

  https://github.com/Andre-J/testing/raw/master/3A-DAY.nc

ncdump reports:

netcdf \3a-day {
dimensions:
	AD = 2 ;
	chn = 2 ;
	nlon = 1440 ;
	nlat = 536 ;

and Panoply displays it fine, but gdal_translate swaps the coordinates, 
returning a 536x1440 raster.

Is there any NCO or GDAL option to sanitize the axes? Should I open a 
ticket for it?

Thanks in advance,
Andre Joost


From even.rouault at spatialys.com  Fri Oct 12 04:16:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 12 Oct 2018 13:16:09 +0200
Subject: [gdal-dev] Netcdf coordinates swapped
In-Reply-To: <ppppu2$g60$1@blaine.gmane.org>
References: <ppppu2$g60$1@blaine.gmane.org>
Message-ID: <1959524.dUr2JizLuM@even-i700>

On vendredi 12 octobre 2018 11:36:53 CEST Andre Joost wrote:
> Dear list,
> 
> can anybody give some insight on this netcdf file:
> 
>   https://github.com/Andre-J/testing/raw/master/3A-DAY.nc
> 
> ncdump reports:
> 
> netcdf \3a-day {
> dimensions:
> 	AD = 2 ;
> 	chn = 2 ;
> 	nlon = 1440 ;
> 	nlat = 536 ;
> 
> and Panoply displays it fine, but gdal_translate swaps the coordinates,
> returning a 536x1440 raster.

Actually, letting aside the geographic semantics and only reasoning in term of 
image/cube, this is a width=536xheight=1440 raster since the fastest varying 
dimension is the last one in the following declaration, that is nlat

        float precipRateNearSurfMean(AD, chn, nlon, nlat) ;

So if you want to present it with rows in GDAL raster = values at same 
latitude, you would need to flip it diagonaly, which is generally inefficient 
for large rasters since that goes against the natural data organization in the 
file.

> 
> Is there any NCO or GDAL option to sanitize the axes? 

Can't say for NCO, but not in GDAL. Would require a specific development to 
handle such dataset that doesn't follow the usual CF conventions.

You could possibly use numpy to do the matrix transposition.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aledonati2 at gmail.com  Fri Oct 12 05:56:42 2018
From: aledonati2 at gmail.com (julius6)
Date: Fri, 12 Oct 2018 05:56:42 -0700 (MST)
Subject: [gdal-dev] VectorTranslate(ogr2ogr) batch dataset import to postgis
Message-ID: <1539349002609-0.post@n6.nabble.com>

Dear list,

I'm facing some problems with the import of datasets into a postgis
geodatabase, using python and multiprocessing
There's a process consumer (one each for each CPU) which calls conversion
tasks, each taking care of importing a s57 dataset using the
gdal.VectorTranslate python API.
Each s57 (layer,geometry type) pair goes into a separate layer, for example
lndare_point, lndare_polygon, etc. I'm using -append to avoid creating the
database structure in advance, and leave this burden to gdal.VectorTranslate
(ultimately CreateLayer), because s57 has a very complex schema and I would
like to skip this part of the job for the moment.
There's no kind of process synchronization, each task just calls
gdal.VectorTranslate against a dataset. I assume (maybe I'm wrong..) that
postgres will help with concurrent connections.

I'm getting a few errors like this:
CREATE TABLE "s57"."lndare_polygon" ( ... ) | ERROR: a duplicate key value
violates unique constraint "pg_type_typname_nsp_index" | DETAIL:  The key
(typname, typnamespace)=(lndare_polygon_ogc_fid_seq, 30188621) already
exists.
which I guess is a race condition between two processes calling CreateLayer
on the same layer.

Errors come up in the early stage of conversion, when not all tables have
been created, then no more.

Are there ogr2ogr options (-gt, -ds_transaction, -doo with
PRELUDE_STATEMENTS,CLOSING_STATEMENTS ...) which could help get rid of those
errors in my use case?
Or do you think there's no other way than creating the database structure in
advance?





-----
Thanks

Regards,
Alessandro Donati
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From Piyush.Agram at jpl.nasa.gov  Sat Oct 13 12:00:14 2018
From: Piyush.Agram at jpl.nasa.gov (Agram, Piyush S (334D))
Date: Sat, 13 Oct 2018 19:00:14 +0000
Subject: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader
Message-ID: <2384D1F3-5A48-4D80-93DC-17B967049230@jpl.nasa.gov>

Hi Even,
     Looking into the issue, I think the NETCDF reader does not read datasets located insides groups for Rasters. There are 2 specific parts of the reader that seems to be the issue:

1. If the drivers does not find 2 arrays that are dimensions under root it bails. This would need to be updated if data is organized within groups and there are no dims/vars at the root level.
2. It only looks into the groups when used for reading vectors and when it does it only parses the string types for geometry definitions. This would need to be updated. 

Some related questions to see if anybody is already planning to contribute these capabilities:

1. Update to NETCDF raster driver to look into sub-groups as well? The spec does not seem to talk about this. Assuming they are trying to be backward compatible with formats that did not support groups - is this acceptable?
2. Support for CF conventions in HDF5 reader? NASA/ESRI seem to be happy working with CF-compliant HDF5.

Adding either support will let people use GDAL with xarray etc. 

Piyush 



From julien.demaria at acri-st.fr  Sat Oct 13 16:08:40 2018
From: julien.demaria at acri-st.fr (Julien Demaria)
Date: Sat, 13 Oct 2018 23:08:40 +0000
Subject: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader
In-Reply-To: <2384D1F3-5A48-4D80-93DC-17B967049230@jpl.nasa.gov>
References: <2384D1F3-5A48-4D80-93DC-17B967049230@jpl.nasa.gov>
Message-ID: <3B970FB76033264EB34479EC8A365E110437CC7ED0@vwiexc030.acri.local>

Hi,



I have already already implemented NetCDF4 groups support for GDAL in 2015 and use it to read for example NASA OceanColor MODIS/VIIRS L2 products, see the attached email.

Unfortunately I never found enough time to add corresponding GDAL autotests (covering all my modifications) to be able to provide these improvements to the GDAL community.

The other problem is that I implemented this in GDAL 1.11 so porting to latest GDAL need some work, I started to do that in 2016 but never finished...

But I think my code is good and it will be a pity if not reused...

I think I can try to finish the porting to the latest GDAL and provide it to GitHub, but I'm still not sure to have enough time to implement all needed corresponding GDAL autotests. If you want to contribute you are welcome! ;-)



Best Regards,

Julien



-----Message d'origine-----
De : gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Agram, Piyush S (334D)
Envoyé : samedi 13 octobre 2018 21:00
À : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader



Hi Even,

     Looking into the issue, I think the NETCDF reader does not read datasets located insides groups for Rasters. There are 2 specific parts of the reader that seems to be the issue:



1. If the drivers does not find 2 arrays that are dimensions under root it bails. This would need to be updated if data is organized within groups and there are no dims/vars at the root level.

2. It only looks into the groups when used for reading vectors and when it does it only parses the string types for geometry definitions. This would need to be updated.



Some related questions to see if anybody is already planning to contribute these capabilities:



1. Update to NETCDF raster driver to look into sub-groups as well? The spec does not seem to talk about this. Assuming they are trying to be backward compatible with formats that did not support groups - is this acceptable?

2. Support for CF conventions in HDF5 reader? NASA/ESRI seem to be happy working with CF-compliant HDF5.



Adding either support will let people use GDAL with xarray etc.



Piyush





_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org

https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181013/373e069f/attachment.html>
-------------- next part --------------
An embedded message was scrubbed...
From: Julien Demaria <julien.demaria at acri-st.fr>
Subject: [gdal-dev] NetCDF driver improvements (including groups support)
Date: Thu, 5 Feb 2015 16:10:47 +0000
Size: 8249
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181013/373e069f/attachment.mht>

From Piyush.Agram at jpl.nasa.gov  Sat Oct 13 18:01:23 2018
From: Piyush.Agram at jpl.nasa.gov (Agram, Piyush S (334D))
Date: Sun, 14 Oct 2018 01:01:23 +0000
Subject: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader
In-Reply-To: <3B970FB76033264EB34479EC8A365E110437CC7ED0@vwiexc030.acri.local>
References: <2384D1F3-5A48-4D80-93DC-17B967049230@jpl.nasa.gov>
 <3B970FB76033264EB34479EC8A365E110437CC7ED0@vwiexc030.acri.local>
Message-ID: <0F34504E-A817-4B45-A6D4-0D36653E6B57@jpl.nasa.gov>

Hi Julien,
     If you want to put up your code on github, I can volunteer to help port it to 2.x. Generating unittests would not be a problem. Will probably take existing datasets in the test suite and add a group around the datasets to begin with.
Not very familiar with MODIS/VIIRS but looks like its nc4 with groups but all the dimensions are datasets under root. Maybe we can generalize this too?

Piyush

From: Julien Demaria <julien.demaria at acri-st.fr>
Date: Saturday, October 13, 2018 at 4:09 PM
To: "Agram, Piyush S (334D)" <Piyush.Agram at jpl.nasa.gov>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: RE: parsing of netcdf4 no-data values in hdf5 reader


Hi,



I have already already implemented NetCDF4 groups support for GDAL in 2015 and use it to read for example NASA OceanColor MODIS/VIIRS L2 products, see the attached email.

Unfortunately I never found enough time to add corresponding GDAL autotests (covering all my modifications) to be able to provide these improvements to the GDAL community.

The other problem is that I implemented this in GDAL 1.11 so porting to latest GDAL need some work, I started to do that in 2016 but never finished...

But I think my code is good and it will be a pity if not reused...

I think I can try to finish the porting to the latest GDAL and provide it to GitHub, but I'm still not sure to have enough time to implement all needed corresponding GDAL autotests. If you want to contribute you are welcome! ;-)



Best Regards,

Julien



-----Message d'origine-----
De : gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Agram, Piyush S (334D)
Envoyé : samedi 13 octobre 2018 21:00
À : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader



Hi Even,

     Looking into the issue, I think the NETCDF reader does not read datasets located insides groups for Rasters. There are 2 specific parts of the reader that seems to be the issue:



1. If the drivers does not find 2 arrays that are dimensions under root it bails. This would need to be updated if data is organized within groups and there are no dims/vars at the root level.

2. It only looks into the groups when used for reading vectors and when it does it only parses the string types for geometry definitions. This would need to be updated.



Some related questions to see if anybody is already planning to contribute these capabilities:



1. Update to NETCDF raster driver to look into sub-groups as well? The spec does not seem to talk about this. Assuming they are trying to be backward compatible with formats that did not support groups - is this acceptable?

2. Support for CF conventions in HDF5 reader? NASA/ESRI seem to be happy working with CF-compliant HDF5.



Adding either support will let people use GDAL with xarray etc.



Piyush





_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org

https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181014/861318d0/attachment-0001.html>

From julien.demaria at acri-st.fr  Mon Oct 15 04:29:09 2018
From: julien.demaria at acri-st.fr (Julien Demaria)
Date: Mon, 15 Oct 2018 11:29:09 +0000
Subject: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader
In-Reply-To: <0F34504E-A817-4B45-A6D4-0D36653E6B57@jpl.nasa.gov>
References: <2384D1F3-5A48-4D80-93DC-17B967049230@jpl.nasa.gov>
 <3B970FB76033264EB34479EC8A365E110437CC7ED0@vwiexc030.acri.local>
 <0F34504E-A817-4B45-A6D4-0D36653E6B57@jpl.nasa.gov>
Message-ID: <3B970FB76033264EB34479EC8A365E110437CC8206@vwiexc030.acri.local>

Hi Piyush,

Thanks for your help proposal!
I am working on porting changes to latest GDAL, I think it will be available tomorrow on GitHub.
For this step I prefer finish it myself because I have already worked a lot on the NetCDF driver and it’s a big piece of code (10k lines!) not always easy to navigate...
My modifications are “generic” and CF-oriented so they should handle all sort of NetCDF4 files. Can I have access to some examples of the NC4 files you want to read?

Julien

De : Agram, Piyush S (334D) [mailto:Piyush.Agram at jpl.nasa.gov]
Envoyé : dimanche 14 octobre 2018 03:01
À : Julien Demaria; gdal-dev at lists.osgeo.org
Objet : Re: parsing of netcdf4 no-data values in hdf5 reader

Hi Julien,
     If you want to put up your code on github, I can volunteer to help port it to 2.x. Generating unittests would not be a problem. Will probably take existing datasets in the test suite and add a group around the datasets to begin with.
Not very familiar with MODIS/VIIRS but looks like its nc4 with groups but all the dimensions are datasets under root. Maybe we can generalize this too?

Piyush

From: Julien Demaria <julien.demaria at acri-st.fr>
Date: Saturday, October 13, 2018 at 4:09 PM
To: "Agram, Piyush S (334D)" <Piyush.Agram at jpl.nasa.gov>, "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: RE: parsing of netcdf4 no-data values in hdf5 reader


Hi,



I have already already implemented NetCDF4 groups support for GDAL in 2015 and use it to read for example NASA OceanColor MODIS/VIIRS L2 products, see the attached email.

Unfortunately I never found enough time to add corresponding GDAL autotests (covering all my modifications) to be able to provide these improvements to the GDAL community.

The other problem is that I implemented this in GDAL 1.11 so porting to latest GDAL need some work, I started to do that in 2016 but never finished...

But I think my code is good and it will be a pity if not reused...

I think I can try to finish the porting to the latest GDAL and provide it to GitHub, but I'm still not sure to have enough time to implement all needed corresponding GDAL autotests. If you want to contribute you are welcome! ;-)



Best Regards,

Julien



-----Message d'origine-----
De : gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] De la part de Agram, Piyush S (334D)
Envoyé : samedi 13 octobre 2018 21:00
À : gdal-dev at lists.osgeo.org
Objet : Re: [gdal-dev] parsing of netcdf4 no-data values in hdf5 reader



Hi Even,

     Looking into the issue, I think the NETCDF reader does not read datasets located insides groups for Rasters. There are 2 specific parts of the reader that seems to be the issue:



1. If the drivers does not find 2 arrays that are dimensions under root it bails. This would need to be updated if data is organized within groups and there are no dims/vars at the root level.

2. It only looks into the groups when used for reading vectors and when it does it only parses the string types for geometry definitions. This would need to be updated.



Some related questions to see if anybody is already planning to contribute these capabilities:



1. Update to NETCDF raster driver to look into sub-groups as well? The spec does not seem to talk about this. Assuming they are trying to be backward compatible with formats that did not support groups - is this acceptable?

2. Support for CF conventions in HDF5 reader? NASA/ESRI seem to be happy working with CF-compliant HDF5.



Adding either support will let people use GDAL with xarray etc.



Piyush





_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org

https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181015/94dee198/attachment.html>

From Odd-Ragnar.Lydersen at powel.no  Mon Oct 15 23:08:49 2018
From: Odd-Ragnar.Lydersen at powel.no (Odd Ragnar Lydersen)
Date: Tue, 16 Oct 2018 06:08:49 +0000
Subject: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
In-Reply-To: <350ad6d6-8041-c422-2a6b-44d1f145639c@gmail.com>
References: <06a892ef312b4e5aa8b58c40a65d1b9f@ITTRHEX001.powelasa.powel.com>
 <1539090381809-0.post@n6.nabble.com>
 <452e1da6-ed52-5d4a-7fdd-54eed1c83e08@jacobs-university.de>
 <993c271bbab14c30a6c6dea969f1e70a@ITTRHEX001.powelasa.powel.com>
 <350ad6d6-8041-c422-2a6b-44d1f145639c@gmail.com>
Message-ID: <b053c63f269a4286a5ac69a25f74a647@ITTRHEX001.powelasa.powel.com>

Thanks for the help.
It works like it's supposed to now.

If I use it for this other wcs though, I get an error:
 - URL: "WCS:http://openwms.statkart.no/skwms1/wcs.dtm?VERSION=1.1.1&identifiers=land_utm33_10m"
 - Error message: ERROR 1: msWCSGetCoverage(): WCS server error. A non-zero RESX/RESY or WIDTH/HEIGHT is required but neither was provided.
(If I use vesion 2.0.1 then it's fine)

Is it a server error?
Is there a way around it, by adding some extra parameters?

>Odd-Ragnar<

-----Original Message-----
From: Ari Jolma <ari.jolma at gmail.com> 
Sent: onsdag 10. oktober 2018 15:02
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()

Hi Odd Ragnar,

Without going very deep into this, I would do (and tried)

gdalinfo "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32"

This tells me that the preferred version of the service is 2.0.1 and it serves coverage Coverage1. However, if I want to use service version 1.1.1, I do

gdalinfo
"WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?version=1.1.1"

This tells me that version is ok but now the coverage name is 1, so

gdalinfo
"WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?version=1.1.1&coverage=1"

tells me details about this coverage which seems to be huge. Now that is the src_dataset string to be used in gdal_translate.

Ari


Odd Ragnar Lydersen kirjoitti 10.10.2018 klo 14:11:
> I have investigated some more now, and I've found that the problem is perhaps the way I'm using the data source/service description file.
>
> Here is what I do:
> 1) I open the wcs by providing the coverage I want by using describecoverage in the url:
> std::string wcsDescribeCoverage = 
> "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?SERVICE=WCS&REQU
> EST=DescribeCoverage&IDENTIFIERS=1&VERSION=1.1.1";
> GDALDatasetUniquePtr 
> poDS1(GDALDataset::Open(wcsGetCapabilites.c_str(), GDAL_OF_READONLY, 
> pOptionDriverName, pOptionOpenOptions, nullptr));
>
> Now I have a valid data set, poDS1.
> And a service description file has been created in the cache:
> <WCS_GDAL>
>    <ServiceURL>https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?</ServiceURL>
>    <Version>1.1.1</Version>
>    <CoverageName>1</CoverageName>
>    <Parameters>SERVICE=WCS&amp;REQUEST=DescribeCoverage</Parameters>
>    <TIMEOUT>300</TIMEOUT>
> </WCS_GDAL>
>
> 2) Then I run GDALTranslate(), with a valid argList 
> GDALTranslateOptions *TranslateOptions = 
> GDALTranslateOptionsNew(argList, NULL); GDALDatasetH hOutputDataset = 
> GDALTranslate("./test.xyz", GDALDataset::ToHandle(poDS2.get()), 
> TranslateOptions, NULL);
>
> During the GDALTranslate() I find that in wcsdataset110.cpp, WCSDataset110::GetCoverageRequest(), line 227:
> - After the GetCoverage request have been constructed, the parameters from the service description file is used to overwrite the created request, making it a DescribeCoverage request as stated in the file.
> - And DescribeCoverage don't want IDENTIFIER=someId, but 
> IDENTIFIERS=someId
>
> Then, my question is, how am I supposed to do this, to make it right?
>
>> Odd-Ragnar<
>
> -----Original Message-----
> From: Peter Baumann <p.baumann at jacobs-university.de>
> Sent: tirsdag 9. oktober 2018 15:10
> To: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>; 
> gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] WCS: Bug in 
> WCSDataset110::GetCoverageRequest()
>
>
>
> On 09.10.2018 15:06, jratike80 wrote:
>> Odd Ragnar Lydersen wrote
>>> I think there is a bug in WCSDataset110::GetCoverageRequest()
>>> At line 178: "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIER=%s"
>>> Should be : "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIERS=%s"
>>>
>>> At least that fixes my problem, and I can get one step further in my 
>>> effort to use the wcs driver, using C++ API, on Windows.
>>>
>>>> Odd-Ragnar<
>> Hi,
>>
>> I believe that GDAL is right and the WCS server that you are using is wrong.
>> By reading the standard
>> https://portal.opengeospatial.org/files/07-067r5
>> the name of the parameter in GetCoverage is "identifier". However, 
>> for making it a bit more complicated for the developers it is called 
>> "identifiers" in DescribeCoverage.
> well, design by committee effect if you will: DescribeCoverage can have more than one parameters, so it was requested to change to plural in the course of the adoption discussions.
> whatever way you do it, you will do it wrong ;-)
>
> cheers,
> Peter (WCS/CIS spec editor)
>
>
>> "This single ―identifiers parameter shall correspond to the 
>> repeatable ―identifier parameter in the UML model."
>>
>> -Jukka Rahkonen-
>>
>>
>>
>>
>> --
>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> --
> Dr. Peter Baumann
>   - Professor of Computer Science, Jacobs University Bremen
>     www.faculty.jacobs-university.de/pbaumann
>     mail: p.baumann at jacobs-university.de
>     tel: +49-421-200-3178, fax: +49-421-200-493178
>   - Executive Director, rasdaman GmbH Bremen (HRB 26793)
>     www.rasdaman.com, mail: baumann at rasdaman.com
>     tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882 
> "Si forte in alienas manus oberraverit hec peregrina epistola incertis 
> ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli 
> destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, 
> AD 1083)
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



From sebastien.guimmara.external at airbus.com  Tue Oct 16 09:38:04 2018
From: sebastien.guimmara.external at airbus.com (=?iso-8859-1?Q?GUIMMARA=2C_S=E9bastien_=28External=29_=5BFR=5D?=)
Date: Tue, 16 Oct 2018 16:38:04 +0000
Subject: [gdal-dev] Using Spatialite with GDAL 2.3.x
Message-ID: <A1DABC8AB3291742B3D4C714F72B2F8E73342A6E@tlswinmbx02.toulouse.spotimage.int>

Hello,

When upgrading from GDAL 2.2.4 to GDAL 2.3.1, loading GDAL/OGR as an SQLite extension doesn't seem to work anymore.

Specifically, using the SQLite C# Wrapper, we do the following steps :

System.Data.SQLite.SQLiteConnection connection = new SQLiteConnection(connectionString);
Connection.Open();
Connection.LoadExtension("gdal230.dll");
Connection.LoadExtension("mod_spatialite.dll");

Then accessing the database using Spatialite causes violation errors. Since this worked with a 2.2.4 build, I wonder. Has something changed around this driver ?

Thanks,
Sébastien

Please consider the environment before printing this email message.

________________________________

Ce courriel (incluant ses éventuelles pièces jointes) peut contenir des informations confidentielles et/ou protégées ou dont la diffusion est restreinte. Si vous avez reçu ce courriel par erreur, vous ne devez ni le copier, ni l'utiliser, ni en divulguer le contenu à quiconque. Merci d'en avertir immédiatement l'expéditeur et d'effacer ce courriel de votre système. Airbus DS Geo décline toute responsabilité en cas de corruptionpar virus, d'altération ou de falsification de ce courriel lors de sa transmission par voie électronique.

This email (including any attachments) may contain confidential and/or privileged information or information otherwise protected from disclosure. If you are not the intended recipient, please notify the sender immediately, do not copy this message or any attachments and do not use it for any purpose or disclose its content to any person, but delete this message and any attachments from your system. Airbus DS Geo disclaims any and all liability if this email transmission was virus corrupted, altered or falsified.

________________________________

Airbus DS Geo SA (325 089 589 RCS Toulouse) - Siege social: 5, rue des Satellites, 31400 Toulouse, France.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181016/40ed1d4b/attachment.html>

From ari.jolma at gmail.com  Tue Oct 16 23:01:04 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 17 Oct 2018 09:01:04 +0300
Subject: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
In-Reply-To: <b053c63f269a4286a5ac69a25f74a647@ITTRHEX001.powelasa.powel.com>
References: <06a892ef312b4e5aa8b58c40a65d1b9f@ITTRHEX001.powelasa.powel.com>
 <1539090381809-0.post@n6.nabble.com>
 <452e1da6-ed52-5d4a-7fdd-54eed1c83e08@jacobs-university.de>
 <993c271bbab14c30a6c6dea969f1e70a@ITTRHEX001.powelasa.powel.com>
 <350ad6d6-8041-c422-2a6b-44d1f145639c@gmail.com>
 <b053c63f269a4286a5ac69a25f74a647@ITTRHEX001.powelasa.powel.com>
Message-ID: <6a43f01b-5fae-f85e-1d3b-da1d1bc86ab4@gmail.com>

Odd Ragnar Lydersen kirjoitti 16.10.2018 klo 9.08:
> Thanks for the help.
> It works like it's supposed to now.
>
> If I use it for this other wcs though, I get an error:
>   - URL: "WCS:http://openwms.statkart.no/skwms1/wcs.dtm?VERSION=1.1.1&identifiers=land_utm33_10m"
>   - Error message: ERROR 1: msWCSGetCoverage(): WCS server error. A non-zero RESX/RESY or WIDTH/HEIGHT is required but neither was provided.
> (If I use vesion 2.0.1 then it's fine)
>
> Is it a server error?


It's an error from MapServer


> Is there a way around it, by adding some extra parameters?


This line from the docs is applicable:

NrOffsets: Set to 2 if the server requires that there are only two 
values in the GridOffsets. Use when the server is MapServer or ArcGIS. 
With MapServer use also OffsetsPositive.

also NoGridAxisSwap is needed

So,

gdalinfo -oo OffsetsPositive -oo NrOffsets=2 -oo NoGridAxisSwap 
"WCS:http://openwms.statkart.no/skwms1/wcs.dtm?VERSION=1.1.1&identifiers=land_utm33_10m"

is the correct approach and it does not fail.

Ari


>
>> Odd-Ragnar<
> -----Original Message-----
> From: Ari Jolma <ari.jolma at gmail.com>
> Sent: onsdag 10. oktober 2018 15:02
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] WCS: Bug in WCSDataset110::GetCoverageRequest()
>
> Hi Odd Ragnar,
>
> Without going very deep into this, I would do (and tried)
>
> gdalinfo "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32"
>
> This tells me that the preferred version of the service is 2.0.1 and it serves coverage Coverage1. However, if I want to use service version 1.1.1, I do
>
> gdalinfo
> "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?version=1.1.1"
>
> This tells me that version is ok but now the coverage name is 1, so
>
> gdalinfo
> "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?version=1.1.1&coverage=1"
>
> tells me details about this coverage which seems to be huge. Now that is the src_dataset string to be used in gdal_translate.
>
> Ari
>
>
> Odd Ragnar Lydersen kirjoitti 10.10.2018 klo 14:11:
>> I have investigated some more now, and I've found that the problem is perhaps the way I'm using the data source/service description file.
>>
>> Here is what I do:
>> 1) I open the wcs by providing the coverage I want by using describecoverage in the url:
>> std::string wcsDescribeCoverage =
>> "WCS:https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?SERVICE=WCS&REQU
>> EST=DescribeCoverage&IDENTIFIERS=1&VERSION=1.1.1";
>> GDALDatasetUniquePtr
>> poDS1(GDALDataset::Open(wcsGetCapabilites.c_str(), GDAL_OF_READONLY,
>> pOptionDriverName, pOptionOpenOptions, nullptr));
>>
>> Now I have a valid data set, poDS1.
>> And a service description file has been created in the cache:
>> <WCS_GDAL>
>>     <ServiceURL>https://wms.geonorge.no/skwms1/wcs.hoyde-dtm1_32?</ServiceURL>
>>     <Version>1.1.1</Version>
>>     <CoverageName>1</CoverageName>
>>     <Parameters>SERVICE=WCS&amp;REQUEST=DescribeCoverage</Parameters>
>>     <TIMEOUT>300</TIMEOUT>
>> </WCS_GDAL>
>>
>> 2) Then I run GDALTranslate(), with a valid argList
>> GDALTranslateOptions *TranslateOptions =
>> GDALTranslateOptionsNew(argList, NULL); GDALDatasetH hOutputDataset =
>> GDALTranslate("./test.xyz", GDALDataset::ToHandle(poDS2.get()),
>> TranslateOptions, NULL);
>>
>> During the GDALTranslate() I find that in wcsdataset110.cpp, WCSDataset110::GetCoverageRequest(), line 227:
>> - After the GetCoverage request have been constructed, the parameters from the service description file is used to overwrite the created request, making it a DescribeCoverage request as stated in the file.
>> - And DescribeCoverage don't want IDENTIFIER=someId, but
>> IDENTIFIERS=someId
>>
>> Then, my question is, how am I supposed to do this, to make it right?
>>
>>> Odd-Ragnar<
>> -----Original Message-----
>> From: Peter Baumann <p.baumann at jacobs-university.de>
>> Sent: tirsdag 9. oktober 2018 15:10
>> To: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>;
>> gdal-dev at lists.osgeo.org
>> Subject: Re: [gdal-dev] WCS: Bug in
>> WCSDataset110::GetCoverageRequest()
>>
>>
>>
>> On 09.10.2018 15:06, jratike80 wrote:
>>> Odd Ragnar Lydersen wrote
>>>> I think there is a bug in WCSDataset110::GetCoverageRequest()
>>>> At line 178: "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIER=%s"
>>>> Should be : "&VERSION=%s&REQUEST=GetCoverage&IDENTIFIERS=%s"
>>>>
>>>> At least that fixes my problem, and I can get one step further in my
>>>> effort to use the wcs driver, using C++ API, on Windows.
>>>>
>>>>> Odd-Ragnar<
>>> Hi,
>>>
>>> I believe that GDAL is right and the WCS server that you are using is wrong.
>>> By reading the standard
>>> https://portal.opengeospatial.org/files/07-067r5
>>> the name of the parameter in GetCoverage is "identifier". However,
>>> for making it a bit more complicated for the developers it is called
>>> "identifiers" in DescribeCoverage.
>> well, design by committee effect if you will: DescribeCoverage can have more than one parameters, so it was requested to change to plural in the course of the adoption discussions.
>> whatever way you do it, you will do it wrong ;-)
>>
>> cheers,
>> Peter (WCS/CIS spec editor)
>>
>>
>>> "This single ―identifiers parameter shall correspond to the
>>> repeatable ―identifier parameter in the UML model."
>>>
>>> -Jukka Rahkonen-
>>>
>>>
>>>
>>>
>>> --
>>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> --
>> Dr. Peter Baumann
>>    - Professor of Computer Science, Jacobs University Bremen
>>      www.faculty.jacobs-university.de/pbaumann
>>      mail: p.baumann at jacobs-university.de
>>      tel: +49-421-200-3178, fax: +49-421-200-493178
>>    - Executive Director, rasdaman GmbH Bremen (HRB 26793)
>>      www.rasdaman.com, mail: baumann at rasdaman.com
>>      tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
>> "Si forte in alienas manus oberraverit hec peregrina epistola incertis
>> ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli
>> destinata, nec preripiat quisquam non sibi parata." (mail disclaimer,
>> AD 1083)
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From dementievda at gmail.com  Wed Oct 17 04:55:26 2018
From: dementievda at gmail.com (gis_wild)
Date: Wed, 17 Oct 2018 04:55:26 -0700 (MST)
Subject: [gdal-dev] Fillnodata doesn't work correctly with -si parameter
Message-ID: <1539777326458-0.post@n6.nabble.com>

Hi all,

I try to fill no data values close to the edge of my single-band raster.

If I set -si parameter values in all the output raster is 0. 

I tried to use -nomask parameter as well - it didn't help. 

So, what is a proper way to create a new raster file with a filling of no
data values close to the edge of the input raster? 

Thank you.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From dementievda at gmail.com  Wed Oct 17 07:56:24 2018
From: dementievda at gmail.com (gis_wild)
Date: Wed, 17 Oct 2018 07:56:24 -0700 (MST)
Subject: [gdal-dev] Fillnodata doesn't work correctly with -si parameter
Message-ID: <1539788184672-0.post@n6.nabble.com>

Hi all,

I try to fill no data values close to the edge of my single-band raster.

If I set -si parameter values in all the output raster is 0. 

I tried to use -nomask parameter as well - it didn't help. 

So, what is a proper way to create a new raster file with a filling of no
data values close to the edge of the input raster? 

Thank you.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From alessandro.parma at geo-solutions.it  Wed Oct 17 09:22:12 2018
From: alessandro.parma at geo-solutions.it (Alessandro Parma)
Date: Wed, 17 Oct 2018 18:22:12 +0200
Subject: [gdal-dev] Creating external overviews for JP2 files?
In-Reply-To: <CAJaHrDw-ypivBJ9PTsNQny4TK+aE4yYP+VEBL6cuAXcf9WFb=w@mail.gmail.com>
References: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
 <1538996931786-0.post@n6.nabble.com>
 <CAJaHrDw-ypivBJ9PTsNQny4TK+aE4yYP+VEBL6cuAXcf9WFb=w@mail.gmail.com>
Message-ID: <CAC872wEPWGxYDb-SCKqX7=eypHn95c7Ty+GoxaS3ZatY-465ig@mail.gmail.com>

Hi All,

Sorry for hijacking the thread but I had kind of the "opposite" issue,
trying to achieve the same goal (external overviews for JP2 files) using
the JP2KAK driver instead of JP2OpenJPEG. In my case, it looks like I can
only create the overview files directly using gdaladdo, without doing a
gdal_translate first. If I try to do a gdal_translate first I end up with a
0-fileed file. Let me give an example:

I run gdal_translate first as follows:

gdal_translate -outsize 50% 50% -co TILED=YES -co COMPRESS=JPEG -co
PHOTOMETRIC=YCBCR /tmp/T34WEB_20181015T104021_TCI_10m.jp2
~/T34WEB_20181015T104021_TCI_10m.jp2.ovr_geosolutions_jkak --config
GDAL_SKIP JP2OpenJPEG

Then compute stats on the file with gdalinfo -stats and I get the following:

gdalinfo -stats T34WEB_20181015T104021_TCI_10m.jp2.ovr_geosolutions_jkak

Driver: GTiff/GeoTIFF
Files: T34WEB_20181015T104021_TCI_10m.jp2.ovr_geosolutions_jkak
Size is 5490, 5490
Coordinate System is:
PROJCS["WGS 84 / UTM zone 34N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",21],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH],
    AUTHORITY["EPSG","32634"]]
Origin = (499980.000000000000000,7700040.000000000000000)
Pixel Size = (20.000000000000000,-20.000000000000000)
Metadata:
  AREA_OR_POINT=Area
  Corder=LRCP
Image Structure Metadata:
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
  SOURCE_COLOR_SPACE=YCbCr
Corner Coordinates:
Upper Left  (  499980.000, 7700040.000) ( 20d59'58.17"E, 69d24'34.71"N)
Lower Left  (  499980.000, 7590240.000) ( 20d59'58.25"E, 68d25'29.70"N)
Upper Right (  609780.000, 7700040.000) ( 23d47'41.77"E, 69d23'13.78"N)
Lower Right (  609780.000, 7590240.000) ( 23d40'24.01"E, 68d24'12.80"N)
Center      (  554880.000, 7645140.000) ( 22d22' 0.55"E, 68d54'42.54"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
*  Minimum=0.000, Maximum=0.000, Mean=0.000, StdDev=0.000*
  Metadata:
    STATISTICS_MAXIMUM=0
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=0
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
*  Minimum=0.000, Maximum=0.000, Mean=0.000, StdDev=0.000*
  Metadata:
    STATISTICS_MAXIMUM=0
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=0
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
*  Minimum=0.000, Maximum=0.000, Mean=0.000, StdDev=0.000*
  Metadata:
    STATISTICS_MAXIMUM=0
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=0


If I produce the overview file "on the fly" with gdaladdo I get a good
overview file instead:

gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
YCBCR --config
INTERLEAVE_OVERVIEW PIXEL  T34WEB_20181015T104021_TCI_10m.jp2 2 4 8 16 32
64 128

gdalinfo -stats  ./T34WEB_20181015T104021_TCI_10m.jp2.ovr
Driver: GTiff/GeoTIFF
Files: ./T34WEB_20181015T104021_TCI_10m.jp2.ovr
Size is 5490, 5490
Coordinate System is `'
Image Structure Metadata:
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
  SOURCE_COLOR_SPACE=YCbCr
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 5490.0)
Upper Right ( 5490.0,    0.0)
Lower Right ( 5490.0, 5490.0)
Center      ( 2745.0, 2745.0)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
*  Minimum=0.000, Maximum=255.000, Mean=71.229, StdDev=62.445*
  Overviews: 2745x2745, 1373x1373, 687x687, 344x344, 172x172, 86x86
  Metadata:
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=71.229008132023
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=62.445099566295
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
*  Minimum=0.000, Maximum=255.000, Mean=66.111, StdDev=62.790*
  Overviews: 2745x2745, 1373x1373, 687x687, 344x344, 172x172, 86x86
  Metadata:
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=66.110971363731
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=62.790298201369
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
*  Minimum=0.000, Maximum=255.000, Mean=67.561, StdDev=63.721*
  Overviews: 2745x2745, 1373x1373, 687x687, 344x344, 172x172, 86x86
  Metadata:
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=67.560742897336
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=63.721118995755

Any idea on what is causing this? I am using GDAL version 2.2.4

Thank you in advance

On Wed, Oct 17, 2018 at 11:53 AM Daniele Romagnoli <
daniele.romagnoli at geo-solutions.it> wrote:

>
>
> ---------- Forwarded message ---------
> From: jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
> Date: Mon, Oct 8, 2018 at 1:08 PM
> Subject: Re: [gdal-dev] Creating external overviews for JP2 files?
> To: <gdal-dev at lists.osgeo.org>
>
>
> Hi Andrea,
>
> I had a try and it works for me with the gisinternals build "GDAL 2.4.0dev"
> with JP2OpenJPEG driver
>
> gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
> YCBCR --conf
> ig INTERLEAVE_OVERVIEW PIXEL  ovr.jp2 2 4 8 16 32
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
>
> -Jukka Rahkonen-
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> --
> Regards,
> Daniele Romagnoli
> ==
> GeoServer Professional Services from the experts! Visit
> http://goo.gl/it488V for more information.
> ==
>
> Ing. Daniele Romagnoli
> Senior Software Engineer
>
> GeoSolutions S.A.S.
> Via di Montramito 3/A
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313
> fax:      +39 0584 1660272
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
> Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
> 2016/679 - Regolamento generale sulla protezione dei dati “GDPR”), si
> precisa che ogni circostanza inerente alla presente email (il suo
> contenuto, gli eventuali allegati, etc.) è un dato la cui conoscenza è
> riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
> messaggio Le è giunto per errore, è tenuta/o a cancellarlo, ogni altra
> operazione è illecita. Le sarei comunque grato se potesse darmene notizia.
>
> This email is intended only for the person or entity to which it is
> addressed and may contain information that is privileged, confidential or
> otherwise protected from disclosure. We remind that - as provided by
> European Regulation 2016/679 “GDPR” - copying, dissemination or use of this
> e-mail or the information herein by anyone other than the intended
> recipient is prohibited. If you have received this email by mistake, please
> notify us immediately by telephone or e-mail.
>


-- 

Regards,

Alessandro Parma

==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Alessandro Parma
DevOps Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------


Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
2016/679 - Regolamento generale sulla protezione dei dati “GDPR”), si
precisa che ogni circostanza inerente alla presente email (il suo
contenuto, gli eventuali allegati, etc.) è un dato la cui conoscenza è
riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
messaggio Le è giunto per errore, è tenuta/o a cancellarlo, ogni altra
operazione è illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is
addressed and may contain information that is privileged, confidential or
otherwise protected from disclosure. We remind that - as provided by
European Regulation 2016/679 “GDPR” - copying, dissemination or use of this
e-mail or the information herein by anyone other than the intended
recipient is prohibited. If you have received this email by mistake, please
notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181017/aa8b3cdf/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Oct 17 14:16:24 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 17 Oct 2018 14:16:24 -0700 (MST)
Subject: [gdal-dev] Creating external overviews for JP2 files?
In-Reply-To: <CAC872wEPWGxYDb-SCKqX7=eypHn95c7Ty+GoxaS3ZatY-465ig@mail.gmail.com>
References: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
 <1538996931786-0.post@n6.nabble.com>
 <CAC872wEPWGxYDb-SCKqX7=eypHn95c7Ty+GoxaS3ZatY-465ig@mail.gmail.com>
Message-ID: <1539810984585-0.post@n6.nabble.com>

alpa wrote
> Hi All,
> 
> ....
> 
> I run gdal_translate first as follows:
> 
> gdal_translate -outsize 50% 50% -co TILED=YES -co COMPRESS=JPEG -co
> PHOTOMETRIC=YCBCR /tmp/T34WEB_20181015T104021_TCI_10m.jp2
> ~/T34WEB_20181015T104021_TCI_10m.jp2.ovr_geosolutions_jkak --config
> GDAL_SKIP JP2OpenJPEG
> .......
> 
> If I produce the overview file "on the fly" with gdaladdo I get a good
> overview file instead:
> 
> gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
> YCBCR --config
> INTERLEAVE_OVERVIEW PIXEL  T34WEB_20181015T104021_TCI_10m.jp2 2 4 8 16 32
> 64 128

Hi,

Did you skip the OpenJPEG driver by setting the environment variable for
your gdaladdo test? If you didn't you are probably comparing gdal_translate
with Kakadu driver vs. gdaladdo with OpenJPEG driver.

-Jukka Rahkonen- 




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rykovd at gmail.com  Wed Oct 17 14:18:05 2018
From: rykovd at gmail.com (Denis Rykov)
Date: Wed, 17 Oct 2018 23:18:05 +0200
Subject: [gdal-dev] Having overview URL inside VRT
Message-ID: <CAJbvKNrZgvF00s+ABUDZmJB5YCue1g=o+jS4ig52AKfP9_kJSw@mail.gmail.com>

Hi all,

I know that it possible using GDAL VRT describe overviews with <Overview>
tag.
But it is not very convenient way in many cases. I'm wondering whether it
is possible to put a link to overview *.ovr file inside a VRT?
In some scenarios we cannot use a relative path and assumption that *.ovr
should be located in the same place alongside the original raster doesn't
work.
Does it make sense to have such feature for VRT?

Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181017/d2b98b59/attachment.html>

From even.rouault at spatialys.com  Wed Oct 17 14:25:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 17 Oct 2018 23:25:09 +0200
Subject: [gdal-dev] Having overview URL inside VRT
In-Reply-To: <CAJbvKNrZgvF00s+ABUDZmJB5YCue1g=o+jS4ig52AKfP9_kJSw@mail.gmail.com>
References: <CAJbvKNrZgvF00s+ABUDZmJB5YCue1g=o+jS4ig52AKfP9_kJSw@mail.gmail.com>
Message-ID: <3329016.VfCYfYeo3j@even-i700>

On mercredi 17 octobre 2018 23:18:05 CEST Denis Rykov wrote:
> Hi all,
> 
> I know that it possible using GDAL VRT describe overviews with <Overview>
> tag.
> But it is not very convenient way in many cases. I'm wondering whether it
> is possible to put a link to overview *.ovr file inside a VRT?
> In some scenarios we cannot use a relative path and assumption that *.ovr
> should be located in the same place alongside the original raster doesn't
> work.
> Does it make sense to have such feature for VRT?

Hum, why not just create a symlink from the actual location to "your.vrt.ovr" 
next to your.vrt ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Oct 17 18:51:35 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Oct 2018 03:51:35 +0200
Subject: [gdal-dev] Twenty years of GDAL !
Message-ID: <1718019.l2hOor2lnA@even-i700>

Hi,

I nearly missed it [1] (actually I'm already on the 18th here, but let's consider
Canadian time so still on the 17th), but exactly 20 years go on Oct 17th 1998,
Frank Warmerdam committed for the first time in the CSV repository.

'''
commit 149db916aafcbee9bb64572fafda83441c94a552
Author: Frank Warmerdam <warmerdam at pobox.com>
Date:   Sat Oct 17 19:24:36 1998 +0000

    Initial implementation.
    
    
    git-svn-id: https://svn.osgeo.org/gdal/trunk at 2 f0d54148-0727-0410-94bb-9a71ac55c965
'''

https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552

169 lines for a first version of the virtual I/O layer...

Since then,
* 39075 commits have been added on top of it,
* 159 raster drivers
* 96 vector drivers [2]
* by 161 committers (actually there are more contributors, here just counting
  the ones who have directly authored a CVS, SVN or git commit),
* adding 7110 files in the repository, for a grand total of
* 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp, py,
  html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all the text files)
  so an average of 300 lines per day added
* 64 releases
* 6287 tickets closed
* 49097 messages posted on gdal-dev
* more than 100 software proudly mentionning using it

Happy birthday and long life to GDAL and its commmnity of contributors, either
by code, documentation, testing, packaging, reports, ... !

Even

[1] thanks to Robert Coup for reminding me a few days ago about the approaching date !
[2] you'll note that 155 + 96 = 255, but I don't think there's a
    Byte limitation for the number of drivers ...

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From david.fawcett at gmail.com  Wed Oct 17 19:13:29 2018
From: david.fawcett at gmail.com (David Fawcett)
Date: Wed, 17 Oct 2018 21:13:29 -0500
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <1718019.l2hOor2lnA@even-i700>
References: <1718019.l2hOor2lnA@even-i700>
Message-ID: <E501486E-38C5-4970-B89F-DBAAEA6C45FA@gmail.com>

Thank you Frank, Even, and everyone else who has contributed. 

GDAL is at the heart of most open source and proprietary GIS systems!

> On Oct 17, 2018, at 8:51 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> Hi,
> 
> I nearly missed it [1] (actually I'm already on the 18th here, but let's consider
> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th 1998,
> Frank Warmerdam committed for the first time in the CSV repository.
> 
> '''
> commit 149db916aafcbee9bb64572fafda83441c94a552
> Author: Frank Warmerdam <warmerdam at pobox.com>
> Date:   Sat Oct 17 19:24:36 1998 +0000
> 
>    Initial implementation.
> 
> 
>    git-svn-id: https://svn.osgeo.org/gdal/trunk at 2 f0d54148-0727-0410-94bb-9a71ac55c965
> '''
> 
> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
> 
> 169 lines for a first version of the virtual I/O layer...
> 
> Since then,
> * 39075 commits have been added on top of it,
> * 159 raster drivers
> * 96 vector drivers [2]
> * by 161 committers (actually there are more contributors, here just counting
>  the ones who have directly authored a CVS, SVN or git commit),
> * adding 7110 files in the repository, for a grand total of
> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp, py,
>  html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all the text files)
>  so an average of 300 lines per day added
> * 64 releases
> * 6287 tickets closed
> * 49097 messages posted on gdal-dev
> * more than 100 software proudly mentionning using it
> 
> Happy birthday and long life to GDAL and its commmnity of contributors, either
> by code, documentation, testing, packaging, reports, ... !
> 
> Even
> 
> [1] thanks to Robert Coup for reminding me a few days ago about the approaching date !
> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>    Byte limitation for the number of drivers ...
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From rykovd at gmail.com  Wed Oct 17 23:16:01 2018
From: rykovd at gmail.com (Denis Rykov)
Date: Thu, 18 Oct 2018 08:16:01 +0200
Subject: [gdal-dev] Having overview URL inside VRT
In-Reply-To: <3329016.VfCYfYeo3j@even-i700>
References: <CAJbvKNrZgvF00s+ABUDZmJB5YCue1g=o+jS4ig52AKfP9_kJSw@mail.gmail.com>
 <3329016.VfCYfYeo3j@even-i700>
Message-ID: <CAJbvKNoTQOXTwnrqZOBGN-j5_S762Jf2ZQKzVQ1RT1E2mKyqKQ@mail.gmail.com>

Thanks for quick reply. Unfortunately this suggestion will not work for us,
since we want to use an ovr that is located online and it is hard to manage
URLs in this case. Is it worthwhile to implement this in GDAL?

On Wed, Oct 17, 2018 at 11:25 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 17 octobre 2018 23:18:05 CEST Denis Rykov wrote:
> > Hi all,
> >
> > I know that it possible using GDAL VRT describe overviews with <Overview>
> > tag.
> > But it is not very convenient way in many cases. I'm wondering whether it
> > is possible to put a link to overview *.ovr file inside a VRT?
> > In some scenarios we cannot use a relative path and assumption that *.ovr
> > should be located in the same place alongside the original raster doesn't
> > work.
> > Does it make sense to have such feature for VRT?
>
> Hum, why not just create a symlink from the actual location to
> "your.vrt.ovr"
> next to your.vrt ?
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181018/b17efa53/attachment.html>

From bishop.dev at gmail.com  Thu Oct 18 00:02:36 2018
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Thu, 18 Oct 2018 10:02:36 +0300
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <1718019.l2hOor2lnA@even-i700>
References: <1718019.l2hOor2lnA@even-i700>
Message-ID: <d55512ae-90c2-3340-8d58-e443990285f2@gmail.com>

Happy birthday GDAL!

Best regards,
     Dmitry

18.10.2018 4:51, Even Rouault пишет:
> Hi,
>
> I nearly missed it [1] (actually I'm already on the 18th here, but let's consider
> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th 1998,
> Frank Warmerdam committed for the first time in the CSV repository.
>
> '''
> commit 149db916aafcbee9bb64572fafda83441c94a552
> Author: Frank Warmerdam <warmerdam at pobox.com>
> Date:   Sat Oct 17 19:24:36 1998 +0000
>
>      Initial implementation.
>      
>      
>      git-svn-id: https://svn.osgeo.org/gdal/trunk at 2 f0d54148-0727-0410-94bb-9a71ac55c965
> '''
>
> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
>
> 169 lines for a first version of the virtual I/O layer...
>
> Since then,
> * 39075 commits have been added on top of it,
> * 159 raster drivers
> * 96 vector drivers [2]
> * by 161 committers (actually there are more contributors, here just counting
>    the ones who have directly authored a CVS, SVN or git commit),
> * adding 7110 files in the repository, for a grand total of
> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp, py,
>    html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all the text files)
>    so an average of 300 lines per day added
> * 64 releases
> * 6287 tickets closed
> * 49097 messages posted on gdal-dev
> * more than 100 software proudly mentionning using it
>
> Happy birthday and long life to GDAL and its commmnity of contributors, either
> by code, documentation, testing, packaging, reports, ... !
>
> Even
>
> [1] thanks to Robert Coup for reminding me a few days ago about the approaching date !
> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>      Byte limitation for the number of drivers ...
>


From even.rouault at spatialys.com  Thu Oct 18 00:12:56 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 18 Oct 2018 09:12:56 +0200
Subject: [gdal-dev] Having overview URL inside VRT
In-Reply-To: <CAJbvKNoTQOXTwnrqZOBGN-j5_S762Jf2ZQKzVQ1RT1E2mKyqKQ@mail.gmail.com>
References: <CAJbvKNrZgvF00s+ABUDZmJB5YCue1g=o+jS4ig52AKfP9_kJSw@mail.gmail.com>
 <3329016.VfCYfYeo3j@even-i700>
 <CAJbvKNoTQOXTwnrqZOBGN-j5_S762Jf2ZQKzVQ1RT1E2mKyqKQ@mail.gmail.com>
Message-ID: <1718041.DOQUfNFmu4@even-i700>

On jeudi 18 octobre 2018 08:16:01 CEST Denis Rykov wrote:
> Thanks for quick reply. Unfortunately this suggestion will not work for us,
> since we want to use an ovr that is located online and it is hard to manage
> URLs in this case. Is it worthwhile to implement this in GDAL?

Actually this is a little known feature of GDAL, but if you create a symbolic 
link, GDALOpen() will read the link name, and open it, even if it is not a 
real file.

ln -s /vsicurl/https://download.osgeo.org/gdal/data/gtiff/utm.tif your.vrt.ovr
gdalinfo your.vrt.ovr

Another more OS portable approach is to
gdal_translate -of VRT /vsicurl/.... your.vrt.ovr

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Thu Oct 18 00:23:15 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 18 Oct 2018 09:23:15 +0200
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <1718019.l2hOor2lnA@even-i700>
References: <1718019.l2hOor2lnA@even-i700>
Message-ID: <CABUeae_DeuB+-wmOxPobezLS5Kbqgv0o91-aKzimU6THOEzmpw@mail.gmail.com>

Happy Birthday GDAL!


GDAL is an important project for me personally.
Back in 2006, a completely accidental chat with Frank Warmerdam on IRC
led me to change my job - in January 2007 I became GDAL paid maintainer -
and sequence of events that followed led to a significant change of my
professional career.

Thanks Frank and all the members of the GDAL Team and Community!

Best regards,
Mateusz

On Thu, 18 Oct 2018 at 03:51, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> I nearly missed it [1] (actually I'm already on the 18th here, but let's consider
> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th 1998,
> Frank Warmerdam committed for the first time in the CSV repository.
>
> '''
> commit 149db916aafcbee9bb64572fafda83441c94a552
> Author: Frank Warmerdam <warmerdam at pobox.com>
> Date:   Sat Oct 17 19:24:36 1998 +0000
>
>     Initial implementation.
>
>
>     git-svn-id: https://svn.osgeo.org/gdal/trunk at 2 f0d54148-0727-0410-94bb-9a71ac55c965
> '''
>
> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
>
> 169 lines for a first version of the virtual I/O layer...
>
> Since then,
> * 39075 commits have been added on top of it,
> * 159 raster drivers
> * 96 vector drivers [2]
> * by 161 committers (actually there are more contributors, here just counting
>   the ones who have directly authored a CVS, SVN or git commit),
> * adding 7110 files in the repository, for a grand total of
> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp, py,
>   html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all the text files)
>   so an average of 300 lines per day added
> * 64 releases
> * 6287 tickets closed
> * 49097 messages posted on gdal-dev
> * more than 100 software proudly mentionning using it
>
> Happy birthday and long life to GDAL and its commmnity of contributors, either
> by code, documentation, testing, packaging, reports, ... !
>
> Even
>
> [1] thanks to Robert Coup for reminding me a few days ago about the approaching date !
> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>     Byte limitation for the number of drivers ...
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Thu Oct 18 00:25:59 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 18 Oct 2018 09:25:59 +0200
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <CABUeae_DeuB+-wmOxPobezLS5Kbqgv0o91-aKzimU6THOEzmpw@mail.gmail.com>
References: <1718019.l2hOor2lnA@even-i700>
 <CABUeae_DeuB+-wmOxPobezLS5Kbqgv0o91-aKzimU6THOEzmpw@mail.gmail.com>
Message-ID: <CABUeae_K_LorXj2zENNkdvvYFvdbiOuUYT0QxWWMUEjrPD+-kQ@mail.gmail.com>

On Thu, 18 Oct 2018 at 09:23, Mateusz Loskot <mateusz at loskot.net> wrote:
>
> Happy Birthday GDAL!
>
> GDAL is an important project for me personally.
> Back in 2006, a completely accidental chat with Frank Warmerdam on IRC
> led me to change my job - in January 2007 I became GDAL paid maintainer -

Actually, that started since April 2006.
Ha, time flies!


-- 
Mateusz Loskot, http://mateusz.loskot.net

From a.neumann at carto.net  Thu Oct 18 00:32:29 2018
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu, 18 Oct 2018 09:32:29 +0200
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <CABUeae_DeuB+-wmOxPobezLS5Kbqgv0o91-aKzimU6THOEzmpw@mail.gmail.com>
References: <1718019.l2hOor2lnA@even-i700>
 <CABUeae_DeuB+-wmOxPobezLS5Kbqgv0o91-aKzimU6THOEzmpw@mail.gmail.com>
Message-ID: <fe306af0-9306-e577-aed7-3c15132a683b@carto.net>

Hi gdal-devs,

Many thanks for your efforts in the past years - it is much appreciated!

Many people don't realize that they use your software (behind the 
scenes) on every work day ...

It is nice to be able to use your drivers and utilities and build 
something on top of it - without restrictions!

Greetings,

Andreas


Am 18.10.2018 um 09:23 schrieb Mateusz Loskot:
> Happy Birthday GDAL!
>
>
> GDAL is an important project for me personally.
> Back in 2006, a completely accidental chat with Frank Warmerdam on IRC
> led me to change my job - in January 2007 I became GDAL paid maintainer -
> and sequence of events that followed led to a significant change of my
> professional career.
>
> Thanks Frank and all the members of the GDAL Team and Community!
>
> Best regards,
> Mateusz
>
> On Thu, 18 Oct 2018 at 03:51, Even Rouault <even.rouault at spatialys.com> wrote:
>> Hi,
>>
>> I nearly missed it [1] (actually I'm already on the 18th here, but let's consider
>> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th 1998,
>> Frank Warmerdam committed for the first time in the CSV repository.
>>
>> '''
>> commit 149db916aafcbee9bb64572fafda83441c94a552
>> Author: Frank Warmerdam <warmerdam at pobox.com>
>> Date:   Sat Oct 17 19:24:36 1998 +0000
>>
>>      Initial implementation.
>>
>>
>>      git-svn-id: https://svn.osgeo.org/gdal/trunk at 2 f0d54148-0727-0410-94bb-9a71ac55c965
>> '''
>>
>> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
>>
>> 169 lines for a first version of the virtual I/O layer...
>>
>> Since then,
>> * 39075 commits have been added on top of it,
>> * 159 raster drivers
>> * 96 vector drivers [2]
>> * by 161 committers (actually there are more contributors, here just counting
>>    the ones who have directly authored a CVS, SVN or git commit),
>> * adding 7110 files in the repository, for a grand total of
>> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp, py,
>>    html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all the text files)
>>    so an average of 300 lines per day added
>> * 64 releases
>> * 6287 tickets closed
>> * 49097 messages posted on gdal-dev
>> * more than 100 software proudly mentionning using it
>>
>> Happy birthday and long life to GDAL and its commmnity of contributors, either
>> by code, documentation, testing, packaging, reports, ... !
>>
>> Even
>>
>> [1] thanks to Robert Coup for reminding me a few days ago about the approaching date !
>> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>>      Byte limitation for the number of drivers ...
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From alessandro.parma at geo-solutions.it  Thu Oct 18 01:19:49 2018
From: alessandro.parma at geo-solutions.it (Alessandro Parma)
Date: Thu, 18 Oct 2018 10:19:49 +0200
Subject: [gdal-dev] Creating external overviews for JP2 files?
In-Reply-To: <1539810984585-0.post@n6.nabble.com>
References: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
 <1538996931786-0.post@n6.nabble.com>
 <CAC872wEPWGxYDb-SCKqX7=eypHn95c7Ty+GoxaS3ZatY-465ig@mail.gmail.com>
 <1539810984585-0.post@n6.nabble.com>
Message-ID: <CAC872wGHbx=YhpgXveEcq5m0Dju19O8FFtHefzNi0Y7gZ_qEng@mail.gmail.com>

Thanks for your reply,

My bad, probably copy-pasting mistake. I've re-run the commands:

Just to be sure I exported the GDAL_SKIP env var as well:

export GDAL_SKIP=JP2OpenJPEG
gdalinfo --formats
...
  ERS -raster- (rw+v): ERMapper .ers Labelled
  JP2KAK -raster,vector- (rwv): JPEG-2000 (based on Kakadu *v7.10.4*)
  JPIPKAK -raster- (ro): JPIP (based on Kakadu)
  L1B -raster- (rovs): NOAA Polar Orbiter Level 1b Data Set
...
(No JP2OpenJPEG, by the way, I am using Kakadu 7.10.4)

Looks like gdal_translate is producing a 0-filled raster:

gdal_translate -outsize 50% 50% -co TILED=YES -co COMPRESS=JPEG -co
PHOTOMETRIC=YCBCR  ./T34WEB_20181015T104021_TCI_10m.jp2
./T34WEB_20181015T104021_TCI_10m.jp2.ovr *--config GDAL_SKIP JP2OpenJPEG*

gdalinfo -stats ./T34WEB_20181015T104021_TCI_10m.jp2.ovr
Driver: GTiff/GeoTIFF
Files: ./T34WEB_20181015T104021_TCI_10m.jp2.ovr
       ./T34WEB_20181015T104021_TCI_10m.jp2.ovr.aux.xml
Size is 5490, 5490
Coordinate System is:
PROJCS["WGS 84 / UTM zone 34N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",21],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH],
    AUTHORITY["EPSG","32634"]]
Origin = (499980.000000000000000,7700040.000000000000000)
Pixel Size = (20.000000000000000,-20.000000000000000)
Metadata:
  AREA_OR_POINT=Area
  Corder=LRCP
Image Structure Metadata:
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
  SOURCE_COLOR_SPACE=YCbCr
Corner Coordinates:
Upper Left  (  499980.000, 7700040.000) ( 20d59'58.17"E, 69d24'34.71"N)
Lower Left  (  499980.000, 7590240.000) ( 20d59'58.25"E, 68d25'29.70"N)
Upper Right (  609780.000, 7700040.000) ( 23d47'41.77"E, 69d23'13.78"N)
Lower Right (  609780.000, 7590240.000) ( 23d40'24.01"E, 68d24'12.80"N)
Center      (  554880.000, 7645140.000) ( 22d22' 0.55"E, 68d54'42.54"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Min=0.000 Max=0.000
*  Minimum=0.000, Maximum=0.000, Mean=0.000, StdDev=0.000*
  Metadata:
    STATISTICS_MAXIMUM=0
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=0
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Min=0.000 Max=0.000
*  Minimum=0.000, Maximum=0.000, Mean=0.000, StdDev=0.000*
  Metadata:
    STATISTICS_MAXIMUM=0
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=0
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Min=0.000 Max=0.000
*  Minimum=0.000, Maximum=0.000, Mean=0.000, StdDev=0.000*
  Metadata:
    STATISTICS_MAXIMUM=0
    STATISTICS_MEAN=0
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=0

rm -f ./T34WEB_20181015T104021_TCI_10m.jp2.ovr
./T34WEB_20181015T104021_TCI_10m.jp2.ovr.aux.xml

while gdaladdo is producing a good raster:

gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config PHOTOMETRIC_OVERVIEW
YCBCR --config INTERLEAVE_OVERVIEW PIXEL
./T34WEB_20181015T104021_TCI_10m.jp2 *--config GDAL_SKIP JP2OpenJPEG* 2 4 8
16 32 64 128

gdalinfo -stats ./T34WEB_20181015T104021_TCI_10m.jp2.ovr
Driver: GTiff/GeoTIFF
Files: ./T34WEB_20181015T104021_TCI_10m.jp2.ovr
Size is 5490, 5490
Coordinate System is `'
Image Structure Metadata:
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
  SOURCE_COLOR_SPACE=YCbCr
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 5490.0)
Upper Right ( 5490.0,    0.0)
Lower Right ( 5490.0, 5490.0)
Center      ( 2745.0, 2745.0)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
*  Minimum=0.000, Maximum=255.000, Mean=71.229, StdDev=62.445*
  Overviews: 2745x2745, 1373x1373, 687x687, 344x344, 172x172, 86x86
  Metadata:
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=71.229008132023
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=62.445099566295
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
*  Minimum=0.000, Maximum=255.000, Mean=66.111, StdDev=62.790*
  Overviews: 2745x2745, 1373x1373, 687x687, 344x344, 172x172, 86x86
  Metadata:
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=66.110971363731
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=62.790298201369
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
*  Minimum=0.000, Maximum=255.000, Mean=67.561, StdDev=63.721*
  Overviews: 2745x2745, 1373x1373, 687x687, 344x344, 172x172, 86x86
  Metadata:
    STATISTICS_MAXIMUM=255
    STATISTICS_MEAN=67.560742897336
    STATISTICS_MINIMUM=0
    STATISTICS_STDDEV=63.721118995755

Thank you

On Wed, Oct 17, 2018 at 11:16 PM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> alpa wrote
> > Hi All,
> >
> > ....
> >
> > I run gdal_translate first as follows:
> >
> > gdal_translate -outsize 50% 50% -co TILED=YES -co COMPRESS=JPEG -co
> > PHOTOMETRIC=YCBCR /tmp/T34WEB_20181015T104021_TCI_10m.jp2
> > ~/T34WEB_20181015T104021_TCI_10m.jp2.ovr_geosolutions_jkak --config
> > GDAL_SKIP JP2OpenJPEG
> > .......
> >
> > If I produce the overview file "on the fly" with gdaladdo I get a good
> > overview file instead:
> >
> > gdaladdo -ro --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW
> > YCBCR --config
> > INTERLEAVE_OVERVIEW PIXEL  T34WEB_20181015T104021_TCI_10m.jp2 2 4 8 16 32
> > 64 128
>
> Hi,
>
> Did you skip the OpenJPEG driver by setting the environment variable for
> your gdaladdo test? If you didn't you are probably comparing gdal_translate
> with Kakadu driver vs. gdaladdo with OpenJPEG driver.
>
> -Jukka Rahkonen-
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 

Regards,

Alessandro Parma

==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Alessandro Parma
DevOps Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------


Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
2016/679 - Regolamento generale sulla protezione dei dati “GDPR”), si
precisa che ogni circostanza inerente alla presente email (il suo
contenuto, gli eventuali allegati, etc.) è un dato la cui conoscenza è
riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
messaggio Le è giunto per errore, è tenuta/o a cancellarlo, ogni altra
operazione è illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is
addressed and may contain information that is privileged, confidential or
otherwise protected from disclosure. We remind that - as provided by
European Regulation 2016/679 “GDPR” - copying, dissemination or use of this
e-mail or the information herein by anyone other than the intended
recipient is prohibited. If you have received this email by mistake, please
notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181018/5180839c/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Oct 18 06:43:55 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 18 Oct 2018 06:43:55 -0700 (MST)
Subject: [gdal-dev] Creating external overviews for JP2 files?
In-Reply-To: <CAC872wGHbx=YhpgXveEcq5m0Dju19O8FFtHefzNi0Y7gZ_qEng@mail.gmail.com>
References: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
 <1538996931786-0.post@n6.nabble.com>
 <CAC872wEPWGxYDb-SCKqX7=eypHn95c7Ty+GoxaS3ZatY-465ig@mail.gmail.com>
 <1539810984585-0.post@n6.nabble.com>
 <CAC872wGHbx=YhpgXveEcq5m0Dju19O8FFtHefzNi0Y7gZ_qEng@mail.gmail.com>
Message-ID: <1539870235955-0.post@n6.nabble.com>

alpa wrote
> Thanks for your reply,
> 
> My bad, probably copy-pasting mistake. I've re-run the commands:
> 
> Just to be sure I exported the GDAL_SKIP env var as well:
> 
> export GDAL_SKIP=JP2OpenJPEG
> gdalinfo --formats
> ...
>   ERS -raster- (rw+v): ERMapper .ers Labelled
>   JP2KAK -raster,vector- (rwv): JPEG-2000 (based on Kakadu *v7.10.4*)
>   JPIPKAK -raster- (ro): JPIP (based on Kakadu)
>   L1B -raster- (rovs): NOAA Polar Orbiter Level 1b Data Set
> ...
> (No JP2OpenJPEG, by the way, I am using Kakadu 7.10.4)
> 
> Looks like gdal_translate is producing a 0-filled raster:
> 
> gdal_translate -outsize 50% 50% -co TILED=YES -co COMPRESS=JPEG -co
> PHOTOMETRIC=YCBCR  ./T34WEB_20181015T104021_TCI_10m.jp2
> ./T34WEB_20181015T104021_TCI_10m.jp2.ovr *--config GDAL_SKIP JP2OpenJPEG*

Hi,

I used your command for one of our orthophoto .jp2 files with these drivers

  gdalinfo --formats|find "JP2"
  JP2ECW -raster,vector- (rov): ERDAS JPEG2000 (SDK 5.3)
  JP2MrSID -raster- (rov): MrSID JPEG2000
  JP2OpenJPEG -raster,vector- (rwv): JPEG-2000 driver based on OpenJPEG
library

The resulting half-dimensioned GeoTIFF is good with all drivers. Without
having a recent Kakadu driver available I fear that I can't test anything
more.
If your build suppors debug messages you can have a new try by adding
"--debug on" into your gdal_translate command.

-Jukka Rahkonen-





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jmckenna at gatewaygeomatics.com  Thu Oct 18 07:19:58 2018
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 18 Oct 2018 11:19:58 -0300
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <1718019.l2hOor2lnA@even-i700>
References: <1718019.l2hOor2lnA@even-i700>
Message-ID: <71740187-1bbe-572e-6952-fca04034e9b3@gatewaygeomatics.com>

Happy birthday GDAL!  (I shared a beer last week with Frank in SanFran) 
Thank you to Frank, Even, and the whole GDAL community of coders, 
testers, packagers, and users!

-jeff



On 2018-10-17 10:51 PM, Even Rouault wrote:
> Hi,
> 
> I nearly missed it [1] (actually I'm already on the 18th here, but let's consider
> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th 1998,
> Frank Warmerdam committed for the first time in the CSV repository.
> 
> '''
> commit 149db916aafcbee9bb64572fafda83441c94a552
> Author: Frank Warmerdam <warmerdam at pobox.com>
> Date:   Sat Oct 17 19:24:36 1998 +0000
> 
>      Initial implementation.
>      
>      
>      git-svn-id: https://svn.osgeo.org/gdal/trunk at 2 f0d54148-0727-0410-94bb-9a71ac55c965
> '''
> 
> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
> 
> 169 lines for a first version of the virtual I/O layer...
> 
> Since then,
> * 39075 commits have been added on top of it,
> * 159 raster drivers
> * 96 vector drivers [2]
> * by 161 committers (actually there are more contributors, here just counting
>    the ones who have directly authored a CVS, SVN or git commit),
> * adding 7110 files in the repository, for a grand total of
> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp, py,
>    html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all the text files)
>    so an average of 300 lines per day added
> * 64 releases
> * 6287 tickets closed
> * 49097 messages posted on gdal-dev
> * more than 100 software proudly mentionning using it
> 
> Happy birthday and long life to GDAL and its commmnity of contributors, either
> by code, documentation, testing, packaging, reports, ... !
> 
> Even
> 
> [1] thanks to Robert Coup for reminding me a few days ago about the approaching date !
> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>      Byte limitation for the number of drivers ...
> 


-- 
Jeff McKenna
MapServer Consulting and Training Services
https://gatewaygeomatics.com/

From norman.barker at gmail.com  Thu Oct 18 07:39:39 2018
From: norman.barker at gmail.com (Norman Barker)
Date: Thu, 18 Oct 2018 09:39:39 -0500
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <71740187-1bbe-572e-6952-fca04034e9b3@gatewaygeomatics.com>
References: <1718019.l2hOor2lnA@even-i700>
 <71740187-1bbe-572e-6952-fca04034e9b3@gatewaygeomatics.com>
Message-ID: <CAN_Dn-H4aVRvY2e3J8tAwSVsb0wx_CURWOSPm-TjEL2BOaX3Qw@mail.gmail.com>

Happy Birthday GDAL! GDAL has been a large chunk of my professional career.
I am still using the library and tools every day.

Thank you Frank, Even and the entire GDAL community.

Norman

On Thu, Oct 18, 2018 at 9:32 AM Jeff McKenna <jmckenna at gatewaygeomatics.com>
wrote:

> Happy birthday GDAL!  (I shared a beer last week with Frank in SanFran)
> Thank you to Frank, Even, and the whole GDAL community of coders,
> testers, packagers, and users!
>
> -jeff
>
>
>
> On 2018-10-17 10:51 PM, Even Rouault wrote:
> > Hi,
> >
> > I nearly missed it [1] (actually I'm already on the 18th here, but let's
> consider
> > Canadian time so still on the 17th), but exactly 20 years go on Oct 17th
> 1998,
> > Frank Warmerdam committed for the first time in the CSV repository.
> >
> > '''
> > commit 149db916aafcbee9bb64572fafda83441c94a552
> > Author: Frank Warmerdam <warmerdam at pobox.com>
> > Date:   Sat Oct 17 19:24:36 1998 +0000
> >
> >      Initial implementation.
> >
> >
> >      git-svn-id: https://svn.osgeo.org/gdal/trunk at 2
> f0d54148-0727-0410-94bb-9a71ac55c965
> > '''
> >
> >
> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
> >
> > 169 lines for a first version of the virtual I/O layer...
> >
> > Since then,
> > * 39075 commits have been added on top of it,
> > * 159 raster drivers
> > * 96 vector drivers [2]
> > * by 161 committers (actually there are more contributors, here just
> counting
> >    the ones who have directly authored a CVS, SVN or git commit),
> > * adding 7110 files in the repository, for a grand total of
> > * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp,
> py,
> >    html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all
> the text files)
> >    so an average of 300 lines per day added
> > * 64 releases
> > * 6287 tickets closed
> > * 49097 messages posted on gdal-dev
> > * more than 100 software proudly mentionning using it
> >
> > Happy birthday and long life to GDAL and its commmnity of contributors,
> either
> > by code, documentation, testing, packaging, reports, ... !
> >
> > Even
> >
> > [1] thanks to Robert Coup for reminding me a few days ago about the
> approaching date !
> > [2] you'll note that 155 + 96 = 255, but I don't think there's a
> >      Byte limitation for the number of drivers ...
> >
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> https://gatewaygeomatics.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181018/8a7e9742/attachment.html>

From warmerdam at pobox.com  Thu Oct 18 07:54:33 2018
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 18 Oct 2018 07:54:33 -0700
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <1718019.l2hOor2lnA@even-i700>
References: <1718019.l2hOor2lnA@even-i700>
Message-ID: <CA+YzLBfrH-qp8oTDbCBgb1YQTN5gOPLG2YP9Td_6ww8d_4c7TQ@mail.gmail.com>

Even,

Wow, 20 years!  Thanks for pointing out this milestone.

It is a huge pleasure to know that:
 - it has been a core technology supporting so many other software packages
and projects
 - it has been a project that lots of people have felt comfortable
contributing to

GDAL is the core of our data processing pipeline at Planet where we have a
number of esoteric internal GDAL drivers, so I continue to use it every
day.

Special thanks to Even who's outsize contribution has kept the project
healthy and progressing as I focused on other activities.

Best regards,
Frank


On Wed, Oct 17, 2018 at 6:51 PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I nearly missed it [1] (actually I'm already on the 18th here, but let's
> consider
> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th
> 1998,
> Frank Warmerdam committed for the first time in the CSV repository.
>
> '''
> commit 149db916aafcbee9bb64572fafda83441c94a552
> Author: Frank Warmerdam <warmerdam at pobox.com>
> Date:   Sat Oct 17 19:24:36 1998 +0000
>
>     Initial implementation.
>
>
>     git-svn-id: https://svn.osgeo.org/gdal/trunk at 2
> f0d54148-0727-0410-94bb-9a71ac55c965
> '''
>
>
> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
>
> 169 lines for a first version of the virtual I/O layer...
>
> Since then,
> * 39075 commits have been added on top of it,
> * 159 raster drivers
> * 96 vector drivers [2]
> * by 161 committers (actually there are more contributors, here just
> counting
>   the ones who have directly authored a CVS, SVN or git commit),
> * adding 7110 files in the repository, for a grand total of
> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp,
> py,
>   html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all
> the text files)
>   so an average of 300 lines per day added
> * 64 releases
> * 6287 tickets closed
> * 49097 messages posted on gdal-dev
> * more than 100 software proudly mentionning using it
>
> Happy birthday and long life to GDAL and its commmnity of contributors,
> either
> by code, documentation, testing, packaging, reports, ... !
>
> Even
>
> [1] thanks to Robert Coup for reminding me a few days ago about the
> approaching date !
> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>     Byte limitation for the number of drivers ...
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows |
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181018/eae32910/attachment.html>

From alessandro.parma at geo-solutions.it  Thu Oct 18 08:29:26 2018
From: alessandro.parma at geo-solutions.it (Alessandro Parma)
Date: Thu, 18 Oct 2018 17:29:26 +0200
Subject: [gdal-dev] Creating external overviews for JP2 files?
In-Reply-To: <1539870235955-0.post@n6.nabble.com>
References: <CA+nxMTvOCwu9jVkOS2dM_Ycym9ZiGRi7BtFpdbhX2F40b=HKzg@mail.gmail.com>
 <1538996931786-0.post@n6.nabble.com>
 <CAC872wEPWGxYDb-SCKqX7=eypHn95c7Ty+GoxaS3ZatY-465ig@mail.gmail.com>
 <1539810984585-0.post@n6.nabble.com>
 <CAC872wGHbx=YhpgXveEcq5m0Dju19O8FFtHefzNi0Y7gZ_qEng@mail.gmail.com>
 <1539870235955-0.post@n6.nabble.com>
Message-ID: <CAC872wEXrkpn7k1k2v1G_KHheUM+LrhSbfcpNBjcCGRF-3hr9g@mail.gmail.com>

Thanks,

I'll try and get back to you with the output



On Thu, Oct 18, 2018 at 3:44 PM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> alpa wrote
> > Thanks for your reply,
> >
> > My bad, probably copy-pasting mistake. I've re-run the commands:
> >
> > Just to be sure I exported the GDAL_SKIP env var as well:
> >
> > export GDAL_SKIP=JP2OpenJPEG
> > gdalinfo --formats
> > ...
> >   ERS -raster- (rw+v): ERMapper .ers Labelled
> >   JP2KAK -raster,vector- (rwv): JPEG-2000 (based on Kakadu *v7.10.4*)
> >   JPIPKAK -raster- (ro): JPIP (based on Kakadu)
> >   L1B -raster- (rovs): NOAA Polar Orbiter Level 1b Data Set
> > ...
> > (No JP2OpenJPEG, by the way, I am using Kakadu 7.10.4)
> >
> > Looks like gdal_translate is producing a 0-filled raster:
> >
> > gdal_translate -outsize 50% 50% -co TILED=YES -co COMPRESS=JPEG -co
> > PHOTOMETRIC=YCBCR  ./T34WEB_20181015T104021_TCI_10m.jp2
> > ./T34WEB_20181015T104021_TCI_10m.jp2.ovr *--config GDAL_SKIP JP2OpenJPEG*
>
> Hi,
>
> I used your command for one of our orthophoto .jp2 files with these drivers
>
>   gdalinfo --formats|find "JP2"
>   JP2ECW -raster,vector- (rov): ERDAS JPEG2000 (SDK 5.3)
>   JP2MrSID -raster- (rov): MrSID JPEG2000
>   JP2OpenJPEG -raster,vector- (rwv): JPEG-2000 driver based on OpenJPEG
> library
>
> The resulting half-dimensioned GeoTIFF is good with all drivers. Without
> having a recent Kakadu driver available I fear that I can't test anything
> more.
> If your build suppors debug messages you can have a new try by adding
> "--debug on" into your gdal_translate command.
>
> -Jukka Rahkonen-
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 

Regards,

Alessandro Parma

==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Alessandro Parma
DevOps Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------


Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
2016/679 - Regolamento generale sulla protezione dei dati “GDPR”), si
precisa che ogni circostanza inerente alla presente email (il suo
contenuto, gli eventuali allegati, etc.) è un dato la cui conoscenza è
riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
messaggio Le è giunto per errore, è tenuta/o a cancellarlo, ogni altra
operazione è illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is
addressed and may contain information that is privileged, confidential or
otherwise protected from disclosure. We remind that - as provided by
European Regulation 2016/679 “GDPR” - copying, dissemination or use of this
e-mail or the information herein by anyone other than the intended
recipient is prohibited. If you have received this email by mistake, please
notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181018/363f6586/attachment-0001.html>

From tom.kralidis at canada.ca  Thu Oct 18 08:30:52 2018
From: tom.kralidis at canada.ca (Kralidis, Tom (EC))
Date: Thu, 18 Oct 2018 15:30:52 +0000
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <CA+YzLBfrH-qp8oTDbCBgb1YQTN5gOPLG2YP9Td_6ww8d_4c7TQ@mail.gmail.com>
References: <1718019.l2hOor2lnA@even-i700>
 <CA+YzLBfrH-qp8oTDbCBgb1YQTN5gOPLG2YP9Td_6ww8d_4c7TQ@mail.gmail.com>
Message-ID: <4b9c262c90674866ba402ad1e754ab47@PEVDACDEXC017.birch.int.bell.ca>

Congratulations to all of the GDAL community for this milestone!

..Tom

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Frank Warmerdam
Sent: October 18, 2018 10:55
To: Even Rouault <even.rouault at spatialys.com>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Twenty years of GDAL !

Even,

Wow, 20 years!  Thanks for pointing out this milestone.

It is a huge pleasure to know that:
 - it has been a core technology supporting so many other software packages and projects
 - it has been a project that lots of people have felt comfortable contributing to

GDAL is the core of our data processing pipeline at Planet where we have a number of esoteric internal GDAL drivers, so I continue to use it every day. 

Special thanks to Even who's outsize contribution has kept the project healthy and progressing as I focused on other activities. 

Best regards,
Frank


On Wed, Oct 17, 2018 at 6:51 PM Even Rouault <mailto:even.rouault at spatialys.com> wrote:
Hi,

I nearly missed it [1] (actually I'm already on the 18th here, but let's consider
Canadian time so still on the 17th), but exactly 20 years go on Oct 17th 1998,
Frank Warmerdam committed for the first time in the CSV repository.

'''
commit 149db916aafcbee9bb64572fafda83441c94a552
Author: Frank Warmerdam <mailto:warmerdam at pobox.com>
Date:   Sat Oct 17 19:24:36 1998 +0000

    Initial implementation.


    git-svn-id: https://svn.osgeo.org/gdal/trunk at 2 f0d54148-0727-0410-94bb-9a71ac55c965
'''

https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552

169 lines for a first version of the virtual I/O layer...

Since then,
* 39075 commits have been added on top of it,
* 159 raster drivers
* 96 vector drivers [2]
* by 161 committers (actually there are more contributors, here just counting
  the ones who have directly authored a CVS, SVN or git commit),
* adding 7110 files in the repository, for a grand total of
* 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp, py,
  html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all the text files)
  so an average of 300 lines per day added
* 64 releases
* 6287 tickets closed
* 49097 messages posted on gdal-dev
* more than 100 software proudly mentionning using it

Happy birthday and long life to GDAL and its commmnity of contributors, either
by code, documentation, testing, packaging, reports, ... !

Even

[1] thanks to Robert Coup for reminding me a few days ago about the approaching date !
[2] you'll note that 155 + 96 = 255, but I don't think there's a
    Byte limitation for the number of drivers ...

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, mailto:warmerdam at pobox.com
light and sound - activate the windows | 
and watch the world go round - Rush    | Geospatial Software Developer

From asmitawankhede at gmail.com  Thu Oct 18 09:36:47 2018
From: asmitawankhede at gmail.com (Asmita Amol Wankhede)
Date: Thu, 18 Oct 2018 09:36:47 -0700
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <4b9c262c90674866ba402ad1e754ab47@PEVDACDEXC017.birch.int.bell.ca>
References: <1718019.l2hOor2lnA@even-i700>
 <CA+YzLBfrH-qp8oTDbCBgb1YQTN5gOPLG2YP9Td_6ww8d_4c7TQ@mail.gmail.com>
 <4b9c262c90674866ba402ad1e754ab47@PEVDACDEXC017.birch.int.bell.ca>
Message-ID: <CAJYydMXad8pyQrGg_MKjwsUbwdsdHEwQe8ARKPodXD76PpaiNA@mail.gmail.com>

Blessed to have such a strong open source community! Happy birthday GDAL!

On Thu, Oct 18, 2018, 8:41 AM Kralidis, Tom (EC) <tom.kralidis at canada.ca>
wrote:

> Congratulations to all of the GDAL community for this milestone!
>
> ..Tom
>
> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Frank
> Warmerdam
> Sent: October 18, 2018 10:55
> To: Even Rouault <even.rouault at spatialys.com>
> Cc: gdal dev <gdal-dev at lists.osgeo.org>
> Subject: Re: [gdal-dev] Twenty years of GDAL !
>
> Even,
>
> Wow, 20 years!  Thanks for pointing out this milestone.
>
> It is a huge pleasure to know that:
>  - it has been a core technology supporting so many other software
> packages and projects
>  - it has been a project that lots of people have felt comfortable
> contributing to
>
> GDAL is the core of our data processing pipeline at Planet where we have a
> number of esoteric internal GDAL drivers, so I continue to use it every
> day.
>
> Special thanks to Even who's outsize contribution has kept the project
> healthy and progressing as I focused on other activities.
>
> Best regards,
> Frank
>
>
> On Wed, Oct 17, 2018 at 6:51 PM Even Rouault <mailto:
> even.rouault at spatialys.com> wrote:
> Hi,
>
> I nearly missed it [1] (actually I'm already on the 18th here, but let's
> consider
> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th
> 1998,
> Frank Warmerdam committed for the first time in the CSV repository.
>
> '''
> commit 149db916aafcbee9bb64572fafda83441c94a552
> Author: Frank Warmerdam <mailto:warmerdam at pobox.com>
> Date:   Sat Oct 17 19:24:36 1998 +0000
>
>     Initial implementation.
>
>
>     git-svn-id: https://svn.osgeo.org/gdal/trunk at 2
> f0d54148-0727-0410-94bb-9a71ac55c965
> '''
>
>
> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
>
> 169 lines for a first version of the virtual I/O layer...
>
> Since then,
> * 39075 commits have been added on top of it,
> * 159 raster drivers
> * 96 vector drivers [2]
> * by 161 committers (actually there are more contributors, here just
> counting
>   the ones who have directly authored a CVS, SVN or git commit),
> * adding 7110 files in the repository, for a grand total of
> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp,
> py,
>   html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all
> the text files)
>   so an average of 300 lines per day added
> * 64 releases
> * 6287 tickets closed
> * 49097 messages posted on gdal-dev
> * more than 100 software proudly mentionning using it
>
> Happy birthday and long life to GDAL and its commmnity of contributors,
> either
> by code, documentation, testing, packaging, reports, ... !
>
> Even
>
> [1] thanks to Robert Coup for reminding me a few days ago about the
> approaching date !
> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>     Byte limitation for the number of drivers ...
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, mailto:
> warmerdam at pobox.com
> light and sound - activate the windows |
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181018/8951bb9a/attachment.html>

From abhay.menon at gmail.com  Thu Oct 18 09:46:29 2018
From: abhay.menon at gmail.com (Abhay)
Date: Thu, 18 Oct 2018 22:16:29 +0530
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <CAJYydMXad8pyQrGg_MKjwsUbwdsdHEwQe8ARKPodXD76PpaiNA@mail.gmail.com>
References: <1718019.l2hOor2lnA@even-i700>
 <CA+YzLBfrH-qp8oTDbCBgb1YQTN5gOPLG2YP9Td_6ww8d_4c7TQ@mail.gmail.com>
 <4b9c262c90674866ba402ad1e754ab47@PEVDACDEXC017.birch.int.bell.ca>
 <CAJYydMXad8pyQrGg_MKjwsUbwdsdHEwQe8ARKPodXD76PpaiNA@mail.gmail.com>
Message-ID: <CAAcfx8-hCG+M=X83E=MszrMEUYczZY2vTemv+QTTcYbvGP+RQQ@mail.gmail.com>

Great going!!

Thank you Frank, Even and all for the wonderful core technology that keeps
us going. :)

Rgds,

Abhay.

On Thu, 18 Oct 2018 at 10:07 PM Asmita Amol Wankhede <
asmitawankhede at gmail.com> wrote:

> Blessed to have such a strong open source community! Happy birthday GDAL!
>
> On Thu, Oct 18, 2018, 8:41 AM Kralidis, Tom (EC) <tom.kralidis at canada.ca>
> wrote:
>
>> Congratulations to all of the GDAL community for this milestone!
>>
>> ..Tom
>>
>> From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> On Behalf Of Frank
>> Warmerdam
>> Sent: October 18, 2018 10:55
>> To: Even Rouault <even.rouault at spatialys.com>
>> Cc: gdal dev <gdal-dev at lists.osgeo.org>
>> Subject: Re: [gdal-dev] Twenty years of GDAL !
>>
>> Even,
>>
>> Wow, 20 years!  Thanks for pointing out this milestone.
>>
>> It is a huge pleasure to know that:
>>  - it has been a core technology supporting so many other software
>> packages and projects
>>  - it has been a project that lots of people have felt comfortable
>> contributing to
>>
>> GDAL is the core of our data processing pipeline at Planet where we have
>> a number of esoteric internal GDAL drivers, so I continue to use it every
>> day.
>>
>> Special thanks to Even who's outsize contribution has kept the project
>> healthy and progressing as I focused on other activities.
>>
>> Best regards,
>> Frank
>>
>>
>> On Wed, Oct 17, 2018 at 6:51 PM Even Rouault <mailto:
>> even.rouault at spatialys.com> wrote:
>> Hi,
>>
>> I nearly missed it [1] (actually I'm already on the 18th here, but let's
>> consider
>> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th
>> 1998,
>> Frank Warmerdam committed for the first time in the CSV repository.
>>
>> '''
>> commit 149db916aafcbee9bb64572fafda83441c94a552
>> Author: Frank Warmerdam <mailto:warmerdam at pobox.com>
>> Date:   Sat Oct 17 19:24:36 1998 +0000
>>
>>     Initial implementation.
>>
>>
>>     git-svn-id: https://svn.osgeo.org/gdal/trunk at 2
>> f0d54148-0727-0410-94bb-9a71ac55c965
>> '''
>>
>>
>> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
>>
>> 169 lines for a first version of the virtual I/O layer...
>>
>> Since then,
>> * 39075 commits have been added on top of it,
>> * 159 raster drivers
>> * 96 vector drivers [2]
>> * by 161 committers (actually there are more contributors, here just
>> counting
>>   the ones who have directly authored a CVS, SVN or git commit),
>> * adding 7110 files in the repository, for a grand total of
>> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp,
>> py,
>>   html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all
>> the text files)
>>   so an average of 300 lines per day added
>> * 64 releases
>> * 6287 tickets closed
>> * 49097 messages posted on gdal-dev
>> * more than 100 software proudly mentionning using it
>>
>> Happy birthday and long life to GDAL and its commmnity of contributors,
>> either
>> by code, documentation, testing, packaging, reports, ... !
>>
>> Even
>>
>> [1] thanks to Robert Coup for reminding me a few days ago about the
>> approaching date !
>> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>>     Byte limitation for the number of drivers ...
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>>
>>
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, mailto:
>> warmerdam at pobox.com
>> light and sound - activate the windows |
>> and watch the world go round - Rush    | Geospatial Software Developer
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181018/2acf76cb/attachment-0001.html>

From neteler at osgeo.org  Thu Oct 18 10:23:44 2018
From: neteler at osgeo.org (Markus Neteler)
Date: Thu, 18 Oct 2018 19:23:44 +0200
Subject: [gdal-dev] Twenty years of GDAL !
In-Reply-To: <CA+YzLBfrH-qp8oTDbCBgb1YQTN5gOPLG2YP9Td_6ww8d_4c7TQ@mail.gmail.com>
References: <1718019.l2hOor2lnA@even-i700>
 <CA+YzLBfrH-qp8oTDbCBgb1YQTN5gOPLG2YP9Td_6ww8d_4c7TQ@mail.gmail.com>
Message-ID: <CALFmHhvUMCiqHKo4T8c9t7StTW5E+5QqSQO7yZkP_zj9EAyWfQ@mail.gmail.com>

Frank, Even, all  GDAL devs,

a big "thank you" from the GRASS GIS community!

Frank, your initial contribution was r.in.gdal on Sep 26, 2000:
https://trac.osgeo.org/grass/changeset/1688

r.in.gdal got released the first time with GRASS GIS 5.0:
https://grass.osgeo.org/announces/announce_grass50beta10.html

... 18 years ago!

Thanks again for all your efforts to develop GDAL!

Markus


On Thu, Oct 18, 2018 at 4:54 PM Frank Warmerdam <warmerdam at pobox.com> wrote:
> Even,
>
> Wow, 20 years!  Thanks for pointing out this milestone.
>
> It is a huge pleasure to know that:
>  - it has been a core technology supporting so many other software packages and projects
>  - it has been a project that lots of people have felt comfortable contributing to
>
> GDAL is the core of our data processing pipeline at Planet where we have a number of esoteric internal GDAL drivers, so I continue to use it every day.
>
> Special thanks to Even who's outsize contribution has kept the project healthy and progressing as I focused on other activities.
>
> Best regards,
> Frank
>
>
> On Wed, Oct 17, 2018 at 6:51 PM Even Rouault <even.rouault at spatialys.com> wrote:
>> Hi,
>>
>> I nearly missed it [1] (actually I'm already on the 18th here, but let's consider
>> Canadian time so still on the 17th), but exactly 20 years go on Oct 17th 1998,
>> Frank Warmerdam committed for the first time in the CSV repository.
>>
>> '''
>> commit 149db916aafcbee9bb64572fafda83441c94a552
>> Author: Frank Warmerdam <warmerdam at pobox.com>
>> Date:   Sat Oct 17 19:24:36 1998 +0000
>>
>>     Initial implementation.
>>
>>
>>     git-svn-id: https://svn.osgeo.org/gdal/trunk at 2 f0d54148-0727-0410-94bb-9a71ac55c965
>> '''
>>
>> https://github.com/OSGeo/gdal/commit/149db916aafcbee9bb64572fafda83441c94a552
>>
>> 169 lines for a first version of the virtual I/O layer...
>>
>> Since then,
>> * 39075 commits have been added on top of it,
>> * 159 raster drivers
>> * 96 vector drivers [2]
>> * by 161 committers (actually there are more contributors, here just counting
>>   the ones who have directly authored a CVS, SVN or git commit),
>> * adding 7110 files in the repository, for a grand total of
>> * 2.192 millions lines in 3745 files with extensions c, cpp, h, hh, hpp, py,
>>   html, java, cs, i, pl, vc, sh, bat, dox, ac, GNUmakefile (80 MB) (all the text files)
>>   so an average of 300 lines per day added
>> * 64 releases
>> * 6287 tickets closed
>> * 49097 messages posted on gdal-dev
>> * more than 100 software proudly mentionning using it
>>
>> Happy birthday and long life to GDAL and its commmnity of contributors, either
>> by code, documentation, testing, packaging, reports, ... !
>>
>> Even
>>
>> [1] thanks to Robert Coup for reminding me a few days ago about the approaching date !
>> [2] you'll note that 155 + 96 = 255, but I don't think there's a
>>     Byte limitation for the number of drivers ...
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>
>
>
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows |
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Markus Neteler, PhD
http://www.mundialis.de - free data with free software
http://grass.osgeo.org
http://courses.neteler.org/blog

From astewart at terragotech.com  Fri Oct 19 11:17:26 2018
From: astewart at terragotech.com (Alan Stewart)
Date: Fri, 19 Oct 2018 18:17:26 +0000
Subject: [gdal-dev] gdalautotest
Message-ID: <BN3PR15MB0850687780FA1BBEB954DC15C4F90@BN3PR15MB0850.namprd15.prod.outlook.com>

I'm running gdalautotest locally on Windows 7 Pro, building VS 2017 32-bit. Test ogr_sql_81 is throwing an exception, apparently because of 'select * from D\303\251parts'.  I guess this could be either an issue with my Python install or with my GDAL build. My Python is 2.7.11 from the Python Software Foundation. I'm not setting anything in my nmake.local I'm aware of that is relevant to strings. Thoughts?

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181019/84f5f962/attachment.html>

From even.rouault at spatialys.com  Fri Oct 19 11:27:06 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 19 Oct 2018 20:27:06 +0200
Subject: [gdal-dev] gdalautotest
In-Reply-To: <BN3PR15MB0850687780FA1BBEB954DC15C4F90@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BN3PR15MB0850687780FA1BBEB954DC15C4F90@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <3941841.fUsjdQSFB1@even-i700>

On vendredi 19 octobre 2018 18:17:26 CEST Alan Stewart wrote:
> 'select * from D\303\251parts'

This is an octal representation of the eacute character in UTF-8. Check that 
autotest/ogr/data/departs.vrt does contain a eacute (départs as then name 
attribute of OGRVRTLayer) encoded in UTF-8


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From laasunde at hotmail.com  Mon Oct 22 00:15:10 2018
From: laasunde at hotmail.com (Lars)
Date: Mon, 22 Oct 2018 07:15:10 +0000
Subject: [gdal-dev] Reading S-63
Message-ID: <HE1PR03MB1338F75FA8D7154B619E59D9CAF40@HE1PR03MB1338.eurprd03.prod.outlook.com>

Hello folks,

We use GDAL successfully in a number of systems.

We would like to add support for reading S-63 data in one system but from what we found when googling is that GDAL does not support this format. We would like to verify that GDAL does not support S-63? Is possible / viable to add support for S-63 in GDAL?

kind regards, Lars


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181022/e5c4f48c/attachment.html>

From even.rouault at spatialys.com  Mon Oct 22 03:41:48 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 22 Oct 2018 12:41:48 +0200
Subject: [gdal-dev] Reading S-63
In-Reply-To: <HE1PR03MB1338F75FA8D7154B619E59D9CAF40@HE1PR03MB1338.eurprd03.prod.outlook.com>
References: <HE1PR03MB1338F75FA8D7154B619E59D9CAF40@HE1PR03MB1338.eurprd03.prod.outlook.com>
Message-ID: <2714918.4dEUF6HjF9@even-i700>

Lars,

> We would like to add support for reading S-63 data in one system but from
> what we found when googling is that GDAL does not support this format. We
> would like to verify that GDAL does not support S-63? 

No, it doesn't.

> Is possible / viable
> to add support for S-63 in GDAL?

Technically, it should be possible to develop a S-63 reader in GDAL.

But I doubt that your S-63 data reseller would then accept to provide you with 
the PERMITS.TXT file (the decryption key), in that case since that would allow 
you to create a un-encrypted version of that data, which would likely violate 
the agreement you have with him.

See http://lists.maptools.org/pipermail/fwtools/2005-March/thread.html for 
related discussion

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Peter.Marlow at scisys.co.uk  Mon Oct 22 08:19:44 2018
From: Peter.Marlow at scisys.co.uk (Peter Marlow)
Date: Mon, 22 Oct 2018 15:19:44 +0000
Subject: [gdal-dev] Import Shapefile into SQL Server on Ubuntu
Message-ID: <AA48096CDCDA4745B245B6A21526D998400FD0AA@CITCH-MXEXCH1.scisys.co.uk>

Hi,

I'm trying to import a Shapefile into an SQL Server database using ogr2ogr on Ubuntu. The command I'm running looks like:

ogr2ogr -f MSSQLSpatial "MSSQL:server=localhost;database=[database-name];username=sa;password=*****;trusted_connection=yes" [path-to-shape-file]

It returns an error stating:

ERROR 1: Unable to find driver `MSSQLSpatial'.

Is it possible to get the driver on linux? Or use an alternative driver? I've had a google and can't seem to see any workarounds.

The docs here (https://www.gdal.org/drv_mssqlspatial.html) talk about specifying a Driver parameter that could be a custom SQL Server driver, however this is in the connection string and not as a parameter for the ogr2ogr command.

Thanks,
Pete



SCISYS UK Limited. Registered in England and Wales No. 4373530.
Registered Office: Methuen Park, Chippenham, Wiltshire SN14 0GB, UK.
 
Before printing, please think about the environment.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181022/70491236/attachment.html>

From mateusz at loskot.net  Mon Oct 22 08:31:07 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Mon, 22 Oct 2018 17:31:07 +0200
Subject: [gdal-dev] Import Shapefile into SQL Server on Ubuntu
In-Reply-To: <AA48096CDCDA4745B245B6A21526D998400FD0AA@CITCH-MXEXCH1.scisys.co.uk>
References: <AA48096CDCDA4745B245B6A21526D998400FD0AA@CITCH-MXEXCH1.scisys.co.uk>
Message-ID: <CABUeae-HkmLg5umovn3Ei3czt02g1Ns=mw3taZOypLTNsEET6A@mail.gmail.com>

On Mon, 22 Oct 2018 at 17:25, Peter Marlow <Peter.Marlow at scisys.co.uk> wrote:
>
> I’m trying to import a Shapefile into an SQL Server database using ogr2ogr on Ubuntu. The command I’m running looks like:
>
> ogr2ogr -f MSSQLSpatial "MSSQL:server=localhost;database=[database-name];username=sa;password=*****;trusted_connection=yes" [path-to-shape-file]
>
> It returns an error stating:
>
> ERROR 1: Unable to find driver `MSSQLSpatial'.

I guess, GDAL/OGR version you are using on Linux is not built with
ODBC/SQL Server support.

> Is it possible to get the driver on linux? Or use an alternative driver? I’ve had a google and can’t seem to see any workarounds.
>
> The docs here (https://www.gdal.org/drv_mssqlspatial.html) talk about specifying a Driver parameter that could be
> a custom SQL Server driver, however this is in the connection string and not as a parameter for the ogr2ogr command.

Once you get GDAL/OGR built with SQL Server, install ODBC Driver for SQL Server
(there are clear docs on Microsoft site, you will find easily searching the web)

Then, try sticking the Driver option into the connection string
Driver={ODBC Driver 11 for SQL Server}
Driver={ODBC Driver 13 for SQL Server}
Driver={ODBC Driver 13.1 for SQL Server}
Driver={ODBC Driver 17 for SQL Server}
depending which version you install.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From randre at gmail.com  Mon Oct 22 08:33:09 2018
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Mon, 22 Oct 2018 08:33:09 -0700
Subject: [gdal-dev] Import Shapefile into SQL Server on Ubuntu
In-Reply-To: <AA48096CDCDA4745B245B6A21526D998400FD0AA@CITCH-MXEXCH1.scisys.co.uk>
References: <AA48096CDCDA4745B245B6A21526D998400FD0AA@CITCH-MXEXCH1.scisys.co.uk>
Message-ID: <CAOL+ROEyi-rxEcj56c5F6_iC-m3Ek7bj8gzUZvjfcUuWmMS27g@mail.gmail.com>

See if this helps -
https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-2017
.

On Mon, Oct 22, 2018 at 8:25 AM Peter Marlow <Peter.Marlow at scisys.co.uk>
wrote:

> Hi,
>
>
>
> I’m trying to import a Shapefile into an SQL Server database using ogr2ogr
> on Ubuntu. The command I’m running looks like:
>
>
>
> *ogr2ogr -f MSSQLSpatial
> "MSSQL:server=localhost;database=[database-name];username=sa;password=*****;trusted_connection=yes"
> [path-to-shape-file]*
>
>
>
> It returns an error stating:
>
>
>
> *ERROR 1: Unable to find driver `MSSQLSpatial'.*
>
>
>
> Is it possible to get the driver on linux? Or use an alternative driver?
> I’ve had a google and can’t seem to see any workarounds.
>
>
>
> The docs here (https://www.gdal.org/drv_mssqlspatial.html) talk about
> specifying a *Driver* parameter that could be a custom SQL Server driver,
> however this is in the connection string and not as a parameter for the
> ogr2ogr command.
>
>
>
> Thanks,
> Pete
>
>
>
> <http://gfidisc.scisys.co.uk>
>
>
> SCISYS UK Limited. Registered in England and Wales No. 4373530.
> Registered Office: Methuen Park, Chippenham, Wiltshire SN14 0GB, UK.
>
> Before printing, please think about the environment.
>
> <http://gfidisc.scisys.co.uk>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181022/8256579e/attachment-0001.html>

From mateusz at loskot.net  Tue Oct 23 01:26:28 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 23 Oct 2018 10:26:28 +0200
Subject: [gdal-dev] Import Shapefile into SQL Server on Ubuntu
In-Reply-To: <AA48096CDCDA4745B245B6A21526D998401000DF@CITCH-MXEXCH1.scisys.co.uk>
References: <AA48096CDCDA4745B245B6A21526D998400FD0AA@CITCH-MXEXCH1.scisys.co.uk>
 <CABUeae-HkmLg5umovn3Ei3czt02g1Ns=mw3taZOypLTNsEET6A@mail.gmail.com>
 <AA48096CDCDA4745B245B6A21526D998401000DF@CITCH-MXEXCH1.scisys.co.uk>
Message-ID: <CABUeae8fozOH7gQAKGsnENkxtskDdnTDmU=sPyQcEu0KtA_0_Q@mail.gmail.com>

On Tue, 23 Oct 2018 at 09:51, Peter Marlow <Peter.Marlow at scisys.co.uk> wrote:
>
> You mention getting a version of GDAL/OGR built with SQL Server, how would I go about obtaining this?

By building installing unixODBC and GDAL from sources

https://trac.osgeo.org/gdal/wiki/BuildingOnUnix

Best regards,,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From guyd at satellogic.com  Wed Oct 24 00:50:14 2018
From: guyd at satellogic.com (Guy Doulberg)
Date: Wed, 24 Oct 2018 10:50:14 +0300
Subject: [gdal-dev] Nodata value and overviews
Message-ID: <CAJ18MZoM88yh99s=nzpMbjD4SN6ihRbvVNtW9iFBvKgfy=2+Eg@mail.gmail.com>

Hi guys

I have a raster with NODATA value defined

I am creating overviews on top of that raster, using the gdaladdo

When using the overviews should I consider the NODATA value when reading
the pixels, or all pixels in the overviews are valid?

When calculating the overviews does gdaladdo consider the NODATA values as
invalid pixels?

Thanks, Guy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181024/6c5d983e/attachment.html>

From even.rouault at spatialys.com  Wed Oct 24 03:08:15 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Oct 2018 12:08:15 +0200
Subject: [gdal-dev] Nodata value and overviews
In-Reply-To: <CAJ18MZoM88yh99s=nzpMbjD4SN6ihRbvVNtW9iFBvKgfy=2+Eg@mail.gmail.com>
References: <CAJ18MZoM88yh99s=nzpMbjD4SN6ihRbvVNtW9iFBvKgfy=2+Eg@mail.gmail.com>
Message-ID: <1996014.TzRP05xNjp@even-i700>

On mercredi 24 octobre 2018 10:50:14 CEST Guy Doulberg wrote:
> Hi guys
> 
> I have a raster with NODATA value defined
> 
> I am creating overviews on top of that raster, using the gdaladdo
> 
> When using the overviews should I consider the NODATA value when reading
> the pixels, or all pixels in the overviews are valid?

Some of them might be set to NODATA. gdaladdo doesn't know how to create 
validity from invalidity ;-)

> 
> When calculating the overviews does gdaladdo consider the NODATA values as
> invalid pixels?

Yes

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From arthur.bogard at gmail.com  Wed Oct 24 10:59:45 2018
From: arthur.bogard at gmail.com (kingarthur10)
Date: Wed, 24 Oct 2018 10:59:45 -0700 (MST)
Subject: [gdal-dev] GDAL FITS reader support for more than 32-bit signed INT
 number of pixels?
Message-ID: <1540403985277-0.post@n6.nabble.com>

Hello All,

I'm trying to read in a large FITS image using the following command:



When I run that, I get the following error:


After some sluething, I can pull in an image up to 65536 x 32768 in size. 
One pixel beyond that in a dimension gives me the same error (although the
Y-offset changes based on the size).

It appears that if the total number of pixels exceeds a 32-bit signed
integer, the reader crashes.

Does anyone have ideas on how I can make this work with GDAL?  It simplifies
my process a lot, and I ultimately need to output a geotiff from the data. 
GDAL is way more efficient than ImageMagick with large image conversions,
and cutting out a step entirely is helpful.

Thanks for any insight!

Arthur



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Oct 24 11:25:38 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Oct 2018 20:25:38 +0200
Subject: [gdal-dev] GDAL FITS reader support for more than 32-bit signed
	INT number of pixels?
In-Reply-To: <1540403985277-0.post@n6.nabble.com>
References: <1540403985277-0.post@n6.nabble.com>
Message-ID: <8329806.fDnigA9It3@even-i700>

On mercredi 24 octobre 2018 10:59:45 CEST kingarthur10 wrote:
> Hello All,
> 
> I'm trying to read in a large FITS image using the following command:
> 
> 
> 
> When I run that, I get the following error:
> 
> 
> After some sluething, I can pull in an image up to 65536 x 32768 in size.
> One pixel beyond that in a dimension gives me the same error (although the
> Y-offset changes based on the size).
> 
> It appears that if the total number of pixels exceeds a 32-bit signed
> integer, the reader crashes.

Dear King Arthur,

Should be fixed per 
https://github.com/OSGeo/gdal/commit/25fc57b7642662356328928a01e3d64ff89eb4c7

Lancelot

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ao at t-kartor.se  Thu Oct 25 01:51:54 2018
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Thu, 25 Oct 2018 10:51:54 +0200
Subject: [gdal-dev] CSV file extension
Message-ID: <415aab53-ef1d-2af0-bf68-0a4d000bc55f@t-kartor.se>

Can ogr read a csv file with another extension, like txt ?

I do not suceed

-- 
Best Regards

Andreas Oxenstierna
T-Kartor Geospatial AB
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com


From jukka.rahkonen at maanmittauslaitos.fi  Thu Oct 25 02:31:00 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 25 Oct 2018 02:31:00 -0700 (MST)
Subject: [gdal-dev] CSV file extension
In-Reply-To: <415aab53-ef1d-2af0-bf68-0a4d000bc55f@t-kartor.se>
References: <415aab53-ef1d-2af0-bf68-0a4d000bc55f@t-kartor.se>
Message-ID: <1540459860668-0.post@n6.nabble.com>

Andreas Oxenstierna wrote
> Can ogr read a csv file with another extension, like txt ?
> 
> I do not suceed


Hi,

>From the manual page https://www.gdal.org/drv_csv.html

"While in theory .csv files could have any extension, in order to
auto-recognise the format OGR only supports CSV files ending with the
extension ".csv". The datasource name may be either a single CSV file or
point to a directory. For a directory to be recognised as a .csv datasource
at least half the files in the directory need to have the extension .csv.
One layer (table) is produced from each .csv file accessed.

Starting with GDAL 1.8.0, for files structured as CSV, but not ending with
.CSV extension, the 'CSV:' prefix can be added before the filename to force
loading by the CSV driver."

Try ogrinfo CSV:my_text.txt


-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From ao at t-kartor.se  Thu Oct 25 03:06:43 2018
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Thu, 25 Oct 2018 12:06:43 +0200
Subject: [gdal-dev] CSV file extension
In-Reply-To: <1540459860668-0.post@n6.nabble.com>
References: <415aab53-ef1d-2af0-bf68-0a4d000bc55f@t-kartor.se>
 <1540459860668-0.post@n6.nabble.com>
Message-ID: <80ad5217-4c7f-0e96-f4bd-a3f821a9fd59@t-kartor.se>

Thanks - missed that documentation.
Stopped reading at "OGR only supports CSV files ending with the 
extension ".csv"
-maybe the sentences should be reorganised to someting like:
OGR supports CSV files ending with the extension ".csv" or any other CSV 
file with any file extension if defining the source as CSV:<filename>

> Andreas Oxenstierna wrote
>> Can ogr read a csv file with another extension, like txt ?
>>
>> I do not suceed
>
> Hi,
>
>  From the manual page https://www.gdal.org/drv_csv.html
>
> "While in theory .csv files could have any extension, in order to
> auto-recognise the format OGR only supports CSV files ending with the
> extension ".csv". The datasource name may be either a single CSV file or
> point to a directory. For a directory to be recognised as a .csv datasource
> at least half the files in the directory need to have the extension .csv.
> One layer (table) is produced from each .csv file accessed.
>
> Starting with GDAL 1.8.0, for files structured as CSV, but not ending with
> .CSV extension, the 'CSV:' prefix can be added before the filename to force
> loading by the CSV driver."
>
> Try ogrinfo CSV:my_text.txt
>
>
> -Jukka Rahkonen-
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Best Regards

Andreas Oxenstierna
T-Kartor Geospatial AB
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com


From jerryfaust1 at gmail.com  Thu Oct 25 09:28:59 2018
From: jerryfaust1 at gmail.com (Jerry Faust)
Date: Thu, 25 Oct 2018 09:28:59 -0700
Subject: [gdal-dev] Retrieving assigned IDENTITY value from MSSQL
Message-ID: <CACEsS4TjE3vaUdhUFsNjwBW6r6Byy2EPyD-d_NNivYP+q+DNtA@mail.gmail.com>

Hello.



I created a few tables in SQL Server by importing Shapefiles using ogr2ogr.
I am able to edit the features, but have not been able to add new features.



After stepping through the code, it appears that after successfully
inserting the record, the newly assigned FID is not being set into the
feature - it is still -1 (OGRNullFID).



Before I consider making changes, I wonder if I’m just missing something.  It
would seem that others would have encountered this before.



Thank you.



Regards.

Jerry.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181025/b0f76125/attachment.html>

From ramotswa at gmail.com  Thu Oct 25 11:01:47 2018
From: ramotswa at gmail.com (Tobias Reinicke)
Date: Thu, 25 Oct 2018 19:01:47 +0100
Subject: [gdal-dev] Scale / offset query
Message-ID: <CAPitpCbJfazktmNeov_UztY+O8+9owt-DD_QM=t1igDO-gYdHA@mail.gmail.com>

Hello All,

I am getting stuck in a bit of a scale / offset hole and can't seem to
figure out a simple way of doing this  - although I'm sure it's there.
For background - I am trying to convert a series of temporal netcdf files
(i.e. total column CO concentrations across different times) into colour
ramp applied PNG's. The outputting PNG's need to be a specific height /
width, and need to represent the data in epsg:4326, and need the bottom
left corner to be 0, -90 (rather than -180, -90) - and finally a colour
ramp needs to be a applied.

I can manage all this - with a combination of gdalwarp with t_srs, te and
ts flags, and then gdaldem color-relief with my own colour ramp.

However - and this might be obvious to many of you - I just haven't worked
with scaled data much before;
When I put the netcdf file into QGIS I can see the CO concentration values
represented as min / max colour scales.  These values (again, obviously for
some) represent the 16bit value of the pixel, times the scale value of that
band, plus the offset value of that band (as can be seen by gdalinfo), and
the scale and offset are different for each NC file I have.

Now when I do gdalwarp I know I am resampling the data, and I (therefore?)
lose the scale / offset information, and so for image 1, the min 16bit
value (-32766) represent a different CO concentration than the min 16bit
value of image 2, (also -32766) - and so applying any colour ramps to that
makes no sense.

Is there a way to pass the scale / offset information from the original NC
file to the output of gdal_warp?

Apologies for the long question - it's quite hard to describe actually.

Thanks in advance,
Toby
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181025/cef93ed1/attachment.html>

From even.rouault at spatialys.com  Thu Oct 25 11:11:44 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Oct 2018 20:11:44 +0200
Subject: [gdal-dev] Scale / offset query
In-Reply-To: <CAPitpCbJfazktmNeov_UztY+O8+9owt-DD_QM=t1igDO-gYdHA@mail.gmail.com>
References: <CAPitpCbJfazktmNeov_UztY+O8+9owt-DD_QM=t1igDO-gYdHA@mail.gmail.com>
Message-ID: <2464138.g38uesx8sT@even-i700>

Tobias,

> 
> Is there a way to pass the scale / offset information from the original NC
> file to the output of gdal_warp?

You can 'unscale' priorly with "gdal_translate -unscale in.nc out.vrt -of VRT" 
and gdalwarp the VRT.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ramotswa at gmail.com  Thu Oct 25 11:22:39 2018
From: ramotswa at gmail.com (Tobias Reinicke)
Date: Thu, 25 Oct 2018 19:22:39 +0100
Subject: [gdal-dev] Scale / offset query
In-Reply-To: <2464138.g38uesx8sT@even-i700>
References: <CAPitpCbJfazktmNeov_UztY+O8+9owt-DD_QM=t1igDO-gYdHA@mail.gmail.com>
 <2464138.g38uesx8sT@even-i700>
Message-ID: <CAPitpCYj5cgbvW8aNGf3OsNkSL34QHDdXdDapixMUS7Lz=Tp2w@mail.gmail.com>

Thanks Even,
So doing that command, and then looking at;
"gdalinfo -hist out.vrt" gives me a list of wrong looking buckets;

Band 1 Block=128x128 Type=Int16, ColorInterp=Undefined
0...10...20...30...40...50...60...70...80...90...100 - done.
  256 buckets from 0 to 0:
  6483600 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

(and the resulting tif from the gdal_warp of that also doesn't display
properly in qgis).

For info, the original netcdf gdalinfo is;

Driver: netCDF/Network Common Data Format
Files: MACC-IFS_forecasts_of_total_column_CO_2018-08-05.nc
       MACC-IFS_forecasts_of_total_column_CO_2018-08-05.nc.aux.xml
Size is 3600, 1801
Coordinate System is `'
Origin = (-0.049999999152054,90.049999999999997)
Pixel Size = (0.099999998304108,-0.100000000000000)
Metadata:
  latitude#long_name=latitude
  latitude#units=degrees_north
  longitude#long_name=longitude
  longitude#units=degrees_east
  NC_GLOBAL#Conventions=CF-1.6
  NC_GLOBAL#history=2018-10-16 12:30:21 GMT by grib_to_netcdf-2.8.0:
grib_to_netcdf
/data/data01/scratch/64/10/_mars-atls14-a82bacafb5c306db76464bc7e824bb75-stvecY.grib
-o
/data/data03/scratch/20/51/_grib2netcdf-atls13-98f536083ae965b31b0d04811be6f4c6-1XurHN.nc
-utime
  NETCDF_DIM_EXTRA={time}
  NETCDF_DIM_time_DEF={1,4}
  NETCDF_DIM_time_VALUES=1039560
  tcco#add_offset=0.005068144666631755
  tcco#long_name=Total column Carbon monoxide
  tcco#missing_value=-32767
  tcco#scale_factor=1.473959627507736e-07
  tcco#units=kg m**-2
  tcco#_FillValue=-32767
  time#calendar=gregorian
  time#long_name=time
  time#units=hours since 1900-01-01 00:00:0.0
Corner Coordinates:
Upper Left  (  -0.0500000,  90.0500000)
Lower Left  (  -0.0500000, -90.0500000)
Upper Right (     359.950,      90.050)
Lower Right (     359.950,     -90.050)
Center      ( 179.9499969,  -0.0000000)
Band 1 Block=3600x1 Type=Int16, ColorInterp=Undefined
  Min=-32766.000 Max=32767.000
  Minimum=-32766.000, Maximum=32767.000, Mean=-29973.406, StdDev=1279.310
  NoData Value=-32767
  Unit Type: kg m**-2
  Offset: 0.00506814466663176,   Scale:1.47395962750774e-07
  Metadata:
    add_offset=0.005068144666631755
    long_name=Total column Carbon monoxide
    missing_value=-32767
    NETCDF_DIM_time=1039560
    NETCDF_VARNAME=tcco
    scale_factor=1.473959627507736e-07
    STATISTICS_MAXIMUM=32767
    STATISTICS_MEAN=-29973.406142881
    STATISTICS_MINIMUM=-32766
    STATISTICS_STDDEV=1279.3102503388
    units=kg m**-2
    _FillValue=-32767

On Thu, 25 Oct 2018 at 19:11, Even Rouault <even.rouault at spatialys.com>
wrote:

> Tobias,
>
> >
> > Is there a way to pass the scale / offset information from the original
> NC
> > file to the output of gdal_warp?
>
> You can 'unscale' priorly with "gdal_translate -unscale in.nc out.vrt -of
> VRT"
> and gdalwarp the VRT.
>
> Even
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181025/b4cf6867/attachment-0001.html>

From even.rouault at spatialys.com  Thu Oct 25 11:40:44 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Oct 2018 20:40:44 +0200
Subject: [gdal-dev] Scale / offset query
In-Reply-To: <CAPitpCYj5cgbvW8aNGf3OsNkSL34QHDdXdDapixMUS7Lz=Tp2w@mail.gmail.com>
References: <CAPitpCbJfazktmNeov_UztY+O8+9owt-DD_QM=t1igDO-gYdHA@mail.gmail.com>
 <2464138.g38uesx8sT@even-i700>
 <CAPitpCYj5cgbvW8aNGf3OsNkSL34QHDdXdDapixMUS7Lz=Tp2w@mail.gmail.com>
Message-ID: <1852621.VFG4U3F4GV@even-i700>

On jeudi 25 octobre 2018 19:22:39 CEST Tobias Reinicke wrote:
> Thanks Even,
> So doing that command, and then looking at;
> "gdalinfo -hist out.vrt" gives me a list of wrong looking buckets;

Ah sure, gdal_translate keeps the original band data type, which is 
inappropriate here. Add -ot Float32 or -ot Float64

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ramotswa at gmail.com  Thu Oct 25 11:56:10 2018
From: ramotswa at gmail.com (Tobias Reinicke)
Date: Thu, 25 Oct 2018 19:56:10 +0100
Subject: [gdal-dev] Scale / offset query
In-Reply-To: <1852621.VFG4U3F4GV@even-i700>
References: <CAPitpCbJfazktmNeov_UztY+O8+9owt-DD_QM=t1igDO-gYdHA@mail.gmail.com>
 <2464138.g38uesx8sT@even-i700>
 <CAPitpCYj5cgbvW8aNGf3OsNkSL34QHDdXdDapixMUS7Lz=Tp2w@mail.gmail.com>
 <1852621.VFG4U3F4GV@even-i700>
Message-ID: <CAPitpCbVze_9sTYVVCNb1fbCGNL6OjegqVWXug3ySx_sQqw3NQ@mail.gmail.com>

Perfect - that has worked. Many thanks Even.

Toby

On Thu, 25 Oct 2018 at 19:40, Even Rouault <even.rouault at spatialys.com>
wrote:

> On jeudi 25 octobre 2018 19:22:39 CEST Tobias Reinicke wrote:
> > Thanks Even,
> > So doing that command, and then looking at;
> > "gdalinfo -hist out.vrt" gives me a list of wrong looking buckets;
>
> Ah sure, gdal_translate keeps the original band data type, which is
> inappropriate here. Add -ot Float32 or -ot Float64
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181025/bd71360c/attachment.html>

From nyall.dawson at gmail.com  Thu Oct 25 16:44:49 2018
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Fri, 26 Oct 2018 09:44:49 +1000
Subject: [gdal-dev] Retrieving assigned IDENTITY value from MSSQL
In-Reply-To: <CACEsS4TjE3vaUdhUFsNjwBW6r6Byy2EPyD-d_NNivYP+q+DNtA@mail.gmail.com>
References: <CACEsS4TjE3vaUdhUFsNjwBW6r6Byy2EPyD-d_NNivYP+q+DNtA@mail.gmail.com>
Message-ID: <CAB28AsjQtXk-uRex=yOfOw3fpVxVjbvpknrN+8E7_ri2aswMDg@mail.gmail.com>

On Fri, 26 Oct 2018 at 02:30, Jerry Faust <jerryfaust1 at gmail.com> wrote:
>
> Hello.
>
>
>
> I created a few tables in SQL Server by importing Shapefiles using ogr2ogr.  I am able to edit the features, but have not been able to add new features.
>
>
>
> After stepping through the code, it appears that after successfully inserting the record, the newly assigned FID is not being set into the feature - it is still -1 (OGRNullFID).
>
>
>
> Before I consider making changes, I wonder if I’m just missing something.  It would seem that others would have encountered this before.

Coincidentally I fixed a similar issue in QGIS this week -
https://github.com/qgis/QGIS/commit/972250 . If you go ahead with
adapting GDAL my advise here would be to use an OUTPUT clause in your
INSERT instead of using the widespread IDENT_CURRENT approach (for
some reasons outlined in that commit's message).

Nyall

From craig.destigter at koordinates.com  Thu Oct 25 18:54:27 2018
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Fri, 26 Oct 2018 14:54:27 +1300
Subject: [gdal-dev] Refactoring the test suite with pytest
In-Reply-To: <CACmBxytG9qBhrxFLoAdJ7g0uBXw7n0EAnavGbZmzhA81T3iweg@mail.gmail.com>
References: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
 <CACmBxyvfEdFCwkv4vZ0vdNh8+vHPrwYZ04-=-UxYU=H5TAfGVg@mail.gmail.com>
 <CAF1M8pd=fLrjPo4NihisAqGuiz0tO-pbYJC7iPDT=2CThLzVVA@mail.gmail.com>
 <CACmBxytG9qBhrxFLoAdJ7g0uBXw7n0EAnavGbZmzhA81T3iweg@mail.gmail.com>
Message-ID: <CAF1M8pfjT4m8cfcbamh_1xN5Z45-bnHshn-vTsRK31Qsyg8aqw@mail.gmail.com>

My work on this branch is starting to wind down. There's still a few test
failures to contend with, and I need to work through some inconsistencies
in the different CI environments.

Could I request some review of the PR, especially around scope and overall
approach? I believe the PR description is reasonably useful to describe
what I've been up to, but please ask questions if you have them, or
comment/review on the PR itself.

Thanks
Craig de Stigter

On Fri, 5 Oct 2018 at 22:50 Kurt Schwehr <schwehr at gmail.com> wrote:

> The python tests in autotest2 are pretty much a subset of GDAL's
> autotest.  The C++ and Java tests are mostly outside of what autotest has.
>
> On Tue, Oct 2, 2018 at 2:05 AM Craig de Stigter <
> craig.destigter at koordinates.com> wrote:
>
>> Thanks. Are those tests entirely based on the osgeo git tests, or are
>> there some extra ones? It might be worth getting the extra ones in at least.
>>
>>
>> On Tue, 2 Oct 2018 at 18:06, Kurt Schwehr <schwehr at gmail.com> wrote:
>>
>>> I am definitely interested in improvements to the test infrastructure,
>>> but always fear slowing down Even or getting bogged down in a massive
>>> effort.
>>>
>>> In addition to working in the normal osgeo github world...
>>>
>>> My current state: I started "autotest2
>>> <https://github.com/schwehr/gdal-autotest2/tree/master/python>" back in
>>> 2013-14 after being unable to make autotest work for me and released much
>>> of it as opensource.  It's unittest based for python and GoogleTest/gmock
>>> for c++.  The Java isn't very far along, but it's Truth + JUnit4.  It's in
>>> use inside google typically running every 10 to 60 minutes depending on
>>> what's going on and a couple times a day in ASAN, MSAN, and TSAN modes.  On
>>> the python side, it doesn't cover that much compared to the full python
>>> test suite in autotest.  But in doing rewrites, I did have to make each
>>> test independent.  I also have to allow control of where tests write
>>> temporary data as I work in a system where the source tree is read only.  I
>>> am probably close to making the tests python 3.7+ only (but likely to work
>>> on 3.5+).  Whenever I start using a driver for the first time, I try to
>>> rewrite the python test and create at least basic C++ tests, but I never
>>> have enough time to do as complete of a job as I would like (err... like
>>> the partially done pull request I have in to Proj).
>>>
>>> You are welcome to use anything in autotest2 for the core gdal tree if
>>> it fits.  I (meaning Google) are happy to contribute any or all of the code
>>> to the GDAL tree under the GDAL license.
>>>
>>> On Mon, Oct 1, 2018 at 3:32 PM Craig de Stigter <
>>> craig.destigter at koordinates.com> wrote:
>>>
>>>> Hi folks
>>>>
>>>> I've been looking at a potential large change to the GDAL test suite,
>>>> replacing some of the worst parts. I thought I'd bring it up for discussion
>>>> here, in case anyone has any wisdom or strong feelings about it.
>>>>
>>>> I've made a ticket at https://github.com/OSGeo/gdal/issues/949 .
>>>>
>>>> Essentially my plan is to use pytest
>>>> <https://docs.pytest.org/en/latest/> as both a test runner and a
>>>> helper library. We would remove or replace large parts of the `gdaltest`
>>>> utilities with pytest equivalents.
>>>>
>>>> To give an idea of the main changes, this code:
>>>>
>>>> if ds.GetLayer(0).GetSpatialRef() is not None:
>>>>>     gdaltest.post_reason('did not get expected spatial ref')
>>>>>     return 'fail'
>>>>>
>>>> would change to:
>>>>
>>>>> assert ds.GetLayer(0).GetSpatialRef() is None, 'did not get expected
>>>>> spatial ref'
>>>>>
>>>>
>>>> The pytest runner gives contextual tracebacks from assert statements,
>>>> as well as relevant variables and line numbers.
>>>>
>>>> Other changes:
>>>>  * The `gdaltest_list` and the `__main__` entry point at the bottom of
>>>> each file will be removed. Some tests will be renamed if they don't already
>>>> start with `test_`.
>>>>  * The `<name>_cleanup` fixture will be turned into a module-scoped
>>>> fixture
>>>> <https://docs.pytest.org/en/latest/fixture.html#scope-sharing-a-fixture-instance-across-tests-in-a-class-module-or-session>.
>>>> This allows users to run any number of tests in the module, and the cleanup
>>>> fixture will be invoked once after all of them are finished. If I find
>>>> corresponding setup functions I will make them into fixtures too, but I
>>>> haven't seen those so far in my digging.
>>>>
>>>> Other, more intrusive changes are possible but this is what I'm
>>>> considering targeting as a first step. It is fairly straightforward to
>>>> automate this change; I have a script in progress already to do that.
>>>>
>>>> I intend to make a compatibility shim for the old-style tests that
>>>> can't easily be automatically updated. The shim would be a decorator,
>>>> perhaps called `@old_test`, which would take 'skip' or 'fail' return values
>>>> from tests and turn them into the appropriate `assert False` or
>>>> `pytest.skip()` calls.
>>>>
>>>> I don't intend to make any changes to the C++ tests.
>>>>
>>>> A couple of complicating factors to be aware of:
>>>>
>>>>    - pytest only supports python 2.7+. The tests already only run in
>>>>    2.7+ in Travis, so no big deal there. I think it's perfectly reasonable to
>>>>    only support 2.7+ these days, given that 2.6 has been unsupported since
>>>>    2013, but I thought I'd mention it.
>>>>    - pytest has no builtin way of *ordering* tests. It is assumed that
>>>>    tests are independent of each other. In practice, all tests are run in
>>>>    alphabetical name order within a given module. It appears to me that some
>>>>    of GDAL's tests are *not* independent of each other within the same
>>>>    module. However, most are already in alphabetical name order, so I don't
>>>>    believe this is a problem; we are not worse off with pytest than previously.
>>>>
>>>>
>>>> Please let me know your thoughts.
>>>>
>>>> --
>>>> Regards,
>>>> Craig de Stigter
>>>>
>>>> Developer
>>>> Koordinates
>>>>
>>>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com /
>>>> @koordinates <https://twitter.com/koordinates>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>> --
>>> --
>>> http://schwehr.org
>>>
>>
>>
>> --
>> Regards,
>> Craig
>>
>> Developer
>> Koordinates
>>
>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
>> <https://twitter.com/koordinates>
>>
>
>
> --
> --
> http://schwehr.org
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181026/bd2ba56e/attachment.html>

From craig.destigter at koordinates.com  Thu Oct 25 18:55:07 2018
From: craig.destigter at koordinates.com (Craig de Stigter)
Date: Fri, 26 Oct 2018 14:55:07 +1300
Subject: [gdal-dev] Refactoring the test suite with pytest
In-Reply-To: <CAF1M8pfjT4m8cfcbamh_1xN5Z45-bnHshn-vTsRK31Qsyg8aqw@mail.gmail.com>
References: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
 <CACmBxyvfEdFCwkv4vZ0vdNh8+vHPrwYZ04-=-UxYU=H5TAfGVg@mail.gmail.com>
 <CAF1M8pd=fLrjPo4NihisAqGuiz0tO-pbYJC7iPDT=2CThLzVVA@mail.gmail.com>
 <CACmBxytG9qBhrxFLoAdJ7g0uBXw7n0EAnavGbZmzhA81T3iweg@mail.gmail.com>
 <CAF1M8pfjT4m8cfcbamh_1xN5Z45-bnHshn-vTsRK31Qsyg8aqw@mail.gmail.com>
Message-ID: <CAF1M8pfGgow0oUZ-bK21LZ0griDOFjPYeJmwD+En3vLmQYuzag@mail.gmail.com>

I posted the link earlier in the thread, but to clarify:
https://github.com/OSGeo/gdal/pull/963

On Fri, 26 Oct 2018 at 14:54 Craig de Stigter <
craig.destigter at koordinates.com> wrote:

> My work on this branch is starting to wind down. There's still a few test
> failures to contend with, and I need to work through some inconsistencies
> in the different CI environments.
>
> Could I request some review of the PR, especially around scope and overall
> approach? I believe the PR description is reasonably useful to describe
> what I've been up to, but please ask questions if you have them, or
> comment/review on the PR itself.
>
> Thanks
> Craig de Stigter
>
> On Fri, 5 Oct 2018 at 22:50 Kurt Schwehr <schwehr at gmail.com> wrote:
>
>> The python tests in autotest2 are pretty much a subset of GDAL's
>> autotest.  The C++ and Java tests are mostly outside of what autotest has.
>>
>> On Tue, Oct 2, 2018 at 2:05 AM Craig de Stigter <
>> craig.destigter at koordinates.com> wrote:
>>
>>> Thanks. Are those tests entirely based on the osgeo git tests, or are
>>> there some extra ones? It might be worth getting the extra ones in at least.
>>>
>>>
>>> On Tue, 2 Oct 2018 at 18:06, Kurt Schwehr <schwehr at gmail.com> wrote:
>>>
>>>> I am definitely interested in improvements to the test infrastructure,
>>>> but always fear slowing down Even or getting bogged down in a massive
>>>> effort.
>>>>
>>>> In addition to working in the normal osgeo github world...
>>>>
>>>> My current state: I started "autotest2
>>>> <https://github.com/schwehr/gdal-autotest2/tree/master/python>" back
>>>> in 2013-14 after being unable to make autotest work for me and released
>>>> much of it as opensource.  It's unittest based for python and
>>>> GoogleTest/gmock for c++.  The Java isn't very far along, but it's Truth +
>>>> JUnit4.  It's in use inside google typically running every 10 to 60 minutes
>>>> depending on what's going on and a couple times a day in ASAN, MSAN, and
>>>> TSAN modes.  On the python side, it doesn't cover that much compared to the
>>>> full python test suite in autotest.  But in doing rewrites, I did have to
>>>> make each test independent.  I also have to allow control of where tests
>>>> write temporary data as I work in a system where the source tree is read
>>>> only.  I am probably close to making the tests python 3.7+ only (but likely
>>>> to work on 3.5+).  Whenever I start using a driver for the first time, I
>>>> try to rewrite the python test and create at least basic C++ tests, but I
>>>> never have enough time to do as complete of a job as I would like (err...
>>>> like the partially done pull request I have in to Proj).
>>>>
>>>> You are welcome to use anything in autotest2 for the core gdal tree if
>>>> it fits.  I (meaning Google) are happy to contribute any or all of the code
>>>> to the GDAL tree under the GDAL license.
>>>>
>>>> On Mon, Oct 1, 2018 at 3:32 PM Craig de Stigter <
>>>> craig.destigter at koordinates.com> wrote:
>>>>
>>>>> Hi folks
>>>>>
>>>>> I've been looking at a potential large change to the GDAL test suite,
>>>>> replacing some of the worst parts. I thought I'd bring it up for discussion
>>>>> here, in case anyone has any wisdom or strong feelings about it.
>>>>>
>>>>> I've made a ticket at https://github.com/OSGeo/gdal/issues/949 .
>>>>>
>>>>> Essentially my plan is to use pytest
>>>>> <https://docs.pytest.org/en/latest/> as both a test runner and a
>>>>> helper library. We would remove or replace large parts of the `gdaltest`
>>>>> utilities with pytest equivalents.
>>>>>
>>>>> To give an idea of the main changes, this code:
>>>>>
>>>>> if ds.GetLayer(0).GetSpatialRef() is not None:
>>>>>>     gdaltest.post_reason('did not get expected spatial ref')
>>>>>>     return 'fail'
>>>>>>
>>>>> would change to:
>>>>>
>>>>>> assert ds.GetLayer(0).GetSpatialRef() is None, 'did not get expected
>>>>>> spatial ref'
>>>>>>
>>>>>
>>>>> The pytest runner gives contextual tracebacks from assert statements,
>>>>> as well as relevant variables and line numbers.
>>>>>
>>>>> Other changes:
>>>>>  * The `gdaltest_list` and the `__main__` entry point at the bottom of
>>>>> each file will be removed. Some tests will be renamed if they don't already
>>>>> start with `test_`.
>>>>>  * The `<name>_cleanup` fixture will be turned into a module-scoped
>>>>> fixture
>>>>> <https://docs.pytest.org/en/latest/fixture.html#scope-sharing-a-fixture-instance-across-tests-in-a-class-module-or-session>.
>>>>> This allows users to run any number of tests in the module, and the cleanup
>>>>> fixture will be invoked once after all of them are finished. If I find
>>>>> corresponding setup functions I will make them into fixtures too, but I
>>>>> haven't seen those so far in my digging.
>>>>>
>>>>> Other, more intrusive changes are possible but this is what I'm
>>>>> considering targeting as a first step. It is fairly straightforward to
>>>>> automate this change; I have a script in progress already to do that.
>>>>>
>>>>> I intend to make a compatibility shim for the old-style tests that
>>>>> can't easily be automatically updated. The shim would be a decorator,
>>>>> perhaps called `@old_test`, which would take 'skip' or 'fail' return values
>>>>> from tests and turn them into the appropriate `assert False` or
>>>>> `pytest.skip()` calls.
>>>>>
>>>>> I don't intend to make any changes to the C++ tests.
>>>>>
>>>>> A couple of complicating factors to be aware of:
>>>>>
>>>>>    - pytest only supports python 2.7+. The tests already only run in
>>>>>    2.7+ in Travis, so no big deal there. I think it's perfectly reasonable to
>>>>>    only support 2.7+ these days, given that 2.6 has been unsupported since
>>>>>    2013, but I thought I'd mention it.
>>>>>    - pytest has no builtin way of *ordering* tests. It is assumed
>>>>>    that tests are independent of each other. In practice, all tests are run in
>>>>>    alphabetical name order within a given module. It appears to me that some
>>>>>    of GDAL's tests are *not* independent of each other within the
>>>>>    same module. However, most are already in alphabetical name order, so I
>>>>>    don't believe this is a problem; we are not worse off with pytest than
>>>>>    previously.
>>>>>
>>>>>
>>>>> Please let me know your thoughts.
>>>>>
>>>>> --
>>>>> Regards,
>>>>> Craig de Stigter
>>>>>
>>>>> Developer
>>>>> Koordinates
>>>>>
>>>>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com /
>>>>> @koordinates <https://twitter.com/koordinates>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev at lists.osgeo.org
>>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>>
>>>> --
>>>> --
>>>> http://schwehr.org
>>>>
>>>
>>>
>>> --
>>> Regards,
>>> Craig
>>>
>>> Developer
>>> Koordinates
>>>
>>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com / @koordinates
>>> <https://twitter.com/koordinates>
>>>
>>
>>
>> --
>> --
>> http://schwehr.org
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181026/1d1b010a/attachment-0001.html>

From jerryfaust1 at gmail.com  Thu Oct 25 22:32:30 2018
From: jerryfaust1 at gmail.com (Jerry Faust)
Date: Thu, 25 Oct 2018 22:32:30 -0700
Subject: [gdal-dev] Retrieving assigned IDENTITY value from MSSQL
In-Reply-To: <CAB28AsjQtXk-uRex=yOfOw3fpVxVjbvpknrN+8E7_ri2aswMDg@mail.gmail.com>
References: <CACEsS4TjE3vaUdhUFsNjwBW6r6Byy2EPyD-d_NNivYP+q+DNtA@mail.gmail.com>
 <CAB28AsjQtXk-uRex=yOfOw3fpVxVjbvpknrN+8E7_ri2aswMDg@mail.gmail.com>
Message-ID: <CACEsS4TPCsoU4vNwuyyQwL1UJa8g9EAByRKfCcBM=TwUmTizig@mail.gmail.com>

Thank you for your reply.

Indeed, I had just coded a solution using IDENT_CURRENT.  :-/

However, I have taken your advice and recoded it using the OUTPUT clause,
and it is working well.

Unless I hear otherwise from someone within GDAL that it is not necessary,
I will submit a pull request for consideration.

Again, thank you.
Jerry.

On Thu, Oct 25, 2018 at 4:45 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> On Fri, 26 Oct 2018 at 02:30, Jerry Faust <jerryfaust1 at gmail.com> wrote:
> >
> > Hello.
> >
> >
> >
> > I created a few tables in SQL Server by importing Shapefiles using
> ogr2ogr.  I am able to edit the features, but have not been able to add new
> features.
> >
> >
> >
> > After stepping through the code, it appears that after successfully
> inserting the record, the newly assigned FID is not being set into the
> feature - it is still -1 (OGRNullFID).
> >
> >
> >
> > Before I consider making changes, I wonder if I’m just missing
> something.  It would seem that others would have encountered this before.
>
> Coincidentally I fixed a similar issue in QGIS this week -
> https://github.com/qgis/QGIS/commit/972250 . If you go ahead with
> adapting GDAL my advise here would be to use an OUTPUT clause in your
> INSERT instead of using the widespread IDENT_CURRENT approach (for
> some reasons outlined in that commit's message).
>
> Nyall
>


-- 

Jerry.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181025/562ab02a/attachment.html>

From even.rouault at spatialys.com  Fri Oct 26 04:11:16 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Oct 2018 13:11:16 +0200
Subject: [gdal-dev] Refactoring the test suite with pytest
In-Reply-To: <CAF1M8pfjT4m8cfcbamh_1xN5Z45-bnHshn-vTsRK31Qsyg8aqw@mail.gmail.com>
References: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
 <CACmBxytG9qBhrxFLoAdJ7g0uBXw7n0EAnavGbZmzhA81T3iweg@mail.gmail.com>
 <CAF1M8pfjT4m8cfcbamh_1xN5Z45-bnHshn-vTsRK31Qsyg8aqw@mail.gmail.com>
Message-ID: <17312866.Moah6ljNN3@even-i700>

Craig,

I just gave a try to your branch. This is awesome work !! I'm excited by the
perspective of no longer having to write the "gdaltest.post_reason(), return 'fail'"
boilerplate.

There are just a few remaining failures that are due to conversion issues (for example in
autotest/utilities/test_gdalbuildvrt_check, a test_gdalbuildvrt_check() method
is just a helper method used by real steps, and not a test step itself), but
this is defintely on the right track.

Craig, I'll email you with the report failures that may trigger in drivers you
have not built-in support.

I got a segmentation fault right at the end of the run, after the final report,
presumably at process termination.

```
-- Docs: https://docs.pytest.org/en/latest/warnings.html
============================================================== 13 failed, 5342 passed, 437 skipped, 4 xfailed, 1 warnings, 2 error in 744.30 seconds ===============================================================
Erreur de segmentation (core dumped)
```

I ran pytest individually in each subdirectory, but couldn't reproduce that.
Will try again with core generation enabled


For those, we didn't try, an extract of the report:

./autotest$ pytest
=============================================================================================== test session starts ================================================================================================
platform linux2 -- Python 2.7.12, pytest-3.8.0, py-1.6.0, pluggy-0.7.1
rootdir: /home/even/gdal/git/gdal_pytest/autotest, inifile: pytest.ini
collected 5797 items                                                                                                                                                                                               

ogr/ogr_arcgen.py ......                                                                                                                                                                                     [  0%]
ogr/ogr_avc.py .....                                                                                                                                                                                         [  0%]
ogr/ogr_basic_test.py .........s.........                                                                                                                                                                    [  0%]
ogr/ogr_bna.py .......                                                                                                                                                                                       [  0%]
ogr/ogr_cad.py ..........                                                                                                                                                                                    [  0%]
ogr/ogr_carto.py ...s                                                                                                                                                                                        [  0%]
ogr/ogr_cloudant.py ......                                                                                                                                                                                   [  0%]
ogr/ogr_couchdb.py ....                                                                                                                                                                                      [  1%]
ogr/ogr_csv.py .............................s.........................                                                                                                                                       [  2%]
ogr/ogr_db2.py ssssssss                                                                                                                                                                                      [  2%]
ogr/ogr_db2_hack.py ...                                                                                                                                                                                      [  2%]
ogr/ogr_dgn.py ........s.                                                                                                                                                                                    [  2%]
ogr/ogr_dgnv8.py sssss.                                                                                                                                                                                      [  2%]
ogr/ogr_dxf.py .......................................................         
[...]
-- Docs: https://docs.pytest.org/en/latest/warnings.html
============================================================== 13 failed, 5342 passed, 437 skipped, 4 xfailed, 1 warnings, 2 error in 744.30 seconds ===============================================================

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From vincent.sarago at gmail.com  Fri Oct 26 06:09:34 2018
From: vincent.sarago at gmail.com (Vincent Sarago)
Date: Fri, 26 Oct 2018 09:09:34 -0400
Subject: [gdal-dev] VRT and COG
Message-ID: <9815290B-765A-48A0-9D5E-FA88A46C08A9@gmail.com>

Goal: I’d like to see if there could be a way to use VRT of COG to create a mbtile like system to read tiles. 

If I remember well when a VRT points to COG you still need to create external overviews for the whole VRT because it won’t fetch de overviews from the COG itself when trying decimated read. 

Even, do you think there is a workaround there ? 

Thanks,

Vincent 

From even.rouault at spatialys.com  Fri Oct 26 07:11:35 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 26 Oct 2018 16:11:35 +0200
Subject: [gdal-dev] VRT and COG
In-Reply-To: <9815290B-765A-48A0-9D5E-FA88A46C08A9@gmail.com>
References: <9815290B-765A-48A0-9D5E-FA88A46C08A9@gmail.com>
Message-ID: <2330424.EQVnnzA04j@even-i700>

On vendredi 26 octobre 2018 09:09:34 CEST Vincent Sarago wrote:
> Goal: I’d like to see if there could be a way to use VRT of COG to create a
> mbtile like system to read tiles.
> 
> If I remember well when a VRT points to COG you still need to create
> external overviews for the whole VRT because it won’t fetch de overviews
> from the COG itself when trying decimated read.

No, that's not exactly true. If a VRT contains more than one source, GDAL 
won't be able to expose a proper overview externaly, but it will use the 
overviews of sources, when present, for decimated read (*). However if your 
VRT has a lot of sources (let's 1024x1024 tiles of 256x256 pixel each), if you 
ask for just a 1024x1024 output buffer of the whole extent, there is no magic: 
GDAL will have to open each source dataset to compute its contributed single 
pixel. In that case, you may want to pregenerate an overview of the whole VRT.

Even

(*) and actually even if those don't expose overviews proper, it will let the 
underlying driver handle that at best: so a VRT of VRT of COG would work

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From vincent.sarago at gmail.com  Fri Oct 26 07:13:17 2018
From: vincent.sarago at gmail.com (Vincent Sarago)
Date: Fri, 26 Oct 2018 10:13:17 -0400
Subject: [gdal-dev] VRT and COG
In-Reply-To: <2330424.EQVnnzA04j@even-i700>
References: <9815290B-765A-48A0-9D5E-FA88A46C08A9@gmail.com>
 <2330424.EQVnnzA04j@even-i700>
Message-ID: <FCA8B2DC-6FA0-43E2-B48E-B5F6DCA055FA@gmail.com>

Thanks Even ;-) 

> Le 26 oct. 2018 à 10:11, Even Rouault <even.rouault at spatialys.com> a écrit :
> 
> On vendredi 26 octobre 2018 09:09:34 CEST Vincent Sarago wrote:
>> Goal: I’d like to see if there could be a way to use VRT of COG to create a
>> mbtile like system to read tiles.
>> 
>> If I remember well when a VRT points to COG you still need to create
>> external overviews for the whole VRT because it won’t fetch de overviews
>> from the COG itself when trying decimated read.
> 
> No, that's not exactly true. If a VRT contains more than one source, GDAL 
> won't be able to expose a proper overview externaly, but it will use the 
> overviews of sources, when present, for decimated read (*). However if your 
> VRT has a lot of sources (let's 1024x1024 tiles of 256x256 pixel each), if you 
> ask for just a 1024x1024 output buffer of the whole extent, there is no magic: 
> GDAL will have to open each source dataset to compute its contributed single 
> pixel. In that case, you may want to pregenerate an overview of the whole VRT.
> 
> Even
> 
> (*) and actually even if those don't expose overviews proper, it will let the 
> underlying driver handle that at best: so a VRT of VRT of COG would work
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com


From schwehr at gmail.com  Fri Oct 26 13:37:40 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 26 Oct 2018 13:37:40 -0700
Subject: [gdal-dev] Refactoring the test suite with pytest
In-Reply-To: <CAF1M8pfGgow0oUZ-bK21LZ0griDOFjPYeJmwD+En3vLmQYuzag@mail.gmail.com>
References: <CAF1M8pdtBr44=nU4MJ8ed72oGtpO09PfuzqE=2VT=kMc1qMDiw@mail.gmail.com>
 <CACmBxyvfEdFCwkv4vZ0vdNh8+vHPrwYZ04-=-UxYU=H5TAfGVg@mail.gmail.com>
 <CAF1M8pd=fLrjPo4NihisAqGuiz0tO-pbYJC7iPDT=2CThLzVVA@mail.gmail.com>
 <CACmBxytG9qBhrxFLoAdJ7g0uBXw7n0EAnavGbZmzhA81T3iweg@mail.gmail.com>
 <CAF1M8pfjT4m8cfcbamh_1xN5Z45-bnHshn-vTsRK31Qsyg8aqw@mail.gmail.com>
 <CAF1M8pfGgow0oUZ-bK21LZ0griDOFjPYeJmwD+En3vLmQYuzag@mail.gmail.com>
Message-ID: <CACmBxyuuGf=JRtoCAsuyA2dixmFdKfQsPV-1XkA+DYR7v1cp+w@mail.gmail.com>

OMG awesome!  Sent a couple random thoughts your way on the PR.  I will try
to take a better look through the pr soon.  Looks like Even has some good
failure info for you to work on already.

On Thu, Oct 25, 2018 at 6:55 PM Craig de Stigter <
craig.destigter at koordinates.com> wrote:

> I posted the link earlier in the thread, but to clarify:
> https://github.com/OSGeo/gdal/pull/963
>
> On Fri, 26 Oct 2018 at 14:54 Craig de Stigter <
> craig.destigter at koordinates.com> wrote:
>
>> My work on this branch is starting to wind down. There's still a few test
>> failures to contend with, and I need to work through some inconsistencies
>> in the different CI environments.
>>
>> Could I request some review of the PR, especially around scope and
>> overall approach? I believe the PR description is reasonably useful to
>> describe what I've been up to, but please ask questions if you have them,
>> or comment/review on the PR itself.
>>
>> Thanks
>> Craig de Stigter
>>
>> On Fri, 5 Oct 2018 at 22:50 Kurt Schwehr <schwehr at gmail.com> wrote:
>>
>>> The python tests in autotest2 are pretty much a subset of GDAL's
>>> autotest.  The C++ and Java tests are mostly outside of what autotest has.
>>>
>>> On Tue, Oct 2, 2018 at 2:05 AM Craig de Stigter <
>>> craig.destigter at koordinates.com> wrote:
>>>
>>>> Thanks. Are those tests entirely based on the osgeo git tests, or are
>>>> there some extra ones? It might be worth getting the extra ones in at least.
>>>>
>>>>
>>>> On Tue, 2 Oct 2018 at 18:06, Kurt Schwehr <schwehr at gmail.com> wrote:
>>>>
>>>>> I am definitely interested in improvements to the test infrastructure,
>>>>> but always fear slowing down Even or getting bogged down in a massive
>>>>> effort.
>>>>>
>>>>> In addition to working in the normal osgeo github world...
>>>>>
>>>>> My current state: I started "autotest2
>>>>> <https://github.com/schwehr/gdal-autotest2/tree/master/python>" back
>>>>> in 2013-14 after being unable to make autotest work for me and released
>>>>> much of it as opensource.  It's unittest based for python and
>>>>> GoogleTest/gmock for c++.  The Java isn't very far along, but it's Truth +
>>>>> JUnit4.  It's in use inside google typically running every 10 to 60 minutes
>>>>> depending on what's going on and a couple times a day in ASAN, MSAN, and
>>>>> TSAN modes.  On the python side, it doesn't cover that much compared to the
>>>>> full python test suite in autotest.  But in doing rewrites, I did have to
>>>>> make each test independent.  I also have to allow control of where tests
>>>>> write temporary data as I work in a system where the source tree is read
>>>>> only.  I am probably close to making the tests python 3.7+ only (but likely
>>>>> to work on 3.5+).  Whenever I start using a driver for the first time, I
>>>>> try to rewrite the python test and create at least basic C++ tests, but I
>>>>> never have enough time to do as complete of a job as I would like (err...
>>>>> like the partially done pull request I have in to Proj).
>>>>>
>>>>> You are welcome to use anything in autotest2 for the core gdal tree if
>>>>> it fits.  I (meaning Google) are happy to contribute any or all of the code
>>>>> to the GDAL tree under the GDAL license.
>>>>>
>>>>> On Mon, Oct 1, 2018 at 3:32 PM Craig de Stigter <
>>>>> craig.destigter at koordinates.com> wrote:
>>>>>
>>>>>> Hi folks
>>>>>>
>>>>>> I've been looking at a potential large change to the GDAL test suite,
>>>>>> replacing some of the worst parts. I thought I'd bring it up for discussion
>>>>>> here, in case anyone has any wisdom or strong feelings about it.
>>>>>>
>>>>>> I've made a ticket at https://github.com/OSGeo/gdal/issues/949 .
>>>>>>
>>>>>> Essentially my plan is to use pytest
>>>>>> <https://docs.pytest.org/en/latest/> as both a test runner and a
>>>>>> helper library. We would remove or replace large parts of the `gdaltest`
>>>>>> utilities with pytest equivalents.
>>>>>>
>>>>>> To give an idea of the main changes, this code:
>>>>>>
>>>>>> if ds.GetLayer(0).GetSpatialRef() is not None:
>>>>>>>     gdaltest.post_reason('did not get expected spatial ref')
>>>>>>>     return 'fail'
>>>>>>>
>>>>>> would change to:
>>>>>>
>>>>>>> assert ds.GetLayer(0).GetSpatialRef() is None, 'did not get expected
>>>>>>> spatial ref'
>>>>>>>
>>>>>>
>>>>>> The pytest runner gives contextual tracebacks from assert statements,
>>>>>> as well as relevant variables and line numbers.
>>>>>>
>>>>>> Other changes:
>>>>>>  * The `gdaltest_list` and the `__main__` entry point at the bottom
>>>>>> of each file will be removed. Some tests will be renamed if they don't
>>>>>> already start with `test_`.
>>>>>>  * The `<name>_cleanup` fixture will be turned into a module-scoped
>>>>>> fixture
>>>>>> <https://docs.pytest.org/en/latest/fixture.html#scope-sharing-a-fixture-instance-across-tests-in-a-class-module-or-session>.
>>>>>> This allows users to run any number of tests in the module, and the cleanup
>>>>>> fixture will be invoked once after all of them are finished. If I find
>>>>>> corresponding setup functions I will make them into fixtures too, but I
>>>>>> haven't seen those so far in my digging.
>>>>>>
>>>>>> Other, more intrusive changes are possible but this is what I'm
>>>>>> considering targeting as a first step. It is fairly straightforward to
>>>>>> automate this change; I have a script in progress already to do that.
>>>>>>
>>>>>> I intend to make a compatibility shim for the old-style tests that
>>>>>> can't easily be automatically updated. The shim would be a decorator,
>>>>>> perhaps called `@old_test`, which would take 'skip' or 'fail' return values
>>>>>> from tests and turn them into the appropriate `assert False` or
>>>>>> `pytest.skip()` calls.
>>>>>>
>>>>>> I don't intend to make any changes to the C++ tests.
>>>>>>
>>>>>> A couple of complicating factors to be aware of:
>>>>>>
>>>>>>    - pytest only supports python 2.7+. The tests already only run in
>>>>>>    2.7+ in Travis, so no big deal there. I think it's perfectly reasonable to
>>>>>>    only support 2.7+ these days, given that 2.6 has been unsupported since
>>>>>>    2013, but I thought I'd mention it.
>>>>>>    - pytest has no builtin way of *ordering* tests. It is assumed
>>>>>>    that tests are independent of each other. In practice, all tests are run in
>>>>>>    alphabetical name order within a given module. It appears to me that some
>>>>>>    of GDAL's tests are *not* independent of each other within the
>>>>>>    same module. However, most are already in alphabetical name order, so I
>>>>>>    don't believe this is a problem; we are not worse off with pytest than
>>>>>>    previously.
>>>>>>
>>>>>>
>>>>>> Please let me know your thoughts.
>>>>>>
>>>>>> --
>>>>>> Regards,
>>>>>> Craig de Stigter
>>>>>>
>>>>>> Developer
>>>>>> Koordinates
>>>>>>
>>>>>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com /
>>>>>> @koordinates <https://twitter.com/koordinates>
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev at lists.osgeo.org
>>>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>>
>>>>>
>>>>> --
>>>>> --
>>>>> http://schwehr.org
>>>>>
>>>>
>>>>
>>>> --
>>>> Regards,
>>>> Craig
>>>>
>>>> Developer
>>>> Koordinates
>>>>
>>>> +64 21 256 9488 <+64%2021%20256%209488> / koordinates.com /
>>>> @koordinates <https://twitter.com/koordinates>
>>>>
>>>
>>>
>>> --
>>> --
>>> http://schwehr.org
>>>
>>

-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181026/71c89f85/attachment.html>

From arthur.bogard at gmail.com  Fri Oct 26 13:52:43 2018
From: arthur.bogard at gmail.com (Arthur Bogard)
Date: Fri, 26 Oct 2018 13:52:43 -0700
Subject: [gdal-dev] GDAL FITS reader support for more than 32-bit signed
 INT number of pixels?
In-Reply-To: <8329806.fDnigA9It3@even-i700>
References: <1540403985277-0.post@n6.nabble.com> <8329806.fDnigA9It3@even-i700>
Message-ID: <CA+ZYrQWSTf4rbQZP=AngcR=Pt1_6rx+4h5Z1wZGVSfBMpZbKTQ@mail.gmail.com>

Thanks Evan!

That appears to have fixed it!  Tested on one image with 137 billion pixels
and it worked great.

Cheers, and have a great weekend, Sir Lancelot!

On Wed, Oct 24, 2018 at 11:25 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 24 octobre 2018 10:59:45 CEST kingarthur10 wrote:
> > Hello All,
> >
> > I'm trying to read in a large FITS image using the following command:
> >
> >
> >
> > When I run that, I get the following error:
> >
> >
> > After some sluething, I can pull in an image up to 65536 x 32768 in size.
> > One pixel beyond that in a dimension gives me the same error (although
> the
> > Y-offset changes based on the size).
> >
> > It appears that if the total number of pixels exceeds a 32-bit signed
> > integer, the reader crashes.
>
> Dear King Arthur,
>
> Should be fixed per
>
> https://github.com/OSGeo/gdal/commit/25fc57b7642662356328928a01e3d64ff89eb4c7
>
> Lancelot
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181026/eb1c5be7/attachment.html>

From scott at senften.com  Fri Oct 26 14:58:41 2018
From: scott at senften.com (Scott Senften)
Date: Fri, 26 Oct 2018 16:58:41 -0500
Subject: [gdal-dev] GDAL.NET System.TypeInitializationException
Message-ID: <CAJQuFXtK3a-3Y1bcAU4YvkM-KCsWC-aMHD7JOQS9uNuppP03SA@mail.gmail.com>

My apologies; I'm guessing this is well trod ground, but I couldn't find a
good search for the archives and, on inspection, I couldn't find an
appropriate topic.

I'm trying to build one of the GDAL swig c# examples, specifically I have
tried both OGRGEOS and ORSTransform. I've installed GDAL.NET 2.3.1 from
nuget (https://www.nuget.org/packages/GDAL.NET/). My projects build but
both throw System.TypeInitializationException at runtime.

For OGRGEOS, the error is

> Exception thrown: 'System.TypeInitializationException' in ogr_csharp.dll
> An unhandled exception of type 'System.TypeInitializationException'
> occurred in ogr_csharp.dll
> The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.
>
> The program '[34872] dotnet.exe' has exited with code -1073741510
> (0xc000013a).
>

I'm guessing that I either have a configuration issue or a dependency issue
with the underlying native code, but, at this point, I'm just guessing.

Any help would be appreciated,

Scott
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181026/949e63b5/attachment-0001.html>

From szekerest at gmail.com  Sat Oct 27 07:12:18 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 27 Oct 2018 16:12:18 +0200
Subject: [gdal-dev] GDAL.NET System.TypeInitializationException
In-Reply-To: <CAJQuFXtK3a-3Y1bcAU4YvkM-KCsWC-aMHD7JOQS9uNuppP03SA@mail.gmail.com>
References: <CAJQuFXtK3a-3Y1bcAU4YvkM-KCsWC-aMHD7JOQS9uNuppP03SA@mail.gmail.com>
Message-ID: <CACALY+TzmpCZJvqcSmEz53oZQv+PQ+FnP6ZVy9xKLJmzHcpNDQ@mail.gmail.com>

Scott,

Have you called  GdalConfiguration.ConfigureGdal() and/or
GdalConfiguration.ConfigureOgr() at the beginning of your code?

Best regards,

Tamas




Scott Senften <scott at senften.com> ezt írta (időpont: 2018. okt. 26., P,
23:59):

>
> My apologies; I'm guessing this is well trod ground, but I couldn't find a
> good search for the archives and, on inspection, I couldn't find an
> appropriate topic.
>
> I'm trying to build one of the GDAL swig c# examples, specifically I have
> tried both OGRGEOS and ORSTransform. I've installed GDAL.NET 2.3.1 from
> nuget (https://www.nuget.org/packages/GDAL.NET/). My projects build but
> both throw System.TypeInitializationException at runtime.
>
> For OGRGEOS, the error is
>
>> Exception thrown: 'System.TypeInitializationException' in ogr_csharp.dll
>> An unhandled exception of type 'System.TypeInitializationException'
>> occurred in ogr_csharp.dll
>> The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.
>>
>> The program '[34872] dotnet.exe' has exited with code -1073741510
>> (0xc000013a).
>>
>
> I'm guessing that I either have a configuration issue or a dependency
> issue with the underlying native code, but, at this point, I'm just
> guessing.
>
> Any help would be appreciated,
>
> Scott
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181027/7d529a86/attachment.html>

From scott at senften.com  Sat Oct 27 11:16:48 2018
From: scott at senften.com (Scott Senften)
Date: Sat, 27 Oct 2018 13:16:48 -0500
Subject: [gdal-dev] GDAL.NET System.TypeInitializationException
In-Reply-To: <CACALY+TzmpCZJvqcSmEz53oZQv+PQ+FnP6ZVy9xKLJmzHcpNDQ@mail.gmail.com>
References: <CAJQuFXtK3a-3Y1bcAU4YvkM-KCsWC-aMHD7JOQS9uNuppP03SA@mail.gmail.com>
 <CACALY+TzmpCZJvqcSmEz53oZQv+PQ+FnP6ZVy9xKLJmzHcpNDQ@mail.gmail.com>
Message-ID: <CAJQuFXtr2LP+a80P7Bfo92ZycC3mFzMih5F6RoBW-WW8fRBUag@mail.gmail.com>

Thank you for quick response.

No, I don't see the configuration calls being used. I'm working from the
examples in the gdal/swig/csharp/apps directory, specifically
https://github.com/OSGeo/gdal/blob/master/gdal/swig/csharp/apps/OGRGEOS.cs

I haven't written any code for myself yet. I'm just trying to confirm I
have a proper dev environment setup using the given demos. Is there a
better starting point for c#/dotnet development?  Is there a quick start or
a tutorial that I missed?

Thanks again.

Scott

On Sat, Oct 27, 2018 at 9:12 AM Tamas Szekeres <szekerest at gmail.com> wrote:

> Scott,
>
> Have you called  GdalConfiguration.ConfigureGdal() and/or
> GdalConfiguration.ConfigureOgr() at the beginning of your code?
>
> Best regards,
>
> Tamas
>
>
>
>
> Scott Senften <scott at senften.com> ezt írta (időpont: 2018. okt. 26., P,
> 23:59):
>
>>
>> My apologies; I'm guessing this is well trod ground, but I couldn't find
>> a good search for the archives and, on inspection, I couldn't find an
>> appropriate topic.
>>
>> I'm trying to build one of the GDAL swig c# examples, specifically I have
>> tried both OGRGEOS and ORSTransform. I've installed GDAL.NET 2.3.1 from
>> nuget (https://www.nuget.org/packages/GDAL.NET/). My projects build but
>> both throw System.TypeInitializationException at runtime.
>>
>> For OGRGEOS, the error is
>>
>>> Exception thrown: 'System.TypeInitializationException' in ogr_csharp.dll
>>> An unhandled exception of type 'System.TypeInitializationException'
>>> occurred in ogr_csharp.dll
>>> The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.
>>>
>>> The program '[34872] dotnet.exe' has exited with code -1073741510
>>> (0xc000013a).
>>>
>>
>> I'm guessing that I either have a configuration issue or a dependency
>> issue with the underlying native code, but, at this point, I'm just
>> guessing.
>>
>> Any help would be appreciated,
>>
>> Scott
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181027/09ba37dc/attachment.html>

From szekerest at gmail.com  Sat Oct 27 11:35:06 2018
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 27 Oct 2018 20:35:06 +0200
Subject: [gdal-dev] GDAL.NET System.TypeInitializationException
In-Reply-To: <CAJQuFXtr2LP+a80P7Bfo92ZycC3mFzMih5F6RoBW-WW8fRBUag@mail.gmail.com>
References: <CAJQuFXtK3a-3Y1bcAU4YvkM-KCsWC-aMHD7JOQS9uNuppP03SA@mail.gmail.com>
 <CACALY+TzmpCZJvqcSmEz53oZQv+PQ+FnP6ZVy9xKLJmzHcpNDQ@mail.gmail.com>
 <CAJQuFXtr2LP+a80P7Bfo92ZycC3mFzMih5F6RoBW-WW8fRBUag@mail.gmail.com>
Message-ID: <CACALY+Sc+7LdPXFXDF0zo+xtG9o1g_zEHcbny23FdY+qzBMYKQ@mail.gmail.com>

Not sure how you project is looking like, I thought you added the GDAL.NET
nuget package as the reference.
Within this package, you can find some code GdalConfiguration.cs, where the
static constructor contains the necessary code to set up the environment
programmatically.
Alternatively you can set the corresponding environment variables manually
on your system so as to get the things working.

Best regards,

Tamas



Scott Senften <scott at senften.com> ezt írta (időpont: 2018. okt. 27., Szo,
20:14):

>
> Thank you for quick response.
>
> No, I don't see the configuration calls being used. I'm working from the
> examples in the gdal/swig/csharp/apps directory, specifically
> https://github.com/OSGeo/gdal/blob/master/gdal/swig/csharp/apps/OGRGEOS.cs
>
> I haven't written any code for myself yet. I'm just trying to confirm I
> have a proper dev environment setup using the given demos. Is there a
> better starting point for c#/dotnet development?  Is there a quick start or
> a tutorial that I missed?
>
> Thanks again.
>
> Scott
>
> On Sat, Oct 27, 2018 at 9:12 AM Tamas Szekeres <szekerest at gmail.com>
> wrote:
>
>> Scott,
>>
>> Have you called  GdalConfiguration.ConfigureGdal() and/or
>> GdalConfiguration.ConfigureOgr() at the beginning of your code?
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>>
>> Scott Senften <scott at senften.com> ezt írta (időpont: 2018. okt. 26., P,
>> 23:59):
>>
>>>
>>> My apologies; I'm guessing this is well trod ground, but I couldn't find
>>> a good search for the archives and, on inspection, I couldn't find an
>>> appropriate topic.
>>>
>>> I'm trying to build one of the GDAL swig c# examples, specifically I
>>> have tried both OGRGEOS and ORSTransform. I've installed GDAL.NET 2.3.1
>>> from nuget (https://www.nuget.org/packages/GDAL.NET/). My projects
>>> build but both throw System.TypeInitializationException at runtime.
>>>
>>> For OGRGEOS, the error is
>>>
>>>> Exception thrown: 'System.TypeInitializationException' in ogr_csharp.dll
>>>> An unhandled exception of type 'System.TypeInitializationException'
>>>> occurred in ogr_csharp.dll
>>>> The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.
>>>>
>>>> The program '[34872] dotnet.exe' has exited with code -1073741510
>>>> (0xc000013a).
>>>>
>>>
>>> I'm guessing that I either have a configuration issue or a dependency
>>> issue with the underlying native code, but, at this point, I'm just
>>> guessing.
>>>
>>> Any help would be appreciated,
>>>
>>> Scott
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181027/539c2a96/attachment.html>

From scott at senften.com  Sat Oct 27 12:42:12 2018
From: scott at senften.com (Scott Senften)
Date: Sat, 27 Oct 2018 14:42:12 -0500
Subject: [gdal-dev] GDAL.NET System.TypeInitializationException
In-Reply-To: <CACALY+Sc+7LdPXFXDF0zo+xtG9o1g_zEHcbny23FdY+qzBMYKQ@mail.gmail.com>
References: <CAJQuFXtK3a-3Y1bcAU4YvkM-KCsWC-aMHD7JOQS9uNuppP03SA@mail.gmail.com>
 <CACALY+TzmpCZJvqcSmEz53oZQv+PQ+FnP6ZVy9xKLJmzHcpNDQ@mail.gmail.com>
 <CAJQuFXtr2LP+a80P7Bfo92ZycC3mFzMih5F6RoBW-WW8fRBUag@mail.gmail.com>
 <CACALY+Sc+7LdPXFXDF0zo+xtG9o1g_zEHcbny23FdY+qzBMYKQ@mail.gmail.com>
Message-ID: <CAJQuFXttgkohvqJEs+2nqh=nmF5ObDwOAVV6YkeMo8YKZdYL-w@mail.gmail.com>

I'm sorry. I probably confused matters. I created a new .NET solution and
project in visual studio and copied and added
https://github.com/OSGeo/gdal/blob/master/gdal/swig/csharp/apps/OGRGEOS.cs  to
the new project. Then I installed the GDAL.NET nuget package as the
reference to this new project. Everything builds but I get the run time
error sent prior.

What I meant was within the OGRGEOS.cs file I don't see a call to
GdalConfiguration.cs, and I didn't do anything beyond building the project
and attempting to run it. If there is another packaged required or if there
is another configuration step required, I missed it.

Thanks

Scott

On Sat, Oct 27, 2018 at 1:35 PM Tamas Szekeres <szekerest at gmail.com> wrote:

> Not sure how you project is looking like, I thought you added the GDAL.NET
> nuget package as the reference.
> Within this package, you can find some code GdalConfiguration.cs, where
> the static constructor contains the necessary code to set up the
> environment programmatically.
> Alternatively you can set the corresponding environment variables manually
> on your system so as to get the things working.
>
> Best regards,
>
> Tamas
>
>
>
> Scott Senften <scott at senften.com> ezt írta (időpont: 2018. okt. 27., Szo,
> 20:14):
>
>>
>> Thank you for quick response.
>>
>> No, I don't see the configuration calls being used. I'm working from the
>> examples in the gdal/swig/csharp/apps directory, specifically
>> https://github.com/OSGeo/gdal/blob/master/gdal/swig/csharp/apps/OGRGEOS.cs
>>
>> I haven't written any code for myself yet. I'm just trying to confirm I
>> have a proper dev environment setup using the given demos. Is there a
>> better starting point for c#/dotnet development?  Is there a quick start or
>> a tutorial that I missed?
>>
>> Thanks again.
>>
>> Scott
>>
>> On Sat, Oct 27, 2018 at 9:12 AM Tamas Szekeres <szekerest at gmail.com>
>> wrote:
>>
>>> Scott,
>>>
>>> Have you called  GdalConfiguration.ConfigureGdal() and/or
>>> GdalConfiguration.ConfigureOgr() at the beginning of your code?
>>>
>>> Best regards,
>>>
>>> Tamas
>>>
>>>
>>>
>>>
>>> Scott Senften <scott at senften.com> ezt írta (időpont: 2018. okt. 26., P,
>>> 23:59):
>>>
>>>>
>>>> My apologies; I'm guessing this is well trod ground, but I couldn't
>>>> find a good search for the archives and, on inspection, I couldn't find an
>>>> appropriate topic.
>>>>
>>>> I'm trying to build one of the GDAL swig c# examples, specifically I
>>>> have tried both OGRGEOS and ORSTransform. I've installed GDAL.NET
>>>> 2.3.1 from nuget (https://www.nuget.org/packages/GDAL.NET/). My
>>>> projects build but both throw System.TypeInitializationException at
>>>> runtime.
>>>>
>>>> For OGRGEOS, the error is
>>>>
>>>>> Exception thrown: 'System.TypeInitializationException' in
>>>>> ogr_csharp.dll
>>>>> An unhandled exception of type 'System.TypeInitializationException'
>>>>> occurred in ogr_csharp.dll
>>>>> The type initializer for 'OSGeo.OGR.OgrPINVOKE' threw an exception.
>>>>>
>>>>> The program '[34872] dotnet.exe' has exited with code -1073741510
>>>>> (0xc000013a).
>>>>>
>>>>
>>>> I'm guessing that I either have a configuration issue or a dependency
>>>> issue with the underlying native code, but, at this point, I'm just
>>>> guessing.
>>>>
>>>> Any help would be appreciated,
>>>>
>>>> Scott
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181027/703424c6/attachment.html>

From jgr at osgeopt.pt  Sun Oct 28 17:28:07 2018
From: jgr at osgeopt.pt (Jorge Gustavo Rocha)
Date: Mon, 29 Oct 2018 00:28:07 +0000
Subject: [gdal-dev] gdalsrsinfo supporting files distribution and ogr2ogr
 usage of OSRFindMatches()
In-Reply-To: <3a444c75-6e93-08c0-30df-5f20e582bd25@di.uminho.pt>
References: <3a444c75-6e93-08c0-30df-5f20e582bd25@di.uminho.pt>
Message-ID: <17d651e5-a403-3723-a5e3-79c7f594dd55@osgeopt.pt>

Hi devs,

I've just answered a question related to gdalsrsinfo, to get the fix
#4345 [1].

First question: why these epsg*.wkt.gz files are not distributed with
gdal? Are there any drawbacks?

My second question is about this OSRFindMatches() function. It works
well in gdalsrsinfo. Can it also be used in ogr2ogr?

I was able to identify the correct SRS using gdalsrsinfo, but not when
using ogr2ogr. ogr2ogr assigns the EPSG:900914.

Thanks,

Jorge

[1] https://trac.osgeo.org/gdal/ticket/4345

-------- Mensagem reencaminhada --------
Assunto: Re: [Qgis-user] how does QGIS generate the EPSG from a Shapefile?
Data: Sun, 28 Oct 2018 23:27:48 +0000
De: Jorge Gustavo Rocha <jgr at di.uminho.pt>
Para: qgis-user at lists.osgeo.org

Hi Rodrigo,

GDAL (regular distribution) is not able to identify the EPSG code from
the *.prj string. This is a known limitation. This has been fix (see bug
[1]), but it requires additional files on your side.

Two options:

1) Download the files from:
https://trac.osgeo.org/gdal/raw-attachment/ticket/4345/epsg_ogc.wkt.gz
https://trac.osgeo.org/gdal/raw-attachment/ticket/4345/epsg_ogc_simple.wkt.gz
https://trac.osgeo.org/gdal/raw-attachment/ticket/4345/epsg_esri.wkt.gz

2) You can create the files by yourself running the script
gen_epsg_wkt.sh (available on the #4345 ticket). Change the path to the
existing files. In my GDAL installation, I had to change to:
gcs_epsg=`cat /usr/share/gdal/2.2/gcs.csv | (...)`
pcs_epsg=`cat /usr/share/gdal/2.2/pcs.csv | (...)`

Move/copy the files to your GDAL folder (in my case it is
/usr/share/gdal/2.2)

Then you can use:
gdalsrsinfo -e deinfo_cemiterios.shp

The result will be:

jgr at zoe:~/tmp$ gdalsrsinfo -e deinfo_cemiterios.shp
Warning 1: EPSG detection is experimental and requires new data files
(see bug #4345)

EPSG:29193

PROJ.4 : '+proj=utm +zone=23 +south +ellps=aust_SA
+towgs84=-66.87,4.37,-38.52,0,0,0,0 +units=m +no_defs '

OGC WKT :
PROJCS["SAD69 / UTM zone 23S",
    GEOGCS["SAD69",
        DATUM["South_American_Datum_1969",
            SPHEROID["GRS 1967 Modified",6378160,298.25,
                AUTHORITY["EPSG","7050"]],
            TOWGS84[-66.87,4.37,-38.52,0,0,0,0],
            AUTHORITY["EPSG","6618"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4618"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-45],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",10000000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["Easting",EAST],
    AXIS["Northing",NORTH],
    AUTHORITY["EPSG","29193"]]

Now you can use gdalsrsinfo to identify the CRS. If you need to use this
for scripting, it is easier.

Best regards,

Jorge

[1] https://trac.osgeo.org/gdal/ticket/4345

Às 18:15 de 28/10/18, Rodrigo Mariano escreveu:
> Hello Jorge,
> 
> 
> When I used your command like, the ogr showed this message:
> 
> "Layer name: DEINFO_CEMITERIOS
> Geometry: Polygon
> Feature Count: 42
> Extent: (317568.093609, 7361463.898064) - (357756.090027, 7412287.112520)
> Layer SRS WKT:
> PROJCS["SAD69_UTM_zone_23S",
>     GEOGCS["GCS_SAD69",
>         DATUM["South_American_Datum_1969",
>             SPHEROID["GRS_1967_Modified",6378160,298.25]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-45],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",10000000],
>     UNIT["Meter",1]]
> ID: Integer64 (10.0)
> NOME: String (60.0)
> AREA: Real (20.2)
> DEPADM: String (10.0)"
> 
> When I opened the Shapefile with the QGIS, the software chose the EPSG
> 29193.
> 
> But when I use the ogr2ogr to insert the Shapefile in my database, the
> OGR choose a strange EPSG.
> For that reason, I normally open the Shapefile with the QGIS and I pass
> explicitily the EPSG on ogr2ogr command line.
> Because of that I would like to know how the QGIS discover the EPSG
> given a .prj.
> 
> The .prj of that Shapefile is:
> 
> "PROJCS["SAD69_UTM_zone_23S",GEOGCS["GCS_SAD69",DATUM["D_South_American_1969",SPHEROID["GRS_1967_Truncated",6378160,298.25]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-45],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]"
> 
> 
> Best Regards,
> 
> Rodrigo
> 
> 
> On 25/10/2018 15:59, Jorge Gustavo Rocha wrote:
>> Oi Rodrigo,
>>
>> Can you run ogrinfo in the command line? Like:
>>
>> ogrinfo -al -so yourshape.shp
>>
>> This will tell you the CRS detected by ogr.
>>
>> ogr (and QGIS) uses the *.prj file. But there are known problems with
>> the WKT representation of CRS. Sometimes it is hard to know if two
>> different strings represents the same EPSG code.
>>
>> For that reason, QGIS also writes and additional *.qpj. When it is
>> present, QGIS uses this textual representation to compare it against its
>> database and it always work.
>>
>> But if you just have the *.prj along with the shapefile, both ogr and
>> QGIS might fail to detect the exact CRS.
>>
>> Please share one *.prj that ogr fails to associate with a known EPSG.
>>
>> Abraço,
>>
>> Jorge
>>
>> Às 13:27 de 25/10/18, Rodrigo Mariano escreveu:
>>> Hello everyone,
>>>
>>> I would like to know: how does QGIS generate the EPSG from a Shapefile?
>>>
>>> I ask this question, because I'm trying to upload a Shapefile by OGR,
>>> but the OGR doesn't
>>> insert the correct EPSG. So I need always open the Shapefile in QGIS to
>>> discover the
>>> EPSG before uploading it with OGR.
>>>
>>> Thanks in advance.
>>>
>>> Best Regards,
>>>
>>> Rodrigo
>>>
>>> _______________________________________________
>>> Qgis-user mailing list
>>> Qgis-user at lists.osgeo.org
>>> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
>>> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user
>> J. Gustavo
> _______________________________________________
> Qgis-user mailing list
> Qgis-user at lists.osgeo.org
> List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
> Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user

J. Gustavo
-- 
Jorge Gustavo Rocha
Departamento de Informática
Universidade do Minho
4710-057 Braga
Tel: +351 253604480
Fax: +351 253604471
Móvel: +351 910333888
skype: nabocudnosor
_______________________________________________
Qgis-user mailing list
Qgis-user at lists.osgeo.org
List info: https://lists.osgeo.org/mailman/listinfo/qgis-user
Unsubscribe: https://lists.osgeo.org/mailman/listinfo/qgis-user

From even.rouault at spatialys.com  Mon Oct 29 03:05:44 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Oct 2018 11:05:44 +0100
Subject: [gdal-dev] gdalsrsinfo supporting files distribution and
	ogr2ogr usage of OSRFindMatches()
In-Reply-To: <17d651e5-a403-3723-a5e3-79c7f594dd55@osgeopt.pt>
References: <3a444c75-6e93-08c0-30df-5f20e582bd25@di.uminho.pt>
 <17d651e5-a403-3723-a5e3-79c7f594dd55@osgeopt.pt>
Message-ID: <2858075.dN6CzK8zYu@even-i700>

On lundi 29 octobre 2018 00:28:07 CET Jorge Gustavo Rocha wrote:
> Hi devs,
> 
> I've just answered a question related to gdalsrsinfo, to get the fix
> #4345 [1].
> 
> First question: why these epsg*.wkt.gz files are not distributed with
> gdal? Are there any drawbacks?

I can't remember. Was mostly experimental. Anyway OSRFindMatches() uses 
another approach, and gdalsrsinfo -e uses it since GDAL 2.3

> 
> My second question is about this OSRFindMatches() function. It works
> well in gdalsrsinfo. Can it also be used in ogr2ogr?

It is used by the shapefile driver when the match is evaluated to be 
trustable, so you may need to upgrade to GDAL 2.3

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From fabian.schindler at eox.at  Mon Oct 29 03:08:27 2018
From: fabian.schindler at eox.at (Schindler, Fabian)
Date: Mon, 29 Oct 2018 11:08:27 +0100
Subject: [gdal-dev] Error: Unable to export GeoTIFF file with different
 datatypes per different bands. All bands should have the same types in
 TIFF.
Message-ID: <CANbc+3ppo+LObk8VBm0ORppK-R_9vhHnFZzi0P9NrrMjF99_wA@mail.gmail.com>

Hi list,

I just tried to convert a Cloudsat (2B-GEOPROF to be exact) to a TIFF. I
try to do this using the Python bindings and creating a VRT [3] referencing
the Subdatasets of the HDF 4 file.

When I try to do this, I get the following error:

"Unable to export GeoTIFF file with different datatypes per different
bands. All bands should have the same types in TIFF."

The TIFF spec allows to define the dataset for each sample ([1] and [2]),
but it seems that GDAL does not support it.

I'd like to know if there is a way around this error or otherwise if it
would be possible/feasible to implement this in the driver?

I understand, that the TIFF driver is one of the oldest but still most used
ones around, so breaking compatibility would potentially be devastating.
Maybe putting this functionality behind a flag might be preferable.

Regards,
Fabian

[1] https://www.awaresystems.be/imaging/tiff/tifftags/bitspersample.html
[2] https://www.awaresystems.be/imaging/tiff/tifftags/sampleformat.html
[3] This is the generated temporary VRT I try to generate a TIFF copy from:

<VRTDataset rasterXSize="125" rasterYSize="20753">
  <VRTRasterBand dataType="Int16" band="1">
    <NoDataValue>15360</NoDataValue>
    <ComplexSource>
      <SourceFilename
relativeToVRT="0">HDF4_EOS:EOS_SWATH:"autotest/data/2017339123204_61738_CS_2B-GEOPROF_GRANULE_P_R04_E06.hdf":2B-GEOPROF:Radar_Reflectivity</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="125" RasterYSize="20753"
DataType="Int16" BlockXSize="125" BlockYSize="8000" />
      <SrcRect xOff="0" yOff="0" xSize="125" ySize="20753" />
      <DstRect xOff="0" yOff="0" xSize="125" ySize="20753" />
      <NODATA>15360</NODATA>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Int16" band="2">
    <NoDataValue>15360</NoDataValue>
    <ComplexSource>
      <SourceFilename
relativeToVRT="0">HDF4_EOS:EOS_SWATH:"autotest/data/2017339123204_61738_CS_2B-GEOPROF_GRANULE_P_R04_E06.hdf":2B-GEOPROF:Gaseous_Attenuation</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="125" RasterYSize="20753"
DataType="Int16" BlockXSize="125" BlockYSize="8000" />
      <SrcRect xOff="0" yOff="0" xSize="125" ySize="20753" />
      <DstRect xOff="0" yOff="0" xSize="125" ySize="20753" />
      <NODATA>15360</NODATA>
    </ComplexSource>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <NoDataValue>-99</NoDataValue>
    <ComplexSource>
      <SourceFilename
relativeToVRT="0">HDF4_EOS:EOS_SWATH:"autotest/data/2017339123204_61738_CS_2B-GEOPROF_GRANULE_P_R04_E06.hdf":2B-GEOPROF:CPR_Cloud_mask</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="125" RasterYSize="20753"
DataType="Byte" BlockXSize="125" BlockYSize="8000" />
      <SrcRect xOff="0" yOff="0" xSize="125" ySize="20753" />
      <DstRect xOff="0" yOff="0" xSize="125" ySize="20753" />
      <NODATA>-99</NODATA>
    </ComplexSource>
  </VRTRasterBand>
</VRTDataset>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181029/cc211791/attachment.html>

From even.rouault at spatialys.com  Mon Oct 29 03:44:17 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Oct 2018 11:44:17 +0100
Subject: [gdal-dev] Error: Unable to export GeoTIFF file with different
	datatypes per different bands. All bands should have the same
	types in TIFF.
In-Reply-To: <CANbc+3ppo+LObk8VBm0ORppK-R_9vhHnFZzi0P9NrrMjF99_wA@mail.gmail.com>
References: <CANbc+3ppo+LObk8VBm0ORppK-R_9vhHnFZzi0P9NrrMjF99_wA@mail.gmail.com>
Message-ID: <4407041.sYKOuN99Fn@even-i700>

Fabian,

> 
> I just tried to convert a Cloudsat (2B-GEOPROF to be exact) to a TIFF. I
> try to do this using the Python bindings and creating a VRT [3] referencing
> the Subdatasets of the HDF 4 file.

I'd also note that you use different nodata value per band, which isn't 
supported by the GTiff driver.

> 
> When I try to do this, I get the following error:
> 
> "Unable to export GeoTIFF file with different datatypes per different
> bands. All bands should have the same types in TIFF."
> 
> The TIFF spec allows to define the dataset for each sample ([1] and [2]),
> but it seems that GDAL does not support it.

The limitation comes from libtiff itself. Would certainly be a significant 
change in it and in the GDAL GTiff driver.
You can force all the bands on the highest bit depth.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From fabian.schindler at eox.at  Mon Oct 29 03:49:45 2018
From: fabian.schindler at eox.at (Schindler, Fabian)
Date: Mon, 29 Oct 2018 11:49:45 +0100
Subject: [gdal-dev] Error: Unable to export GeoTIFF file with different
 datatypes per different bands. All bands should have the same types in
 TIFF.
In-Reply-To: <4407041.sYKOuN99Fn@even-i700>
References: <CANbc+3ppo+LObk8VBm0ORppK-R_9vhHnFZzi0P9NrrMjF99_wA@mail.gmail.com>
 <4407041.sYKOuN99Fn@even-i700>
Message-ID: <CANbc+3rm0epjscZh0TC7bgRwk315NhVEngPwDmE532Eqh28KQA@mail.gmail.com>

Even,

Thanks for the info. I guess in that case using the highest bit depth will
have to do.

Regarding the nodata value (just curius): how is this value stored (there
is no such tag, AFAIK)? In the GDAL data model this value is per band and
not per dataset, so that could be a possible improvement, right?

Regards,
Fabian

On Mon, 29 Oct 2018 at 11:44, Even Rouault <even.rouault at spatialys.com>
wrote:

> Fabian,
>
> >
> > I just tried to convert a Cloudsat (2B-GEOPROF to be exact) to a TIFF. I
> > try to do this using the Python bindings and creating a VRT [3]
> referencing
> > the Subdatasets of the HDF 4 file.
>
> I'd also note that you use different nodata value per band, which isn't
> supported by the GTiff driver.
>
> >
> > When I try to do this, I get the following error:
> >
> > "Unable to export GeoTIFF file with different datatypes per different
> > bands. All bands should have the same types in TIFF."
> >
> > The TIFF spec allows to define the dataset for each sample ([1] and [2]),
> > but it seems that GDAL does not support it.
>
> The limitation comes from libtiff itself. Would certainly be a significant
> change in it and in the GDAL GTiff driver.
> You can force all the bands on the highest bit depth.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181029/9cdeecb8/attachment-0001.html>

From even.rouault at spatialys.com  Mon Oct 29 04:07:57 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Oct 2018 12:07:57 +0100
Subject: [gdal-dev] Error: Unable to export GeoTIFF file with different
	datatypes per different bands. All bands should have the same
	types in TIFF.
In-Reply-To: <CANbc+3rm0epjscZh0TC7bgRwk315NhVEngPwDmE532Eqh28KQA@mail.gmail.com>
References: <CANbc+3ppo+LObk8VBm0ORppK-R_9vhHnFZzi0P9NrrMjF99_wA@mail.gmail.com>
 <4407041.sYKOuN99Fn@even-i700>
 <CANbc+3rm0epjscZh0TC7bgRwk315NhVEngPwDmE532Eqh28KQA@mail.gmail.com>
Message-ID: <2005781.ai8QkYNezK@even-i700>

> 
> Regarding the nodata value (just curius): how is this value stored (there
> is no such tag, AFAIK)? 

In ASCII. One single value for all the bands

https://www.awaresystems.be/imaging/tiff/tifftags/gdal_nodata.html


> In the GDAL data model this value is per band and
> not per dataset, so that could be a possible improvement, right?

Yes that could possibly be changed. I'm not sure about the reason for having 
decided for a single value. Perhaps to align on the libtiff restriction of one 
value for BitsPerSample / SampleFormat. But yes having several values for the 
NoData tag could be changed much more easily than several values for 
BitsPerSample / SampleFormat

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From avrahami.ben at gmail.com  Mon Oct 29 05:19:12 2018
From: avrahami.ben at gmail.com (Ben Avrahami)
Date: Mon, 29 Oct 2018 14:19:12 +0200
Subject: [gdal-dev] Trouble with GPKG and colors
Message-ID: <CALFWR8Fum1dpxABCPgMCrdvp9KyjhvLPEsoZhQnx5x=0ZHo-7Q@mail.gmail.com>

Hello, I'm trying to save a byte raster to a geopackage. I ran into a
problem that the geopackage raster driver does not behave as expected when
working with bytes and color tables. I have written a python script that
explains the issue (attached):

The script creates 4 rasters in similar ways but prints different outputs:

GTIFF(no palette):  Minimum=0, Maximum=9, Color Table=False, band count=1
GTIFF(palette):  Minimum=0, Maximum=9, Color Table=True, band count=1
GPKG(no palette):  Minimum=0, Maximum=9, Color Table=False, band count=4
GPKG(palette):  Minimum=0, Maximum=255, Color Table=False, band count=4

The problem is that even though we set a color table in the geopackage when
writing, it reads as having no color table when reading. Worse yet, the
original raster values are lost when written with a color table.

Is there any workaround or fix for this? We want to be able to keep
non-image byte data with a palette to geopackage.

Regards, Ben
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181029/8ce220cd/attachment.html>
-------------- next part --------------
import gdal
import numpy as np

template_array = np.array([[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]])

wgs84_geo_wkt = 'GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]'

color_table = gdal.ColorTable()
for i in range(10):
    r = int((9 - i) * 255 / 9)
    color_table.SetColorEntry(i, (r, 127, 127, 255))


def write(driver, path, palette):
    ds = gdal.GetDriverByName(driver).Create(path, *template_array.shape[::-1], 1, gdal.GDT_Byte)
    ds.SetGeoTransform((30, 0.01, 0.0, 30, 0.0, -0.01))
    ds.SetProjection(wgs84_geo_wkt)
    band = ds.GetRasterBand(1)
    band.WriteArray(template_array)
    if palette:
        band.SetColorTable(color_table)
    band.FlushCache()
    del band
    del ds


def read(name, palette, path):
    ds = gdal.OpenEx(path, gdal.OF_READONLY)
    band = ds.GetRasterBand(1)
    stats = band.GetStatistics(True, True)
    ct = band.GetColorTable()
    band_count = ds.RasterCount
    print(
        f"{name}({'palette' if palette else 'no palette'}):  Minimum={stats[0]:.0f}, Maximum={stats[1]:.0f},"
        f" Color Table={ct is not None}, band count={band_count}")


for name, path, pal in [
    ('GTIFF', r'D:\temp\demo_tif.tif', False),
    ('GTIFF', r'D:\temp\demo_tif_palette.tif', True),
    ('GPKG', r'D:\temp\demo_gpkg.gpkg', False),
    ('GPKG', r'D:\temp\demo_gpkg_palette.gpkg', True),
]:
    write(name, path, pal)
    read(name, pal, path)

From even.rouault at spatialys.com  Mon Oct 29 05:29:43 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 29 Oct 2018 13:29:43 +0100
Subject: [gdal-dev] Trouble with GPKG and colors
In-Reply-To: <CALFWR8Fum1dpxABCPgMCrdvp9KyjhvLPEsoZhQnx5x=0ZHo-7Q@mail.gmail.com>
References: <CALFWR8Fum1dpxABCPgMCrdvp9KyjhvLPEsoZhQnx5x=0ZHo-7Q@mail.gmail.com>
Message-ID: <4113571.ibntmy0m50@even-i700>

On lundi 29 octobre 2018 14:19:12 CET Ben Avrahami wrote:
> Hello, I'm trying to save a byte raster to a geopackage. I ran into a
> problem that the geopackage raster driver does not behave as expected when
> working with bytes and color tables. I have written a python script that
> explains the issue (attached):
> 
> The script creates 4 rasters in similar ways but prints different outputs:
> 
> GTIFF(no palette):  Minimum=0, Maximum=9, Color Table=False, band count=1
> GTIFF(palette):  Minimum=0, Maximum=9, Color Table=True, band count=1
> GPKG(no palette):  Minimum=0, Maximum=9, Color Table=False, band count=4
> GPKG(palette):  Minimum=0, Maximum=255, Color Table=False, band count=4
> 
> The problem is that even though we set a color table in the geopackage when
> writing, it reads as having no color table when reading. Worse yet, the
> original raster values are lost when written with a color table.
> 
> Is there any workaround or fix for this? We want to be able to keep
> non-image byte data with a palette to geopackage.
> 

Change
ds = gdal.OpenEx(path, gdal.OF_READONLY)
to
ds = gdal.OpenEx(path, gdal.OF_READONLY, open_options=['BAND_COUNT=1'])

if you know that all the tiles have a color table. Note: that will not work if 
your raster is made of a single tile that has some padding (which seems to be 
the case in your demo code), because the driver has to expand to RGBA to be 
able to fill transparent pixels.

The fact that you don't get excatly the characteristics of the input dataset 
comes from the fact that GPKG can store tiles of different formats, band 
count, etc, so the driver defaults to exposing at RGBA as a safe setting

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From idan at miara.com  Mon Oct 29 12:09:53 2018
From: idan at miara.com (Idan Miara)
Date: Mon, 29 Oct 2018 21:09:53 +0200
Subject: [gdal-dev] Trouble with GPKG and colors
In-Reply-To: <4113571.ibntmy0m50@even-i700>
References: <CALFWR8Fum1dpxABCPgMCrdvp9KyjhvLPEsoZhQnx5x=0ZHo-7Q@mail.gmail.com>
 <4113571.ibntmy0m50@even-i700>
Message-ID: <CAEDrt38RnRZXZZeBzhx0p-bc5gBLe=Y=oLAbiZsyx_M8dyGh4A@mail.gmail.com>

Hi Even,

Thanks for you prompt answer!

Could you please point out a valid example on how to read/write a single
byte raster dataset (preferably with a color table) in GPKG with any
supported setup (tiling, format, padding etc)?

GTiff also can store different band count, padding, etc, but there isn't a
similar problem with it. I'm not sure I understand the difference.
So I'm not sure I understand the RGBA expansion you were talking about, do
you have a link to more info on that matter?

Kind regards,
Idan

On Mon, 29 Oct 2018 at 14:29, Even Rouault <even.rouault at spatialys.com>
wrote:

> On lundi 29 octobre 2018 14:19:12 CET Ben Avrahami wrote:
> > Hello, I'm trying to save a byte raster to a geopackage. I ran into a
> > problem that the geopackage raster driver does not behave as expected
> when
> > working with bytes and color tables. I have written a python script that
> > explains the issue (attached):
> >
> > The script creates 4 rasters in similar ways but prints different
> outputs:
> >
> > GTIFF(no palette):  Minimum=0, Maximum=9, Color Table=False, band count=1
> > GTIFF(palette):  Minimum=0, Maximum=9, Color Table=True, band count=1
> > GPKG(no palette):  Minimum=0, Maximum=9, Color Table=False, band count=4
> > GPKG(palette):  Minimum=0, Maximum=255, Color Table=False, band count=4
> >
> > The problem is that even though we set a color table in the geopackage
> when
> > writing, it reads as having no color table when reading. Worse yet, the
> > original raster values are lost when written with a color table.
> >
> > Is there any workaround or fix for this? We want to be able to keep
> > non-image byte data with a palette to geopackage.
> >
>
> Change
> ds = gdal.OpenEx(path, gdal.OF_READONLY)
> to
> ds = gdal.OpenEx(path, gdal.OF_READONLY, open_options=['BAND_COUNT=1'])
>
> if you know that all the tiles have a color table. Note: that will not
> work if
> your raster is made of a single tile that has some padding (which seems to
> be
> the case in your demo code), because the driver has to expand to RGBA to
> be
> able to fill transparent pixels.
>
> The fact that you don't get excatly the characteristics of the input
> dataset
> comes from the fact that GPKG can store tiles of different formats, band
> count, etc, so the driver defaults to exposing at RGBA as a safe setting
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181029/ab676e59/attachment.html>

From pedrongvenancio at gmail.com  Tue Oct 30 08:17:06 2018
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Tue, 30 Oct 2018 15:17:06 +0000
Subject: [gdal-dev] Error in fread() reading object from shp file
Message-ID: <CAMCJChvVu9hbH_GUM+PYmn0OJiq7grjLy-3wv2REVy4jPHLo-w@mail.gmail.com>

Hi all,

It seems that this question raised up again in GDAL/OGR 2.3.2:

https://trac.osgeo.org/gdal/ticket/4203

I've a shapefile produced in a old version of gvSIG, that worked well in
QGIS 2.18.24, compiled against GDAL/OGR 2.2.4 on Windows, and 2.2.2 on
Linux.

After update to QGIS 2.18.25 and QGIS 3.4, that were compiled against
GDAL/OGR 2.3.2, the geometry of the shapefile is not visible, just the
attributes.

ogrinfo shows the ERROR 1: Error in fread() reading object of size 776 at
offset 100 from .shp file

ogrinfo -al Isocronas_RV_Manteigas_Linhas_gvSIG.shp
INFO: Open of `Isocronas_RV_Manteigas_Linhas_gvSIG.shp'
      using driver `ESRI Shapefile' successful.
Layer name: Isocronas_RV_Manteigas_Linhas_gvSIG
Metadata:
  DBF_DATE_LAST_UPDATE=1918-10-22
Geometry: Line String
Feature Count: 3673
Extent: (46198.599165, 72277.658265) - (60600.318227, 87974.341081)
Layer SRS WKT:
PROJCS["ETRS89 / Portugal TM06",
    GEOGCS["ETRS89",
        DATUM["European_Terrestrial_Reference_System_1989",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6258"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4258"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",39.66825833333333],
    PARAMETER["central_meridian",-8.133108333333334],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AXIS["X",EAST],
    AXIS["Y",NORTH],
    AUTHORITY["EPSG","3763"]]
IDARC: Integer64 (18.0)
IDEDGE: Integer64 (18.0)
COSTORIG: Real (18.6)
DISTORIG: Real (18.6)
COSTEND: Real (18.6)
DISTEND: Real (18.6)
IDFLAG: Real (18.6)
ERROR 1: Error in fread() reading object of size 776 at offset 100 from
.shp file
OGRFeature(Isocronas_RV_Manteigas_Linhas_gvSIG):0
  IDARC (Integer64) = 332
  IDEDGE (Integer64) = 664
  COSTORIG (Real) = 24.593620
  DISTORIG (Real) = 9698.047530
  COSTEND (Real) = 30.019970
  DISTEND (Real) = 11416.391280
  IDFLAG (Real) = 0.000000
ERROR 1: Error in fread() reading object of size 296 at offset 876 from
.shp file
OGRFeature(Isocronas_RV_Manteigas_Linhas_gvSIG):1
  IDARC (Integer64) = 333
  IDEDGE (Integer64) = 666
  COSTORIG (Real) = 30.439360
  DISTORIG (Real) = 11549.198340
  COSTEND (Real) = 31.435480
  DISTEND (Real) = 11864.636020
  IDFLAG (Real) = 0.000000

The shapefile is this one:
https://cld.pt/dl/download/a35d82bc-6784-4864-8737-59ecbb3a696d/Shapefile_gvSIG.zip

Is this a problem from GDAL/OGR?

Thank you very much!

Best regards,
Pedro Venâncio
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181030/fd5490c4/attachment.html>

From even.rouault at spatialys.com  Tue Oct 30 10:33:36 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 30 Oct 2018 18:33:36 +0100
Subject: [gdal-dev] Error in fread() reading object from shp file
In-Reply-To: <CAMCJChvVu9hbH_GUM+PYmn0OJiq7grjLy-3wv2REVy4jPHLo-w@mail.gmail.com>
References: <CAMCJChvVu9hbH_GUM+PYmn0OJiq7grjLy-3wv2REVy4jPHLo-w@mail.gmail.com>
Message-ID: <5587774.V2x6mv5UhZ@even-i700>

Pedro,

There is a corruption in the .shp file. The file size (given as a number of 2-
byte words) at offset 24 to 27 is currently 268, which is plain wrong. The 
value should be 994732 / 2 = 497366 = 00 07 96 D6 in big endian order. Once 
patched, the shapefile can be read.

That said, I've just modified the code to not be dependent on the correctness 
of that field.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pedrongvenancio at gmail.com  Tue Oct 30 14:24:06 2018
From: pedrongvenancio at gmail.com (=?UTF-8?Q?Pedro_Ven=C3=A2ncio?=)
Date: Tue, 30 Oct 2018 21:24:06 +0000
Subject: [gdal-dev] Error in fread() reading object from shp file
In-Reply-To: <5587774.V2x6mv5UhZ@even-i700>
References: <CAMCJChvVu9hbH_GUM+PYmn0OJiq7grjLy-3wv2REVy4jPHLo-w@mail.gmail.com>
 <5587774.V2x6mv5UhZ@even-i700>
Message-ID: <CAMCJChsqTX9HT5Vb_h=CrKGaBRzKzqWubWVip5KUorWmcN8z3g@mail.gmail.com>

Perfect Even!

Thank you very much!

Best regards,
Pedro


Na(o) ter, 30/10/2018, 17:33, Even Rouault <even.rouault at spatialys.com>
escreveu:

> Pedro,
>
> There is a corruption in the .shp file. The file size (given as a number
> of 2-
> byte words) at offset 24 to 27 is currently 268, which is plain wrong. The
> value should be 994732 / 2 = 497366 = 00 07 96 D6 in big endian order.
> Once
> patched, the shapefile can be read.
>
> That said, I've just modified the code to not be dependent on the
> correctness
> of that field.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181030/da248140/attachment.html>

From mfathin at csysint.com  Tue Oct 30 18:41:54 2018
From: mfathin at csysint.com (Athin)
Date: Tue, 30 Oct 2018 18:41:54 -0700 (MST)
Subject: [gdal-dev] How to Use Gdal in Microsoft Visual Studio C++
Message-ID: <1540950114674-0.post@n6.nabble.com>

Hai All,

I am still new in this GIS subject. May someone guide me how can i use gdal
on Visual Studio 2012 c++. I try to follow from the website Gdal.org but i
dont understand about it. How to generating visual studio project? How to
generate_vcxproj.bat? I try and the solution fail when i open on Visual
Studio.  My windows in 64 bit system.

Thank you and best regards,



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mateusz at loskot.net  Wed Oct 31 01:56:37 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 31 Oct 2018 09:56:37 +0100
Subject: [gdal-dev] How to Use Gdal in Microsoft Visual Studio C++
In-Reply-To: <1540950114674-0.post@n6.nabble.com>
References: <1540950114674-0.post@n6.nabble.com>
Message-ID: <CABUeae98XPqAOtVp5oW=tC0QKMY_9QjpeSPRW+GsfLKhVSn0SQ@mail.gmail.com>

On Wed, 31 Oct 2018 at 02:41, Athin <mfathin at csysint.com> wrote:
>
> I am still new in this GIS subject. May someone guide me how can i use gdal
> on Visual Studio 2012 c++.

In order to build and use current GDAL, you need Visual Studio 2015 or later.
GDAL requires C++11 compiler
https://trac.osgeo.org/gdal/wiki/rfc68_cplusplus11

You may try VS2013, which offers some C++11 support,
but it is not guaranteed to work at all.

> I try to follow from the website Gdal.org but i
> dont understand about it. How to generating visual studio project? How to
> generate_vcxproj.bat?

For example,

D:\gdal\gdal\> generate_vcxproj.bat 15.0 64 gdal_vs2017
Generating:
  "D:\gdal\gdal\gdal_vs2017.vcxproj"
  "D:\gdal\gdal\gdal_vs2017.vcxproj.user"
  "D:\gdal\gdal\gdal_vs2017.vcxproj.filters"
  "D:\gdal\autotest\cpp\gdal_vs2017_test.vcxproj"
  "D:\gdal\autotest\cpp\gdal_vs2017_test.vcxproj.user"
  "D:\gdal\autotest\cpp\gdal_vs2017_test.vcxproj.filters"
This might take a little while...
Projects done!
Launch Visual Studio IDE
* Open project "D:\gdal\gdal\gdal_vs2017.vcxproj"
* Add  project "D:\gdal\autotest\cpp\gdal_vs2017_test.vcxproj"
* Configure Build Dependencies to build the main project before the
test project.
* Save solution in .sln file
Done!

Finally, since you asked " guide me how can i use gdal",
you do not need VS project to build or use GDAL.
You can build GDAL library from command line using NMAKE and Makefiles provided
See https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
(Note, the page has not been updated regarding minimum VS version
required, so assume it is VS2015).
Then, create your own application project in VS and configure it
setting include directories,
library directories, libraries for linker input.
If you don't know how to use VS, you will need to learn it from the
Microsoft docs, eg.
https://docs.microsoft.com/en-us/cpp/build/vscpp-step-1-create

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From ivan.lucena at outlook.com  Wed Oct 31 05:54:40 2018
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Wed, 31 Oct 2018 12:54:40 +0000
Subject: [gdal-dev] How to Use Gdal in Microsoft Visual Studio C++
In-Reply-To: <CABUeae98XPqAOtVp5oW=tC0QKMY_9QjpeSPRW+GsfLKhVSn0SQ@mail.gmail.com>
References: <1540950114674-0.post@n6.nabble.com>
 <CABUeae98XPqAOtVp5oW=tC0QKMY_9QjpeSPRW+GsfLKhVSn0SQ@mail.gmail.com>
Message-ID: <D9DE15DB-D006-439A-B3B7-CD8F43DA1E3C@outlook.com>

Hi Athin,

Just to complement what Mateusz wrote, the project files generated automatically are not a *real* Visual Studio C++ project that you can change parameters on the project's property dialogbox. The generated project is what Microsoft calls a Makefile project. It is just a shell around the existing makefile.vc files. When you click on build all it does is to run "name -f makefile.vc" with some parameters.

So it might not be a good idea if you need to integrate with a VS Solution that need to share settings with other *normal* VC projects. The other options for that would be 'GDAL cmake' [https://trac.osgeo.org/gdal/wiki/CMake] but I never use it.

If all you want to do is to compile GDAL I think you would be better off by using command line tools (edit nmake.local based on nmake.opt and run nmake -f makefile.vc, make, make install). Just like Mateusz said.

The automaticly generated projects would give you a complete code scan with autocompletion, go to declaration, go to definition and refactoring tools, just like in a *normal* Visual Studio project but you still need to edit nmake.local to change setting like debugging mode, for example. And more importantly, I haven't use it for a long time so I almost forgot that you can use it for debugging too.

Good luck!

Ivan



﻿On 10/31/18, 4:57 AM, "gdal-dev on behalf of Mateusz Loskot" <gdal-dev-bounces at lists.osgeo.org on behalf of mateusz at loskot.net> wrote:

    On Wed, 31 Oct 2018 at 02:41, Athin <mfathin at csysint.com> wrote:
    >
    > I am still new in this GIS subject. May someone guide me how can i use gdal
    > on Visual Studio 2012 c++.
    
    In order to build and use current GDAL, you need Visual Studio 2015 or later.
    GDAL requires C++11 compiler
    https://trac.osgeo.org/gdal/wiki/rfc68_cplusplus11
    
    You may try VS2013, which offers some C++11 support,
    but it is not guaranteed to work at all.
    
    > I try to follow from the website Gdal.org but i
    > dont understand about it. How to generating visual studio project? How to
    > generate_vcxproj.bat?
    
    For example,
    
    D:\gdal\gdal\> generate_vcxproj.bat 15.0 64 gdal_vs2017
    Generating:
      "D:\gdal\gdal\gdal_vs2017.vcxproj"
      "D:\gdal\gdal\gdal_vs2017.vcxproj.user"
      "D:\gdal\gdal\gdal_vs2017.vcxproj.filters"
      "D:\gdal\autotest\cpp\gdal_vs2017_test.vcxproj"
      "D:\gdal\autotest\cpp\gdal_vs2017_test.vcxproj.user"
      "D:\gdal\autotest\cpp\gdal_vs2017_test.vcxproj.filters"
    This might take a little while...
    Projects done!
    Launch Visual Studio IDE
    * Open project "D:\gdal\gdal\gdal_vs2017.vcxproj"
    * Add  project "D:\gdal\autotest\cpp\gdal_vs2017_test.vcxproj"
    * Configure Build Dependencies to build the main project before the
    test project.
    * Save solution in .sln file
    Done!
    
    Finally, since you asked " guide me how can i use gdal",
    you do not need VS project to build or use GDAL.
    You can build GDAL library from command line using NMAKE and Makefiles provided
    See https://trac.osgeo.org/gdal/wiki/BuildingOnWindows
    (Note, the page has not been updated regarding minimum VS version
    required, so assume it is VS2015).
    Then, create your own application project in VS and configure it
    setting include directories,
    library directories, libraries for linker input.
    If you don't know how to use VS, you will need to learn it from the
    Microsoft docs, eg.
    https://docs.microsoft.com/en-us/cpp/build/vscpp-step-1-create
    
    Best regards,
    -- 
    Mateusz Loskot, http://mateusz.loskot.net
    _______________________________________________
    gdal-dev mailing list
    gdal-dev at lists.osgeo.org
    https://lists.osgeo.org/mailman/listinfo/gdal-dev


From astewart at terragotech.com  Wed Oct 31 07:41:00 2018
From: astewart at terragotech.com (Alan Stewart)
Date: Wed, 31 Oct 2018 14:41:00 +0000
Subject: [gdal-dev] continuous integration
Message-ID: <BN3PR15MB0850135207CB22DBBA25A261C4CD0@BN3PR15MB0850.namprd15.prod.outlook.com>

I found https://ci.appveyor.com/project/rouault/gdal-coverage, but this appears to be from the 2.1 branch? Is there a CI of gdalautotest against master with public results and logs?

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615

www.terragotech.com<applewebdata://B24C0762-C7C9-4431-8518-ACC915448B89/www.terragotech.com>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181031/56e348c2/attachment-0001.html>

From even.rouault at spatialys.com  Wed Oct 31 07:47:06 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 31 Oct 2018 15:47:06 +0100
Subject: [gdal-dev] continuous integration
In-Reply-To: <BN3PR15MB0850135207CB22DBBA25A261C4CD0@BN3PR15MB0850.namprd15.prod.outlook.com>
References: <BN3PR15MB0850135207CB22DBBA25A261C4CD0@BN3PR15MB0850.namprd15.prod.outlook.com>
Message-ID: <4081440.7mo83BAzKC@even-i700>

On mercredi 31 octobre 2018 14:41:00 CET Alan Stewart wrote:
> I found https://ci.appveyor.com/project/rouault/gdal-coverage, but this
> appears to be from the 2.1 branch? Is there a CI of gdalautotest against
> master with public results and logs?

Alan

Sure, this is accessible from the badges displayed at:
https://github.com/OSGeo/gdal

For your convenience:
https://travis-ci.com/OSGeo/gdal
https://ci.appveyor.com/project/OSGeo/gdal

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From astewart at terragotech.com  Wed Oct 31 07:57:59 2018
From: astewart at terragotech.com (Alan Stewart)
Date: Wed, 31 Oct 2018 14:57:59 +0000
Subject: [gdal-dev] continuous integration
In-Reply-To: <4081440.7mo83BAzKC@even-i700>
References: <BN3PR15MB0850135207CB22DBBA25A261C4CD0@BN3PR15MB0850.namprd15.prod.outlook.com>
 <4081440.7mo83BAzKC@even-i700>
Message-ID: <BN3PR15MB08504025E9E29010845F1949C4CD0@BN3PR15MB0850.namprd15.prod.outlook.com>

Thanks. I didn't recognize those as clickable links, I think largely because they are so much smaller than other buttons on the page, and the way they are grouped.

Alan Stewart
Senior Software Engineer
TerraGo Technologies
3200 Windy Hill Road, Suite 1550W
Atlanta, GA 30339 USA
O.  +1 678.391.9615
 
www.terragotech.com

-----Original Message-----
From: Even Rouault <even.rouault at spatialys.com> 
Sent: Wednesday, October 31, 2018 10:47 AM
To: gdal-dev at lists.osgeo.org
Cc: Alan Stewart <astewart at terragotech.com>
Subject: Re: [gdal-dev] continuous integration

On mercredi 31 octobre 2018 14:41:00 CET Alan Stewart wrote:
> I found https://ci.appveyor.com/project/rouault/gdal-coverage, but 
> this appears to be from the 2.1 branch? Is there a CI of gdalautotest 
> against master with public results and logs?

Alan

Sure, this is accessible from the badges displayed at:
https://github.com/OSGeo/gdal

For your convenience:
https://travis-ci.com/OSGeo/gdal
https://ci.appveyor.com/project/OSGeo/gdal

Even

--
Spatialys - Geospatial professional services http://www.spatialys.com

From mfathin at csysint.com  Wed Oct 31 18:45:47 2018
From: mfathin at csysint.com (Athin)
Date: Wed, 31 Oct 2018 18:45:47 -0700 (MST)
Subject: [gdal-dev] How to Use Gdal in Microsoft Visual Studio C++
In-Reply-To: <D9DE15DB-D006-439A-B3B7-CD8F43DA1E3C@outlook.com>
References: <1540950114674-0.post@n6.nabble.com>
 <CABUeae98XPqAOtVp5oW=tC0QKMY_9QjpeSPRW+GsfLKhVSn0SQ@mail.gmail.com>
 <D9DE15DB-D006-439A-B3B7-CD8F43DA1E3C@outlook.com>
Message-ID: <1541036747917-0.post@n6.nabble.com>

Hi all,

Thank for the reply. I think I don't need to start from scratch for gdal. I
can just add the binaries to visual studio right? but may i know how to
install the GDALALLRegister(), from the tutorial it need to be called at the
first of the code. 

Thank you and best regards



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From koji51guchi at gmail.com  Wed Oct 31 23:48:41 2018
From: koji51guchi at gmail.com (koji higuchi)
Date: Thu, 1 Nov 2018 15:48:41 +0900
Subject: [gdal-dev] Alternative to GPKG format
Message-ID: <CADHxCLKNJJCHS6+K383SUEp_7wsnx=pqCeXb6wvNrbyCvSH_+Q@mail.gmail.com>

Hi
I am extracting .osm.pbf file into .gpkg; but the writing rate is very slow.
When I write into .shp, rate is faster but its limit is 4gb.
So, what other format is better for larger than 4gb requirement?
Thanks for your ideas.
Koji
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20181101/742fb917/attachment.html>

