From even.rouault at spatialys.com  Tue Sep  1 06:34:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Sep 2015 15:34:32 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <CAFLLRpLMP88Jcj_GVnCqcdJUCDp3RGOZ5whwHZ8ABtZcLFzW0Q@mail.gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CA+YzLBeF9LyVbAFvRhQwXup+e6qKqizZqNaN5_BjAn2kjfjJ+g@mail.gmail.com>
	<CAFLLRpLMP88Jcj_GVnCqcdJUCDp3RGOZ5whwHZ8ABtZcLFzW0Q@mail.gmail.com>
Message-ID: <201509011534.32883.even.rouault@spatialys.com>

Folks,

I'd wish we can find a solution that satisfy all parties. Here's another iteration for a possible proposition.

* C API:

Principles :
- dataset objects can be passed
- the option structure is opaque (should address Frank's concern about exposing too much internal stuff)
- the option structure is parsed from an array of strings (with the current syntax of utilities)
- a few setters can be added, for example, to set a progress function. Or possibly auxiliary objects,
  like the cutline layer for gdalwarp.
- not sure if we need the *pbUsageError flag. I removed it. If there's a conflict of options only found after
  parsing time (eg due to characteristics of the datasets), then a CPLError() message should be enough.

Example with GDALTranslate:

char** papszArgv = CSLParseCommandLine(const char* pszCommandLine);
GDALTranslateOptionsParse* psOptions = GDALTranslateOptionsNew(char** papszArgv);
GDALTranslateOptionsSetProgress(options, pfnProgress, pProgressData);
hOutDS = GDALTranslate(const char *pszDest, GDALDatasetH hSrcDataset, GDALTranslateOptions *psOptions)
GDALTranslateOptionsDestroy(GDALTranslateOptionsParse* psOptions);
CSLDestroy(papszArgV);


* Python API

Principles :
- use the above C API from SWIG, but mostly for internal use of the upper levels explained below that
  would be only Python code (no SWIG).
- pubic API offers access to (hopefully nicely named) dedicated arguments and builds the string from them
- public API offers access to the string representation as well
- use Python dynamic typing to offer sugar candy, e.g pass a SRS either as an osr.SpatialReference()
object or a string (the object being serialized to string, but this is a lossless operation)


Examples:

1) Use case with repeatable options
options = gdal.TranslateOptions()
options.bands = [ 1, 2, 3 ]
options.format = 'MEM'
options.progress = my_progress_method
mem_ds = gdal.Translate('', src_ds, options = options)

2)  Variant of 1). With some Python magic on **kwargs it can be automated to redirect on 1)
mem_ds = gdal.Translate('', src_ds, bands = [1,2,3], format = 'MEM', progress = my_progress_method)

3) String oriented.
options = gdal.TranslateOptions('-b 1 -b 2 -b 3 -of MEM')
mem_ds = gdal.Translate('', src_ds, options = options, progress = my_progress_method)

4) Variant of 4)
mem_ds = gdal.Translate('', src_ds, options = '-b 1 -b 2 -b 3 -of MEM', progress = my_progress_method)

5) For the nostalgics, a wrapper of the above :
gdal.Translate('in.tif out.tif -b 1 -b 2 -b 3 -of MEM', progress = my_progress_method')

That's maybe too many different possibilities, although some build upon others, so not necessarily
a lot of code involved (easier to say when it is not coded ahah!)

* Other binding languages.

Would probably only fallback on wrapping C API with SWIG in a first step.
And find most appropriate solutions for each language.

- Java for sure doesn't have a keyword approach for method arguments
(well with what I remember from Java 1.6. might have changed). Builder approach
would be a possibility (http://stackoverflow.com/questions/1988016/named-parameter-idiom-in-java) 
- C#: being a clone of Java, probably not.
- Perl: apparently possible


Opinions ?

Even


> Hi Frank,
> 
> I was one of the original people who argued against the "array of strings"
> approach...
> 
> On 27 August 2015 at 02:26, Frank Warmerdam <warmerdam at pobox.com> wrote:
> > I clearly should have been commenting sooner.
> 
> Several months ago :p
> 
> > I am concerned that having messy structures of options for each
> > program is going to complicate maintaining the actually commandline
> > programs, and that it will still be a fragile and complicated point of
> > entry as commandline arguments evolve over time.
> 
> The commandline tools eventually become string-parsing and wrapping of the
> corresponding library tool - I'm not sure that makes it fragile &
> complicated? Means that the library-ified apps are *at least as*
> flexible/expressive/powerful
> as the command-line tools.
> 
> > I'd prefer if the approach had just been to embed the main()'s in a
> > library and to still pass the exact same vector of arguments (in the
> > char **argv format) to these functions instead of shelling out a
> > program.
> 
> That kinda defeats the whole point - a huge array of complex string-ified
> arguments is what we're all doing at the moment, wrapped in an subprocess
> call. Some options take multiple arguments in multiple strings, others take
> multiple arguments in single strings, it's massively confusing. And we all
> have big pipelines of chained gdalwarp/gdal_translate/etc code...
> 
> What we were striving for was to make it distinctly *better*:
> 
>    - progress/logging/error handling
>    - options that accept geometries or SRS or in-memory datasets without
>    having to re-serialize them and/or utilise tempfiles
>    - easily applying the same operations over multiple datasets
>    - configuration option defaults
> 
> > I would love to be able to replace many places where I shell out to
> > run gdal command line programs with a library call with essentially
> > the same arguments.
> 
> Sure, so it should be straightforward to do that *as well*, though besides
> in-memory data (as you mention) you're getting very little benefit.
> 
> Rob :)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Tue Sep  1 07:02:58 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 1 Sep 2015 14:02:58 +0000 (UTC)
Subject: [gdal-dev] SRS of the Elastic Search geometries?
Message-ID: <loom.20150901T154448-250@post.gmane.org>

Hi,

Are the geometries which are stored into Elastic Search supposed to be in
EPSG:4326? Now I can see that the driver is writing EPSG:4326 definitions
into the metadata of the ES index but I can still save for example EPSG:3067
geometries without transforming them into EPSG:4326.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Tue Sep  1 07:26:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Sep 2015 16:26:11 +0200
Subject: [gdal-dev] SRS of the Elastic Search geometries?
In-Reply-To: <loom.20150901T154448-250@post.gmane.org>
References: <loom.20150901T154448-250@post.gmane.org>
Message-ID: <201509011626.11883.even.rouault@spatialys.com>

Hi Jukka,

> Are the geometries which are stored into Elastic Search supposed to be in
> EPSG:4326?

That's my understanding of ES doc. For geo_point mapping, you can put 
arbitrary coordinates if I remember, but I believe the behaviour is undefined.
So basically the driver is reprojecting on-the-fly to EPSG:4326 on feature 
insertion.

> Now I can see that the driver is writing EPSG:4326 definitions
> into the metadata of the ES index

What do you mean by "into the metadata of the ES index". The SRS is always 
implied.
Of perhaps you meant on-the-fly reprojection ?

> but I can still save for example
> EPSG:3067 geometries without transforming them into EPSG:4326.

On-the-fly reprojection should occur normally (provided that your source layer 
has explicit SRS)

Little demo:

$ cat simple.csv
id,WKT
1,"LINESTRING(2 49,3 50)"

$ ogr2ogr simple_EPSG_32631.shp simple.csv -t_srs EPSG:32631 -s_srs EPSG:4326

$ ogr2ogr -update es: simple_EPSG_32631.shp

$ ogrinfo es: simple_epsg_32631
INFO: Open of `es:'
      using driver `ElasticSearch' successful.

Layer name: simple_epsg_32631
Geometry: Line String
Feature Count: 1
Extent: (2.000000, 49.000000) - (3.000000, 50.000000)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","4326"]]
FID Column = ogc_fid
Geometry Column = geometry
_id: String (0.0)
WKT: String (0.0)
id: String (0.0)
OGRFeature(simple_epsg_32631):1
  _id (String) = AU-JSdC2eRJEoT8Pm33E
  WKT (String) = LINESTRING(2 49,3 50)
  id (String) = 1
  LINESTRING (2 49,3 50)


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mohammedrashadkm at gmail.com  Tue Sep  1 07:50:32 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Tue, 1 Sep 2015 16:50:32 +0200
Subject: [gdal-dev] hdf5 dataset. Header data too long. Truncated
Message-ID: <CANNqv9dZ8gzzkwqmyMwau+1XwaA8SZ=fQij_g=MXj5cajciErA@mail.gmail.com>

Hello all,

I have an the following warning from gdal when reading .h5 dataset

Warning 2: Header data too long. Truncated.

Looking at frmts/hdf5/hdf5dataset.cpp there is a define for
MAX_METADATA_LEN

#define MAX_METADATA_LEN 32768


and there is a check
                if( CPLStrlcat(szValue, szData, MAX_METADATA_LEN) >=

MAX_METADATA_LEN )
                    CPLError( CE_Warning, CPLE_OutOfMemory,
                              "Header data too long. Truncated\n");

Now I could update MAX_METADATA_LEN but is there a way it can set be set at
runtime ?

I am using gdalinfo from gdal svn 1.11 branch
svn info  gives:

Path: .
Working Copy Root Path: /home/mkanavat/sources/gdal_branch_1.11
URL: http://svn.osgeo.org/gdal/branches/1.11/gdal
Relative URL: ^/branches/1.11/gdal
Repository Root: http://svn.osgeo.org/gdal
Repository UUID: f0d54148-0727-0410-94bb-9a71ac55c965
Revision: 30007
Node Kind: directory
Schedule: normal
Last Changed Author: rouault
Last Changed Rev: 30005
Last Changed Date: 2015-09-01 10:17:50 +0200 (Tue, 01 Sep 2015)



-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150901/ec2191a4/attachment.html>

From even.rouault at spatialys.com  Tue Sep  1 08:08:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Sep 2015 17:08:39 +0200
Subject: [gdal-dev] hdf5 dataset. Header data too long. Truncated
In-Reply-To: <CANNqv9dZ8gzzkwqmyMwau+1XwaA8SZ=fQij_g=MXj5cajciErA@mail.gmail.com>
References: <CANNqv9dZ8gzzkwqmyMwau+1XwaA8SZ=fQij_g=MXj5cajciErA@mail.gmail.com>
Message-ID: <201509011708.40002.even.rouault@spatialys.com>

Le mardi 01 septembre 2015 16:50:32, Rashad M a ?crit :
> Hello all,
> 
> I have an the following warning from gdal when reading .h5 dataset
> 
> Warning 2: Header data too long. Truncated.
> 
> Looking at frmts/hdf5/hdf5dataset.cpp there is a define for
> MAX_METADATA_LEN
> 
> #define MAX_METADATA_LEN 32768
> 
> 
> and there is a check
>                 if( CPLStrlcat(szValue, szData, MAX_METADATA_LEN) >=
> 
> MAX_METADATA_LEN )
>                     CPLError( CE_Warning, CPLE_OutOfMemory,
>                               "Header data too long. Truncated\n");
> 

This was introduced in https://trac.osgeo.org/gdal/changeset/20438 to avoid 
crashes. Potentially it could be reworked to deal with arbitrary long 
metadata. Although it could be kind of annoying to have too long values as 
metadata item, especially in the main metadata domain. A cleaner solution 
would perhaps be have something like "MY_ITEM=<value removed because too 
large. query HDF5 metadata domain to get it>" and you'd have the full value in 
the HDF5 metadata domain (perhaps not unlimited but with a much higher limit, 
let's say 1 MB per item). People with more experience with HDF5 datasets could 
perhaps comment.

> Now I could update MAX_METADATA_LEN but is there a way it can set be set at
> runtime ?

No, you need to recompile.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From tkeitt at utexas.edu  Tue Sep  1 08:10:06 2015
From: tkeitt at utexas.edu (Tim Keitt)
Date: Tue, 1 Sep 2015 10:10:06 -0500
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201509011534.32883.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CA+YzLBeF9LyVbAFvRhQwXup+e6qKqizZqNaN5_BjAn2kjfjJ+g@mail.gmail.com>
	<CAFLLRpLMP88Jcj_GVnCqcdJUCDp3RGOZ5whwHZ8ABtZcLFzW0Q@mail.gmail.com>
	<201509011534.32883.even.rouault@spatialys.com>
Message-ID: <CANnL8gp2GxwnZSTqanS4MnqXKKJT54ZMYP+9niMjUKy8WZ2o3g@mail.gmail.com>

http://www.keittlab.org/

On Tue, Sep 1, 2015 at 8:34 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Folks,
>
> I'd wish we can find a solution that satisfy all parties. Here's another
> iteration for a possible proposition.
>
> * C API:
>
> Principles :
> - dataset objects can be passed
> - the option structure is opaque (should address Frank's concern about
> exposing too much internal stuff)
> - the option structure is parsed from an array of strings (with the
> current syntax of utilities)
> - a few setters can be added, for example, to set a progress function. Or
> possibly auxiliary objects,
>   like the cutline layer for gdalwarp.
> - not sure if we need the *pbUsageError flag. I removed it. If there's a
> conflict of options only found after
>   parsing time (eg due to characteristics of the datasets), then a
> CPLError() message should be enough.
>
> Example with GDALTranslate:
>
> char** papszArgv = CSLParseCommandLine(const char* pszCommandLine);
> GDALTranslateOptionsParse* psOptions = GDALTranslateOptionsNew(char**
> papszArgv);
> GDALTranslateOptionsSetProgress(options, pfnProgress, pProgressData);
> hOutDS = GDALTranslate(const char *pszDest, GDALDatasetH hSrcDataset,
> GDALTranslateOptions *psOptions)
> GDALTranslateOptionsDestroy(GDALTranslateOptionsParse* psOptions);
> CSLDestroy(papszArgV);
>
>
> * Python API
>
> Principles :
> - use the above C API from SWIG, but mostly for internal use of the upper
> levels explained below that
>   would be only Python code (no SWIG).
> - pubic API offers access to (hopefully nicely named) dedicated arguments
> and builds the string from them
> - public API offers access to the string representation as well
> - use Python dynamic typing to offer sugar candy, e.g pass a SRS either as
> an osr.SpatialReference()
> object or a string (the object being serialized to string, but this is a
> lossless operation)
>
>
> Examples:
>
> 1) Use case with repeatable options
> options = gdal.TranslateOptions()
> options.bands = [ 1, 2, 3 ]
> options.format = 'MEM'
> options.progress = my_progress_method
> mem_ds = gdal.Translate('', src_ds, options = options)
>
> 2)  Variant of 1). With some Python magic on **kwargs it can be automated
> to redirect on 1)
> mem_ds = gdal.Translate('', src_ds, bands = [1,2,3], format = 'MEM',
> progress = my_progress_method)
>
> 3) String oriented.
> options = gdal.TranslateOptions('-b 1 -b 2 -b 3 -of MEM')
> mem_ds = gdal.Translate('', src_ds, options = options, progress =
> my_progress_method)
>
> 4) Variant of 4)
> mem_ds = gdal.Translate('', src_ds, options = '-b 1 -b 2 -b 3 -of MEM',
> progress = my_progress_method)
>
> 5) For the nostalgics, a wrapper of the above :
> gdal.Translate('in.tif out.tif -b 1 -b 2 -b 3 -of MEM', progress =
> my_progress_method')
>
> That's maybe too many different possibilities, although some build upon
> others, so not necessarily
> a lot of code involved (easier to say when it is not coded ahah!)
>
> * Other binding languages.
>
> Would probably only fallback on wrapping C API with SWIG in a first step.
> And find most appropriate solutions for each language.
>
> - Java for sure doesn't have a keyword approach for method arguments
> (well with what I remember from Java 1.6. might have changed). Builder
> approach
> would be a possibility (
> http://stackoverflow.com/questions/1988016/named-parameter-idiom-in-java)
> - C#: being a clone of Java, probably not.
> - Perl: apparently possible
>
>
> Opinions ?
>

In an ideal world, I would prefer a nice clean algorithms library that is
orthogonal to the command line and parsing. The utilities then simply
consist of parsing and calling this library. I would also prefer the
library to be broken down in to a set of orthogonal lower-level primitives
and the higher-level algorithms built from these. But I cannot contribute
significantly to that effort so I think its up to those than can to decide
the course.

THK


>
> Even
>
>
> > Hi Frank,
> >
> > I was one of the original people who argued against the "array of
> strings"
> > approach...
> >
> > On 27 August 2015 at 02:26, Frank Warmerdam <warmerdam at pobox.com> wrote:
> > > I clearly should have been commenting sooner.
> >
> > Several months ago :p
> >
> > > I am concerned that having messy structures of options for each
> > > program is going to complicate maintaining the actually commandline
> > > programs, and that it will still be a fragile and complicated point of
> > > entry as commandline arguments evolve over time.
> >
> > The commandline tools eventually become string-parsing and wrapping of
> the
> > corresponding library tool - I'm not sure that makes it fragile &
> > complicated? Means that the library-ified apps are *at least as*
> > flexible/expressive/powerful
> > as the command-line tools.
> >
> > > I'd prefer if the approach had just been to embed the main()'s in a
> > > library and to still pass the exact same vector of arguments (in the
> > > char **argv format) to these functions instead of shelling out a
> > > program.
> >
> > That kinda defeats the whole point - a huge array of complex string-ified
> > arguments is what we're all doing at the moment, wrapped in an subprocess
> > call. Some options take multiple arguments in multiple strings, others
> take
> > multiple arguments in single strings, it's massively confusing. And we
> all
> > have big pipelines of chained gdalwarp/gdal_translate/etc code...
> >
> > What we were striving for was to make it distinctly *better*:
> >
> >    - progress/logging/error handling
> >    - options that accept geometries or SRS or in-memory datasets without
> >    having to re-serialize them and/or utilise tempfiles
> >    - easily applying the same operations over multiple datasets
> >    - configuration option defaults
> >
> > > I would love to be able to replace many places where I shell out to
> > > run gdal command line programs with a library call with essentially
> > > the same arguments.
> >
> > Sure, so it should be straightforward to do that *as well*, though
> besides
> > in-memory data (as you mention) you're getting very little benefit.
> >
> > Rob :)
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150901/46a3f292/attachment.html>

From even.rouault at spatialys.com  Tue Sep  1 08:53:20 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Sep 2015 17:53:20 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <CANnL8gp2GxwnZSTqanS4MnqXKKJT54ZMYP+9niMjUKy8WZ2o3g@mail.gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509011534.32883.even.rouault@spatialys.com>
	<CANnL8gp2GxwnZSTqanS4MnqXKKJT54ZMYP+9niMjUKy8WZ2o3g@mail.gmail.com>
Message-ID: <201509011753.20575.even.rouault@spatialys.com>

> 
> In an ideal world, I would prefer a nice clean algorithms library that is
> orthogonal to the command line and parsing. The utilities then simply
> consist of parsing and calling this library. I would also prefer the
> library to be broken down in to a set of orthogonal lower-level primitives
> and the higher-level algorithms built from these.

Well, if I'd classify the content of what is in the apps/ source tree of GDAL, 
I'd say there are :

* Heavy wrappers with lots of options on top of existing API to accomodate for 
various workflows :
- gdal_translate: wrapper of GDALCreateCopy() and the VRT API
- gdalwarp: demo of the C++ warping API
- ogr2ogr: yes admitedly a lot of stuff, that use the OGR API. At the API 
level, there's some "competition" with the CopyLayer() API that lags behind 
all the advanced options of ogr2ogr. I guess defining some pipeline / chaining 
of operations could make sense on the paper, although there's a lot of nasty 
logic to deal with. Some switches have effects both on layer and field creations 
and on each feature.

* Thin wrappers over API :
- gdal_contour: wrapper of GDALCountourGenerate()
- gdaladdo : wrapper of GDALBuildOverviews()
- gdal_rasterize: wrapper of GDALRasterizeGeometries()

* Algorithms implemented in the utilities :
- gdalbuildvrt
- gdaldem
- nearblack
==> would really benefit to be librarified

* In the UNIX pipe philosophy:
- gdallocationinfo
- gdaltransform
==> not sure if they're worth being librarified

* Informational utilities
- gdalinfo ==> makes sense as a library function with the json output
- ogrinfo ==> less obvious. or perhaps just the metadata as json
- gdalsrsinfo / testepsg ==> probably not worth being librarified

I can understand the aim of orthogonal algorithms, etc.. but I'm not 
completely clear on how that would translate in code ;-)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Tue Sep  1 09:50:41 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 1 Sep 2015 16:50:41 +0000 (UTC)
Subject: [gdal-dev] SRS of the Elastic Search geometries?
References: <loom.20150901T154448-250@post.gmane.org>
	<201509011626.11883.even.rouault@spatialys.com>
Message-ID: <loom.20150901T182534-196@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Hi Jukka,


> > but I can still save for example
> > EPSG:3067 geometries without transforming them into EPSG:4326.
> 
> On-the-fly reprojection should occur normally (provided that your source
layer 
> has explicit SRS)


Probably that's it, the explicit SRS. I started with data that have native
SRS epsg:3067 and OpenJUMP JML format which has no means for holding SRS.
Conversion into ES gives always an empty layer, just the schema gets
inserted but no geometries, even is I use -s_srs and -t_srs.

Next trial was to convert JML into GML without assigning SRS. GML has an
undefined SRS and conversion without -s_srs and -t_srs leads to a situation
where metadata sayes that ES is using epsg:4326 but the features are in
epsg:3067. With proper -s_srs and -t_srs the result is good.

If I convert JML into GML and assign SRS with -a_srs epsg:3067 the result is
the same as above. Each GML feature has SRS defined as <gml:Polygon
srsName="EPSG:3067"> but perhaps it is not explicit because conversion into
ES gives correct result only when -s_srs and -t_srs are defined.

So, two problems:
- No way at all to use Jump JML as input format
- With GML parameters -s_srs and -t_srs must be defined even if each GML
feature has srsName and all features in the GML file have same srsName.

A warning like "No explicit SRS found, use -s_srs and -t_srs" might be good
to have.

I know very little about Elastic Seaach, just started experiments a week
ago. I have concluded that what is layer for GDAL is "index", and what is
feature, is "document", and that documents are somehow saved as-is and
clever indexes are built on top of them. Therefore I was thinking that
perhaps everything is OK on the ES side even if the documents come out from
it with epsg:3067 geometries.

-Jukka-

-Jukka-


From even.rouault at spatialys.com  Tue Sep  1 10:23:47 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Sep 2015 19:23:47 +0200
Subject: [gdal-dev] SRS of the Elastic Search geometries?
In-Reply-To: <loom.20150901T182534-196@post.gmane.org>
References: <loom.20150901T154448-250@post.gmane.org>
	<201509011626.11883.even.rouault@spatialys.com>
	<loom.20150901T182534-196@post.gmane.org>
Message-ID: <201509011923.47490.even.rouault@spatialys.com>

> 
> Probably that's it, the explicit SRS. I started with data that have native
> SRS epsg:3067 and OpenJUMP JML format which has no means for holding SRS.
> Conversion into ES gives always an empty layer, just the schema gets
> inserted but no geometries, even is I use -s_srs and -t_srs.
> 
> Next trial was to convert JML into GML without assigning SRS. GML has an
> undefined SRS and conversion without -s_srs and -t_srs leads to a situation
> where metadata sayes that ES is using epsg:4326 but the features are in
> epsg:3067. With proper -s_srs and -t_srs the result is good.

You can also use -a_srs for that.

> 
> If I convert JML into GML and assign SRS with -a_srs epsg:3067 the result
> is the same as above. Each GML feature has SRS defined as <gml:Polygon
> srsName="EPSG:3067"> but perhaps it is not explicit because conversion
> into ES gives correct result only when -s_srs and -t_srs are defined.
> 
> So, two problems:
> - No way at all to use Jump JML as input format

Are you sure about that ? I've just tried the following and it works:

$ ogr2ogr simple_EPSG_32631.jml simple_EPSG_32631.shp -f jml
$ ogr2ogr  -update es: simple_EPSG_32631.jml -overwrite -s_srs EPSG:32631 -
t_srs EPSG:32631
(or with -a_srs EPSG:32631)

The behaviour with JML and GML inputs should be the same.

> - With GML parameters -s_srs and -t_srs must be defined even if each GML
> feature has srsName and all features in the GML file have same srsName.

The issue with GML is complex. Basically, the GML driver is very cautious and 
doesn't report a layer SRS since there's no way to know if all features have 
the same SRS without exploring the whole file, which he will avoid if there's a 
.xsd that it can understand. If you remove the .xsd, then a full initial scan 
will be done and if the driver realizes that all features have the same SRS, 
this will be written in the .gfs file, and thus reported as the SRS layer.
With some particular formulations of GML (like a WFS GetFeature response where 
we know that the SRS is homogenous), the driver will use the SRS of the top 
Envelope as the layer SRS.

> 
> A warning like "No explicit SRS found, use -s_srs and -t_srs" might be good
> to have.

Should be addressed by my latest commit:
"ES: add warnings at layer creation if no SRS is specified, and at feature 
insertion, in the case where no layer SRS is defined when the bounding box 
isn't valid for long/lat"

> 
> I know very little about Elastic Seaach, just started experiments a week
> ago. I have concluded that what is layer for GDAL is "index", and what is
> feature, is "document", and that documents are somehow saved as-is

That really depends. You may choose to store or not the _all fields or 
individual fields.

> and
> clever indexes are built on top of them. Therefore I was thinking that
> perhaps everything is OK on the ES side even if the documents come out from
> it with epsg:3067 geometries.

The spatial indices made assumption on the coordinates. For example a geohash 
really assumes the [-90,90]x[-180,180] range. Not sure how geo_shape indexing 
works.

> 
> -Jukka-
> 
> -Jukka-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gghiggini at gec-it.com  Tue Sep  1 10:25:41 2015
From: gghiggini at gec-it.com (Giorgio Ghiggini)
Date: Tue, 1 Sep 2015 19:25:41 +0200
Subject: [gdal-dev] gdal_polygonize.py not running
Message-ID: <000001d0e4db$3abfbf40$b03f3dc0$@com>

Hi,

 

I am using the GISInternals ?release-1800-x64-gdal-1-11-1-mapserver-6-4-1?
and I run the SDKShell.bat.

Then I tried running the gdal_polygonize.py as is and I got the following
message:

----------------------------------------------------------------------------
-----------------

C:\GEC\Software\GDAL\gisinternals>gdal_polygonize.py

"gdal_polygonize.py" non ? riconosciuto come comando interno o esterno,

 un programma eseguibile o un file batch.

----------------------------------------------------------------------------
-----------------

In Italian, that means ?command not recognized? so I thought the SDKShell is
not setting the path for this script.

 

I tried then running the command from the script folder as follow, but got
several errors:

----------------------------------------------------------------------------
-----------------

C:\GEC\Software\GDAL\gisinternals\bin\gdal\python\scripts>gdal_polygonize.py
C:\GEC\Data\Slopes\testgdaldem-combined.tif -f "ESRI Shapefile"
C:\GEC\Data\Slopes\testgdalpolygonize.shp

Traceback (most recent call last):

  File
"C:\GEC\Software\GDAL\gisinternals\bin\gdal\python\scripts\gdal_polygoniz

e.py", line 34, in <module>

    from osgeo import gdal, ogr, osr

  File
"C:\GEC\Software\GDAL\gisinternals\bin\gdal\python\osgeo\__init__.py", li

ne 21, in <module>

    _gdal = swig_import_helper()

  File
"C:\GEC\Software\GDAL\gisinternals\bin\gdal\python\osgeo\__init__.py", li

ne 17, in swig_import_helper

    _mod = imp.load_module('_gdal', fp, pathname, description)

  File "C:\Python34\lib\imp.py", line 243, in load_module

    return load_dynamic(name, filename, file)

ImportError: DLL load failed: Impossibile trovare il modulo specificato.

----------------------------------------------------------------------------
-----------------

 

 

To me it looks like the script is not able to load other external files
(gdal, ogr, osr
), so I still think it is a matter of PATH setting.

 

Any help is very much appreciated.

 

Best regards,

Giorgio

 

 

Giorgio Ghiggini

 

GEC di Ghiggini Giorgio

Via Monte Matanna 1/C

55049 Viareggio (LU)

Italy

P.Iva: 01381570116

cell.: +39 331 141 9315

email: gghiggini at gec-it.com

www.gec-it.com

 <http://www.globalterramaps.com/> www.globalterramaps.com

www.globalaquamaps.com <http://www.globalaquamaps.com/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150901/799bb82b/attachment.html>

From mohammedrashadkm at gmail.com  Tue Sep  1 11:07:54 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Tue, 1 Sep 2015 20:07:54 +0200
Subject: [gdal-dev] hdf5 dataset. Header data too long. Truncated
In-Reply-To: <201509011708.40002.even.rouault@spatialys.com>
References: <CANNqv9dZ8gzzkwqmyMwau+1XwaA8SZ=fQij_g=MXj5cajciErA@mail.gmail.com>
	<201509011708.40002.even.rouault@spatialys.com>
Message-ID: <CANNqv9dFPjtrgo2S_h=W4S+PY7o1oS2g+sKbZr6fqV9__2E8MA@mail.gmail.com>

On Tue, Sep 1, 2015 at 5:08 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 01 septembre 2015 16:50:32, Rashad M a ?crit :
> > Hello all,
> >
> > I have an the following warning from gdal when reading .h5 dataset
> >
> > Warning 2: Header data too long. Truncated.
> >
> > Looking at frmts/hdf5/hdf5dataset.cpp there is a define for
> > MAX_METADATA_LEN
> >
> > #define MAX_METADATA_LEN 32768
> >
> >
> > and there is a check
> >                 if( CPLStrlcat(szValue, szData, MAX_METADATA_LEN) >=
> >
> > MAX_METADATA_LEN )
> >                     CPLError( CE_Warning, CPLE_OutOfMemory,
> >                               "Header data too long. Truncated\n");
> >
>
> This was introduced in https://trac.osgeo.org/gdal/changeset/20438 to
> avoid
> crashes. Potentially it could be reworked to deal with arbitrary long
> metadata. Although it could be kind of annoying to have too long values as
> metadata item, especially in the main metadata domain. A cleaner solution
> would perhaps be have something like "MY_ITEM=<value removed because too
> large. query HDF5 metadata domain to get it>" and you'd have the full
> value in
> the HDF5 metadata domain (perhaps not unlimited but with a much higher
> limit,
> let's say 1 MB per item). People with more experience with HDF5 datasets
> could
> perhaps comment.
>

All of the truncated messages are coming when reading double. Here there is
 %.15g. Isn't that too much ?  Could it be reduced or change to simply %g
for double.?
https://trac.osgeo.org/gdal/browser/branches/1.11/gdal/frmts/hdf5/hdf5dataset.cpp#L800


>
> > Now I could update MAX_METADATA_LEN but is there a way it can set be set
> at
> > runtime ?
>
> No, you need to recompile.
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150901/93102429/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Sep  1 13:28:33 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Tue, 1 Sep 2015 20:28:33 +0000
Subject: [gdal-dev] SRS of the Elastic Search geometries?
In-Reply-To: <201509011923.47490.even.rouault@spatialys.com>
References: <loom.20150901T154448-250@post.gmane.org>
	<201509011626.11883.even.rouault@spatialys.com>
	<loom.20150901T182534-196@post.gmane.org>,
	<201509011923.47490.even.rouault@spatialys.com>
Message-ID: <1441139313766.45191@maanmittauslaitos.fi>

Even Rouault wrote:

>>
>> Probably that's it, the explicit SRS. I started with data that have native
>> SRS epsg:3067 and OpenJUMP JML format which has no means for holding SRS.
>> Conversion into ES gives always an empty layer, just the schema gets
>> inserted but no geometries, even is I use -s_srs and -t_srs.
>>
>> Next trial was to convert JML into GML without assigning SRS. GML has an
>> undefined SRS and conversion without -s_srs and -t_srs leads to a situation
>> where metadata sayes that ES is using epsg:4326 but the features are in
>> epsg:3067. With proper -s_srs and -t_srs the result is good.

> You can also use -a_srs for that.

I made a test and it appears to work but isn't is confusing because it makes a different effect than with most other drivers? Manual page http://www.gdal.org/ogr2ogr.html tells "-a_srs srs_def:     Assign an output SRS " . With Elastic Search if you use -a_srs epsg:3067 the output SRS will actually be epsg:4326. Let's keep this secret and teach the users always use explicit -s_srs  and t_srs.

>>
>> If I convert JML into GML and assign SRS with -a_srs epsg:3067 the result
>> is the same as above. Each GML feature has SRS defined as <gml:Polygon
>> srsName="EPSG:3067"> but perhaps it is not explicit because conversion
>> into ES gives correct result only when -s_srs and -t_srs are defined.
>
>> So, two problems:
>> - No way at all to use Jump JML as input format

> Are you sure about that ? I've just tried the following and it works:
I am sure that I made a wrong conclusion. The problem is related to JML but it is somehow special. I took the test data from a real world dataset but I attach a minimal sample JML file for reproducing the issue.

> $ ogr2ogr simple_EPSG_32631.jml simple_EPSG_32631.shp -f jml
| $ ogr2ogr  -update es: simple_EPSG_32631.jml -overwrite -s_srs EPSG:32631 -
t_srs EPSG:32631
(or with -a_srs EPSG:32631)

> The behaviour with JML and GML inputs should be the same.
My test data in JML format contains this DATETIME 
 <property name="JATTOPVM">2015-06-14T22:29:15.454+0300</property>

It leads to this ElasticSearch error which I took from the ES console:
Caused by: org.elasticsearch.index.mapper.MapperParsingException: failed to pars
e date field [2015/06/14 22:29:15.454+03], tried both date format [yyyy/MM/dd HH
:mm:ss.SSS||yyyy/MM/dd], and timestamp number with locale []

When I convert JML into GML with ogr2ogr the DATETIME comes into GML as
 <ogr:JATTOPVM>2015/06/14 22:29:15.454+03</ogr:JATTOPVM>
This is OK for Elastic Search. I do not see any difference but there must be some. JML failed for me because of this parsing error. ogr2ogr does not catch the error, not even when run with --debug on.


>> - With GML parameters -s_srs and -t_srs must be defined even if each GML
>> feature has srsName and all features in the GML file have same srsName.

> The issue with GML is complex. Basically, the GML driver is very cautious and
> doesn't report a layer SRS since there's no way to know if all features have
> the same SRS without exploring the whole file, which he will avoid if there's a
> .xsd that it can understand. If you remove the .xsd, then a full initial scan
> will be done and if the driver realizes that all features have the same SRS,
> this will be written in the .gfs file, and thus reported as the SRS layer.
> With some particular formulations of GML (like a WFS GetFeature response where
> we know that the SRS is homogenous), the driver will use the SRS of the top
> Envelope as the layer SRS.

>
>> A warning like "No explicit SRS found, use -s_srs and -t_srs" might be good
>> to have.

> Should be addressed by my latest commit:
> "ES: add warnings at layer creation if no SRS is specified, and at feature
> insertion, in the case where no layer SRS is defined when the bounding box
> isn't valid for long/lat"

>
>> I know very little about Elastic Seaach, just started experiments a week
>> ago. I have concluded that what is layer for GDAL is "index", and what is
>> feature, is "document", and that documents are somehow saved as-is

> That really depends. You may choose to store or not the _all fields or
> individual fields.

>> and
>> clever indexes are built on top of them. Therefore I was thinking that
>> perhaps everything is OK on the ES side even if the documents come out from
>> it with epsg:3067 geometries.

> The spatial indices made assumption on the coordinates. For example a geohash
> really assumes the [-90,90]x[-180,180] range. Not sure how geo_shape indexing
> works.

-Jukka-
-------------- next part --------------
A non-text attachment was scrubbed...
Name: date_error.jml
Type: application/octet-stream
Size: 2489 bytes
Desc: date_error.jml
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150901/4f293b9e/attachment.obj>

From ari.jolma at gmail.com  Tue Sep  1 14:00:37 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 2 Sep 2015 00:00:37 +0300
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201509011534.32883.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<CA+YzLBeF9LyVbAFvRhQwXup+e6qKqizZqNaN5_BjAn2kjfjJ+g@mail.gmail.com>
	<CAFLLRpLMP88Jcj_GVnCqcdJUCDp3RGOZ5whwHZ8ABtZcLFzW0Q@mail.gmail.com>
	<201509011534.32883.even.rouault@spatialys.com>
Message-ID: <55E611F5.30107@gmail.com>

On 01.09.2015 16:34, Even Rouault wrote:
> 2)  Variant of 1). With some Python magic on **kwargs it can be automated to redirect on 1)
> mem_ds = gdal.Translate('', src_ds, bands = [1,2,3], format = 'MEM', progress = my_progress_method)
>

> * Other binding languages.
>
>
> - Perl: apparently possible

Yes it is. Being a non-typed high level language it is possible and IMO 
preferable to be able to give the options in a key-value list (hash) 
where the keys are well known strings and the values are understandable. 
However, the C API need not do this but it should allow it.

Ari

>
>
> Opinions ?
>
> Even
>
>
>> Hi Frank,
>>
>> I was one of the original people who argued against the "array of strings"
>> approach...
>>
>> On 27 August 2015 at 02:26, Frank Warmerdam <warmerdam at pobox.com> wrote:
>>> I clearly should have been commenting sooner.
>> Several months ago :p
>>
>>> I am concerned that having messy structures of options for each
>>> program is going to complicate maintaining the actually commandline
>>> programs, and that it will still be a fragile and complicated point of
>>> entry as commandline arguments evolve over time.
>> The commandline tools eventually become string-parsing and wrapping of the
>> corresponding library tool - I'm not sure that makes it fragile &
>> complicated? Means that the library-ified apps are *at least as*
>> flexible/expressive/powerful
>> as the command-line tools.
>>
>>> I'd prefer if the approach had just been to embed the main()'s in a
>>> library and to still pass the exact same vector of arguments (in the
>>> char **argv format) to these functions instead of shelling out a
>>> program.
>> That kinda defeats the whole point - a huge array of complex string-ified
>> arguments is what we're all doing at the moment, wrapped in an subprocess
>> call. Some options take multiple arguments in multiple strings, others take
>> multiple arguments in single strings, it's massively confusing. And we all
>> have big pipelines of chained gdalwarp/gdal_translate/etc code...
>>
>> What we were striving for was to make it distinctly *better*:
>>
>>     - progress/logging/error handling
>>     - options that accept geometries or SRS or in-memory datasets without
>>     having to re-serialize them and/or utilise tempfiles
>>     - easily applying the same operations over multiple datasets
>>     - configuration option defaults
>>
>>> I would love to be able to replace many places where I shell out to
>>> run gdal command line programs with a library call with essentially
>>> the same arguments.
>> Sure, so it should be straightforward to do that *as well*, though besides
>> in-memory data (as you mention) you're getting very little benefit.
>>
>> Rob :)


From even.rouault at spatialys.com  Tue Sep  1 14:33:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Sep 2015 23:33:26 +0200
Subject: [gdal-dev] SRS of the Elastic Search geometries?
In-Reply-To: <1441139313766.45191@maanmittauslaitos.fi>
References: <loom.20150901T154448-250@post.gmane.org>
	<201509011923.47490.even.rouault@spatialys.com>
	<1441139313766.45191@maanmittauslaitos.fi>
Message-ID: <201509012333.26528.even.rouault@spatialys.com>

> I made a test and it appears to work but isn't is confusing because it
> makes a different effect than with most other drivers? Manual page
> http://www.gdal.org/ogr2ogr.html tells "-a_srs srs_def:     Assign an
> output SRS " . With Elastic Search if you use -a_srs epsg:3067 the output
> SRS will actually be epsg:4326. Let's keep this secret and teach the users
> always use explicit -s_srs  and t_srs.

Well, it assigns the SRS before the driver enter into action. Drivers tend to 
do nasty things due to format constraints ;-) But yes, that's a particular 
case.

> 
> My test data in JML format contains this DATETIME
>  <property name="JATTOPVM">2015-06-14T22:29:15.454+0300</property>
> 
> It leads to this ElasticSearch error which I took from the ES console:
> Caused by: org.elasticsearch.index.mapper.MapperParsingException: failed to
> pars e date field [2015/06/14 22:29:15.454+03], tried both date format
> [yyyy/MM/dd HH
> 
> :mm:ss.SSS||yyyy/MM/dd], and timestamp number with locale []

OK there was indeed an issue with the declared format not allowing timezones. 
Just fixed.

> 
> When I convert JML into GML with ogr2ogr the DATETIME comes into GML as
>  <ogr:JATTOPVM>2015/06/14 22:29:15.454+03</ogr:JATTOPVM>
> This is OK for Elastic Search. I do not see any difference but there must
> be some. 

Yes, the GML driver does not support yet properly DateTime fields. So they are 
converted just as string...

> JML failed for me because of this parsing error. ogr2ogr does not
> catch the error, not even when run with --debug on.

Indeed the bulk uploading code didn't detect errors reported by the server. 
Now errors are reported back.

Thanks for your testing and reports !

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Sep  2 00:52:24 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Sep 2015 09:52:24 +0200
Subject: [gdal-dev] Fwd: Re: [OGC Portal] OGC Compliance Renewal
	Notification (Final Expiration Notice)
Message-ID: <201509020952.25051.even.rouault@spatialys.com>

Hi,

Is someone interested in doing the renewing the OGC KML 2.2 compliance status 
for GDAL ?
As far as I remember, this should be a matter of running 
kml_generate_test_files.py at the root of the autotest suite, putting the files 
generated by the script on a publicly accessible URL, feeding it to the online 
online OGC KML test suite, and doing the necessary form filling on the OGC 
website.

Even

----------  Message transmis  ----------

Sujet : Re: [OGC Portal] OGC Compliance Renewal Notification (Final Expiration 
Notice)
Date : mercredi 02 septembre 2015, 06:12:45
De : Frank Warmerdam <warmerdam at pobox.com>
? : Even Rouault <even.rouault at spatialys.com>
CC : OSGeo <info at osgeo.org>

Even,

Is this something we want to renew or followup on?

Best regards,
Frank


On Tue, Sep 1, 2015 at 9:03 PM, Barbara Sherman <bsherman at opengeospatial.org
> wrote:

> Open Source Geospatial Foundation*! Your Compliance Records Expire Today
> !*
>
> This is an automated email to inform you that your OGC-certified
> compliance license(s) for the following products are due to be renewed by 
*September
> 2nd, 2015*. After that date your products will no longer be listed as
> certified OGC compliant.
>
> If you have already received an earlier notice and have started the
> renewal process please ignore this message.
>
> We invite you to easily renew online in our implementation portal:
> http://www.opengeospatial.org/resource/products/registration
>
> As a reminder, the account used to manage your certification listings is: 
*osgeo
> (info at osgeo.org <info at osgeo.org>)*
>
> Link to current public listings: Compliant Only
> 
<http://www.opengeospatial.org/resource/products/compliant?org_match=Open+Source+Geospatial+Foundation>
> | Compliant or Implementing
> 
<http://www.opengeospatial.org/resource/products/?org_match=Open+Source+Geospatial+Foundation>
> .
>
> If you have any questions please send an email to
> compliance at opengeospatial.org. The OGC compliance team will be more than
> glad to help you.
> ------------------------------
> Current OGC-Compliant ListingsGDAL/OGR 1.11Specification(s)Original
> Certification OGC KML 2.2.0
> (OGC Reference Implementation)2014-08-15 OGC KML (Level 2) 2.2.0
> (OGC Reference Implementation)2014-08-15 OGC KML (Level 3) 2.2.0
> (OGC Reference Implementation)2014-08-15
> MapServer 6.2Specification(s)Original Certification OGC? WCS 2.0
> Interface Standard- Core: Corrigendum 2.0.1
> (OGC Reference Implementation)2014-09-03
>
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer

-------------------------------------------------------
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aperi2007 at gmail.com  Wed Sep  2 11:08:47 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Wed, 2 Sep 2015 20:08:47 +0200
Subject: [gdal-dev] Statistics min/max results are differents from histogram
	min/max results
Message-ID: <CABqTJk_d5C3t02j_+HWTHwbF=Ey66rvhu6FzGrC_Ms-et1FgnA@mail.gmail.com>

Hi,

I see the minimum and maximum retrieved using the gdalinfo -stas comand
are quite different from the same minimum and maximum retireved using
the API python function "GetDefaultHistogram" ?

Is right this ?

Thx.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From even.rouault at spatialys.com  Wed Sep  2 11:24:06 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 2 Sep 2015 20:24:06 +0200
Subject: [gdal-dev] Statistics min/max results are differents from
	histogram min/max results
In-Reply-To: <CABqTJk_d5C3t02j_+HWTHwbF=Ey66rvhu6FzGrC_Ms-et1FgnA@mail.gmail.com>
References: <CABqTJk_d5C3t02j_+HWTHwbF=Ey66rvhu6FzGrC_Ms-et1FgnA@mail.gmail.com>
Message-ID: <201509022024.06644.even.rouault@spatialys.com>

Le mercredi 02 septembre 2015 20:08:47, Andrea Peri a ?crit :
> Hi,
> 
> I see the minimum and maximum retrieved using the gdalinfo -stas comand
> are quite different from the same minimum and maximum retireved using
> the API python function "GetDefaultHistogram" ?

Andrea,

The min and max values returned by GetDefaultHistogram() aren't necessarily 
the min and max values of the pixel values of the raster, but of the selected 
bounds for the buckets of the histogram.

 * @param pdfMin pointer to double value that will contain the lower bound of 
the histogram.
 * @param pdfMax pointer to double value that will contain the upper bound of 
the histogram.

In the case of a Byte raster, those bounds are hardcoded to be -0.5 and 255.5. 
This is a speed optimization, as in the general case, for other datatypes, the 
actual min & max values from statistics will be first computed, and then the 
histogram.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From aperi2007 at gmail.com  Wed Sep  2 23:56:12 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 3 Sep 2015 08:56:12 +0200
Subject: [gdal-dev] Statistics min/max results are differents from
 histogram min/max results
In-Reply-To: <201509022024.06644.even.rouault@spatialys.com>
References: <CABqTJk_d5C3t02j_+HWTHwbF=Ey66rvhu6FzGrC_Ms-et1FgnA@mail.gmail.com>
	<201509022024.06644.even.rouault@spatialys.com>
Message-ID: <CABqTJk-7gGiTgA8nip10709fPYdHTBJERAV7vKYpQRvT12sqqg@mail.gmail.com>

Hi Even , thx for explanations.
So its all ok.

A.



2015-09-02 20:24 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Le mercredi 02 septembre 2015 20:08:47, Andrea Peri a ?crit :
>> Hi,
>>
>> I see the minimum and maximum retrieved using the gdalinfo -stas comand
>> are quite different from the same minimum and maximum retireved using
>> the API python function "GetDefaultHistogram" ?
>
> Andrea,
>
> The min and max values returned by GetDefaultHistogram() aren't necessarily
> the min and max values of the pixel values of the raster, but of the selected
> bounds for the buckets of the histogram.
>
>  * @param pdfMin pointer to double value that will contain the lower bound of
> the histogram.
>  * @param pdfMax pointer to double value that will contain the upper bound of
> the histogram.
>
> In the case of a Byte raster, those bounds are hardcoded to be -0.5 and 255.5.
> This is a speed optimization, as in the general case, for other datatypes, the
> actual min & max values from statistics will be first computed, and then the
> histogram.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com



-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From aperi2007 at gmail.com  Thu Sep  3 00:03:29 2015
From: aperi2007 at gmail.com (Andrea Peri)
Date: Thu, 3 Sep 2015 09:03:29 +0200
Subject: [gdal-dev] The histogram results from a vrt datsource when the
 rasters are partially overlapped
Message-ID: <CABqTJk9W40HQdHe19iSQwH1du_cH2MB-FZXw7EkROcVS+G3JSA@mail.gmail.com>

Hi,
I have a VRT datasource, with more raster inside.
Each raster is partially overlapped to the two near rasters.

My dubt is how the histogram retrieved using the API GetDefaultHistogram,
is counting the overlapping.

Infact the overlapping portin is more NULL values, but also there is
portion f informations.

Is in a pixel overlapped there is a NULL from frame1 and a VALUE from frame2.
I could guess the Histogram ignore the NULL from frame1 and count only
the VALUE from frame2.

But when the frame1 and frame2 give the differents values: VALUE1 and
VALUE2. In this case what is the value counted in the histogram ?

It count the top level raster only, the first raster only, use a mean
of both or count both duplicating so the number of cell in the results
?

Thx.

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------

From stefan.ziegler.de at gmail.com  Thu Sep  3 00:26:47 2015
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Thu, 3 Sep 2015 09:26:47 +0200
Subject: [gdal-dev] gdalwarp different results (vrt vs direct)
Message-ID: <CAJvo+1-FLcezyFDO8yNWvWbvb4+2b1Foj5BJvjWG48+P12MDKw@mail.gmail.com>

Hi

We have a lot of aerial images. Each image has a size of 8000x8000 pixels
and the resolution is 12.5cm/pixel (-> 1 sqkm). They form a mosaic w/o any
gaps and overlaps. For transforming them into a new reference frame I'm
creating an vrt first and then using gdalwarp for the transformation (in a
for-loop). With this approach we can force the resulting images to have
bounding boxes with "nice" coordinates:

gdalwarp -s_srs "+proj=somerc +lat_0=46.952405555555555N
+lon_0=7.439583333333333E +ellps=bessel +x_0=600000 +y_0=200000
+towgs84=674.374,15.056,405.346 +units=m +units=m +k_0=1
+nadgrids=./chenyx06a.gsb" -t_srs "+proj=somerc +lat_0=46.952405555555555N
+lon_0=7.439583333333333E +ellps=bessel +x_0=2600000 +y_0=1200000
+towgs84=674.374,15.056,405.346 +units=m +k_0=1 +nadgrids=@null" -tr 0.125
0.125 -te 2611000 1233000 2612000 1234000 -co 'TILED=YES'  ortho2014.vrt
output.tif

The resulting image does have some strange artefacts, similar to a breaking
edge almost vertically through the whole image [1].

When using gdalwarp with the same -s_srs and -t_srs parameters for a single
image there is no breaking edge [2].

Any ideas what's going on?

I'm using gdal 1.11.

[1]: http://www.catais.org/tmp/gdalwarp_vrt.jpeg
[2]: http://www.catais.org/tmp/gdalwarp_direct.jpeg

best regards
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150903/30a1b6b8/attachment.html>

From even.rouault at spatialys.com  Thu Sep  3 01:27:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 10:27:21 +0200
Subject: [gdal-dev] The histogram results from a vrt datsource when the
	rasters are partially overlapped
In-Reply-To: <CABqTJk9W40HQdHe19iSQwH1du_cH2MB-FZXw7EkROcVS+G3JSA@mail.gmail.com>
References: <CABqTJk9W40HQdHe19iSQwH1du_cH2MB-FZXw7EkROcVS+G3JSA@mail.gmail.com>
Message-ID: <201509031027.21981.even.rouault@spatialys.com>

Le jeudi 03 septembre 2015 09:03:29, Andrea Peri a ?crit :
> Hi,
> I have a VRT datasource, with more raster inside.
> Each raster is partially overlapped to the two near rasters.
> 
> My dubt is how the histogram retrieved using the API GetDefaultHistogram,
> is counting the overlapping.
> 
> Infact the overlapping portin is more NULL values, but also there is
> portion f informations.
> 
> Is in a pixel overlapped there is a NULL from frame1 and a VALUE from
> frame2. I could guess the Histogram ignore the NULL from frame1 and count
> only the VALUE from frame2.
> 
> But when the frame1 and frame2 give the differents values: VALUE1 and
> VALUE2. In this case what is the value counted in the histogram ?
> 
> It count the top level raster only, the first raster only, use a mean
> of both or count both duplicating so the number of cell in the results
> ?

Andrea,

Hopefully (and that's what the existing code is supposed to do), the histogram 
reported on the VRT should be the same as the one you would get on a GeoTIFF 
that would result from the conversion of the VRT. Said other wise, it should 
be the histogram of what is displayed.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Sep  3 01:58:20 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 10:58:20 +0200
Subject: [gdal-dev] gdalwarp different results (vrt vs direct)
In-Reply-To: <CAJvo+1-FLcezyFDO8yNWvWbvb4+2b1Foj5BJvjWG48+P12MDKw@mail.gmail.com>
References: <CAJvo+1-FLcezyFDO8yNWvWbvb4+2b1Foj5BJvjWG48+P12MDKw@mail.gmail.com>
Message-ID: <201509031058.20622.even.rouault@spatialys.com>

Stefan,

> We have a lot of aerial images. Each image has a size of 8000x8000 pixels
> and the resolution is 12.5cm/pixel (-> 1 sqkm). They form a mosaic w/o any
> gaps and overlaps. For transforming them into a new reference frame I'm
> creating an vrt first and then using gdalwarp for the transformation (in a
> for-loop). With this approach we can force the resulting images to have
> bounding boxes with "nice" coordinates:
> 
> gdalwarp -s_srs "+proj=somerc +lat_0=46.952405555555555N
> +lon_0=7.439583333333333E +ellps=bessel +x_0=600000 +y_0=200000
> +towgs84=674.374,15.056,405.346 +units=m +units=m +k_0=1
> +nadgrids=./chenyx06a.gsb" -t_srs "+proj=somerc +lat_0=46.952405555555555N
> +lon_0=7.439583333333333E +ellps=bessel +x_0=2600000 +y_0=1200000
> +towgs84=674.374,15.056,405.346 +units=m +k_0=1 +nadgrids=@null" -tr 0.125
> 0.125 -te 2611000 1233000 2612000 1234000 -co 'TILED=YES'  ortho2014.vrt
> output.tif

Side remark: if you specify both +towgs84 and +nadgrids in the same SRS 
definition, the +towgs84 will be ignored by proj.4 (the grid is supposed to 
contain all transformation shifts from/to WGS84), so you can just remove it.

> 
> The resulting image does have some strange artefacts, similar to a breaking
> edge almost vertically through the whole image [1].

This occurs in the middle of a source tile, or at the boundary between 2 tiles 
?

> 
> When using gdalwarp with the same -s_srs and -t_srs parameters for a single
> image there is no breaking edge [2].

Just to be sure: you mean you are using the above -s_srs and -t_srs on one of 
the tile that makes the ortho2014.vrt ?
And what if you make a VRT with just that source image ?

On that tile, did you try "gdal_translate ortho2014.vrt out.tif -projwin ULX 
ULY LRX LRY" where ULX,YLY,LRX,LRY are the exact bounds of the tile, and check 
that out.tif perfectly overlaps on top of the source tile ? There could be 
perhaps some rounding error in the way the placement of the source tile is 
made in the VRT.

> 
> Any ideas what's going on?

Not really. Having a way to reproduce would be interesting.

Hum, perhaps try adding -et 0 to your gdalwarp command line, but I fail to see 
why this would make a difference between a VRT or TIFF source.

> 
> I'm using gdal 1.11.

Any chance you can try with 2.0 or the dev version ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Thu Sep  3 03:49:30 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 3 Sep 2015 10:49:30 +0000 (UTC)
Subject: [gdal-dev] Store also native geometry into Elastic Search?
Message-ID: <loom.20150903T123025-504@post.gmane.org>

Hi,

What if somebody would like to put and deliver some official spatial data
(cadastral data) which are not in EPSG:4326 with Elastic Search? Could it be
possible to translate the geometries into EPSG:4326 and store and index them
as geo_shape, but also keep the native geometries and save them into another
field? Perhaps json does not like to have many geometry fields but how about
saving the native geometry as WKT? Indexing WKT field feels stupid but maybe
ES could be mapped to skip it. Reasoning is that conversion from native to
EPSG:4326 and back to native is not necessary accurate and coordinates may
change a bit.

Am I even right that the conversion into EPSG:4326 is necessary for using
the geo_shape query?

-Jukka Rahkonen-




From even.rouault at spatialys.com  Thu Sep  3 04:42:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 13:42:32 +0200
Subject: [gdal-dev] Store also native geometry into Elastic Search?
In-Reply-To: <loom.20150903T123025-504@post.gmane.org>
References: <loom.20150903T123025-504@post.gmane.org>
Message-ID: <201509031342.32891.even.rouault@spatialys.com>

Le jeudi 03 septembre 2015 12:49:30, Jukka Rahkonen a ?crit :
> Hi,
> 
> What if somebody would like to put and deliver some official spatial data
> (cadastral data) which are not in EPSG:4326 with Elastic Search? Could it
> be possible to translate the geometries into EPSG:4326 and store and index
> them as geo_shape, but also keep the native geometries and save them into
> another field? Perhaps json does not like to have many geometry fields but
> how about saving the native geometry as WKT? Indexing WKT field feels
> stupid but maybe ES could be mapped to skip it. Reasoning is that
> conversion from native to EPSG:4326 and back to native is not necessary
> accurate and coordinates may change a bit.

Jukka (and little question for you Adam if you read this),

Well, you can do that with a Spatialite SQL query like :

-sql "select *, ST_AsText(geometry) as WKT_32631 from simple_EPSG_32631" -dialect sqlite

As far as not indexing the WKT_32631 field, you would need to:
1) export the default mapping with -lco WRITE_MAPPING=mapping.json
2) add "index":"no" to the WKT_32631 definition (https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-core-types.html)
3) run again with -lco MAPPING=mapping.json

Doing all the above steps in a fully automated way, perhaps with a dedicated PRESERVE_SRC_GEOMETRY
layer creation option, would certainly be possible, but personnaly, it's more in the
something-to-perhaps-consider-someday queue ;-)

Perhaps we would need a few creation options to alter more easily the mapping
of the created fields (rather than the above export/modify/import workflow). Not sure
at this point which ones would make sense, and if we aren't careful, there's a risk we end
up with something complicated that would be redundant with the JSon API.
I also see that the existing write-only driver creates a mapping that explicitely stores fields,
and as we don't disable storing the _source field, so apparently this wouldn't be necessary.
Hum, might be wise to remove the explicit "store": "yes"

@adam : do you remind the reason for adding "store": "yes" in the generated ES mapping ?

> 
> Am I even right that the conversion into EPSG:4326 is necessary for using
> the geo_shape query?

That's my understanding of https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-geo-shape-type.html
"In GeoJSON, and therefore Elasticsearch, the correct coordinate order is longitude, latitude (X, Y) within coordinate arrays"

Actually I've just tried to manually insert with invalidate lon,lat and the behaviour is
hard to decypher:

e.g

curl -d '{  "geometry": { "type": "linestring", "coordinates": [ [ 800.0, 0.0 ], [ 3.0, 50.0 ] ] } }' "http://localhost:9200/test/FeatureCollection?pretty"

works,

but

curl -d '{  "geometry": { "type": "linestring", "coordinates": [ [ 1000.0, 0.0 ], [ 3.0, 50.0 ] ] } }' "http://localhost:9200/test/FeatureCollection?pretty"

throws an error:
"MapperParsingException[failed to parse [geometry]]; nested: IllegalArgumentException[This method does not support GeometryCollection arguments]; "

And I assume that any spherical geospatial search will behave in undefined ways if you insert
coordinates that are not (lon,lat)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From estrada.adam at gmail.com  Thu Sep  3 05:47:16 2015
From: estrada.adam at gmail.com (Adam Estrada)
Date: Thu, 3 Sep 2015 08:47:16 -0400
Subject: [gdal-dev] Store also native geometry into Elastic Search?
In-Reply-To: <201509031342.32891.even.rouault@spatialys.com>
References: <loom.20150903T123025-504@post.gmane.org>
	<201509031342.32891.even.rouault@spatialys.com>
Message-ID: <CAA-HW2qMjA1MXsHaQNBc3nsnY0zumcE9DmoE2kGgZKJiQP1m2A@mail.gmail.com>

Even,

I think the reason to store everything by default was just to be on
the safe side and it satisfied some of the project requirements at the
time. That was back in 2011 so ElasticSearch and this driver are
probably not in sync any longer. There is a lot of work that can be
done to the driver to get up to date with all the cool stuff that is
now available in ES. I'd be interested in starting a roadmap
specifically for the ES driver starting with a read capability and the
ability to store other geometry types.

Adam


On Thu, Sep 3, 2015 at 7:42 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> Le jeudi 03 septembre 2015 12:49:30, Jukka Rahkonen a ?crit :
>> Hi,
>>
>> What if somebody would like to put and deliver some official spatial data
>> (cadastral data) which are not in EPSG:4326 with Elastic Search? Could it
>> be possible to translate the geometries into EPSG:4326 and store and index
>> them as geo_shape, but also keep the native geometries and save them into
>> another field? Perhaps json does not like to have many geometry fields but
>> how about saving the native geometry as WKT? Indexing WKT field feels
>> stupid but maybe ES could be mapped to skip it. Reasoning is that
>> conversion from native to EPSG:4326 and back to native is not necessary
>> accurate and coordinates may change a bit.
>
> Jukka (and little question for you Adam if you read this),
>
> Well, you can do that with a Spatialite SQL query like :
>
> -sql "select *, ST_AsText(geometry) as WKT_32631 from simple_EPSG_32631" -dialect sqlite
>
> As far as not indexing the WKT_32631 field, you would need to:
> 1) export the default mapping with -lco WRITE_MAPPING=mapping.json
> 2) add "index":"no" to the WKT_32631 definition (https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-core-types.html)
> 3) run again with -lco MAPPING=mapping.json
>
> Doing all the above steps in a fully automated way, perhaps with a dedicated PRESERVE_SRC_GEOMETRY
> layer creation option, would certainly be possible, but personnaly, it's more in the
> something-to-perhaps-consider-someday queue ;-)
>
> Perhaps we would need a few creation options to alter more easily the mapping
> of the created fields (rather than the above export/modify/import workflow). Not sure
> at this point which ones would make sense, and if we aren't careful, there's a risk we end
> up with something complicated that would be redundant with the JSon API.
> I also see that the existing write-only driver creates a mapping that explicitely stores fields,
> and as we don't disable storing the _source field, so apparently this wouldn't be necessary.
> Hum, might be wise to remove the explicit "store": "yes"
>
> @adam : do you remind the reason for adding "store": "yes" in the generated ES mapping ?
>
>>
>> Am I even right that the conversion into EPSG:4326 is necessary for using
>> the geo_shape query?
>
> That's my understanding of https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-geo-shape-type.html
> "In GeoJSON, and therefore Elasticsearch, the correct coordinate order is longitude, latitude (X, Y) within coordinate arrays"
>
> Actually I've just tried to manually insert with invalidate lon,lat and the behaviour is
> hard to decypher:
>
> e.g
>
> curl -d '{  "geometry": { "type": "linestring", "coordinates": [ [ 800.0, 0.0 ], [ 3.0, 50.0 ] ] } }' "http://localhost:9200/test/FeatureCollection?pretty"
>
> works,
>
> but
>
> curl -d '{  "geometry": { "type": "linestring", "coordinates": [ [ 1000.0, 0.0 ], [ 3.0, 50.0 ] ] } }' "http://localhost:9200/test/FeatureCollection?pretty"
>
> throws an error:
> "MapperParsingException[failed to parse [geometry]]; nested: IllegalArgumentException[This method does not support GeometryCollection arguments]; "
>
> And I assume that any spherical geospatial search will behave in undefined ways if you insert
> coordinates that are not (lon,lat)
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Thu Sep  3 05:52:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 14:52:21 +0200
Subject: [gdal-dev] Store also native geometry into Elastic Search?
In-Reply-To: <CAA-HW2qMjA1MXsHaQNBc3nsnY0zumcE9DmoE2kGgZKJiQP1m2A@mail.gmail.com>
References: <loom.20150903T123025-504@post.gmane.org>
	<201509031342.32891.even.rouault@spatialys.com>
	<CAA-HW2qMjA1MXsHaQNBc3nsnY0zumcE9DmoE2kGgZKJiQP1m2A@mail.gmail.com>
Message-ID: <201509031452.21783.even.rouault@spatialys.com>

Le jeudi 03 septembre 2015 14:47:16, Adam Estrada a ?crit :
> Even,
> 
> I think the reason to store everything by default was just to be on
> the safe side and it satisfied some of the project requirements at the
> time. That was back in 2011 so ElasticSearch and this driver are
> probably not in sync any longer.

OK, do you remember which ES version was targetted at that time ? So I can 
potentially be able to find in the doc the behaviour and see if it has changed.

> There is a lot of work that can be
> done to the driver to get up to date with all the cool stuff that is
> now available in ES. I'd be interested in starting a roadmap
> specifically for the ES driver starting with a read capability and the
> ability to store other geometry types.

Actually, you should have a look at the recent additions at
http://gdal.org/drv_elasticsearch.html ;-)

> 
> Adam
> 
> On Thu, Sep 3, 2015 at 7:42 AM, Even Rouault <even.rouault at spatialys.com> 
wrote:
> > Le jeudi 03 septembre 2015 12:49:30, Jukka Rahkonen a ?crit :
> >> Hi,
> >> 
> >> What if somebody would like to put and deliver some official spatial
> >> data (cadastral data) which are not in EPSG:4326 with Elastic Search?
> >> Could it be possible to translate the geometries into EPSG:4326 and
> >> store and index them as geo_shape, but also keep the native geometries
> >> and save them into another field? Perhaps json does not like to have
> >> many geometry fields but how about saving the native geometry as WKT?
> >> Indexing WKT field feels stupid but maybe ES could be mapped to skip
> >> it. Reasoning is that conversion from native to EPSG:4326 and back to
> >> native is not necessary accurate and coordinates may change a bit.
> > 
> > Jukka (and little question for you Adam if you read this),
> > 
> > Well, you can do that with a Spatialite SQL query like :
> > 
> > -sql "select *, ST_AsText(geometry) as WKT_32631 from simple_EPSG_32631"
> > -dialect sqlite
> > 
> > As far as not indexing the WKT_32631 field, you would need to:
> > 1) export the default mapping with -lco WRITE_MAPPING=mapping.json
> > 2) add "index":"no" to the WKT_32631 definition
> > (https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping
> > -core-types.html) 3) run again with -lco MAPPING=mapping.json
> > 
> > Doing all the above steps in a fully automated way, perhaps with a
> > dedicated PRESERVE_SRC_GEOMETRY layer creation option, would certainly
> > be possible, but personnaly, it's more in the
> > something-to-perhaps-consider-someday queue ;-)
> > 
> > Perhaps we would need a few creation options to alter more easily the
> > mapping of the created fields (rather than the above
> > export/modify/import workflow). Not sure at this point which ones would
> > make sense, and if we aren't careful, there's a risk we end up with
> > something complicated that would be redundant with the JSon API. I also
> > see that the existing write-only driver creates a mapping that
> > explicitely stores fields, and as we don't disable storing the _source
> > field, so apparently this wouldn't be necessary. Hum, might be wise to
> > remove the explicit "store": "yes"
> > 
> > @adam : do you remind the reason for adding "store": "yes" in the
> > generated ES mapping ?
> > 
> >> Am I even right that the conversion into EPSG:4326 is necessary for
> >> using the geo_shape query?
> > 
> > That's my understanding of
> > https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-
> > geo-shape-type.html "In GeoJSON, and therefore Elasticsearch, the correct
> > coordinate order is longitude, latitude (X, Y) within coordinate arrays"
> > 
> > Actually I've just tried to manually insert with invalidate lon,lat and
> > the behaviour is hard to decypher:
> > 
> > e.g
> > 
> > curl -d '{  "geometry": { "type": "linestring", "coordinates": [ [ 800.0,
> > 0.0 ], [ 3.0, 50.0 ] ] } }'
> > "http://localhost:9200/test/FeatureCollection?pretty"
> > 
> > works,
> > 
> > but
> > 
> > curl -d '{  "geometry": { "type": "linestring", "coordinates": [ [
> > 1000.0, 0.0 ], [ 3.0, 50.0 ] ] } }'
> > "http://localhost:9200/test/FeatureCollection?pretty"
> > 
> > throws an error:
> > "MapperParsingException[failed to parse [geometry]]; nested:
> > IllegalArgumentException[This method does not support GeometryCollection
> > arguments]; "
> > 
> > And I assume that any spherical geospatial search will behave in
> > undefined ways if you insert coordinates that are not (lon,lat)
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From estrada.adam at gmail.com  Thu Sep  3 06:04:13 2015
From: estrada.adam at gmail.com (Adam Estrada)
Date: Thu, 3 Sep 2015 09:04:13 -0400
Subject: [gdal-dev] Store also native geometry into Elastic Search?
In-Reply-To: <201509031452.21783.even.rouault@spatialys.com>
References: <loom.20150903T123025-504@post.gmane.org>
	<201509031342.32891.even.rouault@spatialys.com>
	<CAA-HW2qMjA1MXsHaQNBc3nsnY0zumcE9DmoE2kGgZKJiQP1m2A@mail.gmail.com>
	<201509031452.21783.even.rouault@spatialys.com>
Message-ID: <CAA-HW2qX=hyEK7DWSEag0n4V-UGgm5VtSs995Bsgj4GBMV3UCg@mail.gmail.com>

Even,

This would have been around version 0.16.x. Not really sure which one
exactly but I don't think any changes to the geometry support happened
until 2012-2013?

VERY cool about all the modifications you guys have made! This is very exciting!

http://gdal.org/drv_elasticsearch.html

Adam

On Thu, Sep 3, 2015 at 8:52 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> Le jeudi 03 septembre 2015 14:47:16, Adam Estrada a ?crit :
>> Even,
>>
>> I think the reason to store everything by default was just to be on
>> the safe side and it satisfied some of the project requirements at the
>> time. That was back in 2011 so ElasticSearch and this driver are
>> probably not in sync any longer.
>
> OK, do you remember which ES version was targetted at that time ? So I can
> potentially be able to find in the doc the behaviour and see if it has changed.
>
>> There is a lot of work that can be
>> done to the driver to get up to date with all the cool stuff that is
>> now available in ES. I'd be interested in starting a roadmap
>> specifically for the ES driver starting with a read capability and the
>> ability to store other geometry types.
>
> Actually, you should have a look at the recent additions at
> http://gdal.org/drv_elasticsearch.html ;-)
>
>>
>> Adam
>>
>> On Thu, Sep 3, 2015 at 7:42 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>> > Le jeudi 03 septembre 2015 12:49:30, Jukka Rahkonen a ?crit :
>> >> Hi,
>> >>
>> >> What if somebody would like to put and deliver some official spatial
>> >> data (cadastral data) which are not in EPSG:4326 with Elastic Search?
>> >> Could it be possible to translate the geometries into EPSG:4326 and
>> >> store and index them as geo_shape, but also keep the native geometries
>> >> and save them into another field? Perhaps json does not like to have
>> >> many geometry fields but how about saving the native geometry as WKT?
>> >> Indexing WKT field feels stupid but maybe ES could be mapped to skip
>> >> it. Reasoning is that conversion from native to EPSG:4326 and back to
>> >> native is not necessary accurate and coordinates may change a bit.
>> >
>> > Jukka (and little question for you Adam if you read this),
>> >
>> > Well, you can do that with a Spatialite SQL query like :
>> >
>> > -sql "select *, ST_AsText(geometry) as WKT_32631 from simple_EPSG_32631"
>> > -dialect sqlite
>> >
>> > As far as not indexing the WKT_32631 field, you would need to:
>> > 1) export the default mapping with -lco WRITE_MAPPING=mapping.json
>> > 2) add "index":"no" to the WKT_32631 definition
>> > (https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping
>> > -core-types.html) 3) run again with -lco MAPPING=mapping.json
>> >
>> > Doing all the above steps in a fully automated way, perhaps with a
>> > dedicated PRESERVE_SRC_GEOMETRY layer creation option, would certainly
>> > be possible, but personnaly, it's more in the
>> > something-to-perhaps-consider-someday queue ;-)
>> >
>> > Perhaps we would need a few creation options to alter more easily the
>> > mapping of the created fields (rather than the above
>> > export/modify/import workflow). Not sure at this point which ones would
>> > make sense, and if we aren't careful, there's a risk we end up with
>> > something complicated that would be redundant with the JSon API. I also
>> > see that the existing write-only driver creates a mapping that
>> > explicitely stores fields, and as we don't disable storing the _source
>> > field, so apparently this wouldn't be necessary. Hum, might be wise to
>> > remove the explicit "store": "yes"
>> >
>> > @adam : do you remind the reason for adding "store": "yes" in the
>> > generated ES mapping ?
>> >
>> >> Am I even right that the conversion into EPSG:4326 is necessary for
>> >> using the geo_shape query?
>> >
>> > That's my understanding of
>> > https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-
>> > geo-shape-type.html "In GeoJSON, and therefore Elasticsearch, the correct
>> > coordinate order is longitude, latitude (X, Y) within coordinate arrays"
>> >
>> > Actually I've just tried to manually insert with invalidate lon,lat and
>> > the behaviour is hard to decypher:
>> >
>> > e.g
>> >
>> > curl -d '{  "geometry": { "type": "linestring", "coordinates": [ [ 800.0,
>> > 0.0 ], [ 3.0, 50.0 ] ] } }'
>> > "http://localhost:9200/test/FeatureCollection?pretty"
>> >
>> > works,
>> >
>> > but
>> >
>> > curl -d '{  "geometry": { "type": "linestring", "coordinates": [ [
>> > 1000.0, 0.0 ], [ 3.0, 50.0 ] ] } }'
>> > "http://localhost:9200/test/FeatureCollection?pretty"
>> >
>> > throws an error:
>> > "MapperParsingException[failed to parse [geometry]]; nested:
>> > IllegalArgumentException[This method does not support GeometryCollection
>> > arguments]; "
>> >
>> > And I assume that any spherical geospatial search will behave in
>> > undefined ways if you insert coordinates that are not (lon,lat)
>> >
>> > Even
>> >
>> > --
>> > Spatialys - Geospatial professional services
>> > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Thu Sep  3 06:40:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 15:40:31 +0200
Subject: [gdal-dev] Store also native geometry into Elastic Search?
In-Reply-To: <CAA-HW2qX=hyEK7DWSEag0n4V-UGgm5VtSs995Bsgj4GBMV3UCg@mail.gmail.com>
References: <loom.20150903T123025-504@post.gmane.org>
	<201509031452.21783.even.rouault@spatialys.com>
	<CAA-HW2qX=hyEK7DWSEag0n4V-UGgm5VtSs995Bsgj4GBMV3UCg@mail.gmail.com>
Message-ID: <201509031540.31624.even.rouault@spatialys.com>

Le jeudi 03 septembre 2015 15:04:13, Adam Estrada a ?crit :
> Even,
> 
> This would have been around version 0.16.x. Not really sure which one
> exactly but I don't think any changes to the geometry support happened
> until 2012-2013?

Ah sorry, my fault for embedding you in a thread with a dedicated topic in its
title and my question being more general ;-) I was refering to storing regular fields.

I found this thread ( http://stackoverflow.com/questions/17103047/why-do-i-need-storeyes-in-elasticsearch )
where it is said that storing the field might be more performant in some cases
(avoid fetching the whole document and parse it), but in other cases not.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mohammedrashadkm at gmail.com  Thu Sep  3 07:58:34 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Thu, 3 Sep 2015 16:58:34 +0200
Subject: [gdal-dev] error parsing metadata from HDF5 dataset
Message-ID: <CANNqv9eFNgacSMJMCUAH-VGdTd9W=W4KPf=ReecRJaJ5Y6AcmA@mail.gmail.com>

Hello all,

I have an problem when reading metadata information of HDF5 dataset. some
of the values are not parsed properly by GDAL. Below is the relevant part
of output from gdalinfo


....
  Azimuth_Processing_Number_of_Looks=
  Bits_per_Sample=
....

S01_B001_Azimuth_Ramp_Code=

<garbage values and newline chars>

....
....
 Sample_Format=INT
  Samples_per_Pixel=
  Satellite_Height=628440.5
  Satellite_ID=CSKS3
....


I had looked into frmts/hdf5/hdf5dataset.cpp and all of these metadata are
of type H5T_NATIVE_UCHAR.

https://trac.osgeo.org/gdal/browser/branches/1.11/gdal/frmts/hdf5/hdf5dataset.cpp#L728

changing format specifier from char( %c) to int(%d) solves the issue for
me. But is there a better fix for this?


OS: Fedora 20 x86_64
gdal branch: 1.11

svn info

Path: .
Working Copy Root Path: /home/mkanavat/sources/gdal_branch_1.11
URL: http://svn.osgeo.org/gdal/branches/1.11/gdal
Relative URL: ^/branches/1.11/gdal
Repository Root: http://svn.osgeo.org/gdal
Repository UUID: f0d54148-0727-0410-94bb-9a71ac55c965
Revision: 30007
Node Kind: directory
Schedule: normal
Last Changed Author: rouault
Last Changed Rev: 30005
Last Changed Date: 2015-09-01 10:17:50 +0200 (Tue, 01 Sep 2015)


-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150903/1dad5b39/attachment.html>

From even.rouault at spatialys.com  Thu Sep  3 08:13:11 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 17:13:11 +0200
Subject: [gdal-dev] error parsing metadata from HDF5 dataset
In-Reply-To: <CANNqv9eFNgacSMJMCUAH-VGdTd9W=W4KPf=ReecRJaJ5Y6AcmA@mail.gmail.com>
References: <CANNqv9eFNgacSMJMCUAH-VGdTd9W=W4KPf=ReecRJaJ5Y6AcmA@mail.gmail.com>
Message-ID: <201509031713.12138.even.rouault@spatialys.com>

Le jeudi 03 septembre 2015 16:58:34, Rashad M a ?crit :
> Hello all,
> 
> I have an problem when reading metadata information of HDF5 dataset. some
> of the values are not parsed properly by GDAL. Below is the relevant part
> of output from gdalinfo
> 
> 
> ....
>   Azimuth_Processing_Number_of_Looks=
>   Bits_per_Sample=
> ....
> 
> S01_B001_Azimuth_Ramp_Code=
> 
> <garbage values and newline chars>
> 
> ....
> ....
>  Sample_Format=INT
>   Samples_per_Pixel=
>   Satellite_Height=628440.5
>   Satellite_ID=CSKS3
> ....
> 
> 
> I had looked into frmts/hdf5/hdf5dataset.cpp and all of these metadata are
> of type H5T_NATIVE_UCHAR.
> 
> https://trac.osgeo.org/gdal/browser/branches/1.11/gdal/frmts/hdf5/hdf5datas
> et.cpp#L728
> 
> changing format specifier from char( %c) to int(%d) solves the issue for
> me. But is there a better fix for this?

That looks like a reasonable fix. And the cast should be a (unsigned char*).

%c should be used only for characters part of a string, but the string case is 
dealt before, so that must mean that those should be dealt as integer values. 
The _CHAR and _SCHAR above are also likely wrong.

Could you raise a ticket about that in Trac ?

> 
> 
> OS: Fedora 20 x86_64
> gdal branch: 1.11
> 
> svn info
> 
> Path: .
> Working Copy Root Path: /home/mkanavat/sources/gdal_branch_1.11
> URL: http://svn.osgeo.org/gdal/branches/1.11/gdal
> Relative URL: ^/branches/1.11/gdal
> Repository Root: http://svn.osgeo.org/gdal
> Repository UUID: f0d54148-0727-0410-94bb-9a71ac55c965
> Revision: 30007
> Node Kind: directory
> Schedule: normal
> Last Changed Author: rouault
> Last Changed Rev: 30005
> Last Changed Date: 2015-09-01 10:17:50 +0200 (Tue, 01 Sep 2015)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bertelli at chartasrl.eu  Thu Sep  3 08:17:58 2015
From: bertelli at chartasrl.eu (Carlo A. Bertelli (Charta s.r.l.))
Date: Thu, 3 Sep 2015 17:17:58 +0200
Subject: [gdal-dev] How to deal with IIP image via WMS minidriver?
Message-ID: <CALc8-VLVgSzL=tergaTMdCW9-ujyZ1DeutTHPNn6geOHx6PurA@mail.gmail.com>

Hello,

is there a way -- maybe using the WMS minidriver -- to open an IIP streamed
picture?
The online service is well documented (
http://iipimage.sourceforge.net/documentation/) but unfortunately it shows
that the protocol is not at all compliant with the WMTS or TMS or
Google/SlippyMap schemas, even if it shares some of the ideas behind them.
There is an also an implementation of a plugin for Leaflet that could help.
Would anyone give some advice on how to deal with this common raster map
source for historical maps?
c

-- 
--------------------------------------------------------------------------
Carlo A. Bertelli
   Charta servizi e sistemi per il territorio e la storia ambientale srl
          Dipendenze del palazzo Doria,
          vc. alla Chiesa della Maddalena 9/2 16124      Genova (Italy)
          tel./fax +39(0)10 2475439  +39 0108566195  gsm:+39 393 1590711
   e-mail: bertelli at chartasrl.eu      http://www.chartasrl.eu
--------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150903/01732bc7/attachment-0001.html>

From mohammedrashadkm at gmail.com  Thu Sep  3 08:33:03 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Thu, 3 Sep 2015 17:33:03 +0200
Subject: [gdal-dev] error parsing metadata from HDF5 dataset
In-Reply-To: <201509031713.12138.even.rouault@spatialys.com>
References: <CANNqv9eFNgacSMJMCUAH-VGdTd9W=W4KPf=ReecRJaJ5Y6AcmA@mail.gmail.com>
	<201509031713.12138.even.rouault@spatialys.com>
Message-ID: <CANNqv9ew5PW+VOyqvFjj06dP_xLJZ7kB+GjjfjDHjt4QACE+ug@mail.gmail.com>

Hello Even,

On Thu, Sep 3, 2015 at 5:13 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le jeudi 03 septembre 2015 16:58:34, Rashad M a ?crit :
> > Hello all,
> >
> > I have an problem when reading metadata information of HDF5 dataset. some
> > of the values are not parsed properly by GDAL. Below is the relevant part
> > of output from gdalinfo
> >
> >
> > ....
> >   Azimuth_Processing_Number_of_Looks=
> >   Bits_per_Sample=
> > ....
> >
> > S01_B001_Azimuth_Ramp_Code=
> >
> > <garbage values and newline chars>
> >
> > ....
> > ....
> >  Sample_Format=INT
> >   Samples_per_Pixel=
> >   Satellite_Height=628440.5
> >   Satellite_ID=CSKS3
> > ....
> >
> >
> > I had looked into frmts/hdf5/hdf5dataset.cpp and all of these metadata
> are
> > of type H5T_NATIVE_UCHAR.
> >
> >
> https://trac.osgeo.org/gdal/browser/branches/1.11/gdal/frmts/hdf5/hdf5datas
> > et.cpp#L728
> >
> > changing format specifier from char( %c) to int(%d) solves the issue for
> > me. But is there a better fix for this?
>
> That looks like a reasonable fix. And the cast should be a (unsigned
> char*).
>
> %c should be used only for characters part of a string, but the string
> case is
> dealt before, so that must mean that those should be dealt as integer
> values.
> The _CHAR and _SCHAR above are also likely wrong.
>
> Could you raise a ticket about that in Trac ?
>

Sure. The patch is for 1.11 branch. Should I generate the same for trunk
also?

As we are on the subject of metadata in hdf5 dataset,  there is  Header too
long. .. Truncated warning appearing when type is double which now has
format specifier as %.16g

using simply %g or %lg fixed the issue on my side. If okay, I will include
that too in the patch.

Thanks.

>
> >
> >
> > OS: Fedora 20 x86_64
> > gdal branch: 1.11
> >
> > svn info
> >
> > Path: .
> > Working Copy Root Path: /home/mkanavat/sources/gdal_branch_1.11
> > URL: http://svn.osgeo.org/gdal/branches/1.11/gdal
> > Relative URL: ^/branches/1.11/gdal
> > Repository Root: http://svn.osgeo.org/gdal
> > Repository UUID: f0d54148-0727-0410-94bb-9a71ac55c965
> > Revision: 30007
> > Node Kind: directory
> > Schedule: normal
> > Last Changed Author: rouault
> > Last Changed Rev: 30005
> > Last Changed Date: 2015-09-01 10:17:50 +0200 (Tue, 01 Sep 2015)
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150903/63a367f8/attachment.html>

From lucadeluge at gmail.com  Thu Sep  3 08:34:27 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 3 Sep 2015 17:34:27 +0200
Subject: [gdal-dev] problem with datatype in python
Message-ID: <CAK4m-3wcOuhqDVEa34mHcuT9UWrXagLgNNbk7t4O_prbh_W9mQ@mail.gmail.com>

Hi devs,

I'm trying to rasterize a vector layer and convert it to numpy array.
I'm using the gdal.RasterizeLayer function but I have problem to set
the right datatype. I would like to have UInt32 but I got every time
Byte, this is my code

target_ds = gdal.GetDriverByName('MEM').Create('', xcount, ycount,
gdal.GDT_UInt32)
target_ds.SetGeoTransform((fi.ulx, fi.geotransform[1], 0, fi.uly, 0,
fi.geotransform[5]))
shape_datasource = ogr.Open(invect)
shape_layer = shape_datasource.GetLayer()
# create for target raster the same projection as for the value raster
raster_srs = osr.SpatialReference()
raster_srs.ImportFromWkt(fi.s_fh.GetProjectionRef())
target_ds.SetProjection(raster_srs.ExportToWkt())
# rasterize zone polygon to raster
gdal.RasterizeLayer(target_ds, [1], shape_layer, None, None, [1],
['ATTRIBUTE=id', 'ALL_TOUCHED=TRUE'])
trees_indices = gdal_array.DatasetReadAsArray(target_ds)

This is the debug

(Pdb) trees_indices.max()
255
(Pdb) ba=target_ds.GetRasterBand(1)
(Pdb) ba.DataType
1

Have you any idea to solve this problem?

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From even.rouault at spatialys.com  Thu Sep  3 08:39:06 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 17:39:06 +0200
Subject: [gdal-dev] How to deal with IIP image via WMS minidriver?
In-Reply-To: <CALc8-VLVgSzL=tergaTMdCW9-ujyZ1DeutTHPNn6geOHx6PurA@mail.gmail.com>
References: <CALc8-VLVgSzL=tergaTMdCW9-ujyZ1DeutTHPNn6geOHx6PurA@mail.gmail.com>
Message-ID: <201509031739.06683.even.rouault@spatialys.com>

Le jeudi 03 septembre 2015 17:17:58, Carlo A. Bertelli (Charta s.r.l.) a ?crit 
:
> Hello,
> 
> is there a way -- maybe using the WMS minidriver -- to open an IIP streamed
> picture?
> The online service is well documented (
> http://iipimage.sourceforge.net/documentation/) but unfortunately it shows
> that the protocol is not at all compliant with the WMTS or TMS or
> Google/SlippyMap schemas, even if it shares some of the ideas behind them.
> There is an also an implementation of a plugin for Leaflet that could help.
> Would anyone give some advice on how to deal with this common raster map
> source for historical maps?

Carlo,

skimming quickly IIP doc, I see that the IIIF protocols could be what would be 
the most suited as a minidriver of the WMS driver. However I'm not sure if you 
could hijack an existing minidriver to do IIIF. I think a new development 
would be needed.

Best regards,

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Sep  3 08:41:03 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 17:41:03 +0200
Subject: [gdal-dev] error parsing metadata from HDF5 dataset
In-Reply-To: <CANNqv9ew5PW+VOyqvFjj06dP_xLJZ7kB+GjjfjDHjt4QACE+ug@mail.gmail.com>
References: <CANNqv9eFNgacSMJMCUAH-VGdTd9W=W4KPf=ReecRJaJ5Y6AcmA@mail.gmail.com>
	<201509031713.12138.even.rouault@spatialys.com>
	<CANNqv9ew5PW+VOyqvFjj06dP_xLJZ7kB+GjjfjDHjt4QACE+ug@mail.gmail.com>
Message-ID: <201509031741.03418.even.rouault@spatialys.com>

> Sure. The patch is for 1.11 branch. Should I generate the same for trunk
> also?

Yes please

> 
> As we are on the subject of metadata in hdf5 dataset,  there is  Header too
> long. .. Truncated warning appearing when type is double which now has
> format specifier as %.16g
> 
> using simply %g or %lg fixed the issue on my side. If okay, I will include
> that too in the patch.

Please do not include that in your patch. That's a different issue. I'm not 
sure %g or %lg is fine for all intended uses. Some use cases might potentially 
need very precise values.

> 
> Thanks.
> 
> > > OS: Fedora 20 x86_64
> > > gdal branch: 1.11
> > > 
> > > svn info
> > > 
> > > Path: .
> > > Working Copy Root Path: /home/mkanavat/sources/gdal_branch_1.11
> > > URL: http://svn.osgeo.org/gdal/branches/1.11/gdal
> > > Relative URL: ^/branches/1.11/gdal
> > > Repository Root: http://svn.osgeo.org/gdal
> > > Repository UUID: f0d54148-0727-0410-94bb-9a71ac55c965
> > > Revision: 30007
> > > Node Kind: directory
> > > Schedule: normal
> > > Last Changed Author: rouault
> > > Last Changed Rev: 30005
> > > Last Changed Date: 2015-09-01 10:17:50 +0200 (Tue, 01 Sep 2015)
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Sep  3 08:42:01 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Sep 2015 17:42:01 +0200
Subject: [gdal-dev] problem with datatype in python
In-Reply-To: <CAK4m-3wcOuhqDVEa34mHcuT9UWrXagLgNNbk7t4O_prbh_W9mQ@mail.gmail.com>
References: <CAK4m-3wcOuhqDVEa34mHcuT9UWrXagLgNNbk7t4O_prbh_W9mQ@mail.gmail.com>
Message-ID: <201509031742.01827.even.rouault@spatialys.com>

Le jeudi 03 septembre 2015 17:34:27, Luca Delucchi a ?crit :
> Hi devs,
> 
> I'm trying to rasterize a vector layer and convert it to numpy array.
> I'm using the gdal.RasterizeLayer function but I have problem to set
> the right datatype. I would like to have UInt32 but I got every time
> Byte, this is my code
> 
> target_ds = gdal.GetDriverByName('MEM').Create('', xcount, ycount,
> gdal.GDT_UInt32)

You should add ,1, between ycount and gdal.GDT_UInt32. This is the band count.

> target_ds.SetGeoTransform((fi.ulx, fi.geotransform[1], 0, fi.uly, 0,
> fi.geotransform[5]))
> shape_datasource = ogr.Open(invect)
> shape_layer = shape_datasource.GetLayer()
> # create for target raster the same projection as for the value raster
> raster_srs = osr.SpatialReference()
> raster_srs.ImportFromWkt(fi.s_fh.GetProjectionRef())
> target_ds.SetProjection(raster_srs.ExportToWkt())
> # rasterize zone polygon to raster
> gdal.RasterizeLayer(target_ds, [1], shape_layer, None, None, [1],
> ['ATTRIBUTE=id', 'ALL_TOUCHED=TRUE'])
> trees_indices = gdal_array.DatasetReadAsArray(target_ds)
> 
> This is the debug
> 
> (Pdb) trees_indices.max()
> 255
> (Pdb) ba=target_ds.GetRasterBand(1)
> (Pdb) ba.DataType
> 1
> 
> Have you any idea to solve this problem?

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From lucadeluge at gmail.com  Thu Sep  3 09:46:54 2015
From: lucadeluge at gmail.com (Luca Delucchi)
Date: Thu, 3 Sep 2015 18:46:54 +0200
Subject: [gdal-dev] problem with datatype in python
In-Reply-To: <201509031742.01827.even.rouault@spatialys.com>
References: <CAK4m-3wcOuhqDVEa34mHcuT9UWrXagLgNNbk7t4O_prbh_W9mQ@mail.gmail.com>
	<201509031742.01827.even.rouault@spatialys.com>
Message-ID: <CAK4m-3yfg=ddDYaktJjiD0GX1+-pm3qfKE1wOSX=hUT-jty+dw@mail.gmail.com>

On 3 September 2015 at 17:42, Even Rouault <even.rouault at spatialys.com> wrote:
> Le jeudi 03 septembre 2015 17:34:27, Luca Delucchi a ?crit :

>> target_ds = gdal.GetDriverByName('MEM').Create('', xcount, ycount,
>> gdal.GDT_UInt32)
>
> You should add ,1, between ycount and gdal.GDT_UInt32. This is the band count.
>

Thanks a lot, it solved my problem

-- 
ciao
Luca

http://gis.cri.fmach.it/delucchi/
www.lucadelu.org

From mohammedrashadkm at gmail.com  Thu Sep  3 12:09:48 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Thu, 3 Sep 2015 21:09:48 +0200
Subject: [gdal-dev] hdf5 dataset. Header data too long. Truncated
In-Reply-To: <CANNqv9dFPjtrgo2S_h=W4S+PY7o1oS2g+sKbZr6fqV9__2E8MA@mail.gmail.com>
References: <CANNqv9dZ8gzzkwqmyMwau+1XwaA8SZ=fQij_g=MXj5cajciErA@mail.gmail.com>
	<201509011708.40002.even.rouault@spatialys.com>
	<CANNqv9dFPjtrgo2S_h=W4S+PY7o1oS2g+sKbZr6fqV9__2E8MA@mail.gmail.com>
Message-ID: <CANNqv9dQKiAgO6CEnnK1RD3AN-sP8nmvChBMF=FvCn1vRG4GfQ@mail.gmail.com>

increasing the limit of MAX_METADATA_LEN is acceptable?

On Tue, Sep 1, 2015 at 8:07 PM, Rashad M <mohammedrashadkm at gmail.com> wrote:

>
>
> On Tue, Sep 1, 2015 at 5:08 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Le mardi 01 septembre 2015 16:50:32, Rashad M a ?crit :
>> > Hello all,
>> >
>> > I have an the following warning from gdal when reading .h5 dataset
>> >
>> > Warning 2: Header data too long. Truncated.
>> >
>> > Looking at frmts/hdf5/hdf5dataset.cpp there is a define for
>> > MAX_METADATA_LEN
>> >
>> > #define MAX_METADATA_LEN 32768
>> >
>> >
>> > and there is a check
>> >                 if( CPLStrlcat(szValue, szData, MAX_METADATA_LEN) >=
>> >
>> > MAX_METADATA_LEN )
>> >                     CPLError( CE_Warning, CPLE_OutOfMemory,
>> >                               "Header data too long. Truncated\n");
>> >
>>
>> This was introduced in https://trac.osgeo.org/gdal/changeset/20438 to
>> avoid
>> crashes. Potentially it could be reworked to deal with arbitrary long
>> metadata. Although it could be kind of annoying to have too long values as
>> metadata item, especially in the main metadata domain. A cleaner solution
>> would perhaps be have something like "MY_ITEM=<value removed because too
>> large. query HDF5 metadata domain to get it>" and you'd have the full
>> value in
>> the HDF5 metadata domain (perhaps not unlimited but with a much higher
>> limit,
>> let's say 1 MB per item). People with more experience with HDF5 datasets
>> could
>> perhaps comment.
>>
>
> All of the truncated messages are coming when reading double. Here there
> is  %.15g. Isn't that too much ?  Could it be reduced or change to simply
> %g for double.?
>
> https://trac.osgeo.org/gdal/browser/branches/1.11/gdal/frmts/hdf5/hdf5dataset.cpp#L800
>
>
>>
>> > Now I could update MAX_METADATA_LEN but is there a way it can set be
>> set at
>> > runtime ?
>>
>> No, you need to recompile.
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>>
>
>
>
> --
> Regards,
>    Rashad
>



-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150903/6c743118/attachment.html>

From mohammedrashadkm at gmail.com  Thu Sep  3 12:10:54 2015
From: mohammedrashadkm at gmail.com (Rashad M)
Date: Thu, 3 Sep 2015 21:10:54 +0200
Subject: [gdal-dev] error parsing metadata from HDF5 dataset
In-Reply-To: <201509031741.03418.even.rouault@spatialys.com>
References: <CANNqv9eFNgacSMJMCUAH-VGdTd9W=W4KPf=ReecRJaJ5Y6AcmA@mail.gmail.com>
	<201509031713.12138.even.rouault@spatialys.com>
	<CANNqv9ew5PW+VOyqvFjj06dP_xLJZ7kB+GjjfjDHjt4QACE+ug@mail.gmail.com>
	<201509031741.03418.even.rouault@spatialys.com>
Message-ID: <CANNqv9cotvmo0ct-XSW8bu06AS-wKzj511b897cnA_pTTyJS_Q@mail.gmail.com>

On Thu, Sep 3, 2015 at 5:41 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> > Sure. The patch is for 1.11 branch. Should I generate the same for trunk
> > also?
>
> Yes please
>
> >
> > As we are on the subject of metadata in hdf5 dataset,  there is  Header
> too
> > long. .. Truncated warning appearing when type is double which now has
> > format specifier as %.16g
> >
> > using simply %g or %lg fixed the issue on my side. If okay, I will
> include
> > that too in the patch.
>
> Please do not include that in your patch. That's a different issue. I'm not
> sure %g or %lg is fine for all intended uses. Some use cases might
> potentially
> need very precise values.
>

okay. I will remove that from this patch. and will ask further queries in
the other thread. :)

>
> >
> > Thanks.
> >
> > > > OS: Fedora 20 x86_64
> > > > gdal branch: 1.11
> > > >
> > > > svn info
> > > >
> > > > Path: .
> > > > Working Copy Root Path: /home/mkanavat/sources/gdal_branch_1.11
> > > > URL: http://svn.osgeo.org/gdal/branches/1.11/gdal
> > > > Relative URL: ^/branches/1.11/gdal
> > > > Repository Root: http://svn.osgeo.org/gdal
> > > > Repository UUID: f0d54148-0727-0410-94bb-9a71ac55c965
> > > > Revision: 30007
> > > > Node Kind: directory
> > > > Schedule: normal
> > > > Last Changed Author: rouault
> > > > Last Changed Rev: 30005
> > > > Last Changed Date: 2015-09-01 10:17:50 +0200 (Tue, 01 Sep 2015)
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Regards,
   Rashad
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150903/cf644f30/attachment.html>

From lukepinnerau at gmail.com  Thu Sep  3 16:30:05 2015
From: lukepinnerau at gmail.com (Luke)
Date: Thu, 3 Sep 2015 16:30:05 -0700 (PDT)
Subject: [gdal-dev] vector VRT: Warning 1: Line 2: Attribute value
 should be single or double quoted.
In-Reply-To: <1440612975809-5221290.post@n6.nabble.com>
References: <1440612975809-5221290.post@n6.nabble.com>
Message-ID: <1441323005095-5222599.post@n6.nabble.com>

VRT is an XML file, and to be valid XML all attribute values in the VRT need
to be quoted.

e.g <element_name attribute_name="attribute_value">

In your VRT, your  relativeToVRT attribute value is not quoted. Change 
<SrcDataSource relativeToVRT=1> to  <SrcDataSource relativeToVRT="1">

Luke



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/vector-VRT-Warning-1-Line-2-Attribute-value-should-be-single-or-double-quoted-tp5221290p5222599.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From hellik at web.de  Fri Sep  4 00:24:33 2015
From: hellik at web.de (Helmut Kudrnovsky)
Date: Fri, 4 Sep 2015 00:24:33 -0700 (PDT)
Subject: [gdal-dev] vector VRT: Warning 1: Line 2: Attribute value
 should be single or double quoted.
In-Reply-To: <1441323005095-5222599.post@n6.nabble.com>
References: <1440612975809-5221290.post@n6.nabble.com>
	<1441323005095-5222599.post@n6.nabble.com>
Message-ID: <1441351473882-5222631.post@n6.nabble.com>

Luke wrote
> VRT is an XML file, and to be valid XML all attribute values in the VRT
> need to be quoted.
> 
> e.g 
> <element_name attribute_name="attribute_value">
> In your VRT, your  relativeToVRT attribute value is not quoted. Change  
> <SrcDataSource relativeToVRT=1>
>  to  
> <SrcDataSource relativeToVRT="1">
> Luke

thanks for the hints ; it's working now. 



-----
best regards
Helmut
--
View this message in context: http://osgeo-org.1560.x6.nabble.com/vector-VRT-Warning-1-Line-2-Attribute-value-should-be-single-or-double-quoted-tp5221290p5222631.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gawade.oefp at gmail.com  Fri Sep  4 03:43:21 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Fri, 4 Sep 2015 16:13:21 +0530
Subject: [gdal-dev] Update of config files for gdal
Message-ID: <CAPS4ckoETinTc48rTeFpw3nOq5A74PNZr0ohCGvmW7ghdWdRPg@mail.gmail.com>

 Hi,

Can we consider updating the config.guess and config.sub files in the
source to the latest available version?

The current one does not have support for newer platforms like ppc64le.

Please let me know your thoughts.

Thanks!

From even.rouault at spatialys.com  Fri Sep  4 04:43:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Sep 2015 13:43:39 +0200
Subject: [gdal-dev] Update of config files for gdal
In-Reply-To: <CAPS4ckoETinTc48rTeFpw3nOq5A74PNZr0ohCGvmW7ghdWdRPg@mail.gmail.com>
References: <CAPS4ckoETinTc48rTeFpw3nOq5A74PNZr0ohCGvmW7ghdWdRPg@mail.gmail.com>
Message-ID: <201509041343.40042.even.rouault@spatialys.com>

Le vendredi 04 septembre 2015 12:43:21, Gawade P a ?crit :
>  Hi,
> 
> Can we consider updating the config.guess and config.sub files in the
> source to the latest available version?
> 
> The current one does not have support for newer platforms like ppc64le.
> 
> Please let me know your thoughts.

That would probably be a good idea. I'm not sure what is the nominal source for those files.
Last time they have been refreshed was with r19558 5 years ago
"Update to autoconf 2.64 and libtool 2.2.6; refresh configure",
but I'm not sure if the change was really due to the update of autoconf/libtool, or they came from my system.

I see that for the Android builds (https://github.com/rouault/gdal_coverage/blob/trunk_android/.travis.yml),
we get them from Savannah, so would be better if they are already up-to-date.

wget http://git.savannah.gnu.org/cgit/config.git/plain/config.guess -O config.guess
wget http://git.savannah.gnu.org/cgit/config.git/plain/config.sub -O config.sub

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From rgourrat at ag-carto.fr  Fri Sep  4 06:07:08 2015
From: rgourrat at ag-carto.fr (=?iso-8859-1?Q?R=E9my_GOURRAT?=)
Date: Fri, 4 Sep 2015 13:07:08 +0000
Subject: [gdal-dev] gdal-201-1700
Message-ID: <238B1E1830D86F46B3F030D491793D600C933F64@EXC2010.aditu.fr>

Hi,

I download gdal-201-1700 on Gis internal because I want support for OCI and Spatialite in same ogr2ogr.

Output files are fine but every time ogr2ogr is running I have this message :

"ERROR 1: Can't load requested DLL: C:\Program Files\GDAL\gdalplugins\gdal_ECW_JP2ECW.dll
126: can't get specified module ?.

I tried to set GDAL_DRIVER_PATH= C:\Program Files\GDAL\gdalplugins, same issue.

I copied in the same directory of ogr2ogr, same issue.

I suppose that gdal_ECW_JP2ECW.dll compiled with module missing,

Thanks for your help

R?my

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150904/c14b7ee4/attachment-0001.html>

From even.rouault at spatialys.com  Fri Sep  4 08:07:26 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Sep 2015 17:07:26 +0200
Subject: [gdal-dev] 2.0.1 (and 1.11.3) release schedule ?
In-Reply-To: <201508132229.31148.even.rouault@spatialys.com>
References: <201508132229.31148.even.rouault@spatialys.com>
Message-ID: <201509041707.26283.even.rouault@spatialys.com>

Hi,

Just a reminder there's one 1 week left before the release candidates are cut. 
Time to push your fixes.

Even

> Hi,
> 
> I was wondering if we couldn't prepare RCs of 2.0.1 and 1.11.3 for the week
> of September 14th. That would be 3 months after 2.0.0 release. There are ~
> 30 tickets closed in both branches. Nothing dramatically critical I can
> think of, but going beyond the .0.0 of 2.0.0 will probably make it more
> psychologically attractive for wider adoption.
> 
> Does that sound OK ?
> Anybody interested in tackling that ? Otherwise I guess I have some idea
> for a volunteer...
> 
> Best regards,
> 
> Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Fri Sep  4 09:21:50 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 4 Sep 2015 09:21:50 -0700
Subject: [gdal-dev] Coverity scan schedule
Message-ID: <CACmBxyteJzPS_gYb9-pfqOAZ9yOOo+hptuNzvE9QHfeGDuHtyw@mail.gmail.com>

Hi Kyle and/or the other coverity project admins (Even, Frank, Tamas, &
Pirmin),

Any chance you could add additional times throughout the week for Coverity
Scans?  We should be able to get 4 a week (for 500K-1M LOC).  I propose
that we add Weds, Thurs, Sun.   That would be a big help for my efforts to
crush as many of our 779 outstanding issues as I can.

Thanks!
-kurt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150904/ca75cb50/attachment.html>

From kyle at pobox.com  Fri Sep  4 09:45:03 2015
From: kyle at pobox.com (Kyle Shannon)
Date: Fri, 4 Sep 2015 10:45:03 -0600
Subject: [gdal-dev] Coverity scan schedule
In-Reply-To: <CACmBxyteJzPS_gYb9-pfqOAZ9yOOo+hptuNzvE9QHfeGDuHtyw@mail.gmail.com>
References: <CACmBxyteJzPS_gYb9-pfqOAZ9yOOo+hptuNzvE9QHfeGDuHtyw@mail.gmail.com>
Message-ID: <CAJ0mEz2J7vgb9+9J+dht=Ta=ArXV3B=DGhOdTYYCbHY8rmWAgg@mail.gmail.com>

Kurt,

On Fri, Sep 4, 2015 at 10:21 AM, Kurt Schwehr <schwehr at gmail.com> wrote:
> Hi Kyle and/or the other coverity project admins (Even, Frank, Tamas, &
> Pirmin),
>
> Any chance you could add additional times throughout the week for Coverity
> Scans?  We should be able to get 4 a week (for 500K-1M LOC).  I propose that
> we add Weds, Thurs, Sun.   That would be a big help for my efforts to crush
> as many of our 779 outstanding issues as I can.
>
> Thanks!
> -kurt

I will bump the builds to MWF.  I am working on a travis ci based
submission that is a fork of OSGeo/gdal.  It will have better
coverage.

kss

-- 
Kyle

From stefan.ziegler.de at gmail.com  Fri Sep  4 12:29:02 2015
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Fri, 4 Sep 2015 21:29:02 +0200
Subject: [gdal-dev] gdalwarp different results (vrt vs direct)
In-Reply-To: <201509031058.20622.even.rouault@spatialys.com>
References: <CAJvo+1-FLcezyFDO8yNWvWbvb4+2b1Foj5BJvjWG48+P12MDKw@mail.gmail.com>
	<201509031058.20622.even.rouault@spatialys.com>
Message-ID: <CAJvo+1_yZkF9tb9qBqUEtJ-9w_9uYzVhXPePEM_ANe=mzfmGtw@mail.gmail.com>

Hi

On Thu, Sep 3, 2015 at 10:58 AM, Even Rouault
<even.rouault at spatialys.com> wrote:
> This occurs in the middle of a source tile, or at the boundary between 2 tiles
> ?

In the middle of a source file.

> Just to be sure: you mean you are using the above -s_srs and -t_srs on one of
> the tile that makes the ortho2014.vrt ?

Yes.

> And what if you make a VRT with just that source image ?

I think it has nothing to do with the VRT. Using the gdalwarp command
on a single tif file it has the same breaking edge when using the -te
option. I did try the -et 0 option. Same error but not at the same
place (but only few pixels to the left) and much slower.

gdalwarp -overwrite -s_srs "+proj=somerc +lat_0=46.952405555555555
+lon_0=7.439583333333333 +ellps=bessel +x_0=600000 +y_0=200000
+units=m +k_0=1 +nadgrids=./chenyx06a.gsb" -t_srs "+proj=somerc
+lat_0=46.952405555555555 +lon_0=7.439583333333333 +ellps=bessel
+x_0=2600000 +y_0=1200000 +units=m +k_0=1 +nadgrids=@null"  -tr 0.125
0.125 -te 2611000 1233000 2612000 1234000 -co 'TILED=YES'
611233_12_5cm.tif 2611_1233_12_5cm.tif

I tried gdal_translate on the resulting image w/o the breaking edge
(w/o -te option):

gdal_translate -tr 0.125 -0.125 -projwin 2611000 1234000 2612000
1233000 2611_1233_12_5cm.tif out.tif

The resolution is perfect (=0.125) but the boundary is slightly
different (few centimeters). The requested area is partially outside
the image though.

> Any chance you can try with 2.0 or the dev version ?

I'm on dev version now.

You can find here the single tiff, the ntv2 grid shift file and to
shell scripts:
http://www.catais.org/tmp/gdalwarp/

best regards
Stefan

From stefan.ziegler.de at gmail.com  Fri Sep  4 13:23:11 2015
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Fri, 4 Sep 2015 22:23:11 +0200
Subject: [gdal-dev] gdalwarp different results (vrt vs direct)
In-Reply-To: <CAJvo+1_yZkF9tb9qBqUEtJ-9w_9uYzVhXPePEM_ANe=mzfmGtw@mail.gmail.com>
References: <CAJvo+1-FLcezyFDO8yNWvWbvb4+2b1Foj5BJvjWG48+P12MDKw@mail.gmail.com>
	<201509031058.20622.even.rouault@spatialys.com>
	<CAJvo+1_yZkF9tb9qBqUEtJ-9w_9uYzVhXPePEM_ANe=mzfmGtw@mail.gmail.com>
Message-ID: <CAJvo+18P6GuSEffFwhgOVJkDhga6gKB1TqKdtX3BGX10hqVs_Q@mail.gmail.com>

Forgot to mention where you can see this breaking edge. It is visible
at 2611570 / 1233622.

Stefan

On Fri, Sep 4, 2015 at 9:29 PM, Stefan Ziegler
<stefan.ziegler.de at gmail.com> wrote:
> Hi
>
> On Thu, Sep 3, 2015 at 10:58 AM, Even Rouault
> <even.rouault at spatialys.com> wrote:
>> This occurs in the middle of a source tile, or at the boundary between 2 tiles
>> ?
>
> In the middle of a source file.
>
>> Just to be sure: you mean you are using the above -s_srs and -t_srs on one of
>> the tile that makes the ortho2014.vrt ?
>
> Yes.
>
>> And what if you make a VRT with just that source image ?
>
> I think it has nothing to do with the VRT. Using the gdalwarp command
> on a single tif file it has the same breaking edge when using the -te
> option. I did try the -et 0 option. Same error but not at the same
> place (but only few pixels to the left) and much slower.
>
> gdalwarp -overwrite -s_srs "+proj=somerc +lat_0=46.952405555555555
> +lon_0=7.439583333333333 +ellps=bessel +x_0=600000 +y_0=200000
> +units=m +k_0=1 +nadgrids=./chenyx06a.gsb" -t_srs "+proj=somerc
> +lat_0=46.952405555555555 +lon_0=7.439583333333333 +ellps=bessel
> +x_0=2600000 +y_0=1200000 +units=m +k_0=1 +nadgrids=@null"  -tr 0.125
> 0.125 -te 2611000 1233000 2612000 1234000 -co 'TILED=YES'
> 611233_12_5cm.tif 2611_1233_12_5cm.tif
>
> I tried gdal_translate on the resulting image w/o the breaking edge
> (w/o -te option):
>
> gdal_translate -tr 0.125 -0.125 -projwin 2611000 1234000 2612000
> 1233000 2611_1233_12_5cm.tif out.tif
>
> The resolution is perfect (=0.125) but the boundary is slightly
> different (few centimeters). The requested area is partially outside
> the image though.
>
>> Any chance you can try with 2.0 or the dev version ?
>
> I'm on dev version now.
>
> You can find here the single tiff, the ntv2 grid shift file and to
> shell scripts:
> http://www.catais.org/tmp/gdalwarp/
>
> best regards
> Stefan

From even.rouault at spatialys.com  Fri Sep  4 14:26:20 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Sep 2015 23:26:20 +0200
Subject: [gdal-dev] gdalwarp different results (vrt vs direct)
In-Reply-To: <CAJvo+1_yZkF9tb9qBqUEtJ-9w_9uYzVhXPePEM_ANe=mzfmGtw@mail.gmail.com>
References: <CAJvo+1-FLcezyFDO8yNWvWbvb4+2b1Foj5BJvjWG48+P12MDKw@mail.gmail.com>
	<201509031058.20622.even.rouault@spatialys.com>
	<CAJvo+1_yZkF9tb9qBqUEtJ-9w_9uYzVhXPePEM_ANe=mzfmGtw@mail.gmail.com>
Message-ID: <201509042326.21060.even.rouault@spatialys.com>

Le vendredi 04 septembre 2015 21:29:02, vous avez ?crit :
> Hi
> 
> On Thu, Sep 3, 2015 at 10:58 AM, Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > This occurs in the middle of a source tile, or at the boundary between 2
> > tiles ?
> 
> In the middle of a source file.
> 
> > Just to be sure: you mean you are using the above -s_srs and -t_srs on
> > one of the tile that makes the ortho2014.vrt ?
> 
> Yes.
> 
> > And what if you make a VRT with just that source image ?
> 
> I think it has nothing to do with the VRT. Using the gdalwarp command
> on a single tif file it has the same breaking edge when using the -te
> option. I did try the -et 0 option. Same error but not at the same
> place (but only few pixels to the left) and much slower.
> 
> gdalwarp -overwrite -s_srs "+proj=somerc +lat_0=46.952405555555555
> +lon_0=7.439583333333333 +ellps=bessel +x_0=600000 +y_0=200000
> +units=m +k_0=1 +nadgrids=./chenyx06a.gsb" -t_srs "+proj=somerc
> +lat_0=46.952405555555555 +lon_0=7.439583333333333 +ellps=bessel
> +x_0=2600000 +y_0=1200000 +units=m +k_0=1 +nadgrids=@null"  -tr 0.125
> 0.125 -te 2611000 1233000 2612000 1234000 -co 'TILED=YES'
> 611233_12_5cm.tif 2611_1233_12_5cm.tif

Stefan,

as you work with sub-meter accuracy, forcing the bounds to nearest meter, 
while using the default resampling (nearest neighbour) is the likely cause. 
The issue seems to be a pixel shift in the vertical direction, likely due to a 
pixel coordinate expressed as a floating point value being rounded suddenly 
from the floor integer to the the ceiling integer. 

I've quickly tried with cubic resampling (-r cubic) and the result seems to be 
much better/smoother. Bilinar could probably work as well.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Sat Sep  5 03:05:22 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Sat, 5 Sep 2015 13:05:22 +0300
Subject: [gdal-dev] Code sprint Korea, reformat sources tree
Message-ID: <55EABE62.6060507@gmail.com>

Hi everybody,

During the code sprint in FOSS4G 2015 (Korea, Seoul) I plan to start
refactoring Cmake for GDAL (everybody are welcome http://2015.foss4g.org/programme/code-sprint/).
This is good starting point to try release an idea to reformat source
tree (combine drivers on some principles - raster/vector/raster+vector).
I digging the mailing list, but didn't found discussion started by Even about this.
Also we have new type of drivers - network. So, how it'll be best to organise sources?
This can be not only drivers, but the whole source tree. How should the
ideal GDAL source tree looks like?

Also I plan:
1. Move all internal libraries (zlib, libtiff, libjpeg, etc.) to 
separate github repos to use CMake ExternalProject feature.
2. Remove any other building systems
3. Try CTest for testing

As for me the ideal structure should looks like:
+ apps
+ autotests
+ bindings
+ core
   + port
   + ogr
   + gcore
+ cmake
+ data
+ docs
   + doxygen
   + readme
+ drivers
   + raster
   + vector
   + network
   + combined
+ CMakeLists.txt
+ LICENSE

So, at the root of sources tree we will have only 8 folders and 2 files.

-- 
Best regards,
     Dmitry


From even.rouault at spatialys.com  Sat Sep  5 07:10:54 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 5 Sep 2015 16:10:54 +0200
Subject: [gdal-dev] Code sprint Korea, reformat sources tree
In-Reply-To: <55EABE62.6060507@gmail.com>
References: <55EABE62.6060507@gmail.com>
Message-ID: <201509051610.54321.even.rouault@spatialys.com>

Dmitry,

> 
> During the code sprint in FOSS4G 2015 (Korea, Seoul) I plan to start
> refactoring Cmake for GDAL (everybody are welcome
> http://2015.foss4g.org/programme/code-sprint/). This is good starting
> point to try release an idea to reformat source tree (combine drivers on
> some principles - raster/vector/raster+vector). I digging the mailing
> list, but didn't found discussion started by Even about this. 

Regarding unified drivers, it was a bit mentionned in 
https://trac.osgeo.org/gdal/wiki/rfc46_gdal_ogr_unification . Basically the 
PCIDSK drivers have been merged in frmts/pcidsk, the PDF ones in frmts/pdf. 
And the raster side of GPKG has been added to the existing 
ogr/ogrsf_frmts/geopackage
Potential changes on the tree structure were left out in the "Potential 
changes that are *NOT* included in this RFC" paragraph.

> Also we have
> new type of drivers - network. So, how it'll be best to organise sources?
> This can be not only drivers, but the whole source tree. How should the
> ideal GDAL source tree looks like?
> 
> Also I plan:
> 1. Move all internal libraries (zlib, libtiff, libjpeg, etc.) to
> separate github repos to use CMake ExternalProject feature.

Just to give some context: the point for the internal libraries was to have a 
no-brainer way of building GDAL without any prerequisite.
- internal zlib is identical to its upstream v1.2.3 AFAIK
- internal libtiff: most files are identical to libtiff CVS, but a few ones 
(tiffconf.h, tif_config.h) have been modified for integration with GDAL CPL, and 
tif_vsi.c is GDAL specific (I/O implementation) + a build time hack for TIFF 
JPEG 12 bit support
- internal libjpeg is mostly upstream libjpeg v6b + one patch. There's also 
the build hack for libjpeg12

> 2. Remove any other building systems

That sounds ambitious. Given the complexity and maturity of our current build 
systems, I guess this would take some time to have CMake catch up.

> 3. Try CTest for testing

What do you think it will bring w.r.t our current testing system ? Do we want 
to be dependant of a particular build system for our tests ?
Regarding testing, I've somehow understood Kurt had mentionned plans for a 
"gdalautotest2"

Regarding all the above, I assume you mean in a fork of yours ?

> 
> As for me the ideal structure should looks like:
> + apps
> + autotests
> + bindings
> + core
>    + port
>    + ogr
>    + gcore

gnm core would go here too ?

> + cmake
> + data
> + docs
>    + doxygen
>    + readme
> + drivers
>    + raster
>    + vector
>    + network
>    + combined
> + CMakeLists.txt
> + LICENSE
> 
> So, at the root of sources tree we will have only 8 folders and 2 files.

Is the churn in the tree structure worth the effort ? Be aware that there are a 
number of interdependencies between drivers, so this might require fixing a 
number of source files. What advantages do you see in a new structure ?

I'm afraid that if you want to change multiple things at a time (build system, 
testing mechanisms, tree structure), you will never manage to get a working 
result. Incremental approaches when feasible are less risky (but admitedly 
involve potentially a larger cumulated effort).

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Sat Sep  5 07:48:37 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Sat, 5 Sep 2015 17:48:37 +0300
Subject: [gdal-dev] Code sprint Korea, reformat sources tree
In-Reply-To: <201509051610.54321.even.rouault@spatialys.com>
References: <55EABE62.6060507@gmail.com>
	<201509051610.54321.even.rouault@spatialys.com>
Message-ID: <55EB00C5.80901@gmail.com>

Hi Even,

05.09.2015 17:10, Even Rouault ?????:
> Dmitry,
>
>> During the code sprint in FOSS4G 2015 (Korea, Seoul) I plan to start
>> refactoring Cmake for GDAL (everybody are welcome
>> http://2015.foss4g.org/programme/code-sprint/). This is good starting
>> point to try release an idea to reformat source tree (combine drivers on
>> some principles - raster/vector/raster+vector). I digging the mailing
>> list, but didn't found discussion started by Even about this.
> Regarding unified drivers, it was a bit mentionned in
> https://trac.osgeo.org/gdal/wiki/rfc46_gdal_ogr_unification . Basically the
> PCIDSK drivers have been merged in frmts/pcidsk, the PDF ones in frmts/pdf.
> And the raster side of GPKG has been added to the existing
> ogr/ogrsf_frmts/geopackage
> Potential changes on the tree structure were left out in the "Potential
> changes that are *NOT* included in this RFC" paragraph.
I plan to experiment with this and if I get good results, RFC will be 
written.
>> Also we have
>> new type of drivers - network. So, how it'll be best to organise sources?
>> This can be not only drivers, but the whole source tree. How should the
>> ideal GDAL source tree looks like?
>>
>> Also I plan:
>> 1. Move all internal libraries (zlib, libtiff, libjpeg, etc.) to
>> separate github repos to use CMake ExternalProject feature.
> Just to give some context: the point for the internal libraries was to have a
> no-brainer way of building GDAL without any prerequisite.
> - internal zlib is identical to its upstream v1.2.3 AFAIK
> - internal libtiff: most files are identical to libtiff CVS, but a few ones
> (tiffconf.h, tif_config.h) have been modified for integration with GDAL CPL, and
> tif_vsi.c is GDAL specific (I/O implementation) + a build time hack for TIFF
> JPEG 12 bit support
> - internal libjpeg is mostly upstream libjpeg v6b + one patch. There's also
> the build hack for libjpeg12
I only plan to move this internal libraries in separate repos, not to 
link official ones. So this is only give more structured sources tree.
>
>> 2. Remove any other building systems
> That sounds ambitious. Given the complexity and maturity of our current build
> systems, I guess this would take some time to have CMake catch up.
Yes, certainly. But anyhow current CMake branch not fully consistent for 
current build system. So this have to be done.
>
>> 3. Try CTest for testing
> What do you think it will bring w.r.t our current testing system ? Do we want
> to be dependant of a particular build system for our tests ?
> Regarding testing, I've somehow understood Kurt had mentionned plans for a
> "gdalautotest2"
This is only subject of experiments. Let's try CTest and see if it fits.
>
> Regarding all the above, I assume you mean in a fork of yours ?
Yes. All experiments will be on forked GDAL in separate branch.
>
>> As for me the ideal structure should looks like:
>> + apps
>> + autotests
>> + bindings
>> + core
>>     + port
>>     + ogr
>>     + gcore
> gnm core would go here too ?
Yes
>
>> + cmake
>> + data
>> + docs
>>     + doxygen
>>     + readme
>> + drivers
>>     + raster
>>     + vector
>>     + network
>>     + combined
>> + CMakeLists.txt
>> + LICENSE
>>
>> So, at the root of sources tree we will have only 8 folders and 2 files.
> Is the churn in the tree structure worth the effort ? Be aware that there are a
> number of interdependencies between drivers, so this might require fixing a
> number of source files. What advantages do you see in a new structure ?
1. More ease to understand sources tree for novice.
2. More useful for CMake macro. In current release there are a lot of 
hardcoded things. Macro give more flexibility.
3. More ease to add some new check needed by separate drivers.
4. More configurable (ease selected depended libraries installed in OS, 
or should be loaded via ExternalProject), more dependence checks.
5. May be CPack using in future to create distros.
>
> I'm afraid that if you want to change multiple things at a time (build system,
> testing mechanisms, tree structure), you will never manage to get a working
> result. Incremental approaches when feasible are less risky (but admitedly
> involve potentially a larger cumulated effort).
Yes, you may be right. But it seems to me that current Cmake version is 
too complicated than it can be. If Ican improve it it'll solve lot of 
problems, if not - ok this will be only an unsuccessful experiment.
>
> Even
>
I do not insist, maybe it's a crazy idea. But as was the discussion of 
unification, it seemed to me that this worth trying during improvements 
Cmake build system.

Best regards,
     Dmitry


From jukka.rahkonen at maanmittauslaitos.fi  Sat Sep  5 08:39:52 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sat, 5 Sep 2015 15:39:52 +0000 (UTC)
Subject: [gdal-dev] Gdaltransform hangs sometimes after being idle
Message-ID: <loom.20150905T162924-386@post.gmane.org>

Hi,

If I run gdaltransform on Windows and keep it idle for some time the whole
command window freezes sometimes so that it does not accept any input,
including Ctrl-C for closing the program. I have known the behavior for long
and just closed the process from task manager. However, now I saw a new
message on my screen which I have not noticed before.

CPLMutexHolder: Failed to acquire mutex!

Unfortunately I can't reprodoce the freeze in a reliable way.

-Jukka Rahkonen-



From even.rouault at spatialys.com  Sat Sep  5 10:24:34 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 5 Sep 2015 19:24:34 +0200
Subject: [gdal-dev] Gdaltransform hangs sometimes after being idle
In-Reply-To: <loom.20150905T162924-386@post.gmane.org>
References: <loom.20150905T162924-386@post.gmane.org>
Message-ID: <201509051924.34882.even.rouault@spatialys.com>

Le samedi 05 septembre 2015 17:39:52, Jukka Rahkonen a ?crit :
> Hi,
> 
> If I run gdaltransform on Windows and keep it idle for some time the whole
> command window freezes sometimes so that it does not accept any input,
> including Ctrl-C for closing the program. I have known the behavior for
> long and just closed the process from task manager. However, now I saw a
> new message on my screen which I have not noticed before.
> 
> CPLMutexHolder: Failed to acquire mutex!
> 
> Unfortunately I can't reprodoce the freeze in a reliable way.

Jukka,

This sounds rather strange. Most mutex locking attempts in GDAL have a timeout 
of 1000 seconds, so that might explain the "after some time". However I fail 
to see how waiting for input and mutex relate together. Or there would be a 
mutex that wouldn't be released. What is your gdaltransform command line ?

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Sat Sep  5 10:37:34 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sat, 5 Sep 2015 10:37:34 -0700
Subject: [gdal-dev] GDAL testing
Message-ID: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>

(Subject change to focus on testing)

Hi all,

First off... what GDAL has with autotest, travis-ci and coverity is awesome!

Thoughts / discussion more than welcome!

For my production work, I'm not able to use the autotest python code
because of its non-unittest architecture.  So... I started creating python
unittest and C++ gunit based tests.  I use autotest2 in Google's internal
continuous integration system in our main code base.  I'm using Google's
build system... I've got nothing started for running the C++ tests outside
of Google.

Apologies for not even getting out at least samples of autotest2 for folks
to inspect and comment on.  My intention is to put what I have in a git
repo and the to start discussions as to what (if anything) GDAL community
wants to do with autotest2.    I was hoping to get a lot more coverage and
get GDAL 2.x.x support, but that will have to come later.  It's only 14K
lines at this point (optimistically 2-3% done), but it has been a huge help
for me especially with in upgrading versions of gdal and catching bugs in
support libs & development toolchains.

The tests are more focused on test isolation than autotest.  This allows
for a lot more parallelism in testing.  e.g.  It's fair game to run all
tests at the same time on the same machine.

find . -name \*.py | xargs wc -l | tail -1
 10684 total

find . -name \*.cc -o -name \*.h | xargs wc -l | tail -1
  3734 total

Where GDAL's autotest is 204K lines:

find . -name \*.py | xargs wc -l | tail -1
  193994 total
find . -name \*.c\* -o -name \*.h | xargs wc -l | tail -1
   10471 total

Here are some samples:

C++ tests use  C++11, gunit, google logging, gflags:  (Hoping for C++14
soon.. e.g. make_unique)
- autotest2/cpp/port/cpl_conv_test.cc
<https://gist.github.com/schwehr/13137d826763763fb031> (Yes, this is
massively boring code)
- autotest2/cpp/ogr/ogrpoint_test.cc
<https://gist.github.com/schwehr/c8ee86a6f6a1c1cc043b>
- autotest2/cpp/ogr/ogrsf_frmts/geojson/geojson_test.cc
<https://gist.github.com/schwehr/bc44b91a37cd621212c4>

Python pretty much follows the autotest layout, but with util files in the
same directory.  Assumes python 2.7 or >= 3.4 (have not tried py3 yet)
- autotest2/gcore/gcore_util.py
<https://gist.github.com/schwehr/c143927ca25d03a10265>
- autotest2/gdrivers/gdrivers_util.py
<https://gist.github.com/schwehr/dd75f73cedf8f7b5357e>
- autotest2/gdrivers/tiff_read_test.py
<https://gist.github.com/schwehr/a35b2bc8a7956ef1f620> (I'm leading towards
moving driver tests in gcore to gdrivers)
- autotest2/ogr/geojson_test.py
<https://gist.github.com/schwehr/6cbdc3482055d2237ad2>

Probably should move python code to also match the C++ tree.  e.g.

    tiff_read_test.py -> autotest2/py/frmts/gtiff/tiff_read_test.py

I'm (mostly) following Google's style guides.  Public versions here: C++
<https://google-styleguide.googlecode.com/svn/trunk/cppguide.html> Python
<https://google-styleguide.googlecode.com/svn/trunk/pyguide.html>

All C++ should be formatted with "clang-format --style=Google"

What does autotest2 not do?

Would like to eventually do (unsorted):
- Test error handling on a range of corrupt data sources
- Fuzz testing, ASAN/MSAN/TSAN/Valgrind/Heap checks  (I've done some MSAN &
heap checkers by hand)
- Performance testing - time and memory usage
- Test the C API at the C level
- Test platforms other than Linux (MS Win*, Mac OSX, Android, iOS, other
embedded oses, BSD*, Solaris, HPUX, etc)
- Have more detailed language binding tests for java, ruby, perl, php
- Coverage checking
- Test parallel processing and multithreading
- Test networking (I need to think through isolation)
- Test multiple configurations (e.g. all drivers and features enables vrs
minimal build).
- Check which system calls are used by each driver for read and for write
- Check i18n support.
- Check distribution packaging
- Validating that the given build options result in the expect available
features

Probably out of scope:
- Test for support from older platforms & C++ older than C++11
- Actual sandbox checks
- Test other bindings to GDAL's C or C++ API such as Fiona & Shapely
- Integration tests (e.g. GRASS, QGIS, mapserv, GeoDjango, etc).
- ABI compatibility checks
- Older versions of dependent libs e.g. netcdf/hdf4/5, kakadu, openjpeg,
etc.

-kurt
Engineer at Google


On Sat, Sep 5, 2015 at 7:48 AM, Dmitry Baryshnikov <bishop.dev at gmail.com>
wrote:

> Hi Even,
>
> 05.09.2015 17:10, Even Rouault ?????:
>
>> Dmitry,
>>
>> During the code sprint in FOSS4G 2015 (Korea, Seoul) I plan to start
>>> refactoring Cmake for GDAL (everybody are welcome
>>> http://2015.foss4g.org/programme/code-sprint/). This is good starting
>>> point to try release an idea to reformat source tree (combine drivers on
>>> some principles - raster/vector/raster+vector). I digging the mailing
>>> list, but didn't found discussion started by Even about this.
>>>
>> Regarding unified drivers, it was a bit mentionned in
>> https://trac.osgeo.org/gdal/wiki/rfc46_gdal_ogr_unification . Basically
>> the
>> PCIDSK drivers have been merged in frmts/pcidsk, the PDF ones in
>> frmts/pdf.
>> And the raster side of GPKG has been added to the existing
>> ogr/ogrsf_frmts/geopackage
>> Potential changes on the tree structure were left out in the "Potential
>> changes that are *NOT* included in this RFC" paragraph.
>>
> I plan to experiment with this and if I get good results, RFC will be
> written.
>
>> Also we have
>>> new type of drivers - network. So, how it'll be best to organise sources?
>>> This can be not only drivers, but the whole source tree. How should the
>>> ideal GDAL source tree looks like?
>>>
>>> Also I plan:
>>> 1. Move all internal libraries (zlib, libtiff, libjpeg, etc.) to
>>> separate github repos to use CMake ExternalProject feature.
>>>
>> Just to give some context: the point for the internal libraries was to
>> have a
>> no-brainer way of building GDAL without any prerequisite.
>> - internal zlib is identical to its upstream v1.2.3 AFAIK
>> - internal libtiff: most files are identical to libtiff CVS, but a few
>> ones
>> (tiffconf.h, tif_config.h) have been modified for integration with GDAL
>> CPL, and
>> tif_vsi.c is GDAL specific (I/O implementation) + a build time hack for
>> TIFF
>> JPEG 12 bit support
>> - internal libjpeg is mostly upstream libjpeg v6b + one patch. There's
>> also
>> the build hack for libjpeg12
>>
> I only plan to move this internal libraries in separate repos, not to link
> official ones. So this is only give more structured sources tree.
>
>>
>> 2. Remove any other building systems
>>>
>> That sounds ambitious. Given the complexity and maturity of our current
>> build
>> systems, I guess this would take some time to have CMake catch up.
>>
> Yes, certainly. But anyhow current CMake branch not fully consistent for
> current build system. So this have to be done.
>
>>
>> 3. Try CTest for testing
>>>
>> What do you think it will bring w.r.t our current testing system ? Do we
>> want
>> to be dependant of a particular build system for our tests ?
>> Regarding testing, I've somehow understood Kurt had mentionned plans for a
>> "gdalautotest2"
>>
> This is only subject of experiments. Let's try CTest and see if it fits.
>
>>
>> Regarding all the above, I assume you mean in a fork of yours ?
>>
> Yes. All experiments will be on forked GDAL in separate branch.
>
>>
>> As for me the ideal structure should looks like:
>>> + apps
>>> + autotests
>>> + bindings
>>> + core
>>>     + port
>>>     + ogr
>>>     + gcore
>>>
>> gnm core would go here too ?
>>
> Yes
>
>>
>> + cmake
>>> + data
>>> + docs
>>>     + doxygen
>>>     + readme
>>> + drivers
>>>     + raster
>>>     + vector
>>>     + network
>>>     + combined
>>> + CMakeLists.txt
>>> + LICENSE
>>>
>>> So, at the root of sources tree we will have only 8 folders and 2 files.
>>>
>> Is the churn in the tree structure worth the effort ? Be aware that there
>> are a
>> number of interdependencies between drivers, so this might require fixing
>> a
>> number of source files. What advantages do you see in a new structure ?
>>
> 1. More ease to understand sources tree for novice.
> 2. More useful for CMake macro. In current release there are a lot of
> hardcoded things. Macro give more flexibility.
> 3. More ease to add some new check needed by separate drivers.
> 4. More configurable (ease selected depended libraries installed in OS, or
> should be loaded via ExternalProject), more dependence checks.
> 5. May be CPack using in future to create distros.
>
>>
>> I'm afraid that if you want to change multiple things at a time (build
>> system,
>> testing mechanisms, tree structure), you will never manage to get a
>> working
>> result. Incremental approaches when feasible are less risky (but admitedly
>> involve potentially a larger cumulated effort).
>>
> Yes, you may be right. But it seems to me that current Cmake version is
> too complicated than it can be. If Ican improve it it'll solve lot of
> problems, if not - ok this will be only an unsuccessful experiment.
>
>>
>> Even
>>
>> I do not insist, maybe it's a crazy idea. But as was the discussion of
> unification, it seemed to me that this worth trying during improvements
> Cmake build system.
>
> Best regards,
>     Dmitry
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150905/3d4052d2/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sat Sep  5 10:47:35 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sat, 5 Sep 2015 17:47:35 +0000 (UTC)
Subject: [gdal-dev] Gdaltransform hangs sometimes after being idle
References: <loom.20150905T162924-386@post.gmane.org>
	<201509051924.34882.even.rouault@spatialys.com>
Message-ID: <loom.20150905T193656-389@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Le samedi 05 septembre 2015 17:39:52, Jukka Rahkonen a ?crit :
> > Hi,
> > 
> > If I run gdaltransform on Windows and keep it idle for some time the whole
> > command window freezes sometimes so that it does not accept any input,
> > including Ctrl-C for closing the program. I have known the behavior for
> > long and just closed the process from task manager. However, now I saw a
> > new message on my screen which I have not noticed before.
> > 
> > CPLMutexHolder: Failed to acquire mutex!
> > 
> > Unfortunately I can't reprodoce the freeze in a reliable way.
> 
> Jukka,
> 
> This sounds rather strange. Most mutex locking attempts in GDAL have a
timeout 
> of 1000 seconds, so that might explain the "after some time". However I fail 
> to see how waiting for input and mutex relate together. Or there would be a 
> mutex that wouldn't be released. What is your gdaltransform command line ?


Actually I have the freeze on my computer right now. I did this:

gdaltransform -s_srs epsg:4326 -t_srs epsg:3067
30 65
641428.429705435 7211811.30748109 0
31 70
652590.036387019 7770880.82231984 0

Then I tried to close the program with Ctrl-C but it did not close. Now it
does not take any input at all. It may well be that my issue is exactly that
I can't close gdaltransform with Ctrl-C after idle time and perhaps I have
seen the same with cs2cs.

In an earlier test I got this print on my screen, I don't know if it is
related or not:

HDF5-DIAG: Error detected in HDF5 (1.8.14) thread 0:
  #000: ..\..\src\H5I.c line 1138 in H5Iget_type(): library initialization faile
d
    major: Function entry/exit
    minor: Unable to initialize object
  #001: ..\..\src\H5.c line 183 in H5_init_library(): unable to initialize prope
rty list interface
    major: Function entry/exit
    minor: Unable to initialize object
  #002: ..\..\src\H5Pint.c line 405 in H5P_init(): interface initialization fail
ed
    major: Function entry/exit
    minor: Unable to initialize object
  #003: ..\..\src\H5Pint.c line 468 in H5P_init_interface(): can't register prop
erties
    major: Property lists
    minor: Unable to register new atom
  #004: ..\..\src\H5Pfapl.c line 241 in H5P_facc_reg_prop(): can't insert proper
ty into class
    major: Property lists
    minor: Unable to insert object
  #005: ..\..\src\H5Pint.c line 2002 in H5P_register_real(): Can't create proper
ty
    major: Property lists
    minor: Unable to create file
  #006: ..\..\src\H5Pint.c line 1072 in H5P_create_prop(): memory allocation fai
led
    major: Resource unavailable
    minor: No space available for allocation
  #007: ..\..\src\H5FD.c line 386 in H5FD_register(): memory allocation failed f
or file driver class struct
    major: Resource unavailable
    minor: No space available for allocation
FATAL: CPLGetTLSList() failed to allocate TLS list!

-Jukka-





From ahmettemiz88 at gmail.com  Sat Sep  5 11:23:41 2015
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Sat, 5 Sep 2015 21:23:41 +0300
Subject: [gdal-dev] tiled vector map
Message-ID: <CAJKO1YvhXfsvMH8Q89MeAMMC9rWUCm_zZko7EdD+Pdz29GkWzQ@mail.gmail.com>

hello

Is it possible to create tiled vector map with ogr ?

kind regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Bilgi ??lem  Dairesi Ba?kanl???-CBS Grubu


________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150905/28872269/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sat Sep  5 11:47:53 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sat, 5 Sep 2015 18:47:53 +0000 (UTC)
Subject: [gdal-dev] tiled vector map
References: <CAJKO1YvhXfsvMH8Q89MeAMMC9rWUCm_zZko7EdD+Pdz29GkWzQ@mail.gmail.com>
Message-ID: <loom.20150905T204605-200@post.gmane.org>

Ahmet Temiz <ahmettemiz88 <at> gmail.com> writes:

> 
> 
> hello
> 
> Is it possible to create tiled vector map with ogr ?

It depends on what you mean with tiled vector maps. Do you mean for example
something from this list http://wiki.openstreetmap.org/wiki/Vector_tiles or
do you plan to develop your own system?

-Jukka Rahkonen-


From jaak at nutiteq.com  Sat Sep  5 11:59:21 2015
From: jaak at nutiteq.com (Jaak Laineste)
Date: Sat, 5 Sep 2015 21:59:21 +0300
Subject: [gdal-dev] tiled vector map
In-Reply-To: <CAJKO1YvhXfsvMH8Q89MeAMMC9rWUCm_zZko7EdD+Pdz29GkWzQ@mail.gmail.com>
References: <CAJKO1YvhXfsvMH8Q89MeAMMC9rWUCm_zZko7EdD+Pdz29GkWzQ@mail.gmail.com>
Message-ID: <556685BA-B9A8-4E95-B364-FF97A4816518@nutiteq.com>

Hello,

I would think of tiled vector map data as multi-resolution dataset, in several means more similar to multi-resolution raster datasets than vector datasets. 

But this would be interesting challenge. I assume you want to take some vector data (e.g. Shapefiles) and convert them to vector tiles. With shapefiles (and more or less any other GIS/OGR vector format what I know) you have just one resolution. You could take this and convert it to e.g. mapbox vector tile format, with given resolution (zoom level). Now to make it really usable in interactive web or mobile map you would need also lower level tiles. With ordinary rasters the lower level is made using quite clear downsampling. With vector tiles there are a lot of design-specific decisions - what layers to keep, what to remove (e.g. in usual map you have buildings in high resolution, but not in lower ones), what layers to transform or simplify. This depends on map design; so multi-zoom vector tileset is actually design-specific, not universial vector data what you can redesign anyway as you may think. So tools which create vector tiles have this kind of style (zoom/layer) definitions for conversion. You can use e.g. Mapnik to render vector data to vector tiles, it is more similar to creating raster maps than to convert vectors, I guess Mapbox works like that.

Considering these specifics adding OGR driver to write (and read) e.g. mapbox vector tiles, or mapsforge format should be doable. Note also that there is no single standard tiled vector map, there are some known vendor-specific formats, most popular ones seem to be mapbox vector tiles and mapsforge. If anyone is already working on this, then I would be interested also.


Jaak
Nutiteq


> On 05 Sep 2015, at 21:23, Ahmet Temiz <ahmettemiz88 at gmail.com> wrote:
> 
> hello
> 
> Is it possible to create tiled vector map with ogr ?
> 
> kind regards
> 
> -- 
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Bilgi ??lem  Dairesi Ba?kanl???-CBS Grubu
> 
> 
> ________________________
> 
> Ahmet Temiz
> Geological Eng.
> Information Systems - GIS Group
> Disaster and Emergency Management
> of Presidency
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150905/256d99b0/attachment.html>

From even.rouault at spatialys.com  Sat Sep  5 12:46:52 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 5 Sep 2015 21:46:52 +0200
Subject: [gdal-dev] Gdaltransform hangs sometimes after being idle
In-Reply-To: <loom.20150905T193656-389@post.gmane.org>
References: <loom.20150905T162924-386@post.gmane.org>
	<201509051924.34882.even.rouault@spatialys.com>
	<loom.20150905T193656-389@post.gmane.org>
Message-ID: <201509052146.52979.even.rouault@spatialys.com>

Le samedi 05 septembre 2015 19:47:35, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > Le samedi 05 septembre 2015 17:39:52, Jukka Rahkonen a ?crit :
> > > Hi,
> > > 
> > > If I run gdaltransform on Windows and keep it idle for some time the
> > > whole command window freezes sometimes so that it does not accept any
> > > input, including Ctrl-C for closing the program. I have known the
> > > behavior for long and just closed the process from task manager.
> > > However, now I saw a new message on my screen which I have not noticed
> > > before.
> > > 
> > > CPLMutexHolder: Failed to acquire mutex!
> > > 
> > > Unfortunately I can't reprodoce the freeze in a reliable way.
> > 
> > Jukka,
> > 
> > This sounds rather strange. Most mutex locking attempts in GDAL have a
> 
> timeout
> 
> > of 1000 seconds, so that might explain the "after some time". However I
> > fail to see how waiting for input and mutex relate together. Or there
> > would be a mutex that wouldn't be released. What is your gdaltransform
> > command line ?
> 
> Actually I have the freeze on my computer right now. I did this:
> 
> gdaltransform -s_srs epsg:4326 -t_srs epsg:3067
> 30 65
> 641428.429705435 7211811.30748109 0
> 31 70
> 652590.036387019 7770880.82231984 0
> 
> Then I tried to close the program with Ctrl-C but it did not close. Now it
> does not take any input at all. It may well be that my issue is exactly
> that I can't close gdaltransform with Ctrl-C after idle time and perhaps I
> have seen the same with cs2cs.

I've tried with latest 
http://download.gisinternals.com/sdk/downloads/release-1600-x64-gdal-mapserver.zip
and can't reproduce (have typed the above 2 entries and waited for more than one hour) on Win7.

> 
> In an earlier test I got this print on my screen

after Ctrl-C ?

> , I don't know if it is
> related or not:
> 
> HDF5-DIAG: Error detected in HDF5 (1.8.14) thread 0:
>   #000: ..\..\src\H5I.c line 1138 in H5Iget_type(): library initialization
> faile d
>     major: Function entry/exit
>     minor: Unable to initialize object
>   #001: ..\..\src\H5.c line 183 in H5_init_library(): unable to initialize
> prope rty list interface
>     major: Function entry/exit
>     minor: Unable to initialize object
>   #002: ..\..\src\H5Pint.c line 405 in H5P_init(): interface initialization
> fail ed
>     major: Function entry/exit
>     minor: Unable to initialize object
>   #003: ..\..\src\H5Pint.c line 468 in H5P_init_interface(): can't register
> prop erties
>     major: Property lists
>     minor: Unable to register new atom
>   #004: ..\..\src\H5Pfapl.c line 241 in H5P_facc_reg_prop(): can't insert
> proper ty into class
>     major: Property lists
>     minor: Unable to insert object
>   #005: ..\..\src\H5Pint.c line 2002 in H5P_register_real(): Can't create
> proper ty
>     major: Property lists
>     minor: Unable to create file
>   #006: ..\..\src\H5Pint.c line 1072 in H5P_create_prop(): memory
> allocation fai led
>     major: Resource unavailable
>     minor: No space available for allocation
>   #007: ..\..\src\H5FD.c line 386 in H5FD_register(): memory allocation
> failed f or file driver class struct
>     major: Resource unavailable
>     minor: No space available for allocation
> FATAL: CPLGetTLSList() failed to allocate TLS list!
> 
> -Jukka-
> 
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From stefan.ziegler.de at gmail.com  Sat Sep  5 13:59:00 2015
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Sat, 5 Sep 2015 22:59:00 +0200
Subject: [gdal-dev] gdalwarp different results (vrt vs direct)
In-Reply-To: <201509042326.21060.even.rouault@spatialys.com>
References: <CAJvo+1-FLcezyFDO8yNWvWbvb4+2b1Foj5BJvjWG48+P12MDKw@mail.gmail.com>
	<201509031058.20622.even.rouault@spatialys.com>
	<CAJvo+1_yZkF9tb9qBqUEtJ-9w_9uYzVhXPePEM_ANe=mzfmGtw@mail.gmail.com>
	<201509042326.21060.even.rouault@spatialys.com>
Message-ID: <CAJvo+18CMQYdskzsMax6GswSdnUZBpTi-d8qOQRf+T5JhZCrXg@mail.gmail.com>

Even,

what suprises me is that the following workaround shows not artefacts:

1) gdalwarp a larger part of the desired bouding box (keep SRS)
2) gdalwarp to the target srs
3) gdalwarp for cutting to desired bounding box with -tr and -te option.

All gdalwarp commands with nearest neighbor. Sounds this
comprehensible for you? Or is it just by accident (and/or I did not
found an existing breaking edge)?

I'm gonna try the original command with the different resampling
options as you proposed.

regards
Stefan

On Fri, Sep 4, 2015 at 11:26 PM, Even Rouault
<even.rouault at spatialys.com> wrote:
> Le vendredi 04 septembre 2015 21:29:02, vous avez ?crit :
>> Hi
>>
>> On Thu, Sep 3, 2015 at 10:58 AM, Even Rouault
>>
>> <even.rouault at spatialys.com> wrote:
>> > This occurs in the middle of a source tile, or at the boundary between 2
>> > tiles ?
>>
>> In the middle of a source file.
>>
>> > Just to be sure: you mean you are using the above -s_srs and -t_srs on
>> > one of the tile that makes the ortho2014.vrt ?
>>
>> Yes.
>>
>> > And what if you make a VRT with just that source image ?
>>
>> I think it has nothing to do with the VRT. Using the gdalwarp command
>> on a single tif file it has the same breaking edge when using the -te
>> option. I did try the -et 0 option. Same error but not at the same
>> place (but only few pixels to the left) and much slower.
>>
>> gdalwarp -overwrite -s_srs "+proj=somerc +lat_0=46.952405555555555
>> +lon_0=7.439583333333333 +ellps=bessel +x_0=600000 +y_0=200000
>> +units=m +k_0=1 +nadgrids=./chenyx06a.gsb" -t_srs "+proj=somerc
>> +lat_0=46.952405555555555 +lon_0=7.439583333333333 +ellps=bessel
>> +x_0=2600000 +y_0=1200000 +units=m +k_0=1 +nadgrids=@null"  -tr 0.125
>> 0.125 -te 2611000 1233000 2612000 1234000 -co 'TILED=YES'
>> 611233_12_5cm.tif 2611_1233_12_5cm.tif
>
> Stefan,
>
> as you work with sub-meter accuracy, forcing the bounds to nearest meter,
> while using the default resampling (nearest neighbour) is the likely cause.
> The issue seems to be a pixel shift in the vertical direction, likely due to a
> pixel coordinate expressed as a floating point value being rounded suddenly
> from the floor integer to the the ceiling integer.
>
> I've quickly tried with cubic resampling (-r cubic) and the result seems to be
> much better/smoother. Bilinar could probably work as well.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From even.rouault at spatialys.com  Sat Sep  5 14:07:06 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 5 Sep 2015 23:07:06 +0200
Subject: [gdal-dev] gdalwarp different results (vrt vs direct)
In-Reply-To: <CAJvo+18CMQYdskzsMax6GswSdnUZBpTi-d8qOQRf+T5JhZCrXg@mail.gmail.com>
References: <CAJvo+1-FLcezyFDO8yNWvWbvb4+2b1Foj5BJvjWG48+P12MDKw@mail.gmail.com>
	<201509042326.21060.even.rouault@spatialys.com>
	<CAJvo+18CMQYdskzsMax6GswSdnUZBpTi-d8qOQRf+T5JhZCrXg@mail.gmail.com>
Message-ID: <201509052307.06748.even.rouault@spatialys.com>

Le samedi 05 septembre 2015 22:59:00, Stefan Ziegler a ?crit :
> Even,
> 
> what suprises me is that the following workaround shows not artefacts:
> 
> 1) gdalwarp a larger part of the desired bouding box (keep SRS)

If no reprojection is involved and no resizing is involved, then gdalwarp 
basically does what gdal_translate does, so it is expected that there's no 
artifacts

> 2) gdalwarp to the target srs

If you don't constraint the result, the automatically selected bounds might 
limit the artifacts, without guarantee...

> 3) gdalwarp for cutting to desired bounding box with -tr and -te option.

Your descripton of 3) looks very much like your not_working.sh, so...

> 
> All gdalwarp commands with nearest neighbor. Sounds this
> comprehensible for you? Or is it just by accident (and/or I did not
> found an existing breaking edge)?

I'd say accident. For high quality result, nearest neighbour isn't advised.

> 
> I'm gonna try the original command with the different resampling
> options as you proposed.
> 
> regards
> Stefan
> 
> On Fri, Sep 4, 2015 at 11:26 PM, Even Rouault
> 
> <even.rouault at spatialys.com> wrote:
> > Le vendredi 04 septembre 2015 21:29:02, vous avez ?crit :
> >> Hi
> >> 
> >> On Thu, Sep 3, 2015 at 10:58 AM, Even Rouault
> >> 
> >> <even.rouault at spatialys.com> wrote:
> >> > This occurs in the middle of a source tile, or at the boundary between
> >> > 2 tiles ?
> >> 
> >> In the middle of a source file.
> >> 
> >> > Just to be sure: you mean you are using the above -s_srs and -t_srs on
> >> > one of the tile that makes the ortho2014.vrt ?
> >> 
> >> Yes.
> >> 
> >> > And what if you make a VRT with just that source image ?
> >> 
> >> I think it has nothing to do with the VRT. Using the gdalwarp command
> >> on a single tif file it has the same breaking edge when using the -te
> >> option. I did try the -et 0 option. Same error but not at the same
> >> place (but only few pixels to the left) and much slower.
> >> 
> >> gdalwarp -overwrite -s_srs "+proj=somerc +lat_0=46.952405555555555
> >> +lon_0=7.439583333333333 +ellps=bessel +x_0=600000 +y_0=200000
> >> +units=m +k_0=1 +nadgrids=./chenyx06a.gsb" -t_srs "+proj=somerc
> >> +lat_0=46.952405555555555 +lon_0=7.439583333333333 +ellps=bessel
> >> +x_0=2600000 +y_0=1200000 +units=m +k_0=1 +nadgrids=@null"  -tr 0.125
> >> 0.125 -te 2611000 1233000 2612000 1234000 -co 'TILED=YES'
> >> 611233_12_5cm.tif 2611_1233_12_5cm.tif
> > 
> > Stefan,
> > 
> > as you work with sub-meter accuracy, forcing the bounds to nearest meter,
> > while using the default resampling (nearest neighbour) is the likely
> > cause. The issue seems to be a pixel shift in the vertical direction,
> > likely due to a pixel coordinate expressed as a floating point value
> > being rounded suddenly from the floor integer to the the ceiling
> > integer.
> > 
> > I've quickly tried with cubic resampling (-r cubic) and the result seems
> > to be much better/smoother. Bilinar could probably work as well.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Sat Sep  5 14:25:12 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Sat, 5 Sep 2015 21:25:12 +0000
Subject: [gdal-dev] Gdaltransform hangs sometimes after being idle
In-Reply-To: <201509052146.52979.even.rouault@spatialys.com>
References: <loom.20150905T162924-386@post.gmane.org>
	<201509051924.34882.even.rouault@spatialys.com>
	<loom.20150905T193656-389@post.gmane.org>,
	<201509052146.52979.even.rouault@spatialys.com>
Message-ID: <1441488313454.27907@maanmittauslaitos.fi>

Hi,

I can reproduce now. GDAL is 64-bit 2.1-dev from http://download.gisinternals.com/sdk/downloads/release-1600-x64-gdal-mapserver.zip

1. gdaltransform -s_srs epsg:4326 -t_srs epsg:3067
30 65
641428.429705435 7211811.30748109 0
--wait 5 minutes
31 70
652590.036387019 7770880.82231984 0
--now Ctrl-C and gdaltransform is freezed.

Window has been now open for an hour or so since Ctrl-C and it prints a new line at about 10 minutes intervals.

CPLMutexHolder: Failed to acquire mutex!
CPLMutexHolder: Failed to acquire mutex!
CPLMutexHolder: Failed to acquire mutex!
CPLMutexHolder: Failed to acquire mutex!
CPLMutexHolder: Failed to acquire mutex!
CPLMutexHolder: Failed to acquire mutex!
CPLMutexHolder: Failed to acquire mutex!

The previous ..\..\src\H5Pint.c  errors came also after pressing Ctrl-C. Once Ctrl-C produced this message:

runtime error R6016
- not enough space for thread data

-Jukka-

________________________________________
Even Rouault wrote:




Le samedi 05 septembre 2015 19:47:35, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > Le samedi 05 septembre 2015 17:39:52, Jukka Rahkonen a ?crit :
> > > Hi,
> > >
> > > If I run gdaltransform on Windows and keep it idle for some time the
> > > whole command window freezes sometimes so that it does not accept any
> > > input, including Ctrl-C for closing the program. I have known the
> > > behavior for long and just closed the process from task manager.
> > > However, now I saw a new message on my screen which I have not noticed
> > > before.
> > >
> > > CPLMutexHolder: Failed to acquire mutex!
> > >
> > > Unfortunately I can't reprodoce the freeze in a reliable way.
> >
> > Jukka,
> >
> > This sounds rather strange. Most mutex locking attempts in GDAL have a
>
> timeout
>
> > of 1000 seconds, so that might explain the "after some time". However I
> > fail to see how waiting for input and mutex relate together. Or there
> > would be a mutex that wouldn't be released. What is your gdaltransform
> > command line ?
>
> Actually I have the freeze on my computer right now. I did this:
>
> gdaltransform -s_srs epsg:4326 -t_srs epsg:3067
> 30 65
> 641428.429705435 7211811.30748109 0
> 31 70
> 652590.036387019 7770880.82231984 0
>
> Then I tried to close the program with Ctrl-C but it did not close. Now it
> does not take any input at all. It may well be that my issue is exactly
> that I can't close gdaltransform with Ctrl-C after idle time and perhaps I
> have seen the same with cs2cs.

I've tried with latest
http://download.gisinternals.com/sdk/downloads/release-1600-x64-gdal-mapserver.zip
and can't reproduce (have typed the above 2 entries and waited for more than one hour) on Win7.

>
> In an earlier test I got this print on my screen

after Ctrl-C ?

> , I don't know if it is
> related or not:
>
> HDF5-DIAG: Error detected in HDF5 (1.8.14) thread 0:
>   #000: ..\..\src\H5I.c line 1138 in H5Iget_type(): library initialization
> faile d
>     major: Function entry/exit
>     minor: Unable to initialize object
>   #001: ..\..\src\H5.c line 183 in H5_init_library(): unable to initialize
> prope rty list interface
>     major: Function entry/exit
>     minor: Unable to initialize object
>   #002: ..\..\src\H5Pint.c line 405 in H5P_init(): interface initialization
> fail ed
>     major: Function entry/exit
>     minor: Unable to initialize object
>   #003: ..\..\src\H5Pint.c line 468 in H5P_init_interface(): can't register
> prop erties
>     major: Property lists
>     minor: Unable to register new atom
>   #004: ..\..\src\H5Pfapl.c line 241 in H5P_facc_reg_prop(): can't insert
> proper ty into class
>     major: Property lists
>     minor: Unable to insert object
>   #005: ..\..\src\H5Pint.c line 2002 in H5P_register_real(): Can't create
> proper ty
>     major: Property lists
>     minor: Unable to create file
>   #006: ..\..\src\H5Pint.c line 1072 in H5P_create_prop(): memory
> allocation fai led
>     major: Resource unavailable
>     minor: No space available for allocation
>   #007: ..\..\src\H5FD.c line 386 in H5FD_register(): memory allocation
> failed f or file driver class struct
>     major: Resource unavailable
>     minor: No space available for allocation
> FATAL: CPLGetTLSList() failed to allocate TLS list!
>
> -Jukka-
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Spatialys - Geospatial professional services
http://www.spatialys.com

From jgrn at illinois.edu  Sat Sep  5 16:43:49 2015
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Sat, 05 Sep 2015 23:43:49 +0000
Subject: [gdal-dev] Mosaicking question...
Message-ID: <CABG0rfv_Jv9412WH1L80YkMrx2ydQhFpoqyVdeGvODXm+29x1A@mail.gmail.com>

GDALers:

Quick question: if I'm using the gdalbuildvrt -> gdal_translate trick to
mosaic images, where I have "holes" (missing tiles), how do I set the value
of the regions where there is no image?  Is this done in gdalbuildvrt or
gdal_translate?

--j
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150905/5f4cd182/attachment.html>

From even.rouault at spatialys.com  Sat Sep  5 16:53:39 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 6 Sep 2015 01:53:39 +0200
Subject: [gdal-dev] Mosaicking question...
In-Reply-To: <CABG0rfv_Jv9412WH1L80YkMrx2ydQhFpoqyVdeGvODXm+29x1A@mail.gmail.com>
References: <CABG0rfv_Jv9412WH1L80YkMrx2ydQhFpoqyVdeGvODXm+29x1A@mail.gmail.com>
Message-ID: <201509060153.39612.even.rouault@spatialys.com>

Le dimanche 06 septembre 2015 01:43:49, Jonathan Greenberg a ?crit :
> GDALers:
> 
> Quick question: if I'm using the gdalbuildvrt -> gdal_translate trick to
> mosaic images, where I have "holes" (missing tiles), how do I set the value
> of the regions where there is no image?  Is this done in gdalbuildvrt or
> gdal_translate?

Jonathan,

You should be able to do it with the -vrtnodata (potentially with -hidenodata) 
switches of gdalbuildvrt

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Sun Sep  6 05:27:33 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Sun, 6 Sep 2015 12:27:33 +0000 (UTC)
Subject: [gdal-dev] Gdaltransform hangs sometimes after being idle
References: <loom.20150905T162924-386@post.gmane.org>
	<201509051924.34882.even.rouault@spatialys.com>
	<loom.20150905T193656-389@post.gmane.org>,
	<201509052146.52979.even.rouault@spatialys.com>
	<1441488313454.27907@maanmittauslaitos.fi>
Message-ID: <loom.20150906T112113-86@post.gmane.org>

Rahkonen Jukka (MML <jukka.rahkonen <at> maanmittauslaitos.fi> writes:

> 
> Hi,
> 
> I can reproduce now. GDAL is 64-bit 2.1-dev from
http://download.gisinternals.com/sdk/downloads/release-1600-x64-gdal-mapserver.zip

Sorry, after further tests the problem with closing the program still
happens only occasionally. Quite often I can see a "R6016 not enough space
for thread data". It may something similar than in this thread:


http://stackoverflow.com/questions/21127460/resolving-error-r6016-not-enough-space-for-thread-data

Conclusions from that thread:
"This turned out to be caused by calling CreateThread rather than _beginthread."
"You have to call TlsAlloc in DllMain if the Windows version is Vista or
higher."

I think I will stop my investigations because this in not at all a critical
issue for me.

-Jukka-


From bishop.dev at gmail.com  Sun Sep  6 08:27:09 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Sun, 6 Sep 2015 18:27:09 +0300
Subject: [gdal-dev] GDAL testing
In-Reply-To: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>
References: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>
Message-ID: <55EC5B4D.4090405@gmail.com>

Hi Kurt,

During code sprint in Korea (FOSS4G 2015) I plan to play with new 
approach of CMake fro GDAL. The one of experiments will be try to use 
CTest. As I plan restructure the sources tree, I can try to integrate 
you work on autotest2 and CTest. Also we can try to create new test 
directory structure more compatible for test and sources tree (this is 
about you wrote: Probably should move python code to also match the C++ 
tree.  e.g.  tiff_read_test.py -> 
autotest2/py/frmts/gtiff/tiff_read_test.py).
How can get you tests? What do I need to use autotest2?

Best regards,
     Dmitry

05.09.2015 20:37, Kurt Schwehr ?????:
> (Subject change to focus on testing)
>
> Hi all,
>
> First off... what GDAL has with autotest, travis-ci and coverity is 
> awesome!
>
> Thoughts / discussion more than welcome!
>
> For my production work, I'm not able to use the autotest python code 
> because of its non-unittest architecture.  So... I started creating 
> python unittest and C++ gunit based tests.  I use autotest2 in 
> Google's internal continuous integration system in our main code 
> base.  I'm using Google's build system... I've got nothing started for 
> running the C++ tests outside of Google.
>
> Apologies for not even getting out at least samples of autotest2 for 
> folks to inspect and comment on.  My intention is to put what I have 
> in a git repo and the to start discussions as to what (if anything) 
> GDAL community wants to do with autotest2.    I was hoping to get a 
> lot more coverage and get GDAL 2.x.x support, but that will have to 
> come later. It's only 14K lines at this point (optimistically 2-3% 
> done), but it has been a huge help for me especially with in upgrading 
> versions of gdal and catching bugs in support libs & development 
> toolchains.
>
> The tests are more focused on test isolation than autotest.  This 
> allows for a lot more parallelism in testing.  e.g.  It's fair game to 
> run all tests at the same time on the same machine.
>
> find . -name \*.py | xargs wc -l | tail -1
>  10684 total
>
> find . -name \*.cc -o -name \*.h | xargs wc -l | tail -1
>   3734 total
>
> Where GDAL's autotest is 204K lines:
>
> find . -name \*.py | xargs wc -l | tail -1
>   193994 total
> find . -name \*.c\* -o -name \*.h | xargs wc -l | tail -1
>    10471 total
>
> Here are some samples:
>
> C++ tests use  C++11, gunit, google logging, gflags:  (Hoping for 
> C++14 soon.. e.g. make_unique)
> - autotest2/cpp/port/cpl_conv_test.cc 
> <https://gist.github.com/schwehr/13137d826763763fb031> (Yes, this is 
> massively boring code)
> - autotest2/cpp/ogr/ogrpoint_test.cc 
> <https://gist.github.com/schwehr/c8ee86a6f6a1c1cc043b>
> - autotest2/cpp/ogr/ogrsf_frmts/geojson/geojson_test.cc 
> <https://gist.github.com/schwehr/bc44b91a37cd621212c4>
>
> Python pretty much follows the autotest layout, but with util files in 
> the same directory.  Assumes python 2.7 or >= 3.4 (have not tried py3 yet)
> - autotest2/gcore/gcore_util.py 
> <https://gist.github.com/schwehr/c143927ca25d03a10265>
> - autotest2/gdrivers/gdrivers_util.py 
> <https://gist.github.com/schwehr/dd75f73cedf8f7b5357e>
> - autotest2/gdrivers/tiff_read_test.py 
> <https://gist.github.com/schwehr/a35b2bc8a7956ef1f620> (I'm leading 
> towards moving driver tests in gcore to gdrivers)
> - autotest2/ogr/geojson_test.py 
> <https://gist.github.com/schwehr/6cbdc3482055d2237ad2>
>
> Probably should move python code to also match the C++ tree.  e.g.
>
>     tiff_read_test.py -> autotest2/py/frmts/gtiff/tiff_read_test.py
>
> I'm (mostly) following Google's style guides.  Public versions here: 
> C++ <https://google-styleguide.googlecode.com/svn/trunk/cppguide.html> 
> Python <https://google-styleguide.googlecode.com/svn/trunk/pyguide.html>
>
> All C++ should be formatted with "clang-format --style=Google"
>
> What does autotest2 not do?
>
> Would like to eventually do (unsorted):
> - Test error handling on a range of corrupt data sources
> - Fuzz testing, ASAN/MSAN/TSAN/Valgrind/Heap checks  (I've done some 
> MSAN & heap checkers by hand)
> - Performance testing - time and memory usage
> - Test the C API at the C level
> - Test platforms other than Linux (MS Win*, Mac OSX, Android, iOS, 
> other embedded oses, BSD*, Solaris, HPUX, etc)
> - Have more detailed language binding tests for java, ruby, perl, php
> - Coverage checking
> - Test parallel processing and multithreading
> - Test networking (I need to think through isolation)
> - Test multiple configurations (e.g. all drivers and features enables 
> vrs minimal build).
> - Check which system calls are used by each driver for read and for write
> - Check i18n support.
> - Check distribution packaging
> - Validating that the given build options result in the expect 
> available features
>
> Probably out of scope:
> - Test for support from older platforms & C++ older than C++11
> - Actual sandbox checks
> - Test other bindings to GDAL's C or C++ API such as Fiona & Shapely
> - Integration tests (e.g. GRASS, QGIS, mapserv, GeoDjango, etc).
> - ABI compatibility checks
> - Older versions of dependent libs e.g. netcdf/hdf4/5, kakadu, 
> openjpeg, etc.
>
> -kurt
> Engineer at Google
>
>
> On Sat, Sep 5, 2015 at 7:48 AM, Dmitry Baryshnikov 
> <bishop.dev at gmail.com <mailto:bishop.dev at gmail.com>> wrote:
>
>     Hi Even,
>
>     05.09.2015 17:10, Even Rouault ?????:
>
>         Dmitry,
>
>             During the code sprint in FOSS4G 2015 (Korea, Seoul) I
>             plan to start
>             refactoring Cmake for GDAL (everybody are welcome
>             http://2015.foss4g.org/programme/code-sprint/). This is
>             good starting
>             point to try release an idea to reformat source tree
>             (combine drivers on
>             some principles - raster/vector/raster+vector). I digging
>             the mailing
>             list, but didn't found discussion started by Even about this.
>
>         Regarding unified drivers, it was a bit mentionned in
>         https://trac.osgeo.org/gdal/wiki/rfc46_gdal_ogr_unification .
>         Basically the
>         PCIDSK drivers have been merged in frmts/pcidsk, the PDF ones
>         in frmts/pdf.
>         And the raster side of GPKG has been added to the existing
>         ogr/ogrsf_frmts/geopackage
>         Potential changes on the tree structure were left out in the
>         "Potential
>         changes that are *NOT* included in this RFC" paragraph.
>
>     I plan to experiment with this and if I get good results, RFC will
>     be written.
>
>             Also we have
>             new type of drivers - network. So, how it'll be best to
>             organise sources?
>             This can be not only drivers, but the whole source tree.
>             How should the
>             ideal GDAL source tree looks like?
>
>             Also I plan:
>             1. Move all internal libraries (zlib, libtiff, libjpeg,
>             etc.) to
>             separate github repos to use CMake ExternalProject feature.
>
>         Just to give some context: the point for the internal
>         libraries was to have a
>         no-brainer way of building GDAL without any prerequisite.
>         - internal zlib is identical to its upstream v1.2.3 AFAIK
>         - internal libtiff: most files are identical to libtiff CVS,
>         but a few ones
>         (tiffconf.h, tif_config.h) have been modified for integration
>         with GDAL CPL, and
>         tif_vsi.c is GDAL specific (I/O implementation) + a build time
>         hack for TIFF
>         JPEG 12 bit support
>         - internal libjpeg is mostly upstream libjpeg v6b + one patch.
>         There's also
>         the build hack for libjpeg12
>
>     I only plan to move this internal libraries in separate repos, not
>     to link official ones. So this is only give more structured
>     sources tree.
>
>
>             2. Remove any other building systems
>
>         That sounds ambitious. Given the complexity and maturity of
>         our current build
>         systems, I guess this would take some time to have CMake catch up.
>
>     Yes, certainly. But anyhow current CMake branch not fully
>     consistent for current build system. So this have to be done.
>
>
>             3. Try CTest for testing
>
>         What do you think it will bring w.r.t our current testing
>         system ? Do we want
>         to be dependant of a particular build system for our tests ?
>         Regarding testing, I've somehow understood Kurt had mentionned
>         plans for a
>         "gdalautotest2"
>
>     This is only subject of experiments. Let's try CTest and see if it
>     fits.
>
>
>         Regarding all the above, I assume you mean in a fork of yours ?
>
>     Yes. All experiments will be on forked GDAL in separate branch.
>
>
>             As for me the ideal structure should looks like:
>             + apps
>             + autotests
>             + bindings
>             + core
>                 + port
>                 + ogr
>                 + gcore
>
>         gnm core would go here too ?
>
>     Yes
>
>
>             + cmake
>             + data
>             + docs
>                 + doxygen
>                 + readme
>             + drivers
>                 + raster
>                 + vector
>                 + network
>                 + combined
>             + CMakeLists.txt
>             + LICENSE
>
>             So, at the root of sources tree we will have only 8
>             folders and 2 files.
>
>         Is the churn in the tree structure worth the effort ? Be aware
>         that there are a
>         number of interdependencies between drivers, so this might
>         require fixing a
>         number of source files. What advantages do you see in a new
>         structure ?
>
>     1. More ease to understand sources tree for novice.
>     2. More useful for CMake macro. In current release there are a lot
>     of hardcoded things. Macro give more flexibility.
>     3. More ease to add some new check needed by separate drivers.
>     4. More configurable (ease selected depended libraries installed
>     in OS, or should be loaded via ExternalProject), more dependence
>     checks.
>     5. May be CPack using in future to create distros.
>
>
>         I'm afraid that if you want to change multiple things at a
>         time (build system,
>         testing mechanisms, tree structure), you will never manage to
>         get a working
>         result. Incremental approaches when feasible are less risky
>         (but admitedly
>         involve potentially a larger cumulated effort).
>
>     Yes, you may be right. But it seems to me that current Cmake
>     version is too complicated than it can be. If Ican improve it
>     it'll solve lot of problems, if not - ok this will be only an
>     unsuccessful experiment.
>
>
>         Even
>
>     I do not insist, maybe it's a crazy idea. But as was the
>     discussion of unification, it seemed to me that this worth trying
>     during improvements Cmake build system.
>
>     Best regards,
>         Dmitry
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150906/bd5f7df4/attachment-0001.html>

From ahmettemiz88 at gmail.com  Sun Sep  6 08:59:00 2015
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Sun, 6 Sep 2015 18:59:00 +0300
Subject: [gdal-dev] tiled vector map
In-Reply-To: <loom.20150905T204605-200@post.gmane.org>
References: <CAJKO1YvhXfsvMH8Q89MeAMMC9rWUCm_zZko7EdD+Pdz29GkWzQ@mail.gmail.com>
	<loom.20150905T204605-200@post.gmane.org>
Message-ID: <CAJKO1YvecOippFmGOM1DQsaarr7WT7LLqquCLCJ898JFwtQs+w@mail.gmail.com>

Thank you Jukka for your interest.

In my system, I intend to do that, specifically for our huge road map.

regards

On Sat, Sep 5, 2015 at 9:47 PM, Jukka Rahkonen <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Ahmet Temiz <ahmettemiz88 <at> gmail.com> writes:
>
> >
> >
> > hello
> >
> > Is it possible to create tiled vector map with ogr ?
>
> It depends on what you mean with tiled vector maps. Do you mean for example
> something from this list http://wiki.openstreetmap.org/wiki/Vector_tiles
> or
> do you plan to develop your own system?
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Bilgi ??lem  Dairesi Ba?kanl???-CBS Grubu


________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150906/4c89d0aa/attachment.html>

From jgomezdans at gmail.com  Mon Sep  7 01:58:53 2015
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Mon, 7 Sep 2015 09:58:53 +0100
Subject: [gdal-dev] HDF5: best practice
Message-ID: <CAMWde5pfJ5hw5q=hrGKD8272otVh06NnQXDMcqdqjd7d00F_vw@mail.gmail.com>

Hello,

We're using the Python GDAL bindings to ingest many different datasets into
our processing system, which currently outputs data as GeoTIFF files.
However, in order to optimise processing, parts of the code use HDF5. As
such, we would like to drop the GeoTIFF output and use the HDF5 format
directly. However, I can find relatively little information on having HDF5
datasets fully characterised by a particular geographic
projection/georregistration. I understand that adding a couple of metadata
tags, GDAL is able to understand projections and geolocation, but is there
anything more general?

Many thanks
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150907/ce71b56b/attachment.html>

From even.rouault at spatialys.com  Mon Sep  7 04:59:58 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Sep 2015 13:59:58 +0200
Subject: [gdal-dev] HDF5: best practice
In-Reply-To: <CAMWde5pfJ5hw5q=hrGKD8272otVh06NnQXDMcqdqjd7d00F_vw@mail.gmail.com>
References: <CAMWde5pfJ5hw5q=hrGKD8272otVh06NnQXDMcqdqjd7d00F_vw@mail.gmail.com>
Message-ID: <201509071359.58111.even.rouault@spatialys.com>

Jose,

> 
> We're using the Python GDAL bindings to ingest many different datasets into
> our processing system, which currently outputs data as GeoTIFF files.
> However, in order to optimise processing, parts of the code use HDF5. As
> such, we would like to drop the GeoTIFF output and use the HDF5 format
> directly.

I suppose you write HDF5 with another library since the support in GDAL is 
limited to read-only ?
Well, you could create HDF5 files by using the netCDF driver in netCDF-4 mode 
(that uses a HDF5 container) (FORMAT=NC4 creation option)

> However, I can find relatively little information on having HDF5
> datasets fully characterised by a particular geographic
> projection/georregistration. I understand that adding a couple of metadata
> tags, GDAL is able to understand projections and geolocation, but is there
> anything more general?

The GDAL HDF5 driver has little support for reading projections due to the 
lack of standardization on this offered by HDF5. So from what I can see in the 
driver, there are just a few particular cases for specific HDF5 production. The 
most interesting would be the case of ODIM productions that handle projections 
expressed as proj.4 strings if the where_projdef, where_LL_lon,  where_LL_lat, 
where_UR_lon and where_UR_lat metadata item are found ( the code references 
http://www.knmi.nl/opera/opera3/OPERA_2008_03_WP2.1b_ODIM_H5_v2.1.pdf/
/* 4.3.2 where for geographically referenced image Groups )

Perhaps more interesting would be to use the netCDF driver in netCDF-4 mode 
and the netCDF CF conventions.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Mon Sep  7 07:32:31 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 7 Sep 2015 14:32:31 +0000 (UTC)
Subject: [gdal-dev] tiled vector map
References: <CAJKO1YvhXfsvMH8Q89MeAMMC9rWUCm_zZko7EdD+Pdz29GkWzQ@mail.gmail.com>
	<loom.20150905T204605-200@post.gmane.org>
	<CAJKO1YvecOippFmGOM1DQsaarr7WT7LLqquCLCJ898JFwtQs+w@mail.gmail.com>
Message-ID: <loom.20150907T162041-294@post.gmane.org>

Ahmet Temiz <ahmettemiz88 <at> gmail.com> writes:

> 
> 
> 
> Thank you Jukka for your interest.
> 
> In my system, I intend to do that, specifically for our huge road map.


Unfortunately this is rather a light-weight specification. Read what Jaak
Laineste wrote, study what others have done, and think about your own use
case. Would it be read-only or will users send back updates? What to do with
long roads at tile boundaries - split, put the whole road to the tile which
has most of it, or include the road in all intersecting tiles? Are you
delivering just original data in full resolution or do you plan to deliver
simplified versions to be used as overviews? 

In the most simple case you can cut tiles on-the-fly or pre-processed with
ogr2ogr http://www.gdal.org/ogr2ogr.html. Read about -split and various clip
options.

-Jukka Rahkonen-


From even.rouault at spatialys.com  Mon Sep  7 11:54:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Sep 2015 20:54:50 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <55E611F5.30107@gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509011534.32883.even.rouault@spatialys.com>
	<55E611F5.30107@gmail.com>
Message-ID: <201509072054.51197.even.rouault@spatialys.com>

Le mardi 01 septembre 2015 23:00:37, Ari Jolma a ?crit :
> On 01.09.2015 16:34, Even Rouault wrote:
> > 2)  Variant of 1). With some Python magic on **kwargs it can be automated
> > to redirect on 1) mem_ds = gdal.Translate('', src_ds, bands = [1,2,3],
> > format = 'MEM', progress = my_progress_method)
> > 
> > 
> > * Other binding languages.
> > 
> > 
> > - Perl: apparently possible
> 
> Yes it is. Being a non-typed high level language it is possible and IMO
> preferable to be able to give the options in a key-value list (hash)
> where the keys are well known strings and the values are understandable.
> However, the C API need not do this but it should allow it.

Would the approach I suggested for the Python bindings, i.e you would build a 
list of options with the current syntax of the utilities from the Perl key-
value list sound reasonable ?

For example, let's say the user calls gdal.Translate("format" => "GTiff", 
"src_win" => [100,400,50,50] ) (this is probably not valid Perl syntax, but 
hope you got it !), and you would call GDALTranslateOptionsNew(list) where you 
would build list = { "-format", "GTiff", "-src_win", "100", "400", "50", "50", 
NULL }

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From Stuart.Fletcher at dpipwe.tas.gov.au  Mon Sep  7 19:49:03 2015
From: Stuart.Fletcher at dpipwe.tas.gov.au (Fletcher, Stuart (DPIPWE))
Date: Tue, 8 Sep 2015 02:49:03 +0000
Subject: [gdal-dev] ArcSDE Direct Connect Support
Message-ID: <027D9639A1D7424BB9C02DAF1B82B43C177C5653@EXM2-4.connect.tas.gov.au>

Hi there,

Has anyone managed to compile GDAL with support for ArcSDE Direct Connect Libraries. The ArcSDE SDK includes library files for this however there doesn't appear to be any compile flags within GDAL. We are using --with-sde=/home/gdal/ArcSDE-10.2 --with-sde-version=102

This however only uses the following:
libsde.so
libpq.so
libpe.so

We would like to compile with support for Oracle 11g the sdk includes these libraries:
libsdeora11gsrvr102.so
libgsrvrora11g102.so

Any advice or assistance would be greatly appreciated.

Thanks,

Stuart Fletcher
.


________________________________

CONFIDENTIALITY NOTICE AND DISCLAIMER
The information in this transmission may be confidential and/or protected by legal professional privilege, and is intended only for the person or persons to whom it is addressed. If you are not such a person, you are warned that any disclosure, copying or dissemination of the information is unauthorised. If you have received the transmission in error, please immediately contact this office by telephone, fax or email, to inform us of the error and to enable arrangements to be made for the destruction of the transmission, or its return at our cost. No liability is accepted for any unauthorised use of the information contained in this transmission.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150908/14a8d258/attachment.html>

From immanuel.weber at gmail.com  Tue Sep  8 00:13:20 2015
From: immanuel.weber at gmail.com (Immanuel Weber)
Date: Tue, 8 Sep 2015 09:13:20 +0200
Subject: [gdal-dev] GDAL performance compared with libtiff
In-Reply-To: <201508072025.28994.even.rouault@spatialys.com>
References: <a3882590-aa2c-481a-98a4-7f83c12910e3@getmailbird.com>
	<201508072025.28994.even.rouault@spatialys.com>
Message-ID: <CACRokWjXScsVraNgz2MfcFNdruc-S6uxYHy8CA2JeJq6QNqD=g@mail.gmail.com>

Hi Even,

sorry for not getting back earlier, I got distracted by other stuff to fix.
Thanks for your reply. At the moment I will stick with your proposed way of
writing with libtiff and adding geo data with gdal later, as I have to get
that code running quickly. But I will try have a look at it again later.

Now there is another problem slowing the process down. I want to add some
exif and xmp tags to the images. After fiddling arround with libtiff, which
has a rather simple (for my case not really useful) conversion of floating
point values to rational values, I went with exiv2. Tagging with it is very
easy and straightforward. Unfortunately due to some harddrive buffering (i
think) the image is locked for a longer time than the actual writing with
libtiff takes. That blocks exiv2 for quite some time until it gets write
access to that file, on my machine around 50-60 ms, which is 100 times of
the actual writing time. So that's really bad.

Now I'm reviewing my other options. As I'm going to write the geo
information using GDAL i think it should also use if to write the metadata
(I did not test it, but I think it will also have to wait for the drive to
be finished, but then I would stick completely with GDAL, as it's (at the
moment) slower writing compared to libtiff is still a factor of  >10 faster
than the lock takes).

So my question now is, if it is possible to write all kinds of tags using
GDAL. gdalinfo reports some of the tags written with exiv2, but not all,
for examples Exif.Photo.Make is not listed. And if so how do I do that? I
was able to add custom tags using SetMetaData() on the dataset, but these
can (not surprizingly) not be recognized by the applications, which will
use my images.
Maybe you or others can help me with that.

Thanks for your assistance,
Immanuel

2015-08-07 20:25 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> Le jeudi 06 ao?t 2015 17:29:06, Immanuel Weber a ?crit :
> > Hi all,
> >
> > I'm working on an application where lots of images have to be written.
> > Until now I'm using libtiff for that task. But as I want to add
> > georeferencing and the like I'm having a look at GDAL right now. I did a
> > quick evaluation of its performance related to libtiff and unfortunately
> > it has quite a lot of overhead. I first tested GDAL 1.10 and it was a
> > factor of 6-7 slower than the direct write with libtiff. With GDAL 2.0 it
> > got a little better with a factor of 4. (I took a 1,5 MP image and wrote
> > for a few hundred times to the disk and libtiff takes about 3 ms for
> that,
> > where as GDAL around 12 ms). I read about a performance issue with
> > GDALDataSet::RasterIO vs GDALRasterBand::ReadBlock and tried to implement
> > the storage using GDALRasterBand::WriteBlock* but that almost took more
> > time than the GDALDataSet::RasterIO version.
> >
> > Is there any other way to write tiffs quickly with GDAL, or is that kind
> of
> > overhead expected for the added functionality?
>
> Immanuel,
>
> WriteBlock() with a INTERLEAVE=BAND file should be really close to pure
> libtiff
> performance. Other cases will involve a few extra buffer copies.
>
> Another option is to write the imagery with libtiff as you did, and then
> open
> the file in update mode with GDAL to add the georeferencing. This will just
> rewrite the TIFF header.
>
> >
> > Thanks and best regards,
> > Immanuel
> >
> > *I wasn't really successful in doing that, because I didn't find a way to
> > write pixel interleaved images with that
>
> GDAL blocks are per band. But GDAL will take care of combining several
> blocks
> of same (x,y) for a INTERLEAVE=PIXEL TIFF. To get the best performance, in
> INTERLEAVE=PIXEL, you should do (pseudo-code):
>
> for y in yblocks:
>         for x in xblocs:
>                 for b in bands:
>                         GetRasterBand(b)->WriteBlock(x,y, buffer)
>
> to avoid partial TIFF tiles/strips to be written, read and re-written when
> the
> data for the band comes.
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150908/08aae54d/attachment.html>

From hema.yeedunuri at amigooptima.in  Tue Sep  8 04:15:58 2015
From: hema.yeedunuri at amigooptima.in (Hema Yeedunuri)
Date: Tue, 8 Sep 2015 16:45:58 +0530
Subject: [gdal-dev] projection error
Message-ID: <CA+8Q=fDtuSoJsp8VqgZKBYJOF8ziOqrOT5+vg999zXDF9v9eVA@mail.gmail.com>

hi all,

i have a geotiff file .i have wrapper classes for gdal for reading and
writing.gdal version is 1.11 and proj is 4.2 .whe i try to load a file it
is giving following error.i am using ubuntu 12.04.

ERROR 1: Only OGC WKT Projections supported for writing to GeoTIFF.


thanks,

hema
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150908/78df1ffa/attachment.html>

From even.rouault at spatialys.com  Tue Sep  8 04:18:29 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Sep 2015 13:18:29 +0200
Subject: [gdal-dev] GDAL performance compared with libtiff
In-Reply-To: <CACRokWjXScsVraNgz2MfcFNdruc-S6uxYHy8CA2JeJq6QNqD=g@mail.gmail.com>
References: <a3882590-aa2c-481a-98a4-7f83c12910e3@getmailbird.com>
	<201508072025.28994.even.rouault@spatialys.com>
	<CACRokWjXScsVraNgz2MfcFNdruc-S6uxYHy8CA2JeJq6QNqD=g@mail.gmail.com>
Message-ID: <201509081318.29820.even.rouault@spatialys.com>

Immanuel,

> 
> sorry for not getting back earlier, I got distracted by other stuff to fix.
> Thanks for your reply. At the moment I will stick with your proposed way of
> writing with libtiff and adding geo data with gdal later, as I have to get
> that code running quickly. But I will try have a look at it again later.
> 
> Now there is another problem slowing the process down. I want to add some
> exif and xmp tags to the images. After fiddling arround with libtiff, which
> has a rather simple (for my case not really useful) conversion of floating
> point values to rational values, I went with exiv2. Tagging with it is very
> easy and straightforward. Unfortunately due to some harddrive buffering (i
> think) the image is locked for a longer time than the actual writing with
> libtiff takes. That blocks exiv2 for quite some time until it gets write
> access to that file, on my machine around 50-60 ms, which is 100 times of
> the actual writing time. So that's really bad.
> 
> Now I'm reviewing my other options. As I'm going to write the geo
> information using GDAL i think it should also use if to write the metadata
> (I did not test it, but I think it will also have to wait for the drive to
> be finished, but then I would stick completely with GDAL, as it's (at the
> moment) slower writing compared to libtiff is still a factor of  >10 faster
> than the lock takes).
> 
> So my question now is, if it is possible to write all kinds of tags using
> GDAL.

Short answer: no. Only a few TIFF tags can be written currently (the one 
listed in "Metadata" paragraph of http://www.gdal.org/frmt_gtiff.html)

Adding support for writing XMP (the user would provide the XML) would be easy. 
Writting EXIF data would probably be a bit more involved.

> gdalinfo reports some of the tags written with exiv2, but not all,
> for examples Exif.Photo.Make is not listed. And if so how do I do that?

The list of EXIF tags that are read currently is in gcore/gdalexif.h

> I
> was able to add custom tags using SetMetaData() on the dataset, but these
> can (not surprizingly) not be recognized by the applications, which will
> use my images.
> Maybe you or others can help me with that.

One option if you want to act directly with libtiff, but don't want to close 
the GDAL dataset and reopen with libtiff afterwards is to call 
GetInternalHandle(NULL) on the GDAL dataset object. It returns a TIFF* handle. 
However this is semi-private / implementation detail and what you could do 
with it could potentially interact badly with what GDAL does, so to be used 
only if really necessary.

Even

> 
> Thanks for your assistance,
> Immanuel
> 
> 2015-08-07 20:25 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> > Le jeudi 06 ao?t 2015 17:29:06, Immanuel Weber a ?crit :
> > > Hi all,
> > > 
> > > I'm working on an application where lots of images have to be written.
> > > Until now I'm using libtiff for that task. But as I want to add
> > > georeferencing and the like I'm having a look at GDAL right now. I did
> > > a quick evaluation of its performance related to libtiff and
> > > unfortunately it has quite a lot of overhead. I first tested GDAL 1.10
> > > and it was a factor of 6-7 slower than the direct write with libtiff.
> > > With GDAL 2.0 it got a little better with a factor of 4. (I took a 1,5
> > > MP image and wrote for a few hundred times to the disk and libtiff
> > > takes about 3 ms for
> > 
> > that,
> > 
> > > where as GDAL around 12 ms). I read about a performance issue with
> > > GDALDataSet::RasterIO vs GDALRasterBand::ReadBlock and tried to
> > > implement the storage using GDALRasterBand::WriteBlock* but that
> > > almost took more time than the GDALDataSet::RasterIO version.
> > > 
> > > Is there any other way to write tiffs quickly with GDAL, or is that
> > > kind
> > 
> > of
> > 
> > > overhead expected for the added functionality?
> > 
> > Immanuel,
> > 
> > WriteBlock() with a INTERLEAVE=BAND file should be really close to pure
> > libtiff
> > performance. Other cases will involve a few extra buffer copies.
> > 
> > Another option is to write the imagery with libtiff as you did, and then
> > open
> > the file in update mode with GDAL to add the georeferencing. This will
> > just rewrite the TIFF header.
> > 
> > > Thanks and best regards,
> > > Immanuel
> > > 
> > > *I wasn't really successful in doing that, because I didn't find a way
> > > to write pixel interleaved images with that
> > 
> > GDAL blocks are per band. But GDAL will take care of combining several
> > blocks
> > of same (x,y) for a INTERLEAVE=PIXEL TIFF. To get the best performance,
> > in INTERLEAVE=PIXEL, you should do (pseudo-code):
> > 
> > for y in yblocks:
> >         for x in xblocs:
> >                 for b in bands:
> >                         GetRasterBand(b)->WriteBlock(x,y, buffer)
> > 
> > to avoid partial TIFF tiles/strips to be written, read and re-written
> > when the
> > data for the band comes.
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Tue Sep  8 04:51:27 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Tue, 8 Sep 2015 11:51:27 +0000 (UTC)
Subject: [gdal-dev] projection error
References: <CA+8Q=fDtuSoJsp8VqgZKBYJOF8ziOqrOT5+vg999zXDF9v9eVA@mail.gmail.com>
Message-ID: <loom.20150908T133952-752@post.gmane.org>

Hema Yeedunuri <hema.yeedunuri <at> amigooptima.in> writes:
 
> hi all,
> i have a geotiff file .i have wrapper classes for gdal for reading and
writing.gdal version is 1.11 and proj is 4.2 .whe i try to load a file it is
giving following error.i am using ubuntu 12.04.
> ERROR 1: Only OGC WKT Projections supported for writing to GeoTIFF.

I fear that with that information nobody can solve your issue. The error
suggests that you are trying to write into GeoTIFF something that is not OGC
WKT Projection. You must tell us what you try to write into GeoTIFF, even
better if you attach the failing code as well.

You say that you try to load a file and the error says that you try to write
something invalid into a file so perhaps your code does not do what you
believe it does.

For self-help I believe this is useful http://www.gdal.org/osr_tutorial.html
and probably this also
http://stackoverflow.com/questions/13158795/create-a-geotiff-from-an-existing-bitmap-in-c-sharp-with-gdal.

-Jukka Rahkonen-




From yhema.2705 at gmail.com  Tue Sep  8 05:43:51 2015
From: yhema.2705 at gmail.com (y hema)
Date: Tue, 8 Sep 2015 18:13:51 +0530
Subject: [gdal-dev] projection error
In-Reply-To: <loom.20150908T133952-752@post.gmane.org>
References: <CA+8Q=fDtuSoJsp8VqgZKBYJOF8ziOqrOT5+vg999zXDF9v9eVA@mail.gmail.com>
	<loom.20150908T133952-752@post.gmane.org>
Message-ID: <CAMvxtC_xghW7jkYVAfE6J3_qj3_K=mt=p46dsLc0WbPnTQipbw@mail.gmail.com>

hi ,
poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly );

    if( poDataset != NULL )
    {
        numBands = poDataset->GetRasterCount();
        width = poDataset->GetRasterXSize();
        height = poDataset->GetRasterYSize();
        GDALRasterBand  *poBand;
        poBands = new GDALRasterBand*[numBands];


        poBand = poDataset->GetRasterBand(1);

        dataType = (GDALDataType)poBand->GetRasterDataType();
        bytesPerPixel =GDALGetDataTypeSize((GDALDataType)dataType)/8;
    }
    const char *ch =   poDataset->GetProjectionRef();
    double *tiepoints = new double[6];
    poDataset->GetGeoTransform(tiepoints);
    for(int i=0;i<6;i++)
    {
        qDebug()<<"tie points"<< tiepoints[0];
    }
    uchar *data;

    data = (uchar *) /*CPLMalloc*/new
char[(sizeof(uchar)*width*height*bytesPerPixel*numBands)];
    int bandIndices[numBands];
    double scale = 5.0;

    for(int j=0 ;j<numBands ;j++)
    {
        bandIndices[j] = j;
    }
    for(int i = 0; i < numBands; i++)
    {
        poBands[i] = poDataset->GetRasterBand(bandIndices[i]+1);
        poBands[i]->SetScale(10);

        poBands[i]->RasterIO(GF_Read, 0, 0, width,
height,data+(bytesPerPixel*i), width, height, (GDALDataType)dataType,
numBands*bytesPerPixel, 0);

    }


actually i am trying to read the projection string and the tie points .the
above is the code im using.

thanks,
hema

On Tue, Sep 8, 2015 at 5:21 PM, Jukka Rahkonen <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hema Yeedunuri <hema.yeedunuri <at> amigooptima.in> writes:
>
> > hi all,
> > i have a geotiff file .i have wrapper classes for gdal for reading and
> writing.gdal version is 1.11 and proj is 4.2 .whe i try to load a file it
> is
> giving following error.i am using ubuntu 12.04.
> > ERROR 1: Only OGC WKT Projections supported for writing to GeoTIFF.
>
> I fear that with that information nobody can solve your issue. The error
> suggests that you are trying to write into GeoTIFF something that is not
> OGC
> WKT Projection. You must tell us what you try to write into GeoTIFF, even
> better if you attach the failing code as well.
>
> You say that you try to load a file and the error says that you try to
> write
> something invalid into a file so perhaps your code does not do what you
> believe it does.
>
> For self-help I believe this is useful
> http://www.gdal.org/osr_tutorial.html
> and probably this also
>
> http://stackoverflow.com/questions/13158795/create-a-geotiff-from-an-existing-bitmap-in-c-sharp-with-gdal
> .
>
> -Jukka Rahkonen-
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150908/2470cad4/attachment.html>

From even.rouault at spatialys.com  Tue Sep  8 05:56:18 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Sep 2015 14:56:18 +0200
Subject: [gdal-dev] projection error
In-Reply-To: <CAMvxtC_xghW7jkYVAfE6J3_qj3_K=mt=p46dsLc0WbPnTQipbw@mail.gmail.com>
References: <CA+8Q=fDtuSoJsp8VqgZKBYJOF8ziOqrOT5+vg999zXDF9v9eVA@mail.gmail.com>
	<loom.20150908T133952-752@post.gmane.org>
	<CAMvxtC_xghW7jkYVAfE6J3_qj3_K=mt=p46dsLc0WbPnTQipbw@mail.gmail.com>
Message-ID: <201509081456.18654.even.rouault@spatialys.com>

Le mardi 08 septembre 2015 14:43:51, y hema a ?crit :
> hi ,
> poDataset = (GDALDataset *) GDALOpen( pszFilename, GA_ReadOnly );
> 
>     if( poDataset != NULL )
>     {
>         numBands = poDataset->GetRasterCount();
>         width = poDataset->GetRasterXSize();
>         height = poDataset->GetRasterYSize();
>         GDALRasterBand  *poBand;
>         poBands = new GDALRasterBand*[numBands];
> 
> 
>         poBand = poDataset->GetRasterBand(1);
> 
>         dataType = (GDALDataType)poBand->GetRasterDataType();
>         bytesPerPixel =GDALGetDataTypeSize((GDALDataType)dataType)/8;
>     }
>     const char *ch =   poDataset->GetProjectionRef();
>     double *tiepoints = new double[6];
>     poDataset->GetGeoTransform(tiepoints);
>     for(int i=0;i<6;i++)
>     {
>         qDebug()<<"tie points"<< tiepoints[0];
>     }
>     uchar *data;
> 
>     data = (uchar *) /*CPLMalloc*/new
> char[(sizeof(uchar)*width*height*bytesPerPixel*numBands)];
>     int bandIndices[numBands];
>     double scale = 5.0;
> 
>     for(int j=0 ;j<numBands ;j++)
>     {
>         bandIndices[j] = j;
>     }
>     for(int i = 0; i < numBands; i++)
>     {
>         poBands[i] = poDataset->GetRasterBand(bandIndices[i]+1);
>         poBands[i]->SetScale(10);
> 
>         poBands[i]->RasterIO(GF_Read, 0, 0, width,
> height,data+(bytesPerPixel*i), width, height, (GDALDataType)dataType,
> numBands*bytesPerPixel, 0);
> 
>     }
> 
> 
> actually i am trying to read the projection string and the tie points .the
> above is the code im using.

I don't see how the above code would cause the "Only OGC WKT Projections 
supported for writing to GeoTIFF" error to be emitted. This error can only be 
raised if you call SetProjection(). Here you call GetProjectionRef() (which is 
fine if your intent is to read the projection string).
In the above code, I can just tell that SetScale() call will be without effect: 
you likely want the RasterIO() to return values multiplied by 10, but 
SetScale() just set a sort of metadata that has no effect on the returned 
values and only makes sense when you create/modify a raster.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Sep  8 06:13:46 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Sep 2015 15:13:46 +0200
Subject: [gdal-dev] ArcSDE Direct Connect Support
In-Reply-To: <027D9639A1D7424BB9C02DAF1B82B43C177C5653@EXM2-4.connect.tas.gov.au>
References: <027D9639A1D7424BB9C02DAF1B82B43C177C5653@EXM2-4.connect.tas.gov.au>
Message-ID: <201509081513.46419.even.rouault@spatialys.com>

Stuart,

> 
> Has anyone managed to compile GDAL with support for ArcSDE Direct Connect
> Libraries.

The ArcSDE driver isn't really popular those days I think as I think the 
ArcSDE SDK has been more or less abandonned by ESRI.

> The ArcSDE SDK includes library files for this however there
> doesn't appear to be any compile flags within GDAL. We are using
> --with-sde=/home/gdal/ArcSDE-10.2 --with-sde-version=102
> 
> This however only uses the following:
> libsde.so
> libpq.so
> libpe.so

Looking at GDAL configure script, I can see indeed that libsdeXXX.so and 
libpeXXX.so will be fetched (where XXX=102 in your case). It should also try 
to fetch libsgXXX.so.
libpq has nothing to do: it is tied with the postgresql libs that you must 
have already installed (if you do --without-pg, it shouldn't be used anymore, 
but it's also fine to let it)

> 
> We would like to compile with support for Oracle 11g the sdk includes these
> libraries: libsdeora11gsrvr102.so
> libgsrvrora11g102.so

I don't think you should try to link to those libs. They must be 
implementation details of the SDE SDK.

Can't you find libsde102.so , libpe102.so and libsg102.so ? (just guessing 
blindly as I've never had access to an ArcSDE SDK ;-))
Or something similar. In which case you could try to cheat and create symlinks 
from the actual .so name found in the SDK to the expected names: libsde102.so 
, libpe102.so and libsg102.so. Probability it works is low.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ari.jolma at gmail.com  Tue Sep  8 07:50:14 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 8 Sep 2015 17:50:14 +0300
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201509072054.51197.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509011534.32883.even.rouault@spatialys.com>
	<55E611F5.30107@gmail.com>
	<201509072054.51197.even.rouault@spatialys.com>
Message-ID: <55EEF5A6.6090408@gmail.com>



On 07.09.2015 21:54, Even Rouault wrote:
> Le mardi 01 septembre 2015 23:00:37, Ari Jolma a ?crit :
>> On 01.09.2015 16:34, Even Rouault wrote:
>>> 2)  Variant of 1). With some Python magic on **kwargs it can be automated
>>> to redirect on 1) mem_ds = gdal.Translate('', src_ds, bands = [1,2,3],
>>> format = 'MEM', progress = my_progress_method)
>>>
>>>
>>> * Other binding languages.
>>>
>>>
>>> - Perl: apparently possible
>> Yes it is. Being a non-typed high level language it is possible and IMO
>> preferable to be able to give the options in a key-value list (hash)
>> where the keys are well known strings and the values are understandable.
>> However, the C API need not do this but it should allow it.
> Would the approach I suggested for the Python bindings, i.e you would build a
> list of options with the current syntax of the utilities from the Perl key-
> value list sound reasonable ?
>
> For example, let's say the user calls gdal.Translate("format" => "GTiff",
> "src_win" => [100,400,50,50] ) (this is probably not valid Perl syntax, but
> hope you got it !), and you would call GDALTranslateOptionsNew(list) where you
> would build list = { "-format", "GTiff", "-src_win", "100", "400", "50", "50",
> NULL }
>
Geo::GDAL->Translate("format" => "GTiff", "src_win" => [100,400,50,50] )

would be valid. The argument system sounds reasonable. However, why not

$dst_dataset = $src_dataset->Translate("format" => "GTiff", "src_win" => 
[100,400,50,50] )

i.e., apply the method on an object and get an object, as the command 
line utility conceptually does? Also, the command line uses "-of", which 
the method could also accept - the method could perhaps accept a longer 
version "--output_format" too. I'm just wondering, I've not read the RFC 
nor this thread with much attention.

Regards,

Ari


From even.rouault at spatialys.com  Tue Sep  8 08:28:59 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Sep 2015 17:28:59 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <55EEF5A6.6090408@gmail.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509072054.51197.even.rouault@spatialys.com>
	<55EEF5A6.6090408@gmail.com>
Message-ID: <201509081728.59498.even.rouault@spatialys.com>

> > For example, let's say the user calls gdal.Translate("format" => "GTiff",
> > "src_win" => [100,400,50,50] ) (this is probably not valid Perl syntax,
> > but hope you got it !), and you would call GDALTranslateOptionsNew(list)
> > where you would build list = { "-format", "GTiff", "-src_win", "100",
> > "400", "50", "50", NULL }
> 
> Geo::GDAL->Translate("format" => "GTiff", "src_win" => [100,400,50,50] )
> 
> would be valid. The argument system sounds reasonable. However, why not
> 
> $dst_dataset = $src_dataset->Translate("format" => "GTiff", "src_win" =>
> [100,400,50,50] )
> 
> i.e., apply the method on an object and get an object, as the command
> line utility conceptually does? Also, the command line uses "-of", which
> the method could also accept - the method could perhaps accept a longer
> version "--output_format" too. I'm just wondering,

Well, I'd say that can be a per-binding choice (and that depends on utilities.
For example gdalwarp can accept several input datasets). My fundamental question was if my
proposal https://lists.osgeo.org/pipermail/gdal-dev/2015-September/042512.html
was OK at the C API level so as to be able to build upon it.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jimusama01 at gmail.com  Tue Sep  8 19:48:13 2015
From: jimusama01 at gmail.com (Cheng Tang)
Date: Wed, 9 Sep 2015 11:48:13 +0900
Subject: [gdal-dev] change icon of placemark of a kml file
Message-ID: <CAN1KDJsoqntQCPtsdKHLonEaoySXe3KKUi+bdNPBqayf08BrvA@mail.gmail.com>

Hi Gdal Developers:

I have a question: Can I change icon of placemark of a kml file through
code using ogr python? I did not find this function in ogr document.

Thanks for your support.

tang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150909/53f815e7/attachment.html>

From gawade.oefp at gmail.com  Tue Sep  8 21:01:26 2015
From: gawade.oefp at gmail.com (Gawade P)
Date: Wed, 9 Sep 2015 09:31:26 +0530
Subject: [gdal-dev] Update of config files for gdal
In-Reply-To: <201509041343.40042.even.rouault@spatialys.com>
References: <CAPS4ckoETinTc48rTeFpw3nOq5A74PNZr0ohCGvmW7ghdWdRPg@mail.gmail.com>
	<201509041343.40042.even.rouault@spatialys.com>
Message-ID: <CAPS4ckp=+BHp964RWLiK6oN-V5De03LNnc0du=1tVz_-rDcFFg@mail.gmail.com>

Thanks, Even and apologies for the delayed response.

I believe that the recommendation is to update it to the git HEAD version.

https://www.gnu.org/software/gettext/manual/html_node/config_002eguess.html

Based on the above information, the latest ones reside here:
http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess;hb=HEAD
http://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub;hb=HEAD

Ticket for the request:
https://trac.osgeo.org/gdal/ticket/6101#ticket
Please let me know if there is any other information required from my
side or anything I can do to help with this.

Thanks!



On Fri, Sep 4, 2015 at 5:13 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> Le vendredi 04 septembre 2015 12:43:21, Gawade P a ?crit :
>>  Hi,
>>
>> Can we consider updating the config.guess and config.sub files in the
>> source to the latest available version?
>>
>> The current one does not have support for newer platforms like ppc64le.
>>
>> Please let me know your thoughts.
>
> That would probably be a good idea. I'm not sure what is the nominal source for those files.
> Last time they have been refreshed was with r19558 5 years ago
> "Update to autoconf 2.64 and libtool 2.2.6; refresh configure",
> but I'm not sure if the change was really due to the update of autoconf/libtool, or they came from my system.
>
> I see that for the Android builds (https://github.com/rouault/gdal_coverage/blob/trunk_android/.travis.yml),
> we get them from Savannah, so would be better if they are already up-to-date.
>
> wget http://git.savannah.gnu.org/cgit/config.git/plain/config.guess -O config.guess
> wget http://git.savannah.gnu.org/cgit/config.git/plain/config.sub -O config.sub
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com

From userofgdal at gmail.com  Tue Sep  8 21:59:04 2015
From: userofgdal at gmail.com (user gdal)
Date: Wed, 9 Sep 2015 10:29:04 +0530
Subject: [gdal-dev] GDALWarp fails to initialize
Message-ID: <CAJnZZaKoSBvvh-8QAga_wY1_SxhO8CfqZAuEv2UuUnyGU0ni5A@mail.gmail.com>

Dear All,

I want to programmatically clip a raster ("inimg") with a polygon vector of
the format shp ("myshp"); both have the same geog. reference, which I
tested using std. SW, say, QGIS. I proceeded as per the code below. I am
getting an error "Unhandled exception... Access Violation", when no
pointers are NULL! What could have been the error in my understanding?


GDALDataset *inimg, *outimg;



outimg->(GDALDataset *) GDALOpen(filename, GA_Update);

outimg=driver->Create(filename, NewCol, NewRow, Band, DataType, NULL); /*
NewCol and NewRow, each have values of the range 30 */



GDALWarpOptions *WO=GDALCreateWarpOptions( );

if(WO)
{
  WO->hSrcDS=(GDALDatasetH)(inimg); WO->nBandCount=Band;



  // In a sample image I wish to use, Band =3, checked

  WO->hDstDS=(GDALDatasetH)(outimg); WO->hCutline=myshp; // OGRLayer *myshp;

  WO->panSrcBands=(int *) CPLMalloc(sizeof(int)*Band);
WO->panSrcBands[0]=Band;
  WO->panDstBands=(int *) CPLMalloc(sizeof(int)*Band);
WO->panDstBands[0]=Band;

  WO->pfnProgress=GDALTermProgress;

  GDALWarpOperation *operation=new GDALWarpOperation;

  if(operation)
  {
    operation->Initialize(WO);  // the speed breaker
    operation->ChunkAndWarpImage(0, 0, NewCol, NewRow);

    GDALDestroyWarpOptions(WO); WO=NULL; delete operation; operation=NULL;

   }

   GDALClose((GDALDatasetH) outimg); outimg=NULL;

  }



Referring to the above,


What is inimg?

Ans. The bigger input image from which I want to draw subset (i.e., clip)
with the help of a vector layer myshp. It' (inimg) is of type GDALDataset
*. In the declaration of variables, it would appear as GDALDataset *inimg
Also, in WO->hCutline (pl. see below), I am passing myshp (which has
strictly polygon topology), of the type OGRLayer * (i.e., OGRLayer *myshp).
Of course the shape file and inimg have the same projection.


What (exactly) are you passing as filename?

Ans. char *filename (such as e:\sub\subimage.img. There are no other
characters in the 'filename')

Can you try posting an actual, compilable example?

Ans. There is a GUI from which I extract parameters which can give us a lot
of inconvenience. The program compiles without 'abusing' me. What I am
getting is a run time (or debug time) error.



With thanks,




          Yours sincerely,



                               B.
Ramesh
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150909/3337017d/attachment.html>

From even.rouault at spatialys.com  Wed Sep  9 01:10:16 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Sep 2015 10:10:16 +0200
Subject: [gdal-dev] change icon of placemark of a kml file
In-Reply-To: <CAN1KDJsoqntQCPtsdKHLonEaoySXe3KKUi+bdNPBqayf08BrvA@mail.gmail.com>
References: <CAN1KDJsoqntQCPtsdKHLonEaoySXe3KKUi+bdNPBqayf08BrvA@mail.gmail.com>
Message-ID: <201509091010.16532.even.rouault@spatialys.com>

Le mercredi 09 septembre 2015 04:48:13, Cheng Tang a ?crit :
> Hi Gdal Developers:
> 
> I have a question: Can I change icon of placemark of a kml file through
> code using ogr python? I did not find this function in ogr document.

Tang,

you need to use the LIBML driver of GDAL (not necessarily available in all 
builds) : http://gdal.org/drv_libkml.html

You need to attach a style to the OGR feature. The OGR Feature Style 
specification is describe here : http://gdal.org/ogr_feature_style.html .

For example :
feat.SetStyleString('SYMBOL(id:"http://gdal.org/gdalicon.png")')


Little demo without code :

Given test.csv with the following content :

id,WKT,OGR_STYLE
1,"POINT(2 49)","SYMBOL(id:""http://gdal.org/gdalicon.png"")"

"ogr2ogr -f libkml out.kml test.csv -select id" generates :

<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document id="root_doc">
    <Schema id="test.schema">
      <SimpleField name="id" type="string"/>
    </Schema>
    <Document id="test">
      <name>test</name>
      <Placemark id="test.1">
        <Style>
          <IconStyle>
            <Icon>
              <href>http://gdal.org/gdalicon.png</href>
            </Icon>
          </IconStyle>
        </Style>
        <ExtendedData>
          <SchemaData schemaUrl="#test.schema">
            <SimpleData name="id">1</SimpleData>
          </SchemaData>
        </ExtendedData>
        <Point>
          <coordinates>
            2,49,0
          </coordinates>
        </Point>
      </Placemark>
    </Document>
  </Document>
</kml>

If you want to see a OGR Python script that explores most possibilities of 
KML, you can have a look at 
https://svn.osgeo.org/gdal/trunk/autotest/kml_generate_test_files.py . But the 
above should be sufficient for your immediate needs.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bradh at frogmouth.net  Wed Sep  9 01:21:33 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Wed, 09 Sep 2015 18:21:33 +1000
Subject: [gdal-dev] GDALWarp fails to initialize
In-Reply-To: <CAJnZZaKoSBvvh-8QAga_wY1_SxhO8CfqZAuEv2UuUnyGU0ni5A@mail.gmail.com>
References: <CAJnZZaKoSBvvh-8QAga_wY1_SxhO8CfqZAuEv2UuUnyGU0ni5A@mail.gmail.com>
Message-ID: <3625780.eGzdjkvaU4@saxicola>

On Wed, 9 Sep 2015 10:29:04 AM user gdal wrote:
> Can you try posting an actual, compilable example?
> 
> Ans. There is a GUI from which I extract parameters which can give us a lot
> of inconvenience. The program compiles without 'abusing' me. What I am
> getting is a run time (or debug time) error.
Please try to provide this. I'm not going to debug your code if you aren't 
going to do the work.

Also, please don't keep providing the same email over and over. 

Brad

From hrz at geodata.soton.ac.uk  Wed Sep  9 01:45:57 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 9 Sep 2015 09:45:57 +0100
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201509081728.59498.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509072054.51197.even.rouault@spatialys.com>
	<55EEF5A6.6090408@gmail.com>
	<201509081728.59498.even.rouault@spatialys.com>
Message-ID: <55EFF1C5.7090101@geodata.soton.ac.uk>


On 08/09/15 16:28, Even Rouault wrote:
>>> For example, let's say the user calls gdal.Translate("format" => "GTiff",  >>> "src_win" => [100,400,50,50] ) (this is probably not valid Perl 
syntax, >>> but hope you got it !), and you would call 
GDALTranslateOptionsNew(list) >>> where you would build list = { 
"-format", "GTiff", "-src_win", "100", >>> "400", "50", "50", NULL } >> 
 >> Geo::GDAL->Translate("format" => "GTiff", "src_win" => 
[100,400,50,50] ) >> >> would be valid. The argument system sounds 
reasonable. However, why not >> >> $dst_dataset = 
$src_dataset->Translate("format" => "GTiff", "src_win" => >> 
[100,400,50,50] ) >> >> i.e., apply the method on an object and get an 
object, as the command >> line utility conceptually does? Also, the 
command line uses "-of", which >> the method could also accept - the 
method could perhaps accept a longer >> version "--output_format" too. 
I'm just wondering, > > Well, I'd say that can be a per-binding choice 
(and that depends on utilities. > For example gdalwarp can accept 
several input datasets). My fundamental question was if my > proposal 
https://lists.osgeo.org/pipermail/gdal-dev/2015-September/042512.html > 
was OK at the C API level so as to be able to build upon it.

 From my point of view anything that makes the new API feel less like a 
wrapper
around a system call is great: passing expensive objects like datasets and
enabling progress functions is important.  Hopefully this would also mean
passing objects as cutline layers for gdalwarp and also clipsrc for ogr2ogr
(including geometry objects for the latter?).

The idea of an option structure parsed from an array of strings sounds 
nice and
easy to work with.  Is the option structure intended to be created for 
each call
to an utility, or is it envisaged it can hang around and be reused (and
modified)?  I.e. will the API include the ability to retrieve options 
already
set in the option structure, and set specific options?  If so how will 
options
that can be set multiple times like `gdal_translate -b` be set at the C 
level
(i.e. what would your python example of `options = gdal.TranslateOptions();
options.bands = [ 1, 2, 3 ]` look like in C)?

Hopefully not too many questions!

Best regards,

Homme

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150909/5a872540/attachment-0001.html>

From even.rouault at spatialys.com  Wed Sep  9 02:04:58 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Sep 2015 11:04:58 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <55EFF1C5.7090101@geodata.soton.ac.uk>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509081728.59498.even.rouault@spatialys.com>
	<55EFF1C5.7090101@geodata.soton.ac.uk>
Message-ID: <201509091104.58787.even.rouault@spatialys.com>

Hi Homme,

>  From my point of view anything that makes the new API feel less like a
> wrapper
> around a system call is great: passing expensive objects like datasets and
> enabling progress functions is important.  Hopefully this would also mean
> passing objects as cutline layers for gdalwarp and also clipsrc for ogr2ogr
> (including geometry objects for the latter?).

Yes, https://lists.osgeo.org/pipermail/gdal-dev/2015-September/042512.html

"""
- a few setters can be added, for example, to set a progress function. Or 
possibly auxiliary objects,  like the cutline layer for gdalwarp.
"""

> 
> The idea of an option structure parsed from an array of strings sounds
> nice and
> easy to work with.  Is the option structure intended to be created for
> each call
> to an utility, or is it envisaged it can hang around and be reused (and
> modified)? 

Hopefully it should be reusable. It means that we must be careful not to 
modify it during a particular execution of the utility.

> I.e. will the API include the ability to retrieve options
> already
> set in the option structure, and set specific options?

I'm not sure about getters. The idea would also be to minimize the number of 
setters to just what is not possible through strings.
The idea being that when the utility syntax is extended, for example something 
that was a particular case is made more generic, we don't necessarily want to 
give too much visibility on the field members of the option structure (as 
raised in https://lists.osgeo.org/pipermail/gdal-dev/2015-August/042472.html )

> If so how will
> options
> that can be set multiple times like `gdal_translate -b` be set at the C
> level
> (i.e. what would your python example of `options = gdal.TranslateOptions();
> options.bands = [ 1, 2, 3 ]` look like in C)?

char* argv[] = { "-b", "1", "-b", "2", "-b", "3", NULL };
GDALTranslateOptionsParse* psOptions = GDALTranslateOptionsNew(argv);

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hrz at geodata.soton.ac.uk  Wed Sep  9 02:30:46 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 9 Sep 2015 10:30:46 +0100
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201509091104.58787.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509081728.59498.even.rouault@spatialys.com>
	<55EFF1C5.7090101@geodata.soton.ac.uk>
	<201509091104.58787.even.rouault@spatialys.com>
Message-ID: <55EFFC46.10101@geodata.soton.ac.uk>

Hi Even,

On 09/09/15 10:04, Even Rouault wrote:
> Hi Homme,  > >>  From my point of view anything that makes the new API feel less 
like a >> wrapper >> around a system call is great: passing expensive 
objects like datasets and >> enabling progress functions is important.  
Hopefully this would also mean >> passing objects as cutline layers for 
gdalwarp and also clipsrc for ogr2ogr >> (including geometry objects for 
the latter?). > > Yes, 
https://lists.osgeo.org/pipermail/gdal-dev/2015-September/042512.html > 
 > """ > - a few setters can be added, for example, to set a progress 
function. Or > possibly auxiliary objects,  like the cutline layer for 
gdalwarp. > """

Great!

>>  >> The idea of an option structure parsed from an array of strings 
sounds >> nice and >> easy to work with.  Is the option structure 
intended to be created for >> each call >> to an utility, or is it 
envisaged it can hang around and be reused (and >> modified)? > > 
Hopefully it should be reusable. It means that we must be careful not to 
 > modify it during a particular execution of the utility. > >> I.e. 
will the API include the ability to retrieve options >> already >> set 
in the option structure, and set specific options? > > I'm not sure 
about getters. The idea would also be to minimize the number of > 
setters to just what is not possible through strings. > The idea being 
that when the utility syntax is extended, for example something > that 
was a particular case is made more generic, we don't necessarily want to 
 > give too much visibility on the field members of the option structure 
(as > raised in 
https://lists.osgeo.org/pipermail/gdal-dev/2015-August/042472.html )

Ok, if reusing the option structure the client code (or API wrapper) can 
keep
track of what has previously been set if it needs to.  In terms of unsetting
options, will passing NULL to the relevant setter do the trick, or do we 
need to
re-create the structure in that case?

>> If so how will  >> options >> that can be set multiple times like `gdal_translate -b` 
be set at the C >> level >> (i.e. what would your python example of 
`options = gdal.TranslateOptions(); >> options.bands = [ 1, 2, 3 ]` look 
like in C)? > > char* argv[] = { "-b", "1", "-b", "2", "-b", "3", NULL 
}; > GDALTranslateOptionsParse* psOptions = GDALTranslateOptionsNew(argv);

Thanks,

Homme

> Even  >


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150909/e9ca582f/attachment.html>

From even.rouault at spatialys.com  Wed Sep  9 02:38:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Sep 2015 11:38:04 +0200
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
	utilities as a library
In-Reply-To: <55EFFC46.10101@geodata.soton.ac.uk>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509091104.58787.even.rouault@spatialys.com>
	<55EFFC46.10101@geodata.soton.ac.uk>
Message-ID: <201509091138.04816.even.rouault@spatialys.com>

> In terms of
> unsetting options, will passing NULL to the relevant setter do the trick,
> or do we need to
> re-create the structure in that case?

The setters should behave nicely hopefully (ie deallocate any previously 
allocated/duplicated objected, and assign NULL ). If for some reason that is 
not possible (not sure why it wouldn't), then it should be documented in the 
setter.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From hrz at geodata.soton.ac.uk  Wed Sep  9 02:58:51 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed, 9 Sep 2015 10:58:51 +0100
Subject: [gdal-dev] Call for discussion on RFC 59 (v2): GDAL/OGR
 utilities as a library
In-Reply-To: <201509091138.04816.even.rouault@spatialys.com>
References: <201508262027.32814.even.rouault@spatialys.com>
	<201509091104.58787.even.rouault@spatialys.com>
	<55EFFC46.10101@geodata.soton.ac.uk>
	<201509091138.04816.even.rouault@spatialys.com>
Message-ID: <55F002DB.3010008@geodata.soton.ac.uk>



On 09/09/15 10:38, Even Rouault wrote:
>> In terms of
>> unsetting options, will passing NULL to the relevant setter do the trick,
>> or do we need to
>> re-create the structure in that case?
> The setters should behave nicely hopefully (ie deallocate any previously
> allocated/duplicated objected, and assign NULL ). If for some reason that is
> not possible (not sure why it wouldn't), then it should be documented in the
> setter.
>
Perfect, thanks.

Homme.

From ari.jolma at gmail.com  Wed Sep  9 03:51:15 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 9 Sep 2015 13:51:15 +0300
Subject: [gdal-dev] Release 1.10.2?
Message-ID: <55F00F23.2020400@gmail.com>

Folks,

1.10.1 was released two years ago and there seems to be >60 commits to 
that branch since.

For example the latest Debian (Jessie) seems to still use GDAL 1.10.

Is it time for 1.10.2?

Ari


From even.rouault at spatialys.com  Wed Sep  9 04:11:44 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Sep 2015 13:11:44 +0200
Subject: [gdal-dev] Release 1.10.2?
In-Reply-To: <55F00F23.2020400@gmail.com>
References: <55F00F23.2020400@gmail.com>
Message-ID: <201509091311.44512.even.rouault@spatialys.com>

Le mercredi 09 septembre 2015 12:51:15, Ari Jolma a ?crit :
> Folks,
> 
> 1.10.1 was released two years ago and there seems to be >60 commits to
> that branch since.
> 
> For example the latest Debian (Jessie) seems to still use GDAL 1.10.
> 
> Is it time for 1.10.2?

Hi Ari,

Do you think they (or anyone else) would update to 1.10.2 if it was released ? 
I guess they must be somewhat conservative on updates they apply to already 
released versions.

If you volunteer to do this release, fine for me, but I think we already give 
good service to the community by maintaining the 2.0 and 1.11 branches.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ari.jolma at gmail.com  Wed Sep  9 04:25:43 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 9 Sep 2015 14:25:43 +0300
Subject: [gdal-dev] Release 1.10.2?
In-Reply-To: <201509091311.44512.even.rouault@spatialys.com>
References: <55F00F23.2020400@gmail.com>
	<201509091311.44512.even.rouault@spatialys.com>
Message-ID: <55F01737.6020302@gmail.com>



On 09.09.2015 14:11, Even Rouault wrote:
> Le mercredi 09 septembre 2015 12:51:15, Ari Jolma a ?crit :
>> Folks,
>>
>> 1.10.1 was released two years ago and there seems to be >60 commits to
>> that branch since.
>>
>> For example the latest Debian (Jessie) seems to still use GDAL 1.10.
>>
>> Is it time for 1.10.2?
> Hi Ari,
>
> Do you think they (or anyone else) would update to 1.10.2 if it was released ?
> I guess they must be somewhat conservative on updates they apply to already
> released versions.

I don't know. But Debian seems to have chosen 1.10.

>
> If you volunteer to do this release, fine for me, but I think we already give
> good service to the community by maintaining the 2.0 and 1.11 branches.

We seem to maintain 1.10 too by looking at the commits. However, it is 5 
months since the last one before I did one today. I did it since there 
was a bug and it was the latest stable Debian.

The roadmap

https://trac.osgeo.org/gdal/roadmap

does not have 1.10.2. That seems to say that 1.10.2 is not planned. 
Maybe that should be told to the packagers somehow.

Ari

>
> Even
>


From sebastic at xs4all.nl  Wed Sep  9 04:21:13 2015
From: sebastic at xs4all.nl (sebastic)
Date: Wed, 09 Sep 2015 13:21:13 +0200
Subject: [gdal-dev] Release 1.10.2?
In-Reply-To: <55F00F23.2020400@gmail.com>
References: <55F00F23.2020400@gmail.com>
Message-ID: <cbed49cc569c5aa060dd2bd11feda42c@xs4all.nl>

On 2015-09-09 12:51, Ari Jolma wrote:
> 1.10.1 was released two years ago and there seems to be >60 commits to
> that branch since.
> 
> For example the latest Debian (Jessie) seems to still use GDAL 1.10.
> 
> Is it time for 1.10.2?

For Debian there is no need for a 1.10.2 release, such an update is not 
eligible for a stable update.

The commits are still valuable as a source for bugfixes in case users 
report issues fixed by those commits.

I doubt any distributions will pick up a 1.10.2 release, having switched 
to 1.11 or 2.0 already.

The value is mostly for users who build GDAL themselves and don't want 
to upgrade to 1.11 or 2.0 yet.

Kind Regards,

Bas

From ari.jolma at gmail.com  Wed Sep  9 04:33:24 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 9 Sep 2015 14:33:24 +0300
Subject: [gdal-dev] Release 1.10.2?
In-Reply-To: <cbed49cc569c5aa060dd2bd11feda42c@xs4all.nl>
References: <55F00F23.2020400@gmail.com>
	<cbed49cc569c5aa060dd2bd11feda42c@xs4all.nl>
Message-ID: <55F01904.8090106@gmail.com>



On 09.09.2015 14:21, sebastic wrote:
> On 2015-09-09 12:51, Ari Jolma wrote:
>> 1.10.1 was released two years ago and there seems to be >60 commits to
>> that branch since.
>>
>> For example the latest Debian (Jessie) seems to still use GDAL 1.10.
>>
>> Is it time for 1.10.2?
>
> For Debian there is no need for a 1.10.2 release, such an update is 
> not eligible for a stable update.

Thanks for this. Could you elaborate a bit on why it is not eligible?

Best regards,

Ari

>
> The commits are still valuable as a source for bugfixes in case users 
> report issues fixed by those commits.
>
> I doubt any distributions will pick up a 1.10.2 release, having 
> switched to 1.11 or 2.0 already.
>
> The value is mostly for users who build GDAL themselves and don't want 
> to upgrade to 1.11 or 2.0 yet.
>
> Kind Regards,
>
> Bas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at spatialys.com  Wed Sep  9 04:43:44 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Sep 2015 13:43:44 +0200
Subject: [gdal-dev] Release 1.10.2?
In-Reply-To: <55F01737.6020302@gmail.com>
References: <55F00F23.2020400@gmail.com>
	<201509091311.44512.even.rouault@spatialys.com>
	<55F01737.6020302@gmail.com>
Message-ID: <201509091343.44751.even.rouault@spatialys.com>

Le mercredi 09 septembre 2015 13:25:43, Ari Jolma a ?crit :
> On 09.09.2015 14:11, Even Rouault wrote:
> > Le mercredi 09 septembre 2015 12:51:15, Ari Jolma a ?crit :
> >> Folks,
> >> 
> >> 1.10.1 was released two years ago and there seems to be >60 commits to
> >> that branch since.
> >> 
> >> For example the latest Debian (Jessie) seems to still use GDAL 1.10.
> >> 
> >> Is it time for 1.10.2?
> > 
> > Hi Ari,
> > 
> > Do you think they (or anyone else) would update to 1.10.2 if it was
> > released ? I guess they must be somewhat conservative on updates they
> > apply to already released versions.
> 
> I don't know. But Debian seems to have chosen 1.10.
> 
> > If you volunteer to do this release, fine for me, but I think we already
> > give good service to the community by maintaining the 2.0 and 1.11
> > branches.
> 
> We seem to maintain 1.10 too by looking at the commits. However, it is 5
> months since the last one before I did one today. I did it since there
> was a bug and it was the latest stable Debian.

Well, I think it's ok for any committer to commit a fix in an old branch if the 
thinks it is useful and safe. He might need it for a custom build for example. 
But releasing an official tarball from a branch is something different which 
involves more efforts.

> 
> The roadmap
> 
> https://trac.osgeo.org/gdal/roadmap
> 
> does not have 1.10.2. That seems to say that 1.10.2 is not planned.

I admit I marked it as closed (could likely be re-opened if needed) without 
feedback from the community, when seeing that we had 2.0 and 1.11. I don't 
know a lot of other OSGeo (or non-OSGeo) projects that maintain 2 released 
branches. So 3...
In the past we only maintained 1.(X-1) when the dev version was 1.Xdev. I 
think it is reasonable to maintain 1.11 for "some time" as a special 
exception, as the transition to 2.0 will probably take more time.

> Maybe that should be told to the packagers somehow.

I think most packagers when seeing a 1.11 being released and maintained don't 
have too much expectations on 1.10.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastic at xs4all.nl  Wed Sep  9 05:05:20 2015
From: sebastic at xs4all.nl (sebastic)
Date: Wed, 09 Sep 2015 14:05:20 +0200
Subject: [gdal-dev] Release 1.10.2?
In-Reply-To: <55F01904.8090106@gmail.com>
References: <55F00F23.2020400@gmail.com>
	<cbed49cc569c5aa060dd2bd11feda42c@xs4all.nl>
	<55F01904.8090106@gmail.com>
Message-ID: <d4d50abcc5e7b055ac208ad782aba16b@xs4all.nl>

On 2015-09-09 13:33, Ari Jolma wrote:
> On 09.09.2015 14:21, sebastic wrote:
>> On 2015-09-09 12:51, Ari Jolma wrote:
>>> 1.10.1 was released two years ago and there seems to be >60 commits 
>>> to
>>> that branch since.
>>> 
>>> For example the latest Debian (Jessie) seems to still use GDAL 1.10.
>>> 
>>> Is it time for 1.10.2?
>> 
>> For Debian there is no need for a 1.10.2 release, such an update is 
>> not eligible for a stable update.
> 
> Thanks for this. Could you elaborate a bit on why it is not eligible?

For stable updates Debian follows have pretty much the same policy as 
for security updates, only changes fixing important or higher severity 
issues are considered for inclusion during the lifetime of the stable 
release, not entire new upstream (patch) releases.

This policy is documented on the website of the Debian Release Team:

"
  Suite update policy

  stable
      Fast response for security updates.
     *Minor updates include security and other important fixes only.*
      Major updates are sourced from testing, and are infrequent, but 
large.
"

https://release.debian.org/

The Debian Developer's Reference further documents this policy:

"
  3.1.2. Maintain packages in stable

  Most of the package maintainer's work goes into providing updated 
versions of packages in unstable, but their job also entails taking care 
of the packages in the current stable release.

  While changes in stable are discouraged, they are possible. Whenever a 
security problem is reported, you should collaborate with the security 
team to provide a fixed version (see Section 5.8.5, ?Handling 
security-related bugs?). When bugs of severity important (or more) are 
reported against the stable version of your packages, you should 
consider providing a *targeted fix*. You can ask the stable release team 
whether they would accept such an update and then prepare a stable 
upload (see Section 5.5.1, ?Special case: uploads to the stable and 
oldstable distributions?).
"

https://www.debian.org/doc/manuals/developers-reference/ch03.en.html#maintain-stable

In the case of GDAL the commits in the 1.10 branch are ideal candidates 
for the targeted fixes required for stable updates.

Kind Regards,

Bas

From immanuel.weber at gmail.com  Wed Sep  9 07:59:14 2015
From: immanuel.weber at gmail.com (Immanuel Weber)
Date: Wed, 09 Sep 2015 16:59:14 +0200
Subject: [gdal-dev] GDAL performance compared with libtiff
In-Reply-To: <201509081318.29820.even.rouault@spatialys.com>
References: <a3882590-aa2c-481a-98a4-7f83c12910e3@getmailbird.com>
	<201508072025.28994.even.rouault@spatialys.com>
	<CACRokWjXScsVraNgz2MfcFNdruc-S6uxYHy8CA2JeJq6QNqD=g@mail.gmail.com>
	<201509081318.29820.even.rouault@spatialys.com>
Message-ID: <9409d8db-6efa-4659-b9b5-bfb55689bc03@getmailbird.com>

Hi Even,

thanks for your response. Okay, I see now.?
If I would extend?asTIFFTags variable of type?GTIFFTags in geotiff.cpp, I should be able to use more of the tifftags, or am I wrong? Maybe I have to have a look at the type handling and some other places where the table is used too.

I had another look at the interaction with exiv2. I now think that has something to do with the fact, that exiv2 memory maps the file, because I can repeatedly?open, read and write the file with gdal and libtiff and basic fopen() and the code does not have to wait. I will get in contact with the guys of exiv2 to maybe get some insight.

Thanks for your help so far.
Cheers,
Immanuel

Am 08.09.2015 13:44:54 schrieb Even Rouault <even.rouault at spatialys.com>:
Immanuel,

>
> sorry for not getting back earlier, I got distracted by other stuff to fix.
> Thanks for your reply. At the moment I will stick with your proposed way of
> writing with libtiff and adding geo data with gdal later, as I have to get
> that code running quickly. But I will try have a look at it again later.
>
> Now there is another problem slowing the process down. I want to add some
> exif and xmp tags to the images. After fiddling arround with libtiff, which
> has a rather simple (for my case not really useful) conversion of floating
> point values to rational values, I went with exiv2. Tagging with it is very
> easy and straightforward. Unfortunately due to some harddrive buffering (i
> think) the image is locked for a longer time than the actual writing with
> libtiff takes. That blocks exiv2 for quite some time until it gets write
> access to that file, on my machine around 50-60 ms, which is 100 times of
> the actual writing time. So that's really bad.
>
> Now I'm reviewing my other options. As I'm going to write the geo
> information using GDAL i think it should also use if to write the metadata
> (I did not test it, but I think it will also have to wait for the drive to
> be finished, but then I would stick completely with GDAL, as it's (at the
> moment) slower writing compared to libtiff is still a factor of >10 faster
> than the lock takes).
>
> So my question now is, if it is possible to write all kinds of tags using
> GDAL.

Short answer: no. Only a few TIFF tags can be written currently (the one
listed in "Metadata" paragraph of http://www.gdal.org/frmt_gtiff.html)

Adding support for writing XMP (the user would provide the XML) would be easy.
Writting EXIF data would probably be a bit more involved.

> gdalinfo reports some of the tags written with exiv2, but not all,
> for examples Exif.Photo.Make is not listed. And if so how do I do that?

The list of EXIF tags that are read currently is in gcore/gdalexif.h

> I
> was able to add custom tags using SetMetaData() on the dataset, but these
> can (not surprizingly) not be recognized by the applications, which will
> use my images.
> Maybe you or others can help me with that.

One option if you want to act directly with libtiff, but don't want to close
the GDAL dataset and reopen with libtiff afterwards is to call
GetInternalHandle(NULL) on the GDAL dataset object. It returns a TIFF* handle.
However this is semi-private / implementation detail and what you could do
with it could potentially interact badly with what GDAL does, so to be used
only if really necessary.

Even

>
> Thanks for your assistance,
> Immanuel
>
> 2015-08-07 20:25 GMT+02:00 Even Rouault :
> > Le jeudi 06 ao?t 2015 17:29:06, Immanuel Weber a ?crit :
> > > Hi all,
> > >
> > > I'm working on an application where lots of images have to be written.
> > > Until now I'm using libtiff for that task. But as I want to add
> > > georeferencing and the like I'm having a look at GDAL right now. I did
> > > a quick evaluation of its performance related to libtiff and
> > > unfortunately it has quite a lot of overhead. I first tested GDAL 1.10
> > > and it was a factor of 6-7 slower than the direct write with libtiff.
> > > With GDAL 2.0 it got a little better with a factor of 4. (I took a 1,5
> > > MP image and wrote for a few hundred times to the disk and libtiff
> > > takes about 3 ms for
> >
> > that,
> >
> > > where as GDAL around 12 ms). I read about a performance issue with
> > > GDALDataSet::RasterIO vs GDALRasterBand::ReadBlock and tried to
> > > implement the storage using GDALRasterBand::WriteBlock* but that
> > > almost took more time than the GDALDataSet::RasterIO version.
> > >
> > > Is there any other way to write tiffs quickly with GDAL, or is that
> > > kind
> >
> > of
> >
> > > overhead expected for the added functionality?
> >
> > Immanuel,
> >
> > WriteBlock() with a INTERLEAVE=BAND file should be really close to pure
> > libtiff
> > performance. Other cases will involve a few extra buffer copies.
> >
> > Another option is to write the imagery with libtiff as you did, and then
> > open
> > the file in update mode with GDAL to add the georeferencing. This will
> > just rewrite the TIFF header.
> >
> > > Thanks and best regards,
> > > Immanuel
> > >
> > > *I wasn't really successful in doing that, because I didn't find a way
> > > to write pixel interleaved images with that
> >
> > GDAL blocks are per band. But GDAL will take care of combining several
> > blocks
> > of same (x,y) for a INTERLEAVE=PIXEL TIFF. To get the best performance,
> > in INTERLEAVE=PIXEL, you should do (pseudo-code):
> >
> > for y in yblocks:
> > for x in xblocs:
> > for b in bands:
> > GetRasterBand(b)->WriteBlock(x,y, buffer)
> >
> > to avoid partial TIFF tiles/strips to be written, read and re-written
> > when the
> > data for the band comes.
> >
> > Even
> >
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

--
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150909/0b6f23db/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Sep 10 08:11:05 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Thu, 10 Sep 2015 15:11:05 +0000 (UTC)
Subject: [gdal-dev] GDAL error from Mapserver 7.0
Message-ID: <loom.20150910T170518-601@post.gmane.org>

Hi,

We tried to update Mapserver from 7.0b1 into 7.0.0 and GDAL version was
rised from 1.11.2 into 2.0.0. However, Spatialite tileindex layer stopped
working.

The error that comes from Mapserver is

Program terminated with signal 11, Segmentation fault.
#0  0x00007efd01639b8e in OGRSQLiteTableLayer::Initialize (this=0x26013a0,
pszTableName=0x24b30a0 "usimmat_kuvat", bIsVirtualShapeIn=<value optimized
out>, bDeferredCreation=<value optimized out>)
    at ogrsqlitetablelayer.cpp:200
200                 if( poFeatureDefn->GetGeomFieldCount() == 0 )


This part looks odd is pszTableName=0x24b30a0 "usimmat_kuvat". The table
name in the mapfile and in Spatialite is actually "uusimmat_kuvat"

Any idea what happens and where to search the reason for the error?

-Jukka Rahkonen-


From even.rouault at spatialys.com  Thu Sep 10 08:44:45 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 10 Sep 2015 17:44:45 +0200
Subject: [gdal-dev] GDAL error from Mapserver 7.0
In-Reply-To: <loom.20150910T170518-601@post.gmane.org>
References: <loom.20150910T170518-601@post.gmane.org>
Message-ID: <201509101744.46104.even.rouault@spatialys.com>

Le jeudi 10 septembre 2015 17:11:05, Jukka Rahkonen a ?crit :
> Hi,
> 
> We tried to update Mapserver from 7.0b1 into 7.0.0 and GDAL version was
> rised from 1.11.2 into 2.0.0. However, Spatialite tileindex layer stopped
> working.
> 
> The error that comes from Mapserver is
> 
> Program terminated with signal 11, Segmentation fault.
> #0  0x00007efd01639b8e in OGRSQLiteTableLayer::Initialize (this=0x26013a0,
> pszTableName=0x24b30a0 "usimmat_kuvat", bIsVirtualShapeIn=<value optimized
> out>, bDeferredCreation=<value optimized out>)
>     at ogrsqlitetablelayer.cpp:200
> 200                 if( poFeatureDefn->GetGeomFieldCount() == 0 )
> 
> 
> This part looks odd is pszTableName=0x24b30a0 "usimmat_kuvat". The table
> name in the mapfile and in Spatialite is actually "uusimmat_kuvat"

The crash is indeed linked to the fact that a wrong table name was passed. And 
to reach that point the table name was of the form 
"table_name(geom_column_name)", right ?

Fixed by https://trac.osgeo.org/gdal/ticket/6103

As far as the why there's this one character offset, the fundamental cause for 
the issue, I don't know without having a way to reproduce.

> 
> Any idea what happens and where to search the reason for the error?
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From devidatta.m at cloudjetlabs.com  Thu Sep 10 22:57:21 2015
From: devidatta.m at cloudjetlabs.com (devidatta.m)
Date: Thu, 10 Sep 2015 22:57:21 -0700 (PDT)
Subject: [gdal-dev] error in converting tiff to terrain
Message-ID: <1441951041127-5223682.post@n6.nabble.com>

hello everyone,

i have a custom tiff file of high resolution.its around 3.5 gb. i was trying
to convert it to terrain format. i am using gdal2srtmtiles.py to do this.its
converting it. but if i am giving high zoom level then its continiously
giving error that "Buffer too small" and the generated terrains are also not
correct. what might be the problem?? i am not getting this as i am new to
this field.

COMMAND:"python gdal2srtmtiles.py --cesium -z 0-15 -p geodetic source.tiff
terrain"
ERROR : "Buffer too small"

can anyone please tell what might be the problem.any help is welcome.thanks
in advance.

with regards
datta



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/error-in-converting-tiff-to-terrain-tp5223682.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From hrz at geodata.soton.ac.uk  Thu Sep 10 23:43:59 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Fri, 11 Sep 2015 07:43:59 +0100
Subject: [gdal-dev] error in converting tiff to terrain
In-Reply-To: <1441951041127-5223682.post@n6.nabble.com>
References: <1441951041127-5223682.post@n6.nabble.com>
Message-ID: <55F2782F.6050902@geodata.soton.ac.uk>


Hello Datta,

I believe `gdal2srtmtiles.py` is a patched version of `gdal2tiles.py` 
and is not
part of the official GDAL distribution, so help may be limited on this 
mailing
list.  I can't find any reference to it being actively supported or 
developed.

You could also try <https://github.com/geo-data/cesium-terrain-builder> for
generating terrains.

Best regards,

Homme

On 11/09/15 06:57, devidatta.m wrote:
> hello everyone,  > > i have a custom tiff file of high resolution.its around 3.5 gb. i 
was trying > to convert it to terrain format. i am using 
gdal2srtmtiles.py to do this.its > converting it. but if i am giving 
high zoom level then its continiously > giving error that "Buffer too 
small" and the generated terrains are also not > correct. what might be 
the problem?? i am not getting this as i am new to > this field. > > 
COMMAND:"python gdal2srtmtiles.py --cesium -z 0-15 -p geodetic 
source.tiff > terrain" > ERROR : "Buffer too small" > > can anyone 
please tell what might be the problem.any help is welcome.thanks > in 
advance. > > with regards > datta > > > > -- > View this message in 
context: 
http://osgeo-org.1560.x6.nabble.com/error-in-converting-tiff-to-terrain-tp5223682.html 
 > Sent from the GDAL - Dev mailing list archive at Nabble.com. > 
_______________________________________________ > gdal-dev mailing list 
 > gdal-dev at lists.osgeo.org > 
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150911/4026f1ac/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Sep 11 00:40:03 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 11 Sep 2015 07:40:03 +0000 (UTC)
Subject: [gdal-dev] GDAL error from Mapserver 7.0
References: <loom.20150910T170518-601@post.gmane.org>
	<201509101744.46104.even.rouault@spatialys.com>
Message-ID: <loom.20150911T093739-57@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

 
> The crash is indeed linked to the fact that a wrong table name was passed.
And 
> to reach that point the table name was of the form 
> "table_name(geom_column_name)", right ?
> 
> Fixed by https://trac.osgeo.org/gdal/ticket/6103
> 
> As far as the why there's this one character offset, the fundamental cause
for 
> the issue, I don't know without having a way to reproduce.

Hi,

I got a hint that it might originate from the SQLite driver as well but we
have not yet understood the code well enough:



    size_t nFromPos = osSQLBase.ifind(" from ");
    if (nFromPos == std::string::npos)
    {
        return std::pair<OGRLayer*,
IOGRSQLiteGetSpatialWhere*>((OGRLayer*)NULL, (IOGRSQLiteGetSpatialWhere*)NULL);
    }

    char chQuote = osSQLBase[nFromPos + 6];
    int bInQuotes = (chQuote == '\'' || chQuote == '"' );
    CPLString osBaseLayerName;
    for( i = nFromPos + 6 + (bInQuotes ? 1 : 0);
         i < osSQLBase.size(); i++ )
    {
        if (osSQLBase[i] == chQuote && i + 1 < osSQLBase.size() &&
            osSQLBase[i + 1] == chQuote )
        {
            osBaseLayerName += osSQLBase[i];
            i++;
        }
        else if (osSQLBase[i] == chQuote && bInQuotes)
        {
            i++;
            break;
        }
        else if (osSQLBase[i] == ' ' && !bInQuotes)
            break;
        else
            osBaseLayerName += osSQLBase[i];
    }

-Jukka-


From even.rouault at spatialys.com  Fri Sep 11 01:05:29 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Sep 2015 10:05:29 +0200
Subject: [gdal-dev] GDAL error from Mapserver 7.0
In-Reply-To: <loom.20150911T093739-57@post.gmane.org>
References: <loom.20150910T170518-601@post.gmane.org>
	<201509101744.46104.even.rouault@spatialys.com>
	<loom.20150911T093739-57@post.gmane.org>
Message-ID: <201509111005.30153.even.rouault@spatialys.com>

Le vendredi 11 septembre 2015 09:40:03, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> spatialys.com> writes:
> > The crash is indeed linked to the fact that a wrong table name was
> > passed.
> 
> And
> 
> > to reach that point the table name was of the form
> > "table_name(geom_column_name)", right ?
> > 
> > Fixed by https://trac.osgeo.org/gdal/ticket/6103
> > 
> > As far as the why there's this one character offset, the fundamental
> > cause
> 
> for
> 
> > the issue, I don't know without having a way to reproduce.
> 
> Hi,
> 
> I got a hint that it might originate from the SQLite driver as well but we
> have not yet understood the code well enough:

Oh.... indeed. I see now what is wrong. You have been correctly hinted.
Fixed by https://trac.osgeo.org/gdal/ticket/6107
The issue was also present in 1.11
The code wasn't careful enough and confused successive identical regular 
characters with consecutive quote characters...

> 
> 
> 
>     size_t nFromPos = osSQLBase.ifind(" from ");
>     if (nFromPos == std::string::npos)
>     {
>         return std::pair<OGRLayer*,
> IOGRSQLiteGetSpatialWhere*>((OGRLayer*)NULL,
> (IOGRSQLiteGetSpatialWhere*)NULL); }
> 
>     char chQuote = osSQLBase[nFromPos + 6];
>     int bInQuotes = (chQuote == '\'' || chQuote == '"' );
>     CPLString osBaseLayerName;
>     for( i = nFromPos + 6 + (bInQuotes ? 1 : 0);
>          i < osSQLBase.size(); i++ )
>     {
>         if (osSQLBase[i] == chQuote && i + 1 < osSQLBase.size() &&
>             osSQLBase[i + 1] == chQuote )
>         {
>             osBaseLayerName += osSQLBase[i];
>             i++;
>         }
>         else if (osSQLBase[i] == chQuote && bInQuotes)
>         {
>             i++;
>             break;
>         }
>         else if (osSQLBase[i] == ' ' && !bInQuotes)
>             break;
>         else
>             osBaseLayerName += osSQLBase[i];
>     }
> 
> -Jukka-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Sep 11 01:19:17 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Sep 2015 10:19:17 +0200
Subject: [gdal-dev] GDAL error from Mapserver 7.0
In-Reply-To: <201509111005.30153.even.rouault@spatialys.com>
References: <loom.20150910T170518-601@post.gmane.org>
	<loom.20150911T093739-57@post.gmane.org>
	<201509111005.30153.even.rouault@spatialys.com>
Message-ID: <201509111019.17174.even.rouault@spatialys.com>

Le vendredi 11 septembre 2015 10:05:29, Even Rouault a ?crit :
> Le vendredi 11 septembre 2015 09:40:03, Jukka Rahkonen a ?crit :
> > Even Rouault <even.rouault <at> spatialys.com> writes:
> > > The crash is indeed linked to the fact that a wrong table name was
> > > passed.
> > 
> > And
> > 
> > > to reach that point the table name was of the form
> > > "table_name(geom_column_name)", right ?
> > > 
> > > Fixed by https://trac.osgeo.org/gdal/ticket/6103
> > > 
> > > As far as the why there's this one character offset, the fundamental
> > > cause
> > 
> > for
> > 
> > > the issue, I don't know without having a way to reproduce.
> > 
> > Hi,
> > 
> > I got a hint that it might originate from the SQLite driver as well but
> > we
> 
> > have not yet understood the code well enough:
> Oh.... indeed. I see now what is wrong. You have been correctly hinted.
> Fixed by https://trac.osgeo.org/gdal/ticket/6107
> The issue was also present in 1.11
> The code wasn't careful enough and confused successive identical regular
> characters with consecutive quote characters...

As a workaround rewrite your SQL statement to quote the table identifier

SELECT .... FROM "uusimmat_kuvat"
or
SELECT .... FROM 'uusimmat_kuvat'

(but it might be MapServer that writes this SQL statement from the table name. 
But you can try putting the plain SQL statement as the DATA)

> 
> >     size_t nFromPos = osSQLBase.ifind(" from ");
> >     if (nFromPos == std::string::npos)
> >     {
> >     
> >         return std::pair<OGRLayer*,
> > 
> > IOGRSQLiteGetSpatialWhere*>((OGRLayer*)NULL,
> > (IOGRSQLiteGetSpatialWhere*)NULL); }
> > 
> >     char chQuote = osSQLBase[nFromPos + 6];
> >     int bInQuotes = (chQuote == '\'' || chQuote == '"' );
> >     CPLString osBaseLayerName;
> >     for( i = nFromPos + 6 + (bInQuotes ? 1 : 0);
> >     
> >          i < osSQLBase.size(); i++ )
> >     
> >     {
> >     
> >         if (osSQLBase[i] == chQuote && i + 1 < osSQLBase.size() &&
> >         
> >             osSQLBase[i + 1] == chQuote )
> >         
> >         {
> >         
> >             osBaseLayerName += osSQLBase[i];
> >             i++;
> >         
> >         }
> >         else if (osSQLBase[i] == chQuote && bInQuotes)
> >         {
> >         
> >             i++;
> >             break;
> >         
> >         }
> >         else if (osSQLBase[i] == ' ' && !bInQuotes)
> >         
> >             break;
> >         
> >         else
> >         
> >             osBaseLayerName += osSQLBase[i];
> >     
> >     }
> > 
> > -Jukka-
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Fri Sep 11 02:32:15 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Fri, 11 Sep 2015 09:32:15 +0000 (UTC)
Subject: [gdal-dev] GDAL error from Mapserver 7.0
References: <loom.20150910T170518-601@post.gmane.org>
	<loom.20150911T093739-57@post.gmane.org>
	<201509111005.30153.even.rouault@spatialys.com>
	<201509111019.17174.even.rouault@spatialys.com>
Message-ID: <loom.20150911T112420-812@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:



> As a workaround rewrite your SQL statement to quote the table identifier
> 
> SELECT .... FROM "uusimmat_kuvat"
> or
> SELECT .... FROM 'uusimmat_kuvat'
 
Thanks, it is good to show the workaround on the mailing list because it
will take some time before we have 1.11.3 and 2.0.1 and users and distros
have upgraded.

-Jukka-


From stefan.ziegler.de at gmail.com  Mon Sep 14 02:46:45 2015
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Mon, 14 Sep 2015 11:46:45 +0200
Subject: [gdal-dev] gdaladdo problems with compression
Message-ID: <CAJvo+1_XYKUVdhG=xwh9Ov7vXUPMpiToMgVyLwVjdDAFAg9ntQ@mail.gmail.com>

Hi

we are facing problems with the compression of the overviews we are adding
with gdaladdo. The filesize does not differ whether we are using
compression parameters or not. The filesize of the input raster is approx.
100 mb. The following both commands resulting in an identical filesize of
approx. 140mb.

gdaladdo -r average  591252_12_5cm.tif 2 4 8 16 32

gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
591252_12_5cm.tif 2 4 8 16 32

The input raster is tiled and compressed with deflate (and predictor=2)

I would expect that the latter one would be smaller. Did we misunderstand
something? Or do we use the parameters the wrong way?

GDAL 1.11.2 and dev.

regards
Stefan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150914/b0f25bbf/attachment.html>

From even.rouault at spatialys.com  Mon Sep 14 02:56:04 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Sep 2015 11:56:04 +0200
Subject: [gdal-dev] gdaladdo problems with compression
In-Reply-To: <CAJvo+1_XYKUVdhG=xwh9Ov7vXUPMpiToMgVyLwVjdDAFAg9ntQ@mail.gmail.com>
References: <CAJvo+1_XYKUVdhG=xwh9Ov7vXUPMpiToMgVyLwVjdDAFAg9ntQ@mail.gmail.com>
Message-ID: <201509141156.04400.even.rouault@spatialys.com>

Le lundi 14 septembre 2015 11:46:45, Stefan Ziegler a ?crit :
> Hi
> 
> we are facing problems with the compression of the overviews we are adding
> with gdaladdo. The filesize does not differ whether we are using
> compression parameters or not. The filesize of the input raster is approx.
> 100 mb. The following both commands resulting in an identical filesize of
> approx. 140mb.
> 
> gdaladdo -r average  591252_12_5cm.tif 2 4 8 16 32
> 
> gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
> PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
> 591252_12_5cm.tif 2 4 8 16 32

Stefan,

The config options are only used for external overviews (-ro flag). For internal 
overviews, the same compression scheme as the full resolution image is used. 
In theory they could also use a different compression scheme, but this isn't 
currently implemented.

Even

> 
> The input raster is tiled and compressed with deflate (and predictor=2)
> 
> I would expect that the latter one would be smaller. Did we misunderstand
> something? Or do we use the parameters the wrong way?
> 
> GDAL 1.11.2 and dev.
> 
> regards
> Stefan

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From stefan.ziegler.de at gmail.com  Mon Sep 14 04:38:42 2015
From: stefan.ziegler.de at gmail.com (Stefan Ziegler)
Date: Mon, 14 Sep 2015 13:38:42 +0200
Subject: [gdal-dev] gdaladdo problems with compression
In-Reply-To: <201509141156.04400.even.rouault@spatialys.com>
References: <CAJvo+1_XYKUVdhG=xwh9Ov7vXUPMpiToMgVyLwVjdDAFAg9ntQ@mail.gmail.com>
	<201509141156.04400.even.rouault@spatialys.com>
Message-ID: <CAJvo+1_LW6pCewO7DSeWe_HOFuZpZK-3Xt8pBO0F-hj6RF=mEw@mail.gmail.com>

Thanks Even.

I was afraid that there will be no compression applied at all but this
behaviour is fine.

The geotiff where I add the overviews is the result of a gdalwarp process
(tiled, deflate, preditor=2). When I gdal_translate this geotiff with the
very same compression parameters I gain approx. 10 percent space. Sounds
this comprehensible? (I'm pretty sure there was once some discussion on the
mailing list but couldn't find anything).

regards
Stefan

On Mon, Sep 14, 2015 at 11:56 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le lundi 14 septembre 2015 11:46:45, Stefan Ziegler a ?crit :
> > Hi
> >
> > we are facing problems with the compression of the overviews we are
> adding
> > with gdaladdo. The filesize does not differ whether we are using
> > compression parameters or not. The filesize of the input raster is
> approx.
> > 100 mb. The following both commands resulting in an identical filesize of
> > approx. 140mb.
> >
> > gdaladdo -r average  591252_12_5cm.tif 2 4 8 16 32
> >
> > gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
> > PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
> > 591252_12_5cm.tif 2 4 8 16 32
>
> Stefan,
>
> The config options are only used for external overviews (-ro flag). For
> internal
> overviews, the same compression scheme as the full resolution image is
> used.
> In theory they could also use a different compression scheme, but this
> isn't
> currently implemented.
>
> Even
>
> >
> > The input raster is tiled and compressed with deflate (and predictor=2)
> >
> > I would expect that the latter one would be smaller. Did we misunderstand
> > something? Or do we use the parameters the wrong way?
> >
> > GDAL 1.11.2 and dev.
> >
> > regards
> > Stefan
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150914/77c3aea1/attachment.html>

From even.rouault at spatialys.com  Mon Sep 14 04:52:16 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Sep 2015 13:52:16 +0200
Subject: [gdal-dev] gdaladdo problems with compression
In-Reply-To: <CAJvo+1_LW6pCewO7DSeWe_HOFuZpZK-3Xt8pBO0F-hj6RF=mEw@mail.gmail.com>
References: <CAJvo+1_XYKUVdhG=xwh9Ov7vXUPMpiToMgVyLwVjdDAFAg9ntQ@mail.gmail.com>
	<201509141156.04400.even.rouault@spatialys.com>
	<CAJvo+1_LW6pCewO7DSeWe_HOFuZpZK-3Xt8pBO0F-hj6RF=mEw@mail.gmail.com>
Message-ID: <201509141352.16452.even.rouault@spatialys.com>

Le lundi 14 septembre 2015 13:38:42, Stefan Ziegler a ?crit :
> Thanks Even.
> 
> I was afraid that there will be no compression applied at all but this
> behaviour is fine.
> 
> The geotiff where I add the overviews is the result of a gdalwarp process
> (tiled, deflate, preditor=2). When I gdal_translate this geotiff with the
> very same compression parameters I gain approx. 10 percent space. Sounds
> this comprehensible? (I'm pretty sure there was once some discussion on the
> mailing list but couldn't find anything).

Yes, see https://trac.osgeo.org/gdal/wiki/UserDocs/GdalWarp#GeoTIFFoutput-coCOMPRESSisbroken

> 
> regards
> Stefan
> 
> On Mon, Sep 14, 2015 at 11:56 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le lundi 14 septembre 2015 11:46:45, Stefan Ziegler a ?crit :
> > > Hi
> > > 
> > > we are facing problems with the compression of the overviews we are
> > 
> > adding
> > 
> > > with gdaladdo. The filesize does not differ whether we are using
> > > compression parameters or not. The filesize of the input raster is
> > 
> > approx.
> > 
> > > 100 mb. The following both commands resulting in an identical filesize
> > > of approx. 140mb.
> > > 
> > > gdaladdo -r average  591252_12_5cm.tif 2 4 8 16 32
> > > 
> > > gdaladdo -r average --config COMPRESS_OVERVIEW JPEG --config
> > > PHOTOMETRIC_OVERVIEW YCBCR --config INTERLEAVE_OVERVIEW PIXEL
> > > 591252_12_5cm.tif 2 4 8 16 32
> > 
> > Stefan,
> > 
> > The config options are only used for external overviews (-ro flag). For
> > internal
> > overviews, the same compression scheme as the full resolution image is
> > used.
> > In theory they could also use a different compression scheme, but this
> > isn't
> > currently implemented.
> > 
> > Even
> > 
> > > The input raster is tiled and compressed with deflate (and predictor=2)
> > > 
> > > I would expect that the latter one would be smaller. Did we
> > > misunderstand something? Or do we use the parameters the wrong way?
> > > 
> > > GDAL 1.11.2 and dev.
> > > 
> > > regards
> > > Stefan
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Mon Sep 14 06:29:30 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 14 Sep 2015 15:29:30 +0200
Subject: [gdal-dev] 2.0.1 (and 1.11.3) release schedule ?
In-Reply-To: <201509041707.26283.even.rouault@spatialys.com>
References: <201508132229.31148.even.rouault@spatialys.com>
	<201509041707.26283.even.rouault@spatialys.com>
Message-ID: <201509141529.30897.even.rouault@spatialys.com>

Le vendredi 04 septembre 2015 17:07:26, Even Rouault a ?crit :
> Hi,
> 
> Just a reminder there's one 1 week left before the release candidates are
> cut. Time to push your fixes.

Unless anyone has a last minute fix, I'll start "soon" to prepare them.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Mon Sep 14 14:42:58 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 14 Sep 2015 14:42:58 -0700
Subject: [gdal-dev] GDAL testing
In-Reply-To: <55EC5B4D.4090405@gmail.com>
References: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>
	<55EC5B4D.4090405@gmail.com>
Message-ID: <CACmBxyv1NMOjiDgNZG10Cw2Vrxd3XfO0jY5nUhLK9bNFZ65U5A@mail.gmail.com>

Hi Dmitry,

I didn't totally understand your question.  I don't have autotest2 really
out yet.  You are welcome to use the sample test files that I posted in any
way that the Apache 2.0 license allows.

-kurt

On Sun, Sep 6, 2015 at 8:27 AM, Dmitry Baryshnikov <bishop.dev at gmail.com>
wrote:

> Hi Kurt,
>
> During code sprint in Korea (FOSS4G 2015) I plan to play with new approach
> of CMake fro GDAL. The one of experiments will be try to use CTest. As I
> plan restructure the sources tree, I can try to integrate you work on
> autotest2 and CTest. Also we can try to create new test directory structure
> more compatible for test and sources tree (this is about you wrote:
> Probably should move python code to also match the C++ tree.  e.g.
> tiff_read_test.py -> autotest2/py/frmts/gtiff/tiff_read_test.py).
> How can get you tests? What do I need to use autotest2?
>
> Best regards,
>     Dmitry
>
> 05.09.2015 20:37, Kurt Schwehr ?????:
>
> (Subject change to focus on testing)
>
> Hi all,
>
> First off... what GDAL has with autotest, travis-ci and coverity is
> awesome!
>
> Thoughts / discussion more than welcome!
>
> For my production work, I'm not able to use the autotest python code
> because of its non-unittest architecture.  So... I started creating python
> unittest and C++ gunit based tests.  I use autotest2 in Google's internal
> continuous integration system in our main code base.  I'm using Google's
> build system... I've got nothing started for running the C++ tests outside
> of Google.
>
> Apologies for not even getting out at least samples of autotest2 for folks
> to inspect and comment on.  My intention is to put what I have in a git
> repo and the to start discussions as to what (if anything) GDAL community
> wants to do with autotest2.    I was hoping to get a lot more coverage and
> get GDAL 2.x.x support, but that will have to come later.  It's only 14K
> lines at this point (optimistically 2-3% done), but it has been a huge help
> for me especially with in upgrading versions of gdal and catching bugs in
> support libs & development toolchains.
>
> The tests are more focused on test isolation than autotest.  This allows
> for a lot more parallelism in testing.  e.g.  It's fair game to run all
> tests at the same time on the same machine.
>
> find . -name \*.py | xargs wc -l | tail -1
>  10684 total
>
> find . -name \*.cc -o -name \*.h | xargs wc -l | tail -1
>   3734 total
>
> Where GDAL's autotest is 204K lines:
>
> find . -name \*.py | xargs wc -l | tail -1
>   193994 total
> find . -name \*.c\* -o -name \*.h | xargs wc -l | tail -1
>    10471 total
>
> Here are some samples:
>
> C++ tests use  C++11, gunit, google logging, gflags:  (Hoping for C++14
> soon.. e.g. make_unique)
> - autotest2/cpp/port/cpl_conv_test.cc
> <https://gist.github.com/schwehr/13137d826763763fb031> (Yes, this is
> massively boring code)
> - autotest2/cpp/ogr/ogrpoint_test.cc
> <https://gist.github.com/schwehr/c8ee86a6f6a1c1cc043b>
> - autotest2/cpp/ogr/ogrsf_frmts/geojson/geojson_test.cc
> <https://gist.github.com/schwehr/bc44b91a37cd621212c4>
>
> Python pretty much follows the autotest layout, but with util files in the
> same directory.  Assumes python 2.7 or >= 3.4 (have not tried py3 yet)
> - autotest2/gcore/gcore_util.py
> <https://gist.github.com/schwehr/c143927ca25d03a10265>
> - autotest2/gdrivers/gdrivers_util.py
> <https://gist.github.com/schwehr/dd75f73cedf8f7b5357e>
> - autotest2/gdrivers/tiff_read_test.py
> <https://gist.github.com/schwehr/a35b2bc8a7956ef1f620> (I'm leading
> towards moving driver tests in gcore to gdrivers)
> - autotest2/ogr/geojson_test.py
> <https://gist.github.com/schwehr/6cbdc3482055d2237ad2>
>
> Probably should move python code to also match the C++ tree.  e.g.
>
>     tiff_read_test.py -> autotest2/py/frmts/gtiff/tiff_read_test.py
>
> I'm (mostly) following Google's style guides.  Public versions here: C++
> <https://google-styleguide.googlecode.com/svn/trunk/cppguide.html> Python
> <https://google-styleguide.googlecode.com/svn/trunk/pyguide.html>
>
> All C++ should be formatted with "clang-format --style=Google"
>
> What does autotest2 not do?
>
> Would like to eventually do (unsorted):
> - Test error handling on a range of corrupt data sources
> - Fuzz testing, ASAN/MSAN/TSAN/Valgrind/Heap checks  (I've done some MSAN
> & heap checkers by hand)
> - Performance testing - time and memory usage
> - Test the C API at the C level
> - Test platforms other than Linux (MS Win*, Mac OSX, Android, iOS, other
> embedded oses, BSD*, Solaris, HPUX, etc)
> - Have more detailed language binding tests for java, ruby, perl, php
> - Coverage checking
> - Test parallel processing and multithreading
> - Test networking (I need to think through isolation)
> - Test multiple configurations (e.g. all drivers and features enables vrs
> minimal build).
> - Check which system calls are used by each driver for read and for write
> - Check i18n support.
> - Check distribution packaging
> - Validating that the given build options result in the expect available
> features
>
> Probably out of scope:
> - Test for support from older platforms & C++ older than C++11
> - Actual sandbox checks
> - Test other bindings to GDAL's C or C++ API such as Fiona & Shapely
> - Integration tests (e.g. GRASS, QGIS, mapserv, GeoDjango, etc).
> - ABI compatibility checks
> - Older versions of dependent libs e.g. netcdf/hdf4/5, kakadu, openjpeg,
> etc.
>
> -kurt
> Engineer at Google
>
>
> On Sat, Sep 5, 2015 at 7:48 AM, Dmitry Baryshnikov <
> <bishop.dev at gmail.com>bishop.dev at gmail.com> wrote:
>
>> Hi Even,
>>
>> 05.09.2015 17:10, Even Rouault ?????:
>>
>>> Dmitry,
>>>
>>> During the code sprint in FOSS4G 2015 (Korea, Seoul) I plan to start
>>>> refactoring Cmake for GDAL (everybody are welcome
>>>> http://2015.foss4g.org/programme/code-sprint/). This is good starting
>>>> point to try release an idea to reformat source tree (combine drivers on
>>>> some principles - raster/vector/raster+vector). I digging the mailing
>>>> list, but didn't found discussion started by Even about this.
>>>>
>>> Regarding unified drivers, it was a bit mentionned in
>>> https://trac.osgeo.org/gdal/wiki/rfc46_gdal_ogr_unification . Basically
>>> the
>>> PCIDSK drivers have been merged in frmts/pcidsk, the PDF ones in
>>> frmts/pdf.
>>> And the raster side of GPKG has been added to the existing
>>> ogr/ogrsf_frmts/geopackage
>>> Potential changes on the tree structure were left out in the "Potential
>>> changes that are *NOT* included in this RFC" paragraph.
>>>
>> I plan to experiment with this and if I get good results, RFC will be
>> written.
>>
>>> Also we have
>>>> new type of drivers - network. So, how it'll be best to organise
>>>> sources?
>>>> This can be not only drivers, but the whole source tree. How should the
>>>> ideal GDAL source tree looks like?
>>>>
>>>> Also I plan:
>>>> 1. Move all internal libraries (zlib, libtiff, libjpeg, etc.) to
>>>> separate github repos to use CMake ExternalProject feature.
>>>>
>>> Just to give some context: the point for the internal libraries was to
>>> have a
>>> no-brainer way of building GDAL without any prerequisite.
>>> - internal zlib is identical to its upstream v1.2.3 AFAIK
>>> - internal libtiff: most files are identical to libtiff CVS, but a few
>>> ones
>>> (tiffconf.h, tif_config.h) have been modified for integration with GDAL
>>> CPL, and
>>> tif_vsi.c is GDAL specific (I/O implementation) + a build time hack for
>>> TIFF
>>> JPEG 12 bit support
>>> - internal libjpeg is mostly upstream libjpeg v6b + one patch. There's
>>> also
>>> the build hack for libjpeg12
>>>
>> I only plan to move this internal libraries in separate repos, not to
>> link official ones. So this is only give more structured sources tree.
>>
>>>
>>> 2. Remove any other building systems
>>>>
>>> That sounds ambitious. Given the complexity and maturity of our current
>>> build
>>> systems, I guess this would take some time to have CMake catch up.
>>>
>> Yes, certainly. But anyhow current CMake branch not fully consistent for
>> current build system. So this have to be done.
>>
>>>
>>> 3. Try CTest for testing
>>>>
>>> What do you think it will bring w.r.t our current testing system ? Do we
>>> want
>>> to be dependant of a particular build system for our tests ?
>>> Regarding testing, I've somehow understood Kurt had mentionned plans for
>>> a
>>> "gdalautotest2"
>>>
>> This is only subject of experiments. Let's try CTest and see if it fits.
>>
>>>
>>> Regarding all the above, I assume you mean in a fork of yours ?
>>>
>> Yes. All experiments will be on forked GDAL in separate branch.
>>
>>>
>>> As for me the ideal structure should looks like:
>>>> + apps
>>>> + autotests
>>>> + bindings
>>>> + core
>>>>     + port
>>>>     + ogr
>>>>     + gcore
>>>>
>>> gnm core would go here too ?
>>>
>> Yes
>>
>>>
>>> + cmake
>>>> + data
>>>> + docs
>>>>     + doxygen
>>>>     + readme
>>>> + drivers
>>>>     + raster
>>>>     + vector
>>>>     + network
>>>>     + combined
>>>> + CMakeLists.txt
>>>> + LICENSE
>>>>
>>>> So, at the root of sources tree we will have only 8 folders and 2 files.
>>>>
>>> Is the churn in the tree structure worth the effort ? Be aware that
>>> there are a
>>> number of interdependencies between drivers, so this might require
>>> fixing a
>>> number of source files. What advantages do you see in a new structure ?
>>>
>> 1. More ease to understand sources tree for novice.
>> 2. More useful for CMake macro. In current release there are a lot of
>> hardcoded things. Macro give more flexibility.
>> 3. More ease to add some new check needed by separate drivers.
>> 4. More configurable (ease selected depended libraries installed in OS,
>> or should be loaded via ExternalProject), more dependence checks.
>> 5. May be CPack using in future to create distros.
>>
>>>
>>> I'm afraid that if you want to change multiple things at a time (build
>>> system,
>>> testing mechanisms, tree structure), you will never manage to get a
>>> working
>>> result. Incremental approaches when feasible are less risky (but
>>> admitedly
>>> involve potentially a larger cumulated effort).
>>>
>> Yes, you may be right. But it seems to me that current Cmake version is
>> too complicated than it can be. If Ican improve it it'll solve lot of
>> problems, if not - ok this will be only an unsuccessful experiment.
>>
>>>
>>> Even
>>>
>>> I do not insist, maybe it's a crazy idea. But as was the discussion of
>> unification, it seemed to me that this worth trying during improvements
>> Cmake build system.
>>
>> Best regards,
>>     Dmitry
>
>
>
>


-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150914/011a3a9e/attachment-0001.html>

From bertelli at chartasrl.eu  Tue Sep 15 00:52:23 2015
From: bertelli at chartasrl.eu (Carlo A. Bertelli (Charta s.r.l.))
Date: Tue, 15 Sep 2015 09:52:23 +0200
Subject: [gdal-dev] How to deal with IIP image via WMS minidriver?
In-Reply-To: <CAH-RUCQU76bn8mjbjimYbU9O+mRg4xu+Q=UYma0ns52qyG=tjA@mail.gmail.com>
References: <CALc8-VLVgSzL=tergaTMdCW9-ujyZ1DeutTHPNn6geOHx6PurA@mail.gmail.com>
	<CAH-RUCQU76bn8mjbjimYbU9O+mRg4xu+Q=UYma0ns52qyG=tjA@mail.gmail.com>
Message-ID: <CALc8-V+Ox5hY_Aa5t9-WipG3rZnjEc38fDmYEDcBb4kfUUt0Ug@mail.gmail.com>

Dear Petr,
I'm very fond of georeferencer.com; for many topographic and geographic
maps it's more effective than using a desktop application like QGIS.

The idea of implementing IIP/IIIF inside gdal has several reasons.
The first one is due to rights over the images. They are meant for personal
use, sometimes institutions are bound to contracts with private firms that
would not allow them to put these on georeferencer (I'm strongly againt
these agreements, but they are here to stay...), so hosting them elsewhere
would be at least embarassing if not illegitimate (there should also be a
way to open an arbitrary souce besides uploaded images, which is not the
case).
Another one is the ability of comparing historical maps one with another,
which is sometimes useful, besides a comparison between an unreferenced
image and Google Maps/Osm. Sometimes being able to use another reference,
say a cadastral map or a very detailed one is compelling (which is a third
reason).

I think that an alternative way to use IIP/IIIF may be useful and in the
spirit of and Open Source project as gdal.
It's obviously easy to download the tiles one by one (jot/curl) and
assemble them in a sometimes huge file (montage), but a more dynamic way is
a must in these cases. Evan confirmed it would be fairly easy modifying the
WMS mini-driver to do it, but I think a pseudo-referenced (by pixel) VRT
file could be forged (as a temporary provision), knowing the number of
tiles in a row (easy to do) and the number of rows. I'll try to raise some
funding for the project to help in this development. Meanwhile, if someone
would like to try doing something on it, I'll be grateful and I will try to
support this effort even afterwards.

c

On Tue, Sep 15, 2015 at 12:12 AM, Petr Pridal <petr.pridal at klokantech.com>
wrote:

> Dear Carlo,
>
> if you use our Georeferencer.com online service we can provide you with a
> fast OGC WMTS service and crowdsourced online georeferencing of the remote
> image sources such as IIIF or IIP done in a web browser.
>
> Best regards,
>
> Petr
>
> On Thu, Sep 3, 2015 at 5:17 PM, Carlo A. Bertelli (Charta s.r.l.) <
> bertelli at chartasrl.eu> wrote:
>
>> Hello,
>>
>> is there a way -- maybe using the WMS minidriver -- to open an IIP
>> streamed picture?
>> The online service is well documented (
>> http://iipimage.sourceforge.net/documentation/) but unfortunately it
>> shows that the protocol is not at all compliant with the WMTS or TMS or
>> Google/SlippyMap schemas, even if it shares some of the ideas behind them.
>> There is an also an implementation of a plugin for Leaflet that could help.
>> Would anyone give some advice on how to deal with this common raster map
>> source for historical maps?
>> c
>>
>
-- 
--------------------------------------------------------------------------
Carlo A. Bertelli
   Charta servizi e sistemi per il territorio e la storia ambientale srl
          Dipendenze del palazzo Doria,
          vc. alla Chiesa della Maddalena 9/2 16124      Genova (Italy)
          tel./fax +39(0)10 2475439  +39 0108566195  gsm:+39 393 1590711
   e-mail: bertelli at chartasrl.eu      http://www.chartasrl.eu
--------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150915/9bfd29b8/attachment.html>

From even.rouault at spatialys.com  Tue Sep 15 07:06:28 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Sep 2015 16:06:28 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.3 RC1 Available for Review
Message-ID: <201509151606.28337.even.rouault@spatialys.com>

Hi,

As announced, I have prepared a GDAL/OGR 1.11.3 release candidate. Please 
review and test.

Peek up an archive among the following ones (by ascending size):

  http://download.osgeo.org/gdal/1.11.3/gdal-1.11.3RC1.tar.xz
  http://download.osgeo.org/gdal/1.11.3/gdal-1.11.3RC1.tar.gz
  http://download.osgeo.org/gdal/1.11.3/gdal1113RC1.zip

The gdal-grass plugin has been updated:

  http://download.osgeo.org/gdal/1.11.3/gdal-grass-1.11.3.tar.gz

A snapshot of the gdalautotest suite is also available :

  http://download.osgeo.org/gdal/1.11.3/gdalautotest-1.11.3.tar.gz
  http://download.osgeo.org/gdal/1.11.3/gdalautotest-1.11.3.zip

The NEWS file is here :

  http://trac.osgeo.org/gdal/wiki/Release/1.11.3-News

I'll call for a vote promoting it to final in the next days if no 
serious problems are reported before.

(2.0.1RC1 to follow)

Best regards,

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Sep 15 07:27:01 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Sep 2015 16:27:01 +0200
Subject: [gdal-dev] GDAL/OGR 2.0.1 RC1 Available for Review
Message-ID: <201509151627.01250.even.rouault@spatialys.com>


... and now a GDAL/OGR 2.0.1 release candidate. Please review and test.

Peek up an archive among the following ones (by ascending size):

  http://download.osgeo.org/gdal/2.0.1/gdal-2.0.1RC1.tar.xz
  http://download.osgeo.org/gdal/2.0.1/gdal-2.0.1RC1.tar.gz
  http://download.osgeo.org/gdal/2.0.1/gdal201RC1.zip

A snapshot of the gdalautotest suite is also available :

  http://download.osgeo.org/gdal/2.0.1/gdalautotest-2.0.1.tar.gz
  http://download.osgeo.org/gdal/2.0.1/gdalautotest-2.0.1.zip

The NEWS file is here :

  http://trac.osgeo.org/gdal/wiki/Release/2.0.1-News

I'll call for a vote promoting it to final in the next days if no 
serious problems are reported before.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pierpaolo.polo at gmail.com  Tue Sep 15 07:28:52 2015
From: pierpaolo.polo at gmail.com (Pierpaolo Polo)
Date: Tue, 15 Sep 2015 16:28:52 +0200
Subject: [gdal-dev] Fwd: C++ Transformation from Lat-Long coords to UTM
In-Reply-To: <CA+Dzusx+77uuT6ESoAw8CRQCAks3wkN1jEk_=ijCwEwBDxLWPQ@mail.gmail.com>
References: <CA+Dzusx+77uuT6ESoAw8CRQCAks3wkN1jEk_=ijCwEwBDxLWPQ@mail.gmail.com>
Message-ID: <CA+Dzusy36Sx-0sddAqXt8UY9zFDeDPNu1=MRkzaNhHS5dB2z0Q@mail.gmail.com>

Hi,

i'm reading a lot of sources from internet trying to explain how to make
this transformation from coordintates as:
  V_LATITUDE = '9,54153844';
  V_LONGITUDE = '39,44322841';

Into UTM values.
We have a tiff map with a tfw file as follows:
50.0000000000
0.0000000000
0.0000000000
-50.0000000000
706876.2384142603
5976388.9235886401

As far as i read online, I've to use two OGRSpatialReference
<http://www.gdal.org/classOGRSpatialReference.html> using one as the
"destination" format and the second one as source format. But I don't
understand how to set up the "origin" reference to accept latitude and
longitude.
>From OGR tutorial i see this snippet:

    OGRSpatialReference
<http://www.gdal.org/classOGRSpatialReference.html>    oUTM,
*poLatLong;
    OGRCoordinateTransformation
<http://www.gdal.org/classOGRCoordinateTransformation.html>
*poTransform;

    oUTM.SetProjCS
<http://www.gdal.org/classOGRSpatialReference.html#a208118581246feb29646acf2ea5d4237>("UTM
17 / WGS84");
    oUTM.SetWellKnownGeogCS
<http://www.gdal.org/classOGRSpatialReference.html#a096b8dde4fd2eb475acd376060940b02>(
"WGS84" );
    oUTM.SetUTM
<http://www.gdal.org/classOGRSpatialReference.html#a0c4f6fcab663c9eb6d465787cad3833c>(
17 );

    poLatLong = oUTM.CloneGeogCS
<http://www.gdal.org/classOGRSpatialReference.html#a0c1e2b108255487f91ae448f5c11f67c>();

    poTransform = OGRCreateCoordinateTransformation
<http://www.gdal.org/ogr__spatialref_8h.html#aae11bd08e45cdb2e71e1d9c31f1e550f>(
&oUTM, poLatLong );
    if( poTransform == NULL )
    {
        ...
    }

    ...

    if( !poTransform->Transform
<http://www.gdal.org/classOGRCoordinateTransformation.html#abf141396940b4f7b1f8118ea025d569b>(
nPoints, x, y, z ) )
    ...


I know how to obtain UTM zone (as floor[(longitude+180)/6]+1) but i'm not
understanding if the call to Transform will take my longitude/latitude
values or if i'll obtain a "complete" transformation from a reference
system to another.
The target is to access a GDALRasterBand and obtain a pixel value starting
with returned coordinates.

Thanks and regards,
Pierpaolo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150915/ccd8fe84/attachment.html>

From bishop.dev at gmail.com  Tue Sep 15 07:46:19 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Tue, 15 Sep 2015 17:46:19 +0300
Subject: [gdal-dev] GDAL testing
In-Reply-To: <CACmBxyv1NMOjiDgNZG10Cw2Vrxd3XfO0jY5nUhLK9bNFZ65U5A@mail.gmail.com>
References: <CACmBxytfvJhpppzGeuhcZukQVgBCetAAO_WfVGLSMLepE5JDAA@mail.gmail.com>
	<55EC5B4D.4090405@gmail.com>
	<CACmBxyv1NMOjiDgNZG10Cw2Vrxd3XfO0jY5nUhLK9bNFZ65U5A@mail.gmail.com>
Message-ID: <55F82F3B.1040705@gmail.com>

Hi Karl,

I think that some ready tests of GDAL are available. I'm not familiar 
with autotest2, so some links to docs and sources are welcome. Also I 
think that in gist you provided only some examples, and somewhere else 
the repo exists. If not - I'll try to play with this code.

Best regards,
     Dmitry

15.09.2015 00:42, Kurt Schwehr ?????:
> Hi Dmitry,
>
> I didn't totally understand your question.  I don't have autotest2 
> really out yet.  You are welcome to use the sample test files that I 
> posted in any way that the Apache 2.0 license allows.
>
> -kurt
>
> On Sun, Sep 6, 2015 at 8:27 AM, Dmitry Baryshnikov 
> <bishop.dev at gmail.com <mailto:bishop.dev at gmail.com>> wrote:
>
>     Hi Kurt,
>
>     During code sprint in Korea (FOSS4G 2015) I plan to play with new
>     approach of CMake fro GDAL. The one of experiments will be try to
>     use CTest. As I plan restructure the sources tree, I can try to
>     integrate you work on autotest2 and CTest. Also we can try to
>     create new test directory structure more compatible for test and
>     sources tree (this is about you wrote: Probably should move python
>     code to also match the C++ tree.  e.g. tiff_read_test.py ->
>     autotest2/py/frmts/gtiff/tiff_read_test.py).
>     How can get you tests? What do I need to use autotest2?
>
>     Best regards,
>          Dmitry
>
>     05.09.2015 20:37, Kurt Schwehr ?????:
>>     (Subject change to focus on testing)
>>
>>     Hi all,
>>
>>     First off... what GDAL has with autotest, travis-ci and coverity
>>     is awesome!
>>
>>     Thoughts / discussion more than welcome!
>>
>>     For my production work, I'm not able to use the autotest python
>>     code because of its non-unittest architecture.  So... I started
>>     creating python unittest and C++ gunit based tests.  I use
>>     autotest2 in Google's internal continuous integration system in
>>     our main code base.  I'm using Google's build system... I've got
>>     nothing started for running the C++ tests outside of Google.
>>
>>     Apologies for not even getting out at least samples of autotest2
>>     for folks to inspect and comment on.  My intention is to put what
>>     I have in a git repo and the to start discussions as to what (if
>>     anything) GDAL community wants to do with autotest2.    I was
>>     hoping to get a lot more coverage and get GDAL 2.x.x support, but
>>     that will have to come later.  It's only 14K lines at this point
>>     (optimistically 2-3% done), but it has been a huge help for me
>>     especially with in upgrading versions of gdal and catching bugs
>>     in support libs & development toolchains.
>>
>>     The tests are more focused on test isolation than autotest.  This
>>     allows for a lot more parallelism in testing.  e.g.  It's fair
>>     game to run all tests at the same time on the same machine.
>>
>>     find . -name \*.py | xargs wc -l | tail -1
>>      10684 total
>>
>>     find . -name \*.cc -o -name \*.h | xargs wc -l | tail -1
>>       3734 total
>>
>>     Where GDAL's autotest is 204K lines:
>>
>>     find . -name \*.py | xargs wc -l | tail -1
>>       193994 total
>>     find . -name \*.c\* -o -name \*.h | xargs wc -l | tail -1
>>        10471 total
>>
>>     Here are some samples:
>>
>>     C++ tests use  C++11, gunit, google logging, gflags:  (Hoping for
>>     C++14 soon.. e.g. make_unique)
>>     - autotest2/cpp/port/cpl_conv_test.cc
>>     <https://gist.github.com/schwehr/13137d826763763fb031> (Yes, this
>>     is massively boring code)
>>     - autotest2/cpp/ogr/ogrpoint_test.cc
>>     <https://gist.github.com/schwehr/c8ee86a6f6a1c1cc043b>
>>     - autotest2/cpp/ogr/ogrsf_frmts/geojson/geojson_test.cc
>>     <https://gist.github.com/schwehr/bc44b91a37cd621212c4>
>>
>>     Python pretty much follows the autotest layout, but with util
>>     files in the same directory.  Assumes python 2.7 or >= 3.4 (have
>>     not tried py3 yet)
>>     - autotest2/gcore/gcore_util.py
>>     <https://gist.github.com/schwehr/c143927ca25d03a10265>
>>     - autotest2/gdrivers/gdrivers_util.py
>>     <https://gist.github.com/schwehr/dd75f73cedf8f7b5357e>
>>     - autotest2/gdrivers/tiff_read_test.py
>>     <https://gist.github.com/schwehr/a35b2bc8a7956ef1f620> (I'm
>>     leading towards moving driver tests in gcore to gdrivers)
>>     - autotest2/ogr/geojson_test.py
>>     <https://gist.github.com/schwehr/6cbdc3482055d2237ad2>
>>
>>     Probably should move python code to also match the C++ tree.  e.g.
>>
>>         tiff_read_test.py -> autotest2/py/frmts/gtiff/tiff_read_test.py
>>
>>     I'm (mostly) following Google's style guides.  Public versions
>>     here: C++
>>     <https://google-styleguide.googlecode.com/svn/trunk/cppguide.html> Python
>>     <https://google-styleguide.googlecode.com/svn/trunk/pyguide.html>
>>
>>     All C++ should be formatted with "clang-format --style=Google"
>>
>>     What does autotest2 not do?
>>
>>     Would like to eventually do (unsorted):
>>     - Test error handling on a range of corrupt data sources
>>     - Fuzz testing, ASAN/MSAN/TSAN/Valgrind/Heap checks  (I've done
>>     some MSAN & heap checkers by hand)
>>     - Performance testing - time and memory usage
>>     - Test the C API at the C level
>>     - Test platforms other than Linux (MS Win*, Mac OSX, Android,
>>     iOS, other embedded oses, BSD*, Solaris, HPUX, etc)
>>     - Have more detailed language binding tests for java, ruby, perl, php
>>     - Coverage checking
>>     - Test parallel processing and multithreading
>>     - Test networking (I need to think through isolation)
>>     - Test multiple configurations (e.g. all drivers and features
>>     enables vrs minimal build).
>>     - Check which system calls are used by each driver for read and
>>     for write
>>     - Check i18n support.
>>     - Check distribution packaging
>>     - Validating that the given build options result in the expect
>>     available features
>>
>>     Probably out of scope:
>>     - Test for support from older platforms & C++ older than C++11
>>     - Actual sandbox checks
>>     - Test other bindings to GDAL's C or C++ API such as Fiona & Shapely
>>     - Integration tests (e.g. GRASS, QGIS, mapserv, GeoDjango, etc).
>>     - ABI compatibility checks
>>     - Older versions of dependent libs e.g. netcdf/hdf4/5, kakadu,
>>     openjpeg, etc.
>>
>>     -kurt
>>     Engineer at Google
>>
>>
>>     On Sat, Sep 5, 2015 at 7:48 AM, Dmitry Baryshnikov
>>     <bishop.dev at gmail.com <mailto:bishop.dev at gmail.com>> wrote:
>>
>>         Hi Even,
>>
>>         05.09.2015 17:10, Even Rouault ?????:
>>
>>             Dmitry,
>>
>>                 During the code sprint in FOSS4G 2015 (Korea, Seoul)
>>                 I plan to start
>>                 refactoring Cmake for GDAL (everybody are welcome
>>                 http://2015.foss4g.org/programme/code-sprint/). This
>>                 is good starting
>>                 point to try release an idea to reformat source tree
>>                 (combine drivers on
>>                 some principles - raster/vector/raster+vector). I
>>                 digging the mailing
>>                 list, but didn't found discussion started by Even
>>                 about this.
>>
>>             Regarding unified drivers, it was a bit mentionned in
>>             https://trac.osgeo.org/gdal/wiki/rfc46_gdal_ogr_unification
>>             . Basically the
>>             PCIDSK drivers have been merged in frmts/pcidsk, the PDF
>>             ones in frmts/pdf.
>>             And the raster side of GPKG has been added to the existing
>>             ogr/ogrsf_frmts/geopackage
>>             Potential changes on the tree structure were left out in
>>             the "Potential
>>             changes that are *NOT* included in this RFC" paragraph.
>>
>>         I plan to experiment with this and if I get good results, RFC
>>         will be written.
>>
>>                 Also we have
>>                 new type of drivers - network. So, how it'll be best
>>                 to organise sources?
>>                 This can be not only drivers, but the whole source
>>                 tree. How should the
>>                 ideal GDAL source tree looks like?
>>
>>                 Also I plan:
>>                 1. Move all internal libraries (zlib, libtiff,
>>                 libjpeg, etc.) to
>>                 separate github repos to use CMake ExternalProject
>>                 feature.
>>
>>             Just to give some context: the point for the internal
>>             libraries was to have a
>>             no-brainer way of building GDAL without any prerequisite.
>>             - internal zlib is identical to its upstream v1.2.3 AFAIK
>>             - internal libtiff: most files are identical to libtiff
>>             CVS, but a few ones
>>             (tiffconf.h, tif_config.h) have been modified for
>>             integration with GDAL CPL, and
>>             tif_vsi.c is GDAL specific (I/O implementation) + a build
>>             time hack for TIFF
>>             JPEG 12 bit support
>>             - internal libjpeg is mostly upstream libjpeg v6b + one
>>             patch. There's also
>>             the build hack for libjpeg12
>>
>>         I only plan to move this internal libraries in separate
>>         repos, not to link official ones. So this is only give more
>>         structured sources tree.
>>
>>
>>                 2. Remove any other building systems
>>
>>             That sounds ambitious. Given the complexity and maturity
>>             of our current build
>>             systems, I guess this would take some time to have CMake
>>             catch up.
>>
>>         Yes, certainly. But anyhow current CMake branch not fully
>>         consistent for current build system. So this have to be done.
>>
>>
>>                 3. Try CTest for testing
>>
>>             What do you think it will bring w.r.t our current testing
>>             system ? Do we want
>>             to be dependant of a particular build system for our tests ?
>>             Regarding testing, I've somehow understood Kurt had
>>             mentionned plans for a
>>             "gdalautotest2"
>>
>>         This is only subject of experiments. Let's try CTest and see
>>         if it fits.
>>
>>
>>             Regarding all the above, I assume you mean in a fork of
>>             yours ?
>>
>>         Yes. All experiments will be on forked GDAL in separate branch.
>>
>>
>>                 As for me the ideal structure should looks like:
>>                 + apps
>>                 + autotests
>>                 + bindings
>>                 + core
>>                     + port
>>                     + ogr
>>                     + gcore
>>
>>             gnm core would go here too ?
>>
>>         Yes
>>
>>
>>                 + cmake
>>                 + data
>>                 + docs
>>                     + doxygen
>>                     + readme
>>                 + drivers
>>                     + raster
>>                     + vector
>>                     + network
>>                     + combined
>>                 + CMakeLists.txt
>>                 + LICENSE
>>
>>                 So, at the root of sources tree we will have only 8
>>                 folders and 2 files.
>>
>>             Is the churn in the tree structure worth the effort ? Be
>>             aware that there are a
>>             number of interdependencies between drivers, so this
>>             might require fixing a
>>             number of source files. What advantages do you see in a
>>             new structure ?
>>
>>         1. More ease to understand sources tree for novice.
>>         2. More useful for CMake macro. In current release there are
>>         a lot of hardcoded things. Macro give more flexibility.
>>         3. More ease to add some new check needed by separate drivers.
>>         4. More configurable (ease selected depended libraries
>>         installed in OS, or should be loaded via ExternalProject),
>>         more dependence checks.
>>         5. May be CPack using in future to create distros.
>>
>>
>>             I'm afraid that if you want to change multiple things at
>>             a time (build system,
>>             testing mechanisms, tree structure), you will never
>>             manage to get a working
>>             result. Incremental approaches when feasible are less
>>             risky (but admitedly
>>             involve potentially a larger cumulated effort).
>>
>>         Yes, you may be right. But it seems to me that current Cmake
>>         version is too complicated than it can be. If Ican improve it
>>         it'll solve lot of problems, if not - ok this will be only an
>>         unsuccessful experiment.
>>
>>
>>             Even
>>
>>         I do not insist, maybe it's a crazy idea. But as was the
>>         discussion of unification, it seemed to me that this worth
>>         trying during improvements Cmake build system.
>>
>>         Best regards,
>>             Dmitry
>>
>>
>
>
>
>
> -- 
> -- 
> http://schwehr.org

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150915/be50087c/attachment-0001.html>

From lucena_ivan at hotmail.com  Tue Sep 15 08:40:21 2015
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Tue, 15 Sep 2015 11:40:21 -0400
Subject: [gdal-dev] how to build dwg driver?
In-Reply-To: <1439309820835-5219383.post@n6.nabble.com>
References: <BLU173-W93CD073DD54384D8CA2E390830@phx.gbl>,
	<1439309820835-5219383.post@n6.nabble.com>
Message-ID: <BLU173-W29929368CE4DA07EADA2AA905C0@phx.gbl>

Hi Mark,

Sorry for taking so long to reply.

Here is where I am with that:

I downloaded three different versions of the Teigha Extension (TX) SDK:

TX_SDK_3.05.0.0
TX_SDK_3.09.1.0
TX_SDK_4.01.0.0

I setup my nmake.local variables according to each one of those SDK version and tried to build against each one of them.

# ================
# DWG GDAL plugin
# ================

# DWG support using the Open Design Alliance Teigha Libraries

TD_BASE = C:\Dev\GDAL\TX_SDK_4.01.0.0
#TD_BASE = C:\Dev\GDAL\TX_SDK_3.05.0.0
TD_FLAGS = -D_TOOLKIT_IN_DLL_
TD_INCLUDE = -I$(TD_BASE)\Core\Include -I$(TD_BASE)\Core\Extensions\ExServices
#TD_INCLUDE = -I$(TD_BASE)\TD\Include -I$(TD_BASE)\TD\Extensions\ExServices
!IFDEF WIN32BIT
TD_LIBDIR = $(TD_BASE)\lib\v10dll
!ELSE
TD_LIBDIR = $(TD_BASE)\lib\vc10_amd64dll 
!ENDIF

Note that there is a little difference on the folder names of the latest one, "TD" now is "Core":

Before build the plugin, I build the project on $(TD_BASE)\Platform\vc10_amd64dll\ODA_vc10_amd64dll.sln to generate the library TD_ExamplesCommon.lib  required by ogr\ogrsf_frmts\dwg\nmakefile.vc.

There are other library files that are missing on the all the SDK versions that I tried, so I commented it:

TD_LIBS =  \
    $(TD_LIBDIR)/TD_ExamplesCommon.lib \
#    $(TD_LIBDIR)/TD_Key.lib \
    $(TD_LIBDIR)/ModelerGeometry.lib \
    $(TD_LIBDIR)/TD_BrepRenderer.lib \
    $(TD_LIBDIR)/TD_Br.lib \
    $(TD_LIBDIR)/TD_AcisBuilder.lib \
    $(TD_LIBDIR)/TD_DynBlocks.lib \
    $(TD_LIBDIR)/TD_Db.lib \
    $(TD_LIBDIR)/TD_DbRoot.lib \
    $(TD_LIBDIR)/TD_Gs.lib \
    $(TD_LIBDIR)/TD_SpatialIndex.lib \
    $(TD_LIBDIR)/TD_Ave.lib \
    $(TD_LIBDIR)/TD_Root.lib \
    $(TD_LIBDIR)/TD_Gi.lib \
    $(TD_LIBDIR)/TD_Ge.lib \
#    $(TD_LIBDIR)/TD_FT.lib \
    $(TD_LIBDIR)/TD_Alloc.lib \
    $(TD_LIBDIR)/RxRasterServices.lib \
    $(TD_LIBDIR)/RecomputeDimBlock.lib \
    $(TD_LIBDIR)/ExFieldEvaluator.lib \
#    $(TD_LIBDIR)/OdBagFiler.lib \
    $(TD_LIBDIR)/RasterProcessor.lib \
    advapi32.lib

The sad conclusion is that once I try to build the plugin I got that error:

   Creating library ogr_DWG.lib and object ogr_DWG.exp
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "private: virtual class OdDbKey * __cdecl OdDbHostAppServices2::key(void)const " (?key at OdDbHostAp
TD_ExamplesCommon.lib(ExHostAppServices.obj) : error LNK2001: unresolved external symbol "private: virtual class OdDbKey * __cdecl OdDbHostAppServices2::key(v
APEAVOdDbKey@@XZ)
ogrdwgdatasource.obj : error LNK2019: unresolved external symbol "class CPLString __cdecl ACTextUnescape(char const *,char const *)" (?ACTextUnescape@@YA?AVCP
ublic: void __cdecl OGRDWGDataSource::ReadLineTypeDefinitions(void)" (?ReadLineTypeDefinitions at OGRDWGDataSource@@QEAAXXZ)
ogrdwglayer.obj : error LNK2001: unresolved external symbol "class CPLString __cdecl ACTextUnescape(char const *,char const *)" (?ACTextUnescape@@YA?AVCPLStri
ogrdwglayer.obj : error LNK2019: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ) referenced in f
:PrepareLineStyle(class OGRFeature *)" (?PrepareLineStyle at OGRDWGLayer@@AEAAXPEAVOGRFeature@@@Z)
ogrdwg_dimension.obj : error LNK2001: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ)
ogrdwg_hatch.obj : error LNK2001: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ)
ogrdwglayer.obj : error LNK2019: unresolved external symbol "void __cdecl ACAdjustText(double,double,class OGRFeature *)" (?ACAdjustText@@YAXNNPEAVOGRFeature@
 OGRFeature * __cdecl OGRDWGLayer::TranslateINSERT(class OdSmartPtr<class OdDbEntity>)" (?TranslateINSERT at OGRDWGLayer@@AEAAPEAVOGRFeature@@V?$OdSmartPtr at VOdDb
ogr_DWG.dll : fatal error LNK1120: 4 unresolved externals

Some of those missing symbol can be found on the source code that comes with the SDK but there is no building project to add them to the missing .lib files, TD_Key.lib, TD_FT.lib or TD_OdBagFiler.lib.

I personally, don't need to build or use the OGR DWG plugin, I am just trying to help a friend. So that was as far as I did.

I also tried to contact the author of that OGR driver but I didn't get a response yet. He probably wrote that driver a long time ago when the SDK as DWGDirect and he might not be able to help now. I understand.

So I hope that exchanging that information with you we can help each other and maybe find a solution for that problem. 

Best regards and good luck.

Ivan


> Date: Tue, 11 Aug 2015 09:17:00 -0700
> From: myoung at pyxisinnovation.com
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] how to build dwg driver?
> 
> Hello Ivan,
> 
> I am running into a similar issue trying to build the DWG driver with the
> latest Teigha libraries. Did you get your issue resolved? If I learn
> anything I will post it here.
> 
> Mark
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-how-to-build-dwg-driver-tp5216555p5219383.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150915/d82a1de7/attachment.html>

From jrepetto at free.fr  Tue Sep 15 08:59:58 2015
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 15 Sep 2015 17:59:58 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.3 RC1 Available for Review
In-Reply-To: <201509151606.28337.even.rouault@spatialys.com>
References: <201509151606.28337.even.rouault@spatialys.com>
Message-ID: <55F8407E.8020507@free.fr>

Le 15/09/2015 16:06, Even Rouault a ?crit :
> Hi,
> 
> As announced, I have prepared a GDAL/OGR 1.11.3 release candidate. Please 
> review and test.
> 

Hi,

It seem that the patch for recent poppler versions has not been backported :

make[2] : on entre dans le r?pertoire ? /tmp/gdal-1.11.3/frmts/pdf ?
x86_64-pc-linux-gnu-g++ -g -O2 -fPIC -DHAVE_SSE_AT_COMPILE_TIME  -Wall
-I/tmp/gdal-1.11.3/port -I/tmp/gdal-1.11.3/gcore -I/tmp/gdal-1.11.3/alg
-I/tmp/gdal-1.11.3/ogr -I/tmp/gdal-1.11.3/ogr/ogrsf_frmts -DOGR_ENABLED
-I/tmp/gdal-1.11.3/port -I/usr/ -I/usr//include  -DHAVE_POPPLER
-DPOPPLER_HAS_OPTCONTENT -DPOPPLER_BASE_STREAM_HAS_TWO_ARGS
-DPOPPLER_0_20_OR_LATER -DPOPPLER_0_23_OR_LATER -I../vrt -I/usr/include
-I/usr/include/poppler  -c -o ../o/pdfdataset.o pdfdataset.cpp
pdfdataset.cpp: In constructor
?GDALPDFOutputDev::GDALPDFOutputDev(SplashColorMode, int, GBool,
SplashColorPtr, GBool, GBool)?:
pdfdataset.cpp:119:35: erreur: no matching function for call to
?SplashOutputDev::SplashOutputDev(SplashColorMode&, int&, GBool&,
Guchar*&, GBool&, GBool&)?
                 bEnableBitmap(TRUE) {}
                                   ^
pdfdataset.cpp:119:35: note: candidates are:
In file included from pdfobject.h:61:0,
                 from pdfdataset.cpp:48:
/usr/include/poppler/SplashOutputDev.h:171:3: note:
SplashOutputDev::SplashOutputDev(SplashColorMode, int, GBool,
SplashColorPtr, GBool, SplashThinLineMode, GBool)
   SplashOutputDev(SplashColorMode colorModeA, int bitmapRowPadA,
   ^
/usr/include/poppler/SplashOutputDev.h:171:3: note:   no known
conversion for argument 6 from ?GBool {aka bool}? to ?SplashThinLineMode?
/usr/include/poppler/SplashOutputDev.h:167:7: note:
SplashOutputDev::SplashOutputDev(const SplashOutputDev&)
 class SplashOutputDev: public OutputDev {
       ^
/usr/include/poppler/SplashOutputDev.h:167:7: note:   candidate expects
1 argument, 6 provided
../../GDALmake.opt:562 : la recette pour la cible ? ../o/pdfdataset.o ?
a ?chou?e
make[2]: *** [../o/pdfdataset.o] Erreur 1

Jean-Claude


From even.rouault at spatialys.com  Tue Sep 15 09:22:38 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Sep 2015 18:22:38 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.3 RC1 Available for Review
In-Reply-To: <55F8407E.8020507@free.fr>
References: <201509151606.28337.even.rouault@spatialys.com>
	<55F8407E.8020507@free.fr>
Message-ID: <201509151822.38707.even.rouault@spatialys.com>

Le mardi 15 septembre 2015 17:59:58, Jean-Claude Repetto a ?crit :
> Le 15/09/2015 16:06, Even Rouault a ?crit :
> > Hi,
> > 
> > As announced, I have prepared a GDAL/OGR 1.11.3 release candidate. Please
> > review and test.
> 
> Hi,
> 
> It seem that the patch for recent poppler versions has not been backported
> :

Jean-Claude,

You probably mean https://trac.osgeo.org/gdal/changeset/28438 ? Yep, that's 
2.0 only. I found it a bit too invasive & risky for backport. 

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sebastic at xs4all.nl  Tue Sep 15 09:41:29 2015
From: sebastic at xs4all.nl (sebastic)
Date: Tue, 15 Sep 2015 18:41:29 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.3 RC1 Available for Review
In-Reply-To: <201509151822.38707.even.rouault@spatialys.com>
References: <201509151606.28337.even.rouault@spatialys.com>
	<55F8407E.8020507@free.fr>
	<201509151822.38707.even.rouault@spatialys.com>
Message-ID: <c73a9c629e314bd1b0fc76fce5ac9c29@xs4all.nl>

On 2015-09-15 18:22, Even Rouault wrote:
> Le mardi 15 septembre 2015 17:59:58, Jean-Claude Repetto a ?crit :
>> It seem that the patch for recent poppler versions has not been 
>> backported
> 
> You probably mean https://trac.osgeo.org/gdal/changeset/28438 ? Yep, 
> that's
> 2.0 only. I found it a bit too invasive & risky for backport.

Please be aware that Ubuntu plans to backport this change to GDAL 1.11 
anyway because they intend to include the new poppler in wily, see:

https://launchpad.net/ubuntu/+source/gdal/1.11.2+dfsg-3ubuntu1

Kind Regards,

Bas

From even.rouault at spatialys.com  Tue Sep 15 10:07:54 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 15 Sep 2015 19:07:54 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.3 RC1 Available for Review
In-Reply-To: <c73a9c629e314bd1b0fc76fce5ac9c29@xs4all.nl>
References: <201509151606.28337.even.rouault@spatialys.com>
	<201509151822.38707.even.rouault@spatialys.com>
	<c73a9c629e314bd1b0fc76fce5ac9c29@xs4all.nl>
Message-ID: <201509151907.54941.even.rouault@spatialys.com>

Le mardi 15 septembre 2015 18:41:29, sebastic a ?crit :
> On 2015-09-15 18:22, Even Rouault wrote:
> > Le mardi 15 septembre 2015 17:59:58, Jean-Claude Repetto a ?crit :
> >> It seem that the patch for recent poppler versions has not been
> >> backported
> > 
> > You probably mean https://trac.osgeo.org/gdal/changeset/28438 ? Yep,
> > that's
> > 2.0 only. I found it a bit too invasive & risky for backport.
> 
> Please be aware that Ubuntu plans to backport this change to GDAL 1.11
> anyway because they intend to include the new poppler in wily, see:
> 
> https://launchpad.net/ubuntu/+source/gdal/1.11.2+dfsg-3ubuntu1

Thanks for the info Bas

This is actually an interesting example on how distros picking up randomly 
upstream patches without informing upstream can sometimes suck.

Looking more closely at the history of the PDF driver, I see that the main 
changeset was followed 2 months later by a complementary fix for a crasher bug 
introduced by the original changeset :
https://trac.osgeo.org/gdal/changeset/28956
(admitedly ugly fix if anyone looks at it)

So this change was definitely risky.

Contemplating if I should do the "official" backport of those 2 changesets to 
1.11.3...

Even

> 
> Kind Regards,
> 
> Bas
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jrepetto at free.fr  Wed Sep 16 00:48:57 2015
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 16 Sep 2015 09:48:57 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.3 RC1 Available for Review
In-Reply-To: <201509151907.54941.even.rouault@spatialys.com>
References: <201509151606.28337.even.rouault@spatialys.com>
	<201509151822.38707.even.rouault@spatialys.com>
	<c73a9c629e314bd1b0fc76fce5ac9c29@xs4all.nl>
	<201509151907.54941.even.rouault@spatialys.com>
Message-ID: <55F91EE9.10608@free.fr>

Le 15/09/2015 19:07, Even Rouault a ?crit :
> 
> Contemplating if I should do the "official" backport of those 2 changesets to 
> 1.11.3...
> 
> Even

I think it is a good idea, because if you don't do it, distribution
maintainers will apply the patch without understanding the risks, since
poppler >= 0.31 is now stable in some distributions.
For example, see Gentoo Linux:
https://bugs.gentoo.org/show_bug.cgi?id=540132

Jean-Claude


From jrepetto at free.fr  Wed Sep 16 01:36:08 2015
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 16 Sep 2015 10:36:08 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.3 RC1 Available for Review
In-Reply-To: <201509151606.28337.even.rouault@spatialys.com>
References: <201509151606.28337.even.rouault@spatialys.com>
Message-ID: <55F929F8.8010801@free.fr>

Le 15/09/2015 16:06, Even Rouault a ?crit :
> Hi,
> 
> As announced, I have prepared a GDAL/OGR 1.11.3 release candidate. Please 
> review and test.
> 

It seems that another backport is missing :

# make -C swig/python generate
make : on entre dans le r?pertoire ? /tmp/gdal-1.11.3/swig/python ?
swig -Wall -I../include -I../include/python -I../include/python/docs
-outdir "osgeo"   -I/tmp/gdal-1.11.3 -c++ -python -o
extensions/gdal_wrap.cpp ../include/gdal.i
swig -Wall -I../include -I../include/python -I../include/python/docs
-outdir "osgeo"   -I/tmp/gdal-1.11.3 -python -o
extensions/gdalconst_wrap.c ../include/gdalconst.i
swig -Wall -I../include -I../include/python -I../include/python/docs
-outdir "osgeo"   -I/tmp/gdal-1.11.3 -c++ -python -o
extensions/ogr_wrap.cpp ../include/ogr.i
../include/osr.i:63: Warning 322: Redundant redeclaration of
'retStringAndCPLFree',
../include/ogr.i:41: Warning 322: previous declaration of
'retStringAndCPLFree'.
../include/python/ogr_python.i:110: Error: Line indented less than
expected (line 25 of %pythoncode or %insert("python") block) as no line
should be indented less than the indentation in line 1
../include/python/ogr_python.i:110: Error: Line indented less than
expected (line 26 of %pythoncode or %insert("python") block) as no line
should be indented less than the indentation in line 1
../include/python/ogr_python.i:110: Error: Line indented less than
expected (line 27 of %pythoncode or %insert("python") block) as no line
should be indented less than the indentation in line 1
../include/python/ogr_python.i:186: Error: Line indented less than
expected (line 23 of %pythoncode or %insert("python") block) as no line
should be indented less than the indentation in line 1
../include/python/ogr_python.i:186: Error: Line indented less than
expected (line 24 of %pythoncode or %insert("python") block) as no line
should be indented less than the indentation in line 1
../SWIGmake.base:15 : la recette pour la cible ? ogr_wrap.cpp ? a ?chou?e
make: *** [ogr_wrap.cpp] Erreur 5
make : on quitte le r?pertoire ? /tmp/gdal-1.11.3/swig/python ?



From even.rouault at spatialys.com  Wed Sep 16 03:35:07 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Sep 2015 12:35:07 +0200
Subject: [gdal-dev] GDAL/OGR 1.11.3 RC2 Available for Review
In-Reply-To: <201509151606.28337.even.rouault@spatialys.com>
References: <201509151606.28337.even.rouault@spatialys.com>
Message-ID: <201509161235.07204.even.rouault@spatialys.com>

Hi,

I've issued an RC2 to take into account the reported issues + a few other 
things.

The exact diff with RC1 is :
 * Add support for Poppler >= 0.31.0 (#6118)
 * Fix build with SWIG 3.0.6 (#6045)
 * GTiff: on reading attach PROJ4 extension node for Mercator_Auxiliary_Sphere 
/ WebMercator (#5924)
 * morphFromESRI(): map Mercator_Auxiliary_Sphere to EPSG:3857 (#5924)

Updated links:
   http://download.osgeo.org/gdal/1.11.3/gdal-1.11.3RC2.tar.xz
   http://download.osgeo.org/gdal/1.11.3/gdal-1.11.3RC2.tar.gz
   http://download.osgeo.org/gdal/1.11.3/gdal1113RC2.zip

Other files are unchanged.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From cgodkin at gmail.com  Wed Sep 16 08:57:00 2015
From: cgodkin at gmail.com (Carl Godkin)
Date: Wed, 16 Sep 2015 08:57:00 -0700
Subject: [gdal-dev] Looking for gdal_merge workflow
Message-ID: <CAE=8kmmuAWOLrTuyZ=NYrXNN44Q08iEMbeThaQJbEFOtYoyx4g@mail.gmail.com>

Hi,

I have two satellite images of an area near the coast and I would like to
merge them somehow to get the best of both.

The larger image has black areas out to sea because the WMS service doesn't
have tiles at the highest resolution offshore.  (I've used "gdal_translate
-a_nodata 0" to mark the 0 values bands as "nodata.")

The smaller image covers the same area and has data over the whole area.

How can I merge them to get an image over the whole area where the higher
resolution data from the larger image is used where available, and the data
from the smaller image fills in the nodata values?

I tried various command lines for gdal_merge.  For instance

gdal_merge.py -o merge.tif larger.tif smaller.tif

but the result is basically a larger version of "smaller.tif" because it
"wins" in the overlapping areas.  The low-resolution image is sampled at
the higher resolution.

This command line

gdal_merge.py -o merge.tif  -px X Y smaller.tif larger.tif

(where X and Y are the pixel sizes for the larger image)

seems to keep all of the "nodata" values from the larger image
unfortunately.

Can you suggest a workflow to get what I want?  Is there another tool for
this I should use instead?

Thanks very much,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150916/473228ef/attachment.html>

From jrepetto at free.fr  Wed Sep 16 09:11:52 2015
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 16 Sep 2015 18:11:52 +0200
Subject: [gdal-dev] Looking for gdal_merge workflow
In-Reply-To: <CAE=8kmmuAWOLrTuyZ=NYrXNN44Q08iEMbeThaQJbEFOtYoyx4g@mail.gmail.com>
References: <CAE=8kmmuAWOLrTuyZ=NYrXNN44Q08iEMbeThaQJbEFOtYoyx4g@mail.gmail.com>
Message-ID: <55F994C8.2030704@free.fr>

Le 16/09/2015 17:57, Carl Godkin a ?crit :
> 
> Can you suggest a workflow to get what I want?  Is there another tool
> for this I should use instead?

Hi,

You should consider using gdalwarp, which is a more powerful tool than
gdal_merge, that was written at the beginning to demonstrate how to use
the Python API.

Jean-Claude


From cgodkin at gmail.com  Wed Sep 16 09:48:43 2015
From: cgodkin at gmail.com (Carl Godkin)
Date: Wed, 16 Sep 2015 09:48:43 -0700
Subject: [gdal-dev] Looking for gdal_merge workflow
In-Reply-To: <55F994C8.2030704@free.fr>
References: <CAE=8kmmuAWOLrTuyZ=NYrXNN44Q08iEMbeThaQJbEFOtYoyx4g@mail.gmail.com>
	<55F994C8.2030704@free.fr>
Message-ID: <CAE=8kmntT1CYUEqOSyRFPhCPqU2r4kWjhKQOSMLBEaoEANqpbA@mail.gmail.com>

Thank you for the suggestion.  I never realized that gdalwarp was useful
for more than coordinate system transformation!

Now I'm trying to figure out the right options for this since gdalwarp's
manual page hardly mentions the mosaic operations.

Given my hi-res image with plenty of nodata and lo-res image without any
nodata, can you suggest a command line that will choose the hi-res image
where it's available and fill in the nodata regions with the lo-res image?
I've played around some with gdalwarp but haven't achieved the result I am
looking for yet.

Thanks again,

carl



On Wed, Sep 16, 2015 at 9:11 AM, Jean-Claude Repetto <jrepetto at free.fr>
wrote:

> Le 16/09/2015 17:57, Carl Godkin a ?crit :
> >
> > Can you suggest a workflow to get what I want?  Is there another tool
> > for this I should use instead?
>
> Hi,
>
> You should consider using gdalwarp, which is a more powerful tool than
> gdal_merge, that was written at the beginning to demonstrate how to use
> the Python API.
>
> Jean-Claude
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150916/eb2c5348/attachment.html>

From even.rouault at spatialys.com  Wed Sep 16 10:03:46 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 16 Sep 2015 19:03:46 +0200
Subject: [gdal-dev] Looking for gdal_merge workflow
In-Reply-To: <CAE=8kmntT1CYUEqOSyRFPhCPqU2r4kWjhKQOSMLBEaoEANqpbA@mail.gmail.com>
References: <CAE=8kmmuAWOLrTuyZ=NYrXNN44Q08iEMbeThaQJbEFOtYoyx4g@mail.gmail.com>
	<55F994C8.2030704@free.fr>
	<CAE=8kmntT1CYUEqOSyRFPhCPqU2r4kWjhKQOSMLBEaoEANqpbA@mail.gmail.com>
Message-ID: <201509161903.47007.even.rouault@spatialys.com>

Le mercredi 16 septembre 2015 18:48:43, Carl Godkin a ?crit :
> Thank you for the suggestion.  I never realized that gdalwarp was useful
> for more than coordinate system transformation!
> 
> Now I'm trying to figure out the right options for this since gdalwarp's
> manual page hardly mentions the mosaic operations.

Mosaicing is a bit dealt at :
http://download.osgeo.org/gdal/workshop/foss4ge2015/workshop_gdal.html#__RefHeading__5955_1333016408

> 
> Given my hi-res image with plenty of nodata and lo-res image without any
> nodata, can you suggest a command line that will choose the hi-res image
> where it's available and fill in the nodata regions with the lo-res image?
> I've played around some with gdalwarp but haven't achieved the result I am
> looking for yet.

gdalwarp in1.tif in2.tif out.tif should pick up the resolution of the hi-res 
image (not verified, but that's what the code suggests)

Anyway with the -tr switch, you can control the resolution.

> 
> Thanks again,
> 
> carl
> 
> 
> 
> On Wed, Sep 16, 2015 at 9:11 AM, Jean-Claude Repetto <jrepetto at free.fr>
> 
> wrote:
> > Le 16/09/2015 17:57, Carl Godkin a ?crit :
> > > Can you suggest a workflow to get what I want?  Is there another tool
> > > for this I should use instead?
> > 
> > Hi,
> > 
> > You should consider using gdalwarp, which is a more powerful tool than
> > gdal_merge, that was written at the beginning to demonstrate how to use
> > the Python API.
> > 
> > Jean-Claude

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From burton449geo at gmail.com  Wed Sep 16 11:15:17 2015
From: burton449geo at gmail.com (Maxime Demers)
Date: Wed, 16 Sep 2015 14:15:17 -0400
Subject: [gdal-dev] Question about ogr2ogr and geojson url
Message-ID: <CAKtuc=8WDdu_MaAta+8Nps7DhdBsPKqMpH0sadmAivwpV1+HqA@mail.gmail.com>

Hello,

I am using nodejs on localhost to serve dynamic geojson at urls such
http://localhost:3000/711/points.geojson

The way I am serving the geojson from the server is like this:

                var geojson =
{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"LineString","coordinates":[[-7576433,6176485],[-7307069,6261483]]}}],"crs":{"type":"link","properties":{"href":"
http://spatialreference.org/ref/sr-org/6864/proj4/","type":"proj4"}}}

                res.writeHead(200, {'Content-Type': 'application/json'});
                res.end(JSON.stringify(geojson));


However, I have Failure Unable to open datasource with drivers... when
trying to convert the geojson to shapefile from the url.

ogr2ogr output.shp http://localhost:3000/711/points.geojson

Can ogr2ogr convert dynamic geojson like I am trying to do, or it has to be
a static geojson file?

Thank you!

Max Demars

-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150916/2167483b/attachment-0001.html>

From cgodkin at gmail.com  Wed Sep 16 11:35:22 2015
From: cgodkin at gmail.com (Carl Godkin)
Date: Wed, 16 Sep 2015 11:35:22 -0700
Subject: [gdal-dev] Looking for gdal_merge workflow
In-Reply-To: <201509161903.47007.even.rouault@spatialys.com>
References: <CAE=8kmmuAWOLrTuyZ=NYrXNN44Q08iEMbeThaQJbEFOtYoyx4g@mail.gmail.com>
	<55F994C8.2030704@free.fr>
	<CAE=8kmntT1CYUEqOSyRFPhCPqU2r4kWjhKQOSMLBEaoEANqpbA@mail.gmail.com>
	<201509161903.47007.even.rouault@spatialys.com>
Message-ID: <CAE=8kmnPb4VxMVk41uBvWCGpAQgaf9K_hqQZtaGjW=ii47o6ng@mail.gmail.com>

Thank you both very much!  This worked and produced the result I sought:

gdalwarp -tr X Y smaller.tif larger.tif out.tif

Thanks again,

carl



On Wed, Sep 16, 2015 at 10:03 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 16 septembre 2015 18:48:43, Carl Godkin a ?crit :
> > Thank you for the suggestion.  I never realized that gdalwarp was useful
> > for more than coordinate system transformation!
> >
> > Now I'm trying to figure out the right options for this since gdalwarp's
> > manual page hardly mentions the mosaic operations.
>
> Mosaicing is a bit dealt at :
>
> http://download.osgeo.org/gdal/workshop/foss4ge2015/workshop_gdal.html#__RefHeading__5955_1333016408
>
> >
> > Given my hi-res image with plenty of nodata and lo-res image without any
> > nodata, can you suggest a command line that will choose the hi-res image
> > where it's available and fill in the nodata regions with the lo-res
> image?
> > I've played around some with gdalwarp but haven't achieved the result I
> am
> > looking for yet.
>
> gdalwarp in1.tif in2.tif out.tif should pick up the resolution of the
> hi-res
> image (not verified, but that's what the code suggests)
>
> Anyway with the -tr switch, you can control the resolution.
>
> >
> > Thanks again,
> >
> > carl
> >
> >
> >
> > On Wed, Sep 16, 2015 at 9:11 AM, Jean-Claude Repetto <jrepetto at free.fr>
> >
> > wrote:
> > > Le 16/09/2015 17:57, Carl Godkin a ?crit :
> > > > Can you suggest a workflow to get what I want?  Is there another tool
> > > > for this I should use instead?
> > >
> > > Hi,
> > >
> > > You should consider using gdalwarp, which is a more powerful tool than
> > > gdal_merge, that was written at the beginning to demonstrate how to use
> > > the Python API.
> > >
> > > Jean-Claude
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150916/ae638464/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Wed Sep 16 13:02:31 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 16 Sep 2015 20:02:31 +0000 (UTC)
Subject: [gdal-dev] Question about ogr2ogr and geojson url
References: <CAKtuc=8WDdu_MaAta+8Nps7DhdBsPKqMpH0sadmAivwpV1+HqA@mail.gmail.com>
Message-ID: <loom.20150916T215941-896@post.gmane.org>

Maxime Demers <burton449geo <at> gmail.com> writes:


> However, I have Failure Unable to open datasource with drivers... when
trying to convert the geojson to shapefile from the url.
> 
> ogr2ogr output.shp http://localhost:3000/711/points.geojson
> 
> Can ogr2ogr convert dynamic geojson like I am trying to do, or it has to
be a static geojson file?


Hi,

This works for me with GDAL 2.0, gisinternals Windows build:

ogrinfo -ro -al "http://www.yournavigation.org/api/1.0/
gosmore.php?format=geojson&flat=52.215676&flon=5.963946&
tlat=52.2573&tlon=6.1799&v=motorcar&fast=1&layer=mapnik"


Result:

      using driver `GeoJSON' successful.

Layer name: OGRGeoJSON
Geometry: Line String
Feature Count: 1
Extent: (5.963552, 52.196300) - (6.187562, 52.257125)
Layer SRS WKT:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
OGRFeature(OGRGeoJSON):0
  LINESTRING (5.963585 52.21595,5.963585 52.21595,5.963563...


-Jukka Rahkonen-


From bradh at frogmouth.net  Wed Sep 16 17:12:37 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Thu, 17 Sep 2015 10:12:37 +1000
Subject: [gdal-dev] Handling pdfium build / integration
Message-ID: <1753617.l7YZmJPIS5@saxicola>

I note the recent addition of pdfium for PDF support (alongside podofo and 
poppler).

I'm a bit lost on which pdfium repo and branch to use, the best way to build 
and install pdfium library and headers, and (because of that), how to point the 
GDAL ./configure options to that install.

I'm mainly interested in linux at this stage. Windows differences might be 
interesting later.

I originally did a build of the "upstream" pdfium (after checkout of the repo, 
and then the depot-tools, etc). It took a while, but appeared to succeed.

I assume that the "upstream" pdfium repo is *not* what I want, and that I'm 
meant to use either the "klokantech" or "rouault" repos that do not have V8 
javascript support:

https://github.com/rouault/pdfium
https://github.com/klokantech/pdfium

Based on a manual grab of the build-lin.sh script (I forget which one I used - 
probably klokantech, but they looked very similar), I got what looked like a 
successful build. 

However at this point I'm stuck. Which parts need to get installed for a 
system-wide GDAL install, and what is the recommended way to do that?

After that, I'm hopeful that the ./configure options will be obvious. However 
if there is anything subtle, please feel free to point that out!

Brad


From even.rouault at spatialys.com  Thu Sep 17 02:19:47 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Sep 2015 11:19:47 +0200
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <1753617.l7YZmJPIS5@saxicola>
References: <1753617.l7YZmJPIS5@saxicola>
Message-ID: <201509171119.48033.even.rouault@spatialys.com>

Hi Brad,

> I note the recent addition of pdfium for PDF support (alongside podofo and
> poppler).
> 
> I'm a bit lost on which pdfium repo and branch to use, the best way to
> build and install pdfium library and headers, and (because of that), how
> to point the GDAL ./configure options to that install.

Did you read the directions at the bottom of http://gdal.org/frmt_pdf.html ? 
I'm aware they might be still scarse. If you have ideas (preferably expressed 
as a doc patch) to improve them, please do so.

> 
> I'm mainly interested in linux at this stage. Windows differences might be
> interesting later.
> 
> I originally did a build of the "upstream" pdfium (after checkout of the
> repo, and then the depot-tools, etc). It took a while, but appeared to
> succeed.
> 
> I assume that the "upstream" pdfium repo is *not* what I want, and that I'm
> meant to use either the "klokantech" or "rouault" repos that do not have V8
> javascript support:

You might use the upstream pdfium repo, but it has unnecessary dependencies for 
the need of the PDF driver. And the forked repos have tweaks to pdfium itself 
to make it more compatible as a library integrated with other libraries. In 
particular, it renames the symbol of pdfium internal libjpeg and libopenjpeg2 
to avoid runtime clashes with system libraries or GDAL own libjpeg.

> 
> https://github.com/rouault/pdfium
> https://github.com/klokantech/pdfium
> 
> Based on a manual grab of the build-lin.sh script (I forget which one I
> used - probably klokantech, but they looked very similar), I got what
> looked like a successful build.

The build branch in my repo has a few improvements in the build scripts.

> 
> However at this point I'm stuck. Which parts need to get installed for a
> system-wide GDAL install, and what is the recommended way to do that?

Basically if you download https://github.com/rouault/pdfium/blob/build/build-
lin.sh , run it, it will install pdfium to $HOME/pdfium/install

> 
> After that, I'm hopeful that the ./configure options will be obvious.
> However if there is anything subtle, please feel free to point that out!
> 

And the GDAL configure to run is: ./configure --with-pdfium=$HOME/pdfium/install

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pierpaolo.polo at gmail.com  Thu Sep 17 03:10:59 2015
From: pierpaolo.polo at gmail.com (Pierpaolo Polo)
Date: Thu, 17 Sep 2015 12:10:59 +0200
Subject: [gdal-dev] Building GDAL on HP-UX as .so
Message-ID: <CA+DzuszVkR1mnEE6KRWUJm8s0-v156YbY70xxek-as6=Z7Erjg@mail.gmail.com>

Hello,

I'm trying to build the library under HP-UX B.11.31.
I can't complete building using BuildingOnUnix how to, seems a compiler
problem using aCC standard compiler.
I've tried to install gcc plus its dependencies, gmake and other, obtaining
a succesful build as .a.
The software using GDAL now works using this archive, but resulting
executable is a bit too large, and i'm trying to use a shared object to
have its size reduced.
As the guide suggested, i've tried to change GDALmake.opt but, having
LD_SHARED = yes seems not doing it's work.

Someone have succesfully build a .so in HP-UX?

Thanks in advance,

Pierpaolo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150917/df350a52/attachment.html>

From bradh at frogmouth.net  Thu Sep 17 05:03:06 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Thu, 17 Sep 2015 22:03:06 +1000
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <201509171119.48033.even.rouault@spatialys.com>
References: <1753617.l7YZmJPIS5@saxicola>
	<201509171119.48033.even.rouault@spatialys.com>
Message-ID: <1708152.ci5zKXO4Fl@saxicola>

On Thu, 17 Sep 2015 11:19:47 AM Even Rouault wrote:
> Basically if you download
> https://github.com/rouault/pdfium/blob/build/build- lin.sh , run it, it
> will install pdfium to $HOME/pdfium/install
So there is no shared library or configuration data need here?

Brad

From lucena_ivan at hotmail.com  Thu Sep 17 05:26:20 2015
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Thu, 17 Sep 2015 08:26:20 -0400
Subject: [gdal-dev] how to build dwg driver?
In-Reply-To: <BLU173-W29929368CE4DA07EADA2AA905C0@phx.gbl>
References: <BLU173-W93CD073DD54384D8CA2E390830@phx.gbl>, ,
	<1439309820835-5219383.post@n6.nabble.com>,
	<BLU173-W29929368CE4DA07EADA2AA905C0@phx.gbl>
Message-ID: <BLU173-W3032708FD47DB046A59156905A0@phx.gbl>

I would like to share the information I received about this subject so that other people don't wast their time like I did.

First, a fix to the makefile:

Fix the following unresolved externals: ACTextUnescape ACGetColorTable ACAdjustText by adding ..\dxf\ogr_autocad_services.obj to the DXF_OBJ= line in dxf\makefile.vc 

The remaining unresolved symbol, type OdDbKey, is due to a missing .lib file on the public available TX SDK. One would need to be a member of the alliance to be able to download the private version that contains the complete set of components.

Best regards.

From: lucena_ivan at hotmail.com
To: myoung at pyxisinnovation.com; gdal-dev at lists.osgeo.org
Date: Tue, 15 Sep 2015 11:40:21 -0400
Subject: Re: [gdal-dev] how to build dwg driver?




Hi Mark,

Sorry for taking so long to reply.

Here is where I am with that:

I downloaded three different versions of the Teigha Extension (TX) SDK:

TX_SDK_3.05.0.0
TX_SDK_3.09.1.0
TX_SDK_4.01.0.0

I setup my nmake.local variables according to each one of those SDK version and tried to build against each one of them.

# ================
# DWG GDAL plugin
# ================

# DWG support using the Open Design Alliance Teigha Libraries

TD_BASE = C:\Dev\GDAL\TX_SDK_4.01.0.0
#TD_BASE = C:\Dev\GDAL\TX_SDK_3.05.0.0
TD_FLAGS = -D_TOOLKIT_IN_DLL_
TD_INCLUDE = -I$(TD_BASE)\Core\Include -I$(TD_BASE)\Core\Extensions\ExServices
#TD_INCLUDE = -I$(TD_BASE)\TD\Include -I$(TD_BASE)\TD\Extensions\ExServices
!IFDEF WIN32BIT
TD_LIBDIR = $(TD_BASE)\lib\v10dll
!ELSE
TD_LIBDIR = $(TD_BASE)\lib\vc10_amd64dll 
!ENDIF

Note that there is a little difference on the folder names of the latest one, "TD" now is "Core":

Before build the plugin, I build the project on $(TD_BASE)\Platform\vc10_amd64dll\ODA_vc10_amd64dll.sln to generate the library TD_ExamplesCommon.lib  required by ogr\ogrsf_frmts\dwg\nmakefile.vc.

There are other library files that are missing on the all the SDK versions that I tried, so I commented it:

TD_LIBS =  \
    $(TD_LIBDIR)/TD_ExamplesCommon.lib \
#    $(TD_LIBDIR)/TD_Key.lib \
    $(TD_LIBDIR)/ModelerGeometry.lib \
    $(TD_LIBDIR)/TD_BrepRenderer.lib \
    $(TD_LIBDIR)/TD_Br.lib \
    $(TD_LIBDIR)/TD_AcisBuilder.lib \
    $(TD_LIBDIR)/TD_DynBlocks.lib \
    $(TD_LIBDIR)/TD_Db.lib \
    $(TD_LIBDIR)/TD_DbRoot.lib \
    $(TD_LIBDIR)/TD_Gs.lib \
    $(TD_LIBDIR)/TD_SpatialIndex.lib \
    $(TD_LIBDIR)/TD_Ave.lib \
    $(TD_LIBDIR)/TD_Root.lib \
    $(TD_LIBDIR)/TD_Gi.lib \
    $(TD_LIBDIR)/TD_Ge.lib \
#    $(TD_LIBDIR)/TD_FT.lib \
    $(TD_LIBDIR)/TD_Alloc.lib \
    $(TD_LIBDIR)/RxRasterServices.lib \
    $(TD_LIBDIR)/RecomputeDimBlock.lib \
    $(TD_LIBDIR)/ExFieldEvaluator.lib \
#    $(TD_LIBDIR)/OdBagFiler.lib \
    $(TD_LIBDIR)/RasterProcessor.lib \
    advapi32.lib

The sad conclusion is that once I try to build the plugin I got that error:

   Creating library ogr_DWG.lib and object ogr_DWG.exp
ogrdwgdriver.obj : error LNK2001: unresolved external symbol "private: virtual class OdDbKey * __cdecl OdDbHostAppServices2::key(void)const " (?key at OdDbHostAp
TD_ExamplesCommon.lib(ExHostAppServices.obj) : error LNK2001: unresolved external symbol "private: virtual class OdDbKey * __cdecl OdDbHostAppServices2::key(v
APEAVOdDbKey@@XZ)
ogrdwgdatasource.obj : error LNK2019: unresolved external symbol "class CPLString __cdecl ACTextUnescape(char const *,char const *)" (?ACTextUnescape@@YA?AVCP
ublic: void __cdecl OGRDWGDataSource::ReadLineTypeDefinitions(void)" (?ReadLineTypeDefinitions at OGRDWGDataSource@@QEAAXXZ)
ogrdwglayer.obj : error LNK2001: unresolved external symbol "class CPLString __cdecl ACTextUnescape(char const *,char const *)" (?ACTextUnescape@@YA?AVCPLStri
ogrdwglayer.obj : error LNK2019: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ) referenced in f
:PrepareLineStyle(class OGRFeature *)" (?PrepareLineStyle at OGRDWGLayer@@AEAAXPEAVOGRFeature@@@Z)
ogrdwg_dimension.obj : error LNK2001: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ)
ogrdwg_hatch.obj : error LNK2001: unresolved external symbol "unsigned char const * __cdecl ACGetColorTable(void)" (?ACGetColorTable@@YAPEBEXZ)
ogrdwglayer.obj : error LNK2019: unresolved external symbol "void __cdecl ACAdjustText(double,double,class OGRFeature *)" (?ACAdjustText@@YAXNNPEAVOGRFeature@
 OGRFeature * __cdecl OGRDWGLayer::TranslateINSERT(class OdSmartPtr<class OdDbEntity>)" (?TranslateINSERT at OGRDWGLayer@@AEAAPEAVOGRFeature@@V?$OdSmartPtr at VOdDb
ogr_DWG.dll : fatal error LNK1120: 4 unresolved externals

Some of those missing symbol can be found on the source code that comes with the SDK but there is no building project to add them to the missing .lib files, TD_Key.lib, TD_FT.lib or TD_OdBagFiler.lib.

I personally, don't need to build or use the OGR DWG plugin, I am just trying to help a friend. So that was as far as I did.

I also tried to contact the author of that OGR driver but I didn't get a response yet. He probably wrote that driver a long time ago when the SDK as DWGDirect and he might not be able to help now. I understand.

So I hope that exchanging that information with you we can help each other and maybe find a solution for that problem. 

Best regards and good luck.

Ivan


> Date: Tue, 11 Aug 2015 09:17:00 -0700
> From: myoung at pyxisinnovation.com
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] how to build dwg driver?
> 
> Hello Ivan,
> 
> I am running into a similar issue trying to build the DWG driver with the
> latest Teigha libraries. Did you get your issue resolved? If I learn
> anything I will post it here.
> 
> Mark
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/gdal-dev-how-to-build-dwg-driver-tp5216555p5219383.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150917/f338e22c/attachment-0001.html>

From even.rouault at spatialys.com  Thu Sep 17 06:03:42 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Sep 2015 15:03:42 +0200
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <1708152.ci5zKXO4Fl@saxicola>
References: <1753617.l7YZmJPIS5@saxicola>
	<201509171119.48033.even.rouault@spatialys.com>
	<1708152.ci5zKXO4Fl@saxicola>
Message-ID: <201509171503.43041.even.rouault@spatialys.com>

Le jeudi 17 septembre 2015 14:03:06, Brad Hards a ?crit :
> On Thu, 17 Sep 2015 11:19:47 AM Even Rouault wrote:
> > Basically if you download
> > https://github.com/rouault/pdfium/blob/build/build- lin.sh , run it, it
> > will install pdfium to $HOME/pdfium/install
> 
> So there is no shared library or configuration data need here?

No, plain static linking. It might be possible to make a shared library from 
pdfium, but I haven't explored that. 

> 
> Brad

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From burton449geo at gmail.com  Thu Sep 17 07:14:28 2015
From: burton449geo at gmail.com (Maxime Demers)
Date: Thu, 17 Sep 2015 10:14:28 -0400
Subject: [gdal-dev] ogr2ogr convert geojson to MapInfo tab
Message-ID: <CAKtuc=-H0QReh+HnH859V_mhYYeEejqQSMoty1wXcR3DampGOA@mail.gmail.com>

Hello,

I encounter a problem using ogr2ogr (from gdal 1.10) when trying to convert
a geojson to MapInfo Tab. The output MapInfo tab does not include the
projection wich is defined in the geojson as EPSG:3857 so srs is defined as
WGS84 as default.

I think its a known problem with MapInfo Tab (mitab driver) but I dont know
if a solution exist. Anybody can help?

See;

geojson file

{
   "type":"FeatureCollection",
   "crs":{
      "type":"name",
      "properties":{
         "name": "3857"
      }
   },
   "features":[
      {
         "type":"Feature",
         "geometry":{
            "type":"LineString",
            "coordinates":[[-7551132, 6293816],[-7560916, 6260489]],
         },
         "properties":{
            "id":36
         }
      }
   ]
}

ogr2ogr -f "MapInfo File" output.tab line.geojson


gdalsrsinfo -o proj4 output.tab

>>> '+proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs '




-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150917/6d396724/attachment.html>

From jamessramm at gmail.com  Thu Sep 17 07:37:01 2015
From: jamessramm at gmail.com (jramm)
Date: Thu, 17 Sep 2015 07:37:01 -0700 (PDT)
Subject: [gdal-dev] Transform raster based on values in shapefile attribute
	table
Message-ID: <1442500621574-5224659.post@n6.nabble.com>

I have a raster (.tif), which has an accompanying shapefile attribute table
(.dbf). Basically, every value in the raster is a key into the attribute
table, which has a number of fields (there is a 'Value' field which is the
'key' corresponding to the raster values, then a number of attributes).

I want to derive a new raster based on a specific field in the attribute
table. I.e. for each pixel in the raster, find the corresponding row in the
attribute table, get the value of the desired field and replace the pixel
value with this new value. 

What (if anything) does GDAL provide to enable me to do this efficiently? Is
there an efficient method to look up rows (which in the OGR model I suppose
correspond to features) based on the value of a field?



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Transform-raster-based-on-values-in-shapefile-attribute-table-tp5224659.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Thu Sep 17 08:36:57 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Sep 2015 17:36:57 +0200
Subject: [gdal-dev] ogr2ogr convert geojson to MapInfo tab
In-Reply-To: <CAKtuc=-H0QReh+HnH859V_mhYYeEejqQSMoty1wXcR3DampGOA@mail.gmail.com>
References: <CAKtuc=-H0QReh+HnH859V_mhYYeEejqQSMoty1wXcR3DampGOA@mail.gmail.com>
Message-ID: <201509171736.57598.even.rouault@spatialys.com>

Le jeudi 17 septembre 2015 16:14:28, Maxime Demers a ?crit :
> Hello,
> 
> I encounter a problem using ogr2ogr (from gdal 1.10) when trying to convert
> a geojson to MapInfo Tab. The output MapInfo tab does not include the
> projection wich is defined in the geojson as EPSG:3857 so srs is defined as
> WGS84 as default.
> 
> I think its a known problem with MapInfo Tab (mitab driver) but I dont know
> if a solution exist. Anybody can help?

I don't think there's a solution with GDAL 1.10. But I've just committed in 
trunk something that should fix that (just tested proper round trip in OGR. 
didn't actually try with MapInfo)

Would you be willing to test with MapInfo the result of the conversion of your 
file attached to this email and report if it works ? (by the way I add to 
specify  -s_srs EPSG:3857 -t_srs EPSG:3857 as the SRS of the GeoJSON wasn't 
properly encoded in it)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_3857.zip
Type: application/zip
Size: 987 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150917/821f95af/attachment.zip>

From burton449geo at gmail.com  Thu Sep 17 09:21:24 2015
From: burton449geo at gmail.com (Maxime Demers)
Date: Thu, 17 Sep 2015 12:21:24 -0400
Subject: [gdal-dev] ogr2ogr convert geojson to MapInfo tab
Message-ID: <CAKtuc=-n2e3vt1XtEVwHp1g5Bz5FY08sbWLRdLxqMbC=UrHTvw@mail.gmail.com>

Hi Even,

Sorry to reply you in a new thread. I have realize my mail-list settings
was set to not send me replies. I have found your reply in the archive.

Thank you for your answer. I am a bit desapointed that no solution exists
for now, and I dont think I would be able to test with the trunk version
because I am on windows and dont know how to build gdal from sources.

Do you have an idea, if the solution could be merged into a binary release
for windows soon?

Salutations,

Maxime Demers
<http://www.lastfm.fr/user/burton449>

>* Hello,
*> >* I encounter a problem using ogr2ogr (from gdal 1.10) when trying
to convert
*>* a geojson to MapInfo Tab. The output MapInfo tab does not include the
*>* projection wich is defined in the geojson as EPSG:3857 so srs is defined as
*>* WGS84 as default.
*> >* I think its a known problem with MapInfo Tab (mitab driver) but
I dont know
*>* if a solution exist. Anybody can help?*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150917/25ad5df9/attachment.html>

From even.rouault at spatialys.com  Thu Sep 17 09:30:45 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 17 Sep 2015 18:30:45 +0200
Subject: [gdal-dev] ogr2ogr convert geojson to MapInfo tab
In-Reply-To: <CAKtuc=-n2e3vt1XtEVwHp1g5Bz5FY08sbWLRdLxqMbC=UrHTvw@mail.gmail.com>
References: <CAKtuc=-n2e3vt1XtEVwHp1g5Bz5FY08sbWLRdLxqMbC=UrHTvw@mail.gmail.com>
Message-ID: <201509171830.46163.even.rouault@spatialys.com>

Le jeudi 17 septembre 2015 18:21:24, Maxime Demers a ?crit :
> Hi Even,
> 
> Sorry to reply you in a new thread. I have realize my mail-list settings
> was set to not send me replies. I have found your reply in the archive.
> 
> Thank you for your answer. I am a bit desapointed that no solution exists
> for now, and I dont think I would be able to test with the trunk version
> because I am on windows and dont know how to build gdal from sources.

There are daily builds of trunk at :
http://gisinternals.com/development.php

So have a look tomorrow (look for rows with a revision number > 30500, 
sometimes some targets are stuck with older revisions)

> 
> Do you have an idea, if the solution could be merged into a binary release
> for windows soon?
> 
> Salutations,
> 
> Maxime Demers
> <http://www.lastfm.fr/user/burton449>
> 
> >* Hello,
> 
> *> >* I encounter a problem using ogr2ogr (from gdal 1.10) when trying
> to convert
> *>* a geojson to MapInfo Tab. The output MapInfo tab does not include the
> *>* projection wich is defined in the geojson as EPSG:3857 so srs is
> defined as *>* WGS84 as default.
> *> >* I think its a known problem with MapInfo Tab (mitab driver) but
> I dont know
> *>* if a solution exist. Anybody can help?*

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From alistair.young at uhi.ac.uk  Thu Sep 17 11:03:15 2015
From: alistair.young at uhi.ac.uk (Alistair Young)
Date: Thu, 17 Sep 2015 18:03:15 +0000
Subject: [gdal-dev] Generating 200x200 tiles
Message-ID: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>

I've been using gdal2tiles to generate zoom levels and tiles and it's working fine but unfortunately the tiles are 256x256 and don't work with the UK Ordnance Survey mapping SDK, which requires 200x200 tiles. Is there a way to generate these 200x200 tiles? I can generate them using gdal_retile but it can't generate the zoom levels.

Thanks,

Alistair


-----------------
mov eax,1
mov ebx,0
int 80
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150917/33ca55a2/attachment.html>

From hrz at geodata.soton.ac.uk  Thu Sep 17 13:18:02 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Thu, 17 Sep 2015 21:18:02 +0100
Subject: [gdal-dev] Generating 200x200 tiles
In-Reply-To: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
References: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
Message-ID: <55FB1FFA.1070301@geodata.soton.ac.uk>

Hi Alistair,

You could try ctb-tile 
(https://github.com/geo-data/cesium-terrain-builder#ctb-tile) with 
the`--tile-size 200` option.  This uses GDAL under the hood and works on 
GDAL datasets, so pretty similar to gdal2tiles.

Best regards,

Homme.

On 17/09/15 19:03, Alistair Young wrote:
> I?ve been using gdal2tiles to generate zoom levels and tiles and it?s 
> working fine but unfortunately the tiles are 256x256 and don?t work 
> with the UK Ordnance Survey mapping SDK, which requires 200x200 tiles. 
> Is there a way to generate these 200x200 tiles? I can generate them 
> using gdal_retile but it can?t generate the zoom levels.
>
> Thanks,
>
> Alistair
>
>
> -----------------
> mov eax,1
> mov ebx,0
> int 80
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150917/64fdf64e/attachment.html>

From bradh at frogmouth.net  Thu Sep 17 16:36:49 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Fri, 18 Sep 2015 09:36:49 +1000
Subject: [gdal-dev] Generating 200x200 tiles
In-Reply-To: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
References: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
Message-ID: <5866510.lRALPFp2vA@saxicola>

On Thu, 17 Sep 2015 06:03:15 PM Alistair Young wrote:
> I've been using gdal2tiles to generate zoom levels and tiles and it's
> working fine but unfortunately the tiles are 256x256 and don't work with
> the UK Ordnance Survey mapping SDK, which requires 200x200 tiles. Is there
> a way to generate these 200x200 tiles? I can generate them using
> gdal_retile but it can't generate the zoom levels.
I'd suggest just hacking the python script.  Make a copy, and edit the 
__init__() function to change the tileSize member init to be 200 vs 256.

Worth a quick try at least.

Brad



From bradh at frogmouth.net  Fri Sep 18 04:37:59 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Fri, 18 Sep 2015 21:37:59 +1000
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <201509171119.48033.even.rouault@spatialys.com>
References: <1753617.l7YZmJPIS5@saxicola>
	<201509171119.48033.even.rouault@spatialys.com>
Message-ID: <2714146.FbNqU6RN6E@saxicola>

On Thu, 17 Sep 2015 11:19:47 AM you wrote:
> Basically if you download
> https://github.com/rouault/pdfium/blob/build/build- lin.sh , run it, it
> will install pdfium to $HOME/pdfium/install
That isn't working out for me. I appear to be getting errors on this part of 
the "normal" step:
  cd third_party
  for lib in `find -name '*.a'`;
      do ar -t $lib | xargs ar rvs $lib.new && mv -v $lib.new $lib;
  done

It looks like the part just above the part I've quoted picks up the 
third_party libs (as well as the main pdfium libs), but then the problem part 
(as shown) can't find the .o input files.

ar: creating ./third_party/libbigint.a.new
a - ./third_party/../bigint/third_party/bigint/BigInteger.o
a - ./third_party/../bigint/third_party/bigint/BigIntegerUtils.o
a - ./third_party/../bigint/third_party/bigint/BigUnsigned.o
a - ./third_party/../bigint/third_party/bigint/BigUnsignedInABase.o
?./third_party/libbigint.a.new? -> ?./third_party/libbigint.a?

... (all the other libs processed here) ....

ar: creating ./libbigint.a.new
ar: BigInteger.o: No such file or directory
ar: creating ./libfx_libopenjpeg.a.new
ar: bio.o: No such file or directory
ar: creating ./libfx_libjpeg.a.new
ar: fpdfapi_jcapimin.o: No such file or directory
ar: creating ./libfx_lcms2.a.new
ar: cmscam02.o: No such file or directory
ar: creating ./libfx_zlib.a.new
ar: adler32.o: No such file or directory
ar: creating ./libfreetype.a.new
ar: cff.o: No such file or directory
ar: creating ./libfx_agg.a.new
ar: agg_curves.o: No such file or directory
./configure --with-pdfium=/home/bradh/pdfium/install


I tried to remove that part, and then it looks like its OK, although gdal 
complains about CFDF_Document::CreateNewDoc being hidden when I build.

So I guess I'm still doing something wrong.

Brad

From even.rouault at spatialys.com  Fri Sep 18 05:02:14 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Sep 2015 14:02:14 +0200
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <2714146.FbNqU6RN6E@saxicola>
References: <1753617.l7YZmJPIS5@saxicola>
	<201509171119.48033.even.rouault@spatialys.com>
	<2714146.FbNqU6RN6E@saxicola>
Message-ID: <201509181402.14770.even.rouault@spatialys.com>


> ar: creating ./libbigint.a.new
> ar: BigInteger.o: No such file or directory
> ar: creating ./libfx_libopenjpeg.a.new
> ar: bio.o: No such file or directory
> ar: creating ./libfx_libjpeg.a.new
> ar: fpdfapi_jcapimin.o: No such file or directory
> ar: creating ./libfx_lcms2.a.new
> ar: cmscam02.o: No such file or directory
> ar: creating ./libfx_zlib.a.new
> ar: adler32.o: No such file or directory
> ar: creating ./libfreetype.a.new
> ar: cff.o: No such file or directory
> ar: creating ./libfx_agg.a.new
> ar: agg_curves.o: No such file or directory

Yes, I do also get those errors, but they can be ignored. Perhaps the build 
scrip could be improved to hide that.

> ./configure --with-pdfium=/home/bradh/pdfium/install
> 
> 
> I tried to remove that part, and then it looks like its OK, although gdal
> complains about CFDF_Document::CreateNewDoc being hidden when I build.

And if you just let the script run ? That works for me (GCC 4.7.0)

Oh, I've just edited the script to default to Release mode instead of Debug.

> 
> So I guess I'm still doing something wrong.
> 
> Brad

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bradh at frogmouth.net  Fri Sep 18 05:01:22 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Fri, 18 Sep 2015 22:01:22 +1000
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <201509181402.14770.even.rouault@spatialys.com>
References: <1753617.l7YZmJPIS5@saxicola> <2714146.FbNqU6RN6E@saxicola>
	<201509181402.14770.even.rouault@spatialys.com>
Message-ID: <7144010.636cVUjzfl@saxicola>

On Fri, 18 Sep 2015 02:02:14 PM you wrote:
> > ar: creating ./libbigint.a.new
> > ar: BigInteger.o: No such file or directory
> > ar: creating ./libfx_libopenjpeg.a.new
> > ar: bio.o: No such file or directory
> > ar: creating ./libfx_libjpeg.a.new
> > ar: fpdfapi_jcapimin.o: No such file or directory
> > ar: creating ./libfx_lcms2.a.new
> > ar: cmscam02.o: No such file or directory
> > ar: creating ./libfx_zlib.a.new
> > ar: adler32.o: No such file or directory
> > ar: creating ./libfreetype.a.new
> > ar: cff.o: No such file or directory
> > ar: creating ./libfx_agg.a.new
> > ar: agg_curves.o: No such file or directory
> 
> Yes, I do also get those errors, but they can be ignored. Perhaps the build
> scrip could be improved to hide that.
I think just removing those steps should work. Will play around a little more 
with testing before sending a random patch though...

> > ./configure --with-pdfium=/home/bradh/pdfium/install
> > 
> > 
> > I tried to remove that part, and then it looks like its OK, although gdal
> > complains about CFDF_Document::CreateNewDoc being hidden when I build.
OK, so that is probably a different error.
 
> And if you just let the script run ? That works for me (GCC 4.7.0)
It looks like its an error in 4.9.0.

Brad


From even.rouault at spatialys.com  Fri Sep 18 05:19:59 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Sep 2015 14:19:59 +0200
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <7144010.636cVUjzfl@saxicola>
References: <1753617.l7YZmJPIS5@saxicola>
	<201509181402.14770.even.rouault@spatialys.com>
	<7144010.636cVUjzfl@saxicola>
Message-ID: <201509181419.59972.even.rouault@spatialys.com>

Le vendredi 18 septembre 2015 14:01:22, Brad Hards a ?crit :
> On Fri, 18 Sep 2015 02:02:14 PM you wrote:
> > > ar: creating ./libbigint.a.new
> > > ar: BigInteger.o: No such file or directory
> > > ar: creating ./libfx_libopenjpeg.a.new
> > > ar: bio.o: No such file or directory
> > > ar: creating ./libfx_libjpeg.a.new
> > > ar: fpdfapi_jcapimin.o: No such file or directory
> > > ar: creating ./libfx_lcms2.a.new
> > > ar: cmscam02.o: No such file or directory
> > > ar: creating ./libfx_zlib.a.new
> > > ar: adler32.o: No such file or directory
> > > ar: creating ./libfreetype.a.new
> > > ar: cff.o: No such file or directory
> > > ar: creating ./libfx_agg.a.new
> > > ar: agg_curves.o: No such file or directory
> > 
> > Yes, I do also get those errors, but they can be ignored. Perhaps the
> > build scrip could be improved to hide that.
> 
> I think just removing those steps should work. Will play around a little
> more with testing before sending a random patch though...
> 
> > > ./configure --with-pdfium=/home/bradh/pdfium/install
> > > 
> > > 
> > > I tried to remove that part, and then it looks like its OK, although
> > > gdal complains about CFDF_Document::CreateNewDoc being hidden when I
> > > build.
> 
> OK, so that is probably a different error.
> 
> > And if you just let the script run ? That works for me (GCC 4.7.0)
> 
> It looks like its an error in 4.9.0.

The symbol is indeed hidden:
$ objdump -tC ../install/lib/pdfium/libfpdfapi.a | grep CFDF_Document::CreateNewDoc
0000000000000000 g     F .text._ZN13CFDF_Document12CreateNewDocEv	00000000000000ac .hidden CFDF_Document::CreateNewDoc()

But it is not directly used by the PDF driver, so it is strange that the linker complains about that.

You can probably try the following workaround to disable hidden symbols when building pdfium
(in pdfium directory). I had to use that when I worked with a debug build as otherwise debugging
didn't work very well.

diff --git a/build/standalone.gypi b/build/standalone.gypi
index ecf849b..3407a56 100644
--- a/build/standalone.gypi
+++ b/build/standalone.gypi
@@ -151,7 +151,7 @@
       '-Wno-unused-parameter',
       '-pthread',
       '-fno-exceptions',
-      '-fvisibility=hidden',
+      #'-fvisibility=hidden',
       '-fPIC',
     ],
     'cflags_cc': [


> 
> Brad

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Sep 18 05:36:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Sep 2015 14:36:08 +0200
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <201509181419.59972.even.rouault@spatialys.com>
References: <1753617.l7YZmJPIS5@saxicola> <7144010.636cVUjzfl@saxicola>
	<201509181419.59972.even.rouault@spatialys.com>
Message-ID: <201509181436.08332.even.rouault@spatialys.com>


> > It looks like its an error in 4.9.0.

Just tried with 5.2.0 and it works out of the box

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From burton449geo at gmail.com  Fri Sep 18 06:08:31 2015
From: burton449geo at gmail.com (Maxime Demers)
Date: Fri, 18 Sep 2015 09:08:31 -0400
Subject: [gdal-dev] ogr2ogr convert geojson to MapInfo tab
In-Reply-To: <201509171830.46163.even.rouault@spatialys.com>
References: <CAKtuc=-n2e3vt1XtEVwHp1g5Bz5FY08sbWLRdLxqMbC=UrHTvw@mail.gmail.com>
	<201509171830.46163.even.rouault@spatialys.com>
Message-ID: <CAKtuc=9+DxU2yCekB2wemxysj5O5Q0nf_tPLRhU9xcBSqXN1Bw@mail.gmail.com>

Hi Even,

I just proceeded to test the conversion from geojson to mapInfo tab with
the latest build. The result is not good.

geojson file:

{
   "type":"FeatureCollection",
   "crs":{
      "type":"name",
      "properties":{
         "name": "EPSG:3857"
      }
   },
   "features":[
      {
         "type":"Feature",
         "geometry":{
            "type":"LineString",
            "coordinates":[[-7551132, 6293816],[-7560916, 6260489]],
         },
         "properties":{
            "id":36
         }
      }
   ]
}

I try to convert that geojson to mapInfo tab with this command:

ogr2ogr -f "MapInfo File" -s_srs EPSG:3857 -t_srs EPSG:3857 -a_srs
EPSG:3857 test.tab lines.geojson

gdalsrsinfo -o proj4 test.tab

>>> '+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs '

ogrinfo -ro -al test.tab

INFO: Open of `test.tab'
      using driver `MapInfo File' successful.

Layer name: test
Geometry: Line String
Feature Count: 1
Extent: (-7560915.990000, 6260488.990000) - (-7551132.000000,
6293815.990000)
Layer SRS WKT:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1.0]]
id: Integer (0.0)
OGRFeature(test):1
  id (Integer) = 36
  Style = PEN(w:1px,c:#000000,id:"mapinfo-pen-2,ogr-pen-0")
  LINESTRING (-7551132.0 6293815.99,-7560915.99 6260488.99)

On Thu, Sep 17, 2015 at 12:30 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le jeudi 17 septembre 2015 18:21:24, Maxime Demers a ?crit :
> > Hi Even,
> >
> > Sorry to reply you in a new thread. I have realize my mail-list settings
> > was set to not send me replies. I have found your reply in the archive.
> >
> > Thank you for your answer. I am a bit desapointed that no solution exists
> > for now, and I dont think I would be able to test with the trunk version
> > because I am on windows and dont know how to build gdal from sources.
>
> There are daily builds of trunk at :
> http://gisinternals.com/development.php
>
> So have a look tomorrow (look for rows with a revision number > 30500,
> sometimes some targets are stuck with older revisions)
>
> >
> > Do you have an idea, if the solution could be merged into a binary
> release
> > for windows soon?
> >
> > Salutations,
> >
> > Maxime Demers
> > <http://www.lastfm.fr/user/burton449>
> >
> > >* Hello,
> >
> > *> >* I encounter a problem using ogr2ogr (from gdal 1.10) when trying
> > to convert
> > *>* a geojson to MapInfo Tab. The output MapInfo tab does not include the
> > *>* projection wich is defined in the geojson as EPSG:3857 so srs is
> > defined as *>* WGS84 as default.
> > *> >* I think its a known problem with MapInfo Tab (mitab driver) but
> > I dont know
> > *>* if a solution exist. Anybody can help?*
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150918/00a176e1/attachment-0001.html>

From even.rouault at spatialys.com  Fri Sep 18 06:27:29 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Sep 2015 15:27:29 +0200
Subject: [gdal-dev] ogr2ogr convert geojson to MapInfo tab
In-Reply-To: <CAKtuc=9+DxU2yCekB2wemxysj5O5Q0nf_tPLRhU9xcBSqXN1Bw@mail.gmail.com>
References: <CAKtuc=-n2e3vt1XtEVwHp1g5Bz5FY08sbWLRdLxqMbC=UrHTvw@mail.gmail.com>
	<201509171830.46163.even.rouault@spatialys.com>
	<CAKtuc=9+DxU2yCekB2wemxysj5O5Q0nf_tPLRhU9xcBSqXN1Bw@mail.gmail.com>
Message-ID: <201509181527.29790.even.rouault@spatialys.com>

Le vendredi 18 septembre 2015 15:08:31, Maxime Demers a ?crit :
> Hi Even,
> 
> I just proceeded to test the conversion from geojson to mapInfo tab with
> the latest build. The result is not good.

Maxime,

Which binary did you use ?

If that works, that will report :

PROJCS["WGS 84 / Pseudo-Mercator",
    GEOGCS["unnamed",
        DATUM["WGS_1984",
            SPHEROID["WGS 84 (MAPINFO Datum 157)",6378137.01,298.257223563],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1.0],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 
+x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"]]

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From burton449geo at gmail.com  Fri Sep 18 06:45:20 2015
From: burton449geo at gmail.com (Maxime Demers)
Date: Fri, 18 Sep 2015 09:45:20 -0400
Subject: [gdal-dev] ogr2ogr convert geojson to MapInfo tab
In-Reply-To: <201509181527.29790.even.rouault@spatialys.com>
References: <CAKtuc=-n2e3vt1XtEVwHp1g5Bz5FY08sbWLRdLxqMbC=UrHTvw@mail.gmail.com>
	<201509171830.46163.even.rouault@spatialys.com>
	<CAKtuc=9+DxU2yCekB2wemxysj5O5Q0nf_tPLRhU9xcBSqXN1Bw@mail.gmail.com>
	<201509181527.29790.even.rouault@spatialys.com>
Message-ID: <CAKtuc=9-CrXNGR-5139d2+mfMHuagLe1v7jomq3fSun2jfo9pQ@mail.gmail.com>

My bad, I realize I have installed Gdal core from gisinternals using
gdal-201-1600-core.msi but this file is dated of 2015-07-30. I did not
realize the core installer were not up to date. Now using the version form
release-1600-gdal-mapserver.zip I confirm that the result is good!

Thank you Even!

On Fri, Sep 18, 2015 at 9:27 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le vendredi 18 septembre 2015 15:08:31, Maxime Demers a ?crit :
> > Hi Even,
> >
> > I just proceeded to test the conversion from geojson to mapInfo tab with
> > the latest build. The result is not good.
>
> Maxime,
>
> Which binary did you use ?
>
> If that works, that will report :
>
> PROJCS["WGS 84 / Pseudo-Mercator",
>     GEOGCS["unnamed",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84 (MAPINFO Datum
> 157)",6378137.01,298.257223563],
>             TOWGS84[0,0,0,0,0,0,0]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["Meter",1.0],
>     EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
> +lon_0=0.0
> +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"]]
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150918/b2f416ab/attachment.html>

From alistair.young at uhi.ac.uk  Sat Sep 19 00:14:15 2015
From: alistair.young at uhi.ac.uk (Alistair Young)
Date: Sat, 19 Sep 2015 07:14:15 +0000
Subject: [gdal-dev] Generating 200x200 tiles
In-Reply-To: <5866510.lRALPFp2vA@saxicola>
References: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
	<5866510.lRALPFp2vA@saxicola>
Message-ID: <D222C956.11BF5%alistair.young@uhi.ac.uk>

Thanks for that. I tried ctb but just got "Could not get transformation
information from source dataset?. Chaning gdal2tiles to output 200x200
worked ok but the SDK failed to display the tiles. I just have a 4000x4000
tif with no geo referencing information so I can only generate raster
profile tiles.

Alistair


-----------------
mov eax,1
mov ebx,0
int 80




On 18/09/2015 00:36, "gdal-dev-bounces at lists.osgeo.org on behalf of Brad
Hards" <gdal-dev-bounces at lists.osgeo.org on behalf of bradh at frogmouth.net>
wrote:

>On Thu, 17 Sep 2015 06:03:15 PM Alistair Young wrote:
>> I've been using gdal2tiles to generate zoom levels and tiles and it's
>> working fine but unfortunately the tiles are 256x256 and don't work with
>> the UK Ordnance Survey mapping SDK, which requires 200x200 tiles. Is
>>there
>> a way to generate these 200x200 tiles? I can generate them using
>> gdal_retile but it can't generate the zoom levels.
>I'd suggest just hacking the python script.  Make a copy, and edit the
>__init__() function to change the tileSize member init to be 200 vs 256.
>
>Worth a quick try at least.
>
>Brad
>
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev at lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev


From bradh at frogmouth.net  Sat Sep 19 04:05:08 2015
From: bradh at frogmouth.net (Brad Hards)
Date: Sat, 19 Sep 2015 21:05:08 +1000
Subject: [gdal-dev] Handling pdfium build / integration
In-Reply-To: <201509181419.59972.even.rouault@spatialys.com>
References: <1753617.l7YZmJPIS5@saxicola> <7144010.636cVUjzfl@saxicola>
	<201509181419.59972.even.rouault@spatialys.com>
Message-ID: <30057973.87RSfcRube@saxicola>

On Fri, 18 Sep 2015 02:19:59 PM you wrote:
> The symbol is indeed hidden:
> $ objdump -tC ../install/lib/pdfium/libfpdfapi.a | grep
> CFDF_Document::CreateNewDoc 0000000000000000 g     F
> .text._ZN13CFDF_Document12CreateNewDocEv	00000000000000ac .hidden
> CFDF_Document::CreateNewDoc()
> 
> But it is not directly used by the PDF driver, so it is strange that the
> linker complains about that.
Concur. It does though, even with a Release build.
 
> You can probably try the following workaround to disable hidden symbols when
> building pdfium (in pdfium directory). I had to use that when I worked with
> a debug build as otherwise debugging didn't work very well.
> 
> diff --git a/build/standalone.gypi b/build/standalone.gypi
> index ecf849b..3407a56 100644
> --- a/build/standalone.gypi
> +++ b/build/standalone.gypi
> @@ -151,7 +151,7 @@
>        '-Wno-unused-parameter',
>        '-pthread',
>        '-fno-exceptions',
> -      '-fvisibility=hidden',
> +      #'-fvisibility=hidden',
>        '-fPIC',
>      ],
>      'cflags_cc': [
That worked for me.

I'll spend a little more time on trying to work out what is going on, but not 
sure how that will go.

In any case, thanks very much for the support on this - much appreciated.


Brad

From pekka at gispo.fi  Sat Sep 19 04:52:17 2015
From: pekka at gispo.fi (Pekka Sarkola)
Date: Sat, 19 Sep 2015 14:52:17 +0300
Subject: [gdal-dev] Review of ogr2ogr SQL queries
Message-ID: <CANgLEnB0VX5+9kZuTucYupKRSRa-V1BrU_ki3kzrHzu5Fu=hPQ@mail.gmail.com>

Hi!

I just wonder if it possible to review which kind of SQL queries ogr2ogr is
doing.

My problem: I'm exporting data from PostGIS to SQlite and some of the
queries are slow. So, I'm not sure if my indexes are perfect in PostGIS
side. Should be, but you never know.

My export query includes -clipsrc <from PostGIS layer>. Is ogr2ogr building
one huge SQL query to PostGIS or will it first get clip
polygon/multipolygons from -clipsrc and then send that again to PostGIS?

Rgs,

Pekka

Pekka Sarkola
Gispo Oy
pekka.sarkola at gispo.fi   - GSM +358 40 725 2042
www.gispo.fi ? www.paikkatieto.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150919/e0fb736a/attachment.html>

From even.rouault at spatialys.com  Sat Sep 19 05:08:08 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 19 Sep 2015 14:08:08 +0200
Subject: [gdal-dev] Review of ogr2ogr SQL queries
In-Reply-To: <CANgLEnB0VX5+9kZuTucYupKRSRa-V1BrU_ki3kzrHzu5Fu=hPQ@mail.gmail.com>
References: <CANgLEnB0VX5+9kZuTucYupKRSRa-V1BrU_ki3kzrHzu5Fu=hPQ@mail.gmail.com>
Message-ID: <201509191408.08736.even.rouault@spatialys.com>

Pekka,
> 
> I just wonder if it possible to review which kind of SQL queries ogr2ogr is
> doing.

With a debug build of GDAL and "--debug on" added on the ogr2ogr command line, 
you should be able to see the queries.
Otherwise you could have a look at the PostgreSQL logs

> 
> My problem: I'm exporting data from PostGIS to SQlite and some of the
> queries are slow. So, I'm not sure if my indexes are perfect in PostGIS
> side. Should be, but you never know.
> 
> My export query includes -clipsrc <from PostGIS layer>. Is ogr2ogr building
> one huge SQL query to PostGIS or will it first get clip
> polygon/multipolygons from -clipsrc and then send that again to PostGIS?

Ah, from what I see in the code, it appears that -clipsrc does only client-
side clipping. You should probably combine it with -spat so that server side 
filtering happens and reduce the number of features that are received on the 
client side. Not sure why it isn't done automatically: developer lazyness I 
guess ;-)

Even

> 
> Rgs,
> 
> Pekka
> 
> Pekka Sarkola
> Gispo Oy
> pekka.sarkola at gispo.fi   - GSM +358 40 725 2042
> www.gispo.fi ? www.paikkatieto.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pekka at gispo.fi  Sat Sep 19 05:16:43 2015
From: pekka at gispo.fi (Pekka Sarkola)
Date: Sat, 19 Sep 2015 15:16:43 +0300
Subject: [gdal-dev] Review of ogr2ogr SQL queries
In-Reply-To: <201509191408.08736.even.rouault@spatialys.com>
References: <CANgLEnB0VX5+9kZuTucYupKRSRa-V1BrU_ki3kzrHzu5Fu=hPQ@mail.gmail.com>
	<201509191408.08736.even.rouault@spatialys.com>
Message-ID: <CANgLEnCQ0KKbdtZHGycPmqARKUr4JGDpha8ZcdZuVQiq4Ob9=w@mail.gmail.com>

Thanks Even,

I will check those queries from PostgreSQL logs.

Ok, I understand also developer: -clipsrc can be more stupid file format
than PostGIS.

Rgs,

Pekka

Pekka Sarkola
Gispo Oy
pekka.sarkola at gispo.fi   - GSM +358 40 725 2042
www.gispo.fi ? www.paikkatieto.com

2015-09-19 15:08 GMT+03:00 Even Rouault <even.rouault at spatialys.com>:

> Pekka,
> >
> > I just wonder if it possible to review which kind of SQL queries ogr2ogr
> is
> > doing.
>
> With a debug build of GDAL and "--debug on" added on the ogr2ogr command
> line,
> you should be able to see the queries.
> Otherwise you could have a look at the PostgreSQL logs
>
> >
> > My problem: I'm exporting data from PostGIS to SQlite and some of the
> > queries are slow. So, I'm not sure if my indexes are perfect in PostGIS
> > side. Should be, but you never know.
> >
> > My export query includes -clipsrc <from PostGIS layer>. Is ogr2ogr
> building
> > one huge SQL query to PostGIS or will it first get clip
> > polygon/multipolygons from -clipsrc and then send that again to PostGIS?
>
> Ah, from what I see in the code, it appears that -clipsrc does only client-
> side clipping. You should probably combine it with -spat so that server
> side
> filtering happens and reduce the number of features that are received on
> the
> client side. Not sure why it isn't done automatically: developer lazyness I
> guess ;-)
>
> Even
>
> >
> > Rgs,
> >
> > Pekka
> >
> > Pekka Sarkola
> > Gispo Oy
> > pekka.sarkola at gispo.fi   - GSM +358 40 725 2042
> > www.gispo.fi ? www.paikkatieto.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150919/acc4915b/attachment.html>

From even.rouault at spatialys.com  Sun Sep 20 08:09:38 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 20 Sep 2015 17:09:38 +0200
Subject: [gdal-dev] Installation prefix for Python bindings on MacOSX ?
Message-ID: <201509201709.38480.even.rouault@spatialys.com>

Hi,

Antonio has contributed a fix in https://trac.osgeo.org/gdal/ticket/4563 to 
make the Python bindings honour the installation prefix.

A side effect of this is that now on the MacOsX Travis instance, they are 
installed in /usr/lib/python2.7/site-packages whereas previously they were 
installed in /Library/Python/2.7/site-packages
But it appears that they are not found automatically when in  
/usr/lib/python2.7/site-packages. Is it expected ? Should we define PYTHONPATH 
to /usr/lib/python2.7/site-packages in thre Travis script ( 
https://github.com/rouault/gdal_coverage/blob/trunk_travis_macosx/.travis.yml 
)

Before change: https://travis-ci.org/rouault/gdal_coverage/builds/81193480
New behaviour: ?https://travis-ci.org/rouault/gdal_coverage/builds/81242249

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From woklist at kyngchaos.com  Sun Sep 20 08:24:18 2015
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun, 20 Sep 2015 10:24:18 -0500
Subject: [gdal-dev] Installation prefix for Python bindings on MacOSX ?
In-Reply-To: <201509201709.38480.even.rouault@spatialys.com>
References: <201509201709.38480.even.rouault@spatialys.com>
Message-ID: <53125EB5-56B0-49F3-BED1-336E496C73A7@kyngchaos.com>

/Library/Python/[version]/site-packages is the standard user path for OS X.  /usr/lib is not in the python path.  Even if you add /usr/lib to the Travis setup, the installation will still be broken for general use.

On Sep 20, 2015, at 10:09 AM, Even Rouault <even.rouault at spatialys.com> wrote:

> Hi,
> 
> Antonio has contributed a fix in https://trac.osgeo.org/gdal/ticket/4563 to 
> make the Python bindings honour the installation prefix.
> 
> A side effect of this is that now on the MacOsX Travis instance, they are 
> installed in /usr/lib/python2.7/site-packages whereas previously they were 
> installed in /Library/Python/2.7/site-packages
> But it appears that they are not found automatically when in  
> /usr/lib/python2.7/site-packages. Is it expected ? Should we define PYTHONPATH 
> to /usr/lib/python2.7/site-packages in thre Travis script ( 
> https://github.com/rouault/gdal_coverage/blob/trunk_travis_macosx/.travis.yml 
> )
> 
> Before change: https://travis-ci.org/rouault/gdal_coverage/builds/81193480
> New behaviour: ?https://travis-ci.org/rouault/gdal_coverage/builds/81242249
> 
> Even
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From even.rouault at spatialys.com  Sun Sep 20 08:33:49 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 20 Sep 2015 17:33:49 +0200
Subject: [gdal-dev] Installation prefix for Python bindings on MacOSX ?
In-Reply-To: <53125EB5-56B0-49F3-BED1-336E496C73A7@kyngchaos.com>
References: <201509201709.38480.even.rouault@spatialys.com>
	<53125EB5-56B0-49F3-BED1-336E496C73A7@kyngchaos.com>
Message-ID: <201509201733.49572.even.rouault@spatialys.com>

Le dimanche 20 septembre 2015 17:24:18, William Kyngesburye a ?crit :
> /Library/Python/[version]/site-packages is the standard user path for OS X.
>  /usr/lib is not in the python path.  Even if you add /usr/lib to the
> Travis setup, the installation will still be broken for general use.

ok, thanks for the feedback William. So I guess we have to figure how to revert 
to the old behaviour on OS X then ? Any idea ? The changeset is 
https://trac.osgeo.org/gdal/changeset/30564

> 
> On Sep 20, 2015, at 10:09 AM, Even Rouault <even.rouault at spatialys.com> 
wrote:
> > Hi,
> > 
> > Antonio has contributed a fix in https://trac.osgeo.org/gdal/ticket/4563
> > to make the Python bindings honour the installation prefix.
> > 
> > A side effect of this is that now on the MacOsX Travis instance, they are
> > installed in /usr/lib/python2.7/site-packages whereas previously they
> > were installed in /Library/Python/2.7/site-packages
> > But it appears that they are not found automatically when in
> > /usr/lib/python2.7/site-packages. Is it expected ? Should we define
> > PYTHONPATH to /usr/lib/python2.7/site-packages in thre Travis script (
> > https://github.com/rouault/gdal_coverage/blob/trunk_travis_macosx/.travis
> > .yml )
> > 
> > Before change:
> > https://travis-ci.org/rouault/gdal_coverage/builds/81193480 New
> > behaviour: ?https://travis-ci.org/rouault/gdal_coverage/builds/81242249
> > 
> > Even
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> First Pogril: Why is life like sticking your head in a bucket filled with
> hyena offal? Second Pogril: I don't know.  Why IS life like sticking your
> head in a bucket filled with hyena offal? First Pogril: I don't know
> either.  Wretched, isn't it?
> 
> -HitchHiker's Guide to the Galaxy

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From woklist at kyngchaos.com  Sun Sep 20 09:02:11 2015
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun, 20 Sep 2015 11:02:11 -0500
Subject: [gdal-dev] Installation prefix for Python bindings on MacOSX ?
In-Reply-To: <201509201733.49572.even.rouault@spatialys.com>
References: <201509201709.38480.even.rouault@spatialys.com>
	<53125EB5-56B0-49F3-BED1-336E496C73A7@kyngchaos.com>
	<201509201733.49572.even.rouault@spatialys.com>
Message-ID: <7B101EB8-0EE5-4E34-881B-8769E901BF0B@kyngchaos.com>

I tried the bit there that gets the python path (get_python_lb), and it works to get the OS X user path if there is no arg, ie get_python_lib().

For OS X is that the python user path is independent of the installation prefix.

For the logic, one basic method in a makefile I can think of for detecting OS X is to check uname for Darwin.  Note that the python path is also independent on whether an OS X framework (MACOSX_FRAMEWORK) or unix library is built, so don't use MACOSX_FRAMEWORK to test for OS X.

On Sep 20, 2015, at 10:33 AM, Even Rouault <even.rouault at spatialys.com> wrote:

> Le dimanche 20 septembre 2015 17:24:18, William Kyngesburye a ?crit :
>> /Library/Python/[version]/site-packages is the standard user path for OS X.
>> /usr/lib is not in the python path.  Even if you add /usr/lib to the
>> Travis setup, the installation will still be broken for general use.
> 
> ok, thanks for the feedback William. So I guess we have to figure how to revert 
> to the old behaviour on OS X then ? Any idea ? The changeset is 
> https://trac.osgeo.org/gdal/changeset/30564
> 
>> 
>> On Sep 20, 2015, at 10:09 AM, Even Rouault <even.rouault at spatialys.com> 
> wrote:
>>> Hi,
>>> 
>>> Antonio has contributed a fix in https://trac.osgeo.org/gdal/ticket/4563
>>> to make the Python bindings honour the installation prefix.
>>> 
>>> A side effect of this is that now on the MacOsX Travis instance, they are
>>> installed in /usr/lib/python2.7/site-packages whereas previously they
>>> were installed in /Library/Python/2.7/site-packages
>>> But it appears that they are not found automatically when in
>>> /usr/lib/python2.7/site-packages. Is it expected ? Should we define
>>> PYTHONPATH to /usr/lib/python2.7/site-packages in thre Travis script (
>>> https://github.com/rouault/gdal_coverage/blob/trunk_travis_macosx/.travis
>>> .yml )
>>> 
>>> Before change:
>>> https://travis-ci.org/rouault/gdal_coverage/builds/81193480 New
>>> behaviour: ?https://travis-ci.org/rouault/gdal_coverage/builds/81242249
>>> 
>>> Even
>> 
>> -----
>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>> 
>> First Pogril: Why is life like sticking your head in a bucket filled with
>> hyena offal? Second Pogril: I don't know.  Why IS life like sticking your
>> head in a bucket filled with hyena offal? First Pogril: I don't know
>> either.  Wretched, isn't it?
>> 
>> -HitchHiker's Guide to the Galaxy
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From antonio.valentino at tiscali.it  Sun Sep 20 09:58:49 2015
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sun, 20 Sep 2015 18:58:49 +0200
Subject: [gdal-dev] Installation prefix for Python bindings on MacOSX ?
In-Reply-To: <7B101EB8-0EE5-4E34-881B-8769E901BF0B@kyngchaos.com>
References: <201509201709.38480.even.rouault@spatialys.com>
	<53125EB5-56B0-49F3-BED1-336E496C73A7@kyngchaos.com>
	<201509201733.49572.even.rouault@spatialys.com>
	<7B101EB8-0EE5-4E34-881B-8769E901BF0B@kyngchaos.com>
Message-ID: <53E72084-00EF-4736-B51B-DAC7B4EA15DD@tiscali.it>

Hi Even, hi William,
I have just opened a new PR on github (https://github.com/OSGeo/gdal/pull/68).
It should restore the old behavior if the standard system interpreted is used on OSX.
It should also work with homebrew etc. that uses the classic unix schema for python packages installation.

Please let me know if it work for you.


cheers

--
Antonio Valentino



> Il giorno 20/set/2015, alle ore 18:02, William Kyngesburye <woklist at kyngchaos.com> ha scritto:
> 
> I tried the bit there that gets the python path (get_python_lb), and it works to get the OS X user path if there is no arg, ie get_python_lib().
> 
> For OS X is that the python user path is independent of the installation prefix.
> 
> For the logic, one basic method in a makefile I can think of for detecting OS X is to check uname for Darwin.  Note that the python path is also independent on whether an OS X framework (MACOSX_FRAMEWORK) or unix library is built, so don't use MACOSX_FRAMEWORK to test for OS X.
> 
> On Sep 20, 2015, at 10:33 AM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
>> Le dimanche 20 septembre 2015 17:24:18, William Kyngesburye a ?crit :
>>> /Library/Python/[version]/site-packages is the standard user path for OS X.
>>> /usr/lib is not in the python path.  Even if you add /usr/lib to the
>>> Travis setup, the installation will still be broken for general use.
>> 
>> ok, thanks for the feedback William. So I guess we have to figure how to revert
>> to the old behaviour on OS X then ? Any idea ? The changeset is
>> https://trac.osgeo.org/gdal/changeset/30564
>> 
>>> 
>>> On Sep 20, 2015, at 10:09 AM, Even Rouault <even.rouault at spatialys.com>
>> wrote:
>>>> Hi,
>>>> 
>>>> Antonio has contributed a fix in https://trac.osgeo.org/gdal/ticket/4563
>>>> to make the Python bindings honour the installation prefix.
>>>> 
>>>> A side effect of this is that now on the MacOsX Travis instance, they are
>>>> installed in /usr/lib/python2.7/site-packages whereas previously they
>>>> were installed in /Library/Python/2.7/site-packages
>>>> But it appears that they are not found automatically when in
>>>> /usr/lib/python2.7/site-packages. Is it expected ? Should we define
>>>> PYTHONPATH to /usr/lib/python2.7/site-packages in thre Travis script (
>>>> https://github.com/rouault/gdal_coverage/blob/trunk_travis_macosx/.travis
>>>> .yml )
>>>> 
>>>> Before change:
>>>> https://travis-ci.org/rouault/gdal_coverage/builds/81193480 New
>>>> behaviour: ?https://travis-ci.org/rouault/gdal_coverage/builds/81242249
>>>> 
>>>> Even
>>> 
>>> -----
>>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>>> http://www.kyngchaos.com/
>>> 
>>> First Pogril: Why is life like sticking your head in a bucket filled with
>>> hyena offal? Second Pogril: I don't know.  Why IS life like sticking your
>>> head in a bucket filled with hyena offal? First Pogril: I don't know
>>> either.  Wretched, isn't it?
>>> 
>>> -HitchHiker's Guide to the Galaxy
>> 
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
> 
> - Marvin
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 842 bytes
Desc: Message signed with OpenPGP using GPGMail
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150920/8399e329/attachment.pgp>

From woklist at kyngchaos.com  Sun Sep 20 10:29:51 2015
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Sun, 20 Sep 2015 12:29:51 -0500
Subject: [gdal-dev] Installation prefix for Python bindings on MacOSX ?
In-Reply-To: <53E72084-00EF-4736-B51B-DAC7B4EA15DD@tiscali.it>
References: <201509201709.38480.even.rouault@spatialys.com>
	<53125EB5-56B0-49F3-BED1-336E496C73A7@kyngchaos.com>
	<201509201733.49572.even.rouault@spatialys.com>
	<7B101EB8-0EE5-4E34-881B-8769E901BF0B@kyngchaos.com>
	<53E72084-00EF-4736-B51B-DAC7B4EA15DD@tiscali.it>
Message-ID: <1D70893D-2749-401E-A291-D6279D332611@kyngchaos.com>

That looks like it should work.  I'm only just getting around to looking at GDAL 2, so I don't know when I'll get a chance to test that.

On Sep 20, 2015, at 11:58 AM, Antonio Valentino <antonio.valentino at tiscali.it> wrote:

> Hi Even, hi William,
> I have just opened a new PR on github (https://github.com/OSGeo/gdal/pull/68).
> It should restore the old behavior if the standard system interpreted is used on OSX.
> It should also work with homebrew etc. that uses the classic unix schema for python packages installation.
> 
> Please let me know if it work for you.
> 
> 
> cheers
> 
> --
> Antonio Valentino
> 
> 
> 
>> Il giorno 20/set/2015, alle ore 18:02, William Kyngesburye <woklist at kyngchaos.com> ha scritto:
>> 
>> I tried the bit there that gets the python path (get_python_lb), and it works to get the OS X user path if there is no arg, ie get_python_lib().
>> 
>> For OS X is that the python user path is independent of the installation prefix.
>> 
>> For the logic, one basic method in a makefile I can think of for detecting OS X is to check uname for Darwin.  Note that the python path is also independent on whether an OS X framework (MACOSX_FRAMEWORK) or unix library is built, so don't use MACOSX_FRAMEWORK to test for OS X.
>> 
>> On Sep 20, 2015, at 10:33 AM, Even Rouault <even.rouault at spatialys.com> wrote:
>> 
>>> Le dimanche 20 septembre 2015 17:24:18, William Kyngesburye a ?crit :
>>>> /Library/Python/[version]/site-packages is the standard user path for OS X.
>>>> /usr/lib is not in the python path.  Even if you add /usr/lib to the
>>>> Travis setup, the installation will still be broken for general use.
>>> 
>>> ok, thanks for the feedback William. So I guess we have to figure how to revert
>>> to the old behaviour on OS X then ? Any idea ? The changeset is
>>> https://trac.osgeo.org/gdal/changeset/30564
>>> 
>>>> 
>>>> On Sep 20, 2015, at 10:09 AM, Even Rouault <even.rouault at spatialys.com>
>>> wrote:
>>>>> Hi,
>>>>> 
>>>>> Antonio has contributed a fix in https://trac.osgeo.org/gdal/ticket/4563
>>>>> to make the Python bindings honour the installation prefix.
>>>>> 
>>>>> A side effect of this is that now on the MacOsX Travis instance, they are
>>>>> installed in /usr/lib/python2.7/site-packages whereas previously they
>>>>> were installed in /Library/Python/2.7/site-packages
>>>>> But it appears that they are not found automatically when in
>>>>> /usr/lib/python2.7/site-packages. Is it expected ? Should we define
>>>>> PYTHONPATH to /usr/lib/python2.7/site-packages in thre Travis script (
>>>>> https://github.com/rouault/gdal_coverage/blob/trunk_travis_macosx/.travis
>>>>> .yml )
>>>>> 
>>>>> Before change:
>>>>> https://travis-ci.org/rouault/gdal_coverage/builds/81193480 New
>>>>> behaviour: ?https://travis-ci.org/rouault/gdal_coverage/builds/81242249
>>>>> 
>>>>> Even
>>>> 
>>>> -----
>>>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>>>> http://www.kyngchaos.com/
>>>> 
>>>> First Pogril: Why is life like sticking your head in a bucket filled with
>>>> hyena offal? Second Pogril: I don't know.  Why IS life like sticking your
>>>> head in a bucket filled with hyena offal? First Pogril: I don't know
>>>> either.  Wretched, isn't it?
>>>> 
>>>> -HitchHiker's Guide to the Galaxy
>>> 
>>> --
>>> Spatialys - Geospatial professional services
>>> http://www.spatialys.com
>> 
>> -----
>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>> 
>> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
>> 
>> - Marvin
>> 
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From schwehr at gmail.com  Sun Sep 20 10:52:16 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 20 Sep 2015 10:52:16 -0700
Subject: [gdal-dev] Possible code style changes to GDAL C++
Message-ID: <CACmBxyvbqG5Gu=vYTbvRpkBm0WChWN8xpOzpGuK01NDmUEYKAQ@mail.gmail.com>

Hi all,

TL;DR: This is a list of possible topics for change to RFC 8
<https://trac.osgeo.org/gdal/wiki/rfc8_devguide>.  I think the default
action should be to not to add / change anything.  If a point is worth
discussing, we should probably create a bug for just that point and discuss
it there.  Remember, this is a topic where there is usually many good
answers that often conflict.

Cheers,
-kurt


Most of you have probably notice the very large number of patches I've been
making to GDAL to work through the backlog of Coverity Scan complaints (we
still have >500 in the general scan and > 1000 in kssshannon's more
aggressive coverage).  While in the code, I've been trying to make the code
(I hope!) more readable when it was easy to do.  I also think these changes
will make it easier to follow the code when in non-optimized mode.  Even
thought it might be worth discussing and seeing if any of these should be
incorporated into RFC 8: Developer Guidelines
<https://trac.osgeo.org/gdal/wiki/rfc8_devguide>.  With GDAL, this is a
real challenge.  We all come from very different backgrounds and have
different requirements for GDAL.  And as seen across the internet, there
are lots of very good C++ style guides with orthogonal / conflicting
opinions.

For a bit of context for me that is worth having in mind when reading this
initial list.  First, I really started doing C++ in the GCC 2.7.2 / SGI
Compiler in the 1996-8 timeframe.  Back then, STL was new and the compilers
really sucked and the support tools were horrible (CVS, no CI, Purify was
99.9 noise, etc).  I've been the fink (debian packaging on mac osx) for a
decade.  For the last couple years, I've been working in the internal
Google code base with > 10K engineers in a single code base and working in
C++11 with being required to meet the Google C++ Style Guide
<https://google-styleguide.googlecode.com/svn/trunk/cppguide.html> (the
internal one is even more detailed and is more of a living document).
Continual Integration testing is the center of the universe, testing is
done with gunit for C++ and Python's unittest2, and building is done with
the Google build system (open sourced as bazel
<https://github.com/bazelbuild/bazel>).
With GDAL, I have to translate what I would want to do in C++11 to what
older standards support.  That isn't easy.  I've also been trying to think
about the time when GDAL decides to switch to C++11 or 14 as a minimum
requirement.  How could code simplify, become more robust, as possibly
faster if we had unique_ptr, make_unique, constexpr, static_assert, the new
for loops over containers without having iterator noise, etc.

I've tried to make a start at a list of these, but I've not had time to put
any reasonable discussion of the why.  One key goal in all this is not
never impact the C ABI and try hard to not change the C++ ABI.

There really isn't an order to this...  The top priority is reducing the
cognitive load on the reader.

- Move variable declarations to first use (or as close to it as reasonable)
- Initialize and declare in the same statement if possible
- Add const when possible
- Only declare one variable per line
- Prefer C++ *_casts to C (int)foo casts or C++ int(foo)
- Prefer bool/true/false to int/TRUE/FALSE when not changing an ABI
- Prefer small blocks to returns first without scope for rest
   if (poFoo == NULL)
       return;
   yada;
   yada;
- Declare loop variables in the for if at all possible
  for( int i = 0; i < 10; ++i)
    Foo(i);
  not
  int i;
  for( i = 0; i < 123; ++i)
- Prefer pre inc/dec if possible.  It's never slower than post.
- Prefer a static const to a #defined const.
- Prefer a function to a #define macro if at all possible
- Initialize all members in constructors for classes.  Also structs when
not used by C code
- Use std::fill + CPL_ARRAYSIZE over memset
- Use ! to flip bools:  bFoo = !bFoo
- Whitespace clean and new/modified code
- Use NULL over 0 for pointers to make switching to nullptr easier.
- Which is prefered for checking a nullptr?
   if( poDS == NULL )
   or
   if( !poDS )
   I see both.
- Use correct grammar, capitalization and punctuation in comments.  Is
British or American English prefered or no preference?
- Prefer C++ // to /* */
- Except in unused arguments there int /* unused_foo */ is nice.
- Drop my CPL_UNUSED macro for commenting out the name of the unused arg
- Never use the non-length C string functions.  Use strncat (and write the
\0), CPLsnprintf, etc.
- Do not check for a nullptr before calling CPLFree or for other functions
that can handle a nullptr
- Prefer initializer lists for constructors (ctors)
- Keep member initialization in the same order as the class def even in the
ctor body
- Keep to the don't use exceptions model.  Many of us end up having to
write catch wrappers that really suck, and the C interface can't expose
exceptions.

Less clear:

- Wrap new code in namespaces.  Some of us are having a bad type with name
collisions.  I propose osgeo::gdal as the root with the option to use more
detailed namespaces for things like drivers.  Then we can stop worrying
about more issues like I'm seeing between GDAL, KML and Poppler, where I'm
having to use the C preprocesser to make generic function, class, and
struct names not clash.
- If you can use a std::string and avoid CPLString, do so.
- Prefer std::vector and std::map for non C facing internals rather than
CSL* and the like
- *New* code should be auto formatted by [pick some tool].  e.g. If I were
to pick, it would be: clang-format -style="{BasedOnStyle: Google,
IndentWidth: 4}", but anything that is consistent is great!   I've been
spending a lot of time looking at the surrounding code and trying to figure
how to match the local style.  It's exhausting when trying to read through
large amounts of the code base with styles shifting all over the place.
- Prefered way to write documentation in comments?  I see many styles.
Which to pattern after in new code?
- Can we pick a standard for flagging issues in the code?  Functions that
are deprecated or  coverity issues I don't know how to solve or known
security issues that will break the ABI to fix (e.g. grib support).  I will
also start to create bugs now that I'm getting past many of the really easy
issues to solve.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150920/932a8e92/attachment-0001.html>

From schwehr at gmail.com  Sun Sep 20 10:59:46 2015
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sun, 20 Sep 2015 10:59:46 -0700
Subject: [gdal-dev] Installation prefix for Python bindings on MacOSX ?
In-Reply-To: <1D70893D-2749-401E-A291-D6279D332611@kyngchaos.com>
References: <201509201709.38480.even.rouault@spatialys.com>
	<53125EB5-56B0-49F3-BED1-336E496C73A7@kyngchaos.com>
	<201509201733.49572.even.rouault@spatialys.com>
	<7B101EB8-0EE5-4E34-881B-8769E901BF0B@kyngchaos.com>
	<53E72084-00EF-4736-B51B-DAC7B4EA15DD@tiscali.it>
	<1D70893D-2749-401E-A291-D6279D332611@kyngchaos.com>
Message-ID: <CACmBxysq9AFAzm0qEYR9ve3NNXhgHxR5zetHv2tU2aVVpVJp4A@mail.gmail.com>

I've also not had a chance to try to figure out how to get gdal2 into fink
on mac osx.  I've been focusing my time on Linux lately.  Fink only works
in a user configurable tree (/sw by default), so fink often hits this type
of issue with packages.  I'll try to get that soonish.  I'll be making a
2nd package for gdal2 since there it will be a long time before there are
no packages that require gdal < 2.

On Sun, Sep 20, 2015 at 10:29 AM, William Kyngesburye <woklist at kyngchaos.com
> wrote:

> That looks like it should work.  I'm only just getting around to looking
> at GDAL 2, so I don't know when I'll get a chance to test that.
>
> On Sep 20, 2015, at 11:58 AM, Antonio Valentino <
> antonio.valentino at tiscali.it> wrote:
>
> > Hi Even, hi William,
> > I have just opened a new PR on github (
> https://github.com/OSGeo/gdal/pull/68).
> > It should restore the old behavior if the standard system interpreted is
> used on OSX.
> > It should also work with homebrew etc. that uses the classic unix schema
> for python packages installation.
> >
> > Please let me know if it work for you.
> >
> >
> > cheers
> >
> > --
> > Antonio Valentino
> >
> >
> >
> >> Il giorno 20/set/2015, alle ore 18:02, William Kyngesburye <
> woklist at kyngchaos.com> ha scritto:
> >>
> >> I tried the bit there that gets the python path (get_python_lb), and it
> works to get the OS X user path if there is no arg, ie get_python_lib().
> >>
> >> For OS X is that the python user path is independent of the
> installation prefix.
> >>
> >> For the logic, one basic method in a makefile I can think of for
> detecting OS X is to check uname for Darwin.  Note that the python path is
> also independent on whether an OS X framework (MACOSX_FRAMEWORK) or unix
> library is built, so don't use MACOSX_FRAMEWORK to test for OS X.
> >>
> >> On Sep 20, 2015, at 10:33 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >>
> >>> Le dimanche 20 septembre 2015 17:24:18, William Kyngesburye a ?crit :
> >>>> /Library/Python/[version]/site-packages is the standard user path for
> OS X.
> >>>> /usr/lib is not in the python path.  Even if you add /usr/lib to the
> >>>> Travis setup, the installation will still be broken for general use.
> >>>
> >>> ok, thanks for the feedback William. So I guess we have to figure how
> to revert
> >>> to the old behaviour on OS X then ? Any idea ? The changeset is
> >>> https://trac.osgeo.org/gdal/changeset/30564
> >>>
> >>>>
> >>>> On Sep 20, 2015, at 10:09 AM, Even Rouault <
> even.rouault at spatialys.com>
> >>> wrote:
> >>>>> Hi,
> >>>>>
> >>>>> Antonio has contributed a fix in
> https://trac.osgeo.org/gdal/ticket/4563
> >>>>> to make the Python bindings honour the installation prefix.
> >>>>>
> >>>>> A side effect of this is that now on the MacOsX Travis instance,
> they are
> >>>>> installed in /usr/lib/python2.7/site-packages whereas previously they
> >>>>> were installed in /Library/Python/2.7/site-packages
> >>>>> But it appears that they are not found automatically when in
> >>>>> /usr/lib/python2.7/site-packages. Is it expected ? Should we define
> >>>>> PYTHONPATH to /usr/lib/python2.7/site-packages in thre Travis script
> (
> >>>>>
> https://github.com/rouault/gdal_coverage/blob/trunk_travis_macosx/.travis
> >>>>> .yml )
> >>>>>
> >>>>> Before change:
> >>>>> https://travis-ci.org/rouault/gdal_coverage/builds/81193480 New
> >>>>> behaviour: ?
> https://travis-ci.org/rouault/gdal_coverage/builds/81242249
> >>>>>
> >>>>> Even
> >>>>
> >>>> -----
> >>>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> >>>> http://www.kyngchaos.com/
> >>>>
> >>>> First Pogril: Why is life like sticking your head in a bucket filled
> with
> >>>> hyena offal? Second Pogril: I don't know.  Why IS life like sticking
> your
> >>>> head in a bucket filled with hyena offal? First Pogril: I don't know
> >>>> either.  Wretched, isn't it?
> >>>>
> >>>> -HitchHiker's Guide to the Galaxy
> >>>
> >>> --
> >>> Spatialys - Geospatial professional services
> >>> http://www.spatialys.com
> >>
> >> -----
> >> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> >> http://www.kyngchaos.com/
> >>
> >> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
> >>
> >> - Marvin
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
>
> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
>
> - Marvin
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150920/6aa2feb2/attachment.html>

From hrz at geodata.soton.ac.uk  Mon Sep 21 00:29:39 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Mon, 21 Sep 2015 08:29:39 +0100
Subject: [gdal-dev] Generating 200x200 tiles
In-Reply-To: <D222C956.11BF5%alistair.young@uhi.ac.uk>
References: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
	<5866510.lRALPFp2vA@saxicola> <D222C956.11BF5%alistair.young@uhi.ac.uk>
Message-ID: <55FFB1E3.3000800@geodata.soton.ac.uk>



On 19/09/15 08:14, Alistair Young wrote:
> Thanks for that. I tried ctb but just got "Could not get transformation  > information from source dataset?. Chaning gdal2tiles to output 
200x200 > worked ok but the SDK failed to display the tiles. I just have 
a 4000x4000 > tif with no geo referencing information so I can only 
generate raster > profile tiles.

Alistair, you'll have trouble getting anything useful out of any geospatial
tools without inputting datasets that are correctly georeferenced with an
appropriate spatial reference system.  Assuming you know the extents of your
4000x4000 raster, you should be able to do this by creating a virtual raster
with gdal_translate using options along the following lines:

    gdal_translate -of VRT -a_srs srs_def -a_ullr ulx uly lrx lry in.tif 
out.vrt

Passing out.vrt to ctb should resolve the error, and you'll have more chance
with other tools too.

Best regards,

Homme

>  > Alistair > > > ----------------- > mov eax,1 > mov ebx,0 > int 80 > 
 > > > > On 18/09/2015 00:36, "gdal-dev-bounces at lists.osgeo.org on 
behalf of Brad > Hards" <gdal-dev-bounces at lists.osgeo.org on behalf of 
bradh at frogmouth.net> > wrote: > >> On Thu, 17 Sep 2015 06:03:15 PM 
Alistair Young wrote: >>> I've been using gdal2tiles to generate zoom 
levels and tiles and it's >>> working fine but unfortunately the tiles 
are 256x256 and don't work with >>> the UK Ordnance Survey mapping SDK, 
which requires 200x200 tiles. Is >>> there >>> a way to generate these 
200x200 tiles? I can generate them using >>> gdal_retile but it can't 
generate the zoom levels. >> I'd suggest just hacking the python 
script.  Make a copy, and edit the >> __init__() function to change the 
tileSize member init to be 200 vs 256. >> >> Worth a quick try at least. 
 >> >> Brad >> >> >> _______________________________________________ >> 
gdal-dev mailing list >> gdal-dev at lists.osgeo.org >> 
http://lists.osgeo.org/mailman/listinfo/gdal-dev > > 
_______________________________________________ > gdal-dev mailing list 
 > gdal-dev at lists.osgeo.org > 
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150921/69f1ef7b/attachment.html>

From bishop.dev at gmail.com  Mon Sep 21 02:22:35 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Mon, 21 Sep 2015 12:22:35 +0300
Subject: [gdal-dev] Quick report code sprint Seoul 2015
Message-ID: <55FFCC5B.8030901@gmail.com>

Hi everybody,
I'd like to share the results of code sprint in Seoul 2015.
The main aim was to restructure the gdal sources tree to fulfil the 
Cmake needs.
During the code sprint we test the git possibilities to move files 
between directories. But we decide to create a python script 
(https://github.com/nextgis-extra/lib_gdal/tree/master/etc/cmake-build-helpers) 
to do it, as it provide us more complex logic. Also there is a csv file 
with directory mapping.
Additionally the root cmakelists.txt was created.
I plan to build lightweight gdal (port and few drivers) with bindings.
At this point we can discuss if this working idea or not.
During the code sprint we clear all gdal repos and forks in our github 
account.
If anybody need old cmake4gdal branch - let me know.

Best regards,
     Dmitry



From alistair.young at uhi.ac.uk  Mon Sep 21 02:23:53 2015
From: alistair.young at uhi.ac.uk (Alistair Young)
Date: Mon, 21 Sep 2015 09:23:53 +0000
Subject: [gdal-dev] Generating 200x200 tiles
In-Reply-To: <55FFB1E3.3000800@geodata.soton.ac.uk>
References: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
	<5866510.lRALPFp2vA@saxicola> <D222C956.11BF5%alistair.young@uhi.ac.uk>
	<55FFB1E3.3000800@geodata.soton.ac.uk>
Message-ID: <D22585E9.11C26%alistair.young@uhi.ac.uk>

thanks for that. I downloaded the TFW and TAB files from the Ordnance Survey, put them in the same directory as the tif and did:

gdal_translate -of VRT -a_srs EPSG:27700 sx88.tif out.vrt

And ran ctb-tile on out.vrt. It tiled it but into what appear to be weird columns and rows. E.g. Col 14, row 16046 etc. The SDK fails to read this as I suspect it expects 20 cols and 20 rows (it?s 5 metres per pixel resolution)

I?m not sure what ullr is for. There?s no  information about the tif (it?s a British National Grid Square 20kmx20km) but I?ve no idea what lat/lon it covers.

Alistair


-----------------
mov eax,1
mov ebx,0
int 80

From: <gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org>> on behalf of Homme Zwaagstra <hrz at geodata.soton.ac.uk<mailto:hrz at geodata.soton.ac.uk>>
Date: Monday, 21 September 2015 08:29
To: "gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>" <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>>
Subject: Re: [gdal-dev] Generating 200x200 tiles



On 19/09/15 08:14, Alistair Young wrote:
> Thanks for that. I tried ctb but just got "Could not get transformation > information from source dataset?. Chaning gdal2tiles to output 200x200 > worked ok but the SDK failed to display the tiles. I just have a 4000x4000 > tif with no geo referencing information so I can only generate raster > profile tiles.

Alistair, you'll have trouble getting anything useful out of any geospatial
tools without inputting datasets that are correctly georeferenced with an
appropriate spatial reference system.  Assuming you know the extents of your
4000x4000 raster, you should be able to do this by creating a virtual raster
with gdal_translate using options along the following lines:

   gdal_translate -of VRT -a_srs srs_def -a_ullr ulx uly lrx lry in.tif out.vrt

Passing out.vrt to ctb should resolve the error, and you'll have more chance
with other tools too.

Best regards,

Homme

> > Alistair > > > ----------------- > mov eax,1 > mov ebx,0 > int 80 > > > > > On 18/09/2015 00:36, "gdal-dev-bounces at lists.osgeo.org<mailto:gdal-dev-bounces at lists.osgeo.org> on behalf of Brad > Hards" <gdal-dev-bounces at lists.osgeo.org on behalf of bradh at frogmouth.net><mailto:gdal-dev-bounces at lists.osgeo.orgonbehalfofbradh@frogmouth.net> > wrote: > >> On Thu, 17 Sep 2015 06:03:15 PM Alistair Young wrote: >>> I've been using gdal2tiles to generate zoom levels and tiles and it's >>> working fine but unfortunately the tiles are 256x256 and don't work with >>> the UK Ordnance Survey mapping SDK, which requires 200x200 tiles. Is >>> there >>> a way to generate these 200x200 tiles? I can generate them using >>> gdal_retile but it can't generate the zoom levels. >> I'd suggest just hacking the python script.  Make a copy, and edit the >> __init__() function to change the tileSize member init to be 200 vs 256. >> >> Worth a quick try at least. >> >> Brad >> >> >> _______________________________________________ >> gdal-dev mailing list >> gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev > > _______________________________________________ > gdal-dev mailing list > gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150921/22115473/attachment.html>

From even.rouault at spatialys.com  Mon Sep 21 03:27:35 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Sep 2015 12:27:35 +0200
Subject: [gdal-dev] Motions: Promote 1.11.3 RC2 and 2.0.1 RC1 for release
Message-ID: <201509211227.35750.even.rouault@spatialys.com>

Hi,

Saving a few bits, 2 motions in one email:

Motion 1: GDAL/OGR 1.11.3 RC2 is promoted to be the official 1.11.3 final 
release.

Motion 2: GDAL/OGR 2.0.1 RC1 is promoted to be the official 2.0.1 final release.

--

My votes :
Motion 1: + 1
Motion 2: + 1

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Mon Sep 21 04:16:43 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Mon, 21 Sep 2015 11:16:43 +0000 (UTC)
Subject: [gdal-dev] Motions: Promote 1.11.3 RC2 and 2.0.1 RC1 for release
References: <201509211227.35750.even.rouault@spatialys.com>
Message-ID: <loom.20150921T131559-47@post.gmane.org>

Even Rouault <even.rouault <at> spatialys.com> writes:

> 
> Hi,
> 
> Saving a few bits, 2 motions in one email:
> 
> Motion 1: GDAL/OGR 1.11.3 RC2 is promoted to be the official 1.11.3 final 
> release.
> 
> Motion 2: GDAL/OGR 2.0.1 RC1 is promoted to be the official 2.0.1 final
release.
> 
> --
> 
> My votes :
> Motion 1: + 1
> Motion 2: + 1

+1
+1

-Jukka Rahkonen-


From dmorissette at mapgears.com  Mon Sep 21 04:46:17 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 21 Sep 2015 07:46:17 -0400
Subject: [gdal-dev] Motions: Promote 1.11.3 RC2 and 2.0.1 RC1 for release
In-Reply-To: <201509211227.35750.even.rouault@spatialys.com>
References: <201509211227.35750.even.rouault@spatialys.com>
Message-ID: <55FFEE09.6000702@mapgears.com>

On 2015-09-21 6:27 AM, Even Rouault wrote:
> Hi,
>
> Saving a few bits, 2 motions in one email:
>
> Motion 1: GDAL/OGR 1.11.3 RC2 is promoted to be the official 1.11.3 final
> release.
>

+1


> Motion 2: GDAL/OGR 2.0.1 RC1 is promoted to be the official 2.0.1 final release.
>

+1

Daniel

-- 
Daniel Morissette
http://www.mapgears.com/
T: +1 418-696-5056 #201

http://evouala.com/ - Location Intelligence Made Easy

From hrz at geodata.soton.ac.uk  Mon Sep 21 04:59:25 2015
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Mon, 21 Sep 2015 12:59:25 +0100
Subject: [gdal-dev] Generating 200x200 tiles
In-Reply-To: <D22585E9.11C26%alistair.young@uhi.ac.uk>
References: <D220BEF2.11BCB%alistair.young@uhi.ac.uk>
	<5866510.lRALPFp2vA@saxicola> <D222C956.11BF5%alistair.young@uhi.ac.uk>
	<55FFB1E3.3000800@geodata.soton.ac.uk>
	<D22585E9.11C26%alistair.young@uhi.ac.uk>
Message-ID: <55FFF11D.7040405@geodata.soton.ac.uk>


On 21/09/15 10:23, Alistair Young wrote:
> thanks for that. I downloaded the TFW and TAB files from the Ordnance Survey, put them in the same directory as the tif and did:  > > gdal_translate -of VRT -a_srs EPSG:27700 sx88.tif out.vrt >

The TFW and tab files should provide this the georeference and 
coordinate system
information.  This means you should just be able to skip the 
gdal_translate step
and use sx88.tif directly.  You can run `gdalinfo sx88.tif` to verify this.

> And ran ctb-tile on out.vrt. It tiled it but into what appear to be weird columns and rows. E.g. Col 14, row 16046 etc. The SDK fails to read this as I suspect it expects 20 cols and 20 rows (it?s 5 metres per pixel resolution)

The weird columns and rows reflect your use of the TMS geodetic profile.
Passing `-profile mercator` to ctb-tile will use the Mercator profile.  
I've not
used the OSGB SDK but if I had to guess I would assume it uses web 
mercator.

The resolution of the tiles will vary with the zoom level that you are 
looking
at.  When you say 'it?s 5 metres per pixel resolution' what are you 
referring to
by 'it'?

> I?m not sure what ullr is for. There?s no  information about the tif (it?s a British National Grid Square 20kmx20km) but I?ve no idea what lat/lon it covers.

ullr specifies the extent of the dataset. Assuming sx88.tif refers to 
the OSGB
national grid square SX88 (which would be 10kmx10km), your gdal_translate
command would be:

gdal_translate -of VRT -a_ullr 280000 90000 290000 80000 -a_srs 
EPSG:27700 sx88.tif out.vrt

As mentioned, however, the TFW and TAB files should provide this 
information.

If you need further help with using ctb-tile, it may be best to email me
directly rather than risk polluting the GDAL mailing list.

Best regards,

Homme.


>  > Alistair > > > ----------------- > mov eax,1 > mov ebx,0 > int 80 > 
 > From: <gdal-dev-bounces at lists.osgeo.org> on behalf of Homme Zwaagstra 
<hrz at geodata.soton.ac.uk> > Date: Monday, 21 September 2015 08:29 > To: 
"gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org> > Subject: Re: 
[gdal-dev] Generating 200x200 tiles > > > > On 19/09/15 08:14, Alistair 
Young wrote: > > Thanks for that. I tried ctb but just got "Could not 
get transformation > information from source dataset?. Chaning 
gdal2tiles to output 200x200 > worked ok but the SDK failed to display 
the tiles. I just have a 4000x4000 > >  tif with no geo referencing 
information so I can only generate raster > profile tiles. > > Alistair, 
you'll have trouble getting anything useful out of any geospatial > 
tools without inputting datasets that are correctly georeferenced with 
an > appropriate spatial reference system.  Assuming you know the 
extents of your > 4000x4000 raster, you should be able to do this by 
creating a virtual raster > with gdal_translate using options along the 
following lines: > >    gdal_translate -of VRT -a_srs srs_def -a_ullr 
ulx uly lrx lry in.tif out.vrt > > Passing out.vrt to ctb should resolve 
the error, and you'll have more chance > with other tools too. > > Best 
regards, > > Homme > > > > Alistair > > > ----------------- > mov eax,1 
 > mov ebx,0 > int 80 > > > > > On 18/09/2015 00:36, 
"gdal-dev-bounces at lists.osgeo.org on >  behalf of Brad > Hards" > 
<gdal-dev-bounces at lists.osgeo.org on behalf of bradh at frogmouth.net> > 
wrote: > >> On Thu, 17 Sep 2015 06:03:15 PM Alistair Young wrote: >>> 
I've been using gdal2tiles to generate zoom levels and tiles and it's 
 >>> working fine but unfortunately the tiles >  are 256x256 and don't 
work with >>> the UK Ordnance Survey mapping SDK, which requires 200x200 
tiles. Is >>> there >>> a way to generate these 200x200 tiles? I can 
generate them using >>> gdal_retile but it can't generate the zoom 
levels. >> I'd suggest just >  hacking the python script.  Make a copy, 
and edit the >> __init__() function to change the tileSize member init 
to be 200 vs 256. >> >> Worth a quick try at least. >> >> Brad >> >> >> 
_______________________________________________ >> gdal-dev mailing list 
 >  >> gdal-dev at lists.osgeo.org >> > > 
http://lists.osgeo.org/mailman/listinfo/gdal-dev > > 
_______________________________________________ > gdal-dev mailing list 
 > > gdal-dev at lists.osgeo.org > > > 
http://lists.osgeo.org/mailman/listinfo/gdal-dev > >


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150921/85b47465/attachment.html>

From even.rouault at spatialys.com  Mon Sep 21 05:03:27 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 21 Sep 2015 14:03:27 +0200
Subject: [gdal-dev] Possible code style changes to GDAL C++
In-Reply-To: <CACmBxyvbqG5Gu=vYTbvRpkBm0WChWN8xpOzpGuK01NDmUEYKAQ@mail.gmail.com>
References: <CACmBxyvbqG5Gu=vYTbvRpkBm0WChWN8xpOzpGuK01NDmUEYKAQ@mail.gmail.com>
Message-ID: <201509211403.27592.even.rouault@spatialys.com>

Kurt,

Thanks for bringing your propositions.

> With GDAL, I have to translate what I would want to do in C++11 to what
> older standards support.  That isn't easy.  I've also been trying to think
> about the time when GDAL decides to switch to C++11 or 14 as a minimum
> requirement.  How could code simplify, become more robust, as possibly
> faster if we had unique_ptr, make_unique, constexpr, static_assert, the new
> for loops over containers without having iterator noise, etc.

C++14 seems way too early due to the probable lack of broad compiler support.
We might consider C++11 at some point. Someone would have to review which 
C++11 compliant compilers are available on which platforms. For sure, MSVC 
2010 (used currently for OSGeo4W builds) must not be compliant as I discovered 
recently when compiling pdfium. 
We might have some pain with some proprietary SDKs shipping libraries for old 
MSVC versions, but they'll have to move along too at some point, if not 
already done. With that move, we might also left aside folks using proprietary 
Unix and their ancient & odd compilers, but I don't think we should care that 
much.

> 
> I've tried to make a start at a list of these, but I've not had time to put
> any reasonable discussion of the why.  One key goal in all this is not
> never impact the C ABI and try hard to not change the C++ ABI.
> 
> There really isn't an order to this...  The top priority is reducing the
> cognitive load on the reader.

Globally looks good to me (meaning +1 or +0 depending on items)

> 
> - Move variable declarations to first use (or as close to it as reasonable)
> - Initialize and declare in the same statement if possible
> - Add const when possible
> - Only declare one variable per line
> - Prefer C++ *_casts to C (int)foo casts or C++ int(foo)
> - Prefer bool/true/false to int/TRUE/FALSE when not changing an ABI
The downside is to have inconsistencies between "ABI related" code path using 
int/TRUE/FALSE and internal code using bool/true/false.
> - Prefer small blocks to returns first without scope for rest
>    if (poFoo == NULL)
>        return;
>    yada;
>    yada;
> - Declare loop variables in the for if at all possible
>   for( int i = 0; i < 10; ++i)
>     Foo(i);
>   not
>   int i;
>   for( i = 0; i < 123; ++i)
> - Prefer pre inc/dec if possible.  It's never slower than post.
> - Prefer a static const to a #defined const.
Would that also mean applying the usual rules for variable naming ? When I see 
ONE_MILE I know immediately it is a constant. dfOneMile would be less obvious.
> - Prefer a function to a #define macro if at all possible
> - Initialize all members in constructors for classes.  Also structs when
> not used by C code
> - Use std::fill + CPL_ARRAYSIZE over memset
> - Use ! to flip bools:  bFoo = !bFoo
> - Whitespace clean and new/modified code
> - Use NULL over 0 for pointers to make switching to nullptr easier.
> - Which is prefered for checking a nullptr?
>    if( poDS == NULL )
>    or
>    if( !poDS )
>    I see both.

Personnal preference:  "if( poDS == NULL )" is way more clearer. No ambiguity. 
When I see if (!poDS), I have to spend some time to realize it is not the same 
as "if( poDS != NULL)", and it is also easy to not notice the ! character if 
you read quickly.

> - Use correct grammar, capitalization and punctuation in comments.  Is
> British or American English prefered or no preference?

For a non native writer like me, no preference (I guess American English must 
be more common in software industry), but that rule would be somewhat hard to 
enforce.

> - Prefer C++ // to /* */
> - Except in unused arguments there int /* unused_foo */ is nice.
> - Drop my CPL_UNUSED macro for commenting out the name of the unused arg
> - Never use the non-length C string functions.  Use strncat (and write the
> \0), CPLsnprintf, etc.

We have also the CPLStrlcpy & CPLStrlcat that are the BSD versions. Not sure 
which ones are best. In most cases using std::string is possible and would 
avoid those headaches.

> - Do not check for a nullptr before calling CPLFree or for other functions
> that can handle a nullptr
> - Prefer initializer lists for constructors (ctors)
> - Keep member initialization in the same order as the class def even in the
> ctor body
> - Keep to the don't use exceptions model.  Many of us end up having to
> write catch wrappers that really suck, and the C interface can't expose
> exceptions.
> 
> Less clear:
> 
> - Wrap new code in namespaces.  Some of us are having a bad type with name
> collisions.  I propose osgeo::gdal as the root with the option to use more
> detailed namespaces for things like drivers.  Then we can stop worrying
> about more issues like I'm seeing between GDAL, KML and Poppler, where I'm
> having to use the C preprocesser to make generic function, class, and
> struct names not clash.

That may make sense in drivers yes.
The drawback I see is that it will make debugging with gdb harder due to extra 
typing for setting up breakpoints : "b 
osgeo::gdal::shape::OGRShapeDataSource::Open" yuck

> - If you can use a std::string and avoid CPLString, do so.
> - Prefer std::vector and std::map for non C facing internals rather than
> CSL* and the like
> - *New* code should be auto formatted by [pick some tool].  e.g. If I were
> to pick, it would be: clang-format -style="{BasedOnStyle: Google,
> IndentWidth: 4}", but anything that is consistent is great!   I've been
> spending a lot of time looking at the surrounding code and trying to figure
> how to match the local style.  It's exhausting when trying to read through
> large amounts of the code base with styles shifting all over the place.

Personaly I'm tolerant with small differences in styling, if the general 
appearance is OK. A space character that is here or not here before or after a 
parenthesis doesn't hurt my eyes ;-)
If there's consistent 4 space indentation and no tab, that's a lot.
I'm afraid that if we set too many rules, which require to have specific tools, 
occasional contributors will never manage to provide compliant code (from my 
experience, it is already very difficult to get code that is correct, compiles 
everywhere and has tests) and maintainers will have to suffer the additional 
pain.

> - Prefered way to write documentation in comments?  I see many styles.
> Which to pattern after in new code?
> - Can we pick a standard for flagging issues in the code?  Functions that
> are deprecated

There's a CPL_WARN_DEPRECATED macro available.

> or  coverity issues 

Does coverity recognize comment annotations to discard a false positive ? Or 
is it just in the UI ? Comment annotations would be great if the code is moved 
around.

> I don't know how to solve or known
> security issues that will break the ABI to fix (e.g. grib support).  I will
> also start to create bugs now that I'm getting past many of the really easy
> issues to solve.

A few additional thoughts:
- not sure if many contributors will have time & motivation to make existing 
code compliant to new rules.
- code churn might complicate backports in stable branches (and make results 
of 'svn blame' / 'git blame' more confusing), but that's expected.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From pritimoy.podder at deimos-space.com  Mon Sep 21 08:12:30 2015
From: pritimoy.podder at deimos-space.com (prpp)
Date: Mon, 21 Sep 2015 08:12:30 -0700 (PDT)
Subject: [gdal-dev] gdalwarp clip ratser using WKT polygon and multi polygon
Message-ID: <1442848350964-5225293.post@n6.nabble.com>

Hi,
I want to clip a raster image using the gdalwarp command. I like to use WKT
polygons and multi polygons as follows:



I know it is possible to clip image using shape file and I also did it using
geometry extracted from the postgis DB.

Any help will be appreciated.

Thanks.
Pritimoy



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/gdalwarp-clip-ratser-using-WKT-polygon-and-multi-polygon-tp5225293.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From burton449geo at gmail.com  Tue Sep 22 07:07:56 2015
From: burton449geo at gmail.com (Maxime Demers)
Date: Tue, 22 Sep 2015 10:07:56 -0400
Subject: [gdal-dev] ogr2ogr - geojson to mapInfo - size of .dat become too
	big
Message-ID: <CAKtuc=8fOWgQ60nFnQ8pgNL0NQpBViXR8x4sADLzkukCM_587w@mail.gmail.com>

Hi,

I have notice something bad when converting a geojson to mapInfo tab with
ogr2ogr. The .dat which contain the table feature's properties is getting
way too big after conversion.

To test, I have converted a mapInfo tab to geojson using:

ogr2ogr -f "GeoJSON" test.geojson test.tab

and then I converted it back to mapInfo tab using:

ogr2pgr -f "MapInfo File" test2.tab test.geojson

Before convertion, the .dat of the mapInfo file was 8,75 Mo after
conversion it became 105 Mo.
I dont know if the problem is only when converting geojson to mapInfo tab.
What could be the cause of the problem and does a solution exists?

Thank you,

Maxime Demers

-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150922/dc6cbb22/attachment.html>

From jimlug at co.clackamas.or.us  Tue Sep 22 11:33:34 2015
From: jimlug at co.clackamas.or.us (Dash)
Date: Tue, 22 Sep 2015 11:33:34 -0700 (PDT)
Subject: [gdal-dev] How to merge tile trees
Message-ID: <1442946814074-5225493.post@n6.nabble.com>

Hey folks,

I have a slight problem that is stumping me.  I created  a large set of
tiles using gdal2tiles only to notice that I was missing 2 images.  So,
instead of creating all new tiles I created a set of tiles (with the same
extent) for just the 2 missing images.  However, now I don't know how to
merge the 2 tile trees.  The output from gdal2tiles creates images with the
exact same name, so is it even possible to merge to 2 tile sets? 

I hope my explanation makes sense.

Thanks...



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-merge-tile-trees-tp5225493.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at spatialys.com  Tue Sep 22 11:47:58 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 22 Sep 2015 20:47:58 +0200
Subject: [gdal-dev] ogr2ogr - geojson to mapInfo - size of .dat become
	too big
In-Reply-To: <CAKtuc=8fOWgQ60nFnQ8pgNL0NQpBViXR8x4sADLzkukCM_587w@mail.gmail.com>
References: <CAKtuc=8fOWgQ60nFnQ8pgNL0NQpBViXR8x4sADLzkukCM_587w@mail.gmail.com>
Message-ID: <201509222047.58926.even.rouault@spatialys.com>

Le mardi 22 septembre 2015 16:07:56, Maxime Demers a ?crit :
> Hi,
> 
> I have notice something bad when converting a geojson to mapInfo tab with
> ogr2ogr. The .dat which contain the table feature's properties is getting
> way too big after conversion.
> 
> To test, I have converted a mapInfo tab to geojson using:
> 
> ogr2ogr -f "GeoJSON" test.geojson test.tab
> 
> and then I converted it back to mapInfo tab using:
> 
> ogr2pgr -f "MapInfo File" test2.tab test.geojson
> 
> Before convertion, the .dat of the mapInfo file was 8,75 Mo after
> conversion it became 105 Mo.
> I dont know if the problem is only when converting geojson to mapInfo tab.
> What could be the cause of the problem and does a solution exists?

Maxime,

The issue is that when converting from GeoJSON to .tab, the source text fields in GeoJSON have no longer an explicit field width, hence the mapinfo driver fallbacks to 254 characters.

You could workaround with a statement like this :

ogr2ogr  -f "MapInfo File" test2.tab test.geojson -sql "select cast(field1_name as character(field_width)), cast(field2_name as character(field2_width)), ... from layername"

to specify explicit field width.

It would have been great if ogr2ogr had a mode to automate this (I thought there was one already, but can't find it)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From dmorissette at mapgears.com  Tue Sep 22 13:38:45 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 22 Sep 2015 16:38:45 -0400
Subject: [gdal-dev] Looking for info on ADS/ODF imagery format
Message-ID: <5601BC55.1060106@mapgears.com>

Hi everyone,

I have been sent an imagery dataset in what looks like an ADS imagery 
format, and to my great surprise, it does not seem to be supported by GDAL.

The dataset is a directory starting with a set of header files

15_20140507_1441_RGBNN00L1.ads
15_20140507_1441_RGBNN00L1.hist
15_20140507_1441_RGBNN00L1.min
15_20140507_1441_RGBNN00L1.odf
15_20140507_1441_RGBNN00L1.odf.adj
15_20140507_1441_RGBNN00L1.sup
15_20140507_1441_RGBNN00L1.xml

and with a set of 84 TIF files with filenames as follows:

15_20140507_1441_RGBNB19L1_0_0.tif
   to
15_20140507_1441_RGBNB19L1_0_84.tif

The TIF files appear to be adjacent tiles of 4096x20660 pixels each, but 
unfortunately there is no georeferencing info in any of the TIF files, 
and I do not find any useful georeferencing or origin coordinates info 
in any of the readable header files either. Well, I can tell in which 
UTM projection/zone the data is, but all coordinate values are zeros for 
the tile references in the XML header files.

The only info I can find on the Net is here:
http://www.pcigeomatics.com/geomatica-help/references/pcifunction_r/modeler/m_cdads.html

which suggests that the .odf file contains "position and orientation data".

Of course, I tried a quick binary dump of the .odf file but it is quite 
large (12MB) and I do not see anything obvious at first sight.

Does anybody know how to deal with that format, or how I can extract 
location information for the TIF files out of that .ODF file?

Thanks in advance
-- 
Daniel Morissette
http://www.mapgears.com/
T: +1 418-696-5056 #201

http://evouala.com/ - Location Intelligence Made Easy

From ari.jolma at gmail.com  Tue Sep 22 22:48:23 2015
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 23 Sep 2015 08:48:23 +0300
Subject: [gdal-dev] How to merge tile trees
In-Reply-To: <1442946814074-5225493.post@n6.nabble.com>
References: <1442946814074-5225493.post@n6.nabble.com>
Message-ID: <56023D27.30808@gmail.com>

Dash,

I have only a limited experience with tiles and gdal2tiles, so I'm not 
sure the correctness of this but anyway. I'd also like to see if I have 
understood correctly, so please anybody correct if I'm wrong.

The tiles are in a two-level directory tree, where the top level has the 
zoom level and the one below that has a number, which I assume is some 
kind of global location reference. Within that there are the tiles, 
which have a name, which, I assume, are some kind of global location 
reference. For example I have this:

9
     286
         366.png
...
10
     573
         733.png
...

If you have two trees, which have the same original data, then I assume 
it is a simple directory copy to merge them.

Also, gdal2tiles seems to detect, which tiles you have and only recreate 
the missing ones when run twice with the same command line.

Best,

Ari

On 22.09.2015 21:33, Dash wrote:
> Hey folks,
>
> I have a slight problem that is stumping me.  I created  a large set of
> tiles using gdal2tiles only to notice that I was missing 2 images.  So,
> instead of creating all new tiles I created a set of tiles (with the same
> extent) for just the 2 missing images.  However, now I don't know how to
> merge the 2 tile trees.  The output from gdal2tiles creates images with the
> exact same name, so is it even possible to merge to 2 tile sets?
>
> I hope my explanation makes sense.
>
> Thanks...
>
>
>
> --
> View this message in context: http://osgeo-org.1560.x6.nabble.com/How-to-merge-tile-trees-tp5225493.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Tue Sep 22 23:25:43 2015
From: jukka.rahkonen at maanmittauslaitos.fi (Jukka Rahkonen)
Date: Wed, 23 Sep 2015 06:25:43 +0000 (UTC)
Subject: [gdal-dev] How to merge tile trees
References: <1442946814074-5225493.post@n6.nabble.com>
	<56023D27.30808@gmail.com>
Message-ID: <loom.20150923T081255-632@post.gmane.org>

Ari Jolma <ari.jolma <at> gmail.com> writes:

> 
> Dash,
> 
> I have only a limited experience with tiles and gdal2tiles, so I'm not 
> sure the correctness of this but anyway. I'd also like to see if I have 
> understood correctly, so please anybody correct if I'm wrong.
> 
> The tiles are in a two-level directory tree, where the top level has the 
> zoom level and the one below that has a number, which I assume is some 
> kind of global location reference. Within that there are the tiles, 
> which have a name, which, I assume, are some kind of global location 
> reference. For example I have this:

I assume that your assumption of global location reference is correct when
either "mercator" or "geodetic" profile is used. When profile is "raster"
then the tile grid is based on the extents of the source data and merging
directories from different rasters will not work. I fear that the result
will be bad also with the global grids because the border tiles tend to
contain  partially nodata and as a result there will be more or less wide
stripes of missing data at each zoom level at the outer borders of the added
data. 

-Jukka Rahkonen-


From gane.prog at gmail.com  Wed Sep 23 01:04:57 2015
From: gane.prog at gmail.com (Gane R)
Date: Wed, 23 Sep 2015 13:34:57 +0530
Subject: [gdal-dev] PDF gets skewed and shifts in geo location raster GeoTIFF
Message-ID: <CALMrLdAENAn1ZYm0pP-jEU4i5=rdcaMr26wL2GLVuuye27xtnQ@mail.gmail.com>

There are cases for handling 90 -90 rotation in pdfdataset.cpp
I am using poppler with pdfdataset.cpp as in Revision: 28978 of trunk

PDF gets skewed and shifts in geo location raster GeoTIFF, Is there any
issue in computing the geotransform ?

GeoTransform values are for an pdf at EPSG:4326
10776
6682
-87.844995622259475
0.000001374506717
0.000000429963146
42.847234964542217
0.000000580102585
-0.000001012112732

Corresponding GeoTransform for GeoTiff in EPSG:3857 after gdalwarp
12529
10422
GeoTransform values
-9779291.683092894000000
0.166040058992803
0.000000000000000
5290478.766616309100000
0.000000000000000
-0.166040058992803
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/44b1f213/attachment.html>

From even.rouault at spatialys.com  Wed Sep 23 01:12:41 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2015 10:12:41 +0200
Subject: [gdal-dev] PDF gets skewed and shifts in geo location raster
	GeoTIFF
In-Reply-To: <CALMrLdAENAn1ZYm0pP-jEU4i5=rdcaMr26wL2GLVuuye27xtnQ@mail.gmail.com>
References: <CALMrLdAENAn1ZYm0pP-jEU4i5=rdcaMr26wL2GLVuuye27xtnQ@mail.gmail.com>
Message-ID: <201509231012.42125.even.rouault@spatialys.com>

Gane,

I don't really understand what you mean. Is there an error in the PDF 
georeferencing (I thought we had addressed that a few months ago), or are you 
surprised that gdalwarp transforms the image to be north-up ? If it is the 
later, then it is an intended behaviour of gdalwarp.

Best regards,

Even

> There are cases for handling 90 -90 rotation in pdfdataset.cpp
> I am using poppler with pdfdataset.cpp as in Revision: 28978 of trunk
> 
> PDF gets skewed and shifts in geo location raster GeoTIFF, Is there any
> issue in computing the geotransform ?
> 
> GeoTransform values are for an pdf at EPSG:4326
> 10776
> 6682
> -87.844995622259475
> 0.000001374506717
> 0.000000429963146
> 42.847234964542217
> 0.000000580102585
> -0.000001012112732
> 
> Corresponding GeoTransform for GeoTiff in EPSG:3857 after gdalwarp
> 12529
> 10422
> GeoTransform values
> -9779291.683092894000000
> 0.166040058992803
> 0.000000000000000
> 5290478.766616309100000
> 0.000000000000000
> -0.166040058992803

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Sep 23 04:41:58 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2015 13:41:58 +0200
Subject: [gdal-dev] PDF gets skewed and shifts in geo location raster
	GeoTIFF
In-Reply-To: <CALMrLdCgm=ee_QBqAp29=tzp4T2pjiZoS7zuA+wWUS2LHnoF0g@mail.gmail.com>
References: <CALMrLdAENAn1ZYm0pP-jEU4i5=rdcaMr26wL2GLVuuye27xtnQ@mail.gmail.com>
	<201509231012.42125.even.rouault@spatialys.com>
	<CALMrLdCgm=ee_QBqAp29=tzp4T2pjiZoS7zuA+wWUS2LHnoF0g@mail.gmail.com>
Message-ID: <201509231341.58920.even.rouault@spatialys.com>

Le mercredi 23 septembre 2015 12:54:21, Gane R a ?crit :
> When I convert the above mentioned PDF to a GeoTIFF in EPSG:3857 I get the
> raster bounds shifted down from the actual raster location, where as when I
> convert the PDF to GeoTIFF in EPSG:4326 then to EPSG:3857 using gdalwarp
> and I get the raster  bounds to the actual location.  any reasons for this
> shift ?

Please let the list CC'ed

Could you provide data + command line that demontrates this ?

> 
> On Wed, Sep 23, 2015 at 1:42 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Gane,
> > 
> > I don't really understand what you mean. Is there an error in the PDF
> > georeferencing (I thought we had addressed that a few months ago), or are
> > you
> > surprised that gdalwarp transforms the image to be north-up ? If it is
> > the later, then it is an intended behaviour of gdalwarp.
> > 
> > Best regards,
> > 
> > Even
> > 
> > > There are cases for handling 90 -90 rotation in pdfdataset.cpp
> > > I am using poppler with pdfdataset.cpp as in Revision: 28978 of trunk
> > > 
> > > PDF gets skewed and shifts in geo location raster GeoTIFF, Is there any
> > > issue in computing the geotransform ?
> > > 
> > > GeoTransform values are for an pdf at EPSG:4326
> > > 10776
> > > 6682
> > > -87.844995622259475
> > > 0.000001374506717
> > > 0.000000429963146
> > > 42.847234964542217
> > > 0.000000580102585
> > > -0.000001012112732
> > > 
> > > Corresponding GeoTransform for GeoTiff in EPSG:3857 after gdalwarp
> > > 12529
> > > 10422
> > > GeoTransform values
> > > -9779291.683092894000000
> > > 0.166040058992803
> > > 0.000000000000000
> > > 5290478.766616309100000
> > > 0.000000000000000
> > > -0.166040058992803
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Sep 23 05:13:23 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2015 14:13:23 +0200
Subject: [gdal-dev] Motions: Promote 1.11.3 RC2 and 2.0.1 RC1 for release
In-Reply-To: <201509211227.35750.even.rouault@spatialys.com>
References: <201509211227.35750.even.rouault@spatialys.com>
Message-ID: <201509231413.23780.even.rouault@spatialys.com>

Le lundi 21 septembre 2015 12:27:35, Even Rouault a ?crit :
> Hi,
> 
> Saving a few bits, 2 motions in one email:
> 
> Motion 1: GDAL/OGR 1.11.3 RC2 is promoted to be the official 1.11.3 final
> release.
> 
> Motion 2: GDAL/OGR 2.0.1 RC1 is promoted to be the official 2.0.1 final
> release.
> 
> --
> 
> My votes :
> Motion 1: + 1
> Motion 2: + 1

I declare those motions adopted with support of JukkaR, DanielM and myself. I 
will proceed shortly to renaming the RC and announce.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Wed Sep 23 05:33:21 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2015 14:33:21 +0200
Subject: [gdal-dev] GDAL/OGR 2.0.1 and 1.11.3 released
Message-ID: <201509231433.21899.even.rouault@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to
announce the release of the GDAL/OGR 1.11.3 and 2.0.1 bug fix versions.  Each 
one contains more than 40 bug fixes since 1.11.2 / 2.0.0.

The sources for 1.11.3 are available at:

  http://download.osgeo.org/gdal/1.11.3/gdal-1.11.3.tar.xz
  http://download.osgeo.org/gdal/1.11.3/gdal-1.11.3.tar.gz
  http://download.osgeo.org/gdal/1.11.3/gdal1113.zip

GRASS plugin:
  http://download.osgeo.org/gdal/1.11.3/gdal-grass-1.11.3.tar.gz

The sources for 2.0.1 are available at:

  http://download.osgeo.org/gdal/2.0.1/gdal-2.0.1.tar.xz
  http://download.osgeo.org/gdal/2.0.1/gdal-2.0.1.tar.gz
  http://download.osgeo.org/gdal/2.0.1/gdal201.zip

Details on the fixes in those releases are available at:
  http://trac.osgeo.org/gdal/wiki/Release/1.11.3-News
  http://trac.osgeo.org/gdal/wiki/Release/2.0.1-News

Best regards,

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From redmoon1126dida at 163.com  Wed Sep 23 05:23:00 2015
From: redmoon1126dida at 163.com (=?GBK?B?ssy67Kto?=)
Date: Wed, 23 Sep 2015 20:23:00 +0800 (CST)
Subject: [gdal-dev] post mailing list
Message-ID: <2fa3860c.11f52.14ffa282b6f.Coremail.redmoon1126dida@163.com>

post mailing list
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/ab02ab7b/attachment.html>

From burton449geo at gmail.com  Wed Sep 23 05:41:53 2015
From: burton449geo at gmail.com (Maxime Demers)
Date: Wed, 23 Sep 2015 08:41:53 -0400
Subject: [gdal-dev] ogr2ogr - geojson to mapInfo - size of .dat become
	too big
In-Reply-To: <201509222047.58926.even.rouault@spatialys.com>
References: <CAKtuc=8fOWgQ60nFnQ8pgNL0NQpBViXR8x4sADLzkukCM_587w@mail.gmail.com>
	<201509222047.58926.even.rouault@spatialys.com>
Message-ID: <CAKtuc=9Fp0Sfej-oWvnkFk89gPrM2F9-nUUv6VQs7APyWh3ZbQ@mail.gmail.com>

Hi Even,

Thank you for the suggestion. However, it seems I cannot use such a -sql
statement on a geojson file. I got the following error with the command
below:

ogr2ogr -f "MapInfo File" test.tab points.geojson -sql "select cast(id as
integer(10)), cast(codecs as character(3)), cast(codeSecteur as
character(20)), cast(codeWork as character(20)), cast(codePostal as
character(6)) from points"

ERROR 1: SELECT from table points failed, no such table/featureclass.

However, I have no problem to use the same command to convert a MapInfo
File to another MapInfo File with the -sql statement. Are you able to
confirm if its possible to do a -sql statement on a geojson file and if
yes, do you know why I got this error?

thank you,

Maxime Demers

On Tue, Sep 22, 2015 at 2:47 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mardi 22 septembre 2015 16:07:56, Maxime Demers a ?crit :
> > Hi,
> >
> > I have notice something bad when converting a geojson to mapInfo tab with
> > ogr2ogr. The .dat which contain the table feature's properties is getting
> > way too big after conversion.
> >
> > To test, I have converted a mapInfo tab to geojson using:
> >
> > ogr2ogr -f "GeoJSON" test.geojson test.tab
> >
> > and then I converted it back to mapInfo tab using:
> >
> > ogr2pgr -f "MapInfo File" test2.tab test.geojson
> >
> > Before convertion, the .dat of the mapInfo file was 8,75 Mo after
> > conversion it became 105 Mo.
> > I dont know if the problem is only when converting geojson to mapInfo
> tab.
> > What could be the cause of the problem and does a solution exists?
>
> Maxime,
>
> The issue is that when converting from GeoJSON to .tab, the source text
> fields in GeoJSON have no longer an explicit field width, hence the mapinfo
> driver fallbacks to 254 characters.
>
> You could workaround with a statement like this :
>
> ogr2ogr  -f "MapInfo File" test2.tab test.geojson -sql "select
> cast(field1_name as character(field_width)), cast(field2_name as
> character(field2_width)), ... from layername"
>
> to specify explicit field width.
>
> It would have been great if ogr2ogr had a mode to automate this (I thought
> there was one already, but can't find it)
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/565589d1/attachment-0001.html>

From even.rouault at spatialys.com  Wed Sep 23 05:43:55 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2015 14:43:55 +0200
Subject: [gdal-dev] ogr2ogr - geojson to mapInfo - size of .dat become
	too big
In-Reply-To: <CAKtuc=9Fp0Sfej-oWvnkFk89gPrM2F9-nUUv6VQs7APyWh3ZbQ@mail.gmail.com>
References: <CAKtuc=8fOWgQ60nFnQ8pgNL0NQpBViXR8x4sADLzkukCM_587w@mail.gmail.com>
	<201509222047.58926.even.rouault@spatialys.com>
	<CAKtuc=9Fp0Sfej-oWvnkFk89gPrM2F9-nUUv6VQs7APyWh3ZbQ@mail.gmail.com>
Message-ID: <201509231443.55055.even.rouault@spatialys.com>

Le mercredi 23 septembre 2015 14:41:53, Maxime Demers a ?crit :
> Hi Even,
> 
> Thank you for the suggestion. However, it seems I cannot use such a -sql
> statement on a geojson file. I got the following error with the command
> below:
> 
> ogr2ogr -f "MapInfo File" test.tab points.geojson -sql "select cast(id as
> integer(10)), cast(codecs as character(3)), cast(codeSecteur as
> character(20)), cast(codeWork as character(20)), cast(codePostal as
> character(6)) from points"
> 
> ERROR 1: SELECT from table points failed, no such table/featureclass.

The error message gives a hint of the reason of the error. There's no 
table/layer named "points" in the source file. Do "ogrinfo points.geojson" to 
see the name of the layer.

> 
> However, I have no problem to use the same command to convert a MapInfo
> File to another MapInfo File with the -sql statement. Are you able to
> confirm if its possible to do a -sql statement on a geojson file and if
> yes, do you know why I got this error?
> 
> thank you,
> 
> Maxime Demers
> 
> On Tue, Sep 22, 2015 at 2:47 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mardi 22 septembre 2015 16:07:56, Maxime Demers a ?crit :
> > > Hi,
> > > 
> > > I have notice something bad when converting a geojson to mapInfo tab
> > > with ogr2ogr. The .dat which contain the table feature's properties is
> > > getting way too big after conversion.
> > > 
> > > To test, I have converted a mapInfo tab to geojson using:
> > > 
> > > ogr2ogr -f "GeoJSON" test.geojson test.tab
> > > 
> > > and then I converted it back to mapInfo tab using:
> > > 
> > > ogr2pgr -f "MapInfo File" test2.tab test.geojson
> > > 
> > > Before convertion, the .dat of the mapInfo file was 8,75 Mo after
> > > conversion it became 105 Mo.
> > > I dont know if the problem is only when converting geojson to mapInfo
> > 
> > tab.
> > 
> > > What could be the cause of the problem and does a solution exists?
> > 
> > Maxime,
> > 
> > The issue is that when converting from GeoJSON to .tab, the source text
> > fields in GeoJSON have no longer an explicit field width, hence the
> > mapinfo driver fallbacks to 254 characters.
> > 
> > You could workaround with a statement like this :
> > 
> > ogr2ogr  -f "MapInfo File" test2.tab test.geojson -sql "select
> > cast(field1_name as character(field_width)), cast(field2_name as
> > character(field2_width)), ... from layername"
> > 
> > to specify explicit field width.
> > 
> > It would have been great if ogr2ogr had a mode to automate this (I
> > thought there was one already, but can't find it)
> > 
> > Even
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From burton449geo at gmail.com  Wed Sep 23 05:54:58 2015
From: burton449geo at gmail.com (Maxime Demers)
Date: Wed, 23 Sep 2015 08:54:58 -0400
Subject: [gdal-dev] ogr2ogr - geojson to mapInfo - size of .dat become
	too big
In-Reply-To: <201509231443.55055.even.rouault@spatialys.com>
References: <CAKtuc=8fOWgQ60nFnQ8pgNL0NQpBViXR8x4sADLzkukCM_587w@mail.gmail.com>
	<201509222047.58926.even.rouault@spatialys.com>
	<CAKtuc=9Fp0Sfej-oWvnkFk89gPrM2F9-nUUv6VQs7APyWh3ZbQ@mail.gmail.com>
	<201509231443.55055.even.rouault@spatialys.com>
Message-ID: <CAKtuc=8PevhJDDmP_Bo=8eq+daSeOdVByEHO6WHuDpFDpzwN6g@mail.gmail.com>

Thank you for your answer.

That works correctly with the correct layer name. However, I wonder where
in the geojson that layer name is stored? It's not written in the file
itself and I can't find it in the metadata of the file neither. The layer
name I found is OGRGeoJSON. Is this a default layer name for geojson? Is it
possible to modify it? I cannot find a place in the geojson specifications
where they mention layer name.


On Wed, Sep 23, 2015 at 8:43 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 23 septembre 2015 14:41:53, Maxime Demers a ?crit :
> > Hi Even,
> >
> > Thank you for the suggestion. However, it seems I cannot use such a -sql
> > statement on a geojson file. I got the following error with the command
> > below:
> >
> > ogr2ogr -f "MapInfo File" test.tab points.geojson -sql "select cast(id as
> > integer(10)), cast(codecs as character(3)), cast(codeSecteur as
> > character(20)), cast(codeWork as character(20)), cast(codePostal as
> > character(6)) from points"
> >
> > ERROR 1: SELECT from table points failed, no such table/featureclass.
>
> The error message gives a hint of the reason of the error. There's no
> table/layer named "points" in the source file. Do "ogrinfo points.geojson"
> to
> see the name of the layer.
>
> >
> > However, I have no problem to use the same command to convert a MapInfo
> > File to another MapInfo File with the -sql statement. Are you able to
> > confirm if its possible to do a -sql statement on a geojson file and if
> > yes, do you know why I got this error?
> >
> > thank you,
> >
> > Maxime Demers
> >
> > On Tue, Sep 22, 2015 at 2:47 PM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Le mardi 22 septembre 2015 16:07:56, Maxime Demers a ?crit :
> > > > Hi,
> > > >
> > > > I have notice something bad when converting a geojson to mapInfo tab
> > > > with ogr2ogr. The .dat which contain the table feature's properties
> is
> > > > getting way too big after conversion.
> > > >
> > > > To test, I have converted a mapInfo tab to geojson using:
> > > >
> > > > ogr2ogr -f "GeoJSON" test.geojson test.tab
> > > >
> > > > and then I converted it back to mapInfo tab using:
> > > >
> > > > ogr2pgr -f "MapInfo File" test2.tab test.geojson
> > > >
> > > > Before convertion, the .dat of the mapInfo file was 8,75 Mo after
> > > > conversion it became 105 Mo.
> > > > I dont know if the problem is only when converting geojson to mapInfo
> > >
> > > tab.
> > >
> > > > What could be the cause of the problem and does a solution exists?
> > >
> > > Maxime,
> > >
> > > The issue is that when converting from GeoJSON to .tab, the source text
> > > fields in GeoJSON have no longer an explicit field width, hence the
> > > mapinfo driver fallbacks to 254 characters.
> > >
> > > You could workaround with a statement like this :
> > >
> > > ogr2ogr  -f "MapInfo File" test2.tab test.geojson -sql "select
> > > cast(field1_name as character(field_width)), cast(field2_name as
> > > character(field2_width)), ... from layername"
> > >
> > > to specify explicit field width.
> > >
> > > It would have been great if ogr2ogr had a mode to automate this (I
> > > thought there was one already, but can't find it)
> > >
> > > Even
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>



-- 
Stack Overflow: http://stackoverflow.com/users/1914034/burton449
GIS Overflow: http://gis.stackexchange.com/users/14426/burton449
LastFm: http://www.lastfm.fr/user/burton449
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/463c4322/attachment.html>

From even.rouault at spatialys.com  Wed Sep 23 05:58:07 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2015 14:58:07 +0200
Subject: [gdal-dev] ogr2ogr - geojson to mapInfo - size of .dat become
	too big
In-Reply-To: <CAKtuc=8PevhJDDmP_Bo=8eq+daSeOdVByEHO6WHuDpFDpzwN6g@mail.gmail.com>
References: <CAKtuc=8fOWgQ60nFnQ8pgNL0NQpBViXR8x4sADLzkukCM_587w@mail.gmail.com>
	<201509231443.55055.even.rouault@spatialys.com>
	<CAKtuc=8PevhJDDmP_Bo=8eq+daSeOdVByEHO6WHuDpFDpzwN6g@mail.gmail.com>
Message-ID: <201509231458.07669.even.rouault@spatialys.com>

Le mercredi 23 septembre 2015 14:54:58, Maxime Demers a ?crit :
> Thank you for your answer.
> 
> That works correctly with the correct layer name. However, I wonder where
> in the geojson that layer name is stored? It's not written in the file
> itself and I can't find it in the metadata of the file neither. The layer
> name I found is OGRGeoJSON. Is this a default layer name for geojson? Is it
> possible to modify it? I cannot find a place in the geojson specifications
> where they mention layer name.

It's hardcoded in the driver. There's no such thing as a layer name in the 
geojson spec. It's an implementation choice in OGR.
You can add -nln a_new_layer_name to ogr2ogr

> 
> 
> On Wed, Sep 23, 2015 at 8:43 AM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mercredi 23 septembre 2015 14:41:53, Maxime Demers a ?crit :
> > > Hi Even,
> > > 
> > > Thank you for the suggestion. However, it seems I cannot use such a
> > > -sql statement on a geojson file. I got the following error with the
> > > command below:
> > > 
> > > ogr2ogr -f "MapInfo File" test.tab points.geojson -sql "select cast(id
> > > as integer(10)), cast(codecs as character(3)), cast(codeSecteur as
> > > character(20)), cast(codeWork as character(20)), cast(codePostal as
> > > character(6)) from points"
> > > 
> > > ERROR 1: SELECT from table points failed, no such table/featureclass.
> > 
> > The error message gives a hint of the reason of the error. There's no
> > table/layer named "points" in the source file. Do "ogrinfo
> > points.geojson" to
> > see the name of the layer.
> > 
> > > However, I have no problem to use the same command to convert a MapInfo
> > > File to another MapInfo File with the -sql statement. Are you able to
> > > confirm if its possible to do a -sql statement on a geojson file and if
> > > yes, do you know why I got this error?
> > > 
> > > thank you,
> > > 
> > > Maxime Demers
> > > 
> > > On Tue, Sep 22, 2015 at 2:47 PM, Even Rouault <
> > 
> > even.rouault at spatialys.com>
> > 
> > > wrote:
> > > > Le mardi 22 septembre 2015 16:07:56, Maxime Demers a ?crit :
> > > > > Hi,
> > > > > 
> > > > > I have notice something bad when converting a geojson to mapInfo
> > > > > tab with ogr2ogr. The .dat which contain the table feature's
> > > > > properties
> > 
> > is
> > 
> > > > > getting way too big after conversion.
> > > > > 
> > > > > To test, I have converted a mapInfo tab to geojson using:
> > > > > 
> > > > > ogr2ogr -f "GeoJSON" test.geojson test.tab
> > > > > 
> > > > > and then I converted it back to mapInfo tab using:
> > > > > 
> > > > > ogr2pgr -f "MapInfo File" test2.tab test.geojson
> > > > > 
> > > > > Before convertion, the .dat of the mapInfo file was 8,75 Mo after
> > > > > conversion it became 105 Mo.
> > > > > I dont know if the problem is only when converting geojson to
> > > > > mapInfo
> > > > 
> > > > tab.
> > > > 
> > > > > What could be the cause of the problem and does a solution exists?
> > > > 
> > > > Maxime,
> > > > 
> > > > The issue is that when converting from GeoJSON to .tab, the source
> > > > text fields in GeoJSON have no longer an explicit field width, hence
> > > > the mapinfo driver fallbacks to 254 characters.
> > > > 
> > > > You could workaround with a statement like this :
> > > > 
> > > > ogr2ogr  -f "MapInfo File" test2.tab test.geojson -sql "select
> > > > cast(field1_name as character(field_width)), cast(field2_name as
> > > > character(field2_width)), ... from layername"
> > > > 
> > > > to specify explicit field width.
> > > > 
> > > > It would have been great if ogr2ogr had a mode to automate this (I
> > > > thought there was one already, but can't find it)
> > > > 
> > > > Even
> > > > 
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nicholas+osgeo at nicholaswilliams.net  Wed Sep 23 08:29:42 2015
From: nicholas+osgeo at nicholaswilliams.net (Nicholas Williams)
Date: Wed, 23 Sep 2015 10:29:42 -0500
Subject: [gdal-dev] Unable to find driver 'MYSQL' after successful config
	and make
Message-ID: <CAGn4V3WAeTY43NhSpksbqWC9UuGHAqOEEOku6zf3PsS3T2zwFg@mail.gmail.com>

I'm having trouble getting ogr2ogr working with MySQL on Ubuntu 12.04, but
I can't figure out why. Configure says MySQL is enabled, but execution says
it's not.

In addition to other dependencies, I installed the MySQL client dev:

sudo apt-get install -y libmysqlclient-dev=5.5.28-rel29.1-334.precise

And I confirmed that mysql_config exists and is executable:

# ls -al /usr/bin/mysql_config
-rwxr-xr-x 1 root root 6933 Oct 25  2012 /usr/bin/mysql_config

I configured, made and installed:

./configure --prefix=/usr --with-spatialite=yes --with-libjson-c=internal
--with-mysql=yes
make
make_install

The configure output suggests that MySQL support is enabled. I've
abbreviated it below, but I can post the entire output on request:

checking for mysql_config... /usr/bin/mysql_config
checking for MySQL... yes
...
GDAL is now configured for x86_64-unknown-linux-gnu

  Installation directory:    /usr
  C compiler:                gcc -g -O2
  C++ compiler:              g++ -g -O2

  LIBTOOL support:           yes
  ...
  cURL support (wms/wcs/...):yes
  PostgreSQL support:        no
  MySQL support:             yes
  ...
  Expat support:             no
  libxml2 support:           no
  ...
  SQLite support:            yes
  PCRE support:              no
  SpatiaLite support:        yes

I would think the "MySQL support: yes" and "checking for MySQL... yes"
would be fairly concrete. Additionally, I have scoured the make output, and
there were no errors or warnings around any of the MySQl stuff. So, it
should work, right? Apparently not:

# ogr2ogr --format mysql
ERROR 1: --format option given with format 'mysql', but that format not
recognised.  Use the --formats option to get a list of available formats,
and use the short code (ie. GTiff or HFA) as the format identifier.

# ogr2ogr -f MYSQL MYSQL:"geo,tables=Time_Zone_Polygons" -nln
Time_Zone_Polygons -nlt POLYGON \
    -update -append -progress -gt 40000 -fieldmap 2 \
    -lco ENGINE=MYISAM -lco LAUNDER=yes -lco FID=id -lco FID64=TRUE -lco
GEOMETRY_NAME=region tz_world.shp
Unable to find driver `MYSQL'.
The following drivers are available:
  -> `PCIDSK'
  ... (no MySQL anywhere)

Can I get some help/advice figuring out what went wrong?

Thanks,

Nick
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/07a569b6/attachment-0001.html>

From even.rouault at spatialys.com  Wed Sep 23 08:29:50 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2015 17:29:50 +0200
Subject: [gdal-dev] Call for discussion on RFC 60: Improved round-tripping
	in OGR
Message-ID: <201509231729.50153.even.rouault@spatialys.com>

Hi,

This is a call for discussion on "RFC 60: Improved round-tripping in OGR".

https://trac.osgeo.org/gdal/wiki/rfc60_improved_roundtripping_in_ogr

This RFC defines how to improve better round-tripping in conversion of vector 
formats, in particular for GeoJSON extensions. 

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nicholas+osgeo at nicholaswilliams.net  Wed Sep 23 09:00:20 2015
From: nicholas+osgeo at nicholaswilliams.net (Nicholas Williams)
Date: Wed, 23 Sep 2015 11:00:20 -0500
Subject: [gdal-dev] Unable to find driver 'MYSQL' after successful
	config and make
In-Reply-To: <CAGn4V3WAeTY43NhSpksbqWC9UuGHAqOEEOku6zf3PsS3T2zwFg@mail.gmail.com>
References: <CAGn4V3WAeTY43NhSpksbqWC9UuGHAqOEEOku6zf3PsS3T2zwFg@mail.gmail.com>
Message-ID: <CAGn4V3XPmppvcei8upccLA1S5-SVKjTt4azwjZJ583xKbd=f1Q@mail.gmail.com>

Realized I left out which version I was on. I compiled and installed
from gdal-2.0.0.tar.gz. I'm about to try gdal-2.0.1.tar.gz.

Thanks,

Nick

On Wed, Sep 23, 2015 at 10:29 AM, Nicholas Williams <
nicholas+osgeo at nicholaswilliams.net> wrote:

> I'm having trouble getting ogr2ogr working with MySQL on Ubuntu 12.04, but
> I can't figure out why. Configure says MySQL is enabled, but execution says
> it's not.
>
> In addition to other dependencies, I installed the MySQL client dev:
>
> sudo apt-get install -y libmysqlclient-dev=5.5.28-rel29.1-334.precise
>
> And I confirmed that mysql_config exists and is executable:
>
> # ls -al /usr/bin/mysql_config
> -rwxr-xr-x 1 root root 6933 Oct 25  2012 /usr/bin/mysql_config
>
> I configured, made and installed:
>
> ./configure --prefix=/usr --with-spatialite=yes --with-libjson-c=internal
> --with-mysql=yes
> make
> make_install
>
> The configure output suggests that MySQL support is enabled. I've
> abbreviated it below, but I can post the entire output on request:
>
> checking for mysql_config... /usr/bin/mysql_config
> checking for MySQL... yes
> ...
> GDAL is now configured for x86_64-unknown-linux-gnu
>
>   Installation directory:    /usr
>   C compiler:                gcc -g -O2
>   C++ compiler:              g++ -g -O2
>
>   LIBTOOL support:           yes
>   ...
>   cURL support (wms/wcs/...):yes
>   PostgreSQL support:        no
>   MySQL support:             yes
>   ...
>   Expat support:             no
>   libxml2 support:           no
>   ...
>   SQLite support:            yes
>   PCRE support:              no
>   SpatiaLite support:        yes
>
> I would think the "MySQL support: yes" and "checking for MySQL... yes"
> would be fairly concrete. Additionally, I have scoured the make output, and
> there were no errors or warnings around any of the MySQl stuff. So, it
> should work, right? Apparently not:
>
> # ogr2ogr --format mysql
> ERROR 1: --format option given with format 'mysql', but that format not
> recognised.  Use the --formats option to get a list of available formats,
> and use the short code (ie. GTiff or HFA) as the format identifier.
>
> # ogr2ogr -f MYSQL MYSQL:"geo,tables=Time_Zone_Polygons" -nln
> Time_Zone_Polygons -nlt POLYGON \
>     -update -append -progress -gt 40000 -fieldmap 2 \
>     -lco ENGINE=MYISAM -lco LAUNDER=yes -lco FID=id -lco FID64=TRUE -lco
> GEOMETRY_NAME=region tz_world.shp
> Unable to find driver `MYSQL'.
> The following drivers are available:
>   -> `PCIDSK'
>   ... (no MySQL anywhere)
>
> Can I get some help/advice figuring out what went wrong?
>
> Thanks,
>
> Nick
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/149a6232/attachment.html>

From even.rouault at spatialys.com  Wed Sep 23 12:03:41 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 23 Sep 2015 21:03:41 +0200
Subject: [gdal-dev] Unable to find driver 'MYSQL' after successful
	config and make
In-Reply-To: <CAGn4V3WAeTY43NhSpksbqWC9UuGHAqOEEOku6zf3PsS3T2zwFg@mail.gmail.com>
References: <CAGn4V3WAeTY43NhSpksbqWC9UuGHAqOEEOku6zf3PsS3T2zwFg@mail.gmail.com>
Message-ID: <201509232103.41791.even.rouault@spatialys.com>

Le mercredi 23 septembre 2015 17:29:42, Nicholas Williams a ?crit :
> I'm having trouble getting ogr2ogr working with MySQL on Ubuntu 12.04, but
> I can't figure out why. Configure says MySQL is enabled, but execution says
> it's not.
> 
> In addition to other dependencies, I installed the MySQL client dev:
> 
> sudo apt-get install -y libmysqlclient-dev=5.5.28-rel29.1-334.precise
> 
> And I confirmed that mysql_config exists and is executable:
> 
> # ls -al /usr/bin/mysql_config
> -rwxr-xr-x 1 root root 6933 Oct 25  2012 /usr/bin/mysql_config
> 
> I configured, made and installed:
> 
> ./configure --prefix=/usr --with-spatialite=yes --with-libjson-c=internal
> --with-mysql=yes
> make
> make_install

Nick,

If you did several attempts of configure & make while changing configure options 
or installing new packages, be sure to do a "make clean" before make. Or just 
try "touch ogr/ogrsf_frmts/generic/ogrregisterall.cpp" and make again

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From nicholas+osgeo at nicholaswilliams.net  Wed Sep 23 12:07:54 2015
From: nicholas+osgeo at nicholaswilliams.net (Nicholas Williams)
Date: Wed, 23 Sep 2015 14:07:54 -0500
Subject: [gdal-dev] Unable to find driver 'MYSQL' after successful
 config and make
In-Reply-To: <201509232103.41791.even.rouault@spatialys.com>
References: <CAGn4V3WAeTY43NhSpksbqWC9UuGHAqOEEOku6zf3PsS3T2zwFg@mail.gmail.com>
	<201509232103.41791.even.rouault@spatialys.com>
Message-ID: <CAGn4V3V1qr37kjiYsqHYLpUiZVU=oiDUvqng=RavDxD2j7LUSQ@mail.gmail.com>

I downloaded gdal-2.0.1.tar.gz, reconfigured, recompiled, reinstalled, and
suddenly it's working. So maybe there was a problem with 2.0.0? Or maybe,
as Even said (as I was typing this message), the problem was needing to
"make clean" (I wiped the directory after downloading the new version).

Also, I should note that the MySQL hints page (
http://gdal.org/drv_mysql.html) is missing a certain type of error. It
correctly warns me about the "Got a bigger packet" warning, and changing
"max_allowed_packet" fixes that problem. But it's not the only problem.

If you have binlog enabled in MySQL, you might, like I did, see the
following error:

MySQL error message: Can't change size of file (Errcode: 2 - No such file
or directory)

It took me a while to figure out that the problem was related to binlog (no
file name in the error message and no error message in the log file was not
helpful). I needed to set:

binlog_cache_size = 16M
binlog_stmt_cache_size = 16M

To get rid of that error. Those values default to just 32K (WAAAYYY to
small). Once I set the documented setting and those other two settings to
higher values, it imported the shapefile into MySQL like a charm! :-)

Thanks,

Nick


On Wed, Sep 23, 2015 at 2:03 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 23 septembre 2015 17:29:42, Nicholas Williams a ?crit :
> > I'm having trouble getting ogr2ogr working with MySQL on Ubuntu 12.04,
> but
> > I can't figure out why. Configure says MySQL is enabled, but execution
> says
> > it's not.
> >
> > In addition to other dependencies, I installed the MySQL client dev:
> >
> > sudo apt-get install -y libmysqlclient-dev=5.5.28-rel29.1-334.precise
> >
> > And I confirmed that mysql_config exists and is executable:
> >
> > # ls -al /usr/bin/mysql_config
> > -rwxr-xr-x 1 root root 6933 Oct 25  2012 /usr/bin/mysql_config
> >
> > I configured, made and installed:
> >
> > ./configure --prefix=/usr --with-spatialite=yes --with-libjson-c=internal
> > --with-mysql=yes
> > make
> > make_install
>
> Nick,
>
> If you did several attempts of configure & make while changing configure
> options
> or installing new packages, be sure to do a "make clean" before make. Or
> just
> try "touch ogr/ogrsf_frmts/generic/ogrregisterall.cpp" and make again
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/61ded2c2/attachment.html>

From jgrn at illinois.edu  Wed Sep 23 13:50:09 2015
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Wed, 23 Sep 2015 20:50:09 +0000
Subject: [gdal-dev] gdalbuildvrt with multiple nodata
Message-ID: <CABG0rfsjKjXndRmBSQRxEhx1Wer7oGc9KDAD=VLvOzLmPxKS9w@mail.gmail.com>

Folks:

I've got a weird one -- I'm trying to perform a mosaic of GeoTIFF tiles
that are somewhat overlapping.  Here's the odd issue -- I need the mosaic
to basically set all values of 0 AND "NODATA" to be the srcnodata.  How do
I do this?  Will gdalbuildvrt automatically use "true" NODATA values to be
NODATA, even if I "override" the setting?  If not (which is my suspicion),
how do I assign multiple values, when one is NODATA.

Cheers!

--j
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/331d10c4/attachment.html>

From ari.ucb.fire at gmail.com  Wed Sep 23 14:00:47 2015
From: ari.ucb.fire at gmail.com (Ari Simmons)
Date: Wed, 23 Sep 2015 14:00:47 -0700
Subject: [gdal-dev] gdalbuildvrt with multiple nodata
In-Reply-To: <CABG0rfsjKjXndRmBSQRxEhx1Wer7oGc9KDAD=VLvOzLmPxKS9w@mail.gmail.com>
References: <CABG0rfsjKjXndRmBSQRxEhx1Wer7oGc9KDAD=VLvOzLmPxKS9w@mail.gmail.com>
Message-ID: <CAJxqeBtfr5Y0mGeV46N=xaEQ5GvXuesX2GWZpC5942Hi1D_EgQ@mail.gmail.com>

How about:

gdalbuildvrt -addalpha -hidenodata -srcnodata "0"



On Wed, Sep 23, 2015 at 1:50 PM, Jonathan Greenberg <jgrn at illinois.edu>
wrote:

> Folks:
>
> I've got a weird one -- I'm trying to perform a mosaic of GeoTIFF tiles
> that are somewhat overlapping.  Here's the odd issue -- I need the mosaic
> to basically set all values of 0 AND "NODATA" to be the srcnodata.  How do
> I do this?  Will gdalbuildvrt automatically use "true" NODATA values to be
> NODATA, even if I "override" the setting?  If not (which is my suspicion),
> how do I assign multiple values, when one is NODATA.
>
> Cheers!
>
> --j
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150923/f864827a/attachment.html>

From gane.prog at gmail.com  Thu Sep 24 01:17:34 2015
From: gane.prog at gmail.com (Gane R)
Date: Thu, 24 Sep 2015 13:47:34 +0530
Subject: [gdal-dev] PDF gets skewed and shifts in geo location raster
	GeoTIFF
In-Reply-To: <201509231341.58920.even.rouault@spatialys.com>
References: <CALMrLdAENAn1ZYm0pP-jEU4i5=rdcaMr26wL2GLVuuye27xtnQ@mail.gmail.com>
	<201509231012.42125.even.rouault@spatialys.com>
	<CALMrLdCgm=ee_QBqAp29=tzp4T2pjiZoS7zuA+wWUS2LHnoF0g@mail.gmail.com>
	<201509231341.58920.even.rouault@spatialys.com>
Message-ID: <CALMrLdC2HKRhKz__k+zs0nA7c=QWQHhEzz7Hz-Ku-CSWCOt8Ow@mail.gmail.com>

I have the file link here,

https://drive.google.com/file/d/0B4shTM1bPS5TMFZsc1p3MVZKT3c/view?usp=sharing

I see the raster's actual location shifted in 3857 projection in both cases

1. from pdf to 3857 (Big offset shift)
2. pdf to 4326 and then to 3857 (small offset shift)

gdalwarp -t_srs EPSG:3857 "file03.pdf" "file03_3857.tif"

gdalinfo "file03_3857.tif"

  Upper Left (-9778860.18140727, 5289697.46773225)
  Lower Left (-9778860.18140727, 5287721.4661877)
  Upper Right (-9776891.4828487, 5289697.46773225)
  Lower Right (-9776891.4828487, 5287721.4661877)
  Center (-9777875.83212799, 5288709.54465131)

gdalwarp -t_srs EPSG:4326 "file03.pdf" "file03_4326.tif"

gdalinfo "file03_4326.tif"

  Upper Left (-87.8449956222595, 42.8534861499971)
  Lower Left (-87.8449956222595, 42.8404719605387)
  Upper Right (-87.8273112824722, 42.8534861499971)
  Lower Right (-87.8273112824722, 42.8404719605387)
  Center (-87.8361534523658, 42.8469797529301)

gdalwarp -t_srs EPSG:3857 "file03_4326.tif" "file03_3857_from4326.tif"

gdalinfo "file03_3857_from4326.tif"

 Upper Left (-9778860.18140727, 5289697.46773225)
 Lower Left (-9778860.18140727, 5287721.45875241)
 Upper Right (-9776891.61702531, 5289697.46773225)
 Lower Right (-9776891.61702531, 5287721.45875241)
 Center (-9777875.89921629, 5288709.46324233)

Regards,
Gane

On Wed, Sep 23, 2015 at 5:11 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 23 septembre 2015 12:54:21, Gane R a ?crit :
> > When I convert the above mentioned PDF to a GeoTIFF in EPSG:3857 I get
> the
> > raster bounds shifted down from the actual raster location, where as
> when I
> > convert the PDF to GeoTIFF in EPSG:4326 then to EPSG:3857 using gdalwarp
> > and I get the raster  bounds to the actual location.  any reasons for
> this
> > shift ?
>
> Please let the list CC'ed
>
> Could you provide data + command line that demontrates this ?
>
> >
> > On Wed, Sep 23, 2015 at 1:42 PM, Even Rouault <
> even.rouault at spatialys.com>
> >
> > wrote:
> > > Gane,
> > >
> > > I don't really understand what you mean. Is there an error in the PDF
> > > georeferencing (I thought we had addressed that a few months ago), or
> are
> > > you
> > > surprised that gdalwarp transforms the image to be north-up ? If it is
> > > the later, then it is an intended behaviour of gdalwarp.
> > >
> > > Best regards,
> > >
> > > Even
> > >
> > > > There are cases for handling 90 -90 rotation in pdfdataset.cpp
> > > > I am using poppler with pdfdataset.cpp as in Revision: 28978 of trunk
> > > >
> > > > PDF gets skewed and shifts in geo location raster GeoTIFF, Is there
> any
> > > > issue in computing the geotransform ?
> > > >
> > > > GeoTransform values are for an pdf at EPSG:4326
> > > > 10776
> > > > 6682
> > > > -87.844995622259475
> > > > 0.000001374506717
> > > > 0.000000429963146
> > > > 42.847234964542217
> > > > 0.000000580102585
> > > > -0.000001012112732
> > > >
> > > > Corresponding GeoTransform for GeoTiff in EPSG:3857 after gdalwarp
> > > > 12529
> > > > 10422
> > > > GeoTransform values
> > > > -9779291.683092894000000
> > > > 0.166040058992803
> > > > 0.000000000000000
> > > > 5290478.766616309100000
> > > > 0.000000000000000
> > > > -0.166040058992803
> > >
> > > --
> > > Spatialys - Geospatial professional services
> > > http://www.spatialys.com
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150924/43b6ca11/attachment-0001.html>

From ychemin at gmail.com  Thu Sep 24 01:36:33 2015
From: ychemin at gmail.com (Yann)
Date: Thu, 24 Sep 2015 10:36:33 +0200
Subject: [gdal-dev] IAU2000 support?
Message-ID: <5603B611.9030903@gmail.com>

Hi all,

I have recovered a old script I made about 1.5 year ago (and about 1+ 
version of Ubuntu away) to process Chandrayaan-M3 Moon data in 
IAU2000:30100 and it seems that gdal_translate/gdalwarp do not know that 
code anymore.

This is not a blocker, since the wkt style works like a charm.

We had discussions earlier about planetary support in this list, among 
whom Trent was involved (IIRC). Does anybody have any update about the 
status change for the newest version of GDAL?

For the record: Ubuntu 15.10 (Wily), v1.11.2

Thanks,
Yann

-- 
-----
Mobile: +33 (0)7 83 85 52 34


From even.rouault at spatialys.com  Thu Sep 24 02:45:44 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Sep 2015 11:45:44 +0200
Subject: [gdal-dev] IAU2000 support?
In-Reply-To: <5603B611.9030903@gmail.com>
References: <5603B611.9030903@gmail.com>
Message-ID: <201509241145.45303.even.rouault@spatialys.com>

Yann,
> 
> I have recovered a old script I made about 1.5 year ago (and about 1+
> version of Ubuntu away) to process Chandrayaan-M3 Moon data in
> IAU2000:30100 and it seems that gdal_translate/gdalwarp do not know that
> code anymore.

Looking at the code you need to use a OGC URN:

$ gdalsrsinfo urn:ogc:def:crs:IAU2000:30100

PROJ.4 : '+proj=longlat +a=1737400 +b=1737400 +no_defs '

OGC WKT :
GEOGCS["Moon 2000",
    DATUM["D_Moon_2000",
        SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],
    PRIMEM["Greenwich",0],
    UNIT["Decimal_Degree",0.0174532925199433]]


> 
> This is not a blocker, since the wkt style works like a charm.
> 
> We had discussions earlier about planetary support in this list, among
> whom Trent was involved (IIRC). Does anybody have any update about the
> status change for the newest version of GDAL?

Status quo.

Even
-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Thu Sep 24 03:34:51 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Sep 2015 12:34:51 +0200
Subject: [gdal-dev] PDF gets skewed and shifts in geo location raster
	GeoTIFF
In-Reply-To: <CALMrLdC2HKRhKz__k+zs0nA7c=QWQHhEzz7Hz-Ku-CSWCOt8Ow@mail.gmail.com>
References: <CALMrLdAENAn1ZYm0pP-jEU4i5=rdcaMr26wL2GLVuuye27xtnQ@mail.gmail.com>
	<201509231341.58920.even.rouault@spatialys.com>
	<CALMrLdC2HKRhKz__k+zs0nA7c=QWQHhEzz7Hz-Ku-CSWCOt8Ow@mail.gmail.com>
Message-ID: <201509241234.51765.even.rouault@spatialys.com>

OK, I see. This is quite an unusual formulation of PDF with the mediabox 
having a bottom_y < 0 and top_y = 0 (usually you have bottom_y = 0 and top_y > 
0)
I've fixed the driver to work correctly (at least it is now consistent with the 
Terrago toolbar) with such dataset. Just in that particular case with no PDF 
rotation and OGC BP encoding

Even

> I have the file link here,
> 
> https://drive.google.com/file/d/0B4shTM1bPS5TMFZsc1p3MVZKT3c/view?usp=shari
> ng
> 
> I see the raster's actual location shifted in 3857 projection in both cases
> 
> 1. from pdf to 3857 (Big offset shift)
> 2. pdf to 4326 and then to 3857 (small offset shift)
> 
> gdalwarp -t_srs EPSG:3857 "file03.pdf" "file03_3857.tif"
> 
> gdalinfo "file03_3857.tif"
> 
>   Upper Left (-9778860.18140727, 5289697.46773225)
>   Lower Left (-9778860.18140727, 5287721.4661877)
>   Upper Right (-9776891.4828487, 5289697.46773225)
>   Lower Right (-9776891.4828487, 5287721.4661877)
>   Center (-9777875.83212799, 5288709.54465131)
> 
> gdalwarp -t_srs EPSG:4326 "file03.pdf" "file03_4326.tif"
> 
> gdalinfo "file03_4326.tif"
> 
>   Upper Left (-87.8449956222595, 42.8534861499971)
>   Lower Left (-87.8449956222595, 42.8404719605387)
>   Upper Right (-87.8273112824722, 42.8534861499971)
>   Lower Right (-87.8273112824722, 42.8404719605387)
>   Center (-87.8361534523658, 42.8469797529301)
> 
> gdalwarp -t_srs EPSG:3857 "file03_4326.tif" "file03_3857_from4326.tif"
> 
> gdalinfo "file03_3857_from4326.tif"
> 
>  Upper Left (-9778860.18140727, 5289697.46773225)
>  Lower Left (-9778860.18140727, 5287721.45875241)
>  Upper Right (-9776891.61702531, 5289697.46773225)
>  Lower Right (-9776891.61702531, 5287721.45875241)
>  Center (-9777875.89921629, 5288709.46324233)
> 
> Regards,
> Gane
> 
> On Wed, Sep 23, 2015 at 5:11 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Le mercredi 23 septembre 2015 12:54:21, Gane R a ?crit :
> > > When I convert the above mentioned PDF to a GeoTIFF in EPSG:3857 I get
> > 
> > the
> > 
> > > raster bounds shifted down from the actual raster location, where as
> > 
> > when I
> > 
> > > convert the PDF to GeoTIFF in EPSG:4326 then to EPSG:3857 using
> > > gdalwarp and I get the raster  bounds to the actual location.  any
> > > reasons for
> > 
> > this
> > 
> > > shift ?
> > 
> > Please let the list CC'ed
> > 
> > Could you provide data + command line that demontrates this ?
> > 
> > > On Wed, Sep 23, 2015 at 1:42 PM, Even Rouault <
> > 
> > even.rouault at spatialys.com>
> > 
> > > wrote:
> > > > Gane,
> > > > 
> > > > I don't really understand what you mean. Is there an error in the PDF
> > > > georeferencing (I thought we had addressed that a few months ago), or
> > 
> > are
> > 
> > > > you
> > > > surprised that gdalwarp transforms the image to be north-up ? If it
> > > > is the later, then it is an intended behaviour of gdalwarp.
> > > > 
> > > > Best regards,
> > > > 
> > > > Even
> > > > 
> > > > > There are cases for handling 90 -90 rotation in pdfdataset.cpp
> > > > > I am using poppler with pdfdataset.cpp as in Revision: 28978 of
> > > > > trunk
> > > > > 
> > > > > PDF gets skewed and shifts in geo location raster GeoTIFF, Is there
> > 
> > any
> > 
> > > > > issue in computing the geotransform ?
> > > > > 
> > > > > GeoTransform values are for an pdf at EPSG:4326
> > > > > 10776
> > > > > 6682
> > > > > -87.844995622259475
> > > > > 0.000001374506717
> > > > > 0.000000429963146
> > > > > 42.847234964542217
> > > > > 0.000000580102585
> > > > > -0.000001012112732
> > > > > 
> > > > > Corresponding GeoTransform for GeoTiff in EPSG:3857 after gdalwarp
> > > > > 12529
> > > > > 10422
> > > > > GeoTransform values
> > > > > -9779291.683092894000000
> > > > > 0.166040058992803
> > > > > 0.000000000000000
> > > > > 5290478.766616309100000
> > > > > 0.000000000000000
> > > > > -0.166040058992803
> > > > 
> > > > --
> > > > Spatialys - Geospatial professional services
> > > > http://www.spatialys.com
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ychemin at gmail.com  Thu Sep 24 05:04:27 2015
From: ychemin at gmail.com (Yann)
Date: Thu, 24 Sep 2015 14:04:27 +0200
Subject: [gdal-dev] IAU2000 support?
In-Reply-To: <201509241145.45303.even.rouault@spatialys.com>
References: <5603B611.9030903@gmail.com>
	<201509241145.45303.even.rouault@spatialys.com>
Message-ID: <5603E6CB.4050409@gmail.com>

Thank you Even,

at which version this OGC URN support was started?

Cheers,
Yann

On 24/09/2015 11:45, Even Rouault wrote:
> Yann,
>> I have recovered a old script I made about 1.5 year ago (and about 1+
>> version of Ubuntu away) to process Chandrayaan-M3 Moon data in
>> IAU2000:30100 and it seems that gdal_translate/gdalwarp do not know that
>> code anymore.
> Looking at the code you need to use a OGC URN:
>
> $ gdalsrsinfo urn:ogc:def:crs:IAU2000:30100
>
> PROJ.4 : '+proj=longlat +a=1737400 +b=1737400 +no_defs '
>
> OGC WKT :
> GEOGCS["Moon 2000",
>      DATUM["D_Moon_2000",
>          SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],
>      PRIMEM["Greenwich",0],
>      UNIT["Decimal_Degree",0.0174532925199433]]
>
>
>> This is not a blocker, since the wkt style works like a charm.
>>
>> We had discussions earlier about planetary support in this list, among
>> whom Trent was involved (IIRC). Does anybody have any update about the
>> status change for the newest version of GDAL?
> Status quo.
>
> Even

-- 
-----
Mobile: +33 (0)7 83 85 52 34


From even.rouault at spatialys.com  Thu Sep 24 05:13:14 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 24 Sep 2015 14:13:14 +0200
Subject: [gdal-dev] IAU2000 support?
In-Reply-To: <5603E83D.5050803@gmail.com>
References: <5603B611.9030903@gmail.com>
	<201509241145.45303.even.rouault@spatialys.com>
	<5603E83D.5050803@gmail.com>
Message-ID: <201509241413.14685.even.rouault@spatialys.com>

Le jeudi 24 septembre 2015 14:10:37, Yann a ?crit :
> sorry, I get this from Ubuntu, thus my question.
> 
> gdalsrsinfo urn:ogc:def:crs:IAU2000:30100
> 
> ERROR 1: ERROR - failed to load SRS definition from
> urn:ogc:def:crs:IAU2000:30100

I think this dates back to ancient GDAL versions but you need to add the 
iau2000.wkt file in the GDAL data directory.

> 
> On 24/09/2015 11:45, Even Rouault wrote:
> > Yann,
> > 
> >> I have recovered a old script I made about 1.5 year ago (and about 1+
> >> version of Ubuntu away) to process Chandrayaan-M3 Moon data in
> >> IAU2000:30100 and it seems that gdal_translate/gdalwarp do not know that
> >> code anymore.
> > 
> > Looking at the code you need to use a OGC URN:
> > 
> > $ gdalsrsinfo urn:ogc:def:crs:IAU2000:30100
> > 
> > PROJ.4 : '+proj=longlat +a=1737400 +b=1737400 +no_defs '
> > 
> > OGC WKT :
> > GEOGCS["Moon 2000",
> > 
> >      DATUM["D_Moon_2000",
> >      
> >          SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],
> >      
> >      PRIMEM["Greenwich",0],
> >      UNIT["Decimal_Degree",0.0174532925199433]]
> >> 
> >> This is not a blocker, since the wkt style works like a charm.
> >> 
> >> We had discussions earlier about planetary support in this list, among
> >> whom Trent was involved (IIRC). Does anybody have any update about the
> >> status change for the newest version of GDAL?
> > 
> > Status quo.
> > 
> > Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From thare at usgs.gov  Thu Sep 24 05:26:13 2015
From: thare at usgs.gov (Hare, Trent)
Date: Thu, 24 Sep 2015 05:26:13 -0700
Subject: [gdal-dev] IAU2000 support?
In-Reply-To: <201509241413.14685.even.rouault@spatialys.com>
References: <5603B611.9030903@gmail.com>
	<201509241145.45303.even.rouault@spatialys.com>
	<5603E83D.5050803@gmail.com>
	<201509241413.14685.even.rouault@spatialys.com>
Message-ID: <CAB6t5t8mFwZSip+CZaKRZ+qHFPwATGs+iKqj3PHTHa03-M6qEQ@mail.gmail.com>

Yann,
   Yes there has been no movement on pushing the planetary projection codes
as simple script or function call within GDAL. Instead of expanding all the
definitions as a large ASCII file, this method would allow us to more
easily grow once updated radii values are defined. The lunar definition is
not changing anytime soon but bodies like Mercury and even Mars will have
updates. Thus once the IAU publishes a new set of definitions, we will need
a new namespace (e.g. IAU2015). Most bodies will be the same but having a
flexible system which takes the smallest footprint would be best. Anyway, I
am hoping to move this issue forward by either finding time or funding a
contract.

As an alternative to the urn:ogc and the need for the local iau2000.wkt
file, you can use a an http address also. For example:
$ gdalsrsinfo "http://spatialreference.org/ref/iau2000/49900/"

PROJ.4 : '+proj=longlat +a=3396190 +b=3376200 +no_defs '

OGC WKT :
GEOGCS["Mars 2000",
    DATUM["D_Mars_2000",
        SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.89444722361179]],
    PRIMEM["Greenwich",0],
    UNIT["Decimal_Degree",0.0174532925199433]]

Regards,
Trent

On Thu, Sep 24, 2015 at 5:13 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le jeudi 24 septembre 2015 14:10:37, Yann a ?crit :
> > sorry, I get this from Ubuntu, thus my question.
> >
> > gdalsrsinfo urn:ogc:def:crs:IAU2000:30100
> >
> > ERROR 1: ERROR - failed to load SRS definition from
> > urn:ogc:def:crs:IAU2000:30100
>
> I think this dates back to ancient GDAL versions but you need to add the
> iau2000.wkt file in the GDAL data directory.
>
> >
> > On 24/09/2015 11:45, Even Rouault wrote:
> > > Yann,
> > >
> > >> I have recovered a old script I made about 1.5 year ago (and about 1+
> > >> version of Ubuntu away) to process Chandrayaan-M3 Moon data in
> > >> IAU2000:30100 and it seems that gdal_translate/gdalwarp do not know
> that
> > >> code anymore.
> > >
> > > Looking at the code you need to use a OGC URN:
> > >
> > > $ gdalsrsinfo urn:ogc:def:crs:IAU2000:30100
> > >
> > > PROJ.4 : '+proj=longlat +a=1737400 +b=1737400 +no_defs '
> > >
> > > OGC WKT :
> > > GEOGCS["Moon 2000",
> > >
> > >      DATUM["D_Moon_2000",
> > >
> > >          SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],
> > >
> > >      PRIMEM["Greenwich",0],
> > >      UNIT["Decimal_Degree",0.0174532925199433]]
> > >>
> > >> This is not a blocker, since the wkt style works like a charm.
> > >>
> > >> We had discussions earlier about planetary support in this list, among
> > >> whom Trent was involved (IIRC). Does anybody have any update about the
> > >> status change for the newest version of GDAL?
> > >
> > > Status quo.
> > >
> > > Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150924/877c7cce/attachment-0001.html>

From ychemin at gmail.com  Thu Sep 24 05:45:43 2015
From: ychemin at gmail.com (Yann)
Date: Thu, 24 Sep 2015 14:45:43 +0200
Subject: [gdal-dev] IAU2000 support?
In-Reply-To: <CAB6t5t8mFwZSip+CZaKRZ+qHFPwATGs+iKqj3PHTHa03-M6qEQ@mail.gmail.com>
References: <5603B611.9030903@gmail.com>
	<201509241145.45303.even.rouault@spatialys.com>
	<5603E83D.5050803@gmail.com>
	<201509241413.14685.even.rouault@spatialys.com>
	<CAB6t5t8mFwZSip+CZaKRZ+qHFPwATGs+iKqj3PHTHa03-M6qEQ@mail.gmail.com>
Message-ID: <5603F077.2070804@gmail.com>

Thanks for the info both of you.

It is a recurring issue for me (and my work with gdal/GRASS),
please contact me when you are up to tricks on that,
I will try to find time to give a hand.

Cheers,
Yann

On 24/09/2015 14:26, Hare, Trent wrote:
> Yann,
>     Yes there has been no movement on pushing the planetary projection codes
> as simple script or function call within GDAL. Instead of expanding all the
> definitions as a large ASCII file, this method would allow us to more
> easily grow once updated radii values are defined. The lunar definition is
> not changing anytime soon but bodies like Mercury and even Mars will have
> updates. Thus once the IAU publishes a new set of definitions, we will need
> a new namespace (e.g. IAU2015). Most bodies will be the same but having a
> flexible system which takes the smallest footprint would be best. Anyway, I
> am hoping to move this issue forward by either finding time or funding a
> contract.
>
> As an alternative to the urn:ogc and the need for the local iau2000.wkt
> file, you can use a an http address also. For example:
> $ gdalsrsinfo "http://spatialreference.org/ref/iau2000/49900/"
>
> PROJ.4 : '+proj=longlat +a=3396190 +b=3376200 +no_defs '
>
> OGC WKT :
> GEOGCS["Mars 2000",
>      DATUM["D_Mars_2000",
>          SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.89444722361179]],
>      PRIMEM["Greenwich",0],
>      UNIT["Decimal_Degree",0.0174532925199433]]
>
> Regards,
> Trent
>
> On Thu, Sep 24, 2015 at 5:13 AM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Le jeudi 24 septembre 2015 14:10:37, Yann a ?crit :
>>> sorry, I get this from Ubuntu, thus my question.
>>>
>>> gdalsrsinfo urn:ogc:def:crs:IAU2000:30100
>>>
>>> ERROR 1: ERROR - failed to load SRS definition from
>>> urn:ogc:def:crs:IAU2000:30100
>> I think this dates back to ancient GDAL versions but you need to add the
>> iau2000.wkt file in the GDAL data directory.
>>
>>> On 24/09/2015 11:45, Even Rouault wrote:
>>>> Yann,
>>>>
>>>>> I have recovered a old script I made about 1.5 year ago (and about 1+
>>>>> version of Ubuntu away) to process Chandrayaan-M3 Moon data in
>>>>> IAU2000:30100 and it seems that gdal_translate/gdalwarp do not know
>> that
>>>>> code anymore.
>>>> Looking at the code you need to use a OGC URN:
>>>>
>>>> $ gdalsrsinfo urn:ogc:def:crs:IAU2000:30100
>>>>
>>>> PROJ.4 : '+proj=longlat +a=1737400 +b=1737400 +no_defs '
>>>>
>>>> OGC WKT :
>>>> GEOGCS["Moon 2000",
>>>>
>>>>       DATUM["D_Moon_2000",
>>>>
>>>>           SPHEROID["Moon_2000_IAU_IAG",1737400.0,0.0]],
>>>>
>>>>       PRIMEM["Greenwich",0],
>>>>       UNIT["Decimal_Degree",0.0174532925199433]]
>>>>> This is not a blocker, since the wkt style works like a charm.
>>>>>
>>>>> We had discussions earlier about planetary support in this list, among
>>>>> whom Trent was involved (IIRC). Does anybody have any update about the
>>>>> status change for the newest version of GDAL?
>>>> Status quo.
>>>>
>>>> Even
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>

-- 
-----
Mobile: +33 (0)7 83 85 52 34


From jgrn at illinois.edu  Thu Sep 24 07:43:25 2015
From: jgrn at illinois.edu (Jonathan Greenberg)
Date: Thu, 24 Sep 2015 14:43:25 +0000
Subject: [gdal-dev] "Nested" vrts?
Message-ID: <CABG0rfuDCYn1uaA+j3zXCEdRBPZSSCN7YUDTiaa8GFaDc_kFmg@mail.gmail.com>

Folks:

Is it possible to create a vrt comprised of other vrts?  For a mosaicking
problem, say I want to first trim the margins of the individual tiles by a
certain number of pixels -- I can, of course, gdal_translate this but this
adds a bunch of new files/processing time -- can I use gdalbuildvrt to
first set a new te for each individual tile, and then feed these vrts into
another gdalbuildvrt for mosaicking them?

--j
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150924/fee01b79/attachment.html>

From andre+joost at nurfuerspam.de  Thu Sep 24 08:41:41 2015
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Thu, 24 Sep 2015 17:41:41 +0200
Subject: [gdal-dev] "Nested" vrts?
In-Reply-To: <CABG0rfuDCYn1uaA+j3zXCEdRBPZSSCN7YUDTiaa8GFaDc_kFmg@mail.gmail.com>
References: <CABG0rfuDCYn1uaA+j3zXCEdRBPZSSCN7YUDTiaa8GFaDc_kFmg@mail.gmail.com>
Message-ID: <mu15o9$6li$1@ger.gmane.org>

Am 24.09.2015 um 16:43 schrieb Jonathan Greenberg:
> Folks:
>
> Is it possible to create a vrt comprised of other vrts?  For a mosaicking
> problem, say I want to first trim the margins of the individual tiles by a
> certain number of pixels -- I can, of course, gdal_translate this but this
> adds a bunch of new files/processing time -- can I use gdalbuildvrt to
> first set a new te for each individual tile, and then feed these vrts into
> another gdalbuildvrt for mosaicking them?
>

I did something similar to mosaic cadastral maps for gdal2tiles:

for %%N in (D:\Karten\gdal\gdal2tiles\NL25\*.tif) DO gdal_translate -of 
vrt -expand rgba %%N D:\Karten\gdal\gdal2tiles\NL25\%%~nN.vrt
gdalbuildvrt -allow_projection_difference index25.vrt NL25\*.vrt

The first step expands paletted colours to RGB into one vrt per source 
file, the second mosaics them together.

HTH,
Andr? Joost



From damian.dixon at gmail.com  Fri Sep 25 00:47:42 2015
From: damian.dixon at gmail.com (Damian Dixon)
Date: Fri, 25 Sep 2015 08:47:42 +0100
Subject: [gdal-dev] GDALRasterBand::RasterIO returning block containing 0
 for area that does not overlap the data.
Message-ID: <CAJjdW1xdtSEexgXSZvL2thikkUqNNyj6-6ZgJ+c79gAQMhoNbg@mail.gmail.com>

Hi,

GDALRasterBand::RasterIO returning block containing 0 for area that does
not overlap the data.

This is slightly different from requesting data for an area that overlaps
the data, but there is no data.

Is there away of checking for this condition before I call RasterIO?


I?m using the following to read a block of data at a time:

GDALRasterBand *poBand;
?
poBand->RasterIO(GF_Read,startX+xoffset,startY+yoffset,blockWidth,blockHeight,buffer[band],blockWidth,blockHeight,GDT_Int32,0,0);


This works fine, but I would like to be told if the block I am reading does
not overlap the data.

There are two reasons for this;

(1) It?s an early exit, before the block is set to 0 or the no-data value.
(2) It means I don?t have to check the block to see if it is filled with
just 0 or no-data.

The stack trace for the calls is as follows:

tplgdal11164d.dll!VRTSimpleSource::GetSrcDstWindow(int nXOff, int nYOff,
int nXSize, int nYSize, int nBufXSize, int nBufYSize, int * pnReqXOff, int
* pnReqYOff, int * pnReqXSize, int * pnReqYSize, int * pnOutXOff, int *
pnOutYOff, int * pnOutXSize, int * pnOutYSize)  Line 685 C++
  tplgdal11164d.dll!VRTSimpleSource::RasterIO(int nXOff, int nYOff, int
nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize,
GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 889 + 0xad
bytes C++
  tplgdal11164d.dll!VRTSourcedRasterBand::IRasterIO(GDALRWFlag eRWFlag, int
nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int
nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line
206 + 0x9c bytes C++
  tplgdal11164d.dll!GDALRasterBand::RasterIO(GDALRWFlag eRWFlag, int nXOff,
int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int
nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 261
C++

In VRTSimpleSource::RasterIO the first thing that happens is a call to
GetSrcDstWindow. If this call fails the function returns with a CE_None.
This is after the block has been set to 0.

The simplest change would be to extend the return enum to have a CE_NoData.
But that does not really fit with the name of the enum and does to deal
with (1).

The other option is to provide access to GetSrcDstWindow. This would allow
the application to check to see if there is data in the block requested.


I may of course be missing a more sensible way of doing this without any
code changes to GDAL. If I am missing something could someone let me know
what I should be doing.

Thanks
Damian


Using: GDAL version 11.2
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150925/9aff8dc3/attachment.html>

From even.rouault at spatialys.com  Fri Sep 25 01:04:32 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 25 Sep 2015 10:04:32 +0200
Subject: [gdal-dev] GDALRasterBand::RasterIO returning block containing
	0 for area that does not overlap the data.
In-Reply-To: <CAJjdW1xdtSEexgXSZvL2thikkUqNNyj6-6ZgJ+c79gAQMhoNbg@mail.gmail.com>
References: <CAJjdW1xdtSEexgXSZvL2thikkUqNNyj6-6ZgJ+c79gAQMhoNbg@mail.gmail.com>
Message-ID: <201509251004.32469.even.rouault@spatialys.com>

Damian,

There's no dedicated function in the GDAL API to know if a window is only no 
data without querying the pixel values. It would make only sense for drivers 
that support sparse coverages, like VRT, some formulations of TIFF with 
missing blocks, ERDAS Imagine, GeoPackage, ...

Even

> Hi,
> 
> GDALRasterBand::RasterIO returning block containing 0 for area that does
> not overlap the data.
> 
> This is slightly different from requesting data for an area that overlaps
> the data, but there is no data.
> 
> Is there away of checking for this condition before I call RasterIO?
> 
> 
> I?m using the following to read a block of data at a time:
> 
> GDALRasterBand *poBand;
> ?
> poBand->RasterIO(GF_Read,startX+xoffset,startY+yoffset,blockWidth,blockHeig
> ht,buffer[band],blockWidth,blockHeight,GDT_Int32,0,0);
> 
> 
> This works fine, but I would like to be told if the block I am reading does
> not overlap the data.
> 
> There are two reasons for this;
> 
> (1) It?s an early exit, before the block is set to 0 or the no-data value.
> (2) It means I don?t have to check the block to see if it is filled with
> just 0 or no-data.
> 
> The stack trace for the calls is as follows:
> 
> tplgdal11164d.dll!VRTSimpleSource::GetSrcDstWindow(int nXOff, int nYOff,
> int nXSize, int nYSize, int nBufXSize, int nBufYSize, int * pnReqXOff, int
> * pnReqYOff, int * pnReqXSize, int * pnReqYSize, int * pnOutXOff, int *
> pnOutYOff, int * pnOutXSize, int * pnOutYSize)  Line 685 C++
>   tplgdal11164d.dll!VRTSimpleSource::RasterIO(int nXOff, int nYOff, int
> nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize,
> GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 889 + 0xad
> bytes C++
>   tplgdal11164d.dll!VRTSourcedRasterBand::IRasterIO(GDALRWFlag eRWFlag, int
> nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int
> nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line
> 206 + 0x9c bytes C++
>   tplgdal11164d.dll!GDALRasterBand::RasterIO(GDALRWFlag eRWFlag, int nXOff,
> int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int
> nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line
> 261 C++
> 
> In VRTSimpleSource::RasterIO the first thing that happens is a call to
> GetSrcDstWindow. If this call fails the function returns with a CE_None.
> This is after the block has been set to 0.
> 
> The simplest change would be to extend the return enum to have a CE_NoData.
> But that does not really fit with the name of the enum and does to deal
> with (1).
> 
> The other option is to provide access to GetSrcDstWindow. This would allow
> the application to check to see if there is data in the block requested.
> 
> 
> I may of course be missing a more sensible way of doing this without any
> code changes to GDAL. If I am missing something could someone let me know
> what I should be doing.
> 
> Thanks
> Damian
> 
> 
> Using: GDAL version 11.2

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From paulopires16 at gmail.com  Fri Sep 25 02:11:53 2015
From: paulopires16 at gmail.com (Paulo Pires)
Date: Fri, 25 Sep 2015 02:11:53 -0700 (PDT)
Subject: [gdal-dev] Edit shapefile gemetry
Message-ID: <1443172313036-5226076.post@n6.nabble.com>

Hello

Whith "from osgeo import ogr" can we edit a shapefile geometry in python
code? X and Y?

Like setX(...) and setY(...) on existing geometry?

Thanks



--
View this message in context: http://osgeo-org.1560.x6.nabble.com/Edit-shapefile-gemetry-tp5226076.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From damian.dixon at gmail.com  Fri Sep 25 05:34:16 2015
From: damian.dixon at gmail.com (Damian Dixon)
Date: Fri, 25 Sep 2015 13:34:16 +0100
Subject: [gdal-dev] GDALRasterBand::RasterIO returning block containing
 0 for area that does not overlap the data.
In-Reply-To: <201509251004.32469.even.rouault@spatialys.com>
References: <CAJjdW1xdtSEexgXSZvL2thikkUqNNyj6-6ZgJ+c79gAQMhoNbg@mail.gmail.com>
	<201509251004.32469.even.rouault@spatialys.com>
Message-ID: <CAJjdW1yoKYoRR360uBXBdQrq=yjQvLx=hG5PUM4PKM5kHSTGtg@mail.gmail.com>

Even,

Is there away to get the bounding polygon of the data?

Thanks
Damian

On 25 September 2015 at 09:04, Even Rouault <even.rouault at spatialys.com>
wrote:

> Damian,
>
> There's no dedicated function in the GDAL API to know if a window is only
> no
> data without querying the pixel values. It would make only sense for
> drivers
> that support sparse coverages, like VRT, some formulations of TIFF with
> missing blocks, ERDAS Imagine, GeoPackage, ...
>
> Even
>
> > Hi,
> >
> > GDALRasterBand::RasterIO returning block containing 0 for area that does
> > not overlap the data.
> >
> > This is slightly different from requesting data for an area that overlaps
> > the data, but there is no data.
> >
> > Is there away of checking for this condition before I call RasterIO?
> >
> >
> > I?m using the following to read a block of data at a time:
> >
> > GDALRasterBand *poBand;
> > ?
> >
> poBand->RasterIO(GF_Read,startX+xoffset,startY+yoffset,blockWidth,blockHeig
> > ht,buffer[band],blockWidth,blockHeight,GDT_Int32,0,0);
> >
> >
> > This works fine, but I would like to be told if the block I am reading
> does
> > not overlap the data.
> >
> > There are two reasons for this;
> >
> > (1) It?s an early exit, before the block is set to 0 or the no-data
> value.
> > (2) It means I don?t have to check the block to see if it is filled with
> > just 0 or no-data.
> >
> > The stack trace for the calls is as follows:
> >
> > tplgdal11164d.dll!VRTSimpleSource::GetSrcDstWindow(int nXOff, int nYOff,
> > int nXSize, int nYSize, int nBufXSize, int nBufYSize, int * pnReqXOff,
> int
> > * pnReqYOff, int * pnReqXSize, int * pnReqYSize, int * pnOutXOff, int *
> > pnOutYOff, int * pnOutXSize, int * pnOutYSize)  Line 685 C++
> >   tplgdal11164d.dll!VRTSimpleSource::RasterIO(int nXOff, int nYOff, int
> > nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize,
> > GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 889 + 0xad
> > bytes C++
> >   tplgdal11164d.dll!VRTSourcedRasterBand::IRasterIO(GDALRWFlag eRWFlag,
> int
> > nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize,
> int
> > nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line
> > 206 + 0x9c bytes C++
> >   tplgdal11164d.dll!GDALRasterBand::RasterIO(GDALRWFlag eRWFlag, int
> nXOff,
> > int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int
> > nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line
> > 261 C++
> >
> > In VRTSimpleSource::RasterIO the first thing that happens is a call to
> > GetSrcDstWindow. If this call fails the function returns with a CE_None.
> > This is after the block has been set to 0.
> >
> > The simplest change would be to extend the return enum to have a
> CE_NoData.
> > But that does not really fit with the name of the enum and does to deal
> > with (1).
> >
> > The other option is to provide access to GetSrcDstWindow. This would
> allow
> > the application to check to see if there is data in the block requested.
> >
> >
> > I may of course be missing a more sensible way of doing this without any
> > code changes to GDAL. If I am missing something could someone let me know
> > what I should be doing.
> >
> > Thanks
> > Damian
> >
> >
> > Using: GDAL version 11.2
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150925/63d5d695/attachment.html>

From even.rouault at spatialys.com  Fri Sep 25 06:16:30 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 25 Sep 2015 15:16:30 +0200
Subject: [gdal-dev] GDALRasterBand::RasterIO returning block containing
	0 for area that does not overlap the data.
In-Reply-To: <CAJjdW1yoKYoRR360uBXBdQrq=yjQvLx=hG5PUM4PKM5kHSTGtg@mail.gmail.com>
References: <CAJjdW1xdtSEexgXSZvL2thikkUqNNyj6-6ZgJ+c79gAQMhoNbg@mail.gmail.com>
	<201509251004.32469.even.rouault@spatialys.com>
	<CAJjdW1yoKYoRR360uBXBdQrq=yjQvLx=hG5PUM4PKM5kHSTGtg@mail.gmail.com>
Message-ID: <201509251516.30625.even.rouault@spatialys.com>

Le vendredi 25 septembre 2015 14:34:16, Damian Dixon a ?crit :
> Even,
> 
> Is there away to get the bounding polygon of the data?

Not through the GDAL API, at least not in the fast way you want (you could 
potentially call GDALPolygonize but this is very very heavy processing)

If your interest is VRT, then parsing the VRT would probably the best 
solution.

> 
> Thanks
> Damian
> 
> On 25 September 2015 at 09:04, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Damian,
> > 
> > There's no dedicated function in the GDAL API to know if a window is only
> > no
> > data without querying the pixel values. It would make only sense for
> > drivers
> > that support sparse coverages, like VRT, some formulations of TIFF with
> > missing blocks, ERDAS Imagine, GeoPackage, ...
> > 
> > Even
> > 
> > > Hi,
> > > 
> > > GDALRasterBand::RasterIO returning block containing 0 for area that
> > > does not overlap the data.
> > > 
> > > This is slightly different from requesting data for an area that
> > > overlaps the data, but there is no data.
> > > 
> > > Is there away of checking for this condition before I call RasterIO?
> > > 
> > > 
> > > I?m using the following to read a block of data at a time:
> > > 
> > > GDALRasterBand *poBand;
> > > ?
> > 
> > poBand->RasterIO(GF_Read,startX+xoffset,startY+yoffset,blockWidth,blockHe
> > ig
> > 
> > > ht,buffer[band],blockWidth,blockHeight,GDT_Int32,0,0);
> > > 
> > > 
> > > This works fine, but I would like to be told if the block I am reading
> > 
> > does
> > 
> > > not overlap the data.
> > > 
> > > There are two reasons for this;
> > > 
> > > (1) It?s an early exit, before the block is set to 0 or the no-data
> > 
> > value.
> > 
> > > (2) It means I don?t have to check the block to see if it is filled
> > > with just 0 or no-data.
> > > 
> > > The stack trace for the calls is as follows:
> > > 
> > > tplgdal11164d.dll!VRTSimpleSource::GetSrcDstWindow(int nXOff, int
> > > nYOff, int nXSize, int nYSize, int nBufXSize, int nBufYSize, int *
> > > pnReqXOff,
> > 
> > int
> > 
> > > * pnReqYOff, int * pnReqXSize, int * pnReqYSize, int * pnOutXOff, int *
> > > pnOutYOff, int * pnOutXSize, int * pnOutYSize)  Line 685 C++
> > > 
> > >   tplgdal11164d.dll!VRTSimpleSource::RasterIO(int nXOff, int nYOff, int
> > > 
> > > nXSize, int nYSize, void * pData, int nBufXSize, int nBufYSize,
> > > GDALDataType eBufType, int nPixelSpace, int nLineSpace)  Line 889 +
> > > 0xad bytes C++
> > > 
> > >   tplgdal11164d.dll!VRTSourcedRasterBand::IRasterIO(GDALRWFlag eRWFlag,
> > 
> > int
> > 
> > > nXOff, int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize,
> > 
> > int
> > 
> > > nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace) 
> > > Line 206 + 0x9c bytes C++
> > > 
> > >   tplgdal11164d.dll!GDALRasterBand::RasterIO(GDALRWFlag eRWFlag, int
> > 
> > nXOff,
> > 
> > > int nYOff, int nXSize, int nYSize, void * pData, int nBufXSize, int
> > > nBufYSize, GDALDataType eBufType, int nPixelSpace, int nLineSpace) 
> > > Line 261 C++
> > > 
> > > In VRTSimpleSource::RasterIO the first thing that happens is a call to
> > > GetSrcDstWindow. If this call fails the function returns with a
> > > CE_None. This is after the block has been set to 0.
> > > 
> > > The simplest change would be to extend the return enum to have a
> > 
> > CE_NoData.
> > 
> > > But that does not really fit with the name of the enum and does to deal
> > > with (1).
> > > 
> > > The other option is to provide access to GetSrcDstWindow. This would
> > 
> > allow
> > 
> > > the application to check to see if there is data in the block
> > > requested.
> > > 
> > > 
> > > I may of course be missing a more sensible way of doing this without
> > > any code changes to GDAL. If I am missing something could someone let
> > > me know what I should be doing.
> > > 
> > > Thanks
> > > Damian
> > > 
> > > 
> > > Using: GDAL version 11.2
> > 
> > --
> > Spatialys - Geospatial professional services
> > http://www.spatialys.com

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Fri Sep 25 09:12:37 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 25 Sep 2015 18:12:37 +0200
Subject: [gdal-dev] Call for discussion on RFC 59.1: GDAL/OGR utilities as a
	library
Message-ID: <201509251812.37679.even.rouault@spatialys.com>

Hi,

Another iteration on the subject, trying to find a compromise. Hopefully the 
good one... I created a derived version from the original RFC :

https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library

Main changes since original proposal :
- C structure for options are now opaque
- new functions are put into the existing libgdal
- added syntaxic sugar for Python bindings

I've recreated a new proposed implementation for gdalinfo & gdal_translate, 
largely based on Faza's work, and resynchronized with trunk (hopefully not 
losing changes...)

If we are OK on this, I'd like we approve it and merge the work done for 
gdalinfo & gdal_translate, and then proceed step by step with other utilities 
with the same principles.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From sean at mapbox.com  Fri Sep 25 10:23:06 2015
From: sean at mapbox.com (Sean Gillies)
Date: Fri, 25 Sep 2015 11:23:06 -0600
Subject: [gdal-dev] Call for discussion on RFC 60: Improved
 round-tripping in OGR
In-Reply-To: <201509231729.50153.even.rouault@spatialys.com>
References: <201509231729.50153.even.rouault@spatialys.com>
Message-ID: <CADPhZXyS_EEus_Ch1cBVHqq1seDyWCHJaVY2+MWkkU+U1JMZBw@mail.gmail.com>

Dear all,

This feature is a boost for GeoJSON users who are extending the format and
users of those extensions. JSON is a naturally extensible format but the
GeoJSON OGR driver stifles development of extensions by passing only the
fully standardized GeoJSON items.

Let's say I want to use ogr2ogr to spatially filter some GeoJSON coming
from the OSM Overpass API [1] or the Mapbox Geocoding API [2]. Here's what
the response of the latter looks like, abbreviated:

$ curl
https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.json?access_token=$MAPBOX_ACCESS_TOKEN
| python -mjson.tool
{
    "attribution": "NOTICE: \u00a9 2015 Mapbox and its suppliers. All
rights reserved. Use of this data is subject to the Mapbox Terms of Service
(https://www.mapbox.com/about/maps/). This response and the information it
contains may not be retained.",
    "features": [
        {
            "address": "1600",
            "bbox": [
                -77.05781199999998,
                38.89252299999999,
                -77.01844799999999,
                38.905058999999994
            ],
            "center": [
                -77.034389,
                38.897693
            ],
            "context": [
                {
                    "id": "place.57972",
                    "text": "Washington"
                },
                {
                    "id": "postcode.858369517",
                    "text": "20004"
                },
                {
                    "id": "region.1190806886",
                    "text": "District of Columbia"
                },
                {
                    "id": "country.4150104525",
                    "text": "United States"
                }
            ],
            "geometry": {
                "coordinates": [
                    -77.034389,
                    38.897693
                ],
                "type": "Point"
            },
            "id": "address.39053333360279",
            "place_name": "1600 Pennsylvania Ave NW, Washington, 20004,
District of Columbia, United States",
            "properties": {},
            "relevance": 0.99,
            "text": "Pennsylvania Ave NW",
            "type": "Feature"
        },
        ...
    ],
    "query": [
        "1600",
        "pennsylvania",
        "ave",
        "nw"
    ],
    "type": "FeatureCollection"
}

The Features and FeatureCollection have extension items expressing rights,
the original query, and more.

When I pipe this through ogr2ogr to spatially filter, here are the results:

$ curl
https://api.mapbox.com/v4/geocode/mapbox.places/1600+pennsylvania+ave+nw.json?access_token=$MAPBOX_ACCESS_TOKEN
| ogr2ogr -clipsrc -100 30 -70 60 -f GeoJSON /vsistdout/ /vsistdin/
{
"type": "FeatureCollection",
"crs": { "type": "name", "properties": { "name":
"urn:ogc:def:crs:OGC:1.3:CRS84" } },
"features": [
{ "type": "Feature", "properties": { }, "geometry": { "type": "Point",
"coordinates": [ -77.034389, 38.897693 ] } },
{ "type": "Feature", "properties": { }, "geometry": { "type": "Point",
"coordinates": [ -76.634388, 39.30307 ] } },
{ "type": "Feature", "properties": { }, "geometry": { "type": "Point",
"coordinates": [ -80.272062, 40.687045 ] } },
{ "type": "Feature", "properties": { }, "geometry": { "type": "Point",
"coordinates": [ -95.54508, 34.841595 ] } }
]
}

The extensions are lost. This means that ogr2ogr can't be used in pipelines
that process extended GeoJSON.

If you want your GeoJSON to pass through OGR in high fidelity, you have to
put everything in the Feature.properties object no matter whether that's
the best place for it or not. In practice, the Feature.properties object
becomes a grey goo of feature attributes, styling properties, and you name
it.

The implementation of RFC 60 would pass through GeoJSON extensions in full
hi-fi. OGR will no longer be an impediment to extension developers.

[1] http://wiki.openstreetmap.org/wiki/Overpass_turbo/GeoJSON
[2] https://github.com/mapbox/carmen/blob/master/carmen-geojson.md

Yours,


On Wed, Sep 23, 2015 at 9:29 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> This is a call for discussion on "RFC 60: Improved round-tripping in OGR".
>
> https://trac.osgeo.org/gdal/wiki/rfc60_improved_roundtripping_in_ogr
>
> This RFC defines how to improve better round-tripping in conversion of
> vector
> formats, in particular for GeoJSON extensions.
>
> Best regards,
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150925/a6e76ca5/attachment.html>

From jgomezdans at gmail.com  Sun Sep 27 09:08:11 2015
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Sun, 27 Sep 2015 17:08:11 +0100
Subject: [gdal-dev] Limits on use of VRTs?
Message-ID: <CAMWde5o4Aq4+PCD4K=tCM6Eh-C-Lf-qe9A69+dyEpue_O7E54A@mail.gmail.com>

Hello,

I'm trying to do some python processing, and I thought that using VRTs
would be a great way forward. My process is basically:

1.- Putting several bands together into a single dataset. A couple of bands
have a different dataset (Byte vs Int16), so I'd like to upgrade these Byte
bands to Int16
2.- Reprojecting the result of (1) to match a particular spatial extent and
projection.

The first step I was hoping to accomplish by simply doing gdalbuildvrt
-separate (not in Python, just from the shell), but it appears that I need
an extra gdal_translate to convert all the bands to Int16 (the first band
is Byte, and gdalbuildvrt assumes all following bands will be Byte too).

Part 2 fails with a VRT dataset as input, but works OK with a GeoTIFF.

In the end, I have everything working by external calls to gdalwarp,
gdalbuildvrt and gdal_translate, but this is cumbersome and uses lots of
disk I/O, when this is a situation where doing it using VRTs would be
beautifully simple.

I must be clearly missing limitation on VRTs. I'm using GDAL version 1.11.2
on Linux, and any pointers would be appreciated.

Regards,
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150927/60b73990/attachment.html>

From even.rouault at spatialys.com  Sun Sep 27 11:17:09 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 27 Sep 2015 20:17:09 +0200
Subject: [gdal-dev] Limits on use of VRTs?
In-Reply-To: <CAMWde5o4Aq4+PCD4K=tCM6Eh-C-Lf-qe9A69+dyEpue_O7E54A@mail.gmail.com>
References: <CAMWde5o4Aq4+PCD4K=tCM6Eh-C-Lf-qe9A69+dyEpue_O7E54A@mail.gmail.com>
Message-ID: <201509272017.10012.even.rouault@spatialys.com>

Jose,

> I'm trying to do some python processing, and I thought that using VRTs
> would be a great way forward. My process is basically:
> 
> 1.- Putting several bands together into a single dataset. A couple of bands
> have a different dataset (Byte vs Int16), so I'd like to upgrade these Byte
> bands to Int16
> 2.- Reprojecting the result of (1) to match a particular spatial extent and
> projection.
> 
> The first step I was hoping to accomplish by simply doing gdalbuildvrt
> -separate (not in Python, just from the shell), but it appears that I need
> an extra gdal_translate to convert all the bands to Int16 (the first band
> is Byte, and gdalbuildvrt assumes all following bands will be Byte too).

You can edit the VRT and specify the desired data type. Just edit the dataType 
attribute of the VRTRasterBand element and set it to Int16 for all bands. It 
might be desirable to have a -ot switch for gdalbuildvrt in those situations.

Doing a "gdal_translate in.vrt out.vrt -ot Int16 -of vrt" can also workaround 
that.

> 
> Part 2 fails with a VRT dataset as input, but works OK with a GeoTIFF.

Yes, datasets with different data types for different bands might not properly 
everywhere. Once converted into GeoTIFF, since that format only has a single 
data type for all bands, that issue cannot happen.

Best regards,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kephill at sandia.gov  Mon Sep 28 07:21:16 2015
From: kephill at sandia.gov (Phillips-Alonge, Kristin Eileen)
Date: Mon, 28 Sep 2015 14:21:16 +0000
Subject: [gdal-dev] Installation error messages on Mac OS 10.10.5 Yosemite
Message-ID: <D22EA8FB.1FA5%kephill@sandia.gov>

Hello,

I am trying to install GDAL-2.0.1 on a Mac OS 10.10.5 and received some error messages.  I modified setup.cfg to point to the location of gdal_config after installing the gdal library (1.11.2_3) with homebrew.

These are some of the error messages I?m getting when I type ?python setup.py build? in the distribution directory of GDAL-2.0.1.  Any ideas of what I can do to resolve this?  I do not have easy_install for Python and was not able to install pip for the installation of packages because I use a proxy server and have a password containing ?#' which cuts off the rest of the password from being read.


warning: unknown warning option

      '-Werror=unused-command-line-argument-hard-error-in-future'; did you mean

      '-Werror=unused-command-line-argument'? [-Wunknown-warning-option]

warning: unknown warning option

      '-Werror=unused-command-line-argument-hard-error-in-future'; did you mean

      '-Werror=unused-command-line-argument'? [-Wunknown-warning-option]

extensions/gdal_wrap.cpp:2230:11: warning: explicitly assigning value of

      variable of type 'int' to itself [-Wself-assign]

                    res = SWIG_AddCast(res);

                    ~~~ ^              ~~~

extensions/gdal_wrap.cpp:2233:11: warning: explicitly assigning value of

      variable of type 'int' to itself [-Wself-assign]

                    res = SWIG_AddCast(res);

                    ~~~ ^              ~~~

extensions/gdal_wrap.cpp:4265:47: error: use of undeclared identifier

      'GDALDatasetCreateLayer'; did you mean 'GDALDatasetShadow_CreateLayer'?

    OGRLayerShadow* layer = (OGRLayerShadow*) GDALDatasetCreateLayer( self,

                                              ^~~~~~~~~~~~~~~~~~~~~~

                                              GDALDatasetShadow_CreateLayer

extensions/gdal_wrap.cpp:4264:28: note: 'GDALDatasetShadow_CreateLayer' declared

      here

SWIGINTERN OGRLayerShadow *GDALDatasetShadow_CreateLayer(GDALDatasetShad...

                           ^

extensions/gdal_wrap.cpp:4273:47: error: use of undeclared identifier

      'GDALDatasetCopyLayer'

    OGRLayerShadow* layer = (OGRLayerShadow*) GDALDatasetCopyLayer( self,

                                              ^

extensions/gdal_wrap.cpp:4280:12: error: use of undeclared identifier

      'GDALDatasetDeleteLayer'; did you mean 'GDALDatasetShadow_DeleteLayer'?

    return GDALDatasetDeleteLayer(self, index);

           ^~~~~~~~~~~~~~~~~~~~~~

           GDALDatasetShadow_DeleteLayer

extensions/gdal_wrap.cpp:4279:19: note: 'GDALDatasetShadow_DeleteLayer' declared

      here

SWIGINTERN OGRErr GDALDatasetShadow_DeleteLayer(GDALDatasetShadow *self,...

                  ^

extensions/gdal_wrap.cpp:4306:8: error: use of undeclared identifier

      'OGRERR_NON_EXISTING_FEATURE'

  case OGRERR_NON_EXISTING_FEATURE:

       ^

extensions/gdal_wrap.cpp:4314:12: error: use of undeclared identifier

      'GDALDatasetGetLayerCount'; did you mean

      'GDALDatasetShadow_GetLayerCount'?

    return GDALDatasetGetLayerCount(self);

           ^~~~~~~~~~~~~~~~~~~~~~~~

           GDALDatasetShadow_GetLayerCount

extensions/gdal_wrap.cpp:4313:16: note: 'GDALDatasetShadow_GetLayerCount'

      declared here

SWIGINTERN int GDALDatasetShadow_GetLayerCount(GDALDatasetShadow *self){

               ^

extensions/gdal_wrap.cpp:4318:47: error: use of undeclared identifier

      'GDALDatasetGetLayer'

    OGRLayerShadow* layer = (OGRLayerShadow*) GDALDatasetGetLayer(self, index);

                                              ^

extensions/gdal_wrap.cpp:4322:47: error: use of undeclared identifier

      'GDALDatasetGetLayerByName'; did you mean

      'GDALDatasetShadow_GetLayerByName'?

  ...layer = (OGRLayerShadow*) GDALDatasetGetLayerByName(self, layer_name);

                               ^~~~~~~~~~~~~~~~~~~~~~~~~

                               GDALDatasetShadow_GetLayerByName

extensions/gdal_wrap.cpp:4321:28: note: 'GDALDatasetShadow_GetLayerByName'

      declared here

SWIGINTERN OGRLayerShadow *GDALDatasetShadow_GetLayerByName(GDALDatasetS...

                           ^

extensions/gdal_wrap.cpp:4326:13: error: use of undeclared identifier

      'GDALDatasetTestCapability'; did you mean

      'GDALDatasetShadow_TestCapability'?

    return (GDALDatasetTestCapability(self, cap) > 0);

            ^~~~~~~~~~~~~~~~~~~~~~~~~

            GDALDatasetShadow_TestCapability

extensions/gdal_wrap.cpp:4325:17: note: 'GDALDatasetShadow_TestCapability'

      declared here

SWIGINTERN bool GDALDatasetShadow_TestCapability(GDALDatasetShadow *self...

                ^

extensions/gdal_wrap.cpp:4336:47: error: use of undeclared identifier

      'GDALDatasetExecuteSQL'; did you mean 'GDALDatasetShadow_ExecuteSQL'?

    OGRLayerShadow* layer = (OGRLayerShadow*) GDALDatasetExecuteSQL(self,

                                              ^~~~~~~~~~~~~~~~~~~~~

                                              GDALDatasetShadow_ExecuteSQL

extensions/gdal_wrap.cpp:4335:28: note: 'GDALDatasetShadow_ExecuteSQL' declared

      here

SWIGINTERN OGRLayerShadow *GDALDatasetShadow_ExecuteSQL(GDALDatasetShado...

                           ^

extensions/gdal_wrap.cpp:4343:5: error: use of undeclared identifier

      'GDALDatasetReleaseResultSet'; did you mean

      'GDALDatasetShadow_ReleaseResultSet'?

    GDALDatasetReleaseResultSet(self, layer);

    ^~~~~~~~~~~~~~~~~~~~~~~~~~~

    GDALDatasetShadow_ReleaseResultSet

extensions/gdal_wrap.cpp:4342:17: note: 'GDALDatasetShadow_ReleaseResultSet'

      declared here

SWIGINTERN void GDALDatasetShadow_ReleaseResultSet(GDALDatasetShadow *se...

                ^

extensions/gdal_wrap.cpp:4346:35: error: use of undeclared identifier

      'GDALDatasetGetStyleTable'; did you mean

      'GDALDatasetShadow_GetStyleTable'?

    return (OGRStyleTableShadow*) GDALDatasetGetStyleTable(self);

                                  ^~~~~~~~~~~~~~~~~~~~~~~~

                                  GDALDatasetShadow_GetStyleTable

extensions/gdal_wrap.cpp:4345:33: note: 'GDALDatasetShadow_GetStyleTable'

      declared here

SWIGINTERN OGRStyleTableShadow *GDALDatasetShadow_GetStyleTable(GDALData...

                                ^

extensions/gdal_wrap.cpp:4350:9: error: use of undeclared identifier

      'GDALDatasetSetStyleTable'; did you mean

      'GDALDatasetShadow_SetStyleTable'?

        GDALDatasetSetStyleTable(self, (OGRStyleTableH) table);

        ^~~~~~~~~~~~~~~~~~~~~~~~

        GDALDatasetShadow_SetStyleTable

extensions/gdal_wrap.cpp:4348:17: note: 'GDALDatasetShadow_SetStyleTable'

      declared here

SWIGINTERN void GDALDatasetShadow_SetStyleTable(GDALDatasetShadow *self,...

                ^

extensions/gdal_wrap.cpp:4350:40: error: cannot initialize a parameter of type

      'OGRStyleTableShadow *' (aka 'OGRStyleTableHS *') with an rvalue of type

      'OGRStyleTableH' (aka 'void *')

        GDALDatasetSetStyleTable(self, (OGRStyleTableH) table);

                                       ^~~~~~~~~~~~~~~~~~~~~~

extensions/gdal_wrap.cpp:4348:94: note: passing argument to parameter 'table'

      here

  ...*self,OGRStyleTableShadow *table){

                                ^

extensions/gdal_wrap.cpp:4353:12: error: use of undeclared identifier

      'GDALDatasetStartTransaction'; did you mean

      'GDALDatasetShadow_StartTransaction'?

    return GDALDatasetStartTransaction(self, force);

           ^~~~~~~~~~~~~~~~~~~~~~~~~~~

           GDALDatasetShadow_StartTransaction

extensions/gdal_wrap.cpp:4352:19: note: 'GDALDatasetShadow_StartTransaction'

      declared here

SWIGINTERN OGRErr GDALDatasetShadow_StartTransaction(GDALDatasetShadow *...

                  ^

extensions/gdal_wrap.cpp:4356:12: error: use of undeclared identifier

      'GDALDatasetCommitTransaction'; did you mean

      'GDALDatasetShadow_CommitTransaction'?

    return GDALDatasetCommitTransaction(self);

           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~

           GDALDatasetShadow_CommitTransaction

extensions/gdal_wrap.cpp:4355:19: note: 'GDALDatasetShadow_CommitTransaction'

      declared here

SWIGINTERN OGRErr GDALDatasetShadow_CommitTransaction(GDALDatasetShadow *self){

                  ^

extensions/gdal_wrap.cpp:4359:12: error: use of undeclared identifier

      'GDALDatasetRollbackTransaction'; did you mean

      'GDALDatasetShadow_RollbackTransaction'?

    return GDALDatasetRollbackTransaction(self);

           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

           GDALDatasetShadow_RollbackTransaction

extensions/gdal_wrap.cpp:4358:19: note: 'GDALDatasetShadow_RollbackTransaction'

      declared here

SWIGINTERN OGRErr GDALDatasetShadow_RollbackTransaction(GDALDatasetShado...

                  ^

extensions/gdal_wrap.cpp:4361:294: error: unknown type name

      'GDALRIOResampleAlg'; did you mean 'GDALResampleAlg'?

  ...*buf_line_space=0,GIntBig *buf_band_space=0,GDALRIOResampleAlg resample_...

                                                 ^~~~~~~~~~~~~~~~~~

                                                 GDALResampleAlg

/usr/local/Cellar/gdal/1.11.2_3/include/gdalwarper.h:56:3: note:

      'GDALResampleAlg' declared here

} GDALResampleAlg;

  ^

extensions/gdal_wrap.cpp:4361:326: error: use of undeclared identifier

      'GRIORA_NearestNeighbour'; did you mean 'GRA_NearestNeighbour'?

  ...resample_alg=GRIORA_NearestNeighbour,GDALProgressFunc callback=NULL,voi...

                  ^~~~~~~~~~~~~~~~~~~~~~~

                  GRA_NearestNeighbour

/usr/local/Cellar/gdal/1.11.2_3/include/gdalwarper.h:49:56: note:

      'GRA_NearestNeighbour' declared here

  /*! Nearest neighbour (select on one input pixel) */ GRA_NearestNeighbour=0,

                                                       ^

extensions/gdal_wrap.cpp:4425:5: error: unknown type name 'GDALRasterIOExtraArg'

    GDALRasterIOExtraArg sExtraArg;

    ^

fatal error: too many errors emitted, stopping now [-ferror-limit=]

4 warnings and 20 errors generated.

error: command '/usr/bin/clang' failed with exit status 1

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150928/9a0816f1/attachment-0001.html>

From even.rouault at spatialys.com  Mon Sep 28 07:55:31 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 28 Sep 2015 16:55:31 +0200
Subject: [gdal-dev] Installation error messages on Mac OS 10.10.5
	Yosemite
In-Reply-To: <D22EA8FB.1FA5%kephill@sandia.gov>
References: <D22EA8FB.1FA5%kephill@sandia.gov>
Message-ID: <201509281655.32017.even.rouault@spatialys.com>

Le lundi 28 septembre 2015 16:21:16, Phillips-Alonge, Kristin Eileen a ?crit :
> Hello,
> 
> I am trying to install GDAL-2.0.1 on a Mac OS 10.10.5 and received some
> error messages.  I modified setup.cfg to point to the location of
> gdal_config after installing the gdal library (1.11.2_3) with homebrew.

That cannot work. If you use the GDAL 2.0.1 python bindings, you must build 
them on top of the GDAL 2.0.1 library, not on top of an older version.

> 
> These are some of the error messages I?m getting when I type ?python
> setup.py build? in the distribution directory of GDAL-2.0.1.  Any ideas of
> what I can do to resolve this?  I do not have easy_install for Python and
> was not able to install pip for the installation of packages because I use
> a proxy server and have a password containing ?#' which cuts off the rest
> of the password from being read.
> 
> 
> warning: unknown warning option
> 
>       '-Werror=unused-command-line-argument-hard-error-in-future'; did you
> mean
> 
>       '-Werror=unused-command-line-argument'? [-Wunknown-warning-option]
> 
> warning: unknown warning option
> 
>       '-Werror=unused-command-line-argument-hard-error-in-future'; did you
> mean
> 
>       '-Werror=unused-command-line-argument'? [-Wunknown-warning-option]
> 
> extensions/gdal_wrap.cpp:2230:11: warning: explicitly assigning value of
> 
>       variable of type 'int' to itself [-Wself-assign]
> 
>                     res = SWIG_AddCast(res);
> 
>                     ~~~ ^              ~~~
> 
> extensions/gdal_wrap.cpp:2233:11: warning: explicitly assigning value of
> 
>       variable of type 'int' to itself [-Wself-assign]
> 
>                     res = SWIG_AddCast(res);
> 
>                     ~~~ ^              ~~~
> 
> extensions/gdal_wrap.cpp:4265:47: error: use of undeclared identifier
> 
>       'GDALDatasetCreateLayer'; did you mean
> 'GDALDatasetShadow_CreateLayer'?
> 
>     OGRLayerShadow* layer = (OGRLayerShadow*) GDALDatasetCreateLayer( self,
> 
>                                               ^~~~~~~~~~~~~~~~~~~~~~
> 
>                                               GDALDatasetShadow_CreateLayer
> 
> extensions/gdal_wrap.cpp:4264:28: note: 'GDALDatasetShadow_CreateLayer'
> declared
> 
>       here
> 
> SWIGINTERN OGRLayerShadow *GDALDatasetShadow_CreateLayer(GDALDatasetShad...
> 
>                            ^
> 
> extensions/gdal_wrap.cpp:4273:47: error: use of undeclared identifier
> 
>       'GDALDatasetCopyLayer'
> 
>     OGRLayerShadow* layer = (OGRLayerShadow*) GDALDatasetCopyLayer( self,
> 
>                                               ^
> 
> extensions/gdal_wrap.cpp:4280:12: error: use of undeclared identifier
> 
>       'GDALDatasetDeleteLayer'; did you mean
> 'GDALDatasetShadow_DeleteLayer'?
> 
>     return GDALDatasetDeleteLayer(self, index);
> 
>            ^~~~~~~~~~~~~~~~~~~~~~
> 
>            GDALDatasetShadow_DeleteLayer
> 
> extensions/gdal_wrap.cpp:4279:19: note: 'GDALDatasetShadow_DeleteLayer'
> declared
> 
>       here
> 
> SWIGINTERN OGRErr GDALDatasetShadow_DeleteLayer(GDALDatasetShadow *self,...
> 
>                   ^
> 
> extensions/gdal_wrap.cpp:4306:8: error: use of undeclared identifier
> 
>       'OGRERR_NON_EXISTING_FEATURE'
> 
>   case OGRERR_NON_EXISTING_FEATURE:
> 
>        ^
> 
> extensions/gdal_wrap.cpp:4314:12: error: use of undeclared identifier
> 
>       'GDALDatasetGetLayerCount'; did you mean
> 
>       'GDALDatasetShadow_GetLayerCount'?
> 
>     return GDALDatasetGetLayerCount(self);
> 
>            ^~~~~~~~~~~~~~~~~~~~~~~~
> 
>            GDALDatasetShadow_GetLayerCount
> 
> extensions/gdal_wrap.cpp:4313:16: note: 'GDALDatasetShadow_GetLayerCount'
> 
>       declared here
> 
> SWIGINTERN int GDALDatasetShadow_GetLayerCount(GDALDatasetShadow *self){
> 
>                ^
> 
> extensions/gdal_wrap.cpp:4318:47: error: use of undeclared identifier
> 
>       'GDALDatasetGetLayer'
> 
>     OGRLayerShadow* layer = (OGRLayerShadow*) GDALDatasetGetLayer(self,
> index);
> 
>                                               ^
> 
> extensions/gdal_wrap.cpp:4322:47: error: use of undeclared identifier
> 
>       'GDALDatasetGetLayerByName'; did you mean
> 
>       'GDALDatasetShadow_GetLayerByName'?
> 
>   ...layer = (OGRLayerShadow*) GDALDatasetGetLayerByName(self, layer_name);
> 
>                                ^~~~~~~~~~~~~~~~~~~~~~~~~
> 
>                                GDALDatasetShadow_GetLayerByName
> 
> extensions/gdal_wrap.cpp:4321:28: note: 'GDALDatasetShadow_GetLayerByName'
> 
>       declared here
> 
> SWIGINTERN OGRLayerShadow *GDALDatasetShadow_GetLayerByName(GDALDatasetS...
> 
>                            ^
> 
> extensions/gdal_wrap.cpp:4326:13: error: use of undeclared identifier
> 
>       'GDALDatasetTestCapability'; did you mean
> 
>       'GDALDatasetShadow_TestCapability'?
> 
>     return (GDALDatasetTestCapability(self, cap) > 0);
> 
>             ^~~~~~~~~~~~~~~~~~~~~~~~~
> 
>             GDALDatasetShadow_TestCapability
> 
> extensions/gdal_wrap.cpp:4325:17: note: 'GDALDatasetShadow_TestCapability'
> 
>       declared here
> 
> SWIGINTERN bool GDALDatasetShadow_TestCapability(GDALDatasetShadow *self...
> 
>                 ^
> 
> extensions/gdal_wrap.cpp:4336:47: error: use of undeclared identifier
> 
>       'GDALDatasetExecuteSQL'; did you mean 'GDALDatasetShadow_ExecuteSQL'?
> 
>     OGRLayerShadow* layer = (OGRLayerShadow*) GDALDatasetExecuteSQL(self,
> 
>                                               ^~~~~~~~~~~~~~~~~~~~~
> 
>                                               GDALDatasetShadow_ExecuteSQL
> 
> extensions/gdal_wrap.cpp:4335:28: note: 'GDALDatasetShadow_ExecuteSQL'
> declared
> 
>       here
> 
> SWIGINTERN OGRLayerShadow *GDALDatasetShadow_ExecuteSQL(GDALDatasetShado...
> 
>                            ^
> 
> extensions/gdal_wrap.cpp:4343:5: error: use of undeclared identifier
> 
>       'GDALDatasetReleaseResultSet'; did you mean
> 
>       'GDALDatasetShadow_ReleaseResultSet'?
> 
>     GDALDatasetReleaseResultSet(self, layer);
> 
>     ^~~~~~~~~~~~~~~~~~~~~~~~~~~
> 
>     GDALDatasetShadow_ReleaseResultSet
> 
> extensions/gdal_wrap.cpp:4342:17: note:
> 'GDALDatasetShadow_ReleaseResultSet'
> 
>       declared here
> 
> SWIGINTERN void GDALDatasetShadow_ReleaseResultSet(GDALDatasetShadow *se...
> 
>                 ^
> 
> extensions/gdal_wrap.cpp:4346:35: error: use of undeclared identifier
> 
>       'GDALDatasetGetStyleTable'; did you mean
> 
>       'GDALDatasetShadow_GetStyleTable'?
> 
>     return (OGRStyleTableShadow*) GDALDatasetGetStyleTable(self);
> 
>                                   ^~~~~~~~~~~~~~~~~~~~~~~~
> 
>                                   GDALDatasetShadow_GetStyleTable
> 
> extensions/gdal_wrap.cpp:4345:33: note: 'GDALDatasetShadow_GetStyleTable'
> 
>       declared here
> 
> SWIGINTERN OGRStyleTableShadow *GDALDatasetShadow_GetStyleTable(GDALData...
> 
>                                 ^
> 
> extensions/gdal_wrap.cpp:4350:9: error: use of undeclared identifier
> 
>       'GDALDatasetSetStyleTable'; did you mean
> 
>       'GDALDatasetShadow_SetStyleTable'?
> 
>         GDALDatasetSetStyleTable(self, (OGRStyleTableH) table);
> 
>         ^~~~~~~~~~~~~~~~~~~~~~~~
> 
>         GDALDatasetShadow_SetStyleTable
> 
> extensions/gdal_wrap.cpp:4348:17: note: 'GDALDatasetShadow_SetStyleTable'
> 
>       declared here
> 
> SWIGINTERN void GDALDatasetShadow_SetStyleTable(GDALDatasetShadow *self,...
> 
>                 ^
> 
> extensions/gdal_wrap.cpp:4350:40: error: cannot initialize a parameter of
> type
> 
>       'OGRStyleTableShadow *' (aka 'OGRStyleTableHS *') with an rvalue of
> type
> 
>       'OGRStyleTableH' (aka 'void *')
> 
>         GDALDatasetSetStyleTable(self, (OGRStyleTableH) table);
> 
>                                        ^~~~~~~~~~~~~~~~~~~~~~
> 
> extensions/gdal_wrap.cpp:4348:94: note: passing argument to parameter
> 'table'
> 
>       here
> 
>   ...*self,OGRStyleTableShadow *table){
> 
>                                 ^
> 
> extensions/gdal_wrap.cpp:4353:12: error: use of undeclared identifier
> 
>       'GDALDatasetStartTransaction'; did you mean
> 
>       'GDALDatasetShadow_StartTransaction'?
> 
>     return GDALDatasetStartTransaction(self, force);
> 
>            ^~~~~~~~~~~~~~~~~~~~~~~~~~~
> 
>            GDALDatasetShadow_StartTransaction
> 
> extensions/gdal_wrap.cpp:4352:19: note:
> 'GDALDatasetShadow_StartTransaction'
> 
>       declared here
> 
> SWIGINTERN OGRErr GDALDatasetShadow_StartTransaction(GDALDatasetShadow *...
> 
>                   ^
> 
> extensions/gdal_wrap.cpp:4356:12: error: use of undeclared identifier
> 
>       'GDALDatasetCommitTransaction'; did you mean
> 
>       'GDALDatasetShadow_CommitTransaction'?
> 
>     return GDALDatasetCommitTransaction(self);
> 
>            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
> 
>            GDALDatasetShadow_CommitTransaction
> 
> extensions/gdal_wrap.cpp:4355:19: note:
> 'GDALDatasetShadow_CommitTransaction'
> 
>       declared here
> 
> SWIGINTERN OGRErr GDALDatasetShadow_CommitTransaction(GDALDatasetShadow
> *self){
> 
>                   ^
> 
> extensions/gdal_wrap.cpp:4359:12: error: use of undeclared identifier
> 
>       'GDALDatasetRollbackTransaction'; did you mean
> 
>       'GDALDatasetShadow_RollbackTransaction'?
> 
>     return GDALDatasetRollbackTransaction(self);
> 
>            ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> 
>            GDALDatasetShadow_RollbackTransaction
> 
> extensions/gdal_wrap.cpp:4358:19: note:
> 'GDALDatasetShadow_RollbackTransaction'
> 
>       declared here
> 
> SWIGINTERN OGRErr GDALDatasetShadow_RollbackTransaction(GDALDatasetShado...
> 
>                   ^
> 
> extensions/gdal_wrap.cpp:4361:294: error: unknown type name
> 
>       'GDALRIOResampleAlg'; did you mean 'GDALResampleAlg'?
> 
>   ...*buf_line_space=0,GIntBig *buf_band_space=0,GDALRIOResampleAlg
> resample_...
> 
>                                                  ^~~~~~~~~~~~~~~~~~
> 
>                                                  GDALResampleAlg
> 
> /usr/local/Cellar/gdal/1.11.2_3/include/gdalwarper.h:56:3: note:
> 
>       'GDALResampleAlg' declared here
> 
> } GDALResampleAlg;
> 
>   ^
> 
> extensions/gdal_wrap.cpp:4361:326: error: use of undeclared identifier
> 
>       'GRIORA_NearestNeighbour'; did you mean 'GRA_NearestNeighbour'?
> 
>   ...resample_alg=GRIORA_NearestNeighbour,GDALProgressFunc
> callback=NULL,voi...
> 
>                   ^~~~~~~~~~~~~~~~~~~~~~~
> 
>                   GRA_NearestNeighbour
> 
> /usr/local/Cellar/gdal/1.11.2_3/include/gdalwarper.h:49:56: note:
> 
>       'GRA_NearestNeighbour' declared here
> 
>   /*! Nearest neighbour (select on one input pixel) */
> GRA_NearestNeighbour=0,
> 
>                                                        ^
> 
> extensions/gdal_wrap.cpp:4425:5: error: unknown type name
> 'GDALRasterIOExtraArg'
> 
>     GDALRasterIOExtraArg sExtraArg;
> 
>     ^
> 
> fatal error: too many errors emitted, stopping now [-ferror-limit=]
> 
> 4 warnings and 20 errors generated.
> 
> error: command '/usr/bin/clang' failed with exit status 1

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From thanghps at gmail.com  Mon Sep 28 19:36:00 2015
From: thanghps at gmail.com (Dao Thang)
Date: Tue, 29 Sep 2015 09:36:00 +0700
Subject: [gdal-dev] S57 SDK in .NET developer
Message-ID: <CANh0ZVSQ1AxSiwef1F9Kky5DhTOGd5hT+u+N=na8xnq7RVELyA@mail.gmail.com>

Hi everybody,

I'd like to announce i did the S57 SDK for .NET developer.

Anyone want this please contact me.

Thank you,
Thang.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150929/68b1287e/attachment.html>

From refriguy68 at yahoo.com  Tue Sep 29 00:39:47 2015
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Tue, 29 Sep 2015 07:39:47 +0000 (UTC)
Subject: [gdal-dev] PDF Image Rendering issues with Poppler
Message-ID: <435868488.2522801.1443512387209.JavaMail.yahoo@mail.yahoo.com>

 Gents,
I downloaded poppler 0.35.0 and used CMAKE to produce VS2012 solution files with freetype, jpeg, png, zip, cairo on Windows 7.? I downloaded and linked against static libraries of png, lcms2, and zlib.
I created a simple test PDF and uploaded at:??? http://www.filedropper.com/littlecmslogo
If you do not trust the hosted source, all I did was took little CMS Logo from their API specifications PDF?and copy/paste into a new MS Word document with a line of text above the logo.? Saved the file as a PDF. 
Here are a few questions I would like to be answered:
1. Can someone explain why I cannot render this particular image?? 2. What type of decoding/rendering issues am I having? 3. Did I forget to include another third-party package for poppler?? 4. What are the recommended settings when building poppler for GDAL usage (i.e., what items within poppler should/requires to be enabled) ?
5. If I cannot get an answer for that, how can I look into the PDF document hex data or dictionary to see how the image was stored?

Thanks in advance,
Bob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150929/678e63cd/attachment.html>

From even.rouault at spatialys.com  Tue Sep 29 00:54:15 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Sep 2015 09:54:15 +0200
Subject: [gdal-dev] PDF Image Rendering issues with Poppler
In-Reply-To: <435868488.2522801.1443512387209.JavaMail.yahoo@mail.yahoo.com>
References: <435868488.2522801.1443512387209.JavaMail.yahoo@mail.yahoo.com>
Message-ID: <201509290954.15202.even.rouault@spatialys.com>

Robert,

Works fine for me with poppler 0.35.0 on Linux and with GDAL trunk.

One key information you didn't mention is your GDAL version. If it is 1.11.2 
or older, poppler >= 0.31.0 isn't supported.
See https://trac.osgeo.org/gdal/ticket/6118

You can also test with the builds / SDKs at http://www.gisinternals.com/

Even

>  Gents,
> I downloaded poppler 0.35.0 and used CMAKE to produce VS2012 solution files
> with freetype, jpeg, png, zip, cairo on Windows 7.  I downloaded and
> linked against static libraries of png, lcms2, and zlib. I created a
> simple test PDF and uploaded at:   
> http://www.filedropper.com/littlecmslogo If you do not trust the hosted
> source, all I did was took little CMS Logo from their API specifications
> PDF and copy/paste into a new MS Word document with a line of text above
> the logo.  Saved the file as a PDF. Here are a few questions I would like
> to be answered:
> 1. Can someone explain why I cannot render this particular image?  2. What
> type of decoding/rendering issues am I having? 3. Did I forget to include
> another third-party package for poppler?  4. What are the recommended
> settings when building poppler for GDAL usage (i.e., what items within
> poppler should/requires to be enabled) ? 5. If I cannot get an answer for
> that, how can I look into the PDF document hex data or dictionary to see
> how the image was stored?
> 
> Thanks in advance,
> Bob

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Tue Sep 29 01:04:12 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Tue, 29 Sep 2015 11:04:12 +0300
Subject: [gdal-dev] S57 SDK in .NET developer
In-Reply-To: <CANh0ZVSQ1AxSiwef1F9Kky5DhTOGd5hT+u+N=na8xnq7RVELyA@mail.gmail.com>
References: <CANh0ZVSQ1AxSiwef1F9Kky5DhTOGd5hT+u+N=na8xnq7RVELyA@mail.gmail.com>
Message-ID: <560A45FC.2020402@gmail.com>

Hi, Thang,

What is the different between  S57 SDK for .NET and GDAL S57 driver with 
CSharp bindings?
There is the sources and API?

Best regards,
     Dmitry

29.09.2015 05:36, Dao Thang ?????:
>
> Hi everybody,
>
> I'd like to announce i did the S57 SDK for .NET developer.
>
> Anyone want this please contact me.
>
> Thank you,
> Thang.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150929/c26a06f1/attachment.html>

From even.rouault at spatialys.com  Tue Sep 29 01:27:14 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Sep 2015 10:27:14 +0200
Subject: [gdal-dev] How to deal with IIP image via WMS minidriver?
In-Reply-To: <CALc8-V+Ox5hY_Aa5t9-WipG3rZnjEc38fDmYEDcBb4kfUUt0Ug@mail.gmail.com>
References: <CALc8-VLVgSzL=tergaTMdCW9-ujyZ1DeutTHPNn6geOHx6PurA@mail.gmail.com>
	<CAH-RUCQU76bn8mjbjimYbU9O+mRg4xu+Q=UYma0ns52qyG=tjA@mail.gmail.com>
	<CALc8-V+Ox5hY_Aa5t9-WipG3rZnjEc38fDmYEDcBb4kfUUt0Ug@mail.gmail.com>
Message-ID: <201509291027.14318.even.rouault@spatialys.com>

Carlo,

I've just committed in GDAL trunk a IIP mini driver. Requires a IIP server
that supports the JTL extension (which was the case for the 2 online services I tested).
Online doc at http://www.gdal.org/frmt_wms.html will be refreshed in a few hours.

A few demos:

$ gdalinfo "IIP:http://merovingio.c2rmf.cnrs.fr/fcgi-bin/iipsrv.fcgi?FIF=globe.256x256.tif"
Driver: WMS/OGC Web Map Service
Files: none associated
Size is 86400, 43200
Coordinate System is `'
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,43200.0)
Upper Right (86400.0,    0.0)
Lower Right (86400.0,43200.0)
Center      (43200.0,21600.0)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Overviews: 43200x21600, 21600x10800, 10800x5400, 5400x2700, 2700x1350, 1350x675, 675x337, 337x168, 168x84
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Overviews: 43200x21600, 21600x10800, 10800x5400, 5400x2700, 2700x1350, 1350x675, 675x337, 337x168, 168x84
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Overviews: 43200x21600, 21600x10800, 10800x5400, 5400x2700, 2700x1350, 1350x675, 675x337, 337x168, 168x84

$ gdal_translate -of WMS  "IIP:http://merovingio.c2rmf.cnrs.fr/fcgi-bin/iipsrv.fcgi?FIF=globe.256x256.tif" globe.wms

$ cat globe.wms

<GDAL_WMS>
  <Service name="IIP">
    <ServerUrl>http://merovingio.c2rmf.cnrs.fr/fcgi-bin/iipsrv.fcgi?FIF=globe.256x256.tif</ServerUrl>
  </Service>
  <DataWindow>
    <SizeX>86400</SizeX>
    <SizeY>43200</SizeY>
    <TileLevel>9</TileLevel>
  </DataWindow>
  <BlockSizeX>256</BlockSizeX>
  <BlockSizeY>256</BlockSizeY>
  <BandsCount>3</BandsCount>
  <Cache />
</GDAL_WMS>

$ gdal_translate globe.wms out.tif -outsize 1024 0 -r bilinear

Best regards,

Even
 :
> Dear Petr,
> I'm very fond of georeferencer.com; for many topographic and geographic
> maps it's more effective than using a desktop application like QGIS.
> 
> The idea of implementing IIP/IIIF inside gdal has several reasons.
> The first one is due to rights over the images. They are meant for personal
> use, sometimes institutions are bound to contracts with private firms that
> would not allow them to put these on georeferencer (I'm strongly againt
> these agreements, but they are here to stay...), so hosting them elsewhere
> would be at least embarassing if not illegitimate (there should also be a
> way to open an arbitrary souce besides uploaded images, which is not the
> case).
> Another one is the ability of comparing historical maps one with another,
> which is sometimes useful, besides a comparison between an unreferenced
> image and Google Maps/Osm. Sometimes being able to use another reference,
> say a cadastral map or a very detailed one is compelling (which is a third
> reason).
> 
> I think that an alternative way to use IIP/IIIF may be useful and in the
> spirit of and Open Source project as gdal.
> It's obviously easy to download the tiles one by one (jot/curl) and
> assemble them in a sometimes huge file (montage), but a more dynamic way is
> a must in these cases. Evan confirmed it would be fairly easy modifying the
> WMS mini-driver to do it, but I think a pseudo-referenced (by pixel) VRT
> file could be forged (as a temporary provision), knowing the number of
> tiles in a row (easy to do) and the number of rows. I'll try to raise some
> funding for the project to help in this development. Meanwhile, if someone
> would like to try doing something on it, I'll be grateful and I will try to
> support this effort even afterwards.
> 
> c
> 
> On Tue, Sep 15, 2015 at 12:12 AM, Petr Pridal <petr.pridal at klokantech.com>
> 
> wrote:
> > Dear Carlo,
> > 
> > if you use our Georeferencer.com online service we can provide you with a
> > fast OGC WMTS service and crowdsourced online georeferencing of the
> > remote image sources such as IIIF or IIP done in a web browser.
> > 
> > Best regards,
> > 
> > Petr
> > 
> > On Thu, Sep 3, 2015 at 5:17 PM, Carlo A. Bertelli (Charta s.r.l.) <
> > 
> > bertelli at chartasrl.eu> wrote:
> >> Hello,
> >> 
> >> is there a way -- maybe using the WMS minidriver -- to open an IIP
> >> streamed picture?
> >> The online service is well documented (
> >> http://iipimage.sourceforge.net/documentation/) but unfortunately it
> >> shows that the protocol is not at all compliant with the WMTS or TMS or
> >> Google/SlippyMap schemas, even if it shares some of the ideas behind
> >> them. There is an also an implementation of a plugin for Leaflet that
> >> could help. Would anyone give some advice on how to deal with this
> >> common raster map source for historical maps?
> >> c

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Sep 29 03:45:43 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 29 Sep 2015 12:45:43 +0200
Subject: [gdal-dev] Motion: Adopt RFC 59.1: GDAL/OGR utilities as a library
Message-ID: <201509291245.43181.even.rouault@spatialys.com>

Hi,

Since no remarks have been done on the latest proposal, I move to adopt RFC 
59.1: GDAL/OGR utilities as a library

https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library

Starting with my +1,

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kusala9 at googlemail.com  Tue Sep 29 04:56:12 2015
From: kusala9 at googlemail.com (kusala nine)
Date: Tue, 29 Sep 2015 12:56:12 +0100
Subject: [gdal-dev] S57 SDK in .NET developer
In-Reply-To: <560A45FC.2020402@gmail.com>
References: <CANh0ZVSQ1AxSiwef1F9Kky5DhTOGd5hT+u+N=na8xnq7RVELyA@mail.gmail.com>
	<560A45FC.2020402@gmail.com>
Message-ID: <CAOn9mqfpuLAJuNXtr7fO+CrUrfjHodGWZ_4MzE9o+gsu7oowZw@mail.gmail.com>

hi, I work for a hydrographic office and S-57 is one of our core formats.
There's a LOT of information in S-57 and I'm really interested in data
which has been produced through an open SDK like this. Do you also produce
updates and deal with the topology aspects of the geometry? I'd be really
interested to know more and maybe evaluate any tools on this front.

cheers,

Jonathan.

On Tue, Sep 29, 2015 at 9:04 AM, Dmitry Baryshnikov <bishop.dev at gmail.com>
wrote:

> Hi, Thang,
>
> What is the different between  S57 SDK for .NET and GDAL S57 driver with
> CSharp bindings?
> There is the sources and API?
>
> Best regards,
>     Dmitry
>
> 29.09.2015 05:36, Dao Thang ?????:
>
>
> Hi everybody,
>
> I'd like to announce i did the S57 SDK for .NET developer.
>
> Anyone want this please contact me.
>
> Thank you,
> Thang.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150929/7364bda9/attachment-0001.html>

From dmorissette at mapgears.com  Tue Sep 29 05:50:07 2015
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue, 29 Sep 2015 08:50:07 -0400
Subject: [gdal-dev] Motion: Adopt RFC 59.1: GDAL/OGR utilities as a
 library
In-Reply-To: <201509291245.43181.even.rouault@spatialys.com>
References: <201509291245.43181.even.rouault@spatialys.com>
Message-ID: <560A88FF.7000101@mapgears.com>

On 2015-09-29 6:45 AM, Even Rouault wrote:
> Hi,
>
> Since no remarks have been done on the latest proposal, I move to adopt RFC
> 59.1: GDAL/OGR utilities as a library
>
> https://trac.osgeo.org/gdal/wiki/rfc59.1_utilities_as_a_library
>

+1

Daniel


-- 
Daniel Morissette
http://www.mapgears.com/
T: +1 418-696-5056 #201

http://evouala.com/ - Location Intelligence Made Easy

From refriguy68 at yahoo.com  Tue Sep 29 07:39:25 2015
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Tue, 29 Sep 2015 14:39:25 +0000 (UTC)
Subject: [gdal-dev] PDF Image Rendering issues with Poppler
In-Reply-To: <201509290954.15202.even.rouault@spatialys.com>
References: <201509290954.15202.even.rouault@spatialys.com>
Message-ID: <1950027299.2553876.1443537565266.JavaMail.yahoo@mail.yahoo.com>

Thanks Even for the quick reply.? ?I have an older build of GDAL with poppler that works rendering the page I provided, but I am attempting to perform a full custom build of poppler with static builds of all third-party libraries.? Now, I cannot view the logo and just wondering if someone could provide a little insight how Adobe PDF stores the Logo image an in XObject.?Is the image stored as a standard uncompressed RGB image, zipped image, png image?? I just need a little information on where to search within the Hex data of the PDF file to debug my problem.?This questions probably should fall under the poppler project.? I will do that and I just chose to use GDAL as I am using GDAL API interface for PDF read/write.??Bob 


     On Tuesday, September 29, 2015 12:54 AM, Even Rouault <even.rouault at spatialys.com> wrote:
   

 Robert,

Works fine for me with poppler 0.35.0 on Linux and with GDAL trunk.

One key information you didn't mention is your GDAL version. If it is 1.11.2 
or older, poppler >= 0.31.0 isn't supported.
See https://trac.osgeo.org/gdal/ticket/6118

You can also test with the builds / SDKs at http://www.gisinternals.com/

Even

>? Gents,
> I downloaded poppler 0.35.0 and used CMAKE to produce VS2012 solution files
> with freetype, jpeg, png, zip, cairo on Windows 7.? I downloaded and
> linked against static libraries of png, lcms2, and zlib. I created a
> simple test PDF and uploaded at:? 
> http://www.filedropper.com/littlecmslogo If you do not trust the hosted
> source, all I did was took little CMS Logo from their API specifications
> PDF and copy/paste into a new MS Word document with a line of text above
> the logo.? Saved the file as a PDF. Here are a few questions I would like
> to be answered:
> 1. Can someone explain why I cannot render this particular image?? 2. What
> type of decoding/rendering issues am I having? 3. Did I forget to include
> another third-party package for poppler?? 4. What are the recommended
> settings when building poppler for GDAL usage (i.e., what items within
> poppler should/requires to be enabled) ? 5. If I cannot get an answer for
> that, how can I look into the PDF document hex data or dictionary to see
> how the image was stored?
> 
> Thanks in advance,
> Bob

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com


  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150929/ad65c0c0/attachment.html>

From thanghps at gmail.com  Tue Sep 29 19:57:19 2015
From: thanghps at gmail.com (Dao Thang)
Date: Wed, 30 Sep 2015 09:57:19 +0700
Subject: [gdal-dev] S57 SDK in .NET developer
In-Reply-To: <560A45FC.2020402@gmail.com>
References: <CANh0ZVSQ1AxSiwef1F9Kky5DhTOGd5hT+u+N=na8xnq7RVELyA@mail.gmail.com>
	<560A45FC.2020402@gmail.com>
Message-ID: <CANh0ZVSgEjZ+G=NSgppfPEeocO0rgFhWzxFHPq_LCft3adVY2g@mail.gmail.com>

Hi Dmitry,

My S57 SDK absolutely is .NET framework, it is dependency with GDAL S57
driver.

Thanks.


?????????????????????????????????????????????

*??o Tr?ng Th?ng*
*Mobile:* 0919 262 988
T?ng 11 - Handi Resco Building
 521 Kim M? - H? N?i
*Email: thanghps at gmail.com <thanghps at gmail.com>*
*YM    **:** daothang2004*
?????????????????????????????????????????????

Google Talk: thanghps Skype: thanghps
Contact Me [image: Facebook] <http://facebook.com/thanghps>[image: Twitter]
<http://twitter.com/thanghps>


<http://my.wisestamp.com/link?u=mjd9tz39tqz5jn9m&site=www.wisestamp.com/email-install>


On Tue, Sep 29, 2015 at 3:04 PM, Dmitry Baryshnikov <bishop.dev at gmail.com>
wrote:

> Hi, Thang,
>
> What is the different between  S57 SDK for .NET and GDAL S57 driver with
> CSharp bindings?
> There is the sources and API?
>
> Best regards,
>     Dmitry
>
> 29.09.2015 05:36, Dao Thang ?????:
>
>
> Hi everybody,
>
> I'd like to announce i did the S57 SDK for .NET developer.
>
> Anyone want this please contact me.
>
> Thank you,
> Thang.
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150930/43a88c51/attachment.html>

From thanghps at gmail.com  Tue Sep 29 19:59:44 2015
From: thanghps at gmail.com (Dao Thang)
Date: Wed, 30 Sep 2015 09:59:44 +0700
Subject: [gdal-dev] S57 SDK in .NET developer
In-Reply-To: <CAOn9mqfpuLAJuNXtr7fO+CrUrfjHodGWZ_4MzE9o+gsu7oowZw@mail.gmail.com>
References: <CANh0ZVSQ1AxSiwef1F9Kky5DhTOGd5hT+u+N=na8xnq7RVELyA@mail.gmail.com>
	<560A45FC.2020402@gmail.com>
	<CAOn9mqfpuLAJuNXtr7fO+CrUrfjHodGWZ_4MzE9o+gsu7oowZw@mail.gmail.com>
Message-ID: <CANh0ZVRny-YCDrSB9ddue+6t90568NQynqhMDaZSsssv00kXMA@mail.gmail.com>

Hi kusala, currently my SDK is reader for S57 file, not writer. it can read
perfectly a S57 file. Thanks.


?????????????????????????????????????????????

*??o Tr?ng Th?ng*
*Mobile:* 0919 262 988
T?ng 11 - Handi Resco Building
 521 Kim M? - H? N?i
*Email: thanghps at gmail.com <thanghps at gmail.com>*
*YM    **:** daothang2004*
?????????????????????????????????????????????

Google Talk: thanghps Skype: thanghps
Contact Me [image: Facebook] <http://facebook.com/thanghps>[image: Twitter]
<http://twitter.com/thanghps>


<http://my.wisestamp.com/link?u=mjd9tz39tqz5jn9m&site=www.wisestamp.com/email-install>


On Tue, Sep 29, 2015 at 6:56 PM, kusala nine <kusala9 at googlemail.com> wrote:

> hi, I work for a hydrographic office and S-57 is one of our core formats.
> There's a LOT of information in S-57 and I'm really interested in data
> which has been produced through an open SDK like this. Do you also produce
> updates and deal with the topology aspects of the geometry? I'd be really
> interested to know more and maybe evaluate any tools on this front.
>
> cheers,
>
> Jonathan.
>
> On Tue, Sep 29, 2015 at 9:04 AM, Dmitry Baryshnikov <bishop.dev at gmail.com>
> wrote:
>
>> Hi, Thang,
>>
>> What is the different between  S57 SDK for .NET and GDAL S57 driver with
>> CSharp bindings?
>> There is the sources and API?
>>
>> Best regards,
>>     Dmitry
>>
>> 29.09.2015 05:36, Dao Thang ?????:
>>
>>
>> Hi everybody,
>>
>> I'd like to announce i did the S57 SDK for .NET developer.
>>
>> Anyone want this please contact me.
>>
>> Thank you,
>> Thang.
>>
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150930/8617e2ff/attachment-0001.html>

From even.rouault at spatialys.com  Wed Sep 30 02:02:07 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 30 Sep 2015 11:02:07 +0200
Subject: [gdal-dev] Russian and Portugese doc pages out of date
Message-ID: <201509301102.07367.even.rouault@spatialys.com>

Hi,

http://gdal.org/index_ru.html and http://gdal.org/index_br.html are out of 
date related to the English version. Anyone interested in updating them 
(actually their master version in doc/br and doc/ru) ? 

See https://trac.osgeo.org/gdal/ticket/5996

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From bishop.dev at gmail.com  Wed Sep 30 02:06:40 2015
From: bishop.dev at gmail.com (Dmitry Baryshnikov)
Date: Wed, 30 Sep 2015 12:06:40 +0300
Subject: [gdal-dev] Russian and Portugese doc pages out of date
In-Reply-To: <201509301102.07367.even.rouault@spatialys.com>
References: <201509301102.07367.even.rouault@spatialys.com>
Message-ID: <560BA620.50004@gmail.com>

Hi,

I'll update Russian version. What about ticket which is about both 
languages - you'll close it then both languages be updated?

Best regards,
     Dmitry

30.09.2015 12:02, Even Rouault ?????:
> Hi,
>
> http://gdal.org/index_ru.html and http://gdal.org/index_br.html are out of
> date related to the English version. Anyone interested in updating them
> (actually their master version in doc/br and doc/ru) ?
>
> See https://trac.osgeo.org/gdal/ticket/5996
>
> Even
>


From even.rouault at spatialys.com  Wed Sep 30 02:11:22 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 30 Sep 2015 11:11:22 +0200
Subject: [gdal-dev] Russian and Portugese doc pages out of date
In-Reply-To: <560BA620.50004@gmail.com>
References: <201509301102.07367.even.rouault@spatialys.com>
	<560BA620.50004@gmail.com>
Message-ID: <201509301111.22555.even.rouault@spatialys.com>

Le mercredi 30 septembre 2015 11:06:40, Dmitry Baryshnikov a ?crit :
> Hi,
> 
> I'll update Russian version.

Thanks Dmitry

> What about ticket which is about both
> languages - you'll close it then both languages be updated?

Well, if nobody steps up for the portugese version, we might just delete it.

> 
> Best regards,
>      Dmitry
> 
> 30.09.2015 12:02, Even Rouault ?????:
> > Hi,
> > 
> > http://gdal.org/index_ru.html and http://gdal.org/index_br.html are out
> > of date related to the English version. Anyone interested in updating
> > them (actually their master version in doc/br and doc/ru) ?
> > 
> > See https://trac.osgeo.org/gdal/ticket/5996
> > 
> > Even
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gane.prog at gmail.com  Wed Sep 30 06:32:40 2015
From: gane.prog at gmail.com (Gane R)
Date: Wed, 30 Sep 2015 19:02:40 +0530
Subject: [gdal-dev] GetFIDColumn : FID Column for ESRI Shape file
Message-ID: <CALMrLdAz_6CO=L4dhg1Dupzk-URgKy6-7rSd0WqdjZOWq6udHQ@mail.gmail.com>

Hi,

Is it that OGRLayer::GetFIDColumn will return empty string for Shapefile I
have or it will be always empty for all shape files?

If I can see FID Column for a shape file in any other application can you
name any one of them


Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150930/606927d2/attachment.html>

From even.rouault at spatialys.com  Wed Sep 30 06:37:27 2015
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 30 Sep 2015 15:37:27 +0200
Subject: [gdal-dev] GetFIDColumn : FID Column for ESRI Shape file
In-Reply-To: <CALMrLdAz_6CO=L4dhg1Dupzk-URgKy6-7rSd0WqdjZOWq6udHQ@mail.gmail.com>
References: <CALMrLdAz_6CO=L4dhg1Dupzk-URgKy6-7rSd0WqdjZOWq6udHQ@mail.gmail.com>
Message-ID: <201509301537.27670.even.rouault@spatialys.com>

Le mercredi 30 septembre 2015 15:32:40, Gane R a ?crit :
> Hi,
> 
> Is it that OGRLayer::GetFIDColumn will return empty string for Shapefile I
> have or it will be always empty for all shape files?

Always empty

> 
> If I can see FID Column for a shape file in any other application can you
> name any one of them

They likely use a conventionnal name. But technically there's no field in the 
.dbf or the .shp to hold the name of the FID.
Also good to know: the OGR shapefile driver starts its numbering at 0 for the 
FID.

> 
> 
> Gane

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From lucena_ivan at hotmail.com  Wed Sep 30 06:37:22 2015
From: lucena_ivan at hotmail.com (Ivan Lucena)
Date: Wed, 30 Sep 2015 09:37:22 -0400
Subject: [gdal-dev] Russian and Portugese doc pages out of date
In-Reply-To: <201509301111.22555.even.rouault@spatialys.com>
References: <201509301102.07367.even.rouault@spatialys.com>,
	<560BA620.50004@gmail.com>,
	<201509301111.22555.even.rouault@spatialys.com>
Message-ID: <BLU173-W18B7CD4A2D1BCB83FCE416904D0@phx.gbl>

I can do the Portuguese. 

> From: even.rouault at spatialys.com
> To: gdal-dev at lists.osgeo.org
> Date: Wed, 30 Sep 2015 11:11:22 +0200
> Subject: Re: [gdal-dev] Russian and Portugese doc pages out of date
> 
> Le mercredi 30 septembre 2015 11:06:40, Dmitry Baryshnikov a ?crit :
> > Hi,
> > 
> > I'll update Russian version.
> 
> Thanks Dmitry
> 
> > What about ticket which is about both
> > languages - you'll close it then both languages be updated?
> 
> Well, if nobody steps up for the portugese version, we might just delete it.
> 
> > 
> > Best regards,
> >      Dmitry
> > 
> > 30.09.2015 12:02, Even Rouault ?????:
> > > Hi,
> > > 
> > > http://gdal.org/index_ru.html and http://gdal.org/index_br.html are out
> > > of date related to the English version. Anyone interested in updating
> > > them (actually their master version in doc/br and doc/ru) ?
> > > 
> > > See https://trac.osgeo.org/gdal/ticket/5996
> > > 
> > > Even
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150930/2db322ea/attachment.html>

From gane.prog at gmail.com  Wed Sep 30 07:27:36 2015
From: gane.prog at gmail.com (Gane R)
Date: Wed, 30 Sep 2015 19:57:36 +0530
Subject: [gdal-dev] GetFIDColumn : FID Column for ESRI Shape file
In-Reply-To: <201509301537.27670.even.rouault@spatialys.com>
References: <CALMrLdAz_6CO=L4dhg1Dupzk-URgKy6-7rSd0WqdjZOWq6udHQ@mail.gmail.com>
	<201509301537.27670.even.rouault@spatialys.com>
Message-ID: <CALMrLdDe5Aez7uFyYgsn2TkEZ-_ws5S=j5x0Ozq-dLi63i+i0g@mail.gmail.com>

Now for FileGeoDB datasets
====================
1. For FileGeoDB GetFIDColumn returns a column name
for some data set it is a part of feature values with _1, for some there
doesn't exist any feature value

2. GetFID returns a number for some data set and it is sequential, for
others the value returned are not in order.

Can any provide any links or pointer or enlighten me on this stuff.

Gane

On Wed, Sep 30, 2015 at 7:07 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Le mercredi 30 septembre 2015 15:32:40, Gane R a ?crit :
> > Hi,
> >
> > Is it that OGRLayer::GetFIDColumn will return empty string for Shapefile
> I
> > have or it will be always empty for all shape files?
>
> Always empty
>
> >
> > If I can see FID Column for a shape file in any other application can you
> > name any one of them
>
> They likely use a conventionnal name. But technically there's no field in
> the
> .dbf or the .shp to hold the name of the FID.
> Also good to know: the OGR shapefile driver starts its numbering at 0 for
> the
> FID.
>
> >
> >
> > Gane
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150930/5c13530a/attachment.html>

From gane.prog at gmail.com  Wed Sep 30 07:50:21 2015
From: gane.prog at gmail.com (Gane R)
Date: Wed, 30 Sep 2015 20:20:21 +0530
Subject: [gdal-dev] GetFIDColumn for FileGeoDB
Message-ID: <CALMrLdC2dLtHqVuKFUcMUwYD8M_sUsWKcPwyWd9eF0DZWvnYJg@mail.gmail.com>

1. For FileGeoDB GetFIDColumn returns a column name
for some data set it is a part of feature values with _1, for some there
doesn't exist any feature value with this column name

2. GetFID returns a number for some data set and it is sequential, for
others the value returned are not in order.

Can any one provide any links or pointer or enlighten me on this stuff.

Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150930/56589e55/attachment.html>

From gane.prog at gmail.com  Wed Sep 30 07:51:33 2015
From: gane.prog at gmail.com (Gane R)
Date: Wed, 30 Sep 2015 20:21:33 +0530
Subject: [gdal-dev] GetFIDColumn : FID Column for ESRI Shape file
In-Reply-To: <CALMrLdDe5Aez7uFyYgsn2TkEZ-_ws5S=j5x0Ozq-dLi63i+i0g@mail.gmail.com>
References: <CALMrLdAz_6CO=L4dhg1Dupzk-URgKy6-7rSd0WqdjZOWq6udHQ@mail.gmail.com>
	<201509301537.27670.even.rouault@spatialys.com>
	<CALMrLdDe5Aez7uFyYgsn2TkEZ-_ws5S=j5x0Ozq-dLi63i+i0g@mail.gmail.com>
Message-ID: <CALMrLdBC+MJS9eykhEWbWYcRCb92AMHwgpf5a1RB4bCimF2Z_w@mail.gmail.com>

sorry for posting on this thread.

On Wed, Sep 30, 2015 at 7:57 PM, Gane R <gane.prog at gmail.com> wrote:

> Now for FileGeoDB datasets
> ====================
> 1. For FileGeoDB GetFIDColumn returns a column name
> for some data set it is a part of feature values with _1, for some there
> doesn't exist any feature value
>
> 2. GetFID returns a number for some data set and it is sequential, for
> others the value returned are not in order.
>
> Can any provide any links or pointer or enlighten me on this stuff.
>
> Gane
>
> On Wed, Sep 30, 2015 at 7:07 PM, Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>> Le mercredi 30 septembre 2015 15:32:40, Gane R a ?crit :
>> > Hi,
>> >
>> > Is it that OGRLayer::GetFIDColumn will return empty string for
>> Shapefile I
>> > have or it will be always empty for all shape files?
>>
>> Always empty
>>
>> >
>> > If I can see FID Column for a shape file in any other application can
>> you
>> > name any one of them
>>
>> They likely use a conventionnal name. But technically there's no field in
>> the
>> .dbf or the .shp to hold the name of the FID.
>> Also good to know: the OGR shapefile driver starts its numbering at 0 for
>> the
>> FID.
>>
>> >
>> >
>> > Gane
>>
>> --
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20150930/a24c1d55/attachment-0001.html>

