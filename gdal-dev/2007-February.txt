From warmerdam at pobox.com  Thu Feb  1 04:31:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] GRIB Driver
Message-ID: <45C1B38C.5070108@pobox.com>

Folks,

I have introduced the GDAL GRIB driver by Bas Retsios into GDAL SVN.  However,
since it consists of roughly 45000 lines of code, produces copious warnings
and I haven't really done a proper IP review, I have avoided dumping it into
the main tree.

Instead I have placed it in a temporary tree I'm calling /spike.  If you
pull the grib driver from there and dump it in your frmts directory (as
well as svn updating your main tree) you should be able to build grib
support - at least on unix (windows should follow shortly).

eg.
cd ~/gdal/frmts
svn checkout https://svn.osgeo.org/svn/gdal/trunk/spike/grib grib
cd ..
svn update
./configure
make

Those interested in GRIB format are encouraged to give it a quick spin,
though it should be considered preliminary.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Horst.Duester at bd.so.ch  Thu Feb  1 10:35:07 2007
From: Horst.Duester at bd.so.ch (=?ISO-8859-1?Q?D=FCster_Horst?=)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Oracle OCI support
Message-ID: <H00002eb00a95a68.1170344106.SRSOFAIOI6145.ktso.ch@MHS>

I try to configure gdal-1.4.0 with ogr OCI support. $ORACLE_HOME is
present and readable. Unfortunately ./configure
--with-oci=/opt/ora1/app/oracle/product/9.2.0.4/rdbms/public
reports 

checking for Oracle OCI headers in
/opt/ora1/app/oracle/product/9.2.0.4/rdbms/public... not found

The mentioned dirctory contains three header files:

nzerror.h
nzt.h
ociextp.h


Everything looks fine what is wrong????


I'll appeciate any hint.

With best regards
Horst
------------------------------------------------

Dr. Horst D?ster
GIS-Koordinator, Stv. Amtschef

Kanton Solothurn
Bau- und Justizdepartement
Amt f?r Geoinformation
SO!GIS Koordination
R?tistrasse 4
CH-4501 Solothurn

Telefon ++41(0)32 627 25 32
Telefax ++41(0)32 627 22 14

mailto:horst.duester@bd.so.ch
http://www.agi.so.ch


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/b93d8611/attachment.html
From mateusz at loskot.net  Thu Feb  1 11:16:39 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Oracle OCI support
In-Reply-To: <H00002eb00a95a68.1170344106.SRSOFAIOI6145.ktso.ch@MHS>
References: <H00002eb00a95a68.1170344106.SRSOFAIOI6145.ktso.ch@MHS>
Message-ID: <45C21267.2030701@loskot.net>

D?ster Horst wrote:
> I try to configure gdal-1.4.0 with ogr OCI support. $ORACLE_HOME is
> present and readable. Unfortunately ./configure
> --with-oci=/opt/ora1/app/oracle/product/9.2.0.4/rdbms/public
> reports
> 
> checking for Oracle OCI headers in
> /opt/ora1/app/oracle/product/9.2.0.4/rdbms/public... not found

There was a problem with detecting older Oracle versions.
It was fixed after GDAL 1.4.0 release.

Could you try to build latest version from SVN
and see if it works for your Oracle version?
That would be very helpful to unify the Oracle detection for versions
older than 10.x.

> The mentioned dirctory contains three header files:
> 
> nzerror.h
> nzt.h
> ociextp.h

FYI, the OCI driver for OGR uses oci.h header - main header of OCI API
and the oci.h file is checked for.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From marc.jacquin at magellium.fr  Thu Feb  1 11:20:06 2007
From: marc.jacquin at magellium.fr (Marc Jacquin)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Text field size ogr2ogr PostgreSQL to MIF/MID
In-Reply-To: <441EAF1E.5040009@tkk.fi>
References: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>
	<441EAF1E.5040009@tkk.fi>
Message-ID: <007e01c7461c$d75b1e10$9601a8c0@PC150>


Hi all,

I am using ogr2ogr to convert a PG table into MIF/MID. 

The table fields are varchar(x) or char(x) type and the field width is never
more than let say 50.

It seems that ogr2ogr forces text fields to be 254 wide. But when you get
more than 20 fields the record size exceeds the 4 K limit of MapInfo 6.

Is there a PG usable type so that ogr2ogr would keep the width for
exporting?

Thanks for helping.

Marc

Here is the mif header :
Version 300
Charset "Neutral"
Delimiter ","
Columns 20
  produit Char(254)
  satellite Char(254)
  kj Char(254)
  dateacq Char(254)
  heureacq Char(254)
  gains Char(254)
  notenuag Char(254)
  noteneig Char(254)
  decalage Char(254)
  centre Char(254)
  coinnw Char(254)
  coinne Char(254)
  coinsw Char(254)
  coinse Char(254)
  angleinc Char(254)
  bandspec Char(254)
  pixelsat Char(254)
  sceneid Char(254)
  dynamin Char(254)
  dynamax Char(254)


From ealpert at digitalglobe.com  Thu Feb  1 11:34:55 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:37 2007
Subject: [Gdal-dev] Oracle OCI support
References: <H00002eb00a95a68.1170344106.SRSOFAIOI6145.ktso.ch@MHS>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233DA3B99@COMAIL01.digitalglobe.com>

I ran into this problem too with the 9.2.0.4 OCI client libraries.

 

The Mateusz Loskot has fixed this problem in the CVS version of GDAL. If grabbing the nightly bundle is not an option email me directly (I have to review what I did) or drop in the IRC channel.

 

-e

 

________________________________

From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of D?ster Horst
Sent: Thursday, February 01, 2007 8:35 AM
To: gdal-dev
Subject: [Gdal-dev] Oracle OCI support

 

I try to configure gdal-1.4.0 with ogr OCI support. $ORACLE_HOME is present and readable. Unfortunately ./configure --with-oci=/opt/ora1/app/oracle/product/9.2.0.4/rdbms/public
reports 

 

checking for Oracle OCI headers in /opt/ora1/app/oracle/product/9.2.0.4/rdbms/public... not found

 

The mentioned dirctory contains three header files:

 

nzerror.h
nzt.h
ociextp.h

 

Everything looks fine what is wrong????

 

I'll appeciate any hint.

 

With best regards
Horst
------------------------------------------------

 

Dr. Horst D?ster
GIS-Koordinator, Stv. Amtschef

 

Kanton Solothurn
Bau- und Justizdepartement
Amt f?r Geoinformation
SO!GIS Koordination
R?tistrasse 4
CH-4501 Solothurn

 

Telefon ++41(0)32 627 25 32
Telefax ++41(0)32 627 22 14

 

mailto:horst.duester@bd.so.ch
http://www.agi.so.ch

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/4b10d8b5/attachment.html
From ealpert at digitalglobe.com  Thu Feb  1 11:58:35 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Text field size ogr2ogr PostgreSQL to MIF/MID
References: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com><441EAF1E.5040009@tkk.fi>
	<007e01c7461c$d75b1e10$9601a8c0@PC150>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233DA3BA4@COMAIL01.digitalglobe.com>


Perhaps you could use pgsql2shp and then translate the .shp file into
MIF/MID.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Marc Jacquin
Sent: Thursday, February 01, 2007 9:20 AM
To: 'Gdal'
Subject: [Gdal-dev] Text field size ogr2ogr PostgreSQL to MIF/MID


Hi all,

I am using ogr2ogr to convert a PG table into MIF/MID. 

The table fields are varchar(x) or char(x) type and the field width is
never
more than let say 50.

It seems that ogr2ogr forces text fields to be 254 wide. But when you
get
more than 20 fields the record size exceeds the 4 K limit of MapInfo 6.

Is there a PG usable type so that ogr2ogr would keep the width for
exporting?

Thanks for helping.

Marc

Here is the mif header :
Version 300
Charset "Neutral"
Delimiter ","
Columns 20
  produit Char(254)
  satellite Char(254)
  kj Char(254)
  dateacq Char(254)
  heureacq Char(254)
  gains Char(254)
  notenuag Char(254)
  noteneig Char(254)
  decalage Char(254)
  centre Char(254)
  coinnw Char(254)
  coinne Char(254)
  coinsw Char(254)
  coinse Char(254)
  angleinc Char(254)
  bandspec Char(254)
  pixelsat Char(254)
  sceneid Char(254)
  dynamin Char(254)
  dynamax Char(254)

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Feb  1 12:09:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Text field size ogr2ogr PostgreSQL to MIF/MID
In-Reply-To: <007e01c7461c$d75b1e10$9601a8c0@PC150>
References: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>
	<441EAF1E.5040009@tkk.fi> <007e01c7461c$d75b1e10$9601a8c0@PC150>
Message-ID: <45C21EB0.3080206@pobox.com>

Marc Jacquin wrote:
> Hi all,
> 
> I am using ogr2ogr to convert a PG table into MIF/MID. 
> 
> The table fields are varchar(x) or char(x) type and the field width is never
> more than let say 50.
> 
> It seems that ogr2ogr forces text fields to be 254 wide. But when you get
> more than 20 fields the record size exceeds the 4 K limit of MapInfo 6.
> 
> Is there a PG usable type so that ogr2ogr would keep the width for
> exporting?

Marc,

It looks like the CHARACTER(n) field type in Postgres will be treated by
OGR as a field with a particular width.  The code that decides whether
to associate a width with text fields in the driver looks like this:


         pszType = PQgetvalue(hResult, iRecord, 1 );
         pszFormatType = PQgetvalue(hResult,iRecord,3);

         ...

         else if( EQUAL(pszType,"bpchar") || EQUAL(pszType,"varchar") )
         {
             int nWidth;

             nWidth = atoi(PQgetvalue(hResult,iRecord,2));
             if( nWidth == -1 )
             {
                 if( EQUALN(pszFormatType,"character(",10) )
                     nWidth = atoi(pszFormatType+10);
                 else if( EQUALN(pszFormatType,"character varying(",18) )
                     nWidth = atoi(pszFormatType+18);
                 else
                     nWidth = 0;
             }
             oField.SetType( OFTString );
             oField.SetWidth( nWidth );
         }

I'm a bit confused about the distinction between "type" and "format
type".  The pszType is the typname field from the pg_type table. while
the pszFormatType is the result of calling the SQL format_type() function
for the attribute type id and attribute type "mod".  So I don't really
know how this all corresponds back to actual SQL declarations for fields.

We do often run into this problem though, of fields in one datasource
having to fixed length associated with them, but having to write to
another format where explicit lengths are required for everything.  Usually
we do as in mapinfo which is to pick the widest width supported but at
a substantial cost.

I think it would be desirable to have a commandline switch to ogr2ogr
(perhaps supported by a library function) to do a first pass scan of
the feature set to identify the longest value that occurs for each
variable width text field and then use that for the width (or perhaps
a width that is modestly larger than the longest current occurance).

It might also be prudent to add a command line switch to ogr2ogr to
support overriding widths for particular fields.

If you would be willing to file an enhancement request in the GDAL/OGR
bugzilla capturing all this, I'll see if something can be done ...
eventually.  For now, you might dig into the CHARACTER(n) type in
postgres to see if it helps.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Allan.Meek at drdc-rddc.gc.ca  Thu Feb  1 13:31:58 2007
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Detecting endianness of a raw image
Message-ID: <2E58C246F17003499C141D334794D04902123BCA@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi,

I'm working on a driver for a 32-bit complex image format (flat binary
image file and text header file). The image can be either big or little
endian format; unfortunately, the header file does not specify this. Is
there a reliable way to determine the endianness of this type of file?
I've searched for this, but I've only found methods to determine the
endianness of an operating system.

Thanks,
Allan Meek


From mateusz at loskot.net  Thu Feb  1 15:41:05 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Oracle OCI support
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233DA3B99@COMAIL01.digitalglobe.com>
References: <H00002eb00a95a68.1170344106.SRSOFAIOI6145.ktso.ch@MHS>
	<8B319E5A30FF4A48BE7EEAAF609DB233DA3B99@COMAIL01.digitalglobe.com>
Message-ID: <45C25061.9040505@loskot.net>

Ethan Alpert wrote:
> I ran into this problem too with the 9.2.0.4 OCI client libraries.
> 
> The Mateusz Loskot has fixed this problem in the CVS version of GDAL. If
> grabbing the nightly bundle is not an option email me directly (I have
> to review what I did) or drop in the IRC channel.

As I memorize, the fix was also back ported to the branches/1.4 branch.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From matt.wilkie at gov.yk.ca  Thu Feb  1 15:59:53 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] bug: gdalwarp producing larger files than no compression
	at all
Message-ID: <45C254C9.5000602@gov.yk.ca>

Dear GDAL,

gdalwarp (fwtools 1.1.4, win32) when using combinations of resampling, 
pixel interleave and compression is producing files which are larger 
than if no compression at all is used, up to twice as large.

    gdalwarp -co compress=lzw -co interleave=pixel -rb \
      source.tif gw_lzw-pix-rb.tif

    gdal_translate -co compress=none -co interleave=pixel  \
      gw_lzw-pix-rb.tif tr_no-comp_pix-int.tif

Result:

    328,390 source.tif
    524,786 gw_lzw-pix-rb.tif
    328,274 tr_no-comp_pix-int.tif

I files a bug with more info and data samples at 
http://bugzilla.remotesensing.org/show_bug.cgi?id=1470

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mateusz at loskot.net  Thu Feb  1 16:11:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Text field size ogr2ogr PostgreSQL to MIF/MID
In-Reply-To: <45C21EB0.3080206@pobox.com>
References: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>	<441EAF1E.5040009@tkk.fi>
	<007e01c7461c$d75b1e10$9601a8c0@PC150> <45C21EB0.3080206@pobox.com>
Message-ID: <45C25771.6020705@loskot.net>

Frank Warmerdam wrote:
> Marc Jacquin wrote:
>> Hi all,
>>
>> I am using ogr2ogr to convert a PG table into MIF/MID.
>> The table fields are varchar(x) or char(x) type and the field width is
>> never
>> more than let say 50.
>>
>> It seems that ogr2ogr forces text fields to be 254 wide. But when you get
>> more than 20 fields the record size exceeds the 4 K limit of MapInfo 6.
>>
>> Is there a PG usable type so that ogr2ogr would keep the width for
>> exporting?
> 
> Marc,
> 
> It looks like the CHARACTER(n) field type in Postgres will be treated by
> OGR as a field with a particular width.  The code that decides whether
> to associate a width with text fields in the driver looks like this:

Frank,

Isn't it correct assumption?
I'm not sure I understand where is the problem here, but as I know,
CHARACTER(n) type should be handled as fixed-width type.


>         pszType = PQgetvalue(hResult, iRecord, 1 );
>         pszFormatType = PQgetvalue(hResult,iRecord,3);
> 
>         ...
> 
>         else if( EQUAL(pszType,"bpchar") || EQUAL(pszType,"varchar") )
>         {
>             int nWidth;
> 
>             nWidth = atoi(PQgetvalue(hResult,iRecord,2));
>             if( nWidth == -1 )
>             {
>                 if( EQUALN(pszFormatType,"character(",10) )
>                     nWidth = atoi(pszFormatType+10);
>                 else if( EQUALN(pszFormatType,"character varying(",18) )
>                     nWidth = atoi(pszFormatType+18);
>                 else
>                     nWidth = 0;
>             }
>             oField.SetType( OFTString );
>             oField.SetWidth( nWidth );
>         }


I may not understand rationale behind the code above well, but using
libpq it's possible to retrieve lenght of character type from result
set, using PQfmod() function:

//////////////////////////////////////////////////////
const int VARCHAR_HDRSZ = 4; // usually, equal to sizeof(int)

int fmod = PQfmod(hResult, iColumnIndex);
if (-1 != fmod)
   length = (fmod - VARCHAR_HDRSZ);
//////////////////////////////////////////////////////

For character columns with specified size (for both types,
variable-lenght or fixed-lenght) during  table creation, the PQfmod
returns always non -1 value, so the size can be retrieved.

However, if a table was created using 'text' type or 'character varying'
(varchar) without a length specifier, then PQfmod() returns -1,
what means there is no limit of size specified.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ed at topozone.com  Thu Feb  1 16:40:11 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] bug: gdalwarp producing larger files than no
	compressionat all
In-Reply-To: <45C254C9.5000602@gov.yk.ca>
References: <45C254C9.5000602@gov.yk.ca>
Message-ID: <4BF377919225F449BB097CB76FFE9BC801987E15@ptolemy.topozone.com>

Matt -

For any compression algorithm there are some data sets which will end up
being larger than uncompressed (or at least no smaller).  It is entirely
possible that the LZW compression of that file doesn't work well (LZW
isn't great for photographs, for example).

Did you try using:

	geotifcp -c lzw tr_no-comp_pix-int.tif gw_lzw-pix-rb-new.tif

To see what happens if you try to convert the uncompressed TIF to
LZW-compressed using geotifcp?  That will tell you whether there's
actually a real problem here or not.  I don't know what strip size
(rows/strip, the -r parameter to geotifcp) GDAL uses, so you may not get
identical results.  You might also try

	geotifcp -c lzw -r 1 tr_no-comp_pix-int.tif
gw_lzw-pix-rb-new.tif

for comparison.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed@topozone.com

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matt Wilkie
Sent: Thursday, February 01, 2007 4:00 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] bug: gdalwarp producing larger files than no
compressionat all

Dear GDAL,

gdalwarp (fwtools 1.1.4, win32) when using combinations of resampling,
pixel interleave and compression is producing files which are larger
than if no compression at all is used, up to twice as large.

    gdalwarp -co compress=lzw -co interleave=pixel -rb \
      source.tif gw_lzw-pix-rb.tif

    gdal_translate -co compress=none -co interleave=pixel  \
      gw_lzw-pix-rb.tif tr_no-comp_pix-int.tif

Result:

    328,390 source.tif
    524,786 gw_lzw-pix-rb.tif
    328,274 tr_no-comp_pix-int.tif

I files a bug with more info and data samples at
http://bugzilla.remotesensing.org/show_bug.cgi?id=1470

--
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From matt.wilkie at gov.yk.ca  Thu Feb  1 17:18:47 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] gdalwarp should keep prj info (?)
Message-ID: <45C26747.6060604@gov.yk.ca>

Hi All,

Currently gdalwarp drops the projection info if it is not specifically
assigned. I think it should either keep all projection info unless 
directed otherwise, or, have an option to retain it.

Eg.

gdalwarp inimg.tif outimg.tif ---> keeps prj
gdalwarp -t_srs SAME inimg.tif outimg.tif ---> keeps prj
gdalwarp -t_srs NONE inimg.tif outimg.tif ---> drops prj
gdalwarp -t_srs [a proj4 string] inimg.tif outimg.tif ---> transforms to 
new prj

http://bugzilla.remotesensing.org/show_bug.cgi?id=1471

Why is this an issue? One could reasonably wonder why use gdalwarp 
unless one IS going to perform a transform. It does have the name WARP 
after all. Well, gdalwarp has these handy options that other commands 
like gdal_translate do not have. For instance I like being able to 
convert values to nodata in the output:

    gdalwarp -srcnodata 148 -dstnodat 255 ...

Or resample using desired pixel dimensions in map units rather than row 
and column dimensions, and perhaps use cubic spline resampling :

    gdalwarp -tr 250 -rcs ...

Or control the megabytes of ram to use:

    gdalwarp -wo 500 ...

So maybe the real request is that there be more shared functions between 
the two. Or perhaps they shouldn't be two separate programs at all, just 
a single one called "gdal". (?)


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Thu Feb  1 17:46:32 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] bug: gdalwarp producing larger files than no
	compressionat all
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC801987E15@ptolemy.topozone.com>
References: <45C254C9.5000602@gov.yk.ca>
	<4BF377919225F449BB097CB76FFE9BC801987E15@ptolemy.topozone.com>
Message-ID: <45C26DC8.2010208@gov.yk.ca>

Hi Ed,

For me "geotifcp -c lzw" yields nearly identical results to 
"gdal_translate -co compress=lzw", only 11 bytes difference when 
compressing 270mb. Did you miss that it is with gdalwarp that I'm seeing 
the larger files?  I've also tried with packbits and get similar results 
so it's not lzw specific.


I didn't know that lzw is not so hot for photos, thanks!

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From Peter.Rushforth at statcan.ca  Thu Feb  1 23:07:49 2007
From: Peter.Rushforth at statcan.ca (Peter.Rushforth@statcan.ca)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] bug:  ogr2ogr gml output
Message-ID: <AB38021D12570A4AB907F442AE548807021B9378@stcem04.statcan.ca>

Hi,

Two bugs, in fact:

i) When an input gml file contains a feature which contains
a property of the same name (although beginning with a lower-case letter
as per gml conventions), ogr2ogr gets confused.  It appears that
it is not case-sensitive.  When the output is also gml, spurious
gml:featureMembers appear, as the simple property element has been
mistaken for the complex feature element.  The issue is reflected
in the gfs file produced (samples attached).
eg. ogr2ogr -s_srs NAD83 -t_srs EPSG:3347 -f GML messed_up_features.gml gecu000e07g_e.gml  

ii)  When translating a shape file with accented characters into gml,
ogr2ogr outputs a file which it says is utf-8 encoded, but which won't
parse and which contains iso-8859-1 codepoints. (sample attached).
eg. ogr2ogr -f GML bad_encoding.gml shp/geco000e07a_f.shp

Hope these are clear!

Thanks for a great tool (that supports gml :-)),

Peter Rushforth
Geography Division
Statistics Canada
Ottawa Ontario
K1A 0T6
-------------- next part --------------
A non-text attachment was scrubbed...
Name: messed_up_features.xsd
Type: application/octet-stream
Size: 2188 bytes
Desc: messed_up_features.xsd
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/20a2caea/messed_up_features.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bad_encoding.xsd
Type: application/octet-stream
Size: 1839 bytes
Desc: bad_encoding.xsd
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/20a2caea/bad_encoding.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: bad_encoding.gml
Type: application/octet-stream
Size: 1175 bytes
Desc: bad_encoding.gml
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/20a2caea/bad_encoding-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gecu000e07g_e.gml
Type: application/octet-stream
Size: 1760 bytes
Desc: gecu000e07g_e.gml
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/20a2caea/gecu000e07g_e.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gecu000e07g_e.gfs
Type: application/octet-stream
Size: 887 bytes
Desc: gecu000e07g_e.gfs
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/20a2caea/gecu000e07g_e-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: messed_up_features.gml
Type: application/octet-stream
Size: 1566 bytes
Desc: messed_up_features.gml
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070201/20a2caea/messed_up_features-0001.obj
From Krahwinkler at mmi.rwth-aachen.de  Fri Feb  2 09:51:03 2007
From: Krahwinkler at mmi.rwth-aachen.de (Petra Krahwinkler)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] compiled GDAL files don't work
Message-ID: <7A20B765B9E3694A8100B3B95196845F0833AB@mmi-com.mmi.rwth-aachen.de>

Hi
 
I did exactly as explained on http://vterrain.org/Distrib/gdal.html and i finally managed to compile everything
It just doesn't work. I tried the gdalwarp.exe but even when i call it using only -h it just crashes.....
 
Can anyone help me with that?
 
Thanks in advance
 

__________________________________________________ 

Institut f?r Mensch-Maschine-Interaktion RWTH Aachen 
  
Dipl.-Ing. Petra Maria Krahwinkler 
Ahornstrasse 55 
52074 Aachen 
Germany 
  
Fon: +49 241 80-23635 
Fax: +49 241 80-22308 
  
mailto:Krahwinkler@mmi.rwth-aachen.de 
http://www.mmi.rwth-aachen.de <http://www.mmi.rwth-aachen.de/>  
______________________________________________ 
  
Der Inhalt dieser E-Mail ist ausschliesslich fuer den bezeichneten Adressaten bestimmt. Jede Form der Kenntnisnahme, Veroeffentlichung,Vervielfaeltigung oder Weitergabe des Inhalts dieser E-Mail durch unberechtigte Dritte ist unzulaessig.


Falls Sie nicht der Adressat dieser E-Mail sind, bitten wir Sie, das Material von Ihrem Computer zu loeschen und sich mit dem Absender in Verbindung zu setzen.


This e-mail and any attachments are confidential and intended solely for the addressee. The perusal, publication, copying or dissemination of the contents of this e-mail by unauthorised third parties is prohibited. If you are not the intended recipient of this e-mail, please delete it and immediately notify the sender.

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070202/e5ab5063/attachment.html
From ivan at ilucena.net  Fri Feb  2 10:08:43 2007
From: ivan at ilucena.net (Ivan Lucena)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] compiled GDAL files don't work
Message-ID: <20070202150843.A2BE22F946@ws6-3.us4.outblaze.com>

 Have you try the Visual Studio 2003/5 Solution "makegdal.sln" from the
GDAL SVN repository?

  ----- Original Message -----
  From: "Petra Krahwinkler"
  To: gdal-dev@lists.maptools.org
  Subject: [Gdal-dev] compiled GDAL files don't work
  Date: Fri, 02 Feb 2007 15:51:03 +0100

  Hi I did exactly as explained on
  http://vterrain.org/Distrib/gdal.html and i finally managed to
  compile everythingIt just doesn't work. I tried the gdalwarp.exe but
  even when i call it using only -h it just crashes..... Can anyone
  help me with that? Thanks in advance

  __________________________________________________

  Institut f?r Mensch-Maschine-Interaktion RWTH Aachen

  Dipl.-Ing. Petra Maria Krahwinkler
  Ahornstrasse 55
  52074 Aachen
  Germany

  Fon: +49 241 80-23635
  Fax: +49 241 80-22308

  mailto:Krahwinkler@mmi.rwth-aachen.de
  http://www.mmi.rwth-aachen.de
  ______________________________________________

  Der Inhalt dieser E-Mail ist ausschliesslich fuer den bezeichneten
  Adressaten bestimmt. Jede Form der Kenntnisnahme,
  Veroeffentlichung,Vervielfaeltigung oder Weitergabe des Inhalts
  dieser E-Mail durch unberechtigte Dritte ist unzulaessig.


  Falls Sie nicht der Adressat dieser E-Mail sind, bitten wir Sie, das
  Material von Ihrem Computer zu loeschen und sich mit dem Absender in
  Verbindung zu setzen.


  This e-mail and any attachments are confidential and intended solely
  for the addressee. The perusal, publication, copying or dissemination
  of the contents of this e-mail by unauthorised third parties is
  prohibited. If you are not the intended recipient of this e-mail,
  please delete it and immediately notify the sender.


  _______________________________________________
  Gdal-dev mailing list
  Gdal-dev@lists.maptools.org
  http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070202/edfb14b9/attachment.html
From tutey at o2.pl  Fri Feb  2 10:53:05 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] website: update for GRASS reference
Message-ID: <45C35E61.5090503@o2.pl>

Hi!

On http://iweb.gdal.org/ one can read that GRASS is:

"A raster/vector open source GIS uses GDAL for raster import (via
r.in.gdal)."

Could it be updated to:

"A raster/vector open source GIS uses GDAL for raster import and export
(via r.in.gdal and r.out.gdal)."

?

Thanks!

Maciek


From dany.geotools at gmail.com  Fri Feb  2 11:26:33 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] compiled GDAL files don't work
In-Reply-To: <7A20B765B9E3694A8100B3B95196845F0833AB@mmi-com.mmi.rwth-aachen.de>
References: <7A20B765B9E3694A8100B3B95196845F0833AB@mmi-com.mmi.rwth-aachen.de>
Message-ID: <7221db410702020826m4b239f6fi9b4feaf34d784b7f@mail.gmail.com>

Hi Petra

What do you mean with "it just crashes"?
Can you provide more information about that? (errors, messages, logs or
something similar).

Best Regards,
Daniele

On 2/2/07, Petra Krahwinkler <Krahwinkler@mmi.rwth-aachen.de> wrote:
>
>  Hi
>
> I did exactly as explained on http://vterrain.org/Distrib/gdal.html and i
> finally managed to compile everything
> It just doesn't work. I tried the gdalwarp.exe but even when i call it
> using only -h it just crashes.....
>
> Can anyone help me with that?
>
> Thanks in advance
>
>
> *__________________________________________________*
>
> Institut f?r Mensch-Maschine-Interaktion RWTH Aachen
>
> Dipl.-Ing. Petra Maria Krahwinkler
> Ahornstrasse 55
> 52074 Aachen
> Germany
>
> Fon: +49 241 80-23635
> Fax: +49 241 80-22308
>
> mailto:Krahwinkler@mmi.rwth-aachen.de <Krahwinkler@mmi.rwth-aachen.de>
> *http://www.mmi.rwth-aachen.de * <http://www.mmi.rwth-aachen.de/>
> ______________________________________________
>
> Der Inhalt dieser E-Mail ist ausschliesslich fuer den bezeichneten
> Adressaten bestimmt. Jede Form der Kenntnisnahme,
> Veroeffentlichung,Vervielfaeltigung oder Weitergabe des Inhalts dieser
> E-Mail durch unberechtigte Dritte ist unzulaessig.
>
>
> Falls Sie nicht der Adressat dieser E-Mail sind, bitten wir Sie, das
> Material von Ihrem Computer zu loeschen und sich mit dem Absender in
> Verbindung zu setzen.
>
>
> This e-mail and any attachments are confidential and intended solely for
> the addressee. The perusal, publication, copying or dissemination of the
> contents of this e-mail by unauthorised third parties is prohibited. If you
> are not the intended recipient of this e-mail, please delete it and
> immediately notify the sender.
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070202/5e0b1185/attachment.html
From warmerdam at pobox.com  Fri Feb  2 12:37:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] website: update for GRASS reference
In-Reply-To: <45C35E61.5090503@o2.pl>
References: <45C35E61.5090503@o2.pl>
Message-ID: <45C376E6.2070606@pobox.com>

Maciej Sieczka wrote:
> Hi!
> 
> On http://iweb.gdal.org/ one can read that GRASS is:
> 
> "A raster/vector open source GIS uses GDAL for raster import (via
> r.in.gdal)."
> 
> Could it be updated to:
> 
> "A raster/vector open source GIS uses GDAL for raster import and export
> (via r.in.gdal and r.out.gdal)."


Maciej,

Change applied.  It should appear on the web site shortly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sforde at amazon.com  Fri Feb  2 12:44:41 2007
From: sforde at amazon.com (Forde, Sean)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: Urgent help needed with image conversion for the Jim
	Gray search
Message-ID: <95E2916DE071AC46A83D54B555CFDD910263D877@exchg-sea3-03.ant.amazon.com>

Friends - can I use gdal_translate to convert 11bit geotiff to jpeg? Can you tell me the command line arguments?

________________________________

From: owner-software@amazon.com [mailto:owner-software@amazon.com] On Behalf Of Vogels, Werner
Sent: Friday, February 02, 2007 8:50 AM
To: software@amazon.com
Cc: turk-jim-gray@amazon.com
Subject: Urgent help needed with image conversion for the Jim Gray search


As you guys may know computer science icon Jim Gray disappeared at sea last Sunday, and the Coast Guard has not been able to find any trace. It is a complete mystery.
 
We have started an effort to find him by getting access to satellite data with the intention to load it into Mechanical Turk, the turk team has worked deep into the night to make this happen. 
 
We have however hit an obstacle to which we have no answer: the image format is 16 bit panchromatic with on 11 bits used for data (tiff). If you view this in a regular viewer it will be pitch black. We'll need to run a conversion similar to what is described here:
 
http://www.eurimage.com/products/qb_photoshop/photoshop.html <http://www.eurimage.com/products/qb_photoshop/photoshop.html> 
 
to get the images into a spectrum that is usable.
 
Does any of you know of any automated tools or procedures that can make this happen?
 
Some of the images can be found at: internal/~deflaux/JimGray
 
--
Werner
<http://openphi.net/tenacious/> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070202/6ac86376/attachment.html
From tutey at o2.pl  Fri Feb  2 12:52:06 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] website: update for GRASS reference
In-Reply-To: <45C376E6.2070606@pobox.com>
References: <45C35E61.5090503@o2.pl> <45C376E6.2070606@pobox.com>
Message-ID: <45C37A46.3070506@o2.pl>

Frank Warmerdam wrote:

> Maciej,
> 
> Change applied.  It should appear on the web site shortly.

Thanks much!

Cheers,
Maciek

From nhv at cape.com  Fri Feb  2 13:42:02 2007
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: Urgent help needed with image conversion for the
	JimGray search
In-Reply-To: <95E2916DE071AC46A83D54B555CFDD910263D877@exchg-sea3-03.ant.amazon.com>
Message-ID: <200702021842.l12IfxLk023363@ms-smtp-01.tampabay.rr.com>

Forde, Sean writes:
> 
> Friends - can I use gdal_translate to convert 11bit geotiff 
> to jpeg? Can you tell me the command line arguments?

gdal_translate -scale 0 2047 -of JPEG $INFILE.tif  $OUTFILE.jpgshould work

Note I like to use a non-linear scale as demonstrated in the following
Python code

####################
from PIL import Image
import numarray as NA

def ImageToArray(im,power=8):
    """ """
    cols = im.size[0]
    rows = im.size[1]
    r = NA.fromstring(im.tostring(),NA.UInt16)
    #r = NA.clip(r,0,(2**power)-1)
    r.shape = rows,cols
    return r*(1.0/(2**power))

def ArrayToImage(arr,extents,max_pix=255.0,scale=1.0):
    """ """
    h = extents[0]
    w = extents[1]
    band = arr*(max_pix/scale)
    return Image.fromstring('L',(w,h),(band.astype('b')).tostring())

img = Image.open("roi.1875402401.tif")
a = ImageToArray(img,11)
a = NA.exp(a)
a -= a.min()
a *= (1.0/a.max())
img = ArrayToImage(a,a.shape)
img.save("roi.1875402401.png","PNG")
#############################


Let me know if you need a hand translating these

Norman


> 
> ________________________________
> 
> From: owner-software@amazon.com 
> [mailto:owner-software@amazon.com] On Behalf Of Vogels, Werner
> Sent: Friday, February 02, 2007 8:50 AM
> To: software@amazon.com
> Cc: turk-jim-gray@amazon.com
> Subject: Urgent help needed with image conversion for the Jim 
> Gray search
> 
> 
> As you guys may know computer science icon Jim Gray 
> disappeared at sea last Sunday, and the Coast Guard has not 
> been able to find any trace. It is a complete mystery.
>  
> We have started an effort to find him by getting access to 
> satellite data with the intention to load it into Mechanical 
> Turk, the turk team has worked deep into the night to make 
> this happen. 
>  
> We have however hit an obstacle to which we have no answer: 
> the image format is 16 bit panchromatic with on 11 bits used 
> for data (tiff). If you view this in a regular viewer it will 
> be pitch black. We'll need to run a conversion similar to 
> what is described here:
>  
> http://www.eurimage.com/products/qb_photoshop/photoshop.html 
> <http://www.eurimage.com/products/qb_photoshop/photoshop.html> 
>  
> to get the images into a spectrum that is usable.
>  
> Does any of you know of any automated tools or procedures 
> that can make this happen?
>  
> Some of the images can be found at: internal/~deflaux/JimGray
>  
> --
> Werner
> <http://openphi.net/tenacious/> 
> 


From nbarker at ittvis.com  Fri Feb  2 13:44:31 2007
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: Urgent help needed with image conversion for the
	JimGray search
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E8131DA5@bath.uk.rsinc.com>

Sean,

 

gdal_translate -SCALE -OT BYTE -OF JPEG 11bitTIF.tif result.jpg

 

works with some sample 11 bit images I pulled from GeoEye

 

Norman

 

 

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Forde, Sean
Sent: 02 February 2007 17:45
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] RE: Urgent help needed with image conversion for the
JimGray search

 

Friends - can I use gdal_translate to convert 11bit geotiff to jpeg? Can
you tell me the command line arguments?

________________________________

From: owner-software@amazon.com [mailto:owner-software@amazon.com] On
Behalf Of Vogels, Werner
Sent: Friday, February 02, 2007 8:50 AM
To: software@amazon.com
Cc: turk-jim-gray@amazon.com
Subject: Urgent help needed with image conversion for the Jim Gray
search

As you guys may know computer science icon Jim Gray disappeared at sea
last Sunday, and the Coast Guard has not been able to find any trace. It
is a complete mystery.

 

We have started an effort to find him by getting access to satellite
data with the intention to load it into Mechanical Turk, the turk team
has worked deep into the night to make this happen. 

 

We have however hit an obstacle to which we have no answer: the image
format is 16 bit panchromatic with on 11 bits used for data (tiff). If
you view this in a regular viewer it will be pitch black. We'll need to
run a conversion similar to what is described here:

 

http://www.eurimage.com/products/qb_photoshop/photoshop.html

 

to get the images into a spectrum that is usable.

 

Does any of you know of any automated tools or procedures that can make
this happen?

 

Some of the images can be found at: internal/~deflaux/JimGray

 

--
Werner

<http://openphi.net/tenacious/> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070202/8ee57d3a/attachment.html
From ealpert at digitalglobe.com  Fri Feb  2 14:17:54 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: Urgent help needed with image conversion for the
	JimGray search
References: <95E2916DE071AC46A83D54B555CFDD910263D877@exchg-sea3-03.ant.amazon.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233DA3D6D@COMAIL01.digitalglobe.com>

Sean, 

 

gdal_translate -ot Byte -of JPEG -scale 0 2048 0 255 source.tif
output.jpg

 

BTW, I looked at the imagery you received and it is clouds over water
it's going to be very difficult to look for features with such a large
dynamic range in the imagery. You would be better off using PCI or ENVI
or some tool that allows you to tweak the color histogram better than a
linear scale.

 

-e

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Forde, Sean
Sent: Friday, February 02, 2007 10:45 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] RE: Urgent help needed with image conversion for the
JimGray search

 

Friends - can I use gdal_translate to convert 11bit geotiff to jpeg? Can
you tell me the command line arguments?

________________________________

From: owner-software@amazon.com [mailto:owner-software@amazon.com] On
Behalf Of Vogels, Werner
Sent: Friday, February 02, 2007 8:50 AM
To: software@amazon.com
Cc: turk-jim-gray@amazon.com
Subject: Urgent help needed with image conversion for the Jim Gray
search

As you guys may know computer science icon Jim Gray disappeared at sea
last Sunday, and the Coast Guard has not been able to find any trace. It
is a complete mystery.

 

We have started an effort to find him by getting access to satellite
data with the intention to load it into Mechanical Turk, the turk team
has worked deep into the night to make this happen. 

 

We have however hit an obstacle to which we have no answer: the image
format is 16 bit panchromatic with on 11 bits used for data (tiff). If
you view this in a regular viewer it will be pitch black. We'll need to
run a conversion similar to what is described here:

 

http://www.eurimage.com/products/qb_photoshop/photoshop.html

 

to get the images into a spectrum that is usable.

 

Does any of you know of any automated tools or procedures that can make
this happen?

 

Some of the images can be found at: internal/~deflaux/JimGray

 

--
Werner

<http://openphi.net/tenacious/> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070202/f043cace/attachment.html
From arno at agerrius.nl  Fri Feb  2 14:36:18 2007
From: arno at agerrius.nl (Arno Gerretsen)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Buffer cap style?
Message-ID: <000b01c74701$6a710680$3f531380$@nl>

Hi,

Recently I saw a message on the GEOS mailing list about setting a cap style
for the buffer operation. I am using the Buffer function in OGR in one of my
tools and it would be nice if I could set the cap style there as well. Is
that possible in OGR?

Thanks,

Arno



From gok at aerometric-ak.com  Fri Feb  2 14:45:11 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FW: [Tiff] Re: get tifftag_geoasciiparams string
Message-ID: <3054411AF4728548AD6D7137190D56B302B578F9@admin1.aeromap.com>

Thanks, Phil, for respond.
I agree: docs are pure. I have the same manual.txt for libgeotiff.

Still can not find any reference for return from TIFFGetField(tif, TIFFTAG_GEOASCIIPARAMS, &data)
command. The other two return number of elements as a parameter:
TIFFGetField(tif, TIFFTAG_GEOKEYDIRECTORY, &size, &data);
TIFFGetField(tif, TIFFTAG_GEODOUBLEPARAMS, &size, &data);

TIFFGetField() description in tiff-3.8.2\html\man\TIFFGetField.3tiff.html shows
in "Autoregistered tags" sample that ascii tag should be handled the same way. But 
real code is different.

I want to use TIFF approach to handle tags (shorts, doubles, ascii) as an arrays
rather then GTIFFKeySet/GTIFFKeyGet for each tag. Thanks to gdal it handles geoTiff
great.

Any help, please!

Gennady

-----Original Message-----
From: tiff-bounces@lists.maptools.org
[mailto:tiff-bounces@lists.maptools.org]On Behalf Of Phil Harvey
Sent: Thursday, February 01, 2007 3:08 PM
To: tiff@lists.maptools.org
Subject: [Tiff] Re: get tifftag_geoasciiparams string


Sorry, I meant to give you this reference so you can download the 
GeoTiff library, which I believe includes documentation:

  ftp://ftp.remotesensing.org/geotiff/libgeotiff/libgeotiff-1.2.3.tar.gz

- Phil

_______________________________________________
Tiff mailing list: Tiff@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/tiff
http://www.remotesensing.org/libtiff/

_______________________________________________
Tiff mailing list: Tiff@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/tiff
http://www.remotesensing.org/libtiff/


From warmerdam at pobox.com  Fri Feb  2 16:28:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Re: [FWTools] dstnodata and cubic convolution
In-Reply-To: <010201c7470c$322c6b60$48aca8c0@wim>
References: <010201c7470c$322c6b60$48aca8c0@wim>
Message-ID: <45C3ACFF.7090105@pobox.com>

Wim Chalmet wrote:
> Hi,
>  
> I am working with panchromatic satellite imagery, which has the typical 
> "black borders" around the image area.
>  
> When using gdalwarp to reproject the imagery, I specifiy scrnodata and 
> dstnodata as 0, in order to make 0 look "transparent" in my image 
> viewer. This works fine. I also make sure that within my image area, 
> no black pixels occur, for visual purposes (i.e. each pixel within the 
> image area has a digital number of at least 1).
>  
> The problem that I am encountering is that cubic convolution allows 
> pixel values - within the imagery area - to become black (digital number 
> 0), because of the formula of cubic convolution.
>  
> This gives me problems, because when I then make 0 look transparent, it 
> appears as if I have holes in my image area.
>  
> Would it make sense to not allow gdalwarp to change the pixel value from 
> something larger than 0 to 0, if the user specifies dstnodata as 0? Is 
> this currently possible with gdalwarp?

Wim,

Unfortunately, this turns out to be quite hard to do the way things are
setup because the interpolator doesn't know about what the specific nodata
values are, it just gets a bitmask of which pixels are nodata from a
function which computes it from the pixels.

Would it be practical for your purposes to specify -dstalpha instead of
-dstnodata?  This would use alpha=0 to mark nodata values in the output
image and would allow zeros to be present as real data in areas where
alpha is 255.

PS. I've taken the liberty of cc:ing this to gdal-dev, since I think this
might have wider interest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Fri Feb  2 16:23:43 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] spike move to top level
Message-ID: <45C3ABDF.7080502@loskot.net>

Hi,

After some chat with Frank and Hobu, we agreed to move the 'spike'
module out of the trunk.
The trunk only consists of core modules:
- gdal
- autotest

and checkouting trunk brings base GDAL distribution, nothing else.

The spike - module for experimental, alpha and non-official codes has
been moved to top level of the SVN repository, and now
it's like a branches container.

Here is layout of the current repository http://svn.osgeo.org/svn/gdal

- trunk
- tags
- branches
- spike

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Fri Feb  2 16:38:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] gdalwarp should keep prj info (?)
In-Reply-To: <45C26747.6060604@gov.yk.ca>
References: <45C26747.6060604@gov.yk.ca>
Message-ID: <45C3AF3B.7050708@pobox.com>

Matt Wilkie wrote:
> Hi All,
> 
> Currently gdalwarp drops the projection info if it is not specifically
> assigned. I think it should either keep all projection info unless 
> directed otherwise, or, have an option to retain it.


Matt,

I agree that it should work this way, and as far as I know it does!
I think we can follow this up in the bug report:

   http://bugzilla.remotesensing.org/show_bug.cgi?id=1471

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Feb  2 17:13:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Text field size ogr2ogr PostgreSQL to MIF/MID
In-Reply-To: <45C25771.6020705@loskot.net>
References: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>
	<441EAF1E.5040009@tkk.fi> <007e01c7461c$d75b1e10$9601a8c0@PC150>
	<45C21EB0.3080206@pobox.com> <45C25771.6020705@loskot.net>
Message-ID: <45C3B7A2.2020304@pobox.com>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>> Marc Jacquin wrote:
>>> Hi all,
>>>
>>> I am using ogr2ogr to convert a PG table into MIF/MID.
>>> The table fields are varchar(x) or char(x) type and the field width is
>>> never
>>> more than let say 50.
>>>
>>> It seems that ogr2ogr forces text fields to be 254 wide. But when you get
>>> more than 20 fields the record size exceeds the 4 K limit of MapInfo 6.
>>>
>>> Is there a PG usable type so that ogr2ogr would keep the width for
>>> exporting?
>> Marc,
>>
>> It looks like the CHARACTER(n) field type in Postgres will be treated by
>> OGR as a field with a particular width.  The code that decides whether
>> to associate a width with text fields in the driver looks like this:
> 
> Frank,
> 
> Isn't it correct assumption?
> I'm not sure I understand where is the problem here, but as I know,
> CHARACTER(n) type should be handled as fixed-width type.

Mateusz,

The problem Marc was running into is that many text field types,
like VARCHAR(n) do not end up with widths associated with them and
he wanted to know if there was a type that does.   I think CHARACTER(n)
does, which would be good.

> I may not understand rationale behind the code above well, but using
> libpq it's possible to retrieve lenght of character type from result
> set, using PQfmod() function:
> 
> //////////////////////////////////////////////////////
> const int VARCHAR_HDRSZ = 4; // usually, equal to sizeof(int)
> 
> int fmod = PQfmod(hResult, iColumnIndex);
> if (-1 != fmod)
>    length = (fmod - VARCHAR_HDRSZ);
> //////////////////////////////////////////////////////

Note that for tables we actually query various supporting tables
to get types, widths etc.  We only inspect the resultset itself for
this information from ExecuteSQL() results.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Fri Feb  2 17:07:59 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Text field size ogr2ogr PostgreSQL to MIF/MID
In-Reply-To: <45C3B7A2.2020304@pobox.com>
References: <FJEAJLIJBMFCHFKGDAGKCEANCBAA.vdharan2001@gmail.com>
	<441EAF1E.5040009@tkk.fi> <007e01c7461c$d75b1e10$9601a8c0@PC150>
	<45C21EB0.3080206@pobox.com> <45C25771.6020705@loskot.net>
	<45C3B7A2.2020304@pobox.com>
Message-ID: <45C3B63F.8070400@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> Frank Warmerdam wrote:
>>> Marc Jacquin wrote:
>>>> Hi all,
>>>>
>>>> I am using ogr2ogr to convert a PG table into MIF/MID.
>>>> The table fields are varchar(x) or char(x) type and the field width is
>>>> never
>>>> more than let say 50.
>>>>
>>>> It seems that ogr2ogr forces text fields to be 254 wide. But when
>>>> you get
>>>> more than 20 fields the record size exceeds the 4 K limit of MapInfo 6.
>>>>
>>>> Is there a PG usable type so that ogr2ogr would keep the width for
>>>> exporting?
>>> Marc,
>>>
>>> It looks like the CHARACTER(n) field type in Postgres will be treated by
>>> OGR as a field with a particular width.  The code that decides whether
>>> to associate a width with text fields in the driver looks like this:
>>
>> Frank,
>>
>> Isn't it correct assumption?
>> I'm not sure I understand where is the problem here, but as I know,
>> CHARACTER(n) type should be handled as fixed-width type.
> 
> Mateusz,
> 
> The problem Marc was running into is that many text field types,
> like VARCHAR(n) do not end up with widths associated with them and
> he wanted to know if there was a type that does.   I think CHARACTER(n)
> does, which would be good.

Frank,

Yes, I understand it now, after I got short explanation
on the #gdal channel.

>> I may not understand rationale behind the code above well, but using
>> libpq it's possible to retrieve lenght of character type from result
>> set, using PQfmod() function:
>>
>> //////////////////////////////////////////////////////
>> const int VARCHAR_HDRSZ = 4; // usually, equal to sizeof(int)
>>
>> int fmod = PQfmod(hResult, iColumnIndex);
>> if (-1 != fmod)
>>    length = (fmod - VARCHAR_HDRSZ);
>> //////////////////////////////////////////////////////
> 
> Note that for tables we actually query various supporting tables
> to get types, widths etc.  We only inspect the resultset itself for
> this information from ExecuteSQL() results.

Right. I missed this details.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From izzybitsie at gmail.com  Fri Feb  2 17:51:46 2007
From: izzybitsie at gmail.com (Dori)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] gdalwarp reprojecting from utm to stereographic
Message-ID: <23e208430702021451q5fad4ae9p706abbbb5eb3c477@mail.gmail.com>

Hi,

I am trying to reproject a map from Mercator to Stereographic using
gdalwarp.
I got the lat/lon of Mercator map center using gdalinfo.
This is the command I run:
gdalwarp -t_srs "+proj=stere +lat_ts=0 +lon_0=142 +x_0=0 +y_0=0"
SH_SATIR_00_2007013118.tif SH_SATIR_00_2007013118_stereo.tif

I get a nice all black image.
Could somedy tell me what am I missing on this command line?


Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070202/31079309/attachment.html
From SriRam.PrasadBhasker at rmsi.com  Fri Feb  2 22:14:39 2007
From: SriRam.PrasadBhasker at rmsi.com (SriRam Prasad Bhasker)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] GDAL LZW PREDICTOR : urgent help
Message-ID: <OF6EA7492A.2B64F3A1-ON65257277.00116260-65257277.0011C4A8@rmsi.com>

Can anyone send me the syntaz of compression a image using GDAL_TRANSLATE 
with the Predictor Option 

My Objective is to compress an Image further more .

Adobe CS2 is compressing the image even further. can anyone what 
compression algorithm does Adobe Cs2 use to
compress the TIFF Files... (Is it LZW or LZW predictor)

right now i am using the below syntax.
gdal_translate -of GTiff -co PREDICTOR=2 -co compress=lzw ab.tif gplzw.tif

COMPRESS=[JPEG/LZW/PACKBITS/DEFLATE/NONE]:
PREDICTOR=[0/1/2]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070203/1ff3db6c/attachment.html
From bfraser at geoanalytic.com  Fri Feb  2 23:23:32 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] GDAL LZW PREDICTOR : urgent help
In-Reply-To: <OF6EA7492A.2B64F3A1-ON65257277.00116260-65257277.0011C4A8@rmsi.com>
References: <OF6EA7492A.2B64F3A1-ON65257277.00116260-65257277.0011C4A8@rmsi.com>
Message-ID: <.70.73.22.137.1170476612.squirrel@70.73.22.137>

Have a look at http://www.gdal.org/frmt_gtiff.html
You might try COMPRESS=JPEG with a low number for JPEG_QUALITY, but this
is a "lossy" compression technique.

> Can anyone send me the syntaz of compression a image using GDAL_TRANSLATE
> with the Predictor Option
>
> My Objective is to compress an Image further more .
>
> Adobe CS2 is compressing the image even further. can anyone what
> compression algorithm does Adobe Cs2 use to
> compress the TIFF Files... (Is it LZW or LZW predictor)
>
> right now i am using the below syntax.
> gdal_translate -of GTiff -co PREDICTOR=2 -co compress=lzw ab.tif gplzw.tif
>
> COMPRESS=[JPEG/LZW/PACKBITS/DEFLATE/NONE]:
> PREDICTOR=[0/1/2]
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



From br at forstware.de  Sat Feb  3 08:12:03 2007
From: br at forstware.de (br)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] win32 makefiles
Message-ID: <200702031308.l13D8cqh007711@forstw.forstware.de>

Hello,

here are some small changes I have made to \gdal\nmake.opt and
\gdal\ogr\Makefile
to be able to choose Debug or Release and /MD or /MT compiles on the command
line.

The ogr\Makefile was changed because /MT switch was hard coded.


nmake -f makefile.vc DEBUG=1
--> makes /MDd debug build

and

nmake -f makefile.vc MT=1
-->  makes /MT release build


(JASPER and MrSid are uncommented in nmake.opt)

Maybe it's helpfull for someone else who must work with MS

Bjoern
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nmake.opt
Type: application/octet-stream
Size: 10936 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070203/612fd599/nmake.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Makefile
Type: application/octet-stream
Size: 4518 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070203/612fd599/Makefile.obj
From br at forstware.de  Sat Feb  3 08:29:07 2007
From: br at forstware.de (br)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] writing jasper JPEG2000 files
Message-ID: <200702031325.l13DPgsm007803@forstw.forstware.de>

Hello,

I have compiled gdal and ogr (newest checked out via svn) successfully,
using MS VC 8 with JASPER and MrSid (reading) support.

Things seemed to work until I tried something like
gdal_translate -of JPEG2000 x.jpg y.jp2 
The progress counting at went until 100 was reached and then the program
crashed (release version build with /MD flag)

Then I wanted to debug to the problem,
but ran into an exception already when CPLFree(pszFileSpec) was called in
CPLReadDir() called from GDALAllRegister() (due to a corruption of the
heap).
I could not spot the reason until now.

Does someone have an idea?

Thanks,
Bjoern



From dron at ak4719.spb.edu  Sun Feb  4 06:50:52 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] GDAL LZW PREDICTOR : urgent help
In-Reply-To: <OF6EA7492A.2B64F3A1-ON65257277.00116260-65257277.0011C4A8@rmsi.com>
References: <OF6EA7492A.2B64F3A1-ON65257277.00116260-65257277.0011C4A8@rmsi.com>
Message-ID: <20070204115052.GA31690@ak4719.spb.edu>

On Sat, Feb 03, 2007 at 08:44:39AM +0530, SriRam Prasad Bhasker wrote:
> My Objective is to compress an Image further more .
> 
> Adobe CS2 is compressing the image even further. can anyone what 
> compression algorithm does Adobe Cs2 use to
> compress the TIFF Files... (Is it LZW or LZW predictor)

You can check it yourself using the tiffinfo utility.  Predictor value
will be reported along with compression scheme used for that file.

> right now i am using the below syntax.
> gdal_translate -of GTiff -co PREDICTOR=2 -co compress=lzw ab.tif gplzw.tif

Preictor 2 is used for floating point images only, so if your image is
not floating point you will not get any effect from that predictor. For
integer data choose predictor 1.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From aaime at openplans.org  Sun Feb  4 09:25:25 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FeatureDefn.getGeometryType and actual geometry type
Message-ID: <45C5ECD5.8000308@openplans.org>

Hi,
playing with OGR and polygon shapefiles I noticed that
the getGeometryType returns (wkbPolygon, 3). Yet, reading the
shapefile also multipolygons may come out.
This is no news to me, in Geotools we always say a polygon
shapefile has in fact multi-polygon geometries because
there is no real difference in the shapefile specification
between simple and multi polygons (the same happens for
lines, but not for points afaik).

What I'd like to know is, should I assume multi-geometries
may come out of a simple types for other data formats too?
Or is considered to be a bug (since there is a mismatch between
the declared type and the returned one)?

Cheers
Andrea

From michael.timo.welsch at gmx.de  Sun Feb  4 09:59:24 2007
From: michael.timo.welsch at gmx.de (Michael84)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Does gdalinfo Bounding Box Information really match
	DTED / SRTM ?
In-Reply-To: <45BF0EC9.1080200@pobox.com>
References: <8705213.post@talk.nabble.com> <45BF0EC9.1080200@pobox.com>
Message-ID: <8793494.post@talk.nabble.com>


Thank you very much. Is there no GDAL function to have a "point" view of
GDALDataSet ?


Frank Warmerdam-2 wrote:
> 
> Michael84 wrote:
>> I use gdalinfo to extract bounding box information of DTED L0&L1 (dt0,
>> dt1)
>> as well as SRTM (hgt over bil+hdr+proj solution) data.
>> In both cases the reported corner points are not integer values as
>> supposed. 
>> 
>> Corner Coordinates: (DTED)
>> Upper Left  (  -0.0041667,  49.0041667) (  0d 0'15.00"W, 49d 0'15.00"N)
>> Lower Left  (  -0.0041667,  47.9958333) (  0d 0'15.00"W, 47d59'45.00"N)
>> Upper Right (   1.0041667,  49.0041667) (  1d 0'15.00"E, 49d 0'15.00"N)
>> Lower Right (   1.0041667,  47.9958333) (  1d 0'15.00"E, 47d59'45.00"N)
>> Center      (   0.5000000,  48.5000000) (  0d30'0.00"E, 48d30'0.00"N)
>> 
>> Is this is a roundig bug of gdal or are the data sources just coded like
>> this ?
> 
> Michael,
> 
> GDAL treats pixels are representing an area, and the bounds of a raster
> are the bounds of the outer edges of the pixel region.
> 
> DTEDs however are normally thought of as samples at points (with a pixel
> sometimes drawn around that point to represent it).  When thought of as
> point data DTED corners are right on 1 degree cell boundaries.
> 
> So this is the class "pixel as area" vs. "pixel as point" discrepency
> which results in an off-by-one-half-pixel difference under various
> circumstances.
> 
> So, there is no bug, only differences in interpretation of what the
> bounds of a raster are.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/Does-gdalinfo-Bounding-Box-Information-really-match-DTED---SRTM---tf3140934.html#a8793494
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From aaime at openplans.org  Sun Feb  4 11:31:23 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] OGR and multiple geometries per feature type
Message-ID: <45C60A5B.80107@openplans.org>

Hi,
does OGR support features with multiple geometries?
 From the API it seems it does not, but I may be overlooking something.

When I connect ogrinfo to a Postgis table that happens
to have 4 geometry columns, each registered in the
geometry_columns table, I get the following:

ogrinfo -so PG:"host=localhost port=5432 user=myuser
  password=mystery dbname=tiger2005fe" major_roads

INFO: Open of `PG:host=localhost port=5432 user=myuser password=mystery 
dbname=tiger2005fe' using driver `PostgreSQL' successful.

Layer name: major_roads
Geometry: Unknown (any)
Feature Count: 105628
Extent: (-170.837387, -14.377902) - (144.914001, 66.922287)
Layer SRS WKT:
(unknown)
Geometry Column = gen_full
fid: Integer (0.0)
interstate: Integer (0.0)
othername: String (0.0)
state: String (0.0)
statehighway: Integer (0.0)
ushighway: Integer (0.0)

Layer name: major_roads
Geometry: Unknown (any)
Feature Count: 105628
Extent: (-170.837387, -14.377902) - (144.914001, 66.922287)
Layer SRS WKT:
(unknown)
Geometry Column = gen_full
fid: Integer (0.0)
interstate: Integer (0.0)
othername: String (0.0)
state: String (0.0)
statehighway: Integer (0.0)
ushighway: Integer (0.0)

Layer name: major_roads
Geometry: Unknown (any)
Feature Count: 105628
Extent: (-170.837387, -14.377902) - (144.914001, 66.922287)
Layer SRS WKT:
(unknown)
Geometry Column = gen_full
fid: Integer (0.0)
interstate: Integer (0.0)
othername: String (0.0)
state: String (0.0)
statehighway: Integer (0.0)
ushighway: Integer (0.0)

Layer name: major_roads
Geometry: Unknown (any)
Feature Count: 105628
Extent: (-170.837387, -14.377902) - (144.914001, 66.922287)
Layer SRS WKT:
(unknown)
Geometry Column = gen_full
fid: Integer (0.0)
interstate: Integer (0.0)
othername: String (0.0)
state: String (0.0)
statehighway: Integer (0.0)
ushighway: Integer (0.0)

whilst the table definition is:

tiger2005fe=# \d major_roads
                              Table "public.major_roads"
     Column    |   Type   |                         Modifiers
--------------+----------+-----------------------------------------------------------
  state        | text     |
  gen_full     | geometry |
  gen_1        | geometry |
  gen_2        | geometry |
  gen_3        | geometry |
  interstate   | integer  |
  ushighway    | integer  |
  statehighway | integer  |
  othername    | text     |
  fid          | integer  | not null default 
nextval('major_roads_fid_seq'::regclass)
Indexes:
     "fid_pkey" PRIMARY KEY, btree (fid)
     "major_roads_spatial_ind" gist (gen_full)
     "major_roads_spatial_ind1" gist (gen_1)
     "major_roads_spatial_ind2" gist (gen_2)
     "major_roads_spatial_ind3" gist (gen_3)

If you're wondering why I do have 4 geometry columns, it's because each
column contains the geometry at a different generalization level.
But it may well be something different, like having both center-line and 
polygon representation for a road, and so on...

Cheers
Andrea

From warmerdam at pobox.com  Sun Feb  4 12:26:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] OGR and multiple geometries per feature type
In-Reply-To: <45C60A5B.80107@openplans.org>
References: <45C60A5B.80107@openplans.org>
Message-ID: <45C61741.2040805@pobox.com>

Andrea Aime wrote:
> Hi,
> does OGR support features with multiple geometries?
>  From the API it seems it does not, but I may be overlooking something.
> 
> When I connect ogrinfo to a Postgis table that happens
> to have 4 geometry columns, each registered in the
> geometry_columns table, I get the following:

Andrea,

The OGR code does not support having multiple geometries for a feature
(except containing in a geometry collection of course).  In the postgis
driver it scans the geometry_columns table for spatial table names, and
then for each lookups up the geometry column from geometry_columns.  So
in this case, it finds the table name 4 times, creates a layer for each,
but always gets the first geometry column each time it rescans for the
associated geometry.

I would appreciate your filing a bug report on this issue.  One simple
step would be for us to avoid duplicate compies of a layer though a
better solution might be to establish distinctly named layers for each
possible selection of geometry column.

For your dataset that might look like layers:

major_roads
major_roads_gen_1
major_roads_gen_2
major_roads_gen_3

It will likely be at least a month before something will be done about this
issue, so you will likely need some sorts of work around in the meantime.

If you are trying to translate data to another format from this table, you
could use specific sql statements.

eg.
ogr2ogr out.shp PG:... \
   -sql 'select state, gen_1, interstate, ushighway, statehighway, othername, 
fid from major_roads'

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Sun Feb  4 12:46:11 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] OGR and multiple geometries per feature type
In-Reply-To: <45C61741.2040805@pobox.com>
References: <45C60A5B.80107@openplans.org> <45C61741.2040805@pobox.com>
Message-ID: <45C61BE3.1030802@openplans.org>

Frank Warmerdam ha scritto:
...
> I would appreciate your filing a bug report on this issue. 

http://bugzilla.remotesensing.org/show_bug.cgi?id=1476

> One simple
> step would be for us to avoid duplicate compies of a layer though a
> better solution might be to establish distinctly named layers for each
> possible selection of geometry column.
> 
> For your dataset that might look like layers:
> 
> major_roads
> major_roads_gen_1
> major_roads_gen_2
> major_roads_gen_3
> 
> It will likely be at least a month before something will be done about this
> issue, so you will likely need some sorts of work around in the meantime.
> 
> If you are trying to translate data to another format from this table...

Nope, unfortunately I'm trying to do something more complicated... 
wrapping OGR in a datastore so that Geotools can leverage it to support
more data formats :-)
So, I guess my questions will be more on the theoretical side compared 
to a OGR utility user :-)
I have a lot more questions and issues, but I'll keep them coming at a 
slow pace. :-)

Cheers
Andrea

From warmerdam at pobox.com  Sun Feb  4 12:46:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Does gdalinfo Bounding Box Information really match
	DTED / SRTM ?
In-Reply-To: <8793494.post@talk.nabble.com>
References: <8705213.post@talk.nabble.com> <45BF0EC9.1080200@pobox.com>
	<8793494.post@talk.nabble.com>
Message-ID: <45C61BF0.4070408@pobox.com>

Michael84 wrote:
> Thank you very much. Is there no GDAL function to have a "point" view of
> GDALDataSet ?

Michael,

No.

Let the evil pixel-as-point people write their own GDAL!

Hmm, that wasn't very mature, was it?

More seriously, the answer is I feel it would be confusing for reports
like gdalinfo to switch between pixel-as-area and pixel-as-point approach
based on some subtle metadata in the dataset.  I also don't see too much
value in a commandline switch since it is only going to be understood by
people once they realize the issue.

I may yet have to change my view on this though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Feb  4 12:49:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] OGR and multiple geometries per feature type
In-Reply-To: <45C61BE3.1030802@openplans.org>
References: <45C60A5B.80107@openplans.org> <45C61741.2040805@pobox.com>
	<45C61BE3.1030802@openplans.org>
Message-ID: <45C61C90.9080903@pobox.com>

Andrea Aime wrote:
> Nope, unfortunately I'm trying to do something more complicated... 
> wrapping OGR in a datastore so that Geotools can leverage it to support
> more data formats :-)
> So, I guess my questions will be more on the theoretical side compared 
> to a OGR utility user :-)
> I have a lot more questions and issues, but I'll keep them coming at a 
> slow pace. :-)

Andrea,

OK, understood.  Lets just say that there will need to be data model changes
before OGR will support features with multiple geometries well.  In the
meantime approaches are likely to be per-driver hacks like the one I
suggested.

Thanks for filing the bug.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Feb  4 13:03:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FeatureDefn.getGeometryType and actual geometry type
In-Reply-To: <45C5ECD5.8000308@openplans.org>
References: <45C5ECD5.8000308@openplans.org>
Message-ID: <45C61FDE.9030509@pobox.com>

Andrea Aime wrote:
> Hi,
> playing with OGR and polygon shapefiles I noticed that
> the getGeometryType returns (wkbPolygon, 3). Yet, reading the
> shapefile also multipolygons may come out.
> This is no news to me, in Geotools we always say a polygon
> shapefile has in fact multi-polygon geometries because
> there is no real difference in the shapefile specification
> between simple and multi polygons (the same happens for
> lines, but not for points afaik).
> 
> What I'd like to know is, should I assume multi-geometries
> may come out of a simple types for other data formats too?
> Or is considered to be a bug (since there is a mismatch between
> the declared type and the returned one)?

Andrea,

It is a known bug that I am very nervous about changing.  If I
were to change the declaration to multipolygon then I would have
to convert all polygon geometries to multipolygons which would no
doubt confuse and confound many users and applications.

I'm more likely to fallback to considering the layers of type Geometry -
ie. no known type of geometry.

In summary, you shouldn't trust the geometry types too much currently.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu at iastate.edu  Sun Feb  4 13:18:44 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Google Summer of Code 
Message-ID: <22A62AD1-3087-44C9-AF03-C2DD9DA5A9A3@iastate.edu>

All,

The Google Summer of Code has been a wildly successful program by  
Google for fostering Open Source projects over the past two years.  I  
think it should be a goal of GDAL to participate this year, and I am  
throwing my hat in the ring to act as a mentor for any students who  
would wish to participate by submitting development projects to SOC.

You can find the FAQ about the SOC here: <http://code.google.com/ 
support/bin/topic.py?topic=10442>.  Initially, we are looking for  
students who are willing to work on GDAL/OGR through the summer.   
Once we find some candidates, we will brainstorm on some ideas that  
could be done over the three month timeframe of SOC.  After we hone  
down our list, we will submit our projects and cross our fingers :)

If you know of any students who might be interested, or are one  
yourself, please contact me directly.

Thanks,

Howard

From aaime at openplans.org  Sun Feb  4 13:20:43 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FeatureDefn.getGeometryType and actual geometry type
In-Reply-To: <45C61FDE.9030509@pobox.com>
References: <45C5ECD5.8000308@openplans.org> <45C61FDE.9030509@pobox.com>
Message-ID: <45C623FB.10100@openplans.org>

Frank Warmerdam ha scritto:
> Andrea Aime wrote:

> Andrea,
> 
> It is a known bug that I am very nervous about changing.  If I
> were to change the declaration to multipolygon then I would have
> to convert all polygon geometries to multipolygons which would no
> doubt confuse and confound many users and applications.

That's what we do, in fact, in the shapefile datastore.
But we have always been doing this, so we don't have backwards
compatibility issues.
Maybe, you could add a flag to allow

> I'm more likely to fallback to considering the layers of type Geometry -
> ie. no known type of geometry.
> 
> In summary, you shouldn't trust the geometry types too much currently.

Ouch... the issue is, in Geotools we need consistency between the
declared geometry type and the actual one, or our internal checks will
throw exceptions.
Do you have a list of inconsistencies, or should I always use multi 
geometry types, even when OGR tells me that we're going to get simple 
ones? Oh, another possibility is to give up the classification and
say I just have a generic Geometry, that may break some SLD styles though...

Cheers
Andrea

From warmerdam at pobox.com  Sun Feb  4 15:01:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FeatureDefn.getGeometryType and actual geometry type
In-Reply-To: <45C623FB.10100@openplans.org>
References: <45C5ECD5.8000308@openplans.org> <45C61FDE.9030509@pobox.com>
	<45C623FB.10100@openplans.org>
Message-ID: <45C63B8A.5030108@pobox.com>

Andrea Aime wrote:
> Frank Warmerdam ha scritto:
>> Andrea Aime wrote:
> 
>> Andrea,
>>
>> It is a known bug that I am very nervous about changing.  If I
>> were to change the declaration to multipolygon then I would have
>> to convert all polygon geometries to multipolygons which would no
>> doubt confuse and confound many users and applications.
> 
> That's what we do, in fact, in the shapefile datastore.
> But we have always been doing this, so we don't have backwards
> compatibility issues.
> Maybe, you could add a flag to allow

Andrea,

Well, i'm not a huge fan of "adding more flags to control..." such things.
Perhaps though we could or should add a config option to enforce
rigerous geometry typing and then ensure it is enforced for all drivers.

>> I'm more likely to fallback to considering the layers of type Geometry -
>> ie. no known type of geometry.
>>
>> In summary, you shouldn't trust the geometry types too much currently.
> 
> Ouch... the issue is, in Geotools we need consistency between the
> declared geometry type and the actual one, or our internal checks will
> throw exceptions.
> Do you have a list of inconsistencies, or should I always use multi 
> geometry types, even when OGR tells me that we're going to get simple 
> ones? Oh, another possibility is to give up the classification and
> say I just have a generic Geometry, that may break some SLD styles 
> though...

It isn't necessarily always the case that the only problem is getting
multi types when expecting non-multi-types.  But that is generally the
issue.  For now the only way to be certain to be rigerous would be to
ignore the geometry types and treat all layers as generic geometries.

But from a practical point of view, I think the shapefile driver
is the only one likely to trigger problems.  So you could just add
an exception for it - perhaps forcing everything to the multi types
in your code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Sun Feb  4 16:51:06 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Java bindings and wkb support
Message-ID: <45C6554A.6060607@openplans.org>

Hi all,
while using the java bindings I noticed that trying to
export geometries to WKB format makes the virtual
machine crash pretty consistently, whilst doing the
same with WKT seems to work just fine.

I'm using the above formats to convert an OGR geometry
to a JTS one. I would like to use WKB for the translation
since its production and parsing are a lot more efficient.

The code I'm using is:

char[][] charBuffArray = { new char[geom.WkbSize()] };
geom.ExportToWkb(charBuffArray, WKB_XDR);
char[] charBuffer = charBuffArray[0];
byte[] byteBuffer = new byte[charBuffer.length * 2];
for (int i = 0, j = 0; i < charBuffer.length; i++) {
     int buf = (int) charBuffer[i];
     byteBuffer[j] = (byte) (buf & 0xFF);
     j++;
     byteBuffer[j] = (byte) ((buf & 0xFF00) >> 8);
     j++;
}
Geometry g = wkbReader.read(byteBuffer);

and it tears apart the java virtual machine after a few geometries
are parsed.
Now, I noticed two things:
* the C++ interface uses char type, which is one byte in C++,
   but it's two bytes in java. In fact I get back two populated
   bytes for each char, that's why the above code splits each
   char into two bytes.
* preallocating the buffer does not seem to help much, apparently
   no matter what I do, the call to OGR will create another one
   and replace it (that is, if I create the char[][] as new char[1][]
   it crashes just the same, at the same point, on the same geometry,
   after having parsed a few others).

Does anyone have experience on this one?
Cheers
Andrea

From aaime at openplans.org  Sun Feb  4 16:56:49 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FeatureDefn.getGeometryType and actual geometry type
In-Reply-To: <45C63B8A.5030108@pobox.com>
References: <45C5ECD5.8000308@openplans.org> <45C61FDE.9030509@pobox.com>
	<45C623FB.10100@openplans.org> <45C63B8A.5030108@pobox.com>
Message-ID: <45C656A1.8090701@openplans.org>

Frank Warmerdam ha scritto:
> Andrea Aime wrote:

> Well, i'm not a huge fan of "adding more flags to control..." such things.

Agreed, after a while the code becomes a maze of ifs and special case 
elements...

> Perhaps though we could or should add a config option to enforce
> rigerous geometry typing and then ensure it is enforced for all drivers.

Yup, that would work for me. I have to prepare a custom gdal build 
anyways since java bindings do not seem to be included in normal
builds.

> It isn't necessarily always the case that the only problem is getting
> multi types when expecting non-multi-types.  But that is generally the
> issue.  For now the only way to be certain to be rigerous would be to
> ignore the geometry types and treat all layers as generic geometries.
> 
> But from a practical point of view, I think the shapefile driver
> is the only one likely to trigger problems.  So you could just add
> an exception for it - perhaps forcing everything to the multi types
> in your code.

Well, if special cases are needed just for shapefiles, I just need
to add a little modification. Will try that one, I prefer to publish
real geometry types if possible, and possibly stay with the non 
multi-ones since people are sometimes surprised by them.

Thanks for the insights :-)

Cheers
Andrea


From wolfgang.qual at gmx.net  Mon Feb  5 04:00:35 2007
From: wolfgang.qual at gmx.net (wqual)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] create buffer of a shapefile on the command-line using
	ogr - possible?
Message-ID: <200702051000.35882.wolfgang.qual@gmx.net>

Hi list,
is it possible to create a buffer-theme (for an input shapefile) on the 
command-line using ogr-utilities with some sql-commands? Or do I need to 
write a script (I have read something about this in this list). I am just 
curious...
Any hints would be great.

Best regards,
Wolfgang

From warmerdam at pobox.com  Mon Feb  5 10:09:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] create buffer of a shapefile on the command-line using
	ogr - possible?
In-Reply-To: <200702051000.35882.wolfgang.qual@gmx.net>
References: <200702051000.35882.wolfgang.qual@gmx.net>
Message-ID: <45C748B5.8070907@pobox.com>

wqual wrote:
> Hi list,
> is it possible to create a buffer-theme (for an input shapefile) on the 
> command-line using ogr-utilities with some sql-commands? Or do I need to 
> write a script (I have read something about this in this list). I am just 
> curious...
> Any hints would be great.

Wolfgang,

There is currently no way to invoke operators like buffer using the commandline
tools.  You would need to either write a program, or a script in python, etc.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Mon Feb  5 11:08:23 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] OGR sample data?
Message-ID: <45C75677.8000007@openplans.org>

Hi all,
I'm wondering if you have somewhere a collection of OGR
sample data, in various formats.
I have the feeling there should be one, otherwise how do
you test it? :-)
Cheers
Andrea

From hobu at iastate.edu  Mon Feb  5 11:12:22 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] OGR sample data?
In-Reply-To: <45C75677.8000007@openplans.org>
References: <45C75677.8000007@openplans.org>
Message-ID: <6.2.3.4.2.20070205101154.0316ac78@hobu.mail.iastate.edu>

Andrea,

<http://svn.osgeo.org/svn/gdal/trunk/autotest/ogr/data/>

Howard

At 10:08 AM 2/5/2007, Andrea Aime wrote:
>Hi all,
>I'm wondering if you have somewhere a collection of OGR
>sample data, in various formats.
>I have the feeling there should be one, otherwise how do
>you test it? :-)
>Cheers
>Andrea
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Feb  5 11:41:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] OGR sample data?
In-Reply-To: <45C75677.8000007@openplans.org>
References: <45C75677.8000007@openplans.org>
Message-ID: <45C75E38.9020207@pobox.com>

Andrea Aime wrote:
> Hi all,
> I'm wondering if you have somewhere a collection of OGR
> sample data, in various formats.
> I have the feeling there should be one, otherwise how do
> you test it? :-)

Andrea,

As Howard mentioned there is the autotest data.  Nominally public test
data should live at:

   http://www.gdal.org/dl/data/ogr

But as you can see that is a very limited list of data.

Of course I have massive quantities of test data, but since I am not
sure how much of it is redistributable I generally just have to keep it
all private.  It is my hope that "the maintainer" will spend some time
assembling public sample data once he comes on stream.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From izzybitsie at gmail.com  Mon Feb  5 13:11:41 2007
From: izzybitsie at gmail.com (Dori)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] gdalwarp reprojection mercator to polar stereographic
	question
Message-ID: <23e208430702051011h28795538vf3850b4e92f0a55b@mail.gmail.com>

I am trying to reproject a Southern Hemisphere GeoTiff satellite picture
from Mercator to Polar Stereographic.  I want to obtain an image similar to
the one in : http://aviationweather.gov/obs/sat/intl/ for ICAO area J or K.
Pls. see input image info at the end of the message.
I tried following options to just reproject the map with not so promising
outputs:
gdalwarp -t_srs EPSG:32761 -wo SAMPLE_GRID=YES in.tif out.tif  => original
image diagonally on a white background but with southern latitudes on top of
northern latitudes like //
gdalwarp -t_srs "+proj=stere" in.tif out.tif => fully white image
gdalwarp -t_srs "+proj=stere +lat_ts=0.0 +lat+0=-90.0 +lon_0=-179.9999 +k_0=
1.0 +x_0=0 +y_0=0" -wo SAMPLE_GRID=YES in.tif out.tif => original images
diagonally shown on a white background like \\

I tried some other combinations with same bad results.  I have already
looked into the list of questions posted already with no much luck either.

Does someone know which are the right arguments for gdalwarp to obtain the
image I want to obtain?


==========================================================================================
The input image info:
Driver: GTiff/GeoTIFF
Size is 7482, 1871
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Equirectangular"],
    PARAMETER["latitude_of_origin",30],
    PARAMETER["central_meridian",142],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-179.999900,0.029583)
Pixel Size = (0.04811252,-0.04811252)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-179.9999000,   0.0295831) (141d59'53.28"E,  0d 0'0.00"N)
Lower Left  (-179.9999000, -89.9889464) (141d59'53.28"E,  0d 0'2.93"S)
Upper Right ( 179.9779928,   0.0295831) (142d 0'6.72"E,  0d 0'0.00"N)
Lower Right ( 179.9779928, -89.9889464) (142d 0'6.72"E,  0d 0'2.93"S)
Center      (  -0.0109536, -44.9796817) (142d 0'0.00"E,  0d 0'1.46"S)
Band 1 Block=7482x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 255,255,255,255
    1: 0,0,0,255
    2: 0,0,85,255
    3: 0,0,170,255
    4: 0,0,255,255
    5: 0,85,0,255
    6: 0,85,85,255
    7: 0,85,170,255
.......... rest of color table
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070205/28915841/attachment.html
From Charles.Wivell at dnr.state.mn.us  Mon Feb  5 13:39:55 2007
From: Charles.Wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] ER Mapper and Visual C++ 2005...?
Message-ID: <45C7259B02000056000027F3@co5.dnr.state.mn.us>


Hi all;

I'm trying to get the ECW/JPEG 2000 libraries to work in a VS 2005 C++
application.

The code looks something like...



	mpECWImage = new CNCSFile();
	eError = mpECWImage->Open(fpath,FALSE,FALSE);

	if (eError == NCS_SUCCESS) {
		HaveOpenECW = TRUE;
	}

This works, I can get the members of the image by doing the following:

	// Get information about the ECW image
	mnNumOfECWSamps = mpECWImage->m_nWidth;
	mnNumOfECWLines = mpECWImage->m_nHeight;
	mnNumOfECWBands = mpECWImage->m_nNumberOfBands;

	// Get the upper left corner of the full ECW image (UTM)
	mdULECWNort = mpECWImage->m_dOriginY;
	mdULECWEast = mpECWImage->m_dOriginX;
	mdECWSampGSD = mpECWImage->m_dCellIncrementX;
	mdECWLineGSD = -1.0 * mpECWImage->m_dCellIncrementY;

I tried using the GetFileInfo() routine but it comes back with the
structure empty..... (all zeros)

I then try setting a view into the ECW image by....

	eError = mpECWImage->SetView(3, BandList, nsamps, nlines,
ULEast, ULNort, LREast, LRNort);
	if (eError == NCS_SUCCESS)
	{
		HaveViewECW = TRUE;
	}

The function returns with a success but when I try to look at the view
structure by:

	NCSFileView *FileSetInfo = GetNCSFileView();

The view structure is empty.... (all values are zero)

I would like to read one band of the ECW view into a memory buffer by
doing :

	for (iline = 0; iline < nlines; iline++)
	{
		mpECWImage->ReadLineRGB(LineBuffer);
		icount2 = 0;
		for (isamp = 0; isamp < nsamps; isamp++)
		{
			test = LineBuffer[icount2 + CountOffset];
			mpECWWndBuffer[icount] = test;

			icount++;
			icount2 =+ 3;
		}
	}

But I'm getting an error from the ReadLineRGB() function the first time
it is called. LineBuffer is being reserved at a size of an unsigned char
(nsamps * 3)
               mnECWWndSize = nlines * nsamps;
	mpECWWndBuffer = new unsigned char[mnECWWndSize];  // one band
of the ECW image
	unsigned char *LineBuffer = new unsigned char[nsamps * 3]; //
the line of the triplet for the ECW image....

Note: CountOffset is either a 0,1 or 2, depending on which band is to
be read into the buffer....

I think this is because SetView is not working correctly.....? Anyone
know what I'm missing? Maybe I'm missing a header file or need a way to
start the ECW libraries...?

Any help would be greatly appreciated!!

Chuck



=====================================
Charles Wivell
MN DNR Forestry/Resource Assessment
413 SE 13th Street
Grand Rapids, MN 55744
218-327-4449 x 233
=====================================

From warmerdam at pobox.com  Mon Feb  5 14:54:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FOSS4G 2007 Call for Workshops
Message-ID: <45C78B75.1030902@pobox.com>

The FOSS4G (Free and Open Source Software for Geospatial) conference is
pleased to announce the Call for Workshops for the 2007 conference,
being held September 24-27 in beautiful Victoria, British Columbia,
Canada.

FOSS4G is the premier conference for the open source geospatial
community, providing a place for developers, users, and people new to
open source geospatial to get a full-immersion experience in both
established and leading edge geospatial technologies.

This is your chance to showcase your favorite application, integration
solution, or other topic. You will use your superior classroom skills to
lead a group of attendees through your chosen topic in either a half-day
or ninety minute lab or classroom format. Half-day workshops will be
delivered on Monday, September 24 (the Workshops day), while the ninety
minute workshops will run concurrently with the presentations during the
remainder of the conference.

While we are open to workshops on a wide range of topics, we strongly
encourage workshop submissions on the following topics:

Practical Introduction to ___________
Interoperability
NeoGeography and NovelGeography
Using a Software Stack
3D Worlds
In the tradition of previous FOSS4G events, we expect that the majority
of workshops will be "hands on", with participants seated in front of
computers and able to follow along with the instructor, working directly
with the software and applications under discussion.

Be prepared to spend considerable effort in creating your workshop.
Past experience has shown that a high quality workshop requires about
three days of preparation for each hour of presentation time. As part of
this preparation you will be expected to develop material for attendees
to take away with them, such as handouts, a 'workbook', CDROM, etc.

In recognition of this effort, workshop presenters will receive a
reduction in the price of conference registration:

free registration for delivering a half-day workshop
half-price registration for delivering a 90-minute workshop
Because of limited space, you may want to consider submitting two
versions of your topic, one for each length format.

Please visit the workshops page on our website to download the
submission templates and instructions for sending them in:

http://www.foss4g2007.org/workshops.html

The deadline for workshop submissions is February 28, 2007. Submit
early, submit often!


From warmerdam at pobox.com  Mon Feb  5 16:09:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] bug:  ogr2ogr gml output
In-Reply-To: <AB38021D12570A4AB907F442AE548807021B9378@stcem04.statcan.ca>
References: <AB38021D12570A4AB907F442AE548807021B9378@stcem04.statcan.ca>
Message-ID: <45C79D24.4020507@pobox.com>

Peter.Rushforth@statcan.ca wrote:
> Hi,
> 
> Two bugs, in fact:
> 
> i) When an input gml file contains a feature which contains
> a property of the same name (although beginning with a lower-case letter
> as per gml conventions), ogr2ogr gets confused.  It appears that
> it is not case-sensitive.  When the output is also gml, spurious
> gml:featureMembers appear, as the simple property element has been
> mistaken for the complex feature element.  The issue is reflected
> in the gfs file produced (samples attached).
> eg. ogr2ogr -s_srs NAD83 -t_srs EPSG:3347 -f GML messed_up_features.gml gecu000e07g_e.gml  

Peter,

I have reproduced a problem with this dataset, and submitted a bug
report for this problem:

  http://bugzilla.remotesensing.org/show_bug.cgi?id=1478

I don't anticipate it being dealt with immediately.

> ii)  When translating a shape file with accented characters into gml,
> ogr2ogr outputs a file which it says is utf-8 encoded, but which won't
> parse and which contains iso-8859-1 codepoints. (sample attached).
> eg. ogr2ogr -f GML bad_encoding.gml shp/geco000e07a_f.shp

OGR is currently not character set aware and so this sort of problem
can happen quite easily.  There is an RFC out with the aim of addressing
this in GDAL 1.5.  If you wish, you could file a bug on this issue, and
we can review it once the RFC is implemented.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Mon Feb  5 16:25:53 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Storing Rasters in Databases
Message-ID: <45C7A0E1.5030908@perkins.net>

Hi,

Does anyone know of any databases that allow for the storage of raster
data (in addition to spatial vector objects)? I know that Oracle 10g
supports this with their GeoRaster type. Do any others? Are any of these
accessible via GDAL? (I know that GeoRaster isn't currently, though we
might be interested in fixing that if Oracle's the way to go). Any way
to store rasters in PostGIS databases? Or MS SQL Server?

Cheers,

Sy




From hobu at iastate.edu  Mon Feb  5 16:34:13 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Storing Rasters in Databases
In-Reply-To: <45C7A0E1.5030908@perkins.net>
References: <45C7A0E1.5030908@perkins.net>
Message-ID: <6.2.3.4.2.20070205153048.036f43c8@hobu.mail.iastate.edu>

Sy,

There's always ArcSDE, of course.  It doesn't really provide you much 
sql-level access to the data though, so outside of a kind of slow, 
across-the-network bucket of bits, I don't know how much other 
utility it brings.

I hope to have the GDAL driver done that reads ArcSDE data by the end 
of March 
<http://lists.maptools.org/pipermail/gdal-dev/2006-December/011133.html>. 
There is code currently in subversion that can read data, but it is 
very crude and guaranteed to frustrate (testers wanted ;)

Cheers

Howard

At 03:25 PM 2/5/2007, Simon Perkins wrote:
>Hi,
>
>Does anyone know of any databases that allow for the storage of raster
>data (in addition to spatial vector objects)? I know that Oracle 10g
>supports this with their GeoRaster type. Do any others? Are any of these
>accessible via GDAL? (I know that GeoRaster isn't currently, though we
>might be interested in fixing that if Oracle's the way to go). Any way
>to store rasters in PostGIS databases? Or MS SQL Server?
>
>Cheers,
>
>Sy
>
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From Allan.Meek at drdc-rddc.gc.ca  Mon Feb  5 17:12:30 2007
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RawRasterBand -- bIsVSIL
Message-ID: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi,

I'm working on a driver for a single-band raw image that needs large
files support. When I set bIsVSIL in the line below to TRUE, compile
GDAL, and run gdal_translate (or any of the other apps), I get a crash.
The crash occurs regardless of the image size.

poDS->SetBand( 
            1, new RawRasterBand( poDS, nBand, fpRaw,
                                  nImgOffset, nPixelOffset, nLineOffset,

                                  eDataType, bNativeOrder, bIsVSIL ));

I traced the problem and found that the crash occurs at the first call
to VSIFSeekL in RawRasterBand::Seek().

None of the other raw image formats that have bIsVSIL set to TRUE give
me this trouble. I'm working in Red Hat Linux. Is there some switch I'm
missing, some compile instruction I don't have?

Thanks,
Allan Meek


From warmerdam at pobox.com  Mon Feb  5 18:54:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RawRasterBand -- bIsVSIL
In-Reply-To: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <45C7C3B8.2010602@pobox.com>

Meek, Allan wrote:
> Hi,
> 
> I'm working on a driver for a single-band raw image that needs large
> files support. When I set bIsVSIL in the line below to TRUE, compile
> GDAL, and run gdal_translate (or any of the other apps), I get a crash.
> The crash occurs regardless of the image size.
> 
> poDS->SetBand( 
>             1, new RawRasterBand( poDS, nBand, fpRaw,
>                                   nImgOffset, nPixelOffset, nLineOffset,
> 
>                                   eDataType, bNativeOrder, bIsVSIL ));
> 
> I traced the problem and found that the crash occurs at the first call
> to VSIFSeekL in RawRasterBand::Seek().
> 
> None of the other raw image formats that have bIsVSIL set to TRUE give
> me this trouble. I'm working in Red Hat Linux. Is there some switch I'm
> missing, some compile instruction I don't have?

Allan,

Are you using VSIFOpenL() to open the file handle that you pass to
RawRasterBand()?  If yes, the bIsVSIL TRUE is appropriate.  If instead
you are using VSIFOpen() then you should pass FALSE for bIsVSIL.

There is an RFC under development to obliterate this difference and
move everything to the large file API before GDAL 1.5.0 release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Wolfgang.Qual at gmx.net  Tue Feb  6 03:18:34 2007
From: Wolfgang.Qual at gmx.net (Wolfgang Qual)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] create buffer of a shapefile on the command-line using
	ogr - possible?
In-Reply-To: <45C748B5.8070907@pobox.com>
References: <200702051000.35882.wolfgang.qual@gmx.net>
	<45C748B5.8070907@pobox.com>
Message-ID: <20070206081834.47090@gmx.net>

Hi Frank,
ok. Thanks for your answer. Maybe it will be possible in the future... ;)

Wolfgang

-------- Original-Nachricht --------
Datum: Mon, 05 Feb 2007 10:09:41 -0500
Von: Frank Warmerdam <warmerdam@pobox.com>
An: wqual <wolfgang.qual@gmx.net>
CC: gdal-dev@lists.maptools.org
Betreff: Re: [Gdal-dev] create buffer of a shapefile on the command-line using ogr - possible?

> wqual wrote:
> > Hi list,
> > is it possible to create a buffer-theme (for an input shapefile) on the 
> > command-line using ogr-utilities with some sql-commands? Or do I need to
> > write a script (I have read something about this in this list). I am
> just 
> > curious...
> > Any hints would be great.
> 
> Wolfgang,
> 
> There is currently no way to invoke operators like buffer using the
> commandline
> tools.  You would need to either write a program, or a script in python,
> etc.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From rkgeorge at cadmaps.com  Tue Feb  6 14:45:17 2007
From: rkgeorge at cadmaps.com (Randy George)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation
Message-ID: <20070206194519.12A2562206E@mpls-qmqp-03.inet.qwest.net>

Hi,

 

            Revisiting the problem I'm experiencing using ogr2ogr 1.4.0 in
FWTools 1.1.3 to translate USGS NHD data into PostGIS.

 

Looking at a typical NHDArea table of the geodatabase mdb it appears that
the Shape field's internal 'Shape Type' is listed as 19. Unless there has
been a recent change, I don't think the shp format has a type 19. I ran a
test conversion to svg with my own translator forcing .shp type 19 to a type
5 (Polygon) and I get valid polygon <paths>?

 

Has ESRI added an additional "Shape Type" to the list? 

 

If shp type 19 is unknown to the ogr translator that would explain the empty
geometry columns and sporadic empty geometry fields.

 

thanks

randy

 

  _____  

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Randy George
Sent: Wednesday, January 31, 2007 8:33 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation

 

 

Hi,

 

            I am attempting to translate some NHD data from
ftp://nhdftp.usgs.gov/SubRegions/ using ogr2ogr 1.4.0 in FWTools 1.1.3, but
having some problems.

 

The NHD data comes as ESRI geodatabase .mdb files. I was excited to see that
ogr2ogr now supportsESRI geodatabase mdb format and ran the following:

 

ogr2ogr -f PostgreSQL PG:"user=user dbname=NHD host=localhost
password=password port=5432" D:\NHD\NHDH0101\NHDH0101.mdb

 

The translation went smoothly without apparent error resulting in a set of
tables with geometry_columns entries:

"8012398";"''";"public";"Basin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012493";"''";"public";"HYDRO_NET_Junctions";"wkb_geometry";"2";"32767";"GE
OMETRY"

"8009168";"''";"public";"NHDArea";"wkb_geometry";"2";"32767";"GEOMETRY"

"8009194";"''";"public";"NHDFlowline";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012333";"''";"public";"NHDLine";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012359";"''";"public";"NHDLineEventFC";"wkb_geometry";"2";"32767";"GEOMETR
Y"

"8012346";"''";"public";"NHDPoint";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012372";"''";"public";"NHDPointEventFC";"wkb_geometry";"2";"32767";"GEOMET
RY"

"8009181";"''";"public";"NHDWaterbody";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012385";"''";"public";"Region";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012436";"''";"public";"Subbasin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012417";"''";"public";"Subregion";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012480";"''";"public";"Subwatershed";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012467";"''";"public";"Watershed";"wkb_geometry";"2";"32767";"GEOMETRY"

 

However, several of the tables, not all, have empty wkb_geometry columns. In
addition a couple of tables have incompletely translated wkb_geometry with
only some rows containing data.

 

I then tried using an ODBC DSN:

ogr2ogr -f PostgreSQL -update -overwrite PG:"user=user dbname=NHD
host=localhost password=password port=5432" PGeo:NHD Basin 

but the Basin.wkb_geometry was still empty. The Access mdb file appears to
have long binary data in a Shape column.

 

Perhaps individual tables need to be translated with a specified geom
column? 

 

Is a log generated by an ogr2ogr translation?

 

Thanks

randy

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070206/da80bde2/attachment.html
From MChapman at sanz.com  Tue Feb  6 15:59:34 2007
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation
In-Reply-To: <20070206194519.12A2562206E@mpls-qmqp-03.inet.qwest.net>
Message-ID: <ED3A48B9840E594890A2BC172D1194650A40405B@mailman.san.com>

Randy, 

 

I may have experienced a similar problem not too long ago.  I solved the
issue but can't remember exactly how I did it.  I will download the
dataset and let you know if how I handle the data works for your
problem.  If so, I will send you the answer on how to do it.  It's
basically a wkb geometry type thing if I remember correctly.  I have
PostgreSQL 8.2 on my system.  What version are you importing to? 

 

Martin Chapman

SANZ Inc.

Software Developer

http://www.earthwhere.com

W - 303.495.6326

C  - 303.898.0397

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Randy George
Sent: Tuesday, February 06, 2007 12:45 PM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] RE: ogr2ogr geodatabase translation

 

Hi,

 

            Revisiting the problem I'm experiencing using ogr2ogr 1.4.0
in FWTools 1.1.3 to translate USGS NHD data into PostGIS.

 

Looking at a typical NHDArea table of the geodatabase mdb it appears
that the Shape field's internal 'Shape Type' is listed as 19. Unless
there has been a recent change, I don't think the shp format has a type
19. I ran a test conversion to svg with my own translator forcing .shp
type 19 to a type 5 (Polygon) and I get valid polygon <paths>?

 

Has ESRI added an additional "Shape Type" to the list? 

 

If shp type 19 is unknown to the ogr translator that would explain the
empty geometry columns and sporadic empty geometry fields.

 

thanks

randy

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Randy George
Sent: Wednesday, January 31, 2007 8:33 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation

 

 

Hi,

 

            I am attempting to translate some NHD data from
ftp://nhdftp.usgs.gov/SubRegions/ using ogr2ogr 1.4.0 in FWTools 1.1.3,
but having some problems.

 

The NHD data comes as ESRI geodatabase .mdb files. I was excited to see
that ogr2ogr now supportsESRI geodatabase mdb format and ran the
following:

 

ogr2ogr -f PostgreSQL PG:"user=user dbname=NHD host=localhost
password=password port=5432" D:\NHD\NHDH0101\NHDH0101.mdb

 

The translation went smoothly without apparent error resulting in a set
of tables with geometry_columns entries:

"8012398";"''";"public";"Basin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012493";"''";"public";"HYDRO_NET_Junctions";"wkb_geometry";"2";"32767"
;"GEOMETRY"

"8009168";"''";"public";"NHDArea";"wkb_geometry";"2";"32767";"GEOMETRY"

"8009194";"''";"public";"NHDFlowline";"wkb_geometry";"2";"32767";"GEOMET
RY"

"8012333";"''";"public";"NHDLine";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012359";"''";"public";"NHDLineEventFC";"wkb_geometry";"2";"32767";"GEO
METRY"

"8012346";"''";"public";"NHDPoint";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012372";"''";"public";"NHDPointEventFC";"wkb_geometry";"2";"32767";"GE
OMETRY"

"8009181";"''";"public";"NHDWaterbody";"wkb_geometry";"2";"32767";"GEOME
TRY"

"8012385";"''";"public";"Region";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012436";"''";"public";"Subbasin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012417";"''";"public";"Subregion";"wkb_geometry";"2";"32767";"GEOMETRY
"

"8012480";"''";"public";"Subwatershed";"wkb_geometry";"2";"32767";"GEOME
TRY"

"8012467";"''";"public";"Watershed";"wkb_geometry";"2";"32767";"GEOMETRY
"

 

However, several of the tables, not all, have empty wkb_geometry
columns. In addition a couple of tables have incompletely translated
wkb_geometry with only some rows containing data.

 

I then tried using an ODBC DSN:

ogr2ogr -f PostgreSQL -update -overwrite PG:"user=user dbname=NHD
host=localhost password=password port=5432" PGeo:NHD Basin 

but the Basin.wkb_geometry was still empty. The Access mdb file appears
to have long binary data in a Shape column.

 

Perhaps individual tables need to be translated with a specified geom
column? 

 

Is a log generated by an ogr2ogr translation?

 

Thanks

randy

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070206/ee758f10/attachment.html
From MChapman at sanz.com  Tue Feb  6 16:28:10 2007
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation
In-Reply-To: <20070206194519.12A2562206E@mpls-qmqp-03.inet.qwest.net>
Message-ID: <ED3A48B9840E594890A2BC172D1194650A4040B2@mailman.san.com>

Randy,

 

I don't know about your geodatabase but the line files I downloaded from
the ftp link you gave are geometry type 13 or PolylineZ.  Which is an
OGR wkbLineString25D.  Perhaps you have to pass a command switch to
ogr2ogr to flatten the object to 2D like the function call flatten2D(),
much like you did in your own translator.  Maybe try the -nlt option to
set the geometry to GEOMETRY or POLYGON to force the conversion. 

 

Martin Chapman

SANZ Inc.

Software Developer

http://www.earthwhere.com

W - 303.495.6326

C  - 303.898.0397

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Randy George
Sent: Tuesday, February 06, 2007 12:45 PM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] RE: ogr2ogr geodatabase translation

 

Hi,

 

            Revisiting the problem I'm experiencing using ogr2ogr 1.4.0
in FWTools 1.1.3 to translate USGS NHD data into PostGIS.

 

Looking at a typical NHDArea table of the geodatabase mdb it appears
that the Shape field's internal 'Shape Type' is listed as 19. Unless
there has been a recent change, I don't think the shp format has a type
19. I ran a test conversion to svg with my own translator forcing .shp
type 19 to a type 5 (Polygon) and I get valid polygon <paths>?

 

Has ESRI added an additional "Shape Type" to the list? 

 

If shp type 19 is unknown to the ogr translator that would explain the
empty geometry columns and sporadic empty geometry fields.

 

thanks

randy

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Randy George
Sent: Wednesday, January 31, 2007 8:33 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation

 

 

Hi,

 

            I am attempting to translate some NHD data from
ftp://nhdftp.usgs.gov/SubRegions/ using ogr2ogr 1.4.0 in FWTools 1.1.3,
but having some problems.

 

The NHD data comes as ESRI geodatabase .mdb files. I was excited to see
that ogr2ogr now supportsESRI geodatabase mdb format and ran the
following:

 

ogr2ogr -f PostgreSQL PG:"user=user dbname=NHD host=localhost
password=password port=5432" D:\NHD\NHDH0101\NHDH0101.mdb

 

The translation went smoothly without apparent error resulting in a set
of tables with geometry_columns entries:

"8012398";"''";"public";"Basin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012493";"''";"public";"HYDRO_NET_Junctions";"wkb_geometry";"2";"32767"
;"GEOMETRY"

"8009168";"''";"public";"NHDArea";"wkb_geometry";"2";"32767";"GEOMETRY"

"8009194";"''";"public";"NHDFlowline";"wkb_geometry";"2";"32767";"GEOMET
RY"

"8012333";"''";"public";"NHDLine";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012359";"''";"public";"NHDLineEventFC";"wkb_geometry";"2";"32767";"GEO
METRY"

"8012346";"''";"public";"NHDPoint";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012372";"''";"public";"NHDPointEventFC";"wkb_geometry";"2";"32767";"GE
OMETRY"

"8009181";"''";"public";"NHDWaterbody";"wkb_geometry";"2";"32767";"GEOME
TRY"

"8012385";"''";"public";"Region";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012436";"''";"public";"Subbasin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012417";"''";"public";"Subregion";"wkb_geometry";"2";"32767";"GEOMETRY
"

"8012480";"''";"public";"Subwatershed";"wkb_geometry";"2";"32767";"GEOME
TRY"

"8012467";"''";"public";"Watershed";"wkb_geometry";"2";"32767";"GEOMETRY
"

 

However, several of the tables, not all, have empty wkb_geometry
columns. In addition a couple of tables have incompletely translated
wkb_geometry with only some rows containing data.

 

I then tried using an ODBC DSN:

ogr2ogr -f PostgreSQL -update -overwrite PG:"user=user dbname=NHD
host=localhost password=password port=5432" PGeo:NHD Basin 

but the Basin.wkb_geometry was still empty. The Access mdb file appears
to have long binary data in a Shape column.

 

Perhaps individual tables need to be translated with a specified geom
column? 

 

Is a log generated by an ogr2ogr translation?

 

Thanks

randy

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070206/5da9661b/attachment.html
From Charles.Wivell at dnr.state.mn.us  Tue Feb  6 16:47:59 2007
From: Charles.Wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] ER Mapper and Visual C++ 2005...?
In-Reply-To: <45C7259B02000056000027F3@co5.dnr.state.mn.us>
References: <45C7259B02000056000027F3@co5.dnr.state.mn.us>
Message-ID: <45C8A32F020000560000283C@co5.dnr.state.mn.us>

Hi all;

FYI... I could never get the C++ calls to work, so I decided to try
just the C calls in the API. It took less than 2 hours and everything
was work as I thought it would.


Chuck



=====================================
Charles Wivell
MN DNR Forestry/Resource Assessment
413 SE 13th Street
Grand Rapids, MN 55744
218-327-4449 x 233
=====================================

>>> "Charles Wivell" <Charles.Wivell@dnr.state.mn.us> 2/5/2007 12:39 PM
>>>

Hi all;

I'm trying to get the ECW/JPEG 2000 libraries to work in a VS 2005 C++
application.

The code looks something like...



	mpECWImage = new CNCSFile();
	eError = mpECWImage->Open(fpath,FALSE,FALSE);

	if (eError == NCS_SUCCESS) {
		HaveOpenECW = TRUE;
	}

This works, I can get the members of the image by doing the following:

	// Get information about the ECW image
	mnNumOfECWSamps = mpECWImage->m_nWidth;
	mnNumOfECWLines = mpECWImage->m_nHeight;
	mnNumOfECWBands = mpECWImage->m_nNumberOfBands;

	// Get the upper left corner of the full ECW image (UTM)
	mdULECWNort = mpECWImage->m_dOriginY;
	mdULECWEast = mpECWImage->m_dOriginX;
	mdECWSampGSD = mpECWImage->m_dCellIncrementX;
	mdECWLineGSD = -1.0 * mpECWImage->m_dCellIncrementY;

I tried using the GetFileInfo() routine but it comes back with the
structure empty..... (all zeros)

I then try setting a view into the ECW image by....

	eError = mpECWImage->SetView(3, BandList, nsamps, nlines,
ULEast, ULNort, LREast, LRNort);
	if (eError == NCS_SUCCESS)
	{
		HaveViewECW = TRUE;
	}

The function returns with a success but when I try to look at the view
structure by:

	NCSFileView *FileSetInfo = GetNCSFileView();

The view structure is empty.... (all values are zero)

I would like to read one band of the ECW view into a memory buffer by
doing :

	for (iline = 0; iline < nlines; iline++)
	{
		mpECWImage->ReadLineRGB(LineBuffer);
		icount2 = 0;
		for (isamp = 0; isamp < nsamps; isamp++)
		{
			test = LineBuffer[icount2 + CountOffset];
			mpECWWndBuffer[icount] = test;

			icount++;
			icount2 =+ 3;
		}
	}

But I'm getting an error from the ReadLineRGB() function the first
time
it is called. LineBuffer is being reserved at a size of an unsigned
char
(nsamps * 3)
               mnECWWndSize = nlines * nsamps;
	mpECWWndBuffer = new unsigned char[mnECWWndSize];  // one band
of the ECW image
	unsigned char *LineBuffer = new unsigned char[nsamps * 3]; //
the line of the triplet for the ECW image....

Note: CountOffset is either a 0,1 or 2, depending on which band is to
be read into the buffer....

I think this is because SetView is not working correctly.....? Anyone
know what I'm missing? Maybe I'm missing a header file or need a way
to
start the ECW libraries...?

Any help would be greatly appreciated!!

Chuck



=====================================
Charles Wivell
MN DNR Forestry/Resource Assessment
413 SE 13th Street
Grand Rapids, MN 55744
218-327-4449 x 233
=====================================
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev

From matt.wilkie at gov.yk.ca  Tue Feb  6 16:55:49 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] packbits compression no good for 16bit?
Message-ID: <45C8F965.6060100@gov.yk.ca>

Hi GDAL,

I seem to be having a really bad stretch of gdal oddities this month :) 
Here is the next installment:

When compressing a 22mb 16bit geotiff using packbits compression I only 
get a 1% reduction in filesize. Is this expected? The source image is 
7/8ths nodata so I think I should easily get greater than 90% 
compression. I get the same results with fwtools 1.1.4 and 1.2.0 on two 
machines, both running WinXPsp2.

    for %a in (deflate lzw none packbits) do (
	gdal_translate -co compress=%a source.tif compress_%a.tif
	)

    dir *.tif

      4,810,097 source.tif
      1,225,395 compress_deflate.tif
      1,977,859 compress_lzw.tif
     23,073,871 compress_none.tif
     22,456,093 compress_packbits.tif

    gdalinfo source.tif

Driver: GTiff/GeoTIFF
Size is 4801, 2401
Coordinate System is `'
Origin = (-56.000416666666666,48.000416666666666)
Pixel Size = (0.000833333333333,-0.000833333333333)
Image Structure Metadata:
   COMPRESSION=LZW
Corner Coordinates:
Upper Left  ( -56.0004167,  48.0004167)
Lower Left  ( -56.0004167,  45.9995833)
Upper Right ( -51.9995833,  48.0004167)
Lower Right ( -51.9995833,  45.9995833)
Center      ( -54.0000000,  47.0000000)
Band 1 Block=4801x1 Type=Int16, ColorInterp=Gray
   NoData Value=-32767


Have I found another bug or am I not understanding the proper 
application of packbits compression?




-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From matt.wilkie at gov.yk.ca  Tue Feb  6 19:21:17 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] gdaladdo with .rrd ignoring compress overviews?
Message-ID: <45C91B7D.4010205@gov.yk.ca>

Hi gdal, I'm on roll today! Here's another one: Why does gdalinfo report 
that overviews are compressed with RLC when I asked for LZW? Can only 
one --config option be used at a time? Or does .rrd not support choice 
of compression?

    gdaladdo --config use_rrd yes --config compress_overview lzw -r 
nearest 094M.tif 2 4 8 16 32

    gdalinfo 094M.aux

Driver: HFA/Erdas Imagine Images (.img)
Size is 5817, 5714
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 5714.0)
Upper Right ( 5817.0,    0.0)
Lower Right ( 5817.0, 5714.0)
Center      ( 2908.5, 2857.0)
Band 1 Block=64x64 Type=Byte, ColorInterp=Undefined
   Description = Layer_1
   Overviews: 2909x2857, 1455x1429, 728x715, 364x358, 182x179
   Metadata:
     LAYER_TYPE=athematic
   Image Structure Metadata:
     COMPRESSION=RLC




matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From sjahputerao at missouri.edu  Tue Feb  6 19:31:31 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency
In-Reply-To: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <45C91DE3.7080108@missouri.edu>

If we have a multi-channel image, is it safe to assume that the block height and width are the same for all channels?

e.g.

suppose DS is a (GDALDataset*) of a 4-channel image, then
int widthi, heighti, widthj, heightj;
(DS->GetRasterBand(i))->GetBlockSize( &widthi, &heightj );
(DS->GetRasterBand(j))->GetBlockSize( &widthi, &heightj );

are widthi == widthj and heighti == heightj for all i != j ? 

Thanks
Ozy





From warmerdam at pobox.com  Tue Feb  6 23:28:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] gdaladdo with .rrd ignoring compress overviews?
In-Reply-To: <45C91B7D.4010205@gov.yk.ca>
References: <45C91B7D.4010205@gov.yk.ca>
Message-ID: <45C95566.5040709@pobox.com>

Matt Wilkie wrote:
> Hi gdal, I'm on roll today! Here's another one: Why does gdalinfo report 
> that overviews are compressed with RLC when I asked for LZW? Can only 
> one --config option be used at a time? Or does .rrd not support choice 
> of compression?

Matt,

Erdas Imagine files don't support LZW.  RLC is the only supported
compression (I think).  Frankly, I don't know why it even used the
RLC compression.  I don't see any support for the COMPRESS_OVERVIEW
config option in the HFA/.img/.aux code.

Best regards,

>    gdaladdo --config use_rrd yes --config compress_overview lzw -r 
> nearest 094M.tif 2 4 8 16 32
> 
>    gdalinfo 094M.aux
> 
> Driver: HFA/Erdas Imagine Images (.img)
> Size is 5817, 5714
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 5714.0)
> Upper Right ( 5817.0,    0.0)
> Lower Right ( 5817.0, 5714.0)
> Center      ( 2908.5, 2857.0)
> Band 1 Block=64x64 Type=Byte, ColorInterp=Undefined
>   Description = Layer_1
>   Overviews: 2909x2857, 1455x1429, 728x715, 364x358, 182x179
>   Metadata:
>     LAYER_TYPE=athematic
>   Image Structure Metadata:
>     COMPRESSION=RLC




-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Feb  6 23:37:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] packbits compression no good for 16bit?
In-Reply-To: <45C8F965.6060100@gov.yk.ca>
References: <45C8F965.6060100@gov.yk.ca>
Message-ID: <45C957A4.6040905@pobox.com>

Matt Wilkie wrote:
> Hi GDAL,
> 
> I seem to be having a really bad stretch of gdal oddities this month :) 
> Here is the next installment:
> 
> When compressing a 22mb 16bit geotiff using packbits compression I only 
> get a 1% reduction in filesize. Is this expected? The source image is 
> 7/8ths nodata so I think I should easily get greater than 90% 
> compression. I get the same results with fwtools 1.1.4 and 1.2.0 on two 
> machines, both running WinXPsp2.
> 
>    for %a in (deflate lzw none packbits) do (
>     gdal_translate -co compress=%a source.tif compress_%a.tif
>     )
> 
>    dir *.tif
> 
>      4,810,097 source.tif
>      1,225,395 compress_deflate.tif
>      1,977,859 compress_lzw.tif
>     23,073,871 compress_none.tif
>     22,456,093 compress_packbits.tif

Matt,

I believe that packbits compression is applied byte by byte.  If your
nodata areas use a 16bit value where the high order and low order byte
are different then there will essentially be no "runs" for the packbits
compression scheme to compress.  I think you would find it does a great
deal better if your nodata value was something like 0.

Packbits is very simple minded.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Feb  7 02:42:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency
In-Reply-To: <45C91DE3.7080108@missouri.edu>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<45C91DE3.7080108@missouri.edu>
Message-ID: <45C982DE.9010005@pobox.com>

Ozy Sjahputera wrote:
> If we have a multi-channel image, is it safe to assume that the block 
> height and width are the same for all channels?
> 
> e.g.
> 
> suppose DS is a (GDALDataset*) of a 4-channel image, then
> int widthi, heighti, widthj, heightj;
> (DS->GetRasterBand(i))->GetBlockSize( &widthi, &heightj );
> (DS->GetRasterBand(j))->GetBlockSize( &widthi, &heightj );
> 
> are widthi == widthj and heighti == heightj for all i != j ?

Ozy,

This would *almost always* be true, but there can be exceptions.  You
will have to decide how risk averse you are.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From josegomez at gmx.net  Wed Feb  7 02:35:20 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Warping MODIS
Message-ID: <20070207073520.59770@gmx.net>

Hi!

I have read a couple of postings regarding MODIS subsetting and warping. I have been using HEGTools up to now, but I find that having just GDAL in my processing chain makes life easier. So far, i understand that I need to warp a subdataset off the HDFEOS file to change the ellps parameter so that the subdataset is available in Lat/Long WGS84. This seems to work, and I can the reproject into UTMXX/DatumXYZ again. This requires a gdalwarp, a  gdal_translate and a further gdalwarp. is there a more direct route?

Further, is the gdalwarper API available for python? The docs say it is
incomplete, but maybe there have been new developments? Idea is to have the
previous process sit in the middle of a python program :)

Many thanks!
Jose
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: http://www.gmx.net/de/go/topmail?ac=OM.GX.GX003K11713T4783a

From ari.jolma at tkk.fi  Wed Feb  7 04:29:58 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FOSS4G 2007 Call for Workshops
In-Reply-To: <45C78B75.1030902@pobox.com>
References: <45C78B75.1030902@pobox.com>
Message-ID: <45C99C16.2020503@tkk.fi>

Is there any interest in proposing a generic GDAL/OGR scripting 
workshop? Would it work out or would there be too much of confusion 
among all the languages?

I'd be interested in such or, if that does not work out, then in a 
workshop, which would focus on Perl bindings + the things that I have 
built on top of GDAL/OGR and its bindings, perhaps especially on GTK and 
GTK-Perl and my GTK-Perl Geo stuff.

Ari

Frank Warmerdam wrote:
> The FOSS4G (Free and Open Source Software for Geospatial) conference is
> pleased to announce the Call for Workshops for the 2007 conference,

>
> While we are open to workshops on a wide range of topics, we strongly
> encourage workshop submissions on the following topics:
>
> Practical Introduction to ___________
> Interoperability
> NeoGeography and NovelGeography
> Using a Software Stack
> 3D Worlds
> In the tradition of previous FOSS4G events, we expect that the majority
> of workshops will be "hands on", with participants seated in front of
> computers and able to follow along with the instructor, working directly
> with the software and applications under discussion.
>
> Be prepared to spend considerable effort in creating your workshop.
> Past experience has shown that a high quality workshop requires about
> three days of preparation for each hour of presentation time. As part of
> this preparation you will be expected to develop material for attendees
> to take away with them, such as handouts, a 'workbook', CDROM, etc.
>
> In recognition of this effort, workshop presenters will receive a
> reduction in the price of conference registration:
>
> free registration for delivering a half-day workshop
> half-price registration for delivering a 90-minute workshop
> Because of limited space, you may want to consider submitting two
> versions of your topic, one for each length format.
>
> Please visit the workshops page on our website to download the
> submission templates and instructions for sending them in:
>
> http://www.foss4g2007.org/workshops.html
>
> The deadline for workshop submissions is February 28, 2007. Submit
> early, submit often!
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From josegomez at gmx.net  Wed Feb  7 06:11:03 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Scaling rasters
Message-ID: <20070207111103.230410@gmx.net>

Hi!
I have a raster with value between 1 and 100, and also 0s (these are NODATA). I want to set all the pixels with valid values (DN>=1) to a set value (let's call it Z), while leaving the rest at 0. I have tried gdal_translate -scale 1 100 Z Z, I get something which is half-way there: I get Z where Z should be, but (Z-1) where I should have 0. Apart from writing a little program that does this, can the gdal standard utility programs be used for this?

Thanks!
jose
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From huw_lynch at yahoo.com  Wed Feb  7 10:27:02 2007
From: huw_lynch at yahoo.com (Huw Lynch)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Problems compiling 1.4.0 with intel 9.0 compilers
Message-ID: <20070207152702.37446.qmail@web51406.mail.yahoo.com>


Hi

I've had to work through some problems compiling gdal 1.4.0 with the intel v9.1 compilers (specifically 9.1.043) that I though others may encounter too. I am not sure if the problems are related to my particular environment or to the GDAL build scripts. Here goes anyway;

1. during the configure stage the configure script tests the compiler for _GNU* #defs to decide whether it is invoking the GNU C compiler or not. By default the Intel C compilers define these flags for GNU compatibility. configure ends up deciding that it is invoking GNU C by another name, so starts invoking gcc directly, at which point it is using GCC and no longer doing what I want.

To work around this set the following environment variables;

    CC=icc # you must already have this!
    CFLAGS="-gcc-version=330 -no-gcc"
    CXXFLAGS="-gcc-version=330 -no-gcc"

The -no-gcc stops icc from pre-defining the _GNU #defs and avoids the configure confusion.

2. During make install the ngpython build fails. It attempts to invoke a C compiler but leaves out the compiler name (ie no gcc or icc in the command line). This results in an error "invalid option -d" (reported by /bin/sh when trying to handle args intended for a compiler).

3. Compilation of the swig python glue files fails with lots of pre-processor related logic regarding _GNU #defs. The swig code uses lots of #def checks for GNU compiler versions.

To fix 2 and 3 I had to do the following;

  - manually edit swig/python/GNUmakefile to add AFTER include ../../GDALmake.opt;
     CFLAGS="-w -gcc-version=330"     # this un-does part of what we did in the fix for (1)
  - after running a make install (which will still fail with "invalid option -d")
     cd swig/python
     CC=icc CFLAGS="-w -gcc-version=330" python setup.py install 

I could not figure out why it is necessary to invoke the python setup.py install step out-side the make install job, but this is the only way I could get the compiler choice to be enacted correctly.

Cheers
     



    

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070207/0417f25d/attachment.html
From warmerdam at pobox.com  Wed Feb  7 13:30:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Scaling rasters
In-Reply-To: <20070207111103.230410@gmx.net>
References: <20070207111103.230410@gmx.net>
Message-ID: <45CA1ABF.2030801@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi! I have a raster with value between 1 and 100, and also 0s (these are
> NODATA). I want to set all the pixels with valid values (DN>=1) to a set
> value (let's call it Z), while leaving the rest at 0. I have tried
> gdal_translate -scale 1 100 Z Z, I get something which is half-way there: I
> get Z where Z should be, but (Z-1) where I should have 0. Apart from writing
> a little program that does this, can the gdal standard utility programs be
> used for this?
> 
> Thanks! jose

Jose,

I can't think of any way to accomplish this with the commandline utilities.
A small python script using Numeric and GDAL should be able to do the trick,
though I don't see anything too similar in the samples directory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Feb  7 13:51:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] FOSS4G 2007 Call for Workshops
In-Reply-To: <45C99C16.2020503@tkk.fi>
References: <45C78B75.1030902@pobox.com> <45C99C16.2020503@tkk.fi>
Message-ID: <45CA1FAD.5090703@pobox.com>

Ari Jolma wrote:
> Is there any interest in proposing a generic GDAL/OGR scripting 
> workshop? Would it work out or would there be too much of confusion 
> among all the languages?
> 
> I'd be interested in such or, if that does not work out, then in a 
> workshop, which would focus on Perl bindings + the things that I have 
> built on top of GDAL/OGR and its bindings, perhaps especially on GTK and 
> GTK-Perl and my GTK-Perl Geo stuff.

Ari,

I have been kicking around the idea of a "raster data processing with GDAL"
workshop that would first cover work with the commandline tools, and then
finish with some not-too-challenging scripting.  However, if I were to do that
I'd likely do the scripting aspect in Python.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From neteler at itc.it  Wed Feb  7 11:06:39 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Warping MODIS
In-Reply-To: <20070207073520.59770@gmx.net>
References: <20070207073520.59770@gmx.net>
Message-ID: <20070207160639.GE13097@bartok.itc.it>

On Wed, Feb 07, 2007 at 08:35:20AM +0100, Jose Luis Gomez Dans wrote:
> Hi!
> 
> I have read a couple of postings regarding MODIS subsetting and warping. I have been using HEGTools up to now, but I find that having just GDAL in my processing chain makes life easier. So far, i understand that I need to warp a subdataset off the HDFEOS file to change the ellps parameter so that the subdataset is available in Lat/Long WGS84. This seems to work, and I can the reproject into UTMXX/DatumXYZ again. This requires a gdalwarp, a  gdal_translate and a further gdalwarp. is there a more direct route?
> 
> Further, is the gdalwarper API available for python? The docs say it is
> incomplete, but maybe there have been new developments? Idea is to have the
> previous process sit in the middle of a python program :)
> 
> Many thanks!

Jose,

maybe this script is interesting for you:
http://mpa.itc.it/markus/useful/modis_hdf2erdas_ll_wgs84.sh

(sorry, not Python yet :-)

Markus

From sjahputerao at missouri.edu  Wed Feb  7 11:32:53 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency (and SetColorInterpretation()
	in GTiff)
In-Reply-To: <45CA1DF3.9080007@pobox.com>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<45C91DE3.7080108@missouri.edu> <45C982DE.9010005@pobox.com>
	<45C9A3DF.7070504@missouri.edu> <45CA1DF3.9080007@pobox.com>
Message-ID: <45C9FF35.20200@missouri.edu>

You are probably right.  I am just trying to rule out any possible 
source of image "shift" that I am seeing.

Using RasterIO instead of block write/read seems to increase my 
computation time by 40-50%.  If I find the source of error to be 
something else unrelated to block size, I will go back to using 
blockWrite/Read.  Still looking now.

Frank, one more thing, when I use "Create()" from "GTiff" driver, I 
cannot assign the band name in the new image using :         
dstBand->SetColorInterpretation(srcBand->GetColorInterpretation());
I always get :    ERROR 6: SetColorInterpretation() not supported for 
this dataset. 
However, the first band in the new image seems to have "gray" as the 
band name, while others are "undefined" due to the error above.

But I can do SetColorInterpretation() above if I use "Create()" from 
"MEM" driver. 

Is this a limitation of GTiff driver in GDAL now?  Is there a way I can 
assign the band name after using "Create()" from GTiff driver?

Thanks

Oz

Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> Thanks, Frank. I was using ReadBlock and WriteBlock using the same 
>> Block size obtained from one of the channels (usually channel 1).  I 
>> found out that my output image from some other bands look funny.  So 
>> I replaced the block I/O with regular RasterIO.  I think my output 
>> image is correct now, but the program does run slower with RasterIO.  
>> So my hypothesis is .... there is no guarantee that the block size 
>> for different bands belonging to the same image will always be 
>> identical.  I'm glad you confirmed my suspicion.
>
> Ozy,
>
> I am doubtful that differing block sizes would be your problem since this
> is so rare.  But perhaps there was some other issue.
>
> Do you find things substantially slower with RasterIO()?
>
> Best regards,


From warmerdam at pobox.com  Wed Feb  7 14:40:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Warping MODIS
In-Reply-To: <20070207073520.59770@gmx.net>
References: <20070207073520.59770@gmx.net>
Message-ID: <45CA2B19.4030705@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi!
> 
> I have read a couple of postings regarding MODIS subsetting and warping. I
> have been using HEGTools up to now, but I find that having just GDAL in my
> processing chain makes life easier. So far, i understand that I need to warp
> a subdataset off the HDFEOS file to change the ellps parameter so that the
> subdataset is available in Lat/Long WGS84. This seems to work, and I can the
> reproject into UTMXX/DatumXYZ again. This requires a gdalwarp, a
> gdal_translate and a further gdalwarp. is there a more direct route?

Jose,

You would need to be more specific about what exact steps you are doing.
Off hand I would think you could do things in a single gdalwarp from
a subdataset to an output file in UTM using the -s_srs switch to override
the interpretation of the input coordinate system if required.

> Further, is the gdalwarper API available for python? The docs say it is 
> incomplete, but maybe there have been new developments? Idea is to have the 
> previous process sit in the middle of a python program :)

Currently the only aspect of the warper that is exposed in Python is the
AutoCreateWarpedVRT() function.  It is also possible to manually construct
a warped VRT (as XML) in Python and use that as input to CreateCopy() to
cause a warp to occur.  But there is no tight integration between the
warp api and python.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Wed Feb  7 11:40:55 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] packbits compression no good for 16bit?
In-Reply-To: <45C957A4.6040905@pobox.com>
References: <45C8F965.6060100@gov.yk.ca> <45C957A4.6040905@pobox.com>
Message-ID: <45CA0117.20107@gov.yk.ca>

> I believe that packbits compression is applied byte by byte.  If your
> nodata areas use a 16bit value where the high order and low order byte
> are different then there will essentially be no "runs" for the packbits
> compression scheme to compress.  I think you would find it does a great
> deal better if your nodata value was something like 0.
> 
> Packbits is very simple minded.

Thank you for the peek under the hood. At least I have an idea of what 
is (not) happening now. I'll stick with lzw compression for now.

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Wed Feb  7 15:14:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency (and SetColorInterpretation()
	in GTiff)
In-Reply-To: <45C9FF35.20200@missouri.edu>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<45C91DE3.7080108@missouri.edu> <45C982DE.9010005@pobox.com>
	<45C9A3DF.7070504@missouri.edu> <45CA1DF3.9080007@pobox.com>
	<45C9FF35.20200@missouri.edu>
Message-ID: <45CA332A.5090508@pobox.com>

Ozy Sjahputera wrote:
> You are probably right.  I am just trying to rule out any possible 
> source of image "shift" that I am seeing.
> 
> Using RasterIO instead of block write/read seems to increase my 
> computation time by 40-50%.  If I find the source of error to be 
> something else unrelated to block size, I will go back to using 
> blockWrite/Read.  Still looking now.

Ozy,

Whew, that is substantial overhead.  I'm surprised, and somewhat
disappointed.

> Frank, one more thing, when I use "Create()" from "GTiff" driver, I 
> cannot assign the band name in the new image using :         
> dstBand->SetColorInterpretation(srcBand->GetColorInterpretation());
> I always get :    ERROR 6: SetColorInterpretation() not supported for 
> this dataset. However, the first band in the new image seems to have 
> "gray" as the band name, while others are "undefined" due to the error 
> above.
> 
> But I can do SetColorInterpretation() above if I use "Create()" from 
> "MEM" driver.
> Is this a limitation of GTiff driver in GDAL now?  Is there a way I can 
> assign the band name after using "Create()" from GTiff driver?

There is a distinct concept of band names (descriptions).  But here
you just seem interested in photometric intepretation.

The GeoTIFF driver has very limited support for setting the photometric
interpretation of bands after the file has been created.   I think the
only aspect of this that actually does something is if you set an
extra band to be alpha, it records that in the TIFF file.

If you would like a 3 or more band file to have a TIFF level photometric
interpretation of RGB you can set it using the PHOTOMETRIC=RGB creation
option at Create() time.

This is an example of a situation where Create() then modify doesn't
work well due to lots of stuff getting locked down at the point the
create is completed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sjahputerao at missouri.edu  Wed Feb  7 13:43:04 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency (and SetColorInterpretation()
	in GTiff)
In-Reply-To: <45CA332A.5090508@pobox.com>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<45C91DE3.7080108@missouri.edu> <45C982DE.9010005@pobox.com>
	<45C9A3DF.7070504@missouri.edu> <45CA1DF3.9080007@pobox.com>
	<45C9FF35.20200@missouri.edu> <45CA332A.5090508@pobox.com>
Message-ID: <45CA1DB8.8020806@missouri.edu>

Yes, big bummer on the performance drop after replacing WriteBlock and 
ReadBlock with RasterIO. But I cannot afford having "incorrect" data 
that will screw up my colleagues further down in the pipeline.  So, we 
may have to do parallel processing stuff for this. 



Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> You are probably right.  I am just trying to rule out any possible 
>> source of image "shift" that I am seeing.
>>
>> Using RasterIO instead of block write/read seems to increase my 
>> computation time by 40-50%.  If I find the source of error to be 
>> something else unrelated to block size, I will go back to using 
>> blockWrite/Read.  Still looking now.
>
> Ozy,
>
> Whew, that is substantial overhead.  I'm surprised, and somewhat
> disappointed.
>
>> Frank, one more thing, when I use "Create()" from "GTiff" driver, I 
>> cannot assign the band name in the new image using :         
>> dstBand->SetColorInterpretation(srcBand->GetColorInterpretation());
>> I always get :    ERROR 6: SetColorInterpretation() not supported for 
>> this dataset. However, the first band in the new image seems to have 
>> "gray" as the band name, while others are "undefined" due to the 
>> error above.
>>
>> But I can do SetColorInterpretation() above if I use "Create()" from 
>> "MEM" driver.
>> Is this a limitation of GTiff driver in GDAL now?  Is there a way I 
>> can assign the band name after using "Create()" from GTiff driver?
>
> There is a distinct concept of band names (descriptions).  But here
> you just seem interested in photometric intepretation.
>
> The GeoTIFF driver has very limited support for setting the photometric
> interpretation of bands after the file has been created.   I think the
> only aspect of this that actually does something is if you set an
> extra band to be alpha, it records that in the TIFF file.
>
> If you would like a 3 or more band file to have a TIFF level photometric
> interpretation of RGB you can set it using the PHOTOMETRIC=RGB creation
> option at Create() time.
>
> This is an example of a situation where Create() then modify doesn't
> work well due to lots of stuff getting locked down at the point the
> create is completed.
>
> Best regards,


From ealpert at digitalglobe.com  Wed Feb  7 14:29:54 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Converting Polar Stereographic to WGS84 long/lat
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233E3EAF2@COMAIL01.digitalglobe.com>

I'm use GDAL 1.4.0

 

I thought the following gdalwarp invocation would do the trick but it
creates a black image positioned completely wrong. My file N.tif covers
the northern hemisphere. The gdalinfo is below as well as the gdalinfo
of the output file. Do I need to do something else to convert this data?

 

gdalwarp -t_srs "EPSG:4326"  N.tif WGS.tif

 

 

-bash-2.05b$ gdalinfo N.tif

Driver: GTiff/GeoTIFF

Size is 1024, 1024

Coordinate System is:

PROJCS["unnamed",

    GEOGCS["Coordinate System imported from GRIB file",

        DATUM["unknown",

            SPHEROID["unnamed",6367470,0]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433]],

    PROJECTION["Polar_Stereographic"],

    PARAMETER["latitude_of_origin",60],

    PARAMETER["central_meridian",-80],

    PARAMETER["scale_factor",90],

    PARAMETER["false_easting",0],

    PARAMETER["false_northing",0],

    UNIT["metre",1,

        AUTHORITY["EPSG","9001"]]]

Origin = (-12184935.659713378176093,12184935.659713353961706)

Pixel Size = (23813.000000000000000,-23813.000000000000000)

Metadata:

  AREA_OR_POINT=Area

Corner Coordinates:

Upper Left  (-12184935.660,12184935.660) (145d 0'0.00"E, 20d49'33.60"S)

Lower Left  (-12184935.660,-12199576.340) (124d57'56.16"W,
20d51'29.41"S)

Upper Right (12199576.340,12184935.660) ( 54d57'56.16"E, 20d51'29.41"S)

Lower Right (12199576.340,-12199576.340) ( 35d 0'0.00"W, 20d53'25.05"S)

Center      (    7320.340,   -7320.340) ( 35d 0'0.00"W, 89d54'0.57"N

 

-bash-2.05b$ gdalinfo WGS.tif

Driver: GTiff/GeoTIFF

Size is 2851, 157

Coordinate System is:

GEOGCS["WGS 84",

    DATUM["WGS_1984",

        SPHEROID["WGS 84",6378137,298.2572235629972,

            AUTHORITY["EPSG","7030"]],

        AUTHORITY["EPSG","6326"]],

    PRIMEM["Greenwich",0],

    UNIT["degree",0.0174532925199433],

    AUTHORITY["EPSG","4326"]]

Origin = (-175.679918813105417,-1.452730998140064)

Pixel Size = (0.124296121889026,-0.124296121889026)

Metadata:

  AREA_OR_POINT=Area

Corner Coordinates:

Upper Left  (-175.6799188,  -1.4527310) (175d40'47.71"W,  1d27'9.83"S)

Lower Left  (-175.6799188, -20.9672221) (175d40'47.71"W, 20d58'2.00"S)

Upper Right ( 178.6883247,  -1.4527310) (178d41'17.97"E,  1d27'9.83"S)

Lower Right ( 178.6883247, -20.9672221) (178d41'17.97"E, 20d58'2.00"S)

Center      (   1.5042029, -11.2099766) (  1d30'15.13"E, 11d12'35.92"S)

Band 1 Block=2851x2 Type=Byte, ColorInterp=Gray

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070207/e7b79d49/attachment.html
From sjahputerao at missouri.edu  Wed Feb  7 14:51:29 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency (and SetColorInterpretation()
	in GTiff)
In-Reply-To: <45CA332A.5090508@pobox.com>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<45C91DE3.7080108@missouri.edu> <45C982DE.9010005@pobox.com>
	<45C9A3DF.7070504@missouri.edu> <45CA1DF3.9080007@pobox.com>
	<45C9FF35.20200@missouri.edu> <45CA332A.5090508@pobox.com>
Message-ID: <45CA2DC1.6000901@missouri.edu>

Aha, so there is a way to set the photometric interpretation in GTiff, 
even if this is to be done during file creation.   Yes, I just want to 
give a simple label for the bands in the new GTiff file I created using 
Create().

I suspect the PHOTOMETRIC=RGB will have to be set in the parameter

char **  /papszParmList

/in Create()?  Where do I set this parameter?   Where can I find more 
details on the format of /papszParmList?/

Thanks.

Ozy

Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> You are probably right.  I am just trying to rule out any possible 
>> source of image "shift" that I am seeing.
>>
>> Using RasterIO instead of block write/read seems to increase my 
>> computation time by 40-50%.  If I find the source of error to be 
>> something else unrelated to block size, I will go back to using 
>> blockWrite/Read.  Still looking now.
>
> Ozy,
>
> Whew, that is substantial overhead.  I'm surprised, and somewhat
> disappointed.
>
>> Frank, one more thing, when I use "Create()" from "GTiff" driver, I 
>> cannot assign the band name in the new image using :         
>> dstBand->SetColorInterpretation(srcBand->GetColorInterpretation());
>> I always get :    ERROR 6: SetColorInterpretation() not supported for 
>> this dataset. However, the first band in the new image seems to have 
>> "gray" as the band name, while others are "undefined" due to the 
>> error above.
>>
>> But I can do SetColorInterpretation() above if I use "Create()" from 
>> "MEM" driver.
>> Is this a limitation of GTiff driver in GDAL now?  Is there a way I 
>> can assign the band name after using "Create()" from GTiff driver?
>
> There is a distinct concept of band names (descriptions).  But here
> you just seem interested in photometric intepretation.
>
> The GeoTIFF driver has very limited support for setting the photometric
> interpretation of bands after the file has been created.   I think the
> only aspect of this that actually does something is if you set an
> extra band to be alpha, it records that in the TIFF file.
>
> If you would like a 3 or more band file to have a TIFF level photometric
> interpretation of RGB you can set it using the PHOTOMETRIC=RGB creation
> option at Create() time.
>
> This is an example of a situation where Create() then modify doesn't
> work well due to lots of stuff getting locked down at the point the
> create is completed.
>
> Best regards,


From warmerdam at pobox.com  Wed Feb  7 19:21:48 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency (and SetColorInterpretation()
	in GTiff)
In-Reply-To: <45CA2DC1.6000901@missouri.edu>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<45C91DE3.7080108@missouri.edu> <45C982DE.9010005@pobox.com>
	<45C9A3DF.7070504@missouri.edu> <45CA1DF3.9080007@pobox.com>
	<45C9FF35.20200@missouri.edu> <45CA332A.5090508@pobox.com>
	<45CA2DC1.6000901@missouri.edu>
Message-ID: <45CA6D1C.9070906@pobox.com>

Ozy Sjahputera wrote:
> Aha, so there is a way to set the photometric interpretation in GTiff, 
> even if this is to be done during file creation.   Yes, I just want to 
> give a simple label for the bands in the new GTiff file I created using 
> Create().
> 
> I suspect the PHOTOMETRIC=RGB will have to be set in the parameter
> 
> char **  /papszParmList
> 
> /in Create()?  Where do I set this parameter?   Where can I find more 
> details on the format of /papszParmList?/

Ozy,

It is a NULL terminated list of strings.  So something like:

   char *apszParmList[] = { "PHOTOMETRIC=RGB", NULL };

will do the trick.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sjahputerao at missouri.edu  Wed Feb  7 17:01:24 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency (and SetColorInterpretation()
	in GTiff)
In-Reply-To: <45CA6D1C.9070906@pobox.com>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<45C91DE3.7080108@missouri.edu> <45C982DE.9010005@pobox.com>
	<45C9A3DF.7070504@missouri.edu> <45CA1DF3.9080007@pobox.com>
	<45C9FF35.20200@missouri.edu> <45CA332A.5090508@pobox.com>
	<45CA2DC1.6000901@missouri.edu> <45CA6D1C.9070906@pobox.com>
Message-ID: <45CA4C34.9020805@missouri.edu>

Thanks for the tip, Frank.

I would like to create an image with 5 bands in the order of: Pan, R, G, 
B, NIR.

How would PHOTOMETRIC=RGB affect the band photometric interpretation?  
Can I implement the order above using this parameter?

Ozy

Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> Aha, so there is a way to set the photometric interpretation in 
>> GTiff, even if this is to be done during file creation.   Yes, I just 
>> want to give a simple label for the bands in the new GTiff file I 
>> created using Create().
>>
>> I suspect the PHOTOMETRIC=RGB will have to be set in the parameter
>>
>> char **  /papszParmList
>>
>> /in Create()?  Where do I set this parameter?   Where can I find more 
>> details on the format of /papszParmList?/
>
> Ozy,
>
> It is a NULL terminated list of strings.  So something like:
>
>   char *apszParmList[] = { "PHOTOMETRIC=RGB", NULL };
>
> will do the trick.
>
> Best regards,


From warmerdam at pobox.com  Wed Feb  7 20:56:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Block size consistency (and SetColorInterpretation()
	in GTiff)
In-Reply-To: <45CA4C34.9020805@missouri.edu>
References: <2E58C246F17003499C141D334794D049021244F1@ottawaex02.Ottawa.drdc-rddc.gc.ca>
	<45C91DE3.7080108@missouri.edu> <45C982DE.9010005@pobox.com>
	<45C9A3DF.7070504@missouri.edu> <45CA1DF3.9080007@pobox.com>
	<45C9FF35.20200@missouri.edu> <45CA332A.5090508@pobox.com>
	<45CA2DC1.6000901@missouri.edu> <45CA6D1C.9070906@pobox.com>
	<45CA4C34.9020805@missouri.edu>
Message-ID: <45CA8352.7000502@pobox.com>

Ozy Sjahputera wrote:
> Thanks for the tip, Frank.
> 
> I would like to create an image with 5 bands in the order of: Pan, R, G, 
> B, NIR.
> 
> How would PHOTOMETRIC=RGB affect the band photometric interpretation?  
> Can I implement the order above using this parameter?

Ozy,

There is no way to mark the 2nd, 3rd and 4th bands as RGB in a TIFF file.
If you were to store it as Red, green, blue, pan, nir then at least
applications could use the first 3 bands as rgb if it was marked as
photometric rgb.  If you want to put Pan first, you might be better off
just treating it as greyscale (min-is-black), the default.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ealpert at digitalglobe.com  Wed Feb  7 18:21:52 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Converting Polar Stereographic to WGS84 long/lat
References: <8B319E5A30FF4A48BE7EEAAF609DB233E3EAF2@COMAIL01.digitalglobe.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233E3EB43@COMAIL01.digitalglobe.com>

I needed to set the -te parameter for this to work

 

 

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ethan Alpert
Sent: Wednesday, February 07, 2007 12:30 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Converting Polar Stereographic to WGS84 long/lat

 

I'm use GDAL 1.4.0

 

I thought the following gdalwarp invocation would do the trick but it
creates a black image positioned completely wrong. My file N.tif covers
the northern hemisphere. The gdalinfo is below as well as the gdalinfo
of the output file. Do I need to do something else to convert this data?

 

gdalwarp -t_srs "EPSG:4326"  N.tif WGS.tif

 

 

-bash-2.05b$ gdalinfo N.tif

Driver: GTiff/GeoTIFF

Size is 1024, 1024

Coordinate System is:

PROJCS["unnamed",

    GEOGCS["Coordinate System imported from GRIB file",

        DATUM["unknown",

            SPHEROID["unnamed",6367470,0]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433]],

    PROJECTION["Polar_Stereographic"],

    PARAMETER["latitude_of_origin",60],

    PARAMETER["central_meridian",-80],

    PARAMETER["scale_factor",90],

    PARAMETER["false_easting",0],

    PARAMETER["false_northing",0],

    UNIT["metre",1,

        AUTHORITY["EPSG","9001"]]]

Origin = (-12184935.659713378176093,12184935.659713353961706)

Pixel Size = (23813.000000000000000,-23813.000000000000000)

Metadata:

  AREA_OR_POINT=Area

Corner Coordinates:

Upper Left  (-12184935.660,12184935.660) (145d 0'0.00"E, 20d49'33.60"S)

Lower Left  (-12184935.660,-12199576.340) (124d57'56.16"W,
20d51'29.41"S)

Upper Right (12199576.340,12184935.660) ( 54d57'56.16"E, 20d51'29.41"S)

Lower Right (12199576.340,-12199576.340) ( 35d 0'0.00"W, 20d53'25.05"S)

Center      (    7320.340,   -7320.340) ( 35d 0'0.00"W, 89d54'0.57"N

 

-bash-2.05b$ gdalinfo WGS.tif

Driver: GTiff/GeoTIFF

Size is 2851, 157

Coordinate System is:

GEOGCS["WGS 84",

    DATUM["WGS_1984",

        SPHEROID["WGS 84",6378137,298.2572235629972,

            AUTHORITY["EPSG","7030"]],

        AUTHORITY["EPSG","6326"]],

    PRIMEM["Greenwich",0],

    UNIT["degree",0.0174532925199433],

    AUTHORITY["EPSG","4326"]]

Origin = (-175.679918813105417,-1.452730998140064)

Pixel Size = (0.124296121889026,-0.124296121889026)

Metadata:

  AREA_OR_POINT=Area

Corner Coordinates:

Upper Left  (-175.6799188,  -1.4527310) (175d40'47.71"W,  1d27'9.83"S)

Lower Left  (-175.6799188, -20.9672221) (175d40'47.71"W, 20d58'2.00"S)

Upper Right ( 178.6883247,  -1.4527310) (178d41'17.97"E,  1d27'9.83"S)

Lower Right ( 178.6883247, -20.9672221) (178d41'17.97"E, 20d58'2.00"S)

Center      (   1.5042029, -11.2099766) (  1d30'15.13"E, 11d12'35.92"S)

Band 1 Block=2851x2 Type=Byte, ColorInterp=Gray

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070207/b872dd78/attachment.html
From rkgeorge at cadmaps.com  Wed Feb  7 18:41:49 2007
From: rkgeorge at cadmaps.com (Randy George)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation
In-Reply-To: <20070206194519.12A2562206E@mpls-qmqp-03.inet.qwest.net>
Message-ID: <20070207234152.94A0A62D669@mpls-qmqp-05.inet.qwest.net>

Hi,

 

            Following up on the USGS NHD data ogr2ogr translation.

 

            Another mail list indicated "19 is a polygon with M and Z
values."  but after checking further the geodatabase shape field appears to
return a type that matches the PolygonM signature rather than PolygonZ. In
either case the ogr2ogr seems to skip the geometry for type 19. I attempted
using -nlt to force the geometry to 2D without success.

 

    In addition there appears to be a shape type 9 in NHD
HYDRO_NET_Junctions, which seems to correspond to PointM shape type 21?
Again ogr2ogr evidently skips this geometry.

 

            Does anyone know where documentation can be found for these
newer ESRI shape types?

 

Thanks

Randy

            

 

  _____  

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Randy George
Sent: Tuesday, February 06, 2007 12:45 PM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] RE: ogr2ogr geodatabase translation

 

Hi,

 

            Revisiting the problem I'm experiencing using ogr2ogr 1.4.0 in
FWTools 1.1.3 to translate USGS NHD data into PostGIS.

 

Looking at a typical NHDArea table of the geodatabase mdb it appears that
the Shape field's internal 'Shape Type' is listed as 19. Unless there has
been a recent change, I don't think the shp format has a type 19. I ran a
test conversion to svg with my own translator forcing .shp type 19 to a type
5 (Polygon) and I get valid polygon <paths>?

 

Has ESRI added an additional "Shape Type" to the list? 

 

If shp type 19 is unknown to the ogr translator that would explain the empty
geometry columns and sporadic empty geometry fields.

 

thanks

randy

 

  _____  

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Randy George
Sent: Wednesday, January 31, 2007 8:33 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation

 

 

Hi,

 

            I am attempting to translate some NHD data from
ftp://nhdftp.usgs.gov/SubRegions/ using ogr2ogr 1.4.0 in FWTools 1.1.3, but
having some problems.

 

The NHD data comes as ESRI geodatabase .mdb files. I was excited to see that
ogr2ogr now supportsESRI geodatabase mdb format and ran the following:

 

ogr2ogr -f PostgreSQL PG:"user=user dbname=NHD host=localhost
password=password port=5432" D:\NHD\NHDH0101\NHDH0101.mdb

 

The translation went smoothly without apparent error resulting in a set of
tables with geometry_columns entries:

"8012398";"''";"public";"Basin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012493";"''";"public";"HYDRO_NET_Junctions";"wkb_geometry";"2";"32767";"GE
OMETRY"

"8009168";"''";"public";"NHDArea";"wkb_geometry";"2";"32767";"GEOMETRY"

"8009194";"''";"public";"NHDFlowline";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012333";"''";"public";"NHDLine";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012359";"''";"public";"NHDLineEventFC";"wkb_geometry";"2";"32767";"GEOMETR
Y"

"8012346";"''";"public";"NHDPoint";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012372";"''";"public";"NHDPointEventFC";"wkb_geometry";"2";"32767";"GEOMET
RY"

"8009181";"''";"public";"NHDWaterbody";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012385";"''";"public";"Region";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012436";"''";"public";"Subbasin";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012417";"''";"public";"Subregion";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012480";"''";"public";"Subwatershed";"wkb_geometry";"2";"32767";"GEOMETRY"

"8012467";"''";"public";"Watershed";"wkb_geometry";"2";"32767";"GEOMETRY"

 

However, several of the tables, not all, have empty wkb_geometry columns. In
addition a couple of tables have incompletely translated wkb_geometry with
only some rows containing data.

 

I then tried using an ODBC DSN:

ogr2ogr -f PostgreSQL -update -overwrite PG:"user=user dbname=NHD
host=localhost password=password port=5432" PGeo:NHD Basin 

but the Basin.wkb_geometry was still empty. The Access mdb file appears to
have long binary data in a Shape column.

 

Perhaps individual tables need to be translated with a specified geom
column? 

 

Is a log generated by an ogr2ogr translation?

 

Thanks

randy

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070207/e12cf8eb/attachment.html
From warmerdam at pobox.com  Wed Feb  7 22:13:18 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] Converting Polar Stereographic to WGS84 long/lat
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233E3EB43@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233E3EAF2@COMAIL01.digitalglobe.com>
	<8B319E5A30FF4A48BE7EEAAF609DB233E3EB43@COMAIL01.digitalglobe.com>
Message-ID: <45CA954E.7000405@pobox.com>

Ethan Alpert wrote:
> I needed to set the -te parameter for this to work

Ethan,

Normally you should not need to set the target extents as they will be
autocomputed.  But there are conditions, such as data crossing the dateline
or polar data where the computations can fall apart.  I suspect that is what
was happening in your case.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Feb  7 23:03:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] RE: ogr2ogr geodatabase translation
In-Reply-To: <20070207234152.94A0A62D669@mpls-qmqp-05.inet.qwest.net>
References: <20070207234152.94A0A62D669@mpls-qmqp-05.inet.qwest.net>
Message-ID: <45CAA111.5010803@pobox.com>

Randy George wrote:
> Hi,
> 
>  
> 
>             Following up on the USGS NHD data ogr2ogr translation.
> 
>  
> 
>             Another mail list indicated "19 is a polygon with M and Z
> values."  but after checking further the geodatabase shape field appears to
> return a type that matches the PolygonM signature rather than PolygonZ. In
> either case the ogr2ogr seems to skip the geometry for type 19. I attempted
> using -nlt to force the geometry to 2D without success.
> 
>  
> 
>     In addition there appears to be a shape type 9 in NHD
> HYDRO_NET_Junctions, which seems to correspond to PointM shape type 21?
> Again ogr2ogr evidently skips this geometry.
> 
>  
> 
>             Does anyone know where documentation can be found for these
> newer ESRI shape types?

Randy,

If you haven't done so already, I'd encourage you to submit a bug report
with a pointer to a geodatabase with such geometries, and some indicator
of the features missing geometries (FID and layer name for instance).

It should be relatively easy to fix when I have an example.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From priggs at simla.colostate.edu  Wed Feb  7 19:54:47 2007
From: priggs at simla.colostate.edu (Philip Riggs)
Date: Wed Nov 21 11:50:38 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
Message-ID: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>

I understood from the news release that numpy (not Numeric) was being  
supported in 1.4.0. It looks as if only Numeric is being supported  
based on gdalnumeric.py in the Python site-packages:

import gdal
import _gdal
from gdalconst import *
from Numeric import *

  Can somebody clear this up? Is numpy being supported now, or did I  
misunderstand the new release?

Philip

From woodbri at swoodbridge.com  Wed Feb  7 23:01:40 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] gdal_translate and projection help
Message-ID: <45CAA0A4.9020500@swoodbridge.com>

Hi,

I need help with setting the projection -a_srs for gdal_translate. I'm 
trying to goereference a 100k topo map and the collar only says it is a 
Lambert projection and Clarke ellipsoid. It is ulx=35.433333, uly=34.75, 
lrx=36.0, lry=34.25. The map is circa 1970 of Lebanon and the collar is 
in French if that helps.

I looked through the Proj.4 EPSG file but didn't find any likely 
candidate. Their were some similar to my area are EPSG:3200 and 
EPSG:24600 if the lon_0 were tweaked to be closer.

Any ideas on what to do here?
Is it as simple as -a_srs 'proj=lcc ellps=clrk80'

Unfortunately, if it unlikely that I can get more information about the 
topo image.

-Steve

From warmerdam at pobox.com  Thu Feb  8 03:19:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] nearblack -- fixing up noisy collars
Message-ID: <45CADD13.50604@pobox.com>

Folks,

I wrote a utility for a client last year that is useful for fixing up
noisy collars in lossily compressed airphotos (such as mrsid airphotos from
USDA) so that they have a single "0" nodata values for the collars that can
be marked transparent in programs like MapServer.

The client, Ted Macy of MapShots Inc, has given permission for me to
release this as open source, so I have added it in the gdal/apps
directory.

The documentation is available at:

   http://www.gdal.org/nearblack.html

I'll include it in the next FWTools release when ever that is.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Feb  8 04:45:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
Message-ID: <45CAF11E.6010207@pobox.com>

Philip Riggs wrote:
> I understood from the news release that numpy (not Numeric) was being 
> supported in 1.4.0. It looks as if only Numeric is being supported based 
> on gdalnumeric.py in the Python site-packages:
> 
> import gdal
> import _gdal
> from gdalconst import *
> from Numeric import *
> 
>  Can somebody clear this up? Is numpy being supported now, or did I 
> misunderstand the new release?

Philip,

I imagine Howard can give a fuller answer if needed, but I believe you
are still using the "old" python bindings which are I think still the
default in 1.4.0.

Try configuring --without-python --with-ngpython.  This should build
the version in gdal/swig/python which does use numpy instead of
Numeric.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Thu Feb  8 04:25:27 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] FOSS4G 2007 Call for Workshops
In-Reply-To: <45CA1FAD.5090703@pobox.com>
References: <45C78B75.1030902@pobox.com> <45C99C16.2020503@tkk.fi>
	<45CA1FAD.5090703@pobox.com>
Message-ID: <45CAEC87.9060908@tkk.fi>

Frank Warmerdam kirjoitti:
> Ari Jolma wrote:
>> Is there any interest in proposing a generic GDAL/OGR scripting
>> workshop? Would it work out or would there be too much of confusion
>> among all the languages?
>>
>> I'd be interested in such or, if that does not work out, then in a
>> workshop, which would focus on Perl bindings + the things that I have
>> built on top of GDAL/OGR and its bindings, perhaps especially on GTK
>> and GTK-Perl and my GTK-Perl Geo stuff.
> 
> Ari,
> 
> I have been kicking around the idea of a "raster data processing with GDAL"
> workshop that would first cover work with the commandline tools, and then
> finish with some not-too-challenging scripting.  However, if I were to
> do that
> I'd likely do the scripting aspect in Python.

Ok, I think I'd be in fact more interested in the GTK stuff, so perhaps
I'm going to focus my workshop on "building (small, simple) graphical
Geo-Apps (fast)". If OpenEV, especially GTK2 OpenEV developers read
this, I'd be glad to join forces / accept input from the Python side of
GUI app development with GTK.

I'd be glad to help with the raster data processing with GDAL workshop.
At least to to have the word "Perl" mentioned there :)

Ari

> 
> Best regards,


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From warmerdam at pobox.com  Thu Feb  8 14:19:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] FOSS4G 2007 Call for Workshops
In-Reply-To: <45CAEC87.9060908@tkk.fi>
References: <45C78B75.1030902@pobox.com> <45C99C16.2020503@tkk.fi>
	<45CA1FAD.5090703@pobox.com> <45CAEC87.9060908@tkk.fi>
Message-ID: <45CB77C0.6090005@pobox.com>

Ari Jolma wrote:
> Ok, I think I'd be in fact more interested in the GTK stuff, so perhaps
> I'm going to focus my workshop on "building (small, simple) graphical
> Geo-Apps (fast)". 

Ari,

I think this would be a really cool approach!

> I'd be glad to help with the raster data processing with GDAL workshop.
> At least to to have the word "Perl" mentioned there :)

Remind me closer to the event and I promise to mention Perl. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bfraser at geoanalytic.com  Thu Feb  8 10:56:02 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] gdal_translate and projection help
References: <45CAA0A4.9020500@swoodbridge.com>
Message-ID: <024201c74b99$a20981c0$160002c0@shark>

Steve,

  You'l l need a few more parameters, like:

proj=lcc
ellps=clrk80
lat_0=0n
lon_0= ???e
lat_1=??n
lat_2=??n
x_0=0
y_0=0

It will likely take some detective work to determine the
values.  Be careful of the longitudes on the map, they may
be relative to Greenwich or the Paris meridian.  And if you
are going to integrate other data, don't forget to figure
out the datum.

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Stephen Woodbridge" <woodbri@swoodbridge.com>
To: <gdal-dev@lists.maptools.org>
Sent: Wednesday, February 07, 2007 9:01 PM
Subject: [Gdal-dev] gdal_translate and projection help


> Hi,
>
> I need help with setting the projection -a_srs for
gdal_translate. I'm
> trying to goereference a 100k topo map and the collar only
says it is a
> Lambert projection and Clarke ellipsoid. It is
ulx=35.433333, uly=34.75,
> lrx=36.0, lry=34.25. The map is circa 1970 of Lebanon and
the collar is
> in French if that helps.
>
> I looked through the Proj.4 EPSG file but didn't find any
likely
> candidate. Their were some similar to my area are
EPSG:3200 and
> EPSG:24600 if the lon_0 were tweaked to be closer.
>
> Any ideas on what to do here?
> Is it as simple as -a_srs 'proj=lcc ellps=clrk80'
>
> Unfortunately, if it unlikely that I can get more
information about the
> topo image.
>
> -Steve
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From pgao at esri.com  Thu Feb  8 11:10:33 2007
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Opening many HDF subdatasets at once
Message-ID: <A383B271E8D0DF47B51972FCEB438DC70125F183@twistedwire.esri.com>

Is there a limit on the number of HDF subdatasets can be opened at the
time? I run into a problem where if I open many subdatasets (~10), HDF
driver fails right way.
If I open less than many (~10), the 
driver succeeds first, and but fails later when some opened subdatasets
are closed,
and some new ones are opened (the total is less than 10).

Any ideas?

Gao, Peng


From warmerdam at pobox.com  Thu Feb  8 18:01:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Opening many HDF subdatasets at once
In-Reply-To: <A383B271E8D0DF47B51972FCEB438DC70125F183@twistedwire.esri.com>
References: <A383B271E8D0DF47B51972FCEB438DC70125F183@twistedwire.esri.com>
Message-ID: <45CBABCE.80302@pobox.com>

Peng Gao wrote:
> Is there a limit on the number of HDF subdatasets can be opened at the
> time? I run into a problem where if I open many subdatasets (~10), HDF
> driver fails right way.
> If I open less than many (~10), the 
> driver succeeds first, and but fails later when some opened subdatasets
> are closed,
> and some new ones are opened (the total is less than 10).

Gao,

The behavior you report sounds like a bug that was fixed sometime between
GDAL 1.3.2 and GDAL 1.4.0 though I don't know the details.  If the problem
exists in 1.4.0 please let me know (via a bug report) and I'll get right on it.

But in any event, the HDF4Image driver does keep at least one handle
on the file open for each instance.  So if you many subdatasets open
at once you will be using up many file handles and there are limits.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Thu Feb  8 18:37:37 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Alabama geotiff tiles are showing up in Virginia within
	mapserver
Message-ID: <fa2ac0580702081537h9786fecsf0eab3e093e6b78@mail.gmail.com>

Hi,

I have Alabama geotiff tiles which are showing up in Virginia within
mapserver.  If you look at the original gdalinfo against one of the tiles
you will see that the corner coordinates are within Alabama, but within
MapServer if you do on the fly projection(EPSG:26929 to EPSG:4326) it
instead shows up within the state of Virginia.  I also used gdalwarp to
change the projection from EPSG:26929 to EPSG:4326 and then displayed within
mapserver without having to reproject on the fly and it also shows up within
Virginia. Note: when running gdalinfo on the gdalwarp file which was
reprojected to EPSG:4326 it also has the coordinates within the state of
Virginia.

Below are the gdalinfo dumps first the original file and then the file that
was converted from EPSG:26929 to EPSG:4326

Driver: GTiff/GeoTIFF
Size is 10000, 10000
Coordinate System is:
PROJCS["NAD83 / Alabama East",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",30.5],
    PARAMETER["central_meridian",-85.83333333333333],
    PARAMETER["scale_factor",0.99996],
    PARAMETER["false_easting",656166.6666666665],
    PARAMETER["false_northing",0],
    UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]],
    AUTHORITY["EPSG","26929"]]
Origin = (723240.000000000000000,820340.000000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_XRESOLUTION=72
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  723240.000,  820340.000) ( 85d36'54.59"W, 32d45'17.80"N)
Lower Left  (  723240.000,  815340.000) ( 85d36'54.71"W, 32d44'28.33"N)
Upper Right (  728240.000,  820340.000) ( 85d35'56.04"W, 32d45'17.69"N)
Lower Right (  728240.000,  815340.000) ( 85d35'56.17"W, 32d44'28.22"N)
Center      (  725740.000,  817840.000) ( 85d36'25.38"W, 32d44'53.01"N)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
  Overviews: 1250x1250
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
  Overviews: 1250x1250
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
  Overviews: 1250x1250

-------------------------------------------------------------------------------------------------------------------

Driver: GTiff/GeoTIFF
Size is 11930, 9476
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-79.902533251890048,37.745881181682833)
Pixel Size = (0.000005030208747,-0.000005030208747)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  ( -79.9025333,  37.7458812) ( 79d54'9.12"W, 37d44'45.17"N)
Lower Left  ( -79.9025333,  37.6982149) ( 79d54'9.12"W, 37d41'53.57"N)
Upper Right ( -79.8425229,  37.7458812) ( 79d50'33.08"W, 37d44'45.17"N)
Lower Right ( -79.8425229,  37.6982149) ( 79d50'33.08"W, 37d41'53.57"N)
Center      ( -79.8725281,  37.7220481) ( 79d52'21.10"W, 37d43'19.37"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070208/0897c4c1/attachment.html
From priggs at simla.colostate.edu  Thu Feb  8 18:57:17 2007
From: priggs at simla.colostate.edu (Philip Riggs)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <45CAF11E.6010207@pobox.com>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
Message-ID: <F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>

Thank you for your answer, Frank.
I tried configuring --without-python --with-ngpython and received the  
following errors. How do I fix this?

Philip

cc1plus: warning: command line option "-Wstrict-prototypes" is valid  
for C/ObjC but not for C++
_gdal_array.cpp: In static member function 'static GDALDataset*  
NUMPYDataset::Open(GDALOpenInfo*)':
_gdal_array.cpp:319: error: 'NPY_CDOUBLE' was not declared in this scope
_gdal_array.cpp:323: error: 'NPY_CFLOAT' was not declared in this scope
_gdal_array.cpp:327: error: 'NPY_DOUBLE' was not declared in this scope
_gdal_array.cpp:331: error: 'NPY_FLOAT' was not declared in this scope
_gdal_array.cpp:335: error: 'NPY_INT' was not declared in this scope
_gdal_array.cpp:336: error: 'NPY_LONG' was not declared in this scope
_gdal_array.cpp:340: error: 'NPY_UINT' was not declared in this scope
_gdal_array.cpp:341: error: 'NPY_ULONG' was not declared in this scope
_gdal_array.cpp:345: error: 'NPY_SHORT' was not declared in this scope
_gdal_array.cpp:349: error: 'NPY_USHORT' was not declared in this scope
_gdal_array.cpp:353: error: 'NPY_BYTE' was not declared in this scope
_gdal_array.cpp:354: error: 'NPY_UBYTE' was not declared in this scope
error: command 'gcc' failed with exit status 1
make[2]: *** [install] Error 1
make[1]: *** [install] Error 2
make: *** [install-actions] Error 2


On Feb 8, 2007, at 2:45 AM, Frank Warmerdam wrote:

> Philip Riggs wrote:
>> I understood from the news release that numpy (not Numeric) was  
>> being supported in 1.4.0. It looks as if only Numeric is being  
>> supported based on gdalnumeric.py in the Python site-packages:
>> import gdal
>> import _gdal
>> from gdalconst import *
>> from Numeric import *
>>  Can somebody clear this up? Is numpy being supported now, or did  
>> I misunderstand the new release?
>
> Philip,
>
> I imagine Howard can give a fuller answer if needed, but I believe you
> are still using the "old" python bindings which are I think still the
> default in 1.4.0.
>
> Try configuring --without-python --with-ngpython.  This should build
> the version in gdal/swig/python which does use numpy instead of
> Numeric.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org


From matt.wilkie at gov.yk.ca  Thu Feb  8 17:59:56 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] gdaladdo with .rrd ignoring compress overviews?
In-Reply-To: <45C95566.5040709@pobox.com>
References: <45C91B7D.4010205@gov.yk.ca> <45C95566.5040709@pobox.com>
Message-ID: <45CBAB6C.50006@gov.yk.ca>

> Erdas Imagine files don't support LZW.  RLC is the only supported 
> compression (I think).

Thanks for clearing that up. I did some tests and it appears that 
"gdal_translate -of hfa -co compress=anydarntextyouwant" always results 
in RLC compression. This includes "compress=none", though "compress=no" 
does yield no compression. I can't think of a use case for not 
compressing though.


> Frankly, I don't know why it even used the RLC compression.  I don't
> see any support for the COMPRESS_OVERVIEW config option in the
> HFA/.img/.aux code.

I was going to submit changes to the docs to help others following my
same train of thoughts, but now I'm more confused. From
http://www.gdal.org/gdaladdo.html:

    Create an external compressed GeoTIFF overview file
    from the ERDAS .IMG file:
    gdaladdo --config COMPRESS_OVERVIEW DEFLATE erdas.img 2 4 8 16

But for me this creates embedded overviews.
The next example from the same page yields an error:

    > gdaladdo --config USE_RRD YES overtest3.jpg 3 9 27 81
    ERROR 6: The JPEG driver does not support update access to
    existing datasets.

    0...11...20...31...40...51...60...71...80...91...100 - done.
    0...11...20...31...40...51...60...71...80...91...100 - done.
    0...11...20...31...40...51...60...71...80...91...100 - done.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------



From ed at topozone.com  Thu Feb  8 19:07:49 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Alabama geotiff tiles are showing up in Virginia
	withinmapserver
In-Reply-To: <fa2ac0580702081537h9786fecsf0eab3e093e6b78@mail.gmail.com>
References: <fa2ac0580702081537h9786fecsf0eab3e093e6b78@mail.gmail.com>
Message-ID: <4BF377919225F449BB097CB76FFE9BC801987E50@ptolemy.topozone.com>

John -
 
Alabama East SPCS as EPSG:26929 is in units of meters, but your GeoTIFF
seems to think it's in feet.  This will cause the reprojection to move
the file 3 times further from the CS origin than you think.
 
It seems like you have a "hybrid" GeoTIFF with one projection definition
and a different EPSG code.
 
The ESRI-defined code of 102629 is an Alabama East NAD83 Feet
projection.  The definition is:
 
# NAD 1983 StatePlane Alabama East FIPS 0101 Feet
<102629> +proj=tmerc +lat_0=30.5 +lon_0=-85.83333333333333 +k=0.999960
+x_0=200000 +y_0=0 +ellps=GRS80 +datum=NAD83
+to_meter=0.3048006096012192  no_defs <>
 
Which is identical to the 26929 definition except for the "to_meter"
parameter.
 
     - Ed
Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed@topozone.com 


________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of John Mitchell
Sent: Thursday, February 08, 2007 6:38 PM
To: MAPSERVER-USERS@lists.umn.edu; Gdal-Dev
Cc: mitchelljj98@gmail.com
Subject: [Gdal-dev] Alabama geotiff tiles are showing up in Virginia
withinmapserver


Hi,

I have Alabama geotiff tiles which are showing up in Virginia within
mapserver.  If you look at the original gdalinfo against one of the
tiles you will see that the corner coordinates are within Alabama, but
within MapServer if you do on the fly projection(EPSG:26929 to
EPSG:4326) it instead shows up within the state of Virginia.  I also
used gdalwarp to change the projection from EPSG:26929 to EPSG:4326 and
then displayed within mapserver without having to reproject on the fly
and it also shows up within Virginia. Note: when running gdalinfo on the
gdalwarp file which was reprojected to EPSG:4326 it also has the
coordinates within the state of Virginia. 

Below are the gdalinfo dumps first the original file and then the file
that was converted from EPSG:26929 to EPSG:4326

Driver: GTiff/GeoTIFF
Size is 10000, 10000
Coordinate System is:
PROJCS["NAD83 / Alabama East", 
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]], 
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",30.5],
    PARAMETER["central_meridian",-85.83333333333333],
    PARAMETER["scale_factor",0.99996], 
    PARAMETER["false_easting",656166.6666666665],
    PARAMETER["false_northing",0],
    UNIT["US survey foot",0.3048006096012192,
        AUTHORITY["EPSG","9003"]], 
    AUTHORITY["EPSG","26929"]]
Origin = (723240.000000000000000,820340.000000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_XRESOLUTION=72 
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  (  723240.000,  820340.000) ( 85d36'54.59"W, 32d45'17.80"N)
Lower Left  (  723240.000,  815340.000 ) ( 85d36'54.71"W, 32d44'28.33"N)
Upper Right (  728240.000,  820340.000) ( 85d35'56.04"W, 32d45'17.69"N)
Lower Right (  728240.000,  815340.000) ( 85d35'56.17"W, 32d44' 28.22"N)
Center      (  725740.000,  817840.000) ( 85d36'25.38"W, 32d44'53.01"N)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
  Overviews: 1250x1250
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green 
  Overviews: 1250x1250
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
  Overviews: 1250x1250

------------------------------------------------------------------------
------------------------------------------- 

Driver: GTiff/GeoTIFF
Size is 11930, 9476
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]], 
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-79.902533251890048 ,37.745881181682833)
Pixel Size = (0.000005030208747,-0.000005030208747)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  ( -79.9025333,  37.7458812) ( 79d54'9.12"W, 37d44'45.17"N) 
Lower Left  ( -79.9025333,  37.6982149) ( 79d54'9.12"W, 37d41'53.57"N)
Upper Right ( -79.8425229,  37.7458812) ( 79d50'33.08"W, 37d44'45.17"N)
Lower Right ( -79.8425229,  37.6982149 ) ( 79d50'33.08"W, 37d41'53.57"N)
Center      ( -79.8725281,  37.7220481) ( 79d52'21.10"W, 37d43'19.37"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green 
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue


-- 
John J. Mitchell 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070208/99f73ffe/attachment.html
From mitchelljj98 at gmail.com  Thu Feb  8 20:51:34 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Alabama geotiff tiles are showing up in Virginia
	withinmapserver
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC801987E50@ptolemy.topozone.com>
References: <fa2ac0580702081537h9786fecsf0eab3e093e6b78@mail.gmail.com>
	<4BF377919225F449BB097CB76FFE9BC801987E50@ptolemy.topozone.com>
Message-ID: <fa2ac0580702081751i57ac2d32pa1c5dea918042e30@mail.gmail.com>

Ed,

Thanks for the information.

What should I use for the EPSG code when using mapserver or gdalwarp?

John

On 2/8/07, Ed McNierney <ed@topozone.com> wrote:
>
>  John -
>
> Alabama East SPCS as EPSG:26929 is in units of meters, but your GeoTIFF
> seems to think it's in feet.  This will cause the reprojection to move the
> file 3 times further from the CS origin than you think.
>
> It seems like you have a "hybrid" GeoTIFF with one projection definition
> and a different EPSG code.
>
> The ESRI-defined code of 102629 is an Alabama East NAD83 Feet projection.
> The definition is:
>
> # NAD 1983 StatePlane Alabama East FIPS 0101 Feet
> <102629> +proj=tmerc +lat_0=30.5 +lon_0=-85.83333333333333 +k=0.999960+x_0=200000 +y_0=0 +ellps=GRS80 +datum=NAD83 +to_meter=
> 0.3048006096012192  no_defs <>
>
> Which is identical to the 26929 definition except for the "to_meter"
> parameter.
>
>      - Ed
>
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> Phone: +1 (978) 251-4242
> Fax: +1 (978) 251-1396
> ed@topozone.com
>
>  ------------------------------
> *From:* gdal-dev-bounces@lists.maptools.org [mailto:
> gdal-dev-bounces@lists.maptools.org] *On Behalf Of *John Mitchell
> *Sent:* Thursday, February 08, 2007 6:38 PM
> *To:* MAPSERVER-USERS@lists.umn.edu; Gdal-Dev
> *Cc:* mitchelljj98@gmail.com
> *Subject:* [Gdal-dev] Alabama geotiff tiles are showing up in Virginia
> withinmapserver
>
> Hi,
>
> I have Alabama geotiff tiles which are showing up in Virginia within
> mapserver.  If you look at the original gdalinfo against one of the tiles
> you will see that the corner coordinates are within Alabama, but within
> MapServer if you do on the fly projection(EPSG:26929 to EPSG:4326) it
> instead shows up within the state of Virginia.  I also used gdalwarp to
> change the projection from EPSG:26929 to EPSG:4326 and then displayed within
> mapserver without having to reproject on the fly and it also shows up within
> Virginia. Note: when running gdalinfo on the gdalwarp file which was
> reprojected to EPSG:4326 it also has the coordinates within the state of
> Virginia.
>
> Below are the gdalinfo dumps first the original file and then the file
> that was converted from EPSG:26929 to EPSG:4326
>
> Driver: GTiff/GeoTIFF
> Size is 10000, 10000
> Coordinate System is:
> PROJCS["NAD83 / Alabama East",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4269"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",30.5],
>     PARAMETER["central_meridian",-85.83333333333333],
>     PARAMETER["scale_factor",0.99996],
>     PARAMETER["false_easting",656166.6666666665],
>     PARAMETER["false_northing",0],
>     UNIT["US survey foot",0.3048006096012192,
>         AUTHORITY["EPSG","9003"]],
>     AUTHORITY["EPSG","26929"]]
> Origin = (723240.000000000000000,820340.000000000000000)
> Pixel Size = (0.500000000000000,-0.500000000000000)
> Metadata:
>   AREA_OR_POINT=Area
>   TIFFTAG_XRESOLUTION=72
>   TIFFTAG_YRESOLUTION=72
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Corner Coordinates:
> Upper Left  (  723240.000,  820340.000) ( 85d36'54.59"W, 32d45'17.80"N)
> Lower Left  (  723240.000,  815340.000 ) ( 85d36'54.71"W, 32d44'28.33"N)
> Upper Right (  728240.000,  820340.000) ( 85d35'56.04"W, 32d45'17.69"N)
> Lower Right (  728240.000,  815340.000) ( 85d35'56.17"W, 32d44' 28.22"N)
> Center      (  725740.000,  817840.000) ( 85d36'25.38"W, 32d44'53.01"N)
> Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
>   Overviews: 1250x1250
> Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
>   Overviews: 1250x1250
> Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
>   Overviews: 1250x1250
>
> -------------------------------------------------------------------------------------------------------------------
>
>
> Driver: GTiff/GeoTIFF
> Size is 11930, 9476
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.2572235630016,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-79.902533251890048 ,37.745881181682833)
> Pixel Size = (0.000005030208747,-0.000005030208747)
> Metadata:
>   AREA_OR_POINT=Area
> Corner Coordinates:
> Upper Left  ( -79.9025333,  37.7458812) ( 79d54'9.12"W, 37d44'45.17"N)
> Lower Left  ( -79.9025333,  37.6982149) ( 79d54'9.12"W, 37d41'53.57"N)
> Upper Right ( -79.8425229,  37.7458812) ( 79d50'33.08"W, 37d44'45.17"N)
> Lower Right ( -79.8425229,  37.6982149 ) ( 79d50'33.08"W, 37d41'53.57"N)
> Center      ( -79.8725281,  37.7220481) ( 79d52'21.10"W, 37d43'19.37"N)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
>
>
> --
> John J. Mitchell
>



-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070208/b7a1041d/attachment.html
From ed at topozone.com  Thu Feb  8 21:27:31 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Alabama geotiff tiles are showing up in Virginia
	withinmapserver
In-Reply-To: <fa2ac0580702081751i57ac2d32pa1c5dea918042e30@mail.gmail.com>
References: <fa2ac0580702081537h9786fecsf0eab3e093e6b78@mail.gmail.com>
	<4BF377919225F449BB097CB76FFE9BC801987E50@ptolemy.topozone.com>
	<fa2ac0580702081751i57ac2d32pa1c5dea918042e30@mail.gmail.com>
Message-ID: <4BF377919225F449BB097CB76FFE9BC801987E51@ptolemy.topozone.com>

John -
 
I think I answered that question below.  Remember that an "EPSG code"
really means "a projection definition with the specified ID number
installed in the text file named epsg on your computer".  If the
projection definition I described below for the 102629 projection is not
already present in your epsg file (a text file that's part of your PROJ
installation) you can edit that file by inserting the lines I provided
below.  The 1xxxxx series EPSG codes are ESRI-defined extensions to the
standard EPSG set, so they are often not found in user installations
that don't use ESRI software.
 
    - Ed
Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed@topozone.com 


________________________________

From: John Mitchell [mailto:mitchelljj98@gmail.com] 
Sent: Thursday, February 08, 2007 8:52 PM
To: Ed McNierney
Cc: MAPSERVER-USERS@lists.umn.edu; Gdal-Dev; mitchelljj98@gmail.com
Subject: Re: [Gdal-dev] Alabama geotiff tiles are showing up in Virginia
withinmapserver


Ed,

Thanks for the information.  

What should I use for the EPSG code when using mapserver or gdalwarp?

John


On 2/8/07, Ed McNierney <ed@topozone.com> wrote: 

	John -
	 
	Alabama East SPCS as EPSG:26929 is in units of meters, but your
GeoTIFF seems to think it's in feet.  This will cause the reprojection
to move the file 3 times further from the CS origin than you think.
	 
	It seems like you have a "hybrid" GeoTIFF with one projection
definition and a different EPSG code.
	 
	The ESRI-defined code of 102629 is an Alabama East NAD83 Feet
projection.  The definition is:
	 
	# NAD 1983 StatePlane Alabama East FIPS 0101 Feet
	<102629> +proj=tmerc +lat_0=30.5 +lon_0=-85.83333333333333
+k=0.999960 +x_0=200000 +y_0=0 +ellps=GRS80 +datum=NAD83
+to_meter=0.3048006096012192  no_defs <>
	 
	Which is identical to the 26929 definition except for the
"to_meter" parameter.
	 
	     - Ed
	Ed McNierney
	President and Chief Mapmaker
	TopoZone.com / Maps a la carte, Inc.
	73 Princeton Street, Suite 305
	North Chelmsford, MA  01863
	Phone:
<chrome://skype_ff_toolbar_win/content/cb_transparent_l.gif>
<chrome://skype_ff_toolbar_win/content/famfamfam/us.gif>
<chrome://skype_ff_toolbar_win/content/space.gif>
<chrome://skype_ff_toolbar_win/content/space.gif>
<chrome://skype_ff_toolbar_win/content/space.gif>
<chrome://skype_ff_toolbar_win/content/space.gif> +1 (978) 251-4242
<chrome://skype_ff_toolbar_win/content/cb_transparent_r.gif> 
	Fax: +1 (978) 251-1396
	ed@topozone.com 


________________________________

	From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of John Mitchell
	Sent: Thursday, February 08, 2007 6:38 PM
	To: MAPSERVER-USERS@lists.umn.edu; Gdal-Dev
	Cc: mitchelljj98@gmail.com
	Subject: [Gdal-dev] Alabama geotiff tiles are showing up in
Virginia withinmapserver
	
	
	
	Hi,
	
	I have Alabama geotiff tiles which are showing up in Virginia
within mapserver.  If you look at the original gdalinfo against one of
the tiles you will see that the corner coordinates are within Alabama,
but within MapServer if you do on the fly projection(EPSG:26929 to
EPSG:4326) it instead shows up within the state of Virginia.  I also
used gdalwarp to change the projection from EPSG:26929 to EPSG:4326 and
then displayed within mapserver without having to reproject on the fly
and it also shows up within Virginia. Note: when running gdalinfo on the
gdalwarp file which was reprojected to EPSG:4326 it also has the
coordinates within the state of Virginia. 
	
	Below are the gdalinfo dumps first the original file and then
the file that was converted from EPSG:26929 to EPSG:4326
	
	Driver: GTiff/GeoTIFF
	Size is 10000, 10000
	Coordinate System is:
	PROJCS["NAD83 / Alabama East", 
	    GEOGCS["NAD83",
	        DATUM["North_American_Datum_1983",
	            SPHEROID["GRS 1980",6378137,298.2572221010002,
	                AUTHORITY["EPSG","7019"]], 
	            AUTHORITY["EPSG","6269"]],
	        PRIMEM["Greenwich",0],
	        UNIT["degree",0.0174532925199433],
	        AUTHORITY["EPSG","4269"]],
	    PROJECTION["Transverse_Mercator"],
	    PARAMETER["latitude_of_origin",30.5],
	    PARAMETER["central_meridian",-85.83333333333333],
	    PARAMETER["scale_factor",0.99996], 
	    PARAMETER["false_easting",656166.6666666665],
	    PARAMETER["false_northing",0],
	    UNIT["US survey foot",0.3048006096012192,
	        AUTHORITY["EPSG","9003"]], 
	    AUTHORITY["EPSG","26929"]]
	Origin = (723240.000000000000000,820340.000000000000000)
	Pixel Size = (0.500000000000000,-0.500000000000000)
	Metadata:
	  AREA_OR_POINT=Area
	  TIFFTAG_XRESOLUTION=72 
	  TIFFTAG_YRESOLUTION=72
	  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
	Corner Coordinates:
	Upper Left  (  723240.000,  820340.000) ( 85d36'54.59"W,
32d45'17.80"N)
	Lower Left  (  723240.000,  815340.000 ) ( 85d36'54.71"W,
32d44'28.33"N)
	Upper Right (  728240.000,  820340.000) ( 85d35'56.04"W,
32d45'17.69"N)
	Lower Right (  728240.000,  815340.000) ( 85d35'56.17"W, 32d44'
28.22"N)
	Center      (  725740.000,  817840.000) ( 85d36'25.38"W,
32d44'53.01"N)
	Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
	  Overviews: 1250x1250
	Band 2 Block=10000x1 Type=Byte, ColorInterp=Green 
	  Overviews: 1250x1250
	Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
	  Overviews: 1250x1250
	
	
------------------------------------------------------------------------
------------------------------------------- 
	
	Driver: GTiff/GeoTIFF
	Size is 11930, 9476
	Coordinate System is:
	GEOGCS["WGS 84",
	    DATUM["WGS_1984",
	        SPHEROID["WGS 84",6378137,298.2572235630016,
	            AUTHORITY["EPSG","7030"]], 
	        AUTHORITY["EPSG","6326"]],
	    PRIMEM["Greenwich",0],
	    UNIT["degree",0.0174532925199433],
	    AUTHORITY["EPSG","4326"]]
	Origin = (-79.902533251890048 ,37.745881181682833)
	Pixel Size = (0.000005030208747,-0.000005030208747)
	Metadata:
	  AREA_OR_POINT=Area
	Corner Coordinates:
	Upper Left  ( -79.9025333,  37.7458812) ( 79d54'9.12"W,
37d44'45.17"N) 
	Lower Left  ( -79.9025333,  37.6982149) ( 79d54'9.12"W,
37d41'53.57"N)
	Upper Right ( -79.8425229,  37.7458812) ( 79d50'33.08"W,
37d44'45.17"N)
	Lower Right ( -79.8425229,  37.6982149 ) ( 79d50'33.08"W,
37d41'53.57"N)
	Center      ( -79.8725281,  37.7220481) ( 79d52'21.10"W,
37d43'19.37"N)
	Band 1 Block=256x256 Type=Byte, ColorInterp=Red
	Band 2 Block=256x256 Type=Byte, ColorInterp=Green 
	Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
	
	
	-- 
	John J. Mitchell 




-- 
John J. Mitchell 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070208/4d663dac/attachment.html
From hobu at iastate.edu  Thu Feb  8 22:21:39 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
Message-ID: <4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>

Philip,

It appears that you need to install the numpy header files or GDAL's  
setup.py can't find them.  Are you using them from a package, or did  
you install them yourself with 'python setup.py install'?  GDAL's  
setup.py attempts to infer the location of the include files by  
searching around a little bit.  It's possible that this searching  
isn't very smart.

Howard


On Feb 8, 2007, at 5:57 PM, Philip Riggs wrote:

> Thank you for your answer, Frank.
> I tried configuring --without-python --with-ngpython and received  
> the following errors. How do I fix this?
>
> Philip
>
> cc1plus: warning: command line option "-Wstrict-prototypes" is  
> valid for C/ObjC but not for C++
> _gdal_array.cpp: In static member function 'static GDALDataset*  
> NUMPYDataset::Open(GDALOpenInfo*)':
> _gdal_array.cpp:319: error: 'NPY_CDOUBLE' was not declared in this  
> scope
> _gdal_array.cpp:323: error: 'NPY_CFLOAT' was not declared in this  
> scope
> _gdal_array.cpp:327: error: 'NPY_DOUBLE' was not declared in this  
> scope
> _gdal_array.cpp:331: error: 'NPY_FLOAT' was not declared in this scope
> _gdal_array.cpp:335: error: 'NPY_INT' was not declared in this scope
> _gdal_array.cpp:336: error: 'NPY_LONG' was not declared in this scope
> _gdal_array.cpp:340: error: 'NPY_UINT' was not declared in this scope
> _gdal_array.cpp:341: error: 'NPY_ULONG' was not declared in this scope
> _gdal_array.cpp:345: error: 'NPY_SHORT' was not declared in this scope
> _gdal_array.cpp:349: error: 'NPY_USHORT' was not declared in this  
> scope
> _gdal_array.cpp:353: error: 'NPY_BYTE' was not declared in this scope
> _gdal_array.cpp:354: error: 'NPY_UBYTE' was not declared in this scope
> error: command 'gcc' failed with exit status 1
> make[2]: *** [install] Error 1
> make[1]: *** [install] Error 2
> make: *** [install-actions] Error 2
>
>
> On Feb 8, 2007, at 2:45 AM, Frank Warmerdam wrote:
>
>> Philip Riggs wrote:
>>> I understood from the news release that numpy (not Numeric) was  
>>> being supported in 1.4.0. It looks as if only Numeric is being  
>>> supported based on gdalnumeric.py in the Python site-packages:
>>> import gdal
>>> import _gdal
>>> from gdalconst import *
>>> from Numeric import *
>>>  Can somebody clear this up? Is numpy being supported now, or did  
>>> I misunderstand the new release?
>>
>> Philip,
>>
>> I imagine Howard can give a fuller answer if needed, but I believe  
>> you
>> are still using the "old" python bindings which are I think still the
>> default in 1.4.0.
>>
>> Try configuring --without-python --with-ngpython.  This should build
>> the version in gdal/swig/python which does use numpy instead of
>> Numeric.
>>
>> Best regards,
>> -- 
>> --------------------------------------- 
>> +--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,  
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | President OSGeo, http:// 
>> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Fri Feb  9 01:47:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] JP2KAK Driver Optimization
Message-ID: <45CC190A.1070603@pobox.com>

Folks,

I have implemented optimized IRasterIO() functions on the JP2KAK driver.
This can give a substantial speed up (as much as a factor of 3) for for
applications making single big windowed requests.  However, it can also
result in substantial negative performance characteristics for applications
many small requests.

The optimized (direct) io method is not used if:
  o the target buffer or source image is not 8bit.
  o the requested buffer has a ysize of 1 (a single scanline)
  o the requested buffer is less than 100 pixels.
  o the requested window is a single pixel tall (a single scanline)
  o the requested window is less than 100 pixels.
  o the GDAL_FORCE_CACHING config option is TRUE.

You can also set the GDAL_ONE_BIG_READ config option TRUE to force use
of the direct method in all cases (except the non-8bit data).

Amoung other things this optimization also reads all requested bands in
a single pass for a GDALDataset::RasterIO() call.  So use of this method
is increasingly valuable as more and more drivers have optimized
implementations.

I don't consider this optimized driver all that safe, and I don't plan to
take it back to the gdal 1.4 branch for the time being.  I would appreciate
feedback from folks using it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From myardbenoit at gmail.com  Fri Feb  9 03:54:52 2007
From: myardbenoit at gmail.com (Benoit Myard)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Building against Xerces 2.7.0 fails
Message-ID: <6fb81fc70702090054g1edba434u6bdb755269265d2@mail.gmail.com>

Hi list,

Last week, I built GDAL 1.4.0, without Xerces support and after all,
things went pretty well. I do have a working installation on a
Sun-Fire-T1000 running Solaris 10.

Now that I need GML capabilities, I'm trying to build GDAL against
Xerces 2.7.0 which fails miserably at compile time :

  CC -I/export/home/comdev/freeware/xerces-c-src_2_7_0/include
-I/export/home/comdev/freeware/xerces-c-src_2_7_0/include/xercesc
-DOGR_ENABLED -I/export/home/comdev/freeware/gdal-1.4.0/port -I.. -c
iom_error.cpp  -KPIC -DPIC -o ../../o/.libs/iom_error.o
"iom_error.cpp", line 34: Error: In this declaration
"ErrorUtility::itoabuf" is of an incomplete type "unsigned short[]".

I read here and there that some versions of Xerces are not supported,
but these posts are from 2003 so I don't really know what to think.If
there's an official note on that topic, please let me know.

I wonder if the compile error is due to Xerces' version or a bug in the code ?

Any hint greatly appreciated.

Cheers.

-- 
Benoit Myard

From Jukka.Rahkonen at mmmtike.fi  Fri Feb  9 04:04:17 2007
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: JP2KAK Driver Optimization
References: <E1HFPvq-0004SB-U5@ciao.gmane.org>
Message-ID: <CC197224AC75CE4DB23F739B16891B86668622@tikka.haapa.mmm.fi>

Frank Warmerdam  writes:

> Folks,
>
> I have implemented optimized IRasterIO() functions on the JP2KAK driver.
> This can give a substantial speed up (as much as a factor of 3) for for
> applications making single big windowed requests.  However, it can also
> result in substantial negative performance characteristics for applications
> many small requests.

> I don't consider this optimized driver all that safe, and I don't plan to
> take it back to the gdal 1.4 branch for the time being.  I would appreciate
> feedback from folks using it.

Hi,

Is there any simple way to test this new driver with MapServer?  I have a ready
made test set available and MapServer from FWTools including the old JP2KAK and
JP2ECW drivers to compare with. 

-Jukka Rahkonen-








From myardbenoit at gmail.com  Fri Feb  9 05:32:03 2007
From: myardbenoit at gmail.com (Benoit Myard)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Building against Xerces 2.7.0 fails
In-Reply-To: <6fb81fc70702090054g1edba434u6bdb755269265d2@mail.gmail.com>
References: <6fb81fc70702090054g1edba434u6bdb755269265d2@mail.gmail.com>
Message-ID: <6fb81fc70702090232u50c996cai260ef3969fcaa99c@mail.gmail.com>

Just to clarify things a bit,

I'm using Sun Studio 11 (C and C++ version 5.8 compilers).

I obviously compiled Xerces 2.7.0 and it went like a charm ; although
it's installed in a non standard place, it works well (GDAL's
configure script compiles a minimal C++ program with success).

Thanks

-- 
Benoit Myard

From myardbenoit at gmail.com  Fri Feb  9 09:54:12 2007
From: myardbenoit at gmail.com (Benoit Myard)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Building against Xerces 2.7.0 fails
In-Reply-To: <6fb81fc70702090232u50c996cai260ef3969fcaa99c@mail.gmail.com>
References: <6fb81fc70702090054g1edba434u6bdb755269265d2@mail.gmail.com>
	<6fb81fc70702090232u50c996cai260ef3969fcaa99c@mail.gmail.com>
Message-ID: <6fb81fc70702090654m7994f4crc28e60f9dbe8d58d@mail.gmail.com>

Hey again.

My bad, the errors were due to GDAL. You will find two small patches
attached to this mail which correct the compilation errors.

For the sake of accuracy, GDAL 1.4.0 compiles just fine against both
Xerces 2.6.0 and 2.7.0.

See you.

-- 
Benoit Myard
-------------- next part --------------
A non-text attachment was scrubbed...
Name: iom_error_cpp.patch
Type: application/octet-stream
Size: 359 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070209/3c772e00/iom_error_cpp.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogrili1datasource_cpp.patch
Type: application/octet-stream
Size: 484 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070209/3c772e00/ogrili1datasource_cpp.obj
From myardbenoit at gmail.com  Fri Feb  9 10:03:27 2007
From: myardbenoit at gmail.com (Benoit Myard)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Building against Xerces 2.7.0 fails
In-Reply-To: <6fb81fc70702090654m7994f4crc28e60f9dbe8d58d@mail.gmail.com>
References: <6fb81fc70702090054g1edba434u6bdb755269265d2@mail.gmail.com>
	<6fb81fc70702090232u50c996cai260ef3969fcaa99c@mail.gmail.com>
	<6fb81fc70702090654m7994f4crc28e60f9dbe8d58d@mail.gmail.com>
Message-ID: <6fb81fc70702090703lede9677vf26e7c197a04e8d8@mail.gmail.com>

> [...] You will find two small patches attached to this mail which
> correct the compilation errors.

Oops, I mixed up the filenames on the command line ; here are the
correct patches. Sorry.

-- 
Benoit Myard
-------------- next part --------------
A non-text attachment was scrubbed...
Name: iom_error_cpp.patch
Type: application/octet-stream
Size: 359 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070209/9f7f50a8/iom_error_cpp.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogrili1datasource_cpp.patch
Type: application/octet-stream
Size: 484 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070209/9f7f50a8/ogrili1datasource_cpp.obj
From pgao at esri.com  Fri Feb  9 10:27:34 2007
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] JP2KAK Driver Optimization
Message-ID: <A383B271E8D0DF47B51972FCEB438DC70125F18C@twistedwire.esri.com>

> 
> Amoung other things this optimization also reads all 
> requested bands in a single pass for a 
> GDALDataset::RasterIO() call.  So use of this method is 
> increasingly valuable as more and more drivers have optimized 
> implementations.
> 

Frank,

Is Block IO reading all bands in one pass as well, instead of reading
once from
JP2 decompressor for each band?

Gao, Peng


From priggs at simla.colostate.edu  Fri Feb  9 11:00:38 2007
From: priggs at simla.colostate.edu (Philip Riggs)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
Message-ID: <93389A67-40CE-47F1-855F-1DB7CD81E966@simla.colostate.edu>

Python2.5 is installed as a Mac OS X Framework. I installed numpy  
with python2.5 setup.py install. The path to site-packages (where  
numpy resides) is:
/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site- 
packages
All numpy related files reside in this folder:
/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site- 
packages/numpy

I have tried including paths to numpy  and site-packages at the  
terminal before sudo make install, but it still does not find the  
correct file.

Philip

On Feb 8, 2007, at 8:21 PM, Howard Butler wrote:

> Philip,
>
> It appears that you need to install the numpy header files or  
> GDAL's setup.py can't find them.  Are you using them from a  
> package, or did you install them yourself with 'python setup.py  
> install'?  GDAL's setup.py attempts to infer the location of the  
> include files by searching around a little bit.  It's possible that  
> this searching isn't very smart.
>
> Howard
>
>
> On Feb 8, 2007, at 5:57 PM, Philip Riggs wrote:
>
>> Thank you for your answer, Frank.
>> I tried configuring --without-python --with-ngpython and received  
>> the following errors. How do I fix this?
>>
>> Philip
>>
>> cc1plus: warning: command line option "-Wstrict-prototypes" is  
>> valid for C/ObjC but not for C++
>> _gdal_array.cpp: In static member function 'static GDALDataset*  
>> NUMPYDataset::Open(GDALOpenInfo*)':
>> _gdal_array.cpp:319: error: 'NPY_CDOUBLE' was not declared in this  
>> scope
>> _gdal_array.cpp:323: error: 'NPY_CFLOAT' was not declared in this  
>> scope
>> _gdal_array.cpp:327: error: 'NPY_DOUBLE' was not declared in this  
>> scope
>> _gdal_array.cpp:331: error: 'NPY_FLOAT' was not declared in this  
>> scope
>> _gdal_array.cpp:335: error: 'NPY_INT' was not declared in this scope
>> _gdal_array.cpp:336: error: 'NPY_LONG' was not declared in this scope
>> _gdal_array.cpp:340: error: 'NPY_UINT' was not declared in this scope
>> _gdal_array.cpp:341: error: 'NPY_ULONG' was not declared in this  
>> scope
>> _gdal_array.cpp:345: error: 'NPY_SHORT' was not declared in this  
>> scope
>> _gdal_array.cpp:349: error: 'NPY_USHORT' was not declared in this  
>> scope
>> _gdal_array.cpp:353: error: 'NPY_BYTE' was not declared in this scope
>> _gdal_array.cpp:354: error: 'NPY_UBYTE' was not declared in this  
>> scope
>> error: command 'gcc' failed with exit status 1
>> make[2]: *** [install] Error 1
>> make[1]: *** [install] Error 2
>> make: *** [install-actions] Error 2
>>
>>
>> On Feb 8, 2007, at 2:45 AM, Frank Warmerdam wrote:
>>
>>> Philip Riggs wrote:
>>>> I understood from the news release that numpy (not Numeric) was  
>>>> being supported in 1.4.0. It looks as if only Numeric is being  
>>>> supported based on gdalnumeric.py in the Python site-packages:
>>>> import gdal
>>>> import _gdal
>>>> from gdalconst import *
>>>> from Numeric import *
>>>>  Can somebody clear this up? Is numpy being supported now, or  
>>>> did I misunderstand the new release?
>>>
>>> Philip,
>>>
>>> I imagine Howard can give a fuller answer if needed, but I  
>>> believe you
>>> are still using the "old" python bindings which are I think still  
>>> the
>>> default in 1.4.0.
>>>
>>> Try configuring --without-python --with-ngpython.  This should build
>>> the version in gdal/swig/python which does use numpy instead of
>>> Numeric.
>>>
>>> Best regards,
>>> -- 
>>> --------------------------------------- 
>>> +--------------------------------------
>>> I set the clouds in motion - turn up   | Frank Warmerdam,  
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | President OSGeo, http:// 
>>> osgeo.org
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From priggs at simla.colostate.edu  Fri Feb  9 11:03:42 2007
From: priggs at simla.colostate.edu (Philip Riggs)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
Message-ID: <9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>

I just realized the problem. I'm using numpy with Python2.5 and the  
install is defaulting to the Mac's Python2.3 (with no numpy). Sorry I  
didn't catch this sooner.

Philip

On Feb 8, 2007, at 8:21 PM, Howard Butler wrote:

> Philip,
>
> It appears that you need to install the numpy header files or  
> GDAL's setup.py can't find them.  Are you using them from a  
> package, or did you install them yourself with 'python setup.py  
> install'?  GDAL's setup.py attempts to infer the location of the  
> include files by searching around a little bit.  It's possible that  
> this searching isn't very smart.
>
> Howard
>
>
> On Feb 8, 2007, at 5:57 PM, Philip Riggs wrote:
>
>> Thank you for your answer, Frank.
>> I tried configuring --without-python --with-ngpython and received  
>> the following errors. How do I fix this?
>>
>> Philip
>>
>> cc1plus: warning: command line option "-Wstrict-prototypes" is  
>> valid for C/ObjC but not for C++
>> _gdal_array.cpp: In static member function 'static GDALDataset*  
>> NUMPYDataset::Open(GDALOpenInfo*)':
>> _gdal_array.cpp:319: error: 'NPY_CDOUBLE' was not declared in this  
>> scope
>> _gdal_array.cpp:323: error: 'NPY_CFLOAT' was not declared in this  
>> scope
>> _gdal_array.cpp:327: error: 'NPY_DOUBLE' was not declared in this  
>> scope
>> _gdal_array.cpp:331: error: 'NPY_FLOAT' was not declared in this  
>> scope
>> _gdal_array.cpp:335: error: 'NPY_INT' was not declared in this scope
>> _gdal_array.cpp:336: error: 'NPY_LONG' was not declared in this scope
>> _gdal_array.cpp:340: error: 'NPY_UINT' was not declared in this scope
>> _gdal_array.cpp:341: error: 'NPY_ULONG' was not declared in this  
>> scope
>> _gdal_array.cpp:345: error: 'NPY_SHORT' was not declared in this  
>> scope
>> _gdal_array.cpp:349: error: 'NPY_USHORT' was not declared in this  
>> scope
>> _gdal_array.cpp:353: error: 'NPY_BYTE' was not declared in this scope
>> _gdal_array.cpp:354: error: 'NPY_UBYTE' was not declared in this  
>> scope
>> error: command 'gcc' failed with exit status 1
>> make[2]: *** [install] Error 1
>> make[1]: *** [install] Error 2
>> make: *** [install-actions] Error 2
>>
>>
>> On Feb 8, 2007, at 2:45 AM, Frank Warmerdam wrote:
>>
>>> Philip Riggs wrote:
>>>> I understood from the news release that numpy (not Numeric) was  
>>>> being supported in 1.4.0. It looks as if only Numeric is being  
>>>> supported based on gdalnumeric.py in the Python site-packages:
>>>> import gdal
>>>> import _gdal
>>>> from gdalconst import *
>>>> from Numeric import *
>>>>  Can somebody clear this up? Is numpy being supported now, or  
>>>> did I misunderstand the new release?
>>>
>>> Philip,
>>>
>>> I imagine Howard can give a fuller answer if needed, but I  
>>> believe you
>>> are still using the "old" python bindings which are I think still  
>>> the
>>> default in 1.4.0.
>>>
>>> Try configuring --without-python --with-ngpython.  This should build
>>> the version in gdal/swig/python which does use numpy instead of
>>> Numeric.
>>>
>>> Best regards,
>>> -- 
>>> --------------------------------------- 
>>> +--------------------------------------
>>> I set the clouds in motion - turn up   | Frank Warmerdam,  
>>> warmerdam@pobox.com
>>> light and sound - activate the windows | http://pobox.com/~warmerdam
>>> and watch the world go round - Rush    | President OSGeo, http:// 
>>> osgeo.org
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From warmerdam at pobox.com  Fri Feb  9 12:21:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: JP2KAK Driver Optimization
In-Reply-To: <CC197224AC75CE4DB23F739B16891B86668622@tikka.haapa.mmm.fi>
References: <E1HFPvq-0004SB-U5@ciao.gmane.org>
	<CC197224AC75CE4DB23F739B16891B86668622@tikka.haapa.mmm.fi>
Message-ID: <45CCAD87.2000205@pobox.com>

Rahkonen Jukka wrote:
> Frank Warmerdam  writes:
> 
>> Folks,
>>
>> I have implemented optimized IRasterIO() functions on the JP2KAK driver.
>> This can give a substantial speed up (as much as a factor of 3) for for
>> applications making single big windowed requests.  However, it can also
>> result in substantial negative performance characteristics for applications
>> many small requests.
> 
>> I don't consider this optimized driver all that safe, and I don't plan to
>> take it back to the gdal 1.4 branch for the time being.  I would appreciate
>> feedback from folks using it.
> 
> Hi,
> 
> Is there any simple way to test this new driver with MapServer?  I have a ready
> made test set available and MapServer from FWTools including the old JP2KAK and
> JP2ECW drivers to compare with. 

Jukka,

If you can wait a while there will be a new FWTools release that includes
the driver, and then it should be easy to compare performance to older
releases.  I'm not sure when the next fwtools cut will be though.  I just
pushed out 1.2.1 yesterday before finishing the jp2kak work. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From alexandre.leroux at ec.gc.ca  Fri Feb  9 14:20:02 2007
From: alexandre.leroux at ec.gc.ca (Alexandre Leroux)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] WMS support in GDAL?
Message-ID: <45CCC962.3030306@ec.gc.ca>


Hi list,

Tried to google the answer but wasn't able to find clues (even if this 
was doubtlessly previously discussed). Will there eventually be WMS 
support within GDAL itself? Would developing such a driver make sense 
(considering a WMS layer is static and not much can be done with it 
other than displaying it)?

Have great weekends,

Alex
-- 

Alexandre Leroux, M.Sc., Ing.
Environnement Canada / Environment Canada
Centre m?t?orologique canadien / Canadian Meteorological Centre
Division de la r?ponse aux urgences environnementales /
Environmental Emergency Response Division
alexandre.leroux@ec.gc.ca


From warmerdam at pobox.com  Fri Feb  9 15:07:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] WMS support in GDAL?
In-Reply-To: <45CCC962.3030306@ec.gc.ca>
References: <45CCC962.3030306@ec.gc.ca>
Message-ID: <45CCD46D.5090907@pobox.com>

Alexandre Leroux wrote:
> 
> Hi list,
> 
> Tried to google the answer but wasn't able to find clues (even if this 
> was doubtlessly previously discussed). Will there eventually be WMS 
> support within GDAL itself? Would developing such a driver make sense 
> (considering a WMS layer is static and not much can be done with it 
> other than displaying it)?

Alexander,

I think there has been someone who has implemented a WMS driver for GDAL
for their internal use, but I gather it would have been substantial work
to clean it up for general use.

I think it would be pretty easy to implement, given the WCS driver as a
guide.  But I don't have any client interest in it at this time, so I am
not actively pursuing it.

The main challenge with WMS compared to WCS is that it is very hard to
establish the nominal bounds and pixel resolution of a WMS service which
we need to represent it as a GDAL dataset.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Fri Feb  9 21:55:20 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
Message-ID: <EA0FC5B8-529F-4BDD-8060-704D3584BE32@kyngchaos.com>

I'm finally getting around to updating my GDAL framework to use the  
ng python + numpy + python 2.5.

My guess is that your shell PATH is not set right.  The way the  
python setup.py is run is to depend on python being in your PATH.   
For the Mac Python installer, you need to do one of two things -  
either install the Profile Changes part, which adds the python  
framework/bin to your PATH in your .bash_profile, or install the Unix  
Tools part, which adds symlnks to /usr/local/bin (but you should make  
sure you have /usr/local/bin in your PATH then).

If neither is done, 'python' will run the system's python 2.3.


One thing I noticed for OSX - this won't correctly build for the  
framework build option for OSX.  Because the framework option renames  
the built library on install, gdalmodule.so won't be correctly linked  
when installed.

So, after building, gdalmodule would have to have it's linking  
changed when it is installed:

install_name_tool -change $(INST_LIB)/libgdal.$ 
(GDAL_VERSION_MAJOR).dylib ${OSX_VERSION_FRAMEWORK_PREFIX}/GDAL / 
whatever/the/path/is/to/gdalmodule.so

that's just an example, I'm not sure exactly what it would be.  This  
could be done in the makefile, right after setup.py is run, or during  
installation.

On Feb 9, 2007, at 10:03 AM, Philip Riggs wrote:

> I just realized the problem. I'm using numpy with Python2.5 and the  
> install is defaulting to the Mac's Python2.3 (with no numpy). Sorry  
> I didn't catch this sooner.
>
> Philip
>
> On Feb 8, 2007, at 8:21 PM, Howard Butler wrote:
>
>> Philip,
>>
>> It appears that you need to install the numpy header files or  
>> GDAL's setup.py can't find them.  Are you using them from a  
>> package, or did you install them yourself with 'python setup.py  
>> install'?  GDAL's setup.py attempts to infer the location of the  
>> include files by searching around a little bit.  It's possible  
>> that this searching isn't very smart.
>>
>> Howard

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin



From woklist at kyngchaos.com  Fri Feb  9 22:37:24 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
Message-ID: <F1EB6F40-054D-4165-8B0D-C07FA93C04D6@kyngchaos.com>

And now after trying it... mixed success

I tried both python 2.4 and python 2.5.

2.4, with an old numpy 0.9.8 installed: I get the exact same 'not  
declared in this scope' errors with numpy.  probably expected for an  
old numpy version.

2.4, with new numpy 1.0.1: success, no problems at all.

2.5, with new numpy 1.0.1: immediately, in _gdal, I get something  
completely different:

gcc -arch ppc -arch i386 -isysroot /Developer/SDKs/MacOSX10.4u.sdk - 
fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd - 
fno-common -dynamic -DNDEBUG -g -O3 -I../../port -I../../gcore - 
I../../alg -I../../ogr -I../../macosx/GDAL/gdal -I/Library/Frameworks/ 
Python.framework/Versions/2.5/lib/python2.5/site-packages/numpy/core/ 
include -I/Library/Frameworks/Python.framework/Versions/2.5/include/ 
python2.5 -c gdal_wrap.cpp -o build/temp.macosx-10.3-fat-2.5/gdal_wrap.o
gdal_wrap.cpp: In function 'int SWIG_Python_ConvertFunctionPtr 
(PyObject*, void**, swig_type_info*)':
gdal_wrap.cpp:2051: error: invalid conversion from 'const char*' to  
'char*'gdal_wrap.cpp: In function 'int SWIG_Python_ConvertFunctionPtr 
(PyObject*, void**, swig_type_info*)':
gdal_wrap.cpp:2051: error: invalid conversion from 'const char*' to  
'char*'

...and many more of these...


I noticed that both python 2.4 and 2.5 compile with gcc, but link  
with g++, even though it's compiling a C++ source.  It seems to work  
in 2.4, but not 2.5.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Earth: "Mostly harmless"

- revised entry in the HitchHiker's Guide to the Galaxy


From woklist at kyngchaos.com  Sat Feb 10 01:48:10 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
Message-ID: <7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>

Regarding my python 2.5 const char* errors, I just got a response on  
the Mac python list.  It turns out that the Mac python build of 2.5  
(unclear if it's mac-only, or python 2.5 in general) needs a current  
SWIG to generate gdal_wrap.cpp.  Quote:

> This has nothing to do with numpy. The wrapper source was generated  
> from a
> slightly-old version of SWIG that generates non-const-correct C++  
> code. Python
> 2.5 uses a version of gcc that's a bit pickier than the 2.4 build  
> that you used.
>
> Get the latest version of SWIG (1.3.31 should be fine, I think),  
> regenerate the
> gdal_wrap.cpp, and recompile.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect



From warmerdam at pobox.com  Sat Feb 10 11:21:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
	<7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>
Message-ID: <45CDF100.4040405@pobox.com>

William Kyngesburye wrote:
> Regarding my python 2.5 const char* errors, I just got a response on the 
> Mac python list.  It turns out that the Mac python build of 2.5 (unclear 
> if it's mac-only, or python 2.5 in general) needs a current SWIG to 
> generate gdal_wrap.cpp.  Quote:
> 
>> This has nothing to do with numpy. The wrapper source was generated 
>> from a
>> slightly-old version of SWIG that generates non-const-correct C++ 
>> code. Python
>> 2.5 uses a version of gcc that's a bit pickier than the 2.4 build that 
>> you used.
>>
>> Get the latest version of SWIG (1.3.31 should be fine, I think), 
>> regenerate the
>> gdal_wrap.cpp, and recompile.

Howard / William,

Do you think this means we should declare 1.3.31 our new preferred version
of SWIG?  Is there any barrier (other than churn) to doing so?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woklist at kyngchaos.com  Sat Feb 10 13:14:35 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <45CDF100.4040405@pobox.com>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
	<7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>
	<45CDF100.4040405@pobox.com>
Message-ID: <C23C1CAE-41D7-475D-A03D-B42DD054938F@kyngchaos.com>

On Feb 10, 2007, at 10:21 AM, Frank Warmerdam wrote:

>>> Get the latest version of SWIG (1.3.31 should be fine, I think),  
>>> regenerate the
>>> gdal_wrap.cpp, and recompile.
>
> Howard / William,
>
> Do you think this means we should declare 1.3.31 our new preferred  
> version
> of SWIG?  Is there any barrier (other than churn) to doing so?
>
I don't know anything about SWIG, so I can't say.  Are we the first  
to try Python 2.5 with the ng python?  Odd that this didn't come up  
before, if not, unless it really is just a Mac issue.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin



From mooreds at mooreds.com  Sat Feb 10 20:05:58 2007
From: mooreds at mooreds.com (Dan Moore)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] ogr2ogr export from postgis to esri incorrectly exports
	attributes
Message-ID: <45CE6BF6.5080302@mooreds.com>

Hi folks,

First off, I'm pretty new to this toolset, so please forgive me if I use 
incorrect terminology.

I'm using ogr2ogr to turn some data in a PostGIS database (8.1.4) into 
an ESRI shapefile.  The data has about 25 fields, and when I open up the 
dbf file in excel, they are exported incorrectly.  Lat/lngs are exported 
correctly, but the other attributes are not.  All the values are there, 
but they are offset.  Some are smashed together.  This is also apparent 
when I view the exported ESRI file in QGIS (0.8).

For example, I'll have fields (| separates fields)
lat|lng|address|beds|bath|garage|heating|remarks|listprice
and the values don't align:
2.3|3.4|222 Canyon Blvd|2|2|||nice garagecentral heating||remarks...|123

Here you can see that the garage and heating sections were smashed 
together, and some extra fields were put in before the garage data. 
This happens after the twelfth column in the export.  The last few 
fields are not in the export (they're pushed off by the blank columns).

This happens whether or not I have a where clause on this export.  I 
also tried exporting a few other tables in this database, and the 
attribute shifting didn't happen to either one.  Neither of those tables 
had as many columns as this one, however.

Here's the output of the command when I run it with --debug on:
$ ogr2ogr --debug on -where " dataset_id = 25 " -f "ESRI Shapefile" 
out.shp PG:"user=user dbname=db password=pass" data
OGR_PG: DBName="db"
OGR_PG: PostSIS version string: '1.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1' 
-> '1.1'
OGR_PG: POSTGIS_VERSION=1.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1
OGR_PG: Layer 'data' geometry type: POINT:Point, Dim=2
OGR_PG: Layer 'roads' geometry type: MULTILINESTRING:Multi Line String, 
Dim=2
OGR: OGROpen(PG:user=user dbname=db password=pass/xxxxx) succeeded as 
PostgreSQL.
OGR_PG: PQexec(DECLARE OGRPGLayerReader CURSOR for SELECT 
AsEWKT("the_geom"), "address", "baths", "bedrooms", "city", 
"closeddate", "construction", "contractdate", "coolsystem", 
"dataset_id", "daysonmarket", "garagedesc", "heatsystem", "latitude", 
"level", "listdate", "listprice", "listpriceorig", "liststatus", 
"longitude", "lotsize", "mlsnumber", "offmarketdate", 
"percentoflistprice", "precision", "privatepool", "remarks", 
"salesprice", "schooldistrictelem", "schooldistricthigh", "schoolelem", 
"schoolhigh", "schooljunior", "sqfttotal", "state", "subdivision", 
"yearbuilt", "zip" FROM "data" WHERE  dataset_id = 25  )
PG: 11157 features read on layer 'data'.

However, an export to mapinfo seems to work (the attributes are all 
there), and an ogr2ogr from the exported mapinfo file to an ESRI file 
seems to preserve the attributes.  So I can use this workaround, but 
would prefer to understand the real problem.  (As an aside, the mapinfo 
export gives this error message:
ERROR 1: IMapInfoFile::CreateField() called with unsupported field type 
9. Note that Mapinfo files don't support list field types.)

I googled against this list, but didn't find anything that referenced 
this particular problem.

I couldn't figure out the version of ogr2ogr, but this is at the bottom 
of the man page:
GDAL                       13 Apr 2006                 ogr2ogr(1)

Has anyone seen such behavior?  Can you recommend any other debugging 
steps (can I turn on debugging more)?  Removing columns and seeing what 
happens? Should I try to upgrade the GDAL tools?  Any other suggestions 
are welcome.

Thanks,
Dan


From schut at sarvision.nl  Mon Feb 12 03:00:48 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <C23C1CAE-41D7-475D-A03D-B42DD054938F@kyngchaos.com>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
	<7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>
	<45CDF100.4040405@pobox.com>
	<C23C1CAE-41D7-475D-A03D-B42DD054938F@kyngchaos.com>
Message-ID: <20070212090048.3a0df6c8@localhost>

On Sat, 10 Feb 2007 12:14:35 -0600
William Kyngesburye <woklist@kyngchaos.com> wrote:

> On Feb 10, 2007, at 10:21 AM, Frank Warmerdam wrote:
> 
> >>> Get the latest version of SWIG (1.3.31 should be fine, I think),  
> >>> regenerate the
> >>> gdal_wrap.cpp, and recompile.
> >
> > Howard / William,
> >
> > Do you think this means we should declare 1.3.31 our new preferred  
> > version
> > of SWIG?  Is there any barrier (other than churn) to doing so?
> >
> I don't know anything about SWIG, so I can't say.  Are we the first  
> to try Python 2.5 with the ng python?  Odd that this didn't come up  
> before, if not, unless it really is just a Mac issue.

It did come up before, and there still is an open bug about it. Things
got a bit more complicated there because I'm on 64bit linux, which has
another issue with swig/python besides the const char one, but the main
issue is the same. See bug 1379.

Cheers,
Vincent.
> 
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
> 
> "I ache, therefore I am.  Or in my case - I am, therefore I ache."
> 
> - Marvin
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From ivan at ilucena.net  Mon Feb 12 11:42:00 2007
From: ivan at ilucena.net (Ivan Lucena)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] GDAL 1.4.0, VC8, Python and Numpy
Message-ID: <20070212164200.8B3899EDFE@ws6-2.us4.outblaze.com>

Hi there,

Does anybody get this combination to work:

- GDAL 1.4.0, Windows, VC 8, Python and Numpy ?

It looks like the reasons for my problems are related to:

"error: Python was built with version 7.1 of Visual Studio, and extensions need t
o be built with the same version of the compiler, but it isn't installed."

Unless someone has a better solution I going to move back to VC 7.

Ivan



From Chris.Barker at noaa.gov  Mon Feb 12 12:46:07 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] GDAL 1.4.0, VC8, Python and Numpy
In-Reply-To: <20070212164200.8B3899EDFE@ws6-2.us4.outblaze.com>
References: <20070212164200.8B3899EDFE@ws6-2.us4.outblaze.com>
Message-ID: <45D0A7DF.2030108@noaa.gov>

Ivan Lucena wrote:
> It looks like the reasons for my problems are related to:
> 
> "error: Python was built with version 7.1 of Visual Studio, and extensions need t
> o be built with the same version of the compiler, but it isn't installed."
> 
> Unless someone has a better solution I going to move back to VC 7.

You only other options are:

1) rebuild Python itself and every other extension you use.

2) use MingGW, after googling to see the hacks you need to make it work. 
It's not very hard.

3) figure out how the heck to build extensions with a different MS 
compiler than the one used to build Python. You'd think that if you can 
build extensions with a completely different compiler (mingw) then you 
could build them with a different version of the MS compiler. AFAIK, the 
issue is not the compiler, but the system libs -- different versions of 
VS also use different versions of the basic C libs. If you could figure 
out how to get a newer compiler to use older libs, you may be able to 
get it to work. However, I don't think anyone has ever done this, and 
there area a lot of smart people building Python....

So, yes, going back to VC 7 is probably your best bet.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From gok at aerometric-ak.com  Mon Feb 12 15:01:50 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] ogr2ogr using -spat parameters
Message-ID: <3054411AF4728548AD6D7137190D56B30C45CE@admin1.aeromap.com>

Hello, All.
Playing with ogr2ogr utility found that -spat parameters (spatial query extents)
are not a clipping window. At least for shp data format it will bring to output whole
item crossing this window. Is it by design?
Is there any clipping features in OGR lib like as in image gdal_translate.exe?
Thanks,
Gennady


From warmerdam at pobox.com  Mon Feb 12 16:16:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] ogr2ogr using -spat parameters
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C45CE@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C45CE@admin1.aeromap.com>
Message-ID: <45D0D941.1060909@pobox.com>

Gennady Khokhorin wrote:
> Hello, All.
> Playing with ogr2ogr utility found that -spat parameters (spatial query extents)
> are not a clipping window. At least for shp data format it will bring to output whole
> item crossing this window. Is it by design?

Gennady,

Yes, that is by design.

> Is there any clipping features in OGR lib like as in image gdal_translate.exe?

The OGRGeometry has an Intersection() method (not to be mistaken for
Intersects()) that will compute the intersection of two geometries.
So if you give it a window rectangle it will clip the geometry to that
rectangle.

This is only available when the build includes GEOS.  It is accessable from
the C, C++ and SWIG generated APIs.

There is no way to use this from the existing commandline tools unfortunately.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Feb 12 16:34:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Motion: Commiter Access for Hannah Valbonesi
Message-ID: <45D0DD81.2080003@pobox.com>

Motion: That Hannah Valbonesi be granted GDAL/OGR commit access.

--

Hannah has been working on the raster support at Safe Software, including
the GDAL related aspects for a few years now, and has a good grasp of GDAL.
She has previously routed fixes through me, but increasingly it would be
helpful for her to be able to commit improvements directly.

+1 from me

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Allan.Meek at drdc-rddc.gc.ca  Mon Feb 12 17:01:06 2007
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] GDALOpenInfo question
Message-ID: <2E58C246F17003499C141D334794D049021C7CC4@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi,

In GDALOpenInfo::GDALOpenInfo(const char * pszFilenameIn, GDALAccess
eAccessIn), VSIFOpen tries to open the specified image. If it succeeds,
it reads in 1024 bytes, then calls VSIRewind. If it fails, VSIFOpenL
tries to open the file. If this succeeds, 1024 bytes are read, then the
file is closed.

Is there a reason for this difference? Shouldn't the file just be
rewinded in the second case?

Thanks,
Allan Meek


From warmerdam at pobox.com  Mon Feb 12 17:17:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Motion: Commiter Access for Hannah Valbonesi
In-Reply-To: <45D0DD81.2080003@pobox.com>
References: <45D0DD81.2080003@pobox.com>
Message-ID: <45D0E76C.10105@pobox.com>

Frank Warmerdam wrote:
> Motion: That Hannah Valbonesi be granted GDAL/OGR commit access.
> 
> -- 
> 
> Hannah has been working on the raster support at Safe Software, including
> the GDAL related aspects for a few years now, and has a good grasp of GDAL.
> She has previously routed fixes through me, but increasingly it would be
> helpful for her to be able to commit improvements directly.

Folks,

I neglected to mention that Hannah has reviewed and agreed to the commiter
guidelines and has cleared them with Safe management.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From josegomez at gmx.net  Mon Feb 12 17:20:53 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Warping MODIS
Message-ID: <20070212222053.40950@gmx.net>

Frank and Markus,
Sorry for not replying on-thread. It appears that gmane.org is pointing to 
<gdal-dev@remotesensing.org>, rather than to <gdal-dev@lists.maptools.org>, so my mails kept bouncing back


> Jose Luis Gomez Dans wrote:
> > processing chain makes life easier. So far, i understand that I need to warp
> > a subdataset off the HDFEOS file to change the ellps parameter so that the
> > subdataset is available in Lat/Long WGS84. This seems to work, and I can the
> > reproject into UTMXX/DatumXYZ again. This requires a gdalwarp, a
> > gdal_translate and a further gdalwarp. is there a more direct route?

> You would need to be more specific about what exact steps you are doing.
> Off hand I would think you could do things in a single gdalwarp from
> a subdataset to an output file in UTM using the -s_srs switch to override
> the interpretation of the input coordinate system if required.

As Markus pointed out, I followed pretty much his script. My first attempt is to
 reproject, subset and change format (phew!) using a single gdalwarp (using gdal
1.4.0 on Linux/i386 and Win2k):

gdalwarp -of GTiff -tr 1000. 1000. -rn -s_srs "+proj=latlong +ellps=sphere"
-t_srs "EPSG:23030"\
'HDF4_EOS:EOS_GRID:XXXXX' EVI.tif

This fails with a projection-related error:
ERROR 1: geocentric transformation missing z or ellps
ERROR 1: GDALSuggestedWarpOutput() failed because the passed
transformer failed.

I think I am missing something in the projection definition. Somewhere :)

Now, I can go ahead and convert to Long/Lat WGS84, and then to my chosen
projection (UTM30N/ED50, EPSG 23030), pretty much as per Markus' script:
1.- gdalwarp -of GTiff  -rn -t_srs "+proj=latlong +ellps=sphere" \
 'HDF4_EOS:XXXX' EVI.tif
2.- gdalwarp -rn -of GTiff -tr 1000 1000 -s_srs "EPSG:4326" -t_srs "EPSG:23030"
EVI.tif EVI.utm.tif


Shouldn't I just need to use my first attempt by setting the right source
projection (-s_srs) and warping from there on?

> > Further, is the gdalwarper API available for python? The docs say it is
> Currently the only aspect of the warper that is exposed in Python is the
> AutoCreateWarpedVRT() function.  It is also possible to manually construct
> a warped VRT (as XML) in Python and use that as input to CreateCopy() to
> cause a warp to occur.  But there is no tight integration between the
> warp api and python.

Hmmmm... I need to understand how VRTs work first :) However, it looks feasible

Again, many thanks for gdal, it is being really useful in our work!
Jose

-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From warmerdam at pobox.com  Mon Feb 12 17:36:39 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] GDALOpenInfo question
In-Reply-To: <2E58C246F17003499C141D334794D049021C7CC4@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049021C7CC4@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <45D0EBF7.2080508@pobox.com>

Meek, Allan wrote:
> Hi,
> 
> In GDALOpenInfo::GDALOpenInfo(const char * pszFilenameIn, GDALAccess
> eAccessIn), VSIFOpen tries to open the specified image. If it succeeds,
> it reads in 1024 bytes, then calls VSIRewind. If it fails, VSIFOpenL
> tries to open the file. If this succeeds, 1024 bytes are read, then the
> file is closed.
> 
> Is there a reason for this difference? Shouldn't the file just be
> rewinded in the second case?

Allan,

In the VSIFOpen() case the file handle is left open, and attached to
the GDALOpenInfo.  It is rewound to ensure that the reading position
is at a known location for drivers that want to use the file handle.

In the VSIFOpenL() case we close it when we are done as there is no
way for drivers to realize this is a VSI*L style handle.  So it is
safter to just close it and let them reopen if they want.

Since it is being closed, there is no need to rewind.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tutey at o2.pl  Mon Feb 12 17:24:08 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] negative nodata value loaded as positive in gdal 1.4.0
In-Reply-To: <45BB8930.3000509@o2.pl>
References: <200701140129.19846.hernan.deangelis@glocalnet.net>	<45A9FAB2.3050102@o2.pl>	<200701152131.32904.hernan.deangelis@glocalnet.net>
	<45BB8930.3000509@o2.pl>
Message-ID: <45D0E908.9010705@o2.pl>

Maciej Sieczka wrote:
> Hern?n De Angelis wrote:
> 
>> Today I tried a large number of SRTM tiles, including 1" and 3" as well as  
>> versions 1 and 2 and the problem is still present, so I also came to the 
>> conclusion that it is likely a bug in GDAL. I hope some one else can comfirm 
>> this.
> 
> Hi,
> 
> I think I have found the reason and solution.
> 
> GDAL requires explicitely set "PIXELTYPE SIGNEDINT" in the hdr file to
> treat the EHdr as a singed integer.

Hi,

After sorting this out with Frank and Markus offlist, r.in.srtm has
been fixed accordingly in CVS.

Maciek

From josegomez at gmx.net  Mon Feb 12 17:29:50 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Converting to GMT
Message-ID: <20070212222950.40890@gmx.net>

Hi!
I want to quickly visualise a GeoTIFF file using GMT. I have tried using  gdal_translate -of GMT (and NetCDF), but I get the following error:
gdal_translate -of GMT test.tif testOut.grd
Input file size is 1347, 1032
netcdf: 3 is not a valid cdfid

Versions: GDAL 1.4.0 (Linux), with HDF4 (libhdf4 (4.1r4-18.1ubuntu1) support and NetCDF 3.6.1) compiled in (these are both Kubuntu Breezy packages).

I note that GMT and HDF might be mutually exclusive, but... I have so far shortcircuited this problems by converting into an ENVI raster and using xyz2grd to convert into a grid. This, however, isn't ideal either.

Any ideas?
Cheers!
Jose
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From woklist at kyngchaos.com  Mon Feb 12 17:42:09 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <45CDF100.4040405@pobox.com>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
	<7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>
	<45CDF100.4040405@pobox.com>
Message-ID: <3DA3D969-3232-4F92-B34F-E8AC141E5238@kyngchaos.com>

On Feb 10, 2007, at 10:21 AM, Frank Warmerdam wrote:

> Do you think this means we should declare 1.3.31 our new preferred  
> version
> of SWIG?  Is there any barrier (other than churn) to doing so?
>
I just built mapscript (4.10) python (2.5) without any const char  
errors.  According to the swig header, mapscript uses SWIG 1.3.21,  
while GDAL uses SWIG 1.3.29.  So I'm not sure the SWIG version is the  
real problem, unless mapscript is cleaner.

I just found the py25ng files from bug 1379.  That builds without  
errors.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin



From ealpert at digitalglobe.com  Mon Feb 12 17:49:48 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] ogr2ogr export from postgis to esri incorrectly
	exportsattributes
References: <45CE6BF6.5080302@mooreds.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233E3EEDE@COMAIL01.digitalglobe.com>

Dan,

It may be helpful to post the schema. You're dumping from. I have in the
past created views with data type casts in order to produce shapefiles
with the values I expect.

See the docs on the shapefile driver. There's a section that begins:

"Shapefile feature attributes are stored in an associated .dbf file, and
so attributes suffer a number of limitations:"

-e


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Dan Moore
Sent: Saturday, February 10, 2007 6:06 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] ogr2ogr export from postgis to esri incorrectly
exportsattributes

Hi folks,

First off, I'm pretty new to this toolset, so please forgive me if I use

incorrect terminology.

I'm using ogr2ogr to turn some data in a PostGIS database (8.1.4) into 
an ESRI shapefile.  The data has about 25 fields, and when I open up the

dbf file in excel, they are exported incorrectly.  Lat/lngs are exported

correctly, but the other attributes are not.  All the values are there, 
but they are offset.  Some are smashed together.  This is also apparent 
when I view the exported ESRI file in QGIS (0.8).

For example, I'll have fields (| separates fields)
lat|lng|address|beds|bath|garage|heating|remarks|listprice
and the values don't align:
2.3|3.4|222 Canyon Blvd|2|2|||nice garagecentral heating||remarks...|123

Here you can see that the garage and heating sections were smashed 
together, and some extra fields were put in before the garage data. 
This happens after the twelfth column in the export.  The last few 
fields are not in the export (they're pushed off by the blank columns).

This happens whether or not I have a where clause on this export.  I 
also tried exporting a few other tables in this database, and the 
attribute shifting didn't happen to either one.  Neither of those tables

had as many columns as this one, however.

Here's the output of the command when I run it with --debug on:
$ ogr2ogr --debug on -where " dataset_id = 25 " -f "ESRI Shapefile" 
out.shp PG:"user=user dbname=db password=pass" data
OGR_PG: DBName="db"
OGR_PG: PostSIS version string: '1.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1' 
-> '1.1'
OGR_PG: POSTGIS_VERSION=1.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1
OGR_PG: Layer 'data' geometry type: POINT:Point, Dim=2
OGR_PG: Layer 'roads' geometry type: MULTILINESTRING:Multi Line String, 
Dim=2
OGR: OGROpen(PG:user=user dbname=db password=pass/xxxxx) succeeded as 
PostgreSQL.
OGR_PG: PQexec(DECLARE OGRPGLayerReader CURSOR for SELECT 
AsEWKT("the_geom"), "address", "baths", "bedrooms", "city", 
"closeddate", "construction", "contractdate", "coolsystem", 
"dataset_id", "daysonmarket", "garagedesc", "heatsystem", "latitude", 
"level", "listdate", "listprice", "listpriceorig", "liststatus", 
"longitude", "lotsize", "mlsnumber", "offmarketdate", 
"percentoflistprice", "precision", "privatepool", "remarks", 
"salesprice", "schooldistrictelem", "schooldistricthigh", "schoolelem", 
"schoolhigh", "schooljunior", "sqfttotal", "state", "subdivision", 
"yearbuilt", "zip" FROM "data" WHERE  dataset_id = 25  )
PG: 11157 features read on layer 'data'.

However, an export to mapinfo seems to work (the attributes are all 
there), and an ogr2ogr from the exported mapinfo file to an ESRI file 
seems to preserve the attributes.  So I can use this workaround, but 
would prefer to understand the real problem.  (As an aside, the mapinfo 
export gives this error message:
ERROR 1: IMapInfoFile::CreateField() called with unsupported field type 
9. Note that Mapinfo files don't support list field types.)

I googled against this list, but didn't find anything that referenced 
this particular problem.

I couldn't figure out the version of ogr2ogr, but this is at the bottom 
of the man page:
GDAL                       13 Apr 2006                 ogr2ogr(1)

Has anyone seen such behavior?  Can you recommend any other debugging 
steps (can I turn on debugging more)?  Removing columns and seeing what 
happens? Should I try to upgrade the GDAL tools?  Any other suggestions 
are welcome.

Thanks,
Dan

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From woklist at kyngchaos.com  Mon Feb 12 18:01:26 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <3DA3D969-3232-4F92-B34F-E8AC141E5238@kyngchaos.com>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
	<7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>
	<45CDF100.4040405@pobox.com>
	<3DA3D969-3232-4F92-B34F-E8AC141E5238@kyngchaos.com>
Message-ID: <232FEB0D-DAE2-4328-8A67-EBD90B78675F@kyngchaos.com>

On Feb 12, 2007, at 4:42 PM, William Kyngesburye wrote:

> I just found the py25ng files from bug 1379.  That builds without  
> errors.
>
... And had a couple problems.  Running the autotests, I have two  
fails and a memory leak:

Running tests from ogr/ogr_join_test.py
   TEST: ogr_join_1 ... swig/python detected a memory leak of type  
'OGRLayerShadow *', no destructor found.
success
   TEST: ogr_join_2 ... success
   TEST: ogr_join_3 ... success
   TEST: ogr_join_4 ... success
   TEST: ogr_join_5 ... success
   TEST: ogr_join_6 ... success
   TEST: ogr_join_7 ... success
   TEST: ogr_join_8 ... success
   TEST: ogr_join_cleanup ... success


Running tests from gcore/numpy_rw.py
   TEST: numpy_rw_1 ... fail (blowup)
Traceback (most recent call last):
   File "pymod/gdaltest.py", line 170, in run_tests
     result = func()
   File "./numpy_rw.py", line 68, in numpy_rw_1
     _gdal.GDALRegister_NUMPY()
AttributeError: 'module' object has no attribute 'GDALRegister_NUMPY'
   TEST: numpy_rw_2 ... skip
   TEST: numpy_rw_cleanup ... success


Running tests from gcore/tiff_write.py
   TEST: tiff_write_1 ... success
   TEST: tiff_write_2 ... success
   TEST: tiff_write_3 ... success
   TEST: tiff_write_4 ... fail (blowup)
Traceback (most recent call last):
   File "pymod/gdaltest.py", line 170, in run_tests
     result = func()
   File "./tiff_write.py", line 189, in tiff_write_4
     new_ds.GetRasterBand(1).WriteArray( data_red )
   File "/Library/Frameworks/Python.framework/Versions/2.5/lib/ 
python2.5/site-packages/gdal.py", line 656, in WriteArray
     return gdalnumeric.BandWriteArray( self, array, xoff, yoff )
   File "/Library/Frameworks/Python.framework/Versions/2.5/lib/ 
python2.5/site-packages/gdal_array.py", line 149, in BandWriteArray
     datatype = NumericTypeCodeToGDALTypeCode( array.dtype.type )
AttributeError: dtype
   TEST: tiff_write_5 ... success
   TEST: tiff_write_6 ... success
   TEST: tiff_write_7 ... success
   TEST: tiff_write_8 ... success
   TEST: tiff_write_cleanup ... success


-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in  
a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From jluis at ualg.pt  Mon Feb 12 18:13:15 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Converting to GMT
In-Reply-To: <20070212222950.40890@gmx.net>
References: <20070212222950.40890@gmx.net>
Message-ID: <45D0F48B.5030105@ualg.pt>

Jose Luis Gomez Dans wrote:
> Hi!
> I want to quickly visualise a GeoTIFF file using GMT. I have tried using  gdal_translate -of GMT (and NetCDF), but I get the following error:
> gdal_translate -of GMT test.tif testOut.grd
> Input file size is 1347, 1032
> netcdf: 3 is not a valid cdfid
>   
Jose,
I just tried that transformation and it worked ok (1.4.0 on Win XP)
It only failed to convert the
NoData Value=-99999
to NaN as is expected for the default value on GMT grids

Joaquim Luis


From woklist at kyngchaos.com  Mon Feb 12 18:51:16 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <232FEB0D-DAE2-4328-8A67-EBD90B78675F@kyngchaos.com>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
	<7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>
	<45CDF100.4040405@pobox.com>
	<3DA3D969-3232-4F92-B34F-E8AC141E5238@kyngchaos.com>
	<232FEB0D-DAE2-4328-8A67-EBD90B78675F@kyngchaos.com>
Message-ID: <4874C34C-0C14-47E7-8842-F1FD0AD56862@kyngchaos.com>

Sorry to keep replying to myself.

I just noticed that the numpy failure is for the old bindings.  The  
numpy_rw_ng.py tests succeeded.

Is there a way to check for new/old bindings without failing a test?   
Otherwise one gets a false sense of "something's wrong!".


On Feb 12, 2007, at 5:01 PM, William Kyngesburye wrote:

> On Feb 12, 2007, at 4:42 PM, William Kyngesburye wrote:
>
> Running tests from gcore/numpy_rw.py
>   TEST: numpy_rw_1 ... fail (blowup)
> Traceback (most recent call last):
>   File "pymod/gdaltest.py", line 170, in run_tests
>     result = func()
>   File "./numpy_rw.py", line 68, in numpy_rw_1
>     _gdal.GDALRegister_NUMPY()
> AttributeError: 'module' object has no attribute 'GDALRegister_NUMPY'
>   TEST: numpy_rw_2 ... skip
>   TEST: numpy_rw_cleanup ... success
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

All generalizations are dangerous, even this one.



From achase at mbari.org  Mon Feb 12 18:55:34 2007
From: achase at mbari.org (Chase, Andrew)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] How to best perform raster cell aggregation
Message-ID: <C7B4D2761C705C44BEE5F4E4F13CF6F0B789B3@frost.shore.mbari.org>

Hi Folks,

I'm working with raster files, starting in the NetCDF format, but then moving them to .tif and .png based on how the user will need to manipulate them. One seemingly simple thing that I've been unable to find a simple solution for is resampling the data with an aggregation algorithm. For instance, I'd like to go from a 10 meter cell size to a 100 meter cell size where the value for a 100m cell is the sum of all the 10m cells that the 100m cell now represents. I have a very sparsely populated dataset, so averaging on resample tends to just push everything towards zero. What I'm looking for is the ability to see where very small data points exist when zoomed out.

I thought gdaladdo would be a good option for this, but it looks like is only for adding overview's to an already existing file and not for creating new files. Could I add an overlay to a tif and then extract just that overlay image into, say, a png?

Thanks,
Andrew

Andrew C. Chase
Software Engineer
Monterey Bay Aquarium Research Institute
(831) 775-1865 :: Work
(831) 419-8566 :: Cell [NOTE: New number as of May 22, 2005]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070212/fdb70d60/attachment.html
From warmerdam at pobox.com  Mon Feb 12 20:01:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] How to best perform raster cell aggregation
In-Reply-To: <C7B4D2761C705C44BEE5F4E4F13CF6F0B789B3@frost.shore.mbari.org>
References: <C7B4D2761C705C44BEE5F4E4F13CF6F0B789B3@frost.shore.mbari.org>
Message-ID: <45D10E07.5080700@pobox.com>

Chase, Andrew wrote:
> Hi Folks,
> 
> I'm working with raster files, starting in the NetCDF format, but then 
> moving them to .tif and .png based on how the user will need to 
> manipulate them. One seemingly simple thing that I've been unable to 
> find a simple solution for is resampling the data with an aggregation 
> algorithm. For instance, I'd like to go from a 10 meter cell size to a 
> 100 meter cell size where the value for a 100m cell is the sum of all 
> the 10m cells that the 100m cell now represents. I have a very sparsely 
> populated dataset, so averaging on resample tends to just push 
> everything towards zero. What I'm looking for is the ability to see 
> where very small data points exist when zoomed out.
> 
> I thought gdaladdo would be a good option for this, but it looks like is 
> only for adding overview's to an already existing file and not for 
> creating new files. Could I add an overlay to a tif and then extract 
> just that overlay image into, say, a png?

Andrew,

You can use gdaladdo to add overviews, and then use dumpoverviews to
dump the overviews to separate files.   You will likely have to
build dumpoverviews manually by going into gdal/apps and doing "make
dumpoverviews".

However, this won't give you the summed values you seem to want.

I'd suggest looking into righting a summing downsampler as a python
script using numpy to do the computation.  It may be a bit of fiddling
around.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Feb 12 20:12:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] NumPy supported in 1.4.0?
In-Reply-To: <4874C34C-0C14-47E7-8842-F1FD0AD56862@kyngchaos.com>
References: <632F8550-A88C-471D-B54B-6532E34F5575@simla.colostate.edu>
	<45CAF11E.6010207@pobox.com>
	<F72D04F1-FE2E-49F2-9FF1-22337AE09D0E@simla.colostate.edu>
	<4F92E3BF-4707-46B6-9922-12EC8802B6A9@iastate.edu>
	<9BDEB940-05B5-4328-A6BE-166916278E7D@simla.colostate.edu>
	<7B67A20C-BDEF-4494-92CF-D973E313A734@kyngchaos.com>
	<45CDF100.4040405@pobox.com>
	<3DA3D969-3232-4F92-B34F-E8AC141E5238@kyngchaos.com>
	<232FEB0D-DAE2-4328-8A67-EBD90B78675F@kyngchaos.com>
	<4874C34C-0C14-47E7-8842-F1FD0AD56862@kyngchaos.com>
Message-ID: <45D1108D.8040801@pobox.com>

William Kyngesburye wrote:
> Sorry to keep replying to myself.
> 
> I just noticed that the numpy failure is for the old bindings.  The 
> numpy_rw_ng.py tests succeeded.
> 
> Is there a way to check for new/old bindings without failing a test?  
> Otherwise one gets a false sense of "something's wrong!".
> 
> 
> On Feb 12, 2007, at 5:01 PM, William Kyngesburye wrote:
> 
>> On Feb 12, 2007, at 4:42 PM, William Kyngesburye wrote:
>>
>> Running tests from gcore/numpy_rw.py
>>   TEST: numpy_rw_1 ... fail (blowup)
>> Traceback (most recent call last):
>>   File "pymod/gdaltest.py", line 170, in run_tests
>>     result = func()
>>   File "./numpy_rw.py", line 68, in numpy_rw_1
>>     _gdal.GDALRegister_NUMPY()
>> AttributeError: 'module' object has no attribute 'GDALRegister_NUMPY'
>>   TEST: numpy_rw_2 ... skip
>>   TEST: numpy_rw_cleanup ... success

William,

numpy_rw.py already tries to skip the tests if it thinks the old-gen
bindings aren't supported.  But I think the test is incomplete.  Now it does:

     gdaltest.numpy_drv = None
     try:
         import Numeric
         import gdalnumeric
     except:
         return 'skip'

     import _gdal
     gdal.AllRegister()
     _gdal.GDALRegister_NUMPY()

Perhaps the _gdal.GDALRegister_NUMPY() should also be inside the
try block.  Hmm, I'm really not sure why this script is calling
gdal.AllRegister() or _gdal.GDALRegister_NUMPY() for that matter.
It seems like importing gdal should already have ensured this was
done.

Hmm, Howard?  Can we merge numpy_rw.py and numpy_rw_ng.py and make sure
they are pretty bulletproof in old-style and new style bindings?

I don't see these problems, but it turns out it is because I don't
have numpy or Numeric installed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dylan.beaudette at gmail.com  Mon Feb 12 21:08:38 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] How to best perform raster cell aggregation
In-Reply-To: <C7B4D2761C705C44BEE5F4E4F13CF6F0B789B3@frost.shore.mbari.org>
References: <C7B4D2761C705C44BEE5F4E4F13CF6F0B789B3@frost.shore.mbari.org>
Message-ID: <3c5546140702121808p4602e543n4eeeb627820bb28b@mail.gmail.com>

Hi Andrew, nice to see someone from the aquarium posting to the GDAL list!

i would highly recommend a GDAL+GRASS approach to your problem : GDAL
for the conversion and import / GRASS for the aggregation / analysis.
If possible, get  the CVS version of GRASS which contains several new
resampling commands.

Cheers,

Dylan

On 2/12/07, Chase, Andrew <achase@mbari.org> wrote:
>
>
>
> Hi Folks,
>
> I'm working with raster files, starting in the NetCDF format, but then
> moving them to .tif and .png based on how the user will need to manipulate
> them. One seemingly simple thing that I've been unable to find a simple
> solution for is resampling the data with an aggregation algorithm. For
> instance, I'd like to go from a 10 meter cell size to a 100 meter cell size
> where the value for a 100m cell is the sum of all the 10m cells that the
> 100m cell now represents. I have a very sparsely populated dataset, so
> averaging on resample tends to just push everything towards zero. What I'm
> looking for is the ability to see where very small data points exist when
> zoomed out.
>
> I thought gdaladdo would be a good option for this, but it looks like is
> only for adding overview's to an already existing file and not for creating
> new files. Could I add an overlay to a tif and then extract just that
> overlay image into, say, a png?
>
> Thanks,
> Andrew
>
> Andrew C. Chase
> Software Engineer
> Monterey Bay Aquarium Research Institute
> (831) 775-1865 :: Work
> (831) 419-8566 :: Cell [NOTE: New number as of May 22, 2005]
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From josegomez at gmx.net  Tue Feb 13 03:00:04 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Converting to GMT
In-Reply-To: <45D0F48B.5030105@ualg.pt>
References: <20070212222950.40890@gmx.net> <45D0F48B.5030105@ualg.pt>
Message-ID: <20070213080004.101180@gmx.net>

Joaquim,


> >I get the following error:
> > gdal_translate -of GMT test.tif testOut.grd
> > Input file size is 1347, 1032
> > netcdf: 3 is not a valid cdfid
   
> I just tried that transformation and it worked ok (1.4.0 on Win XP)
> It only failed to convert the
> NoData Value=-99999
> to NaN as is expected for the default value on GMT grids

Hmmm, it also works fine on Win2k (GDAL 1.3.1.0, FWTools 1.0.0a6, released 2005/11/03), but fails on my Linux box, and with the latest GDAL installed. i wonder why?
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From dron at ak4719.spb.edu  Tue Feb 13 05:21:34 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Motion: Commiter Access for Hannah Valbonesi
In-Reply-To: <45D0DD81.2080003@pobox.com>
References: <45D0DD81.2080003@pobox.com>
Message-ID: <20070213102134.GB24672@ak4719.spb.edu>

On Mon, Feb 12, 2007 at 04:34:57PM -0500, Frank Warmerdam wrote:
> Motion: That Hannah Valbonesi be granted GDAL/OGR commit access.
> 
> --
> 
> Hannah has been working on the raster support at Safe Software, including
> the GDAL related aspects for a few years now, and has a good grasp of GDAL.
> She has previously routed fixes through me, but increasingly it would be
> helpful for her to be able to commit improvements directly.

+1

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Tue Feb 13 10:13:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Converting to GMT
In-Reply-To: <20070213080004.101180@gmx.net>
References: <20070212222950.40890@gmx.net> <45D0F48B.5030105@ualg.pt>
	<20070213080004.101180@gmx.net>
Message-ID: <45D1D597.7060401@pobox.com>

Jose Luis Gomez Dans wrote:
> Joaquim,
> 
> 
>>> I get the following error:
>>> gdal_translate -of GMT test.tif testOut.grd
>>> Input file size is 1347, 1032
>>> netcdf: 3 is not a valid cdfid
>    
>> I just tried that transformation and it worked ok (1.4.0 on Win XP)
>> It only failed to convert the
>> NoData Value=-99999
>> to NaN as is expected for the default value on GMT grids
> 
> Hmmm, it also works fine on Win2k (GDAL 1.3.1.0, FWTools 1.0.0a6, released 2005/11/03), but fails on my Linux box, and with the latest GDAL installed. i wonder why?

Jose,

I'm not sure, but I reproduced the same error message about "cdfid".  I
don't think I'll have time to build the netcdf libraries in debug and
track through to see what is happening today, so I'd appreciate it if you
could file a bug in the GDAL bugzilla about the issue.  You might note
in the bug that is also occurs "on Frank's Ubuntu system using the packaged
libnetcdf" as a reminder to me, or Mateusz.

I vaguely suspect some sort of hdf4/netcdf problems but I'm not sure.

In the meantime, it appears that the FWTools for linux build for netcdf
is working for me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From emiliomayorga at gmail.com  Tue Feb 13 11:23:04 2007
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] How to best perform raster cell aggregation
Message-ID: <b0d146420702130823j137f938bq900175060cbaac74@mail.gmail.com>

> I'm working with raster files, starting in the NetCDF format, but then
> moving them to .tif and .png based on how the user will need to manipulate
> them. One seemingly simple thing that I've been unable to find a simple
> solution for is resampling the data with an aggregation algorithm. For
> instance, I'd like to go from a 10 meter cell size to a 100 meter cell size
> where the value for a 100m cell is the sum of all the 10m cells that the
> 100m cell now represents. I have a very sparsely populated dataset, so
> averaging on resample tends to just push everything towards zero. What I'm
> looking for is the ability to see where very small data points exist when
> zoomed out.

Andrew,

You may want to look into NCO, the netcdf operator utility
(http://nco.sourceforge.net/). It's a  command-line swiss army knife
for performing operations on netcdf, including statistics across
dimensions, and may include aggregation/rebinning. If it does take
care of that step, you could first use an nco utility to perform the
aggregation, then gdal to convert to tif/png.

I haven't used nco in a long time, so I can't help much at all. Good luck.

-Emilio Mayorga
Post-Doctoral Researcher
Rutgers, The State University of New Jersey
Institute of Marine and Coastal Sciences
71 Dudley Rd.
New Brunswick, NJ 08901-8521, USA

From dmorissette at mapgears.com  Tue Feb 13 13:11:17 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Motion: Commiter Access for Hannah Valbonesi
In-Reply-To: <45D0E76C.10105@pobox.com>
References: <45D0DD81.2080003@pobox.com> <45D0E76C.10105@pobox.com>
Message-ID: <45D1FF45.9080307@mapgears.com>

+1

Daniel

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> Motion: That Hannah Valbonesi be granted GDAL/OGR commit access.
>>
>> -- 
>>
>> Hannah has been working on the raster support at Safe Software, including
>> the GDAL related aspects for a few years now, and has a good grasp of 
>> GDAL.
>> She has previously routed fixes through me, but increasingly it would be
>> helpful for her to be able to commit improvements directly.
> 
> Folks,
> 
> I neglected to mention that Hannah has reviewed and agreed to the commiter
> guidelines and has cleared them with Safe management.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From dadiu at ornl.gov  Tue Feb 13 15:46:21 2007
From: dadiu at ornl.gov (Dadi, Upendra)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] creating files with multiple-bands with different data
	types
Message-ID: <BAFDB9D3D9C1DC4DAB42016A163ED23701E9AB85@ORNLEXCHANGE.ornl.gov>

Hi,
   Is it possible using GDAL to create Geotiff files with multiple bands
with each band having a different data type? Does Geotiff standard even
allow that? I want to merge multiple Geotiff files, each file containing
a single band, into a single geotiff file. The data types of the single
band files are all different. The data type of each band should be
preserved during with transformation. Is it possible? Any help is
greatly appreciated. Thanks.
 
Upendra
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070213/c6699f56/attachment.html
From warmerdam at pobox.com  Tue Feb 13 16:47:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] creating files with multiple-bands with different
	data types
In-Reply-To: <BAFDB9D3D9C1DC4DAB42016A163ED23701E9AB85@ORNLEXCHANGE.ornl.gov>
References: <BAFDB9D3D9C1DC4DAB42016A163ED23701E9AB85@ORNLEXCHANGE.ornl.gov>
Message-ID: <45D231EA.9070504@pobox.com>

Dadi, Upendra wrote:
> Hi,
>    Is it possible using GDAL to create Geotiff files with multiple bands 
> with each band having a different data type? 

Upendra,

No, GDAL does not support creating or reading such files.

 > Does Geotiff standard even allow that?

This is legal in the TIFF specification, but non-baseline.  I however
consider it perverse. :-)

 > I want to merge multiple Geotiff files, each file containing
> a single band, into a single geotiff file. The data types of the single 
> band files are all different. The data type of each band should be 
> preserved during with transformation. Is it possible? Any help is 
> greatly appreciated. Thanks.

Perhaps what you need to do is append them into one GeoTIFF file with
each band as a seperate image directory.   In this case different types
are ok.  Nevertheless, it will still be quite hard to create or utilize
such images with GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mbaye1234 at yahoo.fr  Wed Feb 14 08:29:26 2007
From: mbaye1234 at yahoo.fr (mbaye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] kakadu/Solaris/compile
Message-ID: <8964867.post@talk.nabble.com>


i have compiling kakadu in Solaris 
I have this bugs 

make -f  Makefile-Solaris-sunpro-5.0

1 Warning(s) detected.
CC -I../common -O2 -DNDEBUG -w  -KPIC -c ../compressed/codestream.cpp \
      -o codestream.o
"../common/kdu_elementary.h", line 260: Warning (Anachronism): Formal
argument 3 of type extern "C" void*(*)(void*) in call to
pthread_create(unsigned*, const _pthread_attr*, extern "C" void*(*)(void*),
void*) is being passed void*(*)(void*).
1 Warning(s) detected.
CC -I../common -O2 -DNDEBUG -w  -KPIC -c ../compressed/compressed.cpp \
      -o compressed.o
"../common/kdu_elementary.h", line 260: Warning (Anachronism): Formal
argument 3 of type extern "C" void*(*)(void*) in call to
pthread_create(unsigned*, const _pthread_attr*, extern "C" void*(*)(void*),
void*) is being passed void*(*)(void*).
1 Warning(s) detected.
CC -I../common -O2 -DNDEBUG -w  -KPIC -c ../kernels/kernels.cpp \
      -o kernels.o
"../common/kdu_elementary.h", line 260: Warning (Anachronism): Formal
argument 3 of type extern "C" void*(*)(void*) in call to
pthread_create(unsigned*, const _pthread_attr*, extern "C" void*(*)(void*),
void*) is being passed void*(*)(void*).
1 Warning(s) detected.
CC -I../common -O2 -DNDEBUG -w  -KPIC -c ../messaging/messaging.cpp \
      -o messaging.o
"../common/kdu_elementary.h", line 260: Warning (Anachronism): Formal
argument 3 of type extern "C" void*(*)(void*) in call to
pthread_create(unsigned*, const _pthread_attr*, extern "C" void*(*)(void*),
void*) is being passed void*(*)(void*).
"../messaging/messaging.cpp", line 81: Error:
kd_text_register::kd_custom_context is not accessible from
kd_text_register::kd_custom_bin.
"../messaging/messaging.cpp", line 84: Error:
kd_text_register::kd_custom_bin is not accessible from
kd_text_register::kd_custom_store.
2 Error(s) and 1 Warning(s) detected.
*** Error code 2
make: Fatal error: Command failed for target `messaging.o'

thanks for help

-- 
View this message in context: http://www.nabble.com/kakadu-Solaris-compile-tf3227248.html#a8964867
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mateusz at loskot.net  Wed Feb 14 09:41:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Building against Xerces 2.7.0 fails
In-Reply-To: <6fb81fc70702090703lede9677vf26e7c197a04e8d8@mail.gmail.com>
References: <6fb81fc70702090054g1edba434u6bdb755269265d2@mail.gmail.com>	<6fb81fc70702090232u50c996cai260ef3969fcaa99c@mail.gmail.com>	<6fb81fc70702090654m7994f4crc28e60f9dbe8d58d@mail.gmail.com>
	<6fb81fc70702090703lede9677vf26e7c197a04e8d8@mail.gmail.com>
Message-ID: <45D31F8A.2030005@loskot.net>

Benoit Myard wrote:
>> [...] You will find two small patches attached to this mail which
>> correct the compilation errors.
> 
> Oops, I mixed up the filenames on the command line ; here are the
> correct patches. Sorry.

Your patches look good to me as improving type safety and portability.

The code in the iom_error.cpp file looks like depending on GCC
feature of VLA.
The code original in ogrili1datasource.cpp  uses buggy behavior of GCC
and strchr should get/return const or get/return non-const objects,
but not get const and return non-const.

Here is a longer story about strchr() behavior in GCC/libstdc++:

http://gcc.gnu.org/ml/libstdc++/2006-02/msg00086.html
http://gcc.gnu.org/ml/libstdc++/2006-02/msg00087.html


Frank,
If you don't mind I'd vote for applying these patches (and I can do it).

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From aaime at openplans.org  Wed Feb 14 10:41:34 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Java bindings and wkb support, a patch for gdal
In-Reply-To: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
Message-ID: <45D32DAE.7050201@openplans.org>

Hi all,
as some of you may know, I had some issues with the java bindings
with wkb export (memory management issues breaking the jvm).

I have prepared a patch that makes wkb export work and attached it
to this mail. I sent the same mail to Benjamin Collins a few days
ago, but got no answer so far, so I'm addressing this to the
mailing list as well. Who's mantaining the java bindings, btw?

In the patch I make java allocate the byte buffer (in the same spirit as 
the C++ API) and added a typemap, taking inspiration from the C# 
mappings that already worked around the wkb memory management issues.

Works nice, and the speedup compared to WKT is significant, 4 times on 
my full shapefile load test (compared to reading geometries with WKT, 
that did not tear down the jvm).

If the patch has issues, let me know, I'll try to work them out.

Cheers
Andrea
-------------- next part --------------
A non-text attachment was scrubbed...
Name: wkbPatch.patch
Type: text/x-diff
Size: 2937 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070214/5ae704da/wkbPatch.bin
From mooreds at mooreds.com  Wed Feb 14 12:08:12 2007
From: mooreds at mooreds.com (Dan Moore)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] ogr2ogr export from postgis to esri incorrectly exports
	attributes
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233E3EEDE@COMAIL01.digitalglobe.com>
References: <45CE6BF6.5080302@mooreds.com>
	<8B319E5A30FF4A48BE7EEAAF609DB233E3EEDE@COMAIL01.digitalglobe.com>
Message-ID: <45D341FC.7020300@mooreds.com>

Hi Ethan,

Thanks for the pointer to that doc.

Since the ESRI driver only supports "Only Integer, Real and String field 
types," does that mean that date types are not supported?  If so, should 
I just map those date types to strings with a view?  I see some of the 
date data (for example, contractdate) in the shapefile output.

I also verified that all of the data is contained in the field (ie, 
there are no addresses longer than 100 characters).

The document says "Attribute names can only be up to 12 characters long. 
Longer names will be silently truncated. This may result in non-unique 
column names, which will definitely cause problems later."

However, I'm seeing attribute names truncated at 10 characters.  I did 
have some columns that were not unique in the first 10 characters, so I 
renamed them, but I still see shifted and missing data.

I've attached a zip file containing a shapefile with the erroneous 
output I'm seeing.

The issue begins right after garagedesc.  Since ogr2ogr exports the 
fields in alphabetic order, I looked at both garagedesc and heatsystem 
in light of the document Ethan mentioned.  I couldn't see anything 
incorrect.

Here's the table I'm trying to export as an esri file.

db=> \d real_estate_data
              Table "public.real_estate_data"
        Column       |          Type           | Modifiers
--------------------+-------------------------+-----------
  dataset_id         | integer                 | not null
  latitude           | real                    | not null
  longitude          | real                    | not null
  precision          | character varying(100)  |
  address            | character varying(100)  |
  city               | character varying(100)  |
  state              | character varying(2)    |
  zip                | character varying(10)   |
  subdivision        | character varying(200)  |
  mlsnumber          | character varying(20)   |
  liststatus         | character varying(20)   |
  baths              | character varying(4)    |
  bedrooms           | character varying(4)    |
  sqfttotal          | integer                 |
  level              | character varying(100)  |
  privatepool        | character varying(1)    |
  remarks            | character varying(2000) |
  garagedesc         | character varying(500)  |
  lotsize            | character varying(100)  |
  coolsystem         | character varying(200)  |
  heatsystem         | character varying(200)  |
  construction       | character varying(200)  |
  yearbuilt          | integer                 |
  elemschdist        | integer                 |
  highschdist        | integer                 |
  schoolelem         | character varying(100)  |
  schoolhigh         | character varying(100)  |
  schooljunior       | character varying(100)  |
  listdate           | date                    |
  contractdate       | date                    |
  closeddate         | date                    |
  offmarketdate      | date                    |
  daysonmarket       | integer                 |
  listpriceorig      | integer                 |
  listprice          | integer                 | not null
  salesprice         | integer                 |
  percentoflistprice | real                    |
  the_geom           | geometry                |

Thanks,
Dan

Ethan Alpert wrote:
> Dan,
> 
> It may be helpful to post the schema. You're dumping from. I have in the
> past created views with data type casts in order to produce shapefiles
> with the values I expect.
> 
> See the docs on the shapefile driver. There's a section that begins:
> 
> "Shapefile feature attributes are stored in an associated .dbf file, and
> so attributes suffer a number of limitations:"
> 
> -e
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Dan Moore
> Sent: Saturday, February 10, 2007 6:06 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] ogr2ogr export from postgis to esri incorrectly
> exportsattributes
> 
> Hi folks,
> 
> First off, I'm pretty new to this toolset, so please forgive me if I use
> 
> incorrect terminology.
> 
> I'm using ogr2ogr to turn some data in a PostGIS database (8.1.4) into 
> an ESRI shapefile.  The data has about 25 fields, and when I open up the
> 
> dbf file in excel, they are exported incorrectly.  Lat/lngs are exported
> 
> correctly, but the other attributes are not.  All the values are there, 
> but they are offset.  Some are smashed together.  This is also apparent 
> when I view the exported ESRI file in QGIS (0.8).
> 
> For example, I'll have fields (| separates fields)
> lat|lng|address|beds|bath|garage|heating|remarks|listprice
> and the values don't align:
> 2.3|3.4|222 Canyon Blvd|2|2|||nice garagecentral heating||remarks...|123
> 
> Here you can see that the garage and heating sections were smashed 
> together, and some extra fields were put in before the garage data. 
> This happens after the twelfth column in the export.  The last few 
> fields are not in the export (they're pushed off by the blank columns).
> 
> This happens whether or not I have a where clause on this export.  I 
> also tried exporting a few other tables in this database, and the 
> attribute shifting didn't happen to either one.  Neither of those tables
> 
> had as many columns as this one, however.
> 
> Here's the output of the command when I run it with --debug on:
> $ ogr2ogr --debug on -where " dataset_id = 25 " -f "ESRI Shapefile" 
> out.shp PG:"user=user dbname=db password=pass" data
> OGR_PG: DBName="db"
> OGR_PG: PostSIS version string: '1.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1' 
> -> '1.1'
> OGR_PG: POSTGIS_VERSION=1.1 USE_GEOS=1 USE_PROJ=1 USE_STATS=1
> OGR_PG: Layer 'data' geometry type: POINT:Point, Dim=2
> OGR_PG: Layer 'roads' geometry type: MULTILINESTRING:Multi Line String, 
> Dim=2
> OGR: OGROpen(PG:user=user dbname=db password=pass/xxxxx) succeeded as 
> PostgreSQL.
> OGR_PG: PQexec(DECLARE OGRPGLayerReader CURSOR for SELECT 
> AsEWKT("the_geom"), "address", "baths", "bedrooms", "city", 
> "closeddate", "construction", "contractdate", "coolsystem", 
> "dataset_id", "daysonmarket", "garagedesc", "heatsystem", "latitude", 
> "level", "listdate", "listprice", "listpriceorig", "liststatus", 
> "longitude", "lotsize", "mlsnumber", "offmarketdate", 
> "percentoflistprice", "precision", "privatepool", "remarks", 
> "salesprice", "schooldistrictelem", "schooldistricthigh", "schoolelem", 
> "schoolhigh", "schooljunior", "sqfttotal", "state", "subdivision", 
> "yearbuilt", "zip" FROM "data" WHERE  dataset_id = 25  )
> PG: 11157 features read on layer 'data'.
> 
> However, an export to mapinfo seems to work (the attributes are all 
> there), and an ogr2ogr from the exported mapinfo file to an ESRI file 
> seems to preserve the attributes.  So I can use this workaround, but 
> would prefer to understand the real problem.  (As an aside, the mapinfo 
> export gives this error message:
> ERROR 1: IMapInfoFile::CreateField() called with unsupported field type 
> 9. Note that Mapinfo files don't support list field types.)
> 
> I googled against this list, but didn't find anything that referenced 
> this particular problem.
> 
> I couldn't figure out the version of ogr2ogr, but this is at the bottom 
> of the man page:
> GDAL                       13 Apr 2006                 ogr2ogr(1)
> 
> Has anyone seen such behavior?  Can you recommend any other debugging 
> steps (can I turn on debugging more)?  Removing columns and seeing what 
> happens? Should I try to upgrade the GDAL tools?  Any other suggestions 
> are welcome.
> 
> Thanks,
> Dan
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
Regards,
Dan Moore
Moore Consulting
mooreds@mooreds.com
http://www.mooreds.com/weblog/
720 560 8545

-------------- next part --------------
A non-text attachment was scrubbed...
Name: badexport.zip
Type: application/x-zip-compressed
Size: 1681 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070214/237db6ed/badexport.bin
From rkgeorge at cadmaps.com  Wed Feb 14 13:47:40 2007
From: rkgeorge at cadmaps.com (Randy George)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] RE: ogr2ogr KML styling
Message-ID: <20070214184742.D4F8A62D631@mpls-qmqp-05.inet.qwest.net>

Hi,

 

I am experimenting with kml output for example:

 

"E:\Program Files\FWTools1.1.3\bin\ogr2ogr" -f KML
D:\CookInlet\Cook-Inlet\test.kml D:\CookInlet\Cook-Inlet\Seismic_lines.shp

 

The resulting set of kml <Placemark> looks like this:

            .

            .

  <Placemark>

    <description><![CDATA[

      <b>DESCRIPTIO:</b> <i>293U-39</i><br />

      <b>SHOTBY:</b> <i>OIL COMPANY</i><br />

   ]]>

   </description>

         <LineString><coordinates>-152.11768673515135,60.589764421552438
-152.11540114261703,60.592063085951288 ...</coordinates></LineString>

                        <Style>

                                    <LineStyle>

                                                <color>ff0000ff</color>

                                    </LineStyle>

                                    <PolyStyle>

                                                <fill>0</fill>

                                    </PolyStyle>

                        </Style>

  </Placemark>

 

This seems fine except that the default linestyle width doesn't show up on
my GoogleEarth view. I can manually add <width>4</width> to correct the
problem, but is there a way to change kml style output in ogr2ogr?

 

I could resort to a java runtime.exec() with a STDOUT => XMLReader but
wondered if there was a way to merge a style definition file using ogr2ogr.
Perhaps an xslt approach would be better.

 

Thanks

randy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070214/30a9deba/attachment.html
From dylan.beaudette at gmail.com  Wed Feb 14 17:13:20 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] setting nodata for gdalwarp result
Message-ID: <200702141413.20279.dylan.beaudette@gmail.com>

Greetings,

I am warping many images, and would like to set the destination nodata to a 
value which will allow me to mask out the projection artifacts (collar) when 
displaying these images with Mapserver. The source data are DOQQ (black and 
white) in a variety of UTM coordinate systems. In projecting them to AEA, a 
large 'collar' is introduced in the areas where the image was rotated. Up 
until now I have told Mapserver to ignore black pixels, but this has the 
obvious side-effect of throwing out *real* black pixels.

I am using the -dstnodata -9999 to set the new nodata pixels to something 
other than black (0) ... but this does not seem to work.

Any thoughts on how to do this would be greatly appreciated.

cheers,

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From szekerest at gmail.com  Wed Feb 14 16:59:53 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Java bindings and wkb support, a patch for gdal
In-Reply-To: <45D32DAE.7050201@openplans.org>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
	<45D32DAE.7050201@openplans.org>
Message-ID: <f3b73b7d0702141359k43eedf49o777d9869a5a53aa9@mail.gmail.com>

Hi Andrea,

Though I'm not the dedicated java maintainer I volunteer to commit
such changes if Benjamin will not be around.


Tamas



2007/2/14, Andrea Aime <aaime@openplans.org>:
> Hi all,
> as some of you may know, I had some issues with the java bindings
> with wkb export (memory management issues breaking the jvm).
>
> I have prepared a patch that makes wkb export work and attached it
> to this mail. I sent the same mail to Benjamin Collins a few days
> ago, but got no answer so far, so I'm addressing this to the
> mailing list as well. Who's mantaining the java bindings, btw?
>
> In the patch I make java allocate the byte buffer (in the same spirit as
> the C++ API) and added a typemap, taking inspiration from the C#
> mappings that already worked around the wkb memory management issues.
>
> Works nice, and the speedup compared to WKT is significant, 4 times on
> my full shapefile load test (compared to reading geometries with WKT,
> that did not tear down the jvm).
>
> If the patch has issues, let me know, I'll try to work them out.
>
> Cheers
> Andrea
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>

From warmerdam at pobox.com  Wed Feb 14 19:20:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] setting nodata for gdalwarp result
In-Reply-To: <200702141413.20279.dylan.beaudette@gmail.com>
References: <200702141413.20279.dylan.beaudette@gmail.com>
Message-ID: <45D3A763.2080307@pobox.com>

Dylan Beaudette wrote:
> Greetings,
> 
> I am warping many images, and would like to set the destination nodata to a 
> value which will allow me to mask out the projection artifacts (collar) when 
> displaying these images with Mapserver. The source data are DOQQ (black and 
> white) in a variety of UTM coordinate systems. In projecting them to AEA, a 
> large 'collar' is introduced in the areas where the image was rotated. Up 
> until now I have told Mapserver to ignore black pixels, but this has the 
> obvious side-effect of throwing out *real* black pixels.
> 
> I am using the -dstnodata -9999 to set the new nodata pixels to something 
> other than black (0) ... but this does not seem to work.
> 
> Any thoughts on how to do this would be greatly appreciated.

Dylan,

One approach would be to prescale your data to the range 1-255 instead of
0 to 255.  That way when you use 0 as a nodata value it would not conflict
with any real data.

If you want to use a value like -9999 then you would have to produce 16bit
files rather than 8bit files.  The extra processing time (in mapserver) and
other complications of 16bit data make this seem like an unattractive option
from my point of view.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Feb 14 19:24:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Java bindings and wkb support, a patch for gdal
In-Reply-To: <f3b73b7d0702141359k43eedf49o777d9869a5a53aa9@mail.gmail.com>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
	<45D32DAE.7050201@openplans.org>
	<f3b73b7d0702141359k43eedf49o777d9869a5a53aa9@mail.gmail.com>
Message-ID: <45D3A83D.9090406@pobox.com>

Tamas Szekeres wrote:
> Hi Andrea,
> 
> Though I'm not the dedicated java maintainer I volunteer to commit
> such changes if Benjamin will not be around.
> 
> 
> Tamas
> 
> 
> 
> 2007/2/14, Andrea Aime <aaime@openplans.org>:
>> Hi all,
>> as some of you may know, I had some issues with the java bindings
>> with wkb export (memory management issues breaking the jvm).
>>
>> I have prepared a patch that makes wkb export work and attached it
>> to this mail. I sent the same mail to Benjamin Collins a few days
>> ago, but got no answer so far, so I'm addressing this to the
>> mailing list as well. Who's mantaining the java bindings, btw?
>>
>> In the patch I make java allocate the byte buffer (in the same spirit as
>> the C++ API) and added a typemap, taking inspiration from the C#
>> mappings that already worked around the wkb memory management issues.
>>
>> Works nice, and the speedup compared to WKT is significant, 4 times on
>> my full shapefile load test (compared to reading geometries with WKT,
>> that did not tear down the jvm).
>>
>> If the patch has issues, let me know, I'll try to work them out.

Andrea,

I'd add that since Benjamin seems a bit missing-in-action, I'd be pleased
to sponsor you as a GDAL committer if you were interested in helping to
maintain the Java bindings.  In the meantime, going through Tamas would
be great, or if there is no hurry just file a bug and we will have Mateusz
address it when he comes on stream as general maintainer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Thu Feb 15 02:48:39 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Java bindings and wkb support, a patch for gdal
In-Reply-To: <45D3A83D.9090406@pobox.com>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
	<45D32DAE.7050201@openplans.org>
	<f3b73b7d0702141359k43eedf49o777d9869a5a53aa9@mail.gmail.com>
	<45D3A83D.9090406@pobox.com>
Message-ID: <45D41057.4020504@openplans.org>

Frank Warmerdam ha scritto:
> Tamas Szekeres wrote:
>> Hi Andrea,
>>
>> Though I'm not the dedicated java maintainer I volunteer to commit
>> such changes if Benjamin will not be around.

Many thanks :-)

> Andrea,
> 
> I'd add that since Benjamin seems a bit missing-in-action, I'd be pleased
> to sponsor you as a GDAL committer if you were interested in helping to
> maintain the Java bindings.  

Sure. I would just feel a little more comfortable if someone could
have a look at the patches at the beginning, since I've absolutely
no experience with SWIG. Making a patch that works for me doesn't make 
it right :-)

> In the meantime, going through Tamas would
> be great, or if there is no hurry just file a bug and we will have Mateusz
> address it when he comes on stream as general maintainer.

I'll keep on creating patches as I need them, learning new technology is 
entertaining :-)
When and if you feel comfortable givin me commit access, I'll accept it
gladly. Btw, how does it work vs managing changes?
For example, this patch changes the exportToWkb interface compared to 
other languages (not much of an issue on the java side, since it wasn't
working before).
Next step for me will be to try and add a method to retrive a full 
Feature attribute set in a single call, to reduce the JNI overhead 
(rumor says a JNI call is 10 times more expensive than a regular java
method call). This will be a new method in the Swig java binding.

Are these kind of modifications ok? How many people are using the
java bindings, and how to relate with them?

Cheers
Andrea

From warmerdam at pobox.com  Thu Feb 15 05:24:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Java bindings and wkb support, a patch for gdal
In-Reply-To: <45D41057.4020504@openplans.org>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
	<45D32DAE.7050201@openplans.org>
	<f3b73b7d0702141359k43eedf49o777d9869a5a53aa9@mail.gmail.com>
	<45D3A83D.9090406@pobox.com> <45D41057.4020504@openplans.org>
Message-ID: <45D434F3.1030400@pobox.com>

Andrea Aime wrote:
> Sure. I would just feel a little more comfortable if someone could
> have a look at the patches at the beginning, since I've absolutely
> no experience with SWIG. Making a patch that works for me doesn't make 
> it right :-)

Andrea,

Quite understandable.

>> In the meantime, going through Tamas would
>> be great, or if there is no hurry just file a bug and we will have 
>> Mateusz
>> address it when he comes on stream as general maintainer.
> 
> I'll keep on creating patches as I need them, learning new technology is 
> entertaining :-)
> When and if you feel comfortable givin me commit access, I'll accept it
> gladly. Btw, how does it work vs managing changes?
> For example, this patch changes the exportToWkb interface compared to 
> other languages (not much of an issue on the java side, since it wasn't
> working before).

I didn't look closely at the patch, but changing the general interface
in a way that affects other languages is almost certain to not be ok.

> Next step for me will be to try and add a method to retrive a full 
> Feature attribute set in a single call, to reduce the JNI overhead 
> (rumor says a JNI call is 10 times more expensive than a regular java
> method call). This will be a new method in the Swig java binding.

How would you pack a feature so that the cost of packing and reparsing
aren't heavier than the cost of many JNI calls?

> Are these kind of modifications ok? How many people are using the
> java bindings, and how to relate with them?

The java bindings are not widely used, but I think parts of them are in
use so breaking interfaces that work now may not be acceptable.  I suspect
the GDAL side is in wider use than the OGR side.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Thu Feb 15 04:42:35 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Java bindings and wkb support, a patch for gdal
In-Reply-To: <45D434F3.1030400@pobox.com>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
	<45D32DAE.7050201@openplans.org>
	<f3b73b7d0702141359k43eedf49o777d9869a5a53aa9@mail.gmail.com>
	<45D3A83D.9090406@pobox.com> <45D41057.4020504@openplans.org>
	<45D434F3.1030400@pobox.com>
Message-ID: <45D42B0B.20607@openplans.org>

Frank Warmerdam ha scritto:

>>> In the meantime, going through Tamas would
>>> be great, or if there is no hurry just file a bug and we will have 
>>> Mateusz
>>> address it when he comes on stream as general maintainer.
>>
>> I'll keep on creating patches as I need them, learning new technology 
>> is entertaining :-)
>> When and if you feel comfortable givin me commit access, I'll accept it
>> gladly. Btw, how does it work vs managing changes?
>> For example, this patch changes the exportToWkb interface compared to 
>> other languages (not much of an issue on the java side, since it wasn't
>> working before).
> 
> I didn't look closely at the patch, but changing the general interface
> in a way that affects other languages is almost certain to not be ok.

No no, the interface change is there only for Java, not for any other
language, and it makes the java interface look just like the c++ one
(the SWIG one tries to allocate memory inside the call, that's what
breaks java, and btw, the difference between SWIG and c++
is not documented anywhere afaik).
Besides, I'm sure nobody ever used the exportToWkb method in java 
bindings, since it tears down the jvm solid.

>> Next step for me will be to try and add a method to retrive a full 
>> Feature attribute set in a single call, to reduce the JNI overhead 
>> (rumor says a JNI call is 10 times more expensive than a regular java
>> method call). This will be a new method in the Swig java binding.
> 
> How would you pack a feature so that the cost of packing and reparsing
> aren't heavier than the cost of many JNI calls?

The idea is to have a method that builds String, Double, Date, ...
objects and put them into an object array that I pass back to java.
It's worth a try, in my experiments reading a shapefile thru J-OGR
is still 2.5 times slower than doing it with the geotools shapefile
reader. I'm pretty confident I can do better gathering one feature
at a time.
Of course, this method would be a java only extension, since other
language do not pay such a heavy cost in calling the native side (and
well, besides java and c# everyone else seems to use the same memory
model as C).

>> Are these kind of modifications ok? How many people are using the
>> java bindings, and how to relate with them?
> 
> The java bindings are not widely used, but I think parts of them are in
> use so breaking interfaces that work now may not be acceptable.  I suspect
> the GDAL side is in wider use than the OGR side.

Ok. My idea is just to add methods to the java binding to make it 
deliver, the plain binding is nice, but not very usable if you need
performance too.

Cheers
Andrea

From szekerest at gmail.com  Thu Feb 15 06:14:21 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Java bindings and wkb support, a patch for gdal
In-Reply-To: <45D41057.4020504@openplans.org>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
	<45D32DAE.7050201@openplans.org>
	<f3b73b7d0702141359k43eedf49o777d9869a5a53aa9@mail.gmail.com>
	<45D3A83D.9090406@pobox.com> <45D41057.4020504@openplans.org>
Message-ID: <f3b73b7d0702150314m5016eee7m9493c78704345c14@mail.gmail.com>

Andrea,

2007/2/15, Andrea Aime <aaime@openplans.org>:
>
> Sure. I would just feel a little more comfortable if someone could
> have a look at the patches at the beginning, since I've absolutely
> no experience with SWIG. Making a patch that works for me doesn't make
> it right :-)
>

That's not a problem. Many of the developers can give suggestions
about the uncertain problems. I would also be happy to have an active
java maintainer who uses this interface frequently in practice and can
take care of the upcoming problems related to that language. There are
many similarities between C# and Java SWIG approach, but the way of
mapping some of the datatypes may differ.

>
> I'll keep on creating patches as I need them, learning new technology is
> entertaining :-)
> When and if you feel comfortable givin me commit access, I'll accept it
> gladly.

+1.

> Btw, how does it work vs managing changes?
> For example, this patch changes the exportToWkb interface compared to
> other languages (not much of an issue on the java side, since it wasn't
> working before).
> Next step for me will be to try and add a method to retrive a full
> Feature attribute set in a single call, to reduce the JNI overhead
> (rumor says a JNI call is 10 times more expensive than a regular java
> method call). This will be a new method in the Swig java binding.
>
> Are these kind of modifications ok? How many people are using the
> java bindings, and how to relate with them?
>

In general, we should keep the various bindings aligned as much as we
can. However there are some cases where making some different is
inevitable. Here are some issues from the C# side requiring to make
something different.

- Altering the default memory allocation sceme (required by the target
language or related to performance issues)
- Handling some target language dependent memory management issues
(like the early garbage collection problem)
- Adding language dependent type mappings.
- Using more convenient data types for a particular language (for
example using class type instead of array like GDALColorEntry for C#).
- ...

Adding new methods for a particular language is definitely not a
problem, however we should negotiate whether that method should also
be added for the other bindings or not.

Best regards,

Tamas

From mateusz at loskot.net  Thu Feb 15 07:33:56 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Building against Xerces 2.7.0 fails
In-Reply-To: <6fb81fc70702090703lede9677vf26e7c197a04e8d8@mail.gmail.com>
References: <6fb81fc70702090054g1edba434u6bdb755269265d2@mail.gmail.com>	<6fb81fc70702090232u50c996cai260ef3969fcaa99c@mail.gmail.com>	<6fb81fc70702090654m7994f4crc28e60f9dbe8d58d@mail.gmail.com>
	<6fb81fc70702090703lede9677vf26e7c197a04e8d8@mail.gmail.com>
Message-ID: <45D45334.4020100@loskot.net>

Benoit Myard wrote:
>> [...] You will find two small patches attached to this mail which
>> correct the compilation errors.
> 
> Oops, I mixed up the filenames on the command line ; here are the
> correct patches. Sorry.

Benoit,

Thank you very much for contributing this fix to GDAL.
I applied it to the SVN, in revision 10820

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From myardbenoit at gmail.com  Thu Feb 15 11:08:01 2007
From: myardbenoit at gmail.com (Benoit Myard)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] RE: ogr2ogr KML styling
In-Reply-To: <20070214184742.D4F8A62D631@mpls-qmqp-05.inet.qwest.net>
References: <20070214184742.D4F8A62D631@mpls-qmqp-05.inet.qwest.net>
Message-ID: <6fb81fc70702150808x44ea8f5cx6fd1f0775376e66c@mail.gmail.com>

> This seems fine except that the default linestyle width doesn't show up on
> my GoogleEarth view. I can manually add <width>4</width> to correct the
> problem, but is there a way to change kml style output in ogr2ogr?

Not that I'm aware of.

> I could resort to a java runtime.exec() with a STDOUT => XMLReader but
> wondered if there was a way to merge a style definition file using ogr2ogr.
> Perhaps an xslt approach would be better.

Well, it's a matter of taste but XSLT has been designed for that kind
of jobs though.

-- 
Benoit Myard

From mirhassanali at gmail.com  Thu Feb 15 11:43:07 2007
From: mirhassanali at gmail.com (Mir Hassan Ali)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Export from GeoMedia to MapInfo file format
Message-ID: <b41d86b30702150843h60c5d50ex1b251892bc900a18@mail.gmail.com>

Hi

I have a GeoMedia warehouse and I want to export the layer data from the
warehouse to MapInfo file format. Can anyone guide me how to do this?

Thanks and Best Regards

Mir
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070215/311a85f8/attachment.html
From warmerdam at pobox.com  Thu Feb 15 15:01:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Java bindings and wkb support, a patch for gdal
In-Reply-To: <45D42B0B.20607@openplans.org>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0187AA4E@IMCSRV1.MITRE.ORG>
	<45D32DAE.7050201@openplans.org>
	<f3b73b7d0702141359k43eedf49o777d9869a5a53aa9@mail.gmail.com>
	<45D3A83D.9090406@pobox.com> <45D41057.4020504@openplans.org>
	<45D434F3.1030400@pobox.com> <45D42B0B.20607@openplans.org>
Message-ID: <45D4BC20.3030201@pobox.com>

Andrea Aime wrote:
> No no, the interface change is there only for Java, not for any other
> language, and it makes the java interface look just like the c++ one
> (the SWIG one tries to allocate memory inside the call, that's what
> breaks java, and btw, the difference between SWIG and c++
> is not documented anywhere afaik).
> Besides, I'm sure nobody ever used the exportToWkb method in java 
> bindings, since it tears down the jvm solid.

Andrea,

That sounds like no problem.

>>> Next step for me will be to try and add a method to retrive a full 
>>> Feature attribute set in a single call, to reduce the JNI overhead 
>>> (rumor says a JNI call is 10 times more expensive than a regular java
>>> method call). This will be a new method in the Swig java binding.
>>
>> How would you pack a feature so that the cost of packing and reparsing
>> aren't heavier than the cost of many JNI calls?
> 
> The idea is to have a method that builds String, Double, Date, ...
> objects and put them into an object array that I pass back to java.
> It's worth a try, in my experiments reading a shapefile thru J-OGR
> is still 2.5 times slower than doing it with the geotools shapefile
> reader. I'm pretty confident I can do better gathering one feature
> at a time.
> Of course, this method would be a java only extension, since other
> language do not pay such a heavy cost in calling the native side (and
> well, besides java and c# everyone else seems to use the same memory
> model as C).

I think a method that bundles up as much information about a feature
as can be reasonably collected and returns it as a single Java
collection/object/etc is a great idea.

> Ok. My idea is just to add methods to the java binding to make it 
> deliver, the plain binding is nice, but not very usable if you need
> performance too.

Agreed.  Judicious extensions on a per-language basis makes lots of
sense.  There are some of these in Python as well.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Feb 15 15:10:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Export from GeoMedia to MapInfo file format
In-Reply-To: <b41d86b30702150843h60c5d50ex1b251892bc900a18@mail.gmail.com>
References: <b41d86b30702150843h60c5d50ex1b251892bc900a18@mail.gmail.com>
Message-ID: <45D4BE33.4020001@pobox.com>

Mir Hassan Ali wrote:
> Hi
>  
> I have a GeoMedia warehouse and I want to export the layer data from the 
> warehouse to MapInfo file format. Can anyone guide me how to do this?
>  
> Thanks and Best Regards

Mir,

I'm not really sure what a geomedia warehouse is, but I'm doubtful that it
is supported by GDAL/OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Peter.Rushforth at statcan.ca  Thu Feb 15 15:57:29 2007
From: Peter.Rushforth at statcan.ca (Peter.Rushforth@statcan.ca)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] ogr2ogr on solaris 10:  too large a file?
Message-ID: <AB38021D12570A4AB907F442AE54880701076375@stcem04.statcan.ca>

Hi,

I have a approx. 3Gb GML file I'm trying to translate to shp and tab
format with ogr2ogr.  Is this too big for the 32-bit ogr2ogr
to handle?  Is enabling large files a matter of re-compilation
with certain switches enabled?  

Thanks for any advice.

Peter


newbilbo{rushpet}60: ls -l gml/grgf000r06g_e.gml
-rw-rw-rw-   1 rushpet  2836538623 Feb 14 18:57 gml/grgf000r06g_e.gml
newbilbo{rushpet}61: ogr2ogr -t_srs NAD83 -f "ESRI Shapefile" shp/grgf000r06a_e.shp gml/grgf000r06g_e.gml
FAILURE:
Unable to open datasource `gml/grgf000r06g_e.gml' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> Interlis 1
  -> Interlis 2
  -> PostgreSQL
  -> SDE



Peter Rushforth
Geography Division
Statistics Canada
Ottawa Ontario
K1A 0T6


From warmerdam at pobox.com  Thu Feb 15 18:28:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Motion: Committer Priveledges for Andrea Aime
Message-ID: <45D4ECA5.3070208@pobox.com>

Motion: To extend committer rights to Andrea Aime for GDAL subversion.

--

Andrea is a prolific contributor to GeoTools, and is using the GDAL Java
interface.  I believe it would be quite valuable for Andrea to be able to
fix and improve the Java interfaces directly.  Andrea has reviewed and
agreed to the GDAL Committer Guidelines (RFC3).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Feb 15 18:33:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Re: Motion: Commiter Access for Hannah Valbonesi
In-Reply-To: <45D0DD81.2080003@pobox.com>
References: <45D0DD81.2080003@pobox.com>
Message-ID: <45D4EDD6.1080302@pobox.com>

Frank Warmerdam wrote:
> Motion: That Hannah Valbonesi be granted GDAL/OGR commit access.

Folks,

This motion passes with +1's from myself, Daniel and Andrey.

Welcome aboard Hannah!

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu at iastate.edu  Thu Feb 15 16:07:32 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Motion: Committer Priveledges for Andrea Aime
In-Reply-To: <45D4ECA5.3070208@pobox.com>
References: <45D4ECA5.3070208@pobox.com>
Message-ID: <54146D08-84DD-4FA9-B21A-6E96AF7929E5@iastate.edu>

I eagerly vote +1 on having a Java maintainer.


On Feb 15, 2007, at 5:28 PM, Frank Warmerdam wrote:

> Motion: To extend committer rights to Andrea Aime for GDAL subversion.
>
> --
>
> Andrea is a prolific contributor to GeoTools, and is using the GDAL  
> Java
> interface.  I believe it would be quite valuable for Andrea to be  
> able to
> fix and improve the Java interfaces directly.  Andrea has reviewed and
> agreed to the GDAL Committer Guidelines (RFC3).
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From dmorissette at mapgears.com  Thu Feb 15 16:17:08 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Motion: Committer Priveledges for Andrea Aime
In-Reply-To: <45D4ECA5.3070208@pobox.com>
References: <45D4ECA5.3070208@pobox.com>
Message-ID: <45D4CDD4.3050400@mapgears.com>

+1

Daniel

Frank Warmerdam wrote:
> Motion: To extend committer rights to Andrea Aime for GDAL subversion.
> 
> -- 
> 
> Andrea is a prolific contributor to GeoTools, and is using the GDAL Java
> interface.  I believe it would be quite valuable for Andrea to be able to
> fix and improve the Java interfaces directly.  Andrea has reviewed and
> agreed to the GDAL Committer Guidelines (RFC3).
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From ILucena at clarku.edu  Thu Feb 15 16:26:42 2007
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Motion: Committer Priveledges for Andrea Aime
In-Reply-To: <45D4ECA5.3070208@pobox.com>
References: <45D4ECA5.3070208@pobox.com>
Message-ID: <6FD7C9DB26540B42A1207C69BF92D455028CECD8@Iris.ad.clarku.edu>

I knew Andrea from old times (97/98) when we collaborate with each other
by e-mail in our dissertations and I strongly recommend him to the
voters.

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Thursday, February 15, 2007 6:29 PM
To: gdal-dev
Subject: [Gdal-dev] Motion: Committer Priveledges for Andrea Aime

Motion: To extend committer rights to Andrea Aime for GDAL subversion.

--

Andrea is a prolific contributor to GeoTools, and is using the GDAL Java
interface.  I believe it would be quite valuable for Andrea to be able
to
fix and improve the Java interfaces directly.  Andrea has reviewed and
agreed to the GDAL Committer Guidelines (RFC3).

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Thu Feb 15 20:17:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] ogr2ogr on solaris 10:  too large a file?
In-Reply-To: <AB38021D12570A4AB907F442AE54880701076375@stcem04.statcan.ca>
References: <AB38021D12570A4AB907F442AE54880701076375@stcem04.statcan.ca>
Message-ID: <45D50640.6000001@pobox.com>

Peter.Rushforth@statcan.ca wrote:
> Hi,
> 
> I have a approx. 3Gb GML file I'm trying to translate to shp and tab
> format with ogr2ogr.  Is this too big for the 32-bit ogr2ogr
> to handle?  Is enabling large files a matter of re-compilation
> with certain switches enabled?  

Peter,

It does seem likely that the 32bit (<2GB) file API is being used and
is responsible for this problem.  However, the GML reader uses Xerces
so the issue (I think) would be what API Xerces uses since we just pass
it the filename from OGR.

I haven't tried such a large file, and I don't know what would be involved
in getting it working.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dsampson at NRCan.gc.ca  Fri Feb 16 07:35:53 2007
From: dsampson at NRCan.gc.ca (Sampson, David)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] OGR and Python. Accessing spatial data from non-spatial
	tables
Message-ID: <2FAA57395C1F914DB27CAA4C376058F201FC6D79@S0-OTT-X2.nrn.nrcan.gc.ca>

Hey Folks,

I'm looking for help using OGR and python. I am pretty novice with
python at this stage so I think I am loosing sight of what objects need
to be made. Some guidance would be great.

I am trying to create polygons (rectangles) from an ODBC connection to a
non-spatial table.

In all I need to access 8 collumns (x and y for four points)

Each polygon is defined by a single row

Groups of rows exist based on a SEGMENT collumn. Each group could have
upwards of 100 polygons.

This is some of the code I have been working on

def odbc_Footprint():
	DSN="*****"
	UID="*****"
	PW="*****"
	TBL="*****"	
	update_status = "0"
	SQL_Collumn = "ID"
	SQL_Collumn_value = "'257775'" 
	NW_X=ogr.Open("ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL
+"(X_NO)", update = int(update_status))
	NW_Y=ogr.Open("ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL
+"(Y_NO)", update = int(update_status))
	NE_X=ogr.Open("ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL
+"(X_NE)", update = int(update_status))
	NE_Y=ogr.Open("ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL
+"(Y_NE)", update = int(update_status))
	SW_X=ogr.Open("ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL
+"(X_SO)", update = int(update_status))
	SW_Y=ogr.Open("ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL
+"(Y_SO)", update = int(update_status))
	SE_X=ogr.Open("ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL
+"(X_SE)", update = int(update_status))
	SE_Y=ogr.Open("ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL
+"(Y_SE)", update = int(update_status))
	

	# SQL Calls
	SQL_NW_X = NW_X.ExecuteSQL("Select * from " + TBL + " where " +
SQL_Collumn + " = " + SQL_Collumn_value )
	SQL_NW_Y = NW_Y.ExecuteSQL("Select * from " + TBL + " where " +
SQL_Collumn + " = " + SQL_Collumn_value )
	SQL_NE_X = NE_X.ExecuteSQL("Select * from " + TBL + " where " +
SQL_Collumn + " = " + SQL_Collumn_value )
	SQL_NE_Y = NE_Y.ExecuteSQL("Select * from " + TBL + " where " +
SQL_Collumn + " = " + SQL_Collumn_value )
	SQL_SW_X = SW_X.ExecuteSQL("Select * from " + TBL + " where " +
SQL_Collumn + " = " + SQL_Collumn_value )	
	SQL_SW_Y = SW_Y.ExecuteSQL("Select * from " + TBL + " where " +
SQL_Collumn + " = " + SQL_Collumn_value )
	SQL_SE_X = SE_X.ExecuteSQL("Select * from " + TBL + " where " +
SQL_Collumn + " = " + SQL_Collumn_value )
	SQL_SE_Y = SE_Y.ExecuteSQL("Select * from " + TBL + " where " +
SQL_Collumn + " = " + SQL_Collumn_value )

	NW = (SQL_NW_X, SQL_NW_Y)
	NE = (SQL_NE_X, SQL_NE_Y)
	SW = (SQL_SW_X, SQL_SW_Y)
	SE = (SQL_SE_X, SQL_SE_Y)

Python help for OGR is a little sparse and I don't have a C background.

These are some sources I have tried to use to get this far.
Python with postgres:
http://postgis.refractions.net/support/wiki/index.php?OGR%20Examples
OGR ODBC: http://www.gdal.org/ogr/drv_odbc.html
OpenEV Dev Course:
http://openev.sourceforge.net/app/developer_info/DEVCOURSE.html
Gdal python tutorial: http://www.gdal.org/gdal_tutorial.html


Thanks for any help.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070216/c2ee649a/attachment.html
From hobu at iastate.edu  Fri Feb 16 09:50:40 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Google Summer of Code 
Message-ID: <800408BE-2A13-435B-8197-701F0EE5EF29@iastate.edu>

All,

Just spamming again to remind folks about the Google Summer of Code.   
<http://google-code-updates.blogspot.com/2007/02/speaking-of- 
summer.html>  So far, only one student has expressed interest in  
participating.  I'm hoping that the government and academic types  
that use GDAL/OGR can beat the bushes to drum up a few more students  
interested.

Howard

> All,
>
> The Google Summer of Code has been a wildly successful program by  
> Google for fostering Open Source projects over the past two years.   
> I think it should be a goal of GDAL to participate this year, and I  
> am throwing my hat in the ring to act as a mentor for any students  
> who would wish to participate by submitting development projects to  
> SOC.
>
> You can find the FAQ about the SOC here: <http://code.google.com/ 
> support/bin/topic.py?topic=10442>.  Initially, we are looking for  
> students who are willing to work on GDAL/OGR through the summer.   
> Once we find some candidates, we will brainstorm on some ideas that  
> could be done over the three month timeframe of SOC.  After we hone  
> down our list, we will submit our projects and cross our fingers :)
>
> If you know of any students who might be interested, or are one  
> yourself, please contact me directly.
>
> Thanks,
>
> Howard

From warmerdam at pobox.com  Fri Feb 16 19:07:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] OGR and Python. Accessing spatial data from non-spatial
	tables
In-Reply-To: <2FAA57395C1F914DB27CAA4C376058F201FC6D79@S0-OTT-X2.nrn.nrcan.gc.ca>
References: <2FAA57395C1F914DB27CAA4C376058F201FC6D79@S0-OTT-X2.nrn.nrcan.gc.ca>
Message-ID: <45D64742.7080005@pobox.com>

Sampson, David wrote:
> Hey Folks,
> 
> I'm looking for help using OGR and python. I am pretty novice with 
> python at this stage so I think I am loosing sight of what objects need 
> to be made. Some guidance would be great.
> 
> I am trying to create polygons (rectangles) from an ODBC connection to a 
> non-spatial table.
> 
> In all I need to access 8 collumns (x and y for four points)
> 
> Each polygon is defined by a single row
> 
> Groups of rows exist based on a SEGMENT collumn. Each group could have 
> upwards of 100 polygons.
> 
> This is some of the code I have been working on

Dave,

This script will read a table from an OGR datasource and fetch the
fields you name.  In your case instead of test.csv you will want
something like:

   "ODBC:" + UID + "/" + PW + "@" + DSN + "," + TBL

But you don't need to open each column seperately.

"""
import ogr


ds = ogr.Open('test.csv')

lyr = ds.GetLayerByName('test')

feat = lyr.GetNextFeature()

while feat is not None:

     nw = (float(feat.X_NO),float(feat.Y_NO))
     ne = (float(feat.X_NE),float(feat.Y_NE))
     sw = (float(feat.X_SO),float(feat.Y_SO))
     se = (float(feat.X_SE),float(feat.Y_SE))

     print nw, ne, sw, se

     feat = lyr.GetNextFeature()
"""

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From stuarteve at lparchaeology.com  Sat Feb 17 08:15:12 2007
From: stuarteve at lparchaeology.com (Stuart Eve)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Personal Geodatabase - Unknown Geometry
Message-ID: <45D6FFE0.5020005@lparchaeology.com>

Dear all

I have been attempting to get the PGeo driver up and running on a
Suse10.1 box using gdal-1.4.0, mdbtools-6pre1 and unixODBC 2.2.12.

After some helpful conversations with Mateusz I managed to get the
odbc.ini set up right etc. However, now when I run an ogrinfo on the
geodatabase it never seems to find the geometry type - and therefore
when I try to show the features using mapserver all I get is an empty
map. I have tried it on 3 different geodatabases (8.2 and 9.x) with the
same result.

Has anyone got any ideas?

Thanks

Stuart

my ogrinfo output from (ogrinfo pgeo:DNSNAME Objects) is below:

Layer name: Objects
Geometry: Unknown (any)
Error at Line : syntax error near (
ERROR 1: GetFeatureCount() failed on query SELECT COUNT(*) FROM Objects.

Feature Count: -1
Extent: (500680.200000, 99106.570000) - (500684.500000, 99135.000000)
Layer SRS WKT:
(unknown)
OBJECTID: Integer (0.0)
FeatureNum: Integer (0.0)
LocalArea: String (0.0)
Drawing: String (0.0)
ObjFieldID: String (0.0)
ObjectType: String (0.0)
Elevation: Real (0.0)
Notes: String (0.0)
EntryPerson: String (0.0)
ObjSuffix: Integer (0.0)
ObjNumber: Integer (0.0)
OGRFeature(Objects):0
  OBJECTID (Integer) = 1
  FeatureNum (Integer) = 1718
  LocalArea (String) = GIII.4
  Drawing (String) = 1999-6
  ObjFieldID (String) = 2
  ObjectType (String) = Alabaster tool
  Elevation (Real) = 15.97
  Notes (String) = (null)
  EntryPerson (String) = RLM
  ObjSuffix (Integer) = (null)
  ObjNumber (Integer) = (null)

... carries on listing the feature attributes.


From mitchelljj98 at gmail.com  Sat Feb 17 12:12:22 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] can tiles that are all black can be identified and
	deleted or ignored?
Message-ID: <fa2ac0580702170912jf33f0a3i173dcaae8cba5e07@mail.gmail.com>

Hi,

I want to be able to run gdalwarp against a collection of tiles to create a
large mosaic, which is then by differing resolutions split up by running
gdal_translate.  Some of these outputted tiles may contain an image that is
all black (rgb 0,0,0), because of the original gdalwarp mosaicing process.
My question is whether the tiles that are all black can be identified and
deleted or ignored in advance before running gdaltindex to create a shape
files of tiles of varying resolutions?

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070217/15a71bcf/attachment.html
From woklist at kyngchaos.com  Sat Feb 17 17:15:02 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] python ng - existing scripts
Message-ID: <6ECD50AA-0FF6-42CC-8166-BA801F03FEF6@kyngchaos.com>

So, with the slightly different structure of python wrappers in the  
NG/SWIG build, does this cause problems for existing python scripts?   
especially the scripts included in the pymod folder of the source.

If those scripts are OK, shouldn't they be moved out of pymod and  
have their own install target?

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe



From hobu at iastate.edu  Sat Feb 17 19:24:55 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] python ng - existing scripts
In-Reply-To: <6ECD50AA-0FF6-42CC-8166-BA801F03FEF6@kyngchaos.com>
References: <6ECD50AA-0FF6-42CC-8166-BA801F03FEF6@kyngchaos.com>
Message-ID: <A336D9B9-089F-47B2-A46C-8823935BA1CF@iastate.edu>

William,

We have bent over backwards to attempt to preserve backward  
compatibility between the older and ng python bindings, but there are  
indeed some differences.  A glaring one that impacts the usage of  
some of the scripts in /pymod is that some of those depend on  
Numeric, while the ng bindings only have numpy support.  Most of the  
method signatures and classes should behave similarly to the older  
bindings.  There are still a few things that are missing from the ng  
bindings that will need to be added (mostly GDAL related...OGR is  
pretty much complete).  I (and no one that I know of) have not  
actually gone through pymod and done any analysis to see what/where/ 
how things will need to be updated.

It is my hope that we can have the ng bindings be the default Python  
bindings for GDAL 1.5, but this goal clearly will require some more  
effort.  I agree that the utility scripts in /pymod would fit nicely  
in a /scripts or /bin target of setup.py.  I would also like to  
someday (optionally) support setuptools.  I desperately feel we need  
the GDAL python stuff in some sort of namespace as well.  Monkeying  
with our current layout in that regard is likely to cause lots of  
churn and annoyance and violates Frank's GDAL rule #1.

Another heavy user of the older bindings is OpenEV.  IIRC, OpenEV  
depends on some of the blacker magic in the older _gdalmodule, and  
significant effort would be required to bring that forward.  Frank  
can comment more, but I think that this usage was one of the major  
limiting factors in not making the ng bindings the default thus far.

In summary, going forward, the ng bindings are going to be the ones  
seeing continual development and support (especially with other  
languages like C# and Java driving a lot of the development because  
the ng bindings opened GDAL up to those languages).  I will let Frank  
comment more on what he thinks of the situation, but I seem to  
remember him stating that going forward with the ng bindings as the  
default Python bindings in 1.5 was something that he was interested in.

Howard

On Feb 17, 2007, at 4:15 PM, William Kyngesburye wrote:

> So, with the slightly different structure of python wrappers in the  
> NG/SWIG build, does this cause problems for existing python  
> scripts?  especially the scripts included in the pymod folder of  
> the source.
>
> If those scripts are OK, shouldn't they be moved out of pymod and  
> have their own install target?
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
>
> "This is a question about the past, is it? ... How can I tell that  
> the past isn't a fiction designed to account for the discrepancy  
> between my immediate physical sensations and my state of mind?"
>
> - The Ruler of the Universe
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From woklist at kyngchaos.com  Sun Feb 18 01:06:52 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] python ng - existing scripts
In-Reply-To: <A336D9B9-089F-47B2-A46C-8823935BA1CF@iastate.edu>
References: <6ECD50AA-0FF6-42CC-8166-BA801F03FEF6@kyngchaos.com>
	<A336D9B9-089F-47B2-A46C-8823935BA1CF@iastate.edu>
Message-ID: <C831ED60-BD27-47B5-B412-FA176F350998@kyngchaos.com>

Ah, I thought the NG bindings were a little farther along, I guess.   
I was hoping to switch to the new bindings for my binary framework  
package, but I can wait for 1.5.  Don't want to cause problems for  
others that use my binary packages ^_^

At least I got it built with Python 2.5 (with the patched wrappers)  
and the autotests work with only a couple exceptions.

On Feb 17, 2007, at 6:24 PM, Howard Butler wrote:

> William,
>
> We have bent over backwards to attempt to preserve backward  
> compatibility between the older and ng python bindings, but there  
> are indeed some differences.  A glaring one that impacts the usage  
> of some of the scripts in /pymod is that some of those depend on  
> Numeric, while the ng bindings only have numpy support.  Most of  
> the method signatures and classes should behave similarly to the  
> older bindings.  There are still a few things that are missing from  
> the ng bindings that will need to be added (mostly GDAL  
> related...OGR is pretty much complete).  I (and no one that I know  
> of) have not actually gone through pymod and done any analysis to  
> see what/where/how things will need to be updated.
>
> It is my hope that we can have the ng bindings be the default  
> Python bindings for GDAL 1.5, but this goal clearly will require  
> some more effort.  I agree that the utility scripts in /pymod would  
> fit nicely in a /scripts or /bin target of setup.py.  I would also  
> like to someday (optionally) support setuptools.  I desperately  
> feel we need the GDAL python stuff in some sort of namespace as  
> well.  Monkeying with our current layout in that regard is likely  
> to cause lots of churn and annoyance and violates Frank's GDAL rule  
> #1.
>
> Another heavy user of the older bindings is OpenEV.  IIRC, OpenEV  
> depends on some of the blacker magic in the older _gdalmodule, and  
> significant effort would be required to bring that forward.  Frank  
> can comment more, but I think that this usage was one of the major  
> limiting factors in not making the ng bindings the default thus far.
>
> In summary, going forward, the ng bindings are going to be the ones  
> seeing continual development and support (especially with other  
> languages like C# and Java driving a lot of the development because  
> the ng bindings opened GDAL up to those languages).  I will let  
> Frank comment more on what he thinks of the situation, but I seem  
> to remember him stating that going forward with the ng bindings as  
> the default Python bindings in 1.5 was something that he was  
> interested in.
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no  
particular pleasure I shall kill every ___ I can until the war is  
over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people  
of the allied nations devoted an entire year exclusively to hating  
the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war


From aaime at openplans.org  Sun Feb 18 11:16:44 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Struggling with OGR writing model
Message-ID: <45D87BEC.6070208@openplans.org>

Hi all,
as some of you may know, I'm trying to make a Geotools DataStore 
wrapping the OGR library.
I'm having troubles mapping gt2 ways of doing things with OGR ones.
In Geotools, writing model is basically a streaming update/delete that 
turns to append once you get to the end of the original file, that is:
1 open a writer against a layer
2 ask for next feature
3 update and write the returned feature, or delete it
4 (goto 2)
When stepping to the next feature returns "false" (that is, end of 
original file) the writer turns in append mode, that is, allows to add 
new features to the layer.

Now, depending on the actual storage, this is implemented by:
a) using native update/delete capabilities (think dbms or shapefiles),
b) by writing a new separate layer, and when the writer ends its work, 
by removing the original and renaming the new temporary one to the old 
layer name.

Looking at the OGR api, it seems I can use technique a) when the layer 
supports random updates and deletes.
Yet, I don't see a general way to use b). Afaics, I can  create a new 
temporary layer with a different name, write on it, but when writing 
finishes, how can I rename the temporary layer to the old name?
The only way seems to wipe out the old layer, recreate it empty,
and copy back records from the temporary one: a quite inefficient
solution for just a rename :-)

Did I overlook a simpler way?
Cheers
Andrea

From warmerdam at pobox.com  Sun Feb 18 21:15:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] Struggling with OGR writing model
In-Reply-To: <45D87BEC.6070208@openplans.org>
References: <45D87BEC.6070208@openplans.org>
Message-ID: <45D90844.4070304@pobox.com>

Andrea Aime wrote:
> Hi all,
> as some of you may know, I'm trying to make a Geotools DataStore 
> wrapping the OGR library.
> I'm having troubles mapping gt2 ways of doing things with OGR ones.
> In Geotools, writing model is basically a streaming update/delete that 
> turns to append once you get to the end of the original file, that is:
> 1 open a writer against a layer
> 2 ask for next feature
> 3 update and write the returned feature, or delete it
> 4 (goto 2)
> When stepping to the next feature returns "false" (that is, end of 
> original file) the writer turns in append mode, that is, allows to add 
> new features to the layer.
> 
> Now, depending on the actual storage, this is implemented by:
> a) using native update/delete capabilities (think dbms or shapefiles),
> b) by writing a new separate layer, and when the writer ends its work, 
> by removing the original and renaming the new temporary one to the old 
> layer name.
> 
> Looking at the OGR api, it seems I can use technique a) when the layer 
> supports random updates and deletes.
> Yet, I don't see a general way to use b). Afaics, I can  create a new 
> temporary layer with a different name, write on it, but when writing 
> finishes, how can I rename the temporary layer to the old name?
> The only way seems to wipe out the old layer, recreate it empty,
> and copy back records from the temporary one: a quite inefficient
> solution for just a rename :-)
> 
> Did I overlook a simpler way?

Andrea,

There is no rename capability.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From SriRam.PrasadBhasker at rmsi.com  Sun Feb 18 21:47:33 2007
From: SriRam.PrasadBhasker at rmsi.com (SriRam Prasad Bhasker)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] mosaic option with gdal executables
Message-ID: <OF71505D36.00926BB7-ON65257287.000F3F92-65257287.000F41C2@rmsi.com>

hi.

are there any functionalities by which we can mosaic 2 or multiple 
geotiffs

i need just gdal syntax please...

cheers
s.p.bhasker

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070219/2c1e9f76/attachment.html
From marchesini at unipg.it  Mon Feb 19 04:49:13 2007
From: marchesini at unipg.it (ivan marchesini)
Date: Wed Nov 21 11:50:39 2007
Subject: [Gdal-dev] tif+tfw to geotif
Message-ID: <1171878553.4874.4.camel@ivangeo>

Dear Users,
I'm trying to use gdal translate to convert a tif+tfw file in a geotif
georeferenced

I have tried using this syntax:

gdal_translate -a_srs "EPSG:3004 +towgs84=........." filename.tif
newfilename.tif

The tif that I obtain has a correct reference system (I have checked it
with gdalinfo) but the coordinates are still 0,0 fro the upper left
corner and so on for the others .....

where I'm wrong???

thank you very much

Ivan




-- 
Ti prego di cercare di non inviarmi files .doc, .xls, .ppt, .dwg.
Preferisco formati liberi.
Please try to avoid to send me  .doc, .xls, .ppt, .dwg files.
I prefer free formats.
http://it.wikipedia.org/wiki/Formato_aperto
http://en.wikipedia.org/wiki/Open_format

Ivan Marchesini
Department of Civil and Environmental Engineering
University of Perugia
Via G. Duranti 93/a 
06125
Perugia (Italy)
e-mail: marchesini@unipg.it
        ivan.marchesini@gmail.com
tel: +39(0)755853760
fax: +39(0)755853756
jabber: geoivan73@jabber.org


From quickstuff at altern.org  Mon Feb 19 06:23:15 2007
From: quickstuff at altern.org (Quentin S.)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: tif+tfw to geotif
In-Reply-To: <1171878553.4874.4.camel@ivangeo>
References: <1171878553.4874.4.camel@ivangeo>
Message-ID: <erc1b7$8ft$1@sea.gmane.org>

Ivan,

I guess there is something wrong with the tfw file - it should be found 
and used automatically.
I would double-check that 1/ it has the exact same filename as the tiff 
it relates to and 2/ its contents has properly formatted numbers (e.g. 
with '.' and not ',').
(By the way, I was not aware that customized SRS could be entered that 
way... does it really work?)

Greetings,

ivan marchesini wrote:
> Dear Users,
> I'm trying to use gdal translate to convert a tif+tfw file in a geotif
> georeferenced
> 
> I have tried using this syntax:
> 
> gdal_translate -a_srs "EPSG:3004 +towgs84=........." filename.tif
> newfilename.tif
> 
> The tif that I obtain has a correct reference system (I have checked it
> with gdalinfo) but the coordinates are still 0,0 fro the upper left
> corner and so on for the others .....
> 
> where I'm wrong???
> 
> thank you very much
> 
> Ivan
> 
> 
> 
> 


From warmerdam at pobox.com  Mon Feb 19 10:26:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: tif+tfw to geotif
In-Reply-To: <erc1b7$8ft$1@sea.gmane.org>
References: <1171878553.4874.4.camel@ivangeo> <erc1b7$8ft$1@sea.gmane.org>
Message-ID: <45D9C1A1.5050609@pobox.com>

Quentin S. wrote:
> Ivan,
> 
> I guess there is something wrong with the tfw file - it should be found 
> and used automatically.
> I would double-check that 1/ it has the exact same filename as the tiff 
> it relates to and 2/ its contents has properly formatted numbers (e.g. 
> with '.' and not ',').
> (By the way, I was not aware that customized SRS could be entered that 
> way... does it really work?)

Quentin,

Your analysis is correct.  The .tfw should work unless there is something
odd going on (or if the tiff is actually a broken geotiff with geotiff
info overriding the .tfw).  Also you can't mix an EPSG code and PROJ.4
syntax in a single definition.  Presumably the extra stuff after EPSG:3004
will just be ignored.

Best regards,

> ivan marchesini wrote:
>> Dear Users,
>> I'm trying to use gdal translate to convert a tif+tfw file in a geotif
>> georeferenced
>>
>> I have tried using this syntax:
>>
>> gdal_translate -a_srs "EPSG:3004 +towgs84=........." filename.tif
>> newfilename.tif
>>
>> The tif that I obtain has a correct reference system (I have checked it
>> with gdalinfo) but the coordinates are still 0,0 fro the upper left
>> corner and so on for the others .....
>>
>> where I'm wrong???
>>
>> thank you very much
>>
>> Ivan
>>
>>
>>
>>
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Feb 19 11:16:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] mosaic option with gdal executables
In-Reply-To: <OF71505D36.00926BB7-ON65257287.000F3F92-65257287.000F41C2@rmsi.com>
References: <OF71505D36.00926BB7-ON65257287.000F3F92-65257287.000F41C2@rmsi.com>
Message-ID: <45D9CD59.30701@pobox.com>

SriRam Prasad Bhasker wrote:
> 
> hi.
> 
> are there any functionalities by which we can mosaic 2 or multiple geotiffs
> 
> i need just gdal syntax please...

s.p.bhasker,

You can use the gdalwarp or gdal_merge utilities to do mosaicing.  With
gdalwarp the command would look like:

   gdalwarp in1.tif in2.tif mosaic.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From guillaume.huby.lists at gmail.com  Mon Feb 19 12:46:42 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Warping MODIS
Message-ID: <ddc797c30702190946r121d927ahbac45b14a163abcc@mail.gmail.com>

Frank Warmerdam wrote:

Jose Luis Gomez Dans wrote:
>
> Hi!
>
> I have read a couple of postings regarding MODIS subsetting and warping. I
>
> have been using HEGTools up to now, but I find that having just GDAL in my
>
> processing chain makes life easier. So far, i understand that I need to
> warp
> a subdataset off the HDFEOS file to change the ellps parameter so that the
>
> subdataset is available in Lat/Long WGS84. This seems to work, and I can
> the
> reproject into UTMXX/DatumXYZ again. This requires a gdalwarp, a
> gdal_translate and a further gdalwarp. is there a more direct route?
>
>
> Jose,
>
> You would need to be more specific about what exact steps you are doing.
> Off hand I would think you could do things in a single gdalwarp from
> a subdataset to an output file in UTM using the -s_srs switch to override
> the interpretation of the input coordinate system if required.
>


Frank,

I am experiencing the same troubles (using FWTools 1.2.0).


My MODIS image is (downloaded from the EOS data gateway):
################## Code
>gdalinfo HDF4_EOS:EOS_GRID:"SomeData.hdf":Product:Band
Driver: HDF4Image/HDF4 Dataset
Size is 2400, 2400
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["Unknown datum based upon the custom spheroid",
        DATUM["Not specified (based on custom spheroid)",
            SPHEROID["Custom spheroid",6371007.181,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Sinusoidal"],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (0.000000000000000,5559752.598333000200000)
Pixel Size = (463.312716527916680,-463.312716527500130)
Metadata:
...
################## End code
(btw it is supposed to be a HDF5 and not a HDF4, but this doesn't seem to be
the problem)

I tried (EPSG:27572 is NTF (Paris) / Lambert zone II):
################## Code
gdalwarp -t_srs EPSG:27572 HDF4_EOS:EOS_GRID:"SomeData.hdf":Product:Band
SomeData_out.tif
gdalwarp -s_srs "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 +b=
6371007.181 +units=m  no_defs <>" -t_srs EPSG:27572 HDF4_EOS:EOS_GRID:"
SomeData.hdf":Product:Band SomeData_out.tif
################## End code

These commands gave me a shift in the Y axis (around 21 km).

Using the trick of Markus (
http://mpa.itc.it/markus/useful/modis_hdf2erdas_ll_wgs84.sh) is a solution,
but in 3 commands like Jose described.

Do you know a shorter way to achieve this ?

Thank you in advance for your reply.

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070219/a51d68f8/attachment.html
From Christian.Martel at drdc-rddc.gc.ca  Mon Feb 19 16:00:13 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] bbox of vmap
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D103829@valcartierex01.valcartier.drdc-rddc.gc.ca>

Hi,

What is the easiest method to extract the bounding box of a vmap CD
(with python script with fwtool on windows) ? 
With raster data and GDAL I use GetGeoTransform but there is nothing
similar in OGR.
Any hint would be appreciate.

Thanks,

Christian


From warmerdam at pobox.com  Mon Feb 19 16:24:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Warping MODIS
In-Reply-To: <ddc797c30702190946r121d927ahbac45b14a163abcc@mail.gmail.com>
References: <ddc797c30702190946r121d927ahbac45b14a163abcc@mail.gmail.com>
Message-ID: <45DA15A8.9010104@pobox.com>

guillaume huby wrote:
> I tried (EPSG:27572 is NTF (Paris) / Lambert zone II):
> ################## Code
> gdalwarp -t_srs EPSG:27572 HDF4_EOS:EOS_GRID:"SomeData.hdf":Product:Band 
> SomeData_out.tif
> gdalwarp -s_srs "+proj=sinu +lon_0=0 +x_0=0 +y_0=0 +a=6371007.181 
> +b=6371007.181 +units=m  no_defs <>" -t_srs EPSG:27572 
> HDF4_EOS:EOS_GRID:" SomeData.hdf":Product:Band SomeData_out.tif
> ################## End code
> 
> These commands gave me a shift in the Y axis (around 21 km).
> 
> Using the trick of Markus ( 
> http://mpa.itc.it/markus/useful/modis_hdf2erdas_ll_wgs84.sh) is a 
> solution, but in 3 commands like Jose described.
> 
> Do you know a shorter way to achieve this ?
> 
> Thank you in advance for your reply.

Guillaume,

I have no better suggestions at this time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Feb 19 16:27:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] python ng - existing scripts
In-Reply-To: <6ECD50AA-0FF6-42CC-8166-BA801F03FEF6@kyngchaos.com>
References: <6ECD50AA-0FF6-42CC-8166-BA801F03FEF6@kyngchaos.com>
Message-ID: <45DA1655.6010903@pobox.com>

William Kyngesburye wrote:
> So, with the slightly different structure of python wrappers in the 
> NG/SWIG build, does this cause problems for existing python scripts?  
> especially the scripts included in the pymod folder of the source.
> 
> If those scripts are OK, shouldn't they be moved out of pymod and have 
> their own install target?

William,

There are still a few quirks with the existing scripts in pymod (for instance
the use of progress monitors).  But generally they work well with the NG
bindings and yes, they ought to be moved out of the pymod directory and given
their own install target of some sort.

Hopefully we can address this in the GDAL 1.5.0 release when the NG bindings
are expected to become the default python bindings.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Feb 19 16:45:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] bbox of vmap
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D103829@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D103829@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <45DA1A94.2090603@pobox.com>

Martel, Christian wrote:
> Hi,
> 
> What is the easiest method to extract the bounding box of a vmap CD
> (with python script with fwtool on windows) ? 
> With raster data and GDAL I use GetGeoTransform but there is nothing
> similar in OGR.
> Any hint would be appreciate.

Christian,

You can call the ogr.Layer.GetExtent() method to fetch the extents of a
layer from python.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Feb 20 00:37:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Motion: Committer Priveledges for Andrea Aime
In-Reply-To: <45D4ECA5.3070208@pobox.com>
References: <45D4ECA5.3070208@pobox.com>
Message-ID: <45DA892B.6090004@pobox.com>

Frank Warmerdam wrote:
> Motion: To extend committer rights to Andrea Aime for GDAL subversion.

Folks,

This motion is passed with +1 support from Daniel, Howard and myself.

Welcome to the team Andrea!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From SriRam.PrasadBhasker at rmsi.com  Tue Feb 20 00:23:43 2007
From: SriRam.PrasadBhasker at rmsi.com (SriRam Prasad Bhasker)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdal_translate with polygon clip option
Message-ID: <OF71505D36.00926BB7-ON65257287.000F3F92-65257288.001D7D0D@rmsi.com>

Hi.

Using Gdal_translate we can clip an Image with the below options (in a 
rectangle)
        [-srcwin xoff yoff xsize ysize] [-projwin ulx uly lrx lry]

Is there any option by which we can clip an Image Irregularly .. Thru a 
Set of Points that form a closed Polygon ????
Images will be rectangular anyway.. If we can fill the Outer regions of 
Polygon with Nodata value.. this will be of great help.


cheers
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070220/65c8fc78/attachment.html
From aaime at openplans.org  Tue Feb 20 03:03:29 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Motion: Committer Priveledges for Andrea Aime
In-Reply-To: <45DA892B.6090004@pobox.com>
References: <45D4ECA5.3070208@pobox.com> <45DA892B.6090004@pobox.com>
Message-ID: <45DAAB51.9000806@openplans.org>

Frank Warmerdam ha scritto:
> Frank Warmerdam wrote:
>> Motion: To extend committer rights to Andrea Aime for GDAL subversion.
> 
> Folks,
> 
> This motion is passed with +1 support from Daniel, Howard and myself.
> 
> Welcome to the team Andrea!

Thanks everybody :-)
Cheers
Andrea

From asger at jo-informatik.dk  Tue Feb 20 06:34:46 2007
From: asger at jo-informatik.dk (Asger Petersen)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] mosaic option with gdal executables
In-Reply-To: <200702191703.l1JH3EnH018700@duke.maptools.org>
References: <200702191703.l1JH3EnH018700@duke.maptools.org>
Message-ID: <6A0257B028DA47499B5A843683051A3617B52E@server01.jo-informatik.local>

> You can use the gdalwarp or gdal_merge utilities to do mosaicing.
With
> gdalwarp the command would look like:
> 
>    gdalwarp in1.tif in2.tif mosaic.tif

Hi Frank,

I think this is a really cool feature that ought to be better
documented. The documentation at http://www.gdal.org/gdalwarp.html has
always given me an impression that gdalwarp takes only one srcfile.

Cheers
Asger Petersen



From quickstuff at altern.org  Tue Feb 20 10:05:26 2007
From: quickstuff at altern.org (Quentin S.)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: gdal_translate with polygon clip option
In-Reply-To: <OF71505D36.00926BB7-ON65257287.000F3F92-65257288.001D7D0D@rmsi.com>
References: <OF71505D36.00926BB7-ON65257287.000F3F92-65257288.001D7D0D@rmsi.com>
Message-ID: <erf2nq$as4$1@sea.gmane.org>

Hi,

you can achieve this with the various utilities from GDAL and OGR.
It would involve many steps though - let's summarize them briefly:

1/ Create your polygon in some vector format. You can even create it by 
hand in GML or some other simple text format.
2/ With gdal_translate, create an exact duplicate of the raster to crop 
*but* scaling down its values to a unique "opaque" value (e.g. to zero 
with parameters such as "-scale 0 255 0 0.01")
3/ 'Burn' the vector polygon in your newly-created black raster with 
gdal_rasterize, setting the burnt value for this polygon to 255 for 
instance. With this step, you now have some kind of a raster mask to 
apply on top of your original image.
4/ Combine the mask with the original raster using gdalwarp, defining 
what value of your mask you want to be transparent (=nodata). To stick 
with my example: "gdalwarp mask.tif -srcnodata "255" originalraster.tif".

Sure, there must be simpler ways involving some python scripting etc. 
Moreover you could save some time and disk space by first identifying 
the bounding box for your polygon (with ogrinfo), then processing only 
this limited part of the rasters thanks to the -projwin argument.

Hope this helps,

Quentin S.


SriRam Prasad Bhasker wrote:
> 
> Hi.
> 
> Using Gdal_translate we can clip an Image with the below options (in a 
> rectangle)
>         [-srcwin xoff yoff xsize ysize] [-projwin ulx uly lrx lry]
> 
> Is there any option by which we can clip an Image Irregularly .. Thru a 
> Set of Points that form a closed Polygon ????
> Images will be rectangular anyway.. If we can fill the Outer regions of 
> Polygon with Nodata value.. this will be of great help.
> 
> 
> cheers
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Feb 20 11:18:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] mosaic option with gdal executables
In-Reply-To: <6A0257B028DA47499B5A843683051A3617B52E@server01.jo-informatik.local>
References: <200702191703.l1JH3EnH018700@duke.maptools.org>
	<6A0257B028DA47499B5A843683051A3617B52E@server01.jo-informatik.local>
Message-ID: <45DB1F44.5020201@pobox.com>

Asger Petersen wrote:
>> You can use the gdalwarp or gdal_merge utilities to do mosaicing.
> With
>> gdalwarp the command would look like:
>>
>>    gdalwarp in1.tif in2.tif mosaic.tif
> 
> Hi Frank,
> 
> I think this is a really cool feature that ought to be better
> documented. The documentation at http://www.gdal.org/gdalwarp.html has
> always given me an impression that gdalwarp takes only one srcfile.

Asger,

Good point, I have revised the documentation somewhat to make this clearer.
In fact, till the summer or so it did only support one input file at a time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.gregory at oregonstate.edu  Tue Feb 20 14:07:08 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] custom reclass/remap using gdal_translate
Message-ID: <EA53646512D0ED48AC1673034B861EE0017EA7A8@thuja>

I did a *brief* review of the mailing lists and didn't see this question
addressed, although I'm sure someone has come up with a good solution.

I'm trying to create standard 8-bit unsigned geotiffs from a variety of
source data types (signed/unsigned ints, floats, etc.).  I would like
the output range on all images to look like:

0: No data
1-255: Scaled minimum/maximum of my projwin

Sample input includes (clipped from gdalinfo):

Driver: AIG/Arc/Info Binary Grid
Size is 11667, 9402
Band 1 Block=256x4 Type=Int16, ColorInterp=Undefined
  Minimum=148.000, Maximum=2887.000, Mean=1060.775, StdDev=452.013
  NoData Value=-32768

Driver: AIG/Arc/Info Binary Grid
Size is 11667, 9402
Band 1 Block=256x4 Type=Byte, ColorInterp=Undefined
  Minimum=0.000, Maximum=254.000, Mean=168.005, StdDev=43.652
  NoData Value=255

I have two questions:

1) Is there a standard algorithm for determining the min/max of a window
within an image.  I assume that you could get there by iterating over
the tiles that make up that window, but I didn't know if there was a
more elegant way that I was overlooking.

2) Is there functionality to provide a kind of "remap" table for
assigning src values to dst values?  For example, in the second image
provided above I would want to scale the range of the input values 0:254
to output values 1:255 and then convert input value 255 to output value
0.  Unless I'm overlooking something very obvious in gdal_translate,
this isn't straightforward because giving the options "-scale 0 254 1
255 -a_nodata 255" would first scale the data as desired but would then
turn the original 254s into No Data and the No Data value would still be
255.

Matt Gregory
Faculty Research Assistant
Department of Forest Science
Oregon State University
Phone : (541) 758-7778
Email : matt.gregory@oregonstate.edu


From sorokina at ornl.gov  Tue Feb 20 15:27:50 2007
From: sorokina at ornl.gov (Sorokine, Alexandre)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] 100 byte shx files
Message-ID: <428543BBA8AC7443BA10B0F491C6B05601E5EEA0@ORNLEXCHANGE.ornl.gov>

All,
 
I was converting the projection of shapefiles from the same directoy
using the command: 
 
ogr2ogr -t_srs proj.wkt . /media/shapefiles/
 
What I found is that all resulting shape files were corrupted having shx
file just 100 bytes long (basically this is a header with no content).
Convereting shapefiles one by one works fine.  Is it a bug or am I doing
something wrong?  I am using gdal gdal-1.3.2.
 
--
Alex 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070220/4776f732/attachment.html
From dylan.beaudette at gmail.com  Tue Feb 20 16:28:03 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] 100 byte shx files
In-Reply-To: <428543BBA8AC7443BA10B0F491C6B05601E5EEA0@ORNLEXCHANGE.ornl.gov>
References: <428543BBA8AC7443BA10B0F491C6B05601E5EEA0@ORNLEXCHANGE.ornl.gov>
Message-ID: <200702201328.03809.dylan.beaudette@gmail.com>

On Tuesday 20 February 2007 12:27, Sorokine, Alexandre wrote:
> All,
>
> I was converting the projection of shapefiles from the same directoy
> using the command:
>
> ogr2ogr -t_srs proj.wkt . /media/shapefiles/
>
> What I found is that all resulting shape files were corrupted having shx
> file just 100 bytes long (basically this is a header with no content).
> Convereting shapefiles one by one works fine.  Is it a bug or am I doing
> something wrong?  I am using gdal gdal-1.3.2.
>
> --
> Alex

how about using a for loop?

for x in *.shp ; do ogr2ogr ... ; done

?

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From Peter.Rushforth at statcan.ca  Tue Feb 20 15:56:56 2007
From: Peter.Rushforth at statcan.ca (Peter.Rushforth@statcan.ca)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] ogr2ogr on solaris 10:  too large a file?
Message-ID: <AB38021D12570A4AB907F442AE5488070107637A@stcem04.statcan.ca>

Hi Frank and List,

> 
> It does seem likely that the 32bit (<2GB) file API is being 
> used and is responsible for this problem.  However, the GML 
> reader uses Xerces so the issue (I think) would be what API 
> Xerces uses since we just pass it the filename from OGR.
> 
> I haven't tried such a large file, and I don't know what 
> would be involved in getting it working.

As it turns out, man lfcompile on solaris tells you how to
compile with large file support enabled.  I re-configure-d
and re-compiled gdal with the 
CFLAGS='-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64'
CXXFLAGS='-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64' options
to the configure command.  I also re-configured and
compiled xerces 2.7 with similar compiler options and this
seems to allow me to access gml files > 2Gb.

In fact I tried just recompiling xerces with the large file
support without doing the same to gdal, and ogr2ogr still
ignored the large file.  Having compiled ogr2ogr with the
above flags seems to have resolved the problem.

I hope this information proves useful to someone else, too.

Cheers,
Peter




From sorokina at ornl.gov  Tue Feb 20 16:29:28 2007
From: sorokina at ornl.gov (Sorokine, Alexandre)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] 100 byte shx files
In-Reply-To: <200702201328.03809.dylan.beaudette@gmail.com>
Message-ID: <428543BBA8AC7443BA10B0F491C6B05601E5EEA1@ORNLEXCHANGE.ornl.gov>

See my comments below...

> > I was converting the projection of shapefiles from the same directoy
> > using the command:
> >
> > ogr2ogr -t_srs proj.wkt . /media/shapefiles/
> >
> > What I found is that all resulting shape files were 
> corrupted having shx
> > file just 100 bytes long (basically this is a header with 
> no content).
> > Convereting shapefiles one by one works fine.  Is it a bug 
> or am I doing
> > something wrong?  I am using gdal gdal-1.3.2.
> >
> > --
> > Alex
> 
> how about using a for loop?
> 
> for x in *.shp ; do ogr2ogr ... ; done

Yes, this is what I did to get the job done.  But I still wonder if the
100 byte shx files is an expected behavior or not.

--
Alex


From warmerdam at pobox.com  Tue Feb 20 16:46:48 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] 100 byte shx files
In-Reply-To: <428543BBA8AC7443BA10B0F491C6B05601E5EEA0@ORNLEXCHANGE.ornl.gov>
References: <428543BBA8AC7443BA10B0F491C6B05601E5EEA0@ORNLEXCHANGE.ornl.gov>
Message-ID: <45DB6C48.3010108@pobox.com>

Sorokine, Alexandre wrote:
> All,
>  
> I was converting the projection of shapefiles from the same directoy 
> using the command:
>  
> ogr2ogr -t_srs proj.wkt . /media/shapefiles/
>  
> What I found is that all resulting shape files were corrupted having shx 
> file just 100 bytes long (basically this is a header with no content).  
> Convereting shapefiles one by one works fine.  Is it a bug or am I doing 
> something wrong?  I am using gdal gdal-1.3.2.

Alex,

I'm not sure why this is happening.  I would encourage you to try it also
with a recent version of ogr2ogr - perhaps from a recent FWTools build.  If
the problem still occures then you could submit a bug report with all the
details needed to reproduce it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ed at topozone.com  Tue Feb 20 16:51:15 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] 100 byte shx files
In-Reply-To: <428543BBA8AC7443BA10B0F491C6B05601E5EEA1@ORNLEXCHANGE.ornl.gov>
Message-ID: <C200D783.20D7D%ed@topozone.com>

Alex -

/media/shapefiles/ is a directory, not a list of files.  Did you try
/media/shapefiles/* instead?

     - Ed
-- 
Ed McNierney
President and Chief Mapmaker
Maps a la carte, Inc. / TopoZone.com
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: (978) 251-4242
Fax: (978) 251-1396
ed@topozone.com

> From: "Sorokine, Alexandre" <sorokina@ornl.gov>
> Date: Tue, 20 Feb 2007 16:29:28 -0500
> To: <dylan.beaudette@gmail.com>, <gdal-dev@lists.maptools.org>
> Conversation: [Gdal-dev] 100 byte shx files
> Subject: RE: [Gdal-dev] 100 byte shx files
> 
> See my comments below...
> 
>>> I was converting the projection of shapefiles from the same directoy
>>> using the command:
>>> 
>>> ogr2ogr -t_srs proj.wkt . /media/shapefiles/
>>> 
>>> What I found is that all resulting shape files were
>> corrupted having shx
>>> file just 100 bytes long (basically this is a header with
>> no content).
>>> Convereting shapefiles one by one works fine.  Is it a bug
>> or am I doing
>>> something wrong?  I am using gdal gdal-1.3.2.
>>> 
>>> --
>>> Alex
>> 
>> how about using a for loop?
>> 
>> for x in *.shp ; do ogr2ogr ... ; done
> 
> Yes, this is what I did to get the job done.  But I still wonder if the
> 100 byte shx files is an expected behavior or not.
> 
> --
> Alex
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Feb 20 16:58:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] custom reclass/remap using gdal_translate
In-Reply-To: <EA53646512D0ED48AC1673034B861EE0017EA7A8@thuja>
References: <EA53646512D0ED48AC1673034B861EE0017EA7A8@thuja>
Message-ID: <45DB6F15.50102@pobox.com>

Gregory, Matthew wrote:
> I have two questions:
> 
> 1) Is there a standard algorithm for determining the min/max of a window
> within an image.  I assume that you could get there by iterating over
> the tiles that make up that window, but I didn't know if there was a
> more elegant way that I was overlooking.

Matthew,

One approach to this would be to create a virtual file for that subwindow
and then compute the min/max on that.

eg.
gdal_translate -of VRT -srcwin 100 200 500 400 in.tif out.vrt
gdalinfo -stats out.vrt

> 2) Is there functionality to provide a kind of "remap" table for
> assigning src values to dst values?  For example, in the second image
> provided above I would want to scale the range of the input values 0:254
> to output values 1:255 and then convert input value 255 to output value
> 0.  Unless I'm overlooking something very obvious in gdal_translate,
> this isn't straightforward because giving the options "-scale 0 254 1
> 255 -a_nodata 255" would first scale the data as desired but would then
> turn the original 254s into No Data and the No Data value would still be
> 255.

There is no general remapping available in gdal_translate.  The -scale
option is as good as it gets for now.  And I believe your analysis of the
nodata handling is correct.

I think it might be worth investing some effort in writing a python script
to automate your process.  In combination with Numeric python you should
be able to automate scaling and various kinds of remapping.  The gdal_merge.py
script might be a good one to look at as a start.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mbaye1234 at yahoo.fr  Wed Feb 21 03:29:17 2007
From: mbaye1234 at yahoo.fr (mbaye)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Compile Gdal with Kakadu in sun pro forte
Message-ID: <9077068.post@talk.nabble.com>


I want to compile gdal with forte in solaris sunpro
when i do make i have this error

make
:allocator<char> >,VSIFilesystemHandler*> >
>::iterator,bool>__rwstd::__rb_tree<std::basic_string<char,std::char_traits<char>,std::allocator<char>
>,std::pair<const
std::basic_string<char,std::char_traits<char>,std::allocator<char>
>,VSIFilesystemHandler*>,__rwstd::__select1st<std::pair<const
std::basic_string<char,std::char_traits<char>,std::allocator<char>
>,VSIFilesystemHandler*>,std::basic_string<char,std::char_traits<char>,std::allocator<char>
>
>,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char>
> >,std::allocator<std::pair<const
std::basic_string<char,std::char_traits<char>,std::allocator<char>
>,VSIFilesystemHandler*> > >::insert(const std::pair<const
std::basic_string<char,std::char_traits<char>,std::allocator<char>
>,VSIFilesystemHandler*>&)
/space/export/home/mme/dev/GDAL/libgdal.a(cpl_vsil.o)
ld: fatal : Erreurs de r?f?rence aux symboles. Aucun r?sultat ?crit dans
ogrinfo
make[1]: *** [ogrinfo] Error 1
make[1]: Leaving directory `/space/export/home/mme/dev/GDAL/ogr'
make: *** [ogr-apps] Error 2

thanks for your help
-- 
View this message in context: http://www.nabble.com/Compile-Gdal-with-Kakadu-in-sun-pro-forte-tf3265433.html#a9077068
Sent from the GDAL - Dev mailing list archive at Nabble.com.



From warmerdam at pobox.com  Wed Feb 21 11:41:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Compile Gdal with Kakadu in sun pro forte
In-Reply-To: <9077068.post@talk.nabble.com>
References: <9077068.post@talk.nabble.com>
Message-ID: <45DC7639.6030907@pobox.com>

mbaye wrote:
> I want to compile gdal with forte in solaris sunpro
> when i do make i have this error
> 
> make
> :allocator<char> >,VSIFilesystemHandler*> >
>> ::iterator,bool>__rwstd::__rb_tree<std::basic_string<char,std::char_traits<char>,std::allocator<char>
>> ,std::pair<const
> std::basic_string<char,std::char_traits<char>,std::allocator<char>
>> ,VSIFilesystemHandler*>,__rwstd::__select1st<std::pair<const
> std::basic_string<char,std::char_traits<char>,std::allocator<char>
>> ,VSIFilesystemHandler*>,std::basic_string<char,std::char_traits<char>,std::allocator<char>
>>
>> ,std::less<std::basic_string<char,std::char_traits<char>,std::allocator<char>
>>> ,std::allocator<std::pair<const
> std::basic_string<char,std::char_traits<char>,std::allocator<char>
>> ,VSIFilesystemHandler*> > >::insert(const std::pair<const
> std::basic_string<char,std::char_traits<char>,std::allocator<char>
>> ,VSIFilesystemHandler*>&)
> /space/export/home/mme/dev/GDAL/libgdal.a(cpl_vsil.o)
> ld: fatal : Erreurs de r?f?rence aux symboles. Aucun r?sultat ?crit dans
> ogrinfo
> make[1]: *** [ogrinfo] Error 1
> make[1]: Leaving directory `/space/export/home/mme/dev/GDAL/ogr'
> make: *** [ogr-apps] Error 2

"Mbaye",

I'm afraid I don't know what is causing the above.  Does this happen only
when trying to include Kakadu or also when doing a minimal GDAL build?  The
issue is clearly something related esoteric C++ stuff with regard to
std::string, and appears to strike at link time ... which is ugly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rkgeorge at cadmaps.com  Wed Feb 21 16:43:24 2007
From: rkgeorge at cadmaps.com (Randy George)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] RE: ogr2ogr to PostGIS gives wrong SRID?
Message-ID: <20070221214327.28CCE62D599@mpls-qmqp-05.inet.qwest.net>

Hi,

 

I am attempting to use ogr2ogr to load some shp files into PostGIS

When translating a .shp file that is in EPSG:2239 and reprojecting to
EPSG:4326 like this:

 

ogr2ogr -f PostgreSQL PG:"user=user dbname=GA host=localhost password=pass
port=5432" 06_ZoneA.shp -s_srs EPSG:2239 -t_srs EPSG:4326 -nln test -append

 

The resulting table has correct coords but not a valid srid:

"SRID=32771;LINESTRING(-81.3993398544517 31.4233644295052,-81.4019931984873
31.4217494430945,-81.4036082752935 31.4205958831135,-81.4047618947201
31.4192116162976,-81.4062616063205 31.4179427019781,-81.407645959851
31.4171352080714,-81.4096071087392 31.4144 (..)"

 

The geometry_columns:

"";"public";"test";"wkb_geometry";"2";"32771";"LINESTRING"

 

The SRID constraint:

ALTER TABLE test  ADD CONSTRAINT enforce_srid_wkb_geometry CHECK
(srid(wkb_geometry) = 32771);

 

Adding -a_srs EPSG:4326 to the cmd line doesn't seem to change the result.

 

Is there another parameter required to set the SRID?

 

My convoluted work around:

ALTER TABLE "test" DROP CONSTRAINT enforce_srid_wkb_geometry;

UPDATE "test" SET wkb_geometry = setsrid(wkb_geometry,4326);

ALTER TABLE "test"  ADD CONSTRAINT enforce_srid_wkb_geometry CHECK
(srid(wkb_geometry) = 4326);

UPDATE "geometry_columns" SET srid=4326 WHERE f_table_name='test';

 

Thanks

randy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070221/8f91777e/attachment.html
From warmerdam at pobox.com  Wed Feb 21 17:57:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] RE: ogr2ogr to PostGIS gives wrong SRID?
In-Reply-To: <20070221214327.28CCE62D599@mpls-qmqp-05.inet.qwest.net>
References: <20070221214327.28CCE62D599@mpls-qmqp-05.inet.qwest.net>
Message-ID: <45DCCE52.2080909@pobox.com>

Randy George wrote:
> Hi,
> 
>  
> 
> I am attempting to use ogr2ogr to load some shp files into PostGIS
> 
> When translating a .shp file that is in EPSG:2239 and reprojecting to 
> EPSG:4326 like this:
> 
>  
> 
> ogr2ogr -f PostgreSQL PG:"user=user dbname=GA host=localhost 
> password=pass port=5432" 06_ZoneA.shp -s_srs EPSG:2239 -t_srs EPSG:4326 
> -nln test ?append
> 
>  
> 
> The resulting table has correct coords but not a valid srid:
> 
> "SRID=32771;LINESTRING(-81.3993398544517 
> 31.4233644295052,-81.4019931984873 31.4217494430945,-81.4036082752935 
> 31.4205958831135,-81.4047618947201 31.4192116162976,-81.4062616063205 
> 31.4179427019781,-81.407645959851 31.4171352080714,-81.4096071087392 
> 31.4144 (..)"

Randy,

What is happening is that ogr2ogr is expanding EPSG:4326 into the
full well known text definition.  It is then doing a comparison of this
WKT to all the WKT values in the spatial_ref_sys table, and when no
match is found it creates and populates a new entry in the table with
code 32771 (the next free value).  Then it assigns this value to the table
and all geometries.

There is nothing inherently wrong with this, but it makes it difficult mix
the geometries with other geometries using SRID 4326.

The assumption that SRID is the same as EPSG code is not exactly true -
it just happens that the default set of SRIDs are matched with EPSG.

Unfortunately I don't see a creation option to allow forcing use of
a particular pre-existing SRID with the PG driver.  I think there is
already an enhancement request for this in bugzilla, but you might want
to verify that, and file one if you can't find such a request.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ealpert at digitalglobe.com  Wed Feb 21 18:55:54 2007
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] 100 byte shx files
References: <428543BBA8AC7443BA10B0F491C6B05601E5EEA0@ORNLEXCHANGE.ornl.gov>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233E3F7F2@COMAIL01.digitalglobe.com>

FYI, I get this behavior from ogr2ogr when I use it to query from Oracle
if my query returns no values. So perhaps it's not recognizing
/media/shapefiles/ as a valid data source.

 

-e

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Sorokine,
Alexandre
Sent: Tuesday, February 20, 2007 1:28 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] 100 byte shx files

 

All,

 

I was converting the projection of shapefiles from the same directoy
using the command: 

 

ogr2ogr -t_srs proj.wkt . /media/shapefiles/

 

What I found is that all resulting shape files were corrupted having shx
file just 100 bytes long (basically this is a header with no content).
Convereting shapefiles one by one works fine.  Is it a bug or am I doing
something wrong?  I am using gdal gdal-1.3.2.

 

--

Alex 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070221/ecba3288/attachment.html
From matt.gregory at oregonstate.edu  Thu Feb 22 15:50:32 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] VRTCreateCopy() with no filename
Message-ID: <EA53646512D0ED48AC1673034B861EE0017EA7CC@thuja>

I'm trying to follow a code snippet at
http://www.gdal.org/gdal_vrttut.html, namely:

---------

GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "VRT" );
GDALDataset *poSrcDS, *poVRTDS;

poSrcDS = (GDALDataset *) GDALOpenShared( "utm.tif", GA_ReadOnly );
poVRTDS = poDriver->CreateCopy( "", poSrcDS, FALSE, NULL, NULL, NULL );

GDALDriver *poTIFFDriver = (GDALDriver *) GDALGetDriverByName( "GTiff"
);
GDALDataset *poTiffDS;

poTiffDS = 
  poTIFFDriver->CreateCopy( "wrk.tif", poVRTDS, FALSE, NULL, NULL, NULL
);

---------

When I try to create the VRT copy with a filename, I have no problems.
But when I don't provide a filename (as in the sample), my computer
hangs.  

Here is the abbreviated call stack of the hanging location:

- VSIWin32Handle::Read
- VSIFReadL
- GDALFindAssociatedAuxFile
- GDALDefaultOverviews::Initialize
- VRTDataset::Create
- VRTCreateCopy

In gdal_misc.cpp at line 2412, it's returning a valid file pointer (fp)
which doesn't seem right.  Can anyone straighten me out?  Obviously, the
easy workaround is to create the temporary VRT and delete it later, but
I wanted to make sure I wasn't missing something.

thanks, matt

Matt Gregory
Faculty Research Assistant
Department of Forest Science
Oregon State University
Phone : (541) 758-7778
Email : matt.gregory@oregonstate.edu


From warmerdam at pobox.com  Thu Feb 22 16:25:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] VRTCreateCopy() with no filename
In-Reply-To: <EA53646512D0ED48AC1673034B861EE0017EA7CC@thuja>
References: <EA53646512D0ED48AC1673034B861EE0017EA7CC@thuja>
Message-ID: <45DE0A4D.9030908@pobox.com>

Gregory, Matthew wrote:
> I'm trying to follow a code snippet at
> http://www.gdal.org/gdal_vrttut.html, namely:
> 
> ---------
> 
> GDALDriver *poDriver = (GDALDriver *) GDALGetDriverByName( "VRT" );
> GDALDataset *poSrcDS, *poVRTDS;
> 
> poSrcDS = (GDALDataset *) GDALOpenShared( "utm.tif", GA_ReadOnly );
> poVRTDS = poDriver->CreateCopy( "", poSrcDS, FALSE, NULL, NULL, NULL );
> 
> GDALDriver *poTIFFDriver = (GDALDriver *) GDALGetDriverByName( "GTiff"
> );
> GDALDataset *poTiffDS;
> 
> poTiffDS = 
>   poTIFFDriver->CreateCopy( "wrk.tif", poVRTDS, FALSE, NULL, NULL, NULL
> );
> 
> ---------
> 
> When I try to create the VRT copy with a filename, I have no problems.
> But when I don't provide a filename (as in the sample), my computer
> hangs.  
> 
> Here is the abbreviated call stack of the hanging location:
> 
> - VSIWin32Handle::Read
> - VSIFReadL
> - GDALFindAssociatedAuxFile
> - GDALDefaultOverviews::Initialize
> - VRTDataset::Create
> - VRTCreateCopy
> 
> In gdal_misc.cpp at line 2412, it's returning a valid file pointer (fp)
> which doesn't seem right.  Can anyone straighten me out?  Obviously, the
> easy workaround is to create the temporary VRT and delete it later, but
> I wanted to make sure I wasn't missing something.

Matt,

This is a known bug in 1.4.0 and has been fixed in trunk and 1.4.x branch.
Basically there is an attempt to open a file named "aux" which is a special
device on windows and it hangs waiting for input from the device.

Sorry about that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Feb 22 19:43:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Motion: Add Peng Gao as a commiter
Message-ID: <45DE3896.2070706@pobox.com>

Motion: To extend commiter writes to Peng Gao for GDAL subversion.

-- 

Peng Gao is head of the raster team at ESRI and has been working with me
closely for a couple years now, including provide quite a number of excellent
patches.  He has reviewed and agreed to the GDAL Committer Guidelines (RFC3).

+1 from me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu at iastate.edu  Thu Feb 22 21:51:26 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Motion: Add Peng Gao as a commiter
In-Reply-To: <45DE3896.2070706@pobox.com>
References: <45DE3896.2070706@pobox.com>
Message-ID: <750280AD-D79B-4A12-8777-13576FCA9487@iastate.edu>

+1.  Great to have you on board.


On Feb 22, 2007, at 6:43 PM, Frank Warmerdam wrote:

> Motion: To extend commiter writes to Peng Gao for GDAL subversion.
>
> --  
>
> Peng Gao is head of the raster team at ESRI and has been working  
> with me
> closely for a couple years now, including provide quite a number of  
> excellent
> patches.  He has reviewed and agreed to the GDAL Committer  
> Guidelines (RFC3).
>
> +1 from me.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From dmorissette at mapgears.com  Fri Feb 23 10:56:46 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Motion: Add Peng Gao as a commiter
In-Reply-To: <45DE3896.2070706@pobox.com>
References: <45DE3896.2070706@pobox.com>
Message-ID: <45DF0EBE.8090801@mapgears.com>

Frank Warmerdam wrote:
> Motion: To extend commiter writes to Peng Gao for GDAL subversion.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From Shawn.Gong at drdc-rddc.gc.ca  Fri Feb 23 15:29:17 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] GvOptionMenu callback
Message-ID: <2E58C246F17003499C141D334794D049D5886B@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,

I use gvutils.GvOptionMenu instead of entry box.
Problem is that I don't know how to trigger the callback when a
different item is selected.

I get message:
Gtk-WARNING **: gtk_signal_connect_full(): could not find signal
"changed" in the `GtkOptionMenu' class ancestry


Thanks,
Shawn Gong


The callback is in the second last line.
---------------------------------
    def create_gui(self):

        self.set_policy(gtk.FALSE, gtk.TRUE, gtk.TRUE)
        
        #put all the frames in a dict so
        #we can show and hide them

        self.frame_dict = {}

        # main box

        gui_box = gtk.GtkVBox(spacing=20, homogeneous=gtk.FALSE)
        gui_box.set_border_width(10)
        self.add(gui_box)

        # algorithm option menu
       
        frame = gtk.GtkFrame(Algorithm')
        self.frame_dict['algorithm'] = frame
        gui_box.add(frame,expand=FALSE)
        vbox = gtk.GtkVBox(spacing=15)
        vbox.set_border_width(10)
        frame.add(vbox)

        box = gtk.GtkHBox(spacing=5)
        vbox.add(box,expand=FALSE)
        self.alg = gvutils.GvOptionMenu(ALG_LIST)
        self.alg.set_history(0)
        self.alg.connect('changed',self.algorithm_changed_cb)
        box.add(self.alg)
        ... ...

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070223/1a9df7bf/attachment.html
From jvarga at boulder.net  Fri Feb 23 17:04:59 2007
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Import filter for Blender3D
Message-ID: <45DF650B.2070401@boulder.net>

Wondering if there has ever been discussion on using GDAL as import
filter for Blender (http://www.blender3d.org)?   Seems it would be
relatively straight forward and I'm curious what GDAL community thinks
might be the best implementation methods (python)?

Also, would seem to benefit both communities.  For Blender a world of
spatial data would be accessible (currently troublesome to import -
probably DXF at best).  For GDAL users, a rendering, animation
compositing platform at their fingertips, along the lines of NViz, but
more for planners, game developers, (Blender has nice OSS game
development module), landscape architects, geographers, etc.

Jack Varga
Boulder, CO

From starged at gmail.com  Fri Feb 23 21:05:57 2007
From: starged at gmail.com (Mario Beauchamp)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] GvOptionMenu callback
In-Reply-To: <2E58C246F17003499C141D334794D049D5886B@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049D5886B@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <f5a8aca50702231805w4277dcbfmd623113c6751fa9c@mail.gmail.com>

Hi Shawn,

On 2/23/07, Gong, Shawn <Shawn.Gong@drdc-rddc.gc.ca> wrote:
>
> I use gvutils.GvOptionMenu instead of entry box.
>
> Problem is that I don't know how to trigger the callback when a different
> item is selected.
>
>
>         self.alg = gvutils.GvOptionMenu(ALG_LIST)
>
>         self.alg.set_history(0)
>
>         self.alg.connect('changed',self.algorithm_changed_cb)
>

This really belongs to openev-discuss (openev-discuss@lists.sourceforge.net)
so I replied there as well.

You don't need to connect to the GvOptionMenu, you set the callback in
the constructor like this:

self.alg = gvutils.GvOptionMenu(ALG_LIST, self.algorithm_changed_cb)

cheers
-- 
Mario B.

From SriRam.PrasadBhasker at rmsi.com  Sat Feb 24 05:04:25 2007
From: SriRam.PrasadBhasker at rmsi.com (SriRam Prasad Bhasker)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Bug in TiffLib 3.8.2
Message-ID: <OF7C0FECD7.5A43FBDA-ON6525728C.00371722-6525728C.0037305A@rmsi.com>

while compiling the below warning message is being generated.

warning :: tif_getimage.c(2103) : warning C4550: expression evaluates to a 
function which is missing an argument list


static tileContigRoutine
initCIELabConversion(TIFFRGBAImage* img)
{
        static char module[] = "initCIELabConversion";

        float   *whitePoint;
        float   refWhite[3];

        if (!img->cielab) {
                img->cielab = (TIFFCIELabToRGB *)
                        _TIFFmalloc(sizeof(TIFFCIELabToRGB));
                if (!img->cielab) {
                        TIFFErrorExt(img->tif->tif_clientdata, module,
                            "No space for CIE L*a*b*->RGB conversion 
state.");
                        return NULL;
                }
        }

        TIFFGetFieldDefaulted(img->tif, TIFFTAG_WHITEPOINT, &whitePoint);
        refWhite[1] = 100.0F;
        refWhite[0] = whitePoint[0] / whitePoint[1] * refWhite[1];
        refWhite[2] = (1.0F - whitePoint[0] - whitePoint[1])
                      / whitePoint[1] * refWhite[1];
        if (TIFFCIELabToRGBInit(img->cielab, &display_sRGB, refWhite) < 0) 
{
                TIFFErrorExt(img->tif->tif_clientdata, module,
                    "Failed to initialize CIE L*a*b*->RGB conversion 
state.");
                _TIFFfree(img->cielab);
                return NULL;
        }

        return putcontig8bitCIELab;
}

the output LIB is not getting compiled when used with vc++.


cheers
s.p.bhasker
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070224/61cba2af/attachment.html
From dron at ak4719.spb.edu  Sat Feb 24 05:29:00 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Motion: Add Peng Gao as a commiter
In-Reply-To: <45DE3896.2070706@pobox.com>
References: <45DE3896.2070706@pobox.com>
Message-ID: <20070224102900.GA29535@ak4719.spb.edu>

On Thu, Feb 22, 2007 at 07:43:02PM -0500, Frank Warmerdam wrote:
> Motion: To extend commiter writes to Peng Gao for GDAL subversion.
> 
> Peng Gao is head of the raster team at ESRI and has been working with
> me closely for a couple years now, including provide quite a number of
> excellent patches.  He has reviewed and agreed to the GDAL Committer
> Guidelines (RFC3).

+1


-- 
Andrey V. Kiselev
ICQ# 26871517

From tutey at o2.pl  Sat Feb 24 06:10:23 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] How to best perform raster cell aggregation
In-Reply-To: <3c5546140702121808p4602e543n4eeeb627820bb28b@mail.gmail.com>
References: <C7B4D2761C705C44BEE5F4E4F13CF6F0B789B3@frost.shore.mbari.org>
	<3c5546140702121808p4602e543n4eeeb627820bb28b@mail.gmail.com>
Message-ID: <45E01D1F.9030906@o2.pl>

Dylan Beaudette wrote:
> Hi Andrew, nice to see someone from the aquarium posting to the GDAL list!
> 
> i would highly recommend a GDAL+GRASS approach to your problem : GDAL
> for the conversion and import / GRASS for the aggregation / analysis.
> If possible, get  the CVS version of GRASS which contains several new
> resampling commands.

In particular:

http://grass.itc.it/grass63/manuals/html63_user/r.resamp.stats.html
http://grass.itc.it/grass63/manuals/html63_user/r.resamp.interp.html

Cheers,
Maciek

From mitchelljj98 at gmail.com  Sat Feb 24 12:01:33 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdal_merge vs. gdalwarp
Message-ID: <fa2ac0580702240901h3268b960hb634662c4c5e0c25@mail.gmail.com>

Hi,

I have found in comparing the speed between gdal_merge and gdalwarp that
gdal_merge mosaics tiles together more than twice as fast.  If all I need to
do is mosaic tiles together that are the same resolution and keeping the
same projection, then what advantage is using gdalwarp?  Also I noticed what
I think is a new utility on the gdal utilities page called
"nearblack<http://www.gdal.org/nearblack.html>- Convert nearly
black/white borders to exact value."

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070224/5977d204/attachment.html
From warmerdam at pobox.com  Sat Feb 24 15:06:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdal_merge vs. gdalwarp
In-Reply-To: <fa2ac0580702240901h3268b960hb634662c4c5e0c25@mail.gmail.com>
References: <fa2ac0580702240901h3268b960hb634662c4c5e0c25@mail.gmail.com>
Message-ID: <45E09ADC.40701@pobox.com>

John Mitchell wrote:
> Hi,
> 
> I have found in comparing the speed between gdal_merge and gdalwarp that 
> gdal_merge mosaics tiles together more than twice as fast.  If all I 
> need to do is mosaic tiles together that are the same resolution and 
> keeping the same projection, then what advantage is using gdalwarp?  
> Also I noticed what I think is a new utility on the gdal utilities page 
> called " nearblack <http://www.gdal.org/nearblack.html> - Convert nearly 
> black/white borders to exact value."

John,

If gdal_merge.py does what you need then use it.  Gdalwarp is not sensitive
to limited memory the way gdal_merge is, and includes a variety of extra
options like different resampling kernels.  It is really a general purpose
image warper whereas gdal_merge.py is just blatting together whole images into
a mosaic.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From lijian.shi at und.nodak.edu  Mon Feb 26 00:42:33 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Transfer the shp file(polygon) into raster data
Message-ID: <0JE200KTS2IXSN00@mailmx1.und.nodak.edu>

Hi,

 

I am using gdal_rasterize to transfer the shp file(polygon) into raster data
but could not get the right result. The gdal_rasterize can not create the
raster data yet so I use a 'geotiff' file which contains the area of shp
file. Am I right? Is there any other program with c or c++ to do this work?
I tried to write the code by myself according to the code of gdal_raterize
but it seems to be difficult to me.

 

Otherwise, can I do this job with MapServer? If yes, could you please tell
me the procedure roughly?

 

Best regards,

 

Lijian

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070225/a3077450/attachment.html
From josegomez at gmx.net  Mon Feb 26 07:52:07 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Warping and resampling with gdal in python
Message-ID: <20070226125207.317550@gmx.net>

Hi!
I am trying to reproject, resample and subset some files using a Python script. I have noticed that the gdal.py module has some utility members to accomplish this. To achieve this, I have simply used

err = gdal.CreateAndReprojectImage( g_in, f_out,
                             src_wkt = src_wkt, dst_wkt = dst_wkt)

where g_in, f_out and the src and dst wkt have been defined elsewhere. This works well, but ideally, I would like to be able to set the output resolution, and to also subset the original data. While I can do this with VRTs (I think :D), I was wondering what the "official best" :) approach to this is.

Many thanks for your help!
Jos?
-- 
"Feel free" - 5 GB Mailbox, 50 FreeSMS/Monat ...
Jetzt GMX ProMail testen: www.gmx.net/de/go/mailfooter/promail-out

From warmerdam at pobox.com  Mon Feb 26 10:23:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Transfer the shp file(polygon) into raster data
In-Reply-To: <0JE200KTS2IXSN00@mailmx1.und.nodak.edu>
References: <0JE200KTS2IXSN00@mailmx1.und.nodak.edu>
Message-ID: <45E2FB7A.4080605@pobox.com>

Lijian Shi wrote:
> Hi,
> 
>  
> 
> I am using gdal_rasterize to transfer the shp file(polygon) into raster 
> data but could not get the right result. The gdal_rasterize can not 
> create the raster data yet so I use a ?geotiff? file which contains the 
> area of shp file. Am I right? Is there any other program with c or c++ 
> to do this work? I tried to write the code by myself according to the 
> code of gdal_raterize but it seems to be difficult to me.

Lijian,

As you note, currently gdal_rasterize does not support creating the output
file, so using an existing geotiff of the target region is a reasonable
approach.

> Otherwise, can I do this job with MapServer? If yes, could you please 
> tell me the procedure roughly?

MapServer could do this if you are trying to produce output results with
1 or 3 8bit bands.  For instance if the result you seek is essentially
presentable images, as opposed to scientific rasterization outside the 8bit
domain.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Feb 26 10:40:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Warping and resampling with gdal in python
In-Reply-To: <20070226125207.317550@gmx.net>
References: <20070226125207.317550@gmx.net>
Message-ID: <45E2FF5C.4090407@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi! I am trying to reproject, resample and subset some files using a Python
> script. I have noticed that the gdal.py module has some utility members to
> accomplish this. To achieve this, I have simply used
> 
> err = gdal.CreateAndReprojectImage( g_in, f_out, src_wkt = src_wkt, dst_wkt
> = dst_wkt)
> 
> where g_in, f_out and the src and dst wkt have been defined elsewhere. This
> works well, but ideally, I would like to be able to set the output
> resolution, and to also subset the original data. While I can do this with
> VRTs (I think :D), I was wondering what the "official best" :) approach to
> this is.

Jos?,

You can also create the output file yourself with whatever extents and
resolution you want, and then use gdal.ReprojectImage() instead of
gdal.CreateAndReprojectImage().  If that doesn't give you the control
you need, you are basically looking at using VRTs or shelling out to
gdalwarp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From josegomez at gmx.net  Mon Feb 26 11:11:47 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Warping and resampling with gdal in python
In-Reply-To: <45E2FF5C.4090407@pobox.com>
References: <20070226125207.317550@gmx.net> <45E2FF5C.4090407@pobox.com>
Message-ID: <20070226161147.24920@gmx.net>

Hi Frank,
Thanks for your quick response

-------- Original-Nachricht --------
> You can also create the output file yourself with whatever extents and
> resolution you want, and then use gdal.ReprojectImage() instead of
> gdal.CreateAndReprojectImage().  If that doesn't give you the control
> you need, you are basically looking at using VRTs or shelling out to
> gdalwarp.

I tried this, but the Create() method doesn't let me choose the raster limits or the resolution. The definition goes like this:
def Create(self, filename, xsize, ysize, bands=1, datatype=GDT_Byte,               options = [])

While I can set the xsize and ysize, I would need to also set the extent of the window in the input file that will be considered. _gdal.Create() and friends don't let you do that (or am I wrong?).

In fact, I don't mind subsetting in the original dataset reference system, but other than by reading it in, storing it in an array and writing it out, I see no obvious way of doing this.

Cheers,
Jose
-- 
Der GMX SmartSurfer hilft bis zu 70% Ihrer Onlinekosten zu sparen! 
Ideal f?r Modem und ISDN: http://www.gmx.net/de/go/smartsurfer

From warmerdam at pobox.com  Mon Feb 26 12:19:58 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Warping and resampling with gdal in python
In-Reply-To: <20070226161147.24920@gmx.net>
References: <20070226125207.317550@gmx.net> <45E2FF5C.4090407@pobox.com>
	<20070226161147.24920@gmx.net>
Message-ID: <45E316BE.7000707@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi Frank, Thanks for your quick response
> 
> -------- Original-Nachricht --------
>> You can also create the output file yourself with whatever extents and 
>> resolution you want, and then use gdal.ReprojectImage() instead of 
>> gdal.CreateAndReprojectImage().  If that doesn't give you the control you
>> need, you are basically looking at using VRTs or shelling out to gdalwarp.
>> 
> 
> I tried this, but the Create() method doesn't let me choose the raster
> limits or the resolution. The definition goes like this: def Create(self,
> filename, xsize, ysize, bands=1, datatype=GDT_Byte,               options =
> [])
> 
> While I can set the xsize and ysize, I would need to also set the extent of
> the window in the input file that will be considered. _gdal.Create() and
> friends don't let you do that (or am I wrong?).

Jose,

You would create the file with gdal.Create(), and then set the coordinate
system and geotransform the .SetProjection() and .SetGeotransform() methods.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From huajun_zhang at usgs.gov  Mon Feb 26 14:08:09 2007
From: huajun_zhang at usgs.gov (Huajun Zhang)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdalwarp tutorial VS2003 compile error 
Message-ID: <OFEC633DE3.ED90650E-ON8525728E.0068B24D-0525728E.00691E31@usgs.gov>

I am trying to use some code from gdal warp API tutorial, but I meet the 
compile error in VS2003: 
 error C2664: 'OGRSpatialReference::exportToWkt' : cannot convert 
parameter 1 from 'const char **__w64  ' to 'char ** '

Do you have any idea to fix the problem?

Thank

Huajun Zhang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070226/a44f3bf9/attachment.html
From bartvde at osgis.nl  Mon Feb 26 14:42:29 2007
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Motion: Add Peng Gao as a commiter
In-Reply-To: <45E3369C.4000207@osgis.nl>
References: <45DE3896.2070706@pobox.com> <45E3369C.4000207@osgis.nl>
Message-ID: <45E33825.9010108@osgis.nl>

Let me clarify a bit, so people don't get this wrong. I have nothing 
against ESRI and they will bring in a lot of experience to the project.

I just wanted to know if they have plans to take an active role and 
submit drivers for their formats.

Best regards,
Bart

Bart van den Eijnden (OSGIS) schreef:
> So does ESRI have plans to commit new drivers as well?
>
> Like a non reverse-engineered ArcInfo binary grid driver :-) ?
>
> Or an ArcSDE raster driver?
>
> Best regards,
> Bart
>
> Frank Warmerdam schreef:
>> Motion: To extend commiter writes to Peng Gao for GDAL subversion.
>>
>
>


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
bartvde@osgis.nl
http://www.osgis.nl


From hobu at iastate.edu  Mon Feb 26 14:49:45 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Motion: Add Peng Gao as a commiter
In-Reply-To: <45E33825.9010108@osgis.nl>
References: <45DE3896.2070706@pobox.com> <45E3369C.4000207@osgis.nl>
	<45E33825.9010108@osgis.nl>
Message-ID: <6.2.3.4.2.20070226134924.02c69670@hobu.mail.iastate.edu>

At 01:42 PM 2/26/2007, Bart van den Eijnden (OSGIS) wrote:

>>Or an ArcSDE raster driver?

Already done :)

Cheers,

Howard 


From pgao at esri.com  Mon Feb 26 14:58:43 2007
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Motion: Add Peng Gao as a commiter
In-Reply-To: <45E33825.9010108@osgis.nl>
Message-ID: <A383B271E8D0DF47B51972FCEB438DC70125F20C@twistedwire.esri.com>

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Bart van den Eijnden (OSGIS)
> Sent: Monday, February 26, 2007 11:42 AM
> To: Bart van den Eijnden (OSGIS)
> Cc: gdal-dev
> Subject: Re: [Gdal-dev] Motion: Add Peng Gao as a commiter
> 
> Let me clarify a bit, so people don't get this wrong. I have 
> nothing against ESRI and they will bring in a lot of 
> experience to the project.
> 
> I just wanted to know if they have plans to take an active 
> role and submit drivers for their formats.
> 
> Best regards,
> Bart
> 
> Bart van den Eijnden (OSGIS) schreef:
> > So does ESRI have plans to commit new drivers as well?
> >
> > Like a non reverse-engineered ArcInfo binary grid driver :-) ?
> >
> > Or an ArcSDE raster driver?
> >
> > Best regards,
> > Bart
> >
> > Frank Warmerdam schreef:
> >> Motion: To extend commiter writes to Peng Gao for GDAL subversion.
> >>
> >
> >
> 

I am only going to submit minor fixes. This used to be done through
Frank.


Gao, Peng


From mateusz at loskot.net  Mon Feb 26 15:02:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdalwarp tutorial VS2003 compile error
In-Reply-To: <OFEC633DE3.ED90650E-ON8525728E.0068B24D-0525728E.00691E31@usgs.gov>
References: <OFEC633DE3.ED90650E-ON8525728E.0068B24D-0525728E.00691E31@usgs.gov>
Message-ID: <45E33CC2.5080901@loskot.net>

Huajun Zhang wrote:
> 
> I am trying to use some code from gdal warp API tutorial, but I meet the
> compile error in VS2003:
>  error C2664: 'OGRSpatialReference::exportToWkt' : cannot convert
> parameter 1 from 'const char **__w64  ' to 'char ** '
> 
> Do you have any idea to fix the problem?

You're probably passing const pointer where non-const is expected.
Please, show us exact code you're using, with line where you call
exportToWkt().

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From bartvde at osgis.nl  Mon Feb 26 14:35:56 2007
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Motion: Add Peng Gao as a commiter
In-Reply-To: <45DE3896.2070706@pobox.com>
References: <45DE3896.2070706@pobox.com>
Message-ID: <45E3369C.4000207@osgis.nl>

So does ESRI have plans to commit new drivers as well?

Like a non reverse-engineered ArcInfo binary grid driver :-) ?

Or an ArcSDE raster driver?

Best regards,
Bart

Frank Warmerdam schreef:
> Motion: To extend commiter writes to Peng Gao for GDAL subversion.
>


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
bartvde@osgis.nl
http://www.osgis.nl


From huajun_zhang at usgs.gov  Mon Feb 26 15:38:58 2007
From: huajun_zhang at usgs.gov (Huajun Zhang)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdalwarp tutorial VS2003 compile error
In-Reply-To: <45E33CC2.5080901@loskot.net>
Message-ID: <OFCA3618CB.090A1F72-ON8525728E.007164D0-0525728E.00716EAE@usgs.gov>

 The code is as following:

    // Get Source coordinate system. 
    const char *pszSrcWKT, *pszDstWKT = NULL;

    pszSrcWKT = GDALGetProjectionRef( hSrcDS );
    CPLAssert( pszSrcWKT != NULL && strlen(pszSrcWKT) > 0 );

    // Setup output coordinate system 
    OGRSpatialReference oSRS;

    oSRS.SetACEA( 29.5, 45.5, 23.0, -96.0, 0.0, 0.0);
    oSRS.SetWellKnownGeogCS( "NAD83" );
    oSRS.exportToWkt( &pszDstWKT );

 Error message:  error C2664: 'OGRSpatialReference::exportToWkt' : cannot 
convert parameter 1 from 'const char **__w64  ' to 'char ** '

Thanks

Huajun Zhang




Mateusz Loskot <mateusz@loskot.net> 
Sent by: gdal-dev-bounces@lists.maptools.org
02/26/2007 03:02 PM

To
gdal <gdal-dev@lists.maptools.org>
cc

Subject
Re: [Gdal-dev] gdalwarp tutorial VS2003 compile error






Huajun Zhang wrote:
> 
> I am trying to use some code from gdal warp API tutorial, but I meet the
> compile error in VS2003:
>  error C2664: 'OGRSpatialReference::exportToWkt' : cannot convert
> parameter 1 from 'const char **__w64  ' to 'char ** '
> 
> Do you have any idea to fix the problem?

You're probably passing const pointer where non-const is expected.
Please, show us exact code you're using, with line where you call
exportToWkt().

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070226/ec352d1d/attachment.html
From mateusz at loskot.net  Mon Feb 26 16:35:20 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdalwarp tutorial VS2003 compile error
In-Reply-To: <OFCA3618CB.090A1F72-ON8525728E.007164D0-0525728E.00716EAE@usgs.gov>
References: <OFCA3618CB.090A1F72-ON8525728E.007164D0-0525728E.00716EAE@usgs.gov>
Message-ID: <45E35298.6080707@loskot.net>

Huajun Zhang wrote:
> 
> The code is as following:
> 
> // Get Source coordinate system. const char *pszSrcWKT, *pszDstWKT =
> NULL;

Here, you're declaring *const* pointers to char.

> oSRS.exportToWkt( &pszDstWKT );

Here, you pass const pointer where non-const is expected.
Also, it's a good idea to check the manual to see what types are expected:

http://www.gdal.org/ogr/classOGRSpatialReference.html#8b8123ea88b3e2ffb082e5eec06d52d5

Because of C/C++ strong type safety, the const qualifier is not removed
implicitly.

You have two choices:

1) Declare the pszDstWKT as a non-const pointer:

char* pszDstWKT = NULL;

2) Leave the pszDstWkt declared as const char* and ask the compiler to
remove the const qualifier:

oSRS.exportToWkt( const_cast<char**>(pszDstWKT) );

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Mon Feb 26 21:36:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Google Summer of Code
Message-ID: <45E39918.50604@pobox.com>

Folks,

I've initiated a wiki page with some potential ideas for the google
summer of code at:

   http://wiki.osgeo.org/index.php/GDAL_SoC_Ideas

Please feel free to add some.

Later Howard and I will weed them down to perhaps a dozen ideas or so and
flesh them out a bit.  Last years ideas for postgis from Refractions looked
like this:

   http://www.refractions.net/soc2006/index.php?PostgisIdeas

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From huajun_zhang at usgs.gov  Tue Feb 27 10:55:19 2007
From: huajun_zhang at usgs.gov (Huajun Zhang)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdalwarp tutorial VS2003 compile error
In-Reply-To: <45E35298.6080707@loskot.net>
Message-ID: <OF943DFC34.0B78F8B6-ON8525728F.0057446B-0525728F.0057768E@usgs.gov>

Thanks a lot. It works. 

Huajun Zhang




Mateusz Loskot <mateusz@loskot.net> 
Sent by: gdal-dev-bounces@lists.maptools.org
02/26/2007 04:35 PM

To
gdal <gdal-dev@lists.maptools.org>
cc

Subject
Re: [Gdal-dev] gdalwarp tutorial VS2003 compile error






Huajun Zhang wrote:
> 
> The code is as following:
> 
> // Get Source coordinate system. const char *pszSrcWKT, *pszDstWKT =
> NULL;

Here, you're declaring *const* pointers to char.

> oSRS.exportToWkt( &pszDstWKT );

Here, you pass const pointer where non-const is expected.
Also, it's a good idea to check the manual to see what types are expected:

http://www.gdal.org/ogr/classOGRSpatialReference.html#8b8123ea88b3e2ffb082e5eec06d52d5


Because of C/C++ strong type safety, the const qualifier is not removed
implicitly.

You have two choices:

1) Declare the pszDstWKT as a non-const pointer:

char* pszDstWKT = NULL;

2) Leave the pszDstWkt declared as const char* and ask the compiler to
remove the const qualifier:

oSRS.exportToWkt( const_cast<char**>(pszDstWKT) );

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070227/59a6775f/attachment.html
From adam at ctech.com  Tue Feb 27 12:31:17 2007
From: adam at ctech.com (adam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Golden Software Grids
Message-ID: <000f01c75a95$22aa46c0$651fa8c0@adam>

Hello,
I have been playing with the gsg format in the latest daily build.  After
having a couple of problems I noticed there are a couple of differences
between the drivers in the build and the drivers that were in the last patch
submitted by Keven Locke.  Let's see the patch was in thread:
Drivers for Golden Software Grid Formats (long), by Kevin Locke Mon Jan 29
18:13:20 EST 2007
Let me know if I am doing wrong. 
 
Thanks
Adam G
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070227/46ed0bea/attachment.html
From warmerdam at pobox.com  Tue Feb 27 13:22:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] GDAL Project Maintainer Contracted
Message-ID: <45E476FB.6040204@pobox.com>


Folks,

I've just sent out the following announcement about Mateusz' maintenance
contract.  He is starting effective March 1st.  It is my hope that we
can initially focus on fixes leading to a 1.4.1 point release in a few weeks.

----

OSGeo and the GDAL Project are pleased to announce the contracting of
Mateusz Loskot for general GDAL maintenance and support activities.
Mateusz has been issued a six month contact, and will be performing
duties reporting to the GDAL project steering committee.

The funding for this contract has been supplied through the GDAL sponsorship
program, by GDAL's first four silver sponsors: Applied Coherent Technology,
SRC, Safe Software and Cadcorp.  The project sponsorship program gives
organizations that depend on GDAL an accountable mechanism to support the
project.

   http://www.gdal.org/credits.html
   http://www.gdal.org/sponsorship.html

Mateusz' tasks will include bug fixing, testing, and user support.  He will
be working according to the "GDAL Paid Maintainer Guidelines" put in place by
the GDAL Project Steering Committee.  While sponsor bug reports will receive
a degree of priority his efforts will benefit the whole GDAL user community.

   http://www.gdal.org/rfc9_maintainer.html

It is hoped that sponsor supported maintenance contracts such as this will
bring a new level of professionalism and responsiveness to the GDAL project,
and serve as a model for other OSGeo projects.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org




From warmerdam at pobox.com  Tue Feb 27 21:14:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Motion: Add Peng Gao as a commiter
In-Reply-To: <45DE3896.2070706@pobox.com>
References: <45DE3896.2070706@pobox.com>
Message-ID: <45E4E59F.7070008@pobox.com>

Frank Warmerdam wrote:
> Motion: To extend commiter writes to Peng Gao for GDAL subversion.

Folks,

This motion passes with +1 from Frank, Andrey, Daniel and Howard.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Wed Feb 28 06:30:37 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Golden Software Grids
In-Reply-To: <000f01c75a95$22aa46c0$651fa8c0@adam>
References: <000f01c75a95$22aa46c0$651fa8c0@adam>
Message-ID: <20070228113037.GA25546@ak4719.spb.edu>

On Tue, Feb 27, 2007 at 09:31:17AM -0800, adam wrote:
> I have been playing with the gsg format in the latest daily build.
> After having a couple of problems I noticed there are a couple of
> differences between the drivers in the build and the drivers that were
> in the last patch submitted by Keven Locke.

Yes, there are differences. I have fixed the geotransformation matrix
calculation and few other minor things. What kind of problems do you
have with that driver?

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From adam at ctech.com  Wed Feb 28 11:51:28 2007
From: adam at ctech.com (Adam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Golden Software Grids
References: <000f01c75a95$22aa46c0$651fa8c0@adam>
	<20070228113037.GA25546@ak4719.spb.edu>
Message-ID: <loom.20070228T174719-797@post.gmane.org>

Andrey Kiselev <dron <at> ak4719.spb.edu> writes:

> 
> On Tue, Feb 27, 2007 at 09:31:17AM -0800, adam wrote:
> > I have been playing with the gsg format in the latest daily build.
> > After having a couple of problems I noticed there are a couple of
> > differences between the drivers in the build and the drivers that were
> > in the last patch submitted by Keven Locke.
> 
> Yes, there are differences. I have fixed the geotransformation matrix
> calculation and few other minor things. What kind of problems do you
> have with that driver?
> 
> Best regards,
> Andrey
> 

The geotransformation matrix was my only problem.  I was writing a driver for
the Golden Software 7 format based on the submitted code and it was flipping my
model upside down. So I tracked the patch down through the thread and noticed it
was different.
Thanks for response.
Adam




From sjahputerao at missouri.edu  Wed Feb 28 14:05:07 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
Message-ID: <45E5D263.5000804@missouri.edu>

All,

 From the list of file formats currently supported by GDAL, GeoTIFF is 
listed to have a 4 GB size limit.  Is this limitation due to the assumed 
32-bit machine?  Or, will the size limit be bigger if we use a 64-bit 
machine and OS?

What about other formats such as NITF and MEM?  Because the data type 
size_t in a 32-bit system is defined as a 4-byte type, whereas in a 
64-bit system it is defined as an 8-byte.   Does this mean the MEM 
format is not limited to 2 GB anymore once we  work in the 64-bit system?

Thanks
Oz

From sy at perkins.net  Wed Feb 28 14:21:09 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E5D263.5000804@missouri.edu>
References: <45E5D263.5000804@missouri.edu>
Message-ID: <45E5D625.3060002@perkins.net>

Ozy Sjahputera wrote:
> From the list of file formats currently supported by GDAL, GeoTIFF is 
> listed to have a 4 GB size limit.  Is this limitation due to the 
> assumed 32-bit machine?  Or, will the size limit be bigger if we use a 
> 64-bit machine and OS?

AFAIK, that's a fundamental limitation of the GeoTIFF file format. Does 
anyone know if there are any plans to fix this in the future?

>
> What about other formats such as NITF and MEM?  Because the data type 
> size_t in a 32-bit system is defined as a 4-byte type, whereas in a 
> 64-bit system it is defined as an 8-byte.   Does this mean the MEM 
> format is not limited to 2 GB anymore once we  work in the 64-bit system?

That would seem like a reasonable assumption though I don't know for 
sure. I would think that NITF should be able to handle larger than 4GB 
files even on 32-bit OSes, on any modern filesystem.

Cheers,

Sy

>
> Thanks
> Oz
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Wed Feb 28 15:07:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E5D625.3060002@perkins.net>
References: <45E5D263.5000804@missouri.edu> <45E5D625.3060002@perkins.net>
Message-ID: <45E5E0F1.6030707@loskot.net>

Simon Perkins wrote:
> Ozy Sjahputera wrote:
>> From the list of file formats currently supported by GDAL, GeoTIFF is
>> listed to have a 4 GB size limit.  Is this limitation due to the
>> assumed 32-bit machine?  Or, will the size limit be bigger if we use a
>> 64-bit machine and OS?
> 
> AFAIK, that's a fundamental limitation of the GeoTIFF file format. Does
> anyone know if there are any plans to fix this in the future?

I think it's related to BigTIFF support:

http://remotesensing.org/libtiff/BigTIFFProposal.html

>> What about other formats such as NITF and MEM?  Because the data type
>> size_t in a 32-bit system is defined as a 4-byte type, whereas in a
>> 64-bit system it is defined as an 8-byte.   Does this mean the MEM
>> format is not limited to 2 GB anymore once we  work in the 64-bit system?
> 
> That would seem like a reasonable assumption though I don't know for
> sure. I would think that NITF should be able to handle larger than 4GB
> files even on 32-bit OSes, on any modern filesystem.

Yes, I think it's correct too.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Feb 28 15:19:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E5D625.3060002@perkins.net>
References: <45E5D263.5000804@missouri.edu> <45E5D625.3060002@perkins.net>
Message-ID: <45E5E3E5.2020805@pobox.com>

Simon Perkins wrote:
> Ozy Sjahputera wrote:
>> From the list of file formats currently supported by GDAL, GeoTIFF is 
>> listed to have a 4 GB size limit.  Is this limitation due to the 
>> assumed 32-bit machine?  Or, will the size limit be bigger if we use a 
>> 64-bit machine and OS?
> 
> AFAIK, that's a fundamental limitation of the GeoTIFF file format. Does 
> anyone know if there are any plans to fix this in the future?

Ozy / Simon,

Traditional TIFF is limited to 4GB in size by use of 32bit file offsets.
There is a BigTIFF project underway now and the result should be deployed
in GDAL this summer.

   http://libtiff.maptools.org/BigTIFFProposal.html

>> What about other formats such as NITF and MEM?  Because the data type 
>> size_t in a 32-bit system is defined as a 4-byte type, whereas in a 
>> 64-bit system it is defined as an 8-byte.   Does this mean the MEM 
>> format is not limited to 2 GB anymore once we  work in the 64-bit system?
> 
> That would seem like a reasonable assumption though I don't know for 
> sure. I would think that NITF should be able to handle larger than 4GB 
> files even on 32-bit OSes, on any modern filesystem.

Skimming the MEM driver code, it does not appear to be careful about having
a very large backing image.  That is, offsets into it's memory image are
computed using 32bit offsets.  If you want to have a very large MEM dataset
some improvements to the MEM driver will be required.

I believe that NITF uses ascii encoded offsets for image chunks, and that
these are wide enough to support files substantially larger than 4GB though
I haven't reviewed the limits.  GDAL does use the "large file API" for access
and I have had reports of people working with large NITF files.  But I don't
have much direct experience so there may be issues.

Hmm, on review I see the NITFCollectSegmentInfo() keeps track of the
offsets in a 32bit integer.  So now I am not at all confident that large
files would necessarily work.  It would depend on the particulars of the file.
This is really something that should be fixed in the driver, but I'd be more
comfortable fixing it with a large example file to work with.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Wed Feb 28 15:49:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E5E0F1.6030707@loskot.net>
References: <45E5D263.5000804@missouri.edu> <45E5D625.3060002@perkins.net>
	<45E5E0F1.6030707@loskot.net>
Message-ID: <45E5EACA.4080307@loskot.net>

Mateusz Loskot wrote:
> Simon Perkins wrote:
>>> 
>>> What about other formats such as NITF and MEM?  Because the data
>>>  type size_t in a 32-bit system is defined as a 4-byte type, 
>>> whereas in a 64-bit system it is defined as an 8-byte.   Does 
>>> this mean the MEM format is not limited to 2 GB anymore once we 
>>> work in the 64-bit system?
>> That would seem like a reasonable assumption though I don't know 
>> for sure. I would think that NITF should be able to handle larger 
>> than 4GB files even on 32-bit OSes, on any modern filesystem.
> 
> Yes, I think it's correct too.

Unfortunately, this assumption above *may* be incorrect.
Big Thanks to Norman Vine, who enlighten me about NITF format, and told
that the size limit depends on size of pointer type used by C++ streams.
The C++ standard specifies general requirements about type of file
pointer used by streams, but the type size is not fixed there.

All constraints like type used to represent stream position
(traits::pos_type) and offset (traits::off_type).
and others, are determined by char_traits used during instantiation
of particular stream type.
Finally, position/offset in streams (not only file stream) is
convertible to integral type with sign (sic).

According to the C++ standard, behavior of pos_type and off_type
are implementation defined.

Assuming the C++ standard doesn't define 64 bit integers, maximum
value of pos_type or off_type can be maximum value of int type,
so these values are different on different platforms as well.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Feb 28 16:14:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E5EACA.4080307@loskot.net>
References: <45E5D263.5000804@missouri.edu> <45E5D625.3060002@perkins.net>
	<45E5E0F1.6030707@loskot.net> <45E5EACA.4080307@loskot.net>
Message-ID: <45E5F0C2.9080603@pobox.com>

Mateusz Loskot wrote:
> Mateusz Loskot wrote:
>> Simon Perkins wrote:
>>>> What about other formats such as NITF and MEM?  Because the data
>>>>  type size_t in a 32-bit system is defined as a 4-byte type, 
>>>> whereas in a 64-bit system it is defined as an 8-byte.   Does 
>>>> this mean the MEM format is not limited to 2 GB anymore once we 
>>>> work in the 64-bit system?
>>> That would seem like a reasonable assumption though I don't know 
>>> for sure. I would think that NITF should be able to handle larger 
>>> than 4GB files even on 32-bit OSes, on any modern filesystem.
>> Yes, I think it's correct too.
> 
> Unfortunately, this assumption above *may* be incorrect.
> Big Thanks to Norman Vine, who enlighten me about NITF format, and told
> that the size limit depends on size of pointer type used by C++ streams.
> The C++ standard specifies general requirements about type of file
> pointer used by streams, but the type size is not fixed there.
> 
> All constraints like type used to represent stream position
> (traits::pos_type) and offset (traits::off_type).
> and others, are determined by char_traits used during instantiation
> of particular stream type.
> Finally, position/offset in streams (not only file stream) is
> convertible to integral type with sign (sic).
> 
> According to the C++ standard, behavior of pos_type and off_type
> are implementation defined.
> 
> Assuming the C++ standard doesn't define 64 bit integers, maximum
> value of pos_type or off_type can be maximum value of int type,
> so these values are different on different platforms as well.

Folks,

For reference, GDAL "built in" formats like NITF use the VSI API for
file access, and in this case the VSI*L functions which use 64bit file
offsets on platforms where they are available (essentially all).  I am
not aware of any GDAL format drivers using the c++ stream type for io.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Wed Feb 28 16:43:36 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E5F0C2.9080603@pobox.com>
References: <45E5D263.5000804@missouri.edu> <45E5D625.3060002@perkins.net>
	<45E5E0F1.6030707@loskot.net> <45E5EACA.4080307@loskot.net>
	<45E5F0C2.9080603@pobox.com>
Message-ID: <45E5F788.60005@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> Mateusz Loskot wrote:
>>> Simon Perkins wrote:
>>>>> What about other formats such as NITF and MEM?  Because the
>>>>> data type size_t in a 32-bit system is defined as a 4-byte
>>>>> type, whereas in a 64-bit system it is defined as an 8-byte.
>>>>> Does this mean the MEM format is not limited to 2 GB anymore
>>>>> once we work in the 64-bit system?
>>>> That would seem like a reasonable assumption though I don't
>>>> know for sure. I would think that NITF should be able to handle
>>>> larger than 4GB files even on 32-bit OSes, on any modern
>>>> filesystem.
>>> Yes, I think it's correct too.
>> 
>> Unfortunately, this assumption above *may* be incorrect. Big Thanks
>> to Norman Vine, who enlighten me about NITF format, and told that
>> the size limit depends on size of pointer type used by C++ streams.
>>  The C++ standard specifies general requirements about type of file
>>  pointer used by streams, but the type size is not fixed there.
>> 
>> All constraints like type used to represent stream position 
>> (traits::pos_type) and offset (traits::off_type). and others, are
>> determined by char_traits used during instantiation of particular
>> stream type. Finally, position/offset in streams (not only file
>> stream) is convertible to integral type with sign (sic).
>> 
>> According to the C++ standard, behavior of pos_type and off_type 
>> are implementation defined.
>> 
>> Assuming the C++ standard doesn't define 64 bit integers, maximum 
>> value of pos_type or off_type can be maximum value of int type, so
>> these values are different on different platforms as well.
> 
> Folks,
> 
> For reference, GDAL "built in" formats like NITF use the VSI API for 
> file access, and in this case the VSI*L functions which use 64bit
> file offsets on platforms where they are available (essentially all).
> I am not aware of any GDAL format drivers using the c++ stream type
> for io.

Frank,

Thanks for another enlightenment.

As we've already discussed on IRC, Norman was referring to
libnitf library.
The libnitf does use C++ file streams so the limitations explained
above apply to this library, but not to GDAL certainly what Frank has
explained.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Wed Feb 28 17:07:38 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E5E3E5.2020805@pobox.com>
References: <45E5D263.5000804@missouri.edu> <45E5D625.3060002@perkins.net>
	<45E5E3E5.2020805@pobox.com>
Message-ID: <45E5FD2A.9040208@perkins.net>

Frank Warmerdam wrote:
> Skimming the MEM driver code, it does not appear to be careful about 
> having
> a very large backing image.  That is, offsets into it's memory image are
> computed using 32bit offsets.  If you want to have a very large MEM 
> dataset
> some improvements to the MEM driver will be required.
>
> I believe that NITF uses ascii encoded offsets for image chunks, and that
> these are wide enough to support files substantially larger than 4GB 
> though
> I haven't reviewed the limits.  GDAL does use the "large file API" for 
> access
> and I have had reports of people working with large NITF files.  But I 
> don't
> have much direct experience so there may be issues.
>
> Hmm, on review I see the NITFCollectSegmentInfo() keeps track of the
> offsets in a 32bit integer.  So now I am not at all confident that large
> files would necessarily work.  It would depend on the particulars of 
> the file.
> This is really something that should be fixed in the driver, but I'd 
> be more
> comfortable fixing it with a large example file to work with.

Thanks Frank for taking the time to actually look at the code... So, 
there's no reason in theory why MEM and NITF can't support files larger 
than 4GB (assuming a 64-bit OS in the case of MEM), but right now the 
drivers are not capable of doing that.

I would think that there's a particular need for the NITF support to be 
fixed up - I've seen several NITF files larger than 4GB - though I don't 
unfortunately have any to hand that I could lend you for debugging. 
Anyone out there have one they could lend to Frank? Or does someone have 
NITF creation software that could be used to make such a file?

Cheers,

Sy



From warmerdam at pobox.com  Wed Feb 28 17:49:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E5FD2A.9040208@perkins.net>
References: <45E5D263.5000804@missouri.edu> <45E5D625.3060002@perkins.net>
	<45E5E3E5.2020805@pobox.com> <45E5FD2A.9040208@perkins.net>
Message-ID: <45E60709.7040006@pobox.com>

Simon Perkins wrote:
> Thanks Frank for taking the time to actually look at the code... So, 
> there's no reason in theory why MEM and NITF can't support files larger 
> than 4GB (assuming a 64-bit OS in the case of MEM), but right now the 
> drivers are not capable of doing that.

Simon,

Right.  I might be able to fix and test the MEM driver assuming my AMD64
has enough swap space.  If you want to file a bug on it, that would be
helpful.

> I would think that there's a particular need for the NITF support to be 
> fixed up - I've seen several NITF files larger than 4GB - though I don't 
> unfortunately have any to hand that I could lend you for debugging. 
> Anyone out there have one they could lend to Frank? Or does someone have 
> NITF creation software that could be used to make such a file?

Well, in fact the changes aren't that complicated.  If you, or someone else
has a large NITF file that doesn't currently work, I could prepare a fix, and
then have you test it.  No need to transport/release the file to me.  But
the first step is to figure out if it currently works for the large file.
In fact, for an image file with one image that starts before the 4GB (or
perhaps 2GB) mark, but extends past the 4GB mark it would likely still work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Wed Feb 28 17:59:13 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Format limitations in 64-bit architecture
In-Reply-To: <45E60709.7040006@pobox.com>
References: <45E5D263.5000804@missouri.edu> <45E5D625.3060002@perkins.net>
	<45E5E3E5.2020805@pobox.com> <45E5FD2A.9040208@perkins.net>
	<45E60709.7040006@pobox.com>
Message-ID: <45E60941.7010505@perkins.net>

Frank Warmerdam wrote:
> Right.  I might be able to fix and test the MEM driver assuming my AMD64
> has enough swap space.  If you want to file a bug on it, that would be
> helpful.

Done.


>> I would think that there's a particular need for the NITF support to 
>> be fixed up - I've seen several NITF files larger than 4GB - though I 
>> don't unfortunately have any to hand that I could lend you for 
>> debugging. Anyone out there have one they could lend to Frank? Or 
>> does someone have NITF creation software that could be used to make 
>> such a file?
>
> Well, in fact the changes aren't that complicated.  If you, or someone 
> else
> has a large NITF file that doesn't currently work, I could prepare a 
> fix, and
> then have you test it.  No need to transport/release the file to me.  But
> the first step is to figure out if it currently works for the large file.
> In fact, for an image file with one image that starts before the 4GB (or
> perhaps 2GB) mark, but extends past the 4GB mark it would likely still 
> work.

If nobody else gets to it, I might see if we have some software that 
writes larger than 4GB NITF files and try to construct one. But if 
anyone out there has an actual real 5GB image with georeferencing, etc, 
that would probably be preferable.

Cheers,

Sy


From matt.gregory at oregonstate.edu  Wed Feb 28 20:05:04 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] custom reclass/remap using gdal_translate
In-Reply-To: <45DB6F15.50102@pobox.com>
References: <EA53646512D0ED48AC1673034B861EE0017EA7A8@thuja>
	<45DB6F15.50102@pobox.com>
Message-ID: <EA53646512D0ED48AC1673034B861EE0017EA810@thuja>

Frank Warmerdam wrote:
> Matthew Gregory wrote:
> > 1) Is there a standard algorithm for determining the min/max of a 
> > window within an image.  I assume that you could get there by 
> > iterating over the tiles that make up that window, but I didn't know

> > if there was a more elegant way that I was overlooking.
> 
> Matthew,
> 
> One approach to this would be to create a virtual file for 
> that subwindow and then compute the min/max on that.
> 
> eg.
> gdal_translate -of VRT -srcwin 100 200 500 400 in.tif out.vrt 
> gdalinfo -stats out.vrt

Forgive yet another newbie question, but I'd like to calculate the
statistics of the subwindow at run time, so I've taken the following
approach:

1) Construct the VRT XML (e.g. as in gdal_vrtmerge.py) which allows for
the subwindow specification.

2) Re-open the VRT file using gdal.Open() and calculate the pertinent
statistics, e.g.

  vrt_ds = gdal.Open(out_file)
  vrtBand = vrt_ds.GetRasterBand(1)
  (vrtMin, vrtMax) = vrtBand.ComputeRasterMinMax()
  vrtNoData = vrt_ds.GetRasterBand(1).GetNoDataValue()

(Note: I realize this approach is no different than running the
gdal_translate utility as Frank has suggested and then doing step #2.)

What I'm wondering is if there is a easier way of getting the
subwindow's statistics without going through the process of creating the
intermediate VRT file.  Is there some way of doing this through using
VRTDriver.Create()?  Sorry to be so dense ...

thanks, matt

Matt Gregory
Faculty Research Assistant
Department of Forest Science
Oregon State University
Phone : (541) 758-7778
Email : matt.gregory@oregonstate.edu


From warmerdam at pobox.com  Wed Feb 28 20:27:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] custom reclass/remap using gdal_translate
In-Reply-To: <EA53646512D0ED48AC1673034B861EE0017EA810@thuja>
References: <EA53646512D0ED48AC1673034B861EE0017EA7A8@thuja>
	<45DB6F15.50102@pobox.com>
	<EA53646512D0ED48AC1673034B861EE0017EA810@thuja>
Message-ID: <45E62BFC.7060201@pobox.com>

Gregory, Matthew wrote:
> What I'm wondering is if there is a easier way of getting the
> subwindow's statistics without going through the process of creating the
> intermediate VRT file.  Is there some way of doing this through using
> VRTDriver.Create()?  Sorry to be so dense ...
> 
> thanks, matt

Matt,

I'm not sure that it is a lot easier, but you can construct the XML
as a string, and pass the XML to gdal.Open() without writing to an
intermediate file.  I am not aware of a way of using a bunch of
calls to create a subwindowed VRT dataset ... certain not any way that
is less complicated than constructing the XML yourself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


