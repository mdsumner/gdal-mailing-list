From sean.gillies at gmail.com  Mon Feb  1 07:18:18 2021
From: sean.gillies at gmail.com (Sean Gillies)
Date: Mon, 1 Feb 2021 08:18:18 -0700
Subject: [gdal-dev] Requiring RFCs for new format drivers
Message-ID: <CAOodmJp_izMVTxoAZpkn7_7Lmwd+kW-SZoBPKsOh2DP5d7g26A@mail.gmail.com>

Hi all,

Buried in a recent thread are some comments in support of requiring a GDAL
RFC for new format drivers. On the surface it seems one way to keep GDAL's
mass and surface area from growing without bounds. It's also been pointed
out that at least one of GDAL's formats was never intended for use.
Requiring RFCs might also help prevent proliferation of needlessly
different web API clients and JSON formats. Or it might not, I'd love to
read what others have to say about this.

Requiring an RFC could hurt developers, though, since pay for format driver
development (and other new features) is what's largely been subsidizing bug
fixes and general maintenance of the project. I'm sure that others of you
can think of consequences and side effects that I haven't.

I suppose we should probably have an RFC about RFCs if this idea isn't
immediately shot down. Kurt Schwehr has made a template for what a driver
RFC might look like and I suggest we discuss that as well.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210201/80aef4ba/attachment.html>

From sean.gillies at gmail.com  Mon Feb  1 07:45:39 2021
From: sean.gillies at gmail.com (Sean Gillies)
Date: Mon, 1 Feb 2021 08:45:39 -0700
Subject: [gdal-dev] zarr driver PR
Message-ID: <CAOodmJo_sJs0o5OPi=N2MfwtDkRzjAtUvwW+BZa7HnH9xSUWZA@mail.gmail.com>

Hi all,

Also deep in our recent long thread about removing drivers from GDAL is
mention of a new PR for a "zarr" driver.

https://github.com/OSGeo/gdal/pull/3411

I'd like to see more discussion of the scope of this work and plans for
future development and support before a zarr driver is added to GDAL.

Is the zarr driver not going to support version 2 of the zarr spec? I that
v2 would be difficult to implement as a GDAL driver as it is extremely
flexible and extensible. For example, I've written custom compressor and
storage for use in a project at work and can't imagine how a driver written
in C++ would understand it.

Is the zarr driver based on
https://zarr-specs.readthedocs.io/en/core-protocol-v3.0-dev/protocol/core/v3.0.html?
That work seems not yet finished. Is it premature to add a driver to GDAL
for a format that isn't yet specified and may yet be changed? Or should we
expect only minor changes at this point?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210201/e8c17c94/attachment.html>

From david.brochart at gmail.com  Mon Feb  1 08:14:06 2021
From: david.brochart at gmail.com (David Brochart)
Date: Mon, 1 Feb 2021 17:14:06 +0100
Subject: [gdal-dev] zarr driver PR
In-Reply-To: <CAOodmJo_sJs0o5OPi=N2MfwtDkRzjAtUvwW+BZa7HnH9xSUWZA@mail.gmail.com>
References: <CAOodmJo_sJs0o5OPi=N2MfwtDkRzjAtUvwW+BZa7HnH9xSUWZA@mail.gmail.com>
Message-ID: <CAEv-cC6te=4Gu_Fz2jkRLPKs4vMMcxEouHSkb7BF4A_HHCGV8A@mail.gmail.com>

Hi Sean,

Thanks for starting this discussion. Let me first say that the PR is still
in an early stage, and that more work is needed upstream to make it fully
usable, so definitely not ready for merging yet.
Although it is not clearly mentioned, xtensor-zarr supports Zarr v3 as well
as a part of Zarr v2, actually the test in the PR is based on version 2.
But as you mentioned, supporting all the features that are allowed with
zarr-python is not going to be possible in C++. We will most likely limit
the range of possibilities, and improve the driver based on interest in
some features. For instance, this PR starts very modestly by not supporting
any geo-metadata.
In any case, this PR is nothing more than a work in progress at the moment,
without any formal scope. I'm interested in getting feedback from the GDAL
community, and if there is interest we can work on formalizing this work
through an RFC, as it seems it is going to be required for new drivers.

On Mon, Feb 1, 2021 at 4:46 PM Sean Gillies <sean.gillies at gmail.com> wrote:

> Hi all,
>
> Also deep in our recent long thread about removing drivers from GDAL is
> mention of a new PR for a "zarr" driver.
>
> https://github.com/OSGeo/gdal/pull/3411
>
> I'd like to see more discussion of the scope of this work and plans for
> future development and support before a zarr driver is added to GDAL.
>
> Is the zarr driver not going to support version 2 of the zarr spec? I that
> v2 would be difficult to implement as a GDAL driver as it is extremely
> flexible and extensible. For example, I've written custom compressor and
> storage for use in a project at work and can't imagine how a driver written
> in C++ would understand it.
>
> Is the zarr driver based on
> https://zarr-specs.readthedocs.io/en/core-protocol-v3.0-dev/protocol/core/v3.0.html?
> That work seems not yet finished. Is it premature to add a driver to GDAL
> for a format that isn't yet specified and may yet be changed? Or should we
> expect only minor changes at this point?
>
> --
> Sean Gillies
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210201/3b7af023/attachment.html>

From howard at hobu.co  Mon Feb  1 08:16:20 2021
From: howard at hobu.co (Howard Butler)
Date: Mon, 1 Feb 2021 10:16:20 -0600
Subject: [gdal-dev] Requiring RFCs for new format drivers
In-Reply-To: <CAOodmJp_izMVTxoAZpkn7_7Lmwd+kW-SZoBPKsOh2DP5d7g26A@mail.gmail.com>
References: <CAOodmJp_izMVTxoAZpkn7_7Lmwd+kW-SZoBPKsOh2DP5d7g26A@mail.gmail.com>
Message-ID: <986F0357-2820-4B19-80F8-BF3AFC67B8CB@hobu.co>



> On Feb 1, 2021, at 9:18 AM, Sean Gillies <sean.gillies at gmail.com> wrote:
> 
> Hi all,
> 
> Buried in a recent thread are some comments in support of requiring a GDAL RFC for new format drivers. On the surface it seems one way to keep GDAL's mass and surface area from growing without bounds. It's also been pointed out that at least one of GDAL's formats was never intended for use. Requiring RFCs might also help prevent proliferation of needlessly different web API clients and JSON formats. Or it might not, I'd love to read what others have to say about this.

The thing about requiring RFCs for new drivers that is most attractive to me is the RFC will need to make the case why a proposed driver is needed. It will be a hard sell for an organization's case to be something to the effect of "it's in my business interest to do so" without assurance that the tail of updates, enhancements, and maintenance of such a thing is also provided. That assurance was implicit when someone like Even or Frank was coordinating most of the driver development while they were the primary active maintainers. As GDAL moves to a different maintenance model, that assurance can no longer be implicit.

I think Even's original thread about removing a few drivers focused on kicking out "format orphans" instead of targeting "not supported by the community orphans." The former might be tougher to boot due to the community clamoring for their usage, but a common scenario is binary-only-SDK -driven format that aren't actively or adequately tested in GDAL's CI loop.

> Requiring an RFC could hurt developers, though, since pay for format driver development (and other new features) is what's largely been subsidizing bug fixes and general maintenance of the project. I'm sure that others of you can think of consequences and side effects that I haven't.

It is something they should build into their cost, but other projects' requirements have similar documentation needs.

> I suppose we should probably have an RFC about RFCs if this idea isn't immediately shot down. Kurt Schwehr has made a template for what a driver RFC might look like and I suggest we discuss that as well.

A simple motion would likely be sufficient. Requiring an RFC to add a new environment variable, on the other hand...

Howard


From schwehr at gmail.com  Mon Feb  1 09:06:20 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 1 Feb 2021 09:06:20 -0800
Subject: [gdal-dev] Requiring RFCs for new format drivers
In-Reply-To: <986F0357-2820-4B19-80F8-BF3AFC67B8CB@hobu.co>
References: <CAOodmJp_izMVTxoAZpkn7_7Lmwd+kW-SZoBPKsOh2DP5d7g26A@mail.gmail.com>
 <986F0357-2820-4B19-80F8-BF3AFC67B8CB@hobu.co>
Message-ID: <CACmBxysc7SDpnH946_h8MdqLJQ5E71H7hShYLqvp-QgDKSapOQ@mail.gmail.com>

Please shoot holes through my draft.  I wrote it in just a couple of
minutes and I haven't really even re-read it myself.  Whatever the template
contents, I think it should end up in md format so that any old text editor
can edit it.  Google docs was just what was easy to mash some text into one
spot.  I added a couple new things at the bottom just now.

https://docs.google.com/document/d/e/2PACX-1vTtIU3WJw0APd7fXqfGVAYrBQGgURIzizb9MiXCI1trkj4PxOBZmz9o-Ne_5P7zkymM7dPjVZOCHBXl/pub

On Mon, Feb 1, 2021 at 8:16 AM Howard Butler <howard at hobu.co> wrote:

>
>
> > On Feb 1, 2021, at 9:18 AM, Sean Gillies <sean.gillies at gmail.com> wrote:
> >
> > Hi all,
> >
> > Buried in a recent thread are some comments in support of requiring a
> GDAL RFC for new format drivers. On the surface it seems one way to keep
> GDAL's mass and surface area from growing without bounds. It's also been
> pointed out that at least one of GDAL's formats was never intended for use.
> Requiring RFCs might also help prevent proliferation of needlessly
> different web API clients and JSON formats. Or it might not, I'd love to
> read what others have to say about this.
>
> The thing about requiring RFCs for new drivers that is most attractive to
> me is the RFC will need to make the case why a proposed driver is needed.
> It will be a hard sell for an organization's case to be something to the
> effect of "it's in my business interest to do so" without assurance that
> the tail of updates, enhancements, and maintenance of such a thing is also
> provided. That assurance was implicit when someone like Even or Frank was
> coordinating most of the driver development while they were the primary
> active maintainers. As GDAL moves to a different maintenance model, that
> assurance can no longer be implicit.
>
> I think Even's original thread about removing a few drivers focused on
> kicking out "format orphans" instead of targeting "not supported by the
> community orphans." The former might be tougher to boot due to the
> community clamoring for their usage, but a common scenario is
> binary-only-SDK -driven format that aren't actively or adequately tested in
> GDAL's CI loop.
>
> > Requiring an RFC could hurt developers, though, since pay for format
> driver development (and other new features) is what's largely been
> subsidizing bug fixes and general maintenance of the project. I'm sure that
> others of you can think of consequences and side effects that I haven't.
>
> It is something they should build into their cost, but other projects'
> requirements have similar documentation needs.
>
> > I suppose we should probably have an RFC about RFCs if this idea isn't
> immediately shot down. Kurt Schwehr has made a template for what a driver
> RFC might look like and I suggest we discuss that as well.
>
> A simple motion would likely be sufficient. Requiring an RFC to add a new
> environment variable, on the other hand...
>
> Howard
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210201/5735ff53/attachment-0001.html>

From ivan.lucena at outlook.com  Mon Feb  1 09:27:33 2021
From: ivan.lucena at outlook.com (Ivan Lucena)
Date: Mon, 1 Feb 2021 17:27:33 +0000
Subject: [gdal-dev] zarr driver PR
In-Reply-To: <CAEv-cC6te=4Gu_Fz2jkRLPKs4vMMcxEouHSkb7BF4A_HHCGV8A@mail.gmail.com>
References: <CAOodmJo_sJs0o5OPi=N2MfwtDkRzjAtUvwW+BZa7HnH9xSUWZA@mail.gmail.com>,
 <CAEv-cC6te=4Gu_Fz2jkRLPKs4vMMcxEouHSkb7BF4A_HHCGV8A@mail.gmail.com>
Message-ID: <MN2PR04MB569395C96B33FAB5963E163AF2B69@MN2PR04MB5693.namprd04.prod.outlook.com>

Hi Sean,

I started playing with the idea of building a Zarr driver a year ago. I haven't done much at that time and haven't touched it since.

Even though I have developed a bunch of drivers in C++, with various forms of compression,  since the beginning it occurred to me that the Zarr driver could be better off if developed in Python.

Just an idea.

Good luck,

Ivan

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of David Brochart <david.brochart at gmail.com>
Sent: Monday, February 1, 2021 11:14 AM
To: Sean Gillies <sean.gillies at gmail.com>
Cc: Gdal Dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] zarr driver PR

Hi Sean,

Thanks for starting this discussion. Let me first say that the PR is still in an early stage, and that more work is needed upstream to make it fully usable, so definitely not ready for merging yet.
Although it is not clearly mentioned, xtensor-zarr supports Zarr v3 as well as a part of Zarr v2, actually the test in the PR is based on version 2. But as you mentioned, supporting all the features that are allowed with zarr-python is not going to be possible in C++. We will most likely limit the range of possibilities, and improve the driver based on interest in some features. For instance, this PR starts very modestly by not supporting any geo-metadata.
In any case, this PR is nothing more than a work in progress at the moment, without any formal scope. I'm interested in getting feedback from the GDAL community, and if there is interest we can work on formalizing this work through an RFC, as it seems it is going to be required for new drivers.

On Mon, Feb 1, 2021 at 4:46 PM Sean Gillies <sean.gillies at gmail.com<mailto:sean.gillies at gmail.com>> wrote:
Hi all,

Also deep in our recent long thread about removing drivers from GDAL is mention of a new PR for a "zarr" driver.

https://github.com/OSGeo/gdal/pull/3411

I'd like to see more discussion of the scope of this work and plans for future development and support before a zarr driver is added to GDAL.

Is the zarr driver not going to support version 2 of the zarr spec? I that v2 would be difficult to implement as a GDAL driver as it is extremely flexible and extensible. For example, I've written custom compressor and storage for use in a project at work and can't imagine how a driver written in C++ would understand it.

Is the zarr driver based on https://zarr-specs.readthedocs.io/en/core-protocol-v3.0-dev/protocol/core/v3.0.html? That work seems not yet finished. Is it premature to add a driver to GDAL for a format that isn't yet specified and may yet be changed? Or should we expect only minor changes at this point?

--
Sean Gillies
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210201/79402b1f/attachment.html>

From pteroglossus at pm.me  Mon Feb  1 11:11:31 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Mon, 01 Feb 2021 19:11:31 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
Message-ID: <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>

Dear list,

I'm not a developer, I would just like to use the maps I have on Linux and stay away from Windows.

I've been trying to import some raster maps into GRASS. Problem is, they are .ecw files.

If I understood well, GDAL does not support this format natively and has to be built including specific modules to allow working with these files.

I tried following the instructions here and everything went fine until the "make" instruction which gives an endless loop.

I could provide you with the output of the "make" command but the resulting file is over 100 Kb.

Could you point me in the right direction please?

Thanks,
Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210201/e4a744b8/attachment.html>

From jmckenna at gatewaygeomatics.com  Mon Feb  1 11:24:40 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 1 Feb 2021 15:24:40 -0400
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
Message-ID: <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>

Hi Kevin,

Some quick thoughts for your case:

- you can paste your large commands and code at https://pastebin.com/ 
and then share that link with this mailing list discussion in your 
message (for images, similar with https://pasteboard.co/ )

- the best source of build help is the GDAL "BuildHints" page 
(https://trac.osgeo.org/gdal/wiki/BuildHints) and specifically for ECW: 
https://trac.osgeo.org/gdal/wiki/ECW Although the hints can be old and 
for various versions, I find following those pages a "gold mine" of 
information.

-jeff



-- 
Jeff McKenna
GatewayGeo: MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/



On 2021-02-01 3:11 p.m., Pteroglossus via gdal-dev wrote:
> Dear list,
> 
> I'm not a developer, I would just like to use the maps I have on Linux 
> and stay away from Windows.
> 
> I've been trying to import some raster maps into GRASS. Problem is, they 
> are .ecw files.
> 
> If I understood well, GDAL does not support this format natively and has 
> to be built including specific modules to allow working with these files.
> 
> I tried following the instructions here and everything went fine until 
> the "make" instruction which gives an endless loop.
> 
> I could provide you with the output of the "make" command but the 
> resulting file is over 100 Kb.
> 
> Could you point me in the right direction please?
> 
> Thanks,
> Kevin
> 
> 
> 


From rdmailings at duif.net  Mon Feb  1 11:46:30 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Mon, 1 Feb 2021 20:46:30 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
Message-ID: <69997c59-f0ca-efdf-be9d-52eff32587e3@duif.net>

On 2/1/21 8:24 PM, Jeff McKenna wrote:
> Hi Kevin,
> 
> Some quick thoughts for your case:
> 
> - you can paste your large commands and code at https://pastebin.com/ and then share that link with this mailing list discussion in your message (for images, similar with https://pasteboard.co/ )
> 
> - the best source of build help is the GDAL "BuildHints" page (https://trac.osgeo.org/gdal/wiki/BuildHints) and specifically for ECW: https://trac.osgeo.org/gdal/wiki/ECW Although the hints can be old and for various versions, I find following those pages a "gold mine" of information.

Yep, either jump through this hoops (given you are not a developer: it IS possible: I compiled GDAL 3.1.4 with ecw recently on Debian testing).

OR you ask a Windooz friend to copy your ecw's to geotiff once (using osgeo4w of fme if available) and throw the ecw out of the window(s).

Regards,

Richard Duivenvoorde

PS if you want to try, these are my notes, pick and replace:

# ecw lib talks about gdal 3.1... so
cd /home/richard/git/gdal/gdal
git checkout release/3.1
# ecw lib downloaded (shows up in ~/hexagon) moved to:
/home/richard/bin/ecw5.5.0
# in prefix pah: /home/richard/bin/gdal
./configure --prefix=/home/richard/bin/gdal --with-ecw=/home/richard/bin/ecw5.5.0   # so header will be found
# this one is needed so the linker (ld) can find the ecw so's:
export LD_LIBRARY_PATH=/home/richard/bin/ecw5.5.0/lib/x64/release:$LD_LIBRARY_PATH
# hitting issue with linker: https://github.com/OSGeo/gdal/issues/2657
# you have to rename the x64 dir and symlink the cpp11abi/x64 dir
make -j8
make install
export PATH=/home/richard/bin/gdal/bin:$PATH
export LD_LIBRARY_PATH=/home/richard/bin/gdal/lib:/home/richard/bin/ecw5.5.0/lib/x64/release:$LD_LIBRARY_PATH
export GDAL_DATA=/home/richard/bin/gdal/share/gdal
gdalinfo --version
# GDAL 3.1.4, released 2020/10/20  YES !!
gdalinfo --formats|grep ECW
ECW -raster- (rw+): ERDAS Compressed Wavelets (SDK 5.5)
JP2ECW -raster,vector- (rw+v): ERDAS JPEG2000 (SDK 5.5)


From pteroglossus at pm.me  Mon Feb  1 12:21:28 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Mon, 01 Feb 2021 20:21:28 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
Message-ID: <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>

Hi Jeff, Richard,

Thanks for your quick replies.

I did come across this page:"https://trac.osgeo.org/gdal/wiki/ECW" but as you said, the info is outdated and therefore confusing when you don't really know what you're doing...

The instructions here (https://gist.githubusercontent.com/aborruso/eed6895278edd320db6631b33d10836e/raw/53e1bd297625804a2120ba341ae6ae3e6023a6f8/gdal_ecw.sh) seemed similar but clearer and I was able to complete most of the steps, including these two:

- "/.configure" : https://pastebin.com/UGsKP7ts
- "make clean": https://pastebin.com/M8P87CVq


My problem started there at the last step:

- "make": https://pastebin.com/6bMjhcyk

I have the feeling it might be fixable with some knowledge of the building process, which I suspect you may have.


If I messed up too badly, I'll delete everything and start over using Richard's notes.

Regards,

Kevin


??????? Original Message ???????
On Monday, February 1, 2021 4:24 PM, Jeff McKenna <jmckenna at gatewaygeomatics.com> wrote:

> Hi Kevin,
>
> Some quick thoughts for your case:
>
> -   you can paste your large commands and code at https://pastebin.com/
>     and then share that link with this mailing list discussion in your
>     message (for images, similar with https://pasteboard.co/ )
>
> -   the best source of build help is the GDAL "BuildHints" page
>     (https://trac.osgeo.org/gdal/wiki/BuildHints) and specifically for ECW:
>     https://trac.osgeo.org/gdal/wiki/ECW Although the hints can be old and
>     for various versions, I find following those pages a "gold mine" of
>     information.
>
>     -jeff
>
>     --
>     Jeff McKenna
>     GatewayGeo: MapServer Consulting and Training Services
>     co-founder of FOSS4G
>     http://gatewaygeo.com/
>
>     On 2021-02-01 3:11 p.m., Pteroglossus via gdal-dev wrote:
>
>
> > Dear list,
> > I'm not a developer, I would just like to use the maps I have on Linux
> > and stay away from Windows.
> > I've been trying to import some raster maps into GRASS. Problem is, they
> > are .ecw files.
> > If I understood well, GDAL does not support this format natively and has
> > to be built including specific modules to allow working with these files.
> > I tried following the instructions here and everything went fine until
> > the "make" instruction which gives an endless loop.
> > I could provide you with the output of the "make" command but the
> > resulting file is over 100 Kb.
> > Could you point me in the right direction please?
> > Thanks,
> > Kevin
>
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



From rdmailings at duif.net  Tue Feb  2 00:35:21 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 2 Feb 2021 09:35:21 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
Message-ID: <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>

On 2/1/21 9:21 PM, Pteroglossus via gdal-dev wrote:

> My problem started there at the last step:
> 
> - "make": https://pastebin.com/6bMjhcyk

Not sure which ecw sdk you downloaded, but when I did the notes there told me to use GDAL 3.1, and from your output you are using 2.3.1?

>From the ERDAS_ECW_JPEG2000_SDK.pdf:

Version 5.5 Update 2
Released: September 2020
Updated public GDAL driver to be compatible with 5.5 release and GDAL 3.1.

Not sure if it should compile with 2.3.1 also but because of that I just 'git cloned' the gdal repo and then 'git checkout release/3.1' to get to the 3.1 sources...

Good luck

Regards,

Richard Duivenvoorde




From richard.greenwood at gmail.com  Tue Feb  2 13:12:06 2021
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 2 Feb 2021 14:12:06 -0700
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
Message-ID: <CAHBySPZq_e3WjKF6cUTyL3zW6swTzQ+bpROfh6pt9bdqqLtiqQ@mail.gmail.com>

I used this docker image successfully on a SID file and it claims support
for ECW format also:
https://hub.docker.com/r/klokantech/gdal/
And then, as Richard Duivenvoorde suggested, convert your ECW to a geotiff.
A geotiff with YCbCr JPEG compression and overviews can be nearly as small
as a SID or ECW and in my experience is better performing.

Rich


On Tue, Feb 2, 2021 at 1:35 AM Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 2/1/21 9:21 PM, Pteroglossus via gdal-dev wrote:
>
> > My problem started there at the last step:
> >
> > - "make": https://pastebin.com/6bMjhcyk
>
> Not sure which ecw sdk you downloaded, but when I did the notes there told
> me to use GDAL 3.1, and from your output you are using 2.3.1?
>
> From the ERDAS_ECW_JPEG2000_SDK.pdf:
>
> Version 5.5 Update 2
> Released: September 2020
> Updated public GDAL driver to be compatible with 5.5 release and GDAL 3.1.
>
> Not sure if it should compile with 2.3.1 also but because of that I just
> 'git cloned' the gdal repo and then 'git checkout release/3.1' to get to
> the 3.1 sources...
>
> Good luck
>
> Regards,
>
> Richard Duivenvoorde
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210202/1af98588/attachment.html>

From anntulliani at aol.com  Tue Feb  2 15:11:10 2021
From: anntulliani at aol.com (Ann Tulliani)
Date: Tue, 2 Feb 2021 23:11:10 +0000 (UTC)
Subject: [gdal-dev] no such function: ST_Line_Interpolate_Point when
 Spatialite and GDAL are installed and quite up-to-date
References: <1503203620.1240700.1612307470315.ref@mail.yahoo.com>
Message-ID: <1503203620.1240700.1612307470315@mail.yahoo.com>

Dear list members,
I have been trying to use the GDAL tools from within QGIS, more specifically the "Points Along Lines" tool, to find the lines' midpoints in line shapefiles. However, regardless of which file I try, I keep getting this error:


GDAL command output:ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(SELECT ST_Line_Interpolate_Point(geometry, 0.5) AS geometry,* FROM "myshapefile"):
no such function: ST_Line_Interpolate_Point


Searching online, the only reference to that problem is a 5 years old thread from this very list:?https://lists.osgeo.org/pipermail/gdal-dev/2015-May/041800.html. Following it, the first obvious thing to suspect is that Spatialite is either missing or outdated. However, neither seem to be the case in my 64bits Ubuntu 18.04 system:

> sudo apt-get install -y spatialite-binReading package lists... DoneBuilding dependency tree? ? ? ?Reading state information... Donespatialite-bin is already the newest version (4.3.0-2build1).

For reference, it seems that GDAL version being used is 3.0.2 and PROJ version is 6.2.1:

QGIS version: 3.10.1-A Coru?aQGIS code revision: 1e6b1a3eQt version: 5.12.6GDAL version: 3.0.2GEOS version: 3.7.2-CAPI-1.11.2 b55d2125PROJ version: Rel. 6.2.1, November 1st, 2019

I am at a loss: if both GDAL and Spatialite are present in my system and up-to-date enough to contain "ST_Line_Interpolate_Point", how could I solve the mentioned issue?
Thanks!
Ann Tulliani

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210202/c7922f4b/attachment.html>

From andrew.bell.ia at gmail.com  Tue Feb  2 15:19:51 2021
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Tue, 2 Feb 2021 18:19:51 -0500
Subject: [gdal-dev] no such function: ST_Line_Interpolate_Point when
 Spatialite and GDAL are installed and quite up-to-date
In-Reply-To: <1503203620.1240700.1612307470315@mail.yahoo.com>
References: <1503203620.1240700.1612307470315.ref@mail.yahoo.com>
 <1503203620.1240700.1612307470315@mail.yahoo.com>
Message-ID: <CACJ51z3E+kj_mjxga+cqwOoD_MaPF9ZuXRjNCS_0QfcK3VPVSw@mail.gmail.com>

Have you successfully used Spatialite at all?

What is your platform? How did you verify Spatialite is installed?

On Tue, Feb 2, 2021, 6:13 PM Ann Tulliani via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Dear list members,
>
> I have been trying to use the GDAL tools from within QGIS, more
> specifically the "Points Along Lines" tool, to find the lines' midpoints in
> line shapefiles. However, regardless of which file I try, I keep getting
> this error:
>
>
> GDAL command output:
> ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(SELECT
> ST_Line_Interpolate_Point(geometry, 0.5) AS geometry,* FROM "myshapefile"):
>
> no such function: ST_Line_Interpolate_Point
>
>
>
> Searching online, the only reference to that problem is a 5 years old
> thread from this very list:
> https://lists.osgeo.org/pipermail/gdal-dev/2015-May/041800.html.
> Following it, the first obvious thing to suspect is that Spatialite is
> either missing or outdated. However, neither seem to be the case in my
> 64bits Ubuntu 18.04 system:
>
> > sudo apt-get install -y spatialite-bin
> Reading package lists... Done
> Building dependency tree
> Reading state information... Done
> spatialite-bin is already the newest version (4.3.0-2build1).
>
>
> For reference, it seems that GDAL version being used is 3.0.2 and PROJ
> version is 6.2.1:
>
> QGIS version: 3.10.1-A Coru?a
> QGIS code revision: 1e6b1a3e
> Qt version: 5.12.6
> GDAL version: 3.0.2
> GEOS version: 3.7.2-CAPI-1.11.2 b55d2125
> PROJ version: Rel. 6.2.1, November 1st, 2019
>
>
> I am at a loss: if both GDAL and Spatialite are present in my system and
> up-to-date enough to contain "ST_Line_Interpolate_Point", how could I
> solve the mentioned issue?
>
> Thanks!
>
> Ann Tulliani
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210202/2cbfa862/attachment-0001.html>

From anntulliani at aol.com  Tue Feb  2 15:57:18 2021
From: anntulliani at aol.com (Ann Tulliani)
Date: Tue, 2 Feb 2021 23:57:18 +0000 (UTC)
Subject: [gdal-dev] no such function: ST_Line_Interpolate_Point when
 Spatialite and GDAL are installed and quite up-to-date
In-Reply-To: <CACJ51z3E+kj_mjxga+cqwOoD_MaPF9ZuXRjNCS_0QfcK3VPVSw@mail.gmail.com>
References: <1503203620.1240700.1612307470315.ref@mail.yahoo.com>
 <1503203620.1240700.1612307470315@mail.yahoo.com>
 <CACJ51z3E+kj_mjxga+cqwOoD_MaPF9ZuXRjNCS_0QfcK3VPVSw@mail.gmail.com>
Message-ID: <2007313767.1242228.1612310238510@mail.yahoo.com>

Hi Andrew, thanks for your reply.

> What is your platform?
In my original email, I mentioned that I am working in a 64 bits Ubuntu 18.04 system, as said calling ST_Line_Interpolate via QGIS GDAL tools, with:
QGIS version: 3.10.1-A Coru?aQGIS code revision: 1e6b1a3eQt version: 5.12.6GDAL version: 3.0.2GEOS version: 3.7.2-CAPI-1.11.2 b55d2125PROJ version: Rel. 6.2.1, November 1st, 2019
What other platform details would be helpful for me to detail?
> How did you verify Spatialite is installed?
In my original email, I printed the output of the message saying which version I have installed when I try intalling/upgrading. But also, if I run "spatialite" in a terminal, I get the output:
SpatiaLite version ..: 4.3.0a Supported Extensions: - 'VirtualShape' [direct Shapefile access] - 'VirtualDbf' [direct DBF access] - 'VirtualXL' [direct XLS access] - 'VirtualText' [direct CSV/TXT access] - 'VirtualNetwork' [Dijkstra shortest path] - 'RTree' [Spatial Index - R*Tree] - 'MbrCache' [Spatial Index - MBR cache] - 'VirtualSpatialIndex' [R*Tree metahandler] - 'VirtualElementary' [ElemGeoms metahandler] - 'VirtualXPath' [XML Path Language - XPath] - 'VirtualFDO' [FDO-OGR interoperability] - 'VirtualGPKG' [OGC GeoPackage interoperability] - 'VirtualBBox' [BoundingBox tables] - 'SpatiaLite' [Spatial SQL - OGC]PROJ.4 version ......: Rel. 7.0.0, March 1st, 2020GEOS version ........: 3.8.0-CAPI-1.13.1?TARGET CPU ..........: x86_64-linux-gnuthe SPATIAL_REF_SYS table already contains some row(s)SQLite version ......: 3.22.0Enter ".help" for instructionsSQLite version 3.22.0 2018-01-22 18:45:57Enter ".help" for instructionsEnter SQL statements terminated with a ";"
> Have you successfully used Spatialite at all?If you mean directly using Spatialite, in the past, yes. Recently in this system, did not have to (just tools I think rely on it).
Thanks again,
Ann Tulliani





-----Original Message-----
From: Andrew Bell <andrew.bell.ia at gmail.com>
To: Ann Tulliani <anntulliani at aol.com>
Cc: gdal dev <gdal-dev at lists.osgeo.org>
Sent: Tue, Feb 2, 2021 6:19 pm
Subject: Re: [gdal-dev] no such function: ST_Line_Interpolate_Point when Spatialite and GDAL are installed and quite up-to-date

Have you successfully used Spatialite at all?
What is your platform? How did you verify Spatialite is installed?
On Tue, Feb 2, 2021, 6:13 PM Ann Tulliani via gdal-dev <gdal-dev at lists.osgeo.org> wrote:

Dear list members,
I have been trying to use the GDAL tools from within QGIS, more specifically the "Points Along Lines" tool, to find the lines' midpoints in line shapefiles. However, regardless of which file I try, I keep getting this error:


GDAL command output:ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(SELECT ST_Line_Interpolate_Point(geometry, 0.5) AS geometry,* FROM "myshapefile"):
no such function: ST_Line_Interpolate_Point


Searching online, the only reference to that problem is a 5 years old thread from this very list:?https://lists.osgeo.org/pipermail/gdal-dev/2015-May/041800.html. Following it, the first obvious thing to suspect is that Spatialite is either missing or outdated. However, neither seem to be the case in my 64bits Ubuntu 18.04 system:

> sudo apt-get install -y spatialite-binReading package lists... DoneBuilding dependency tree? ? ? ?Reading state information... Donespatialite-bin is already the newest version (4.3.0-2build1).

For reference, it seems that GDAL version being used is 3.0.2 and PROJ version is 6.2.1:

QGIS version: 3.10.1-A Coru?aQGIS code revision: 1e6b1a3eQt version: 5.12.6GDAL version: 3.0.2GEOS version: 3.7.2-CAPI-1.11.2 b55d2125PROJ version: Rel. 6.2.1, November 1st, 2019

I am at a loss: if both GDAL and Spatialite are present in my system and up-to-date enough to contain "ST_Line_Interpolate_Point", how could I solve the mentioned issue?
Thanks!
Ann Tulliani

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210202/040030a2/attachment.html>

From pteroglossus at pm.me  Tue Feb  2 17:20:04 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Wed, 03 Feb 2021 01:20:04 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
Message-ID: <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>

I did my best to thoroughly follow Richard's notes using the 5.5.0 ECW SDK and gdal 3.1.4... No luck, the "configure" command now fails halfway it seems, although it did work for my first try:

https://pastebin.com/rSZfPRS0

As much as I would like to take on the challenge of compiling GDAL with ECW, I'm in way over my head here! I think I'm gonna go for the conversion to GeoTiff as suggested.

Thanks a lot for your help!

Regards,
Kevin


??????? Original Message ???????
On Tuesday, February 2, 2021 5:35 AM, Richard Duivenvoorde <rdmailings at duif.net> wrote:

> On 2/1/21 9:21 PM, Pteroglossus via gdal-dev wrote:
>
> > My problem started there at the last step:
> >
> > -   "make": https://pastebin.com/6bMjhcyk
>
> Not sure which ecw sdk you downloaded, but when I did the notes there told me to use GDAL 3.1, and from your output you are using 2.3.1?
>
> From the ERDAS_ECW_JPEG2000_SDK.pdf:
>
> Version 5.5 Update 2
> Released: September 2020
> Updated public GDAL driver to be compatible with 5.5 release and GDAL 3.1.
>
> Not sure if it should compile with 2.3.1 also but because of that I just 'git cloned' the gdal repo and then 'git checkout release/3.1' to get to the 3.1 sources...
>
> Good luck
>
> Regards,
>
> Richard Duivenvoorde
>
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



From rdmailings at duif.net  Wed Feb  3 01:28:26 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Wed, 3 Feb 2021 10:28:26 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
Message-ID: <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>

On 2/3/21 2:20 AM, Pteroglossus via gdal-dev wrote:
> I did my best to thoroughly follow Richard's notes using the 5.5.0 ECW SDK and gdal 3.1.4... No luck, the "configure" command now fails halfway it seems, although it did work for my first try:
> 
> https://pastebin.com/rSZfPRS0

Looks like you are missing a recent libproj and/or libproj-dev or so...
You are almost there, after the configure it is just 'make install' :-)

Working with the docker image, is also a good alternative! But... you have to make yourself a little familiar with Docker then...

Regards,

Richard

From jukka.rahkonen at maanmittauslaitos.fi  Wed Feb  3 01:56:20 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 3 Feb 2021 02:56:20 -0700 (MST)
Subject: [gdal-dev] no such function: ST_Line_Interpolate_Point when
 Spatialite and GDAL are installed and quite up-to-date
In-Reply-To: <1503203620.1240700.1612307470315@mail.yahoo.com>
References: <1503203620.1240700.1612307470315@mail.yahoo.com>
Message-ID: <1612346180026-0.post@n6.nabble.com>

Hi,

This is how you can test with ogrinfo if the function is available for you.
Use just any vector data source instead of "point.jml". Test data is
generated by the SQL but ogr2ogr requires some datasource (I have been
wondering if it could be dummy.dum or something like that for a dummy
format).

ogrinfo -dialect sqlite -sql "select
ST_Line_Interpolate_Point(ST_GeomFromText('LINESTRING (0 0,1 1)'), 0.1)"
point.jml
Had to open data source read-only.
INFO: Open of `point.jml'
      using driver `JML' successful.
      
Layer name: SELECT
Geometry: Unknown (any)
Feature Count: 1
Extent: (0.100000, 0.100000) - (0.100000, 0.100000)
Layer SRS WKT:
(unknown)
Geometry Column = ST_Line_Interpolate_Point(ST_GeomFromText('LINESTRING (0
0,1 1)'), 0.1)
OGRFeature(SELECT):0
  POINT (0.1 0.1)

Having high enough Spatialite version does not guarantee that
ST_Line_Interpolate_Point is available. As you can see from
http://www.gaia-gis.it/gaia-sins/spatialite-sql-latest.html that function is
based on GEOS. For getting GEOS based functions into use Spatialite must
have been compiled with GEOS, and that GEOS version must have the support.
Spatialite has functions for checking various things about GEOS. As an
example my GEOS version is

ogrinfo -dialect sqlite -sql "select geos_version()" point.jml
Had to open data source read-only.
INFO: Open of `point.jml'
      using driver `JML' successful.
        
Layer name: SELECT
Geometry: None
Feature Count: 1
Layer SRS WKT:
(unknown)
geos_version(): String (0.0)
OGRFeature(SELECT):0
  geos_version() (String) = 3.9.0-CAPI-1.14.1

-Jukka Rahkonen-



GDAL - Dev mailing list wrote
> Dear list members,
> I have been trying to use the GDAL tools from within QGIS, more
> specifically the "Points Along Lines" tool, to find the lines' midpoints
> in line shapefiles. However, regardless of which file I try, I keep
> getting this error:
> 
> 
> GDAL command output:ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(SELECT
> ST_Line_Interpolate_Point(geometry, 0.5) AS geometry,* FROM
> "myshapefile"):
> no such function: ST_Line_Interpolate_Point
> 
> 
> Searching online, the only reference to that problem is a 5 years old
> thread from this very
> list:?https://lists.osgeo.org/pipermail/gdal-dev/2015-May/041800.html.
> Following it, the first obvious thing to suspect is that Spatialite is
> either missing or outdated. However, neither seem to be the case in my
> 64bits Ubuntu 18.04 system:
> 
>> sudo apt-get install -y spatialite-binReading package lists...
>> DoneBuilding dependency tree? ? ? ?Reading state information...
>> Donespatialite-bin is already the newest version (4.3.0-2build1).
> 
> For reference, it seems that GDAL version being used is 3.0.2 and PROJ
> version is 6.2.1:
> 
> QGIS version: 3.10.1-A Coru?aQGIS code revision: 1e6b1a3eQt version:
> 5.12.6GDAL version: 3.0.2GEOS version: 3.7.2-CAPI-1.11.2 b55d2125PROJ
> version: Rel. 6.2.1, November 1st, 2019
> 
> I am at a loss: if both GDAL and Spatialite are present in my system and
> up-to-date enough to contain "ST_Line_Interpolate_Point", how could I
> solve the mentioned issue?
> Thanks!
> Ann Tulliani
> 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From pteroglossus at pm.me  Wed Feb  3 16:55:29 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Thu, 04 Feb 2021 00:55:29 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <cHH5yvlxgJhxl8aoSbtd41OuF5Wc0Snyy3TCuPAyqiDuEY6fwvT2NbX9sJd07CGDkanQ4iTJgqboU3vj2wVELP7y6f9yEYCaZ88fVLfsbqM=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
Message-ID: <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>

Installing libproj-dev did the trick, I was able to run the config file, rename/copy the necessary folders in the SDK, then "make"/ "make install", encountered some issues during the process but:

k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --version
GDAL 3.1.4, released 2020/10/20
k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --formats|grep ECW
  ECW -raster- (rw+): ERDAS Compressed Wavelets (SDK 5.5)
  JP2ECW -raster,vector- (rw+v): ERDAS JPEG2000 (SDK 5.5)

This means it worked, doesn't it? :)

One last question if you don't mind, now that GDAL is installed and configured, should I simply reinstall GRASS using apt-get and import my layers and voil?? Or is there any step I should take beforehand?

Cheers,
Kevin

Sent with ProtonMail Secure Email.

??????? Original Message ???????
On Wednesday, February 3, 2021 6:28 AM, Richard Duivenvoorde <rdmailings at duif.net> wrote:

> On 2/3/21 2:20 AM, Pteroglossus via gdal-dev wrote:
>
> > I did my best to thoroughly follow Richard's notes using the 5.5.0 ECW SDK and gdal 3.1.4... No luck, the "configure" command now fails halfway it seems, although it did work for my first try:
> > https://pastebin.com/rSZfPRS0
>
> Looks like you are missing a recent libproj and/or libproj-dev or so...
> You are almost there, after the configure it is just 'make install' :-)
>
> Working with the docker image, is also a good alternative! But... you have to make yourself a little familiar with Docker then...
>
> Regards,
>
> Richard



From rdmailings at duif.net  Thu Feb  4 00:28:18 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 4 Feb 2021 09:28:18 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
Message-ID: <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>

On 2/4/21 1:55 AM, pteroglossus at pm.me wrote:
> Installing libproj-dev did the trick, I was able to run the config file, rename/copy the necessary folders in the SDK, then "make"/ "make install", encountered some issues during the process but:
> 
> k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --version
> GDAL 3.1.4, released 2020/10/20
> k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --formats|grep ECW
>   ECW -raster- (rw+): ERDAS Compressed Wavelets (SDK 5.5)
>   JP2ECW -raster,vector- (rw+v): ERDAS JPEG2000 (SDK 5.5)
> 
> This means it worked, doesn't it? :)

YES!!!  You compile GDAL with ecw yourself! congrats!

But.. we installed it in a place where you can only use it (at this moment) via cli (so you can use all the commands IF you set the PATH and LD_LIBRARY_PATH).
So now you are able to use gdal_translate to make geotiffs from you ecw...

> One last question if you don't mind, now that GDAL is installed and configured, should I simply reinstall GRASS using apt-get and import my layers and voil?? Or is there any step I should take beforehand?

Nope, THAT is another question. Probably better answered by some Linux/Grass guru's...

My guess: if you would install GRASS via apt-get, your linux distro will automagically also install GDAL (from the distro, without ecw) next to it. AND GRASS is probably linked to that... so will use the gdal installed in /usr/lib/ or so

Not sure if you can fool GRASS to use your own compiled GDAL (by creating some symbolic links, OR by installing your GDAL in the normal /usr/lib), that depends on which version GRASS is actually build against (I think...)
My guess is that you have an older distro, which does not have GDAL 3.1 (because you started of compiling GDAL 2.4.x or so) so the symbolic links will not work (I think...).

So others? Is there a way (other then let this user also compile GRASS against his newly compiled GDAL 3.1)?

Regards,

Richard Duivenvoorde


From neteler at osgeo.org  Thu Feb  4 01:25:02 2021
From: neteler at osgeo.org (Markus Neteler)
Date: Thu, 4 Feb 2021 10:25:02 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <OiXZhj9t4_MS6BU1gjvt_NvGv_f0kuAXBXRD-Jc3I9BD3QfE1dAPzSEV3bv-dJW7BS6GBfYaMrAY8U1NQ8Qad9NjS93Nb8oeT1S9crqna6U=@pm.me>
 <OJMDFmEdZQsCvJzifSLZxfNvh-MJZ0hMf7zPssVwwGWiLoKkFbYEs3uwOFdtuMqkmUw7LhDwH8nY12O5m9RFnOZYJcOJRe4j0mq-sxWHZP0=@pm.me>
 <hmUEtzmLNsyBq0zUGIs4cq6LWk4RPfm-7cQXynCq0n_ObAqQltebor32LGX4xt_rxOHblU7qOqLnG39ulLlnzfDpS8GvgcBda4GljSk2H5g=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
Message-ID: <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>

On Thu, Feb 4, 2021 at 9:28 AM Richard Duivenvoorde <rdmailings at duif.net> wrote:
> On 2/4/21 1:55 AM, pteroglossus at pm.me wrote:
> > Installing libproj-dev did the trick, I was able to run the config file, rename/copy the necessary folders in the SDK, then "make"/ "make install", encountered some issues during the process but:
> >
> > k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --version
> > GDAL 3.1.4, released 2020/10/20
> > k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --formats|grep ECW
> >   ECW -raster- (rw+): ERDAS Compressed Wavelets (SDK 5.5)
> >   JP2ECW -raster,vector- (rw+v): ERDAS JPEG2000 (SDK 5.5)
> >
> > This means it worked, doesn't it? :)
>
> YES!!!  You compile GDAL with ecw yourself! congrats!
...
> Not sure if you can fool GRASS to use your own compiled GDAL (by creating some symbolic links, OR by installing your GDAL in the normal /usr/lib), that depends on which version GRASS is actually build against (I think...)
> My guess is that you have an older distro, which does not have GDAL 3.1 (because you started of compiling GDAL 2.4.x or so) so the symbolic links will not work (I think...).
>
> So others? Is there a way (other then let this user also compile GRASS against his newly compiled GDAL 3.1)?

I'd recommend to just compile also GRASS GIS locally (which is rather
easy) to avoid a dependency hell.

See (unsorted):

- Debian: https://grasswiki.osgeo.org/wiki/Compile_and_Install#GRASS_7_on_Debian_Buster
- Ubuntu: https://grasswiki.osgeo.org/wiki/Compile_and_Install_Ubuntu#Quick_instructions
- Fedora: https://grasswiki.osgeo.org/wiki/Compile_and_Install#GRASS_GIS_7_on_Fedora
- Linux Mint: https://grasswiki.osgeo.org/wiki/Compile_and_Install#Linux_Mint
- Windows:https://grasswiki.osgeo.org/wiki/Compile_and_Install#MS-Windows
- MacOS: https://grasswiki.osgeo.org/wiki/Compile_and_Install#macOS

etc. on that Wiki page.

Most of them are copy-paste instructions.

HTH,
Markus

From jan.heckman at gmail.com  Thu Feb  4 05:03:58 2021
From: jan.heckman at gmail.com (Jan Heckman)
Date: Thu, 4 Feb 2021 14:03:58 +0100
Subject: [gdal-dev] Fwd: ogr2ogr crash attempting to drop table in filegdb
In-Reply-To: <CAKMUAtDRF5GCW9FFrDG96dcJdwbE3zNqRis3XXpZQC3cd35sQA@mail.gmail.com>
References: <CAKMUAtDRF5GCW9FFrDG96dcJdwbE3zNqRis3XXpZQC3cd35sQA@mail.gmail.com>
Message-ID: <CAKMUAtA-ACZ1CDvbqzoBzkJDBdsV7THTW-FJO_pCz0eyqG+o-A@mail.gmail.com>

Dear list,

About the filegdb driver
Attempting:
ogr2ogr -f FILEGDB test.gdb bag2101.gdb -update -sql "drop table
standplaats"
crashed ogr2ogr (obtained from gisinternals.com, gdal-302-1928-x64-core.msi
etc) with a heap corruption. (VS: Unhandled exception at 0x00007FFE1C6EF099
(ntdll.dll) in ogr2ogr.exe: 0xC0000374: A heap has been corrupted
(parameters: 0x00007FFE1C7587F0).)
The table does get dropped.

The table was inserted from a shapefile using:
ogr2ogr --config shape_encoding "UTF-8" --config FGDB_BULK_LOAD YES -append
-f "filegdb" bag2101.gdb sta.shp -nln standplaats -sql "select identifica
as identificatie,hfdadresid as hoofdadresid,* from sta", and displays
properly in Qgis.

So the filegdb driver appears to be properly installed.

Also,  I could not get column renaming to work. Using dialects filegdb and
OGR SQL,
ogr2ogr -f FILEGDB test.gdb test.gdb -update -sql "alter table vbo_actueel
rename column oppervlakt to oppervlakte"  -dialect "FILEGDB"
gives ERROR 1: Failed at executing 'alter table vbo_actueel rename column
oppervlakt to oppervlakte' (An invalid SQL statement was used.);
using -dialect SQLITE, I get
ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(Alter table vbo_actueel rename
column oppervlakt to oppervlakte): no such table: vbo_actueel
whereas ogrinfo clearly states the table exists.

I am trying to clear my arcgis ties preferring Qgis and for reasons of
cost, but sometimes I do need to provide data in filegdb format.

Thanks in advance for any advice,
Jan

PS. I do not add the shapefile for reference, since that version of this
mail got "rejected by the owner" for being about 1500 bytes in size.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210204/52922412/attachment.html>

From pteroglossus at pm.me  Thu Feb  4 12:00:27 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Thu, 04 Feb 2021 20:00:27 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
Message-ID: <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>

Richard, thanks you for your support, I would not have done it without you!

I tried to convert one of my files as suggested:

k at k-GS60-6QE:/media/k/Data/Data/Perso/Carto$ gdal_translate -of GTiff SCAN50_2012.ecw SCAN50_2012.tif
Input file size is 75000, 95000
0...10...20...30...40...50...60...70...80...90...100 - done.

It turned my 2.3GB .ecw into a ...21.4GB .tif. There must be some arguments to be added in order to reduce the size of the output file. Any ideas?


As for installing GRASS GIS, I suspected it wouldn't be as easy as a normal apt-get install...

Thanks Markus for your input, I read the Quick_instructions for Ubuntu 20.04, and it seems doable. One question though, I won't install GDAL as a prerequisite as instructed because I've compiled it myself, right?

Therefore, I'm gonna need to tell the compiler to get GDAL from the folder it's been installed in. The only reference to GDAL in the guide, apart from the prerequisite install is:

# "configure" source code for local machine (checks for CPU type etc):
MYCFLAGS='-O2 -fPIC -fno-common -fexceptions -std=gnu99 -fstack-protector -m64'
#MYCXXFLAGS=''
MYLDFLAGS='-Wl,--no-undefined -Wl,-z,now'

LDFLAGS="$MYLDFLAGS" CFLAGS="$MYCFLAGS" CXXFLAGS="$MYCXXFLAGS" ./configure \
  --with-cxx \
  --enable-largefile \
  --with-proj --with-proj-share=/usr/share/proj \
  --with-gdal=/usr/bin/gdal-config \

I happen to have a "gdal-config" in /usr/bin/ but it must be a remnant of a previous install because the creation date is March 29th 2020. Should I change the argument to
"--with-gdal=/home/k/bin/gdal/gdal-3.1.4/bin/gdal-config" which is the location of the one I compiled?

Best,
Kevin

??????? Original Message ???????
On Thursday, February 4, 2021 6:25 AM, Markus Neteler <neteler at osgeo.org> wrote:

> On Thu, Feb 4, 2021 at 9:28 AM Richard Duivenvoorde rdmailings at duif.net wrote:
>
> > On 2/4/21 1:55 AM, pteroglossus at pm.me wrote:
> >
> > > Installing libproj-dev did the trick, I was able to run the config file, rename/copy the necessary folders in the SDK, then "make"/ "make install", encountered some issues during the process but:
> > > k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --version
> > > GDAL 3.1.4, released 2020/10/20
> > > k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --formats|grep ECW
> > > ECW -raster- (rw+): ERDAS Compressed Wavelets (SDK 5.5)
> > > JP2ECW -raster,vector- (rw+v): ERDAS JPEG2000 (SDK 5.5)
> > > This means it worked, doesn't it? :)
> >
> > YES!!! You compile GDAL with ecw yourself! congrats!
>
> ...
>
> > Not sure if you can fool GRASS to use your own compiled GDAL (by creating some symbolic links, OR by installing your GDAL in the normal /usr/lib), that depends on which version GRASS is actually build against (I think...)
> > My guess is that you have an older distro, which does not have GDAL 3.1 (because you started of compiling GDAL 2.4.x or so) so the symbolic links will not work (I think...).
> > So others? Is there a way (other then let this user also compile GRASS against his newly compiled GDAL 3.1)?
>
> I'd recommend to just compile also GRASS GIS locally (which is rather
> easy) to avoid a dependency hell.
>
> See (unsorted):
>
> -   Debian: https://grasswiki.osgeo.org/wiki/Compile_and_Install#GRASS_7_on_Debian_Buster
> -   Ubuntu: https://grasswiki.osgeo.org/wiki/Compile_and_Install_Ubuntu#Quick_instructions
> -   Fedora: https://grasswiki.osgeo.org/wiki/Compile_and_Install#GRASS_GIS_7_on_Fedora
> -   Linux Mint: https://grasswiki.osgeo.org/wiki/Compile_and_Install#Linux_Mint
> -   Windows:https://grasswiki.osgeo.org/wiki/Compile_and_Install#MS-Windows
> -   MacOS: https://grasswiki.osgeo.org/wiki/Compile_and_Install#macOS
>
>     etc. on that Wiki page.
>
>     Most of them are copy-paste instructions.
>
>     HTH,
>     Markus
>



From lars.schylberg at blixtmail.se  Thu Feb  4 12:13:28 2021
From: lars.schylberg at blixtmail.se (Lars Schylberg)
Date: Thu, 4 Feb 2021 21:13:28 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
Message-ID: <f1740512-c755-f5c9-630e-31ba928c8d40@blixtmail.se>

To reduce size this guide is still good: 
http://blog.cleverelephant.ca/2015/02/geotiff-compression-for-dummies.html

/Lars S.

Den 2021-02-04 kl. 21:00, skrev Pteroglossus via gdal-dev:
> Richard, thanks you for your support, I would not have done it without you!
>
> I tried to convert one of my files as suggested:
>
> k at k-GS60-6QE:/media/k/Data/Data/Perso/Carto$ gdal_translate -of GTiff SCAN50_2012.ecw SCAN50_2012.tif
> Input file size is 75000, 95000
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> It turned my 2.3GB .ecw into a ...21.4GB .tif. There must be some arguments to be added in order to reduce the size of the output file. Any ideas?
>
>
> As for installing GRASS GIS, I suspected it wouldn't be as easy as a normal apt-get install...
>
> Thanks Markus for your input, I read the Quick_instructions for Ubuntu 20.04, and it seems doable. One question though, I won't install GDAL as a prerequisite as instructed because I've compiled it myself, right?
>
> Therefore, I'm gonna need to tell the compiler to get GDAL from the folder it's been installed in. The only reference to GDAL in the guide, apart from the prerequisite install is:
>
> # "configure" source code for local machine (checks for CPU type etc):
> MYCFLAGS='-O2 -fPIC -fno-common -fexceptions -std=gnu99 -fstack-protector -m64'
> #MYCXXFLAGS=''
> MYLDFLAGS='-Wl,--no-undefined -Wl,-z,now'
>
> LDFLAGS="$MYLDFLAGS" CFLAGS="$MYCFLAGS" CXXFLAGS="$MYCXXFLAGS" ./configure \
>    --with-cxx \
>    --enable-largefile \
>    --with-proj --with-proj-share=/usr/share/proj \
>    --with-gdal=/usr/bin/gdal-config \
>
> I happen to have a "gdal-config" in /usr/bin/ but it must be a remnant of a previous install because the creation date is March 29th 2020. Should I change the argument to
> "--with-gdal=/home/k/bin/gdal/gdal-3.1.4/bin/gdal-config" which is the location of the one I compiled?
>
> Best,
> Kevin
>
> ??????? Original Message ???????
> On Thursday, February 4, 2021 6:25 AM, Markus Neteler <neteler at osgeo.org> wrote:
>
>> On Thu, Feb 4, 2021 at 9:28 AM Richard Duivenvoorde rdmailings at duif.net wrote:
>>
>>> On 2/4/21 1:55 AM, pteroglossus at pm.me wrote:
>>>
>>>> Installing libproj-dev did the trick, I was able to run the config file, rename/copy the necessary folders in the SDK, then "make"/ "make install", encountered some issues during the process but:
>>>> k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --version
>>>> GDAL 3.1.4, released 2020/10/20
>>>> k at k-GS60-6QE:~/bin/gdal/gdal-3.1.4$ gdalinfo --formats|grep ECW
>>>> ECW -raster- (rw+): ERDAS Compressed Wavelets (SDK 5.5)
>>>> JP2ECW -raster,vector- (rw+v): ERDAS JPEG2000 (SDK 5.5)
>>>> This means it worked, doesn't it? :)
>>> YES!!! You compile GDAL with ecw yourself! congrats!
>> ...
>>
>>> Not sure if you can fool GRASS to use your own compiled GDAL (by creating some symbolic links, OR by installing your GDAL in the normal /usr/lib), that depends on which version GRASS is actually build against (I think...)
>>> My guess is that you have an older distro, which does not have GDAL 3.1 (because you started of compiling GDAL 2.4.x or so) so the symbolic links will not work (I think...).
>>> So others? Is there a way (other then let this user also compile GRASS against his newly compiled GDAL 3.1)?
>> I'd recommend to just compile also GRASS GIS locally (which is rather
>> easy) to avoid a dependency hell.
>>
>> See (unsorted):
>>
>> -   Debian: https://grasswiki.osgeo.org/wiki/Compile_and_Install#GRASS_7_on_Debian_Buster
>> -   Ubuntu: https://grasswiki.osgeo.org/wiki/Compile_and_Install_Ubuntu#Quick_instructions
>> -   Fedora: https://grasswiki.osgeo.org/wiki/Compile_and_Install#GRASS_GIS_7_on_Fedora
>> -   Linux Mint: https://grasswiki.osgeo.org/wiki/Compile_and_Install#Linux_Mint
>> -   Windows:https://grasswiki.osgeo.org/wiki/Compile_and_Install#MS-Windows
>> -   MacOS: https://grasswiki.osgeo.org/wiki/Compile_and_Install#macOS
>>
>>      etc. on that Wiki page.
>>
>>      Most of them are copy-paste instructions.
>>
>>      HTH,
>>      Markus
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From neteler at osgeo.org  Thu Feb  4 12:54:31 2021
From: neteler at osgeo.org (Markus Neteler)
Date: Thu, 4 Feb 2021 21:54:31 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
Message-ID: <CALFmHhuGj0P5ADurcwJcpDqhPjQS0VOtNhR5GFj0XuP6q5Dwgg@mail.gmail.com>

On Thu, Feb 4, 2021 at 9:01 PM <pteroglossus at pm.me> wrote:
...
> As for installing GRASS GIS, I suspected it wouldn't be as easy as a normal apt-get install...

It is as easy as that but in your "special" case you do not want to
default GDAL.

> Thanks Markus for your input, I read the Quick_instructions for Ubuntu 20.04, and it seems doable. One question though, I won't install GDAL as a prerequisite as instructed because I've compiled it myself, right?

That's right.

> Therefore, I'm gonna need to tell the compiler to get GDAL from the folder it's been installed in.

Well, if you installed GDAL with "make install" it should be there
(ok, probably in /usr/local/bin/ and not /usr/lib/).

> The only reference to GDAL in the guide, apart from the prerequisite install is:
>
> # "configure" source code for local machine (checks for CPU type etc):
> MYCFLAGS='-O2 -fPIC -fno-common -fexceptions -std=gnu99 -fstack-protector -m64'
> #MYCXXFLAGS=''
> MYLDFLAGS='-Wl,--no-undefined -Wl,-z,now'
>
> LDFLAGS="$MYLDFLAGS" CFLAGS="$MYCFLAGS" CXXFLAGS="$MYCXXFLAGS" ./configure \
>   --with-cxx \
>   --enable-largefile \
>   --with-proj --with-proj-share=/usr/share/proj \
>   --with-gdal=/usr/bin/gdal-config \
>
> I happen to have a "gdal-config" in /usr/bin/ but it must be a remnant of a previous install because the creation date is March 29th 2020. Should I change the argument to
> "--with-gdal=/home/k/bin/gdal/gdal-3.1.4/bin/gdal-config" which is the location of the one I compiled?

Yes, that should work.

Best,
Markus

From rdmailings at duif.net  Thu Feb  4 13:14:05 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 4 Feb 2021 22:14:05 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <CALFmHhuGj0P5ADurcwJcpDqhPjQS0VOtNhR5GFj0XuP6q5Dwgg@mail.gmail.com>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <553d46ef-8df7-e1c4-2ce7-3d483e5fc5f4@gatewaygeomatics.com>
 <8b9UW8nBsb51_nZ_EGtbk1P43Lehw0Ztoa-cnQxiwuDMcQ9Seiz3E14BI5JX2PrigZ9mXn8yzsjcIzVDRZLLecCMVuRzW6vrPkQ_4nOOZEg=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
 <CALFmHhuGj0P5ADurcwJcpDqhPjQS0VOtNhR5GFj0XuP6q5Dwgg@mail.gmail.com>
Message-ID: <413c9f2f-1d62-dd8c-10b9-046e80d0562c@duif.net>

On 2/4/21 9:54 PM, Markus Neteler wrote:
>> Therefore, I'm gonna need to tell the compiler to get GDAL from the folder it's been installed in.

> Well, if you installed GDAL with "make install" it should be there
> (ok, probably in /usr/local/bin/ and not /usr/lib/).

Well, as I did not know the plan was to use gdal for GRASS, I sent my personal instructions which installed a second/third version in the home dir of the user.

So better to re-install/configure gdal so it will install it in the 'standard linux dirs' as Markus points to,

So instead of 

./configure --prefix=/home/richard/bin/gdal --with-ecw=/home/richard/bin/ecw5.5.0 

you will just do

./configure --with-ecw=/home/richard/bin/ecw5.5.0 

The --prefix part is the place where all stuff will be installed with the 'make install'.

If your own gdal is in /usr/local/bin, grass will 'just find it' (as that is one of the normal paths the compile tools will search for needed libs).

I think (plz correct me if I'm wrong) it i safest to de-install the distro's gdal first...

(and another option is in the GRASS compile step to explicitly point to the 'prefix-'-path of your own gdal)

Hope this make sense,

Regards,

Richard Duivenvoorde

From skunkmyrddyn at gmail.com  Thu Feb  4 14:02:14 2021
From: skunkmyrddyn at gmail.com (Simon Shak)
Date: Thu, 4 Feb 2021 16:02:14 -0600
Subject: [gdal-dev] gdalbuildvrt files not recognized
Message-ID: <CAJuTQSGo+55h_p51i8DhFW3Qcviv_ieK1m=Uabi3CaWAfE_z4w@mail.gmail.com>

I'm working on using the gdal2tiles to convert a mosaic of ECW files into
TMS format.
Since the gdal2tiles command needs a single input file, I'm building VRT's
to use as the input.
I have gotten this to work on ons set of files.  When I do the same
commands for the second set of files, gdalbuildvrt seems confused on how to
handle things.

If I do it straight via commandline as:
for %f in (input\*.ecw) do (gdalbuildvrt output.vrt %f)
I wind up with a VRT with only one of the several hundred files in it.
if I try it using a file list by first:
for %f in (input\*.ecw) do (echo %f >> filelist.txt)
then:
gdalbuildvrt -input_file_list filelist.txt output.vrt
I get a bunch of errors saying:
ERROR 4: `ecw\N39.250W119.500N39.375W119.375.ecw ' not recognized as a
supported file format.
if I do a gdalinfo on the same file, it correctly indicates the file format
and metadata for the file. abd gdalinfo --formats does list ECW as an
installed file format.
I've also compared the gdalinfo between the two input datasets (the one
that worked and the one that doesn't) and they seem comparable.

I've uploaded a sample tile from the working and non-working set:
non-working:
https://www.dropbox.com/s/w980slpwm2ojsrr/N37.375W118.500N37.500W118.375.ecw?dl=0
working:
https://www.dropbox.com/s/ibludciald8z8p3/NAIP_FL_2017_N24.375W080.250N24.500W080.125.ecw?dl=0

Any help is appreciated.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210204/f46b8ad8/attachment.html>

From mateusz at loskot.net  Thu Feb  4 14:17:11 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 4 Feb 2021 23:17:11 +0100
Subject: [gdal-dev] gdalbuildvrt files not recognized
In-Reply-To: <CAJuTQSGo+55h_p51i8DhFW3Qcviv_ieK1m=Uabi3CaWAfE_z4w@mail.gmail.com>
References: <CAJuTQSGo+55h_p51i8DhFW3Qcviv_ieK1m=Uabi3CaWAfE_z4w@mail.gmail.com>
Message-ID: <CABUeae89uAs552tJemBSEnXq3LbAdpqQxZOLAzHndDM+FPDBwg@mail.gmail.com>

On Thu, 4 Feb 2021, 23:02 Simon Shak, <skunkmyrddyn at gmail.com> wrote:

>
> If I do it straight via commandline as:
> for %f in (input\*.ecw) do (gdalbuildvrt output.vrt %f)
> I wind up with a VRT with only one of the several hundred files in it.
>


Yes, that's expected, isn't it.

if I try it using a file list by first:
> for %f in (input\*.ecw) do (echo %f >> filelist.txt)
> then:
> gdalbuildvrt -input_file_list filelist.txt output.vrt
>

I assume you've read the docs, why don't you feed it with input/*.ecw
directly.

I get a bunch of errors saying:
> ERROR 4: `ecw\N39.250W119.500N39.375W119.375.ecw ' not recognized as a
> supported file format.
>

I'd verify content of the file is single file name per line. It may matter
the EOL is LF, not CRLF, can't remember.

ML
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210204/9a3dfe92/attachment-0001.html>

From skunkmyrddyn at gmail.com  Thu Feb  4 14:22:33 2021
From: skunkmyrddyn at gmail.com (Simon Shak)
Date: Thu, 4 Feb 2021 16:22:33 -0600
Subject: [gdal-dev] gdalbuildvrt files not recognized
In-Reply-To: <CABUeae89uAs552tJemBSEnXq3LbAdpqQxZOLAzHndDM+FPDBwg@mail.gmail.com>
References: <CAJuTQSGo+55h_p51i8DhFW3Qcviv_ieK1m=Uabi3CaWAfE_z4w@mail.gmail.com>
 <CABUeae89uAs552tJemBSEnXq3LbAdpqQxZOLAzHndDM+FPDBwg@mail.gmail.com>
Message-ID: <CAJuTQSH_85YOpBMeobvjfsNEC88i2KyjMSR1Cgb4rD1pfH8ELA@mail.gmail.com>

if I try to use wildcard:
gdalbuildvrt output.vrt input/*.ecw
I get the error:
ERROR 4: `input/*.ecw' does not exist in the file system, and is not
recognized as a supported dataset name.
it doesn't matter if I use / or \ or * or *.ecw or *.*.

My expectation based on the documentation and previous usage is that you
can keep adding to a vrt by subsequent commands with the same vrt file
unless you pass in the -overwrite option.

However, your suggestion to check the filelist.txt file has found the
error.  Somehow a trailing space was before the CRLF and caused it to not
recognize the file.
Thanks for the quick help.

On Thu, Feb 4, 2021 at 4:17 PM Mateusz Loskot <mateusz at loskot.net> wrote:

> On Thu, 4 Feb 2021, 23:02 Simon Shak, <skunkmyrddyn at gmail.com> wrote:
>
>>
>> If I do it straight via commandline as:
>> for %f in (input\*.ecw) do (gdalbuildvrt output.vrt %f)
>> I wind up with a VRT with only one of the several hundred files in it.
>>
>
>
> Yes, that's expected, isn't it.
>
> if I try it using a file list by first:
>> for %f in (input\*.ecw) do (echo %f >> filelist.txt)
>> then:
>> gdalbuildvrt -input_file_list filelist.txt output.vrt
>>
>
> I assume you've read the docs, why don't you feed it with input/*.ecw
> directly.
>
> I get a bunch of errors saying:
>> ERROR 4: `ecw\N39.250W119.500N39.375W119.375.ecw ' not recognized as a
>> supported file format.
>>
>
> I'd verify content of the file is single file name per line. It may matter
> the EOL is LF, not CRLF, can't remember.
>
> ML
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210204/552b8b8c/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb  5 02:43:34 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 5 Feb 2021 03:43:34 -0700 (MST)
Subject: [gdal-dev] Fwd: ogr2ogr crash attempting to drop table in
 filegdb
In-Reply-To: <CAKMUAtA-ACZ1CDvbqzoBzkJDBdsV7THTW-FJO_pCz0eyqG+o-A@mail.gmail.com>
References: <CAKMUAtA-ACZ1CDvbqzoBzkJDBdsV7THTW-FJO_pCz0eyqG+o-A@mail.gmail.com>
Message-ID: <1612521814991-0.post@n6.nabble.com>

Hi,

SQL in ogr2ogr is only for SELECT. For any other purpose use ogrinfo.
An example:

ogrinfo -sql "alter table point_p rename column test to foo" point.gpkg
-dialect sqlite

-Jukka Rahkonen-


janhec wrote
> Dear list,
> 
> About the filegdb driver
> Attempting:
> ogr2ogr -f FILEGDB test.gdb bag2101.gdb -update -sql "drop table
> standplaats"
> crashed ogr2ogr (obtained from gisinternals.com,
> gdal-302-1928-x64-core.msi
> etc) with a heap corruption. (VS: Unhandled exception at
> 0x00007FFE1C6EF099
> (ntdll.dll) in ogr2ogr.exe: 0xC0000374: A heap has been corrupted
> (parameters: 0x00007FFE1C7587F0).)
> The table does get dropped.
> 
> The table was inserted from a shapefile using:
> ogr2ogr --config shape_encoding "UTF-8" --config FGDB_BULK_LOAD YES
> -append
> -f "filegdb" bag2101.gdb sta.shp -nln standplaats -sql "select identifica
> as identificatie,hfdadresid as hoofdadresid,* from sta", and displays
> properly in Qgis.
> 
> So the filegdb driver appears to be properly installed.
> 
> Also,  I could not get column renaming to work. Using dialects filegdb and
> OGR SQL,
> ogr2ogr -f FILEGDB test.gdb test.gdb -update -sql "alter table vbo_actueel
> rename column oppervlakt to oppervlakte"  -dialect "FILEGDB"
> gives ERROR 1: Failed at executing 'alter table vbo_actueel rename column
> oppervlakt to oppervlakte' (An invalid SQL statement was used.);
> using -dialect SQLITE, I get
> ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(Alter table vbo_actueel
> rename
> column oppervlakt to oppervlakte): no such table: vbo_actueel
> whereas ogrinfo clearly states the table exists.
> 
> I am trying to clear my arcgis ties preferring Qgis and for reasons of
> cost, but sometimes I do need to provide data in filegdb format.
> 
> Thanks in advance for any advice,
> Jan
> 
> PS. I do not add the shapefile for reference, since that version of this
> mail got "rejected by the owner" for being about 1500 bytes in size.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mateusz at loskot.net  Fri Feb  5 02:52:47 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 5 Feb 2021 11:52:47 +0100
Subject: [gdal-dev] gdalbuildvrt files not recognized
In-Reply-To: <CAJuTQSH_85YOpBMeobvjfsNEC88i2KyjMSR1Cgb4rD1pfH8ELA@mail.gmail.com>
References: <CAJuTQSGo+55h_p51i8DhFW3Qcviv_ieK1m=Uabi3CaWAfE_z4w@mail.gmail.com>
 <CABUeae89uAs552tJemBSEnXq3LbAdpqQxZOLAzHndDM+FPDBwg@mail.gmail.com>
 <CAJuTQSH_85YOpBMeobvjfsNEC88i2KyjMSR1Cgb4rD1pfH8ELA@mail.gmail.com>
Message-ID: <CABUeae-=3Rj0nyt6eTXEQGUz8brndKQiAwdGq2secCmwcUndKA@mail.gmail.com>

On Thu, 4 Feb 2021 at 23:22, Simon Shak <skunkmyrddyn at gmail.com> wrote:
>
> However, your suggestion to check the filelist.txt file has found the error.  Somehow a trailing space was before the CRLF and caused it to not recognize the file.

There also could be an issue if there are spaces in file names.
I don't know if gdalbuildvrt can handle those on all platforms.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From jan.heckman at gmail.com  Fri Feb  5 02:59:11 2021
From: jan.heckman at gmail.com (Jan Heckman)
Date: Fri, 5 Feb 2021 11:59:11 +0100
Subject: [gdal-dev] Fwd: ogr2ogr crash attempting to drop table in
 filegdb
In-Reply-To: <1612521814991-0.post@n6.nabble.com>
References: <CAKMUAtA-ACZ1CDvbqzoBzkJDBdsV7THTW-FJO_pCz0eyqG+o-A@mail.gmail.com>
 <1612521814991-0.post@n6.nabble.com>
Message-ID: <CAKMUAtBVoNfjqNgC3vX5OcZyLnXdwcV++krpVSwXNAwOa9x+OQ@mail.gmail.com>

Hi Jukka,
Shame on me. Had just found out.
thanks,
Jan

On Fri, Feb 5, 2021 at 11:43 AM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
> SQL in ogr2ogr is only for SELECT. For any other purpose use ogrinfo.
> An example:
>
> ogrinfo -sql "alter table point_p rename column test to foo" point.gpkg
> -dialect sqlite
>
> -Jukka Rahkonen-
>
>
> janhec wrote
> > Dear list,
> >
> > About the filegdb driver
> > Attempting:
> > ogr2ogr -f FILEGDB test.gdb bag2101.gdb -update -sql "drop table
> > standplaats"
> > crashed ogr2ogr (obtained from gisinternals.com,
> > gdal-302-1928-x64-core.msi
> > etc) with a heap corruption. (VS: Unhandled exception at
> > 0x00007FFE1C6EF099
> > (ntdll.dll) in ogr2ogr.exe: 0xC0000374: A heap has been corrupted
> > (parameters: 0x00007FFE1C7587F0).)
> > The table does get dropped.
> >
> > The table was inserted from a shapefile using:
> > ogr2ogr --config shape_encoding "UTF-8" --config FGDB_BULK_LOAD YES
> > -append
> > -f "filegdb" bag2101.gdb sta.shp -nln standplaats -sql "select identifica
> > as identificatie,hfdadresid as hoofdadresid,* from sta", and displays
> > properly in Qgis.
> >
> > So the filegdb driver appears to be properly installed.
> >
> > Also,  I could not get column renaming to work. Using dialects filegdb
> and
> > OGR SQL,
> > ogr2ogr -f FILEGDB test.gdb test.gdb -update -sql "alter table
> vbo_actueel
> > rename column oppervlakt to oppervlakte"  -dialect "FILEGDB"
> > gives ERROR 1: Failed at executing 'alter table vbo_actueel rename column
> > oppervlakt to oppervlakte' (An invalid SQL statement was used.);
> > using -dialect SQLITE, I get
> > ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(Alter table vbo_actueel
> > rename
> > column oppervlakt to oppervlakte): no such table: vbo_actueel
> > whereas ogrinfo clearly states the table exists.
> >
> > I am trying to clear my arcgis ties preferring Qgis and for reasons of
> > cost, but sometimes I do need to provide data in filegdb format.
> >
> > Thanks in advance for any advice,
> > Jan
> >
> > PS. I do not add the shapefile for reference, since that version of this
> > mail got "rejected by the owner" for being about 1500 bytes in size.
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210205/1b8a1e23/attachment.html>

From jan.heckman at gmail.com  Fri Feb  5 06:10:06 2021
From: jan.heckman at gmail.com (Jan Heckman)
Date: Fri, 5 Feb 2021 15:10:06 +0100
Subject: [gdal-dev] Fwd: ogr2ogr crash attempting to drop table in
 filegdb
In-Reply-To: <1612521814991-0.post@n6.nabble.com>
References: <CAKMUAtA-ACZ1CDvbqzoBzkJDBdsV7THTW-FJO_pCz0eyqG+o-A@mail.gmail.com>
 <1612521814991-0.post@n6.nabble.com>
Message-ID: <CAKMUAtCV9huufbF6DB_e1SFpTPj=GdmdGAmRZNVwcbzmD5FpgQ@mail.gmail.com>

However, ogrinfo does no better.
It refuses to rename a table (filegdb) and crashes on drop table.
Jan

On Fri, Feb 5, 2021 at 11:43 AM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi,
>
> SQL in ogr2ogr is only for SELECT. For any other purpose use ogrinfo.
> An example:
>
> ogrinfo -sql "alter table point_p rename column test to foo" point.gpkg
> -dialect sqlite
>
> -Jukka Rahkonen-
>
>
> janhec wrote
> > Dear list,
> >
> > About the filegdb driver
> > Attempting:
> > ogr2ogr -f FILEGDB test.gdb bag2101.gdb -update -sql "drop table
> > standplaats"
> > crashed ogr2ogr (obtained from gisinternals.com,
> > gdal-302-1928-x64-core.msi
> > etc) with a heap corruption. (VS: Unhandled exception at
> > 0x00007FFE1C6EF099
> > (ntdll.dll) in ogr2ogr.exe: 0xC0000374: A heap has been corrupted
> > (parameters: 0x00007FFE1C7587F0).)
> > The table does get dropped.
> >
> > The table was inserted from a shapefile using:
> > ogr2ogr --config shape_encoding "UTF-8" --config FGDB_BULK_LOAD YES
> > -append
> > -f "filegdb" bag2101.gdb sta.shp -nln standplaats -sql "select identifica
> > as identificatie,hfdadresid as hoofdadresid,* from sta", and displays
> > properly in Qgis.
> >
> > So the filegdb driver appears to be properly installed.
> >
> > Also,  I could not get column renaming to work. Using dialects filegdb
> and
> > OGR SQL,
> > ogr2ogr -f FILEGDB test.gdb test.gdb -update -sql "alter table
> vbo_actueel
> > rename column oppervlakt to oppervlakte"  -dialect "FILEGDB"
> > gives ERROR 1: Failed at executing 'alter table vbo_actueel rename column
> > oppervlakt to oppervlakte' (An invalid SQL statement was used.);
> > using -dialect SQLITE, I get
> > ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(Alter table vbo_actueel
> > rename
> > column oppervlakt to oppervlakte): no such table: vbo_actueel
> > whereas ogrinfo clearly states the table exists.
> >
> > I am trying to clear my arcgis ties preferring Qgis and for reasons of
> > cost, but sometimes I do need to provide data in filegdb format.
> >
> > Thanks in advance for any advice,
> > Jan
> >
> > PS. I do not add the shapefile for reference, since that version of this
> > mail got "rejected by the owner" for being about 1500 bytes in size.
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210205/4d5100a1/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb  5 06:19:01 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 5 Feb 2021 14:19:01 +0000
Subject: [gdal-dev] Fwd: ogr2ogr crash attempting to drop table in
 filegdb
Message-ID: <ce0b814d66aa49b6aecc293cfa4e4e6f@maanmittauslaitos.fi>

Hi,

I think I would rename the columns and drop tables with other tools then, or create the database right from the beginning. If you write fgb you probably has some ESRI programs available. I guess you have already considered to switch to GeoPackage but you have some reason for not doing so.

-Jukka Rahkonen-

L?hett?j?: Jan Heckman <jan.heckman at gmail.com>
L?hetetty: perjantai 5. helmikuuta 2021 16.10
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] Fwd: ogr2ogr crash attempting to drop table in filegdb

However, ogrinfo does no better.
It refuses to rename a table (filegdb) and crashes on drop table.
Jan

On Fri, Feb 5, 2021 at 11:43 AM jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

SQL in ogr2ogr is only for SELECT. For any other purpose use ogrinfo.
An example:

ogrinfo -sql "alter table point_p rename column test to foo" point.gpkg
-dialect sqlite

-Jukka Rahkonen-


janhec wrote
> Dear list,
>
> About the filegdb driver
> Attempting:
> ogr2ogr -f FILEGDB test.gdb bag2101.gdb -update -sql "drop table
> standplaats"
> crashed ogr2ogr (obtained from gisinternals.com<http://gisinternals.com>,
> gdal-302-1928-x64-core.msi
> etc) with a heap corruption. (VS: Unhandled exception at
> 0x00007FFE1C6EF099
> (ntdll.dll) in ogr2ogr.exe: 0xC0000374: A heap has been corrupted
> (parameters: 0x00007FFE1C7587F0).)
> The table does get dropped.
>
> The table was inserted from a shapefile using:
> ogr2ogr --config shape_encoding "UTF-8" --config FGDB_BULK_LOAD YES
> -append
> -f "filegdb" bag2101.gdb sta.shp -nln standplaats -sql "select identifica
> as identificatie,hfdadresid as hoofdadresid,* from sta", and displays
> properly in Qgis.
>
> So the filegdb driver appears to be properly installed.
>
> Also,  I could not get column renaming to work. Using dialects filegdb and
> OGR SQL,
> ogr2ogr -f FILEGDB test.gdb test.gdb -update -sql "alter table vbo_actueel
> rename column oppervlakt to oppervlakte"  -dialect "FILEGDB"
> gives ERROR 1: Failed at executing 'alter table vbo_actueel rename column
> oppervlakt to oppervlakte' (An invalid SQL statement was used.);
> using -dialect SQLITE, I get
> ERROR 1: In ExecuteSQL(): sqlite3_prepare_v2(Alter table vbo_actueel
> rename
> column oppervlakt to oppervlakte): no such table: vbo_actueel
> whereas ogrinfo clearly states the table exists.
>
> I am trying to clear my arcgis ties preferring Qgis and for reasons of
> cost, but sometimes I do need to provide data in filegdb format.
>
> Thanks in advance for any advice,
> Jan
>
> PS. I do not add the shapefile for reference, since that version of this
> mail got "rejected by the owner" for being about 1500 bytes in size.
>
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo<mailto:gdal-dev at .osgeo>

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210205/c8593b3e/attachment.html>

From tebling at masuch.de  Fri Feb  5 06:39:49 2021
From: tebling at masuch.de (Karsten Tebling)
Date: Fri, 5 Feb 2021 15:39:49 +0100
Subject: [gdal-dev] how to use the -ct option in ogr2ogr
Message-ID: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>

Hello,

i'm struggling with how to use the -ct option in ogr2ogr and could need 
some help.

i copied a NTv2.gsb to osgeo4w64/share/proj and edited the proj.db by 
inserting a new row in the grid_transformation-table. using this 
transformation in qgis works. however when i try to use it in ogr2ogr 
with the same data i always get "failed to reproject feature (geometry 
probably out of source or destination srs). no known way to write 
feature with geometry 'none'". here is my code:

ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct 
"+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 
+x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift 
+grids=NTv2LSBB_LSA.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF 
punkte_25833.dxf punkte_31468.dxf

i'm using the latest qgis-ltr and osgeo4w shell

greetings

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb  5 07:05:16 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 5 Feb 2021 15:05:16 +0000
Subject: [gdal-dev] Problems with ArcGIS image server and WMS minidriver
Message-ID: <30a0970a06e04e07913cc85a6d587c77@maanmittauslaitos.fi>

Hi,

I almost managed to read data from this URL but not quite
https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer/exportImage?f=image&bbox=-3493783.68885884%2C3191895.64564654%2C5001886.25692533%2C11496874.31511627&size=512%2C512&imageSR=3857&bboxSR=3857&format=png8&layers=&transparent=false&time=

The service capabilities are coming from the server
https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer?f=json&pretty=true

However, GDAL requests do not work for me

gdalinfo "https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer?f=json&pretty=true"
or
gdal_translate "https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer?f=json&pretty=true" out.xml -of WMS

The error is
ERROR 4: `C:\TEMP\file.dat' not recognized as a supported file format.
For me it seems that file.dat was never written.
BTW, how on earth I can select the temporary folder? c:\temp is not good at all for my work computer.

Then I wrote the XML file by hand by using https://github.com/OSGeo/gdal/blob/master/gdal/frmts/wms/frmt_ags_arcgisonline.xml as an example. What fails now it that GDAL is generating request as

https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer/export?f=image&bbox=-3493783.68885884%2C3191895.64564654%2C5001886.25692533%2C11496874.31511627&size=512%2C512&imageSR=3857&bboxSR=3857&format=png8&layers=&transparent=false&time=

However, that server delivers data from /exportImage? , not from /export?.

Can anybody suggest a simple workaround for changing those urls to point into exportImage?


-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210205/5ed6a5ab/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb  5 07:13:21 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 5 Feb 2021 15:13:21 +0000
Subject: [gdal-dev] Problems with ArcGIS image server and WMS minidriver
Message-ID: <1a1a0d0735eb4b079639776baec52788@maanmittauslaitos.fi>

Hi,

Got it by having a look at https://github.com/OSGeo/gdal/blob/master/gdal/frmts/wms/minidriver_arcgis_server.cpp
// Assume map service if exportImage is not explicitly requested.

I just had to edit the server url in my XML file into this
<ServerUrl>https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer/exportImage?</ServerUrl>

-Jukka-


L?hett?j?: Rahkonen Jukka (MML)
L?hetetty: perjantai 5. helmikuuta 2021 17.04
Vastaanottaja: 'gdal-dev at lists.osgeo.org' <gdal-dev at lists.osgeo.org>
Aihe: Problems with ArcGIS image server and WMS minidriver

Hi,

I almost managed to read data from this URL but not quite
https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer/exportImage?f=image&bbox=-3493783.68885884%2C3191895.64564654%2C5001886.25692533%2C11496874.31511627&size=512%2C512&imageSR=3857&bboxSR=3857&format=png8&layers=&transparent=false&time=

The service capabilities are coming from the server
https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer?f=json&pretty=true

However, GDAL requests do not work for me

gdalinfo "https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer?f=json&pretty=true"
or
gdal_translate "https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer?f=json&pretty=true" out.xml -of WMS

The error is
ERROR 4: `C:\TEMP\file.dat' not recognized as a supported file format.
For me it seems that file.dat was never written.
BTW, how on earth I can select the temporary folder? c:\temp is not good at all for my work computer.

Then I wrote the XML file by hand by using https://github.com/OSGeo/gdal/blob/master/gdal/frmts/wms/frmt_ags_arcgisonline.xml as an example. What fails now it that GDAL is generating request as

https://image.discomap.eea.europa.eu/arcgis/rest/services/GioLand/HRIM_HR_TrueColour_2018/ImageServer/export?f=image&bbox=-3493783.68885884%2C3191895.64564654%2C5001886.25692533%2C11496874.31511627&size=512%2C512&imageSR=3857&bboxSR=3857&format=png8&layers=&transparent=false&time=

However, that server delivers data from /exportImage? , not from /export?.

Can anybody suggest a simple workaround for changing those urls to point into exportImage?


-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210205/270d9023/attachment.html>

From richard.greenwood at gmail.com  Fri Feb  5 07:58:06 2021
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Fri, 5 Feb 2021 08:58:06 -0700
Subject: [gdal-dev] gdalbuildvrt files not recognized
In-Reply-To: <CABUeae-=3Rj0nyt6eTXEQGUz8brndKQiAwdGq2secCmwcUndKA@mail.gmail.com>
References: <CAJuTQSGo+55h_p51i8DhFW3Qcviv_ieK1m=Uabi3CaWAfE_z4w@mail.gmail.com>
 <CABUeae89uAs552tJemBSEnXq3LbAdpqQxZOLAzHndDM+FPDBwg@mail.gmail.com>
 <CAJuTQSH_85YOpBMeobvjfsNEC88i2KyjMSR1Cgb4rD1pfH8ELA@mail.gmail.com>
 <CABUeae-=3Rj0nyt6eTXEQGUz8brndKQiAwdGq2secCmwcUndKA@mail.gmail.com>
Message-ID: <CAHBySPZ_zuc2FK-hKeagMkT6twhHQ_K6ckqj2dWBCqxmovw2JQ@mail.gmail.com>

I think that wildcard expansion has been an on and off problem with some of
the GDAL utilities on Windows. If you Google "gdalbuildvrt wildcard
expansion" you'll find at least three tickets, the most recent of which is:
https://github.com/OSGeo/gdal/issues/1749
I think the safest and easiest is to use a file list if you're on Windows.


On Fri, Feb 5, 2021 at 3:51 AM Mateusz Loskot <mateusz at loskot.net> wrote:

> On Thu, 4 Feb 2021 at 23:22, Simon Shak <skunkmyrddyn at gmail.com> wrote:
> >
> > However, your suggestion to check the filelist.txt file has found the
> error.  Somehow a trailing space was before the CRLF and caused it to not
> recognize the file.
>
> There also could be an issue if there are spaces in file names.
> I don't know if gdalbuildvrt can handle those on all platforms.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Richard W. Greenwood, PLS
www.greenwoodmap.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210205/0832fc7b/attachment.html>

From jrmorreale_ml at enoreth.net  Fri Feb  5 09:19:48 2021
From: jrmorreale_ml at enoreth.net (Jean-Roc Morreale (ml))
Date: Fri, 05 Feb 2021 18:19:48 +0100
Subject: [gdal-dev] gdalbuildvrt files not recognized
In-Reply-To: <CAHBySPZ_zuc2FK-hKeagMkT6twhHQ_K6ckqj2dWBCqxmovw2JQ@mail.gmail.com>
References: <CAJuTQSGo+55h_p51i8DhFW3Qcviv_ieK1m=Uabi3CaWAfE_z4w@mail.gmail.com>
 <CABUeae89uAs552tJemBSEnXq3LbAdpqQxZOLAzHndDM+FPDBwg@mail.gmail.com>
 <CAJuTQSH_85YOpBMeobvjfsNEC88i2KyjMSR1Cgb4rD1pfH8ELA@mail.gmail.com>
 <CABUeae-=3Rj0nyt6eTXEQGUz8brndKQiAwdGq2secCmwcUndKA@mail.gmail.com>
 <CAHBySPZ_zuc2FK-hKeagMkT6twhHQ_K6ckqj2dWBCqxmovw2JQ@mail.gmail.com>
Message-ID: <1b2533ce6548984b05af88014fef8fe6459c1a56.camel@enoreth.net>

Yep, it is easier to build your process with a listing step that you'll
feed to gdalbuildvrt. For example, on our win10 env it works with
tamas' gisinternal build with cmd but not with the conda build and cmd
:)

Le vendredi 05 f?vrier 2021 ? 08:58 -0700, Richard Greenwood a ?crit?:
> I think that wildcard expansion has been an on and off problem with
> some of the GDAL utilities on Windows. If you Google "gdalbuildvrt
> wildcard expansion" you'll find at least three tickets, the most
> recent of which is:
> https://github.com/OSGeo/gdal/issues/1749
> I think the safest and easiest is to use a file list if you're on
> Windows.
> 
> 
> On Fri, Feb 5, 2021 at 3:51 AM Mateusz Loskot <mateusz at loskot.net>
> wrote:
> > On Thu, 4 Feb 2021 at 23:22, Simon Shak <skunkmyrddyn at gmail.com>
> > wrote:
> > > 
> > > However, your suggestion to check the filelist.txt file has found
> > the error.? Somehow a trailing space was before the CRLF and caused
> > it to not recognize the file.
> > 
> > There also could be an issue if there are spaces in file names.
> > I don't know if gdalbuildvrt can handle those on all platforms.
> > 
> > Best regards,
> > -- 
> > Mateusz Loskot, http://mateusz.loskot.net
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



From pteroglossus at pm.me  Fri Feb  5 17:28:20 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Sat, 06 Feb 2021 01:28:20 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <f1740512-c755-f5c9-630e-31ba928c8d40@blixtmail.se>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
 <f1740512-c755-f5c9-630e-31ba928c8d40@blixtmail.se>
Message-ID: <3-bgHyzY6q2bQ1c7Jna8FfpCCJ8NzVNJD94FBfyMg8sxmlY7eTV9rKe8DaiHWj-7Rih_9f813FtdaAfKOvsm8UyFYKwRGPRlMgtL1Pdpj9Y=@pm.me>

Hi Lars, thanks you for the link. I was able to reduce the file's size to 1.2 GB. I should have reread Richard's early messages, he did mention JPEG compression and YCBCR colors. I used:

k at k-GS60-6QE:~$ gdal_translate -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR -co TILED=YES /media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw SCAN50_2012.tif
Input file size is 75000, 95000
0...10...20...30...40...50...60...70...80...90...100 - done.

I did however lose all the colors on the map after the conversion (see [screenshot](https://pasteboard.co/JN1JAYF.png)), and the drop in is quite flagrant.

Here is the output of gdalinfo for both files if it can help:

k at k-GS60-6QE:/media/k/Data/Data/Perso/Carto$ gdalinfo ./SCAN50_2012.ecw
Driver: ECW/ERDAS Compressed Wavelets (SDK 5.5)
Files: ./SCAN50_2012.ecw
Size is 75000, 95000
Origin = (75000.000000000000000,675000.000000000000000)
Pixel Size = (5.000000000000000,-5.000000000000000)
Metadata:
COLORSPACE=RGB
COMPRESSION_RATE_TARGET=10
VERSION=2
Corner Coordinates:
Upper Left ( 75000.000, 675000.000)
Lower Left ( 75000.000, 200000.000)
Upper Right ( 450000.000, 675000.000)
Lower Right ( 450000.000, 200000.000)
Center ( 262500.000, 437500.000)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Description = Red
Overviews: 37500x47500, 18750x23750, 9375x11875, 4687x5937, 2343x2968, 1171x1484, 585x742, 292x371, 146x185
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Description = Green
Overviews: 37500x47500, 18750x23750, 9375x11875, 4687x5937, 2343x2968, 1171x1484, 585x742, 292x371, 146x185
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
Description = Blue
Overviews: 37500x47500, 18750x23750, 9375x11875, 4687x5937, 2343x2968, 1171x1484, 585x742, 292x371, 146x185

k at k-GS60-6QE:/media/k/Data/Data/Perso/Carto$ gdalinfo ./SCAN50_2012.tif
Driver: GTiff/GeoTIFF
Files: ./SCAN50_2012.tif
Size is 75000, 95000
Origin = (75000.000000000000000,675000.000000000000000)
Pixel Size = (5.000000000000000,-5.000000000000000)
Metadata:
COLORSPACE=RGB
COMPRESSION_RATE_TARGET=10
VERSION=2
Image Structure Metadata:
COMPRESSION=YCbCr JPEG
INTERLEAVE=PIXEL
SOURCE_COLOR_SPACE=YCbCr
Corner Coordinates:
Upper Left ( 75000.000, 675000.000)
Lower Left ( 75000.000, 200000.000)
Upper Right ( 450000.000, 675000.000)
Lower Right ( 450000.000, 200000.000)
Center ( 262500.000, 437500.000)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Description = Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Description = Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
Description = Blue
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210206/63cdec0a/attachment.html>

From pteroglossus at pm.me  Fri Feb  5 17:38:39 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Sat, 06 Feb 2021 01:38:39 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <3-bgHyzY6q2bQ1c7Jna8FfpCCJ8NzVNJD94FBfyMg8sxmlY7eTV9rKe8DaiHWj-7Rih_9f813FtdaAfKOvsm8UyFYKwRGPRlMgtL1Pdpj9Y=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
 <f1740512-c755-f5c9-630e-31ba928c8d40@blixtmail.se>
 <3-bgHyzY6q2bQ1c7Jna8FfpCCJ8NzVNJD94FBfyMg8sxmlY7eTV9rKe8DaiHWj-7Rih_9f813FtdaAfKOvsm8UyFYKwRGPRlMgtL1Pdpj9Y=@pm.me>
Message-ID: <A6JkL1KbSpdUOuIYn5TfPmEJv8G_Ll8zbk96CfdiWT3DIM3o9vfEExmOl86KrQ9GIw_Mm5dvBOY2jS_FsTcRyvlCjh6vkubZztROlr8GcAQ=@pm.me>

Regarding the compilation of GRASS: pointing to my existing install of GDAL prior the compiling process did not work. So I followed Richard's advice and restarted the whole process of compiling GDAL, without the --prefix, then configured and compiled GRASS, and it worked!

I mean I was able to start GRASS GIS, but it won't import my .ecw:

"r.import input=/media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw output=SCAN50_2012
ERROR: Unable to open datasource </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>
ERROR: Unable to open datasource </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>
ERROR: Unable to read GDAL dataset </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>"

+ an additional Dialog Box :"Unable to determine number of raster bands"

Gdalinfo is however able to get info from the file and gdal_translate to convert it, which necessarily means my installation has worked!

Any ideas?

Regards,
Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210206/c71843b7/attachment.html>

From neteler at osgeo.org  Sat Feb  6 03:58:31 2021
From: neteler at osgeo.org (Markus Neteler)
Date: Sat, 6 Feb 2021 12:58:31 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <A6JkL1KbSpdUOuIYn5TfPmEJv8G_Ll8zbk96CfdiWT3DIM3o9vfEExmOl86KrQ9GIw_Mm5dvBOY2jS_FsTcRyvlCjh6vkubZztROlr8GcAQ=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <7388e314-a1a9-a25a-6d43-df224a1dacf7@duif.net>
 <sRlpL1APccqhTxsc6a-a4_5FR2Hu3ZGhXIfRfS0QFFYyLrC9Uf8co9qjMTKCI7iK8O-tAq2mK_2ExvQvUIg3TS74SXJfJmEVJ8lrPz5lX6g=@pm.me>
 <784040c0-a73a-9710-d627-8592ad96a6fc@duif.net>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
 <f1740512-c755-f5c9-630e-31ba928c8d40@blixtmail.se>
 <3-bgHyzY6q2bQ1c7Jna8FfpCCJ8NzVNJD94FBfyMg8sxmlY7eTV9rKe8DaiHWj-7Rih_9f813FtdaAfKOvsm8UyFYKwRGPRlMgtL1Pdpj9Y=@pm.me>
 <A6JkL1KbSpdUOuIYn5TfPmEJv8G_Ll8zbk96CfdiWT3DIM3o9vfEExmOl86KrQ9GIw_Mm5dvBOY2jS_FsTcRyvlCjh6vkubZztROlr8GcAQ=@pm.me>
Message-ID: <CALFmHhvEO4NXtgCvNhwk8_6F=UWp=tYJ9PEnhQ47TqPjPDvRkw@mail.gmail.com>

On Sat, Feb 6, 2021 at 2:38 AM Pteroglossus via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> Regarding the compilation of GRASS: pointing to my existing install of GDAL prior the compiling process did not work.

That's unexpected. Perhaps the resulting binary still picks the wrong
GDAL library?
Please check if you still have multiple GDAL versions installed in
parallel (I'd avoid that).

> So I followed Richard's advice and restarted the whole process of compiling GDAL, without the --prefix, then configured and compiled GRASS, and it worked!
>
> I mean I was able to start GRASS GIS, but it won't import my .ecw:
>
> "r.import input=/media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw output=SCAN50_2012
> ERROR: Unable to open datasource </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>
> ERROR: Unable to open datasource </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>
> ERROR: Unable to read GDAL dataset </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>"

Is ECW reported?

https://grass.osgeo.org/grass-stable/manuals/r.in.gdal.html
--> flag: -f   List supported formats and exit

> + an additional Dialog Box :"Unable to determine number of raster bands"

GRASS GIS simply uses GDAL, so perhaps it still uses the wrong GDAL library?

> Gdalinfo is however able to get info from the file and gdal_translate to convert it, which necessarily means my installation has worked!

You need to be sure that the installed GRASS GIS binaries use the same
GDAL library as e.g. gdalinfo.

Best
Markus

From markus.metz.giswork at gmail.com  Sat Feb  6 13:24:24 2021
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Sat, 6 Feb 2021 22:24:24 +0100
Subject: [gdal-dev] how to use the -ct option in ogr2ogr
In-Reply-To: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>
References: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>
Message-ID: <CAG+h=FHVrLcbZ3Gtz0jXaV0V8mCEKKOxSjd7Msa0PbToGEDVpQ@mail.gmail.com>

On Fri, Feb 5, 2021 at 3:40 PM Karsten Tebling <tebling at masuch.de> wrote:
>
> Hello,
>
> i'm struggling with how to use the -ct option in ogr2ogr and could need
> some help.
>
> i copied a NTv2.gsb to osgeo4w64/share/proj and edited the proj.db by
> inserting a new row in the grid_transformation-table. using this
> transformation in qgis works. however when i try to use it in ogr2ogr
> with the same data i always get "failed to reproject feature (geometry
> probably out of source or destination srs). no known way to write
> feature with geometry 'none'". here is my code:
>
> ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct
> "+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1
> +x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift
> +grids=NTv2LSBB_LSA.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF
> punkte_25833.dxf punkte_31468.dxf
>

Is the grid NTv2LSBB_LSA.gsb used for hgridshift really covering the full
extent of punkte_31468.dxf ?
You can check with "gdalinfo NTv2LSBB_LSA.gsb" and "ogrinfo -so
punkte_31468.dxf".

Markus M

> i'm using the latest qgis-ltr and osgeo4w shell
>
> greetings
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210206/f2b941e6/attachment.html>

From smaffren at gmail.com  Sun Feb  7 21:53:32 2021
From: smaffren at gmail.com (Sylvain Maffren)
Date: Mon, 08 Feb 2021 08:53:32 +0300
Subject: [gdal-dev] Gdal install from source error :
Message-ID: <7f39d498f6e84370dbd6835d5b7a9980acaf3f81.camel@gmail.com>

Hello,

I am trying to insatll GDAL manually by compiling from src. Here is the
different versions of the librairies used :

GDAL_VERSION=3.2.1
GEOS_VERSION=3.8.1 (manual compilation)
PROJ_VERSION=7.2.1 (manual compilation)
HDF5_VERSION=1.10.5 (manual compilation)
NETCDF_VERSION=4.7.4 (manual compilation)
OPENJPEG_VERSION=2.4.0 (manual compilation)
PROJ_DAT_VERSION=1.8 (manual compilation)

I had some errors I managed to fix by following some google posts. It
just remains one and I can't find any clue on internet on how to fix
it.

Here is the way I used to compile GDAL from src :

cd $ROOTDIR/src
echo "Downloading sources and compiling GDAL"
wget -q 
https://github.com/OSGeo/gdal/releases/download/v${GDAL_VERSION}/gdal-${GDAL_VERSION}.tar.gz
tar -xvf gdal-${GDAL_VERSION}.tar.gz &>> /dev/null

cd $ROOTDIR/src/gdal-${GDAL_VERSION}
CFLAGS="-O3 -pipe -march=native -w"; CXXFLAGS="${CFLAGS}" ./configure
--with-proj=$ROOTDIR --with-cpp14  --with-crypto=yes --with-liblzma --
with-python --with-geos=$ROOTDIR --with-spatialite --with-
openjpeg=$ROOTDIR --with-hdf5=$ROOTDIR --with-netcdf=$ROOTDIR --with-pg 
--with-curl --with-png 
make -s -j$(nproc) &>> /dev/null 
make install
ldconfig 
make clean &>> /dev/null

echo "Install GDAL python"    
cd $ROOTDIR/src/gdal-${GDAL_VERSION}/swig/python
python3 setup.py build && python3 setup.py install

I got this error and I am unable to complete the compilation :

make[1] : on entre dans le r?pertoire ? /usr/src/gdal-3.2.1/apps ?
/bin/bash /usr/src/gdal-3.2.1/libtool --mode=link --silent
g++  gdalinfo_bin.lo  /usr/src/gdal-3.2.1/libgdal.la  -o gdalinfo
/usr/bin/ld: /usr/src/gdal-3.2.1/.libs/libgdal.so: undefined reference
to `opj_encoder_set_extra_options'
collect2: error: ld returned 1 exit status
make[1]: *** [GNUmakefile:90: gdalinfo] Error 1
make[1] : on quitte le r?pertoire ? /usr/src/gdal-3.2.1/apps ?
make: *** [GNUmakefile:120: apps-target] Error 2

It seems that the reference to  `opj_encoder_set_extra_options' is
linked to the OpenJPEG librairy but I didn't have any errors when I
compiled manually OpenJPEG librairy. And I didn't find any clue on
internet to fix it.

Did I miss something in my compilation process ?

Thanks in adavance for your advice.


-- 
Sylvain
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210208/519ee8f0/attachment.html>

From variablestarlight at gmail.com  Mon Feb  8 00:44:10 2021
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Mon, 8 Feb 2021 09:44:10 +0100
Subject: [gdal-dev] Compiling GDAL with HDF4 support
Message-ID: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>

Hi everyone

I am trying to compile GDAL 3.2.1 with HDF4 4.2.15. HDF4 is in 
/usr/local and subdirectories, but GDAL configure (--with-hdf4) complains:

checking for SDreaddata in -lmfhdfalt... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lmfhdf... no
configure: error: HDF4 support requested with arg "yes", but neither 
hdf4 nor mfhdf lib found


Yet, in /usr/local/lib64 I find:

/usr/local/lib64/libhdf4.settings
/usr/local/lib64/libmfhdf.a
/usr/local/lib64/libmfhdf.la


Am I missing something? Working in openSUSE Tumbleweed.

Thanks in advance

Hern?n


From smaffren at gmail.com  Mon Feb  8 00:52:46 2021
From: smaffren at gmail.com (Sylvain Maffren)
Date: Mon, 08 Feb 2021 11:52:46 +0300
Subject: [gdal-dev] Gdal install from source error : undefined reference
 to `opj_encoder_set_extra_options'
In-Reply-To: <7f39d498f6e84370dbd6835d5b7a9980acaf3f81.camel@gmail.com>
References: <7f39d498f6e84370dbd6835d5b7a9980acaf3f81.camel@gmail.com>
Message-ID: <f8c117039770f4593c1302c6ae8d5792da455185.camel@gmail.com>

I answer to myself (I just realized that my email topic wasn't good).
Sylvain--
Le lundi 08 f?vrier 2021 ? 08:53 +0300, Sylvain Maffren a ?crit :
> Hello,
> I am trying to insatll GDAL manually by compiling from src. Here is
> the different versions of the librairies used :
> GDAL_VERSION=3.2.1GEOS_VERSION=3.8.1 (manual
> compilation)PROJ_VERSION=7.2.1 (manual
> compilation)HDF5_VERSION=1.10.5 (manual
> compilation)NETCDF_VERSION=4.7.4 (manual
> compilation)OPENJPEG_VERSION=2.4.0 (manual
> compilation)PROJ_DAT_VERSION=1.8 (manual compilation)
> I had some errors I managed to fix by following some google posts. It
> just remains one and I can't find any clue on internet on how to fix
> it.
> Here is the way I used to compile GDAL from src :
> cd $ROOTDIR/srcecho "Downloading sources and compiling GDAL"wget -q 
> https://github.com/OSGeo/gdal/releases/download/v${GDAL_VERSION}/gdal-${GDAL_VERSION}.tar.gztar
> -xvf gdal-${GDAL_VERSION}.tar.gz &>> /dev/null
> cd $ROOTDIR/src/gdal-${GDAL_VERSION}CFLAGS="-O3 -pipe -march=native
> -w"; CXXFLAGS="${CFLAGS}" ./configure --with-proj=$ROOTDIR --with-
> cpp14  --with-crypto=yes --with-liblzma --with-python --with-
> geos=$ROOTDIR --with-spatialite --with-openjpeg=$ROOTDIR --with-
> hdf5=$ROOTDIR --with-netcdf=$ROOTDIR --with-pg --with-curl --with-
> png make -s -j$(nproc) &>> /dev/null make installldconfig make clean
> &>> /dev/null
> echo "Install GDAL python"    cd $ROOTDIR/src/gdal-
> ${GDAL_VERSION}/swig/pythonpython3 setup.py build && python3 setup.py
> install
> I got this error and I am unable to complete the compilation :
> make[1] : on entre dans le r?pertoire ? /usr/src/gdal-
> 3.2.1/apps ?/bin/bash /usr/src/gdal-3.2.1/libtool --mode=link --
> silent g++  gdalinfo_bin.lo  /usr/src/gdal-3.2.1/libgdal.la  -o
> gdalinfo/usr/bin/ld: /usr/src/gdal-3.2.1/.libs/libgdal.so: undefined
> reference to `opj_encoder_set_extra_options'collect2: error: ld
> returned 1 exit statusmake[1]: *** [GNUmakefile:90: gdalinfo] Error
> 1make[1] : on quitte le r?pertoire ? /usr/src/gdal-3.2.1/apps ?make:
> *** [GNUmakefile:120: apps-target] Error 2
> It seems that the reference to  `opj_encoder_set_extra_options' is
> linked to the OpenJPEG librairy but I didn't have any errors when I
> compiled manually OpenJPEG librairy. And I didn't find any clue on
> internet to fix it.
> Did I miss something in my compilation process ?
> Thanks in adavance for your advice.
> -- 
> Sylvain
-- 
Sylvain
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210208/dc384f3f/attachment.html>

From andrew at aitchison.me.uk  Mon Feb  8 01:09:17 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Mon, 8 Feb 2021 09:09:17 +0000 (GMT)
Subject: [gdal-dev] Compiling GDAL with HDF4 support
In-Reply-To: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
References: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
Message-ID: <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>

On Mon, 8 Feb 2021, Hern?n De Angelis wrote:

> Hi everyone
>
> I am trying to compile GDAL 3.2.1 with HDF4 4.2.15. HDF4 is in /usr/local and 
> subdirectories, but GDAL configure (--with-hdf4) complains:
>
> checking for SDreaddata in -lmfhdfalt... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lhdf4... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lmfhdf... no
> configure: error: HDF4 support requested with arg "yes", but neither hdf4 nor 
> mfhdf lib found
>
>
> Yet, in /usr/local/lib64 I find:
>
> /usr/local/lib64/libhdf4.settings
> /usr/local/lib64/libmfhdf.a
> /usr/local/lib64/libmfhdf.la
>
>
> Am I missing something? Working in openSUSE Tumbleweed.

Possibly something like
 	configure --with-hdf4=/usr/local/lib64
rather than
 	configure --with-hdf4
?

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From variablestarlight at gmail.com  Mon Feb  8 01:12:55 2021
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Mon, 8 Feb 2021 10:12:55 +0100
Subject: [gdal-dev] Compiling GDAL with HDF4 support
In-Reply-To: <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>
References: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
 <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>
Message-ID: <01bef785-20d2-254a-4fb8-a6b9650fb474@gmail.com>


On 2021-02-08 10:09, Andrew C Aitchison wrote:
> On Mon, 8 Feb 2021, Hern?n De Angelis wrote:
>
>> Hi everyone
>>
>> I am trying to compile GDAL 3.2.1 with HDF4 4.2.15. HDF4 is in 
>> /usr/local and subdirectories, but GDAL configure (--with-hdf4) 
>> complains:
>>
>> checking for SDreaddata in -lmfhdfalt... no
>> checking for SDreaddata in -lmfhdf... no
>> checking for SDreaddata in -lhdf4... no
>> checking for SDreaddata in -lmfhdf... no
>> checking for SDreaddata in -lmfhdf... no
>> configure: error: HDF4 support requested with arg "yes", but neither 
>> hdf4 nor mfhdf lib found
>>
>>
>> Yet, in /usr/local/lib64 I find:
>>
>> /usr/local/lib64/libhdf4.settings
>> /usr/local/lib64/libmfhdf.a
>> /usr/local/lib64/libmfhdf.la
>>
>>
>> Am I missing something? Working in openSUSE Tumbleweed.
>
> Possibly something like
> ????configure --with-hdf4=/usr/local/lib64
> rather than
> ????configure --with-hdf4
> ?
>
Thanks for your suggestion, Andrew, but I tried that of course before 
and did not work. Same result.

/H.


From tebling at masuch.de  Mon Feb  8 01:23:13 2021
From: tebling at masuch.de (Karsten Tebling)
Date: Mon, 8 Feb 2021 10:23:13 +0100
Subject: [gdal-dev] how to use the -ct option in ogr2ogr
In-Reply-To: <CAG+h=FHVrLcbZ3Gtz0jXaV0V8mCEKKOxSjd7Msa0PbToGEDVpQ@mail.gmail.com>
References: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>
 <CAG+h=FHVrLcbZ3Gtz0jXaV0V8mCEKKOxSjd7Msa0PbToGEDVpQ@mail.gmail.com>
Message-ID: <fcbac1a7-5bbb-bf00-a7e8-ddf824674587@masuch.de>

gdalinfo for NTv2LSBB_LSA.gsb gave the following information:

Size is 256, 264
Coordinate System is: EPSG 4326
Origin: 10.5, 53.1
SYSTEM_F: S4283
SYSTEM_T: ETRS89
Upper Left 10.5, 53.1
Lower Left 10.5, 50.9
Upper Right 13.3, 53.1
Lower Right 13.3, 50.9

ogrinfo for punkte_31468.dxf gave the following information:

Geometry: Unknown (any)
Feature Count: 36
Extent: (4523806.5, 5758974.7) - (4524134.7, 5759234.0)
Layer SRS WKT: (unknown)

according to QGIS punkte_31468.dxf should be at 11.6 52.1 which is 
inside the extent of the NTv2LSBB_LSA.gsb. after checking the 
documentation for the NTv2LSBB_LSA.gsb i noticed i couldn't use it for 
transformations from 31468 to 25833, that's why i tried it with 
BETA2007.gsb instead, but it didn't work either - it gave the same errors.

gdalinfo for BETA2007.gsb gave the following information:

Size is 62, 84
Coordinate System is: EPSG 4326
Origin: 5.4, 55.4
SYSTEM_F: DHDN90
SYSTEM_T: ETRS89
Upper Left 5.4, 55.4
Lower Left 5.4, 47.0
Upper Right 15.8, 55.4
Lower Right 15.6, 47.0

my adjusted code for BETA2007.gsb looks like:

ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct 
"+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 
+x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift 
+grids=BETA2007.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF 
punkte_25833.dxf punkte_31468.dxf

the points i used to test this were digitized around Magdeburg, 
Saxony-Anhalt in EPSG:31468. according to aerial data and openstreetmap, 
the position and coordinate system are correct when i check it in QGIS 
and switch to different coordinate systems.

Am 06.02.2021 um 22:24 schrieb Markus Metz:
>
>
> On Fri, Feb 5, 2021 at 3:40 PM Karsten Tebling <tebling at masuch.de 
> <mailto:tebling at masuch.de>> wrote:
> >
> > Hello,
> >
> > i'm struggling with how to use the -ct option in ogr2ogr and could need
> > some help.
> >
> > i copied a NTv2.gsb to osgeo4w64/share/proj and edited the proj.db by
> > inserting a new row in the grid_transformation-table. using this
> > transformation in qgis works. however when i try to use it in ogr2ogr
> > with the same data i always get "failed to reproject feature (geometry
> > probably out of source or destination srs). no known way to write
> > feature with geometry 'none'". here is my code:
> >
> > ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct
> > "+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1
> > +x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift
> > +grids=NTv2LSBB_LSA.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF
> > punkte_25833.dxf punkte_31468.dxf
> >
>
> Is the grid?NTv2LSBB_LSA.gsb used for hgridshift really covering the 
> full extent of punkte_31468.dxf ?
> You can check with "gdalinfo NTv2LSBB_LSA.gsb" and "ogrinfo -so 
> punkte_31468.dxf".
>
> Markus M
>
> > i'm using the latest qgis-ltr and osgeo4w shell
> >
> > greetings
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev 
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210208/55952e42/attachment.html>

From pteroglossus at pm.me  Mon Feb  8 03:46:59 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Mon, 08 Feb 2021 11:46:59 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <CALFmHhvEO4NXtgCvNhwk8_6F=UWp=tYJ9PEnhQ47TqPjPDvRkw@mail.gmail.com>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
 <f1740512-c755-f5c9-630e-31ba928c8d40@blixtmail.se>
 <3-bgHyzY6q2bQ1c7Jna8FfpCCJ8NzVNJD94FBfyMg8sxmlY7eTV9rKe8DaiHWj-7Rih_9f813FtdaAfKOvsm8UyFYKwRGPRlMgtL1Pdpj9Y=@pm.me>
 <A6JkL1KbSpdUOuIYn5TfPmEJv8G_Ll8zbk96CfdiWT3DIM3o9vfEExmOl86KrQ9GIw_Mm5dvBOY2jS_FsTcRyvlCjh6vkubZztROlr8GcAQ=@pm.me>
 <CALFmHhvEO4NXtgCvNhwk8_6F=UWp=tYJ9PEnhQ47TqPjPDvRkw@mail.gmail.com>
Message-ID: <-Snk84LXlc-HsWNqFWFkbd2fx9VeHrdLUOoipCMBqHJNkEULNz8cmB1Y5nyohqa1VPYu7vHC7gyonJaE_mLlGaGQir6SkSAeNbfn7Q1mMfQ=@pm.me>

Thank you Markus for the explanation, you were right, I had conflicting libraries. I "located" every "gdal" files, deleted them all, started over from scratch and...

"(Sun Feb 7 22:51:56 2021)
r.in.gdal -f

ECW (rw+): ERDAS Compressed Wavelets (SDK 5.5)
JP2ECW (rw+): ERDAS JPEG2000 (SDK 5.5)"

However:

"(Sun Feb 7 22:52:28 2021)
r.import input=/media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw output=SCAN50_2012 -o
No projection information available
Over-riding projection check
Importing 3 raster bands...
Importing raster map <SCAN50_2012.1>...
Importing raster map <SCAN50_2012.2>...
Importing raster map <SCAN50_2012.3>...
(Sun Feb 7 23:51:01 2021) Command finished (58 min 33 sec)
Traceback (most recent call last):
File "/usr/local/grass79/gui/wxpython/core/gconsole.py",
line 691, in OnCmdDone

event.onDone(event)
File
"/usr/local/grass79/gui/wxpython/modules/import_export.py",
line 518, in OnCmdDone

self.AddLayers(event.returncode, event.cmd, event.userData)
File
"/usr/local/grass79/gui/wxpython/modules/import_export.py",
line 276, in AddLayers

if not self.add.IsChecked() or returncode != 0:
RuntimeError
:
wrapped C/C++ object of type CheckBox has been deleted"

I do not have the slightest idea what could have caused that. FYI I did not encounter any issue during the compilation and installation processes.

I've never been closer to importing my .ecw into GRASS GIS, could you nudge me in the right direction one last time?

Best,
Kevin

??????? Original Message ???????
On Saturday, February 6, 2021 8:58 AM, Markus Neteler neteler at osgeo.org wrote:

> On Sat, Feb 6, 2021 at 2:38 AM Pteroglossus via gdal-dev
> gdal-dev at lists.osgeo.org wrote:
>
>> Regarding the compilation of GRASS: pointing to my existing install of GDAL prior the compiling process did not work.
>
> That's unexpected. Perhaps the resulting binary still picks the wrong
> GDAL library?
> Please check if you still have multiple GDAL versions installed in
> parallel (I'd avoid that).
>
>> So I followed Richard's advice and restarted the whole process of compiling GDAL, without the --prefix, then configured and compiled GRASS, and it worked!
>> I mean I was able to start GRASS GIS, but it won't import my .ecw:
>> "r.import input=/media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw output=SCAN50_2012
>> ERROR: Unable to open datasource </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>
>> ERROR: Unable to open datasource </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>
>> ERROR: Unable to read GDAL dataset </media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw>"
>
> Is ECW reported?
> https://grass.osgeo.org/grass-stable/manuals/r.in.gdal.html
> --> flag: -f List supported formats and exit
>
>> - an additional Dialog Box :"Unable to determine number of raster bands"
>
> GRASS GIS simply uses GDAL, so perhaps it still uses the wrong GDAL library?
>
>> Gdalinfo is however able to get info from the file and gdal_translate to convert it, which necessarily means my installation has worked!
>
> You need to be sure that the installed GRASS GIS binaries use the same
> GDAL library as e.g. gdalinfo.
> Best
> Markus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210208/5253f3a9/attachment.html>

From neteler at osgeo.org  Mon Feb  8 11:22:35 2021
From: neteler at osgeo.org (Markus Neteler)
Date: Mon, 8 Feb 2021 20:22:35 +0100
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <-Snk84LXlc-HsWNqFWFkbd2fx9VeHrdLUOoipCMBqHJNkEULNz8cmB1Y5nyohqa1VPYu7vHC7gyonJaE_mLlGaGQir6SkSAeNbfn7Q1mMfQ=@pm.me>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <jlCKHgut8eXoRV19VdrRHSg0t8km1ICbrfiwwForS6ZDz2_G2clK8TTSkX7NM0v68ObjfSpfN0sGszYMZ8Fs3SUVpB7CJXnKHrsotvDJNCo=@pm.me>
 <c5aca4c2-a279-2667-51e8-316f0601ea50@duif.net>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
 <f1740512-c755-f5c9-630e-31ba928c8d40@blixtmail.se>
 <3-bgHyzY6q2bQ1c7Jna8FfpCCJ8NzVNJD94FBfyMg8sxmlY7eTV9rKe8DaiHWj-7Rih_9f813FtdaAfKOvsm8UyFYKwRGPRlMgtL1Pdpj9Y=@pm.me>
 <A6JkL1KbSpdUOuIYn5TfPmEJv8G_Ll8zbk96CfdiWT3DIM3o9vfEExmOl86KrQ9GIw_Mm5dvBOY2jS_FsTcRyvlCjh6vkubZztROlr8GcAQ=@pm.me>
 <CALFmHhvEO4NXtgCvNhwk8_6F=UWp=tYJ9PEnhQ47TqPjPDvRkw@mail.gmail.com>
 <-Snk84LXlc-HsWNqFWFkbd2fx9VeHrdLUOoipCMBqHJNkEULNz8cmB1Y5nyohqa1VPYu7vHC7gyonJaE_mLlGaGQir6SkSAeNbfn7Q1mMfQ=@pm.me>
Message-ID: <CALFmHhtgH3CURpyVJBYAFo1SrJarmCDLVjVp+meAXV1ki0auyw@mail.gmail.com>

On Mon, Feb 8, 2021 at 12:47 PM Pteroglossus via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> Thank you Markus for the explanation, you were right, I had conflicting libraries. I "located" every "gdal" files, deleted them all, started over from scratch and...
>
> "(Sun Feb 7 22:51:56 2021)
> r.in.gdal -f
>
> ECW (rw+): ERDAS Compressed Wavelets (SDK 5.5)
> JP2ECW (rw+): ERDAS JPEG2000 (SDK 5.5)"

Great, GDAL-GRASS problem solved.

> However:
>
> "(Sun Feb 7 22:52:28 2021)
> r.import input=/media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw output=SCAN50_2012 -o

--> run this on command line, to get the import done

... because:

> No projection information available
> Over-riding projection check
> Importing 3 raster bands...
> Importing raster map <SCAN50_2012.1>...
> Importing raster map <SCAN50_2012.2>...
> Importing raster map <SCAN50_2012.3>...
> (Sun Feb 7 23:51:01 2021) Command finished (58 min 33 sec)
> Traceback (most recent call last):
> File "/usr/local/grass79/gui/wxpython/core/gconsole.py",
> line 691, in OnCmdDone
>
> event.onDone(event)
> File
> "/usr/local/grass79/gui/wxpython/modules/import_export.py",
> line 518, in OnCmdDone
>
> self.AddLayers(event.returncode, event.cmd, event.userData)
> File
> "/usr/local/grass79/gui/wxpython/modules/import_export.py",
> line 276, in AddLayers
>
> if not self.add.IsChecked() or returncode != 0:
> RuntimeError
> :
> wrapped C/C++ object of type CheckBox has been deleted"
>
> I do not have the slightest idea what could have caused that.

You are hit by a current GUI bug:
https://github.com/OSGeo/grass/issues/648

which is unrelated to GDAL.

FYI I did not encounter any issue during the compilation and
installation processes.
>
> I've never been closer to importing my .ecw into GRASS GIS, could you nudge me in the right direction one last time?

Yes:

Best is: run the import on command line for now.

For the unrelated GUI bug:
- either switch to GRASS GIS 7.8, or
- wait for the bugfix in G 7.9 (which is a dev version anyway). For
this you can subscribe to the bug to see the related updates.

HTH,
Markus

From markus.metz.giswork at gmail.com  Mon Feb  8 11:22:55 2021
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Mon, 8 Feb 2021 20:22:55 +0100
Subject: [gdal-dev] Compiling GDAL with HDF4 support
In-Reply-To: <01bef785-20d2-254a-4fb8-a6b9650fb474@gmail.com>
References: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
 <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>
 <01bef785-20d2-254a-4fb8-a6b9650fb474@gmail.com>
Message-ID: <CAG+h=FF4L_s7Asdzxr9KpJdz2ieQVVD6bNuZRaLxUH2Ohd13OQ@mail.gmail.com>

Is /usr/local/lib64 known to your system as a path to libraries? Check the
env var LD_LIBRARY_PATH or add "/usr/local/lib64" to some file in
/etc/ld.so.conf.d/ followed by "ldconfig" as root.

You can also set the var LDFLAGS for configure if you have libraries in a
nonstandard directory, such as
LDFLAGS="/usr/local/lib64" ./configure ...

HTH,

Markus

On Mon, Feb 8, 2021 at 10:13 AM Hern?n De Angelis <
variablestarlight at gmail.com> wrote:
>
>
> On 2021-02-08 10:09, Andrew C Aitchison wrote:
> > On Mon, 8 Feb 2021, Hern?n De Angelis wrote:
> >
> >> Hi everyone
> >>
> >> I am trying to compile GDAL 3.2.1 with HDF4 4.2.15. HDF4 is in
> >> /usr/local and subdirectories, but GDAL configure (--with-hdf4)
> >> complains:
> >>
> >> checking for SDreaddata in -lmfhdfalt... no
> >> checking for SDreaddata in -lmfhdf... no
> >> checking for SDreaddata in -lhdf4... no
> >> checking for SDreaddata in -lmfhdf... no
> >> checking for SDreaddata in -lmfhdf... no
> >> configure: error: HDF4 support requested with arg "yes", but neither
> >> hdf4 nor mfhdf lib found
> >>
> >>
> >> Yet, in /usr/local/lib64 I find:
> >>
> >> /usr/local/lib64/libhdf4.settings
> >> /usr/local/lib64/libmfhdf.a
> >> /usr/local/lib64/libmfhdf.la
> >>
> >>
> >> Am I missing something? Working in openSUSE Tumbleweed.
> >
> > Possibly something like
> >     configure --with-hdf4=/usr/local/lib64
> > rather than
> >     configure --with-hdf4
> > ?
> >
> Thanks for your suggestion, Andrew, but I tried that of course before
> and did not work. Same result.
>
> /H.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210208/ab73e20a/attachment-0001.html>

From markus.metz.giswork at gmail.com  Mon Feb  8 13:18:55 2021
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Mon, 8 Feb 2021 22:18:55 +0100
Subject: [gdal-dev] how to use the -ct option in ogr2ogr
In-Reply-To: <fcbac1a7-5bbb-bf00-a7e8-ddf824674587@masuch.de>
References: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>
 <CAG+h=FHVrLcbZ3Gtz0jXaV0V8mCEKKOxSjd7Msa0PbToGEDVpQ@mail.gmail.com>
 <fcbac1a7-5bbb-bf00-a7e8-ddf824674587@masuch.de>
Message-ID: <CAG+h=FGZJ3-VqUoHBs7LAi6M6eLhZ_MF0f4_a84qgVzdedA_ow@mail.gmail.com>

On Mon, Feb 8, 2021 at 10:23 AM Karsten Tebling <tebling at masuch.de> wrote:
>
> gdalinfo for NTv2LSBB_LSA.gsb gave the following information:
>
> Size is 256, 264
> Coordinate System is: EPSG 4326
> Origin: 10.5, 53.1
> SYSTEM_F: S4283
> SYSTEM_T: ETRS89
> Upper Left 10.5, 53.1
> Lower Left 10.5, 50.9
> Upper Right 13.3, 53.1
> Lower Right 13.3, 50.9
>
> ogrinfo for punkte_31468.dxf gave the following information:
>
> Geometry: Unknown (any)
> Feature Count: 36
> Extent: (4523806.5, 5758974.7) - (4524134.7, 5759234.0)
> Layer SRS WKT: (unknown)
>
> according to QGIS punkte_31468.dxf should be at 11.6 52.1 which is inside
the extent of the NTv2LSBB_LSA.gsb. after checking the documentation for
the NTv2LSBB_LSA.gsb i noticed i couldn't use it for transformations from
31468 to 25833, that's why i tried it with BETA2007.gsb instead, but it
didn't work either - it gave the same errors.
>
> gdalinfo for BETA2007.gsb gave the following information:
>
> Size is 62, 84
> Coordinate System is: EPSG 4326
> Origin: 5.4, 55.4
> SYSTEM_F: DHDN90
> SYSTEM_T: ETRS89
> Upper Left 5.4, 55.4
> Lower Left 5.4, 47.0
> Upper Right 15.8, 55.4
> Lower Right 15.6, 47.0
>
> my adjusted code for BETA2007.gsb looks like:
>
> ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct
"+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000
+y_0=0 +ellps=bessel +step +proj=hgridshift +grids=BETA2007.gsb +step
+proj=utm +zone=33 +ellps=GRS80" -f DXF punkte_25833.dxf punkte_31468.dxf
>
> the points i used to test this were digitized around Magdeburg,
Saxony-Anhalt in EPSG:31468. according to aerial data and openstreetmap,
the position and coordinate system are correct when i check it in QGIS and
switch to different coordinate systems.

Wit PROJ 7.2.1 and
projinfo -o PROJ -s "EPSG:31468" -t "EPSG:25833"
I get
Operation No. 1:

unknown id, Inverse of 3-degree Gauss-Kruger zone 4 + DHDN to ETRS89 (8) +
UTM zone 33N, 0.9 m, Germany - onshore - states of Baden-Wurtemberg,
Bayern, Berlin, Brandenburg, Bremen, Hamburg, Hessen,
Mecklenburg-Vorpommern, Niedersachsen, Nordrhein-Westfalen,
Rheinland-Pfalz, Saarland, Sachsen, Sachsen-Anhalt, Schleswig-Holstein,
Thuringen.

PROJ string:
+proj=pipeline
  +step +proj=axisswap +order=2,1
  +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0
        +ellps=bessel
  +step +proj=hgridshift +grids=de_adv_BETA2007.tif
  +step +proj=utm +zone=33 +ellps=GRS80

-------------------------------------
Operation No. 2:

unknown id, Inverse of 3-degree Gauss-Kruger zone 4 + DHDN to ETRS89 (2) +
UTM zone 33N, 3 m, Germany - states of former West Germany onshore -
Baden-Wurtemberg, Bayern, Bremen, Hamburg, Hessen, Niedersachsen,
Nordrhein-Westfalen, Rheinland-Pfalz, Saarland, Schleswig-Holstein.

PROJ string:
+proj=pipeline
  +step +proj=axisswap +order=2,1
  +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0
        +ellps=bessel
  +step +proj=push +v_3
  +step +proj=cart +ellps=bessel
  +step +proj=helmert +x=598.1 +y=73.7 +z=418.2 +rx=0.202 +ry=0.045
+rz=-2.455
        +s=6.7 +convention=position_vector
  +step +inv +proj=cart +ellps=GRS80
  +step +proj=pop +v_3
  +step +proj=utm +zone=33 +ellps=GRS80


It seems your custom definitions of the coordinate operation are missing
the axis swap step "+step +proj=axisswap +order=2,1".
According to "projinfo -o WKT2:2019 "EPSG:31468", northing is the first
axis in EPSG:31468, thus the need for the axis swap.

If you trust the QGIS coordinate operation, then why do you provide a
custom coordinate operation to ogr2ogr with the -ct option?

>
> Am 06.02.2021 um 22:24 schrieb Markus Metz:
>
>
>
> On Fri, Feb 5, 2021 at 3:40 PM Karsten Tebling <tebling at masuch.de> wrote:
> >
> > Hello,
> >
> > i'm struggling with how to use the -ct option in ogr2ogr and could need
> > some help.
> >
> > i copied a NTv2.gsb to osgeo4w64/share/proj and edited the proj.db by
> > inserting a new row in the grid_transformation-table. using this
> > transformation in qgis works. however when i try to use it in ogr2ogr
> > with the same data i always get "failed to reproject feature (geometry
> > probably out of source or destination srs). no known way to write
> > feature with geometry 'none'". here is my code:
> >
> > ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct
> > "+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1
> > +x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift
> > +grids=NTv2LSBB_LSA.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF
> > punkte_25833.dxf punkte_31468.dxf
> >
>
> Is the grid NTv2LSBB_LSA.gsb used for hgridshift really covering the full
extent of punkte_31468.dxf ?
> You can check with "gdalinfo NTv2LSBB_LSA.gsb" and "ogrinfo -so
punkte_31468.dxf".
>
> Markus M
>
> > i'm using the latest qgis-ltr and osgeo4w shell
> >
> > greetings
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210208/567135c8/attachment.html>

From pteroglossus at pm.me  Mon Feb  8 16:03:46 2021
From: pteroglossus at pm.me (pteroglossus at pm.me)
Date: Tue, 09 Feb 2021 00:03:46 +0000
Subject: [gdal-dev] Fw: Building GDAL with ECW support
In-Reply-To: <CALFmHhtgH3CURpyVJBYAFo1SrJarmCDLVjVp+meAXV1ki0auyw@mail.gmail.com>
References: <-L6TvWBb5KFtHSgS8UQBQAGCrN1EHkKdq07f_HX3Sr5ON2MmprInJQmfwRWDFNgyfu4GBeEKJNT-4Y138fT0Fcc7aNKP74vEQi-ULmvhj5w=@pm.me>
 <CALFmHhvh32eGg6m0ThcKPHYJBqGO+28rpAR1iEv49wdXaFiGNQ@mail.gmail.com>
 <W8qbnT1B7Vwbxok317fRI0lvBEWU2MhR7Q1JqNhOqwXwySA5GfYNWaBbF1_4NxLujCY3F09BD8n27k8pfLU7-pTrlbZ8Of-gkKcoIqguOEI=@pm.me>
 <f1740512-c755-f5c9-630e-31ba928c8d40@blixtmail.se>
 <3-bgHyzY6q2bQ1c7Jna8FfpCCJ8NzVNJD94FBfyMg8sxmlY7eTV9rKe8DaiHWj-7Rih_9f813FtdaAfKOvsm8UyFYKwRGPRlMgtL1Pdpj9Y=@pm.me>
 <A6JkL1KbSpdUOuIYn5TfPmEJv8G_Ll8zbk96CfdiWT3DIM3o9vfEExmOl86KrQ9GIw_Mm5dvBOY2jS_FsTcRyvlCjh6vkubZztROlr8GcAQ=@pm.me>
 <CALFmHhvEO4NXtgCvNhwk8_6F=UWp=tYJ9PEnhQ47TqPjPDvRkw@mail.gmail.com>
 <-Snk84LXlc-HsWNqFWFkbd2fx9VeHrdLUOoipCMBqHJNkEULNz8cmB1Y5nyohqa1VPYu7vHC7gyonJaE_mLlGaGQir6SkSAeNbfn7Q1mMfQ=@pm.me>
 <CALFmHhtgH3CURpyVJBYAFo1SrJarmCDLVjVp+meAXV1ki0auyw@mail.gmail.com>
Message-ID: <v-8H-O9fcBRTg4DeLtKnRGe_5s_UcWaWkyHqovE77E3R7YFelpp8OIdEZ6CF4nRlAFbzvqw2avfO04x4BzKHTiqyEDlOyP1KecnFC6Ziwkw=@pm.me>

Hi Markus, Richard, and everyone who helped,

You'll be relieved to read that:

1. I finally managed to display my maps both in .ecw and .tif (I figured out the color "problem"...)
2. This is my final message on this thread! :D

I realise now that most of my questions pertained more to compiling and Linux file structure in general than actual GIS problems. Thank you all for your patience and your time!

I learnt a lot thanks to you.

Portez-vous bien,
Kevin

??????? Original Message ???????
On Monday, February 8, 2021 4:22 PM, Markus Neteler <neteler at osgeo.org> wrote:

> On Mon, Feb 8, 2021 at 12:47 PM Pteroglossus via gdal-dev
> gdal-dev at lists.osgeo.org wrote:
>
> > Thank you Markus for the explanation, you were right, I had conflicting libraries. I "located" every "gdal" files, deleted them all, started over from scratch and...
> > "(Sun Feb 7 22:51:56 2021)
> > r.in.gdal -f
> > ECW (rw+): ERDAS Compressed Wavelets (SDK 5.5)
> > JP2ECW (rw+): ERDAS JPEG2000 (SDK 5.5)"
>
> Great, GDAL-GRASS problem solved.
>
> > However:
> > "(Sun Feb 7 22:52:28 2021)
> > r.import input=/media/k/Data/Data/Perso/Carto/SCAN50_2012.ecw output=SCAN50_2012 -o
>
> --> run this on command line, to get the import done
>
> ... because:
>
> > No projection information available
> > Over-riding projection check
> > Importing 3 raster bands...
> > Importing raster map <SCAN50_2012.1>...
> > Importing raster map <SCAN50_2012.2>...
> > Importing raster map <SCAN50_2012.3>...
> > (Sun Feb 7 23:51:01 2021) Command finished (58 min 33 sec)
> > Traceback (most recent call last):
> > File "/usr/local/grass79/gui/wxpython/core/gconsole.py",
> > line 691, in OnCmdDone
> > event.onDone(event)
> > File
> > "/usr/local/grass79/gui/wxpython/modules/import_export.py",
> > line 518, in OnCmdDone
> > self.AddLayers(event.returncode, event.cmd, event.userData)
> > File
> > "/usr/local/grass79/gui/wxpython/modules/import_export.py",
> > line 276, in AddLayers
> > if not self.add.IsChecked() or returncode != 0:
> > RuntimeError
> > :
> > wrapped C/C++ object of type CheckBox has been deleted"
> > I do not have the slightest idea what could have caused that.
>
> You are hit by a current GUI bug:
> https://github.com/OSGeo/grass/issues/648
>
> which is unrelated to GDAL.
>
> FYI I did not encounter any issue during the compilation and
> installation processes.
>
> > I've never been closer to importing my .ecw into GRASS GIS, could you nudge me in the right direction one last time?
>
> Yes:
>
> Best is: run the import on command line for now.
>
> For the unrelated GUI bug:
>
> -   either switch to GRASS GIS 7.8, or
> -   wait for the bugfix in G 7.9 (which is a dev version anyway). For
>     this you can subscribe to the bug to see the related updates.
>
>     HTH,
>     Markus
>



From andrew.murdoch.dev at gmail.com  Mon Feb  8 22:31:49 2021
From: andrew.murdoch.dev at gmail.com (andrew.murdoch.dev at gmail.com)
Date: Mon, 8 Feb 2021 23:31:49 -0700 (MST)
Subject: [gdal-dev] Alpine Docker build with ODBC support
Message-ID: <1612852309077-0.post@n6.nabble.com>

I just want to be sure that I'm on the right track to getting ODBC support
into a GDAL docker alpine build.

Starting from the Dockerfiles found here:
https://github.com/OSGeo/gdal/tree/master/gdal/docker
I've attempted to modify the alpine-normal linux Dockerfile to build with
ODBC support, but I'm not succeeding.

At this line in the alpine-normal Dockerfile:
https://github.com/OSGeo/gdal/blob/b3582884ea42456766d978dceee8e1ce048504bc/gdal/docker/alpine-normal/Dockerfile#L32

I've added a reference to "unixodbc-dev", but this does not seem to be a
supported/expected ODBC library for GDAL? 

I've also added the configure flags for odbc support at this line:
https://github.com/OSGeo/gdal/blob/b3582884ea42456766d978dceee8e1ce048504bc/gdal/docker/alpine-normal/Dockerfile#L326

There I added the flag for:
    --with-odbc \

The docker build proceeds and completes but when I try to run gdalinfo
--formats (or any other gdalinfo command), I get the errors below:

Error loading shared library libodbc.so.2: No such file or directory (needed
by /usr/lib/libgdal.so)
Error loading shared library libodbcinst.so.2: No such file or directory
(needed by /usr/lib/libgdal.so)
Error relocating /usr/lib/libgdal.so: SQLFetchScroll: symbol not found
Error relocating /usr/lib/libgdal.so: SQLRowCount: symbol not found
Error relocating /usr/lib/libgdal.so: SQLSetConnectOption: symbol not found
Error relocating /usr/lib/libgdal.so: SQLColAttribute: symbol not found
Error relocating /usr/lib/libgdal.so: SQLGetData: symbol not found
Error relocating /usr/lib/libgdal.so: SQLInstallDriverEx: symbol not found
Error relocating /usr/lib/libgdal.so: SQLNumResultCols: symbol not found
Error relocating /usr/lib/libgdal.so: SQLFreeStmt: symbol not found
Error relocating /usr/lib/libgdal.so: SQLBindParameter: symbol not found
Error relocating /usr/lib/libgdal.so: SQLFetch: symbol not found
Error relocating /usr/lib/libgdal.so: SQLDriverConnect: symbol not found
Error relocating /usr/lib/libgdal.so: SQLGetDiagRec: symbol not found
Error relocating /usr/lib/libgdal.so: SQLConnect: symbol not found
Error relocating /usr/lib/libgdal.so: SQLTables: symbol not found
Error relocating /usr/lib/libgdal.so: SQLDescribeCol: symbol not found
Error relocating /usr/lib/libgdal.so: SQLRemoveDriver: symbol not found
Error relocating /usr/lib/libgdal.so: SQLSetConnectAttr: symbol not found
Error relocating /usr/lib/libgdal.so: SQLDrivers: symbol not found
Error relocating /usr/lib/libgdal.so: SQLEndTran: symbol not found
Error relocating /usr/lib/libgdal.so: SQLAllocEnv: symbol not found
Error relocating /usr/lib/libgdal.so: SQLFreeConnect: symbol not found
Error relocating /usr/lib/libgdal.so: SQLFreeEnv: symbol not found
Error relocating /usr/lib/libgdal.so: SQLAllocStmt: symbol not found
Error relocating /usr/lib/libgdal.so: SQLExecDirect: symbol not found
Error relocating /usr/lib/libgdal.so: SQLDisconnect: symbol not found
Error relocating /usr/lib/libgdal.so: SQLColumns: symbol not found
Error relocating /usr/lib/libgdal.so: SQLInstallerError: symbol not found
Error relocating /usr/lib/libgdal.so: SQLPrimaryKeys: symbol not found
Error relocating /usr/lib/libgdal.so: SQLAllocConnect: symbol not found
Error relocating /usr/lib/libgdal.so: SQLGetConnectAttr: symbol not found

Looking deeper, it seems that GDAL is expecting/detecting an ODBC driver
named "odbc" not "unixodbc-dev"?
In what _looks_ like the main GDAL build configuration script here:
https://github.com/OSGeo/gdal/blob/633cfd90334ab604ad46c1cbcf36f083b27e49ab/gdal/configure.ac#L4082
it appears that the only default library is named "odbc"?
  AC_CHECK_LIB(odbc,SQLConnect,[ODBC_LIBS="-lodbc -lodbcinst"])

so, it looks like in the configure step, I would need to pass an explicit
path for the ODBC driver library (similar to how the Dockerfile builds
custom libraries from source for geos, netcdf, and others?)

Is there a better way to get ODBC support inside of an alpine Docker
container?

Should I instead consider using the Microsoft ODBC drivers here?
https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-ver15#alpine17

In the configure step ("--with-odbc"), what would the explicit path to ODBC
library look like for an example supported ODBC library (unixodbc,
msodbcsql17_17, etc.)?

Thanks!
Andrew






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From notequal90 at gmail.com  Mon Feb  8 23:02:25 2021
From: notequal90 at gmail.com (=?UTF-8?B?0JjQu9GM0Y8g0J3QtdGG0LLQtdGC0LDQtdCy?=)
Date: Tue, 9 Feb 2021 10:02:25 +0300
Subject: [gdal-dev] Geometry validation
In-Reply-To: <CAKGcJSkmKQ_2gFAAwZOjPwXr8Y5Zoc-TQoG3JM5i+NP6_fs0pw@mail.gmail.com>
References: <CAKGcJSkmKQ_2gFAAwZOjPwXr8Y5Zoc-TQoG3JM5i+NP6_fs0pw@mail.gmail.com>
Message-ID: <CAKGcJSn3GzAgqEoBsQ6Mx3efvg7qCOEpzWPi4-L_aWx2VDa+mg@mail.gmail.com>

Hello.
I have to downgrade my application from gdal 3.1.2 to 2.1.2 built on
libGeos 3.5.1. For some reason.
So I have to work around the absence of some methods introduced only in
later releases.
The first thing i met was MakeValid and IsValid. In my application it is
used for Polygons.
There is two aspects:
1. What does exactly "valid geometry" mean? What does IsValid check?
  As it is written in docs: Returns true if geometry has no points". I'm
not sure, that I understand it correctly.
2. Is there a proper way to replace MakeValid with something in order to
keep my app functional?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210209/c404aa91/attachment-0001.html>

From rajeshreddy82 at gmail.com  Mon Feb  8 23:05:41 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Tue, 9 Feb 2021 00:05:41 -0700 (MST)
Subject: [gdal-dev] Converting KML data with styles to GeoJSON output
Message-ID: <1612854341494-0.post@n6.nabble.com>

Hey,

I am trying to convert a kml-file with styles to a GeoJSON. Observed that
only data is converted but styles information is missing. How to get the
Geojson data along with styles?

I have tried with org2ogr. Below is the KML file -

<?xml version="1.0" encoding="UTF-8"?><kml
xmlns="http://www.opengis.net/kml/2.2"><Document><Placemark><name>Building
41</name><styleUrl>#transBluePoly</styleUrl><Polygon><extrude>1</extrude><altitudeMode>relativeToGround</altitudeMode><outerBoundaryIs><LinearRing><coordinates>
-122.0857412771483,37.42227033155257,17-122.0858169768481,37.42231408832346,17-122.085852582875,37.42230337469744,17-122.0858799945639,37.42225686138789,17-122.0858860101409,37.4222311076138,17-122.0858069157288,37.42220250173855,17-122.0858379542653,37.42214027058678,17-122.0856732640519,37.42208690214408,17-122.0856022926407,37.42214885429042,17-122.0855902778436,37.422128290487,17-122.0855841672237,37.42208171967246,17-122.0854852065741,37.42210455874995,17-122.0855067264352,37.42214267949824,17-122.0854430712915,37.42212783846172,17-122.0850990714904,37.42251282407603,17-122.0856769818632,37.42281815323651,17-122.0860162273783,37.42244918858722,17-122.0857260327004,37.42229239604253,17-122.0857412771483,37.42227033155257,17</coordinates></LinearRing></outerBoundaryIs></Polygon></Placemark></Document></kml>


Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From variablestarlight at gmail.com  Mon Feb  8 23:33:00 2021
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Tue, 9 Feb 2021 08:33:00 +0100
Subject: [gdal-dev] Compiling GDAL with HDF4 support
In-Reply-To: <CAG+h=FF4L_s7Asdzxr9KpJdz2ieQVVD6bNuZRaLxUH2Ohd13OQ@mail.gmail.com>
References: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
 <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>
 <01bef785-20d2-254a-4fb8-a6b9650fb474@gmail.com>
 <CAG+h=FF4L_s7Asdzxr9KpJdz2ieQVVD6bNuZRaLxUH2Ohd13OQ@mail.gmail.com>
Message-ID: <1021f619-e198-85fa-4499-94cfbb1b5a0d@gmail.com>

On 2021-02-08 20:22, Markus Metz wrote:
> Is /usr/local/lib64 known to your system as a path to libraries? Check 
> the env var LD_LIBRARY_PATH or add "/usr/local/lib64" to some file in 
> /etc/ld.so.conf.d/ followed by "ldconfig" as root.
>
> You can also set the var LDFLAGS for configure if you have libraries 
> in a nonstandard directory, such as
> LDFLAGS="/usr/local/lib64" ./configure ...
>
Thank you for your suggestion, Markus, but /usr/local/Lib64 is in the 
library path.

/H.



From smaffren at gmail.com  Tue Feb  9 00:00:26 2021
From: smaffren at gmail.com (Sylvain Maffren)
Date: Tue, 09 Feb 2021 11:00:26 +0300
Subject: [gdal-dev] Gdal install from source error : undefined reference
 to `opj_encoder_set_extra_options'
In-Reply-To: <f8c117039770f4593c1302c6ae8d5792da455185.camel@gmail.com>
References: <7f39d498f6e84370dbd6835d5b7a9980acaf3f81.camel@gmail.com>
 <f8c117039770f4593c1302c6ae8d5792da455185.camel@gmail.com>
Message-ID: <fe7e3e096ae09947184b05281fc3d8696b714842.camel@gmail.com>

Hi,
I found the answer. I had an old installation of OpenJPEG lib (2.3.1)
on Gdal was still pointing on it (but this version doesn't
contain opj_encoder_set_extra_options). After a clean removal and fresh
re-compiling of OpenJPEG 2.4.0 I managed to compile GDAL.
Thanks.
Sylvain.
Le lundi 08 f?vrier 2021 ? 11:52 +0300, Sylvain Maffren a ?crit :
> I answer to myself (I just realized that my email topic wasn't good).
> Sylvain--
> Le lundi 08 f?vrier 2021 ? 08:53 +0300, Sylvain Maffren a ?crit :
> > Hello,
> > I am trying to insatll GDAL manually by compiling from src. Here is
> > the different versions of the librairies used :
> > GDAL_VERSION=3.2.1GEOS_VERSION=3.8.1 (manual
> > compilation)PROJ_VERSION=7.2.1 (manual
> > compilation)HDF5_VERSION=1.10.5 (manual
> > compilation)NETCDF_VERSION=4.7.4 (manual
> > compilation)OPENJPEG_VERSION=2.4.0 (manual
> > compilation)PROJ_DAT_VERSION=1.8 (manual compilation)
> > I had some errors I managed to fix by following some google posts.
> > It just remains one and I can't find any clue on internet on how to
> > fix it.
> > Here is the way I used to compile GDAL from src :
> > cd $ROOTDIR/srcecho "Downloading sources and compiling GDAL"wget -q
> > https://github.com/OSGeo/gdal/releases/download/v${GDAL_VERSION}/gd
> > al-${GDAL_VERSION}.tar.gztar -xvf gdal-${GDAL_VERSION}.tar.gz &>>
> > /dev/null
> > cd $ROOTDIR/src/gdal-${GDAL_VERSION}CFLAGS="-O3 -pipe -march=native
> > -w"; CXXFLAGS="${CFLAGS}" ./configure --with-proj=$ROOTDIR --with-
> > cpp14  --with-crypto=yes --with-liblzma --with-python --with-
> > geos=$ROOTDIR --with-spatialite --with-openjpeg=$ROOTDIR --with-
> > hdf5=$ROOTDIR --with-netcdf=$ROOTDIR --with-pg --with-curl --with-
> > png make -s -j$(nproc) &>> /dev/null make installldconfig make
> > clean &>> /dev/null
> > echo "Install GDAL python"    cd $ROOTDIR/src/gdal-
> > ${GDAL_VERSION}/swig/pythonpython3 setup.py build && python3
> > setup.py install
> > I got this error and I am unable to complete the compilation :
> > make[1] : on entre dans le r?pertoire ? /usr/src/gdal-
> > 3.2.1/apps ?/bin/bash /usr/src/gdal-3.2.1/libtool --mode=link --
> > silent g++  gdalinfo_bin.lo  /usr/src/gdal-3.2.1/libgdal.la  -o
> > gdalinfo/usr/bin/ld: /usr/src/gdal-3.2.1/.libs/libgdal.so:
> > undefined reference to `opj_encoder_set_extra_options'collect2:
> > error: ld returned 1 exit statusmake[1]: *** [GNUmakefile:90:
> > gdalinfo] Error 1make[1] : on quitte le r?pertoire ? /usr/src/gdal-
> > 3.2.1/apps ?make: *** [GNUmakefile:120: apps-target] Error 2
> > It seems that the reference to  `opj_encoder_set_extra_options' is
> > linked to the OpenJPEG librairy but I didn't have any errors when I
> > compiled manually OpenJPEG librairy. And I didn't find any clue on
> > internet to fix it.
> > Did I miss something in my compilation process ?
> > Thanks in adavance for your advice.
> > -- 
> > Sylvain
> -- 
> Sylvain
-- 
Sylvain
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210209/db5c5a3d/attachment.html>

From bradh at frogmouth.net  Mon Feb  8 23:57:35 2021
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Tue, 09 Feb 2021 18:57:35 +1100
Subject: [gdal-dev] Converting KML data with styles to GeoJSON output
In-Reply-To: <1612854341494-0.post@n6.nabble.com>
Message-ID: <fe484e04-8b79-4cd7-80ff-93ccb0521a58@email.android.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210209/d0e69045/attachment.html>

From rajeshreddy82 at gmail.com  Tue Feb  9 01:02:02 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Tue, 9 Feb 2021 02:02:02 -0700 (MST)
Subject: [gdal-dev] Converting KML data with styles to GeoJSON output
In-Reply-To: <fe484e04-8b79-4cd7-80ff-93ccb0521a58@email.android.com>
References: <1612854341494-0.post@n6.nabble.com>
 <fe484e04-8b79-4cd7-80ff-93ccb0521a58@email.android.com>
Message-ID: <1612861322684-0.post@n6.nabble.com>

Below are the input sample KML, out GeoJSON, and missing values. 

*Sample KML:*

<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Document>
    
    <Placemark>
      <name>Building 41</name>
      <styleUrl>#transBluePoly</styleUrl>
      <Polygon>
        <extrude>1</extrude>
        <altitudeMode>relativeToGround</altitudeMode>
        <outerBoundaryIs>
          <LinearRing>
            <coordinates> -122.0857412771483,37.42227033155257,17
              -122.0858169768481,37.42231408832346,17
              -122.085852582875,37.42230337469744,17
              -122.0858799945639,37.42225686138789,17
              -122.0858860101409,37.4222311076138,17
              -122.0858069157288,37.42220250173855,17
              -122.0858379542653,37.42214027058678,17
              -122.0856732640519,37.42208690214408,17
              -122.0856022926407,37.42214885429042,17
              -122.0855902778436,37.422128290487,17
              -122.0855841672237,37.42208171967246,17
              -122.0854852065741,37.42210455874995,17
              -122.0855067264352,37.42214267949824,17
              -122.0854430712915,37.42212783846172,17
              -122.0850990714904,37.42251282407603,17
              -122.0856769818632,37.42281815323651,17
              -122.0860162273783,37.42244918858722,17
              -122.0857260327004,37.42229239604253,17
              -122.0857412771483,37.42227033155257,17 
            </coordinates>
          </LinearRing>
        </outerBoundaryIs>
      </Polygon>
    </Placemark>
  </Document>
</kml>

*GEOJSON Output:*

{
"type": "FeatureCollection",
"name": "kml_geometry_style",
"crs": { "type": "name", "properties": { "name":
"urn:ogc:def:crs:OGC:1.3:CRS84" } },
"features": [
{ "type": "Feature", "properties": { "Name": "Building 41", "altitudeMode":
"relativeToGround", "tessellate": -1, "extrude": 1, "visibility": -1 },
"geometry": { "type": "Polygon", "coordinates": [ [ [ -122.085741277148301,
37.422270331552568, 17.0 ], [ -122.085816976848093, 37.422314088323461, 17.0
], [ -122.085852582875006, 37.422303374697442, 17.0 ], [
-122.085879994563896, 37.422256861387893, 17.0 ], [ -122.085886010140896,
37.422231107613797, 17.0 ], [ -122.085806915728796, 37.422202501738553, 17.0
], [ -122.085837954265301, 37.42214027058678, 17.0 ], [
-122.085673264051906, 37.422086902144081, 17.0 ], [ -122.085602292640701,
37.42214885429042, 17.0 ], [ -122.085590277843593, 37.422128290487002, 17.0
], [ -122.085584167223701, 37.422081719672462, 17.0 ], [
-122.085485206574106, 37.42210455874995, 17.0 ], [ -122.085506726435199,
37.422142679498243, 17.0 ], [ -122.085443071291493, 37.422127838461719, 17.0
], [ -122.085099071490404, 37.42251282407603, 17.0 ], [
-122.085676981863202, 37.422818153236513, 17.0 ], [ -122.086016227378295,
37.422449188587223, 17.0 ], [ -122.085726032700407, 37.422292396042529, 17.0
], [ -122.085741277148301, 37.422270331552568, 17.0 ] ] ] } }
]
}

*MISSING part:*





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From tebling at masuch.de  Tue Feb  9 00:15:23 2021
From: tebling at masuch.de (Karsten Tebling)
Date: Tue, 9 Feb 2021 09:15:23 +0100
Subject: [gdal-dev] how to use the -ct option in ogr2ogr
In-Reply-To: <CAG+h=FGZJ3-VqUoHBs7LAi6M6eLhZ_MF0f4_a84qgVzdedA_ow@mail.gmail.com>
References: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>
 <CAG+h=FHVrLcbZ3Gtz0jXaV0V8mCEKKOxSjd7Msa0PbToGEDVpQ@mail.gmail.com>
 <fcbac1a7-5bbb-bf00-a7e8-ddf824674587@masuch.de>
 <CAG+h=FGZJ3-VqUoHBs7LAi6M6eLhZ_MF0f4_a84qgVzdedA_ow@mail.gmail.com>
Message-ID: <0f4628b9-42f9-d99c-dce2-31ce315a4985@masuch.de>

the projinfo-command was exactly what i needed but didn't know it 
exists! the ogr2ogr -ct command works now, thank you very much!

could this example be added to the official examples on 
https://gdal.org/programs/ogr2ogr.html#ogr2ogr ? i think the -ct option 
is very useful and an example for it would be good. i could also try to 
edit it on my own and send a pull request if that helps

i just like to use the console if i can, QGIS has it's advantages but if 
i have the option to use gdal directly or via a wrapper like QGIS, i 
like to use gdal directly. this also saves me from the pain when the 
wrapper does implement something wrong or uses it's own functions 
instead of gdal, which in addition could change every new version and 
need to be checked. using gdal directly is much more reliable for me.

Am 08.02.2021 um 22:18 schrieb Markus Metz:
>
>
> On Mon, Feb 8, 2021 at 10:23 AM Karsten Tebling <tebling at masuch.de 
> <mailto:tebling at masuch.de>> wrote:
> >
> > gdalinfo for NTv2LSBB_LSA.gsb gave the following information:
> >
> > Size is 256, 264
> > Coordinate System is: EPSG 4326
> > Origin: 10.5, 53.1
> > SYSTEM_F: S4283
> > SYSTEM_T: ETRS89
> > Upper Left 10.5, 53.1
> > Lower Left 10.5, 50.9
> > Upper Right 13.3, 53.1
> > Lower Right 13.3, 50.9
> >
> > ogrinfo for punkte_31468.dxf gave the following information:
> >
> > Geometry: Unknown (any)
> > Feature Count: 36
> > Extent: (4523806.5, 5758974.7) - (4524134.7, 5759234.0)
> > Layer SRS WKT: (unknown)
> >
> > according to QGIS punkte_31468.dxf should be at 11.6 52.1 which is 
> inside the extent of the NTv2LSBB_LSA.gsb. after checking the 
> documentation for the NTv2LSBB_LSA.gsb i noticed i couldn't use it for 
> transformations from 31468 to 25833, that's why i tried it with 
> BETA2007.gsb instead, but it didn't work either - it gave the same errors.
> >
> > gdalinfo for BETA2007.gsb gave the following information:
> >
> > Size is 62, 84
> > Coordinate System is: EPSG 4326
> > Origin: 5.4, 55.4
> > SYSTEM_F: DHDN90
> > SYSTEM_T: ETRS89
> > Upper Left 5.4, 55.4
> > Lower Left 5.4, 47.0
> > Upper Right 15.8, 55.4
> > Lower Right 15.6, 47.0
> >
> > my adjusted code for BETA2007.gsb looks like:
> >
> > ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct 
> "+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 
> +x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift 
> +grids=BETA2007.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF 
> punkte_25833.dxf punkte_31468.dxf
> >
> > the points i used to test this were digitized around Magdeburg, 
> Saxony-Anhalt in EPSG:31468. according to aerial data and 
> openstreetmap, the position and coordinate system are correct when i 
> check it in QGIS and switch to different coordinate systems.
>
> Wit PROJ 7.2.1 and
> projinfo -o PROJ -s "EPSG:31468" -t "EPSG:25833"
> I get
> Operation No. 1:
>
> unknown id, Inverse of 3-degree Gauss-Kruger zone 4 + DHDN to ETRS89 
> (8) + UTM zone 33N, 0.9 m, Germany - onshore - states of 
> Baden-Wurtemberg, Bayern, Berlin, Brandenburg, Bremen, Hamburg, 
> Hessen, Mecklenburg-Vorpommern, Niedersachsen, Nordrhein-Westfalen, 
> Rheinland-Pfalz, Saarland, Sachsen, Sachsen-Anhalt, 
> Schleswig-Holstein, Thuringen.
>
> PROJ string:
> +proj=pipeline
> ? +step +proj=axisswap +order=2,1
> ? +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0
> ? ? ? ? +ellps=bessel
> ? +step +proj=hgridshift +grids=de_adv_BETA2007.tif
> ? +step +proj=utm +zone=33 +ellps=GRS80
>
> -------------------------------------
> Operation No. 2:
>
> unknown id, Inverse of 3-degree Gauss-Kruger zone 4 + DHDN to ETRS89 
> (2) + UTM zone 33N, 3 m, Germany - states of former West Germany 
> onshore - Baden-Wurtemberg, Bayern, Bremen, Hamburg, Hessen, 
> Niedersachsen, Nordrhein-Westfalen, Rheinland-Pfalz, Saarland, 
> Schleswig-Holstein.
>
> PROJ string:
> +proj=pipeline
> ? +step +proj=axisswap +order=2,1
> ? +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0
> ? ? ? ? +ellps=bessel
> ? +step +proj=push +v_3
> ? +step +proj=cart +ellps=bessel
> ? +step +proj=helmert +x=598.1 +y=73.7 +z=418.2 +rx=0.202 +ry=0.045 
> +rz=-2.455
> ? ? ? ? +s=6.7 +convention=position_vector
> ? +step +inv +proj=cart +ellps=GRS80
> ? +step +proj=pop +v_3
> ? +step +proj=utm +zone=33 +ellps=GRS80
>
>
> It seems your custom definitions of the coordinate operation are 
> missing the axis swap step "+step +proj=axisswap +order=2,1".
> According to "projinfo -o WKT2:2019 "EPSG:31468", northing is the 
> first axis in EPSG:31468, thus the need for the axis swap.
>
> If you trust the QGIS coordinate operation, then why do you provide a 
> custom coordinate operation to ogr2ogr with the -ct option?
>
> >
> > Am 06.02.2021 um 22:24 schrieb Markus Metz:
> >
> >
> >
> > On Fri, Feb 5, 2021 at 3:40 PM Karsten Tebling <tebling at masuch.de 
> <mailto:tebling at masuch.de>> wrote:
> > >
> > > Hello,
> > >
> > > i'm struggling with how to use the -ct option in ogr2ogr and could 
> need
> > > some help.
> > >
> > > i copied a NTv2.gsb to osgeo4w64/share/proj and edited the proj.db by
> > > inserting a new row in the grid_transformation-table. using this
> > > transformation in qgis works. however when i try to use it in ogr2ogr
> > > with the same data i always get "failed to reproject feature (geometry
> > > probably out of source or destination srs). no known way to write
> > > feature with geometry 'none'". here is my code:
> > >
> > > ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct
> > > "+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1
> > > +x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift
> > > +grids=NTv2LSBB_LSA.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF
> > > punkte_25833.dxf punkte_31468.dxf
> > >
> >
> > Is the grid NTv2LSBB_LSA.gsb used for hgridshift really covering the 
> full extent of punkte_31468.dxf ?
> > You can check with "gdalinfo NTv2LSBB_LSA.gsb" and "ogrinfo -so 
> punkte_31468.dxf".
> >
> > Markus M
> >
> > > i'm using the latest qgis-ltr and osgeo4w shell
> > >
> > > greetings
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> > > https://lists.osgeo.org/mailman/listinfo/gdal-dev 
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210209/8e0b5dca/attachment-0001.html>

From mateusz at loskot.net  Tue Feb  9 01:33:09 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 9 Feb 2021 10:33:09 +0100
Subject: [gdal-dev] Converting KML data with styles to GeoJSON output
In-Reply-To: <1612854341494-0.post@n6.nabble.com>
References: <1612854341494-0.post@n6.nabble.com>
Message-ID: <CABUeae8dZRJwjMHov4R0Qpyd26sPN9gwA__GEBKtegLeUzYbng@mail.gmail.com>

On Tue, 9 Feb 2021 at 08:05, MRRAJESH <rajeshreddy82 at gmail.com> wrote:
>
> I am trying to convert a kml-file with styles to a GeoJSON. Observed that
> only data is converted but styles information is missing. How to get the
> Geojson data along with styles?

Does GeoJSON support styles?

1. https://tools.ietf.org/html/rfc7946
2. https://gdal.org/drivers/vector/geojson.html?highlight=style

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Tue Feb  9 01:36:27 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 9 Feb 2021 10:36:27 +0100
Subject: [gdal-dev] Alpine Docker build with ODBC support
In-Reply-To: <1612852309077-0.post@n6.nabble.com>
References: <1612852309077-0.post@n6.nabble.com>
Message-ID: <CABUeae-yqVT6FzbdmwwBX=LBKQDn6B0xocHb5vJr7gLSQtJnLQ@mail.gmail.com>

On Tue, 9 Feb 2021 at 07:31, andrew.murdoch.dev at gmail.com
<andrew.murdoch.dev at gmail.com> wrote:
>
> I just want to be sure that I'm on the right track to getting ODBC support
> into a GDAL docker alpine build.
> [...]
> I've added a reference to "unixodbc-dev", but this does not seem to be a
> supported/expected ODBC library for GDAL?

I know nothing about Alpine packages, but perhaps you need to
install the unixODBC binary package explicitly (i.e. it's not
dragged in by unixodbc-dev).

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From rdmailings at duif.net  Tue Feb  9 01:35:55 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Tue, 9 Feb 2021 10:35:55 +0100
Subject: [gdal-dev] Converting KML data with styles to GeoJSON output
In-Reply-To: <1612861322684-0.post@n6.nabble.com>
References: <1612854341494-0.post@n6.nabble.com>
 <fe484e04-8b79-4cd7-80ff-93ccb0521a58@email.android.com>
 <1612861322684-0.post@n6.nabble.com>
Message-ID: <dc03b212-376e-5ac4-af6a-92afcbe21f17@duif.net>

Hi MRRAJESH,

GeoJSON does not contain style information, it is pure data.

KML indeed can contain both data AND styling.

But if you convert KML to GeoJSON, you only get data, because... GeoJSON does not define style/colors.

You need to style/color your geojson in your client.
In clients like: https://geojson.io you can add some styling (see below) but that is not part of the geojson spec, it is (for what I know) client specific. ogr2ogr is only following the standards

Regards,

Richard Duivenvoorde

PS geojson adds some nonstandard css like attributes to make it possible to share geojson with some colors:
load this in https://geojson.io

{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "stroke": "#ed0d0d",
        "stroke-width": 2,
        "stroke-opacity": 1,
        "fill": "#336af7",
        "fill-opacity": 0.5
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [
          [
            [
              40.42968749999999,
              50.736455137010665
            ],
            [
              36.2109375,
              43.83452678223682
            ],
            [
              50.2734375,
              38.8225909761771
            ],
            [
              53.78906249999999,
              42.5530802889558
            ],
            [
              52.03125,
              47.989921667414194
            ],
            [
              50.625,
              50.28933925329178
            ],
            [
              46.05468749999999,
              54.36775852406841
            ],
            [
              40.42968749999999,
              50.736455137010665
            ]
          ]
        ]
      }
    }
  ]
}



On 2/9/21 10:02 AM, MRRAJESH wrote:
> Below are the input sample KML, out GeoJSON, and missing values. 
> 
> *Sample KML:*
> 
> <?xml version="1.0" encoding="UTF-8"?>
> <kml xmlns="http://www.opengis.net/kml/2.2">
>   <Document>
>     
>     <Placemark>
>       <name>Building 41</name>
>       <styleUrl>#transBluePoly</styleUrl>
>       <Polygon>
>         <extrude>1</extrude>
>         <altitudeMode>relativeToGround</altitudeMode>
>         <outerBoundaryIs>
>           <LinearRing>
>             <coordinates> -122.0857412771483,37.42227033155257,17
>               -122.0858169768481,37.42231408832346,17
>               -122.085852582875,37.42230337469744,17
>               -122.0858799945639,37.42225686138789,17
>               -122.0858860101409,37.4222311076138,17
>               -122.0858069157288,37.42220250173855,17
>               -122.0858379542653,37.42214027058678,17
>               -122.0856732640519,37.42208690214408,17
>               -122.0856022926407,37.42214885429042,17
>               -122.0855902778436,37.422128290487,17
>               -122.0855841672237,37.42208171967246,17
>               -122.0854852065741,37.42210455874995,17
>               -122.0855067264352,37.42214267949824,17
>               -122.0854430712915,37.42212783846172,17
>               -122.0850990714904,37.42251282407603,17
>               -122.0856769818632,37.42281815323651,17
>               -122.0860162273783,37.42244918858722,17
>               -122.0857260327004,37.42229239604253,17
>               -122.0857412771483,37.42227033155257,17 
>             </coordinates>
>           </LinearRing>
>         </outerBoundaryIs>
>       </Polygon>
>     </Placemark>
>   </Document>
> </kml>
> 
> *GEOJSON Output:*
> 
> {
> "type": "FeatureCollection",
> "name": "kml_geometry_style",
> "crs": { "type": "name", "properties": { "name":
> "urn:ogc:def:crs:OGC:1.3:CRS84" } },
> "features": [
> { "type": "Feature", "properties": { "Name": "Building 41", "altitudeMode":
> "relativeToGround", "tessellate": -1, "extrude": 1, "visibility": -1 },
> "geometry": { "type": "Polygon", "coordinates": [ [ [ -122.085741277148301,
> 37.422270331552568, 17.0 ], [ -122.085816976848093, 37.422314088323461, 17.0
> ], [ -122.085852582875006, 37.422303374697442, 17.0 ], [
> -122.085879994563896, 37.422256861387893, 17.0 ], [ -122.085886010140896,
> 37.422231107613797, 17.0 ], [ -122.085806915728796, 37.422202501738553, 17.0
> ], [ -122.085837954265301, 37.42214027058678, 17.0 ], [
> -122.085673264051906, 37.422086902144081, 17.0 ], [ -122.085602292640701,
> 37.42214885429042, 17.0 ], [ -122.085590277843593, 37.422128290487002, 17.0
> ], [ -122.085584167223701, 37.422081719672462, 17.0 ], [
> -122.085485206574106, 37.42210455874995, 17.0 ], [ -122.085506726435199,
> 37.422142679498243, 17.0 ], [ -122.085443071291493, 37.422127838461719, 17.0
> ], [ -122.085099071490404, 37.42251282407603, 17.0 ], [
> -122.085676981863202, 37.422818153236513, 17.0 ], [ -122.086016227378295,
> 37.422449188587223, 17.0 ], [ -122.085726032700407, 37.422292396042529, 17.0
> ], [ -122.085741277148301, 37.422270331552568, 17.0 ] ] ] } }
> ]
> }
> 
> *MISSING part:*
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From mateusz at loskot.net  Tue Feb  9 01:41:24 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 9 Feb 2021 10:41:24 +0100
Subject: [gdal-dev] Geometry validation
In-Reply-To: <CAKGcJSn3GzAgqEoBsQ6Mx3efvg7qCOEpzWPi4-L_aWx2VDa+mg@mail.gmail.com>
References: <CAKGcJSkmKQ_2gFAAwZOjPwXr8Y5Zoc-TQoG3JM5i+NP6_fs0pw@mail.gmail.com>
 <CAKGcJSn3GzAgqEoBsQ6Mx3efvg7qCOEpzWPi4-L_aWx2VDa+mg@mail.gmail.com>
Message-ID: <CABUeae83F+E9=pwJ=pdDD6YuaeCynMinvdn=M_4S=nH4yBSrHQ@mail.gmail.com>

On Tue, 9 Feb 2021 at 08:02, ???? ????????? <notequal90 at gmail.com> wrote:
> 1. What does exactly "valid geometry" mean?

You will find it in the OGC SFS specification

> What does IsValid check?

Read https://postgis.net/docs/ST_IsValid.html  and
https://postgis.net/docs/postgis_usage.html#OGC_Validity
Read the GEOS library source code to learn the details.
Ask https://lists.osgeo.org/mailman/listinfo/geos-devel

> As it is written in docs: Returns true if geometry has no points". I'm not sure, that I understand it correctly.

Empty geometry is a valid geometry. See OGC SFS.

> 2. Is there a proper way to replace MakeValid with something in order to keep my app functional?

Read the GEOS library source code to learn the details.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From andrew at aitchison.me.uk  Tue Feb  9 01:49:56 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Tue, 9 Feb 2021 09:49:56 +0000 (GMT)
Subject: [gdal-dev] Compiling GDAL with HDF4 support
In-Reply-To: <1021f619-e198-85fa-4499-94cfbb1b5a0d@gmail.com>
References: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
 <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>
 <01bef785-20d2-254a-4fb8-a6b9650fb474@gmail.com>
 <CAG+h=FF4L_s7Asdzxr9KpJdz2ieQVVD6bNuZRaLxUH2Ohd13OQ@mail.gmail.com>
 <1021f619-e198-85fa-4499-94cfbb1b5a0d@gmail.com>
Message-ID: <69e617c0-6a29-b70-db47-6fbdcbddc6c@aitchison.me.uk>

On Tue, 9 Feb 2021, Hern?n De Angelis wrote:

> On 2021-02-08 20:22, Markus Metz wrote:
>> Is /usr/local/lib64 known to your system as a path to libraries? Check the 
>> env var LD_LIBRARY_PATH or add "/usr/local/lib64" to some file in 
>> /etc/ld.so.conf.d/ followed by "ldconfig" as root.
>> 
>> You can also set the var LDFLAGS for configure if you have libraries in a 
>> nonstandard directory, such as
>> LDFLAGS="/usr/local/lib64" ./configure ...
>> 
> Thank you for your suggestion, Markus, but /usr/local/Lib64 is in the library 
> path.

What platform are you on ? On most unix systems
 	/usr/local/Lib64
is not the same as
 	/usr/local/lib64
!

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From variablestarlight at gmail.com  Tue Feb  9 01:53:54 2021
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Tue, 9 Feb 2021 10:53:54 +0100
Subject: [gdal-dev] Compiling GDAL with HDF4 support
In-Reply-To: <69e617c0-6a29-b70-db47-6fbdcbddc6c@aitchison.me.uk>
References: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
 <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>
 <01bef785-20d2-254a-4fb8-a6b9650fb474@gmail.com>
 <CAG+h=FF4L_s7Asdzxr9KpJdz2ieQVVD6bNuZRaLxUH2Ohd13OQ@mail.gmail.com>
 <1021f619-e198-85fa-4499-94cfbb1b5a0d@gmail.com>
 <69e617c0-6a29-b70-db47-6fbdcbddc6c@aitchison.me.uk>
Message-ID: <c53b560d-bff6-ba34-3551-afa6f34580f7@gmail.com>


On 2021-02-09 10:49, Andrew C Aitchison wrote:
> On Tue, 9 Feb 2021, Hern?n De Angelis wrote:
>
>> On 2021-02-08 20:22, Markus Metz wrote:
>>> Is /usr/local/lib64 known to your system as a path to libraries? 
>>> Check the env var LD_LIBRARY_PATH or add "/usr/local/lib64" to some 
>>> file in /etc/ld.so.conf.d/ followed by "ldconfig" as root.
>>>
>>> You can also set the var LDFLAGS for configure if you have libraries 
>>> in a nonstandard directory, such as
>>> LDFLAGS="/usr/local/lib64" ./configure ...
>>>
>> Thank you for your suggestion, Markus, but /usr/local/Lib64 is in the 
>> library path.
>
> What platform are you on ? On most unix systems
> ????/usr/local/Lib64
> is not the same as
> ????/usr/local/lib64
> !
>
Thanks, I am aware of that ;-)

It was a typo in the message.


From andrew.murdoch.dev at gmail.com  Tue Feb  9 09:31:36 2021
From: andrew.murdoch.dev at gmail.com (andrew.murdoch.dev at gmail.com)
Date: Tue, 9 Feb 2021 10:31:36 -0700 (MST)
Subject: [gdal-dev] Alpine Docker build with ODBC support
In-Reply-To: <CABUeae-yqVT6FzbdmwwBX=LBKQDn6B0xocHb5vJr7gLSQtJnLQ@mail.gmail.com>
References: <1612852309077-0.post@n6.nabble.com>
 <CABUeae-yqVT6FzbdmwwBX=LBKQDn6B0xocHb5vJr7gLSQtJnLQ@mail.gmail.com>
Message-ID: <1612891896297-0.post@n6.nabble.com>

Mateusz,
Thanks for the suggestion!

I tried again and I believe that this novice GDAL builder has now figured it
out!
I only needed to make changes to two places in the alpine-normal-latest
Dockerfile to enable ODBC support

For posterity, this is what I changed:

I altered the GDAL build environment libraries (installed using "apk") here
and added the dev version of the unixodbc library:

# For PROJ and GDAL
ARG POPPLER_DEV=poppler-dev
RUN apk add --no-cache \
    linux-headers \
    curl-dev tiff-dev \
    zlib-dev zstd-dev \
    libjpeg-turbo-dev libpng-dev openjpeg-dev libwebp-dev expat-dev \
    py3-numpy-dev python3-dev py3-numpy \
    ${POPPLER_DEV} postgresql-dev \
    *# Added this for ODBC support:*
    *unixodbc-dev \    *
    openexr-dev libheif-dev xerces-c-dev geos-dev cfitsio-dev \
    # For spatialite (and GDAL)
    libxml2-dev \
    && mkdir -p /build_thirdparty/usr/lib

And further down I added the non-dev version of the unixodbc library for the
final alpine docker build:

ARG POPPLER=poppler
RUN apk add --no-cache \
        libstdc++ \
        sqlite-libs \
        libcurl tiff \
        zlib zstd-libs\
        libjpeg-turbo libpng libwebp expat \
        icu-libs \
        python3 py3-numpy ${POPPLER} pcre libpq libxml2 portablexdr openjpeg
\
        openexr libheif xerces-c geos cfitsio minizip \
       * # Added this for ODBC/MSSQLSpatial support*
       * unixodbc \*
    # Remove /usr/lib/libopenjp2.so.2.3.0 since we are building v2.3.1
manually
    # && rm -f /usr/lib/libopenjp2.so.2.3.0 \
    # libturbojpeg.so is not used by GDAL. Only libjpeg.so*
    && rm -f /usr/lib/libturbojpeg.so* \
    # libpoppler-cpp.so is not used by GDAL. Only libpoppler.so*
    && rm -f /usr/lib/libpoppler-cpp.so* \
    # Only libwebp.so is used by GDAL
    && rm -f /usr/lib/libwebpmux.so* /usr/lib/libwebpdemux.so*
/usr/lib/libwebpdecoder.so* \
    && ln -s /usr/bin/python3 /usr/bin/python

I didn't actually _need_ to use the "--with-odbc" argument/flag at all, as I
wasn't changing the default library name (the unixodbc library actually
installs into /usr/lib/ as the expected name "libodbc.so" that GDAL needs to
find.)

Thanks for your assistance!
Andrew




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From markus.metz.giswork at gmail.com  Tue Feb  9 09:56:19 2021
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Tue, 9 Feb 2021 18:56:19 +0100
Subject: [gdal-dev] how to use the -ct option in ogr2ogr
In-Reply-To: <0f4628b9-42f9-d99c-dce2-31ce315a4985@masuch.de>
References: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>
 <CAG+h=FHVrLcbZ3Gtz0jXaV0V8mCEKKOxSjd7Msa0PbToGEDVpQ@mail.gmail.com>
 <fcbac1a7-5bbb-bf00-a7e8-ddf824674587@masuch.de>
 <CAG+h=FGZJ3-VqUoHBs7LAi6M6eLhZ_MF0f4_a84qgVzdedA_ow@mail.gmail.com>
 <0f4628b9-42f9-d99c-dce2-31ce315a4985@masuch.de>
Message-ID: <CAG+h=FHBxU+7Xtsph-R9nN9OuuKm2yasXT8hveqYRETYspVwpg@mail.gmail.com>

On Tue, Feb 9, 2021 at 9:15 AM Karsten Tebling <tebling at masuch.de> wrote:
>
> the projinfo-command was exactly what i needed but didn't know it exists!
the ogr2ogr -ct command works now, thank you very much!

Interesting, because I am sure my previous suggestion to include the axis
swap step was wrong.

ogr2ogr should handle the axis order on its own correctly if you just
provide
ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833"
without a custom pipeline given with the -ct option

Markus M

>
> could this example be added to the official examples on
https://gdal.org/programs/ogr2ogr.html#ogr2ogr ? i think the -ct option is
very useful and an example for it would be good. i could also try to edit
it on my own and send a pull request if that helps
>
> i just like to use the console if i can, QGIS has it's advantages but if
i have the option to use gdal directly or via a wrapper like QGIS, i like
to use gdal directly. this also saves me from the pain when the wrapper
does implement something wrong or uses it's own functions instead of gdal,
which in addition could change every new version and need to be checked.
using gdal directly is much more reliable for me.
>
> Am 08.02.2021 um 22:18 schrieb Markus Metz:
>
>
>
> On Mon, Feb 8, 2021 at 10:23 AM Karsten Tebling <tebling at masuch.de> wrote:
> >
> > gdalinfo for NTv2LSBB_LSA.gsb gave the following information:
> >
> > Size is 256, 264
> > Coordinate System is: EPSG 4326
> > Origin: 10.5, 53.1
> > SYSTEM_F: S4283
> > SYSTEM_T: ETRS89
> > Upper Left 10.5, 53.1
> > Lower Left 10.5, 50.9
> > Upper Right 13.3, 53.1
> > Lower Right 13.3, 50.9
> >
> > ogrinfo for punkte_31468.dxf gave the following information:
> >
> > Geometry: Unknown (any)
> > Feature Count: 36
> > Extent: (4523806.5, 5758974.7) - (4524134.7, 5759234.0)
> > Layer SRS WKT: (unknown)
> >
> > according to QGIS punkte_31468.dxf should be at 11.6 52.1 which is
inside the extent of the NTv2LSBB_LSA.gsb. after checking the documentation
for the NTv2LSBB_LSA.gsb i noticed i couldn't use it for transformations
from 31468 to 25833, that's why i tried it with BETA2007.gsb instead, but
it didn't work either - it gave the same errors.
> >
> > gdalinfo for BETA2007.gsb gave the following information:
> >
> > Size is 62, 84
> > Coordinate System is: EPSG 4326
> > Origin: 5.4, 55.4
> > SYSTEM_F: DHDN90
> > SYSTEM_T: ETRS89
> > Upper Left 5.4, 55.4
> > Lower Left 5.4, 47.0
> > Upper Right 15.8, 55.4
> > Lower Right 15.6, 47.0
> >
> > my adjusted code for BETA2007.gsb looks like:
> >
> > ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct
"+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000
+y_0=0 +ellps=bessel +step +proj=hgridshift +grids=BETA2007.gsb +step
+proj=utm +zone=33 +ellps=GRS80" -f DXF punkte_25833.dxf punkte_31468.dxf
> >
> > the points i used to test this were digitized around Magdeburg,
Saxony-Anhalt in EPSG:31468. according to aerial data and openstreetmap,
the position and coordinate system are correct when i check it in QGIS and
switch to different coordinate systems.
>
> Wit PROJ 7.2.1 and
> projinfo -o PROJ -s "EPSG:31468" -t "EPSG:25833"
> I get
> Operation No. 1:
>
> unknown id, Inverse of 3-degree Gauss-Kruger zone 4 + DHDN to ETRS89 (8)
+ UTM zone 33N, 0.9 m, Germany - onshore - states of Baden-Wurtemberg,
Bayern, Berlin, Brandenburg, Bremen, Hamburg, Hessen,
Mecklenburg-Vorpommern, Niedersachsen, Nordrhein-Westfalen,
Rheinland-Pfalz, Saarland, Sachsen, Sachsen-Anhalt, Schleswig-Holstein,
Thuringen.
>
> PROJ string:
> +proj=pipeline
>   +step +proj=axisswap +order=2,1
>   +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0
>         +ellps=bessel
>   +step +proj=hgridshift +grids=de_adv_BETA2007.tif
>   +step +proj=utm +zone=33 +ellps=GRS80
>
> -------------------------------------
> Operation No. 2:
>
> unknown id, Inverse of 3-degree Gauss-Kruger zone 4 + DHDN to ETRS89 (2)
+ UTM zone 33N, 3 m, Germany - states of former West Germany onshore -
Baden-Wurtemberg, Bayern, Bremen, Hamburg, Hessen, Niedersachsen,
Nordrhein-Westfalen, Rheinland-Pfalz, Saarland, Schleswig-Holstein.
>
> PROJ string:
> +proj=pipeline
>   +step +proj=axisswap +order=2,1
>   +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0
>         +ellps=bessel
>   +step +proj=push +v_3
>   +step +proj=cart +ellps=bessel
>   +step +proj=helmert +x=598.1 +y=73.7 +z=418.2 +rx=0.202 +ry=0.045
+rz=-2.455
>         +s=6.7 +convention=position_vector
>   +step +inv +proj=cart +ellps=GRS80
>   +step +proj=pop +v_3
>   +step +proj=utm +zone=33 +ellps=GRS80
>
>
> It seems your custom definitions of the coordinate operation are missing
the axis swap step "+step +proj=axisswap +order=2,1".
> According to "projinfo -o WKT2:2019 "EPSG:31468", northing is the first
axis in EPSG:31468, thus the need for the axis swap.
>
> If you trust the QGIS coordinate operation, then why do you provide a
custom coordinate operation to ogr2ogr with the -ct option?
>
> >
> > Am 06.02.2021 um 22:24 schrieb Markus Metz:
> >
> >
> >
> > On Fri, Feb 5, 2021 at 3:40 PM Karsten Tebling <tebling at masuch.de>
wrote:
> > >
> > > Hello,
> > >
> > > i'm struggling with how to use the -ct option in ogr2ogr and could
need
> > > some help.
> > >
> > > i copied a NTv2.gsb to osgeo4w64/share/proj and edited the proj.db by
> > > inserting a new row in the grid_transformation-table. using this
> > > transformation in qgis works. however when i try to use it in ogr2ogr
> > > with the same data i always get "failed to reproject feature (geometry
> > > probably out of source or destination srs). no known way to write
> > > feature with geometry 'none'". here is my code:
> > >
> > > ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct
> > > "+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1
> > > +x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift
> > > +grids=NTv2LSBB_LSA.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF
> > > punkte_25833.dxf punkte_31468.dxf
> > >
> >
> > Is the grid NTv2LSBB_LSA.gsb used for hgridshift really covering the
full extent of punkte_31468.dxf ?
> > You can check with "gdalinfo NTv2LSBB_LSA.gsb" and "ogrinfo -so
punkte_31468.dxf".
> >
> > Markus M
> >
> > > i'm using the latest qgis-ltr and osgeo4w shell
> > >
> > > greetings
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev at lists.osgeo.org
> > > https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210209/272ea534/attachment-0001.html>

From markus.metz.giswork at gmail.com  Tue Feb  9 10:34:36 2021
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Tue, 9 Feb 2021 19:34:36 +0100
Subject: [gdal-dev] Compiling GDAL with HDF4 support
In-Reply-To: <c53b560d-bff6-ba34-3551-afa6f34580f7@gmail.com>
References: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
 <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>
 <01bef785-20d2-254a-4fb8-a6b9650fb474@gmail.com>
 <CAG+h=FF4L_s7Asdzxr9KpJdz2ieQVVD6bNuZRaLxUH2Ohd13OQ@mail.gmail.com>
 <1021f619-e198-85fa-4499-94cfbb1b5a0d@gmail.com>
 <69e617c0-6a29-b70-db47-6fbdcbddc6c@aitchison.me.uk>
 <c53b560d-bff6-ba34-3551-afa6f34580f7@gmail.com>
Message-ID: <CAG+h=FHQ1BbQSEjNge63MJLJQsO1SuRTTdVWVWsbdRYeyvsU=g@mail.gmail.com>

On Tue, Feb 9, 2021 at 10:54 AM Hern?n De Angelis <
variablestarlight at gmail.com> wrote:
>
>
> On 2021-02-09 10:49, Andrew C Aitchison wrote:
> > On Tue, 9 Feb 2021, Hern?n De Angelis wrote:
> >
> >> On 2021-02-08 20:22, Markus Metz wrote:
> >>> Is /usr/local/lib64 known to your system as a path to libraries?
> >>> Check the env var LD_LIBRARY_PATH or add "/usr/local/lib64" to some
> >>> file in /etc/ld.so.conf.d/ followed by "ldconfig" as root.
> >>>
> >>> You can also set the var LDFLAGS for configure if you have libraries
> >>> in a nonstandard directory, such as
> >>> LDFLAGS="/usr/local/lib64" ./configure ...
> >>>
> >> Thank you for your suggestion, Markus, but /usr/local/Lib64 is in the
> >> library path.

Details about the reason for the failure should be at the end of config.log

My wild guess is that a library needed by HDF4 is not linked in.

HTH,

Markus M

> >
> > What platform are you on ? On most unix systems
> >     /usr/local/Lib64
> > is not the same as
> >     /usr/local/lib64
> > !
> >
> Thanks, I am aware of that ;-)
>
> It was a typo in the message.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210209/e64173fd/attachment.html>

From tebling at masuch.de  Tue Feb  9 23:00:05 2021
From: tebling at masuch.de (Karsten Tebling)
Date: Wed, 10 Feb 2021 08:00:05 +0100
Subject: [gdal-dev] how to use the -ct option in ogr2ogr
In-Reply-To: <CAG+h=FHBxU+7Xtsph-R9nN9OuuKm2yasXT8hveqYRETYspVwpg@mail.gmail.com>
References: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>
 <CAG+h=FHVrLcbZ3Gtz0jXaV0V8mCEKKOxSjd7Msa0PbToGEDVpQ@mail.gmail.com>
 <fcbac1a7-5bbb-bf00-a7e8-ddf824674587@masuch.de>
 <CAG+h=FGZJ3-VqUoHBs7LAi6M6eLhZ_MF0f4_a84qgVzdedA_ow@mail.gmail.com>
 <0f4628b9-42f9-d99c-dce2-31ce315a4985@masuch.de>
 <CAG+h=FHBxU+7Xtsph-R9nN9OuuKm2yasXT8hveqYRETYspVwpg@mail.gmail.com>
Message-ID: <ed17dbd2-d519-0be8-0f5b-98f77a0f00d2@masuch.de>

without a pipeline given this might be true, but using the -ct option, 
the docs clearly say "It must take into account the axis order of the 
source and target CRS.". so the axisswap was the missing part in my 
string and now it works.

thanks for your help =)

Am 09.02.2021 um 18:56 schrieb Markus Metz:
>
>
> On Tue, Feb 9, 2021 at 9:15 AM Karsten Tebling <tebling at masuch.de 
> <mailto:tebling at masuch.de>> wrote:
> >
> > the projinfo-command was exactly what i needed but didn't know it 
> exists! the ogr2ogr -ct command works now, thank you very much!
>
> Interesting, because I am sure my previous suggestion to include the 
> axis swap step was wrong.
>
> ogr2ogr should handle the axis order on its own correctly if you just 
> provide
> ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833"
> without a custom pipeline given with the -ct option
>
> Markus M
>
> >
> > could this example be added to the official examples on 
> https://gdal.org/programs/ogr2ogr.html#ogr2ogr 
> <https://gdal.org/programs/ogr2ogr.html#ogr2ogr> ? i think the -ct 
> option is very useful and an example for it would be good. i could 
> also try to edit it on my own and send a pull request if that helps
> >
> > i just like to use the console if i can, QGIS has it's advantages 
> but if i have the option to use gdal directly or via a wrapper like 
> QGIS, i like to use gdal directly. this also saves me from the pain 
> when the wrapper does implement something wrong or uses it's own 
> functions instead of gdal, which in addition could change every new 
> version and need to be checked. using gdal directly is much more 
> reliable for me.
> >
> > Am 08.02.2021 um 22:18 schrieb Markus Metz:
> >
> >
> >
> > On Mon, Feb 8, 2021 at 10:23 AM Karsten Tebling <tebling at masuch.de 
> <mailto:tebling at masuch.de>> wrote:
> > >
> > > gdalinfo for NTv2LSBB_LSA.gsb gave the following information:
> > >
> > > Size is 256, 264
> > > Coordinate System is: EPSG 4326
> > > Origin: 10.5, 53.1
> > > SYSTEM_F: S4283
> > > SYSTEM_T: ETRS89
> > > Upper Left 10.5, 53.1
> > > Lower Left 10.5, 50.9
> > > Upper Right 13.3, 53.1
> > > Lower Right 13.3, 50.9
> > >
> > > ogrinfo for punkte_31468.dxf gave the following information:
> > >
> > > Geometry: Unknown (any)
> > > Feature Count: 36
> > > Extent: (4523806.5, 5758974.7) - (4524134.7, 5759234.0)
> > > Layer SRS WKT: (unknown)
> > >
> > > according to QGIS punkte_31468.dxf should be at 11.6 52.1 which is 
> inside the extent of the NTv2LSBB_LSA.gsb. after checking the 
> documentation for the NTv2LSBB_LSA.gsb i noticed i couldn't use it for 
> transformations from 31468 to 25833, that's why i tried it with 
> BETA2007.gsb instead, but it didn't work either - it gave the same errors.
> > >
> > > gdalinfo for BETA2007.gsb gave the following information:
> > >
> > > Size is 62, 84
> > > Coordinate System is: EPSG 4326
> > > Origin: 5.4, 55.4
> > > SYSTEM_F: DHDN90
> > > SYSTEM_T: ETRS89
> > > Upper Left 5.4, 55.4
> > > Lower Left 5.4, 47.0
> > > Upper Right 15.8, 55.4
> > > Lower Right 15.6, 47.0
> > >
> > > my adjusted code for BETA2007.gsb looks like:
> > >
> > > ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct 
> "+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 
> +x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift 
> +grids=BETA2007.gsb +step +proj=utm +zone=33 +ellps=GRS80" -f DXF 
> punkte_25833.dxf punkte_31468.dxf
> > >
> > > the points i used to test this were digitized around Magdeburg, 
> Saxony-Anhalt in EPSG:31468. according to aerial data and 
> openstreetmap, the position and coordinate system are correct when i 
> check it in QGIS and switch to different coordinate systems.
> >
> > Wit PROJ 7.2.1 and
> > projinfo -o PROJ -s "EPSG:31468" -t "EPSG:25833"
> > I get
> > Operation No. 1:
> >
> > unknown id, Inverse of 3-degree Gauss-Kruger zone 4 + DHDN to ETRS89 
> (8) + UTM zone 33N, 0.9 m, Germany - onshore - states of 
> Baden-Wurtemberg, Bayern, Berlin, Brandenburg, Bremen, Hamburg, 
> Hessen, Mecklenburg-Vorpommern, Niedersachsen, Nordrhein-Westfalen, 
> Rheinland-Pfalz, Saarland, Sachsen, Sachsen-Anhalt, 
> Schleswig-Holstein, Thuringen.
> >
> > PROJ string:
> > +proj=pipeline
> > ? +step +proj=axisswap +order=2,1
> > ? +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0
> > ? ? ? ? +ellps=bessel
> > ? +step +proj=hgridshift +grids=de_adv_BETA2007.tif
> > ? +step +proj=utm +zone=33 +ellps=GRS80
> >
> > -------------------------------------
> > Operation No. 2:
> >
> > unknown id, Inverse of 3-degree Gauss-Kruger zone 4 + DHDN to ETRS89 
> (2) + UTM zone 33N, 3 m, Germany - states of former West Germany 
> onshore - Baden-Wurtemberg, Bayern, Bremen, Hamburg, Hessen, 
> Niedersachsen, Nordrhein-Westfalen, Rheinland-Pfalz, Saarland, 
> Schleswig-Holstein.
> >
> > PROJ string:
> > +proj=pipeline
> > ? +step +proj=axisswap +order=2,1
> > ? +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1 +x_0=4500000 +y_0=0
> > ? ? ? ? +ellps=bessel
> > ? +step +proj=push +v_3
> > ? +step +proj=cart +ellps=bessel
> > ? +step +proj=helmert +x=598.1 +y=73.7 +z=418.2 +rx=0.202 +ry=0.045 
> +rz=-2.455
> > ? ? ? ? +s=6.7 +convention=position_vector
> > ? +step +inv +proj=cart +ellps=GRS80
> > ? +step +proj=pop +v_3
> > ? +step +proj=utm +zone=33 +ellps=GRS80
> >
> >
> > It seems your custom definitions of the coordinate operation are 
> missing the axis swap step "+step +proj=axisswap +order=2,1".
> > According to "projinfo -o WKT2:2019 "EPSG:31468", northing is the 
> first axis in EPSG:31468, thus the need for the axis swap.
> >
> > If you trust the QGIS coordinate operation, then why do you provide 
> a custom coordinate operation to ogr2ogr with the -ct option?
> >
> > >
> > > Am 06.02.2021 um 22:24 schrieb Markus Metz:
> > >
> > >
> > >
> > > On Fri, Feb 5, 2021 at 3:40 PM Karsten Tebling <tebling at masuch.de 
> <mailto:tebling at masuch.de>> wrote:
> > > >
> > > > Hello,
> > > >
> > > > i'm struggling with how to use the -ct option in ogr2ogr and 
> could need
> > > > some help.
> > > >
> > > > i copied a NTv2.gsb to osgeo4w64/share/proj and edited the 
> proj.db by
> > > > inserting a new row in the grid_transformation-table. using this
> > > > transformation in qgis works. however when i try to use it in 
> ogr2ogr
> > > > with the same data i always get "failed to reproject feature 
> (geometry
> > > > probably out of source or destination srs). no known way to write
> > > > feature with geometry 'none'". here is my code:
> > > >
> > > > ogr2ogr -s_srs "EPSG:31468" -t_srs "EPSG:25833" -dim XYZ -ct
> > > > "+proj=pipeline +step +inv +proj=tmerc +lat_0=0 +lon_0=12 +k=1
> > > > +x_0=4500000 +y_0=0 +ellps=bessel +step +proj=hgridshift
> > > > +grids=NTv2LSBB_LSA.gsb +step +proj=utm +zone=33 +ellps=GRS80" 
> -f DXF
> > > > punkte_25833.dxf punkte_31468.dxf
> > > >
> > >
> > > Is the grid NTv2LSBB_LSA.gsb used for hgridshift really covering 
> the full extent of punkte_31468.dxf ?
> > > You can check with "gdalinfo NTv2LSBB_LSA.gsb" and "ogrinfo -so 
> punkte_31468.dxf".
> > >
> > > Markus M
> > >
> > > > i'm using the latest qgis-ltr and osgeo4w shell
> > > >
> > > > greetings
> > > > _______________________________________________
> > > > gdal-dev mailing list
> > > > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> > > > https://lists.osgeo.org/mailman/listinfo/gdal-dev 
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210210/da0ba550/attachment.html>

From variablestarlight at gmail.com  Tue Feb  9 23:24:28 2021
From: variablestarlight at gmail.com (=?UTF-8?Q?Hern=c3=a1n_De_Angelis?=)
Date: Wed, 10 Feb 2021 08:24:28 +0100
Subject: [gdal-dev] Compiling GDAL with HDF4 support
In-Reply-To: <CAG+h=FHQ1BbQSEjNge63MJLJQsO1SuRTTdVWVWsbdRYeyvsU=g@mail.gmail.com>
References: <ae745b8d-5874-cf45-833a-fd8acf8212d7@gmail.com>
 <5237f8aa-f3df-1643-3562-25fa5b73fd12@aitchison.me.uk>
 <01bef785-20d2-254a-4fb8-a6b9650fb474@gmail.com>
 <CAG+h=FF4L_s7Asdzxr9KpJdz2ieQVVD6bNuZRaLxUH2Ohd13OQ@mail.gmail.com>
 <1021f619-e198-85fa-4499-94cfbb1b5a0d@gmail.com>
 <69e617c0-6a29-b70-db47-6fbdcbddc6c@aitchison.me.uk>
 <c53b560d-bff6-ba34-3551-afa6f34580f7@gmail.com>
 <CAG+h=FHQ1BbQSEjNge63MJLJQsO1SuRTTdVWVWsbdRYeyvsU=g@mail.gmail.com>
Message-ID: <f4cb39a0-4fe9-227d-71d0-3d58e33f3cee@gmail.com>


On 2021-02-09 19:34, Markus Metz wrote:
>
>
> On Tue, Feb 9, 2021 at 10:54 AM Hern?n De Angelis 
> <variablestarlight at gmail.com <mailto:variablestarlight at gmail.com>> wrote:
> >
> >
> > On 2021-02-09 10:49, Andrew C Aitchison wrote:
> > > On Tue, 9 Feb 2021, Hern?n De Angelis wrote:
> > >
> > >> On 2021-02-08 20:22, Markus Metz wrote:
> > >>> Is /usr/local/lib64 known to your system as a path to libraries?
> > >>> Check the env var LD_LIBRARY_PATH or add "/usr/local/lib64" to some
> > >>> file in /etc/ld.so.conf.d/ followed by "ldconfig" as root.
> > >>>
> > >>> You can also set the var LDFLAGS for configure if you have libraries
> > >>> in a nonstandard directory, such as
> > >>> LDFLAGS="/usr/local/lib64" ./configure ...
> > >>>
> > >> Thank you for your suggestion, Markus, but /usr/local/Lib64 is in the
> > >> library path.
>
> Details about the reason for the failure should be at the end of 
> config.log
>
> My wild guess is that a library needed by HDF4 is not linked in.
>
Not wild by any measure, Markus, but rather spot on! There is indeed a 
problem with xdr, one of those libraries (thanks Joe from hdfgroup for 
tracking this down). I do not have time now to investigate this further, 
unfortunately.

Best

Hern?n



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210210/42e802ee/attachment.html>

From neteler at osgeo.org  Wed Feb 10 13:15:40 2021
From: neteler at osgeo.org (Markus Neteler)
Date: Wed, 10 Feb 2021 22:15:40 +0100
Subject: [gdal-dev] how to use the -ct option in ogr2ogr
In-Reply-To: <ed17dbd2-d519-0be8-0f5b-98f77a0f00d2@masuch.de>
References: <40889937-93ce-bdf8-8e00-464e21626993@masuch.de>
 <CAG+h=FHVrLcbZ3Gtz0jXaV0V8mCEKKOxSjd7Msa0PbToGEDVpQ@mail.gmail.com>
 <fcbac1a7-5bbb-bf00-a7e8-ddf824674587@masuch.de>
 <CAG+h=FGZJ3-VqUoHBs7LAi6M6eLhZ_MF0f4_a84qgVzdedA_ow@mail.gmail.com>
 <0f4628b9-42f9-d99c-dce2-31ce315a4985@masuch.de>
 <CAG+h=FHBxU+7Xtsph-R9nN9OuuKm2yasXT8hveqYRETYspVwpg@mail.gmail.com>
 <ed17dbd2-d519-0be8-0f5b-98f77a0f00d2@masuch.de>
Message-ID: <CALFmHhuBUgy_wHgwJv=W8q5oer=MZP6S6vvTFd=4N8LUPX8z_g@mail.gmail.com>

On Wed, Feb 10, 2021 at 8:00 AM Karsten Tebling <tebling at masuch.de> wrote:
>
> without a pipeline given this might be true, but using the -ct option, the docs clearly say "It must take into account the axis order of the source and target CRS.". so the axisswap was the missing part in my string and now it works.
>
> thanks for your help =)

If you have suggestions to improve the manual page
(https://gdal.org/programs/ogr2ogr.html#ogr2ogr) please propose edits
as a pull request.

thanks,
markusN

From rdmailings at duif.net  Thu Feb 11 00:55:22 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 11 Feb 2021 09:55:22 +0100
Subject: [gdal-dev] Info about technical details of loading massive data
Message-ID: <30fafaae-ca78-334b-ca70-4e0d156070a2@duif.net>

Hi Dev's,

I had a discussion with a friend about the sometimes hard times a GIS-person has when handling/loading/viewing (using QGIS/GDAL) massive (vector/raster) datasets, versus the R/Data-mangling community.

Ending with a conclusion that it seemed (to us) that data-scientists try to load as much (clean objects/multi dimensional arrays) data in memory as possible, while GIS peeps always use the 'let's make it some kind of feature object from first, and do lazy loading' way use.

BUT I'm not sure about this, so: is there maybe somebody who held a presentation or wrote a paper on how, for example gdal, handles a huge point file vs R (memory/disk/io wise)?

While historically the 'Simple Features'-paradigm has be VERY valuable for us, I'm questioning myself if there could be some 'more efficient' way of handling the every time growing datasets we have to handle... I envision a super fast memory-data viewer or so, so I can quickly view my 16 Million points in my Postgis DB easily (mmm probably have to fork QGIS 0.1 for this... QGIS started of as a 'simple' postgis viewer :-) ) 

Thanks for any input.

Regards,

Richard Duivenvoorde

From andrew at aitchison.me.uk  Thu Feb 11 03:05:59 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Thu, 11 Feb 2021 11:05:59 +0000 (GMT)
Subject: [gdal-dev] Info about technical details of loading massive data
In-Reply-To: <30fafaae-ca78-334b-ca70-4e0d156070a2@duif.net>
References: <30fafaae-ca78-334b-ca70-4e0d156070a2@duif.net>
Message-ID: <6235127-c67c-e4aa-bf57-57de6ba64ec9@aitchison.me.uk>

On Thu, 11 Feb 2021, Richard Duivenvoorde wrote:

> Hi Dev's,
>
> I had a discussion with a friend about the sometimes hard times a
> GIS-person has when handling/loading/viewing (using QGIS/GDAL)
> massive (vector/raster) datasets, versus the R/Data-mangling
> community.
>
> Ending with a conclusion that it seemed (to us) that data-scientists
> try to load as much (clean objects/multi dimensional arrays) data in
> memory as possible, while GIS peeps always use the 'let's make it
> some kind of feature object from first, and do lazy loading' way
> use.
>
> BUT I'm not sure about this, so: is there maybe somebody who held a
> presentation or wrote a paper on how, for example gdal, handles a
> huge point file vs R (memory/disk/io wise)?
>
> While historically the 'Simple Features'-paradigm has be VERY
> valuable for us, I'm questioning myself if there could be some 'more
> efficient' way of handling the every time growing datasets we have
> to handle... I envision a super fast memory-data viewer or so, so I
> can quickly view my 16 Million points in my Postgis DB easily (mmm
> probably have to fork QGIS 0.1 for this... QGIS started of as a
> 'simple' postgis viewer :-) )

My experience is limited to file-based data and machines
have grown to the point where the files will fit in memory.

I have written a couple of device drivers (not yet released)
for raster file formats which seem designed for memory-mapped
read access. Although functions like VSIFReadL support
reading from memory-based files, I have not found a way to
use memory-mapping in a driver.
This makes me wonder whether I end up with three copies of the map in
memory in addition to whatever is needed for the screen display;
one in the Linux file-system cache, one in the driver
and one (or perhaps two) in the gdal library and QGIS ?

I haven't looked, and perhaps should, to see whether QGIS
reads a map once into whatever format it finds best (possibly compressed),
keeps each map open and reads areas as needs, or repeatedly opens, reads
and closes each map.
Without knowing that, it isn't clear which map decompressions and
memory to memory copies are necessary.

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From daniele.romagnoli at geo-solutions.it  Thu Feb 11 06:21:35 2021
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu, 11 Feb 2021 15:21:35 +0100
Subject: [gdal-dev] mosaicking files with partial overlap and binary mask
In-Reply-To: <CADXYQQ5UD7VNzU1sF5peZqCwyP+1dMO-YNGtgvzD78N5GM0MJA@mail.gmail.com>
References: <CAJaHrDzshx33KZnVVk03Hn0Qe3pYj=mBwTTj_fr6P3tyc0sbyw@mail.gmail.com>
 <CADXYQQ5=uSgr+x-3+hNjuWLR=b_Z7+f5iG2FcqvArk0Tgv2qzQ@mail.gmail.com>
 <CAJaHrDw2bvOtQkaqM4wJWT=zMD8r8goiDzRHed7iEt7Vn__GoA@mail.gmail.com>
 <CADXYQQ5UD7VNzU1sF5peZqCwyP+1dMO-YNGtgvzD78N5GM0MJA@mail.gmail.com>
Message-ID: <CAJaHrDyvFK510oMwDGR+w4ODHdP2gbr+PDA7CqDff=RX_gvJ1A@mail.gmail.com>

Thanks for the feedback, Patrick.
I have downloaded the latest build from GisInternals and it worked as
expected.
I have another question.
It looks like warping an input file containing a binary mask isn't
preserving the binary mask on the output.
Should I specify any flag for that?

Thanks for the help.
Regards,
Daniele




On Thu, Jan 28, 2021 at 4:23 PM Patrick Young <
patrick.mckendree.young at gmail.com> wrote:

> I do not!
>
> If you want to try it out without building latest yourself and can use
> docker, you can snag one of the latest containers here and see if it works
> for you:
>
> https://hub.docker.com/r/osgeo/gdal/tags?page=1&ordering=last_updated
>
> Best,
> Patrick
>
> On Thu, Jan 28, 2021 at 2:12 AM Daniele Romagnoli <
> daniele.romagnoli at geo-solutions.it> wrote:
>
>> Hi Patrick,
>> nice!
>> Thanks for the feedback.
>>
>> Do you have any info about eventual backports to previous versions?
>>
>> Regards,
>> Daniele
>>
>> On Thu, Jan 28, 2021 at 12:02 AM Patrick Young <
>> patrick.mckendree.young at gmail.com> wrote:
>>
>>> Hi Daniele,
>>>
>>> Even added this functionality to VRTs just recently, see
>>>
>>> https://lists.osgeo.org/pipermail/gdal-dev/2020-December/053178.html
>>>
>>> I think it is slated for GDAL 3.3 but you could always build the
>>> bleeding edge.
>>>
>>> Patrick
>>>
>>> On Wed, Jan 27, 2021 at 3:50 AM Daniele Romagnoli <
>>> daniele.romagnoli at geo-solutions.it> wrote:
>>>
>>>> Hi list,
>>>> I have some TIFF datasets with partially overlapping edges and embedded
>>>> binary masks to keep into account which parts along the edges should be
>>>> masked out.
>>>> When showing all the images on QGIS it looks good since the binary mask
>>>> do its job by making the "black/white" overlapping edge masked out.
>>>>
>>>> Now I need to create a single TIF from all of these images.
>>>> I have tried with gdalbuildvrt but it doesn't produce good result.
>>>> Checking the doc I saw this:
>>>>
>>>>
>>>> *If there is some amount of spatial overlapping between files [...]
>>>> currently, alpha channel is not taken into account to do alpha compositing
>>>> (so a source with alpha=0 appearing on top of another source will override
>>>> is content). This might be changed in later versions.  *
>>>>
>>>> So I think it's expected and I have switched to gdal_merge.py.
>>>> It works better since it does alpha compositing but it looks like the
>>>> result doesn't preserve the binary mask which I still need since I have M
>>>> groups of N files which I need to process in 2 passes:
>>>> - the inner group of N files get merged using the binary mask to a
>>>> bigger file.
>>>> - all the M bigger files get mosaicked again to a single huge file.
>>>>
>>>> I will spend some more time in testing different attempts.
>>>> In the meantime, do you have any suggestion or past experience on how
>>>> to deal with that?
>>>> Side note: I have vague memory of gdal_merge being somehow memory
>>>> bounded, throwing memory allocation errors when trying to compose big
>>>> images. This is why in the past I was using gdalbuildvrt to do composition
>>>> (without overlapping).
>>>>
>>>> Thanks in advance.
>>>> Regards,
>>>> Daniele
>>>>
>>>>
>>>>
>>>>
>>>> --
>>>> Regards,
>>>> Daniele Romagnoli
>>>> ==
>>>> GeoServer Professional Services from the experts! Visit
>>>> http://goo.gl/it488V for more information.
>>>> ==
>>>>
>>>> Ing. Daniele Romagnoli
>>>> Senior Software Engineer
>>>>
>>>> GeoSolutions S.A.S.
>>>> Via di Montramito 3/A
>>>> 55054  Massarosa (LU)
>>>> Italy
>>>> phone: +39 0584 962313
>>>> fax:      +39 0584 1660272
>>>>
>>>> http://www.geo-solutions.it
>>>> http://twitter.com/geosolutions_it
>>>>
>>>> -------------------------------------------------------
>>>>
>>>> Con riferimento alla normativa sul trattamento dei dati personali (Reg.
>>>> UE 2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si
>>>> precisa che ogni circostanza inerente alla presente email (il suo
>>>> contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ?
>>>> riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
>>>> messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra
>>>> operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.
>>>>
>>>> This email is intended only for the person or entity to which it is
>>>> addressed and may contain information that is privileged, confidential or
>>>> otherwise protected from disclosure. We remind that - as provided by
>>>> European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this
>>>> e-mail or the information herein by anyone other than the intended
>>>> recipient is prohibited. If you have received this email by mistake, please
>>>> notify us immediately by telephone or e-mail.
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev at lists.osgeo.org
>>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>
>> --
>> Regards,
>> Daniele Romagnoli
>> ==
>> GeoServer Professional Services from the experts! Visit
>> http://goo.gl/it488V for more information.
>> ==
>>
>> Ing. Daniele Romagnoli
>> Senior Software Engineer
>>
>> GeoSolutions S.A.S.
>> Via di Montramito 3/A
>> 55054  Massarosa (LU)
>> Italy
>> phone: +39 0584 962313
>> fax:      +39 0584 1660272
>>
>> http://www.geo-solutions.it
>> http://twitter.com/geosolutions_it
>>
>> -------------------------------------------------------
>>
>> Con riferimento alla normativa sul trattamento dei dati personali (Reg.
>> UE 2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si
>> precisa che ogni circostanza inerente alla presente email (il suo
>> contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ?
>> riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
>> messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra
>> operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.
>>
>> This email is intended only for the person or entity to which it is
>> addressed and may contain information that is privileged, confidential or
>> otherwise protected from disclosure. We remind that - as provided by
>> European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this
>> e-mail or the information herein by anyone other than the intended
>> recipient is prohibited. If you have received this email by mistake, please
>> notify us immediately by telephone or e-mail.
>>
>

-- 
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si
precisa che ogni circostanza inerente alla presente email (il suo
contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ?
riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra
operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is
addressed and may contain information that is privileged, confidential or
otherwise protected from disclosure. We remind that - as provided by
European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this
e-mail or the information herein by anyone other than the intended
recipient is prohibited. If you have received this email by mistake, please
notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/34827668/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 11 06:27:19 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 11 Feb 2021 07:27:19 -0700 (MST)
Subject: [gdal-dev] mosaicking files with partial overlap and binary mask
In-Reply-To: <CAJaHrDyvFK510oMwDGR+w4ODHdP2gbr+PDA7CqDff=RX_gvJ1A@mail.gmail.com>
References: <CAJaHrDzshx33KZnVVk03Hn0Qe3pYj=mBwTTj_fr6P3tyc0sbyw@mail.gmail.com>
 <CADXYQQ5=uSgr+x-3+hNjuWLR=b_Z7+f5iG2FcqvArk0Tgv2qzQ@mail.gmail.com>
 <CAJaHrDw2bvOtQkaqM4wJWT=zMD8r8goiDzRHed7iEt7Vn__GoA@mail.gmail.com>
 <CADXYQQ5UD7VNzU1sF5peZqCwyP+1dMO-YNGtgvzD78N5GM0MJA@mail.gmail.com>
 <CAJaHrDyvFK510oMwDGR+w4ODHdP2gbr+PDA7CqDff=RX_gvJ1A@mail.gmail.com>
Message-ID: <1613053639212-0.post@n6.nabble.com>

Hi Daniele,

Test data, please.

-Jukka Rahkonen-



Daniele Romagnoli-3 wrote
> Thanks for the feedback, Patrick.
> I have downloaded the latest build from GisInternals and it worked as
> expected.
> I have another question.
> It looks like warping an input file containing a binary mask isn't
> preserving the binary mask on the output.
> Should I specify any flag for that?
> 
> Thanks for the help.
> Regards,
> Daniele
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From daniele.romagnoli at geo-solutions.it  Thu Feb 11 06:56:42 2021
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu, 11 Feb 2021 15:56:42 +0100
Subject: [gdal-dev] mosaicking files with partial overlap and binary mask
In-Reply-To: <1613053639212-0.post@n6.nabble.com>
References: <CAJaHrDzshx33KZnVVk03Hn0Qe3pYj=mBwTTj_fr6P3tyc0sbyw@mail.gmail.com>
 <CADXYQQ5=uSgr+x-3+hNjuWLR=b_Z7+f5iG2FcqvArk0Tgv2qzQ@mail.gmail.com>
 <CAJaHrDw2bvOtQkaqM4wJWT=zMD8r8goiDzRHed7iEt7Vn__GoA@mail.gmail.com>
 <CADXYQQ5UD7VNzU1sF5peZqCwyP+1dMO-YNGtgvzD78N5GM0MJA@mail.gmail.com>
 <CAJaHrDyvFK510oMwDGR+w4ODHdP2gbr+PDA7CqDff=RX_gvJ1A@mail.gmail.com>
 <1613053639212-0.post@n6.nabble.com>
Message-ID: <CAJaHrDwNbQnOVe1gC+XdBaUrN2r3w24rANLiKPc+Wb9c26+ffA@mail.gmail.com>

Hi Jukka,
sorry but I can't share the data. Is owned by a customer :(

Long story short:
I have several raster tiles (with size around 5000x5000) and a shapefile
containing edges defining valid area of each tile.

I have used gdalrasterize to extract the needed crop for each tile to setup
a binary mask.
Then, I have combined the binary mask with the original tile and rewritten
as a new TIFF file with internal masks.
Then, I'm composing all the TIFF files to a VRT.
When rewriting that VRT to a mosaic TIFF, everything looks good. I see the
binary mask is used to properly compose/overlap/mask the pieces of the
mosaic and the output contains the mask too. This is an example of gdalinfo
on one of the mosaicked tiff:

Driver: GTiff/GeoTIFF
Files: out.tif
Size is 45842, 42506
Coordinate System is:
[... OMITTED... ]

Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
  JPEGTABLESMODE=1
  JPEG_QUALITY=75
  SOURCE_COLOR_SPACE=YCbCr
Corner Coordinates:
  [... OMITTED... ]
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET

So, as you can see the masks are added to the mosaicked dataset.

However, when running
gdalwarp -t_srs EPSG:NEWCODE out.tif warped.tif

the binary mask is lost from the output file.
I have also tried using -dstalpha but it complains that "Destination
dataset has 3 bands, but at least 4 are needed" which makes sense.

So I was just wondering if there is anything I should be aware of when
warping a masked TIFF.
I would probably try to transform the binary mask to an alpha band, do the
warp and then convert back the alpha to a binary mask....

Thanks for any feedback in advance.
Regards,
Daniele





On Thu, Feb 11, 2021 at 3:27 PM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> Hi Daniele,
>
> Test data, please.
>
> -Jukka Rahkonen-
>
>
>
> Daniele Romagnoli-3 wrote
> > Thanks for the feedback, Patrick.
> > I have downloaded the latest build from GisInternals and it worked as
> > expected.
> > I have another question.
> > It looks like warping an input file containing a binary mask isn't
> > preserving the binary mask on the output.
> > Should I specify any flag for that?
> >
> > Thanks for the help.
> > Regards,
> > Daniele
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si
precisa che ogni circostanza inerente alla presente email (il suo
contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ?
riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra
operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is
addressed and may contain information that is privileged, confidential or
otherwise protected from disclosure. We remind that - as provided by
European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this
e-mail or the information herein by anyone other than the intended
recipient is prohibited. If you have received this email by mistake, please
notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/bc35d281/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 11 07:09:36 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 11 Feb 2021 15:09:36 +0000
Subject: [gdal-dev] mosaicking files with partial overlap and binary mask
Message-ID: <019ab9b2e213408ba8d7ac2276c64578@maanmittauslaitos.fi>

Hi,

I do not want your customers data but something that is similar. With overlaps and mask and what ever is essential. The actual pixels are not essential nor the real location. Have a look at the gdal_create utility https://gdal.org/programs/gdal_create.html. Perhaps you can create a minimal dataset for testing with it. The smaller the better.

-Jukka Rahkonen-

L?hett?j?: Daniele Romagnoli <daniele.romagnoli at geo-solutions.it>
L?hetetty: torstai 11. helmikuuta 2021 16.57
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal-dev at lists.osgeo.org
Aihe: Re: [gdal-dev] mosaicking files with partial overlap and binary mask

Hi Jukka,
sorry but I can't share the data. Is owned by a customer :(

Long story short:
I have several raster tiles (with size around 5000x5000) and a shapefile containing edges defining valid area of each tile.

I have used gdalrasterize to extract the needed crop for each tile to setup a binary mask.
Then, I have combined the binary mask with the original tile and rewritten as a new TIFF file with internal masks.
Then, I'm composing all the TIFF files to a VRT.
When rewriting that VRT to a mosaic TIFF, everything looks good. I see the binary mask is used to properly compose/overlap/mask the pieces of the mosaic and the output contains the mask too. This is an example of gdalinfo on one of the mosaicked tiff:

Driver: GTiff/GeoTIFF
Files: out.tif
Size is 45842, 42506
Coordinate System is:
[... OMITTED... ]

Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
  JPEGTABLESMODE=1
  JPEG_QUALITY=75
  SOURCE_COLOR_SPACE=YCbCr
Corner Coordinates:
  [... OMITTED... ]
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET

So, as you can see the masks are added to the mosaicked dataset.

However, when running
gdalwarp -t_srs EPSG:NEWCODE out.tif warped.tif

the binary mask is lost from the output file.
I have also tried using -dstalpha but it complains that "Destination dataset has 3 bands, but at least 4 are needed" which makes sense.

So I was just wondering if there is anything I should be aware of when warping a masked TIFF.
I would probably try to transform the binary mask to an alpha band, do the warp and then convert back the alpha to a binary mask....

Thanks for any feedback in advance.
Regards,
Daniele





On Thu, Feb 11, 2021 at 3:27 PM jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi Daniele,

Test data, please.

-Jukka Rahkonen-



Daniele Romagnoli-3 wrote
> Thanks for the feedback, Patrick.
> I have downloaded the latest build from GisInternals and it worked as
> expected.
> I have another question.
> It looks like warping an input file containing a binary mask isn't
> preserving the binary mask on the output.
> Should I specify any flag for that?
>
> Thanks for the help.
> Regards,
> Daniele
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo<mailto:gdal-dev at .osgeo>

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
Regards,
Daniele Romagnoli
==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V for more information.
==

Ing. Daniele Romagnoli
Senior Software Engineer

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
Italy
phone: +39 0584 962313
fax:      +39 0584 1660272

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

-------------------------------------------------------

Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni circostanza inerente alla presente email (il suo contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ? riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.

This email is intended only for the person or entity to which it is addressed and may contain information that is privileged, confidential or otherwise protected from disclosure. We remind that - as provided by European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this e-mail or the information herein by anyone other than the intended recipient is prohibited. If you have received this email by mistake, please notify us immediately by telephone or e-mail.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/ceaf759a/attachment-0001.html>

From nelson.gerald.c at gmail.com  Thu Feb 11 07:34:36 2021
From: nelson.gerald.c at gmail.com (Gerald Nelson)
Date: Thu, 11 Feb 2021 15:34:36 +0000
Subject: [gdal-dev] Info about technical details of loading massive data
In-Reply-To: <6235127-c67c-e4aa-bf57-57de6ba64ec9@aitchison.me.uk>
References: <30fafaae-ca78-334b-ca70-4e0d156070a2@duif.net>
 <6235127-c67c-e4aa-bf57-57de6ba64ec9@aitchison.me.uk>
Message-ID: <MW2PR16MB2172E0D2513F8B616295B355AD8C9@MW2PR16MB2172.namprd16.prod.outlook.com>

I?m an end user, of software for which gdal is a critical input, in particular the R package terra, the successor to the raster package. I?m using it with very large climate data files. Terra (and raster) are built to deal with memory space available and the read and write from disk to temporary files. So in principle you can work with very large data sets on a machine with relatively little ram. Depending on your disk speed this can be tolerable or extremely slow.

But my ad hoc experimentation with a mac book pro with 32 gb of ram and an intel processor and a linux box with 64 gb has shown some remarkable differences. The bottom line is that the mac?s memory management is incredible. I can look at the system monitor on the amount ram an rsession is using and see 50 gb, with no memory pressure indicated and no temporary files being written by terra. On the linux box, the same R code crashes the machine. And code that takes x time on the mac takes 2-3 x time on the linux box.

And this is before the new Apple silicon, which by all accounts speeds up things dramatically. I?m saving my pennies.

Gerald C. Nelson
Professor Emeritus, UIUC
+1 217-390-7888 (cell)
+1 970-639-2079 (land line)
Skype: jerrynelson
http://bit.ly/1arho7d

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Andrew C Aitchison <andrew at aitchison.me.uk>
Date: Thursday, February 11, 2021 at 4:06 AM
To: Richard Duivenvoorde <rdmailings at duif.net>
Cc: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Info about technical details of loading massive data

On Thu, 11 Feb 2021, Richard Duivenvoorde wrote:

Hi Dev's,

I had a discussion with a friend about the sometimes hard times a
GIS-person has when handling/loading/viewing (using QGIS/GDAL)
massive (vector/raster) datasets, versus the R/Data-mangling
community.

Ending with a conclusion that it seemed (to us) that data-scientists
try to load as much (clean objects/multi dimensional arrays) data in
memory as possible, while GIS peeps always use the 'let's make it
some kind of feature object from first, and do lazy loading' way
use.

BUT I'm not sure about this, so: is there maybe somebody who held a
presentation or wrote a paper on how, for example gdal, handles a
huge point file vs R (memory/disk/io wise)?

While historically the 'Simple Features'-paradigm has be VERY
valuable for us, I'm questioning myself if there could be some 'more
efficient' way of handling the every time growing datasets we have
to handle... I envision a super fast memory-data viewer or so, so I
can quickly view my 16 Million points in my Postgis DB easily (mmm
probably have to fork QGIS 0.1 for this... QGIS started of as a
'simple' postgis viewer :-) )

My experience is limited to file-based data and machines
have grown to the point where the files will fit in memory.

I have written a couple of device drivers (not yet released)
for raster file formats which seem designed for memory-mapped
read access. Although functions like VSIFReadL support
reading from memory-based files, I have not found a way to
use memory-mapping in a driver.
This makes me wonder whether I end up with three copies of the map in
memory in addition to whatever is needed for the screen display;
one in the Linux file-system cache, one in the driver
and one (or perhaps two) in the gdal library and QGIS ?

I haven't looked, and perhaps should, to see whether QGIS
reads a map once into whatever format it finds best (possibly compressed),
keeps each map open and reads areas as needs, or repeatedly opens, reads
and closes each map.
Without knowing that, it isn't clear which map decompressions and
memory to memory copies are necessary.

--
Andrew C. Aitchison                                                                        Kendal, UK
                                                andrew at aitchison.me.uk<mailto:andrew at aitchison.me.uk>
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/77bb4728/attachment.html>

From andrew.murdoch.dev at gmail.com  Thu Feb 11 08:06:00 2021
From: andrew.murdoch.dev at gmail.com (Andrew Murdoch)
Date: Thu, 11 Feb 2021 09:06:00 -0700 (MST)
Subject: [gdal-dev] Alpine Docker build with ODBC support
In-Reply-To: <1612891896297-0.post@n6.nabble.com>
References: <1612852309077-0.post@n6.nabble.com>
 <CABUeae-yqVT6FzbdmwwBX=LBKQDn6B0xocHb5vJr7gLSQtJnLQ@mail.gmail.com>
 <1612891896297-0.post@n6.nabble.com>
Message-ID: <1613059560692-0.post@n6.nabble.com>

Just to close the loop on this and refresh my own memory when I need to
review this...

To fully enable MS SQL Server Spatial, I _did_ also need to add the specific
MS SQL ODBC _driver_ found here:

https://docs.microsoft.com/en-us/sql/connect/odbc/linux-mac/installing-the-microsoft-odbc-driver-for-sql-server?view=sql-server-ver15#alpine17

I tagged on to the updated Dockerfile that I modified to add the "unixodbc"
library. Not strictly sure I need that anymore, since I added the MS SQL
driver, but this _works_ with both "unixodbc" and MS SQL driver "ODBC Driver
17 for SQL Server".

I added the MS SQL driver commands referenced in the link above during the
"Build final image" step in the alpine-normal Dockerfile. 



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From eruiz at aplitop.com  Thu Feb 11 08:48:16 2021
From: eruiz at aplitop.com (Elena Ruiz)
Date: Thu, 11 Feb 2021 16:48:16 +0000
Subject: [gdal-dev] WMTS services error
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.d2f17d9d-d1bb-48d3-9b6c-9622b243b547@emailsignatures365.codetwo.com>
Message-ID: <AM7P192MB062798B0E35EB1BDD24740DDBB8C9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>

Hello, I?m trying call web services (WMTS and WMS) using GDAL 3.0.2, but I have a problem with this example:

gdal_translate "WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326" d://wmts_bm.xml -of WMTS
ERROR 1: Invalid dataset dimensions : -135056383 x -167901439

gdal_translate "WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830" d://wmts_bm.xml -of WMTS
Input file size is 20616192, 26817505

In this server http://www.ign.es/wmts/pnoa-ma have available the next SRS :
SUBDATASET_1_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=InspireCRS84Quad
SUBDATASET_2_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
SUBDATASET_3_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4258
SUBDATASET_4_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
SUBDATASET_5_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=GoogleMapsCompatible

But when I want Know the information or download a image in certain coordinates  with EPSG:4326, it returns an error "ERROR 1: Invalid dataset dimensions : -135056383 x -167901439", with EPSG:25830 works fine. I don`t understand this error, someone could help me?

Thank you and regards
________________________________

[https://www.aplitop.com/descargas/firma1.jpg]


Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com

[cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]<https://www.facebook.com/AplitopSL/>   [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png] <https://twitter.com/aplitop>    [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png] <https://www.linkedin.com/company/aplitop>    [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png] <https://www.youtube.com/user/aplitop>


In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679

<https://www.aplitop.com/Event/en/358/intergeo-2019>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/af5684b8/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/af5684b8/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/af5684b8/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/af5684b8/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/af5684b8/attachment-0007.png>

From patrick.mckendree.young at gmail.com  Thu Feb 11 09:37:12 2021
From: patrick.mckendree.young at gmail.com (Patrick Young)
Date: Thu, 11 Feb 2021 10:37:12 -0700
Subject: [gdal-dev] mosaicking files with partial overlap and binary mask
In-Reply-To: <CAJaHrDwNbQnOVe1gC+XdBaUrN2r3w24rANLiKPc+Wb9c26+ffA@mail.gmail.com>
References: <CAJaHrDzshx33KZnVVk03Hn0Qe3pYj=mBwTTj_fr6P3tyc0sbyw@mail.gmail.com>
 <CADXYQQ5=uSgr+x-3+hNjuWLR=b_Z7+f5iG2FcqvArk0Tgv2qzQ@mail.gmail.com>
 <CAJaHrDw2bvOtQkaqM4wJWT=zMD8r8goiDzRHed7iEt7Vn__GoA@mail.gmail.com>
 <CADXYQQ5UD7VNzU1sF5peZqCwyP+1dMO-YNGtgvzD78N5GM0MJA@mail.gmail.com>
 <CAJaHrDyvFK510oMwDGR+w4ODHdP2gbr+PDA7CqDff=RX_gvJ1A@mail.gmail.com>
 <1613053639212-0.post@n6.nabble.com>
 <CAJaHrDwNbQnOVe1gC+XdBaUrN2r3w24rANLiKPc+Wb9c26+ffA@mail.gmail.com>
Message-ID: <CADXYQQ42QrUmf+QE2kJnLukQQruvqGe_ftNF7ZqU=5C2E6ZypA@mail.gmail.com>

Not sure what the expected behavior is with gdalwarp and the underlying
mask preservation.  It is kind of a tricky problem to solve in general;
should the mask be resampled with the same kernel as used in the warp? Or
should it always be NN?  If the functionality is missing, this is a good
opportunity to get your employer funding gdal development.

A quick hack would be like you mention; you can extract the
datamask (gdal_translate -b mask ... i think) and then warp that
separately, and recombine.

P



On Thu, Feb 11, 2021 at 7:57 AM Daniele Romagnoli <
daniele.romagnoli at geo-solutions.it> wrote:

> Hi Jukka,
> sorry but I can't share the data. Is owned by a customer :(
>
> Long story short:
> I have several raster tiles (with size around 5000x5000) and a shapefile
> containing edges defining valid area of each tile.
>
> I have used gdalrasterize to extract the needed crop for each tile to
> setup a binary mask.
> Then, I have combined the binary mask with the original tile and rewritten
> as a new TIFF file with internal masks.
> Then, I'm composing all the TIFF files to a VRT.
> When rewriting that VRT to a mosaic TIFF, everything looks good. I see the
> binary mask is used to properly compose/overlap/mask the pieces of the
> mosaic and the output contains the mask too. This is an example of gdalinfo
> on one of the mosaicked tiff:
>
> Driver: GTiff/GeoTIFF
> Files: out.tif
> Size is 45842, 42506
> Coordinate System is:
> [... OMITTED... ]
>
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   COMPRESSION=YCbCr JPEG
>   INTERLEAVE=PIXEL
>   JPEGTABLESMODE=1
>   JPEG_QUALITY=75
>   SOURCE_COLOR_SPACE=YCbCr
> Corner Coordinates:
>   [... OMITTED... ]
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET
>
> So, as you can see the masks are added to the mosaicked dataset.
>
> However, when running
> gdalwarp -t_srs EPSG:NEWCODE out.tif warped.tif
>
> the binary mask is lost from the output file.
> I have also tried using -dstalpha but it complains that "Destination
> dataset has 3 bands, but at least 4 are needed" which makes sense.
>
> So I was just wondering if there is anything I should be aware of when
> warping a masked TIFF.
> I would probably try to transform the binary mask to an alpha band, do the
> warp and then convert back the alpha to a binary mask....
>
> Thanks for any feedback in advance.
> Regards,
> Daniele
>
>
>
>
>
> On Thu, Feb 11, 2021 at 3:27 PM jratike80 <
> jukka.rahkonen at maanmittauslaitos.fi> wrote:
>
>> Hi Daniele,
>>
>> Test data, please.
>>
>> -Jukka Rahkonen-
>>
>>
>>
>> Daniele Romagnoli-3 wrote
>> > Thanks for the feedback, Patrick.
>> > I have downloaded the latest build from GisInternals and it worked as
>> > expected.
>> > I have another question.
>> > It looks like warping an input file containing a binary mask isn't
>> > preserving the binary mask on the output.
>> > Should I specify any flag for that?
>> >
>> > Thanks for the help.
>> > Regards,
>> > Daniele
>> > _______________________________________________
>> > gdal-dev mailing list
>>
>> > gdal-dev at .osgeo
>>
>> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>>
>> --
>> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
> Regards,
> Daniele Romagnoli
> ==
> GeoServer Professional Services from the experts! Visit
> http://goo.gl/it488V for more information.
> ==
>
> Ing. Daniele Romagnoli
> Senior Software Engineer
>
> GeoSolutions S.A.S.
> Via di Montramito 3/A
> 55054  Massarosa (LU)
> Italy
> phone: +39 0584 962313
> fax:      +39 0584 1660272
>
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
>
> -------------------------------------------------------
>
> Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE
> 2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si
> precisa che ogni circostanza inerente alla presente email (il suo
> contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ?
> riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il
> messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra
> operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.
>
> This email is intended only for the person or entity to which it is
> addressed and may contain information that is privileged, confidential or
> otherwise protected from disclosure. We remind that - as provided by
> European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this
> e-mail or the information herein by anyone other than the intended
> recipient is prohibited. If you have received this email by mistake, please
> notify us immediately by telephone or e-mail.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/18a506f8/attachment.html>

From dustin.sims at belmont.tech  Thu Feb 11 09:44:59 2021
From: dustin.sims at belmont.tech (Dustin Sims)
Date: Thu, 11 Feb 2021 17:44:59 +0000
Subject: [gdal-dev] GeoTiff writer refuses to set 42113 (NoData) from Python
Message-ID: <DM6PR14MB382260B559FBF01D1F472E1A868C9@DM6PR14MB3822.namprd14.prod.outlook.com>

Hey devs,

I have an issue where writing any GeoTiff from python results in

ERROR 1: TIFFSetField:Path/To/File: Unknown tag 42113

This happens regardless of warp or translate (the only two applicable tools for my use case)

However, running this through the CLI tools with the exact same inputs results in the NoDataValue being preserved, and no matching error output.
While I can use subprocess tools to run the CLI tool through python, I would very much prefer to use gdal.Warp() and the like.

I am unable to provide sample data, due to it being confidential. If I use gdal.Warp() or gdal.BuildVRT() to convert the input file to VRT, the NoData is preserved. Translating that to a GeoTiff  results in the above error and NoData is lost. Seems really strange that I am unable to write tag 42113, as that is one of the GDAL specific tags. Anyone have any advice on what I could do to resolve this?

GDAL version 3.2.1
GDAL-python 3.2.1
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/ce4be320/attachment.html>

From traviskirstine at gmail.com  Thu Feb 11 11:20:29 2021
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Thu, 11 Feb 2021 14:20:29 -0500
Subject: [gdal-dev] WMTS services error
In-Reply-To: <AM7P192MB062798B0E35EB1BDD24740DDBB8C9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.d2f17d9d-d1bb-48d3-9b6c-9622b243b547@emailsignatures365.codetwo.com>
 <AM7P192MB062798B0E35EB1BDD24740DDBB8C9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CALtm4h3MQLyMMnA6CAqM+PvmoZ+_aG=vVGMdNhv4ZdmPUZTxwg@mail.gmail.com>

Elena,

I'm not exactly sure what is causing the issue but if you look at the
capabilities of the 4326 tilematrixset compared to the InspireCRS84Quad the
topleftcorner coordinates are reversed.  My guess gdal is expecting a X Y
order.

<TileMatrixSet>
<ows:Identifier>InspireCRS84Quad</ows:Identifier>
<ows:SupportedCRS>http://www.opengis.net/def/crs/OGC/1.3/CRS84
</ows:SupportedCRS>
<TileMatrix>
<ows:Identifier>0</ows:Identifier>
<ScaleDenominator>2.79541132014358E8</ScaleDenominator>
<TopLeftCorner>-180.0 90.0</TopLeftCorner>
<TileWidth>256</TileWidth>
<TileHeight>256</TileHeight>
<MatrixWidth>2</MatrixWidth>
<MatrixHeight>1</MatrixHeight>
</TileMatrix>

<TileMatrixSet>
<ows:Identifier>EPSG:4326</ows:Identifier>
<ows:SupportedCRS>EPSG:4326</ows:SupportedCRS>
<!--  crs="urn:ogc:def:crs:EPSG::4326"  -->
<TileMatrix>
<ows:Identifier>EPSG:4326:0</ows:Identifier>
<ScaleDenominator>2.795411320143589E8</ScaleDenominator>
<TopLeftCorner>90.0 -180.0</TopLeftCorner>
<TileWidth>256</TileWidth>
<TileHeight>256</TileHeight>
<MatrixWidth>2</MatrixWidth>
<MatrixHeight>1</MatrixHeight>
</TileMatrix>


On Thu, 11 Feb 2021 at 11:51, Elena Ruiz <eruiz at aplitop.com> wrote:

> Hello, I?m trying call web services (WMTS and WMS) using GDAL 3.0.2, but I
> have a problem with this example:
>
>
>
> gdal_translate "WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326"
> d://wmts_bm.xml -of WMTS
>
> ERROR 1: Invalid dataset dimensions : -135056383 x -167901439
>
>
>
> gdal_translate "WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830"
> d://wmts_bm.xml -of WMTS
>
> Input file size is 20616192, 26817505
>
>
>
> In this server http://www.ign.es/wmts/pnoa-ma have available the next SRS
> :
>
> SUBDATASET_1_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=InspireCRS84Quad
>
> SUBDATASET_2_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
>
> SUBDATASET_3_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4258
>
> SUBDATASET_4_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
>
> SUBDATASET_5_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=GoogleMapsCompatible
>
>
>
> But when I want Know the information or download a image in certain
> coordinates  with EPSG:4326, it returns an error ?ERROR 1: Invalid dataset
> dimensions : -135056383 x -167901439?, with EPSG:25830 works fine. I don`t
> understand this error, someone could help me?
>
>
>
> Thank you and regards
> ------------------------------
>
> *Elena Ruiz *
> Sofware Development & Technical Support
> Tel. +34 952 43 97 71
> eruiz at aplitop.com
> Sumatra, 9 - 29190 M?laga (Spain)
>
>
> *www.aplitop.com <http://www.aplitop.com>
> <https://www.facebook.com/AplitopSL/>   <https://twitter.com/aplitop>
> <https://www.linkedin.com/company/aplitop>
> <https://www.youtube.com/user/aplitop>*
>
> In accordance with the provisions of the European Regulation of Data
> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679),
> we inform you that the data and the information you provide us through this
> medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
> address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions
> and inform you about our products. The data provided will be kept as long
> as it does not request its cessation and will not be transferred to third
> parties except in cases where there is a legal obligation. You have the
> right to access your personal data, correct inaccurate data or request its
> deletion when the data is no longer necessary for the purposes that were
> collected, as well as any rights recognized in the RGPD 2016/679
>
> <https://www.aplitop.com/Event/en/358/intergeo-2019>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/7d38193c/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/7d38193c/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/7d38193c/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/7d38193c/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/7d38193c/attachment-0007.png>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 11 11:22:39 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 11 Feb 2021 12:22:39 -0700 (MST)
Subject: [gdal-dev] GeoTiff writer refuses to set 42113 (NoData) from
 Python
In-Reply-To: <DM6PR14MB382260B559FBF01D1F472E1A868C9@DM6PR14MB3822.namprd14.prod.outlook.com>
References: <DM6PR14MB382260B559FBF01D1F472E1A868C9@DM6PR14MB3822.namprd14.prod.outlook.com>
Message-ID: <1613071359517-0.post@n6.nabble.com>

Hi,

There is a common belief that problems with images happen only with exactly
that confidential multigigabyte image that user is playing with. That is
uncommon and usually the problem can be repeated with any other image with
similar structure. 

If you have GDAL v. 3.2 you can use
https://gdal.org/programs/gdal_create.html for sharing test data. Usage
example:

gdal_create -outsize 500 500 -burn 255 -burn 0 -burn 0 -if p4433h.tif
create.tif

The command creates a 500x500 pixel sized image that has the same
projection, bit depth etc. than the original "p4433h.tif" but all the pixels
are filled with red (this was a RGB image). Now there is no secrets to be
seen in the image. If the location is secret, assign fake ullr coordinates.
If even SRS is sectet you can change even that.

It is also possible to do quite a lot with python and nobody can say by your
description what goes wrong. Add so much of Python that others can just
copy, paste, and run the code, and together with the test image it produces
the error. Just as with the image, do not show all your code. Simplify it
into minimum to show the error.

-Jukka Rahkonen-



Dustin Sims wrote
> Hey devs,
> 
> I have an issue where writing any GeoTiff from python results in
> 
> ERROR 1: TIFFSetField:Path/To/File: Unknown tag 42113
> 
> This happens regardless of warp or translate (the only two applicable
> tools for my use case)
> 
> However, running this through the CLI tools with the exact same inputs
> results in the NoDataValue being preserved, and no matching error output.
> While I can use subprocess tools to run the CLI tool through python, I
> would very much prefer to use gdal.Warp() and the like.
> 
> I am unable to provide sample data, due to it being confidential. If I use
> gdal.Warp() or gdal.BuildVRT() to convert the input file to VRT, the
> NoData is preserved. Translating that to a GeoTiff  results in the above
> error and NoData is lost. Seems really strange that I am unable to write
> tag 42113, as that is one of the GDAL specific tags. Anyone have any
> advice on what I could do to resolve this?
> 
> GDAL version 3.2.1
> GDAL-python 3.2.1
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From lars.schylberg at blixtmail.se  Thu Feb 11 11:25:21 2021
From: lars.schylberg at blixtmail.se (lars.schylberg at blixtmail.se)
Date: Thu, 11 Feb 2021 19:25:21 +0000
Subject: [gdal-dev] mosaicking files with partial overlap and binary mask
In-Reply-To: <CADXYQQ42QrUmf+QE2kJnLukQQruvqGe_ftNF7ZqU=5C2E6ZypA@mail.gmail.com>
References: <CADXYQQ42QrUmf+QE2kJnLukQQruvqGe_ftNF7ZqU=5C2E6ZypA@mail.gmail.com>
 <CAJaHrDzshx33KZnVVk03Hn0Qe3pYj=mBwTTj_fr6P3tyc0sbyw@mail.gmail.com>
 <CADXYQQ5=uSgr+x-3+hNjuWLR=b_Z7+f5iG2FcqvArk0Tgv2qzQ@mail.gmail.com>
 <CAJaHrDw2bvOtQkaqM4wJWT=zMD8r8goiDzRHed7iEt7Vn__GoA@mail.gmail.com>
 <CADXYQQ5UD7VNzU1sF5peZqCwyP+1dMO-YNGtgvzD78N5GM0MJA@mail.gmail.com>
 <CAJaHrDyvFK510oMwDGR+w4ODHdP2gbr+PDA7CqDff=RX_gvJ1A@mail.gmail.com>
 <1613053639212-0.post@n6.nabble.com>
 <CAJaHrDwNbQnOVe1gC+XdBaUrN2r3w24rANLiKPc+Wb9c26+ffA@mail.gmail.com>
Message-ID: <e2f0b65edd73b5efb764762f3038ba3c@blixtmail.se>

Maybe this could help a little.

I had a problem a while ago when I wanted to filter just the mask and then assemble it again. It took some reading to get it right.
So I took the image apart with gdal_translate -b mask. Then ran gdal_sieve.py where I got a 8 bit mask.
The tricky part was then the assembly. This is how I did the reassemble with two gdalbuildvrt:

### Convert the mask to a real 1 bit mask with the right mask flags
### and deflate compression

echo "gdal_translate - real mask"

gdal_translate 
 -of GTiff 
 -ot Byte 
 -co NBITS=1 
 -co COMPRESS=DEFLATE 
 -mo INTERNAL_MASK_FLAGS_1=2 
 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_mask_separate_clean.tif 
 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_mask.msk

### Combine the image with the mask

gdalbuildvrt -b 1 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp_1.vrt ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp.tif
gdalbuildvrt -b 2 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp_2.vrt ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp.tif
gdalbuildvrt -b 3 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp_3.vrt ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp.tif

echo "gdalbuildvrt"

gdalbuildvrt 
 -separate ${TIF_TMP_DIR}/${TIF_FILE_NAME}_combined.vrt 
 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp_1.vrt 
 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp_2.vrt 
 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_warp_3.vrt 
 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_mask.msk

echo "final gdal_translate"

gdal_translate 
 -b 1 -b 2 -b 3 -mask 4 
 -co COMPRESS=NONE 
 -co TILED=YES 
 -co BLOCKXSIZE=512 
 -co BLOCKYSIZE=512 
 -co INTERLEAVE=BAND 
 --config GDAL_TIFF_INTERNAL_MASK YES 
 --config GDAL_CACHEMAX 512 
 ${TIF_TMP_DIR}/${TIF_FILE_NAME}_combined.vrt 
 ${DATA_OUTPUT_DIR}/${TIF_FILE_NAME}.tif

Hope this helps you to take the image apart and then put back together again.

/Lars S.
11 februari 2021 kl. 18:37, "Patrick Young" <patrick.mckendree.young at gmail.com (mailto:patrick.mckendree.young at gmail.com?to=%22Patrick%20Young%22%20<patrick.mckendree.young at gmail.com>)> skrev:
 Not sure what the expected behavior is with gdalwarp and the underlying mask preservation. It is kind of a tricky problem to solve in general; should the mask be resampled with the same kernel as used in the warp? Or should it always be NN? If the functionality is missing, this is a good opportunity to get your employer funding gdal development.
A quick hack would be like you mention; you can extract the datamask (gdal_translate -b mask ... i think) and then warp that separately, and recombine. 
P
 On Thu, Feb 11, 2021 at 7:57 AM Daniele Romagnoli <daniele.romagnoli at geo-solutions.it (mailto:daniele.romagnoli at geo-solutions.it)> wrote:  Hi Jukka,
sorry but I can't share the data. Is owned by a customer :( 
Long story short: 
I have several raster tiles (with size around 5000x5000) and a shapefile containing edges defining valid area of each tile. 
I have used gdalrasterize to extract the needed crop for each tile to setup a binary mask. 
Then, I have combined the binary mask with the original tile and rewritten as a new TIFF file with internal masks. 
Then, I'm composing all the TIFF files to a VRT. 
When rewriting that VRT to a mosaic TIFF, everything looks good. I see the binary mask is used to properly compose/overlap/mask the pieces of the mosaic and the output contains the mask too. This is an example of gdalinfo on one of the mosaicked tiff: 
Driver: GTiff/GeoTIFF
Files: out.tif
Size is 45842, 42506
Coordinate System is:
[... OMITTED... ]

Metadata:
AREA_OR_POINT=Area
Image Structure Metadata:
COMPRESSION=YCbCr JPEG
INTERLEAVE=PIXEL
JPEGTABLESMODE=1
JPEG_QUALITY=75
SOURCE_COLOR_SPACE=YCbCr
Corner Coordinates:
[... OMITTED... ]
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Mask Flags: PER_DATASET
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Mask Flags: PER_DATASET
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
Mask Flags: PER_DATASET 
So, as you can see the masks are added to the mosaicked dataset. 
However, when running 
gdalwarp -t_srs EPSG:NEWCODE out.tif warped.tif 
the binary mask is lost from the output file. 
I have also tried using -dstalpha but it complains that "Destination dataset has 3 bands, but at least 4 are needed" which makes sense. 
So I was just wondering if there is anything I should be aware of when warping a masked TIFF. 
I would probably try to transform the binary mask to an alpha band, do the warp and then convert back the alpha to a binary mask.... 
Thanks for any feedback in advance. 
Regards, 
Daniele 
 On Thu, Feb 11, 2021 at 3:27 PM jratike80 <jukka.rahkonen at maanmittauslaitos.fi (mailto:jukka.rahkonen at maanmittauslaitos.fi)> wrote: Hi Daniele,

Test data, please.

-Jukka Rahkonen-
Daniele Romagnoli-3 wrote
> Thanks for the feedback, Patrick.
> I have downloaded the latest build from GisInternals and it worked as
> expected.
> I have another question.
> It looks like warping an input file containing a binary mask isn't
> preserving the binary mask on the output.
> Should I specify any flag for that?
>
> Thanks for the help.
> Regards,
> Daniele
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev (https://lists.osgeo.org/mailman/listinfo/gdal-dev)
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html (http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html)
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org (mailto:gdal-dev at lists.osgeo.org)
https://lists.osgeo.org/mailman/listinfo/gdal-dev (https://lists.osgeo.org/mailman/listinfo/gdal-dev)   
--
 Regards, Daniele Romagnoli == GeoServer Professional Services from the experts! Visit http://goo.gl/it488V (http://goo.gl/it488V) for more information. ==  Ing. Daniele Romagnoli Senior Software Engineer  GeoSolutions S.A.S. Via di Montramito 3/A 55054 Massarosa (LU) Italy phone: +39 0584 962313 fax: +39 0584 1660272  http://www.geo-solutions.it (http://www.geo-solutions.it) http://twitter.com/geosolutions_it (http://twitter.com/geosolutions_it)   -------------------------------------------------------  Con riferimento alla normativa sul trattamento dei dati personali (Reg. UE 2016/679 - Regolamento generale sulla protezione dei dati ?GDPR?), si precisa che ogni circostanza inerente alla presente email (il suo contenuto, gli eventuali allegati, etc.) ? un dato la cui conoscenza ? riservata al/i solo/i destinatario/i indicati dallo scrivente. Se il messaggio Le ? giunto per errore, ? tenuta/o a cancellarlo, ogni altra operazione ? illecita. Le sarei comunque grato se potesse darmene notizia.  This email is intended only for the person or entity to which it is addressed and may contain information that is privileged, confidential or otherwise protected from disclosure. We remind that - as provided by European Regulation 2016/679 ?GDPR? - copying, dissemination or use of this e-mail or the information herein by anyone other than the intended recipient is prohibited. If you have received this email by mistake, please notify us immediately by telephone or e-mail.   _______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org (mailto:gdal-dev at lists.osgeo.org)
https://lists.osgeo.org/mailman/listinfo/gdal-dev (https://lists.osgeo.org/mailman/listinfo/gdal-dev)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210211/0e763699/attachment.html>

From eruiz at aplitop.com  Fri Feb 12 05:05:03 2021
From: eruiz at aplitop.com (Elena Ruiz)
Date: Fri, 12 Feb 2021 13:05:03 +0000
Subject: [gdal-dev] WMTS services error
In-Reply-To: <CALtm4h3MQLyMMnA6CAqM+PvmoZ+_aG=vVGMdNhv4ZdmPUZTxwg@mail.gmail.com>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.d2f17d9d-d1bb-48d3-9b6c-9622b243b547@emailsignatures365.codetwo.com>
 <AM7P192MB062798B0E35EB1BDD24740DDBB8C9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
 <CALtm4h3MQLyMMnA6CAqM+PvmoZ+_aG=vVGMdNhv4ZdmPUZTxwg@mail.gmail.com>
Message-ID: <AM7P192MB062757F5C2ACBA75A3B4DAFDBB8B9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>

Hello, my goal is to obtain images of both WMS and WMTS web services using GDAL, with the CRS that each service provides, in the case of the example, how can I do then to obtain images in EPSG: 4326 or any other CRS that have changed axes? Should a parameter be added to the gdal_translate call? What would be the correct way to obtain this type of images using gdal applications like gadlinfo and gdaltranslate?
I have found very little information about this on the web, many thanks and best regards




________________________________


Elena Ruiz

[https://www.aplitop.com/descargas/logo.png]
Sofware Development & Technical Support
Tel.: +34 952 43 97 71
eruiz at aplitop.com
www.aplitop.com




<http://www.aplitop.com/Product/es/6/5/tcptunnel>


<http://www.aplitop.com/New/es/281/mdt-75-a-la-venta>




De: Travis Kirstine <traviskirstine at gmail.com>
Enviado el: jueves, 11 de febrero de 2021 20:20
Para: Elena Ruiz <eruiz at aplitop.com>
CC: gdal-dev at lists.osgeo.org
Asunto: Re: [gdal-dev] WMTS services error

Elena,

I'm not exactly sure what is causing the issue but if you look at the capabilities of the 4326 tilematrixset compared to the InspireCRS84Quad the topleftcorner coordinates are reversed.  My guess gdal is expecting a X Y order.

<TileMatrixSet>
<ows:Identifier>InspireCRS84Quad</ows:Identifier>
<ows:SupportedCRS>http://www.opengis.net/def/crs/OGC/1.3/CRS84</ows:SupportedCRS>
<TileMatrix>
<ows:Identifier>0</ows:Identifier>
<ScaleDenominator>2.79541132014358E8</ScaleDenominator>
<TopLeftCorner>-180.0 90.0</TopLeftCorner>
<TileWidth>256</TileWidth>
<TileHeight>256</TileHeight>
<MatrixWidth>2</MatrixWidth>
<MatrixHeight>1</MatrixHeight>
</TileMatrix>

<TileMatrixSet>
<ows:Identifier>EPSG:4326</ows:Identifier>
<ows:SupportedCRS>EPSG:4326</ows:SupportedCRS>
<!--  crs="urn:ogc:def:crs:EPSG::4326"  -->
<TileMatrix>
<ows:Identifier>EPSG:4326:0</ows:Identifier>
<ScaleDenominator>2.795411320143589E8</ScaleDenominator>
<TopLeftCorner>90.0 -180.0</TopLeftCorner>
<TileWidth>256</TileWidth>
<TileHeight>256</TileHeight>
<MatrixWidth>2</MatrixWidth>
<MatrixHeight>1</MatrixHeight>
</TileMatrix>


On Thu, 11 Feb 2021 at 11:51, Elena Ruiz <eruiz at aplitop.com<mailto:eruiz at aplitop.com>> wrote:
Hello, I?m trying call web services (WMTS and WMS) using GDAL 3.0.2, but I have a problem with this example:

gdal_translate "WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326" d://wmts_bm.xml -of WMTS
ERROR 1: Invalid dataset dimensions : -135056383 x -167901439

gdal_translate "WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830" d://wmts_bm.xml -of WMTS
Input file size is 20616192, 26817505

In this server http://www.ign.es/wmts/pnoa-ma have available the next SRS :
SUBDATASET_1_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=InspireCRS84Quad
SUBDATASET_2_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
SUBDATASET_3_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4258
SUBDATASET_4_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
SUBDATASET_5_NAME=WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=GoogleMapsCompatible

But when I want Know the information or download a image in certain coordinates  with EPSG:4326, it returns an error ?ERROR 1: Invalid dataset dimensions : -135056383 x -167901439?, with EPSG:25830 works fine. I don`t understand this error, someone could help me?

Thank you and regards
________________________________

[https://www.aplitop.com/descargas/firma1.jpg]

Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com<mailto:eruiz at aplitop.com>
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com<http://www.aplitop.com>

[cid:image002.jpg at 01D70148.0DA21C80]<https://www.facebook.com/AplitopSL/>   [cid:image004.jpg at 01D70148.0DA21C80] <https://twitter.com/aplitop>    [cid:image006.jpg at 01D70148.0DA21C80] <https://www.linkedin.com/company/aplitop>    [cid:image008.png at 01D70148.0DA21C80] <https://www.youtube.com/user/aplitop>


In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/2fd3dcfa/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 720 bytes
Desc: image002.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/2fd3dcfa/attachment-0003.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.jpg
Type: image/jpeg
Size: 715 bytes
Desc: image004.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/2fd3dcfa/attachment-0004.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.jpg
Type: image/jpeg
Size: 738 bytes
Desc: image006.jpg
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/2fd3dcfa/attachment-0005.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 672 bytes
Desc: image008.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/2fd3dcfa/attachment-0001.png>

From traviskirstine at gmail.com  Fri Feb 12 05:26:03 2021
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri, 12 Feb 2021 08:26:03 -0500
Subject: [gdal-dev] WMTS services error
In-Reply-To: <AM7P192MB062757F5C2ACBA75A3B4DAFDBB8B9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.d2f17d9d-d1bb-48d3-9b6c-9622b243b547@emailsignatures365.codetwo.com>
 <AM7P192MB062798B0E35EB1BDD24740DDBB8C9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
 <CALtm4h3MQLyMMnA6CAqM+PvmoZ+_aG=vVGMdNhv4ZdmPUZTxwg@mail.gmail.com>
 <AM7P192MB062757F5C2ACBA75A3B4DAFDBB8B9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
Message-ID: <CALtm4h0pcUDpi8seiTA_Ek2zh4qVi+Sup04YwB1DLO81FzopSQ@mail.gmail.com>

Elena

This appears to be a bug in wmts driver in gdal, I would suggest filing a
issue

The below is from the OGC Two Dimensional Tile Matrix Set specs, section d2
http://docs.opengeospatial.org/is/17-083r2/17-083r2.html

"NOTE4: Some implementers prefer to define this TileMatrixSet using the CRS
http://www.opengis.net/def/crs/EPSG/0/4326. The definition is the same
except that CRS coordinates are expressed in latitude, longitude order,
affecting the TopLeftCorner and the BBox encoding only".


On Fri, 12 Feb 2021 at 08:05, Elena Ruiz <eruiz at aplitop.com> wrote:

> Hello, my goal is to obtain images of both WMS and WMTS web services using
> GDAL, with the CRS that each service provides, in the case of the example,
> how can I do then to obtain images in EPSG: 4326 or any other CRS that have
> changed axes? Should a parameter be added to the gdal_translate call? What
> would be the correct way to obtain this type of images using gdal
> applications like gadlinfo and gdaltranslate?
>
> I have found very little information about this on the web, many thanks
> and best regards
>
>
>
>
>
> ------------------------------
>
> *Elena Ruiz*
>
>
> Sofware Development & Technical Support
> Tel.: +34 952 43 97 71
> eruiz at aplitop.com
> *www.aplitop.com <http://www.aplitop.com>*
>
>
>
> <http://www.aplitop.com/Product/es/6/5/tcptunnel>
>
> <http://www.aplitop.com/New/es/281/mdt-75-a-la-venta>
>
>
>
>
>
> *De:* Travis Kirstine <traviskirstine at gmail.com>
> *Enviado el:* jueves, 11 de febrero de 2021 20:20
> *Para:* Elena Ruiz <eruiz at aplitop.com>
> *CC:* gdal-dev at lists.osgeo.org
> *Asunto:* Re: [gdal-dev] WMTS services error
>
>
>
> Elena,
>
>
>
> I'm not exactly sure what is causing the issue but if you look at the
> capabilities of the 4326 tilematrixset compared to the InspireCRS84Quad the
> topleftcorner coordinates are reversed.  My guess gdal is expecting a X Y
> order.
>
>
>
> <TileMatrixSet>
> <ows:Identifier>InspireCRS84Quad</ows:Identifier>
> <ows:SupportedCRS>http://www.opengis.net/def/crs/OGC/1.3/CRS84
> </ows:SupportedCRS>
> <TileMatrix>
> <ows:Identifier>0</ows:Identifier>
> <ScaleDenominator>2.79541132014358E8</ScaleDenominator>
> <TopLeftCorner>-180.0 90.0</TopLeftCorner>
> <TileWidth>256</TileWidth>
> <TileHeight>256</TileHeight>
> <MatrixWidth>2</MatrixWidth>
> <MatrixHeight>1</MatrixHeight>
> </TileMatrix>
>
>
>
> <TileMatrixSet>
> <ows:Identifier>EPSG:4326</ows:Identifier>
> <ows:SupportedCRS>EPSG:4326</ows:SupportedCRS>
> <!--  crs="urn:ogc:def:crs:EPSG::4326"  -->
> <TileMatrix>
> <ows:Identifier>EPSG:4326:0</ows:Identifier>
> <ScaleDenominator>2.795411320143589E8</ScaleDenominator>
> <TopLeftCorner>90.0 -180.0</TopLeftCorner>
> <TileWidth>256</TileWidth>
> <TileHeight>256</TileHeight>
> <MatrixWidth>2</MatrixWidth>
> <MatrixHeight>1</MatrixHeight>
> </TileMatrix>
>
>
>
>
>
> On Thu, 11 Feb 2021 at 11:51, Elena Ruiz <eruiz at aplitop.com> wrote:
>
> Hello, I?m trying call web services (WMTS and WMS) using GDAL 3.0.2, but I
> have a problem with this example:
>
>
>
> gdal_translate "WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326"
> d://wmts_bm.xml -of WMTS
>
> ERROR 1: Invalid dataset dimensions : -135056383 x -167901439
>
>
>
> gdal_translate "WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830"
> d://wmts_bm.xml -of WMTS
>
> Input file size is 20616192, 26817505
>
>
>
> In this server http://www.ign.es/wmts/pnoa-ma have available the next SRS
> :
>
> SUBDATASET_1_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=InspireCRS84Quad
>
> SUBDATASET_2_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
>
> SUBDATASET_3_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4258
>
> SUBDATASET_4_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
>
> SUBDATASET_5_NAME=WMTS:
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=GoogleMapsCompatible
>
>
>
> But when I want Know the information or download a image in certain
> coordinates  with EPSG:4326, it returns an error ?ERROR 1: Invalid dataset
> dimensions : -135056383 x -167901439?, with EPSG:25830 works fine. I don`t
> understand this error, someone could help me?
>
>
>
> Thank you and regards
> ------------------------------
>
> *Elena Ruiz *
> Sofware Development & Technical Support
> Tel. +34 952 43 97 71
> eruiz at aplitop.com
> Sumatra, 9 - 29190 M?laga (Spain)
> *www.aplitop.com <http://www.aplitop.com>*
>
> <https://www.facebook.com/AplitopSL/>   <https://twitter.com/aplitop>
> <https://www.linkedin.com/company/aplitop>
> <https://www.youtube.com/user/aplitop>
>
> In accordance with the provisions of the European Regulation of Data
> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679),
> we inform you that the data and the information you provide us through this
> medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
> address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions
> and inform you about our products. The data provided will be kept as long
> as it does not request its cessation and will not be transferred to third
> parties except in cases where there is a legal obligation. You have the
> right to access your personal data, correct inaccurate data or request its
> deletion when the data is no longer necessary for the purposes that were
> collected, as well as any rights recognized in the RGPD 2016/679
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/bdae0eeb/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image002.jpg
Type: image/jpeg
Size: 720 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/bdae0eeb/attachment-0003.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image004.jpg
Type: image/jpeg
Size: 715 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/bdae0eeb/attachment-0004.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image006.jpg
Type: image/jpeg
Size: 738 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/bdae0eeb/attachment-0005.jpg>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image008.png
Type: image/png
Size: 672 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/bdae0eeb/attachment-0001.png>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb 12 07:31:02 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 12 Feb 2021 08:31:02 -0700 (MST)
Subject: [gdal-dev] WMTS services error
In-Reply-To: <CALtm4h0pcUDpi8seiTA_Ek2zh4qVi+Sup04YwB1DLO81FzopSQ@mail.gmail.com>
References: <AM7P192MB062798B0E35EB1BDD24740DDBB8C9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
 <CALtm4h3MQLyMMnA6CAqM+PvmoZ+_aG=vVGMdNhv4ZdmPUZTxwg@mail.gmail.com>
 <AM7P192MB062757F5C2ACBA75A3B4DAFDBB8B9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
 <CALtm4h0pcUDpi8seiTA_Ek2zh4qVi+Sup04YwB1DLO81FzopSQ@mail.gmail.com>
Message-ID: <1613143862312-0.post@n6.nabble.com>

Hi,

By reading the documentation https://gdal.org/drivers/raster/wmts.html it
could be possible to edit the automatically created XML service definition
file or write it by hand from a scratch.

-Jukka Rahkonen-


Travis Kirstine wrote
> Elena
> 
> This appears to be a bug in wmts driver in gdal, I would suggest filing a
> issue
> 
> The below is from the OGC Two Dimensional Tile Matrix Set specs, section
> d2
> http://docs.opengeospatial.org/is/17-083r2/17-083r2.html
> 
> "NOTE4: Some implementers prefer to define this TileMatrixSet using the
> CRS
> http://www.opengis.net/def/crs/EPSG/0/4326. The definition is the same
> except that CRS coordinates are expressed in latitude, longitude order,
> affecting the TopLeftCorner and the BBox encoding only".
> 
> 
> On Fri, 12 Feb 2021 at 08:05, Elena Ruiz &lt;

> eruiz@

> &gt; wrote:
> 
>> Hello, my goal is to obtain images of both WMS and WMTS web services
>> using
>> GDAL, with the CRS that each service provides, in the case of the
>> example,
>> how can I do then to obtain images in EPSG: 4326 or any other CRS that
>> have
>> changed axes? Should a parameter be added to the gdal_translate call?
>> What
>> would be the correct way to obtain this type of images using gdal
>> applications like gadlinfo and gdaltranslate?
>>
>> I have found very little information about this on the web, many thanks
>> and best regards
>>
>>
>>
>>
>>
>> ------------------------------
>>
>> *Elena Ruiz*
>>
>>
>> Sofware Development & Technical Support
>> Tel.: +34 952 43 97 71
>> 

> eruiz@

>> *www.aplitop.com &lt;http://www.aplitop.com&gt;*
>>
>>
>>
>> &lt;http://www.aplitop.com/Product/es/6/5/tcptunnel&gt;
>>
>> &lt;http://www.aplitop.com/New/es/281/mdt-75-a-la-venta&gt;
>>
>>
>>
>>
>>
>> *De:* Travis Kirstine &lt;

> traviskirstine@

> &gt;
>> *Enviado el:* jueves, 11 de febrero de 2021 20:20
>> *Para:* Elena Ruiz &lt;

> eruiz@

> &gt;
>> *CC:* 

> gdal-dev at .osgeo

>> *Asunto:* Re: [gdal-dev] WMTS services error
>>
>>
>>
>> Elena,
>>
>>
>>
>> I'm not exactly sure what is causing the issue but if you look at the
>> capabilities of the 4326 tilematrixset compared to the InspireCRS84Quad
>> the
>> topleftcorner coordinates are reversed.  My guess gdal is expecting a X Y
>> order.
>>
>>
>>
>> 
> <TileMatrixSet>
>> 
> <ows:Identifier>
> InspireCRS84Quad
> </ows:Identifier>
>> 
> <ows:SupportedCRS>
> http://www.opengis.net/def/crs/OGC/1.3/CRS84
>> 
> </ows:SupportedCRS>
>> 
> <TileMatrix>
>> 
> <ows:Identifier>
> 0
> </ows:Identifier>
>> 
> <ScaleDenominator>
> 2.79541132014358E8
> </ScaleDenominator>
>> 
> <TopLeftCorner>
> -180.0 90.0
> </TopLeftCorner>
>> 
> <TileWidth>
> 256
> </TileWidth>
>> 
> <TileHeight>
> 256
> </TileHeight>
>> 
> <MatrixWidth>
> 2
> </MatrixWidth>
>> 
> <MatrixHeight>
> 1
> </MatrixHeight>
>> 
> </TileMatrix>
>>
>>
>>
>> 
> <TileMatrixSet>
>> 
> <ows:Identifier>
> EPSG:4326
> </ows:Identifier>
>> 
> <ows:SupportedCRS>
> EPSG:4326
> </ows:SupportedCRS>
>> 

>> 
> <TileMatrix>
>> 
> <ows:Identifier>
> EPSG:4326:0
> </ows:Identifier>
>> 
> <ScaleDenominator>
> 2.795411320143589E8
> </ScaleDenominator>
>> 
> <TopLeftCorner>
> 90.0 -180.0
> </TopLeftCorner>
>> 
> <TileWidth>
> 256
> </TileWidth>
>> 
> <TileHeight>
> 256
> </TileHeight>
>> 
> <MatrixWidth>
> 2
> </MatrixWidth>
>> 
> <MatrixHeight>
> 1
> </MatrixHeight>
>> 
> </TileMatrix>
>>
>>
>>
>>
>>
>> On Thu, 11 Feb 2021 at 11:51, Elena Ruiz &lt;

> eruiz@

> &gt; wrote:
>>
>> Hello, I?m trying call web services (WMTS and WMS) using GDAL 3.0.2, but
>> I
>> have a problem with this example:
>>
>>
>>
>> gdal_translate "WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326"
>> d://wmts_bm.xml -of WMTS
>>
>> ERROR 1: Invalid dataset dimensions : -135056383 x -167901439
>>
>>
>>
>> gdal_translate "WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830"
>> d://wmts_bm.xml -of WMTS
>>
>> Input file size is 20616192, 26817505
>>
>>
>>
>> In this server http://www.ign.es/wmts/pnoa-ma have available the next SRS
>> :
>>
>> SUBDATASET_1_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=InspireCRS84Quad
>>
>> SUBDATASET_2_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
>>
>> SUBDATASET_3_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4258
>>
>> SUBDATASET_4_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
>>
>> SUBDATASET_5_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=GoogleMapsCompatible
>>
>>
>>
>> But when I want Know the information or download a image in certain
>> coordinates  with EPSG:4326, it returns an error ?ERROR 1: Invalid
>> dataset
>> dimensions : -135056383 x -167901439?, with EPSG:25830 works fine. I
>> don`t
>> understand this error, someone could help me?
>>
>>
>>
>> Thank you and regards
>> ------------------------------
>>
>> *Elena Ruiz *
>> Sofware Development & Technical Support
>> Tel. +34 952 43 97 71
>> 

> eruiz@

>> Sumatra, 9 - 29190 M?laga (Spain)
>> *www.aplitop.com &lt;http://www.aplitop.com&gt;*
>>
>> &lt;https://www.facebook.com/AplitopSL/&gt;  
>> &lt;https://twitter.com/aplitop&gt;
>> &lt;https://www.linkedin.com/company/aplitop&gt;
>> &lt;https://www.youtube.com/user/aplitop&gt;
>>
>> In accordance with the provisions of the European Regulation of Data
>> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679),
>> we inform you that the data and the information you provide us through
>> this
>> medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
>> address at C / Sumatra, 9, Malaga, 29190, in order to answer your
>> questions
>> and inform you about our products. The data provided will be kept as long
>> as it does not request its cessation and will not be transferred to third
>> parties except in cases where there is a legal obligation. You have the
>> right to access your personal data, correct inaccurate data or request
>> its
>> deletion when the data is no longer necessary for the purposes that were
>> collected, as well as any rights recognized in the RGPD 2016/679
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> 

> gdal-dev at .osgeo

>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> image002.jpg (984 bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/0/image002.jpg&gt;
> image004.jpg (980 bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/1/image004.jpg&gt;
> image006.jpg (1008 bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/2/image006.jpg&gt;
> image008.png (918 bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/3/image008.png&gt;





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From traviskirstine at gmail.com  Fri Feb 12 10:43:11 2021
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Fri, 12 Feb 2021 13:43:11 -0500
Subject: [gdal-dev] WMTS services error
In-Reply-To: <1613143862312-0.post@n6.nabble.com>
References: <AM7P192MB062798B0E35EB1BDD24740DDBB8C9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
 <CALtm4h3MQLyMMnA6CAqM+PvmoZ+_aG=vVGMdNhv4ZdmPUZTxwg@mail.gmail.com>
 <AM7P192MB062757F5C2ACBA75A3B4DAFDBB8B9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
 <CALtm4h0pcUDpi8seiTA_Ek2zh4qVi+Sup04YwB1DLO81FzopSQ@mail.gmail.com>
 <1613143862312-0.post@n6.nabble.com>
Message-ID: <CALtm4h2_YUP7hCxxqsgbJkH0wPmFo0s+k+j=_njScMvbWELABw@mail.gmail.com>

Jukka,

I think the main issue is that the gdal_translate command throws an error
when generating the WMTS XML config file, so there is nothing to edit.

gdal_translate "WMTS:
http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326"
wmts_bm.xml -of WMTS

ERROR 1: Invalid dataset dimensions : -135056383 x -167901439

On Fri, 12 Feb 2021 at 10:32, jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
wrote:

> Hi,
>
> By reading the documentation https://gdal.org/drivers/raster/wmts.html it
> could be possible to edit the automatically created XML service definition
> file or write it by hand from a scratch.
>
> -Jukka Rahkonen-
>
>
> Travis Kirstine wrote
> > Elena
> >
> > This appears to be a bug in wmts driver in gdal, I would suggest filing a
> > issue
> >
> > The below is from the OGC Two Dimensional Tile Matrix Set specs, section
> > d2
> > http://docs.opengeospatial.org/is/17-083r2/17-083r2.html
> >
> > "NOTE4: Some implementers prefer to define this TileMatrixSet using the
> > CRS
> > http://www.opengis.net/def/crs/EPSG/0/4326. The definition is the same
> > except that CRS coordinates are expressed in latitude, longitude order,
> > affecting the TopLeftCorner and the BBox encoding only".
> >
> >
> > On Fri, 12 Feb 2021 at 08:05, Elena Ruiz &lt;
>
> > eruiz@
>
> > &gt; wrote:
> >
> >> Hello, my goal is to obtain images of both WMS and WMTS web services
> >> using
> >> GDAL, with the CRS that each service provides, in the case of the
> >> example,
> >> how can I do then to obtain images in EPSG: 4326 or any other CRS that
> >> have
> >> changed axes? Should a parameter be added to the gdal_translate call?
> >> What
> >> would be the correct way to obtain this type of images using gdal
> >> applications like gadlinfo and gdaltranslate?
> >>
> >> I have found very little information about this on the web, many thanks
> >> and best regards
> >>
> >>
> >>
> >>
> >>
> >> ------------------------------
> >>
> >> *Elena Ruiz*
> >>
> >>
> >> Sofware Development & Technical Support
> >> Tel.: +34 952 43 97 71
> >>
>
> > eruiz@
>
> >> *www.aplitop.com &lt;http://www.aplitop.com&gt;*
> >>
> >>
> >>
> >> &lt;http://www.aplitop.com/Product/es/6/5/tcptunnel&gt;
> >>
> >> &lt;http://www.aplitop.com/New/es/281/mdt-75-a-la-venta&gt;
> >>
> >>
> >>
> >>
> >>
> >> *De:* Travis Kirstine &lt;
>
> > traviskirstine@
>
> > &gt;
> >> *Enviado el:* jueves, 11 de febrero de 2021 20:20
> >> *Para:* Elena Ruiz &lt;
>
> > eruiz@
>
> > &gt;
> >> *CC:*
>
> > gdal-dev at .osgeo
>
> >> *Asunto:* Re: [gdal-dev] WMTS services error
> >>
> >>
> >>
> >> Elena,
> >>
> >>
> >>
> >> I'm not exactly sure what is causing the issue but if you look at the
> >> capabilities of the 4326 tilematrixset compared to the InspireCRS84Quad
> >> the
> >> topleftcorner coordinates are reversed.  My guess gdal is expecting a X
> Y
> >> order.
> >>
> >>
> >>
> >>
> > <TileMatrixSet>
> >>
> > <ows:Identifier>
> > InspireCRS84Quad
> > </ows:Identifier>
> >>
> > <ows:SupportedCRS>
> > http://www.opengis.net/def/crs/OGC/1.3/CRS84
> >>
> > </ows:SupportedCRS>
> >>
> > <TileMatrix>
> >>
> > <ows:Identifier>
> > 0
> > </ows:Identifier>
> >>
> > <ScaleDenominator>
> > 2.79541132014358E8
> > </ScaleDenominator>
> >>
> > <TopLeftCorner>
> > -180.0 90.0
> > </TopLeftCorner>
> >>
> > <TileWidth>
> > 256
> > </TileWidth>
> >>
> > <TileHeight>
> > 256
> > </TileHeight>
> >>
> > <MatrixWidth>
> > 2
> > </MatrixWidth>
> >>
> > <MatrixHeight>
> > 1
> > </MatrixHeight>
> >>
> > </TileMatrix>
> >>
> >>
> >>
> >>
> > <TileMatrixSet>
> >>
> > <ows:Identifier>
> > EPSG:4326
> > </ows:Identifier>
> >>
> > <ows:SupportedCRS>
> > EPSG:4326
> > </ows:SupportedCRS>
> >>
>
> >>
> > <TileMatrix>
> >>
> > <ows:Identifier>
> > EPSG:4326:0
> > </ows:Identifier>
> >>
> > <ScaleDenominator>
> > 2.795411320143589E8
> > </ScaleDenominator>
> >>
> > <TopLeftCorner>
> > 90.0 -180.0
> > </TopLeftCorner>
> >>
> > <TileWidth>
> > 256
> > </TileWidth>
> >>
> > <TileHeight>
> > 256
> > </TileHeight>
> >>
> > <MatrixWidth>
> > 2
> > </MatrixWidth>
> >>
> > <MatrixHeight>
> > 1
> > </MatrixHeight>
> >>
> > </TileMatrix>
> >>
> >>
> >>
> >>
> >>
> >> On Thu, 11 Feb 2021 at 11:51, Elena Ruiz &lt;
>
> > eruiz@
>
> > &gt; wrote:
> >>
> >> Hello, I?m trying call web services (WMTS and WMS) using GDAL 3.0.2, but
> >> I
> >> have a problem with this example:
> >>
> >>
> >>
> >> gdal_translate "WMTS:
> >>
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
> "
> >> d://wmts_bm.xml -of WMTS
> >>
> >> ERROR 1: Invalid dataset dimensions : -135056383 x -167901439
> >>
> >>
> >>
> >> gdal_translate "WMTS:
> >>
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
> "
> >> d://wmts_bm.xml -of WMTS
> >>
> >> Input file size is 20616192, 26817505
> >>
> >>
> >>
> >> In this server http://www.ign.es/wmts/pnoa-ma have available the next
> SRS
> >> :
> >>
> >> SUBDATASET_1_NAME=WMTS:
> >>
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=InspireCRS84Quad
> >>
> >> SUBDATASET_2_NAME=WMTS:
> >>
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
> >>
> >> SUBDATASET_3_NAME=WMTS:
> >>
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4258
> >>
> >> SUBDATASET_4_NAME=WMTS:
> >>
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
> >>
> >> SUBDATASET_5_NAME=WMTS:
> >>
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=GoogleMapsCompatible
> >>
> >>
> >>
> >> But when I want Know the information or download a image in certain
> >> coordinates  with EPSG:4326, it returns an error ?ERROR 1: Invalid
> >> dataset
> >> dimensions : -135056383 x -167901439?, with EPSG:25830 works fine. I
> >> don`t
> >> understand this error, someone could help me?
> >>
> >>
> >>
> >> Thank you and regards
> >> ------------------------------
> >>
> >> *Elena Ruiz *
> >> Sofware Development & Technical Support
> >> Tel. +34 952 43 97 71
> >>
>
> > eruiz@
>
> >> Sumatra, 9 - 29190 M?laga (Spain)
> >> *www.aplitop.com &lt;http://www.aplitop.com&gt;*
> >>
> >> &lt;https://www.facebook.com/AplitopSL/&gt;
> >> &lt;https://twitter.com/aplitop&gt;
> >> &lt;https://www.linkedin.com/company/aplitop&gt;
> >> &lt;https://www.youtube.com/user/aplitop&gt;
> >>
> >> In accordance with the provisions of the European Regulation of Data
> >> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos
> 2016/679),
> >> we inform you that the data and the information you provide us through
> >> this
> >> medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
> >> address at C / Sumatra, 9, Malaga, 29190, in order to answer your
> >> questions
> >> and inform you about our products. The data provided will be kept as
> long
> >> as it does not request its cessation and will not be transferred to
> third
> >> parties except in cases where there is a legal obligation. You have the
> >> right to access your personal data, correct inaccurate data or request
> >> its
> >> deletion when the data is no longer necessary for the purposes that were
> >> collected, as well as any rights recognized in the RGPD 2016/679
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >>
>
> > gdal-dev at .osgeo
>
> >> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >>
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > image002.jpg (984 bytes)
> > &lt;
> http://osgeo-org.1560.x6.nabble.com/attachment/5457213/0/image002.jpg&gt;
> > image004.jpg (980 bytes)
> > &lt;
> http://osgeo-org.1560.x6.nabble.com/attachment/5457213/1/image004.jpg&gt;
> > image006.jpg (1008 bytes)
> > &lt;
> http://osgeo-org.1560.x6.nabble.com/attachment/5457213/2/image006.jpg&gt;
> > image008.png (918 bytes)
> > &lt;
> http://osgeo-org.1560.x6.nabble.com/attachment/5457213/3/image008.png&gt;
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/400c8131/attachment-0001.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb 12 10:48:46 2021
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Fri, 12 Feb 2021 18:48:46 +0000
Subject: [gdal-dev] WMTS services error
Message-ID: <ccf7ea96837a4d8784e0d4acfdd55695@maanmittauslaitos.fi>

Hi,

That?s not the main issue because hand written XML gives the same error. I guess that GDAL is reading the EPSG:4326 tile matrix set from GetCapabilities and does not like it. This is what I used for testing:

<GDAL_WMTS>
  <GetCapabilitiesUrl>http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS&version=1.0.0</GetCapabilitiesUrl>
  <Layer>OI.OrthoimageCoverage</Layer>
  <Style>default</Style>
  <TileMatrixSet>EPSG:4326</TileMatrixSet>
  <DataWindow>
    <UpperLeftX>-180</UpperLeftX>
    <UpperLeftY>90</UpperLeftY>
    <LowerRightX>180</LowerRightX>
    <LowerRightY>-90</LowerRightY>
  </DataWindow>
  <BandsCount>3</BandsCount>
  <Cache />
  <UnsafeSSL>true</UnsafeSSL>
  <ZeroBlockHttpCodes>404</ZeroBlockHttpCodes>
  <ZeroBlockOnServerException>true</ZeroBlockOnServerException>
</GDAL_WMTS>

-Jukka-

L?hett?j?: Travis Kirstine <traviskirstine at gmail.com>
L?hetetty: perjantai 12. helmikuuta 2021 20.43
Vastaanottaja: Rahkonen Jukka (MML) <jukka.rahkonen at maanmittauslaitos.fi>
Kopio: gdal dev <gdal-dev at lists.osgeo.org>
Aihe: Re: [gdal-dev] WMTS services error

Jukka,

I think the main issue is that the gdal_translate command throws an error when generating the WMTS XML config file, so there is nothing to edit.

gdal_translate "WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326" wmts_bm.xml -of WMTS
ERROR 1: Invalid dataset dimensions : -135056383 x -167901439

On Fri, 12 Feb 2021 at 10:32, jratike80 <jukka.rahkonen at maanmittauslaitos.fi<mailto:jukka.rahkonen at maanmittauslaitos.fi>> wrote:
Hi,

By reading the documentation https://gdal.org/drivers/raster/wmts.html it
could be possible to edit the automatically created XML service definition
file or write it by hand from a scratch.

-Jukka Rahkonen-


Travis Kirstine wrote
> Elena
>
> This appears to be a bug in wmts driver in gdal, I would suggest filing a
> issue
>
> The below is from the OGC Two Dimensional Tile Matrix Set specs, section
> d2
> http://docs.opengeospatial.org/is/17-083r2/17-083r2.html
>
> "NOTE4: Some implementers prefer to define this TileMatrixSet using the
> CRS
> http://www.opengis.net/def/crs/EPSG/0/4326. The definition is the same
> except that CRS coordinates are expressed in latitude, longitude order,
> affecting the TopLeftCorner and the BBox encoding only".
>
>
> On Fri, 12 Feb 2021 at 08:05, Elena Ruiz &lt;

> eruiz@

> &gt; wrote:
>
>> Hello, my goal is to obtain images of both WMS and WMTS web services
>> using
>> GDAL, with the CRS that each service provides, in the case of the
>> example,
>> how can I do then to obtain images in EPSG: 4326 or any other CRS that
>> have
>> changed axes? Should a parameter be added to the gdal_translate call?
>> What
>> would be the correct way to obtain this type of images using gdal
>> applications like gadlinfo and gdaltranslate?
>>
>> I have found very little information about this on the web, many thanks
>> and best regards
>>
>>
>>
>>
>>
>> ------------------------------
>>
>> *Elena Ruiz*
>>
>>
>> Sofware Development & Technical Support
>> Tel.: +34 952 43 97 71
>>

> eruiz@

>> *www.aplitop.com<http://www.aplitop.com> &lt;http://www.aplitop.com&gt;*
>>
>>
>>
>> &lt;http://www.aplitop.com/Product/es/6/5/tcptunnel&gt;
>>
>> &lt;http://www.aplitop.com/New/es/281/mdt-75-a-la-venta&gt;
>>
>>
>>
>>
>>
>> *De:* Travis Kirstine &lt;

> traviskirstine@

> &gt;
>> *Enviado el:* jueves, 11 de febrero de 2021 20:20
>> *Para:* Elena Ruiz &lt;

> eruiz@

> &gt;
>> *CC:*

> gdal-dev at .osgeo<mailto:gdal-dev at .osgeo>

>> *Asunto:* Re: [gdal-dev] WMTS services error
>>
>>
>>
>> Elena,
>>
>>
>>
>> I'm not exactly sure what is causing the issue but if you look at the
>> capabilities of the 4326 tilematrixset compared to the InspireCRS84Quad
>> the
>> topleftcorner coordinates are reversed.  My guess gdal is expecting a X Y
>> order.
>>
>>
>>
>>
> <TileMatrixSet>
>>
> <ows:Identifier>
> InspireCRS84Quad
> </ows:Identifier>
>>
> <ows:SupportedCRS>
> http://www.opengis.net/def/crs/OGC/1.3/CRS84
>>
> </ows:SupportedCRS>
>>
> <TileMatrix>
>>
> <ows:Identifier>
> 0
> </ows:Identifier>
>>
> <ScaleDenominator>
> 2.79541132014358E8
> </ScaleDenominator>
>>
> <TopLeftCorner>
> -180.0 90.0
> </TopLeftCorner>
>>
> <TileWidth>
> 256
> </TileWidth>
>>
> <TileHeight>
> 256
> </TileHeight>
>>
> <MatrixWidth>
> 2
> </MatrixWidth>
>>
> <MatrixHeight>
> 1
> </MatrixHeight>
>>
> </TileMatrix>
>>
>>
>>
>>
> <TileMatrixSet>
>>
> <ows:Identifier>
> EPSG:4326
> </ows:Identifier>
>>
> <ows:SupportedCRS>
> EPSG:4326
> </ows:SupportedCRS>
>>

>>
> <TileMatrix>
>>
> <ows:Identifier>
> EPSG:4326:0
> </ows:Identifier>
>>
> <ScaleDenominator>
> 2.795411320143589E8
> </ScaleDenominator>
>>
> <TopLeftCorner>
> 90.0 -180.0
> </TopLeftCorner>
>>
> <TileWidth>
> 256
> </TileWidth>
>>
> <TileHeight>
> 256
> </TileHeight>
>>
> <MatrixWidth>
> 2
> </MatrixWidth>
>>
> <MatrixHeight>
> 1
> </MatrixHeight>
>>
> </TileMatrix>
>>
>>
>>
>>
>>
>> On Thu, 11 Feb 2021 at 11:51, Elena Ruiz &lt;

> eruiz@

> &gt; wrote:
>>
>> Hello, I?m trying call web services (WMTS and WMS) using GDAL 3.0.2, but
>> I
>> have a problem with this example:
>>
>>
>>
>> gdal_translate "WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326"
>> d://wmts_bm.xml -of WMTS
>>
>> ERROR 1: Invalid dataset dimensions : -135056383 x -167901439
>>
>>
>>
>> gdal_translate "WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830"
>> d://wmts_bm.xml -of WMTS
>>
>> Input file size is 20616192, 26817505
>>
>>
>>
>> In this server http://www.ign.es/wmts/pnoa-ma have available the next SRS
>> :
>>
>> SUBDATASET_1_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=InspireCRS84Quad
>>
>> SUBDATASET_2_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
>>
>> SUBDATASET_3_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4258
>>
>> SUBDATASET_4_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
>>
>> SUBDATASET_5_NAME=WMTS:
>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=GoogleMapsCompatible
>>
>>
>>
>> But when I want Know the information or download a image in certain
>> coordinates  with EPSG:4326, it returns an error ?ERROR 1: Invalid
>> dataset
>> dimensions : -135056383 x -167901439?, with EPSG:25830 works fine. I
>> don`t
>> understand this error, someone could help me?
>>
>>
>>
>> Thank you and regards
>> ------------------------------
>>
>> *Elena Ruiz *
>> Sofware Development & Technical Support
>> Tel. +34 952 43 97 71
>>

> eruiz@

>> Sumatra, 9 - 29190 M?laga (Spain)
>> *www.aplitop.com<http://www.aplitop.com> &lt;http://www.aplitop.com&gt;*
>>
>> &lt;https://www.facebook.com/AplitopSL/&gt;
>> &lt;https://twitter.com/aplitop&gt;
>> &lt;https://www.linkedin.com/company/aplitop&gt;
>> &lt;https://www.youtube.com/user/aplitop&gt;
>>
>> In accordance with the provisions of the European Regulation of Data
>> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679),
>> we inform you that the data and the information you provide us through
>> this
>> medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
>> address at C / Sumatra, 9, Malaga, 29190, in order to answer your
>> questions
>> and inform you about our products. The data provided will be kept as long
>> as it does not request its cessation and will not be transferred to third
>> parties except in cases where there is a legal obligation. You have the
>> right to access your personal data, correct inaccurate data or request
>> its
>> deletion when the data is no longer necessary for the purposes that were
>> collected, as well as any rights recognized in the RGPD 2016/679
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>>

> gdal-dev at .osgeo<mailto:gdal-dev at .osgeo>

>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo<mailto:gdal-dev at .osgeo>

> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> image002.jpg (984 bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/0/image002.jpg&gt;
> image004.jpg (980 bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/1/image004.jpg&gt;
> image006.jpg (1008 bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/2/image006.jpg&gt;
> image008.png (918 bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/3/image008.png&gt;





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210212/0e173e37/attachment-0001.html>

From ahmettemiz88 at gmail.com  Fri Feb 12 23:11:42 2021
From: ahmettemiz88 at gmail.com (Ahmet Temiz)
Date: Sat, 13 Feb 2021 10:11:42 +0300
Subject: [gdal-dev] Pushing OGRLineString * var to a vector problematic ??
Message-ID: <CAJKO1Yty00iZEniMDEtQFoKA4vs_3ONHT+V=J_YN=M9PqTCqXQ@mail.gmail.com>

Hi,

I want to get your view
Is putting OGRLineString * var to a vector and then a setter a good idea?

... // same as tutorial
if( poGeometry != NULL && wkbFlatten(poGeometry->getGeometryType()) ==
wkbLineString )
        {
            OGRLineString *poLine = (OGRLineString *) poGeometry;
            v_faultLine.push_back(poLine);   /// std::vector <
OGRLineString * >  v_faultLine;

.           ...
        }

       this->setFaultLine (v_faultLine);
    ----
kind regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Deprem  Dairesi Ba?kanl???


________________________

Ahmet Temiz
Geological Eng.

Disaster and Emergency Management
of Presidency
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210213/cf758e2c/attachment.html>

From mateusz at loskot.net  Sat Feb 13 01:13:00 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat, 13 Feb 2021 10:13:00 +0100
Subject: [gdal-dev] Pushing OGRLineString * var to a vector problematic
 ??
In-Reply-To: <CAJKO1Yty00iZEniMDEtQFoKA4vs_3ONHT+V=J_YN=M9PqTCqXQ@mail.gmail.com>
References: <CAJKO1Yty00iZEniMDEtQFoKA4vs_3ONHT+V=J_YN=M9PqTCqXQ@mail.gmail.com>
Message-ID: <CABUeae9TyeWDnHGcexZZc79tDA-RShV048ufwCrXeGaSx3ztsQ@mail.gmail.com>

On Sat, 13 Feb 2021 at 08:11, Ahmet Temiz <ahmettemiz88 at gmail.com> wrote:
>
> I want to get your view
> Is putting OGRLineString * var to a vector and then a setter a good idea?
>
> ... // same as tutorial
> if( poGeometry != NULL && wkbFlatten(poGeometry->getGeometryType()) == wkbLineString )
>         {
>             OGRLineString *poLine = (OGRLineString *) poGeometry;
>             v_faultLine.push_back(poLine);   /// std::vector < OGRLineString * >  v_faultLine;

IN the same https://gdal.org/tutorials/vector_api_tut.html you can read

"Note that OGRFeature::GetGeometryRef() [...] return a pointer
to the internal geometry owned by the OGRFeature"

That should explain the v_faultLine is collection of observers and not owners.
If you use it as such, i.e. without trying to take over the
ownership/deallocate,
you should be safe.

> .           ...
>         }
>
>        this->setFaultLine (v_faultLine);

It is not possible to say that it is "a good idea" without
knowing what the setFaultLine expects and does.
If it expects it will take over ownership of elements in v_faultLine,
then watch the holes in your knees.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From saheel at breezo.in  Sat Feb 13 10:06:41 2021
From: saheel at breezo.in (Saheel Ahmed)
Date: Sat, 13 Feb 2021 23:36:41 +0530
Subject: [gdal-dev] Missing Netcdf format in GDAL
Message-ID: <CADfnL8DokK7aKzU5vfCPGS6GRYygG6YFQY8nOQDDPibhDUXYKA@mail.gmail.com>

Hey,
I have installed gdal on Sagemaker which runs on
```
NAME="Amazon Linux AMI"
VERSION="2018.03"
ID="amzn"
ID_LIKE="rhel fedora"
VERSION_ID="2018.03"
PRETTY_NAME="Amazon Linux AMI 2018.03"
ANSI_COLOR="0;33"
CPE_NAME="cpe:/o:amazon:linux:2018.03:ga"
HOME_URL="http://aws.amazon.com/amazon-linux-ami/"
```
using the following instructions
<https://gist.github.com/abelcallejo/e75eb93d73db6f163b076d0232fc7d7e> .
And it installed successfully however when I try to netcdf file it doesn't
read. I also check `gdalinfo --formats` but `netCDF` doesn't show up. Is
there anything I am missing and that I can correct. I used to install GDAL
from conda with just one command `conda install -c conda-forge gdal` but
lately it's not working anymore. That's why I am trying to install it from
source. Any help would be great.

Thanks & Regards,
Saheel Ahmed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210213/18b6c294/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 15 04:45:53 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 15 Feb 2021 05:45:53 -0700 (MST)
Subject: [gdal-dev] WMTS services error
In-Reply-To: <ccf7ea96837a4d8784e0d4acfdd55695@maanmittauslaitos.fi>
References: <AM7P192MB062798B0E35EB1BDD24740DDBB8C9@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
 <ccf7ea96837a4d8784e0d4acfdd55695@maanmittauslaitos.fi>
Message-ID: <1613393153107-0.post@n6.nabble.com>

Some more information into this issue.

The server at IGN is obviously a GeoServer. GDAL usually does not have any
trouble with GeoServers. Try for example

gdal_translate
"http://demo.geo-solutions.it/geoserver/gwc/service/wmts?REQUEST=GetCapabilities"
-of WMTS geoserver.xml

No errors with that URL. Conclusion: there must be some difference. By
comparing the GetCapabilities responses there seems to be one here:

GeoServer at Geosolutions:

<TileMatrixSet>
      <ows:Identifier>EPSG:4326</ows:Identifier>
      <ows:SupportedCRS>urn:ogc:def:crs:EPSG::4326</ows:SupportedCRS>
      <TileMatrix>
        <ows:Identifier>EPSG:4326:0</ows:Identifier>
        <ScaleDenominator>2.795411320143589E8</ScaleDenominator>
        <TopLeftCorner>90.0 -180.0</TopLeftCorner>

GeoServer at IGN:

<TileMatrixSet>
     <ows:Identifier>EPSG:4326</ows:Identifier>
     <ows:SupportedCRS>EPSG:4326</ows:SupportedCRS>
     #commented out! --  crs="urn:ogc:def:crs:EPSG::4326"  -->
     <TileMatrix>
       <ows:Identifier>EPSG:4326:0</ows:Identifier>
       <ScaleDenominator>2.795411320143589E8</ScaleDenominator>
       <TopLeftCorner>90.0 -180.0</TopLeftCorner>

IGN has changed the SupportedCRS from urn:ogc:def:crs:EPSG::4326 (that works
with GDAL) into EPSG:4326 (that does not work with GDAL).

Travis did find this note from the OGC standard:

"NOTE4: Some implementers prefer to define this TileMatrixSet using the CRS
http://www.opengis.net/def/crs/EPSG/0/4326. The definition is the same
except that CRS coordinates are expressed in latitude, longitude order,
affecting the TopLeftCorner and the BBox encoding only"

Ok, GeoServer seems to one of those implementers. Now there is a question
what was the alternative. In the standard the CRS used in "World CRS84 Quad
TileMatrixSet definition" is 

CRS: http://www.opengis.net/def/crs/OGC/1.3/CRS84, CRS84

Final conclusion:
OGC has defined http://www.opengis.net/def/crs/OGC/1.3/CRS84 for the
longitude-latitude order and http://www.opengis.net/def/crs/EPSG/0/4326 for
the latitude-longitude order. For some reason IGN wants to use a third
alternative EPSG:4326, also for latitude-longitude order. This is something
that is undefined in the standard. I would say that the bug is on the IGN
side and I would like to know what problem they have had with
http://www.opengis.net/def/crs/EPSG/0/4326.

What GDAL might do better is to have an option to flip the axes with the
WMTS XML definition file.

-Jukka Rahkonen-




jratike80 wrote
> Hi,
> 
> That?s not the main issue because hand written XML gives the same error. I
> guess that GDAL is reading the EPSG:4326 tile matrix set from
> GetCapabilities and does not like it. This is what I used for testing:
> <GDAL_WMTS>
>   
> <GetCapabilitiesUrl>
> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS&version=1.0.0
> </GetCapabilitiesUrl>
>   
> <Layer>
> OI.OrthoimageCoverage
> </Layer>
>   

>   
> <TileMatrixSet>
> EPSG:4326
> </TileMatrixSet>
>   
> <DataWindow>
>     
> <UpperLeftX>
> -180
> </UpperLeftX>
>     
> <UpperLeftY>
> 90
> </UpperLeftY>
>     
> <LowerRightX>
> 180
> </LowerRightX>
>     
> <LowerRightY>
> -90
> </LowerRightY>
>   
> </DataWindow>
>   
> <BandsCount>
> 3
> </BandsCount>
>   
> <Cache />
>   
> <UnsafeSSL>
> true
> </UnsafeSSL>
>   
> <ZeroBlockHttpCodes>
> 404
> </ZeroBlockHttpCodes>
>   
> <ZeroBlockOnServerException>
> true
> </ZeroBlockOnServerException>
> </GDAL_WMTS>
> -Jukka-
> 
> L?hett?j?: Travis Kirstine &lt;

> traviskirstine@

> &gt;
> L?hetetty: perjantai 12. helmikuuta 2021 20.43
> Vastaanottaja: Rahkonen Jukka (MML) &lt;

> jukka.rahkonen@

> &gt;
> Kopio: gdal dev &lt;

> gdal-dev at .osgeo

> &gt;
> Aihe: Re: [gdal-dev] WMTS services error
> 
> Jukka,
> 
> I think the main issue is that the gdal_translate command throws an error
> when generating the WMTS XML config file, so there is nothing to edit.
> 
> gdal_translate
> "WMTS:http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326"
> wmts_bm.xml -of WMTS
> ERROR 1: Invalid dataset dimensions : -135056383 x -167901439
> 
> On Fri, 12 Feb 2021 at 10:32, jratike80 &lt;

> jukka.rahkonen@

> &lt;mailto:

> jukka.rahkonen@

> &gt;> wrote:
> Hi,
> 
> By reading the documentation https://gdal.org/drivers/raster/wmts.html it
> could be possible to edit the automatically created XML service definition
> file or write it by hand from a scratch.
> 
> -Jukka Rahkonen-
> 
> 
> Travis Kirstine wrote
>> Elena
>>
>> This appears to be a bug in wmts driver in gdal, I would suggest filing a
>> issue
>>
>> The below is from the OGC Two Dimensional Tile Matrix Set specs, section
>> d2
>> http://docs.opengeospatial.org/is/17-083r2/17-083r2.html
>>
>> "NOTE4: Some implementers prefer to define this TileMatrixSet using the
>> CRS
>> http://www.opengis.net/def/crs/EPSG/0/4326. The definition is the same
>> except that CRS coordinates are expressed in latitude, longitude order,
>> affecting the TopLeftCorner and the BBox encoding only".
>>
>>
>> On Fri, 12 Feb 2021 at 08:05, Elena Ruiz &lt;
> 
>> eruiz@
> 
>> &gt; wrote:
>>
>>> Hello, my goal is to obtain images of both WMS and WMTS web services
>>> using
>>> GDAL, with the CRS that each service provides, in the case of the
>>> example,
>>> how can I do then to obtain images in EPSG: 4326 or any other CRS that
>>> have
>>> changed axes? Should a parameter be added to the gdal_translate call?
>>> What
>>> would be the correct way to obtain this type of images using gdal
>>> applications like gadlinfo and gdaltranslate?
>>>
>>> I have found very little information about this on the web, many thanks
>>> and best regards
>>>
>>>
>>>
>>>
>>>
>>> ------------------------------
>>>
>>> *Elena Ruiz*
>>>
>>>
>>> Sofware Development & Technical Support
>>> Tel.: +34 952 43 97 71
>>>
> 
>> eruiz@
> 
>>> *www.aplitop.com&lt;http://www.aplitop.com&gt;
>>> &lt;http://www.aplitop.com&gt;*
>>>
>>>
>>>
>>> &lt;http://www.aplitop.com/Product/es/6/5/tcptunnel&gt;
>>>
>>> &lt;http://www.aplitop.com/New/es/281/mdt-75-a-la-venta&gt;
>>>
>>>
>>>
>>>
>>>
>>> *De:* Travis Kirstine &lt;
> 
>> traviskirstine@
> 
>> &gt;
>>> *Enviado el:* jueves, 11 de febrero de 2021 20:20
>>> *Para:* Elena Ruiz &lt;
> 
>> eruiz@
> 
>> &gt;
>>> *CC:*
> 
>> gdal-dev at .osgeo&lt;mailto:gdal-dev at .osgeo&gt;
> 
>>> *Asunto:* Re: [gdal-dev] WMTS services error
>>>
>>>
>>>
>>> Elena,
>>>
>>>
>>>
>>> I'm not exactly sure what is causing the issue but if you look at the
>>> capabilities of the 4326 tilematrixset compared to the InspireCRS84Quad
>>> the
>>> topleftcorner coordinates are reversed.  My guess gdal is expecting a X
>>> Y
>>> order.
>>>
>>>
>>>
>>>
>> 
> <TileMatrixSet>
>>>
>> 
> <ows:Identifier>
>> InspireCRS84Quad
>> 
> </ows:Identifier>
>>>
>> 
> <ows:SupportedCRS>
>> http://www.opengis.net/def/crs/OGC/1.3/CRS84
>>>
>> 
> </ows:SupportedCRS>
>>>
>> 
> <TileMatrix>
>>>
>> 
> <ows:Identifier>
>> 0
>> 
> </ows:Identifier>
>>>
>> 
> <ScaleDenominator>
>> 2.79541132014358E8
>> 
> </ScaleDenominator>
>>>
>> 
> <TopLeftCorner>
>> -180.0 90.0
>> 
> </TopLeftCorner>
>>>
>> 
> <TileWidth>
>> 256
>> 
> </TileWidth>
>>>
>> 
> <TileHeight>
>> 256
>> 
> </TileHeight>
>>>
>> 
> <MatrixWidth>
>> 2
>> 
> </MatrixWidth>
>>>
>> 
> <MatrixHeight>
>> 1
>> 
> </MatrixHeight>
>>>
>> 
> </TileMatrix>
>>>
>>>
>>>
>>>
>> 
> <TileMatrixSet>
>>>
>> 
> <ows:Identifier>
>> EPSG:4326
>> 
> </ows:Identifier>
>>>
>> 
> <ows:SupportedCRS>
>> EPSG:4326
>> 
> </ows:SupportedCRS>
>>>
> 
>>>
>> 
> <TileMatrix>
>>>
>> 
> <ows:Identifier>
>> EPSG:4326:0
>> 
> </ows:Identifier>
>>>
>> 
> <ScaleDenominator>
>> 2.795411320143589E8
>> 
> </ScaleDenominator>
>>>
>> 
> <TopLeftCorner>
>> 90.0 -180.0
>> 
> </TopLeftCorner>
>>>
>> 
> <TileWidth>
>> 256
>> 
> </TileWidth>
>>>
>> 
> <TileHeight>
>> 256
>> 
> </TileHeight>
>>>
>> 
> <MatrixWidth>
>> 2
>> 
> </MatrixWidth>
>>>
>> 
> <MatrixHeight>
>> 1
>> 
> </MatrixHeight>
>>>
>> 
> </TileMatrix>
>>>
>>>
>>>
>>>
>>>
>>> On Thu, 11 Feb 2021 at 11:51, Elena Ruiz &lt;
> 
>> eruiz@
> 
>> &gt; wrote:
>>>
>>> Hello, I?m trying call web services (WMTS and WMS) using GDAL 3.0.2, but
>>> I
>>> have a problem with this example:
>>>
>>>
>>>
>>> gdal_translate "WMTS:
>>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326"
>>> d://wmts_bm.xml -of WMTS
>>>
>>> ERROR 1: Invalid dataset dimensions : -135056383 x -167901439
>>>
>>>
>>>
>>> gdal_translate "WMTS:
>>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830"
>>> d://wmts_bm.xml -of WMTS
>>>
>>> Input file size is 20616192, 26817505
>>>
>>>
>>>
>>> In this server http://www.ign.es/wmts/pnoa-ma have available the next
>>> SRS
>>> :
>>>
>>> SUBDATASET_1_NAME=WMTS:
>>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=InspireCRS84Quad
>>>
>>> SUBDATASET_2_NAME=WMTS:
>>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4326
>>>
>>> SUBDATASET_3_NAME=WMTS:
>>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:4258
>>>
>>> SUBDATASET_4_NAME=WMTS:
>>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=EPSG:25830
>>>
>>> SUBDATASET_5_NAME=WMTS:
>>> http://www.ign.es/wmts/pnoa-ma?request=GetCapabilities&service=WMTS,layer=OI.OrthoimageCoverage,tilematrixset=GoogleMapsCompatible
>>>
>>>
>>>
>>> But when I want Know the information or download a image in certain
>>> coordinates  with EPSG:4326, it returns an error ?ERROR 1: Invalid
>>> dataset
>>> dimensions : -135056383 x -167901439?, with EPSG:25830 works fine. I
>>> don`t
>>> understand this error, someone could help me?
>>>
>>>
>>>
>>> Thank you and regards
>>> ------------------------------
>>>
>>> *Elena Ruiz *
>>> Sofware Development & Technical Support
>>> Tel. +34 952 43 97 71
>>>
> 
>> eruiz@
> 
>>> Sumatra, 9 - 29190 M?laga (Spain)
>>> *www.aplitop.com&lt;http://www.aplitop.com&gt;
>>> &lt;http://www.aplitop.com&gt;*
>>>
>>> &lt;https://www.facebook.com/AplitopSL/&gt;
>>> &lt;https://twitter.com/aplitop&gt;
>>> &lt;https://www.linkedin.com/company/aplitop&gt;
>>> &lt;https://www.youtube.com/user/aplitop&gt;
>>>
>>> In accordance with the provisions of the European Regulation of Data
>>> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos
>>> 2016/679),
>>> we inform you that the data and the information you provide us through
>>> this
>>> medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
>>> address at C / Sumatra, 9, Malaga, 29190, in order to answer your
>>> questions
>>> and inform you about our products. The data provided will be kept as
>>> long
>>> as it does not request its cessation and will not be transferred to
>>> third
>>> parties except in cases where there is a legal obligation. You have the
>>> right to access your personal data, correct inaccurate data or request
>>> its
>>> deletion when the data is no longer necessary for the purposes that were
>>> collected, as well as any rights recognized in the RGPD 2016/679
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>>
> 
>> gdal-dev at .osgeo&lt;mailto:gdal-dev at .osgeo&gt;
> 
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
> 
>> gdal-dev at .osgeo&lt;mailto:gdal-dev at .osgeo&gt;
> 
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> image002.jpg (984 bytes)
>> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/0/image002.jpg&gt;
>> image004.jpg (980 bytes)
>> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/1/image004.jpg&gt;
>> image006.jpg (1008 bytes)
>> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/2/image006.jpg&gt;
>> image008.png (918 bytes)
>> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457213/3/image008.png&gt;
> 
> 
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> &lt;mailto:

> gdal-dev at .osgeo

> &gt;
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From eruiz at aplitop.com  Mon Feb 15 04:47:01 2021
From: eruiz at aplitop.com (Elena Ruiz)
Date: Mon, 15 Feb 2021 12:47:01 +0000
Subject: [gdal-dev] How I get a list of CRS supported for a WMS service with
 gdal?
References: <3d652b5c-aa92-4a2a-85be-25316f1f7b0b.ba94d704-e79f-4907-b4e6-7c540f2b307c.79ca4482-00e2-4cff-b2a9-e0780e21fcbe@emailsignatures365.codetwo.com>
Message-ID: <AM7P192MB062708C00F1C818596745ED2BB889@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>

Hello, when I run the next command:
gdalinfo "WMS:http://wms.mapa.es/wms/wms.aspx?service=WMS&request=GetCapabilities"

the request is:

Driver: WMS/OGC Web Map Service
Files: none associated
Size is 512, 512
Subdatasets:
  SUBDATASET_1_NAME=WMS:http://wms.mapama.gob.es/wms/wms.aspx?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetMap&LAYERS=ARBOLES&SRS=EPSG:4326&BBOX=-18.1705,27.6374,4.3169,43.7722
  SUBDATASET_1_DESC=Arboles
  SUBDATASET_2_NAME=WMS:http://wms.mapama.gob.es/wms/wms.aspx?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetMap&LAYERS=RECINTO&SRS=EPSG:4326&BBOX=-18.1705,27.6374,4.3169,43.7722
  SUBDATASET_2_DESC=Recintos
  SUBDATASET_3_NAME=WMS:http://wms.mapama.gob.es/wms/wms.aspx?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetMap&LAYERS=PARCELA&SRS=EPSG:4326&BBOX=-18.1705,27.6374,4.3169,43.7722
  SUBDATASET_3_DESC=Parcelas
  SUBDATASET_4_NAME=WMS:http://wms.mapama.gob.es/wms/wms.aspx?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetMap&LAYERS=ORTOFOTOS&SRS=EPSG:4326&BBOX=-18.1705,27.6374,4.3169,43.7722&TRANSPARENT=FALSE
  SUBDATASET_4_DESC=Ortofotos
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)

But if you put http://wms.mapa.es/wms/wms.aspx?service=WMS&request=GetCapabilities, in a explorer the request is:
...
<Title>Sigpac</Title>
<CRS>EPSG:4326</CRS>
<CRS>EPSG:4258</CRS>
<CRS>EPSG:32627</CRS>
<CRS>EPSG:32628</CRS>
<CRS>EPSG:32629</CRS>
<CRS>EPSG:32630</CRS>
<CRS>EPSG:32631</CRS>
<CRS>EPSG:25827</CRS>
<CRS>EPSG:25828</CRS>
<CRS>EPSG:25829</CRS>
<CRS>EPSG:25830</CRS>
<CRS>EPSG:25831</CRS>
<CRS>EPSG:3857</CRS>
<EX_GeographicBoundingBox>
<westBoundLongitude>-22.729594</westBoundLongitude>
<eastBoundLongitude>5.836872</eastBoundLongitude>
<southBoundLatitude>25.912170</southBoundLatitude>
<northBoundLatitude>45.945160</northBoundLatitude>
</EX_GeographicBoundingBox>
<BoundingBox CRS="EPSG:4326" minx="-18.1705" miny="27.6374" maxx="4.3169" maxy="43.7722"/>
<BoundingBox CRS="EPSG:4258" minx="-18.1621" miny="21.8992" maxx="6.2892" maxy="45.2862"/>
<BoundingBox CRS="EPSG:32627" minx="690000" miny="3000000" maxx="2780000" maxy="5000000"/>
<BoundingBox CRS="EPSG:32628" minx="100000" miny="3000000" maxx="740000" maxy="3258000"/>
<BoundingBox CRS="EPSG:32629" minx="396060.71" miny="4008012.13" maxx="849792.29" maxy="4847198.99"/>
<BoundingBox CRS="EPSG:32630" minx="150207.79" miny="3902217.2" maxx="841149.7" maxy="4836742.49"/>
<BoundingBox CRS="EPSG:32631" minx="158850.34" miny="4278426.36" maxx="692667.7" maxy="4747696.68"/>
<BoundingBox CRS="EPSG:25827" minx="690000" miny="3000000" maxx="2780000" maxy="5000000"/>
<BoundingBox CRS="EPSG:25828" minx="100000" miny="3000000" maxx="740000" maxy="3258000"/>
<BoundingBox CRS="EPSG:25829" minx="396060.71" miny="4008012.13" maxx="849792.29" maxy="4847198.99"/>
<BoundingBox CRS="EPSG:25830" minx="150207.79" miny="3902217.2" maxx="841149.7" maxy="4836742.49"/>
<BoundingBox CRS="EPSG:25831" minx="158850.34" miny="4278426.36" maxx="692667.7" maxy="4747696.68"/>
<BoundingBox CRS="EPSG:3857" minx="-2100000" miny="3000000" maxx="500000" maxy="5600000"/>
...
Therefore, when I use GDAL only get the first CRS that this WMS service support, but in the web this service offers 13 differents CRS, How I get a list of the CRS of this service that really supports?

Thanks you, and regards


________________________________

[https://www.aplitop.com/descargas/firma1.jpg]


Elena Ruiz
Sofware Development & Technical Support
Tel. +34 952 43 97 71
eruiz at aplitop.com
Sumatra, 9 - 29190 M?laga (Spain)
www.aplitop.com

[cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]<https://www.facebook.com/AplitopSL/>   [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png] <https://twitter.com/aplitop>    [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png] <https://www.linkedin.com/company/aplitop>    [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png] <https://www.youtube.com/user/aplitop>


In accordance with the provisions of the European Regulation of Data Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679), we inform you that the data and the information you provide us through this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with address at C / Sumatra, 9, Malaga, 29190, in order to answer your questions and inform you about our products. The data provided will be kept as long as it does not request its cessation and will not be transferred to third parties except in cases where there is a legal obligation. You have the right to access your personal data, correct inaccurate data or request its deletion when the data is no longer necessary for the purposes that were collected, as well as any rights recognized in the RGPD 2016/679

<https://www.aplitop.com/Event/en/358/intergeo-2019>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210215/4004a51b/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
Type: image/png
Size: 365 bytes
Desc: SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210215/4004a51b/attachment-0004.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
Type: image/png
Size: 619 bytes
Desc: SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210215/4004a51b/attachment-0005.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
Type: image/png
Size: 468 bytes
Desc: SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210215/4004a51b/attachment-0006.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
Type: image/png
Size: 817 bytes
Desc: SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210215/4004a51b/attachment-0007.png>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Feb 15 06:08:45 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Mon, 15 Feb 2021 07:08:45 -0700 (MST)
Subject: [gdal-dev] How I get a list of CRS supported for a WMS service
 with gdal?
In-Reply-To: <AM7P192MB062708C00F1C818596745ED2BB889@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
References: <AM7P192MB062708C00F1C818596745ED2BB889@AM7P192MB0627.EURP192.PROD.OUTLOOK.COM>
Message-ID: <1613398125455-0.post@n6.nabble.com>

Hi,

GDAL is not made to build a CRS list. See
https://gdal.org/drivers/raster/wms.html
"[CRS] Image projection (optional, defaults to EPSG:4326, WMS version 1.3.0
or above only)"

You can get the full list from GetCapabilities that you fetch by other means
and write one of the supported codes into CRS element. Then GDAL will use
that CRS in the GetMaps that it is sending. I believe that then also the
DataWindow must be edited to have numbers that match with the selected CRS
but I am not sure about that. You are lucky because the server you are
playing with seems to advertise bounding boxes also for the other CRSs.

GDAL is using the configured CRS when it sends GetMaps and reprojects image
data if needed into other CRS. If you configure GDAL to use the same CRS
that you want for the output you will avoid reprojection and the quality is
probably better.

-Jukka Rahkonen-




Elena Ruiz wrote
> Hello, when I run the next command:
> gdalinfo
> "WMS:http://wms.mapa.es/wms/wms.aspx?service=WMS&request=GetCapabilities"
> 
> the request is:
> 
> Driver: WMS/OGC Web Map Service
> Files: none associated
> Size is 512, 512
> Subdatasets:
>  
> SUBDATASET_1_NAME=WMS:http://wms.mapama.gob.es/wms/wms.aspx?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetMap&LAYERS=ARBOLES&SRS=EPSG:4326&BBOX=-18.1705,27.6374,4.3169,43.7722
>   SUBDATASET_1_DESC=Arboles
>  
> SUBDATASET_2_NAME=WMS:http://wms.mapama.gob.es/wms/wms.aspx?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetMap&LAYERS=RECINTO&SRS=EPSG:4326&BBOX=-18.1705,27.6374,4.3169,43.7722
>   SUBDATASET_2_DESC=Recintos
>  
> SUBDATASET_3_NAME=WMS:http://wms.mapama.gob.es/wms/wms.aspx?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetMap&LAYERS=PARCELA&SRS=EPSG:4326&BBOX=-18.1705,27.6374,4.3169,43.7722
>   SUBDATASET_3_DESC=Parcelas
>  
> SUBDATASET_4_NAME=WMS:http://wms.mapama.gob.es/wms/wms.aspx?SERVICE=WMS&VERSION=1.1.0&REQUEST=GetMap&LAYERS=ORTOFOTOS&SRS=EPSG:4326&BBOX=-18.1705,27.6374,4.3169,43.7722&TRANSPARENT=FALSE
>   SUBDATASET_4_DESC=Ortofotos
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
> 
> But if you put
> http://wms.mapa.es/wms/wms.aspx?service=WMS&request=GetCapabilities, in a
> explorer the request is:
> ...
> <Title>
> Sigpac
> </Title>
> <CRS>
> EPSG:4326
> </CRS>
> <CRS>
> EPSG:4258
> </CRS>
> <CRS>
> EPSG:32627
> </CRS>
> <CRS>
> EPSG:32628
> </CRS>
> <CRS>
> EPSG:32629
> </CRS>
> <CRS>
> EPSG:32630
> </CRS>
> <CRS>
> EPSG:32631
> </CRS>
> <CRS>
> EPSG:25827
> </CRS>
> <CRS>
> EPSG:25828
> </CRS>
> <CRS>
> EPSG:25829
> </CRS>
> <CRS>
> EPSG:25830
> </CRS>
> <CRS>
> EPSG:25831
> </CRS>
> <CRS>
> EPSG:3857
> </CRS>
> <EX_GeographicBoundingBox>
> <westBoundLongitude>
> -22.729594
> </westBoundLongitude>
> <eastBoundLongitude>
> 5.836872
> </eastBoundLongitude>
> <southBoundLatitude>
> 25.912170
> </southBoundLatitude>
> <northBoundLatitude>
> 45.945160
> </northBoundLatitude>
> </EX_GeographicBoundingBox>
> <BoundingBox CRS="EPSG:4326" minx="-18.1705" miny="27.6374" maxx="4.3169"
> maxy="43.7722"/>
> <BoundingBox CRS="EPSG:4258" minx="-18.1621" miny="21.8992" maxx="6.2892"
> maxy="45.2862"/>
> <BoundingBox CRS="EPSG:32627" minx="690000" miny="3000000" maxx="2780000"
> maxy="5000000"/>
> <BoundingBox CRS="EPSG:32628" minx="100000" miny="3000000" maxx="740000"
> maxy="3258000"/>
> <BoundingBox CRS="EPSG:32629" minx="396060.71" miny="4008012.13"
> maxx="849792.29" maxy="4847198.99"/>
> <BoundingBox CRS="EPSG:32630" minx="150207.79" miny="3902217.2"
> maxx="841149.7" maxy="4836742.49"/>
> <BoundingBox CRS="EPSG:32631" minx="158850.34" miny="4278426.36"
> maxx="692667.7" maxy="4747696.68"/>
> <BoundingBox CRS="EPSG:25827" minx="690000" miny="3000000" maxx="2780000"
> maxy="5000000"/>
> <BoundingBox CRS="EPSG:25828" minx="100000" miny="3000000" maxx="740000"
> maxy="3258000"/>
> <BoundingBox CRS="EPSG:25829" minx="396060.71" miny="4008012.13"
> maxx="849792.29" maxy="4847198.99"/>
> <BoundingBox CRS="EPSG:25830" minx="150207.79" miny="3902217.2"
> maxx="841149.7" maxy="4836742.49"/>
> <BoundingBox CRS="EPSG:25831" minx="158850.34" miny="4278426.36"
> maxx="692667.7" maxy="4747696.68"/>
> <BoundingBox CRS="EPSG:3857" minx="-2100000" miny="3000000" maxx="500000"
> maxy="5600000"/>
> ...
> Therefore, when I use GDAL only get the first CRS that this WMS service
> support, but in the web this service offers 13 differents CRS, How I get a
> list of the CRS of this service that really supports?
> 
> Thanks you, and regards
> 
> 
> ________________________________
> 
> [https://www.aplitop.com/descargas/firma1.jpg]
> 
> 
> Elena Ruiz
> Sofware Development & Technical Support
> Tel. +34 952 43 97 71

> eruiz@

> Sumatra, 9 - 29190 M?laga (Spain)
> www.aplitop.com
> 
> [cid:SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png]&lt;https://www.facebook.com/AplitopSL/&gt;  
> [cid:SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png]
> &lt;https://twitter.com/aplitop&gt;   
> [cid:SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png]
> &lt;https://www.linkedin.com/company/aplitop&gt;   
> [cid:SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png]
> &lt;https://www.youtube.com/user/aplitop&gt;
> 
> 
> In accordance with the provisions of the European Regulation of Data
> Protection 2016/679 (Reglamento Europeo de Protecci?n de Datos 2016/679),
> we inform you that the data and the information you provide us through
> this medium will be used by APLITOP, S.L., with C.I.F. B-92543396 and with
> address at C / Sumatra, 9, Malaga, 29190, in order to answer your
> questions and inform you about our products. The data provided will be
> kept as long as it does not request its cessation and will not be
> transferred to third parties except in cases where there is a legal
> obligation. You have the right to access your personal data, correct
> inaccurate data or request its deletion when the data is no longer
> necessary for the purposes that were collected, as well as any rights
> recognized in the RGPD 2016/679
> 
> &lt;https://www.aplitop.com/Event/en/358/intergeo-2019&gt;
> 
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png (502
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457355/0/SocialLink_Facebook_32x32_a745adb8-c250-4372-8480-e77f503dad3d.png&gt;
> SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png (850
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457355/1/SocialLink_Twitter_32x32_858247f6-9d4a-4740-a6b3-9b5ebfd98a97.png&gt;
> SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png (642
> bytes)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457355/2/SocialLink_Linkedin_32x32_154d63de-bf68-468f-9eb0-ffed102fac77.png&gt;
> SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png (1K)
> &lt;http://osgeo-org.1560.x6.nabble.com/attachment/5457355/3/SocialLink_Youtube_32x32_0dea15dd-3774-4086-be9d-f62560b70c86.png&gt;





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From matt.jk3 at gmail.com  Tue Feb 16 09:02:15 2021
From: matt.jk3 at gmail.com (Matt)
Date: Tue, 16 Feb 2021 18:02:15 +0100
Subject: [gdal-dev] How to use Vector API to get text from MapInfo text type?
Message-ID: <CAPu+vHaxvG4Ne=ozX+Ojaehcv-MHY2yzed4MFM=7YjwV0bxB6Q@mail.gmail.com>

Hello

I'm trying to read MapInfo files by calling GDAL library from another
language.
I mostly followed the official Vector API tutorial, but now I got stuck
with no idea how to proceed.

I pass the geometry handle to OGR_G_GetGeometryType and flatten the result.
MapInfo's TABText feature geometry is an OGRPoint, so I think I should get
a wkbPoint geometry type, but TABPoint, TABFontPoint, TABCustomPoint,
TABEllipse, and TABArc features can also have OGRPoint geometry.

Using only the API, how can I tell these types apart (if that's a mandatory
step) and read their unique fields, like the text of TABText?

Kind Regards
Matt Ors
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210216/d6d1a0ef/attachment.html>

From ron.palmer at pgcgroup.com.au  Tue Feb 16 22:55:17 2021
From: ron.palmer at pgcgroup.com.au (Ron Palmer)
Date: Wed, 17 Feb 2021 16:55:17 +1000
Subject: [gdal-dev] problem: gdal_grid, output ers raster file
Message-ID: <1e6573b4-e303-7b20-3cac-e1681c6ea6f6@pgcgroup.com.au>

I am having issues with outputting ers raster file from gdal_grid. I 
import a csv as shape, then grid it and output as ers. The Y coords are 
all negative as it is in fact a section I simply grid as a 2D raster. 
Although the shape file plots as I expect it, the ers is flipped 
upside-down, and hung at the lowest Y value. Please note, if I use GS7BG 
it works fine.

How do I get an ERS output that matches the shape file/data points?

I have created a simple example... however, I am new to GDAL, and this 
is my first post, so please let me know if there is anything else I 
should provide.

Thanks

Ron


These are the commands:

 ? 711? ogr2ogr -f "ESRI Shapefile" xc_zc.shp new.csv -oo 
X_POSSIBLE_NAMES=xc -oo Y_POSSIBLE_NAMES=zc
 ? 712? gdal_grid -zfield Value -a linear:radius=5 xc_zc.shp -of ERS 
xc_zc.ers

here is the content of the data

xc,zc,Value
1.25,-0.625,5
3.75,-0.625,5
6.25,-0.625,5
8.75,-0.625,5
11.25,-0.625,5
1.25,-1.938,4
3.75,-1.938,4
6.25,-1.938,4
8.75,-1.938,4
11.25,-1.938,4
1.25,-3.381,3
3.75,-3.381,3
6.25,-3.381,3
8.75,-3.381,3
11.25,-3.381,3
1.25,-4.969,2
3.75,-4.969,2
6.25,-4.969,2
8.75,-4.969,2
11.25,-4.969,2
1.25,-6.716,1
3.75,-6.716,1
6.25,-6.716,1
8.75,-6.716,1
11.25,-6.716,1

I have attached a jpg of my output (not sure whether the mailing list 
allows attachments...)




-- 
This email has been checked for viruses by AVG.
https://www.avg.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210217/beafdbd1/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: examplePlot.jpg
Type: image/jpeg
Size: 71798 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210217/beafdbd1/attachment-0001.jpg>

From idan at miara.com  Wed Feb 17 04:22:59 2021
From: idan at miara.com (Idan Miara)
Date: Wed, 17 Feb 2021 14:22:59 +0200
Subject: [gdal-dev] Python Wheels for gdal
In-Reply-To: <5814936.ysQ6HM8itc@even-i700>
References: <CAHtCBniKAStXMsA8gg=QoyYeGRdgT19_QGrCpDS2RwhNaGRX6Q@mail.gmail.com>
 <2004643.y9WdgZ42uR@even-i700>
 <CADPhZXx5+tPznCqLOnTkJv1Nx8tMT9H=n+4dEs3BCUTX+bwGkg@mail.gmail.com>
 <5814936.ysQ6HM8itc@even-i700>
Message-ID: <CAEDrt3-ppbYF8JFEZ0jSU3gb5ta+EeQrBFJLeqOq3uH-Hf6uCA@mail.gmail.com>

>From what I can see, the gdal302.dll inside
https://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal doesn't depend on any
non-windows DLL. All its dependencies are statically linked.

Maybe until a better solution is found, and to remedy all the windows users
who just want to `pip install gdal`,
We could push Christoph Gohlke's wheels to pypi ?
What happens if both source wheels and binary wheels are available with the
same package name?
Would then `pip install gdal` pick up the src package on Linux and the
binary package on Windows?
We could also consider merging all the pyd files from the wheels of
cp36-cp39 into a single wheel if it makes the distribution easier.

I've just asked Christoph to uncomment the gdalplugins loading section from
the __init__.py file so that plugins can be installed seamlessly, i.e. `pip
install gdal-ecw`:
https://pypi.org/project/gdal-ecw/
https://github.com/talos-gis/gdal-ecw
Maybe all the other drivers (non MIT licensed) could be installed this way.

Idan

On Sat, 1 Feb 2020 at 16:01, Even Rouault <even.rouault at spatialys.com>
wrote:

> > There are existing tools. Multibuild uses
> > https://github.com/pypa/auditwheel. It says in the project README that
> the
> > result is "like static linking"
>
> From what I understood, this is far from being static linking. It just
> plays
> with the RPATH to make sure that the .so from the wheel .libs directory
> are
> loaded instead of other from the system paths. But if within the same
> process,
> you have symbols with same name coming from different .so (like libhdf5
> coming
> from rasterio wheel and another one coming from h5py), then game over.
>
> Playing with my idea of symbol renaming, I've discovered this jewel:
> https://github.com/lief-project/LIEF
> It has a super simple Python API to manipulate ELF, PE and Mach-O objects.
> I
> gave it a try with Linux ELF and rasterio wheels
>
> Small python script and instructions at:
> https://gist.github.com/rouault/5e92eb046b7c451b8b0071e9d765c9de
>
> The result is a patched rasterio wheel where .so files in rasterio/.libs/
> have
> all their exported symbols prefixed with _rasterio_whl_  and the
> rasterio/*.so
> files are modified to import those _rasterio_whl_ symbols. So we have in
> theory full symbol isolation. The resulting rasterio seems to be
> functional
> (at least rasterio.open() works), although I didn't have an initial
> situation
> where I could make it crash when loading gdal python bindings or h5py.
> Would
> be cool if someone that has a crashing setup could confirm that this
> actually
> fixes it.
>
> But... there is a downside preventing this to be used in production. lief
> has
> a bug / inefficency: the symbol renaming creates .so larger than expected.
> In
> particular, with the netcdf lib that jumps from 1.9 MB to 52 MB !
> Reported as https://github.com/lief-project/LIEF/issues/379
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210217/1f13d4b4/attachment.html>

From matt.wilkie at gov.yk.ca  Wed Feb 17 12:44:40 2021
From: matt.wilkie at gov.yk.ca (mhw-at-yg)
Date: Wed, 17 Feb 2021 13:44:40 -0700 (MST)
Subject: [gdal-dev] Create cloud optimized geotiff without re-encoding?
Message-ID: <1613594680077-0.post@n6.nabble.com>

Hi Folks,

I have a lot of jpeg-in-geotiff imagery that I would like to convert to
Cloud Optimized Geotiff. Is there any way to do that without re-encoding the
pixel values?

I'm trying to avoid paying the price of:

    * lossy + lossy compression that results from feeding a jpeg source to a
jpeg output file, and
    * lossy + lossless that comes from feeding a jpeg source to lossless
output file, which means x4+ storage requirements

-Matt

(x-posted to GIS Stack Exchange,
https://gis.stackexchange.com/questions/387632)



-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rajeshreddy82 at gmail.com  Wed Feb 17 23:36:26 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Thu, 18 Feb 2021 00:36:26 -0700 (MST)
Subject: [gdal-dev] break a bounding box into smaller boxes
Message-ID: <1613633786072-0.post@n6.nabble.com>

Hi,

We have large area bbox coordinates. When we hit with this BBOX, MapServer
is not able to handle the bigger size bbox values. 

We are planning to split the bigger bbox into multiple bboxes and send them
to the map server for features data. Any library or sample code to break a
bounding box into smaller boxes (coordinates)?

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 18 03:34:20 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 18 Feb 2021 04:34:20 -0700 (MST)
Subject: [gdal-dev] Create cloud optimized geotiff without re-encoding?
In-Reply-To: <1613594680077-0.post@n6.nabble.com>
References: <1613594680077-0.post@n6.nabble.com>
Message-ID: <1613648060739-0.post@n6.nabble.com>

Hi,

I made a couple of simple tests by following
https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF, here are the
results:

Create a jpeg compressed GeoTIFF and couple of overviews

gdal_translate -of GTiff -co tiled=yes -co compress=jpeg p4433h.tif
p2-jpeg.tif
gdaladdo --config COMPRESS_OVERVIEW JPEG p2-jpeg.tif 2 4

Test how the main image and overviews behave

gdal_translate -co tiled=yes -co COPY_SRC_OVERVIEWS=YES p2-jpeg.tif
cog21.tif
gdal_translate -co tiled=yes -co compress=jpeg -co COPY_SRC_OVERVIEWS=YES
p2-jpeg.tif cog22.tif  

Check file sizes:

575?913?074 cog21.tif
131?203?903 cog22.tif

Both images have 2 overviews and obviously the full resolution data are not
copied. I believe that it means that the jpeg compressed tiles are
uncompressed and processed again that leads into quality loss just as you
feared.

What I do not understand is what gdalcompare reports.

gdalcompare p2-jpeg.tif cog21.tif
Files differ at the binary level.
Differences Found: 1

This is understandable, the main tiles are jpeg compresses vs. uncompressed
so they are not the same. However, pixels are the same because jpeg is
converted into uncompressed with no loss.  But then, this is the beginning
of the report about original and jpeg-compressed with overviews copied.

gdalcompare p2-jpeg.tif cog28.tif
Files differ at the binary level.
Band 1 checksum difference:
  Golden: 30664
  New:    57443
  Pixels Differing: 62249009
  Maximum Pixel Difference: 13.0
Band 1 overview 0 checksum difference:
  Golden: 19959
  New:    54816
  Pixels Differing: 28090066
  Maximum Pixel Difference: 39.0
Band 1 overview 1 checksum difference:
  Golden: 5318
  New:    34525
  Pixels Differing: 8059334
  Maximum Pixel Difference: 75.0
... more bands ...


So not only the full resolution images differ but also the overviews even
they should be just copied.  I got similar results also when I used "cog" as
outputformat, and with GDAL versions 3.14 and 3.3.0. The cog driver creates
two overviews just as documented (the AUTO overview option) but gdalcompare
reports pretty large differences in pixel values.

Maybe you could just try to use your existing jpeg-in-geotiff images in
cloud. They may behave rather well even the reading application must read a
little bit more bytes from that GeoTIFF structure.

-Jukka Rahkonen-




mhw-at-yg wrote
> Hi Folks,
> 
> I have a lot of jpeg-in-geotiff imagery that I would like to convert to
> Cloud Optimized Geotiff. Is there any way to do that without re-encoding
> the
> pixel values?
> 
> I'm trying to avoid paying the price of:
> 
>     * lossy + lossy compression that results from feeding a jpeg source to
> a
> jpeg output file, and
>     * lossy + lossless that comes from feeding a jpeg source to lossless
> output file, which means x4+ storage requirements
> 
> -Matt
> 
> (x-posted to GIS Stack Exchange,
> https://gis.stackexchange.com/questions/387632)
> 
> 
> 
> -----
> -Matt
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 18 03:43:59 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 18 Feb 2021 04:43:59 -0700 (MST)
Subject: [gdal-dev] break a bounding box into smaller boxes
In-Reply-To: <1613633786072-0.post@n6.nabble.com>
References: <1613633786072-0.post@n6.nabble.com>
Message-ID: <1613648639139-0.post@n6.nabble.com>

Hi,

I would guess that Mapserver does not care about your BBOX but by the same
you create GetMap requests with &WIDTH= and &HEIGHT= that exceeds the limit
that is configured on the server with MAP-MAXSIZE
https://mapserver.org/mapfile/map.html.

So you must split your requests smaller by the requested pixels. For example
GDAL can do that automatically with the WMS driver
https://gdal.org/drivers/raster/wms.html. Have a look at
BlockSizeX/BlockSizeY.

-Jukka Rahkonen-



MRRAJESH wrote
> Hi,
> 
> We have large area bbox coordinates. When we hit with this BBOX, MapServer
> is not able to handle the bigger size bbox values. 
> 
> We are planning to split the bigger bbox into multiple bboxes and send
> them
> to the map server for features data. Any library or sample code to break a
> bounding box into smaller boxes (coordinates)?
> 
> Regards,
> Rajesh
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rajeshreddy82 at gmail.com  Thu Feb 18 07:12:46 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Thu, 18 Feb 2021 08:12:46 -0700 (MST)
Subject: [gdal-dev] break a bounding box into smaller boxes
In-Reply-To: <1613648639139-0.post@n6.nabble.com>
References: <1613633786072-0.post@n6.nabble.com>
 <1613648639139-0.post@n6.nabble.com>
Message-ID: <1613661166148-0.post@n6.nabble.com>

We are expecting feature information from our own map server for a given
BBOX. At present we are limited to 500 features is the max limit. But as per
our requirement, we want to return a huge number of features from the
server. So we are planning to split the BBOX into multiple boxes and hit the
server and get the features. Any other approach better than this? In the
case of BBox, how to split the bboxes into multiple. Any libraries?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 18 08:32:12 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 18 Feb 2021 09:32:12 -0700 (MST)
Subject: [gdal-dev] break a bounding box into smaller boxes
In-Reply-To: <1613661166148-0.post@n6.nabble.com>
References: <1613633786072-0.post@n6.nabble.com>
 <1613648639139-0.post@n6.nabble.com> <1613661166148-0.post@n6.nabble.com>
Message-ID: <1613665932171-0.post@n6.nabble.com>

Hi,

Ok, so obviously you are talking about WFS service, not WMS.

Why don't you use paging with COUNT and STARTINDEX
https://www.mapserver.org/ogc/wfs_server.html?

-Jukka Rahkonen-




MRRAJESH wrote
> We are expecting feature information from our own map server for a given
> BBOX. At present we are limited to 500 features is the max limit. But as
> per
> our requirement, we want to return a huge number of features from the
> server. So we are planning to split the BBOX into multiple boxes and hit
> the
> server and get the features. Any other approach better than this? In the
> case of BBox, how to split the bboxes into multiple. Any libraries?
> 
> 
> 
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From matt.wilkie at gov.yk.ca  Thu Feb 18 14:01:23 2021
From: matt.wilkie at gov.yk.ca (mhw-at-yg)
Date: Thu, 18 Feb 2021 15:01:23 -0700 (MST)
Subject: [gdal-dev] Create cloud optimized geotiff without re-encoding?
In-Reply-To: <1613648060739-0.post@n6.nabble.com>
References: <1613594680077-0.post@n6.nabble.com>
 <1613648060739-0.post@n6.nabble.com>
Message-ID: <1613685683085-0.post@n6.nabble.com>

Thank you for that extended comparison Jukka. It looks like there's no
feasible way to get there from here, but that too is useful to know.

For the gdalcompare results, are we confident that it is analyzing pixels at
Row,Col coordinates (or spatial X,Y?) and not at byte offset or something?



-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From cgodkin at gmail.com  Fri Feb 19 05:41:54 2021
From: cgodkin at gmail.com (Carl Godkin)
Date: Fri, 19 Feb 2021 05:41:54 -0800
Subject: [gdal-dev] Requesting a transparent image from a WMS server...
Message-ID: <CAE=8kmnZKB3zEiKxdMnRPHwkGd_u_Utkp+YyweLVAR-2M8yS7w@mail.gmail.com>

Hi,

I'm generating WMS service description files as described here:
https://gdal.org/drivers/raster/wms.html#generation-of-wms-service-description-xml-file

This works well, but I wonder if there's a way to request the image from
the WMS server to be transparent.

If I use gdal_translate to create the WMS service description file like
this:

gdal_translate "WMS:
https://maps-public.geo.nyu.edu:443/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=sdr%3Anyu_2451_43745&SRS=EPSG:4326&BBOX=-119.265762329102,35.2621765136719,-118.825294494629,35.4424705505371"
service.xml -of WMS

then I get this:

<GDAL_WMS>
  <Service name="WMS">
    <Version>1.1.1</Version>
    <ServerUrl>https://maps-public.geo.nyu.edu:443/geoserver/wms?SERVICE=WMS
</ServerUrl>
    <Layers>sdr%3Anyu_2451_43745</Layers>
    <SRS>EPSG:4326</SRS>
    <ImageFormat>image/jpeg</ImageFormat>
    <Transparent>FALSE</Transparent>
    <BBoxOrder>xyXY</BBoxOrder>
  </Service>
  <DataWindow>
    <UpperLeftX>-119.265762329102</UpperLeftX>
    <UpperLeftY>35.4424705505371</UpperLeftY>
    <LowerRightX>-118.825294494629</LowerRightX>
    <LowerRightY>35.2621765136719</LowerRightY>
    <SizeX>1073741824</SizeX>
    <SizeY>439508252</SizeY>
  </DataWindow>
  <BandsCount>3</BandsCount>
  <BlockSizeX>1024</BlockSizeX>
  <BlockSizeY>1024</BlockSizeY>
  <OverviewCount>20</OverviewCount>
</GDAL_WMS>

I have discovered that if I slightly edit three lines the service
description like this:

    <ImageFormat>image/geotiff</ImageFormat>
    <Transparent>TRUE</Transparent>
 <BandsCount>4</BandsCount>

then my output image is transparent if I compare these two output files:

gdal_translate -outsize 512 512 -projwin -119.1 35.4 -119 35.3 service.xml
bakersfield.tif
gdal_translate -outsize 512 512 -projwin -119.1 35.4 -119 35.3
service_trans.xml bakersfield_trans.tif

Are there some options I can use in the first gdal_translate command above
to generate the WMS description file so that
it retrieves transparent images if the server supports transparency?

(I am actually creating the service description file in C++ code using
CreateCopy, but I believe it's easy to prototype with the CLI.)

Thanks very much,

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210219/cd969e36/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Feb 19 05:55:25 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Fri, 19 Feb 2021 06:55:25 -0700 (MST)
Subject: [gdal-dev] Requesting a transparent image from a WMS server...
In-Reply-To: <CAE=8kmnZKB3zEiKxdMnRPHwkGd_u_Utkp+YyweLVAR-2M8yS7w@mail.gmail.com>
References: <CAE=8kmnZKB3zEiKxdMnRPHwkGd_u_Utkp+YyweLVAR-2M8yS7w@mail.gmail.com>
Message-ID: <1613742925949-0.post@n6.nabble.com>

Hi,

Try 

gdal_translate
"WMS:https://maps-public.geo.nyu.edu:443/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=sdr%3Anyu_2451_43745&SRS=EPSG:4326&BBOX=-119.265762329102,35.2621765136719,-118.825294494629,35.4424705505371&format=image/png&transparent=TRUE"
service.xml -of WMS

Notice the the format must be something that supports transparency so
image/jpeg does not work.

-Jukka Rahkonen-



Carl Godkin-2 wrote
> Hi,
> 
> I'm generating WMS service description files as described here:
> https://gdal.org/drivers/raster/wms.html#generation-of-wms-service-description-xml-file
> 
> This works well, but I wonder if there's a way to request the image from
> the WMS server to be transparent.
> 
> If I use gdal_translate to create the WMS service description file like
> this:
> 
> gdal_translate "WMS:
> https://maps-public.geo.nyu.edu:443/geoserver/wms?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetMap&LAYERS=sdr%3Anyu_2451_43745&SRS=EPSG:4326&BBOX=-119.265762329102,35.2621765136719,-118.825294494629,35.4424705505371"
> service.xml -of WMS
> 
> then I get this:
> <GDAL_WMS>
>   
> <Service name="WMS">
>     
> <Version>
> 1.1.1
> </Version>
>     
> <ServerUrl>
> https://maps-public.geo.nyu.edu:443/geoserver/wms?SERVICE=WMS
> </ServerUrl>
>     
> <Layers>
> sdr%3Anyu_2451_43745
> </Layers>
>     
> <SRS>
> EPSG:4326
> </SRS>
>     
> <ImageFormat>
> image/jpeg
> </ImageFormat>
>     
> <Transparent>
> FALSE
> </Transparent>
>     
> <BBoxOrder>
> xyXY
> </BBoxOrder>
>   
> </Service>
>   
> <DataWindow>
>     
> <UpperLeftX>
> -119.265762329102
> </UpperLeftX>
>     
> <UpperLeftY>
> 35.4424705505371
> </UpperLeftY>
>     
> <LowerRightX>
> -118.825294494629
> </LowerRightX>
>     
> <LowerRightY>
> 35.2621765136719
> </LowerRightY>
>     
> <SizeX>
> 1073741824
> </SizeX>
>     
> <SizeY>
> 439508252
> </SizeY>
>   
> </DataWindow>
>   
> <BandsCount>
> 3
> </BandsCount>
>   
> <BlockSizeX>
> 1024
> </BlockSizeX>
>   
> <BlockSizeY>
> 1024
> </BlockSizeY>
>   
> <OverviewCount>
> 20
> </OverviewCount>
> </GDAL_WMS>
> I have discovered that if I slightly edit three lines the service
> description like this:
> 
>     
> <ImageFormat>
> image/geotiff
> </ImageFormat>
>     
> <Transparent>
> TRUE
> </Transparent>
>  
> <BandsCount>
> 4
> </BandsCount>
> then my output image is transparent if I compare these two output files:
> 
> gdal_translate -outsize 512 512 -projwin -119.1 35.4 -119 35.3 service.xml
> bakersfield.tif
> gdal_translate -outsize 512 512 -projwin -119.1 35.4 -119 35.3
> service_trans.xml bakersfield_trans.tif
> 
> Are there some options I can use in the first gdal_translate command above
> to generate the WMS description file so that
> it retrieves transparent images if the server supports transparency?
> 
> (I am actually creating the service description file in C++ code using
> CreateCopy, but I believe it's easy to prototype with the CLI.)
> 
> Thanks very much,
> 
> carl
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From lars.fricke at skendata.de  Fri Feb 19 05:57:26 2021
From: lars.fricke at skendata.de (Lars Fricke)
Date: Fri, 19 Feb 2021 14:57:26 +0100
Subject: [gdal-dev] Requesting a transparent image from a WMS server...
In-Reply-To: <CAE=8kmnZKB3zEiKxdMnRPHwkGd_u_Utkp+YyweLVAR-2M8yS7w@mail.gmail.com>
References: <CAE=8kmnZKB3zEiKxdMnRPHwkGd_u_Utkp+YyweLVAR-2M8yS7w@mail.gmail.com>
Message-ID: <0c5b5009-8af6-edee-1263-e89863867e33@skendata.de>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210219/61edac64/attachment.html>

From cgodkin at gmail.com  Fri Feb 19 06:09:20 2021
From: cgodkin at gmail.com (Carl Godkin)
Date: Fri, 19 Feb 2021 06:09:20 -0800
Subject: [gdal-dev] Requesting a transparent image from a WMS server...
In-Reply-To: <0c5b5009-8af6-edee-1263-e89863867e33@skendata.de>
References: <CAE=8kmnZKB3zEiKxdMnRPHwkGd_u_Utkp+YyweLVAR-2M8yS7w@mail.gmail.com>
 <0c5b5009-8af6-edee-1263-e89863867e33@skendata.de>
Message-ID: <CAE=8kmmPiyvPdAbeSXK-v_ofDCTFXFK82wsUXuM8Peej23HLMQ@mail.gmail.com>

Hi Jukka,

That did the trick. Thank you very much!  I didn't know I could attach more
parameters like that.

Hi Lars,

Thanks for the advice.

GDAL comes through for me again!

carl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210219/f8caefe2/attachment.html>

From matt.wilkie at gov.yk.ca  Fri Feb 19 10:29:04 2021
From: matt.wilkie at gov.yk.ca (mhw-at-yg)
Date: Fri, 19 Feb 2021 11:29:04 -0700 (MST)
Subject: [gdal-dev] Create cloud optimized geotiff without re-encoding?
In-Reply-To: <1613685683085-0.post@n6.nabble.com>
References: <1613594680077-0.post@n6.nabble.com>
 <1613648060739-0.post@n6.nabble.com> <1613685683085-0.post@n6.nabble.com>
Message-ID: <1613759344303-0.post@n6.nabble.com>

On the Stack version of this question someone suggested "There should be an
option -co COPY_SRC_TIFF_TILES=YES" to copy the source image. (A corollary
to -co COPY_SRC_OVERVIEWS=YES.)

I now have another use case for this suggestion: using nearblack to add a
mask or alpha band to a jpeg-in-tiff image without re-encoding the
data-bearing pixels.




-----
-Matt
--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From idan at miara.com  Sat Feb 20 10:42:51 2021
From: idan at miara.com (Idan Miara)
Date: Sat, 20 Feb 2021 20:42:51 +0200
Subject: [gdal-dev] warp ARGB -> RGB gtiff-jpeg?
Message-ID: <CAEDrt38OR3ZcJftHQjx_VC7aG-Ay4AR+B126BVbbicrRTVaEeQ@mail.gmail.com>

Hi All,

Is it possible to use gdal_warp for warping the RGB bands of an ARGB raster
as gtiff with jpeg compression (i.e. to drop the Alpha channel and
transform CRS). ?

gdal_transalte has translate_options["bandList"] = [1, 2, 3] for that, but
I can't find the equivalent for warp.

I could do it in two steps - save as a lossless gtiff and then use
gdal_transalte to make a jpeg-gtiff. Or use gdal_trasnlate to make a 3 band
lossless gtiff and then wrap it.

Can I do it in one step without an intermediate file?

Regards,
Idan.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210220/4912faf6/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sat Feb 20 13:51:55 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sat, 20 Feb 2021 14:51:55 -0700 (MST)
Subject: [gdal-dev] warp ARGB -> RGB gtiff-jpeg?
In-Reply-To: <CAEDrt38OR3ZcJftHQjx_VC7aG-Ay4AR+B126BVbbicrRTVaEeQ@mail.gmail.com>
References: <CAEDrt38OR3ZcJftHQjx_VC7aG-Ay4AR+B126BVbbicrRTVaEeQ@mail.gmail.com>
Message-ID: <1613857915282-0.post@n6.nabble.com>

Hi,

It is very cheap to use gdal_translate and VRT as intermediate format. As
far as I know it is not possible to drop alpha with gdalwarp even it is
possible to add alpha -dstalpha.

-Jukka Rahkonen-



Idan Miara wrote
> Hi All,
> 
> Is it possible to use gdal_warp for warping the RGB bands of an ARGB
> raster
> as gtiff with jpeg compression (i.e. to drop the Alpha channel and
> transform CRS). ?
> 
> gdal_transalte has translate_options["bandList"] = [1, 2, 3] for that, but
> I can't find the equivalent for warp.
> 
> I could do it in two steps - save as a lossless gtiff and then use
> gdal_transalte to make a jpeg-gtiff. Or use gdal_trasnlate to make a 3
> band
> lossless gtiff and then wrap it.
> 
> Can I do it in one step without an intermediate file?
> 
> Regards,
> Idan.
> 
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From rajeshreddy82 at gmail.com  Mon Feb 22 03:54:13 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Mon, 22 Feb 2021 04:54:13 -0700 (MST)
Subject: [gdal-dev] Finding the Map-Tiles(x,
 y) in a given Bounding box and zoom level
Message-ID: <1613994853795-0.post@n6.nabble.com>

Hi,

I have map tiles @ different zoom levels 8 to 22 levels. I have a Bounding
box also. How can I calculate the minimum number tile (min tile column, min
tile row) and maximum number tile (max tile column, max tile row) for a
given bounding box and zoom level?

Any sample code?

For Example: 
Bounding box
(-9943845.8836751487,5321240.1611008309,-9943540.1355620064,5321545.90921397)
Zoom level: 18

*Expected output at 18th level for a given BBOX:*

Min:Max X= 96262 : 96282 - #of Tiles\Row: XX
Min:Max Y= 66027 : 66047 - #of Tiles\Col: XX

Regards,
Rajesh



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mauceri at actgate.com  Mon Feb 22 04:52:02 2021
From: mauceri at actgate.com (Calogero Mauceri)
Date: Mon, 22 Feb 2021 13:52:02 +0100
Subject: [gdal-dev] how to get raster drivers supporting create and
 subregion write
Message-ID: <CAFYMBm-DVDWUytCmUhkFc4gWDxcpOA0UZwx34iJVcfVgiCFBcQ@mail.gmail.com>

Hi,

I'd like to know which is the best way to know programmatically if a GDAL
driver supports the GDAL Create() and then the writing through RasterIO()
on a subregion

The way I'm trying to figure it now is

...
h = GDALGetDriver(idx);
char** papszMD = GDALGetMetadata(h, nullptr);
if ( CPLFetchBool(papszMD, GDAL_DCAP_RASTER, false) &&
     CPLFetchBool(papszMD, GDAL_DCAP_CREATE, false)) {
        // OK. Create and RasterIO write supported
}
...

So essentially I'm testing the GDAL_DCAP_CREATE attribute. I've not found
any attribute for testing the driver write capabilities.

For example the above code returns true for VRT driver, but it does not
support writing through VRTSourcedRasterBand.

Thanks,
Calogero

-- 
Calogero Mauceri
Software Engineer

Applied Coherent Technology Corporation (ACT)
www.actgate.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210222/be3d109b/attachment.html>

From traviskirstine at gmail.com  Mon Feb 22 06:55:32 2021
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Mon, 22 Feb 2021 09:55:32 -0500
Subject: [gdal-dev] Finding the Map-Tiles(x,
 y) in a given Bounding box and zoom level
In-Reply-To: <1613994853795-0.post@n6.nabble.com>
References: <1613994853795-0.post@n6.nabble.com>
Message-ID: <CALtm4h0JDHnfbPGhC-FAnWBibRpne9octbhdrvH0p5bfH=S9YQ@mail.gmail.com>

See mercantile
https://mercantile.readthedocs.io/en/latest/

On Mon, 22 Feb 2021 at 06:54, MRRAJESH <rajeshreddy82 at gmail.com> wrote:

> Hi,
>
> I have map tiles @ different zoom levels 8 to 22 levels. I have a Bounding
> box also. How can I calculate the minimum number tile (min tile column, min
> tile row) and maximum number tile (max tile column, max tile row) for a
> given bounding box and zoom level?
>
> Any sample code?
>
> For Example:
> Bounding box
>
> (-9943845.8836751487,5321240.1611008309,-9943540.1355620064,5321545.90921397)
> Zoom level: 18
>
> *Expected output at 18th level for a given BBOX:*
>
> Min:Max X= 96262 : 96282 - #of Tiles\Row: XX
> Min:Max Y= 66027 : 66047 - #of Tiles\Col: XX
>
> Regards,
> Rajesh
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210222/76e1178a/attachment.html>

From even.rouault at spatialys.com  Tue Feb 23 01:47:31 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Feb 2021 10:47:31 +0100
Subject: [gdal-dev] Call for discussion on RFC 79: Listing of Service
 Providers on GDAL website
Message-ID: <13933971.prJO70O5Fa@even-i700>

Hi,

Please find https://github.com/OSGeo/gdal/pull/3473 which proposes to list 
service providers offering GDAL related services on the GDAL website. As 
mentioned in the RFC, this is a straightfoward port of the equivalent adopted 
RFC of the Mapserver project.

Even

-- 
http://www.spatialys.com

From robert.coup at koordinates.com  Tue Feb 23 06:02:43 2021
From: robert.coup at koordinates.com (Robert Coup)
Date: Tue, 23 Feb 2021 14:02:43 +0000
Subject: [gdal-dev] Python Wheels for gdal
In-Reply-To: <CAEDrt3-ppbYF8JFEZ0jSU3gb5ta+EeQrBFJLeqOq3uH-Hf6uCA@mail.gmail.com>
References: <CAHtCBniKAStXMsA8gg=QoyYeGRdgT19_QGrCpDS2RwhNaGRX6Q@mail.gmail.com>
 <2004643.y9WdgZ42uR@even-i700>
 <CADPhZXx5+tPznCqLOnTkJv1Nx8tMT9H=n+4dEs3BCUTX+bwGkg@mail.gmail.com>
 <5814936.ysQ6HM8itc@even-i700>
 <CAEDrt3-ppbYF8JFEZ0jSU3gb5ta+EeQrBFJLeqOq3uH-Hf6uCA@mail.gmail.com>
Message-ID: <CAFLLRpLyBCKvaZG5a5CiDmEUKjD+DO70KjXtqEesFEthH4_H2g@mail.gmail.com>

Hi Idan,

On Wed, 17 Feb 2021 at 12:24, Idan Miara <idan at miara.com> wrote:

> From what I can see, the gdal302.dll inside
> https://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal doesn't depend on any
> non-windows DLL. All its dependencies are statically linked.
>
> Maybe until a better solution is found, and to remedy all the windows
> users who just want to `pip install gdal`,
> We could push Christoph Gohlke's wheels to pypi ?
>

Do you know if the build scripts for Christoph Gohlke's GDAL/related builds
are available? I don't think we could push any binaries on behalf of GDAL
unless people can reproduce or adapt them.

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210223/3f491bcb/attachment.html>

From idan at miara.com  Tue Feb 23 06:13:19 2021
From: idan at miara.com (Idan Miara)
Date: Tue, 23 Feb 2021 16:13:19 +0200
Subject: [gdal-dev] Python Wheels for gdal
In-Reply-To: <CAFLLRpLyBCKvaZG5a5CiDmEUKjD+DO70KjXtqEesFEthH4_H2g@mail.gmail.com>
References: <CAHtCBniKAStXMsA8gg=QoyYeGRdgT19_QGrCpDS2RwhNaGRX6Q@mail.gmail.com>
 <2004643.y9WdgZ42uR@even-i700>
 <CADPhZXx5+tPznCqLOnTkJv1Nx8tMT9H=n+4dEs3BCUTX+bwGkg@mail.gmail.com>
 <5814936.ysQ6HM8itc@even-i700>
 <CAEDrt3-ppbYF8JFEZ0jSU3gb5ta+EeQrBFJLeqOq3uH-Hf6uCA@mail.gmail.com>
 <CAFLLRpLyBCKvaZG5a5CiDmEUKjD+DO70KjXtqEesFEthH4_H2g@mail.gmail.com>
Message-ID: <CAEDrt3-OTzoNVe1f7G4DDPk+O-1Zcgp1=yfst--LM2ACGkyTXA@mail.gmail.com>

Hi Rob,

Good point.
I don't know - I've added Christoph to this thread.
Christoph - can you share with us any build scripts or source file changes
you make in order to build these wheels?

I was able to combine the cp37+cp38+cp39 from Christoph's wheels for each
platform by extracting the wheel files and repacking them in a single wheel
per platform using a custom setup.py+setup.cfg
The pyd files are very small so the overhead in wheel size is negligible.
https://github.com/talos-gis/gdal-win
Running build_all.bat creates:
gdal-3.2.1-py37.py38.py39-none-win_amd64.whl
gdal-3.2.1-py37.py38.py39-none-win32.whl
(Note that this batch does not build the sources, just repacks the wheels)

Idan.


On Tue, 23 Feb 2021 at 16:02, Robert Coup <robert.coup at koordinates.com>
wrote:

> Hi Idan,
>
> On Wed, 17 Feb 2021 at 12:24, Idan Miara <idan at miara.com> wrote:
>
>> From what I can see, the gdal302.dll inside
>> https://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal doesn't depend on any
>> non-windows DLL. All its dependencies are statically linked.
>>
>> Maybe until a better solution is found, and to remedy all the windows
>> users who just want to `pip install gdal`,
>> We could push Christoph Gohlke's wheels to pypi ?
>>
>
> Do you know if the build scripts for Christoph Gohlke's GDAL/related
> builds are available? I don't think we could push any binaries on behalf of
> GDAL unless people can reproduce or adapt them.
>
> Rob :)
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210223/beda942b/attachment.html>

From khoslaygr26 at gmail.com  Tue Feb 23 07:51:04 2021
From: khoslaygr26 at gmail.com (Kunal Khosla)
Date: Tue, 23 Feb 2021 21:21:04 +0530
Subject: [gdal-dev] Runtime issue while executing code calling gdal function
Message-ID: <CAGLwoU0tLjoKbGPH5dx8B14BrMH87tsApNO6b1Jb13KoCWuyOw@mail.gmail.com>

I wish to build a programme that uses GCPs to georefernece a image. I am
using GDALCreateGCPTransformer to create a transformer which I am calling
later to warp the image. However, during runtime my programme stops after
this line.
void* transform = GDALCreateGCPTransformer (3,gcps,2,FALSE);

It says key not found in memory location. I am not sure what it means.
I hope i am using the correct libraries to link my programme(gdal_i.lib). I
used vcpkg to intall gdal on windows.

What am i doing wrong?? I also have included the bin directory with correct
.dll files in my PATH variable. I think i have not installed GDAL
correctly. Can some one guide me here??

This happened to me before for GDALWarp as well.

My programme builds correctly so i have no reason to doubt that all header
files and libraries have been included. I am using the visual studio IDE.

Is this a bug in gdal itself? Kindly help..
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210223/a89639d0/attachment.html>

From idan at miara.com  Tue Feb 23 09:41:33 2021
From: idan at miara.com (Idan Miara)
Date: Tue, 23 Feb 2021 19:41:33 +0200
Subject: [gdal-dev] warp ARGB -> RGB gtiff-jpeg?
In-Reply-To: <1613857915282-0.post@n6.nabble.com>
References: <CAEDrt38OR3ZcJftHQjx_VC7aG-Ay4AR+B126BVbbicrRTVaEeQ@mail.gmail.com>
 <1613857915282-0.post@n6.nabble.com>
Message-ID: <CAEDrt39FQ3cGaQuagF-MrYDZAAZ23di-uNt4b1ThTppM3u0O9Q@mail.gmail.com>

Hi Jukka,

Thanks for your reply!
I didn't think about using VRT.
Using VRT (-b 1 -b 2 -b 3) as an input to warp solved the problem.

Idan

On Sat, 20 Feb 2021 at 23:52, jratike80 <jukka.rahkonen at maanmittauslaitos.fi>
wrote:

> Hi,
>
> It is very cheap to use gdal_translate and VRT as intermediate format. As
> far as I know it is not possible to drop alpha with gdalwarp even it is
> possible to add alpha -dstalpha.
>
> -Jukka Rahkonen-
>
>
>
> Idan Miara wrote
> > Hi All,
> >
> > Is it possible to use gdal_warp for warping the RGB bands of an ARGB
> > raster
> > as gtiff with jpeg compression (i.e. to drop the Alpha channel and
> > transform CRS). ?
> >
> > gdal_transalte has translate_options["bandList"] = [1, 2, 3] for that,
> but
> > I can't find the equivalent for warp.
> >
> > I could do it in two steps - save as a lossless gtiff and then use
> > gdal_transalte to make a jpeg-gtiff. Or use gdal_trasnlate to make a 3
> > band
> > lossless gtiff and then wrap it.
> >
> > Can I do it in one step without an intermediate file?
> >
> > Regards,
> > Idan.
> >
> > _______________________________________________
> > gdal-dev mailing list
>
> > gdal-dev at .osgeo
>
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210223/865776df/attachment.html>

From sean at mapbox.com  Tue Feb 23 10:28:06 2021
From: sean at mapbox.com (Sean Gillies)
Date: Tue, 23 Feb 2021 11:28:06 -0700
Subject: [gdal-dev] Call for discussion on RFC 79: Listing of Service
 Providers on GDAL website
In-Reply-To: <13933971.prJO70O5Fa@even-i700>
References: <13933971.prJO70O5Fa@even-i700>
Message-ID: <CADPhZXyZCUL3MCPFatYZ-FxAQaRGDXYsGnSVMOMth4hGh=cXOA@mail.gmail.com>

Hi Even,

On Tue, Feb 23, 2021 at 2:56 AM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> Please find https://github.com/OSGeo/gdal/pull/3473 which proposes to
> list
> service providers offering GDAL related services on the GDAL website. As
> mentioned in the RFC, this is a straightfoward port of the equivalent
> adopted
> RFC of the Mapserver project.
>
> Even
>

I'd like to hear more about the Mapserver project service provider list.
Does it work? Is it kept up to date or does it get stale? Does the
community find that it effectively steers $$ to consultants that fix bugs
and maintain the project? With the difference in image/logo sizes, is the
intent to make this look a bit like a conference sponsor page?

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210223/a7b3caa8/attachment-0001.html>

From even.rouault at spatialys.com  Tue Feb 23 10:34:00 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 23 Feb 2021 19:34:00 +0100
Subject: [gdal-dev] Call for discussion on RFC 79: Listing of Service
 Providers on GDAL website
In-Reply-To: <CADPhZXy2D9Yb8MMxwpwQTE9X-Qbj9iT77Av=jq9JfNYBGJonyg@mail.gmail.com>
References: <13933971.prJO70O5Fa@even-i700>
 <CADPhZXy2D9Yb8MMxwpwQTE9X-Qbj9iT77Av=jq9JfNYBGJonyg@mail.gmail.com>
Message-ID: <9087549.4MpA4NRY9h@even-i700>

Hi Sean,

(re-adding the list in CC)

> I'd like to hear more about the Mapserver project service provider list.
> Does it work?

Good question. I'm not sure which proportion of my Mapserver activity was due 
to that. Probably not that much to be honest.

> Is it kept up to date or does it get stale?

We haven't used yet the reboot process suggested in the RFC. The list might be 
a bit stale for a few providers.

> Does the community find that it effectively steers $$ to consultants that 
fix bugs and maintain the project?

>From my perspective, one of the motivation is also a signal for new adopters 
that the project is actively supported, and they might find support at a later 
point.

OSGeo has also a https://www.osgeo.org/service-providers/ page, but it is a 
bit far from the projects.

> With the difference in image/logo sizes, is the
> intent to make this look a bit like a conference sponsor page?

I guess the intent is that the bigger the logo, the closer to upstream the 
provider is.

Even

-- 
http://www.spatialys.com

From thomas.bonfort at gmail.com  Tue Feb 23 10:38:03 2021
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Tue, 23 Feb 2021 19:38:03 +0100
Subject: [gdal-dev] Call for discussion on RFC 79: Listing of Service
 Providers on GDAL website
In-Reply-To: <CADPhZXyZCUL3MCPFatYZ-FxAQaRGDXYsGnSVMOMth4hGh=cXOA@mail.gmail.com>
References: <13933971.prJO70O5Fa@even-i700>
 <CADPhZXyZCUL3MCPFatYZ-FxAQaRGDXYsGnSVMOMth4hGh=cXOA@mail.gmail.com>
Message-ID: <CAOM3y2h7b9F6QKCMGOChz_ohrF9-=qE5=YcY9XyfLA=4nsO=Ew@mail.gmail.com>

Hi Sean,
To give my personal experience:

 Does it work?
>
> It drove exactly 0 leads to me

Is it kept up to date or does it get stale?
>
> I don't think it has ever been updated since it was put into place. I
should remove myself from the list as I don't provide such services anymore.

Does the community find that it effectively steers $$ to consultants that
>> fix bugs and maintain the project?
>
> See 1. Maybe the larger companies had more success than myself as an
individual consultant.

Thomas

Withh the difference in image/logo sizes, is the intent to make this look a
>> bit like a conference sponsor page?
>>
>
> --
> Sean Gillies
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210223/045e5940/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Tue Feb 23 23:20:48 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 24 Feb 2021 00:20:48 -0700 (MST)
Subject: [gdal-dev] Call for discussion on RFC 79: Listing of Service
 Providers on GDAL website
In-Reply-To: <CADPhZXyZCUL3MCPFatYZ-FxAQaRGDXYsGnSVMOMth4hGh=cXOA@mail.gmail.com>
References: <13933971.prJO70O5Fa@even-i700>
 <CADPhZXyZCUL3MCPFatYZ-FxAQaRGDXYsGnSVMOMth4hGh=cXOA@mail.gmail.com>
Message-ID: <1614151248873-0.post@n6.nabble.com>

GDAL - Dev mailing list wrote
> Hi Even,
> 
> On Tue, Feb 23, 2021 at 2:56 AM Even Rouault &lt;

> even.rouault@

> &gt;
> wrote:
> 
>> Hi,
>>
>> Please find https://github.com/OSGeo/gdal/pull/3473 which proposes to
>> list
>> service providers offering GDAL related services on the GDAL website. As
>> mentioned in the RFC, this is a straightfoward port of the equivalent
>> adopted
>> RFC of the Mapserver project.
>>
>> Even
>>
> 
> I'd like to hear more about the Mapserver project service provider list.
> Does it work? Is it kept up to date or does it get stale? Does the
> community find that it effectively steers $$ to consultants that fix bugs
> and maintain the project? With the difference in image/logo sizes, is the
> intent to make this look a bit like a conference sponsor page?
> 
> -- 
> Sean Gillies


Hi,

Maybe the number of new potential customers searching for consultants to do
Mapserver development is not so huge at the moment and the old ones know
their contacts already. However, I feel that the service provider list does
work for the Geoserver project. Probably mostly not so that users start by
browsing the list and pick a contractor. It is rather so that core Geoserver
developers know that often there is a minimal chance that some bug will be
fixed or some feature request will be implemented just because there is an
open ticket about that. Then they can inform the user about the reasonable
alternatives like in this example that I picked from a mailing list:
 
"That does not mean we cannot work around a deficiency in a rogue server,
but be prepared to issue your PR or fund development though commercial
services: http://geoserver.org/support/"

For my mind that is also fair for the users and gives more hope than the
comment on the OSSIM site, that is otherwise my absolute favorite:

"We encourage users to use the software as-is or become an active
contributor."

-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From andrew at aitchison.me.uk  Wed Feb 24 06:44:23 2021
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Wed, 24 Feb 2021 14:44:23 +0000 (GMT)
Subject: [gdal-dev] Nested recursion in RasterIO and IRasterIO
Message-ID: <9d276624-6593-8f29-e9a5-e41bfdc61efd@aitchison.me.uk>


This is because of a bug, or bugs in my driver code, so feel free to say 
"not interested", but if you think my experience could help others ...

I have written a driver (actually two) which supports read but not write
of overviews via GetOverviewCount() and GetOverview(int) (but not 
HasArbitraryOverviews()). I believe I have failed to distinguish between
overview rasterbands and the full-scale bands.

As a result of this, I can get into a position where GetOverviewCount and
GetOverview are called on an overview band. When I try to run 
gdal_translate to shrink one of my images and convert to (say) tiff,
my return values from these routines ended up with RasterIO and IRasterIO
calling each other until the stack runs out of memory - the gdb stack 
strace shows me nearly 30000 functions deep.

When I first looked at this some weeks ago I thought that I saw
a mutex or similar being optimized out by clang++, but I am not sure.

Is anyone interested in a (partial?) stacktrace or other debugging
to track down and stop RasterIO and IRasterIO from calling each other to 
death ?

Thanks,

-- 
Andrew C. Aitchison					Kendal, UK
 			andrew at aitchison.me.uk

From jgallagher at opendap.org  Wed Feb 24 10:44:21 2021
From: jgallagher at opendap.org (James Gallagher)
Date: Wed, 24 Feb 2021 11:44:21 -0700
Subject: [gdal-dev] Build issue with GDAL 3.14 and 3.2.1,
 missing the GRIB driver
Message-ID: <6BB72A64-0E1B-4EC7-8855-50C3AD82792F@opendap.org>

Hi,

I?m trying to build GDAL 3.2.1 so that it includes only a few drivers. Previously I?ve been using GDAL 2.x and would like to upgrade to 3.x. When I configure and build, the GRIB driver is missing. Here?s how I?m configuring the build:

	PKG_CONFIG=$(openjpeg_prefix)/lib/pkgconfig \
	CPPFLAGS=-I$(proj_prefix)/include \
       OPENJPEG_CFLAGS="-I$(openjpeg_prefix)/include/openjpeg-2.4" \
	OPENJPEG_LIBS="-L$(openjpeg_prefix)/lib -lopenjp2" \
       ./configure $(CONFIGURE_FLAGS) --prefix=$(gdal4_prefix) --with-pic \
       --with-openjpeg --with-proj=$(proj_prefix) \
       --with-proj-extra-lib-for-test="-L$(prefix)/deps/lib -lsqlite3 -lstdc++" \
       --enable-driver-grib --disable-all-optional-drivers \
       --without-python --without-netcdf --without-hdf5 --without-hdf4 \
       --without-png --without-sqlite3 --without-pg --without-cfitsio

A little gnarly I know, bit I suspect the issue is '--enable-driver-grib --disable-all-optional-drivers.? I tried both ordering of those two options, with the same results.

gdal-config ?formats returns:
derived gtiff hfa mem vrt webp openjpeg jpeg2000 gif jpeg pcraster pcidsk

I?m building on OSX 11.2.1 using:

g++ --version
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
Apple clang version 12.0.0 (clang-1200.0.32.29)
Target: x86_64-apple-darwin20.3.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin

Thanks
?
James Gallagher
jgallagher at opendap.org



-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 195 bytes
Desc: Message signed with OpenPGP
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210224/d0ef5502/attachment.sig>

From rajeshreddy82 at gmail.com  Wed Feb 24 12:00:43 2021
From: rajeshreddy82 at gmail.com (MRRAJESH)
Date: Wed, 24 Feb 2021 13:00:43 -0700 (MST)
Subject: [gdal-dev] Finding the Map-Tiles(x,
 y) in a given Bounding box and zoom level
In-Reply-To: <CALtm4h0JDHnfbPGhC-FAnWBibRpne9octbhdrvH0p5bfH=S9YQ@mail.gmail.com>
References: <1613994853795-0.post@n6.nabble.com>
 <CALtm4h0JDHnfbPGhC-FAnWBibRpne9octbhdrvH0p5bfH=S9YQ@mail.gmail.com>
Message-ID: <1614196843609-0.post@n6.nabble.com>

Thank you. 
1. Any C# nuget packages available for mercantile?
2. Any GDAL methods to achieve the functionality (i.e., get the tile numbers
for a given BBOX and level)?



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From mateusz at loskot.net  Wed Feb 24 12:34:24 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 24 Feb 2021 21:34:24 +0100
Subject: [gdal-dev] Finding the Map-Tiles(x,
 y) in a given Bounding box and zoom level
In-Reply-To: <1614196843609-0.post@n6.nabble.com>
References: <1613994853795-0.post@n6.nabble.com>
 <CALtm4h0JDHnfbPGhC-FAnWBibRpne9octbhdrvH0p5bfH=S9YQ@mail.gmail.com>
 <1614196843609-0.post@n6.nabble.com>
Message-ID: <CABUeae9r3vQHeFLs1mkvgwdERcKDCQKS1g08ziuJaEb5R+OjuQ@mail.gmail.com>

On Wed, 24 Feb 2021 at 21:01, MRRAJESH <rajeshreddy82 at gmail.com> wrote:
>
> 1. Any C# nuget packages available for mercantile?

Search.

> 2. Any GDAL methods to achieve the functionality (i.e., get the tile numbers
> for a given BBOX and level)?

No.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From gjg5316 at arl.psu.edu  Wed Feb 24 14:02:54 2021
From: gjg5316 at arl.psu.edu (Geoff Goehle)
Date: Wed, 24 Feb 2021 22:02:54 +0000
Subject: [gdal-dev] BAG File has Zero Pixel Size
Message-ID: <e3034d74220f412ba0bb4265299eb0b8@arl.psu.edu>

Hello,

I'm relatively new to GDAL and have a question about some confusing behavior when reading BAG files using C++.  I'll put more details below but the TLDR is that while working with an older version of GDAL included with Ubuntu 16.04 I was able to read a file correctly but when working with the same file on Centos 8 the x and y pixel lengths are reported as zero.  I don't know if it's a problem with the data set being made for an old version of GDAL, or if something else has changed that I haven't accounted for.

The file in question is H12280_MB_1m_MLLW_Combined.bag.gz<https://data.ngdc.noaa.gov/platforms/ocean/nos/coast/H12001-H14000/H12280/BAG/H12280_MB_1m_MLLW_Combined.bag.gz> at  Report for H12280 (noaa.gov)<https://www.ngdc.noaa.gov/nos/H12001-H14000/H12280.html> and I'm following the "getting-dataset-information" part of the Raster API tutorial at gdal.org (Raster API tutorial - GDAL documentation<https://gdal.org/tutorials/raster_api_tut.html#getting-dataset-information>) for C++.

When printing out the dataset information on Ubuntu 16.04 with libgdal-dev-1.11.3+dfsg-3build2 I get:

Driver: BAG/Bathymetry Attributed Grid
Size is 390x527x2
Projection is `PROJCS["UTM Zone 10, Northern Hemisphere",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-123],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]'
Origin = (525490.000000,5287130.000000)
Pixel Size = (20.000000,-20.000000)

When printing out the dataset information from the same file on Centos 8 with gdal-devel-3.0.4-5.el8.x86_64 I get:

Driver: BAG/Bathymetry Attributed Grid
Size is 390x527x2
Projection is `PROJCS["unnamed",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-123],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS["Easting",EAST],AXIS["Northing",NORTH]]'
Origin = (525500.000000,5276600.000000)
Pixel Size = (0.000000,-0.000000)

In particular the Pixel Size is 0 by 0 when it should be 20 by -20.  There are some other differences, like the fact that the UTM zone doesn't seem to show up in the output of the newer version, but I don't quite know what to make of it.  Any advice would be appreciated.

Thanks.

Geoff.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210224/b046c33a/attachment.html>

From even.rouault at spatialys.com  Wed Feb 24 14:26:25 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 24 Feb 2021 23:26:25 +0100
Subject: [gdal-dev] BAG File has Zero Pixel Size
In-Reply-To: <e3034d74220f412ba0bb4265299eb0b8@arl.psu.edu>
References: <e3034d74220f412ba0bb4265299eb0b8@arl.psu.edu>
Message-ID: <1791448.tjgXlz1Z1V@even-i700>

Geoff,

There have been some issues with some BAG formulations in recent GDAL versions 
(probably 3.0 indeed). I've verified with GDAL 3.1.3 or 3.2.1 that this file 
can ber read correctly again.

Even

> Hello,
> 
> I'm relatively new to GDAL and have a question about some confusing behavior
> when reading BAG files using C++.  I'll put more details below but the TLDR
> is that while working with an older version of GDAL included with Ubuntu
> 16.04 I was able to read a file correctly but when working with the same
> file on Centos 8 the x and y pixel lengths are reported as zero.  I don't
> know if it's a problem with the data set being made for an old version of
> GDAL, or if something else has changed that I haven't accounted for.
> 
> The file in question is
> H12280_MB_1m_MLLW_Combined.bag.gz<https://data.ngdc.noaa.gov/platforms/ocea
> n/nos/coast/H12001-H14000/H12280/BAG/H12280_MB_1m_MLLW_Combined.bag.gz> at 
> Report for H12280
> (noaa.gov)<https://www.ngdc.noaa.gov/nos/H12001-H14000/H12280.html> and I'm
> following the "getting-dataset-information" part of the Raster API tutorial
> at gdal.org (Raster API tutorial - GDAL
> documentation<https://gdal.org/tutorials/raster_api_tut.html#getting-datase
> t-information>) for C++.
> 
> When printing out the dataset information on Ubuntu 16.04 with
> libgdal-dev-1.11.3+dfsg-3build2 I get:
> 
> Driver: BAG/Bathymetry Attributed Grid
> Size is 390x527x2
> Projection is `PROJCS["UTM Zone 10, Northern Hemisphere",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
> 26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
> RAMETER["central_meridian",-123],PARAMETER["scale_factor",0.9996],PARAMETER[
> "false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]'
> Origin = (525490.000000,5287130.000000)
> Pixel Size = (20.000000,-20.000000)
> 
> When printing out the dataset information from the same file on Centos 8
> with gdal-devel-3.0.4-5.el8.x86_64 I get:
> 
> Driver: BAG/Bathymetry Attributed Grid
> Size is 390x527x2
> Projection is `PROJCS["unnamed",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"
> ]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925
> 199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]],PROJECTION["Trans
> verse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridi
> an",-123],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000]
> ,PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AXIS
> ["Easting",EAST],AXIS["Northing",NORTH]]' Origin =
> (525500.000000,5276600.000000)
> Pixel Size = (0.000000,-0.000000)
> 
> In particular the Pixel Size is 0 by 0 when it should be 20 by -20.  There
> are some other differences, like the fact that the UTM zone doesn't seem to
> show up in the output of the newer version, but I don't quite know what to
> make of it.  Any advice would be appreciated.
> 
> Thanks.
> 
> Geoff.


-- 
http://www.spatialys.com

From idan at miara.com  Thu Feb 25 00:33:29 2021
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Feb 2021 10:33:29 +0200
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
Message-ID: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>

Hi All,

I was wondering what is the proper way to call the gdal scripts that are
installed on the "Python3X\Scripts" on Windows.

Is there an easier way but to call "python
c:\Python38\Scripts\gdal_calc.py", for instance?
I do have the scripts folder in my path.

# this opens gdal_calc.py with my IDE
C:\>gdal_calc

# this opens gdal_calc.py with my IDE as well
C:\>gdal_calc.py

C:\>python gdal_calc.py
python: can't open file 'gdal_calc.py': [Errno 2] No such file or directory

C:\>python c:\Python38\Scripts\gdal_calc.py
Usage: gdal_calc.py --calc=expression --outfile=out_filename [-A filename]
                    [--A_band=n] [-B...-Z filename] [other_options]

Regards,
Idan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210225/c731c800/attachment.html>

From mateusz at loskot.net  Thu Feb 25 00:51:46 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 25 Feb 2021 09:51:46 +0100
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
Message-ID: <CABUeae99hPoq5MMHiGxf_8d00xgoioHz9nf1DRwAYWtbGCdqow@mail.gmail.com>

On Thu, 25 Feb 2021 at 09:34, Idan Miara <idan at miara.com> wrote:
>
> Is there an easier way but to call "python c:\Python38\Scripts\gdal_calc.py", for instance?

https://docs.python.org/3/using/windows.html#finding-the-python-executable

"On the first page of the installer, an option labelled ?Add Python to PATH?
may be selected to have the installer add the install location into the PATH.
The location of the Scripts\ folder is also added."


Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From rdmailings at duif.net  Thu Feb 25 00:50:32 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 25 Feb 2021 09:50:32 +0100
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
Message-ID: <24fe2fa2-8ed1-325d-2094-f03860453148@duif.net>

For what I know 
C:\>gdal_calc 
should work: apparently the c:\Python38\Scripts is added to your PATH variable, and you can call this ('bat'-file?) from everywhere on your system.

What can be an issue is that with the installation of python 3.8 you 'associated' the 'py' extension (so how to handle *.py files) with the Idle-python programming IDE.

I think it is possible to just remove that association. And then a call to gdalcalc should work.
IF NOT: have a look into the gdalcalc file (the bat script) and fix things there.

Hope this helps,

Richard Duivenvoorde

On 2/25/21 9:33 AM, Idan Miara wrote:
> Hi All,
> 
> I was wondering what is the proper way to call the gdal scripts that are installed on the "Python3X\Scripts" on Windows.
> 
> Is there an easier way but to call "python c:\Python38\Scripts\gdal_calc.py", for instance?
> I do have the scripts folder in my path.
> 
> # this opens gdal_calc.py with my IDE
> C:\>gdal_calc
> 
> # this opens gdal_calc.py with my IDE as well
> C:\>gdal_calc.py
> 
> C:\>python gdal_calc.py
> python: can't open file 'gdal_calc.py': [Errno 2] No such file or directory
> 
> C:\>python c:\Python38\Scripts\gdal_calc.py
> Usage: gdal_calc.py --calc=expression --outfile=out_filename [-A filename]
> ? ? ? ? ? ? ? ? ? ? [--A_band=n] [-B...-Z filename] [other_options]
> 
> Regards,
> Idan
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


From idan at miara.com  Thu Feb 25 01:15:24 2021
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Feb 2021 11:15:24 +0200
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <24fe2fa2-8ed1-325d-2094-f03860453148@duif.net>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
 <24fe2fa2-8ed1-325d-2094-f03860453148@duif.net>
Message-ID: <CAEDrt3_wbo+nPGTswrnPrkVmbfvdFHVA0ov3T0UCE5yf0gDPUA@mail.gmail.com>

Hi Mateusz and Richard,

Thanks for your prompt responses.
I had the scripts folder in my path.
It seems that the issue was indeed that I had PyCharm associated with .py
files, so calling `gdal_calc` or `gdal_calc.py` (from cmd for instance)
just opened gdal_calc.py in PyCharm.
Once I've changed py files to be associated with python.exe instead of with
PyCharm then I could also run gdal_calc from cmd just by calling
`gdal_calc` or `gdal_calc.py`.

I guess that because I had `scripts` in my path I expected that `python
gdal_calc.py` would also work (unrelated to which application is associated
with py files), but it seems that it only works for files in the current
dir or when providing a full path, and it doesn't work for files in the
path (unless you cd to that dir).
Richard - I'm not sure which batch files you were referring to, which gdal
distribution created gdal_calc.bat files for you?

Idan



On Thu, 25 Feb 2021 at 10:50, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> For what I know
> C:\>gdal_calc
> should work: apparently the c:\Python38\Scripts is added to your PATH
> variable, and you can call this ('bat'-file?) from everywhere on your
> system.
>
> What can be an issue is that with the installation of python 3.8 you
> 'associated' the 'py' extension (so how to handle *.py files) with the
> Idle-python programming IDE.
>
> I think it is possible to just remove that association. And then a call to
> gdalcalc should work.
> IF NOT: have a look into the gdalcalc file (the bat script) and fix things
> there.
>
> Hope this helps,
>
> Richard Duivenvoorde
>
> On 2/25/21 9:33 AM, Idan Miara wrote:
> > Hi All,
> >
> > I was wondering what is the proper way to call the gdal scripts that are
> installed on the "Python3X\Scripts" on Windows.
> >
> > Is there an easier way but to call "python
> c:\Python38\Scripts\gdal_calc.py", for instance?
> > I do have the scripts folder in my path.
> >
> > # this opens gdal_calc.py with my IDE
> > C:\>gdal_calc
> >
> > # this opens gdal_calc.py with my IDE as well
> > C:\>gdal_calc.py
> >
> > C:\>python gdal_calc.py
> > python: can't open file 'gdal_calc.py': [Errno 2] No such file or
> directory
> >
> > C:\>python c:\Python38\Scripts\gdal_calc.py
> > Usage: gdal_calc.py --calc=expression --outfile=out_filename [-A
> filename]
> >                     [--A_band=n] [-B...-Z filename] [other_options]
> >
> > Regards,
> > Idan
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210225/fa58a9da/attachment.html>

From rdmailings at duif.net  Thu Feb 25 01:40:59 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 25 Feb 2021 10:40:59 +0100
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <CAEDrt3_wbo+nPGTswrnPrkVmbfvdFHVA0ov3T0UCE5yf0gDPUA@mail.gmail.com>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
 <24fe2fa2-8ed1-325d-2094-f03860453148@duif.net>
 <CAEDrt3_wbo+nPGTswrnPrkVmbfvdFHVA0ov3T0UCE5yf0gDPUA@mail.gmail.com>
Message-ID: <3476b67a-a7f2-c52b-7605-a69538cd2ffd@duif.net>

On 2/25/21 10:15 AM, Idan Miara wrote:

> I guess that because I had `scripts` in my path I expected that `python gdal_calc.py` would also work (unrelated to which application is associated with py files), but it seems that it only works for files in the current dir or when providing a full path, and it doesn't work for files in the path (unless you cd to that dir).
> Richard - I'm not sure which batch files you were?referring to, which gdal distribution created gdal_calc.bat files for you?

Hi Idan,

no worries: I was just guessing. I'm a Linux user, but sometimes Windows user at clients..

I thought to have seen that some Python packages install small 'bat-files in the Python Scripts folder, just to be able to call the actual python scripts.

So I was guessing that on Windows there would be a gdal_calc.bat script to call the actual gdal_calc.py.. but apparently I was wrong ;-~

Regards,

Richard Duivenvoorde

From idan at miara.com  Thu Feb 25 01:53:53 2021
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Feb 2021 11:53:53 +0200
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <3476b67a-a7f2-c52b-7605-a69538cd2ffd@duif.net>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
 <24fe2fa2-8ed1-325d-2094-f03860453148@duif.net>
 <CAEDrt3_wbo+nPGTswrnPrkVmbfvdFHVA0ov3T0UCE5yf0gDPUA@mail.gmail.com>
 <3476b67a-a7f2-c52b-7605-a69538cd2ffd@duif.net>
Message-ID: <CAEDrt3-0vJKavW+SeX=XHV25K1+N=mRWPfrwXiQh6YomTW-uNQ@mail.gmail.com>

Actually, it might be a good idea to use a batch file...

I've created the following batch file named gdal_calc.bat in the scripts
folder:
@python %~dp0\gdal_calc.py %*

Then running gdal_calc works even if *.py is associated with PyCharm.
Do you think this issue justifies creating this kind of batch files for the
scripts to distribute in binary windows wheels ?



On Thu, 25 Feb 2021 at 11:41, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 2/25/21 10:15 AM, Idan Miara wrote:
>
> > I guess that because I had `scripts` in my path I expected that `python
> gdal_calc.py` would also work (unrelated to which application is associated
> with py files), but it seems that it only works for files in the current
> dir or when providing a full path, and it doesn't work for files in the
> path (unless you cd to that dir).
> > Richard - I'm not sure which batch files you were referring to, which
> gdal distribution created gdal_calc.bat files for you?
>
> Hi Idan,
>
> no worries: I was just guessing. I'm a Linux user, but sometimes Windows
> user at clients..
>
> I thought to have seen that some Python packages install small 'bat-files
> in the Python Scripts folder, just to be able to call the actual python
> scripts.
>
> So I was guessing that on Windows there would be a gdal_calc.bat script to
> call the actual gdal_calc.py.. but apparently I was wrong ;-~
>
> Regards,
>
> Richard Duivenvoorde
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210225/bec1017c/attachment.html>

From rdmailings at duif.net  Thu Feb 25 02:02:23 2021
From: rdmailings at duif.net (Richard Duivenvoorde)
Date: Thu, 25 Feb 2021 11:02:23 +0100
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <CAEDrt3-0vJKavW+SeX=XHV25K1+N=mRWPfrwXiQh6YomTW-uNQ@mail.gmail.com>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
 <24fe2fa2-8ed1-325d-2094-f03860453148@duif.net>
 <CAEDrt3_wbo+nPGTswrnPrkVmbfvdFHVA0ov3T0UCE5yf0gDPUA@mail.gmail.com>
 <3476b67a-a7f2-c52b-7605-a69538cd2ffd@duif.net>
 <CAEDrt3-0vJKavW+SeX=XHV25K1+N=mRWPfrwXiQh6YomTW-uNQ@mail.gmail.com>
Message-ID: <62491745-506e-8df3-22f6-ea63b1779cf5@duif.net>

On 2/25/21 10:53 AM, Idan Miara wrote:
> Actually, it might be a good idea to use a batch file...
> 
> I've created the following batch file named gdal_calc.bat in the scripts folder:
> @python %~dp0\gdal_calc.py %*
> 
> Then running gdal_calc works even if *.py is associated?with PyCharm.
> Do you think this issue justifies creating this?kind of batch files for the scripts?to distribute in binary windows wheels ?

Mmm, /me no windows expert, I don't know. 

But couldn't this be a potential security issue? But I let knowledge to Windows/Python packagers....

Regards,

Richard Duivenvoorde

From idan at miara.com  Thu Feb 25 02:16:54 2021
From: idan at miara.com (Idan Miara)
Date: Thu, 25 Feb 2021 12:16:54 +0200
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <62491745-506e-8df3-22f6-ea63b1779cf5@duif.net>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
 <24fe2fa2-8ed1-325d-2094-f03860453148@duif.net>
 <CAEDrt3_wbo+nPGTswrnPrkVmbfvdFHVA0ov3T0UCE5yf0gDPUA@mail.gmail.com>
 <3476b67a-a7f2-c52b-7605-a69538cd2ffd@duif.net>
 <CAEDrt3-0vJKavW+SeX=XHV25K1+N=mRWPfrwXiQh6YomTW-uNQ@mail.gmail.com>
 <62491745-506e-8df3-22f6-ea63b1779cf5@duif.net>
Message-ID: <CAEDrt3-hhspVxjwPMD2XuWU7fBjoMacBiDq-km3BH8mTrijC+Q@mail.gmail.com>

I can't think about a potential security issue with that as long as you
trust your default python interpreter...

So to sum up the workaround:
Saving the following line as c:\Python38\Scripts\gdal_calc.bat (or as the
same name as any other x.py script)
@python %~dp0\%~n0.py %*
and calling gdal_calc (apparently .bat has higher priority then .py) would
work regardless of the py file association.

For anyone who is not familiar with the quirks of windows batch files:
@ = not to echo the command
python = your default python interpreter
%~dp0 means the path of the current batch file (i.e. c:\Python38\Scripts)
%~n0 means the name of the batch file without extension (i.e. gdal_calc)

So running gdal_calc it would essentially call the following:
python c:\Python38\Scripts\gdal_calc.py

Idan

On Thu, 25 Feb 2021 at 12:02, Richard Duivenvoorde <rdmailings at duif.net>
wrote:

> On 2/25/21 10:53 AM, Idan Miara wrote:
> > Actually, it might be a good idea to use a batch file...
> >
> > I've created the following batch file named gdal_calc.bat in the scripts
> folder:
> > @python %~dp0\gdal_calc.py %*
> >
> > Then running gdal_calc works even if *.py is associated with PyCharm.
> > Do you think this issue justifies creating this kind of batch files for
> the scripts to distribute in binary windows wheels ?
>
> Mmm, /me no windows expert, I don't know.
>
> But couldn't this be a potential security issue? But I let knowledge to
> Windows/Python packagers....
>
> Regards,
>
> Richard Duivenvoorde
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210225/3880d740/attachment-0001.html>

From even.rouault at spatialys.com  Thu Feb 25 02:30:37 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 25 Feb 2021 11:30:37 +0100
Subject: [gdal-dev] Motion: adopt RFC79: Listing of Service Providers on
 GDAL website
Message-ID: <5723603.CtAnagbAJd@even-i700>

Hi,

I motion to adopt RFC79: Listing of Service Providers on GDAL website:
https://github.com/OSGeo/gdal/pull/3473

Starting with my +1

Even

-- 
http://www.spatialys.com

From mateusz at loskot.net  Thu Feb 25 03:47:39 2021
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 25 Feb 2021 12:47:39 +0100
Subject: [gdal-dev] Motion: adopt RFC79: Listing of Service Providers on
 GDAL website
In-Reply-To: <5723603.CtAnagbAJd@even-i700>
References: <5723603.CtAnagbAJd@even-i700>
Message-ID: <CABUeae-+TbZ2gkB4d0HvKGiTsX_3MsvjsoTVRtgBLyMuitoB7A@mail.gmail.com>

+1

Mateusz

On Thu, 25 Feb 2021 at 11:30, Even Rouault <even.rouault at spatialys.com> wrote:
>
> Hi,
>
> I motion to adopt RFC79: Listing of Service Providers on GDAL website:
> https://github.com/OSGeo/gdal/pull/3473
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Mateusz Loskot, http://mateusz.loskot.net

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 25 05:12:06 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 25 Feb 2021 06:12:06 -0700 (MST)
Subject: [gdal-dev] The proper way to call gdal "scripts" on Windows?
In-Reply-To: <CAEDrt3_wbo+nPGTswrnPrkVmbfvdFHVA0ov3T0UCE5yf0gDPUA@mail.gmail.com>
References: <CAEDrt3-rr-MNevZG5mn=TU088nqqWXhomN30fkdzWy6M5z6oiQ@mail.gmail.com>
 <24fe2fa2-8ed1-325d-2094-f03860453148@duif.net>
 <CAEDrt3_wbo+nPGTswrnPrkVmbfvdFHVA0ov3T0UCE5yf0gDPUA@mail.gmail.com>
Message-ID: <1614258726098-0.post@n6.nabble.com>

Hi,

OSGeo4W creates .bat file for each Python script. As an example
gdal_calc.bat:

@echo off 
call "%OSGEO4W_ROOT%\bin\o4w_env.bat" 
python "%OSGEO4W_ROOT%\bin\gdal_calc.py" %* 

o4w_env.bat launches a bunch of other .bat files. Have a look and be
astonished! One of those sets Python:

SET PYTHONHOME=%OSGEO4W_ROOT%\apps\Python27
PATH %OSGEO4W_ROOT%\apps\Python27\Scripts;%PATH%


-Jukka Rahkonen-



Idan Miara wrote
> Richard - I'm not sure which batch files you were referring to, which gdal
> distribution created gdal_calc.bat files for you?





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From schwehr at gmail.com  Thu Feb 25 05:53:27 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 25 Feb 2021 05:53:27 -0800
Subject: [gdal-dev] Motion: adopt RFC79: Listing of Service Providers on
 GDAL website
In-Reply-To: <CABUeae-+TbZ2gkB4d0HvKGiTsX_3MsvjsoTVRtgBLyMuitoB7A@mail.gmail.com>
References: <5723603.CtAnagbAJd@even-i700>
 <CABUeae-+TbZ2gkB4d0HvKGiTsX_3MsvjsoTVRtgBLyMuitoB7A@mail.gmail.com>
Message-ID: <CACmBxyvef1jwfxMeFT7=x-S-uKVsQQPAUqMt2y_F0sxWOocEyA@mail.gmail.com>

+1 KurtS

On Thu, Feb 25, 2021, 3:46 AM Mateusz Loskot <mateusz at loskot.net> wrote:

> +1
>
> Mateusz
>
> On Thu, 25 Feb 2021 at 11:30, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >
> > Hi,
> >
> > I motion to adopt RFC79: Listing of Service Providers on GDAL website:
> > https://github.com/OSGeo/gdal/pull/3473
> >
> > Starting with my +1
> >
> > Even
> >
> > --
> > http://www.spatialys.com
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210225/ed09069d/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Feb 25 05:55:35 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 25 Feb 2021 06:55:35 -0700 (MST)
Subject: [gdal-dev] Motion: adopt RFC79: Listing of Service Providers on
 GDAL website
In-Reply-To: <5723603.CtAnagbAJd@even-i700>
References: <5723603.CtAnagbAJd@even-i700>
Message-ID: <1614261335749-0.post@n6.nabble.com>

+1

-Jukka Rahkonen-


Even Rouault-2 wrote
> Hi,
> 
> I motion to adopt RFC79: Listing of Service Providers on GDAL website:
> https://github.com/OSGeo/gdal/pull/3473
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev


Even Rouault-2 wrote
> Hi,
> 
> I motion to adopt RFC79: Listing of Service Providers on GDAL website:
> https://github.com/OSGeo/gdal/pull/3473
> 
> Starting with my +1
> 
> Even
> 
> -- 
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list

> gdal-dev at .osgeo

> https://lists.osgeo.org/mailman/listinfo/gdal-dev





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jmckenna at gatewaygeomatics.com  Thu Feb 25 05:49:34 2021
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu, 25 Feb 2021 09:49:34 -0400
Subject: [gdal-dev] Motion: adopt RFC79: Listing of Service Providers on
 GDAL website
In-Reply-To: <5723603.CtAnagbAJd@even-i700>
References: <5723603.CtAnagbAJd@even-i700>
Message-ID: <7a2e7339-5616-6293-f7ec-4537b94205fa@gatewaygeomatics.com>

+1

-jeff



On 2021-02-25 6:30 a.m., Even Rouault wrote:
> Hi,
> 
> I motion to adopt RFC79: Listing of Service Providers on GDAL website:
> https://github.com/OSGeo/gdal/pull/3473
> 
> Starting with my +1
> 
> Even
> 


-- 
Jeff McKenna
GatewayGeo: MapServer Consulting and Training Services
co-founder of FOSS4G
http://gatewaygeo.com/

From dmorissette at mapgears.com  Thu Feb 25 06:28:17 2021
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 25 Feb 2021 09:28:17 -0500
Subject: [gdal-dev] Motion: adopt RFC79: Listing of Service Providers on
 GDAL website
In-Reply-To: <5723603.CtAnagbAJd@even-i700>
References: <5723603.CtAnagbAJd@even-i700>
Message-ID: <5908126f-8f92-54a1-3b44-c9304b970916@mapgears.com>

+1

Daniel



On 2021-02-25 05:30, Even Rouault wrote:
> Hi,
> 
> I motion to adopt RFC79: Listing of Service Providers on GDAL website:
> https://github.com/OSGeo/gdal/pull/3473
> 
> Starting with my +1
> 
> Even
> 


-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201

From sean at mapbox.com  Thu Feb 25 09:15:38 2021
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 25 Feb 2021 10:15:38 -0700
Subject: [gdal-dev] Call for discussion on RFC 79: Listing of Service
 Providers on GDAL website
In-Reply-To: <1614151248873-0.post@n6.nabble.com>
References: <13933971.prJO70O5Fa@even-i700>
 <CADPhZXyZCUL3MCPFatYZ-FxAQaRGDXYsGnSVMOMth4hGh=cXOA@mail.gmail.com>
 <1614151248873-0.post@n6.nabble.com>
Message-ID: <CADPhZXzw3=brjfY01OftQDg3RwGg6LMBMVpF++ON5mF3CEFqxw@mail.gmail.com>

Hi Jukka,

On Wed, Feb 24, 2021 at 12:20 AM jratike80 <
jukka.rahkonen at maanmittauslaitos.fi> wrote:

> GDAL - Dev mailing list wrote
> > Hi Even,
> >
> > On Tue, Feb 23, 2021 at 2:56 AM Even Rouault &lt;
>
> > even.rouault@
>
> > &gt;
> > wrote:
> >
> >> Hi,
> >>
> >> Please find https://github.com/OSGeo/gdal/pull/3473 which proposes to
> >> list
> >> service providers offering GDAL related services on the GDAL website. As
> >> mentioned in the RFC, this is a straightfoward port of the equivalent
> >> adopted
> >> RFC of the Mapserver project.
> >>
> >> Even
> >>
> >
> > I'd like to hear more about the Mapserver project service provider list.
> > Does it work? Is it kept up to date or does it get stale? Does the
> > community find that it effectively steers $$ to consultants that fix bugs
> > and maintain the project? With the difference in image/logo sizes, is the
> > intent to make this look a bit like a conference sponsor page?
> >
> > --
> > Sean Gillies
>
>
> Hi,
>
> Maybe the number of new potential customers searching for consultants to do
> Mapserver development is not so huge at the moment and the old ones know
> their contacts already. However, I feel that the service provider list does
> work for the Geoserver project. Probably mostly not so that users start by
> browsing the list and pick a contractor. It is rather so that core
> Geoserver
> developers know that often there is a minimal chance that some bug will be
> fixed or some feature request will be implemented just because there is an
> open ticket about that. Then they can inform the user about the reasonable
> alternatives like in this example that I picked from a mailing list:
>
> "That does not mean we cannot work around a deficiency in a rogue server,
> but be prepared to issue your PR or fund development though commercial
> services: http://geoserver.org/support/"
>
> For my mind that is also fair for the users and gives more hope than the
> comment on the OSSIM site, that is otherwise my absolute favorite:
>
> "We encourage users to use the software as-is or become an active
> contributor."
>
> -Jukka Rahkonen-
>

Thanks for the explanation. I agree that we can't fairly tell new people
that they may have to pay for help without showing them who they may hire.

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210225/23a687c5/attachment.html>

From boxerab at gmail.com  Sat Feb 27 09:49:41 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Sat, 27 Feb 2021 12:49:41 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
Message-ID: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>

 Hello Everyone,

For those who aren?t aware, there is a pending PR for a new open source
JPEG 2000 driver, based on the Grok JPEG 2000 library

https://github.com/OSGeo/gdal/pull/3449

Notable Library Features:

1. support for reading TLM and PLT markers, for fast random access into
large tiled or single-tiled images

2. support for memory mapped files, which helps speed up random access
decode for large images

3. internal tile cache that allows efficient reading of multiple tiles from
single Grok codec object

4. support for new Part 15 of the JPEG 2000 standard (HTJ2K) which promises
up to **10x** speedup

of encode and decode


Benchmarks:

I haven't done a thorough comparison between Kakadu, Grok and OpenjPEG, but
here are a few results (more details in PR)

1. Compression: multi-tile

Kakadu is 2X faster than Grok; Grok is 5X faster than OpenJPEG

2. Decompression: large single tile image with PLT markers

Kakadu is 60% faster than Grok; Grok is 2.5x faster than OpenJPEG

3. Decompression: 4000x4000 sub-region of large single tile image with PLT
markers

Kakadu is 40% faster than Grok; Grok is 5X faster than OpenJPEG


This year should see Grok reaching performance parity with Kakadu.


There is an RFC for the new driver, which is complete, and tested on a few
compression and decompression work flows.


Any comments or feedback is very welcome.


Cheers,

Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210227/36e80248/attachment.html>

From kai.muehlbauer at uni-bonn.de  Sat Feb 27 09:02:23 2021
From: kai.muehlbauer at uni-bonn.de (=?UTF-8?Q?Kai_M=c3=bchlbauer?=)
Date: Sat, 27 Feb 2021 18:02:23 +0100
Subject: [gdal-dev] OGR Polygon Intersection
Message-ID: <5ffe7479-8ee1-3ffe-a700-33a1a90c7806@uni-bonn.de>

Hi,

this might be a silly problem or no problem at all, but I currently 
can't wrap my head around it.

I'm using python bindings of GDAL OGR with GEOS support for layer 
intersection since several years now. Now suddenly my testsuit which 
checks intersection of two boxes breaks since the intersecting box 
starts now with a different starting point (all four points of the box 
fit with the earlier tests).

The change took place between versions GDAL 3.2.0 -> 3.2.1, GEOS 3.8.1 
-> 3.9.1 and PROJ 7.1.1 -> 7.2.0. I've tried to find anything what might 
have changed in the release notes of GDAL and GEOS, but couldn't.

So if anyone has a clue what's going on or what has changed and can 
point me to the relevant resources, I would greatly appreciate it.

Below you find the geometries I uses as JSON strings and the differing 
intersection.

src
'{ "type": "Polygon", "coordinates": [ [ [ 1.0, 1.0, 0.0 ], [ 1.0, 2.0, 
0.0 ], [ 2.0, 2.0, 0.0 ], [ 2.0, 1.0, 0.0 ], [ 1.0, 1.0, 0.0 ] ] ] }'

trg
'{ "type": "Polygon", "coordinates": [ [ [ 0.5, 0.5, 0.0 ], [ 0.5, 1.5, 
0.0 ], [ 1.5, 1.5, 0.0 ], [ 1.5, 0.5, 0.0 ], [ 0.5, 0.5, 0.0 ] ] ] }'

trg.Intersection(src) (GDAL 3.2.0, GEOS 3.8.1, PROJ 7.1.1)
'{ "type": "Polygon", "coordinates": [ [ [ 1.0, 1.5, 0.0 ], [ 1.5, 1.5, 
0.0 ], [ 1.5, 1.0, 0.0 ], [ 1.0, 1.0, 0.0 ], [ 1.0, 1.5, 0.0 ] ] ] }'

trg.Intersection(src) (GDAL 3.2.1, GEOS 3.9.1, PROJ 7.2.0)
'{ "type": "Polygon", "coordinates": [ [ [ 1.5, 1.5, 0.0 ], [ 1.5, 1.0, 
0.0 ], [ 1.0, 1.0, 0.0 ], [ 1.0, 1.5, 0.0 ], [ 1.5, 1.5, 0.0 ] ] ] }'

Thanks in advance!

Cheers,
Kai


From kai.muehlbauer at uni-bonn.de  Sat Feb 27 10:11:39 2021
From: kai.muehlbauer at uni-bonn.de (=?UTF-8?Q?Kai_M=c3=bchlbauer?=)
Date: Sat, 27 Feb 2021 19:11:39 +0100
Subject: [gdal-dev] OGR Polygon Intersection
In-Reply-To: <5ffe7479-8ee1-3ffe-a700-33a1a90c7806@uni-bonn.de>
References: <5ffe7479-8ee1-3ffe-a700-33a1a90c7806@uni-bonn.de>
Message-ID: <5c4b2ea9-9d8c-6c01-58d3-44424cb7840e@uni-bonn.de>

Hi,

OK, I've found something here:

https://info.crunchydata.com/blog/waiting-for-postgis-3.1-geos-3.9

pointing out that a rewrite of the overlay engine in GEOS has taken place.

But I couldn't find anything describing the behaviour of how the first 
point of the intersection is determined. It looks like it skips the 
first point and takes the second. At least my example indicates that.

So my questions would be, is this something which can be relied upon in 
the future and why was this change necessary.

Thanks for any input here.

Cheers,
Kai





Am 27.02.21 um 18:02 schrieb Kai M?hlbauer:
> Hi,
> 
> this might be a silly problem or no problem at all, but I currently 
> can't wrap my head around it.
> 
> I'm using python bindings of GDAL OGR with GEOS support for layer 
> intersection since several years now. Now suddenly my testsuit which 
> checks intersection of two boxes breaks since the intersecting box 
> starts now with a different starting point (all four points of the box 
> fit with the earlier tests).
> 
> The change took place between versions GDAL 3.2.0 -> 3.2.1, GEOS 3.8.1 
> -> 3.9.1 and PROJ 7.1.1 -> 7.2.0. I've tried to find anything what might 
> have changed in the release notes of GDAL and GEOS, but couldn't.
> 
> So if anyone has a clue what's going on or what has changed and can 
> point me to the relevant resources, I would greatly appreciate it.
> 
> Below you find the geometries I uses as JSON strings and the differing 
> intersection.
> 
> src
> '{ "type": "Polygon", "coordinates": [ [ [ 1.0, 1.0, 0.0 ], [ 1.0, 2.0, 
> 0.0 ], [ 2.0, 2.0, 0.0 ], [ 2.0, 1.0, 0.0 ], [ 1.0, 1.0, 0.0 ] ] ] }'
> 
> trg
> '{ "type": "Polygon", "coordinates": [ [ [ 0.5, 0.5, 0.0 ], [ 0.5, 1.5, 
> 0.0 ], [ 1.5, 1.5, 0.0 ], [ 1.5, 0.5, 0.0 ], [ 0.5, 0.5, 0.0 ] ] ] }'
> 
> trg.Intersection(src) (GDAL 3.2.0, GEOS 3.8.1, PROJ 7.1.1)
> '{ "type": "Polygon", "coordinates": [ [ [ 1.0, 1.5, 0.0 ], [ 1.5, 1.5, 
> 0.0 ], [ 1.5, 1.0, 0.0 ], [ 1.0, 1.0, 0.0 ], [ 1.0, 1.5, 0.0 ] ] ] }'
> 
> trg.Intersection(src) (GDAL 3.2.1, GEOS 3.9.1, PROJ 7.2.0)
> '{ "type": "Polygon", "coordinates": [ [ [ 1.5, 1.5, 0.0 ], [ 1.5, 1.0, 
> 0.0 ], [ 1.0, 1.0, 0.0 ], [ 1.0, 1.5, 0.0 ], [ 1.5, 1.5, 0.0 ] ] ] }'
> 
> Thanks in advance!
> 
> Cheers,
> Kai
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From me at komzpa.net  Sat Feb 27 10:11:45 2021
From: me at komzpa.net (=?UTF-8?Q?Darafei_=22Kom=D1=8Fpa=22_Praliaskouski?=)
Date: Sat, 27 Feb 2021 21:11:45 +0300
Subject: [gdal-dev] OGR Polygon Intersection
In-Reply-To: <5ffe7479-8ee1-3ffe-a700-33a1a90c7806@uni-bonn.de>
References: <5ffe7479-8ee1-3ffe-a700-33a1a90c7806@uni-bonn.de>
Message-ID: <CAC8Q8tKaMYvDK9ZskLettTxmVJU5vgcenyjubHPOzBkBaSrGWQ@mail.gmail.com>

Please use GEOSNormalize / ST_Normalize or other equivalents before
comparing geometries between library versions. The starting point in the
ring can change because of different optimizations, and GEOS 3.9 was a
complete rewrite of the geometry overlay subsystem.

On Sat, Feb 27, 2021 at 9:02 PM Kai M?hlbauer <kai.muehlbauer at uni-bonn.de>
wrote:

> Hi,
>
> this might be a silly problem or no problem at all, but I currently
> can't wrap my head around it.
>
> I'm using python bindings of GDAL OGR with GEOS support for layer
> intersection since several years now. Now suddenly my testsuit which
> checks intersection of two boxes breaks since the intersecting box
> starts now with a different starting point (all four points of the box
> fit with the earlier tests).
>
> The change took place between versions GDAL 3.2.0 -> 3.2.1, GEOS 3.8.1
> -> 3.9.1 and PROJ 7.1.1 -> 7.2.0. I've tried to find anything what might
> have changed in the release notes of GDAL and GEOS, but couldn't.
>
> So if anyone has a clue what's going on or what has changed and can
> point me to the relevant resources, I would greatly appreciate it.
>
> Below you find the geometries I uses as JSON strings and the differing
> intersection.
>
> src
> '{ "type": "Polygon", "coordinates": [ [ [ 1.0, 1.0, 0.0 ], [ 1.0, 2.0,
> 0.0 ], [ 2.0, 2.0, 0.0 ], [ 2.0, 1.0, 0.0 ], [ 1.0, 1.0, 0.0 ] ] ] }'
>
> trg
> '{ "type": "Polygon", "coordinates": [ [ [ 0.5, 0.5, 0.0 ], [ 0.5, 1.5,
> 0.0 ], [ 1.5, 1.5, 0.0 ], [ 1.5, 0.5, 0.0 ], [ 0.5, 0.5, 0.0 ] ] ] }'
>
> trg.Intersection(src) (GDAL 3.2.0, GEOS 3.8.1, PROJ 7.1.1)
> '{ "type": "Polygon", "coordinates": [ [ [ 1.0, 1.5, 0.0 ], [ 1.5, 1.5,
> 0.0 ], [ 1.5, 1.0, 0.0 ], [ 1.0, 1.0, 0.0 ], [ 1.0, 1.5, 0.0 ] ] ] }'
>
> trg.Intersection(src) (GDAL 3.2.1, GEOS 3.9.1, PROJ 7.2.0)
> '{ "type": "Polygon", "coordinates": [ [ [ 1.5, 1.5, 0.0 ], [ 1.5, 1.0,
> 0.0 ], [ 1.0, 1.0, 0.0 ], [ 1.0, 1.5, 0.0 ], [ 1.5, 1.5, 0.0 ] ] ] }'
>
> Thanks in advance!
>
> Cheers,
> Kai
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Darafei "Kom?pa" Praliaskouski
OSM BY Team - http://openstreetmap.by/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210227/07e90533/attachment.html>

From schwehr at gmail.com  Sat Feb 27 10:18:39 2021
From: schwehr at gmail.com (Kurt Schwehr)
Date: Sat, 27 Feb 2021 10:18:39 -0800
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
Message-ID: <CACmBxysf3q2Y+N6yLVW4dMOR5PVAmb5N1_WukRVt6Nwy-KvppQ@mail.gmail.com>

I can't touch grok... GNU Affero General Public License

On Sat, Feb 27, 2021, 9:50 AM Aaron Boxer <boxerab at gmail.com> wrote:

>  Hello Everyone,
>
> For those who aren?t aware, there is a pending PR for a new open source
> JPEG 2000 driver, based on the Grok JPEG 2000 library
>
> https://github.com/OSGeo/gdal/pull/3449
>
> Notable Library Features:
>
> 1. support for reading TLM and PLT markers, for fast random access into
> large tiled or single-tiled images
>
> 2. support for memory mapped files, which helps speed up random access
> decode for large images
>
> 3. internal tile cache that allows efficient reading of multiple tiles
> from single Grok codec object
>
> 4. support for new Part 15 of the JPEG 2000 standard (HTJ2K) which
> promises up to **10x** speedup
>
> of encode and decode
>
>
> Benchmarks:
>
> I haven't done a thorough comparison between Kakadu, Grok and OpenjPEG,
> but here are a few results (more details in PR)
>
> 1. Compression: multi-tile
>
> Kakadu is 2X faster than Grok; Grok is 5X faster than OpenJPEG
>
> 2. Decompression: large single tile image with PLT markers
>
> Kakadu is 60% faster than Grok; Grok is 2.5x faster than OpenJPEG
>
> 3. Decompression: 4000x4000 sub-region of large single tile image with PLT
> markers
>
> Kakadu is 40% faster than Grok; Grok is 5X faster than OpenJPEG
>
>
> This year should see Grok reaching performance parity with Kakadu.
>
>
> There is an RFC for the new driver, which is complete, and tested on a few
> compression and decompression work flows.
>
>
> Any comments or feedback is very welcome.
>
>
> Cheers,
>
> Aaron
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210227/f6f85173/attachment-0001.html>

From even.rouault at spatialys.com  Sat Feb 27 11:02:45 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 27 Feb 2021 20:02:45 +0100
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
Message-ID: <1983050.Dg4OEfmRey@even-i700>

Aaron,

benchnmarking exercices are difficult in general, and even more with JPEG2000 
and its trillions of possible variants. You would need to specify library 
versions, how the library was exercised exactly (gdal_translate or the 
XXX_decompress utilities of the library), use of multithreading, etc etc. For 
example, I've seen recently openjpeg to perform better than Kakadu on 
decompression of DIMAP 2 (2048x2048 tiling) products.

> 4. support for new Part 15 of the JPEG 2000 standard (HTJ2K) which promises
> up to **10x** speedup

Did you have a chance to test how the reality of performance compares with the 
promise :-) ?

Anyway, this is secondary to my main concern. I should first say, I'm far from 
being objective, as I've been involved in OpenJPEG development. It seems 
you've done significant advances with Grok, and this is great to see, but this 
leaves me a bitter taste to see the scarce expertise of open source developers 
on JPEG2000, which is an extremely hard-to-master technology, to be split 
between 2 sister libraries (Grok was forked from OpenJPEG). And the 
consequence of that is now that GDAL would have to pay the price for the fork.

Can you transparently tell us why Grok is AGPL licensed ? Do you sell 
commercial licenses for people who couldn't comply with the AGPL license ? 
Nothing at https://github.com/GrokImageCompression/grok indicates so, neither 
do I see mentions of copyright assignment to you for people that want to 
contribute to Grok that would enable you to do that. So what's the point of 
the license change ?
If Grok was BSD licensed, provided that Grok indeed performs better than 
OpenJPEG in most situations we care about, then we'd might probably want to 
have just keep the JP2Grok driver and kill JP2OpenJPEG.

Best regards,

Even

-- 
http://www.spatialys.com

From gdt at lexort.com  Sat Feb 27 11:51:06 2021
From: gdt at lexort.com (Greg Troxel)
Date: Sat, 27 Feb 2021 14:51:06 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <1983050.Dg4OEfmRey@even-i700> (Even Rouault's message of "Sat,
 27 Feb 2021 20:02:45 +0100")
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
Message-ID: <rmift1hwaqd.fsf@s1.lexort.com>


Even Rouault <even.rouault at spatialys.com> writes:

> Can you transparently tell us why Grok is AGPL licensed ? Do you sell 
> commercial licenses for people who couldn't comply with the AGPL license ? 

Certainly a good question.  I have no idea in this case and my comments
should not be taken to imply anything about this particular library

I am guessing that gdal would not contemplate a license change to GPL
lightly, and that many (most?) would be opposed to changing to AGPL.

My impression is that gdal is all MIT licensed, and that absen't giving
some configure arguments to link against proprietary libraries, one ends
up with a pure MIT licensed result.  If that's wrong, please let me konw
and I'll fix up pkgsrc's metadata.

Perhaps due to the use of AGPL in many cases as a club to sell
proprietary licenses, rather than as a tool to advaance software
freedom, or perhaps just due to concerns about network access, I think
there is a lot of concern about using AGPL software.  When the software
is fundamentally a web service, that's one thing (e.g. nextcloud), but
when it's a library that then forces large amounts of other software to
be offered under AGPL (and perhaps only, with the rlying sources as
derived works notion), it seems broadly uncomfortable and in large part
unacceptable.

My impression is that Debian does not have issues with AGPL3 as it it is
formally a Free Software license, even when being used to subvert
software freedom.  However, I personally view AGPL3 as not reasonable
when there is a proprietary-license-also model.  I do view it as
reasonable when there is no possibility to get a proprietary license AND
contributions are accepted back without any kind of mechanism that would
enable proprietary licenses (assignment or grants in a CLA).

In pkgsrc, which I realize is a minority packaging system, we have
excluded AGPL from the set of defautl licenses (equivalent to Debian
main) because of the notion that people would find obligations
triggereed by merely running software with network access to be
surprising.  So for us, a license change to AGPL would be a big deal.

So while I'd like to understand the licensing stance of Grok, as long as
it's AGPL instead of MIT, it seems entirely out of the question to me.
I should note that I do not have any -1/+1 tokens to throw around, but
that doesn't stop me from ranting :-)

Greg

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 194 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210227/3af6511b/attachment.sig>

From warmerdam at pobox.com  Sat Feb 27 12:03:50 2021
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 27 Feb 2021 15:03:50 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <rmift1hwaqd.fsf@s1.lexort.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700> <rmift1hwaqd.fsf@s1.lexort.com>
Message-ID: <CA+YzLBeXSdM2T3w__zrQVikC-kRArJzLtKe_D=u87AT-tA0Qrg@mail.gmail.com>

Folks,

The GDAL driver code would need to be licensed the same as the rest of GDAL
(which I see from the PR is the case).

It is fine for the Grok library to be under the AGPL as long as it is an
optional dependency of GDAL.  Folks who are prepared to comply with it's
license can enable it at build time.

While I'm somewhat sad about further complexification of the GDAL JPEG2000
landscape, I do not see a fundamental reason not to add a Grok based
driver.   That said, it would require a GDAL committer interested in
addressing the PR.

Best regards,
Frank


On Sat, Feb 27, 2021 at 2:51 PM Greg Troxel <gdt at lexort.com> wrote:

>
> Even Rouault <even.rouault at spatialys.com> writes:
>
> > Can you transparently tell us why Grok is AGPL licensed ? Do you sell
> > commercial licenses for people who couldn't comply with the AGPL license
> ?
>
> Certainly a good question.  I have no idea in this case and my comments
> should not be taken to imply anything about this particular library
>
> I am guessing that gdal would not contemplate a license change to GPL
> lightly, and that many (most?) would be opposed to changing to AGPL.
>
> My impression is that gdal is all MIT licensed, and that absen't giving
> some configure arguments to link against proprietary libraries, one ends
> up with a pure MIT licensed result.  If that's wrong, please let me konw
> and I'll fix up pkgsrc's metadata.
>
> Perhaps due to the use of AGPL in many cases as a club to sell
> proprietary licenses, rather than as a tool to advaance software
> freedom, or perhaps just due to concerns about network access, I think
> there is a lot of concern about using AGPL software.  When the software
> is fundamentally a web service, that's one thing (e.g. nextcloud), but
> when it's a library that then forces large amounts of other software to
> be offered under AGPL (and perhaps only, with the rlying sources as
> derived works notion), it seems broadly uncomfortable and in large part
> unacceptable.
>
> My impression is that Debian does not have issues with AGPL3 as it it is
> formally a Free Software license, even when being used to subvert
> software freedom.  However, I personally view AGPL3 as not reasonable
> when there is a proprietary-license-also model.  I do view it as
> reasonable when there is no possibility to get a proprietary license AND
> contributions are accepted back without any kind of mechanism that would
> enable proprietary licenses (assignment or grants in a CLA).
>
> In pkgsrc, which I realize is a minority packaging system, we have
> excluded AGPL from the set of defautl licenses (equivalent to Debian
> main) because of the notion that people would find obligations
> triggereed by merely running software with network access to be
> surprising.  So for us, a license change to AGPL would be a big deal.
>
> So while I'd like to understand the licensing stance of Grok, as long as
> it's AGPL instead of MIT, it seems entirely out of the question to me.
> I should note that I do not have any -1/+1 tokens to throw around, but
> that doesn't stop me from ranting :-)
>
> Greg
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | +1 650-701-7823
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210227/63fe8add/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Sat Feb 27 13:14:01 2021
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Sat, 27 Feb 2021 14:14:01 -0700 (MST)
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <rmift1hwaqd.fsf@s1.lexort.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700> <rmift1hwaqd.fsf@s1.lexort.com>
Message-ID: <1614460441020-0.post@n6.nabble.com>

Greg Troxel-2 wrote
> Even Rouault &lt;

> even.rouault@

> &gt; writes:
> 
>> Can you transparently tell us why Grok is AGPL licensed ? Do you sell 
>> commercial licenses for people who couldn't comply with the AGPL license
>> ? 
> 
> Certainly a good question.  I have no idea in this case and my comments
> should not be taken to imply anything about this particular library

Hi,

I had a feeling that I have seen this discussion before. And indeed, I would
say it started in December, 2015 from this mail
https://lists.osgeo.org/pipermail/gdal-dev/2015-December/043296.html. There
are a few more threads to read in January, 2016, and the reason for AGPL was
announced in February 3rd 2016 in mail "Fork Yeah!"
https://lists.osgeo.org/pipermail/gdal-dev/2016-February/043649.html.

Aaron Boxer wrote:
"The code is licensed under the AGPL, to ensure that all code modifications
get contributed back to the community."

Later Aaron gave clear answers to some follow-up questions:

"> The use of AGPL means that your OpenJPEG fork will not be used for
> commercial projects and any enhancements you make will not make there way
> into OpenJPEG.
>
Correct.
>
> You may have a good reason for choosing this licence and as such it is
> your choice.
>
Yes.
>
> Either way good luck.
>
Thank you."


I do not know how much has changed during these five years. Grok is probably
better now but I think that JPEG2000 gives biggest benefits for medical
imaging and motion pictures which are both in a way volumetric, but codecs
compressing in 3D need to be even more sophisticated. With traditional GIS
imagery OpenJPEG is rather good nowadays if data producers play the same
game and do not create their images in the hardest possible way. But I
welcome the new driver if it will have a maintainer and if it does not mean
more pain for the main developers and users who do not need Grok.

-Jukka Rahkonen-






--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From kai.muehlbauer at uni-bonn.de  Sun Feb 28 02:26:11 2021
From: kai.muehlbauer at uni-bonn.de (=?UTF-8?Q?Kai_M=c3=bchlbauer?=)
Date: Sun, 28 Feb 2021 11:26:11 +0100
Subject: [gdal-dev] OGR Polygon Intersection
In-Reply-To: <CAC8Q8tKaMYvDK9ZskLettTxmVJU5vgcenyjubHPOzBkBaSrGWQ@mail.gmail.com>
References: <5ffe7479-8ee1-3ffe-a700-33a1a90c7806@uni-bonn.de>
 <CAC8Q8tKaMYvDK9ZskLettTxmVJU5vgcenyjubHPOzBkBaSrGWQ@mail.gmail.com>
Message-ID: <9b68c8f5-d953-3e14-89f2-c0a6e26259d6@uni-bonn.de>

Hi,

thanks Darafei, I've found the news on OverlayNG. Also thanks to Daniel 
Baston, who wrote me off list. Your help is very much appreciated.

So "normalize" would bring these polygons to their canonical form, which 
is coordinates in lexicographic order, right? I'll just add this to my 
testsuite.

@Even Rouault, I'd try adding "normalize" to GDAL OGR and python 
bindings, but my C/C++/SWIG knowledge might not be sufficient. If I'd 
try anyway, what should I read to prepare?

Cheers,
Kai


Am 27.02.21 um 19:11 schrieb Darafei "Kom?pa" Praliaskouski:
> Please use GEOSNormalize / ST_Normalize or other equivalents before 
> comparing geometries between?library versions. The starting point in the 
> ring can change because of different optimizations, and GEOS 3.9 was a 
> complete rewrite of the geometry?overlay subsystem.
> 
> On Sat, Feb 27, 2021 at 9:02 PM Kai M?hlbauer 
> <kai.muehlbauer at uni-bonn.de <mailto:kai.muehlbauer at uni-bonn.de>> wrote:
> 
>     Hi,
> 
>     this might be a silly problem or no problem at all, but I currently
>     can't wrap my head around it.
> 
>     I'm using python bindings of GDAL OGR with GEOS support for layer
>     intersection since several years now. Now suddenly my testsuit which
>     checks intersection of two boxes breaks since the intersecting box
>     starts now with a different starting point (all four points of the box
>     fit with the earlier tests).
> 
>     The change took place between versions GDAL 3.2.0 -> 3.2.1, GEOS 3.8.1
>     -> 3.9.1 and PROJ 7.1.1 -> 7.2.0. I've tried to find anything what
>     might
>     have changed in the release notes of GDAL and GEOS, but couldn't.
> 
>     So if anyone has a clue what's going on or what has changed and can
>     point me to the relevant resources, I would greatly appreciate it.
> 
>     Below you find the geometries I uses as JSON strings and the differing
>     intersection.
> 
>     src
>     '{ "type": "Polygon", "coordinates": [ [ [ 1.0, 1.0, 0.0 ], [ 1.0, 2.0,
>     0.0 ], [ 2.0, 2.0, 0.0 ], [ 2.0, 1.0, 0.0 ], [ 1.0, 1.0, 0.0 ] ] ] }'
> 
>     trg
>     '{ "type": "Polygon", "coordinates": [ [ [ 0.5, 0.5, 0.0 ], [ 0.5, 1.5,
>     0.0 ], [ 1.5, 1.5, 0.0 ], [ 1.5, 0.5, 0.0 ], [ 0.5, 0.5, 0.0 ] ] ] }'
> 
>     trg.Intersection(src) (GDAL 3.2.0, GEOS 3.8.1, PROJ 7.1.1)
>     '{ "type": "Polygon", "coordinates": [ [ [ 1.0, 1.5, 0.0 ], [ 1.5, 1.5,
>     0.0 ], [ 1.5, 1.0, 0.0 ], [ 1.0, 1.0, 0.0 ], [ 1.0, 1.5, 0.0 ] ] ] }'
> 
>     trg.Intersection(src) (GDAL 3.2.1, GEOS 3.9.1, PROJ 7.2.0)
>     '{ "type": "Polygon", "coordinates": [ [ [ 1.5, 1.5, 0.0 ], [ 1.5, 1.0,
>     0.0 ], [ 1.0, 1.0, 0.0 ], [ 1.0, 1.5, 0.0 ], [ 1.5, 1.5, 0.0 ] ] ] }'
> 
>     Thanks in advance!
> 
>     Cheers,
>     Kai
> 
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>     <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> 
> 
> 
> -- 
> Darafei "Kom?pa" Praliaskouski
> OSM BY Team - http://openstreetmap.by/ <http://openstreetmap.by/>


From even.rouault at spatialys.com  Sun Feb 28 02:53:32 2021
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 28 Feb 2021 11:53:32 +0100
Subject: [gdal-dev] OGR Polygon Intersection
In-Reply-To: <9b68c8f5-d953-3e14-89f2-c0a6e26259d6@uni-bonn.de>
References: <5ffe7479-8ee1-3ffe-a700-33a1a90c7806@uni-bonn.de>
 <CAC8Q8tKaMYvDK9ZskLettTxmVJU5vgcenyjubHPOzBkBaSrGWQ@mail.gmail.com>
 <9b68c8f5-d953-3e14-89f2-c0a6e26259d6@uni-bonn.de>
Message-ID: <6311233.U6WBRCQUqt@even-i700>

Kai,

> @Even Rouault, I'd try adding "normalize" to GDAL OGR and python
> bindings, but my C/C++/SWIG knowledge might not be sufficient. If I'd
> try anyway, what should I read to prepare?

You could take inspiration from
https://github.com/OSGeo/gdal/commit/29693f999fa9435ffcf1c4bdc2ffa2eeb3011b9c#diff-d9c0b533d9cd3d43ac618b93c999996ef17a58780dc6fbcf68bbffdf7e3c79ec

Even

-- 
http://www.spatialys.com

From boxerab at gmail.com  Sun Feb 28 05:38:47 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Sun, 28 Feb 2021 08:38:47 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <CACmBxysf3q2Y+N6yLVW4dMOR5PVAmb5N1_WukRVt6Nwy-KvppQ@mail.gmail.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <CACmBxysf3q2Y+N6yLVW4dMOR5PVAmb5N1_WukRVt6Nwy-KvppQ@mail.gmail.com>
Message-ID: <CAK8GPyCZt3tAsmhKNxL_xoYX+3wWB-NLL1KQqhjAUiFnCMDb4g@mail.gmail.com>

On Sat, Feb 27, 2021 at 1:18 PM Kurt Schwehr <schwehr at gmail.com> wrote:

> I can't touch grok... GNU Affero General Public License
>

No problem, this driver will be optional. The current commercial and open
source drivers are quite good.


>
> On Sat, Feb 27, 2021, 9:50 AM Aaron Boxer <boxerab at gmail.com> wrote:
>
>>  Hello Everyone,
>>
>> For those who aren?t aware, there is a pending PR for a new open source
>> JPEG 2000 driver, based on the Grok JPEG 2000 library
>>
>> https://github.com/OSGeo/gdal/pull/3449
>>
>> Notable Library Features:
>>
>> 1. support for reading TLM and PLT markers, for fast random access into
>> large tiled or single-tiled images
>>
>> 2. support for memory mapped files, which helps speed up random access
>> decode for large images
>>
>> 3. internal tile cache that allows efficient reading of multiple tiles
>> from single Grok codec object
>>
>> 4. support for new Part 15 of the JPEG 2000 standard (HTJ2K) which
>> promises up to **10x** speedup
>>
>> of encode and decode
>>
>>
>> Benchmarks:
>>
>> I haven't done a thorough comparison between Kakadu, Grok and OpenjPEG,
>> but here are a few results (more details in PR)
>>
>> 1. Compression: multi-tile
>>
>> Kakadu is 2X faster than Grok; Grok is 5X faster than OpenJPEG
>>
>> 2. Decompression: large single tile image with PLT markers
>>
>> Kakadu is 60% faster than Grok; Grok is 2.5x faster than OpenJPEG
>>
>> 3. Decompression: 4000x4000 sub-region of large single tile image with
>> PLT markers
>>
>> Kakadu is 40% faster than Grok; Grok is 5X faster than OpenJPEG
>>
>>
>> This year should see Grok reaching performance parity with Kakadu.
>>
>>
>> There is an RFC for the new driver, which is complete, and tested on a
>> few compression and decompression work flows.
>>
>>
>> Any comments or feedback is very welcome.
>>
>>
>> Cheers,
>>
>> Aaron
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210228/5fe93a70/attachment-0001.html>

From boxerab at gmail.com  Sun Feb 28 06:10:08 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Sun, 28 Feb 2021 09:10:08 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <1983050.Dg4OEfmRey@even-i700>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
Message-ID: <CAK8GPyAJ3WKg7pmDPLtVDAecvjnw05rNhz7MJ_Hz19oN-o4ecw@mail.gmail.com>

Hi Even,
Thanks. You have certainly made remarkable improvements to OpenJPEG,
especially
considering the amount of time you were able to spend on the code.

Regarding benchmarking, I totally agree, there are many many different
workflows and configurations.
I chose lossless compression/decompression for my few tests because there
is no quality vs. performance
tradeoffs to worry about, and decoder's can't really "cheat" - they have to
decode all the bits,
so the numbers give a fairly good idea of how the core routines perform. I
would be interested
in looking at some DIMAP 2 images, if there are any freely available.

For the promise of 10x improvement with HTJ2K, it's good to be skeptical :)
I see around 2X speed up with current unoptimized
OpenJPH implementation, which doesn't use SIMD or concurrency, so I don't
think it will be
hard to realize that promise. But, we'll have to see.

As for the scarcity of open source expertise along with JPEG 2000, I also
agree. But the bar to entry
isn't as high as it used to be - we have high-quality open source
implementations, so anyone
who wants to spend a few months, (or years :) ) reading and re-reading the
big blue JPEG 2000 book
and looking through the code is welcome to do so -it's not that tough. They
should then be able to contribute.
if they have the time and interest.

I chose AGPL in part because of my experience with OpenJPEG. The code was
neglected for
years under the current license, even by the project's sponsors, who had
the resources and expertise to
dramatically improve the code. I like AGPL because it enforces
contributions back to the project. Although,
to be honest, I've done 98% of the work on the library over the past 5
years. This is partly just the nature of open source,
especially for maddeningly complex standards like JPEG 2000. Many have
opinions but few are prepared to roll up their
sleeves and do the work.

I want to emphasize that this new driver would be completely optional - I
have absolutely no plans or interest in replacing the
OpenJPEG driver, or in changing the GDAL license, just for a single plugin.
If even 20% of the GDAL user base
can benefit from the better performance, I think it would be worthwhile. Of
course, this would require time from a GDAL
committer, so that's up to you or another committer to decide if it's worth
the time.

If this PR is approved I will probably get more involved with the project,
because I like to work on performance optimization
and geospatial work flows are challenging, so this is another reason
perhaps to consider saying yes to the merge :)

Cheers,
Aaron
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210228/f31b6a1c/attachment.html>

From nyall.dawson at gmail.com  Sun Feb 28 15:02:49 2021
From: nyall.dawson at gmail.com (Nyall Dawson)
Date: Mon, 1 Mar 2021 09:02:49 +1000
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <CAK8GPyAJ3WKg7pmDPLtVDAecvjnw05rNhz7MJ_Hz19oN-o4ecw@mail.gmail.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
 <CAK8GPyAJ3WKg7pmDPLtVDAecvjnw05rNhz7MJ_Hz19oN-o4ecw@mail.gmail.com>
Message-ID: <CAB28Asg9tsftvn2H3QgCCPwsKXePwuy+2oRF7ocCrMi-0rVwjg@mail.gmail.com>

Hi Aaron!

I'm honestly a little confused reading your reply, as it seems to
contradict itself:

> As for the scarcity of open source expertise along with JPEG 2000, I also agree. But the bar to entry
> isn't as high as it used to be - we have high-quality open source implementations, so anyone
> who wants to spend a few months, (or years :) ) reading and re-reading the big blue JPEG 2000 book
> and looking through the code is welcome to do so -it's not that tough. They should then be able to contribute.
> if they have the time and interest.

vs

> to be honest, I've done 98% of the work on the library over the past 5 years.
> This is partly just the nature of open source,
> especially for maddeningly complex standards like JPEG 2000. Many have opinions but few are prepared to roll up their
> sleeves and do the work.

Doesn't this clearly demonstrate that the available pool of developers
with the expertise required to work on JPEG2000 is extremely small,
and show the pressing need for a coordinated approach to JPEG 2000
development rather than further fragmentation?

Nyall

From boxerab at gmail.com  Sun Feb 28 15:55:50 2021
From: boxerab at gmail.com (Aaron Boxer)
Date: Sun, 28 Feb 2021 18:55:50 -0500
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <CAB28Asg9tsftvn2H3QgCCPwsKXePwuy+2oRF7ocCrMi-0rVwjg@mail.gmail.com>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
 <CAK8GPyAJ3WKg7pmDPLtVDAecvjnw05rNhz7MJ_Hz19oN-o4ecw@mail.gmail.com>
 <CAB28Asg9tsftvn2H3QgCCPwsKXePwuy+2oRF7ocCrMi-0rVwjg@mail.gmail.com>
Message-ID: <CAK8GPyDc+pBM180WzrhvvJ00EaK8V-kcjXm3z7aTbeL4K5yiwg@mail.gmail.com>

Hi Nyall,

Well, my point is that it's not terribly difficult to make a contribution,
but it does require some hard work,
which few are willing to expend. But, this isn't specific to JPEG 2000 -
it's the case for any FLOSS
project. The JPEG 2000 standard is difficult, but it can be grokked, if I
may use that expression, after
a few months of study and consulting with existing developers. I received
quite a bit of help from one
of the JPEG committee members when I was getting started, and I would be
happy to answer questions
about the standard, except none have been asked so far :)

Cheers,
Aaron




On Sun, Feb 28, 2021 at 6:03 PM Nyall Dawson <nyall.dawson at gmail.com> wrote:

> Hi Aaron!
>
> I'm honestly a little confused reading your reply, as it seems to
> contradict itself:
>
> > As for the scarcity of open source expertise along with JPEG 2000, I
> also agree. But the bar to entry
> > isn't as high as it used to be - we have high-quality open source
> implementations, so anyone
> > who wants to spend a few months, (or years :) ) reading and re-reading
> the big blue JPEG 2000 book
> > and looking through the code is welcome to do so -it's not that tough.
> They should then be able to contribute.
> > if they have the time and interest.
>
> vs
>
> > to be honest, I've done 98% of the work on the library over the past 5
> years.
> > This is partly just the nature of open source,
> > especially for maddeningly complex standards like JPEG 2000. Many have
> opinions but few are prepared to roll up their
> > sleeves and do the work.
>
> Doesn't this clearly demonstrate that the available pool of developers
> with the expertise required to work on JPEG2000 is extremely small,
> and show the pressing need for a coordinated approach to JPEG 2000
> development rather than further fragmentation?
>
> Nyall
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20210228/7ce91f39/attachment.html>

From bradh at frogmouth.net  Sun Feb 28 17:15:24 2021
From: bradh at frogmouth.net (Brad Hards)
Date: Mon, 1 Mar 2021 12:15:24 +1100
Subject: [gdal-dev] New JPEG 2000 Driver
In-Reply-To: <1983050.Dg4OEfmRey@even-i700>
References: <CAK8GPyCXBLf0PmAHbAKsK2MeG_3uA5z+4qboZ-8xvZdg8G0NjQ@mail.gmail.com>
 <1983050.Dg4OEfmRey@even-i700>
Message-ID: <00f201d70e38$5b573bc0$1205b340$@frogmouth.net>

I think this will be an interesting issue for the GDAL PMC.

On one hand, AGPL is no worse than some proprietary (optional) dependency libraries. On the other hand, supporting it in GDAL is
implicitly endorsing the fork, and adds to the proliferation of driver code in the GDAL/OGR repository. I think this could
reasonably be decided either way.

Brad



