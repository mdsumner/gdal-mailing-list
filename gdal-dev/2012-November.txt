From waelinsat at gmail.com  Thu Nov  1 03:34:21 2012
From: waelinsat at gmail.com (Wael Tarhouni)
Date: Thu, 1 Nov 2012 11:34:21 +0100
Subject: [gdal-dev] .tab to .mif with ogr2ogr
Message-ID: <CAPBhV0dFhaZuOHoSecZkP3vMuEKHmvZ511h+kGp7Ab_3FUSTJw@mail.gmail.com>

Hi All;

I'm tryin to convert a .tab file(Mapinfo) to a .mif file using the
following command :

ogr2ogr -f "MapInfo File" dst_datasource -dsco FORMAT=MIF src_datasource

but FWtools crashes !!

is there any problem with this command line ?

Best regards

-- 
Wael Tarhouni
?l?ve ing?nieur en R?seaux informatiques et T?lecommunication ? l'INSAT
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/6cca1a92/attachment.html>

From chaitanya.ch at gmail.com  Thu Nov  1 03:37:06 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 1 Nov 2012 16:07:06 +0530
Subject: [gdal-dev] .tab to .mif with ogr2ogr
In-Reply-To: <CAPBhV0dFhaZuOHoSecZkP3vMuEKHmvZ511h+kGp7Ab_3FUSTJw@mail.gmail.com>
References: <CAPBhV0dFhaZuOHoSecZkP3vMuEKHmvZ511h+kGp7Ab_3FUSTJw@mail.gmail.com>
Message-ID: <CAMKgpObx1Bmcqkz0Lq6-=_SQyAsPoxQ78KMSNybFm1DoByfNpA@mail.gmail.com>

Wael,

Can you give more details like the version of GDAL you are using and an
output of ogrinfo of the source?
(Use "ogr2ogr --version")

On Thu, Nov 1, 2012 at 4:04 PM, Wael Tarhouni <waelinsat at gmail.com> wrote:

> Hi All;
>
> I'm tryin to convert a .tab file(Mapinfo) to a .mif file using the
> following command :
>
> ogr2ogr -f "MapInfo File" dst_datasource -dsco FORMAT=MIF src_datasource
>
> but FWtools crashes !!
>
> is there any problem with this command line ?
>
> Best regards
>
> --
> Wael Tarhouni
> ?l?ve ing?nieur en R?seaux informatiques et T?lecommunication ? l'INSAT
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/15d11b7c/attachment.html>

From waelinsat at gmail.com  Thu Nov  1 03:48:19 2012
From: waelinsat at gmail.com (Wael Tarhouni)
Date: Thu, 1 Nov 2012 11:48:19 +0100
Subject: [gdal-dev] .tab to .mif with ogr2ogr
In-Reply-To: <CAPBhV0eUFVjHSutX3USqBV=BA6R9vjUhjA8hGwnmrn_2qxZUsg@mail.gmail.com>
References: <CAPBhV0dFhaZuOHoSecZkP3vMuEKHmvZ511h+kGp7Ab_3FUSTJw@mail.gmail.com>
	<CAMKgpObx1Bmcqkz0Lq6-=_SQyAsPoxQ78KMSNybFm1DoByfNpA@mail.gmail.com>
	<CAPBhV0eUFVjHSutX3USqBV=BA6R9vjUhjA8hGwnmrn_2qxZUsg@mail.gmail.com>
Message-ID: <CAPBhV0cgMOFYfcPV+sjHXs1vvv1FgAP0dmKNV0h=XfrGt4sbGw@mail.gmail.com>

Chaitanya,

GDAL's version is 1.7.0b2 and FWTools's version is 2.4.7;

Regards

2012/11/1 Wael Tarhouni <waelinsat at gmail.com>

> Chaitanya,
>
> GDAL's version is 1.7.0b2 and FWTools's version is 2.4.7;
>
> Regards
>
>
> 2012/11/1 Chaitanya kumar CH <chaitanya.ch at gmail.com>
>
>> Wael,
>>
>> Can you give more details like the version of GDAL you are using and an
>> output of ogrinfo of the source?
>> (Use "ogr2ogr --version")
>>
>> On Thu, Nov 1, 2012 at 4:04 PM, Wael Tarhouni <waelinsat at gmail.com>wrote:
>>
>>> Hi All;
>>>
>>> I'm tryin to convert a .tab file(Mapinfo) to a .mif file using the
>>> following command :
>>>
>>> ogr2ogr -f "MapInfo File" dst_datasource -dsco FORMAT=MIF src_datasource
>>>
>>> but FWtools crashes !!
>>>
>>> is there any problem with this command line ?
>>>
>>> Best regards
>>>
>>> --
>>> Wael Tarhouni
>>> ?l?ve ing?nieur en R?seaux informatiques et T?lecommunication ? l'INSAT
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Wael Tarhouni
> ?l?ve ing?nieur en R?seaux informatiques et T?lecommunication ? l'INSAT
>
>


-- 
Wael Tarhouni
?l?ve ing?nieur en R?seaux informatiques et T?lecommunication ? l'INSAT
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/535dddc6/attachment.html>

From lhomme.xavier at gmail.com  Thu Nov  1 03:54:31 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Thu, 1 Nov 2012 11:54:31 +0100
Subject: [gdal-dev] .tab to .mif with ogr2ogr
In-Reply-To: <CAPBhV0cgMOFYfcPV+sjHXs1vvv1FgAP0dmKNV0h=XfrGt4sbGw@mail.gmail.com>
References: <CAPBhV0dFhaZuOHoSecZkP3vMuEKHmvZ511h+kGp7Ab_3FUSTJw@mail.gmail.com>
	<CAMKgpObx1Bmcqkz0Lq6-=_SQyAsPoxQ78KMSNybFm1DoByfNpA@mail.gmail.com>
	<CAPBhV0eUFVjHSutX3USqBV=BA6R9vjUhjA8hGwnmrn_2qxZUsg@mail.gmail.com>
	<CAPBhV0cgMOFYfcPV+sjHXs1vvv1FgAP0dmKNV0h=XfrGt4sbGw@mail.gmail.com>
Message-ID: <CACqzBMx=B++8p4Zv-pekue966sPRQhqYwns5NsNJk0dCc-+Rvg@mail.gmail.com>

It works fine for me with GDAL 1.9.1.The issus coud be depends on the
version you used or the datasource.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/136323aa/attachment.html>

From hiebert at uvic.ca  Thu Nov  1 11:41:04 2012
From: hiebert at uvic.ca (James Hiebert)
Date: Thu, 1 Nov 2012 11:41:04 -0700
Subject: [gdal-dev] python CreateFeature() error when converting OGR
 features from gpsbabel layer to PostGIS layer
Message-ID: <20121101184103.GA32435@basalt.uvic.ca>

Hi All,

For months I've been happily pulling GPS tracks into PostGIS using ogr in a pretty simple python script.  The essence of it approximately this:

rlyr = ogr.Open(gpsbabel_src).GetLayerByName('tracks')
wlyr = ogr.Open(pg_con_string).GetLayerByName('tracks')

fid_map = {}

for feat in rlyr:
    fFID = feat.GetFID()
    feat.SetFID(-1)
    rv = wlyr.CreateFeature(feat)
    fid_map[fFID] = feat.GetFID()

It had been working great until the other day when I added another field (start_time timestamp with time zone) to the 'tracks' table in the database.  Oddly, with this new field in the destination layer, the call to CreateFeature() fails.  Looking into the PG query log, I see that ogr is making a curious choice of insertion fields.  The INSERT statement is:

INSERT INTO "tracks" ("wkb_geometry" , "name", "number", "start_time") VALUES ('<geometry text>'::GEOMETRY, '279', 15, 'MULTILINESTRING') RETURNING "ogc_fid"

Note that the last field in the insert statement says "start_time" and it's trying to insert 'MULTILINESTRING' in the field.  The source layer doesn't have any fields named start_time, so I'm not even sure why CreateFeature() would try to insert something for it, and it certainly doesn't have anything to do with the geometry type.

FWIW, ogr2ogr appears to do the right thing and only uses fields ("wkb_geometry" , "name", "number"), but it doesn't meet my needs for a number of other reasons.  Is this a bug in the python bindings for CreateFeature()?  Or are there any other leads that I should follow?  I'm using GDAL 1.9.1.

Thanks in advance for any help that can be offered.

~James

From feumar at shaw.ca  Thu Nov  1 12:19:06 2012
From: feumar at shaw.ca (Martin Feuchtwanger)
Date: Thu, 01 Nov 2012 12:19:06 -0700
Subject: [gdal-dev] problem converting a FileGDB to PostGIS using ogr2ogr
Message-ID: <5092CB2A.4050404@shaw.ca>

Hello, i'm new to PostGIS and OSGeo. I have a problem converting a 
FileGDB to PostGIS using ogr2ogr.

First some background on what i've done:

Installed OpenGeo Suite Enterprise Edition 3.0 to c:\Program Files 
(x86)\OpenGeo\OpenGeo Suite\

Did the Introduction to PostGIS tutorial at 
http://workshops.opengeo.org/postgis-intro/

Downloaded OSGeo4W from http://trac.osgeo.org/osgeo4w

Installed via "Advanced install" (to also include) the "ogr2ogr" tool to 
c:\OSGeo4W\

Downloded test_fgdb.gdb.zip -- a test GDB file (created with ArcGIS ver 
10) by Michael Smith from 
http://12.189.158.78:8081/downloads/test_fgdb.gdb.zip
(http://lists.osgeo.org/pipermail/gdal-dev/2011-April/028391.html)

Unpacked the GDB file to c:\Users\Martin\Documents\test.gdb\

Now here's the problem:

Using OSGeo4W shell command
*    c:\OSGeo4W\bin\ogr2ogr -f "PostgreSQL" PG:"dbname=test 
user=postgres" c:\Users\Martin\Documents\test.gdb*
i got
     ERROR 1: PQconnectdb failed.
     could not connect to server: Connection refused (0x0000274D/10061)
             Is the server running on host "???" and accepting
             TCP/IP connections on port 5432?

     ERROR 1: PostgreSQL driver doesn't currently support database creation.
     Please create database with the `createdb' command.
     PostgreSQL driver failed to create PG:dbname=test user=postgres

I get the same error messages whether or not i've already created a test 
database via pgAdminIII.
What do i need to do?

I remember having to append a '1' to the port "5432" when using 
pgAdminIII but know very little of hosts, servers and ports.

I notice that psql.exe is in two places (and two v. different versions):
*    c:\Program Files (x86)\OpenGeo\OpenGeo Suite\**
**     pgsql\9.1\bin\psql.exe    419,328 31/05/2012**
*and
*    c:\OSGeo4W\bin\psql.exe    299,008    11/03/2010**
*Would that be an issue?

Any help would be very much appreciated -- even if only a pointer to a 
better place to ask the question.

-- 
Martin Feuchtwanger  feumar at shaw.ca  604-254-0361
Vancouver, BC  members.shaw.ca/geomatics.developer

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/26cf5270/attachment.html>

From Konstantin.Baumann at autodesk.com  Thu Nov  1 12:32:47 2012
From: Konstantin.Baumann at autodesk.com (Konstantin Baumann)
Date: Thu, 1 Nov 2012 19:32:47 +0000
Subject: [gdal-dev] state of RFC #26 adoption?
Message-ID: <CE66632AE1610940A559DB5756F262AB09525F69@005-TK5MPN1-012.MGDADSK.autodesk.com>

Hi all,

what is the current state of the adoption and implementation of RFC #26 (http://trac.osgeo.org/gdal/wiki/rfc26_blockcache)? Are there any plans to finalize the development for it?

-Konstantin

From jukka.rahkonen at mmmtike.fi  Thu Nov  1 12:40:31 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 1 Nov 2012 19:40:31 +0000 (UTC)
Subject: [gdal-dev] problem converting a FileGDB to PostGIS using ogr2ogr
References: <5092CB2A.4050404@shaw.ca>
Message-ID: <loom.20121101T203622-324@post.gmane.org>

Martin Feuchtwanger <feumar <at> shaw.ca> writes:


>     Using OSGeo4W shell command??? c:\OSGeo4W\bin\ogr2ogr -f "PostgreSQL"
PG:"dbname=test
>         user=postgres" c:\Users\Martin\Documents\test.gdb
>     i got
>     ??? ERROR 1: PQconnectdb failed.
>     ??? could not connect to server: Connection refused
>     (0x0000274D/10061)
>     ??? ??? ??? Is the server running on host "???" and accepting
>     ??? ??? ??? TCP/IP connections on port 5432?

It probably means what it says. OpenGeo suite installs it's own PostgreSQL and
it is listening port 54321 instead of the default port 5432. At least this
document claims so:
http://dev.horizon.opengeo.org/opengeo-docs/installation/windows/index.html



-Jukka Rahkonen-


From even.rouault at mines-paris.org  Thu Nov  1 12:58:10 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 01 Nov 2012 20:58:10 +0100
Subject: [gdal-dev] python CreateFeature() error when converting OGR
	features from gpsbabel layer to PostGIS layer
In-Reply-To: <20121101184103.GA32435@basalt.uvic.ca>
References: <20121101184103.GA32435@basalt.uvic.ca>
Message-ID: <1351799890.5092d452754e1@imp.free.fr>

Selon James Hiebert <hiebert at uvic.ca>:

> Hi All,
>
> For months I've been happily pulling GPS tracks into PostGIS using ogr in a
> pretty simple python script.  The essence of it approximately this:
>
> rlyr = ogr.Open(gpsbabel_src).GetLayerByName('tracks')
> wlyr = ogr.Open(pg_con_string).GetLayerByName('tracks')
>
> fid_map = {}
>
> for feat in rlyr:
>     fFID = feat.GetFID()
>     feat.SetFID(-1)

The error is there. It is illegal to call CreateFeature() on layer wlyr directly
with a feature from layer rlyr. You need to instanciate a feature with the layer
definition of layer wlyr, and copy the fields from the source feature into it

      src_feat = feat
      feat = ogr.Feature(wlyr.GetLayerDefn())
      feat.SetFrom(src_feat)

>     rv = wlyr.CreateFeature(feat)
>     fid_map[fFID] = feat.GetFID()
>

From warmerdam at pobox.com  Thu Nov  1 13:09:44 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 1 Nov 2012 13:09:44 -0700
Subject: [gdal-dev] state of RFC #26 adoption?
In-Reply-To: <CE66632AE1610940A559DB5756F262AB09525F69@005-TK5MPN1-012.MGDADSK.autodesk.com>
References: <CE66632AE1610940A559DB5756F262AB09525F69@005-TK5MPN1-012.MGDADSK.autodesk.com>
Message-ID: <CA+YzLBd3-yjfU7QtOhMuo5akqRafaFfoqKvdgjuLO4ivhy7HUw@mail.gmail.com>

Konstantin,

It does not appear that the RFC was brought up for vote, or the patch
applied.  Possibly Tamas can comment further.

Best regards,
Frank

On Thu, Nov 1, 2012 at 12:32 PM, Konstantin Baumann <
Konstantin.Baumann at autodesk.com> wrote:

> Hi all,
>
> what is the current state of the adoption and implementation of RFC #26 (
> http://trac.osgeo.org/gdal/wiki/rfc26_blockcache)? Are there any plans to
> finalize the development for it?
>
> -Konstantin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/9933e8a3/attachment.html>

From szekerest at gmail.com  Thu Nov  1 14:08:44 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu, 1 Nov 2012 22:08:44 +0100
Subject: [gdal-dev] state of RFC #26 adoption?
In-Reply-To: <CE66632AE1610940A559DB5756F262AB09525F69@005-TK5MPN1-012.MGDADSK.autodesk.com>
References: <CE66632AE1610940A559DB5756F262AB09525F69@005-TK5MPN1-012.MGDADSK.autodesk.com>
Message-ID: <CACALY+QhR0Wy0R=Mr4wm8ypktF1tqnjHUHKVpkWMxTJzNCctQg@mail.gmail.com>

Hi Konstantin,

As far as I remember, I'd require some further testing efforts to make sure
the code is feasible in all conditions. This RFC targets a fairly
substantial part of the code, that should be handled with care. But the
client who required this fix (with the intent to fix problems addressing
TMS tiles at large zoom levels) went ahead with another solution to the
problem, so this addition has become quite neglected.

Did you run into a similar issue, which would also validate this change?

Best regards,

Tamas




2012/11/1 Konstantin Baumann <Konstantin.Baumann at autodesk.com>

> Hi all,
>
> what is the current state of the adoption and implementation of RFC #26 (
> http://trac.osgeo.org/gdal/wiki/rfc26_blockcache)? Are there any plans to
> finalize the development for it?
>
> -Konstantin
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/cca1d99a/attachment.html>

From miroslav.karpis at gmail.com  Thu Nov  1 15:11:38 2012
From: miroslav.karpis at gmail.com (Miroslav Karpis)
Date: Thu, 1 Nov 2012 23:11:38 +0100
Subject: [gdal-dev] DGN File with 10 layers recognized in OGR only 1 layer +
	DGN to SVG converter
Message-ID: <EF801106-7007-4C6A-8885-96514EF9405D@gmail.com>

Hi, please can you help me with following:

1) When I open DGN file which has for example 10 layers,  OGRDataSource::GetLayerCont () returns 1. What can be the problem? The documentation says that OGR DGN is supporting layers.

2) Does anybody know about an example of conversion from DGN to SVG?


Any feedback more than welcome ;-)

m.

From warmerdam at pobox.com  Thu Nov  1 15:18:06 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 1 Nov 2012 15:18:06 -0700
Subject: [gdal-dev] DGN File with 10 layers recognized in OGR only 1
 layer + DGN to SVG converter
In-Reply-To: <EF801106-7007-4C6A-8885-96514EF9405D@gmail.com>
References: <EF801106-7007-4C6A-8885-96514EF9405D@gmail.com>
Message-ID: <CA+YzLBc_B4TpY9aKs0RMg-CsKqUz0x3c6-Ry=eKhReamQzOLdQ@mail.gmail.com>

On Thu, Nov 1, 2012 at 3:11 PM, Miroslav Karpis
<miroslav.karpis at gmail.com>wrote:

> Hi, please can you help me with following:
>
> 1) When I open DGN file which has for example 10 layers,
>  OGRDataSource::GetLayerCont () returns 1. What can be the problem? The
> documentation says that OGR DGN is supporting layers.
>

Miroslav,

DGN layers are represented as an attribute in the features of the single
OGR layer.  I think the attribute is called LAYER.

Because of the way the dgn file is structured it would be hard to represent
the DGN layers as OGR layers efficiently.  Also, since all features have
the same schema there was relatively little value in keeping them as
distinct layers.


> 2) Does anybody know about an example of conversion from DGN to SVG?
>

I think MapServer has some sort of SVG support and given that MapServer has
at least some degree of "autostyling" available from OGR DGN it might
capture some of the look and feel of the original DGN.

I doubt this is a well trod route.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/c2d64ed5/attachment.html>

From noonslists+gdal at gmail.com  Thu Nov  1 15:30:16 2012
From: noonslists+gdal at gmail.com (Noon Silk)
Date: Fri, 2 Nov 2012 09:30:16 +1100
Subject: [gdal-dev] Ogr and Dwg via Teigha (in C#)
In-Reply-To: <CACALY+TfZRR2Rq358bqFHQtsqJLSfTxyYUPM_4U4ifeGzZaNMw@mail.gmail.com>
References: <CADt_azZ1n2SoQmgrhrbYsPxUX57JGvBCbosjx76xzZp9jvgeCQ@mail.gmail.com>
	<CACALY+Rx3XcqsrmGRseXFK-qnscxdqPPN7axZOspf2B07kTo4A@mail.gmail.com>
	<CADt_azadkw7vg20xOpCRRy6HvEk6YBDJefY-zr3S3XEvap8fRw@mail.gmail.com>
	<CADt_azZghV5zx+kX2LcW-3nuOD71zDcy2vY0k_7AGE4AMWRy9Q@mail.gmail.com>
	<CACALY+Q8N5bCTA7hu_KCysGfusJfP5mB5rkDjRqGJBJ8-zh0gQ@mail.gmail.com>
	<CADt_azaptvg17NaSUpWxGgBVpQW2Wt+fBPT5-e_HUOgnS1J3xA@mail.gmail.com>
	<CACALY+TfZRR2Rq358bqFHQtsqJLSfTxyYUPM_4U4ifeGzZaNMw@mail.gmail.com>
Message-ID: <CADt_azYspnZOT4vg096VyXhgRFvDLQAuJLVPX23a_i+9J81cew@mail.gmail.com>

On Mon, Oct 29, 2012 at 11:34 PM, Tamas Szekeres <szekerest at gmail.com> wrote:
> You might also take a look at the -dev packages at
> http://www.gisinternals.com/sdk/
> The compilation is controlled by a single makefile, so you can use:
>
> nmake gdal
> nmake gdal-csharp

Thanks; I happened to grab the "MSVC2005 (Win64) -development", which
doesn't have that ..., I'll give this a go.


> to achieve the desired result.
>
> Best regards,
>
> Tamas

--
Noon

From giuseppe.amatulli at gmail.com  Thu Nov  1 16:23:01 2012
From: giuseppe.amatulli at gmail.com (Giuseppe Amatulli)
Date: Thu, 1 Nov 2012 18:23:01 -0500
Subject: [gdal-dev] Introduction to WELD Products Using Open Source Software
Message-ID: <CAKoiDHJhkvSc2G1ThqtzEUVWvTUHGS-Xbb1AsJW0ppBN4T35pA@mail.gmail.com>

Hi,
at AGU FALL MEETING San Francisco 3-7 December 2012 [1] there will be a
course in:

Introduction to the Web-Enabled Landsat Data (WELD) Products Using Open
Source Software [2]

During the workshop we will go through same material stored at
http://www.spatial-ecology.net  plus a
specific exercise using WELD [3] data by means of  PKTOOLS [4] Open Foris
Geospatial Toolkit [5] and R

The course is "Open to all" so free of charge. Please visit [2] for more
information

Best Regards
Giuseppe Amatulli

[1] http://fallmeeting.agu.org/2012/
[2]
http://fallmeeting.agu.org/2012/events/introduction-to-the-web-enabled-landsat-data-weld-products-using-open-source-software
[3] http://weld.cr.usgs.gov/
[4] http://www.spatial-ecology.net/dokuwiki/doku.php?id=wiki:pk_tools

[5] http://km.fao.org/OFwiki/index.php/Open_Foris_Toolkit
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/4838d8dc/attachment.html>

From SpethM at landcareresearch.co.nz  Thu Nov  1 18:01:26 2012
From: SpethM at landcareresearch.co.nz (Michael Speth)
Date: Fri, 2 Nov 2012 01:01:26 +0000
Subject: [gdal-dev]  Selecting Python during configuration
Message-ID: <B470B3CC1E1F374CB34E6AF6B386834702ED6B@HERMES.landcare.ad.landcareresearch.co.nz>

Greetings,
  I am attempting to compile gdal with python support.  However, I don't want to use the system installed python; I want to use a locally compiled version of python.  I am unable to find how to select the python version to use with the gdal install.

It seems that --with-python doesn't have an option to set the python install directory; --with-hdf5 can set the install directory of hdf5.

Is there a way to set gdal to point to a different install directory for python?

If not, how does gdal find the path to python?  Is it possible to set an environment variable (I am compiling on GNU/Linux)?

Thanks

--
Michael Speth
Research Systems Developer
Landcare Research

________________________________

Please consider the environment before printing this email
Warning: This electronic message together with any attachments is confidential. If you receive it in error: (i) you must not read, use, disclose, copy or retain it; (ii) please contact the sender immediately by reply email and then delete the emails.
The views expressed in this email may not be those of Landcare Research New Zealand Limited. http://www.landcareresearch.co.nz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121102/38ee5eb2/attachment.html>

From chuck at sharpsteen.net  Thu Nov  1 18:55:55 2012
From: chuck at sharpsteen.net (Charlie Sharpsteen)
Date: Thu, 1 Nov 2012 18:55:55 -0700
Subject: [gdal-dev] Selecting Python during configuration
In-Reply-To: <B470B3CC1E1F374CB34E6AF6B386834702ED6B@HERMES.landcare.ad.landcareresearch.co.nz>
References: <B470B3CC1E1F374CB34E6AF6B386834702ED6B@HERMES.landcare.ad.landcareresearch.co.nz>
Message-ID: <CAMEX5syh6rEJe8QVfxxUKd+4KfuqO87sAZBfmFGmZgoESGuCNw@mail.gmail.com>

On Thu, Nov 1, 2012 at 6:01 PM, Michael Speth <SpethM at landcareresearch.co.nz
> wrote:

>  Greetings,
>
>   I am attempting to compile gdal with python support.  However, I don't
> want to use the system installed python; I want to use a locally compiled
> version of python.  I am unable to find how to select the python version to
> use with the gdal install.
>
>
>
> It seems that --with-python doesn't have an option to set the python
> install directory; --with-hdf5 can set the install directory of hdf5.
>
>
>
> Is there a way to set gdal to point to a different install directory for
> python?
>

One strategy is to configure and build `--without-python`, then after
running `make` and `make install`, do the following:

    cd swig/python
    /path/to/desired/python setup.py install_lib
[--install-dir=/optional/site-packages/dir/if/you/dont/like/the/default]
    cp scripts/* /some/bin/folder/on/your/PATH

-Charlie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121101/1721e016/attachment.html>

From hiebert at uvic.ca  Thu Nov  1 22:09:50 2012
From: hiebert at uvic.ca (James Hiebert)
Date: Thu, 1 Nov 2012 22:09:50 -0700
Subject: [gdal-dev] Selecting Python during configuration
In-Reply-To: <B470B3CC1E1F374CB34E6AF6B386834702ED6B@HERMES.landcare.ad.landcareresearch.co.nz>
References: <B470B3CC1E1F374CB34E6AF6B386834702ED6B@HERMES.landcare.ad.landcareresearch.co.nz>
Message-ID: <20121102050947.GB17774@granite>

Michael,

--with-python sets the path to the python binary that you want to use and while that may not intuitively seem like it sets the install path, it actually does.  If you have multiple separate python binaries installed on the system (e.g. from using virtualenv), generally each one of them has their own separate site-packages directory and when you tell configure which binary you want to use, the binary tells configure where to find the appropriate site-packages directory and where to install gdal.

I did a quick example run of this, just to make sure that I'm right and the workflow is something like this:

1) Setup your separate python binary with virtualenv (or by some other means)

james at granite:~$ virtualenv python-alt
New python executable in python-alt/bin/python
Installing distribute.............................................................................................................................................................................................done.
Installing pip...............done.

2a) At this point you might be able to use pip to download/build/install gdal (you just may not have as much control over the build process)

james at granite:~$ ./python-alt/bin/pip install gdal
Downloading/unpacking gdal
  Downloading GDAL-1.9.1.tar.gz (420Kb): 420Kb downloaded
  Running setup.py egg_info for package gdal
    
Installing collected packages: gdal
  Running setup.py install for gdal
    building 'osgeo._gdal' extension

...

Successfully installed gdal
Cleaning up...
james at granite:~$ ./python-alt/bin/python
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
>>> gdal.__file__
'/home/james/python-alt/local/lib/python2.7/site-packages/gdal.pyc'
>>>

2b) Or you can build from the subversion repo

james at granite:~/code/svn/gdal$ ./configure --with-python=$HOME/python-alt/bin/python --prefix=$HOME
...
james at granite:~/code/svn/gdal$ make
...
james at granite:~/code/svn/gdal$ make install
...

At this point you should have all of the gdal goodies in your python install:

james at granite:~/code/svn/gdal$ ls ~/python-alt/local/lib/python2.7/site-packages/GDAL-2.0.0-py2.7-linux-i686.egg/
EGG-INFO  gdalconst.py  gdalconst.pyc  gdal.py  gdal.pyc  ogr.py  ogr.pyc  osgeo  osr.py  osr.pyc

james at granite:~/code/svn/gdal$ ls ~/python-alt/local/lib/python2.7/site-packages/GDAL-2.0.0-py2.7-linux-i686.egg/osgeo/
gdal_array.py   _gdalconst.pyc  gdalnumeric.pyc  gdal.pyc      _ogr.py   _ogr.so   osr.pyc
gdal_array.pyc  gdalconst.pyc   _gdal.py         _gdal.so      ogr.py    _osr.py   _osr.so
_gdalconst.py   _gdalconst.so   gdal.py          __init__.py   _ogr.pyc  osr.py
gdalconst.py    gdalnumeric.py  _gdal.pyc        __init__.pyc  ogr.pyc   _osr.pyc

...and you should be able to load the gdal module.

james at granite:~/code/svn/gdal$ ~/python-alt/bin/python
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from osgeo import gdal
>>> gdal.__file__
'/home/james/python-alt/local/lib/python2.7/site-packages/GDAL-2.0.0-py2.7-linux-i686.egg/osgeo/gdal.pyc'

Hope that helps.

~James

On Fri, Nov 02, 2012 at 01:01:26AM +0000, Michael Speth wrote:
> Greetings,
> 
>   I am attempting to compile gdal with python support.  However, I don't want
> to use the system installed python; I want to use a locally compiled version of
> python.  I am unable to find how to select the python version to use with the
> gdal install.
> 
>  
> 
> It seems that --with-python doesn't have an option to set the python install
> directory; --with-hdf5 can set the install directory of hdf5.
> 
>  
> 
> Is there a way to set gdal to point to a different install directory for
> python?
> 
>  
> 
> If not, how does gdal find the path to python?  Is it possible to set an
> environment variable (I am compiling on GNU/Linux)?
> 
>  
> 
> Thanks
> 
>  
> 
> --
> 
> Michael Speth
> 
> Research Systems Developer
> 
> Landcare Research
> 
> 
> ???????????????????????????????????????????????????????????????????????????????
> 
> Please consider the environment before printing this email
> Warning: This electronic message together with any attachments is confidential.
> If you receive it in error: (i) you must not read, use, disclose, copy or
> retain it; (ii) please contact the sender immediately by reply email and then
> delete the emails.
> The views expressed in this email may not be those of Landcare Research New
> Zealand Limited. http://www.landcareresearch.co.nz

> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at mmmtike.fi  Fri Nov  2 01:15:42 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 2 Nov 2012 08:15:42 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?ORA-01406_error_when_reading_many_attributes?=
	=?utf-8?q?_from=09Oracle_=5BSOLVED=5D?=
References: <loom.20121016T155734-667@post.gmane.org>
	<CACqBkM-kDmff-82=R5ASsnrADJ2CrrPpz+qwf8bwJSEobu_cDA@mail.gmail.com>
	<loom.20121017T101218-564@post.gmane.org>
	<loom.20121017T121144-791@post.gmane.org>
Message-ID: <loom.20121102T083621-986@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

> 
> Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
> 
> > I suspect that the reason for the trouble is that this field is a
> > 17 character wide VARCHAR2 and I have in the data values like
> > "?VRE S?DERG?RDAN ". Database is using UTF-8 and ?,? and ? are
> > taking more than one byte each. Perhaps OCI driver develops come
> > from some ASCII country and did not bother to think about Oracle's
> > character and byte semantics throughly. It seems somehow fuzzy for
> > me even after reading this article
> > http://myorastuff.blogspot.fi/2009/02/character-and-byte-
> > semantics-in-oracle.html
> 
> I can repeat the error with a minimal one-row test table having a field
> NAME VARCHAR2(6)
> and value ??????


I was following a wrong track and I think I need to add one more mail to t
his thread if someone happens to read it later.

I had discoved earlier with the trial and error method that I could write
"??????" characters into this Oracle database right with ogr2ogr by setting
the Windows environment variable as SET NLS_LANG=finnish_finland.utf-8

That made me think that it was the correct setting and good to be used 
also for reading data with ogr2ogr. That was not the case.

The correct NLS_LANG for the database is really "finnish_finland.ISO8859-P15"
By setting the environment to use that ogr2ogr is reading all the data from 
Oracle. However, I must do the character encoding conversion as another 
process because ogr2ogr cannot handle it.  

This means that I am totally happy because I have not found any way yet 
to make ogr2ogr to write the non-ASCII characters for example into Spatialite 
correctly. Direct writing leads to carbage in the Spatialite db. Somehow 
usable workaround is to write a temporary GML file first by using 
--config ORG_FORCE_ASCII=NO. By doing this the resulting GML file will 
be in ISO-8859-15. However, ogr2ogr writes always into the first line of 
GML files that the character encoding is UTF-8. That must be corrected 
by hand for making a valid GML file which can then be converted correctly 
into Spatialite. Not a big deal really but some of the resulting GML 
files are 2-3 GB in size and plain opening and saving the file takes 
some time. While wasting time for this I have been thinking about two options:
- For writing out GML user could have an option to set the character 
  encoding manually
- For reading GML user could give an option to treat the encoding as 
  something else than what the file itself is advertising.
However, I think that the real solution would be to have some common OGR 
wide way to handle character encodings and conversions instead of different 
implementations for each driver.

-Jukka Rahkonen-






From miroslav.karpis at gmail.com  Fri Nov  2 01:33:56 2012
From: miroslav.karpis at gmail.com (Miro Karpis)
Date: Fri, 2 Nov 2012 09:33:56 +0100
Subject: [gdal-dev] DGN File with 10 layers recognized in OGR only 1
 layer + DGN to SVG converter
In-Reply-To: <CA+YzLBc_B4TpY9aKs0RMg-CsKqUz0x3c6-Ry=eKhReamQzOLdQ@mail.gmail.com>
References: <EF801106-7007-4C6A-8885-96514EF9405D@gmail.com>
	<CA+YzLBc_B4TpY9aKs0RMg-CsKqUz0x3c6-Ry=eKhReamQzOLdQ@mail.gmail.com>
Message-ID: <CAJnnbxGpAg9hcWX9CeKrcbZisu5B1nB3OEFzDFk=AMmcjb8a0g@mail.gmail.com>

Thanks for the info Frank.So if I understand it correctly than class
OGRFeature should have one method that should give me value of attribute
called 'LAYER' (or similar). Please what is the method called - I can not
see it in the documentation?

thanks again.



On Thu, Nov 1, 2012 at 11:18 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:

>
>
> On Thu, Nov 1, 2012 at 3:11 PM, Miroslav Karpis <miroslav.karpis at gmail.com
> > wrote:
>
>> Hi, please can you help me with following:
>>
>> 1) When I open DGN file which has for example 10 layers,
>>  OGRDataSource::GetLayerCont () returns 1. What can be the problem? The
>> documentation says that OGR DGN is supporting layers.
>>
>
> Miroslav,
>
> DGN layers are represented as an attribute in the features of the single
> OGR layer.  I think the attribute is called LAYER.
>
> Because of the way the dgn file is structured it would be hard to
> represent the DGN layers as OGR layers efficiently.  Also, since all
> features have the same schema there was relatively little value in keeping
> them as distinct layers.
>
>
>> 2) Does anybody know about an example of conversion from DGN to SVG?
>>
>
> I think MapServer has some sort of SVG support and given that MapServer
> has at least some degree of "autostyling" available from OGR DGN it might
> capture some of the look and feel of the original DGN.
>
> I doubt this is a well trod route.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121102/034e466d/attachment.html>

From miroslav.karpis at gmail.com  Fri Nov  2 01:51:24 2012
From: miroslav.karpis at gmail.com (Miro Karpis)
Date: Fri, 2 Nov 2012 09:51:24 +0100
Subject: [gdal-dev] DGN File with 10 layers recognized in OGR only 1
 layer + DGN to SVG converter
In-Reply-To: <CAJnnbxGpAg9hcWX9CeKrcbZisu5B1nB3OEFzDFk=AMmcjb8a0g@mail.gmail.com>
References: <EF801106-7007-4C6A-8885-96514EF9405D@gmail.com>
	<CA+YzLBc_B4TpY9aKs0RMg-CsKqUz0x3c6-Ry=eKhReamQzOLdQ@mail.gmail.com>
	<CAJnnbxGpAg9hcWX9CeKrcbZisu5B1nB3OEFzDFk=AMmcjb8a0g@mail.gmail.com>
Message-ID: <CAJnnbxETztTpfaBAZ3di4YZHtPC++LPHjXNftA0dXn9phc+RXw@mail.gmail.com>

found it: OGRFieldDefn::GetNameRef

excellent ;-)



On Fri, Nov 2, 2012 at 9:33 AM, Miro Karpis <miroslav.karpis at gmail.com>wrote:

> Thanks for the info Frank.So if I understand it correctly than class
> OGRFeature should have one method that should give me value of attribute
> called 'LAYER' (or similar). Please what is the method called - I can not
> see it in the documentation?
>
> thanks again.
>
>
>
> On Thu, Nov 1, 2012 at 11:18 PM, Frank Warmerdam <warmerdam at pobox.com>wrote:
>
>>
>>
>> On Thu, Nov 1, 2012 at 3:11 PM, Miroslav Karpis <
>> miroslav.karpis at gmail.com> wrote:
>>
>>> Hi, please can you help me with following:
>>>
>>> 1) When I open DGN file which has for example 10 layers,
>>>  OGRDataSource::GetLayerCont () returns 1. What can be the problem? The
>>> documentation says that OGR DGN is supporting layers.
>>>
>>
>> Miroslav,
>>
>> DGN layers are represented as an attribute in the features of the single
>> OGR layer.  I think the attribute is called LAYER.
>>
>> Because of the way the dgn file is structured it would be hard to
>> represent the DGN layers as OGR layers efficiently.  Also, since all
>> features have the same schema there was relatively little value in keeping
>> them as distinct layers.
>>
>>
>>> 2) Does anybody know about an example of conversion from DGN to SVG?
>>>
>>
>> I think MapServer has some sort of SVG support and given that MapServer
>> has at least some degree of "autostyling" available from OGR DGN it might
>> capture some of the look and feel of the original DGN.
>>
>> I doubt this is a well trod route.
>>
>> Best regards,
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam,
>> warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121102/1c48da46/attachment.html>

From silyko at gmail.com  Fri Nov  2 02:13:58 2012
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Fri, 2 Nov 2012 10:13:58 +0100
Subject: [gdal-dev] Problem with GUID-field in FileGDB driver
Message-ID: <CANzGYpTKrgnAZ_vOknDeKEEwhhE0syF8otVmsn-wbS=O3fx=eA@mail.gmail.com>

Hi List,

  I have been trying to transform some FileGDB databases with OGR and have
run into a problem reading a specific field called "GlobalID". The field
simply cannot be read by OGR, which emits this warning (and the field is
left as NULL):

ERROR 1: Error: Failed to determine string value for column GlobalID (The
value type is incompatible with the field type.)

Have run into the problem both programatically using the OGR C-API, the
python bindings and also issuing commands like:

ogr2ogr -f SQLITE -dsco SPATIALITE=YES out.sqlite in.gdb layer_name

(Gdal version 1.9.1)

Have attached a screendump which displays what the field is supposed to
look like.

Hope that someone can provide a hint on how to deal with this!

Cheers,
Simon Kokkendorff, National Survey and Cadastre of Denmark


The ArcGis resources describe the GlobalID field like this:

   Global identifiers

Global ID and GUID data types store registry style strings consisting of 36
characters enclosed in curly brackets. These strings uniquely identify a
feature or table row within a geodatabase and across geodatabases. This is
how features are tracked in one-way and two-way geodatabase replication.
Developers can use them in relationships or in any application requiring
globally unique identifiers. In a relationship, if a Global ID field is the
origin key, a GUID field must be the destination key. You can add global
IDs to a dataset in a geodatabase by right-clicking it in the Catalog tree
and clicking Add Global IDs. The geodatabase will then maintain these
values automatically. You can create the GUID field as well, but you must
maintain its values.

Databases with a native GUID data type, such as personal geodatabases and
Microsoft SQL Server, store global ID and GUID values as 16 bytes.
Databases without a native GUID data type store them as 38 bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121102/2a28398d/attachment-0001.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ExampleGUIDs_NaturalFeaturesP.png
Type: image/png
Size: 34391 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121102/2a28398d/attachment-0001.png>

From hilmekrhu at gmail.com  Fri Nov  2 04:10:11 2012
From: hilmekrhu at gmail.com (Frederic Blase)
Date: Fri, 2 Nov 2012 15:10:11 +0400
Subject: [gdal-dev] GDAL + PROJ4 configure error, Cygwin
Message-ID: <CAP9804K2_+6UeCagAgYHSXetq0t5U+terz+Jvt=OQfyVFW6-qQ@mail.gmail.com>

Hi all,

I'm making a gdal+proj4 build for android NDK. I have successfully build
gdal(1.9.0) itself and proj4(4.8.0), but have some problems now.

proj4 is installed at default location - usr/local

I run gdal configure:
CFLAGS="-mthumb" CXXFLAGS="-mthumb" ./configure
--host=arm-linux-androideabi --prefix=/cygdrive/c/dev/lib/gdal-1.9.0/gdal
--with-static-proj4=usr/local

and get:
...
checking how to link PROJ.4 library... link statically.
checking for pj_init in -lproj... no
...
Statically link PROJ.4:    no
...

What am I doing wrong?


-- 
Frederic Blase
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121102/b5b994ff/attachment.html>

From even.rouault at mines-paris.org  Fri Nov  2 09:42:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 02 Nov 2012 17:42:05 +0100
Subject: [gdal-dev] Problem with GUID-field in FileGDB driver
In-Reply-To: <CANzGYpTKrgnAZ_vOknDeKEEwhhE0syF8otVmsn-wbS=O3fx=eA@mail.gmail.com>
References: <CANzGYpTKrgnAZ_vOknDeKEEwhhE0syF8otVmsn-wbS=O3fx=eA@mail.gmail.com>
Message-ID: <1351874525.5093f7dd94eae@imp.free.fr>

Selon Simon Lyngby Kokkendorff <silyko at gmail.com>:

> Hi List,
>
>   I have been trying to transform some FileGDB databases with OGR and have
> run into a problem reading a specific field called "GlobalID". The field
> simply cannot be read by OGR, which emits this warning (and the field is
> left as NULL):

Simon,

could you file a ticket in GDAL Trac and attach such a FileGDB in it ? It
shouldn't be hard to fix.

Even

From luzhenyu1981 at gmail.com  Fri Nov  2 20:10:27 2012
From: luzhenyu1981 at gmail.com (Zhenyu Lu)
Date: Fri, 2 Nov 2012 20:10:27 -0700
Subject: [gdal-dev] Help on writting float type data into raster using
	writeRaster
Message-ID: <CA+VK+OBzz_hv74B48rhU88Vn7vyVoPuPQZMrXqVC+h20jK9-DQ@mail.gmail.com>

Hi All,

Recently I am trying to write float type data into a raster using the
function named WriteRaster in GDAL. However, I found that the data written
into the image does not make sense.

I tried to track down the issue from the very beginning, I found that the
values predicted by the non-GDAL part are correct which ranges from 0.0 to
1000.0. However, the values written into the image seems not right. I
"info"ed some pixels in ArcGIS, and found that some of the values are
correct, but some are incredibly large (> 1,000,000,000) or -0.0.

Beneath are the two function I created using C# to wrap up the create
raster and write data to raster operations. Would you please review the
code and let me know if you find anything wired? The dataType I passed in
the following function is DataType.GDT_Float64.

       /// <summary>
        /// Function of CreateImage
        /// </summary>
        /// <param name="width">the width of the image</param>
        /// <param name="height">the height of the image</param>
        /// <param name="band">the band number of the image</param>
        /// <param name="dataType">the dataType of the image</param>
        /// <param name="fileName">the filepath of the image</param>
        /// <param name="Projection">the projection of the image</param>
        /// <param name="geotrans">the extent of the image</param>
        /// <returns>true if the file is created successfully, false
otherwise</returns>
        public bool CreateImage(int width, int height, int band,
OSGeo.GDAL.DataType dataType, string fileName, string Projection, double[]
geotrans)
        {
            try
            {
                OSGeo.GDAL.Gdal.AllRegister();
                OSGeo.GDAL.Driver poDriver =
OSGeo.GDAL.Gdal.GetDriverByName("GTiff");
                if (System.IO.Path.GetExtension(fileName) == ".img")
                    poDriver = OSGeo.GDAL.Gdal.GetDriverByName("HFA");
                OSGeo.GDAL.Dataset poDstDs = poDriver.Create(fileName,
width, height, band, dataType, null);
                poDstDs.SetProjection(Projection);
                poDstDs.SetGeoTransform(geotrans);
                //****Added by ZLu on 08/03/2012****
                poDstDs.Dispose();
                return true;
            }
            catch
            {
                return false;
            }
        }

       /// <summary>
        /// Function of  WriteData2File
        /// </summary>
        /// <param name="LCx">the column index of left corner</param>
        /// <param name="LCy">the row index of left corner</param>
        /// <param name="width">the width of the rectangle</param>
        /// <param name="height">the length of the rectangle</param>
        /// <param name="fileName">the fileName where the data will be
saved</param>
        /// <returns>true, if the data is added correctly, false
otherwise.</returns>
        public bool WriteData2File(int LCx, int LCy, int width, int height,
int band, double[] Data, string fileName)
        {
            OSGeo.GDAL.Driver imgDriver =
OSGeo.GDAL.Gdal.GetDriverByName("GTiff");
            string extension = System.IO.Path.GetExtension(fileName);
            if (extension == ".img")
                imgDriver = OSGeo.GDAL.Gdal.GetDriverByName("HFA");
            if (imgDriver == null)
                throw new Exception("The file type is not supported!");
            OSGeo.GDAL.Dataset ds = OSGeo.GDAL.Gdal.Open(fileName,
OSGeo.GDAL.Access.GA_Update);
            int[] bandMap = new int[] { 1, 1, 1};
            try
            {
                ds.WriteRaster(LCx, LCy, width, height, Data, width,
height, 1, bandMap, 1, 1, 1);
                //ds.WriteRaster(LCx, LCy, width, height, Data, width,
height, band, 0, 0, 0);
                ds.Dispose();
                return true;
            }
            catch
            {
                return false;
            }
        }


Thank you so much and wish you have a nice weekend.

Zhenyu

-- 
Zhenyu Lu
SUNY-ESF
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121102/d5e10567/attachment.html>

From osoong+gdal at gmail.com  Fri Nov  2 22:31:52 2012
From: osoong+gdal at gmail.com (Oliver Soong)
Date: Fri, 2 Nov 2012 22:31:52 -0700
Subject: [gdal-dev] Fwd: OSRExportToProj4 losing datum
In-Reply-To: <CAPQ=hVK=Xzr0FL+enpP3Fj7Q6_nM76qNMQsckW21jwoot3+Xkw@mail.gmail.com>
References: <CAPQ=hVK=Xzr0FL+enpP3Fj7Q6_nM76qNMQsckW21jwoot3+Xkw@mail.gmail.com>
Message-ID: <CAPQ=hVKDKHd=8VPmaeupm7OqkRk+es_AN88NdusXb23ApfR3mg@mail.gmail.com>

The attached raster is in Albers_Conic_Equal_Area on
North_American_Datum_1983.  This is correctly indicated by the WKT.
The PROJ.4 string has no such datum information.  This causes problems
with rgdal in R, which uses the PROJ.4 string and never receives the
datum information.

This seems to be limited to Albers_Conic_Equal_Area and
North_American_Datum_1983, although our testing has been limited.

> gdalinfo --version
GDAL 1.9.2, released 2012/10/08
> gdalinfo -proj4 test.tif
[...]
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Albers_Conic_Equal_Area"],
    PARAMETER["standard_parallel_1",29.5],
    PARAMETER["standard_parallel_2",45.5],
    PARAMETER["latitude_of_center",23],
    PARAMETER["longitude_of_center",-96],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
PROJ.4 string is:
'+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0
+ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs '
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.tif
Type: image/tiff
Size: 545 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121102/fa702127/attachment.tif>

From noonslists+gdal at gmail.com  Sat Nov  3 00:32:32 2012
From: noonslists+gdal at gmail.com (Noon Silk)
Date: Sat, 3 Nov 2012 18:32:32 +1100
Subject: [gdal-dev] Ogr and Dwg via Teigha (in C#)
In-Reply-To: <CADt_azYspnZOT4vg096VyXhgRFvDLQAuJLVPX23a_i+9J81cew@mail.gmail.com>
References: <CADt_azZ1n2SoQmgrhrbYsPxUX57JGvBCbosjx76xzZp9jvgeCQ@mail.gmail.com>
	<CACALY+Rx3XcqsrmGRseXFK-qnscxdqPPN7axZOspf2B07kTo4A@mail.gmail.com>
	<CADt_azadkw7vg20xOpCRRy6HvEk6YBDJefY-zr3S3XEvap8fRw@mail.gmail.com>
	<CADt_azZghV5zx+kX2LcW-3nuOD71zDcy2vY0k_7AGE4AMWRy9Q@mail.gmail.com>
	<CACALY+Q8N5bCTA7hu_KCysGfusJfP5mB5rkDjRqGJBJ8-zh0gQ@mail.gmail.com>
	<CADt_azaptvg17NaSUpWxGgBVpQW2Wt+fBPT5-e_HUOgnS1J3xA@mail.gmail.com>
	<CACALY+TfZRR2Rq358bqFHQtsqJLSfTxyYUPM_4U4ifeGzZaNMw@mail.gmail.com>
	<CADt_azYspnZOT4vg096VyXhgRFvDLQAuJLVPX23a_i+9J81cew@mail.gmail.com>
Message-ID: <CADt_azYmhRZdWG0csC=OT_KYXkzD1Ly+KN6YoXiWdgd1a_cP6Q@mail.gmail.com>

Hi,

 So, further to this, I've not had much luck with my previous
approach. I'm going to now try this method; but I kind of want to
understand why what I tried didn't work.

 What I mean by "Didn't work" is that my requests to open DWG files,
or just grab an instance of the DWG driver, didn't work.

 I ask for an instance like so (in C#):

 Ogr.RegisterAll();
 Driver d = Ogr.GetDriverByName("DWG");

 "d" comes back as null. So, I expected it to return something given
that I thought I was correctly "enablding" the DWG library. But, I
also checked to see if the number of available drivers changed, after
me doing what I would've expected to result in the enablding. Sadly,
it didn't. So I can only assume that I didn't enanble it correctly.

 So, my process for enabling the DWG driver was basically to allow it
to be compiled as part of the "gdal\ogr\ogrsf_frmts\makefile.vc" (by
adding in the directory and the obj files). I also set up the required
Teigha libraries by uncommenting and correctly setting the particular
bits of nmake.opt.

 Then the only other change I made was to generate the SWIG bindings.

 Is this the correct way to enable the dwg bindings? Is there
something obvious I've missed? Would linking this other -dev build
script with the particular source work better?

Thanks,
--
Noon




On Fri, Nov 2, 2012 at 9:30 AM, Noon Silk <noonslists+gdal at gmail.com> wrote:
> On Mon, Oct 29, 2012 at 11:34 PM, Tamas Szekeres <szekerest at gmail.com> wrote:
>> You might also take a look at the -dev packages at
>> http://www.gisinternals.com/sdk/
>> The compilation is controlled by a single makefile, so you can use:
>>
>> nmake gdal
>> nmake gdal-csharp
>
> Thanks; I happened to grab the "MSVC2005 (Win64) -development", which
> doesn't have that ..., I'll give this a go.
>
>
>> to achieve the desired result.
>>
>> Best regards,
>>
>> Tamas
>
> --
> Noon

From even.rouault at mines-paris.org  Sat Nov  3 02:39:50 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 03 Nov 2012 10:39:50 +0100
Subject: [gdal-dev] Fwd: OSRExportToProj4 losing datum
In-Reply-To: <CAPQ=hVKDKHd=8VPmaeupm7OqkRk+es_AN88NdusXb23ApfR3mg@mail.gmail.com>
References: <CAPQ=hVK=Xzr0FL+enpP3Fj7Q6_nM76qNMQsckW21jwoot3+Xkw@mail.gmail.com>
	<CAPQ=hVKDKHd=8VPmaeupm7OqkRk+es_AN88NdusXb23ApfR3mg@mail.gmail.com>
Message-ID: <1351935590.5094e6669a0b3@imp.free.fr>

Selon Oliver Soong <osoong+gdal at gmail.com>:

> The attached raster is in Albers_Conic_Equal_Area on
> North_American_Datum_1983.  This is correctly indicated by the WKT.
> The PROJ.4 string has no such datum information.  This causes problems
> with rgdal in R, which uses the PROJ.4 string and never receives the
> datum information.
>
> This seems to be limited to Albers_Conic_Equal_Area and
> North_American_Datum_1983, although our testing has been limited.
>
> > gdalinfo --version
> GDAL 1.9.2, released 2012/10/08
> > gdalinfo -proj4 test.tif
> [...]
> Coordinate System is:
> PROJCS["unnamed",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                 AUTHORITY["EPSG","7019"]],
>             TOWGS84[0,0,0,0,0,0,0],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4269"]],
>     PROJECTION["Albers_Conic_Equal_Area"],
>     PARAMETER["standard_parallel_1",29.5],
>     PARAMETER["standard_parallel_2",45.5],
>     PARAMETER["latitude_of_center",23],
>     PARAMETER["longitude_of_center",-96],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]]]
> PROJ.4 string is:
> '+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0 +y_0=0
> +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs '
>

Yes, this is the new behaviour of GDAL since GDAL 1.8. +datum is not emitted
when the TOWGS84 node is present in the WKT. Proj.4 doesn't need +datum when
+ellps and +towgs84 are available. A few applications (like GRASS) seemed to
depend on the presence of +datum but this has never been reliable since PROJ.4
only recognized a small proportion of datum names among all that are possible.
Applications shouldn't rely on proj.4 string to build a SRS, but use the WKT
string / OGRSpatialReference object instead.

http://trac.osgeo.org/gdal/ticket/3450 and http://trac.osgeo.org/proj/ticket/122
for some background. You could also try setting the environmenet variable
OVERRIDE_PROJ_DATUM_WITH_TOWGS84 to FALSE if you really need the old behaviour.






From even.rouault at mines-paris.org  Sat Nov  3 02:50:38 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 03 Nov 2012 10:50:38 +0100
Subject: [gdal-dev] Help on writting float type data into raster using
	writeRaster
In-Reply-To: <CA+VK+OBzz_hv74B48rhU88Vn7vyVoPuPQZMrXqVC+h20jK9-DQ@mail.gmail.com>
References: <CA+VK+OBzz_hv74B48rhU88Vn7vyVoPuPQZMrXqVC+h20jK9-DQ@mail.gmail.com>
Message-ID: <1351936238.5094e8eeaef0b@imp.free.fr>


>             int[] bandMap = new int[] { 1, 1, 1};
>             try
>             {
>                 ds.WriteRaster(LCx, LCy, width, height, Data, width,
> height, 1, bandMap, 1, 1, 1);

The values you give for the last 5 arguments of WriteRaster() are definitely
wrong. See the documentation of GDALDataset::IRasterIO() (
http://www.gdal.org/classGDALDataset.html#ae077c53268d2272eebed10b891a05743 ) :
its last 5 arguments are the same as the last 5 ones of the C#
Dataset.WriteRaster()

From Roger.Bivand at nhh.no  Sat Nov  3 03:47:44 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 3 Nov 2012 03:47:44 -0700 (PDT)
Subject: [gdal-dev] Fwd: OSRExportToProj4 losing datum
In-Reply-To: <1351935590.5094e6669a0b3@imp.free.fr>
References: <CAPQ=hVKDKHd=8VPmaeupm7OqkRk+es_AN88NdusXb23ApfR3mg@mail.gmail.com>
	<1351935590.5094e6669a0b3@imp.free.fr>
Message-ID: <1351939664365-5013681.post@n6.nabble.com>

Even,

I've opened #4880 on this - it is problematic in the R-spatial setting
because the CRS (coordinate reference system) object recorded in each
Spatial object uses the PROJ.4 string to represent spatial reference. A user
can create a CRS, write out a raster (which expands the description to
include , read it back, and the CRS are not the same. The same does not
appear to happen with OGR write/read (ESRI Shapefile driver). Is the
conclusion that calling programs must first find "NAD83" in the raster input
WKT, if it is there set the environment variable if the default GDAL
behaviour is not desired, export to Proj4, then remove the environment
variable if set? Does this only affect NAD83 - it does seem to be limited to
this datum, as WGS84 does not show the same behaviour.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Fwd-OSRExportToProj4-losing-datum-tp5013658p5013681.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From landa.martin at gmail.com  Sat Nov  3 03:52:44 2012
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 3 Nov 2012 11:52:44 +0100
Subject: [gdal-dev] problem with compiling grass with gdal
In-Reply-To: <CA+Ei1OcU7HVwJk_9QspdSKfHr5ZCw6deBbH3UmmOKMUDYo-Sew@mail.gmail.com>
References: <CA+Ei1OesHFGXbyxuH-s5crq8nmJ3+JA7SaDBA2=dc3e+rQPZLw@mail.gmail.com>
	<201210232015.24792.even.rouault@mines-paris.org>
	<CA+Ei1OcPLpC72da7NiTjejVvWNj8KmqvQY0RAFR6ejwUF0OBEA@mail.gmail.com>
	<201210242043.55821.even.rouault@mines-paris.org>
	<CA+Ei1OcU7HVwJk_9QspdSKfHr5ZCw6deBbH3UmmOKMUDYo-Sew@mail.gmail.com>
Message-ID: <CA+Ei1OdoUfUQOyTBdQLS4dY3Sf5Si0CyATwZAMKGkFovyJ1pOg@mail.gmail.com>

Hi,

2012/10/24 Martin Landa <landa.martin at gmail.com>:

>> Perhaps try to diff the output of ldd libgdal.so ??
>
> Apparently libstdc++.so.6 is missing in trunk.

seems to be solved.

$ gdal-config --version
2.0.0

$ ldd /usr/local/lib/libgdal.so | grep 'c++'
        libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6
(0x00007ff1b00c6000)

Martin

--
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From even.rouault at mines-paris.org  Sat Nov  3 04:30:38 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 03 Nov 2012 12:30:38 +0100
Subject: [gdal-dev] problem with compiling grass with gdal
In-Reply-To: <CA+Ei1OdoUfUQOyTBdQLS4dY3Sf5Si0CyATwZAMKGkFovyJ1pOg@mail.gmail.com>
References: <CA+Ei1OesHFGXbyxuH-s5crq8nmJ3+JA7SaDBA2=dc3e+rQPZLw@mail.gmail.com>
	<201210232015.24792.even.rouault@mines-paris.org>
	<CA+Ei1OcPLpC72da7NiTjejVvWNj8KmqvQY0RAFR6ejwUF0OBEA@mail.gmail.com>
	<201210242043.55821.even.rouault@mines-paris.org>
	<CA+Ei1OcU7HVwJk_9QspdSKfHr5ZCw6deBbH3UmmOKMUDYo-Sew@mail.gmail.com>
	<CA+Ei1OdoUfUQOyTBdQLS4dY3Sf5Si0CyATwZAMKGkFovyJ1pOg@mail.gmail.com>
Message-ID: <1351942238.5095005e1bfe9@imp.free.fr>

Selon Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2012/10/24 Martin Landa <landa.martin at gmail.com>:
>
> >> Perhaps try to diff the output of ldd libgdal.so ??
> >
> > Apparently libstdc++.so.6 is missing in trunk.
>
> seems to be solved.
>
> $ gdal-config --version
> 2.0.0
>
> $ ldd /usr/local/lib/libgdal.so | grep 'c++'
>         libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6
> (0x00007ff1b00c6000)

Yes, I think that the recent commit in
http://trac.osgeo.org/gdal/changeset/25195 fixed the issue.

>
> Martin
>
> --
> Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa
>



From landa.martin at gmail.com  Sat Nov  3 04:33:06 2012
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 3 Nov 2012 12:33:06 +0100
Subject: [gdal-dev] problem with compiling grass with gdal
In-Reply-To: <1351942238.5095005e1bfe9@imp.free.fr>
References: <CA+Ei1OesHFGXbyxuH-s5crq8nmJ3+JA7SaDBA2=dc3e+rQPZLw@mail.gmail.com>
	<201210232015.24792.even.rouault@mines-paris.org>
	<CA+Ei1OcPLpC72da7NiTjejVvWNj8KmqvQY0RAFR6ejwUF0OBEA@mail.gmail.com>
	<201210242043.55821.even.rouault@mines-paris.org>
	<CA+Ei1OcU7HVwJk_9QspdSKfHr5ZCw6deBbH3UmmOKMUDYo-Sew@mail.gmail.com>
	<CA+Ei1OdoUfUQOyTBdQLS4dY3Sf5Si0CyATwZAMKGkFovyJ1pOg@mail.gmail.com>
	<1351942238.5095005e1bfe9@imp.free.fr>
Message-ID: <CA+Ei1OdYeDYLE9Nenc__h+sAM3x3-PXstTT516rnCUZA7J794A@mail.gmail.com>

Hi,

2012/11/3 Even Rouault <even.rouault at mines-paris.org>:

> Yes, I think that the recent commit in
> http://trac.osgeo.org/gdal/changeset/25195 fixed the issue.

seems to be like that, thanks for info, Martin


--
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From even.rouault at mines-paris.org  Sat Nov  3 04:58:55 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 03 Nov 2012 12:58:55 +0100
Subject: [gdal-dev] Fwd: OSRExportToProj4 losing datum
In-Reply-To: <1351939664365-5013681.post@n6.nabble.com>
References: <CAPQ=hVKDKHd=8VPmaeupm7OqkRk+es_AN88NdusXb23ApfR3mg@mail.gmail.com>
	<1351935590.5094e6669a0b3@imp.free.fr>
	<1351939664365-5013681.post@n6.nabble.com>
Message-ID: <1351943935.509506ff755eb@imp.free.fr>

Selon Roger Bivand <Roger.Bivand at nhh.no>:

> Even,
>
> I've opened #4880 on this - it is problematic in the R-spatial setting
> because the CRS (coordinate reference system) object recorded in each
> Spatial object uses the PROJ.4 string to represent spatial reference. A user
> can create a CRS, write out a raster (which expands the description to
> include , read it back, and the CRS are not the same. The same does not
> appear to happen with OGR write/read (ESRI Shapefile driver). Is the
> conclusion that calling programs must first find "NAD83" in the raster input
> WKT, if it is there set the environment variable if the default GDAL
> behaviour is not desired, export to Proj4, then remove the environment
> variable if set? Does this only affect NAD83 - it does seem to be limited to
> this datum, as WGS84 does not show the same behaviour.

Roger,

Hum, I somehow regret of having tried to fix the issue that was originally
raised in trac.osgeo.org/gdal/ticket/3450 since it seems that all GRASS and now
RGdal developers hate me now ;-) But hopefully they will realize that they
should consider using more reliable ways of representing SRS.

In the case of NAD83, +datum=nad83 is expanded as
GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS
1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9108\"]],AUTHORITY[\"EPSG\",\"4269\"]]
. This expansion is done at import time (importFromProj4).

This explains why at export time the +datum isn't exported since there's a
TOWGS84 node.

You would also have a similar behaviour with +datum=WGS72 since +datum=WGS72
expansion implicitely adds a TOWGS84 node.

In the case of NAD83, I'm not sure why SetWellKnownGeogCS("NAD83") adds the
TOWGS84[0,0,0,0,0,0,0]. If this was removed, then I believe that exportToProj4()
would again generate +datum=nad83. But I'm now more than hesitant in touching
anything in that area, since this could potentially break something else.

Sorry to repeat myself, but you should NOT use proj4 strings as a way of
representing a SRS. It is just not reliable. It is not, and has never been. You
must realize that proj4 only knows 10 datum names (see pj_datums.c). All other
datums must be translated into +ellps= +towgs84= anyway. You shouldn't assume
that round-tripping importFromProj4() / exportToProj4() will be perfect. proj4
strings are only usefull for proj4, to do SRS transformations. They are not
meant at being a comprehensive way of representing SRS. I'm not sure how hard it
is for RGdal, but you should consider migrating to using WKT strings / model.
WKT has been designed for that.

Best regards,

Even

From Roger.Bivand at nhh.no  Sat Nov  3 05:29:21 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 3 Nov 2012 13:29:21 +0100
Subject: [gdal-dev] Fwd: OSRExportToProj4 losing datum
In-Reply-To: <1351943935.509506ff755eb@imp.free.fr>
References: <CAPQ=hVKDKHd=8VPmaeupm7OqkRk+es_AN88NdusXb23ApfR3mg@mail.gmail.com>
	<1351935590.5094e6669a0b3@imp.free.fr>
	<1351939664365-5013681.post@n6.nabble.com>
	<1351943935.509506ff755eb@imp.free.fr>
Message-ID: <alpine.LRH.2.02.1211031309410.22561@reclus.nhh.no>

On Sat, 3 Nov 2012, Even Rouault wrote:

> Selon Roger Bivand <Roger.Bivand at nhh.no>:
>
>> Even,
>>
>> I've opened #4880 on this - it is problematic in the R-spatial setting
>> because the CRS (coordinate reference system) object recorded in each
>> Spatial object uses the PROJ.4 string to represent spatial reference. A user
>> can create a CRS, write out a raster (which expands the description to
>> include , read it back, and the CRS are not the same. The same does not
>> appear to happen with OGR write/read (ESRI Shapefile driver). Is the
>> conclusion that calling programs must first find "NAD83" in the raster input
>> WKT, if it is there set the environment variable if the default GDAL
>> behaviour is not desired, export to Proj4, then remove the environment
>> variable if set? Does this only affect NAD83 - it does seem to be limited to
>> this datum, as WGS84 does not show the same behaviour.
>
> Roger,
>
> Hum, I somehow regret of having tried to fix the issue that was originally
> raised in trac.osgeo.org/gdal/ticket/3450 since it seems that all GRASS and now
> RGdal developers hate me now ;-) But hopefully they will realize that they
> should consider using more reliable ways of representing SRS.
>
> In the case of NAD83, +datum=nad83 is expanded as
> GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS
> 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9108\"]],AUTHORITY[\"EPSG\",\"4269\"]]
> . This expansion is done at import time (importFromProj4).
>
> This explains why at export time the +datum isn't exported since there's a
> TOWGS84 node.
>
> You would also have a similar behaviour with +datum=WGS72 since +datum=WGS72
> expansion implicitely adds a TOWGS84 node.
>
> In the case of NAD83, I'm not sure why SetWellKnownGeogCS("NAD83") adds the
> TOWGS84[0,0,0,0,0,0,0]. If this was removed, then I believe that exportToProj4()
> would again generate +datum=nad83. But I'm now more than hesitant in touching
> anything in that area, since this could potentially break something else.
>
> Sorry to repeat myself, but you should NOT use proj4 strings as a way of
> representing a SRS. It is just not reliable. It is not, and has never been. You
> must realize that proj4 only knows 10 datum names (see pj_datums.c). All other
> datums must be translated into +ellps= +towgs84= anyway. You shouldn't assume
> that round-tripping importFromProj4() / exportToProj4() will be perfect. proj4
> strings are only usefull for proj4, to do SRS transformations. They are not
> meant at being a comprehensive way of representing SRS. I'm not sure how hard it
> is for RGdal, but you should consider migrating to using WKT strings / model.
> WKT has been designed for that.

Thanks, Even.

It isn't easy to make design decisions, and in the case of sp, the R 
spatial class definition package, our concern was that spatial data 
analysts were most often unaware of spatial reference issues. PROJ.4 
strings are a low-threshold text string entry point for users who have no 
grasp of other representations, and when we began (2003), were among the 
only games in town. Inside R, the objects cannot reliably be pointers to 
C/C++ objects cross-platform; indeed, it is only a few month since we 
achieved PROJ.4/GDAL CRAN (archive network) support for OSX on two intel 
architectures. I'll try out adding a user-settable argument in calling 
functions to set and unset the environment variable, but this isn't very 
satisfactory.

I agree that in a better world, in sp 2.0, we should replace the 
representation in the CRS class with (maybe) WKT. But I don't think that 
this will happen any time soon, and in any case, we would still need to be 
able to let users to enter the simpler PROJ.4 representations, as writing 
WKT is much more error-prone.

Best wishes,

Roger

>
> Best regards,
>
> Even
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From even.rouault at mines-paris.org  Sat Nov  3 06:04:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 03 Nov 2012 14:04:32 +0100
Subject: [gdal-dev] Fwd: OSRExportToProj4 losing datum
In-Reply-To: <alpine.LRH.2.02.1211031309410.22561@reclus.nhh.no>
References: <CAPQ=hVKDKHd=8VPmaeupm7OqkRk+es_AN88NdusXb23ApfR3mg@mail.gmail.com>
	<1351935590.5094e6669a0b3@imp.free.fr>
	<1351939664365-5013681.post@n6.nabble.com>
	<1351943935.509506ff755eb@imp.free.fr>
	<alpine.LRH.2.02.1211031309410.22561@reclus.nhh.no>
Message-ID: <1351947872.5095166099948@imp.free.fr>

Selon Roger Bivand <Roger.Bivand at nhh.no>:

> On Sat, 3 Nov 2012, Even Rouault wrote:
>
> > Selon Roger Bivand <Roger.Bivand at nhh.no>:
> >
> >> Even,
> >>
> >> I've opened #4880 on this - it is problematic in the R-spatial setting
> >> because the CRS (coordinate reference system) object recorded in each
> >> Spatial object uses the PROJ.4 string to represent spatial reference. A
> user
> >> can create a CRS, write out a raster (which expands the description to
> >> include , read it back, and the CRS are not the same. The same does not
> >> appear to happen with OGR write/read (ESRI Shapefile driver). Is the
> >> conclusion that calling programs must first find "NAD83" in the raster
> input
> >> WKT, if it is there set the environment variable if the default GDAL
> >> behaviour is not desired, export to Proj4, then remove the environment
> >> variable if set? Does this only affect NAD83 - it does seem to be limited
> to
> >> this datum, as WGS84 does not show the same behaviour.
> >
> > Roger,
> >
> > Hum, I somehow regret of having tried to fix the issue that was originally
> > raised in trac.osgeo.org/gdal/ticket/3450 since it seems that all GRASS and
> now
> > RGdal developers hate me now ;-) But hopefully they will realize that they
> > should consider using more reliable ways of representing SRS.
> >
> > In the case of NAD83, +datum=nad83 is expanded as
> > GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS
> >
>
1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9108\"]],AUTHORITY[\"EPSG\",\"4269\"]]
> > . This expansion is done at import time (importFromProj4).
> >
> > This explains why at export time the +datum isn't exported since there's a
> > TOWGS84 node.
> >
> > You would also have a similar behaviour with +datum=WGS72 since
> +datum=WGS72
> > expansion implicitely adds a TOWGS84 node.
> >
> > In the case of NAD83, I'm not sure why SetWellKnownGeogCS("NAD83") adds the
> > TOWGS84[0,0,0,0,0,0,0]. If this was removed, then I believe that
> exportToProj4()
> > would again generate +datum=nad83. But I'm now more than hesitant in
> touching
> > anything in that area, since this could potentially break something else.
> >
> > Sorry to repeat myself, but you should NOT use proj4 strings as a way of
> > representing a SRS. It is just not reliable. It is not, and has never been.
> You
> > must realize that proj4 only knows 10 datum names (see pj_datums.c). All
> other
> > datums must be translated into +ellps= +towgs84= anyway. You shouldn't
> assume
> > that round-tripping importFromProj4() / exportToProj4() will be perfect.
> proj4
> > strings are only usefull for proj4, to do SRS transformations. They are not
> > meant at being a comprehensive way of representing SRS. I'm not sure how
> hard it
> > is for RGdal, but you should consider migrating to using WKT strings /
> model.
> > WKT has been designed for that.
>
> Thanks, Even.
>
> It isn't easy to make design decisions, and in the case of sp, the R
> spatial class definition package, our concern was that spatial data
> analysts were most often unaware of spatial reference issues. PROJ.4
> strings are a low-threshold text string entry point for users who have no
> grasp of other representations, and when we began (2003), were among the
> only games in town. Inside R, the objects cannot reliably be pointers to
> C/C++ objects cross-platform; indeed, it is only a few month since we
> achieved PROJ.4/GDAL CRAN (archive network) support for OSX on two intel
> architectures. I'll try out adding a user-settable argument in calling
> functions to set and unset the environment variable, but this isn't very
> satisfactory.

If you were happy with GDAL < 1.8 behaviour, you could also always set
OVERRIDE_PROJ_DATUM_WITH_TOWGS84=NO before calling ExportToProj4(). Only the
cases where a TOWGS84 node is defined in the OGRSpatialReference object that
contradicts the default +towgs84 hard-coded in the datum definition in PROJ.4
pj_datums.c would be affected, but that's probably a minor use case.

>
> I agree that in a better world, in sp 2.0, we should replace the
> representation in the CRS class with (maybe) WKT. But I don't think that
> this will happen any time soon, and in any case, we would still need to be
> able to let users to enter the simpler PROJ.4 representations, as writing
> WKT is much more error-prone.

Using EPSG codes can also be a convenient way for users to specify a SRS, but it
does not cover all possible SRS.

>
> Best wishes,
>
> Roger
>
> >
> > Best regards,
> >
> > Even
> >
>
> --
> Roger Bivand
> Department of Economics, NHH Norwegian School of Economics,
> Helleveien 30, N-5045 Bergen, Norway.
> voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
>



From Roger.Bivand at nhh.no  Sat Nov  3 06:49:26 2012
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Sat, 3 Nov 2012 14:49:26 +0100
Subject: [gdal-dev] Fwd: OSRExportToProj4 losing datum
In-Reply-To: <1351947872.5095166099948@imp.free.fr>
References: <CAPQ=hVKDKHd=8VPmaeupm7OqkRk+es_AN88NdusXb23ApfR3mg@mail.gmail.com>
	<1351935590.5094e6669a0b3@imp.free.fr>
	<1351939664365-5013681.post@n6.nabble.com>
	<1351943935.509506ff755eb@imp.free.fr>
	<alpine.LRH.2.02.1211031309410.22561@reclus.nhh.no>
	<1351947872.5095166099948@imp.free.fr>
Message-ID: <alpine.LRH.2.02.1211031446000.22561@reclus.nhh.no>

On Sat, 3 Nov 2012, Even Rouault wrote:

> Selon Roger Bivand <Roger.Bivand at nhh.no>:
>
>> On Sat, 3 Nov 2012, Even Rouault wrote:
>>
>>> Selon Roger Bivand <Roger.Bivand at nhh.no>:
>>>
>>>> Even,
>>>>
>>>> I've opened #4880 on this - it is problematic in the R-spatial setting
>>>> because the CRS (coordinate reference system) object recorded in each
>>>> Spatial object uses the PROJ.4 string to represent spatial reference. A
>> user
>>>> can create a CRS, write out a raster (which expands the description to
>>>> include , read it back, and the CRS are not the same. The same does not
>>>> appear to happen with OGR write/read (ESRI Shapefile driver). Is the
>>>> conclusion that calling programs must first find "NAD83" in the raster
>> input
>>>> WKT, if it is there set the environment variable if the default GDAL
>>>> behaviour is not desired, export to Proj4, then remove the environment
>>>> variable if set? Does this only affect NAD83 - it does seem to be limited
>> to
>>>> this datum, as WGS84 does not show the same behaviour.
>>>
>>> Roger,
>>>
>>> Hum, I somehow regret of having tried to fix the issue that was originally
>>> raised in trac.osgeo.org/gdal/ticket/3450 since it seems that all GRASS and
>> now
>>> RGdal developers hate me now ;-) But hopefully they will realize that they
>>> should consider using more reliable ways of representing SRS.
>>>
>>> In the case of NAD83, +datum=nad83 is expanded as
>>> GEOGCS[\"NAD83\",DATUM[\"North_American_Datum_1983\",SPHEROID[\"GRS
>>>
>>
> 1980\",6378137,298.257222101,AUTHORITY[\"EPSG\",\"7019\"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY[\"EPSG\",\"6269\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9108\"]],AUTHORITY[\"EPSG\",\"4269\"]]
>>> . This expansion is done at import time (importFromProj4).
>>>
>>> This explains why at export time the +datum isn't exported since there's a
>>> TOWGS84 node.
>>>
>>> You would also have a similar behaviour with +datum=WGS72 since
>> +datum=WGS72
>>> expansion implicitely adds a TOWGS84 node.
>>>
>>> In the case of NAD83, I'm not sure why SetWellKnownGeogCS("NAD83") adds the
>>> TOWGS84[0,0,0,0,0,0,0]. If this was removed, then I believe that
>> exportToProj4()
>>> would again generate +datum=nad83. But I'm now more than hesitant in
>> touching
>>> anything in that area, since this could potentially break something else.
>>>
>>> Sorry to repeat myself, but you should NOT use proj4 strings as a way of
>>> representing a SRS. It is just not reliable. It is not, and has never been.
>> You
>>> must realize that proj4 only knows 10 datum names (see pj_datums.c). All
>> other
>>> datums must be translated into +ellps= +towgs84= anyway. You shouldn't
>> assume
>>> that round-tripping importFromProj4() / exportToProj4() will be perfect.
>> proj4
>>> strings are only usefull for proj4, to do SRS transformations. They are not
>>> meant at being a comprehensive way of representing SRS. I'm not sure how
>> hard it
>>> is for RGdal, but you should consider migrating to using WKT strings /
>> model.
>>> WKT has been designed for that.
>>
>> Thanks, Even.
>>
>> It isn't easy to make design decisions, and in the case of sp, the R
>> spatial class definition package, our concern was that spatial data
>> analysts were most often unaware of spatial reference issues. PROJ.4
>> strings are a low-threshold text string entry point for users who have no
>> grasp of other representations, and when we began (2003), were among the
>> only games in town. Inside R, the objects cannot reliably be pointers to
>> C/C++ objects cross-platform; indeed, it is only a few month since we
>> achieved PROJ.4/GDAL CRAN (archive network) support for OSX on two intel
>> architectures. I'll try out adding a user-settable argument in calling
>> functions to set and unset the environment variable, but this isn't very
>> satisfactory.
>
> If you were happy with GDAL < 1.8 behaviour, you could also always set
> OVERRIDE_PROJ_DATUM_WITH_TOWGS84=NO before calling ExportToProj4(). Only the
> cases where a TOWGS84 node is defined in the OGRSpatialReference object that
> contradicts the default +towgs84 hard-coded in the datum definition in PROJ.4
> pj_datums.c would be affected, but that's probably a minor use case.

I've committed a user argument to relevant functions in rgdal for setting 
the behaviour to datum-preserving, either on a case-by-case or global 
level. If the environment variable is present, it will have precedence and 
will not be overwritten.

>
>>
>> I agree that in a better world, in sp 2.0, we should replace the
>> representation in the CRS class with (maybe) WKT. But I don't think that
>> this will happen any time soon, and in any case, we would still need to be
>> able to let users to enter the simpler PROJ.4 representations, as writing
>> WKT is much more error-prone.
>
> Using EPSG codes can also be a convenient way for users to specify a SRS, but it
> does not cover all possible SRS.

We use EPSG to look for PROJ.4, but which then retain the +init= tag 
within R.

Best wishes,

Roger

>
>>
>> Best wishes,
>>
>> Roger
>>
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>
>> --
>> Roger Bivand
>> Department of Economics, NHH Norwegian School of Economics,
>> Helleveien 30, N-5045 Bergen, Norway.
>> voice: +47 55 95 93 55; fax +47 55 95 95 43
>> e-mail: Roger.Bivand at nhh.no
>>
>>
>
>
>

-- 
Roger Bivand
Department of Economics, NHH Norwegian School of Economics,
Helleveien 30, N-5045 Bergen, Norway.
voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From even.rouault at mines-paris.org  Sat Nov  3 11:41:04 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 03 Nov 2012 19:41:04 +0100
Subject: [gdal-dev] Trans.: [SpatiaLite-Users] 2013 - technology preview
Message-ID: <1351968064.509565409df4d@imp.free.fr>

Forwarding here. I'm not sure if I've advertized VirtualOGR properly before.
Sandro does a great job on that !

----- Message transf?r? de sandro furieri <a.furieri at lqt.it> -----
   Date?: Sat, 3 Nov 2012 09:48:10 -0700 (PDT)
     De?: sandro furieri <a.furieri at lqt.it>
Adresse de retour?:spatialite-users at googlegroups.com
  Sujet?: [SpatiaLite-Users] 2013 - technology preview
      ??: spatialite-users at googlegroups.com

Hi list,

A nice new, one probably warmly welcome for many of us.
Even Rouault (the maintainer of the GDAL library) during the latest
weeks has implemented VirtualOGR, a loadable extension enabling
SQLite/SpatiaLite to directly connect many external datasources,
this including the most popular Spatial DBMSes (PostGIS, Oracle ..).

Today I'd finally enough free time to perform some preliminary testing;
anyone interested into this topic can read my preliminary report:
https://www.gaia-gis.it/fossil/libspatialite/wiki?name=VirtualOGR

Please note: VirtualOGR isn't yet officially available: it will be
probably released on December.
Anyway "rogue explorers" could easily perform some preliminary testing
just today; building by yourself few libraries from devel/trunk code
is the only pre-requisite (a trivial task for any Linux user).

happy testing,
Sandro

-- 
You received this message because you are subscribed to the Google Groups
"SpatiaLite Users" group.
To view this discussion on the web visit
https://groups.google.com/d/msg/spatialite-users/-/lVDpwGc2ypsJ.
To post to this group, send email to spatialite-users at googlegroups.com.
To unsubscribe from this group, send email to
spatialite-users+unsubscribe at googlegroups.com.
For more options, visit this group at
http://groups.google.com/group/spatialite-users?hl=en.


----- Fin du message transf?r? -----


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121103/ffc9f0bd/attachment.html>

From szekerest at gmail.com  Sat Nov  3 14:31:53 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat, 3 Nov 2012 22:31:53 +0100
Subject: [gdal-dev] Ogr and Dwg via Teigha (in C#)
In-Reply-To: <CADt_azYmhRZdWG0csC=OT_KYXkzD1Ly+KN6YoXiWdgd1a_cP6Q@mail.gmail.com>
References: <CADt_azZ1n2SoQmgrhrbYsPxUX57JGvBCbosjx76xzZp9jvgeCQ@mail.gmail.com>
	<CACALY+Rx3XcqsrmGRseXFK-qnscxdqPPN7axZOspf2B07kTo4A@mail.gmail.com>
	<CADt_azadkw7vg20xOpCRRy6HvEk6YBDJefY-zr3S3XEvap8fRw@mail.gmail.com>
	<CADt_azZghV5zx+kX2LcW-3nuOD71zDcy2vY0k_7AGE4AMWRy9Q@mail.gmail.com>
	<CACALY+Q8N5bCTA7hu_KCysGfusJfP5mB5rkDjRqGJBJ8-zh0gQ@mail.gmail.com>
	<CADt_azaptvg17NaSUpWxGgBVpQW2Wt+fBPT5-e_HUOgnS1J3xA@mail.gmail.com>
	<CACALY+TfZRR2Rq358bqFHQtsqJLSfTxyYUPM_4U4ifeGzZaNMw@mail.gmail.com>
	<CADt_azYspnZOT4vg096VyXhgRFvDLQAuJLVPX23a_i+9J81cew@mail.gmail.com>
	<CADt_azYmhRZdWG0csC=OT_KYXkzD1Ly+KN6YoXiWdgd1a_cP6Q@mail.gmail.com>
Message-ID: <CACALY+QagDj+tuO953Q8xK5Qsjp-HuJrCnwHF-hcVJsdNd+Arg@mail.gmail.com>

Noon,

As far as I see the DWG driver is compiled as a plugin so you should either
place it into a /gdalplugins subdirectory from where your application is
running, or set the location of this dll in the GDAL_DRIVER_PATH
environment variable.
Also make sure the location of the dll-s from the dependent libs are also
added in PATH.

Best regards,

Tamas




2012/11/3 Noon Silk <noonslists+gdal at gmail.com>

> Hi,
>
>  So, further to this, I've not had much luck with my previous
> approach. I'm going to now try this method; but I kind of want to
> understand why what I tried didn't work.
>
>  What I mean by "Didn't work" is that my requests to open DWG files,
> or just grab an instance of the DWG driver, didn't work.
>
>  I ask for an instance like so (in C#):
>
>  Ogr.RegisterAll();
>  Driver d = Ogr.GetDriverByName("DWG");
>
>  "d" comes back as null. So, I expected it to return something given
> that I thought I was correctly "enablding" the DWG library. But, I
> also checked to see if the number of available drivers changed, after
> me doing what I would've expected to result in the enablding. Sadly,
> it didn't. So I can only assume that I didn't enanble it correctly.
>
>  So, my process for enabling the DWG driver was basically to allow it
> to be compiled as part of the "gdal\ogr\ogrsf_frmts\makefile.vc" (by
> adding in the directory and the obj files). I also set up the required
> Teigha libraries by uncommenting and correctly setting the particular
> bits of nmake.opt.
>
>  Then the only other change I made was to generate the SWIG bindings.
>
>  Is this the correct way to enable the dwg bindings? Is there
> something obvious I've missed? Would linking this other -dev build
> script with the particular source work better?
>
> Thanks,
> --
> Noon
>
>
>
>
> On Fri, Nov 2, 2012 at 9:30 AM, Noon Silk <noonslists+gdal at gmail.com>
> wrote:
> > On Mon, Oct 29, 2012 at 11:34 PM, Tamas Szekeres <szekerest at gmail.com>
> wrote:
> >> You might also take a look at the -dev packages at
> >> http://www.gisinternals.com/sdk/
> >> The compilation is controlled by a single makefile, so you can use:
> >>
> >> nmake gdal
> >> nmake gdal-csharp
> >
> > Thanks; I happened to grab the "MSVC2005 (Win64) -development", which
> > doesn't have that ..., I'll give this a go.
> >
> >
> >> to achieve the desired result.
> >>
> >> Best regards,
> >>
> >> Tamas
> >
> > --
> > Noon
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121103/d3db55d8/attachment.html>

From noonslists+gdal at gmail.com  Sat Nov  3 21:51:23 2012
From: noonslists+gdal at gmail.com (Noon Silk)
Date: Sun, 4 Nov 2012 15:51:23 +1100
Subject: [gdal-dev] Ogr and Dwg via Teigha (in C#)
In-Reply-To: <CACALY+QagDj+tuO953Q8xK5Qsjp-HuJrCnwHF-hcVJsdNd+Arg@mail.gmail.com>
References: <CADt_azZ1n2SoQmgrhrbYsPxUX57JGvBCbosjx76xzZp9jvgeCQ@mail.gmail.com>
	<CACALY+Rx3XcqsrmGRseXFK-qnscxdqPPN7axZOspf2B07kTo4A@mail.gmail.com>
	<CADt_azadkw7vg20xOpCRRy6HvEk6YBDJefY-zr3S3XEvap8fRw@mail.gmail.com>
	<CADt_azZghV5zx+kX2LcW-3nuOD71zDcy2vY0k_7AGE4AMWRy9Q@mail.gmail.com>
	<CACALY+Q8N5bCTA7hu_KCysGfusJfP5mB5rkDjRqGJBJ8-zh0gQ@mail.gmail.com>
	<CADt_azaptvg17NaSUpWxGgBVpQW2Wt+fBPT5-e_HUOgnS1J3xA@mail.gmail.com>
	<CACALY+TfZRR2Rq358bqFHQtsqJLSfTxyYUPM_4U4ifeGzZaNMw@mail.gmail.com>
	<CADt_azYspnZOT4vg096VyXhgRFvDLQAuJLVPX23a_i+9J81cew@mail.gmail.com>
	<CADt_azYmhRZdWG0csC=OT_KYXkzD1Ly+KN6YoXiWdgd1a_cP6Q@mail.gmail.com>
	<CACALY+QagDj+tuO953Q8xK5Qsjp-HuJrCnwHF-hcVJsdNd+Arg@mail.gmail.com>
Message-ID: <CADt_azYsLfafnnd4tC5AVYG+ssRnsqrWiqfnjS=cxXaGEaqBfw@mail.gmail.com>

Hi Tamas,

 Thanks; I think you're right. So I started to follow the advice on
building the plugins here:
<http://trac.osgeo.org/gdal/wiki/BuildingOnWindows> only to find that
the build appears to be referencing some libs that don't come with the
particular Teigha download that I have.

 It's referencing "TD_FT.lib", "Jpeg.lib", and probably less
importantly, "OdBagFiler.lib" (the last one seemingly being related to
one of the Teigha example projects).

 I'm a bit out of luck, here, because when I just comment these lines
including these libs out (in the hope that they aren't included
because they aren't needed) it doesn't compile (possibly related to
the Jpeg stuff).


On Sun, Nov 4, 2012 at 8:31 AM, Tamas Szekeres <szekerest at gmail.com> wrote:
> Noon,
>
> As far as I see the DWG driver is compiled as a plugin so you should either
> place it into a /gdalplugins subdirectory from where your application is
> running, or set the location of this dll in the GDAL_DRIVER_PATH environment
> variable.
> Also make sure the location of the dll-s from the dependent libs are also
> added in PATH.
>
> Best regards,
>
> Tamas
>
>
>
>
> 2012/11/3 Noon Silk <noonslists+gdal at gmail.com>
>>
>> Hi,
>>
>>  So, further to this, I've not had much luck with my previous
>> approach. I'm going to now try this method; but I kind of want to
>> understand why what I tried didn't work.
>>
>>  What I mean by "Didn't work" is that my requests to open DWG files,
>> or just grab an instance of the DWG driver, didn't work.
>>
>>  I ask for an instance like so (in C#):
>>
>>  Ogr.RegisterAll();
>>  Driver d = Ogr.GetDriverByName("DWG");
>>
>>  "d" comes back as null. So, I expected it to return something given
>> that I thought I was correctly "enablding" the DWG library. But, I
>> also checked to see if the number of available drivers changed, after
>> me doing what I would've expected to result in the enablding. Sadly,
>> it didn't. So I can only assume that I didn't enanble it correctly.
>>
>>  So, my process for enabling the DWG driver was basically to allow it
>> to be compiled as part of the "gdal\ogr\ogrsf_frmts\makefile.vc" (by
>> adding in the directory and the obj files). I also set up the required
>> Teigha libraries by uncommenting and correctly setting the particular
>> bits of nmake.opt.
>>
>>  Then the only other change I made was to generate the SWIG bindings.
>>
>>  Is this the correct way to enable the dwg bindings? Is there
>> something obvious I've missed? Would linking this other -dev build
>> script with the particular source work better?
>>
>> Thanks,
>> --
>> Noon
>>
>>
>>
>>
>> On Fri, Nov 2, 2012 at 9:30 AM, Noon Silk <noonslists+gdal at gmail.com>
>> wrote:
>> > On Mon, Oct 29, 2012 at 11:34 PM, Tamas Szekeres <szekerest at gmail.com>
>> > wrote:
>> >> You might also take a look at the -dev packages at
>> >> http://www.gisinternals.com/sdk/
>> >> The compilation is controlled by a single makefile, so you can use:
>> >>
>> >> nmake gdal
>> >> nmake gdal-csharp
>> >
>> > Thanks; I happened to grab the "MSVC2005 (Win64) -development", which
>> > doesn't have that ..., I'll give this a go.
>> >
>> >
>> >> to achieve the desired result.
>> >>
>> >> Best regards,
>> >>
>> >> Tamas
>> >
>> > --
>> > Noon
>
>

From landa.martin at gmail.com  Sun Nov  4 04:23:03 2012
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 4 Nov 2012 13:23:03 +0100
Subject: [gdal-dev] OGR-VFK in 1.9
In-Reply-To: <CA+Ei1Oce71j8AzSH2rAQPGP2Avf4jQuOTMCQ9vsZ_HwH-9L-bQ@mail.gmail.com>
References: <CA+Ei1OdT2y5sB14Ro11RNZWv5hMOTtUUJOGj9aQvchiG5mLYhw@mail.gmail.com>
	<CA+TxYvMK7JGnUXeD1UMhBY5OHtccPkB3zizjm+7p6WUsspHARg@mail.gmail.com>
	<CA+Ei1Oce71j8AzSH2rAQPGP2Avf4jQuOTMCQ9vsZ_HwH-9L-bQ@mail.gmail.com>
Message-ID: <CA+Ei1OdqmMxrdArgEEnU-0Qx2vVuZBGgVA0rTxzan6VbUJt5OQ@mail.gmail.com>

Hi,

2012/10/26 Martin Landa <landa.martin at gmail.com>:
>> However, as your changes only affect your driver, I think it would be
>> easier to commit them to 1.9.0 without an RFC.  It would be easier if
>> you prepare a small wiki page (similar to RFCs) describing the
>> changes, and create at least one bug entry.
>
> I have filled the ticket for this issue [1]. If a wiki page is also
> required I will prepare it too.
>
> Thanks for info in advance. Best regards, Martin
>
> [1] http://trac.osgeo.org/gdal/ticket/4872

important from my POV is to include the updated VFK driver in 1.9.3.
Suggested changes affects only VFK driver. Are there any objections
for backporting VFK driver to 1.9 branch?

Thanks, Martin

--
Martin Landa <landa.martin gmail.com> * http://geo.fsv.cvut.cz/~landa

From noonslists+gdal at gmail.com  Sun Nov  4 15:04:09 2012
From: noonslists+gdal at gmail.com (Noon Silk)
Date: Mon, 5 Nov 2012 10:04:09 +1100
Subject: [gdal-dev] Ogr and Dwg via Teigha (in C#)
In-Reply-To: <CADt_azYsLfafnnd4tC5AVYG+ssRnsqrWiqfnjS=cxXaGEaqBfw@mail.gmail.com>
References: <CADt_azZ1n2SoQmgrhrbYsPxUX57JGvBCbosjx76xzZp9jvgeCQ@mail.gmail.com>
	<CACALY+Rx3XcqsrmGRseXFK-qnscxdqPPN7axZOspf2B07kTo4A@mail.gmail.com>
	<CADt_azadkw7vg20xOpCRRy6HvEk6YBDJefY-zr3S3XEvap8fRw@mail.gmail.com>
	<CADt_azZghV5zx+kX2LcW-3nuOD71zDcy2vY0k_7AGE4AMWRy9Q@mail.gmail.com>
	<CACALY+Q8N5bCTA7hu_KCysGfusJfP5mB5rkDjRqGJBJ8-zh0gQ@mail.gmail.com>
	<CADt_azaptvg17NaSUpWxGgBVpQW2Wt+fBPT5-e_HUOgnS1J3xA@mail.gmail.com>
	<CACALY+TfZRR2Rq358bqFHQtsqJLSfTxyYUPM_4U4ifeGzZaNMw@mail.gmail.com>
	<CADt_azYspnZOT4vg096VyXhgRFvDLQAuJLVPX23a_i+9J81cew@mail.gmail.com>
	<CADt_azYmhRZdWG0csC=OT_KYXkzD1Ly+KN6YoXiWdgd1a_cP6Q@mail.gmail.com>
	<CACALY+QagDj+tuO953Q8xK5Qsjp-HuJrCnwHF-hcVJsdNd+Arg@mail.gmail.com>
	<CADt_azYsLfafnnd4tC5AVYG+ssRnsqrWiqfnjS=cxXaGEaqBfw@mail.gmail.com>
Message-ID: <CADt_azbXB3Kj0_6DyGW55x6xEK0Yaf9u3a-nOHE3bGtGoUa6GA@mail.gmail.com>

Hi Tamas,

 So it turns out that these libraries aren't really required; and the
build error I saw was because of a slight bug in the makefile for DWG.

 The "DXF_OBJ" variable needs to be: "DXF_OBJ = ..\dxf\intronurbs.obj
..\dxf\ogrdxf_polyline_smooth.obj ..\dxf\ogr_autocad_services.obj",
i.e. it needs to also include the "ogr_autocad_services.obj" file,
which defines "ACTextUnescape", and afew others, that both libraries
use.

 At least I now get a working ogr_DWG.dll, and it seems to read the
files! So thanks for pointing me to the plugin approach, that appears
to be the main thing I was missing.

--
Noon

On Sun, Nov 4, 2012 at 3:51 PM, Noon Silk <noonslists+gdal at gmail.com> wrote:
> Hi Tamas,
>
>  Thanks; I think you're right. So I started to follow the advice on
> building the plugins here:
> <http://trac.osgeo.org/gdal/wiki/BuildingOnWindows> only to find that
> the build appears to be referencing some libs that don't come with the
> particular Teigha download that I have.
>
>  It's referencing "TD_FT.lib", "Jpeg.lib", and probably less
> importantly, "OdBagFiler.lib" (the last one seemingly being related to
> one of the Teigha example projects).
>
>  I'm a bit out of luck, here, because when I just comment these lines
> including these libs out (in the hope that they aren't included
> because they aren't needed) it doesn't compile (possibly related to
> the Jpeg stuff).
>
>
> On Sun, Nov 4, 2012 at 8:31 AM, Tamas Szekeres <szekerest at gmail.com> wrote:
>> Noon,
>>
>> As far as I see the DWG driver is compiled as a plugin so you should either
>> place it into a /gdalplugins subdirectory from where your application is
>> running, or set the location of this dll in the GDAL_DRIVER_PATH environment
>> variable.
>> Also make sure the location of the dll-s from the dependent libs are also
>> added in PATH.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>>
>> 2012/11/3 Noon Silk <noonslists+gdal at gmail.com>
>>>
>>> Hi,
>>>
>>>  So, further to this, I've not had much luck with my previous
>>> approach. I'm going to now try this method; but I kind of want to
>>> understand why what I tried didn't work.
>>>
>>>  What I mean by "Didn't work" is that my requests to open DWG files,
>>> or just grab an instance of the DWG driver, didn't work.
>>>
>>>  I ask for an instance like so (in C#):
>>>
>>>  Ogr.RegisterAll();
>>>  Driver d = Ogr.GetDriverByName("DWG");
>>>
>>>  "d" comes back as null. So, I expected it to return something given
>>> that I thought I was correctly "enablding" the DWG library. But, I
>>> also checked to see if the number of available drivers changed, after
>>> me doing what I would've expected to result in the enablding. Sadly,
>>> it didn't. So I can only assume that I didn't enanble it correctly.
>>>
>>>  So, my process for enabling the DWG driver was basically to allow it
>>> to be compiled as part of the "gdal\ogr\ogrsf_frmts\makefile.vc" (by
>>> adding in the directory and the obj files). I also set up the required
>>> Teigha libraries by uncommenting and correctly setting the particular
>>> bits of nmake.opt.
>>>
>>>  Then the only other change I made was to generate the SWIG bindings.
>>>
>>>  Is this the correct way to enable the dwg bindings? Is there
>>> something obvious I've missed? Would linking this other -dev build
>>> script with the particular source work better?
>>>
>>> Thanks,
>>> --
>>> Noon
>>>
>>>
>>>
>>>
>>> On Fri, Nov 2, 2012 at 9:30 AM, Noon Silk <noonslists+gdal at gmail.com>
>>> wrote:
>>> > On Mon, Oct 29, 2012 at 11:34 PM, Tamas Szekeres <szekerest at gmail.com>
>>> > wrote:
>>> >> You might also take a look at the -dev packages at
>>> >> http://www.gisinternals.com/sdk/
>>> >> The compilation is controlled by a single makefile, so you can use:
>>> >>
>>> >> nmake gdal
>>> >> nmake gdal-csharp
>>> >
>>> > Thanks; I happened to grab the "MSVC2005 (Win64) -development", which
>>> > doesn't have that ..., I'll give this a go.
>>> >
>>> >
>>> >> to achieve the desired result.
>>> >>
>>> >> Best regards,
>>> >>
>>> >> Tamas
>>> >
>>> > --
>>> > Noon
>>
>>

From oki at hunes.co.jp  Sun Nov  4 17:12:47 2012
From: oki at hunes.co.jp (OKI Miyuki)
Date: Mon, 05 Nov 2012 10:12:47 +0900
Subject: [gdal-dev] ogr I/O language problem patch.
Message-ID: <20121105101246.F1B8.ED6D4690@hunes.co.jp>


Hi, all.

  I made patch for GDAL/ogr command line program
on windows platform.

https://www.box.com/s/tqvek2gso065iq7lmo3c

ogr_lang.diff   is patch for version 'gdal-2.0dev.'
https://svn.osgeo.org/gdal/trunk/gdal

This patch concept is 'using CP_ACP' for command line program.
CP_ACP description was here.
http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130(v=vs.85).aspx

First time, on windows platform, it's fine to
run batch file with UTF-8. But argument charcter code 
chagned through. To understand this problem, 
see follow test code.
https://www.box.com/s/zi6ugdjcjrwf7h4ycj7c


Cheers,
Miyuki OKI


From warmerdam at pobox.com  Sun Nov  4 20:29:24 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun, 04 Nov 2012 20:29:24 -0800
Subject: [gdal-dev] ogr I/O language problem patch.
In-Reply-To: <20121105101246.F1B8.ED6D4690@hunes.co.jp>
References: <20121105101246.F1B8.ED6D4690@hunes.co.jp>
Message-ID: <509740A4.7080000@pobox.com>

On 12-11-04 05:12 PM, OKI Miyuki wrote:
>
> Hi, all.
>
>    I made patch for GDAL/ogr command line program
> on windows platform.
>
> https://www.box.com/s/tqvek2gso065iq7lmo3c
>
> ogr_lang.diff   is patch for version 'gdal-2.0dev.'
> https://svn.osgeo.org/gdal/trunk/gdal
>
> This patch concept is 'using CP_ACP' for command line program.
> CP_ACP description was here.
> http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130(v=vs.85).aspx
>
> First time, on windows platform, it's fine to
> run batch file with UTF-8. But argument charcter code
> chagned through. To understand this problem,
> see follow test code.
> https://www.box.com/s/zi6ugdjcjrwf7h4ycj7c

Miyuki,

The patch looks promising.  Could you file it as a GDAL ticket at:

   http://trac.osgeo.org/gdal/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From oki at hunes.co.jp  Sun Nov  4 23:22:45 2012
From: oki at hunes.co.jp (OKI Miyuki)
Date: Mon, 05 Nov 2012 16:22:45 +0900
Subject: [gdal-dev] ogr I/O language problem patch.
In-Reply-To: <509740A4.7080000@pobox.com>
References: <20121105101246.F1B8.ED6D4690@hunes.co.jp>
	<509740A4.7080000@pobox.com>
Message-ID: <20121105162244.4275.ED6D4690@hunes.co.jp>

> On 12-11-04 05:12 PM, OKI Miyuki wrote:
> >
> > Hi, all.
> >
> >    I made patch for GDAL/ogr command line program
> > on windows platform.
> >
> > https://www.box.com/s/tqvek2gso065iq7lmo3c
> >
> > ogr_lang.diff   is patch for version 'gdal-2.0dev.'
> > https://svn.osgeo.org/gdal/trunk/gdal
> 
On 12-11-04 20:29, Frank Warmerdam wrote:
> Miyuki,
> 
> The patch looks promising.  Could you file it as a GDAL ticket at:
> 
>    http://trac.osgeo.org/gdal/
> 
Hi, Frank.

 Thank you for reply !

  I have OSGeo account 'okimiyuki'.
But I forgot password (>_<)/
So I can't create new ticket...

OSGeo 'reset password form' is not accessable.
https://www.osgeo.org/cgi-bin/auth/ldap_edit_user.py

Does anyone know any idea?

Cheers,
Miyuki OKI


From ari.jolma at gmail.com  Mon Nov  5 00:49:25 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon, 05 Nov 2012 10:49:25 +0200
Subject: [gdal-dev] ogr I/O language problem patch.
In-Reply-To: <20121105162244.4275.ED6D4690@hunes.co.jp>
References: <20121105101246.F1B8.ED6D4690@hunes.co.jp>
	<509740A4.7080000@pobox.com>
	<20121105162244.4275.ED6D4690@hunes.co.jp>
Message-ID: <50977D95.3040302@gmail.com>

On 11/05/2012 09:22 AM, OKI Miyuki wrote:
> I have OSGeo account 'okimiyuki'. But I forgot password (>_<)/ So I 
> can't create new ticket... OSGeo 'reset password form' is not 
> accessable. https://www.osgeo.org/cgi-bin/auth/ldap_edit_user.py Does 
> anyone know any idea?

In the login page

https://wiki.osgeo.org/index.php?title=Special:UserLogin&returnto=Main_Page

There is an option to reset the password. I think this should work for 
you(?).

Ari


From even.rouault at mines-paris.org  Mon Nov  5 01:49:59 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 05 Nov 2012 10:49:59 +0100
Subject: [gdal-dev] OGR-VFK in 1.9
In-Reply-To: <CA+Ei1OdqmMxrdArgEEnU-0Qx2vVuZBGgVA0rTxzan6VbUJt5OQ@mail.gmail.com>
References: <CA+Ei1OdT2y5sB14Ro11RNZWv5hMOTtUUJOGj9aQvchiG5mLYhw@mail.gmail.com>
	<CA+TxYvMK7JGnUXeD1UMhBY5OHtccPkB3zizjm+7p6WUsspHARg@mail.gmail.com>
	<CA+Ei1Oce71j8AzSH2rAQPGP2Avf4jQuOTMCQ9vsZ_HwH-9L-bQ@mail.gmail.com>
	<CA+Ei1OdqmMxrdArgEEnU-0Qx2vVuZBGgVA0rTxzan6VbUJt5OQ@mail.gmail.com>
Message-ID: <1352108999.50978bc72014d@imp.free.fr>

Selon Martin Landa <landa.martin at gmail.com>:

> Hi,
>
> 2012/10/26 Martin Landa <landa.martin at gmail.com>:
> >> However, as your changes only affect your driver, I think it would be
> >> easier to commit them to 1.9.0 without an RFC.  It would be easier if
> >> you prepare a small wiki page (similar to RFCs) describing the
> >> changes, and create at least one bug entry.
> >
> > I have filled the ticket for this issue [1]. If a wiki page is also
> > required I will prepare it too.
> >
> > Thanks for info in advance. Best regards, Martin
> >
> > [1] http://trac.osgeo.org/gdal/ticket/4872
>
> important from my POV is to include the updated VFK driver in 1.9.3.
> Suggested changes affects only VFK driver. Are there any objections
> for backporting VFK driver to 1.9 branch?

Martin,

I don't have objections. My only fear is that the addition of the SQLite
dependency in the VFK driver would cause compilation problems in some
setups/platforms that would have an ancient SQLite version for example. But as
we have already the SQLite dependency in the GML driver, provided you don't use
too recent sqlite3_XXX functions (and a quick grep does not show anything exotic
indeed), this should be OK. Did you also test that the compilation is OK for
people who configure GDAL without the sqlite dependency ?

Even

From etourigny.dev at gmail.com  Mon Nov  5 12:22:07 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 5 Nov 2012 18:22:07 -0200
Subject: [gdal-dev] OGR-VFK in 1.9
In-Reply-To: <1352108999.50978bc72014d@imp.free.fr>
References: <CA+Ei1OdT2y5sB14Ro11RNZWv5hMOTtUUJOGj9aQvchiG5mLYhw@mail.gmail.com>
	<CA+TxYvMK7JGnUXeD1UMhBY5OHtccPkB3zizjm+7p6WUsspHARg@mail.gmail.com>
	<CA+Ei1Oce71j8AzSH2rAQPGP2Avf4jQuOTMCQ9vsZ_HwH-9L-bQ@mail.gmail.com>
	<CA+Ei1OdqmMxrdArgEEnU-0Qx2vVuZBGgVA0rTxzan6VbUJt5OQ@mail.gmail.com>
	<1352108999.50978bc72014d@imp.free.fr>
Message-ID: <CA+TxYvMa0Jr0uLcxZkmjgyKtKnr36wtk4KB6F0M2Y9BW5x6uLA@mail.gmail.com>

in any case, the vfk driver would be optional (or at least could be
disabled), so should not create any problems for people that do not
compile it, right?

Etienne

On Mon, Nov 5, 2012 at 7:49 AM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Selon Martin Landa <landa.martin at gmail.com>:
>
>> Hi,
>>
>> 2012/10/26 Martin Landa <landa.martin at gmail.com>:
>> >> However, as your changes only affect your driver, I think it would be
>> >> easier to commit them to 1.9.0 without an RFC.  It would be easier if
>> >> you prepare a small wiki page (similar to RFCs) describing the
>> >> changes, and create at least one bug entry.
>> >
>> > I have filled the ticket for this issue [1]. If a wiki page is also
>> > required I will prepare it too.
>> >
>> > Thanks for info in advance. Best regards, Martin
>> >
>> > [1] http://trac.osgeo.org/gdal/ticket/4872
>>
>> important from my POV is to include the updated VFK driver in 1.9.3.
>> Suggested changes affects only VFK driver. Are there any objections
>> for backporting VFK driver to 1.9 branch?
>
> Martin,
>
> I don't have objections. My only fear is that the addition of the SQLite
> dependency in the VFK driver would cause compilation problems in some
> setups/platforms that would have an ancient SQLite version for example. But as
> we have already the SQLite dependency in the GML driver, provided you don't use
> too recent sqlite3_XXX functions (and a quick grep does not show anything exotic
> indeed), this should be OK. Did you also test that the compilation is OK for
> people who configure GDAL without the sqlite dependency ?
>
> Even

From oki at hunes.co.jp  Mon Nov  5 19:42:22 2012
From: oki at hunes.co.jp (OKI Miyuki)
Date: Tue, 06 Nov 2012 12:42:22 +0900
Subject: [gdal-dev] ogr I/O language problem patch.
In-Reply-To: <50977D95.3040302@gmail.com>
References: <20121105162244.4275.ED6D4690@hunes.co.jp>
	<50977D95.3040302@gmail.com>
Message-ID: <20121106124221.D9F2.ED6D4690@hunes.co.jp>

On 11/05/12 17:49, Ari Jolma wrote:
> On 11/05/2012 09:22 AM, OKI Miyuki wrote:
> > I have OSGeo account 'okimiyuki'. But I forgot password (>_<)/ So I 
> > can't create new ticket... OSGeo 'reset password form' is not 
> > accessable. https://www.osgeo.org/cgi-bin/auth/ldap_edit_user.py Does 
> > anyone know any idea?
> 
> In the login page
> 
> https://wiki.osgeo.org/index.php?title=Special:UserLogin&returnto=Main_Page
> 
> There is an option to reset the password. I think this should work for 
> you(?).
> 
> Ari

Thanks, Ari !

  The link is wiki account. But I can made new account 'miyukioki'.
(Account 'okimiyuki' can't change password, 
because email address is not valid).

Now I created new ticket.
http://trac.osgeo.org/gdal/ticket/4884

Cheers,
Miyuki OKI.



From nixanz at nixanz.com  Tue Nov  6 16:11:18 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Wed, 7 Nov 2012 11:11:18 +1100
Subject: [gdal-dev] Cannot get spatial reference system from ozi file
Message-ID: <4487C6B4-3AA2-4EF1-8C45-FCC49DEFF856@nixanz.com>

Hi all,

My application is reading in ozi file pairs (.ozf2/.map), warping them and saving out as GeoTIFF or other file formats using GDAL.  It works fine for my own ozf files, but not for the files sent to me by one of my users (who apparently has a large number of files they want to use).

It has been unable to get a useful spatial reference system from the ozi file pair (.ozf2/.map) sent to me (.map content below).  The following code:

------------------
	OGRSpatialReferenceH srcSRS = OSRNewSpatialReference(pszSrcWKT);
	char *srcWKT;

	OSRExportToWkt(srcSRS, &srcWKT);
	printf("\n%s\n\n", srcWKT);
------------------

produces the following output:

------------------
	LOCAL_CS["unnamed",UNIT["unknown",1]]
------------------

Can somebody please help me to use GDAL to obtain a valid spatial reference system from this .map file (content below)?

Note that I'm using a fairly recent build of GDAL trunk that includes all the ozi datums, etc, including "Australian Geodetic 1966" and it is able to get a valid SRS from my own files that use the same ozi datum.

The complete content of the ozi .map file in question is below.

Thanks in anticipation,
Nik.


OziExplorer Map Data File Version 2.2
r2256.jgw
D:\Documents and Settings\nelsonp\My Documents\General Admin\Personal\Tasmania 1 to 25,000\North West OZF2\r2256.ozf2
1 ,Map Code,
Australian Geodetic 1966,WGS 84,   0.0000,   0.0000,WGS 84
Reserved 1
Reserved 2
Magnetic Variation,,,E
Map Projection,(UTM) Universal Transverse Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid, 55,219999.09067205,5570000.7412442,S
Point02,xy, 1000, 1000,in, deg,    ,        ,,    ,        ,, grid, 55,223259.16350298,5566740.6684133,S
Point03,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point04,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point05,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point06,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point07,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point08,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point09,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point10,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point11,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point12,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point13,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point14,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point15,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point16,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point17,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point18,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point19,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point20,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point21,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point22,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point23,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point24,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point25,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point26,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point27,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point28,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point29,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point30,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Projection Setup,     0.000000000,  -120.000000000,     0.999600000,            0.00,     -4000000.00,    34.000000000,    40.500000000,,,
Map Feature = MF ; Map Comment = MC     These follow if they exist
Track File = TF      These follow if they exist
Moving Map Parameters = MM?    These follow if they exist
MM0,Yes
MMPNUM,4
MMPXY,1,0,0
MMPXY,2,6136,0
MMPXY,3,6136,3069
MMPXY,4,0,3069
MMPLL,1, 143.721340, -39.973660
MMPLL,2, 143.955261, -39.980047
MMPLL,3, 143.951253, -40.070068
MMPLL,4, 143.717025, -40.063661
MM1B,3.251882
MOP,Map Open Position,0,0
IWH,Map Image Width/Height,6136,3069


From feumar at shaw.ca  Tue Nov  6 16:25:00 2012
From: feumar at shaw.ca (Martin Feuchtwanger)
Date: Tue, 06 Nov 2012 16:25:00 -0800
Subject: [gdal-dev] random crashes upon using ogrinfo or ogr2ogr with FileGDB
Message-ID: <5099AA5C.3050307@shaw.ca>

Using GDAL-OGR 1.9.2  (2012-10-08) with the FileGDB add-on (not sure of 
the version, but i got it at the same time i got GDAL), there's a random 
crash bug upon using ogrinfo or ogr2ogr.
I've tried the following on several different GDB files and there's 
almost always a Windows error message:
ogrinfo.exe has stopped working
     A problem caused the program to stop working correctly....
but it's not always at the same time during the processing.

    ogrinfo --debug on -al <gdb_file>
    OGR: OGROpen(<gdb_file>/02DAE9F8) succeeded as FileGDB.
    OGR: GetLayerCount() = <N>

It usually appears here, and no layers are listed, but sometimes they do 
get listed

    1: <layer1>     (Multi Line String)
    2: <layer1>     (None)
    :
    N: <layerN>     (Multi Polygon)

before the crash. Sometimes the crash occurs part-way through.
The same crash happens when using ogr2ogr to write a GDB file to Postgres:

    ogr2ogr -overwrite --debug on -f "PostgreSQL" PG:<DB_connection>
    <gdb_file>

     ogr2ogr.xe has stopped working
     A problem caused the program to stop working correctly....

I've seen references to using a patch to make 4GB available (instead of 
2GB) for \Program Files (x86)\ programs http://ntcore.com/4gb_patch.php 
but the problem persists even for small GDB files.

I'm guessing it /is /a memory issue, though, because of it's varying 
behavior on my machine and, presumably, has not occurred on the 
programmer's machine.

BTW, the problem seems quite /independent /of the "Invalid function 
arguments." error resulting from the GDB having a non-standard CRS -- it 
happens with GDBs having a standard CRS too.

Is it possible the FileGDB driver is broken?

-- 
Martin Feuchtwangerfeumar at shaw.ca   604-254-0361  Vancouver, BC

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121106/2a0e8872/attachment.html>

From devdatta at tengshe.in  Tue Nov  6 20:45:03 2012
From: devdatta at tengshe.in (Dev3)
Date: Tue, 6 Nov 2012 20:45:03 -0800 (PST)
Subject: [gdal-dev] Is there any way of accesing the GDAL utilities from C#?
Message-ID: <1352263503112-5014441.post@n6.nabble.com>

Hi All!
I am trying to do some data processing in my .NET application. I have found
that my work is done by using just two of the gdal utilities: gdal_rasterize
& gdal_fillnodata.

However, when I downloaded the C# bindings, I realized that the utilities
are not part of it. Is there any quick way of getting the utilities from C#,
or will it be quicker to just use System.Diagnostics.Process.Start() method,
to run the gdal Utilities on the command line?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Is-there-any-way-of-accesing-the-GDAL-utilities-from-C-tp5014441.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From etourigny.dev at gmail.com  Tue Nov  6 23:38:44 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 7 Nov 2012 05:38:44 -0200
Subject: [gdal-dev] Is there any way of accesing the GDAL utilities from
	C#?
In-Reply-To: <1352263503112-5014441.post@n6.nabble.com>
References: <1352263503112-5014441.post@n6.nabble.com>
Message-ID: <CA+TxYvP2UKzGuUERU9JHT5=ru5eNXVG-UJ9+evSLGiZwF-A5kw@mail.gmail.com>

Hi

for now you can use them as command-line apps only, although Even did
mention he wanted to make them available as (python) bindings - this
might make it in 2.0

cheers
Etienne

On Wed, Nov 7, 2012 at 2:45 AM, Dev3 <devdatta at tengshe.in> wrote:
> Hi All!
> I am trying to do some data processing in my .NET application. I have found
> that my work is done by using just two of the gdal utilities: gdal_rasterize
> & gdal_fillnodata.
>
> However, when I downloaded the C# bindings, I realized that the utilities
> are not part of it. Is there any quick way of getting the utilities from C#,
> or will it be quicker to just use System.Diagnostics.Process.Start() method,
> to run the gdal Utilities on the command line?
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/Is-there-any-way-of-accesing-the-GDAL-utilities-from-C-tp5014441.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ari.jolma at gmail.com  Wed Nov  7 00:03:56 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 07 Nov 2012 10:03:56 +0200
Subject: [gdal-dev] Is there any way of accesing the GDAL utilities from
 C#?
In-Reply-To: <CA+TxYvP2UKzGuUERU9JHT5=ru5eNXVG-UJ9+evSLGiZwF-A5kw@mail.gmail.com>
References: <1352263503112-5014441.post@n6.nabble.com>
	<CA+TxYvP2UKzGuUERU9JHT5=ru5eNXVG-UJ9+evSLGiZwF-A5kw@mail.gmail.com>
Message-ID: <509A15EC.1010707@gmail.com>

Folks,

RasterizeLayer and FillNodata have been in the bindings for some time. 
Whether they are usable from a specific language is another thing (some 
typemaps may be missing for example).

Ari

On 11/07/2012 09:38 AM, Etienne Tourigny wrote:
> Hi
>
> for now you can use them as command-line apps only, although Even did
> mention he wanted to make them available as (python) bindings - this
> might make it in 2.0
>
> cheers
> Etienne
>
> On Wed, Nov 7, 2012 at 2:45 AM, Dev3 <devdatta at tengshe.in> wrote:
>> Hi All!
>> I am trying to do some data processing in my .NET application. I have found
>> that my work is done by using just two of the gdal utilities: gdal_rasterize
>> & gdal_fillnodata.
>>
>> However, when I downloaded the C# bindings, I realized that the utilities
>> are not part of it. Is there any quick way of getting the utilities from C#,
>> or will it be quicker to just use System.Diagnostics.Process.Start() method,
>> to run the gdal Utilities on the command line?
>>
>>
>>
>> --
>> View this message in context: http://osgeo-org.1560.n6.nabble.com/Is-there-any-way-of-accesing-the-GDAL-utilities-from-C-tp5014441.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Wed Nov  7 01:40:47 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 7 Nov 2012 10:40:47 +0100
Subject: [gdal-dev] Is there any way of accesing the GDAL utilities from
	C#?
In-Reply-To: <1352263503112-5014441.post@n6.nabble.com>
References: <1352263503112-5014441.post@n6.nabble.com>
Message-ID: <CACALY+RskEXNGZDFLXemVCvVH2oMevKA-S1HdyefeGRC6SKRoA@mail.gmail.com>

With regards to the C# bindings Gdal.FillNodata should work, but
Gdal.RasterizeLayer requires some adjustments. You might file a ticket for
this at http://trac.osgeo.org/gdal/newticket

Best regards,

Tamas



2012/11/7 Dev3 <devdatta at tengshe.in>

> Hi All!
> I am trying to do some data processing in my .NET application. I have found
> that my work is done by using just two of the gdal utilities:
> gdal_rasterize
> & gdal_fillnodata.
>
> However, when I downloaded the C# bindings, I realized that the utilities
> are not part of it. Is there any quick way of getting the utilities from
> C#,
> or will it be quicker to just use System.Diagnostics.Process.Start()
> method,
> to run the gdal Utilities on the command line?
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Is-there-any-way-of-accesing-the-GDAL-utilities-from-C-tp5014441.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121107/ac7f9964/attachment.html>

From radim.blazek at gmail.com  Wed Nov  7 02:52:43 2012
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed, 7 Nov 2012 11:52:43 +0100
Subject: [gdal-dev] Detect if SpatiaLite is available
Message-ID: <CAEMrtYq_=ZBk3Zgj2BdeCoXc0o1+1D4_F1Xk2OVyc-_Wt-8qqw@mail.gmail.com>

Is there a way to detect in C if SQLite driver was compiled with
SpatiaLite and SPATIALITE=YES option may be used?

Radim

From even.rouault at mines-paris.org  Wed Nov  7 03:00:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 07 Nov 2012 12:00:24 +0100
Subject: [gdal-dev] Detect if SpatiaLite is available
In-Reply-To: <CAEMrtYq_=ZBk3Zgj2BdeCoXc0o1+1D4_F1Xk2OVyc-_Wt-8qqw@mail.gmail.com>
References: <CAEMrtYq_=ZBk3Zgj2BdeCoXc0o1+1D4_F1Xk2OVyc-_Wt-8qqw@mail.gmail.com>
Message-ID: <1352286024.509a3f488240e@imp.free.fr>

Selon Radim Blazek <radim.blazek at gmail.com>:

> Is there a way to detect in C if SQLite driver was compiled with
> SpatiaLite and SPATIALITE=YES option may be used?

OGR drivers currently lack a mechanism to expose metadata, so apart from trying
to create a spatialite DB (you can create a in memory one, like /vsimem/foo.db,
if you don't want to spoil the disk), I can't think of a better way to detect
spatialite creation capabilities.

>
> Radim
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From radim.blazek at gmail.com  Wed Nov  7 03:47:27 2012
From: radim.blazek at gmail.com (Radim Blazek)
Date: Wed, 7 Nov 2012 12:47:27 +0100
Subject: [gdal-dev] Detect if SpatiaLite is available
In-Reply-To: <1352286024.509a3f488240e@imp.free.fr>
References: <CAEMrtYq_=ZBk3Zgj2BdeCoXc0o1+1D4_F1Xk2OVyc-_Wt-8qqw@mail.gmail.com>
	<1352286024.509a3f488240e@imp.free.fr>
Message-ID: <CAEMrtYoGRswTfK98Kn=iz24sVPBwY1UW3NO3oorbBrcF5DKKGA@mail.gmail.com>

On Wed, Nov 7, 2012 at 12:00 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Selon Radim Blazek <radim.blazek at gmail.com>:
>
>> Is there a way to detect in C if SQLite driver was compiled with
>> SpatiaLite and SPATIALITE=YES option may be used?
>
> OGR drivers currently lack a mechanism to expose metadata, so apart from trying
> to create a spatialite DB (you can create a in memory one, like /vsimem/foo.db,
> if you don't want to spoil the disk), I can't think of a better way to detect
> spatialite creation capabilities.

Thanks, I forgot about vsimem.

Radim

>>
>> Radim
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>

From CABO at NIRAS.DK  Wed Nov  7 03:49:12 2012
From: CABO at NIRAS.DK (=?utf-8?B?Q2FzcGVyIELDuHJnZXNlbiAoQ0FCTyk=?=)
Date: Wed, 7 Nov 2012 11:49:12 +0000
Subject: [gdal-dev] Is there any way of accesing the GDAL utilities
	from	C#?
In-Reply-To: <CACALY+RskEXNGZDFLXemVCvVH2oMevKA-S1HdyefeGRC6SKRoA@mail.gmail.com>
References: <1352263503112-5014441.post@n6.nabble.com>
	<CACALY+RskEXNGZDFLXemVCvVH2oMevKA-S1HdyefeGRC6SKRoA@mail.gmail.com>
Message-ID: <BCF6B63AE0B25941A7F56567B58A28053510784B@allkexa1.NIRAS.INT>

I have created the ticket:

    http://trac.osgeo.org/gdal/ticket/4888


Best regards,

Casper

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Tamas Szekeres
Sent: 7. november 2012 10:41
To: Dev3
Cc: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Is there any way of accesing the GDAL utilities from C#?

With regards to the C# bindings Gdal.FillNodata should work, but Gdal.RasterizeLayer requires some adjustments. You might file a ticket for this at http://trac.osgeo.org/gdal/newticket

Best regards,

Tamas


2012/11/7 Dev3 <devdatta at tengshe.in<mailto:devdatta at tengshe.in>>
Hi All!
I am trying to do some data processing in my .NET application. I have found
that my work is done by using just two of the gdal utilities: gdal_rasterize
& gdal_fillnodata.

However, when I downloaded the C# bindings, I realized that the utilities
are not part of it. Is there any quick way of getting the utilities from C#,
or will it be quicker to just use System.Diagnostics.Process.Start() method,
to run the gdal Utilities on the command line?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Is-there-any-way-of-accesing-the-GDAL-utilities-from-C-tp5014441.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121107/2a57302b/attachment.html>

From even.rouault at mines-paris.org  Wed Nov  7 11:17:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 7 Nov 2012 20:17:08 +0100
Subject: [gdal-dev] Which version number for the next GDAL release : 1.10 or
	2.0 ?
Message-ID: <201211072017.08371.even.rouault@mines-paris.org>

Hi,

I'm wondering if we shouldn't release GDAL trunk as GDAL 1.10 instead of GDAL 
2.0.

As far as I know, there haven't been yet any change in GDAL trunk that 
qualifies as a major re-architecturing, or that breaks the C API & ABI of the 
GDAL 1.X series. I'm not sure if or when someone will want to tackle one of 
the items listed in http://trac.osgeo.org/gdal/wiki/GDAL20Changes , but this 
would likely defer a release by months, especially if we want a GDAL 2.0 with 
a number of significant changes. And sticking with our traditional yearly 
release rythm seems to me like a good practice. Current trunk has nothing 
revolutionary, but a nice amount of new drivers and fixes/improvements that are 
worth a release.

Thoughts ?

Regards,

Even

From hobu.inc at gmail.com  Wed Nov  7 11:26:44 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed, 7 Nov 2012 13:26:44 -0600
Subject: [gdal-dev] Which version number for the next GDAL release :
	1.10 or 2.0 ?
In-Reply-To: <201211072017.08371.even.rouault@mines-paris.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
Message-ID: <507BFAC8-79F8-4839-BCB7-A42323058A30@gmail.com>


On Nov 7, 2012, at 1:17 PM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Hi,
> 
> I'm wondering if we shouldn't release GDAL trunk as GDAL 1.10 instead of GDAL 
> 2.0.
> 
> As far as I know, there haven't been yet any change in GDAL trunk that 
> qualifies as a major re-architecturing, or that breaks the C API & ABI of the 
> GDAL 1.X series. I'm not sure if or when someone will want to tackle one of 
> the items listed in http://trac.osgeo.org/gdal/wiki/GDAL20Changes , but this 
> would likely defer a release by months, especially if we want a GDAL 2.0 with 
> a number of significant changes. And sticking with our traditional yearly 
> release rythm seems to me like a good practice. Current trunk has nothing 
> revolutionary, but a nice amount of new drivers and fixes/improvements that are 
> worth a release.
> 
> Thoughts ?

I've already baked in some macro checking for 2.0 due to the fact that the master branch has been called this for months. I don't know that others have done the same, but the expectation has been that 2.0 is next for the last year.

I agree that not too many "2.0 worthy" changes have been made to the library, and that's probably a good thing frankly. IMO, it's easier to major_version++ that wiki page and kick that can down the road. Besides, Frank hates double-digit minor versions like 1.10 or 1.26, so he'll probably veto anyway :)

Let's call it 2.0.  People will be pleasantly surprised when they find out it doesn't break anything, unlike most 2.0 releases they've ever touched of just about everything.

Howard

From ari.jolma at gmail.com  Wed Nov  7 11:35:47 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed, 07 Nov 2012 21:35:47 +0200
Subject: [gdal-dev] Which version number for the next GDAL release :
 1.10 or 2.0 ?
In-Reply-To: <201211072017.08371.even.rouault@mines-paris.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
Message-ID: <509AB813.20408@gmail.com>

On 11/07/2012 09:17 PM, Even Rouault wrote:
> Hi,
>
> I'm wondering if we shouldn't release GDAL trunk as GDAL 1.10 instead of GDAL
> 2.0.
>
> As far as I know, there haven't been yet any change in GDAL trunk that
> qualifies as a major re-architecturing, or that breaks the C API & ABI of the
> GDAL 1.X series.

RFC 39 (the layer algebra) does break the C ABI, I believe.

>   I'm not sure if or when someone will want to tackle one of
> the items listed in http://trac.osgeo.org/gdal/wiki/GDAL20Changes , but this
> would likely defer a release by months, especially if we want a GDAL 2.0 with
> a number of significant changes.

How about making the changes to the API but not implement them...?

Ari

>   And sticking with our traditional yearly
> release rythm seems to me like a good practice. Current trunk has nothing
> revolutionary, but a nice amount of new drivers and fixes/improvements that are
> worth a release.
>
> Thoughts ?
>
> Regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Nov  7 11:45:00 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 7 Nov 2012 20:45:00 +0100
Subject: [gdal-dev] Which version number for the next GDAL release :
	1.10 or 2.0 ?
In-Reply-To: <509AB813.20408@gmail.com>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<509AB813.20408@gmail.com>
Message-ID: <201211072045.00995.even.rouault@mines-paris.org>


> 
> RFC 39 (the layer algebra) does break the C ABI, I believe.

No, it does not break anything. It *adds* new entry points, like all previous 
releases have done. Which is OK as far as backward compatibility is concerned.

> How about making the changes to the API but not implement them...?

That's an option that could be done for some changes perhaps, but to do it, 
you must have sufficiently thought to the implementation to come with a good 
API, and when you're at that point, you've already spent enough energy that 
it's better to do the implementation itself rather than coming back to it 
months later.
I'm not sure how users would deal with stub implementations of the API: that 
could be confusing.

From jmckenna at gatewaygeomatics.com  Wed Nov  7 11:46:00 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed, 07 Nov 2012 15:46:00 -0400
Subject: [gdal-dev] random crashes upon using ogrinfo or ogr2ogr with
 FileGDB
In-Reply-To: <5099AA5C.3050307@shaw.ca>
References: <5099AA5C.3050307@shaw.ca>
Message-ID: <509ABA78.301@gatewaygeomatics.com>

On 12-11-06 8:25 PM, Martin Feuchtwanger wrote:
> 
> Is it possible the FileGDB driver is broken?
>

Hello Martin,

The FileGDB driver has been packaged for a while now on Windows for the
MS4W installer (http://www.maptools.org/ms4w/).  It uses File
Geodatabase API 1.2 with GDAL 1.9.1 - you could install that and test
your files.  You can also download a small test gdb file at the bottom
of http://trac.osgeo.org/gdal/wiki/FileGDB

If you have questions about MS4W please send them to the MS4W mailing
list (subscribe at http://lists.maptools.org/mailman/listinfo/ms4w-users).

Until then, I will be upgrading to GDAL 1.9.2 soon, and I will keep my
eyes open for issues like yours.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From polimax at mail.ru  Wed Nov  7 11:51:27 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Wed, 07 Nov 2012 23:51:27 +0400
Subject: [gdal-dev] Which version number for the next GDAL release :
 1.10 or 2.0 ?
In-Reply-To: <201211072017.08371.even.rouault@mines-paris.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
Message-ID: <509ABBBF.2070002@mail.ru>

07.11.2012 23:17, Even Rouault ?????:
> Hi,
>
> I'm wondering if we shouldn't release GDAL trunk as GDAL 1.10 instead of GDAL
> 2.0.
I think that 2.0 is a good motivation to make more global changes. 
Though we have an example of version shift in Linux kernel from 2.x to 3.x.
>
> As far as I know, there haven't been yet any change in GDAL trunk that
> qualifies as a major re-architecturing, or that breaks the C API & ABI of the
> GDAL 1.X series. I'm not sure if or when someone will want to tackle one of
> the items listed in http://trac.osgeo.org/gdal/wiki/GDAL20Changes , but this
> would likely defer a release by months, especially if we want a GDAL 2.0 with
> a number of significant changes. And sticking with our traditional yearly
> release rythm seems to me like a good practice. Current trunk has nothing
> revolutionary, but a nice amount of new drivers and fixes/improvements that are
> worth a release.
>
> Thoughts ?
I think 1.10 is enough.
>
> Regards,
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
Best regards,
Dmitry

From basille at ase-research.org  Wed Nov  7 14:30:26 2012
From: basille at ase-research.org (Mathieu Basille)
Date: Wed, 07 Nov 2012 17:30:26 -0500
Subject: [gdal-dev] gdalinfo on PostGIS rasters (GDAL 1.9)
Message-ID: <509AE102.8050206@ase-research.org>

Dear GDAL developers,

I am currently working with a PostGIS data base, which contains a few 
rasters imported from .img raster files. The rasters work properly in 
PostGIS, and are displayed properly in QGIS. They are projected as WGS84 
(SRID 4326). They were imported using raster2pgsql, such as:

$ raster2pgsql -s 4326 -t 25x25 -I -C -M -F raster.img myschema.myraster | 
psql -h localhost -d mydb -U pguser

In PostGIS, the raster seem fine (they look OK in 'raster_columns'). 
However, if I try to access them using gdalinfo, I only get wrong 
information (i.e. empty raster, wrong coordinate system, etc.). For example:

$ gdalinfo "PG:dbname=mydb host=localhost user=pguser schema=myschema 
table=myraster"
Driver: PostGISRaster/PostGIS Raster driver
Files: none associated
Size is 0, 0
Coordinate System is:
PROJCS["ETRS89 / ETRS-TM33",
     GEOGCS["ETRS89",
         DATUM["European_Terrestrial_Reference_System_1989",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6258"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4258"]],
     UNIT["metre",1,
         AUTHORITY["EPSG","9001"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",15],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",0],
     AUTHORITY["EPSG","3045"],
     AXIS["Northing",NORTH],
     AXIS["Easting",EAST]]
Origin = (0.000000000000000,0.000000000000000)
Pixel Size = (1.000000000000000,1.000000000000000)
Subdatasets:
... [list of all tiles]
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
Lower Left  (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
Upper Right (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
Lower Right (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
Center      (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)

Detailed set-up:
* PostGIS 2.1.0SVN (r10597)
* GDAL 1.9.0, released 2011/12/29
* OS: Debian Wheezy

My ultimate goal is actually to import these rasters in R, but it seems 
that my first problem is between GDAL and PostGIS. Is there anything I'm 
doing wrong here?

Of course, I'd be happy to provide more information if required. Any advice 
would be greatly appreciated!

Mathieu Basille.


PS: I hope I'm using this list properly. Please let me know if you feel 
that the question should be addressed to postgis-devel instead.

-- 

~$ whoami
Mathieu Basille, PhD

~$ locate --details
University of Florida \\
Fort Lauderdale Research and Education Center
(+1) 954-577-6314
http://ase-research.org/basille

~$ fortune
? Le tout est de tout dire, et je manque de mots
Et je manque de temps, et je manque d'audace. ?
  -- Paul ?luard

From hiebert at uvic.ca  Wed Nov  7 14:55:43 2012
From: hiebert at uvic.ca (James Hiebert)
Date: Wed, 7 Nov 2012 14:55:43 -0800
Subject: [gdal-dev] gdalinfo on PostGIS rasters (GDAL 1.9)
In-Reply-To: <509AE102.8050206@ase-research.org>
References: <509AE102.8050206@ase-research.org>
Message-ID: <20121107225542.GG22332@basalt.uvic.ca>

Mathieu,

Might be a couple things going on, but have you properly set the georeferencing properties of your raster?  What is the output of
SELECT st_georeference([raster_column]) from myraster

If they're not set, then you essentially just have a picture in your database (which is why it displays properly in QGIS, but it's probably showing it in pixel space).

See here:
http://postgis.refractions.net/docs/RT_ST_GeoReference.html
http://postgis.refractions.net/docs/RT_ST_SetGeoReference.html

Or you can use ST_SetScale, ST_SetUpperLeft, and ST_SetSkew to do the same thing.

~James

On Wed, Nov 07, 2012 at 05:30:26PM -0500, Mathieu Basille wrote:
> Dear GDAL developers,
> 
> I am currently working with a PostGIS data base, which contains a few 
> rasters imported from .img raster files. The rasters work properly in 
> PostGIS, and are displayed properly in QGIS. They are projected as WGS84 
> (SRID 4326). They were imported using raster2pgsql, such as:
> 
> $ raster2pgsql -s 4326 -t 25x25 -I -C -M -F raster.img myschema.myraster | 
> psql -h localhost -d mydb -U pguser
> 
> In PostGIS, the raster seem fine (they look OK in 'raster_columns'). 
> However, if I try to access them using gdalinfo, I only get wrong 
> information (i.e. empty raster, wrong coordinate system, etc.). For example:
> 
> $ gdalinfo "PG:dbname=mydb host=localhost user=pguser schema=myschema 
> table=myraster"
> Driver: PostGISRaster/PostGIS Raster driver
> Files: none associated
> Size is 0, 0
> Coordinate System is:
> PROJCS["ETRS89 / ETRS-TM33",
>      GEOGCS["ETRS89",
>          DATUM["European_Terrestrial_Reference_System_1989",
>              SPHEROID["GRS 1980",6378137,298.257222101,
>                  AUTHORITY["EPSG","7019"]],
>              TOWGS84[0,0,0,0,0,0,0],
>              AUTHORITY["EPSG","6258"]],
>          PRIMEM["Greenwich",0,
>              AUTHORITY["EPSG","8901"]],
>          UNIT["degree",0.0174532925199433,
>              AUTHORITY["EPSG","9122"]],
>          AUTHORITY["EPSG","4258"]],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      PROJECTION["Transverse_Mercator"],
>      PARAMETER["latitude_of_origin",0],
>      PARAMETER["central_meridian",15],
>      PARAMETER["scale_factor",0.9996],
>      PARAMETER["false_easting",500000],
>      PARAMETER["false_northing",0],
>      AUTHORITY["EPSG","3045"],
>      AXIS["Northing",NORTH],
>      AXIS["Easting",EAST]]
> Origin = (0.000000000000000,0.000000000000000)
> Pixel Size = (1.000000000000000,1.000000000000000)
> Subdatasets:
> ... [list of all tiles]
> Corner Coordinates:
> Upper Left  (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
> Lower Left  (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
> Upper Right (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
> Lower Right (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
> Center      (   0.0000000,   0.0000000) ( 10d30'40.52"E,  0d 0' 0.01"N)
> 
> Detailed set-up:
> * PostGIS 2.1.0SVN (r10597)
> * GDAL 1.9.0, released 2011/12/29
> * OS: Debian Wheezy
> 
> My ultimate goal is actually to import these rasters in R, but it seems 
> that my first problem is between GDAL and PostGIS. Is there anything I'm 
> doing wrong here?
> 
> Of course, I'd be happy to provide more information if required. Any advice 
> would be greatly appreciated!
> 
> Mathieu Basille.
> 
> 
> PS: I hope I'm using this list properly. Please let me know if you feel 
> that the question should be addressed to postgis-devel instead.
> 
> -- 
> 
> ~$ whoami
> Mathieu Basille, PhD
> 
> ~$ locate --details
> University of Florida \\
> Fort Lauderdale Research and Education Center
> (+1) 954-577-6314
> http://ase-research.org/basille
> 
> ~$ fortune
> ? Le tout est de tout dire, et je manque de mots
> Et je manque de temps, et je manque d'audace. ?
>   -- Paul ?luard
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
James Hiebert
Lead, Computational Support
Pacific Climate Impacts Consortium
http://www.pacificclimate.org
Room 112, University House 1, University of Victoria
PO Box 1700 Sta CSC, Victoria, BC V8V 2Y2
E-mail: hiebert at uvic.ca
Tel: (250) 472-4521
Fax: (250) 472-4830

From even.rouault at mines-paris.org  Wed Nov  7 15:03:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 8 Nov 2012 00:03:14 +0100
Subject: [gdal-dev] gdalinfo on PostGIS rasters (GDAL 1.9)
In-Reply-To: <509AE102.8050206@ase-research.org>
References: <509AE102.8050206@ase-research.org>
Message-ID: <201211080003.14203.even.rouault@mines-paris.org>


> Detailed set-up:
> * PostGIS 2.1.0SVN (r10597)
> * GDAL 1.9.0, released 2011/12/29
> * OS: Debian Wheezy

There have been significant fixes done in the PostGISRaster driver in GDAL trunk 
a few weeks ago. You might want to try it.

From feumar at shaw.ca  Wed Nov  7 17:13:36 2012
From: feumar at shaw.ca (Martin Feuchtwanger)
Date: Wed, 07 Nov 2012 17:13:36 -0800
Subject: [gdal-dev] [Osgeo4w-trac] random crashes upon using ogrinfo or
 ogr2ogr with FileGDB
In-Reply-To: <5099AA5C.3050307@shaw.ca>
References: <5099AA5C.3050307@shaw.ca>
Message-ID: <509B0740.9040409@shaw.ca>

Jeff McKenna suggested (privately) that i try MS4W. He didn't really say why, and i suspected it wouldn't work because both OSGeo4W and MS4W seem to use the same version of the FileGDB driver (at least, both FileGDBAPI.dll files are identical).

However, MS4W is still using GDAL 1.9.1 (2012/05/15) while OSGeo4W is now using GDAL 1.9.2 (2012-10-08), and, running the same ogrinfo and ogr2ogr tests (via OSGeo4W) on GDB files, there are no more crash problems!

Thus, there seems to be a problem with GDAL in the change from 1.9.1 (2012/05/15) to 1.9.2 (2012-10-08), when using FileGDB.

I'm very new here -- should i be reporting this elsewhere?

Martin Feuchtwanger  feumar at shaw.ca  604-254-0361
On 06/11/2012 4:25 PM, Martin Feuchtwanger wrote:

> Using GDAL-OGR 1.9.2  (2012-10-08) with the FileGDB add-on (not sure 
> of the version, but i got it at the same time i got GDAL), there's a 
> random crash bug upon using ogrinfo or ogr2ogr.
> I've tried the following on several different GDB files and there's 
> almost always a Windows error message:
> ogrinfo.exe has stopped working
>     A problem caused the program to stop working correctly....
> but it's not always at the same time during the processing.
>
>     ogrinfo --debug on -al <gdb_file>
>     OGR: OGROpen(<gdb_file>/02DAE9F8) succeeded as FileGDB.
>     OGR: GetLayerCount() = <N>
>
> It usually appears here, and no layers are listed, but sometimes they 
> do get listed
>
>     1: <layer1>     (Multi Line String)
>     2: <layer1>     (None)
>     :
>     N: <layerN>     (Multi Polygon)
>
> before the crash. Sometimes the crash occurs part-way through.
> The same crash happens when using ogr2ogr to write a GDB file to Postgres:
>
>     ogr2ogr -overwrite --debug on -f "PostgreSQL" PG:<DB_connection>
>     <gdb_file>
>
>     ogr2ogr.xe has stopped working
>     A problem caused the program to stop working correctly....
>
> I've seen references to using a patch to make 4GB available (instead 
> of 2GB) for \Program Files (x86)\ programs 
> http://ntcore.com/4gb_patch.php but the problem persists even for 
> small GDB files.
>
> I'm guessing it /is /a memory issue, though, because of it's varying 
> behavior on my machine and, presumably, has not occurred on the 
> programmer's machine.
>
> BTW, the problem seems quite /independent /of the "Invalid function 
> arguments." error resulting from the GDB having a non-standard CRS -- 
> it happens with GDBs having a standard CRS too.
>
> Is it possible the FileGDB driver is broken?
> -- 
> Martin Feuchtwangerfeumar at shaw.ca   604-254-0361  Vancouver, BC
>
>
> _______________________________________________
> Osgeo4w-trac mailing list
> Osgeo4w-trac at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/osgeo4w-trac

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121107/8f66811d/attachment.html>

From warmerdam at pobox.com  Wed Nov  7 17:45:00 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed, 07 Nov 2012 17:45:00 -0800
Subject: [gdal-dev] [Osgeo4w-trac] random crashes upon using ogrinfo or
 ogr2ogr with FileGDB
In-Reply-To: <509B0740.9040409@shaw.ca>
References: <5099AA5C.3050307@shaw.ca> <509B0740.9040409@shaw.ca>
Message-ID: <509B0E9C.1030103@pobox.com>

On 12-11-07 05:13 PM, Martin Feuchtwanger wrote:
> Jeff McKenna suggested (privately) that i try MS4W. He didn't really say why, and i suspected it wouldn't work because both OSGeo4W and MS4W seem to use the same version of the FileGDB driver (at least, both FileGDBAPI.dll files are identical).
>
> However, MS4W is still using GDAL 1.9.1 (2012/05/15) while OSGeo4W is now using GDAL 1.9.2 (2012-10-08), and, running the same ogrinfo and ogr2ogr tests (via OSGeo4W) on GDB files, there are no more crash problems!
>
> Thus, there seems to be a problem with GDAL in the change from 1.9.1 (2012/05/15) to 1.9.2 (2012-10-08), when using FileGDB.
>
> I'm very new here -- should i be reporting this elsewhere?
>
> Martin Feuchtwangerfeumar at shaw.ca   604-254-0361

Martin,

Ah, I suspect this is the same problem as using other OSGeo4W
GDAL plugins with the new version of GDAL built with a different
version of visual studio.

With OSGeo4W you can switch back to the 1.9.1 GDAL version and things
should work.  Hopefully the FileGDB plugin will be rebuilt soon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From etourigny.dev at gmail.com  Thu Nov  8 05:24:12 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 8 Nov 2012 11:24:12 -0200
Subject: [gdal-dev] Which version number for the next GDAL release :
 1.10 or 2.0 ?
In-Reply-To: <509ABBBF.2070002@mail.ru>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<509ABBBF.2070002@mail.ru>
Message-ID: <CA+TxYvNxMd6yV_U5-CahjVNSmmV_4TzGP-pA_K9KEU3QZsV_Jw@mail.gmail.com>

Hi,

I think it should be 1.10, I don't see any major difference with 1.9
and no major api changes. I see it more like an incremental release
than a major milestone.

I recall some time ago a discussion about the unification of ogr and
gdal, and that goal still seems pretty far (unless I missed
something).

How much of the items listed in the following page have been implemented?
http://trac.osgeo.org/gdal/wiki/GDAL20Changes

Let's say you release 2.0 now, and within 1 year there are significant
API breaks, would that require a new 3.0 version ?

Etienne

On Wed, Nov 7, 2012 at 5:51 PM, Dmitry Baryshnikov <polimax at mail.ru> wrote:
> 07.11.2012 23:17, Even Rouault ?????:
>
>> Hi,
>>
>> I'm wondering if we shouldn't release GDAL trunk as GDAL 1.10 instead of
>> GDAL
>> 2.0.
>
> I think that 2.0 is a good motivation to make more global changes. Though we
> have an example of version shift in Linux kernel from 2.x to 3.x.
>
>>
>> As far as I know, there haven't been yet any change in GDAL trunk that
>> qualifies as a major re-architecturing, or that breaks the C API & ABI of
>> the
>> GDAL 1.X series. I'm not sure if or when someone will want to tackle one
>> of
>> the items listed in http://trac.osgeo.org/gdal/wiki/GDAL20Changes , but
>> this
>> would likely defer a release by months, especially if we want a GDAL 2.0
>> with
>> a number of significant changes. And sticking with our traditional yearly
>> release rythm seems to me like a good practice. Current trunk has nothing
>> revolutionary, but a nice amount of new drivers and fixes/improvements
>> that are
>> worth a release.
>>
>> Thoughts ?
>
> I think 1.10 is enough.
>
>>
>> Regards,
>>
>> Even
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> Best regards,
> Dmitry
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From basille at ase-research.org  Thu Nov  8 05:57:08 2012
From: basille at ase-research.org (Mathieu Basille)
Date: Thu, 08 Nov 2012 08:57:08 -0500
Subject: [gdal-dev] gdalinfo on PostGIS rasters (GDAL 1.9)
In-Reply-To: <201211080003.14203.even.rouault@mines-paris.org>
References: <509AE102.8050206@ase-research.org>
	<201211080003.14203.even.rouault@mines-paris.org>
Message-ID: <509BBA34.5050800@ase-research.org>

Dear James and Even,

Thank you for you fast answers!

James, I do have the raster properly referenced (at least from what I 
understand). For example:

mydb=# SELECT st_georeference(rast) FROM myraster WHERE rid=1;
  st_georeference
-----------------
  0.1670000000   +
  0.0000000000   +
  0.0000000000   +
  -0.1670000000  +
  -180.0000000000+
  83.6185000000  +

(1 line)

mydb=# SELECT st_georeference(rast) FROM myraster WHERE rid=100;
  st_georeference
-----------------
  0.1670000000   +
  0.0000000000   +
  0.0000000000   +
  -0.1670000000  +
  -129.9000000000+
  79.4435000000  +

(1 line)

Even, that's what I was afraid of... I think I will give it a try. Is there 
a preferred solution between sources from Subversion and the nightly 
snapshots?
Second, do I understand it correctly that I need to 1) install GDAL from 
sources, and 2) recompile PostGIS on this GDAL version?
Third, can GDAL trunk live together with my current version of GDAL?

Thanks a lot for your help,
Mathieu.


Le 07/11/2012 18:03, Even Rouault a ?crit :
>
>> Detailed set-up:
>> * PostGIS 2.1.0SVN (r10597)
>> * GDAL 1.9.0, released 2011/12/29
>> * OS: Debian Wheezy
>
> There have been significant fixes done in the PostGISRaster driver in GDAL trunk
> a few weeks ago. You might want to try it.

-- 

~$ whoami
Mathieu Basille, PhD

~$ locate --details
University of Florida \\
Fort Lauderdale Research and Education Center
(+1) 954-577-6314
http://ase-research.org/basille

~$ fortune
? Le tout est de tout dire, et je manque de mots
Et je manque de temps, et je manque d'audace. ?
  -- Paul ?luard

From even.rouault at mines-paris.org  Thu Nov  8 10:52:40 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 8 Nov 2012 19:52:40 +0100
Subject: [gdal-dev] gdalinfo on PostGIS rasters (GDAL 1.9)
In-Reply-To: <509BBA34.5050800@ase-research.org>
References: <509AE102.8050206@ase-research.org>
	<201211080003.14203.even.rouault@mines-paris.org>
	<509BBA34.5050800@ase-research.org>
Message-ID: <201211081952.40951.even.rouault@mines-paris.org>

> Even, that's what I was afraid of... I think I will give it a try. Is there
> a preferred solution between sources from Subversion and the nightly
> snapshots?

up to you

> Second, do I understand it correctly that I need to 1) install GDAL from
> sources,

yes

> and 2) recompile PostGIS on this GDAL version?

not necessarily. The raster module of PostGIS doesn't use the GDAL 
PostGISRaster driver (AFAIK)

> Third, can GDAL trunk live together with my current version of GDAL?

Yes, you have to ./configure --prefix=/some/path and then by adjusting the PATH 
and LD_LIBRARY_PATH environmenet variables, you can run your custom build of 
GDAL.

From even.rouault at mines-paris.org  Thu Nov  8 11:03:16 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 8 Nov 2012 20:03:16 +0100
Subject: [gdal-dev] Which version number for the next GDAL release :
	1.10 or 2.0 ?
In-Reply-To: <CA+TxYvNxMd6yV_U5-CahjVNSmmV_4TzGP-pA_K9KEU3QZsV_Jw@mail.gmail.com>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<509ABBBF.2070002@mail.ru>
	<CA+TxYvNxMd6yV_U5-CahjVNSmmV_4TzGP-pA_K9KEU3QZsV_Jw@mail.gmail.com>
Message-ID: <201211082003.16694.even.rouault@mines-paris.org>

Le jeudi 08 novembre 2012 14:24:12, Etienne Tourigny a ?crit :
> Hi,
> 
> I think it should be 1.10, I don't see any major difference with 1.9
> and no major api changes. I see it more like an incremental release
> than a major milestone.

Yes, exactly

> 
> I recall some time ago a discussion about the unification of ogr and
> gdal, and that goal still seems pretty far (unless I missed
> something).

Yes, that's something I believe Frank has in mind from a long time.

> 
> How much of the items listed in the following page have been implemented?
> http://trac.osgeo.org/gdal/wiki/GDAL20Changes

None AFAIK

> 
> Let's say you release 2.0 now, and within 1 year there are significant
> API breaks, would that require a new 3.0 version ?

Yes, likely. But a 3.0 would not be a problem per se however (even if it would 
be strange that in one year there would be two major versions whereas there 
was only one in more than 10 years ;-))

What disturbs be more is that a 2.0 without API breaks doesn't respect the 
usual logic for version numbering and the expectations that users would tend 
to have. Or if we do this, then it means that the version number wouldn't 
particularly reflect API breakage and then we should just release GDAL 2, GDAL 
3, GDAL 4, etc...


From ari.jolma at gmail.com  Thu Nov  8 11:10:43 2012
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 8 Nov 2012 19:10:43 +0000
Subject: [gdal-dev] Which version number for the next GDAL release :
 1.10 or 2.0 ?
Message-ID: <16837247592816103@unknownmsgid>

Concerning the stub implementations, there are a lot of examples where the
current api contains arguments, which are just stubs for future...



--



L?hetetty Nokia N9 -puhelimestani



Even Rouault kirjoitti 7.11.2012 21:45:

>
> RFC 39 (the layer algebra) does break the C ABI, I believe.

No, it does not break anything. It *adds* new entry points, like all
previous
releases have done. Which is OK as far as backward compatibility is
concerned.

> How about making the changes to the API but not implement them...?

That's an option that could be done for some changes perhaps, but to do it,
you must have sufficiently thought to the implementation to come with a good
API, and when you're at that point, you've already spent enough energy that
it's better to do the implementation itself rather than coming back to it
months later.
I'm not sure how users would deal with stub implementations of the API: that
could be confusing.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121108/cd364462/attachment.html>

From warmerdam at pobox.com  Thu Nov  8 12:14:14 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 08 Nov 2012 12:14:14 -0800
Subject: [gdal-dev] Which version number for the next GDAL release :
 1.10 or 2.0 ?
In-Reply-To: <201211082003.16694.even.rouault@mines-paris.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<509ABBBF.2070002@mail.ru>
	<CA+TxYvNxMd6yV_U5-CahjVNSmmV_4TzGP-pA_K9KEU3QZsV_Jw@mail.gmail.com>
	<201211082003.16694.even.rouault@mines-paris.org>
Message-ID: <509C1296.3070805@pobox.com>


Folks,

While I hate ".10" versions it is clear that I/we aren't yet doing the
2.0 "grand unification" and so I don't feel a 2.0 version is appropriate
given the nature of current work.

I had originally though to just hold off on the release for longer to
allow for 2.0 work to be done, but I haven't even started and it is
November, so I think it is better to realize I'm not up to it for now.

In summary, my position is that we should produce a 1.10 release
circa the end of year.

I appologise to Howard or others who have been tuning configuration logic
for a 2.0 release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From even.rouault at mines-paris.org  Thu Nov  8 13:49:51 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 8 Nov 2012 22:49:51 +0100
Subject: [gdal-dev] Which version number for the next GDAL release :
	1.10 or 2.0 ?
In-Reply-To: <509C1296.3070805@pobox.com>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<201211082003.16694.even.rouault@mines-paris.org>
	<509C1296.3070805@pobox.com>
Message-ID: <201211082249.51944.even.rouault@mines-paris.org>


> I appologise to Howard or others who have been tuning configuration logic
> for a 2.0 release.

It depends on how they have tuned...

We have a small technical detail to solve with 1.10 because of
#  define GDAL_VERSION_NUM      
(GDAL_VERSION_MAJOR*1000+GDAL_VERSION_MINOR*100+GDAL_VERSION_REV*10+GDAL_VERSION_BUILD)

With the current definition 1.10 and 2.0 would resolve to 2000... Annoying.

So we would need to redefine it likely as 

#  define GDAL_VERSION_NUM      
(GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100+GDAL_VERSION_BUILD)

and 1.10 would then be 1100000 which is still greater than 2000 ...

So if people have already tested GDAL_VERSION_NUM >= 2000, this would still 
work...

~~~~~~~~~~~~~~~

I'm also wondering if we shouldn't introduce a macro to compute the version 
number, like
#define GDAL_COMPUTE_VERSION(maj,min,rev, build) 
(maj*1000000+min*10000+rev*100+build)

so that tests can be written more naturally (the new version number would have 
too many zeros, that I bet most people would likely go wrong) :

#if GDAL_VERSION_NUM >= GDAL_COMPUTE_VERSION(1,10,0,0)
// foo
#endif

Annoyingly, as this macro would be new, user code should use it conditionally 
:

#if defined(GDAL_COMPUTE_VERSION)
#if GDAL_VERSION_NUM >= GDAL_COMPUTE_VERSION(1,10,0,0)
// foo
#endif
#endif

> 
> Best regards,

From warmerdam at pobox.com  Thu Nov  8 14:09:16 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 08 Nov 2012 14:09:16 -0800
Subject: [gdal-dev] Which version number for the next GDAL release :
 1.10 or 2.0 ?
In-Reply-To: <201211082249.51944.even.rouault@mines-paris.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<201211082003.16694.even.rouault@mines-paris.org>
	<509C1296.3070805@pobox.com>
	<201211082249.51944.even.rouault@mines-paris.org>
Message-ID: <509C2D8C.2060207@pobox.com>

On 12-11-08 01:49 PM, Even Rouault wrote:
>
>> I appologise to Howard or others who have been tuning configuration logic
>> for a 2.0 release.
>
> It depends on how they have tuned...
>
> We have a small technical detail to solve with 1.10 because of
> #  define GDAL_VERSION_NUM
> (GDAL_VERSION_MAJOR*1000+GDAL_VERSION_MINOR*100+GDAL_VERSION_REV*10+GDAL_VERSION_BUILD)
>
> With the current definition 1.10 and 2.0 would resolve to 2000... Annoying.
>
> So we would need to redefine it likely as
>
> #  define GDAL_VERSION_NUM
> (GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100+GDAL_VERSION_BUILD)
>
> and 1.10 would then be 1100000 which is still greater than 2000 ...

Even,

Ugg.   OK, I now remember this being one of the reasons I'm not in
favor of a 1.10 release.  I'm not too fond of redefining GDAL_VERSION_NUM's
layout.  I wonder if this would cause any surprising problems.

Blech


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From even.rouault at mines-paris.org  Thu Nov  8 14:27:33 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 8 Nov 2012 23:27:33 +0100
Subject: [gdal-dev] Which version number for the next GDAL release :
	1.10 or 2.0 ?
In-Reply-To: <509C2D8C.2060207@pobox.com>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<201211082249.51944.even.rouault@mines-paris.org>
	<509C2D8C.2060207@pobox.com>
Message-ID: <201211082327.33109.even.rouault@mines-paris.org>

Le jeudi 08 novembre 2012 23:09:16, Frank Warmerdam a ?crit :
> On 12-11-08 01:49 PM, Even Rouault wrote:
> >> I appologise to Howard or others who have been tuning configuration
> >> logic for a 2.0 release.
> > 
> > It depends on how they have tuned...
> > 
> > We have a small technical detail to solve with 1.10 because of
> > #  define GDAL_VERSION_NUM
> > (GDAL_VERSION_MAJOR*1000+GDAL_VERSION_MINOR*100+GDAL_VERSION_REV*10+GDAL_
> > VERSION_BUILD)
> > 
> > With the current definition 1.10 and 2.0 would resolve to 2000...
> > Annoying.
> > 
> > So we would need to redefine it likely as
> > 
> > #  define GDAL_VERSION_NUM
> > (GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100
> > +GDAL_VERSION_BUILD)
> > 
> > and 1.10 would then be 1100000 which is still greater than 2000 ...
> 
> Even,
> 
> Ugg.   OK, I now remember this being one of the reasons I'm not in
> favor of a 1.10 release.  I'm not too fond of redefining GDAL_VERSION_NUM's
> layout.  I wonder if this would cause any surprising problems.

I can't imagine any particular problem this would cause. I've tried to think 
at crazy stuff, like dividing GDAL_VERSION_NUM by 100.0, and do for example
#if GDAL_VERSION_NUM / 100.0 >= 1.8

But floating point in preprocessing is not allowed, and even if they did that, 
this would still work with the new way of computation GDAL_VERSION_NUM. The 
only constraint I see is that the version numbers for the next versions are 
greater than the ones of previous releases.

I've checked in QGIS and MapServer, and they both do stuff like :
#if defined(GDAL_VERSION_NUM) && GDAL_VERSION_NUM >= 1600

> 
> Blech

From mateusz at loskot.net  Thu Nov  8 14:42:27 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu, 8 Nov 2012 22:42:27 +0000
Subject: [gdal-dev] Which version number for the next GDAL release :
 1.10 or 2.0 ?
In-Reply-To: <201211082249.51944.even.rouault@mines-paris.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<201211082003.16694.even.rouault@mines-paris.org>
	<509C1296.3070805@pobox.com>
	<201211082249.51944.even.rouault@mines-paris.org>
Message-ID: <CABUeae_uCOmMxUL9nXvwF4QGwfyqWKA=KiYFOSD=_mfKuCgtUA@mail.gmail.com>

On 8 November 2012 21:49, Even Rouault <even.rouault at mines-paris.org> wrote:
>
> I'm also wondering if we shouldn't introduce a macro to compute the version
> number, like
> #define GDAL_COMPUTE_VERSION(maj,min,rev, build)
> (maj*1000000+min*10000+rev*100+build)
>
> so that tests can be written more naturally (the new version number would have
> too many zeros, that I bet most people would likely go wrong) :
>
> #if GDAL_VERSION_NUM >= GDAL_COMPUTE_VERSION(1,10,0,0)
> // foo
> #endif

Yes, please!

Not sure what you mean as the build number,
but here is how Boost computes version numbers:

// BOOST_VERSION % 100 is the patch level
// BOOST_VERSION / 100 % 1000 is the minor version
// BOOST_VERSION / 100000 is the major version
#define BOOST_VERSION 105200

It makes a bit shorter number.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From laoserra at gmail.com  Thu Nov  8 15:03:09 2012
From: laoserra at gmail.com (Luis Serra)
Date: Thu, 8 Nov 2012 23:03:09 +0000
Subject: [gdal-dev] dgn v7 lines to shp
Message-ID: <CAM8nm2YLWDKb7tuVU=rCAsJOH2xhLmHaQSN3nF2Wjco-sxKtuw@mail.gmail.com>

Hi list,

With ogr2ogr commandline, I'm trying to convert a dgn v7 zero length line
to shp point type and nothing happens. Does anyone knows if is it possible
to do so?

Thanks in advance,
Luis Serra
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121108/b60375d8/attachment.html>

From gdal at stripfamily.net  Thu Nov  8 20:13:40 2012
From: gdal at stripfamily.net (David Strip)
Date: Thu, 08 Nov 2012 21:13:40 -0700
Subject: [gdal-dev] Images/datasets with bands with different properties
Message-ID: <509C82F4.5090103@stripfamily.net>

I was looking at the API and it appears, that at least in principle a 
multi-band dataset (and hence the associated input file) could have 
bands with different data types since the type is a property of the 
band, not the dataset. Does this actually happen "in the wild"? If so, 
what file types support this scenario?

Likewise, the bands apparently can have different size rasters (in terms 
of pixel counts), since the raster size is a property of the band. On 
the other hand, the dataset also has a raster size, as well as the 
overall properties of the raster, such as the geo-location of the origin 
and the size of the pixels. If the band doesn't match the dataset 
properties, what do we know about origin, pixel size, etc? If these 
situations don't exist in real datasets, then I'm not particularly 
concerned. In fact, I'd be happiest if someone could tell me to just 
ignore these issues because they don't happen in real life.

From even.rouault at mines-paris.org  Fri Nov  9 00:28:24 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 09 Nov 2012 09:28:24 +0100
Subject: [gdal-dev] Images/datasets with bands with different properties
In-Reply-To: <509C82F4.5090103@stripfamily.net>
References: <509C82F4.5090103@stripfamily.net>
Message-ID: <1352449704.509cbea89428c@imp.free.fr>

Selon David Strip <gdal at stripfamily.net>:

> I was looking at the API and it appears, that at least in principle a
> multi-band dataset (and hence the associated input file) could have
> bands with different data types since the type is a property of the
> band, not the dataset. Does this actually happen "in the wild"? If so,
> what file types support this scenario?

Yes, this is possible, but uncommon. This is easily doable with the VRT
format due to its nature (XML definition of dataset). The NWT_GRD driver can
also expand 4 bands, the 3 first ones being of type Byte and the 4th one of type
Float32. JPEG2000 can also have mixed data types (I see that at least the Jasper
JPEG2000 and JP2KAK drivers support that), although such datasets are not that
common. There might be a few other drivers that support mixed data types, but
you can probably count them with the fingers of one hand.

I'd note that most algorithms in GDAL probably don't deal ideally with such
situations, in the sense that they will generally select their working data type
as being the type of the first band. This is a weak assumption, in the sense
that it will not lead to crashes, but data type conversion will occur through
RasterIO() calls to convert the actual data type of the band to the working data
type used by the algorithm.

>
> Likewise, the bands apparently can have different size rasters (in terms
> of pixel counts), since the raster size is a property of the band. On
> the other hand, the dataset also has a raster size, as well as the
> overall properties of the raster, such as the geo-location of the origin
> and the size of the pixels. If the band doesn't match the dataset
> properties, what do we know about origin, pixel size, etc?

You give indeed strong reason for why this is not allowed. The nRasterXSize and
nRasterYSize members at the band level must be equal to the ones of the dataset
to which they belong too. This is a strong assumption in all GDAL code. A driver
that wouldn't enforce that would cause chaos.

Traditionnaly if you have files with "bands" of different dimensions, you would
model them as separate subdatasets (see http://gdal.org/gdal_datamodel.html )

If you are interested in robustness, you must also be aware that there are
datasets that can have 0 bands. A specially crafted VRT for example, or more
commonly formats such as HDF4, HDF5, etc.. that expose subdatasets.


From jaak at nutiteq.com  Fri Nov  9 00:30:49 2012
From: jaak at nutiteq.com (Jaak Laineste)
Date: Fri, 9 Nov 2012 10:30:49 +0200
Subject: [gdal-dev] Set no-data in AutoCreateWarpedVRT
Message-ID: <68A60CEB-8D84-48D3-9E6B-A7088F177241@nutiteq.com>


 I use AutoCreateWarpedVRT API to open datasource programmatically (Java) in another projection, to use dynamic reprojection. The data (NOAA KAP) is indexed color and has colortable. As you can see in http://d.pr/i/GQKc No-data (if this is the right term) is colored as black, but I would need it to be with my own defined color (fully transparent). It seems it uses just the first color (index:0) from the colortable, so even if I modify color table before warping, the filled area will be same color as 0 (http://d.pr/i/o6Oo).

With following I get desired result:
gdalwarp -t_srs "EPSG:900913" -of VRT -dstnodata 0 BSB_ROOT/11315/11315_1.KAP 11315b.vrt 

So my question in short: how to add "-dstnodata 0" to AutoCreateWarpedVRT()?



--
Jaak
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121109/26663360/attachment-0001.html>

From jukka.rahkonen at mmmtike.fi  Fri Nov  9 02:31:12 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 9 Nov 2012 10:31:12 +0000 (UTC)
Subject: [gdal-dev] Images/datasets with bands with different properties
References: <509C82F4.5090103@stripfamily.net>
Message-ID: <loom.20121109T111353-581@post.gmane.org>

David Strip <gdal <at> stripfamily.net> writes:


> Likewise, the bands apparently can have different size rasters (in terms 
> of pixel counts), since the raster size is a property of the band. On 
> the other hand, the dataset also has a raster size, as well as the 
> overall properties of the raster, such as the geo-location of the origin 
> and the size of the pixels. If the band doesn't match the dataset 
> properties, what do we know about origin, pixel size, etc? If these 
> situations don't exist in real datasets, then I'm not particularly 
> concerned. In fact, I'd be happiest if someone could tell me to just 
> ignore these issues because they don't happen in real life.

I converted once a whole bunch of 7-band Landsat images into JPEG2000 with
Kakadu by preserving the native resolution of the bands (15 meters for
panchromatic, 30 m for thematic bands, 60 m for thermal band). I thought it was
a brilliant idea but I found no way to utilize those JPEG2000 images with any
software I tried. Finally I had to separate panchromatic bands to separate files
and oversample the thermal band to suit together with thematic bands. So I think
that issues are not common in real life because it does not make sense to create
such datasets if there are no tools for handling them. It would still be worth
thinking how they could be handled, satellite data containing bands with
different resolutions  being the first use case.

-Jukka Rahkonen-





From sazonov at scanex.ru  Fri Nov  9 04:29:32 2012
From: sazonov at scanex.ru (DmitriyS)
Date: Fri, 9 Nov 2012 04:29:32 -0800 (PST)
Subject: [gdal-dev] Orfeo tool box and gdal
Message-ID: <1352464172829-5015134.post@n6.nabble.com>

Hello, dear developers. I wish to build OTB v.3.14 with gdal v.1.8.1 and have
several problems (Windows 7). I could generate OTB solution through CMake,
but ,bulding projects, got one mistakes, which for me is unresolved at this
moment. As an import gdal lib I set gdal_i.lib of debug version, and
according to source gdal must export class GDALJP2Box with the next
constructor: GDALJP2Box::GDALJP2Box(struct _VSILFILE *).
But OTB looks for GDALJP2Box::GDALJP2Box(struct iobuf *) and there is the
error of unresolved external. Ok, if I build OTB with gdal of release mode 
there are no problems, as in release it exports
GDALJP2Box::GDALJP2Box(struct iobuf *). However it does not help me any way
because I need integrate OTB in application which has already used gdal
v1.8.1 for a long time. In case I build OTB through gdal v.1.9.1 it is
allright. And I am surprised that in debug mode gdal v.1.9.1 exports
GDALJP2Box::GDALJP2Box(struct iobuf *), though its code has no differences
in that section compare to v1.8.1. I corrected  gdal v1.8.1 sources  to make
it export GDALJP2Box::GDALJP2Box(struct iobuf *) in debug, but this variant
produced memory leaks in library which I had never had before, though
application worked. Nevertheless it is intermediate solution.
Does anybody know what I should do?
Best regards, Dmitriy.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Orfeo-tool-box-and-gdal-tp5015134.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gdal at stripfamily.net  Fri Nov  9 07:07:25 2012
From: gdal at stripfamily.net (David Strip)
Date: Fri, 09 Nov 2012 08:07:25 -0700
Subject: [gdal-dev] Images/datasets with bands with different properties
In-Reply-To: <loom.20121109T111353-581@post.gmane.org>
References: <509C82F4.5090103@stripfamily.net>
	<loom.20121109T111353-581@post.gmane.org>
Message-ID: <509D1C2D.1010005@stripfamily.net>

Thanks to Even and Jukka for their prompt and clear responses to my question

David

From ragi at burhum.com  Fri Nov  9 07:59:00 2012
From: ragi at burhum.com (rburhum)
Date: Fri, 9 Nov 2012 07:59:00 -0800 (PST)
Subject: [gdal-dev] Which version number for the next GDAL release :
	1.10 or 2.0 ?
In-Reply-To: <201211082327.33109.even.rouault@mines-paris.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<509ABBBF.2070002@mail.ru>
	<CA+TxYvNxMd6yV_U5-CahjVNSmmV_4TzGP-pA_K9KEU3QZsV_Jw@mail.gmail.com>
	<201211082003.16694.even.rouault@mines-paris.org>
	<509C1296.3070805@pobox.com>
	<201211082249.51944.even.rouault@mines-paris.org>
	<509C2D8C.2060207@pobox.com>
	<201211082327.33109.even.rouault@mines-paris.org>
Message-ID: <1352476740996-5015202.post@n6.nabble.com>

Perhaps calling it 2.0 is not a bad thing and it sounds of less of a hassle.
Breaking the ABI (by rushing major API changes) just so that the semantics
of what "2.0" means, seems inappropriate. If/when the unification starts, we
could bump it to 3.0, 4.0 or any other number. There are quite a few of them
we could use :p

my two cents,

Ragi



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Which-version-number-for-the-next-GDAL-release-1-10-or-2-0-tp5014634p5015202.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jason.greenlaw at noaa.gov  Fri Nov  9 11:02:09 2012
From: jason.greenlaw at noaa.gov (Jason Greenlaw)
Date: Fri, 9 Nov 2012 14:02:09 -0500
Subject: [gdal-dev] WKT for Reprojecting to ESRI Web Mercator (EPSG:3857)
	using gdalwarp/ogr2ogr
Message-ID: <CAAoP0JwBOB1gNngRV4kqWj_kroOzroC5piYa=scTkXTH67MN9g@mail.gmail.com>

I've recently run into some issues when trying to reproject rasters and
shapefiles using GDAL to the ESRI Web Mercator (auxiliary sphere)
projection (EPSG:3857), but have come up with a workaround that I wanted to
share.

After specifying "EPSG:3857" as the target projection to gdalwarp or
ogr2ogr, the resulting dataset does not overlay nicely in ArcMap/ArcGIS
Server with ESRI-projected datasets or ArcGIS Online basemaps.  If you
instead use the code "EPSG:102113", it results in the data overlaying
correctly, but requires an on-the-fly datum transformation when drawing in
EPSG:3857.  I've tried specifying an ESRI prj file along with the "ESRI::"
prefix to gdalwarp, but that too failed to reproject properly.

To avoid a datum transformation, I've merged the information from an ESRI
3857 .prj file with the EPSG:102113 definition found in
$GDAL_DATA/esri_extra.wkt (specifically modifying the PROJ4 extension
definition to use a semiminor axis of 6356752.314245179, which is what ESRI
expects), and created a .prf file, which I've been able to use successfully
with gdalwarp and ogr2ogr.

The WKT of the .prf file is as follows:

---------------------------------------------------------------------------
PROJCS['WGS_1984_Web_Mercator_Auxiliary_Sphere',
    GEOGCS['GCS_WGS_1984',
        DATUM['D_WGS_1984',
            SPHEROID['WGS_1984',6378137.0,298.257223563]
        ],
        PRIMEM['Greenwich',0.0],
        UNIT['Degree',0.0174532925199433]
    ],
    PROJECTION['Mercator_Auxiliary_Sphere'],
    PARAMETER['False_Easting',0.0],
    PARAMETER['False_Northing',0.0],
    PARAMETER['Central_Meridian',0.0],
    PARAMETER['latitude_of_origin',0.0],
    PARAMETER['Standard_Parallel_1',0.0],
    PARAMETER['Auxiliary_Sphere_Type',0.0],
    UNIT['Meter',1.0],
    EXTENSION["PROJ4",
        "+proj=merc +a=6378137 +b=6356752.314245179 +lat_ts=0.0 +lon_0=0.0
+x_0=0.0 +y_0=0.0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"
    ],
    AUTHORITY["EPSG","3857"]
]
---------------------------------------------------------------------------

Hope this solution saves someone else some time.
Jason

--
Jason Greenlaw
Contractor, ERT, Inc.
NOAA/NOS/OCS/CSDL
http://nowcoast.noaa.gov
Jason.Greenlaw at noaa.gov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121109/16d65be8/attachment.html>

From spluque at gmail.com  Fri Nov  9 11:59:53 2012
From: spluque at gmail.com (Seb)
Date: Fri, 09 Nov 2012 13:59:53 -0600
Subject: [gdal-dev] exporting PostGIS to GMT format
Message-ID: <87bof68s3q.fsf@kolob.subpolar.dyndns.org>

Hi,

I'm trying to export a PostGIS table in GMT format, following a tip
(http://comments.gmane.org/gmane.comp.gis.gmt.user/16632), but I'm
running into problems.

Here's ogrinfo output:

---<--------------------cut here---------------start------------------->---
ogrinfo PG:"host=localhost user=user password=password dbname=gshhs" subset_c
INFO: Open of `PG:host=localhost user=user password=password dbname=gshhs'
      using driver `PostgreSQL' successful.

Layer name: subset_c
Geometry: Unknown (any)
Feature Count: 1
Extent: (-75.000000, 54.000000) - (-57.334194, 62.482194)
Layer SRS WKT:
(unknown)
Geometry Column = geom
gid: Integer (0.0)
OGRFeature(subset_c):0
  gid (Integer) = 4
  MULTIPOLYGON (((-75.0 62.183672426395042,-74.532194 62.106944,-73.69475 62.482194,-72.270722 61.574167,-71.554583 61.617194,-71.619694 61.153556,-69.897417 60.799278,-69.504083 61.067639,-69.617306 60.071444,-70.874722 60.045917,-69.7175 59.966639,-69.761167 59.321556,-69.238028 59.322944,-69.546111 58.809111,-69.846389 59.059944,-70.255556 58.777222,-68.348472 58.781583,-68.684778 58.002583,-68.007639 58.584861,-67.674667 58.015111,-66.376944 58.854833,-65.970944 58.272667,-66.086417 58.818361,-65.315472 59.045722,-65.747667 59.270528,-65.013889 59.383472,-65.536667 59.745694,-64.848444 60.372917,-64.367528 60.246667,-64.699167 60.024972,-63.357556 59.1975,-64.050889 59.019167,-63.138306 59.054556,-62.8525 58.700806,-63.607556 58.291667,-62.557583 58.479972,-63.355861 57.969139,-62.45 58.172889,-62.679194 57.929139,-61.8925 57.6325,-62.532556 57.489139,-61.3625 57.099972,-61.671694 56.618722,-62.539222 56.755806,-61.650833 56.539194,-62.22425 56.471639,-61.580806 56.2825,-62.02675 56.226278,-61.320861 56.224139,-61.753306 55.964556,-60.595 55.812083,-60.67 55.54875,-60.322583 55.7775,-60.695833 54.986667,-59.778333 55.335389,-59.987528 55.107472,-59.415889 55.158333,-59.935028 54.744556,-59.196639 55.239528,-59.405 54.968694,-59.028417 55.154556,-58.973361 54.827083,-57.943361 54.930389,-58.189194 54.748333,-57.334194 54.580806,-59.593361 54.037111,-58.380889 54.2275,-58.935126371828702 54.0,-75 54,-75.0 62.183672426395042)),((-58.797890335147365 54.0,-58.175056 54.237889,-57.338518268187144 54.0,-58.797890335147365 54.0)))
---<--------------------cut here---------------end--------------------->---

But then ogr2ogr fails:

ogr2ogr -f GMT -nln test.gmt PG:"host=localhost user=user password=password dbname=gshhs" subset_c
FAILURE:
Unable to open datasource `subset_c' with the following drivers.

and the list of drivers does include GMT, so the capabilities are there.
I am using the latest Debian sid packages.  Any tips would be
appreciated.

Cheers,

-- 
Seb


From even.rouault at mines-paris.org  Fri Nov  9 12:10:29 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 9 Nov 2012 21:10:29 +0100
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR 1.10
Message-ID: <201211092110.29701.even.rouault@mines-paris.org>

Motion: The next major GDAL version released from trunk will be called 
GDAL/OGR 1.10.

To take into account 2-figure numbers in the components of the version number, 
the GDAL_VERSION_NUM macro will be changed accordingly as :

#  define GDAL_VERSION_NUM      
(GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100+GDAL_VERSION_BUILD)

A new macro will be added so that users don't have to do all the above 
multiplications :

#define GDAL_COMPUTE_VERSION(maj,min,rev) 
(maj*1000000+min*10000+rev*100)

(Note: as raised by Mateusz, I've dropped the 'build' argument in the macro, 
since it has never been used in the past and it is unlikely code would depend 
on that)

----

Hi,

Not surprisingly when it is related to preferences on version numbering, the 
previous discussion thread has not lead to a clear consensus on the topic, but 
we need to make a decision soon so that users can anticipate the adaptations 
needed in their code.

1.10 seems the more logical option to me, even if that implies changing the 
way we compute GDAL_VERSION_NUM, which I don't anticipate to cause problems to 
existing code. There are also a few existing documentation pages in drivers or 
utilities that mention GDAL 2.0 that will need to be changed, but I'll take 
care of this if the motion is approved (some sed magic should do this).

+1 Even

From robbkwright at gmail.com  Fri Nov  9 12:11:56 2012
From: robbkwright at gmail.com (Robb K. Wright)
Date: Fri, 09 Nov 2012 15:11:56 -0500
Subject: [gdal-dev] Problem with gdalsrsinfo on some NOAA bsb/kap files
Message-ID: <509D638C.7050702@gmail.com>


I'm trying to use gdalsrsinfo (1.9) to extract out WKT-formatted info 
from NOAA's BSB/KAP files.  It works on many - but has problems with 
others - and I can't find a pattern.  I'm not sure if it is a problem 
with the BSB driver or with gdalsrsinfo, but I'm leaning toward 
gdalsrsinfo as the problem because I'm not having problems on the files 
when running the other gdal tools on them (translate/gdaladdo/etc).

Any suggestions would be appreciated.

The link below is an example of a file that is giving me problems:
http://www.charts.noaa.gov/RNCs/11532.zip

Running:  gdalsrsinfo -V 11532_1.KAP
gives me:
Validate Fails - SRS is not well formed
PROJ.4 : ''
OGC WKT :
"!CRR/ThiselectronicchartwasproducedundertheauthorityofUSA-NOAA/NOS.Byusingthischartyouacknowledgethatyouhaveread"


This is an example of one that works well:
http://www.charts.noaa.gov/RNCs/50.zip

Here's the output from "gdalsrsinfo -V 50_2.KAP"
Validate Succeeds

PROJ.4 : '+proj=merc +lon_0=170 +lat_ts=0 +x_0=0 +y_0=0 +ellps=WGS84 
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs '

OGC WKT :
PROJCS["Global Mercator",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9108"]],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Mercator_2SP"],
     PARAMETER["standard_parallel_1",0],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",170],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["Meter",1]]


From even.rouault at mines-paris.org  Fri Nov  9 12:22:18 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 9 Nov 2012 21:22:18 +0100
Subject: [gdal-dev] exporting PostGIS to GMT format
In-Reply-To: <87bof68s3q.fsf@kolob.subpolar.dyndns.org>
References: <87bof68s3q.fsf@kolob.subpolar.dyndns.org>
Message-ID: <201211092122.18608.even.rouault@mines-paris.org>


> But then ogr2ogr fails:
> 
> ogr2ogr -f GMT -nln test.gmt PG:"host=localhost user=user password=password
> dbname=gshhs" subset_c FAILURE:
> Unable to open datasource `subset_c' with the following drivers.

Just remove "-nln".

From even.rouault at mines-paris.org  Fri Nov  9 12:29:15 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 9 Nov 2012 21:29:15 +0100
Subject: [gdal-dev] Problem with gdalsrsinfo on some NOAA bsb/kap files
In-Reply-To: <509D638C.7050702@gmail.com>
References: <509D638C.7050702@gmail.com>
Message-ID: <201211092129.15690.even.rouault@mines-paris.org>

Le vendredi 09 novembre 2012 21:11:56, Robb K. Wright a ?crit :
> I'm trying to use gdalsrsinfo (1.9) to extract out WKT-formatted info
> from NOAA's BSB/KAP files.  It works on many - but has problems with
> others - and I can't find a pattern.  I'm not sure if it is a problem
> with the BSB driver or with gdalsrsinfo, but I'm leaning toward
> gdalsrsinfo as the problem because I'm not having problems on the files
> when running the other gdal tools on them (translate/gdaladdo/etc).
> 
> Any suggestions would be appreciated.
> 
> The link below is an example of a file that is giving me problems:
> http://www.charts.noaa.gov/RNCs/11532.zip
> 
> Running:  gdalsrsinfo -V 11532_1.KAP
> gives me:
> Validate Fails - SRS is not well formed
> PROJ.4 : ''
> OGC WKT :
> "!CRR/ThiselectronicchartwasproducedundertheauthorityofUSA-NOAA/NOS.Byusing
> thischartyouacknowledgethatyouhaveread"

Are you sure you are not confusing 11532.BSB and 11532_1.KAP ? I indeed get 
the error you had, but on 11532.BSB which is not a GDAL recognized dataset. 
11532_1.KAP just works fine and gdalsrsinfo -V 11532_1.KAP output is :
Validate Succeeds

PROJ.4 : '+proj=merc +lon_0=-79 +lat_ts=0 +x_0=0 +y_0=0 +ellps=WGS84 
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs '

OGC WKT :
PROJCS["Global Mercator",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Mercator_2SP"],
    PARAMETER["standard_parallel_1",0],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-79],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]


From spluque at gmail.com  Fri Nov  9 12:29:44 2012
From: spluque at gmail.com (Sebastian P. Luque)
Date: Fri, 09 Nov 2012 14:29:44 -0600
Subject: [gdal-dev] exporting PostGIS to GMT format
References: <87bof68s3q.fsf@kolob.subpolar.dyndns.org>
	<201211092122.18608.even.rouault@mines-paris.org>
Message-ID: <877gpu8qpz.fsf@kolob.subpolar.dyndns.org>

On Fri, 9 Nov 2012 21:22:18 +0100,
Even Rouault <even.rouault at mines-paris.org> wrote:

>> But then ogr2ogr fails:

>> ogr2ogr -f GMT -nln test.gmt PG:"host=localhost user=user
>> password=password dbname=gshhs" subset_c FAILURE: Unable to open
>> datasource `subset_c' with the following drivers.

> Just remove "-nln".

Thank you, obviously I didn't understand this flag!

Cheers,

-- 
Seb


From even.rouault at mines-paris.org  Fri Nov  9 12:46:34 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 9 Nov 2012 21:46:34 +0100
Subject: [gdal-dev] Orfeo tool box and gdal
In-Reply-To: <1352464172829-5015134.post@n6.nabble.com>
References: <1352464172829-5015134.post@n6.nabble.com>
Message-ID: <201211092146.34273.even.rouault@mines-paris.org>

Le vendredi 09 novembre 2012 13:29:32, DmitriyS a ?crit :
> Hello, dear developers. I wish to build OTB v.3.14 with gdal v.1.8.1 and
> have several problems (Windows 7). I could generate OTB solution through
> CMake, but ,bulding projects, got one mistakes, which for me is unresolved
> at this moment. As an import gdal lib I set gdal_i.lib of debug version,
> and according to source gdal must export class GDALJP2Box with the next
> constructor: GDALJP2Box::GDALJP2Box(struct _VSILFILE *).
> But OTB looks for GDALJP2Box::GDALJP2Box(struct iobuf *) and there is the
> error of unresolved external. Ok, if I build OTB with gdal of release mode
> there are no problems, as in release it exports
> GDALJP2Box::GDALJP2Box(struct iobuf *). However it does not help me any way
> because I need integrate OTB in application which has already used gdal
> v1.8.1 for a long time. In case I build OTB through gdal v.1.9.1 it is
> allright. And I am surprised that in debug mode gdal v.1.9.1 exports
> GDALJP2Box::GDALJP2Box(struct iobuf *), though its code has no differences
> in that section compare to v1.8.1. I corrected  gdal v1.8.1 sources  to
> make it export GDALJP2Box::GDALJP2Box(struct iobuf *) in debug, but this
> variant produced memory leaks in library which I had never had before,
> though application worked. Nevertheless it is intermediate solution.
> Does anybody know what I should do?

The issue you hit comes from the following snippet in port/cpl_vsi.h :

/* Make VSIL_STRICT_ENFORCE active in DEBUG builds */
#ifdef DEBUG
#define VSIL_STRICT_ENFORCE
#endif

#ifdef VSIL_STRICT_ENFORCE
typedef struct _VSILFILE VSILFILE;
#else
typedef FILE VSILFILE;
#endif

The rationale was to have strict typing in debug builds so that people don't 
confuse FILE* and VSILFILE* in the GDAL drivers, while in release mode we 
still alias VSILFILE* to FILE* as people have used that for a long time and we 
didn't want to break things.

(I'm going to add in the http://trac.osgeo.org/gdal/wiki/GDAL20Changes that we 
should use typedef struct _VSILFILE VSILFILE; in both debug and release 
versions of GDAL)

This was already in place in 1.8, so I'm not sure why you would see a 
difference of behaviour between 1.8 and 1.9, but I'm afraid I have not 
completely followed all your attempts (perhaps that one of the builds didn't 
have DEBUG defined as you thought ?).

Anyway, the solution is to not use a GDAL built with DEBUG defined with other 
applications that have been built against a GDAL without DEBUG defined. The 
problem should only arise with C++ symbols.

I don't understand why changing the signature of GDALJP2Box::GDALJP2Box() 
would cause memory leaks however.

From robbkwright at gmail.com  Fri Nov  9 14:24:43 2012
From: robbkwright at gmail.com (Robb Wright)
Date: Fri, 09 Nov 2012 17:24:43 -0500
Subject: [gdal-dev] Problem with gdalsrsinfo on some NOAA bsb/kap files
In-Reply-To: <201211092129.15690.even.rouault@mines-paris.org>
References: <509D638C.7050702@gmail.com>
	<201211092129.15690.even.rouault@mines-paris.org>
Message-ID: <509D82AB.8000408@gmail.com>


I just tried it on another machine on a number of .kaps - and some were 
working and some were not - but they were different ones. Then I went 
back to my first machine and I got the proper result, then ran it again 
and got the error.  Something must be dodgy with my libraries/how I have 
it installed, but I can't imagine why it would work some times and not 
others on the same file.

If somebody else could try running it multiple times on the same file, 
I'd be curious about their result.  Below is a link to a set of 4.  
Right now I'm getting errors on _1, _2 - but getting results for 
_3,_4.    Nutty.
http://www.charts.noaa.gov/RNCs/11308.zip
gdalsrsinfo.exe -o proj4  11308_1.KAP
gdalsrsinfo.exe -o proj4  11308_2.KAP
gdalsrsinfo.exe -o proj4  11308_3.KAP
gdalsrsinfo.exe -o proj4  11308_4.KAP

BTW, I'm using gdalsrsinfo from today's 
http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal-1-9-mapserver-6-0.zip

Robb


On 11/9/2012 3:29 PM, Even Rouault wrote:
> Le vendredi 09 novembre 2012 21:11:56, Robb K. Wright a ?crit :
>> I'm trying to use gdalsrsinfo (1.9) to extract out WKT-formatted info
>> from NOAA's BSB/KAP files.  It works on many - but has problems with
>> others - and I can't find a pattern.  I'm not sure if it is a problem
>> with the BSB driver or with gdalsrsinfo, but I'm leaning toward
>> gdalsrsinfo as the problem because I'm not having problems on the files
>> when running the other gdal tools on them (translate/gdaladdo/etc).
>>
>> Any suggestions would be appreciated.
>>
>> The link below is an example of a file that is giving me problems:
>> http://www.charts.noaa.gov/RNCs/11532.zip
>>
>> Running:  gdalsrsinfo -V 11532_1.KAP
>> gives me:
>> Validate Fails - SRS is not well formed
>> PROJ.4 : ''
>> OGC WKT :
>> "!CRR/ThiselectronicchartwasproducedundertheauthorityofUSA-NOAA/NOS.Byusing
>> thischartyouacknowledgethatyouhaveread"
> Are you sure you are not confusing 11532.BSB and 11532_1.KAP ? I indeed get
> the error you had, but on 11532.BSB which is not a GDAL recognized dataset.
> 11532_1.KAP just works fine and gdalsrsinfo -V 11532_1.KAP output is :
> Validate Succeeds
>
> PROJ.4 : '+proj=merc +lon_0=-79 +lat_ts=0 +x_0=0 +y_0=0 +ellps=WGS84
> +towgs84=0,0,0,0,0,0,0 +units=m +no_defs '
>
> OGC WKT :
> PROJCS["Global Mercator",
>      GEOGCS["WGS 84",
>          DATUM["WGS_1984",
>              SPHEROID["WGS 84",6378137,298.257223563,
>                  AUTHORITY["EPSG","7030"]],
>              TOWGS84[0,0,0,0,0,0,0],
>              AUTHORITY["EPSG","6326"]],
>          PRIMEM["Greenwich",0,
>              AUTHORITY["EPSG","8901"]],
>          UNIT["degree",0.0174532925199433,
>              AUTHORITY["EPSG","9108"]],
>          AUTHORITY["EPSG","4326"]],
>      PROJECTION["Mercator_2SP"],
>      PARAMETER["standard_parallel_1",0],
>      PARAMETER["latitude_of_origin",0],
>      PARAMETER["central_meridian",-79],
>      PARAMETER["false_easting",0],
>      PARAMETER["false_northing",0],
>      UNIT["Meter",1]]
>


From even.rouault at mines-paris.org  Fri Nov  9 14:48:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 9 Nov 2012 23:48:22 +0100
Subject: [gdal-dev] Problem with gdalsrsinfo on some NOAA bsb/kap files
In-Reply-To: <509D82AB.8000408@gmail.com>
References: <509D638C.7050702@gmail.com>
	<201211092129.15690.even.rouault@mines-paris.org>
	<509D82AB.8000408@gmail.com>
Message-ID: <201211092348.22209.even.rouault@mines-paris.org>

Le vendredi 09 novembre 2012 23:24:43, Robb Wright a ?crit :
> I just tried it on another machine on a number of .kaps - and some were
> working and some were not - but they were different ones. Then I went
> back to my first machine and I got the proper result, then ran it again
> and got the error.  Something must be dodgy with my libraries/how I have
> it installed, but I can't imagine why it would work some times and not
> others on the same file.
> 
> If somebody else could try running it multiple times on the same file,
> I'd be curious about their result.  Below is a link to a set of 4.
> Right now I'm getting errors on _1, _2 - but getting results for
> _3,_4.    Nutty.
> http://www.charts.noaa.gov/RNCs/11308.zip
> gdalsrsinfo.exe -o proj4  11308_1.KAP
> gdalsrsinfo.exe -o proj4  11308_2.KAP
> gdalsrsinfo.exe -o proj4  11308_3.KAP
> gdalsrsinfo.exe -o proj4  11308_4.KAP

ok, I see what happens. In _3 and _4 cases, the BSB driver manages to compute 
a geotransform from the GCPs and then assigns a projection, in addition to the 
GCP projection.
In the _1 and _2 cases, the BSB driver doesn't manage to compute the 
geotranform from the GCPs (which is a known issue sometimes with this driver, 
presumably because it has a too strict tolerance in the computation of the 
geotransform from the GCPs), so the projection is only reported by the 
GetGCPProjection() method, which the gdalsrsinfo never queries.

In all cases, gdalinfo does show the projection and/or GCP projection.

Perhaps gdalsrsinfo should also query the GCP projection if no regular 
projection is reported.


From chris.barker at noaa.gov  Fri Nov  9 18:22:21 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Fri, 9 Nov 2012 18:22:21 -0800
Subject: [gdal-dev] Problem with gdalsrsinfo on some NOAA bsb/kap files
In-Reply-To: <201211092348.22209.even.rouault@mines-paris.org>
References: <509D638C.7050702@gmail.com>
	<201211092129.15690.even.rouault@mines-paris.org>
	<509D82AB.8000408@gmail.com>
	<201211092348.22209.even.rouault@mines-paris.org>
Message-ID: <CALGmxE+hp=HOGAHRARu7pGW2VnBchCr_je6VTWNoVusQUtYVrw@mail.gmail.com>

On Fri, Nov 9, 2012 at 2:48 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:

> ok, I see what happens. In _3 and _4 cases, the BSB driver manages to compute
> a geotransform from the GCPs and then assigns a projection, in addition to the
> GCP projection.
> In the _1 and _2 cases, the BSB driver doesn't manage to compute the
> geotranform from the GCPs (which is a known issue sometimes with this driver,
> presumably because it has a too strict tolerance in the computation of the
> geotransform from the GCPs), so the projection is only reported by the
> GetGCPProjection() method, which the gdalsrsinfo never queries.
>
> In all cases, gdalinfo does show the projection and/or GCP projection.
>
> Perhaps gdalsrsinfo should also query the GCP projection if no regular
> projection is reported.

I've wondered for ages about this driver -- the *.kap files have
redundant info -- the projection definition and related info is enough
(always? or only north-up?) to provide a complete projection and
geotransform, but there are also the set of GCPs.

I've never checked to see if they always match to a good tolerance,
and I don't know what  GDAL does with the redundant info.

>From your note, it sounds like GDAL prefers the GCP transform -- is
that so? and I'm not sure that's the best option -- presumably the
info in the header is exact? Why not prefer that?

-Chris




-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov

From gdal at stripfamily.net  Fri Nov  9 18:36:08 2012
From: gdal at stripfamily.net (David Strip)
Date: Fri, 09 Nov 2012 19:36:08 -0700
Subject: [gdal-dev] another multi-band question
Message-ID: <509DBD98.1080509@stripfamily.net>

In a followup to my previous question about property differences across 
bands in a multiband images -
The No Data Value and color table are both per-band properties. Do any 
file types (other than VRTs) support bands with differences in these 
properties? The file type I'm most familiar with is geotiff, which has 
these properties at the file (dataset) level.

From warmerdam at pobox.com  Fri Nov  9 18:50:02 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 09 Nov 2012 18:50:02 -0800
Subject: [gdal-dev] another multi-band question
In-Reply-To: <509DBD98.1080509@stripfamily.net>
References: <509DBD98.1080509@stripfamily.net>
Message-ID: <509DC0DA.9090908@pobox.com>

On 12-11-09 06:36 PM, David Strip wrote:
> In a followup to my previous question about property differences across bands
> in a multiband images -
> The No Data Value and color table are both per-band properties. Do any file
> types (other than VRTs) support bands with differences in these properties? The
> file type I'm most familiar with is geotiff, which has these properties at the
> file (dataset) level.

David,

Most, or at least many, formats that support nodata values support them
at the per-band level.  I can't give a very solid answer for color tables.
at least some formats that support color tables also restrict things to
one band for colormapped images (ie. PNG, GeoTIFF) so whether you consider
it a per-band or per-file attribute is not so clear.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From sazonov at scanex.ru  Sat Nov 10 00:52:58 2012
From: sazonov at scanex.ru (DmitriyS)
Date: Sat, 10 Nov 2012 00:52:58 -0800 (PST)
Subject: [gdal-dev] Orfeo tool box and gdal
In-Reply-To: <201211092146.34273.even.rouault@mines-paris.org>
References: <1352464172829-5015134.post@n6.nabble.com>
	<201211092146.34273.even.rouault@mines-paris.org>
Message-ID: <1352537578459-5015316.post@n6.nabble.com>

Thank you. I saw it in cpl_vsi.h. However I am very interesed why when I
build gdal v1.8.1,  downloaded from
http://trac.osgeo.org/gdal/wiki/DownloadSource, in debug config I see in PE
explorer __thiscall GDALJP2Box::GDALJP2Box(struct _VSILFILE *). When I do
same steps with gdal v1.9.1 - __thiscall GDALJP2Box::GDALJP2Box(struct
_iobuf *). Beforehand I did not make any changes. 
I downloaded, build libraries in MVS2010 (Debug config) and got these
results. Should I change project properties in MVS, define any
preprocessors?
Best regards, Dmitriy.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Orfeo-tool-box-and-gdal-tp5015134p5015316.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gdal at stripfamily.net  Sat Nov 10 18:45:57 2012
From: gdal at stripfamily.net (David Strip)
Date: Sat, 10 Nov 2012 19:45:57 -0700
Subject: [gdal-dev] Suggestion for API addition
Message-ID: <509F1165.7020408@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121110/bfa18013/attachment.html>

From ben at vterrain.org  Sat Nov 10 21:28:01 2012
From: ben at vterrain.org (Ben Discoe)
Date: Sat, 10 Nov 2012 21:28:01 -0800
Subject: [gdal-dev] Fixes for nmake.opt and makefile.vc
Message-ID: <001101cdbfcd$513f5b80$f3be1280$@vterrain.org>

I needed to build GDAL on WIndows again this evening, so I grabbed the
latest gdal192.zip.

For years (like, 12 years) I have tried maintaining GDAL MSVC project files,
but that isn't a fun task.

So instead, I figured I'd give the makefile.vc a try.

 

It does not appear to be in a state that's usable to compile other software
on top of GDAL in both debug and release.

 

1. nmake.opt does not put debug and release executables in separate folders.
This is essential.  So, I did this:

 

BINDIR = $(GDAL_HOME)\bin

------>

!IFNDEF DEBUG

BINDIR = $(GDAL_HOME)\bin-release

!ELSE

BINDIR = $(GDAL_HOME)\bin-debug

!ENDIF

 

2. nmake.opt does not name the debug and release libraries or DLL
differently.  This is also essential; you simply cannot mix debug and
non-debug with MSVC.  So I did the following:

 

GDAL_DLL =       gdal$(VERSION).dll

------>

!IFNDEF DEBUG

GDAL_DLL =       gdal$(VERSION)-vc10.dll

!ELSE

GDAL_DLL =       gdal$(VERSION)d-vc10.dll

!ENDIF

 

And:

 

GDALLIB               =    $(GDAL_ROOT)/gdal_i.lib

------>

!IFNDEF DEBUG

GDALLIB               =    $(GDAL_ROOT)\gdal_i-vc10.lib

!ELSE

GDALLIB               =    $(GDAL_ROOT)\gdal_id-vc10.lib

!ENDIF

 

Note the forward slash changed to a backslash.  The forward slash causes
"make devinstall" fail later if not fixed.  The "-vc10" is optional, but
those of us who build for more than one compiler version need it, because
once again, you cannot mix binaries between versions of MSVC, so to avoid
confusion and crashes, it's vital to put the flavor in the filename.

 

3. There are places in ./makefile.vc which hard-code the name of the import
library instead of using the definition from nmake.opt.  I fixed these:

 

                if exist gdal_i.lib del gdal_i.*

---------->

                if exist $(GDALLIB) del gdal_i*.*

 

                                /out:$(GDAL_DLL) /implib:gdal_i.lib
$(LINKER_FLAGS)

---------->

                                /out:$(GDAL_DLL) /implib:$(GDALLIB)
$(LINKER_FLAGS)

 

                copy gdal_i.lib $(LIBDIR)

---------->

                copy $(GDALLIB) $(LIBDIR)

 

4. And one more place, in ./apps/makefile.vc, the line:

 

LIBS        =             $(GDAL_ROOT)\gdal_i.lib

 

Must be moved down after the !INCLUDE and changed to:

 

LIBS        =             $(GDALLIB)

 

4. I'm leaving alone the issue with /MD and /MDd.  I see it's been discussed
before, and the above fixes are important whether you use /MDd or not.

 

With those changes, I was able to use the command-line to give 4 commands:

 

nmake -f makefile.vc DEBUG=1

nmake -f makefile.vc DEBUG=1 devinstall

nmake -f makefile.vc

nmake -f makefile.vc devinstall

 

..which built and installed both debug and release versions of GDAL
successfully.

 

I guess since this has been broken for a while, people have simply either
just building release, and/or just the GDAL executables (not the devinstall
target).

 

-Ben

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121110/ddb1bd60/attachment.html>

From even.rouault at mines-paris.org  Sun Nov 11 02:53:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 11 Nov 2012 11:53:14 +0100
Subject: [gdal-dev] Suggestion for API addition
In-Reply-To: <509F1165.7020408@stripfamily.net>
References: <509F1165.7020408@stripfamily.net>
Message-ID: <201211111153.14381.even.rouault@mines-paris.org>

Le dimanche 11 novembre 2012 03:45:57, David Strip a ?crit :
>  The current GDALRasterBand::RasterIO signature makes it easy to read or
> write a contiguous subregion of the band. However, if you want to read or
> write the entire band into/from  a contiguous sub-region of the buffer,
> it's not nearly as straightforward. You can do this by using the
> nLineSpace parameter, giving the size of the subregion for buffer size
> parameters,  and offsetting the address of the buffer. It works, but that
> makes the code a bit baroque and hard to read.
> 
>  How about a signature that indicates the entire band will be read, but
> moves the meaning of the offset to the buffer. Something like
> 
> CPLErr GDALRasterBand::RasterIO   ( GDALRWFlag eRWFlag, 
>                                    int   nXSize, 
>                                    int   nYSize, 
>                                    void * pData, 
>                                    int   nBufXOff, 
>                                    int   nBufYOff, 
>                                    int   nBufXSize, 
>                                    int   nBufYSize, 
>                                    GDALDataType    eBufType, 
>                                    int   nPixelSpace, 
>                                    int   nLineSpace   )
>
> 
>    Obviously I can write a wrapper for this functionality that just calls
> RasterIO, setting the appropriate values for buffer size, etc, but I was
> thinking I might not be the only one who wants to crop a buffer while
> writing to the band, or reading a band into a sub-region of a buffer.

This is just a personal opinion, but I'm not convinced this is a good idea. I 
think people will be more confused than currently. The meaning of the 
parameters of the existing RasterIO() requires some time to be confortable 
with, but once you've finished learning curve, it is pretty logical. Adding 
another method with the same name, almost same parameters, but subtle 
differences in behaviour is not going to make users life easier.

Why not adding an example code snippet of your use case in the documentation 
of the current API ? (if I've understood well, your proposal is just a 
convenient way of computing the right value for pData, likely pData = 
pBufferBase + nBufYOff * nLineSpace + nBufXOff * nPixelSpace)

Furthermore, if you want to operate on the whole band, you should also remove 
the nXSize and nYSize parameters that are useless.

> 
> 
>  This cropping interpretation doesn't allow for decimation/replication. It
> requires the buffer size be large enough to copy the entire band into the
> sub-region of the buffer. Allowing for decimation/replication would
> require yet more parameters.

Not sure to understand that. The presence of nBufXSize, nBufYsize in your 
proposal allows subsampling/oversampling. Perhaps you meant something else 
with decimation/replication ?



From gdal at stripfamily.net  Sun Nov 11 08:17:17 2012
From: gdal at stripfamily.net (David Strip)
Date: Sun, 11 Nov 2012 09:17:17 -0700
Subject: [gdal-dev] Suggestion for API addition
In-Reply-To: <201211111153.14381.even.rouault@mines-paris.org>
References: <509F1165.7020408@stripfamily.net>
	<201211111153.14381.even.rouault@mines-paris.org>
Message-ID: <509FCF8D.6060506@stripfamily.net>

On 11/11/2012 3:53 AM, Even Rouault wrote:
> Le dimanche 11 novembre 2012 03:45:57, David Strip a ?crit :
>>   The current GDALRasterBand::RasterIO signature makes it easy to read or
>> write a contiguous subregion of the band. However, if you want to read or
>> write the entire band into/from  a contiguous sub-region of the buffer,
>> it's not nearly as straightforward. You can do this by using the
>> nLineSpace parameter, giving the size of the subregion for buffer size
>> parameters,  and offsetting the address of the buffer. It works, but that
>> makes the code a bit baroque and hard to read.
>>
>>   How about a signature that indicates the entire band will be read, but
>> moves the meaning of the offset to the buffer. Something like
>>
>> CPLErr GDALRasterBand::RasterIO   ( GDALRWFlag eRWFlag,
>>                                     int   nXSize,
>>                                     int   nYSize,
>>                                     void * pData,
>>                                     int   nBufXOff,
>>                                     int   nBufYOff,
>>                                     int   nBufXSize,
>>                                     int   nBufYSize,
>>                                     GDALDataType    eBufType,
>>                                     int   nPixelSpace,
>>                                     int   nLineSpace   )
>>
>>
>>     Obviously I can write a wrapper for this functionality that just calls
>> RasterIO, setting the appropriate values for buffer size, etc, but I was
>> thinking I might not be the only one who wants to crop a buffer while
>> writing to the band, or reading a band into a sub-region of a buffer.
> This is just a personal opinion, but I'm not convinced this is a good idea. I
> think people will be more confused than currently. The meaning of the
> parameters of the existing RasterIO() requires some time to be confortable
> with, but once you've finished learning curve, it is pretty logical. Adding
> another method with the same name, almost same parameters, but subtle
> differences in behaviour is not going to make users life easier.
You're right that the actual signature and function name I provided 
would not be the right way to go. The substance of my question was 
whether there would be value to a function which crops a buffer while 
writing to the band. Rather than overloading RasterIO, the name could be 
writeCroppedBand or something.
>
> Why not adding an example code snippet of your use case in the documentation
> of the current API ? (if I've understood well, your proposal is just a
> convenient way of computing the right value for pData, likely pData =
> pBufferBase + nBufYOff * nLineSpace + nBufXOff * nPixelSpace)
The value of a new function is code clarity. It's not just computing 
pData, it's that the nBufXSize and nBufYSize become the size of the 
cropped region, not the size of the actual buffer, and offsets are not 
visible in the existing signature (there is no nBufXOff, nBufYOff), 
they're buried in the computation of pData, which of course no longer 
points to the actual buffer. When the existing function is used for this 
purpose it becomes very difficult to see what is actually happening. Of 
course one can say that's what comments are for.
>
> Furthermore, if you want to operate on the whole band, you should also remove
> the nXSize and nYSize parameters that are useless.
Yes, those should have been removed
>
>>
>>   This cropping interpretation doesn't allow for decimation/replication. It
>> requires the buffer size be large enough to copy the entire band into the
>> sub-region of the buffer. Allowing for decimation/replication would
>> require yet more parameters.
> Not sure to understand that. The presence of nBufXSize, nBufYsize in your
> proposal allows subsampling/oversampling. Perhaps you meant something else
> with decimation/replication ?
You're right.  nPixelSpace and nLineSpace now become required, no 
default values will work.

From even.rouault at mines-paris.org  Sun Nov 11 08:25:26 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 11 Nov 2012 17:25:26 +0100
Subject: [gdal-dev] Suggestion for API addition
In-Reply-To: <509FCF8D.6060506@stripfamily.net>
References: <509F1165.7020408@stripfamily.net>
	<201211111153.14381.even.rouault@mines-paris.org>
	<509FCF8D.6060506@stripfamily.net>
Message-ID: <201211111725.26725.even.rouault@mines-paris.org>


> The value of a new function is code clarity. It's not just computing
> pData, it's that the nBufXSize and nBufYSize become the size of the
> cropped region, not the size of the actual buffer,

I don't understand what you mean, sorry. Perhaps you should show the code. I 
understand that better than English ;-)

> > Not sure to understand that. The presence of nBufXSize, nBufYsize in your
> > proposal allows subsampling/oversampling. Perhaps you meant something
> > else with decimation/replication ?
> 
> You're right.  nPixelSpace and nLineSpace now become required, no
> default values will work.

Not understanding that either.


From gdal at stripfamily.net  Sun Nov 11 10:16:30 2012
From: gdal at stripfamily.net (David Strip)
Date: Sun, 11 Nov 2012 11:16:30 -0700
Subject: [gdal-dev] copying a GDALColorTable
Message-ID: <509FEB7E.9000605@stripfamily.net>

If I'm reading the docs right, there is no copy constructor or 
assignment operator for a GDALColorTable.
If I use GDALColorTable::clone(), how do release the copy when I'm done? 
Do I use CPLFree or can I use delete?
Thanks.



From even.rouault at mines-paris.org  Sun Nov 11 10:22:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 11 Nov 2012 19:22:19 +0100
Subject: [gdal-dev] copying a GDALColorTable
In-Reply-To: <509FEB7E.9000605@stripfamily.net>
References: <509FEB7E.9000605@stripfamily.net>
Message-ID: <201211111922.19885.even.rouault@mines-paris.org>

Le dimanche 11 novembre 2012 19:16:30, David Strip a ?crit :
> If I'm reading the docs right, there is no copy constructor or
> assignment operator for a GDALColorTable.
> If I use GDALColorTable::clone(), how do release the copy when I'm done?
> Do I use CPLFree or can I use delete?

delete should work, but the preferred way would be GDALDestroyColorTable() to 
avoid potential cross-heap issues on Windows in case your code and GDAL aren't 
built with the same compiler / compiler options.

> Thanks.
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From gdal at stripfamily.net  Sun Nov 11 10:58:01 2012
From: gdal at stripfamily.net (David Strip)
Date: Sun, 11 Nov 2012 11:58:01 -0700
Subject: [gdal-dev] copying a GDALColorTable
In-Reply-To: <201211111922.19885.even.rouault@mines-paris.org>
References: <509FEB7E.9000605@stripfamily.net>
	<201211111922.19885.even.rouault@mines-paris.org>
Message-ID: <509FF539.8020207@stripfamily.net>

On 11/11/2012 11:22 AM, Even Rouault wrote:
> Le dimanche 11 novembre 2012 19:16:30, David Strip a ?crit :
>> If I'm reading the docs right, there is no copy constructor or
>> assignment operator for a GDALColorTable.
>> If I use GDALColorTable::clone(), how do release the copy when I'm done?
>> Do I use CPLFree or can I use delete?
> delete should work, but the preferred way would be GDALDestroyColorTable() to
> avoid potential cross-heap issues on Windows in case your code and GDAL aren't
> built with the same compiler / compiler options.
>

Thanks for a really prompt response. Perhaps the c++ class docs for 
clone() could be updated to reflect this.
And if I'm correct the call would be 
GDALDestroyColorTable((GDALColorTableH) pColorTable), casting the c++ 
pointer to a handle?


From mateusz at loskot.net  Sun Nov 11 10:59:27 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 11 Nov 2012 18:59:27 +0000
Subject: [gdal-dev] copying a GDALColorTable
In-Reply-To: <201211111922.19885.even.rouault@mines-paris.org>
References: <509FEB7E.9000605@stripfamily.net>
	<201211111922.19885.even.rouault@mines-paris.org>
Message-ID: <CABUeae-16ByZsiDur_JWy_TvqNHdOxX_xKpb=oO=iA7o-3mdGQ@mail.gmail.com>

On 11 November 2012 18:22, Even Rouault <even.rouault at mines-paris.org> wrote:
> Le dimanche 11 novembre 2012 19:16:30, David Strip a ?crit :
>> If I'm reading the docs right, there is no copy constructor or
>> assignment operator for a GDALColorTable.
>> If I use GDALColorTable::clone(), how do release the copy when I'm done?
>> Do I use CPLFree or can I use delete?
>
> delete should work, but the preferred way would be GDALDestroyColorTable() to
> avoid potential cross-heap issues on Windows in case your code and GDAL aren't
> built with the same compiler / compiler options.

IMO, for GDAL 2.0 the API could be improved and some symmetry
introduced. For example, for GDALColorTable::Clone()
two static methods could be added:

static GDALColorTable* GDALColorTable::Create(GDALPaletteInterp=GPI_RGB);
static void GDALColorTable::Destroy(GDALColorTable*);

And, similar approach in other classes.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From ben at vterrain.org  Sun Nov 11 11:00:37 2012
From: ben at vterrain.org (Ben Discoe)
Date: Sun, 11 Nov 2012 11:00:37 -0800
Subject: [gdal-dev] Which version number for the next GDAL release
	:	1.10 or 2.0 ?
In-Reply-To: <1352476740996-5015202.post@n6.nabble.com>
References: <201211072017.08371.even.rouault@mines-paris.org>	<509ABBBF.2070002@mail.ru>	<CA+TxYvNxMd6yV_U5-CahjVNSmmV_4TzGP-pA_K9KEU3QZsV_Jw@mail.gmail.com>	<201211082003.16694.even.rouault@mines-paris.org>	<509C1296.3070805@pobox.com>	<201211082249.51944.even.rouault@mines-paris.org>	<509C2D8C.2060207@pobox.com>	<201211082327.33109.even.rouault@mines-paris.org>
	<1352476740996-5015202.post@n6.nabble.com>
Message-ID: <005201cdc03e$d6050150$820f03f0$@vterrain.org>

+1 to everything Ragi said.

Version "numbering" like "1.10" is an affront to common sense and the basic
concept of the decimal system, not to mention every OS's filename sorting.
If 1.10 comes after 1.9, then it would be imperative to replace the
misleading decimal points (which are, apparently, NOT decimal points) with
some other punctuation (like 1-9, 1-10) to avoid confusion on precedence,
and even that doesn't address the sorting mess.

Enough changes have occurred since 1.0 (I know, since I was in fact using
GDAL then).
Please just call it 2.0 now.

-Ben

> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> bounces at lists.osgeo.org] On Behalf Of rburhum
> Sent: Friday, November 09, 2012 7:59 AM
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Which version number for the next GDAL release :
> 1.10 or 2.0 ?
> 
> Perhaps calling it 2.0 is not a bad thing and it sounds of less of a
hassle.
> Breaking the ABI (by rushing major API changes) just so that the semantics
of
> what "2.0" means, seems inappropriate. If/when the unification starts, we
> could bump it to 3.0, 4.0 or any other number. There are quite a few of
them
> we could use :p
> 
> my two cents,
> 
> Ragi


From gdal at stripfamily.net  Sun Nov 11 11:07:56 2012
From: gdal at stripfamily.net (David Strip)
Date: Sun, 11 Nov 2012 12:07:56 -0700
Subject: [gdal-dev] copying a GDALColorTable
In-Reply-To: <CABUeae-16ByZsiDur_JWy_TvqNHdOxX_xKpb=oO=iA7o-3mdGQ@mail.gmail.com>
References: <509FEB7E.9000605@stripfamily.net>
	<201211111922.19885.even.rouault@mines-paris.org>
	<CABUeae-16ByZsiDur_JWy_TvqNHdOxX_xKpb=oO=iA7o-3mdGQ@mail.gmail.com>
Message-ID: <509FF78C.4020406@stripfamily.net>

On 11/11/2012 11:59 AM, Mateusz Loskot wrote:

> IMO, for GDAL 2.0 the API could be improved and some symmetry
> introduced. For example, for GDALColorTable::Clone()
> two static methods could be added:
>
> static GDALColorTable* GDALColorTable::Create(GDALPaletteInterp=GPI_RGB);
> static void GDALColorTable::Destroy(GDALColorTable*);

If we're building a list of suggestions, a copy constructor would allow 
more C++ like coding:
GDALColorTable::GDALColorTable (const GDALColorTable &)
and perhaps an assignment operator
GDALColorTable::operator = (const GDALColorTable &)



From mateusz at loskot.net  Sun Nov 11 11:12:14 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 11 Nov 2012 19:12:14 +0000
Subject: [gdal-dev] copying a GDALColorTable
In-Reply-To: <509FF78C.4020406@stripfamily.net>
References: <509FEB7E.9000605@stripfamily.net>
	<201211111922.19885.even.rouault@mines-paris.org>
	<CABUeae-16ByZsiDur_JWy_TvqNHdOxX_xKpb=oO=iA7o-3mdGQ@mail.gmail.com>
	<509FF78C.4020406@stripfamily.net>
Message-ID: <CABUeae8OJeVr+6J8-m07R+nQc9=wqxfmQu-=ONkiR+mENdYbmg@mail.gmail.com>

On 11 November 2012 19:07, David Strip <gdal at stripfamily.net> wrote:
> On 11/11/2012 11:59 AM, Mateusz Loskot wrote:
>
>> IMO, for GDAL 2.0 the API could be improved and some symmetry
>> introduced. For example, for GDALColorTable::Clone()
>> two static methods could be added:
>>
>> static GDALColorTable* GDALColorTable::Create(GDALPaletteInterp=GPI_RGB);
>> static void GDALColorTable::Destroy(GDALColorTable*);
>
>
> If we're building a list of suggestions, a copy constructor would allow more
> C++ like coding:
> GDALColorTable::GDALColorTable (const GDALColorTable &)
> and perhaps an assignment operator
> GDALColorTable::operator = (const GDALColorTable &)

Keep in mind, C++ API in GDAL is "C with classes", there is no culture
of implementing copy constructors and assignment operators,
so there won't be any move equivalents either.

The safest bet is to assume GDAL classes are NOT copy
constructible or assignable, as they would have
copy ctor and assignment operator declared private.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From mateusz at loskot.net  Sun Nov 11 11:18:34 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun, 11 Nov 2012 19:18:34 +0000
Subject: [gdal-dev] Which version number for the next GDAL release :
 1.10 or 2.0 ?
In-Reply-To: <005201cdc03e$d6050150$820f03f0$@vterrain.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<509ABBBF.2070002@mail.ru>
	<CA+TxYvNxMd6yV_U5-CahjVNSmmV_4TzGP-pA_K9KEU3QZsV_Jw@mail.gmail.com>
	<201211082003.16694.even.rouault@mines-paris.org>
	<509C1296.3070805@pobox.com>
	<201211082249.51944.even.rouault@mines-paris.org>
	<509C2D8C.2060207@pobox.com>
	<201211082327.33109.even.rouault@mines-paris.org>
	<1352476740996-5015202.post@n6.nabble.com>
	<005201cdc03e$d6050150$820f03f0$@vterrain.org>
Message-ID: <CABUeae-ArEdoXy5GuHtbTvHRyh1qM=6vh-RHaUvbpPQW5aXXXg@mail.gmail.com>

On 11 November 2012 19:00, Ben Discoe <ben at vterrain.org> wrote:
> +1 to everything Ragi said.
>
> Version "numbering" like "1.10" is an affront to common sense and the basic
> concept of the decimal system, not to mention every OS's filename sorting.
> If 1.10 comes after 1.9, then it would be imperative to replace the
> misleading decimal points (which are, apparently, NOT decimal points) with
> some other punctuation (like 1-9, 1-10) to avoid confusion on precedence,
> and even that doesn't address the sorting mess.
>
> Enough changes have occurred since 1.0 (I know, since I was in fact using
> GDAL then).
> Please just call it 2.0 now.

Then all 2.0 discussions and documentation at Wiki needs to be renamed
from GDAL20Changes to GDALFutureChanges.
Otherwise, this list will be flooded with questions from confused users:
"Is feature X described in GDAL 2.0 wiki/RFCs released in 2.0? I can't find it!"

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at mines-paris.org  Sun Nov 11 11:25:41 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 11 Nov 2012 20:25:41 +0100
Subject: [gdal-dev]
 =?iso-8859-1?q?Which_version_number_for_the_next_GDAL_?=
 =?iso-8859-1?q?release_=3A=091=2E10_or_2=2E0_=3F?=
In-Reply-To: <005201cdc03e$d6050150$820f03f0$@vterrain.org>
References: <201211072017.08371.even.rouault@mines-paris.org>
	<1352476740996-5015202.post@n6.nabble.com>
	<005201cdc03e$d6050150$820f03f0$@vterrain.org>
Message-ID: <201211112025.41635.even.rouault@mines-paris.org>

Le dimanche 11 novembre 2012 20:00:37, Ben Discoe a ?crit :
> +1 to everything Ragi said.
> 
> Version "numbering" like "1.10" is an affront to common sense and the basic
> concept of the decimal system, not to mention every OS's filename sorting.
> If 1.10 comes after 1.9, then it would be imperative to replace the
> misleading decimal points (which are, apparently, NOT decimal points) with
> some other punctuation (like 1-9, 1-10) to avoid confusion on precedence,
> and even that doesn't address the sorting mess.

Ben,

The version number has never been a real number. "1.9.2" is for example our 
latest stable release.

> 
> Enough changes have occurred since 1.0 (I know, since I was in fact using
> GDAL then).
> Please just call it 2.0 now.

To my eyes, the amount of changes is not the rationale for the version number. 
GDAL being primarly a library, API/ABI considerations matter most.

Even

From gdal at stripfamily.net  Sun Nov 11 11:44:50 2012
From: gdal at stripfamily.net (David Strip)
Date: Sun, 11 Nov 2012 12:44:50 -0700
Subject: [gdal-dev] Suggestion for API addition
In-Reply-To: <201211111725.26725.even.rouault@mines-paris.org>
References: <509F1165.7020408@stripfamily.net>
	<201211111153.14381.even.rouault@mines-paris.org>
	<509FCF8D.6060506@stripfamily.net>
	<201211111725.26725.even.rouault@mines-paris.org>
Message-ID: <50A00032.6010803@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121111/ce2696c8/attachment-0001.html>

From even.rouault at mines-paris.org  Sun Nov 11 11:56:38 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 11 Nov 2012 20:56:38 +0100
Subject: [gdal-dev] Suggestion for API addition
In-Reply-To: <50A00032.6010803@stripfamily.net>
References: <509F1165.7020408@stripfamily.net>
	<201211111725.26725.even.rouault@mines-paris.org>
	<50A00032.6010803@stripfamily.net>
Message-ID: <201211112056.39105.even.rouault@mines-paris.org>


> GDALRasterBand::WriteCropToBand(int nCropSizeX, // width of the cropped
> region int nCropSizeY, // height of the cropped region int nXOffset,   //
> offset to the left edge of the cropped region int nYOffset,   // offset to
> the top of the cropped region void * pBuf,    // pointer to the buffer
> (uncropped) GDALDataType eBufType, // data type in the buffer int
> nPixelSpace, // byte offset from one pixel to the next int nLineSpace)  //
> byte offset from one line to the next {
>    void * pData = pBuf + nYOffset * nLineSpace + nXOffset * nPixelSpace;
>    this->RasterIO(GF_Write, 0, 0, this->nRasterXSize, this->nRasterYSize,
>                   pData, nCropSizeX, nCropSizeY, eBuftype, nPixelSpace,
> nLineSpace); }
> 
>  The code is obviously not very complicated. The value is that when you're
> reading code you can tell immediately that what's happening is the buffer
> is being cropped and written. If written directly in terms of RasterIO the
> intent is buried in the computation of the parameters, making it less
> clear.

Your implementation is more about rescaling than cropping ( 
http://en.wikipedia.org/wiki/Cropping_%28image%29 ). For me cropping implies 
at least working with a subwindow of the original image.

Sorry, but I still think this is going to confuse people more than help them.

From gdal at stripfamily.net  Sun Nov 11 12:29:00 2012
From: gdal at stripfamily.net (David Strip)
Date: Sun, 11 Nov 2012 13:29:00 -0700
Subject: [gdal-dev] Suggestion for API addition
In-Reply-To: <201211112056.39105.even.rouault@mines-paris.org>
References: <509F1165.7020408@stripfamily.net>
	<201211111725.26725.even.rouault@mines-paris.org>
	<50A00032.6010803@stripfamily.net>
	<201211112056.39105.even.rouault@mines-paris.org>
Message-ID: <50A00A8C.3030207@stripfamily.net>

On 11/11/2012 12:56 PM, Even Rouault wrote:
>> GDALRasterBand::WriteCropToBand(int nCropSizeX, // width of the cropped
>> region int nCropSizeY, // height of the cropped region int nXOffset,   //
>> offset to the left edge of the cropped region int nYOffset,   // offset to
>> the top of the cropped region void * pBuf,    // pointer to the buffer
>> (uncropped) GDALDataType eBufType, // data type in the buffer int
>> nPixelSpace, // byte offset from one pixel to the next int nLineSpace)  //
>> byte offset from one line to the next {
>>     void * pData = pBuf + nYOffset * nLineSpace + nXOffset * nPixelSpace;
>>     this->RasterIO(GF_Write, 0, 0, this->nRasterXSize, this->nRasterYSize,
>>                    pData, nCropSizeX, nCropSizeY, eBuftype, nPixelSpace,
>> nLineSpace); }
>>
>>   The code is obviously not very complicated. The value is that when you're
>> reading code you can tell immediately that what's happening is the buffer
>> is being cropped and written. If written directly in terms of RasterIO the
>> intent is buried in the computation of the parameters, making it less
>> clear.
> Your implementation is more about rescaling than cropping (
> http://en.wikipedia.org/wiki/Cropping_%28image%29 ). For me cropping implies
> at least working with a subwindow of the original image.
>
> Sorry, but I still think this is going to confuse people more than help them.
>
now it's my turn to be confused.
This is pixel-by-pixel copy of a subset of the input pixels. It is a 
subwindow of the original image, exactly as you say.
I'm taking an m x n input image and copying p x q pixels (p <= m, q <=n) 
into p x q pixels in the band. The scale is unchanged.

From even.rouault at mines-paris.org  Sun Nov 11 12:36:50 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun, 11 Nov 2012 21:36:50 +0100
Subject: [gdal-dev] Suggestion for API addition
In-Reply-To: <50A00A8C.3030207@stripfamily.net>
References: <509F1165.7020408@stripfamily.net>
	<201211112056.39105.even.rouault@mines-paris.org>
	<50A00A8C.3030207@stripfamily.net>
Message-ID: <201211112136.50491.even.rouault@mines-paris.org>


> now it's my turn to be confused.
> This is pixel-by-pixel copy of a subset of the input pixels. It is a
> subwindow of the original image, exactly as you say.
> I'm taking an m x n input image and copying p x q pixels (p <= m, q <=n)
> into p x q pixels in the band. The scale is unchanged.

Ah indeed, if you consider the point of view of the buffer, not the GDAL 
raster, that makes some sense...

Honestly I'm still not convinced. I let your proposal to other GDAL developers 
that might be interested.

> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nixanz at nixanz.com  Sun Nov 11 16:04:36 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 12 Nov 2012 11:04:36 +1100
Subject: [gdal-dev] Cannot get spatial reference system from ozi file
In-Reply-To: <4487C6B4-3AA2-4EF1-8C45-FCC49DEFF856@nixanz.com>
References: <4487C6B4-3AA2-4EF1-8C45-FCC49DEFF856@nixanz.com>
Message-ID: <0E20D5BE-0596-4C8C-B729-4375F23243F5@nixanz.com>

Unfortunately, I did not get any reply to my message about GDAL being unable to georeference an .ozf2 image using an ozi .map file a user sent me (see below).  Is there anybody who could take a look and help me out with this?

Please let me know if there is more information that I can provide in order to progress this issue.

Cheers,
Nik.


On 07/11/2012, at 11:11 AM, Nik Sands <nixanz at nixanz.com> wrote:

> Hi all,
> 
> My application is reading in ozi file pairs (.ozf2/.map), warping them and saving out as GeoTIFF or other file formats using GDAL.  It works fine for my own ozf files, but not for the files sent to me by one of my users (who apparently has a large number of files they want to use).
> 
> It has been unable to get a useful spatial reference system from the ozi file pair (.ozf2/.map) sent to me (.map content below).  The following code:
> 
> ------------------
> 	OGRSpatialReferenceH srcSRS = OSRNewSpatialReference(pszSrcWKT);
> 	char *srcWKT;
> 
> 	OSRExportToWkt(srcSRS, &srcWKT);
> 	printf("\n%s\n\n", srcWKT);
> ------------------
> 
> produces the following output:
> 
> ------------------
> 	LOCAL_CS["unnamed",UNIT["unknown",1]]
> ------------------
> 
> Can somebody please help me to use GDAL to obtain a valid spatial reference system from this .map file (content below)?
> 
> Note that I'm using a fairly recent build of GDAL trunk that includes all the ozi datums, etc, including "Australian Geodetic 1966" and it is able to get a valid SRS from my own files that use the same ozi datum.
> 
> The complete content of the ozi .map file in question is below.
> 
> Thanks in anticipation,
> Nik.
> 
> 
> OziExplorer Map Data File Version 2.2
> r2256.jgw
> D:\Documents and Settings\nelsonp\My Documents\General Admin\Personal\Tasmania 1 to 25,000\North West OZF2\r2256.ozf2
> 1 ,Map Code,
> Australian Geodetic 1966,WGS 84,   0.0000,   0.0000,WGS 84
> Reserved 1
> Reserved 2
> Magnetic Variation,,,E
> Map Projection,(UTM) Universal Transverse Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
> Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid, 55,219999.09067205,5570000.7412442,S
> Point02,xy, 1000, 1000,in, deg,    ,        ,,    ,        ,, grid, 55,223259.16350298,5566740.6684133,S
> Point03,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point04,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point05,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point06,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point07,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point08,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point09,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point10,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point11,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point12,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point13,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point14,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point15,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point16,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point17,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point18,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point19,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point20,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point21,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point22,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point23,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point24,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point25,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point26,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point27,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point28,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point29,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point30,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Projection Setup,     0.000000000,  -120.000000000,     0.999600000,            0.00,     -4000000.00,    34.000000000,    40.500000000,,,
> Map Feature = MF ; Map Comment = MC     These follow if they exist
> Track File = TF      These follow if they exist
> Moving Map Parameters = MM?    These follow if they exist
> MM0,Yes
> MMPNUM,4
> MMPXY,1,0,0
> MMPXY,2,6136,0
> MMPXY,3,6136,3069
> MMPXY,4,0,3069
> MMPLL,1, 143.721340, -39.973660
> MMPLL,2, 143.955261, -39.980047
> MMPLL,3, 143.951253, -40.070068
> MMPLL,4, 143.717025, -40.063661
> MM1B,3.251882
> MOP,Map Open Position,0,0
> IWH,Map Image Width/Height,6136,3069
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nixanz at nixanz.com  Sun Nov 11 17:45:56 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 12 Nov 2012 12:45:56 +1100
Subject: [gdal-dev] Cannot get spatial reference system from ozi file
In-Reply-To: <4487C6B4-3AA2-4EF1-8C45-FCC49DEFF856@nixanz.com>
References: <4487C6B4-3AA2-4EF1-8C45-FCC49DEFF856@nixanz.com>
Message-ID: <2E31CAD6-5241-441C-A1E6-3D893C2F7845@nixanz.com>

I still don't have any resolution to this issue, but thanks to feedback from one list reader, I've been prompted to find out some more information...

gdalinfo produces the following output, which is contrary to what my application produces:

	Coordinate System is `LOCAL_CS[""Ozi" projection "(UTM) Universal Transverse Mercator"",UNIT["Meter",1]]'

So I need to figure out why my application is not getting this from the same file.

Note that my build of GDAL is from a recent version of the trunk (September, 2012):

	$ gdalinfo --version
	GDAL 2.0dev, released 2011/12/29

And was built for Mac OS X using the following configure (which I noted at the time for future reference as it took me ages to get this to work  :-):

./configure \
--with-macosx-framework \
--with-threads \
--disable-static \
--without-pg \
--without-grass \
--without-libgrass \
--without-cfitsio \
--without-pcraster \
--without-netcdf \
--without-ogdi \
--without-fme \
--without-hdf4 \
--without-hdf5 \
--without-jasper \
--without-kakadu \
--without-bsb \
--without-grib \
--without-mysql \
--without-ingres \
--without-xerces \
--without-odbc \
--without-curl \
--without-sqlite3 \
--without-idb \
--without-sde \
CFLAGS="-Os -arch i386 -arch x86_64" \
CXXFLAGS="-Os -arch i386 -arch x86_64" \
LDFLAGS="-arch i386 -arch x86_64"



On 07/11/2012, at 11:11 AM, Nik Sands <nixanz at nixanz.com> wrote:

> Hi all,
> 
> My application is reading in ozi file pairs (.ozf2/.map), warping them and saving out as GeoTIFF or other file formats using GDAL.  It works fine for my own ozf files, but not for the files sent to me by one of my users (who apparently has a large number of files they want to use).
> 
> It has been unable to get a useful spatial reference system from the ozi file pair (.ozf2/.map) sent to me (.map content below).  The following code:
> 
> ------------------
> 	OGRSpatialReferenceH srcSRS = OSRNewSpatialReference(pszSrcWKT);
> 	char *srcWKT;
> 
> 	OSRExportToWkt(srcSRS, &srcWKT);
> 	printf("\n%s\n\n", srcWKT);
> ------------------
> 
> produces the following output:
> 
> ------------------
> 	LOCAL_CS["unnamed",UNIT["unknown",1]]
> ------------------
> 
> Can somebody please help me to use GDAL to obtain a valid spatial reference system from this .map file (content below)?
> 
> Note that I'm using a fairly recent build of GDAL trunk that includes all the ozi datums, etc, including "Australian Geodetic 1966" and it is able to get a valid SRS from my own files that use the same ozi datum.
> 
> The complete content of the ozi .map file in question is below.
> 
> Thanks in anticipation,
> Nik.
> 
> 
> OziExplorer Map Data File Version 2.2
> r2256.jgw
> D:\Documents and Settings\nelsonp\My Documents\General Admin\Personal\Tasmania 1 to 25,000\North West OZF2\r2256.ozf2
> 1 ,Map Code,
> Australian Geodetic 1966,WGS 84,   0.0000,   0.0000,WGS 84
> Reserved 1
> Reserved 2
> Magnetic Variation,,,E
> Map Projection,(UTM) Universal Transverse Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
> Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid, 55,219999.09067205,5570000.7412442,S
> Point02,xy, 1000, 1000,in, deg,    ,        ,,    ,        ,, grid, 55,223259.16350298,5566740.6684133,S
> Point03,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point04,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point05,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point06,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point07,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point08,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point09,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point10,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point11,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point12,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point13,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point14,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point15,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point16,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point17,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point18,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point19,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point20,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point21,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point22,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point23,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point24,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point25,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point26,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point27,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point28,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point29,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Point30,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
> Projection Setup,     0.000000000,  -120.000000000,     0.999600000,            0.00,     -4000000.00,    34.000000000,    40.500000000,,,
> Map Feature = MF ; Map Comment = MC     These follow if they exist
> Track File = TF      These follow if they exist
> Moving Map Parameters = MM?    These follow if they exist
> MM0,Yes
> MMPNUM,4
> MMPXY,1,0,0
> MMPXY,2,6136,0
> MMPXY,3,6136,3069
> MMPXY,4,0,3069
> MMPLL,1, 143.721340, -39.973660
> MMPLL,2, 143.955261, -39.980047
> MMPLL,3, 143.951253, -40.070068
> MMPLL,4, 143.717025, -40.063661
> MM1B,3.251882
> MOP,Map Open Position,0,0
> IWH,Map Image Width/Height,6136,3069
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nixanz at nixanz.com  Sun Nov 11 19:38:47 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 12 Nov 2012 14:38:47 +1100
Subject: [gdal-dev] Cannot get spatial reference system from ozi file
In-Reply-To: <2E31CAD6-5241-441C-A1E6-3D893C2F7845@nixanz.com>
References: <4487C6B4-3AA2-4EF1-8C45-FCC49DEFF856@nixanz.com>
	<2E31CAD6-5241-441C-A1E6-3D893C2F7845@nixanz.com>
Message-ID: <CE44F20F-2942-42F6-BEF1-1FB69BD8279A@nixanz.com>

Please ignore this thread.  I've finally figured out that it was an error in code on my part.  I thought that my code was reading the .map file, when in fact it was reading the GeoTIFF file that had been converted from the .map/ozf2 earlier in the program.  My humble apologies.

(I may post a new thread later regarding why the GeoTIFF is not georeferenced correctly).

Thanks for your tolerance.  :-)
Nik.


On 12/11/2012, at 12:45 PM, Nik Sands <nixanz at nixanz.com> wrote:

> I still don't have any resolution to this issue, but thanks to feedback from one list reader, I've been prompted to find out some more information...
> 
> gdalinfo produces the following output, which is contrary to what my application produces:
> 
> 	Coordinate System is `LOCAL_CS[""Ozi" projection "(UTM) Universal Transverse Mercator"",UNIT["Meter",1]]'
> 
> So I need to figure out why my application is not getting this from the same file.
> 
> Note that my build of GDAL is from a recent version of the trunk (September, 2012):
> 
> 	$ gdalinfo --version
> 	GDAL 2.0dev, released 2011/12/29
> 
> And was built for Mac OS X using the following configure (which I noted at the time for future reference as it took me ages to get this to work  :-):
> 
> ./configure \
> --with-macosx-framework \
> --with-threads \
> --disable-static \
> --without-pg \
> --without-grass \
> --without-libgrass \
> --without-cfitsio \
> --without-pcraster \
> --without-netcdf \
> --without-ogdi \
> --without-fme \
> --without-hdf4 \
> --without-hdf5 \
> --without-jasper \
> --without-kakadu \
> --without-bsb \
> --without-grib \
> --without-mysql \
> --without-ingres \
> --without-xerces \
> --without-odbc \
> --without-curl \
> --without-sqlite3 \
> --without-idb \
> --without-sde \
> CFLAGS="-Os -arch i386 -arch x86_64" \
> CXXFLAGS="-Os -arch i386 -arch x86_64" \
> LDFLAGS="-arch i386 -arch x86_64"
> 
> 
> 
> On 07/11/2012, at 11:11 AM, Nik Sands <nixanz at nixanz.com> wrote:
> 
>> Hi all,
>> 
>> My application is reading in ozi file pairs (.ozf2/.map), warping them and saving out as GeoTIFF or other file formats using GDAL.  It works fine for my own ozf files, but not for the files sent to me by one of my users (who apparently has a large number of files they want to use).
>> 
>> It has been unable to get a useful spatial reference system from the ozi file pair (.ozf2/.map) sent to me (.map content below).  The following code:
>> 
>> ------------------
>> 	OGRSpatialReferenceH srcSRS = OSRNewSpatialReference(pszSrcWKT);
>> 	char *srcWKT;
>> 
>> 	OSRExportToWkt(srcSRS, &srcWKT);
>> 	printf("\n%s\n\n", srcWKT);
>> ------------------
>> 
>> produces the following output:
>> 
>> ------------------
>> 	LOCAL_CS["unnamed",UNIT["unknown",1]]
>> ------------------
>> 
>> Can somebody please help me to use GDAL to obtain a valid spatial reference system from this .map file (content below)?
>> 
>> Note that I'm using a fairly recent build of GDAL trunk that includes all the ozi datums, etc, including "Australian Geodetic 1966" and it is able to get a valid SRS from my own files that use the same ozi datum.
>> 
>> The complete content of the ozi .map file in question is below.
>> 
>> Thanks in anticipation,
>> Nik.
>> 
>> 
>> OziExplorer Map Data File Version 2.2
>> r2256.jgw
>> D:\Documents and Settings\nelsonp\My Documents\General Admin\Personal\Tasmania 1 to 25,000\North West OZF2\r2256.ozf2
>> 1 ,Map Code,
>> Australian Geodetic 1966,WGS 84,   0.0000,   0.0000,WGS 84
>> Reserved 1
>> Reserved 2
>> Magnetic Variation,,,E
>> Map Projection,(UTM) Universal Transverse Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
>> Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid, 55,219999.09067205,5570000.7412442,S
>> Point02,xy, 1000, 1000,in, deg,    ,        ,,    ,        ,, grid, 55,223259.16350298,5566740.6684133,S
>> Point03,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point04,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point05,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point06,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point07,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point08,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point09,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point10,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point11,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point12,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point13,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point14,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point15,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point16,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point17,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point18,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point19,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point20,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point21,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point22,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point23,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point24,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point25,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point26,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point27,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point28,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point29,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Point30,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
>> Projection Setup,     0.000000000,  -120.000000000,     0.999600000,            0.00,     -4000000.00,    34.000000000,    40.500000000,,,
>> Map Feature = MF ; Map Comment = MC     These follow if they exist
>> Track File = TF      These follow if they exist
>> Moving Map Parameters = MM?    These follow if they exist
>> MM0,Yes
>> MMPNUM,4
>> MMPXY,1,0,0
>> MMPXY,2,6136,0
>> MMPXY,3,6136,3069
>> MMPXY,4,0,3069
>> MMPLL,1, 143.721340, -39.973660
>> MMPLL,2, 143.955261, -39.980047
>> MMPLL,3, 143.951253, -40.070068
>> MMPLL,4, 143.717025, -40.063661
>> MM1B,3.251882
>> MOP,Map Open Position,0,0
>> IWH,Map Image Width/Height,6136,3069
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From nixanz at nixanz.com  Sun Nov 11 20:02:59 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 12 Nov 2012 15:02:59 +1100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
Message-ID: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>

Hi,

I have two sets of Ozi .map files (and corresponding ozf2 files) that behave very differently when processed by GDAL using the following code:

------------------------
	char *srcWKT = (char *)GDALGetProjectionRef( hSrcDS );
	
	if ( srcWKT == NULL || strlen(srcWKT) <= 0 )
		return NO;
	
	printf("srcWKT:\n\n%s\n\n", srcWKT);

	OGRSpatialReferenceH srcSRS = OSRNewSpatialReference(srcWKT);
	
	if ( ! srcSRS )
	{
		printf("FAILED TO GET SOURCE SPATIAL REFERENCE SYSTEM.\n");
	}
------------------------

The first set of .map files work fine, producing output such as this:

------------------------
srcWKT:

PROJCS["unnamed",GEOGCS["AGD66",DATUM["Australian_Geodetic_Datum_1966",SPHEROID["Australian National Spheroid",6378160,298.25,AUTHORITY["EPSG","7003"]],TOWGS84[-117.808,-51.536,137.784,0.303,0.446,0.234,-0.29],AUTHORITY["EPSG","6202"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4202"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",147],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",10000000],UNIT["Meter",1]]
------------------------

However, for the second set I cannot get a spatial reference system and I get this output:

------------------------
srcWKT:

LOCAL_CS[""Ozi" projection "(UTM) Universal Transverse Mercator"",UNIT["Meter",1]]

FAILED TO GET SOURCE SPATIAL REFERENCE SYSTEM.
------------------------

Please help me figure out why the two sets of .map files behave so differently.  In particular, how can I get a spatial reference system for the failing .map files?

(Content of two example files are below.  First one is OK, second one fails.  Let me know if I can provide any further information.)

Thanks in anticipation,
Nik.


OK:
------------------------
OziExplorer Map Data File Version 2.2
R2257
D:\GPS and Mapping\OziExplorer\Maps\Tassie 25k\R2257.ozf2
1 ,Map Code,
Australian Geodetic 1966,,   0.0000,   0.0000,WGS 84
Reserved 1
Reserved 2
Magnetic Variation,,,E
Map Projection,Transverse Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid,   ,220000.77942328,5579999.7247315,
Point02,xy,    1,    0,in, deg,    ,        ,,    ,        ,, grid,   ,220004.03889463,5579999.7247315,
Point03,xy,    0,    1,in, deg,    ,        ,,    ,        ,, grid,   ,220000.77942328,5579996.4652601,
Point04,xy,    1,    1,in, deg,    ,        ,,    ,        ,, grid,   ,220004.03889463,5579996.4652601,
Point05,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point06,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point07,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point08,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point09,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point10,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point11,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point12,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point13,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point14,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point15,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point16,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point17,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point18,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point19,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point20,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point21,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point22,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point23,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point24,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point25,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point26,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point27,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point28,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point29,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point30,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Projection Setup,     0.000000000,   147.000000000,     0.999600000,       500000.00,     10000000.00,,,,,
Map Feature = MF ; Map Comment = MC     These follow if they exist
Track File = TF      These follow if they exist
Moving Map Parameters = MM?    These follow if they exist
MM0,Yes
MMPNUM,4
MMPXY,1,0,0
MMPXY,2,6137,0
MMPXY,3,6137,3069
MMPXY,4,0,3069
MMPLL,1, 143.725652, -39.883721
MMPLL,2, 143.959253, -39.890076
MMPLL,3, 143.955249, -39.980236
MMPLL,4, 143.721343, -39.973861
MM1B,3.251186
MOP,Map Open Position,0,0
IWH,Map Image Width/Height,6137,3069
------------------------



FAILS:
------------------------
OziExplorer Map Data File Version 2.2
r2256.jgw
D:\Documents and Settings\nelsonp\My Documents\General Admin\Personal\Tasmania 1 to 25,000\North West OZF2\r2256.ozf2
1 ,Map Code,
Australian Geodetic 1966,WGS 84,   0.0000,   0.0000,WGS 84
Reserved 1
Reserved 2
Magnetic Variation,,,E
Map Projection,(UTM) Universal Transverse Mercator,PolyCal,No,AutoCalOnly,No,BSBUseWPX,No
Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid, 55,219999.09067205,5570000.7412442,S
Point02,xy, 1000, 1000,in, deg,    ,        ,,    ,        ,, grid, 55,223259.16350298,5566740.6684133,S
Point03,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point04,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point05,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point06,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point07,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point08,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point09,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point10,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point11,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point12,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point13,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point14,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point15,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point16,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point17,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point18,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point19,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point20,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point21,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point22,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point23,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point24,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point25,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point26,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point27,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point28,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point29,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Point30,xy,     ,     ,in, deg,    ,        ,,    ,        ,, grid,   ,           ,           ,
Projection Setup,     0.000000000,  -120.000000000,     0.999600000,            0.00,     -4000000.00,    34.000000000,    40.500000000,,,
Map Feature = MF ; Map Comment = MC     These follow if they exist
Track File = TF      These follow if they exist
Moving Map Parameters = MM?    These follow if they exist
MM0,Yes
MMPNUM,4
MMPXY,1,0,0
MMPXY,2,6136,0
MMPXY,3,6136,3069
MMPXY,4,0,3069
MMPLL,1, 143.721340, -39.973660
MMPLL,2, 143.955261, -39.980047
MMPLL,3, 143.951253, -40.070068
MMPLL,4, 143.717025, -40.063661
MM1B,3.251882
MOP,Map Open Position,0,0
IWH,Map Image Width/Height,6136,3069
------------------------


From jrepetto at free.fr  Sun Nov 11 23:13:08 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 12 Nov 2012 08:13:08 +0100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
Message-ID: <50A0A184.7060505@free.fr>

On 12/11/2012 05:02, Nik Sands wrote:
> 
> Please help me figure out why the two sets of .map files behave so differently.  In particular, how can I get a spatial reference system for the failing .map files?
> (Content of two example files are below.  First one is OK, second one fails.  Let me know if I can provide any further information.)

Hi,
I think it is because the second calibration file has only two
calibration points. Three points are probably necessary.

Jean-Claude


From nixanz at nixanz.com  Sun Nov 11 23:16:07 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 12 Nov 2012 18:16:07 +1100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <50A0A184.7060505@free.fr>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
Message-ID: <5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>

Is that limitation actually built into GDAL?

Because 2-point .map files are not uncommon, and so long as the two points are both different in both axes, then there should be no reason why a 3rd point in required (especially in UTM).

Cheers,
Nik.


On 12/11/2012, at 6:13 PM, Jean-Claude Repetto <jrepetto at free.fr> wrote:

> On 12/11/2012 05:02, Nik Sands wrote:
>> 
>> Please help me figure out why the two sets of .map files behave so differently.  In particular, how can I get a spatial reference system for the failing .map files?
>> (Content of two example files are below.  First one is OK, second one fails.  Let me know if I can provide any further information.)
> 
> Hi,
> I think it is because the second calibration file has only two
> calibration points. Three points are probably necessary.
> 
> Jean-Claude
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jrepetto at free.fr  Mon Nov 12 00:02:52 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 12 Nov 2012 09:02:52 +0100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
Message-ID: <50A0AD2C.10308@free.fr>

On 12/11/2012 08:16, Nik Sands wrote:
> Is that limitation actually built into GDAL?
> Because 2-point .map files are not uncommon, and so long as the two points are both different in both axes, then there should be no reason why a 3rd point in required (especially in UTM).
> 
> Nik.

Have you checked if adding a third point solves your problem ?

Jean-Claude

From nixanz at nixanz.com  Mon Nov 12 00:10:41 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 12 Nov 2012 19:10:41 +1100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <50A0AD2C.10308@free.fr>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
Message-ID: <ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>

I will try but don't have any Ozi products  and am not confident I can create one that is legitimate.  The same may apply to the user who raised the issue but I will check. 

On 12/11/2012, at 7:02 PM, Jean-Claude Repetto <jrepetto at free.fr> wrote:

> On 12/11/2012 08:16, Nik Sands wrote:
>> Is that limitation actually built into GDAL?
>> Because 2-point .map files are not uncommon, and so long as the two points are both different in both axes, then there should be no reason why a 3rd point in required (especially in UTM).
>> 
>> Nik.
> 
> Have you checked if adding a third point solves your problem ?
> 
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jrepetto at free.fr  Mon Nov 12 00:52:13 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 12 Nov 2012 09:52:13 +0100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
	<ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
Message-ID: <50A0B8BD.5020201@free.fr>

Le 12/11/2012 09:10, Nik Sands a ?crit :
> I will try but don't have any Ozi products  and am not confident I can create one that is legitimate.  The same may apply to the user who raised the issue but I will check.

You don't need Ozi, only a text editor.


From nixanz at nixanz.com  Mon Nov 12 02:21:46 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Mon, 12 Nov 2012 21:21:46 +1100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <50A0B8BD.5020201@free.fr>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
	<ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
	<50A0B8BD.5020201@free.fr>
Message-ID: <43169839-58D4-40A7-B60F-0EFBE1CC8BBC@nixanz.com>

I appreciate that (hence pasting the content of the file in my original email).  However, I don't know how to be certain that the text I put into the file represents something that makes sense. 

However, as I said I will give it a shot (when I get back to my computer).

On 12/11/2012, at 7:52 PM, Jean-Claude Repetto <jrepetto at free.fr> wrote:

> Le 12/11/2012 09:10, Nik Sands a ?crit :
>> I will try but don't have any Ozi products  and am not confident I can create one that is legitimate.  The same may apply to the user who raised the issue but I will check.
> 
> You don't need Ozi, only a text editor.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jukka.rahkonen at mmmtike.fi  Mon Nov 12 02:51:10 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 12 Nov 2012 10:51:10 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Hide_OGR=5FSTYLE_from_PDF_attributes?=
Message-ID: <loom.20121112T112149-74@post.gmane.org>

Hi,

If I write some vector data from OGR_DATASOURCE into geospatial PDF and I would
like to style symbols with OGR_STYLE, then ORG_STYLE string will also be written
?nto the model tree of the resulting PDF file as an attribute. I consider that
it would be better not to transfer OGR_STYLE at all as an attribute. If somebody
really wants to send style definitions into PDF as attributes it could still be
done by selecting styles another time with SQL with some other attribute name.

My select in the .vrt file is as follows
<SrcSQL>SELECT *,ref as ID, 'SYMBOL(id:ogr-sym-3,c:#FF0000,s:10px)' as OGR_STYLE
from points where highway='bus_stop'</SrcSQL>

I wonder also why the the example about using png images as symbols in the
document http://www.gdal.org/ogr/drv_pdf.html includes  settings for the symbol
color. OGR_STYLE in the example is SYMBOL(c:#000000,id:"a_symbol.png"). Does
some of the supported image formats really support changing colors on-the-fly?

-Jukka Rahkonen-





From jukka.rahkonen at mmmtike.fi  Mon Nov 12 04:38:36 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 12 Nov 2012 12:38:36 +0000 (UTC)
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
	<ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
	<50A0B8BD.5020201@free.fr>
	<43169839-58D4-40A7-B60F-0EFBE1CC8BBC@nixanz.com>
Message-ID: <loom.20121112T132926-343@post.gmane.org>

Nik Sands <nixanz <at> nixanz.com> writes:

> 
> I appreciate that (hence pasting the content of the file in my original
email).  However, I don't know how to
> be certain that the text I put into the file represents something that makes
sense. 
> 
> However, as I said I will give it a shot (when I get back to my computer).

This is my guess:
Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid,
55,219999.09067205,5570000.7412442,S
Point02,xy, 1000, 1000,in, deg,    ,        ,,    ,        ,, grid,
55,223259.16350298,5566740.6684133,S
Point03,xy,    0, 1000,in, deg,    ,        ,,    ,        ,, grid,
55,219999.09067205,5566740.6684133,S

Having two calibration points in OziExplorer .map files is not at all uncommon
and with digital maps and orthophotos in some projected coordinate system there
is no need to have more. Same situation basically than with ESRI world file
georeferencing when just one anchor point and pixel size is given.
http://www.oziexplorer3.com/eng/features/features_moreinfo3.html

-Jukka Rahkonen-


From jukka.rahkonen at mmmtike.fi  Mon Nov 12 06:57:09 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 12 Nov 2012 14:57:09 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Hide_OGR=5FSTYLE_from_PDF_attributes?=
References: <loom.20121112T112149-74@post.gmane.org>
Message-ID: <loom.20121112T153925-468@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

 
> I wonder also why the the example about using png images as symbols in the
> document http://www.gdal.org/ogr/drv_pdf.html includes  settings for the symbol
> color. OGR_STYLE in the example is SYMBOL(c:#000000,id:"a_symbol.png"). Does
> some of the supported image formats really support changing colors on-the-fly?


I can tell now that color can be used for adjusting transparency if alpha
channel is included too. The example it not the best possible because 
SYMBOL(c:#000000,id:"a_symbol.png") means the same as plain
SYMBOL(id:"a_symbol.png") and resulting symbol will be 50% opaque.
Perhaps the example could be edited a bit:
Alpha channel value controls the opacity/transparency 
SYMBOL(c:#000000FF,id:"a_symbol.png") makes 100% opaque symbol


-Jukka-


From even.rouault at mines-paris.org  Mon Nov 12 11:53:14 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 12 Nov 2012 20:53:14 +0100
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
	1.10
In-Reply-To: <201211092110.29701.even.rouault@mines-paris.org>
References: <201211092110.29701.even.rouault@mines-paris.org>
Message-ID: <201211122053.15011.even.rouault@mines-paris.org>

Le vendredi 09 novembre 2012 21:10:29, Even Rouault a ?crit :
> Motion: The next major GDAL version released from trunk will be called
> GDAL/OGR 1.10.

Just a friendly reminder, because I've seen no vote until now.

Even

From warmerdam at pobox.com  Mon Nov 12 11:54:09 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 12 Nov 2012 11:54:09 -0800
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
	1.10
In-Reply-To: <201211092110.29701.even.rouault@mines-paris.org>
References: <201211092110.29701.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBdBTGJSNj4pFi_mJXeKWhtrnGKObttyecYzgkFO6=gh4Q@mail.gmail.com>

+1 Frank


On Fri, Nov 9, 2012 at 12:10 PM, Even Rouault
<even.rouault at mines-paris.org>wrote:

> Motion: The next major GDAL version released from trunk will be called
> GDAL/OGR 1.10.
>
> To take into account 2-figure numbers in the components of the version
> number,
> the GDAL_VERSION_NUM macro will be changed accordingly as :
>
> #  define GDAL_VERSION_NUM
>
> (GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100+GDAL_VERSION_BUILD)
>
> A new macro will be added so that users don't have to do all the above
> multiplications :
>
> #define GDAL_COMPUTE_VERSION(maj,min,rev)
> (maj*1000000+min*10000+rev*100)
>
> (Note: as raised by Mateusz, I've dropped the 'build' argument in the
> macro,
> since it has never been used in the past and it is unlikely code would
> depend
> on that)
>
> ----
>
> Hi,
>
> Not surprisingly when it is related to preferences on version numbering,
> the
> previous discussion thread has not lead to a clear consensus on the topic,
> but
> we need to make a decision soon so that users can anticipate the
> adaptations
> needed in their code.
>
> 1.10 seems the more logical option to me, even if that implies changing the
> way we compute GDAL_VERSION_NUM, which I don't anticipate to cause
> problems to
> existing code. There are also a few existing documentation pages in
> drivers or
> utilities that mention GDAL 2.0 that will need to be changed, but I'll take
> care of this if the motion is approved (some sed magic should do this).
>
> +1 Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121112/f45adda7/attachment.html>

From jluis at ualg.pt  Mon Nov 12 11:57:55 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 12 Nov 2012 19:57:55 +0000
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
 1.10
In-Reply-To: <201211122053.15011.even.rouault@mines-paris.org>
References: <201211092110.29701.even.rouault@mines-paris.org>
	<201211122053.15011.even.rouault@mines-paris.org>
Message-ID: <50A154C3.9080007@ualg.pt>

On 12-11-2012 19:53, Even Rouault wrote:
> Le vendredi 09 novembre 2012 21:10:29, Even Rouault a ?crit :
>> Motion: The next major GDAL version released from trunk will be called
>> GDAL/OGR 1.10.
> Just a friendly reminder, because I've seen no vote until now.
>
> Even
>

No vote off course, but agree.

Joaquim

From ivan.lucena at princeton-ma.us  Mon Nov 12 12:03:36 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon, 12 Nov 2012 15:03:36 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?Motion=3A_Release_next_major_GDAL_versi?=
	=?iso-8859-1?q?on_as_GDAL/OGR_1=2E10?=
In-Reply-To: <50A154C3.9080007@ualg.pt>
References: <201211092110.29701.even.rouault@mines-paris.org>
	<201211122053.15011.even.rouault@mines-paris.org>
	<50A154C3.9080007@ualg.pt>
Message-ID: <20121112200336.10292.qmail@s466.sureserver.com>

Same here.

Ivan


>  -------Original Message-------
>  From: Joaquim Luis <jluis at ualg.pt>
>  To: Even Rouault <even.rouault at mines-paris.org>
>  Cc: gdal-dev at lists.osgeo.org
>  Subject: Re: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR 1.10
>  Sent: Nov 12 '12 14:57
>  
>  On 12-11-2012 19:53, Even Rouault wrote:
>  > Le vendredi 09 novembre 2012 21:10:29, Even Rouault a ?crit :
>  >> Motion: The next major GDAL version released from trunk will be called
>  >> GDAL/OGR 1.10.
>  > Just a friendly reminder, because I've seen no vote until now.
>  >
>  > Even
>  >
>  
>  No vote off course, but agree.
>  
>  Joaquim
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

From hobu.inc at gmail.com  Mon Nov 12 12:26:16 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon, 12 Nov 2012 14:26:16 -0600
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
	1.10
In-Reply-To: <CA+YzLBdBTGJSNj4pFi_mJXeKWhtrnGKObttyecYzgkFO6=gh4Q@mail.gmail.com>
References: <201211092110.29701.even.rouault@mines-paris.org>
	<CA+YzLBdBTGJSNj4pFi_mJXeKWhtrnGKObttyecYzgkFO6=gh4Q@mail.gmail.com>
Message-ID: <158D7F9F-BDFB-40E3-A274-FEF1E3227814@gmail.com>

+0 Howard

I don't like that we're changing the version macro and changing our versioning pattern 10+ years down the road. Assumptions about GDAL_VERSION_NUM are likely baked in many places, and this is going to cause some (albeit minor) pain.

There's no right way though, it's just a choice. My personal preference is to call it 2.0.

Howard
 
On Nov 12, 2012, at 1:54 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:

> +1 Frank
> 
> 
> On Fri, Nov 9, 2012 at 12:10 PM, Even Rouault <even.rouault at mines-paris.org> wrote:
> Motion: The next major GDAL version released from trunk will be called
> GDAL/OGR 1.10.
> 
> To take into account 2-figure numbers in the components of the version number,
> the GDAL_VERSION_NUM macro will be changed accordingly as :
> 
> #  define GDAL_VERSION_NUM
> (GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100+GDAL_VERSION_BUILD)
> 
> A new macro will be added so that users don't have to do all the above
> multiplications :
> 
> #define GDAL_COMPUTE_VERSION(maj,min,rev)
> (maj*1000000+min*10000+rev*100)
> 
> (Note: as raised by Mateusz, I've dropped the 'build' argument in the macro,
> since it has never been used in the past and it is unlikely code would depend
> on that)
> 
> ----
> 
> Hi,
> 
> Not surprisingly when it is related to preferences on version numbering, the
> previous discussion thread has not lead to a clear consensus on the topic, but
> we need to make a decision soon so that users can anticipate the adaptations
> needed in their code.
> 
> 1.10 seems the more logical option to me, even if that implies changing the
> way we compute GDAL_VERSION_NUM, which I don't anticipate to cause problems to
> existing code. There are also a few existing documentation pages in drivers or
> utilities that mention GDAL 2.0 that will need to be changed, but I'll take
> care of this if the motion is approved (some sed magic should do this).
> 
> +1 Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From etourigny.dev at gmail.com  Mon Nov 12 12:35:36 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Mon, 12 Nov 2012 18:35:36 -0200
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
	1.10
In-Reply-To: <158D7F9F-BDFB-40E3-A274-FEF1E3227814@gmail.com>
References: <201211092110.29701.even.rouault@mines-paris.org>
	<CA+YzLBdBTGJSNj4pFi_mJXeKWhtrnGKObttyecYzgkFO6=gh4Q@mail.gmail.com>
	<158D7F9F-BDFB-40E3-A274-FEF1E3227814@gmail.com>
Message-ID: <CA+TxYvP481AWnW7u5SwjaSfEhXa2OSSac6pNA2x3znoiM9u4+g@mail.gmail.com>

+1 for 1.10

Etienne

On Mon, Nov 12, 2012 at 6:26 PM, Howard Butler <hobu.inc at gmail.com> wrote:
> +0 Howard
>
> I don't like that we're changing the version macro and changing our versioning pattern 10+ years down the road. Assumptions about GDAL_VERSION_NUM are likely baked in many places, and this is going to cause some (albeit minor) pain.
>
> There's no right way though, it's just a choice. My personal preference is to call it 2.0.
>
> Howard
>
> On Nov 12, 2012, at 1:54 PM, Frank Warmerdam <warmerdam at pobox.com> wrote:
>
>> +1 Frank
>>
>>
>> On Fri, Nov 9, 2012 at 12:10 PM, Even Rouault <even.rouault at mines-paris.org> wrote:
>> Motion: The next major GDAL version released from trunk will be called
>> GDAL/OGR 1.10.
>>
>> To take into account 2-figure numbers in the components of the version number,
>> the GDAL_VERSION_NUM macro will be changed accordingly as :
>>
>> #  define GDAL_VERSION_NUM
>> (GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100+GDAL_VERSION_BUILD)
>>
>> A new macro will be added so that users don't have to do all the above
>> multiplications :
>>
>> #define GDAL_COMPUTE_VERSION(maj,min,rev)
>> (maj*1000000+min*10000+rev*100)
>>
>> (Note: as raised by Mateusz, I've dropped the 'build' argument in the macro,
>> since it has never been used in the past and it is unlikely code would depend
>> on that)
>>
>> ----
>>
>> Hi,
>>
>> Not surprisingly when it is related to preferences on version numbering, the
>> previous discussion thread has not lead to a clear consensus on the topic, but
>> we need to make a decision soon so that users can anticipate the adaptations
>> needed in their code.
>>
>> 1.10 seems the more logical option to me, even if that implies changing the
>> way we compute GDAL_VERSION_NUM, which I don't anticipate to cause problems to
>> existing code. There are also a few existing documentation pages in drivers or
>> utilities that mention GDAL 2.0 that will need to be changed, but I'll take
>> care of this if the motion is approved (some sed magic should do this).
>>
>> +1 Even
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> --
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush    | Geospatial Software Developer
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Mon Nov 12 13:24:20 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 12 Nov 2012 22:24:20 +0100
Subject: [gdal-dev] Hide OGR_STYLE from PDF attributes
In-Reply-To: <loom.20121112T153925-468@post.gmane.org>
References: <loom.20121112T112149-74@post.gmane.org>
	<loom.20121112T153925-468@post.gmane.org>
Message-ID: <201211122224.20094.even.rouault@mines-paris.org>

Le lundi 12 novembre 2012 15:57:09, Jukka Rahkonen a ?crit :
> Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
> > I wonder also why the the example about using png images as symbols in
> > the document http://www.gdal.org/ogr/drv_pdf.html includes  settings for
> > the symbol color. OGR_STYLE in the example is
> > SYMBOL(c:#000000,id:"a_symbol.png"). Does some of the supported image
> > formats really support changing colors on-the-fly?
> 
> I can tell now that color can be used for adjusting transparency if alpha
> channel is included too. The example it not the best possible because
> SYMBOL(c:#000000,id:"a_symbol.png") means the same as plain
> SYMBOL(id:"a_symbol.png") and resulting symbol will be 50% opaque.

Actually SYMBOL(c:#000000,id:"a_symbol.png") would result in a opaque symbol, 
whereas SYMBOL(id:"a_symbol.png") would use the default alpha for brush, 
that's to say 50%.

> Perhaps the example could be edited a bit:
> Alpha channel value controls the opacity/transparency
> SYMBOL(c:#000000FF,id:"a_symbol.png") makes 100% opaque symbol

I've tried to improve the doc about that in r25219.

> 
> 
> -Jukka-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dmorissette at mapgears.com  Mon Nov 12 13:27:02 2012
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon, 12 Nov 2012 16:27:02 -0500
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
 1.10
In-Reply-To: <201211092110.29701.even.rouault@mines-paris.org>
References: <201211092110.29701.even.rouault@mines-paris.org>
Message-ID: <50A169A6.3040402@mapgears.com>

+1 Daniel


It took me a while to respond because initially I was worried about the 
potential impact on released application code calling GDAL (from other 
projects/products). Unless I'm mistaken it seems to me that there will 
be no impact on pre-1.10 application code that used to test for things 
like GDAL_VERSION_NUM >= 1800 (for instance). This code will continue to 
work, and only tests for GDAL 1.10/2.0 and greater will need to be fixed 
to use the new macro, which means a minimal impact limited to recent 
code which was based on non-released GDAL features anyway.



On 12-11-09 3:10 PM, Even Rouault wrote:
> Motion: The next major GDAL version released from trunk will be called
> GDAL/OGR 1.10.
>
> To take into account 2-figure numbers in the components of the version number,
> the GDAL_VERSION_NUM macro will be changed accordingly as :
>
> #  define GDAL_VERSION_NUM
> (GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100+GDAL_VERSION_BUILD)
>
> A new macro will be added so that users don't have to do all the above
> multiplications :
>
> #define GDAL_COMPUTE_VERSION(maj,min,rev)
> (maj*1000000+min*10000+rev*100)
>
> (Note: as raised by Mateusz, I've dropped the 'build' argument in the macro,
> since it has never been used in the past and it is unlikely code would depend
> on that)
>
> ----
>
> Hi,
>
> Not surprisingly when it is related to preferences on version numbering, the
> previous discussion thread has not lead to a clear consensus on the topic, but
> we need to make a decision soon so that users can anticipate the adaptations
> needed in their code.
>
> 1.10 seems the more logical option to me, even if that implies changing the
> way we compute GDAL_VERSION_NUM, which I don't anticipate to cause problems to
> existing code. There are also a few existing documentation pages in drivers or
> utilities that mention GDAL 2.0 that will need to be changed, but I'll take
> care of this if the motion is approved (some sed magic should do this).
>
> +1 Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000


From even.rouault at mines-paris.org  Mon Nov 12 13:34:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 12 Nov 2012 22:34:05 +0100
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
	1.10
In-Reply-To: <50A169A6.3040402@mapgears.com>
References: <201211092110.29701.even.rouault@mines-paris.org>
	<50A169A6.3040402@mapgears.com>
Message-ID: <201211122234.05612.even.rouault@mines-paris.org>

Le lundi 12 novembre 2012 22:27:02, Daniel Morissette a ?crit :
> +1 Daniel
> 
> 
> It took me a while to respond because initially I was worried about the
> potential impact on released application code calling GDAL (from other
> projects/products). Unless I'm mistaken it seems to me that there will
> be no impact on pre-1.10 application code that used to test for things
> like GDAL_VERSION_NUM >= 1800 (for instance). This code will continue to
> work

Yes. And even if we had wanted to change the scheme for previous versions, we 
cannot change the past (which is lucky!)

> , and only tests for GDAL 1.10/2.0 and greater will need to be fixed
> to use the new macro, which means a minimal impact limited to recent
> code which was based on non-released GDAL features anyway.

Yes.

From even.rouault at mines-paris.org  Mon Nov 12 13:40:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 12 Nov 2012 22:40:36 +0100
Subject: [gdal-dev] Hide OGR_STYLE from PDF attributes
In-Reply-To: <loom.20121112T112149-74@post.gmane.org>
References: <loom.20121112T112149-74@post.gmane.org>
Message-ID: <201211122240.37037.even.rouault@mines-paris.org>

Le lundi 12 novembre 2012 11:51:10, Jukka Rahkonen a ?crit :
> Hi,
> 
> If I write some vector data from OGR_DATASOURCE into geospatial PDF and I
> would like to style symbols with OGR_STYLE, then ORG_STYLE string will
> also be written ?nto the model tree of the resulting PDF file as an
> attribute. I consider that it would be better not to transfer OGR_STYLE at
> all as an attribute. If somebody really wants to send style definitions
> into PDF as attributes it could still be done by selecting styles another
> time with SQL with some other attribute name.
> 
> My select in the .vrt file is as follows
> <SrcSQL>SELECT *,ref as ID, 'SYMBOL(id:ogr-sym-3,c:#FF0000,s:10px)' as
> OGR_STYLE from points where highway='bus_stop'</SrcSQL>
> 

I'm not sure how to do that without adding a hack into the PDF driver (and 
potentially other drivers).

But I can offer an easy workaround. You can edit your VRT to explictely mention 
the fields you want to export. For example :

<OGRVRTDataSource>
    <OGRVRTLayer name="point">
        <SrcDataSource relativeToVRT="0" shared="1">point.vrt</SrcDataSource>
        <SrcSQL>SELECT *, 'SYMBOL(id:ogr-sym-3,c:#FF0000,s:10px)' as OGR_STYLE 
FROM point</SrcSQL>
        <Field name="id"/>
    </OGRVRTLayer>
</OGRVRTDataSource>

From szekerest at gmail.com  Mon Nov 12 14:07:54 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon, 12 Nov 2012 23:07:54 +0100
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
	1.10
In-Reply-To: <201211092110.29701.even.rouault@mines-paris.org>
References: <201211092110.29701.even.rouault@mines-paris.org>
Message-ID: <CACALY+T+tAaGawTzZKsM9RtO=amHD++8BzxmDwMAwdFX1G7adQ@mail.gmail.com>

+1

Tamas


2012/11/9 Even Rouault <even.rouault at mines-paris.org>

> Motion: The next major GDAL version released from trunk will be called
> GDAL/OGR 1.10.
>
> To take into account 2-figure numbers in the components of the version
> number,
> the GDAL_VERSION_NUM macro will be changed accordingly as :
>
> #  define GDAL_VERSION_NUM
>
> (GDAL_VERSION_MAJOR*1000000+GDAL_VERSION_MINOR*10000+GDAL_VERSION_REV*100+GDAL_VERSION_BUILD)
>
> A new macro will be added so that users don't have to do all the above
> multiplications :
>
> #define GDAL_COMPUTE_VERSION(maj,min,rev)
> (maj*1000000+min*10000+rev*100)
>
> (Note: as raised by Mateusz, I've dropped the 'build' argument in the
> macro,
> since it has never been used in the past and it is unlikely code would
> depend
> on that)
>
> ----
>
> Hi,
>
> Not surprisingly when it is related to preferences on version numbering,
> the
> previous discussion thread has not lead to a clear consensus on the topic,
> but
> we need to make a decision soon so that users can anticipate the
> adaptations
> needed in their code.
>
> 1.10 seems the more logical option to me, even if that implies changing the
> way we compute GDAL_VERSION_NUM, which I don't anticipate to cause
> problems to
> existing code. There are also a few existing documentation pages in
> drivers or
> utilities that mention GDAL 2.0 that will need to be changed, but I'll take
> care of this if the motion is approved (some sed magic should do this).
>
> +1 Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121112/5c66a712/attachment-0001.html>

From Jukka.Rahkonen at mmmtike.fi  Mon Nov 12 14:14:55 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon, 12 Nov 2012 22:14:55 +0000
Subject: [gdal-dev] Hide OGR_STYLE from PDF attributes
In-Reply-To: <201211122240.37037.even.rouault@mines-paris.org>
References: <loom.20121112T112149-74@post.gmane.org>,
	<201211122240.37037.even.rouault@mines-paris.org>
Message-ID: <84446DEF76453C439E9E97E438E13A637A95AB@suutari.haapa.mmm.fi>

Even Rouault wrote:

> Le lundi 12 novembre 2012 11:51:10, Jukka Rahkonen a ?crit :
>> Hi,
>>
>> If I write some vector data from OGR_DATASOURCE into geospatial PDF and I
>> would like to style symbols with OGR_STYLE, then ORG_STYLE string will
>> also be written ?nto the model tree of the resulting PDF file as an
>> attribute. I consider that it would be better not to transfer OGR_STYLE at
>> all as an attribute. If somebody really wants to send style definitions
>> into PDF as attributes it could still be done by selecting styles another
>> time with SQL with some other attribute name.
>>
>> My select in the .vrt file is as follows
>> <SrcSQL>SELECT *,ref as ID, 'SYMBOL(id:ogr-sym-3,c:#FF0000,s:10px)' as
>> OGR_STYLE from points where highway='bus_stop'</SrcSQL>
>>

> I'm not sure how to do that without adding a hack into the PDF driver (and
> potentially other drivers).

> But I can offer an easy workaround. You can edit your VRT to explictely mention
> the fields you want to export. For example :

<OGRVRTDataSource>
    <OGRVRTLayer name="point">
        <SrcDataSource relativeToVRT="0" shared="1">point.vrt</SrcDataSource>
        <SrcSQL>SELECT *, 'SYMBOL(id:ogr-sym-3,c:#FF0000,s:10px)' as OGR_STYLE
FROM point</SrcSQL>
        <Field name="id"/>
    </OGRVRTLayer>
</OGRVRTDataSource>

What a trick, I would have never guessed to limit what gets selected by SrcSQL with Field name. It works, it is logical even it feels odd, and one day, if I still remember it, they will call me guru too.

-Jukka-

From nixanz at nixanz.com  Mon Nov 12 16:03:38 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Tue, 13 Nov 2012 11:03:38 +1100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <loom.20121112T132926-343@post.gmane.org>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
	<ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
	<50A0B8BD.5020201@free.fr>
	<43169839-58D4-40A7-B60F-0EFBE1CC8BBC@nixanz.com>
	<loom.20121112T132926-343@post.gmane.org>
Message-ID: <23AC3054-4609-473D-A500-5B7D8A798BD4@nixanz.com>

Thanks for the replies so far.  Unfortunately, adding a 3rd calibration point to the .map file has not helped.  Of course I'm assuming that the added calibration point is valid (eg, I tried the one suggested below, which looks like it should be OK).

Does anybody have any other suggestions as to why this .map file cannot be interpreted correctly by GDAL?

Is it a bug, or an incomplete .map parsing implementation, or am I doing something wrong?

Cheers,
Nik.


On 12/11/2012, at 11:38 PM, Jukka Rahkonen <jukka.rahkonen at mmmtike.fi> wrote:

> Nik Sands <nixanz <at> nixanz.com> writes:
> 
>> 
>> I appreciate that (hence pasting the content of the file in my original
> email).  However, I don't know how to
>> be certain that the text I put into the file represents something that makes
> sense. 
>> 
>> However, as I said I will give it a shot (when I get back to my computer).
> 
> This is my guess:
> Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid,
> 55,219999.09067205,5570000.7412442,S
> Point02,xy, 1000, 1000,in, deg,    ,        ,,    ,        ,, grid,
> 55,223259.16350298,5566740.6684133,S
> Point03,xy,    0, 1000,in, deg,    ,        ,,    ,        ,, grid,
> 55,219999.09067205,5566740.6684133,S
> 
> Having two calibration points in OziExplorer .map files is not at all uncommon
> and with digital maps and orthophotos in some projected coordinate system there
> is no need to have more. Same situation basically than with ESRI world file
> georeferencing when just one anchor point and pixel size is given.
> http://www.oziexplorer3.com/eng/features/features_moreinfo3.html
> 
> -Jukka Rahkonen-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at mmmtike.fi  Mon Nov 12 23:55:30 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 13 Nov 2012 07:55:30 +0000 (UTC)
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
	<ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
	<50A0B8BD.5020201@free.fr>
	<43169839-58D4-40A7-B60F-0EFBE1CC8BBC@nixanz.com>
	<loom.20121112T132926-343@post.gmane.org>
	<23AC3054-4609-473D-A500-5B7D8A798BD4@nixanz.com>
Message-ID: <loom.20121113T084002-549@post.gmane.org>

Nik Sands <nixanz <at> nixanz.com> writes:

> 
> Thanks for the replies so far.  Unfortunately, adding a 3rd calibration point
to the .map file has not
> helped.  Of course I'm assuming that the added calibration point is valid (eg,
I tried the one suggested
> below, which looks like it should be OK).
> 
> Does anybody have any other suggestions as to why this .map file cannot be
interpreted correctly by GDAL?
> 
> Is it a bug, or an incomplete .map parsing implementation, or am I doing 
something wrong?

There must be something wrong with the Ozi mapfile is not correct. Does it work
with Ozi?

Point01,xy,    0,    0,in, deg,    ,        ,,    ,        ,, grid,
55,219999.09067205,5570000.7412442,S
Point02,xy, 1000, 1000,in, deg,    ,        ,,    ,        ,, grid,
55,223259.16350298,5566740.6684133,S

Control points are clearly in degrees but in that place or the Ozi mapfile there
should be projected grid coordinates.

This page describes the Ozi mapfile structure
http://code.google.com/p/androzic/wiki/MapFile. You can also install OziExplorer
Trial version, rename the .map file and re-calibrate the jpeg image with Ozi and
see how it writes the map file. 

-Jukka Rahkonen-




From jrepetto at free.fr  Tue Nov 13 03:02:18 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Tue, 13 Nov 2012 12:02:18 +0100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <23AC3054-4609-473D-A500-5B7D8A798BD4@nixanz.com>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
	<ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
	<50A0B8BD.5020201@free.fr>
	<43169839-58D4-40A7-B60F-0EFBE1CC8BBC@nixanz.com>
	<loom.20121112T132926-343@post.gmane.org>
	<23AC3054-4609-473D-A500-5B7D8A798BD4@nixanz.com>
Message-ID: <50A228BA.7000102@free.fr>

Le 13/11/2012 01:03, Nik Sands a ?crit :
> Thanks for the replies so far.  Unfortunately, adding a 3rd calibration point to the .map file has not helped.  Of course I'm assuming that the added calibration point is valid (eg, I tried the one suggested below, which looks like it should be OK).
>
> Does anybody have any other suggestions as to why this .map file cannot be interpreted correctly by GDAL?
>
> Is it a bug, or an incomplete .map parsing implementation, or am I doing something wrong?

Hi Nik,

I have looked at the Ozi driver source code, and found that the UTM 
projection is not supported.
Please file a bug (https://trac.osgeo.org/gdal/), provide some sample 
files, and I'll try to improve the driver.

Jean-Claude


From pierigis at gmail.com  Tue Nov 13 08:14:00 2012
From: pierigis at gmail.com (Pietro Rossin)
Date: Tue, 13 Nov 2012 08:14:00 -0800 (PST)
Subject: [gdal-dev] Best way to mosaic and compress lots of tiff Black/white?
Message-ID: <1352823240739-5016021.post@n6.nabble.com>

Hello all
I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all bands
(black/white).
I want to mosaic them in a single image to be used in qgis and other gis
software.

Which is the best way to do this? And to compress the resulting image? May
be Tiff?? Single band??
Another problem is that I must apply a formula to input images to transform
255 value to null, because of some white portion of each image that overlap
to black portion of the adiacent one..

Thanks
Pietro



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Best-way-to-mosaic-and-compress-lots-of-tiff-Black-white-tp5016021.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gabrielfusca at suremptec.com.ar  Tue Nov 13 08:31:22 2012
From: gabrielfusca at suremptec.com.ar (Gabriel Fusca)
Date: Tue, 13 Nov 2012 13:31:22 -0300
Subject: [gdal-dev]  Use of GDALTransformerFunc
Message-ID: <CAJ1ZnRV2CLGxSorDPvRg4+poat+oRePfewkTKBYBB2EhkNdpdA@mail.gmail.com>

Hi,

I? m using Gdal 1.9 and trying to realize a polynomial transformation using
GDALTransformerFunc.

I wanna use GDALTransformerFunc<http://www.gdal.org/gdal__alg_8h.html#a7df61123fec15deb3da3acabce19e647>to
perform the transformation.

The documentation says that the first argument (void *pTransformerArg) is a
callback data function.
GDALCreateGCPTransformer()<http://www.gdal.org/gdal__alg_8h.html#ac57c80f7bf6752fac1dff8c2a21a15a3>
serves
as callback data function for GDALTransformerFunc?

Is there any way to obtain the coefficients of the polynomial
transformation?

Regards,

---
Gabriel Fusca
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
gabrielfusca at suremptec.com.ar
http://www.suremptec.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121113/6b2574da/attachment.html>

From jr.morreale at enoreth.net  Tue Nov 13 08:32:55 2012
From: jr.morreale at enoreth.net (jr.morreale at enoreth.net)
Date: Tue, 13 Nov 2012 17:32:55 +0100
Subject: [gdal-dev]
 =?utf-8?q?Best_way_to_mosaic_and_compress_lots_of_tiff?=
 =?utf-8?q?_Black/white=3F?=
In-Reply-To: <1352823240739-5016021.post@n6.nabble.com>
References: <1352823240739-5016021.post@n6.nabble.com>
Message-ID: <1e6adc767b66d7d33f2bcf7320f08ec2@enoreth.net>

Hi,

You could start by merging all your tiff in a VRT then do 
gdal_translate -of Gtiff -co SPARSE_OK=TRUE -a_nodata 0 -co NBITS=1 -co 
"TILED=YES" -co "COMPRESS=CCITTFAX4" -co "INTERLEAVE=BAND" "example.vrt" 
"example.tif"

Le 2012-11-13 17:14, Pietro Rossin a ?crit :
> Hello all
> I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all 
> bands
> (black/white).
> I want to mosaic them in a single image to be used in qgis and other 
> gis
> software.
>
> Which is the best way to do this? And to compress the resulting 
> image? May
> be Tiff?? Single band??
> Another problem is that I must apply a formula to input images to 
> transform
> 255 value to null, because of some white portion of each image that 
> overlap
> to black portion of the adiacent one..
>
> Thanks
> Pietro

Le 2012-11-13 17:14, Pietro Rossin a ?crit?:
> Hello all
> I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all 
> bands
> (black/white).
> I want to mosaic them in a single image to be used in qgis and other 
> gis
> software.
>
> Which is the best way to do this? And to compress the resulting 
> image? May
> be Tiff?? Single band??
> Another problem is that I must apply a formula to input images to 
> transform
> 255 value to null, because of some white portion of each image that 
> overlap
> to black portion of the adiacent one..
>
> Thanks
> Pietro

From kyle at pobox.com  Tue Nov 13 12:44:53 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 13 Nov 2012 13:44:53 -0700
Subject: [gdal-dev] SQLite Driver and non-spatial tables
Message-ID: <op.wnqbw3rh8in2ni@kyle-workstation>

I have a Spatialite enabled SQLite file with both spatial and non-spatial  
tables.  Since my database has a table called geometry_columns, all  
non-spatial tables are not loaded as layers.  If I don't have a  
geometry_columns OGR attempts to load geometry from all the tables, but  
still loads non-spatial tables.  Is that correct?  The behavior doesn't  
seem consistent in the two cases.  I just want to make sure I understand  
the driver's behavior.

kss

From newmanw10 at gmail.com  Tue Nov 13 13:19:34 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Tue, 13 Nov 2012 14:19:34 -0700
Subject: [gdal-dev] Create overview tiff from a set of tiff files
Message-ID: <CAD34qgm-+HrYgvfsCZgfV5CygaVx0=kZp-VqSXpFHuO2EpU1mw@mail.gmail.com>

I have a set f tiff files at different zoom levels/resolutions

0.tif (2048x1024)
1.tif (4096x2048)
2.tif (8192x4096)

I would like to create one tif that is 8192x4096 but have 2 overviews
that are the 0.tif and 1.tif.  Is there a GDAL command that I can give
multiple tiffs to create one tiff with overviews?

Thanks

From even.rouault at mines-paris.org  Tue Nov 13 13:38:09 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 13 Nov 2012 22:38:09 +0100
Subject: [gdal-dev] Create overview tiff from a set of tiff files
In-Reply-To: <CAD34qgm-+HrYgvfsCZgfV5CygaVx0=kZp-VqSXpFHuO2EpU1mw@mail.gmail.com>
References: <CAD34qgm-+HrYgvfsCZgfV5CygaVx0=kZp-VqSXpFHuO2EpU1mw@mail.gmail.com>
Message-ID: <1352842689.50a2bdc129ce3@imp.free.fr>

Selon Billy Newman <newmanw10 at gmail.com>:

> I have a set f tiff files at different zoom levels/resolutions
>
> 0.tif (2048x1024)
> 1.tif (4096x2048)
> 2.tif (8192x4096)
>
> I would like to create one tif that is 8192x4096 but have 2 overviews
> that are the 0.tif and 1.tif.  Is there a GDAL command that I can give
> multiple tiffs to create one tiff with overviews?

Rename 1.tif as 2.tif.ovr, and 0.tif as 2.tif.ovr.ovr

then

gdal_translate 2.tif 2_with_ovr.tif -co COPY_SRC_OVERVIEWS=YES

From nixanz at nixanz.com  Tue Nov 13 15:44:45 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Wed, 14 Nov 2012 10:44:45 +1100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <50A228BA.7000102@free.fr>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
	<ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
	<50A0B8BD.5020201@free.fr>
	<43169839-58D4-40A7-B60F-0EFBE1CC8BBC@nixanz.com>
	<loom.20121112T132926-343@post.gmane.org>
	<23AC3054-4609-473D-A500-5B7D8A798BD4@nixanz.com>
	<50A228BA.7000102@free.fr>
Message-ID: <3062EFC1-B42A-467D-ADAF-9BA333465E23@nixanz.com>

Thanks very much for looking into this.  I've filed the bug at https://trac.osgeo.org/gdal/ticket/4894



On 13/11/2012, at 10:02 PM, Jean-Claude Repetto <jrepetto at free.fr> wrote:

> Le 13/11/2012 01:03, Nik Sands a ?crit :
>> Thanks for the replies so far.  Unfortunately, adding a 3rd calibration point to the .map file has not helped.  Of course I'm assuming that the added calibration point is valid (eg, I tried the one suggested below, which looks like it should be OK).
>> 
>> Does anybody have any other suggestions as to why this .map file cannot be interpreted correctly by GDAL?
>> 
>> Is it a bug, or an incomplete .map parsing implementation, or am I doing something wrong?
> 
> Hi Nik,
> 
> I have looked at the Ozi driver source code, and found that the UTM projection is not supported.
> Please file a bug (https://trac.osgeo.org/gdal/), provide some sample files, and I'll try to improve the driver.
> 
> Jean-Claude
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Tom_Roche at pobox.com  Tue Nov 13 21:11:53 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Wed, 14 Nov 2012 00:11:53 -0500
Subject: [gdal-dev] "reboxing," or 3D regridding
Message-ID: <87zk2kkbty.fsf@pobox.com>


summary: I'd appreciate advice regarding tools and methods for
transforming values from an unprojected global 3D spatial grid to a
projected 3D grid with different horizontal and vertical resolution, or
pointers to other resources to consult.

details:

I have output from a global atmospheric model that I'd like to use as
initial and boundary conditions for a regional model. The global input
netCDF has dimensions=2.5? lon x 1.875? lat x 56 vertical levels. The
regional model runs over North America using a 12-km grid projected
Lambert Comformal Conic (LCC), with 34 vertical levels. Since its top
height is less than that of the global input, the extents of the output
domain are fully contained within the input domain.

Each box or voxel defined by the global input grid contains an estimate
for the N2O concentration for that volume. From those I want to compute
the concentrations for each output gridbox volume. I'd appreciate your
recommendations for tools that can handle this usecase. Particularly, is
this something that gdalwarp can do?

FWIW, the best tool I've seen so far is R package=gstat, but (IIUC)

- gstat expects projected input. I'm not sure if I can work around that
  for this usecase.

- as the name implies, 'gstat' is doing geostatistics, e.g., variogram-
  and covariance-based modeling. I'm not sure either how to setup the
  distance weighting for my scenario, and, frankly, I remain unconvinced
  that a statistical approach is necessary for this application (though
  it may be a sufficient or the best-available approach). This may be
  due to my statistical ignorance, however.

your assistance is appreciated, Tom Roche <Tom_Roche at pobox.com>

From CABO at NIRAS.DK  Tue Nov 13 23:13:13 2012
From: CABO at NIRAS.DK (=?iso-8859-1?Q?Casper_B=F8rgesen_=28CABO=29?=)
Date: Wed, 14 Nov 2012 07:13:13 +0000
Subject: [gdal-dev] Inifitine recursion in ogr.py
Message-ID: <BCF6B63AE0B25941A7F56567B58A2805351091AC@allkexa1.NIRAS.INT>

Hi!

I am using GDAL 1.9.2 x64, Python 3.3 x64 and Windows 7 and I have a problem with infinite recursion in ogr.py. My initial call is:

            feature = ogr.Feature(layer.GetLayerDefn())

and the call stack:

__init__

Python\lib\site-packages\osgeo\ogr.py

__getattr__

Python\lib\site-packages\osgeo\ogr.py

GetField

Python\lib\site-packages\osgeo\ogr.py

GetFieldIndex

Python\lib\site-packages\osgeo\ogr.py

__getattr__

Python\lib\site-packages\osgeo\ogr.py

GetField

Python\lib\site-packages\osgeo\ogr.py

... repeating...

...


I have tried using Eclipse 4.2 with Pydev 2.7 and PyScripter 2.5.3, and in both cases the debug functionality is messed up after the above initial call. When just running the script, no problems occur.
What can I do to avoid this problem?


Best regards

Casper
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121114/098ff74a/attachment.html>

From pierigis at gmail.com  Wed Nov 14 02:57:33 2012
From: pierigis at gmail.com (Pietro Rossin)
Date: Wed, 14 Nov 2012 02:57:33 -0800 (PST)
Subject: [gdal-dev] Best way to mosaic and compress lots of tiff
	Black/white?
In-Reply-To: <1e6adc767b66d7d33f2bcf7320f08ec2@enoreth.net>
References: <1352823240739-5016021.post@n6.nabble.com>
	<1e6adc767b66d7d33f2bcf7320f08ec2@enoreth.net>
Message-ID: <CAPwOVCFzKJSSJmmzZLRyn5CGcFkU0_EEQwyqmo1rW9uzJuEqeg@mail.gmail.com>

Ok
I made a test VRT and I applied your gdal_translate command.
It work and the result is a tiff with a weight of about the sum of the two
test mosaiced tiffs.
But as you can see in this image

http://www.flickr.com/photos/90029615 at N05/8184720800/

the two tiffs have a white orizzontal stripe that separate them.
This is because each tif to be mosaiced have a white frame and every frame
overlap to "data" areas of adiacent images.

If I eliminate the 255 value from original tiffs the result is like this
http://www.flickr.com/photos/90029615 at N05/8184744636/

I tried using -a_nodata 255 in gdal_translate command but the result is the
same white separation..

How can I set 255 values to nodata before mosaic each tiff?

Thank you very much for your help!
Pietro


2012/11/13 MORREALE Jean Roc [via OSGeo.org] <
ml-node+s1560n5016032h37 at n6.nabble.com>

> Hi,
>
> You could start by merging all your tiff in a VRT then do
> gdal_translate -of Gtiff -co SPARSE_OK=TRUE -a_nodata 0 -co NBITS=1 -co
> "TILED=YES" -co "COMPRESS=CCITTFAX4" -co "INTERLEAVE=BAND" "example.vrt"
> "example.tif"
>
> Le 2012-11-13 17:14, Pietro Rossin a ?crit :
>
> > Hello all
> > I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all
> > bands
> > (black/white).
> > I want to mosaic them in a single image to be used in qgis and other
> > gis
> > software.
> >
> > Which is the best way to do this? And to compress the resulting
> > image? May
> > be Tiff?? Single band??
> > Another problem is that I must apply a formula to input images to
> > transform
> > 255 value to null, because of some white portion of each image that
> > overlap
> > to black portion of the adiacent one..
> >
> > Thanks
> > Pietro
>
> Le 2012-11-13 17:14, Pietro Rossin a ?crit :
>
> > Hello all
> > I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all
> > bands
> > (black/white).
> > I want to mosaic them in a single image to be used in qgis and other
> > gis
> > software.
> >
> > Which is the best way to do this? And to compress the resulting
> > image? May
> > be Tiff?? Single band??
> > Another problem is that I must apply a formula to input images to
> > transform
> > 255 value to null, because of some white portion of each image that
> > overlap
> > to black portion of the adiacent one..
> >
> > Thanks
> > Pietro
> _______________________________________________
> gdal-dev mailing list
> [hidden email] <http://user/SendEmail.jtp?type=node&node=5016032&i=0>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> ------------------------------
>  If you reply to this email, your message will be added to the discussion
> below:
>
> http://osgeo-org.1560.n6.nabble.com/Best-way-to-mosaic-and-compress-lots-of-tiff-Black-white-tp5016021p5016032.html
>  To unsubscribe from Best way to mosaic and compress lots of tiff
> Black/white?, click here<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=unsubscribe_by_code&node=5016021&code=cGllcmlnaXNAZ21haWwuY29tfDUwMTYwMjF8MjMwODY1MTQ5>
> .
> NAML<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Best-way-to-mosaic-and-compress-lots-of-tiff-Black-white-tp5016021p5016218.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121114/5b2d3b24/attachment-0001.html>

From doug_newcomb at fws.gov  Wed Nov 14 04:47:20 2012
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Wed, 14 Nov 2012 07:47:20 -0500
Subject: [gdal-dev] "reboxing," or 3D regridding
In-Reply-To: <87zk2kkbty.fsf@pobox.com>
References: <87zk2kkbty.fsf@pobox.com>
Message-ID: <CALQGVr3y2AQSkC9dBeHiDpymhc1VZ4uGGWwbFHGoeqLRv_t0PQ@mail.gmail.com>

Tom,
Would the GRASS 3D Raster (Voxel) functions meet your needs?

http://grass.osgeo.org/grass64/manuals/html64_user/raster3D.html

Doug

On Wed, Nov 14, 2012 at 12:11 AM, Tom Roche <Tom_Roche at pobox.com> wrote:

>
> summary: I'd appreciate advice regarding tools and methods for
> transforming values from an unprojected global 3D spatial grid to a
> projected 3D grid with different horizontal and vertical resolution, or
> pointers to other resources to consult.
>
> details:
>
> I have output from a global atmospheric model that I'd like to use as
> initial and boundary conditions for a regional model. The global input
> netCDF has dimensions=2.5? lon x 1.875? lat x 56 vertical levels. The
> regional model runs over North America using a 12-km grid projected
> Lambert Comformal Conic (LCC), with 34 vertical levels. Since its top
> height is less than that of the global input, the extents of the output
> domain are fully contained within the input domain.
>
> Each box or voxel defined by the global input grid contains an estimate
> for the N2O concentration for that volume. From those I want to compute
> the concentrations for each output gridbox volume. I'd appreciate your
> recommendations for tools that can handle this usecase. Particularly, is
> this something that gdalwarp can do?
>
> FWIW, the best tool I've seen so far is R package=gstat, but (IIUC)
>
> - gstat expects projected input. I'm not sure if I can work around that
>   for this usecase.
>
> - as the name implies, 'gstat' is doing geostatistics, e.g., variogram-
>   and covariance-based modeling. I'm not sure either how to setup the
>   distance weighting for my scenario, and, frankly, I remain unconvinced
>   that a statistical approach is necessary for this application (though
>   it may be a sufficient or the best-available approach). This may be
>   due to my statistical ignorance, however.
>
> your assistance is appreciated, Tom Roche <Tom_Roche at pobox.com>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121114/7d9fc21c/attachment.html>

From jaak at nutiteq.com  Wed Nov 14 04:53:00 2012
From: jaak at nutiteq.com (Jaak Laineste (Nutiteq))
Date: Wed, 14 Nov 2012 14:53:00 +0200
Subject: [gdal-dev] Problem with gdalsrsinfo on some NOAA bsb/kap files
In-Reply-To: <CALGmxE+hp=HOGAHRARu7pGW2VnBchCr_je6VTWNoVusQUtYVrw@mail.gmail.com>
References: <509D638C.7050702@gmail.com>
	<201211092129.15690.even.rouault@mines-paris.org>
	<509D82AB.8000408@gmail.com>
	<201211092348.22209.even.rouault@mines-paris.org>
	<CALGmxE+hp=HOGAHRARu7pGW2VnBchCr_je6VTWNoVusQUtYVrw@mail.gmail.com>
Message-ID: <CAFqye3Ky4Gi=T1m0ZQYzGMpOngJdp4NeYmKMP6v=csvr-fwyAQ@mail.gmail.com>

Hello,
 Have you found workaround for this? I just created index bounding boxes
for all the NOAA BSB charts using GDAL for my Android solution, see
http://imgur.com/MpADB - as you can see there are quite many wrong
locations, Xmin-coordinate is 0. In the same time, Y and Xmax seems to be
correct, which is interesting also. I do not have the number, but there
seems to be significant number (1/4?) of the NOAA files positioned wrong.
Also QGIS seems to relay on this info and also offplaces same files.

Jaak


2012/11/10 Chris Barker <chris.barker at noaa.gov>

> On Fri, Nov 9, 2012 at 2:48 PM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
>
> > ok, I see what happens. In _3 and _4 cases, the BSB driver manages to
> compute
> > a geotransform from the GCPs and then assigns a projection, in addition
> to the
> > GCP projection.
> > In the _1 and _2 cases, the BSB driver doesn't manage to compute the
> > geotranform from the GCPs (which is a known issue sometimes with this
> driver,
> > presumably because it has a too strict tolerance in the computation of
> the
> > geotransform from the GCPs), so the projection is only reported by the
> > GetGCPProjection() method, which the gdalsrsinfo never queries.
> >
> > In all cases, gdalinfo does show the projection and/or GCP projection.
> >
> > Perhaps gdalsrsinfo should also query the GCP projection if no regular
> > projection is reported.
>
> I've wondered for ages about this driver -- the *.kap files have
> redundant info -- the projection definition and related info is enough
> (always? or only north-up?) to provide a complete projection and
> geotransform, but there are also the set of GCPs.
>
> I've never checked to see if they always match to a good tolerance,
> and I don't know what  GDAL does with the redundant info.
>
> From your note, it sounds like GDAL prefers the GCP transform -- is
> that so? and I'm not sure that's the best option -- presumably the
> info in the header is exact? Why not prefer that?
>
> -Chris
>
>
>
>
> --
>
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker at noaa.gov
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Jaak Laineste
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121114/247f5419/attachment.html>

From pierigis at gmail.com  Wed Nov 14 05:11:22 2012
From: pierigis at gmail.com (Pietro Rossin)
Date: Wed, 14 Nov 2012 14:11:22 +0100
Subject: [gdal-dev] Best way to mosaic and compress lots of tiff
	Black/white?
In-Reply-To: <CAPwOVCFzKJSSJmmzZLRyn5CGcFkU0_EEQwyqmo1rW9uzJuEqeg@mail.gmail.com>
References: <1352823240739-5016021.post@n6.nabble.com>
	<1e6adc767b66d7d33f2bcf7320f08ec2@enoreth.net>
	<CAPwOVCFzKJSSJmmzZLRyn5CGcFkU0_EEQwyqmo1rW9uzJuEqeg@mail.gmail.com>
Message-ID: <CAPwOVCG5nOnNMXuAqmJXcFLintrknqzmTBvp8ZygwcWU0jesXw@mail.gmail.com>

Sorry for the mess...
I made an error because I thought that tiffs were RGB black and white but
they are sigle band 1 bit images

I tried to use nodata values during vrt generation like this

gdalbuildvrt -hidenodata -vrtnodata "0" test.vrt *.tif


Then mosaic tiffs with
gdal_translate -of Gtiff -co SPARSE_OK=TRUE -a_nodata 0 -co NBITS=1 -co
"TILED=YES" -co "COMPRESS=CCITTFAX4" -co "INTERLEAVE=BAND" -co "TFW=YES"
"test.vrt" "test.tif"

Null overlapping areas still present in the output..

Where is my mistake?

Here is the gdalinfo for a tiff
*********************************************
Driver: GTiff/GeoTIFF
Files: 018131.tif
       018131.tfw
       018131.aux
Size is 7400, 6491
Coordinate System is `'
Origin = (2344486.561459757400000,5168752.558307543400000)
Pixel Size = (0.442006745841354,-0.442006746307015)
Metadata:
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=57
  TIFFTAG_YRESOLUTION=57
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
  INTERLEAVE=BAND
  MINISWHITE=YES
Corner Coordinates:
Upper Left  ( 2344486.561, 5168752.558)
Lower Left  ( 2344486.561, 5165883.493)
Upper Right ( 2347757.411, 5168752.558)
Lower Right ( 2347757.411, 5165883.493)
Center      ( 2346121.986, 5167318.025)
Band 1 Block=7400x1 Type=Byte, ColorInterp=Palette
  Description = Band_1
  Metadata:
    LAYER_TYPE=athematic
  Image Structure Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255
*********************************************


2012/11/14 Pietro Rossin <pierigis at gmail.com>

> Ok
> I made a test VRT and I applied your gdal_translate command.
> It work and the result is a tiff with a weight of about the sum of the two
> test mosaiced tiffs.
> But as you can see in this image
>
> http://www.flickr.com/photos/90029615 at N05/8184720800/
>
> the two tiffs have a white orizzontal stripe that separate them.
> This is because each tif to be mosaiced have a white frame and every frame
> overlap to "data" areas of adiacent images.
>
> If I eliminate the 255 value from original tiffs the result is like this
> http://www.flickr.com/photos/90029615 at N05/8184744636/
>
> I tried using -a_nodata 255 in gdal_translate command but the result is
> the same white separation..
>
> How can I set 255 values to nodata before mosaic each tiff?
>
> Thank you very much for your help!
> Pietro
>
>
> 2012/11/13 MORREALE Jean Roc [via OSGeo.org] <[hidden email]<http://user/SendEmail.jtp?type=node&node=5016218&i=0>
> >
>
>> Hi,
>>
>> You could start by merging all your tiff in a VRT then do
>> gdal_translate -of Gtiff -co SPARSE_OK=TRUE -a_nodata 0 -co NBITS=1 -co
>> "TILED=YES" -co "COMPRESS=CCITTFAX4" -co "INTERLEAVE=BAND" "example.vrt"
>> "example.tif"
>>
>> Le 2012-11-13 17:14, Pietro Rossin a ?crit :
>>
>> > Hello all
>>
>> > I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all
>> > bands
>> > (black/white).
>> > I want to mosaic them in a single image to be used in qgis and other
>> > gis
>> > software.
>> >
>> > Which is the best way to do this? And to compress the resulting
>> > image? May
>> > be Tiff?? Single band??
>> > Another problem is that I must apply a formula to input images to
>> > transform
>> > 255 value to null, because of some white portion of each image that
>> > overlap
>> > to black portion of the adiacent one..
>> >
>> > Thanks
>> > Pietro
>> Le 2012-11-13 17:14, Pietro Rossin a ?crit :
>>
>> > Hello all
>>
>> > I have ~1000 tiff/tfw RGB but with only 0 or 255 color value in all
>> > bands
>> > (black/white).
>> > I want to mosaic them in a single image to be used in qgis and other
>> > gis
>> > software.
>> >
>> > Which is the best way to do this? And to compress the resulting
>> > image? May
>> > be Tiff?? Single band??
>> > Another problem is that I must apply a formula to input images to
>> > transform
>> > 255 value to null, because of some white portion of each image that
>> > overlap
>> > to black portion of the adiacent one..
>> >
>> > Thanks
>> > Pietro
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email] <http://user/SendEmail.jtp?type=node&node=5016032&i=0>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>> ------------------------------
>>  If you reply to this email, your message will be added to the
>> discussion below:
>>
>> http://osgeo-org.1560.n6.nabble.com/Best-way-to-mosaic-and-compress-lots-of-tiff-Black-white-tp5016021p5016032.html
>>  To unsubscribe from Best way to mosaic and compress lots of tiff
>> Black/white?, click here.
>> NAML<http://osgeo-org.1560.n6.nabble.com/template/NamlServlet.jtp?macro=macro_viewer&id=instant_html%21nabble%3Aemail.naml&base=nabble.naml.namespaces.BasicNamespace-nabble.view.web.template.NabbleNamespace-nabble.view.web.template.NodeNamespace&breadcrumbs=notify_subscribers%21nabble%3Aemail.naml-instant_emails%21nabble%3Aemail.naml-send_instant_email%21nabble%3Aemail.naml>
>>
>
>
> ------------------------------
> View this message in context: Re: Best way to mosaic and compress lots of
> tiff Black/white?<http://osgeo-org.1560.n6.nabble.com/Best-way-to-mosaic-and-compress-lots-of-tiff-Black-white-tp5016021p5016218.html>
>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1560.n6.nabble.com/GDAL-Dev-f3742093.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121114/c8a12711/attachment-0001.html>

From Tom_Roche at pobox.com  Wed Nov 14 08:03:36 2012
From: Tom_Roche at pobox.com (Tom Roche)
Date: Wed, 14 Nov 2012 11:03:36 -0500
Subject: [gdal-dev] "reboxing," or 3D regridding
In-Reply-To: <CALQGVr3y2AQSkC9dBeHiDpymhc1VZ4uGGWwbFHGoeqLRv_t0PQ@mail.gmail.com>
References: <CALQGVr3y2AQSkC9dBeHiDpymhc1VZ4uGGWwbFHGoeqLRv_t0PQ@mail.gmail.com>
	<87zk2kkbty.fsf@pobox.com>
Message-ID: <87txssjhnr.fsf@pobox.com>


What would be the appropriate list, forum, or other channel to ask
detailed questions about GRASS::raster3D? Why I ask:

Tom Roche Wed, Nov 14, 2012 at 12:11 AM
>> I'd appreciate advice regarding tools and methods for
>> transforming values from an unprojected global 3D spatial grid to a
>> projected 3D grid with different horizontal and vertical resolution,
>> or pointers to other resources to consult.

Newcomb, Doug  Wed, 14 Nov 2012 07:47:20 -0500
> Would the GRASS 3D Raster (Voxel) functions meet your needs?

> http://grass.osgeo.org/grass64/manuals/html64_user/raster3D.html

Nothing there is leaping out saying "solution!", but

* it took me awhile to figure out raster::projectRaster (a regridding
  solution in R, but only for 2D) before producing

https://github.com/TomRoche/GEIA_to_netCDF/

* I know just enough about GRASS (mostly through working with R API,
  also from Scott Mabry's intro) to know "when in doubt, call mapcalc."

* I don't know enough about the OSGeo community.

So I'm thinking I should ask detailed questions to "the GRASS gurus."
Is this the list for that, or should I go elsewhere?

your assistance is appreciated, Tom Roche <Tom_Roche at pobox.com>

From doug_newcomb at fws.gov  Wed Nov 14 08:02:06 2012
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Wed, 14 Nov 2012 11:02:06 -0500
Subject: [gdal-dev] "reboxing," or 3D regridding
In-Reply-To: <87txssjhnr.fsf@pobox.com>
References: <87zk2kkbty.fsf@pobox.com>
	<CALQGVr3y2AQSkC9dBeHiDpymhc1VZ4uGGWwbFHGoeqLRv_t0PQ@mail.gmail.com>
	<87txssjhnr.fsf@pobox.com>
Message-ID: <CALQGVr2F+6wAXBoO59R6m4sbPtsXg1_MyfqA8CA=0sC-jpGs=w@mail.gmail.com>

Tom,
I would suggest starting with the grass-user list
http://lists.osgeo.org/mailman/listinfo/grass-user

Doug

On Wed, Nov 14, 2012 at 11:03 AM, Tom Roche <Tom_Roche at pobox.com> wrote:

>
> What would be the appropriate list, forum, or other channel to ask
> detailed questions about GRASS::raster3D? Why I ask:
>
> Tom Roche Wed, Nov 14, 2012 at 12:11 AM
> >> I'd appreciate advice regarding tools and methods for
> >> transforming values from an unprojected global 3D spatial grid to a
> >> projected 3D grid with different horizontal and vertical resolution,
> >> or pointers to other resources to consult.
>
> Newcomb, Doug  Wed, 14 Nov 2012 07:47:20 -0500
> > Would the GRASS 3D Raster (Voxel) functions meet your needs?
>
> > http://grass.osgeo.org/grass64/manuals/html64_user/raster3D.html
>
> Nothing there is leaping out saying "solution!", but
>
> * it took me awhile to figure out raster::projectRaster (a regridding
>   solution in R, but only for 2D) before producing
>
> https://github.com/TomRoche/GEIA_to_netCDF/
>
> * I know just enough about GRASS (mostly through working with R API,
>   also from Scott Mabry's intro) to know "when in doubt, call mapcalc."
>
> * I don't know enough about the OSGeo community.
>
> So I'm thinking I should ask detailed questions to "the GRASS gurus."
> Is this the list for that, or should I go elsewhere?
>
> your assistance is appreciated, Tom Roche <Tom_Roche at pobox.com>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121114/cd189db9/attachment.html>

From basille at ase-research.org  Wed Nov 14 12:46:03 2012
From: basille at ase-research.org (Mathieu Basille)
Date: Wed, 14 Nov 2012 15:46:03 -0500
Subject: [gdal-dev] gdalinfo on PostGIS rasters (GDAL 1.9)
In-Reply-To: <201211081952.40951.even.rouault@mines-paris.org>
References: <509AE102.8050206@ase-research.org>
	<201211080003.14203.even.rouault@mines-paris.org>
	<509BBA34.5050800@ase-research.org>
	<201211081952.40951.even.rouault@mines-paris.org>
Message-ID: <50A4030B.90605@ase-research.org>

Dear Even,

This works now perfectly!

I didn't have time to install GDAL trunk until now. The installation went 
almost smoothly (see below if it is any useful). If I run the exact same 
gdalinfo command as before , I now have relevant information:

$ gdalinfo "PG:dbname=mydb host=localhost user=pguser schema=myschema 
table=myraster"
Driver: PostGISRaster/PostGIS Raster driver
Files: none associated
Size is 12, 11
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4326"]]
Origin = (-81.971000000000004,26.337499999999999)
Pixel Size = (0.167000000000000,-0.167000000000000)
Corner Coordinates:
Upper Left  ( -81.9710000,  26.3375000) ( 81d58'15.60"W, 26d20'15.00"N)
Lower Left  ( -81.9710000,  24.5005000) ( 81d58'15.60"W, 24d30' 1.80"N)
Upper Right ( -79.9670000,  26.3375000) ( 79d58' 1.20"W, 26d20'15.00"N)
Lower Right ( -79.9670000,  24.5005000) ( 79d58' 1.20"W, 24d30' 1.80"N)
Center      ( -80.9690000,  25.4190000) ( 80d58' 8.40"W, 25d25' 8.40"N)
Band 1 Block=12x11 Type=Float32, ColorInterp=Undefined
   NoData Value=0
   Overviews: arbitrary

This is perfect! Thanks a lot.
Mathieu.


=====================================================================
   Installation procedure of GDAL trunk under Debian Wheezy
=====================================================================

# aptitude install libpoppler-dev libproj-dev libpq-dev python-dev
# cd /usr/src
# svn checkout https://svn.osgeo.org/gdal/trunk/gdal gdal
# cd gdal
# ./configure --with-poppler --with-geos --with-python --with-odbc --with-pg
# make
# make install
# exit


Le 08/11/2012 13:52, Even Rouault a ?crit :
>> Even, that's what I was afraid of... I think I will give it a try. Is there
>> a preferred solution between sources from Subversion and the nightly
>> snapshots?
>
> up to you
>
>> Second, do I understand it correctly that I need to 1) install GDAL from
>> sources,
>
> yes
>
>> and 2) recompile PostGIS on this GDAL version?
>
> not necessarily. The raster module of PostGIS doesn't use the GDAL
> PostGISRaster driver (AFAIK)
>
>> Third, can GDAL trunk live together with my current version of GDAL?
>
> Yes, you have to ./configure --prefix=/some/path and then by adjusting the PATH
> and LD_LIBRARY_PATH environmenet variables, you can run your custom build of
> GDAL.

-- 

~$ whoami
Mathieu Basille, PhD

~$ locate --details
University of Florida \\
Fort Lauderdale Research and Education Center
(+1) 954-577-6314
http://ase-research.org/basille

~$ fortune
? Le tout est de tout dire, et je manque de mots
Et je manque de temps, et je manque d'audace. ?
  -- Paul ?luard

From chris.barker at noaa.gov  Wed Nov 14 15:10:14 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Wed, 14 Nov 2012 15:10:14 -0800
Subject: [gdal-dev] "reboxing," or 3D regridding
In-Reply-To: <87zk2kkbty.fsf@pobox.com>
References: <87zk2kkbty.fsf@pobox.com>
Message-ID: <CALGmxE+5tvBd=gvpcau8uBJGguBrB1cVA7QeBrb1+KLB1xRpOQ@mail.gmail.com>

Tom,

I'd look for re-gridding code designed for modeling -- in particular
ESMF has a bunch of good stuff, designed specifically for this sort of
thing:

http://www.earthsystemmodeling.org/

They even have python bindings to at lest some of the re-gridding code.

-Chris



On Tue, Nov 13, 2012 at 9:11 PM, Tom Roche <Tom_Roche at pobox.com> wrote:
>
> summary: I'd appreciate advice regarding tools and methods for
> transforming values from an unprojected global 3D spatial grid to a
> projected 3D grid with different horizontal and vertical resolution, or
> pointers to other resources to consult.
>
> details:
>
> I have output from a global atmospheric model that I'd like to use as
> initial and boundary conditions for a regional model. The global input
> netCDF has dimensions=2.5? lon x 1.875? lat x 56 vertical levels. The
> regional model runs over North America using a 12-km grid projected
> Lambert Comformal Conic (LCC), with 34 vertical levels. Since its top
> height is less than that of the global input, the extents of the output
> domain are fully contained within the input domain.
>
> Each box or voxel defined by the global input grid contains an estimate
> for the N2O concentration for that volume. From those I want to compute
> the concentrations for each output gridbox volume. I'd appreciate your
> recommendations for tools that can handle this usecase. Particularly, is
> this something that gdalwarp can do?
>
> FWIW, the best tool I've seen so far is R package=gstat, but (IIUC)
>
> - gstat expects projected input. I'm not sure if I can work around that
>   for this usecase.
>
> - as the name implies, 'gstat' is doing geostatistics, e.g., variogram-
>   and covariance-based modeling. I'm not sure either how to setup the
>   distance weighting for my scenario, and, frankly, I remain unconvinced
>   that a statistical approach is necessary for this application (though
>   it may be a sufficient or the best-available approach). This may be
>   due to my statistical ignorance, however.
>
> your assistance is appreciated, Tom Roche <Tom_Roche at pobox.com>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov

From chris.barker at noaa.gov  Wed Nov 14 15:16:39 2012
From: chris.barker at noaa.gov (Chris Barker)
Date: Wed, 14 Nov 2012 15:16:39 -0800
Subject: [gdal-dev] Problem with gdalsrsinfo on some NOAA bsb/kap files
In-Reply-To: <CALGmxEKi=E=_1oz7TtpGEm-zxZdE3iCGHWXm7uMMcuXNG7u18Q@mail.gmail.com>
References: <509D638C.7050702@gmail.com>
	<201211092129.15690.even.rouault@mines-paris.org>
	<509D82AB.8000408@gmail.com>
	<201211092348.22209.even.rouault@mines-paris.org>
	<CALGmxE+hp=HOGAHRARu7pGW2VnBchCr_je6VTWNoVusQUtYVrw@mail.gmail.com>
	<CAFqye3Ky4Gi=T1m0ZQYzGMpOngJdp4NeYmKMP6v=csvr-fwyAQ@mail.gmail.com>
	<CALGmxEKi=E=_1oz7TtpGEm-zxZdE3iCGHWXm7uMMcuXNG7u18Q@mail.gmail.com>
Message-ID: <CALGmxEKvmAvvJNT79SUvbY-R35m--MVK9QsDDAQJ4LMeE6LXbg@mail.gmail.com>

On Wed, Nov 14, 2012 at 3:15 PM, Chris Barker <chris.barker at noaa.gov> wrote:
> On Wed, Nov 14, 2012 at 4:53 AM, Jaak Laineste (Nutiteq)
> <jaak at nutiteq.com> wrote:
>
>>  Have you found workaround for this?
>
> nope.
>
>> I just created index bounding boxes for
>> all the NOAA BSB charts using GDAL
>
> Exacltly how did you use GDAL for this?
>
>>for my Android solution, see
>> http://imgur.com/MpADB - as you can see there are quite many wrong
>> locations, Xmin-coordinate is 0.
>
> you mean the huge pile of boxes on the prime meridian?
>
>> In the same time, Y and Xmax seems to be
>> correct,
>
> you sure about Xmax -- if that were the case, you'd have a lot of
> charts in Europe... though maybe I don't know what i"m looking at.
>
>> which is interesting also. I do not have the number, but there
>> seems to be significant number (1/4?) of the NOAA files positioned wrong.
>
> you might look at a few and see if you can see a pattern.
>
> GDAL asside, there is a lot of info in the *.kap text header -- I
> think the first few GRPs are the bounds of the "actual" map (i.e.
> without the "collar) for instance. You may be abel to get what youwant
> by directly parsing teh header.
>
> Not that GDAL shouldn't report the correct values.
>
> -Chris
>
> --
>
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker at noaa.gov



-- 

Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker at noaa.gov

From turgay.osna at netcad.com.tr  Wed Nov 14 23:20:35 2012
From: turgay.osna at netcad.com.tr (netcadturgay)
Date: Wed, 14 Nov 2012 23:20:35 -0800 (PST)
Subject: [gdal-dev] Gdal - read starting left-bottom
Message-ID: <1352964035922-5016496.post@n6.nabble.com>

my program reads a tif file starting left-top point. But I want to read
starting left-bottom(LowerLeft). How can I solve this problem? 

Example:
band.ReadRaster(0, 0, 500, 500, pixels, 500, 500, 0, 0);



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Gdal-read-starting-left-bottom-tp5016496.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From Robert.Langford at salford.gov.uk  Thu Nov 15 00:15:31 2012
From: Robert.Langford at salford.gov.uk (Langford, Robert)
Date: Thu, 15 Nov 2012 08:15:31 +0000
Subject: [gdal-dev] Convert non-spatial Oracle table to spatial Oracle table
 in a different database
Message-ID: <06023D9EFD334D4895B922C891C3767F1CB5FF264C@v-civiexms04.salford.gov.uk>

All,

I'm trying to use ogr2ogr to convert data from a non-spatial table (has X & Y values) in an Oracle database (1) to a spatial format in a different Oracle database (2). This will be scheduled to run daily to overwrite the table in Oracle database (2) each time.

I have it working using a ogr2ogr's Virtual File Format, with the file Oracle.vrt which is like:

	<OGRVRTDataSource>
	  <OGRVRTLayer name="TEST_X_Y">
		<SrcDataSource>OCI:userid_1/password_1 at database_instance_1:TEST_X_Y</SrcDataSource>
		<SrcLayer>TEST_X_Y</SrcLayer>
		<GeometryType>wkbPoint</GeometryType>
		<LayerSRS>EPSG:27700</LayerSRS>
		<GeometryField encoding="PointFromColumns" x="X_TEXT" y="Y_TEXT"/>
	  </OGRVRTLayer>
	</OGRVRTDataSource>

Then using the following ogr2ogr command:

	ogr2ogr -update -overwrite -f OCI OCI:userid_2/password_2 at database_instance_2:TEST_OGR_IN Oracle.vrt TEST_X_Y -lco OVERWRITE=YES -lco SRID=27700 -nln TEST_OGR_IN

Now this works and creates the spatial table in the Oracle database (2) fine, but when I run the ogr2ogr command a second time I get an error like:

	ERROR 1: ORA-00001: unique constraint (MDSYS.UNIQUE_LAYERS) violated
	ORA-06512: at "MDSYS.SDO_GEOM_TRIG_INS1", line 43
	ORA-04088: error during execution of trigger 'MDSYS.SDO_GEOM_TRIG_INS1' in
	  INSERT INTO USER_SDO_GEOM_METADATA VALUES ('TEST_X_Y',
	...

The table (TEST_OGR_IN) still gets overwritten/updated in the Oracle database (2) but the problem appears to be that ogr2ogr has inserted values into the USER_SDO_GEOM_METADATA table on the Oracle database (1) for the non-spatial table (TEST_X_Y) and is violating an index/constraint?

Although the process works, I'd like to understand why the error is happening and how I can avoid it. Many thanks for any assistance offered.

Regards,

Rob=
DISCLAIMER: The information in this message is confidential and may be legally privileged. It is intended solely for the addressee.

Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act. 
Please immediately contact the sender if you have received this message in error. 

For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.


From jaak at nutiteq.com  Thu Nov 15 09:13:00 2012
From: jaak at nutiteq.com (Jaak Laineste)
Date: Thu, 15 Nov 2012 19:13:00 +0200
Subject: [gdal-dev] Problem with gdalsrsinfo on some NOAA bsb/kap files
In-Reply-To: <CALGmxEKi=E=_1oz7TtpGEm-zxZdE3iCGHWXm7uMMcuXNG7u18Q@mail.gmail.com>
References: <509D638C.7050702@gmail.com>
	<201211092129.15690.even.rouault@mines-paris.org>
	<509D82AB.8000408@gmail.com>
	<201211092348.22209.even.rouault@mines-paris.org>
	<CALGmxE+hp=HOGAHRARu7pGW2VnBchCr_je6VTWNoVusQUtYVrw@mail.gmail.com>
	<CAFqye3Ky4Gi=T1m0ZQYzGMpOngJdp4NeYmKMP6v=csvr-fwyAQ@mail.gmail.com>
	<CALGmxEKi=E=_1oz7TtpGEm-zxZdE3iCGHWXm7uMMcuXNG7u18Q@mail.gmail.com>
Message-ID: <B7DC53CE-E8C8-4B5A-BC38-A47E9790EB33@nutiteq.com>

Hi Chris,

On 15.11.2012, at 1:15, Chris Barker wrote:

>> I just created index bounding boxes for
>> all the NOAA BSB charts using GDAL
> 
> Exacltly how did you use GDAL for this?

I use GDAL as library. So I have a code which scans all the files and requests bounding boxes.

>> for my Android solution, see
>> http://imgur.com/MpADB - as you can see there are quite many wrong
>> locations, Xmin-coordinate is 0.
> 
> you mean the huge pile of boxes on the prime meridian?

Yes, exactly. It is not really 0, but something close it as the x is not adjusted to real central meridian.

>> which is interesting also. I do not have the number, but there
>> seems to be significant number (1/4?) of the NOAA files positioned wrong.
> 
> you might look at a few and see if you can see a pattern.
> 
> GDAL asside, there is a lot of info in the *.kap text header -- I
> think the first few GRPs are the bounds of the "actual" map (i.e.
> without the "collar) for instance. You may be abel to get what youwant
> by directly parsing teh header.
> 
> Not that GDAL shouldn't report the correct values.

Right, the KAP has also metadata. My code is actually public (http://goo.gl/PKkmr - see function corner() ).

I have two files from same chart, which behave differently. They are both rotated, maybe this is important somehow:
gdalinfo 11315_1.KAP -> reports OK
gdalinfo 11315_2.KAP -> reports GCP projection, but not general one. Looking to bsbdataset.cpp code I do not see how this can possibly happen. Probably this is root for next problems. The Y coordinates will be correct, but Y is not adjusted to the prime meridian, as if Yorigin in the transformation matrix would be 0. 

	Coordinate System is `'
	Origin = (0.0,0.0)
	Pixel Size = (1.0,1.0)
	GCP Projection = PROJCS["Global Mercator",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
	...


What is interesting that after I created VRT files for conversion:
gdalwarp -t_srs "EPSG:900913" -of VRT -dstnodata 0 11315_2.KAP 11315_2.vrt

And then query this:
gdalinfo 11315_2.vrt

Then I got correct and functional projection info. VRT files themselves for 11315_1 and 11315_2 are quite different: first one is based on coordinate system and transformation, second one has also copy of all GCP-s. Both files are rotated, the one which works is clockwise (SK=35.7611111), the other is rotated counter-clockwise (SK=294.1922222 in KAP terms).

The first test file KAP is also shown fine in QGIS (and my client), and second KAP is in wrong location. I have not checked QGIS source, but I suspect it uses same approach for reading as my app: creates automatically virtual VRT, so it has same issues with same files. It has also transparency issue : no data is black instead of transparent. When I open VRT file of the problematic data in QGIS, then it is also shown in correct location, so gdalwarp "fixes" it somehow.

So - what gdalwarp could do better than plain gdalinfo and AutoCreateWarpedVRT() ?

Jaak

From nnneogeorge at hotmail.com  Thu Nov 15 09:59:19 2012
From: nnneogeorge at hotmail.com (nnneogeorge)
Date: Thu, 15 Nov 2012 09:59:19 -0800 (PST)
Subject: [gdal-dev] ImportError when importing gdal module with python
 2.7 on Windows 7 64-bit
In-Reply-To: <CAEUMa-eUEnFMB0MfAm2n6tqsCgxoOKYMw5d6fBfTxptB9ka5Jw@mail.gmail.com>
References: <CAEUMa-f=VijVn3WdL3vUfVghJybqowH2nv2J-fSyjTWuKKOAJw@mail.gmail.com>
	<201210032026.26677.even.rouault@mines-paris.org>
	<CAEUMa-eUEnFMB0MfAm2n6tqsCgxoOKYMw5d6fBfTxptB9ka5Jw@mail.gmail.com>
Message-ID: <1353002359300-5016723.post@n6.nabble.com>

Hey guys, 

I am using the python 2.7.3 64b, with the GDAL 64b (tried both 19 & 20
versions) under windows 7 64b, I have followed all the steps here

http://www.gis.usu.edu/~chrisg/python/2009/docs/gdal_win.pdf

and here

http://pythongisandstuff.wordpress.com/2011/07/07/installing-gdal-and-ogr-for-python-on-windows/

took the software from here 

http://www.lfd.uci.edu/~gohlke/pythonlibs/
http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1400-x64-gdal-mapserver.zip 

And experimented with all the possible folder paths, added in the
Environmental Variable... the modules osGEo and gdal are both in the list of
python (I can check through > help ("modules") , but when I ask for more
information on these, it throws the following error 

######
problem in osgeo - <type 'exceptions.ImportError'>: DLL load failed: The
specified module could not be found.
######



ofcourse the same goes when I try to import gdal ,I m getting the following
message: 

####
Traceback (most recent call last):
File "<pyshell#0>", line 1, in <module>
import gdal
File "C:\Python27\lib\gdal.py", line 2, in <module>
from osgeo.gdal import deprecation_warn
File "C:\Python27\lib\osgeo\__init__.py", line 21, in <module>
_gdal = swig_import_helper()
File "C:\Python27\lib\osgeo\__init__.py", line 17, in swig_import_helper
_mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: DLL load failed: The specified module could not be found.
####

Which I guess should understand that the dll that supposed to be created,
well hasnt... 

Checked manually and yeap its true, couldnt find it - 

Then I tried to check if the path was right for sure, so opening the windows
console and typing "set" gave me the list with the path variables --> all
right. 

Also the osgeo command-line works perfectly fine. 

Any ideas or things to try more than welcome... 

Thanks a lot, 

George. 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-ImportError-when-importing-gdal-module-with-python-2-7-on-Windows-7-64-bit-tp5006198p5016723.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From CABO at NIRAS.DK  Thu Nov 15 10:16:32 2012
From: CABO at NIRAS.DK (=?iso-8859-1?Q?Casper_B=F8rgesen_=28CABO=29?=)
Date: Thu, 15 Nov 2012 18:16:32 +0000
Subject: [gdal-dev] ImportError when importing gdal module with python
 2.7 on Windows 7 64-bit
In-Reply-To: <1353002359300-5016723.post@n6.nabble.com>
References: <CAEUMa-f=VijVn3WdL3vUfVghJybqowH2nv2J-fSyjTWuKKOAJw@mail.gmail.com>
	<201210032026.26677.even.rouault@mines-paris.org>
	<CAEUMa-eUEnFMB0MfAm2n6tqsCgxoOKYMw5d6fBfTxptB9ka5Jw@mail.gmail.com>
	<1353002359300-5016723.post@n6.nabble.com>
Message-ID: <BCF6B63AE0B25941A7F56567B58A28053510931C@allkexa1.NIRAS.INT>

I usually struggle with the same problems over and over again. Try using Dependency Walker (http://www.dependencywalker.com/) to see if you are missing a library or two. I used it to determine that I was missing these two files: 

    msvcp100.dll
    msvcr100.dll

I remember something about Microsoft removing these during some updates. They might be needed in your path.

I don't know if that helps :)

Regards, Casper

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of nnneogeorge
Sent: 15. november 2012 18:59
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] ImportError when importing gdal module with python 2.7 on Windows 7 64-bit

Hey guys, 

I am using the python 2.7.3 64b, with the GDAL 64b (tried both 19 & 20
versions) under windows 7 64b, I have followed all the steps here

http://www.gis.usu.edu/~chrisg/python/2009/docs/gdal_win.pdf

and here

http://pythongisandstuff.wordpress.com/2011/07/07/installing-gdal-and-ogr-for-python-on-windows/

took the software from here 

http://www.lfd.uci.edu/~gohlke/pythonlibs/
http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1400-x64-gdal-mapserver.zip 

And experimented with all the possible folder paths, added in the Environmental Variable... the modules osGEo and gdal are both in the list of python (I can check through > help ("modules") , but when I ask for more information on these, it throws the following error 

######
problem in osgeo - <type 'exceptions.ImportError'>: DLL load failed: The specified module could not be found.
######



ofcourse the same goes when I try to import gdal ,I m getting the following
message: 

####
Traceback (most recent call last):
File "<pyshell#0>", line 1, in <module>
import gdal
File "C:\Python27\lib\gdal.py", line 2, in <module> from osgeo.gdal import deprecation_warn File "C:\Python27\lib\osgeo\__init__.py", line 21, in <module> _gdal = swig_import_helper() File "C:\Python27\lib\osgeo\__init__.py", line 17, in swig_import_helper _mod = imp.load_module('_gdal', fp, pathname, description)
ImportError: DLL load failed: The specified module could not be found.
####

Which I guess should understand that the dll that supposed to be created, well hasnt... 

Checked manually and yeap its true, couldnt find it - 

Then I tried to check if the path was right for sure, so opening the windows console and typing "set" gave me the list with the path variables --> all right. 

Also the osgeo command-line works perfectly fine. 

Any ideas or things to try more than welcome... 

Thanks a lot, 

George. 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-ImportError-when-importing-gdal-module-with-python-2-7-on-Windows-7-64-bit-tp5006198p5016723.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jluis at ualg.pt  Thu Nov 15 10:21:33 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 15 Nov 2012 18:21:33 +0000
Subject: [gdal-dev] ImportError when importing gdal module with python
 2.7 on Windows 7 64-bit
In-Reply-To: <BCF6B63AE0B25941A7F56567B58A28053510931C@allkexa1.NIRAS.INT>
References: <CAEUMa-f=VijVn3WdL3vUfVghJybqowH2nv2J-fSyjTWuKKOAJw@mail.gmail.com>
	<201210032026.26677.even.rouault@mines-paris.org>
	<CAEUMa-eUEnFMB0MfAm2n6tqsCgxoOKYMw5d6fBfTxptB9ka5Jw@mail.gmail.com>
	<1353002359300-5016723.post@n6.nabble.com>
	<BCF6B63AE0B25941A7F56567B58A28053510931C@allkexa1.NIRAS.INT>
Message-ID: <50A532AD.7050206@ualg.pt>

I am also (moderately) interested in this.
 From what I remember, Even once explained us that the problem is that 
official Python binaries are built with VS2008 (or 9) and the GDAL from 
Tamas is from VS2010 and so the dlls are incompatible. However, I did a 
home built of Python with VS2010 and still got problems of this kind 
(not sure of the details anymore).

Joaquim

> I usually struggle with the same problems over and over again. Try using Dependency Walker (http://www.dependencywalker.com/) to see if you are missing a library or two. I used it to determine that I was missing these two files:
>
>      msvcp100.dll
>      msvcr100.dll
>
> I remember something about Microsoft removing these during some updates. They might be needed in your path.
>
> I don't know if that helps :)
>
> Regards, Casper
>
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of nnneogeorge
> Sent: 15. november 2012 18:59
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] ImportError when importing gdal module with python 2.7 on Windows 7 64-bit
>
> Hey guys,
>
> I am using the python 2.7.3 64b, with the GDAL 64b (tried both 19&  20
> versions) under windows 7 64b, I have followed all the steps here
>
> http://www.gis.usu.edu/~chrisg/python/2009/docs/gdal_win.pdf
>
> and here
>
> http://pythongisandstuff.wordpress.com/2011/07/07/installing-gdal-and-ogr-for-python-on-windows/
>
> took the software from here
>
> http://www.lfd.uci.edu/~gohlke/pythonlibs/
> http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1400-x64-gdal-mapserver.zip
>
> And experimented with all the possible folder paths, added in the Environmental Variable... the modules osGEo and gdal are both in the list of python (I can check through>  help ("modules") , but when I ask for more information on these, it throws the following error
>
> ######
> problem in osgeo -<type 'exceptions.ImportError'>: DLL load failed: The specified module could not be found.
> ######
>
>
>
> ofcourse the same goes when I try to import gdal ,I m getting the following
> message:
>
> ####
> Traceback (most recent call last):
> File "<pyshell#0>", line 1, in<module>
> import gdal
> File "C:\Python27\lib\gdal.py", line 2, in<module>  from osgeo.gdal import deprecation_warn File "C:\Python27\lib\osgeo\__init__.py", line 21, in<module>  _gdal = swig_import_helper() File "C:\Python27\lib\osgeo\__init__.py", line 17, in swig_import_helper _mod = imp.load_module('_gdal', fp, pathname, description)
> ImportError: DLL load failed: The specified module could not be found.
> ####
>
> Which I guess should understand that the dll that supposed to be created, well hasnt...
>
> Checked manually and yeap its true, couldnt find it -
>
> Then I tried to check if the path was right for sure, so opening the windows console and typing "set" gave me the list with the path variables -->  all right.
>
> Also the osgeo command-line works perfectly fine.
>
> Any ideas or things to try more than welcome...
>
> Thanks a lot,
>
> George.
>
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-ImportError-when-importing-gdal-module-with-python-2-7-on-Windows-7-64-bit-tp5006198p5016723.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


From thomaschristian at gmail.com  Thu Nov 15 17:14:31 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Thu, 15 Nov 2012 17:14:31 -0800 (PST)
Subject: [gdal-dev] Problem compiling gdal with OCI support,
 configure doesn't seem to know where to look
Message-ID: <1353028471893-5016804.post@n6.nabble.com>

First of all sorry for posing a question that has been asked a thousand times
before. I did a lot of research but didn't find this specific problem.

I have Linux Mint (Ubuntu) with Oracle instant client basic and SDK (11.2)
installed from .deb (via Alien). $ORACLE_HOME is set
(/usr/lib/oracle/11.2/client) and contains bin, lib, and a symlink to
include (/usr/include/oracle/11.2/client). I'm not a total linux n00b but I
don't usually compile anything from source.

I installed the Oracle software using the instructions  here
<https://help.ubuntu.com/community/Oracle%20Instant%20Client>  

Running 'locate oci.h' shows 

/home/tom/Downloads/gdal/gdal-1.9.2/ogr/ogrsf_frmts/oci/drv_oci.html
/home/tom/Downloads/gdal/gdal-1.9.2/ogr/ogrsf_frmts/oci/ogr_oci.h
/usr/include/oracle/11.2/client/oci.h

As you can see I'm trying to compile 1.9.2 Stable.

No matter what I pass with the ./configure command, config.log always
reports
"configure:22485: checking for Oracle OCI headers in " - with nothing after
"in" - as if it doesn't know where the header is supposed to be, and then
"conftest.cpp:64:29: fatal error: oci.h: No such file or directory"

These are the arguments I've tried

./configure --with-oci
./configure --with-oci-include='/usr/include/oracle/11.2/client'
./configure --with-oci=/usr/lib/oracle/11.2/client/include
./configure --with-oci=$ORACLE_HOME

I even tried copying the contents of /usr/lib/oracle/11.2/client/include to
the gdal source directory, but I'm not sure what I thought this would
accomplish.

Can anyone suggest where I could go next? Any thoughts much appreciated.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problem-compiling-gdal-with-OCI-support-configure-doesn-t-seem-to-know-where-to-look-tp5016804.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gdal at stripfamily.net  Thu Nov 15 18:54:37 2012
From: gdal at stripfamily.net (David Strip)
Date: Thu, 15 Nov 2012 19:54:37 -0700
Subject: [gdal-dev] Gdal - read starting left-bottom
In-Reply-To: <1352964035922-5016496.post@n6.nabble.com>
References: <1352964035922-5016496.post@n6.nabble.com>
Message-ID: <50A5AAED.50104@stripfamily.net>

On 11/15/2012 12:20 AM, netcadturgay wrote:
> my program reads a tif file starting left-top point. But I want to read
> starting left-bottom(LowerLeft). How can I solve this problem?
>
> Example:
> band.ReadRaster(0, 0, 500, 500, pixels, 500, 500, 0, 0);

You will have to read one line at a time into the i_th row of the array. 
This looks like the Java interface. I'm not really familiar with java, 
but taking a stab
int [] [] pixels   = new int [500][500]
for (i = 0; i < 500; i = i + 1)
     band.readRaster(0,i, 500, 1,  pixels[500-i])

Of course, this begs the question of why you want to do this is the 
first place?


From kassies at gmail.com  Fri Nov 16 02:42:08 2012
From: kassies at gmail.com (Rutger)
Date: Fri, 16 Nov 2012 02:42:08 -0800 (PST)
Subject: [gdal-dev] ImportError when importing gdal module with python
 2.7 on Windows 7 64-bit
In-Reply-To: <50A532AD.7050206@ualg.pt>
References: <CAEUMa-f=VijVn3WdL3vUfVghJybqowH2nv2J-fSyjTWuKKOAJw@mail.gmail.com>
	<201210032026.26677.even.rouault@mines-paris.org>
	<CAEUMa-eUEnFMB0MfAm2n6tqsCgxoOKYMw5d6fBfTxptB9ka5Jw@mail.gmail.com>
	<1353002359300-5016723.post@n6.nabble.com>
	<BCF6B63AE0B25941A7F56567B58A28053510931C@allkexa1.NIRAS.INT>
	<50A532AD.7050206@ualg.pt>
Message-ID: <1353062528556-5016897.post@n6.nabble.com>

Hey,

I have similar problems as well. In the past i always used the windows
builds from Tamas, they have always worked very well for me on 32bit and
64bit (Win XP) with the exception that i never could access the HDF and
NetCDF driver from within Python (i could using the .exe cmd tools). 

This made me switch to the Windows build from Christoph Gohlke (awesome site
for Win users! big thx!). His GDAL build works for me on Windows 32bit, but
using Dependancy Walker i see that the msvc*90.dll's it uses are from a
"h4toh5 convert" tool from the HDF group. 

On 64bit i also get the DLL not found error for Gohlke's build. Dependancy
Walker mentions the MSVCP90.dll and MSVCR90.dll as missing. I installed all
MS redist packages mentioned at Gohlke's website, but this doesnt make any
difference. I can find alot of version of the DLL's in my WinSxS folder in
the Windows directory. Copying some of these to the osgeo folder resolves
Dependency Walker's warnings, but doesnt resolve the import error from GDAL
(maybe it needs a specific version, but which?).



Regards,
Rutger




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-ImportError-when-importing-gdal-module-with-python-2-7-on-Windows-7-64-bit-tp5006198p5016897.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nnneogeorge at hotmail.com  Fri Nov 16 03:29:38 2012
From: nnneogeorge at hotmail.com (nnneogeorge)
Date: Fri, 16 Nov 2012 03:29:38 -0800 (PST)
Subject: [gdal-dev] ImportError when importing gdal module with python
 2.7 on Windows 7 64-bit
In-Reply-To: <BCF6B63AE0B25941A7F56567B58A28053510931C@allkexa1.NIRAS.INT>
References: <CAEUMa-f=VijVn3WdL3vUfVghJybqowH2nv2J-fSyjTWuKKOAJw@mail.gmail.com>
	<201210032026.26677.even.rouault@mines-paris.org>
	<CAEUMa-eUEnFMB0MfAm2n6tqsCgxoOKYMw5d6fBfTxptB9ka5Jw@mail.gmail.com>
	<1353002359300-5016723.post@n6.nabble.com>
	<BCF6B63AE0B25941A7F56567B58A28053510931C@allkexa1.NIRAS.INT>
Message-ID: <1353065378540-5016909.post@n6.nabble.com>

Hi there, 

Thanks for the responses so far - 

Here it is , 

tried the Dependency Walker, it seems that there is indeed some dll missing
, namely "msvcr80.dll" & "ieshims.dll". 

<http://osgeo-org.1560.n6.nabble.com/file/n5016909/missing-dll.png> 

I did insert them in the System32 folder - but ..yeah - no luck so far. 

<http://osgeo-org.1560.n6.nabble.com/file/n5016909/error_after_dll.png> 

Cheers, 

george




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-ImportError-when-importing-gdal-module-with-python-2-7-on-Windows-7-64-bit-tp5006198p5016909.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ckling at upcmail.nl  Fri Nov 16 04:03:47 2012
From: ckling at upcmail.nl (Kees Kling)
Date: Fri, 16 Nov 2012 13:03:47 +0100
Subject: [gdal-dev] convert one band data in rgba
Message-ID: <50A62BA3.9080200@upcmail.nl>

Hi,

I want to convert an indexed image to  a rgba color image with help of a 
colortable

so I created a GDALDataset

drv = (GDALDriver *) GDALGetDriverByName("MEM");
if (!drv) {
      throw "Unable to register GDAL Memory Driver";
}
GDALDataset* tmpdata = 
drv->Create("rawRadar",mysqlData.columns,mysqlData.rows,1,GDT_Byte,NULL);

// Added the colortable
CPLErr err = tmpdata->GetRasterBand(1)->SetColorTable(cTable);

// Inserted the data from a byte array
tmpdata->RasterIO(GF_Write,0,0,mysqlData.columns,mysqlData.rows,
             (unsigned char 
*)mysqlData.data.c_str(),mysqlData.columns,mysqlData.rows,
             GDT_Byte,1, NULL, 0, 0,0);

 From here on I'm stuck.
How do I go on to convert this data to a in memory GDALDataset with 4 
channels (R,G,B,A)

Thanks

Kees Kling

From kassies at gmail.com  Fri Nov 16 04:43:51 2012
From: kassies at gmail.com (Rutger)
Date: Fri, 16 Nov 2012 04:43:51 -0800 (PST)
Subject: [gdal-dev] ImportError when importing gdal module with python
 2.7 on Windows 7 64-bit
In-Reply-To: <1353065378540-5016909.post@n6.nabble.com>
References: <CAEUMa-f=VijVn3WdL3vUfVghJybqowH2nv2J-fSyjTWuKKOAJw@mail.gmail.com>
	<201210032026.26677.even.rouault@mines-paris.org>
	<CAEUMa-eUEnFMB0MfAm2n6tqsCgxoOKYMw5d6fBfTxptB9ka5Jw@mail.gmail.com>
	<1353002359300-5016723.post@n6.nabble.com>
	<BCF6B63AE0B25941A7F56567B58A28053510931C@allkexa1.NIRAS.INT>
	<1353065378540-5016909.post@n6.nabble.com>
Message-ID: <1353069831701-5016933.post@n6.nabble.com>

Hi George,

You can also open the _gdal.pyd with Dependency Walker, i think thats the
file which is actually being opened when the traceback is returned. In
addition to gdal.dll it also check for python27.dll and kernel32.dll. 
The ISHIMS.DLL is not a problem for as far as i know.

Normally you should be able to resolve MSVCR80.DLL issues by installing the
appropriate MS Visual C++ Redistributable (if you havent done so already),
the version *80.dll would mean that you need the 2005 version.

Microsoft Visual C++ 2005 Redistributable Package (x86)
http://www.microsoft.com/en-us/download/details.aspx?id=3387

or 

Microsoft Visual C++ 2005 Redistributable Package (x64)
http://www.microsoft.com/en-us/download/details.aspx?id=21254

If im correct:
msvcr80.dll = Microsoft Visual C++ 2005
msvcr90.dll = Microsoft Visual C++ 2008
msvcr100.dll = Microsoft Visual C++ 2010

But installing it didnt resolve the issue for me. If Joaquim is correct,
only compiling Python and GDAL with the same version of the compiler would
help. Can you see which compiler was used, and which one you need? Both my
Python and GDAL dlls seem to point to the same msvc90.dll file. 

If i open my _gdal.pyd in Dependency Walker i see gdal.dll links twice to
exactly the same dll, and Dependency Walker complains in only one occasion.
Its a complete mystery to me....

<http://osgeo-org.1560.n6.nabble.com/file/n5016933/Depency_walker_gdal.png> 


Regards,
Rutger






--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-ImportError-when-importing-gdal-module-with-python-2-7-on-Windows-7-64-bit-tp5006198p5016933.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From silyko at gmail.com  Fri Nov 16 06:14:59 2012
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Fri, 16 Nov 2012 15:14:59 +0100
Subject: [gdal-dev] ImportError when importing gdal module with python
 2.7 on Windows 7 64-bit
In-Reply-To: <1353069831701-5016933.post@n6.nabble.com>
References: <CAEUMa-f=VijVn3WdL3vUfVghJybqowH2nv2J-fSyjTWuKKOAJw@mail.gmail.com>
	<201210032026.26677.even.rouault@mines-paris.org>
	<CAEUMa-eUEnFMB0MfAm2n6tqsCgxoOKYMw5d6fBfTxptB9ka5Jw@mail.gmail.com>
	<1353002359300-5016723.post@n6.nabble.com>
	<BCF6B63AE0B25941A7F56567B58A28053510931C@allkexa1.NIRAS.INT>
	<1353065378540-5016909.post@n6.nabble.com>
	<1353069831701-5016933.post@n6.nabble.com>
Message-ID: <CANzGYpQxPyeikn4uF9uT5B+sf5z3C1eGHbL1oV_6LL3F_5wt5g@mail.gmail.com>

Hi,

  It shouldn't be necessary to have gdal and python compiled with the same
msvc-version, as long as the various needed c-runtime dll's can be found in
the PATH. In my experience problems like you describe (DL'HELL) can be
related to the order in which things appear in the PATH. For example, if
you have a PyQt4 installation (in the PATH), which uses a libmysql.dll and
gdal is also linked against libmysql.dll (in another version), it is really
important which version is found first in PATH. And I guess the same thing
could be the case for other libraries tha gdal uses.
  I can also be tricky if you have multiple python versions (for example a
"usual" installation and one through osgeo4w) and\or multiple versions of
the gdal-python bindings (compiled with different compilers and/or
different versions of python). In that case you need to make sure that
python env variables like PYTHONPATH are set up right.
  So I guess it is really a case of carefully studying output from
dependency-walker. You could also try to cd to the directory where all the
gdal and support library dll's are located and try to import the gdal
python module from there (should be the same as putting that folder first
in PATH).

Best Regards,
Simon


On Fri, Nov 16, 2012 at 1:43 PM, Rutger <kassies at gmail.com> wrote:

> Hi George,
>
> You can also open the _gdal.pyd with Dependency Walker, i think thats the
> file which is actually being opened when the traceback is returned. In
> addition to gdal.dll it also check for python27.dll and kernel32.dll.
> The ISHIMS.DLL is not a problem for as far as i know.
>
> Normally you should be able to resolve MSVCR80.DLL issues by installing the
> appropriate MS Visual C++ Redistributable (if you havent done so already),
> the version *80.dll would mean that you need the 2005 version.
>
> Microsoft Visual C++ 2005 Redistributable Package (x86)
> http://www.microsoft.com/en-us/download/details.aspx?id=3387
>
> or
>
> Microsoft Visual C++ 2005 Redistributable Package (x64)
> http://www.microsoft.com/en-us/download/details.aspx?id=21254
>
> If im correct:
> msvcr80.dll = Microsoft Visual C++ 2005
> msvcr90.dll = Microsoft Visual C++ 2008
> msvcr100.dll = Microsoft Visual C++ 2010
>
> But installing it didnt resolve the issue for me. If Joaquim is correct,
> only compiling Python and GDAL with the same version of the compiler would
> help. Can you see which compiler was used, and which one you need? Both my
> Python and GDAL dlls seem to point to the same msvc90.dll file.
>
> If i open my _gdal.pyd in Dependency Walker i see gdal.dll links twice to
> exactly the same dll, and Dependency Walker complains in only one occasion.
> Its a complete mystery to me....
>
> <http://osgeo-org.1560.n6.nabble.com/file/n5016933/Depency_walker_gdal.png
> >
>
>
> Regards,
> Rutger
>
>
>
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/gdal-dev-ImportError-when-importing-gdal-module-with-python-2-7-on-Windows-7-64-bit-tp5006198p5016933.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121116/07fbdf95/attachment.html>

From even.rouault at mines-paris.org  Fri Nov 16 09:43:36 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 16 Nov 2012 18:43:36 +0100
Subject: [gdal-dev] Motion: Release next major GDAL version as GDAL/OGR
	1.10
In-Reply-To: <201211092110.29701.even.rouault@mines-paris.org>
References: <201211092110.29701.even.rouault@mines-paris.org>
Message-ID: <201211161843.36335.even.rouault@mines-paris.org>

Le vendredi 09 novembre 2012 21:10:29, Even Rouault a ?crit :
> Motion: The next major GDAL version released from trunk will be called
> GDAL/OGR 1.10.
> 

The motion is passed with the following votes :
+1 : EvenR, FrankW, DanielM, TamasS
+0 : HowardB

I'll proceed soon with the changes (version number, doc adjustments)

Even

From Roche.Tom at epamail.epa.gov  Fri Nov 16 11:56:42 2012
From: Roche.Tom at epamail.epa.gov (Tom Roche)
Date: Fri, 16 Nov 2012 14:56:42 -0500
Subject: [gdal-dev] "reboxing," or 3D regridding
In-Reply-To: <CALGmxE+5tvBd=gvpcau8uBJGguBrB1cVA7QeBrb1+KLB1xRpOQ@mail.gmail.com>
References: <CALGmxE+5tvBd=gvpcau8uBJGguBrB1cVA7QeBrb1+KLB1xRpOQ@mail.gmail.com>
	<87zk2kkbty.fsf@pobox.com>
	<B4656A1B-B8DA-4539-9CBA-76BCD21A61A1@noaa.gov>
	<877gpnkdoy.fsf@pobox.com>
Message-ID: <87ip95iao5.fsf@pobox.com>


http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034680.html
>>> I'd appreciate advice regarding tools and methods for transforming
>>> values from an unprojected global 3D spatial grid to a projected 3D
>>> grid with different horizontal and vertical resolution, or pointers
>>> to other resources to consult.

http://lists.osgeo.org/pipermail/gdal-dev/2012-November/034689.html
>> I'd look for re-gridding code designed for modeling -- in particular
>> ESMF has a bunch of good stuff,

Yes! but ...

>> designed specifically for this sort of thing:

... alas, no. I'd post a link to their list, but esmf_support has a
private archive and I have not yet been granted subscriber status.
However my post to that list did receive the following reply:

Subject: [3587543] 3D regridding from spherical coordinates to Cartesian coordinates?
From: Robert Oehmke <robert.oehmke at noaa.gov>
Date: Fri, 16 Nov 2012 10:57:49 -0700
Cc: esmf_support <esmf_support at list.woc.noaa.gov>

> We currently only support regridding between [grids] with the same
> coordinate space (e.g. from Cartesian to Cartesian). If you convert
> [your input grid] to Cartesian then you could use the 3D regridding[;]
> is that a possibility for you?

Any suggestions, regarding how to conservatively "pseudo-project" my
global unprojected input into something Cartesian that I could use as
input to ESMFRegrid, would be appreciated. Details on the problem:

I'm working on N2O for CMAQ (an EPA-supported regional-scale model,
currently used for air quality applications, but growing in scope). This
is to be tested over North America using a domain used for AQMEII, an AQ
model intercomparison project run by US EPA and EU JRC

https://github.com/TomRoche/cornbeltN2O/wiki/AQMEII-North-American-domain#wiki-EPA

Pretty much all my N2O inputs are global, but all my other N2O inputs
are 2D, and numerous 2D APIs exist that for regridding unprojected to
projected. (Hence my puzzlement that this is so much more difficult in
3D, but my spatial consciousness is still immature.) For my boundary/
initial conditions, I'd like to use the output of a 3D spatial (i.e.,
horizontal+vertical, not horizontal+ temporal) global N2O model run by a
collaborator @ MIT CGCS.

I can crop the 3D model to have horizontal extents just larger than
AQMEII-NA (e.g., lon=-130.5? to -59?, lat=23? to 59?); i.e., I can
transform the unprojected global input to a cropped but still
unprojected regional input. But I'm wondering, how to get from the
cropped region to something that I could use as a Cartesian input to
ESMFRegrid? Apologies if the answer to this question is obvious; I'm a
masters student and far from spatially adept. And feel free to forward
me to some channel more suited for this request.

Your assistance is appreciated,
Tom Roche <Tom_Roche at pobox.com> <Roche.Tom at epa.gov>

From newmanw10 at gmail.com  Fri Nov 16 12:12:07 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Fri, 16 Nov 2012 13:12:07 -0700
Subject: [gdal-dev] Speed up gdaltranslate for really big tiffs
Message-ID: <CAD34qgkjdoUfOgNBO-DUFbispezUdTTDZRfJY46XaMUFbtQSHQ@mail.gmail.com>

I have a process that is stitching together a lot of tif files to
create on big tif.

I am doing:

gdalbuildvrt output.vrt *.tif
gdaltranslate -co COMPRESS=LZW output.vrt final.tif

Any more options that I can throw at gdaltranslate to speed up the translation?

Thanks!

From even.rouault at mines-paris.org  Fri Nov 16 12:18:30 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 16 Nov 2012 21:18:30 +0100
Subject: [gdal-dev] Speed up gdaltranslate for really big tiffs
In-Reply-To: <CAD34qgkjdoUfOgNBO-DUFbispezUdTTDZRfJY46XaMUFbtQSHQ@mail.gmail.com>
References: <CAD34qgkjdoUfOgNBO-DUFbispezUdTTDZRfJY46XaMUFbtQSHQ@mail.gmail.com>
Message-ID: <201211162118.30158.even.rouault@mines-paris.org>

Le vendredi 16 novembre 2012 21:12:07, Billy Newman a ?crit :
> I have a process that is stitching together a lot of tif files to
> create on big tif.
> 
> I am doing:
> 
> gdalbuildvrt output.vrt *.tif
> gdaltranslate -co COMPRESS=LZW output.vrt final.tif
> 
> Any more options that I can throw at gdaltranslate to speed up the
> translation?

If your target TIFF has very large dimensions, it might perhaps be helpful to 
make it tiled with -co TILED=YES .

> 
> Thanks!
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From newmanw10 at gmail.com  Fri Nov 16 13:56:09 2012
From: newmanw10 at gmail.com (Billy Newman)
Date: Fri, 16 Nov 2012 14:56:09 -0700
Subject: [gdal-dev] Speed up gdaltranslate for really big tiffs
In-Reply-To: <201211162118.30158.even.rouault@mines-paris.org>
References: <CAD34qgkjdoUfOgNBO-DUFbispezUdTTDZRfJY46XaMUFbtQSHQ@mail.gmail.com>
	<201211162118.30158.even.rouault@mines-paris.org>
Message-ID: <CAD34qg=3q2VDp46q3Eak-A9D8SXg7q780=_oUugwnypDEtTuLg@mail.gmail.com>

In general I having problems generating big tiffs in a timely manner.

I also have the following scenario in which I am trying to create an
overview tiff from some already existing tiffs.

image.tif (524288, 262144)
image.tif.ovr
image.tif.ovr.ovr
image.tif.ovr.ovr.ovr
image.tif.ovr.ovr.ovr.ovr
image.tif.ovr.ovr.ovr.ovr.ovr
image.tif.ovr.ovr.ovr.ovr.ovr.ovr
image.tif.ovr.ovr.ovr.ovr.ovr.ovr.ovr
image.tif.ovr..ovr.ovr.ovr.ovr.ovr.ovr.ovr

Each overview is a factor of 2 smaller.

When I create the final tiff with overviews:

gdal_translate image.tif image_w_overview.tif -co COPY_SRC_OVERVIEWS=YES

I assume that the destination tiff needs to be completely recreated.
This is taking a really long time.  > day.

Any ideas on how I can create this final overview tiff in a more
timely manner as well.

Is my file just too big to expect the overview to be created faster?

Thanks again!

On Fri, Nov 16, 2012 at 1:18 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le vendredi 16 novembre 2012 21:12:07, Billy Newman a ?crit :
>> I have a process that is stitching together a lot of tif files to
>> create on big tif.
>>
>> I am doing:
>>
>> gdalbuildvrt output.vrt *.tif
>> gdaltranslate -co COMPRESS=LZW output.vrt final.tif
>>
>> Any more options that I can throw at gdaltranslate to speed up the
>> translation?
>
> If your target TIFF has very large dimensions, it might perhaps be helpful to
> make it tiled with -co TILED=YES .
>
>>
>> Thanks!
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Fri Nov 16 16:05:49 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 16 Nov 2012 22:05:49 -0200
Subject: [gdal-dev] Speed up gdaltranslate for really big tiffs
In-Reply-To: <CAD34qg=3q2VDp46q3Eak-A9D8SXg7q780=_oUugwnypDEtTuLg@mail.gmail.com>
References: <CAD34qgkjdoUfOgNBO-DUFbispezUdTTDZRfJY46XaMUFbtQSHQ@mail.gmail.com>
	<201211162118.30158.even.rouault@mines-paris.org>
	<CAD34qg=3q2VDp46q3Eak-A9D8SXg7q780=_oUugwnypDEtTuLg@mail.gmail.com>
Message-ID: <CA+TxYvOiLdGMh0SRB0msXRtqeKav0t+7=_if+U2aV7z-HWX1qA@mail.gmail.com>

You know you can have a single file with many overview levels, right?
Why so many files?

On Fri, Nov 16, 2012 at 7:56 PM, Billy Newman <newmanw10 at gmail.com> wrote:
> In general I having problems generating big tiffs in a timely manner.
>
> I also have the following scenario in which I am trying to create an
> overview tiff from some already existing tiffs.
>
> image.tif (524288, 262144)
> image.tif.ovr
> image.tif.ovr.ovr
> image.tif.ovr.ovr.ovr
> image.tif.ovr.ovr.ovr.ovr
> image.tif.ovr.ovr.ovr.ovr.ovr
> image.tif.ovr.ovr.ovr.ovr.ovr.ovr
> image.tif.ovr.ovr.ovr.ovr.ovr.ovr.ovr
> image.tif.ovr..ovr.ovr.ovr.ovr.ovr.ovr.ovr
>
> Each overview is a factor of 2 smaller.
>
> When I create the final tiff with overviews:
>
> gdal_translate image.tif image_w_overview.tif -co COPY_SRC_OVERVIEWS=YES
>
> I assume that the destination tiff needs to be completely recreated.
> This is taking a really long time.  > day.
>
> Any ideas on how I can create this final overview tiff in a more
> timely manner as well.
>
> Is my file just too big to expect the overview to be created faster?
>
> Thanks again!
>
> On Fri, Nov 16, 2012 at 1:18 PM, Even Rouault
> <even.rouault at mines-paris.org> wrote:
>> Le vendredi 16 novembre 2012 21:12:07, Billy Newman a ?crit :
>>> I have a process that is stitching together a lot of tif files to
>>> create on big tif.
>>>
>>> I am doing:
>>>
>>> gdalbuildvrt output.vrt *.tif
>>> gdaltranslate -co COMPRESS=LZW output.vrt final.tif
>>>
>>> Any more options that I can throw at gdaltranslate to speed up the
>>> translation?
>>
>> If your target TIFF has very large dimensions, it might perhaps be helpful to
>> make it tiled with -co TILED=YES .
>>
>>>
>>> Thanks!
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From lhomme.xavier at gmail.com  Sat Nov 17 08:22:06 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Sat, 17 Nov 2012 17:22:06 +0100
Subject: [gdal-dev] Create a ISpatialReference from an SpatialReference
Message-ID: <CACqzBMy05zBPdPQsV-H1xqOR=8XHWtM_JLWcRMp1zZspHmsgJA@mail.gmail.com>

Hi

 How to get the EPSG Code from  a OSR.SpatialReference ?

 Is there some explample to create an ESRI ISpatialReference  from a
OSR.SpatialReference ?



xavier.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121117/e5778691/attachment.html>

From warmerdam at pobox.com  Sat Nov 17 10:27:58 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat, 17 Nov 2012 10:27:58 -0800
Subject: [gdal-dev] Create a ISpatialReference from an SpatialReference
In-Reply-To: <CACqzBMy05zBPdPQsV-H1xqOR=8XHWtM_JLWcRMp1zZspHmsgJA@mail.gmail.com>
References: <CACqzBMy05zBPdPQsV-H1xqOR=8XHWtM_JLWcRMp1zZspHmsgJA@mail.gmail.com>
Message-ID: <50A7D72E.3000906@pobox.com>

Xavier,

You haven't indicated your target language.

On 12-11-17 08:22 AM, xavier lhomme wrote:
> Hi
>
>   How to get the EPSG Code from  a OSR.SpatialReference ?

In C++ you could do something like:

     int nPCS = -1;
     if( poSRS->GetAuthorityName("PROJCS") != NULL
         && EQUAL(poSRS->GetAuthorityName("PROJCS"),"EPSG") )
     {
         nPCS = atoi(poSRS->GetAuthorityCode("PROJCS"));
     }

This works for projected coordinate systems.  For geographic
coordinate systems you could replace PROJCS with GEOGCS.

I would add that for coordinate systems without existing AUTHORITY
entries with the EPSG codes it can be helpful to run the
AutoIdentifyEPSG() method on the OGRSpatialReference.  This will make
a somewhat feeble attempt to recognise EPSG coordinate systems and
attach the authority codes.

>   Is there some explample to create an ESRI ISpatialReference  from a
> OSR.SpatialReference ?

I am not familiar with ISpatialReference, but with an OGRSpatialReference
you can call morphToESRI() to switch the coordinate system definition
format to match what is expected by the ArcGIS Projection Engine and
then fetch the string out with ExportToWkt().  In Python this might look
something like:

     srs = ogr.SpatialReference()
     srs.ImportFromEPSG(4202)
     srs.MorphToESRI()
     pe_wkt = srs.ExportToWkt()

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From lhomme.xavier at gmail.com  Sun Nov 18 02:00:19 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Sun, 18 Nov 2012 11:00:19 +0100
Subject: [gdal-dev] Create a ISpatialReference from an SpatialReference
In-Reply-To: <50A7D72E.3000906@pobox.com>
References: <CACqzBMy05zBPdPQsV-H1xqOR=8XHWtM_JLWcRMp1zZspHmsgJA@mail.gmail.com>
	<50A7D72E.3000906@pobox.com>
Message-ID: <CACqzBMw8R-4zufwt6X7ovgkegG3ANHfqvJzXaxdnF3e32603Fg@mail.gmail.com>

Hi
Thanks Frank :

In C# :

public static int GetWKID(OSR.SpatialReference spatialRef)
        {
            int wkid = -1;
            if (spatialRef.IsProjected()==1)
            {

                string PROJCS = spatialRef.GetAuthorityName("PROJCS");
                if (PROJCS != null && PROJCS.Equals("EPSG"))
                {

 Int32.TryParse(spatialRef.GetAuthorityCode("PROJCS"),out wkid);
                }
            }
            else if (spatialRef.IsGeographic() == 1)
            {
                string GEOGCS = spatialRef.GetAuthorityName("GEOGCS");
                if (GEOGCS != null && GEOGCS.Equals("EPSG"))
                {
                    Int32.TryParse(spatialRef.GetAuthorityCode("GEOGCS"),
out wkid);
                }
            }

            return wkid;
        }

For the ESRI Part it should be :
ISpatialReferenceFactory3 spatialFact = new
SpatialReferenceEnvironmentClass();
ISpatialReference lreference = null;
int wkid = GetWKID(ogrSR);
 if (wkid != -1)
    lreference = spatialFact.CreateSpatialReference(wkid);
 else
    {
                ogrSR.MorphToESRI();
                string wktSR = "";
                ogrSR.ExportToWkt(out wktSR);
                lreference = create from wkt
               // lreference =
spatialFact.CreateESRISpatialReferenceFromPRJ(wktSR);
   }




2012/11/17 Frank Warmerdam <warmerdam at pobox.com>

> Xavier,
>
> You haven't indicated your target language.
>
>
> On 12-11-17 08:22 AM, xavier lhomme wrote:
>
>> Hi
>>
>>   How to get the EPSG Code from  a OSR.SpatialReference ?
>>
>
> In C++ you could do something like:
>
>     int nPCS = -1;
>     if( poSRS->GetAuthorityName("**PROJCS") != NULL
>         && EQUAL(poSRS->GetAuthorityName(**"PROJCS"),"EPSG") )
>     {
>         nPCS = atoi(poSRS->GetAuthorityCode("**PROJCS"));
>     }
>
> This works for projected coordinate systems.  For geographic
> coordinate systems you could replace PROJCS with GEOGCS.
>
> I would add that for coordinate systems without existing AUTHORITY
> entries with the EPSG codes it can be helpful to run the
> AutoIdentifyEPSG() method on the OGRSpatialReference.  This will make
> a somewhat feeble attempt to recognise EPSG coordinate systems and
> attach the authority codes.
>
>
>    Is there some explample to create an ESRI ISpatialReference  from a
>> OSR.SpatialReference ?
>>
>
> I am not familiar with ISpatialReference, but with an OGRSpatialReference
> you can call morphToESRI() to switch the coordinate system definition
> format to match what is expected by the ArcGIS Projection Engine and
> then fetch the string out with ExportToWkt().  In Python this might look
> something like:
>
>     srs = ogr.SpatialReference()
>     srs.ImportFromEPSG(4202)
>     srs.MorphToESRI()
>     pe_wkt = srs.ExportToWkt()
>
> Best regards,
> --
> ------------------------------**---------+--------------------**
> ------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | http://home.gdal.org/warmerda
> and watch the world go round - Rush    | Geospatial Software Developer
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121118/d99e26be/attachment.html>

From chaitanya.ch at gmail.com  Mon Nov 19 00:37:37 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon, 19 Nov 2012 14:07:37 +0530
Subject: [gdal-dev] LiDAR data formats
Message-ID: <CAMKgpObxrdMYcJ-3Cdjk9aR0zw8kSym4MKz+OoS7RD6LCLWXow@mail.gmail.com>

Hi,

Can someone tell me the most common data formats useful for storing the
LiDAR data including the LiDAR specific data.

-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121119/23152d19/attachment.html>

From polimax at mail.ru  Mon Nov 19 01:16:23 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon, 19 Nov 2012 13:16:23 +0400
Subject: [gdal-dev] LiDAR data formats
In-Reply-To: <CAMKgpObxrdMYcJ-3Cdjk9aR0zw8kSym4MKz+OoS7RD6LCLWXow@mail.gmail.com>
References: <CAMKgpObxrdMYcJ-3Cdjk9aR0zw8kSym4MKz+OoS7RD6LCLWXow@mail.gmail.com>
Message-ID: <50A9F8E7.30702@mail.ru>

19.11.2012 12:37, Chaitanya kumar CH ?????:
> Hi,
>
> Can someone tell me the most common data formats useful for storing 
> the LiDAR data including the LiDAR specific data.
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,

LAS format 
(http://asprs.org/Committee-General/LASer-LAS-File-Format-Exchange-Activities.html)

Regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121119/2cfcbaa1/attachment.html>

From jluis at ualg.pt  Mon Nov 19 03:28:57 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 19 Nov 2012 11:28:57 +0000
Subject: [gdal-dev] LiDAR data formats
In-Reply-To: <50A9F8E7.30702@mail.ru>
References: <CAMKgpObxrdMYcJ-3Cdjk9aR0zw8kSym4MKz+OoS7RD6LCLWXow@mail.gmail.com>
	<50A9F8E7.30702@mail.ru>
Message-ID: <50AA17F9.5070807@ualg.pt>

You may also want to look at the laszip library

http://www.cs.unc.edu/~isenburg/lastools/

Joaquim

> 19.11.2012 12:37, Chaitanya kumar CH ?????:
>> Hi,
>>
>> Can someone tell me the most common data formats useful for storing 
>> the LiDAR data including the LiDAR specific data.
>>
>> -- 
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> Hi,
>
> LAS format 
> (http://asprs.org/Committee-General/LASer-LAS-File-Format-Exchange-Activities.html)
>
> Regards,
>     Dmitry
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121119/bb2cbebe/attachment.html>

From zoltans at geograph.co.za  Mon Nov 19 04:18:32 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 19 Nov 2012 14:18:32 +0200
Subject: [gdal-dev] Geotagging photos
Message-ID: <50AA2398.2010506@geograph.co.za>

Hi,
What is the quickest way to geotag photos?
Let's assume the the GPS time was NOT synchronised with the camera.

I have 122 GPS points named P001 to P122 and I have 122 photographs 
named P001.jpg to P122.jpg

I'm hoping that I can use gdaltranslate  with a linux bash script to add 
the positional data to the images to create geotagged jpegs.

Thanks in advance,
Zoltan



-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================


From doug_newcomb at fws.gov  Mon Nov 19 05:03:16 2012
From: doug_newcomb at fws.gov (Newcomb, Doug)
Date: Mon, 19 Nov 2012 08:03:16 -0500
Subject: [gdal-dev] Geotagging photos
In-Reply-To: <50AA2398.2010506@geograph.co.za>
References: <50AA2398.2010506@geograph.co.za>
Message-ID: <CALQGVr2xDtDUMYk-a2BaWCDuFRfa1O+fRjXb7467xpREtH0mCA@mail.gmail.com>

Zoltan,
If you are scripting things, this might work.
http://www.sno.phy.queensu.ca/~phil/exiftool/

If you're running linux, you might also look at this.

http://scribblesandsnaps.com/2011/02/16/geotag-photos-with-open-gps-tracker-and-digikam/

Doug



On Mon, Nov 19, 2012 at 7:18 AM, Zoltan Szecsei <zoltans at geograph.co.za>wrote:

> Hi,
> What is the quickest way to geotag photos?
> Let's assume the the GPS time was NOT synchronised with the camera.
>
> I have 122 GPS points named P001 to P122 and I have 122 photographs named
> P001.jpg to P122.jpg
>
> I'm hoping that I can use gdaltranslate  with a linux bash script to add
> the positional data to the images to create geotagged jpegs.
>
> Thanks in advance,
> Zoltan
>
>
>
> --
>
> ==============================**=============
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ==============================**=============
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb at fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121119/d7fc1593/attachment.html>

From turgay.osna at netcad.com.tr  Mon Nov 19 04:55:29 2012
From: turgay.osna at netcad.com.tr (netcadturgay)
Date: Mon, 19 Nov 2012 04:55:29 -0800 (PST)
Subject: [gdal-dev] gdal 1.9 path problem when I using special characters
Message-ID: <1353329729509-5017353.post@n6.nabble.com>

I can not read the ECW files if filename contains special characters(?,?,?
etc.). I use gdal 1.9 library including ERDAS ECW Read-Write SDK. Also I
tried to set GDAL_FILENAME_IS_UTF8=NO but it does not work.

Can you help me about this problem?



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-1-9-path-problem-when-I-using-special-characters-tp5017353.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Mon Nov 19 05:58:04 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 19 Nov 2012 13:58:04 +0000 (UTC)
Subject: [gdal-dev] GDAL v. 1.10 tutorial about geospatial PDF,
	OSM and vsicurl
Message-ID: <loom.20121119T141807-219@post.gmane.org>

Hi,

I have been asking whole lot of questions about OSM and PDF drivers
but now I try to give something back. This tutorial gives a 
demonstration about what can be achieved by using three new GDAL 1.10
features together: OSM driver, geospatial PDF driver and 
vsicurl_streaming.

Document: http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf
Sample map:
http://latuviitta.org/documents/Geospatial_OpenStreetMap_vector_and_raster_map.pdf

Most space in the document is used for giving code examples about 
how to add OGR vectors into geospatial PDF with OGR Feature Styles 
because that was not at all simple and obvious for me. I think that 
the result is quite interesting and worth the pain. I will be 
disappointed if I won't see a most beautiful GDAL generated 
geospatial PDF map for Foss4G 2013 conference with searchable hotel,
tourist attraction, public transport, venue, evening party etc. layers.

-Jukka Rahkonen-


From arb at sat.dundee.ac.uk  Mon Nov 19 06:29:57 2012
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Mon, 19 Nov 2012 14:29:57 +0000
Subject: [gdal-dev] Geotagging photos
In-Reply-To: <50AA2398.2010506@geograph.co.za>
References: <50AA2398.2010506@geograph.co.za>
Message-ID: <CAHOfOo1E6t=WdAph3pt=A35zSOOtiC1wt=vqd4A3t1wc60Tohw@mail.gmail.com>

On 19 November 2012 12:18, Zoltan Szecsei <zoltans at geograph.co.za> wrote:

> What is the quickest way to geotag photos?
>

Something with gpsPhoto.pl ?


> Let's assume the the GPS time was NOT synchronised with the camera.
>

I'm sure it has an option to give a time offset.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121119/f9eab9f2/attachment-0001.html>

From zoltans at geograph.co.za  Mon Nov 19 08:07:48 2012
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon, 19 Nov 2012 18:07:48 +0200
Subject: [gdal-dev] Geotagging photos
In-Reply-To: <CALQGVr2xDtDUMYk-a2BaWCDuFRfa1O+fRjXb7467xpREtH0mCA@mail.gmail.com>
References: <50AA2398.2010506@geograph.co.za>
	<CALQGVr2xDtDUMYk-a2BaWCDuFRfa1O+fRjXb7467xpREtH0mCA@mail.gmail.com>
Message-ID: <50AA5954.6090302@geograph.co.za>

Great - Thanks.

exiftools rules.
I wrote a script to create the following commands (in BASH) per photo, 
then copied over and ran it at the Windows cmd prompt.

exiftool.exe -exif:gpslatituderef=S -exif:gpslatitude="27 42 01.85" 
-exif:gpslongituderef=E -exif:gpslongitude="23 00 30.6" 
-exif:gpsaltituderef=0 -exif:gpsaltitude=1200.562988299999900 P017.JPG

It gave a warning on the -exif:gpsaltituderef=0  param, but seems to 
have worked.

Big thanks,
Zoltan



On 2012/11/19 15:03, Newcomb, Doug wrote:
> Zoltan,
> If you are scripting things, this might work.
> http://www.sno.phy.queensu.ca/~phil/exiftool/ 
> <http://www.sno.phy.queensu.ca/%7Ephil/exiftool/>
>
> If you're running linux, you might also look at this.
>
> http://scribblesandsnaps.com/2011/02/16/geotag-photos-with-open-gps-tracker-and-digikam/
>
> Doug
>
>
>
> On Mon, Nov 19, 2012 at 7:18 AM, Zoltan Szecsei 
> <zoltans at geograph.co.za <mailto:zoltans at geograph.co.za>> wrote:
>
>     Hi,
>     What is the quickest way to geotag photos?
>     Let's assume the the GPS time was NOT synchronised with the camera.
>
>     I have 122 GPS points named P001 to P122 and I have 122
>     photographs named P001.jpg to P122.jpg
>
>     I'm hoping that I can use gdaltranslate  with a linux bash script
>     to add the positional data to the images to create geotagged jpegs.
>
>     Thanks in advance,
>     Zoltan
>
>
>
>     -- 
>
>     ===========================================
>     Zoltan Szecsei PrGISc [PGP0031]
>     Geograph (Pty) Ltd.
>     P.O. Box 7, Muizenberg 7950, South Africa.
>
>     65 Main Road, Muizenberg 7945
>     Western Cape, South Africa.
>
>     34? 6'16.35"S 18?28'5.62"E
>
>     Tel: +27-21-7884897  Mobile: +27-83-6004028
>     Fax: +27-86-6115323 www.geograph.co.za <http://www.geograph.co.za>
>     ===========================================
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb at fws.gov <mailto:doug_newcomb at fws.gov>
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the 
> official policy of the U.S.Fish and Wildlife Service or Dept. of the 
> Interior.   Life is too short for undocumented, proprietary data formats.
>


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121119/e1b5316b/attachment.html>

From Hannes.Wuerfel at student.hpi.uni-potsdam.de  Mon Nov 19 09:56:02 2012
From: Hannes.Wuerfel at student.hpi.uni-potsdam.de (Wuerfel, Hannes)
Date: Mon, 19 Nov 2012 18:56:02 +0100
Subject: [gdal-dev] Preserving feature Information from Shapefile
Message-ID: <86E5A0E93B7D374B85FEA49458759233326C161F89@8mxstu1r.hpi.uni-potsdam.de>

Hi all,

I'm new to gdal OGR Simple Feature Library.
What I'd like to do is to read an esri shapefile, modify the geometry and feature information and write a new shapefile to disc.
I went through the read/write tutorial and I can write back the Geometry to the new shapefile but I'm stugged with copying the other feature informations.

Can somebody please explain to me how it should be done?

What I do is basically this:

open the source file
fetch a layer
determine the geometry type used
open the destination file
create destination layer with source Layer Spatial Reference and source geometry type
and then:
while(srcFeature = srcLayer->GetNextFeature()) != NULL)
{
      // no working feature duplication ...

     // working ogrgeometry duplication
     // ...
     // destinationFeature->SetGeometryDirectly(...);
}

Best regards.
Hannes

From warmerdam at pobox.com  Mon Nov 19 10:38:18 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 19 Nov 2012 10:38:18 -0800
Subject: [gdal-dev] GDAL v. 1.10 tutorial about geospatial PDF,
	OSM and vsicurl
In-Reply-To: <loom.20121119T141807-219@post.gmane.org>
References: <loom.20121119T141807-219@post.gmane.org>
Message-ID: <CA+YzLBdnkUEOZPi-N1QEV+Z-0obB1skAhRcfirO60H5azSvH9g@mail.gmail.com>

Jukka,

I have taken the liberty of adding a link at:

  http://trac.osgeo.org/gdal/wiki/UserDocs

There are some nice resources available from here now.

Best regards,


On Mon, Nov 19, 2012 at 5:58 AM, Jukka Rahkonen
<jukka.rahkonen at mmmtike.fi>wrote:

> Hi,
>
> I have been asking whole lot of questions about OSM and PDF drivers
> but now I try to give something back. This tutorial gives a
> demonstration about what can be achieved by using three new GDAL 1.10
> features together: OSM driver, geospatial PDF driver and
> vsicurl_streaming.
>
> Document:
> http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf
> Sample map:
>
> http://latuviitta.org/documents/Geospatial_OpenStreetMap_vector_and_raster_map.pdf
>
> Most space in the document is used for giving code examples about
> how to add OGR vectors into geospatial PDF with OGR Feature Styles
> because that was not at all simple and obvious for me. I think that
> the result is quite interesting and worth the pain. I will be
> disappointed if I won't see a most beautiful GDAL generated
> geospatial PDF map for Foss4G 2013 conference with searchable hotel,
> tourist attraction, public transport, venue, evening party etc. layers.
>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121119/b7e7c681/attachment.html>

From even.rouault at mines-paris.org  Mon Nov 19 11:50:56 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 19 Nov 2012 20:50:56 +0100
Subject: [gdal-dev] Preserving feature Information from Shapefile
In-Reply-To: <86E5A0E93B7D374B85FEA49458759233326C161F89@8mxstu1r.hpi.uni-potsdam.de>
References: <86E5A0E93B7D374B85FEA49458759233326C161F89@8mxstu1r.hpi.uni-potsdam.de>
Message-ID: <201211192050.56989.even.rouault@mines-paris.org>

Le lundi 19 novembre 2012 18:56:02, Wuerfel, Hannes a ?crit :
> Hi all,
> 
> I'm new to gdal OGR Simple Feature Library.
> What I'd like to do is to read an esri shapefile, modify the geometry and
> feature information and write a new shapefile to disc. I went through the
> read/write tutorial and I can write back the Geometry to the new shapefile
> but I'm stugged with copying the other feature informations.
> 
> Can somebody please explain to me how it should be done?

Have a look at OGRFeature::SetFrom() and OGRFeature::SetField()

From hobu.inc at gmail.com  Mon Nov 19 11:55:11 2012
From: hobu.inc at gmail.com (Howard Butler)
Date: Mon, 19 Nov 2012 13:55:11 -0600
Subject: [gdal-dev] LiDAR data formats
In-Reply-To: <CAMKgpObxrdMYcJ-3Cdjk9aR0zw8kSym4MKz+OoS7RD6LCLWXow@mail.gmail.com>
References: <CAMKgpObxrdMYcJ-3Cdjk9aR0zw8kSym4MKz+OoS7RD6LCLWXow@mail.gmail.com>
Message-ID: <11E5D6C1-37EC-4583-8969-575AFA4819FA@gmail.com>


On Nov 19, 2012, at 2:37 AM, Chaitanya kumar CH <chaitanya.ch at gmail.com> wrote:

> Hi,
> 
> Can someone tell me the most common data formats useful for storing the LiDAR data including the LiDAR specific data.

LiDAR industry's GeoTIFF or Shapefile is the ASPRS LAS format, with all the good and bad connotations of each in terms of specification stewardship, variability of purported compliant output, and specification complexity. However, the specification has been quite successful at its stated purpose, which is to provide an interchange format for airborne LiDAR data. LAS is also sometimes used for terrestrial and mobile LiDAR, but it can be a somewhat poor fit in those situations.

LAZ, linked earlier, is an extension of LAS to provide a compressed variant of the format using arithmetic encoding. The software to read and write LAZ is provided as a LGPL C++ library, and its use within the industry is increasing due to the availability of the open source library and the rather bloated nature of LAS.  LAS and LAZ are very much linked in terms of what they provide as far as format capabilities, however.

There is also the ASTM E57 standard, with its open source implementation libe57, that provides an alternative to LAS that works with polar, terrestrial, and mobile data a little bit better than LAS. It does not have wide support within the industry thus far, and it's unclear as to whether it will ultimately get the uptake to push it over LAS in terms of volume archival data. 

Plain old freeform delimited text still overshadows the LiDAR industry, much like it did to the raster one a generation or two ago. In my opinion this is due to the fact that hardware vendors tend to only support the bare minimums within their export data (such as somewhat naked LAS), and the fact that the industry's specifications are not rich enough to effectively deal with LiDAR data such as full waveform characterization with all of the auxiliary information required to be usable. 

Howard
http://pointcloud.org

From ealpert at digitalglobe.com  Mon Nov 19 15:42:17 2012
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Mon, 19 Nov 2012 16:42:17 -0700
Subject: [gdal-dev] Problem compiling gdal with OCI support,
	configure doesn't seem to know where to look
In-Reply-To: <1353028471893-5016804.post@n6.nabble.com>
References: <1353028471893-5016804.post@n6.nabble.com>
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB2330B43E66B@COMAIL01.digitalglobe.com>

You sure your oracle client libs are installed correctly? It's strange
that oci.h would be in the top level directory.

--with-oci=/dg/local/apps/osgeo_pack/deployed/linux-x86_64/product/11gCl
ient/
--with-oci-include=/dg/local/apps/osgeo_pack/deployed/linux-x86_64/produ
ct/11gClient/rdbms/public/
--with-oci-lib=/dg/local/apps/osgeo_pack/deployed/linux-x86_64/product/1
1gClient/lib/

That's what I used for gdal 1.8.1.
/dg/local/apps/osgeo_pack/deployed/linux-x86_64 is my system deployed
path.

-ethan

-----Original Message-----
From: gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of cheesybiscuits
Sent: Thursday, November 15, 2012 6:15 PM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Problem compiling gdal with OCI support, configure
doesn't seem to know where to look

First of all sorry for posing a question that has been asked a thousand
times before. I did a lot of research but didn't find this specific
problem.

I have Linux Mint (Ubuntu) with Oracle instant client basic and SDK
(11.2) installed from .deb (via Alien). $ORACLE_HOME is set
(/usr/lib/oracle/11.2/client) and contains bin, lib, and a symlink to
include (/usr/include/oracle/11.2/client). I'm not a total linux n00b
but I don't usually compile anything from source.

I installed the Oracle software using the instructions  here
<https://help.ubuntu.com/community/Oracle%20Instant%20Client>  

Running 'locate oci.h' shows 

/home/tom/Downloads/gdal/gdal-1.9.2/ogr/ogrsf_frmts/oci/drv_oci.html
/home/tom/Downloads/gdal/gdal-1.9.2/ogr/ogrsf_frmts/oci/ogr_oci.h
/usr/include/oracle/11.2/client/oci.h

As you can see I'm trying to compile 1.9.2 Stable.

No matter what I pass with the ./configure command, config.log always
reports
"configure:22485: checking for Oracle OCI headers in " - with nothing
after "in" - as if it doesn't know where the header is supposed to be,
and then
"conftest.cpp:64:29: fatal error: oci.h: No such file or directory"

These are the arguments I've tried

./configure --with-oci
./configure --with-oci-include='/usr/include/oracle/11.2/client'
./configure --with-oci=/usr/lib/oracle/11.2/client/include
./configure --with-oci=$ORACLE_HOME

I even tried copying the contents of /usr/lib/oracle/11.2/client/include
to the gdal source directory, but I'm not sure what I thought this would
accomplish.

Can anyone suggest where I could go next? Any thoughts much appreciated.



--
View this message in context:
http://osgeo-org.1560.n6.nabble.com/Problem-compiling-gdal-with-OCI-supp
ort-configure-doesn-t-seem-to-know-where-to-look-tp5016804.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.


From nikhil.parupalli at iictechnologies.com  Mon Nov 19 21:29:35 2012
From: nikhil.parupalli at iictechnologies.com (Nikhil Sai Parupalli)
Date: Tue, 20 Nov 2012 05:29:35 +0000
Subject: [gdal-dev] How to read catalog file
Message-ID: <139560E1825F4648BDA4F32853B530A78CA2466C@IICEXHC01.iictechnologies.local>

Hi All,

I have developed an application on VB.Net with GDAL as interface to read S57 dataset.
Everything is fine , here I have to read some information form S57 catalog file .
I have tried using stream reader in VB.net, but unable to fetch the values correctly.
Can any one help me out in reading S57 catalog file using GDAL and vb.net .

Thanks and Regards
Nikhil Sai Parupalli



Note: Do not print this email until and unless it is really required. Save paper , stay Green
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121120/3a698dc3/attachment.html>

From etourigny.dev at gmail.com  Tue Nov 20 04:43:24 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 20 Nov 2012 10:43:24 -0200
Subject: [gdal-dev] which formats support subdatasets?
Message-ID: <CA+TxYvMHzKQNh6BaVCw729ODHW_Wc1CPnTP9WRJtw1BqEYa0vw@mail.gmail.com>

Hi

I'd like to be able to identify which raster and vector formats
support subdatasets (or multipl layers).

A quick grep search (grep SUBDATASETS frmts/*/*.cpp) showed which GDAL
drivers can report subdatasets.
Am I missing something?

I think it would be nice to include this info in the driver summary
page - should I just edit the html or is there some other file to
edit?

I was wondering how to find that out for OGR drivers - or do all
drivers support multiple layers in one datasource?


Regards,
Etienne

From Konstantin.Baumann at autodesk.com  Tue Nov 20 08:33:27 2012
From: Konstantin.Baumann at autodesk.com (Konstantin Baumann)
Date: Tue, 20 Nov 2012 16:33:27 +0000
Subject: [gdal-dev] gdal 1.9 path problem when I using special characters
In-Reply-To: <1353329729509-5017353.post@n6.nabble.com>
References: <1353329729509-5017353.post@n6.nabble.com>
Message-ID: <CE66632AE1610940A559DB5756F262AB0957FB3C@005-TK5MPN1-013.MGDADSK.autodesk.com>

Hi,

we were running into the same issues and solved it by this workaround: use Windows 8.3 filenames and paths for ECW files:

        // WORKAROUND for either a GDAL issue or an issue within the ECW library used by GDAL:
        // when opening ECW files with unicode chars in the filename or pathname, the returned
        // pixels are (sometimes) corrupted; opening the same file with the corresponding
        // windows "8.3" filename everything works as expected...
        // for the "8.3" filename conversion have a look here:
        //     http://msdn.microsoft.com/en-us/library/windows/desktop/aa364989%28v=vs.85%29.aspx
        std::wstring uri = ...;
        if(StringUtils::EndsWith(uri.c_str(), L".ecw")) {
            wchar_t ecwShortName[MAX_PATH];
            if(::GetShortPathName(uri.c_str(), ecwShortName, MAX_PATH) > 0) {
                uri = ecwShortName;
            }
        }

Not nice, but for us it works so far...

-Kosta

> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-
> bounces at lists.osgeo.org] On Behalf Of netcadturgay
> Sent: Monday, November 19, 2012 1:55 PM
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] gdal 1.9 path problem when I using special characters
> 
> I can not read the ECW files if filename contains special characters(?,?,? etc.). I
> use gdal 1.9 library including ERDAS ECW Read-Write SDK. Also I tried to set
> GDAL_FILENAME_IS_UTF8=NO but it does not work.
> 
> Can you help me about this problem?
> 
> 
> 
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-1-
> 9-path-problem-when-I-using-special-characters-tp5017353.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ragi at burhum.com  Tue Nov 20 11:17:46 2012
From: ragi at burhum.com (rburhum)
Date: Tue, 20 Nov 2012 11:17:46 -0800 (PST)
Subject: [gdal-dev] Create a ISpatialReference from an SpatialReference
In-Reply-To: <CACqzBMw8R-4zufwt6X7ovgkegG3ANHfqvJzXaxdnF3e32603Fg@mail.gmail.com>
References: <CACqzBMy05zBPdPQsV-H1xqOR=8XHWtM_JLWcRMp1zZspHmsgJA@mail.gmail.com>
	<50A7D72E.3000906@pobox.com>
	<CACqzBMw8R-4zufwt6X7ovgkegG3ANHfqvJzXaxdnF3e32603Fg@mail.gmail.com>
Message-ID: <1353439066519-5017713.post@n6.nabble.com>

ArcObjects to OGR:
https://github.com/rouault/gdal/blob/trunk/gdal/ogr/ogrsf_frmts/arcobjects/aoutils.cpp#L276

OGR to ArcObjects:
https://github.com/RBURHUM/arcgis-ogr/blob/master/src/OGRPlugin/OGRPlugin/ogrplugin_utils.cs#L209

Best,

- Ragi



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-Create-a-ISpatialReference-from-an-SpatialReference-tp5017101p5017713.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Tue Nov 20 11:23:39 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 20 Nov 2012 20:23:39 +0100
Subject: [gdal-dev] OpenJPEG 2.0 released
Message-ID: <201211202023.40035.even.rouault@mines-paris.org>

Hi,

Just to inform you that the OpenJPEG project has just released OpenJPEG 2.0.0.

GDAL users of GDAL 1.10dev that need support for JPEG2000 can (must) now rely 
on a released version, and no longer on the openjpeg SVN v2 branch (which has 
been removed by the way)

Even

From etourigny.dev at gmail.com  Tue Nov 20 12:14:12 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 20 Nov 2012 18:14:12 -0200
Subject: [gdal-dev] building overviews and ignoring NODATA?
Message-ID: <CA+TxYvP0XdfDfB7=rOnS_m-WDNYTSB96gP+ETa_CEgZ_vyTuCw@mail.gmail.com>

Hi all,

I just noticed that GDALBuildOverViews disregards all nodata pixels.
While this is useful in many cases, sometimes it can be desired to NOT
overlook nodata pixels.

For example, I have a raster of sparse data (many nodata pixels), that
I am using gdaladdo to make down-sampled versions. The workflow is:
use gdaladdo with "mode" resampling and then gdal_translate to get
final downsampled image.

A problem occurs on the edges of valid data, overview pixels get set
to a value which is clearly non-dominant in the higher-resolution data
- that is mostly nodata pixels. As the algorithm disregards the nodata
pixels, result is the most frequent valid data pixel.

Would it be easy to fix this, or am I better off just making a copy of
the file without nodata, and then adding the nodata later?

Thanks
Etienne

From kyle at pobox.com  Tue Nov 20 13:36:38 2012
From: kyle at pobox.com (Kyle Shannon)
Date: Tue, 20 Nov 2012 14:36:38 -0700
Subject: [gdal-dev] SQLite Driver and non-spatial tables
In-Reply-To: <op.wnqbw3rh8in2ni@kyle-workstation>
References: <op.wnqbw3rh8in2ni@kyle-workstation>
Message-ID: <CAJ0mEz0tPHrgaJ8cqX2UzdgE3tLCUaOziq1jyiHjuYwuJAiR_w@mail.gmail.com>

For the record, in case anyone is interested, it appears setting
SQLITE_LIST_ALL_TABLES=YES appears to allow me access to non-spatial
tables.  I didn't find any documentation on the format page though.

On Tue, Nov 13, 2012 at 1:44 PM, Kyle Shannon <kyle at pobox.com> wrote:

> I have a Spatialite enabled SQLite file with both spatial and non-spatial
> tables.  Since my database has a table called geometry_columns, all
> non-spatial tables are not loaded as layers.  If I don't have a
> geometry_columns OGR attempts to load geometry from all the tables, but
> still loads non-spatial tables.  Is that correct?  The behavior doesn't
> seem consistent in the two cases.  I just want to make sure I understand
> the driver's behavior.
>
> kss
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121120/0f3af63e/attachment.html>

From warmerdam at pobox.com  Tue Nov 20 13:55:17 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue, 20 Nov 2012 13:55:17 -0800
Subject: [gdal-dev] How to read catalog file
In-Reply-To: <139560E1825F4648BDA4F32853B530A78CA2466C@IICEXHC01.iictechnologies.local>
References: <139560E1825F4648BDA4F32853B530A78CA2466C@IICEXHC01.iictechnologies.local>
Message-ID: <50ABFC45.2040804@pobox.com>

On 12-11-19 09:29 PM, Nikhil Sai Parupalli wrote:
> Hi All,
>
> I have developed an application on VB.Net with GDAL as interface to read S57
> dataset.
> Everything is fine , here I have to read some information form S57 catalog file .
> I have tried using stream reader in VB.net, but unable to fetch the values
> correctly.
> Can any one help me out in reading S57 catalog file using GDAL and vb.net .

Nikhil,

The catalog files are relatively simple ISO8211 format files.  My
8211view utility (mainline in gdal/frmts/iso8211) shows the following.
Unfortunately, the low level ISO8211 data access is not currently
provided through the public GDAL API (as an OGR dataset for instance).
So I'm not sure how you would be able to access it from VB.net
easily.

Possiblilities include:
  1) you provide your own callout to C++ and from there call the 8211
     library in GDAL (see http://home.gdal.org/projects/iso8211/index.html)
  2) Run the 8211view.exe exectable and parse the result - messy!
  3) someone writes a small OGR driver for generic ISO8211 files. I
     already once did something similar for FME but the feature model
     there is much more flexible.

warmerda at gdal65[374]% 8211view CATALOG.030
Record 1 (87 bytes)
     Field 0001: ISO 8211 Record Identifier
     Field CATD: Catalog Directory field
         RCNM = `CD'
         RCID = 1
         FILE = `CATALOG.030'
         LFIL = `'
         VOLM = `V01X01'
         IMPL = `ASC'
         SLAT = 0.000000
         WLON = 0.000000
         NLAT = 0.000000
         ELON = 0.000000
         CRCS = `'
         COMT = `Exchange Set Catalog file...'
Record 2 (110 bytes)
     Field 0001: ISO 8211 Record Identifier
     Field CATD: Catalog Directory field
         RCNM = `CD'
         RCID = 2
         FILE = `No410810.000'
         LFIL = `'
         VOLM = `V01X01'
         IMPL = `BIN'
         SLAT = 59.000005
         WLON = 4.999996
         NLAT = 59.500003
         ELON = 5.499997
         CRCS = `555C3AD4'
         COMT = `'
Record 3 (58 bytes)
     Field 0001: ISO 8211 Record Identifier
     Field CATD: Catalog Directory field
         RCNM = `CD'
         RCID = 3
         FILE = `README.TXT'
         LFIL = `'
         VOLM = `V01X01'
         IMPL = `ASC'
         SLAT = 0.000000
         WLON = 0.000000
         NLAT = 0.000000
         ELON = 0.000000
         CRCS = `'
         COMT = `'

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From even.rouault at mines-paris.org  Tue Nov 20 14:36:05 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 20 Nov 2012 23:36:05 +0100
Subject: [gdal-dev] building overviews and ignoring NODATA?
In-Reply-To: <CA+TxYvP0XdfDfB7=rOnS_m-WDNYTSB96gP+ETa_CEgZ_vyTuCw@mail.gmail.com>
References: <CA+TxYvP0XdfDfB7=rOnS_m-WDNYTSB96gP+ETa_CEgZ_vyTuCw@mail.gmail.com>
Message-ID: <201211202336.06006.even.rouault@mines-paris.org>

Le mardi 20 novembre 2012 21:14:12, Etienne Tourigny a ?crit :
> Hi all,
> 
> I just noticed that GDALBuildOverViews disregards all nodata pixels.
> While this is useful in many cases, sometimes it can be desired to NOT
> overlook nodata pixels.
> 
> For example, I have a raster of sparse data (many nodata pixels), that
> I am using gdaladdo to make down-sampled versions. The workflow is:
> use gdaladdo with "mode" resampling and then gdal_translate to get
> final downsampled image.
> 
> A problem occurs on the edges of valid data, overview pixels get set
> to a value which is clearly non-dominant in the higher-resolution data
> - that is mostly nodata pixels. As the algorithm disregards the nodata
> pixels, result is the most frequent valid data pixel.
> 
> Would it be easy to fix this, or am I better off just making a copy of
> the file without nodata, and then adding the nodata later?

Etienne,

Mode resampling was contributed by Seth Price in 
http://trac.osgeo.org/gdal/ticket/2347 . Perhaps you could see with him.

At first sight, I'd say that your arguments make sense, and that nodata should 
be treated as a regular value (like in nearest resampling). Ignoring nodata 
makes sense in bilinear or cubic resampling where you don't want to "average" 
with a dummy value.

> 
> Thanks
> Etienne
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From etourigny.dev at gmail.com  Tue Nov 20 15:26:51 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Tue, 20 Nov 2012 21:26:51 -0200
Subject: [gdal-dev] building overviews and ignoring NODATA?
In-Reply-To: <201211202336.06006.even.rouault@mines-paris.org>
References: <CA+TxYvP0XdfDfB7=rOnS_m-WDNYTSB96gP+ETa_CEgZ_vyTuCw@mail.gmail.com>
	<201211202336.06006.even.rouault@mines-paris.org>
Message-ID: <CA+TxYvONTrVLyZBduwDecBuCxhqOSyko4DTuoEi0-LbpiuV4vQ@mail.gmail.com>

Hi Even

thanks for the info - I created a ticket (#4904) so it's not forgotten
and added sprice in CC - although he hasn't seemingly been active in
gdal for a few years.

Etienne

On Tue, Nov 20, 2012 at 8:36 PM, Even Rouault
<even.rouault at mines-paris.org> wrote:
> Le mardi 20 novembre 2012 21:14:12, Etienne Tourigny a ?crit :
>> Hi all,
>>
>> I just noticed that GDALBuildOverViews disregards all nodata pixels.
>> While this is useful in many cases, sometimes it can be desired to NOT
>> overlook nodata pixels.
>>
>> For example, I have a raster of sparse data (many nodata pixels), that
>> I am using gdaladdo to make down-sampled versions. The workflow is:
>> use gdaladdo with "mode" resampling and then gdal_translate to get
>> final downsampled image.
>>
>> A problem occurs on the edges of valid data, overview pixels get set
>> to a value which is clearly non-dominant in the higher-resolution data
>> - that is mostly nodata pixels. As the algorithm disregards the nodata
>> pixels, result is the most frequent valid data pixel.
>>
>> Would it be easy to fix this, or am I better off just making a copy of
>> the file without nodata, and then adding the nodata later?
>
> Etienne,
>
> Mode resampling was contributed by Seth Price in
> http://trac.osgeo.org/gdal/ticket/2347 . Perhaps you could see with him.
>
> At first sight, I'd say that your arguments make sense, and that nodata should
> be treated as a regular value (like in nearest resampling). Ignoring nodata
> makes sense in bilinear or cubic resampling where you don't want to "average"
> with a dummy value.
>
>>
>> Thanks
>> Etienne
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From gdal at stripfamily.net  Tue Nov 20 18:17:32 2012
From: gdal at stripfamily.net (David Strip)
Date: Tue, 20 Nov 2012 19:17:32 -0700
Subject: [gdal-dev] The GeoTransform Array
Message-ID: <50AC39BC.6050108@stripfamily.net>

The GDAL API tutorial describes this array as:

     adfGeoTransform[0]/* top left x */
     adfGeoTransform[1]/* w-e pixel resolution */
     adfGeoTransform[2]/* rotation, 0 if image is "north up" */
     adfGeoTransform[3]/* top left y */
     adfGeoTransform[4]/* rotation, 0 if image is "north up" */
     adfGeoTransform[5]/* n-s pixel resolution */

The GDAL Data model page says
     Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
     Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)
where the GT[i]are the coeffs described above.

 From this I conclude that the rotations are not sin/cos of the rotation, but rather the sin/cos times the
appropriate pixel size. Is that right, or did I miss something?



From refriguy68 at yahoo.com  Wed Nov 21 01:49:05 2012
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Wed, 21 Nov 2012 01:49:05 -0800 (PST)
Subject: [gdal-dev] GeoPDF Writing support using Create()?
Message-ID: <1353491345.16843.YahooMailNeo@web121904.mail.ne1.yahoo.com>

GDAL Community (Especially Even Rouault),

It has been around 1 1/2 years the last time I had used GDAL and noticed GDAL now has capabilities of generating Geospatial PDF files from existing GDALDataset objects. ?How far in the future do you see GDAL having capabilities of using Create() to generate your own Geospaital PDF? ?

I would like to have the freedom of providing GDAL all the required, and optional, information needed to generate a Geospatial PDF file from a given image buffer my application possesses. ?I am not sure if any other GDAL community members concur with my desire.?

What would be the effort level to supply Create() for Geospatial PDF files?

Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121121/be8af67b/attachment-0001.html>

From even.rouault at mines-paris.org  Wed Nov 21 04:06:11 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 21 Nov 2012 13:06:11 +0100
Subject: [gdal-dev] The GeoTransform Array
In-Reply-To: <50AC39BC.6050108@stripfamily.net>
References: <50AC39BC.6050108@stripfamily.net>
Message-ID: <1353499571.50acc3b34011a@imp.free.fr>

Selon David Strip <gdal at stripfamily.net>:

> The GDAL API tutorial describes this array as:
>
>      adfGeoTransform[0]/* top left x */
>      adfGeoTransform[1]/* w-e pixel resolution */
>      adfGeoTransform[2]/* rotation, 0 if image is "north up" */
>      adfGeoTransform[3]/* top left y */
>      adfGeoTransform[4]/* rotation, 0 if image is "north up" */
>      adfGeoTransform[5]/* n-s pixel resolution */
>
> The GDAL Data model page says
>      Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>      Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)
> where the GT[i]are the coeffs described above.
>
>  From this I conclude that the rotations are not sin/cos of the rotation, but
> rather the sin/cos times the
> appropriate pixel size. Is that right, or did I miss something?

Yes, for a pure rotation. If the [1], [2], [4] and [5] have no particular
relation, the matrix can represent a combination of scaling, rotation and
shearing. See http://en.wikipedia.org/wiki/Transformation_matrix

>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From even.rouault at mines-paris.org  Wed Nov 21 04:11:44 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 21 Nov 2012 13:11:44 +0100
Subject: [gdal-dev] GeoPDF Writing support using Create()?
In-Reply-To: <1353491345.16843.YahooMailNeo@web121904.mail.ne1.yahoo.com>
References: <1353491345.16843.YahooMailNeo@web121904.mail.ne1.yahoo.com>
Message-ID: <1353499904.50acc5001fc51@imp.free.fr>

Selon Robert Zermeno <refriguy68 at yahoo.com>:

> GDAL Community (Especially Even Rouault),
>
> It has been around 1 1/2 years the last time I had used GDAL and noticed GDAL
> now has capabilities of generating Geospatial PDF files from existing
> GDALDataset objects.  How far in the future do you see GDAL having
> capabilities of using Create() to generate your own Geospaital PDF?
>
> I would like to have the freedom of providing GDAL all the required, and
> optional, information needed to generate a Geospatial PDF file from a given
> image buffer my application possesses.  I am not sure if any other GDAL
> community members concur with my desire.
>
> What would be the effort level to supply Create() for Geospatial PDF files?

Implementing Create(), with the capability of random writing (for example like
being needed by gdalwarp or nearblack), is not doable due to the nature of PDF.
But as CreateCopy() is already implemented, you can for example create a
in-memory raster (see the MEM driver) and CreateCopy() it into a geospatial PDF.

>
> Robert






From mateusz at loskot.net  Wed Nov 21 04:32:27 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 21 Nov 2012 12:32:27 +0000
Subject: [gdal-dev] The GeoTransform Array
In-Reply-To: <1353499571.50acc3b34011a@imp.free.fr>
References: <50AC39BC.6050108@stripfamily.net>
	<1353499571.50acc3b34011a@imp.free.fr>
Message-ID: <CABUeae829rmQLzqtg6pLPW-84yMJrhakP7tN70e_Vnu3kG+Q-g@mail.gmail.com>

On 21 November 2012 12:06, Even Rouault <even.rouault at mines-paris.org> wrote:
> Selon David Strip <gdal at stripfamily.net>:
>
>> The GDAL API tutorial describes this array as:
>>
>>      adfGeoTransform[0]/* top left x */
>>      adfGeoTransform[1]/* w-e pixel resolution */
>>      adfGeoTransform[2]/* rotation, 0 if image is "north up" */
>>      adfGeoTransform[3]/* top left y */
>>      adfGeoTransform[4]/* rotation, 0 if image is "north up" */
>>      adfGeoTransform[5]/* n-s pixel resolution */
>>
>> The GDAL Data model page says
>>      Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)
>>      Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)
>> where the GT[i]are the coeffs described above.
>>
>>  From this I conclude that the rotations are not sin/cos of the rotation, but
>> rather the sin/cos times the
>> appropriate pixel size. Is that right, or did I miss something?
>
> Yes, for a pure rotation. If the [1], [2], [4] and [5] have no particular
> relation, the matrix can represent a combination of scaling, rotation and
> shearing. See http://en.wikipedia.org/wiki/Transformation_matrix

Isaac's "Improving the Documentation of Get/SetGeoTransform" post is
worth checking too:

http://lists.osgeo.org/pipermail/gdal-dev/2011-July/029449.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From refriguy68 at yahoo.com  Wed Nov 21 05:36:11 2012
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Wed, 21 Nov 2012 05:36:11 -0800 (PST)
Subject: [gdal-dev] GeoPDF Writing support using Create()?
In-Reply-To: <1353499904.50acc5001fc51@imp.free.fr>
References: <1353491345.16843.YahooMailNeo@web121904.mail.ne1.yahoo.com>
	<1353499904.50acc5001fc51@imp.free.fr>
Message-ID: <1353504971.66894.YahooMailNeo@web121902.mail.ne1.yahoo.com>

Even,

>But as CreateCopy() is already implemented, you can for example create a
>in-memory raster (see the MEM driver) and CreateCopy() it into a geospatial PDF.


Awesome!? I did not know of the MEM driver.? Looking at the specs from http://www.gdal.org/frmt_mem.html? it kind of reminds me of
GDAL virtual format (.vrt) as I think it uses the MEM driver under the hood.

So, essentially you are telling me I can create a MEM object and store my image band information to the recently created GDALDatasetH object (I use the C API) and
to set PDF metadata via GDALSetMetadata().? Would that be the direction I could go to use CreateCopy() for a valid Geospatial PDF file?

I do have a few questions on PDF creation fields:

1. If a neatline is not provided, what gets populated in the neatline?

2. For EXTRA_CONTENT_STREAM and EXTRA_IMAGES, are we limited to one entry?? Is it each time we call GDALSetMetadata() is will append another
entry request?

Correct me if I am wrong, but EXTRA_CONTENT_STREAM is associated by EXTRA_IMAGES where EXTRA_IMAGES tells the PDF file where on the page to
display the EXTRA_CONTENT_STREAM data?
My concern is how to add multiple entries of EXTRA_CONTENT_STREAM??? I know the content stream is described by its information and EXTRA_IMAGES and EXTRA_CONTENT_LAYER_NAME.


I hope you understand my thoughts.? 


Thanks for the response,

Robert




________________________________
 From: Even Rouault <even.rouault at mines-paris.org>
To: Robert Zermeno <refriguy68 at yahoo.com> 
Cc: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org> 
Sent: Wednesday, November 21, 2012 4:11 AM
Subject: Re: [gdal-dev] GeoPDF Writing support using Create()?
 
Selon Robert Zermeno <refriguy68 at yahoo.com>:

> GDAL Community (Especially Even Rouault),
>
> It has been around 1 1/2 years the last time I had used GDAL and noticed GDAL
> now has capabilities of generating Geospatial PDF files from existing
> GDALDataset objects.? How far in the future do you see GDAL having
> capabilities of using Create() to generate your own Geospaital PDF?
>
> I would like to have the freedom of providing GDAL all the required, and
> optional, information needed to generate a Geospatial PDF file from a given
> image buffer my application possesses.? I am not sure if any other GDAL
> community members concur with my desire.
>
> What would be the effort level to supply Create() for Geospatial PDF files?

Implementing Create(), with the capability of random writing (for example like
being needed by gdalwarp or nearblack), is not doable due to the nature of PDF.
But as CreateCopy() is already implemented, you can for example create a
in-memory raster (see the MEM driver) and CreateCopy() it into a geospatial PDF.

>
> Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121121/c02a843f/attachment.html>

From tobias at lohner-net.de  Wed Nov 21 09:46:59 2012
From: tobias at lohner-net.de (Tobias Lohner)
Date: Wed, 21 Nov 2012 18:46:59 +0100
Subject: [gdal-dev] Georeferencing and reprojecting geostationary images
Message-ID: <1353520019.4309.19.camel@lohner-tn>

Hi List,

I'd like to reproject EUMETSAT EView (geostationary weather satellite)
images to EPSG:3857 (aka web mercator), but I only got jpeg files
without any georeference.

I tried to add several (up to 16 more or less) equally distributed
ground control points to the image using gdal_transform and warping the
result with gdalwarp:

# add gcps
gdal_translate -gcp x y lon lat [...] image.jpg output.tiff
# convert the image to EPSG:3857
gdalwarp -t_srs EPSG:3857 output.tiff output_3857.tiff

Using third order warping or the thin plate transformer produces a
reprojected image which doesn't fit to the target coordinate system,
especially the corners are off by 0.1 to 0.3 degrees.

Is it possible to tell gdal that the source images are in geostationary
satellite view (geos projection) for reprojecting them?


Tobias Lohner


From ivan.lucena at princeton-ma.us  Wed Nov 21 10:53:14 2012
From: ivan.lucena at princeton-ma.us (Ivan Lucena)
Date: Wed, 21 Nov 2012 13:53:14 -0500
Subject: [gdal-dev] Problem compiling gdal with OCI support,
 configure doesn't seem to know where to look
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB2330B43E66B@COMAIL01.digitalglobe.com>
References: <1353028471893-5016804.post@n6.nabble.com>
	<8B319E5A30FF4A48BE7EEAAF609DB2330B43E66B@COMAIL01.digitalglobe.com>
Message-ID: <50AD231A.4040500@princeton-ma.us>

There was a similar discussion on OTN:

https://forums.oracle.com/forums/thread.jspa?messageID=4570333

I hope that would help you.

On 11/19/12 6:42 PM, Ethan Alpert wrote:
> You sure your oracle client libs are installed correctly? It's strange
> that oci.h would be in the top level directory.
>
> --with-oci=/dg/local/apps/osgeo_pack/deployed/linux-x86_64/product/11gCl
> ient/
> --with-oci-include=/dg/local/apps/osgeo_pack/deployed/linux-x86_64/produ
> ct/11gClient/rdbms/public/
> --with-oci-lib=/dg/local/apps/osgeo_pack/deployed/linux-x86_64/product/1
> 1gClient/lib/
>
> That's what I used for gdal 1.8.1.
> /dg/local/apps/osgeo_pack/deployed/linux-x86_64 is my system deployed
> path.
>
> -ethan
>
> -----Original Message-----
> From: gdal-dev-bounces at lists.osgeo.org
> [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of cheesybiscuits
> Sent: Thursday, November 15, 2012 6:15 PM
> To: gdal-dev at lists.osgeo.org
> Subject: [gdal-dev] Problem compiling gdal with OCI support, configure
> doesn't seem to know where to look
>
> First of all sorry for posing a question that has been asked a thousand
> times before. I did a lot of research but didn't find this specific
> problem.
>
> I have Linux Mint (Ubuntu) with Oracle instant client basic and SDK
> (11.2) installed from .deb (via Alien). $ORACLE_HOME is set
> (/usr/lib/oracle/11.2/client) and contains bin, lib, and a symlink to
> include (/usr/include/oracle/11.2/client). I'm not a total linux n00b
> but I don't usually compile anything from source.
>
> I installed the Oracle software using the instructions  here
> <https://help.ubuntu.com/community/Oracle%20Instant%20Client>
>
> Running 'locate oci.h' shows
>
> /home/tom/Downloads/gdal/gdal-1.9.2/ogr/ogrsf_frmts/oci/drv_oci.html
> /home/tom/Downloads/gdal/gdal-1.9.2/ogr/ogrsf_frmts/oci/ogr_oci.h
> /usr/include/oracle/11.2/client/oci.h
>
> As you can see I'm trying to compile 1.9.2 Stable.
>
> No matter what I pass with the ./configure command, config.log always
> reports
> "configure:22485: checking for Oracle OCI headers in " - with nothing
> after "in" - as if it doesn't know where the header is supposed to be,
> and then
> "conftest.cpp:64:29: fatal error: oci.h: No such file or directory"
>
> These are the arguments I've tried
>
> ./configure --with-oci
> ./configure --with-oci-include='/usr/include/oracle/11.2/client'
> ./configure --with-oci=/usr/lib/oracle/11.2/client/include
> ./configure --with-oci=$ORACLE_HOME
>
> I even tried copying the contents of /usr/lib/oracle/11.2/client/include
> to the gdal source directory, but I'm not sure what I thought this would
> accomplish.
>
> Can anyone suggest where I could go next? Any thoughts much appreciated.
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Problem-compiling-gdal-with-OCI-supp
> ort-configure-doesn-t-seem-to-know-where-to-look-tp5016804.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> This electronic communication and any attachments may contain confidential and proprietary
> information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee
> responsible for delivering this communication to the intended recipient, or if you have received
> this communication in error, please do not print, copy, retransmit, disseminate or
> otherwise use the information. Please indicate to the sender that you have received this
> communication in error, and delete the copy you received. DigitalGlobe reserves the
> right to monitor any electronic communication sent or received by its employees, agents
> or representatives.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From saarko at alaska.edu  Wed Nov 21 10:56:31 2012
From: saarko at alaska.edu (Scott Arko)
Date: Wed, 21 Nov 2012 09:56:31 -0900
Subject: [gdal-dev] Reading DNG files with GDAL
Message-ID: <CAFCnYQPvbSb6P4PvCMCwjtJ13hMk1w_TE3nV_DQH2foLU4_8OA@mail.gmail.com>

Hello,


I have run into a strange issue that I haven't been able to sort out.  I
have a number of digital negative (.dng) files collected by an Aeryon Scout
UAV.  They are three band images with the bands being UInt16.  However,
when I read these images with the python gdal binding, they read as Byte
bands and half resolution.  When I use gdalinfo I get something like:

Driver: GTiff/GeoTIFF
Files: 2012-11-06-flight_005-012.dng
Size is 1296, 972
Coordinate System is `'
Metadata:
  TIFFTAG_DATETIME=2012:11:06 16:24:42
  TIFFTAG_SOFTWARE=Aeryon_Scout_DNG
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  972.0)
Upper Right ( 1296.0,    0.0)
Lower Right ( 1296.0,  972.0)
Center      (  648.0,  486.0)
Band 1 Block=1296x2 Type=Byte, ColorInterp=Red
Band 2 Block=1296x2 Type=Byte, ColorInterp=Green
Band 3 Block=1296x2 Type=Byte, ColorInterp=Blue

In reality, the data are 2592X1944 and the bands are UInt16.  I can read
the files with ufraw and they read fine.  Interestingly, Python Imaging
Library (PIL) also reads them like gdal.

Running gdal 1.9.0 on a MBP with Snow Leopard

Would appreciate any thoughts folks might have.


Thanks,

-- 
Scott Arko
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121121/c6633065/attachment.html>

From even.rouault at mines-paris.org  Wed Nov 21 11:07:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 21 Nov 2012 20:07:22 +0100
Subject: [gdal-dev] GeoPDF Writing support using Create()?
In-Reply-To: <1353504971.66894.YahooMailNeo@web121902.mail.ne1.yahoo.com>
References: <1353491345.16843.YahooMailNeo@web121904.mail.ne1.yahoo.com>
	<1353499904.50acc5001fc51@imp.free.fr>
	<1353504971.66894.YahooMailNeo@web121902.mail.ne1.yahoo.com>
Message-ID: <201211212007.22252.even.rouault@mines-paris.org>

> it kind of reminds me of GDAL virtual
> format (.vrt) as I think it uses the MEM driver under the hood.

Not really, but the inner working of the drivers isn't very important from the 
user point of view.

> 
> So, essentially you are telling me I can create a MEM object and store my
> image band information to the recently created GDALDatasetH object (I use
> the C API) and to set PDF metadata via GDALSetMetadata().

Yes, and with GDALSetGeoTransform() and GDALSetProjectionRef()

> Would that be
> the direction I could go to use CreateCopy() for a valid Geospatial PDF
> file?

Yes

> 
> I do have a few questions on PDF creation fields:
> 
> 1. If a neatline is not provided, what gets populated in the neatline?

the outline of the raster.

> 
> 2. For EXTRA_CONTENT_STREAM and EXTRA_IMAGES, are we limited to one entry? 

(I've just realized that the doc was not up-to-date, correction committed, 
website should be refreshed in a few hours. The name of the option is 
EXTRA_STREAM)

- EXTRA_STREAM : yes limited to one entry, but can be complex PDF language
- EXTRA_IMAGES : as indicated in the doc, you can provide a list of images as 
the value

> Is it each time we call GDALSetMetadata() is will append another entry
> request?

No, GDALSetMetadata() replaces the existing metadata with the whole list of 
key=value strings provided. But you cannot have several entries with the same 
key in the list.

> 
> Correct me if I am wrong, but EXTRA_CONTENT_STREAM is associated by
> EXTRA_IMAGES where EXTRA_IMAGES tells the PDF file where on the page to
> display the EXTRA_CONTENT_STREAM data?

No, the options are independant. EXTRA_STREAM is a very advanced one. You must 
study the PDF language from the specification or other sources to be able to 
use it.

EXTRA_IMAGES is must simpler to use (but more limited).

> My concern is how to add multiple entries of EXTRA_CONTENT_STREAM?   I know
> the content stream is described by its information and EXTRA_IMAGES and
> EXTRA_CONTENT_LAYER_NAME.

Already answered by above answers. The best if that you try it. You can also 
have a look at 
http://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers/pdf.py, and in 
particular pdf_custom_layout()


From even.rouault at mines-paris.org  Wed Nov 21 11:11:58 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 21 Nov 2012 20:11:58 +0100
Subject: [gdal-dev] Georeferencing and reprojecting geostationary images
In-Reply-To: <1353520019.4309.19.camel@lohner-tn>
References: <1353520019.4309.19.camel@lohner-tn>
Message-ID: <201211212011.58719.even.rouault@mines-paris.org>

Le mercredi 21 novembre 2012 18:46:59, Tobias Lohner a ?crit :
> Hi List,
> 
> I'd like to reproject EUMETSAT EView (geostationary weather satellite)
> images to EPSG:3857 (aka web mercator), but I only got jpeg files
> without any georeference.
> 
> I tried to add several (up to 16 more or less) equally distributed
> ground control points to the image using gdal_transform and warping the
> result with gdalwarp:
> 
> # add gcps
> gdal_translate -gcp x y lon lat [...] image.jpg output.tiff
> # convert the image to EPSG:3857
> gdalwarp -t_srs EPSG:3857 output.tiff output_3857.tiff
> 
> Using third order warping or the thin plate transformer produces a
> reprojected image which doesn't fit to the target coordinate system,
> especially the corners are off by 0.1 to 0.3 degrees.
> 
> Is it possible to tell gdal that the source images are in geostationary
> satellite view (geos projection) for reprojecting them?

You can add -a_srs "+proj=geos [...]" on the gdal_translate command line (or -
s_srs on gdalwarp) if the GCP you specify are in coordinates compatible with 
the geos projection. In your example if you specify lon,lat, you'd likely want 
to use EPSG:4326.

The third order warping is known to suffer from numerical instability. Perhaps 
try second order with -order 2. The TPS warper should have a perfect fit on the 
GCPs

> 
> 
> Tobias Lohner
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Wed Nov 21 11:22:40 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 21 Nov 2012 20:22:40 +0100
Subject: [gdal-dev] Reading DNG files with GDAL
In-Reply-To: <CAFCnYQPvbSb6P4PvCMCwjtJ13hMk1w_TE3nV_DQH2foLU4_8OA@mail.gmail.com>
References: <CAFCnYQPvbSb6P4PvCMCwjtJ13hMk1w_TE3nV_DQH2foLU4_8OA@mail.gmail.com>
Message-ID: <201211212022.40736.even.rouault@mines-paris.org>

Le mercredi 21 novembre 2012 19:56:31, Scott Arko a ?crit :
> Hello,
> 
> 
> I have run into a strange issue that I haven't been able to sort out.  I
> have a number of digital negative (.dng) files collected by an Aeryon Scout
> UAV.  They are three band images with the bands being UInt16.  However,
> when I read these images with the python gdal binding, they read as Byte
> bands and half resolution.  When I use gdalinfo I get something like:
> 
> Driver: GTiff/GeoTIFF
> Files: 2012-11-06-flight_005-012.dng
> Size is 1296, 972
> Coordinate System is `'
> Metadata:
>   TIFFTAG_DATETIME=2012:11:06 16:24:42
>   TIFFTAG_SOFTWARE=Aeryon_Scout_DNG
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  972.0)
> Upper Right ( 1296.0,    0.0)
> Lower Right ( 1296.0,  972.0)
> Center      (  648.0,  486.0)
> Band 1 Block=1296x2 Type=Byte, ColorInterp=Red
> Band 2 Block=1296x2 Type=Byte, ColorInterp=Green
> Band 3 Block=1296x2 Type=Byte, ColorInterp=Blue
> 
> In reality, the data are 2592X1944 and the bands are UInt16.  I can read
> the files with ufraw and they read fine.  Interestingly, Python Imaging
> Library (PIL) also reads them like gdal.
> 
> Running gdal 1.9.0 on a MBP with Snow Leopard
> 
> Would appreciate any thoughts folks might have.

I'm not a specialist of DNG files but I somehow remember that they are a kind 
of "weird"/unusual TIFF Files. It might be possible that GDAL (or probably 
libtiff) has found a overview instead of the full resolution imagery. Perhaps 
you could provide a sample for examination.


> 
> 
> Thanks,

From refriguy68 at yahoo.com  Wed Nov 21 11:49:28 2012
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Wed, 21 Nov 2012 11:49:28 -0800 (PST)
Subject: [gdal-dev] GDALCreateCopy from MEM Driver
Message-ID: <1353527368.57509.YahooMailNeo@web121905.mail.ne1.yahoo.com>

GDAL community,
?
Is is plausible to contain a RGB image array (as pixel interleaved, rgbrgbrgbrgb) in a single?MEMRasterBand to?generate a?color file via GDALCreateCopy()?
My application?performs the following sequence:
?
1. Read a color image into an image buffer in pixel interleaved (rgbrgbrgb) format.
2. Setup MEM Driver to contain the recently read in image from step 1 above via AddBand().
3. Call GDALCreateCopy() on the specific output of my desire.
?
I have a question on Step 2 above (AddBand()).? Do I have to create 3 seperate bands to contain individual color component?? That would mean I have to take my RGB image buffer and seperate it into three new arrays of size (imageWidth * imageHeight) and call AddBands() on each one.
?
I am trying to adviod that step as I find it as an extra step.? However, I understand if I have to because for a given color image GDAL always represents the file with 3 or 4 bands.? 
?
My answer is I will probably have to.? My application can write out a valid file, but the resulting file is in Greyscale.
?
Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121121/ead11137/attachment.html>

From even.rouault at mines-paris.org  Wed Nov 21 11:56:01 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 21 Nov 2012 20:56:01 +0100
Subject: [gdal-dev] GDALCreateCopy from MEM Driver
In-Reply-To: <1353527368.57509.YahooMailNeo@web121905.mail.ne1.yahoo.com>
References: <1353527368.57509.YahooMailNeo@web121905.mail.ne1.yahoo.com>
Message-ID: <201211212056.01662.even.rouault@mines-paris.org>

Le mercredi 21 novembre 2012 20:49:28, Robert Zermeno a ?crit :
> GDAL community,
>  
> Is is plausible to contain a RGB image array (as pixel interleaved,
> rgbrgbrgbrgb) in a single MEMRasterBand to generate a color file via
> GDALCreateCopy()? My application performs the following sequence:
>  
> 1. Read a color image into an image buffer in pixel interleaved (rgbrgbrgb)
> format. 2. Setup MEM Driver to contain the recently read in image from
> step 1 above via AddBand(). 3. Call GDALCreateCopy() on the specific
> output of my desire.
>  
> I have a question on Step 2 above (AddBand()).  Do I have to create 3
> seperate bands to contain individual color component?  That would mean I
> have to take my RGB image buffer and seperate it into three new arrays of
> size (imageWidth * imageHeight) and call AddBands() on each one. 

You need to call AddBand() 3 times for a RGB image, but you can use a single 
RGB image array. You just have to set PIXELOFFSET=3. See 
http://gdal.org/frmt_mem.html.

From gdal at flamingbear.com  Wed Nov 21 12:13:38 2012
From: gdal at flamingbear.com (Matt Savoie)
Date: Wed, 21 Nov 2012 13:13:38 -0700
Subject: [gdal-dev] Having problems with gdalwarp utility
Message-ID: <CAHk0QhPd2cOAE0An30RsvxK3V35hjYE+8QAR-9o950GZWKpSkw@mail.gmail.com>

Hi all,

I posted my problem to the gis.stackexchange, but it was suggested to me
that maybe I should post it here as well.  I hope that's ok.

the link to the well formatted question is here:
http://gis.stackexchange.com/questions/41431/bug-in-gdalwarps-simple-nearest-neighbor-or-more-likely-i-need-some-help

Basically, I'm having a hard time understanding the results I'm getting
from gdalwarp.  It seems to be selecting the wrong nearest neighbor.

Please let me know what else I can provide to help.

Thanks
Matt Savoie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121121/ae296adb/attachment.html>

From gdal at stripfamily.net  Wed Nov 21 12:50:56 2012
From: gdal at stripfamily.net (David Strip)
Date: Wed, 21 Nov 2012 13:50:56 -0700
Subject: [gdal-dev] The GeoTransform Array
In-Reply-To: <CABUeae829rmQLzqtg6pLPW-84yMJrhakP7tN70e_Vnu3kG+Q-g@mail.gmail.com>
References: <50AC39BC.6050108@stripfamily.net>
	<1353499571.50acc3b34011a@imp.free.fr>
	<CABUeae829rmQLzqtg6pLPW-84yMJrhakP7tN70e_Vnu3kG+Q-g@mail.gmail.com>
Message-ID: <50AD3EB0.4000400@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121121/0ea24165/attachment.html>

From fred.dss at free.fr  Wed Nov 21 21:05:29 2012
From: fred.dss at free.fr (fred.dss)
Date: Wed, 21 Nov 2012 21:05:29 -0800 (PST)
Subject: [gdal-dev] GDALINFO cannot pipe to text file
In-Reply-To: <1283473678158-5493418.post@n2.nabble.com>
References: <1283473678158-5493418.post@n2.nabble.com>
Message-ID: <1353560729389-5018053.post@n6.nabble.com>

Hi,

Same problem for me. I try to use gdalinfo.exe to read metadata from .tif
images. Here's an example for shell command :

C:\gdalinfo.exe test.tif>test.txt

Everything works very well on windows xp pro 32 bits but with on windows
seven 64 bits, the result file text.txt is empty.

What's solution ?

Thanks



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/GDALINFO-cannot-pipe-to-text-file-tp3747928p5018053.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Thu Nov 22 02:21:08 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 22 Nov 2012 10:21:08 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Anchor_point_in_PDF_EXTRA=5FIMAGES?=
Message-ID: <loom.20121122T104751-978@post.gmane.org>

Hi,

In the PDF creation option parameter EXTRA_IMAGES=image_file_name,x,y,scale the
anchor point (x,y) is in the lower left corner of the resulting PDF file.
However, the anchor point of the extra images to be added seems to be in the
upper left corner. If someone tries to use this parameter as
EXTRA_IMAGES=logo.png,1,1,1 the top left pixel of logo.png will be placed at the
lower lext pixel of the PDF file. Thus the logo.png will never come into PDF
because it is draws totally below the PDF print area.

Could it be possible to make EXTRA_IMAGES and the actual images to understand
anchor points in a similar way? Either so that
EXTRA_IMAGES=image_file_name,x,y,scale takes also the top left coordinates, or
if it continues to use lower left anchor point then the PDF driver is placing
the lower left pixel of the extra image to that place.

The curret behaviour is somewhat surprising. At minimum the document page should
mention this somehow, for example as

"Notice, that x and y are in user units from the lower left corner of the page.
Use some reasonably high value for y or otherwise the extra image will slide out
of the PDF page".


-Jukka Rahkonen-



From sazonov at scanex.ru  Thu Nov 22 02:59:01 2012
From: sazonov at scanex.ru (DmitriyS)
Date: Thu, 22 Nov 2012 02:59:01 -0800 (PST)
Subject: [gdal-dev] gdalwarp and mosaic
Message-ID: <1353581941503-5018130.post@n6.nabble.com>

Hello, dear developpers. I have one question. I wish to create mosaic image
by the next way. In my output folder threre are two images. the first image
is a mosaic image, and it is created by the command:
gdalwarp.exe -of GTiff -s_srs "+proj=utm +ellps=WGS84 +zone=31 +units=m" 
"E:\bug\mosiac\image_1.tif" -overwrite "E:\bug\mosiac\merge.tif" 

Then I have to append the second image (without overwriting) to the first
one (merge.tif) using next command:
gdalwarp.exe -"E:\bug\mosiac\image_2.tif" "E:\bug\mosiac\merge.tif".
The output window tells that's ok, merge.tif is done,  and does not signal
any mistakes. However as result image_2.tif is not appended, merge.tif has
no changes after this command execution.
Can you say what I should do to append an image to existing image(file)?
Best regards, Dmitriy.
 



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdalwarp-and-mosaic-tp5018130.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Thu Nov 22 03:41:07 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 22 Nov 2012 12:41:07 +0100
Subject: [gdal-dev] gdalwarp and mosaic
In-Reply-To: <1353581941503-5018130.post@n6.nabble.com>
References: <1353581941503-5018130.post@n6.nabble.com>
Message-ID: <1353584467.50ae0f5310ca3@imp.free.fr>

Selon DmitriyS <sazonov at scanex.ru>:

> Hello, dear developpers. I have one question. I wish to create mosaic image
> by the next way. In my output folder threre are two images. the first image
> is a mosaic image, and it is created by the command:
> gdalwarp.exe -of GTiff -s_srs "+proj=utm +ellps=WGS84 +zone=31 +units=m"
> "E:\bug\mosiac\image_1.tif" -overwrite "E:\bug\mosiac\merge.tif"
>
> Then I have to append the second image (without overwriting) to the first
> one (merge.tif) using next command:
> gdalwarp.exe -"E:\bug\mosiac\image_2.tif" "E:\bug\mosiac\merge.tif".
> The output window tells that's ok, merge.tif is done,  and does not signal
> any mistakes. However as result image_2.tif is not appended, merge.tif has
> no changes after this command execution.
> Can you say what I should do to append an image to existing image(file)?

To merge several images into a single one, you must provide all the source
images at the same time on the gdalwarp command line, so it can compute the
overall extent and allocate the appropriate raster dimensions.

If you do later invocations of gdalwarp on an existing target datasource, its
original extent and dimensions will be unmodified. So this will be in fact a
combined merge and clip operation.

From jukka.rahkonen at mmmtike.fi  Thu Nov 22 04:05:52 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 22 Nov 2012 12:05:52 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Syntax_for_PDF_CREATION=5FDATE?=
Message-ID: <loom.20121122T124934-700@post.gmane.org>

Hi,

I was experimenting with the PDF metadata items
AUTHOR, CREATOR, CREATION_DATE, KEYWORDS, PRODUCER, SUBJECT, TITLE

All the others get visible in Acrobat Reader X except CREATION_DATE.
I have tried to use it as
 -co CREATION_DATE=2012-11-22 and -co CREATION_DATE="2012-11-22" 
and also -co CREATION_DATE="2012-11-22T09:47:44"

Is there somethign wrong with the syntax?

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Thu Nov 22 04:32:46 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 22 Nov 2012 13:32:46 +0100
Subject: [gdal-dev] Syntax for PDF CREATION_DATE
In-Reply-To: <loom.20121122T124934-700@post.gmane.org>
References: <loom.20121122T124934-700@post.gmane.org>
Message-ID: <1353587566.50ae1b6ea5e78@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Hi,
>
> I was experimenting with the PDF metadata items
> AUTHOR, CREATOR, CREATION_DATE, KEYWORDS, PRODUCER, SUBJECT, TITLE
>
> All the others get visible in Acrobat Reader X except CREATION_DATE.
> I have tried to use it as
>  -co CREATION_DATE=2012-11-22 and -co CREATION_DATE="2012-11-22"
> and also -co CREATION_DATE="2012-11-22T09:47:44"
>
> Is there somethign wrong with the syntax?

See ?3.8.3 (page 160 of
http://www.adobe.com/devnet/acrobat/pdfs/pdf_reference_1-7.pdf ) for the formal
syntax.

If you prefere examples, for 22 nov 2012 13:24:47 GMT+01 :

D:20121122132447+01'00'

>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From jukka.rahkonen at mmmtike.fi  Thu Nov 22 05:18:16 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 22 Nov 2012 13:18:16 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Syntax_for_PDF_CREATION=5FDATE?=
References: <loom.20121122T124934-700@post.gmane.org>
	<1353587566.50ae1b6ea5e78@imp.free.fr>
Message-ID: <loom.20121122T141316-57@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> If you prefere examples, for 22 nov 2012 13:24:47 GMT+01 :
> 
> D:20121122132447+01'00'

Oh dear. I have updated my tutorial to include also examples about how to use
and what is the effect of
-co LAYER_NAME
-co EXTRA_IMAGES
-co EXTRA_LAYER_NAME
-co AUTHOR
-co CREATOR
-co CREATION_DATE
-co KEYWORDS
-co PRODUCER
-co SUBJECT
-co TITLE 

http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf


-Jukka-


From alisson.uece at gmail.com  Thu Nov 22 05:29:54 2012
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Thu, 22 Nov 2012 10:29:54 -0300
Subject: [gdal-dev] gdalwarp - Clip raster using mask
Message-ID: <CALwK9YwmLfBNnDi7Sh_CF+ysFROvBw3Ka_=eukNj1+Y8Auk_Xg@mail.gmail.com>

Hi friends,

By using gdalwarp to clip a raster with a mask (shape), I get a new raster
of smaller size, which is the boundary of the polygon shape (mask).
However, the pixels do not pass the polygon. I would like to pass the
pixels just a little of the polygon mask.

For clarity, I send two pictures of what I desire and not desire:
http://postimage.org/image/hlrc3911z/
http://postimage.org/image/4vn3q5t3r/

The used command is: gdalwarp -dstnodata 0 -q -cutline
C:/Users/Hugo/Final.shp -crop_to_cutline -of GTiff
C:/Users/Hugo/Elevation-DEM-CLIPPED.img
C:/Users/Hugo/Elevation-DEM-CLIPPED.img

Can you help me?

Best Regards,
-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121122/d08cf545/attachment-0001.html>

From hbobenicio at gmail.com  Thu Nov 22 05:36:18 2012
From: hbobenicio at gmail.com (Hugo Benicio)
Date: Thu, 22 Nov 2012 10:36:18 -0300
Subject: [gdal-dev] IRC channel?
Message-ID: <CAKGFd-xee0+C0Pm0=cdDScsizSXN2wcLUWhG=amHUvtfFynKGA@mail.gmail.com>

Is there an IRC channel for this group (gdal dev) or any other channel for
chatting with other gdal developers?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121122/07a66517/attachment.html>

From nhv at cape.com  Thu Nov 22 05:43:59 2012
From: nhv at cape.com (Norman Vine)
Date: Thu, 22 Nov 2012 08:43:59 -0500
Subject: [gdal-dev] IRC channel?
In-Reply-To: <CAKGFd-xee0+C0Pm0=cdDScsizSXN2wcLUWhG=amHUvtfFynKGA@mail.gmail.com>
References: <CAKGFd-xee0+C0Pm0=cdDScsizSXN2wcLUWhG=amHUvtfFynKGA@mail.gmail.com>
Message-ID: <E59D8287-138A-4A43-8BAB-A3448D0D603A@cape.com>

on freenode   gdal

 	 ircs://freenode/gdal


On Nov 22, 2012, at 8:36 AM, Hugo Benicio <hbobenicio at gmail.com> wrote:

> Is there an IRC channel for this group (gdal dev) or any other channel for chatting with other gdal developers? _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121122/816945f8/attachment.html>

From hbobenicio at gmail.com  Thu Nov 22 05:53:34 2012
From: hbobenicio at gmail.com (Hugo Benicio)
Date: Thu, 22 Nov 2012 10:53:34 -0300
Subject: [gdal-dev] IRC channel?
In-Reply-To: <5787308.fhLZkrQbJs@tatras>
References: <CAKGFd-xee0+C0Pm0=cdDScsizSXN2wcLUWhG=amHUvtfFynKGA@mail.gmail.com>
	<5787308.fhLZkrQbJs@tatras>
Message-ID: <CAKGFd-xXtTtWnh29zAAmLYNZmAogQUktMGzFZZHUQXSdST_C2A@mail.gmail.com>

Thanks for your quick replies! :)
(I totally missed this info on the http://gdal.org, sorry :P)


On Thu, Nov 22, 2012 at 10:51 AM, Yves Jacolin (Free) <yjacolin at free.fr>wrote:

> Hugo,
>
> Le jeudi 22 novembre 2012 10:36:18 Hugo Benicio a ?crit :
> > Is there an IRC channel for this group (gdal dev) or any other channel
> for
> > chatting with other gdal developers?
>
> See #gdal channel on freenode.
>
> Y.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121122/08d241b6/attachment.html>

From yjacolin at free.fr  Thu Nov 22 05:51:04 2012
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Thu, 22 Nov 2012 14:51:04 +0100
Subject: [gdal-dev] IRC channel?
In-Reply-To: <CAKGFd-xee0+C0Pm0=cdDScsizSXN2wcLUWhG=amHUvtfFynKGA@mail.gmail.com>
References: <CAKGFd-xee0+C0Pm0=cdDScsizSXN2wcLUWhG=amHUvtfFynKGA@mail.gmail.com>
Message-ID: <5787308.fhLZkrQbJs@tatras>

Hugo,

Le jeudi 22 novembre 2012 10:36:18 Hugo Benicio a ?crit :
> Is there an IRC channel for this group (gdal dev) or any other channel for
> chatting with other gdal developers?

See #gdal channel on freenode.

Y.

From jluis at ualg.pt  Thu Nov 22 06:02:02 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu, 22 Nov 2012 14:02:02 +0000
Subject: [gdal-dev] gdalwarp - Clip raster using mask
In-Reply-To: <CALwK9YwmLfBNnDi7Sh_CF+ysFROvBw3Ka_=eukNj1+Y8Auk_Xg@mail.gmail.com>
References: <CALwK9YwmLfBNnDi7Sh_CF+ysFROvBw3Ka_=eukNj1+Y8Auk_Xg@mail.gmail.com>
Message-ID: <50AE305A.8070405@ualg.pt>

Alisson,

It's not so easy to follow what is "desired" and "not-desired". For an 
excellent discussion of the details involved in such operations see

http://blogs.mathworks.com/steve/2006/12/22/poly2mask-and-roipoly-part-3/

As a solution for your 'wish-behavior'  case maybe what you can do is to 
previously expand your polygon with a buffer of half cell width.

Joaquim

> Hi friends,
>
> By using gdalwarp to clip a raster with a mask (shape), I get a new 
> raster of smaller size, which is the boundary of the polygon shape 
> (mask). However, the pixels do not pass the polygon. I would like to 
> pass the pixels just a little of the polygon mask.
>
> For clarity, I send two pictures of what I desire and not desire:
> http://postimage.org/image/hlrc3911z/
> http://postimage.org/image/4vn3q5t3r/
>
> The used command is: gdalwarp -dstnodata 0 -q -cutline 
> C:/Users/Hugo/Final.shp -crop_to_cutline -of GTiff 
> C:/Users/Hugo/Elevation-DEM-CLIPPED.img 
> C:/Users/Hugo/Elevation-DEM-CLIPPED.img
>
> Can you help me?
>
> Best Regards,
> -- 
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121122/619c6d83/attachment.html>

From p.halls at york.ac.uk  Thu Nov 22 06:15:30 2012
From: p.halls at york.ac.uk (Peter Halls)
Date: Thu, 22 Nov 2012 14:15:30 +0000
Subject: [gdal-dev] gdalwarp - Clip raster using mask
In-Reply-To: <50AE305A.8070405@ualg.pt>
References: <CALwK9YwmLfBNnDi7Sh_CF+ysFROvBw3Ka_=eukNj1+Y8Auk_Xg@mail.gmail.com>
	<50AE305A.8070405@ualg.pt>
Message-ID: <CADEnnOOWOULmfUika7KvWXmAeFGjoe4pH_c3eR6HCBzUN88x9g@mail.gmail.com>

Alisson,

    the advice I give my students in such a circumstance is to buffer the
boundary by either one half of the pixel size or by the pixel size.  This
has the effect of increasing the mask to include all cells along the
boundary and gain a closer equivalent of a vector clip.

    For another discussion of the issues, see Burrough, P.A., and
McDonnell, Rachael A., 1998, Principles of Geographic Information Systems,
Oxford: OUP.

Best wishes,

Peter

On 22 November 2012 14:02, Joaquim Luis <jluis at ualg.pt> wrote:

>  Alisson,
>
> It's not so easy to follow what is "desired" and "not-desired". For an
> excellent discussion of the details involved in such operations see
>
> http://blogs.mathworks.com/steve/2006/12/22/poly2mask-and-roipoly-part-3/
>
> As a solution for your 'wish-behavior'  case maybe what you can do is to
> previously expand your polygon with a buffer of half cell width.
>
> Joaquim
>
>  Hi friends,
>
> By using gdalwarp to clip a raster with a mask (shape), I get a new raster
> of smaller size, which is the boundary of the polygon shape (mask).
> However, the pixels do not pass the polygon. I would like to pass the
> pixels just a little of the polygon mask.
>
> For clarity, I send two pictures of what I desire and not desire:
> http://postimage.org/image/hlrc3911z/
> http://postimage.org/image/4vn3q5t3r/
>
>  The used command is: gdalwarp -dstnodata 0 -q -cutline
> C:/Users/Hugo/Final.shp -crop_to_cutline -of GTiff
> C:/Users/Hugo/Elevation-DEM-CLIPPED.img
> C:/Users/Hugo/Elevation-DEM-CLIPPED.img
>
> Can you help me?
>
> Best Regards,
>  --
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121122/1058c0c4/attachment.html>

From alisson.uece at gmail.com  Thu Nov 22 08:03:08 2012
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Thu, 22 Nov 2012 13:03:08 -0300
Subject: [gdal-dev] gdalwarp - Clip raster using mask
In-Reply-To: <CADEnnOOWOULmfUika7KvWXmAeFGjoe4pH_c3eR6HCBzUN88x9g@mail.gmail.com>
References: <CALwK9YwmLfBNnDi7Sh_CF+ysFROvBw3Ka_=eukNj1+Y8Auk_Xg@mail.gmail.com>
	<50AE305A.8070405@ualg.pt>
	<CADEnnOOWOULmfUika7KvWXmAeFGjoe4pH_c3eR6HCBzUN88x9g@mail.gmail.com>
Message-ID: <CALwK9YwSsVyRq3zAcVDSeL9bBEEh+_KzTdfwFO5MhboJditAaw@mail.gmail.com>

Hi,

Thanks for the suggestions. I had to ??buffer the mask. After, I clipped
the raster with the new mask. Worked for me!

Thank you very much!

2012/11/22 Peter Halls <p.halls at york.ac.uk>

> Alisson,
>
>     the advice I give my students in such a circumstance is to buffer the
> boundary by either one half of the pixel size or by the pixel size.  This
> has the effect of increasing the mask to include all cells along the
> boundary and gain a closer equivalent of a vector clip.
>
>     For another discussion of the issues, see Burrough, P.A., and
> McDonnell, Rachael A., 1998, Principles of Geographic Information Systems,
> Oxford: OUP.
>
> Best wishes,
>
> Peter
>
>
> On 22 November 2012 14:02, Joaquim Luis <jluis at ualg.pt> wrote:
>
>>  Alisson,
>>
>> It's not so easy to follow what is "desired" and "not-desired". For an
>> excellent discussion of the details involved in such operations see
>>
>> http://blogs.mathworks.com/steve/2006/12/22/poly2mask-and-roipoly-part-3/
>>
>> As a solution for your 'wish-behavior'  case maybe what you can do is to
>> previously expand your polygon with a buffer of half cell width.
>>
>> Joaquim
>>
>>  Hi friends,
>>
>> By using gdalwarp to clip a raster with a mask (shape), I get a new
>> raster of smaller size, which is the boundary of the polygon shape (mask).
>> However, the pixels do not pass the polygon. I would like to pass the
>> pixels just a little of the polygon mask.
>>
>> For clarity, I send two pictures of what I desire and not desire:
>> http://postimage.org/image/hlrc3911z/
>> http://postimage.org/image/4vn3q5t3r/
>>
>>  The used command is: gdalwarp -dstnodata 0 -q -cutline
>> C:/Users/Hugo/Final.shp -crop_to_cutline -of GTiff
>> C:/Users/Hugo/Elevation-DEM-CLIPPED.img
>> C:/Users/Hugo/Elevation-DEM-CLIPPED.img
>>
>> Can you help me?
>>
>> Best Regards,
>>  --
>> Alisson Barbosa
>> Systems Analyst - FUNCEME
>> M.Sc. in Computer Science - MACC
>> Graduate in Computer Science  - UECE
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
>
> ----------------------------------------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor & Team Leader Applications Support and
> Training,
>                Information Directorate, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: Harry Fairhurst Building, University of York,
>                 Heslington, York YO10 5DD
> This message has the status of a private and personal communication
>
> ----------------------------------------------------------------------------------------------------------------
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121122/9b02d499/attachment-0001.html>

From even.rouault at mines-paris.org  Thu Nov 22 11:05:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 22 Nov 2012 20:05:32 +0100
Subject: [gdal-dev] Anchor point in PDF EXTRA_IMAGES
In-Reply-To: <loom.20121122T104751-978@post.gmane.org>
References: <loom.20121122T104751-978@post.gmane.org>
Message-ID: <201211222005.32970.even.rouault@mines-paris.org>

Le jeudi 22 novembre 2012 11:21:08, Jukka Rahkonen a ?crit :
> Hi,
> 
> In the PDF creation option parameter EXTRA_IMAGES=image_file_name,x,y,scale
> the anchor point (x,y) is in the lower left corner of the resulting PDF
> file. However, the anchor point of the extra images to be added seems to
> be in the upper left corner. If someone tries to use this parameter as
> EXTRA_IMAGES=logo.png,1,1,1 the top left pixel of logo.png will be placed
> at the lower lext pixel of the PDF file. Thus the logo.png will never come
> into PDF because it is draws totally below the PDF print area.
> 
> Could it be possible to make EXTRA_IMAGES and the actual images to
> understand anchor points in a similar way? Either so that
> EXTRA_IMAGES=image_file_name,x,y,scale takes also the top left coordinates,
> or if it continues to use lower left anchor point then the PDF driver is
> placing the lower left pixel of the extra image to that place.
> 
> The curret behaviour is somewhat surprising. At minimum the document page
> should mention this somehow, for example as
> 
> "Notice, that x and y are in user units from the lower left corner of the
> page. Use some reasonably high value for y or otherwise the extra image
> will slide out of the PDF page".

well, that's true that there was a lack of consistency. I'm not sure which 
convention is best, so I've finally kept x,y as being expressed from the lower 
left corner of the page (that's consistant with the PDF logic : the origin of 
coordinates in PDF is the lower left corner of the page), but changed the 
anchor point to be the lower left pixel of the image.

You'll have to update your tutorial a bit, which is of great value by the way!

Even

From thomaschristian at gmail.com  Thu Nov 22 14:46:05 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Thu, 22 Nov 2012 14:46:05 -0800 (PST)
Subject: [gdal-dev] Problem compiling gdal with OCI support,
 configure doesn't seem to know where to look
In-Reply-To: <50AD231A.4040500@princeton-ma.us>
References: <1353028471893-5016804.post@n6.nabble.com>
	<8B319E5A30FF4A48BE7EEAAF609DB2330B43E66B@COMAIL01.digitalglobe.com>
	<50AD231A.4040500@princeton-ma.us>
Message-ID: <1353624365427-5018254.post@n6.nabble.com>

Ethan, Ivan thanks for the suggestions. I am still looking into this but it
is a background task. I'll update this thread when I have more results.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Problem-compiling-gdal-with-OCI-support-configure-doesn-t-seem-to-know-where-to-look-tp5016804p5018254.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From thomaschristian at gmail.com  Thu Nov 22 15:08:20 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Thu, 22 Nov 2012 15:08:20 -0800 (PST)
Subject: [gdal-dev] ogr2ogr & gdalinfo both crashing on 64-bit Windows 7,
 very little info available
Message-ID: <1353625700962-5018255.post@n6.nabble.com>

When I run ogr2ogr or gdalinfo (and maybe other tools, I've never used the
others) I always get a crash. I'm using Windows 7 64-bit and gdal 1.9.2. The
only information I get from Windows Event Viewer looks like this:

ogr2ogr.exe
0.0.0.0
50981d19
ntdll.dll
6.1.7601.17725
4ec49b8f
c0000374
000ce6c3
544
01cdc9024472ef70
c:\OSGeo4W\bin\ogr2ogr.exe
c:\Windows\SysWOW64\ntdll.dll
84cba12d-34f5-11e2-8214-002713b231b3

As you can see I'm on a 64-bit system. I assume this is part of the problem
somehow.

gdalinfo --formats lists some formats and then crashes. I don't know if it
crashes before listing all formats or after they're all displayed. ogr2ogr
crashes before generating any output. Both commands have been run as both
regular user and administrator with no difference.

I put c:\OSGeo4W\bin at the beginning of the PATH, and I am executing my
command from the 32-bit CMD prompt, but based on the error report I think
some part of the process is calling 64-bit ntdll.dll.

It might be relevant - I also installed gdal Oracle support. I'm fairly
confident this is working as the first time I ran ogr2ogr it complained my
TNS entry didn't exist. After I updated the TNS it stopped complaining (then
crashed). If I was only seeing crashes in ogr2ogr I'd assume there was an
issue with Oracle or my SQL, but gdalinfo is also having problems.

This is my ogr2ogr command: ogr2ogr -f "CSV" c:\users\me\Desktop\test.csv
OCI:user/pass at tnsname -sql "select id from table"

Any thoughts or suggestions very much appreciated. I thought maybe I could
pass an argument telling the entire process to run as 32-bit but Google
isn't giving up the goods.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-gdalinfo-both-crashing-on-64-bit-Windows-7-very-little-info-available-tp5018255.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From ivan.lucena at princeton-ma.us  Thu Nov 22 16:06:08 2012
From: ivan.lucena at princeton-ma.us (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu, 22 Nov 2012 19:06:08 -0500
Subject: [gdal-dev]
	=?iso-8859-1?q?ogr2ogr_=26_gdalinfo_both_crashing_on_6?=
	=?iso-8859-1?q?4-bit_Windows_7=2C_very_little_info_available?=
In-Reply-To: <1353625700962-5018255.post@n6.nabble.com>
References: <1353625700962-5018255.post@n6.nabble.com>
Message-ID: <20121123000608.26885.qmail@s466.sureserver.com>

Is your Oracle 64 or 32? Was GDAL build to 32 or 64? (It looks like you are using OSGeo4W so it must be 32) I have seem that same kind of problem and it was because the oci.dll from the Oracle 64 was first on the PATH instead of the oci.dll 32 bits that comes with OSGeo4W. Try to clean up the PATH environment adding only the essential, as it is needed. You might use MS File Mionitor to know more about what is going on. Also try to enter the database instance name on "oci:user/pwd at dbinstance". You can also try the GDAL build for 64bit from gisinternals/sdk with Oracle support. Works great.

>  -------Original Message-------
>  From: cheesybiscuits <thomaschristian at gmail.com>
>  To: gdal-dev at lists.osgeo.org
>  Subject: [gdal-dev] ogr2ogr & gdalinfo both crashing on 64-bit Windows 7, very little info available
>  Sent: Nov 22 '12 18:08
>  
>  When I run ogr2ogr or gdalinfo (and maybe other tools, I've never used the
>  others) I always get a crash. I'm using Windows 7 64-bit and gdal 1.9.2. The
>  only information I get from Windows Event Viewer looks like this:
>  
>  ogr2ogr.exe
>  0.0.0.0
>  50981d19
>  ntdll.dll
>  6.1.7601.17725
>  4ec49b8f
>  c0000374
>  000ce6c3
>  544
>  01cdc9024472ef70
>  c:\OSGeo4W\bin\ogr2ogr.exe
>  c:\Windows\SysWOW64\ntdll.dll
>  84cba12d-34f5-11e2-8214-002713b231b3
>  
>  As you can see I'm on a 64-bit system. I assume this is part of the problem
>  somehow.
>  
>  gdalinfo --formats lists some formats and then crashes. I don't know if it
>  crashes before listing all formats or after they're all displayed. ogr2ogr
>  crashes before generating any output. Both commands have been run as both
>  regular user and administrator with no difference.
>  
>  I put c:\OSGeo4W\bin at the beginning of the PATH, and I am executing my
>  command from the 32-bit CMD prompt, but based on the error report I think
>  some part of the process is calling 64-bit ntdll.dll.
>  
>  It might be relevant - I also installed gdal Oracle support. I'm fairly
>  confident this is working as the first time I ran ogr2ogr it complained my
>  TNS entry didn't exist. After I updated the TNS it stopped complaining (then
>  crashed). If I was only seeing crashes in ogr2ogr I'd assume there was an
>  issue with Oracle or my SQL, but gdalinfo is also having problems.
>  
>  This is my ogr2ogr command: ogr2ogr -f "CSV" c:\users\me\Desktop\test.csv
>  OCI:user/pass at tnsname -sql "select id from table"
>  
>  Any thoughts or suggestions very much appreciated. I thought maybe I could
>  pass an argument telling the entire process to run as 32-bit but Google
>  isn't giving up the goods.
>  
>  
>  
>  --
>  View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-gdalinfo-both-crashing-on-64-bit-Windows-7-very-little-info-available-tp5018255.html
>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev at lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  

From gdal at stripfamily.net  Thu Nov 22 21:40:28 2012
From: gdal at stripfamily.net (David Strip)
Date: Thu, 22 Nov 2012 22:40:28 -0700
Subject: [gdal-dev] gdalwarp question - probably pretty simple
Message-ID: <50AF0C4C.1010209@stripfamily.net>

I've got a geotiff which gdalinfo reports as 2 bands, with band 2 
interpreted as alpha. The projection is Maryland State Plane. The color 
table is paletted, with NO_DATA = 0
I can view this file in OpenEV with no problem
I call
     gdalwarp -t "WGS84" input.tif output.tif
When I open the resulting file in OpenEV, I see nothing, the screen 
appears to remain black. When I move the cursor around, it reports the 
value as NO DATA.

I thought this might have something to do with the alpha band, so I 
added - dstalpha. This produces
     ERROR 6: SetColorTable() not supported for multi-sample images
It still completes and produces a file, but gdalinfo doesn't report 
band2 as alpha, and I still get a blank view in OpenEV.

I suspect I'm missing something quite basic, but I'm not seeing any 
obvious command option.

Thanks

From sazonov at scanex.ru  Fri Nov 23 02:36:18 2012
From: sazonov at scanex.ru (DmitriyS)
Date: Fri, 23 Nov 2012 02:36:18 -0800 (PST)
Subject: [gdal-dev] gdalwarp and mosaic
In-Reply-To: <1353584467.50ae0f5310ca3@imp.free.fr>
References: <1353581941503-5018130.post@n6.nabble.com>
	<1353584467.50ae0f5310ca3@imp.free.fr>
Message-ID: <1353666978584-5018336.post@n6.nabble.com>

Thank for a help.
 As I undestand,  I  shuold pass "-ts" arguments (width and height) during
merge operation, creating new merge file, and then execute clip operation,
that appends an image to the existing file?
Width and height must be calculated beforehand according to images that will
be appended.
Am I right? 




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdalwarp-and-mosaic-tp5018130p5018336.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From gdal at stripfamily.net  Fri Nov 23 08:08:34 2012
From: gdal at stripfamily.net (David Strip)
Date: Fri, 23 Nov 2012 09:08:34 -0700
Subject: [gdal-dev] gdalwarp question - probably pretty simple
In-Reply-To: <50AF0C4C.1010209@stripfamily.net>
References: <50AF0C4C.1010209@stripfamily.net>
Message-ID: <50AF9F82.9070906@stripfamily.net>

On 11/22/2012 10:40 PM, David Strip wrote:
> I've got a geotiff which gdalinfo reports as 2 bands, with band 2 
> interpreted as alpha. The projection is Maryland State Plane. The 
> color table is paletted, with NO_DATA = 0
> I can view this file in OpenEV with no problem
> I call
>     gdalwarp -t "WGS84" input.tif output.tif
> When I open the resulting file in OpenEV, I see nothing, the screen 
> appears to remain black. When I move the cursor around, it reports the 
> value as NO DATA.
>
> I thought this might have something to do with the alpha band, so I 
> added - dstalpha. This produces
>     ERROR 6: SetColorTable() not supported for multi-sample images
> It still completes and produces a file, but gdalinfo doesn't report 
> band2 as alpha, and I still get a blank view in OpenEV.
>
> I suspect I'm missing something quite basic, but I'm not seeing any 
> obvious command option.

I can make this work if I first strip out the alpha band
     gdal_translate -b 1 input.tif output.tif

But I'm still interesting in hearing how I could make gdalwarp work 
directly.


From etourigny.dev at gmail.com  Fri Nov 23 08:26:59 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Fri, 23 Nov 2012 14:26:59 -0200
Subject: [gdal-dev] gdalwarp question - probably pretty simple
In-Reply-To: <50AF9F82.9070906@stripfamily.net>
References: <50AF0C4C.1010209@stripfamily.net>
	<50AF9F82.9070906@stripfamily.net>
Message-ID: <CA+TxYvPcwG6VxH+wn=nwd6nAvmjDHX2BVxW5WoChV93Pt=z=dA@mail.gmail.com>

I think only one alpha band is supported?

On Fri, Nov 23, 2012 at 2:08 PM, David Strip <gdal at stripfamily.net> wrote:
> On 11/22/2012 10:40 PM, David Strip wrote:
>>
>> I've got a geotiff which gdalinfo reports as 2 bands, with band 2
>> interpreted as alpha. The projection is Maryland State Plane. The color
>> table is paletted, with NO_DATA = 0
>> I can view this file in OpenEV with no problem
>> I call
>>     gdalwarp -t "WGS84" input.tif output.tif
>> When I open the resulting file in OpenEV, I see nothing, the screen
>> appears to remain black. When I move the cursor around, it reports the value
>> as NO DATA.
>>
>> I thought this might have something to do with the alpha band, so I added
>> - dstalpha. This produces
>>     ERROR 6: SetColorTable() not supported for multi-sample images
>> It still completes and produces a file, but gdalinfo doesn't report band2
>> as alpha, and I still get a blank view in OpenEV.
>>
>> I suspect I'm missing something quite basic, but I'm not seeing any
>> obvious command option.
>
>
> I can make this work if I first strip out the alpha band
>     gdal_translate -b 1 input.tif output.tif
>
> But I'm still interesting in hearing how I could make gdalwarp work
> directly.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From alisson.uece at gmail.com  Fri Nov 23 08:40:07 2012
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Fri, 23 Nov 2012 13:40:07 -0300
Subject: [gdal-dev] MULTILINESTRING to MULTIPOLYGON using ogr2ogr
Message-ID: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>

Hi friends,

I would like to transform a shape with multilinestring in a shape with
polygons using ogr2ogr.

Polygon to multilinestring, I use:
ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/Basins3.shp"
"C:/Users/Alisson/Basins2.shp" -sql "SELECT * FROM Basins2" -skipfailures
-nlt MULTILINESTRING

This works.

Multilinestring to multipolygon, I use:
ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/polygon.shp"
"C:/Users/AlissonContorno30.shp" -sql "SELECT * FROM Contorno30"
-skipfailures -nlt MULTIPOLYGON

But, this error appears:
ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to POLYGON type
shapefile.

Can you help me?

Best regards,
-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121123/cc1d9a23/attachment.html>

From thomaschristian at gmail.com  Fri Nov 23 17:09:46 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Fri, 23 Nov 2012 17:09:46 -0800 (PST)
Subject: [gdal-dev] ogr2ogr & gdalinfo both crashing on 64-bit Windows 7,
 very little info available
In-Reply-To: <20121123000608.26885.qmail@s466.sureserver.com>
References: <1353625700962-5018255.post@n6.nabble.com>
	<20121123000608.26885.qmail@s466.sureserver.com>
Message-ID: <1353719386288-5018502.post@n6.nabble.com>

Ivan, thanks for the suggestions.

The Oracle client is 32 bit, and as you noted GDAL is also 32 bit.

The OSGeo4W bin and lib directories are both at the beginning of the path,
before the Oracle directories.

It might not be relevant but I have an Oracle 11.2 Oracle client talking to
a 10.2 instance.

I'm trying to avoid compiling GDAL from source on Windows as 1) I'm not
familiar enough with the process and 2) I've already lost several hours
trying to compile OCI support into a Linux build of GDAL for a separate
project and I know how painful this can be.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-gdalinfo-both-crashing-on-64-bit-Windows-7-very-little-info-available-tp5018255p5018502.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Sat Nov 24 03:52:02 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat, 24 Nov 2012 12:52:02 +0100
Subject: [gdal-dev] New creation options in PDF driver
Message-ID: <201211241252.03216.even.rouault@mines-paris.org>

Hi,

Just to notify you of new creation options that have been added in the PDF 
driver:

CLIPPING_EXTENT=xmin,ymin,xmax,ymax: Set the clipping extent for the main 
source dataset and for the optional extra rasters. The coordinates are 
expressed in the units of the SRS of the dataset. If not specified, the 
clipping extent is set to the extent of the main source dataset.
EXTRA_RASTERS=dataset_ids: Comma separated list of georeferenced rasters to 
insert into the page. Those rasters are displayed on top of the main source 
raster. They must be georeferenced in the same projection, and they will be 
clipped to CLIPPING_EXTENT if it is specified (otherwise to the extent of the 
main source raster). 
EXTRA_RASTERS_LAYER_NAME=dataset_names: Comma separated list of name for each 
raster specified in EXTRA_RASTERS. If specified, each extra raster will be be 
placed into a layer, named with the specified value, that can be toggled/un-
toggled in the "Layer tree" of the PDF reader. If not specified, all the extra 
rasters will be placed in the default layer.
OFF_LAYERS=names: Comma separated list of layer names that should be initially 
hidden. By default, all layers are visible. The layer names can come from 
LAYER_NAME (main raster layer name), EXTRA_RASTERS_LAYER_NAME, 
EXTRA_LAYER_NAME and OGR_DISPLAY_LAYER_NAMES. 
EXCLUSIVE_LAYERS=names: Comma separated list of layer names, such that only 
one of those layers can be visible at a time. This is the behaviour of radio-
buttons in a graphical user interface. he layer names can come from LAYER_NAME 
(main raster layer name), EXTRA_RASTERS_LAYER_NAME, EXTRA_LAYER_NAME and 
OGR_DISPLAY_LAYER_NAMES. 
Even
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121124/f7212417/attachment.html>

From mahdavi.parissa at gmail.com  Sun Nov 25 10:59:31 2012
From: mahdavi.parissa at gmail.com (Parissa Mahdavi)
Date: Sun, 25 Nov 2012 22:29:31 +0330
Subject: [gdal-dev] gdalwarp and mosaic
In-Reply-To: <1353666978584-5018336.post@n6.nabble.com>
References: <1353581941503-5018130.post@n6.nabble.com>
	<1353584467.50ae0f5310ca3@imp.free.fr>
	<1353666978584-5018336.post@n6.nabble.com>
Message-ID: <CAFJndSuz=G19ogP=XQ6DBFdhNH66h51Rc43GPcjOHKH1aTS3Jg@mail.gmail.com>

hey

im all new with gdal library, and i want to merge 2 series of multiple tiff
images (one is about 700 images and the other about 2500!!! ) i dont know
how can i do that, or even if thats possible or how many images i can merge
at once,
as i said i know almost nth about this library, and any help
is appreciated :)

thx
best regards

p.mahdavi
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121125/6e4a67b6/attachment.html>

From gcpp.kalxas at gmail.com  Sun Nov 25 12:31:23 2012
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Sun, 25 Nov 2012 22:31:23 +0200
Subject: [gdal-dev] OpenJPEG 2.0 released
In-Reply-To: <201211202023.40035.even.rouault@mines-paris.org>
References: <201211202023.40035.even.rouault@mines-paris.org>
Message-ID: <50B2801B.8040300@gmail.com>

On 11/20/2012 09:23 PM, Even Rouault wrote:
> Hi,
>
> Just to inform you that the OpenJPEG project has just released OpenJPEG 2.0.0.
>
> GDAL users of GDAL 1.10dev that need support for JPEG2000 can (must) now rely
> on a released version, and no longer on the openjpeg SVN v2 branch (which has
> been removed by the way)
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
Hi Even,

openjpeg-2.0 final has just been upgraded in openSUSE, causing 
gdal-1.9.2 build to break.
Is there a patch available to apply or should I disable openjpeg until 
gdal-1.10 release?

Best,
Angelos

-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos


From jukka.rahkonen at mmmtike.fi  Sun Nov 25 15:03:47 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun, 25 Nov 2012 23:03:47 +0000 (UTC)
Subject: [gdal-dev] New creation options in PDF driver
References: <201211241252.03216.even.rouault@mines-paris.org>
Message-ID: <loom.20121126T000320-866@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> 
> Hi,
> 
> Just to notify you of new creation options that have been added 
in the PDF driver:


And most of them are now added to 

http://latuviitta.org/documents/Geospatial_PDF_maps_from_OSM_with_GDAL.pdf
I made a new sample PDF because it does not any more contain plain OSM data. 
http://latuviitta.org/documents/Advanced_geospatial_PDF_made_with_GDAL.pdf

-Jukka-


From jukka.rahkonen at mmmtike.fi  Sun Nov 25 21:24:17 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 26 Nov 2012 05:24:17 +0000 (UTC)
Subject: [gdal-dev] =?utf-8?q?Space_in_PDF_option_OGR=5FDISPLAY=5FLAYER=5F?=
	=?utf-8?q?NAMES?=
Message-ID: <loom.20121126T060854-347@post.gmane.org>

Hi,

Having space characters in the following creation option makes trouble
-co OGR_DISPLAY_LAYER_NAMES="bussipys?kit,kierr?tys,The zoo plan"

Layer name "The zoo plan" works fine in the PDF layer tree but immediately when
I click the model tree button with Acrobat Reader X the whole reader dies.

-Jukka Rahkonen-


From p.halls at york.ac.uk  Sun Nov 25 23:57:31 2012
From: p.halls at york.ac.uk (Peter Halls)
Date: Mon, 26 Nov 2012 07:57:31 +0000
Subject: [gdal-dev] ogr2ogr & gdalinfo both crashing on 64-bit Windows 7,
 very little info available
In-Reply-To: <1353719386288-5018502.post@n6.nabble.com>
References: <1353625700962-5018255.post@n6.nabble.com>
	<20121123000608.26885.qmail@s466.sureserver.com>
	<1353719386288-5018502.post@n6.nabble.com>
Message-ID: <CADEnnOMP=qqh7KWbxbHUZ_ygdU6ef5cRB_HgEp0nBBPBybYbrw@mail.gmail.com>

Thomas,

On 24 November 2012 01:09, cheesybiscuits <thomaschristian at gmail.com> wrote:
> Ivan, thanks for the suggestions.
>
> The Oracle client is 32 bit, and as you noted GDAL is also 32 bit.

I think you would get different errors if you were trying to run a
mixed 32bit / 64bit environment as this is not allowed by Windows.

>
> The OSGeo4W bin and lib directories are both at the beginning of the path,
> before the Oracle directories.

As you are concerned with Windows, rather than Unix / Linux, this may
not be relevant, however, it can sometimes help to repeat libraries in
the search path if there are interdependencies.  This is usually
indicated by a missing module that is contained in a library towards
the beginning of the search path.

>
> It might not be relevant but I have an Oracle 11.2 Oracle client talking to
> a 10.2 instance.

This is documented by Oracle as supported.  The 11.2 client cannot
interwork with Oracle 8, but can with 9, 10 and 11.

>
> I'm trying to avoid compiling GDAL from source on Windows as 1) I'm not
> familiar enough with the process and 2) I've already lost several hours
> trying to compile OCI support into a Linux build of GDAL for a separate
> project and I know how painful this can be.
>

I do not know why OCI support should be so difficult to build in, but it is!

Best wishes,

Peter

> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-gdalinfo-both-crashing-on-64-bit-Windows-7-very-little-info-available-tp5018255p5018502.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------

From even.rouault at mines-paris.org  Mon Nov 26 00:29:17 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Nov 2012 09:29:17 +0100
Subject: [gdal-dev] OpenJPEG 2.0 released
In-Reply-To: <50B2801B.8040300@gmail.com>
References: <201211202023.40035.even.rouault@mines-paris.org>
	<50B2801B.8040300@gmail.com>
Message-ID: <1353918557.50b3285de8ad4@imp.free.fr>

Selon Angelos Tzotsos <gcpp.kalxas at gmail.com>:

> On 11/20/2012 09:23 PM, Even Rouault wrote:
> > Hi,
> >
> > Just to inform you that the OpenJPEG project has just released OpenJPEG
> 2.0.0.
> >
> > GDAL users of GDAL 1.10dev that need support for JPEG2000 can (must) now
> rely
> > on a released version, and no longer on the openjpeg SVN v2 branch (which
> has
> > been removed by the way)
> >
> > Even
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> Hi Even,
>
> openjpeg-2.0 final has just been upgraded in openSUSE, causing
> gdal-1.9.2 build to break.

Yes this is expected. OpenJPEG 2.0 API has been changed during the merge of
their v2 feature branch into their trunk.

> Is there a patch available to apply or should I disable openjpeg until
> gdal-1.10 release?

I don't foresee doing a patch at this point of GDAL 1.9.X lifetime to bring
support of OpenJPEG 2.0. You could decide shiping the old v2 branch of openjpeg
in the state it was, but I doubt that you'll do this for a distribution since it
would be a bit confusing. So yes the best is probably to wait for GDAL 1.10.

>
> Best,
> Angelos
>
> --
> Angelos Tzotsos
> Remote Sensing Laboratory
> National Technical University of Athens
> http://users.ntua.gr/tzotsos
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From even.rouault at mines-paris.org  Mon Nov 26 00:31:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Nov 2012 09:31:32 +0100
Subject: [gdal-dev] Space in PDF option OGR_DISPLAY_LAYER_NAMES
In-Reply-To: <loom.20121126T060854-347@post.gmane.org>
References: <loom.20121126T060854-347@post.gmane.org>
Message-ID: <1353918692.50b328e4161b9@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Hi,
>
> Having space characters in the following creation option makes trouble
> -co OGR_DISPLAY_LAYER_NAMES="bussipys??kit,kierr??tys,The zoo plan"
>
> Layer name "The zoo plan" works fine in the PDF layer tree but immediately
> when
> I click the model tree button with Acrobat Reader X the whole reader dies.

I'll try checking in the spec if spaces are illegal, but in any case Acrobat
Reader should not die. So perhaps worth reporting to the vendor.

>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



From djm00n at mail.ru  Mon Nov 26 00:05:57 2012
From: djm00n at mail.ru (=?UTF-8?B?0JTQvNC40YLRgNC40Lkg0KDRj9C30LDQvdGG0LXQsg==?=)
Date: Mon, 26 Nov 2012 12:05:57 +0400
Subject: [gdal-dev] =?utf-8?q?Current_cmake_project_status?=
In-Reply-To: <mailman.21.1353873611.21123.gdal-dev@lists.osgeo.org>
References: <mailman.21.1353873611.21123.gdal-dev@lists.osgeo.org>
Message-ID: <1353917157.831355524@f60.mail.ru>

Hi all! I've just wanted to know what is the current status of cmake project files for GDAL. Use of nmake script shows poor speed when I changing only one file in driver... I think with cmake we could avoid such issues. http://trac.osgeo.org/gdal/wiki/CMake page says that "... is being developed internally by Kitware. It should be delivered soon..." but it was a six month ago...
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121126/6f8bce6b/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Nov 26 01:20:08 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 26 Nov 2012 09:20:08 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Space_in_PDF_option_OGR=5FDISPLAY=5FLAYER=5F?=
	=?utf-8?q?NAMES?=
References: <loom.20121126T060854-347@post.gmane.org>
	<1353918692.50b328e4161b9@imp.free.fr>
Message-ID: <loom.20121126T101001-249@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:

> 
> Selon Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi>:
> 
> > Hi,
> >
> > Having space characters in the following creation option makes trouble
> > -co OGR_DISPLAY_LAYER_NAMES="bussipys??kit,kierr??tys,The zoo plan"
> >
> > Layer name "The zoo plan" works fine in the PDF layer tree but immediately
> > when
> > I click the model tree button with Acrobat Reader X the whole reader dies.
> 
> I'll try checking in the spec if spaces are illegal, but in any case Acrobat
> Reader should not die. So perhaps worth reporting to the vendor.

I believe spaces are OK because I found this geospatial PDF 
http://www.workoutdork.com/misc/gm.pdf from 
http://www.bvcog.org/wp-content/themes/cog/GIS/maps/Geospatial-Guide.pdf
and the model tree does contain names with spaces. Perhaps GDAL writes the
spaces in a somehow wrong way. I agree that the reader should not die. I will
make some small bad behaving PDF and try to send it to Adobe so they can
research it.

-Jukka-


From gcpp.kalxas at gmail.com  Mon Nov 26 01:51:30 2012
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Mon, 26 Nov 2012 11:51:30 +0200
Subject: [gdal-dev] OpenJPEG 2.0 released
In-Reply-To: <1353918557.50b3285de8ad4@imp.free.fr>
References: <201211202023.40035.even.rouault@mines-paris.org>
	<50B2801B.8040300@gmail.com> <1353918557.50b3285de8ad4@imp.free.fr>
Message-ID: <50B33BA2.2000303@gmail.com>

On 11/26/2012 10:29 AM, Even Rouault wrote:
> Selon Angelos Tzotsos <gcpp.kalxas at gmail.com>:
>
>> On 11/20/2012 09:23 PM, Even Rouault wrote:
>>> Hi,
>>>
>>> Just to inform you that the OpenJPEG project has just released OpenJPEG
>> 2.0.0.
>>> GDAL users of GDAL 1.10dev that need support for JPEG2000 can (must) now
>> rely
>>> on a released version, and no longer on the openjpeg SVN v2 branch (which
>> has
>>> been removed by the way)
>>>
>>> Even
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>> Hi Even,
>>
>> openjpeg-2.0 final has just been upgraded in openSUSE, causing
>> gdal-1.9.2 build to break.
> Yes this is expected. OpenJPEG 2.0 API has been changed during the merge of
> their v2 feature branch into their trunk.
>
>> Is there a patch available to apply or should I disable openjpeg until
>> gdal-1.10 release?
> I don't foresee doing a patch at this point of GDAL 1.9.X lifetime to bring
> support of OpenJPEG 2.0. You could decide shiping the old v2 branch of openjpeg
> in the state it was, but I doubt that you'll do this for a distribution since it
> would be a bit confusing. So yes the best is probably to wait for GDAL 1.10.
>
>> Best,
>> Angelos
>>
>> --
>> Angelos Tzotsos
>> Remote Sensing Laboratory
>> National Technical University of Athens
>> http://users.ntua.gr/tzotsos
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
Thanks Even,

I have disabled openjpeg2 support until 1.10.

Cheers,
Angelos

-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos


From alisson.uece at gmail.com  Mon Nov 26 03:47:31 2012
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Mon, 26 Nov 2012 08:47:31 -0300
Subject: [gdal-dev] MULTILINESTRING to MULTIPOLYGON using ogr2ogr
In-Reply-To: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>
References: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>
Message-ID: <CALwK9YybdXx9b4ma79HuVPCdrtyCg9__Ga2wWckgfBu3bKHv2A@mail.gmail.com>

Can anybody help me?

2012/11/23 Alisson Barbosa <alisson.uece at gmail.com>

> Hi friends,
>
> I would like to transform a shape with multilinestring in a shape with
> polygons using ogr2ogr.
>
> Polygon to multilinestring, I use:
> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/Basins3.shp"
> "C:/Users/Alisson/Basins2.shp" -sql "SELECT * FROM Basins2" -skipfailures
> -nlt MULTILINESTRING
>
> This works.
>
> Multilinestring to multipolygon, I use:
> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/polygon.shp"
> "C:/Users/AlissonContorno30.shp" -sql "SELECT * FROM Contorno30"
> -skipfailures -nlt MULTIPOLYGON
>
> But, this error appears:
> ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to POLYGON
> type shapefile.
>
> Can you help me?
>
> Best regards,
> --
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>
>


-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121126/2ab38f2b/attachment.html>

From jrepetto at free.fr  Mon Nov 26 03:40:08 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon, 26 Nov 2012 12:40:08 +0100
Subject: [gdal-dev] No Spatial Reference System from UTM Ozi .map file
In-Reply-To: <3062EFC1-B42A-467D-ADAF-9BA333465E23@nixanz.com>
References: <CEAC9939-94CF-4AA8-A180-947313D98E1C@nixanz.com>
	<50A0A184.7060505@free.fr>
	<5E51BD41-6D0C-4A20-A4F7-52BE7C7E5DA3@nixanz.com>
	<50A0AD2C.10308@free.fr>
	<ADE8DA87-E66B-4832-8A38-56567194729C@nixanz.com>
	<50A0B8BD.5020201@free.fr>
	<43169839-58D4-40A7-B60F-0EFBE1CC8BBC@nixanz.com>
	<loom.20121112T132926-343@post.gmane.org>
	<23AC3054-4609-473D-A500-5B7D8A798BD4@nixanz.com>
	<50A228BA.7000102@free.fr>
	<3062EFC1-B42A-467D-ADAF-9BA333465E23@nixanz.com>
Message-ID: <50B35518.9090703@free.fr>

Le 14/11/2012 00:44, Nik Sands a ?crit :
> Thanks very much for looking into this.  I've filed the bug at https://trac.osgeo.org/gdal/ticket/4894
>

I have submitted a patch (see ticket). I couldn't test it completely, 
because you didn't provide image files matching the .map files.
So please test it and report if the result is correct.

Jean-Claude


From hbobenicio at gmail.com  Mon Nov 26 04:24:18 2012
From: hbobenicio at gmail.com (Hugo Benicio)
Date: Mon, 26 Nov 2012 09:24:18 -0300
Subject: [gdal-dev] MULTILINESTRING to MULTIPOLYGON using ogr2ogr
In-Reply-To: <CALwK9YybdXx9b4ma79HuVPCdrtyCg9__Ga2wWckgfBu3bKHv2A@mail.gmail.com>
References: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>
	<CALwK9YybdXx9b4ma79HuVPCdrtyCg9__Ga2wWckgfBu3bKHv2A@mail.gmail.com>
Message-ID: <CAKGFd-wiE5MrgNPYJr4aMMBZhfib9G1LVBCh+XRrGNef3nmz_Q@mail.gmail.com>

I'm facing a similar problem when trying to convert a shapefile containing
lines to a shapefile containing polygons.
No progress.
If you solve it, please, let me know!

Thanks in advance.


On Mon, Nov 26, 2012 at 8:47 AM, Alisson Barbosa <alisson.uece at gmail.com>wrote:

> Can anybody help me?
>
>
> 2012/11/23 Alisson Barbosa <alisson.uece at gmail.com>
>
>> Hi friends,
>>
>> I would like to transform a shape with multilinestring in a shape with
>> polygons using ogr2ogr.
>>
>> Polygon to multilinestring, I use:
>> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/Basins3.shp"
>> "C:/Users/Alisson/Basins2.shp" -sql "SELECT * FROM Basins2" -skipfailures
>> -nlt MULTILINESTRING
>>
>> This works.
>>
>> Multilinestring to multipolygon, I use:
>> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/polygon.shp"
>> "C:/Users/AlissonContorno30.shp" -sql "SELECT * FROM Contorno30"
>> -skipfailures -nlt MULTIPOLYGON
>>
>> But, this error appears:
>> ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to POLYGON
>> type shapefile.
>>
>> Can you help me?
>>
>> Best regards,
>> --
>> Alisson Barbosa
>> Systems Analyst - FUNCEME
>> M.Sc. in Computer Science - MACC
>> Graduate in Computer Science  - UECE
>>
>>
>>
>
>
> --
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121126/f5772912/attachment.html>

From jukka.rahkonen at mmmtike.fi  Mon Nov 26 05:11:39 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon, 26 Nov 2012 13:11:39 +0000 (UTC)
Subject: [gdal-dev] MULTILINESTRING to MULTIPOLYGON using ogr2ogr
References: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>
	<CALwK9YybdXx9b4ma79HuVPCdrtyCg9__Ga2wWckgfBu3bKHv2A@mail.gmail.com>
	<CAKGFd-wiE5MrgNPYJr4aMMBZhfib9G1LVBCh+XRrGNef3nmz_Q@mail.gmail.com>
Message-ID: <loom.20121126T140003-600@post.gmane.org>

Hugo Benicio <hbobenicio <at> gmail.com> writes:

> 
> 
> I'm facing a similar problem when trying to convert a shapefile containing
lines to a shapefile containing polygons.
> No progress.
> If you solve it, please, let me know!
> 
> Thanks in advance.

Hi,

Converting polygons into lines and lines into polygons are not symmetric
operations. While it is always possible to snip the polygon rings and tell that
they are lines it is not the case in other direction. All lines or polylines do
not form closed rings which can be converted into polygons, they do not
necessarily even touch. Therefore I would not be surprised if ogr2ogr is missing
such a tool. I do not know, though.

There seems to be special tools for building polygons. OpenJUMP has a few and
Sextante (which is integrated with OpenJUMP, Kosmo GIS, gvSIG, QGIS and probably
others) seems to have such a function. I think also that some planar graph tools
could be suitable for this task. I bet that GRASS has fine tools for building
topology and polygons.

-Jukka Rahkonen-




From p.halls at york.ac.uk  Mon Nov 26 05:17:46 2012
From: p.halls at york.ac.uk (Peter Halls)
Date: Mon, 26 Nov 2012 13:17:46 +0000
Subject: [gdal-dev] MULTILINESTRING to MULTIPOLYGON using ogr2ogr
In-Reply-To: <CAKGFd-wiE5MrgNPYJr4aMMBZhfib9G1LVBCh+XRrGNef3nmz_Q@mail.gmail.com>
References: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>
	<CALwK9YybdXx9b4ma79HuVPCdrtyCg9__Ga2wWckgfBu3bKHv2A@mail.gmail.com>
	<CAKGFd-wiE5MrgNPYJr4aMMBZhfib9G1LVBCh+XRrGNef3nmz_Q@mail.gmail.com>
Message-ID: <CADEnnONOiM7CZKxPdFpHiGDKwKmaL0J+S5pSm_1CSDnNPTJr_w@mail.gmail.com>

Alisson, Hugo,

     I think a reason for the lack of response is that the operation
you need is a tad more involved than is supported by ogr2ogr - which
performs simple geometrical operations but is really designed to
perform format translations.

    To go from a spaghetti of lines to polygons requires the
identification of each future polygon boundary, the assembly of the
polygon boundary, ensuring that it closes and writing out the new
polygon.  This much ogr2ogr does.  To go to multipolygons, however,
requires the further assembly of the related polygons into a combined
polygon - for example, islands in a lake.  All of this relies on the
existence of attribute values to identify what belongs to what.
Further complication is involved if the resultant polygons overlap and
it is required that these overlaps be identified, although this is not
required for a polygon shapefile.

    As this process may require intelligence based upon more complex
attribute relationships, it is probably the case that a program
(Python, Java, C++, etc) is required to implement the specific logic
required.

    If you want to read up on the operations involved, one of the most
approachable texts is 'GIS Basics' by Steve Wise (Taylor & Francis,
2002).  The good news is that there are calls in the OGR API to
implement each of the steps involved.

Best wishes,

Peter

On 26 November 2012 12:24, Hugo Benicio <hbobenicio at gmail.com> wrote:
> I'm facing a similar problem when trying to convert a shapefile containing
> lines to a shapefile containing polygons.
> No progress.
> If you solve it, please, let me know!
>
> Thanks in advance.
>
>
> On Mon, Nov 26, 2012 at 8:47 AM, Alisson Barbosa <alisson.uece at gmail.com>
> wrote:
>>
>> Can anybody help me?
>>
>>
>> 2012/11/23 Alisson Barbosa <alisson.uece at gmail.com>
>>>
>>> Hi friends,
>>>
>>> I would like to transform a shape with multilinestring in a shape with
>>> polygons using ogr2ogr.
>>>
>>> Polygon to multilinestring, I use:
>>> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/Basins3.shp"
>>> "C:/Users/Alisson/Basins2.shp" -sql "SELECT * FROM Basins2" -skipfailures
>>> -nlt MULTILINESTRING
>>>
>>> This works.
>>>
>>> Multilinestring to multipolygon, I use:
>>> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/polygon.shp"
>>> "C:/Users/AlissonContorno30.shp" -sql "SELECT * FROM Contorno30"
>>> -skipfailures -nlt MULTIPOLYGON
>>>
>>> But, this error appears:
>>> ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to POLYGON
>>> type shapefile.
>>>
>>> Can you help me?
>>>
>>> Best regards,
>>> --
>>> Alisson Barbosa
>>> Systems Analyst - FUNCEME
>>> M.Sc. in Computer Science - MACC
>>> Graduate in Computer Science  - UECE
>>>
>>>
>>
>>
>>
>> --
>> Alisson Barbosa
>> Systems Analyst - FUNCEME
>> M.Sc. in Computer Science - MACC
>> Graduate in Computer Science  - UECE
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
----------------------------------------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
               Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
                Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------------------------------------------

From bclay at ball.com  Mon Nov 26 05:23:47 2012
From: bclay at ball.com (Clay, Bruce)
Date: Mon, 26 Nov 2012 08:23:47 -0500
Subject: [gdal-dev] CRS not defined with BMP
Message-ID: <C482FF98AE985A47B8C982FD429C9E3402BF71@daytonmsg2k3.AERO.BALL.COM>

I am using GDAL to convert CADRG files to BMP chips for an application written to only use BMP.  I have created the BMP chip, BMP world file and a 4326 prj file to indicate WGS 84.  When I use gdalinfo to look at the settings it always indicates  CRS is not defined.  QGis also says the CRS is not defined.  Is there a proper way to define a CRS for rasters that rely on a world file?

 

 

 

Bruce




This message and any enclosures are intended only for the addressee.  Please 

notify the sender by email if you are not the intended recipient.  If you are 

not the intended recipient, you may not use, copy, disclose, or distribute this 

message or its contents or enclosures to any other person and any such actions 

may be unlawful.  Ball reserves the right to monitor and review all messages 

and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121126/b76a2d48/attachment-0001.html>

From jmckenna at gatewaygeomatics.com  Mon Nov 26 07:09:41 2012
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Mon, 26 Nov 2012 11:09:41 -0400
Subject: [gdal-dev] OpenJPEG 2.0 released
In-Reply-To: <50B33BA2.2000303@gmail.com>
References: <201211202023.40035.even.rouault@mines-paris.org>
	<50B2801B.8040300@gmail.com> <1353918557.50b3285de8ad4@imp.free.fr>
	<50B33BA2.2000303@gmail.com>
Message-ID: <50B38635.8040504@gatewaygeomatics.com>

On 12-11-26 5:51 AM, Angelos Tzotsos wrote:
> Thanks Even,
> 
> I have disabled openjpeg2 support until 1.10.
> 
> Cheers,
> Angelos
> 

Thanks Angelos/Even, I will do the same.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/



From even.rouault at mines-paris.org  Mon Nov 26 07:44:08 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Nov 2012 16:44:08 +0100
Subject: [gdal-dev] OpenJPEG 2.0 released
In-Reply-To: <50B38635.8040504@gatewaygeomatics.com>
References: <201211202023.40035.even.rouault@mines-paris.org>
	<50B2801B.8040300@gmail.com> <1353918557.50b3285de8ad4@imp.free.fr>
	<50B33BA2.2000303@gmail.com>
	<50B38635.8040504@gatewaygeomatics.com>
Message-ID: <1353944648.50b38e483fa4e@imp.free.fr>

Selon Jeff McKenna <jmckenna at gatewaygeomatics.com>:

> On 12-11-26 5:51 AM, Angelos Tzotsos wrote:
> > Thanks Even,
> >
> > I have disabled openjpeg2 support until 1.10.
> >
> > Cheers,
> > Angelos
> >
>
> Thanks Angelos/Even, I will do the same.

Just to be clear: if you have already packaged GDAL 1.9 with openjpeg "old" v2
branch, there's no reason to change that right now, unless you have other users
of openjpeg 2.0 or have some other good reason to upgrade it now.

>
> -jeff
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From alisson.uece at gmail.com  Mon Nov 26 09:33:23 2012
From: alisson.uece at gmail.com (Alisson Barbosa)
Date: Mon, 26 Nov 2012 14:33:23 -0300
Subject: [gdal-dev] MULTILINESTRING to MULTIPOLYGON using ogr2ogr
In-Reply-To: <CADEnnONOiM7CZKxPdFpHiGDKwKmaL0J+S5pSm_1CSDnNPTJr_w@mail.gmail.com>
References: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>
	<CALwK9YybdXx9b4ma79HuVPCdrtyCg9__Ga2wWckgfBu3bKHv2A@mail.gmail.com>
	<CAKGFd-wiE5MrgNPYJr4aMMBZhfib9G1LVBCh+XRrGNef3nmz_Q@mail.gmail.com>
	<CADEnnONOiM7CZKxPdFpHiGDKwKmaL0J+S5pSm_1CSDnNPTJr_w@mail.gmail.com>
Message-ID: <CALwK9Yyv-j-RA+kj13gPhcdy9h5WCso+JFSeqPaUisbhhWS2bQ@mail.gmail.com>

I want a command line tool to do the same thing that "Feature to Polygon"
of ArcGIS or Polygonizer plugin of Quantum GIS does. Is there any tool for
this?

2012/11/26 Peter Halls <p.halls at york.ac.uk>

> Alisson, Hugo,
>
>      I think a reason for the lack of response is that the operation
> you need is a tad more involved than is supported by ogr2ogr - which
> performs simple geometrical operations but is really designed to
> perform format translations.
>
>     To go from a spaghetti of lines to polygons requires the
> identification of each future polygon boundary, the assembly of the
> polygon boundary, ensuring that it closes and writing out the new
> polygon.  This much ogr2ogr does.  To go to multipolygons, however,
> requires the further assembly of the related polygons into a combined
> polygon - for example, islands in a lake.  All of this relies on the
> existence of attribute values to identify what belongs to what.
> Further complication is involved if the resultant polygons overlap and
> it is required that these overlaps be identified, although this is not
> required for a polygon shapefile.
>
>     As this process may require intelligence based upon more complex
> attribute relationships, it is probably the case that a program
> (Python, Java, C++, etc) is required to implement the specific logic
> required.
>
>     If you want to read up on the operations involved, one of the most
> approachable texts is 'GIS Basics' by Steve Wise (Taylor & Francis,
> 2002).  The good news is that there are calls in the OGR API to
> implement each of the steps involved.
>
> Best wishes,
>
> Peter
>
> On 26 November 2012 12:24, Hugo Benicio <hbobenicio at gmail.com> wrote:
> > I'm facing a similar problem when trying to convert a shapefile
> containing
> > lines to a shapefile containing polygons.
> > No progress.
> > If you solve it, please, let me know!
> >
> > Thanks in advance.
> >
> >
> > On Mon, Nov 26, 2012 at 8:47 AM, Alisson Barbosa <alisson.uece at gmail.com
> >
> > wrote:
> >>
> >> Can anybody help me?
> >>
> >>
> >> 2012/11/23 Alisson Barbosa <alisson.uece at gmail.com>
> >>>
> >>> Hi friends,
> >>>
> >>> I would like to transform a shape with multilinestring in a shape with
> >>> polygons using ogr2ogr.
> >>>
> >>> Polygon to multilinestring, I use:
> >>> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/Basins3.shp"
> >>> "C:/Users/Alisson/Basins2.shp" -sql "SELECT * FROM Basins2"
> -skipfailures
> >>> -nlt MULTILINESTRING
> >>>
> >>> This works.
> >>>
> >>> Multilinestring to multipolygon, I use:
> >>> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/polygon.shp"
> >>> "C:/Users/AlissonContorno30.shp" -sql "SELECT * FROM Contorno30"
> >>> -skipfailures -nlt MULTIPOLYGON
> >>>
> >>> But, this error appears:
> >>> ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to POLYGON
> >>> type shapefile.
> >>>
> >>> Can you help me?
> >>>
> >>> Best regards,
> >>> --
> >>> Alisson Barbosa
> >>> Systems Analyst - FUNCEME
> >>> M.Sc. in Computer Science - MACC
> >>> Graduate in Computer Science  - UECE
> >>>
> >>>
> >>
> >>
> >>
> >> --
> >> Alisson Barbosa
> >> Systems Analyst - FUNCEME
> >> M.Sc. in Computer Science - MACC
> >> Graduate in Computer Science  - UECE
> >>
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev at lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
>
> ----------------------------------------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor & Team Leader Applications Support and Training,
>                Information Directorate, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: Harry Fairhurst Building, University of York,
>                 Heslington, York YO10 5DD
> This message has the status of a private and personal communication
>
> ----------------------------------------------------------------------------------------------------------------
>



-- 
Alisson Barbosa
Systems Analyst - FUNCEME
M.Sc. in Computer Science - MACC
Graduate in Computer Science  - UECE
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121126/976d8361/attachment.html>

From jluis at ualg.pt  Mon Nov 26 09:53:48 2012
From: jluis at ualg.pt (Joaquim Luis)
Date: Mon, 26 Nov 2012 17:53:48 +0000
Subject: [gdal-dev] MULTILINESTRING to MULTIPOLYGON using ogr2ogr
In-Reply-To: <CALwK9Yyv-j-RA+kj13gPhcdy9h5WCso+JFSeqPaUisbhhWS2bQ@mail.gmail.com>
References: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>
	<CALwK9YybdXx9b4ma79HuVPCdrtyCg9__Ga2wWckgfBu3bKHv2A@mail.gmail.com>
	<CAKGFd-wiE5MrgNPYJr4aMMBZhfib9G1LVBCh+XRrGNef3nmz_Q@mail.gmail.com>
	<CADEnnONOiM7CZKxPdFpHiGDKwKmaL0J+S5pSm_1CSDnNPTJr_w@mail.gmail.com>
	<CALwK9Yyv-j-RA+kj13gPhcdy9h5WCso+JFSeqPaUisbhhWS2bQ@mail.gmail.com>
Message-ID: <50B3ACAC.6090200@ualg.pt>

GMT5 has a tool called gmtstitch that could perhaps help doing the job, 
but I never played enough with it to be more positive about its capacities.

Joaquim

> I want a command line tool to do the same thing that "Feature to 
> Polygon" of ArcGIS or Polygonizer plugin of Quantum GIS does. Is there 
> any tool for this?
>
> 2012/11/26 Peter Halls <p.halls at york.ac.uk <mailto:p.halls at york.ac.uk>>
>
>     Alisson, Hugo,
>
>          I think a reason for the lack of response is that the operation
>     you need is a tad more involved than is supported by ogr2ogr - which
>     performs simple geometrical operations but is really designed to
>     perform format translations.
>
>         To go from a spaghetti of lines to polygons requires the
>     identification of each future polygon boundary, the assembly of the
>     polygon boundary, ensuring that it closes and writing out the new
>     polygon.  This much ogr2ogr does.  To go to multipolygons, however,
>     requires the further assembly of the related polygons into a combined
>     polygon - for example, islands in a lake.  All of this relies on the
>     existence of attribute values to identify what belongs to what.
>     Further complication is involved if the resultant polygons overlap and
>     it is required that these overlaps be identified, although this is not
>     required for a polygon shapefile.
>
>         As this process may require intelligence based upon more complex
>     attribute relationships, it is probably the case that a program
>     (Python, Java, C++, etc) is required to implement the specific logic
>     required.
>
>         If you want to read up on the operations involved, one of the most
>     approachable texts is 'GIS Basics' by Steve Wise (Taylor & Francis,
>     2002).  The good news is that there are calls in the OGR API to
>     implement each of the steps involved.
>
>     Best wishes,
>
>     Peter
>
>     On 26 November 2012 12:24, Hugo Benicio <hbobenicio at gmail.com
>     <mailto:hbobenicio at gmail.com>> wrote:
>     > I'm facing a similar problem when trying to convert a shapefile
>     containing
>     > lines to a shapefile containing polygons.
>     > No progress.
>     > If you solve it, please, let me know!
>     >
>     > Thanks in advance.
>     >
>     >
>     > On Mon, Nov 26, 2012 at 8:47 AM, Alisson Barbosa
>     <alisson.uece at gmail.com <mailto:alisson.uece at gmail.com>>
>     > wrote:
>     >>
>     >> Can anybody help me?
>     >>
>     >>
>     >> 2012/11/23 Alisson Barbosa <alisson.uece at gmail.com
>     <mailto:alisson.uece at gmail.com>>
>     >>>
>     >>> Hi friends,
>     >>>
>     >>> I would like to transform a shape with multilinestring in a
>     shape with
>     >>> polygons using ogr2ogr.
>     >>>
>     >>> Polygon to multilinestring, I use:
>     >>> ogr2ogr -f "ESRI Shapefile" -overwrite
>     "C:/Users/Alisson/Basins3.shp"
>     >>> "C:/Users/Alisson/Basins2.shp" -sql "SELECT * FROM Basins2"
>     -skipfailures
>     >>> -nlt MULTILINESTRING
>     >>>
>     >>> This works.
>     >>>
>     >>> Multilinestring to multipolygon, I use:
>     >>> ogr2ogr -f "ESRI Shapefile" -overwrite
>     "C:/Users/Alisson/polygon.shp"
>     >>> "C:/Users/AlissonContorno30.shp" -sql "SELECT * FROM Contorno30"
>     >>> -skipfailures -nlt MULTIPOLYGON
>     >>>
>     >>> But, this error appears:
>     >>> ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to
>     POLYGON
>     >>> type shapefile.
>     >>>
>     >>> Can you help me?
>     >>>
>     >>> Best regards,
>     >>> --
>     >>> Alisson Barbosa
>     >>> Systems Analyst - FUNCEME
>     >>> M.Sc. in Computer Science - MACC
>     >>> Graduate in Computer Science  - UECE
>     >>>
>     >>>
>     >>
>     >>
>     >>
>     >> --
>     >> Alisson Barbosa
>     >> Systems Analyst - FUNCEME
>     >> M.Sc. in Computer Science - MACC
>     >> Graduate in Computer Science  - UECE
>     >>
>     >>
>     >>
>     >> _______________________________________________
>     >> gdal-dev mailing list
>     >> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     >
>     >
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>     > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>     --
>     ----------------------------------------------------------------------------------------------------------------
>     Peter J Halls, GIS Advisor & Team Leader Applications Support and
>     Training,
>                    Information Directorate, University of York
>     Telephone: 01904 323806     Fax: 01904 323740
>     Snail mail: Harry Fairhurst Building, University of York,
>                     Heslington, York YO10 5DD
>     This message has the status of a private and personal communication
>     ----------------------------------------------------------------------------------------------------------------
>
>
>
>
> -- 
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121126/a62ccee3/attachment-0001.html>

From gcpp.kalxas at gmail.com  Mon Nov 26 10:46:14 2012
From: gcpp.kalxas at gmail.com (Angelos Tzotsos)
Date: Mon, 26 Nov 2012 20:46:14 +0200
Subject: [gdal-dev] OpenJPEG 2.0 released
In-Reply-To: <1353944648.50b38e483fa4e@imp.free.fr>
References: <201211202023.40035.even.rouault@mines-paris.org>
	<50B2801B.8040300@gmail.com> <1353918557.50b3285de8ad4@imp.free.fr>
	<50B33BA2.2000303@gmail.com>
	<50B38635.8040504@gatewaygeomatics.com>
	<1353944648.50b38e483fa4e@imp.free.fr>
Message-ID: <50B3B8F6.3010701@gmail.com>

On 11/26/2012 05:44 PM, Even Rouault wrote:
> Selon Jeff McKenna <jmckenna at gatewaygeomatics.com>:
>
>> On 12-11-26 5:51 AM, Angelos Tzotsos wrote:
>>> Thanks Even,
>>>
>>> I have disabled openjpeg2 support until 1.10.
>>>
>>> Cheers,
>>> Angelos
>>>
>> Thanks Angelos/Even, I will do the same.
> Just to be clear: if you have already packaged GDAL 1.9 with openjpeg "old" v2
> branch, there's no reason to change that right now, unless you have other users
> of openjpeg 2.0 or have some other good reason to upgrade it now.

The issue in my case is that openjpeg was updated upstream in openSUSE 
Factory so the previous gdal package does not find the correct SO name, 
so it breaks.

>
>> -jeff
>>
>>
>>
>> --
>> Jeff McKenna
>> MapServer Consulting and Training Services
>> http://www.gatewaygeomatics.com/
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
Best,
Angelos

-- 
Angelos Tzotsos
Remote Sensing Laboratory
National Technical University of Athens
http://users.ntua.gr/tzotsos


From polimax at mail.ru  Mon Nov 26 10:47:51 2012
From: polimax at mail.ru (Dmitry Baryshnikov)
Date: Mon, 26 Nov 2012 22:47:51 +0400
Subject: [gdal-dev] Current cmake project status
In-Reply-To: <1353917157.831355524@f60.mail.ru>
References: <mailman.21.1353873611.21123.gdal-dev@lists.osgeo.org>
	<1353917157.831355524@f60.mail.ru>
Message-ID: <50B3B957.6020801@mail.ru>

26.11.2012 12:05, ??????? ???????? ?????:
> Hi all! I've just wanted to know what is the current status of cmake 
> project files for GDAL. Use of nmake script shows poor speed when I 
> changing only one file in driver... I think with cmake we could avoid 
> such issues. http://trac.osgeo.org/gdal/wiki/CMake page says that "... 
> is being developed internally by Kitware. It should be delivered 
> soon..." but it was a six month ago...
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Hi,

According the GDAL build features the cmake received in 2.8.8 some 
special capabilities (CMake OBJECT feature). I provide some initial 
cmake scripts,  but luck of time and process is not so fast as expected. 
I plan to work more closely in the next year.
More details on Russian: 
http://blogs.gis-lab.info/bishop/2012/03/21/cmake-for-gdal/

Best regards,
     Dmitry
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121126/83637408/attachment.html>

From gdal at stripfamily.net  Mon Nov 26 11:51:53 2012
From: gdal at stripfamily.net (David Strip)
Date: Mon, 26 Nov 2012 12:51:53 -0700
Subject: [gdal-dev] Deleting GDALColorTable *
Message-ID: <50B3C859.1040709@stripfamily.net>

If I do something like this:
     GDALColorTable * ct = raster_band->GetColorTable()->clone();
     ... bunch of stuff
     delete ct;

Will the destructor be called on the color table represented pointed to 
by ct, or do I have to call GDALDestroyColorTable((GDALColorTableH) ct)

From refriguy68 at yahoo.com  Mon Nov 26 11:59:23 2012
From: refriguy68 at yahoo.com (Robert Zermeno)
Date: Mon, 26 Nov 2012 11:59:23 -0800 (PST)
Subject: [gdal-dev] PDF Creation floating point exception for DEFLATE option?
Message-ID: <1353959963.3077.YahooMailNeo@web121905.mail.ne1.yahoo.com>

GDAL Community,
?
My application generates a geospatial PDF file from a pre-loaded image source.? When generating an image, I keep receiving an exception of:
"exception class EInvalidOp with message 'Invalid floating point operation'".? I am using the respoitory from 11-20-2012.? I am using Borland C compiler (now known as Embarcadero Codegear).? 
?
For Borland, I found a solution at http://digital.ni.com/public.nsf/allkb/10096EA5DC20FC158625773800628E8A?that quited the Invalid floating point operation, but I still get an exception.
?
Finally, I built a simple command line program in MSVC 2005 to step through GDAL source code to find the exception.
?
The exception occurs when using DEFLATE compression option.? The output message I get is located in trees.c (frmts\zlib) from gen_bitlen(s,desc) function lines 532-559.? Zlib is used in pdfcreatecopy.cpp Lines 3496-3501 and 3548.? Line 3548 is where it calls VSIFWriteL().
?
The output string received is:
?
"bit length overflow??? 
code 0 bits 6->7" 
?
or 
?
"bit length overflow??? 
code?6 bits 6->7
code 0 bits 6->7"
?
The code and bits are not always the same.? For me, it did not matter which file I used, it always gave me an overflow notice.
Can anyone or has anyone experienced this issue?? The file still generates but my application is halted and a message is presented of the exception.
?
Robert
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121126/2d6654e1/attachment.html>

From knutfrodesoppel at hotmail.com  Mon Nov 26 12:11:18 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Mon, 26 Nov 2012 21:11:18 +0100
Subject: [gdal-dev] Warping quality with small geolocation arrays
Message-ID: <k90id2$hc9$1@ger.gmane.org>

Dear list,

Warping datasets with geolocation arrays works fine if the arrays have 
the same size as the other raster bands. However, if the geolocation 
arrays are much smaller, the quality is very bad.

Say I have a 2000x2000 px dataset with 100x100 px sized geolocation 
arrays. Then a warped image have only 200x200 blocks of identical 
values, even if the size of the warped image is much larger. If I change 
the interpolation algorithm (neareast, cubic...) the values change 
slightly, but the real output resolution remains low. This is the same 
whether using Python API or gdalwarp. As a workaround I convert the 
geolocation arrays to GCPs. This gives decent warping quality, but is a 
bit awkward.

Is this the expected behavior of the present implementation of 
geolocation arrays in GDAL?

Best regards from Knut-Frode


From even.rouault at mines-paris.org  Mon Nov 26 12:13:32 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Nov 2012 21:13:32 +0100
Subject: [gdal-dev] Deleting GDALColorTable *
In-Reply-To: <50B3C859.1040709@stripfamily.net>
References: <50B3C859.1040709@stripfamily.net>
Message-ID: <201211262113.32944.even.rouault@mines-paris.org>

Le lundi 26 novembre 2012 20:51:53, David Strip a ?crit :
> If I do something like this:
>      GDALColorTable * ct = raster_band->GetColorTable()->clone();
>      ... bunch of stuff
>      delete ct;
> 
> Will the destructor be called on the color table represented pointed to
> by ct, or do I have to call GDALDestroyColorTable((GDALColorTableH) ct)

If GDAL and your code are built with the same VC flags, then using delete is 
OK.

GDALDestroyColorTable((GDALColorTableH) ct) will work in all cases.

> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Mon Nov 26 12:16:09 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Nov 2012 21:16:09 +0100
Subject: [gdal-dev] PDF Creation floating point exception for DEFLATE
	option?
In-Reply-To: <1353959963.3077.YahooMailNeo@web121905.mail.ne1.yahoo.com>
References: <1353959963.3077.YahooMailNeo@web121905.mail.ne1.yahoo.com>
Message-ID: <201211262116.09378.even.rouault@mines-paris.org>

Le lundi 26 novembre 2012 20:59:23, Robert Zermeno a ?crit :
> GDAL Community,
>  
> My application generates a geospatial PDF file from a pre-loaded image
> source.  When generating an image, I keep receiving an exception of:
> "exception class EInvalidOp with message 'Invalid floating point
> operation'".  I am using the respoitory from 11-20-2012.  I am using
> Borland C compiler (now known as Embarcadero Codegear). 
> For Borland, I found a solution at
> http://digital.ni.com/public.nsf/allkb/10096EA5DC20FC158625773800628E8A th
> at quited the Invalid floating point operation, but I still get an
> exception. 
> Finally, I built a simple command line program in MSVC 2005 to step through
> GDAL source code to find the exception. 
> The exception occurs when using DEFLATE compression option.  The output
> message I get is located in trees.c (frmts\zlib) from gen_bitlen(s,desc)
> function lines 532-559.  Zlib is used in pdfcreatecopy.cpp Lines 3496-3501
> and 3548.  Line 3548 is where it calls VSIFWriteL(). 
> The output string received is:
>  
> "bit length overflow   
> code 0 bits 6->7"
>  
> or
>  
> "bit length overflow   
> code 6 bits 6->7
> code 0 bits 6->7"
>  
> The code and bits are not always the same.  For me, it did not matter which
> file I used, it always gave me an overflow notice. Can anyone or has
> anyone experienced this issue?  The file still generates but my
> application is halted and a message is presented of the exception. 

You can ignore the "big length overflow" warnings. They are emitted on stderr. 
You only observe them if GDAL is built with -DDEBUG defined, but they should be 
harmless

If you have exceptions/crashes, it is something else.

> Robert

From warmerdam at pobox.com  Mon Nov 26 13:14:00 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon, 26 Nov 2012 13:14:00 -0800
Subject: [gdal-dev] Warping quality with small geolocation arrays
In-Reply-To: <k90id2$hc9$1@ger.gmane.org>
References: <k90id2$hc9$1@ger.gmane.org>
Message-ID: <50B3DB98.3080604@pobox.com>

On 12-11-26 12:11 PM, Knut-Frode Dagestad wrote:
> Dear list,
>
> Warping datasets with geolocation arrays works fine if the arrays have the same
> size as the other raster bands. However, if the geolocation arrays are much
> smaller, the quality is very bad.
>
> Say I have a 2000x2000 px dataset with 100x100 px sized geolocation arrays.
> Then a warped image have only 200x200 blocks of identical values, even if the
> size of the warped image is much larger. If I change the interpolation
> algorithm (neareast, cubic...) the values change slightly, but the real output
> resolution remains low. This is the same whether using Python API or gdalwarp.
> As a workaround I convert the geolocation arrays to GCPs. This gives decent
> warping quality, but is a bit awkward.
>
> Is this the expected behavior of the present implementation of geolocation
> arrays in GDAL?

Knut-Frode,

The intention is that the geolocation information will be linearly
interpolated from the geolocation array.  However, I gather you are not
seeing that effect.

Looking at the "backmap" it seems that this linear interpolation is not
being done, even though it is (after a fashion) in the forward case
transformation case.  I'd appreciate it if you could submit a bug on
this issue, and I'll look into correcting it.  It is a pretty serious
error.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at pobox.com
light and sound - activate the windows | http://home.gdal.org/warmerda
and watch the world go round - Rush    | Geospatial Software Developer


From knutfrodesoppel at hotmail.com  Mon Nov 26 14:07:32 2012
From: knutfrodesoppel at hotmail.com (Knut-Frode Dagestad)
Date: Mon, 26 Nov 2012 23:07:32 +0100
Subject: [gdal-dev] Warping quality with small geolocation arrays
In-Reply-To: <50B3DB98.3080604@pobox.com>
References: <k90id2$hc9$1@ger.gmane.org> <50B3DB98.3080604@pobox.com>
Message-ID: <k90p70$j8h$1@ger.gmane.org>

Frank,

I created a ticket with the same description as below:
http://trac.osgeo.org/gdal/ticket/4907

My test cases are from self-made Raw-VRTs, so I have no immediate 
reproducable test image/script to attach. However, if useful, I can 
construct an example to attach in a couple of days.

Thank you for looking into this.

Best regards from Knut-Frode



Den 26.11.2012 22:14, skrev Frank Warmerdam:
> On 12-11-26 12:11 PM, Knut-Frode Dagestad wrote:
>> Dear list,
>>
>> Warping datasets with geolocation arrays works fine if the arrays have
>> the same
>> size as the other raster bands. However, if the geolocation arrays are
>> much
>> smaller, the quality is very bad.
>>
>> Say I have a 2000x2000 px dataset with 100x100 px sized geolocation
>> arrays.
>> Then a warped image have only 200x200 blocks of identical values, even
>> if the
>> size of the warped image is much larger. If I change the interpolation
>> algorithm (neareast, cubic...) the values change slightly, but the
>> real output
>> resolution remains low. This is the same whether using Python API or
>> gdalwarp.
>> As a workaround I convert the geolocation arrays to GCPs. This gives
>> decent
>> warping quality, but is a bit awkward.
>>
>> Is this the expected behavior of the present implementation of
>> geolocation
>> arrays in GDAL?
>
> Knut-Frode,
>
> The intention is that the geolocation information will be linearly
> interpolated from the geolocation array.  However, I gather you are not
> seeing that effect.
>
> Looking at the "backmap" it seems that this linear interpolation is not
> being done, even though it is (after a fashion) in the forward case
> transformation case.  I'd appreciate it if you could submit a bug on
> this issue, and I'll look into correcting it.  It is a pretty serious
> error.
>
> Best regards,



From even.rouault at mines-paris.org  Mon Nov 26 14:50:47 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon, 26 Nov 2012 23:50:47 +0100
Subject: [gdal-dev] Space in PDF option OGR_DISPLAY_LAYER_NAMES
In-Reply-To: <loom.20121126T101001-249@post.gmane.org>
References: <loom.20121126T060854-347@post.gmane.org>
	<1353918692.50b328e4161b9@imp.free.fr>
	<loom.20121126T101001-249@post.gmane.org>
Message-ID: <201211262350.47479.even.rouault@mines-paris.org>

Le lundi 26 novembre 2012 10:20:08, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > Selon Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi>:
> > > Hi,
> > > 
> > > Having space characters in the following creation option makes trouble
> > > -co OGR_DISPLAY_LAYER_NAMES="bussipys??kit,kierr??tys,The zoo plan"
> > > 
> > > Layer name "The zoo plan" works fine in the PDF layer tree but
> > > immediately when
> > > I click the model tree button with Acrobat Reader X the whole reader
> > > dies.
> > 
> > I'll try checking in the spec if spaces are illegal, but in any case
> > Acrobat Reader should not die. So perhaps worth reporting to the vendor.
> 
> I believe spaces are OK because I found this geospatial PDF
> http://www.workoutdork.com/misc/gm.pdf from
> http://www.bvcog.org/wp-content/themes/cog/GIS/maps/Geospatial-Guide.pdf
> and the model tree does contain names with spaces. Perhaps GDAL writes the
> spaces in a somehow wrong way. I agree that the reader should not die. I
> will make some small bad behaving PDF and try to send it to Adobe so they
> can research it.

There was indeed something wrong in the way the layer name was written for the 
model tree, which caused invalid PDF structure to be generated when there were 
spaces (and potentially non-alphanumeric characters) in the layer name. This 
should be fixed by r25257

> 
> -Jukka-
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From thomaschristian at gmail.com  Mon Nov 26 17:37:14 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Mon, 26 Nov 2012 17:37:14 -0800 (PST)
Subject: [gdal-dev] ogr2ogr & gdalinfo both crashing on 64-bit Windows 7,
 very little info available
In-Reply-To: <CADEnnOMP=qqh7KWbxbHUZ_ygdU6ef5cRB_HgEp0nBBPBybYbrw@mail.gmail.com>
References: <1353625700962-5018255.post@n6.nabble.com>
	<20121123000608.26885.qmail@s466.sureserver.com>
	<1353719386288-5018502.post@n6.nabble.com>
	<CADEnnOMP=qqh7KWbxbHUZ_ygdU6ef5cRB_HgEp0nBBPBybYbrw@mail.gmail.com>
Message-ID: <1353980234524-5018922.post@n6.nabble.com>

Well thanks for your input Peter, as there is no apparent reason for the
crash I've settled for just trying to build gdal from source on Windows.
This is presenting its own problems and I am currently headed for a new post
in the list...



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/ogr2ogr-gdalinfo-both-crashing-on-64-bit-Windows-7-very-little-info-available-tp5018255p5018922.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From thomaschristian at gmail.com  Mon Nov 26 18:01:13 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Mon, 26 Nov 2012 18:01:13 -0800 (PST)
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
 Oracle support on Windows
Message-ID: <1353981673887-5018926.post@n6.nabble.com>

I've started a couple of threads on this forum recently trying to figure out
similar problems and currently compiling GDAL 1.9.2 from source on Windows
looks like my best option - but STILL I'm getting nowhere. I can't believe
how much time this is taking!

I've set up my nmake.opt file with everything it needs for OCI:

# Add ORACLE support.
# Uncomment the following line to enable OCI Oracle Spatial support.
ORACLE_HOME =	C:\app\mirawan\product\11.2.0
# Uncomment the following if you prefer to build OCI support as a plugin.
# OCI_PLUGIN = YES

!IFDEF ORACLE_HOME
OCI_LIB =	$(ORACLE_HOME)\client_1\sdk\lib\msvc\oci.lib
OCI_INCLUDE =	-I$(ORACLE_HOME)\client_1\sdk\include
!ENDIF

I've verified several times that the relevant files are where I think they
are.

I can compile and install with nmake /f makefile.vc and nmake /f makefile.vc
install with no trouble. No error messages related to OCI are reported in
the build output, even in debug mode (nmake /f makefile.vc DEBUG=1). However
when I try to open an OCI data source I just see 'Unable to open datasource
... with the following drivers'.

I also tried adding OCI support as a plugin but this was even more
frustrating - I followed the steps  here
<http://trac.osgeo.org/gdal/wiki/BuildingOnWindows>   to compile plugins and
nmake ran without any error but apparently nothing changed. TBH I don't even
know if I'm looking at the correct plugin  - I assume I want georaster for
all Oracle support but I can't find any useful documentation on the
relationship between georaster and OCI.

I am pretty much at the point of putting through my screen in anger. Can
anyone give me any idea what's going on here, or a better way of figuring
out what the problem might be?

Even better - can anyone suggest an automated way of exporting Oracle data
to File GeoDatabase that doesn't involve GDAL or FME?

Thanks



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Absolutely-no-progress-trying-to-compile-GDAL-with-Oracle-support-on-Windows-tp5018926.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Mon Nov 26 21:17:19 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 27 Nov 2012 05:17:19 +0000 (UTC)
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
	Oracle support on Windows
References: <1353981673887-5018926.post@n6.nabble.com>
Message-ID: <loom.20121127T061348-347@post.gmane.org>

cheesybiscuits <thomaschristian <at> gmail.com> writes:

> 
> I've started a couple of threads on this forum recently trying to figure out
> similar problems and currently compiling GDAL 1.9.2 from source on Windows
> looks like my best option - but STILL I'm getting nowhere. I can't believe
> how much time this is taking!

I use the ready made binaries for GDAL and Oracle plugin from
http://www.gisinternals.com/sdk/ myself both with Window XP and 7.

-Jukka Rahkonen-




From nikhil.parupalli at iictechnologies.com  Mon Nov 26 21:43:12 2012
From: nikhil.parupalli at iictechnologies.com (Nikhil Sai Parupalli)
Date: Tue, 27 Nov 2012 05:43:12 +0000
Subject: [gdal-dev] map selection -reg
Message-ID: <139560E1825F4648BDA4F32853B530A78CBF44A8@IICEXHCM.iictechnologies.local>

Hi All,

I am working on an application where I have used Dotspatail dll for display of map.
How do we get selected layer information.
I have tried implementing the same with following code but all is not well


   DotSpatial.Controls.IMapLayer laySelected = null;
            DotSpatial.Symbology.FeatureLayer fea = null;
            //string layerSelected = "";

            foreach (DotSpatial.Controls.IMapLayer lay in uxMap.GetFeatureLayers())
            {
                fea = (FeatureLayer)lay;
                ISelection sel = fea.Selection;
              // F = sel.ToFeatureSet();
                List<IFeature> ls1 = new List<IFeature>();

                ls1 = sel.ToFeatureList();
                if (ls1.Count > 0)
                {
                    laySelected = lay;
                    break;
                }
            }

Thanks and Regards
Nikhil Sai Parupalli



Note: Do not print this email until and unless it is really required. Save paper , stay Green
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121127/747827d0/attachment-0001.html>

From bontepaarden at gmail.com  Mon Nov 26 23:50:38 2012
From: bontepaarden at gmail.com (Paul Meems)
Date: Tue, 27 Nov 2012 08:50:38 +0100
Subject: [gdal-dev] map selection -reg
In-Reply-To: <139560E1825F4648BDA4F32853B530A78CBF44A8@IICEXHCM.iictechnologies.local>
References: <139560E1825F4648BDA4F32853B530A78CBF44A8@IICEXHCM.iictechnologies.local>
Message-ID: <CAHNf2YSQJpoS7ZGXh_6MFRh35cwY+F7eFKzSBDYGjTvNyLbgrw@mail.gmail.com>

Hi Nikhil,

This mailing list is about GDAL/OGR.

I think you have more luck in the DotSpatial forum asking these questions:
http://dotspatial.codeplex.com/discussions


--
Paul


2012/11/27 Nikhil Sai Parupalli <nikhil.parupalli at iictechnologies.com>

>  Hi All,
>
>  I am working on an application where I have used Dotspatail dll
> for display of map.
> How do we get selected layer information.
> I have tried implementing the same with following code but all is not well
>
>
>     DotSpatial.Controls.IMapLayer laySelected = null;
>             DotSpatial.Symbology.FeatureLayer fea = null;
>             //string layerSelected = "";
>
>             foreach (DotSpatial.Controls.IMapLayer lay in
> uxMap.GetFeatureLayers())
>             {
>                 fea = (FeatureLayer)lay;
>                 ISelection sel = fea.Selection;
>               // F = sel.ToFeatureSet();
>                 List<IFeature> ls1 = new List<IFeature>();
>
>                 ls1 = sel.ToFeatureList();
>                 if (ls1.Count > 0)
>                 {
>                     laySelected = lay;
>                     break;
>                 }
>             }
>
>  Thanks and Regards
> Nikhil Sai Parupalli
>
>
>
> Note: Do not print this email until and unless it is really required.
> Save paper , stay Green
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121127/425f71a0/attachment.html>

From jukka.rahkonen at mmmtike.fi  Tue Nov 27 00:28:06 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue, 27 Nov 2012 08:28:06 +0000 (UTC)
Subject: [gdal-dev]
	=?utf-8?q?Space_in_PDF_option_OGR=5FDISPLAY=5FLAYER=5F?=
	=?utf-8?q?NAMES?=
References: <loom.20121126T060854-347@post.gmane.org>
	<1353918692.50b328e4161b9@imp.free.fr>
	<loom.20121126T101001-249@post.gmane.org>
	<201211262350.47479.even.rouault@mines-paris.org>
Message-ID: <loom.20121127T091235-204@post.gmane.org>

Even Rouault <even.rouault <at> mines-paris.org> writes:


> 
> There was indeed something wrong in the way the layer name was written for the 
> model tree, which caused invalid PDF structure to be generated when there were 
> spaces (and potentially non-alphanumeric characters) in the layer name. This 
> should be fixed by r25257

Seems to work mostly. However, Adobe Reader X version 10.1.4 shows an error
message when I open my test map. As translated it is roughly
"Font Times_Roman contains a faulty /Bbox tag"

Perhaps because of this my bus stop layer which has both symbols and labels does
not show attributes in the model tree when the labels are visible. When I turn
the labels off the model tree show the attributes again.

-Jukka-




From hbobenicio at gmail.com  Tue Nov 27 03:58:08 2012
From: hbobenicio at gmail.com (Hugo Benicio)
Date: Tue, 27 Nov 2012 08:58:08 -0300
Subject: [gdal-dev] MULTILINESTRING to MULTIPOLYGON using ogr2ogr
In-Reply-To: <50B3ACAC.6090200@ualg.pt>
References: <CALwK9Yy9ueORLp_fSCkg-p5hn86ARj6SqCai=hT2YgY3_pAAiA@mail.gmail.com>
	<CALwK9YybdXx9b4ma79HuVPCdrtyCg9__Ga2wWckgfBu3bKHv2A@mail.gmail.com>
	<CAKGFd-wiE5MrgNPYJr4aMMBZhfib9G1LVBCh+XRrGNef3nmz_Q@mail.gmail.com>
	<CADEnnONOiM7CZKxPdFpHiGDKwKmaL0J+S5pSm_1CSDnNPTJr_w@mail.gmail.com>
	<CALwK9Yyv-j-RA+kj13gPhcdy9h5WCso+JFSeqPaUisbhhWS2bQ@mail.gmail.com>
	<50B3ACAC.6090200@ualg.pt>
Message-ID: <CAKGFd-zn2BREukLCChasCNeT-jJH3CDNSOQmaKY5u6HX3taDMQ@mail.gmail.com>

Thanks for all of your responses...
we're a trying some of your suggestions, using some tools to accomplish
this task.
I think we're close enough now. (the polygon shapefile is almost correctly
generated from a shape with a bunch of lines which compose closed
boundaries of polygons).


On Mon, Nov 26, 2012 at 2:53 PM, Joaquim Luis <jluis at ualg.pt> wrote:

>  GMT5 has a tool called gmtstitch that could perhaps help doing the job,
> but I never played enough with it to be more positive about its capacities.
>
> Joaquim
>
>
> I want a command line tool to do the same thing that "Feature to Polygon"
> of ArcGIS or Polygonizer plugin of Quantum GIS does. Is there any tool for
> this?
>
> 2012/11/26 Peter Halls <p.halls at york.ac.uk>
>
>> Alisson, Hugo,
>>
>>      I think a reason for the lack of response is that the operation
>> you need is a tad more involved than is supported by ogr2ogr - which
>> performs simple geometrical operations but is really designed to
>> perform format translations.
>>
>>     To go from a spaghetti of lines to polygons requires the
>> identification of each future polygon boundary, the assembly of the
>> polygon boundary, ensuring that it closes and writing out the new
>> polygon.  This much ogr2ogr does.  To go to multipolygons, however,
>> requires the further assembly of the related polygons into a combined
>> polygon - for example, islands in a lake.  All of this relies on the
>> existence of attribute values to identify what belongs to what.
>> Further complication is involved if the resultant polygons overlap and
>> it is required that these overlaps be identified, although this is not
>> required for a polygon shapefile.
>>
>>     As this process may require intelligence based upon more complex
>> attribute relationships, it is probably the case that a program
>> (Python, Java, C++, etc) is required to implement the specific logic
>> required.
>>
>>     If you want to read up on the operations involved, one of the most
>> approachable texts is 'GIS Basics' by Steve Wise (Taylor & Francis,
>> 2002).  The good news is that there are calls in the OGR API to
>> implement each of the steps involved.
>>
>> Best wishes,
>>
>> Peter
>>
>> On 26 November 2012 12:24, Hugo Benicio <hbobenicio at gmail.com> wrote:
>> > I'm facing a similar problem when trying to convert a shapefile
>> containing
>> > lines to a shapefile containing polygons.
>> > No progress.
>> > If you solve it, please, let me know!
>> >
>> > Thanks in advance.
>> >
>> >
>> > On Mon, Nov 26, 2012 at 8:47 AM, Alisson Barbosa <
>> alisson.uece at gmail.com>
>> > wrote:
>> >>
>> >> Can anybody help me?
>> >>
>> >>
>> >> 2012/11/23 Alisson Barbosa <alisson.uece at gmail.com>
>> >>>
>> >>> Hi friends,
>> >>>
>> >>> I would like to transform a shape with multilinestring in a shape with
>> >>> polygons using ogr2ogr.
>> >>>
>> >>> Polygon to multilinestring, I use:
>> >>> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/Basins3.shp"
>> >>> "C:/Users/Alisson/Basins2.shp" -sql "SELECT * FROM Basins2"
>> -skipfailures
>> >>> -nlt MULTILINESTRING
>> >>>
>> >>> This works.
>> >>>
>> >>> Multilinestring to multipolygon, I use:
>> >>> ogr2ogr -f "ESRI Shapefile" -overwrite "C:/Users/Alisson/polygon.shp"
>> >>> "C:/Users/AlissonContorno30.shp" -sql "SELECT * FROM Contorno30"
>> >>> -skipfailures -nlt MULTIPOLYGON
>> >>>
>> >>> But, this error appears:
>> >>> ERROR 1: Attempt to write non-polygon (LINESTRING) geometry to POLYGON
>> >>> type shapefile.
>> >>>
>> >>> Can you help me?
>> >>>
>> >>> Best regards,
>> >>> --
>> >>> Alisson Barbosa
>> >>> Systems Analyst - FUNCEME
>> >>> M.Sc. in Computer Science - MACC
>> >>> Graduate in Computer Science  - UECE
>> >>>
>> >>>
>> >>
>> >>
>> >>
>> >> --
>> >> Alisson Barbosa
>> >> Systems Analyst - FUNCEME
>> >> M.Sc. in Computer Science - MACC
>> >> Graduate in Computer Science  - UECE
>> >>
>> >>
>> >>
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev at lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev at lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>  --
>>
>> ----------------------------------------------------------------------------------------------------------------
>> Peter J Halls, GIS Advisor & Team Leader Applications Support and
>> Training,
>>                Information Directorate, University of York
>> Telephone: 01904 323806     Fax: 01904 323740
>> Snail mail: Harry Fairhurst Building, University of York,
>>                 Heslington, York YO10 5DD
>> This message has the status of a private and personal communication
>>
>> ----------------------------------------------------------------------------------------------------------------
>>
>
>
>
> --
> Alisson Barbosa
> Systems Analyst - FUNCEME
> M.Sc. in Computer Science - MACC
> Graduate in Computer Science  - UECE
>
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121127/d93f8e92/attachment.html>

From nicolas.simon at spw.wallonie.be  Tue Nov 27 05:46:36 2012
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Tue, 27 Nov 2012 14:46:36 +0100
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
	Oracle support on Windows
In-Reply-To: <1353981673887-5018926.post@n6.nabble.com>
Message-ID: <94D09947F0049948855245E630E6FA4E011819E3@si0140.mrw.wallonie.int>

Hello,

  Could should try gdalinfo --formats   ?
  It will shows you if OCI driver was correctly included in the build.

  If it's not the case, may be you should force a new rebuild with these commands 
    nmake -f makefile.vc clean
    nmake -f makefile.vc
    nmake -f makefile.vc install

  If you have OCI driver in the list, the problem probably comes from your datasource definition (the string starting with OCI: )

  Nicolas 

-----Message d'origine-----
De : gdal-dev-bounces at lists.osgeo.org
[mailto:gdal-dev-bounces at lists.osgeo.org]De la part de cheesybiscuits
Envoy? : mardi 27 novembre 2012 3:01
? : gdal-dev at lists.osgeo.org
Objet : [gdal-dev] Absolutely no progress trying to compile GDAL with
Oracle support on Windows


I've started a couple of threads on this forum recently trying to figure out
similar problems and currently compiling GDAL 1.9.2 from source on Windows
looks like my best option - but STILL I'm getting nowhere. I can't believe
how much time this is taking!

I've set up my nmake.opt file with everything it needs for OCI:

# Add ORACLE support.
# Uncomment the following line to enable OCI Oracle Spatial support.
ORACLE_HOME =	C:\app\mirawan\product\11.2.0
# Uncomment the following if you prefer to build OCI support as a plugin.
# OCI_PLUGIN = YES

!IFDEF ORACLE_HOME
OCI_LIB =	$(ORACLE_HOME)\client_1\sdk\lib\msvc\oci.lib
OCI_INCLUDE =	-I$(ORACLE_HOME)\client_1\sdk\include
!ENDIF

I've verified several times that the relevant files are where I think they
are.

I can compile and install with nmake /f makefile.vc and nmake /f makefile.vc
install with no trouble. No error messages related to OCI are reported in
the build output, even in debug mode (nmake /f makefile.vc DEBUG=1). However
when I try to open an OCI data source I just see 'Unable to open datasource
... with the following drivers'.

I also tried adding OCI support as a plugin but this was even more
frustrating - I followed the steps  here
<http://trac.osgeo.org/gdal/wiki/BuildingOnWindows>   to compile plugins and
nmake ran without any error but apparently nothing changed. TBH I don't even
know if I'm looking at the correct plugin  - I assume I want georaster for
all Oracle support but I can't find any useful documentation on the
relationship between georaster and OCI.

I am pretty much at the point of putting through my screen in anger. Can
anyone give me any idea what's going on here, or a better way of figuring
out what the problem might be?

Even better - can anyone suggest an automated way of exporting Oracle data
to File GeoDatabase that doesn't involve GDAL or FME?

Thanks



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Absolutely-no-progress-trying-to-compile-GDAL-with-Oracle-support-on-Windows-tp5018926.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev







From traviskirstine at gmail.com  Tue Nov 27 08:20:00 2012
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue, 27 Nov 2012 11:20:00 -0500
Subject: [gdal-dev] KML getting snippets info
Message-ID: <CALtm4h0tiPPZCSPRrXyimXLMOShXpBXzE5O5Jsdx2Rqe_f_5dQ@mail.gmail.com>

Hi all,

Is there any way to extract other information besides name, description and
geometry from a kml file using the ogr kml driver (libexpat).  I'm
specifically looking to get the placemark snippet.

Unfortunately I cannot use LIBKML, I'm restricted to the elgis repo

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121127/f5adea9b/attachment.html>

From tyler.mitchell at actian.com  Tue Nov 27 11:35:11 2012
From: tyler.mitchell at actian.com (Tyler Mitchell)
Date: Tue, 27 Nov 2012 11:35:11 -0800
Subject: [gdal-dev] Seg fault exporting to wkt...
Message-ID: <BFD3DE0C-C015-4368-A0F4-CA85F82A42F6@actian.com>

Just curious why the following two (seemingly similar) approaches using OGR Python access act differently.  Should it act that way?

This works:
 ...
 f1 = lay1.GetFeature(1)
 g1 = f1.GetGeometryRef()
 g1.ExportToWkt()

This seg faults:
 ...
 g1 = lay1.GetFeature(1).GetGeometryRef()
 g1.ExportToWkt()

Same issue with all the GEOS functions I was trying as well.  

Thanks for any thoughts,
Tyler



From even.rouault at mines-paris.org  Tue Nov 27 11:40:30 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 27 Nov 2012 20:40:30 +0100
Subject: [gdal-dev] Seg fault exporting to wkt...
In-Reply-To: <BFD3DE0C-C015-4368-A0F4-CA85F82A42F6@actian.com>
References: <BFD3DE0C-C015-4368-A0F4-CA85F82A42F6@actian.com>
Message-ID: <201211272040.30680.even.rouault@mines-paris.org>

Le mardi 27 novembre 2012 20:35:11, Tyler Mitchell a ?crit :
> Just curious why the following two (seemingly similar) approaches using OGR
> Python access act differently.  Should it act that way?

http://trac.osgeo.org/gdal/wiki/PythonGotchas ...

> 
> This works:
>  ...
>  f1 = lay1.GetFeature(1)
>  g1 = f1.GetGeometryRef()
>  g1.ExportToWkt()
> 
> This seg faults:
>  ...
>  g1 = lay1.GetFeature(1).GetGeometryRef()
>  g1.ExportToWkt()
> 
> Same issue with all the GEOS functions I was trying as well.
> 
> Thanks for any thoughts,
> Tyler
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at mines-paris.org  Tue Nov 27 11:42:16 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 27 Nov 2012 20:42:16 +0100
Subject: [gdal-dev] KML getting snippets info
In-Reply-To: <CALtm4h0tiPPZCSPRrXyimXLMOShXpBXzE5O5Jsdx2Rqe_f_5dQ@mail.gmail.com>
References: <CALtm4h0tiPPZCSPRrXyimXLMOShXpBXzE5O5Jsdx2Rqe_f_5dQ@mail.gmail.com>
Message-ID: <201211272042.16313.even.rouault@mines-paris.org>

Le mardi 27 novembre 2012 17:20:00, Travis Kirstine a ?crit :
> Hi all,
> 
> Is there any way to extract other information besides name, description and
> geometry from a kml file using the ogr kml driver (libexpat). 

... no

> I'm
> specifically looking to get the placemark snippet.
> 
> Unfortunately I cannot use LIBKML, I'm restricted to the elgis repo

Build your own GDAL with LIBKML support and install it in another directory 
...

> 
> Thanks

From even.rouault at mines-paris.org  Tue Nov 27 13:40:06 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue, 27 Nov 2012 22:40:06 +0100
Subject: [gdal-dev] Space in PDF option OGR_DISPLAY_LAYER_NAMES
In-Reply-To: <loom.20121127T091235-204@post.gmane.org>
References: <loom.20121126T060854-347@post.gmane.org>
	<201211262350.47479.even.rouault@mines-paris.org>
	<loom.20121127T091235-204@post.gmane.org>
Message-ID: <201211272240.06303.even.rouault@mines-paris.org>

Le mardi 27 novembre 2012 09:28:06, Jukka Rahkonen a ?crit :
> Even Rouault <even.rouault <at> mines-paris.org> writes:
> > There was indeed something wrong in the way the layer name was written
> > for the model tree, which caused invalid PDF structure to be generated
> > when there were spaces (and potentially non-alphanumeric characters) in
> > the layer name. This should be fixed by r25257
> 
> Seems to work mostly. However, Adobe Reader X version 10.1.4 shows an error
> message when I open my test map. As translated it is roughly
> "Font Times_Roman contains a faulty /Bbox tag"
> 
> Perhaps because of this my bus stop layer which has both symbols and labels
> does not show attributes in the model tree when the labels are visible.
> When I turn the labels off the model tree show the attributes again.

Ah it took me some time to realize that you meant that the error was new after 
the r25257 commit... ok, this is now fixed by r25261

> 
> -Jukka-
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From thomaschristian at gmail.com  Tue Nov 27 17:04:44 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Tue, 27 Nov 2012 17:04:44 -0800 (PST)
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
 Oracle support on Windows
In-Reply-To: <loom.20121127T061348-347@post.gmane.org>
References: <1353981673887-5018926.post@n6.nabble.com>
	<loom.20121127T061348-347@post.gmane.org>
Message-ID: <1354064684042-5019194.post@n6.nabble.com>

Jukka - Thanks for the suggestion. I have extracted the contents of
release-1600-gdal-mapserver.zip ("Compiled binaries in a single .zip
package" ) which seems to include the Oracle plugin (gdal_GEOR.dll and
ogr_OCI.dll).

However OCI is still not listed in gdalinfo --formats, and running my
original ogr2ogr command still fails due to not having the right driver.

Is anything special required to enable / load these plugins when using gdal
tools? I assume this is the case because I also don't see the FGDB format
listed which is also supposed to be included.

Thanks again



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Absolutely-no-progress-trying-to-compile-GDAL-with-Oracle-support-on-Windows-tp5018926p5019194.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From thomaschristian at gmail.com  Tue Nov 27 17:06:02 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Tue, 27 Nov 2012 17:06:02 -0800 (PST)
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
 Oracle support on Windows
In-Reply-To: <94D09947F0049948855245E630E6FA4E011819E3@si0140.mrw.wallonie.int>
References: <1353981673887-5018926.post@n6.nabble.com>
	<94D09947F0049948855245E630E6FA4E011819E3@si0140.mrw.wallonie.int>
Message-ID: <1354064762895-5019195.post@n6.nabble.com>

Nicolas - thanks for your input but I have only ever tried to build with the
plugin enabled. The OCI format is not listed in gdalinfo.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Absolutely-no-progress-trying-to-compile-GDAL-with-Oracle-support-on-Windows-tp5018926p5019195.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From eadam at co.lincoln.or.us  Tue Nov 27 17:19:22 2012
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Tue, 27 Nov 2012 17:19:22 -0800
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
 Oracle support on Windows
In-Reply-To: <1354064684042-5019194.post@n6.nabble.com>
References: <1353981673887-5018926.post@n6.nabble.com>
	<loom.20121127T061348-347@post.gmane.org>
	<1354064684042-5019194.post@n6.nabble.com>
Message-ID: <CACqBkM9dHkDrp3FFK3eRJyLRqQxPP4UUUq8TTwQZ+NR7XG_95g@mail.gmail.com>

On Tue, Nov 27, 2012 at 5:04 PM, cheesybiscuits
<thomaschristian at gmail.com>wrote:

> Jukka - Thanks for the suggestion. I have extracted the contents of
> release-1600-gdal-mapserver.zip ("Compiled binaries in a single .zip
> package" ) which seems to include the Oracle plugin (gdal_GEOR.dll and
> ogr_OCI.dll).
>
>
Typically to use any of these distributions, you need to run the .bat file
to establish the proper environment settings.  Did you run SDKShell.bat or
similar in the shell before trying to use it?  Often, that .bat only sets
it for the duration and context of that shell.




> However OCI is still not listed in gdalinfo --formats, and running my
> original ogr2ogr command still fails due to not having the right driver.
>
>
You might want to also run gdalinfo --version to see if you are indeed
running what you think you are running instead of some other installation
that may be on your computer.

HTH, Eli


> Is anything special required to enable / load these plugins when using gdal
> tools? I assume this is the case because I also don't see the FGDB format
> listed which is also supposed to be included.
>
> Thanks again
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Absolutely-no-progress-trying-to-compile-GDAL-with-Oracle-support-on-Windows-tp5018926p5019194.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121127/8aaf56ea/attachment.html>

From thomaschristian at gmail.com  Tue Nov 27 17:51:46 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Tue, 27 Nov 2012 17:51:46 -0800 (PST)
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
 Oracle support on Windows
In-Reply-To: <CACqBkM9dHkDrp3FFK3eRJyLRqQxPP4UUUq8TTwQZ+NR7XG_95g@mail.gmail.com>
References: <1353981673887-5018926.post@n6.nabble.com>
	<loom.20121127T061348-347@post.gmane.org>
	<1354064684042-5019194.post@n6.nabble.com>
	<CACqBkM9dHkDrp3FFK3eRJyLRqQxPP4UUUq8TTwQZ+NR7XG_95g@mail.gmail.com>
Message-ID: <1354067506859-5019199.post@n6.nabble.com>

Eli - thanks a bunch for mentioning the .bat file - that got Oracle support
working!

I really should have seen that, and the read-me in the same directory
telling me to run it... I've just got into a routine of getting the
binaries, testing with the same commands, and being disappointed.

This may be better placed as a separate question, but hopefully it's an easy
/ quick answer: 

Whilst Oracle support is working FileGDB is not. gisinternals.com claims
ogrinfo --formats includes FileGDB support but I don't seem to have it. I
have the FGDB API (version 10.0?) installed and its binaries are included in
the path, but for some reason this driver isn't available.

Any hints on this last problem would be great. My backup plan is exporting
to Shp but I have some field names longer than 10 characters and I don't
want to dive into that mess



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Absolutely-no-progress-trying-to-compile-GDAL-with-Oracle-support-on-Windows-tp5018926p5019199.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From nixanz at nixanz.com  Tue Nov 27 20:16:18 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Wed, 28 Nov 2012 15:16:18 +1100
Subject: [gdal-dev] Cannot read UTM Ozi .map file
Message-ID: <DE4A507A-9CF4-4CDE-ABF3-F482270D8323@nixanz.com>

Hi GDAL-dev,

I've recently re-compiled GDAL from the trunk after the patch to fix UTM ozi files was applied.  This has worked well for most UTM files I've tried so far, but I've come across one that produces a strange error in my code, but works OK with gdalinfo.  The following code fails for a dataset generated from this .map file and debugging indicates that 'srcWKT' is an empty string (""), and not NULL.

gdalinfo works correctly though (as does gdal_translate) and its output is shown below.

This file pair can be downloaded for testing in a zip from:
		https://dl.dropbox.com/u/12436846/Cradle%20Mountain.zip

---------------------
	GDALDatasetH  hDataset = GDALOpen( [path cStringUsingEncoding:NSASCIIStringEncoding], GA_ReadOnly );
	
	if ( hDataset == NULL )
	{
		NSLog(@"Failed to get dataset from file:  %@", [path lastPathComponent]);
		
		return NULL;
	}
	
	// Get Source coordinate system.
	
	char *srcWKT = (char *)GDALGetProjectionRef( hDataset );
	
	if ( srcWKT == NULL || strlen(srcWKT) <= 0 )
	{
		NSLog(@"Failed to get WKT (%s) from file:  %@", srcWKT, [path lastPathComponent]);
		
		return NULL;
	}
--------------------
Failed to get WKT () from file:  Cradle Mountain_ozf.map
--------------------

--------------------
$ ./gdalinfo /Users/nsands/Public/map/Test/Cradle\ Mountain/Cradle\ Mountain_ozf.map
Driver: OZI/OziExplorer Image File
Files: /Users/nsands/Public/map/Test/Cradle Mountain/Cradle Mountain_ozf.map
Size is 6535, 11880
Coordinate System is `'
GCP Projection = 
PROJCS["UTM Zone 55, Southern Hemisphere",
    GEOGCS["GDA94",
        DATUM["Geocentric_Datum_of_Australia_1994",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6283"]],
--------------------
etc...

Any help with where I'm going wrong would be much appreciated.

Cheers,
Nik.


From szekerest at gmail.com  Wed Nov 28 00:37:30 2012
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 28 Nov 2012 09:37:30 +0100
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
 Oracle support on Windows
In-Reply-To: <1354067506859-5019199.post@n6.nabble.com>
References: <1353981673887-5018926.post@n6.nabble.com>
	<loom.20121127T061348-347@post.gmane.org>
	<1354064684042-5019194.post@n6.nabble.com>
	<CACqBkM9dHkDrp3FFK3eRJyLRqQxPP4UUUq8TTwQZ+NR7XG_95g@mail.gmail.com>
	<1354067506859-5019199.post@n6.nabble.com>
Message-ID: <CACALY+Rr5SZvhEXuN1xoJb_LHG_dRZxFeC08U3RduDpC_gF_=g@mail.gmail.com>

GDAL plugins should either be installed into a /gdalplugins subdirectory
from where the executable is running or set GDAL_DRIVER_PATH to point to
the directory containing these files. With regards to
gisinternals<http://www.gisinternals.com/sdk/>both the oracle and the
filegdb plugins are provided, however you must copy
them to the desired locations manually. You should also download and
provide binaries of the proper version of the OCI (ie. instantclient) and
the FileGDB libraries being available in the PATH, which cannot be
distributed from gisinternals <http://www.gisinternals.com/sdk/> due to
licensing restrictions.

Best regards,

Tamas



2012/11/28 cheesybiscuits <thomaschristian at gmail.com>

> Eli - thanks a bunch for mentioning the .bat file - that got Oracle support
> working!
>
> I really should have seen that, and the read-me in the same directory
> telling me to run it... I've just got into a routine of getting the
> binaries, testing with the same commands, and being disappointed.
>
> This may be better placed as a separate question, but hopefully it's an
> easy
> / quick answer:
>
> Whilst Oracle support is working FileGDB is not. gisinternals.com claims
> ogrinfo --formats includes FileGDB support but I don't seem to have it. I
> have the FGDB API (version 10.0?) installed and its binaries are included
> in
> the path, but for some reason this driver isn't available.
>
> Any hints on this last problem would be great. My backup plan is exporting
> to Shp but I have some field names longer than 10 characters and I don't
> want to dive into that mess
>
>
>
> --
> View this message in context:
> http://osgeo-org.1560.n6.nabble.com/Absolutely-no-progress-trying-to-compile-GDAL-with-Oracle-support-on-Windows-tp5018926p5019199.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121128/ae215aaa/attachment.html>

From Jukka.Rahkonen at mmmtike.fi  Wed Nov 28 01:01:01 2012
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed, 28 Nov 2012 09:01:01 +0000
Subject: [gdal-dev] Space in PDF option OGR_DISPLAY_LAYER_NAMES
Message-ID: <84446DEF76453C439E9E97E438E13A637BDB37@suutari.haapa.mmm.fi>

Even Rouault wrote:
> 
> Le mardi 27 novembre 2012 09:28:06, Jukka Rahkonen a ?crit :
> > Even Rouault <even.rouault <at> mines-paris.org> writes:
> > > There was indeed something wrong in the way the layer name was
> > > written for the model tree, which caused invalid PDF structure to be
> > > generated when there were spaces (and potentially non-alphanumeric
> > > characters) in the layer name. This should be fixed by r25257
> >
> > Seems to work mostly. However, Adobe Reader X version 10.1.4 shows an
> > error message when I open my test map. As translated it is roughly
> > "Font Times_Roman contains a faulty /Bbox tag"
> >
> > Perhaps because of this my bus stop layer which has both symbols and
> > labels does not show attributes in the model tree when the labels are
> visible.
> > When I turn the labels off the model tree show the attributes again.
> 
> Ah it took me some time to realize that you meant that the error was new
> after the r25257 commit... ok, this is now fixed by r25261

I apologize and try to be more explicit in the future.
I repeated the test with r25261 and layer names with spaces are
OK and model tree works also for the labeled layers.   Model tree also shows
non-ASCII characters in layer names now which is nice.
I have tested almost all the options of the PDF driver, most important  
exception being  EXTRA_STREAM which seems to be something that a 
regular power user can't test.  Everything looks good to me now.

-Jukka-

From even.rouault at mines-paris.org  Wed Nov 28 01:36:19 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 28 Nov 2012 10:36:19 +0100
Subject: [gdal-dev] Space in PDF option OGR_DISPLAY_LAYER_NAMES
In-Reply-To: <84446DEF76453C439E9E97E438E13A637BDB37@suutari.haapa.mmm.fi>
References: <84446DEF76453C439E9E97E438E13A637BDB37@suutari.haapa.mmm.fi>
Message-ID: <1354095379.50b5db139f732@imp.free.fr>


> I apologize and try to be more explicit in the future.

No pb. In an ideal world, the regression would have been catched by the
automated regression tests, but as it only showed in Acrobat and not with
poppler rendering, this is not really doable.

> I repeated the test with r25261 and layer names with spaces are
> OK and model tree works also for the labeled layers.   Model tree also shows
> non-ASCII characters in layer names now which is nice.

Great.

Note that for texts in LABELs, there's a limitation to the ASCII character set.
(Font and text management in PDF is really intimidating and would probably
require some helper library)

> I have tested almost all the options of the PDF driver, most important
> exception being  EXTRA_STREAM which seems to be something that a
> regular power user can't test.  Everything looks good to me now.

Yes EXTRA_STREAM is admitedly not aimed at novice end-users. It is mostly
something that an application developer could use to add some custom PDF content
(title, legend, etc..). However if you want to play with it, you can have a look
at the pdf_custom_layout() (around line 1275) of
http://trac.osgeo.org/gdal/browser/trunk/autotest/gdrivers/pdf.py that adds some
ungeoreferenced text to the page. With a bit of curiosity, you could make some
sense of it by looking at "Appendix A - Operator Summary" of
http://www.adobe.com/devnet/acrobat/pdfs/pdf_reference_1-7.pdf and following the
links for the operators of interest.

Even









From lhomme.xavier at gmail.com  Wed Nov 28 07:12:53 2012
From: lhomme.xavier at gmail.com (xavier lhomme)
Date: Wed, 28 Nov 2012 16:12:53 +0100
Subject: [gdal-dev] WFS DefaultSRS OtherSRS
Message-ID: <CACqzBMxe_+-n2dNJ-mfm1PM61ysOAD7P1sjBoNZzXYds9BERKQ@mail.gmail.com>

Hi
 The capability of a WFS source return something like this :

- <wfs:FeatureType>

  <wfs:Name>xxxx</wfs:Name>

  <wfs:Title>WPI_Aug09</wfs:Title>

  <wfs:DefaultSRS>urn:ogc:def:crs:EPSG:6.9:104000</wfs:DefaultSRS>

  <wfs:OtherSRS>urn:ogc:def:crs:EPSG:6.9:4326</wfs:OtherSRS>

- <wfs:OutputFormats>

  <wfs:Format>text/xml;
subType=gml/3.1.1/profiles/gmlsf/1.0.0/0</wfs:Format>

  </wfs:OutputFormats>

- <ows:WGS84BoundingBox>

  <ows:LowerCorner>-178.133333299717 -77.8499999998775</ows:LowerCorner>

  <ows:UpperCorner>179.366666699705 78.9166666697912</ows:UpperCorner>

  </ows:WGS84BoundingBox>

  </wfs:FeatureType>
How the wfs driver handles the OtherSRS ?
 Is he handles only the DefaultSRS ?
berst regards
xavier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121128/36f8f6d6/attachment.html>

From jrepetto at free.fr  Wed Nov 28 08:54:50 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed, 28 Nov 2012 17:54:50 +0100
Subject: [gdal-dev] Cannot read UTM Ozi .map file
In-Reply-To: <DE4A507A-9CF4-4CDE-ABF3-F482270D8323@nixanz.com>
References: <DE4A507A-9CF4-4CDE-ABF3-F482270D8323@nixanz.com>
Message-ID: <50B641DA.5060007@free.fr>

Le 28/11/2012 05:16, Nik Sands a ?crit :
> Hi GDAL-dev,
>
> I've recently re-compiled GDAL from the trunk after the patch to fix UTM ozi files was applied.  This has worked well for most UTM files I've tried so far, but I've come across one that produces a strange error in my code, but works OK with gdalinfo.  The following code fails for a dataset generated from this .map file and debugging indicates that 'srcWKT' is an empty string (""), and not NULL.

Hi Nik,

Try to apply the following patch :


Index: frmts/ozi/ozidataset.cpp
===================================================================
--- frmts/ozi/ozidataset.cpp	(r?vision 25261)
+++ frmts/ozi/ozidataset.cpp	(copie de travail)
@@ -746,7 +746,8 @@

  const char* OZIDataset::GetProjectionRef()
  {
-    return (pszWKT && nGCPCount == 0) ? pszWKT : "";
+//    return (pszWKT && nGCPCount == 0) ? pszWKT : "";
+    return pszWKT;
  }

  /************************************************************************/


Jean-Claude

From etourigny.dev at gmail.com  Wed Nov 28 09:29:30 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Wed, 28 Nov 2012 15:29:30 -0200
Subject: [gdal-dev] CRS not defined with BMP
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E3402BF71@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E3402BF71@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <CA+TxYvNgbaq-f6kDdmeQboj0S7vRn_=G56PqBu+jf3PcALRD9g@mail.gmail.com>

As far as I know, bmp files (like jpeg and gif and probably others)
only support "ESRI World files".  This is not a true CRS definition
though, it only indicated the geotransform.

Even though it is not standard, it would be convenient to update these
drivers to read an associated .prj file

http://www.gdal.org/frmt_bmp.html
http://en.wikipedia.org/wiki/World_file

cheers,
Etienne

On Mon, Nov 26, 2012 at 11:23 AM, Clay, Bruce <bclay at ball.com> wrote:
> I am using GDAL to convert CADRG files to BMP chips for an application
> written to only use BMP.  I have created the BMP chip, BMP world file and a
> 4326 prj file to indicate WGS 84.  When I use gdalinfo to look at the
> settings it always indicates  CRS is not defined.  QGis also says the CRS is
> not defined.  Is there a proper way to define a CRS for rasters that rely on
> a world file?
>
>
>
>
>
>
>
> Bruce
>
> This message and any enclosures are intended only for the addressee.  Please
>
> notify the sender by email if you are not the intended recipient.  If you
> are
>
> not the intended recipient, you may not use, copy, disclose, or distribute
> this
>
> message or its contents or enclosures to any other person and any such
> actions
>
> may be unlawful.  Ball reserves the right to monitor and review all messages
>
> and enclosures sent to or from this email address.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From thomaschristian at gmail.com  Wed Nov 28 09:48:31 2012
From: thomaschristian at gmail.com (cheesybiscuits)
Date: Wed, 28 Nov 2012 09:48:31 -0800 (PST)
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
 Oracle support on Windows
In-Reply-To: <CACALY+Rr5SZvhEXuN1xoJb_LHG_dRZxFeC08U3RduDpC_gF_=g@mail.gmail.com>
References: <1353981673887-5018926.post@n6.nabble.com>
	<loom.20121127T061348-347@post.gmane.org>
	<1354064684042-5019194.post@n6.nabble.com>
	<CACqBkM9dHkDrp3FFK3eRJyLRqQxPP4UUUq8TTwQZ+NR7XG_95g@mail.gmail.com>
	<1354067506859-5019199.post@n6.nabble.com>
	<CACALY+Rr5SZvhEXuN1xoJb_LHG_dRZxFeC08U3RduDpC_gF_=g@mail.gmail.com>
Message-ID: <1354124911449-5019387.post@n6.nabble.com>

Haha amazing! Thanks for your input Tamas.

I had all the relevant Oracle and FileGDB pieces installed, and correctly in
the path. I just needed to copy ogr_FileGDB.dll from
bin\gdal\plugins-external to bin\gdal\plugins and I'm in business.

Thanks all for the assistance, especially when it was a matter of reading
the docs.

I don't see a donate option on the GDAL site but as this is an excellent
tool set with great support I'd be happy to contribute.



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/Absolutely-no-progress-trying-to-compile-GDAL-with-Oracle-support-on-Windows-tp5018926p5019387.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From even.rouault at mines-paris.org  Wed Nov 28 11:45:22 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed, 28 Nov 2012 20:45:22 +0100
Subject: [gdal-dev] WFS DefaultSRS OtherSRS
In-Reply-To: <CACqzBMxe_+-n2dNJ-mfm1PM61ysOAD7P1sjBoNZzXYds9BERKQ@mail.gmail.com>
References: <CACqzBMxe_+-n2dNJ-mfm1PM61ysOAD7P1sjBoNZzXYds9BERKQ@mail.gmail.com>
Message-ID: <201211282045.22541.even.rouault@mines-paris.org>


> How the wfs driver handles the OtherSRS ?
>  Is he handles only the DefaultSRS ?

It will select the DefaultSRS, unless you add as an option like 
&SRSNAME=urn:ogc:def:crs:EPSG:6.9:4326 to the WFS connexion string.

> berst regards
> xavier

From otrov at hush.ai  Wed Nov 28 11:33:47 2012
From: otrov at hush.ai (deb)
Date: Wed, 28 Nov 2012 20:33:47 +0100
Subject: [gdal-dev] Georeference vector data with OGR
Message-ID: <20121128193347.6C1BB10E2C8@smtp.hushmail.com>

Hi,

I asked this question on stackexchange: http://gis.stackexchange.com/questions/42421/dxf-to-georeferenced-shp but did not receive acceptable answer.
I also visited irc channel, but there is no activity.

So I thought to join this mailing list and ask my question.

Sounds desperate, right?
Well, it's not desperate, it's personal project and I'm in my way of learning GIS tools and approaches.

My problem is this: I have vector file in DXF format, which is not georefenced and I want to convert it to SHP and georeference it, without using GUI software with control points matching.

Vector file has bound box, and inside some topological lines that I traced from georefenced TIFF. I know the projection, and I know coordinates or the bound box. I guess that's enough information to do georefencing, but ogr2ogr tool does not allow it. For example with gdal_translate I can georeference TIFF with "-a_ullr" switch, but ogr2ogr does not have such function.

Can you give me some advice how to approach this problem?
I thought to use ogr2ogr and export to geojson or some xml format, then make script which will do shift and linear interpolation, but it doesn't look like good way to me, and I hope I get better advice.

Thanks


From JPalmer at linz.govt.nz  Wed Nov 28 13:26:51 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 29 Nov 2012 10:26:51 +1300
Subject: [gdal-dev] 64bit integers
Message-ID: <666FB8D75E95AE42965A0E76A5E5337E0EDEAAB7F8@prdlsmmsg01.ad.linz.govt.nz>

I have a WFS layer with a 64bit integer field (sufi):

http://wfs.data.linz.govt.nz/83de09e2215a4d0c914dbfe28bb71557/v/x1208/wfs?service=WFS

When using ogr this 64bit integer field gets truncated to 32bit without any warning. E.g

ogrinfo -al 'wfs:http://wfs.data.linz.govt.nz/83de09e2215a4d0c914dbfe28bb71557/v/x1208/wfs?service=WFS&MAXFEATURES=1'

OGRFeature(v:x1208):1384201
  gml_id (String) = x1208.1384201
  id (Integer) = 1384201
  sufi (Integer) = -1519442684
  name (String) = Copy of Daffodil Bay Road
  locality (String) = Sandy Point
  created (String) = 2012-09-04T01:04:02Z
  modified (String) = 2012-09-04T01:04:02Z
  text (String) = (null)
  unofficial_flag (String) = O
  editor (String) = jbedford
  version (Integer) = 1
  edit_action (String) = N
  status (String) = H

This of course then flows through to all drivers such as sqlite, postgresql, mysql, mssql etc.

Should ogr not cast these 64bit integers to an ogr string so data is not lost? At least until http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64 is implemented?

Thanks,
Jeremy


This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From nixanz at nixanz.com  Wed Nov 28 13:54:45 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Thu, 29 Nov 2012 08:54:45 +1100
Subject: [gdal-dev] Cannot read UTM Ozi .map file
In-Reply-To: <50B641DA.5060007@free.fr>
References: <DE4A507A-9CF4-4CDE-ABF3-F482270D8323@nixanz.com>
	<50B641DA.5060007@free.fr>
Message-ID: <9CCB25B8-39A7-4559-85E1-5889C9A09E2C@nixanz.com>

Hi Jean-Claude,

After applying the suggested patch, it no longer errors out in the same way, however, I now get another error just a little further on in my code.

CODE:
---------------------------------
	char *srcWKT = (char *)GDALGetProjectionRef( hDataset );
	
	if ( srcWKT == NULL || strlen(srcWKT) <= 0 )
	{
		NSLog(@"Failed to get WKT (%s) from file:  %@", srcWKT, [path lastPathComponent]);
		
		return NULL;
	}
	
	OGRSpatialReferenceH srcSRS = OSRNewSpatialReference(srcWKT);
	OGRSpatialReferenceH llSRS = OSRCloneGeogCS(srcSRS);
	
	if ( ! llSRS )
	{
		NSLog(@"Failed to get geographic node of source spatial reference system:");
		printf("\n%s\n\n", srcWKT);
		NSLog(@"(path:  %@", path);
		
		return nil;
	}
	
	OGRCoordinateTransformationH ct = OCTNewCoordinateTransformation( srcSRS, llSRS );
	
	if ( ! ct )
	{
		char *srcWKT;
		char *llWKT;
		OSRExportToWkt(srcSRS, &srcWKT);
		OSRExportToWkt(llSRS, &llWKT);
		
		NSLog(@"Failed to create coordinate transformation between source and lat/lon spatial reference systems:");
		printf("\n%s\n\n", srcWKT);
		printf("\n%s\n\n", llWKT);
		
		return nil;
	}
	
	double gt[6];
	CPLErr err = GDALGetGeoTransform( hDataset, gt );
	
	if ( err != CE_None )
	{
		NSLog(@"Failed to get geo-transform (error %d) for file:  %@", err, [path lastPathComponent]);
		return NULL;
	}
---------------------------------

OUTPUT:
---------------------------------
Failed to get geo-transform (error 3) for file:  Cradle Mountain_ozf.map
---------------------------------

I'm afraid this is a bit beyond me, so if you can help, I'd be very grateful.

(The ozf/map files are at:  https://dl.dropbox.com/u/12436846/Cradle%20Mountain.zip .)

Cheers,
Nik.


On 29/11/2012, at 3:54 AM, Jean-Claude Repetto <jrepetto at free.fr> wrote:

> Le 28/11/2012 05:16, Nik Sands a ?crit :
>> Hi GDAL-dev,
>> 
>> I've recently re-compiled GDAL from the trunk after the patch to fix UTM ozi files was applied.  This has worked well for most UTM files I've tried so far, but I've come across one that produces a strange error in my code, but works OK with gdalinfo.  The following code fails for a dataset generated from this .map file and debugging indicates that 'srcWKT' is an empty string (""), and not NULL.
> 
> Hi Nik,
> 
> Try to apply the following patch :
> 
> 
> Index: frmts/ozi/ozidataset.cpp
> ===================================================================
> --- frmts/ozi/ozidataset.cpp	(r?vision 25261)
> +++ frmts/ozi/ozidataset.cpp	(copie de travail)
> @@ -746,7 +746,8 @@
> 
> const char* OZIDataset::GetProjectionRef()
> {
> -    return (pszWKT && nGCPCount == 0) ? pszWKT : "";
> +//    return (pszWKT && nGCPCount == 0) ? pszWKT : "";
> +    return pszWKT;
> }
> 
> /************************************************************************/
> 
> 
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Nov 28 15:07:26 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 29 Nov 2012 00:07:26 +0100
Subject: [gdal-dev] Georeference vector data with OGR
In-Reply-To: <20121128193347.6C1BB10E2C8@smtp.hushmail.com>
References: <20121128193347.6C1BB10E2C8@smtp.hushmail.com>
Message-ID: <201211290007.26796.even.rouault@mines-paris.org>

Le mercredi 28 novembre 2012 20:33:47, deb a ?crit :
> Hi,
> 
> I asked this question on stackexchange:
> http://gis.stackexchange.com/questions/42421/dxf-to-georeferenced-shp but
> did not receive acceptable answer. I also visited irc channel, but there
> is no activity.
> 
> So I thought to join this mailing list and ask my question.
> 
> Sounds desperate, right?
> Well, it's not desperate, it's personal project and I'm in my way of
> learning GIS tools and approaches.
> 
> My problem is this: I have vector file in DXF format, which is not
> georefenced and I want to convert it to SHP and georeference it, without
> using GUI software with control points matching.
> 
> Vector file has bound box, and inside some topological lines that I traced
> from georefenced TIFF. I know the projection, and I know coordinates or
> the bound box. I guess that's enough information to do georefencing, but
> ogr2ogr tool does not allow it. For example with gdal_translate I can
> georeference TIFF with "-a_ullr" switch, but ogr2ogr does not have such
> function.
> 
> Can you give me some advice how to approach this problem?
> I thought to use ogr2ogr and export to geojson or some xml format, then
> make script which will do shift and linear interpolation, but it doesn't
> look like good way to me, and I hope I get better advice.

If you use GDAL trunk (latest revision r25263 from a few minutes ago that will 
be reflected in the -development packages of http://www.gisinternals.com/sdk/ 
in a few hours), a -gcp option has been added to ogr2ogr. See 
http://trac.osgeo.org/gdal/ticket/4604

> 
> Thanks
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From otrov at hush.ai  Wed Nov 28 15:28:05 2012
From: otrov at hush.ai (deb)
Date: Thu, 29 Nov 2012 00:28:05 +0100
Subject: [gdal-dev] Georeference vector data with OGR
Message-ID: <20121128232805.D6FEA10E2C8@smtp.hushmail.com>

On 29 11 2012 at 12:07 AM, "Even Rouault" wrote:
>If you use GDAL trunk (latest revision r25263 from a few minutes 
>ago that will 
>be reflected in the -development packages of 
>http://www.gisinternals.com/sdk/ 
>in a few hours), a -gcp option has been added to ogr2ogr. See 
>http://trac.osgeo.org/gdal/ticket/4604

Isn't that excellent timing? :D

Thanks Even for letting me know, and thanks to devs for making it possible.
I'll try to build latest revision in these couple of hours

Cheers :)


From brett.walker at geometryit.com  Wed Nov 28 16:29:34 2012
From: brett.walker at geometryit.com (Brett Walker)
Date: Thu, 29 Nov 2012 11:29:34 +1100
Subject: [gdal-dev] Character Encoding Problem
Message-ID: <4B95BC7335A13A42AD0D23462F91AE6F616C045DE1@echo.geometryit.com>

Hi All,

I have a problem with a character encoding problem. It could be a UTF-16 to UTF-8 problem or some other encoding problem.

I have an SDE Server with the DB being Oracle from which I am extracting an ESRI Shapefile.

Using ogr2ogr from GDAL to extract the shapefile I am losing every second character from strings. As an example the original string of 'Murray channel' is being extracted as 'Mra hne'.

Using sde2shp from the SDE Server to extract the shapefile I am not losing any characters from strings. But during the extraction I receive the warning:
WARNING: Possible loss of data when converting SE_NSTRING to ANSI string.

Could this problem be that GDAL is not detecting a string of SE_NSTRING and not dealing with it appropriately?

I doubt it would be related to platform, but the SDE Server is running on Windows Server 2003 32-bit and GDAL is running on GNU/Linux 2.6.18-194.el5 64-bit

Thanks or any help,
Brett
Brett Walker <brett.walker at geometryit.com<mailto:brett.walker at geometryit.com>>
Software Developer / Analyst
Geometry Pty Ltd

Telephone               03 6223 1999
Mobile                     0458 498 386
Fax                          03 6223 1988
Web                        www.geometryit.com<http://www.geometryit.com/>
Address                   31 Salamanca Square, Battery Point, TAS 7004, Australia

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121129/dd6a7b4e/attachment.html>

From brett.walker at geometryit.com  Wed Nov 28 17:33:27 2012
From: brett.walker at geometryit.com (Brett Walker)
Date: Thu, 29 Nov 2012 12:33:27 +1100
Subject: [gdal-dev] Character Encoding Problem
In-Reply-To: <4B95BC7335A13A42AD0D23462F91AE6F616C045DE1@echo.geometryit.com>
References: <4B95BC7335A13A42AD0D23462F91AE6F616C045DE1@echo.geometryit.com>
Message-ID: <4B95BC7335A13A42AD0D23462F91AE6F616C045DE3@echo.geometryit.com>

HI,

I have found the cause of the problem. The field of interest in Oracle is defined as NVARCHAR2. It seems that GDAL cannot deal with this data type properly. See http://docs.oracle.com/cd/B19306_01/server.102/b14220/datatype.htm#i14946 from the Oracle documentation regarding the NVARCHAR2 data type.

I took the SDE Server extract of the shapefile (the correct one) and imported it into the same database using a different table name. The newly created table had the corresponding field defined using VARCHAR2.  An extract using GDAL had no problem with it.

I would recommend that either a warning be placed in documentation regarding NVARCHAR2 fields or fix the real problem. One solution is easy, the other hard.

I'll be recommending to our client to change the data type of NVARCHAR2 fields to VARCHAR2.

Brett

From: gdal-dev-bounces at lists.osgeo.org [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Brett Walker
Sent: Thursday, 29 November 2012 11:30 AM
To: gdal-dev at lists.osgeo.org
Subject: [gdal-dev] Character Encoding Problem

Hi All,

I have a problem with a character encoding problem. It could be a UTF-16 to UTF-8 problem or some other encoding problem.

I have an SDE Server with the DB being Oracle from which I am extracting an ESRI Shapefile.

Using ogr2ogr from GDAL to extract the shapefile I am losing every second character from strings. As an example the original string of 'Murray channel' is being extracted as 'Mra hne'.

Using sde2shp from the SDE Server to extract the shapefile I am not losing any characters from strings. But during the extraction I receive the warning:
WARNING: Possible loss of data when converting SE_NSTRING to ANSI string.

Could this problem be that GDAL is not detecting a string of SE_NSTRING and not dealing with it appropriately?

I doubt it would be related to platform, but the SDE Server is running on Windows Server 2003 32-bit and GDAL is running on GNU/Linux 2.6.18-194.el5 64-bit

Thanks or any help,
Brett

Brett Walker <brett.walker at geometryit.com<mailto:brett.walker at geometryit.com>>
Software Developer / Analyst
Geometry Pty Ltd

Telephone               03 6223 1999
Mobile                     0458 498 386
Fax                          03 6223 1988
Web                        www.geometryit.com<http://www.geometryit.com/>
Address                   31 Salamanca Square, Battery Point, TAS 7004, Australia

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121129/7cd120fe/attachment-0001.html>

From pcreso at pcreso.com  Wed Nov 28 18:55:03 2012
From: pcreso at pcreso.com (pcreso at pcreso.com)
Date: Wed, 28 Nov 2012 18:55:03 -0800 (PST)
Subject: [gdal-dev] 64bit integers
In-Reply-To: <666FB8D75E95AE42965A0E76A5E5337E0EDEAAB7F8@prdlsmmsg01.ad.linz.govt.nz>
Message-ID: <1354157703.50157.YahooMailClassic@web122001.mail.ne1.yahoo.com>

Hi Jeremy,
Outside of a GDAL solution, what format is the underlying data stored in?
I have resolved issues like this with Postgis data stores by doing the int64 to string conversion in the query generating the data for the service, or via views on the source tables.
Not the most elegant approach, but one of the reasons a good spatial database is a useful foundation for these sorts of systems.
Brent Wood.

--- On Thu, 11/29/12, Jeremy Palmer <JPalmer at linz.govt.nz> wrote:

From: Jeremy Palmer <JPalmer at linz.govt.nz>
Subject: [gdal-dev] 64bit integers
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Date: Thursday, November 29, 2012, 10:26 AM

I have a WFS layer with a 64bit integer field (sufi):

http://wfs.data.linz.govt.nz/83de09e2215a4d0c914dbfe28bb71557/v/x1208/wfs?service=WFS

When using ogr this 64bit integer field gets truncated to 32bit without any warning. E.g

ogrinfo -al 'wfs:http://wfs.data.linz.govt.nz/83de09e2215a4d0c914dbfe28bb71557/v/x1208/wfs?service=WFS&MAXFEATURES=1'

OGRFeature(v:x1208):1384201
? gml_id (String) = x1208.1384201
? id (Integer) = 1384201
? sufi (Integer) = -1519442684
? name (String) = Copy of Daffodil Bay Road
? locality (String) = Sandy Point
? created (String) = 2012-09-04T01:04:02Z
? modified (String) = 2012-09-04T01:04:02Z
? text (String) = (null)
? unofficial_flag (String) = O
? editor (String) = jbedford
? version (Integer) = 1
? edit_action (String) = N
? status (String) = H

This of course then flows through to all drivers such as sqlite, postgresql, mysql, mssql etc.

Should ogr not cast these 64bit integers to an ogr string so data is not lost? At least until http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64 is implemented?

Thanks,
Jeremy


This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121128/c2de7ba0/attachment.html>

From ashley_c_mort at raytheon.com  Wed Nov 28 20:02:23 2012
From: ashley_c_mort at raytheon.com (mortac8)
Date: Wed, 28 Nov 2012 20:02:23 -0800 (PST)
Subject: [gdal-dev] gdalwarp produces all black output
Message-ID: <1354161743633-5019465.post@n6.nabble.com>

Newbie question here.  I am trying to convert a DTED1 image to GeoTiff.  The
below command gives me a mosaic.tif image that is totally black.

gdalwarp -ot Int16 n29.dt1 mosaic.tif

Here is a link to my source image:
https://www.dropbox.com/s/zjnbshnwmu67o3o/n29.dt1

Any advice is greatly appreciated!  I am on Windows using FWTools 2.4.7.

Thanks! 
Ashley



--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdalwarp-produces-all-black-output-tp5019465.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From JPalmer at linz.govt.nz  Wed Nov 28 20:34:11 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Thu, 29 Nov 2012 17:34:11 +1300
Subject: [gdal-dev] 64bit integers
In-Reply-To: <1354157703.50157.YahooMailClassic@web122001.mail.ne1.yahoo.com>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEAAB7F8@prdlsmmsg01.ad.linz.govt.nz>
	<1354157703.50157.YahooMailClassic@web122001.mail.ne1.yahoo.com>
Message-ID: <2081888476.695725.1354163656284.JavaMail.root@s-101-LINZ>

Hi Brent,

It's in PostgreSQL. We could convert the field to a string data type, but that's not the point. OGR is currently corrupting data without telling the user!

Cheers
Jeremy

________________________________
From: pcreso at pcreso.com [mailto:pcreso at pcreso.com]
Sent: Thursday, 29 November 2012 3:55 p.m.
To: gdal-dev at lists.osgeo.org; Jeremy Palmer
Subject: Re: [gdal-dev] 64bit integers

Hi Jeremy,

Outside of a GDAL solution, what format is the underlying data stored in?

I have resolved issues like this with Postgis data stores by doing the int64 to string conversion in the query generating the data for the service, or via views on the source tables.

Not the most elegant approach, but one of the reasons a good spatial database is a useful foundation for these sorts of systems.

Brent Wood.


--- On Thu, 11/29/12, Jeremy Palmer <JPalmer at linz.govt.nz> wrote:

From: Jeremy Palmer <JPalmer at linz.govt.nz>
Subject: [gdal-dev] 64bit integers
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Date: Thursday, November 29, 2012, 10:26 AM

I have a WFS layer with a 64bit integer field (sufi):

http://wfs.data.linz.govt.nz/83de09e2215a4d0c914dbfe28bb71557/v/x1208/wfs?service=WFS

When using ogr this 64bit integer field gets truncated to 32bit without any warning. E.g

ogrinfo -al 'wfs:http://wfs.data.linz.govt.nz/83de09e2215a4d0c914dbfe28bb71557/v/x1208/wfs?service=WFS&MAXFEATURES=1'

OGRFeature(v:x1208):1384201
  gml_id (String) = x1208.1384201
  id (Integer) = 1384201
  sufi (Integer) = -1519442684
  name (String) = Copy of Daffodil Bay Road
  locality (String) = Sandy Point
  created (String) = 2012-09-04T01:04:02Z
  modified (String) = 2012-09-04T01:04:02Z
  text (String) = (null)
  unofficial_flag (String) = O
  editor (String) = jbedford
  version (Integer) = 1
  edit_action (String) = N
  status (String) = H

This of course then flows through to all drivers such as sqlite, postgresql, mysql, mssql etc.

Should ogr not cast these 64bit integers to an ogr string so data is not lost? At least until http://trac.osgeo.org/gdal/wiki/rfc31_ogr_64 is implemented?

Thanks,
Jeremy


This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz</mc/compose?to=info at linz.govt.nz>) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org</mc/compose?to=gdal-dev at lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121129/2c36c270/attachment.html>

From gdal at stripfamily.net  Wed Nov 28 21:21:59 2012
From: gdal at stripfamily.net (David Strip)
Date: Wed, 28 Nov 2012 22:21:59 -0700
Subject: [gdal-dev] gdalwarp produces all black output
In-Reply-To: <1354161743633-5019465.post@n6.nabble.com>
References: <1354161743633-5019465.post@n6.nabble.com>
Message-ID: <50B6F0F7.5050700@stripfamily.net>

gdalinfo -mm shows your input data file has all it's values in the range 
518 to 2396. When converted to a 16bit tif, these all fall in a range 
that appears black on your screen. You need to rescale the data to fill 
the 16bit range. This is easily done with gdal_translate, which is 
probably what you want to use anyway, since you're not changing the 
projection, only the data format.

gdal_translate -ot Int16 -scale 518 2396 0 32767 n29.dt1 mosaic.tif




From jukka.rahkonen at mmmtike.fi  Wed Nov 28 23:53:38 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu, 29 Nov 2012 07:53:38 +0000 (UTC)
Subject: [gdal-dev] Absolutely no progress trying to compile GDAL with
	Oracle support on Windows
References: <1353981673887-5018926.post@n6.nabble.com>
	<loom.20121127T061348-347@post.gmane.org>
	<1354064684042-5019194.post@n6.nabble.com>
	<CACqBkM9dHkDrp3FFK3eRJyLRqQxPP4UUUq8TTwQZ+NR7XG_95g@mail.gmail.com>
	<1354067506859-5019199.post@n6.nabble.com>
	<CACALY+Rr5SZvhEXuN1xoJb_LHG_dRZxFeC08U3RduDpC_gF_=g@mail.gmail.com>
	<1354124911449-5019387.post@n6.nabble.com>
Message-ID: <loom.20121129T085005-449@post.gmane.org>

cheesybiscuits <thomaschristian <at> gmail.com> writes:


> 
> I don't see a donate option on the GDAL site but as this is an excellent
> tool set with great support I'd be happy to contribute.

GDAL is a OSGeo project and in http://www.osgeo.org/ you can see such a button.
It does not seem to have an option to select which project to support, though.

-Jukka Rahkonen-


From jrepetto at free.fr  Thu Nov 29 03:08:55 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 29 Nov 2012 12:08:55 +0100
Subject: [gdal-dev] Cannot read UTM Ozi .map file
In-Reply-To: <9CCB25B8-39A7-4559-85E1-5889C9A09E2C@nixanz.com>
References: <DE4A507A-9CF4-4CDE-ABF3-F482270D8323@nixanz.com>
	<50B641DA.5060007@free.fr>
	<9CCB25B8-39A7-4559-85E1-5889C9A09E2C@nixanz.com>
Message-ID: <50B74247.20204@free.fr>

Le 28/11/2012 22:54, Nik Sands a ?crit :

> After applying the suggested patch, it no longer errors out in the same way, however, I now get another error just a little further on in my code.
>
> ---------------------------------
> Failed to get geo-transform (error 3) for file:  Cradle Mountain_ozf.map
> ---------------------------------
>
> I'm afraid this is a bit beyond me, so if you can help, I'd be very grateful.

Did you notice that gdalinfo reports the same error ?

$ gdalinfo --debug on -noct Cradle\ Mountain_ozf.map
GDAL: GDALLoadOziMapFile(Cradle Mountain_ozf.map) found file, wasn't 
able to derive a first order geotransform.  Using points as GCPs.
GDAL: GDALOpen(Cradle Mountain_ozf.map, this=0x155a4a0) succeeds as OZI.
Driver: OZI/OziExplorer Image File
GDAL: GDALDefaultOverviews::OverviewScan()
Files: Cradle Mountain_ozf.map
Size is 6535, 11880
Coordinate System is `'
GCP Projection =
PROJCS["UTM Zone 55, Southern Hemisphere",
     GEOGCS["GDA94",
         DATUM["Geocentric_Datum_of_Australia_1994",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6283"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4283"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",147],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",10000000],
     UNIT["Meter",1]]
GCP[  0]: Id=, Info=
           (749,50) -> (410000,5397000,0)
GCP[  1]: Id=, Info=
           (4697,38) -> (415000,5397000,0)
GCP[  2]: Id=, Info=
           (4668,11128) -> (415000,5383000,0)
GCP[  3]: Id=, Info=
           (757,11164) -> (410000,5383000,0)
GCP[  4]: Id=, Info=
           (1532,5600) -> (411000,5390000,0)
GCP[  5]: Id=, Info=
           (3112,1611) -> (413000,5395000,0)
GCP[  6]: Id=, Info=
           (3894,7962) -> (414000,5387000,0)
GCP[  7]: Id=, Info=
           (3890,4794) -> (414000,5391000,0)
GCP[  8]: Id=, Info=
           (2318,9563) -> (412000,5385000,0)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,11880.0)
Upper Right ( 6535.0,    0.0)
Lower Right ( 6535.0,11880.0)
Center      ( 3267.5, 5940.0)
Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
   Overviews: 1634x2970, 654x1188, 327x594, 163x297, 65x119
   Color Table (RGB with 256 entries)
GDAL: GDALClose(Cradle Mountain_ozf.map, this=0x155a4a0)


This is because the quality of the scan is very bad. Look at the text 
"No Camping Allowed", that appears almost twice. You can ask GDAL to 
ignore the problem by setting the environment variable 
OZI_APPROX_GEOTRANSFORM to the value YES (In this case, you can drop the 
patch I sent you yesterday) :

$ OZI_APPROX_GEOTRANSFORM=YES gdalinfo -noct Cradle\ Mountain_ozf.map 
Driver: OZI/OziExplorer Image File
Files: Cradle Mountain_ozf.map
Size is 6535, 11880
Coordinate System is:
PROJCS["UTM Zone 55, Southern Hemisphere",
     GEOGCS["GDA94",
         DATUM["Geocentric_Datum_of_Australia_1994",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6283"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4283"]],
     PROJECTION["Transverse_Mercator"],
     PARAMETER["latitude_of_origin",0],
     PARAMETER["central_meridian",147],
     PARAMETER["scale_factor",0.9996],
     PARAMETER["false_easting",500000],
     PARAMETER["false_northing",10000000],
     UNIT["Meter",1]]
GeoTransform =
   409038.6971553778, 1.27227951543291, 0.00115086216077703
   5397071.561063163, -0.008135856054426157, -1.260559301556319
Corner Coordinates:
Upper Left  (  409038.697, 5397071.561) (145d54'32.19"E, 41d34'22.31"S)
Lower Left  (  409052.369, 5382096.117) (145d54'24.58"E, 41d42'27.83"S)
Upper Right (  417353.044, 5397018.393) (146d 0'31.13"E, 41d34'27.29"S)
Lower Right (  417366.716, 5382042.949) (146d 0'24.27"E, 41d42'32.82"S)
Center      (  413202.707, 5389557.255) (145d57'28.05"E, 41d38'27.60"S)
Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
   Overviews: 1634x2970, 654x1188, 327x594, 163x297, 65x119
   Color Table (RGB with 256 entries)


From etourigny.dev at gmail.com  Thu Nov 29 06:15:27 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 29 Nov 2012 12:15:27 -0200
Subject: [gdal-dev] gdalwarp produces all black output
In-Reply-To: <1354161743633-5019465.post@n6.nabble.com>
References: <1354161743633-5019465.post@n6.nabble.com>
Message-ID: <CA+TxYvPMFHC1vbMnc9cD9L2P9Hr__8Z=K0FphY6Pj+WQaUxhVA@mail.gmail.com>

On Thu, Nov 29, 2012 at 2:02 AM, mortac8 <ashley_c_mort at raytheon.com> wrote:
> Newbie question here.  I am trying to convert a DTED1 image to GeoTiff.  The
> below command gives me a mosaic.tif image that is totally black.
>
> gdalwarp -ot Int16 n29.dt1 mosaic.tif
>
> Here is a link to my source image:
> https://www.dropbox.com/s/zjnbshnwmu67o3o/n29.dt1
>
> Any advice is greatly appreciated!  I am on Windows using FWTools 2.4.7.

BTW,

the gdal binaries that ships with fwtools is quite old - you should
consider installing a more recent version of gdal (either Tomas'
builds[2] or from osgeo4w[3])

from the gdal download page [1] you can read:

Important note: the FWTools binaries are not currently updated with
the latest GDAL versions. In order to benefit from the latest and
greatest, you can refer to the other binary builds mentionned above.


[1] http://trac.osgeo.org/gdal/wiki/DownloadingGdalBinaries#Windows
[2] http://www.gisinternals.com/sdk/
[3] http://trac.osgeo.org/osgeo4w

>
> Thanks!
> Ashley
>
>
>
> --
> View this message in context: http://osgeo-org.1560.n6.nabble.com/gdalwarp-produces-all-black-output-tp5019465.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From joe at joelarson.com  Thu Nov 29 07:28:33 2012
From: joe at joelarson.com (Joe Larson)
Date: Thu, 29 Nov 2012 07:28:33 -0800
Subject: [gdal-dev] Creating new column with filename, scripting shapefiles
Message-ID: <41BD0B53-805F-4644-9BDD-9D50072C93C9@joelarson.com>

I have tried these three methods to add a filename column while scripting a folder of shapefiles, with a Bash script - which results in `Warning 6: Normalized/laundered field name` & `ERROR 1: SQL Expression Parsing Error: syntax error` messages and NULL values in the created column :

#1

for f in *.shp;

do

name=${f%.shp}

ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
done;

#2

for f in *.shp;

do

name=`echo "$f"|sed 's/\.shp$//g'`

ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
done;

#3

for f in *.shp;

do

name=`basename $f .shp`

ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
done;


There's an example here http://trac.osgeo.org/gdal/wiki/FAQVector called "How do I include the source filename in a field when merging hundreds of shapefiles (Windows)?" I also cannot get this to work - getting "unrecognized fieldname" message.

Perhaps my variable does not work in the Bash SQL statement. I'm not sure what's going on in the Windows example.

Regards,
Joe Larson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121129/cd497f34/attachment.html>

From chaitanya.ch at gmail.com  Thu Nov 29 09:54:49 2012
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu, 29 Nov 2012 23:24:49 +0530
Subject: [gdal-dev] Creating new column with filename,
	scripting shapefiles
In-Reply-To: <41BD0B53-805F-4644-9BDD-9D50072C93C9@joelarson.com>
References: <41BD0B53-805F-4644-9BDD-9D50072C93C9@joelarson.com>
Message-ID: <CAMKgpOYi=STZUB0bAHhB8vxQYWVkGjpr-EFhND7j7bnC+v8Xdg@mail.gmail.com>

Joe,

What was the full warning message about the normalized/laundered field
name? Field name is modified when the name is longer than 10 characters or
when a field with same name exists.
Check the name of the newly created field.

As per the update command, I don't think the update command is implemented
in the ogr sql yet. You can do it in the sqlite format, among other rdbms
formats. Use ogr2ogr to convert it to sqlite. update it. convert it back to
shapefile.


On Thu, Nov 29, 2012 at 8:58 PM, Joe Larson <joe at joelarson.com> wrote:

> I have tried these three methods to add a filename column while scripting
> a folder of shapefiles, with a Bash script - which results in `Warning 6:
> Normalized/laundered field name` & `ERROR 1: SQL Expression Parsing Error:
> syntax error` messages and NULL values in the created column :
>
> #1
>
> for f in *.shp;
>
> do
>
> name=${f%.shp}
>
> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
> done;
>
> #2
>
> for f in *.shp;
>
> do
>
> name=`echo "$f"|sed 's/\.shp$//g'`
>
> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
> done;
>
> #3
>
> for f in *.shp;
>
> do
>
> name=`basename $f .shp`
>
> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
> done;
>
>
> There's an example here http://trac.osgeo.org/gdal/wiki/FAQVector called
> "How do I include the source filename in a field when merging hundreds of
> shapefiles (Windows)?" I also cannot get this to work - getting
> "unrecognized fieldname" message.
>
> Perhaps my variable does not work in the Bash SQL statement. I'm not sure
> what's going on in the Windows example.
>
> Regards,
> Joe Larson
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121129/54ee7923/attachment.html>

From joe at joelarson.com  Thu Nov 29 10:13:47 2012
From: joe at joelarson.com (Joe Larson)
Date: Thu, 29 Nov 2012 10:13:47 -0800
Subject: [gdal-dev] Creating new column with filename,
	scripting shapefiles
In-Reply-To: <CAMKgpOYi=STZUB0bAHhB8vxQYWVkGjpr-EFhND7j7bnC+v8Xdg@mail.gmail.com>
References: <41BD0B53-805F-4644-9BDD-9D50072C93C9@joelarson.com>
	<CAMKgpOYi=STZUB0bAHhB8vxQYWVkGjpr-EFhND7j7bnC+v8Xdg@mail.gmail.com>
Message-ID: <3793E0A7-7334-4ED8-A4E3-5E9F959DB908@joelarson.com>

Chaitanya - I believe the normalized/laundered message is a non-issue at this point. I only get that message when I repeatedly run my Bash script against the folder of shapefiles - so it's changing the 'filename' column to 'filename_1' when creating a new column.

I really like your idea of sqlite and will give this a try. Thank you very much _ joe

On Nov 29, 2012, at 9:54:49AM, Chaitanya kumar CH <chaitanya.ch at gmail.com> wrote:

> Joe,
> 
> What was the full warning message about the normalized/laundered field name? Field name is modified when the name is longer than 10 characters or when a field with same name exists.
> Check the name of the newly created field.
> 
> As per the update command, I don't think the update command is implemented in the ogr sql yet. You can do it in the sqlite format, among other rdbms formats. Use ogr2ogr to convert it to sqlite. update it. convert it back to shapefile.
> 
> 
> On Thu, Nov 29, 2012 at 8:58 PM, Joe Larson <joe at joelarson.com> wrote:
> I have tried these three methods to add a filename column while scripting a folder of shapefiles, with a Bash script - which results in `Warning 6: Normalized/laundered field name` & `ERROR 1: SQL Expression Parsing Error: syntax error` messages and NULL values in the created column :
> 
> #1
> 
> for f in *.shp;
> 
> do
> 
> name=${f%.shp}
> 
> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
> done;
> 
> #2
> 
> for f in *.shp;
> 
> do
> 
> name=`echo "$f"|sed 's/\.shp$//g'`
> 
> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
> done;
> 
> #3
> 
> for f in *.shp;
> 
> do
> 
> name=`basename $f .shp`
> 
> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
> done;
> 
> 
> There's an example here http://trac.osgeo.org/gdal/wiki/FAQVector called "How do I include the source filename in a field when merging hundreds of shapefiles (Windows)?" I also cannot get this to work - getting "unrecognized fieldname" message.
> 
> Perhaps my variable does not work in the Bash SQL statement. I'm not sure what's going on in the Windows example.
> 
> Regards,
> Joe Larson
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> 
> +91-9494447584
> 17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121129/b15814d3/attachment.html>

From even.rouault at mines-paris.org  Thu Nov 29 11:00:47 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 29 Nov 2012 20:00:47 +0100
Subject: [gdal-dev] Creating new column with filename,
	scripting shapefiles
In-Reply-To: <41BD0B53-805F-4644-9BDD-9D50072C93C9@joelarson.com>
References: <41BD0B53-805F-4644-9BDD-9D50072C93C9@joelarson.com>
Message-ID: <201211292000.47491.even.rouault@mines-paris.org>

Le jeudi 29 novembre 2012 16:28:33, Joe Larson a ?crit :
> I have tried these three methods to add a filename column while scripting a
> folder of shapefiles, with a Bash script - which results in `Warning 6:
> Normalized/laundered field name` & `ERROR 1: SQL Expression Parsing Error:
> syntax error` messages and NULL values in the created column :
> 
> #1
> 
> for f in *.shp;
> 
> do
> 
> name=${f%.shp}
> 
> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"

--> UPDATE syntax is not supported by OGR SQL dialect. See 
http://gdal.org/ogr/ogr_sql.html

If you use the development version of GDAL (GDAL 1.10dev), you could however 
use the SQLite dialect to do UPDATEs : http://gdal.org/ogr/ogr_sql_sqlite.html

Actually your SQL is incorrect. The correct syntax would be :

ogrinfo $f -dialect SQLite -sql "UPDATE $name SET filename = '$f'"

From etourigny.dev at gmail.com  Thu Nov 29 11:27:43 2012
From: etourigny.dev at gmail.com (Etienne Tourigny)
Date: Thu, 29 Nov 2012 17:27:43 -0200
Subject: [gdal-dev] Creating new column with filename,
	scripting shapefiles
In-Reply-To: <CAMKgpOYi=STZUB0bAHhB8vxQYWVkGjpr-EFhND7j7bnC+v8Xdg@mail.gmail.com>
References: <41BD0B53-805F-4644-9BDD-9D50072C93C9@joelarson.com>
	<CAMKgpOYi=STZUB0bAHhB8vxQYWVkGjpr-EFhND7j7bnC+v8Xdg@mail.gmail.com>
Message-ID: <CA+TxYvNEveyTSAPTzJi_yAkd1CSMNhGJo=1T13Oz8UkAoZUS9A@mail.gmail.com>

On Thu, Nov 29, 2012 at 3:54 PM, Chaitanya kumar CH
<chaitanya.ch at gmail.com> wrote:
> Joe,
>
> What was the full warning message about the normalized/laundered field name?
> Field name is modified when the name is longer than 10 characters or when a
> field with same name exists.
> Check the name of the newly created field.
>
> As per the update command, I don't think the update command is implemented
> in the ogr sql yet. You can do it in the sqlite format, among other rdbms
> formats. Use ogr2ogr to convert it to sqlite. update it. convert it back to
> shapefile.
>

or use the ogr-sqlite interface that is present in gdal 1.10 - it
supposedly works with all ogr data sources

http://www.gdal.org/ogr/ogr_sql_sqlite.html

>
> On Thu, Nov 29, 2012 at 8:58 PM, Joe Larson <joe at joelarson.com> wrote:
>>
>> I have tried these three methods to add a filename column while scripting
>> a folder of shapefiles, with a Bash script - which results in `Warning 6:
>> Normalized/laundered field name` & `ERROR 1: SQL Expression Parsing Error:
>> syntax error` messages and NULL values in the created column :
>>
>> #1
>>
>> for f in *.shp;
>>
>> do
>>
>> name=${f%.shp}
>>
>> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
>> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
>> done;
>>
>> #2
>>
>> for f in *.shp;
>>
>> do
>>
>> name=`echo "$f"|sed 's/\.shp$//g'`
>>
>> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
>> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
>> done;
>>
>> #3
>>
>> for f in *.shp;
>>
>> do
>>
>> name=`basename $f .shp`
>>
>> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
>> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
>> done;
>>
>>
>> There's an example here http://trac.osgeo.org/gdal/wiki/FAQVector called
>> "How do I include the source filename in a field when merging hundreds of
>> shapefiles (Windows)?" I also cannot get this to work - getting
>> "unrecognized fieldname" message.
>>
>> Perhaps my variable does not work in the Bash SQL statement. I'm not sure
>> what's going on in the Windows example.
>>
>> Regards,
>> Joe Larson
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From joe at joelarson.com  Thu Nov 29 11:52:10 2012
From: joe at joelarson.com (Joe Larson)
Date: Thu, 29 Nov 2012 11:52:10 -0800
Subject: [gdal-dev] Creating new column with filename,
	scripting shapefiles
In-Reply-To: <201211292000.47491.even.rouault@mines-paris.org>
References: <41BD0B53-805F-4644-9BDD-9D50072C93C9@joelarson.com>
	<201211292000.47491.even.rouault@mines-paris.org>
Message-ID: <B511C064-71E5-4F20-99B6-FC50F1533B7A@joelarson.com>

Even- your guidance and correction was the solution that worked for me. Thank you! _ joe

On Nov 29, 2012, at 11:00:47AM, Even Rouault <even.rouault at mines-paris.org> wrote:

> Le jeudi 29 novembre 2012 16:28:33, Joe Larson a ?crit :
>> I have tried these three methods to add a filename column while scripting a
>> folder of shapefiles, with a Bash script - which results in `Warning 6:
>> Normalized/laundered field name` & `ERROR 1: SQL Expression Parsing Error:
>> syntax error` messages and NULL values in the created column :
>> 
>> #1
>> 
>> for f in *.shp;
>> 
>> do
>> 
>> name=${f%.shp}
>> 
>> ogrinfo $f -sql "ALTER TABLE $name ADD COLUMN filename character(10)"
>> ogrinfo $f -sql "UPDATE TABLE $name filename = '$f'"
> 
> --> UPDATE syntax is not supported by OGR SQL dialect. See 
> http://gdal.org/ogr/ogr_sql.html
> 
> If you use the development version of GDAL (GDAL 1.10dev), you could however 
> use the SQLite dialect to do UPDATEs : http://gdal.org/ogr/ogr_sql_sqlite.html
> 
> Actually your SQL is incorrect. The correct syntax would be :
> 
> ogrinfo $f -dialect SQLite -sql "UPDATE $name SET filename = '$f'"


From even.rouault at mines-paris.org  Thu Nov 29 11:53:57 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 29 Nov 2012 20:53:57 +0100
Subject: [gdal-dev] 64bit integers
In-Reply-To: <2081888476.695725.1354163656284.JavaMail.root@s-101-LINZ>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEAAB7F8@prdlsmmsg01.ad.linz.govt.nz>
	<1354157703.50157.YahooMailClassic@web122001.mail.ne1.yahoo.com>
	<2081888476.695725.1354163656284.JavaMail.root@s-101-LINZ>
Message-ID: <201211292053.57537.even.rouault@mines-paris.org>

Le jeudi 29 novembre 2012 05:34:11, Jeremy Palmer a ?crit :
> Hi Brent,
> 
> It's in PostgreSQL. We could convert the field to a string data type, but
> that's not the point. OGR is currently corrupting data without telling the
> user!

With latest trunk, you can set the OGR_SETFIELD_NUMERIC_WARNING configruation 
option to YES. This should generate a warning if the conversion to int 
overflows.

From jef at norbit.de  Thu Nov 29 13:36:54 2012
From: jef at norbit.de (=?iso-8859-1?B?SvxyZ2VuIEUu?= Fischer)
Date: Thu, 29 Nov 2012 22:36:54 +0100
Subject: [gdal-dev] 64bit integers
In-Reply-To: <201211292053.57537.even.rouault@mines-paris.org>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEAAB7F8@prdlsmmsg01.ad.linz.govt.nz>
	<1354157703.50157.YahooMailClassic@web122001.mail.ne1.yahoo.com>
	<2081888476.695725.1354163656284.JavaMail.root@s-101-LINZ>
	<201211292053.57537.even.rouault@mines-paris.org>
Message-ID: <20121129213654.GA14831@norbit.de>

Hi Even,

On Thu, 29. Nov 2012 at 20:53:57 +0100, Even Rouault wrote:
> With latest trunk, you can set the OGR_SETFIELD_NUMERIC_WARNING configruation 
> option to YES. This should generate a warning if the conversion to int 
> overflows.

Um, that was meant to produce a warning when a non-numeric (or partly numeric)
string is parsed incompletely to a number.   Overflows are not yet covered (we
don't reset and check errno for ERANGE after the conversion).


J?rgen 

-- 
J?rgen E. Fischer         norBIT GmbH               Tel. +49-4931-918175-31
Dipl.-Inf. (FH)           Rheinstra?e 13            Fax. +49-4931-918175-50
Software Engineer         D-26506 Norden               http://www.norbit.de
committ(ed|ing) to Quantum GIS                         IRC: jef on FreeNode                         

-- 
norBIT Gesellschaft fuer Unternehmensberatung und Informationssysteme mbH
Rheinstrasse 13, 26506 Norden
GF: Jelto Buurman, HR: Amtsgericht Emden, HRB 5502


From even.rouault at mines-paris.org  Thu Nov 29 13:45:03 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 29 Nov 2012 22:45:03 +0100
Subject: [gdal-dev] 64bit integers
In-Reply-To: <20121129213654.GA14831@norbit.de>
References: <666FB8D75E95AE42965A0E76A5E5337E0EDEAAB7F8@prdlsmmsg01.ad.linz.govt.nz>
	<201211292053.57537.even.rouault@mines-paris.org>
	<20121129213654.GA14831@norbit.de>
Message-ID: <201211292245.04002.even.rouault@mines-paris.org>

Le jeudi 29 novembre 2012 22:36:54, J?rgen E. Fischer a ?crit :
> Hi Even,
> 
> On Thu, 29. Nov 2012 at 20:53:57 +0100, Even Rouault wrote:
> > With latest trunk, you can set the OGR_SETFIELD_NUMERIC_WARNING
> > configruation option to YES. This should generate a warning if the
> > conversion to int overflows.
> 
> Um, that was meant to produce a warning when a non-numeric (or partly
> numeric) string is parsed incompletely to a number.   Overflows are not
> yet covered (we don't reset and check errno for ERANGE after the
> conversion).

Those checks are now done per http://trac.osgeo.org/gdal/changeset/25265

> 
> 
> J?rgen

From JPalmer at linz.govt.nz  Thu Nov 29 14:10:08 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Fri, 30 Nov 2012 11:10:08 +1300
Subject: [gdal-dev] 64bit integers
Message-ID: <3aakkshhu6yvoyfb7ax8k57k.1354227004028@email.android.com>

Thanks.

Any idea if the 64bit proposal is going to happen any time soon?

If not, is there an option to implement functionality to cast 64bit fields to string in 1.9.X? This function could still be useful once 64bit integers are implemented.

Cheers
Jeremy


----- Original Message -----
From: Even Rouault <even.rouault at mines-paris.org>
To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Sent: 30/11/2012 10:45 AM
Subject: Re: [gdal-dev] 64bit integers



Le jeudi 29 novembre 2012 22:36:54, J?rgen E. Fischer a ?crit :
> Hi Even,
>
> On Thu, 29. Nov 2012 at 20:53:57 +0100, Even Rouault wrote:
> > With latest trunk, you can set the OGR_SETFIELD_NUMERIC_WARNING
> > configruation option to YES. This should generate a warning if the
> > conversion to int overflows.
>
> Um, that was meant to produce a warning when a non-numeric (or partly
> numeric) string is parsed incompletely to a number.   Overflows are not
> yet covered (we don't reset and check errno for ERANGE after the
> conversion).

Those checks are now done per http://trac.osgeo.org/gdal/changeset/25265

>
>
> J?rgen
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Thu Nov 29 14:15:55 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 29 Nov 2012 23:15:55 +0100
Subject: [gdal-dev] 64bit integers
In-Reply-To: <3aakkshhu6yvoyfb7ax8k57k.1354227004028@email.android.com>
References: <3aakkshhu6yvoyfb7ax8k57k.1354227004028@email.android.com>
Message-ID: <201211292315.55494.even.rouault@mines-paris.org>

Le jeudi 29 novembre 2012 23:10:08, Jeremy Palmer a ?crit :
> Thanks.
> 
> Any idea if the 64bit proposal is going to happen any time soon?

(Not before GDAL 1.10 release, so as to keep GDAL 1.X ABI)

Perhaps are you volunteering ;-) ?

> 
> If not, is there an option to implement functionality to cast 64bit fields
> to string in 1.9.X? This function could still be useful once 64bit
> integers are implemented.

This could be done, but the work must be done on a driver-by-driver basis.

> 
> Cheers
> Jeremy
> 
> 
> ----- Original Message -----
> From: Even Rouault <even.rouault at mines-paris.org>
> To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> Sent: 30/11/2012 10:45 AM
> Subject: Re: [gdal-dev] 64bit integers
> 
> Le jeudi 29 novembre 2012 22:36:54, J?rgen E. Fischer a ?crit :
> > Hi Even,
> > 
> > On Thu, 29. Nov 2012 at 20:53:57 +0100, Even Rouault wrote:
> > > With latest trunk, you can set the OGR_SETFIELD_NUMERIC_WARNING
> > > configruation option to YES. This should generate a warning if the
> > > conversion to int overflows.
> > 
> > Um, that was meant to produce a warning when a non-numeric (or partly
> > numeric) string is parsed incompletely to a number.   Overflows are not
> > yet covered (we don't reset and check errno for ERANGE after the
> > conversion).
> 
> Those checks are now done per http://trac.osgeo.org/gdal/changeset/25265
> 
> > J?rgen
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.

From JPalmer at linz.govt.nz  Thu Nov 29 14:23:44 2012
From: JPalmer at linz.govt.nz (Jeremy Palmer)
Date: Fri, 30 Nov 2012 11:23:44 +1300
Subject: [gdal-dev] 64bit integers
Message-ID: <af1964nkrsa8tmnviq8a7un1.1354227820184@email.android.com>

so just to confirm 64bit integers can not be implemented before 2.X or 1.XX?


----- Original Message -----
From: Even Rouault <even.rouault at mines-paris.org>
To: Jeremy Palmer <JPalmer at linz.govt.nz>
Cc: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
Sent: 30/11/2012 11:15 AM
Subject: Re: [gdal-dev] 64bit integers



Le jeudi 29 novembre 2012 23:10:08, Jeremy Palmer a ?crit :
> Thanks.
>
> Any idea if the 64bit proposal is going to happen any time soon?

(Not before GDAL 1.10 release, so as to keep GDAL 1.X ABI)

Perhaps are you volunteering ;-) ?

>
> If not, is there an option to implement functionality to cast 64bit fields
> to string in 1.9.X? This function could still be useful once 64bit
> integers are implemented.

This could be done, but the work must be done on a driver-by-driver basis.

>
> Cheers
> Jeremy
>
>
> ----- Original Message -----
> From: Even Rouault <even.rouault at mines-paris.org>
> To: "gdal-dev at lists.osgeo.org" <gdal-dev at lists.osgeo.org>
> Sent: 30/11/2012 10:45 AM
> Subject: Re: [gdal-dev] 64bit integers
>
> Le jeudi 29 novembre 2012 22:36:54, J?rgen E. Fischer a ?crit :
> > Hi Even,
> >
> > On Thu, 29. Nov 2012 at 20:53:57 +0100, Even Rouault wrote:
> > > With latest trunk, you can set the OGR_SETFIELD_NUMERIC_WARNING
> > > configruation option to YES. This should generate a warning if the
> > > conversion to int overflows.
> >
> > Um, that was meant to produce a warning when a non-numeric (or partly
> > numeric) string is parsed incompletely to a number.   Overflows are not
> > yet covered (we don't reset and check errno for ERANGE after the
> > conversion).
>
> Those checks are now done per http://trac.osgeo.org/gdal/changeset/25265
>
> > J?rgen
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> This message contains information, which is confidential and may be subject
> to legal privilege. If you are not the intended recipient, you must not
> peruse, use, disseminate, distribute or copy this message. If you have
> received this message in error, please notify us immediately (Phone 0800
> 665 463 or info at linz.govt.nz) and destroy the original message. LINZ
> accepts no responsibility for changes to this email, or for any
> attachments, after its transmission from LINZ. Thank You.

This message contains information, which is confidential and may be subject to legal privilege. If you are not the intended recipient, you must not peruse, use, disseminate, distribute or copy this message. If you have received this message in error, please notify us immediately (Phone 0800 665 463 or info at linz.govt.nz) and destroy the original message. LINZ accepts no responsibility for changes to this email, or for any attachments, after its transmission from LINZ. Thank You.

From even.rouault at mines-paris.org  Thu Nov 29 14:26:59 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu, 29 Nov 2012 23:26:59 +0100
Subject: [gdal-dev] 64bit integers
In-Reply-To: <af1964nkrsa8tmnviq8a7un1.1354227820184@email.android.com>
References: <af1964nkrsa8tmnviq8a7un1.1354227820184@email.android.com>
Message-ID: <201211292326.59563.even.rouault@mines-paris.org>

Le jeudi 29 novembre 2012 23:23:44, Jeremy Palmer a ?crit :
> so just to confirm 64bit integers can not be implemented before 2.X or
> 1.XX?

I think (hope) that 1.10 will be the last of the 1.X series. Implementing 
64bit integer involves ABI changes, so qualifies for 2.0.

From nixanz at nixanz.com  Thu Nov 29 14:32:13 2012
From: nixanz at nixanz.com (Nik Sands)
Date: Fri, 30 Nov 2012 09:32:13 +1100
Subject: [gdal-dev] Cannot read UTM Ozi .map file
In-Reply-To: <50B74247.20204@free.fr>
References: <DE4A507A-9CF4-4CDE-ABF3-F482270D8323@nixanz.com>
	<50B641DA.5060007@free.fr>
	<9CCB25B8-39A7-4559-85E1-5889C9A09E2C@nixanz.com>
	<50B74247.20204@free.fr>
Message-ID: <56EDF04E-88D8-4DF8-8166-418F66342E61@nixanz.com>

Thanks for the reply.  Firstly, it did resolve my problem, so thanks very much for this information.

However, I don't get that warning with gdalinfo (see below).  But I set the environment variable in my code, and it did resolve the problem for me there which is all that matters, I guess.  :-)

I'm curious though, how does the quality of an image affect this?  I had assumed that transforms would work on on pixel x,y coordinates irrespective of the colour values of those pixels.

Anyhow, thanks again for your help.  Much appreciated.

Cheers,
Nik.


----------------------------------
$ env | grep OZI
$ gdalinfo Cradle\ Mountain_ozf.map 
Driver: OZI/OziExplorer Image File
Files: Cradle Mountain_ozf.map
Size is 6535, 11880
Coordinate System is:
PROJCS["UTM Zone 55, Southern Hemisphere",
    GEOGCS["GDA94",
        DATUM["Geocentric_Datum_of_Australia_1994",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6283"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
...
...
...
----------------------------------


On 29/11/2012, at 10:08 PM, Jean-Claude Repetto <jrepetto at free.fr> wrote:

> Le 28/11/2012 22:54, Nik Sands a ?crit :
> 
>> After applying the suggested patch, it no longer errors out in the same way, however, I now get another error just a little further on in my code.
>> 
>> ---------------------------------
>> Failed to get geo-transform (error 3) for file:  Cradle Mountain_ozf.map
>> ---------------------------------
>> 
>> I'm afraid this is a bit beyond me, so if you can help, I'd be very grateful.
> 
> Did you notice that gdalinfo reports the same error ?
> 
> $ gdalinfo --debug on -noct Cradle\ Mountain_ozf.map
> GDAL: GDALLoadOziMapFile(Cradle Mountain_ozf.map) found file, wasn't able to derive a first order geotransform.  Using points as GCPs.
> GDAL: GDALOpen(Cradle Mountain_ozf.map, this=0x155a4a0) succeeds as OZI.
> Driver: OZI/OziExplorer Image File
> GDAL: GDALDefaultOverviews::OverviewScan()
> Files: Cradle Mountain_ozf.map
> Size is 6535, 11880
> Coordinate System is `'
> GCP Projection =
> PROJCS["UTM Zone 55, Southern Hemisphere",
>    GEOGCS["GDA94",
>        DATUM["Geocentric_Datum_of_Australia_1994",
>            SPHEROID["GRS 1980",6378137,298.257222101,
>                AUTHORITY["EPSG","7019"]],
>            TOWGS84[0,0,0,0,0,0,0],
>            AUTHORITY["EPSG","6283"]],
>        PRIMEM["Greenwich",0,
>            AUTHORITY["EPSG","8901"]],
>        UNIT["degree",0.0174532925199433,
>            AUTHORITY["EPSG","9122"]],
>        AUTHORITY["EPSG","4283"]],
>    PROJECTION["Transverse_Mercator"],
>    PARAMETER["latitude_of_origin",0],
>    PARAMETER["central_meridian",147],
>    PARAMETER["scale_factor",0.9996],
>    PARAMETER["false_easting",500000],
>    PARAMETER["false_northing",10000000],
>    UNIT["Meter",1]]
> GCP[  0]: Id=, Info=
>          (749,50) -> (410000,5397000,0)
> GCP[  1]: Id=, Info=
>          (4697,38) -> (415000,5397000,0)
> GCP[  2]: Id=, Info=
>          (4668,11128) -> (415000,5383000,0)
> GCP[  3]: Id=, Info=
>          (757,11164) -> (410000,5383000,0)
> GCP[  4]: Id=, Info=
>          (1532,5600) -> (411000,5390000,0)
> GCP[  5]: Id=, Info=
>          (3112,1611) -> (413000,5395000,0)
> GCP[  6]: Id=, Info=
>          (3894,7962) -> (414000,5387000,0)
> GCP[  7]: Id=, Info=
>          (3890,4794) -> (414000,5391000,0)
> GCP[  8]: Id=, Info=
>          (2318,9563) -> (412000,5385000,0)
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,11880.0)
> Upper Right ( 6535.0,    0.0)
> Lower Right ( 6535.0,11880.0)
> Center      ( 3267.5, 5940.0)
> Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
>  Overviews: 1634x2970, 654x1188, 327x594, 163x297, 65x119
>  Color Table (RGB with 256 entries)
> GDAL: GDALClose(Cradle Mountain_ozf.map, this=0x155a4a0)
> 
> 
> This is because the quality of the scan is very bad. Look at the text "No Camping Allowed", that appears almost twice. You can ask GDAL to ignore the problem by setting the environment variable OZI_APPROX_GEOTRANSFORM to the value YES (In this case, you can drop the patch I sent you yesterday) :
> 
> $ OZI_APPROX_GEOTRANSFORM=YES gdalinfo -noct Cradle\ Mountain_ozf.map Driver: OZI/OziExplorer Image File
> Files: Cradle Mountain_ozf.map
> Size is 6535, 11880
> Coordinate System is:
> PROJCS["UTM Zone 55, Southern Hemisphere",
>    GEOGCS["GDA94",
>        DATUM["Geocentric_Datum_of_Australia_1994",
>            SPHEROID["GRS 1980",6378137,298.257222101,
>                AUTHORITY["EPSG","7019"]],
>            TOWGS84[0,0,0,0,0,0,0],
>            AUTHORITY["EPSG","6283"]],
>        PRIMEM["Greenwich",0,
>            AUTHORITY["EPSG","8901"]],
>        UNIT["degree",0.0174532925199433,
>            AUTHORITY["EPSG","9122"]],
>        AUTHORITY["EPSG","4283"]],
>    PROJECTION["Transverse_Mercator"],
>    PARAMETER["latitude_of_origin",0],
>    PARAMETER["central_meridian",147],
>    PARAMETER["scale_factor",0.9996],
>    PARAMETER["false_easting",500000],
>    PARAMETER["false_northing",10000000],
>    UNIT["Meter",1]]
> GeoTransform =
>  409038.6971553778, 1.27227951543291, 0.00115086216077703
>  5397071.561063163, -0.008135856054426157, -1.260559301556319
> Corner Coordinates:
> Upper Left  (  409038.697, 5397071.561) (145d54'32.19"E, 41d34'22.31"S)
> Lower Left  (  409052.369, 5382096.117) (145d54'24.58"E, 41d42'27.83"S)
> Upper Right (  417353.044, 5397018.393) (146d 0'31.13"E, 41d34'27.29"S)
> Lower Right (  417366.716, 5382042.949) (146d 0'24.27"E, 41d42'32.82"S)
> Center      (  413202.707, 5389557.255) (145d57'28.05"E, 41d38'27.60"S)
> Band 1 Block=64x64 Type=Byte, ColorInterp=Palette
>  Overviews: 1634x2970, 654x1188, 327x594, 163x297, 65x119
>  Color Table (RGB with 256 entries)
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jrepetto at free.fr  Thu Nov 29 14:45:38 2012
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Thu, 29 Nov 2012 23:45:38 +0100
Subject: [gdal-dev] Cannot read UTM Ozi .map file
In-Reply-To: <56EDF04E-88D8-4DF8-8166-418F66342E61@nixanz.com>
References: <DE4A507A-9CF4-4CDE-ABF3-F482270D8323@nixanz.com>
	<50B641DA.5060007@free.fr>
	<9CCB25B8-39A7-4559-85E1-5889C9A09E2C@nixanz.com>
	<50B74247.20204@free.fr>
	<56EDF04E-88D8-4DF8-8166-418F66342E61@nixanz.com>
Message-ID: <50B7E592.10705@free.fr>

On 29/11/2012 23:32, Nik Sands wrote:
> Thanks for the reply.  Firstly, it did resolve my problem, so thanks very much for this information.
> 
> However, I don't get that warning with gdalinfo .

You have to use the debug switch (look at the command I used in my
previous post).


From ngarel at micromine.com  Thu Nov 29 23:16:02 2012
From: ngarel at micromine.com (ngarel)
Date: Thu, 29 Nov 2012 23:16:02 -0800 (PST)
Subject: [gdal-dev] MSSQL Spatial and 3D issue
In-Reply-To: <1339479483071-4980634.post@n6.nabble.com>
References: <125F609FE1635548AF411AFA01558DFA3EEF637F22@per-srv-em1>
	<CACALY+STi42iFO2cRQi3JVUGU3vHFtuNH59vkP+taegj9yLvcw@mail.gmail.com>
	<1339479483071-4980634.post@n6.nabble.com>
Message-ID: <1354259762740-5019794.post@n6.nabble.com>

Thanks for that...I tried all different formats and looked into your changes. 

Could not retrieve my Z coordinate using wkb format because you created a
new geometry format called *wkbzm*.

Please update the doc (http://www.gdal.org/ogr/drv_mssqlspatial.html) and
don't forget to specify that wkbzm is only available for SQL Server 2012:
AsBinaryZM() does not exist in sql server 2008 see error thrown below:

Could not find method 'AsBinaryZM' for type
'Microsoft.SqlServer.Types.SqlGeometry' in assembly
'Microsoft.SqlServer.Types'




--
View this message in context: http://osgeo-org.1560.n6.nabble.com/gdal-dev-MSSQL-Spatial-and-3D-issue-tp4892552p5019794.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.

From jukka.rahkonen at mmmtike.fi  Fri Nov 30 03:41:56 2012
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri, 30 Nov 2012 11:41:56 +0000 (UTC)
Subject: [gdal-dev] GDAL and Spatialite 4.0
Message-ID: <loom.20121130T122854-809@post.gmane.org>

Hi,

Spatialite 4.0 is now released
https://groups.google.com/forum/?fromgroups=#!topic/spatialite-users/hunabzpRJsY

I made a very quick trial by reading some data from Spatialite 4.0 database with
GDAL-dev from gisinternals.com which is compiled with libspatialite-3.0.0.
Reading seemed to be successful. However, I wonder if I can trust that
spatialite 3.0 reads version 4.0 databases correctly. Should I continue to use
Spatialite 3.0 databases until I can use some version of GDAL which is compiled
with Spatialite 4.0?

-Jukka Rahkonen-


From even.rouault at mines-paris.org  Fri Nov 30 04:07:23 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 30 Nov 2012 13:07:23 +0100
Subject: [gdal-dev] GDAL and Spatialite 4.0
In-Reply-To: <loom.20121130T122854-809@post.gmane.org>
References: <loom.20121130T122854-809@post.gmane.org>
Message-ID: <1354277243.50b8a17bf1df2@imp.free.fr>

Selon Jukka Rahkonen <jukka.rahkonen at mmmtike.fi>:

> Hi,
>
> Spatialite 4.0 is now released
>
https://groups.google.com/forum/?fromgroups=#!topic/spatialite-users/hunabzpRJsY
>
> I made a very quick trial by reading some data from Spatialite 4.0 database
> with
> GDAL-dev from gisinternals.com which is compiled with libspatialite-3.0.0.
> Reading seemed to be successful. However, I wonder if I can trust that
> spatialite 3.0 reads version 4.0 databases correctly. Should I continue to
> use
> Spatialite 3.0 databases until I can use some version of GDAL which is
> compiled
> with Spatialite 4.0?

GDAL-dev should be able to read succesfully DBs generated by spatialite 4.0
(read support of spatialite DBs in the SQLite driver doesn't require linking
against spatialite). To prevent potential issues that could occur with updates,
the SQLite driver will disable the update features if the opened DB was
generated by spatialite 4.0 but the runtime libspatialite that links with GDAL
is older than spatialite 4.0

>
> -Jukka Rahkonen-
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



From Pierrick.BRIHAYE at region-bretagne.fr  Fri Nov 30 04:52:57 2012
From: Pierrick.BRIHAYE at region-bretagne.fr (Pierrick.BRIHAYE at region-bretagne.fr)
Date: Fri, 30 Nov 2012 13:52:57 +0100
Subject: [gdal-dev] Mixed SRSes ?
Message-ID: <OF30824E97.02DF5A28-ONC1257AC6.00465BF1-C1257AC6.0046E7D0@LocalDomain>

Hello,

When I try to export some GML files to .shp (using : .\bin\ogr2ogr.exe -f 
"ESRI Shapefile" polygons.shp polygons.gml -t_srs EPSG:27572 -nlt POLYGON 
-lco ENCODING=ISO-8859-1), with ogr2ogr version "GDAL 1.9.2, released 
2012/10/08" on Windows, I get :

Can't transform coordinates, source layer has no
coordinate system.  Use -s_srs to set one.

I guess this is due to mixed SRSes in my files (namely "
http://www.opengis.net/gml/srs/epsg.xml#27572" and ""
http://www.opengis.net/gml/srs/epsg.xml#27562").

If so, how could I get around my problem ?

Cheers,

--
Pierrick Brihaye
Coordinateur du p?le ressources / m?diation
SINPA / DTP
Conseil R?gional de Bretagne
2 rue Gabriel Germain 
35000 Rennes
+33 2 22 93 98 24
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121130/763dca63/attachment.html>

From mateusz at loskot.net  Fri Nov 30 05:31:23 2012
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri, 30 Nov 2012 13:31:23 +0000
Subject: [gdal-dev] Fwd: [PostGIS] #2122: [raster] Real extent feature lost
 after metadata as views
In-Reply-To: <CABUeae9BfMQXxBh0ftbS3h3dLZPYsp6rQiBaW=BeE2rX8TSXTw@mail.gmail.com>
References: <049.50c65809f0e5a52cc32f825d7ea3116e@osgeo.org>
	<CABUeae9BfMQXxBh0ftbS3h3dLZPYsp6rQiBaW=BeE2rX8TSXTw@mail.gmail.com>
Message-ID: <CABUeae9QVVKVrS9vdro76SyWBEY_FXhQVhwZTS=OsAHOJMjCbw@mail.gmail.com>

Hi,

I've reported ticket to PostGIS Raster about change in the concept of regular
blocking, that may be of interest here, especially the PostGIS Raster driver
developers and users. Details below.

If anyone has comments or ideas to this issue in PostGIS,
please post it either as follow-up to the thread on postgis-devel
or to the PostGIS trac at http://trac.osgeo.org/postgis/ticket/2122

Mat

---------- Forwarded message ----------
From: Mateusz Loskot <mateusz at loskot.net>
Date: 30 November 2012 12:53
Subject: Re: [PostGIS] #2122: [raster] Real extent feature lost after
metadata as views
To: trac at osgeo.org
Cc: PostGIS Development Discussion <postgis-devel at postgis.refractions.net>


Folks,

I've just reported this ticked and I'd appreciate if we could discuss it
and come up with a usable solution.

Mat

On 30 November 2012 12:51, PostGIS <trac at osgeo.org> wrote:
> #2122: [raster] Real extent feature lost after metadata as views
> ----------------------------------------------------+-----------------------
>  Reporter:  mloskot                                 |       Owner:  dustymugs
>      Type:  defect                                  |      Status:  new
>  Priority:  medium                                  |   Milestone:
> Component:  raster                                  |     Version:  trunk
>  Keywords:  regular blocking,raster,extent,padding  |
> ----------------------------------------------------+-----------------------
>  It seems, we've overlooked one feature while migrating from table to view
>  for the raster_columns (#1216, #1319). It is quite an important feature.
>
>  With the raster_columns as table, it was possible to set real spatial
>  extent of raster data, regardless of physical size of raster blob.
>  It means, it was possible to 'cut off' any possible padding
>  framing the real raster data.
>
>  With the raster_columns as view, spatial extent is calculated based on
>  'worldfile' metadata and actual width and height of raster matrix.
>
>  This is an undesired difference, generally, but seems to mostly affect
>  uses of regular blocking.
>
>  Previously, it was possible to specify raster2pgsql with arbitrary block
>  size.
>  If the block size was not divinding the input raster evenly, the loader
>  would
>  generate padding along the right and bottom edges of right-most and
>  bottom-most tiles, but the spatial extent of the whole tiles coverage
>  written
>  into raster_columns did not include that padding.
>  It was extent of real data, ragardless physical pixel dimensions were
>  increased
>  by the padding.
>
>  Currently, with the raster_columns being a view, padding affects spatial
>  extent.
>
>  For example:
>
>   * Input raster: [http://download.osgeo.org/gdal/data/gtiff/ utm.tif] from
>  GDAL test data:
>
>  {{{
>  f:\data\Test\pgraster\blocking>gdalinfo utm.tif
>  Driver: GTiff/GeoTIFF
>  Files: utm.tif
>  Size is 512, 512
>  Coordinate System is:
>  PROJCS["NAD27 / UTM zone 11N",
>      GEOGCS["NAD27",
>          DATUM["North_American_Datum_1927",
>              SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
>                  AUTHORITY["EPSG","7008"]],
>              AUTHORITY["EPSG","6267"]],
>          PRIMEM["Greenwich",0],
>          UNIT["degree",0.0174532925199433],
>          AUTHORITY["EPSG","4267"]],
>      PROJECTION["Transverse_Mercator"],
>      PARAMETER["latitude_of_origin",0],
>      PARAMETER["central_meridian",-117],
>      PARAMETER["scale_factor",0.9996],
>      PARAMETER["false_easting",500000],
>      PARAMETER["false_northing",0],
>      UNIT["metre",1,
>          AUTHORITY["EPSG","9001"]],
>      AUTHORITY["EPSG","26711"]]
>  Origin = (440720.000000000000000,3751320.000000000000000)
>  Pixel Size = (60.000000000000000,-60.000000000000000)
>  Metadata:
>    AREA_OR_POINT=Area
>  Image Structure Metadata:
>    INTERLEAVE=BAND
>  Corner Coordinates:
>  Upper Left  (  440720.000, 3751320.000) (117d38'28.21"W, 33d54' 8.47"N)
>  Lower Left  (  440720.000, 3720600.000) (117d38'20.79"W, 33d37'31.04"N)
>  Upper Right (  471440.000, 3751320.000) (117d18'32.07"W, 33d54'13.08"N)
>  Lower Right (  471440.000, 3720600.000) (117d18'28.50"W, 33d37'35.61"N)
>  Center      (  456080.000, 3735960.000) (117d28'27.39"W, 33d45'52.46"N)
>  Band 1 Block=512x16 Type=Byte, ColorInterp=Gray
>  }}}
>
>   * Block 256x256
>
>  {{{
>  raster2pgsql -C -r -t 256x256 public.utm256 utm.tif
>  }}}
>
>  The loader cut the raster evenly, so no padding added, spatial extent the
>  same as original:
>
>  {{{
>  test=# SELECT ST_Extent(rast::geometry) FROM utm256;
>               st_extent
>  ------------------------------------
>   BOX(440720 3720600,471440 3751320)
>  (1 row)
>  }}}
>
>   * Block 300x300
>
>  {{{
>  raster2pgsql -C -r -t 300x300 public.utm300 utm.tif
>  }}}
>
>  The loader added padding, so spatial extent increased rightwards and
>  downwards:
>
>  {{{
>  test=# SELECT ST_Extent(rast::geometry) FROM utm300x300;
>               st_extent
>  ------------------------------------
>   BOX(440720 3715320,476720 3751320)
>  (1 row)
>  }}}
>
>
>  This is a significant change in behaviour, a regression which
>  I'm reporting as a bug.
>
>  Apparently, PostGIS Raster driver in GDAL 1.9.2 is affected.
>  I tried to export the coverages from the two tables loaded above, on
>  Windows:
>
>  {{{
>  set CONN=PG:dbname=test user=mloskot mode=2
>  FOR %%t IN (utm256 utm300) DO (
>      gdal_translate -of GTIff "%CONN% table=%%t" %%t.tif
>          gdalinfo %%t.tif
>  )
>  }}}
>
>  First, similarly to the SQL results above, gdalinfo reports changed
>  spatial extent for the utm300.tif file.
>  Second, the padding strips are exported, whereas in normal situation
>  they should be discarded.
>  I'm going to attach both files, utm256.tif and utm300.tif:
>
>
>  ----
>
>
>  I'd like to bring the previous behaviour back.
>
>  I'd like to propose change in the header of serialised format,
>  and add 4 slots of 16 bytes:
>
>  {{{
>  struct rt_raster_serialized_t {
>      /*---[ 8 byte boundary ]---{ */
>      uint32_t size; /* required by postgresql: 4 bytes */
>      uint16_t version; /* format version (this is version 0): 2 bytes */
>      uint16_t numBands; /* Number of bands: 2 bytes */
>
>      /* }---[ 8 byte boundary ]---{ */
>      double scaleX; /* pixel width: 8 bytes */
>
>      /* }---[ 8 byte boundary ]---{ */
>      double scaleY; /* pixel height: 8 bytes */
>
>      /* }---[ 8 byte boundary ]---{ */
>      double ipX; /* insertion point X: 8 bytes */
>
>      /* }---[ 8 byte boundary ]---{ */
>      double ipY; /* insertion point Y: 8 bytes */
>
>      /* }---[ 8 byte boundary ]---{ */
>      double skewX; /* skew about the X axis: 8 bytes */
>
>      /* }---[ 8 byte boundary ]---{ */
>      double skewY; /* skew about the Y axis: 8 bytes */
>
>      /* }---[ 8 byte boundary ]--- */
>      int32_t srid; /* Spatial reference id: 4 bytes */
>      uint16_t width; /* pixel columns: 2 bytes */
>      uint16_t height; /* pixel rows: 2 bytes */
>
>          /* }---[ 8 byte boundary ]--- */
>      uint16_t upperLeftX; /* first column of raster data, Zero if no
>  padding leftwards */
>      uint16_t upperLeftY; /* first row of raster data, Zero if no padding
>  upwards */
>      uint16_t lowerRightX; /* last column of raster data, width if no
>  padding rightwards */
>      uint16_t lowerRightY; /* last row of raster data, height if no padding
>  downwards */
>  };
>  }}}
>
>  I'm going to post this issue to postgis-devel too and request for
>  comments.
>
> --
> Ticket URL: <http://trac.osgeo.org/postgis/ticket/2122>
> PostGIS <http://trac.osgeo.org/postgis/>
> The PostGIS Trac is used for bug, enhancement & task tracking, a user and developer wiki, and a view into the subversion code repository of PostGIS project.



--
Mateusz Loskot, http://mateusz.loskot.net

From Pierrick.BRIHAYE at region-bretagne.fr  Fri Nov 30 05:42:16 2012
From: Pierrick.BRIHAYE at region-bretagne.fr (Pierrick.BRIHAYE at region-bretagne.fr)
Date: Fri, 30 Nov 2012 14:42:16 +0100
Subject: [gdal-dev] Mixed SRSes ?
In-Reply-To: <12314544.pqFaDqtSRR@tatras>
References: <OF30824E97.02DF5A28-ONC1257AC6.00465BF1-C1257AC6.0046E7D0@LocalDomain>
	<12314544.pqFaDqtSRR@tatras>
Message-ID: <OF427AEB51.6B0CC303-ONC1257AC6.004B24AE-C1257AC6.004B6BA2@LocalDomain>

Hi,

"Yves Jacolin (Free)" <yjacolin at free.fr> a ?crit sur 30/11/2012 14:33:47 :

> did you try something like this (ie with s_srs EPSG:27562):
> 
>  .\bin\ogr2ogr.exe -f "ESRI Shapefile" polygons.shp polygons.gml -t_srs 
> EPSG:27572 -s_srs EPSG:27562 -nlt POLYGON -lco ENCODING=ISO-8859-1

Well... no. Because my input files have *mixed* SRSes... 

Should I assume that -s_srs would override my GML SRSes ? I so... how 
would it work ?

Cheers,

--
Pierrick Brihaye
Coordinateur du p?le ressources / m?diation
SINPA / DTP
Conseil R?gional de Bretagne
2 rue Gabriel Germain 
35000 Rennes
+33 2 22 93 98 24



-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121130/3ebeb0ea/attachment.html>

From even.rouault at mines-paris.org  Fri Nov 30 07:21:29 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 30 Nov 2012 16:21:29 +0100
Subject: [gdal-dev] Mixed SRSes ?
In-Reply-To: <OF427AEB51.6B0CC303-ONC1257AC6.004B24AE-C1257AC6.004B6BA2@LocalDomain>
References: <OF30824E97.02DF5A28-ONC1257AC6.00465BF1-C1257AC6.0046E7D0@LocalDomain>
	<12314544.pqFaDqtSRR@tatras>
	<OF427AEB51.6B0CC303-ONC1257AC6.004B24AE-C1257AC6.004B6BA2@LocalDomain>
Message-ID: <1354288889.50b8cef9101ac@imp.free.fr>

Selon Pierrick.BRIHAYE at region-bretagne.fr:

> Hi,
>
> "Yves Jacolin (Free)" <yjacolin at free.fr> a ?crit sur 30/11/2012 14:33:47 :
>
> > did you try something like this (ie with s_srs EPSG:27562):
> >
> >  .binogr2ogr.exe -f "ESRI Shapefile" polygons.shp polygons.gml -t_srs
> > EPSG:27572 -s_srs EPSG:27562 -nlt POLYGON -lco ENCODING=ISO-8859-1
>
> Well... no. Because my input files have *mixed* SRSes...
>
> Should I assume that -s_srs would override my GML SRSes ? I so... how
> would it work ?

No, it wouldn't work as you would expect: it would override the SRS of each
geometry with the one indicated by -s_srs.

Currently, ogr2ogr isn't ready to support per-feature SRS and reprojection, but
there's nothing fundamentally impossible, since in the OGR data model,
individual geometries can point to a specific SRS. The main difficulity is that
I don't think the GML driver is ready yet for that. Would you mind sharing a
sample GML file with mixed SRS ? I'll try to see if something can be done.

Kenavo :-)

>
> Cheers,
>
> --
> Pierrick Brihaye
> Coordinateur du p?le ressources / m?diation
> SINPA / DTP
> Conseil R?gional de Bretagne
> 2 rue Gabriel Germain
> 35000 Rennes
> +33 2 22 93 98 24
>
>
>
>



















From Pierrick.BRIHAYE at region-bretagne.fr  Fri Nov 30 07:27:18 2012
From: Pierrick.BRIHAYE at region-bretagne.fr (Pierrick.BRIHAYE at region-bretagne.fr)
Date: Fri, 30 Nov 2012 16:27:18 +0100
Subject: [gdal-dev] Mixed SRSes ?
In-Reply-To: <1354288889.50b8cef9101ac@imp.free.fr>
References: <OF30824E97.02DF5A28-ONC1257AC6.00465BF1-C1257AC6.0046E7D0@LocalDomain>
	<12314544.pqFaDqtSRR@tatras>
	<OF427AEB51.6B0CC303-ONC1257AC6.004B24AE-C1257AC6.004B6BA2@LocalDomain>
	<1354288889.50b8cef9101ac@imp.free.fr>
Message-ID: <OFACDB64D9.32DE9D1B-ONC1257AC6.0054A54F-C1257AC6.0054E67A@LocalDomain>

Bonjour deoc'h :-);

Even Rouault <even.rouault at mines-paris.org> a ?crit sur 30/11/2012 
16:21:29 :

> No, it wouldn't work as you would expect: it would override the SRS of 
each
> geometry with the one indicated by -s_srs.

Nice to know, thanks.

> Currently, ogr2ogr isn't ready to support per-feature SRS and 
> reprojection, but
> there's nothing fundamentally impossible, since in the OGR data model,
> individual geometries can point to a specific SRS. The main 
> difficulity is that
> I don't think the GML driver is ready yet for that. Would you mind 
sharing a
> sample GML file with mixed SRS ? I'll try to see if something can be 
done.

Sample file joined to this mail :-)

Cheers,

--
Pierrick Brihaye
Coordinateur du p?le ressources / m?diation
SINPA / DTP
Conseil R?gional de Bretagne
2 rue Gabriel Germain 
35000 Rennes
+33 2 22 93 98 24


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121130/3bf117bd/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: buggy-points.gml
Type: application/octet-stream
Size: 4087 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121130/3bf117bd/attachment.obj>

From fabian.schindler at eox.at  Fri Nov 30 07:21:59 2012
From: fabian.schindler at eox.at (Fabian Schindler)
Date: Fri, 30 Nov 2012 16:21:59 +0100
Subject: [gdal-dev] TIFF overviews issue
Message-ID: <50B8CF17.2060601@eox.at>

Dear devs,

I'm experiencing an strange issue concerning overviews when I try to add 
overviews via Python. Essentially I want to create overviews for 
Greyscale images encoded in RGB, but on one overview level I always get 
colored pixels in a specific rectangle area of the image.

I created the boiled down test script to demonstrate what I am doing 
(create RGB grey image of certain size, save it to disk and apply 
overviews) which is available in the attachment. The script is called 
like that: `python test_overviews.py out.tif`

In my case I could see the colorfull overviews in QGIS (or MapServer 
WMS) if I zoomed out a little. A screenshot of QGIS with the image can 
be found in the attachment.

Strangely, I only have this issue on CentOS 6.3 (gdal 1.9.1, libgeotiff 
1.4.0, libtiff 3.9.4) but not on my host Ubuntu 12.10 system (gdal 
1.9.2, libgeotiff2 1.3.0, libtiff 4.0.2).

I tried different interpolation methods for the `BuildOverviews` 
function, with no effect. If I remove the level `2` or `4` from my level 
list, the effect does *not* show. A different image size results in a 
different colour and position of the rectangle and sometimes the 
rectangle is not visible at all.

The issue is the same when I use `gdaladdo out_no_ovr.tif 2 4 8 16`.

Any idea on this?

Regards,
Fabian
-------------- next part --------------
A non-text attachment was scrubbed...
Name: screenshot.png
Type: image/png
Size: 445 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121130/9580c40c/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_build_overviews.py
Type: text/x-python
Size: 498 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121130/9580c40c/attachment.py>

From mrxonx at hotmail.com  Fri Nov 30 08:40:13 2012
From: mrxonx at hotmail.com (mrxonx at hotmail.com)
Date: Fri, 30 Nov 2012 11:40:13 -0500
Subject: [gdal-dev] Patch for s57reader.cpp
In-Reply-To: <4EE81F52.1010408@hotmail.com>
References: <3C951F86A458CD4EBA86837EDC115AE87B2148@massenet.hitt.home>,
	<4CE2CD9A.6090402@pobox.com>, <4EB42EAD.8050303@hotmail.com>,
	<CA+TxYvOYsP-PkphTH83NTX3-DuomXgDkLPUFLo+jMiuxO5moTg@mail.gmail.com>	<COL110-W121B63258852C1DF0FFE15D1DA0@phx.gbl>
	<4EE81F52.1010408@hotmail.com>
Message-ID: <50B8E16D.1010106@hotmail.com>

A small patch (that prevents a crash on certain datasets). Your line
numbers will certainly be different, but it should work.


--- s57reader.cpp   
+++ s57reader.cpp   
@@ -2313,7 +2313,7 @@
 /* -------------------------------------------------------------------- */
 /*      Add the end node.                                               */
 /* -------------------------------------------------------------------- */
-            if( poVRPT->GetRepeatCount() > 1 )
+            if( (poVRPT != NULL) && poVRPT->GetRepeatCount() > 1 )
             {
                 int nVC_RCID = ParseName( poVRPT, 1 );
                 double dfX, dfY;



From warmerdam at pobox.com  Fri Nov 30 10:01:55 2012
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 30 Nov 2012 10:01:55 -0800
Subject: [gdal-dev] Patch for s57reader.cpp
In-Reply-To: <50B8E16D.1010106@hotmail.com>
References: <3C951F86A458CD4EBA86837EDC115AE87B2148@massenet.hitt.home>
	<4CE2CD9A.6090402@pobox.com> <4EB42EAD.8050303@hotmail.com>
	<CA+TxYvOYsP-PkphTH83NTX3-DuomXgDkLPUFLo+jMiuxO5moTg@mail.gmail.com>
	<COL110-W121B63258852C1DF0FFE15D1DA0@phx.gbl>
	<4EE81F52.1010408@hotmail.com> <50B8E16D.1010106@hotmail.com>
Message-ID: <CA+YzLBcNbaNc86Wxgjt42K67=zAjSc9211LQRsYuDZ8x3YR7jg@mail.gmail.com>

Mr. Xonx,

I have made related changes in trunk:

  http://trac.osgeo.org/gdal/changeset/25269

Best regards,
Frank


On Fri, Nov 30, 2012 at 8:40 AM, <mrxonx at hotmail.com> wrote:

> A small patch (that prevents a crash on certain datasets). Your line
> numbers will certainly be different, but it should work.
>
>
> --- s57reader.cpp
> +++ s57reader.cpp
> @@ -2313,7 +2313,7 @@
>  /* -------------------------------------------------------------------- */
>  /*      Add the end node.                                               */
>  /* -------------------------------------------------------------------- */
> -            if( poVRPT->GetRepeatCount() > 1 )
> +            if( (poVRPT != NULL) && poVRPT->GetRepeatCount() > 1 )
>              {
>                  int nVC_RCID = ParseName( poVRPT, 1 );
>                  double dfX, dfY;
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20121130/a58d9438/attachment.html>

From mrxonx at hotmail.com  Fri Nov 30 10:39:42 2012
From: mrxonx at hotmail.com (mrxonx at hotmail.com)
Date: Fri, 30 Nov 2012 13:39:42 -0500
Subject: [gdal-dev] Patch for s57reader.cpp
In-Reply-To: <CA+YzLBcNbaNc86Wxgjt42K67=zAjSc9211LQRsYuDZ8x3YR7jg@mail.gmail.com>
References: <3C951F86A458CD4EBA86837EDC115AE87B2148@massenet.hitt.home>	<4CE2CD9A.6090402@pobox.com>
	<4EB42EAD.8050303@hotmail.com>	<CA+TxYvOYsP-PkphTH83NTX3-DuomXgDkLPUFLo+jMiuxO5moTg@mail.gmail.com>	<COL110-W121B63258852C1DF0FFE15D1DA0@phx.gbl>	<4EE81F52.1010408@hotmail.com>
	<50B8E16D.1010106@hotmail.com>
	<CA+YzLBcNbaNc86Wxgjt42K67=zAjSc9211LQRsYuDZ8x3YR7jg@mail.gmail.com>
Message-ID: <50B8FD6E.9070402@hotmail.com>

Thanks!  Looks like I missed the other 2 locations.

Frank Warmerdam wrote:
> Mr. Xonx, 
>
> I have made related changes in trunk:
>
>   http://trac.osgeo.org/gdal/changeset/25269
>
> Best regards,
> Frank


From yjacolin at free.fr  Fri Nov 30 05:33:47 2012
From: yjacolin at free.fr (Yves Jacolin (Free))
Date: Fri, 30 Nov 2012 14:33:47 +0100
Subject: [gdal-dev] Mixed SRSes ?
In-Reply-To: <OF30824E97.02DF5A28-ONC1257AC6.00465BF1-C1257AC6.0046E7D0@LocalDomain>
References: <OF30824E97.02DF5A28-ONC1257AC6.00465BF1-C1257AC6.0046E7D0@LocalDomain>
Message-ID: <12314544.pqFaDqtSRR@tatras>

Le vendredi 30 novembre 2012 13:52:57 Pierrick.BRIHAYE at region-bretagne.fr a 
?crit :
> Hello,
> 
> When I try to export some GML files to .shp (using : .\bin\ogr2ogr.exe -f
> "ESRI Shapefile" polygons.shp polygons.gml -t_srs EPSG:27572 -nlt POLYGON
> -lco ENCODING=ISO-8859-1), with ogr2ogr version "GDAL 1.9.2, released
> 2012/10/08" on Windows, I get :
> 
> Can't transform coordinates, source layer has no
> coordinate system.  Use -s_srs to set one.
> 
> I guess this is due to mixed SRSes in my files (namely "
> http://www.opengis.net/gml/srs/epsg.xml#27572" and ""
> http://www.opengis.net/gml/srs/epsg.xml#27562").
> 
> If so, how could I get around my problem ?
> 
> Cheers,
> 

Pierrick,

did you try something like this (ie with s_srs EPSG:27562):

 .\bin\ogr2ogr.exe -f "ESRI Shapefile" polygons.shp polygons.gml -t_srs 
EPSG:27572 -s_srs EPSG:27562 -nlt POLYGON -lco ENCODING=ISO-8859-1

Y.

From even.rouault at mines-paris.org  Fri Nov 30 14:14:47 2012
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri, 30 Nov 2012 23:14:47 +0100
Subject: [gdal-dev] Mixed SRSes ?
In-Reply-To: <OFACDB64D9.32DE9D1B-ONC1257AC6.0054A54F-C1257AC6.0054E67A@LocalDomain>
References: <OF30824E97.02DF5A28-ONC1257AC6.00465BF1-C1257AC6.0046E7D0@LocalDomain>
	<1354288889.50b8cef9101ac@imp.free.fr>
	<OFACDB64D9.32DE9D1B-ONC1257AC6.0054A54F-C1257AC6.0054E67A@LocalDomain>
Message-ID: <201211302314.47890.even.rouault@mines-paris.org>

Le vendredi 30 novembre 2012 16:27:18, Pierrick.BRIHAYE at region-bretagne.fr a 
?crit :
> Bonjour deoc'h :-);
> 
> Even Rouault <even.rouault at mines-paris.org> a ?crit sur 30/11/2012
> 
> 16:21:29 :
> > No, it wouldn't work as you would expect: it would override the SRS of
> 
> each
> 
> > geometry with the one indicated by -s_srs.
> 
> Nice to know, thanks.
> 
> > Currently, ogr2ogr isn't ready to support per-feature SRS and
> > reprojection, but
> > there's nothing fundamentally impossible, since in the OGR data model,
> > individual geometries can point to a specific SRS. The main
> > difficulity is that
> > I don't think the GML driver is ready yet for that. Would you mind
> 
> sharing a
> 
> > sample GML file with mixed SRS ? I'll try to see if something can be
> 
> done.
> 

If you use latest developement version, ogr2ogr -t_srs will work on source 
datasource with features whose geometries have different SRS.

Even

