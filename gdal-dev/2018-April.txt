From tyeik at gktechinc.com  Mon Apr  2 13:18:30 2018
From: tyeik at gktechinc.com (tval)
Date: Mon, 2 Apr 2018 13:18:30 -0700 (MST)
Subject: [gdal-dev] Clip Raster with Polygon C#
Message-ID: <1522700310243-0.post@n6.nabble.com>

Is it possible to use the Gdal Warp wrapper or another method for clipping a
raster to a polygon? I've tried using Gdal.wrapper_GDALWarpDestName and
using input datasets such as a .tif and a .shp, but was unsuccessful.
Perhaps I had the wrong options or inputs. Any help would be appreciated.
Thanks. 



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From ao at t-kartor.se  Mon Apr  2 23:40:10 2018
From: ao at t-kartor.se (Andreas Oxenstierna)
Date: Tue, 3 Apr 2018 08:40:10 +0200
Subject: [gdal-dev] PDF output - vector compression
Message-ID: <1370bdf7-26c4-256c-28d7-1b5a7ca25df5@t-kartor.se>

Dear list

How is OGR vector data compressed in PDF output from gdal_translate?

Is the STREAM_COMPRESS option used?

-- 
Best Regards

Andreas Oxenstierna
T-Kartor Geospatial AB
mobile: +46 733 206831
mailto: ao at t-kartor.se
http://www.t-kartor.com


From bontepaarden at gmail.com  Tue Apr  3 00:19:56 2018
From: bontepaarden at gmail.com (Paul Meems)
Date: Tue, 3 Apr 2018 09:19:56 +0200
Subject: [gdal-dev] Clip Raster with Polygon C#
In-Reply-To: <1522700310243-0.post@n6.nabble.com>
References: <1522700310243-0.post@n6.nabble.com>
Message-ID: <CAHNf2YTnqDQt15z5DVU3Vs9SR+ZLWByMOqsS0cd9YTN-yZ_hww@mail.gmail.com>

Here's a snippet of the code I use:

using (var ds = GDAL.Open(input, Access.GA_ReadOnly))
{
    if (ds == null)
    {
        throw new Exception("Can't open GDAL dataset: " + input);
    }

            var options = new[]
            {
                "-of", "vrt",
                "-overwrite",
                "-multi",
                "-crop_to_cutline",
                "-cutline", borderFilename
            };

    var gdalOptions = new GDALWarpAppOptions(options);
    var ptr = new[] { Dataset.getCPtr(ds).Handle };
    var gcHandle = GCHandle.Alloc(ptr, GCHandleType.Pinned);
    try
    {
        var dss = new
SWIGTYPE_p_p_GDALDatasetShadow(gcHandle.AddrOfPinnedObject(), false, null);
        using (var newDs = GDAL.wrapper_GDALWarpDestName(output, 1, dss,
gdalOptions, null, null))
        {
            if (newDs == null)
            {
                throw new Exception("GdalWarp failed: " + GDAL
.GetLastErrorMsg());
            }
        }
    }
    finally
    {
        if (gcHandle.IsAllocated)
            gcHandle.Free();
    }

    return true;
}

Does this help you?

Regards,

Paul



2018-04-02 22:18 GMT+02:00 tval <tyeik at gktechinc.com>:

> Is it possible to use the Gdal Warp wrapper or another method for clipping
> a
> raster to a polygon? I've tried using Gdal.wrapper_GDALWarpDestName and
> using input datasets such as a .tif and a .shp, but was unsuccessful.
> Perhaps I had the wrong options or inputs. Any help would be appreciated.
> Thanks.
>
>
>
> --
> Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180403/b68e69ce/attachment.html>

From ari.jolma at gmail.com  Tue Apr  3 01:17:26 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue, 3 Apr 2018 11:17:26 +0300
Subject: [gdal-dev] Adding ignored fields to layers
Message-ID: <2cc4402d-909b-365a-1598-84b3c0f0a0c1@gmail.com>

When fields are added to a layer, the field definition that is stored in 
the layer definition is created as a clone of the provided field definition.

Neither field definitions nor geometry field definitions set the ignored 
flag of the clone.

Is this a feature and not a bug?

I was already making a PR but I see in the field definition clone code 
the comment "TODO(schwehr): Can we use IsIgnored()?"

So, can we?

Ari



From even.rouault at spatialys.com  Tue Apr  3 03:29:02 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 03 Apr 2018 12:29:02 +0200
Subject: [gdal-dev] Adding ignored fields to layers
In-Reply-To: <2cc4402d-909b-365a-1598-84b3c0f0a0c1@gmail.com>
References: <2cc4402d-909b-365a-1598-84b3c0f0a0c1@gmail.com>
Message-ID: <7151684.oMPVAgkj0S@even-i700>

Hi Ari,

> When fields are added to a layer, the field definition that is stored in
> the layer definition is created as a clone of the provided field definition.
> 
> Neither field definitions nor geometry field definitions set the ignored
> flag of the clone.
> 
> Is this a feature and not a bug?

Mostly a feature I'd say. Why would you want to do this ? The ignored flag is 
only taken into account on reading, where you don't create a field definition 
but get the one of the source layer and may call SetIgnored() on it.
You create field definition objects when writing a new layer, and the ignored 
flag doesn't make sense in that context.

> 
> I was already making a PR but I see in the field definition clone code
> the comment "TODO(schwehr): Can we use IsIgnored()?"

IsSame() also ignores the bIgnore flag, for similar reasons. This is more a 
transient state of the object rather than something that really qualifies it. 
Probably comments should be added in both places to mention this is done on 
purpose.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Apr  3 03:38:09 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 03 Apr 2018 12:38:09 +0200
Subject: [gdal-dev] PDF output - vector compression
In-Reply-To: <1370bdf7-26c4-256c-28d7-1b5a7ca25df5@t-kartor.se>
References: <1370bdf7-26c4-256c-28d7-1b5a7ca25df5@t-kartor.se>
Message-ID: <39047537.R8dQ5XXL11@even-i700>

On mardi 3 avril 2018 08:40:10 CEST Andreas Oxenstierna wrote:
> Dear list
> 
> How is OGR vector data compressed in PDF output from gdal_translate?
> Is the STREAM_COMPRESS option used?

Andreas,

Yes, vector geometries are deflate-compressed by default. I've just made the 
doc clearer about this

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From even.rouault at spatialys.com  Tue Apr  3 04:44:27 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 03 Apr 2018 13:44:27 +0200
Subject: [gdal-dev] GDAL 2.3.0 planning
Message-ID: <1602150.VuOblIQN2d@even-i700>

Hi,

If we want to keep up with our yearly release cycle, it is time considering 
it. Unless someone volunteers to take the stick, I'd be willing to issue a 
2.3.0beta1 for April 20th (the release/2.3 branch wil be forked at that time 
to receive needed fixes and master will be labelled 2.4.0dev).
Let it give 2 weeks of testing, and then issue a RC1 around May 4th if things 
go well.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From tyeik at gktechinc.com  Tue Apr  3 07:16:12 2018
From: tyeik at gktechinc.com (tval)
Date: Tue, 3 Apr 2018 07:16:12 -0700 (MST)
Subject: [gdal-dev] Clip Raster with Polygon C#
In-Reply-To: <CAHNf2YTnqDQt15z5DVU3Vs9SR+ZLWByMOqsS0cd9YTN-yZ_hww@mail.gmail.com>
References: <1522700310243-0.post@n6.nabble.com>
 <CAHNf2YTnqDQt15z5DVU3Vs9SR+ZLWByMOqsS0cd9YTN-yZ_hww@mail.gmail.com>
Message-ID: <1522764972680-0.post@n6.nabble.com>

That was it. Thanks! I had not tried putting the shapefile as an option. 



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From weskerjiang at sina.cn  Tue Apr  3 20:03:34 2018
From: weskerjiang at sina.cn (weskerjiang at sina.cn)
Date: Wed, 04 Apr 2018 11:03:34 +0800
Subject: [gdal-dev] mbtiles open failed
Message-ID: <20180404030334.3161E6C01BB@webmail.sinamail.sina.com.cn>

i download the gdal from osgeo4w,and i write a demo to open mbtiles file,my code is below


QString uri = "c:/test.mbtiles";

CPLErrorRest();

GDALDatasetH hDS = GDALOpen(uri.toUtf8().constData(),GA_ReadOnly);

if(!hDS)

{

    .......

}


the CPLGetLastErrorMsg() shows the error     "C:/test.mbtiles not recognized as a supported file format"

so what's wrong with it?  the mbtiles file is good ,i can open it in QGIS 3.0

why it saies not supported?

	
	
	
	

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180404/1746de6d/attachment.html>

From kaktus40 at hotmail.fr  Tue Apr  3 21:56:12 2018
From: kaktus40 at hotmail.fr (actor bob)
Date: Wed, 4 Apr 2018 04:56:12 +0000
Subject: [gdal-dev] parallelizing processing for gdal2tiles.py
Message-ID: <VI1PR10MB0749E980860FEE74F0400A46ADA40@VI1PR10MB0749.EURPRD10.PROD.OUTLOOK.COM>

Hello,
I saw that gdal2tiles.py had been improved and is now multithreading (see https://github.com/OSGeo/gdal/pull/201 ). Will be there the same improvements for  gdal_retile.py in the roadmap of gdal? https://github.com/OSGeo/gdal/blob/master/gdal/swig/python/scripts/gdal_retile.py


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180404/b9d7ef0b/attachment.html>

From srygonic at gmail.com  Tue Apr  3 22:28:46 2018
From: srygonic at gmail.com (srygonic)
Date: Tue, 3 Apr 2018 22:28:46 -0700 (MST)
Subject: [gdal-dev] Just want to do simple batch compression...
Message-ID: <1522819726304-0.post@n6.nabble.com>

I have a lot of geotiffs which are quite large at times (meaning they have
quite a bit of unnecessary white space between) and I would like to run a
batch script to just do a simple compression on them as I believe that they
are not compressed because the files that just contain a lot of white space
are still unnecessarily huge.

I've been trying for quite a bit (totally new to GDAL) and reading around.
But I can't seem to produce any usable results. Most of the time my image
turns totally black (when opened in QGIS).

I've read that the images just needs to scale up but I'm either getting
thrown with 16 bit errors or still produces a black image.

I've been trying to piece together some commands via
http://www.gdal.org/frmt_gtiff.html and other blogs / discussion forums
online but I'm not too sure I'm heading in the right direction. As
mentioned... This is all pretty new to me. Just starting looking into GDAL
48 hours ago.

Below are the commands that I've tried. I'm using OSGeo4W Shell command line
to run this.

cd /d e:
cd E:\TIFFs_Test
gdal_translate GTIFF_RAW:GAPS_2017-02-23.tif test.tif -co PHOTOMETRIC=CMYK
-co TFW=YES -co TILED=YES -co BIGTIFF=IF_SAFER -co COMPRESS=JPEG

gdal_translate GTIFF_RAW:GAPS_2017-02-23.tif test1.tif -co PHOTOMETRIC=CMYK
-co TFW=YES -co TILED=YES -co BIGTIFF=IF_SAFER -co COMPRESS=JPEG -a_srs
EPSG:3414

gdal_translate GTIFF_RAW:GAPS_2017-02-23.tif test2.tif -co PHOTOMETRIC=YCBCR
-co TFW=YES -co TILED=YES -co BIGTIFF=IF_SAFER -co COMPRESS=JPEG -a_srs
EPSG:3414

gdal_translate GTIFF_RAW:GAPS_2017-02-23.tif test4.tif -co PHOTOMETRIC=YCBCR
-co TFW=YES -co TILED=YES -co BIGTIFF=IF_SAFER -co COMPRESS=JPEG -ot Int16
-scale 0 255 0 32767

gdal_translate GTIFF_RAW:GAPS_2017-02-23.tif test6.tif -co PHOTOMETRIC=YCBCR
-co TFW=YES -co TILED=YES -co BIGTIFF=IF_SAFER -co COMPRESS=JPEG -scale 0
255 0 32767

The image in question is uploaded here.
https://www.dropbox.com/s/vol0bflu5avw7xp/TIFFs_Test.rar?dl=0

The file is about 444MB but can be compress via zip to about 81MB. So there
is obviously still room for compression. Can anybody point me in the right
direction on how to go about this? I would like to eventually run a batch
script on a folder to auto compress all the TIFF files.



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From jukka.rahkonen at maanmittauslaitos.fi  Wed Apr  4 02:04:17 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Wed, 4 Apr 2018 02:04:17 -0700 (MST)
Subject: [gdal-dev] Just want to do simple batch compression...
In-Reply-To: <1522819726304-0.post@n6.nabble.com>
References: <1522819726304-0.post@n6.nabble.com>
Message-ID: <1522832657094-0.post@n6.nabble.com>

srygonic wrote
> I have a lot of geotiffs which are quite large at times (meaning they have
> quite a bit of unnecessary white space between) and I would like to run a
> batch script to just do a simple compression on them as I believe that
> they
> are not compressed because the files that just contain a lot of white
> space
> are still unnecessarily huge.

Hi,

If you run gdalinfo about your image you will notice that it is already
compressed:

Metadata:
  TIFFTAG_SOFTWARE=OrbitGIS 17.0.0
Image Structure Metadata:
  COMPRESSION=YCbCr JPEG
  INTERLEAVE=PIXEL
  SOURCE_COLOR_SPACE=YCbCr

However, one of your commands which is using actually the same parameters
does shrink the image from 465 MB into 170 MB. 

gdal_translate GTIFF_RAW:GAPS_2017-02-23.tif test2.tif -co 
PHOTOMETRIC=YCBCR -co TFW=YES -co TILED=YES -co BIGTIFF=IF_SAFER -co
COMPRESS=JPEG -a_srs EPSG:3414

For saving disk space I would consider cutting those areas which do have
real data into individual files and then combine them into a virtual mosaic
with gdalbuildvrt.  Empty space does compress rather well but not having any
pixels from areas with no data is most savvy option of all.

-Jukka Rahkonen-




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Apr  4 03:07:13 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 04 Apr 2018 12:07:13 +0200
Subject: [gdal-dev] mbtiles open failed
In-Reply-To: <20180404030334.3161E6C01BB@webmail.sinamail.sina.com.cn>
References: <20180404030334.3161E6C01BB@webmail.sinamail.sina.com.cn>
Message-ID: <2324014.90QXpzIpW7@even-i700>

On mercredi 4 avril 2018 11:03:34 CEST weskerjiang at sina.cn wrote:
> i download the gdal from osgeo4w,and i write a demo to open mbtiles file,my
> code is below
> 
> 
> QString uri = "c:/test.mbtiles";
> 
> CPLErrorRest();

You probably lack a call  to GDALAllRegister(); here



-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From simon.proud at physics.ox.ac.uk  Wed Apr  4 03:13:29 2018
From: simon.proud at physics.ox.ac.uk (Simon Proud)
Date: Wed, 4 Apr 2018 11:13:29 +0100
Subject: [gdal-dev] GOES-16 Projection Issue
Message-ID: <faf5e5cb-1b1a-9f7d-75d6-e478420150fe@physics.ox.ac.uk>

Hello,
I am trying to visualise GOES-16 data, but the output projection from 
gdal_translate appears faulty.
This is the command I use:
gdal_translate -a_srs "+proj=geos +a=6378137. +units=m +no_defs 
+b=6356752.31414 +x_0=0.0 +y_0=0.0 +ellps=GRS80 +lon_0=-75.0 
+f=.00335281068119356027 +h=35786023. +sweep=x" -a_ullr $ulx $uly $lrx 
$lry [input_file] [output_file]

For East Coast USA the results look fine, the output image matches a 
coastline shapefile. However, for the West coast the shapefile and image 
appear offset by tens of km. The problem is even worse on the East side 
of the image (West Africa). An example is available here: 
https://www2.physics.ox.ac.uk/sites/default/files/profiles/proud/goesr-proj-42831.png 


I've also tried without +f, without +sweep=x, with various difference +a 
and +b values and with different +ellps settings. All result in a 
problematic projection.

Any ideas what is happened? I've already asked NOAA about this, their 
tool (WCT) displays the projection properly. GDAL and NASA's panoply 
tool do not.

All the best,
Simon

-- 
Dr Simon R Proud
NERC Post-doctoral fellow in Aviation Meteorology,
Department of Atmospheric, Oceanic and Planetary Physics,
University of Oxford,
Clarendon Lab,
Parks Road,
OX1 3PU,
Oxford,
UK

Tel (office): +44 (0) 1865 282431
Tel (mobile): +44 (0) 7563 639685
Email: simon.proud at physics.ox.ac.uk
Twitter: @simon_sat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180404/ed1a3f49/attachment.html>

From even.rouault at spatialys.com  Wed Apr  4 03:58:22 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 04 Apr 2018 12:58:22 +0200
Subject: [gdal-dev] GOES-16 Projection Issue
In-Reply-To: <faf5e5cb-1b1a-9f7d-75d6-e478420150fe@physics.ox.ac.uk>
References: <faf5e5cb-1b1a-9f7d-75d6-e478420150fe@physics.ox.ac.uk>
Message-ID: <1595545.UW07rrOTSn@even-i700>

On mercredi 4 avril 2018 11:13:29 CEST Simon Proud wrote:
> Hello,
> I am trying to visualise GOES-16 data, but the output projection from
> gdal_translate appears faulty.
> This is the command I use:
> gdal_translate -a_srs "+proj=geos +a=6378137. +units=m +no_defs
> +b=6356752.31414 +x_0=0.0 +y_0=0.0 +ellps=GRS80 +lon_0=-75.0
> +f=.00335281068119356027 +h=35786023. +sweep=x" -a_ullr $ulx $uly $lrx
> $lry [input_file] [output_file]
> 

Simon,

This has been discussed recently on the list. Basically the issue is that GeoTIFF encoding has
no way to represent this projection properly.

Long version at
http://geotiff.maptools.narkive.com/3CqwNeMd/geos-projection-sweep-parameter

A potential workaround is to have a .tif + .tif.aux.xml file and forcing a baseline TIFF to be produced

In GDAL master, I've just committed a fix so that

gdal_translate input.tif output.tif -co PROFILE=BASELINE -a_srs "+proj=geos +a=6378137. +units=m +no_defs +b=6356752.31414 +x_0=0.0 +y_0=0.0 +ellps=GRS80 +lon_0=-75.0  +f=.00335281068119356027 +h=35786023. +sweep=x" 

works

With currently released versions, you have to do a more convoluted approach

1) Create a baslilne TIFF file
gdal_translate input.tif output.tif -co PROFILE=BASELINE

2) Create a dummy png file (1x1) with the projection info in .aux.xml
gdal_translate -of PNG test.tif output.png -a_srs "+proj=geos +a=6378137. +units=m +no_defs +b=6356752.31414 +x_0=0.0 +y_0=0.0 +ellps=GRS80 +lon_0=-75.0  +f=.00335281068119356027 +h=35786023. +sweep=x" -srcwin 0 0 1 1

3) Rename output.png.aux.xml to output.tif.aux.xml

4) Check with "gdalinfo output.tif" that you get the right projection info

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From srygonic at gmail.com  Thu Apr  5 02:37:55 2018
From: srygonic at gmail.com (srygonic)
Date: Thu, 5 Apr 2018 02:37:55 -0700 (MST)
Subject: [gdal-dev] Just want to do simple batch compression...
In-Reply-To: <1522832657094-0.post@n6.nabble.com>
References: <1522819726304-0.post@n6.nabble.com>
 <1522832657094-0.post@n6.nabble.com>
Message-ID: <1522921075130-0.post@n6.nabble.com>

The issue is that the image turns out to be completely black for me... not
too sure what I'm doing wrong here. 

I understand that it might be better to cut up the files but that would take
too long (as there are too many files) and I'm wondering if there is a
faster solution here to reduce the size before taking that route. 

Will look into this gdalbuildrvt as well once I'm back at the computer
tomorrow... any good tutorials for me to start off with?

Thanks for the assistance and the help Jukka!



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Apr  5 02:44:46 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Apr 2018 11:44:46 +0200
Subject: [gdal-dev] scripts/setdevenv.sh
Message-ID: <8510558.Wn7OvSxcaU@even-i700>

Hi,

This is something most people doing GDAL development, and not wanting to install each time they
build, have probably reinvented by themselves, so now master has a scripts/setdevenv.sh that
you can source to define PATH, LD_LIBRARY_PATH, GDAL_DATA and PYTHONPATH to point to the
non-installed directories.

Referenced in https://github.com/OSGeo/gdal/blob/master/CONTRIBUTING.md

Only tested on Linux

$ . scripts/setdevenv.sh 
Setting PATH=/home/even/gdal/git/gdal/gdal/apps:/home/even/gdal/git/gdal/gdal/apps/.libs:/home/even/bin:/home/even/.local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
Setting LD_LIBRARY_PATH=/home/even/gdal/git/gdal/gdal:/home/even/gdal/git/gdal/gdal/.libs:
Setting GDAL_DATA=/home/even/gdal/git/gdal/gdal/data
Setting PYTHONPATH=/home/even/gdal/git/gdal/gdal/swig/python/build/lib.linux-x86_64-2.7:


Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Thu Apr  5 04:09:57 2018
From: jukka.rahkonen at maanmittauslaitos.fi (jratike80)
Date: Thu, 5 Apr 2018 04:09:57 -0700 (MST)
Subject: [gdal-dev] Just want to do simple batch compression...
In-Reply-To: <1522921075130-0.post@n6.nabble.com>
References: <1522819726304-0.post@n6.nabble.com>
 <1522832657094-0.post@n6.nabble.com> <1522921075130-0.post@n6.nabble.com>
Message-ID: <1522926597356-0.post@n6.nabble.com>

srygonic wrote
> The issue is that the image turns out to be completely black for me... not
> too sure what I'm doing wrong here. 
> 
> I understand that it might be better to cut up the files but that would
> take
> too long (as there are too many files) and I'm wondering if there is a
> faster solution here to reduce the size before taking that route. 
> 
> Will look into this gdalbuildrvt as well once I'm back at the computer
> tomorrow... any good tutorials for me to start off with?
> 
> Thanks for the assistance and the help Jukka!

Hi,

I had another look at the GAPS_2017-02-23.tif file and I would recommend
that do not waste your time for improving it as one image. It is a 3-band
image of sixe 128478 by 133220 pixels and thus as uncompressed it would make
about 50 gigabytes. The current file size 450 GB is not bad especially
because the image includes a good set of overviews. Image also opens and
works fine with QGIS.

I have no ready made recipe for automatic selection and extracting of areas
which contain data. I guess that I would have a try by vectorizing the
raster files with http://www.gdal.org/gdal_polygonize.html first and build
windows for gdal_translate and -projwin based on the vector data. It could
be interesting as an exercise but probably there should be hundreds of
images before it really saves enough resources for being a good investment.

-Jukka Rahkonen-





--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Thu Apr  5 08:38:47 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 05 Apr 2018 17:38:47 +0200
Subject: [gdal-dev] Cloud optimized geotiff (COG) discussions
Message-ID: <2894406.bFXZaTSxLe@even-i700>

Hi,

For those interested in COG related discussions, a number of actors have 
agreed that a potential forum to discuss that could be:

 https://lists.osgeo.org/pipermail/landsat-pds/

So subscribe if you're interested

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From rodrigosmaior90 at gmail.com  Thu Apr  5 16:47:40 2018
From: rodrigosmaior90 at gmail.com (Rodrigo Souto)
Date: Thu, 05 Apr 2018 23:47:40 +0000
Subject: [gdal-dev] the '--config' switch is not in synopsis and description
 of gdaladdo, gdalwarp and gdal_translate manual pages
In-Reply-To: <CAJu1=VzvajE1J8MAwS_Lon6t-Vc0KYHppm7Cipy2MDToxUeaqw@mail.gmail.com>
References: <CAJu1=VzvajE1J8MAwS_Lon6t-Vc0KYHppm7Cipy2MDToxUeaqw@mail.gmail.com>
Message-ID: <CAJu1=VwEE4xH2wOhdUt_+TsLJpc_bVpLqzH801M3E0j5ZdZxfQ@mail.gmail.com>

The manual pages of gdaladdo, gdalwarp and gdal_translate have Synopsis and
Description sections, but for some reason the '--config' switch is not
described there. I think since it is part of the command it should be
there, like the other switches.

This happens for online manual pages and from terminal (Linux command man):
http://www.gdal.org/gdalwarp.html
http://www.gdal.org/gdal_translate.html
http://www.gdal.org/gdaladdo.html

It appears in the Examples section only. Is the documentation incomplete or
am I missing something here?

-- 
Att, Rodrigo Souto Maior
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180405/96462d6f/attachment.html>

From bradh at frogmouth.net  Thu Apr  5 17:04:19 2018
From: bradh at frogmouth.net (bradh at frogmouth.net)
Date: Fri, 6 Apr 2018 10:04:19 +1000
Subject: [gdal-dev] the '--config' switch is not in synopsis and
	description of gdaladdo, gdalwarp and gdal_translate manual pages
In-Reply-To: <CAJu1=VwEE4xH2wOhdUt_+TsLJpc_bVpLqzH801M3E0j5ZdZxfQ@mail.gmail.com>
References: <CAJu1=VzvajE1J8MAwS_Lon6t-Vc0KYHppm7Cipy2MDToxUeaqw@mail.gmail.com>
 <CAJu1=VwEE4xH2wOhdUt_+TsLJpc_bVpLqzH801M3E0j5ZdZxfQ@mail.gmail.com>
Message-ID: <001e01d3cd3a$d42a8530$7c7f8f90$@frogmouth.net>

Things with two dashes are general options, which apply to all tools, and are described in http://www.gdal.org/gdal_utilities.html

 

Brad

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180406/62a326eb/attachment.html>

From ben.elliston at anu.edu.au  Thu Apr  5 23:00:36 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Fri, 6 Apr 2018 16:00:36 +1000
Subject: [gdal-dev] scripts/setdevenv.sh
In-Reply-To: <8510558.Wn7OvSxcaU@even-i700>
References: <8510558.Wn7OvSxcaU@even-i700>
Message-ID: <d879c96f-0f36-b916-75e5-676d095687ee@anu.edu.au>

This is handy, thanks, Even!

Ben

From jorge.dejesus at geocat.net  Fri Apr  6 01:22:31 2018
From: jorge.dejesus at geocat.net (jorge.dejesus)
Date: Fri, 6 Apr 2018 10:22:31 +0200
Subject: [gdal-dev] ERDAS ECW SDK 5.40 and GDAL2.24 doesnt compile
Message-ID: <b228f27d-6566-fe41-711d-dde67980fbd0@geocat.net>

Hi to all

I am having problems compiling with ERDAS ECW SDK 5.40 and GDAL2.24  in 
Alpine 3.6  it reports

/tmp/gdal-2.2.4/.libs/libgdal.so: undefined reference to 
`NCS::CView::SetPendingView(unsigned int, unsigned int*, unsigned int, 
unsigned int, unsigned int, unsigned int, unsigned int, unsigned int, 
double, double, double, double)'
/tmp/gdal-2.2.4/.libs/libgdal.so: undefined reference to 
`NCS::CView::Close(bool)'
/tmp/gdal-2.2.4/.libs/libgdal.so: undefined reference to 
`NCS::CView::UpdateFileInfo()'


This looks like a problem getting to the lib or a signature change, I 
couldnt find any info online

I have created a Docker with the problem:

https://github.com/jorgejesus/gdal-ecw

I run the same with lower SDK versions and I got other errors related to 
phtreads and not with this specific reference,

I am not certain if this is a bug or some problem from my side so I am 
sending an email here before reporting an issu


Thank you

Jorge



From schwehr at gmail.com  Fri Apr  6 07:51:34 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Fri, 6 Apr 2018 07:51:34 -0700
Subject: [gdal-dev] scripts/setdevenv.sh
In-Reply-To: <d879c96f-0f36-b916-75e5-676d095687ee@anu.edu.au>
References: <8510558.Wn7OvSxcaU@even-i700>
 <d879c96f-0f36-b916-75e5-676d095687ee@anu.edu.au>
Message-ID: <CACmBxyscs1tHggpm2JKFa3yyPFFBoM95CUZcTPHf+DwaivQGXw@mail.gmail.com>

Nice!

Much more flexible than my sourceme-autotest.sh...

export PATH=$HOME/src/gdal-schwehr/inst/bin:$PATH
export PYTHONPATH=$HOME/src/gdal-schwehr/inst/lib/python2.7/site-packages
export LD_LIBRARY_PATH=$HOME/src/gdal-schwehr/inst/lib
export GDAL_DATA=$HOME/src/gdal-schwehr/inst/share/gdal

On Thu, Apr 5, 2018 at 11:00 PM, Ben Elliston <ben.elliston at anu.edu.au>
wrote:

> This is handy, thanks, Even!
>
> Ben
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180406/8d38ce6e/attachment-0001.html>

From markus.metz.giswork at gmail.com  Sun Apr  8 13:13:36 2018
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Sun, 8 Apr 2018 22:13:36 +0200
Subject: [gdal-dev] [GRASS-dev] PROJ 5 support in trunk
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAECB26D9@S000014.PROD.SITAD.DK>
References: <CAG+h=FEG+7KMi8nkR1bBWw8WzEcqukmPEsYyXArDiQJg+gbGsw@mail.gmail.com>
 <CAG+h=FErXb-PUwiw6zWPd9tFKJ6CAQYh8H+u3Y64MnrW0uygNA@mail.gmail.com>
 <CAG+h=FEGUE4f+9mJcLT6DaRBFegj-x9nF1D7wzSfBb9f+LN1cA@mail.gmail.com>
 <1522010844481-0.post@n6.nabble.com>
 <CAG+h=FGPKmC=rN7atP_OaNQaivV9aTxH5+u+qSVSb5XTU4neSA@mail.gmail.com>
 <CB205686-4E9C-442F-A5C4-97566FB9D5F5@sdfe.dk>
 <CAG+h=FHVrMOdck=1zA__dQVpA0rz8dnK0KxrzqoR-0AvE=CDUw@mail.gmail.com>
 <2E885BB293AF0448A0181138489E9A0EAECB26D9@S000014.PROD.SITAD.DK>
Message-ID: <CAG+h=FF+eG+OEjCWzRGcSAtKbDTKT7YBUnrXRhD5LJxk1zSRFg@mail.gmail.com>

On Tue, Apr 3, 2018 at 1:57 PM, Kristian Evers <kreve at sdfe.dk> wrote:
>
> Markus,
>
>
>
> Sorry for the late reply – you mail got caught by the corporate spam
filter.
>
>
>
> > The challenge is that users of other software using the new PROJ API
like GDAL and GRASS expect that reprojecting a dataset from one CRS to
another CRS "just works".  Input and output CRS can be anything custom
defined. Either PROJ or other software using PROJ must have some mechanism
to decide if the requested reprojection can be done or not.
>
>
>
> And with my proposal to change proj_create_crs_to_crs() to allow input
other than strings on the form “+init=file:key” you will get exactly what
you have always had with the old API. You can definitely argue that this
has never “just worked”, since using the WGS84 hub datum is rarely doing
the correct thing, but for most users it is good enough.

For most datasets, WGS84 as pivot datum should be good enough, considering
the limited spatial accuracy of many real-world datasets.

> This will not be the case forever though. It is my hope that eventually
we will have a system the really “just works”, even for users requiring
high accuracy, but for now we only have the basic scaffolding that
eventually will make this possible. Patience will be required :-)

FWIW, I added support for user-defined pipelines in GRASS in r.proj
(r72598) and v.proj (r72599) with a new pipeline option.

Markus M

>
> > Looking forward to this function! But what if a dataset comes with a
CRS definition without EPSG code? Can we expect that PROJ handles this or
should applications using the PROJ API handle this?
>
> Without having thought this through all the way to the end yet, I think
this situation will be possible to handle. The idea being that if you
specify an EPSG CRS on one side and a string like “+proj=merc” or whatever,
we could default to a transformation with hub datum like we do today.
Either by going from EPSG:xxxx to WGS84 (or something else that makes sense
in the situation) and then transform from the hub datum to the custom CRS.
It will be a best guess as to how to that transformation but better than
nothing, and probably correct in most cases.
>
> I might have overlooked something, so no promises on the final
implementation yet!
>
>
>
> /Kristian
>
>
>
> Fra: Markus Metz [mailto:markus.metz.giswork at gmail.com]
> Sendt: 27. marts 2018 21:50
> Til: Kristian Evers <kreve at sdfe.dk>
> Cc: GRASS developers list <grass-dev at lists.osgeo.org>; gdal-dev <
gdal-dev at lists.osgeo.org>
> Emne: Re: [gdal-dev] [GRASS-dev] PROJ 5 support in trunk
>
>
>
>
>
>
>
> On Mon, Mar 26, 2018 at 10:51 PM, Kristian Evers <kreve at sdfe.dk> wrote:
>
>
>
>
>
> On 26 Mar 2018, at 21:21, Markus Metz <markus.metz.giswork at gmail.com>
wrote:
>
>
>
> There is an important difference between the PROJ4 and the PROJ5+
API/syntax:
>
> The old PROJ4 API uses latlong WGS84 as pivot datum for coordinate
transformations like
>
> projection1 -> latlong WGS84 -> projection2
>
> or in '+to' syntax
> projection1 +to projection2
>
>
>
> The new PROJ5+ API no longer uses a pivot datum. The advantage is that
you can directly convert from one datum to another, without going through
WGS84. The disadvantage is that the user/software using the new API has to
make sure that either a common pivot datum is used or coordinates are
correctly transformed from one datum to another, e.g. with a Helmert
Transform.
>
> Both GDAL and GRASS have implemented the new API as a simple 2-step
pipeline like
>
>
> 1. projection1 -> some latlong
> 2. some latlong -> projection2
>
>
> or in pipeline syntax
>
>
>
> +proj=pipeline
>
> +step +inv projection1
>
> +step projection2
>
>
>
>
>
> This is actually exactly what the proj_crs_to_crs() function does. When I
originally wrote it I had an idea that this should only be used with
init-files,
>
> but seeing how people need a simple way to do what they’ve always done I
think it might be better to relax that requirement and allow input similar
>
> to what goes into cs2cs and pj_transform().
>
>
>
> The challenge is that users of other software using the new PROJ API like
GDAL and GRASS expect that reprojecting a dataset from one CRS to another
CRS "just works".  Input and output CRS can be anything custom defined.
Either PROJ or other software using PROJ must have some mechanism to decide
if the requested reprojection can be done or not.
>
>
>
> My plan for this function is that it eventually will be able to construct
a transformation between CRS’s without the WGS84 pivot. This will be guided
>
> by the EPSG database. I have still to work out exactly how. For now
though, it works fine with already existing init files and WGS84 as a pivot
datum.
>
> My hope is that this will land in version 6 but I won’t promise that just
yet.
>
>
>
> Looking forward to this function! But what if a dataset comes with a CRS
definition without EPSG code? Can we expect that PROJ handles this or
should applications using the PROJ API handle this?
>
> Markus M
>
>
>
>
>
> Even Rouault has done some tests and found sometimes subtle differences
in the results between the old and new API/syntax. Further on, there is no
mechanism (yet) in place to validate the pipeline, most importantly that
the output of step 1 conforms to the required input for step 2.
>
>
>
> I believe we have sorted those problems out in the coming version 5.0.1.
>
>
>
> Regarding validation of input/output from pipeline steps. We can probably
do some basic checks, but in the end you will always be required to know
>
> what you are doing. Mind you, we are not expecting everyday users to
construct their own pipelines all the time. It is a powertool for the
accomplished
>
> user that knows what he is doing. Most users should have their needs met
by predefined transformations in init-files such as the epsg file. And
eventually
>
> in a more clever way using the EPSG database directly as mentioned above.
>
>
>
>
>
> IMHO, the implementation of the new PROJ5+ API/syntax in GDAL and GRASS
should be regarded as experimental and testing by as many people as
possible would be a huge benefit to PROJ/GDAL/GRASS and to all applications
using these projects.
>
> Markus M
>
>
> On Sun, Mar 25, 2018 at 10:47 PM, Helmut Kudrnovsky <hellik at web.de> wrote:
> >
> > >Now (last related commit is trunk r72522) it's finished. I have
>introduced
> > a new GRASS API that handles both PROJ 4 and PROJ >5, consisting of
> >
> > Thanks for this Update!
> >
> > Fyi See
> > https://lists.osgeo.org/pipermail/osgeo4w-dev/2018-March/003557.html
> >
> > -------
> > [...]
> > The API from PROJ 4 lives on in PROJ 5, so GRASS 7.4 should be able to
use
> > PROJ 5 as well. We’ve been carefull not to breaking anything with this
> > release.
> > That comes with PROJ 6 and 7. Of course there might be implementation
> > details
> > in GRASS that I am unaware of that makes using PROJ 5 impossible.
> > --------
> >
> >
> >
> > -----
> > best regards
> > Helmut
> > --
> > Sent from: http://osgeo-org.1560.x6.nabble.com/Grass-Dev-f3991897.html
> > _______________________________________________
> > grass-dev mailing list
> > grass-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/grass-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180408/90b4179b/attachment.html>

From landa.martin at gmail.com  Sun Apr  8 13:36:27 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 8 Apr 2018 22:36:27 +0200
Subject: [gdal-dev] GH repo - write access
Message-ID: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>

Hi,

is there any policy of assigning write access to GH repository for
those of developers who had such permission for old SVN repo?

I would like to fix [1], do I need to express my interest for write
access explicitly somehow?

Thanks, Martin

[1] https://github.com/OSGeo/gdal/issues/365

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Sun Apr  8 13:40:05 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 08 Apr 2018 22:40:05 +0200
Subject: [gdal-dev] GH repo - write access
In-Reply-To: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>
References: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>
Message-ID: <2987523.m4Py0bcWlj@even-i700>

On dimanche 8 avril 2018 22:36:27 CEST Martin Landa wrote:
> Hi,
> 
> is there any policy of assigning write access to GH repository for
> those of developers who had such permission for old SVN repo?

Hi Martin,

Yep, just ask as your did.
I've just sent you an invite.
Please also add yourself in the new section of COMMITTERS where we list folks 
with git push rights

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Sun Apr  8 13:45:37 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 8 Apr 2018 22:45:37 +0200
Subject: [gdal-dev] GH repo - write access
In-Reply-To: <CABqPoBY5vkPy1r8yfL1pRiBrPWXW81nhK00Lm+15Zebtj=RmCA@mail.gmail.com>
References: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>
 <CABqPoBY5vkPy1r8yfL1pRiBrPWXW81nhK00Lm+15Zebtj=RmCA@mail.gmail.com>
Message-ID: <CA+Ei1OcEmv7KQt0ffvi_nQGuL=HpS5hRKkcs12bmnk+gcFnmQA@mail.gmail.com>

Hi,

2018-04-08 22:38 GMT+02:00 Dan Little <theduckylittle at gmail.com>:
> With GitHub, you usually do a personal fork and then submit a pull request.
> Not quite as easy as direct commits to the main repository but standard
> practice.

really? I thought that PR is mechanism for those who haven't write
permission to the repo. After reviewing PR, it can be applied by
someone who has write access.

Question: So _core_ GDAL developers (with write access) should also
create PR? Than wait for feedback and any many cases apply PR on their
own?

Thanks for clarification, Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Sun Apr  8 14:01:59 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 08 Apr 2018 23:01:59 +0200
Subject: [gdal-dev] GH repo - write access
In-Reply-To: <CA+Ei1OcEmv7KQt0ffvi_nQGuL=HpS5hRKkcs12bmnk+gcFnmQA@mail.gmail.com>
References: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>
 <CABqPoBY5vkPy1r8yfL1pRiBrPWXW81nhK00Lm+15Zebtj=RmCA@mail.gmail.com>
 <CA+Ei1OcEmv7KQt0ffvi_nQGuL=HpS5hRKkcs12bmnk+gcFnmQA@mail.gmail.com>
Message-ID: <11312935.8mrZKvZlaj@even-i700>

> Question: So _core_ GDAL developers (with write access) should also
> create PR? Than wait for feedback and any many cases apply PR on their
> own?

It is up to you, and your confidence in your change. There can be 3 
strategies:
* directly push to origin (https://github.com/OSGeo gdal)
* do a pull request if Iyou want other people to have a chance to review and/
or have CI tests running
* or push to your own github account so that CI tests are still run on it, and 
then merge if everything's OK
As far as I'm concerned, I do a mix of the 3 depending on the change, my mood 
of the moment, etc...

If you directly push to origin, make sure to monitor
https://travis-ci.org/OSGeo/gdal/builds/
and
https://ci.appveyor.com/project/OSGeo/gdal/history
and be ready to take appropriate action if something breaks. There are 
unfortunately some flakes sometimes, or timeouts, so a failure is not 
necessarily yours, and you'll have to look at logs.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Sun Apr  8 14:02:43 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 8 Apr 2018 23:02:43 +0200
Subject: [gdal-dev] GH repo - write access
In-Reply-To: <2987523.m4Py0bcWlj@even-i700>
References: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>
 <2987523.m4Py0bcWlj@even-i700>
Message-ID: <CA+Ei1Of744D8RJH0EDC+=rpmuEPwXKpQLGoz=ac2PqC2gDZYrg@mail.gmail.com>

Hi Even,

2018-04-08 22:40 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> Yep, just ask as your did.
> I've just sent you an invite.

thanks!

> Please also add yourself in the new section of COMMITTERS where we list folks
> with git push rights

Do you mean [1]? My name seems to be already there.

Ma

[1] https://github.com/OSGeo/gdal/blob/master/gdal/COMMITTERS

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Sun Apr  8 14:04:11 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 08 Apr 2018 23:04:11 +0200
Subject: [gdal-dev] GH repo - write access
In-Reply-To: <CA+Ei1Of744D8RJH0EDC+=rpmuEPwXKpQLGoz=ac2PqC2gDZYrg@mail.gmail.com>
References: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>
 <2987523.m4Py0bcWlj@even-i700>
 <CA+Ei1Of744D8RJH0EDC+=rpmuEPwXKpQLGoz=ac2PqC2gDZYrg@mail.gmail.com>
Message-ID: <42341521.enYPo5m6du@even-i700>

> Do you mean [1]? My name seems to be already there.
> 

Yes, but we've added a new git related section at the top of the file. Your 
name is in the old SVN section.

> Ma
> 
> [1] https://github.com/OSGeo/gdal/blob/master/gdal/COMMITTERS


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From landa.martin at gmail.com  Sun Apr  8 14:05:36 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 8 Apr 2018 23:05:36 +0200
Subject: [gdal-dev] GH repo - write access
In-Reply-To: <11312935.8mrZKvZlaj@even-i700>
References: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>
 <CABqPoBY5vkPy1r8yfL1pRiBrPWXW81nhK00Lm+15Zebtj=RmCA@mail.gmail.com>
 <CA+Ei1OcEmv7KQt0ffvi_nQGuL=HpS5hRKkcs12bmnk+gcFnmQA@mail.gmail.com>
 <11312935.8mrZKvZlaj@even-i700>
Message-ID: <CA+Ei1Oc39Yc3Hge2dcQO9CTfpaFs6-c+HZc8rxRQpb9u22Nypg@mail.gmail.com>

Hi,

2018-04-08 23:01 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:

> It is up to you, and your confidence in your change. There can be 3
> strategies:
> * directly push to origin (https://github.com/OSGeo gdal)
> * do a pull request if Iyou want other people to have a chance to review and/
> or have CI tests running
> * or push to your own github account so that CI tests are still run on it, and
> then merge if everything's OK
> As far as I'm concerned, I do a mix of the 3 depending on the change, my mood
> of the moment, etc...

thanks for clarification! I will choose direct push for minor changes
VFK driver probably. For rest I will use PRs. Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From landa.martin at gmail.com  Sun Apr  8 14:06:16 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sun, 8 Apr 2018 23:06:16 +0200
Subject: [gdal-dev] GH repo - write access
In-Reply-To: <CABqPoBb3BEz4_1xQqiY7VNy0pA7BJ_tf9mc-_Ea7Gv+OrSXLyg@mail.gmail.com>
References: <CA+Ei1OcSimWaPBPQyrqRzcZzaopgudnsGK+J+MEKb3gG+9d92Q@mail.gmail.com>
 <CABqPoBY5vkPy1r8yfL1pRiBrPWXW81nhK00Lm+15Zebtj=RmCA@mail.gmail.com>
 <CA+Ei1OcEmv7KQt0ffvi_nQGuL=HpS5hRKkcs12bmnk+gcFnmQA@mail.gmail.com>
 <CABqPoBb3BEz4_1xQqiY7VNy0pA7BJ_tf9mc-_Ea7Gv+OrSXLyg@mail.gmail.com>
Message-ID: <CA+Ei1OdTUjJO117S36PS7_KduFFmM_b4j3jasJW1o2yO7UJ5rg@mail.gmail.com>

Hi,

2018-04-08 22:59 GMT+02:00 Dan Little <theduckylittle at gmail.com>:
> A good practice that I've seen many projects use is that one is not allowed
> to merge their own PRs without a review. So even a core-committer would go
> though the same steps regardless of "write access." That's particularly
> helpful when a project starts integrating CI as apart of the
> commit-acceptance practices.

OK, thanks for clarification. Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From gane.prog at gmail.com  Mon Apr  9 02:17:57 2018
From: gane.prog at gmail.com (Gane R)
Date: Mon, 9 Apr 2018 14:47:57 +0530
Subject: [gdal-dev] GDAL 2.2.4 with c++11
Message-ID: <CALMrLdDx_U=D9TeDnjqG=6t9gxHkz7cHwLmwFy7UL06YXR8XEA@mail.gmail.com>

Does the latest version of GDAL 2.2.4 can be compiled without c++11 support
or it is mandatory to compile with c++11.

Is there any possibility I can build with a compiler which doesn't support
c++11.

Can you point any relevant information on this?

Thanks
Gane
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180409/c4ddd80e/attachment.html>

From even.rouault at spatialys.com  Mon Apr  9 04:05:07 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 09 Apr 2018 13:05:07 +0200
Subject: [gdal-dev] GDAL 2.2.4 with c++11
In-Reply-To: <CALMrLdDx_U=D9TeDnjqG=6t9gxHkz7cHwLmwFy7UL06YXR8XEA@mail.gmail.com>
References: <CALMrLdDx_U=D9TeDnjqG=6t9gxHkz7cHwLmwFy7UL06YXR8XEA@mail.gmail.com>
Message-ID: <5843829.4dthXVTGbU@even-i700>

On lundi 9 avril 2018 14:47:57 CEST Gane R wrote:
> Does the latest version of GDAL 2.2.4 can be compiled without c++11 support

Yes.

C++11 is required only for the upcoming GDAL 2.3.0 :
https://trac.osgeo.org/gdal/wiki/rfc68_cplusplus11

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrea.aime at geo-solutions.it  Mon Apr  9 09:33:32 2018
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 9 Apr 2018 18:33:32 +0200
Subject: [gdal-dev] Understanding VSI caching
Message-ID: <CA+nxMTsKch3CAsiVwDcNn6Noziw-4pDy8BmQLEwa9+c-DoYCZg@mail.gmail.com>

Hi,
is there any document explaning how VSI caching works. E.g., memory vs disk
caching, whether the disk cache
is long lived or exists only for the duration of the process (and if so,
what about long lived processes
like mapserver fastcgi?) and so on?

Cheers
Andrea

==

GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Andrea Aime
@geowolf
Technical Lead

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
phone: +39 0584 962313
fax: +39 0584 1660272
mob: +39  339 8844549

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

AVVERTENZE AI SENSI DEL D.Lgs. 196/2003

Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.

The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180409/55e8dca1/attachment-0001.html>

From even.rouault at spatialys.com  Mon Apr  9 09:43:54 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 09 Apr 2018 18:43:54 +0200
Subject: [gdal-dev] Understanding VSI caching
In-Reply-To: <CA+nxMTsKch3CAsiVwDcNn6Noziw-4pDy8BmQLEwa9+c-DoYCZg@mail.gmail.com>
References: <CA+nxMTsKch3CAsiVwDcNn6Noziw-4pDy8BmQLEwa9+c-DoYCZg@mail.gmail.com>
Message-ID: <3151315.DojlpdUNhc@even-i700>

On lundi 9 avril 2018 18:33:32 CEST Andrea Aime wrote:
> Hi,
> is there any document explaning how VSI caching works. E.g., memory vs disk
> caching, whether the disk cache
> is long lived or exists only for the duration of the process (and if so,
> what about long lived processes
> like mapserver fastcgi?) and so on?

Hi Andrea,

Are you speaking about the cache machanism enabled with the VSI_CACHE=YES env variable ?
If so that's described at
http://gdal.org/gdal_virtual_file_systems.html#gdal_virtual_file_systems_vsicache
I see it lacks a bit high level details, like specifying this is RAM only, and not disk cached.
I'm going to add some words about that

Otherwise, the full "documentation" :-) is at:
https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_vsil_cache.cpp

The /vsicurl/ and related network file systems have also their own RAM cache mechanism
described at
http://gdal.org/gdal_virtual_file_systems.html#gdal_virtual_file_systems_vsicurl

Even

> 
> Cheers
> Andrea
> 
> ==
> 
> GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
> for more information.
> ==
> 
> Ing. Andrea Aime
> @geowolf
> Technical Lead
> 
> GeoSolutions S.A.S.
> Via di Montramito 3/A
> 55054  Massarosa (LU)
> phone: +39 0584 962313
> fax: +39 0584 1660272
> mob: +39  339 8844549
> 
> http://www.geo-solutions.it
> http://twitter.com/geosolutions_it
> 
> AVVERTENZE AI SENSI DEL D.Lgs. 196/2003
> 
> Le informazioni contenute in questo messaggio di posta elettronica e/o
> nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
> loro utilizzo è consentito esclusivamente al destinatario del messaggio,
> per le finalità indicate nel messaggio stesso. Qualora riceviate questo
> messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
> darcene notizia via e-mail e di procedere alla distruzione del messaggio
> stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
> divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
> utilizzarlo per finalità diverse, costituisce comportamento contrario ai
> principi dettati dal D.Lgs. 196/2003.
> 
> The information in this message and/or attachments, is intended solely for
> the attention and use of the named addressee(s) and may be confidential or
> proprietary in nature or covered by the provisions of privacy act
> (Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
> Code).Any use not in accord with its purpose, any disclosure, reproduction,
> copying, distribution, or either dissemination, either whole or partial, is
> strictly forbidden except previous formal approval of the named
> addressee(s). If you are not the intended recipient, please contact
> immediately the sender by telephone, fax or e-mail and delete the
> information in this message that has been received in error. The sender
> does not give any warranty or accept liability as the content, accuracy or
> completeness of sent messages and accepts no responsibility  for changes
> made after they were sent or for other risks which arise as a result of
> e-mail transmission, viruses, etc.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrea.aime at geo-solutions.it  Mon Apr  9 11:51:43 2018
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 9 Apr 2018 20:51:43 +0200
Subject: [gdal-dev] Understanding VSI caching
In-Reply-To: <3151315.DojlpdUNhc@even-i700>
References: <CA+nxMTsKch3CAsiVwDcNn6Noziw-4pDy8BmQLEwa9+c-DoYCZg@mail.gmail.com>
 <3151315.DojlpdUNhc@even-i700>
Message-ID: <CA+nxMTt4K9fC_W637MSgQL-uQ41H2mtOkQHEbWSeu3uTLxxyjA@mail.gmail.com>

On Mon, Apr 9, 2018 at 6:43 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Andrea,
>
> Are you speaking about the cache machanism enabled with the VSI_CACHE=YES
> env variable ?
>

I read there was some caching, but was not that specific. So, memory
caching is there, it's per file,
but not enabled by default, while disk caching is there, global, and
enabled by default?


> If so that's described at
> http://gdal.org/gdal_virtual_file_systems.html#gdal_
> virtual_file_systems_vsicache
> I see it lacks a bit high level details, like specifying this is RAM only,
> and not disk cached.
> I'm going to add some words about that
>
> Otherwise, the full "documentation" :-) is at:
> https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_vsil_cache.cpp


Hehehe :-)


> The /vsicurl/ and related network file systems have also their own RAM
> cache mechanism
> described at
> http://gdal.org/gdal_virtual_file_systems.html#gdal_
> virtual_file_systems_vsicurl


The "detect sequential reading" part is interesting, if I'm not mistaken
the logic is here,
right?

https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_vsil_curl.cpp#L1845

Thanks a lot for the useful information, as usual :-)

Cheers
Andrea


==
GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Andrea Aime
@geowolf
Technical Lead

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
phone: +39 0584 962313
fax: +39 0584 1660272
mob: +39  339 8844549

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

AVVERTENZE AI SENSI DEL D.Lgs. 196/2003

Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.

The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180409/3f53ccbf/attachment.html>

From even.rouault at spatialys.com  Mon Apr  9 11:58:54 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 09 Apr 2018 20:58:54 +0200
Subject: [gdal-dev] Understanding VSI caching
In-Reply-To: <CA+nxMTt4K9fC_W637MSgQL-uQ41H2mtOkQHEbWSeu3uTLxxyjA@mail.gmail.com>
References: <CA+nxMTsKch3CAsiVwDcNn6Noziw-4pDy8BmQLEwa9+c-DoYCZg@mail.gmail.com>
 <3151315.DojlpdUNhc@even-i700>
 <CA+nxMTt4K9fC_W637MSgQL-uQ41H2mtOkQHEbWSeu3uTLxxyjA@mail.gmail.com>
Message-ID: <5073855.YFy1Lrs9Hl@even-i700>

> I read there was some caching, but was not that specific. So, memory
> caching is there, it's per file,
> but not enabled by default,

Yes

> while disk caching is there, global, and
> enabled by default?

Which disk caching are you refering too ? There's some disk caching for the 
WMS driver, but that's all

(well there's some provisional code for disk caching in /vsicurl/ but it is 
not compiled by default, and probably broken. There was some discussion 
recently on the ML about this if I remember well)

> 
> The "detect sequential reading" part is interesting, if I'm not mistaken
> the logic is here,
> right?
> 
> https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_vsil_curl.cpp#L1845

Yes

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrea.aime at geo-solutions.it  Mon Apr  9 12:03:12 2018
From: andrea.aime at geo-solutions.it (Andrea Aime)
Date: Mon, 9 Apr 2018 21:03:12 +0200
Subject: [gdal-dev] Understanding VSI caching
In-Reply-To: <5073855.YFy1Lrs9Hl@even-i700>
References: <CA+nxMTsKch3CAsiVwDcNn6Noziw-4pDy8BmQLEwa9+c-DoYCZg@mail.gmail.com>
 <3151315.DojlpdUNhc@even-i700>
 <CA+nxMTt4K9fC_W637MSgQL-uQ41H2mtOkQHEbWSeu3uTLxxyjA@mail.gmail.com>
 <5073855.YFy1Lrs9Hl@even-i700>
Message-ID: <CA+nxMTu3rfeBB1L=aNfqRfkF41V0nJL0jkf9ErjxRTwbOonaAA@mail.gmail.com>

On Mon, Apr 9, 2018 at 8:58 PM, Even Rouault <even.rouault at spatialys.com>
wrote:

> Which disk caching are you refering too ? There's some disk caching for the
> WMS driver, but that's all
>
>
"In addition, a global least-recently-used cache of 16 MB shared among all
downloaded content is enabled by default, and content in it may be reused
after a file handle has been closed and reopen. Starting with GDAL 2.3, the
size of this global LRU cache can be modified by setting the configuration
option CPL_VSIL_CURL_CACHE_SIZE (in bytes)."

and I see in the code:

https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_vsil_curl.cpp#L203

(btw, there is no path, does it mean the file is created in the current
directory?)



> (well there's some provisional code for disk caching in /vsicurl/ but it is
> not compiled by default, and probably broken. There was some discussion
> recently on the ML about this if I remember well)
>

I'll check the archives.

Cheers
Andrea

==

GeoServer Professional Services from the experts! Visit http://goo.gl/it488V
for more information.
==

Ing. Andrea Aime
@geowolf
Technical Lead

GeoSolutions S.A.S.
Via di Montramito 3/A
55054  Massarosa (LU)
phone: +39 0584 962313
fax: +39 0584 1660272
mob: +39  339 8844549

http://www.geo-solutions.it
http://twitter.com/geosolutions_it

AVVERTENZE AI SENSI DEL D.Lgs. 196/2003

Le informazioni contenute in questo messaggio di posta elettronica e/o
nel/i file/s allegato/i sono da considerarsi strettamente riservate. Il
loro utilizzo è consentito esclusivamente al destinatario del messaggio,
per le finalità indicate nel messaggio stesso. Qualora riceviate questo
messaggio senza esserne il destinatario, Vi preghiamo cortesemente di
darcene notizia via e-mail e di procedere alla distruzione del messaggio
stesso, cancellandolo dal Vostro sistema. Conservare il messaggio stesso,
divulgarlo anche in parte, distribuirlo ad altri soggetti, copiarlo, od
utilizzarlo per finalità diverse, costituisce comportamento contrario ai
principi dettati dal D.Lgs. 196/2003.

The information in this message and/or attachments, is intended solely for
the attention and use of the named addressee(s) and may be confidential or
proprietary in nature or covered by the provisions of privacy act
(Legislative Decree June, 30 2003, no.196 - Italy's New Data Protection
Code).Any use not in accord with its purpose, any disclosure, reproduction,
copying, distribution, or either dissemination, either whole or partial, is
strictly forbidden except previous formal approval of the named
addressee(s). If you are not the intended recipient, please contact
immediately the sender by telephone, fax or e-mail and delete the
information in this message that has been received in error. The sender
does not give any warranty or accept liability as the content, accuracy or
completeness of sent messages and accepts no responsibility  for changes
made after they were sent or for other risks which arise as a result of
e-mail transmission, viruses, etc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180409/8c953241/attachment.html>

From even.rouault at spatialys.com  Mon Apr  9 13:02:38 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 09 Apr 2018 22:02:38 +0200
Subject: [gdal-dev] Understanding VSI caching
In-Reply-To: <CA+nxMTu3rfeBB1L=aNfqRfkF41V0nJL0jkf9ErjxRTwbOonaAA@mail.gmail.com>
References: <CA+nxMTsKch3CAsiVwDcNn6Noziw-4pDy8BmQLEwa9+c-DoYCZg@mail.gmail.com>
 <5073855.YFy1Lrs9Hl@even-i700>
 <CA+nxMTu3rfeBB1L=aNfqRfkF41V0nJL0jkf9ErjxRTwbOonaAA@mail.gmail.com>
Message-ID: <3445295.fSTVXqq64L@even-i700>

On lundi 9 avril 2018 21:03:12 CEST Andrea Aime wrote:
> On Mon, Apr 9, 2018 at 8:58 PM, Even Rouault <even.rouault at spatialys.com>
> 
> wrote:
> > Which disk caching are you refering too ? There's some disk caching for
> > the
> > WMS driver, but that's all
> 
> "In addition, a global least-recently-used cache of 16 MB shared among all
> downloaded content is enabled by default, and content in it may be reused
> after a file handle has been closed and reopen. Starting with GDAL 2.3, the
> size of this global LRU cache can be modified by setting the configuration
> option CPL_VSIL_CURL_CACHE_SIZE (in bytes)."

Ah, it probably means a precision "during the life-time of the process or 
until VSICurlClearCache() is called" (just added). It's just a RAM cache.

> 
> and I see in the code:
> 
> https://github.com/OSGeo/gdal/blob/master/gdal/port/cpl_vsil_curl.cpp#L203
> 
> (btw, there is no path, does it mean the file is created in the current
> directory?)

Yes, that was the more or less dead code I was mentionning too. Actually it is 
compiled in, and can be enabled with CPL_VSIL_CURL_USE_CACHE=YES, but it is 
very likely broken, unfit for any reasonable purpose etc. No warranty. Consult 
your lawyer, be sure you have a fallout shelter ready, etc ;-)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ben.elliston at anu.edu.au  Mon Apr  9 21:32:53 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Tue, 10 Apr 2018 14:32:53 +1000
Subject: [gdal-dev] PEP8 compliance for Python code
Message-ID: <137d4404-c6b7-02f2-b730-dc2ead1e1323@anu.edu.au>

The Python code in the GDAL tree covers a few things including the
testsuite and a Python module for GDAL itself.  There is quite a lot of
this code and the coding conventions are a bit all over the place. There
are several deprecated idioms still being used.  I think we should
settle on the Python PEP8 coding style guidelines as a way of
standardising the appearance of the code across the tree.

I have so far made a small number of changes detected with 'flake8', but
some of the changes (such as removing extraneous spaces around
parentheses) are quite invasive and should be done more carefully.

I propose to use the 'autopep8' tool to automatically fix all of the
trivial problems to do with whitespace. This is much faster than manual
editing and reduces the risk of errors. I plan to inspect the diffs and
run 'git diff -w' to double check that there are no non-whitespace
changes. The changes would be made one warning category at a time, on
cascading (serial) git branches so that there will be minimal merge
conflicts. Having a number of parallel branches is just asking for many
merge conflicts.

At the end of all this, we can enable flake8 support in Travis CI to
maintain compliance with the coding standard.

Thoughts?

Cheers, Ben

From even.rouault at spatialys.com  Tue Apr 10 02:05:44 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Apr 2018 11:05:44 +0200
Subject: [gdal-dev] PEP8 compliance for Python code
In-Reply-To: <137d4404-c6b7-02f2-b730-dc2ead1e1323@anu.edu.au>
References: <137d4404-c6b7-02f2-b730-dc2ead1e1323@anu.edu.au>
Message-ID: <5024408.70scDO9ICG@even-i700>

Ben,

Thanks for leading this.
Apparently autopep8 can fix most of issues, except line too longs ?
Do you plan to fix even that ? That could be quite painful now, and in the 
future, as in the testing code, you compare things like WKT strings that can 
be long, and that would be a burden to make sure we split them to 80 columns. 

I guess your plans do not cover the SWIG generated .py files, right ?

Even

> The Python code in the GDAL tree covers a few things including the
> testsuite and a Python module for GDAL itself.  There is quite a lot of
> this code and the coding conventions are a bit all over the place. There
> are several deprecated idioms still being used.  I think we should
> settle on the Python PEP8 coding style guidelines as a way of
> standardising the appearance of the code across the tree.
> 
> I have so far made a small number of changes detected with 'flake8', but
> some of the changes (such as removing extraneous spaces around
> parentheses) are quite invasive and should be done more carefully.
> 
> I propose to use the 'autopep8' tool to automatically fix all of the
> trivial problems to do with whitespace. This is much faster than manual
> editing and reduces the risk of errors. I plan to inspect the diffs and
> run 'git diff -w' to double check that there are no non-whitespace
> changes. The changes would be made one warning category at a time, on
> cascading (serial) git branches so that there will be minimal merge
> conflicts. Having a number of parallel branches is just asking for many
> merge conflicts.
> 
> At the end of all this, we can enable flake8 support in Travis CI to
> maintain compliance with the coding standard.
> 
> Thoughts?
> 
> Cheers, Ben
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ben.elliston at anu.edu.au  Tue Apr 10 02:52:20 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Tue, 10 Apr 2018 19:52:20 +1000
Subject: [gdal-dev] PEP8 compliance for Python code
In-Reply-To: <5024408.70scDO9ICG@even-i700>
References: <137d4404-c6b7-02f2-b730-dc2ead1e1323@anu.edu.au>
 <5024408.70scDO9ICG@even-i700>
Message-ID: <6bae3015-b5cf-bae1-d8e2-556d3534c5d8@anu.edu.au>

On 10/04/18 19:05, Even Rouault wrote:

> Apparently autopep8 can fix most of issues, except line too longs ?

I think that's right. I would not plan to touch long lines. The worst of
them can be fixed over time when other edits are taking place.

> I guess your plans do not cover the SWIG generated .py files, right ?

Right. We'll just skip those files.

Cheers, Ben

From even.rouault at spatialys.com  Tue Apr 10 13:06:23 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Apr 2018 22:06:23 +0200
Subject: [gdal-dev] Use of C++ iterators in API
Message-ID: <5375045.tqFkoAl42x@even-i700>

Hi,

Just wanted to advertize the recent new introduction of C++ iterators over 
GDALDataset (to iterate over its bands, layers and features), OGRLayer (to 
iterate overs its features), OGRFeature (to iterate over its field values) and 
OGRGeometry (if you iterate over a OGRGeometryCollection, you get its members. 
If you iterate over a OGRPolygon, you get its rings, etc...)
Fields can also be get and set using the [] operator on a feature.

Taken from the updated API tutorial : http://gdal.org/ogr_apitut.html

#include "ogrsf_frmts.h"
int main()
{
    GDALAllRegister();
    GDALDatasetUniquePtr poDS(GDALDataset::Open( "point.shp", 
GDAL_OF_VECTOR));
    if( poDS == nullptr )
    {
        printf( "Open failed.\n" );
        exit( 1 );
    }
    for( auto&& poLayer: poDS->GetLayers() )
    {
        for( auto&& poFeature: *poLayer )
        {
            for( auto&& oField: *poFeature )
            {
                switch( oField.GetType() )
                {
                    case OFTInteger:
                        printf( "%d,", oField.GetInteger() );
                        break;
                    case OFTInteger64:
                        printf( CPL_FRMT_GIB ",", oField.GetInteger64() );
                        break;
                    case OFTReal:
                        printf( "%.3f,", oField.GetDouble() );
                        break;
                    case OFTString:
                        printf( "%s,", oField.GetString() );
                        break;
                    default:
                        printf( "%s,", oField.GetAsString() );
                        break;
                }
          }
     }
}

There's also a visitor over OGRGeometry subclasses that can make life easier
( http://gdal.org/classOGRDefaultConstGeometryVisitor.html )

The autotest cpp stuff starting at
https://github.com/OSGeo/gdal/blob/master/autotest/cpp/test_ogr.cpp#L963
should get a good picture of all the new API.

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Tue Apr 10 13:34:56 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 10 Apr 2018 22:34:56 +0200
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <5375045.tqFkoAl42x@even-i700>
References: <5375045.tqFkoAl42x@even-i700>
Message-ID: <CABUeae93jRQUNSQK57xS04j35r-VPixm47ZX9dC5SpWrHU9nDA@mail.gmail.com>

On 10 April 2018 at 22:06, Even Rouault <even.rouault at spatialys.com> wrote:
> Hi,
>
> Just wanted to advertize the recent new introduction of C++ iterators (...)

Good one, thanks!

>     for( auto&& poLayer: poDS->GetLayers() )

Do the iterators return a proxy reference hence the tutorial prefers
auto&& over plain auto&?
(ie. like std::vector<bool> iterator does)

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Tue Apr 10 14:06:55 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 10 Apr 2018 23:06:55 +0200
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <CABUeae93jRQUNSQK57xS04j35r-VPixm47ZX9dC5SpWrHU9nDA@mail.gmail.com>
References: <5375045.tqFkoAl42x@even-i700>
 <CABUeae93jRQUNSQK57xS04j35r-VPixm47ZX9dC5SpWrHU9nDA@mail.gmail.com>
Message-ID: <8264379.avKTE3rHRU@even-i700>

On mardi 10 avril 2018 22:34:56 CEST Mateusz Loskot wrote:
> On 10 April 2018 at 22:06, Even Rouault <even.rouault at spatialys.com> wrote:
> > Hi,
> > 
> > Just wanted to advertize the recent new introduction of C++ iterators
> > (...)
> 
> Good one, thanks!
> 
> >     for( auto&& poLayer: poDS->GetLayers() )
> 
> Do the iterators return a proxy reference hence the tutorial prefers
> auto&& over plain auto&?
> (ie. like std::vector<bool> iterator does)

Not completely sure to understand what a proxy reference is (C++11 stuff is 
still very new to me, and I don't pretend to master C++98, so ...), but I feel 
that must be close to what I have used in some cases, particularly wen 
iterating over fields of a features, or points of a linestring.

I read in some tutorial that using auto&& worked in all situations, including 
when the returned reference was const, so now I just use that everywhere.

In fact the nature of the object which is returned depends on the iterator, 
and as documented in the API, for the sake of implementation simplicity, those 
iterators do not necessarily respect the whole semantics of iterators.

That is if you do

auto iter = poLineString->begin();
OGRPoint& oPoint = *iter;
++iter;
OGRPoint& oAnotherPoint = *iter;
In fact &oAnotherPoint == &oPoint.

The reason is that internally a line string is not an array of OGRPoint, but 
an array of OGRRawPoint + optional array of z + optional array of m, so the 
iterator object only holds a single OGRPoint and always return the reference 
to it when you dereference it, and updates its content when you increment it.

So basically you should only use them in range based loops, where you don't 
really manipulate the iterator and cannot do stuff like the above.

I guess the "correct" solution would have been to return a OGRPointProxy that 
would keep a link to the linestring and the point index. But not sure how you 
would do that for a const iterator where the operator * is supposed to 
returned a const reference... Except allocating a std::array<OGRPointProxy> in 
the iterator, which seems overkill.

Improvements (if doable and not adding (too much) overhead to the underlying 
objects) are welcome of course.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From mateusz at loskot.net  Tue Apr 10 14:41:23 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue, 10 Apr 2018 23:41:23 +0200
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <8264379.avKTE3rHRU@even-i700>
References: <5375045.tqFkoAl42x@even-i700>
 <CABUeae93jRQUNSQK57xS04j35r-VPixm47ZX9dC5SpWrHU9nDA@mail.gmail.com>
 <8264379.avKTE3rHRU@even-i700>
Message-ID: <CABUeae97BwcYAcc3HiZ4RGawsBywEmidZ_cAWGb9wiJ15zNgQQ@mail.gmail.com>

On 10 April 2018 at 23:06, Even Rouault <even.rouault at spatialys.com> wrote:
> On mardi 10 avril 2018 22:34:56 CEST Mateusz Loskot wrote:
>> On 10 April 2018 at 22:06, Even Rouault <even.rouault at spatialys.com> wrote:
>> >
>> > Just wanted to advertize the recent new introduction of C++ iterators
>> > (...)
>>
>> Good one, thanks!
>>
>> >     for( auto&& poLayer: poDS->GetLayers() )
>>
>> Do the iterators return a proxy reference hence the tutorial prefers
>> auto&& over plain auto&?
>> (ie. like std::vector<bool> iterator does)
>
> Not completely sure to understand what a proxy reference is (C++11 stuff is
> still very new to me, and I don't pretend to master C++98, so ...), but I feel
> that must be close to what I have used in some cases, particularly wen
> iterating over fields of a features, or points of a linestring.

I didn't look at the iterators impl. yet.
I just looked at your example and wondered if there are proxies
- for GDAL/OGR, those could be necessary, I imagine.

I mean a proxy as an object that 'looks' like a reference.
It's often necessary to for (proxied) collections of objects that can not be
accessed directly, via regular pointers/references.

> I read in some tutorial that using auto&& worked in all situations, including
> when the returned reference was const, so now I just use that everywhere.

auto&& is most useful when container<T>::reference returns a proxy object,
which would not bind to auto& (it would bind to auto const& though).

> In fact the nature of the object which is returned depends on the iterator,
> and as documented in the API, for the sake of implementation simplicity, those
> iterators do not necessarily respect the whole semantics of iterators.
>
> That is if you do
>
> auto iter = poLineString->begin();
> OGRPoint& oPoint = *iter;
> ++iter;
> OGRPoint& oAnotherPoint = *iter;
> In fact &oAnotherPoint == &oPoint.

At first, it seems like they model the input iterators, single-pass
iterator category
http://en.cppreference.com/w/cpp/concept/InputIterator

> So basically you should only use them in range based loops, where you don't
> really manipulate the iterator and cannot do stuff like the above.

Or, use like any input iterators, seems safe.

> I guess the "correct" solution would have been to return a OGRPointProxy that
> would keep a link to the linestring and the point index. But not sure how you
> would do that for a const iterator where the operator * is supposed to
> returned a const reference...

Or reference-like proxy like std::vector<bool> does.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From roeland.boeters at sweco.nl  Wed Apr 11 02:03:27 2018
From: roeland.boeters at sweco.nl (r.boeters)
Date: Wed, 11 Apr 2018 02:03:27 -0700 (MST)
Subject: [gdal-dev] GDALProgressFunc in RasterIO not called
Message-ID: <1523437407195-0.post@n6.nabble.com>

I'm using  GDALDataset::RasterIO(..)
<http://www.gdal.org/classGDALDataset.html#a80d005ed10aefafa8a55dc539c2f69da>  
to read WMS/WMTS/ECW. So not per band, nor per block.

I want to be able to terminate this process, so I thought I could pass a
GDALProgressFunc function to get intermediate status updates and return
false if the user aborts the process. However my GDALProgressFunc is never
called.

The GDALProgressFunc is defined as this:



Partial code where I'm reading the data (reading the data works fine, I get
the image; just the progress function is never called):


Am I missing anything? Or are reports to the progress function not
implemented for WM(T)S and ECW?




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From roeland.boeters at sweco.nl  Wed Apr 11 02:05:25 2018
From: roeland.boeters at sweco.nl (r.boeters)
Date: Wed, 11 Apr 2018 02:05:25 -0700 (MST)
Subject: [gdal-dev] GDALProgressFunc in RasterIO not called
In-Reply-To: <1523437407195-0.post@n6.nabble.com>
References: <1523437407195-0.post@n6.nabble.com>
Message-ID: <1523437525790-0.post@n6.nabble.com>

I'm so sorry, the code got lost....

The GDALProgressFunc is defined as this: 

int gdalProgressFunc(double dfComplete, const char *pszMessage, void
*pProgressArg)
{
  NLogger::LogMessage(Fasc(), NLogger::Info, "gdalProgressFunc called");
  return 1;
}

Partial code where I'm reading the data (reading the data works fine, I get
the image; just the progress function is never called): 
UINT32 *buf = (UINT32 *)
CPLMalloc(sizeof(UINT32)*nSDestXD*nSDestYD*rasterbands);
GDALRasterIOExtraArg arg;
INIT_RASTERIO_EXTRA_ARG(arg);

QString data = "test";
arg.pfnProgress = (GDALProgressFunc)gdalProgressFunc;
arg.pProgressData = &data;

if (m_gdalDataset->RasterIO(GDALRWFlag::GF_Read, pxLeft, pyTop, abs(pxRight
- pxLeft), abs(pyTop-pyBottom), buf, nSDestXD, nSDestYD,
GDALDataType::GDT_UInt32, rasterbands, nullptr, 0, 0, 0, &arg) != CE_None)
{
  CPLFree(buf);
  return;
}



--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From even.rouault at spatialys.com  Wed Apr 11 03:50:30 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Apr 2018 12:50:30 +0200
Subject: [gdal-dev] GDALProgressFunc in RasterIO not called
In-Reply-To: <1523437407195-0.post@n6.nabble.com>
References: <1523437407195-0.post@n6.nabble.com>
Message-ID: <18384559.nCKRbOYHMj@even-i700>

On mercredi 11 avril 2018 02:03:27 CEST r.boeters wrote:
> I'm using  GDALDataset::RasterIO(..)
> <http://www.gdal.org/classGDALDataset.html#a80d005ed10aefafa8a55dc539c2f69da
> > to read WMS/WMTS/ECW. So not per band, nor per block.
> 
> I want to be able to terminate this process, so I thought I could pass a
> GDALProgressFunc function to get intermediate status updates and return
> false if the user aborts the process. However my GDALProgressFunc is never
> called.
> 
> The GDALProgressFunc is defined as this:
> 
> 
> 
> Partial code where I'm reading the data (reading the data works fine, I get
> the image; just the progress function is never called):
> 
> 
> Am I missing anything? Or are reports to the progress function not
> implemented for WM(T)S and ECW?

The progress function is certainly used in the generic block-based reading 
code of GDAL core, but much less in driver specific code.

>From what I can see by grepping pfnProgress, it is not used by the WMS and 
WMTS driver

But I do see it used in the ECW driver in a number of places. But there are 
numerous code paths in it, so perhaps not in the one you trigger.

You'll have to dig more. Improvements welcome.

Eve

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From schwehr at gmail.com  Wed Apr 11 05:10:53 2018
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 11 Apr 2018 05:10:53 -0700
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <CABUeae97BwcYAcc3HiZ4RGawsBywEmidZ_cAWGb9wiJ15zNgQQ@mail.gmail.com>
References: <5375045.tqFkoAl42x@even-i700>
 <CABUeae93jRQUNSQK57xS04j35r-VPixm47ZX9dC5SpWrHU9nDA@mail.gmail.com>
 <8264379.avKTE3rHRU@even-i700>
 <CABUeae97BwcYAcc3HiZ4RGawsBywEmidZ_cAWGb9wiJ15zNgQQ@mail.gmail.com>
Message-ID: <CACmBxyt2a0tnowiRPVqCHGoszg9L08rVcaVMO_74h=GSuEqnJQ@mail.gmail.com>

The auto&& is really confusing.

-kurt

On Tue, Apr 10, 2018 at 2:41 PM, Mateusz Loskot <mateusz at loskot.net> wrote:

> On 10 April 2018 at 23:06, Even Rouault <even.rouault at spatialys.com>
> wrote:
> > On mardi 10 avril 2018 22:34:56 CEST Mateusz Loskot wrote:
> >> On 10 April 2018 at 22:06, Even Rouault <even.rouault at spatialys.com>
> wrote:
> >> >
> >> > Just wanted to advertize the recent new introduction of C++ iterators
> >> > (...)
> >>
> >> Good one, thanks!
> >>
> >> >     for( auto&& poLayer: poDS->GetLayers() )
> >>
> >> Do the iterators return a proxy reference hence the tutorial prefers
> >> auto&& over plain auto&?
> >> (ie. like std::vector<bool> iterator does)
> >
> > Not completely sure to understand what a proxy reference is (C++11 stuff
> is
> > still very new to me, and I don't pretend to master C++98, so ...), but
> I feel
> > that must be close to what I have used in some cases, particularly wen
> > iterating over fields of a features, or points of a linestring.
>
> I didn't look at the iterators impl. yet.
> I just looked at your example and wondered if there are proxies
> - for GDAL/OGR, those could be necessary, I imagine.
>
> I mean a proxy as an object that 'looks' like a reference.
> It's often necessary to for (proxied) collections of objects that can not
> be
> accessed directly, via regular pointers/references.
>
> > I read in some tutorial that using auto&& worked in all situations,
> including
> > when the returned reference was const, so now I just use that everywhere.
>
> auto&& is most useful when container<T>::reference returns a proxy object,
> which would not bind to auto& (it would bind to auto const& though).
>
> > In fact the nature of the object which is returned depends on the
> iterator,
> > and as documented in the API, for the sake of implementation simplicity,
> those
> > iterators do not necessarily respect the whole semantics of iterators.
> >
> > That is if you do
> >
> > auto iter = poLineString->begin();
> > OGRPoint& oPoint = *iter;
> > ++iter;
> > OGRPoint& oAnotherPoint = *iter;
> > In fact &oAnotherPoint == &oPoint.
>
> At first, it seems like they model the input iterators, single-pass
> iterator category
> http://en.cppreference.com/w/cpp/concept/InputIterator
>
> > So basically you should only use them in range based loops, where you
> don't
> > really manipulate the iterator and cannot do stuff like the above.
>
> Or, use like any input iterators, seems safe.
>
> > I guess the "correct" solution would have been to return a OGRPointProxy
> that
> > would keep a link to the linestring and the point index. But not sure
> how you
> > would do that for a const iterator where the operator * is supposed to
> > returned a const reference...
>
> Or reference-like proxy like std::vector<bool> does.
>
> Best regards,
> --
> Mateusz Loskot, http://mateusz.loskot.net
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
http://schwehr.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180411/7064601d/attachment-0001.html>

From even.rouault at spatialys.com  Wed Apr 11 05:40:34 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 11 Apr 2018 14:40:34 +0200
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <CACmBxyt2a0tnowiRPVqCHGoszg9L08rVcaVMO_74h=GSuEqnJQ@mail.gmail.com>
References: <5375045.tqFkoAl42x@even-i700>
 <CABUeae97BwcYAcc3HiZ4RGawsBywEmidZ_cAWGb9wiJ15zNgQQ@mail.gmail.com>
 <CACmBxyt2a0tnowiRPVqCHGoszg9L08rVcaVMO_74h=GSuEqnJQ@mail.gmail.com>
Message-ID: <1593932.n6vcd0ejt6@even-i700>

On mercredi 11 avril 2018 05:10:53 CEST Kurt Schwehr wrote:
> The auto&& is really confusing.

A experimentally working alternative with miminal use of '&' is

    for( auto poLayer: poDS->GetLayers() )  <-- this is a plain OGRLayer*
    {
        for( auto& poFeature: *poLayer )  <-- this is a unique_ptr<OGRFeature> so needs to be obtained by reference (otherwise compiler complains about use of deleted function unique_ptr(const unique_ptr&) = delete
        {
            for( auto& oField: *poFeature )  <-- this is a OGRFeature::FieldValue object that has no copy constructor (intended, we don't want user to be able to instanciate standalone FieldValue)

Does that look better ?

In all those above cases, the auto could also be const'ified, so the stricter typing would be

    for( const auto poLayer: poDS->GetLayers() ) 
    {
        for( const auto& poFeature: *poLayer ) 
        {
            for( const auto& oField: *poFeature )

Should we put that instead ?

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From andrew.bell.ia at gmail.com  Wed Apr 11 05:51:55 2018
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Wed, 11 Apr 2018 08:51:55 -0400
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <1593932.n6vcd0ejt6@even-i700>
References: <5375045.tqFkoAl42x@even-i700>
 <CABUeae97BwcYAcc3HiZ4RGawsBywEmidZ_cAWGb9wiJ15zNgQQ@mail.gmail.com>
 <CACmBxyt2a0tnowiRPVqCHGoszg9L08rVcaVMO_74h=GSuEqnJQ@mail.gmail.com>
 <1593932.n6vcd0ejt6@even-i700>
Message-ID: <CACJ51z0eJsk8PEkp1Z5wbBWYWvBfCsKYTT5pm9ks2ivpGOtSww@mail.gmail.com>

On Wed, Apr 11, 2018 at 8:40 AM, Even Rouault <even.rouault at spatialys.com>
wrote:

> On mercredi 11 avril 2018 05:10:53 CEST Kurt Schwehr wrote:
> > The auto&& is really confusing.
>
> A experimentally working alternative with miminal use of '&' is
>
>     for( auto poLayer: poDS->GetLayers() )  <-- this is a plain OGRLayer*
>     {
>         for( auto& poFeature: *poLayer )  <-- this is a
> unique_ptr<OGRFeature> so needs to be obtained by reference (otherwise
> compiler complains about use of deleted function unique_ptr(const
> unique_ptr&) = delete
>         {
>             for( auto& oField: *poFeature )  <-- this is a
> OGRFeature::FieldValue object that has no copy constructor (intended, we
> don't want user to be able to instanciate standalone FieldValue)
>
> Does that look better ?
>
> In all those above cases, the auto could also be const'ified, so the
> stricter typing would be
>
>     for( const auto poLayer: poDS->GetLayers() )
>     {
>         for( const auto& poFeature: *poLayer )
>         {
>             for( const auto& oField: *poFeature )


> Should we put that instead ?
>

I believe the universal reference (&&) has no purpose in this context. It
will decay to a standard reference.  So what you post is more clear.

-- 
Andrew Bell
andrew.bell.ia at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180411/ce571d1a/attachment.html>

From mateusz at loskot.net  Wed Apr 11 06:02:30 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 11 Apr 2018 15:02:30 +0200
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <1593932.n6vcd0ejt6@even-i700>
References: <5375045.tqFkoAl42x@even-i700>
 <CABUeae97BwcYAcc3HiZ4RGawsBywEmidZ_cAWGb9wiJ15zNgQQ@mail.gmail.com>
 <CACmBxyt2a0tnowiRPVqCHGoszg9L08rVcaVMO_74h=GSuEqnJQ@mail.gmail.com>
 <1593932.n6vcd0ejt6@even-i700>
Message-ID: <CABUeae_AhaxzmF3Pewp-4CbWDNrF-XyiGawMr=BLJDcnYO7_zQ@mail.gmail.com>

On 11 April 2018 at 14:40, Even Rouault <even.rouault at spatialys.com> wrote:
> On mercredi 11 avril 2018 05:10:53 CEST Kurt Schwehr wrote:
>> The auto&& is really confusing.
>
> A experimentally working alternative with miminal use of '&' is
>
>     for( auto poLayer: poDS->GetLayers() )  <-- this is a plain OGRLayer*

IMHO, it's better to get users familar with these two:

auto const& - as preferred default
auto& - where one requires, explicitly

It should cover 99.9% of uses :)

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net

From ari.jolma at gmail.com  Wed Apr 11 23:56:35 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 12 Apr 2018 09:56:35 +0300
Subject: [gdal-dev] #include tiffio.h in gtiff/libgeotiff/
Message-ID: <d9f81e97-f5cf-8202-ee40-4a5c007ee785@gmail.com>

The file frmts/gtiff/libgeotiff/xtiffio.h #include's "tiffio.h", which 
is in frmts/gtiff/libtiff. However, when compiling in this directory 
frmts/gtiff/libtiff is not included.

In my Linux Mint the compiler picks up tiffio.h from 
/usr/include/x86_64-linux-gnu/ but when I compile in freebsd I get 
./xtiffio.h:10:10: fatal error: 'tiffio.h' file not found

This was caught by a CPAN tester testing Alien::gdal (a Perl package 
which downloads and compiles GDAL): 
http://www.cpantesters.org/cpan/report/0903f568-3e0e-11e8-a1cf-bb670eaac09d

Am I missing something or is this a bug / configuration error?

Ari



From ari.jolma at gmail.com  Thu Apr 12 03:10:01 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu, 12 Apr 2018 13:10:01 +0300
Subject: [gdal-dev] #include tiffio.h in gtiff/libgeotiff/
In-Reply-To: <d9f81e97-f5cf-8202-ee40-4a5c007ee785@gmail.com>
References: <d9f81e97-f5cf-8202-ee40-4a5c007ee785@gmail.com>
Message-ID: <4ca2ea74-7640-615c-44d9-f8ec427c10d1@gmail.com>

It seems to me that frmts/gtiff/libgeotiff/GNUmakefile should also 
override the default rule for %.$(OBJ_EXT) in GDALmake.opt

%.$(OBJ_EXT):    %.c
     $(CC) $(GDAL_INCLUDE) $(ALL_C_FLAGS) -c -o $@ $<

in addition to the rule for ../../o/%.$(OBJ_EXT)

BTW, could somebody explain why the two sets of .lo and .o: one in 
current directory and one in ../../frmts/o?

Ari

On 12.04.2018 09:56, Ari Jolma wrote:
> The file frmts/gtiff/libgeotiff/xtiffio.h #include's "tiffio.h", which 
> is in frmts/gtiff/libtiff. However, when compiling in this directory 
> frmts/gtiff/libtiff is not included.
>
> In my Linux Mint the compiler picks up tiffio.h from 
> /usr/include/x86_64-linux-gnu/ but when I compile in freebsd I get 
> ./xtiffio.h:10:10: fatal error: 'tiffio.h' file not found
>
> This was caught by a CPAN tester testing Alien::gdal (a Perl package 
> which downloads and compiles GDAL): 
> http://www.cpantesters.org/cpan/report/0903f568-3e0e-11e8-a1cf-bb670eaac09d
>
> Am I missing something or is this a bug / configuration error?
>
> Ari
>
>


From f at zz.de  Thu Apr 12 04:25:46 2018
From: f at zz.de (Florian Lohoff)
Date: Thu, 12 Apr 2018 13:25:46 +0200
Subject: [gdal-dev] OGRGeometry -> OGRGeometryCollection
Message-ID: <20180412112546.l72mhtmmvopmc4p6@pax.zz.de>


Hi,

i am Intersecting to MultiPolygons and get a OGRGeometry which sometimes
contains a OGRGeometryCollection depending on the complexity of the
overlap. Now i'd like to iterate over the Geometries in the collection
but the OGRGeometry Class does not have the ->removeGeometry or
->getGeometryRef so i'd need to cast the OGRGeometry to a
OGRGeometryCollection. I saw that gdal 2.3 does have a
->toGeometryCollection but i am on Debian/Stretch which has gdal 2.1 
so i am lost on how to extract the geometries of the GeometryCollection
in an OGRGeometry object.

Flo
-- 
Florian Lohoff                                                 f at zz.de
             UTF-8 Test: The 🐈 ran after a 🐁, but the 🐁 ran away
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 833 bytes
Desc: not available
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180412/43330196/attachment.sig>

From nicolas.cadieux at archeotec.ca  Thu Apr 12 08:13:01 2018
From: nicolas.cadieux at archeotec.ca (Nicolas Cadieux)
Date: Thu, 12 Apr 2018 11:13:01 -0400
Subject: [gdal-dev] help printing the standard out from gdal_grid in python
Message-ID: <6108f6d5-0257-34db-bcfd-4c27bb1446f2@archeotec.ca>

Hi,

I am not an experienced programmer.  I am calling gdal_grid from a 
python script.  I am using p.imap_ unordered to multiprocess the 
script.  The idea is the following:

--------------------

def gdal_Grid(fileList):
     gdal_Grid_Cmd = 'gdal_grid -l ....'
     shell = subprocess.Popen(r'c:\OSGeo4W64\OSGeo4W.bat', 
stdin=subprocess.PIPE)
     shell.communicate(gdal_Grid_Cmd)
     return  'done'

-------------------------

lst = [c:\temp.csv....]

if __name__ == '__main__':
     p = Pool(2)
     for x in p.imap_unordered(gdal_Grid,lst):
         print x


The Question:
I would like to print the output (standard out???) from gdal_grid. I 
can't figure how to use stdout=subprocess.PIPE. Can you help me?
Thanks
Nicolas


From sean at mapbox.com  Thu Apr 12 08:56:15 2018
From: sean at mapbox.com (Sean Gillies)
Date: Thu, 12 Apr 2018 09:56:15 -0600
Subject: [gdal-dev] help printing the standard out from gdal_grid in
	python
In-Reply-To: <6108f6d5-0257-34db-bcfd-4c27bb1446f2@archeotec.ca>
References: <6108f6d5-0257-34db-bcfd-4c27bb1446f2@archeotec.ca>
Message-ID: <CADPhZXyP4-FGB5m8WjDK-UAMAn2nF3tVc5TcOsOMsCnRRkBJFA@mail.gmail.com>

Hi Nicolas,

check_output() is higher level and easier to use. I recommend it:
https://docs.python.org/2.7/library/subprocess.html#subprocess.check_output.
There's a note in there about capturing stderr as well. If gdal_grid is
running successfully, there may not be anything in stdout.

I think I see a bug in your code. The function you give to the pool should
take a single arg, not a list. imap_unordered() will pass elements of your
list to workers, not the entire list.

Good luck!

On Thu, Apr 12, 2018 at 9:13 AM, Nicolas Cadieux <
nicolas.cadieux at archeotec.ca> wrote:

> Hi,
>
> I am not an experienced programmer.  I am calling gdal_grid from a python
> script.  I am using p.imap_ unordered to multiprocess the script.  The idea
> is the following:
>
> --------------------
>
> def gdal_Grid(fileList):
>     gdal_Grid_Cmd = 'gdal_grid -l ....'
>     shell = subprocess.Popen(r'c:\OSGeo4W64\OSGeo4W.bat',
> stdin=subprocess.PIPE)
>     shell.communicate(gdal_Grid_Cmd)
>     return  'done'
>
> -------------------------
>
> lst = [c:\temp.csv....]
>
> if __name__ == '__main__':
>     p = Pool(2)
>     for x in p.imap_unordered(gdal_Grid,lst):
>         print x
>
>
> The Question:
> I would like to print the output (standard out???) from gdal_grid. I can't
> figure how to use stdout=subprocess.PIPE. Can you help me?
> Thanks
> Nicolas
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180412/0de91ff4/attachment.html>

From even.rouault at spatialys.com  Thu Apr 12 09:25:58 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Apr 2018 18:25:58 +0200
Subject: [gdal-dev] #include tiffio.h in gtiff/libgeotiff/
In-Reply-To: <d9f81e97-f5cf-8202-ee40-4a5c007ee785@gmail.com>
References: <d9f81e97-f5cf-8202-ee40-4a5c007ee785@gmail.com>
Message-ID: <4820853.NgWlidcbRB@even-i700>

On jeudi 12 avril 2018 09:56:35 CEST Ari Jolma wrote:
> The file frmts/gtiff/libgeotiff/xtiffio.h #include's "tiffio.h", which
> is in frmts/gtiff/libtiff. However, when compiling in this directory
> frmts/gtiff/libtiff is not included.

I presume the libtiff.so must be present on the system, but not the TIFF 
headers. Likely development package of libtiff missing.
GDAL's configure apparently only check the presence of the .so but doens't 
check that the header is available.
Internal tiffio.h is included by internal libgeotiff if GDAL detects use of 
internal libtiff (TIFF_SETTING=internal in GDALmake.opt)
But it wouldn't be correct for the internal libgeotiff to include the internal 
tiffio.h and linking against external libgeotiff.

So the immediate fix is make sure libtiff headers are present on the system 
(or explicitly select internal libtiff in ./configure)
And an improvement in configure.ac would be also welcome to check that the 
headers of external libtiff are available.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From alexhighviz at hotmail.com  Thu Apr 12 10:45:57 2018
From: alexhighviz at hotmail.com (Alex HighViz)
Date: Thu, 12 Apr 2018 17:45:57 +0000
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <8264379.avKTE3rHRU@even-i700>
References: <5375045.tqFkoAl42x@even-i700>
 <CABUeae93jRQUNSQK57xS04j35r-VPixm47ZX9dC5SpWrHU9nDA@mail.gmail.com>
 <8264379.avKTE3rHRU@even-i700>
Message-ID: <LO2P265MB0046C89D2096292E9F47B18EB4BC0@LO2P265MB0046.GBRP265.PROD.OUTLOOK.COM>

> Even:
> In fact the nature of the object which is returned depends on the iterator, and as documented in the API, for the sake of implementation simplicity, those iterators do not necessarily respect the whole semantics of iterators.

I don't think that is necessary, at least in the case of Layers you can conform to the InputIterator concept without much extra work

[snip]

> So basically you should only use them in range based loops, where you don't really manipulate the iterator and cannot do stuff like the above.

That is also the limitation of InputIterator. 

> Improvements (if doable and not adding (too much) overhead to the underlying objects) are welcome of course.

I would recommend that Layers::iterator is updated to conform to the C++ iterator concepts (to the very least to the InputIterator concept). 
It still requires the following: 
- five typedefs (value_type, reference, pointer, iterator_category, difference_type) 
- three constructors (default, copy, move)
- two assignment operators (copy, move)
- post-increment operator (operator++(int))

See also http://en.cppreference.com/w/cpp/concept/InputIterator.

*************************************************
Regarding the for(auto&& layer : layers) discussion: 


The return type of Layers::Iterator::operator*() is OGRLayer*. 

Therefore, the following:

    for(auto& layer : layers)

is incorrect and should not compile, because it binds a temporary to a reference.
 
Furthermore, the following: 
  
    for(const auto& layer: layers)

is only correct because an assignment of a temporary to a const reference extends its lifetime, and it is therefore equivalent to

   for(const auto layer : layers) 

Considering the potential confusion, you can just avoid the issue completely and write:

   for(const OGRLayer* layer : layers)


Kind regards, Alex

From even.rouault at spatialys.com  Thu Apr 12 11:03:27 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 12 Apr 2018 20:03:27 +0200
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <LO2P265MB0046C89D2096292E9F47B18EB4BC0@LO2P265MB0046.GBRP265.PROD.OUTLOOK.COM>
References: <5375045.tqFkoAl42x@even-i700> <8264379.avKTE3rHRU@even-i700>
 <LO2P265MB0046C89D2096292E9F47B18EB4BC0@LO2P265MB0046.GBRP265.PROD.OUTLOOK.COM>
Message-ID: <2290284.rkqcdGketj@even-i700>

> I would recommend that Layers::iterator is updated to conform to the C++
> iterator concepts (to the very least to the InputIterator concept). 
 It
> still requires the following:
> - five typedefs (value_type, reference, pointer, iterator_category,
> difference_type) 
 - three constructors (default, copy, move)
> - two assignment operators (copy, move)
> - post-increment operator (operator++(int))
> 
> See also http://en.cppreference.com/w/cpp/concept/InputIterator.

I just planted the seed. Contributions (preferably as pull requests) 
welcome... 

> Considering the potential confusion, you can just avoid the issue completely
> and write:
 
>    for(const OGRLayer* layer : layers)

Fair enough. I'll use this.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From ari.jolma at gmail.com  Thu Apr 12 22:48:07 2018
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri, 13 Apr 2018 08:48:07 +0300
Subject: [gdal-dev] #include tiffio.h in gtiff/libgeotiff/
In-Reply-To: <4820853.NgWlidcbRB@even-i700>
References: <d9f81e97-f5cf-8202-ee40-4a5c007ee785@gmail.com>
 <4820853.NgWlidcbRB@even-i700>
Message-ID: <50ce1df8-d476-9876-274a-925c531b5fbb@gmail.com>

On 12.04.2018 19:25, Even Rouault wrote:
> On jeudi 12 avril 2018 09:56:35 CEST Ari Jolma wrote:
>> The file frmts/gtiff/libgeotiff/xtiffio.h #include's "tiffio.h", which
>> is in frmts/gtiff/libtiff. However, when compiling in this directory
>> frmts/gtiff/libtiff is not included.
> I presume the libtiff.so must be present on the system, but not the TIFF
> headers.

More likely the libtiff.a since compiling the conftest.c tests for it 
(with -ltiff). In Linux Mint that would mean a broken libtiff-dev 
package - at least that's how I can reproduce the case in it. 
Interesting that a such situation should exist in a FreeBSD test 
environment.

>   Likely development package of libtiff missing.
> GDAL's configure apparently only check the presence of the .so but doens't
> check that the header is available.

Yes.

> Internal tiffio.h is included by internal libgeotiff if GDAL detects use of
> internal libtiff (TIFF_SETTING=internal in GDALmake.opt)
> But it wouldn't be correct for the internal libgeotiff to include the internal
> tiffio.h and linking against external libgeotiff.

I guess in this case the best way is to explicitly set 
--with-libtiff=internal.


>
> So the immediate fix is make sure libtiff headers are present on the system
> (or explicitly select internal libtiff in ./configure)
> And an improvement in configure.ac would be also welcome to check that the
> headers of external libtiff are available.

Maybe AC_CHECK_HEADER could be used in addition.

BTW, interestingly the "Check if user requests renaming internal 
libgeotiff symbols" seems to appear twice in the configure.ac.

>
> Even
>

Thanks,

Ari


From alexhighviz at hotmail.com  Fri Apr 13 04:11:30 2018
From: alexhighviz at hotmail.com (Alex HighViz)
Date: Fri, 13 Apr 2018 11:11:30 +0000
Subject: [gdal-dev] Use of C++ iterators in API
In-Reply-To: <2290284.rkqcdGketj@even-i700>
References: <5375045.tqFkoAl42x@even-i700> <8264379.avKTE3rHRU@even-i700>
 <LO2P265MB0046C89D2096292E9F47B18EB4BC0@LO2P265MB0046.GBRP265.PROD.OUTLOOK.COM>
 <2290284.rkqcdGketj@even-i700>
Message-ID: <LO2P265MB0046BF993E7F1E71E63A1209B4B30@LO2P265MB0046.GBRP265.PROD.OUTLOOK.COM>


From: Even Rouault [mailto:even.rouault at spatialys.com] 


> I just planted the seed. Contributions (preferably as pull requests) welcome... 

Ok just did that PR #411.



From markus.metz.giswork at gmail.com  Sun Apr 15 10:09:06 2018
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Sun, 15 Apr 2018 19:09:06 +0200
Subject: [gdal-dev] gdalinfo error and subsequent segfault with proj-5.0.x
Message-ID: <CAG+h=FHm=N==8vmrw7DoZtfLyiqOMtsHx_sjVgg=dTvCx0uH0w@mail.gmail.com>

I observed a segfault in gdalinfo (2.2.3, 2.2.4, 2.3.0dev-71e2ada881) when
compiled against proj-5.0.0/proj-5.0.1

The dataset is a GeoTIFF with EPSG:25832, and I get

Corner Coordinates:
ERROR 1: illegal axis orientation combination
Upper Left  (  375000.000, 5631000.000)
ERROR 1: illegal axis orientation combination
Lower Left  (  375000.000, 5628000.000)
ERROR 1: illegal axis orientation combination
Upper Right (  379000.000, 5631000.000)
ERROR 1: illegal axis orientation combination
Lower Right (  379000.000, 5628000.000)
ERROR 1: illegal axis orientation combination
Center      (  377000.000, 5629500.000)
Segmentation fault (core dumped)

The error message is printed by GDAL and comes from PROJ. I think the
segfault is a symptom of the error, therefore I would like to find out the
reason of the error.

Using gdal-2.2+ with proj-4.9.3, all is fine.

Testing proj-5.0.1 with

cs2cs +proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
+no_defs +to +proj=latlong +ellps=GRS80

proj -I +proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
+no_defs

cct +proj=pipeline +step +inv +proj=utm +zone=32 +ellps=GRS80
+towgs84=0,0,0,0,0,0,0 +units=m +no_defs

all is fine, too.

Is this a bug in (the old API still available with) proj-5.0.x or a bug in
gdal-2.2+?
Any hints where and how to dig deeper?

Markus M
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180415/144b051b/attachment.html>

From even.rouault at spatialys.com  Sun Apr 15 11:17:52 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 15 Apr 2018 20:17:52 +0200
Subject: [gdal-dev] gdalinfo error and subsequent segfault with
	proj-5.0.x
In-Reply-To: <CAG+h=FHm=N==8vmrw7DoZtfLyiqOMtsHx_sjVgg=dTvCx0uH0w@mail.gmail.com>
References: <CAG+h=FHm=N==8vmrw7DoZtfLyiqOMtsHx_sjVgg=dTvCx0uH0w@mail.gmail.com>
Message-ID: <3114463.HBNhDuhaVP@even-i700>

Markus,

>From a quick test generating a GeoTIFF in EPSG:25832, I can't reproduce.

I suspect you may link at runtime against different proj versions. How did you 
build GDAL ? I'd strongly recommend you use --with-static-proj4 (whose name is 
a bit misleading since it can actually link against a libproj.so), and then 
check with "ldd libgdal.so" that you link against a single libproj.

Even

> I observed a segfault in gdalinfo (2.2.3, 2.2.4, 2.3.0dev-71e2ada881) when
> compiled against proj-5.0.0/proj-5.0.1
> 
> The dataset is a GeoTIFF with EPSG:25832, and I get
> 
> Corner Coordinates:
> ERROR 1: illegal axis orientation combination
> Upper Left  (  375000.000, 5631000.000)
> ERROR 1: illegal axis orientation combination
> Lower Left  (  375000.000, 5628000.000)
> ERROR 1: illegal axis orientation combination
> Upper Right (  379000.000, 5631000.000)
> ERROR 1: illegal axis orientation combination
> Lower Right (  379000.000, 5628000.000)
> ERROR 1: illegal axis orientation combination
> Center      (  377000.000, 5629500.000)
> Segmentation fault (core dumped)
> 
> The error message is printed by GDAL and comes from PROJ. I think the
> segfault is a symptom of the error, therefore I would like to find out the
> reason of the error.
> 
> Using gdal-2.2+ with proj-4.9.3, all is fine.
> 
> Testing proj-5.0.1 with
> 
> cs2cs +proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> +no_defs +to +proj=latlong +ellps=GRS80
> 
> proj -I +proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> +no_defs
> 
> cct +proj=pipeline +step +inv +proj=utm +zone=32 +ellps=GRS80
> +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
> 
> all is fine, too.
> 
> Is this a bug in (the old API still available with) proj-5.0.x or a bug in
> gdal-2.2+?
> Any hints where and how to dig deeper?
> 
> Markus M


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From markus.metz.giswork at gmail.com  Sun Apr 15 13:01:24 2018
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Sun, 15 Apr 2018 22:01:24 +0200
Subject: [gdal-dev] gdalinfo error and subsequent segfault with
	proj-5.0.x
In-Reply-To: <3114463.HBNhDuhaVP@even-i700>
References: <CAG+h=FHm=N==8vmrw7DoZtfLyiqOMtsHx_sjVgg=dTvCx0uH0w@mail.gmail.com>
 <3114463.HBNhDuhaVP@even-i700>
Message-ID: <CAG+h=FEh6xOwBRxZecwHjyNj-BcYjQX_+mH=Q9S3Ebr9K8KaaQ@mail.gmail.com>

Even,

On Sun, Apr 15, 2018 at 8:17 PM, Even Rouault <even.rouault at spatialys.com>
wrote:
>
> Markus,
>
> From a quick test generating a GeoTIFF in EPSG:25832, I can't reproduce.
>
> I suspect you may link at runtime against different proj versions.

You are right. I compiled GDAL with

libproj.so -> libproj.so.13.0.1
there is no other libproj.so on my system

but gdal links against libproj.so.12

> How did you
> build GDAL ? I'd strongly recommend you use --with-static-proj4 (whose
name is
> a bit misleading since it can actually link against a libproj.so), and
then
> check with "ldd libgdal.so" that you link against a single libproj.

OK, I recompiled gdal-2.2.4 --with-static-proj4 and got

ldd libgdal.so | grep proj
    libproj.so.13 => /usr/local/lib64/libproj.so.13 (0x00007fe2ff181000)
    libproj.so.12 => /lib64/libproj.so.12 (0x00007fe2f31c7000)
???

gdalinfo now runs fine and produces expected results.

I'm still concerned about the output of ldd libgdal.so

Markus M
>
> Even
>
> > I observed a segfault in gdalinfo (2.2.3, 2.2.4, 2.3.0dev-71e2ada881)
when
> > compiled against proj-5.0.0/proj-5.0.1
> >
> > The dataset is a GeoTIFF with EPSG:25832, and I get
> >
> > Corner Coordinates:
> > ERROR 1: illegal axis orientation combination
> > Upper Left  (  375000.000, 5631000.000)
> > ERROR 1: illegal axis orientation combination
> > Lower Left  (  375000.000, 5628000.000)
> > ERROR 1: illegal axis orientation combination
> > Upper Right (  379000.000, 5631000.000)
> > ERROR 1: illegal axis orientation combination
> > Lower Right (  379000.000, 5628000.000)
> > ERROR 1: illegal axis orientation combination
> > Center      (  377000.000, 5629500.000)
> > Segmentation fault (core dumped)
> >
> > The error message is printed by GDAL and comes from PROJ. I think the
> > segfault is a symptom of the error, therefore I would like to find out
the
> > reason of the error.
> >
> > Using gdal-2.2+ with proj-4.9.3, all is fine.
> >
> > Testing proj-5.0.1 with
> >
> > cs2cs +proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> > +no_defs +to +proj=latlong +ellps=GRS80
> >
> > proj -I +proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m
> > +no_defs
> >
> > cct +proj=pipeline +step +inv +proj=utm +zone=32 +ellps=GRS80
> > +towgs84=0,0,0,0,0,0,0 +units=m +no_defs
> >
> > all is fine, too.
> >
> > Is this a bug in (the old API still available with) proj-5.0.x or a bug
in
> > gdal-2.2+?
> > Any hints where and how to dig deeper?
> >
> > Markus M
>
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180415/af6d8df0/attachment.html>

From even.rouault at spatialys.com  Sun Apr 15 13:07:43 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 15 Apr 2018 22:07:43 +0200
Subject: [gdal-dev] gdalinfo error and subsequent segfault with
	proj-5.0.x
In-Reply-To: <CAG+h=FEh6xOwBRxZecwHjyNj-BcYjQX_+mH=Q9S3Ebr9K8KaaQ@mail.gmail.com>
References: <CAG+h=FHm=N==8vmrw7DoZtfLyiqOMtsHx_sjVgg=dTvCx0uH0w@mail.gmail.com>
 <3114463.HBNhDuhaVP@even-i700>
 <CAG+h=FEh6xOwBRxZecwHjyNj-BcYjQX_+mH=Q9S3Ebr9K8KaaQ@mail.gmail.com>
Message-ID: <19077600.GVIadS52ua@even-i700>

> OK, I recompiled gdal-2.2.4 --with-static-proj4 and got
> 
> ldd libgdal.so | grep proj
>     libproj.so.13 => /usr/local/lib64/libproj.so.13 (0x00007fe2ff181000)
>     libproj.so.12 => /lib64/libproj.so.12 (0x00007fe2f31c7000)
> ???
> 
> gdalinfo now runs fine and produces expected results.
> 
> I'm still concerned about the output of ldd libgdal.so

Yes that's not sane. That means that GDAL links to a library that links to the 
system libproj (/lib64/libproj.so.12), whereas GDAL directly links to your 
custom libproj 5 build ( /usr/local/lib64/libproj.so.13) . That may crash as 
well.
As proj 5.0.1 is (I believe) ABI compatible with previous releases, one 
potential hack is to make
sudo ln -s /usr/local/lib64/libproj.so.13 /usr/local/lib64/libproj.so.12
and define LD_LIBRARY_PATH to point to /usr/local/lib64/
A cleaner solution would be to identify the GDAL dependenci(es) that link to  
/lib64/libproj.so.12 and rebuild them against the one in  /usr/local/lib64/
libproj.so.13

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From markus.metz.giswork at gmail.com  Sun Apr 15 14:05:42 2018
From: markus.metz.giswork at gmail.com (Markus Metz)
Date: Sun, 15 Apr 2018 23:05:42 +0200
Subject: [gdal-dev] gdalinfo error and subsequent segfault with
	proj-5.0.x
In-Reply-To: <19077600.GVIadS52ua@even-i700>
References: <CAG+h=FHm=N==8vmrw7DoZtfLyiqOMtsHx_sjVgg=dTvCx0uH0w@mail.gmail.com>
 <3114463.HBNhDuhaVP@even-i700>
 <CAG+h=FEh6xOwBRxZecwHjyNj-BcYjQX_+mH=Q9S3Ebr9K8KaaQ@mail.gmail.com>
 <19077600.GVIadS52ua@even-i700>
Message-ID: <CAG+h=FEQ29a5aZtRnu_2N_g87X_QULsD8GnjaaxuWepwUpMngg@mail.gmail.com>

On Sun, Apr 15, 2018 at 10:07 PM, Even Rouault <even.rouault at spatialys.com>
wrote:
>
> > OK, I recompiled gdal-2.2.4 --with-static-proj4 and got
> >
> > ldd libgdal.so | grep proj
> >     libproj.so.13 => /usr/local/lib64/libproj.so.13 (0x00007fe2ff181000)
> >     libproj.so.12 => /lib64/libproj.so.12 (0x00007fe2f31c7000)
> > ???
> >
> > gdalinfo now runs fine and produces expected results.
> >
> > I'm still concerned about the output of ldd libgdal.so
>
> Yes that's not sane. That means that GDAL links to a library that links
to the
> system libproj (/lib64/libproj.so.12), whereas GDAL directly links to your
> custom libproj 5 build ( /usr/local/lib64/libproj.so.13) . That may crash
as
> well.
>
> As proj 5.0.1 is (I believe) ABI compatible with previous releases, one
> potential hack is to make
> sudo ln -s /usr/local/lib64/libproj.so.13 /usr/local/lib64/libproj.so.12
> and define LD_LIBRARY_PATH to point to /usr/local/lib64/
> A cleaner solution would be to identify the GDAL dependenci(es) that link
to
> /lib64/libproj.so.12 and rebuild them against the one in
 /usr/local/lib64/
> libproj.so.13

Not too many on my test system. So far, GDAL is working for me now with
PROJ-5.0.x. If I encounter any problems later on, I will heed your advice.

Thanks a lot for your help!

Markus M
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180415/09a81f1a/attachment.html>

From ben.elliston at anu.edu.au  Mon Apr 16 02:33:33 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Mon, 16 Apr 2018 19:33:33 +1000
Subject: [gdal-dev] os.remove and os.unlink in the testsuite
Message-ID: <30c370a9-43c1-8e76-16fb-bfdaf96b5725@anu.edu.au>

Hi Even

What do you think about adding some convenience functions to the
gdaltest module like "try_remove" and "try_unlink" that never throw an
exception if the file doesn't exist?  This would remove a lot of lines
like these from the test cases:

try:
  os.unlink('some file')
except OSError:
  pass

Cheers, Ben

From even.rouault at spatialys.com  Mon Apr 16 02:41:34 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 16 Apr 2018 11:41:34 +0200
Subject: [gdal-dev] os.remove and os.unlink in the testsuite
In-Reply-To: <30c370a9-43c1-8e76-16fb-bfdaf96b5725@anu.edu.au>
References: <30c370a9-43c1-8e76-16fb-bfdaf96b5725@anu.edu.au>
Message-ID: <21492796.IjxjlcZRtI@even-i700>

On lundi 16 avril 2018 19:33:33 CEST Ben Elliston wrote:
> Hi Even
> 
> What do you think about adding some convenience functions to the
> gdaltest module like "try_remove" and "try_unlink" that never throw an
> exception if the file doesn't exist?  This would remove a lot of lines
> like these from the test cases:
> 
> try:
>   os.unlink('some file')
> except OSError:
>   pass
> 

You can use gdal.Unlink(filename) and gdal.RmdirRecursive(dirname). They will 
not throw any exception or error message.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From randre at gmail.com  Mon Apr 16 10:46:18 2018
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Mon, 16 Apr 2018 10:46:18 -0700
Subject: [gdal-dev] Large number of "Unable to translate coordinate system"
	in epsg file
Message-ID: <CAOL+ROETFgbmCWc=Ef3sLkRVW=MVa8j9N7+UuZAr8M64VkAuvA@mail.gmail.com>

Hi All,

Slightly off-topic question, but I'm curious why I'm seeing so many entries
that look like this in my epsg file:

# NAD27 / Michigan North
# Unable to translate coordinate system EPSG:6200 into PROJ.4 format.

Is this normal, or the sign of a flawed install of dependencies, or
something else?

Thanks,

Roger
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180416/5060d1dd/attachment.html>

From even.rouault at spatialys.com  Tue Apr 17 01:48:47 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 17 Apr 2018 10:48:47 +0200
Subject: [gdal-dev] Large number of "Unable to translate coordinate
	system" in epsg file
In-Reply-To: <CAOL+ROETFgbmCWc=Ef3sLkRVW=MVa8j9N7+UuZAr8M64VkAuvA@mail.gmail.com>
References: <CAOL+ROETFgbmCWc=Ef3sLkRVW=MVa8j9N7+UuZAr8M64VkAuvA@mail.gmail.com>
Message-ID: <1679116.qDiP4zCRbG@even-i700>

On lundi 16 avril 2018 10:46:18 CEST Roger André wrote:
> Hi All,
> 
> Slightly off-topic question, but I'm curious why I'm seeing so many entries
> that look like this in my epsg file:
> 
> # NAD27 / Michigan North
> # Unable to translate coordinate system EPSG:6200 into PROJ.4 format.
> 
> Is this normal, or the sign of a flawed install of dependencies, or
> something else?

Yes this is "normal".

EPSG:6200 / "NAD27 / Michigan North" uses a LCC_2SP(Michigan) projection 
(EPSG:1051) which is not supported by GDAL / proj :
http://lists.maptools.org/pipermail/proj/2015-April/007108.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From kreve at sdfe.dk  Tue Apr 17 04:52:47 2018
From: kreve at sdfe.dk (Kristian Evers)
Date: Tue, 17 Apr 2018 11:52:47 +0000
Subject: [gdal-dev] Large number of "Unable to translate
	coordinate	system" in epsg file
References: <CAOL+ROETFgbmCWc=Ef3sLkRVW=MVa8j9N7+UuZAr8M64VkAuvA@mail.gmail.com>
 <1679116.qDiP4zCRbG@even-i700>  
Message-ID: <2E885BB293AF0448A0181138489E9A0EAECD1798@S000014.PROD.SITAD.DK>

I've added a ticket for the addition for the Michigan LCC: https://github.com/OSGeo/proj.4/issues/940

It is a rather trivial change so a good issue for a first time PROJ contributor.

/Kristian

-----Oprindelig meddelelse-----
Fra: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] På vegne af Even Rouault
Sendt: 17. april 2018 10:49
Til: gdal-dev at lists.osgeo.org
Emne: Re: [gdal-dev] Large number of "Unable to translate coordinate system" in epsg file

On lundi 16 avril 2018 10:46:18 CEST Roger André wrote:
> Hi All,
> 
> Slightly off-topic question, but I'm curious why I'm seeing so many entries
> that look like this in my epsg file:
> 
> # NAD27 / Michigan North
> # Unable to translate coordinate system EPSG:6200 into PROJ.4 format.
> 
> Is this normal, or the sign of a flawed install of dependencies, or
> something else?

Yes this is "normal".

EPSG:6200 / "NAD27 / Michigan North" uses a LCC_2SP(Michigan) projection 
(EPSG:1051) which is not supported by GDAL / proj :
http://lists.maptools.org/pipermail/proj/2015-April/007108.html

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From randre at gmail.com  Tue Apr 17 06:44:42 2018
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Tue, 17 Apr 2018 13:44:42 +0000
Subject: [gdal-dev] Large number of "Unable to translate coordinate
 system" in epsg file
In-Reply-To: <2E885BB293AF0448A0181138489E9A0EAECD1798@S000014.PROD.SITAD.DK>
References: <CAOL+ROETFgbmCWc=Ef3sLkRVW=MVa8j9N7+UuZAr8M64VkAuvA@mail.gmail.com>
 <1679116.qDiP4zCRbG@even-i700>
 <2E885BB293AF0448A0181138489E9A0EAECD1798@S000014.PROD.SITAD.DK>
Message-ID: <CAOL+ROESPmeEzgX1YKYRheBCKA2AYbF9R14WTa-FTGXCRY8EiA@mail.gmail.com>

OK, thank you.

On Tue, Apr 17, 2018, 4:53 AM Kristian Evers <kreve at sdfe.dk> wrote:

> I've added a ticket for the addition for the Michigan LCC:
> https://github.com/OSGeo/proj.4/issues/940
>
> It is a rather trivial change so a good issue for a first time PROJ
> contributor.
>
> /Kristian
>
> -----Oprindelig meddelelse-----
> Fra: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] På vegne af Even
> Rouault
> Sendt: 17. april 2018 10:49
> Til: gdal-dev at lists.osgeo.org
> Emne: Re: [gdal-dev] Large number of "Unable to translate coordinate
> system" in epsg file
>
> On lundi 16 avril 2018 10:46:18 CEST Roger André wrote:
> > Hi All,
> >
> > Slightly off-topic question, but I'm curious why I'm seeing so many
> entries
> > that look like this in my epsg file:
> >
> > # NAD27 / Michigan North
> > # Unable to translate coordinate system EPSG:6200 into PROJ.4 format.
> >
> > Is this normal, or the sign of a flawed install of dependencies, or
> > something else?
>
> Yes this is "normal".
>
> EPSG:6200 / "NAD27 / Michigan North" uses a LCC_2SP(Michigan) projection
> (EPSG:1051) which is not supported by GDAL / proj :
> http://lists.maptools.org/pipermail/proj/2015-April/007108.html
>
> Even
>
> --
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180417/156a8f8b/attachment.html>

From ben.elliston at anu.edu.au  Wed Apr 18 00:52:15 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Wed, 18 Apr 2018 17:52:15 +1000
Subject: [gdal-dev] hardcoded paths in the testsuite
Message-ID: <fef9af89-1da2-b709-b651-1106ee7dd5fd@anu.edu.au>

Hi Even

I noticed that the testsuite does things like this:

sys.path.append('../pymod')
and:
sys.path.append('../gcore')

Using hard-coded relative paths makes things fragile. It means you must
be in the specific test directory for the tests to run -- it can't be
run from anywhere.  I think it would be better to rely on PYTHONPATH and
control the module loading from outside the test code. What do you think?

Cheers,
Ben

From even.rouault at spatialys.com  Wed Apr 18 02:35:10 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Apr 2018 11:35:10 +0200
Subject: [gdal-dev] hardcoded paths in the testsuite
In-Reply-To: <fef9af89-1da2-b709-b651-1106ee7dd5fd@anu.edu.au>
References: <fef9af89-1da2-b709-b651-1106ee7dd5fd@anu.edu.au>
Message-ID: <12420417.GUZhyJjCfA@even-i700>

Ben,

> 
> I noticed that the testsuite does things like this:
> 
> sys.path.append('../pymod')
> and:
> sys.path.append('../gcore')
> 
> Using hard-coded relative paths makes things fragile. It means you must
> be in the specific test directory for the tests to run -- it can't be
> run from anywhere. 

Actually there are a few scripts like autotest/ogr/ogr_sqlite.py that do

# Make sure we run from the directory of the script
if os.path.basename(sys.argv[0]) == os.path.basename(__file__):
    if os.path.dirname(sys.argv[0]) != '':
        os.chdir(os.path.dirname(sys.argv[0]))


Beyond the import of the other modules, all pathnames to test datasets also 
assume that the script is run from its directory.

> I think it would be better to rely on PYTHONPATH and
> control the module loading from outside the test code. What do you think?

Given the amount of changes that would be needed, I'm not convinced of the 
interest of this. And setting PYTHONPATH would be a bit annoying whereas it is 
not required for now.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From gane.prog at gmail.com  Wed Apr 18 04:57:38 2018
From: gane.prog at gmail.com (Gane R)
Date: Wed, 18 Apr 2018 17:27:38 +0530
Subject: [gdal-dev] =?utf-8?q?=28no_subject=29?=
Message-ID: <CALMrLdA72DADDVKsxFuuxuHKJLbcY1wtCX7Wdm1uCVou2QjAkQ@mail.gmail.com>

Hi all,

Is there any way to disable one or all OGR formats when building on Linux.
i.e.,
when using ./configure

Is there any way to disable certain raster formats when building on Linux

Thanks
Ganesan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180418/8b984f7b/attachment.html>

From mateusz at loskot.net  Wed Apr 18 04:58:40 2018
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed, 18 Apr 2018 13:58:40 +0200
Subject: [gdal-dev] (no subject)
In-Reply-To: <CALMrLdA72DADDVKsxFuuxuHKJLbcY1wtCX7Wdm1uCVou2QjAkQ@mail.gmail.com>
References: <CALMrLdA72DADDVKsxFuuxuHKJLbcY1wtCX7Wdm1uCVou2QjAkQ@mail.gmail.com>
Message-ID: <CABUeae_gMowG=7STDke0a9Bb4R9Bhh=VA2s7ejUKt1J5kZUqOA@mail.gmail.com>

On 18 April 2018 at 13:57, Gane R <gane.prog at gmail.com> wrote:
> Hi all,
>
> Is there any way to disable one or all OGR formats when building on Linux.
> i.e.,
> when using ./configure
>
> Is there any way to disable certain raster formats when building on Linux

https://trac.osgeo.org/gdal/wiki/BuildingOnUnixWithMinimizedDrivers

-- 
Mateusz Loskot, http://mateusz.loskot.net

From even.rouault at spatialys.com  Wed Apr 18 06:53:05 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Apr 2018 15:53:05 +0200
Subject: [gdal-dev] GDAL 2.3.0 planning
In-Reply-To: <1602150.VuOblIQN2d@even-i700>
References: <1602150.VuOblIQN2d@even-i700>
Message-ID: <5960007.HlmgbFC3XD@even-i700>

Hi,

So a reminder that 2.3.0beta1 is planned for this friday (unspecified time)

I've updated https://github.com/OSGeo/gdal/blob/master/gdal/NEWS
There were literarily tens of thousand of lines of commit logs to parse, so it 
is not unlikely I may have forgotten things.

I'd appreciate reviews and fixes, particularly from subsystem/driver 
maintainers. And particularly Alan on the DXF driver where perhaps some 
entries can be grouped together.

Even

> Hi,
> 
> If we want to keep up with our yearly release cycle, it is time considering
> it. Unless someone volunteers to take the stick, I'd be willing to issue a
> 2.3.0beta1 for April 20th (the release/2.3 branch wil be forked at that time
> to receive needed fixes and master will be labelled 2.4.0dev).
> Let it give 2 weeks of testing, and then issue a RC1 around May 4th if
> things go well.
> 
> Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From matthew.f.cechini at nasa.gov  Wed Apr 18 13:00:40 2018
From: matthew.f.cechini at nasa.gov (Cechini, Matthew F. (GSFC-423.0)[Science Systems & Applications, Inc.])
Date: Wed, 18 Apr 2018 20:00:40 +0000
Subject: [gdal-dev] ogr2ogr JSON -> Shapefile Failing
Message-ID: <2611DFF4-84D9-4D15-A0ED-90E925B7D236@nasa.gov>

All,
    Once upon a time (GDAL 1.x) I was able to convert the following JSON to Shapefile without errors.  However with GDAL 2.x I am not.  Any assistance you can provide is welcome.  I’m running a simple ` ogr2ogr -f "ESRI Shapefile" -preserve_fid <out> <in>` command.

{
  "crs":
  {
    "type": "name",
    "properties":
    {
      "name": "EPSG3413"
    }
  },
  "type": "FeatureCollection",
  "features": [
  {
    "geometry":
    {
      "type": "Point",
      "coordinates": [324117.76729052397, 844135.46348421532]
    },
    "type": "Feature",
    "id"  : 230,
    "properties":
    {
      "direction" : "T",
      "ident"     : 230,
      "id"        : 230,
      "day_offset": 0,
      "label"     : "00:44",
      "day_night" : "D",
      "time"      : "00:45",
      "datetime"  : "2017-01-01T00:45:00 UTC"
    }
  }]
}


These are the errors I am seeing:

ERROR 6: Can't create fields of type Time on shapefile layers.
ERROR 6: Can't create fields of type Time on shapefile layers.
Warning 1: Feature id not preserved

Thanks,
Matt
.................................................................
Matthew Cechini
Contractor, Science Systems and Applications, Inc.
NASA GIBS Systems/Software Engineer
410.205.6272
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180418/bce5f796/attachment.html>

From even.rouault at spatialys.com  Wed Apr 18 13:34:18 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Apr 2018 22:34:18 +0200
Subject: [gdal-dev] ogr2ogr JSON -> Shapefile Failing
In-Reply-To: <2611DFF4-84D9-4D15-A0ED-90E925B7D236@nasa.gov>
References: <2611DFF4-84D9-4D15-A0ED-90E925B7D236@nasa.gov>
Message-ID: <5093215.SF2LnlAiLk@even-i700>

On mercredi 18 avril 2018 20:00:40 CEST Cechini, Matthew F. (GSFC-423.0)
[Science Systems & Applications, Inc.] wrote:
> All,
>     Once upon a time (GDAL 1.x) I was able to convert the following JSON to
> Shapefile without errors.  However with GDAL 2.x I am not.  Any assistance
> you can provide is welcome.  I’m running a simple ` ogr2ogr -f "ESRI
> Shapefile" -preserve_fid <out> <in>` command.

Add " -fieldTypeToString Time" to force the conversion of time fields as 
strings.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From jukka.rahkonen at maanmittauslaitos.fi  Wed Apr 18 13:48:12 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Wed, 18 Apr 2018 20:48:12 +0000
Subject: [gdal-dev] Quete_string_fields creation option for CSV
Message-ID: <846c279ed26c481fb0b3e15e151d881b@C119S212VM042.msvyvi.vaha.local>

Hi,

See this https://gis.stackexchange.com/questions/279960/ogr2ogr-create-csv-with-strings-wrapped-in-double-quotes

The GDAL CSV driver supports quoted string fields in reading but I suppose that data can't be written like that.

-Jukka Rahkonen-
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180418/0a676ab5/attachment.html>

From even.rouault at spatialys.com  Wed Apr 18 13:52:58 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Apr 2018 22:52:58 +0200
Subject: [gdal-dev] ogr2ogr JSON -> Shapefile Failing
In-Reply-To: <62D65882-DC3B-46B3-BEC6-74BD722E2222@nasa.gov>
References: <2611DFF4-84D9-4D15-A0ED-90E925B7D236@nasa.gov>
 <5093215.SF2LnlAiLk@even-i700>
 <62D65882-DC3B-46B3-BEC6-74BD722E2222@nasa.gov>
Message-ID: <2756263.ozDrS14gkX@even-i700>

On mercredi 18 avril 2018 20:41:05 CEST Cechini, Matthew F. (GSFC-423.0)
[Science Systems & Applications, Inc.] wrote:
> Great, that worked.  Now to figure out how to solve the "Warning 1: Feature
> id not preserved" error.  I suspect if I dig long enough in google I'll
> find the key, but am hoping someone will see this and make my life easy. 

Feature id preservation is not supported by the shapefile driver.

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From matthew.f.cechini at nasa.gov  Wed Apr 18 13:41:05 2018
From: matthew.f.cechini at nasa.gov (Cechini, Matthew F. (GSFC-423.0)[Science Systems & Applications, Inc.])
Date: Wed, 18 Apr 2018 20:41:05 +0000
Subject: [gdal-dev] ogr2ogr JSON -> Shapefile Failing
In-Reply-To: <5093215.SF2LnlAiLk@even-i700>
References: <2611DFF4-84D9-4D15-A0ED-90E925B7D236@nasa.gov>
 <5093215.SF2LnlAiLk@even-i700>
Message-ID: <62D65882-DC3B-46B3-BEC6-74BD722E2222@nasa.gov>

Great, that worked.  Now to figure out how to solve the "Warning 1: Feature id not preserved" error.  I suspect if I dig long enough in google I'll find the key, but am hoping someone will see this and make my life easy. 

Matt
.................................................................
Matthew Cechini
Contractor, Science Systems and Applications, Inc.
NASA GIBS Systems/Software Engineer
410.205.6272
﻿On 4/18/18, 4:34 PM, "Even Rouault" <even.rouault at spatialys.com> wrote:

    On mercredi 18 avril 2018 20:00:40 CEST Cechini, Matthew F. (GSFC-423.0)
    [Science Systems & Applications, Inc.] wrote:
    > All,
    >     Once upon a time (GDAL 1.x) I was able to convert the following JSON to
    > Shapefile without errors.  However with GDAL 2.x I am not.  Any assistance
    > you can provide is welcome.  I’m running a simple ` ogr2ogr -f "ESRI
    > Shapefile" -preserve_fid <out> <in>` command.
    
    Add " -fieldTypeToString Time" to force the conversion of time fields as 
    strings.
    
    Even
    
    -- 
    Spatialys - Geospatial professional services
    http://www.spatialys.com
    


From even.rouault at spatialys.com  Wed Apr 18 14:43:11 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 18 Apr 2018 23:43:11 +0200
Subject: [gdal-dev] Quete_string_fields creation option for CSV
In-Reply-To: <846c279ed26c481fb0b3e15e151d881b@C119S212VM042.msvyvi.vaha.local>
References: <846c279ed26c481fb0b3e15e151d881b@C119S212VM042.msvyvi.vaha.local>
Message-ID: <3000746.f67Fz6XaFm@even-i700>

On mercredi 18 avril 2018 20:48:12 CEST Rahkonen Jukka (MML) wrote:
> Hi,
> 
> See this
> https://gis.stackexchange.com/questions/279960/ogr2ogr-create-csv-with-stri
> ngs-wrapped-in-double-quotes
> 
> The GDAL CSV driver supports quoted string fields in reading but I suppose
> that data can't be written like that.

Now it is possible:

[master 2a269ed] CSV: add a STRING_QUOTING=YES layer creation option to force 
double-quoting of strings (and other non-numeric fields)

Even


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com

From roper.william at gmail.com  Thu Apr 19 01:09:16 2018
From: roper.william at gmail.com (William Roper)
Date: Thu, 19 Apr 2018 09:09:16 +0100
Subject: [gdal-dev] ogr2ogr projection issues
Message-ID: <CAO5tZdN4suxYSdGRFZt45juOJ0s8xM4QWV9WKwcR=rcABetNmQ@mail.gmail.com>

Hi all,

I've been doing what i thought was a fairly routine merging of shapefiles
and have encountered some unexpected projection issues. If I fail to define
a target srs (-t_srs flag) then the features end up overlaying each other.

I describe the issue in much more detail along with screen shots here:
https://gis.stackexchange.com/questions/279992/what-is-causing-ogr2ogr-to-fail-to-merge-shapefiles-without-a-reprojection?noredirect=1#comment447102_279992

You can see the two scripts I've been using here:
https://gist.github.com/GeoWill/880e0ee973f6e3b4faad96b72eed43d9

Any pointers to better understand what might be going on greatly
appreciated!

Will
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180419/50ad48d9/attachment.html>

From menno at huss.nl  Thu Apr 19 02:17:35 2018
From: menno at huss.nl (Menno van Scheers - HUSS)
Date: Thu, 19 Apr 2018 09:17:35 +0000
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
	projection
Message-ID: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>

Hi,

Built version 2.2.4 of gdal with no additional libraries.
Currently trying to warp a grib dataset to webmercator projection with the following arguments :
gdalwarp  -t_srs "+proj=geos +lon_0=0 +h=35785831 +x_0=0 +y_0=0 +a=6378140 +b=6356755 +units=m +no_defs"  201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-__.grib webm.tiff

This task fails with : ERROR 1: Too many points (5625 out of 5625) failed to transform, unable to compute output bounds.

Source dataset has a geostationary projection
Basic info on the dataset :

PROJ.4 string is:
'+proj=geos +lon_0=0 +h=35785831 +x_0=0 +y_0=0 +a=6378140 +b=6356755 +units=m +no_defs '
Origin = (-5570248.477582973428071,5570248.477582973428071)
Pixel Size = (3000.403165948275728,-3000.403165948275728)
Corner Coordinates:
Upper Left  (-5570248.478, 5570248.478) ERROR 1: tolerance condition error

Lower Left  (-5570248.478,-5567248.074) ERROR 1: tolerance condition error

Upper Right ( 5567248.074, 5570248.478) ERROR 1: tolerance condition error

Lower Right ( 5567248.074,-5567248.074) ERROR 1: tolerance condition error


Example of the dataset :
https://hussbv-my.sharepoint.com/:u:/g/personal/menno_huss_nl/EQwTxBKwPQlOjPZ_DZcuZWcBgBs0y96_9Vev3tIqnne3KA?e=k6hmYU


Any help would be appreciated.

Menno van Scheers

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180419/2383944d/attachment.html>

From even.rouault at spatialys.com  Thu Apr 19 03:46:45 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 19 Apr 2018 12:46:45 +0200
Subject: [gdal-dev] Quete_string_fields creation option for CSV
In-Reply-To: <3000746.f67Fz6XaFm@even-i700>
References: <846c279ed26c481fb0b3e15e151d881b@C119S212VM042.msvyvi.vaha.local>
 <3000746.f67Fz6XaFm@even-i700>
Message-ID: <1715804.GH9803NkNs@even-i700>

On mercredi 18 avril 2018 23:43:11 CEST Even Rouault wrote:
> On mercredi 18 avril 2018 20:48:12 CEST Rahkonen Jukka (MML) wrote:
> > Hi,
> > 
> > See this
> > https://gis.stackexchange.com/questions/279960/ogr2ogr-create-csv-with-str
> > i
> > ngs-wrapped-in-double-quotes
> > 
> > The GDAL CSV driver supports quoted string fields in reading but I suppose
> > that data can't be written like that.
> 
> Now it is possible:
> 
> [master 2a269ed] CSV: add a STRING_QUOTING=YES layer creation option to
> force double-quoting of strings (and other non-numeric fields)

Actually I've reworked this to be

STRING_QUOTING=IF_NEEDED/IF_AMBIGUOUS/ALWAYS (Starting with GDAL 2.3): whether 
to double-quote strings. IF_AMBIGUOUS means that string values that look like numbers will 
be quoted (it also implies IF_NEEDED). Defaults to IF_AMBIGUOUS (behaviour in older 
versions was IF_NEEDED)

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180419/44564d93/attachment.html>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Apr 19 04:27:55 2018
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka (MML))
Date: Thu, 19 Apr 2018 11:27:55 +0000
Subject: [gdal-dev] Quete_string_fields creation option for CSV
Message-ID: <8df2e6517eb64edf9a765d030318763f@C119S212VM042.msvyvi.vaha.local>

Even Rouault wrote:
Re: [gdal-dev] Quete_string_fields creation option for CSV
 
> Actually I've reworked this to be
 
> STRING_QUOTING=IF_NEEDED/IF_AMBIGUOUS/ALWAYS (Starting with GDAL 2.3): whether to double-quote strings. IF_AMBIGUOUS means that string values that look like numbers will be quoted (it also implies IF_NEEDED). Defaults to IF_AMBIGUOUS (behaviour in older versions was IF_NEEDED)
 
Feels like a good set of options and I will probably enjoy IF_AMBIGUOUS myself sooner or later because we have IDs with leading zeroes here and there.

-Jukka-

From mattijn at gmail.com  Thu Apr 19 08:56:54 2018
From: mattijn at gmail.com (mattijn)
Date: Thu, 19 Apr 2018 08:56:54 -0700 (MST)
Subject: [gdal-dev] _gdal.FillNodata not Python function
In-Reply-To: <2842474.m8oGd7NWQ4@even-i700>
References: <5f4ea766-5864-e769-e4e0-62ac9198f48e@kinaxia.fr>
 <5174b2ed-7f7b-6530-5ae5-9c7d5bf3078b@kinaxia.fr>
 <2842474.m8oGd7NWQ4@even-i700>
Message-ID: <1524153414900-0.post@n6.nabble.com>

Dear, 

I've the same error/bug appearing. Also using the GDAL python package
(GDAL‑2.2.4‑cp35‑cp35m‑win_amd64.whl) from
https://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal

Regards,
Mattijn




--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

From cgohlke at uci.edu  Thu Apr 19 10:56:26 2018
From: cgohlke at uci.edu (Christoph Gohlke)
Date: Thu, 19 Apr 2018 10:56:26 -0700
Subject: [gdal-dev] _gdal.FillNodata not Python function
In-Reply-To: <1524153414900-0.post@n6.nabble.com>
References: <5f4ea766-5864-e769-e4e0-62ac9198f48e@kinaxia.fr>
 <5174b2ed-7f7b-6530-5ae5-9c7d5bf3078b@kinaxia.fr>
 <2842474.m8oGd7NWQ4@even-i700> <1524153414900-0.post@n6.nabble.com>
Message-ID: <f2a24d06-4bad-7364-6959-f660db72e338@uci.edu>

On 4/19/2018 8:56 AM, mattijn wrote:
> Dear,
> 
> I've the same error/bug appearing. Also using the GDAL python package
> (GDAL‑2.2.4‑cp35‑cp35m‑win_amd64.whl) from
> https://www.lfd.uci.edu/~gohlke/pythonlibs/#gdal
> 
> Regards,
> Mattijn
> 
> 

The pointer comparison for the `gdal.TermProgress` Python/SWIG function 
and the `GDALTermProgress` C function seems to fail at 
<https://github.com/OSGeo/gdal/blob/release/2.2/gdal/swig/include/python/typemaps_python.i#L1320>. 
Maybe a SWIG 3.0.12 bug? As a workaround, run `gdal_fillnodata.py` in 
quiet mode to avoid the callback.

Christoph

From even.rouault at spatialys.com  Fri Apr 20 05:21:16 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Apr 2018 14:21:16 +0200
Subject: [gdal-dev] GDAL 2.3.0 beta1 available
Message-ID: <54466489.7SIo4yYjin@even-i700>

Hi,

I have prepared the GDAL/OGR 2.3.0 Beta 1 release.  It will potentially be followed by a 
second beta, or hopefully directly by a RC1 if things go well.  The source is available at:

    http://download.osgeo.org/gdal/2.3.0/gdal-2.3.0beta1.tar.xz
    http://download.osgeo.org/gdal/2.3.0/gdal-2.3.0beta1.tar.gz
    http://download.osgeo.org/gdal/2.3.0/gdal230beta1.zip

A snapshot of the Python autotest suite can be downloaded from:

    http://download.osgeo.org/gdal/2.3.0/gdalautotest-2.3.0beta1.tar.gz
    http://download.osgeo.org/gdal/2.3.0/gdalautotest-2.3.0beta1.zip

Snapshot of the documentation:

    http://download.osgeo.org/gdal/2.3.0/gdal230beta1doc.zip

The GRASS plugin is available at

    http://download.osgeo.org/gdal/2.3.0/gdal-grass-2.3.0beta1.tar.gz

The NEWS is available at :
      https://trac.osgeo.org/gdal/wiki/Release/2.3.0-News

New bugs found should be filed in github.

GDAL developers and users are encouraged to treat the next 2 weeks as the prime time for 
bug finding and fixing. Given the high number of OSS-Fuzz related fixes done in a lot of 
drivers, regressions wouldn't be surprising.

I have created the release/2.3 branch from current master, so new developments can occur in 
master. Bug fixes that apply to 2.3 should be committed in master and cherry-picked in 
release/2.3

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180420/e07da5df/attachment.html>

From even.rouault at spatialys.com  Fri Apr 20 13:10:22 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Apr 2018 22:10:22 +0200
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
	projection
In-Reply-To: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
Message-ID: <1781832.rjAipCj9Hv@even-i700>

On jeudi 19 avril 2018 09:17:35 CEST Menno van Scheers - HUSS wrote:
> Hi,
> 
> Built version 2.2.4 of gdal with no additional libraries.
> Currently trying to warp a grib dataset to webmercator projection with the
> following arguments : gdalwarp  -t_srs "+proj=geos +lon_0=0 +h=35785831
> +x_0=0 +y_0=0 +a=6378140 +b=6356755 +units=m +no_defs" 
> 201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-__.
> grib webm.tiff
> 
> This task fails with : ERROR 1: Too many points (5625 out of 5625) failed to
> transform, unable to compute output bounds.
> 
> Source dataset has a geostationary projection
> Basic info on the dataset :
> 
> PROJ.4 string is:
> '+proj=geos +lon_0=0 +h=35785831 +x_0=0 +y_0=0 +a=6378140 +b=6356755
> +units=m +no_defs ' Origin =
> (-5570248.477582973428071,5570248.477582973428071)
> Pixel Size = (3000.403165948275728,-3000.403165948275728)
> Corner Coordinates:
> Upper Left  (-5570248.478, 5570248.478) ERROR 1: tolerance condition error
> 
> Lower Left  (-5570248.478,-5567248.074) ERROR 1: tolerance condition error
> 
> Upper Right ( 5567248.074, 5570248.478) ERROR 1: tolerance condition error
> 
> Lower Right ( 5567248.074,-5567248.074) ERROR 1: tolerance condition error
> 
> 
> Example of the dataset :
> https://hussbv-my.sharepoint.com/:u:/g/personal/menno_huss_nl/EQwTxBKwPQlOjP
> Z_DZcuZWcBgBs0y96_9Vev3tIqnne3KA?e=k6hmYU

Menno,

Yes gdalwarp has a hard-time with such images since a lot of points in them correspond to 
points not on the Earth surface...
The workaround is to explicitly specify the target extent (in the target SRS), so for full world 
coverage:
-te -20037508.34 -20037508.34 20037508.34 20037508.34

(note that the source image you mention appears to be fully black)

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180420/c04d7e8b/attachment.html>

From landa.martin at gmail.com  Fri Apr 20 13:55:13 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Fri, 20 Apr 2018 22:55:13 +0200
Subject: [gdal-dev] CPLReadLine2L and control characters
Message-ID: <CA+Ei1Od06mrrfcGhEtjJYd7Kx1_cN6atRShik_YyVwcW=fr-Cw@mail.gmail.com>

Hi,

when working on VFK driver improvements [0] I am dealing with various
problems. I found lines in sample data which contain 0x0x control
character [1] inside. CPLReadLine2L reads all characters:

(gdb) p pszRawLine[68]
$4 = 0 '\000'
(gdb) p pszRawLine[69]
$5 = 63 '?'
(gdb) p pszRawLine[70]
$6 = 4 '\004'
(gdb) p pszRawLine[71]
$8 = 0 '\000'
(gdb) p pszRawLine[72]
$7 = 34 '"'

But then strlen() stops on position 68 and rest of line is simply
lost. Do you have any idea how to deal with such data in reasonable
way?

Thanks a lot for pointers in advance! Martin

[0] https://github.com/OSGeo/gdal/issues/365
[1] https://en.wikipedia.org/wiki/ISO/IEC_8859-2
[2] http://geo102.fsv.cvut.cz/~landa/tmp/0xline.txt

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From even.rouault at spatialys.com  Fri Apr 20 14:06:43 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 20 Apr 2018 23:06:43 +0200
Subject: [gdal-dev] CPLReadLine2L and control characters
In-Reply-To: <CA+Ei1Od06mrrfcGhEtjJYd7Kx1_cN6atRShik_YyVwcW=fr-Cw@mail.gmail.com>
References: <CA+Ei1Od06mrrfcGhEtjJYd7Kx1_cN6atRShik_YyVwcW=fr-Cw@mail.gmail.com>
Message-ID: <2776226.UHZc4JH9TN@even-i700>

Martin,

> 
> when working on VFK driver improvements [0] I am dealing with various
> problems. I found lines in sample data which contain 0x0x control
> character [1] inside. 

You mean 0x00 right ?
I would not expect those to be valid in ISO-8859-2. How are they supposed to be interpreted 
? Are you sure the dataset is valid ?

> CPLReadLine2L reads all characters:
> 
> (gdb) p pszRawLine[68]
> $4 = 0 '\000'
> (gdb) p pszRawLine[69]
> $5 = 63 '?'
> (gdb) p pszRawLine[70]
> $6 = 4 '\004'
> (gdb) p pszRawLine[71]
> $8 = 0 '\000'
> (gdb) p pszRawLine[72]
> $7 = 34 '"'
> 
> But then strlen() stops on position 68 and rest of line is simply
> lost. Do you have any idea how to deal with such data in reasonable
> way?

I guess you could transform CPLReadLine2L() into CPLReadLine3L() with an extra int* 
pnBufLength output argument that would return the final value of nBufLength, and then you 
would lop on the string to remove those annoying nul characters.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180420/1a062ad8/attachment.html>

From landa.martin at gmail.com  Sat Apr 21 00:46:58 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 21 Apr 2018 09:46:58 +0200
Subject: [gdal-dev] CPLReadLine2L and control characters
In-Reply-To: <2776226.UHZc4JH9TN@even-i700>
References: <CA+Ei1Od06mrrfcGhEtjJYd7Kx1_cN6atRShik_YyVwcW=fr-Cw@mail.gmail.com>
 <2776226.UHZc4JH9TN@even-i700>
Message-ID: <CA+Ei1OfiEFrmceEhnps-3hswSa_yee9Lip8w0qRQ7z1NVaRamQ@mail.gmail.com>

Hi,

2018-04-20 23:06 GMT+02:00 Even Rouault <even.rouault at spatialys.com>:
> You mean 0x00 right ?

right.

> I would not expect those to be valid in ISO-8859-2. How are they supposed to
> be interpreted ? Are you sure the dataset is valid ?

Right, it's not valid in the sense of ISO-8859-2. Anyway I would
attempt to skip such characters and be able read also such line.

> I guess you could transform CPLReadLine2L() into CPLReadLine3L() with an
> extra int* pnBufLength output argument that would return the final value of
> nBufLength, and then you would lop on the string to remove those annoying
> nul characters.

Right, I was just wondering whether it's reasonable to create a new
method just for my case. Thanks for feedback, Ma

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From andre+joost at nurfuerspam.de  Sat Apr 21 10:27:54 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Sat, 21 Apr 2018 19:27:54 +0200
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
	projection
In-Reply-To: <1781832.rjAipCj9Hv@even-i700>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <1781832.rjAipCj9Hv@even-i700>
Message-ID: <pbfsa0$n12$1@blaine.gmane.org>

Am 20.04.18 um 22:10 schrieb Even Rouault:
> On jeudi 19 avril 2018 09:17:35 CEST Menno van Scheers - HUSS wrote:
>> Hi,
>>
>> Built version 2.2.4 of gdal with no additional libraries.
>> Currently trying to warp a grib dataset to webmercator projection with the
>> following arguments : gdalwarp  -t_srs "+proj=geos +lon_0=0 +h=35785831
>> +x_0=0 +y_0=0 +a=6378140 +b=6356755 +units=m +no_defs"
>> 201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-__.
>> grib webm.tiff
>>
>> This task fails with : ERROR 1: Too many points (5625 out of 5625) failed to
>> transform, unable to compute output bounds.
>>
>> Source dataset has a geostationary projection
>> Basic info on the dataset :
>>
>> PROJ.4 string is:
>> '+proj=geos +lon_0=0 +h=35785831 +x_0=0 +y_0=0 +a=6378140 +b=6356755
>> +units=m +no_defs ' Origin =
>> (-5570248.477582973428071,5570248.477582973428071)
>> Pixel Size = (3000.403165948275728,-3000.403165948275728)
>> Corner Coordinates:
>> Upper Left  (-5570248.478, 5570248.478) ERROR 1: tolerance condition error
>>
>> Lower Left  (-5570248.478,-5567248.074) ERROR 1: tolerance condition error
>>
>> Upper Right ( 5567248.074, 5570248.478) ERROR 1: tolerance condition error
>>
>> Lower Right ( 5567248.074,-5567248.074) ERROR 1: tolerance condition error
>>
>>
>> Example of the dataset :
>> https://hussbv-my.sharepoint.com/:u:/g/personal/menno_huss_nl/EQwTxBKwPQlOjP
>> Z_DZcuZWcBgBs0y96_9Vev3tIqnne3KA?e=k6hmYU
>
> Menno,
>
> Yes gdalwarp has a hard-time with such images since a lot of points in them correspond to
> points not on the Earth surface...
> The workaround is to explicitly specify the target extent (in the target SRS), so for full world
> coverage:
> -te -20037508.34 -20037508.34 20037508.34 20037508.34
>


I tried:
gdal_translate -a_srs "+proj=geos +h=35785831 +a=6378169 +b=6356583.8 
+no_defs" -b 1 
201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-__.grib 
temp.tif
gdalwarp -t_srs EPSG:3857 -te -20037508.34 -20037508.34 20037508.34 
20037508.34 temp.tif output.tif

but still get the same too much points. Even with selecting a smaller 
target extent that should be within the visible sector.

Greetings,
Andre Joost



From ben.elliston at anu.edu.au  Sun Apr 22 18:54:25 2018
From: ben.elliston at anu.edu.au (Ben Elliston)
Date: Mon, 23 Apr 2018 11:54:25 +1000
Subject: [gdal-dev] testsuite question
Message-ID: <bb3afd7b-622d-355c-6342-cdc62250c533@anu.edu.au>

Hi Even

The testsuite has numerous instances like this:

    if version_info >= (3, 0, 0):
        for i in range(100000):
            exec("f.write(b'\\xa0\\x86\\x01\\x00\\x00\\x00\\x00\\x00')")
    else:
        for i in range(100000):
            f.write('\xa0\x86\x01\x00\x00\x00\x00\x00')

Why is it necessary on Python 3 to use exec() in this way?  It seems
very complicated and counterintuitive.

Thanks, Ben

From even.rouault at spatialys.com  Mon Apr 23 01:32:25 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 23 Apr 2018 10:32:25 +0200
Subject: [gdal-dev] testsuite question
In-Reply-To: <bb3afd7b-622d-355c-6342-cdc62250c533@anu.edu.au>
References: <bb3afd7b-622d-355c-6342-cdc62250c533@anu.edu.au>
Message-ID: <12225593.1bcdqjhxAv@even-i700>

On lundi 23 avril 2018 11:54:25 CEST Ben Elliston wrote:
> Hi Even
> 
> The testsuite has numerous instances like this:
> 
>     if version_info >= (3, 0, 0):
>         for i in range(100000):
>             exec("f.write(b'\\xa0\\x86\\x01\\x00\\x00\\x00\\x00\\x00')")
>     else:
>         for i in range(100000):
>             f.write('\xa0\x86\x01\x00\x00\x00\x00\x00')
> 
> Why is it necessary on Python 3 to use exec() in this way?  It seems
> very complicated and counterintuitive.

Probably a remain of an era where we tried to be compatible of python 2.5. I see python >= 
2.6 supports b'foo'  so we could probably only use the b'' syntax whereever python3 needs it

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180423/69ec0e25/attachment.html>

From menno at huss.nl  Tue Apr 24 06:11:17 2018
From: menno at huss.nl (Menno van Scheers - HUSS)
Date: Tue, 24 Apr 2018 13:11:17 +0000
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to
	webmercator	projection
In-Reply-To: <pbfsa0$n12$1@blaine.gmane.org>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <1781832.rjAipCj9Hv@even-i700> <pbfsa0$n12$1@blaine.gmane.org>
Message-ID: <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>

Yeah, I already tried warping with smaller target extends.
Im quiete certain earlier versions of gdal would throw tollerance condition errors, but would still warp.
With the current version it just wont.

Menno van Scheers

-----Original Message-----
From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Andre Joost
Sent: zaterdag 21 april 2018 19:28
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator projection

Am 20.04.18 um 22:10 schrieb Even Rouault:
> On jeudi 19 avril 2018 09:17:35 CEST Menno van Scheers - HUSS wrote:
>> Hi,
>>
>> Built version 2.2.4 of gdal with no additional libraries.
>> Currently trying to warp a grib dataset to webmercator projection 
>> with the following arguments : gdalwarp  -t_srs "+proj=geos +lon_0=0 
>> +h=35785831
>> +x_0=0 +y_0=0 +a=6378140 +b=6356755 +units=m +no_defs"
>> 201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-__.
>> grib webm.tiff
>>
>> This task fails with : ERROR 1: Too many points (5625 out of 5625) 
>> failed to transform, unable to compute output bounds.
>>
>> Source dataset has a geostationary projection Basic info on the 
>> dataset :
>>
>> PROJ.4 string is:
>> '+proj=geos +lon_0=0 +h=35785831 +x_0=0 +y_0=0 +a=6378140 +b=6356755
>> +units=m +no_defs ' Origin =
>> (-5570248.477582973428071,5570248.477582973428071)
>> Pixel Size = (3000.403165948275728,-3000.403165948275728)
>> Corner Coordinates:
>> Upper Left  (-5570248.478, 5570248.478) ERROR 1: tolerance condition 
>> error
>>
>> Lower Left  (-5570248.478,-5567248.074) ERROR 1: tolerance condition 
>> error
>>
>> Upper Right ( 5567248.074, 5570248.478) ERROR 1: tolerance condition 
>> error
>>
>> Lower Right ( 5567248.074,-5567248.074) ERROR 1: tolerance condition 
>> error
>>
>>
>> Example of the dataset :
>> https://hussbv-my.sharepoint.com/:u:/g/personal/menno_huss_nl/EQwTxBK
>> wPQlOjP Z_DZcuZWcBgBs0y96_9Vev3tIqnne3KA?e=k6hmYU
>
> Menno,
>
> Yes gdalwarp has a hard-time with such images since a lot of points in 
> them correspond to points not on the Earth surface...
> The workaround is to explicitly specify the target extent (in the 
> target SRS), so for full world
> coverage:
> -te -20037508.34 -20037508.34 20037508.34 20037508.34
>


I tried:
gdal_translate -a_srs "+proj=geos +h=35785831 +a=6378169 +b=6356583.8 
+no_defs" -b 1
201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-__.grib
temp.tif
gdalwarp -t_srs EPSG:3857 -te -20037508.34 -20037508.34 20037508.34
20037508.34 temp.tif output.tif

but still get the same too much points. Even with selecting a smaller target extent that should be within the visible sector.

Greetings,
Andre Joost


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From menno at huss.nl  Tue Apr 24 06:40:24 2018
From: menno at huss.nl (Menno van Scheers - HUSS)
Date: Tue, 24 Apr 2018 13:40:24 +0000
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset
	to	webmercator	projection
In-Reply-To: <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <1781832.rjAipCj9Hv@even-i700> <pbfsa0$n12$1@blaine.gmane.org>
 <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
Message-ID: <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>

Just verified this.

Warping the original dataset with the following commandline : 
gdalwarp -t_srs "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs " -te -65 -65 65 65 -te_srs "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs" "C:\Temp\nl\newtiff.tiff" "C:\temp\nl\oldgdalwarp.tiff"

Succeeds in v2.1.0 with a lot of tolerance condition errors.
Fails in v2.2.4 with  : ERROR 1: Too many points (5625 out of 5625) failed to transform, unable to compute output bounds.

Best regards,

Menno van Scheers


-----Original Message-----
From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Menno van Scheers - HUSS
Sent: dinsdag 24 april 2018 15:11
To: Andre Joost <andre+joost at nurfuerspam.de>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator projection

Yeah, I already tried warping with smaller target extends.
Im quiete certain earlier versions of gdal would throw tollerance condition errors, but would still warp.
With the current version it just wont.

Menno van Scheers

-----Original Message-----
From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Andre Joost
Sent: zaterdag 21 april 2018 19:28
To: gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator projection

Am 20.04.18 um 22:10 schrieb Even Rouault:
> On jeudi 19 avril 2018 09:17:35 CEST Menno van Scheers - HUSS wrote:
>> Hi,
>>
>> Built version 2.2.4 of gdal with no additional libraries.
>> Currently trying to warp a grib dataset to webmercator projection 
>> with the following arguments : gdalwarp  -t_srs "+proj=geos +lon_0=0
>> +h=35785831
>> +x_0=0 +y_0=0 +a=6378140 +b=6356755 +units=m +no_defs"
>> 201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-__.
>> grib webm.tiff
>>
>> This task fails with : ERROR 1: Too many points (5625 out of 5625) 
>> failed to transform, unable to compute output bounds.
>>
>> Source dataset has a geostationary projection Basic info on the 
>> dataset :
>>
>> PROJ.4 string is:
>> '+proj=geos +lon_0=0 +h=35785831 +x_0=0 +y_0=0 +a=6378140 +b=6356755
>> +units=m +no_defs ' Origin =
>> (-5570248.477582973428071,5570248.477582973428071)
>> Pixel Size = (3000.403165948275728,-3000.403165948275728)
>> Corner Coordinates:
>> Upper Left  (-5570248.478, 5570248.478) ERROR 1: tolerance condition 
>> error
>>
>> Lower Left  (-5570248.478,-5567248.074) ERROR 1: tolerance condition 
>> error
>>
>> Upper Right ( 5567248.074, 5570248.478) ERROR 1: tolerance condition 
>> error
>>
>> Lower Right ( 5567248.074,-5567248.074) ERROR 1: tolerance condition 
>> error
>>
>>
>> Example of the dataset :
>> https://hussbv-my.sharepoint.com/:u:/g/personal/menno_huss_nl/EQwTxBK
>> wPQlOjP Z_DZcuZWcBgBs0y96_9Vev3tIqnne3KA?e=k6hmYU
>
> Menno,
>
> Yes gdalwarp has a hard-time with such images since a lot of points in 
> them correspond to points not on the Earth surface...
> The workaround is to explicitly specify the target extent (in the 
> target SRS), so for full world
> coverage:
> -te -20037508.34 -20037508.34 20037508.34 20037508.34
>


I tried:
gdal_translate -a_srs "+proj=geos +h=35785831 +a=6378169 +b=6356583.8 
+no_defs" -b 1
201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-__.grib
temp.tif
gdalwarp -t_srs EPSG:3857 -te -20037508.34 -20037508.34 20037508.34
20037508.34 temp.tif output.tif

but still get the same too much points. Even with selecting a smaller target extent that should be within the visible sector.

Greetings,
Andre Joost


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Tue Apr 24 13:53:12 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 24 Apr 2018 22:53:12 +0200
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset
	to	webmercator	projection
In-Reply-To: <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
Message-ID: <1731381.MAGmsTCmNZ@even-i700>

On mardi 24 avril 2018 13:40:24 CEST Menno van Scheers - HUSS wrote:
> Just verified this.
> 
> Warping the original dataset with the following commandline : 
> gdalwarp -t_srs "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs " -te -65
> -65 65 65 -te_srs "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"
> "C:\Temp\nl\newtiff.tiff" "C:\temp\nl\oldgdalwarp.tiff"
 
> Succeeds in v2.1.0 with a lot of tolerance condition errors.
> Fails in v2.2.4 with  : ERROR 1: Too many points (5625 out of 5625) failed
> to transform, unable to compute output bounds.

Can you share this original image ? I get no error with master on the grib file with the above 
commandline.

 
> Best regards,
> 
> Menno van Scheers
> 
> 
> -----Original Message-----
> From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Menno
> van Scheers - HUSS
 Sent: dinsdag 24 april 2018 15:11
> To: Andre Joost <andre+joost at nurfuerspam.de>; gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
> projection
 
> Yeah, I already tried warping with smaller target extends.
> Im quiete certain earlier versions of gdal would throw tollerance condition
> errors, but would still warp.
 With the current version it just wont.
> 
> Menno van Scheers
> 
> -----Original Message-----
> From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Andre
> Joost
 Sent: zaterdag 21 april 2018 19:28
> To: gdal-dev at lists.osgeo.org
> Subject: Re: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
> projection
 
> Am 20.04.18 um 22:10 schrieb Even Rouault:
> 
> > On jeudi 19 avril 2018 09:17:35 CEST Menno van Scheers - HUSS wrote:
> > 
> >> Hi,
> >>
> >>
> >>
> >> Built version 2.2.4 of gdal with no additional libraries.
> >> Currently trying to warp a grib dataset to webmercator projection 
> >> with the following arguments : gdalwarp  -t_srs "+proj=geos +lon_0=0
> >> +h=35785831
> >> +x_0=0 +y_0=0 +a=6378140 +b=6356755 +units=m +no_defs"
> >> 201804181115_L-000-MSG4__-MPEF________-MPEG_____-000000___-201804181115-_
> >> _.
 grib webm.tiff
> >>
> >>
> >>
> >> This task fails with : ERROR 1: Too many points (5625 out of 5625) 
> >> failed to transform, unable to compute output bounds.
> >>
> >>
> >>
> >> Source dataset has a geostationary projection Basic info on the 
> >> dataset :
> >>
> >>
> >>
> >> PROJ.4 string is:
> >> '+proj=geos +lon_0=0 +h=35785831 +x_0=0 +y_0=0 +a=6378140 +b=6356755
> >> +units=m +no_defs ' Origin =
> >> (-5570248.477582973428071,5570248.477582973428071)
> >> Pixel Size = (3000.403165948275728,-3000.403165948275728)
> >> Corner Coordinates:
> >> Upper Left  (-5570248.478, 5570248.478) ERROR 1: tolerance condition 
> >> error
> >>
> >>
> >>
> >> Lower Left  (-5570248.478,-5567248.074) ERROR 1: tolerance condition 
> >> error
> >>
> >>
> >>
> >> Upper Right ( 5567248.074, 5570248.478) ERROR 1: tolerance condition 
> >> error
> >>
> >>
> >>
> >> Lower Right ( 5567248.074,-5567248.074) ERROR 1: tolerance condition 
> >> error
> >>
> >>
> >>
> >>
> >> Example of the dataset :
> >> https://hussbv-my.sharepoint.com/:u:/g/personal/menno_huss_nl/EQwTxBK
> >> wPQlOjP Z_DZcuZWcBgBs0y96_9Vev3tIqnne3KA?e=k6hmYU
> >
> >
> >
> > Menno,
> >
> >
> >
> > Yes gdalwarp has a hard-time with such images since a lot of points in 
> > them correspond to points not on the Earth surface...
> > The workaround is to explicitly specify the target extent (in the 
> > target SRS), so for full world
> > coverage:
> > -te -20037508.34 -20037508.34 20037508.34 20037508.34
> >
> >
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180424/57314512/attachment-0001.html>

From andre+joost at nurfuerspam.de  Wed Apr 25 05:29:37 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 25 Apr 2018 14:29:37 +0200
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
	projection
In-Reply-To: <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <1781832.rjAipCj9Hv@even-i700> <pbfsa0$n12$1@blaine.gmane.org>
 <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
Message-ID: <pbpsbh$dg4$1@blaine.gmane.org>

Am 24.04.18 um 15:40 schrieb Menno van Scheers - HUSS:
> Just verified this.
>
> Warping the original dataset with the following commandline :
> gdalwarp -t_srs "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "
> -te -65 -65 65 65 -te_srs "+proj=longlat +ellps=WGS84 +datum=WGS84
> +no_defs" "C:\Temp\nl\newtiff.tiff" "C:\temp\nl\oldgdalwarp.tiff"
>
> Succeeds in v2.1.0 with a lot of tolerance condition errors. Fails in
> v2.2.4 with  : ERROR 1: Too many points (5625 out of 5625) failed to
> transform, unable to compute output bounds.
>


Just checked here: It worked up to GDAL 2.2.3 (from Gisinternals) on the 
full target extent, and fails with the current 2.2.4.

And the result was not all black.

HTH,
Andre Joost


From andre+joost at nurfuerspam.de  Wed Apr 25 05:45:03 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 25 Apr 2018 14:45:03 +0200
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
	projection
In-Reply-To: <pbpsbh$dg4$1@blaine.gmane.org>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <1781832.rjAipCj9Hv@even-i700> <pbfsa0$n12$1@blaine.gmane.org>
 <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <pbpsbh$dg4$1@blaine.gmane.org>
Message-ID: <pbpt60$6sn$1@blaine.gmane.org>

Am 25.04.18 um 14:29 schrieb Andre Joost:

> Just checked here: It worked up to GDAL 2.2.3 (from Gisinternals) on the
> full target extent, and fails with the current 2.2.4.
>

... and gdal 2.4.0dev from Gisinternals works the same as 2.2.3.

So only the OSGEO4W version 2.2.4 fails. Maybe because of PROJ 5.0.1?

My Linux with Ubuntugis is at v 2.2.2 and works as expected too.

HTH,
Andre Joost



From andre+joost at nurfuerspam.de  Wed Apr 25 06:09:20 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 25 Apr 2018 15:09:20 +0200
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
	projection
In-Reply-To: <pbpt60$6sn$1@blaine.gmane.org>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <1781832.rjAipCj9Hv@even-i700> <pbfsa0$n12$1@blaine.gmane.org>
 <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <pbpsbh$dg4$1@blaine.gmane.org> <pbpt60$6sn$1@blaine.gmane.org>
Message-ID: <pbpuj8$clk$1@blaine.gmane.org>

Am 25.04.18 um 14:45 schrieb Andre Joost:
> Am 25.04.18 um 14:29 schrieb Andre Joost:
>
>> Just checked here: It worked up to GDAL 2.2.3 (from Gisinternals) on the
>> full target extent, and fails with the current 2.2.4.
>>
>
> ... and gdal 2.4.0dev from Gisinternals works the same as 2.2.3.
>
> So only the OSGEO4W version 2.2.4 fails. Maybe because of PROJ 5.0.1?
>

Seems to be. After downgrading to PROJ 4.9.3 it works again, GDAL 2.2.4 
and gdal-dev.

HTH,
Andre Joost



From kreve at sdfe.dk  Wed Apr 25 06:50:26 2018
From: kreve at sdfe.dk (Kristian Evers)
Date: Wed, 25 Apr 2018 13:50:26 +0000
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to
	webmercator	projection
In-Reply-To: <pbpuj8$clk$1@blaine.gmane.org>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <1781832.rjAipCj9Hv@even-i700> <pbfsa0$n12$1@blaine.gmane.org>
 <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <pbpsbh$dg4$1@blaine.gmane.org> <pbpt60$6sn$1@blaine.gmane.org>
 <pbpuj8$clk$1@blaine.gmane.org>
Message-ID: <DFABE143-F088-45FF-A6C6-8329CAF8E0FE@sdfe.dk>

Andre,

The PROJ 5.0.1 OSGeo4W installation is faulty so that may be the problem. Specifically the null grid is not being installed in the 5.0.1 package as reported on the mailing list [0]. This has not been resolved yet. Try copying in the null grid to C:\OSGeo4W64\share\proj and see if that changes anything. You can use the file from your current 4.9.3 installation.

If that doesn’t work try to reproduce the problem using cs2cs and I’ll take a look it.

/Kristian

[0] https://lists.osgeo.org/pipermail/osgeo4w-dev/2018-April/003581.html

On 25 Apr 2018, at 15:09, Andre Joost <andre+joost at nurfuerspam.de<mailto:andre+joost at nurfuerspam.de>> wrote:

Am 25.04.18 um 14:45 schrieb Andre Joost:
Am 25.04.18 um 14:29 schrieb Andre Joost:

Just checked here: It worked up to GDAL 2.2.3 (from Gisinternals) on the
full target extent, and fails with the current 2.2.4.


... and gdal 2.4.0dev from Gisinternals works the same as 2.2.3.

So only the OSGEO4W version 2.2.4 fails. Maybe because of PROJ 5.0.1?


Seems to be. After downgrading to PROJ 4.9.3 it works again, GDAL 2.2.4 and gdal-dev.

HTH,
Andre Joost


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180425/5dc45e1d/attachment.html>

From andre+joost at nurfuerspam.de  Wed Apr 25 10:20:17 2018
From: andre+joost at nurfuerspam.de (Andre Joost)
Date: Wed, 25 Apr 2018 19:20:17 +0200
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
	projection
In-Reply-To: <DFABE143-F088-45FF-A6C6-8329CAF8E0FE@sdfe.dk>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <1781832.rjAipCj9Hv@even-i700> <pbfsa0$n12$1@blaine.gmane.org>
 <AM6P191MB048750EBC7A54EDC1471C570AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <AM6P191MB0487FA46D90BB850F9685C34AC880@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <pbpsbh$dg4$1@blaine.gmane.org> <pbpt60$6sn$1@blaine.gmane.org>
 <pbpuj8$clk$1@blaine.gmane.org>
 <DFABE143-F088-45FF-A6C6-8329CAF8E0FE@sdfe.dk>
Message-ID: <pbqd9s$tuj$1@blaine.gmane.org>

Am 25.04.18 um 15:50 schrieb Kristian Evers:
> Andre,
>
> The PROJ 5.0.1 OSGeo4W installation is faulty so that may be the
> problem. Specifically the null grid is not being installed in the
> 5.0.1 package as reported on the mailing list [0]. This has not been
> resolved yet. Try copying in the null grid to C:\OSGeo4W64\share\proj
> and see if that changes anything. You can use the file from your
> current 4.9.3 installation.
>

That does not improve the situation with gdalwarp. I will do some tatest 
with cs2cs later.


Greetings,
Andre Joost


From gdal at stripfamily.net  Wed Apr 25 11:06:17 2018
From: gdal at stripfamily.net (David Strip)
Date: Wed, 25 Apr 2018 12:06:17 -0600
Subject: [gdal-dev] Removing layers from GeoSpatial PDF with ogr2ogr?
Message-ID: <75d3469c-537a-e3fa-d408-a2b6db59cd68@stripfamily.net>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180425/09f1ca34/attachment.html>

From even.rouault at spatialys.com  Wed Apr 25 12:02:58 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 25 Apr 2018 21:02:58 +0200
Subject: [gdal-dev] Removing layers from GeoSpatial PDF with ogr2ogr?
In-Reply-To: <75d3469c-537a-e3fa-d408-a2b6db59cd68@stripfamily.net>
References: <75d3469c-537a-e3fa-d408-a2b6db59cd68@stripfamily.net>
Message-ID: <6202620.8D0mcaXXKq@even-i700>

On mercredi 25 avril 2018 12:06:17 CEST David Strip wrote:
> I'm trying to remove a layer from a geospatial pdf (specifically the
> orthoimage layer in USGS topos). ogrinfo reports 26 layers in the meta-data
> report, but only 12 layers with vector features. When I try to remove the
> image layer with this command
> ogr2ogr -f "PDF" map.pdf NM_Canada_Ojitos_20110201_TM_geo_enabled.pdf
> --config GDAL_PDF_LAYERS_OFF "Images.Orthoimage"
> 
> the output file is missing the layers with the text labels. In addition, the
> styling of at least some of the layers is different. For example, the
> contours in the input have two different line weights, but the output is a
> single line weight. Are these differences a limitation of the driver, or do
> I need to add more parameters/options?

This is expected. When doing ogr2ogr you run into limitations of the read side and write side 
of the PDF driver, and running through OGR abstraction in the middle, so loss is expected in 
the case of PDF.


-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180425/16b9b0d0/attachment.html>

From even.rouault at spatialys.com  Wed Apr 25 13:12:27 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 25 Apr 2018 22:12:27 +0200
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator
	projection
In-Reply-To: <pbqd9s$tuj$1@blaine.gmane.org>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <DFABE143-F088-45FF-A6C6-8329CAF8E0FE@sdfe.dk>
 <pbqd9s$tuj$1@blaine.gmane.org>
Message-ID: <8271367.hAjYaLVYvN@even-i700>

On mercredi 25 avril 2018 19:20:17 CEST Andre Joost wrote:
> Am 25.04.18 um 15:50 schrieb Kristian Evers:
> > Andre,
> > 
> > The PROJ 5.0.1 OSGeo4W installation is faulty so that may be the
> > problem. Specifically the null grid is not being installed in the
> > 5.0.1 package as reported on the mailing list [0]. This has not been
> > resolved yet. Try copying in the null grid to C:\OSGeo4W64\share\proj
> > and see if that changes anything. You can use the file from your
> > current 4.9.3 installation.
> 
> That does not improve the situation with gdalwarp. I will do some tatest
> with cs2cs later.
> 

I've tracked the error down to pj_transform() implementation in proj 5. A potential fix is in 
https://github.com/OSGeo/proj.4/pull/955

This is specific to using the proj.4 API of proj5.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180425/f39a5deb/attachment.html>

From sbfitzpatrick at rogers.com  Wed Apr 25 13:52:21 2018
From: sbfitzpatrick at rogers.com (Shannon Fitzpatrick)
Date: Wed, 25 Apr 2018 16:52:21 -0400
Subject: [gdal-dev] Building OpenEV with GDAL 2.2.4
Message-ID: <003a01d3dcd7$4f3e5200$edbaf600$@rogers.com>

Hi,

 

I'm trying to build OpenEV with GDAL 2.2.4 using Visual Studio 2008. I have
been able to build and run OpenEV with GDAL 2.0.2 with Visual Studio 2008.
However, as soon as I move to 2.0.3 OpenEV dies when try and start it. Seems
to be an issue with swig since when you comment out the lines starting at
"SWIGTYPE_p_GDALDatasetShadow = SWIG_TypeQuery("_p_GDALDatasetShadow")" to
the end of the function init_gdal in gvmodule.c OpenEV starts ( You can not
open an image though). Does anyone have any advice to point me in the
correct direction as far as swig and as to which compiler I can have to
expect a little issues as possible with.

 

Thanks

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180425/8d691035/attachment.html>

From menno at huss.nl  Thu Apr 26 01:26:19 2018
From: menno at huss.nl (Menno van Scheers - HUSS)
Date: Thu, 26 Apr 2018 08:26:19 +0000
Subject: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to
	webmercator	projection
In-Reply-To: <8271367.hAjYaLVYvN@even-i700>
References: <AM6P191MB04874F3D8ABD06E55CFDA00AACB50@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>
 <DFABE143-F088-45FF-A6C6-8329CAF8E0FE@sdfe.dk>
 <pbqd9s$tuj$1@blaine.gmane.org> <8271367.hAjYaLVYvN@even-i700>
Message-ID: <AM6P191MB0487EDDFC7CBB75E2279102DAC8E0@AM6P191MB0487.EURP191.PROD.OUTLOOK.COM>

Potential fix seems to be merged with master of proj4.
Can now successfully warp the dataset.

Thanks !

Menno van Scheers

From: gdal-dev [mailto:gdal-dev-bounces at lists.osgeo.org] On Behalf Of Even Rouault
Sent: woensdag 25 april 2018 22:12
To: gdal-dev at lists.osgeo.org
Cc: Andre Joost <andre+joost at nurfuerspam.de>
Subject: Re: [gdal-dev] Warping EUMetsat MSG-4 MPE dataset to webmercator projection


On mercredi 25 avril 2018 19:20:17 CEST Andre Joost wrote:

> Am 25.04.18 um 15:50 schrieb Kristian Evers:

> > Andre,

> >

> > The PROJ 5.0.1 OSGeo4W installation is faulty so that may be the

> > problem. Specifically the null grid is not being installed in the

> > 5.0.1 package as reported on the mailing list [0]. This has not been

> > resolved yet. Try copying in the null grid to C:\OSGeo4W64\share\proj

> > and see if that changes anything. You can use the file from your

> > current 4.9.3 installation.

>

> That does not improve the situation with gdalwarp. I will do some tatest

> with cs2cs later.

>



I've tracked the error down to pj_transform() implementation in proj 5. A potential fix is in https://github.com/OSGeo/proj.4/pull/955



This is specific to using the proj.4 API of proj5.



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180426/a97194b9/attachment-0001.html>

From woklist at kyngchaos.com  Thu Apr 26 06:22:05 2018
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu, 26 Apr 2018 08:22:05 -0500
Subject: [gdal-dev] VRT pixel functions on tiled vrt
Message-ID: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>

I'm trying to add a pixel function (Python) to a vrt where there are multiple rasters (ComplexSource) tiled together (that is, not stacked like an RGB image).  When I translate the vrt to a tif, only the first ComplexSource is processed, the rest on the raster is set to 0.

I got the basics of the functin from the vrt docs, and it does work, for the first raster tile.  Maybe the python notation for calculating the numpy array is wrong?

The original vrt is created from gdalbuildvrt.  This is the vrt thru the first 2 rasters:

<VRTDataset rasterXSize="14401" rasterYSize="4801">
 <SRS>GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]]</SRS>
 <GeoTransform> -2.5000416666666666e+01,  8.3333333333333263e-04,  0.0000000000000000e+00,  6.7000416666666666e+01,  0.0000000000000000e+00, -8.3333333333333263e-04</GeoTransform>
 <VRTRasterBand dataType="Byte" band="1" subClass="VRTDerivedRasterBand">
   <PixelFunctionType>land</PixelFunctionType>
   <PixelFunctionLanguage>Python</PixelFunctionLanguage>
   <PixelFunctionCode><![CDATA[
import numpy
def land(in_ar, out_ar, xoff, yoff, xsize, ysize, raster_xsize, raster_ysize, buf_radius, gt, **kwargs):
	out_ar[:] = (in_ar[0] > 0)
]]>
   </PixelFunctionCode>
   <ColorInterp>Gray</ColorInterp>
   <ComplexSource>
     <SourceFilename relativeToVRT="1">n63w017.tif</SourceFilename>
     <SourceBand>1</SourceBand>
     <SourceProperties RasterXSize="1201" RasterYSize="1201" DataType="Int16" BlockXSize="1201" BlockYSize="3" />
     <SrcRect xOff="0" yOff="0" xSize="1201" ySize="1201" />
     <DstRect xOff="9600" yOff="3600" xSize="1201" ySize="1201" />
     <NODATA>-32768</NODATA>
   </ComplexSource>
   <ComplexSource>
     <SourceFilename relativeToVRT="1">n63w018.tif</SourceFilename>
     <SourceBand>1</SourceBand>
     <SourceProperties RasterXSize="1201" RasterYSize="1201" DataType="Int16" BlockXSize="1201" BlockYSize="3" />
     <SrcRect xOff="0" yOff="0" xSize="1201" ySize="1201" />
     <DstRect xOff="8400" yOff="3600" xSize="1201" ySize="1201" />
     <NODATA>-32768</NODATA>
   </ComplexSource>
...
 </VRTRasterBand>
</VRTDataset>


-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

The equator is so long, it could encircle the earth completely once.


From even.rouault at spatialys.com  Thu Apr 26 10:41:40 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Apr 2018 19:41:40 +0200
Subject: [gdal-dev] VRT pixel functions on tiled vrt
In-Reply-To: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
References: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
Message-ID: <1772403.VU0x9QhJjq@even-i700>

On jeudi 26 avril 2018 08:22:05 CEST William Kyngesburye wrote:
> I'm trying to add a pixel function (Python) to a vrt where there are
> multiple rasters (ComplexSource) tiled together (that is, not stacked like
> an RGB image).  When I translate the vrt to a tif, only the first
> ComplexSource is processed, the rest on the raster is set to 0.
> 
> I got the basics of the functin from the vrt docs, and it does work, for the
> first raster tile.  Maybe the python notation for calculating the numpy
> array is wrong?
> 
> The original vrt is created from gdalbuildvrt.  This is the vrt thru the
> first 2 rasters:

William,

in a VRTDerivedRasterBand, the sources are considered to be a stack, and in_ar[0] will return 
the first source and in_ar[1] the seconded one.

What you need to do is create a regular tiled VRT, and use that one has the single source of a 
VRTDerivedRasterBand

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180426/83a0827a/attachment.html>

From woklist at kyngchaos.com  Thu Apr 26 10:56:10 2018
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu, 26 Apr 2018 12:56:10 -0500
Subject: [gdal-dev] VRT pixel functions on tiled vrt
In-Reply-To: <1772403.VU0x9QhJjq@even-i700>
References: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
 <1772403.VU0x9QhJjq@even-i700>
Message-ID: <B5558229-BE12-496A-BF1F-640ADB5D154D@kyngchaos.com>

So, a vrt of a vrt?

I wanted to avoid that, because as I understand the source, it reads each raster in the derived band as a single numpy array, which would be all the tiled rasters together.  Most of the vrts that I want to process this way are huge, GBs.

I guess I can make a derived band vrt of each tile, then merge those together as a normal vrt.

I already tried running gdal_calc.py on the normal vrts to do the same thing into a geotiff, but it takes forever, while the pixel functions (also python) appear to be much faster.

> On Apr 26, 2018, at 12:41 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> On jeudi 26 avril 2018 08:22:05 CEST William Kyngesburye wrote:
> > I'm trying to add a pixel function (Python) to a vrt where there are
> > multiple rasters (ComplexSource) tiled together (that is, not stacked like
> > an RGB image).  When I translate the vrt to a tif, only the first
> > ComplexSource is processed, the rest on the raster is set to 0.
> > 
> > I got the basics of the functin from the vrt docs, and it does work, for the
> > first raster tile.  Maybe the python notation for calculating the numpy
> > array is wrong?
> > 
> > The original vrt is created from gdalbuildvrt.  This is the vrt thru the
> > first 2 rasters:
>  
> William,
>  
> in a VRTDerivedRasterBand, the sources are considered to be a stack, and in_ar[0] will return the first source and in_ar[1] the seconded one.
>  
> What you need to do is create a regular tiled VRT, and use that one has the single source of a VRTDerivedRasterBand
>  
> Even
>  
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com <http://www.spatialys.com/>_______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180426/740b2a2a/attachment-0001.html>

From even.rouault at spatialys.com  Thu Apr 26 10:59:57 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 26 Apr 2018 19:59:57 +0200
Subject: [gdal-dev] VRT pixel functions on tiled vrt
In-Reply-To: <B5558229-BE12-496A-BF1F-640ADB5D154D@kyngchaos.com>
References: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
 <1772403.VU0x9QhJjq@even-i700>
 <B5558229-BE12-496A-BF1F-640ADB5D154D@kyngchaos.com>
Message-ID: <1699875.hzHKmZd1yy@even-i700>

On jeudi 26 avril 2018 12:56:10 CEST William Kyngesburye wrote:
> So, a vrt of a vrt?

Yes

> 
> I wanted to avoid that, because as I understand the source, it reads each
> raster in the derived band as a single numpy array, which would be all the
> tiled rasters together.  

No, if you use gdal_translate, it will process the source by reasonable chunks, so you 
should be able to process arbitrarily large sources.

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180426/ecd85ba6/attachment.html>

From woklist at kyngchaos.com  Thu Apr 26 11:07:15 2018
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu, 26 Apr 2018 13:07:15 -0500
Subject: [gdal-dev] VRT pixel functions on tiled vrt
In-Reply-To: <1699875.hzHKmZd1yy@even-i700>
References: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
 <1772403.VU0x9QhJjq@even-i700>
 <B5558229-BE12-496A-BF1F-640ADB5D154D@kyngchaos.com>
 <1699875.hzHKmZd1yy@even-i700>
Message-ID: <839E48AA-92F1-43DA-864B-B197D90EE98F@kyngchaos.com>

So, if the gdal library queries for a region of the vrt (ie processing it in chunks), the numpy array will be just that region?  I'll give it a try.

What about something like viewing the whole vrt in QGIS - will it be read in chunks as well?  IOW, is it the GDAL library that breaks it into chunks at reading, or is it the responsibility of programs (gdal_translate, QGIS,...) to ask for chunks?

> On Apr 26, 2018, at 12:59 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> On jeudi 26 avril 2018 12:56:10 CEST William Kyngesburye wrote:
> > So, a vrt of a vrt?
>  
> Yes
>  
> > 
> > I wanted to avoid that, because as I understand the source, it reads each
> > raster in the derived band as a single numpy array, which would be all the
> > tiled rasters together.  
>  
> No, if you use gdal_translate, it will process the source by reasonable chunks, so you should be able to process arbitrarily large sources.
>  
> Even
>  
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com <http://www.spatialys.com/>_______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We can die but once, and that once we must die.  To be always fearing, then, would not avert it, and would make life miserable."

- Tarzan, on death

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180426/bddcec64/attachment.html>

From tobias.wendorff at tu-dortmund.de  Thu Apr 26 14:33:32 2018
From: tobias.wendorff at tu-dortmund.de (Tobias Wendorff)
Date: Thu, 26 Apr 2018 23:33:32 +0200
Subject: [gdal-dev] Removing layers from GeoSpatial PDF with ogr2ogr?
In-Reply-To: <6202620.8D0mcaXXKq@even-i700>
References: <75d3469c-537a-e3fa-d408-a2b6db59cd68@stripfamily.net>
 <6202620.8D0mcaXXKq@even-i700>
Message-ID: <4a45ad6c5ec3d3ee5cd45855d7a02d7f.squirrel@webmail.tu-dortmund.de>

Am Mi, 25.04.2018, 21:02 schrieb Even Rouault:
>
> This is expected. When doing ogr2ogr you run into limitations
> of the read side and write side of the PDF driver, and running
> through OGR abstraction in the middle, so loss is expected in
> the case of PDF.

Even experienced PDF-orientated applications, like Ghostscript,
are have problems with PDF layers.

I had a similar problem in the past. I ended up unpacking the PDF
to an editable text-only format and removed the objects manually.

Maybe you can find someone with Acrobat PDF (the editor one), who
can fix the files for you?


From gdal at stripfamily.net  Thu Apr 26 16:13:26 2018
From: gdal at stripfamily.net (David Strip)
Date: Thu, 26 Apr 2018 17:13:26 -0600
Subject: [gdal-dev] Removing layers from GeoSpatial PDF with ogr2ogr?
In-Reply-To: <4a45ad6c5ec3d3ee5cd45855d7a02d7f.squirrel@webmail.tu-dortmund.de>
References: <75d3469c-537a-e3fa-d408-a2b6db59cd68@stripfamily.net>
 <6202620.8D0mcaXXKq@even-i700>
 <4a45ad6c5ec3d3ee5cd45855d7a02d7f.squirrel@webmail.tu-dortmund.de>
Message-ID: <06503109-fc61-fccf-5131-decee007fea2@stripfamily.net>

On 4/26/2018 3:33 PM, Tobias Wendorff wrote:
> Am Mi, 25.04.2018, 21:02 schrieb Even Rouault:
>> This is expected. When doing ogr2ogr you run into limitations
>> of the read side and write side of the PDF driver, and running
>> through OGR abstraction in the middle, so loss is expected in
>> the case of PDF.
> Even experienced PDF-orientated applications, like Ghostscript,
> are have problems with PDF layers.
>
> I had a similar problem in the past. I ended up unpacking the PDF
> to an editable text-only format and removed the objects manually.
>
> Maybe you can find someone with Acrobat PDF (the editor one), who
> can fix the files for you?
>
>
I'm working with the "new" USGS topo maps which are distributed in
geospatial PDF format. I'm trying to remove the orthoimage layer. There
is a hack using ghostscript to remove all bitmaps that works for this
special case.

From woklist at kyngchaos.com  Fri Apr 27 10:42:16 2018
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri, 27 Apr 2018 12:42:16 -0500
Subject: [gdal-dev] VRT pixel functions on tiled vrt
In-Reply-To: <839E48AA-92F1-43DA-864B-B197D90EE98F@kyngchaos.com>
References: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
 <1772403.VU0x9QhJjq@even-i700>
 <B5558229-BE12-496A-BF1F-640ADB5D154D@kyngchaos.com>
 <1699875.hzHKmZd1yy@even-i700>
 <839E48AA-92F1-43DA-864B-B197D90EE98F@kyngchaos.com>
Message-ID: <8584DD96-4D1D-4F96-999D-625B44F2621D@kyngchaos.com>

OK, it worked as vrt of a vrt.  Memory not an issue.

But I have a new problem.  One vrt I want to instead do > -29 (caspian sea, -29 in SRTM data).  The whole region evaluates to 1 (true).  It looks like the in_ar[] is getting truncated to an unsigned byte, 0-255, from its orignal Int16.  Testing some values, anything up to 254 gives me 0/1 areas matching the elevation values in the original DEM, but >255 returns 0 for the whole area (that is, everything >255 was truncated to 255, so nothing is >255).  Thus, > -29 is true for the whole area.

I tried using the python cmp() function, in case the () test was casting each value to Byte, but it complained that it's ambiguous for an array.  The error suggested to use a.any() or a.all(), but I don't know how to do that one.

Here is the script again:

import numpy
def land(in_ar, out_ar, xoff, yoff, xsize, ysize, raster_xsize, raster_ysize, buf_radius, gt, **kwargs):
	out_ar[:] = (in_ar[0] > -29)

> On Apr 26, 2018, at 1:07 PM, William Kyngesburye <woklist at kyngchaos.com> wrote:
> 
> So, if the gdal library queries for a region of the vrt (ie processing it in chunks), the numpy array will be just that region?  I'll give it a try.
> 
> What about something like viewing the whole vrt in QGIS - will it be read in chunks as well?  IOW, is it the GDAL library that breaks it into chunks at reading, or is it the responsibility of programs (gdal_translate, QGIS,...) to ask for chunks?
> 
>> On Apr 26, 2018, at 12:59 PM, Even Rouault <even.rouault at spatialys.com <mailto:even.rouault at spatialys.com>> wrote:
>> 
>> On jeudi 26 avril 2018 12:56:10 CEST William Kyngesburye wrote:
>> > So, a vrt of a vrt?
>>  
>> Yes
>>  
>> > 
>> > I wanted to avoid that, because as I understand the source, it reads each
>> > raster in the derived band as a single numpy array, which would be all the
>> > tiled rasters together.  
>>  
>> No, if you use gdal_translate, it will process the source by reasonable chunks, so you should be able to process arbitrarily large sources.
>>  
>> Even
>>  
>> -- 
>> Spatialys - Geospatial professional services
>> http://www.spatialys.com <http://www.spatialys.com/>_______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/ <http://www.kyngchaos.com/>
> 
> "We can die but once, and that once we must die.  To be always fearing, then, would not avert it, and would make life miserable."
> 
> - Tarzan, on death
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180427/f52d2e90/attachment.html>

From woklist at kyngchaos.com  Fri Apr 27 10:52:32 2018
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri, 27 Apr 2018 12:52:32 -0500
Subject: [gdal-dev] VRT pixel functions on tiled vrt
In-Reply-To: <8584DD96-4D1D-4F96-999D-625B44F2621D@kyngchaos.com>
References: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
 <1772403.VU0x9QhJjq@even-i700>
 <B5558229-BE12-496A-BF1F-640ADB5D154D@kyngchaos.com>
 <1699875.hzHKmZd1yy@even-i700>
 <839E48AA-92F1-43DA-864B-B197D90EE98F@kyngchaos.com>
 <8584DD96-4D1D-4F96-999D-625B44F2621D@kyngchaos.com>
Message-ID: <E0C46FC8-06CC-4AD5-9756-9C5B8C6807F0@kyngchaos.com>

I tried:

out_ar[:] = ((in_ar[0] + 29) > 0)

to try to remove the suspected truncation - bring -29 up to 0 before it's truncated - but then elevation 227 is false and everything else is true (<=226, >=228)

> On Apr 27, 2018, at 12:42 PM, William Kyngesburye <woklist at kyngchaos.com> wrote:
> 
> OK, it worked as vrt of a vrt.  Memory not an issue.
> 
> But I have a new problem.  One vrt I want to instead do > -29 (caspian sea, -29 in SRTM data).  The whole region evaluates to 1 (true).  It looks like the in_ar[] is getting truncated to an unsigned byte, 0-255, from its orignal Int16.  Testing some values, anything up to 254 gives me 0/1 areas matching the elevation values in the original DEM, but >255 returns 0 for the whole area (that is, everything >255 was truncated to 255, so nothing is >255).  Thus, > -29 is true for the whole area.
> 
> I tried using the python cmp() function, in case the () test was casting each value to Byte, but it complained that it's ambiguous for an array.  The error suggested to use a.any() or a.all(), but I don't know how to do that one.
> 
> Here is the script again:
> 
> import numpy
> def land(in_ar, out_ar, xoff, yoff, xsize, ysize, raster_xsize, raster_ysize, buf_radius, gt, **kwargs):
> 	out_ar[:] = (in_ar[0] > -29)
> 
>> On Apr 26, 2018, at 1:07 PM, William Kyngesburye <woklist at kyngchaos.com> wrote:
>> 
>> So, if the gdal library queries for a region of the vrt (ie processing it in chunks), the numpy array will be just that region?  I'll give it a try.
>> 
>> What about something like viewing the whole vrt in QGIS - will it be read in chunks as well?  IOW, is it the GDAL library that breaks it into chunks at reading, or is it the responsibility of programs (gdal_translate, QGIS,...) to ask for chunks?
>> 
>>> On Apr 26, 2018, at 12:59 PM, Even Rouault <even.rouault at spatialys.com> wrote:
>>> 
>>> On jeudi 26 avril 2018 12:56:10 CEST William Kyngesburye wrote:
>>> > So, a vrt of a vrt?
>>>  
>>> Yes
>>>  
>>> > 
>>> > I wanted to avoid that, because as I understand the source, it reads each
>>> > raster in the derived band as a single numpy array, which would be all the
>>> > tiled rasters together.  
>>>  
>>> No, if you use gdal_translate, it will process the source by reasonable chunks, so you should be able to process arbitrarily large sources.
>>>  
>>> Even
>>>  
>>> -- 
>>> Spatialys - Geospatial professional services
>>> http://www.spatialys.com
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
>> -----
>> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
>> http://www.kyngchaos.com/
>> 
>> "We can die but once, and that once we must die.  To be always fearing, then, would not avert it, and would make life miserable."
>> 
>> - Tarzan, on death
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
> Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
> First Pogril: I don't know either.  Wretched, isn't it?
> 
> -HitchHiker's Guide to the Galaxy
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

[Trillian]  What are you supposed to do WITH a maniacally depressed robot?

[Marvin]  You think you have problems?  What are you supposed to do if you ARE a maniacally depressed robot?  No, don't try and answer, I'm 50,000 times more intelligent than you and even I don't know the answer...

- HitchHiker's Guide to the Galaxy



From even.rouault at spatialys.com  Fri Apr 27 12:32:46 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 27 Apr 2018 21:32:46 +0200
Subject: [gdal-dev] VRT pixel functions on tiled vrt
In-Reply-To: <8584DD96-4D1D-4F96-999D-625B44F2621D@kyngchaos.com>
References: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
 <839E48AA-92F1-43DA-864B-B197D90EE98F@kyngchaos.com>
 <8584DD96-4D1D-4F96-999D-625B44F2621D@kyngchaos.com>
Message-ID: <3253615.UxLscYj52j@even-i700>

On vendredi 27 avril 2018 12:42:16 CEST William Kyngesburye wrote:
> OK, it worked as vrt of a vrt.  Memory not an issue.
> 
> But I have a new problem.  One vrt I want to instead do > -29 (caspian sea,
> -29 in SRTM data).  The whole region evaluates to 1 (true).  It looks like
> the in_ar[] is getting truncated to an unsigned byte, 0-255, from its
> orignal Int16.  

Check the various data types mentionned in the VRT. Perhaps there's one set to 
Byte.
It would also probably be safer to define
<SourceTransferType>GDT_Int16</SourceTransferType>
at the same level than the <PixelFunction...> elements

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180427/888a08ec/attachment.html>

From woklist at kyngchaos.com  Fri Apr 27 13:07:05 2018
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Fri, 27 Apr 2018 15:07:05 -0500
Subject: [gdal-dev] VRT pixel functions on tiled vrt
In-Reply-To: <3253615.UxLscYj52j@even-i700>
References: <45BD996B-5F3D-42EB-BF61-5BFABFC62EBA@kyngchaos.com>
 <839E48AA-92F1-43DA-864B-B197D90EE98F@kyngchaos.com>
 <8584DD96-4D1D-4F96-999D-625B44F2621D@kyngchaos.com>
 <3253615.UxLscYj52j@even-i700>
Message-ID: <13B3FE7C-9FAD-4D73-827D-125EB18A2770@kyngchaos.com>

I missed the SourceTransferType parameter, that worked if I used a simple Int16.

thanks

> On Apr 27, 2018, at 2:32 PM, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> On vendredi 27 avril 2018 12:42:16 CEST William Kyngesburye wrote:
> > OK, it worked as vrt of a vrt.  Memory not an issue.
> > 
> > But I have a new problem.  One vrt I want to instead do > -29 (caspian sea,
> > -29 in SRTM data).  The whole region evaluates to 1 (true).  It looks like
> > the in_ar[] is getting truncated to an unsigned byte, 0-255, from its
> > orignal Int16.  
>  
> Check the various data types mentionned in the VRT. Perhaps there's one set to Byte.
> It would also probably be safer to define
> <SourceTransferType>GDT_Int16</SourceTransferType>
> at the same level than the <PixelFunction...> elements
>  
> -- 
> Spatialys - Geospatial professional services
> http://www.spatialys.com
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy



From landa.martin at gmail.com  Sat Apr 28 04:02:06 2018
From: landa.martin at gmail.com (Martin Landa)
Date: Sat, 28 Apr 2018 13:02:06 +0200
Subject: [gdal-dev] gdal2.3 configuration fails
Message-ID: <CA+Ei1OeEXucVfzEOad3=fyCAXvTuUzDvqOavE-pbaofLskFhcQ@mail.gmail.com>

Hi,

configuration is failing in release/2.3 branch on my computer with

$ CFLAGS="-Wall -g" CXXFLAGS="-Wall -g" ./configure

checking whether byte ordering is bigendian... no
checking for 64bit integer type... configure: error: long long not found

The same command works in master.

./autogen.sh didn't help. Any idea? Thanks, Martin

-- 
Martin Landa
http://geo.fsv.cvut.cz/gwiki/Landa
http://gismentors.cz/mentors/landa

From gilpeleg at live.com  Sat Apr 28 10:52:38 2018
From: gilpeleg at live.com (Gil)
Date: Sat, 28 Apr 2018 17:52:38 +0000
Subject: [gdal-dev] Fwd: Converting Tiff to GeoPackage with Zoom Levels
In-Reply-To: <CAKQnq3zA-RvUMgb7GCOzO-9e5zZQ9N7ET3CwMd0GHxCj8b0C4Q@mail.gmail.com>
References: <CAKQnq3zA-RvUMgb7GCOzO-9e5zZQ9N7ET3CwMd0GHxCj8b0C4Q@mail.gmail.com>
Message-ID: <AM0PR0402MB3489B3EE7A0226F66F6DCCAABA8C0@AM0PR0402MB3489.eurprd04.prod.outlook.com>


Hello,

I have a tiff file which I am converting to GPKG (with jpeg) using gdal_translate and then build pyramids using gdal_addo, I'd like to get to a zoom level with only 1 tile (a recommendation from my displaying client - it's important).
However no matter how many levels I specify in gdal_Addo I don't get the level with 512.
My tiff file is 19968x29952 which I understand when calculated to the 512 level goes un-even, is there anything I can do to go that extra level?

The gpkg I get after gdal_translate comes with level 17, but after using gdal_addo I start from level 18, why can it be?
Conversion is done like this:

gdal_translate.exe -co TILE_FORMAT=JPEG -co TILING_SCHEME=InspireCRS84Quad -co ZOOM_LEVEL_STRATEGY=LOWER -of GPKG C:\myfile.tif C:\myfile.gpkg
gdaladdo -oo TILE_FORMAT=JPEG C:\myfile.gpkg 2 4 8 16 32 64 128 256 512

Thanks!
Gil

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180428/28cba8e6/attachment.html>

From even.rouault at spatialys.com  Sat Apr 28 10:59:54 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 28 Apr 2018 19:59:54 +0200
Subject: [gdal-dev] Fwd: Converting Tiff to GeoPackage with Zoom Levels
In-Reply-To: <AM0PR0402MB3489B3EE7A0226F66F6DCCAABA8C0@AM0PR0402MB3489.eurprd04.prod.outlook.com>
References: <CAKQnq3zA-RvUMgb7GCOzO-9e5zZQ9N7ET3CwMd0GHxCj8b0C4Q@mail.gmail.com>
 <AM0PR0402MB3489B3EE7A0226F66F6DCCAABA8C0@AM0PR0402MB3489.eurprd04.prod.outlook.com>
Message-ID: <31151006.aKhVcE2Dl5@even-i700>

Please paste the output of gdalinfo C:\myfile.tif

Which gdal version do you use ? What you report sounds a bit like
https://trac.osgeo.org/gdal/ticket/6932

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180428/4e543bf9/attachment.html>

From gilpeleg at live.com  Sat Apr 28 22:09:52 2018
From: gilpeleg at live.com (Gil)
Date: Sun, 29 Apr 2018 05:09:52 +0000
Subject: [gdal-dev] Fwd: Converting Tiff to GeoPackage with Zoom Levels
In-Reply-To: <31151006.aKhVcE2Dl5@even-i700>
References: <CAKQnq3zA-RvUMgb7GCOzO-9e5zZQ9N7ET3CwMd0GHxCj8b0C4Q@mail.gmail.com>
 <AM0PR0402MB3489B3EE7A0226F66F6DCCAABA8C0@AM0PR0402MB3489.eurprd04.prod.outlook.com>
 <31151006.aKhVcE2Dl5@even-i700>
Message-ID: <AM0PR0402MB34899F05C2456B838F7D32D0BA830@AM0PR0402MB3489.eurprd04.prod.outlook.com>

Hey Even,

I tried using gdal2.0.2 (deployed with QGIS 3.0) and got this result.
The original Tiff is converted to level 17 of GPKG, and then after the gdaladdo I have level 18 through 10, where 10 has 2 tiles.

This is the output of gdalinfo:
Driver: GTiff/GeoTIFF
Files: C:\myfile.tif
Size is 19968, 29952
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (***, ***)
Pixel Size = (0.000004444518203,-0.000004444518203)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
*** Coordinates data removed ***
Band 1 Block=19968x1 Type=Byte, ColorInterp=Red
Band 2 Block=19968x1 Type=Byte, ColorInterp=Green
Band 3 Block=19968x1 Type=Byte, ColorInterp=Blue

Thanks!
Gil

On 28 April 2018 at 20:59, Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> wrote:

Please paste the output of gdalinfo C:\myfile.tif



Which gdal version do you use ? What you report sounds a bit like

https://trac.osgeo.org/gdal/ticket/6932



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180429/3e161bec/attachment.html>

From gilpeleg at live.com  Sat Apr 28 22:09:53 2018
From: gilpeleg at live.com (Gil)
Date: Sun, 29 Apr 2018 05:09:53 +0000
Subject: [gdal-dev] Fwd: Converting Tiff to GeoPackage with Zoom Levels
In-Reply-To: <31151006.aKhVcE2Dl5@even-i700>
References: <CAKQnq3zA-RvUMgb7GCOzO-9e5zZQ9N7ET3CwMd0GHxCj8b0C4Q@mail.gmail.com>
 <AM0PR0402MB3489B3EE7A0226F66F6DCCAABA8C0@AM0PR0402MB3489.eurprd04.prod.outlook.com>
 <31151006.aKhVcE2Dl5@even-i700>
Message-ID: <AM0PR0402MB3489C0B0EE550C787FAA8A24BA830@AM0PR0402MB3489.eurprd04.prod.outlook.com>

Hey Even,

I tried using gdal2.0.2 (deployed with QGIS 3.0) and got this result.
The original Tiff is converted to level 17 of GPKG, and then after the gdaladdo I have level 18 through 10, where 10 has 2 tiles.

This is the output of gdalinfo:
Driver: GTiff/GeoTIFF
Files: C:\myfile.tif
Size is 19968, 29952
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (***, ***)
Pixel Size = (0.000004444518203,-0.000004444518203)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
*** Coordinates data removed ***
Band 1 Block=19968x1 Type=Byte, ColorInterp=Red
Band 2 Block=19968x1 Type=Byte, ColorInterp=Green
Band 3 Block=19968x1 Type=Byte, ColorInterp=Blue

Thanks!
Gil

On 28 April 2018 at 20:59, Even Rouault <even.rouault at spatialys.com<mailto:even.rouault at spatialys.com>> wrote:

Please paste the output of gdalinfo C:\myfile.tif



Which gdal version do you use ? What you report sounds a bit like

https://trac.osgeo.org/gdal/ticket/6932



Even



--

Spatialys - Geospatial professional services

http://www.spatialys.com

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180429/5bed1c61/attachment.html>

From even.rouault at spatialys.com  Sun Apr 29 02:45:44 2018
From: even.rouault at spatialys.com (Even Rouault)
Date: Sun, 29 Apr 2018 11:45:44 +0200
Subject: [gdal-dev] Fwd: Converting Tiff to GeoPackage with Zoom Levels
In-Reply-To: <AM0PR0402MB34899F05C2456B838F7D32D0BA830@AM0PR0402MB3489.eurprd04.prod.outlook.com>
References: <CAKQnq3zA-RvUMgb7GCOzO-9e5zZQ9N7ET3CwMd0GHxCj8b0C4Q@mail.gmail.com>
 <31151006.aKhVcE2Dl5@even-i700>
 <AM0PR0402MB34899F05C2456B838F7D32D0BA830@AM0PR0402MB3489.eurprd04.prod.outlook.com>
Message-ID: <4074894.JxBB1hsGIV@even-i700>

On dimanche 29 avril 2018 05:09:52 CEST Gil wrote:
> Hey Even,
> 
> I tried using gdal2.0.2 (deployed with QGIS 3.0) 

This is the dll name. gdal202 = gdal 2.[0]2. It is actually GDAL 2.2.4

> and got this result.
> The original Tiff is converted to level 17 of GPKG,

OK I reproduced. I've pushed a fix for the upcoming GDAL 2.3.0

Even

-- 
Spatialys - Geospatial professional services
http://www.spatialys.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20180429/c3c19784/attachment-0001.html>

From adam.jamison at portbris.com.au  Mon Apr 30 22:53:16 2018
From: adam.jamison at portbris.com.au (Jamo)
Date: Mon, 30 Apr 2018 22:53:16 -0700 (MST)
Subject: [gdal-dev] LIBKML C#
Message-ID: <1525153996873-0.post@n6.nabble.com>

Hey Team,

I'm starting to delve into FDO, OGR and GDAL for exporting to some
pre-defined formats (SDF, GML, KML, GeoJson etc etc)

I'm trying to interpret the OGR / GDAL driver documentation for the LIBKML
driver it mentions setting the environment variable for LIBKML_USE_DOC.KML
.... is this an option on the createdatasource?

string[] options = new string[] { "LIBKML_USE_DOC.KML=no"};
OSGeo.OGR.DataSource ds = drv.CreateDataSource(someKMZ, options);

It isn't having the desired outcome.... the KMZ file still contains network
link files to subset kml files within the kmz .....

I'm guessing once I understand these options / environment variables the
others will just follow suite.

Cheers
Jamo



-----
MapGuide Maestro 6.0.0.8587
MapGuide Opensource 3.0.0.8701
Fusion, PHP, Apache
Windows 7 Pro SP1

--
Sent from: http://osgeo-org.1560.x6.nabble.com/GDAL-Dev-f3742093.html

