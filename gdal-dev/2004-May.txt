From alexamici at fastwebnet.it  Mon May  3 04:19:49 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Experiences compiling gdal-1.2.0 w/ JP2KAK Support
In-Reply-To: <4092A93D.5050406@GRI.MsState.Edu>
References: <4092A93D.5050406@GRI.MsState.Edu>
Message-ID: <200405031019.49129.alexamici@fastwebnet.it>

Valentine, Frank,

On Friday 30 April 2004 21:30, Valentine Anantharaj wrote:
> The make process quit while trying to link 'libgdal.so'.  Then I had to
> hack the GDALmake.opt to explicitly specify a path to the location of
> '-lkdu'.  But when I did this, libtool started re-making some of the
> sources on ogr/ and quit complaining about unresolved references to JP2K
> functions in 'libgdal.so'.  So, I reconfigure by including
> '--without-libtool'.  Now, it compiled file (I still had to re-hack
> GDALMake.opt though).

the kakadu driver is not supported by the normal (libtool) build (i lack a 
testing environment), Frank this should probably be documented somewhere.

cheers,
alessandro

From henning-r at web.de  Mon May  3 16:15:29 2004
From: henning-r at web.de (Henning Ries)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] no makefile after configure
Message-ID: <654580639@web.de>

Hello,

I tried to compile the latest source release (gdal-1.2.0b)  on solaris, 
but there is no makefile after running configure:

GDAL is now configured for sparc-sun-solaris2.9

  Installation directory:    /usr/local
  C compiler:                gcc -O2  
  C++ compiler:              g++ -O2  

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             external
  CFITSIO support:           no
  NETCDF support:            no
  LIBPNG support:            internal
  LIBTIFF support:           internal
  LIBGEOTIFF support:        internal
  LIBJPEG support:           internal
  LIBGIF support:            internal
  OGDI support:              no
  HDF4 support:              no
  JASPER support:            no
  ECW support:               no
  MrSID support:             no
  POSTGRESQL support:        no
  XERCES support:            no
  ODBC support:              no
  OCI support:               no

  Statically link PROJ.4:    no

  enable OGR building:       yes

paris[hries] $ make
make: Fatal error: No arguments to build
Where is the problem?

Henning

____________________________________________________________________
Der WEB.DE Virenschutz schuetzt Ihr Postfach vor dem Wurm Sober.A-F!
Kostenfrei fuer FreeMail Nutzer. http://f.web.de/?mc=021158


From warmerdam at pobox.com  Mon May  3 16:24:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] no makefile after configure
In-Reply-To: <654580639@web.de>
References: <654580639@web.de>
Message-ID: <4096AA83.9030507@pobox.com>

Henning Ries wrote:
> Hello,
> 
> I tried to compile the latest source release (gdal-1.2.0b)  on solaris, 
> but there is no makefile after running configure:
...
> 
> paris[hries] $ make
> make: Fatal error: No arguments to build
> Where is the problem?

Henning,

GDAL requires use of GNUmake, not just regular make.  The makefile is called
GNUmakefile.  Many suns seem to have GNUmake under the name "gmake" or
"gnumake". If not, you will need to install it from source.

PS. there is a gdal-1.2.0 final release available that is newer and better
than gdal-1.2.0b (which was a 1.2.0 beta).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From davidlugan at hotmail.com  Mon May  3 18:53:49 2004
From: davidlugan at hotmail.com (David Lugan)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] A build solution for VC7, gdal_vc7.zip, URL?
Message-ID: <Sea2-F22HREZAFEFOWS0000dd74@hotmail.com>

Hello GDAL-Dev,

Does anyone have a URL to the latest (or any version) of gdal_vc7.zip ?  If 
not, can someone email it to me please.

This file was sent to the Gdal-dev list on March 8, 2004 by Roger James.

I have been having some fundamental problems (gdalwarp works randomly during 
development + MrSID causes exception on open()) since I started using MS 
Visual Studio .NET 2003.

Maybe compiling GDAL as a visual studio project (i.e. gdal_vc7.zip ) would 
help me find out what is going on.


- David Lugan

_________________________________________________________________
Express yourself with the new version of MSN Messenger! Download today - 
it's FREE! http://messenger.msn.com/go/onm00200471ave/direct/01/


From starged at videotron.ca  Mon May  3 21:57:22 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] A fusion tool
Message-ID: <scsd90d8t30kljsiea3ucavkca734vsv59@4ax.com>

Hi,

I would like to share a tool for OpenEV that does fusions of RGB and panchromatic images. It still
needs some improvements but I am stuck... the results vary from scene to scene and I don't know why
yet. Maybe someone will see what I missed. I am still new at Python programming so it may not be the
neatiest code you've seen...

The tool does normal fusions as well as "color corrected" fusions (which is the part that is not
quite working yet). This is intended for "true-color" fusion using Landsat ETM+ bands 3-2-1 as the
RGB and band 8 as the panchromatic, something quite difficult to achieve. I have put 3 images of
somewhat good true-color fusions here:
http://pages.infinit.net/starged/landsat/fusion/

The tool is here:
http://pages.infinit.net/starged/openev/fusion.py

Any suggestions to improve it are welcome and in fact greatly encouraged :)

Thank you for your attention
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From starged at videotron.ca  Mon May  3 22:08:02 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Fusion tool examples
Message-ID: <dhud909n2rs7pjnm81eq7tdp92canrsqos@4ax.com>

Sorry folks, I realized afterwards that my ISP doesn't allow directory access...

So here are the urls:

http://pages.infinit.net/starged/landsat/fusion/KualaLumpur.jpg
http://pages.infinit.net/starged/landsat/fusion/SanFrancisco.jpg
http://pages.infinit.net/starged/landsat/fusion/Washington.jpg

Sorry for the inconvenience...
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From MChapman at sanz.com  Mon May  3 22:51:31 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] A build solution for VC7, gdal_vc7.zip, URL?
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AF0@mailman.san.com>

David,
 
Is there a specific reason you need to compile from a VC7 solution (if I understand correctly)?  You can download the source and make files for windows (gdal119.zip or gdal120.zip) from ftp://ftp.remotesensing.org/gdal/ .  Then you can compile the library from the command line using the VC7 compiler following the easy to use instructions at http://www.remotesensing.org/gdal/gdal_building.html  see - windows.   Once the lib files are built in C:\gdal\bin\lib (or wherever you put gdal) you can link to the C:\gdal\bin\lib\gdal_i.lib file from your VC& solution.  Then just include "gdal_priv.h" and you should be good to go.  Let me know if this doesn't work for you.
 
Martin

	-----Original Message----- 
	From: David Lugan [mailto:davidlugan@hotmail.com] 
	Sent: Mon 5/3/2004 4:53 PM 
	To: gdal-dev@remotesensing.org 
	Cc: 
	Subject: [Gdal-dev] A build solution for VC7, gdal_vc7.zip, URL?
	
	

	Hello GDAL-Dev,
	
	Does anyone have a URL to the latest (or any version) of gdal_vc7.zip ?  If
	not, can someone email it to me please.
	
	This file was sent to the Gdal-dev list on March 8, 2004 by Roger James.
	
	I have been having some fundamental problems (gdalwarp works randomly during
	development + MrSID causes exception on open()) since I started using MS
	Visual Studio .NET 2003.
	
	Maybe compiling GDAL as a visual studio project (i.e. gdal_vc7.zip ) would
	help me find out what is going on.
	
	
	- David Lugan
	
	_________________________________________________________________
	Express yourself with the new version of MSN Messenger! Download today -
	it's FREE! http://messenger.msn.com/go/onm00200471ave/direct/01/
	
	_______________________________________________
	Gdal-dev mailing list
	Gdal-dev@remotesensing.org
	http://remotesensing.org/mailman/listinfo/gdal-dev
	


From ben at vterrain.org  Mon May  3 23:45:47 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] A build solution for VC7, gdal_vc7.zip, URL?
In-Reply-To: <Sea2-F22HREZAFEFOWS0000dd74@hotmail.com>
Message-ID: <022201c4318a$49785fd0$f400fe0a@TOPP2>

David,

I have zipped a copy of the files i am using to:
 http://vterrain.org/dist/gdal_vc7.zip

Note that this version has support for libjpeg enabled (the previous version
didn't.)

-Ben

> -----Original Message-----
> From: David Lugan
> Sent: Monday, May 03, 2004 6:54 PM
> 
> Does anyone have a URL to the latest (or any version) of 
> gdal_vc7.zip ?  If not, can someone email it to me please.


From MChapman at sanz.com  Tue May  4 17:18:06 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] MrSID and GDAL daily build
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95C2@mailman.san.com>

All,
 
I downloaded the latest GDAL build from the ftp site (.zip), and when I
add support for the MrSID driver in nmake.opt (VC++ 7) I get the
following compiler error:
 
C:\gdal\frmts>cd mrsid   && nmake /NOLOGO /f makefile.vc   && cd ..
        cl /nologo /Ox /MD /EHsc -I..\..\port -I..\..\ogr -I..\..\gcore
c:\Software\MrSID\include -I..\gtiff\libgeotiff -DMRSID_DSDK_VERSION_32
/c mrsiddataset.cpp
cl : Command line warning D4029 : optimization is not available in the
standard edition compiler
cl : Command line warning D4024 : unrecognized source file type
'c:\Software\MrSID\include', object file assumed
cl : Command line warning D4027 : source file
'c:\Software\MrSID\include' ignored
mrsiddataset.cpp
mrsiddataset.cpp(392) : fatal error C1083: Cannot open include file:
'lt_fileUtils.h': No such file or directory
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'for' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
.NET 2003\VC7\BIN\nmake.exe"' : return code '0x2'
Stop.
 
 
The include path c:\Software\MrSID\include is a valid path to the MrSID
3.2.1 driver.  Can anyone help me out on what might be wrong?  It kind
of looks like it didn't like 'c:\Software\MrSID\include'.
 
Thanks,
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040504/0a5bee7e/attachment.html
From dron at ak4719.spb.edu  Wed May  5 01:48:59 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] MrSID and GDAL daily build
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB95C2@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465FB95C2@mailman.san.com>
Message-ID: <20040505054859.GA3021@ak4719.spb.edu>

On Tue, May 04, 2004 at 03:18:06PM -0600, Chapman, Martin wrote:
> I downloaded the latest GDAL build from the ftp site (.zip), and when
> I add support for the MrSID driver in nmake.opt (VC++ 7) I get the
> following compiler error:
>  
> C:\gdal\frmts>cd mrsid   && nmake /NOLOGO /f makefile.vc   && cd ..
>         cl /nologo /Ox /MD /EHsc -I..\..\port -I..\..\ogr -I..\..\gcore
> c:\Software\MrSID\include -I..\gtiff\libgeotiff -DMRSID_DSDK_VERSION_32
> /c mrsiddataset.cpp
> cl : Command line warning D4029 : optimization is not available in the
> standard edition compiler
> cl : Command line warning D4024 : unrecognized source file type
> 'c:\Software\MrSID\include', object file assumed
> cl : Command line warning D4027 : source file
> 'c:\Software\MrSID\include' ignored

MRSID_INCLUDE should contain -I$(MRSID_DIR)\include, not just the
$(MRSID_DIR)\include. -I switch was lost in the nmake.opt. Now fixed.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From daniel112 at home.se  Wed May  5 02:48:59 2004
From: daniel112 at home.se (Daniel)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] MrSID and GDAL daily build
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB95C2@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465FB95C2@mailman.san.com>
Message-ID: <40988E5B.8000702@home.se>

Hi!

Looks like you are missing a -I before c:\Software\MrSID\include in the 
call to cl

Regards,
    Daniel

Chapman, Martin wrote:

> All,
>  
> I downloaded the latest GDAL build from the ftp site (.zip), and when 
> I add support for the MrSID driver in nmake.opt (VC++ 7) I get the 
> following compiler error:
>  
> C:\gdal\frmts>cd mrsid   && nmake /NOLOGO /f makefile.vc   && cd ..
>         cl /nologo /Ox /MD /EHsc -I..\..\port -I..\..\ogr 
> -I..\..\gcore c:\Software\MrSID\include -I..\gtiff\libgeotiff 
> -DMRSID_DSDK_VERSION_32 /c mrsiddataset.cpp
> cl : Command line warning D4029 : optimization is not available in the 
> standard edition compiler
> cl : Command line warning D4024 : unrecognized source file type 
> 'c:\Software\MrSID\include', object file assumed
> cl : Command line warning D4027 : source file 
> 'c:\Software\MrSID\include' ignored
> mrsiddataset.cpp
> mrsiddataset.cpp(392) : fatal error C1083: Cannot open include file: 
> 'lt_fileUtils.h': No such file or directory
> NMAKE : fatal error U1077: 'cl' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: 'for' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
> .NET 2003\VC7\BIN\nmake.exe"' : return code '0x2'
> Stop.
>  
>  
> The include path c:\Software\MrSID\include is a valid path to the 
> MrSID 3.2.1 driver.  Can anyone help me out on what might be wrong?  
> It kind of looks like it didn't like 'c:\Software\MrSID\include'.
>  
> Thanks,
>  
> Martin Chapman
> Cell 303-885-1936
> Office 303-660-3933 x226
> mchapman@sanz.com <mailto:mchapman@sanz.com>
> http://www.sanz.com <http://www.sanz.com/>
>  
>  



From jody at ifi.unizh.ch  Wed May  5 05:15:36 2004
From: jody at ifi.unizh.ch (jody@ifi.unizh.ch)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Info on OGRDataSource::ExecuteSQL
Message-ID: <3260.213.144.131.83.1083748536.squirrel@bela.ifi.unizh.ch>

Hi
Could anybody give me some pointers on the workings of
OGRDataSource::ExecuteSQL

Is there a need for a SQL-DataBase containing the OGR info,
or is this done "internally"?

Thanx
  jody

From MChapman at sanz.com  Wed May  5 10:52:54 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] MrSID and GDAL daily build
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95C5@mailman.san.com>

Andrey,

Thank you very much.

Martin

-----Original Message-----
From: Andrey Kiselev [mailto:dron@ak4719.spb.edu] 
Sent: Tuesday, May 04, 2004 11:49 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] MrSID and GDAL daily build


On Tue, May 04, 2004 at 03:18:06PM -0600, Chapman, Martin wrote:
> I downloaded the latest GDAL build from the ftp site (.zip), and when 
> I add support for the MrSID driver in nmake.opt (VC++ 7) I get the 
> following compiler error:
>  
> C:\gdal\frmts>cd mrsid   && nmake /NOLOGO /f makefile.vc   && cd ..
>         cl /nologo /Ox /MD /EHsc -I..\..\port -I..\..\ogr 
> -I..\..\gcore c:\Software\MrSID\include -I..\gtiff\libgeotiff 
> -DMRSID_DSDK_VERSION_32 /c mrsiddataset.cpp cl : Command line warning 
> D4029 : optimization is not available in the standard edition compiler
> cl : Command line warning D4024 : unrecognized source file type
> 'c:\Software\MrSID\include', object file assumed
> cl : Command line warning D4027 : source file
> 'c:\Software\MrSID\include' ignored

MRSID_INCLUDE should contain -I$(MRSID_DIR)\include, not just the
$(MRSID_DIR)\include. -I switch was lost in the nmake.opt. Now fixed.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Wed May  5 10:53:27 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] MrSID and GDAL daily build
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95C6@mailman.san.com>

Thanks Daniel.

Martin

-----Original Message-----
From: Daniel [mailto:daniel112@home.se] 
Sent: Wednesday, May 05, 2004 12:49 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] MrSID and GDAL daily build


Hi!

Looks like you are missing a -I before c:\Software\MrSID\include in the 
call to cl

Regards,
    Daniel

Chapman, Martin wrote:

> All,
>  
> I downloaded the latest GDAL build from the ftp site (.zip), and when
> I add support for the MrSID driver in nmake.opt (VC++ 7) I get the 
> following compiler error:
>  
> C:\gdal\frmts>cd mrsid   && nmake /NOLOGO /f makefile.vc   && cd ..
>         cl /nologo /Ox /MD /EHsc -I..\..\port -I..\..\ogr
> -I..\..\gcore c:\Software\MrSID\include -I..\gtiff\libgeotiff 
> -DMRSID_DSDK_VERSION_32 /c mrsiddataset.cpp
> cl : Command line warning D4029 : optimization is not available in the

> standard edition compiler
> cl : Command line warning D4024 : unrecognized source file type 
> 'c:\Software\MrSID\include', object file assumed
> cl : Command line warning D4027 : source file 
> 'c:\Software\MrSID\include' ignored
> mrsiddataset.cpp
> mrsiddataset.cpp(392) : fatal error C1083: Cannot open include file: 
> 'lt_fileUtils.h': No such file or directory
> NMAKE : fatal error U1077: 'cl' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: 'for' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
> .NET 2003\VC7\BIN\nmake.exe"' : return code '0x2'
> Stop.
>  
>  
> The include path c:\Software\MrSID\include is a valid path to the
> MrSID 3.2.1 driver.  Can anyone help me out on what might be wrong?  
> It kind of looks like it didn't like 'c:\Software\MrSID\include'.
>  
> Thanks,
>  
> Martin Chapman
> Cell 303-885-1936
> Office 303-660-3933 x226
> mchapman@sanz.com <mailto:mchapman@sanz.com> http://www.sanz.com 
> <http://www.sanz.com/>
>  
>  


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From support at geoimage.fr  Wed May  5 11:45:29 2004
From: support at geoimage.fr (=?iso-8859-1?Q?Fr=E9d=E9ric_Trastour?=)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] OpenEV_FW 1.7.2 Released
References: <408ED450.9010101@pobox.com>
Message-ID: <0cdd01c432b7$fe3fbb10$e32346c0@pili>

Hello,

> Folks,
>
> I have prepared a new release of my OpenEV_FW binary builds for Linux and
> Win32 systems.  This tracks the latest source for OpenEV, GDAL and MapServer
> but is otherwise essentially unchanged since 1.7.1.
>
> o The MapServer build on Windows is now done using a libmap.dll, and includes
>    all the MapServer utilities.
> o The MapServer build on Linux now includes Python MapScript.
> o The GDAL build includes CDED 1:50K export capability.
>

did you plan to provide "Python MapScript" in MapServer on Windows in a future
release ?

Regards,

Frederic.

_________________________________________________________________
Fr?d?ric Trastour - SpacEyes - dev@spaceyes.fr




From jody at ifi.unizh.ch  Wed May  5 12:37:26 2004
From: jody at ifi.unizh.ch (jody@ifi.unizh.ch)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Another Question about OGRDataSource::ExecuteSQL
Message-ID: <3761.213.144.131.83.1083775046.squirrel@bela.ifi.unizh.ch>

Hi

I assume that the SQL statement passed to ExecuteSQL
refers to the attributes of the features in the Datasource.

If the DataSource contains only one layer,
everything seems to  be well-defined, because
all features within a layer must have the same sorts of attributes.

But what happens if the datasource contains more than one layer
(which it can, corresponding to the explanation in ogr_arch.html)
which have different attribute schemas?

Or does an additional restriction apply to features in a
"multilayered" Datasource?

Thanks
  Jody

From bclay at ball.com  Wed May  5 14:44:51 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Parse DEM file problem
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C908@APPMSG2.AERO.BALL.COM>

I am working on a basic terrain elevation server.  During startup I read
the header of all of the DEM files in the specified directory but do not
read the actual data.  The GDALDataset pointer returned by GDALOpen is
saved in an STL vector along with the header information.

I am using the GTOPO30 data set.

When I use the data set pointer later to read file from E20N40.DEM
GDALComputeRasterMinMax returns min = -405 max = 4099 which should be
min = -407 max = 4525.

When I use the data set pointer later to read file from E20N90.DEM I get
min = -32768 and max = 32521 which should be min = -137 max = 5483.

Walking through the data seems to give the same min and max values (at
least for what I have done so far).

I see plenty of -9999 which the documentation says is the "no data"
marker so it doesn't seem like it is a byte swap issue.

The questions are:
  Does GDAL maintain any state information that I might be overwriting
by reading other headers before reading the data?

  Does anyone have any experience with this data set to know if what to
expect from GDAL when it reads the data?

The code I am using comes right out of the test programs / examples and
is as follows:

	pBand = pDataSet->GetRasterBand( 1 );

	if ((pBand != NULL) && (pHeaderInfo != NULL))
		{
		pBand->GetBlockSize( &nBlockXSize, &nBlockYSize );
		if (mVerbose == TRUE)
			{
			sprintf(msgBuf, "Block=%dx%d Type=%s,
ColorInterp=%s\n",
					nBlockXSize, nBlockYSize,
	
GDALGetDataTypeName(pBand->GetRasterDataType()),
					GDALGetColorInterpretationName(
	
pBand->GetColorInterpretation()) );
			}

		adfMinMax[0] = pBand->GetMinimum( &bGotMin );
		adfMinMax[1] = pBand->GetMaximum( &bGotMax );

		if( ! (bGotMin && bGotMax) )
			{
			GDALComputeRasterMinMax((GDALRasterBandH)pBand,
TRUE, adfMinMax);
			}

Where pDataSet is the stored pointer returned by GDALOpen.


As always any thoughts or suggestions would be greatly appreciated.

Bruce Clay
bclay@ball.com 

From MChapman at sanz.com  Wed May  5 15:21:57 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Parse DEM file problem
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AF1@mailman.san.com>

Bruce,

I use GDAL for elevation files and have not seen the problems you are
experiencing.  I save a pointer to the dataset when I initialize my
class and call it's methods later in different methods with no problem.
However, when I use the dataset to read info from the file I always copy
the info to my own structures before I operate on the data.  My code is
listed below:

In OnOpenDocument:

BOOL CImagePortDoc::OnOpenDocument(LPCTSTR lpszPathName)
{
	try
	{
		if (!CDocument::OnOpenDocument(lpszPathName))
			return FALSE;

		m_sFileName = lpszPathName;

		if (m_sFileName.size() == 0)
			return false;

		bool bUseOverView = false;
		string ovr_file;
		string ovr_name;
		string file = m_sFileName;
		
		char *pdest = strstr( file.c_str(), ".ovr" );
		if (pdest != NULL)
			bUseOverView = true;

		string::size_type pos = file.find('.');
		if (pos == string::npos)
		{
			ovr_file = file + ".ovr";
			ovr_name = file;
		}
		else
		{
			ovr_file.insert(0, file.begin(), &file[pos]);
			ovr_name = ovr_file;
			ovr_file += ".ovr";
		}

		GDALAllRegister();

		if (!bUseOverView)
		{
			CMainFrame* pMainFrame = (CMainFrame*)
AfxGetMainWnd();
			if (pMainFrame->FileExists(ovr_file))
			{
				CString sMessage = _T("Viewport has
detected an associated\noverview file for ");
				sMessage += m_sFileName.c_str();
				sMessage += _T(" .\nDo you want to use
the overviews?");
				if (AfxMessageBox(sMessage,
MB_YESNO|MB_ICONQUESTION) == IDYES)
				{
					bUseOverView = true;
				}
			}
		}

		m_pDataset = (GDALDataset*)
GDALOpen(m_sFileName.c_str(), GA_ReadOnly);
		if( m_pDataset == NULL )
		{
			const char* pszError = CPLGetLastErrorMsg();
			AfxMessageBox(pszError);
			return false;
		}
		
		m_pGDALDefaultOverviews = new GDALDefaultOverviews();
		int nOverviewCount = 0;

		if (bUseOverView)
		{
			if (!m_pGDALDefaultOverviews->IsInitialized())
	
m_pGDALDefaultOverviews->Initialize(m_pDataset, ovr_file.c_str(), 1);

			nOverviewCount =
m_pGDALDefaultOverviews->GetOverviewCount(1);
		}

		for (int k = 0; k < nOverviewCount; k++)
			m_vResLevels.push_back(k);

		int nNumberOfBands = m_pDataset->GetRasterCount();
		for (int j = 0; j < nNumberOfBands; j++)
			m_vBandList.push_back(j);

		CString sFileExtension;
		CString sFileName = m_sFileName.c_str();

		int n = 0;
		int nPos = sFileName.ReverseFind('.');
		if (nPos != 1)
		{
			n = sFileName.GetLength() - nPos;
			sFileExtension = sFileName.Right(n - 1);
		}
		else
		{
			AfxMessageBox(_T("Could not determine file
extension.\nPlease make sure the file has a valid extension."));
			return NULL;
		}

		sFileExtension.MakeLower();

		m_nFileType = GetFileType((string) sFileExtension);
		m_DataType =
m_pDataset->GetRasterBand(1)->GetRasterDataType();

		return TRUE;
	}
	catch(...)
	{
		//throw CString("An unspecified error occurred");
	}
}

In another method I get the bytes for each band and then bit interleave
them.
NOTE that m_nFileType == 3 is elevation data:

CDIBSection* CImagePortDoc::GetAreaOfInterest(CRect rect, int nResLevel)
{
	try
	{
		int nBandCount = m_vBandList.size();
		int nWidth = rect.Width();
		int nHeight = rect.Height();
		int nXOffset = rect.left;
		int nYOffset = rect.top;
		void * ptr_dest = NULL;
		void * ptr_src = NULL;
		int xsize = 0;
		int ysize = 0;
		m_nResLevel = nResLevel;

		int nSize = nBandCount;
		void** pBandBuffer = NULL;

		if (m_nFileType == 2)
			pBandBuffer = (void**) new unsigned
char*[nSize];
		else
		{
			if (m_DataType == GDT_Int16 || m_DataType ==
GDT_Byte)
				pBandBuffer = (void**) new
short*[nSize];
			else
				pBandBuffer = (void**) new
float*[nSize];
		}

		GDALColorTable* pCT =
m_pDataset->GetRasterBand(1)->GetColorTable();
		GDALRasterBand* pBand = NULL;
		void* pBandBytes = NULL;

		for (int n = 0; n < nSize; n++)
		{
			if (nBandCount > 1)
			{
				if
(m_pGDALDefaultOverviews->GetOverviewCount(nSize) > 0 && m_nResLevel >
0)
					pBand =
m_pGDALDefaultOverviews->GetOverview(m_vBandList[n] + 1, m_nResLevel -
1);
				else
					pBand =
m_pDataset->GetRasterBand(m_vBandList[n] + 1);
			}
			else
			{
				if
(m_pGDALDefaultOverviews->GetOverviewCount(1) > 0 && m_nResLevel > 0)
					pBand =
m_pGDALDefaultOverviews->GetOverview(m_vBandList[0] + 1, m_nResLevel -
1);
				else
					pBand =
m_pDataset->GetRasterBand(1);
			}

			int nRasterX = pBand->GetXSize();
			int nRasterY = pBand->GetYSize();

			if (nWidth > nRasterX)
			{
				nXOffset = 0;
				nWidth = nRasterX;
			}

			if (nHeight > nRasterY) 
			{
				nYOffset = 0;
				nHeight = nRasterY;
			}

			if (m_nFileType == 2)
			{
				pBandBytes = (unsigned char*)
CPLMalloc(sizeof(unsigned char) * nWidth * nHeight);
				pBand->RasterIO(GF_Read, nXOffset,
nYOffset, nWidth, nHeight, pBandBytes, nWidth , nHeight, GDT_Byte, 0,
0);
			}
			else
			{
				if (m_DataType == GDT_Int16 ||
m_DataType == GDT_Byte)
				{
					pBandBytes = (short*)
CPLMalloc(sizeof(short) * nWidth * nHeight);
					pBand->RasterIO(GF_Read,
nXOffset, nYOffset, nWidth, nHeight, pBandBytes, nWidth , nHeight,
GDT_Int16, 0, 0);
				}
				else
				{
					pBandBytes = (float*)
CPLMalloc(sizeof(float) * nWidth * nHeight);
					pBand->RasterIO(GF_Read,
nXOffset, nYOffset, nWidth, nHeight, pBandBytes, nWidth , nHeight,
GDT_Float32, 0, 0);
				}
			}
				
			pBandBuffer[n] = pBandBytes;
		}

		unsigned char* pCombinedBytes = (unsigned char*)
CPLMalloc(sizeof(unsigned char) * nWidth * nHeight * nSize);

		for (long i = 0, long j = 0; i < (nWidth * nHeight *
nSize); i += nSize, j++)
		{
			int k = i;

			if (m_nFileType == 2)
			{
				for (int m = nSize - 1; m >= 0; m--,
k++)
				{
					unsigned char* pBytes =
(unsigned char*) pBandBuffer[m];
					ptr_dest = pCombinedBytes + k;
					unsigned char b = pBytes[j];

					if (pCT != NULL)
					{
						GDALColorEntry ce;
						unsigned int c =
(unsigned int) b;
						c =
pCT->GetColorEntryAsRGB(c, &ce);
						if (m == 0) c = ce.c1;
						if (m == 1) c = ce.c2;
						if (m == 2) c = ce.c3;
						b = (unsigned char) c;
					}

					ptr_src = &b;
					memcpy(ptr_dest, ptr_src, 1);
				}
			}
			else
			{
				if (m_DataType == GDT_Int16 ||
m_DataType == GDT_Byte)
				{
					for (int m = nSize - 1; m >= 0;
m--, k++)
					{
						short* pBytes = (short*)
pBandBuffer[m];
						ptr_dest =
pCombinedBytes + k;
						short nVal = pBytes[j];
						unsigned char uc = (nVal
& 0xffff) >> 4;
						ptr_src = &uc;
						memcpy(ptr_dest,
ptr_src, 1);
					}
				}
				else
				{
					for (int m = nSize - 1; m >= 0;
m--, k++)
					{
						float* pBytes = (float*)
pBandBuffer[m];
						ptr_dest =
pCombinedBytes + k;
						float nVal = pBytes[j];
						unsigned char uc =
(unsigned char) nVal >> 8;
						ptr_src = &uc;
						memcpy(ptr_dest,
ptr_src, 1);
					}
				}
			}
		}

		if ((nWidth > 0) && (nHeight > 0))
		{
			if (m_pDIBSection) delete m_pDIBSection;
			m_pDIBSection = new CDIBSection;

			if (m_pDIBSection)
			{
				m_pDIBSection->Create(nWidth ,nHeight,
24);
				unsigned int dibwidth =
m_pDIBSection->GetTotalWidth();

				GByte* dest = (GByte*)
m_pDIBSection->GetBits();
				GByte* src = (GByte*) pCombinedBytes;

				for (int row = 0; row < nHeight; row++)
				{
					ptr_dest = dest + row * dibwidth
* nSize;
					ptr_src = src + row * nWidth *
nSize;
					memcpy(ptr_dest, ptr_src, nWidth
* nSize);
				}
			}
		}

		if (pBandBuffer)
		{
			for (int d = 0; d < nSize; d++)
			{
				CPLFree(pBandBuffer[d]);
			}

			delete [] pBandBuffer;
		}

		if (pCombinedBytes)
			CPLFree(pCombinedBytes);

		CDIBSection* pDIBSection = m_pDIBSection;
		return pDIBSection;
	}
	catch(...)
	{
		AfxMessageBox("An unspecified error occurred");
	}
}

Maybe you can see something in the code above that will help you resolve
your problem.

Martin

-----Original Message-----
From: Clay, Bruce [mailto:bclay@ball.com] 
Sent: Wednesday, May 05, 2004 12:45 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Parse DEM file problem


I am working on a basic terrain elevation server.  During startup I read
the header of all of the DEM files in the specified directory but do not
read the actual data.  The GDALDataset pointer returned by GDALOpen is
saved in an STL vector along with the header information.

I am using the GTOPO30 data set.

When I use the data set pointer later to read file from E20N40.DEM
GDALComputeRasterMinMax returns min = -405 max = 4099 which should be
min = -407 max = 4525.

When I use the data set pointer later to read file from E20N90.DEM I get
min = -32768 and max = 32521 which should be min = -137 max = 5483.

Walking through the data seems to give the same min and max values (at
least for what I have done so far).

I see plenty of -9999 which the documentation says is the "no data"
marker so it doesn't seem like it is a byte swap issue.

The questions are:
  Does GDAL maintain any state information that I might be overwriting
by reading other headers before reading the data?

  Does anyone have any experience with this data set to know if what to
expect from GDAL when it reads the data?

The code I am using comes right out of the test programs / examples and
is as follows:

	pBand = pDataSet->GetRasterBand( 1 );

	if ((pBand != NULL) && (pHeaderInfo != NULL))
		{
		pBand->GetBlockSize( &nBlockXSize, &nBlockYSize );
		if (mVerbose == TRUE)
			{
			sprintf(msgBuf, "Block=%dx%d Type=%s,
ColorInterp=%s\n",
					nBlockXSize, nBlockYSize,
	
GDALGetDataTypeName(pBand->GetRasterDataType()),
					GDALGetColorInterpretationName(
	
pBand->GetColorInterpretation()) );
			}

		adfMinMax[0] = pBand->GetMinimum( &bGotMin );
		adfMinMax[1] = pBand->GetMaximum( &bGotMax );

		if( ! (bGotMin && bGotMax) )
			{
			GDALComputeRasterMinMax((GDALRasterBandH)pBand,
TRUE, adfMinMax);
			}

Where pDataSet is the stored pointer returned by GDALOpen.


As always any thoughts or suggestions would be greatly appreciated.

Bruce Clay
bclay@ball.com 
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From bclay at ball.com  Wed May  5 17:49:33 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Parse DEM file problem
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C90A@APPMSG2.AERO.BALL.COM>

Martin:
  Thanks for your reply.  It looks like we are retrieving the data the
same way. I am not totally sure what you are doing after the retrieval
but it looks like you are scaling the data back to 8 bits then combining
the values from separate files to create a single image which you
display as a DIB.

In a comment you mentioned interleaving the bits.  For elevation (DEM)
files, doesn't each value represent the altitude in meters for that
point.  That is from the file origin (say 20 deg w, 40 deg N +
(pixelSize * pixelPosition).  

The interesting point is that the high min and max values returned by
GDAL seemed to match the pixel data I encountered but they are way out
of range from the values indicated in the GTOPO30 documentation.

I'll read some more of the doc to see what shows up but something really
seems out of whack.  Most probably in my code but it is basically a cut
and paste from the GDAL code

MicroDem also has a problem reading these files.  These are the standard
GTO30 files downloaded off the net.


Bruce
bclay@ball.com

From MChapman at sanz.com  Wed May  5 18:09:24 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Parse DEM file problem
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95C9@mailman.san.com>

Bruce,

1.  No problem, hope it is of some help.  I agree, we are reading the
data the same way as far as I can tell.  That's correct, I am
re-aligning the bits to fit in a windows DIB section.  Elevation data
only needs this if you want to show it as an image in windows.  If
you're dealing with a 3D mesh (like in opengl) you just use the height,
x, and y values.

2.  Correct, no need to interleave bits if you are not showing an image.

3.  Not sure what to do about the bad values you are seeing except maybe
to code around it.

4.  The GT030 files may have been written by an application that doesn't
meet the standards...not sure on that one.  You can send me an example
file and I would be glad to tell you if I see the same problem.

Martin

-----Original Message-----
From: Clay, Bruce [mailto:bclay@ball.com] 
Sent: Wednesday, May 05, 2004 3:50 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Parse DEM file problem


Martin:
  Thanks for your reply.  It looks like we are retrieving the data the
same way. I am not totally sure what you are doing after the retrieval
but it looks like you are scaling the data back to 8 bits then combining
the values from separate files to create a single image which you
display as a DIB.

In a comment you mentioned interleaving the bits.  For elevation (DEM)
files, doesn't each value represent the altitude in meters for that
point.  That is from the file origin (say 20 deg w, 40 deg N +
(pixelSize * pixelPosition).  

The interesting point is that the high min and max values returned by
GDAL seemed to match the pixel data I encountered but they are way out
of range from the values indicated in the GTOPO30 documentation.

I'll read some more of the doc to see what shows up but something really
seems out of whack.  Most probably in my code but it is basically a cut
and paste from the GDAL code

MicroDem also has a problem reading these files.  These are the standard
GTO30 files downloaded off the net.


Bruce
bclay@ball.com
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed May  5 18:51:49 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Another Question about OGRDataSource::ExecuteSQL
In-Reply-To: <3761.213.144.131.83.1083775046.squirrel@bela.ifi.unizh.ch>
References: <3761.213.144.131.83.1083775046.squirrel@bela.ifi.unizh.ch>
Message-ID: <40997005.7000003@pobox.com>

jody@ifi.unizh.ch wrote:
> Hi
> 
> I assume that the SQL statement passed to ExecuteSQL
> refers to the attributes of the features in the Datasource.
> 
> If the DataSource contains only one layer,
> everything seems to  be well-defined, because
> all features within a layer must have the same sorts of attributes.
> 
> But what happens if the datasource contains more than one layer
> (which it can, corresponding to the explanation in ogr_arch.html)
> which have different attribute schemas?
> 
> Or does an additional restriction apply to features in a
> "multilayered" Datasource?

Jody,

You specify the layer name as the table name in the OGR "pseudo-SQL".

For instance "SELECT eas_id, prop_value FROM polylayer" would return a
row/feature for each feature in the layer "polylayer", and include only
the eas_id and prop_val attributes.

Have you read the OGR SQL document?

   http://www.remotesensing.org/gdal/ogr/ogr_sql.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed May  5 19:04:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] OpenEV_FW 1.7.2 Released
In-Reply-To: <0cdd01c432b7$fe3fbb10$e32346c0@pili>
References: <408ED450.9010101@pobox.com> <0cdd01c432b7$fe3fbb10$e32346c0@pili>
Message-ID: <409972E8.7070008@pobox.com>

Fr?d?ric Trastour wrote:
> Hello,
> 
> 
>>Folks,
>>
>>I have prepared a new release of my OpenEV_FW binary builds for Linux and
>>Win32 systems.  This tracks the latest source for OpenEV, GDAL and MapServer
>>but is otherwise essentially unchanged since 1.7.1.
>>
>>o The MapServer build on Windows is now done using a libmap.dll, and includes
>>   all the MapServer utilities.
>>o The MapServer build on Linux now includes Python MapScript.
>>o The GDAL build includes CDED 1:50K export capability.
>>
> 
> 
> did you plan to provide "Python MapScript" in MapServer on Windows in a future
> release ?

Frederic,

Yes, I do plan to start including Python MapScript in future releases of
OpenEV_FW for Windows.  I actually cut a secret 1.7.3 release of it yesterday
that now includes PostGIS support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu May  6 09:53:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] Another Question about OGRDataSource::ExecuteSQL
In-Reply-To: <7396.213.144.131.83.1083830475.squirrel@bela.ifi.unizh.ch>
References: <3761.213.144.131.83.1083775046.squirrel@bela.ifi.unizh.ch>    <40997005.7000003@pobox.com> <7396.213.144.131.83.1083830475.squirrel@bela.ifi.unizh.ch>
Message-ID: <409A4369.10907@pobox.com>

jody@ifi.unizh.ch wrote:
> Yeah, this definitely answers my question. But also managed to spark my
> interest with respect to spatial filtering:
> 
> Is the spatial filtering done by brute force, i.e. comparing the
> Extents of every feature with the given OGRGeometry?
> Or is a sort of index created in which the features' extents
> are related with an appropriate encoding with respect to a Quad-Tree, for
> instance?

Jody,

In general the spatial query is applied in a driver determined fashion.
Drivers such as PostGIS and MapInfo TAB which have inherent spatial indexing
already available take advantage of it.  The vast majority of drivers just
read all features and then discard those outside the spatial query area
(including ESRI Shapefiles).

I try to include some notation in the format driver page if a driver has
accelerated spatial indexing.  However, I am not too careful about that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bclay at ball.com  Thu May  6 10:03:14 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GTOPO30 problem
Message-ID: <E4394C8445EFCC4AA136A1C305E4C9280153F052@APPMSG2.AERO.BALL.COM>

Frank:
  Have you ever tried to open any of the GTOPO30 DEM files with GDAL?
In particular the E20N90 file.  I am getting some very large negative
numbers from this file.  Do I need to do anything in particular to
handle ENDIAN issues or is it taken care of automatically.

I retrieved the files from edcftp.cr.usgs.gov.

Thanks.

Bruce Clay
bclay@ball.com 

From warmerdam at pobox.com  Thu May  6 10:32:20 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GTOPO30 problem
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C9280153F052@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C9280153F052@APPMSG2.AERO.BALL.COM>
Message-ID: <409A4C74.8040202@pobox.com>

Clay, Bruce wrote:
> Frank:
>   Have you ever tried to open any of the GTOPO30 DEM files with GDAL?
> In particular the E20N90 file.  I am getting some very large negative
> numbers from this file.  Do I need to do anything in particular to
> handle ENDIAN issues or is it taken care of automatically.
> 
> I retrieved the files from edcftp.cr.usgs.gov.

Bruce,

I have a dataset from a long time ago (W100N40) that has "BYTEORDER M"
at the beginning of the W100N40.HDR file.  This tells the ESRI .HDR driver
that the data is big endian.  I load this file and it seems to work fine.

However, it is possible I added this myself to correct for lacking info
in the file.  What does your .HDR file look like?

Can you point me directly to the file in question?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sholl at gmx.net  Thu May  6 10:55:12 2004
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] ogr2ogr-problems with lco="OVERWRITE=YES"
Message-ID: <20040506165512.12d0f097@kermit.wg.de>

Dear developers,

while testing the new parameters for the GRASS-Module v.out.ogr I
stumbled over a problem, which I can reproduce with ogr2ogr as well.
When trying to overwrite an existing dataset in PostGIS the follwing
error occurs:

GRASS 5.7.-cvs:~ > ogr2ogr -f "PostgreSQL" PG:dbname=postgis gruen.shp 
gruen -lco "OVERWRITE=YES" ERROR 1: CREATE TABLE "gruen" ( OGC_FID
SERIAL ) ERROR:  Relation gruen_ogc_fid_seq already exists

ERROR 1: Terminating translation prematurely after failed
translation of layer gruen

The Layer is existent in PostGIS. What I did was extracting it in GRASS
(v.in.ogr), modifying it with v.digit, and trying to put it back to
PostGIS.
Both methods with v.out.ogr and ogr2ogr fail.

Perhaps someone knows whats going wrong.

Kind regards

	Stephan Holl

-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040506/a85994c9/attachment.bin
From bclay at ball.com  Thu May  6 10:58:03 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GTOPO30 problem
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C90B@APPMSG2.AERO.BALL.COM>

Frank
  the file in biggest question is E20N90.tar.gz from
edcftp.cr.usgs.gov/pub/data/gtopo30/global.  It looks like all of the
data sets are Motorola type.  The min and max values returned by GDAL
don't match the min and max values shown in the GTOPO30 documentation.

Bruce

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, May 06, 2004 10:32 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] GTOPO30 problem


Clay, Bruce wrote:
> Frank:
>   Have you ever tried to open any of the GTOPO30 DEM files with GDAL? 
> In particular the E20N90 file.  I am getting some very large negative 
> numbers from this file.  Do I need to do anything in particular to 
> handle ENDIAN issues or is it taken care of automatically.
> 
> I retrieved the files from edcftp.cr.usgs.gov.

Bruce,

I have a dataset from a long time ago (W100N40) that has "BYTEORDER M"
at the beginning of the W100N40.HDR file.  This tells the ESRI .HDR
driver that the data is big endian.  I load this file and it seems to
work fine.

However, it is possible I added this myself to correct for lacking info
in the file.  What does your .HDR file look like?

Can you point me directly to the file in question?

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Thu May  6 11:41:48 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GTOPO30 problem
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C90B@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C90B@APPMSG2.AERO.BALL.COM>
Message-ID: <409A5CBC.7060803@pobox.com>

Clay, Bruce wrote:
> Frank
>   the file in biggest question is E20N90.tar.gz from
> edcftp.cr.usgs.gov/pub/data/gtopo30/global.  It looks like all of the
> data sets are Motorola type.  The min and max values returned by GDAL
> don't match the min and max values shown in the GTOPO30 documentation.

Bruce,

Gdalinfo was modified March 19th to compute and report exact min/max
values for -mm.  Before that it would request the min/max with "approximate
ok" set to TRUE.  This means that only a subset of the image would be
sampled to compute the min/max.

So, don't trust the min/max values of older gdalinfo's.  A new build from
CVS should give exact results.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bclay at ball.com  Thu May  6 16:04:50 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GTOPO30 problem
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C90C@APPMSG2.AERO.BALL.COM>

Frank:
  Thanks for the update.  After nearly a week of debugging and pulling
my hair out (what little is left that is), I think I found the problem.
It appears to be in the least likely of all places, Winzip.  All of the
GTOPO30 files are tarred and gzipped.  I have been using Winzip to
unpack the files and that appears to be the mistake.  MicroDem has the
ability to uncompress and untar files.  When I used MicroDem to unpack
the files I get the correct min and max values as defined in the GTOPO30
document (at least for the file in question).  As a sanity check I went
back to Winzip and checked the files out of the same compressed data
file the run the latest gdalinfo I get
   "Computed Min/Max=-32768.000,32767.000"

I can't explain why this is the case just that it certainly appears to
be.  I would be real happy to have independent confirmation from anyone
that has the time to run the same test "gdalinfo -mm e020n90.dem" on a
dem file extracted with Winzip version 8.1 

Another interesting tidbit I just tried is a freeware program
(PowerArchiver 2001, v6.1) unpacks the data correctly such that the
results of the above test are "Computed Min/Max=-137.000,5483.000"

Thanks again for your help.

Bruce


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Thursday, May 06, 2004 11:42 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] GTOPO30 problem


Clay, Bruce wrote:
> Frank
>   the file in biggest question is E20N90.tar.gz from 
> edcftp.cr.usgs.gov/pub/data/gtopo30/global.  It looks like all of the 
> data sets are Motorola type.  The min and max values returned by GDAL 
> don't match the min and max values shown in the GTOPO30 documentation.

Bruce,

Gdalinfo was modified March 19th to compute and report exact min/max
values for -mm.  Before that it would request the min/max with
"approximate ok" set to TRUE.  This means that only a subset of the
image would be sampled to compute the min/max.

So, don't trust the min/max values of older gdalinfo's.  A new build
from CVS should give exact results.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Thu May  6 16:18:31 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] GTOPO30 problem
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C90C@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C90C@APPMSG2.AERO.BALL.COM>
Message-ID: <409A9D97.4040107@pobox.com>

Clay, Bruce wrote:
> Frank:
>   Thanks for the update.  After nearly a week of debugging and pulling
> my hair out (what little is left that is), I think I found the problem.
> It appears to be in the least likely of all places, Winzip.  All of the
> GTOPO30 files are tarred and gzipped.  I have been using Winzip to
> unpack the files and that appears to be the mistake.  MicroDem has the
> ability to uncompress and untar files.  When I used MicroDem to unpack
> the files I get the correct min and max values as defined in the GTOPO30
> document (at least for the file in question).  As a sanity check I went
> back to Winzip and checked the files out of the same compressed data
> file the run the latest gdalinfo I get
>    "Computed Min/Max=-32768.000,32767.000"
> 
> I can't explain why this is the case just that it certainly appears to
> be.  I would be real happy to have independent confirmation from anyone
> that has the time to run the same test "gdalinfo -mm e020n90.dem" on a
> dem file extracted with Winzip version 8.1 
> 
> Another interesting tidbit I just tried is a freeware program
> (PowerArchiver 2001, v6.1) unpacks the data correctly such that the
> results of the above test are "Computed Min/Max=-137.000,5483.000"

Bruce,

I hope I never meet a WinZip developer.  They provide a "convenient default
option" to apply DOS/UNIX CR/LF conversion when unpacking files.  Unfortunately
this corrupts binary files.  I have had no end of hassles due to this brain
dead decision on their part.

We used to run into a similar problem with people downloading files by ftp
and the ftp client applying default CRLF conversion.

Damn, and double damn winzip.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at pf.pl  Thu May  6 18:08:45 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:09 2007
Subject: [Gdal-dev] NLAPS Data Format
Message-ID: <009201c433b7$91564b80$43e91d3e@n7a3h9>

hi

I have two TM data sets in an NDF (NLAPS Data Format)
in general it's a format for following data types: MSS, TM, ETM+ and
NLAPS_DEM

is it supported in gdal? may it be?

Maciek Sieczka


From MChapman at sanz.com  Thu May  6 18:38:51 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Thanks
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95CD@mailman.san.com>

Frank and the other contributors,
 
I just wanted to reinstate the fact that GDAL, Proj4, and OGR totally
rock!  Keep up the great work guys, you have really helped to make our
project a success.
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040506/cc7e69b4/attachment.html
From MChapman at sanz.com  Thu May  6 18:47:19 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Thanks
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95CE@mailman.san.com>

Whooops, reinstate was the wrong word...i meant to say "state the fact".
 
Martin

	-----Original Message-----
	From: Chapman, Martin 
	Sent: Thursday, May 06, 2004 4:39 PM
	To: gdal-dev@remotesensing.org
	Subject: [Gdal-dev] Thanks
	
	
	Frank and the other contributors,
	 
	I just wanted to reinstate the fact that GDAL, Proj4, and OGR
totally rock!  Keep up the great work guys, you have really helped to
make our project a success.
	 
	
	Martin Chapman
	Cell 303-885-1936
	Office 303-660-3933 x226
	mchapman@sanz.com
	http://www.sanz.com <http://www.sanz.com/> 
	 
	 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040506/89a40099/attachment.html
From starged at videotron.ca  Thu May  6 19:30:31 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Fusion tool update
Message-ID: <ethl90dj4q59q0bpcpubd0kictvemlovgh@4ax.com>

Hi all,

I have made some improvements to the Fusion tool. It is now possible to select an area to fuse using
the ROI tool. Also the images don't have to be the same size, or even have the same resolution. The
RGB image will be resampled to match the pan image resolution. However, this resampling is done
using NN and this does not give good results when using color correction. It is not as noticeable
with "regular" fusion.

I hope there will be a way to specify the resampling algorithm of VRT datasets in Python in the
future... any plans to implement that?

This version has not been extensively tested. It works well with my collection of Landsat images
from Geogratis and the GLCF but it's possible there may be problems with images from other sources.

Any feedback would be appreciated, good or bad :)

Thanks for you attention.
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From starged at videotron.ca  Thu May  6 19:33:08 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Fusion tool addendum...
Message-ID: <nmil9051irtqtem287coh7q4tjdr1hhv04@4ax.com>

Hi folks,

Forgot to mention the url :)

http://pages.infinit.net/starged/openev/fusion.py
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From warmerdam at pobox.com  Thu May  6 21:32:03 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Re: [Openev-discuss] Fusion tool update
In-Reply-To: <ethl90dj4q59q0bpcpubd0kictvemlovgh@4ax.com>
References: <ethl90dj4q59q0bpcpubd0kictvemlovgh@4ax.com>
Message-ID: <409AE713.6040905@pobox.com>

Mario Beauchamp wrote:
> Hi all,
> 
> I have made some improvements to the Fusion tool. It is now possible to select an area to fuse using
> the ROI tool. Also the images don't have to be the same size, or even have the same resolution. The
> RGB image will be resampled to match the pan image resolution. However, this resampling is done
> using NN and this does not give good results when using color correction. It is not as noticeable
> with "regular" fusion.
> 
> I hope there will be a way to specify the resampling algorithm of VRT datasets in Python in the
> future... any plans to implement that?

Mario,

It is my itention to implement a type of virtual datasource based on the
general GDAL image warper API.  This should allow fairly generalized
image warping, as well as making the various resampling kernels available.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From starged at videotron.ca  Thu May  6 22:46:28 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Re: [Openev-discuss] Fusion tool update
In-Reply-To: <409AE713.6040905@pobox.com>
References: <ethl90dj4q59q0bpcpubd0kictvemlovgh@4ax.com>
 <409AE713.6040905@pobox.com>
Message-ID: <nttl9059qmes5gg157hkloe7fs6mp7pfq8@4ax.com>

Hi Frank,

On Thu, 06 May 2004 21:32:03 -0400, Frank Warmerdam <warmerdam@pobox.com> wrote:

>> I hope there will be a way to specify the resampling algorithm of VRT datasets in Python in the
>> future... any plans to implement that?
>
>It is my itention to implement a type of virtual datasource based on the
>general GDAL image warper API.  This should allow fairly generalized
>image warping, as well as making the various resampling kernels available.

That's great, I am looking forward to that. This should help VRT reprojection as well.

Thanks.
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From TMitchell at lignum.com  Fri May  7 11:55:35 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Thanks
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB95CD@mailman.san.com>
Message-ID: <OFC9554224.D6134735-ON88256E8D.005774AC-88256E8D.00577C98@lignum.com>

Here here!  The future is so bright...

gdal-dev-admin@remotesensing.org wrote on 05/06/2004 03:38:51 PM:

> Frank and the other contributors,
> 
> I just wanted to reinstate the fact that GDAL, Proj4, and OGR 
> totally rock!  Keep up the great work guys, you have really helped 
> to make our project a success.
> 
> Martin Chapman
> Cell 303-885-1936
> Office 303-660-3933 x226
> mchapman@sanz.com
> http://www.sanz.com
> 
> 

From MChapman at sanz.com  Fri May  7 12:11:29 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Jasper GeoJp2 question
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AF4@mailman.san.com>

I downloaded the modified jasper library from the GDAL ftp site,
compiled it with MSVC and got an error saying it was missing the
jas_config.h file.  Should there be a jas_config.h file in the include
directory?  Basically, I want to compile Jasper with GeoJp2 support.
Does anybody know what I have to do to the jasper lib to get it to
compile with GeoJp2 support?  Am I making sense?
 
Martin Chapman
Cell 303-885-1936
Office 303-660-3933 x226
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040507/5d12f1be/attachment.html
From matt.wilkie at gov.yk.ca  Fri May  7 12:15:45 2004
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Fusion tool update
In-Reply-To: <ethl90dj4q59q0bpcpubd0kictvemlovgh@4ax.com>
References: <ethl90dj4q59q0bpcpubd0kictvemlovgh@4ax.com>
Message-ID: <409BB631.8030802@gov.yk.ca>

> Any feedback would be appreciated, good or bad :)

Mario, I look at Fusion with great interest and anticipation but have no 
time whatsoever to try it out yet.  I just wanted to let you know that 
at least some of us like what you're are doing, even if we can't use it 
yet. :)

cheers,


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------


From bclay at ball.com  Fri May  7 16:15:34 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Changes between 1.1.9 and 1.20
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C914@APPMSG2.AERO.BALL.COM>

Frank:
When I used version 1.1.9 in my app I could read ArcView shape files
from the EP200 data set at http://www.cdc.gov/epiinfo/shape.htm.

When multiple polygons were used for a given country they were still
reported as type Polygon and everything was happy.  With the update to
version 1.2.0 the same data set reports them as multi-polygons and for
some reason they down parse out the same.  The code I used to use is:

	vectorNodePtr->type = POLYGON;

	status = OGRPolygonLabelPoint((OGRPolygon *)geom_handl,
&labelPoint);

	if (status >= 0) // == OGRERR_NONE)
		{
		status = 0;
		vectorNodePtr->labelPoint.xPos = labelPoint.getX();
		vectorNodePtr->labelPoint.yPos = labelPoint.getY();
		vectorNodePtr->labelPoint.zPos = labelPoint.getZ();
		}

	for( iRing = 0; iRing < geom_cnt; iRing++ )
		{
		ringPtr = new struct ringRec;
		if (ringPtr != NULL)
			{
			vectorNodePtr->ringList.push_back(ringPtr);

			OGRGeometryH ring_handl = OGR_G_GetGeometryRef(
geom_handl, iRing );

			if (dump_fdes != NULL)
				{
				fprintf(dump_fdes, "Ring %d\n", iRing );
				}

			// allocate memory for the current ring

			if (vectorNodePtr->numDimensions == 3)
				{
				ringPtr->threeDList = new std::vector
<struct threeDDataRec *>;

				ringPtr->twoDList = NULL;
				}
			else
				{
				ringPtr->twoDList = new std::vector
<struct twoDDataRec *>;

				ringPtr->threeDList = NULL;
				}

			for( iPoint = 0; iPoint <
OGR_G_GetPointCount(ring_handl); iPoint++ )
				{
				if (vectorNodePtr->numDimensions == 3)
					{
					threeDdataPtr = new struct
threeDDataRec;

	
ringPtr->threeDList->push_back(threeDdataPtr);

			// set default values for color and line width

					threeDdataPtr->colorIndex = 0;
					threeDdataPtr->lineWidth = 1.0f;

					threeDdataPtr->xPos =
OGR_G_GetX( ring_handl, iPoint);
					threeDdataPtr->yPos =
OGR_G_GetY( ring_handl, iPoint);
					threeDdataPtr->zPos =
OGR_G_GetZ( ring_handl, iPoint);
					if (dump_fdes != NULL)
						{
						fprintf(dump_fdes, "
%d: (%g,%g,%g)\n", iPoint,
	
OGR_G_GetX( ring_handl, iPoint ),
	
OGR_G_GetY( ring_handl, iPoint ),
	
OGR_G_GetZ( ring_handl, iPoint ) );
						}
					}
				else
					{
					twoDdataPtr = new struct
twoDDataRec;
	
ringPtr->twoDList->push_back(twoDdataPtr);

			// set default values for color and line width

					twoDdataPtr->colorIndex = 0;
					twoDdataPtr->lineWidth = 1.0f;

					twoDdataPtr->xPos = OGR_G_GetX(
ring_handl, iPoint);
					twoDdataPtr->yPos = OGR_G_GetY(
ring_handl, iPoint);
					if (dump_fdes != NULL)
						{
						fprintf(dump_fdes, "
%d: (%g,%g)\n", iPoint,
	
OGR_G_GetX( ring_handl, iPoint ),
	
OGR_G_GetY( ring_handl, iPoint ));
						}
					}
				}
			}  // if ringPtr != NULL
		}  // end of for ring = 0 to geom_cnt

I notice that OGR_G_GetPointCount returns 0 with the multipolygon so I
tried changing GetPointCount to (OGRMultiPolygon
*)ring_handl)->getNumGeometries().  That only returns a count of 1.
That is the only get count type of call I saw when I searched for
MultiPolygon.

Do you see anything I am missing?


Thanks for your time and the library.


Bruce Clay
bclay@ball.com 

From starged at videotron.ca  Fri May  7 16:26:01 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Fusion tool bug fix
Message-ID: <r3rn905te83590srducqsgvq2jc4h4l23o@4ax.com>

Hi again,

I corrected a bug that was overwriting the geotransform of the source panchromatic image. Python
programmers will immediately see that rookie mistake in the compute() method :)

But it made me realize something: it's possible then to modify the georeferencing of an image
without rewriting the whole file, is it not? However, when I tried to correct the 2 files that were
modified this way (ie with SetGeoTransform), it did not work. I will investigate that further
because this feature may be very useful to correct wrongly georeferenced images.

Sorry for the inconveniences, if any...
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From starged at videotron.ca  Fri May  7 16:33:49 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Fusion tool update
In-Reply-To: <409BB631.8030802@gov.yk.ca>
References: <ethl90dj4q59q0bpcpubd0kictvemlovgh@4ax.com>
 <409BB631.8030802@gov.yk.ca>
Message-ID: <b7sn90pa9m0bhug4k1r0364srttcblmuq4@4ax.com>

Hi Matt,

On Fri, 07 May 2004 09:15:45 -0700, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:

>> Any feedback would be appreciated, good or bad :)
>
>Mario, I look at Fusion with great interest and anticipation but have no 
>time whatsoever to try it out yet.  I just wanted to let you know that 
>at least some of us like what you're are doing, even if we can't use it yet. :)

And it's a good thing you didn't (see bug fix post) :)

I appreciate your interest. I've been juggling that fusion thing in my mind for almost two years and
I am glad I finally got a breakthrough thanks to GDAL and OpenEV. So if it's useful to anybody else,
it was worth the efforts...

Thanks.
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From dron at ak4719.spb.edu  Sun May  9 05:56:05 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Jasper GeoJp2 question
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63AF4@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63AF4@mailman.san.com>
Message-ID: <20040509095605.GA32341@ak4719.spb.edu>

On Fri, May 07, 2004 at 10:11:29AM -0600, Chapman, Martin wrote:
> I downloaded the modified jasper library from the GDAL ftp site,
> compiled it with MSVC and got an error saying it was missing the
> jas_config.h file.  Should there be a jas_config.h file in the include
> directory?  Basically, I want to compile Jasper with GeoJp2 support.

It seems that jas_config.h really missed from the JasPer tarball. I have
uploaded corrected package:

 ftp://ftp.remotesensing.org/pub/gdal/jasper-1.701.0.uuid.tar.gz

As a quck fix you may just rename the jas_config2.h into the
jas_config.h.

> Does anybody know what I have to do to the jasper lib to get it to
> compile with GeoJp2 support?  Am I making sense?

You don't need nothing special. Just get the tarball from
remotesensing.org and use it with GDAL.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From pi_ml at sourcepole.com  Mon May 10 08:48:08 2004
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] No features for vmap0
Message-ID: <200405101448.08098.pi_ml@sourcepole.com>

Hello,
We have the same problems Johannes Sander posted a few month ago: 
http://remotesensing.org/pipermail/gdal-dev/2003-November/001414.html

Many features of the noamer data are reported as empty:

ogrinfo -ro gltp:/vrf/mnt/wal/projects/gisdata/vmap0/v0noa/vmaplv0/noamer 
'coastl@bnd(*)_line'
INFO: Open of `gltp:/vrf/mnt/wal/projects/gisdata/vmap0/v0noa/vmaplv0/noamer'
using driver `OGDI' successful.

Layer name: coastl@bnd(*)_line
Geometry: Line String
Feature Count: 0
Layer SRS WKT:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4269"]]
id: Integer (10.0)
f_code: String (5.0)
acc: Integer (5.0)
exs: Integer (5.0)
tile_id: Integer (5.0)
edg_id: Integer (10.0)


Versions:
GDAL 1.2.0 with OGDI 3.1.2

For the open bug http://bugzilla.remotesensing.org/show_bug.cgi?id=372
regarding the eurnasia data, we patched ogrogdilayer.cpp to a default field 
width of 128.


Regards,
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

From warmerdam at pobox.com  Mon May 10 10:51:56 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Changes between 1.1.9 and 1.20
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C914@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C914@APPMSG2.AERO.BALL.COM>
Message-ID: <409F970C.1070608@pobox.com>

Clay, Bruce wrote:
> Frank:
> When I used version 1.1.9 in my app I could read ArcView shape files
> from the EP200 data set at http://www.cdc.gov/epiinfo/shape.htm.
> 
> When multiple polygons were used for a given country they were still
> reported as type Polygon and everything was happy.  With the update to
> version 1.2.0 the same data set reports them as multi-polygons and for
> some reason they down parse out the same.  The code I used to use is:
...
> I notice that OGR_G_GetPointCount returns 0 with the multipolygon so I
> tried changing GetPointCount to (OGRMultiPolygon
> *)ring_handl)->getNumGeometries().  That only returns a count of 1.
> That is the only get count type of call I saw when I searched for
> MultiPolygon.

Bruce,

If a geometry is a multipolygon, you should use OGR_G_GetGeometryCount() to
get the number of polygons, and and OGR_G_GetGeometryRef() to get each
polygon.  Then use OGR_G_GetGeometryCount() and OGR_G_GetGeometryRef() on
each polygon to extract the rings which you can then process normally.

Use OGR_G_GetGeometryType() to determine if the geometry is a wkbPolygon or
a wkbMultiPolygon (or wkbPolygon25D/wkbMultiPolygon25D).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From matt.wilkie at gov.yk.ca  Mon May 10 12:06:04 2004
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] common GML geolocation method for JPEG 2000
Message-ID: <409FA86C.9000900@gov.yk.ca>

This is likely not be news to the core gdal developers; but just in case 
it is: "Leaders in JPEG2000 technology today announced their endorsement 
of a common way to use GML schema for storing geo-location information 
for imagery, within the JPEG2000 format. This definition is an open 
manufacturer agreement, based on the proposal of Algo Vision LuraTech on 
GML inside JPEG2000, which has already been adopted as a part of the 
standard."
http://tinyurl.com/yw88s
(goes to 
http://www10.giscafe.com/nbc/articles/view_article.php?section=CorpNews&articleid=123098)

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------



From marisap at telkomsa.net  Mon May 10 15:29:02 2004
From: marisap at telkomsa.net (Fam. Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
Message-ID: <BKEKKNEPIPMJLIAAMCLOIEADCAAA.marisap@telkomsa.net>

Hi,

I'm quite new to the GDAL world and sofar its gone quite smoothly - but
today I tried using OGR Style Tools and now I'm getting unresolved symbol
errors when linking the libs. Its just looks as tho something was left out
of the precompiled binaries. I'm going to try building the GDAL package from
scratch and see if the stubs the scripts generate solve the problem. Still,
I like doing things the easy way. If someone could verify the integrity of
the pre-compiled Win32 binaries that would be swell.

Thanks
Louis Pool.


From warmerdam at pobox.com  Mon May 10 16:08:33 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable
 Win32 Binaries.
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOIEADCAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOIEADCAAA.marisap@telkomsa.net>
Message-ID: <409FE141.1080407@pobox.com>

Fam. Pool wrote:
> Hi,
> 
> I'm quite new to the GDAL world and sofar its gone quite smoothly - but
> today I tried using OGR Style Tools and now I'm getting unresolved symbol
> errors when linking the libs. Its just looks as tho something was left out
> of the precompiled binaries. I'm going to try building the GDAL package from
> scratch and see if the stubs the scripts generate solve the problem. Still,
> I like doing things the easy way. If someone could verify the integrity of
> the pre-compiled Win32 binaries that would be swell.

Louis,

There are indeed some issues with linking against the DLL version of OGR
and using some of the style related classes.  I am a bit uncertain what
the exact problem is, but if you can list your link errors, and provide
a smallish example program that demonstrates the problem I will try and fix
it.  I have run into a similar problem with MapServer but never succeeded in
resolve it.

Note, the problem can be worked around by linking against static versions of
OGR but if possible i would prefer to just fix the base problem.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bclay at ball.com  Mon May 10 16:19:09 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Changes between 1.1.9 and 1.20
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C919@APPMSG2.AERO.BALL.COM>

Frank:
  Thanks for your reply.  I did get that part working from your input
though I had to modify it slightly to get it to work.  The inner loop
OGR_G_GetGeometryCount returned 1 for all but one ring and that it
returned 2.  I had to use OGR_G_GetPointCount instead.

With that working I believe that all of the polygons are showing but it
uncovered a problem with the labels.  I am using the EP2000 shapefile
data set for North America (namer.shp).  With gdal version 1.1.9 the
labels all displayed in the correct place.  When I diff a data dump from
my program using version 1.1.9 and gdal-cvs-20040506 most of the label
points are within a few tenths of a degree away and some even match
exactly.  The problem is the "United States" label.  It is in the
correct spot using version 1.1.9 but over in France when I use the
gdal-cvs-20040506 version.   I suspect the problem is the few Aleutian
Islands that are west of the International Dateline.  The reason I
suspect those is that when I open the file in fGis or MapView some
number of Islands are way over on the right of the screen and the rest
of North America is on the left side.  I tried getting the labels at
different nesting levels to see if I got different results but the
program crashed in OGRPolygonLabelPoint.

I could post the final code sequence I ended up with to display
multi-polygons if anyone is interested.

Bruce
bclay@ball.com

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Monday, May 10, 2004 10:52 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Changes between 1.1.9 and 1.20


Clay, Bruce wrote:
> Frank:
> When I used version 1.1.9 in my app I could read ArcView shape files 
> from the EP200 data set at http://www.cdc.gov/epiinfo/shape.htm.
> 
> When multiple polygons were used for a given country they were still 
> reported as type Polygon and everything was happy.  With the update to

> version 1.2.0 the same data set reports them as multi-polygons and for

> some reason they down parse out the same.  The code I used to use is:
...
> I notice that OGR_G_GetPointCount returns 0 with the multipolygon so I

> tried changing GetPointCount to (OGRMultiPolygon 
> *)ring_handl)->getNumGeometries().  That only returns a count of 1. 
> That is the only get count type of call I saw when I searched for 
> MultiPolygon.

Bruce,

If a geometry is a multipolygon, you should use OGR_G_GetGeometryCount()
to get the number of polygons, and and OGR_G_GetGeometryRef() to get
each polygon.  Then use OGR_G_GetGeometryCount() and
OGR_G_GetGeometryRef() on each polygon to extract the rings which you
can then process normally.

Use OGR_G_GetGeometryType() to determine if the geometry is a wkbPolygon
or a wkbMultiPolygon (or wkbPolygon25D/wkbMultiPolygon25D).

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Mon May 10 16:40:09 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Changes between 1.1.9 and 1.20
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C919@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C919@APPMSG2.AERO.BALL.COM>
Message-ID: <409FE8A9.5080503@pobox.com>

Clay, Bruce wrote:
> Frank:
>   Thanks for your reply.  I did get that part working from your input
> though I had to modify it slightly to get it to work.  The inner loop
> OGR_G_GetGeometryCount returned 1 for all but one ring and that it
> returned 2.  I had to use OGR_G_GetPointCount instead.
> 
> With that working I believe that all of the polygons are showing but it
> uncovered a problem with the labels.  I am using the EP2000 shapefile
> data set for North America (namer.shp).  With gdal version 1.1.9 the
> labels all displayed in the correct place.  When I diff a data dump from
> my program using version 1.1.9 and gdal-cvs-20040506 most of the label
> points are within a few tenths of a degree away and some even match
> exactly.  The problem is the "United States" label.  It is in the
> correct spot using version 1.1.9 but over in France when I use the
> gdal-cvs-20040506 version.   I suspect the problem is the few Aleutian
> Islands that are west of the International Dateline.  The reason I
> suspect those is that when I open the file in fGis or MapView some
> number of Islands are way over on the right of the screen and the rest
> of North America is on the left side.  I tried getting the labels at
> different nesting levels to see if I got different results but the
> program crashed in OGRPolygonLabelPoint.

Bruce,

I suspect the old label code was only looking at the first ring or something,
and that is why it is different now.  That code is actually from MITAB I
believe, so it would be Daniel M. who could speak to the details.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From marisap at telkomsa.net  Mon May 10 16:58:39 2004
From: marisap at telkomsa.net (Fam. Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
In-Reply-To: <409FE141.1080407@pobox.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOKEAECAAA.marisap@telkomsa.net>

Fo Sheezy -

This is a simplified version of the code - note that I'm using a MapInfo
Data Source, a directory with several .TAB, .DAT, .MAP etc files (so in GDAL
talk: a couple 'o Layers).

bool cVectorLoader::loadOGRVector(char* sVectorMap)
{
  //DataSet
  OGRDataSource* poDataSet = (OGRDataSource*)
OGRSFDriverRegistrar::Open(sVectorMap, false);
  if (poDataSet == NULL)
  {
    return false;
  }

  const char* sName = poDataSet->GetName();
  int iNrOfLayers = poDataSet->GetLayerCount();

  cout << endl << "<OGR> Report for Vector Dataset " << sName << endl;
  cout << "Dataset has " << iNrOfLayers << " layer(s)." << endl;

  //Layers
  for (int i=0; i < iNrOfLayers; i++)
  {
    cout << "For layer " << i+1 << endl;

    OGRLayer* poLayer = (OGRLayer*) poDataSet->GetLayer(i);
    if (poLayer != NULL)
    {
      //Features
      int iNrOfFeatures = poLayer->GetFeatureCount(true);
      OGRFeature* poFeature = (OGRFeature*) poLayer->GetNextFeature();

      cout << "Layer has " << iNrOfFeatures << " features" << endl;

      int j=1;
      while (poFeature != NULL)
      {
        //Style
        cout << "Feature " << j << " with ID " << poFeature->GetFID()
             << " and Style String " << poFeature->GetStyleString () <<
endl;

        OGRStyleTable oStyleTable;
        OGRStyleTool* poStyleTool;
        OGRStyleMgr*  poStyleMgr = new OGRStyleMgr(&oStyleTable);

        poStyleMgr->GetStyleString(poFeature);
        for (int k=0; poStyleMgr->GetPartCount(); k++)
        {
           poStyleTool = poStyleMgr->GetPart(k);
           switch(poStyleTool->GetType())
           {
             case OGRSTCNone: cout << "Style = None" << endl;
              break;
             case OGRSTCPen: cout << "Style = Pen" << endl;
              break;
             case OGRSTCBrush: cout << "Style = Brush" << endl;
              break;
             case OGRSTCSymbol: cout << "Style = Symbol" << endl;
              break;
             case OGRSTCLabel: cout << "Style = Label" << endl;
              break;
           }
        }

        ...

        poFeature = (OGRFeature*) poLayer->GetNextFeature();
        j++;
      }
    }
  }
  cout << endl << "<OGR> End of Report" << endl;

  //Clean up
  delete poDataSet;

  //Function completed successfully
  return true;
}

Compilation is all good. When linking I get ze following errors.

Linking...
   Creating library Debug/MapViewer.lib and object Debug/MapViewer.exp
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol" (?asStyleSymbol@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol" (?asStyleSymbol@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol" (?asStyleSymbol@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
Debug/MapViewer.exe : fatal error LNK1120: 4 unresolved externals
Error executing link.exe.

I'm using gdal_i.lib => gdal12.dll, the ones from the downloadable binaries.
I should add that for the past three yrs I've been a Java Boy and for the
last two weeks I've been brushing up on my C skills, which I haven't used
since my Varsity days. I could just be doing something stupid. However,
everything links fine when I comment out the Style Tool thingies.

BTW Frank - thanks for the great library!

Louis.





-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 10 May 2004 10:09
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fam. Pool wrote:
> Hi,
>
> I'm quite new to the GDAL world and sofar its gone quite smoothly - but
> today I tried using OGR Style Tools and now I'm getting unresolved symbol
> errors when linking the libs. Its just looks as tho something was left out
> of the precompiled binaries. I'm going to try building the GDAL package
from
> scratch and see if the stubs the scripts generate solve the problem.
Still,
> I like doing things the easy way. If someone could verify the integrity of
> the pre-compiled Win32 binaries that would be swell.

Louis,

There are indeed some issues with linking against the DLL version of OGR
and using some of the style related classes.  I am a bit uncertain what
the exact problem is, but if you can list your link errors, and provide
a smallish example program that demonstrates the problem I will try and fix
it.  I have run into a similar problem with MapServer but never succeeded in
resolve it.

Note, the problem can be worked around by linking against static versions of
OGR but if possible i would prefer to just fix the base problem.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Mon May 10 17:14:43 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95E0@mailman.san.com>

Louis,

The windows version of gdal is awesome. Never had a problem that wasn't
created by me, and our apps make heavy use of GDAL and OGR.  I usually
download the daily .zip and build it using VC7 .Net from the command
line.  There are build instructions on the gdal website for windows that
are complete and easy to follow.

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 1:29 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Hi,

I'm quite new to the GDAL world and sofar its gone quite smoothly - but
today I tried using OGR Style Tools and now I'm getting unresolved
symbol errors when linking the libs. Its just looks as tho something was
left out of the precompiled binaries. I'm going to try building the GDAL
package from scratch and see if the stubs the scripts generate solve the
problem. Still, I like doing things the easy way. If someone could
verify the integrity of the pre-compiled Win32 binaries that would be
swell.

Thanks
Louis Pool.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From marisap at telkomsa.net  Mon May 10 17:25:03 2004
From: marisap at telkomsa.net (Fam. Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOKEAECAAA.marisap@telkomsa.net>
Message-ID: <BKEKKNEPIPMJLIAAMCLOEEAFCAAA.marisap@telkomsa.net>

Sorry I'm bothering you so much with this Frank -

I tried compiling GDAL from scratch but I got linking problems again. These
are my woes -


Microsoft (R) Library Manager Version 6.00.8168
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

        link /dll /debug /INCLUDE:_OCTNewCoordinateTransformation
/INCLUDE:_OGRRegisterAll  /INCLUDE:_OGRFeatureStylePu
ller  /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods
/INCLUDE:_OGR_G_GetPointCount /INCLUDE:_GDALSimpleImageW
arp  /INCLUDE:_GDALSuggestedWarpOutput  /INCLUDE:_GDALGCPTransform
/INCLUDE:_GDALComputeMedianCutPCT  /INCLUDE:_GDALDit
herRGB2PCT port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj
ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib   D:\Libraries\Xer
ces/lib/xerces-c_2.lib   odbc32.lib
D:\Libraries\Jasper\src\msvc\Win32_Release\libjasper.lib
/out:gdal1
2.dll /implib:gdal_i.lib
Microsoft (R) Incremental Linker Version 6.00.8168
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

LIBC.lib(crt0dat.obj) : error LNK2005: _exit already defined in
MSVCRT.lib(MSVCRT.dll)
LIBC.lib(crt0init.obj) : error LNK2005: ___xc_z already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xc_a already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xi_z already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xi_a already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(mbctype.obj) : error LNK2005: __getmbcp already defined in
MSVCRT.lib(MSVCRT.dll)
MSVCRT.lib(MSVCRT.dll) : error LNK2005: __strdup already defined in
LIBC.lib(strdup.obj)
MSVCRT.lib(MSVCRT.dll) : error LNK2005: __unlink already defined in
LIBC.lib(unlink.obj)
LIBC.lib(crt0dat.obj) : warning LNK4006: _exit already defined in
MSVCRT.lib(MSVCRT.dll); second definition ignored
LIBC.lib(crt0init.obj) : warning LNK4006: ___xc_z already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xc_a already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xi_z already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xi_a already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(mbctype.obj) : warning LNK4006: __getmbcp already defined in
MSVCRT.lib(MSVCRT.dll); second definition ignored
MSVCRT.lib(MSVCRT.dll) : warning LNK4006: __strdup already defined in
LIBC.lib(strdup.obj); second definition ignored
MSVCRT.lib(MSVCRT.dll) : warning LNK4006: __unlink already defined in
LIBC.lib(unlink.obj); second definition ignored
   Creating library gdal_i.lib and object gdal_i.exp
LINK : warning LNK4098: defaultlib "MSVCRT" conflicts with use of other
libs; use /NODEFAULTLIB:library
LINK : warning LNK4098: defaultlib "LIBC" conflicts with use of other libs;
use /NODEFAULTLIB:library
LIBC.lib(crt0.obj) : error LNK2001: unresolved external symbol _main
gdal12.dll : fatal error LNK1120: 1 unresolved externals
NMAKE : fatal error U1077: 'link' : return code '0x460'
Stop.


I vainly tried removing the MSVCRT and LIBC default libs by adding
/NODEFAULTLIB:LIBC and /NODEFAULTLIB:MSVCRT
to LINKER_FLAGS in nmake.opt - but I guess you can imagine how many
unresolved symbols I got then. Anyway, I'm using
VC6 and I was wondering if that would cause any problems... I noticed your
precompiled binaries specifically look for
MSVCRT71.dll

I don't want to whine 'cause I really hate whiners, but I would really
appreciate it if you could direct me to a site
where I can download precompiled WIN32 Static Libs for GDAL and OGR. Or put
one up if there aren't any - actually any help
would be dearly appreciated!

Thanks in advance,
Louis.


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Fam. Pool
Sent: 10 May 2004 10:59
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fo Sheezy -

This is a simplified version of the code - note that I'm using a MapInfo
Data Source, a directory with several .TAB, .DAT, .MAP etc files (so in GDAL
talk: a couple 'o Layers).

bool cVectorLoader::loadOGRVector(char* sVectorMap)
{
  //DataSet
  OGRDataSource* poDataSet = (OGRDataSource*)
OGRSFDriverRegistrar::Open(sVectorMap, false);
  if (poDataSet == NULL)
  {
    return false;
  }

  const char* sName = poDataSet->GetName();
  int iNrOfLayers = poDataSet->GetLayerCount();

  cout << endl << "<OGR> Report for Vector Dataset " << sName << endl;
  cout << "Dataset has " << iNrOfLayers << " layer(s)." << endl;

  //Layers
  for (int i=0; i < iNrOfLayers; i++)
  {
    cout << "For layer " << i+1 << endl;

    OGRLayer* poLayer = (OGRLayer*) poDataSet->GetLayer(i);
    if (poLayer != NULL)
    {
      //Features
      int iNrOfFeatures = poLayer->GetFeatureCount(true);
      OGRFeature* poFeature = (OGRFeature*) poLayer->GetNextFeature();

      cout << "Layer has " << iNrOfFeatures << " features" << endl;

      int j=1;
      while (poFeature != NULL)
      {
        //Style
        cout << "Feature " << j << " with ID " << poFeature->GetFID()
             << " and Style String " << poFeature->GetStyleString () <<
endl;

        OGRStyleTable oStyleTable;
        OGRStyleTool* poStyleTool;
        OGRStyleMgr*  poStyleMgr = new OGRStyleMgr(&oStyleTable);

        poStyleMgr->GetStyleString(poFeature);
        for (int k=0; poStyleMgr->GetPartCount(); k++)
        {
           poStyleTool = poStyleMgr->GetPart(k);
           switch(poStyleTool->GetType())
           {
             case OGRSTCNone: cout << "Style = None" << endl;
              break;
             case OGRSTCPen: cout << "Style = Pen" << endl;
              break;
             case OGRSTCBrush: cout << "Style = Brush" << endl;
              break;
             case OGRSTCSymbol: cout << "Style = Symbol" << endl;
              break;
             case OGRSTCLabel: cout << "Style = Label" << endl;
              break;
           }
        }

        ...

        poFeature = (OGRFeature*) poLayer->GetNextFeature();
        j++;
      }
    }
  }
  cout << endl << "<OGR> End of Report" << endl;

  //Clean up
  delete poDataSet;

  //Function completed successfully
  return true;
}

Compilation is all good. When linking I get ze following errors.

Linking...
   Creating library Debug/MapViewer.lib and object Debug/MapViewer.exp
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol" (?asStyleSymbol@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol" (?asStyleSymbol@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol" (?asStyleSymbol@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
Debug/MapViewer.exe : fatal error LNK1120: 4 unresolved externals
Error executing link.exe.

I'm using gdal_i.lib => gdal12.dll, the ones from the downloadable binaries.
I should add that for the past three yrs I've been a Java Boy and for the
last two weeks I've been brushing up on my C skills, which I haven't used
since my Varsity days. I could just be doing something stupid. However,
everything links fine when I comment out the Style Tool thingies.

BTW Frank - thanks for the great library!

Louis.





-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 10 May 2004 10:09
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fam. Pool wrote:
> Hi,
>
> I'm quite new to the GDAL world and sofar its gone quite smoothly - but
> today I tried using OGR Style Tools and now I'm getting unresolved symbol
> errors when linking the libs. Its just looks as tho something was left out
> of the precompiled binaries. I'm going to try building the GDAL package
from
> scratch and see if the stubs the scripts generate solve the problem.
Still,
> I like doing things the easy way. If someone could verify the integrity of
> the pre-compiled Win32 binaries that would be swell.

Louis,

There are indeed some issues with linking against the DLL version of OGR
and using some of the style related classes.  I am a bit uncertain what
the exact problem is, but if you can list your link errors, and provide
a smallish example program that demonstrates the problem I will try and fix
it.  I have run into a similar problem with MapServer but never succeeded in
resolve it.

Note, the problem can be worked around by linking against static versions of
OGR but if possible i would prefer to just fix the base problem.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From jody at ifi.unizh.ch  Tue May  4 10:33:19 2004
From: jody at ifi.unizh.ch (jody@ifi.unizh.ch)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] spatial filter
Message-ID: <3433.213.144.131.83.1083681199.squirrel@bela.ifi.unizh.ch>

Hi
I'm currentl looking at GDAL/OGR and stumbled over
the concept of spatial filters (OGRLayer::GetSpatialFilter()).

Since spatial filtering isn't defined anywhere on the OGR pages,
and i only know spatial filters from image processing,
i wanted to ask you, what the meaning of spatial filters in this context is.

Is it perhaps a way to select features within some kind of boundary?

Thanks in advance
  Jody


+-------------------------------------------+
 Jody Weissmann
 Computer Science Department
 University Zurich
 Winterthurerstr 190
 CH-8057 Zurich
 Phone: +41(0)1 635 43 17
 eMail: jody@ifi.unizh.ch
+-------------------------------------------+


From pi_ml at sourcepole.com  Fri May  7 04:42:07 2004
From: pi_ml at sourcepole.com (Pirmin Kalberer)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] No features for vmap0
Message-ID: <200405071042.07733.pi_ml@sourcepole.com>

Hello,
We have the same problems Johannes Sander posted a few month ago: 
http://remotesensing.org/pipermail/gdal-dev/2003-November/001414.html

Some features of the noamer data are reported as empty:

ogrinfo -ro gltp:/vrf/mnt/wal/projects/gisdata/vmap0/v0noa/vmaplv0/noamer 
'coastl@bnd(*)_line'
INFO: Open of `gltp:/vrf/mnt/wal/projects/gisdata/vmap0/v0noa/vmaplv0/noamer'
using driver `OGDI' successful.

Layer name: coastl@bnd(*)_line
Geometry: Line String
Feature Count: 0
Layer SRS WKT:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6269"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4269"]]
id: Integer (10.0)
f_code: String (5.0)
acc: Integer (5.0)
exs: Integer (5.0)
tile_id: Integer (5.0)
edg_id: Integer (10.0)


Versions:
GDAL 1.2.0 with OGDI 3.1.2

For the open bug http://bugzilla.remotesensing.org/show_bug.cgi?id=372
regarding the eurnasia data, we patched ogrogdilayer.cpp to a default field 
width of 128.


Regards,
Pirmin

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

From marisap at telkomsa.net  Sat May  8 04:59:20 2004
From: marisap at telkomsa.net (Fam. Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems with loading JPEGs using GDAL
Message-ID: <BKEKKNEPIPMJLIAAMCLOAEACCAAA.marisap@telkomsa.net>

Hi all,

I've been having issues loading JPEG rasters via GDAL - GDAL reports that
the file format is not supported. All other file formats seem to work
though. I'm using the GDAL1.2.0 WIN32 Binaries - downloadable from
www.remotesensing.org/gdal/

Also the readme texts in the binaries' archive seem to be a bit outdated -
not that I'm complaining or anything ;D Personally, I think GDAL is the
greatest thing to happen in the GIS world since Galileo figured out the
Earth isn't the centre of the Universe. I mean think about it - a couple of
years ago there was no way one could read MapInfo vector files without
having to buy their very expensive engine. For countries like mine where the
Dollar to local currency ratio is pretty large, GDAL is a godsend.

Thanks Frank.

Regards,
Louis




From marisap at telkomsa.net  Mon May 10 17:28:30 2004
From: marisap at telkomsa.net (Fam. Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB95E0@mailman.san.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOKEAFCAAA.marisap@telkomsa.net>

Martin,

Could my problem be that I'm using VC6? I tried compiling from scratch
and the MSVCRT lib was hassling me all the way to suicidal depression.

VC7 would be hard for me to acquire tho...

Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Chapman, Martin
Sent: 10 May 2004 11:15
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Louis,

The windows version of gdal is awesome. Never had a problem that wasn't
created by me, and our apps make heavy use of GDAL and OGR.  I usually
download the daily .zip and build it using VC7 .Net from the command
line.  There are build instructions on the gdal website for windows that
are complete and easy to follow.

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 1:29 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Hi,

I'm quite new to the GDAL world and sofar its gone quite smoothly - but
today I tried using OGR Style Tools and now I'm getting unresolved
symbol errors when linking the libs. Its just looks as tho something was
left out of the precompiled binaries. I'm going to try building the GDAL
package from scratch and see if the stubs the scripts generate solve the
problem. Still, I like doing things the easy way. If someone could
verify the integrity of the pre-compiled Win32 binaries that would be
swell.

Thanks
Louis Pool.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon May 10 17:31:09 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable
 Win32 Binaries.
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOEEAFCAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOEEAFCAAA.marisap@telkomsa.net>
Message-ID: <409FF49D.5060404@pobox.com>

Fam. Pool wrote:
> I vainly tried removing the MSVCRT and LIBC default libs by adding
> /NODEFAULTLIB:LIBC and /NODEFAULTLIB:MSVCRT
> to LINKER_FLAGS in nmake.opt - but I guess you can imagine how many
> unresolved symbols I got then. Anyway, I'm using
> VC6 and I was wondering if that would cause any problems... I noticed your
> precompiled binaries specifically look for
> MSVCRT71.dll

Louis,

I will look into the asStyle issues though I can't promise when they will be
resolved.  The other problems you are encountering are due to linking object
files with conflicting build options together.  I gather you are linking
in a JasPer static library?  It is likely built with different options
that GDAL.  You will need to fiddle with stuff like the /MD flag in OPTFLAGS
in nmake.opt to match the options used for JasPer.

I would add that I have not every personally built with JasPer support on
windows.  I use the alternate Kakadu library for my public builds and
have only used JasPer on linux.

> I don't want to whine 'cause I really hate whiners, but I would really
> appreciate it if you could direct me to a site
> where I can download precompiled WIN32 Static Libs for GDAL and OGR. Or put
> one up if there aren't any - actually any help
> would be dearly appreciated!

Well, I don't normally like to distribute static libraries because they
introduce all sorts of extra C library and other dependencies, and make
linking more complex.  Folks run into problems just like you have, and they
can be very hard for me to resolve remotely.

If you need the style support you are faced with dealing with the static
build issues mostly on your own.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon May 10 17:32:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable
 Win32 Binaries.
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOKEAFCAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOKEAFCAAA.marisap@telkomsa.net>
Message-ID: <409FF4ED.7020000@pobox.com>

Fam. Pool wrote:
> Martin,
> 
> Could my problem be that I'm using VC6? I tried compiling from scratch
> and the MSVCRT lib was hassling me all the way to suicidal depression.
> 
> VC7 would be hard for me to acquire tho...

Louis,

I normally build with VC6 myself.  Unless some specific support library
(like JasPer?) requires VC7 you should be fine with VC6.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon May 10 17:44:33 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems with loading JPEGs using GDAL
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOAEACCAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOAEACCAAA.marisap@telkomsa.net>
Message-ID: <409FF7C1.80900@pobox.com>

Fam. Pool wrote:
> Hi all,
> 
> I've been having issues loading JPEG rasters via GDAL - GDAL reports that
> the file format is not supported. All other file formats seem to work
> though. I'm using the GDAL1.2.0 WIN32 Binaries - downloadable from
> www.remotesensing.org/gdal/
> 
> Also the readme texts in the binaries' archive seem to be a bit outdated -
> not that I'm complaining or anything ;D Personally, I think GDAL is the
> greatest thing to happen in the GIS world since Galileo figured out the
> Earth isn't the centre of the Universe. I mean think about it - a couple of
> years ago there was no way one could read MapInfo vector files without
> having to buy their very expensive engine. For countries like mine where the
> Dollar to local currency ratio is pretty large, GDAL is a godsend.
> 

Louis,

Could you provide a smallish JPEG file in a bug in bugzilla?

There may well be a problem with files being opened in text mode or something
in the libjpeg code.  This would cause lots of files to crap out on windows.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Mon May 10 18:16:03 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] spatial filter
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95E5@mailman.san.com>

Jody,

A Spatial filter in the OGR sense is related to an area of interest on
the planet earth.  In other words it a geographic area on the earth that
is defined by a polygon using lat/lon or projected x/y coordinates.

Martin

-----Original Message-----
From: jody@ifi.unizh.ch [mailto:jody@ifi.unizh.ch] 
Sent: Tuesday, May 04, 2004 8:33 AM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] spatial filter


Hi
I'm currentl looking at GDAL/OGR and stumbled over
the concept of spatial filters (OGRLayer::GetSpatialFilter()).

Since spatial filtering isn't defined anywhere on the OGR pages, and i
only know spatial filters from image processing, i wanted to ask you,
what the meaning of spatial filters in this context is.

Is it perhaps a way to select features within some kind of boundary?

Thanks in advance
  Jody


+-------------------------------------------+
 Jody Weissmann
 Computer Science Department
 University Zurich
 Winterthurerstr 190
 CH-8057 Zurich
 Phone: +41(0)1 635 43 17
 eMail: jody@ifi.unizh.ch
+-------------------------------------------+

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Mon May 10 18:28:07 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] jpeg2000 memory management??????
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AF7@mailman.san.com>

Bylahalli,

Jasper decompresses the whole image when it opens it.  Therefore, large
jp2 files have large memory requirements in Jasper.  ERMapper and Kakadu
handle jp2 files much more efficiently, but the ERMapper version screams
compared to Kakadu (ermapper compression sdk only runs on mac and
windows though, decompression can happen anywhere).  I think they are
trying to fix Jasper to manage memory better but not sure when this will
happen.  I imagine it would require a re-write for them to make it
better.  See www.ermapper.com for a trial version of there SDK.  I
talked to a guy there (ERMapper) this morning and he says the are
releasing there compression technology (for ecw and jp2) as open source
next month. It uses enhanced wavelet compression for J2K so it is way
faster and smaller than Kakadu outout (20:1), although, I currently use
Kakadu and it's very good technology as well.

Martin

-----Original Message-----
From: Bylahalli Chandrashekara Prasad, Noida
[mailto:bylahallip@noida.hcltech.com] 
Sent: Friday, April 30, 2004 3:38 AM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] jpeg2000 memory management??????


Hi,
i am working on JASPERE code looking for memory efficieny, i found  a
memory leakeage in the code and also a bug in quantization with regards,
prasad


Disclaimer: 

This message and any attachment(s) contained here are information that
is confidential,proprietary to HCL Technologies and its customers,
privileged or otherwise protected by law.The information is solely
intended for the individual or the entity it is addressed to. If you are
not the intended recipient of this message, you are not authorized to
read, forward, print,retain, copy or disseminate this message or any
part of it. If you have received this e-mail in error, please notify the
sender immediately by return e-mail and delete it from your computer.


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Mon May 10 18:29:16 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95E7@mailman.san.com>

Louis,

I will send you a VC++ project with all the options set correctly.  I
will send it later when I get back to my desk.  

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 3:29 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Martin,

Could my problem be that I'm using VC6? I tried compiling from scratch
and the MSVCRT lib was hassling me all the way to suicidal depression.

VC7 would be hard for me to acquire tho...

Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Chapman, Martin
Sent: 10 May 2004 11:15
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Louis,

The windows version of gdal is awesome. Never had a problem that wasn't
created by me, and our apps make heavy use of GDAL and OGR.  I usually
download the daily .zip and build it using VC7 .Net from the command
line.  There are build instructions on the gdal website for windows that
are complete and easy to follow.

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 1:29 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Hi,

I'm quite new to the GDAL world and sofar its gone quite smoothly - but
today I tried using OGR Style Tools and now I'm getting unresolved
symbol errors when linking the libs. Its just looks as tho something was
left out of the precompiled binaries. I'm going to try building the GDAL
package from scratch and see if the stubs the scripts generate solve the
problem. Still, I like doing things the easy way. If someone could
verify the integrity of the pre-compiled Win32 binaries that would be
swell.

Thanks
Louis Pool.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From ben at vterrain.org  Mon May 10 18:02:03 2004
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems with loading JPEGs using GDAL
In-Reply-To: <409FF7C1.80900@pobox.com>
Message-ID: <001001c436da$6dc2a620$f400fe0a@TOPP2>

The 'GDAL1.2.0 WIN32 Binaries' were originally not configured for JPEG
support; i know because i built them and host them.

I noticed this a couple weeks ago, and re-built GDAL with JPEG support
enabled.  It was very hard; as soon as i linked to libjpeg.lib then a host
of nasty crashes occurred with interdependencies in the various C stdlib
versions.

It took several days, but i finally solved the problems, in part by
re-building libjpeg myself.

The file 'gdal-120-ntbin.zip' currently hosted is dated 2004/4/28 and
includes JPEG support.  If JPEGs are not working for you, it's possible that
you have the older binaries, just grab the latest.

-Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Monday, May 10, 2004 5:45 PM
> 
> Fam. Pool wrote:
> > Hi all,
> > 
> > I've been having issues loading JPEG rasters via GDAL - 
> > GDAL reports that the file format is not supported. All
> > other file formats seem to work though. I'm using the
> > GDAL1.2.0 WIN32 Binaries - downloadable from
> > www.remotesensing.org/gdal/
> 
> Louis,
> 
> Could you provide a smallish JPEG file in a bug in bugzilla?
> 
> There may well be a problem with files being opened in text 
> mode or something in the libjpeg code.  This would cause lots
> of files to crap out on windows.


From MChapman at sanz.com  Mon May 10 18:32:12 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95E8@mailman.san.com>

Louis,

Try using the build instructions (Windows) from the command line at
http://www.remotesensing.org/gdal/gdal_building.html first.  You don't
need to use the VC++ IDE.  Just the compiler from the command line works
great every time for me.  I wouldn't use the IDE, to much other stuff
needed that isn't nessesary from the command line.  Let me know if that
works.  Then I will show you how to link the gdal_i.lib to you
application in the VC++ IDE.

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 3:29 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Martin,

Could my problem be that I'm using VC6? I tried compiling from scratch
and the MSVCRT lib was hassling me all the way to suicidal depression.

VC7 would be hard for me to acquire tho...

Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Chapman, Martin
Sent: 10 May 2004 11:15
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Louis,

The windows version of gdal is awesome. Never had a problem that wasn't
created by me, and our apps make heavy use of GDAL and OGR.  I usually
download the daily .zip and build it using VC7 .Net from the command
line.  There are build instructions on the gdal website for windows that
are complete and easy to follow.

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 1:29 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Hi,

I'm quite new to the GDAL world and sofar its gone quite smoothly - but
today I tried using OGR Style Tools and now I'm getting unresolved
symbol errors when linking the libs. Its just looks as tho something was
left out of the precompiled binaries. I'm going to try building the GDAL
package from scratch and see if the stubs the scripts generate solve the
problem. Still, I like doing things the easy way. If someone could
verify the integrity of the pre-compiled Win32 binaries that would be
swell.

Thanks
Louis Pool.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Mon May 10 18:34:36 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems with loading JPEGs using GDAL
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95E9@mailman.san.com>

Run gdalinfo.exe --formats from the gdal/apps directly and see if it
lists JPEG as a supported type.

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Saturday, May 08, 2004 2:59 AM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Problems with loading JPEGs using GDAL


Hi all,

I've been having issues loading JPEG rasters via GDAL - GDAL reports
that the file format is not supported. All other file formats seem to
work though. I'm using the GDAL1.2.0 WIN32 Binaries - downloadable from
www.remotesensing.org/gdal/

Also the readme texts in the binaries' archive seem to be a bit outdated
- not that I'm complaining or anything ;D Personally, I think GDAL is
the greatest thing to happen in the GIS world since Galileo figured out
the Earth isn't the centre of the Universe. I mean think about it - a
couple of years ago there was no way one could read MapInfo vector files
without having to buy their very expensive engine. For countries like
mine where the Dollar to local currency ratio is pretty large, GDAL is a
godsend.

Thanks Frank.

Regards,
Louis



_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Mon May 10 18:35:55 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95EA@mailman.san.com>

Frank and Louis,

I think the problem is Louis is using the IDE to compile the project.
He should just use the makefile from the command line.  That works every
time.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, May 10, 2004 3:32 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fam. Pool wrote:
> Martin,
> 
> Could my problem be that I'm using VC6? I tried compiling from scratch

> and the MSVCRT lib was hassling me all the way to suicidal depression.
> 
> VC7 would be hard for me to acquire tho...

Louis,

I normally build with VC6 myself.  Unless some specific support library
(like JasPer?) requires VC7 you should be fine with VC6.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Mon May 10 18:39:43 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems with loading JPEGs using GDAL
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95EB@mailman.san.com>

That is good to know...thanks for fixing that Ben.

Martin

-----Original Message-----
From: Ben Discoe [mailto:ben@vterrain.org] 
Sent: Monday, May 10, 2004 4:02 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems with loading JPEGs using GDAL



The 'GDAL1.2.0 WIN32 Binaries' were originally not configured for JPEG
support; i know because i built them and host them.

I noticed this a couple weeks ago, and re-built GDAL with JPEG support
enabled.  It was very hard; as soon as i linked to libjpeg.lib then a
host of nasty crashes occurred with interdependencies in the various C
stdlib versions.

It took several days, but i finally solved the problems, in part by
re-building libjpeg myself.

The file 'gdal-120-ntbin.zip' currently hosted is dated 2004/4/28 and
includes JPEG support.  If JPEGs are not working for you, it's possible
that you have the older binaries, just grab the latest.

-Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Monday, May 10, 2004 5:45 PM
> 
> Fam. Pool wrote:
> > Hi all,
> > 
> > I've been having issues loading JPEG rasters via GDAL -
> > GDAL reports that the file format is not supported. All
> > other file formats seem to work though. I'm using the
> > GDAL1.2.0 WIN32 Binaries - downloadable from
> > www.remotesensing.org/gdal/
> 
> Louis,
> 
> Could you provide a smallish JPEG file in a bug in bugzilla?
> 
> There may well be a problem with files being opened in text
> mode or something in the libjpeg code.  This would cause lots
> of files to crap out on windows.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Mon May 10 18:51:13 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AF6@mailman.san.com>

Louis,

I'm not sure about this, but it may be the order in which your vc++
platform sdk's are linked into your app.  I've had this problem with
other apps before.  You need to have them in the right order or you will
get this problem.  Goto tools->options->projects->vc++ directories and
they should be linked in somewhat the following order:

$(VCInstallDir)lib
$(VCInstallDir)atlmfc\lib
$(VCInstallDir)PlatformSDK\lib\prerelease
$(VCInstallDir)PlatformSDK\lib
$(FrameworkSDKDir)lib

Although this will be machine independent depending on what sdk's you
have installed.

Just a thought...

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 3:25 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Sorry I'm bothering you so much with this Frank -

I tried compiling GDAL from scratch but I got linking problems again.
These are my woes -


Microsoft (R) Library Manager Version 6.00.8168
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

        link /dll /debug /INCLUDE:_OCTNewCoordinateTransformation
/INCLUDE:_OGRRegisterAll  /INCLUDE:_OGRFeatureStylePu
ller  /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods
/INCLUDE:_OGR_G_GetPointCount /INCLUDE:_GDALSimpleImageW arp
/INCLUDE:_GDALSuggestedWarpOutput  /INCLUDE:_GDALGCPTransform
/INCLUDE:_GDALComputeMedianCutPCT  /INCLUDE:_GDALDit herRGB2PCT
port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj
ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib   D:\Libraries\Xer
ces/lib/xerces-c_2.lib   odbc32.lib
D:\Libraries\Jasper\src\msvc\Win32_Release\libjasper.lib
/out:gdal1
2.dll /implib:gdal_i.lib
Microsoft (R) Incremental Linker Version 6.00.8168
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

LIBC.lib(crt0dat.obj) : error LNK2005: _exit already defined in
MSVCRT.lib(MSVCRT.dll)
LIBC.lib(crt0init.obj) : error LNK2005: ___xc_z already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xc_a already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xi_z already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xi_a already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(mbctype.obj) : error LNK2005: __getmbcp already defined in
MSVCRT.lib(MSVCRT.dll)
MSVCRT.lib(MSVCRT.dll) : error LNK2005: __strdup already defined in
LIBC.lib(strdup.obj)
MSVCRT.lib(MSVCRT.dll) : error LNK2005: __unlink already defined in
LIBC.lib(unlink.obj)
LIBC.lib(crt0dat.obj) : warning LNK4006: _exit already defined in
MSVCRT.lib(MSVCRT.dll); second definition ignored
LIBC.lib(crt0init.obj) : warning LNK4006: ___xc_z already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xc_a already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xi_z already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xi_a already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(mbctype.obj) : warning LNK4006: __getmbcp already defined in
MSVCRT.lib(MSVCRT.dll); second definition ignored
MSVCRT.lib(MSVCRT.dll) : warning LNK4006: __strdup already defined in
LIBC.lib(strdup.obj); second definition ignored
MSVCRT.lib(MSVCRT.dll) : warning LNK4006: __unlink already defined in
LIBC.lib(unlink.obj); second definition ignored
   Creating library gdal_i.lib and object gdal_i.exp
LINK : warning LNK4098: defaultlib "MSVCRT" conflicts with use of other
libs; use /NODEFAULTLIB:library LINK : warning LNK4098: defaultlib
"LIBC" conflicts with use of other libs; use /NODEFAULTLIB:library
LIBC.lib(crt0.obj) : error LNK2001: unresolved external symbol _main
gdal12.dll : fatal error LNK1120: 1 unresolved externals NMAKE : fatal
error U1077: 'link' : return code '0x460' Stop.


I vainly tried removing the MSVCRT and LIBC default libs by adding
/NODEFAULTLIB:LIBC and /NODEFAULTLIB:MSVCRT to LINKER_FLAGS in nmake.opt
- but I guess you can imagine how many unresolved symbols I got then.
Anyway, I'm using VC6 and I was wondering if that would cause any
problems... I noticed your precompiled binaries specifically look for
MSVCRT71.dll

I don't want to whine 'cause I really hate whiners, but I would really
appreciate it if you could direct me to a site where I can download
precompiled WIN32 Static Libs for GDAL and OGR. Or put one up if there
aren't any - actually any help would be dearly appreciated!

Thanks in advance,
Louis.


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Fam. Pool
Sent: 10 May 2004 10:59
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fo Sheezy -

This is a simplified version of the code - note that I'm using a MapInfo
Data Source, a directory with several .TAB, .DAT, .MAP etc files (so in
GDAL
talk: a couple 'o Layers).

bool cVectorLoader::loadOGRVector(char* sVectorMap)
{
  //DataSet
  OGRDataSource* poDataSet = (OGRDataSource*)
OGRSFDriverRegistrar::Open(sVectorMap, false);
  if (poDataSet == NULL)
  {
    return false;
  }

  const char* sName = poDataSet->GetName();
  int iNrOfLayers = poDataSet->GetLayerCount();

  cout << endl << "<OGR> Report for Vector Dataset " << sName << endl;
  cout << "Dataset has " << iNrOfLayers << " layer(s)." << endl;

  //Layers
  for (int i=0; i < iNrOfLayers; i++)
  {
    cout << "For layer " << i+1 << endl;

    OGRLayer* poLayer = (OGRLayer*) poDataSet->GetLayer(i);
    if (poLayer != NULL)
    {
      //Features
      int iNrOfFeatures = poLayer->GetFeatureCount(true);
      OGRFeature* poFeature = (OGRFeature*) poLayer->GetNextFeature();

      cout << "Layer has " << iNrOfFeatures << " features" << endl;

      int j=1;
      while (poFeature != NULL)
      {
        //Style
        cout << "Feature " << j << " with ID " << poFeature->GetFID()
             << " and Style String " << poFeature->GetStyleString () <<
endl;

        OGRStyleTable oStyleTable;
        OGRStyleTool* poStyleTool;
        OGRStyleMgr*  poStyleMgr = new OGRStyleMgr(&oStyleTable);

        poStyleMgr->GetStyleString(poFeature);
        for (int k=0; poStyleMgr->GetPartCount(); k++)
        {
           poStyleTool = poStyleMgr->GetPart(k);
           switch(poStyleTool->GetType())
           {
             case OGRSTCNone: cout << "Style = None" << endl;
              break;
             case OGRSTCPen: cout << "Style = Pen" << endl;
              break;
             case OGRSTCBrush: cout << "Style = Brush" << endl;
              break;
             case OGRSTCSymbol: cout << "Style = Symbol" << endl;
              break;
             case OGRSTCLabel: cout << "Style = Label" << endl;
              break;
           }
        }

        ...

        poFeature = (OGRFeature*) poLayer->GetNextFeature();
        j++;
      }
    }
  }
  cout << endl << "<OGR> End of Report" << endl;

  //Clean up
  delete poDataSet;

  //Function completed successfully
  return true;
}

Compilation is all good. When linking I get ze following errors.

Linking...
   Creating library Debug/MapViewer.lib and object Debug/MapViewer.exp
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol"
(?asStyleSymbol@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol"
(?asStyleSymbol@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol"
(?asStyleSymbol@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
Debug/MapViewer.exe : fatal error LNK1120: 4 unresolved externals Error
executing link.exe.

I'm using gdal_i.lib => gdal12.dll, the ones from the downloadable
binaries. I should add that for the past three yrs I've been a Java Boy
and for the last two weeks I've been brushing up on my C skills, which I
haven't used since my Varsity days. I could just be doing something
stupid. However, everything links fine when I comment out the Style Tool
thingies.

BTW Frank - thanks for the great library!

Louis.





-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 10 May 2004 10:09
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fam. Pool wrote:
> Hi,
>
> I'm quite new to the GDAL world and sofar its gone quite smoothly - 
> but today I tried using OGR Style Tools and now I'm getting unresolved

> symbol errors when linking the libs. Its just looks as tho something 
> was left out of the precompiled binaries. I'm going to try building 
> the GDAL package
from
> scratch and see if the stubs the scripts generate solve the problem.
Still,
> I like doing things the easy way. If someone could verify the 
> integrity of the pre-compiled Win32 binaries that would be swell.

Louis,

There are indeed some issues with linking against the DLL version of OGR
and using some of the style related classes.  I am a bit uncertain what
the exact problem is, but if you can list your link errors, and provide
a smallish example program that demonstrates the problem I will try and
fix it.  I have run into a similar problem with MapServer but never
succeeded in resolve it.

Note, the problem can be worked around by linking against static
versions of OGR but if possible i would prefer to just fix the base
problem.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+----
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From neteler at itc.it  Mon May 10 19:19:35 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] ArcGrid .adf format compatibility.
In-Reply-To: <c6tn34$erg$1@sea.gmane.org>
References: <c6tn34$erg$1@sea.gmane.org>
Message-ID: <20040510231935.GA17441@thuille.itc.it>

On Fri, Apr 30, 2004 at 08:17:05AM -0600, jason wrote:
> We have some arcgrid .adf files from geocomm.com. I am not very familiar
> with this format but it does pull up fine in ArcMap 8.3. Below are the
> details of the issues I have run into. I was wondering if anyone knows
> what I may have wrong. It would seem I have the arc grid support. Thanks.
> 
> [root@localhost DEM11041]# gdalinfo --formats
> Supported Formats:
>   VRT: Virtual Raster
>   GTiff: GeoTIFF
>   NITF: National Imagery Transmission Format
>   HFA: Erdas Imagine Images (.img)
>   SAR_CEOS: CEOS SAR Image
>   CEOS: CEOS Image
>   ELAS: ELAS
>   AIG: Arc/Info Binary Grid
>   AAIGrid: Arc/Info ASCII Grid
>   SDTS: SDTS Raster
>   DTED: DTED Elevation Raster
>   PNG: Portable Network Graphics
>   JPEG: JPEG JFIF
>   MEM: In Memory Raster
>   JDEM: Japanese DEM (.mem)
>   GIF: Graphics Interchange Format (.gif)
>   ESAT: Envisat Image Format
>   BSB: Maptech BSB Nautical Charts
>   XPM: X11 PixMap Format
>   BMP: MS Windows Device Independent Bitmap
>   PNM: Portable Pixmap Format (netpbm)
>   DOQ1: USGS DOQ (Old Style)
>   DOQ2: USGS DOQ (New Style)
>   ENVI: ENVI .hdr Labelled
>   EHdr: ESRI .hdr Labelled
>   PAux: PCI .aux Labelled
>   MFF: Atlantis MFF Raster
>   MFF2: Atlantis MFF2 (HKV) Raster
>   FujiBAS: Fuji BAS Scanner Image
>   GSC: GSC Geogrid
>   FAST: EOSAT FAST Format
>   L1B: NOAA Polar Orbiter Level 1b Data Set
>   FIT: FIT Image
>   USGSDEM: USGS Optional ASCII DEM
>   GXF: GeoSoft Grid Exchange Format
> 
> [root@localhost DEM11041]# gdalinfo W001001.ADF 
> ERROR 4: `W001001.ADF' not recognised as a supported file format.
> 
> GDALOpen failed - 4
> `W001001.ADF' not recognised as a supported file format.


Please try

 gdalinfo ./W001001.ADF

This is fixed in GDAL 1.2.0. If it doesn't work, there may
be a bug with ADF written in caps?

Just an idea,

 Markus

From warmerdam at pobox.com  Mon May 10 20:55:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable
 Win32 Binaries.
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOKEAECAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOKEAECAAA.marisap@telkomsa.net>
Message-ID: <40A0246C.6000404@pobox.com>

Fam. Pool wrote:
> Linking...
>    Creating library Debug/MapViewer.lib and object Debug/MapViewer.exp
> cMapVisual.obj : error LNK2001: unresolved external symbol "struct
> ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
> cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
> ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
> MapViewer.obj : error LNK2001: unresolved external symbol "struct

Louis,

I have reorganized the code using the asStyle*[] arrays in GDAL's CVS tree,
and this problem should no longer occur if you work against the latest GDAL
(the source snapshot to made later tonight).

I will try to prepare an OpenEV_FW release with all the latest libraries
in the next few days.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From marisap at telkomsa.net  Tue May 11 01:56:35 2004
From: marisap at telkomsa.net (Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
In-Reply-To: <40A0246C.6000404@pobox.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOIEAJCAAA.marisap@telkomsa.net>

Thanks, thanks and thanks. I'm overwhelmed by the amount of support I've
received in just a few hours of posting my problems - thanks Frank, Martin
and Ben and thanks some more. I'll keep an eye out for those libraries -
I'm still battling to get GDAL compiled on my machine but I'm learning a lot
in the process too.

Regards,
Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 11 May 2004 02:55
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fam. Pool wrote:
> Linking...
>    Creating library Debug/MapViewer.lib and object Debug/MapViewer.exp
> cMapVisual.obj : error LNK2001: unresolved external symbol "struct
> ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
> cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
> ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
> MapViewer.obj : error LNK2001: unresolved external symbol "struct

Louis,

I have reorganized the code using the asStyle*[] arrays in GDAL's CVS tree,
and this problem should no longer occur if you work against the latest GDAL
(the source snapshot to made later tonight).

I will try to prepare an OpenEV_FW release with all the latest libraries
in the next few days.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From marisap at telkomsa.net  Tue May 11 01:56:38 2004
From: marisap at telkomsa.net (Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems with loading JPEGs using GDAL
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB95EB@mailman.san.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOMEAJCAAA.marisap@telkomsa.net>

Yeah, thanks Ben!

Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Chapman, Martin
Sent: 11 May 2004 12:40
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems with loading JPEGs using GDAL


That is good to know...thanks for fixing that Ben.

Martin

-----Original Message-----
From: Ben Discoe [mailto:ben@vterrain.org] 
Sent: Monday, May 10, 2004 4:02 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems with loading JPEGs using GDAL



The 'GDAL1.2.0 WIN32 Binaries' were originally not configured for JPEG
support; i know because i built them and host them.

I noticed this a couple weeks ago, and re-built GDAL with JPEG support
enabled.  It was very hard; as soon as i linked to libjpeg.lib then a
host of nasty crashes occurred with interdependencies in the various C
stdlib versions.

It took several days, but i finally solved the problems, in part by
re-building libjpeg myself.

The file 'gdal-120-ntbin.zip' currently hosted is dated 2004/4/28 and
includes JPEG support.  If JPEGs are not working for you, it's possible
that you have the older binaries, just grab the latest.

-Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Monday, May 10, 2004 5:45 PM
> 
> Fam. Pool wrote:
> > Hi all,
> > 
> > I've been having issues loading JPEG rasters via GDAL -
> > GDAL reports that the file format is not supported. All
> > other file formats seem to work though. I'm using the
> > GDAL1.2.0 WIN32 Binaries - downloadable from
> > www.remotesensing.org/gdal/
> 
> Louis,
> 
> Could you provide a smallish JPEG file in a bug in bugzilla?
> 
> There may well be a problem with files being opened in text
> mode or something in the libjpeg code.  This would cause lots
> of files to crap out on windows.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From marisap at telkomsa.net  Tue May 11 01:56:36 2004
From: marisap at telkomsa.net (Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63AF6@mailman.san.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOKEAJCAAA.marisap@telkomsa.net>

Martin,

I'll try it out. Thanks.

Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Chapman, Martin
Sent: 11 May 2004 12:51
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Louis,

I'm not sure about this, but it may be the order in which your vc++
platform sdk's are linked into your app.  I've had this problem with
other apps before.  You need to have them in the right order or you will
get this problem.  Goto tools->options->projects->vc++ directories and
they should be linked in somewhat the following order:

$(VCInstallDir)lib
$(VCInstallDir)atlmfc\lib
$(VCInstallDir)PlatformSDK\lib\prerelease
$(VCInstallDir)PlatformSDK\lib
$(FrameworkSDKDir)lib

Although this will be machine independent depending on what sdk's you
have installed.

Just a thought...

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 3:25 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Sorry I'm bothering you so much with this Frank -

I tried compiling GDAL from scratch but I got linking problems again.
These are my woes -


Microsoft (R) Library Manager Version 6.00.8168
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

        link /dll /debug /INCLUDE:_OCTNewCoordinateTransformation
/INCLUDE:_OGRRegisterAll  /INCLUDE:_OGRFeatureStylePu
ller  /INCLUDE:_OSRValidate  /INCLUDE:_OPTGetProjectionMethods
/INCLUDE:_OGR_G_GetPointCount /INCLUDE:_GDALSimpleImageW arp
/INCLUDE:_GDALSuggestedWarpOutput  /INCLUDE:_GDALGCPTransform
/INCLUDE:_GDALComputeMedianCutPCT  /INCLUDE:_GDALDit herRGB2PCT
port\*.obj gcore\*.obj alg\*.obj frmts\o\*.obj
ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib   D:\Libraries\Xer
ces/lib/xerces-c_2.lib   odbc32.lib
D:\Libraries\Jasper\src\msvc\Win32_Release\libjasper.lib
/out:gdal1
2.dll /implib:gdal_i.lib
Microsoft (R) Incremental Linker Version 6.00.8168
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.

LIBC.lib(crt0dat.obj) : error LNK2005: _exit already defined in
MSVCRT.lib(MSVCRT.dll)
LIBC.lib(crt0init.obj) : error LNK2005: ___xc_z already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xc_a already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xi_z already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(crt0init.obj) : error LNK2005: ___xi_a already defined in
MSVCRT.lib(cinitexe.obj)
LIBC.lib(mbctype.obj) : error LNK2005: __getmbcp already defined in
MSVCRT.lib(MSVCRT.dll)
MSVCRT.lib(MSVCRT.dll) : error LNK2005: __strdup already defined in
LIBC.lib(strdup.obj)
MSVCRT.lib(MSVCRT.dll) : error LNK2005: __unlink already defined in
LIBC.lib(unlink.obj)
LIBC.lib(crt0dat.obj) : warning LNK4006: _exit already defined in
MSVCRT.lib(MSVCRT.dll); second definition ignored
LIBC.lib(crt0init.obj) : warning LNK4006: ___xc_z already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xc_a already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xi_z already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(crt0init.obj) : warning LNK4006: ___xi_a already defined in
MSVCRT.lib(cinitexe.obj); second definition ignored

LIBC.lib(mbctype.obj) : warning LNK4006: __getmbcp already defined in
MSVCRT.lib(MSVCRT.dll); second definition ignored
MSVCRT.lib(MSVCRT.dll) : warning LNK4006: __strdup already defined in
LIBC.lib(strdup.obj); second definition ignored
MSVCRT.lib(MSVCRT.dll) : warning LNK4006: __unlink already defined in
LIBC.lib(unlink.obj); second definition ignored
   Creating library gdal_i.lib and object gdal_i.exp
LINK : warning LNK4098: defaultlib "MSVCRT" conflicts with use of other
libs; use /NODEFAULTLIB:library LINK : warning LNK4098: defaultlib
"LIBC" conflicts with use of other libs; use /NODEFAULTLIB:library
LIBC.lib(crt0.obj) : error LNK2001: unresolved external symbol _main
gdal12.dll : fatal error LNK1120: 1 unresolved externals NMAKE : fatal
error U1077: 'link' : return code '0x460' Stop.


I vainly tried removing the MSVCRT and LIBC default libs by adding
/NODEFAULTLIB:LIBC and /NODEFAULTLIB:MSVCRT to LINKER_FLAGS in nmake.opt
- but I guess you can imagine how many unresolved symbols I got then.
Anyway, I'm using VC6 and I was wondering if that would cause any
problems... I noticed your precompiled binaries specifically look for
MSVCRT71.dll

I don't want to whine 'cause I really hate whiners, but I would really
appreciate it if you could direct me to a site where I can download
precompiled WIN32 Static Libs for GDAL and OGR. Or put one up if there
aren't any - actually any help would be dearly appreciated!

Thanks in advance,
Louis.


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Fam. Pool
Sent: 10 May 2004 10:59
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fo Sheezy -

This is a simplified version of the code - note that I'm using a MapInfo
Data Source, a directory with several .TAB, .DAT, .MAP etc files (so in
GDAL
talk: a couple 'o Layers).

bool cVectorLoader::loadOGRVector(char* sVectorMap)
{
  //DataSet
  OGRDataSource* poDataSet = (OGRDataSource*)
OGRSFDriverRegistrar::Open(sVectorMap, false);
  if (poDataSet == NULL)
  {
    return false;
  }

  const char* sName = poDataSet->GetName();
  int iNrOfLayers = poDataSet->GetLayerCount();

  cout << endl << "<OGR> Report for Vector Dataset " << sName << endl;
  cout << "Dataset has " << iNrOfLayers << " layer(s)." << endl;

  //Layers
  for (int i=0; i < iNrOfLayers; i++)
  {
    cout << "For layer " << i+1 << endl;

    OGRLayer* poLayer = (OGRLayer*) poDataSet->GetLayer(i);
    if (poLayer != NULL)
    {
      //Features
      int iNrOfFeatures = poLayer->GetFeatureCount(true);
      OGRFeature* poFeature = (OGRFeature*) poLayer->GetNextFeature();

      cout << "Layer has " << iNrOfFeatures << " features" << endl;

      int j=1;
      while (poFeature != NULL)
      {
        //Style
        cout << "Feature " << j << " with ID " << poFeature->GetFID()
             << " and Style String " << poFeature->GetStyleString () <<
endl;

        OGRStyleTable oStyleTable;
        OGRStyleTool* poStyleTool;
        OGRStyleMgr*  poStyleMgr = new OGRStyleMgr(&oStyleTable);

        poStyleMgr->GetStyleString(poFeature);
        for (int k=0; poStyleMgr->GetPartCount(); k++)
        {
           poStyleTool = poStyleMgr->GetPart(k);
           switch(poStyleTool->GetType())
           {
             case OGRSTCNone: cout << "Style = None" << endl;
              break;
             case OGRSTCPen: cout << "Style = Pen" << endl;
              break;
             case OGRSTCBrush: cout << "Style = Brush" << endl;
              break;
             case OGRSTCSymbol: cout << "Style = Symbol" << endl;
              break;
             case OGRSTCLabel: cout << "Style = Label" << endl;
              break;
           }
        }

        ...

        poFeature = (OGRFeature*) poLayer->GetNextFeature();
        j++;
      }
    }
  }
  cout << endl << "<OGR> End of Report" << endl;

  //Clean up
  delete poDataSet;

  //Function completed successfully
  return true;
}

Compilation is all good. When linking I get ze following errors.

Linking...
   Creating library Debug/MapViewer.lib and object Debug/MapViewer.exp
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStylePen" (?asStylePen@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleBrush" (?asStyleBrush@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol"
(?asStyleSymbol@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol"
(?asStyleSymbol@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleSymbol"
(?asStyleSymbol@@3PAUogr_style_param@@A)
cMapVisual.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
cVectorLoader.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
MapViewer.obj : error LNK2001: unresolved external symbol "struct
ogr_style_param *  asStyleLabel" (?asStyleLabel@@3PAUogr_style_param@@A)
Debug/MapViewer.exe : fatal error LNK1120: 4 unresolved externals Error
executing link.exe.

I'm using gdal_i.lib => gdal12.dll, the ones from the downloadable
binaries. I should add that for the past three yrs I've been a Java Boy
and for the last two weeks I've been brushing up on my C skills, which I
haven't used since my Varsity days. I could just be doing something
stupid. However, everything links fine when I comment out the Style Tool
thingies.

BTW Frank - thanks for the great library!

Louis.





-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 10 May 2004 10:09
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fam. Pool wrote:
> Hi,
>
> I'm quite new to the GDAL world and sofar its gone quite smoothly - 
> but today I tried using OGR Style Tools and now I'm getting unresolved

> symbol errors when linking the libs. Its just looks as tho something 
> was left out of the precompiled binaries. I'm going to try building 
> the GDAL package
from
> scratch and see if the stubs the scripts generate solve the problem.
Still,
> I like doing things the easy way. If someone could verify the 
> integrity of the pre-compiled Win32 binaries that would be swell.

Louis,

There are indeed some issues with linking against the DLL version of OGR
and using some of the style related classes.  I am a bit uncertain what
the exact problem is, but if you can list your link errors, and provide
a smallish example program that demonstrates the problem I will try and
fix it.  I have run into a similar problem with MapServer but never
succeeded in resolve it.

Note, the problem can be worked around by linking against static
versions of OGR but if possible i would prefer to just fix the base
problem.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+----
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From marisap at telkomsa.net  Tue May 11 01:56:39 2004
From: marisap at telkomsa.net (Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB95E7@mailman.san.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOOEAJCAAA.marisap@telkomsa.net>

Ok Martin,

I'd appreciate that.

Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Chapman, Martin
Sent: 11 May 2004 12:29
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Louis,

I will send you a VC++ project with all the options set correctly.  I
will send it later when I get back to my desk.  

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 3:29 PM
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Martin,

Could my problem be that I'm using VC6? I tried compiling from scratch
and the MSVCRT lib was hassling me all the way to suicidal depression.

VC7 would be hard for me to acquire tho...

Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Chapman, Martin
Sent: 10 May 2004 11:15
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Louis,

The windows version of gdal is awesome. Never had a problem that wasn't
created by me, and our apps make heavy use of GDAL and OGR.  I usually
download the daily .zip and build it using VC7 .Net from the command
line.  There are build instructions on the gdal website for windows that
are complete and easy to follow.

Martin

-----Original Message-----
From: Fam. Pool [mailto:marisap@telkomsa.net] 
Sent: Monday, May 10, 2004 1:29 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Hi,

I'm quite new to the GDAL world and sofar its gone quite smoothly - but
today I tried using OGR Style Tools and now I'm getting unresolved
symbol errors when linking the libs. Its just looks as tho something was
left out of the precompiled binaries. I'm going to try building the GDAL
package from scratch and see if the stubs the scripts generate solve the
problem. Still, I like doing things the easy way. If someone could
verify the integrity of the pre-compiled Win32 binaries that would be
swell.

Thanks
Louis Pool.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From marisap at telkomsa.net  Tue May 11 02:00:49 2004
From: marisap at telkomsa.net (Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems Linking with Stubs in the precompiled downloadable Win32 Binaries.
In-Reply-To: <409FF49D.5060404@pobox.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOCEAKCAAA.marisap@telkomsa.net>

Frank,

Righto, I am indeed using Jasper Static Libs, built with the workspace
supplied with the Jasper source - is there a way to compile this to a
shared dll instead of libs? The workspace didn't seem to have that
set up.

But I'll try matching the options.

I understand that you don't want to put Static Libs up for download,
but like I said - any help would be appreciated - and mentioning that
the Jasper Static Lib might be the problem is probably the help I need.

Thanks,
Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 10 May 2004 11:31
To: gdal-dev@remotesensing.org; marisap@telkomsa.net
Subject: Re: [Gdal-dev] Problems Linking with Stubs in the precompiled
downloadable Win32 Binaries.


Fam. Pool wrote:
> I vainly tried removing the MSVCRT and LIBC default libs by adding
> /NODEFAULTLIB:LIBC and /NODEFAULTLIB:MSVCRT
> to LINKER_FLAGS in nmake.opt - but I guess you can imagine how many
> unresolved symbols I got then. Anyway, I'm using
> VC6 and I was wondering if that would cause any problems... I noticed your
> precompiled binaries specifically look for
> MSVCRT71.dll

Louis,

I will look into the asStyle issues though I can't promise when they will be
resolved.  The other problems you are encountering are due to linking object
files with conflicting build options together.  I gather you are linking
in a JasPer static library?  It is likely built with different options
that GDAL.  You will need to fiddle with stuff like the /MD flag in OPTFLAGS
in nmake.opt to match the options used for JasPer.

I would add that I have not every personally built with JasPer support on
windows.  I use the alternate Kakadu library for my public builds and
have only used JasPer on linux.

> I don't want to whine 'cause I really hate whiners, but I would really
> appreciate it if you could direct me to a site
> where I can download precompiled WIN32 Static Libs for GDAL and OGR. Or
put
> one up if there aren't any - actually any help
> would be dearly appreciated!

Well, I don't normally like to distribute static libraries because they
introduce all sorts of extra C library and other dependencies, and make
linking more complex.  Folks run into problems just like you have, and they
can be very hard for me to resolve remotely.

If you need the style support you are faced with dealing with the static
build issues mostly on your own.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From dron at ak4719.spb.edu  Tue May 11 02:20:33 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] jpeg2000 memory management??????
In-Reply-To: <1B3885BC15C7024C845AAC78314766C505BD7C9E@exch-01.noida.hcltech.com>
References: <1B3885BC15C7024C845AAC78314766C505BD7C9E@exch-01.noida.hcltech.com>
Message-ID: <20040511062033.GA5973@ak4719.spb.edu>

On Fri, Apr 30, 2004 at 03:07:47PM +0530, Bylahalli  Chandrashekara  Prasad, Noida wrote:
> i am working on JASPERE code looking for memory efficieny, i found  a
> memory leakeage in the code and also a bug in quantization

Does these bug and leakage located in the GDAL JasPer driver or in
JasPer library itself? In latter case you should report the problem to
Michael Adams, author of the library.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From werchowyna at pf.pl  Tue May 11 05:00:15 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Problems with loading JPEGs using GDAL
References: <BKEKKNEPIPMJLIAAMCLOAEACCAAA.marisap@telkomsa.net>
Message-ID: <004a01c43736$8d72f720$8ae063d9@n7a3h9>

Louis wrote:

> Personally, I think GDAL is the greatest thing to happen in the GIS world
> since Galileo figured out the Earth isn't the centre of the Universe.
> I mean think about it - a couple of
> years ago there was no way one could read MapInfo vector files without
> having to buy their very expensive engine. For countries like mine where
> the Dollar to local currency ratio is pretty large, GDAL is a godsend.

you are absolutely right about gdal, but the man actually was Copernicus
however Galileo surely would say 'eppur GDAL si muove', no doubt on it :)

cheers
Maciek

From werchowyna at pf.pl  Tue May 11 10:17:34 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] -wo switch
Message-ID: <005201c43765$13f27d60$86584cd5@n7a3h9>

man gdalwarp says:
(...)
-wo 'NAME=VALUE':
 Set a lost of warp options. There is a list of available ones.
 Multiple -wo options may be listed.
(...)

how to obtain that "list of available ones"?

cheers
Maciek

From werchowyna at pf.pl  Tue May 11 10:21:23 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] read-only (bug?)
Message-ID: <005301c43765$156b61c0$86584cd5@n7a3h9>

I played with gdalwarp a little and got such a message when tried the -of BT
and -of VRT:

Creating output file is that 2646P x 1259L.
ERROR 5: Destination band 1 appears to be read-only.

seems a bug (?)


From werchowyna at pf.pl  Tue May 11 10:32:38 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] floating point bug
Message-ID: <005401c43765$16e44620$86584cd5@n7a3h9>

Hello

Seems to me that GDAL does not fully support floating point data sets.

I have a floating point DEM in an ARCgrid. I want to convert it into another
projection with GDALWARP. It reprojects fine but the ouput GEOTiff is
trunctated to integer. Even when -wo, -ot, -co are set to Float32 it doesn't
help either.

GDALINFO recognizes my fp ARCGrid as an Int16 while the file is fp. I'm sure
it is because it loads perfect into Grass 5.03 using r.in.arc.

here's the GDALINFO of the file:

Coordinate System is `'
Origin = (3617611.000000,5535259.500000)
Pixel Size = (10.00000000,-10.00000000)
Corner Coordinates:
Upper Left  ( 3617611.000, 5535259.500)
Lower Left  ( 3617611.000, 5523479.500)
Upper Right ( 3643711.000, 5535259.500)
Lower Right ( 3643711.000, 5523479.500)
Center      ( 3630661.000, 5529369.500)
Band 1 Block=2610x1 Type=Int16, ColorInterp=Undefined
    Computed Min/Max=367.000,1600.000
  NoData Value=-9999

Is it a bug?

Besides: I loaded the ARCGrid into Grass, exported into floating point ESRI
*.bil and GDALINFO again claims it's integer. Moreover it reports false
Min/Max. Even if integer should be 367/1600 (actually are
367.0/1600.235962):

Driver: EHdr/ESRI .hdr Labelled
Size is 2627, 959
Coordinate System is `'
Origin = (3617510.000000,5533070.000000)
Pixel Size = (10.00000000,-10.00000000)
Corner Coordinates:
Upper Left  ( 3617510.000, 5533070.000)
Lower Left  ( 3617510.000, 5523480.000)
Upper Right ( 3643780.000, 5533070.000)
Lower Right ( 3643780.000, 5523480.000)
Center      ( 3630645.000, 5528275.000)
Band 1 Block=2627x1 Type=Int32, ColorInterp=Undefined
    Computed Min/Max=1141743147.000,1153959821.000
  NoData Value=0

my GDAL is GDAL 1.2.0.1 (dev), released 2004/03/10
(from the OpenEV_FW_linux_1.7.2.tar.gz)

Maciek


From warmerdam at pobox.com  Tue May 11 13:22:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] floating point bug
In-Reply-To: <005401c43765$16e44620$86584cd5@n7a3h9>
References: <005401c43765$16e44620$86584cd5@n7a3h9>
Message-ID: <40A10BDA.6010206@pobox.com>

Maciek Sieczka wrote:
> Hello
> 
> Seems to me that GDAL does not fully support floating point data sets.
> 
> I have a floating point DEM in an ARCgrid. I want to convert it into another
> projection with GDALWARP. It reprojects fine but the ouput GEOTiff is
> trunctated to integer. Even when -wo, -ot, -co are set to Float32 it doesn't
> help either.
> 
> GDALINFO recognizes my fp ARCGrid as an Int16 while the file is fp. I'm sure
> it is because it loads perfect into Grass 5.03 using r.in.arc.

Maciek,

I find it hard to believe that GDAL's AIG driver would misreport a
floating point Arc/Info Binary Grid as Int16.  If you can provide a sample
Arc/Info grid that demonstrates this problem I will investigate.

> Besides: I loaded the ARCGrid into Grass, exported into floating point ESRI
> *.bil and GDALINFO again claims it's integer. Moreover it reports false
> Min/Max. Even if integer should be 367/1600 (actually are
> 367.0/1600.235962):
> 
> Driver: EHdr/ESRI .hdr Labelled
> Size is 2627, 959
> Coordinate System is `'
> Origin = (3617510.000000,5533070.000000)
> Pixel Size = (10.00000000,-10.00000000)
> Corner Coordinates:
> Upper Left  ( 3617510.000, 5533070.000)
> Lower Left  ( 3617510.000, 5523480.000)
> Upper Right ( 3643780.000, 5533070.000)
> Lower Right ( 3643780.000, 5523480.000)
> Center      ( 3630645.000, 5528275.000)
> Band 1 Block=2627x1 Type=Int32, ColorInterp=Undefined
>     Computed Min/Max=1141743147.000,1153959821.000
>   NoData Value=0

GDAL does not support floating point ESRI bil files.  I don't know what they
put in the .hdr file to indicate floating point.  So the file is misused as
integer and all the values are crazy.  Can you provide the .hdr file so I can
see if there are any clues it is floating point?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue May 11 13:32:19 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] read-only (bug?)
In-Reply-To: <005301c43765$156b61c0$86584cd5@n7a3h9>
References: <005301c43765$156b61c0$86584cd5@n7a3h9>
Message-ID: <40A10E23.9030608@pobox.com>

Maciek Sieczka wrote:
> I played with gdalwarp a little and got such a message when tried the -of BT
> and -of VRT:
> 
> Creating output file is that 2646P x 1259L.
> ERROR 5: Destination band 1 appears to be read-only.
> 
> seems a bug (?)

Maciek,

With BT format it is a bug, and I have committed a fix.

With VRT things are more complicated.  The VRT driver does not currently
support writing image data.  However, it is legal to create a VRT file with
the Create() method, attach it to a raster file, and set various metadata
which can be written to disk in the .vrt file.  So it supports some kinds of
update, but not others.  The currently behaviour, while confusing, seems to
appropriate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue May 11 13:43:07 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] -wo switch
In-Reply-To: <005201c43765$13f27d60$86584cd5@n7a3h9>
References: <005201c43765$13f27d60$86584cd5@n7a3h9>
Message-ID: <40A110AB.70109@pobox.com>

Maciek Sieczka wrote:
> man gdalwarp says:
> (...)
> -wo 'NAME=VALUE':
>  Set a lost of warp options. There is a list of available ones.
>  Multiple -wo options may be listed.
> (...)
> 
> how to obtain that "list of available ones"?

Maciek,

Good question.

It isn't really the right place to have to go, but you can find a description of
warp options in the warper API tutorial.

   http://www.remotesensing.org/gdal/warptut.html

Search down for GDALWarpOptions::papszOptions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at larc.nasa.gov  Tue May 11 13:59:10 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] floating point bug
In-Reply-To: <40A10BDA.6010206@pobox.com>
Message-ID: <EPEALOKKOCCOEALLINACCEOEFJAA.t.r.decarlo@larc.nasa.gov>

Frank,
There is a field in the hdr file called "nbits". The way I understand it,
this usually has one of three different values.

If nbits = 16, data is integer.
If nbits = 32, data is single-precision float
If nbits = 64, data is double-precision float

I hope I'm right on this. That's the way I've been using it, anyway.

Thom

-----Original Message-----
From: Frank Warmerdam
Sent: Tuesday, May 11, 2004 1:23 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] floating point bug

[snip]

GDAL does not support floating point ESRI bil files.  I don't know what they
put in the .hdr file to indicate floating point.  So the file is misused as
integer and all the values are crazy.  Can you provide the .hdr file so I
can
see if there are any clues it is floating point?




From warmerdam at pobox.com  Tue May 11 14:06:38 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] floating point bug
In-Reply-To: <EPEALOKKOCCOEALLINACCEOEFJAA.t.r.decarlo@larc.nasa.gov>
References: <EPEALOKKOCCOEALLINACCEOEFJAA.t.r.decarlo@larc.nasa.gov>
Message-ID: <40A1162E.1050803@pobox.com>

Thom DeCarlo wrote:
> Frank,
> There is a field in the hdr file called "nbits". The way I understand it,
> this usually has one of three different values.
> 
> If nbits = 16, data is integer.
> If nbits = 32, data is single-precision float
> If nbits = 64, data is double-precision float
> 
> I hope I'm right on this. That's the way I've been using it, anyway.

Thom,

I'm convinced.  I had been treating NBITS=32 as Int32 but I have changed it
to Float32, and added a Float64 case.

Thanks,

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bclay at ball.com  Tue May 11 15:28:02 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Program crash in GDAL call
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C91B@APPMSG2.AERO.BALL.COM>

I have the program working correctly (I think) in debug mode but it
crashes in release mode.  I turned on some of the flags to see where it
was crashing and it seems it is crashing in the call to free inside
CPLFree called from CPLReadDir.  As far as I can tell the pointer is
valid but debugging a release program tends to give odd results.  What I
did notice is that the path always seems to be /usr/local/lib which of
course does not exist on a Windows machine.  I don't think that is
related to the problem just a note.  Since the program is statically
linked (one big lib) should it be looking for drivers and why in
/usr/local/lib on a windows machine?  Is there some other initialization
I need?

The stack trace follows:

NTDLL! 77f813b1()
NTDLL! 77fb6972()
NTDLL! 77fb5bbe()
NTDLL! 77fa6afc()
NTDLL! 77fccc55()
MSVCRT! 7800115c()
VSIFree(void * 0x054c2978) line 343 + 10 bytes
CPLReadDir(const char * 0x054c2920) line 103 + 9 bytes
GDALDriverManager::AutoLoadDrivers() line 574 + 15 bytes
GDALAllRegister() line 266
TerrainData::Initialize(int 0, char * 0x00000000) line 254
BMV::blue_marble_viewer::main_loop(BMV::blue_marble_viewer * const
0x0012fb14) line 1456
main(int 1, char * * 0x053e99b0) line 102
BMV! mainCRTStartup + 227 bytes
001

I checked the archives and did not find anything related to CPLReadDir.
There were references to CPLFree but none of them seemed to apply.

Stats:
  Code = gdal-cvs-20040506.
  OS = win2k
  COMPILER = MSVC 6.0 + STLport

Any thoughts or suggestions (other that always use the debug version)
would be greatly appreciated.

Thanks.

Bruce Clay
bclay@ball.com 

From warmerdam at pobox.com  Tue May 11 16:08:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Program crash in GDAL call
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C91B@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C91B@APPMSG2.AERO.BALL.COM>
Message-ID: <40A132DA.90107@pobox.com>

Clay, Bruce wrote:
> I have the program working correctly (I think) in debug mode but it
> crashes in release mode.  I turned on some of the flags to see where it
> was crashing and it seems it is crashing in the call to free inside
> CPLFree called from CPLReadDir.  As far as I can tell the pointer is
> valid but debugging a release program tends to give odd results.  What I
> did notice is that the path always seems to be /usr/local/lib which of
> course does not exist on a Windows machine.  I don't think that is
> related to the problem just a note.  Since the program is statically
> linked (one big lib) should it be looking for drivers and why in
> /usr/local/lib on a windows machine?  Is there some other initialization
> I need?

Bruce,

"/usr/local/lib" is the default location to search, inherited from Unix
conventions.  It should be no problem if it does not exist.  I have no
idea why things are crashing for you though.  I looked through the code
and short of heap corruption arising somewhere ahead of time I don't see
why the CPLFree() should cause any problem.

PS. You can just comment out the call to AutoLoadDrivers() if you want, it isn't
generally necessary.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed May 12 10:39:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] NLAPS Data Format
In-Reply-To: <009201c433b7$91564b80$43e91d3e@n7a3h9>
References: <009201c433b7$91564b80$43e91d3e@n7a3h9>
Message-ID: <40A2373B.5030808@pobox.com>

Maciek Sieczka wrote:
> hi
> 
> I have two TM data sets in an NDF (NLAPS Data Format)
> in general it's a format for following data types: MSS, TM, ETM+ and
> NLAPS_DEM
> 
> is it supported in gdal? may it be?
> 
> Maciek Sieczka

Maciek,

I have implemented NLAPS before (in a previous life before GDAL), and it isn't
a particularly difficult format.  But I have also had relatively little interest
in it.  I would suggest you file an enhancement request for it in bugzilla with
pointers to format documentation and sample datasets if possible.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed May 12 12:14:57 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning inaccurate results
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95F8@mailman.san.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: spatial_query.zip
Type: application/x-zip-compressed
Size: 97813 bytes
Desc: spatial_query.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040512/a7b4ae86/spatial_query.bin
From warmerdam at pobox.com  Wed May 12 12:27:40 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning inaccurate
 results
In-Reply-To: <ED3A48B9840E594890A2BC172D119465FB95F8@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465FB95F8@mailman.san.com>
Message-ID: <40A2507C.8070108@pobox.com>

Chapman, Martin wrote:
> I am using the OGRDataSource::ExecuteSQL() method to spatially filter a 
> esri shape file.  The results are inaccurate in that they return 
> features that do not intersect the filter.  Is this a known issue or 
> does it look like an error in my code?  I am using GDAL 119.  The 
> attached screen shot shows the spatial filter results and my code is 
> listed below:

Martin,

Your code looks ok, but it is hard for me to say.  In general what happens
is that OGR compares the MBR of a feature geometry against the MBR of the
spatial filter geometry.  If those MBRs overlap it returns the feature.

I assume the orange rectangle in the display was your query rectangle, and
the green states were returned?  To the left and above it seems to be
doing the right thing, but to the right and down there are problems.  It is
almost as if the bottom right corner of the internal MBR was +inf.

Can you reproduce the error with ogrinfo and it's -spat argument?  If so,
it should be easy for me to track down and fix.

A few other things to keep in mind.
  o While spatial filtering is currently MBR based, at some point it might
    do real intersection checks so using a propery polygon (as you do) is
    a good idea.
  o The spatial filtering logic is unaware of coordinate system issues,
    so make sure your spatial filter is in the same coordinate syste as the
    geometries of the layer which I assume is the case in this case.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed May 12 12:43:35 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning inaccurate results
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95F9@mailman.san.com>

My apologies, I'm an idiot, I was passing in my x and y points for the
spatial filter in the wrong order.  I did notice that the spatial
intersection uses the envelope of the feature rather than the actually
feature geometry though.  I this by design?  Is there a way to filter
based on the geometry points or do I need to do that after the query has
returned?
 
Martin

	-----Original Message-----
	From: Chapman, Martin 
	Sent: Wednesday, May 12, 2004 10:15 AM
	To: gdal-dev@remotesensing.org
	Subject: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning
inaccurate results
	
	
	I am using the OGRDataSource::ExecuteSQL() method to spatially
filter a esri shape file.  The results are inaccurate in that they
return features that do not intersect the filter.  Is this a known issue
or does it look like an error in my code?  I am using GDAL 119.  The
attached screen shot shows the spatial filter results and my code is
listed below:
	 
	COgrShapeLayer* COgrDataSource::ExecuteSQL(string sStatement,
CSXBasicGeometry* pSpatialFilter, string sDialect)
	{
	try
	{
	    if (!m_pDatasource)
	        throw exception("Invalid data source null.");
	 
	    OGRSpatialReference* pSpatialRef =
m_pDatasource->GetLayer(0)->GetSpatialRef();
	    OGRLinearRing* pRing = NULL;
	 
	    if (dynamic_cast< CSXPolygon*>(pSpatialFilter))
	    {
	        CSXPolygon* pPolygon = (CSXPolygon*) pSpatialFilter;
	        pRing = new OGRLinearRing();
	        vector< double>::iterator it;
	        vector< double>* pPoints = pPolygon->GetPoints();
	        double nX = 0.0, nY = 0.0;
	 
	        for (it = pPoints->begin(); it != pPoints->end(); it++)
	        {
	            nX = *it;
	            it++;
	            nY = *it;
	            pRing->addPoint(nX, nY);
	        }
	 
	        pRing->addPoint(pPoints->at(1), pPoints->at(0));
	    }
	    else
	        throw exception("Invalid spatial filter data type.");
	    
	    OGRPolygon* pPolygon = new OGRPolygon();
	    if (pSpatialRef)
pPolygon->assignSpatialReference(pSpatialRef);  
	    pPolygon->addRingDirectly(pRing);
	    OGRLayer* pLayer = m_pDatasource->ExecuteSQL((const char*)
sStatement.c_str(), pPolygon, (const char*) sDialect.c_str());
	 
	    if (pLayer == NULL) throw exception(CPLGetLastErrorMsg());
	 
	    COgrShapeLayer* pShapeLayer = CreateShapeLayer(pLayer);
	    m_pDatasource->ReleaseResultSet(pLayer);
	    if (CPLGetLastErrorNo() != OGRERR_NONE) throw
exception(CPLGetLastErrorMsg());
	 
	    return pShapeLayer;
	}
	catch(exception e) 
	    {throw e;}
	catch(...) 
	    {throw exception("An unexpected error occurred.");}
	}
	 
	Thanks,
	 
	
	Martin Chapman
	Cell 303-885-1936
	Office 303-660-3933 x226
	mchapman@sanz.com
	http://www.sanz.com <http://www.sanz.com/> 
	 
	 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040512/871d428e/attachment.html
From MChapman at sanz.com  Wed May 12 12:54:13 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning inaccurate results
Message-ID: <ED3A48B9840E594890A2BC172D119465E63AFD@mailman.san.com>

Frank,

Thanks for the quick answer.  I just replied to my own question saying
that I found the error.  It was in my code (as usual).  I was passing in
the x,y points as y,x... so the filter does work.  You are correct that
the orange box is my aoi rectangle.  

I did notice what you mentioned below about using the MBR of the
feature.  I know how to write the intersection functions needed to
filter n-gons, do you think it would be difficult to modify the
ExecuteSQL to use the geometry instead of the MBR for the filtering?  If
you don't think that would be hard, what source code file would I make
the mod in?  Or, has someone done that already?

Thanks,
Martin 

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, May 12, 2004 10:28 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning
inaccurate results


Chapman, Martin wrote:
> I am using the OGRDataSource::ExecuteSQL() method to spatially filter 
> a
> esri shape file.  The results are inaccurate in that they return 
> features that do not intersect the filter.  Is this a known issue or 
> does it look like an error in my code?  I am using GDAL 119.  The 
> attached screen shot shows the spatial filter results and my code is 
> listed below:

Martin,

Your code looks ok, but it is hard for me to say.  In general what
happens is that OGR compares the MBR of a feature geometry against the
MBR of the spatial filter geometry.  If those MBRs overlap it returns
the feature.

I assume the orange rectangle in the display was your query rectangle,
and the green states were returned?  To the left and above it seems to
be doing the right thing, but to the right and down there are problems.
It is almost as if the bottom right corner of the internal MBR was +inf.

Can you reproduce the error with ogrinfo and it's -spat argument?  If
so, it should be easy for me to track down and fix.

A few other things to keep in mind.
  o While spatial filtering is currently MBR based, at some point it
might
    do real intersection checks so using a propery polygon (as you do)
is
    a good idea.
  o The spatial filtering logic is unaware of coordinate system issues,
    so make sure your spatial filter is in the same coordinate syste as
the
    geometries of the layer which I assume is the case in this case.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed May 12 13:02:38 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning inaccurate
 results
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63AFD@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63AFD@mailman.san.com>
Message-ID: <40A258AE.1010000@pobox.com>

Chapman, Martin wrote:
> Frank,
> 
> Thanks for the quick answer.  I just replied to my own question saying
> that I found the error.  It was in my code (as usual).  I was passing in
> the x,y points as y,x... so the filter does work.  You are correct that
> the orange box is my aoi rectangle.  
> 
> I did notice what you mentioned below about using the MBR of the
> feature.  I know how to write the intersection functions needed to
> filter n-gons, do you think it would be difficult to modify the
> ExecuteSQL to use the geometry instead of the MBR for the filtering?  If
> you don't think that would be hard, what source code file would I make
> the mod in?  Or, has someone done that already?

Martin,

I think the thing to do would be to implement the OGRGeometry::Intersect()
method properly.  But note that this implies being able to handle any two
geometry types not just polygons against polygon.

Also, if you do this, please ensure that the MBR pre-test is kept in place
to quickly handle some cases.  In fact, a special case for testing against
a rectangular polygon would also likely be worthwhile.

The current OGRGeometry::Intersect() implementation is in
gdal/ogr/ogrgeometry.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed May 12 13:05:56 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning inaccurate results
Message-ID: <ED3A48B9840E594890A2BC172D119465FB95FB@mailman.san.com>

Frank,

Ok, thanks.  I will make the changes as appropriate.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, May 12, 2004 11:03 AM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] OGRDataSource::ExecuteSQL() method returning
inaccurate results


Chapman, Martin wrote:
> Frank,
> 
> Thanks for the quick answer.  I just replied to my own question saying

> that I found the error.  It was in my code (as usual).  I was passing 
> in the x,y points as y,x... so the filter does work.  You are correct 
> that the orange box is my aoi rectangle.
> 
> I did notice what you mentioned below about using the MBR of the 
> feature.  I know how to write the intersection functions needed to 
> filter n-gons, do you think it would be difficult to modify the 
> ExecuteSQL to use the geometry instead of the MBR for the filtering?  
> If you don't think that would be hard, what source code file would I 
> make the mod in?  Or, has someone done that already?

Martin,

I think the thing to do would be to implement the
OGRGeometry::Intersect() method properly.  But note that this implies
being able to handle any two geometry types not just polygons against
polygon.

Also, if you do this, please ensure that the MBR pre-test is kept in
place to quickly handle some cases.  In fact, a special case for testing
against a rectangular polygon would also likely be worthwhile.

The current OGRGeometry::Intersect() implementation is in
gdal/ogr/ogrgeometry.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From werchowyna at pf.pl  Wed May 12 14:14:23 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] -wo switch
Message-ID: <013801c4384d$4fbadca0$8d584cd5@n7a3h9>

thanks for the clue
why not put those details on -wo it in the manual?

>> man gdalwarp says:
>> (...)
>> -wo 'NAME=VALUE':
>>  Set a lost of warp options. There is a list of available ones.
>>  Multiple -wo options may be listed.
>> (...)
>>
>> how to obtain that "list of available ones"?

> It isn't really the right place to have to go, but you can find a
> description of warp options in the warper API tutorial.
> http://www.remotesensing.org/gdal/warptut.html
> Search down for GDALWarpOptions::papszOptions.


From werchowyna at pf.pl  Wed May 12 14:15:27 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] floating point bug
Message-ID: <014b01c4384d$7e61ea80$8d584cd5@n7a3h9>

Frank,

> I find it hard to believe that GDAL's AIG driver would misreport a
> floating point Arc/Info Binary Grid as Int16.  If you can provide a sample
> Arc/Info grid that demonstrates this problem I will investigate.

I digged a little more and I'm confused.

I noticed that whether GDAL recognises the an FP ARCGrid as FP or INT
depends somehow on the proportion and distribution of null/data
cells in a file but I can't find a simple rule for this (and I may be wrong
as well). Anyway if the FP grid file is "100% data" it is always recognised
as FP. But if it contains nulls then GDAL will see it as INT or FP
dependending on the file itself. Examples for both cases taken out from my
FP ARCGrid file are attached in the arc.tgz. If you need a bigger one please
let me know.

> GDAL does not support floating point ESRI bil files.  I don't know what
> they put in the .hdr file to indicate floating point.  So the file is
> misused as integer and all the values are crazy.  Can you provide the
> .hdr file so can see if there are any clues it is floating point?

I read the problem's solved but just in case included are the world and
header files of my FP dem.bil.

Cheers
Maciek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: arc.tgz
Type: application/octet-stream
Size: 12839 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040512/5611123c/arc.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dem.hdr
Type: application/octet-stream
Size: 92 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040512/5611123c/dem.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: dem.wld
Type: application/octet-stream
Size: 59 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040512/5611123c/dem-0001.obj
From normanb at comsine.co.uk  Wed May 12 14:20:30 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] gdalwarp
Message-ID: <028301c4384d$cf2aea70$0600a8c0@train2>

Hi,

looking at the warp utility am I correct in thinking that the restriction on 8 bit tiff, and holding all the tiff in memory is now removed.

GDAL 1.1.8
'implemented new 'gdalwarp' application for projection and GCP based image
   warping.  See gdal/alg for underlying algorithms.  Currently gdalwarp only
   supports 8 bit images and holds the whole source image in memory.'

As I am a bit new to this, and in particular GDAL say I had a geotiff in in UTM WGS84 (EPSG:32630)  how would I convert it to Lat/long WGS84 (EPSG:4326) ?

Many thanks,

Norman Barker 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040512/7bfcc6f6/attachment.html
From warmerdam at pobox.com  Wed May 12 15:33:30 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] -wo switch
In-Reply-To: <013801c4384d$4fbadca0$8d584cd5@n7a3h9>
References: <013801c4384d$4fbadca0$8d584cd5@n7a3h9>
Message-ID: <40A27C0A.4030507@pobox.com>

Maciek Sieczka wrote:
> thanks for the clue
> why not put those details on -wo it in the manual?

Maciek,

Well, the question is how many places should I try and replicate this
information.  I need a better way of handling this option, but for now
the available options are pretty esoteric, so I don't see it as being a
pressing issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed May 12 15:35:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] gdalwarp
In-Reply-To: <028301c4384d$cf2aea70$0600a8c0@train2>
References: <028301c4384d$cf2aea70$0600a8c0@train2>
Message-ID: <40A27C9B.60707@pobox.com>

Norman Barker wrote:
> Hi,
>  
> looking at the warp utility am I correct in thinking that the 
> restriction on 8 bit tiff, and holding all the tiff in memory is now 
> removed.
>  
> GDAL 1.1.8
> 'implemented new 'gdalwarp' application for projection and GCP based image
>    warping.  See gdal/alg for underlying algorithms.  Currently gdalwarp 
> only
>    supports 8 bit images and holds the whole source image in memory.'

Norman,

Yes, I believe the new generalized warper was in place for the 1.1.9 release
and certainly for 1.2.0.

> As I am a bit new to this, and in particular GDAL say I had a geotiff in 
> in UTM WGS84 (EPSG:32630)  how would I convert it to Lat/long WGS84 
> (EPSG:4326) ?

Assuming the input file is properly labelled as UTM you would just do:

   gdalwarp -t_srs EPSG:4326 in.tif out.tif.

Best regards,

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jcable at gi.alaska.edu  Wed May 12 17:34:16 2004
From: jcable at gi.alaska.edu (Jay Cable)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] ArcSDE raster driver for gdal
Message-ID: <Pine.LNX.4.58.0405121030500.20171@dino.gi.alaska.edu>

I am a growing stockpile of image data in arcSDE I would like to serve up
using mapserver.  It appears that mapserver used gdal to handle some of
the raster data formats that it uses.

Which leads me to my question: Has anyone implemented an arcsde
raster driver for gdal?   Are there any plans to do so in the future?

thanks,
  -Jay Cable


****************************************************************
Jay Cable                                GINA/ION
tel (907) 474-1856                       Geophysical Institute
jcable@gi.alaska.edu                     University of Alaska
	   	                         P.O. Box 757320
                                         Fairbanks, AK 99775-7320
*****************************************************************

From werchowyna at pf.pl  Wed May 12 17:35:30 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] NLAPS Data Format
References: <009201c433b7$91564b80$43e91d3e@n7a3h9> <40A2373B.5030808@pobox.com>
Message-ID: <00ac01c43869$5e0dc9e0$7f584cd5@n7a3h9>

From: "Frank Warmerdam" <warmerdam@pobox.com>

> Maciek,
>
> I have implemented NLAPS before (in a previous life before GDAL), and it
> isn't a particularly difficult format.  But I have also had relatively
> little interest in it.  I would suggest you file an enhancement request
> for it in bugzilla with pointers to format documentation and sample
> datasets if possible.

Frank,

The format seems to be quite popular and useful in my opinion.
Half of the free of charge TM/MSS data available from
ftp://ftp.glcf.umiacs.umd.edu/ is NLAPS (at least in case of Poland which
I'm intersted in) but I cannot really use it due to the lack of any NLAPS
support in the software I know.

I would do as you suggest I don't have a clue how to proceed. Actualy I
don't even know but what the bugzilla exactly is. So far I have only heard
the name, that's it. Yes, I'm ashamed. Could somebody guide me please?

Maciek


From starged at videotron.ca  Wed May 12 20:47:40 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Modify existing georeferencing (was: Fusion tool bug
 fix)
In-Reply-To: <409F8E61.8040008@pobox.com>
References: <r3rn905te83590srducqsgvq2jc4h4l23o@4ax.com>
 <409F8E61.8040008@pobox.com>
Message-ID: <m4h5a0hd545pigjdd0u8vjarbpeh7d8aue@4ax.com>

Hi Frank,

On Mon, 10 May 2004 10:14:57 -0400, Frank Warmerdam <warmerdam@pobox.com> wrote:

>It is possible to modify existing georeferencing under some circumstances
>with SetGeoTransform().  However, it is driver dependent and you would need
>to have the file open with update access.  It *should* normally work with the
>GeoTIFF driver if the file is open for update access.

It indeed works. I have written a very simple script to do that from the command line:
http://pages.infinit.net/starged/gdal/setgeo.py

Thanks for clearing that up...
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From warmerdam at pobox.com  Wed May 12 22:00:44 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] ArcSDE raster driver for gdal
In-Reply-To: <Pine.LNX.4.58.0405121030500.20171@dino.gi.alaska.edu>
References: <Pine.LNX.4.58.0405121030500.20171@dino.gi.alaska.edu>
Message-ID: <40A2D6CC.2070104@pobox.com>

Jay Cable wrote:
> I am a growing stockpile of image data in arcSDE I would like to serve up
> using mapserver.  It appears that mapserver used gdal to handle some of
> the raster data formats that it uses.
> 
> Which leads me to my question: Has anyone implemented an arcsde
> raster driver for gdal?   Are there any plans to do so in the future?

Jay,

I have a general interest in implementing this but no funding party, and
perhaps more importantly, I don't have access to ArcSDE.  I don't have the
software running here.  However, if you were interested in implementing a
driver, I would be willing to provide some support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dron at ak4719.spb.edu  Thu May 13 02:44:56 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] NLAPS Data Format
In-Reply-To: <00ac01c43869$5e0dc9e0$7f584cd5@n7a3h9>
References: <009201c433b7$91564b80$43e91d3e@n7a3h9> <40A2373B.5030808@pobox.com> <00ac01c43869$5e0dc9e0$7f584cd5@n7a3h9>
Message-ID: <20040513064456.GB7284@ak4719.spb.edu>

On Wed, May 12, 2004 at 11:35:30PM +0200, Maciek Sieczka wrote:
> I would do as you suggest I don't have a clue how to proceed. Actualy
> I don't even know but what the bugzilla exactly is. So far I have only
> heard the name, that's it. Yes, I'm ashamed. Could somebody guide me
> please?

It is bug tracking system with Web frontend:

 http://bugzilla.remotesensing.org/enter_bug.cgi?product=GDAL

You can fill the entry using maximum information you have (simple e-mail
registration required). Small images can be directly attached to the bug
page. Using that page you can control the bug fixing activity, post
additional notes, test results etc.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From normanb at comsine.co.uk  Thu May 13 06:23:01 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] gdalwarp
References: <028301c4384d$cf2aea70$0600a8c0@train2> <40A27C9B.60707@pobox.com>
Message-ID: <008701c438d4$451e6aa0$0600a8c0@train2>

Hi,

thanks for the reply I have run gdalwarp on some geotiffs and it is
successful, and on others it fails or returns a black image (with a sample
landsat image).

Also I have noticed the output of gdalwarp has to be viewed with a proper
geotiff reader such as Erdas ViewFinder rather than the default tiff readers
that come with Windows XP?

My question is what do you refer to as a 'properly labelled' geotiff?  Is
there any more documentation of gdalwarp that I could read, as I said before
I am a bit new to this, but am very interested!

Many thanks,

Norman

----- Original Message -----
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: <gdal-dev@remotesensing.org>
Sent: Wednesday, May 12, 2004 8:35 PM
Subject: Re: [Gdal-dev] gdalwarp


> Norman Barker wrote:
> > Hi,
> >
> > looking at the warp utility am I correct in thinking that the
> > restriction on 8 bit tiff, and holding all the tiff in memory is now
> > removed.
> >
> > GDAL 1.1.8
> > 'implemented new 'gdalwarp' application for projection and GCP based
image
> >    warping.  See gdal/alg for underlying algorithms.  Currently gdalwarp
> > only
> >    supports 8 bit images and holds the whole source image in memory.'
>
> Norman,
>
> Yes, I believe the new generalized warper was in place for the 1.1.9
release
> and certainly for 1.2.0.
>
> > As I am a bit new to this, and in particular GDAL say I had a geotiff in
> > in UTM WGS84 (EPSG:32630)  how would I convert it to Lat/long WGS84
> > (EPSG:4326) ?
>
> Assuming the input file is properly labelled as UTM you would just do:
>
>    gdalwarp -t_srs EPSG:4326 in.tif out.tif.
>
> Best regards,
>
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Thu May 13 08:01:06 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] gdalwarp
In-Reply-To: <008701c438d4$451e6aa0$0600a8c0@train2>
References: <028301c4384d$cf2aea70$0600a8c0@train2> <40A27C9B.60707@pobox.com> <008701c438d4$451e6aa0$0600a8c0@train2>
Message-ID: <40A36382.3010902@pobox.com>

Norman Barker wrote:
> Hi,
> 
> thanks for the reply I have run gdalwarp on some geotiffs and it is
> successful, and on others it fails or returns a black image (with a sample
> landsat image).

Norman,

You will need to provide sample images for me to look into this problem.

> Also I have noticed the output of gdalwarp has to be viewed with a proper
> geotiff reader such as Erdas ViewFinder rather than the default tiff readers
> that come with Windows XP?

GDAL by default produces band interleaved (PLANARCONFIG_SEPERATE in TIFF
terminology) files when more than one band is being output.  These may be
unsupported by the WinXP tiff viewer.  You can try adding "-co INTERLEAVE=PIXEL"
if you think this is the problem.

> My question is what do you refer to as a 'properly labelled' geotiff?  Is
> there any more documentation of gdalwarp that I could read, as I said before
> I am a bit new to this, but am very interested!

I mean a file that has coordinate system information (ie. UTM 11 WGS84) *and*
a geotransform (ie. reference point and pixel size).

The gdalwarp utility documentation is at:

   http://www.remotesensing.org/gdal/gdal_utilities.html#gdalwarp

To learn about subtleties of how GDAL warping works, trying reading through
the Warp API tutorial and linked reference documentation:

   http://www.remotesensing.org/gdal/warptut.html

To learn more about the GDAL data model review:

   http://www.remotesensing.org/gdal/gdal_datamodel.html

To learn about characterstics of specific format drivers review their
individual documentation:

   http://www.remotesensing.org/gdal/formats_list.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jbensabat at ewre.com  Thu May 13 10:16:25 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] how to extract data from OGR
Message-ID: <001d01c438f4$e2a58310$8500000a@funny>

Hello
I have started to use gdal and OGR and I have the following question,
I am loading a mapinfo map into a OGR structure, and I would like to be able to access all its components (lines, polygon, points ).
The problem is that except functions like DumpReadable, I do not see any public method in the code
that allows access to the data. 

Am I missing something ? Is there a way to get to the data ?
an example (s) or pointer to examples would be very welcome.
thanks 
jac.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040513/0b0b7c4b/attachment.html
From warmerdam at pobox.com  Thu May 13 10:25:12 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] how to extract data from OGR
In-Reply-To: <001d01c438f4$e2a58310$8500000a@funny>
References: <001d01c438f4$e2a58310$8500000a@funny>
Message-ID: <40A38548.6080302@pobox.com>

Jacob Bensabat wrote:
> Hello
> I have started to use gdal and OGR and I have the following question,
> I am loading a mapinfo map into a OGR structure, and I would like to be 
> able to access all its components (lines, polygon, points ).
> The problem is that except functions like DumpReadable, I do not see any 
> public method in the code
> that allows access to the data.
>  
> Am I missing something ? Is there a way to get to the data ?
> an example (s) or pointer to examples would be very welcome.
> thanks

Jac,

You don't mention if you are using the C or C++ API to accomplish this.  I am
attaching example C code which converts an OGRGeometry into another form.  It
may be instructive as an example.

Things work somewhat similarly in C++.  Basically you need to fetch the
geometry object from the feature (OGRFeature::GetGeometryRef()), inspect the
type and then cast it to a pointer of the appropriate geometry type.  This
downcast pointer can then be used to interrogate information about the
geometry.  Many geometries (ie. polygon and the collections) are made of
other geometry objects which need to be fetched and queried.

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

/************************************************************************/
/*                      ogr_geometry_to_gv_shape()                      */
/************************************************************************/

static GvShape *ogr_geometry_to_gv_shape( OGRGeometryH hGeom )

{
     GvShape *gv_shape = NULL;
     OGRwkbGeometryType eType;

     if( hGeom == NULL )
     {
         // Use collection - which can be empty - to represent a geometryless
         // feature.

         return gv_shape_new( GVSHAPE_COLLECTION );
     }

     eType = wkbFlatten(OGR_G_GetGeometryType(hGeom));

     if( eType == wkbPoint )
     {
         gv_shape = gv_shape_new( GVSHAPE_POINT );
         gv_shape_set_xyz( gv_shape, 0, 0,
                           OGR_G_GetX( hGeom, 0 ),
                           OGR_G_GetY( hGeom, 0 ),
                           OGR_G_GetZ( hGeom, 0 ) );
     }

     else if( eType == wkbLineString )
     {
         int    node, count = OGR_G_GetPointCount(hGeom);

         gv_shape = gv_shape_new( GVSHAPE_LINE );
         for( node = count-1; node >= 0; node-- )
             gv_shape_set_xyz( gv_shape, 0, node,
                               OGR_G_GetX( hGeom, node ),
                               OGR_G_GetY( hGeom, node ),
                               OGR_G_GetZ( hGeom, node ) );
     }

     else if( eType == wkbPolygon )
     {
         OGRGeometryH hRing;
         int        iRing = 0, nRingCount = OGR_G_GetGeometryCount( hGeom );

         gv_shape = gv_shape_new( GVSHAPE_AREA );

         for( iRing = 0; iRing < nRingCount; iRing++ )
         {
             int node;
             int vert_count = _getGeoPtCount( hGeom, iRing, &hRing );

             //hRing      = OGR_G_GetGeometryRef( hGeom, iRing );
             //vert_count = OGR_G_GetPointCount(hRing);

             for( node = vert_count - 1; node >= 0; node-- )
                 gv_shape_set_xyz( gv_shape, iRing, node,
                                   OGR_G_GetX( hRing, node ),
                                   OGR_G_GetY( hRing, node ),
                                   OGR_G_GetZ( hRing, node ) );
         }
     }

     else if( eType == wkbMultiPolygon )
     {
         int iPoly, nShapeRing = 0;

         gv_shape = gv_shape_new( GVSHAPE_AREA );

         for( iPoly = 0; iPoly < OGR_G_GetGeometryCount( hGeom ); iPoly++ )
         {
             //OGRGeometryH hPoly, hRing;
             OGRGeometryH hPoly;
             int         iRing, nRingCount;

             hPoly      = OGR_G_GetGeometryRef( hGeom, iPoly );
             nRingCount = OGR_G_GetGeometryCount( hPoly );

             for( iRing = 0; iRing < nRingCount; iRing++ )
             {
                 OGRGeometryH hRing;
                 int vert_count = _getGeoPtCount( hPoly, iRing, &hRing );
                 int node;

                 //hRing      = OGR_G_GetGeometryRef( hPoly, iRing );
                 //vert_count = OGR_G_GetPointCount(hRing);

                 for( node = vert_count - 1; node >= 0; node-- )
                     gv_shape_set_xyz( gv_shape, nShapeRing, node,
                                      OGR_G_GetX( hRing, node ),
                                      OGR_G_GetY( hRing, node ),
                                      OGR_G_GetZ( hRing, node ) );
                 nShapeRing++;
             }
         }
     }

     else if( eType == wkbGeometryCollection
              || eType == wkbMultiLineString
              || eType == wkbMultiPoint )
     {
         int         iGeom, nGeomCount;

         nGeomCount = OGR_G_GetGeometryCount( hGeom );

         gv_shape = gv_shape_new( GVSHAPE_COLLECTION );

         for( iGeom = 0; iGeom < nGeomCount; iGeom++ )
         {
             OGRGeometryH hSubGeom = OGR_G_GetGeometryRef( hGeom, iGeom );
             GvShape *sub_shape;

             sub_shape = ogr_geometry_to_gv_shape( hSubGeom );
             gv_shape_collection_add_shape( gv_shape, sub_shape );
         }
     }

     return gv_shape;
}


From jbensabat at ewre.com  Thu May 13 11:38:47 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Re: how to extract data from OGR
References: <001d01c438f4$e2a58310$8500000a@funny> <40A38548.6080302@pobox.com>
Message-ID: <003301c43900$6212a9b0$8500000a@funny>

Hi and thanks a lot for your help
Indeed I work using C++ instead of C. Please indicate if there are major
issues that I should be aware
of (so I can start on the right foot), sample code using c++ would be great.
Also could you show how I can querry for PENS, BRUSHES, patterns etc.
Sorry to bother, but while the lib. looks exciting, the learning curve is
really steep.
thanks again
jac.

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
Newsgroups: gmane.comp.gis.gdal.devel
Sent: Thursday, May 13, 2004 4:25 PM
Subject: Re: how to extract data from OGR


> Jacob Bensabat wrote:
> > Hello
> > I have started to use gdal and OGR and I have the following question,
> > I am loading a mapinfo map into a OGR structure, and I would like to be
> > able to access all its components (lines, polygon, points ).
> > The problem is that except functions like DumpReadable, I do not see any
> > public method in the code
> > that allows access to the data.
> >
> > Am I missing something ? Is there a way to get to the data ?
> > an example (s) or pointer to examples would be very welcome.
> > thanks
>
> Jac,
>
> You don't mention if you are using the C or C++ API to accomplish this.  I
am
> attaching example C code which converts an OGRGeometry into another form.
It
> may be instructive as an example.
>
> Things work somewhat similarly in C++.  Basically you need to fetch the
> geometry object from the feature (OGRFeature::GetGeometryRef()), inspect
the
> type and then cast it to a pointer of the appropriate geometry type.  This
> downcast pointer can then be used to interrogate information about the
> geometry.  Many geometries (ie. polygon and the collections) are made of
> other geometry objects which need to be fetched and queried.
>
> Good luck,
>
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> /************************************************************************/
> /*                      ogr_geometry_to_gv_shape()                      */
> /************************************************************************/
>
> static GvShape *ogr_geometry_to_gv_shape( OGRGeometryH hGeom )
>
> {
>      GvShape *gv_shape = NULL;
>      OGRwkbGeometryType eType;
>
>      if( hGeom == NULL )
>      {
>          // Use collection - which can be empty - to represent a
geometryless
>          // feature.
>
>          return gv_shape_new( GVSHAPE_COLLECTION );
>      }
>
>      eType = wkbFlatten(OGR_G_GetGeometryType(hGeom));
>
>      if( eType == wkbPoint )
>      {
>          gv_shape = gv_shape_new( GVSHAPE_POINT );
>          gv_shape_set_xyz( gv_shape, 0, 0,
>                            OGR_G_GetX( hGeom, 0 ),
>                            OGR_G_GetY( hGeom, 0 ),
>                            OGR_G_GetZ( hGeom, 0 ) );
>      }
>
>      else if( eType == wkbLineString )
>      {
>          int    node, count = OGR_G_GetPointCount(hGeom);
>
>          gv_shape = gv_shape_new( GVSHAPE_LINE );
>          for( node = count-1; node >= 0; node-- )
>              gv_shape_set_xyz( gv_shape, 0, node,
>                                OGR_G_GetX( hGeom, node ),
>                                OGR_G_GetY( hGeom, node ),
>                                OGR_G_GetZ( hGeom, node ) );
>      }
>
>      else if( eType == wkbPolygon )
>      {
>          OGRGeometryH hRing;
>          int        iRing = 0, nRingCount = OGR_G_GetGeometryCount(
hGeom );
>
>          gv_shape = gv_shape_new( GVSHAPE_AREA );
>
>          for( iRing = 0; iRing < nRingCount; iRing++ )
>          {
>              int node;
>              int vert_count = _getGeoPtCount( hGeom, iRing, &hRing );
>
>              //hRing      = OGR_G_GetGeometryRef( hGeom, iRing );
>              //vert_count = OGR_G_GetPointCount(hRing);
>
>              for( node = vert_count - 1; node >= 0; node-- )
>                  gv_shape_set_xyz( gv_shape, iRing, node,
>                                    OGR_G_GetX( hRing, node ),
>                                    OGR_G_GetY( hRing, node ),
>                                    OGR_G_GetZ( hRing, node ) );
>          }
>      }
>
>      else if( eType == wkbMultiPolygon )
>      {
>          int iPoly, nShapeRing = 0;
>
>          gv_shape = gv_shape_new( GVSHAPE_AREA );
>
>          for( iPoly = 0; iPoly < OGR_G_GetGeometryCount( hGeom );
iPoly++ )
>          {
>              //OGRGeometryH hPoly, hRing;
>              OGRGeometryH hPoly;
>              int         iRing, nRingCount;
>
>              hPoly      = OGR_G_GetGeometryRef( hGeom, iPoly );
>              nRingCount = OGR_G_GetGeometryCount( hPoly );
>
>              for( iRing = 0; iRing < nRingCount; iRing++ )
>              {
>                  OGRGeometryH hRing;
>                  int vert_count = _getGeoPtCount( hPoly, iRing, &hRing );
>                  int node;
>
>                  //hRing      = OGR_G_GetGeometryRef( hPoly, iRing );
>                  //vert_count = OGR_G_GetPointCount(hRing);
>
>                  for( node = vert_count - 1; node >= 0; node-- )
>                      gv_shape_set_xyz( gv_shape, nShapeRing, node,
>                                       OGR_G_GetX( hRing, node ),
>                                       OGR_G_GetY( hRing, node ),
>                                       OGR_G_GetZ( hRing, node ) );
>                  nShapeRing++;
>              }
>          }
>      }
>
>      else if( eType == wkbGeometryCollection
>               || eType == wkbMultiLineString
>               || eType == wkbMultiPoint )
>      {
>          int         iGeom, nGeomCount;
>
>          nGeomCount = OGR_G_GetGeometryCount( hGeom );
>
>          gv_shape = gv_shape_new( GVSHAPE_COLLECTION );
>
>          for( iGeom = 0; iGeom < nGeomCount; iGeom++ )
>          {
>              OGRGeometryH hSubGeom = OGR_G_GetGeometryRef( hGeom, iGeom );
>              GvShape *sub_shape;
>
>              sub_shape = ogr_geometry_to_gv_shape( hSubGeom );
>              gv_shape_collection_add_shape( gv_shape, sub_shape );
>          }
>      }
>
>      return gv_shape;
> }

From warmerdam at pobox.com  Thu May 13 11:10:04 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Re: how to extract data from OGR
In-Reply-To: <003301c43900$6212a9b0$8500000a@funny>
References: <001d01c438f4$e2a58310$8500000a@funny> <40A38548.6080302@pobox.com> <003301c43900$6212a9b0$8500000a@funny>
Message-ID: <40A38FCC.20206@pobox.com>

Jacob Bensabat wrote:
> Hi and thanks a lot for your help
> Indeed I work using C++ instead of C. Please indicate if there are major
> issues that I should be aware
> of (so I can start on the right foot), sample code using c++ would be great.
> Also could you show how I can querry for PENS, BRUSHES, patterns etc.
> Sorry to bother, but while the lib. looks exciting, the learning curve is
> really steep.


Jacob,

I have placed the code used by MapServer to read OGR data on the web.  This
includes support for reading the style information and using it.  However,
this is *not* a simple example.  It is real live code with lots of complexity
not useful to you.

   http://gdal.velocet.ca/~warmerda/mapogr.cpp.txt

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jcable at gi.alaska.edu  Thu May 13 16:49:20 2004
From: jcable at gi.alaska.edu (Jay Cable)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] ArcSDE raster driver for gdal
In-Reply-To: <40A2D6CC.2070104@pobox.com>
References: <Pine.LNX.4.58.0405121030500.20171@dino.gi.alaska.edu>
 <40A2D6CC.2070104@pobox.com>
Message-ID: <Pine.LNX.4.58.0405131004400.13287@dino.gi.alaska.edu>

On Wed, 12 May 2004, Frank Warmerdam wrote:

=> > Which leads me to my question: Has anyone implemented an arcsde
=> > raster driver for gdal?   Are there any plans to do so in the future?
=>
=> Jay,
=>
=> I have a general interest in implementing this but no funding party, and
=> perhaps more importantly, I don't have access to ArcSDE.  I don't have the
=> software running here.  However, if you were interested in implementing a
=> driver, I would be willing to provide some support.
=>

I am pretty interested in making a driver.  It would be a lot of use to
our organization and hopefully other folks would find it useful.  I have
started looking at it, and from the gdal side, it seems fairly straight
forward.

A question though - could you point me to one of the existing drivers
that would make the best model for the arcsde raster driver?

My thanks,
  -Jay

From jbensabat at ewre.com  Fri May 14 08:57:05 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Re: Re: how to extract data from OGR
References: <001d01c438f4$e2a58310$8500000a@funny> <40A38548.6080302@pobox.com> <003301c43900$6212a9b0$8500000a@funny> <40A38FCC.20206@pobox.com>
Message-ID: <002701c439b2$f5c4e4e0$8500000a@funny>

Thanks a lot
It looks more complicated indeed but more complete.
jac

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
Newsgroups: gmane.comp.gis.gdal.devel
Sent: Thursday, May 13, 2004 5:10 PM
Subject: Re: Re: how to extract data from OGR


> Jacob Bensabat wrote:
> > Hi and thanks a lot for your help
> > Indeed I work using C++ instead of C. Please indicate if there are major
> > issues that I should be aware
> > of (so I can start on the right foot), sample code using c++ would be
great.
> > Also could you show how I can querry for PENS, BRUSHES, patterns etc.
> > Sorry to bother, but while the lib. looks exciting, the learning curve
is
> > really steep.
>
>
> Jacob,
>
> I have placed the code used by MapServer to read OGR data on the web.
This
> includes support for reading the style information and using it.  However,
> this is *not* a simple example.  It is real live code with lots of
complexity
> not useful to you.
>
>    http://gdal.velocet.ca/~warmerda/mapogr.cpp.txt
>
> Best regards,
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent

From sholl at gmx.net  Sat May 15 10:10:26 2004
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] usage of OGR with spat-switch and usage in GRASS
Message-ID: <20040515161026.703bf971@kermit.wg.de>

Dear Developers,

It seems that spatial-switch in GRASS is ignored when using
polygon-shapes. Lines work as espected.
ogr2ogr works as it should.


OGR in GRASS with lines:
v.in.ogr dsn=/tmp layer=roads out=roads_cut \
spatial=596400,4917720,604110,4924500 type=line

works as espected. -> http:www.gdf-hannover.de/holl/tmp/roads_grass.png

ogr2ogr with lines:
ogr2ogr -f "Esri Shapefile" -spat 596400 4917720 604110 4924500
/tmp/roads_ogr.shp  /tmp/roads.shp

works as espected. ->
http://www.gdf-hannover.de/holl/tmp/roads_ogr.png

OGR in GRASS with areas:
v.in.ogr dsn=/tmp layer=soils out=soils_grass \
spatial=596400,4917720,604110,4924500 type=boundary

does not work as expected: ->
http://www.gdf-hannover.de/holl/tmp/soils_grass.png

ogr2ogr with areas:
ogr2ogr -f "Esri Shapefile" -spat 596400 4917720 604110 4924500
/tmp/soils_ogr.shp  /tmp/soils.shp

works as espected. ->
http://www.gdf-hannover.de/holl/tmp/soils_ogr.png

btw. it would be nice to have status-messages what ogr2ogr just did. the
above command does not return a success-message...

To reproduce this shape-fiels of soils.shp and roads.shp are placed
here:
http://www.gdf-hannover.de/holl/tmp/ogr_grass_spearfish.tgz

Thanks for any hints.

 Cheers
	Stephan Holl

-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040515/bb2aa6c9/attachment.bin
From marisap at telkomsa.net  Sat May 15 12:52:15 2004
From: marisap at telkomsa.net (L Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Quick Question Regarding Style String Management
In-Reply-To: <20040515161026.703bf971@kermit.wg.de>
Message-ID: <BKEKKNEPIPMJLIAAMCLOKEBACAAA.marisap@telkomsa.net>

Hi Frank,

I've got a quick question for you - regarding the code below: which of these
objects should I delete when I'm finished with it - the Style Manager and
the Style Tool or just the Style Manager?

      OGRStyleTable oStyleTable;
      OGRStyleTool* poStyleTool;
      OGRStyleMgr*  poStyleMgr = new OGRStyleMgr(&oStyleTable);

      poStyleMgr->GetStyleString(poFeature);
      for (int k=0; k < poStyleMgr->GetPartCount(); k++)
      {
         poStyleTool = poStyleMgr->GetPart(k);
         switch(poStyleTool->GetType())
         {
           case OGRSTCNone: cout << "Tool Type: None" << endl;
            break;
           case OGRSTCPen: cout << "Tool Type: Pen" << endl;
            break;
           case OGRSTCBrush: cout << "Tool Type: Brush" << endl;
            break;
           case OGRSTCSymbol: cout << "Tool Type: Symbol" << endl;
            break;
           case OGRSTCLabel: cout << "Tool Type: Label" << endl;
            break;
         }
      }

Thanks in advance,

Louis Pool.

BTW: Everything seems to be working super now with the new OpenEV_FW
binaries.


From marisap at telkomsa.net  Sat May 15 13:27:29 2004
From: marisap at telkomsa.net (L Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Quick Question Regarding Style String Management
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOKEBACAAA.marisap@telkomsa.net>
Message-ID: <BKEKKNEPIPMJLIAAMCLOAEBBCAAA.marisap@telkomsa.net>

Ok. Here's another one -

Is there a function in the Style Library that can parse the Pattern String
of a Pen Tool - or should I parse it myself? I know I'm being a bit lazy - I
can easily use the "px" chars as token delimiters - but I would like to know
whether there are functions (ones that I might be missing) to parse the
Parameters one gets from the Style Tools.

Thanks,
Louis.


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of L Pool
Sent: 15 May 2004 06:52
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Quick Question Regarding Style String Management


Hi Frank,

I've got a quick question for you - regarding the code below: which of these
objects should I delete when I'm finished with it - the Style Manager and
the Style Tool or just the Style Manager?

      OGRStyleTable oStyleTable;
      OGRStyleTool* poStyleTool;
      OGRStyleMgr*  poStyleMgr = new OGRStyleMgr(&oStyleTable);

      poStyleMgr->GetStyleString(poFeature);
      for (int k=0; k < poStyleMgr->GetPartCount(); k++)
      {
         poStyleTool = poStyleMgr->GetPart(k);
         switch(poStyleTool->GetType())
         {
           case OGRSTCNone: cout << "Tool Type: None" << endl;
            break;
           case OGRSTCPen: cout << "Tool Type: Pen" << endl;
            break;
           case OGRSTCBrush: cout << "Tool Type: Brush" << endl;
            break;
           case OGRSTCSymbol: cout << "Tool Type: Symbol" << endl;
            break;
           case OGRSTCLabel: cout << "Tool Type: Label" << endl;
            break;
         }
      }

Thanks in advance,

Louis Pool.

BTW: Everything seems to be working super now with the new OpenEV_FW
binaries.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From jbensabat at ewre.com  Sun May 16 02:59:43 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Getting Data From OGR
Message-ID: <009101c43b13$5e06fc30$8600000a@ewrenini>

Hi 
I have now a conceptual question. I went over the file you have posted and what I see is that you have defined other containers for 
processing the data stored in the OGR layers.  What is the rationale for that ?
Would it be justified to use directly OGR ? If not what is the reason ?
thanks
jac.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040516/62bbdb89/attachment.html
From katrin.amlacher at joanneum.at  Mon May 17 06:41:53 2004
From: katrin.amlacher at joanneum.at (Amlacher Katrin)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] statistics of a band
Message-ID: <c8a4ti$i6r$1@sea.gmane.org>

Hi,

many file formats supports storing the statistic of a band. For my work 
it is important to read and write such statistic (inclusive mean and 
stdev ). I have seen, that HFA can read the statistic, but I couldn't 
find an interface to get the data.

Are there any interfaces for reading and writing statistical data (other 
than minimum and maximum) planned for gdal?

What is the best way to read and write statistical data at the moment?


Thanks for your help

Katrin, who just has started to use GDAL



From marisap at telkomsa.net  Sun May 16 16:59:31 2004
From: marisap at telkomsa.net (L Pool)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Label Styles and MapInfo Formats
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOAEBBCAAA.marisap@telkomsa.net>
Message-ID: <BKEKKNEPIPMJLIAAMCLOOEBBCAAA.marisap@telkomsa.net>

Hi,

I'm using OGR Style String Management to manage the Styles from Vector Map
Formats. Sofar its been going well. Because I'd like to be able to handle a
variety of Vector Maps, I'd like to stick to the common interface provided
by the OGR Style Tools and Style Definitions. And not delve into the Field
Definitions of the Vector Tables.

Currently I've hit a bit of a hitch with one of the Vector Formats I've been
processing - the Table is defined as (below is an excerpt from the console
output of my program):

For layer 2
Layer Schema Definition   - Country_Name
With 3 Field(s)
Field 1 - Name: "Countries" Type: "String"
Field 2 - Name: "Longitude" Type: "Double"
Field 3 - Name: "Latitude" Type: "Double"
Layer has 64 features
Layer has a Geographic Spatial Ref
Layer has bounds - (73.546,-42.04) to (229.78,46.77)

The Geometry is OGRPoint and one would expect that the Point would the
Lat/Long pair where the Country Name should be placed - but the Style Tool
is not defined as a Label Tool and the Country Name Text is therefore not
available by using the Style Tools. For the moment I'm hacking it a bit by
looking for Fields defined as String when getting an OGRPoint Geometry and
then extracting the Field Value from the Feature - but I would like to know
if there is a more eloquent and generic way to acquire the Text.

Regards,
Louis Pool.



From normanb at comsine.co.uk  Mon May 17 10:16:43 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] gdalwarp
References: <028301c4384d$cf2aea70$0600a8c0@train2> <40A27C9B.60707@pobox.com>
Message-ID: <006d01c43c19$94d3bd50$0600a8c0@train2>

Hi,

thanks for the info on GDALwarp it is working fine now.  My question is I
have an algorithm for ortho-correction of geotiff imagery that I would like
to validate.  Does GDAL support ortho-correction or are there any other open
source routines that I could use?

Many thanks,

Norman Barker


From j.l.h.hartmann at uva.nl  Mon May 17 10:23:14 2004
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] gdalwarp
In-Reply-To: <006d01c43c19$94d3bd50$0600a8c0@train2>
References: <028301c4384d$cf2aea70$0600a8c0@train2> <40A27C9B.60707@pobox.com> <006d01c43c19$94d3bd50$0600a8c0@train2>
Message-ID: <40A8CAD2.6010505@uva.nl>

Norman Barker wrote:

> 
> thanks for the info on GDALwarp it is working fine now.  My question is I
> have an algorithm for ortho-correction of geotiff imagery that I would like
> to validate.  Does GDAL support ortho-correction or are there any other open
> source routines that I could use?
> 

GRASS (grass.itc.it) has a suite of ortho rectifying programs 
(i.ortho.photo)

Jan

From warmerdam at pobox.com  Mon May 17 10:30:16 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] statistics of a band
In-Reply-To: <c8a4ti$i6r$1@sea.gmane.org>
References: <c8a4ti$i6r$1@sea.gmane.org>
Message-ID: <40A8CC78.2030208@pobox.com>

Amlacher Katrin wrote:
> Hi,
> 
> many file formats supports storing the statistic of a band. For my work 
> it is important to read and write such statistic (inclusive mean and 
> stdev ). I have seen, that HFA can read the statistic, but I couldn't 
> find an interface to get the data.
> 
> Are there any interfaces for reading and writing statistical data (other 
> than minimum and maximum) planned for gdal?
> 
> What is the best way to read and write statistical data at the moment?

Katrin,

At the time of your writing this message there was no way to get the statistics
information from Imagine files via the GDAL API.  However, I have added support
for min/max to be returned via the GetMinimum() and GetMaximum() methods and for
the rest of the statistics node information to be returned as metadata.  So now,
a gdalinfo report on a .img file might look like this:


Driver: HFA/Erdas Imagine Images (.img)
Size is 278, 190
Coordinate System is:
LOCAL_CS["TM103_30",
     UNIT["meters",1]]
Origin = (465807.000000,930351.000000)
Pixel Size = (20.00000000,-20.00000000)
Corner Coordinates:
Upper Left  (  465807.000,  930351.000)
Lower Left  (  465807.000,  926551.000)
Upper Right (  471367.000,  930351.000)
Lower Right (  471367.000,  926551.000)
Center      (  468587.000,  928451.000)
Band 1 Block=64x64 Type=Float64, ColorInterp=Undefined
   Min=1356.400 Max=3857.100
   Overviews: 68x46
Metadata:
   STATISTICS_MINIMUM=1356.4000244141
   STATISTICS_MAXIMUM=3857.1000976562
   STATISTICS_MEAN=2723.8083008922
   STATISTICS_MEDIAN=2772.8121752739
   STATISTICS_MODE=3163.546561718
   STATISTICS_STDDEV=569.70285788543

If you need this capability you will need to upgrade to the latest GDAL from
CVS or if you already have a reasonably recent version you should be able
to replace gdal/frmts/hfa/hfadataset.cpp with the file at the following
url and rebuild:

   http://gdal.velocet.ca/~warmerda/hfadataset.cpp

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Jake.Leonard at itron.com  Mon May 17 17:47:29 2004
From: Jake.Leonard at itron.com (Leonard, Jake)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] WinCE port
Message-ID: <DD8C928F2807064EACBBB0A4BB51A8DC02FB45@spokane-mx3.itron.com>

Howdy All,

We currently use proj4 and gdal in our desktop applications here.  We are looking into doing coordinate system transformations on handhelds now (specifically pocketpc 2003)(we would be needing the ogr part of gdal, but none of the raster stuff right now).  I started playing around trying to get proj4 to compile for pocketpc and realized that it is more than a trivial task.  I am curious if anyone out there has done something like this.  If anyone has code/tips/etc on this port, I would appreciate them before I start the job.

thanks,
Jake

From warmerdam at pobox.com  Sat May 15 12:58:03 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Quick Question Regarding Style String Management
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOKEBACAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOKEBACAAA.marisap@telkomsa.net>
Message-ID: <40A64C1B.7090700@pobox.com>

L Pool wrote:
> Hi Frank,
> 
> I've got a quick question for you - regarding the code below: which of these
> objects should I delete when I'm finished with it - the Style Manager and
> the Style Tool or just the Style Manager?
> 
>       OGRStyleTable oStyleTable;
>       OGRStyleTool* poStyleTool;
>       OGRStyleMgr*  poStyleMgr = new OGRStyleMgr(&oStyleTable);
> 
>       poStyleMgr->GetStyleString(poFeature);
>       for (int k=0; k < poStyleMgr->GetPartCount(); k++)
>       {
>          poStyleTool = poStyleMgr->GetPart(k);
>          switch(poStyleTool->GetType())
>          {
>            case OGRSTCNone: cout << "Tool Type: None" << endl;
>             break;
>            case OGRSTCPen: cout << "Tool Type: Pen" << endl;
>             break;
>            case OGRSTCBrush: cout << "Tool Type: Brush" << endl;
>             break;
>            case OGRSTCSymbol: cout << "Tool Type: Symbol" << endl;
>             break;
>            case OGRSTCLabel: cout << "Tool Type: Label" << endl;
>             break;
>          }
>       }
> 
> Thanks in advance,

Louis,

You need to delete the style tool and the style manager.  I see the
style API has no reference documentation.  That sucks.

> BTW: Everything seems to be working super now with the new OpenEV_FW
> binaries.

Sweet.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cgn at globexplorer.com  Mon May 17 23:47:33 2004
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] HDF config question...
Message-ID: <71E37EF6B7DCC1499CEA0316A25683280147356B@loki.wc.globexplorer.net>

Hmmm - trying to configure for HDF4 support, but having problems picking up the hdf libs :-(

suggestions/comments welcomed.

thanks in advance-

Chris

------------------------------------------------

did a fresh "make"/"make install" of the latest/greatest HDF4 stuff:

[root@gateway2earth HDF4.2r0]# pwd
/home/user1/src/HDF4.2r0

[root@gateway2earth HDF4.2r0]# find . -name lib\* -print
./hdf/src/libdf.a
./mfhdf/libsrc
./mfhdf/libsrc/libmfhdf.a
./mfhdf/port/libudport.a
[root@gateway2earth HDF4.2r0]#

[root@gateway2earth HDF4.2r0]# find /usr/local -name \*hdf\*.a -print
/usr/local/lib/libmfhdf.a
[root@gateway2earth HDF4.2r0]#

then fresh CVS checkout of gdal; but having trouble getting it to configure in the HDF libs; I keep getting :

 ./configure --with-kakadu=/home/user1/src/kakadu_v4_0-00115C --with-proj --with-grass=/usr/local/grass53 --with-hdf4=/usr/local
checking build system type... i686-pc-linux-gnu

...blah...blah..blah...

configure: error: HDF4 support requested with arg /usr/local, but neither hdf4 nor mfhdf lib found




From jbensabat at ewre.com  Tue May 18 04:14:49 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Re: how to extract data from OGR
References: <001d01c438f4$e2a58310$8500000a@funny>
Message-ID: <001c01c43cb0$327a6810$8500000a@funny>

Hi 
I have now a conceptual question. I went over the file you have posted and what I see is that you have defined other containers for 
processing the data stored in the OGR layers.  What is the rationale for that ?
Would it be justified to use directly OGR ? If not what is the reason ?
thanks
jac.
  ----- Original Message ----- 
  From: Jacob Bensabat 
  Newsgroups: gmane.comp.gis.gdal.devel
  Sent: Thursday, May 13, 2004 4:16 PM
  Subject: how to extract data from OGR


  Hello
  I have started to use gdal and OGR and I have the following question,
  I am loading a mapinfo map into a OGR structure, and I would like to be able to access all its components (lines, polygon, points ).
  The problem is that except functions like DumpReadable, I do not see any public method in the code
  that allows access to the data. 

  Am I missing something ? Is there a way to get to the data ?
  an example (s) or pointer to examples would be very welcome.
  thanks 
  jac.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040518/a398d06c/attachment.html
From dron at ak4719.spb.edu  Tue May 18 04:32:21 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] WinCE port
In-Reply-To: <DD8C928F2807064EACBBB0A4BB51A8DC02FB45@spokane-mx3.itron.com>
References: <DD8C928F2807064EACBBB0A4BB51A8DC02FB45@spokane-mx3.itron.com>
Message-ID: <20040518083221.GD9568@ak4719.spb.edu>

On Mon, May 17, 2004 at 02:47:29PM -0700, Leonard, Jake wrote:
> We currently use proj4 and gdal in our desktop applications here.  We
> are looking into doing coordinate system transformations on handhelds
> now (specifically pocketpc 2003)(we would be needing the ogr part of
> gdal, but none of the raster stuff right now).  I started playing
> around trying to get proj4 to compile for pocketpc and realized that
> it is more than a trivial task.  I am curious if anyone out there has
> done something like this.  If anyone has code/tips/etc on this port, I
> would appreciate them before I start the job.

I have tried to use Embedded VC 4.0 with the libtiff library and found a
big problem: how to deduce the compiler used to build the code? MSVC
defines _MSC_VER constant which can be used to identify the compiler.
Does something similar exist for the embedded edition, which can be used
to distinguish it from other compilers and from the 'normal' MSVC? Or we
should use manually defined flag in the configuration files?

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Tue May 18 04:43:05 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] HDF config question...
In-Reply-To: <71E37EF6B7DCC1499CEA0316A25683280147356B@loki.wc.globexplorer.net>
References: <71E37EF6B7DCC1499CEA0316A25683280147356B@loki.wc.globexplorer.net>
Message-ID: <20040518084305.GE9568@ak4719.spb.edu>

On Mon, May 17, 2004 at 08:47:33PM -0700, Chris G. Nicholas wrote:
> [root@gateway2earth HDF4.2r0]# pwd
> /home/user1/src/HDF4.2r0
> 
> [root@gateway2earth HDF4.2r0]# find . -name lib\* -print
> ./hdf/src/libdf.a
> ./mfhdf/libsrc
> ./mfhdf/libsrc/libmfhdf.a
> ./mfhdf/port/libudport.a
> [root@gateway2earth HDF4.2r0]#
> 
> [root@gateway2earth HDF4.2r0]# find /usr/local -name \*hdf\*.a -print
> /usr/local/lib/libmfhdf.a

HDF4 consists from two libraries: libdf and libmfhdf. Both ones should
be available (as well as appropriate headers).

> [root@gateway2earth HDF4.2r0]#
> 
> then fresh CVS checkout of gdal; but having trouble getting it to configure in the HDF libs; I keep getting :
> 
>  ./configure --with-kakadu=/home/user1/src/kakadu_v4_0-00115C --with-proj --with-grass=/usr/local/grass53 --with-hdf4=/usr/local

You don't need to specify /usr/local, because it is default place to
search the library (on Linux). Even --with-hdf4 switch is not required,
script will search for the library automatically. And you don't need to
install libhdf4 system wide, --with-hdf4=/home/user1/src/HDF4.2r0 should
be enough.

> checking build system type... i686-pc-linux-gnu
> 
> ...blah...blah..blah...
> 
> configure: error: HDF4 support requested with arg /usr/local, but neither hdf4 nor mfhdf lib found

Blah-blah-blah is the most interesting part of the problem :-) Please,
show the end of the config.log file, it is hard to tell what's going
wrong without tests log.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From cgn at globexplorer.com  Tue May 18 11:35:03 2004
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] HDF config question...
Message-ID: <71E37EF6B7DCC1499CEA0316A25683280147356D@loki.wc.globexplorer.net>

OK - more clues from the "blah..blah..." section; and indeed interesting.

The last part of config.log shows it trying to compile a simple program using the "SDreaddata" routine, but can't, which is really wierd....

(hoping to not become an expert in gcc linking... )

Chris

----------------------------------------------------

[user1@gateway2earth /tmp]$ more c.c

extern char SDreaddata ();
main ()
 {
 SDreaddata ();
   ;
   return 0;
 }

[user1@gateway2earth /tmp]% gcc -L/usr/local/lib -lmfhdf c.c
/tmp/cccvk9yh.o(.text+0x11): In function `main':
: undefined reference to `SDreaddata'
collect2: ld returned 1 exit status


[user1@gateway2earth /tmp]$
[root@gateway2earth lib]% nm /usr/local/lib/libmfhdf.a | grep SDreaddata
000003d0 T SDreaddata
         U SDreaddata
[root@gateway2earth lib]%

[user1@gateway2earth /tmp]$gcc --version
gcc (GCC) 3.2.3 20030502 (Red Hat Linux 3.2.3-20)
Copyright (C) 2002 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
 


-----Original Message-----
From:	Andrey Kiselev [mailto:dron@ak4719.spb.edu]
Sent:	Tue 5/18/2004 1:43 AM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	Re: [Gdal-dev] HDF config question...
On Mon, May 17, 2004 at 08:47:33PM -0700, Chris G. Nicholas wrote:
> [root@gateway2earth HDF4.2r0]# pwd
> /home/user1/src/HDF4.2r0
> 
> [root@gateway2earth HDF4.2r0]# find . -name lib\* -print
> ./hdf/src/libdf.a
> ./mfhdf/libsrc
> ./mfhdf/libsrc/libmfhdf.a
> ./mfhdf/port/libudport.a
> [root@gateway2earth HDF4.2r0]#
> 
> [root@gateway2earth HDF4.2r0]# find /usr/local -name \*hdf\*.a -print
> /usr/local/lib/libmfhdf.a

HDF4 consists from two libraries: libdf and libmfhdf. Both ones should
be available (as well as appropriate headers).

> [root@gateway2earth HDF4.2r0]#
> 
> then fresh CVS checkout of gdal; but having trouble getting it to configure in the HDF libs; I keep getting :
> 
>  ./configure --with-kakadu=/home/user1/src/kakadu_v4_0-00115C --with-proj --with-grass=/usr/local/grass53 --with-hdf4=/usr/local

You don't need to specify /usr/local, because it is default place to
search the library (on Linux). Even --with-hdf4 switch is not required,
script will search for the library automatically. And you don't need to
install libhdf4 system wide, --with-hdf4=/home/user1/src/HDF4.2r0 should
be enough.

> checking build system type... i686-pc-linux-gnu
> 
> ...blah...blah..blah...
> 
> configure: error: HDF4 support requested with arg /usr/local, but neither hdf4 nor mfhdf lib found

Blah-blah-blah is the most interesting part of the problem :-) Please,
show the end of the config.log file, it is hard to tell what's going
wrong without tests log.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev





From TMitchell at lignum.com  Tue May 18 12:18:59 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] BSQ data
Message-ID: <OF241D2642.0B77BE31-ON88256E98.0059623E-88256E98.0059A0E7@Riverside.bc.ca>

I've got this global landcover .bsq file and I'm trying to get at it with 
gdal.  I see in the envi format docs, it references bsq but through some 
hdr file.  I didn't get an hdr file.  Anyone know what I need to do to get 
reading in BSQ data?  Any tips?

Tyler

From gdal at geoworld.de  Tue May 18 12:54:02 2004
From: gdal at geoworld.de (Nicol Hermann)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Compiling gdal 1.2.0 with static-proj4
Message-ID: <1084899241.1181.2.camel@katrin>

Hi List,

i trying to compile gdal 1.2.0 with the following configure statement on
my Debian 3.0r2 box:
./configure --with-static-proj4=/usr/local --without-ld-shared

gcc/g++ --version is 2.95.4

During the make process i get the following error:

ogrct.cpp:210: warning: garbage at end of `#ifdef' argument
ogrct.cpp: In function `int LoadProjLibrary()':
ogrct.cpp:211: `pj_get_def' undeclared (first use this function)
ogrct.cpp:211: (Each undeclared identifier is reported only once
ogrct.cpp:211: for each function it appears in.)
make[1]: *** [ogrct.o] Fehler 1
make[1]: Leaving directory `/tmp/gdal/gdal-1.2.0/ogr'
make: *** [ogr-target] Fehler 2

Any clues how to fix this?
The same error appears with the CVS Version.

Many thanks
Nicol
-- 


From warmerdam at pobox.com  Tue May 18 13:15:56 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] Compiling gdal 1.2.0 with static-proj4
In-Reply-To: <1084899241.1181.2.camel@katrin>
References: <1084899241.1181.2.camel@katrin>
Message-ID: <40AA44CC.3000207@pobox.com>

Nicol Hermann wrote:
> Hi List,
> 
> i trying to compile gdal 1.2.0 with the following configure statement on
> my Debian 3.0r2 box:
> ./configure --with-static-proj4=/usr/local --without-ld-shared
> 
> gcc/g++ --version is 2.95.4
> 
> During the make process i get the following error:
> 
> ogrct.cpp:210: warning: garbage at end of `#ifdef' argument
> ogrct.cpp: In function `int LoadProjLibrary()':
> ogrct.cpp:211: `pj_get_def' undeclared (first use this function)
> ogrct.cpp:211: (Each undeclared identifier is reported only once
> ogrct.cpp:211: for each function it appears in.)
> make[1]: *** [ogrct.o] Fehler 1
> make[1]: Leaving directory `/tmp/gdal/gdal-1.2.0/ogr'
> make: *** [ogr-target] Fehler 2
> 
> Any clues how to fix this?
> The same error appears with the CVS Version.

Nicol,

What version of PROJ.4 do you have installed?  The code tries to only
use the pj_get_def function if you have PROJ.4 4.4.6 or later available
with the following check:

#ifdef PJ_VERSION >= 446
     pfn_pj_get_def = pj_get_def;
#endif

However, possibly my checking is wrong in some way.  In any event you can
just comment out the offending line.  The pj_get_def() function is just
used for some esoteric purposes, and in normal operation is not necessary.

Alternatively, install a more up-to-date version of PROJ.4.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cgt at navicon.dk  Tue May 18 17:31:33 2004
From: cgt at navicon.dk (Christian Gebauer Tveen)
Date: Wed Nov 21 11:49:10 2007
Subject: [Gdal-dev] s57
Message-ID: <40AA80B5.7000803@navicon.dk>

Hello,

I'm looking at the S57 library, and would like to know the status on 
catalog support (if anybody knows). It seems that some work has been 
done, but it has not been fully implemented ?

 I have been trying to add something onto it, but I think  I'm missing 
some background  (my trials ends up rather badly).

Hope somebody could explain a little on the issue,  so I know whether  
I'm working  towards a dead end.

Regards Christian G. Tveen

From warmerdam at pobox.com  Tue May 18 09:10:17 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: how to extract data from OGR
In-Reply-To: <001c01c43cb0$327a6810$8500000a@funny>
References: <001d01c438f4$e2a58310$8500000a@funny> <001c01c43cb0$327a6810$8500000a@funny>
Message-ID: <40AA0B39.5090203@pobox.com>

Jacob Bensabat wrote:
> Hi
> I have now a conceptual question. I went over the file you have posted 
> and what I see is that you have defined other containers for
> processing the data stored in the OGR layers.  What is the rationale for 
> that ?
> Would it be justified to use directly OGR ? If not what is the reason ?
> thanks

Jacob,

I assume you are referring to the mapogr.cpp code?  MapServer had it's own
internal feature format before OGR support was introduced, so the reader
converts to it's internal format.  I am not sure whether OGRFeature's would
have been an appropriate internal format for MapServer or not.

There are applications that use the OGRFeature as the internal format, but it
more common to have some other application specific internal format and convert
to that during an import phase.

I would add that even when different internal representations are used, it is
convenient if applications can use a similar "simple features" geometry model
unless there is a specific reason to do something different like CAD packages
requiring 3D solids and curves, or a topological GIS.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jbensabat at ewre.com  Wed May 19 04:10:10 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: Re: how to extract data from OGR
References: <001d01c438f4$e2a58310$8500000a@funny> <001c01c43cb0$327a6810$8500000a@funny> <40AA0B39.5090203@pobox.com>
Message-ID: <000901c43d78$b4bdbd40$8500000a@funny>

Hi and thanks for your message.
I must say that I enjoy this discussion.

I understand that interfaces to OGR are created whenever there is a need to
connect a software
to OGR. The point is that when studying the code you have porvided, there is
a need to
call to many functions in order to get the information needed for
rendering/drawing, which,
if done in a context of windows drawing, may alter the efficiency of the
drawing (I have not tried but I guess).

The question is whether there should be some methods within the OGR layers
that allow fast strait access to the data (points, lines, polygons,
attributes, patterns symbols and colors) instead of recursively looping
inside each layer.
then my question is if there is a reason for not having such kind of methods
(GetData, GetColor, GetSymbol, ....)
thanks
jacob

----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
Newsgroups: gmane.comp.gis.gdal.devel
Sent: Tuesday, May 18, 2004 3:10 PM
Subject: Re: Re: how to extract data from OGR


> Jacob Bensabat wrote:
> > Hi
> > I have now a conceptual question. I went over the file you have posted
> > and what I see is that you have defined other containers for
> > processing the data stored in the OGR layers.  What is the rationale for
> > that ?
> > Would it be justified to use directly OGR ? If not what is the reason ?
> > thanks
>
> Jacob,
>
> I assume you are referring to the mapogr.cpp code?  MapServer had it's own
> internal feature format before OGR support was introduced, so the reader
> converts to it's internal format.  I am not sure whether OGRFeature's
would
> have been an appropriate internal format for MapServer or not.
>
> There are applications that use the OGRFeature as the internal format, but
it
> more common to have some other application specific internal format and
convert
> to that during an import phase.
>
> I would add that even when different internal representations are used, it
is
> convenient if applications can use a similar "simple features" geometry
model
> unless there is a specific reason to do something different like CAD
packages
> requiring 3D solids and curves, or a topological GIS.
>
> Best regards,
>
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent

From dron at ak4719.spb.edu  Wed May 19 03:41:29 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] HDF config question...
In-Reply-To: <71E37EF6B7DCC1499CEA0316A25683280147356D@loki.wc.globexplorer.net>
References: <71E37EF6B7DCC1499CEA0316A25683280147356D@loki.wc.globexplorer.net>
Message-ID: <20040519074129.GA28922@ak4719.spb.edu>

On Tue, May 18, 2004 at 08:35:03AM -0700, Chris G. Nicholas wrote:
> OK - more clues from the "blah..blah..." section; and indeed
> interesting.
> 
> The last part of config.log shows it trying to compile a simple
> program using the "SDreaddata" routine, but can't, which is really
> wierd....
> 
> extern char SDreaddata ();
> main ()
>  {
>  SDreaddata ();
>    ;
>    return 0;
>  }
> 
> [user1@gateway2earth /tmp]% gcc -L/usr/local/lib -lmfhdf c.c
> /tmp/cccvk9yh.o(.text+0x11): In function `main':
> : undefined reference to `SDreaddata'
> collect2: ld returned 1 exit status

Well, I don't have any clue what is wrong with your environment. The
only thing I can recommend is to invoke gcc with the '-v -Xlinker "-t"'
options to get more verbosive output.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From Martin.Daly at cadcorp.com  Wed May 19 04:36:04 2004
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] RE: Re: WinCE port
Message-ID: <DE8A435707FBA24392E5C67F58E294AA020B72@dev001_pdc.Dev.cadcorp.net>

Andrey,

> I have tried to use Embedded VC 4.0 with the libtiff library 
> and found a big problem: how to deduce the compiler used to 
> build the code? MSVC defines _MSC_VER constant which can be 
> used to identify the compiler. Does something similar exist 
> for the embedded edition, which can be used to distinguish it 
> from other compilers and from the 'normal' MSVC? Or we should 
> use manually defined flag in the configuration files?

You can use the _WIN32_WCE constant.

We have ported libtiff to Windows CE using eVC++ 3.0, and only had to
make changes in tif_win32.c and tiffcomp.h.  I can send these, and an
eVC++ 3 .vcp, if you would like them.

Regards,
Martin Daly,
Technical Director,
Cadcorp

From dron at ak4719.spb.edu  Wed May 19 05:45:07 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] RE: Re: WinCE port
In-Reply-To: <DE8A435707FBA24392E5C67F58E294AA020B72@dev001_pdc.Dev.cadcorp.net>
References: <DE8A435707FBA24392E5C67F58E294AA020B72@dev001_pdc.Dev.cadcorp.net>
Message-ID: <20040519094507.GA12334@ak4719.spb.edu>

On Wed, May 19, 2004 at 09:36:04AM +0100, Martin Daly wrote:
> > I have tried to use Embedded VC 4.0 with the libtiff library 
> > and found a big problem: how to deduce the compiler used to 
> > build the code? MSVC defines _MSC_VER constant which can be 
> > used to identify the compiler. Does something similar exist 
> > for the embedded edition, which can be used to distinguish it 
> > from other compilers and from the 'normal' MSVC? Or we should 
> > use manually defined flag in the configuration files?
> 
> You can use the _WIN32_WCE constant.

Ok, thanks for advice.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Wed May 19 07:16:33 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] RE: Re: WinCE port
In-Reply-To: <DE8A435707FBA24392E5C67F58E294AA020B72@dev001_pdc.Dev.cadcorp.net>
References: <DE8A435707FBA24392E5C67F58E294AA020B72@dev001_pdc.Dev.cadcorp.net>
Message-ID: <20040519111633.GA23394@ak4719.spb.edu>

On Wed, May 19, 2004 at 09:36:04AM +0100, Martin Daly wrote:
> > I have tried to use Embedded VC 4.0 with the libtiff library and
> > found a big problem: how to deduce the compiler used to build the
> > code? MSVC defines _MSC_VER constant which can be used to identify
> > the compiler. Does something similar exist for the embedded edition,
> > which can be used to distinguish it from other compilers and from
> > the 'normal' MSVC? Or we should use manually defined flag in the
> > configuration files?
> 
> You can use the _WIN32_WCE constant.

It seems that the _WIN32_WCE constant is not exactly what I need:

E:\>cat t.c
#include <stdio.h>

int main()
{
    printf("%d\n", _WIN32_WCE);
    return 0;
}

E:\>cl t.c
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8804 for 80x86
Copyright (C) Microsoft Corp 1984-1998. All rights reserved.

t.c
t.c(9) : error C2065: '_WIN32_WCE' : undeclared identifier

It is not built-in constant. Do you know where it is defined?

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From Martin.Daly at cadcorp.com  Wed May 19 07:50:57 2004
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] RE: Re: WinCE port
Message-ID: <DE8A435707FBA24392E5C67F58E294AA020B76@dev001_pdc.Dev.cadcorp.net>

Andrey,

> It seems that the _WIN32_WCE constant is not exactly what I need:
> 
> E:\>cat t.c
> #include <stdio.h>
> 
> int main()
> {
>     printf("%d\n", _WIN32_WCE);
>     return 0;
> }
> 
> E:\>cl t.c
> Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 12.00.8804 for
80x86
> Copyright (C) Microsoft Corp 1984-1998. All rights reserved.
> 
> t.c
> t.c(9) : error C2065: '_WIN32_WCE' : undeclared identifier
> 
> It is not built-in constant. Do you know where it is defined?

I don't think that it is #define-d in any header file, but instead
magically appears in the CL command-line depending on the build
configurations used in eVC++.  So, trying to use it in VC++, as above,
will not work.  There is some more information here, under the heading
"The $(CePlatform) Macro":
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/dnppc2k
/html/ppc_ource.asp  You can see the following in the eVC++ screenshot:
"... /D _WIN32_WCE=$(CEVersion) ...".

We always use it something like this:

#ifdef _WIN32_WCE
#if _WIN32_WCE < 300

...

#endif
#endif

Regards,
Martin Daly,
Technical Director,
Cadcorp

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040519/833a547b/attachment.html
From ergio2000 at hotmail.com  Wed May 19 11:54:32 2004
From: ergio2000 at hotmail.com (elias ruiz)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] about grid format (write binary grid format)
Message-ID: <Sea2-F13QNbk768VF4d00013844@hotmail.com>

hello
i see your webpage and i notice that you know about raster grid format

i developed a tool in c that can read grid rasterfile, weel is not too hard, 
but now i'm working in a tool tha can write these raster files.

on the web i've found about the header file hdr.adf. in this file, there are 
16 bytes, that start at 272 position (search in google for "Arc/Info Binary 
Grid Format") that are somehow related about georeferencing. in fact, this 
16 bytes are 2 values that representing a x,y position in 8 byte double 
number format.

at the time, i can see a rasterfile, but the data is "scroll" about 3 o 4 
pixels.

i want to know if you can help me to discover how this values are calculated

thanks

ergio2000

_________________________________________________________________
MSN Amor: busca tu ? naranja http://latam.msn.com/amor/


From warmerdam at pobox.com  Wed May 19 09:51:31 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: Re: how to extract data from OGR
In-Reply-To: <000901c43d78$b4bdbd40$8500000a@funny>
References: <001d01c438f4$e2a58310$8500000a@funny> <001c01c43cb0$327a6810$8500000a@funny> <40AA0B39.5090203@pobox.com> <000901c43d78$b4bdbd40$8500000a@funny>
Message-ID: <40AB6663.1090007@pobox.com>

Jacob Bensabat wrote:
> Hi and thanks for your message.
> I must say that I enjoy this discussion.
> 
> I understand that interfaces to OGR are created whenever there is a need to
> connect a software
> to OGR. The point is that when studying the code you have porvided, there is
> a need to
> call to many functions in order to get the information needed for
> rendering/drawing, which,
> if done in a context of windows drawing, may alter the efficiency of the
> drawing (I have not tried but I guess).

Jacob,

I don't see that traversing from a polygon down to a set of rings represeted
as linearrings will add much overhead.   The x and y accessors for the linestring
positions are already inlinable so there shouldn't be any call overhead for them.

In short, I don't think there is in appropriate levels of overhead here.  However,
for high performance rendering engines it may be desirable to keep data packed
in a way that is "ready to use" with native rendering engines.  For instance,
for OpenGL applications it may be desirable to convert geometries into callable
display lists.

> The question is whether there should be some methods within the OGR layers
> that allow fast strait access to the data (points, lines, polygons,
> attributes, patterns symbols and colors) instead of recursively looping
> inside each layer.
> then my question is if there is a reason for not having such kind of methods
> (GetData, GetColor, GetSymbol, ....)

What would GetData return?

Symbolization is a complex area.  The approach taken (via styling strings) is
relatively sophisticated but does not lend itself to something as simple as
GetColor() and GetSymbol() on a feature as a feature may use multiple symbols
(or none), and there may be several colors involved in drawing a feature.

I would add that OGR was intended to be based on the OpenGIS Simple Features
model for features and geometries and that is evident to some degree is the
nature of the geometry classes.  It wasn't written to be maximally efficient
though it makes some effort to make data compact, and access reasonably fast.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed May 19 12:48:10 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] about grid format (write binary grid format)
In-Reply-To: <Sea2-F13QNbk768VF4d00013844@hotmail.com>
References: <Sea2-F13QNbk768VF4d00013844@hotmail.com>
Message-ID: <40AB8FCA.6000704@pobox.com>

elias ruiz wrote:
> hello
> i see your webpage and i notice that you know about raster grid format
> 
> i developed a tool in c that can read grid rasterfile, weel is not too 
> hard, but now i'm working in a tool tha can write these raster files.
> 
> on the web i've found about the header file hdr.adf. in this file, there 
> are 16 bytes, that start at 272 position (search in google for "Arc/Info 
> Binary Grid Format") that are somehow related about georeferencing. in 
> fact, this 16 bytes are 2 values that representing a x,y position in 8 
> byte double number format.
> 
> at the time, i can see a rasterfile, but the data is "scroll" about 3 o 
> 4 pixels.
> 
> i want to know if you can help me to discover how this values are 
> calculated

Elias,

I believe I ran into a similar problem as you.  The values are clearly
a georeferenced location of some kind, but I wasn't able to deduce
exactly how they related.  I would add that I tried a few times to
write Arc/Info binary grid files but I was never able to get the
georeferencing working properly with Arcview and gave up.   If you
are successful I would appreciate information to update the format
document and a chance to collaborate (ie. I would like to pick your
brain).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From davidlugan at hotmail.com  Wed May 19 15:18:19 2004
From: davidlugan at hotmail.com (David Lugan)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] BSB4-format
Message-ID: <Sea2-F588fqzdEQuAOU00044d9e@hotmail.com>

Hello GDAL-Dev,


Does GDAL support BSB4-format  ( BSB Nautical Chart ) ?  Are there future 
plans for this support?



Baghdad City Street maps from Maptech are in the process of being shipped to 
me.

http://www.maptech.com/products/baghdad/index.cfm

They are in BSB4-format.

As I understand a custom version of Maptech's Offshore Navigator Lite will 
read these maps but doesn't have the ability to export them to any other 
format.

For now I plan to take .TIF screen shots and create my own .TFW georeference 
files.  These two files make a GeoTIFF that GDAL can read.



- David Lugan



From marisap at telkomsa.net  Wed May 19 18:45:35 2004
From: marisap at telkomsa.net (L Pool)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: Re: how to extract data from OGR
In-Reply-To: <40AB6663.1090007@pobox.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOOEBFCAAA.marisap@telkomsa.net>

Hi Jacob,

I agree with what Frank says here. If you're worried about rendering speed
then you shouldn't be rendering directly from the Vector File.

I don't even keep them in memory after reading them to a reduced structure
that only contains vertices (or the like) - some of these Vector Maps are
huge!.

I've written a viewer in OpenGL that utilizes the OGR library to capture
Vector Data. I use Display Lists of GL_LINE_STRIPs (GL_POLYGON are a bit
slower) to render each (OGR)Geometry, organized according to their Layers.

Also, I check whether a Geometry intersects with my viewing volume before
calling its Display List - this reduces overhead considerably - its not
necessary to draw things that are out of your field of view. And if a
Layer's Envelope is outside of your Viewing Volume you can avoid iterating
thru its (child) Geometries.

Currently I'm loading 400 MB Vector Files with Raster Maps to boot and my
application never goes below 50 fps on my Radeon 9600 Pro.

Ok. Now for something totally unrelated - this is a question for pretty much
anyone who can help me out with a little bit of knowledge on Geographic
Projections in GDAL.

I've written a few Geographic conversions for certain Projection
Algorithms - but the maths that I wrote them from does not have parameters
for "False Eastings" and "Fast Northings" which the OGRSpatialReference
class definitely has. E.g.

Albers Conic Equal Area:

OGRErr OGRSpatialReference::SetACEA  (  double    dfStdP1,
  double    dfStdP2,
  double    dfCenterLat,
  double    dfCenterLong,
  double    dfFalseEasting,
  double    dfFalseNorthing
 )

you have your Standard Parallels and the Center Lat/Long pair (which is all
I use in my projection algorithm) - but where do the False Easting and False
Northing params come from? I know what an Easting and a Northing is - I
don't know how it fits into the projection algorithm tho. Does it have to do
with your own Cartesian reference?

Very puzzled!

Louis.






-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 19 May 2004 03:52
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Re: Re: how to extract data from OGR


Jacob Bensabat wrote:
> Hi and thanks for your message.
> I must say that I enjoy this discussion.
>
> I understand that interfaces to OGR are created whenever there is a need
to
> connect a software
> to OGR. The point is that when studying the code you have porvided, there
is
> a need to
> call to many functions in order to get the information needed for
> rendering/drawing, which,
> if done in a context of windows drawing, may alter the efficiency of the
> drawing (I have not tried but I guess).

Jacob,

I don't see that traversing from a polygon down to a set of rings represeted
as linearrings will add much overhead.   The x and y accessors for the
linestring
positions are already inlinable so there shouldn't be any call overhead for
them.

In short, I don't think there is in appropriate levels of overhead here.
However,
for high performance rendering engines it may be desirable to keep data
packed
in a way that is "ready to use" with native rendering engines.  For
instance,
for OpenGL applications it may be desirable to convert geometries into
callable
display lists.

> The question is whether there should be some methods within the OGR layers
> that allow fast strait access to the data (points, lines, polygons,
> attributes, patterns symbols and colors) instead of recursively looping
> inside each layer.
> then my question is if there is a reason for not having such kind of
methods
> (GetData, GetColor, GetSymbol, ....)

What would GetData return?

Symbolization is a complex area.  The approach taken (via styling strings)
is
relatively sophisticated but does not lend itself to something as simple as
GetColor() and GetSymbol() on a feature as a feature may use multiple
symbols
(or none), and there may be several colors involved in drawing a feature.

I would add that OGR was intended to be based on the OpenGIS Simple Features
model for features and geometries and that is evident to some degree is the
nature of the geometry classes.  It wasn't written to be maximally efficient
though it makes some effort to make data compact, and access reasonably
fast.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon May 17 10:27:37 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] gdalwarp
In-Reply-To: <006d01c43c19$94d3bd50$0600a8c0@train2>
References: <028301c4384d$cf2aea70$0600a8c0@train2> <40A27C9B.60707@pobox.com> <006d01c43c19$94d3bd50$0600a8c0@train2>
Message-ID: <40A8CBD9.5040806@pobox.com>

Norman Barker wrote:
> Hi,
> 
> thanks for the info on GDALwarp it is working fine now.  My question is I
> have an algorithm for ortho-correction of geotiff imagery that I would like
> to validate.  Does GDAL support ortho-correction or are there any other open
> source routines that I could use?

Norman,

GDAL does not include ortho correction support.  There is a module in GRASS
for ortho correction though I don't know any details about it.  You might
check it out.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cgn at globexplorer.com  Thu May 20 00:06:26 2004
From: cgn at globexplorer.com (Chris G. Nicholas)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] gdalwarp
Message-ID: <71E37EF6B7DCC1499CEA0316A25683280147357F@loki.wc.globexplorer.net>

see: http://grass.itc.it/gdp/html_grass5/html/i.ortho.photo.html

Chris


-----Original Message-----
From:	Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent:	Mon 5/17/2004 7:27 AM
To:	gdal-dev@remotesensing.org
Cc:	
Subject:	Re: [Gdal-dev] gdalwarp
Norman Barker wrote:
> Hi,
> 
> thanks for the info on GDALwarp it is working fine now.  My question is I
> have an algorithm for ortho-correction of geotiff imagery that I would like
> to validate.  Does GDAL support ortho-correction or are there any other open
> source routines that I could use?

Norman,

GDAL does not include ortho correction support.  There is a module in GRASS
for ortho correction though I don't know any details about it.  You might
check it out.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev





From warmerdam at pobox.com  Thu May 20 01:18:16 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: Re: how to extract data from OGR
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOOEBFCAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOOEBFCAAA.marisap@telkomsa.net>
Message-ID: <40AC3F98.5000109@pobox.com>

L Pool wrote:
> Ok. Now for something totally unrelated - this is a question for pretty much
> anyone who can help me out with a little bit of knowledge on Geographic
> Projections in GDAL.
> 
> I've written a few Geographic conversions for certain Projection
> Algorithms - but the maths that I wrote them from does not have parameters
> for "False Eastings" and "Fast Northings" which the OGRSpatialReference
> class definitely has. E.g.
> 
> Albers Conic Equal Area:
> 
> OGRErr OGRSpatialReference::SetACEA  (  double    dfStdP1,
>   double    dfStdP2,
>   double    dfCenterLat,
>   double    dfCenterLong,
>   double    dfFalseEasting,
>   double    dfFalseNorthing
>  )
> 
> you have your Standard Parallels and the Center Lat/Long pair (which is all
> I use in my projection algorithm) - but where do the False Easting and False
> Northing params come from? I know what an Easting and a Northing is - I
> don't know how it fits into the projection algorithm tho. Does it have to do
> with your own Cartesian reference?

Louis,

False eastings and northings are just extra offsets added to the projected
coordinates.  This is normally done to ensure that all numbers in the area
of interest will be positive to avoid "sign issues".  For instance, UTM
coordinate systems have a false easting of 500000.  Normally after converting
a location to transverse mercator any location west of the central meridian
would be negative.  But by adding 500000 meters, the designers of the projection
ensure that all eastings will be positive within the area of the zone itself.

The implementation is simple, and it only exists to make reading and
transmiting map coordinates (by humans) less error prone.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mcrider at hoecoop.org  Thu May 20 10:32:24 2004
From: mcrider at hoecoop.org (Michael Crider)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Problems compiling GDAL
Message-ID: <40ACC178.1060209@hoecoop.org>

I am attempting to install GDAL 1.2.0 with MrSID for use with Thuban on 
RedHat 8.  I downloaded the MrSID DSDK 3.1.10 from 
http://www.lizardtech.com/partners/dsdk/mrsid and copied the expanded 
files to the same directory where I expanded GDAL.  configure ran 
without any complaints (./configure 
--with-mrsid=/usr/local/Downloads/thuban/Linux_DSDK 
--with-static-proj4=/usr --without-ogr).  When I ran make, I got a long 
series of messages similar to: 
/usr/local/Downloads/thuban/gdal-1.2.0/.libs/libgdal.so: undefined 
reference to `LizardTech::MetadataValue::operator unsigned short() const'
This is followed by:
collect2: ld returned 1 exit status
make[1]: *** [gdalinfo] Error 1
make[1]: Leaving directory `/usr/local/Downloads/thuban/gdal-1.2.0/apps'
make: *** [apps-target] Error 2

Is everything normal here or am I doing something wrong?  Any suggestions?

From TMitchell at lignum.com  Thu May 20 11:45:13 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] OGR data samples
Message-ID: <OFAA538C45.21B1DD95-ON88256E9A.00565C1F-88256E9A.00568A8D@Riverside.bc.ca>

Frank, I see in:
http://gdal.velocet.ca/projects/opengis/ogrhtml/ogr_utilities.html
That you refer to an NTF dataset for the Shetland Islands - any chance you 
have that data handy?  I'm looking for samples of the different formats of 
ogr supported data and wondered if this dataset is redistributable or if 
you can point me to the source you got it from.  Overall, I'm trying to 
find some examples for each format that ogr supports.  This is for use in 
my workshop.

Tyler

From dron at ak4719.spb.edu  Thu May 20 12:14:08 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Problems compiling GDAL
In-Reply-To: <40ACC178.1060209@hoecoop.org>
References: <40ACC178.1060209@hoecoop.org>
Message-ID: <20040520161408.GA12572@ak4719.spb.edu>

On Thu, May 20, 2004 at 09:32:24AM -0500, Michael Crider wrote:
> I am attempting to install GDAL 1.2.0 with MrSID for use with Thuban on 
> RedHat 8.  I downloaded the MrSID DSDK 3.1.10 from 
> http://www.lizardtech.com/partners/dsdk/mrsid and copied the expanded 
> files to the same directory where I expanded GDAL.  configure ran 
> without any complaints (./configure 
> --with-mrsid=/usr/local/Downloads/thuban/Linux_DSDK 
> --with-static-proj4=/usr --without-ogr).  When I ran make, I got a long 
> series of messages similar to: 
> /usr/local/Downloads/thuban/gdal-1.2.0/.libs/libgdal.so: undefined 
> reference to `LizardTech::MetadataValue::operator unsigned short() const'
> This is followed by:
> collect2: ld returned 1 exit status
> make[1]: *** [gdalinfo] Error 1
> make[1]: Leaving directory `/usr/local/Downloads/thuban/gdal-1.2.0/apps'
> make: *** [apps-target] Error 2
> 
> Is everything normal here or am I doing something wrong?  Any suggestions?

It is perhaps compiler mismatch. What gcc version do you have? You
should use the same version as was used for DSDK (2.95.x, I think).
RH 8 perhaps has more recent gcc.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From TMitchell at lignum.com  Thu May 20 12:20:51 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] OGR data samples
In-Reply-To: <40ACD5AB.3090606@pobox.com>
Message-ID: <OFD5AD7BAB.E9965235-ON88256E9A.0059933C-88256E9A.0059CDD2@Riverside.bc.ca>

> That said, I could provide the files for your personal use.  I can also
> provide some old NTF sample data the OS used to distribute "freely". You
> could use the sample data for the workshop, but not the Shetland data.
> 
> Would you like the sample data?

I'll be trying to hunt down other data formats too, but the NTF samples 
would be very helpful.  Thanks.

From ergio2000 at hotmail.com  Thu May 20 14:50:44 2004
From: ergio2000 at hotmail.com (elias ruiz)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re:Re: about grid format (write binary grid format)
Message-ID: <Sea2-F20zLWGRJCKd6j00053e61@hotmail.com>

ok thanks
:)

in the last version of the c program, i could write a "clone" of a real 
raster file, reading it first, and then calculating the parameters for each 
file (boundary, header, index and data). for the projection file i'd use the 
same projection parameter of the source

the "cloned" raster file ys the same, and it could use in arcgis 8.3, but 
there was a problem in the first column: the lines tha were "multiplus - 
power of 4" (sorry for my english) take a value diferent

the program has also the capability of make a null raster

to calculate the parameters (numlines, numpixels, tilexsise, tileysize, etc) 
  i'd use the data of existing raster files and make a regresion. so the 
program look first for the value stored in an array with the real values, 
then, if there was not found in it, make the regresion calculus (in most of 
the case, there are diferences of 1 to 4 pixels)

the problem that we have now is that the trial version of arcgis has expired 
and now we are making the documents to buy a licensed version.

but don't worry, when we get the licence, we will continue and will finish 
the program. also we will make a little document about the raster grid 
format

:)

_________________________________________________________________
MSN Amor: busca tu ? naranja http://latam.msn.com/amor/


From warmerdam at pobox.com  Thu May 20 15:07:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re:Re: about grid format (write binary grid format)
In-Reply-To: <Sea2-F20zLWGRJCKd6j00053e61@hotmail.com>
References: <Sea2-F20zLWGRJCKd6j00053e61@hotmail.com>
Message-ID: <40AD01ED.8010801@pobox.com>

elias ruiz wrote:
> but don't worry, when we get the licence, we will continue and will 
> finish the program. also we will make a little document about the raster 
> grid format

Elias,

That would be very helpful.  Please let me know when the information is
available.  It sounds like you are quite good at reverse engineering!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From WeddingJB at NSWC.NAVY.MIL  Thu May 20 18:07:05 2004
From: WeddingJB at NSWC.NAVY.MIL (Wedding John B Dr DLVA)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Any way in GDAL to read only metadata from GeoTIFF file?
Message-ID: <DD260610C20AD211BC9400805F9FCCA8082149DE@nswcdlvaex05.nswc.navy.mil>

Greetings,

I have an application for which I want to use the parsing capabilities of
GDAL for GeoTIFF, DTED, and NITF.  However, the application already has a
nice image handling library (ImageMagick) and I'd prefer to use that for
displaying the image and manipulating it.  It handles TIFF, but ignores any
tags for extended TIFFs like GeoTIFF when loading the file.

What I'd like to do is to read the metadata information _only_ using GDAL,
store it, and read in the image data with the ImageMagick (IM) functions so
that I have all of the IM capability, but also have knowledge of the GeoTIFF
metadata.

I suppose that I could just use GDALOpen() but it seems dumb to load in the
whole image only to discard most of it.  The main reason why I don't use
libgeotiff directly is because I also want NITF and DTED parsing.

So my question is:  Is there any easy way in GDAL to read only metadata (not
the image data) from a GeoTIFF file (or any other supported format, for that
matter)?  Put another way, I'd like to fill everything in C++ GDALDataset
object, minus all of the raster bands and any values derived directly from
the raster band data.

Thanks in advance,

John Wedding

From warmerdam at pobox.com  Thu May 20 21:09:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Any way in GDAL to read only metadata from GeoTIFF
 file?
In-Reply-To: <DD260610C20AD211BC9400805F9FCCA8082149DE@nswcdlvaex05.nswc.navy.mil>
References: <DD260610C20AD211BC9400805F9FCCA8082149DE@nswcdlvaex05.nswc.navy.mil>
Message-ID: <40AD56B4.3040802@pobox.com>

Wedding John B Dr DLVA wrote:
> Greetings,
> 
> I have an application for which I want to use the parsing capabilities of
> GDAL for GeoTIFF, DTED, and NITF.  However, the application already has a
> nice image handling library (ImageMagick) and I'd prefer to use that for
> displaying the image and manipulating it.  It handles TIFF, but ignores any
> tags for extended TIFFs like GeoTIFF when loading the file.
> 
> What I'd like to do is to read the metadata information _only_ using GDAL,
> store it, and read in the image data with the ImageMagick (IM) functions so
> that I have all of the IM capability, but also have knowledge of the GeoTIFF
> metadata.
> 
> I suppose that I could just use GDALOpen() but it seems dumb to load in the
> whole image only to discard most of it.  The main reason why I don't use
> libgeotiff directly is because I also want NITF and DTED parsing.
> 
> So my question is:  Is there any easy way in GDAL to read only metadata (not
> the image data) from a GeoTIFF file (or any other supported format, for that
> matter)?  Put another way, I'd like to fill everything in C++ GDALDataset
> object, minus all of the raster bands and any values derived directly from
> the raster band data.

John,

The good news is that GDALOpen() does not normally read any of the imagery
data, and this is certainly true of the NITF, GeoTIFF and DTED drivers.  So
just go ahead and open it with GDALOpen(), and use GDALGetGeoTransform()
and GDALGetProjectionRef() (and any other metadata type functions) freely
without calling any of the imagery functions and you should be fine.

There are a few drivers (ie. USGS DEM) that read the whole image into memory
as part of reading the metadata in the open, but they are the exception.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de  Fri May 21 01:44:12 2004
From: Eric.Doenges at nadie.lpr.e-technik.tu-muenchen.de (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] BSB4-format
In-Reply-To: <Sea2-F588fqzdEQuAOU00044d9e@hotmail.com>
References: <Sea2-F588fqzdEQuAOU00044d9e@hotmail.com>
Message-ID: <E36E80FC-AAE9-11D8-B93A-000393A3C40C@rcs.ei.tum.de>

Am 19.05.2004 um 21:18 schrieb David Lugan:

> Does GDAL support BSB4-format  ( BSB Nautical Chart ) ?  Are there 
> future plans for this support?

BSB4 charts are encrypted. In order to get information about the 
encryption used,
you will have to sign an NDA with Maptech. Even if you do figure out 
how to decrypt
the files by yourself, you'll likely run afoul of the DMCA (in the US) 
or similar
legislation currently being proposed in Europe and elsewhere around the 
globe. I'd
be very surprised if GDAL were to support BSB4 any time soon.

Regards,
Eric Doenges


From jbensabat at ewre.com  Fri May 21 04:54:40 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Decoding headers in a MIF file
Message-ID: <c8kcs7$35a$1@sea.gmane.org>

Hello to all
I am using OGR to read a Mapinfo MIF file. I can read all the data but I
have problems
decoding the header. I am interested in getting the extent of the map.
Here is the relevant part of the header

Version 300
charset "Windows"
Delimiter ","
Index 5,6
CoordSys NonEarth Units "km" Bounds (-999, -999) (999, 999)
....

Using OGRSpatialReference, I am unable to get the map extent - I am getting
huge number that have nothing
to do with the ones in the MIF file.

any help would be appreciated.
thanks
jac.




From warmerdam at pobox.com  Fri May 21 09:09:41 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Decoding headers in a MIF file
In-Reply-To: <c8kcs7$35a$1@sea.gmane.org>
References: <c8kcs7$35a$1@sea.gmane.org>
Message-ID: <40ADFF95.4050800@pobox.com>

Jacob Bensabat wrote:
> Hello to all
> I am using OGR to read a Mapinfo MIF file. I can read all the data but I
> have problems
> decoding the header. I am interested in getting the extent of the map.
> Here is the relevant part of the header
> 
> Version 300
> charset "Windows"
> Delimiter ","
> Index 5,6
> CoordSys NonEarth Units "km" Bounds (-999, -999) (999, 999)
> ....
> 
> Using OGRSpatialReference, I am unable to get the map extent - I am getting
> huge number that have nothing
> to do with the ones in the MIF file.

Jacob,

I don't believe that the OGRSpatialReference includes map extents of any
kind.  Are you reading the extents from the OGRLayer for the MIF file?
I don't think it gets it's bounds from the Bounds value in the CoordSys
line.  It gets the extents by reading all the features and building an MBR.
I believe the Bounds value is supposed to indicate the bounds of validity of
the coordinate system, not necessarily the bounds of the dataset.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From marisap at telkomsa.net  Fri May 21 18:19:47 2004
From: marisap at telkomsa.net (L Pool)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: Re: how to extract data from OGR
In-Reply-To: <40AC3F98.5000109@pobox.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOCEBICAAA.marisap@telkomsa.net>

Thanks Frank,

I figured as much - its just an offset to your own coordinate reference
system, right?

Any my teachers use to tell me I wouldn't amount to anything... Geography is
easy cheesy!

Cheers,
Louis.

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 20 May 2004 07:18
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Re: Re: how to extract data from OGR


L Pool wrote:
> Ok. Now for something totally unrelated - this is a question for pretty
much
> anyone who can help me out with a little bit of knowledge on Geographic
> Projections in GDAL.
>
> I've written a few Geographic conversions for certain Projection
> Algorithms - but the maths that I wrote them from does not have parameters
> for "False Eastings" and "Fast Northings" which the OGRSpatialReference
> class definitely has. E.g.
>
> Albers Conic Equal Area:
>
> OGRErr OGRSpatialReference::SetACEA  (  double    dfStdP1,
>   double    dfStdP2,
>   double    dfCenterLat,
>   double    dfCenterLong,
>   double    dfFalseEasting,
>   double    dfFalseNorthing
>  )
>
> you have your Standard Parallels and the Center Lat/Long pair (which is
all
> I use in my projection algorithm) - but where do the False Easting and
False
> Northing params come from? I know what an Easting and a Northing is - I
> don't know how it fits into the projection algorithm tho. Does it have to
do
> with your own Cartesian reference?

Louis,

False eastings and northings are just extra offsets added to the projected
coordinates.  This is normally done to ensure that all numbers in the area
of interest will be positive to avoid "sign issues".  For instance, UTM
coordinate systems have a false easting of 500000.  Normally after
converting
a location to transverse mercator any location west of the central meridian
would be negative.  But by adding 500000 meters, the designers of the
projection
ensure that all eastings will be positive within the area of the zone
itself.

The implementation is simple, and it only exists to make reading and
transmiting map coordinates (by humans) less error prone.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From marisap at telkomsa.net  Fri May 21 18:27:24 2004
From: marisap at telkomsa.net (L Pool)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Label Styles and MapInfo Formats
Message-ID: <BKEKKNEPIPMJLIAAMCLOIEBICAAA.marisap@telkomsa.net>

Hi,

I've posted this question before and I'm still stuck with this problem,
can anybody offer some advice?

I'm using OGR Style String Management to manage the Styles from Vector Map
Formats. Sofar its been going well. Because I'd like to be able to handle a
variety of Vector Maps, I'd like to stick to the common interface provided
by the OGR Style Tools and Style Definitions. And not delve into the Field
Definitions of the Vector Tables.

Currently I've hit a bit of a hitch with one of the Vector Formats I've been
processing - the Table is defined as (below is an excerpt from the console
output of my program):

For layer 2
Layer Schema Definition   - Country_Name
With 3 Field(s)
Field 1 - Name: "Countries" Type: "String"
Field 2 - Name: "Longitude" Type: "Double"
Field 3 - Name: "Latitude" Type: "Double"
Layer has 64 features
Layer has a Geographic Spatial Ref
Layer has bounds - (73.546,-42.04) to (229.78,46.77)

The Geometry is OGRPoint and one would expect that the Point would the
Lat/Long pair where the Country Name should be placed - but the Style Tool
is not defined as a Label Tool and the Country Name Text is therefore not
available by using the Style Tools. For the moment I'm hacking it a bit by
looking for Fields defined as String when getting an OGRPoint Geometry and
then extracting the Field Value from the Feature - but I would like to know
if there is a more eloquent and generic way to acquire the Text.

Regards,
Louis Pool.


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From TMitchell at lignum.com  Fri May 21 19:09:27 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] SDTS - syntax for ogrinfo
Message-ID: <OFD09D47AA.4696D844-ON88256E9B.007F13DF-88256E9B.007F38A8@Riverside.bc.ca>

I've got some SDTS data, apparently, including files like:

$ ls
MDBDABDF.DDF  MDBDCATD.DDF  MDBDDQCG.DDF  MDBDIDEN.DDF  MDBDPC01.DDF
MDBDABDM.DDF  MDBDCATS.DDF  MDBDDQHL.DDF  MDBDIREF.DDF  MDBDSPDM.DDF
MDBDAHDR.DDF  MDBDCATX.DDF  MDBDDQLC.DDF  MDBDLE01.DDF  MDBDSTAT.DDF
MDBDBFPC.DDF  MDBDDDSH.DDF  MDBDDQPA.DDF  MDBDNA01.DDF  MDBDXREF.DDF
MDBDBFPS.DDF  MDBDDQAA.DDF  MDBDFF01.DDF  MDBDNO01.DDF

but can't seem to get ogrinfo to do anything with them.  I've various 
permutations and combinations of ogrinfo.  Can someone give me a hint?

Tyler

From TMitchell at lignum.com  Fri May 21 19:16:40 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] SDTS - syntax for ogrinfo
In-Reply-To: <OFD09D47AA.4696D844-ON88256E9B.007F13DF-88256E9B.007F38A8@Riverside.bc.ca>
Message-ID: <OF42560B1E.63D8026A-ON88256E9B.007FDB12-88256E9B.007FE1DF@Riverside.bc.ca>

FYI - this is DLG data.

gdal-dev-admin@remotesensing.org wrote on 05/21/2004 04:09:27 PM:

> I've got some SDTS data, apparently, including files like:
> 
> $ ls
> MDBDABDF.DDF  MDBDCATD.DDF  MDBDDQCG.DDF  MDBDIDEN.DDF  MDBDPC01.DDF
> MDBDABDM.DDF  MDBDCATS.DDF  MDBDDQHL.DDF  MDBDIREF.DDF  MDBDSPDM.DDF
> MDBDAHDR.DDF  MDBDCATX.DDF  MDBDDQLC.DDF  MDBDLE01.DDF  MDBDSTAT.DDF
> MDBDBFPC.DDF  MDBDDDSH.DDF  MDBDDQPA.DDF  MDBDNA01.DDF  MDBDXREF.DDF
> MDBDBFPS.DDF  MDBDDQAA.DDF  MDBDFF01.DDF  MDBDNO01.DDF
> 
> but can't seem to get ogrinfo to do anything with them.  I've various 
> permutations and combinations of ogrinfo.  Can someone give me a hint?
> 
> Tyler
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue May 25 14:37:37 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] SDTS - syntax for ogrinfo
In-Reply-To: <OFD09D47AA.4696D844-ON88256E9B.007F13DF-88256E9B.007F38A8@Riverside.bc.ca>
References: <OFD09D47AA.4696D844-ON88256E9B.007F13DF-88256E9B.007F38A8@Riverside.bc.ca>
Message-ID: <40B39271.1060304@pobox.com>

Tyler Mitchell wrote:
> I've got some SDTS data, apparently, including files like:
> 
> $ ls
> MDBDABDF.DDF  MDBDCATD.DDF  MDBDDQCG.DDF  MDBDIDEN.DDF  MDBDPC01.DDF
> MDBDABDM.DDF  MDBDCATS.DDF  MDBDDQHL.DDF  MDBDIREF.DDF  MDBDSPDM.DDF
> MDBDAHDR.DDF  MDBDCATX.DDF  MDBDDQLC.DDF  MDBDLE01.DDF  MDBDSTAT.DDF
> MDBDBFPC.DDF  MDBDDDSH.DDF  MDBDDQPA.DDF  MDBDNA01.DDF  MDBDXREF.DDF
> MDBDBFPS.DDF  MDBDDQAA.DDF  MDBDFF01.DDF  MDBDNO01.DDF
> 
> but can't seem to get ogrinfo to do anything with them.  I've various 
> permutations and combinations of ogrinfo.  Can someone give me a hint?

Tyler,

You need to run ogrinfo against the CATD file.

eg
ogrinfo -ro MDBDCATD.DDF

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jbensabat at ewre.com  Tue May 25 03:30:57 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: Decoding headers in a MIF file
References: <c8kcs7$35a$1@sea.gmane.org> <40ADFF95.4050800@pobox.com>
Message-ID: <c8upff$jtt$1@sea.gmane.org>

Hi
Then the question is where this information is stored ? Or if it is stored
at all ?
This information is crucial for rendering as various maps can be in various
coordinates systems
and we want to know prior to loading the map how to adapt it.
Actually shp files also have this kind of header.
thanks
jac

"Frank Warmerdam" <warmerdam@pobox.com> wrote in message
news:40ADFF95.4050800@pobox.com...
> Jacob Bensabat wrote:
> > Hello to all
> > I am using OGR to read a Mapinfo MIF file. I can read all the data but I
> > have problems
> > decoding the header. I am interested in getting the extent of the map.
> > Here is the relevant part of the header
> >
> > Version 300
> > charset "Windows"
> > Delimiter ","
> > Index 5,6
> > CoordSys NonEarth Units "km" Bounds (-999, -999) (999, 999)
> > ....
> >
> > Using OGRSpatialReference, I am unable to get the map extent - I am
getting
> > huge number that have nothing
> > to do with the ones in the MIF file.
>
> Jacob,
>
> I don't believe that the OGRSpatialReference includes map extents of any
> kind.  Are you reading the extents from the OGRLayer for the MIF file?
> I don't think it gets it's bounds from the Bounds value in the CoordSys
> line.  It gets the extents by reading all the features and building an
MBR.
> I believe the Bounds value is supposed to indicate the bounds of validity
of
> the coordinate system, not necessarily the bounds of the dataset.
>
> Best regards,
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent




From warmerdam at pobox.com  Tue May 25 16:09:59 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: Decoding headers in a MIF file
In-Reply-To: <c8upff$jtt$1@sea.gmane.org>
References: <c8kcs7$35a$1@sea.gmane.org> <40ADFF95.4050800@pobox.com> <c8upff$jtt$1@sea.gmane.org>
Message-ID: <40B3A817.9010300@pobox.com>

Jacob Bensabat wrote:
> Hi
> Then the question is where this information is stored ? Or if it is stored
> at all ?
> This information is crucial for rendering as various maps can be in various
> coordinates systems
> and we want to know prior to loading the map how to adapt it.
> Actually shp files also have this kind of header.
> thanks

Jacob,

The OGRLayer::GetExtent() method can be used to fetch the extent of an
individual layer.  For some formats (such as Shapefiles which you mention)
OGR is able to answer this request cheaply by reading bounds from the header.
For MIF format the entire file has to be scanned to get the extents.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue May 25 16:15:38 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Label Styles and MapInfo Formats
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOIEBICAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOIEBICAAA.marisap@telkomsa.net>
Message-ID: <40B3A96A.1050005@pobox.com>

L Pool wrote:
> Hi,
> 
> I've posted this question before and I'm still stuck with this problem,
> can anybody offer some advice?
> 
> I'm using OGR Style String Management to manage the Styles from Vector Map
> Formats. Sofar its been going well. Because I'd like to be able to handle a
> variety of Vector Maps, I'd like to stick to the common interface provided
> by the OGR Style Tools and Style Definitions. And not delve into the Field
> Definitions of the Vector Tables.
> 
> Currently I've hit a bit of a hitch with one of the Vector Formats I've been
> processing - the Table is defined as (below is an excerpt from the console
> output of my program):
> 
> For layer 2
> Layer Schema Definition   - Country_Name
> With 3 Field(s)
> Field 1 - Name: "Countries" Type: "String"
> Field 2 - Name: "Longitude" Type: "Double"
> Field 3 - Name: "Latitude" Type: "Double"
> Layer has 64 features
> Layer has a Geographic Spatial Ref
> Layer has bounds - (73.546,-42.04) to (229.78,46.77)
> 
> The Geometry is OGRPoint and one would expect that the Point would the
> Lat/Long pair where the Country Name should be placed - but the Style Tool
> is not defined as a Label Tool and the Country Name Text is therefore not
> available by using the Style Tools. For the moment I'm hacking it a bit by
> looking for Fields defined as String when getting an OGRPoint Geometry and
> then extracting the Field Value from the Feature - but I would like to know
> if there is a more eloquent and generic way to acquire the Text.

Louis,

You don't mention what format you are working with.  I will warn you that only
a few formats (MapInfo and DGN?) actually return styling information via OGR.
Other formats operate on a pure GIS data level and you have to infer or supply
the styling information from somewhere else.  Many GIS formats have no styling
information in the basic vector data files (eg Shapefile).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From TMitchell at lignum.com  Tue May 25 16:43:58 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] SDTS - syntax for ogrinfo
In-Reply-To: <40B39271.1060304@pobox.com>
Message-ID: <OF0A16E2C0.972F0C24-ON88256E9F.0071D5A7-88256E9F.0071E33B@Riverside.bc.ca>

Right on - that worked, thanks.

gdal-dev-admin@remotesensing.org wrote on 05/25/2004 11:37:37 AM:

> Tyler Mitchell wrote:
> > I've got some SDTS data, apparently, including files like:
> > 
> > $ ls
> > MDBDABDF.DDF  MDBDCATD.DDF  MDBDDQCG.DDF  MDBDIDEN.DDF  MDBDPC01.DDF
> > MDBDABDM.DDF  MDBDCATS.DDF  MDBDDQHL.DDF  MDBDIREF.DDF  MDBDSPDM.DDF
> > MDBDAHDR.DDF  MDBDCATX.DDF  MDBDDQLC.DDF  MDBDLE01.DDF  MDBDSTAT.DDF
> > MDBDBFPC.DDF  MDBDDDSH.DDF  MDBDDQPA.DDF  MDBDNA01.DDF  MDBDXREF.DDF
> > MDBDBFPS.DDF  MDBDDQAA.DDF  MDBDFF01.DDF  MDBDNO01.DDF
> > 
> > but can't seem to get ogrinfo to do anything with them.  I've various 
> > permutations and combinations of ogrinfo.  Can someone give me a hint?
> 
> Tyler,
> 
> You need to run ogrinfo against the CATD file.
> 
> eg
> ogrinfo -ro MDBDCATD.DDF
> 
> Best regards,
> 
> -- 
> 
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From marisap at telkomsa.net  Tue May 25 17:19:20 2004
From: marisap at telkomsa.net (L Pool)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Label Styles and MapInfo Formats
In-Reply-To: <40B3A96A.1050005@pobox.com>
Message-ID: <BKEKKNEPIPMJLIAAMCLOKEBLCAAA.marisap@telkomsa.net>

Allo Frank,

The Vector Maps I'm currently working with are indeed in MapInfo format.

This issue isn't really more than just an irritation - if you come across
this problem when next you use Style Tools and MapInfo format Vector Maps,
let me know if you get the same problem. For now I can just look for Text
and extract it directly from the OGRField.

Greets!
Louis.


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org]On Behalf Of Frank Warmerdam
Sent: 25 May 2004 10:16
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] Label Styles and MapInfo Formats


L Pool wrote:
> Hi,
>
> I've posted this question before and I'm still stuck with this problem,
> can anybody offer some advice?
>
> I'm using OGR Style String Management to manage the Styles from Vector Map
> Formats. Sofar its been going well. Because I'd like to be able to handle
a
> variety of Vector Maps, I'd like to stick to the common interface provided
> by the OGR Style Tools and Style Definitions. And not delve into the Field
> Definitions of the Vector Tables.
>
> Currently I've hit a bit of a hitch with one of the Vector Formats I've
been
> processing - the Table is defined as (below is an excerpt from the console
> output of my program):
>
> For layer 2
> Layer Schema Definition   - Country_Name
> With 3 Field(s)
> Field 1 - Name: "Countries" Type: "String"
> Field 2 - Name: "Longitude" Type: "Double"
> Field 3 - Name: "Latitude" Type: "Double"
> Layer has 64 features
> Layer has a Geographic Spatial Ref
> Layer has bounds - (73.546,-42.04) to (229.78,46.77)
>
> The Geometry is OGRPoint and one would expect that the Point would the
> Lat/Long pair where the Country Name should be placed - but the Style Tool
> is not defined as a Label Tool and the Country Name Text is therefore not
> available by using the Style Tools. For the moment I'm hacking it a bit by
> looking for Fields defined as String when getting an OGRPoint Geometry and
> then extracting the Field Value from the Feature - but I would like to
know
> if there is a more eloquent and generic way to acquire the Text.

Louis,

You don't mention what format you are working with.  I will warn you that
only
a few formats (MapInfo and DGN?) actually return styling information via
OGR.
Other formats operate on a pure GIS data level and you have to infer or
supply
the styling information from somewhere else.  Many GIS formats have no
styling
information in the basic vector data files (eg Shapefile).

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From bclay at ball.com  Tue May 25 17:13:32 2004
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] How to extract sub-image
Message-ID: <E4394C8445EFCC4AA136A1C305E4C92851C92D@APPMSG2.AERO.BALL.COM>

I know how to open a file and read the bands and thus the data so I can
get data for a sub-image but I don't see how to create a file of the
same format that is a particular sub-image of the overall image.
Actually this would be a subset of GTOPO30 data but I believe that is
treated the same as an actual image.

Since this seems to be a very common function, I was wondering if there
isn't already a tool written to do this.  That is a not Python tool.

The other thing I have been trying to do is to create a single geotiff
color image or sub-image from three separate geotiff images treating
each one as one of R, G or B as would be the case for creating a
composite color image from landsat data.  This function also seems like
it would already exist and I have asked before but I wanted to ask one
more time before I start writing one.  Again it needs to be a non-python
method to be able to build it into a larger program and because I don't
know python.  When I try to run the python scripts in the distribution I
get errors that I don't relate to.  I tried to use MicroDem to do this
but it created a grey scale image not a color one

Bruce Clay
bclay@ball.com 

From warmerdam at pobox.com  Tue May 25 17:21:22 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Label Styles and MapInfo Formats
In-Reply-To: <BKEKKNEPIPMJLIAAMCLOKEBLCAAA.marisap@telkomsa.net>
References: <BKEKKNEPIPMJLIAAMCLOKEBLCAAA.marisap@telkomsa.net>
Message-ID: <40B3B8D2.8060604@pobox.com>

L Pool wrote:
> Allo Frank,
> 
> The Vector Maps I'm currently working with are indeed in MapInfo format.
> 
> This issue isn't really more than just an irritation - if you come across
> this problem when next you use Style Tools and MapInfo format Vector Maps,
> let me know if you get the same problem. For now I can just look for Text
> and extract it directly from the OGRField.

Louis,

If you can submit a bug report via Bugzilla it might be that there is a
bug that can be corrected at some point.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue May 25 17:32:10 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] How to extract sub-image
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C92D@APPMSG2.AERO.BALL.COM>
References: <E4394C8445EFCC4AA136A1C305E4C92851C92D@APPMSG2.AERO.BALL.COM>
Message-ID: <40B3BB5A.1070102@pobox.com>

Clay, Bruce wrote:
> I know how to open a file and read the bands and thus the data so I can
> get data for a sub-image but I don't see how to create a file of the
> same format that is a particular sub-image of the overall image.
> Actually this would be a subset of GTOPO30 data but I believe that is
> treated the same as an actual image.
> 
> Since this seems to be a very common function, I was wondering if there
> isn't already a tool written to do this.  That is a not Python tool.

Bruce,

The gdal_translate utility can produce subsets of the source image.  You
can supply the source window in pixel/line coordinates or in georeferenced
coordinates.   In pixel line you might do something like this to take a
300x300 chunk out of gtopo.dat starting a line 600 and 500 pixels in from
the left:

   gdal_translate -srcwin 500 600 300 300 gtopo.dat  subset.tif

Use -projwin to do then same but with upper left and lower right projected
coordinates instead.

Note that gdal_translate implements this by creating an in-memory virtual
file referring to the desired areas of the source image.

> The other thing I have been trying to do is to create a single geotiff
> color image or sub-image from three separate geotiff images treating
> each one as one of R, G or B as would be the case for creating a
> composite color image from landsat data.  This function also seems like
> it would already exist and I have asked before but I wanted to ask one
> more time before I start writing one.  Again it needs to be a non-python
> method to be able to build it into a larger program and because I don't
> know python.  When I try to run the python scripts in the distribution I
> get errors that I don't relate to.  I tried to use MicroDem to do this
> but it created a grey scale image not a color one

It can be done interactively using the new composite tool Andrey wrote in
OpenEV.  But if you want to incorporate it into a program you would need to
reimplement.  Once again, it is creating a virtual file image in memory that
points off to the red, green and blue input rasters.   I would suggest you read
over the virtual file tutorial:

   http://www.remotesensing.org/gdal/gdal_vrttut.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nhv at cape.com  Tue May 25 17:47:18 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] How to extract sub-image
In-Reply-To: <E4394C8445EFCC4AA136A1C305E4C92851C92D@APPMSG2.AERO.BALL.COM>
Message-ID: <EKEJIKAILPONGGENMBGAEEOGHJAA.nhv@cape.com>

Clay, Bruce writes:
> 
> I know how to open a file and read the bands and thus the data so I can
> get data for a sub-image but I don't see how to create a file of the
> same format that is a particular sub-image of the overall image.
> Actually this would be a subset of GTOPO30 data but I believe that is
> treated the same as an actual image.
> 
> Since this seems to be a very common function, I was wondering if there
> isn't already a tool written to do this.  That is a not Python tool.

see the manpage for gdal_translate 

esp..

 -srcwin xoff yoff xsize ysize:
    Selects a subwindow from the source image for copying based on pixel/line location. 
-projwin ulx uly lrx lry:
    Selects a subwindow from the source image for copying (like -srcwin) 
    but with the corners given in georeferenced coordinates.

but ...

FWIW - I suggest you take a couple of hours and learn Python as it 
exposes a lot of GDAL functionality in a *very* easy to use way  :-)

http://www.python.org/topics/learn/prog.html

Norman
 

From TMitchell at lignum.com  Tue May 25 19:10:28 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] colour table file format
In-Reply-To: <40B3B8D2.8060604@pobox.com>
Message-ID: <OFB2F3895B.7904516C-ON88256E9F.007F41D1-88256E9F.007F4D5A@Riverside.bc.ca>

With rbg2pct.py, can anyone tell me the format of the input colour table 
file?

Tyler

From TMitchell at lignum.com  Tue May 25 19:41:10 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] colour table file format
In-Reply-To: <OFB2F3895B.7904516C-ON88256E9F.007F41D1-88256E9F.007F4D5A@Riverside.bc.ca>
Message-ID: <OF7BCF1809.9C5D4E37-ON88256E9F.0080BABA-88256E9F.00821CBC@Riverside.bc.ca>

Doh - mis-read the docs.  I thought the input file was an rgb test file. I 
now see how to do what I need with gdal_merge.py.  I had some original 
images that I had merged and lost the pseudo colours - but I reprocessed 
using the "-pct" option.  Thanks.

gdal-dev-admin@remotesensing.org wrote on 05/25/2004 04:10:28 PM:

> With rbg2pct.py, can anyone tell me the format of the input colour table 

> file?
> 
> Tyler
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev


From rich at greenwoodmap.com  Tue May 25 17:26:47 2004
From: rich at greenwoodmap.com (Richard Greenwood)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] build gdal with grass support error
In-Reply-To: <OFB2F3895B.7904516C-ON88256E9F.007F41D1-88256E9F.007F4D5A@Riverside.bc.ca>
References: <OFB2F3895B.7904516C-ON88256E9F.007F41D1-88256E9F.007F4D5A@Riverside.bc.ca>
Message-ID: <40B3BA17.5080607@greenwoodmap.com>

I have a problem building GDAL with GRASS support under Linux.

First I built and installed libgrass (from www.remotesensing.org)

Next I try to build GDAL --with-grass=/usr/local/lib/ but it fails with 
the following error messages:

make[2]: Entering directory `/usr/local/src/gdal/gdal_cvs/frmts/grass'
/bin/sh ../../libtool --mode=compile g++ -Wall  -O2  -I/usr/local/lib/ 
-I/usr/local/lib//include   -I../../port -I../../gcore -I../../ogr 
-I../../port -c -o ../o/grassdataset.o grassdataset.cpp
  g++ -Wall -O2 -I/usr/local/lib/ -I/usr/local/lib//include -I../../port 
-I../../gcore -I../../ogr -I../../port -c grassdataset.cpp  -fPIC -DPIC 
-o ../o/.libs/grassdataset.o
grassdataset.cpp: In static member function `static GDALDataset*
    GRASSDataset::Open(GDALOpenInfo*)':
grassdataset.cpp:513: error: invalid conversion from `int (*)(...)' to 
`int   (*)()'

Any idea what I am doing wrong?

Thanks
-- 
Richard Greenwood
www.greenwoodmap.com

From alexamici at fastwebnet.it  Wed May 26 04:42:48 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] build gdal with grass support error
In-Reply-To: <40B3BA17.5080607@greenwoodmap.com>
References: <OFB2F3895B.7904516C-ON88256E9F.007F41D1-88256E9F.007F4D5A@Riverside.bc.ca> <40B3BA17.5080607@greenwoodmap.com>
Message-ID: <200405261042.48805.alexamici@fastwebnet.it>

Richard,

On Tuesday 25 May 2004 23:26, Richard Greenwood wrote:
> Next I try to build GDAL --with-grass=/usr/local/lib/ but it fails with
> the following error messages:
>
> make[2]: Entering directory `/usr/local/src/gdal/gdal_cvs/frmts/grass'
> /bin/sh ../../libtool --mode=compile g++ -Wall  -O2  -I/usr/local/lib/
> -I/usr/local/lib//include   -I../../port -I../../gcore -I../../ogr
> -I../../port -c -o ../o/grassdataset.o grassdataset.cpp
>   g++ -Wall -O2 -I/usr/local/lib/ -I/usr/local/lib//include -I../../port
> -I../../gcore -I../../ogr -I../../port -c grassdataset.cpp  -fPIC -DPIC
> -o ../o/.libs/grassdataset.o
> grassdataset.cpp: In static member function `static GDALDataset*
>     GRASSDataset::Open(GDALOpenInfo*)':
> grassdataset.cpp:513: error: invalid conversion from `int (*)(...)' to
> `int   (*)()'

most probably you should use --with-grass=/usr/local/

cheers,
alessandro

From warmerdam at pobox.com  Wed May 26 09:34:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] build gdal with grass support error
In-Reply-To: <40B3BA17.5080607@greenwoodmap.com>
References: <OFB2F3895B.7904516C-ON88256E9F.007F41D1-88256E9F.007F4D5A@Riverside.bc.ca> <40B3BA17.5080607@greenwoodmap.com>
Message-ID: <40B49CE1.5010600@pobox.com>

Richard Greenwood wrote:
> I have a problem building GDAL with GRASS support under Linux.
> 
> First I built and installed libgrass (from www.remotesensing.org)
> 
> Next I try to build GDAL --with-grass=/usr/local/lib/ but it fails with 
> the following error messages:
> 
> make[2]: Entering directory `/usr/local/src/gdal/gdal_cvs/frmts/grass'
> /bin/sh ../../libtool --mode=compile g++ -Wall  -O2  -I/usr/local/lib/ 
> -I/usr/local/lib//include   -I../../port -I../../gcore -I../../ogr 
> -I../../port -c -o ../o/grassdataset.o grassdataset.cpp
>  g++ -Wall -O2 -I/usr/local/lib/ -I/usr/local/lib//include -I../../port 
> -I../../gcore -I../../ogr -I../../port -c grassdataset.cpp  -fPIC -DPIC 
> -o ../o/.libs/grassdataset.o
> grassdataset.cpp: In static member function `static GDALDataset*
>    GRASSDataset::Open(GDALOpenInfo*)':
> grassdataset.cpp:513: error: invalid conversion from `int (*)(...)' to 
> `int   (*)()'
> 
> Any idea what I am doing wrong?

Rich,

Not your fault.  There is a bug about this:

   http://bugzilla.remotesensing.org/show_bug.cgi?id=408

Just hand edit your code changing this:

   typedef int (*GrassErrorHandler)();

to this:
    typedef int (*GrassErrorHandler)(...);

or the other way around as needed.

I am vaguely hopeful that the code in CVS works properly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rich at greenwoodmap.com  Wed May 26 04:29:47 2004
From: rich at greenwoodmap.com (Richard Greenwood)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] build gdal with grass support error
In-Reply-To: <40B49CE1.5010600@pobox.com>
References: <OFB2F3895B.7904516C-ON88256E9F.007F41D1-88256E9F.007F4D5A@Riverside.bc.ca> <40B3BA17.5080607@greenwoodmap.com> <40B49CE1.5010600@pobox.com>
Message-ID: <40B4557B.8090309@greenwoodmap.com>

Frank Warmerdam wrote:
> Richard Greenwood wrote:
> 
>> I have a problem building GDAL with GRASS support under Linux.
>>
>> First I built and installed libgrass (from www.remotesensing.org)
>>
>> Next I try to build GDAL --with-grass=/usr/local/lib/ but it fails 
>> with the following error messages:
>>
>> make[2]: Entering directory `/usr/local/src/gdal/gdal_cvs/frmts/grass'
>> /bin/sh ../../libtool --mode=compile g++ -Wall  -O2  -I/usr/local/lib/ 
>> -I/usr/local/lib//include   -I../../port -I../../gcore -I../../ogr 
>> -I../../port -c -o ../o/grassdataset.o grassdataset.cpp
>>  g++ -Wall -O2 -I/usr/local/lib/ -I/usr/local/lib//include 
>> -I../../port -I../../gcore -I../../ogr -I../../port -c 
>> grassdataset.cpp  -fPIC -DPIC -o ../o/.libs/grassdataset.o
>> grassdataset.cpp: In static member function `static GDALDataset*
>>    GRASSDataset::Open(GDALOpenInfo*)':
>> grassdataset.cpp:513: error: invalid conversion from `int (*)(...)' to 
>> `int   (*)()'
>>
>> Any idea what I am doing wrong?
> 
> 
> Rich,
> 
> Not your fault.  There is a bug about this:
> 
>   http://bugzilla.remotesensing.org/show_bug.cgi?id=408
> 
> Just hand edit your code changing this:
> 
>   typedef int (*GrassErrorHandler)();
> 
> to this:
>    typedef int (*GrassErrorHandler)(...);
> 
> or the other way around as needed.
> 
> I am vaguely hopeful that the code in CVS works properly.
> 
> Best regards,


Thanks Frank and Alessandro for the prompt replies. Changing 
(*GrassErrorHandler)(...) to (*GrassErrorHandler)() solved the problem.

I had updated from CVS last night, so unfortunately I guess it's not 
fixed in CVS.

Best regards,
-- 
Richard Greenwood
www.greenwoodmap.com

From TMitchell at lignum.com  Wed May 26 11:35:18 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] FW: Arcview geodatabase format suuport
Message-ID: <OF2624F5AC.3AF8B256-ON88256EA0.00558772-88256EA0.0055A0DE@Riverside.bc.ca>

Anyone looked at the geodatabase format with OGR support in mind? 

Tyler

----- Forwarded by Tyler Mitchell/Lignum on 05/26/2004 08:34 AM -----

"Chip Hankley" <Chip.Hankley@rmtinc.com> 
Sent by: mapserver-users-admin@lists.gis.umn.edu
05/26/2004 08:04 AM

To
<mapserver-users@lists.gis.umn.edu>, <janeks.kamerovskis@silva.lv>
cc

Fax to

Subject
RE: [Mapserver-users] Arcview geodatabase format suuport






> Does Mapserver supports Arcview geodatabase, or will it be?
>
Not now. My hunch is that it probably won't anytime soon. The
geodatabase format is, of course, relatively new. ESRI would have to
publish some type of specification that would allow someone to build an
interface that would read the data. I don't know if ESRI has released
such a specifcation. Furthermore, there's probably not a real big
incentive for anyone (on the MapServer side) to do this right now. There
are a number of spatial RDBMS formats that MS does read (Oracle Spatial,
SDE, and PostGIS)... these offer most users a LOT more flexibility b/c
they aren't tied to MS Access.

Chip


From warmerdam at pobox.com  Wed May 26 11:40:14 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] FW: Arcview geodatabase format suuport
In-Reply-To: <OF2624F5AC.3AF8B256-ON88256EA0.00558772-88256EA0.0055A0DE@Riverside.bc.ca>
References: <OF2624F5AC.3AF8B256-ON88256EA0.00558772-88256EA0.0055A0DE@Riverside.bc.ca>
Message-ID: <40B4BA5E.7060803@pobox.com>

Tyler Mitchell wrote:
> Anyone looked at the geodatabase format with OGR support in mind? 

Tyler,

I have briefly examined it.  Apparently the geometry data is in the same
format as the geometry fragments in shapefiles.  I don't think it would be
too hard to implement limited read support in OGR.  Perhaps one weeks work or
so.  A good job in perhaps two.

Still, that is alot to do without any specific funding for the effort.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed May 26 14:53:36 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Erdas .LAN / .GIS Format Added
Message-ID: <40B4E7B0.6000607@pobox.com>

Folks,

With funding from PeopleGIS (http://www.peoplegis.com) I have added read-only
support for Erdas .LAN / .GIS format to GDAL.  This is the old Erdas format
from Erdas 7.x (ie. early 90's).

If anyone is interested in support for this format, and has sample file I
could have, or even better redistribute, please let me know.  I haven't had
many to test the code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nhv at cape.com  Wed May 26 20:39:37 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <41044964.3000402@gmx.de>
Message-ID: <EKEJIKAILPONGGENMBGAKEBPHKAA.nhv@cape.com>

Jochen Kruger writes:
> 
> I'm trying to use the gdal libraries with MinGW (Dev-C++) - but even 
> after checking the respective threads in this newsgroup I can't get it 
> to work. This is most likely rooted in my lack of experience with C/C++ 
> and/or the compilation and installation of libraries. I'm not a 
> professional programmer, just someone in need of a specific tool, with 
> no budget but enough enthusiasm to try it myself - so please bare with 
> me if the following seems trivial to you:
> 
> I need a working GCC library with HDF4 support for a tool essential for 
> one of my projects. I tried to use the binary that came with OpenEV and 
> also the one available from the gdal website, but with both I get the 
> following errors when compiling my programme:
> 
>   "[Linker error] undefined reference to `GDALAllRegister'"
>   "[Linker error] undefined reference to `GDALOpen'"

What is the command you are using to link the program

Note Win32 does not allow undefined symbols so the order of the libraries 
presented to the linker is important

HTH

Norman


 

From nhv at cape.com  Thu May 27 04:12:21 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <4104B9E9.9030008@gmx.de>
Message-ID: <EKEJIKAILPONGGENMBGAIECJHKAA.nhv@cape.com>

J.Krueger writes:
> 
> Norman Vine wrote:
> >>  "[Linker error] undefined reference to `GDALAllRegister'"
> >>  "[Linker error] undefined reference to `GDALOpen'"
> > What is the command you are using to link the program
> > 
> > Note Win32 does not allow undefined symbols so the order of the libraries 
> > presented to the linker is important
> 
> Here's the Makefile Dev-C++ is creating:
> 
> LIBS =  -L"C:/Dev-Cpp/lib" -L"C:/Dev-Cpp/gdal/lib"

I have never used Dev-C++ so I don't know exactly how
you enter this into the IDE but you need to link against libgdal

i.e. the link LIBS should be something like

LIBS =  -L"C:/Dev-Cpp/lib" -L"C:/Dev-Cpp/gdal/lib" -lgdal

HTH

Norman



From jnielsen at aero-graphics.com  Thu May 27 09:52:13 2004
From: jnielsen at aero-graphics.com (Jason M. Nielsen)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Fwd: [Mapserver-users] Convert data from Projected to Modified system...
Message-ID: <1085665933.40b5f28d7ef44@www.agi-lan.com>


----- Forwarded message from "Jason M. Nielsen" <jnielsen@aero-graphics.com> -----
    Date: Wed, 26 May 2004 13:44:11 -0600
    From: "Jason M. Nielsen" <jnielsen@aero-graphics.com>
Reply-To: "Jason M. Nielsen" <jnielsen@aero-graphics.com>
 Subject: [Mapserver-users] Convert data from Projected to Modified system...
      To: mapserver-users@lists.gis.umn.edu

Bear with me since I am by no means a GIS person or the like.  We have data in a
known projected system (ie: stateplane, think thats right) and we need to
transform it to a cartesian system (modified?).

I know the x/y offsets, scaling and rotation to go from the old to the new system.

The data is in a TIFF format and I was hoping to be able to use gdal or
mapserver to reproject it and dump out a new file in which only the coordinates
have changed and the shape of the TIFF etc accordingly.

I presume via gdal I can specify something like "+k=1.000202
+x_0=-1398448.885932 ..." and so on.  I am not sure this is possible but if I am
on the right track I am unsure precisely how to apply the known transformation
parameters via this method and was hoping someone might be able to point me onto
some documentation or examples as to how this can be done.

Thanks.
_______________________________________________
Mapserver-users mailing list
Mapserver-users@lists.gis.umn.edu
http://lists.gis.umn.edu/mailman/listinfo/mapserver-users

----- End forwarded message -----




From tim at linfiniti.com  Mon May 24 02:29:23 2004
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Detecting if overviews may be built for a raster file
Message-ID: <200405240729.36468.tim@linfiniti.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi

I have now implemented a basic overview building frontend in QGIS for rasters. 
One thing Id like to know is if its possible to tell before hand if a given 
raster permits overviews?

Regards

Tim
- -- 
The only reason for time is so that everything doesn't happen at once 
 --Albert Einstein 

Get my public keys from:

http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFAsZZLWvXTJUo0BDoRAqQkAJ45IIqB6FT9weOKgwnrFwvmROJlvgCfW/4r
ktggL4yOEpMxHb624y4FQXU=
=dIWh
-----END PGP SIGNATURE-----

From starged at videotron.ca  Thu May 27 14:59:19 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <41044964.3000402@gmx.de>
References: <41044964.3000402@gmx.de>
Message-ID: <ahdcb0l5cmurejcfgss1homr2rpb0s01a6@4ax.com>

Hi Jochen,

On Mon, 26 Jul 2004 01:59:32 +0200, Jochen Kr?ger <kruegerj@gmx.de> wrote:

>Similar error messages are given for any instance where I use one of the 
>libraries instructions. I have configured the paths to the includes and 
>the library in Dev-C++ correctly, so I must assume that it's something 
>with the library I'm using or with the way I'm using it...

I used Dev-C++ to build the gda/ogr apps based on the following makefile:

# Project: gdal-ogr_apps
# Makefile created by Dev-C++ 4.9.8.7

CPP  = g++.exe
CC   = gcc.exe
WINDRES = windres.exe
RES  = 
OBJ  = ogr/ogrtindex.o $(RES)
LINKOBJ  = ogr/ogrtindex.o $(RES)
LIBS =  -L/local/bin -lgdal12 
INCS = 
CXXINCS = 
BIN  = ogrtindex.exe
CXXFLAGS = $(CXXINCS)-I./port -I./gcore -I./ogr -I./frmts -I./alg -I./ogr/ogrsf_frmts   -w -O2
CFLAGS = $(INCS)-I./port -I./gcore -I./ogr -I./frmts -I./alg -I./ogr/ogrsf_frmts   -w -O2

.PHONY: all all-before all-after clean clean-custom

all: all-before ogrtindex.exe all-after


clean: clean-custom
	rm -f $(OBJ) $(BIN)

$(BIN): $(OBJ)
	$(CPP) $(LINKOBJ) -o "ogrtindex.exe" $(LIBS)

ogr/ogrtindex.o: ogr/ogrtindex.cpp
	$(CPP) -c ogr/ogrtindex.cpp -o ogr/ogrtindex.o $(CXXFLAGS)

This assumes that the makefile is at the top of the GDAL building tree. Also note the "LIBS" line:
it means that we link directly with the gdal12.dll in /local/bin.

>int main(int argc, char *argv[])
>{
>...
>   GDALAllRegister();
>   const char* pan_infile=argv[1];
>   // Open Pan
>   panDataset = (GDALDataset *) GDALOpen( pan_infile, GA_ReadOnly );
>   if( panDataset == NULL ) {
>     cout << endl << "Pan-Input kann nicht geoeffnet werden!" << endl;
>     errorvalue=2;

May I ask what you're trying to do? I see you open a "panDataset": is it for a fusion with an RGB
dataset?

Hope this helps.
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From starged at videotron.ca  Thu May 27 23:04:49 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL:
 "[Linker error] undefined reference..."
In-Reply-To: <4105771B.4080102@gmx.de>
References: <41044964.3000402@gmx.de>
 <ahdcb0l5cmurejcfgss1homr2rpb0s01a6@4ax.com> <4105771B.4080102@gmx.de>
Message-ID: <q2adb09bhr3bdb676tu3tfeim3rc8k1tgt@4ax.com>

Hi Jochen,

On Mon, 26 Jul 2004 23:26:51 +0200, "J.Krueger" <kruegerj@gmx.de> wrote:

>In the compiler options (linker command line) I added the path to the 
>library as shown in your example ("-Lc:/dev-cpp/gdal/lib -lgdal_i"), and 
>suddenly it worked. The only problem I see with that method is that I 
>suddenly seem to need about 20 additional dlls to run my program (I 
>found them all in the OpenEV path, tho). Any way to solve that?

You probably have Frank's OpenEV version and the gdal lib is built with some extra features which I
don't really know about. But why are you linking with gdal_i?
If you installed OpenEV in c:\openev_fw for example, you could use "-Lc:/openev_fw/bin -lgdal12" and
it should work (ie, ld will link with gdal12.dll). Maybe it will also solve the problem you mention
in your later post.

>> May I ask what you're trying to do? I see you open a "panDataset": is it for a fusion with an RGB
>> dataset?
>
>Jupp, I'm trying to fix (and somewhat improve) an old fusion tool I 
>often use at work. It only reads single-layer .lan files, so you have to 
>seperate the multispectral layers first and export them to the old ERDAS 
>format - which is annoying and time consuming (and that's where GDAL 
>comes in handy). At the same time I'm trying to make it more 
>user-friendly, adding a GUI and porting it to Win32 (while keeping it 
>platform independent). Basically I need to rewrite the tool from scratch 
>(but for the main algorithm).

I tried that fusion thing myself and made it as an OpenEV tool. Maybe you saw my posts about that a
few weeks ago...

It's there if you want to have a look: http://pages.infinit.net/starged/openev/fusion.py

Good luck!
--
Mario B.
My Landsat images:
http://pages.infinit.net/starged/landsat/home.html

From MChapman at sanz.com  Thu May 27 23:22:52 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B0C@mailman.san.com>

Try this:
 
#include <iostream>
#include "gdal_priv.h"
 
int nRasterX = 0, nRasterY = 0, nNumberOfBands = 0;
string sFileName = "c:\\somefile.tif";
 
GDALAllRegister();
GDALDataset* pDataset = (GDALDataset*) GDALOpen(sFileName.c_str(), GA_ReadOnly);
 
if ( pDataset == NULL )
{
 cout << (char*) CPLGetLastErrorMsg() << endl;
 return false;
}
 
nNumberOfBands = pDataset->GetRasterCount();
cout << "Num Bands: " << nNumberOfBands << endl;
 
if (nNumberOfBands > 0)
{
 nRasterX = pDataset->GetRasterBand(1)->GetXSize();
 nRasterY = pDataset->GetRasterBand(1)->GetYSize();
 cout << "RasterX: " << nRasterX << "\nnRasterY: " << nRasterY << endl;
}
 
if (pDataset)
 GDALClose(pDataset);
 
I just cut and pasted some code, so it might need a couple of tweaks.  Send me what the output is from this code.  What platform are you running this on?  If it's visual studio on windows you need to link the gdal_i.lib in your project settings.  If you are using Linux it needs to be linked in the make file. 
 
Martin
 
 

	-----Original Message----- 
	From: J.Krueger [mailto:kruegerj@gmx.de] 
	Sent: Mon 7/26/2004 7:13 PM 
	To: gdal-dev@remotesensing.org 
	Cc: 
	Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
	
	

	Ok, I thought I had managed it, but while I can open files now, I am now
	getting this damn error again - only this time not for all gdal
	instructions. For example I can open/close datasets, but I can't query
	them for certain (any?) information:
	
	-cut-
	   Dataset1 = (GDALDataset *) GDALOpen( filename1, GA_ReadOnly );
	   int xsizefile1 = Dataset1->GetRasterXSize();
	   int ysizefile1 = Dataset1->GetRasterYSize();
	-cut-
	
	results in the following error messages:
	[Linker error] undefined reference to `GDALDataset::GetRasterXSize()'
	[Linker error] undefined reference to `GDALDataset::GetRasterYSize()'
	
	The mere opening of the Dataset does not cause any problems. As soon as
	I uncomment the GetRasterXSize/GetRasterYSize instructions the program
	compiles properly and the Image files can be accessed.
	
	Any ideas? Do I have to add something more to my compiler/linker
	switches, or is it just a problem with the code? If I'm still missing a
	switch: where can I find some detailed info/documentation on what is
	needed, so I don't have to ask here every time?
	
	_______________________________________________
	Gdal-dev mailing list
	Gdal-dev@remotesensing.org
	http://remotesensing.org/mailman/listinfo/gdal-dev
	

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/ms-tnef
Size: 6770 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040527/7702014a/attachment.bin
From werchowyna at pf.pl  Thu May 27 15:10:05 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] floating point bug
References: <014b01c4384d$7e61ea80$8d584cd5@n7a3h9>
Message-ID: <00a001c44499$33e5cdc0$695d4cd5@n7a3h9>

Hello Frank

did you find the reason of troubles with FP ArcGrid I reported?

----- Original Message -----
From: "Maciek Sieczka" <werchowyna@pf.pl>
To: <gdal-dev@remotesensing.org>
Sent: Wednesday, May 12, 2004 8:15 PM
Subject: Re: [Gdal-dev] floating point bug


> Frank,
>
> > I find it hard to believe that GDAL's AIG driver would misreport a
> > floating point Arc/Info Binary Grid as Int16.  If you can provide a
sample
> > Arc/Info grid that demonstrates this problem I will investigate.
>
> I digged a little more and I'm confused.
>
> I noticed that whether GDAL recognises the an FP ARCGrid as FP or INT
> depends somehow on the proportion and distribution of null/data
> cells in a file but I can't find a simple rule for this (and I may be
wrong
> as well). Anyway if the FP grid file is "100% data" it is always
recognised
> as FP. But if it contains nulls then GDAL will see it as INT or FP
> dependending on the file itself. Examples for both cases taken out from my
> FP ARCGrid file are attached in the arc.tgz. If you need a bigger one
please
> let me know.
>
> > GDAL does not support floating point ESRI bil files.  I don't know what
> > they put in the .hdr file to indicate floating point.  So the file is
> > misused as integer and all the values are crazy.  Can you provide the
> > .hdr file so can see if there are any clues it is floating point?
>
> I read the problem's solved but just in case included are the world and
> header files of my FP dem.bil.
>
> Cheers
> Maciek
>


From andrea.rogges at virgilio.it  Fri May 28 09:40:31 2004
From: andrea.rogges at virgilio.it (andrea.rogges@virgilio.it)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Performance with .TAB files (MapInfo format)
Message-ID: <4087DD5E0002FFE2@ims4c.cp.tin.it>

Dear all,
I'm searching for a way to optimize performance of OGR in reading features
stored in Mapinfo binary datafiles.

What I've noted is that a commercial product like MapInfo Mapxtreme is five
times (and more!) faster than an open product (like Mapserver with OGR),
with the same layers and data files...

Do you have any idea about that?

Thanks in advance,
Andrea Rogges


From warmerdam at pobox.com  Fri May 28 09:55:14 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Performance with .TAB files (MapInfo format)
In-Reply-To: <4087DD5E0002FFE2@ims4c.cp.tin.it>
References: <4087DD5E0002FFE2@ims4c.cp.tin.it>
Message-ID: <40B744C2.6000300@pobox.com>

andrea.rogges@virgilio.it wrote:
> Dear all,
> I'm searching for a way to optimize performance of OGR in reading features
> stored in Mapinfo binary datafiles.
> 
> What I've noted is that a commercial product like MapInfo Mapxtreme is five
> times (and more!) faster than an open product (like Mapserver with OGR),
> with the same layers and data files...
> 
> Do you have any idea about that?

Andrea,

I wouldn't say that the existing MITAB code is exceptionally tuned for speed
but I am a bit surprised there is that much difference.  I have heard of
people specifically using MITAB because it was faster for some purposes than
the MapInfo products.

However, there are many variables, and usage situations.  This performance
comparison is MapServer+OGR to Mapxtreme?  There are quite a few things you
can do at the MapServer level that affect performance.  I don't think this
is really the place to discuss such optimization.

If you determine that the real performance bottleneck is the OGR mapinfo
reading then the best place to discuss that would be the MITAB list.  But
I suspect the issue is data organization and use higher up the software
stack.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rich at greenwoodmap.com  Fri May 28 05:12:40 2004
From: rich at greenwoodmap.com (Richard Greenwood)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] build gdal with grass support error
In-Reply-To: <40B4557B.8090309@greenwoodmap.com>
References: <OFB2F3895B.7904516C-ON88256E9F.007F41D1-88256E9F.007F4D5A@Riverside.bc.ca> <40B3BA17.5080607@greenwoodmap.com> <40B49CE1.5010600@pobox.com> <40B4557B.8090309@greenwoodmap.com>
Message-ID: <40B70288.40708@greenwoodmap.com>

> Frank Warmerdam wrote:
>>
>> Not your fault.  There is a bug about this:
>>
>>   http://bugzilla.remotesensing.org/show_bug.cgi?id=408
>>
>> Just hand edit your code changing this:
>>
>>   typedef int (*GrassErrorHandler)();
>>
>> to this:
>>    typedef int (*GrassErrorHandler)(...);
>>
>> or the other way around as needed.
>>
>> I am vaguely hopeful that the code in CVS works properly.
>>
>> Best regards,
> 
> 
> 
> Thanks Frank and Alessandro for the prompt replies. Changing 
> (*GrassErrorHandler)(...) to (*GrassErrorHandler)() solved the problem.
> 
> I had updated from CVS last night, so unfortunately I guess it's not 
> fixed in CVS.

I may have mislead you about the CVS in the sentence above - my local 
copy of GDAL source was pointed at the 1.9 CVS branch. (I'm not to swift 
with CVS). The 1.2.0b source tarball compiled with grass support correctly.

Apologies if I caused any confusion.

-- 
Richard Greenwood
www.greenwoodmap.com

From andrea.rogges at virgilio.it  Fri May 28 11:14:21 2004
From: andrea.rogges at virgilio.it (andrea.rogges@virgilio.it)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Performance with .TAB files (Mapinfo Format)
Message-ID: <4087DD5E0003034B@ims4c.cp.tin.it>

Frank,
thanks very much for your answer.

The comparison was between Mapserver (+ OGR) and MapInfo Mapxtreme, taking
the same geographic zone.

What I've noted during the test was a big difference in 'file system' activity
(a lot of read bytes with mapserver)... Where can I find the MITAB list?

Regards,
Andrea Rogges



From warmerdam at pobox.com  Fri May 28 11:30:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Performance with .TAB files (Mapinfo Format)
In-Reply-To: <4087DD5E0003034B@ims4c.cp.tin.it>
References: <4087DD5E0003034B@ims4c.cp.tin.it>
Message-ID: <40B75B11.7060907@pobox.com>

andrea.rogges@virgilio.it wrote:
> Frank,
> thanks very much for your answer.
> 
> The comparison was between Mapserver (+ OGR) and MapInfo Mapxtreme, taking
> the same geographic zone.
> 
> What I've noted during the test was a big difference in 'file system' activity
> (a lot of read bytes with mapserver)... Where can I find the MITAB list?

Andrea,

The MITAB library is hosted at http://mitab.maptools.org/  and the info on
subscribing to the list is available there.

The MITAB library does support spatial indexing.  So a mapserver query
for a small area *should* result only the features in that area being read.
I can't help but wonder if the spatial indexing isn't kicking in for some
reason.

OGR does always read all the attributes of features even if MapServer does
not actually need them.  This can be an issue in some cases.

Performance analysis and tuning is a complex area.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From EZS at DeStraat.NL  Fri May 28 12:26:41 2004
From: EZS at DeStraat.NL (Emil Zegers)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Using ogr2ogr -f PostgreSQL on Windows works now
Message-ID: <s0b78472.089@syncera.nl>

Hello Frank,

Thanks for your reply (and sorry for mailing to the wrong list :-)

I've changed the syntax to:

ogr2ogr -f "PostgreSQL" PG:"user=ezs dbname=myGISdb host=localhost password=geheim port=5432" D:\klusjes\LVE\R2058\data\basis\shp\nl_gemeente.shp overwrite=yes

And now it works, thanks.

(Had to use 'overwrite=yes' because relation was already created I think)

Best regards,

Emil Zegers



Emil Zegers wrote:
> Hello,
> 
> i'm trying to use ogr2ogr together with the Win32 PostgreSQL 7.5/PostGIS snapshot from Mark Cave-Ayland (http://www.webbased.co.uk/mca/pgsql75win.zip)
> 
> But at the moment  end up at this error:
> 
> ERROR 1: PGconnectcb failed.
> could not create socket: Address family not supported (0x0000273F/10047)
> 
> The syntax I use is:
> 
> ogr2ogr -f "PostgreSQL" PG:user=ezs PG:dbname=myGISdb PG:host=localhost PG:password=geheim PG:port=5432 D:\klusjes\LVE\R2058\data\basis\shp\nl_gemeente.shp
> 
> Something seems to go wrong with connecting to the host.

Emil,

This is a quoting issue.  The whole dataset name needs to be a single
argument to ogr2ogr, so you have to quote it.

eg.
ogr2ogr -f PostgreSQL "PG:user=ezs PG:dbname=myGISdb PG:host=localhost PG:password=geheim PG:port=5432" \
    D:\klusjes\LVE\R2058\data\basis\shp\nl_gemeente.shp

I presume that because the PG:port=5432 was missing from the dataset name it
was unable to even connect to the database properly.

I would add that this is more of a GDAL/OGR issue than an OpenEV one, and might
be better discussed on that list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent



______________________________________________________

 This message has been checked for all known viruses
______________________________________________________

From TMitchell at lignum.com  Fri May 28 13:05:39 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Using ogr2ogr -f PostgreSQL on Windows works now
In-Reply-To: <s0b78472.089@syncera.nl>
Message-ID: <OFAA3A1CE5.E6CA1AA6-ON88256EA2.005DCCC3-88256EA2.005DE66B@Riverside.bc.ca>

Glad to hear you got it working.

> ogr2ogr -f "PostgreSQL" PG:"user=ezs dbname=myGISdb host=localhost 
> password=geheim port=5432" D:
> \klusjes\LVE\R2058\data\basis\shp\nl_gemeente.shp overwrite=yes

I always thought you had to include a layer too.  And to specify 
overwrite=yes as a layer creation option:
-lco overwrite=yes

Can anyone confirm that -lco launder=yes is a default now?

Tyler

From TMitchell at lignum.com  Fri May 28 14:16:08 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] s57 support
Message-ID: <OFD36748BB.2A9DD526-ON88256EA2.0064104E-88256EA2.00645A68@Riverside.bc.ca>

Does anyone know if s57 via ogr support is built into the latest ms4w. I 
got it working last night on linux but can't seem to get it working at all 
on a windows environment.

Error looks like the following, as opposed to the file not found error:

msDrawMap(): Image handling error. Failed to draw layer named 's57'. 
msOGRFileOpen(): OGR error. GetLayer( 9) failed for OGR connection 
`data/s57/US1PO02M.000, 9'. 
msAddImageSymbol(): Unable to access file. Error opening image file 
/ms4w/apache/htdocs/mapserver/workshop/ogr-pen-6. 
msAddImageSymbol(): Unable to access file. Error opening image file 
/ms4w/apache/htdocs/mapserver/workshop/mapinfo-pen-14. 
msAddImageSymbol(): Unable to access file. Error opening image file 
/ms4w/apache/htdocs/mapserver/workshop/default-circle

From warmerdam at pobox.com  Fri May 28 14:45:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Using ogr2ogr -f PostgreSQL on Windows works now
In-Reply-To: <OFAA3A1CE5.E6CA1AA6-ON88256EA2.005DCCC3-88256EA2.005DE66B@Riverside.bc.ca>
References: <OFAA3A1CE5.E6CA1AA6-ON88256EA2.005DCCC3-88256EA2.005DE66B@Riverside.bc.ca>
Message-ID: <40B788C5.3000400@pobox.com>

Tyler Mitchell wrote:
> Glad to hear you got it working.
> 
> 
>>ogr2ogr -f "PostgreSQL" PG:"user=ezs dbname=myGISdb host=localhost 
>>password=geheim port=5432" D:
>>\klusjes\LVE\R2058\data\basis\shp\nl_gemeente.shp overwrite=yes
> 
> 
> I always thought you had to include a layer too.  And to specify 
> overwrite=yes as a layer creation option:
> -lco overwrite=yes
> 
> Can anyone confirm that -lco launder=yes is a default now?

Tyler,

This is the default in CVS, but it was a pretty recent change so most
publically available binaries likely do not include it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri May 28 14:50:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <41069686.7090405@gmx.de>
References: <ED3A48B9840E594890A2BC172D119465E63B0C@mailman.san.com> <41069686.7090405@gmx.de>
Message-ID: <40B789F5.9090100@pobox.com>

J.Krueger wrote:
> C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0xe8):test.cpp: 
> undefined reference to `GDALDataset::GetRasterBand(int)'
> C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0xf0):test.cpp: 
> undefined reference to `GDALRasterBand::GetXSize()'
> C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0xff):test.cpp: 
> undefined reference to `GDALDataset::GetRasterBand(int)'
> C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0x107):test.cpp: 
> undefined reference to `GDALRasterBand::GetYSize()'
> 
> Execution terminated
> -cut-
> 
> it's the same problem. I can use the gdal functions to open the 
> datafiles, but as soon as there's any instructions that to query 
> information from inside the dataset I can't link the binary anymore.
> 
> Btw: I'm using gcc (Dev-C++ IDE with MinGW) to compile the file. And I 
> already have the library in the linker's command line (else I'd get the 
> same errors for the
> 

Hi,

I must confess I haven't been following this build issue closely.  However,
there is one major issue.  GCC and GCC derived compilers used radically
different "name munging" rules for C++ methods than MS Visual C++ does.  So,
in general you won't be able to interact with C++ objects from a VC++ built
library from gcc.  However, you should be able to use the GDAL C API as
C function naming is uniform across compilers.

So try implementing your code more along the lines of:

  int evaluate_Inputfiles(char* infile1, char* infile2) {
   GDALAllRegister();
   // Can the files be opened at all?
   int check=0;
   check=evaluate_Inputfile(infile1);
   if (check) return 1;
   check=evaluate_Inputfile(infile2);
   if (check) return 1;
   // Do they have the same size?
   const char* filename1=infile1;
   const char* filename2=infile2;
   GDALDatasetH highresDataset, lowresDataset;

   highresDataset = GDALOpen( filename1, GA_ReadOnly );
   rastersizex = GDALGetRasterXSize( highresDataset );
   rastersizey = GDALGetRasterYSize( highresDataset );
   int xsize1 = rastersizex;
   int ysize1 = rastersizey;
...
   return 0;
}

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From keith.olsen at oregonstate.edu  Fri May 28 14:48:42 2004
From: keith.olsen at oregonstate.edu (Olsen, Keith)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] AIGReadBlock failure to read some ArcInfo Grid tiles
Message-ID: <C226ACFABCC34F4087E654292FB05D536595F5@thuja>

Hello,

 

I am new to GDAL so forgive me if this issue has already been addressed.

 

I am using the GDAL AIG driver to read arcInfo grids with values that
range from 0-5.6 million.  When I read one of these grids I get the
following warning from gridlib.c:

 

Warning 1: Unsupported Arc/Info Binary Grid tile of type 0x20
encountered.

This and subsequent unsupported tile types set to no data value.

 

The read does not crash my program, but it skips 10-20% of the 4x256
pixel tiles in my image.  The non-skipped tiles seem to be read
correctly.  When I clip out a smaller area with a dropped tile, I get
the same problem.  The grids can be read in arcInfo and arcMap with no
problems.

 

Some common characteristics of these 'bad' blocks as they are read in
the function 'AIGReadBlock' are as follows:

 

nBlockSize = 4100 or 4104

nMagic = 32

nMarker = 0 (in AIGProcessBlock)

 

nMin seem to be read correctly in both good and bad blocks.

 

Another clue is that the range of values in the few 'bad' blocks I
examined is quite large (>1 million).

 

Any ideas or suggestions would be appreciated.  I can also send anyone
copies of the grid tiles that are not being read correctly.

 

Thanks,

 

--Keith

 

===============================================

Keith Olsen                     /\

Oregon State University        /  \/\     |

Keith.Olsen@oregonstate.edu <mailto:Keith.Olsen@oregonstate.edu>     /
\  \ ---o---

(541) 750-7279                / || \ \

===============================================

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040528/fbf64349/attachment.html
From warmerdam at pobox.com  Fri May 28 14:55:01 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] s57 support
In-Reply-To: <OFD36748BB.2A9DD526-ON88256EA2.0064104E-88256EA2.00645A68@Riverside.bc.ca>
References: <OFD36748BB.2A9DD526-ON88256EA2.0064104E-88256EA2.00645A68@Riverside.bc.ca>
Message-ID: <40B78B05.4060203@pobox.com>

Tyler Mitchell wrote:
> Does anyone know if s57 via ogr support is built into the latest ms4w. I 
> got it working last night on linux but can't seem to get it working at all 
> on a windows environment.
> 
> Error looks like the following, as opposed to the file not found error:
> 
> msDrawMap(): Image handling error. Failed to draw layer named 's57'. 
> msOGRFileOpen(): OGR error. GetLayer( 9) failed for OGR connection 
> `data/s57/US1PO02M.000, 9'. 
> msAddImageSymbol(): Unable to access file. Error opening image file 
> /ms4w/apache/htdocs/mapserver/workshop/ogr-pen-6. 
> msAddImageSymbol(): Unable to access file. Error opening image file 
> /ms4w/apache/htdocs/mapserver/workshop/mapinfo-pen-14. 
> msAddImageSymbol(): Unable to access file. Error opening image file 
> /ms4w/apache/htdocs/mapserver/workshop/default-circle


Tyler,

It is likely the problem is related to finding the S57 support .csv files.
If the S57 reader cannot find s57objectclasses.csv and s57attributes.csv then
it will just provide a generic layer for each gross geometry type instead of
splitting things down by object class and you will get this sort of issue
trying to fetch a layer by number.

You will likely need to set the GDAL_DATA environment variable to point to
the directory with the files in question.  If your MS4W is recent enough
(4.2) you can likely do this within your mapfile something like the following:

   CONFIG GDAL_DATA "C:\gdal\data"

Ideally MS4W would take care of all of this somehow.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri May 28 15:04:23 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] AIGReadBlock failure to read some ArcInfo Grid tiles
In-Reply-To: <C226ACFABCC34F4087E654292FB05D536595F5@thuja>
References: <C226ACFABCC34F4087E654292FB05D536595F5@thuja>
Message-ID: <40B78D37.9090909@pobox.com>

Olsen, Keith wrote:
> Hello,
> 
>  
> 
> I am new to GDAL so forgive me if this issue has already been addressed.
> 
>  
> 
> I am using the GDAL AIG driver to read arcInfo grids with values that 
> range from 0-5.6 million.  When I read one of these grids I get the 
> following warning from gridlib.c:
> 
>  
> 
> *Warning 1: Unsupported Arc/Info Binary Grid tile of type 0x20 encountered.*
> 
> *This and subsequent unsupported tile types set to no data value.*
> 
>  
> 
> The read does not crash my program, but it skips 10-20% of the 4x256 
> pixel tiles in my image.  The non-skipped tiles seem to be read 
> correctly.  When I clip out a smaller area with a dropped tile, I get 
> the same problem.  The grids can be read in arcInfo and arcMap with no 
> problems.

Keith,

Support for block type 0x20 (32bit integer) was added March 26th.  You will
need a more recent build of GDAL, such as from a nightly CVS snapshot.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From TMitchell at lignum.com  Fri May 28 15:36:10 2004
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:49:11 2007
Subject: [ms4w-users] Re: [Gdal-dev] s57 support
In-Reply-To: <40B78B05.4060203@pobox.com>
Message-ID: <OFF506085A.A87B1AEF-ON88256EA2.006BA878-88256EA2.006BAE62@Riverside.bc.ca>

That did the trick Frank, thanks.

ms4w-users-bounces@lists.maptools.org wrote on 05/28/2004 11:55:01 AM:

> Tyler Mitchell wrote:
> > Does anyone know if s57 via ogr support is built into the latest ms4w. 
I 
> > got it working last night on linux but can't seem to get it working at 
all 
> > on a windows environment.
> > 
> > Error looks like the following, as opposed to the file not found 
error:
> > 
> > msDrawMap(): Image handling error. Failed to draw layer named 's57'. 
> > msOGRFileOpen(): OGR error. GetLayer( 9) failed for OGR connection 
> > `data/s57/US1PO02M.000, 9'. 
> > msAddImageSymbol(): Unable to access file. Error opening image file 
> > /ms4w/apache/htdocs/mapserver/workshop/ogr-pen-6. 
> > msAddImageSymbol(): Unable to access file. Error opening image file 
> > /ms4w/apache/htdocs/mapserver/workshop/mapinfo-pen-14. 
> > msAddImageSymbol(): Unable to access file. Error opening image file 
> > /ms4w/apache/htdocs/mapserver/workshop/default-circle
> 
> 
> Tyler,
> 
> It is likely the problem is related to finding the S57 support .csv 
files.
> If the S57 reader cannot find s57objectclasses.csv and s57attributes.csv 
then
> it will just provide a generic layer for each gross geometry type 
instead of
> splitting things down by object class and you will get this sort of 
issue
> trying to fetch a layer by number.
> 
> You will likely need to set the GDAL_DATA environment variable to point 
to
> the directory with the files in question.  If your MS4W is recent enough
> (4.2) you can likely do this within your mapfile something like the 
following:
> 
>    CONFIG GDAL_DATA "C:\gdal\data"
> 
> Ideally MS4W would take care of all of this somehow.
> 
> Best regards,
> -- 
> 
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> ms4w-users mailing list
> ms4w-users@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/ms4w-users


From keith.olsen at oregonstate.edu  Fri May 28 15:37:32 2004
From: keith.olsen at oregonstate.edu (Olsen, Keith)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] AIGReadBlock failure to read some ArcInfo Grid tiles
Message-ID: <C226ACFABCC34F4087E654292FB05D536595F6@thuja>

Thanks Frank.  That did the trick.  --Keith

-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Friday, May 28, 2004 12:04 PM
To: gdal-dev@remotesensing.org
Cc: Gregory, Matthew
Subject: Re: [Gdal-dev] AIGReadBlock failure to read some ArcInfo Grid
tiles

Olsen, Keith wrote:
> Hello,
> 
>  
> 
> I am new to GDAL so forgive me if this issue has already been
addressed.
> 
>  
> 
> I am using the GDAL AIG driver to read arcInfo grids with values that 
> range from 0-5.6 million.  When I read one of these grids I get the 
> following warning from gridlib.c:
> 
>  
> 
> *Warning 1: Unsupported Arc/Info Binary Grid tile of type 0x20
encountered.*
> 
> *This and subsequent unsupported tile types set to no data value.*
> 
>  
> 
> The read does not crash my program, but it skips 10-20% of the 4x256 
> pixel tiles in my image.  The non-skipped tiles seem to be read 
> correctly.  When I clip out a smaller area with a dropped tile, I get 
> the same problem.  The grids can be read in arcInfo and arcMap with no

> problems.

Keith,

Support for block type 0x20 (32bit integer) was added March 26th.  You
will
need a more recent build of GDAL, such as from a nightly CVS snapshot.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

From jnielsen at aero-graphics.com  Thu May 27 09:22:58 2004
From: jnielsen at aero-graphics.com (jason)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Convert data from Projected to Modified system...
Message-ID: <pan.2004.05.27.13.22.50.505346@aero-graphics.com>

Bear with me since I am by no means a GIS person or the like.  We have data in a
known projected system (ie: stateplane, think thats right) and we need to
transform it to a cartesian system (modified?).

I know the x/y offsets, scaling and rotation to go from the old to the new system.

The data is in a TIFF format and I was hoping to be able to use gdal or
mapserver to reproject it and dump out a new file in which only the coordinates
have changed and the shape of the TIFF etc accordingly.

I presume via gdal I can specify something like "+k=1.000202
+x_0=-1398448.885932 ..." and so on.  I am not sure this is possible but if I am
on the right track I am unsure precisely how to apply the known transformation
parameters via this method and was hoping someone might be able to point me onto
some documentation or examples as to how this can be done.

Thanks.


From warmerdam at pobox.com  Fri May 28 18:42:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <4106BC86.2000900@gmx.de>
References: <ED3A48B9840E594890A2BC172D119465E63B0C@mailman.san.com> <41069686.7090405@gmx.de> <40B789F5.9090100@pobox.com> <4106BC86.2000900@gmx.de>
Message-ID: <40B7C051.40307@pobox.com>

J.Krueger wrote:
> That would mean if I actually succeeded in building my own c++ gdal 
> library with gcc I could use it, right? Or is that a code issue? If that 
> would work I'd be happy if someone could provide me with his working 
> library (if possible with support for the ERDAS .img format), as I tried 
> my luck with the library already - without success (most likely due to 
> my lack of experience).

J.

That is dcorrect.  If you built the library using MingW it would be linkage
compatible.  Of course, building something as complicated as GDAL for an
environment that is not directly supported can be a daunting task.

>> However, you should be able to use the GDAL C API as
>> C function naming is uniform across compilers.
>> So try implementing your code more along the lines of:
>>
>>  int evaluate_Inputfiles(char* infile1, char* infile2) {
>>   GDALAllRegister();
>>   // Can the files be opened at all?
>>   int check=0;
>>   check=evaluate_Inputfile(infile1);
>>   if (check) return 1;
>>   check=evaluate_Inputfile(infile2);
>>   if (check) return 1;
>>   // Do they have the same size?
>>   const char* filename1=infile1;
>>   const char* filename2=infile2;
>>   GDALDatasetH highresDataset, lowresDataset;
>>   highresDataset = GDALOpen( filename1, GA_ReadOnly );
>>   rastersizex = GDALGetRasterXSize( highresDataset );
>>   rastersizey = GDALGetRasterYSize( highresDataset );
>>   int xsize1 = rastersizex;
>>   int ysize1 = rastersizey;
>> ...
>>   return 0;
>> }
> 
> 
> Mhh... the only change I see is that you're using 'GDALDatasetH' now 
> instead of GDALDataset. Is that all I'd have to change? As I said in my 
> first post - I'm a mere beginner as far as C/C++ is concerned. Basically 
> I'm using my need for the tool I work on as a motivation to learn C++, 
> so some stupid questions are to be expected... ;)

Well, now instead of calling GetRasterXSize() (or GetXSize()?) on the
GDALDataset object, I am now calling GDALGetRasterXSize() and passing in
the GDALDatasetH.  Basically, there are C API functions corresponding to
most C++ methods.  Use it that way and you will be OK.   Though of course,
you won't learn so much about C++.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri May 28 19:35:41 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] floating point bug
In-Reply-To: <00a001c44499$33e5cdc0$695d4cd5@n7a3h9>
References: <014b01c4384d$7e61ea80$8d584cd5@n7a3h9> <00a001c44499$33e5cdc0$695d4cd5@n7a3h9>
Message-ID: <40B7CCCD.6060307@pobox.com>

Maciek Sieczka wrote:
> Hello Frank
> 
> did you find the reason of troubles with FP ArcGrid I reported?

Maciek,

Sorry, I don't recall the details.  What that the one that was really a BIL
file, and GDAL didn't support floating point BIL files?   That was resolved
by assuming that 32bit files were floating point.  If it was really an
arc/grid binary grid coverage, could you provide it again?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon May 31 10:21:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <4106EA6F.2090301@gmx.de>
References: <ED3A48B9840E594890A2BC172D119465E63B0C@mailman.san.com> <41069686.7090405@gmx.de> <40B789F5.9090100@pobox.com> <4106BC86.2000900@gmx.de> <40B7C051.40307@pobox.com> <4106EA6F.2090301@gmx.de>
Message-ID: <40BB3F83.8000105@pobox.com>

J.Krueger wrote:
> Frank Warmerdam wrote:
> 
>>> Mhh... the only change I see is that you're using 'GDALDatasetH' now 
>>> instead of GDALDataset. Is that all I'd have to change? As I said in 
>>> my first post - I'm a mere beginner as far as C/C++ is concerned. 
>>> Basically I'm using my need for the tool I work on as a motivation to 
>>> learn C++, so some stupid questions are to be expected... ;)
>>
>> Well, now instead of calling GetRasterXSize() (or GetXSize()?) on the
>> GDALDataset object, I am now calling GDALGetRasterXSize() and passing in
>> the GDALDatasetH.  Basically, there are C API functions corresponding to
>> most C++ methods.  Use it that way and you will be OK.
> 
> 
> Yeah, I found those - didn't read your quote thoroughly enough. So 
> basically I change any call like
> 
> <variable> = <dataset>-><instruction>;
> to
> <variable> = GDAL<instruction>(<dataset>);
> 
> and it will work? Nice!

J.

Well, it isn't always quite that simple but that rule usually works.  The
online reference docs for the methods include the name of the corresponding
C function.  You just move the object pointer you would have used into the
function call as the first argument (using the equivelent handle type).  A
few low level structures such as GDALColorEntry continue to be just structures.

Best regards,
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at pf.pl  Mon May 31 05:04:12 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] floating point bug
Message-ID: <006d01c446ee$8500cf00$4f5a4cd5@n7a3h9>

> Sorry, I don't recall the details.  What that the one that was really a
> BIL file, and GDAL didn't support floating point BIL files?   That
> was resolved by assuming that 32bit files were floating point.  If it
> was really an arc/grid binary grid coverage, could you provide it
> again?

The problem with BIL occured "by the way" when I was trying to
walkover my problem.

The MAIN issue is: FP ArcGrid support in GDAL is faulty IMHO.

below goes our most recent email on this subject
a sample of the problematic file is attached

>> I find it hard to believe that GDAL's AIG driver would misreport a
>> floating point Arc/Info Binary Grid as Int16.  If you can provide a
>> sample Arc/Info grid that demonstrates this problem I will investigate.

> I digged a little more and I'm confused.

> I noticed that whether GDAL recognises the FP ARCGrid as FP or INT
> depends somehow on the proportion and distribution of null/data
> cells in a file but I can't find a simple rule for this (and I may be
> wrong as well). Anyway if the FP grid file is "100% data" it is always
> recognised as FP. But if it contains nulls then GDAL will see it as INT or
> FP dependending on the file itself. Examples for both cases taken out from
> my FP ARCGrid are attached in the arc.tgz. If you need a bigger one please
> let me know. BOTH shold be FLOATING POINT while only ONE is recognised
> properly.

Cheers
Maciek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: arc.tgz
Type: application/octet-stream
Size: 12839 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040531/6145b5c0/arc.obj
From werchowyna at pf.pl  Mon May 31 17:33:13 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] floating point bug
Message-ID: <002e01c44757$0c251460$66584cd5@n7a3h9>

> Sorry, I don't recall the details.  What that the one that was really a
> BIL file, and GDAL didn't support floating point BIL files?   That
> was resolved by assuming that 32bit files were floating point.  If it
> was really an arc/grid binary grid coverage, could you provide it
> again?

The problem with BIL occured "by the way" when I was trying to
walkover my problem.

The MAIN issue is: FP ArcGrid support in GDAL is faulty IMHO.

below goes our most recent email on this subject
a sample of the problematic file is attached

>> I find it hard to believe that GDAL's AIG driver would misreport a
>> floating point Arc/Info Binary Grid as Int16.  If you can provide a
>> sample Arc/Info grid that demonstrates this problem I will investigate.

> I digged a little more and I'm confused.

> I noticed that whether GDAL recognises the FP ARCGrid as FP or INT
> depends somehow on the proportion and distribution of null/data
> cells in a file but I can't find a simple rule for this (and I may be
> wrong as well). Anyway if the FP grid file is "100% data" it is always
> recognised as FP. But if it contains nulls then GDAL will see it as INT or
> FP dependending on the file itself. Examples for both cases taken out from
> my FP ARCGrid are attached in the arc.tgz. If you need a bigger one please
> let me know. BOTH shold be FLOATING POINT while only ONE is recognised
> properly.

Cheers
Maciek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: arc.tgz
Type: application/octet-stream
Size: 12839 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040531/f93bbb5e/arc.obj
From werchowyna at pf.pl  Sun May 30 13:07:42 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] floating point bug
References: <014b01c4384d$7e61ea80$8d584cd5@n7a3h9> <00a001c44499$33e5cdc0$695d4cd5@n7a3h9> <40B7CCCD.6060307@pobox.com>
Message-ID: <00c901c4466d$018b4320$d55a4cd5@n7a3h9>

> Sorry, I don't recall the details.  What that the one that was really a
> BIL file, and GDAL didn't support floating point BIL files?   That
> was resolved by assuming that 32bit files were floating point.  If it
> was really an arc/grid binary grid coverage, could you provide it
> again?

The problem with BIL occured "by the way" when I was trying to
walkover my problem, doesn't matter now.

The isuue is: FP ArcGrid support in GDAL is faulty IMOH.

below goes our most recent email on this subject
a sample of the problematic file is attached

>> I find it hard to believe that GDAL's AIG driver would misreport a
>> floating point Arc/Info Binary Grid as Int16.  If you can provide a
>> sample Arc/Info grid that demonstrates this problem I will investigate.

> I digged a little more and I'm confused.

> I noticed that whether GDAL recognises the FP ARCGrid as FP or INT
> depends somehow on the proportion and distribution of null/data
> cells in a file but I can't find a simple rule for this (and I may be
> wrong as well). Anyway if the FP grid file is "100% data" it is always
> recognised as FP. But if it contains nulls then GDAL will see it as INT or
> FP dependending on the file itself. Examples for both cases taken out from
> my FP ARCGrid are attached in the arc.tgz. If you need a bigger one please
> let me know. BOTH shold be FLOATING POINT while only ONE is recognised
> properly.

Cheers
Maciek
-------------- next part --------------
A non-text attachment was scrubbed...
Name: arc.tgz
Type: application/octet-stream
Size: 12839 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040530/d6736a97/arc.obj
From tim at linfiniti.com  Mon May 31 04:46:23 2004
From: tim at linfiniti.com (Tim Sutton)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] pabydata declaration in GDALRasterBand::ReadBlock documentation
Message-ID: <200405310946.26313.tim@linfiniti.com>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi

I have been going through the documentation & examples in 
GDALRasterBand::ReadBlock and am wondering what the declaration for pabyData 
is? It is used in the example but never declared (see below).

Many thanks


 CPLErr GetHistogram( GDALRasterBand *poBand, int *panHistogram )

 {
     int        nXBlocks, nYBlocks, nXBlockSize, nYBlockSize;
     int        iXBlock, iYBlock;

     memset( panHistogram, 0, sizeof(int) * 256 );

     CPLAssert( poBand->GetRasterDataType() == GDT_Byte );

     poBand->GetBlockSize( &nXBlockSize, &nYBlockSize );
     nXBlocks = (poBand->GetXSize() + nXBlockSize - 1) / nXBlockSize;
     nYBlocks = (poBand->GetYSize() + nYBlockSize - 1) / nYBlockSize;

     pabyData = (GByte *) CPLMalloc(nXBlockSize * nYBlockSize);


.
.
.
example continues...


Regards

Tim Sutton

- -- 
The only reason for time is so that everything doesn't happen at once 
 --Albert Einstein 

Get my public keys from:

http://tim.suttonfamily.co.uk/modules.php?name=Content&pa=showpage&pid=2
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFAuvDfWvXTJUo0BDoRAnAGAJ92bIjWbH4eNz/nD3vvK5vLJzWy4QCfXYGs
6f2oclNKZGyIWsGw4TlzTNY=
=MM1K
-----END PGP SIGNATURE-----

From pagameba at magma.ca  Fri May 28 21:37:17 2004
From: pagameba at magma.ca (Paul Spencer)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: [ms4w-users] s57 support
In-Reply-To: <OFD36748BB.2A9DD526-ON88256EA2.0064104E-88256EA2.00645A68@Riverside.bc.ca>
References: <OFD36748BB.2A9DD526-ON88256EA2.0064104E-88256EA2.00645A68@Riverside.bc.ca>
Message-ID: <40B7E94D.1030903@magma.ca>

Tyler,

I am pretty sure that I don't add s57 support to my windows builds, and 
since I got them from Assefa, I doubt they are in the downloads from our 
site, including ms4w.

Please contact either myself or Assefa directly if you are interesting 
in having us do this for you ...

Paul

Tyler Mitchell wrote:
> Does anyone know if s57 via ogr support is built into the latest ms4w. I 
> got it working last night on linux but can't seem to get it working at all 
> on a windows environment.
> 
> Error looks like the following, as opposed to the file not found error:
> 
> msDrawMap(): Image handling error. Failed to draw layer named 's57'. 
> msOGRFileOpen(): OGR error. GetLayer( 9) failed for OGR connection 
> `data/s57/US1PO02M.000, 9'. 
> msAddImageSymbol(): Unable to access file. Error opening image file 
> /ms4w/apache/htdocs/mapserver/workshop/ogr-pen-6. 
> msAddImageSymbol(): Unable to access file. Error opening image file 
> /ms4w/apache/htdocs/mapserver/workshop/mapinfo-pen-14. 
> msAddImageSymbol(): Unable to access file. Error opening image file 
> /ms4w/apache/htdocs/mapserver/workshop/default-circle
> _______________________________________________
> ms4w-users mailing list
> ms4w-users@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/ms4w-users
> 

-- 
  -----------------------------------------------------------------
|Paul Spencer                           pspencer@dmsolutions.ca   |
|-----------------------------------------------------------------|
|Applications & Software Development                              |
|DM Solutions Group Inc                 http://www.dmsolutions.ca/|
  -----------------------------------------------------------------


From milberger at globe.gov  Mon May 31 18:30:31 2004
From: milberger at globe.gov (Karen Milberger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] gdal
Message-ID: <40BBB207.1050502@globe.gov>

Hi,

I am looking for the tar.gz distribution of gdal (either 1.1.9 or 1.2.0) 
and it doesn't seem to be mirrored anywhere other than 
remotesensing.org, and ftp.remotesensing.org seems to be down.  Is there 
anywhere that I can get it?  (I've had no luck with the rpm.)

Thanks,
Karen



