From grant at cyrf.com  Tue Feb  1 01:50:52 2005
From: grant at cyrf.com (John K. Grant)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] compile help on windows, gdal-1.2.3
Message-ID: <41FF26CC.9070406@cyrf.com>

Hi,
I am trying to complile gdal on windows.  After modifying nmake.opt to 
find libjpeg and libpng, I see that the gdal_i.lib file is in fact 
created, but there are errors as it tries to create the .dll.  Can 
someone please help me to make the .dll compile?
The errors can be seen at the bottom of this output file:
http://cyrf.com/temp/gdal_errors.txt

Thanks, -John

From brodin_ign at gva.es  Tue Feb  1 03:44:53 2005
From: brodin_ign at gva.es (Nacho)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] ECW Source SDK Available - Linux Binaries Prepared
Message-ID: <200502010944.53066.brodin_ign@gva.es>

Hi,
I have compiled gdal with .ecw support in Linux and I am doing some test with 
it.
I have detected a performance problem and I'd like some help about it.
When I read a window (100x100 px) smaller than the total width
of the image (8400x6200 px) it cost same time than reading a window
with full width (8400x100 px). With gdalinfo I've seen that it has a
block size of 8400x1 and I think there are some relationship, but I've no
idea about how to cope with it.
I've had some equaly puzzling results with mrsid, and no having solved it
I finally decided to use GeoDSDK library without GDAL.
Maybe I'm doing a bad use of the library ?... any help welcome

thanks in advance


From nhueffme at intevation.de  Tue Feb  1 03:49:55 2005
From: nhueffme at intevation.de (Nina =?iso-8859-1?q?H=FCffmeyer?=)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Testfiles
In-Reply-To: <2576812186CDD411BF1500508B6DCE950972F450@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE950972F450@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <20050201084955.EB0B436CE3@mail.intevation.de>

Hi,

I am trying to implement ogr support for the GIS software Thuban [1]. Now I 
am looking for some geodata files to test it. Especially I am looking for 
kind of 'tricky' files, e.g. files containing polygons with holes, lines that 
cross etc. So if anybody has some files he already had problems with or that 
might cause problems, I would appreciate if you send me some files or links.

Thanks in advance,
          Nina

[1] http://thuban.intevation.org/

From fwarmerdam at gmail.com  Tue Feb  1 10:04:00 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] ECW Source SDK Available - Linux Binaries Prepared
In-Reply-To: <200501311445.24346.brodin_ign@gva.es>
References: <41F73398.9080804@pobox.com> <200501311445.24346.brodin_ign@gva.es>
Message-ID: <931f8ea9050201070477d31e2d@mail.gmail.com>

On Mon, 31 Jan 2005 14:45:24 +0100, Nacho <brodin_ign@gva.es> wrote:
> Hi,
> I have compiled gdal with .ecw support in Linux and I am doing some test with
> it.
> I have detected a performance problem and I'd like some help about it.
> When I read a window (100x100 px) smaller than the total width
> of the image (8400x6200 px) it cost same time than reading a window
> with full width (8400x100 px). With gdalinfo I've seen that it has a
> block size of 8400x1 and I think there are some relationship, but I've no
> idea about how to cope with it.
> I've had some equaly puzzling results with mrsid, and no having solved it
> I finally decided to use GeoDSDK library without GDAL.
> Maybe I'm doing a bad use of the library  ... any help welcome

Nacho, 

There are some issues with how GDAL decides whether to do block based
reading, or custom windowed reads with some of the specialized drivers
like the MrSID, ECW and JPEG2000 drivers.  

Are you using the latest CVS version of the ECW driver?  I have substantially
rewritten it since GDAL 1.2.5.  What calls do you make?   A since
GDALRasterBand::RasterIO() for each band?  One call per scanline needed?
Different access patterns can give quite different behavior. 

I am interested in working on the logic to give good general case behavior of
the driver, so if you can write up a small program that demonstrates your access
case, and also provide the configuration information about your file, I can dig
into what is happening. 

Similar issues arise with MrSID, ECW and JPEG2000 though the internal rules
are not the same, so fixing one won't necessary fix the others. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From juergen.link at freenet.de  Tue Feb  1 10:23:26 2005
From: juergen.link at freenet.de (juergen.link@freenet.de)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Performance of MrSID support in GDAL
Message-ID: <E1CvzsE-00087c-HG@www1.emo.freenet-rz.de>

Hi Folks,
we are facing a strange problem using UMN Mapserver with MrSID support.
When asking for raster data from a compressed source the mapserver on our fast Linux box 
takes about 4.5 seconds to decode MrSID data. A much smaller and slower Windows box
does the job in less than a second.
We cooked down the problem and found 2 possible hints:
- LizardTech's  tool mrsiddecode takes about 0.5 sec to render a JPEG file 
      mrsiddecode -i 0259005590_dop5__c_025.sid -o test.jpg -ulxy 500 500 -wh 800 600
- while gdal's tool  takes 4.5 sec
      gdal_translate 0259005590_dop5__c_025.sid test_gdal.jpg -srcwin  500 500 800 600 -of JPEG
So it seems to be a lack of gdal lib, rather  than mapserver's?
Did we do any wrong with our compile job??

Thanks in advance
J?rgen


Details:
- SUSE Linux  Enterprise (SLES 9)
- gdal 1.2.5
- LizardTech's DSDK (Geo_DSDK-4.0.9.713)
- gcc version 3.3.3
- gdal configure options:   --with-mrsid=/opt/LT/Geo_DSDK-4.0.9.713 --without-mysql --with-oci=/opt/oracle/OraHome1/

The compressed raster data can be found at mapbender's project home at sourceforge:
      https://sourceforge.net/project/showfiles.php?group_id=88554&package_id=118698&release_id=301127






From fwarmerdam at gmail.com  Tue Feb  1 10:27:22 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] compile help on windows, gdal-1.2.3
In-Reply-To: <41FF26CC.9070406@cyrf.com>
References: <41FF26CC.9070406@cyrf.com>
Message-ID: <931f8ea9050201072723be70ec@mail.gmail.com>

On Tue, 01 Feb 2005 00:50:52 -0600, John K. Grant <grant@cyrf.com> wrote:
> Hi,
> I am trying to complile gdal on windows.  After modifying nmake.opt to
> find libjpeg and libpng, I see that the gdal_i.lib file is in fact
> created, but there are errors as it tries to create the .dll.  Can
> someone please help me to make the .dll compile?
> The errors can be seen at the bottom of this output file:
> http://cyrf.com/temp/gdal_errors.txt

John,

You have a conflict between components compiled to use LIBC
and those compiled to use MSVCRT.  One is the "static" C library
support, and the other is a seperate runtime C library DLL.  

My guess would be that your libjpeg and/or libpng are compiled
to use libc, and you have built GDAL the default way to use MSVCRT.

Basically, you can't practically mix object code built for different modes
with MSVC.  Either build everything the same way, or build libpng and
libjpeg as DLLs, and only link against the stub library instead of the full
static library.  

BTW, it is the /MD compiler option that select MSVCRT.  Leaving it
off should default to using LIBC.  I encourage use of MSVCRT though
it isn't strictly necessary.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Tue Feb  1 13:23:54 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Performance of MrSID support in GDAL
In-Reply-To: <E1CvzsE-00087c-HG@www1.emo.freenet-rz.de>
References: <E1CvzsE-00087c-HG@www1.emo.freenet-rz.de>
Message-ID: <931f8ea905020110236455c534@mail.gmail.com>

On Tue, 01 Feb 2005 16:23:26 +0100, juergen.link@freenet.de
<juergen.link@freenet.de> wrote:
> Hi Folks,
> we are facing a strange problem using UMN Mapserver with MrSID support.
> When asking for raster data from a compressed source the mapserver on our fast Linux box
> takes about 4.5 seconds to decode MrSID data. A much smaller and slower Windows box
> does the job in less than a second.
> We cooked down the problem and found 2 possible hints:
> - LizardTech's  tool mrsiddecode takes about 0.5 sec to render a JPEG file
>       mrsiddecode -i 0259005590_dop5__c_025.sid -o test.jpg -ulxy 500 500 -wh 800 600
> - while gdal's tool  takes 4.5 sec
>       gdal_translate 0259005590_dop5__c_025.sid test_gdal.jpg -srcwin  500 500 800 600 -of JPEG
> So it seems to be a lack of gdal lib, rather  than mapserver's?
> Did we do any wrong with our compile job??

Jurgen,

I believe the problem is that GDAL is requesting data on a block (full
image width) basis.  I went to download the latest MrSID SDK but
got scared off again by all the licensing language.  It is very hard for
me to understand it all and be confident I would be adhering to it
properly.  

However, I guess I will need to get over this hump so I can do some
work on the driver. 

Your use-case is definately the one we want to operate efficiently.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From armin.burger at gmx.net  Tue Feb  1 14:21:43 2005
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] GDAL and ECW compressor of the new 3.1 SDK
Message-ID: <20050201192120.5CCBD622380@xserve.flids.com>

Hi,
I downloaded the latest version of the FWTools (0.9.5) that has the new ECW compressor from the SDK 3.1 included. It seems that also this version has the 500 MB limitation of uncompressed source files for writing ECW.

As I understood from the new license possibilities of ERM is that Open Source software can make use of the unlimited version:

"GPL-style license: A free license, providing unlimited read/unlimited compression  for ECW and JPEG 2000 in any GPL style application."

Will GDAL move towards using this license version and then include the unlimited compression to ECW/JP2000?

Best regards,

Armin



From fwarmerdam at gmail.com  Tue Feb  1 14:57:38 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] GDAL and ECW compressor of the new 3.1 SDK
In-Reply-To: <20050201192120.5CCBD622380@xserve.flids.com>
References: <20050201192120.5CCBD622380@xserve.flids.com>
Message-ID: <931f8ea905020111576a451acb@mail.gmail.com>

On Tue, 1 Feb 2005 20:21:43 +0100, Armin Burger <armin.burger@gmx.net> wrote:
> Hi,
> I downloaded the latest version of the FWTools (0.9.5) that has the new ECW compressor from the SDK 3.1 included. It seems that also this version has the 500 MB limitation of uncompressed source files for writing ECW.
> 
> As I understood from the new license possibilities of ERM is that Open Source software can make use of the unlimited version:
> 
> "GPL-style license: A free license, providing unlimited read/unlimited compression  for ECW and JPEG 2000 in any GPL style application."
> 
> Will GDAL move towards using this license version and then include the unlimited compression to ECW/JP2000?

Armin, 

The issue isn't in GDAL itself, it is really a question of what build of the
libraries will be included in FWTools.  Currently I used the 3.1 library
build provided on the ERMapper web site, which I gather is preconfigured
to enforce the 500MB compress restriction.  I hadn't been intending to 
build the ECW SDK from source on win32 if I could avoid it, but this might
be a reason to do so. 

Of course, it is also possible there is some call I can make with the
pre-built version that will let me compress larger than 500MB files. 

If you submit a bugzilla report against FWTools, I will look into the issue
but no promises on a timeline. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Tue Feb  1 16:04:26 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] read prj & metadata from .html file?
Message-ID: <41FFEEDA.6070700@gov.yk.ca>

Hi there,

Has anybody done any work to allow gdal_translate/info read metadata and 
projection info from an html file?

I have 3000 DRGs downloaded from the USGS and I would like to install 
the metadata directly in the tiffs. Currently gdal reads the origin, 
pixel size, corner coords, etc. from the .tfw but misses the UTM Zone, 
spheriod, etc. in the metadata file.


Is this possible or am I dreaming (a common occurence, believe me :)

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------


From gillian.walter at atlantis-scientific.com  Tue Feb  1 16:35:55 2005
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] thinplatespline compile problem
Message-ID: <41FFF63B.3000809@atlantis-scientific.com>

Hi,

I just tried compiling with the latest cvs, and I had to add:

#ifndef FLT_MIN
#define FLT_MIN 1.17549435e-38f
#endif

#ifndef FLT_MAX
#define FLT_MAX 3.40282347e+38f
#endif

to the top of thinplatespline.cpp to get it to compile.  It seems 
FLT_MIN/FLT_MAX are not always defined by the default headers. 

Gillian



From fwarmerdam at gmail.com  Tue Feb  1 16:41:59 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] thinplatespline compile problem
In-Reply-To: <41FFF63B.3000809@atlantis-scientific.com>
References: <41FFF63B.3000809@atlantis-scientific.com>
Message-ID: <931f8ea90502011341564073d9@mail.gmail.com>

On Tue, 01 Feb 2005 16:35:55 -0500, Gillian Walter
<gillian.walter@atlantis-scientific.com> wrote:
> Hi,
> 
> I just tried compiling with the latest cvs, and I had to add:
> 
> #ifndef FLT_MIN
> #define FLT_MIN 1.17549435e-38f
> #endif
> 
> #ifndef FLT_MAX
> #define FLT_MAX 3.40282347e+38f
> #endif
> 
> to the top of thinplatespline.cpp to get it to compile.  It seems
> FLT_MIN/FLT_MAX are not always defined by the default headers.

Gillian,

thinplatespline.c is supposed to be picking these up in either 
float.h or values.h based on:

#ifdef HAVE_FLOAT_H
#  include <float.h>
#elif defined(HAVE_VALUES_H)
#  include <values.h>
#endif

The logic to define HAVE_FLOAT_H or HAVE_VALUES_H was added
to the GDAL configure somewhat recently.  Note that a cvs update without
re-running configure will miss this.  Any change that is what you did? 

If despite all these there is still a case where FLT_MIN and FLT_MAX
are not defined feel free to commit such a change.   Just verify the problem
isn't that you didn't rerun configure.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gillian.walter at atlantis-scientific.com  Tue Feb  1 16:49:18 2005
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] thinplatespline compile problem
In-Reply-To: <931f8ea90502011341564073d9@mail.gmail.com>
References: <41FFF63B.3000809@atlantis-scientific.com>
	<931f8ea90502011341564073d9@mail.gmail.com>
Message-ID: <41FFF95E.7090909@atlantis-scientific.com>

Frank Warmerdam wrote:

>
>
>The logic to define HAVE_FLOAT_H or HAVE_VALUES_H was added
>to the GDAL configure somewhat recently.  Note that a cvs update without
>re-running configure will miss this.  Any change that is what you did? 
>  
>
Yes.

>If despite all these there is still a case where FLT_MIN and FLT_MAX
>are not defined feel free to commit such a change.   Just verify the problem
>isn't that you didn't rerun configure.
>
>Best regards,
>  
>
I've rerun configure and it works.  Sorry for the bother.

Gillian



From fwarmerdam at gmail.com  Tue Feb  1 16:44:54 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] read prj & metadata from .html file?
In-Reply-To: <41FFEEDA.6070700@gov.yk.ca>
References: <41FFEEDA.6070700@gov.yk.ca>
Message-ID: <931f8ea905020113441b6ddc5a@mail.gmail.com>

On Tue, 01 Feb 2005 13:04:26 -0800, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> Hi there,
> 
> Has anybody done any work to allow gdal_translate/info read metadata and
> projection info from an html file?
> 
> I have 3000 DRGs downloaded from the USGS and I would like to install
> the metadata directly in the tiffs. Currently gdal reads the origin,
> pixel size, corner coords, etc. from the .tfw but misses the UTM Zone,
> spheriod, etc. in the metadata file.
> 
> Is this possible or am I dreaming (a common occurence, believe me :)

Matt,

I'm not really interested in having the GDAL GeoTIFF driver go digging
around for html files to get metadata from.  Instead, I would suggest you
write a script to capture the metadata and apply it in your translation.

You can use the -a_srs switch to assign a particular coordinate system. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From matt.wilkie at gov.yk.ca  Tue Feb  1 17:36:42 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] read prj & metadata from .html file?
In-Reply-To: <931f8ea905020113441b6ddc5a@mail.gmail.com>
References: <41FFEEDA.6070700@gov.yk.ca>
	<931f8ea905020113441b6ddc5a@mail.gmail.com>
Message-ID: <4200047A.70805@gov.yk.ca>

Hi Frank,

> I'm not really interested in having the GDAL GeoTIFF driver go digging
> around for html files to get metadata from.  Instead, I would suggest you
> write a script to capture the metadata and apply it in your translation.

I half expected that would be your stance. I was hoping that someone 
would chime in with a script they'd already built. :) Guess I'll try and 
figure out how to do it myself.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------


From matt.wilkie at gov.yk.ca  Tue Feb  1 19:39:07 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] read prj & metadata from .html file?
In-Reply-To: <4200047A.70805@gov.yk.ca>
References: <41FFEEDA.6070700@gov.yk.ca>	<931f8ea905020113441b6ddc5a@mail.gmail.com>
	<4200047A.70805@gov.yk.ca>
Message-ID: <4200212B.60506@gov.yk.ca>

> I half expected that would be your stance. I was hoping that someone 
> would chime in with a script they'd already built. :) Guess I'll try and 
> figure out how to do it myself.

Okay here is a quick and dirty bash script which works about 80% of the 
time -- on the DRGs I've tested (only about 100!). It fails where the 
structure of the html file is slightly different from the norm, for 
example an extra space before the Zone number or something.

The only parameter it grabs from the metadata html file is the UTM Zone 
number.

Process-list.txt prepared ahead of time and looks like:
	c70141a1
	c70141a1
	c70144a1
	c51178c1
where each number corresponds to the tif filename (c51178c1.tif)

#!/bin/sh
for drg in `<process-list`; do
     # get the UTM Zone number
     DRGZONE=`grep Zone $drg.html | sed -e 's/<.*> *//' -`
     #translate and set prj info
     gdal_translate -a_srs "+proj=utm +datum=nad27 +zone=$DRGZONE" -co 
"COMPRESS=PACKBITS" $drg.tif out/$drg.tif
     # clean up
     DRGZONE=
     done
echo.
echo Watch for Zones which look out of range:
echo.
for img in *.tif; do
     gdalinfo $img |grep -i zone
     done
#/end of script/


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------


From ed at topozone.com  Tue Feb  1 21:40:35 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] read prj & metadata from .html file?
Message-ID: <4BF377919225F449BB097CB76FFE9BC80FCB3A@ptolemy.topozone.com>

Matt -

>From the GDAL output you sent me separately, it appears that your
fundamental problem is that you have GeoTIFFs described by EPSG
projection codes (such as 26702, NAD27 UTM Zone 2 N) that are not
installed on your system.  Updating your EPSG projection definitions to
include the values reported by the GeoTIFFs you're using is probably the
quickest, simplest, and most reliable route to a solution.

     - Ed

Ed McNierney
TopoZone.com

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Matt Wilkie
Sent: Tuesday, February 01, 2005 7:39 PM
To: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] read prj & metadata from .html file?

> I half expected that would be your stance. I was hoping that someone 
> would chime in with a script they'd already built. :) Guess I'll try
and 
> figure out how to do it myself.

Okay here is a quick and dirty bash script which works about 80% of the 
time -- on the DRGs I've tested (only about 100!). It fails where the 
structure of the html file is slightly different from the norm, for 
example an extra space before the Zone number or something.

The only parameter it grabs from the metadata html file is the UTM Zone 
number.

Process-list.txt prepared ahead of time and looks like:
	c70141a1
	c70141a1
	c70144a1
	c51178c1
where each number corresponds to the tif filename (c51178c1.tif)

#!/bin/sh
for drg in `<process-list`; do
     # get the UTM Zone number
     DRGZONE=`grep Zone $drg.html | sed -e 's/<.*> *//' -`
     #translate and set prj info
     gdal_translate -a_srs "+proj=utm +datum=nad27 +zone=$DRGZONE" -co 
"COMPRESS=PACKBITS" $drg.tif out/$drg.tif
     # clean up
     DRGZONE=
     done
echo.
echo Watch for Zones which look out of range:
echo.
for img in *.tif; do
     gdalinfo $img |grep -i zone
     done
#/end of script/


cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From werchowyna at pf.pl  Wed Feb  2 06:23:20 2005
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] man pages mixed
Message-ID: <000801c5091a$fa71d150$03d21d3e@eustahiush>

Hi Frank

On my gdal-cvs-20050115 built from source the man pages for gdal_contour and 
gdaltindex are mixed into one - /usr/local/man/man1/gdaltindex.1.bz2. Is it 
GDAL's fault?

Maciek 


From Silke.Reimer at intevation.de  Wed Feb  2 07:00:01 2005
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] man pages mixed
In-Reply-To: <000801c5091a$fa71d150$03d21d3e@eustahiush>
References: <000801c5091a$fa71d150$03d21d3e@eustahiush>
Message-ID: <20050202120001.GA9970@intevation.de>

On Wed, Feb 02, 2005 at 12:23:20PM +0100, Maciek Sieczka wrote:
> Hi Frank
> 
> On my gdal-cvs-20050115 built from source the man pages for gdal_contour 
> and gdaltindex are mixed into one - /usr/local/man/man1/gdaltindex.1.bz2. 
> Is it GDAL's fault?

It it the fault of a wront doxygen configuration for the creation of
manpages.

Frank, could you please apply the following patch to the gdal-cvs?
It should fix the problem (and additionally fix the case that no
pct2rgb.py-manpage is created).

Many thanks,

	Silke


--- gdal-1.2.5.orig/gcore/gdal_utilities.dox
+++ gdal-1.2.5/gcore/gdal_utilities.dox
@@ -578,7 +578,8 @@
 \if man
 \section wauthor AUTHOR
 Frank Warmerdam <warmerdam@pobox.com>
-
+*/
+/*! \page gdal_contour
 builds vector contour lines from a raster elevation model
 \section isynopsis SYNOPSIS
 \endif
@@ -702,6 +703,8 @@
 \if man
 \section iauthor AUTHOR
 Frank Warmerdam <warmerdam@pobox.com>
+*/
+/*! \page pct2rgb.py
 
 converts an image into a pseudo-colored image
 \section rsynopsis SYNOPSIS

-- 
Intevation GmbH

Georgstrasse 4                    49074 Osnabr?ck, Germany
http://intevation.de              http://intevation.de/~silke
FreeGIS.org                       http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/ac4fa812/attachment.bin
From sholl at gmx.net  Wed Feb  2 07:00:49 2005
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] L1G Landsat data
Message-ID: <20050202130049.01ba507a@localhost>

Dear Developers,

I am trying to convert a Landsat ETM+ in LG1-Format to geotiff. gdalwarp
can read the files with its subdatasets, but looses the georeferencing.

I tryed with gdal-1.2.0b as I heared it should work, but I could not 
manage to make it workuing.

Also with dal-1.2.6, no luck...

During searching the archives I found mails from Feb. 2004 with the same
problem, but no answer was given.
Are there any further information on that, if importing L1G-Data is
readable with georeferencing?

Thanks in advance for any help on this topic.

	Stephan

-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/579a5b8c/attachment.bin
From brodin_ign at gva.es  Wed Feb  2 07:11:50 2005
From: brodin_ign at gva.es (Nacho)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Ecw and MrSID performance.
Message-ID: <200502021311.50763.brodin_ign@gva.es>

Hi,
I have downloaded the latest CVS version of GDAL and I have been doing some 
tests with MrSID and Ecw images in linux with different window sizes (without 
using overviews). I am testing Ecw and Mrsid accesing by lines and also 
reading the full window. The latest version of GDAL give me (with Ecw) very 
good results reading by window and very bad results reading lines. In MrSID 
reading data is very slow at any case.
These are the tests results.
------------------------
Ecw image size 8400x6000
Reading lines (in px) 	500x1 =  0.165 s
			8400x1 = 0.872 s
			4000x10 = 0.860 s
			1x10 =	0.840 s
			1x500 = 57.151 s
			1x6000 =  s
			2048x2048 =
Ecw image size 8400x6000
Reading window (in px) 	500x1 =  0.251 s
		 	8400x1 = 0.169 s
			4000x10 = 0.146 s
			1x10 =	0.066 s
			1x500 = 0.093 s
			1x6000 = 0.316 s
			2048x2048 = 1.442 s
Ecw image size 45899x37169
Reading window (in px) 	500x1 =  0.691 s
		 	45899x1 = 0.454 s
			4000x10 = 0.367 s
			1x10 =	0.313 s
			1x500 = 0.349 s
			1x37169 = 4.624 s
			2048x2048 = 1.477 s
MrSID image size 7100x4800
Reading lines (in px) 	500x1 =  0.426 s
		 	7100x1 = 0.425 s
			4000x10 = 0.453 s
			1x10 =	0.405 s
			1x500 = 2.799 s
			1x4000 = 39.06 s
			2048x2048 = 10.775 s
MrSID image size 7100x4800
Reading window (in px) 	500x1 =  0.426 s
		 	7100x1 = 0.393 s
			4000x10 = 0.420 s
			1x10 =	0.423 s
			1x500 = 8.095 s
			1x4000 = 1m 0.834 s
			2048x2048 = 32.391 s
------------------------

This is the code for the probes. It's only a simple test code for
images with three bands.

READING LINES

#include <stdio.h>
#include "gdal.h"
#include "cpl_conv.h"

int main( int argc, char **argv ){

    GDALDatasetH		hDataset;
    GDALRasterBandH 	*band1,*band2,*band3;
    const char          		*pszFilename = NULL;
    void           			*pData1,*pData2,*pData3;
    int 				nXSize,nYSize,nBandas,iLine;
    CPLErr       			eErr1,eErr2,eErr3;
    GDALDataType 		eType;
    int 				tx,ty;

    pszFilename=argv[1];
    tx=atoi(argv[2]);
    ty=atoi(argv[3]);

    GDALAllRegister();
    hDataset = GDALOpen( pszFilename, GA_ReadOnly );

    nXSize=GDALGetRasterXSize( hDataset );
    nYSize=GDALGetRasterYSize( hDataset );
    nBandas=GDALGetRasterCount(hDataset);
    tx=nXSize;
    ty=nYSize;

    band1=GDALGetRasterBand( hDataset,1);
    band2=GDALGetRasterBand( hDataset,2);
    band3=GDALGetRasterBand( hDataset,3);

    eType = GDALGetRasterDataType(band1);
    pData1=CPLMalloc(tx * GDALGetDataTypeSize(eType) / 8);
    pData2=CPLMalloc(tx * GDALGetDataTypeSize(eType) / 8);
    pData3=CPLMalloc(tx * GDALGetDataTypeSize(eType) / 8);

    for( iLine = 0; iLine < ty; iLine++ ){
    	eErr1 = GDALRasterIO( band1, GF_Read, nXSize-tx, iLine, tx, 1,
                                        pData1, tx, 1, eType, 0, 0 );
        eErr2 = GDALRasterIO( band2, GF_Read, nXSize-tx, iLine, tx, 1,
                                        pData2, tx, 1, eType, 0, 0 );
        eErr3 = GDALRasterIO( band3, GF_Read, nXSize-tx, iLine, tx, 1,
                                        pData3, tx, 1, eType, 0, 0 );

        if( eErr1 != CE_None || eErr2 != CE_None || eErr3 != CE_None){
            printf("Error ...\n");
            return -1;
        }
    }

    CPLFree( pData1 );
    CPLFree( pData2 );
    CPLFree( pData3 );
    return 0;
}

------------------------
READING WINDOW

#include <stdio.h>
#include "gdal.h"
#include "cpl_conv.h"

int main( int argc, char **argv ){

    GDALDatasetH		hDataset;
    GDALRasterBandH 	*band1,*band2,*band3;
    const char         		*pszFilename = NULL;
    void           			*pData1,*pData2,*pData3;
    int 				nXSize,nYSize,nBandas,iLine;
    CPLErr       			eErr1,eErr2,eErr3;
    GDALDataType 		eType;
    int 				tx,ty;

    pszFilename=argv[1];
    tx=atoi(argv[2]);
    ty=atoi(argv[3]);

    GDALAllRegister();
    hDataset = GDALOpen( pszFilename, GA_ReadOnly );

    nXSize=GDALGetRasterXSize( hDataset );
    nYSize=GDALGetRasterYSize( hDataset );
    nBandas=GDALGetRasterCount(hDataset);
    tx=nXSize;
    ty=nYSize;

    band1=GDALGetRasterBand( hDataset,1);
    band2=GDALGetRasterBand( hDataset,2);
    band3=GDALGetRasterBand( hDataset,3);

    eType = GDALGetRasterDataType(band1);
    pData1=CPLMalloc(ty * tx * GDALGetDataTypeSize(eType) / 8);
    pData2=CPLMalloc(ty * tx * GDALGetDataTypeSize(eType) / 8);
    pData3=CPLMalloc(ty * tx * GDALGetDataTypeSize(eType) / 8);

    eErr1 = GDALRasterIO( band1, GF_Read, 0, 0, tx, ty,
                                       pData1, tx, ty, eType, 0, 0 );
    eErr2 = GDALRasterIO( band2, GF_Read, 0, 0, tx, ty,
                                        pData2, tx, ty, eType, 0, 0 );
    eErr3 = GDALRasterIO( band3, GF_Read, 0, 0, tx, ty,
                                        pData3, tx, ty, eType, 0, 0 );

    if( eErr1 != CE_None || eErr2 != CE_None || eErr3 != CE_None){
      	printf("Error ...\n");
        return -1;
    }

    CPLFree( pData1 );
    CPLFree( pData2 );
    CPLFree( pData3 );
    return 0;
}

Thanks for all.

-- 
? Nacho Brodin
? Equipo de desarrollo gvSIG
? http://www.gvsig.gva.es


From lorenzo.moretti at bologna.enea.it  Wed Feb  2 07:22:10 2005
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Error with GDAL+GRASS 6.0.0beta1 support
Message-ID: <a06200703be2674f571f6@[192.107.62.86]>

Hi

I want to build GDAL with GRASS support.
Gdal 1.2.5 with old GRASS 5.7 cvs was built without error.

Now with GRASS 6.0.0beta 1 GDAL 1.2.5 has this error:

ld: ./port/.libs/cplgetsymbol.o illegal reference to symbol: _dlerror 
defined in indirectly referenced dynamic library 
/usr/local/lib/libdl.1.dylib
/usr/bin/libtool: internal link edit command failed
make[1]: *** [libgdal.la] Error 1
make: *** [check-lib] Error 2


Without GRASS support GDAL 1.2.5 is built.

The problem now is for GDAL+GRASS 6 support.


Platform: Mac OS X - 10.2.8

Bye

-- 
________________________________________________________________________
||      Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|  ENEA prot/idr          Web: http://wwwamb.bologna.enea.it/    
||   |  via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (ris.)
~~~~~~  40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/764baa25/attachment.html
From brodin_ign at gva.es  Wed Feb  2 09:17:18 2005
From: brodin_ign at gva.es (Nacho)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Ecw and Overviews
Message-ID: <200502021517.18295.brodin_ign@gva.es>

Hi,
I need to read a full Ecw image with a smaller resolution than the total size. 
In other formats (MrSID) I select the overview that I want but with Ecw image 
I don't know how to do it. Somebody can help me?

Best regards,



From fwarmerdam at gmail.com  Wed Feb  2 09:22:43 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] man pages mixed
In-Reply-To: <20050202120001.GA9970@intevation.de>
References: <000801c5091a$fa71d150$03d21d3e@eustahiush>
	<20050202120001.GA9970@intevation.de>
Message-ID: <931f8ea9050202062238d0b0e@mail.gmail.com>

On Wed, 2 Feb 2005 13:00:01 +0100, Silke Reimer
<Silke.Reimer@intevation.de> wrote:
> Frank, could you please apply the following patch to the gdal-cvs?
> It should fix the problem (and additionally fix the case that no
> pct2rgb.py-manpage is created).

Silke, 

I have applied the patch in CVS.

Thanks!
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Wed Feb  2 09:26:40 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Ecw and Overviews
In-Reply-To: <200502021517.18295.brodin_ign@gva.es>
References: <200502021517.18295.brodin_ign@gva.es>
Message-ID: <931f8ea905020206267747dbd7@mail.gmail.com>

On Wed, 2 Feb 2005 15:17:18 +0100, Nacho <brodin_ign@gva.es> wrote:
> Hi,
> I need to read a full Ecw image with a smaller resolution than the total size.
> In other formats (MrSID) I select the overview that I want but with Ecw image
> I don't know how to do it. Somebody can help me?

Nacho, 

The ECW raster bands will return TRUE to a HasArbitraryOverviews() call.
This means you can do a RasterIO() call at any resolution and overviews
will effectively be used. 

Really MrSID should have been done that way too, but in practice many
apps work better with apparent descrete overviews.  At some point I may
engineer this into ECW as well. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Wed Feb  2 09:30:51 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] L1G Landsat data
In-Reply-To: <20050202130049.01ba507a@localhost>
References: <20050202130049.01ba507a@localhost>
Message-ID: <931f8ea905020206306cd95916@mail.gmail.com>

On Wed, 2 Feb 2005 13:00:49 +0100, Stephan Holl <sholl@gmx.net> wrote:
> Dear Developers,
> 
> I am trying to convert a Landsat ETM+ in LG1-Format to geotiff. gdalwarp
> can read the files with its subdatasets, but looses the georeferencing.
> 
> I tryed with gdal-1.2.0b as I heared it should work, but I could not
> manage to make it workuing.
> 
> Also with dal-1.2.6, no luck...

Stephan,

It would be helpful if you could provide a link to the dataset in question. 
I'm not familiar with L1G or LG1 format myself. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sholl at gmx.net  Wed Feb  2 09:49:31 2005
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] L1G Landsat data
In-Reply-To: <931f8ea905020206306cd95916@mail.gmail.com>
References: <20050202130049.01ba507a@localhost>
	<931f8ea905020206306cd95916@mail.gmail.com>
Message-ID: <20050202154931.588ff6f1@localhost>

Hello Frank, 

On Wed, 2 Feb 2005 09:30:51 -0500 Frank Warmerdam <fwarmerdam@gmail.com>
wrote:

> On Wed, 2 Feb 2005 13:00:49 +0100, Stephan Holl <sholl@gmx.net> wrote:
> > Dear Developers,
> > 
> > I am trying to convert a Landsat ETM+ in LG1-Format to geotiff.
> > gdalwarp can read the files with its subdatasets, but looses the
> > georeferencing.
> > 
> > I tryed with gdal-1.2.0b as I heared it should work, but I could not
> > manage to make it workuing.
> > 
> > Also with dal-1.2.6, no luck...
> 
> Stephan,
> 
> It would be helpful if you could provide a link to the dataset in
> question. I'm not familiar with L1G or LG1 format myself. 

Thanks for answering.

Sure, you can download the data here:
ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p141/\
r055/L71141055_05520010314.ETM-USGS.LPGS/
(should be in one line)

Thanks for looking into this.

Stephan


-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/3c1a729f/attachment.bin
From hobu at iastate.edu  Wed Feb  2 11:11:26 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] ogr.py enhancement proposal
Message-ID: <6.1.2.0.2.20050202091852.01c46c10@hobu.mail.iastate.edu>

Folks,

I have been making some enhancements to ogr.py to make it more pythonic and 
more convenient to program with, especially in the interactive mode which 
Python excels so well with.  Below is a short list of the enhancements I've 
already made, and a proposal for further enhancements that I would like to 
implement.  These changes are completely backward compatible (all the way 
back to 2.0), and you do not have to use them to program with ogr.py.  I'm 
interested in you feedback as to whether or not this work would be 
beneficial, keeping in line with the direction and history of ogr.py, and 
if you think they are a good idea.

The major enhancement that I made was to allow slicing and index access to 
Layer and DataSource.  Here is an example of what I mean:

#--------------------------------------------------------------
# Get the first layer on the DataSource
ds = ogr.Open(my_data_location)

# current approach
lyr = ds.GetLayer(0)

# enhanced approach
lyr = ds[0]
#--------------------------------------------------------------

The advantage of this approach is that we get slicing and looping for free 
from Python.  For example:

#--------------------------------------------------------------
# Put the first four layers into a list
layers = ds[0:4]

# Put all the layers in a list except the first one
layers = ds[1:]

# Print the names of all of the layers on the DataSource
for i in ds:
     print i.GetName()
#--------------------------------------------------------------

The same enhancement was made to the Layer object as well.  It is important 
to note, however, that you are not *guaranteed* sequential access to the 
Features in a layer.  This approach will work for the majority of cases, 
but if you have a funky DataSource/Layer, you might not always get what you 
expect.

#--------------------------------------------------------------
# Get the first 10 features of the first layer

# current approach
lyr = ds.GetLayer(0)
features = []
for i in range(lyr.GetFeatureCount()):
     if i < 11:
         features.append(lyr.GetFeature(i))

# enhanced approach
lyr = ds[0]
features = lyr[0:10]

# again, we get looping and slicing for free
for i in lyr[0:10]:
     print i.GetField(0)
#--------------------------------------------------------------

Feature Enhancement Proposal

I would like to extend Feature to support run-time attribute 
lookup.  Thanks to Frank's enhancement to allow features to clean up after 
themselves, it would now be straightforward to allow you to access field 
information as a direct attribute of the feature, rather than being forced 
to look up the field's index and then request the information.  For example:

#--------------------------------------------------------------
# Add two attribute columns together

# Table layout
#------Column1-------------Column2------------
#           3                       4
#           6                       9
#           10                     22

# current approach
lyr = ds.GetLayer(0)
features = []
values = []
for i in range(lyr.GetFeatureCount()):
     features.append(lyr.GetFeature(i))

for feat in features:
     val1 = feat.GetField(feat.GetFieldIndex('Column1'))
     val2 = feat.GetField(feat.GetFieldIndex('Column2'))
     values.append(val1+val2)

# enhanced approach
lyr = ds[0]
features = lyr[:]
values =[]
for feat in features:
     values.append(feat.Column1+feat.Column2)
#--------------------------------------------------------------

There are definitely some gotchas with this approach.  First, if the column 
name has funky characters in it, the convenience isn't that great (you 
might have to escape special python characters like quote and double quote, 
for example).  Second, does accessing things this way muddy up what a 
"Feature" is and how things are accessed?  When I request a Field, like 
feat.Column2, am I getting back the *value* of the Feature in that Field, 
or the definition of the Column2 field?

On the other hand, the convenience is quite great.  For example, in the 
interactive prompt, you would be able to go dir(feat) and see all of the 
attribute columns of the layer.  In my opinion, your code could be a bit 
more concise and clear, and things like printf-style string substitution 
would be much easier to read.

Again, I'm looking for your (and Frank's!) opinion on the proposed 
enhancement.  You would not be required to use these enhancements in your 
old or new code, but they would be there for you if you need them.  Would 
something like this make your life with ogr.py easier?  Does something like 
this break from the unified (C/C++/Python) API in too great a way?

Howard


From fwarmerdam at gmail.com  Wed Feb  2 10:27:50 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] L1G Landsat data
In-Reply-To: <20050202154931.588ff6f1@localhost>
References: <20050202130049.01ba507a@localhost>
	<931f8ea905020206306cd95916@mail.gmail.com>
	<20050202154931.588ff6f1@localhost>
Message-ID: <931f8ea9050202072776b9f788@mail.gmail.com>

On Wed, 2 Feb 2005 15:49:31 +0100, Stephan Holl <sholl@gmx.net> wrote:
> Thanks for answering.
> 
> Sure, you can download the data here:
> ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p141/\
> r055/L71141055_05520010314.ETM-USGS.LPGS/
> (should be in one line)
> 
> Thanks for looking into this.
 
Stephan,

Looking in the _HDF.L1G file there does not seem to be any
georeferencing available.  I assume that is the file you are selecting
to get the data?  

But the _MTL.L1G file does have various supporting metadata,
including the product corners here:

    PRODUCT_UL_CORNER_LAT = 8.1775571   
    PRODUCT_UL_CORNER_LON = 79.5875317  
    PRODUCT_UR_CORNER_LAT = 8.1793694   
    PRODUCT_UR_CORNER_LON = 81.7280759  
    PRODUCT_LL_CORNER_LAT = 6.2812164   
    PRODUCT_LL_CORNER_LON = 79.5934122  
    PRODUCT_LR_CORNER_LAT = 6.2826047   
    PRODUCT_LR_CORNER_LON = 81.7250438  
    PRODUCT_UL_CORNER_MAPX = 344400.000  
    PRODUCT_UL_CORNER_MAPY = 904200.000  
    PRODUCT_UR_CORNER_MAPX = 580200.000  
    PRODUCT_UR_CORNER_MAPY = 904200.000  
    PRODUCT_LL_CORNER_MAPX = 344400.000  
    PRODUCT_LL_CORNER_MAPY = 694500.000  
    PRODUCT_LR_CORNER_MAPX = 580200.000  
    PRODUCT_LR_CORNER_MAPY = 694500.000  
...
  GROUP = PROJECTION_PARAMETERS 
    REFERENCE_DATUM = "WGS84" 
    REFERENCE_ELLIPSOID = "WGS84" 
    GRID_CELL_SIZE_PAN = 15.000000
    GRID_CELL_SIZE_THM = 60.000000
    GRID_CELL_SIZE_REF = 30.000000
    ORIENTATION = "NUP"
    RESAMPLING_OPTION = "CC"
    MAP_PROJECTION = "UTM"
  END_GROUP = PROJECTION_PARAMETERS 
  GROUP = UTM_PARAMETERS 
    ZONE_NUMBER = 44
  END_GROUP = UTM_PARAMETERS 

So if you use the current development version of GDAL you could assign
a coordinate system and bounds something like this:

gdal_translate 'HDF4_SDS:UNKNOWN:"L71141055_05520010314_HDF.L1G":0'
b10.tif -a_srs '+proj=utm +datum=WGS84 +zone=44' -a_ullr 344400 904200
580200 694500

With older versions you would need to associate the bounds bounds after
the fact with a tiff world file, since the -a_ullr flag is very new.
If you need to handle quite a few datasets, you could write a script
to harvest required metadata from the _MTL file.  I'm sorry there is no 
full solution already implemented. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Silke.Reimer at intevation.de  Wed Feb  2 11:35:02 2005
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] ogr.py enhancement proposal
In-Reply-To: <6.1.2.0.2.20050202091852.01c46c10@hobu.mail.iastate.edu>
References: <6.1.2.0.2.20050202091852.01c46c10@hobu.mail.iastate.edu>
Message-ID: <20050202163502.GJ9970@intevation.de>


Hi Howard,

On Wed, Feb 02, 2005 at 10:11:26AM -0600, Howard Butler wrote:
> 
> Again, I'm looking for your (and Frank's!) opinion on the proposed 
> enhancement.  You would not be required to use these enhancements in your 
> old or new code, but they would be there for you if you need them.  Would 
> something like this make your life with ogr.py easier?  

Yes, it would make it easier for me! Thanks for these enhancements.
Especially the way how feature attributes are adressed is very
convinient so I would vote to add this the ogr.py in CVS.

> Does something like 
> this break from the unified (C/C++/Python) API in too great a way?

The way to programm is different from the way to programm in C/C++
anyway so in my opinion it is OK to adapte the API to special
programming languages if this makes programming as well as reading
the code easier.

Just my opinion.

Greetings,

	Silke

-- 
Intevation GmbH

Georgstrasse 4                    49074 Osnabr?ck, Germany
http://intevation.de              http://intevation.de/~silke
FreeGIS.org                       http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/51e93661/attachment.bin
From matt.wilkie at gov.yk.ca  Wed Feb  2 11:39:16 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] read prj & metadata from .html file?
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC80FCB3A@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC80FCB3A@ptolemy.topozone.com>
Message-ID: <42010234.9070500@gov.yk.ca>

Hi Ed,

> From the GDAL output you sent me separately,

Oops, that was supposed to be general to the list. Is there a particular
reason the default ReplyTo is the individual not the list?

> Updating your EPSG projection definitions to include the values
> reported by the GeoTIFFs you're using is probably the quickest,
> simplest, and most reliable route to a solution.

Oh, I would definately prefer that to my hack-attack. :) I'm glad I
decided to post the gdalinfo output. I almost just let it slide.
How do I update the EPSG projection defintions? I'm using FWTools 0.9.5 
on WindowsXP.

thanks,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------


From fwarmerdam at gmail.com  Wed Feb  2 12:04:45 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] ogr.py enhancement proposal
In-Reply-To: <6.1.2.0.2.20050202091852.01c46c10@hobu.mail.iastate.edu>
References: <6.1.2.0.2.20050202091852.01c46c10@hobu.mail.iastate.edu>
Message-ID: <931f8ea90502020904660b6f03@mail.gmail.com>

On Wed, 02 Feb 2005 10:11:26 -0600, Howard Butler <hobu@iastate.edu> wrote:
> Folks,
>
> The major enhancement that I made was to allow slicing and index access to
> Layer and DataSource.  Here is an example of what I mean:

Howard, 

The slicing/indexing on the ogr.Datasource to get a list 
of ogr.Layers sounds fine to me.   Feel free to commit. 

> The same enhancement was made to the Layer object as well.  It is important
> to note, however, that you are not *guaranteed* sequential access to the
> Features in a layer.  This approach will work for the majority of cases,
> but if you have a funky DataSource/Layer, you might not always get what you
> expect.

As we discussed in IRC, I think you should hold off on this.
Slicing by FID is error prone for discontiguous layers.  This
includes odd formats (like DGN) with discontigious fids, as well
as normal formats that have discontigous fids due to having 
a spatial or attribute filter in place. 

You mentioned that you could implement iterator support 
using GetNextFeature() if you used a feature of a newer 
Python.  I think this would be OK though we would need to 
ensure that this feature is disabled for older Pythons. 

As mentioned before I would like to keep ogr.py working
with pythons back as far as 2.0 if possible, though it would
be acceptable to have a few advanced features only available
with newer pythons. 

I would add that I am currently working on a SetNextByIndex()
method on the OGRLayer.   This method can be used to 
essentially move around in a resultset by index rather than
fid.  So calling SetNextByIndex(10) on a layer would mean
that the next GetNextFeature() on that layer would return the
10th feature in the current resultset (taking into account any
filters in place).  For some datasources this method will be
implemented efficiently though the fallback implementation is
just to do a ResetReading() and then GetNextFeature() for
the indicated number of times.  So performance will be variable.

The only way to be sure of respectible performance accross all
formats and configurations is to jus make one pass through data
using GetNextFeature(). 
 
> # again, we get looping and slicing for free
> for i in lyr[0:10]:
>      print i.GetField(0)

I would certainly love to be able to iterate invisibly on a 
layer to get features as long as it is internally using GetNextFeature()
for the stepping, not fetching by fid. 

eg. 

for feat in lyr:
    print feat.GetFID()

> #--------------------------------------------------------------
> 
> Feature Enhancement Proposal
> 
> I would like to extend Feature to support run-time attribute
> lookup.  Thanks to Frank's enhancement to allow features to clean up after
> themselves, it would now be straightforward to allow you to access field
> information as a direct attribute of the feature, rather than being forced
> to look up the field's index and then request the information.  For example:

As we discussed in IRC I am fine with this change as long as you take
care to ensure it's implementation does not add noticable overhead to 
normal use of a feature. 

> Second, does accessing things this way muddy up what a
> "Feature" is and how things are accessed?  When I request a Field, like
> feat.Column2, am I getting back the *value* of the Feature in that Field,
> or the definition of the Column2 field?

The attribute values of a feature are it's properties.  If you want the 
field definitions you should be examining the ogr.FeatureDefn returned
by ogr.Layer.GetLayerDefn().  It would be nice to have some sort of
convenient access to these. 

Note that all these Python specific syntaxes will require some degree
of documentation since they aren't completey obvious by examining
the C++ API.  But I think they are a great step forward. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ed at topozone.com  Wed Feb  2 12:08:50 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] read prj & metadata from .html file?
Message-ID: <4BF377919225F449BB097CB76FFE9BC80FCB43@ptolemy.topozone.com>

Matt -

First, your reply went to me because I replied only to you.  My
questions were about the sources of your DRGs for my own curiosity, as I
thought I knew most of the places people got them and what they looked
like - I didn't copy the list because it wasn't relevant to your
question.

Find your EPSG file - that is, the file named "EPSG", in your PROJ
distribution/installation, possibly in \proj\nad\epsg.  It's a text file
- open it in an editor like WordPad (it probably has Unix-style line
ends).

Locate the string "<26703>" (no quotes) - it's probably there, but if
you can't find it, search for "<26704>", "<26705>", etc. until you find
one.  These are the NAD27 UTM North projection codes.  The last two
digits are the UTM Zone number.

When you find the closest match, copy the definition line and paste a
new copy, changing the code to "26702", and changing the string
"+zone=3" (or whatever) to "+zone=2".

Save the file and you're done.  The changes will be obvious once you
locate the file and a NAD27 UTM zone definition.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Matt Wilkie
Sent: Wednesday, February 02, 2005 11:39 AM
To: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] read prj & metadata from .html file?

Hi Ed,

> From the GDAL output you sent me separately,

Oops, that was supposed to be general to the list. Is there a particular
reason the default ReplyTo is the individual not the list?

> Updating your EPSG projection definitions to include the values 
> reported by the GeoTIFFs you're using is probably the quickest, 
> simplest, and most reliable route to a solution.

Oh, I would definately prefer that to my hack-attack. :) I'm glad I
decided to post the gdalinfo output. I almost just let it slide.
How do I update the EPSG projection defintions? I'm using FWTools 0.9.5
on WindowsXP.

thanks,

--
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
--------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From r-farmer at jtboyd.com  Wed Feb  2 13:36:20 2005
From: r-farmer at jtboyd.com (Robert J Farmer)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Driver Implementation API - IReadBlock or IRasterIO
Message-ID: <ctr6i7$8po$1@sea.gmane.org>

Hello!

I am trying to develop a driver implementation for a propritary raster 
format.  Unfortunately, I am struggling with a few key concepts with the 
GDAL API.

The raster format contains a header followed by two bands of data which are 
pixel-interleaved (i.e.. B1P1, B2P1, B1P2, etc)  Band 1 contains float 
values, band 2 contains unsigned short values -- so both are 4 bytes long.

I believe that I should implement the IRasterIO interface (actually override 
it with BlockBasedRasterIO) to efficiently read the raster.  But what about 
the IReadBlock interface, do I need this?

I am unsure, when to implement IReadBlock and/or IRasterIO.  Any guidance 
would be greatly appreciated.

Cheers

Rob 




From fwarmerdam at gmail.com  Wed Feb  2 14:28:49 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Driver Implementation API - IReadBlock or IRasterIO
In-Reply-To: <ctr6i7$8po$1@sea.gmane.org>
References: <ctr6i7$8po$1@sea.gmane.org>
Message-ID: <931f8ea905020211281f9b6589@mail.gmail.com>

On Wed, 2 Feb 2005 13:36:20 -0500, Robert J Farmer <r-farmer@jtboyd.com> wrote:
> Hello!
> 
> I am trying to develop a driver implementation for a propritary raster
> format.  Unfortunately, I am struggling with a few key concepts with the
> GDAL API.
> 
> The raster format contains a header followed by two bands of data which are
> pixel-interleaved (i.e.. B1P1, B2P1, B1P2, etc)  Band 1 contains float
> values, band 2 contains unsigned short values -- so both are 4 bytes long.

Rob, 

I'm not sure why you say both are 4 bytes long.  A float is 4 bytes, but an
unsigned short is 2 bytes.  The overall pixel group is 6 bytes. 

> I believe that I should implement the IRasterIO interface (actually override
> it with BlockBasedRasterIO) to efficiently read the raster.  But what about
> the IReadBlock interface, do I need this?
> 
> I am unsure, when to implement IReadBlock and/or IRasterIO.  Any guidance
> would be greatly appreciated.

First, I would encourage you to implement this as a "raw format". 
That is derive
your dataset class from RawDataset and either use RawRasterBand directly
or derive your band class from it if you need to add special
capabilities.  Then
all you would have to do for the IO is create the raw raster bands with the
correct layout information.  

However, setting that aside the only method for image reading you *need*
to implement is IReadBlock() on your raster band class.  All other entry points
are essentially an effort to optimize special cases, and to some reasonable
extent this has already been done for the Raw classes. 

In answer to some of your specific questions, you *always* need to 
implement the GDALRasterBand::IReadBlock() method.  I believe it is
the only pure virtual method in the core gdal format classes. 

You should implement IRasterIO() if you have special ways of implementing
subsetting or overviews efficiently.  But for the obvious cases the Raw 
raster code already handles this for you.  I would add that it is *very*
easy to make mistakes implementing IRasterIO() since it does a great deal
of processing.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sbclaph at ftgrp.com  Wed Feb  2 16:22:29 2005
From: sbclaph at ftgrp.com (Sarah Clapham)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] gdal_merge fails to merge more than 4 input files
Message-ID: <000101c5096d$4cf0ec70$0401000a@glhay>

Help!

I am trying to apply the now familiar procedure of
reproject/merge/clip/compress to client image files in preparation for web
serving and am having trouble with gdal_merge failing to merge more than 4
input files.

Here are the specs...
-win2k machine w/ over 20 gigs free space, virtual memory set to 2-4gigs,
and GDAL_CACHEMAX = 4gigs
-FWTools 0.9.4 (Windows) (have uninstalled all past gdal/python versions - I
think)
-input files are 24bit color 5000x5000 tiff files (uncompressed from MrSID)
 input image info:
Driver: GTiff/GeoTIFF
Size is 5000, 5000
Coordinate System is `'
Origin = (2210000.000000,640000.000000)
Pixel Size = (2.00000000,-2.00000000)
Corner Coordinates:
Upper Left  ( 2210000.000,  640000.000)
Lower Left  ( 2210000.000,  630000.000)
Upper Right ( 2220000.000,  640000.000)
Lower Right ( 2220000.000,  630000.000)
Center      ( 2215000.000,  635000.000)
Band 1 Block=5000x1 Type=Byte, ColorInterp=Red
Band 2 Block=5000x1 Type=Byte, ColorInterp=Green
Band 3 Block=5000x1 Type=Byte, ColorInterp=Blue

When I try to merge a set of 7 intersecting tiles - gdal_merge happily
merges the first 4 then quits - eg:
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
gdal_merge -v -n 0 -o ..\tif_org_merge\s-p05-13.tif s-p05-07.tif
s-p05-08.tif s-p05-09.tif s-p05-12.tif s-p05-13.tif s-p05-14.tif
s-p05-18.tif

Filename: s-p05-07.tif
File Size: 5000x5000x3
Pixel Size: 2.000000 x -2.000000
UL:(2210000.000000,640000.000000)   LR:(2220000.000000,630000.000000)
Copy 0,0,5000,5000 to 0,0,5000,5000.
Copy 0,0,5000,5000 to 0,0,5000,5000.
Copy 0,0,5000,5000 to 0,0,5000,5000.

Filename: s-p05-08.tif
File Size: 5000x5000x3
Pixel Size: 2.000000 x -2.000000
UL:(2220000.000000,640000.000000)   LR:(2230000.000000,630000.000000)
Copy 0,0,5000,5000 to 5000,0,5000,5000.
Copy 0,0,5000,5000 to 5000,0,5000,5000.
Copy 0,0,5000,5000 to 5000,0,5000,5000.

Filename: s-p05-09.tif
File Size: 5000x5000x3
Pixel Size: 2.000000 x -2.000000
UL:(2230000.000000,640000.000000)   LR:(2240000.000000,630000.000000)
Copy 0,0,5000,5000 to 10000,0,5000,5000.
Copy 0,0,5000,5000 to 10000,0,5000,5000.
Copy 0,0,5000,5000 to 10000,0,5000,5000.

Filename: s-p05-12.tif
File Size: 5000x5000x3
Pixel Size: 2.000000 x -2.000000
UL:(2210000.000000,630000.000000)   LR:(2220000.000000,620000.000000)
Copy 0,0,5000,5000 to 0,5000,5000,5000.
Copy 0,0,5000,5000 to 0,5000,5000,5000.
Copy 0,0,5000,5000 to 0,5000,5000,5000.
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

Output image info:
Driver: GTiff/GeoTIFF
Size is 10000, 5000
Coordinate System is `'
Origin = (2210000.000000,640000.000000)
Pixel Size = (2.00000000,-2.00000000)
Corner Coordinates:
Upper Left  ( 2210000.000,  640000.000)
Lower Left  ( 2210000.000,  630000.000)
Upper Right ( 2230000.000,  640000.000)
Lower Right ( 2230000.000,  630000.000)
Center      ( 2220000.000,  635000.000)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue



My alternate strategy was to skip the merge altogether and let gdalwarp take
care of merging edge pieces during the reproject step but this fails to
clean up all edge nodata areas (leaves a partial single pixel border on each
side). I don't have the option of using the Alpha channel since this is not
going to MapServer.  I have tried various settings of -te and -tr without
much luck.

I realize that this is really two questions - I would be happy to know why I
am not getting expected results from gdal_merge, then strive for a better
understanding on how to do this efficiently.

Many thanks!

Sarah


---------------------------
Sarah Clapham

Home Office:
  Forest Technology Group
  7 Max Meadows Road
  P.O. Box 127
  Maxwelton, WV  24957

  (304) 497-3189 (office)
  (304) 646-1941 (mobile)
  [mailto:sbclaph@ftgrp.com] (email)

Main Office:
  Forest Technology Group
  3950 Faber Place Drive
  North Charleston, SC USA   29405

  (843) 745-7400 (phone)
  (843) 308-6236 (fax)
  www.ftgrp.com (web)






---------------------------
Sarah Clapham

Home Office:
  Forest Technology Group
  7 Max Meadows Road
  P.O. Box 127
  Maxwelton, WV  24957

  (304) 497-3189 (office)
  (304) 646-1941 (mobile)
  [mailto:sbclaph@ftgrp.com] (email)

Main Office:
  Forest Technology Group
  3950 Faber Place Drive
  North Charleston, SC USA   29405

  (843) 745-7400 (phone)
  (843) 308-6236 (fax)
  www.ftgrp.com (web)



From fwarmerdam at gmail.com  Wed Feb  2 16:44:25 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] gdal_merge fails to merge more than 4 input files
In-Reply-To: <000101c5096d$4cf0ec70$0401000a@glhay>
References: <000101c5096d$4cf0ec70$0401000a@glhay>
Message-ID: <931f8ea905020213446db22002@mail.gmail.com>

On Wed, 2 Feb 2005 16:22:29 -0500, Sarah Clapham <sbclaph@ftgrp.com> wrote:
> Help!
> 
> I am trying to apply the now familiar procedure of
> reproject/merge/clip/compress to client image files in preparation for web
> serving and am having trouble with gdal_merge failing to merge more than 4
> input files.

Sarah,

I started out trying to think of all sorts of esoteric things that might be
going wrong, and then it hit me.  In FWTools gdal_merge is a bat
file and because I am a lame DOS bat-file person I use a very
cludgy method to pass arguments on to the real gdal_merge.py 
pythong script.   The bat file looks like this:

@python "%FWTOOLS_DIR%\pymod\gdal_merge.py" %1 %2 %3 %4 %5 %6 %7 %8 %9

So basically, it only passes the first 9 arguments on, and the rest are 
discarded.  After your switches I guess there are only four more
arguments passed on. 

I would encourage you to try invoking python directly with your
arguments.  So something like:

python %FWTOOLS_DIR%\pymod\gdal_merge.py  -v -n 0 
  -o ..\tif_org_merge\s-p05-13.tif s-p05-07.tif 
  s-p05-08.tif s-p05-09.tif s-p05-12.tif s-p05-13.tif s-p05-14.tif
  s-p05-18.tif

I would appreciate it if you could submit a bug on the FWTools
bugzilla about this issue.  All my python script cover scripts have
the same problem, but generally 9 args is plenty.  However, for
gdal_merge it is not at all surprising that it is not enough. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Daniel.A.Martin at erac.com  Wed Feb  2 17:08:45 2005
From: Daniel.A.Martin at erac.com (Martin, Daniel A)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Problems with ogr2ogr and TIGER line data - California
	is a bit off
Message-ID: <9CBF9C475147E149AE38C5EE99110FC0239354@ETC-EXBE-07.corp.erac.com>

I've been using ogr2ogr for some time (Windows binary from OpenEV_FW) to
convert the entire TIGER line data from the census into workable MapInfo
TAB street layers.  Something we recently noticed is that our resulting
streets in California are off by a about 1/10th of a mile.  Nothing
terrible, but enough to make them unusable for our purposes.  I went to
check my old files to see if the problem is new, but I found it in the
files I was creating about two years ago.  I've done very little work in
California, so I've never noticed it before.
 
I started to think this was a projection issue.  So, I started checking
other states throughout the country.  I've not checked them all, but all
the other states I have checked are absolutely dead on.  This includes
states from all corners (Washington, New York, Florida) and in the
middle of the country (Missouri, Illinois).  But California appears to
be the only one that is incorrect.  This also appears to affect all of
California, and isn't isolated to one small part.
 
As a control, I've used several of our internal data layers that I'm
quite confident in, and the Microsoft Terraserver WMS layer.
Terraserver makes it really easy to see when streets are off.
 
Another oddity is that this effect is lessened if the layer is loaded
into MapServer (versus MapInfo), I'm guessing since MapServer uses OGR.
The data is still out of place in MapServer, but not quite as much.
We've tested the data in multiple versions of MapInfo just to be sure
that wasn't part of the problem.
 
Any ideas on why this would happen?  I'm using the basic command line
options for ogr2ogr.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/a3d3bc63/attachment.html
From ed at topozone.com  Wed Feb  2 17:17:52 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Problems with ogr2ogr and TIGER line data -
	Californiais a bit off
Message-ID: <4BF377919225F449BB097CB76FFE9BC80FCB4E@ptolemy.topozone.com>

Where exactly did you get this California data set, and what
projection/datum documentation came with it?  Various distributors of
TIGER data, especially state governments, have massaged the data to
various state plane projections.  Any information you have about the
source would be helpful; in addition, how is the input projection being
described to ogr2ogr?

 

-          Ed

 

Ed McNierney

TopoZone.com

 

________________________________

From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Martin, Daniel A
Sent: Wednesday, February 02, 2005 5:09 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Problems with ogr2ogr and TIGER line data -
Californiais a bit off

 

I've been using ogr2ogr for some time (Windows binary from OpenEV_FW) to
convert the entire TIGER line data from the census into workable MapInfo
TAB street layers.  Something we recently noticed is that our resulting
streets in California are off by a about 1/10th of a mile.  Nothing
terrible, but enough to make them unusable for our purposes.  I went to
check my old files to see if the problem is new, but I found it in the
files I was creating about two years ago.  I've done very little work in
California, so I've never noticed it before.

 

I started to think this was a projection issue.  So, I started checking
other states throughout the country.  I've not checked them all, but all
the other states I have checked are absolutely dead on.  This includes
states from all corners (Washington, New York, Florida) and in the
middle of the country (Missouri, Illinois).  But California appears to
be the only one that is incorrect.  This also appears to affect all of
California, and isn't isolated to one small part.

 

As a control, I've used several of our internal data layers that I'm
quite confident in, and the Microsoft Terraserver WMS layer.
Terraserver makes it really easy to see when streets are off.

 

Another oddity is that this effect is lessened if the layer is loaded
into MapServer (versus MapInfo), I'm guessing since MapServer uses OGR.
The data is still out of place in MapServer, but not quite as much.
We've tested the data in multiple versions of MapInfo just to be sure
that wasn't part of the problem.

 

Any ideas on why this would happen?  I'm using the basic command line
options for ogr2ogr.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/7438cec4/attachment.html
From ThePepsicolakid at aol.com  Wed Feb  2 18:49:06 2005
From: ThePepsicolakid at aol.com (ThePepsicolakid@aol.com)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] unsubscribe
Message-ID: <79.3e48a065.2f32c0f2@aol.com>

     
 
 
 
In a message dated 2/2/2005 12:07:25 P.M. Eastern Standard Time,  
gdal-dev-request@xserve.flids.com writes:

http://xserve.flids.com/mailman/listinfo/gdal-dev





unsubscribe


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/f319a37a/attachment.html
From ThePepsicolakid at aol.com  Wed Feb  2 18:51:11 2005
From: ThePepsicolakid at aol.com (ThePepsicolakid@aol.com)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] remove
Message-ID: <142.3e8457de.2f32c16f@aol.com>

     
 





-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050202/92bf6625/attachment.html
From fwarmerdam at gmail.com  Wed Feb  2 22:02:56 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Problems with ogr2ogr and TIGER line data - California
	is a bit off
In-Reply-To: <9CBF9C475147E149AE38C5EE99110FC0239354@ETC-EXBE-07.corp.erac.com>
References: <9CBF9C475147E149AE38C5EE99110FC0239354@ETC-EXBE-07.corp.erac.com>
Message-ID: <931f8ea9050202190248d6b356@mail.gmail.com>

On Wed, 2 Feb 2005 16:08:45 -0600, Martin, Daniel A
<Daniel.A.Martin@erac.com> wrote:
> Any ideas on why this would happen?  I'm using the basic command line
> options for ogr2ogr. 

Martin,

As Ed mentions, you should check into whether there is anything
odd about the lineage of your California TIGER data.  Are you working
from raw TIGER data from the Census bureau?  All from the same year?

The TIGER data is all distributed in NAD83 decimal degrees.  There isn't
much that can go wrong with from a projection point of view.  

What coordinate system are you writing out your tab files in?  Also just
the original NAD83 or are you transforming to state plane?  There might
be ways the state plane definitions could be messed up. 

Also, TAB format scales locations to integers based on a min/max range
that is supposed to be computed based on the coordinate system.  The
default for geographic coordinates systems should be a -180 to 180 
plane and should be fine.  But if you accidentally got a projected bounding
box the resolution would likely be really crappy.  This shouldn't be
a systematic offset though, just sort of random perturbation so I doubt
this is the issue. 

My suggestion is to use ogrinfo on a known feature from TIGER and
in your TAB file to see if the coordinate match.  If they do, then it
is likely the problem is the original tiger data.  If they don't match it
is something about the translation, perhaps in the TAB code.  

If you are reprojecting the problem might be the coordinate system. 

You might want to try converting one to mid/mif and see if you get
the same issues. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sholl at gmx.net  Thu Feb  3 02:42:04 2005
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] L1G Landsat data
In-Reply-To: <931f8ea9050202072776b9f788@mail.gmail.com>
References: <20050202130049.01ba507a@localhost>
	<931f8ea905020206306cd95916@mail.gmail.com>
	<20050202154931.588ff6f1@localhost>
	<931f8ea9050202072776b9f788@mail.gmail.com>
Message-ID: <20050203084204.0d08eea7@localhost>

Hello Frank, 

On Wed, 2 Feb 2005 10:27:50 -0500 Frank Warmerdam <fwarmerdam@gmail.com>
wrote:

> On Wed, 2 Feb 2005 15:49:31 +0100, Stephan Holl <sholl@gmx.net> wrote:
> > Thanks for answering.
> > 
> > Sure, you can download the data here:
> > ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p141/\
> > r055/L71141055_05520010314.ETM-USGS.LPGS/
> > (should be in one line)
> > 
> > Thanks for looking into this.
>  
> Stephan,
> 
> Looking in the _HDF.L1G file there does not seem to be any
> georeferencing available.  I assume that is the file you are selecting
> to get the data?  

Exactly.

> 
> But the _MTL.L1G file does have various supporting metadata,
> including the product corners here:
> 
>     PRODUCT_UL_CORNER_LAT = 8.1775571   
>     PRODUCT_UL_CORNER_LON = 79.5875317  
>     PRODUCT_UR_CORNER_LAT = 8.1793694   
>     PRODUCT_UR_CORNER_LON = 81.7280759  
>     PRODUCT_LL_CORNER_LAT = 6.2812164   
>     PRODUCT_LL_CORNER_LON = 79.5934122  
>     PRODUCT_LR_CORNER_LAT = 6.2826047   
>     PRODUCT_LR_CORNER_LON = 81.7250438  
>     PRODUCT_UL_CORNER_MAPX = 344400.000  
>     PRODUCT_UL_CORNER_MAPY = 904200.000  
>     PRODUCT_UR_CORNER_MAPX = 580200.000  
>     PRODUCT_UR_CORNER_MAPY = 904200.000  
>     PRODUCT_LL_CORNER_MAPX = 344400.000  
>     PRODUCT_LL_CORNER_MAPY = 694500.000  
>     PRODUCT_LR_CORNER_MAPX = 580200.000  
>     PRODUCT_LR_CORNER_MAPY = 694500.000  
> ...
>   GROUP = PROJECTION_PARAMETERS 
>     REFERENCE_DATUM = "WGS84" 
>     REFERENCE_ELLIPSOID = "WGS84" 
>     GRID_CELL_SIZE_PAN = 15.000000
>     GRID_CELL_SIZE_THM = 60.000000
>     GRID_CELL_SIZE_REF = 30.000000
>     ORIENTATION = "NUP"
>     RESAMPLING_OPTION = "CC"
>     MAP_PROJECTION = "UTM"
>   END_GROUP = PROJECTION_PARAMETERS 
>   GROUP = UTM_PARAMETERS 
>     ZONE_NUMBER = 44
>   END_GROUP = UTM_PARAMETERS 

We found that too, but could not manage to use the coordinates.

Thanks for the new switch.

> 
> So if you use the current development version of GDAL you could assign
> a coordinate system and bounds something like this:
> 
> gdal_translate 'HDF4_SDS:UNKNOWN:"L71141055_05520010314_HDF.L1G":0'
> b10.tif -a_srs '+proj=utm +datum=WGS84 +zone=44' -a_ullr 344400 904200
> 580200 694500
> 
> With older versions you would need to associate the bounds bounds
> after the fact with a tiff world file, since the -a_ullr flag is very
> new. If you need to handle quite a few datasets, you could write a
> script to harvest required metadata from the _MTL file.  I'm sorry
> there is no full solution already implemented. 

btw, are there any thought about implement a full support for this
format?

Stephan


-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050203/ca6b93c8/attachment.bin
From dem at acri-st.fr  Thu Feb  3 03:27:50 2005
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] gdal_merge fails to merge more than 4 input
  files
In-Reply-To: <931f8ea905020213446db22002@mail.gmail.com>
References: <000101c5096d$4cf0ec70$0401000a@glhay>
	<931f8ea905020213446db22002@mail.gmail.com>
Message-ID: <6.1.1.1.0.20050203092356.048fd460@pop3>

Frank,

the next DOS code passes all command line arguments to the python script :

rem Parse arguments
set args=
:loopargs
if !%1==! goto launch
set args=%args% %1
shift
goto loopargs
:launch

python "%FWTOOLS_DIR%\pymod\gdal_merge.py" %args%


Regards,

Julien

At 22:44 02/02/2005, Frank Warmerdam wrote:
>On Wed, 2 Feb 2005 16:22:29 -0500, Sarah Clapham <sbclaph@ftgrp.com> wrote:
> > Help!
> >
> > I am trying to apply the now familiar procedure of
> > reproject/merge/clip/compress to client image files in preparation for web
> > serving and am having trouble with gdal_merge failing to merge more than 4
> > input files.
>
>Sarah,
>
>I started out trying to think of all sorts of esoteric things that might be
>going wrong, and then it hit me.  In FWTools gdal_merge is a bat
>file and because I am a lame DOS bat-file person I use a very
>cludgy method to pass arguments on to the real gdal_merge.py
>pythong script.   The bat file looks like this:
>
>@python "%FWTOOLS_DIR%\pymod\gdal_merge.py" %1 %2 %3 %4 %5 %6 %7 %8 %9
>
>So basically, it only passes the first 9 arguments on, and the rest are
>discarded.  After your switches I guess there are only four more
>arguments passed on.
>
>I would encourage you to try invoking python directly with your
>arguments.  So something like:
>
>python %FWTOOLS_DIR%\pymod\gdal_merge.py  -v -n 0
>   -o ..\tif_org_merge\s-p05-13.tif s-p05-07.tif
>   s-p05-08.tif s-p05-09.tif s-p05-12.tif s-p05-13.tif s-p05-14.tif
>   s-p05-18.tif
>
>I would appreciate it if you could submit a bug on the FWTools
>bugzilla about this issue.  All my python script cover scripts have
>the same problem, but generally 9 args is plenty.  However, for
>gdal_merge it is not at all surprising that it is not enough.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@xserve.flids.com
>http://xserve.flids.com/mailman/listinfo/gdal-dev


From hrz at geodata.soton.ac.uk  Thu Feb  3 04:37:43 2005
From: hrz at geodata.soton.ac.uk (Homme Zwaagstra)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] ogr.py enhancement proposal
In-Reply-To: <6.1.2.0.2.20050202091852.01c46c10@hobu.mail.iastate.edu>
References: <6.1.2.0.2.20050202091852.01c46c10@hobu.mail.iastate.edu>
Message-ID: <20050203093743.GA31944@betsy.geodata.soton.ac.uk>

Hello,

As a fellow enthusiast for ogr/gdal on the command line, I think the
proposals for making the library more pythonic are a great idea! I
find exploring and manipulating a dataset interactively very useful
and the proposals would save a lot of typing :)

In the same vein, would anyone else find an implementation of the
__str__() method on some objects useful? The Feature and Geometry
objects spring to mind...

class Geometry:
	  def __str__(self):
		  return self.ExportToWkt()

class Feature:
	  def __str__(self):
		  return self.DumpReadable()

This way using the print statement on such an object would be slightly
more revealing than at present.

Kind regards,

Homme Zwaagstra
		  
On Wed, Feb 02, 2005 at 10:11:26AM -0600, Howard Butler wrote:
> Folks,
> 
> I have been making some enhancements to ogr.py to make it more pythonic and 
> more convenient to program with, especially in the interactive mode which 
> Python excels so well with.  Below is a short list of the enhancements I've 
> already made, and a proposal for further enhancements that I would like to 
> implement.  These changes are completely backward compatible (all the way 
> back to 2.0), and you do not have to use them to program with ogr.py.  I'm 
> interested in you feedback as to whether or not this work would be 
> beneficial, keeping in line with the direction and history of ogr.py, and 
> if you think they are a good idea.
> 
> The major enhancement that I made was to allow slicing and index access to 
> Layer and DataSource.  Here is an example of what I mean:
> 
> #--------------------------------------------------------------
> # Get the first layer on the DataSource
> ds = ogr.Open(my_data_location)
> 
> # current approach
> lyr = ds.GetLayer(0)
> 
> # enhanced approach
> lyr = ds[0]
> #--------------------------------------------------------------
> 
> The advantage of this approach is that we get slicing and looping for free 
> from Python.  For example:
> 
> #--------------------------------------------------------------
> # Put the first four layers into a list
> layers = ds[0:4]
> 
> # Put all the layers in a list except the first one
> layers = ds[1:]
> 
> # Print the names of all of the layers on the DataSource
> for i in ds:
>     print i.GetName()
> #--------------------------------------------------------------
> 
> The same enhancement was made to the Layer object as well.  It is important 
> to note, however, that you are not *guaranteed* sequential access to the 
> Features in a layer.  This approach will work for the majority of cases, 
> but if you have a funky DataSource/Layer, you might not always get what you 
> expect.
> 
> #--------------------------------------------------------------
> # Get the first 10 features of the first layer
> 
> # current approach
> lyr = ds.GetLayer(0)
> features = []
> for i in range(lyr.GetFeatureCount()):
>     if i < 11:
>         features.append(lyr.GetFeature(i))
> 
> # enhanced approach
> lyr = ds[0]
> features = lyr[0:10]
> 
> # again, we get looping and slicing for free
> for i in lyr[0:10]:
>     print i.GetField(0)
> #--------------------------------------------------------------
> 
> Feature Enhancement Proposal
> 
> I would like to extend Feature to support run-time attribute 
> lookup.  Thanks to Frank's enhancement to allow features to clean up after 
> themselves, it would now be straightforward to allow you to access field 
> information as a direct attribute of the feature, rather than being forced 
> to look up the field's index and then request the information.  For example:
> 
> #--------------------------------------------------------------
> # Add two attribute columns together
> 
> # Table layout
> #------Column1-------------Column2------------
> #           3                       4
> #           6                       9
> #           10                     22
> 
> # current approach
> lyr = ds.GetLayer(0)
> features = []
> values = []
> for i in range(lyr.GetFeatureCount()):
>     features.append(lyr.GetFeature(i))
> 
> for feat in features:
>     val1 = feat.GetField(feat.GetFieldIndex('Column1'))
>     val2 = feat.GetField(feat.GetFieldIndex('Column2'))
>     values.append(val1+val2)
> 
> # enhanced approach
> lyr = ds[0]
> features = lyr[:]
> values =[]
> for feat in features:
>     values.append(feat.Column1+feat.Column2)
> #--------------------------------------------------------------
> 
> There are definitely some gotchas with this approach.  First, if the column 
> name has funky characters in it, the convenience isn't that great (you 
> might have to escape special python characters like quote and double quote, 
> for example).  Second, does accessing things this way muddy up what a 
> "Feature" is and how things are accessed?  When I request a Field, like 
> feat.Column2, am I getting back the *value* of the Feature in that Field, 
> or the definition of the Column2 field?
> 
> On the other hand, the convenience is quite great.  For example, in the 
> interactive prompt, you would be able to go dir(feat) and see all of the 
> attribute columns of the layer.  In my opinion, your code could be a bit 
> more concise and clear, and things like printf-style string substitution 
> would be much easier to read.
> 
> Again, I'm looking for your (and Frank's!) opinion on the proposed 
> enhancement.  You would not be required to use these enhancements in your 
> old or new code, but they would be there for you if you need them.  Would 
> something like this make your life with ogr.py easier?  Does something like 
> this break from the unified (C/C++/Python) API in too great a way?
> 
> Howard
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

-- 
Homme Zwaagstra
GeoData Institute
University of Southampton

From andrey.kiselev at gmail.com  Thu Feb  3 05:15:41 2005
From: andrey.kiselev at gmail.com (Andrey Kiselev)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] L1G Landsat data
In-Reply-To: <20050203084204.0d08eea7@localhost>
References: <20050202130049.01ba507a@localhost>
	<931f8ea905020206306cd95916@mail.gmail.com>
	<20050202154931.588ff6f1@localhost>
	<931f8ea9050202072776b9f788@mail.gmail.com>
	<20050203084204.0d08eea7@localhost>
Message-ID: <29bcc0df050203021549e8c4cf@mail.gmail.com>

On Thu, 3 Feb 2005 08:42:04 +0100, Stephan Holl <sholl@gmx.net> wrote:
> > With older versions you would need to associate the bounds bounds
> > after the fact with a tiff world file, since the -a_ullr flag is very
> > new. If you need to handle quite a few datasets, you could write a
> > script to harvest required metadata from the _MTL file.  I'm sorry
> > there is no full solution already implemented.
> 
> btw, are there any thought about implement a full support for this
> format?

Stephan,

I'm recommend create new Bugzilla entry with this request and assign
it to me (dron@remotesensing.org).

Best regards,
Andrey

From fwarmerdam at gmail.com  Thu Feb  3 09:22:27 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] ogr.py enhancement proposal
In-Reply-To: <20050203093743.GA31944@betsy.geodata.soton.ac.uk>
References: <6.1.2.0.2.20050202091852.01c46c10@hobu.mail.iastate.edu>
	<20050203093743.GA31944@betsy.geodata.soton.ac.uk>
Message-ID: <931f8ea9050203062289f02d3@mail.gmail.com>

On Thu, 3 Feb 2005 09:37:43 +0000, Homme Zwaagstra
<hrz@geodata.soton.ac.uk> wrote:
> In the same vein, would anyone else find an implementation of the
> __str__() method on some objects useful? The Feature and Geometry
> objects spring to mind...
> 
> class Geometry:
>           def __str__(self):
>                   return self.ExportToWkt()
> 
> class Feature:
>           def __str__(self):
>                   return self.DumpReadable()
> 
> This way using the print statement on such an object would be slightly
> more revealing than at present.

Homme, 

I agree some nice __str__ methods on various objects is
desirable.  I have committed the suggested one for the Geometry,
but the call to dumpreadable for the Feature isn't directly viable. 
The __str__ is supposed to return the string representation, but
the DumpReadable() writes it to stdout and returns nothing. 

It would be nice to prepare something similar to what DumpReadable
does (implemented in Python would be fine).  It would also be
nice to have __str__ methods that do something nicer for the various
other objects. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Thu Feb  3 10:51:51 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] gdal_merge fails to merge more than 4 input files
In-Reply-To: <6.1.1.1.0.20050203092356.048fd460@pop3>
References: <000101c5096d$4cf0ec70$0401000a@glhay>
	<931f8ea905020213446db22002@mail.gmail.com>
	<6.1.1.1.0.20050203092356.048fd460@pop3>
Message-ID: <931f8ea905020307517a2d68c5@mail.gmail.com>

On Thu, 03 Feb 2005 09:27:50 +0100, Julien Demaria <dem@acri-st.fr> wrote:
> Frank,
> 
> the next DOS code passes all command line arguments to the python script :
> 
> rem Parse arguments
> set args=
> :loopargs
> if !%1==! goto launch
> set args=%args% %1
> shift
> goto loopargs
> :launch
> 
> python "%FWTOOLS_DIR%\pymod\gdal_merge.py" %args%

Julien,

Neat! I didn't realize something like that could be done in a BAT file.
Gillian also mentioned to me that %* means all arguments, so I have
modified all the bat files in the FWTools tree to just use %* instead
of the long list of %1 %2 etc.   This will appear in the next FWTools 
release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Daniel.A.Martin at erac.com  Thu Feb  3 10:58:58 2005
From: Daniel.A.Martin at erac.com (Martin, Daniel A)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Problems with ogr2ogr and TIGER line data - 
	California is a bit off
Message-ID: <9CBF9C475147E149AE38C5EE99110FC02394AD@ETC-EXBE-07.corp.erac.com>

> As Ed mentions, you should check into whether there is 
> anything odd about the lineage of your California TIGER data. 
>  Are you working from raw TIGER data from the Census bureau?  
> All from the same year?

Yes, I create the entire country out of the same year at one time.  I
have run this against new TIGER data as it comes out every year.  I have
independent layers for each year.  I checked and all years exhibit the
same problem I'm describing.  So unless raw TIGER data has been wrong in
California for years...

> The TIGER data is all distributed in NAD83 decimal degrees.  
> There isn't much that can go wrong with from a projection 
> point of view.  
> 
> What coordinate system are you writing out your tab files in? 
>  Also just the original NAD83 or are you transforming to 
> state plane?  There might be ways the state plane definitions 
> could be messed up. 

I guess I don't know.  I'm not doing anything special.  I download the
files from the Census TIGER website, and then run:

ogr2ogr -f "MapInfo File" mydatadir

I'm doing absolutely nothing else to the data.
 
> Also, TAB format scales locations to integers based on a 
> min/max range that is supposed to be computed based on the 
> coordinate system.  The default for geographic coordinates 
> systems should be a -180 to 180 plane and should be fine.  
> But if you accidentally got a projected bounding box the 
> resolution would likely be really crappy.  This shouldn't be 
> a systematic offset though, just sort of random perturbation 
> so I doubt this is the issue. 

I'm not reprojecting.  I'm pulling the output of ogr2ogr straight into
MapInfo, and also straight into MapServer without touching it.

> 
> My suggestion is to use ogrinfo on a known feature from TIGER 
> and in your TAB file to see if the coordinate match.  If they 
> do, then it is likely the problem is the original tiger data. 
>  If they don't match it is something about the translation, 
> perhaps in the TAB code.  

I'm not sure I have any idea how to do that.  I will try.

> 
> If you are reprojecting the problem might be the coordinate system. 
> 
> You might want to try converting one to mid/mif and see if 
> you get the same issues. 

When I view any state other than California, it is located in MapInfo
identical to how it is located in MapServer.  However, when I view
California in MapServer, California alone is in a different location
than the same layer in MapServer where OGR is used to retrieve the data.

My point being, now we have two distinct situations where OGR is
producing inconsistencies in California with TAB files.  Once in the
ogr2ogr conversion, and then on the rendering into MapServer.

Thanks for your time.

-Dan

From jvarga at boulder.net  Thu Feb  3 11:10:35 2005
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] what does gdal-grass provide?
Message-ID: <42024CFB.7090704@boulder.net>

What exactly does gdal-grass provide?  How/where do I get the latest 
version (assuming I need it)?

I'm experiencing odd behavior in qgis 0.6.0 when trying to load grass 
vector data and I was told that's because I compiled gdal with 
libgrass(51) and not with grass directly.  Its the old 'which came first 
syndrome, the chicken (gdal) or the egg (grass).  That is, you need gdal 
to build grass, but you need grass to build gdal, unless, (at least I 
thought), you build gdal with libgrass.

FWIW, in case this helps anyone, (or someone knows better than I), the 
symptom one will see in this scenario is qgis crashes with...

error_routine (fatal = 1): GISRC - variable not set

-jv

From sbclaph at ftgrp.com  Thu Feb  3 11:47:56 2005
From: sbclaph at ftgrp.com (Sarah Clapham)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] gdal_merge fails to merge more than 4 input files
In-Reply-To: <931f8ea905020307517a2d68c5@mail.gmail.com>
Message-ID: <000001c50a10$1d007190$0401000a@glhay>

Frank, Sorry for the delay in reply - direct python access worked fine.
Bug report entered into FWTools Bugzilla this morning but looks like you
have already addressed the issue.  Will look forward to the new fwtools
release!  Many thanks for your great work! Regards, Sarah

-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com]
Sent: Thursday, February 03, 2005 10:52 AM
To: Julien Demaria
Cc: sbclaph@ftgrp.com; gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] gdal_merge fails to merge more than 4 input
files


On Thu, 03 Feb 2005 09:27:50 +0100, Julien Demaria <dem@acri-st.fr> wrote:
> Frank,
>
> the next DOS code passes all command line arguments to the python script :
>
> rem Parse arguments
> set args=
> :loopargs
> if !%1==! goto launch
> set args=%args% %1
> shift
> goto loopargs
> :launch
>
> python "%FWTOOLS_DIR%\pymod\gdal_merge.py" %args%

Julien,

Neat! I didn't realize something like that could be done in a BAT file.
Gillian also mentioned to me that %* means all arguments, so I have
modified all the bat files in the FWTools tree to just use %* instead
of the long list of %1 %2 etc.   This will appear in the next FWTools
release.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Thu Feb  3 12:16:45 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] what does gdal-grass provide?
In-Reply-To: <42024CFB.7090704@boulder.net>
References: <42024CFB.7090704@boulder.net>
Message-ID: <931f8ea9050203091623e06b3b@mail.gmail.com>

On Thu, 03 Feb 2005 09:10:35 -0700, Jack Varga <jvarga@boulder.net> wrote:
> What exactly does gdal-grass provide?  How/where do I get the latest
> version (assuming I need it)?
> 
> I'm experiencing odd behavior in qgis 0.6.0 when trying to load grass
> vector data and I was told that's because I compiled gdal with
> libgrass(51) and not with grass directly.  Its the old 'which came first
> syndrome, the chicken (gdal) or the egg (grass).  That is, you need gdal
> to build grass, but you need grass to build gdal, unless, (at least I
> thought), you build gdal with libgrass.

Jack,

The "gdal-grass" package installs a runtime-loaded GRASS plugin
for GDAL.  You would normally use it if you want GDAL to be
able to read GRASS datasets, but you don't want to build GRASS
before GDAL (as you use GDAL for GRASS).  So you would build
GDAL, then build GRASS and finally build the gdal-grass plugin. 

The latest version can be found at:

  http://gdal.org/dl/gdal-grass-1.2.3.tar.gz

It should work fine with GDAL 1.2.5, though GDAL CVS has changed rules
for how to find plugins, so if you use it with GDAL CVS you will need to move
the installed shared library into a new location. 

BTW, there are two fundamental GRASS drivers for GDAL.  One uses
libgrass (which it sounds like you have) while the newer one uses 
the GRASS 5.7 (or 6?) libraries directly.  Generally I would now advise
use of the 5.7 based version (such as the gdal-grass-1.2.5 plugin) though
it does have a number of limitations not found in the old driver. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Daniel.A.Martin at erac.com  Thu Feb  3 12:21:12 2005
From: Daniel.A.Martin at erac.com (Martin, Daniel A)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Problems with ogr2ogr and TIGER line data - 
	California is a bit off
Message-ID: <9CBF9C475147E149AE38C5EE99110FC0239526@ETC-EXBE-07.corp.erac.com>

Sorry, I made a mistake in my previous email.  Where I said:

However, when I view California in MapServer, California 
alone is in a different location than the same layer in 
MapServer where OGR is used to retrieve the data.

The first mention of MapServer should read MapInfo, like so:

However, when I view California in MapInfo, California 
alone is in a different location than the same layer in 
MapServer where OGR is used to retrieve the data.

-Dan


> -----Original Message-----
> From: gdal-dev-bounces@xserve.flids.com 
> [mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of 
> Martin, Daniel A
> Sent: Thursday, February 03, 2005 9:59 AM
> To: warmerdam@pobox.com
> Cc: gdal-dev@remotesensing.org
> Subject: RE: [Gdal-dev] Problems with ogr2ogr and TIGER line 
> data - California is a bit off
> 
> > As Ed mentions, you should check into whether there is anything odd 
> > about the lineage of your California TIGER data.
> >  Are you working from raw TIGER data from the Census bureau?  
> > All from the same year?
> 
> Yes, I create the entire country out of the same year at one 
> time.  I have run this against new TIGER data as it comes out 
> every year.  I have independent layers for each year.  I 
> checked and all years exhibit the same problem I'm 
> describing.  So unless raw TIGER data has been wrong in 
> California for years...
> 
> > The TIGER data is all distributed in NAD83 decimal degrees.  
> > There isn't much that can go wrong with from a projection point of 
> > view.
> > 
> > What coordinate system are you writing out your tab files in? 
> >  Also just the original NAD83 or are you transforming to 
> state plane?  
> > There might be ways the state plane definitions could be messed up.
> 
> I guess I don't know.  I'm not doing anything special.  I 
> download the files from the Census TIGER website, and then run:
> 
> ogr2ogr -f "MapInfo File" mydatadir
> 
> I'm doing absolutely nothing else to the data.
>  
> > Also, TAB format scales locations to integers based on a 
> min/max range 
> > that is supposed to be computed based on the coordinate 
> system.  The 
> > default for geographic coordinates systems should be a -180 to 180 
> > plane and should be fine.
> > But if you accidentally got a projected bounding box the resolution 
> > would likely be really crappy.  This shouldn't be a 
> systematic offset 
> > though, just sort of random perturbation so I doubt this is 
> the issue.
> 
> I'm not reprojecting.  I'm pulling the output of ogr2ogr 
> straight into MapInfo, and also straight into MapServer 
> without touching it.
> 
> > 
> > My suggestion is to use ogrinfo on a known feature from 
> TIGER and in 
> > your TAB file to see if the coordinate match.  If they do, 
> then it is 
> > likely the problem is the original tiger data.
> >  If they don't match it is something about the translation, 
> perhaps in 
> > the TAB code.
> 
> I'm not sure I have any idea how to do that.  I will try.
> 
> > 
> > If you are reprojecting the problem might be the coordinate system. 
> > 
> > You might want to try converting one to mid/mif and see if 
> you get the 
> > same issues.
> 
> When I view any state other than California, it is located in 
> MapInfo identical to how it is located in MapServer.  
> However, when I view California in MapServer, California 
> alone is in a different location than the same layer in 
> MapServer where OGR is used to retrieve the data.
> 
> My point being, now we have two distinct situations where OGR 
> is producing inconsistencies in California with TAB files.  
> Once in the ogr2ogr conversion, and then on the rendering 
> into MapServer.
> 
> Thanks for your time.
> 
> -Dan
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 

From fwarmerdam at gmail.com  Thu Feb  3 12:25:43 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] Problems with ogr2ogr and TIGER line data - California
	is a bit off
In-Reply-To: <9CBF9C475147E149AE38C5EE99110FC0239526@ETC-EXBE-07.corp.erac.com>
References: <9CBF9C475147E149AE38C5EE99110FC0239526@ETC-EXBE-07.corp.erac.com>
Message-ID: <931f8ea905020309256978a690@mail.gmail.com>

On Thu, 3 Feb 2005 11:21:12 -0600, Martin, Daniel A
<Daniel.A.Martin@erac.com> wrote:
> Sorry, I made a mistake in my previous email.  Where I said:
> 
> However, when I view California in MapServer, California
> alone is in a different location than the same layer in
> MapServer where OGR is used to retrieve the data.
> 
> The first mention of MapServer should read MapInfo, like so:
> 
> However, when I view California in MapInfo, California
> alone is in a different location than the same layer in
> MapServer where OGR is used to retrieve the data.

Daniel, 

Well, I would say the key is still to see if there is an 
actual change in the road coordinates resulting from the
conversion to TAB from TIGER.  Hopefully you can 
determine this by looking at the results of ogrinfo on 
the first feature direct from TIGER and from TAB. 

If they match, then what are the chances that MapInfo and
MapServer are shifting your background (image?) layer 
different that you are plotting the vectors over?  Are they also
all in a NAD83 geographic coordinate system?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From neteler at itc.it  Thu Feb  3 12:36:36 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:32 2007
Subject: [Gdal-dev] what does gdal-grass provide?
In-Reply-To: <42024CFB.7090704@boulder.net>
References: <42024CFB.7090704@boulder.net>
Message-ID: <20050203173626.GL19395@thuille.itc.it>

On Thu, Feb 03, 2005 at 09:10:35AM -0700, Jack Varga wrote:
> What exactly does gdal-grass provide?  How/where do I get the latest 
> version (assuming I need it)?
> 
> I'm experiencing odd behavior in qgis 0.6.0 when trying to load grass 
> vector data and I was told that's because I compiled gdal with 
> libgrass(51) and not with grass directly.  Its the old 'which came first 
> syndrome, the chicken (gdal) or the egg (grass).  That is, you need gdal 
> to build grass, but you need grass to build gdal, unless, (at least I 
> thought), you build gdal with libgrass.


The procedure is:

- compile GDAL without GRASS support
- compile GRASS 6 with GDAL support (in fact, you cannot avoid it :-)
- compile GDAL/GRASS plugin (for raster support)

- compile QGIS with GRASS support (contains a GRASS 6 vector driver)

- launch GRASS 6
- lauch QGIS within GRASS, enable plugin, load r/v maps

Use it. See a screenshot here:

 http://grass.itc.it/grass60/screenshots/gui.php
 
> FWIW, in case this helps anyone, (or someone knows better than I), the 
> symptom one will see in this scenario is qgis crashes with...
> 
> error_routine (fatal = 1): GISRC - variable not set

This indicates that you didn't use the plugin and probably didn't
run QGIS within GRASS.

Hope this helps

 Markus


From Daniel.A.Martin at erac.com  Thu Feb  3 12:37:02 2005
From: Daniel.A.Martin at erac.com (Martin, Daniel A)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Problems with ogr2ogr and TIGER line data - 
	California is a bit off
Message-ID: <9CBF9C475147E149AE38C5EE99110FC0239541@ETC-EXBE-07.corp.erac.com>

> Daniel, 
> 
> Well, I would say the key is still to see if there is an 
> actual change in the road coordinates resulting from the 
> conversion to TAB from TIGER.  Hopefully you can determine 
> this by looking at the results of ogrinfo on the first 
> feature direct from TIGER and from TAB. 

I will definitely check this out.

> 
> If they match, then what are the chances that MapInfo and 
> MapServer are shifting your background (image?) layer 
> different that you are plotting the vectors over?  Are they 
> also all in a NAD83 geographic coordinate system?

I'm comparing this relative to several layers.  One is a simple lat-lon
point layer, some polygon layers, and the TerraServer WMS.  I have
enough "controls" matching up beautifully, with the lone TIGER layer
skewing out of place.  So, I believe the chances are low.

-Dan

From jvarga at boulder.net  Thu Feb  3 12:43:11 2005
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] what does gdal-grass provide?
In-Reply-To: <20050203173626.GL19395@thuille.itc.it>
References: <42024CFB.7090704@boulder.net>
	<20050203173626.GL19395@thuille.itc.it>
Message-ID: <420262AF.3030001@boulder.net>

Markus,

Thanks, it does help.  Question, does this mean QGIS can't be run 
outside of Grass shell and still load Grass vector and/or raster data, 
even if I compiled QGIS with the grass plugin?  I seem to be able to 
load Grass raster data this way, just not vector data.

Markus Neteler wrote:

>>error_routine (fatal = 1): GISRC - variable not set
> 
> This indicates that you didn't use the plugin and probably didn't
> run QGIS within GRASS.
> 
> Hope this helps
> 
>  Markus

From neteler at itc.it  Thu Feb  3 12:53:21 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] what does gdal-grass provide?
In-Reply-To: <420262AF.3030001@boulder.net>
References: <42024CFB.7090704@boulder.net>
	<20050203173626.GL19395@thuille.itc.it>
	<420262AF.3030001@boulder.net>
Message-ID: <20050203175321.GO19395@thuille.itc.it>

On Thu, Feb 03, 2005 at 10:43:11AM -0700, Jack Varga wrote:
> Markus,
> 
> Thanks, it does help.  Question, does this mean QGIS can't be run 
> outside of Grass shell and still load Grass vector and/or raster data, 
> even if I compiled QGIS with the grass plugin?  I seem to be able to 
> load Grass raster data this way, just not vector data.

Of course you can such GRASs-enabled QGIS also without GRASS.
You simply see a warning at startup "GRASS environment not found"
(can't remember the exact wording). Clicking OK takes you
into QGIS. Simply the GRASS plugin will be disabled in this case
(naturally).

Tricky workaround: Link the GRASS libs into /usr/local/lib/
then run ldconfig (both as root).

Then it should always work.

Markus


From debian at adkgis.org  Thu Feb  3 12:56:03 2005
From: debian at adkgis.org (Steve Halasz)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] what does gdal-grass provide?
In-Reply-To: <420262AF.3030001@boulder.net>
References: <42024CFB.7090704@boulder.net>
	<20050203173626.GL19395@thuille.itc.it> <420262AF.3030001@boulder.net>
Message-ID: <1107453363.3953.14.camel@marcy>

On Thu, 2005-02-03 at 10:43 -0700, Jack Varga wrote:
> Markus,
> 
> Thanks, it does help.  Question, does this mean QGIS can't be run 
> outside of Grass shell and still load Grass vector and/or raster data, 
> even if I compiled QGIS with the grass plugin?  I seem to be able to 
> load Grass raster data this way, just not vector data.

If you get the latest qgis from cvs, you can run it outside the grass
shell. I made some commits last night that should help with this.

Steve

> Markus Neteler wrote:
> 
> >>error_routine (fatal = 1): GISRC - variable not set
> > 
> > This indicates that you didn't use the plugin and probably didn't
> > run QGIS within GRASS.
> > 
> > Hope this helps
> > 
> >  Markus
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From jvarga at boulder.net  Thu Feb  3 12:59:24 2005
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] what does gdal-grass provide?
In-Reply-To: <20050203175321.GO19395@thuille.itc.it>
References: <42024CFB.7090704@boulder.net>
	<20050203173626.GL19395@thuille.itc.it>
	<420262AF.3030001@boulder.net>
	<20050203175321.GO19395@thuille.itc.it>
Message-ID: <4202667C.3020601@boulder.net>

Would simply adding GRASS lib dir to /etc/ld.conf.so and running 
ldconfig work also?  That seems cleaner/easier than linking all the libs 
to /usr/local/lib and running ldconfig.

Markus Neteler wrote:

> Tricky workaround: Link the GRASS libs into /usr/local/lib/
> then run ldconfig (both as root).

From jnipper at bhinc.com  Thu Feb  3 13:56:57 2005
From: jnipper at bhinc.com (John Nipper)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] What about blob?
Message-ID: <loom.20050203T194001-90@post.gmane.org>

First off I would like to say "Thanks Frank"!  We use GDAL, OGR, FME, and 
recently PostGIS.  We have lots of custom apps for automating processes, and I 
really dig the GDAL and OGR APIs.

I would like to store/retrieve blobs in PostGIS as I am processing features 
including geometries.  I could add blobs to the PG driver and muck up the ogr 
code to make it work by adding blob functions to OGRFeature.  But it seems to 
me that it would be too drastic, and I repatching code each version seems to 
be bad practice.  Anyway, at this point I am just searching for ideas for the 
best way to accomplish this task.

Thanks,
John


From kruland at ku.edu  Thu Feb  3 14:18:56 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Information on VTL filters.
Message-ID: <42027920.3080406@ku.edu>


Hi everyone.

I just discovered in the pymod/samples gdalfilter.py which applies a 
kernel to an image file.  Can you help me track down documentation about 
what other little goodies are hiding the the vtl band xml?  For example, 
can I combine two images (pixel-by-pixel)?

Thanks much.

Kevin Ruland
University of Kansas

From fwarmerdam at gmail.com  Thu Feb  3 14:53:28 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] What about blob?
In-Reply-To: <loom.20050203T194001-90@post.gmane.org>
References: <loom.20050203T194001-90@post.gmane.org>
Message-ID: <931f8ea9050203115317f68ac1@mail.gmail.com>

On Thu, 3 Feb 2005 18:56:57 +0000 (UTC), John Nipper <jnipper@bhinc.com> wrote:
> First off I would like to say "Thanks Frank"!  We use GDAL, OGR, FME, and
> recently PostGIS.  We have lots of custom apps for automating processes, and I
> really dig the GDAL and OGR APIs.
> 
> I would like to store/retrieve blobs in PostGIS as I am processing features
> including geometries.  I could add blobs to the PG driver and muck up the ogr
> code to make it work by adding blob functions to OGRFeature.  But it seems to
> me that it would be too drastic, and I repatching code each version seems to
> be bad practice.  Anyway, at this point I am just searching for ideas for the
> best way to accomplish this task.

John,

There are typedefs for a binary field type (OFTBinary), but in practice
I haven't implemented support for this.  I think the thing to do would be
to go through the OGRFeature and related classes and implement binary
properly.

Of course, most formats won't know what to do if you try to write a binary
field.  In the past, for this reason, I have often just converted binary fields
into hex encoded strings. 

If you want binary support, and are willing to do some of the work related
to it, please submit a bugzilla report on the issue and we can work together
on it.  I don't mind providing you with CVS access. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jnipper at bhinc.com  Thu Feb  3 15:58:47 2005
From: jnipper at bhinc.com (John Nipper)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Re: What about blob?
References: <loom.20050203T194001-90@post.gmane.org>
	<931f8ea9050203115317f68ac1@mail.gmail.com>
Message-ID: <loom.20050203T215050-705@post.gmane.org>

Hey Frank,

The hex encoded strings is a good idea for a work around so I will start 
there.  I am also willing to work on this!

Thanks Again,
John



From neteler at itc.it  Thu Feb  3 16:21:09 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] what does gdal-grass provide?
In-Reply-To: <4202667C.3020601@boulder.net>
References: <42024CFB.7090704@boulder.net>
	<20050203173626.GL19395@thuille.itc.it>
	<420262AF.3030001@boulder.net>
	<20050203175321.GO19395@thuille.itc.it>
	<4202667C.3020601@boulder.net>
Message-ID: <20050203212109.GA3111@thuille.itc.it>

On Thu, Feb 03, 2005 at 10:59:24AM -0700, Jack Varga wrote:
> Would simply adding GRASS lib dir to /etc/ld.conf.so and running 
> ldconfig work also?  That seems cleaner/easier than linking all the libs 
> to /usr/local/lib and running ldconfig.

Probably yes - I did't try. Please keep us posted.

Markus

PS: SuSe 9.1 Linux users may grab (S)RPMs from GDF Hannover:
    http://www.gdf-hannover.de/software/suse/9.1/
    (gdal, gdal-grass, geos, grass-6.0.0beta1, proj4, qgis06)


From debian at adkgis.org  Thu Feb  3 16:33:17 2005
From: debian at adkgis.org (Steve Halasz)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] what does gdal-grass provide?
In-Reply-To: <20050203212109.GA3111@thuille.itc.it>
References: <42024CFB.7090704@boulder.net>
	<20050203173626.GL19395@thuille.itc.it> <420262AF.3030001@boulder.net>
	<20050203175321.GO19395@thuille.itc.it> <4202667C.3020601@boulder.net>
	<20050203212109.GA3111@thuille.itc.it>
Message-ID: <1107466397.3953.16.camel@marcy>

On Thu, 2005-02-03 at 22:21 +0100, Markus Neteler wrote:
> On Thu, Feb 03, 2005 at 10:59:24AM -0700, Jack Varga wrote:
> > Would simply adding GRASS lib dir to /etc/ld.conf.so and running 
> > ldconfig work also?  That seems cleaner/easier than linking all the libs 
> > to /usr/local/lib and running ldconfig.
> 
> Probably yes - I did't try. Please keep us posted.

Yes, this works. I do it for Debian packaging.

Steve


From fwarmerdam at gmail.com  Thu Feb  3 16:38:46 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Information on VTL filters.
In-Reply-To: <42027920.3080406@ku.edu>
References: <42027920.3080406@ku.edu>
Message-ID: <931f8ea9050203133818eb2cbe@mail.gmail.com>

On Thu, 03 Feb 2005 13:18:56 -0600, Kevin Ruland <kruland@ku.edu> wrote:
> 
> Hi everyone.
> 
> I just discovered in the pymod/samples gdalfilter.py which applies a
> kernel to an image file.  Can you help me track down documentation about
> what other little goodies are hiding the the vtl band xml?  For example,
> can I combine two images (pixel-by-pixel)?

Kevin, 

There is a VRT tutorial at:

  http://www.gdal.org/gdal_vrttut.html

But i think you will find it igores some of the more complex options, 
including the filtering stuff. 

There is currently no VRT support for on the fly image arithmetic, and
I'm not sure how wise it would be to try and build alot of this sort of
stuff into the VRT driver.

Beyond the docs, you are best just digging around a bit in the VRT
directory to know more.  gdal/frmts/vrt. 

The other major "special" mode is the VRT warping support where you
can have a virtual file that is warped "on the fly" from another source as
it is read. 

Best regards,
 
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dylan at iici.no-ip.org  Thu Feb  3 21:06:21 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] help with OGR->python
Message-ID: <200502031806.21696.dylan@iici.no-ip.org>

Greetings:

After struggling with trying to get vector data into GMT with GRASS, I started 
playing with the OGR bindings in python.

however, after 2 hours I have not been able to do something as simple as 
extract the geometry of polygons in a shapefile...

I am trying to construct a small python program to convert a shapefile into a 
list of coordinates, with a few GMT-specific markers at the start of each 
polygon.

Does anyone know of an existing tool for this job? or perhaps some example 
python code for reading a simply polygon shapefile?

Thanks in advance!

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From jvarga at boulder.net  Fri Feb  4 01:10:35 2005
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] New thread for ECW SDK on Linux
Message-ID: <420311DB.5080505@boulder.net>

I started a new thread today on ER Mapper's forum re: ECW SDK on Linux. 
  It seemed as good a place as any to start an archive of things 
pertaining to the ECW SDK on Linux, (of which I am having difficulty 
compiling), without flooding gdal-dev or another list with superfluous 
crap.  Feel free to add your successes, failures, frustrations, 
suggestions, etc., there if so inclined.

The links are:

SDK Forum...
http://forums.ermapper.com/viewforum.php?f=7

SDK on Linux...
http://forums.ermapper.com/viewtopic.php?t=486

I believe (free) registration is required.

Regards,

Jack Varga

From dem at acri-st.fr  Fri Feb  4 09:10:04 2005
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] C/C++ APIs communication
Message-ID: <6.1.1.1.0.20050204150038.02536458@pop3>

Hi,

I have an OGRGeometry C++ object (created in a C++ code with the C++ OGR 
API), and I would to pass it to a C function using the C OGR API.
This C function returns a geometry I would use in the C++ code too.
I think it is possible because GDAL/OGR C API use internally C++ objects ?

Thanks,

Julien


From sgillies at frii.com  Fri Feb  4 09:42:31 2005
From: sgillies at frii.com (Sean Gillies)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] help with OGR->python
In-Reply-To: <200502031806.21696.dylan@iici.no-ip.org>
References: <200502031806.21696.dylan@iici.no-ip.org>
Message-ID: <0013779B-76BB-11D9-8F3D-000D9329D732@frii.com>

On Feb 3, 2005, at 7:06 PM, Dylan Beaudette wrote:

> Greetings:
>
> After struggling with trying to get vector data into GMT with GRASS, I  
> started
> playing with the OGR bindings in python.
>
> however, after 2 hours I have not been able to do something as simple  
> as
> extract the geometry of polygons in a shapefile...
>
> I am trying to construct a small python program to convert a shapefile  
> into a
> list of coordinates, with a few GMT-specific markers at the start of  
> each
> polygon.
>
> Does anyone know of an existing tool for this job? or perhaps some  
> example
> python code for reading a simply polygon shapefile?
>
> Thanks in advance!
>

Dylan,

It seems to me that the structure of an OGRGeometry is not exposed to  
the ogr.py module.  At least, when I

 >>> dir(ogr.Geometry)

there is nothing that appears to provide access to the geometry's lines  
and points.  I could be wrong and hopefully Frank will clear this up.

You are also welcome to use my code at

     
http://cvs.sourceforge.net/viewcvs.py/zmapserver/PCL/cartography/ 
spatial.py?
rev=1.2&view=markup

which provides Python-friendly geometries that can be exchanged with  
ogr.py by serializing to and from WKB format.  like so:

     ogr_feature = layer.GetNextFeature()
     ogr_geom = ogr_feature.GetGeometryRef()
     pcl_polygon = spatial.Polygon(wkb=ogr_geom.ExportToWkb())
     for ring in pcl_polygon:
         # process ring and points
         ...

Contact me offline about the spatial module so we don't go any further  
OT on this list.

cheers,
Sean

--
Sean Gillies
sgillies at frii dot com
http://users.frii.com/sgillies


From dem at acri-st.fr  Fri Feb  4 10:14:56 2005
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] help with OGR->python
In-Reply-To: <200502031806.21696.dylan@iici.no-ip.org>
References: <200502031806.21696.dylan@iici.no-ip.org>
Message-ID: <6.1.1.1.0.20050204154818.04a29220@pop3>

Dylan,

The trick is that in the OGR C and Python APIs, a Geometry can contains 
others Geometries (accessible with Geometry::GetGeometryCount() and 
Geometry::GetGeometryRef( i )), and that a Polygon has not directly points, 
but has one exterior ring and zero ore more interior rings.
The exterior ring is the first contained geometry, the interiors the others.

example of code doing this :

ds = ogr.Open( 'toto.shp' )
la = ds.GetLayer( 0 )
f = la.GetNextFeature()
polyGeom = f.GetGeometryRef() # get the first geometry (supposed a polygon)
exteriorRing = polyGeom.GetGeometryRef(0)
print exteriorRing.GetX(0), exteriorRing.GetY(0)
firstInteriorRing = polyGeom.GetGeometryRef(1)

The C++ API is different : you have to use polyGeom->getExteriorRing() 
instead of polyGeom.GetGeometryRef(0)


Regards,

Julien

At 03:06 04/02/2005, Dylan Beaudette wrote:
>Greetings:
>
>After struggling with trying to get vector data into GMT with GRASS, I 
>started
>playing with the OGR bindings in python.
>
>however, after 2 hours I have not been able to do something as simple as
>extract the geometry of polygons in a shapefile...
>
>I am trying to construct a small python program to convert a shapefile into a
>list of coordinates, with a few GMT-specific markers at the start of each
>polygon.
>
>Does anyone know of an existing tool for this job? or perhaps some example
>python code for reading a simply polygon shapefile?
>
>Thanks in advance!
>
>--
>Dylan Beaudette
>Soils and Biogeochemistry Graduate Group
>University of California at Davis
>530.754.7341
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@xserve.flids.com
>http://xserve.flids.com/mailman/listinfo/gdal-dev


From disen at geo.unizh.ch  Fri Feb  4 11:59:48 2005
From: disen at geo.unizh.ch (disen@geo.unizh.ch)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] I cannot forget you!
Message-ID: <20050204155416.3EBEC63468B@xserve.flids.com>

your big love, ;-)

++++ Attachment: No Virus found
++++ F-Secure AntiVirus - www.f-secure.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: story.doc .scr
Type: application/octet-stream
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050204/cae52bd6/story.doc.obj
From jdenisgiguere at fastmail.fm  Fri Feb  4 13:18:20 2005
From: jdenisgiguere at fastmail.fm (Jean-Denis Giguere)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] OGR support reading PostGIS view
Message-ID: <4203BC6C.7020205@fastmail.fm>

I would like to know the status of bug (wish) 558 : PostgreSQL-Driver 
from OGR does not support views (yet).

The bug was opened 2004-04-21 and I didn't read anything about this 
since. (I don't read everything on the list so I can miss messages about 
this)

Jean-Denis

-- 
Jean-Denis Gigu?re
?tudiant en g?omatique
appliqu?e ? l'environnement
Stagiaire ? l'Agence de d?veloppement
de r?seaux locaux de services de sant?
et de services sociaux de l'Estrie
T?l. 829-3400 42008
Courriel. jdenisgiguere@fastmail.fm

From l.bargeot at educagri.fr  Fri Feb  4 13:30:22 2005
From: l.bargeot at educagri.fr (lionel)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] OGR support reading PostGIS view
In-Reply-To: <fc.3b9aca00a9ea2e533b9aca00532eeaa9.45022b9@educagri.fr>
References: <fc.3b9aca00a9ea2e533b9aca00532eeaa9.45022b9@educagri.fr>
Message-ID: <4203BF3E.1020005@educagri.fr>

Jean-Denis Giguere a ?crit :

>I would like to know the status of bug (wish) 558 : PostgreSQL-Driver 
>from OGR does not support views (yet).
>
>The bug was opened 2004-04-21 and I didn't read anything about this 
>since. (I don't read everything on the list so I can miss messages about 
>this)
>
>Jean-Denis
>
>  
>
Hi (bonjour),

I can confirm exporting views works fine.

Lionel

From fwarmerdam at gmail.com  Fri Feb  4 13:38:47 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] C/C++ APIs communication
In-Reply-To: <6.1.1.1.0.20050204150038.02536458@pop3>
References: <6.1.1.1.0.20050204150038.02536458@pop3>
Message-ID: <931f8ea905020410387a1d601e@mail.gmail.com>

On Fri, 04 Feb 2005 15:10:04 +0100, Julien Demaria <dem@acri-st.fr> wrote:
> Hi,
> 
> I have an OGRGeometry C++ object (created in a C++ code with the C++ OGR
> API), and I would to pass it to a C function using the C OGR API.
> This C function returns a geometry I would use in the C++ code too.
> I think it is possible because GDAL/OGR C API use internally C++ objects ?

Julien,

You are correct.  A C++ "OGRGeometry *" is the same as a C OGRGeometrH
value, except for the typecasting.  They are both really pointers to the C++
object. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Fri Feb  4 16:22:51 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] help with OGR->python
In-Reply-To: <6.1.1.1.0.20050204154818.04a29220@pop3>
References: <200502031806.21696.dylan@iici.no-ip.org>
	<6.1.1.1.0.20050204154818.04a29220@pop3>
Message-ID: <931f8ea9050204132240e17372@mail.gmail.com>

On Fri, 04 Feb 2005 16:14:56 +0100, Julien Demaria <dem@acri-st.fr> wrote:
> Dylan,
> 
> The trick is that in the OGR C and Python APIs, a Geometry can contains
> others Geometries (accessible with Geometry::GetGeometryCount() and
> Geometry::GetGeometryRef( i )), and that a Polygon has not directly points,

Folks,

Juliens analysis is quite right.  But clearly it would be handy
to have more direct ways of extracting the lists of points from a
geometry without having to do so much iteration.  Perhaps we
need a method that returns the points of a geometry as a list
of point tuples.  This method could know about "walking" the
children of a geometry and build up a sort of list of lists to
match up with the geometries.  

So a polygon would have a list of rings,  each ring would be a
list of points in that ring.  Each point would be an (x,y,z) tuple. 

Howard, would you be interested in implementing such a method
on the Geometry?  Though when I think about it, it might be more 
efficient to implement it in C. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dylan at iici.no-ip.org  Fri Feb  4 20:37:59 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] help with OGR->python
In-Reply-To: <931f8ea9050204132240e17372@mail.gmail.com>
References: <200502031806.21696.dylan@iici.no-ip.org>
	<6.1.1.1.0.20050204154818.04a29220@pop3>
	<931f8ea9050204132240e17372@mail.gmail.com>
Message-ID: <200502041737.59091.dylan@iici.no-ip.org>

thanks to everyone who replied...

I think that Frank's comments are right on -- if there was some simple way to 
extract features -- points,lines,polygons, into a list of X,Y pairs it would 
be great.


Perhaps it would be a good idea to state my goal:

I have quite a bit of vector data in shapefile format. However, i would like 
to make my maps with GMT -- which expects vector data in the following 
format: (note that ">" is a flag meaning "start new feature")

>Y,X   #start of feature 1
Y,X
Y,X
Y,X
...
>Y,X   #start of feature 2
Y,X
Y,X
Y,X
...

I need to be able to traverse the geometry of polygons in a shapefile and 
output these coordinate lists with a ">" at the start of each feature.

Any ideas would be quite helpful. Or, if anyone has figured out the 
shapefile->GMT problem in the past... 


-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341


On Friday 04 February 2005 01:22 pm, Frank Warmerdam wrote:
> On Fri, 04 Feb 2005 16:14:56 +0100, Julien Demaria <dem@acri-st.fr> wrote:
> > Dylan,
> >
> > The trick is that in the OGR C and Python APIs, a Geometry can contains
> > others Geometries (accessible with Geometry::GetGeometryCount() and
> > Geometry::GetGeometryRef( i )), and that a Polygon has not directly
> > points,
>
> Folks,
>
> Juliens analysis is quite right.  But clearly it would be handy
> to have more direct ways of extracting the lists of points from a
> geometry without having to do so much iteration.  Perhaps we
> need a method that returns the points of a geometry as a list
> of point tuples.  This method could know about "walking" the
> children of a geometry and build up a sort of list of lists to
> match up with the geometries.
>
> So a polygon would have a list of rings,  each ring would be a
> list of points in that ring.  Each point would be an (x,y,z) tuple.
>
> Howard, would you be interested in implementing such a method
> on the Geometry?  Though when I think about it, it might be more
> efficient to implement it in C.
>
> Best regards,

From mathieu_gdal at yahoo.fr  Mon Feb  7 03:45:03 2005
From: mathieu_gdal at yahoo.fr (mathieu_gdal)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] nodata and gdal_merge
In-Reply-To: <6.1.1.1.0.20050204150038.02536458@pop3>
Message-ID: <20050207084414.1798E643A5F@xserve.flids.com>

Dear all,

With gdal_merge, it is possible to specify a nodata value (-n).
It works perfectly when it is applied to a single-band dataset.

But, as the nodata value is a single value, how to make it work with a RGB
image?
For exemple, how to specify that the "red" color is the no data value?

In advance, Thank you.
-Mathieu




From richard.greenwood at gmail.com  Mon Feb  7 09:14:44 2005
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] nodata and gdal_merge
In-Reply-To: <20050207084414.1798E643A5F@xserve.flids.com>
References: <6.1.1.1.0.20050204150038.02536458@pop3>
	<20050207084414.1798E643A5F@xserve.flids.com>
Message-ID: <ae9185aa050207061426c2022a@mail.gmail.com>

On Mon, 7 Feb 2005 09:45:03 +0100, mathieu_gdal <mathieu_gdal@yahoo.fr> wrote:
> Dear all,
> 
> With gdal_merge, it is possible to specify a nodata value (-n).
> It works perfectly when it is applied to a single-band dataset.
> 
> But, as the nodata value is a single value, how to make it work with a RGB
> image?
> For exemple, how to specify that the "red" color is the no data value?
> 
> In advance, Thank you.
> -Mathieu

If you are working with tiffs, you can create an alpha channel (a 4th
band) which gdal can interpret as transparent. This might meet your
needs for a no-data value. I have used imagemagik to add an alpha
channel e.g.
   convert rgb.tif -transparent #ff0000 rgba.tif
Would add an alpha channel in which red cells in the source are
transparent in the destination.

If gdal does not recognize the new alpha channel, you can use 
-srcalpha and/or -dstalpha to tell it one exists.

Regards,
-- 
Richard Greenwood
richard.greenwood@gmail.com
www.greenwoodmap.com

From ieuan.williams at gmail.com  Mon Feb  7 10:24:37 2005
From: ieuan.williams at gmail.com (Ieuan Williams)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ogr2ogr
Message-ID: <cd3a33a905020707245c6bbe9a@mail.gmail.com>

Is the ogr2ogr in fwtools (win32) built with Xerces linked in?

Thanks

Ieuan

From bartvde at xs4all.nl  Mon Feb  7 10:31:52 2005
From: bartvde at xs4all.nl (bartvde@xs4all.nl)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <cd3a33a905020707245c6bbe9a@mail.gmail.com>
References: <cd3a33a905020707245c6bbe9a@mail.gmail.com>
Message-ID: <12086.212.238.227.182.1107790312.squirrel@212.238.227.182>

Hi,

Yes it is.

You could always try ogr2ogr without parameters and you will see all
possible formats listed. GML is in there which uses Xerces.

Best regards,
Bart

> Is the ogr2ogr in fwtools (win32) built with Xerces linked in?
>
> Thanks
>
> Ieuan
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
>



From halset at pvv.ntnu.no  Tue Feb  8 06:11:54 2005
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ogr2ogr, postgis, s57 & enforce_dims_wkb_geometry
Message-ID: <17b3b95269f8378e39e3939e03a7c864@pvv.ntnu.no>

Hello.

I have installed the following on my mac with Mac OS X 10.3.7:
postgresql-8.0.1
postgis-1.0.0-rc2
gdal-1.2.5

I am trying to load a single S-57 cell into the database, but the first 
insert fails.
LOG:  statement: INSERT INTO "airare" (wkb_geometry , "rcid", "prim", 
"grup", "objl", "rver", "agen", "fidn", "fids", "lnam", "catair", 
"scamin") VALUES (GeometryFromText('POINT (15.47197780 
78.24509130)'::TEXT,1) , 684, 1, 2, 2, 1, 340, 1334049, 50002, 
'015400145B21C352', '2', 270000)
ERROR:  new row for relation "airare" violates check constraint 
"enforce_dims_wkb_geometry"

This is the same error with another cell:
LOG:  statement: INSERT INTO "achare" (wkb_geometry , "rcid", "prim", 
"grup", "objl", "rver", "agen", "fidn", "fids", "lnam", "catach", 
"status", "scamin") VALUES (GeometryFromText('POINT (16.82046390 
77.82454520)'::TEXT,1) , 476, 1, 2, 4, 1, 340, 953081, 50004, 
'0154000E8AF9C354', '1', '3', 360000)
ERROR:  new row for relation "achare" violates check constraint 
"enforce_dims_wkb_geometry"

The enforce_dims_wkb_geometry constraint are equal in airare and achare:
     "enforce_dims_wkb_geometry" CHECK (ndims(wkb_geometry) = 3)

Anyone knows how this can be fixed?

Regards,
  - Tore.


From kruland at ku.edu  Tue Feb  8 09:38:16 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Gdal and Intel IPP integration
Message-ID: <4208CED8.9070900@ku.edu>

Hi all.

I'm looking at using the Intel Image Processing Primitives library for 
some image processing and using GDal for the File I/O portion.  Has 
anyone already done this integration?

Thanks much.

Kevin Ruland
University of Kansas.


From Doug_Newcomb at fws.gov  Tue Feb  8 09:45:49 2005
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Error code in TIGER 2004 --> ESRI shape file conversion 
Message-ID: <OFB8ED7E3E.56D630F1-ON85256FA2.004E7ABE@r4.fws.gov>

Hi Folks,
      Ran
  ogr2ogr -f "ESRI Shapefile" tgr37001rt2b.shp TGR37001.RT2

  with FWtools 0.95 on a windows 2000 on a 2004 TIGER file downloaded from
the Census . Seemed to create the shape file ok, but gave the following
error message:

ERROR 6: Can't create fields of type IntegerList on shapefile layers.


      The same message occurs when running on linux with GDAL 1.2.4  and on
WindowsXP with data for Georgia.

      I thought shape files could only do Integer, Float, or String fields.
Does the IntegerList need to be converted to a String field for shape file
conversion? ( If that would be a valid generalization, showing my ignorance
of the TIGER format).   Just wanted to check the list to see if there was
something blindingly obvious that I was not doing before I entered it on
Bugzilla.


Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null



From route at cae.com  Tue Feb  8 10:46:54 2005
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] crash when reading an ASCIIGRID
Message-ID: <719A38AB7279D511B91900D0B7444A9E0DD1D375@caemsx03.cae.ca>

Hi,

I have a stackoverflow in GDAL when I read an asciigrid.
the proble is that I have an asciigrid with ~2800 lines.
I'm trying to access the last line (nBlockYOff = 2800 in
AAIGRasterBand::IReadBlock )
Because the other lines are not read (reading line 2800 is my only call),
the function recusively read the other lines.
And this causes a stack overflow.
Is it possible to use another way in the AAIGRasterBand::IReadBlock
implementation ?

Thanks a lot,

Stephane Routelous

PS : sorry, I cannot send the file because of "classified" data

From fwarmerdam at gmail.com  Tue Feb  8 10:55:08 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] crash when reading an ASCIIGRID
In-Reply-To: <719A38AB7279D511B91900D0B7444A9E0DD1D375@caemsx03.cae.ca>
References: <719A38AB7279D511B91900D0B7444A9E0DD1D375@caemsx03.cae.ca>
Message-ID: <931f8ea90502080755c0d824c@mail.gmail.com>

On Tue, 8 Feb 2005 10:46:54 -0500, Stephane Routelous <route@cae.com> wrote:
> Hi,
> 
> I have a stackoverflow in GDAL when I read an asciigrid.
> the proble is that I have an asciigrid with ~2800 lines.
> I'm trying to access the last line (nBlockYOff = 2800 in
> AAIGRasterBand::IReadBlock )
> Because the other lines are not read (reading line 2800 is my only call),
> the function recusively read the other lines.
> And this causes a stack overflow.
> Is it possible to use another way in the AAIGRasterBand::IReadBlock
> implementation ?

Stephane, 

Ah yes, the risks of tail recursion. 

If you submit a bugzilla entry on this, I'll try and fix it promptly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From route at cae.com  Tue Feb  8 11:02:22 2005
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] crash when reading an ASCIIGRID
Message-ID: <719A38AB7279D511B91900D0B7444A9E0DD1D376@caemsx03.cae.ca>

Hi Frank,

thanks,

I entered it in bugzilla (#766)

Stephane

-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com]
Sent: Tuesday, February 08, 2005 10:55 AM
To: Stephane Routelous
Cc: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] crash when reading an ASCIIGRID


On Tue, 8 Feb 2005 10:46:54 -0500, Stephane Routelous <route@cae.com> wrote:
> Hi,
> 
> I have a stackoverflow in GDAL when I read an asciigrid.
> the proble is that I have an asciigrid with ~2800 lines.
> I'm trying to access the last line (nBlockYOff = 2800 in
> AAIGRasterBand::IReadBlock )
> Because the other lines are not read (reading line 2800 is my only call),
> the function recusively read the other lines.
> And this causes a stack overflow.
> Is it possible to use another way in the AAIGRasterBand::IReadBlock
> implementation ?

Stephane, 

Ah yes, the risks of tail recursion. 

If you submit a bugzilla entry on this, I'll try and fix it promptly.

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From MChapman at sanz.com  Tue Feb  8 11:59:17 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] MrSID performance
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFF8C@mailman>

I've seen some postings about MrSID performance.  It's really really
slow on Windows.  Are there any plans to improve the performance of the
driver implementation?
 
Martin Chapman
Cell 303-885-1936
Office 303-495-6300 x326
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050208/546a9f8a/attachment.html
From fwarmerdam at gmail.com  Tue Feb  8 12:27:06 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] MrSID performance
In-Reply-To: <ED3A48B9840E594890A2BC172D11946501CFFF8C@mailman>
References: <ED3A48B9840E594890A2BC172D11946501CFFF8C@mailman>
Message-ID: <931f8ea90502080927cbf6c07@mail.gmail.com>

On Tue, 8 Feb 2005 09:59:17 -0700, Chapman, Martin <MChapman@sanz.com> wrote:
>  
> I've seen some postings about MrSID performance.  It's really really slow on
> Windows.  Are there any plans to improve the performance of the driver
> implementation? 

Martin, 

I looked at the MrSID driver code on behalf of another client and it
seems the new DSDK 4 version of the driver always does block oriented
reads (of whole scanlines).    This will clearly need to be fixed.  

However, Andrey is very busy these days, and I am doubtful that
he will have the time to fix this in the near term.  I may have to 
re-implement this part myself, but I am not sure when it will get to
the top of my stack .

So, yes, clearly something needs to be done, and eventually will.
I'm not exactly sure when though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Tue Feb  8 12:41:25 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Error code in TIGER 2004 --> ESRI shape file conversion
In-Reply-To: <OFB8ED7E3E.56D630F1-ON85256FA2.004E7ABE@r4.fws.gov>
References: <OFB8ED7E3E.56D630F1-ON85256FA2.004E7ABE@r4.fws.gov>
Message-ID: <931f8ea905020809416bfabab1@mail.gmail.com>

On Tue, 8 Feb 2005 09:45:49 -0500, Doug_Newcomb@fws.gov
<Doug_Newcomb@fws.gov> wrote:
> Hi Folks,
>       Ran
>   ogr2ogr -f "ESRI Shapefile" tgr37001rt2b.shp TGR37001.RT2
> 
>   with FWtools 0.95 on a windows 2000 on a 2004 TIGER file downloaded from
> the Census . Seemed to create the shape file ok, but gave the following
> error message:
> 
> ERROR 6: Can't create fields of type IntegerList on shapefile layers.
> 
>       The same message occurs when running on linux with GDAL 1.2.4  and on
> WindowsXP with data for Georgia.
> 
>       I thought shape files could only do Integer, Float, or String fields.
> Does the IntegerList need to be converted to a String field for shape file
> conversion? ( If that would be a valid generalization, showing my ignorance
> of the TIGER format).   Just wanted to check the list to see if there was
> something blindingly obvious that I was not doing before I entered it on
> Bugzilla.

Doug, 

This is not a bug, it is a limitation of shapefile format.  The normal
way of dealing with this is to use the -skipfailures option for ogr2ogr.
This will allow ogr2ogr to continue though you will be losing the 
integerlist field(s).   I don't think they are anything to critical. 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Tue Feb  8 14:19:02 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ogr2ogr, postgis, s57 & enforce_dims_wkb_geometry
In-Reply-To: <17b3b95269f8378e39e3939e03a7c864@pvv.ntnu.no>
References: <17b3b95269f8378e39e3939e03a7c864@pvv.ntnu.no>
Message-ID: <931f8ea9050208111968619837@mail.gmail.com>

On Tue, 8 Feb 2005 12:11:54 +0100, Tore Halset <halset@pvv.ntnu.no> wrote:
> Hello.
> 
> I have installed the following on my mac with Mac OS X 10.3.7:
> postgresql-8.0.1
> postgis-1.0.0-rc2
> gdal-1.2.5
> 
> I am trying to load a single S-57 cell into the database, but the first
> insert fails.
> LOG:  statement: INSERT INTO "airare" (wkb_geometry , "rcid", "prim",
> "grup", "objl", "rver", "agen", "fidn", "fids", "lnam", "catair",
> "scamin") VALUES (GeometryFromText('POINT (15.47197780
> 78.24509130)'::TEXT,1) , 684, 1, 2, 2, 1, 340, 1334049, 50002,
> '015400145B21C352', '2', 270000)
> ERROR:  new row for relation "airare" violates check constraint
> "enforce_dims_wkb_geometry"
> 
> This is the same error with another cell:
> LOG:  statement: INSERT INTO "achare" (wkb_geometry , "rcid", "prim",
> "grup", "objl", "rver", "agen", "fidn", "fids", "lnam", "catach",
> "status", "scamin") VALUES (GeometryFromText('POINT (16.82046390
> 77.82454520)'::TEXT,1) , 476, 1, 2, 4, 1, 340, 953081, 50004,
> '0154000E8AF9C354', '1', '3', 360000)
> ERROR:  new row for relation "achare" violates check constraint
> "enforce_dims_wkb_geometry"
> 
> The enforce_dims_wkb_geometry constraint are equal in airare and achare:
>      "enforce_dims_wkb_geometry" CHECK (ndims(wkb_geometry) = 3)
> 
> Anyone knows how this can be fixed?

Tore, 

As I read this, PostGIS is now requiring a 0.0 Z coordinate on the
WKT for geometries inserted in a 3D geometry column.  Is that right?

If so, this is quite annoying.  Currently the OGRGeometry class
freely produces (x,y) style WKT if the Z coordinate is zero. In fact, 
internally it doesn't even carry around a dimension.  It just checks
for non-zero Z values.  While this can be construed as a failure of
OGR, I am not convinced that particularly tight rules were ever 
available for 3D geometries in the simple features model since the
simple features model was originally 2D only. 

However, none of that necessarily matters to you.  You just want to
load some data into PostGIS.  That temporary workaround is to 
dump your data to a shapefile with ogr2ogr and then use the PostGIS
shapefile loader to load it.  However, as with the tiger->shapefile 
problem earlier today, you will find you need to use -skipfailures and
will lose a few esoteric attributes if you go via shapefile. 

The long term solution may mean I need to really keep track of
dimension in OGR or at least somehow hack the PostGIS driver
to force geometries to match the dimension of the table. 

You might also find that you can reload the PostGIS SQL with
this constraint removed.  I have had some success with this
approach in the past. 

I would appreciate it if you could submit a bugzilla bug against
OGR on this issue. 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Feb  8 14:32:19 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] #gdal IRC Channel 
Message-ID: <420913C3.8010404@pobox.com>

Folks,

Howard Butler has setup a #gdal irc channel on irc.freenode.net.  I will try
to hang out there (as well as #mapserver).  There should also be GDAL commit
messages directed to #gdal now.

I'll be there under the FrankW handle.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From eric at 21csi.com  Tue Feb  8 15:58:40 2005
From: eric at 21csi.com (Eric Lindahl)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] DBDB-V format
Message-ID: <000501c50e20$f7a42800$6501a8c0@21csi.com>

Hi,
 
I can't readily tell if there is a way to read DBDB-V bathymetric data
with GDAL.
 
Anyone done this or have pointers?
 
Thanks!
-Eric
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050208/49cddd57/attachment.html
From fwarmerdam at gmail.com  Tue Feb  8 16:06:15 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] DBDB-V format
In-Reply-To: <000501c50e20$f7a42800$6501a8c0@21csi.com>
References: <000501c50e20$f7a42800$6501a8c0@21csi.com>
Message-ID: <931f8ea905020813065b38d14d@mail.gmail.com>

On Tue, 8 Feb 2005 14:58:40 -0600, Eric Lindahl <eric@21csi.com> wrote:
>  
> Hi, 
>   
> I can't readily tell if there is a way to read DBDB-V bathymetric data with
> GDAL. 
>   
> Anyone done this or have pointers? 

Eric, 

I gather that DBDB-V is distributed in netCDF format, is that right? 
I also see that some such data is provided with a DODS interface.

I am not sure if the GDAL NetCDF reader would support DBDB-V
files - there are significant limitations on it.  However, the GDAL DODS
driver should be able to read it from any DODS server serving it. 

I would add that the FWTools binaries for Linux include DODS support
though I don't think my windows binaries do. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Donald.W.Johnson at mvk02.usace.army.mil  Tue Feb  8 16:19:28 2005
From: Donald.W.Johnson at mvk02.usace.army.mil (Johnson,
	Donald W MVK Contractor)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Finding the row and column in a Raster that includes a
	point
Message-ID: <67E7BC077964564C89D20FE0EDA30BE50C561C@MVK-ML01VIC.mvk.ds.usace.army.mil>


I am trying to find the row and column in a raster that contain certain
points my current code 
Is as follows. In case anyone wonders this code is trying to find what cells
in a DEM are covered by a stream who's data points where stored in a .shp
file.


double prj[6];
	
WaterElevation.GetGeoTransform(prj);

double x_delta;
double y_delta;
	
for( unsigned long i = 0; i < points.size(); ++i )
{


	// prj[2] == 0 && prj[4] == 0
	x_delta = points.get_data()[i].get_x() - prj[0];
	y_delta = points.get_data()[i].get_y() - prj[3];

	x_delta /= prj[1];
	y_delta /= prj[5];

	r = (long) y_delta;
	c = (long) x_delta;

	// use row and column
}

This appears to work. However by closly examining my output files I have
found the calculated row position is inncorrect. The row value is initaly
correct for points whose y value is near prj[3] however the r value is
increasingly over estimated as the y value of p[i] moves away from prj[3].
Can anyone tell what I am doing wrong?

Also does GDAL have issues with large files? RasterIO returns CPL_Failure
when I try to read and ESRI grid that is 3.7 gigs. The code works fine on
smaller surfaces.

Thank You
Donald J

 

From bclay at ball.com  Tue Feb  8 17:20:12 2005
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] gDAL --> DIB
Message-ID: <C482FF98AE985A47B8C982FD429C9E34058814@daytonmsg2k3.AERO.BALL.COM>

A question of Alain Rist or anyone that has been able to get the
CreateDibFromFile method he posted to work.

 

I can load the images and display them in an MFC application but the
images are mostly white with very few features showing as compared to
looking at the same image in imageLinker or iView.

 

Does anyone have any thoughts as to what could be causing this or
another method that might be used with windows apps to display GDAL
data?

 

Thanks for your help

 

Bruce

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050208/4102086f/attachment.html
From fwarmerdam at gmail.com  Tue Feb  8 17:37:27 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] gDAL --> DIB
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34058814@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34058814@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <931f8ea9050208143766173ca3@mail.gmail.com>

On Tue, 8 Feb 2005 17:20:12 -0500, Clay, Bruce <bclay@ball.com> wrote:
>  
> A question of Alain Rist or anyone that has been able to get the
> CreateDibFromFile method he posted to work. 
> 
> I can load the images and display them in an MFC application but the images
> are mostly white with very few features showing as compared to looking at
> the same image in imageLinker or iView. 
> 
> Does anyone have any thoughts as to what could be causing this or another
> method that might be used with windows apps to display GDAL data? 

Bruce, 

One obvious possible reason would be if you were loading 16bit
data files.  All values larger than 255 would by truncated to 255. 
However, I think you will need to provide some more information
in order to get a concrete answer.  

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ar at navpoch.com  Tue Feb  8 19:18:47 2005
From: ar at navpoch.com (Alain Rist)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] gDAL --> DIB
References: <C482FF98AE985A47B8C982FD429C9E34058814@daytonmsg2k3.AERO.BALL.COM>
	<931f8ea9050208143766173ca3@mail.gmail.com>
Message-ID: <00fa01c50e3c$ed0372e0$0201a8c0@STATIONALAIN>

Hi Bruce,

As Frank says all that is done by GDALCreateDib is call poDataset->GetRasterBand()->RasterIO() and cleanly fill a DIB with the result of these calls.

How RasterIO deals with size shrinks is a GDAL problem ;-)

BTW there is a (very) small bug in the code I posted at http://article.gmane.org/gmane.comp.gis.gdal.devel/2269/ . If someone requests I can post an updated version.

The XP GDI+ library is much more powerful than GDI. If you write a CGdalImage class derived from CImage, I will be glad to use it.

cheers
AR

----- Original Message ----- 
From: "Frank Warmerdam" <fwarmerdam@gmail.com>
To: "Clay, Bruce" <bclay@ball.com>
Cc: <gdal-dev@xserve.flids.com>
Sent: Tuesday, February 08, 2005 11:37 PM
Subject: Re: [Gdal-dev] gDAL --> DIB


> On Tue, 8 Feb 2005 17:20:12 -0500, Clay, Bruce <bclay@ball.com> wrote:
>>  
>> A question of Alain Rist or anyone that has been able to get the
>> CreateDibFromFile method he posted to work. 
>> 
>> I can load the images and display them in an MFC application but the images
>> are mostly white with very few features showing as compared to looking at
>> the same image in imageLinker or iView. 
>> 
>> Does anyone have any thoughts as to what could be causing this or another
>> method that might be used with windows apps to display GDAL data? 
> 
> Bruce, 
> 
> One obvious possible reason would be if you were loading 16bit
> data files.  All values larger than 255 would by truncated to 255. 
> However, I think you will need to provide some more information
> in order to get a concrete answer.  
> 
> Best regards,
> 
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050209/91d58dd9/attachment.html
From pierocavalieri at tiscali.it  Wed Feb  9 03:15:46 2005
From: pierocavalieri at tiscali.it (pierocavalieri@tiscali.it)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Mail Delivery (failure gdal-dev@remotesensing.org)
Message-ID: <20050209071014.45328651120@xserve.flids.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: audio/x-wav
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050209/1a6b807c/attachment.wav
From carueda at ucdavis.edu  Wed Feb  9 02:56:13 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Re: Finding the row and column in a Raster that includes
	a point
In-Reply-To: <67E7BC077964564C89D20FE0EDA30BE50C561C@MVK-ML01VIC.mvk.ds.usace.army.mil>
References: <67E7BC077964564C89D20FE0EDA30BE50C561C@MVK-ML01VIC.mvk.ds.usace.army.mil>
Message-ID: <cucfk3$qid$1@sea.gmane.org>

Donald,

You may want to look at:
    http://gdal.org/gdal_building.html#largefiles

good luck,
carlos

Johnson, Donald W MVK Contractor wrote:
[...]
> 
> Also does GDAL have issues with large files? RasterIO returns CPL_Failure
> when I try to read and ESRI grid that is 3.7 gigs. The code works fine on
> smaller surfaces.
> 
> Thank You
> Donald J
> 
>  


From fwarmerdam at gmail.com  Wed Feb  9 10:11:58 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Finding the row and column in a Raster that includes a
	point
In-Reply-To: <67E7BC077964564C89D20FE0EDA30BE50C561C@MVK-ML01VIC.mvk.ds.usace.army.mil>
References: <67E7BC077964564C89D20FE0EDA30BE50C561C@MVK-ML01VIC.mvk.ds.usace.army.mil>
Message-ID: <931f8ea905020907111a405cf0@mail.gmail.com>

On Tue, 8 Feb 2005 15:19:28 -0600, Johnson,  Donald W MVK Contractor
<Donald.W.Johnson@mvk02.usace.army.mil> wrote:
> This appears to work. However by closly examining my output files I have
> found the calculated row position is inncorrect. The row value is initaly
> correct for points whose y value is near prj[3] however the r value is
> increasingly over estimated as the y value of p[i] moves away from prj[3].
> Can anyone tell what I am doing wrong?

Donald, 

I don't know why this would be wrong.  My guess would be that there
is something wrong with the geotransform for your file.  How much is it off
by the time to get to the bottom off the image?  One pixel?  Much more? 

 
> Also does GDAL have issues with large files? RasterIO returns CPL_Failure
> when I try to read and ESRI grid that is 3.7 gigs. The code works fine on
> smaller surfaces.

Some formats use the "large file api" and support large files.  Others do
not.  The Arc/Info binary grid format does not currently support files larger
than 2GB.  If you were to provide me a sample of such a grid on a DVD 
I would be willing (eventually) to update the grid code to use the large
file API.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wlyons at prologic-inc.com  Wed Feb  9 14:50:26 2005
From: wlyons at prologic-inc.com (William Lyons)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] RGB Palette to RGB data?
Message-ID: <2DBB9F887DAA394FA75D98474EA5730DEC8E03@vader.prologic-inc.com>

Hi Frank and List,

 

I have a dataset which has one PaletteIndex band which maps to an RGB
color table.  Is it possible to have GDAL convert that to a dataset with
red, green, & blue bands?

 

Thanks,

 

William Lyons

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050209/66a0d129/attachment.html
From starged at videotron.ca  Thu Feb 10 00:19:32 2005
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] RGB Palette to RGB data?
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730DEC8E03@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730DEC8E03@vader.prologic-inc.com>
Message-ID: <ekrl01lf48utd2kd9lh5v51o1b4v55pic0@4ax.com>

Hi William,

On Wed, 09 Feb 2005 14:50:26 -0500, William Lyons <wlyons@prologic-inc.com> wrote:

>I have a dataset which has one PaletteIndex band which maps to an RGB
>color table.  Is it possible to have GDAL convert that to a dataset with
>red, green, & blue bands?

You can try with the script pct2rgb.py. I don't know if there is another way.

Hope it helps.
--
Mario B.
Landsat images (demo):
http://pages.infinit.net/starged/landsat/home.htm

From halset at pvv.ntnu.no  Thu Feb 10 09:03:35 2005
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ogr2ogr, postgis, s57 & enforce_dims_wkb_geometry
In-Reply-To: <931f8ea9050208111968619837@mail.gmail.com>
References: <17b3b95269f8378e39e3939e03a7c864@pvv.ntnu.no> 
	<931f8ea9050208111968619837@mail.gmail.com>
Message-ID: <01d1c960e23ca037115bbbbacc63c317@pvv.ntnu.no>

On Feb 8, 2005, at 20:19, Frank Warmerdam wrote:

> As I read this, PostGIS is now requiring a 0.0 Z coordinate on the
> WKT for geometries inserted in a 3D geometry column.  Is that right?

Looks like it. I asked the postgis list and strk answered:
http://postgis.refractions.net/pipermail/postgis-users/2005-February/ 
006936.html

  - Tore.


From sp_ml at sourcepole.com  Thu Feb 10 11:02:04 2005
From: sp_ml at sourcepole.com (Pirmin Kalberer)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Compilation with Xerces 2.6 on Redhat 9
Message-ID: <200502101702.04259.sp_ml@sourcepole.com>

Hi,

Configuring gdal 1.2.5 with Xerces 2.6.0 ends up with the following messages:

...
checking for Xerces C++... requested, but compile or link fails!
 
g++ -I/usr/include -I/usr/include/xercesc -o conftest conftest.cpp -L/usr/lib 
-lxerces-c -lpthread -lz -lm -ldl
 
/usr/bin/ld: warning: libstdc++.so.6, needed by /usr/lib/libxerces-c.so, may 
conflict with libstdc++.so.5
 
configure: error: Please correct Xerces options, or don't enable Xerces.


Versions:

[root@localhost root]# rpm -qa | grep libstdc
libstdc++-ssa-3.5ssa-0.20030801.41
libstdc++-3.2.3-20
libstdc++-devel-3.2.3-20
libstdc++-ssa-devel-3.5ssa-0.20030801.41
compat-libstdc++-devel-7.3-2.96.122
compat-libstdc++-7.3-2.96.122
libstdc++-3.4.2-6.fc3
[root@localhost root]# rpm -qa | grep xerces
xerces-c-devel-2.6.0-0.fdr.0.pm.0.3
xerces-j-2.2.1-11
xerces-c-doc-2.6.0-0.fdr.0.pm.0.3
xerces-c-2.6.0-0.fdr.0.pm.0.3
xerces-c-debuginfo-2.6.0-0.fdr.0.pm.0.3


Any hints?

-- 
Pirmin Kalberer
Sourcepole  -  Linux & Open Source Solutions
http://www.sourcepole.com

From fwarmerdam at gmail.com  Thu Feb 10 11:32:03 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Compilation with Xerces 2.6 on Redhat 9
In-Reply-To: <200502101702.04259.sp_ml@sourcepole.com>
References: <200502101702.04259.sp_ml@sourcepole.com>
Message-ID: <931f8ea905021008326a81a99e@mail.gmail.com>

On Thu, 10 Feb 2005 17:02:04 +0100, Pirmin Kalberer
<sp_ml@sourcepole.com> wrote:
> Hi,
> 
> Configuring gdal 1.2.5 with Xerces 2.6.0 ends up with the following messages:
> 
> ...
> checking for Xerces C++... requested, but compile or link fails!
> 
> g++ -I/usr/include -I/usr/include/xercesc -o conftest conftest.cpp -L/usr/lib
> -lxerces-c -lpthread -lz -lm -ldl
> 
> /usr/bin/ld: warning: libstdc++.so.6, needed by /usr/lib/libxerces-c.so, may
> conflict with libstdc++.so.5
> 
> configure: error: Please correct Xerces options, or don't enable Xerces.

Pirmin, 

I would suggest recompiling Xerces locally with whatever compiler you are
using for GDAL.  I suppose this might be messy if you are determined to 
operate from RPMs. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From kruland at ku.edu  Thu Feb 10 14:43:21 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Is there any work on the python wrapper
Message-ID: <420BB959.8010103@ku.edu>

Hi all.

I seem to recall that someone on this list had been working on changes 
to the python wrapper to support more python-esque list manipulation.  
Is this correct?

Thanks much.

Kevin Ruland
University of Kansas


From hobu at iastate.edu  Thu Feb 10 15:51:51 2005
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Is there any work on the python wrapper
In-Reply-To: <420BB959.8010103@ku.edu>
References: <420BB959.8010103@ku.edu>
Message-ID: <6.1.2.0.2.20050210144449.01cbc428@hobu.mail.iastate.edu>

Kevin,

Yes.  I am working on the ogr python bindings to provide a more natural 
interface (in the python sense) to DataSources, Layers, Features, and 
Geometries in ogr.py.

You can follow the thread in the archives at: 
<http://xserve.flids.com/pipermail/gdal-dev/2005-February/007983.html>

Some of these additions will be released when 1.2.6 comes out.  We will 
retract the sequential access to features (how feature slicing of a layer 
is currently implemented) until I can come up with a clean way to support 
the GetNextFeature() interface with an iterator that is backward compatible 
to Python 2.0.

I've also added a way to conveniently test capabilities (you don't have to 
lookup or remember the strings anymore), docstrings, attribute access for 
Features (feat.mycolumn, etc.), enhanced the Geometry constructor, and 
implemented __copy__ methods to support the Python copy module.

Howard

At 01:43 PM 2/10/2005, Kevin Ruland wrote:
>Hi all.
>
>I seem to recall that someone on this list had been working on changes to 
>the python wrapper to support more python-esque list manipulation.
>Is this correct?
>
>Thanks much.
>
>Kevin Ruland
>University of Kansas
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@xserve.flids.com
>http://xserve.flids.com/mailman/listinfo/gdal-dev


From dylan at iici.no-ip.org  Thu Feb 10 16:09:31 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Is there any work on the python wrapper
In-Reply-To: <6.1.2.0.2.20050210144449.01cbc428@hobu.mail.iastate.edu>
References: <420BB959.8010103@ku.edu>
	<6.1.2.0.2.20050210144449.01cbc428@hobu.mail.iastate.edu>
Message-ID: <200502101309.31595.dylan@iici.no-ip.org>

Howard,

This is great news. Thanks for spending the time on this. 

Dylan

On Thursday 10 February 2005 12:51 pm, Howard Butler wrote:
> Kevin,
>
> Yes.  I am working on the ogr python bindings to provide a more natural
> interface (in the python sense) to DataSources, Layers, Features, and
> Geometries in ogr.py.
>
> You can follow the thread in the archives at:
> <http://xserve.flids.com/pipermail/gdal-dev/2005-February/007983.html>
>
> Some of these additions will be released when 1.2.6 comes out.  We will
> retract the sequential access to features (how feature slicing of a layer
> is currently implemented) until I can come up with a clean way to support
> the GetNextFeature() interface with an iterator that is backward compatible
> to Python 2.0.
>
> I've also added a way to conveniently test capabilities (you don't have to
> lookup or remember the strings anymore), docstrings, attribute access for
> Features (feat.mycolumn, etc.), enhanced the Geometry constructor, and
> implemented __copy__ methods to support the Python copy module.
>
> Howard
>
> At 01:43 PM 2/10/2005, Kevin Ruland wrote:
> >Hi all.
> >
> >I seem to recall that someone on this list had been working on changes to
> >the python wrapper to support more python-esque list manipulation.
> >Is this correct?
> >
> >Thanks much.
> >
> >Kevin Ruland
> >University of Kansas
> >
> >_______________________________________________
> >Gdal-dev mailing list
> >Gdal-dev@xserve.flids.com
> >http://xserve.flids.com/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From jdenisgiguere at fastmail.fm  Thu Feb 10 16:49:27 2005
From: jdenisgiguere at fastmail.fm (Jean-Denis Giguere)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ogr2ogr and postgis arbitrary third dimension (mapserver
	related)
Message-ID: <420BD6E7.5090400@fastmail.fm>


I used ogr2ogr (GDAL 1.2.5.0, released 2004/11/22) to translate 2d data 
from Arc/Info Coverage to PostGIS database. I don't know why, but a 
third coordinate appears in my PostGIS database. This should not be so 
problematic since I know that the third coordinnate is not 
representative. But, I have a problem when I want to map this data with 
Mapserver because the request :
SELECT 
asbinary(force_collection(force_2d(wkb_geometry)),'NDR'),OID::text from 
habit_p_ll WHERE wkb_geometry && setSRID('BOX3D(38.5633333333333 
-79.77,69.0166666666667 -56.93)'::BOX3D, 
find_srid('','habit_p_ll','wkb_geometry') )
return 0 feature. The BOX3D produced has z=0.

I think that mapserver should not suppose that data are at sea level, 
but I don't understand the arbitrary value of z introduced by ogr2ogr.

Greetings,

Jean-Denis

These come from orginfo on both dataset.

OGRFeature(LAB):753
   ValueId (Integer) = 753
   PolyId (Integer) = 0
   AREA (Real) =        0.000
   PERIMETER (Real) =        0.000
   HABIT_P_LL# (Integer) = 753
   HABIT_P_LL-ID (Integer) = 753
   HABIT_P_ (Real) =         753
   HABIT_P_ID (Real) =        3290
   HAP_CO_PRE (String) = PRE
   HAP_NO_IND (String) = 03 63 0000 001
   HAP_DE_IND (String) = Lieu habit?
   HAP_CO_CLA (String) = SEC
   HAP_CO_TOP (String) =
   HAP_NM_TOP (String) = Sturgeon Falls
   HAP_DA_TOP (String) =        0
   HAP_CO_VER (String) = BDGA1M v1.1
   HAP_DA_MOD (String) =        0
   INT_AFF (String) = 2M
   POINT (-79.93342590 46.36622238)

OGRFeature(habit_p_ll):753
   valueid (Integer) = 753
   polyid (Integer) = 0
   area (Real) =        0.000
   perimeter (Real) =        0.000
   habit_p_ll_ (Integer) = (null)
   habit_p_ll_id (Integer) = (null)
   habit_p_ (Real) = 753
   habit_p_id (Real) = 3290
   hap_co_pre (String) = PRE
   hap_no_ind (String) = 03 63 0000 001
   hap_de_ind (String) = Lieu habit?
   hap_co_cla (String) = SEC
   hap_co_top (String) =
   hap_nm_top (String) = Sturgeon Falls
   hap_da_top (String) =        0
   hap_co_ver (String) = BDGA1M v1.1
   hap_da_mod (String) =        0
   int_aff (String) = 2M
   POINT (-79.93342590 46.36622246 2.005)

-- 
Jean-Denis Gigu?re
?tudiant en g?omatique
appliqu?e ? l'environnement
Stagiaire ? l'Agence de d?veloppement
de r?seaux locaux de services de sant?
et de services sociaux de l'Estrie
T?l. 829-3400 42008
Courriel. jdenisgiguere@fastmail.fm

From fwarmerdam at gmail.com  Thu Feb 10 17:12:06 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ogr2ogr and postgis arbitrary third dimension
	(mapserver related)
In-Reply-To: <420BD6E7.5090400@fastmail.fm>
References: <420BD6E7.5090400@fastmail.fm>
Message-ID: <931f8ea905021014123f6b50a4@mail.gmail.com>

On Thu, 10 Feb 2005 16:49:27 -0500, Jean-Denis Giguere
<jdenisgiguere@fastmail.fm> wrote:
...
>    int_aff (String) = 2M
>    POINT (-79.93342590 46.36622246 2.005)

Jean-Denis, 

That is strange.  I don't know how you would end up with Z values
in geometry read from the AVC reader.  I reviewed the code again
to be sure, and I don't see how this would happen. 

If you can provide the dataset in question, I could try and reproduce
this.  Do the Z values show up in ogrinfo reports on the dataset? 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jdenisgiguere at fastmail.fm  Thu Feb 10 17:28:29 2005
From: jdenisgiguere at fastmail.fm (Jean-Denis Giguere)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ogr2ogr and postgis arbitrary third dimension
	(mapserver related)
In-Reply-To: <931f8ea905021014123f6b50a4@mail.gmail.com>
References: <420BD6E7.5090400@fastmail.fm>
	<931f8ea905021014123f6b50a4@mail.gmail.com>
Message-ID: <420BE00D.8040202@fastmail.fm>

Frank Warmerdam wrote:
> On Thu, 10 Feb 2005 16:49:27 -0500, Jean-Denis Giguere
> <jdenisgiguere@fastmail.fm> wrote:
> ...
> 
>>   int_aff (String) = 2M
>>   POINT (-79.93342590 46.36622246 2.005)
> 
> 
> Jean-Denis, 
> 
> That is strange.  I don't know how you would end up with Z values
> in geometry read from the AVC reader.  I reviewed the code again
> to be sure, and I don't see how this would happen. 
> 
> If you can provide the dataset in question, I could try and reproduce
> this.  Do the Z values show up in ogrinfo reports on the dataset? 


You can download an ARC/INFO interchange file here 
ftp://ftp.mrn.gouv.qc.ca/Public/Dgig/Produits/bdga1m/vectoriel/habit_p.zip

I used avcimport to produce de Arc/Info Coverage.



Sorry, I don't explain very well my ogrinfo outputs.

The first output was obtained by
$ ogrinfo /home/data/limites_qc/habit_p_ll/ lab
(where /home/data/limites_qc/habit_p_ll/ is a Arc/Info coverage)

The second was obtained by
$ ogrinfo PG:'dbname=prepa' habit_p_ll
(Where habit_p_ll is the database table obtained with ogr2ogr directly 
from the coverage describe above)

When I query my batabase with psql, I get exactly the same coordinate 
that orginfo.


Hope this help,


Jean-Denis

From kruland at ku.edu  Thu Feb 10 21:10:56 2005
From: kruland at ku.edu (Kevin Ruland)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Is there any work on the python wrapper
In-Reply-To: <6.1.2.0.2.20050210144449.01cbc428@hobu.mail.iastate.edu>
References: <420BB959.8010103@ku.edu>
	<6.1.2.0.2.20050210144449.01cbc428@hobu.mail.iastate.edu>
Message-ID: <420C1430.70207@ku.edu>


Howard,

Thanks much for this information.  My question was of course leading and 
I too have been mucking about the innards altough in a completely 
different way.  I am attempting to get GDAL to work correctly with 
Numarray arrays.  I have something working now, but it isn't pretty, and 
it isn't tied in well with the rest of the GDAL bindings.

Kevin

Howard Butler wrote:

> Kevin,
>
> Yes.  I am working on the ogr python bindings to provide a more 
> natural interface (in the python sense) to DataSources, Layers, 
> Features, and Geometries in ogr.py.
>
> You can follow the thread in the archives at: 
> <http://xserve.flids.com/pipermail/gdal-dev/2005-February/007983.html>
>
> Some of these additions will be released when 1.2.6 comes out.  We 
> will retract the sequential access to features (how feature slicing of 
> a layer is currently implemented) until I can come up with a clean way 
> to support the GetNextFeature() interface with an iterator that is 
> backward compatible to Python 2.0.
>
> I've also added a way to conveniently test capabilities (you don't 
> have to lookup or remember the strings anymore), docstrings, attribute 
> access for Features (feat.mycolumn, etc.), enhanced the Geometry 
> constructor, and implemented __copy__ methods to support the Python 
> copy module.
>
> Howard
>
> At 01:43 PM 2/10/2005, Kevin Ruland wrote:
>
>> Hi all.
>>
>> I seem to recall that someone on this list had been working on 
>> changes to the python wrapper to support more python-esque list 
>> manipulation.
>> Is this correct?
>>
>> Thanks much.
>>
>> Kevin Ruland
>> University of Kansas
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@xserve.flids.com
>> http://xserve.flids.com/mailman/listinfo/gdal-dev
>
>


From gillian.walter at atlantis-scientific.com  Fri Feb 11 09:14:17 2005
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] compile problems
Message-ID: <420CBDB9.4080204@atlantis-scientific.com>

Hi,

I just updated gdal from cvs, and ogr_srs_api.h seems to be missing 
defines for:

SRS_PT_GEOSTATIONARY_SATELLITE
SRS_PP_SATELLITE_HEIGHT

Even once I tried adding these though (assuming 
"Geostationary_Satellite" and "satellite_height"), ogr_srs_proj4.cpp 
still couldn't find a definition for SetGEOS.  It didn't seem to be 
defined in any of the other files under gdal.  Are there some files that 
got missed in a commit?

Gillian



From fwarmerdam at gmail.com  Fri Feb 11 09:20:07 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] compile problems
In-Reply-To: <420CBDB9.4080204@atlantis-scientific.com>
References: <420CBDB9.4080204@atlantis-scientific.com>
Message-ID: <931f8ea90502110620ec1d153@mail.gmail.com>

On Fri, 11 Feb 2005 09:14:17 -0500, Gillian Walter
<gillian.walter@atlantis-scientific.com> wrote:
> Hi,
> 
> I just updated gdal from cvs, and ogr_srs_api.h seems to be missing
> defines for:
> 
> SRS_PT_GEOSTATIONARY_SATELLITE
> SRS_PP_SATELLITE_HEIGHT
> 
> Even once I tried adding these though (assuming
> "Geostationary_Satellite" and "satellite_height"), ogr_srs_proj4.cpp
> still couldn't find a definition for SetGEOS.  It didn't seem to be
> defined in any of the other files under gdal.  Are there some files that
> got missed in a commit?

Gillian,

Sorry about that ... I didn't finish my commit!  It should all be there now. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From lorenzo.moretti at bologna.enea.it  Fri Feb 11 12:02:17 2005
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Error in ogrct.cpp file in ogr folder
Message-ID: <a06200707be328ee83623@[192.107.62.86]>

Hi all

I have a problem with GDAL linked to PROJ library not installed in 
default directory (usr/local).

THIS PROBLEM IS ONLY CONNECTED TO RASTER REPROJECTION. Example in 
THUBAN software (it works with GDAL-OGR) you can reproject vector 
files but with raster you have always this error:

ERROR 6: Unable to load PROJ.4 library (libproj.dylib), creation of
OGRCoordinateTransformation failed.

I have a Mac OS X and in the file ogr/ogrct.cpp row 144-148 I have changed:

   #ifdef WIN32
   #  define LIBNAME      "proj.dll"
   #else
- #  define LIBNAME      "libproj.so"
   #endif

   #ifdef WIN32
   #  define LIBNAME      "proj.dll"
   #else
+ #  define LIBNAME      "libproj.dylib"
   #endif

I have tried in configure 2 way: proj linked normal (default) and 
linked static.

I use GDAL with different software and I built PROJ and GDAL in 
different folders. I use in configure:
--prefix/usr/local/grasslib
or
--prefix/usr/local/thubanlib

and so on.

I have need of different proj and gdal for building stand-alone application.
I don't work in /usr/local standard location.

I have discovered a wrong link inside my libgdal.dylib about the link 
to libproj.dylib library outside normal /usr/local/lib folder.

SITUATION
Now GDAL+PROJ only works for raster projections if PROJ has a sym 
link ALWAYS in:
/usr/local/lib/libproj.dylib
linked to my proj installation outside /usr/local folder

GDAL DOESN'T WORK FOR RASTER PROJECTIONS IF IT DOESN'T SEE THE 
/usr/local/lib/libproj.dylib file (or sym link).

This is an error in GDAL library. GDAL must work outside normal 
/usr/local folder installation.


Bye

-- 
________________________________________________________________________
||      Lorenzo Moretti        e-mail: lorenzo.moretti@bologna.enea.it     
||/|/|  ENEA prot/idr          Web: http://wwwamb.bologna.enea.it/    
||   |  via Don Fiammelli, 2   FTP: ftp://ftpamb.bologna.enea.it/ (ris.)
~~~~~~  40128 BOLOGNA - ITALY  Ph: +39-0516098086  Fax: +39-0516098131
________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050211/94a502b9/attachment.html
From fwarmerdam at gmail.com  Fri Feb 11 12:22:13 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Error in ogrct.cpp file in ogr folder
In-Reply-To: <a06200707be328ee83623@192.107.62.86>
References: <a06200707be328ee83623@192.107.62.86>
Message-ID: <931f8ea9050211092275550582@mail.gmail.com>

On Fri, 11 Feb 2005 18:02:17 +0100, Lorenzo Moretti
<lorenzo.moretti@bologna.enea.it> wrote:
>  
> Hi all 
> 
>  
> I have a problem with GDAL linked to PROJ library not installed in default
> directory (usr/local). 
> 
>  
> THIS PROBLEM IS ONLY CONNECTED TO RASTER REPROJECTION. Example in THUBAN
> software (it works with GDAL-OGR) you can reproject vector files but with
> raster you have always this error: 

Lorenzo, 

I don't know why the problems you are encountering would only affect
rasters, and not vector reprojection. Perhaps it is just that Thuban uses
PROJ.4 or something else directly instead of through ogr for vector
reprojection?
  
> ERROR 6: Unable to load PROJ.4 library (libproj.dylib), creation of 
> OGRCoordinateTransformation failed.
>  
> I have a Mac OS X and in the file ogr/ogrct.cpp row 144-148 I have changed: 
> 
>  
>   #ifdef WIN32 
>   #  define LIBNAME      "proj.dll" 
>   #else 
> - #  define LIBNAME      "libproj.so" 
>   #endif 
> 
>  
>   #ifdef WIN32 
>   #  define LIBNAME      "proj.dll" 
>   #else 
> + #  define LIBNAME      "libproj.dylib" 
>   #endif 

In CVS the code was changed to:

#ifdef WIN32
#  define LIBNAME      "proj.dll"
#elif defined(__APPLE__)
#  define LIBNAME      "libproj.dylib"
#else
#  define LIBNAME      "libproj.so"
#endif

A while ago. 

> I have discovered a wrong link inside my libgdal.dylib about the link to
> libproj.dylib library outside normal /usr/local/lib folder. 

I think you will need to give more specific information. What link line was
used when you built PROJ.4 in statically?  What error message did you
get?  What does the dump of shared library dependencies look like on this
GDAL? 

For the dynamically loaded (default) case, you will need to define the 
PROJSO environment variable to point to the directory where PROJ.4 sits
if it is not in the LD_LIBRARY_PATH or equivelent. 

> This is an error in GDAL library. GDAL must work outside normal /usr/local
> folder installation. 

Oh, that word "must" is so strong.  I don't even let my wife tell me what
I "must" do.  Nevertheless, I am interested in ensuring that GDAL can be used
with PROJ.4 in unusual directories. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From adam at ctech.com  Fri Feb 11 12:31:09 2005
From: adam at ctech.com (Adam Guernsey)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] EPSG file path
Message-ID: <20050211173052.0F61E79DD97@xserve.flids.com>

Hello there,
 
I am looking at implementing the OGRSpatialReference ::importFromEPSG 	(
int 	 nCode 	 ) 	 function.  I have had no problems getting it to
work, however I was wondering if it was possible to change the path to the
csv files that it uses for the lookup.  I am using the release right now,
and would like to do this without altering the source.  
Thanks
 
Adam Guernsey  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050211/9e6354a5/attachment.html
From fwarmerdam at gmail.com  Fri Feb 11 12:49:14 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] EPSG file path
In-Reply-To: <20050211173052.0F61E79DD97@xserve.flids.com>
References: <20050211173052.0F61E79DD97@xserve.flids.com>
Message-ID: <931f8ea9050211094953542271@mail.gmail.com>

Adam,

You can override where this code looks for the EPSG calls by setting the
GEOTIFF_CSV environment variable, or by setting it as a configuration
option from code.

eg. 

  CPLSetConfigOption( "GEOTIFF_CSV", "/my/epsg/csv/directory" );


On Fri, 11 Feb 2005 09:31:09 -0800, Adam Guernsey <adam@ctech.com> wrote:
>  
>  
> Hello there, 
>   
> I am looking at implementing the OGRSpatialReference 
> ::importFromEPSG (  int  nCode  )  function.  I have had no problems getting
> it to work, however I was wondering if it was possible to change the path to
> the csv files that it uses for the lookup.  I am using the release right
> now, and would like to do this without altering the source.   
> Thanks 
>   
> Adam Guernsey  
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 
> 
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From agramusset at geovectra.cl  Fri Feb 11 14:33:57 2005
From: agramusset at geovectra.cl (agramusset@geovectra.cl)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Mail Delivery (failure gdal-dev@remotesensing.org)
Message-ID: <20050211182824.AE83C79E16E@xserve.flids.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: audio/x-wav
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050211/5594c237/attachment.wav
From numerous at gmail.com  Fri Feb 11 16:50:01 2005
From: numerous at gmail.com (Yar)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] MrSID and GDAL on Windows
Message-ID: <loom.20050211T222135-721@post.gmane.org>

Hi, Please Help!!!

I need help with displaying MrSID images on mapserver. I don't need to convert 
MrSID into a different format but display MrSID's on my mapserver. Would anyone 
have a compiled Win32 binary with GDAL and DSDK? I tried downloading fwtools, 
but there is no LizardTech DSDK in there. I realize that DSDK is proprietary 
and comes solely from LizardTech, but would anyone be willing to share his/her 
binaries? I also went here: http://hobu.stat.iastate.edu/mapserver/, but there 
are no clear instructions as to how to make it work.

Also, I'm trying to convert .shp files into .dbf (my .shp is huge, I would like 
to load data from MySQL database)
I got instructions from here: http://mapserver.gis.umn.edu/cgi-bin/wiki.pl?MySQL
But again, there are no clear instructions for Windows. I'm having problems 
with the last step, that is installing Shapelib. I do nmake on my Windows XP 
machine, but then I get all sorts of errors in makefile.pl  

Again, does anyone, by any chance, have clear step-by-step instructions or 
binaries for running shp2mysql.pl on windows? 

I would really appreciate your help! Please feel free to contact me at 
numerous@gmail.com

Yar 


From kmckelvey at lizardtech.com  Fri Feb 11 17:10:28 2005
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] MrSID and GDAL on Windows
Message-ID: <C5B740D9CEC9284A84B767BBD1DAA8465FB4DA@sea-srv-ms2.lizardtech.com>

Yar,

The MrSID DSDK is available for free download at:
 http://developer.lizardtech.com/

Kirk

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com]On Behalf Of Yar
Sent: Friday, February 11, 2005 1:50 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] MrSID and GDAL on Windows


Hi, Please Help!!!

I need help with displaying MrSID images on mapserver. I don't need to convert 
MrSID into a different format but display MrSID's on my mapserver. Would anyone 
have a compiled Win32 binary with GDAL and DSDK? I tried downloading fwtools, 
but there is no LizardTech DSDK in there. I realize that DSDK is proprietary 
and comes solely from LizardTech, but would anyone be willing to share his/her 
binaries? I also went here: http://hobu.stat.iastate.edu/mapserver/, but there 
are no clear instructions as to how to make it work.

Also, I'm trying to convert .shp files into .dbf (my .shp is huge, I would like 
to load data from MySQL database)
I got instructions from here: http://mapserver.gis.umn.edu/cgi-bin/wiki.pl?MySQL
But again, there are no clear instructions for Windows. I'm having problems 
with the last step, that is installing Shapelib. I do nmake on my Windows XP 
machine, but then I get all sorts of errors in makefile.pl  

Again, does anyone, by any chance, have clear step-by-step instructions or 
binaries for running shp2mysql.pl on windows? 

I would really appreciate your help! Please feel free to contact me at 
numerous@gmail.com

Yar 

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From numerous at gmail.com  Fri Feb 11 17:10:56 2005
From: numerous at gmail.com (Yar Doroshenko)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] (no subject)
Message-ID: <f2b52d2b0502111410604110af@mail.gmail.com>

Hi, Please Help!!!

I need help with displaying MrSID images on mapserver. I don't need to
convert MrSID into a different format but display MrSID's on my
mapserver. Would anyone have a compiled Win32 binary with GDAL and
DSDK? I tried downloading fwtools, but there is no LizardTech DSDK in
there. I realize that DSDK is proprietary and comes solely from
LizardTech, but would anyone be willing to share his/her binaries? I
also went here: http://hobu.stat.iastate.edu/mapserver/, but there are
no clear instructions as to how to make it work. It would be awesome
to find a book on this subject or good instructions for Windows.

Also, I'm trying to convert .shp files into .dbf (my .shp is huge, I
would like to load data from MySQL database)
I got instructions from here: http://mapserver.gis.umn.edu/cgi-bin/wiki.pl?MySQL
But again, there are no clear instructions for Windows. I'm having
problems with the last step, that is installing Shapelib. I do nmake
on my Windows XP machine, but then I get all sorts of errors in
makefile.pl

Again, does anyone, by any chance, have clear step-by-step
instructions or binaries for running shp2mysql.pl on windows?

I would really appreciate your help! Please feel free to contact me at
numerous@gmail.com

Yar

From numerous at gmail.com  Fri Feb 11 17:16:43 2005
From: numerous at gmail.com (Yar Doroshenko)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] MrSID and GDAL
Message-ID: <f2b52d2b05021114165ab25540@mail.gmail.com>

Hi, Please Help!!!

I need help with displaying MrSID images on mapserver. I don't need to
convert MrSID into a different format but display MrSID's on my
mapserver. Would anyone have a compiled Win32 binary with GDAL and
DSDK? I tried downloading fwtools, but there is no LizardTech DSDK in
there. I realize that DSDK is proprietary and comes solely from
LizardTech, but would anyone be willing to share his/her binaries? I
also went here: http://hobu.stat.iastate.edu/mapserver/, but there are
no clear instructions as to how to make it work.

Also, I'm trying to convert .shp files into .dbf (my .shp is huge, I
would like to load data from MySQL database)
I got instructions from here: http://mapserver.gis.umn.edu/cgi-bin/wiki.pl?MySQL
But again, there are no clear instructions for Windows. I'm having
problems with the last step, that is installing Shapelib. I do nmake
on my Windows XP machine, but then I get all sorts of errors in
makefile.pl

Again, does anyone, by any chance, have clear step-by-step
instructions or binaries for running shp2mysql.pl on windows?

I would really appreciate your help! Please feel free to contact me at
numerous@gmail.com

Yar

From MChapman at sanz.com  Fri Feb 11 17:41:57 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] MrSID and GDAL
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFFAA@mailman>

Yar,

You need to download the DSDK as Kirk mentioned.  Then go to the gdal
directory and uncomment the config options in the nmake.opt file that
pertain to MRSID driver. Then rebuild gdal using the instructions on the
gdal homepage http://www.gdal.org. I actually updated my mrsid driver
yesterday and it worked fine.  The only note is that the current mrsid
driver implementation in gdal is very slow for known reasons.  Andrey
knows about this issue and is planning to address it this weekend.
However, you should still be able to read mrsid.

If you need more help I am glad to help you out.

Martin

-----Original Message-----
From: Yar Doroshenko [mailto:numerous@gmail.com] 
Sent: Friday, February 11, 2005 3:17 PM
To: gdal-dev@xserve.flids.com
Subject: [Gdal-dev] MrSID and GDAL


Hi, Please Help!!!

I need help with displaying MrSID images on mapserver. I don't need to
convert MrSID into a different format but display MrSID's on my
mapserver. Would anyone have a compiled Win32 binary with GDAL and DSDK?
I tried downloading fwtools, but there is no LizardTech DSDK in there. I
realize that DSDK is proprietary and comes solely from LizardTech, but
would anyone be willing to share his/her binaries? I also went here:
http://hobu.stat.iastate.edu/mapserver/, but there are no clear
instructions as to how to make it work.

Also, I'm trying to convert .shp files into .dbf (my .shp is huge, I
would like to load data from MySQL database) I got instructions from
here: http://mapserver.gis.umn.edu/cgi-bin/wiki.pl?MySQL
But again, there are no clear instructions for Windows. I'm having
problems with the last step, that is installing Shapelib. I do nmake on
my Windows XP machine, but then I get all sorts of errors in makefile.pl

Again, does anyone, by any chance, have clear step-by-step instructions
or binaries for running shp2mysql.pl on windows?

I would really appreciate your help! Please feel free to contact me at
numerous@gmail.com

Yar
_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From asimpson at i-55.com  Sat Feb 12 13:14:51 2005
From: asimpson at i-55.com (Simpson)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] MrSID and GDAL
In-Reply-To: <ED3A48B9840E594890A2BC172D11946501CFFFAA@mailman>
Message-ID: <NFBBKOADOLGDLPMAAHMDIELFCPAA.asimpson@i-55.com>


Greetings,

Is there a commandline utility that will vectorize a raster and will follow
the outside edges of the pixels, rather than the center of each pixel as
gdal_contour does?

Thanks for any info,
Drew.



From asimpson at i-55.com  Sun Feb 13 19:43:04 2005
From: asimpson at i-55.com (Simpson)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] gdal_contour
In-Reply-To: <NFBBKOADOLGDLPMAAHMDIELFCPAA.asimpson@i-55.com>
Message-ID: <NFBBKOADOLGDLPMAAHMDEELKCPAA.asimpson@i-55.com>


repost with corrected 'Subject'...


Greetings,

Is there a commandline utility that will vectorize a raster and will follow
the outside edges of the pixels, rather than the center of each pixel as
gdal_contour does?

Thanks for any info,
Drew.



From fwarmerdam at gmail.com  Sun Feb 13 22:38:15 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] gdal_contour
In-Reply-To: <NFBBKOADOLGDLPMAAHMDEELKCPAA.asimpson@i-55.com>
References: <NFBBKOADOLGDLPMAAHMDIELFCPAA.asimpson@i-55.com>
	<NFBBKOADOLGDLPMAAHMDEELKCPAA.asimpson@i-55.com>
Message-ID: <931f8ea905021319387b352367@mail.gmail.com>

On Sun, 13 Feb 2005 18:43:04 -0600, Simpson <asimpson@i-55.com> wrote:
> 
> repost with corrected 'Subject'...
> 
> Greetings,
> 
> Is there a commandline utility that will vectorize a raster and will follow
> the outside edges of the pixels, rather than the center of each pixel as
> gdal_contour does?

Drew, 

I am not familiar with such a tool within or built on the GDAL library.

Are you wanting something suitable to create a polygon layer from
a classification result?  That is producing a polygon around each 
connected group of pixels with exactly the same values?  Or 
something like contours which generates edge vectors between 
pixels at various breakpoints? 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From asimpson at i-55.com  Mon Feb 14 07:39:34 2005
From: asimpson at i-55.com (Simpson)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] gdal_contour
In-Reply-To: <931f8ea905021319387b352367@mail.gmail.com>
Message-ID: <NFBBKOADOLGDLPMAAHMDCELOCPAA.asimpson@i-55.com>

Frank,

Yes, I am looking for a classification vectorizer.  gdal_contour does an
excellent job and is very fast, but I realize it wasn't designed for this.
I have to buffer the results by half a pixel.

Thanks,
Drew.

-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com]
Sent: Sunday, February 13, 2005 9:38 PM
To: Simpson
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] gdal_contour


On Sun, 13 Feb 2005 18:43:04 -0600, Simpson <asimpson@i-55.com> wrote:
>
> repost with corrected 'Subject'...
>
> Greetings,
>
> Is there a commandline utility that will vectorize a raster and will
follow
> the outside edges of the pixels, rather than the center of each pixel as
> gdal_contour does?

Drew,

I am not familiar with such a tool within or built on the GDAL library.

Are you wanting something suitable to create a polygon layer from
a classification result?  That is producing a polygon around each
connected group of pixels with exactly the same values?  Or
something like contours which generates edge vectors between
pixels at various breakpoints?

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From route at cae.com  Mon Feb 14 12:18:01 2005
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] colorinterp for ECW
Message-ID: <719A38AB7279D511B91900D0B7444A9E0DD1D390@caemsx03.cae.ca>

Hi everybody,

is that normal that 
GDALColorInterp colorInterp =gdalRasterBand->GetColorInterpretation();
for an ECW image returns GCI_Undefined ?

thanks,

Stephane

From fwarmerdam at gmail.com  Mon Feb 14 13:20:18 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] colorinterp for ECW
In-Reply-To: <719A38AB7279D511B91900D0B7444A9E0DD1D390@caemsx03.cae.ca>
References: <719A38AB7279D511B91900D0B7444A9E0DD1D390@caemsx03.cae.ca>
Message-ID: <931f8ea905021410205c763350@mail.gmail.com>

On Mon, 14 Feb 2005 12:18:01 -0500, Stephane Routelous <route@cae.com> wrote:
> Hi everybody,
> 
> is that normal that
> GDALColorInterp colorInterp =gdalRasterBand->GetColorInterpretation();
> for an ECW image returns GCI_Undefined ?

Stephane, 

Till very recently this is what would always happen.  However, just
last week I added a GetColorInterpretation() method on the
ECWRasterBand.  There still might be circumstances in which it would
return undefined, but normally it will now return something appropriate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dblasby at gmail.com  Mon Feb 14 13:45:39 2005
From: dblasby at gmail.com (David Blasby)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] 2004 Tiger with new PostGIS
Message-ID: <89f845e8050214104579679946@mail.gmail.com>

I'm trying to load the new Tiger data into Postgis, and I'm having troubles.

I solved the "constraints" on tables problem - just run the CREATE
FUNCTION statement below - it replaces the addgeometrycolumn function
so that it doesnt add constaints.  Hacky, but it works.

The second problem is with OGR - the altNames table isn't correctly
forming arrays:

LOG:  statement: INSERT INTO "altname" ("module", "tlid", "rtsq",
"feat") VALUES ('TGR11001', 76224848, 1, '{696,702')

the '{696,702' should have a "}" at the end - '{696,702}'.  I dont
want to just ignore errors since I'll lose everything inside the
transaction.

Is it possible to get ogr to spit out sql instead of actually hitting
the database?  That way I can write a perl script to fix the problems.

Anyone else trying to load the 2004 data?

CREATE OR REPLACE FUNCTION
AddGeometryColumn(varchar,varchar,varchar,varchar,integer,varchar,integer)
	RETURNS text
	AS 
'
DECLARE
	catalog_name alias for $1;
	schema_name alias for $2;
	table_name alias for $3;
	column_name alias for $4;
	new_srid alias for $5;
	new_type alias for $6;
	new_dim alias for $7;

	rec RECORD;
	schema_ok bool;
	real_schema name;

	fixgeomres text;

BEGIN

	IF ( not ( (new_type =''GEOMETRY'') or
		   (new_type =''GEOMETRYCOLLECTION'') or
		   (new_type =''POINT'') or 
		   (new_type =''MULTIPOINT'') or
		   (new_type =''POLYGON'') or
		   (new_type =''MULTIPOLYGON'') or
		   (new_type =''LINESTRING'') or
		   (new_type =''MULTILINESTRING'') or
		   (new_type =''GEOMETRYCOLLECTIONM'') or
		   (new_type =''POINTM'') or 
		   (new_type =''MULTIPOINTM'') or
		   (new_type =''POLYGONM'') or
		   (new_type =''MULTIPOLYGONM'') or
		   (new_type =''LINESTRINGM'') or
		   (new_type =''MULTILINESTRINGM'')) )
	THEN
		RAISE EXCEPTION ''Invalid type name - valid ones are: 
			GEOMETRY, GEOMETRYCOLLECTION, POINT, 
			MULTIPOINT, POLYGON, MULTIPOLYGON, 
			LINESTRING, MULTILINESTRING,
			GEOMETRYCOLLECTIONM, POINTM, 
			MULTIPOINTM, POLYGONM, MULTIPOLYGONM, 
			LINESTRINGM, or MULTILINESTRINGM '';
		return ''fail'';
	END IF;

	IF ( (new_dim >4) or (new_dim <0) ) THEN
		RAISE EXCEPTION ''invalid dimension'';
		return ''fail'';
	END IF;

	IF ( (new_type LIKE ''%M'') and (new_dim!=3) ) THEN

		RAISE EXCEPTION ''TypeM needs 3 dimensions'';
		return ''fail'';
	END IF;


	IF ( schema_name != '''' ) THEN
		schema_ok = ''f'';
		FOR rec IN SELECT nspname FROM pg_namespace WHERE text(nspname) =
schema_name LOOP
			schema_ok := ''t'';
		END LOOP;

		if ( schema_ok <> ''t'' ) THEN
			RAISE NOTICE ''Invalid schema name - using current_schema()'';
			SELECT current_schema() into real_schema;
		ELSE
			real_schema = schema_name;
		END IF;

	ELSE
		SELECT current_schema() into real_schema;
	END IF;



	-- Add geometry column

	EXECUTE ''ALTER TABLE '' ||

		quote_ident(real_schema) || ''.'' || quote_ident(table_name)



		|| '' ADD COLUMN '' || quote_ident(column_name) || 
		'' geometry '';


	-- Delete stale record in geometry_column (if any)

	EXECUTE ''DELETE FROM geometry_columns WHERE
		f_table_catalog = '' || quote_literal('''') || 
		'' AND f_table_schema = '' ||

		quote_literal(real_schema) || 



		'' AND f_table_name = '' || quote_literal(table_name) ||
		'' AND f_geometry_column = '' || quote_literal(column_name);


	-- Add record in geometry_column 

	EXECUTE ''INSERT INTO geometry_columns VALUES ('' ||
		quote_literal('''') || '','' ||

		quote_literal(real_schema) || '','' ||



		quote_literal(table_name) || '','' ||
		quote_literal(column_name) || '','' ||
		new_dim || '','' || new_srid || '','' ||
		quote_literal(new_type) || '')'';

	-- Add table checks

	SELECT fix_geometry_columns() INTO fixgeomres;

	return 

		real_schema || ''.'' || 

		table_name || ''.'' || column_name ||
		'' SRID:'' || new_srid ||
		'' TYPE:'' || new_type || 
		'' DIMS:'' || new_dim || ''\n '' ||
		''geometry_column '' || fixgeomres;
END;
'
LANGUAGE 'plpgsql' VOLATILE STRICT; -- WITH (isstrict);

From fwarmerdam at gmail.com  Mon Feb 14 13:55:54 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] 2004 Tiger with new PostGIS
In-Reply-To: <89f845e8050214104579679946@mail.gmail.com>
References: <89f845e8050214104579679946@mail.gmail.com>
Message-ID: <931f8ea9050214105515e372f4@mail.gmail.com>

On Mon, 14 Feb 2005 10:45:39 -0800, David Blasby <dblasby@gmail.com> wrote:
> I'm trying to load the new Tiger data into Postgis, and I'm having troubles.
> 
> I solved the "constraints" on tables problem - just run the CREATE
> FUNCTION statement below - it replaces the addgeometrycolumn function
> so that it doesnt add constaints.  Hacky, but it works.
> 
> The second problem is with OGR - the altNames table isn't correctly
> forming arrays:
> 
> LOG:  statement: INSERT INTO "altname" ("module", "tlid", "rtsq",
> "feat") VALUES ('TGR11001', 76224848, 1, '{696,702')

Dave,

An error was recently identified with the logic that was trimming
field values that were too long.  It wasn't working properly for
array fields.  This problem is now fixed in CVS, so you should
be able to upgrade to a nightly snapshot (of GDAL). 

I'm still not sure what I'm going to do about the constraint problem
though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dylan at iici.no-ip.org  Mon Feb 14 16:26:11 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] problems with shapefiles created with v.out.ogr
Message-ID: <200502141326.11052.dylan@iici.no-ip.org>

Not sure what is causing this... but when i import a shape file into GRASS 
with v.in.ogr, make changes, and then export the resulting file with 
v.out.ogr, there are some geometry problems - specifically when converting 
the output shapefile into GMT-style x,y data.

The results look like the polygons are note closed (properly?)

importing the original shape file with v.in.ogr -c only made things worse -- 
incorrect attributes where assigned to polygons.

It could be that I have a slightly funky shapefile, but this problem makes me 
very wary of working with shapefile within GRASS - especially when i need to 
export the data for some other application. 

Could this be related to a badly formed shapefile, or is this part of a larger 
problem with importing/exporting shapefiles?

Any thoughts would be appreciated.

thanks in advance,

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From dylan at iici.no-ip.org  Mon Feb 14 17:40:59 2005
From: dylan at iici.no-ip.org (Dylan Beaudette)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] dissolve common boundaries with OGR tool
Message-ID: <200502141440.59174.dylan@iici.no-ip.org>

Greetings!

Sorry about inundating the list with my problems today... but;

Is there any simple way to dissolve common boundaries based on some attribute, 
say in a shapefile...? this would be similar to what the geoprocessing junk 
in the ESRI world does, or what v.extract in the GRASS world does... Normally 
I would just do this operation in GRASS, but I have been having a lot of 
trouble with GRASS and shapefiles recently, whereas OGR always seems to work 
just fine. 

If there currently is no way to do this, and none is planned - i might try to 
take on the of writing something in python to get the job done...

Any ideas?

Thanks in advance!

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From carueda at ucdavis.edu  Mon Feb 14 17:46:53 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] citing GDAL/OGR
Message-ID: <cur9kf$akb$1@sea.gmane.org>

We are planning a paper describing a tool which uses the GDAL/OGR library
and we would like to make a proper citation. Is there any preferred
citation we should use? --thanks.

Carlos


From fwarmerdam at gmail.com  Mon Feb 14 18:17:19 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] citing GDAL/OGR
In-Reply-To: <cur9kf$akb$1@sea.gmane.org>
References: <cur9kf$akb$1@sea.gmane.org>
Message-ID: <931f8ea905021415178b43b99@mail.gmail.com>

On Mon, 14 Feb 2005 14:46:53 -0800, Carlos A. Rueda <carueda@ucdavis.edu> wrote:
> We are planning a paper describing a tool which uses the GDAL/OGR library
> and we would like to make a proper citation. Is there any preferred
> citation we should use? --thanks.

Carlos,

I have no preference other than that I would like you to use
http://www.gdal.org/ as the permanent location at which to find
information on GDAL/OGR. 

Thanks,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tflynch at gmail.com  Mon Feb 14 20:08:48 2005
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.1 - issues and clarification
Message-ID: <c39b2a6505021417085e0fd566@mail.gmail.com>

Hi folks,

Just letting you know where things are heading (and where they are at
the moment) regarding the ECW JPEG 2000 SDK and the source code
release, and clearing up any misconceptions that may be floating
around.

Firstly, the ECW JPEG 2000 SDK is the successor to the ECW SDK
released a while back by ER Mapper, and also includes support for the
ISO JPEG 2000 file format, using a common, simple and backward
compatible API.

The SDK library's performance is comparable to KDU's.  It includes
support for using JPEG 2000 with the ECWP streaming imagery protocol
that has been available with ECW for a while.

The source code distribution that's out there right now is
approximately cross-platform.  It was developed on Windows, and ported
to Solaris/GCC, and a reasonable amount of care has been taken to
avoid platform dependencies.  The distribution out there right now
should build on Solaris 8/9 off the shelf, and on Linux with minor
modifications (that you may have seen knocking around on the ER Mapper
forums and the GDAL list).

There are still bugs being fixed on the UNIX side here and there, but
ER Mapper is committed to providing a stable, easy *NIX experience
with the SDK.  Once RC1 of v3.1 goes out everything should be in
excellent shape on the Win32 side, and we are also going to be
cleaning up the makefiles for Solaris/Linux a bit to make your life
easier.

As far as a roadmap for the product, you can expect careful
maintenance since the ECW/JP2 raster technology used by the SDK is at
the core of ER Mapper's commercial product line.  We are looking to
move to 3.1 RC1 as soon as the beta buglist has been doomed, which we
expect will be around the 15/16th of Feb 2005 (i.e. today or
tomorrow).  I will notify the
GDAL list when RC1 goes out the door.

We are expecting there will be a v3.2 incorporating performance
enhancements and some interesting new features over the next few
months.

There are three license agreements available for the SDK; free, public
and commercial.  The licensing information is included with the SDK
distributions and should be read carefully.  The exact terms of the
license are under review and may be changing soon (but if there is a
change, it will almost certainly be in the form of a removal of IP
restrictions, rather than an increase of same).

If you have any queries, fire away.

Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com

From dblasby at gmail.com  Mon Feb 14 21:58:41 2005
From: dblasby at gmail.com (David Blasby)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] 2004 Tiger with new PostGIS
In-Reply-To: <931f8ea9050214105515e372f4@mail.gmail.com>
References: <89f845e8050214104579679946@mail.gmail.com>
	<931f8ea9050214105515e372f4@mail.gmail.com>
Message-ID: <89f845e805021418583a729108@mail.gmail.com>

okay - using the CVS version solved my problem.

So,
1. use CVS version
2. use the AddGeometryColumns function I sent earlier today
3.  ogr2ogr -f PostgreSQL PG:dbname=tiger_test .

Thanks, frank!

dave


On Mon, 14 Feb 2005 13:55:54 -0500, Frank Warmerdam
<fwarmerdam@gmail.com> wrote:
> On Mon, 14 Feb 2005 10:45:39 -0800, David Blasby <dblasby@gmail.com> wrote:
> > I'm trying to load the new Tiger data into Postgis, and I'm having troubles.
> >
> > I solved the "constraints" on tables problem - just run the CREATE
> > FUNCTION statement below - it replaces the addgeometrycolumn function
> > so that it doesnt add constaints.  Hacky, but it works.
> >
> > The second problem is with OGR - the altNames table isn't correctly
> > forming arrays:
> >
> > LOG:  statement: INSERT INTO "altname" ("module", "tlid", "rtsq",
> > "feat") VALUES ('TGR11001', 76224848, 1, '{696,702')
> 
> Dave,
> 
> An error was recently identified with the logic that was trimming
> field values that were too long.  It wasn't working properly for
> array fields.  This problem is now fixed in CVS, so you should
> be able to upgrade to a nightly snapshot (of GDAL).
> 
> I'm still not sure what I'm going to do about the constraint problem
> though.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>

From ben at vterrain.org  Mon Feb 14 22:36:24 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
Message-ID: <20050215033335.43BD97B12BF@xserve.flids.com>


I noticed this evening that OGR will crash if asked to parse an ESRI-style
.prj file with some extra whitespace.  Attached is an example, which was
output from the software 'Global Mapper' (GM).

I've cc'd GM's author, so he can address the extra LF characters, but it
would also be good to make OGR a little more robust.  The problem appears to
be an if/else in OSR_GDV (ogr_srs_esri.cpp) which doesn't check for an empty
parameter.  The problem is probably in the calling code though
(importFromESRI) which is making the assumption.

Even when the extra LF are removed, there is a second problem: OGR is
expecting the parameters for TM projections in this order:
1. Scale
2. CenterLat (latitude of the origin)
3. CenterLong (central meridian)
4. FalseEasting
5. FalseNorthing

But GM is writing them in a slightly different order:
1. Scale
2. CenterLong (central meridian)
3. CenterLat (latitude of the origin)
4. FalseEasting
5. FalseNorthing

It seems reasonable to conclude that one of these (OGR or GM) is
wrong/non-standard.

-Ben
-------------- next part --------------
A non-text attachment was scrubbed...
Name: gauss_boaga_west.prj
Type: application/octet-stream
Size: 337 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050214/55cfb55b/gauss_boaga_west.obj
From MChapman at sanz.com  Mon Feb 14 22:42:08 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
Message-ID: <ED3A48B9840E594890A2BC172D119465E63C77@mailman>

Ben,
 
That file doesn't look like an esri prj file.  Attached is what esri looks like.  I think the style is called something like baucus-nor or something.  It's similiar to an ogc wks.
 
Martin

	-----Original Message----- 
	From: Ben Discoe [mailto:ben@vterrain.org] 
	Sent: Mon 2/14/2005 8:36 PM 
	To: gdal-dev@remotesensing.org 
	Cc: support@globalmapper.com 
	Subject: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
	
	


	I noticed this evening that OGR will crash if asked to parse an ESRI-style
	.prj file with some extra whitespace.  Attached is an example, which was
	output from the software 'Global Mapper' (GM).
	
	I've cc'd GM's author, so he can address the extra LF characters, but it
	would also be good to make OGR a little more robust.  The problem appears to
	be an if/else in OSR_GDV (ogr_srs_esri.cpp) which doesn't check for an empty
	parameter.  The problem is probably in the calling code though
	(importFromESRI) which is making the assumption.
	
	Even when the extra LF are removed, there is a second problem: OGR is
	expecting the parameters for TM projections in this order:
	1. Scale
	2. CenterLat (latitude of the origin)
	3. CenterLong (central meridian)
	4. FalseEasting
	5. FalseNorthing
	
	But GM is writing them in a slightly different order:
	1. Scale
	2. CenterLong (central meridian)
	3. CenterLat (latitude of the origin)
	4. FalseEasting
	5. FalseNorthing
	
	It seems reasonable to conclude that one of these (OGR or GM) is
	wrong/non-standard.
	
	-Ben
	

-------------- next part --------------
PROJCS["World_Mercator",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137,298.257223563]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Mercator"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",0],PARAMETER["Central_Meridian",0],PARAMETER["Standard_Parallel_1",0],UNIT["Meter",1]]
From MChapman at sanz.com  Tue Feb 15 02:12:09 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
Message-ID: <ED3A48B9840E594890A2BC172D119465E63C78@mailman>

Mike,
 
Thanks for the info.  I thought it might be an older format after I sent the email.  Sorry for the assumption.
 
Martin

	-----Original Message----- 
	From: Global Mapper Support [mailto:support@globalmapper.com] 
	Sent: Mon 2/14/2005 9:31 PM 
	To: Chapman, Martin; 'Ben Discoe'; gdal-dev@remotesensing.org 
	Cc: 
	Subject: RE: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
	
	

	Martin/Ben,
	
	The .prj file that Ben provided is an older format ESRI .prj file. With the
	ArcView v8 (I think) release, ESRI switched to the format of PRJ files that
	you attached.
	
	As for the blank lines and the ordering of the parameters, I've never
	personally seen any kind of standard document describing the old .prj
	format, so my coding of the creation of those files is entirely based upon
	samples that I've seen. It seems that about half of the sample files that I
	have do have a blank line between parameters and half don't. I don't know if
	some programs will break on .prj files with no blank lines or not, it seems
	best if OGR can handle the blank lines gracefully since there are lots of
	them out there from sources other than Global Mapper.
	
	I don't know if there is a standard order for the projection parameters
	either, Global Mapper parses the comment after the parameter to determine
	what the value is, thereby making it independent of any ordering.
	
	Mike
	Global Mapper Support
	support@globalmapper.com
	
	-----Original Message-----
	From: Chapman, Martin [mailto:MChapman@sanz.com]
	Sent: Monday, February 14, 2005 9:42 PM
	To: Ben Discoe; gdal-dev@remotesensing.org
	Cc: support@globalmapper.com
	Subject: RE: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
	
	Ben,
	
	That file doesn't look like an esri prj file.  Attached is what esri looks
	like.  I think the style is called something like baucus-nor or something.
	It's similiar to an ogc wks.
	
	Martin
	
	        -----Original Message-----
	        From: Ben Discoe [mailto:ben@vterrain.org]
	        Sent: Mon 2/14/2005 8:36 PM
	        To: gdal-dev@remotesensing.org
	        Cc: support@globalmapper.com
	        Subject: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
	       
	       
	
	
	        I noticed this evening that OGR will crash if asked to parse an
	ESRI-style
	        .prj file with some extra whitespace.  Attached is an example, which
	was
	        output from the software 'Global Mapper' (GM).
	       
	        I've cc'd GM's author, so he can address the extra LF characters,
	but it
	        would also be good to make OGR a little more robust.  The problem
	appears to
	        be an if/else in OSR_GDV (ogr_srs_esri.cpp) which doesn't check for
	an empty
	        parameter.  The problem is probably in the calling code though
	        (importFromESRI) which is making the assumption.
	       
	        Even when the extra LF are removed, there is a second problem: OGR
	is
	        expecting the parameters for TM projections in this order:
	        1. Scale
	        2. CenterLat (latitude of the origin)
	        3. CenterLong (central meridian)
	        4. FalseEasting
	        5. FalseNorthing
	       
	        But GM is writing them in a slightly different order:
	        1. Scale
	        2. CenterLong (central meridian)
	        3. CenterLat (latitude of the origin)
	        4. FalseEasting
	        5. FalseNorthing
	       
	        It seems reasonable to conclude that one of these (OGR or GM) is
	        wrong/non-standard.
	       
	        -Ben
	       
	
	
	

From vincent at ecovla.nl  Tue Feb 15 10:09:08 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] georeferencing aster level 2 data
Message-ID: <200502151609.08288.vincent@ecovla.nl>

Hi all,

I thought that gdalwarp was able to georeference aster level 2 data (the 
ast_09 on demand data from the eos data gateway), however, whatever I try, I 
can't get gdalwarp to recognize the corner coordinates (get an error saying 
that no gcp's were found). Any idea? Their are UPPERLEFT, UPPERRIGHT, 
LOWERLEFT and LOWERRIGHT metadata items in the hdf files (.hdf0 and .hdf1).

Of couse I can write a script that extract the corner coordinates, attaches 
them as gcp's to a vrt file, and warp this file, but if I could do this in 
one run using gdalwarp it would be much nicer.

Thanks,
Vincent.

From debian at adkgis.org  Tue Feb 15 10:19:51 2005
From: debian at adkgis.org (Steve Halasz)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.1 - issues and clarification
In-Reply-To: <c39b2a6505021417085e0fd566@mail.gmail.com>
References: <c39b2a6505021417085e0fd566@mail.gmail.com>
Message-ID: <1108480791.3923.16.camel@marcy>

On Tue, 2005-02-15 at 09:08 +0800, Tom Lynch wrote:
8<--------snip--------
> 
> There are three license agreements available for the SDK; free, public
> and commercial.  The licensing information is included with the SDK
> distributions and should be read carefully.  The exact terms of the
> license are under review and may be changing soon (but if there is a
> change, it will almost certainly be in the form of a removal of IP
> restrictions, rather than an increase of same).

Tom,

The ECW SDK works very well and I'm grateful to ermapper for providing
it under the public license. I had hoped to package it for the Debian
GNU/Linux distribution where it would be useful with GDAL, QGIS and
other GIS software. But there were a few restrictions in the license
that do not meet the Debian Free Software Guidelines[1]. These are
listed in a post to the Debian legal mailing list[2]. I would appreciate
your consideration of these issues when reviewing the terms of the
public license.

Thanks very much!

Steve

[1] http://www.debian.org/doc/debian-policy/ch-archive.html#s-dfsg
[2] http://lists.debian.org/debian-legal/2005/02/msg00061.html


From fwarmerdam at gmail.com  Tue Feb 15 10:30:08 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] georeferencing aster level 2 data
In-Reply-To: <200502151609.08288.vincent@ecovla.nl>
References: <200502151609.08288.vincent@ecovla.nl>
Message-ID: <931f8ea905021507304fe7b384@mail.gmail.com>

On Tue, 15 Feb 2005 16:09:08 +0100, Vincent Schut <vincent@ecovla.nl> wrote:
> Hi all,
> 
> I thought that gdalwarp was able to georeference aster level 2 data (the
> ast_09 on demand data from the eos data gateway), however, whatever I try, I
> can't get gdalwarp to recognize the corner coordinates (get an error saying
> that no gcp's were found). Any idea? Their are UPPERLEFT, UPPERRIGHT,
> LOWERLEFT and LOWERRIGHT metadata items in the hdf files (.hdf0 and .hdf1).
> 
> Of couse I can write a script that extract the corner coordinates, attaches
> them as gcp's to a vrt file, and warp this file, but if I could do this in
> one run using gdalwarp it would be much nicer.

Vincent,

If you point me to a sample file I can download, I can look at 
automatically translating the corners into GCPs.  I have recently
added automatic recognision for georeferencing data from other
specific products in GDALs HDF driver.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dmorissette at dmsolutions.ca  Tue Feb 15 10:51:14 2005
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.1 - issues and clarification
In-Reply-To: <1108480791.3923.16.camel@marcy>
References: <c39b2a6505021417085e0fd566@mail.gmail.com>
	<1108480791.3923.16.camel@marcy>
Message-ID: <42121A72.3000100@dmsolutions.ca>

Steve Halasz wrote:
> 
> The ECW SDK works very well and I'm grateful to ermapper for providing
> it under the public license. I had hoped to package it for the Debian
> GNU/Linux distribution where it would be useful with GDAL, QGIS and
> other GIS software. But there were a few restrictions in the license
> that do not meet the Debian Free Software Guidelines[1]. These are
> listed in a post to the Debian legal mailing list[2]. I would appreciate
> your consideration of these issues when reviewing the terms of the
> public license.
> 

Kudos to ERMapper for making the SDK available under a public license. 
Unfortunately the restriction that prevents the use of the SDK with 
server software means that we (developers and users of the open source 
UMN MapServer) cannot use it. I sincerely hope you would consider 
removing this restriction, because as things stand now there is no way 
that ECW can be used with MapServer and this affects a large part of the 
open source GIS community.

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From fwarmerdam at gmail.com  Tue Feb 15 16:00:24 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] georeferencing aster level 2 data
In-Reply-To: <200502151609.08288.vincent@ecovla.nl>
References: <200502151609.08288.vincent@ecovla.nl>
Message-ID: <931f8ea9050215130067e9b756@mail.gmail.com>

Vincent,

I have reviewed the file you pointed me to, and I can see the lat/long
corners in the file level metadata, but it isn't replicated at the subdataset
level so it is a bit harder to do anything useful with.  

For the time being I have archived the file in question, and created a 
bug report on the issue. 

  http://208.24.120.44/show_bug.cgi?id=772

I am not sure when I will get back to doing something about it. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tflynch at gmail.com  Tue Feb 15 20:23:19 2005
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.1 - issues and clarification
In-Reply-To: <1108480791.3923.16.camel@marcy>
References: <c39b2a6505021417085e0fd566@mail.gmail.com>
	<1108480791.3923.16.camel@marcy>
Message-ID: <c39b2a6505021517233990118d@mail.gmail.com>

Hi Steve and Daniel,

ER Mapper is aware of the concerns of the OSS community about the
remaining restrictions in the license.  These restrictions are in
place for commercial reasons, of course.  They are always under review
but I can't say whether a change will occur in the near future.

In the meantime the R&D department is hoping OSS developers will still
appreciate the dissemination of a very useful chunk of code and
functionality at least largely into the public domain.  The current
license allows the free use of the complete functionality of the SDK
in any GPL software that is not "server software" (as described in the
EULA document).

The policy-makers here are working hard to strike a balance that will
be a win-win for ER Mapper and the free/open software community :)

Cheers,

Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com

From vincent at ecovla.nl  Wed Feb 16 06:02:52 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] dataset.SetGCPProjection in gdal.py?
Message-ID: <200502161202.52917.vincent@ecovla.nl>

Frank and/or others,

is it on purpose that the dataset.SetGCPProjection method is lacking from the 
python module?
Remember my ASTER georeferencing question? These ASTER L2 scenes are UTM 
projected but have their corner coordinates in geodetic degrees, that's why.

Regards,
Vincent.

From vincent at ecovla.nl  Wed Feb 16 06:20:59 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] dataset.SetGCPProjection in gdal.py?
In-Reply-To: <200502161202.52917.vincent@ecovla.nl>
References: <200502161202.52917.vincent@ecovla.nl>
Message-ID: <200502161220.59729.vincent@ecovla.nl>

OK, to answer my own question:

I should look a bit harder next time before asking on te list. I now see you 
can add a projection in the SetGCPs method.

sorry for the list-pollution.

Vincent.

On Wednesday 16 February 2005 12:02, Vincent Schut wrote:
> Frank and/or others,
>
> is it on purpose that the dataset.SetGCPProjection method is lacking from
> the python module?
> Remember my ASTER georeferencing question? These ASTER L2 scenes are UTM
> projected but have their corner coordinates in geodetic degrees, that's
> why.
>
> Regards,
> Vincent.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From pgao at esri.com  Wed Feb 16 13:06:34 2005
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] missing FALSE_EASTING and Nodata value in my new driver
Message-ID: <loom.20050216T190456-794@post.gmane.org>

I wrote a new GDAL driver for a read-only dynamically generated raster data 
source. I am
having two problems:

(1) The projection string returned from my dataset contains a 
    false_easting value, and it is not
    written to the output (JP2KAK). The following are two prj strings, 
    the first is what's returned
    and the second is what's written (after reading it back):

PROJCS["NAD_1983_StatePlane_Ohio_South_FIPS_3402",GEOGCS
["GCS_North_American_1983",DATUM["North_American_Datum_1983",SPHEROID
["GRS_1980",6378137.0,298.257222101]],PRIMEM["Greenwich",0.0],UNIT
["Degree",0.0174532925199433]],PROJECTION
["Lambert_Conformal_Conic_2SP"],PARAMETER["False_Easting",1968500.0],PARAMETER
["False_Northing",0.0],PARAMETER["Central_Meridian",-82.5],PARAMETER
["Standard_Parallel_1",38.73333333333333],PARAMETER
["Standard_Parallel_2",40.03333333333333],PARAMETER
["Latitude_Of_Origin",38.0],UNIT["Foot_US",0.3048006096012192]]

PROJCS["NAD_1983_StatePlane_Ohio_South_FIPS_3402",GEOGCS["NAD83",DATUM
["North_American_Datum_1983",SPHEROID["GRS 
1980",6378137,298.2572221010002,AUTHORITY["EPSG","7019"]],AUTHORITY
["EPSG","6269"]],PRIMEM["Greenwich",0],UNIT
["degree",0.0174532925199433],AUTHORITY["EPSG","4269"]],PROJECTION
["Lambert_Conformal_Conic_2SP"],PARAMETER
["standard_parallel_1",38.73333333333333],PARAMETER
["standard_parallel_2",40.03333333333333],PARAMETER
["latitude_of_origin",38],PARAMETER["central_meridian",-82.5],PARAMETER
["false_easting",0],PARAMETER["false_northing",0],UNIT["US survey 
foot",0.3048006096012192,AUTHORITY["EPSG","9003"]]]

(2) My data contains NoData, and the NoData value is 0. The 
    RasterBand::GetNoDataValue() never gets called. 

What did I do wrong?

Gao, Peng



From pgao at esri.com  Wed Feb 16 13:43:03 2005
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Tiff with multiple IFDs
Message-ID: <loom.20050216T193841-391@post.gmane.org>

Does GDAL support tiff images with multiple IFDs? I have a tiff
that GDAL says it has one band, but other imaging software
say it has three bands. This tiff has multiple IFDs, with one
band per IFD.

How do I read tiff like these using GDAL?

Thanks for any info
Gao, Peng



From carueda at ucdavis.edu  Wed Feb 16 14:47:52 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] RasterIO: replicating a value
Message-ID: <cv07s8$sds$1@sea.gmane.org>

Hello,

I'm trying to make only one call to RasterIO in a 1-band dataset
to fill a region with the same value. This is just an example:

GDALDataset* dataset = hDriver->Create(
    filename,
    1000,       //nXSize
    1000,       //nYSize
    1,          //nBands
    GDT_Int32,  //GDALDataType
    NULL        //papszParmList
);
int value = 1234;     // GDT_Int32 in my machine
dataset->RasterIO(
     GF_Write,
     0,   	   //nXOff,
     0,             //nYOff,
     200,           //nXSize,
     300,           //nYSize,
     &value,        //pData,
     1,             //nBufXSize,
     1,             //nBufYSize,
     GDT_Int32,     //eBufType,
     1,             //nBandCount,
     NULL,          //panBandMap,
     0,             //nPixelSpace,
     0,             //nLineSpace,
     0              //nBandSpace
);  	

Is this the right way to obtain the value replicated
200x300 times in the upper left region of the dataset?

Thanks!
Carlos


From wlyons at prologic-inc.com  Wed Feb 16 16:12:09 2005
From: wlyons at prologic-inc.com (William Lyons)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] OGR Polygon question
Message-ID: <2DBB9F887DAA394FA75D98474EA5730DFA983C@vader.prologic-inc.com>

Howdy List,

 

Just a quick question about the capabilities of the OGR C API.

 

Is it possible to differentiate between the exterior and interior rings
of an OGRPolygon via the C API?

 

Thanks,

 

William Lyons

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050216/20a80dab/attachment.html
From fwarmerdam at gmail.com  Wed Feb 16 16:56:44 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] OGR Polygon question
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730DFA983C@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730DFA983C@vader.prologic-inc.com>
Message-ID: <931f8ea905021613567fa38512@mail.gmail.com>

On Wed, 16 Feb 2005 16:12:09 -0500, William Lyons
<wlyons@prologic-inc.com> wrote:
>
> Howdy List, 
> 
> Just a quick question about the capabilities of the OGR C API. 
> 
> Is it possible to differentiate between the exterior and interior rings of
> an OGRPolygon via the C API? 

William, 

Properly speaking the OGRPolygon is only supposed to have one
exterior ring, and it should be the outside.  There are likely some OGR
drivers that still return multipolygons as polygons in which case there is
no real way to determine what are exterior rings.  But the correct solution
is for the underlying driver to be fixed. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Wed Feb 16 17:32:48 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] RasterIO: replicating a value
In-Reply-To: <cv07s8$sds$1@sea.gmane.org>
References: <cv07s8$sds$1@sea.gmane.org>
Message-ID: <931f8ea90502161432382963d7@mail.gmail.com>

On Wed, 16 Feb 2005 11:47:52 -0800, Carlos A. Rueda <carueda@ucdavis.edu> wrote:
> Hello,
> 
> I'm trying to make only one call to RasterIO in a 1-band dataset
> to fill a region with the same value. This is just an example:
> 
> GDALDataset* dataset = hDriver->Create(
>     filename,
>     1000,       //nXSize
>     1000,       //nYSize
>     1,          //nBands
>     GDT_Int32,  //GDALDataType
>     NULL        //papszParmList
> );
> int value = 1234;     // GDT_Int32 in my machine
> dataset->RasterIO(
>      GF_Write,
>      0,            //nXOff,
>      0,             //nYOff,
>      200,           //nXSize,
>      300,           //nYSize,
>      &value,        //pData,
>      1,             //nBufXSize,
>      1,             //nBufYSize,
>      GDT_Int32,     //eBufType,
>      1,             //nBandCount,
>      NULL,          //panBandMap,
>      0,             //nPixelSpace,
>      0,             //nLineSpace,
>      0              //nBandSpace
> );
> 
> Is this the right way to obtain the value replicated
> 200x300 times in the upper left region of the dataset?

Carlos, 

This looks fine, are you having a problem with it? 

I would add there is a Fill() method on the GDALRasterBand if
you find you need to fill the whole thing. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wlyons at prologic-inc.com  Wed Feb 16 17:42:07 2005
From: wlyons at prologic-inc.com (William Lyons)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] OGR Polygon question
Message-ID: <2DBB9F887DAA394FA75D98474EA5730DFA9849@vader.prologic-inc.com>

Frank and List,

Is there a C API equivalent to the following: ?

OGRPolygon.getExteriorRing()
OGRPolygon.getInteriorRing()

Thanks for the help,

William Lyons

-----Original Message-----
From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] 
Sent: Wednesday, February 16, 2005 4:57 PM
To: William Lyons
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] OGR Polygon question

On Wed, 16 Feb 2005 16:12:09 -0500, William Lyons
<wlyons@prologic-inc.com> wrote:
>
> Howdy List, 
> 
> Just a quick question about the capabilities of the OGR C API. 
> 
> Is it possible to differentiate between the exterior and interior
rings of
> an OGRPolygon via the C API? 

William, 

Properly speaking the OGRPolygon is only supposed to have one
exterior ring, and it should be the outside.  There are likely some OGR
drivers that still return multipolygons as polygons in which case there
is
no real way to determine what are exterior rings.  But the correct
solution
is for the underlying driver to be fixed. 

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fwarmerdam at gmail.com  Wed Feb 16 17:43:48 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Tiff with multiple IFDs
In-Reply-To: <loom.20050216T193841-391@post.gmane.org>
References: <loom.20050216T193841-391@post.gmane.org>
Message-ID: <931f8ea905021614436578ae94@mail.gmail.com>

On Wed, 16 Feb 2005 18:43:03 +0000 (UTC), Gao, Peng <pgao@esri.com> wrote:
> Does GDAL support tiff images with multiple IFDs? I have a tiff
> that GDAL says it has one band, but other imaging software
> say it has three bands. This tiff has multiple IFDs, with one
> band per IFD.
> 
> How do I read tiff like these using GDAL?

Peng,

Such multiple IFD files are not currently conveniently handled by TIFF. 
It is *possible* to access alternative directories but it is not convenient.
If you know the directories are there I think you can do something like:

 gdalinfo GTIFF_DIR:2:target.tif

This would open IFD # 2 of target.tif. 

It is very hard in cases like this for GDAL to know how to present the
file as a dataset.  Should the different IFDs be considered bands of a
single dataset?  Should each be considered a seperate dataset?

If I were to do more in this regard, I would treat all extra IFDs that
don't have the overview bit set as seperate datasets, and return them
as subdataset metadata so they could be identified and utilized. 
If you would like, I could apply such a change. 

However, generally speaking I feel that folks who emit data in this
form are not showing much interest in having it usable in non-customized
packages. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From carueda at ucdavis.edu  Wed Feb 16 18:35:34 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Re: RasterIO: replicating a value
In-Reply-To: <931f8ea90502161432382963d7@mail.gmail.com>
References: <cv07s8$sds$1@sea.gmane.org>
	<931f8ea90502161432382963d7@mail.gmail.com>
Message-ID: <cv0l74$atq$1@sea.gmane.org>

Hi Frank,

Attached is a small test program that recreates (at least for me)
the problem:

$ g++ rasteriotest.cc -lgdal
$ ./a.out
result = 0
$ ls -l
-rwxr-xr-x    1 carueda  carueda     36774 Feb 16 15:03 a.out
-rw-r--r--    1 carueda  carueda    604000 Feb 16 15:12 rasterfilename
-rw-r--r--    1 carueda  carueda       339 Feb 16 15:12 rasterfilename.hdr
-rw-r--r--    1 carueda  carueda      1185 Feb 16 15:09 rasteriotest.cc
	
but rasterfilename should be 1000x1000x1x4 = 4000000 bytes long.
Well, I'm assuming that just creating/deleting the dataset object would
set the whole size of the file (with whatever default band values)
regardless of what data are explicitily written. If this is not the
case, how can I guarantee the desired size without having to write
the whole dataset (my application is certainly filling some regions
but not the whole thing necessarily).

Many thanks for any clarification.

Carlos




Frank Warmerdam wrote:
> On Wed, 16 Feb 2005 11:47:52 -0800, Carlos A. Rueda <carueda@ucdavis.edu> wrote:
> 
>>Hello,
>>
>>I'm trying to make only one call to RasterIO in a 1-band dataset
>>to fill a region with the same value. This is just an example:
>>
>>GDALDataset* dataset = hDriver->Create(
>>    filename,
>>    1000,       //nXSize
>>    1000,       //nYSize
>>    1,          //nBands
>>    GDT_Int32,  //GDALDataType
>>    NULL        //papszParmList
>>);
>>int value = 1234;     // GDT_Int32 in my machine
>>dataset->RasterIO(
>>     GF_Write,
>>     0,            //nXOff,
>>     0,             //nYOff,
>>     200,           //nXSize,
>>     300,           //nYSize,
>>     &value,        //pData,
>>     1,             //nBufXSize,
>>     1,             //nBufYSize,
>>     GDT_Int32,     //eBufType,
>>     1,             //nBandCount,
>>     NULL,          //panBandMap,
>>     0,             //nPixelSpace,
>>     0,             //nLineSpace,
>>     0              //nBandSpace
>>);
>>
>>Is this the right way to obtain the value replicated
>>200x300 times in the upper left region of the dataset?
> 
> 
> Carlos, 
> 
> This looks fine, are you having a problem with it? 
> 
> I would add there is a Fill() method on the GDALRasterBand if
> you find you need to fill the whole thing. 
> 
> Best regards,
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rasteriotest.cc
Type: text/x-c++src
Size: 1727 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050216/de973f8a/rasteriotest.bin
From fwarmerdam at gmail.com  Wed Feb 16 20:26:30 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] missing FALSE_EASTING and Nodata value in my new driver
In-Reply-To: <loom.20050216T190456-794@post.gmane.org>
References: <loom.20050216T190456-794@post.gmane.org>
Message-ID: <931f8ea905021617265a268e1d@mail.gmail.com>

On Wed, 16 Feb 2005 18:06:34 +0000 (UTC), Gao, Peng <pgao@esri.com> wrote:
> (1) The projection string returned from my dataset contains a
>     false_easting value, and it is not
>     written to the output (JP2KAK). The following are two prj strings,
>     the first is what's returned
>     and the second is what's written (after reading it back):

Peng,

It turns out this was a bug in the GTIFFetchProjParms() function in 
libgeotiff.  It was not honouring ProjFalseOriginEastingGeoKey and
ProjFalseOriginNorthingGeoKey.  I have committed a fix for this
in libgeotiff, and updated the libgeotiff code within the GDAL source
tree.  

The problem also affects JP2KAK as it uses a degenerate GeoTIFF file
within the JP2 file to contain the coordinate system information. 

> (2) My data contains NoData, and the NoData value is 0. The
>     RasterBand::GetNoDataValue() never gets called.
> 
> What did I do wrong?

The JP2KAK driver has no support for preserving nodata values.  I am 
not aware of a standard way of doing this with JPEG2000.   I believe the
work we have previously discuss for persisting various kinds of metadata
will include support for nodata values in formats that do not naturally 
support them. 

So, you haven't done anything wrong, but at least for the time being the
capabilities of different drivers will vary.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Wed Feb 16 20:30:56 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Re: RasterIO: replicating a value
In-Reply-To: <cv0l74$atq$1@sea.gmane.org>
References: <cv07s8$sds$1@sea.gmane.org>
	<931f8ea90502161432382963d7@mail.gmail.com>
	<cv0l74$atq$1@sea.gmane.org>
Message-ID: <931f8ea905021617306ebe9e73@mail.gmail.com>

On Wed, 16 Feb 2005 15:35:34 -0800, Carlos A. Rueda <carueda@ucdavis.edu> wrote:
> Hi Frank,
> 
> Attached is a small test program that recreates (at least for me)
> the problem:
> 
> $ g++ rasteriotest.cc -lgdal
> $ ./a.out
> result = 0
> $ ls -l
> -rwxr-xr-x    1 carueda  carueda     36774 Feb 16 15:03 a.out
> -rw-r--r--    1 carueda  carueda    604000 Feb 16 15:12 rasterfilename
> -rw-r--r--    1 carueda  carueda       339 Feb 16 15:12 rasterfilename.hdr
> -rw-r--r--    1 carueda  carueda      1185 Feb 16 15:09 rasteriotest.cc
> 
> but rasterfilename should be 1000x1000x1x4 = 4000000 bytes long.
> Well, I'm assuming that just creating/deleting the dataset object would
> set the whole size of the file (with whatever default band values)
> regardless of what data are explicitily written. If this is not the
> case, how can I guarantee the desired size without having to write
> the whole dataset (my application is certainly filling some regions
> but not the whole thing necessarily).

Carlos, 

There is no guarantee that all the space required for a file will be
allocated at the Create() call or even when a newly created files is
closed.  If you want to be certain that the file is fully written out you
will need to call Fill() on it, or in some other fashion write the whole
thing. 

Sorry ... I realize that isn't the answer you were hoping for. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Wed Feb 16 20:36:55 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] OGR Polygon question
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730DFA9846@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730DFA9846@vader.prologic-inc.com>
Message-ID: <931f8ea905021617365fefaad@mail.gmail.com>

On Wed, 16 Feb 2005 17:29:37 -0500, William Lyons
<wlyons@prologic-inc.com> wrote:
> Frank and List,
> 
> Is there a C API equivalent to the following: ?
> 
> OGRPolygon.getExteriorRing()
> OGRPolygon.getInteriorRing()

William,

I believe you use OGR_G_GetGeometryRef() to fetch the rings from a 
polygon.  The ring at index "0" will be the exterior ring and the rest are
interior rings. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jvarga at boulder.net  Wed Feb 16 23:07:33 2005
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] GIS Fellowship for grad LA  students
Message-ID: <42141885.3080605@boulder.net>

The attached is a forwarded announcement directed at graduate students 
of Landscape Architecture for three annual $10,000.00 grants to be used 
"to promote and facilitate the integration of art, science, method, and 
technology in the study and profession of landscape architecture, and 
encourage the use of geographic information systems (GIS) as a framework 
for exploring integrated approaches to landscape assessment and 
intervention."

While the Fellowship is sponsored in part by ESRI, and includes "free" - 
as in beer - ESRI software (although I don't know exactly which, or if 
support is included), along with a computer and access to online ESRI 
training, it does NOT state you must use their software so long as the 
research promotes the use of GIS.

What an excellent opportunity for someone in any of the assorted 
communities pertaining to open source geospatial applications!

Unless the prerequisites are re-written to require the exclusive use of 
ESRI software, it is open to any landscape architecture graduate student 
in the US (and perhaps Canada) using the tools of their choice.  Even if 
it were modified to require the un-exclusive use of ESRI, one could 
demonstrate the effectiveness of using open source geospatial components 
along side COTS implementations.

Please forward this to any other lists you may subscribe to that are 
related to open source geospatial projects, (Thuban, PostGIS, OpenMap, 
etc.).

Best regards,

Jack Varga

-------- Original Message --------
Subject: [LARCH-L] The Dangermond Fellowship
Date: Wed, 16 Feb 2005 16:09:41 -0500
From: James F. Palmer <zooey@MAILBOX.SYR.EDU>
Reply-To: Landscape Architecture Electronic Forum <LARCH-L@LISTSERV.SYR.EDU>
To: LARCH-L@LISTSERV.SYR.EDU


The Landscape Architecture Foundation (LAF) is pleased to announce a new,
unique research funding opportunity for graduate students of landscape
architecture and their faculty advisors?the Dangermond Fellowship.

I am writing to encourage you to broadly disseminate this exciting
opportunity. Please go to
<http://www.laprofession.org/DangermondFellowship.htm>www.laprofession.org/DangermondFellowship.htm 

to print one or more 8?? by 11? color posters, and then display the
information prominently in your department on bulletin boards and in
graduate studios.

The Dangermond Fellowship, a national fellowship for graduate students of
landscape architecture at institutions in the United States, is jointly
sponsored by LAF, Environmental Systems Research Institute (ESRI) and the
American Society of Landscape Architects (ASLA). The purpose of the
fellowship is to promote and facilitate the integration of art, science,
method, and technology in the study and profession of landscape
architecture, and encourage the use of geographic information systems (GIS)
as a framework for exploring integrated approaches to landscape assessment
and intervention.

The fellowship program will generate approximately $30,000 annually,
providing three fellowships of $10,000 each per year. Fellowship winners
will also receive a computer, ESRI software, and access to technical
training via ESRI?s Virtual Campus. Fellowship recipients will be invited
to present their projects at the ESRI Annual User Conference (July/August)
and at the ASLA Annual Convention (October/November). Separate funds will
be available to pay for the travel costs to these events for the students
and their principal advisor.

The fellowship program invites students, with support from their respective
universities, to submit project proposals to the fellowship committee for
review and evaluation. The fellowships will be awarded on the merits of the
proposals, demonstrated capacity of the student(s) to complete the work,
and the likelihood of success.

Students can submit proposals addressing any aspect of landscape
architecture as long as the proposal demonstrates the use of GIS as an
integrating framework for performing both landscape analysis and landscape
planning, design and management.

Application requirements and selection criteria are available at
<http://www.laprofession.org/financial/scholarships.htm>www.laprofession.org/financial/scholarships.htm. 

Applications must be postmarked by March 31, 2005.


Sincerely,

Ron Figura

Landscape Architecture Foundation

Scholarship Manager

202-331-7070 ext 10

<mailto:rfigura@lafoundation.org>rfigura@lafoundation.org


\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\

                    James F. Palmer, Ph.D., FASLA
                 Professor of Landscape Architecture
        SUNY College of Environmental Science and Forestry
                        Syracuse, NY 13210
     voice: 315 470-6548      internet: zooey@mailbox.syr.edu

\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\

From carueda at ucdavis.edu  Thu Feb 17 02:50:55 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] Re: RasterIO: replicating a value
In-Reply-To: <931f8ea905021617306ebe9e73@mail.gmail.com>
References: <cv07s8$sds$1@sea.gmane.org>	<931f8ea90502161432382963d7@mail.gmail.com>	<cv0l74$atq$1@sea.gmane.org>
	<931f8ea905021617306ebe9e73@mail.gmail.com>
Message-ID: <cv1i7q$ecg$1@sea.gmane.org>

Hi Frank again,

OK, the Fill() seems to be a reasonable way to assure that
you put some appropriate "background" value. That's OK.
However, I'm still noticing something wrong regarding my
original posting: replicating a value. The attached test
program creates a 10x6 1-band raster of type byte; fills
it with '_' and then calls RasterIO to set the upper left
7x3 region with 'X':

$ g++ rasteriotest.cc -lgdal -Wall
$ ./a.out
result = 0
$ cat raster
_____________X______________________________________________

but it should be:
XXXXXXXXXXXXXXXXXXXXX_______________________________________

Right?

Thanks again.

Carlos

Frank Warmerdam wrote:
> On Wed, 16 Feb 2005 15:35:34 -0800, Carlos A. Rueda <carueda@ucdavis.edu> wrote:
> 
>>Hi Frank,
>>
>>Attached is a small test program that recreates (at least for me)
>>the problem:
>>
>>$ g++ rasteriotest.cc -lgdal
>>$ ./a.out
>>result = 0
>>$ ls -l
>>-rwxr-xr-x    1 carueda  carueda     36774 Feb 16 15:03 a.out
>>-rw-r--r--    1 carueda  carueda    604000 Feb 16 15:12 rasterfilename
>>-rw-r--r--    1 carueda  carueda       339 Feb 16 15:12 rasterfilename.hdr
>>-rw-r--r--    1 carueda  carueda      1185 Feb 16 15:09 rasteriotest.cc
>>
>>but rasterfilename should be 1000x1000x1x4 = 4000000 bytes long.
>>Well, I'm assuming that just creating/deleting the dataset object would
>>set the whole size of the file (with whatever default band values)
>>regardless of what data are explicitily written. If this is not the
>>case, how can I guarantee the desired size without having to write
>>the whole dataset (my application is certainly filling some regions
>>but not the whole thing necessarily).
> 
> 
> Carlos, 
> 
> There is no guarantee that all the space required for a file will be
> allocated at the Create() call or even when a newly created files is
> closed.  If you want to be certain that the file is fully written out you
> will need to call Fill() on it, or in some other fashion write the whole
> thing. 
> 
> Sorry ... I realize that isn't the answer you were hoping for. 
> 
> Best regards,
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rasteriotest.cc
Type: text/x-c++src
Size: 1247 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050216/2a6d2e09/rasteriotest.bin
From dlegault at vantpoint.com  Thu Feb 17 08:34:51 2005
From: dlegault at vantpoint.com (David Legault)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] GDAL GCPsToGeoTransform Problem
Message-ID: <031401c514f5$76006e90$8901a8c0@David>

Hi,

Here is the little experience I've been doing with the GCPsToGeoTransform( )
GDAL function within the OpenEV application

The extracted GCPs come from a RadarSat Image file.

These are the GCPs given by :

imgds=gdal.Open( imgfile )
gcps = imgds.GetGCPs( )

1 (0.50P,0.50L) -> (-135.1095150E,69.8421120N,0.00)
2 (3075.50P,0.50L) -> (-134.6161190E,69.8693480N,0.00)
3 (6150.50P,0.50L) -> (-134.1211540E,69.8952230N,0.00)
4 (0.50P,2212.50L) -> (-135.0509610E,69.7197390N,0.00)
5 (3075.50P,2212.50L) -> (-134.5604000E,69.7469050N,0.00)
6 (6150.50P,2212.50L) -> (-134.0682890E,69.7727180N,0.00)
7 (0.50P,4424.50L) -> (-134.9928930E,69.5973540N,0.00)
8 (3075.50P,4424.50L) -> (-134.5051320E,69.6244510N,0.00)
9 (6150.50P,4424.50L) -> (-134.0158420E,69.6502040N,0.00)
10 (0.50P,6636.50L) -> (-134.9353020E,69.4749570N,0.00)
11 (3075.50P,6636.50L) -> (-134.4503100E,69.5019860N,0.00)
12 (6150.50P,6636.50L) -> (-133.9638050E,69.5276810N,0.00)
13 (0.50P,8848.50L) -> (-134.8781810E,69.3525470N,0.00)
14 (3075.50P,8848.50L) -> (-134.3959230E,69.3795100N,0.00)
15 (6150.50P,8848.50L) -> (-133.9121720E,69.4051470N,0.00)

Now I want to use the gdal.GCPsToGeoTransform( ) function to retreive the
Georeferencing information for these GCPs

First step is to convert the Lat/Longs to UTM coordinates in the correct
Datum

1 (0.50P,0.50L) -> (495787.8827608E,7748093.2830998N,0.00)
2 (3075.50P,0.50L) -> (514745.4777109E,7751173.2278477N,0.00)
3 (6150.50P,0.50L) -> (533715.4904099E,7754255.2492804N,0.00)
4 (0.50P,2212.50L) -> (498028.5699152E,7734443.4741512N,0.00)
5 (3075.50P,2212.50L) -> (516984.0291049E,7737533.2731664N,0.00)
6 (6150.50P,2212.50L) -> (535951.9736002E,7740625.0613713N,0.00)
7 (0.50P,4424.50L) -> (500276.5221832E,7720794.6708395N,0.00)
8 (3075.50P,4424.50L) -> (519229.8898777E,7723894.2612719N,0.00)
9 (6150.50P,4424.50L) -> (538195.7154961E,7726995.8751202N,0.00)
10 (0.50P,6636.50L) -> (502531.7368161E,7707146.8528349N,0.00)
11 (3075.50P,6636.50L) -> (521482.9247313E,7710256.1735550N,0.00)
12 (6150.50P,6636.50L) -> (540446.7202882E,7713367.6756985N,0.00)
13 (0.50P,8848.50L) -> (504794.1408911E,7693499.8886254N,0.00)
14 (3075.50P,8848.50L) -> (523743.2389120E,7696618.9937144N,0.00)
15 (6150.50P,8848.50L) -> (542704.9250019E,7699740.2243816N,0.00)

then use the gdal.GCPsToGeoTransform( gcps, 1 ) function to retreive the
calculated georeferencing data and I always get this

(-1.#IND, -1.#IND, 1.#INF, -1.#IND, -1.#IND, 1.#INF)

which tends to make me think there is something wrong with the calculation 
routine or the input parameters are not good (or any other reason).

But if I choose 3 points in all those (any 3 not aligned) the function does 
return some data (which I didn't check to see if it was correct or not)

Thank You

David

________________________________

VPI - Innovative Radar Solutions
________________________________

David Legault, M. Eng.
Signal Processing Specialist, Programer
Vantage Point International Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050217/6cfc34ec/attachment.html
From fwarmerdam at gmail.com  Thu Feb 17 09:12:26 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] GDAL GCPsToGeoTransform Problem
In-Reply-To: <031401c514f5$76006e90$8901a8c0@David>
References: <031401c514f5$76006e90$8901a8c0@David>
Message-ID: <931f8ea905021706125d859758@mail.gmail.com>

On Thu, 17 Feb 2005 08:34:51 -0500, David Legault
<dlegault@vantpoint.com> wrote:
> then use the gdal.GCPsToGeoTransform( gcps, 1 ) function to retreive the
> calculated georeferencing data and I always get this
> 
> (-1.#IND, -1.#IND, 1.#INF, -1.#IND, -1.#IND, 1.#INF)
> 
> which tends to make me think there is something wrong with the calculation 
> routine or the input parameters are not good (or any other reason).
> 
> But if I choose 3 points in all those (any 3 not aligned) the function does 
> return some data (which I didn't check to see if it was correct or not)

David,

This does sound like a bug.  If you can file this in bugzilla I will hopefully
get to it eventually, though it may be a while.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Feb 17 09:53:32 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] FWTools 0.9.6 Release
Message-ID: <4214AFEC.8080501@pobox.com>

Folks,

I have prepared an FWTools 0.9.6 release.  They are available for download
at the usual place:

   http://www.gdal.org/dl/fwtools/

FWTools is a pre-built and integrate suite of free GIS components including
GDAL/OGR, PROJ.4, OGDI, MapServer and OpenEV. General information is available
at:

   http://fwtools.maptools.org/

On windows this release catches the various projects up to the current
development version but otherwise things have not changed noticable.

On Linux though there have been a number of changes in 0.9.5. Noteable:

  o Rebuilt all C++ components with gcc 3.2.3.  I had been using gcc 2.95 which
    was inadequate for some of the more demanding projects.

  o Added GEOS support in the OGR build (also installed the geos dev environment)
    (Hmm ... it just occured to me I didn't include MapServe GEOS support ... I
    will try and hit that for 0.9.7).

  o Added ECW support using the ERMapper 3.1beta ECW SDK.  Yippee!

  o Added netcdf (and GMT netcdf) driver support.  I needed to rebuild the HDF
    libraries to avoid exporting a netcdf style API to make this work.

As usual let me know if you encounter problems. For FWTools packaging problems
submit bugs in FWTools bugzilla.  For issues related to particular packages that
isn't related to how they are built and distributed in FWTools submit to the
appropriate projects.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From eric.doenges at gmx.net  Thu Feb 17 10:19:36 2005
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:33 2007
Subject: [Gdal-dev] GDAL GCPsToGeoTransform Problem
In-Reply-To: <931f8ea905021706125d859758@mail.gmail.com>
References: <031401c514f5$76006e90$8901a8c0@David>
	<931f8ea905021706125d859758@mail.gmail.com>
Message-ID: <01a4e3d1f84dba72169c07c9d2ec4474@gmx.net>


Am 17.02.2005 um 15:12 schrieb Frank Warmerdam:

> On Thu, 17 Feb 2005 08:34:51 -0500, David Legault
> <dlegault@vantpoint.com> wrote:
>> then use the gdal.GCPsToGeoTransform( gcps, 1 ) function to retreive 
>> the
>> calculated georeferencing data and I always get this
>>
>> (-1.#IND, -1.#IND, 1.#INF, -1.#IND, -1.#IND, 1.#INF)
>>
>> which tends to make me think there is something wrong with the 
>> calculation
>> routine or the input parameters are not good (or any other reason).
>>
>> But if I choose 3 points in all those (any 3 not aligned) the 
>> function does
>> return some data (which I didn't check to see if it was correct or 
>> not)

While I am reasonably sure the GCPsToGeoTransform code is 
mathematically correct (the
equations were determined with a symbolic algebra package), it is 
probably not optimal
from a numerical standpoint. The problem is that if you have lots of 
GCPs with large
coordinates, the calculations may overflow 'mere' 64 bit double 
arithmetic (not being
a mathematician, I wrote the code for clarity, not numerical 
stability). Looking
at the equations, I do not see an obvious solution for avoiding the 
rather large
temporary values during the calculation.

With kind regards,
Eric


From gillian.walter at atlantis-scientific.com  Thu Feb 17 10:52:33 2005
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] GDAL GCPsToGeoTransform Problem
In-Reply-To: <01a4e3d1f84dba72169c07c9d2ec4474@gmx.net>
References: <031401c514f5$76006e90$8901a8c0@David>	<931f8ea905021706125d859758@mail.gmail.com>
	<01a4e3d1f84dba72169c07c9d2ec4474@gmx.net>
Message-ID: <4214BDC1.3070207@atlantis-scientific.com>

Eric D?nges wrote:

>
> Am 17.02.2005 um 15:12 schrieb Frank Warmerdam:
>
>> On Thu, 17 Feb 2005 08:34:51 -0500, David Legault
>> <dlegault@vantpoint.com> wrote:
>>
>>> then use the gdal.GCPsToGeoTransform( gcps, 1 ) function to retreive 
>>> the
>>> calculated georeferencing data and I always get this
>>>
>>> (-1.#IND, -1.#IND, 1.#INF, -1.#IND, -1.#IND, 1.#INF)
>>>
>>> which tends to make me think there is something wrong with the 
>>> calculation
>>> routine or the input parameters are not good (or any other reason).
>>>
>>> But if I choose 3 points in all those (any 3 not aligned) the 
>>> function does
>>> return some data (which I didn't check to see if it was correct or not)
>>
>
> While I am reasonably sure the GCPsToGeoTransform code is 
> mathematically correct (the
> equations were determined with a symbolic algebra package), it is 
> probably not optimal
> from a numerical standpoint. The problem is that if you have lots of 
> GCPs with large
> coordinates, the calculations may overflow 'mere' 64 bit double 
> arithmetic (not being
> a mathematician, I wrote the code for clarity, not numerical 
> stability). Looking
> at the equations, I do not see an obvious solution for avoiding the 
> rather large
> temporary values during the calculation.

If large intermediate values are the problem, maybe the gcps could be 
shifted by an offset, and then shifted back?  ie. subtract mean(pixel 
values), mean(line values), mean(x values), mean(y values) from each 
gcp, do a fit to the shifted gcps so you'd end up with (where gt is the 
geotransform):

x - xmean = gt[0] + gt[1](p - pmean) + gt[2](l - lmean)
y - ymean = gt[3] + gt[4](p - pmean) + gt[5](l - lmean)

then the real gt[0] and gt[3] would be:

gt[0] actual = gt[0] + xmean - gt[1]*pmean - gt[2]*lmean
gt[3] actual = gt[3] + ymean - gt[4]*pmean - gt[5]*lmean

or something like that.   The fit code seems to have a lot of sums of 
squares of pixel/line/x/y values, and this should make them smaller.  
You might also be able to do some kind of normalization by spread to 
make them even smaller if necessary. 

Gillian

>
> With kind regards,
> Eric
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev




From vincent at ecovla.nl  Thu Feb 17 11:00:58 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] error when creating tiff with COMPRESS=DEFLATE
Message-ID: <200502171700.58542.vincent@ecovla.nl>

Hi all,

when I try to save a tiff file with deflate compressing, I get the following:

gdalwarp -dstnodata 0 -rb -co "COMPRESS=DEFLATE" 
AST_09_003050620030251590000000.VNIR.vrt 
AST_09_003050620030251590000000.VNIR.warped.deflate.tif
Creating output file that is 5511P x 4882L.
:0...10...20..ERROR 1: 
ZIPDecode:AST_09_003050620030251590000000.VNIR.warped.deflate.tif: Decoding 
error at scanline 0, incorrect header check
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

I tried this with all possible combinations of internal/external 
libtiff/libgeotiff (even compiled libgeotiff from cvs on my system to test 
that!) but nothing helps. The same warp using no compression works fine. Any 
clues?

Using gdal from cvs, libtiff 3.7.1 or gdal's, libgeotiff from cvs or gdal's, 
zlib 1.2.2, system is gentoo linux on amd64, diskspace is plenty.

From vincent at ecovla.nl  Thu Feb 17 11:06:46 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] error when creating tiff with COMPRESS=DEFLATE
In-Reply-To: <200502171700.58542.vincent@ecovla.nl>
References: <200502171700.58542.vincent@ecovla.nl>
Message-ID: <200502171706.46831.vincent@ecovla.nl>

And to add to my problem, packbits also throws an error, and involves 
glibc...:

gdalwarp -dstnodata 0 -rb -co "COMPRESS=PACKBITS" 
AST_09_003050620030251590000000.SWIR.vrt 
AST_09_003050620030251590000000.SWIR.warped.packbits.tif
Creating output file that is 2755P x 2441L.
:0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 1: 
AST_09_003050620030251590000000.SWIR.warped.packbits.tif:PackBitsDecode: Not 
enough data for scanline 1220
ERROR 1: TIFFReadEncodedStrip() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 1220
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 1220
*** glibc detected *** corrupted double-linked list: 0x0000002a98279a98 ***
Aborted

Vincent.

On Thursday 17 February 2005 17:00, Vincent Schut wrote:
> Hi all,
>
> when I try to save a tiff file with deflate compressing, I get the
> following:
>
> gdalwarp -dstnodata 0 -rb -co "COMPRESS=DEFLATE"
> AST_09_003050620030251590000000.VNIR.vrt
> AST_09_003050620030251590000000.VNIR.warped.deflate.tif
> Creating output file that is 5511P x 4882L.
>
> :0...10...20..ERROR 1:
>
> ZIPDecode:AST_09_003050620030251590000000.VNIR.warped.deflate.tif: Decoding
> error at scanline 0, incorrect header check
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>
> I tried this with all possible combinations of internal/external
> libtiff/libgeotiff (even compiled libgeotiff from cvs on my system to test
> that!) but nothing helps. The same warp using no compression works fine.
> Any clues?
>
> Using gdal from cvs, libtiff 3.7.1 or gdal's, libgeotiff from cvs or
> gdal's, zlib 1.2.2, system is gentoo linux on amd64, diskspace is plenty.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From vincent at ecovla.nl  Thu Feb 17 11:10:47 2005
From: vincent at ecovla.nl (Vincent Schut)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] error when creating tiff with COMPRESS=DEFLATE
In-Reply-To: <200502171706.46831.vincent@ecovla.nl>
References: <200502171700.58542.vincent@ecovla.nl>
	<200502171706.46831.vincent@ecovla.nl>
Message-ID: <200502171710.47758.vincent@ecovla.nl>

On Thursday 17 February 2005 17:06, Vincent Schut wrote:
> And to add to my problem, packbits also throws an error, and involves
> glibc...:
>
> gdalwarp -dstnodata 0 -rb -co "COMPRESS=PACKBITS"
> AST_09_003050620030251590000000.SWIR.vrt
> AST_09_003050620030251590000000.SWIR.warped.packbits.tif
> Creating output file that is 2755P x 2441L.
>
> :0...10...20...30...40...50...60...70...80...90...100 - done.
>
> ERROR 1:
> AST_09_003050620030251590000000.SWIR.warped.packbits.tif:PackBitsDecode:
> Not enough data for scanline 1220
> ERROR 1: TIFFReadEncodedStrip() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 1220
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 1220
> *** glibc detected *** corrupted double-linked list: 0x0000002a98279a98 ***
> Aborted
>
> Vincent.

Another addition:
the packbits tiff file appears to be readable, but the 4th (lower right) 
quadrant of the image is empty (in openev). This is not the case in the tiff 
without any compression.

Vincent.
>
> On Thursday 17 February 2005 17:00, Vincent Schut wrote:
> > Hi all,
> >
> > when I try to save a tiff file with deflate compressing, I get the
> > following:
> >
> > gdalwarp -dstnodata 0 -rb -co "COMPRESS=DEFLATE"
> > AST_09_003050620030251590000000.VNIR.vrt
> > AST_09_003050620030251590000000.VNIR.warped.deflate.tif
> > Creating output file that is 5511P x 4882L.
> >
> > :0...10...20..ERROR 1:
> >
> > ZIPDecode:AST_09_003050620030251590000000.VNIR.warped.deflate.tif:
> > Decoding error at scanline 0, incorrect header check
> > ERROR 1: TIFFReadEncodedStrip() failed.
> >
> > ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> >
> > I tried this with all possible combinations of internal/external
> > libtiff/libgeotiff (even compiled libgeotiff from cvs on my system to
> > test that!) but nothing helps. The same warp using no compression works
> > fine. Any clues?
> >
> > Using gdal from cvs, libtiff 3.7.1 or gdal's, libgeotiff from cvs or
> > gdal's, zlib 1.2.2, system is gentoo linux on amd64, diskspace is plenty.
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@xserve.flids.com
> > http://xserve.flids.com/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev

From fwarmerdam at gmail.com  Thu Feb 17 11:13:55 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] error when creating tiff with COMPRESS=DEFLATE
In-Reply-To: <200502171700.58542.vincent@ecovla.nl>
References: <200502171700.58542.vincent@ecovla.nl>
Message-ID: <931f8ea90502170813586708c8@mail.gmail.com>

On Thu, 17 Feb 2005 17:00:58 +0100, Vincent Schut <vincent@ecovla.nl> wrote:
> Hi all,
> 
> when I try to save a tiff file with deflate compressing, I get the following:

Vincent,

I believe there is an open bug report against libtiff (or GDAL?) related
to use of update-in-place access with compressed files.  It does not
seem to be working currently.  In the meantime, you should warp
into an uncompressed file and then use gdal_translate to convert
to compressed format. 

I am hoping Andrey can look into this issue, but it may be some time before
he has a chance.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Thu Feb 17 11:57:11 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Re: RasterIO: replicating a value
In-Reply-To: <cv1i7q$ecg$1@sea.gmane.org>
References: <cv07s8$sds$1@sea.gmane.org>
	<931f8ea90502161432382963d7@mail.gmail.com>
	<cv0l74$atq$1@sea.gmane.org>
	<931f8ea905021617306ebe9e73@mail.gmail.com>
	<cv1i7q$ecg$1@sea.gmane.org>
Message-ID: <931f8ea9050217085760a0cfda@mail.gmail.com>

On Wed, 16 Feb 2005 23:50:55 -0800, Carlos A. Rueda <carueda@ucdavis.edu> wrote:
> Hi Frank again,
> 
> OK, the Fill() seems to be a reasonable way to assure that
> you put some appropriate "background" value. That's OK.
> However, I'm still noticing something wrong regarding my
> original posting: replicating a value. The attached test
> program creates a 10x6 1-band raster of type byte; fills
> it with '_' and then calls RasterIO to set the upper left
> 7x3 region with 'X':
>
Carlos,

Yikes!  You are right.  This expansion is broken in GDAL and likely
has been since the beginning of time.  I have submitted a bug report
without your excellent little demonstration program. 

  http://208.24.120.44/show_bug.cgi?id=773

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pgao at esri.com  Thu Feb 17 12:53:51 2005
From: pgao at esri.com (=?utf-8?b?R2FvLA==?= Peng)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] GDAL release 1.2.6?
Message-ID: <loom.20050217T185238-835@post.gmane.org>

Is it coming soon? 

Thanks,
Gao, Peng


From fwarmerdam at gmail.com  Thu Feb 17 13:04:27 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] GDAL release 1.2.6?
In-Reply-To: <loom.20050217T185238-835@post.gmane.org>
References: <loom.20050217T185238-835@post.gmane.org>
Message-ID: <931f8ea90502171004383929a5@mail.gmail.com>

On Thu, 17 Feb 2005 17:53:51 +0000 (UTC), Gao, Peng <pgao@esri.com> wrote:
> Is it coming soon?

Peng,

Yes, I am hoping GDAL 1.2.6 will be released pretty soon.   Perhaps I will 
issue a beta by Monday. 

I am trying to finish up the MrSID driver optimization (first pass is in
CVS now), and finish up the change to the GDALRasterBand cache
handling for very large images (the two level cache). 

Once I have the 1.2.6 out I need to work on VB6 bindings for GDAL and
then back to the rest of your TODO items.   

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jvarga at boulder.net  Thu Feb 17 13:22:57 2005
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Followup: The Dangermond Fellowship
Message-ID: <4214E101.9060406@boulder.net>

I asked for clarification from LAF regarding the three $10,000.00 grants 
for LA grad students pertaining to the use of GIS.  Any tool the 
recipient desires to use is ok, (i.e., can be open source and doesn't 
need to include ESRI software), so long as the Fellowship's objectives...

> promote and facilitate the integration of art, science, method, and technology in the study and profession of landscape architecture, and encourage the use of geographic information systems (GIS) as a framework for exploring integrated approaches to landscape assessment and intervention.

...are met.

Official response below.

-jv

-------- Original Message --------
Subject: [LARCH-L] The Dangermond Fellowship
Date: Thu, 17 Feb 2005 12:50:29 -0500
From: James F. Palmer <zooey@MAILBOX.SYR.EDU>
Reply-To: Landscape Architecture Electronic Forum <LARCH-L@LISTSERV.SYR.EDU>
To: LARCH-L@LISTSERV.SYR.EDU

I asked for a clarification to Jack Varga's question from LAF and
ESRI.  Here is the official response.

Jim Palmer


The answer to Jack Varga's question is that students are free to use
whatever GIS technology they wish. The important thing is to show how GIS
can be used in both landscape analysis and intervention (design). I think
all of us ... at ESRI and in the associations ... would like the students to
explore the power and potential of GIS and other spatial technologies as
applied to the field of landscape architecture.


\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\

                    James F. Palmer, Ph.D., FASLA
                 Professor of Landscape Architecture
        SUNY College of Environmental Science and Forestry
                        Syracuse, NY 13210
     voice: 315 470-6548      internet: zooey@mailbox.syr.edu

\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\%\

From numerous at gmail.com  Thu Feb 17 17:28:15 2005
From: numerous at gmail.com (Yar)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] MrSID display problem
Message-ID: <loom.20050217T231156-411@post.gmane.org>

I'm running Mapserver 4.0 on Windows XP
I downloaded GDAL 1.2.5 (windows) and DSDK 4.0.10.720 (windows), nmake.opt 
seemed to be correctly configured, I did a build and install. Next, in my map 
file I defined a a layer:

LAYER
NAME "14_1_1.sid"
data "mrsid/14_1_1.sid"
status default
type raster
#processing "bands=1, 2, 3"
END

Next, when I open my map in the browser I get a blank screen. When I go to
View->Source in my IE6, I see the following error:

_________________________________________________________


<b>Warning</b>:  [MapServer Error]: msDrawMap(): Failed to draw layer
named '14_1_1.sid'.
in <b>C:\ITS\Apache2\htdocs\statewide\index.php</b> on line <b>259</b><br />
<br />
<b>Warning</b>:  [MapServer Error]: msDrawRaster(): Unrecognized or
unsupported image format
in <b>C:\ITS\Apache2\htdocs\statewide\index.php</b> on line <b>259</b><br />
<br />
<b>Warning</b>:  [MapServer Error]: drawEPP(): EPPL7 support is not available.
in <b>C:\ITS\Apache2\htdocs\statewide\index.php</b> on line <b>259</b><br />
<br />
<b>Fatal error</b>:  Object expected as argument. in
<b>C:\ITS\Apache2\htdocs\statewide\index.php</b> on line <b>280</b><br

________________________________________________________________

Is it because my layer is not defined correctly, or because Mapserver
needs to be configured with GDAL? (I haven't done any modifications to 
Mapserver after I installed GDAL with DSDK) 


From fwarmerdam at gmail.com  Thu Feb 17 17:32:27 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] MrSID Driver Optimization
Message-ID: <931f8ea9050217143213647dcf@mail.gmail.com>

Folks,

Many folks have run into problems with the performance of the MrSID 
driver in GDAL.  This essentially because the MrSID SDK 4.x based
version had no optimization for subwindowed access and it used
a blocksize of imagewidth * 64.  That meant to extra a 200x200 
window you would end up reading several blocks the width of the
whole image.   Not a big issue for small images, but for 50K x 50K
images alot of extra data was being processed.

I have made two major changes:
 1) I now use a block size of 1024x128.   So cached reads will
     end up having to do several reads for a full image width request,
     but small region reads that are cached will be much more reasonable.

 2) I have overridden the RasterIO() call to do direct IO (skipping the
     block cache) for many cases with the notable exception of 
     single scanline requests. 

Things to be wary of: 
 o Doing lots of small RasterIO() that are treated directly wil have
    high overhead.   You can forced cached IO by setting the 
    GDAL_FORCE_CACHING option to YES. 

 o For very large images that are read one scanline at a time it is
    critical that you have the GDAL cache size set large enough to 
    whole one whole row of blocks (times the number of bands).  
    Otherwise you wll have a cache thrashing situation where the
    blocks are re-read for each scanline requested! 

In other notes, I have split out the MrSID SDK 3.x support into a
file named mrsiddataset3.cpp.  I haven't tried building it, and there is
no automatic build support for it.  If you are using the old 3.x 
SDK you could likely rename mrsiddataset3.cpp to mrsiddataset.cpp
and fiddle a bit till it works.  I didn't want to get rid of the MrSID 3 
SDK code but I am not intending to actively support it anymore.  It
was too confusing have all the code for both cases in one giant
file. 

Let me or the list know if you run into problems with the new MrSID
driver implementation. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Thu Feb 17 17:46:22 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Two Level Raster Caches
Message-ID: <931f8ea90502171446f5281b8@mail.gmail.com>

Folks,

Traditionally GDALRasterBands maintain a block cache.  Internally 
this is an array of pointers to GDALRasterBlock objects.  If a block hasn't
been read, the pointer is NULL. 

However, for very large images with relatively small tile sizes it is
possible to have *alot* of block pointers to store.  For instance, a 
1 million by 1 million image with 64x64 tiles would be 244 million
blocks.  The block pointer array alone for this image would be 1GB.

While this is a pretty big image, I have had real-world performance
issues due to the size of the cache pointer array.   

With Peng's encouragement, I have changed to a two-level cache
in some cases.  Basically the first level cache becomes an array 
of pointers to secondary grids which are 64x64 blocks. 

I have done *some* testing of this change, and committed it today.  It
shouldn't cause any problems, but if folks have an issue please let me
know. 

I would add the two level caching only kicks in for images at least
32 blocks wide. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Thu Feb 17 17:50:24 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] MrSID display problem
In-Reply-To: <loom.20050217T231156-411@post.gmane.org>
References: <loom.20050217T231156-411@post.gmane.org>
Message-ID: <931f8ea905021714501ab01399@mail.gmail.com>

On Thu, 17 Feb 2005 22:28:15 +0000 (UTC), Yar <numerous@gmail.com> wrote:
> I'm running Mapserver 4.0 on Windows XP
> I downloaded GDAL 1.2.5 (windows) and DSDK 4.0.10.720 (windows), nmake.opt
> seemed to be correctly configured, I did a build and install. Next, in my map
> file I defined a a layer:

Yar, 

You should verify that the MrSID driver is correctly configured.
Something like "gdalinfo --format mrsid" should report information if
the mrsid driver is properly enabled. 

If not, go back to your nmake.opt and make sure you do a full clean
build after changing options. 

After that you might need to verify that the new GDAL is *really* getting
used by mapserver.  It is common to mix up DLLs in situtations like
this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From werchowyna at pf.pl  Thu Feb 17 17:56:23 2005
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] man pages mixed
References: <000801c5091a$fa71d150$03d21d3e@eustahiush>
	<20050202120001.GA9970@intevation.de>
Message-ID: <01f501c51545$3a6e6fd0$62d21d3e@eustahiush>

On Wed, Feb 02, 2005 at 12:23:20PM +0100, Maciek Sieczka wrote:
>> Hi Frank
>>
>> On my gdal-cvs-20050115 built from source the man pages for gdal_contour
>> and gdaltindex are mixed into one - /usr/local/man/man1/gdaltindex.1.bz2.
>> Is it GDAL's fault?

>It it the fault of a wront doxygen configuration for the creation of
>manpages.

>Frank, could you please apply the following patch to the gdal-cvs?
>It should fix the problem
>Many thanks,
> Silke

Silke

Now (gdal-cvs-20050215) gdal_contour man is missing for good!

> (and additionally fix the case that no pct2rgb.py-manpage is created).

No sign of pct2rgb.py man though, hmm.

BTW - is ogr_utilities man supposed to be empty - the way it is now?

Maciek

>-- gdal-1.2.5.orig/gcore/gdal_utilities.dox
>++ gdal-1.2.5/gcore/gdal_utilities.dox
>@ -578,7 +578,8 @@
>\if man
>\section wauthor AUTHOR
> Frank Warmerdam <warmerdam@pobox.com>
>-
>+*/
>+/*! \page gdal_contour
>builds vector contour lines from a raster elevation model
> \section isynopsis SYNOPSIS
>\endif
>@@ -702,6 +703,8 @@
> \if man
> \section iauthor AUTHOR
> Frank Warmerdam <warmerdam@pobox.com>
>+*/
>+/*! \page pct2rgb.py
>
 >converts an image into a pseudo-colored image
 >\section rsynopsis SYNOPSIS 


From werchowyna at pf.pl  Thu Feb 17 17:57:53 2005
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal --with-netcdf troubles
Message-ID: <01f601c51545$3b818d80$62d21d3e@eustahiush>

Folks

I'm having problems with building gdal --with-netcdf.

How should I proceed? I can't install netcdf (3.5.1) alone because it claims 
it is in conflict with already installed hdf4. And when I try to use the 
netcdf components which came to my system from this hdf4 (4.2r0), I get an 
error like below:

./configure --with-hdf4=/usr/local --with-libz=internal --with-png=internal  
--with-libtiff=internal --with-geotiff=internal --with-jpeg=internal --with-gif=internal 
 --with-geos=yes --with-netcdf=/usr/local/lib

checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lmfhdf... no
configure: error: HDF4 support requested with arg /usr/local, but neither 
hdf4 nor mfhdf lib found

But - when I don't specify --with-netcdf=... then gdal builds OK with hdf4 
support:

checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... yes
checking for jpc_decode in -ljasper... no

Not that I need netcdf badly, but I got puzzled and would like to sort it 
out. Besides - why does gdal complain about hdf4 when it's all about netcdf 
actually?

Maciek 


From numerous at gmail.com  Thu Feb 17 18:33:21 2005
From: numerous at gmail.com (Yar)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdalinfo.exe problem
Message-ID: <loom.20050218T003255-953@post.gmane.org>

Thank You Frank!

I tried running gdalinfo.exe from command line, but I get the following error:

This application failed to start because lti_dsdk_dll.dll was not found. Re-
installing the application may fix this problem.

What's in lti_dsdk_dll.dll? Can I simply obtain this dll and copy it to a 
certain directory? If yes, where do I get it and where do I copy it to?




From MChapman at sanz.com  Thu Feb 17 18:37:45 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdalinfo.exe problem
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFFD2@IM.san.com>

Copy those dll's from the srsid lib dir into the gdal/apps dir, or add
them to your path.

Martin

-----Original Message-----
From: Yar [mailto:numerous@gmail.com] 
Sent: Thursday, February 17, 2005 4:33 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] gdalinfo.exe problem


Thank You Frank!

I tried running gdalinfo.exe from command line, but I get the following
error:

This application failed to start because lti_dsdk_dll.dll was not found.
Re- installing the application may fix this problem.

What's in lti_dsdk_dll.dll? Can I simply obtain this dll and copy it to
a 
certain directory? If yes, where do I get it and where do I copy it to?



_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From fwarmerdam at gmail.com  Thu Feb 17 18:55:28 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal --with-netcdf troubles
In-Reply-To: <01f601c51545$3b818d80$62d21d3e@eustahiush>
References: <01f601c51545$3b818d80$62d21d3e@eustahiush>
Message-ID: <931f8ea905021715552ee61f45@mail.gmail.com>

On Thu, 17 Feb 2005 23:57:53 +0100, Maciek Sieczka <werchowyna@pf.pl> wrote:
> Folks
> 
> I'm having problems with building gdal --with-netcdf.
> 
> How should I proceed? I can't install netcdf (3.5.1) alone because it claims
> it is in conflict with already installed hdf4. And when I try to use the
> netcdf components which came to my system from this hdf4 (4.2r0), I get an
> error like below:
> 
> ./configure --with-hdf4=/usr/local --with-libz=internal --with-png=internal
> --with-libtiff=internal --with-geotiff=internal --with-jpeg=internal --with-gif=internal
>  --with-geos=yes --with-netcdf=/usr/local/lib
> 
> checking for FMEObjects... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lhdf4... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lmfhdf... no
> configure: error: HDF4 support requested with arg /usr/local, but neither
> hdf4 nor mfhdf lib found
> 
> But - when I don't specify --with-netcdf=... then gdal builds OK with hdf4
> support:
> 
> checking for FMEObjects... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lhdf4... no
> checking for SDreaddata in -lmfhdf... yes
> checking for jpc_decode in -ljasper... no
> 
> Not that I need netcdf badly, but I got puzzled and would like to sort it
> out. Besides - why does gdal complain about hdf4 when it's all about netcdf
> actually?
> 
Maciek,

I don't know why the HDF isn't working.  Are you sure the libraries
are under /usr/local?  You can't use the netcdf API embedded in 
the HDF libraries to read netcdf files.  I believe the API is intended
to make it easy for netcdf applications to read HDF files. 

If you want netcdf, then include it and not HDF.  If you want HDF
include HDF and not netcdf.  If you really want both there is some
messy hacking you will have to do rebuilding the HDF library to not
include the fake netcdf API.   I managed to accomplish this on windows
and unix here but it is a mess. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From numerous at gmail.com  Thu Feb 17 19:34:15 2005
From: numerous at gmail.com (Yar)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] MrSID, GDAL & Mapserver
Message-ID: <loom.20050218T012929-457@post.gmane.org>

Thank you Frank and Martin,

I got gdalinfo to work, I still cannot display my MrSID, and I'm getting the 
same error message in IE.

I do get the following info when I run gdalinfo on my file:

C:\ITS\GDAL\125\bin>gdalinfo
Usage: gdalinfo [--help-general] [-mm] [-nogcp] [-nomd] datasetname

C:\ITS\GDAL\125\bin>gdalinfo --format mrsid
Format Details:
  Short Name: MrSID
  Long Name: Multi-resolution Seamless Image Database (MrSID)
  Help Topic: frmt_mrsid.html

C:\ITS\GDAL\125\bin>


C:\ITS\GDAL\125\bin>gdalinfo C:\its\Apache2\htdocs\statewide\shape_files\mrsid\1
4_1_1.sid
Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)
Size is 24066, 25370
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-99],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26914"]]
Origin = (653334.000000,3916062.000000)
Pixel Size = (0.30000000,-0.30000000)
Metadata:
  GEOTIFF_CHAR__GTModelTypeGeoKey=ModelTypeProjected
  GEOTIFF_CHAR__GTRasterTypeGeoKey=RasterPixelIsArea
  GEOTIFF_CHAR__ProjectedCSTypeGeoKey=PCS_NAD83_UTM_zone_14N
  GEOTIFF_CHAR__ProjLinearUnitsGeoKey=Linear_Meter
  GEOTIFF_NUM__1024__GTModelTypeGeoKey=1
  GEOTIFF_NUM__1025__GTRasterTypeGeoKey=1
  GEOTIFF_NUM__1026__GTCitationGeoKey=IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.9.2.4 $ $Date: 2002/01/24 16:43:13Z $
Projection Name = NAD_1983_UTM_Zone_14N
Units = meters
GeoTIFF Units = meters
  GEOTIFF_NUM__3072__ProjectedCSTypeGeoKey=26914
  GEOTIFF_NUM__3073__PCSCitationGeoKey=IMAGINE GeoTIFF Support
Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: egtf.c $ $Revision: 1.9.2.4 $ $Date: 2002/01/24 16:43:13Z $
UTM Zone 14N
Ellipsoid = GRS 1980
Datum = NAD83
  GEOTIFF_NUM__3076__ProjLinearUnitsGeoKey=9001
  IMAGE__BITS_PER_SAMPLE=8
  IMAGE__COLOR_SCHEME=0
  IMAGE__COMPRESSION_BLOCK_SIZE=512
  IMAGE__COMPRESSION_GAMMA=2.000000
  IMAGE__COMPRESSION_NLEV=9
  IMAGE__COMPRESSION_VERSION=2,0,0
  IMAGE__COMPRESSION_WEIGHT=2.000000
  IMAGE__CREATION_DATE=Fri Apr 16 18:34:39 2004

  IMAGE__DATA_TYPE=0
  IMAGE__DYNAMIC_RANGE_LEVEL=127.500000
  IMAGE__DYNAMIC_RANGE_WINDOW=256.000000
  IMAGE__HEIGHT=25370
  IMAGE__INPUT_FILE_SIZE=1831867219.000000
  IMAGE__INPUT_FORMAT=GeoTIFF
  IMAGE__INPUT_NAME=I:\OKC_High_Res\14_1_area01\ochipdata.tif
  IMAGE__TARGET_COMPRESSION_RATIO=20.000000
  IMAGE__WIDTH=24066
  IMAGE__XY_ORIGIN=653334.150000,3916061.850000
  IMAGE__X_RESOLUTION=0.300000
  IMAGE__Y_RESOLUTION=0.300000
Corner Coordinates:
Upper Left  (  653334.000, 3916062.000) ( 97d18'43.12"W, 35d22'34.01"N)
Lower Left  (  653334.000, 3908451.000) ( 97d18'48.26"W, 35d18'27.06"N)
Upper Right (  660553.800, 3916062.000) ( 97d13'57.11"W, 35d22'29.92"N)
Lower Right (  660553.800, 3908451.000) ( 97d14'2.49"W, 35d18'22.98"N)
Center      (  656943.900, 3912256.500) ( 97d16'22.74"W, 35d20'28.52"N)
Band 1 Block=24066x64 Type=Byte, ColorInterp=Red
  Overviews: 12033x12685, 6017x6343, 3009x3172, 1505x1586, 753x793, 377x397, 189
x199, 95x100
Band 2 Block=24066x64 Type=Byte, ColorInterp=Green
  Overviews: 12033x12685, 6017x6343, 3009x3172, 1505x1586, 753x793, 377x397, 189
x199, 95x100
Band 3 Block=24066x64 Type=Byte, ColorInterp=Blue
  Overviews: 12033x12685, 6017x6343, 3009x3172, 1505x1586, 753x793, 377x397, 189
x199, 95x100

C:\ITS\GDAL\125\bin>


Any hints on what I should try next to display the MrSID, could it be a layer 
problem?

Thank you!

Yar


From MChapman at sanz.com  Thu Feb 17 21:46:07 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] MrSID, GDAL & Mapserver
Message-ID: <ED3A48B9840E594890A2BC172D11946502D4D3E6@IM.san.com>

Yar,
 
I really couldn't tell you whether it's all correct or not, but it looks like gdal read it just fine...which would mean your problem is somewhere else.  I did notice it's pretty big though.  It may take several minutes to open if MapServer is loading the whole thing.  Did you copy the new gdal lib and dll into the mapserver directory for libs?  Can you open it with the imageviewer exe that comes with the mrsid sdk?  It's in /bin or something like that.  Can you try to use a smaller sid file.  This sounds like a MapServer config issue to me.
 
Martin
 
 
 
-----Original Message----- 
From: Yar [mailto:numerous@gmail.com] 
Sent: Thu 2/17/2005 5:34 PM 
To: gdal-dev@remotesensing.org 
Cc: 
Subject: [Gdal-dev] MrSID, GDAL & Mapserver



	Thank you Frank and Martin,
	
	I got gdalinfo to work, I still cannot display my MrSID, and I'm getting the
	same error message in IE.
	
	I do get the following info when I run gdalinfo on my file:
	
	C:\ITS\GDAL\125\bin>gdalinfo
	Usage: gdalinfo [--help-general] [-mm] [-nogcp] [-nomd] datasetname
	
	C:\ITS\GDAL\125\bin>gdalinfo --format mrsid
	Format Details:
	  Short Name: MrSID
	  Long Name: Multi-resolution Seamless Image Database (MrSID)
	  Help Topic: frmt_mrsid.html
	
	C:\ITS\GDAL\125\bin>
	
	
	C:\ITS\GDAL\125\bin>gdalinfo C:\its\Apache2\htdocs\statewide\shape_files\mrsid\1
	4_1_1.sid
	Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)
	Size is 24066, 25370
	Coordinate System is:
	PROJCS["unnamed",
	    GEOGCS["NAD83",
	        DATUM["North_American_Datum_1983",
	            SPHEROID["GRS 1980",6378137,298.2572221010002,
	                AUTHORITY["EPSG","7019"]],
	            AUTHORITY["EPSG","6269"]],
	        PRIMEM["Greenwich",0],
	        UNIT["degree",0.0174532925199433],
	        AUTHORITY["EPSG","4269"]],
	    PROJECTION["Transverse_Mercator"],
	    PARAMETER["latitude_of_origin",0],
	    PARAMETER["central_meridian",-99],
	    PARAMETER["scale_factor",0.9996],
	    PARAMETER["false_easting",500000],
	    PARAMETER["false_northing",0],
	    UNIT["metre",1,
	        AUTHORITY["EPSG","9001"]],
	    AUTHORITY["EPSG","26914"]]
	Origin = (653334.000000,3916062.000000)
	Pixel Size = (0.30000000,-0.30000000)
	Metadata:
	  GEOTIFF_CHAR__GTModelTypeGeoKey=ModelTypeProjected
	  GEOTIFF_CHAR__GTRasterTypeGeoKey=RasterPixelIsArea
	  GEOTIFF_CHAR__ProjectedCSTypeGeoKey=PCS_NAD83_UTM_zone_14N
	  GEOTIFF_CHAR__ProjLinearUnitsGeoKey=Linear_Meter
	  GEOTIFF_NUM__1024__GTModelTypeGeoKey=1
	  GEOTIFF_NUM__1025__GTRasterTypeGeoKey=1
	  GEOTIFF_NUM__1026__GTCitationGeoKey=IMAGINE GeoTIFF Support
	Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
	@(#)$RCSfile: egtf.c $ $Revision: 1.9.2.4 $ $Date: 2002/01/24 16:43:13Z $
	Projection Name = NAD_1983_UTM_Zone_14N
	Units = meters
	GeoTIFF Units = meters
	  GEOTIFF_NUM__3072__ProjectedCSTypeGeoKey=26914
	  GEOTIFF_NUM__3073__PCSCitationGeoKey=IMAGINE GeoTIFF Support
	Copyright 1991 - 2001 by ERDAS, Inc. All Rights Reserved
	@(#)$RCSfile: egtf.c $ $Revision: 1.9.2.4 $ $Date: 2002/01/24 16:43:13Z $
	UTM Zone 14N
	Ellipsoid = GRS 1980
	Datum = NAD83
	  GEOTIFF_NUM__3076__ProjLinearUnitsGeoKey=9001
	  IMAGE__BITS_PER_SAMPLE=8
	  IMAGE__COLOR_SCHEME=0
	  IMAGE__COMPRESSION_BLOCK_SIZE=512
	  IMAGE__COMPRESSION_GAMMA=2.000000
	  IMAGE__COMPRESSION_NLEV=9
	  IMAGE__COMPRESSION_VERSION=2,0,0
	  IMAGE__COMPRESSION_WEIGHT=2.000000
	  IMAGE__CREATION_DATE=Fri Apr 16 18:34:39 2004
	
	  IMAGE__DATA_TYPE=0
	  IMAGE__DYNAMIC_RANGE_LEVEL=127.500000
	  IMAGE__DYNAMIC_RANGE_WINDOW=256.000000
	  IMAGE__HEIGHT=25370
	  IMAGE__INPUT_FILE_SIZE=1831867219.000000
	  IMAGE__INPUT_FORMAT=GeoTIFF
	  IMAGE__INPUT_NAME=I:\OKC_High_Res\14_1_area01\ochipdata.tif
	  IMAGE__TARGET_COMPRESSION_RATIO=20.000000
	  IMAGE__WIDTH=24066
	  IMAGE__XY_ORIGIN=653334.150000,3916061.850000
	  IMAGE__X_RESOLUTION=0.300000
	  IMAGE__Y_RESOLUTION=0.300000
	Corner Coordinates:
	Upper Left  (  653334.000, 3916062.000) ( 97d18'43.12"W, 35d22'34.01"N)
	Lower Left  (  653334.000, 3908451.000) ( 97d18'48.26"W, 35d18'27.06"N)
	Upper Right (  660553.800, 3916062.000) ( 97d13'57.11"W, 35d22'29.92"N)
	Lower Right (  660553.800, 3908451.000) ( 97d14'2.49"W, 35d18'22.98"N)
	Center      (  656943.900, 3912256.500) ( 97d16'22.74"W, 35d20'28.52"N)
	Band 1 Block=24066x64 Type=Byte, ColorInterp=Red
	  Overviews: 12033x12685, 6017x6343, 3009x3172, 1505x1586, 753x793, 377x397, 189
	x199, 95x100
	Band 2 Block=24066x64 Type=Byte, ColorInterp=Green
	  Overviews: 12033x12685, 6017x6343, 3009x3172, 1505x1586, 753x793, 377x397, 189
	x199, 95x100
	Band 3 Block=24066x64 Type=Byte, ColorInterp=Blue
	  Overviews: 12033x12685, 6017x6343, 3009x3172, 1505x1586, 753x793, 377x397, 189
	x199, 95x100
	
	C:\ITS\GDAL\125\bin>
	
	
	Any hints on what I should try next to display the MrSID, could it be a layer
	problem?
	
	Thank you!
	
	Yar
	
	_______________________________________________
	Gdal-dev mailing list
	Gdal-dev@xserve.flids.com
	http://xserve.flids.com/mailman/listinfo/gdal-dev
	

From fwarmerdam at gmail.com  Fri Feb 18 00:16:26 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] MrSID, GDAL & Mapserver
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502D4D3E6@IM.san.com>
References: <ED3A48B9840E594890A2BC172D11946502D4D3E6@IM.san.com>
Message-ID: <931f8ea9050217211651bdc77a@mail.gmail.com>

On Thu, 17 Feb 2005 19:46:07 -0700, Chapman, Martin <MChapman@sanz.com> wrote:
> Yar,
> 
> I really couldn't tell you whether it's all correct or not, but it looks like gdal read it just fine...which would mean your problem is somewhere else.  I did notice it's pretty big though.  It may take several minutes to open if MapServer is loading the whole thing.  Did you copy the new gdal lib and dll into the mapserver directory for libs?  Can you open it with the imageviewer exe that comes with the mrsid sdk?  It's in /bin or something like that.  Can you try to use a smaller sid file.  This sounds like a MapServer config issue to me.
> 
> Martin

Yar, 

I agree with Martin.  I don't see anything odd about the
file, so you should review your mapfile definitions 
(especially extents and coordinate system) carefully, 
and of course ensure that your MapServer is really 
using the same GDAL as the gdalinfo you ran.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From eric.doenges at gmx.net  Fri Feb 18 02:07:33 2005
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] GDAL GCPsToGeoTransform Problem
In-Reply-To: <4214BDC1.3070207@atlantis-scientific.com>
References: <031401c514f5$76006e90$8901a8c0@David>	<931f8ea905021706125d859758@mail.gmail.com>
	<01a4e3d1f84dba72169c07c9d2ec4474@gmx.net>
	<4214BDC1.3070207@atlantis-scientific.com>
Message-ID: <f432c5fc0602d65f01c09de94671d988@gmx.net>


Am 17.02.2005 um 16:52 schrieb Gillian Walter:

> Eric D?nges wrote:
>> While I am reasonably sure the GCPsToGeoTransform code is 
>> mathematically correct (the
>> equations were determined with a symbolic algebra package), it is 
>> probably not optimal
>> from a numerical standpoint. The problem is that if you have lots of 
>> GCPs with large
>> coordinates, the calculations may overflow 'mere' 64 bit double 
>> arithmetic (not being
>> a mathematician, I wrote the code for clarity, not numerical 
>> stability). Looking
>> at the equations, I do not see an obvious solution for avoiding the 
>> rather large
>> temporary values during the calculation.
>
> If large intermediate values are the problem, maybe the gcps could be 
> shifted by an offset, and then shifted back?  ie. subtract mean(pixel 
> values), mean(line values), mean(x values), mean(y values) from each 
> gcp, do a fit to the shifted gcps so you'd end up with (where gt is 
> the geotransform):
>
> x - xmean = gt[0] + gt[1](p - pmean) + gt[2](l - lmean)
> y - ymean = gt[3] + gt[4](p - pmean) + gt[5](l - lmean)
>
> then the real gt[0] and gt[3] would be:
>
> gt[0] actual = gt[0] + xmean - gt[1]*pmean - gt[2]*lmean
> gt[3] actual = gt[3] + ymean - gt[4]*pmean - gt[5]*lmean
>
> or something like that.   The fit code seems to have a lot of sums of 
> squares of pixel/line/x/y values, and this should make them smaller.  
> You might also be able to do some kind of normalization by spread to 
> make them even smaller if necessary.
> Gillian

I'm not sure if this will help with floating point arithmetic, since 
the way I
understand floating point arithmetic (and I may be completely wrong 
here !), the
problem is not absolute magnitude (IEEE doubles go to something like 
10^108 or so,
I believe), but relative magnitude between numbers. In our case, we 
would need to
loose the products of pixel/line/x/y values, i.e. try to rework the 
equations so that
the intermediate results are not several orders of magnitude larger or 
smaller than
the input values. A possibly simpler solution might be to simply switch 
to using
'long double'; however I am not sure how well this data type is 
supported on
different compilers.

Another thought I had is that the original poster 
(<dlegault@vantpoint.com>) should
check the return value of GCPsToGeoTransform - it may be that the 
complete set
of GCPs does not result in a valid transform (which is possible if some 
of the GCPs
are poorly placed) and thus the function returns gibberish.

With kind regards,
Eric

From brodin_ign at gva.es  Fri Feb 18 04:30:33 2005
From: brodin_ign at gva.es (Nacho)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Mapserver and Gdal with Ecw
Message-ID: <200502181030.33232.brodin_ign@gva.es>

Hi,
I've compiled MapServer with Gdal and Ecw support in Linux and it I've got an 
error when I request an image in a small scale in this conditions:

Image Size: 350830x661256 px, 17530964 KB
Bounding Box: 
724484.334581317,4346590.549035932,725775.6088994413,4347793.168699379
Request size image: WIDTH=335 HEIGHT=312
Exception:
Error 48 "Could not perform Read/Write onGDALRasterIO() failed: drawGDAL(): 
Unable to access file. GDAL
RasterIO() failed: drawGDAL()

If I request a bigger image I can obtain this error with a smaller bounding 
box. In windows with the same image and request parameters and the same 
server conditions I don't get any error. I thought that the problem is in 
Gdal but I am not sure.

Best regards,


From csab7771 at uibk.ac.at  Fri Feb 18 08:44:18 2005
From: csab7771 at uibk.ac.at (csab7771@uibk.ac.at)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] important
Message-ID: <20050218123843.E7A81906CB4@xserve.flids.com>

Please confirm the document.

++++ Attachment: No Virus found
++++ F-Secure AntiVirus - www.f-secure.com

-------------- next part --------------
A non-text attachment was scrubbed...
Name: text.zip
Type: application/octet-stream
Size: 29834 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050218/bcfce9fc/text.obj
From fwarmerdam at gmail.com  Fri Feb 18 08:33:29 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Mapserver and Gdal with Ecw
In-Reply-To: <200502181030.33232.brodin_ign@gva.es>
References: <200502181030.33232.brodin_ign@gva.es>
Message-ID: <931f8ea905021805335edf1030@mail.gmail.com>

On Fri, 18 Feb 2005 10:30:33 +0100, Nacho <brodin_ign@gva.es> wrote:
> Hi,
> I've compiled MapServer with Gdal and Ecw support in Linux and it I've got an
> error when I request an image in a small scale in this conditions:
> 
> Image Size: 350830x661256 px, 17530964 KB

Nacho, 

That is a whopper of an image!

> Bounding Box:
> 724484.334581317,4346590.549035932,725775.6088994413,4347793.168699379
> Request size image: WIDTH=335 HEIGHT=312
> Exception:
> Error 48 "Could not perform Read/Write onGDALRasterIO() failed: drawGDAL():
> Unable to access file. GDAL
> RasterIO() failed: drawGDAL()

This error message does not suggest anything obvious to me as to why it
is failing other than that it does seem to be failing within the RasterIO()
call. 
 
Linux is not an officially supported platform by ERMapper and I did find
a few things I had to change in the ECW SDK to get good operation
on my machine.  Did you build the ECW SDK yourself from source? 

Would you be willing to try and reproduce the same problem with the 
FWTools 0.9.6 for Linux?  ( http://fwtools.maptools.org/ )   If you can 
reproduce it with that binary on an image small enough for me to 
get a copy I should be able to track down the problem.   Alternatively,
if you can provide ssh access to your system I might be able to login
and do some debugging "in place". 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From werchowyna at pf.pl  Fri Feb 18 10:32:47 2005
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal --with-netcdf troubles
References: <01f601c51545$3b818d80$62d21d3e@eustahiush>
	<931f8ea905021715552ee61f45@mail.gmail.com>
Message-ID: <001401c515cf$888ad2a0$23d21d3e@eustahiush>

From: "Frank Warmerdam" <fwarmerdam@gmail.com>

> On Thu, 17 Feb 2005 23:57:53 +0100, Maciek Sieczka <werchowyna@pf.pl> 
> wrote:
>> Folks
>>
>> I'm having problems with building gdal --with-netcdf.
>>
>> How should I proceed? I can't install netcdf (3.5.1) alone because it 
>> claims
>> it is in conflict with already installed hdf4. And when I try to use the
>> netcdf components which came to my system from this hdf4 (4.2r0), I get 
>> an
>> error like below:
>>
>> ./configure --with-hdf4=/usr/local --with-libz=internal --with-png=internal
>> --with-libtiff=internal --with-geotiff=internal --with-jpeg=internal --with-gif=internal
>>  --with-geos=yes --with-netcdf=/usr/local/lib
>>
>> checking for FMEObjects... no
>> checking for SDreaddata in -lmfhdf... no
>> checking for SDreaddata in -lhdf4... no
>> checking for SDreaddata in -lmfhdf... no
>> checking for SDreaddata in -lmfhdf... no
>> configure: error: HDF4 support requested with arg /usr/local, but neither
>> hdf4 nor mfhdf lib found
>>
>> But - when I don't specify --with-netcdf=... then gdal builds OK with 
>> hdf4
>> support:
>>
>> checking for FMEObjects... no
>> checking for SDreaddata in -lmfhdf... no
>> checking for SDreaddata in -lhdf4... no
>> checking for SDreaddata in -lmfhdf... yes
>> checking for jpc_decode in -ljasper... no
>>
>> Not that I need netcdf badly, but I got puzzled and would like to sort it
>> out. Besides - why does gdal complain about hdf4 when it's all about 
>> netcdf
>> actually?

> Maciek,
>
> I don't know why the HDF isn't working.  Are you sure the libraries
> are under /usr/local?

Frank

My hdf4 libs are in /usr/local/lib :

[pingwin@localhost lib]$ $PWD
bash: /usr/local/lib: is a directory
[pingwin@localhost lib]$ ls | grep -i hdf
libmfhdf.a

And both "--with-hdf4=/usr/local" and "--with-hdf4=/usr/local/lib" work. So 
I can build --with-hdf4, no problem here.

What I mean is that anytime I demand "--with-netcdf=anything_or_whatever" 
(not having it installed!) the hdf4 support fails to build - although the 
hdf4 libs ARE THERE in /usr/local/lib (as shown above):

./configure --with-hdf4=/usr/local/lib --with-libz=internal --with-png=internal 
 --with-libtiff=internal --with-geotiff=internal --with-jpeg=internal --with-gif=internal 
 --with-geos=yes --with-netcdf=/usr/local/lib

checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lmfhdf... no
configure: error: HDF4 support requested with arg /usr/local/lib, but 
neither hdf4 nor mfhdf lib found

Which I thought was strange and potentially missleading - it is the netcdf 
support which should fail to build in such case, not the hdf4 support. Or am 
I wrong here?

Just to clariffy more here is a proof that if I don't input the 
"--with-netcdf=..." all is just fine:

./configure --with-hdf4=/usr/local/lib --with-libz=internal --with-png=internal 
 --with-libtiff=internal --with-geotiff=internal --with-jpeg=internal --with-gif=internal 
 --with-geos=yes

checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... yes

> You can't use the netcdf API embedded in
> the HDF libraries to read netcdf files.  I believe the API is intended
> to make it easy for netcdf applications to read HDF files.

Ok.

> If you want netcdf, then include it and not HDF.  If you want HDF
> include HDF and not netcdf.  If you really want both there is some
> messy hacking you will have to do rebuilding the HDF library to not
> include the fake netcdf API.   I managed to accomplish this on windows
> and unix here but it is a mess.

And it is implemented in your FWTools 0.9.6 right?

bye
Maciek 


From fwarmerdam at gmail.com  Fri Feb 18 10:42:30 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal --with-netcdf troubles
In-Reply-To: <001401c515cf$888ad2a0$23d21d3e@eustahiush>
References: <01f601c51545$3b818d80$62d21d3e@eustahiush>
	<931f8ea905021715552ee61f45@mail.gmail.com>
	<001401c515cf$888ad2a0$23d21d3e@eustahiush>
Message-ID: <931f8ea90502180742275f345a@mail.gmail.com>

On Fri, 18 Feb 2005 16:32:47 +0100, Maciek Sieczka <werchowyna@pf.pl> wrote:
> And both "--with-hdf4=/usr/local" and "--with-hdf4=/usr/local/lib" work. So
> I can build --with-hdf4, no problem here.
> 
> What I mean is that anytime I demand "--with-netcdf=anything_or_whatever"
> (not having it installed!) the hdf4 support fails to build - although the
> hdf4 libs ARE THERE in /usr/local/lib (as shown above):

Maciek,

Ah, I see.  Some configure targets, when given an explicit path, just
"trust" that the libraries are there and add them to the library list.
 I suspect
what is happening is that the --with-netcdf code isn't checking that 
/usr/local is ok, and instead the libraries are added to the lib list.  Then
when it tries to link with the hdf libraries the link fails because the netcdf
libs aren't found. 

I can see that this is a confusing effect, but I am not inclined to do anything
about it.   Was there a particular reason you were telling configure to 
use netcdf from /usr/local when you knew it wasn't there? 

> > If you want netcdf, then include it and not HDF.  If you want HDF
> > include HDF and not netcdf.  If you really want both there is some
> > messy hacking you will have to do rebuilding the HDF library to not
> > include the fake netcdf API.   I managed to accomplish this on windows
> > and unix here but it is a mess.
>
> And it is implemented in your FWTools 0.9.6 right?

Yes. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ed at topozone.com  Fri Feb 18 10:45:50 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Two Level Raster Caches
Message-ID: <4BF377919225F449BB097CB76FFE9BC818804F@ptolemy.topozone.com>

Frank -

Thanks - this is a nice solution.  Several years ago I implemented a
GDAL driver for Microsoft TerraServer, which I finished just about the
time they added WMS support <g>.  I had a similar problem, since this
(virtual) dataset had a HUGE number of relatively small tiles.  It took
me a while to figure out why my MapServer working set was several
hundred megabytes.

In that case I implemented a linked-list cache to replace the array
cache.  This was a good solution for MapServer's use of GDAL, since any
given run would load a very small number of tiles and typically use each
one only a very few times.

I never contributed the code because I was concerned about having two
different implementations of the cache without a good way of having the
client specify which one was to be used.  In many applications the
linked-list cache would be a very poor choice.  A two-level cache is a
much better "middle ground" that should work well as an all-around
solution.

	- Ed

Ed McNierney
TopoZone.com

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Frank Warmerdam
Sent: Thursday, February 17, 2005 5:46 PM
To: gdal-dev@remotesensing.org
Subject: [Gdal-dev] Two Level Raster Caches

Folks,

Traditionally GDALRasterBands maintain a block cache.  Internally 
this is an array of pointers to GDALRasterBlock objects.  If a block
hasn't
been read, the pointer is NULL. 

However, for very large images with relatively small tile sizes it is
possible to have *alot* of block pointers to store.  For instance, a 
1 million by 1 million image with 64x64 tiles would be 244 million
blocks.  The block pointer array alone for this image would be 1GB.

While this is a pretty big image, I have had real-world performance
issues due to the size of the cache pointer array.   

With Peng's encouragement, I have changed to a two-level cache
in some cases.  Basically the first level cache becomes an array 
of pointers to secondary grids which are 64x64 blocks. 

I have done *some* testing of this change, and committed it today.  It
shouldn't cause any problems, but if folks have an issue please let me
know. 

I would add the two level caching only kicks in for images at least
32 blocks wide. 

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From werchowyna at pf.pl  Fri Feb 18 11:52:33 2005
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal --with-netcdf troubles
References: <01f601c51545$3b818d80$62d21d3e@eustahiush>
	<931f8ea905021715552ee61f45@mail.gmail.com>
	<001401c515cf$888ad2a0$23d21d3e@eustahiush>
	<931f8ea90502180742275f345a@mail.gmail.com>
Message-ID: <007701c515da$58ed2ec0$23d21d3e@eustahiush>

From: "Frank Warmerdam" <fwarmerdam@gmail.com>

> On Fri, 18 Feb 2005 16:32:47 +0100, Maciek Sieczka <werchowyna@pf.pl>
> wrote:
>> And both "--with-hdf4=/usr/local" and "--with-hdf4=/usr/local/lib" work.
>> So
>> I can build --with-hdf4, no problem here.
>>
>> What I mean is that anytime I demand "--with-netcdf=anything_or_whatever"
>> (not having it installed!) the hdf4 support fails to build - although the
>> hdf4 libs ARE THERE in /usr/local/lib (as shown above):
>
> Maciek,
>
> Ah, I see.  Some configure targets, when given an explicit path, just
> "trust" that the libraries are there and add them to the library list.
> I suspect
> what is happening is that the --with-netcdf code isn't checking that
> /usr/local is ok, and instead the libraries are added to the lib list.
> Then
> when it tries to link with the hdf libraries the link fails because the
> netcdf
> libs aren't found.
>
> I can see that this is a confusing effect, but I am not inclined to do
> anything
> about it.   Was there a particular reason you were telling configure to
> use netcdf from /usr/local when you knew it wasn't there?

Well, to me - yes. That's how It happened step by step:

1. Wanted to try to build gdal with netcdf support. Built netcdf from
source, checkinstalled to an rpm.
2. When installing the netcdf from my rpm, I was informed that there is a
conflict between the already installed hdf4 (from an rpm made with
checkinstall as well) and the netcdf I'm trying to install.
3. In general - netcdf refused to install.
4. I noticed that some files (ncgen, ncdump, netcdf.h) are both in my netcdf
and hdf4 rpms. Besides, there are two more files in hdf4 related to netcdf 
by
name - netcdf.inc, netcdf.f90. So I thought that maybe netcdf already comes
together with hdf4 (lame, yes).
5. Then I tried this switch "--with-netcdf=/usr/local/lib" to see how it
would work. And in result not only the netcdf failed to build (which I
suspected to happen after all) but also hdf4 failed while, in theory - it
shouldn't.

And this was confusing so I wanted to try to learn why it happens. Also 
thought it might be an information of some value for you. Sorry for taking 
your time, seems you don't find it any important. Sigh, why am writing this? 
I'd better go do something practical instead ;).

Maciek 


From nhv at cape.com  Fri Feb 18 16:37:09 2005
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal --with-netcdf troubles
In-Reply-To: <007701c515da$58ed2ec0$23d21d3e@eustahiush>
Message-ID: <EKEJIKAILPONGGENMBGAMECNKIAA.nhv@cape.com>

Maciek Sieczka writes:
> 
> 1. Wanted to try to build gdal with netcdf support. Built netcdf from
> source, checkinstalled to an rpm.
> 2. When installing the netcdf from my rpm, I was informed that there is a
> conflict between the already installed hdf4 (from an rpm made with
> checkinstall as well) and the netcdf I'm trying to install.
> 3. In general - netcdf refused to install.
> 4. I noticed that some files (ncgen, ncdump, netcdf.h) are both in my netcdf
> and hdf4 rpms. Besides, there are two more files in hdf4 related to netcdf 
> by
> name - netcdf.inc, netcdf.f90. So I thought that maybe netcdf already comes
> together with hdf4 (lame, yes).
> 5. Then I tried this switch "--with-netcdf=/usr/local/lib" to see how it
> would work. And in result not only the netcdf failed to build (which I
> suspected to happen after all) but also hdf4 failed while, in theory - it
> shouldn't.

You will need to compile hdf4 locally and have it use a mangled
names version of it's internal netcdf.

The key to doing this is buried in the hdf source code

$HDF4_SRC / mfhdf / libsrc / hdf2netcdf.h

/* If using the real netCDF library and API (use -DHAVE_NETCDF)
   need to mangle the HDF versions of netCDF API function names 
   to not conflict w/ oriinal netCDF ones */

This works but you have to 'muck' with your things a bit.

Please ask on the hdf list for any further instructions on how todo this
as this is an HDF issue not a GDAL issue and we would all like to know
the 'easy' way todo this.

Good Luck

Norman

From fwarmerdam at gmail.com  Fri Feb 18 17:01:20 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
In-Reply-To: <20050215033335.43BD97B12BF@xserve.flids.com>
References: <20050215033335.43BD97B12BF@xserve.flids.com>
Message-ID: <931f8ea90502181401116d616e@mail.gmail.com>

On Mon, 14 Feb 2005 22:36:24 -0500, Ben Discoe <ben@vterrain.org> wrote:
> I've cc'd GM's author, so he can address the extra LF characters, but it
> would also be good to make OGR a little more robust.  The problem appears to
> be an if/else in OSR_GDV (ogr_srs_esri.cpp) which doesn't check for an empty
> parameter.  The problem is probably in the calling code though
> (importFromESRI) which is making the assumption.

Ben,

I have committed a fix to ogr_srs_esri.cpp to deal gracefully 
with blank lines amoung the parameters. 

> Even when the extra LF are removed, there is a second problem: OGR is
> expecting the parameters for TM projections in this order:
> 1. Scale
> 2. CenterLat (latitude of the origin)
> 3. CenterLong (central meridian)
> 4. FalseEasting
> 5. FalseNorthing
> 
> But GM is writing them in a slightly different order:
> 1. Scale
> 2. CenterLong (central meridian)
> 3. CenterLat (latitude of the origin)
> 4. FalseEasting
> 5. FalseNorthing
> 
> It seems reasonable to conclude that one of these (OGR or GM) is
> wrong/non-standard.

Yikes! 

I haven't fixed this.  My understanding has been that the
comments are just advisory for human readers and that
there is a definitive order to the parameters.  In fact, I would 
swear I have seen .prj files without the comments.  I have one
such sample in my sample data tree but I'm not sure if it is
"correct". 

For the time being I'm not making any change in this regard
but it would be nice if Global Mapper output parameters in 
the same order as Arc/Info. 

Of course, we can all hope that these Arc/Info 7.x .prj files
will continue to fade out of use since their handling is at
best error prone in GDAL/OGR. 

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dburken at comcast.net  Sat Feb 19 07:36:34 2005
From: dburken at comcast.net (David Burken)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal with external geotiff
Message-ID: <421732D2.7050804@comcast.net>

Hi Frank,

The geotiff I'm pointing to is the latest cvs (1.2.2)
./configure --with-libtiff=/work/drb/libtiff/libtiff 
--with-geotiff=/work/drb/geotiff/libgeotiff

Gives:
checking for XTIFFClientOpen in -lgeotiff... no
configure: error: We require at least GeoTIFF 1.2.1. Consider using the 
one supplied with GDAL

Had to take the  AC_CHECK_LIB out of  configure.in to fix it.

Take care,
Dave
 

From archer at eskimo.com  Mon Feb 21 09:23:29 2005
From: archer at eskimo.com (archer@eskimo.com)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Re: hi
Message-ID: <20050221131753.56CA0A59A44@xserve.flids.com>

Please see the attached file for details.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: message_gdal-dev.zip
Type: application/octet-stream
Size: 29832 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050221/6f06dd32/message_gdal-dev.obj
From fwarmerdam at gmail.com  Tue Feb 22 15:19:40 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] SRTM30Plus Dataset by Bittorrent
Message-ID: <931f8ea9050222121921ad39c3@mail.gmail.com>

Folks,

A few of us from the #mapserver irc channel are experimenting with distributing
free geodata by bittorrent.  I am now publishing the SRTM30+ data (DEM + 
bathymetry) at 30 second intervals (like GTOPO30) as a single 1.9GB GeoTIFF
file. 

The experimental torrents for this, and some other data (Tiger2004, all VMAP0)
are available at:

  http://uo.space.frot.org/?GeodataTorrents

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tflynch at gmail.com  Wed Feb 23 01:49:15 2005
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK 3.1 RC1 now available for download
Message-ID: <c39b2a650502222249798bbac8@mail.gmail.com>

The release candidate for version 3.1 is now available for download at

http://www.ermapper.com/downloads/download_view.aspx?PRODUCT_VERSION_ID=262

We have fixed several bugs and improved performance and stability, and
the new version also has improved documentation which covers the new
features more thoroughly than before.

There have been no major changes to the license agreements as yet,
however there is a review pending some time in March on these issues,
any changes from which could be retrospectively applied to this
download.

Details including the feature list are available at the URL above.  I
hope the interested parties in the GDAL community will enjoy this
release :)

-- 
Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com

From fwarmerdam at gmail.com  Thu Feb 24 12:59:52 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Fwd: Thanks for GDAL
In-Reply-To: <5356870905022409497b4b6c85@mail.gmail.com>
References: <5356870905022409497b4b6c85@mail.gmail.com>
Message-ID: <931f8ea905022409596113f930@mail.gmail.com>

Folks,

I received this today, and thought there might be other
interested in using GDAL with Blender. 

---------- Forwarded message ----------
From: Chris Soriano <chris.soriano@gmail.com>
Date: Thu, 24 Feb 2005 09:49:42 -0800
Subject: Thanks for GDAL
To: warmerdam@pobox.com


Hi Frank,

Thanks for your work on GDAL. I use a 3D open source package called
"Blender" (www.blender.org) that uses Python for scripting. By using a
few lines in Python and the GDAL module, I was able to pull in some
DEM data with no problem.

Here is a discussion of my script with some screenshots:
http://www.elysiun.com/forum/viewtopic.php?t=38108

Thanks again,
Chris Soriano

From wlyons at prologic-inc.com  Thu Feb 24 14:54:56 2005
From: wlyons at prologic-inc.com (William Lyons)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Trouble importing Arc 8.3 projection file into OGR SRS
Message-ID: <2DBB9F887DAA394FA75D98474EA5730DFA9DF3@vader.prologic-inc.com>

Hello Frank, and List,

 

I'm attempting to import the Arc 8.3 projection file below into an
OGRSpatialReference using SetFromUserInput().

But, I get OGRERR_CORRUPT_DATA as a result.  So, my questions are:  Is
this supposed to happen? And,

If so, is there some way to import it?

 

NAD_1983_UTM_Zone_17N.prj :

 

PROJCS["NAD_1983_UTM_Zone_17N",GEOGCS["GCS_North_American_1983",DATUM["D
_North_American_1983",SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM
["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Transve
rse_Mercator"],PARAMETER["False_Easting",500000],PARAMETER["False_Northi
ng",0],PARAMETER["Central_Meridian",-81],PARAMETER["Scale_Factor",0.9996
],PARAMETER["Latitude_Of_Origin",0],UNIT["Meter",1]]

 

Thanks,

 

William Lyons

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050224/5e40d41a/attachment.html
From fwarmerdam at gmail.com  Thu Feb 24 15:23:43 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Trouble importing Arc 8.3 projection file into OGR SRS
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730DFA9DF3@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730DFA9DF3@vader.prologic-inc.com>
Message-ID: <931f8ea905022412232f42580a@mail.gmail.com>

On Thu, 24 Feb 2005 14:54:56 -0500, William Lyons
<wlyons@prologic-inc.com> wrote:
>  
> Hello Frank, and List, 
> 
> I'm attempting to import the Arc 8.3 projection file below into an
> OGRSpatialReference using SetFromUserInput(). 
> 
> But, I get OGRERR_CORRUPT_DATA as a result.  So, my questions are:  Is this
> supposed to happen? And, 
> 
> If so, is there some way to import it? 

William,

I tried the file with testepsg, and it seemed to work fine.  Testepsg
(manually buildable in gdal/ogr) uses SetFromUserInput(). 

I don't see anything odd about the file in question nor any reason
it would fail.  If possible, you might want to trace through the code and
see what is going wrong. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From MChapman at sanz.com  Thu Feb 24 22:44:51 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Fwd: Thanks for GDAL
Message-ID: <ED3A48B9840E594890A2BC172D11946502D4D3EE@IM.san.com>

Wow, that's power scripting.  Very nice!
 
Martin

	-----Original Message----- 
	From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] 
	Sent: Thu 2/24/2005 10:59 AM 
	To: gdal-dev@remotesensing.org 
	Cc: 
	Subject: [Gdal-dev] Fwd: Thanks for GDAL
	
	

	Folks,
	
	I received this today, and thought there might be other
	interested in using GDAL with Blender.
	
	---------- Forwarded message ----------
	From: Chris Soriano <chris.soriano@gmail.com>
	Date: Thu, 24 Feb 2005 09:49:42 -0800
	Subject: Thanks for GDAL
	To: warmerdam@pobox.com
	
	
	Hi Frank,
	
	Thanks for your work on GDAL. I use a 3D open source package called
	"Blender" (www.blender.org) that uses Python for scripting. By using a
	few lines in Python and the GDAL module, I was able to pull in some
	DEM data with no problem.
	
	Here is a discussion of my script with some screenshots:
	http://www.elysiun.com/forum/viewtopic.php?t=38108
	
	Thanks again,
	Chris Soriano
	_______________________________________________
	Gdal-dev mailing list
	Gdal-dev@xserve.flids.com
	http://xserve.flids.com/mailman/listinfo/gdal-dev
	

From zhang at aero.und.edu  Thu Feb 24 23:08:09 2005
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] define block size for GTIFF
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502D4D3EE@IM.san.com>
References: <ED3A48B9840E594890A2BC172D11946502D4D3EE@IM.san.com>
Message-ID: <1109304489.421ea4a99da08@portal.aero.und.edu>

Hi,

We're using GDAL to read in a binary raw image (already in projected format)line
by line and wrtie out as a GTIFF image after SetGeoTransform and SetProjectioin
using:
for (j=0,j<Yvalue;j++){
fread(rowData,sizeof(float),Xvalue,inFile);
poBand->RasterIO(GF_Write,0,j,Xvalue,1,rowData,Xvalue,1,GDT_Float32,0,0);}

I'm wondering how can I set a block size and how to use it. Will that be faster
than what I'm doing now.

Also I know GTIFF has an option of compressing image, does GDAL support that?

Thanks
Xiaodong


Quoting "Chapman, Martin" <MChapman@sanz.com>:

> Wow, that's power scripting.  Very nice!
>  
> Martin
> 
> 	-----Original Message----- 
> 	From: Frank Warmerdam [mailto:fwarmerdam@gmail.com] 
> 	Sent: Thu 2/24/2005 10:59 AM 
> 	To: gdal-dev@remotesensing.org 
> 	Cc: 
> 	Subject: [Gdal-dev] Fwd: Thanks for GDAL
> 	
> 	
> 
> 	Folks,
> 	
> 	I received this today, and thought there might be other
> 	interested in using GDAL with Blender.
> 	
> 	---------- Forwarded message ----------
> 	From: Chris Soriano <chris.soriano@gmail.com>
> 	Date: Thu, 24 Feb 2005 09:49:42 -0800
> 	Subject: Thanks for GDAL
> 	To: warmerdam@pobox.com
> 	
> 	
> 	Hi Frank,
> 	
> 	Thanks for your work on GDAL. I use a 3D open source package called
> 	"Blender" (www.blender.org) that uses Python for scripting. By using a
> 	few lines in Python and the GDAL module, I was able to pull in some
> 	DEM data with no problem.
> 	
> 	Here is a discussion of my script with some screenshots:
> 	http://www.elysiun.com/forum/viewtopic.php?t=38108
> 	
> 	Thanks again,
> 	Chris Soriano
> 	_______________________________________________
> 	Gdal-dev mailing list
> 	Gdal-dev@xserve.flids.com
> 	http://xserve.flids.com/mailman/listinfo/gdal-dev
> 	
> 
> 



From fwarmerdam at gmail.com  Thu Feb 24 23:29:34 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] define block size for GTIFF
In-Reply-To: <1109304489.421ea4a99da08@portal.aero.und.edu>
References: <ED3A48B9840E594890A2BC172D11946502D4D3EE@IM.san.com>
	<1109304489.421ea4a99da08@portal.aero.und.edu>
Message-ID: <931f8ea905022420297c4b9765@mail.gmail.com>

On Thu, 24 Feb 2005 22:08:09 -0600, Xiaodong Zhang <zhang@aero.und.edu> wrote:
> Hi,
> 
> We're using GDAL to read in a binary raw image (already in projected format)line
> by line and wrtie out as a GTIFF image after SetGeoTransform and SetProjectioin
> using:
> for (j=0,j<Yvalue;j++){
> fread(rowData,sizeof(float),Xvalue,inFile);
> poBand->RasterIO(GF_Write,0,j,Xvalue,1,rowData,Xvalue,1,GDT_Float32,0,0);}
> 
> I'm wondering how can I set a block size and how to use it. Will that be faster
> than what I'm doing now.

Xiaodong,

You can control the output blocking of GeoTIFF files with the
TILED=YES, and BLOCKXSIZE and BLOCKYSIZE creation 
options.  These are described in the GeoTIFF driver page at:

  http://www.gdal.org/frmt_gtiff.html

Generally speaking, to learn details of individual drivers find
their driver page off the Supported Formats page. 

As to whether this will result in improved performance for you, 
that will depend on a variety of factors.  Generally speaking if
you are reading and writing line by line then a line oriented
file will perform better than (or at least comparible to) a tiled
file.  Tiled files mostly benefit when you need to do 
subwindow access to a file. 

> Also I know GTIFF has an option of compressing image, does GDAL support that?

Yes, but there are issues with doing "random writes" to compressed
TIFF files with GDAL.  It works best with batch translations (ie
CreateCopy() or gdal_translate). 
 
Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nuitari at melchior.nuitari.net  Tue Feb  1 07:17:28 2005
From: nuitari at melchior.nuitari.net (Nuitari)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] rgb2pct dithering ?
Message-ID: <Pine.LNX.4.53.0502010836470.26417@melchior.nuitari.net>

Hi,

I'm converting quite a few files from rgb to pct and I've noticed that
dithering using rgb2pct is always applied, even if the files is of
originally very few colours, giving a result that is worse then a
conversion without dithering.

I've tried to find out where the dithering is happenning, but I do not
have much time to dwelve into libs

From tom.lynch at ermapper.com  Wed Feb  2 21:31:26 2005
From: tom.lynch at ermapper.com (Tom Lynch)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] GDAL and ECW compressor of the new 3.1 SDK - licensing
	issues for use of unlimited compression
References: <20050201192120.5CCBD622380@xserve.flids.com>
	<931f8ea905020111576a451acb@mail.gmail.com>
Message-ID: <loom.20050203T031436-773@post.gmane.org>

Frank Warmerdam <fwarmerdam <at> gmail.com> writes:
> 
> > "GPL-style license: A free license, providing unlimited read/unlimited
compression  for ECW and JPEG
> 2000 in any GPL style application."
> > 
> > Will GDAL move towards using this license version and then include the
unlimited compression to ECW/JP2000?
> 

Hi folks,

It will be possible to build open source applications including the unlimited
compression functionality in the ECW JPEG 2000 SDK, provided they are under a
GPL style license.  In the case of open source applications using GDAL (which
has a less restrictive MIT style license), the application developer would have
to make available:

- the full source code of the application
- the full (possibly modified) GDAL source
- and the full (possibly modified) source of the ECW JPEG 2000 SDK

with their application in order to use the unlimited compression functionality
without a commercial SDK license.  Assuming the GDAL and SDK source was
unmodified, it would probably be sufficient just to make the application code
available to the public and quote the relevant versions of GDAL and the SDK used.

There are some gotchas about "server software" built on the SDK (which is not
permitted under the general terms of the license).  You should contact
queries@ermapper.com.au if you need additional information about this.

> Armin, 
> 
> The issue isn't in GDAL itself, it is really a question of what build of the
> libraries will be included in FWTools.  Currently I used the 3.1 library
> build provided on the ERMapper web site, which I gather is preconfigured
> to enforce the 500MB compress restriction.  I hadn't been intending to 
> build the ECW SDK from source on win32 if I could avoid it, but this might
> be a reason to do so. 
> 
> Of course, it is also possible there is some call I can make with the
> pre-built version that will let me compress larger than 500MB files. 
> 
> If you submit a bugzilla report against FWTools, I will look into the issue
> but no promises on a timeline. 
> 
> Best regards,





From tflynch at gmail.com  Sun Feb 13 22:51:18 2005
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] ECW JPEG 2000 SDK v3.1 - issues and clarification
Message-ID: <c39b2a6505021319516ca9fccb@mail.gmail.com>

Hi folks,

Just letting you know where things are heading (and where they are at
the moment) regarding the ECW JPEG 2000 SDK and the source code
release, and clearing up any misconceptions that may be floating
around.

Firstly, the ECW JPEG 2000 SDK is the successor to the ECW SDK
released a while back by ER Mapper, and also includes support for the
ISO JPEG 2000 file format, using a common, simple and backward
compatible API.

The SDK library's performance is comparable to KDU's.  It includes
support for using JPEG 2000 with the ECWP streaming imagery protocol
that has been available with ECW for a while.

The source code distribution that's out there right now is
approximately cross-platform.  It was developed on Windows, and ported
to Solaris/GCC, and a reasonable amount of care has been taken to
avoid platform dependencies.  The distribution out there right now
should build on Solaris 8/9 off the shelf, and on Linux with minor
modifications (that you may have seen knocking around on the ER Mapper
forums and the GDAL list).

There are still bugs being fixed on the UNIX side here and there, but
ER Mapper is committed to providing a stable, easy *NIX experience
with the SDK.  Once RC1 of v3.1 goes out everything should be in
excellent shape on the Win32 side, and we are also going to be
cleaning up the makefiles for Solaris/Linux a bit to make your life
easier.

As far as a roadmap for the product, you can expect careful
maintenance since the ECW/JP2 raster technology used by the SDK is at
the core of ER Mapper's commercial product line.  We are looking to
move to 3.1 RC1 as soon as the beta buglist has been doomed, which we
expect will be around the 14th/15th of Feb 2005.  I will notify the
GDAL list when RC1 goes out the door.

We are expecting there will be a v3.2 incorporating performance
enhancements and some interesting new features over the next few
months.

There are three license agreements available for the SDK; free, public
and commercial.  The licensing information is included with the SDK
distributions and should be read carefully.  The exact terms of the
license are under review and may be changing soon (but if there is a
change, it will almost certainly be in the form of a removal of IP
restrictions, rather than an increase of same).

If you have any queries, fire away.

Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com

From support at globalmapper.com  Mon Feb 14 23:31:53 2005
From: support at globalmapper.com (Global Mapper Support)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63C77@mailman>
Message-ID: <001301c51317$47318390$9f02a8c0@MIKE>

Martin/Ben,

The .prj file that Ben provided is an older format ESRI .prj file. With the
ArcView v8 (I think) release, ESRI switched to the format of PRJ files that
you attached.

As for the blank lines and the ordering of the parameters, I've never
personally seen any kind of standard document describing the old .prj
format, so my coding of the creation of those files is entirely based upon
samples that I've seen. It seems that about half of the sample files that I
have do have a blank line between parameters and half don't. I don't know if
some programs will break on .prj files with no blank lines or not, it seems
best if OGR can handle the blank lines gracefully since there are lots of
them out there from sources other than Global Mapper.

I don't know if there is a standard order for the projection parameters
either, Global Mapper parses the comment after the parameter to determine
what the value is, thereby making it independent of any ordering.

Mike
Global Mapper Support
support@globalmapper.com

-----Original Message-----
From: Chapman, Martin [mailto:MChapman@sanz.com] 
Sent: Monday, February 14, 2005 9:42 PM
To: Ben Discoe; gdal-dev@remotesensing.org
Cc: support@globalmapper.com
Subject: RE: [Gdal-dev] crash on blank lines in .prj / ESRI TM params

Ben,
 
That file doesn't look like an esri prj file.  Attached is what esri looks
like.  I think the style is called something like baucus-nor or something.
It's similiar to an ogc wks.
 
Martin

	-----Original Message----- 
	From: Ben Discoe [mailto:ben@vterrain.org] 
	Sent: Mon 2/14/2005 8:36 PM 
	To: gdal-dev@remotesensing.org 
	Cc: support@globalmapper.com 
	Subject: [Gdal-dev] crash on blank lines in .prj / ESRI TM params
	
	


	I noticed this evening that OGR will crash if asked to parse an
ESRI-style
	.prj file with some extra whitespace.  Attached is an example, which
was
	output from the software 'Global Mapper' (GM).
	
	I've cc'd GM's author, so he can address the extra LF characters,
but it
	would also be good to make OGR a little more robust.  The problem
appears to
	be an if/else in OSR_GDV (ogr_srs_esri.cpp) which doesn't check for
an empty
	parameter.  The problem is probably in the calling code though
	(importFromESRI) which is making the assumption.
	
	Even when the extra LF are removed, there is a second problem: OGR
is
	expecting the parameters for TM projections in this order:
	1. Scale
	2. CenterLat (latitude of the origin)
	3. CenterLong (central meridian)
	4. FalseEasting
	5. FalseNorthing
	
	But GM is writing them in a slightly different order:
	1. Scale
	2. CenterLong (central meridian)
	3. CenterLat (latitude of the origin)
	4. FalseEasting
	5. FalseNorthing
	
	It seems reasonable to conclude that one of these (OGR or GM) is
	wrong/non-standard.
	
	-Ben
	



From senkum_d at yahoo.com  Sat Feb 19 22:49:28 2005
From: senkum_d at yahoo.com (gal05)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] RasterIO()
Message-ID: <loom.20050220T040715-232@post.gmane.org>

Hai Frank,
  I am attaching a program which is meant to convert a raw binary image file 
into a GTiff file. If i try to open the output file using ENVI, the image is 
not properly displayed. I dont know what could be wrong. And i am trying to 
set projection "WGS84", i tried using SetWellKnowGS() but it doesn't support. 
So i am passing the data to the setprojection(). Is that right? And whats the 
problem with the RasterIO() that used in the program to write the file.
Could u help me to modify the program to make it work and display the Gtiff 
image properly.
Thanks in advance...

-Gal05

#include "gdal_priv.h"
#include "cpl_string.h"
#include <ogr_spatialref.h>
#include <iostream.h>
#include <cstring>

/* The program is to add a GeoTIFF header to a binary image and output a 
GeoTIFF file
     Inputs :  filename x y 
 where filename  : the name of the binary image to be added with GeoTIFF 
header 
 x         : numbers of columns for the input image (in this case 21000)  
 y         : numbers of rows for the input image    (in this case 12500)  
 
 */

/**Reading the input file name, column and row values    ****/

        int main(int argc, char **argv)
        {
           char *src = argv[1];
           int Xvalue=atoi(argv[2]); //read the X and Y value from command line
           int Yvalue=atoi(argv[3]);
           
/*     construct the input file name and store the source name in the array  */

        // normally input file name has an extension of .img

           char srcFile[100]; //array for source file name
           char dstFile[105]; //array for destination file name
           int i=0;
              while(src[i]!='\0')
                {
                 srcFile[i]=src[i]; //reading the input name 
                    dstFile[i]=src[i];
                    i++;
                }
           srcFile[i]='\0';
           dstFile[i]='\0';

       // to add the .tif extension to the output file name

          char ext[3]={'f','i','t'};
          int l=0;
             for(int k=i-1; k>=i-3; k--)
                 {
                   dstFile[k]=ext[l];
                   l++;
                 }

          cout <<"\nDestination file name  :"<<dstFile<<"\n";

/**************** construct an output GeoTiff image file with 
geotransformation and projection ***********/

       //adfGeoTransform[5] array value

        double  adfGeoTransform[6]={-
2624999.963000,250.000000,0.000000,1006701.788000,0.000000,-250.000000};

      // definitions for using GDAL library

        char **papszOptions = NULL;
        GDALDataset *poDstDS;
        const char *pszFormat = "GTiff";
        GDALDriver *poDriver;
        char **papszMetadata;

        GDALAllRegister();                 //Register All Drivers

        //Set the Driver using DriverManager

        poDriver = GetGDALDriverManager()->GetDriverByName(pszFormat);

        //Create a new dataset with this driver

        poDstDS  = poDriver->Create(dstFile, Xvalue, Yvalue, 1, GDT_Byte, 
papszOptions );


      //SetProjection data

char *projstring ="PROJCS[\"IMAGINE GeoTIFF Support Copyright 1991 - 2001 by 
ERDAS, Inc. All Rights
Reserved @(#)$RCSfile: egtf.c $ $Revision: 1.6.1.4 $ $Date: 2001/04/23 
14:58:04Z $ Projection Name = Lambert
Azimuthal Equal-ar\",GEOGCS[\"WGS84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84
\",6378137,298.2572235629972,AUTHORITY[\"EPSG\",\"$



/***************** adding the geotransform values and the projection details 
on the output file *********************/

        poDstDS->SetGeoTransform( adfGeoTransform );
        GDALRasterBand *poBand;
        poDstDS->SetProjection( projstring );
        printf( "\n\nProjection is %s\n",projstring );
 CPLFree( projstring );

        poBand = poDstDS->GetRasterBand(1);
        cout<<"\nsuccessful completion of passing geotransform and projection 
info\n";//


/*********************  Reading binary image file row data and writing to the 
ouput file ***************************/

        FILE *inFile;
        inFile = fopen(srcFile, "rb");                  // open the input file 
in Read Binary mode
        float * rowData = (float *)calloc(Xvalue, 1);   // to assign the 
memory for each row data
        cout <<"\nreading file..\n"<<sizeof(float)<<"\n";
            for(int j=0;j<Yvalue;j++)
                 {
                  fread(rowData,sizeof(float),Xvalue, inFile);  // reading the 
row data
                  poBand->RasterIO( GF_Write, 0, j, Xvalue, 1,  rowData, 
Xvalue, 1, GDT_Byte, 0, 0 ); //write data
                 }

        cout<<"\ndestination file written!\n";
        free(rowData);                                  // free memory
        fclose(inFile);                                 // close input file

        delete poDstDS;

   return 0;
}



From juliana at pdc.org  Thu Feb 24 02:41:42 2005
From: juliana at pdc.org (Juliana Lo)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal_translate ESRI grid question
Message-ID: <B243F5FFA629DB4DADF6010AEC58042086E4BD@mango.maui.pdc.org>

I am a newbie to gdal, so please forgive me if this question has been asked before.
I am trying to translate a ESRI float grid flt file to geotiff, from 4 bytes floating to unsiged byte. 
 
# gdal_translate -ot Byte T_02160000.flt T_02160000.tif
Input file size is 321, 225
0...10...20...30...40...50...60...70...80...90...100 - done.

The input min/max = 40.2 /  83.22. When I looked at the output., the data values are all 0's and 255's.

Also tried scale option -scale 40 80 0 255, same output.
 
gdalinfo -mm is not reporting correct statistics
        Computed Min/Max=-288880055582332026880.000,272238237990107188559872.000

 
# gdalinfo -mm T_02160000.flt
Driver: EHdr/ESRI .hdr Labelled
Size is 321, 225
Coordinate System is:
GEOGCS["NCEP_SPHERE",
    DATUM["NCEP_SPHERE",
        SPHEROID["NCEP_SPHERE",6371200.0,0.0]],
    PRIMEM["Greenwich",0.0],
    UNIT["Degree",0.0174532925199432955]]
Origin = (-17975051.662435,2603061.701239)
Pixel Size = (2500.00000000,-2500.00000000)
Corner Coordinates:
Upper Left  (-17975051.662, 2603061.701) (17975051d39'64424509484.77"W,2603061d42'8589934596.46"N)
Lower Left  (-17975051.662, 2040561.701) (17975051d39'64424509484.77"W,2040561d42'8589934596.46"N)
Upper Right (-17172551.662, 2603061.701) (17172551d39'60129542188.77"W,2603061d42'8589934596.46"N)
Lower Right (-17172551.662, 2040561.701) (17172551d39'60129542188.77"W,2040561d42'8589934596.46"N)
Center      (-17573801.662, 2321811.701) (17573801d39'64424509484.77"W,2321811d42'8589934596.46"N)
Band 1 Block=321x1 Type=Float32, ColorInterp=Undefined
    Computed Min/Max=-288880055582332026880.000,272238237990107188559872.000

# gdalinfo -mm T_02160000.tif
Driver: GTiff/GeoTIFF
Size is 321, 225
Coordinate System is:
GEOGCS["NCEP_SPHERE",
    DATUM["unknown",
        SPHEROID["unnamed",6371200,1]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (-17975051.662435,2603061.701239)
Pixel Size = (2500.00000000,-2500.00000000)
Corner Coordinates:
Upper Left  (-17975051.662, 2603061.701) 
Lower Left  (-17975051.662, 2040561.701) 
Upper Right (-17172551.662, 2603061.701) 
Lower Right (-17172551.662, 2040561.701) 
Center      (-17573801.662, 2321811.701) 
Band 1 Block=321x25 Type=Byte, ColorInterp=Gray
    Computed Min/Max=0.000,255.000

# cat T_02160000.hdr
ncols 321
nrows 225
cellsize 2500.000000
xllcorner -17973801.662435
yllcorner 2041811.701239
byteorder msbfirst

 
# cat T_02160000.txt
PDS-S0 | DataType | 0 (Meteorological products)
PDS-S1 | Originating center | 8
PDS-S1 | GRIB Master Tables Version | 1
PDS-S1 | GRIB Local Tables Version | 0
PDS-S1 | Significance of reference time | 1 (Start of Forecast)
PDS-S1 | Reference Time | 02/15/2005 21:00:00 UTC
PDS-S1 | Operational Status | 0 (Operational products)
PDS-S1 | Type of Data | 1 (Forecast products)
PDS-S4 | Product type | 0 (Analysis at a horizontal layer at a point in time)
PDS-S4 | Category Description | 0 (Temperature)
PDS-S4 | Category Sub-Description | 0 (Temperature [K])
PDS-S4 | Output grid, (COMPUTED) english unit is | [F]
PDS-S4 | Generation process | 2 (Forecast)
PDS-S4 | Background generating process ID | 0
PDS-S4 | Forecast generating process ID | 0
PDS-S4 | Forecast time in hours | 3.000000
PDS-S4 | Type of first fixed surface | 1 (Ground or water surface [-])
PDS-S4 | Value of first fixed surface | 0.000000
GDS | Number of Points | 72225
GDS | Projection Type | 10 (Mercator)
GDS | Shape of Earth | sphere
GDS | Radius | 6371.200000 (km)
GDS | Nx (Number of points on parallel) | 321
GDS | Ny (Number of points on meridian) | 225
GDS | Lat1 | 18.066780
GDS | Lon1 | 198.374755
GDS | u/v vectors relative to | easterly/northerly
GDS | Lat2 | 23.082000
GDS | Lon2 | 206.031000
GDS | Dx | 2500.000000 (m)
GDS | Dy | 2500.000000 (m)
GDS | Input GRIB2 grid, scan mode | 64 (0100)
GDS | Output grid, scan mode | 64 (0100)
GDS | (.flt file grid), scan mode | 0 (0000)
GDS | Output grid, scan i/x direction | positive
GDS | Output grid, scan j/y direction | positive
GDS | (.flt file grid), scan j/y direction | negative
GDS | Output grid, consecutive points in | i/x direction
GDS | Output grid, adjacent rows scan in | same direction
GDS | MeshLat | 20.000000
GDS | OrientLon | 0.000000
GDS | Tangent Lat1 | 0.000000
GDS | Tangent Lat2 | 0.000000
GDS | Southern Lat | 0.000000
GDS | Southern Lon | 0.000000
Info | Packing that was used | 2 (Grid point data - complex packing)
Info | Original field type | 0 (Floating point)
Info | Missing value management | 0 (No explicit missing value included with data)
Info | Detected number of Missing | 0
Info | Field minimum value | 40.200000
Info | Field maximum value | 83.220000

I'm tried gdal version 1.2.4 and 1.2.5. My platform is Sun Solaris 2.8, GCC compiler version 3.4.2, libgeotiff version 1.2.2, and  libtiff version 3.6.1.
 
I have tried 2 different configure options, 1st time using internal libraries, 2nd time with external libraries.
 
 
Thanks,
 
Juliana Lo
Pacific Disaster Center

From fwarmerdam at gmail.com  Thu Feb 24 23:45:37 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] A typo in hfadataset.cpp
In-Reply-To: <0DA91383F539D14EA4AB01A77ADAB84F01619476@thuja>
References: <0DA91383F539D14EA4AB01A77ADAB84F01619476@thuja>
Message-ID: <931f8ea905022420456d7dfbd9@mail.gmail.com>

On Thu, 27 Jan 2005 15:47:31 -0800, Yang, Zhiqiang
<zhiqiang.yang@oregonstate.edu> wrote:
>  
> Hi, 
>   
> It seems like that there are two typos in hfadataset.cpp. The word
> "Azimuthal" was typed as "Azitmuthal" on line 1241 and 1250. As a result, if
> you set a projection to to "Lambert Azimuthal Equal-area" or "Azimuthal
> Equidistant", the resulting image will not be valid in projection. 

Yang, 

Thanks for reporting this (and via bugzilla) and it is now fixed. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Thu Feb 24 23:50:43 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] rgb2pct dithering ?
In-Reply-To: <Pine.LNX.4.53.0502010836470.26417@melchior.nuitari.net>
References: <Pine.LNX.4.53.0502010836470.26417@melchior.nuitari.net>
Message-ID: <931f8ea9050224205040cbbb4f@mail.gmail.com>

On Tue, 1 Feb 2005 08:38:59 -0500 (EST), Nuitari
<nuitari@melchior.nuitari.net> wrote:
> Hi,
> 
> I'm converting quite a few files from rgb to pct and I've noticed that
> dithering using rgb2pct is always applied, even if the files is of
> originally very few colours, giving a result that is worse then a
> conversion without dithering.
> 
> I've tried to find out where the dithering is happenning, but I do not
> have much time to dwelve into libs

Nuitari, 

Due to an (unrealized by me) backlog of emails pending approval
from unsubscribed folks this message didn't circulate till now, 
25 days after you sent it so I suspect the answer is not in time
for your purposes. 

Looking in the code it seems there is no non-dithered case.
I'm not quite sure why I didn't provide that.   

Sorry about that (and the delay).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Fri Feb 25 00:00:52 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal_translate ESRI grid question
In-Reply-To: <B243F5FFA629DB4DADF6010AEC58042086E4BD@mango.maui.pdc.org>
References: <B243F5FFA629DB4DADF6010AEC58042086E4BD@mango.maui.pdc.org>
Message-ID: <931f8ea905022421007f0b5b45@mail.gmail.com>

On Wed, 23 Feb 2005 21:41:42 -1000, Juliana Lo <juliana@pdc.org> wrote:
> I am a newbie to gdal, so please forgive me if this question has been asked before.
> I am trying to translate a ESRI float grid flt file to geotiff, from 4 bytes floating to unsiged byte.
> 
> # gdal_translate -ot Byte T_02160000.flt T_02160000.tif
> Input file size is 321, 225
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> The input min/max = 40.2 /  83.22. When I looked at the output., the data values are all 0's and 255's.

Juliana, 

I'm afraid that GDAL is getting confused about the type of the
grid.  It seems that "32bit" grids can be either 32bit integer or
32bit floating point but I don't know how to tell them apparent. 
It seems that this data is being treated as float32 when it
should likely be int32. 

Of course, there could be some other issue.  If you can
make the dataset available, I could look into it more closely.



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Fri Feb 25 00:07:43 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] RasterIO()
In-Reply-To: <loom.20050220T040715-232@post.gmane.org>
References: <loom.20050220T040715-232@post.gmane.org>
Message-ID: <931f8ea9050224210767f9901@mail.gmail.com>

On Sun, 20 Feb 2005 03:49:28 +0000 (UTC), gal05 <senkum_d@yahoo.com> wrote:
> Hai Frank,
>   I am attaching a program which is meant to convert a raw binary image file
> into a GTiff file. If i try to open the output file using ENVI, the image is
> not properly displayed. I dont know what could be wrong. And i am trying to
> set projection "WGS84", i tried using SetWellKnowGS() but it doesn't support.
> So i am passing the data to the setprojection(). Is that right? And whats the
> problem with the RasterIO() that used in the program to write the file.
> Could u help me to modify the program to make it work and display the Gtiff
> image properly.
> Thanks in advance...
> 
> -Gal05

Gal05, 

You aren't too specific about what is wrong with the resulting file
so I will comment on a few items. 
 
>       //SetProjection data
> 
> char *projstring ="PROJCS[\"IMAGINE GeoTIFF Support Copyright 1991 - 2001 by
> ERDAS, Inc. All Rights
> Reserved @(#)$RCSfile: egtf.c $ $Revision: 1.6.1.4 $ $Date: 2001/04/23
> 14:58:04Z $ Projection Name = Lambert
> Azimuthal Equal-ar\",GEOGCS[\"WGS84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84
> \",6378137,298.2572235629972,AUTHORITY[\"EPSG\",\"$

The above is *not* a valid coordinate system definition in WKT. 
>From your geotransform I can tell that you aren't working in a
geographic coordinate system, so I will need details before I 
can propose a reasonable projection string. 
 
> /***************** adding the geotransform values and the projection details
> on the output file *********************/
> 
>         poDstDS->SetGeoTransform( adfGeoTransform );
>         GDALRasterBand *poBand;
>         poDstDS->SetProjection( projstring );
>         printf( "\n\nProjection is %s\n",projstring );
>  CPLFree( projstring );
> 
>         poBand = poDstDS->GetRasterBand(1);
>         cout<<"\nsuccessful completion of passing geotransform and projection
> info\n";//
> 
> /*********************  Reading binary image file row data and writing to the
> ouput file ***************************/
> 
>         FILE *inFile;
>         inFile = fopen(srcFile, "rb");                  // open the input file
> in Read Binary mode
>         float * rowData = (float *)calloc(Xvalue, 1);   // to assign the
> memory for each row data

I'm pretty sure you want to allocate the rowData with 
calloc(Xvalue,4) since floats are 4 bytes each, otherwise 
your buffer will be too small and all sorts of problems might
result. 

>         cout <<"\nreading file..\n"<<sizeof(float)<<"\n";
>             for(int j=0;j<Yvalue;j++)
>                  {
>                   fread(rowData,sizeof(float),Xvalue, inFile);  // reading the
> row data
>                   poBand->RasterIO( GF_Write, 0, j, Xvalue, 1,  rowData,
> Xvalue, 1, GDT_Byte, 0, 0 ); //write data
>                  }

If the buffer is floating point, but you want things truncated to byte
on write, then you should pass GDT_Float32 in the RasterIO() call.
GDAL will notice that the output file is GDT_Byte and cast the floats
to byte values before writing.  note that all values less than 0 will
be set t

Sorry for the delay in responding.  Please subscribe to the list before
replying so your message(s) don't need to be manually approved.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nuitari at melchior.nuitari.net  Thu Feb 24 22:43:45 2005
From: nuitari at melchior.nuitari.net (Nuitari)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] rgb2pct dithering ?
In-Reply-To: <931f8ea9050224205040cbbb4f@mail.gmail.com>
References: <Pine.LNX.4.53.0502010836470.26417@melchior.nuitari.net>
	<931f8ea9050224205040cbbb4f@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0502242240290.24019@melchior.nuitari.net>

>> Hi,
>>
>> I'm converting quite a few files from rgb to pct and I've noticed that
>> dithering using rgb2pct is always applied, even if the files is of
>> originally very few colours, giving a result that is worse then a
>> conversion without dithering.
>>
>> I've tried to find out where the dithering is happenning, but I do not
>> have much time to dwelve into libs
>
> Nuitari,
>
> Due to an (unrealized by me) backlog of emails pending approval
> from unsubscribed folks this message didn't circulate till now,
> 25 days after you sent it so I suspect the answer is not in time
> for your purposes.
>
> Looking in the code it seems there is no non-dithered case.
> I'm not quite sure why I didn't provide that.
>
> Sorry about that (and the delay).
>
> Best regards,

Hi,
I'm sorry I didn't realize I wasn't subscribed when I sent it.
I hope this one will be ok :)

It's a bit to late for use by me (for now) as I switched to another source 
of data, however you might want to look at Atlas (http://atlas.sf.net) for 
an example of a program that makes RGB images with less then 255 colors.

In the end I just took the splendid NASA digital earth imagery which 
currently suits my need.

From fwarmerdam at gmail.com  Fri Feb 25 14:41:09 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] gdal_translate ESRI grid question
In-Reply-To: <B243F5FFA629DB4DADF6010AEC58042086E4BD@mango.maui.pdc.org>
References: <B243F5FFA629DB4DADF6010AEC58042086E4BD@mango.maui.pdc.org>
Message-ID: <931f8ea905022511417d9b1a89@mail.gmail.com>

On Wed, 23 Feb 2005 21:41:42 -1000, Juliana Lo <juliana@pdc.org> wrote:
> # cat T_02160000.hdr
> ncols 321
> nrows 225
> cellsize 2500.000000
> xllcorner -17973801.662435
> yllcorner 2041811.701239
> byteorder msbfirst

Juliana, 

I found the problem.  It seems that the code was checking to 
see if the first character of byteorder is 'M', and 'm' failed
to match.  The workaround is that you hand edit your .hdr
file and change msbfirst to MSBFIRST. 

I have modified the code in CVS to be case insensitive. 
Thanks for reporting this problem.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From carueda at ucdavis.edu  Sun Feb 27 00:04:18 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] ENVIDataset::FlushCache is not idempotent for header file
Message-ID: <cvrk4g$8b9$1@sea.gmane.org>

Hello Frank,

I have just noticed that multiple calls to FlushCache on an ENVI dataset
object will generate a header with repeated header items. I also notice
that the first call inside this method is to GDALDataset::FlushCache()
but perhaps it should be to RawDataset::FlushCache().

Best,

Carlos


From bhudspeth at edac.unm.edu  Sun Feb 27 08:19:53 2005
From: bhudspeth at edac.unm.edu (bhudspeth@edac.unm.edu)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Protected Mail System
Message-ID: <20050227121416.92683E9DB3A@xserve.flids.com>

Encrypted message is available.

-------------- next part --------------
A non-text attachment was scrubbed...
Name: encrypted_msg01.scr
Type: application/octet-stream
Size: 29568 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050227/00737aa9/encrypted_msg01.obj
From route at cae.com  Mon Feb 28 09:26:51 2005
From: route at cae.com (Stephane Routelous)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] accessing Class_Names from an img file in GDAL
Message-ID: <719A38AB7279D511B91900D0B7444A9E0DD1D3AC@caemsx03.cae.ca>

Hi,

I would like to have access to the Class_Names values from an img file (hfa)
I compiled the hfatest programm from frmts\hfa directory, and dumping the
tree gives me :

root(root) @ 82 + 0 @ 0
  Layer_1(Eimg_Layer) @ 210 + 20 @ 338
  + width = 11133
  + height = 5916
  + layerType = thematic
  + pixelType = u8
  + blockWidth = 64
  + blockHeight = 64
    Descriptor_Table(Edsc_Table) @ 838 + 4 @ 966
    + numrows = 256
      Class_Names(Edsc_Column) @ 1963 + 14 @ 2091
      + numRows = 256
      + columnDataPtr = 66517758
      + dataType = string
      + maxNumChars = 32
        Column_Attributes(Eded_ColumnAttributes_1) @ 2105 + 80 @ 2233
        + position = 0
        + name = `Class_Names'
        + editable = EMSC_TRUE
        + alignment = LEFT
        + format = (no values)
        + formulamode = DEFAULT
        + formula = (no values)
        + columnwidth = 11.000000
        + units = (no values)
        + colorflag = NO_COLOR
        + greenname = (no values)
        + bluename = (no values)

Can I have this information in GDAL  ?
Can I access this information at the HFAHandle level ?
As the dump of the tree does not output the strings, it seems those class
names are not read.
How can I read them ?

I checked the HFA API, but I'm confused and lost.

Thanks in advance for any help.

Stephane



From fwarmerdam at gmail.com  Mon Feb 28 09:37:48 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] accessing Class_Names from an img file in GDAL
In-Reply-To: <719A38AB7279D511B91900D0B7444A9E0DD1D3AC@caemsx03.cae.ca>
References: <719A38AB7279D511B91900D0B7444A9E0DD1D3AC@caemsx03.cae.ca>
Message-ID: <931f8ea9050228063741134802@mail.gmail.com>

On Mon, 28 Feb 2005 09:26:51 -0500, Stephane Routelous <route@cae.com> wrote:
> Hi,
> 
> I would like to have access to the Class_Names values from an img file (hfa)
> I compiled the hfatest programm from frmts\hfa directory, and dumping the
> tree gives me :

Stephane, 

I am planning ot incorporate a mechanism for returning
"raster attribute tables" such as the Imagine DescriptorTable
stuff as part of GDAL 1.3.0 which I would hope to have available
within 4-6 weeks.

> Can I have this information in GDAL  ?
> Can I access this information at the HFAHandle level ?
> As the dump of the tree does not output the strings, it seems those class
> names are not read.
> How can I read them ?

In fact, the HFA API proper does not directly support the
reading of descriptor table columns now.  You can use it
to fetch the offsets to the column data, but then you need to 
read it yourself. An example of this is in the method
HFABand::GetPCT() in gdal/frmts/hfa/hfaband.cpp. 
 

If you can wait, I would suggest holding out for the
raster attribute table implementation.  If you can't wait, 
you can hack it in a manner similar to the GetPCT() method.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From oss-dev at rambler.ru  Mon Feb 28 10:16:45 2005
From: oss-dev at rambler.ru (Oleg Semykin)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] How to get feature style from shapefile
Message-ID: <422335DD.4090808@rambler.ru>

Hi all!

I have a problem ....

I can't get style of feature when parsing *.shp/dbf/shx file

OGRFeature->GetStyleString
<http://gdal.org/ogr/classOGRFeature.html#a46> () returns NULL

Does anybody know another method to obtain feature style definition?

Thanks!

From fwarmerdam at gmail.com  Mon Feb 28 10:26:07 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] How to get feature style from shapefile
In-Reply-To: <422335DD.4090808@rambler.ru>
References: <422335DD.4090808@rambler.ru>
Message-ID: <931f8ea9050228072639cc06ae@mail.gmail.com>

On Mon, 28 Feb 2005 18:16:45 +0300, Oleg Semykin <oss-dev@rambler.ru> wrote:
> Hi all!
> 
> I have a problem ....
> 
> I can't get style of feature when parsing *.shp/dbf/shx file
> 
> OGRFeature->GetStyleString
> <http://gdal.org/ogr/classOGRFeature.html#a46> () returns NULL
> 
> Does anybody know another method to obtain feature style definition?

Oleg, 

Shapefiles have no built-in styling information so GetStyleString()
returns NULL.  In fact, I think only mapinfo and DGN formats
currently return styling information in OGR. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From fwarmerdam at gmail.com  Mon Feb 28 10:40:37 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] ENVIDataset::FlushCache is not idempotent for header
	file
In-Reply-To: <cvrk4g$8b9$1@sea.gmane.org>
References: <cvrk4g$8b9$1@sea.gmane.org>
Message-ID: <931f8ea9050228074063aff3@mail.gmail.com>

On Sat, 26 Feb 2005 21:04:18 -0800, Carlos A. Rueda <carueda@ucdavis.edu> wrote:
> Hello Frank,
> 
> I have just noticed that multiple calls to FlushCache on an ENVI dataset
> object will generate a header with repeated header items. 

Carlos, 

Hmm, I think I see what you mean.  Can you submit a bug 
report with details.  It seems that we will need to alter the 
header writing logic to keep the whole header in RAM so that
it can be completely re-written in FlushCache(), not just 
appended to. 

Also, a recent change by Gillian, makes this a less
frequent problem since it is now only written when dirty.
But I think if you altered the projection, flushed, altered
the projection again and flushed you would end up with
duplicate items. 

> I also notice
> that the first call inside this method is to GDALDataset::FlushCache()
> but perhaps it should be to RawDataset::FlushCache().

True.  I have changed it. 

However, this does not currently make any difference as
there is no RawDataset::FlushCache() so it is just forwarded
to GDALDataset::FlushCache() anyways.  Just cleaner, 
future-safe coding to call the immediate parent classes method.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From marco.hugentobler at autoform.ch  Mon Feb 28 12:37:18 2005
From: marco.hugentobler at autoform.ch (Marco Hugentobler)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] OGR feature wish: addition/deletion of attributes and
 deletion of shapefile features
Message-ID: <422356CE.8020109@autoform.ch>

Dear GDAL developers,

Apologize if this mail is out of topic. I couldn't find a 'feature wish' 
button on the OGR webpage, so i thought this is the place for it.
The QGIS project is an open source GIS which uses OGR to read vector 
files (e.g. shapefiles). Recently, the capabilities of QGIS have been 
extended to also edit data sources. So, it is now possible to add new 
features to layers by mouse click. Unfortunately, it seems that the 
shapefiledriver of OGR does not yet support deleting shapefile features. 
Also, the OGR documentation says that it is not possible to add or 
remove layer attributes if there are already features in an OGRLayer. 
QGIS already has graphical user interfaces to do these things with 
PostGIS layers, but it would be really cool if we could do the same for 
OGR supported file formats.

thanks,
Marco




From fwarmerdam at gmail.com  Mon Feb 28 14:00:37 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] OGR feature wish: addition/deletion of attributes and
	deletion of shapefile features
In-Reply-To: <422356CE.8020109@autoform.ch>
References: <422356CE.8020109@autoform.ch>
Message-ID: <931f8ea905022811003563302c@mail.gmail.com>

On Mon, 28 Feb 2005 18:37:18 +0100, Marco Hugentobler
<marco.hugentobler@autoform.ch> wrote:
> Dear GDAL developers,
> 
> Apologize if this mail is out of topic. I couldn't find a 'feature wish'
> button on the OGR webpage, so i thought this is the place for it.
> The QGIS project is an open source GIS which uses OGR to read vector
> files (e.g. shapefiles). Recently, the capabilities of QGIS have been
> extended to also edit data sources. So, it is now possible to add new
> features to layers by mouse click. Unfortunately, it seems that the
> shapefiledriver of OGR does not yet support deleting shapefile features.

Marco,

I would suggest you submit an enhancement request for
OGR to support DeleteFeature() on shapefiles.  I would like
to make shapefiles more editable.  But keep in mind that relatively
few OGR formats are ever going to support in-place update. 

> Also, the OGR documentation says that it is not possible to add or
> remove layer attributes if there are already features in an OGRLayer.
> QGIS already has graphical user interfaces to do these things with
> PostGIS layers, but it would be really cool if we could do the same for
> OGR supported file formats.

Agreed.  

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From carueda at ucdavis.edu  Mon Feb 28 14:53:08 2005
From: carueda at ucdavis.edu (Carlos A. Rueda)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Re: ENVIDataset::FlushCache is not idempotent for header
	file
In-Reply-To: <931f8ea9050228074063aff3@mail.gmail.com>
References: <cvrk4g$8b9$1@sea.gmane.org>
	<931f8ea9050228074063aff3@mail.gmail.com>
Message-ID: <422376A4.3050506@ucdavis.edu>

Frank Warmerdam wrote:
> On Sat, 26 Feb 2005 21:04:18 -0800, Carlos A. Rueda <carueda@ucdavis.edu> wrote:
>>I have just noticed that multiple calls to FlushCache on an ENVI dataset
>>object will generate a header with repeated header items. 
> 
> Hmm, I think I see what you mean.  Can you submit a bug 
> report with details.  It seems that we will need to alter the 
> header writing logic to keep the whole header in RAM so that
> it can be completely re-written in FlushCache(), not just 
> appended to. 
> 
> Also, a recent change by Gillian, makes this a less
> frequent problem since it is now only written when dirty.

Good change Gillian! My apologies for not `cvs update'ing more frequently.
Although this change is enough for my current purposes, perhaps other
people would like Frank's suggestion to be considered with higher priority.

Regards,
carlos


From dlegault at vantpoint.com  Mon Feb 28 15:38:43 2005
From: dlegault at vantpoint.com (David Legault)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] GDAL SetGeoTransform
Message-ID: <01e701c51dd5$7efe9420$8901a8c0@David>

Hi

I'm using GDAL via OpenEV and I opened a CEOS Radarsat Image. I then calculate some GCP -> Georeferencing and would like to enter that information to the Dataset of the opened image via gdal.SetGeoTransform( proj ) where proj is

proj = (501929.34881043766, -4.5100679100614984, 9.5046426977106471, -4582123.3044389617, -20.003930603666962, 7.1569984133650371)

and I get this error :

ERROR 6: SetGeoTransform() not supported for this dataset.

I would like to be able to set the new GeoStranform data to save the Dataset as a Geotiff image afterwards.

Any thoughts on how I could proceed ?

Thanx

David
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20050228/a51724b1/attachment.html
From fwarmerdam at gmail.com  Mon Feb 28 15:59:29 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] GDAL SetGeoTransform
In-Reply-To: <01e701c51dd5$7efe9420$8901a8c0@David>
References: <01e701c51dd5$7efe9420$8901a8c0@David>
Message-ID: <931f8ea9050228125925ad038b@mail.gmail.com>

On Mon, 28 Feb 2005 15:38:43 -0500, David Legault
<dlegault@vantpoint.com> wrote:
>  
> Hi 
>   
> I'm using GDAL via OpenEV and I opened a CEOS Radarsat Image. I then
> calculate some GCP -> Georeferencing and would like to enter that
> information to the Dataset of the opened image via gdal.SetGeoTransform(
> proj ) where proj is 
>   
> proj = (501929.34881043766, -4.5100679100614984, 9.5046426977106471,
> -4582123.3044389617, -20.003930603666962, 7.1569984133650371) 
>   
> and I get this error : 
>   
> ERROR 6: SetGeoTransform() not supported for this dataset. 
>   
> I would like to be able to set the new GeoStranform data to save the Dataset
> as a Geotiff image afterwards. 
>   
> Any thoughts on how I could proceed ? 

David,

The most straight forward approach is to translate to GeoTIFF and then
set this new geotransform. The CEOS format does not support setting
the geotransform. 

Alternatively you could create a VRT file cloned from the CEOS file, 
set the geotransform on that, and then write to geotiff.  

Did you need to know how to copy the CEOS file to GeoTIFF?  

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hamish_nospam at yahoo.com  Mon Feb 28 18:59:58 2005
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] (GRASSLIST:5937) Re: loading VMAP0 data with v.in.ogr?
In-Reply-To: <20050228133428.GK5793@thuille.itc.it>
References: <20050225185220.4203e3ad.hamish_nospam@yahoo.com>
	<20050228133428.GK5793@thuille.itc.it>
Message-ID: <20050301125958.09a3c196.hamish_nospam@yahoo.com>

[cc GDAL list]

> > I'm trying to load some VMAP0 data (Digital Chart of the World) into
> > GRASS 6.0beta2 with v.in.ogr .. can't quite seem to get it to work.
> > 
> > VMAP0:
> >   http://www.mapability.com/info/vmap0_index.html
> > 
> > going back to ogrinfo, it finds the datasource but gives an "Illegal
> > instruction" error:
> > 
> > $ ogrinfo gltp:/vrf/var/local/TopoData/VMAP0/v0sas/vmaplv0/sasaus 'watrcrsl@hydro(*)_line'
> > Illegal instruction
> >
> > 
> > I have batch renamed everything ending with a '.' in the v0sas/
> > tree, as per  http://article.gmane.org/gmane.comp.gis.freegis/315 
> > but still the error. File system is local, system is Debian/testing
> > with self compiled OGDI driver and GDAL/OGR.
> 
> Is it a recent OGDI driver? I tried a few months ago, successfully.

All newest official releases, AFAIK. ogdi-3.1.4, gdal 1.2.5 from source.
Debian/testing on intel P4.


> > $ ls /var/local/TopoData/VMAP0/v0sas/vmaplv0/sasaus/hydro/watrcrsl.*
> > /var/local/TopoData/VMAP0/v0sas/vmaplv0/sasaus/hydro/watrcrsl.lft
> > /var/local/TopoData/VMAP0/v0sas/vmaplv0/sasaus/hydro/watrcrsl.lfx
> 
> AFAIK it dislikes the caps in the path (bad luck).

renamed to /var/local/topodata/vmap0/, same error.

 
> I was also cleaning the trailing dots, such as:
> 
> mv ./view/viewsas/env. ./view/viewsas/env
> mv ./view/viewsas/themes. ./view/viewsas/themes
> mv ./vmaplv0/dht. ./vmaplv0/dht
> mv ./vmaplv0/lat. ./vmaplv0/lat
> mv ./vmaplv0/rference/cat. ./vmaplv0/rference/cat
> mv ./vmaplv0/rference/dbref/cnd. ./vmaplv0/rference/dbref/cnd
> mv ./vmaplv0/rference/dbref/csi. ./vmaplv0/rference/dbref/csi
> mv ./vmaplv0/rference/dbref/ebr. ./vmaplv0/rference/dbref/ebr
> mv ./vmaplv0/rference/dbref/edg. ./vmaplv0/rference/dbref/edg
> mv ./vmaplv0/rference/dbref/edx. ./vmaplv0/rference/dbref/edx
> 
> ...
>

did that. All files have the execute flag set, I don't think that's the
trouble.


> Then it should work...

not yet...


$ grep -rI "Illegal instruction" * 
in both GDAL and OGDI source dirs gives nothing..

Running it through the debugger shows this is as a SIGILL:



$ gdb `which ogrinfo`
GNU gdb 6.3-debian
[...]
This GDB was configured as "i386-linux"...Using host libthread_db library "/lib/libthread_db.so.1".

(gdb) run gltp:/vrf/var/local/topodata/vmap0/v0sas/vmaplv0/sasaus 'watrcrsl@hydro(*)_line'
Starting program: /usr/local/bin/ogrinfo gltp:/vrf/var/local/topodata/vmap0/v0sas/vmaplv0/sasaus 'watrcrsl@hydro(*)_line'
[Thread debugging using libthread_db enabled]
[New Thread 16384 (LWP 25147)]

Program received signal SIGILL, Illegal instruction.
[Switching to Thread 16384 (LWP 25147)]
0x40441aa7 in cln_ConvRegion (ClientID=0, gr=0x804b9bc, direction=1) at mathinline.h:494
494     __inline_mathcodeNP (floor, __x, \


(gdb) bt
#0  0x40441aa7 in cln_ConvRegion (ClientID=0, gr=0x804b9bc, direction=1) at mathinline.h:494
#1  0x4044076a in cln_GetGlobalBound (ClientID=0) at ../client.c:1490
#2  0x40440ff2 in cln_SetClientProjection (ClientID=0, projection=0x804d9e8 "+proj=longlat +datum=nad83")
    at ../client.c:2053
#3  0x4043f627 in cln_CreateClient (ReturnedID=0x804b7d4, URL=0x804b998 "") at ../client.c:432
#4  0x401efcb7 in OGROGDIDataSource::Open () from /usr/local/lib/libgdal.so.1
#5  0x401f022a in OGROGDIDriver::Open () from /usr/local/lib/libgdal.so.1
#6  0x401fc3f2 in OGRSFDriverRegistrar::Open () from /usr/local/lib/libgdal.so.1
#7  0x08049079 in main ()


(gdb) l
432               res = cln_SetClientProjection(*ReturnedID,projection);
433               free(projection);
434             } else {
435               res = &cln_dummy_result;
436               ecs_SetError(res,1,cln_messages[1]);
437               cln_FreeClient(&cln);
438               soc[*ReturnedID] = NULL;
439               *ReturnedID = -1;
440             }
441           }


(that source is in  ogdi-3.1.4/ogdi/c-api/client.c)



?,
Hamish

From fwarmerdam at gmail.com  Mon Feb 28 19:47:54 2005
From: fwarmerdam at gmail.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Re: (GRASSLIST:5937) Re: loading VMAP0 data with
	v.in.ogr?
In-Reply-To: <20050301125958.09a3c196.hamish_nospam@yahoo.com>
References: <20050225185220.4203e3ad.hamish_nospam@yahoo.com>
	<20050228133428.GK5793@thuille.itc.it>
	<20050301125958.09a3c196.hamish_nospam@yahoo.com>
Message-ID: <931f8ea9050228164740ef3582@mail.gmail.com>

On Tue, 1 Mar 2005 12:59:58 +1300, Hamish <hamish_nospam@yahoo.com> wrote:
> Running it through the debugger shows this is as a SIGILL:
> 
> $ gdb `which ogrinfo`
> GNU gdb 6.3-debian
> [...]
> This GDB was configured as "i386-linux"...Using host libthread_db library "/lib/libthread_db.so.1".
> 
> (gdb) run gltp:/vrf/var/local/topodata/vmap0/v0sas/vmaplv0/sasaus 'watrcrsl@hydro(*)_line'
> Starting program: /usr/local/bin/ogrinfo gltp:/vrf/var/local/topodata/vmap0/v0sas/vmaplv0/sasaus 'watrcrsl@hydro(*)_line'
> [Thread debugging using libthread_db enabled]
> [New Thread 16384 (LWP 25147)]

Hamish,

There have been a number of bug fixes since 3.1.4 but no new
formal release.  I'll prepare a 3.1.5 tonight and then hopefully you
can try with that tomorrow. 

Sorry for not following up on your messages sooner.  I thought
Markus had hit it on the head with the lower case suggestion. 

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hamish_nospam at yahoo.com  Mon Feb 28 20:18:07 2005
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:49:34 2007
Subject: [Gdal-dev] Re: (GRASSLIST:5937) Re: loading VMAP0 data with
	v.in.ogr?
In-Reply-To: <931f8ea9050228164740ef3582@mail.gmail.com>
References: <20050225185220.4203e3ad.hamish_nospam@yahoo.com>
	<20050228133428.GK5793@thuille.itc.it>
	<20050301125958.09a3c196.hamish_nospam@yahoo.com>
	<931f8ea9050228164740ef3582@mail.gmail.com>
Message-ID: <20050301141807.7d98ac88.hamish_nospam@yahoo.com>

> > Running it through the debugger shows this is as a SIGILL:
> > 
> > $ gdb `which ogrinfo`
> > GNU gdb 6.3-debian
> > [...]
> > This GDB was configured as "i386-linux"...Using host libthread_db
> > library "/lib/libthread_db.so.1".
> > 
> > (gdb) run gltp:/vrf/var/local/topodata/vmap0/v0sas/vmaplv0/sasaus
> > 'watrcrsl@hydro(*)_line' Starting program: /usr/local/bin/ogrinfo
> > gltp:/vrf/var/local/topodata/vmap0/v0sas/vmaplv0/sasaus
> > 'watrcrsl@hydro(*)_line' [Thread debugging using libthread_db
> > enabled] [New Thread 16384 (LWP 25147)]
> 
> Hamish,
> 
> There have been a number of bug fixes since 3.1.4 but no new
> formal release.


I'm recompiling OGDI and GDAL now.. bonehead mistake by me. The test
system I am running it on is AMD not Intel and I used
CFLAGS="-march=pentium4".

I'm pretty sure that will be it.. 

[time passes]

..yup, ogrinfo works now.


> I'll prepare a 3.1.5 tonight and then hopefully you can try with that
> tomorrow. 

Having support for uppercase letters in the path name and dealing with
files that end with a "." would be nice in a new release. :)



thanks & sorry for the inconvenience,

Hamish

